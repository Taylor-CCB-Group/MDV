const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../assets/whyDidYouRender-BHqnAp8X.js","../assets/createSvgIcon-6gFOQ5xZ.js","../assets/raw-D-xlsccP.js","../assets/lzw-C8SAzNNs.js","../assets/jpeg-RJGuIsKe.js","../assets/deflate-CA5tTHQ_.js","../assets/pako.esm-CPws4d4z.js","../assets/packbits-C1ej-UzG.js","../assets/lerc-BiCGFepN.js","../assets/webimage-DEhUXo1v.js","../assets/index-CLZsWIdx.js","../assets/VivViewerMDV-SkLw12p-.js","../assets/panel.js_v0-Cg5IgG0c.js"])))=>i.map(i=>d[i]);
var K_=Object.defineProperty;var z_=(f,s,d)=>s in f?K_(f,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):f[s]=d;var Bt=(f,s,d)=>z_(f,typeof s!="symbol"?s+"":s,d);import{R as React$1,r as reactExports,a as reactDomExports,g as getDefaultExportFromCjs,j as jsxRuntimeExports,c as createTheme,T as ThemeProvider,C as CssBaseline,b as createRoot,d as React$2,e as clsx,f as generateUtilityClasses,h as generateUtilityClass,s as styled,_ as _extends$a,u as useDefaultProps,i as duration,k as Transition$2,l as _objectWithoutPropertiesLoose$1,m as useTheme$1,n as useTimeout,o as useForkRef,p as composeClasses,q as getTransitionProps,P as Paper,t as useControlled,v as useSlot,B as ButtonBase,w as createSvgIcon,x as useId$1,y as useEventCallback,z as setRef$1,A as require$$1,D as ownerDocument,E as Portal,F as useEnhancedEffect,G as useSlotProps,H as capitalize$1,I as alpha_1,J as inputClasses,K as inputBaseClasses,L as outlinedInputClasses,M as filledInputClasses,N as IconButton,O as ArrowDropDownIcon,Q as ButtonGroupContext,S as ButtonGroupButtonContext,U as rootShouldForwardProp,V as useFormControl,W as clamp$4,X as useIsFocusVisible,Y as extractEventHandlers,Z as isHostComponent,$ as lighten_1,a0 as darken_1,a1 as slotShouldForwardProp,a2 as useRtl,a3 as Grow,a4 as appendOwnerState,a5 as Timeout,a6 as requireCreateSvgIcon,a7 as interopRequireDefaultExports,a8 as TextField,a9 as Button$1,aa as Dialog,ab as commonjsGlobal,ac as getAugmentedNamespace,ad as Typography}from"../assets/createSvgIcon-6gFOQ5xZ.js";function _mergeNamespaces(f,s){for(var d=0;d<s.length;d++){const _=s[d];if(typeof _!="string"&&!Array.isArray(_)){for(const S in _)if(S!=="default"&&!(S in f)){const T=Object.getOwnPropertyDescriptor(_,S);T&&Object.defineProperty(f,S,T.get?T:{enumerable:!0,get:()=>_[S]})}}}return Object.freeze(Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}))}const scriptRel="modulepreload",assetsURL=function(f,s){return new URL(f,s).href},seen={},__vitePreload=function(s,d,_){let S=Promise.resolve();if(d&&d.length>0){const F=document.getElementsByTagName("link"),M=document.querySelector("meta[property=csp-nonce]"),P=(M==null?void 0:M.nonce)||(M==null?void 0:M.getAttribute("nonce"));S=Promise.allSettled(d.map(H=>{if(H=assetsURL(H,_),H in seen)return;seen[H]=!0;const J=H.endsWith(".css"),K=J?'[rel="stylesheet"]':"";if(!!_)for(let se=F.length-1;se>=0;se--){const ae=F[se];if(ae.href===H&&(!J||ae.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${H}"]${K}`))return;const oe=document.createElement("link");if(oe.rel=J?"stylesheet":scriptRel,J||(oe.as="script"),oe.crossOrigin="",oe.href=H,P&&oe.setAttribute("nonce",P),document.head.appendChild(oe),J)return new Promise((se,ae)=>{oe.addEventListener("load",se),oe.addEventListener("error",()=>ae(new Error(`Unable to preload CSS for ${H}`)))})}))}function T(F){const M=new Event("vite:preloadError",{cancelable:!0});if(M.payload=F,window.dispatchEvent(M),!M.defaultPrevented)throw F}return S.then(F=>{for(const M of F||[])M.status==="rejected"&&T(M.reason);return s().catch(T)})};async function loadWdyr(){console.log("Development mode...");const{default:f}=await __vitePreload(async()=>{const{default:s}=await import("../assets/whyDidYouRender-BHqnAp8X.js").then(d=>d.w);return{default:s}},__vite__mapDeps([0,1]),import.meta.url);console.log("Enabling whyDidYouRender..."),f(React$1,{trackAllPureComponents:!0,trackHooks:!0,logOnDifferentValues:!0,logOwnerReasons:!0,include:[/.*/]})}const urlParams$1=new URLSearchParams(window.location.search);urlParams$1.get("wdyr")&&loadWdyr();function getRandomString(f,s){f||(f=6),s=s==null?void 0:s.toLowerCase();let d="",_=0;const S=s==="a"?10:0,T=s==="n"?10:62;for(;_++<f;){let F=Math.random()*(T-S)+S<<0;d+=String.fromCharCode(F+=F>9?F<36?55:61:48)}return d}function debounce$2(f,s){let d;return(..._)=>{clearTimeout(d),d=setTimeout(()=>{f.apply(this,_)},s)}}function isColumnNumeric(f){const s=f.datatype;return s==="double"||s==="int32"||s==="integer"}function isColumnText(f){const s=f.datatype;return s==="text"||s==="multitext"||s==="text16"}class ContextMenu{constructor(s){this.setItemFunction=s,this.menus=[]}show(s,d){this.menus.length>0&&this.remove();const _=this.setItemFunction(d);this._addMenu(_,s.pageX,s.pageY),console.log(s.clientY),s.stopPropagation(),this.removeFunc=()=>{this.remove()},this._getDocument().body.addEventListener("click",this.removeFunc)}remove(){for(const s of this.menus)s.remove();this.menus=[],this.removeFunc&&this._getDocument().body.removeEventListener("click",this.removeFunc)}_addMenu(s,d,_){const S=document.createElement("div"),T=this._getDocument(),F=this.menus.length;S.classList.add("ciview-ctm-main");for(const P of s)this._addItem(S,P,F);T.body.append(S);const M=S.getBoundingClientRect();d+M.width>T.body.clientWidth&&(d=T.body.clientWidth-M.width-3),S.style.left=`${d}px`,S.style.top=`${_}px`,this.menus.push(S)}_getDocument(){return this.__doc__?this.__doc__:document}_showSubmenu(s,d,_){for(let T=_+1;T<this.menus.length;T++)this.menus[T].remove();this.menus=this.menus.slice(0,_+1);const S=s.getBoundingClientRect();this._addMenu(d,S.left+S.width+1,S.top)}_addItem(s,d,_){const S=document.createElement("div");if(S.classList.add("ciview-ctm-item"),d.ghosted?S.classList.add("ciview-ctm-ghosted"):S.classList.add("ciview-ctm-active"),d.icon){const F=document.createElement("i");for(const M of d.icon.split(" "))F.classList.add(M);F.classList.add("ciview-ctm-left-icon"),S.appendChild(F)}const T=document.createElement("span");if(T.appendChild(document.createTextNode(d.text)),S.append(T),d.subitems){const F=document.createElement("i");F.classList.add("fas","fa-caret-right","ciview-ctm-right-icon"),S.appendChild(F)}S.addEventListener("click",F=>{if(d.func&&!d.ghosted&&d.func(F),d.subitems){this._showSubmenu(S,d.subitems,_);for(const M of s.children)M.classList.remove("ciview-ctm-selected");S.classList.add("ciview-ctm-selected")}else this.remove();F.stopPropagation()}),s.append(S)}}var global$1=typeof window<"u"?window:null,ssr=global$1===null,document$1=ssr?void 0:global$1.document,addEventListener="addEventListener",removeEventListener="removeEventListener",getBoundingClientRect$1="getBoundingClientRect",gutterStartDragging="_a",aGutterSize="_b",bGutterSize="_c",HORIZONTAL="horizontal",NOOP$1=function(){return!1},calc=ssr?"calc":["","-webkit-","-moz-","-o-"].filter(function(f){var s=document$1.createElement("div");return s.style.cssText="width:"+f+"calc(9px)",!!s.style.length}).shift()+"calc",isString$1=function(f){return typeof f=="string"||f instanceof String},elementOrSelector=function(f){if(isString$1(f)){var s=document$1.querySelector(f);if(!s)throw new Error("Selector "+f+" did not match a DOM element");return s}return f},getOption=function(f,s,d){var _=f[s];return _!==void 0?_:d},getGutterSize=function(f,s,d,_){if(s){if(_==="end")return 0;if(_==="center")return f/2}else if(d){if(_==="start")return 0;if(_==="center")return f/2}return f},defaultGutterFn=function(f,s){var d=document$1.createElement("div");return d.className="gutter gutter-"+s,d},defaultElementStyleFn=function(f,s,d){var _={};return isString$1(s)?_[f]=s:_[f]=calc+"("+s+"% - "+d+"px)",_},defaultGutterStyleFn=function(f,s){var d;return d={},d[f]=s+"px",d},Split=function(f,s){if(s===void 0&&(s={}),ssr)return{};var d=f,_,S,T,F,M,P;Array.from&&(d=Array.from(d));var H=elementOrSelector(d[0]),J=H.parentNode,K=getComputedStyle?getComputedStyle(J):null,z=K?K.flexDirection:null,oe=getOption(s,"sizes")||d.map(function(){return 100/d.length}),se=getOption(s,"minSize",100),ae=Array.isArray(se)?se:d.map(function(){return se}),ge=getOption(s,"maxSize",1/0),pe=Array.isArray(ge)?ge:d.map(function(){return ge}),he=getOption(s,"expandToMin",!1),ve=getOption(s,"gutterSize",10),be=getOption(s,"gutterAlign","center"),Re=getOption(s,"snapOffset",30),Fe=Array.isArray(Re)?Re:d.map(function(){return Re}),ye=getOption(s,"dragInterval",1),Ue=getOption(s,"direction",HORIZONTAL),It=getOption(s,"cursor",Ue===HORIZONTAL?"col-resize":"row-resize"),St=getOption(s,"gutter",defaultGutterFn),At=getOption(s,"elementStyle",defaultElementStyleFn),xt=getOption(s,"gutterStyle",defaultGutterStyleFn);Ue===HORIZONTAL?(_="width",S="clientX",T="left",F="right",M="clientWidth"):Ue==="vertical"&&(_="height",S="clientY",T="top",F="bottom",M="clientHeight");function Ct(rA,ta,fa,yA){var _A=At(_,ta,fa,yA);Object.keys(_A).forEach(function(la){rA.style[la]=_A[la]})}function Nt(rA,ta,fa){var yA=xt(_,ta,fa);Object.keys(yA).forEach(function(_A){rA.style[_A]=yA[_A]})}function qt(){return P.map(function(rA){return rA.size})}function Jn(rA){return"touches"in rA?rA.touches[0][S]:rA[S]}function qr(rA){var ta=P[this.a],fa=P[this.b],yA=ta.size+fa.size;ta.size=rA/this.size*yA,fa.size=yA-rA/this.size*yA,Ct(ta.element,ta.size,this[aGutterSize],ta.i),Ct(fa.element,fa.size,this[bGutterSize],fa.i)}function na(rA){var ta,fa=P[this.a],yA=P[this.b];this.dragging&&(ta=Jn(rA)-this.start+(this[aGutterSize]-this.dragOffset),ye>1&&(ta=Math.round(ta/ye)*ye),ta<=fa.minSize+fa.snapOffset+this[aGutterSize]?ta=fa.minSize+this[aGutterSize]:ta>=this.size-(yA.minSize+yA.snapOffset+this[bGutterSize])&&(ta=this.size-(yA.minSize+this[bGutterSize])),ta>=fa.maxSize-fa.snapOffset+this[aGutterSize]?ta=fa.maxSize+this[aGutterSize]:ta<=this.size-(yA.maxSize-yA.snapOffset+this[bGutterSize])&&(ta=this.size-(yA.maxSize+this[bGutterSize])),qr.call(this,ta),getOption(s,"onDrag",NOOP$1)(qt()))}function qn(){var rA=P[this.a].element,ta=P[this.b].element,fa=rA[getBoundingClientRect$1](),yA=ta[getBoundingClientRect$1]();this.size=fa[_]+yA[_]+this[aGutterSize]+this[bGutterSize],this.start=fa[T],this.end=fa[F]}function vA(rA){if(!getComputedStyle)return null;var ta=getComputedStyle(rA);if(!ta)return null;var fa=rA[M];return fa===0?null:(Ue===HORIZONTAL?fa-=parseFloat(ta.paddingLeft)+parseFloat(ta.paddingRight):fa-=parseFloat(ta.paddingTop)+parseFloat(ta.paddingBottom),fa)}function TA(rA){var ta=vA(J);if(ta===null||ae.reduce(function(la,AA){return la+AA},0)>ta)return rA;var fa=0,yA=[],_A=rA.map(function(la,AA){var tA=ta*la/100,ba=getGutterSize(ve,AA===0,AA===rA.length-1,be),iA=ae[AA]+ba;return tA<iA?(fa+=iA-tA,yA.push(0),iA):(yA.push(tA-iA),tA)});return fa===0?rA:_A.map(function(la,AA){var tA=la;if(fa>0&&yA[AA]-fa>0){var ba=Math.min(fa,yA[AA]-fa);fa-=ba,tA=la-ba}return tA/ta*100})}function VA(){var rA=this,ta=P[rA.a].element,fa=P[rA.b].element;rA.dragging&&getOption(s,"onDragEnd",NOOP$1)(qt()),rA.dragging=!1,global$1[removeEventListener]("mouseup",rA.stop),global$1[removeEventListener]("touchend",rA.stop),global$1[removeEventListener]("touchcancel",rA.stop),global$1[removeEventListener]("mousemove",rA.move),global$1[removeEventListener]("touchmove",rA.move),rA.stop=null,rA.move=null,ta[removeEventListener]("selectstart",NOOP$1),ta[removeEventListener]("dragstart",NOOP$1),fa[removeEventListener]("selectstart",NOOP$1),fa[removeEventListener]("dragstart",NOOP$1),ta.style.userSelect="",ta.style.webkitUserSelect="",ta.style.MozUserSelect="",ta.style.pointerEvents="",fa.style.userSelect="",fa.style.webkitUserSelect="",fa.style.MozUserSelect="",fa.style.pointerEvents="",rA.gutter.style.cursor="",rA.parent.style.cursor="",document$1.body.style.cursor=""}function mI(rA){if(!("button"in rA&&rA.button!==0)){var ta=this,fa=P[ta.a].element,yA=P[ta.b].element;ta.dragging||getOption(s,"onDragStart",NOOP$1)(qt()),rA.preventDefault(),ta.dragging=!0,ta.move=na.bind(ta),ta.stop=VA.bind(ta),global$1[addEventListener]("mouseup",ta.stop),global$1[addEventListener]("touchend",ta.stop),global$1[addEventListener]("touchcancel",ta.stop),global$1[addEventListener]("mousemove",ta.move),global$1[addEventListener]("touchmove",ta.move),fa[addEventListener]("selectstart",NOOP$1),fa[addEventListener]("dragstart",NOOP$1),yA[addEventListener]("selectstart",NOOP$1),yA[addEventListener]("dragstart",NOOP$1),fa.style.userSelect="none",fa.style.webkitUserSelect="none",fa.style.MozUserSelect="none",fa.style.pointerEvents="none",yA.style.userSelect="none",yA.style.webkitUserSelect="none",yA.style.MozUserSelect="none",yA.style.pointerEvents="none",ta.gutter.style.cursor=It,ta.parent.style.cursor=It,document$1.body.style.cursor=It,qn.call(ta),ta.dragOffset=Jn(rA)-ta.end}}oe=TA(oe);var jA=[];P=d.map(function(rA,ta){var fa={element:elementOrSelector(rA),size:oe[ta],minSize:ae[ta],maxSize:pe[ta],snapOffset:Fe[ta],i:ta},yA;if(ta>0&&(yA={a:ta-1,b:ta,dragging:!1,direction:Ue,parent:J},yA[aGutterSize]=getGutterSize(ve,ta-1===0,!1,be),yA[bGutterSize]=getGutterSize(ve,!1,ta===d.length-1,be),z==="row-reverse"||z==="column-reverse")){var _A=yA.a;yA.a=yA.b,yA.b=_A}if(ta>0){var la=St(ta,Ue,fa.element);Nt(la,ve,ta),yA[gutterStartDragging]=mI.bind(yA),la[addEventListener]("mousedown",yA[gutterStartDragging]),la[addEventListener]("touchstart",yA[gutterStartDragging]),J.insertBefore(la,fa.element),yA.gutter=la}return Ct(fa.element,fa.size,getGutterSize(ve,ta===0,ta===d.length-1,be),ta),ta>0&&jA.push(yA),fa});function aI(rA){var ta=rA.i===jA.length,fa=ta?jA[rA.i-1]:jA[rA.i];qn.call(fa);var yA=ta?fa.size-rA.minSize-fa[bGutterSize]:rA.minSize+fa[aGutterSize];qr.call(fa,yA)}P.forEach(function(rA){var ta=rA.element[getBoundingClientRect$1]()[_];ta<rA.minSize&&(he?aI(rA):rA.minSize=ta)});function WA(rA){var ta=TA(rA);ta.forEach(function(fa,yA){if(yA>0){var _A=jA[yA-1],la=P[_A.a],AA=P[_A.b];la.size=ta[yA-1],AA.size=fa,Ct(la.element,la.size,_A[aGutterSize],la.i),Ct(AA.element,AA.size,_A[bGutterSize],AA.i)}})}function KA(rA,ta){jA.forEach(function(fa){if(ta!==!0?fa.parent.removeChild(fa.gutter):(fa.gutter[removeEventListener]("mousedown",fa[gutterStartDragging]),fa.gutter[removeEventListener]("touchstart",fa[gutterStartDragging])),rA!==!0){var yA=At(_,fa.a.size,fa[aGutterSize]);Object.keys(yA).forEach(function(_A){P[fa.a].element.style[_A]="",P[fa.b].element.style[_A]=""})}})}return{setSizes:WA,getSizes:qt,collapse:function(ta){aI(P[ta])},destroy:KA,parent:J,pairs:jA}};function createEl(f,s,d){const _=document.createElement(f);return s&&addElProps(_,s),d&&d.append(_),_}function createSVGEl(f,s,d){const _=document.createElementNS("http://www.w3.org/2000/svg",f);if(s)for(const S in s)if((S==="styles"||S==="style")&&typeof s[S]=="object")for(const T in s[S])_.style[T]=s[S][T];else if(S==="text")_.textContent=s[S];else if(S==="classes")for(const T of s[S])_.classList.add(T);else _.setAttributeNS(null,S,s[S]);return d&&d.append(_),_}function splitPane(f,s={}){const d=s.direction||"horizontal",_=s.number||2,S=[],T=d==="horizontal"?["split-horizontal"]:["split-vertical"];for(let F=0;F<_;F++)S.push(createEl("div",{classes:T},f));return Split(S,{direction:d,gutterSize:5,cursor:"pointer",sizes:s.sizes,onDragEnd:()=>window.dispatchEvent(new Event("resize"))}),S}function createMenuIcon(f,s,d){const _={role:"tooltip"},S=s.tooltip;S&&Object.assign(_,{"aria-label":S.text,"data-microtip-size":S.size||"small","data-microtip-position":S.position||"bottom-left"});const T=createEl("span",_);return createEl("i",{classes:["ciview-menu-icon"].concat(f.split(" ")),styles:{fontSize:s.size||"18px"}},T),s.func&&T.addEventListener("click",F=>s.func(F)),d&&d.append(T),T}function addElProps(f,s){for(const d in s)if((d==="styles"||d==="style")&&typeof s[d]=="object")for(const _ in s[d])f.style[_]=s[d][_];else if(d==="text")f.textContent=s[d];else if(d==="classes")for(const _ of s[d])f.classList.add(_);else f.setAttribute(d,s[d])}function createFilterElement(f,s){const d=createEl("input",{placeholder:"Filter",type:"text",styles:{width:"4em",margin:"0.2em"}},s);return d.oninput=_=>{const S=_.target.value.toLowerCase().split(" ");for(const T of f.options)S.some(M=>T.text.toLowerCase().indexOf(M)===-1)?T.style.display="none":T.style.display="block"},d}function makeSortable(f,s={}){let d=null,_=!1;function S(H){return this.after(d),H.preventDefault(),!1}function T(H){_=!1,d.classList.remove("mdv-element-dragged"),s.sortEnded&&s.sortEnded(Array.from(f.children).slice(1))}function F(H){s.handle?H.target.classList.contains(s.handle)?_=!0:_=!1:_=!0}function M(H){if(!_)return H.preventDefault(),!1;d=this,this.classList.add("mdv-element-dragged"),H.dataTransfer.setDragImage(createEl("div",{}),0,0)}const P=createEl("div",{styles:{height:"5px"}});f.prepend(P),P.addEventListener("dragover",S);for(let H=0;H<f.children.length;H++){const J=f.children[H];J.draggable=!0,J.addEventListener("dragover",S),J.addEventListener("dragstart",M),J.addEventListener("dragend",T),J.addEventListener("mousedown",F)}}function makeResizable(f,s={}){if(f.__resizeinfo__)return;const d={resize:f.style.resize,overflow:f.style.overflow};f.__doc__=s.doc||document,f.style.overflow="hidden",s.onresizeend&&(d.onresize=addResizeListener(f,(M,P)=>{s.onresizeend(M,P)},s.onResizeStart)),createEl("div",{classes:["resizer-both"]},f).addEventListener("mousedown",S,!1);function S(M){d.startX=M.clientX,d.startY=M.clientY,d.startWidth=Number.parseInt(document.defaultView.getComputedStyle(f).width,10),d.startHeight=Number.parseInt(document.defaultView.getComputedStyle(f).height,10),f.__doc__.documentElement.addEventListener("mousemove",T,!1),f.__doc__.documentElement.addEventListener("mouseup",F,!1)}function T(M){f.style.width=`${d.startWidth+M.clientX-d.startX}px`,f.style.height=`${d.startHeight+M.clientY-d.startY}px`}function F(M){f.__doc__.documentElement.removeEventListener("mousemove",T,!1),f.__doc__.documentElement.removeEventListener("mouseup",F,!1)}f.__resizeinfo__=d}function removeResizable(f){if(!f.__resizeinfo__)return;const s=f.__resizeinfo__;f.style.resize=s.resize,f.style.overflow=s.overflow,s.onresize&&f.removeEventListener("mouseup",s.onresize),f.__resizeinfo__=void 0}function removeDraggable(f){const s=f.__draginfo__;s&&(s.handle.style.cursor=s.cursor,f.style.position=s.position,s.handle.onmousedown=null,f.__draginfo__=void 0)}class MDVProgress{constructor(s,d){this.el=s,this.max=d.max||100,s.classList.add("mdv-progress-outer"),this.bar=createEl("div",{classes:["mdv-progress-inner"]},s),this.text=createEl("div",{classes:["mdv-progress-text"]},s),this.setText(d.text||""),this.setValue(d.value||0)}setText(s){this.text.textContent=s}setValue(s){this.bar.style.width=`${Math.round(s/this.max*100)}%`}}function makeDraggable(f,s={}){s.doc||(s.doc=document);let d=0,_=0,S=0,T=0;const F=s.handle?f.querySelector(s.handle):f;let M=null;s.contain&&(M={dir:s.contain}),F.onmousedown=P,f.__draginfo__={handle:F,cursor:F.style.cursor,position:f.style.position},F.style.cursor="move",f.style.position="absolute",f.style.margin="0px 0px 0px 0px",f.__doc__=s.doc;function P(K){K=K||window.event,K.preventDefault(),S=K.clientX,T=K.clientY,s.ondragstart&&s.ondragstart(f),M&&(M.p_bb=f.parentElement.getBoundingClientRect(),M.c_bb=f.getBoundingClientRect()),f.__doc__.onmouseup=J,f.__doc__.onmousemove=H}function H(K){K=K||window.event,K.preventDefault(),K.stopPropagation(),d=S-K.clientX,_=T-K.clientY,S=K.clientX,T=K.clientY;const z=f.offsetTop-_,oe=f.offsetLeft-d;M&&(z<0||z+M.c_bb.height>M.p_bb.height&&M.dir!=="topleft"||oe<0||oe+M.c_bb.width>M.p_bb.width&&M.dir!=="topleft")||(s.y_axis||(f.style.top=`${z}px`),f.style.left=`${oe}px`)}function J(){s.ondragend&&s.ondragend(),f.__doc__.onmouseup=null,f.__doc__.onmousemove=null}}function addResizeListener(f,s,d){const _=f.getBoundingClientRect();let S=_.width,T=_.height;const F=M=>{const P=f.getBoundingClientRect();(P.width!==S||P.height!==T)&&s(P.width,P.height),S=P.width,T=P.height};return d&&f.addEventListener("mousedown",d),f.addEventListener("mouseup",F),F}function getElDim(f){const s=f.getBoundingClientRect(),d=window.pageXOffset||document.documentElement.scrollLeft,_=window.pageYOffset||document.documentElement.scrollTop;return{top:s.top+_,left:s.left+d,height:s.height,width:s.width}}const chartTypes={};function die(f){for(var s=arguments.length,d=new Array(s>1?s-1:0),_=1;_<s;_++)d[_-1]=arguments[_];throw new Error(typeof f=="number"?"[MobX] minified error nr: "+f+(d.length?" "+d.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+f)}var mockGlobal={};function getGlobal(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:mockGlobal}var assign$1=Object.assign,getDescriptor=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY$3=[];Object.freeze(EMPTY_ARRAY$3);var EMPTY_OBJECT$1={};Object.freeze(EMPTY_OBJECT$1);var hasProxy=typeof Proxy<"u",plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(f){var s=!1;return function(){if(!s)return s=!0,f.apply(this,arguments)}}var noop$a=function(){};function isFunction$2(f){return typeof f=="function"}function isStringish(f){var s=typeof f;switch(s){case"string":case"symbol":case"number":return!0}return!1}function isObject$b(f){return f!==null&&typeof f=="object"}function isPlainObject$2(f){if(!isObject$b(f))return!1;var s=Object.getPrototypeOf(f);if(s==null)return!0;var d=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return typeof d=="function"&&d.toString()===plainObjectString}function isGenerator(f){var s=f==null?void 0:f.constructor;return s?s.name==="GeneratorFunction"||s.displayName==="GeneratorFunction":!1}function addHiddenProp(f,s,d){defineProperty(f,s,{enumerable:!1,writable:!0,configurable:!0,value:d})}function addHiddenFinalProp(f,s,d){defineProperty(f,s,{enumerable:!1,writable:!1,configurable:!0,value:d})}function createInstanceofPredicate(f,s){var d="isMobX"+f;return s.prototype[d]=!0,function(_){return isObject$b(_)&&_[d]===!0}}function isES6Map(f){return f!=null&&Object.prototype.toString.call(f)==="[object Map]"}function isPlainES6Map(f){var s=Object.getPrototypeOf(f),d=Object.getPrototypeOf(s),_=Object.getPrototypeOf(d);return _===null}function isES6Set(f){return f!=null&&Object.prototype.toString.call(f)==="[object Set]"}var hasGetOwnPropertySymbols=typeof Object.getOwnPropertySymbols<"u";function getPlainObjectKeys(f){var s=Object.keys(f);if(!hasGetOwnPropertySymbols)return s;var d=Object.getOwnPropertySymbols(f);return d.length?[].concat(s,d.filter(function(_){return objectPrototype.propertyIsEnumerable.call(f,_)})):s}var ownKeys$2=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:Object.getOwnPropertyNames;function toPrimitive$1(f){return f===null?null:typeof f=="object"?""+f:f}function hasProp(f,s){return objectPrototype.hasOwnProperty.call(f,s)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function(s){var d={};return ownKeys$2(s).forEach(function(_){d[_]=getDescriptor(s,_)}),d};function getFlag(f,s){return!!(f&s)}function setFlag(f,s,d){return d?f|=s:f&=~s,f}function _arrayLikeToArray$2(f,s){(s==null||s>f.length)&&(s=f.length);for(var d=0,_=Array(s);d<s;d++)_[d]=f[d];return _}function _defineProperties(f,s){for(var d=0;d<s.length;d++){var _=s[d];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_toPropertyKey(_.key),_)}}function _createClass(f,s,d){return s&&_defineProperties(f.prototype,s),Object.defineProperty(f,"prototype",{writable:!1}),f}function _createForOfIteratorHelperLoose(f,s){var d=typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(d)return(d=d.call(f)).next.bind(d);if(Array.isArray(f)||(d=_unsupportedIterableToArray$2(f))||s){d&&(f=d);var _=0;return function(){return _>=f.length?{done:!0}:{done:!1,value:f[_++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(f){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var _ in d)({}).hasOwnProperty.call(d,_)&&(f[_]=d[_])}return f},_extends$9.apply(null,arguments)}function _inheritsLoose(f,s){f.prototype=Object.create(s.prototype),f.prototype.constructor=f,_setPrototypeOf(f,s)}function _setPrototypeOf(f,s){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,_){return d.__proto__=_,d},_setPrototypeOf(f,s)}function _toPrimitive(f,s){if(typeof f!="object"||!f)return f;var d=f[Symbol.toPrimitive];if(d!==void 0){var _=d.call(f,s);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}function _toPropertyKey(f){var s=_toPrimitive(f,"string");return typeof s=="symbol"?s:s+""}function _unsupportedIterableToArray$2(f,s){if(f){if(typeof f=="string")return _arrayLikeToArray$2(f,s);var d={}.toString.call(f).slice(8,-1);return d==="Object"&&f.constructor&&(d=f.constructor.name),d==="Map"||d==="Set"?Array.from(f):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?_arrayLikeToArray$2(f,s):void 0}}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(f){function s(d,_){if(is20223Decorator(_))return f.decorate_20223_(d,_);storeAnnotation(d,_,f)}return Object.assign(s,f)}function storeAnnotation(f,s,d){hasProp(f,storedAnnotationsSymbol)||addHiddenProp(f,storedAnnotationsSymbol,_extends$9({},f[storedAnnotationsSymbol])),isOverride(d)||(f[storedAnnotationsSymbol][s]=d)}function collectStoredAnnotations(f){return hasProp(f,storedAnnotationsSymbol)||addHiddenProp(f,storedAnnotationsSymbol,_extends$9({},f[storedAnnotationsSymbol])),f[storedAnnotationsSymbol]}function is20223Decorator(f){return typeof f=="object"&&typeof f.kind=="string"}var $mobx=Symbol("mobx administration"),Atom=function(){function f(d){d===void 0&&(d="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=d}var s=f.prototype;return s.onBO=function(){this.onBOL&&this.onBOL.forEach(function(_){return _()})},s.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(_){return _()})},s.reportObserved=function(){return reportObserved(this)},s.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},s.toString=function(){return this.name_},_createClass(f,[{key:"isBeingObserved",get:function(){return getFlag(this.flags_,f.isBeingObservedMask_)},set:function(_){this.flags_=setFlag(this.flags_,f.isBeingObservedMask_,_)}},{key:"isPendingUnobservation",get:function(){return getFlag(this.flags_,f.isPendingUnobservationMask_)},set:function(_){this.flags_=setFlag(this.flags_,f.isPendingUnobservationMask_,_)}},{key:"diffValue",get:function(){return getFlag(this.flags_,f.diffValueMask_)?1:0},set:function(_){this.flags_=setFlag(this.flags_,f.diffValueMask_,_===1)}}])}();Atom.isBeingObservedMask_=1;Atom.isPendingUnobservationMask_=2;Atom.diffValueMask_=4;var isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(f,s,d){s===void 0&&(s=noop$a),d===void 0&&(d=noop$a);var _=new Atom(f);return s!==noop$a&&onBecomeObserved(_,s),d!==noop$a&&onBecomeUnobserved(_,d),_}function identityComparer(f,s){return f===s}function structuralComparer(f,s){return deepEqual$2(f,s)}function shallowComparer(f,s){return deepEqual$2(f,s,1)}function defaultComparer(f,s){return Object.is?Object.is(f,s):f===s?f!==0||1/f===1/s:f!==f&&s!==s}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer};function deepEnhancer(f,s,d){return isObservable(f)?f:Array.isArray(f)?observable.array(f,{name:d}):isPlainObject$2(f)?observable.object(f,void 0,{name:d}):isES6Map(f)?observable.map(f,{name:d}):isES6Set(f)?observable.set(f,{name:d}):typeof f=="function"&&!isAction(f)&&!isFlow(f)?isGenerator(f)?flow(f):autoAction(d,f):f}function shallowEnhancer(f,s,d){if(f==null||isObservableObject(f)||isObservableArray(f)||isObservableMap(f)||isObservableSet(f))return f;if(Array.isArray(f))return observable.array(f,{name:d,deep:!1});if(isPlainObject$2(f))return observable.object(f,void 0,{name:d,deep:!1});if(isES6Map(f))return observable.map(f,{name:d,deep:!1});if(isES6Set(f))return observable.set(f,{name:d,deep:!1})}function referenceEnhancer(f){return f}function refStructEnhancer(f,s){return deepEqual$2(f,s)?s:f}var OVERRIDE="override";function isOverride(f){return f.annotationType_===OVERRIDE}function createActionAnnotation(f,s){return{annotationType_:f,options_:s,make_:make_$1,extend_:extend_$1,decorate_20223_:decorate_20223_$1}}function make_$1(f,s,d,_){var S;if((S=this.options_)!=null&&S.bound)return this.extend_(f,s,d,!1)===null?0:1;if(_===f.target_)return this.extend_(f,s,d,!1)===null?0:2;if(isAction(d.value))return 1;var T=createActionDescriptor(f,this,s,d,!1);return defineProperty(_,s,T),2}function extend_$1(f,s,d,_){var S=createActionDescriptor(f,this,s,d);return f.defineProperty_(s,S,_)}function decorate_20223_$1(f,s){var d=s.kind,_=s.name,S=s.addInitializer,T=this,F=function(H){var J,K,z,oe;return createAction((J=(K=T.options_)==null?void 0:K.name)!=null?J:_.toString(),H,(z=(oe=T.options_)==null?void 0:oe.autoAction)!=null?z:!1)};if(d=="field")return function(P){var H,J=P;return isAction(J)||(J=F(J)),(H=T.options_)!=null&&H.bound&&(J=J.bind(this),J.isMobxAction=!0),J};if(d=="method"){var M;return isAction(f)||(f=F(f)),(M=this.options_)!=null&&M.bound&&S(function(){var P=this,H=P[_].bind(P);H.isMobxAction=!0,P[_]=H}),f}die("Cannot apply '"+T.annotationType_+"' to '"+String(_)+"' (kind: "+d+"):"+(`
'`+T.annotationType_+"' can only be used on properties with a function value."))}function assertActionDescriptor(f,s,d,_){s.annotationType_,_.value}function createActionDescriptor(f,s,d,_,S){var T,F,M,P,H,J,K;S===void 0&&(S=globalState.safeDescriptors),assertActionDescriptor(f,s,d,_);var z=_.value;if((T=s.options_)!=null&&T.bound){var oe;z=z.bind((oe=f.proxy_)!=null?oe:f.target_)}return{value:createAction((F=(M=s.options_)==null?void 0:M.name)!=null?F:d.toString(),z,(P=(H=s.options_)==null?void 0:H.autoAction)!=null?P:!1,(J=s.options_)!=null&&J.bound?(K=f.proxy_)!=null?K:f.target_:void 0),configurable:S?f.isPlainObject_:!0,enumerable:!1,writable:!S}}function createFlowAnnotation(f,s){return{annotationType_:f,options_:s,make_:make_$2,extend_:extend_$2,decorate_20223_:decorate_20223_$2}}function make_$2(f,s,d,_){var S;if(_===f.target_)return this.extend_(f,s,d,!1)===null?0:2;if((S=this.options_)!=null&&S.bound&&(!hasProp(f.target_,s)||!isFlow(f.target_[s]))&&this.extend_(f,s,d,!1)===null)return 0;if(isFlow(d.value))return 1;var T=createFlowDescriptor(f,this,s,d,!1,!1);return defineProperty(_,s,T),2}function extend_$2(f,s,d,_){var S,T=createFlowDescriptor(f,this,s,d,(S=this.options_)==null?void 0:S.bound);return f.defineProperty_(s,T,_)}function decorate_20223_$2(f,s){var d,_=s.name,S=s.addInitializer;return isFlow(f)||(f=flow(f)),(d=this.options_)!=null&&d.bound&&S(function(){var T=this,F=T[_].bind(T);F.isMobXFlow=!0,T[_]=F}),f}function assertFlowDescriptor(f,s,d,_){s.annotationType_,_.value}function createFlowDescriptor(f,s,d,_,S,T){T===void 0&&(T=globalState.safeDescriptors),assertFlowDescriptor(f,s,d,_);var F=_.value;if(isFlow(F)||(F=flow(F)),S){var M;F=F.bind((M=f.proxy_)!=null?M:f.target_),F.isMobXFlow=!0}return{value:F,configurable:T?f.isPlainObject_:!0,enumerable:!1,writable:!T}}function createComputedAnnotation(f,s){return{annotationType_:f,options_:s,make_:make_$3,extend_:extend_$3,decorate_20223_:decorate_20223_$3}}function make_$3(f,s,d){return this.extend_(f,s,d,!1)===null?0:1}function extend_$3(f,s,d,_){return assertComputedDescriptor(f,this,s,d),f.defineComputedProperty_(s,_extends$9({},this.options_,{get:d.get,set:d.set}),_)}function decorate_20223_$3(f,s){var d=this,_=s.name,S=s.addInitializer;return S(function(){var T=asObservableObject(this)[$mobx],F=_extends$9({},d.options_,{get:f,context:this});F.name||(F.name="ObservableObject."+_.toString()),T.values_.set(_,new ComputedValue(F))}),function(){return this[$mobx].getObservablePropValue_(_)}}function assertComputedDescriptor(f,s,d,_){s.annotationType_,_.get}function createObservableAnnotation(f,s){return{annotationType_:f,options_:s,make_:make_$4,extend_:extend_$4,decorate_20223_:decorate_20223_$4}}function make_$4(f,s,d){return this.extend_(f,s,d,!1)===null?0:1}function extend_$4(f,s,d,_){var S,T;return assertObservableDescriptor(f,this),f.defineObservableProperty_(s,d.value,(S=(T=this.options_)==null?void 0:T.enhancer)!=null?S:deepEnhancer,_)}function decorate_20223_$4(f,s){var d=this,_=s.kind,S=s.name,T=new WeakSet;function F(M,P){var H,J,K=asObservableObject(M)[$mobx],z=new ObservableValue(P,(H=(J=d.options_)==null?void 0:J.enhancer)!=null?H:deepEnhancer,"ObservableObject."+S.toString(),!1);K.values_.set(S,z),T.add(M)}if(_=="accessor")return{get:function(){return T.has(this)||F(this,f.get.call(this)),this[$mobx].getObservablePropValue_(S)},set:function(P){return T.has(this)||F(this,P),this[$mobx].setObservablePropValue_(S,P)},init:function(P){return T.has(this)||F(this,P),P}}}function assertObservableDescriptor(f,s,d,_){s.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(f){return{annotationType_:AUTO,options_:f,make_:make_$5,extend_:extend_$5,decorate_20223_:decorate_20223_$5}}function make_$5(f,s,d,_){var S,T;if(d.get)return computed.make_(f,s,d,_);if(d.set){var F=createAction(s.toString(),d.set);return _===f.target_?f.defineProperty_(s,{configurable:globalState.safeDescriptors?f.isPlainObject_:!0,set:F})===null?0:2:(defineProperty(_,s,{configurable:!0,set:F}),2)}if(_!==f.target_&&typeof d.value=="function"){var M;if(isGenerator(d.value)){var P,H=(P=this.options_)!=null&&P.autoBind?flow.bound:flow;return H.make_(f,s,d,_)}var J=(M=this.options_)!=null&&M.autoBind?autoAction.bound:autoAction;return J.make_(f,s,d,_)}var K=((S=this.options_)==null?void 0:S.deep)===!1?observable.ref:observable;if(typeof d.value=="function"&&(T=this.options_)!=null&&T.autoBind){var z;d.value=d.value.bind((z=f.proxy_)!=null?z:f.target_)}return K.make_(f,s,d,_)}function extend_$5(f,s,d,_){var S,T;if(d.get)return computed.extend_(f,s,d,_);if(d.set)return f.defineProperty_(s,{configurable:globalState.safeDescriptors?f.isPlainObject_:!0,set:createAction(s.toString(),d.set)},_);if(typeof d.value=="function"&&(S=this.options_)!=null&&S.autoBind){var F;d.value=d.value.bind((F=f.proxy_)!=null?F:f.target_)}var M=((T=this.options_)==null?void 0:T.deep)===!1?observable.ref:observable;return M.extend_(f,s,d,_)}function decorate_20223_$5(f,s){die("'"+this.annotationType_+"' cannot be used as a decorator")}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(defaultCreateObservableOptions);function asCreateObservableOptions(f){return f||defaultCreateObservableOptions}var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(f){return f.deep===!0?deepEnhancer:f.deep===!1?referenceEnhancer:getEnhancerFromAnnotation(f.defaultDecorator)}function getAnnotationFromOptions(f){var s;return f?(s=f.defaultDecorator)!=null?s:createAutoAnnotation(f):void 0}function getEnhancerFromAnnotation(f){var s,d;return f&&(s=(d=f.options_)==null?void 0:d.enhancer)!=null?s:deepEnhancer}function createObservable(f,s,d){if(is20223Decorator(s))return observableAnnotation.decorate_20223_(f,s);if(isStringish(s)){storeAnnotation(f,s,observableAnnotation);return}return isObservable(f)?f:isPlainObject$2(f)?observable.object(f,s,d):Array.isArray(f)?observable.array(f,s):isES6Map(f)?observable.map(f,s):isES6Set(f)?observable.set(f,s):typeof f=="object"&&f!==null?f:observable.box(f,s)}assign$1(createObservable,observableDecoratorAnnotation);var observableFactories={box:function(s,d){var _=asCreateObservableOptions(d);return new ObservableValue(s,getEnhancerFromOptions(_),_.name,!0,_.equals)},array:function(s,d){var _=asCreateObservableOptions(d);return(globalState.useProxies===!1||_.proxy===!1?createLegacyArray:createObservableArray)(s,getEnhancerFromOptions(_),_.name)},map:function(s,d){var _=asCreateObservableOptions(d);return new ObservableMap(s,getEnhancerFromOptions(_),_.name)},set:function(s,d){var _=asCreateObservableOptions(d);return new ObservableSet(s,getEnhancerFromOptions(_),_.name)},object:function(s,d,_){return initObservable(function(){return extendObservable(globalState.useProxies===!1||(_==null?void 0:_.proxy)===!1?asObservableObject({},_):asDynamicObservableObject({},_),s,d)})},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=assign$1(createObservable,observableFactories),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function(s,d){if(is20223Decorator(d))return computedAnnotation.decorate_20223_(s,d);if(isStringish(d))return storeAnnotation(s,d,computedAnnotation);if(isPlainObject$2(s))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,s));var _=isPlainObject$2(d)?d:{};return _.get=s,_.name||(_.name=s.name||""),new ComputedValue(_)};Object.assign(computed,computedAnnotation);computed.struct=createDecoratorAnnotation(computedStructAnnotation);var _getDescriptor$config,_getDescriptor,currentActionId=0,nextActionId=1,isFunctionNameConfigurable$1=(_getDescriptor$config=(_getDescriptor=getDescriptor(function(){},"name"))==null?void 0:_getDescriptor.configurable)!=null?_getDescriptor$config:!1,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(f,s,d,_){d===void 0&&(d=!1);function S(){return executeAction(f,d,s,_||this,arguments)}return S.isMobxAction=!0,S.toString=function(){return s.toString()},isFunctionNameConfigurable$1&&(tmpNameDescriptor.value=f,defineProperty(S,"name",tmpNameDescriptor)),S}function executeAction(f,s,d,_,S){var T=_startAction(f,s);try{return d.apply(_,S)}catch(F){throw T.error_=F,F}finally{_endAction(T)}}function _startAction(f,s,d,_){var S=!1,T=0,F=globalState.trackingDerivation,M=!s||!F;startBatch();var P=globalState.allowStateChanges;M&&(untrackedStart(),P=allowStateChangesStart(!0));var H=allowStateReadsStart(!0),J={runAsAction_:M,prevDerivation_:F,prevAllowStateChanges_:P,prevAllowStateReads_:H,notifySpy_:S,startTime_:T,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=J.actionId_,J}function _endAction(f){currentActionId!==f.actionId_&&die(30),currentActionId=f.parentActionId_,f.error_!==void 0&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(f.prevAllowStateChanges_),allowStateReadsEnd(f.prevAllowStateReads_),endBatch(),f.runAsAction_&&untrackedEnd(f.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChangesStart(f){var s=globalState.allowStateChanges;return globalState.allowStateChanges=f,s}function allowStateChangesEnd(f){globalState.allowStateChanges=f}var ObservableValue=function(f){function s(_,S,T,F,M){var P;return T===void 0&&(T="ObservableValue"),M===void 0&&(M=comparer.default),P=f.call(this,T)||this,P.enhancer=void 0,P.name_=void 0,P.equals=void 0,P.hasUnreportedChange_=!1,P.interceptors_=void 0,P.changeListeners_=void 0,P.value_=void 0,P.dehancer=void 0,P.enhancer=S,P.name_=T,P.equals=M,P.value_=S(_,void 0,T),P}_inheritsLoose(s,f);var d=s.prototype;return d.dehanceValue=function(S){return this.dehancer!==void 0?this.dehancer(S):S},d.set=function(S){this.value_,S=this.prepareNewValue_(S),S!==globalState.UNCHANGED&&this.setNewValue_(S)},d.prepareNewValue_=function(S){if(hasInterceptors(this)){var T=interceptChange(this,{object:this,type:UPDATE,newValue:S});if(!T)return globalState.UNCHANGED;S=T.newValue}return S=this.enhancer(S,this.value_,this.name_),this.equals(this.value_,S)?globalState.UNCHANGED:S},d.setNewValue_=function(S){var T=this.value_;this.value_=S,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:S,oldValue:T})},d.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},d.intercept_=function(S){return registerInterceptor(this,S)},d.observe_=function(S,T){return T&&S({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,S)},d.raw=function(){return this.value_},d.toJSON=function(){return this.get()},d.toString=function(){return this.name_+"["+this.value_+"]"},d.valueOf=function(){return toPrimitive$1(this.get())},d[Symbol.toPrimitive]=function(){return this.valueOf()},s}(Atom),ComputedValue=function(){function f(d){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,d.get||die(31),this.derivation=d.get,this.name_=d.name||"ComputedValue",d.set&&(this.setter_=createAction("ComputedValue-setter",d.set)),this.equals_=d.equals||(d.compareStructural||d.struct?comparer.structural:comparer.default),this.scope_=d.context,this.requiresReaction_=d.requiresReaction,this.keepAlive_=!!d.keepAlive}var s=f.prototype;return s.onBecomeStale_=function(){propagateMaybeChanged(this)},s.onBO=function(){this.onBOL&&this.onBOL.forEach(function(_){return _()})},s.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(_){return _()})},s.get=function(){if(this.isComputing&&die(32,this.name_,this.derivation),globalState.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());else if(reportObserved(this),shouldCompute(this)){var _=globalState.trackingContext;this.keepAlive_&&!_&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=_}var S=this.value_;if(isCaughtException(S))throw S.cause;return S},s.set=function(_){if(this.setter_){this.isRunningSetter&&die(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,_)}finally{this.isRunningSetter=!1}}else die(34,this.name_)},s.trackAndCompute=function(){var _=this.value_,S=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,T=this.computeValue_(!0),F=S||isCaughtException(_)||isCaughtException(T)||!this.equals_(_,T);return F&&(this.value_=T),F},s.computeValue_=function(_){this.isComputing=!0;var S=allowStateChangesStart(!1),T;if(_)T=trackDerivedFunction(this,this.derivation,this.scope_);else if(globalState.disableErrorBoundaries===!0)T=this.derivation.call(this.scope_);else try{T=this.derivation.call(this.scope_)}catch(F){T=new CaughtException(F)}return allowStateChangesEnd(S),this.isComputing=!1,T},s.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},s.observe_=function(_,S){var T=this,F=!0,M=void 0;return autorun(function(){var P=T.get();if(!F||S){var H=untrackedStart();_({observableKind:"computed",debugObjectName:T.name_,type:UPDATE,object:T,newValue:P,oldValue:M}),untrackedEnd(H)}F=!1,M=P})},s.warnAboutUntrackedRead_=function(){},s.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},s.valueOf=function(){return toPrimitive$1(this.get())},s[Symbol.toPrimitive]=function(){return this.valueOf()},_createClass(f,[{key:"isComputing",get:function(){return getFlag(this.flags_,f.isComputingMask_)},set:function(_){this.flags_=setFlag(this.flags_,f.isComputingMask_,_)}},{key:"isRunningSetter",get:function(){return getFlag(this.flags_,f.isRunningSetterMask_)},set:function(_){this.flags_=setFlag(this.flags_,f.isRunningSetterMask_,_)}},{key:"isBeingObserved",get:function(){return getFlag(this.flags_,f.isBeingObservedMask_)},set:function(_){this.flags_=setFlag(this.flags_,f.isBeingObservedMask_,_)}},{key:"isPendingUnobservation",get:function(){return getFlag(this.flags_,f.isPendingUnobservationMask_)},set:function(_){this.flags_=setFlag(this.flags_,f.isPendingUnobservationMask_,_)}},{key:"diffValue",get:function(){return getFlag(this.flags_,f.diffValueMask_)?1:0},set:function(_){this.flags_=setFlag(this.flags_,f.diffValueMask_,_===1)}}])}();ComputedValue.isComputingMask_=1;ComputedValue.isRunningSetterMask_=2;ComputedValue.isBeingObservedMask_=4;ComputedValue.isPendingUnobservationMask_=8;ComputedValue.diffValueMask_=16;var isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_;(function(f){f[f.NOT_TRACKING_=-1]="NOT_TRACKING_",f[f.UP_TO_DATE_=0]="UP_TO_DATE_",f[f.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",f[f.STALE_=2]="STALE_"})(IDerivationState_||(IDerivationState_={}));var TraceMode;(function(f){f[f.NONE=0]="NONE",f[f.LOG=1]="LOG",f[f.BREAK=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function(s){this.cause=void 0,this.cause=s};function isCaughtException(f){return f instanceof CaughtException}function shouldCompute(f){switch(f.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:{for(var s=allowStateReadsStart(!0),d=untrackedStart(),_=f.observing_,S=_.length,T=0;T<S;T++){var F=_[T];if(isComputedValue(F)){if(globalState.disableErrorBoundaries)F.get();else try{F.get()}catch{return untrackedEnd(d),allowStateReadsEnd(s),!0}if(f.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(d),allowStateReadsEnd(s),!0}}return changeDependenciesStateTo0(f),untrackedEnd(d),allowStateReadsEnd(s),!1}}}function checkIfStateModificationsAreAllowed(f){}function trackDerivedFunction(f,s,d){var _=allowStateReadsStart(!0);changeDependenciesStateTo0(f),f.newObserving_=new Array(f.runId_===0?100:f.observing_.length),f.unboundDepsCount_=0,f.runId_=++globalState.runId;var S=globalState.trackingDerivation;globalState.trackingDerivation=f,globalState.inBatch++;var T;if(globalState.disableErrorBoundaries===!0)T=s.call(d);else try{T=s.call(d)}catch(F){T=new CaughtException(F)}return globalState.inBatch--,globalState.trackingDerivation=S,bindDependencies(f),allowStateReadsEnd(_),T}function bindDependencies(f){for(var s=f.observing_,d=f.observing_=f.newObserving_,_=IDerivationState_.UP_TO_DATE_,S=0,T=f.unboundDepsCount_,F=0;F<T;F++){var M=d[F];M.diffValue===0&&(M.diffValue=1,S!==F&&(d[S]=M),S++),M.dependenciesState_>_&&(_=M.dependenciesState_)}for(d.length=S,f.newObserving_=null,T=s.length;T--;){var P=s[T];P.diffValue===0&&removeObserver(P,f),P.diffValue=0}for(;S--;){var H=d[S];H.diffValue===1&&(H.diffValue=0,addObserver(H,f))}_!==IDerivationState_.UP_TO_DATE_&&(f.dependenciesState_=_,f.onBecomeStale_())}function clearObserving(f){var s=f.observing_;f.observing_=[];for(var d=s.length;d--;)removeObserver(s[d],f);f.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(f){var s=untrackedStart();try{return f()}finally{untrackedEnd(s)}}function untrackedStart(){var f=globalState.trackingDerivation;return globalState.trackingDerivation=null,f}function untrackedEnd(f){globalState.trackingDerivation=f}function allowStateReadsStart(f){var s=globalState.allowStateReads;return globalState.allowStateReads=f,s}function allowStateReadsEnd(f){globalState.allowStateReads=f}function changeDependenciesStateTo0(f){if(f.dependenciesState_!==IDerivationState_.UP_TO_DATE_){f.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var s=f.observing_,d=s.length;d--;)s[d].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var MobXGlobals=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var f=getGlobal();return f.__mobxInstanceCount>0&&!f.__mobxGlobals&&(canMergeGlobalState=!1),f.__mobxGlobals&&f.__mobxGlobals.version!==new MobXGlobals().version&&(canMergeGlobalState=!1),canMergeGlobalState?f.__mobxGlobals?(f.__mobxInstanceCount+=1,f.__mobxGlobals.UNCHANGED||(f.__mobxGlobals.UNCHANGED={}),f.__mobxGlobals):(f.__mobxInstanceCount=1,f.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||die(35)},1),new MobXGlobals)}();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var f=getGlobal();--f.__mobxInstanceCount===0&&(f.__mobxGlobals=void 0),globalState=new MobXGlobals}}function addObserver(f,s){f.observers_.add(s),f.lowestObserverState_>s.dependenciesState_&&(f.lowestObserverState_=s.dependenciesState_)}function removeObserver(f,s){f.observers_.delete(s),f.observers_.size===0&&queueForUnobservation(f)}function queueForUnobservation(f){f.isPendingUnobservation===!1&&(f.isPendingUnobservation=!0,globalState.pendingUnobservations.push(f))}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch===0){runReactions();for(var f=globalState.pendingUnobservations,s=0;s<f.length;s++){var d=f[s];d.isPendingUnobservation=!1,d.observers_.size===0&&(d.isBeingObserved&&(d.isBeingObserved=!1,d.onBUO()),d instanceof ComputedValue&&d.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(f){var s=globalState.trackingDerivation;return s!==null?(s.runId_!==f.lastAccessedBy_&&(f.lastAccessedBy_=s.runId_,s.newObserving_[s.unboundDepsCount_++]=f,!f.isBeingObserved&&globalState.trackingContext&&(f.isBeingObserved=!0,f.onBO())),f.isBeingObserved):(f.observers_.size===0&&globalState.inBatch>0&&queueForUnobservation(f),!1)}function propagateChanged(f){f.lowestObserverState_!==IDerivationState_.STALE_&&(f.lowestObserverState_=IDerivationState_.STALE_,f.observers_.forEach(function(s){s.dependenciesState_===IDerivationState_.UP_TO_DATE_&&s.onBecomeStale_(),s.dependenciesState_=IDerivationState_.STALE_}))}function propagateChangeConfirmed(f){f.lowestObserverState_!==IDerivationState_.STALE_&&(f.lowestObserverState_=IDerivationState_.STALE_,f.observers_.forEach(function(s){s.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?s.dependenciesState_=IDerivationState_.STALE_:s.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(f.lowestObserverState_=IDerivationState_.UP_TO_DATE_)}))}function propagateMaybeChanged(f){f.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(f.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,f.observers_.forEach(function(s){s.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(s.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,s.onBecomeStale_())}))}var Reaction=function(){function f(d,_,S,T){d===void 0&&(d="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=TraceMode.NONE,this.name_=d,this.onInvalidate_=_,this.errorHandler_=S,this.requiresObservable_=T}var s=f.prototype;return s.onBecomeStale_=function(){this.schedule_()},s.schedule_=function(){this.isScheduled||(this.isScheduled=!0,globalState.pendingReactions.push(this),runReactions())},s.runReaction_=function(){if(!this.isDisposed){startBatch(),this.isScheduled=!1;var _=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(S){this.reportExceptionInDerivation_(S)}}globalState.trackingContext=_,endBatch()}},s.track=function(_){if(!this.isDisposed){startBatch(),this.isRunning=!0;var S=globalState.trackingContext;globalState.trackingContext=this;var T=trackDerivedFunction(this,_,void 0);globalState.trackingContext=S,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&clearObserving(this),isCaughtException(T)&&this.reportExceptionInDerivation_(T.cause),endBatch()}},s.reportExceptionInDerivation_=function(_){var S=this;if(this.errorHandler_){this.errorHandler_(_,this);return}if(globalState.disableErrorBoundaries)throw _;var T="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(T,_),globalState.globalReactionErrorHandlers.forEach(function(F){return F(_,S)})},s.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(startBatch(),clearObserving(this),endBatch()))},s.getDisposer_=function(_){var S=this,T=function F(){S.dispose(),_==null||_.removeEventListener==null||_.removeEventListener("abort",F)};return _==null||_.addEventListener==null||_.addEventListener("abort",T),T[$mobx]=this,T},s.toString=function(){return"Reaction["+this.name_+"]"},s.trace=function(_){},_createClass(f,[{key:"isDisposed",get:function(){return getFlag(this.flags_,f.isDisposedMask_)},set:function(_){this.flags_=setFlag(this.flags_,f.isDisposedMask_,_)}},{key:"isScheduled",get:function(){return getFlag(this.flags_,f.isScheduledMask_)},set:function(_){this.flags_=setFlag(this.flags_,f.isScheduledMask_,_)}},{key:"isTrackPending",get:function(){return getFlag(this.flags_,f.isTrackPendingMask_)},set:function(_){this.flags_=setFlag(this.flags_,f.isTrackPendingMask_,_)}},{key:"isRunning",get:function(){return getFlag(this.flags_,f.isRunningMask_)},set:function(_){this.flags_=setFlag(this.flags_,f.isRunningMask_,_)}},{key:"diffValue",get:function(){return getFlag(this.flags_,f.diffValueMask_)?1:0},set:function(_){this.flags_=setFlag(this.flags_,f.diffValueMask_,_===1)}}])}();Reaction.isDisposedMask_=1;Reaction.isScheduledMask_=2;Reaction.isTrackPendingMask_=4;Reaction.isRunningMask_=8;Reaction.diffValueMask_=16;var MAX_REACTION_ITERATIONS=100,reactionScheduler=function(s){return s()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var f=globalState.pendingReactions,s=0;f.length>0;){++s===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+f[0]),f.splice(0));for(var d=f.splice(0),_=0,S=d.length;_<S;_++)d[_].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(f){var s=reactionScheduler;reactionScheduler=function(_){return f(function(){return s(_)})}}function isSpyEnabled(){return!1}function spyReport(f){}function spyReportStart(f){}function spyReportEnd(f){}function spy(f){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(f){var s=function(_,S){if(isFunction$2(_))return createAction(_.name||DEFAULT_ACTION_NAME,_,f);if(isFunction$2(S))return createAction(_,S,f);if(is20223Decorator(S))return(f?autoActionAnnotation:actionAnnotation).decorate_20223_(_,S);if(isStringish(S))return storeAnnotation(_,S,f?autoActionAnnotation:actionAnnotation);if(isStringish(_))return createDecoratorAnnotation(createActionAnnotation(f?AUTOACTION:ACTION,{name:_,autoAction:f}))};return s}var action=createActionFactory(!1);Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);Object.assign(autoAction,autoActionAnnotation);action.bound=createDecoratorAnnotation(actionBoundAnnotation);autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);function runInAction(f){return executeAction(f.name||DEFAULT_ACTION_NAME,!1,f,this,void 0)}function isAction(f){return isFunction$2(f)&&f.isMobxAction===!0}function autorun(f,s){var d,_,S,T;s===void 0&&(s=EMPTY_OBJECT$1);var F=(d=(_=s)==null?void 0:_.name)!=null?d:"Autorun",M=!s.scheduler&&!s.delay,P;if(M)P=new Reaction(F,function(){this.track(K)},s.onError,s.requiresObservable);else{var H=createSchedulerFromOptions(s),J=!1;P=new Reaction(F,function(){J||(J=!0,H(function(){J=!1,P.isDisposed||P.track(K)}))},s.onError,s.requiresObservable)}function K(){f(P)}return(S=s)!=null&&(S=S.signal)!=null&&S.aborted||P.schedule_(),P.getDisposer_((T=s)==null?void 0:T.signal)}var run=function(s){return s()};function createSchedulerFromOptions(f){return f.scheduler?f.scheduler:f.delay?function(s){return setTimeout(s,f.delay)}:run}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(f,s,d){return interceptHook(ON_BECOME_OBSERVED,f,s,d)}function onBecomeUnobserved(f,s,d){return interceptHook(ON_BECOME_UNOBSERVED,f,s,d)}function interceptHook(f,s,d,_){var S=getAtom(s),T=isFunction$2(_)?_:d,F=f+"L";return S[F]?S[F].add(T):S[F]=new Set([T]),function(){var M=S[F];M&&(M.delete(T),M.size===0&&delete S[F])}}var NEVER="never",ALWAYS="always",OBSERVED="observed";function configure(f){f.isolateGlobalState===!0&&isolateGlobalState();var s=f.useProxies,d=f.enforceActions;if(s!==void 0&&(globalState.useProxies=s===ALWAYS?!0:s===NEVER?!1:typeof Proxy<"u"),s==="ifavailable"&&(globalState.verifyProxies=!0),d!==void 0){var _=d===ALWAYS?ALWAYS:d===OBSERVED;globalState.enforceActions=_,globalState.allowStateChanges=!(_===!0||_===ALWAYS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(S){S in f&&(globalState[S]=!!f[S])}),globalState.allowStateReads=!globalState.observableRequiresReaction,f.reactionScheduler&&setReactionScheduler(f.reactionScheduler)}function extendObservable(f,s,d,_){var S=getOwnPropertyDescriptors(s);return initObservable(function(){var T=asObservableObject(f,_)[$mobx];ownKeys$2(S).forEach(function(F){T.extend_(F,S[F],d&&F in d?d[F]:!0)})}),f}function getDependencyTree(f,s){return nodeToDependencyTree(getAtom(f,s))}function nodeToDependencyTree(f){var s={name:f.name_};return f.observing_&&f.observing_.length>0&&(s.dependencies=unique$1(f.observing_).map(nodeToDependencyTree)),s}function unique$1(f){return Array.from(new Set(f))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign(function(s,d){if(is20223Decorator(d))return flowAnnotation.decorate_20223_(s,d);if(isStringish(d))return storeAnnotation(s,d,flowAnnotation);var _=s,S=_.name||"<unnamed flow>",T=function(){var M=this,P=arguments,H=++generatorId,J=action(S+" - runid: "+H+" - init",_).apply(M,P),K,z=void 0,oe=new Promise(function(se,ae){var ge=0;K=ae;function pe(be){z=void 0;var Re;try{Re=action(S+" - runid: "+H+" - yield "+ge++,J.next).call(J,be)}catch(Fe){return ae(Fe)}ve(Re)}function he(be){z=void 0;var Re;try{Re=action(S+" - runid: "+H+" - yield "+ge++,J.throw).call(J,be)}catch(Fe){return ae(Fe)}ve(Re)}function ve(be){if(isFunction$2(be==null?void 0:be.then)){be.then(ve,ae);return}return be.done?se(be.value):(z=Promise.resolve(be.value),z.then(pe,he))}pe(void 0)});return oe.cancel=action(S+" - runid: "+H+" - cancel",function(){try{z&&cancelPromise(z);var se=J.return(void 0),ae=Promise.resolve(se.value);ae.then(noop$a,noop$a),cancelPromise(ae),K(new FlowCancellationError)}catch(ge){K(ge)}}),oe};return T.isMobXFlow=!0,T},flowAnnotation);flow.bound=createDecoratorAnnotation(flowBoundAnnotation);function cancelPromise(f){isFunction$2(f.cancel)&&f.cancel()}function isFlow(f){return(f==null?void 0:f.isMobXFlow)===!0}function _isObservable(f,s){return f?isObservableObject(f)||!!f[$mobx]||isAtom(f)||isReaction(f)||isComputedValue(f):!1}function isObservable(f){return _isObservable(f)}function transaction(f,s){s===void 0&&(s=void 0),startBatch();try{return f.apply(s)}finally{endBatch()}}function getAdm(f){return f[$mobx]}var objectProxyTraps={has:function(s,d){return getAdm(s).has_(d)},get:function(s,d){return getAdm(s).get_(d)},set:function(s,d,_){var S;return isStringish(d)?(S=getAdm(s).set_(d,_,!0))!=null?S:!0:!1},deleteProperty:function(s,d){var _;return isStringish(d)?(_=getAdm(s).delete_(d,!0))!=null?_:!0:!1},defineProperty:function(s,d,_){var S;return(S=getAdm(s).defineProperty_(d,_))!=null?S:!0},ownKeys:function(s){return getAdm(s).ownKeys_()},preventExtensions:function(s){die(13)}};function asDynamicObservableObject(f,s){var d,_;return assertProxies(),f=asObservableObject(f,s),(_=(d=f[$mobx]).proxy_)!=null?_:d.proxy_=new Proxy(f,objectProxyTraps)}function hasInterceptors(f){return f.interceptors_!==void 0&&f.interceptors_.length>0}function registerInterceptor(f,s){var d=f.interceptors_||(f.interceptors_=[]);return d.push(s),once(function(){var _=d.indexOf(s);_!==-1&&d.splice(_,1)})}function interceptChange(f,s){var d=untrackedStart();try{for(var _=[].concat(f.interceptors_||[]),S=0,T=_.length;S<T&&(s=_[S](s),s&&!s.type&&die(14),!!s);S++);return s}finally{untrackedEnd(d)}}function hasListeners(f){return f.changeListeners_!==void 0&&f.changeListeners_.length>0}function registerListener(f,s){var d=f.changeListeners_||(f.changeListeners_=[]);return d.push(s),once(function(){var _=d.indexOf(s);_!==-1&&d.splice(_,1)})}function notifyListeners(f,s){var d=untrackedStart(),_=f.changeListeners_;if(_){_=_.slice();for(var S=0,T=_.length;S<T;S++)_[S](s);untrackedEnd(d)}}function makeObservable(f,s,d){return initObservable(function(){var _,S=asObservableObject(f,d)[$mobx];(_=s)!=null||(s=collectStoredAnnotations(f)),ownKeys$2(s).forEach(function(T){return S.make_(T,s[T])})}),f}var keysSymbol=Symbol("mobx-keys");function makeAutoObservable(f,s,d){return isPlainObject$2(f)?extendObservable(f,f,s,d):(initObservable(function(){var _=asObservableObject(f,d)[$mobx];if(!f[keysSymbol]){var S=Object.getPrototypeOf(f),T=new Set([].concat(ownKeys$2(f),ownKeys$2(S)));T.delete("constructor"),T.delete($mobx),addHiddenProp(S,keysSymbol,T)}f[keysSymbol].forEach(function(F){return _.make_(F,s&&F in s?s[F]:!0)})}),f)}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function(s,d){var _=s[$mobx];return d===$mobx?_:d==="length"?_.getArrayLength_():typeof d=="string"&&!isNaN(d)?_.get_(parseInt(d)):hasProp(arrayExtensions,d)?arrayExtensions[d]:s[d]},set:function(s,d,_){var S=s[$mobx];return d==="length"&&S.setArrayLength_(_),typeof d=="symbol"||isNaN(d)?s[d]=_:S.set_(parseInt(d),_),!0},preventExtensions:function(){die(15)}},ObservableArrayAdministration=function(){function f(d,_,S,T){d===void 0&&(d="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=S,this.legacyMode_=T,this.atom_=new Atom(d),this.enhancer_=function(F,M){return _(F,M,"ObservableArray[..]")}}var s=f.prototype;return s.dehanceValue_=function(_){return this.dehancer!==void 0?this.dehancer(_):_},s.dehanceValues_=function(_){return this.dehancer!==void 0&&_.length>0?_.map(this.dehancer):_},s.intercept_=function(_){return registerInterceptor(this,_)},s.observe_=function(_,S){return S===void 0&&(S=!1),S&&_({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,_)},s.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},s.setArrayLength_=function(_){(typeof _!="number"||isNaN(_)||_<0)&&die("Out of range: "+_);var S=this.values_.length;if(_!==S)if(_>S){for(var T=new Array(_-S),F=0;F<_-S;F++)T[F]=void 0;this.spliceWithArray_(S,0,T)}else this.spliceWithArray_(_,S-_)},s.updateArrayLength_=function(_,S){_!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=S,this.legacyMode_&&S>0&&reserveArrayBuffer(_+S+1)},s.spliceWithArray_=function(_,S,T){var F=this;this.atom_;var M=this.values_.length;if(_===void 0?_=0:_>M?_=M:_<0&&(_=Math.max(0,M+_)),arguments.length===1?S=M-_:S==null?S=0:S=Math.max(0,Math.min(S,M-_)),T===void 0&&(T=EMPTY_ARRAY$3),hasInterceptors(this)){var P=interceptChange(this,{object:this.proxy_,type:SPLICE,index:_,removedCount:S,added:T});if(!P)return EMPTY_ARRAY$3;S=P.removedCount,T=P.added}if(T=T.length===0?T:T.map(function(K){return F.enhancer_(K,void 0)}),this.legacyMode_){var H=T.length-S;this.updateArrayLength_(M,H)}var J=this.spliceItemsIntoValues_(_,S,T);return(S!==0||T.length!==0)&&this.notifyArraySplice_(_,T,J),this.dehanceValues_(J)},s.spliceItemsIntoValues_=function(_,S,T){if(T.length<MAX_SPLICE_SIZE){var F;return(F=this.values_).splice.apply(F,[_,S].concat(T))}else{var M=this.values_.slice(_,_+S),P=this.values_.slice(_+S);this.values_.length+=T.length-S;for(var H=0;H<T.length;H++)this.values_[_+H]=T[H];for(var J=0;J<P.length;J++)this.values_[_+T.length+J]=P[J];return M}},s.notifyArrayChildUpdate_=function(_,S,T){var F=!this.owned_&&isSpyEnabled(),M=hasListeners(this),P=M||F?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:_,newValue:S,oldValue:T}:null;this.atom_.reportChanged(),M&&notifyListeners(this,P)},s.notifyArraySplice_=function(_,S,T){var F=!this.owned_&&isSpyEnabled(),M=hasListeners(this),P=M||F?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:_,removed:T,added:S,removedCount:T.length,addedCount:S.length}:null;this.atom_.reportChanged(),M&&notifyListeners(this,P)},s.get_=function(_){if(this.legacyMode_&&_>=this.values_.length){console.warn("[mobx] Out of bounds read: "+_);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[_])},s.set_=function(_,S){var T=this.values_;if(this.legacyMode_&&_>T.length&&die(17,_,T.length),_<T.length){this.atom_;var F=T[_];if(hasInterceptors(this)){var M=interceptChange(this,{type:UPDATE,object:this.proxy_,index:_,newValue:S});if(!M)return;S=M.newValue}S=this.enhancer_(S,F);var P=S!==F;P&&(T[_]=S,this.notifyArrayChildUpdate_(_,S,F))}else{for(var H=new Array(_+1-T.length),J=0;J<H.length-1;J++)H[J]=void 0;H[H.length-1]=S,this.spliceWithArray_(T.length,0,H)}},f}();function createObservableArray(f,s,d,_){return d===void 0&&(d="ObservableArray"),_===void 0&&(_=!1),assertProxies(),initObservable(function(){var S=new ObservableArrayAdministration(d,s,_,!1);addHiddenFinalProp(S.values_,$mobx,S);var T=new Proxy(S.values_,arrayTraps);return S.proxy_=T,f&&f.length&&S.spliceWithArray_(0,0,f),T})}var arrayExtensions={clear:function(){return this.splice(0)},replace:function(s){var d=this[$mobx];return d.spliceWithArray_(0,d.values_.length,s)},toJSON:function(){return this.slice()},splice:function(s,d){for(var _=arguments.length,S=new Array(_>2?_-2:0),T=2;T<_;T++)S[T-2]=arguments[T];var F=this[$mobx];switch(arguments.length){case 0:return[];case 1:return F.spliceWithArray_(s);case 2:return F.spliceWithArray_(s,d)}return F.spliceWithArray_(s,d,S)},spliceWithArray:function(s,d,_){return this[$mobx].spliceWithArray_(s,d,_)},push:function(){for(var s=this[$mobx],d=arguments.length,_=new Array(d),S=0;S<d;S++)_[S]=arguments[S];return s.spliceWithArray_(s.values_.length,0,_),s.values_.length},pop:function(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var s=this[$mobx],d=arguments.length,_=new Array(d),S=0;S<d;S++)_[S]=arguments[S];return s.spliceWithArray_(0,0,_),s.values_.length},reverse:function(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){globalState.trackingDerivation&&die(37,"sort");var s=this.slice();return s.sort.apply(s,arguments),this.replace(s),this},remove:function(s){var d=this[$mobx],_=d.dehanceValues_(d.values_).indexOf(s);return _>-1?(this.splice(_,1),!0):!1}};addArrayExtension("at",simpleFunc);addArrayExtension("concat",simpleFunc);addArrayExtension("flat",simpleFunc);addArrayExtension("includes",simpleFunc);addArrayExtension("indexOf",simpleFunc);addArrayExtension("join",simpleFunc);addArrayExtension("lastIndexOf",simpleFunc);addArrayExtension("slice",simpleFunc);addArrayExtension("toString",simpleFunc);addArrayExtension("toLocaleString",simpleFunc);addArrayExtension("toSorted",simpleFunc);addArrayExtension("toSpliced",simpleFunc);addArrayExtension("with",simpleFunc);addArrayExtension("every",mapLikeFunc);addArrayExtension("filter",mapLikeFunc);addArrayExtension("find",mapLikeFunc);addArrayExtension("findIndex",mapLikeFunc);addArrayExtension("findLast",mapLikeFunc);addArrayExtension("findLastIndex",mapLikeFunc);addArrayExtension("flatMap",mapLikeFunc);addArrayExtension("forEach",mapLikeFunc);addArrayExtension("map",mapLikeFunc);addArrayExtension("some",mapLikeFunc);addArrayExtension("toReversed",mapLikeFunc);addArrayExtension("reduce",reduceLikeFunc);addArrayExtension("reduceRight",reduceLikeFunc);function addArrayExtension(f,s){typeof Array.prototype[f]=="function"&&(arrayExtensions[f]=s(f))}function simpleFunc(f){return function(){var s=this[$mobx];s.atom_.reportObserved();var d=s.dehanceValues_(s.values_);return d[f].apply(d,arguments)}}function mapLikeFunc(f){return function(s,d){var _=this,S=this[$mobx];S.atom_.reportObserved();var T=S.dehanceValues_(S.values_);return T[f](function(F,M){return s.call(d,F,M,_)})}}function reduceLikeFunc(f){return function(){var s=this,d=this[$mobx];d.atom_.reportObserved();var _=d.dehanceValues_(d.values_),S=arguments[0];return arguments[0]=function(T,F,M){return S(T,F,M,s)},_[f].apply(_,arguments)}}var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(f){return isObject$b(f)&&isObservableArrayAdministration(f[$mobx])}var ObservableMapMarker={},ADD="add",DELETE="delete",ObservableMap=function(){function f(d,_,S){var T=this;_===void 0&&(_=deepEnhancer),S===void 0&&(S="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=_,this.name_=S,isFunction$2(Map)||die(18),initObservable(function(){T.keysAtom_=createAtom("ObservableMap.keys()"),T.data_=new Map,T.hasMap_=new Map,d&&T.merge(d)})}var s=f.prototype;return s.has_=function(_){return this.data_.has(_)},s.has=function(_){var S=this;if(!globalState.trackingDerivation)return this.has_(_);var T=this.hasMap_.get(_);if(!T){var F=T=new ObservableValue(this.has_(_),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(_,F),onBecomeUnobserved(F,function(){return S.hasMap_.delete(_)})}return T.get()},s.set=function(_,S){var T=this.has_(_);if(hasInterceptors(this)){var F=interceptChange(this,{type:T?UPDATE:ADD,object:this,newValue:S,name:_});if(!F)return this;S=F.newValue}return T?this.updateValue_(_,S):this.addValue_(_,S),this},s.delete=function(_){var S=this;if(this.keysAtom_,hasInterceptors(this)){var T=interceptChange(this,{type:DELETE,object:this,name:_});if(!T)return!1}if(this.has_(_)){var F=isSpyEnabled(),M=hasListeners(this),P=M||F?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(_).value_,name:_}:null;return transaction(function(){var H;S.keysAtom_.reportChanged(),(H=S.hasMap_.get(_))==null||H.setNewValue_(!1);var J=S.data_.get(_);J.setNewValue_(void 0),S.data_.delete(_)}),M&&notifyListeners(this,P),!0}return!1},s.updateValue_=function(_,S){var T=this.data_.get(_);if(S=T.prepareNewValue_(S),S!==globalState.UNCHANGED){var F=isSpyEnabled(),M=hasListeners(this),P=M||F?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:T.value_,name:_,newValue:S}:null;T.setNewValue_(S),M&&notifyListeners(this,P)}},s.addValue_=function(_,S){var T=this;this.keysAtom_,transaction(function(){var H,J=new ObservableValue(S,T.enhancer_,"ObservableMap.key",!1);T.data_.set(_,J),S=J.value_,(H=T.hasMap_.get(_))==null||H.setNewValue_(!0),T.keysAtom_.reportChanged()});var F=isSpyEnabled(),M=hasListeners(this),P=M||F?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:_,newValue:S}:null;M&&notifyListeners(this,P)},s.get=function(_){return this.has(_)?this.dehanceValue_(this.data_.get(_).get()):this.dehanceValue_(void 0)},s.dehanceValue_=function(_){return this.dehancer!==void 0?this.dehancer(_):_},s.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},s.values=function(){var _=this,S=this.keys();return makeIterable({next:function(){var F=S.next(),M=F.done,P=F.value;return{done:M,value:M?void 0:_.get(P)}}})},s.entries=function(){var _=this,S=this.keys();return makeIterable({next:function(){var F=S.next(),M=F.done,P=F.value;return{done:M,value:M?void 0:[P,_.get(P)]}}})},s[Symbol.iterator]=function(){return this.entries()},s.forEach=function(_,S){for(var T=_createForOfIteratorHelperLoose(this),F;!(F=T()).done;){var M=F.value,P=M[0],H=M[1];_.call(S,H,P,this)}},s.merge=function(_){var S=this;return isObservableMap(_)&&(_=new Map(_)),transaction(function(){isPlainObject$2(_)?getPlainObjectKeys(_).forEach(function(T){return S.set(T,_[T])}):Array.isArray(_)?_.forEach(function(T){var F=T[0],M=T[1];return S.set(F,M)}):isES6Map(_)?(isPlainES6Map(_)||die(19,_),_.forEach(function(T,F){return S.set(F,T)})):_!=null&&die(20,_)}),this},s.clear=function(){var _=this;transaction(function(){untracked(function(){for(var S=_createForOfIteratorHelperLoose(_.keys()),T;!(T=S()).done;){var F=T.value;_.delete(F)}})})},s.replace=function(_){var S=this;return transaction(function(){for(var T=convertToMap(_),F=new Map,M=!1,P=_createForOfIteratorHelperLoose(S.data_.keys()),H;!(H=P()).done;){var J=H.value;if(!T.has(J)){var K=S.delete(J);if(K)M=!0;else{var z=S.data_.get(J);F.set(J,z)}}}for(var oe=_createForOfIteratorHelperLoose(T.entries()),se;!(se=oe()).done;){var ae=se.value,ge=ae[0],pe=ae[1],he=S.data_.has(ge);if(S.set(ge,pe),S.data_.has(ge)){var ve=S.data_.get(ge);F.set(ge,ve),he||(M=!0)}}if(!M)if(S.data_.size!==F.size)S.keysAtom_.reportChanged();else for(var be=S.data_.keys(),Re=F.keys(),Fe=be.next(),ye=Re.next();!Fe.done;){if(Fe.value!==ye.value){S.keysAtom_.reportChanged();break}Fe=be.next(),ye=Re.next()}S.data_=F}),this},s.toString=function(){return"[object ObservableMap]"},s.toJSON=function(){return Array.from(this)},s.observe_=function(_,S){return registerListener(this,_)},s.intercept_=function(_){return registerInterceptor(this,_)},_createClass(f,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function convertToMap(f){if(isES6Map(f)||isObservableMap(f))return f;if(Array.isArray(f))return new Map(f);if(isPlainObject$2(f)){var s=new Map;for(var d in f)s.set(d,f[d]);return s}else return die(21,f)}var ObservableSetMarker={},ObservableSet=function(){function f(d,_,S){var T=this;_===void 0&&(_=deepEnhancer),S===void 0&&(S="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=S,isFunction$2(Set)||die(22),this.enhancer_=function(F,M){return _(F,M,S)},initObservable(function(){T.atom_=createAtom(T.name_),d&&T.replace(d)})}var s=f.prototype;return s.dehanceValue_=function(_){return this.dehancer!==void 0?this.dehancer(_):_},s.clear=function(){var _=this;transaction(function(){untracked(function(){for(var S=_createForOfIteratorHelperLoose(_.data_.values()),T;!(T=S()).done;){var F=T.value;_.delete(F)}})})},s.forEach=function(_,S){for(var T=_createForOfIteratorHelperLoose(this),F;!(F=T()).done;){var M=F.value;_.call(S,M,M,this)}},s.add=function(_){var S=this;if(this.atom_,hasInterceptors(this)){var T=interceptChange(this,{type:ADD,object:this,newValue:_});if(!T)return this}if(!this.has(_)){transaction(function(){S.data_.add(S.enhancer_(_,void 0)),S.atom_.reportChanged()});var F=!1,M=hasListeners(this),P=M||F?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:_}:null;M&&notifyListeners(this,P)}return this},s.delete=function(_){var S=this;if(hasInterceptors(this)){var T=interceptChange(this,{type:DELETE,object:this,oldValue:_});if(!T)return!1}if(this.has(_)){var F=!1,M=hasListeners(this),P=M||F?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:_}:null;return transaction(function(){S.atom_.reportChanged(),S.data_.delete(_)}),M&&notifyListeners(this,P),!0}return!1},s.has=function(_){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(_))},s.entries=function(){var _=0,S=Array.from(this.keys()),T=Array.from(this.values());return makeIterable({next:function(){var M=_;return _+=1,M<T.length?{value:[S[M],T[M]],done:!1}:{done:!0}}})},s.keys=function(){return this.values()},s.values=function(){this.atom_.reportObserved();var _=this,S=0,T=Array.from(this.data_.values());return makeIterable({next:function(){return S<T.length?{value:_.dehanceValue_(T[S++]),done:!1}:{done:!0}}})},s.intersection=function(_){if(isES6Set(_)&&!isObservableSet(_))return _.intersection(this);var S=new Set(this);return S.intersection(_)},s.union=function(_){if(isES6Set(_)&&!isObservableSet(_))return _.union(this);var S=new Set(this);return S.union(_)},s.difference=function(_){return new Set(this).difference(_)},s.symmetricDifference=function(_){if(isES6Set(_)&&!isObservableSet(_))return _.symmetricDifference(this);var S=new Set(this);return S.symmetricDifference(_)},s.isSubsetOf=function(_){return new Set(this).isSubsetOf(_)},s.isSupersetOf=function(_){return new Set(this).isSupersetOf(_)},s.isDisjointFrom=function(_){if(isES6Set(_)&&!isObservableSet(_))return _.isDisjointFrom(this);var S=new Set(this);return S.isDisjointFrom(_)},s.replace=function(_){var S=this;return isObservableSet(_)&&(_=new Set(_)),transaction(function(){Array.isArray(_)?(S.clear(),_.forEach(function(T){return S.add(T)})):isES6Set(_)?(S.clear(),_.forEach(function(T){return S.add(T)})):_!=null&&die("Cannot initialize set from "+_)}),this},s.observe_=function(_,S){return registerListener(this,_)},s.intercept_=function(_){return registerInterceptor(this,_)},s.toJSON=function(){return Array.from(this)},s.toString=function(){return"[object ObservableSet]"},s[Symbol.iterator]=function(){return this.values()},_createClass(f,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=function(){function f(d,_,S,T){_===void 0&&(_=new Map),T===void 0&&(T=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=d,this.values_=_,this.name_=S,this.defaultAnnotation_=T,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject$2(this.target_)}var s=f.prototype;return s.getObservablePropValue_=function(_){return this.values_.get(_).get()},s.setObservablePropValue_=function(_,S){var T=this.values_.get(_);if(T instanceof ComputedValue)return T.set(S),!0;if(hasInterceptors(this)){var F=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:_,newValue:S});if(!F)return null;S=F.newValue}if(S=T.prepareNewValue_(S),S!==globalState.UNCHANGED){var M=hasListeners(this),P=!1,H=M||P?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:T.value_,name:_,newValue:S}:null;T.setNewValue_(S),M&&notifyListeners(this,H)}return!0},s.get_=function(_){return globalState.trackingDerivation&&!hasProp(this.target_,_)&&this.has_(_),this.target_[_]},s.set_=function(_,S,T){return T===void 0&&(T=!1),hasProp(this.target_,_)?this.values_.has(_)?this.setObservablePropValue_(_,S):T?Reflect.set(this.target_,_,S):(this.target_[_]=S,!0):this.extend_(_,{value:S,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,T)},s.has_=function(_){if(!globalState.trackingDerivation)return _ in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var S=this.pendingKeys_.get(_);return S||(S=new ObservableValue(_ in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(_,S)),S.get()},s.make_=function(_,S){if(S===!0&&(S=this.defaultAnnotation_),S!==!1){if(!(_ in this.target_)){var T;if((T=this.target_[storedAnnotationsSymbol])!=null&&T[_])return;die(1,S.annotationType_,this.name_+"."+_.toString())}for(var F=this.target_;F&&F!==objectPrototype;){var M=getDescriptor(F,_);if(M){var P=S.make_(this,_,M,F);if(P===0)return;if(P===1)break}F=Object.getPrototypeOf(F)}recordAnnotationApplied(this,S,_)}},s.extend_=function(_,S,T,F){if(F===void 0&&(F=!1),T===!0&&(T=this.defaultAnnotation_),T===!1)return this.defineProperty_(_,S,F);var M=T.extend_(this,_,S,F);return M&&recordAnnotationApplied(this,T,_),M},s.defineProperty_=function(_,S,T){T===void 0&&(T=!1),this.keysAtom_;try{startBatch();var F=this.delete_(_);if(!F)return F;if(hasInterceptors(this)){var M=interceptChange(this,{object:this.proxy_||this.target_,name:_,type:ADD,newValue:S.value});if(!M)return null;var P=M.newValue;S.value!==P&&(S=_extends$9({},S,{value:P}))}if(T){if(!Reflect.defineProperty(this.target_,_,S))return!1}else defineProperty(this.target_,_,S);this.notifyPropertyAddition_(_,S.value)}finally{endBatch()}return!0},s.defineObservableProperty_=function(_,S,T,F){F===void 0&&(F=!1),this.keysAtom_;try{startBatch();var M=this.delete_(_);if(!M)return M;if(hasInterceptors(this)){var P=interceptChange(this,{object:this.proxy_||this.target_,name:_,type:ADD,newValue:S});if(!P)return null;S=P.newValue}var H=getCachedObservablePropDescriptor(_),J={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:H.get,set:H.set};if(F){if(!Reflect.defineProperty(this.target_,_,J))return!1}else defineProperty(this.target_,_,J);var K=new ObservableValue(S,T,"ObservableObject.key",!1);this.values_.set(_,K),this.notifyPropertyAddition_(_,K.value_)}finally{endBatch()}return!0},s.defineComputedProperty_=function(_,S,T){T===void 0&&(T=!1),this.keysAtom_;try{startBatch();var F=this.delete_(_);if(!F)return F;if(hasInterceptors(this)){var M=interceptChange(this,{object:this.proxy_||this.target_,name:_,type:ADD,newValue:void 0});if(!M)return null}S.name||(S.name="ObservableObject.key"),S.context=this.proxy_||this.target_;var P=getCachedObservablePropDescriptor(_),H={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:P.get,set:P.set};if(T){if(!Reflect.defineProperty(this.target_,_,H))return!1}else defineProperty(this.target_,_,H);this.values_.set(_,new ComputedValue(S)),this.notifyPropertyAddition_(_,void 0)}finally{endBatch()}return!0},s.delete_=function(_,S){if(S===void 0&&(S=!1),this.keysAtom_,!hasProp(this.target_,_))return!0;if(hasInterceptors(this)){var T=interceptChange(this,{object:this.proxy_||this.target_,name:_,type:REMOVE});if(!T)return null}try{var F;startBatch();var M=hasListeners(this),P=!1,H=this.values_.get(_),J=void 0;if(!H&&(M||P)){var K;J=(K=getDescriptor(this.target_,_))==null?void 0:K.value}if(S){if(!Reflect.deleteProperty(this.target_,_))return!1}else delete this.target_[_];if(H&&(this.values_.delete(_),H instanceof ObservableValue&&(J=H.value_),propagateChanged(H)),this.keysAtom_.reportChanged(),(F=this.pendingKeys_)==null||(F=F.get(_))==null||F.set(_ in this.target_),M||P){var z={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:J,name:_};M&&notifyListeners(this,z)}}finally{endBatch()}return!0},s.observe_=function(_,S){return registerListener(this,_)},s.intercept_=function(_){return registerInterceptor(this,_)},s.notifyPropertyAddition_=function(_,S){var T,F=hasListeners(this),M=!1;if(F||M){var P=F||M?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:_,newValue:S}:null;F&&notifyListeners(this,P)}(T=this.pendingKeys_)==null||(T=T.get(_))==null||T.set(!0),this.keysAtom_.reportChanged()},s.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys$2(this.target_)},s.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},f}();function asObservableObject(f,s){var d;if(hasProp(f,$mobx))return f;var _=(d=s==null?void 0:s.name)!=null?d:"ObservableObject",S=new ObservableObjectAdministration(f,new Map,String(_),getAnnotationFromOptions(s));return addHiddenProp(f,$mobx,S),f}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(f){return descriptorCache[f]||(descriptorCache[f]={get:function(){return this[$mobx].getObservablePropValue_(f)},set:function(d){return this[$mobx].setObservablePropValue_(f,d)}})}function isObservableObject(f){return isObject$b(f)?isObservableObjectAdministration(f[$mobx]):!1}function recordAnnotationApplied(f,s,d){var _;(_=f.target_[storedAnnotationsSymbol])==null||delete _[d]}var ENTRY_0=createArrayEntryDescriptor(0),safariPrototypeSetterInheritanceBug=function(){var f=!1,s={};return Object.defineProperty(s,"0",{set:function(){f=!0}}),Object.create(s)[0]=1,f===!1}(),OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function(){};function inherit$1(f,s){Object.setPrototypeOf?Object.setPrototypeOf(f.prototype,s):f.prototype.__proto__!==void 0?f.prototype.__proto__=s:f.prototype=s}inherit$1(StubArray,Array.prototype);var LegacyObservableArray=function(f){function s(_,S,T,F){var M;return T===void 0&&(T="ObservableArray"),F===void 0&&(F=!1),M=f.call(this)||this,initObservable(function(){var P=new ObservableArrayAdministration(T,S,F,!0);P.proxy_=M,addHiddenFinalProp(M,$mobx,P),_&&_.length&&M.spliceWithArray(0,0,_),safariPrototypeSetterInheritanceBug&&Object.defineProperty(M,"0",ENTRY_0)}),M}_inheritsLoose(s,f);var d=s.prototype;return d.concat=function(){this[$mobx].atom_.reportObserved();for(var S=arguments.length,T=new Array(S),F=0;F<S;F++)T[F]=arguments[F];return Array.prototype.concat.apply(this.slice(),T.map(function(M){return isObservableArray(M)?M.slice():M}))},d[Symbol.iterator]=function(){var _=this,S=0;return makeIterable({next:function(){return S<_.length?{value:_[S++],done:!1}:{done:!0,value:void 0}}})},_createClass(s,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(S){this[$mobx].setArrayLength_(S)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(StubArray);Object.entries(arrayExtensions).forEach(function(f){var s=f[0],d=f[1];s!=="concat"&&addHiddenProp(LegacyObservableArray.prototype,s,d)});function createArrayEntryDescriptor(f){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(f)},set:function(d){this[$mobx].set_(f,d)}}}function createArrayBufferItem(f){defineProperty(LegacyObservableArray.prototype,""+f,createArrayEntryDescriptor(f))}function reserveArrayBuffer(f){if(f>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var s=OBSERVABLE_ARRAY_BUFFER_SIZE;s<f+100;s++)createArrayBufferItem(s);OBSERVABLE_ARRAY_BUFFER_SIZE=f}}reserveArrayBuffer(1e3);function createLegacyArray(f,s,d){return new LegacyObservableArray(f,s,d)}function getAtom(f,s){if(typeof f=="object"&&f!==null){if(isObservableArray(f))return s!==void 0&&die(23),f[$mobx].atom_;if(isObservableSet(f))return f.atom_;if(isObservableMap(f)){if(s===void 0)return f.keysAtom_;var d=f.data_.get(s)||f.hasMap_.get(s);return d||die(25,s,getDebugName(f)),d}if(isObservableObject(f)){if(!s)return die(26);var _=f[$mobx].values_.get(s);return _||die(27,s,getDebugName(f)),_}if(isAtom(f)||isComputedValue(f)||isReaction(f))return f}else if(isFunction$2(f)&&isReaction(f[$mobx]))return f[$mobx];die(28)}function getAdministration(f,s){if(f||die(29),isAtom(f)||isComputedValue(f)||isReaction(f)||isObservableMap(f)||isObservableSet(f))return f;if(f[$mobx])return f[$mobx];die(24,f)}function getDebugName(f,s){var d;if(s!==void 0)d=getAtom(f,s);else{if(isAction(f))return f.name;isObservableObject(f)||isObservableMap(f)||isObservableSet(f)?d=getAdministration(f):d=getAtom(f)}return d.name_}function initObservable(f){var s=untrackedStart(),d=allowStateChangesStart(!0);startBatch();try{return f()}finally{endBatch(),allowStateChangesEnd(d),untrackedEnd(s)}}var toString$2=objectPrototype.toString;function deepEqual$2(f,s,d){return d===void 0&&(d=-1),eq(f,s,d)}function eq(f,s,d,_,S){if(f===s)return f!==0||1/f===1/s;if(f==null||s==null)return!1;if(f!==f)return s!==s;var T=typeof f;if(T!=="function"&&T!=="object"&&typeof s!="object")return!1;var F=toString$2.call(f);if(F!==toString$2.call(s))return!1;switch(F){case"[object RegExp]":case"[object String]":return""+f==""+s;case"[object Number]":return+f!=+f?+s!=+s:+f==0?1/+f===1/s:+f==+s;case"[object Date]":case"[object Boolean]":return+f==+s;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(f)===Symbol.valueOf.call(s);case"[object Map]":case"[object Set]":d>=0&&d++;break}f=unwrap(f),s=unwrap(s);var M=F==="[object Array]";if(!M){if(typeof f!="object"||typeof s!="object")return!1;var P=f.constructor,H=s.constructor;if(P!==H&&!(isFunction$2(P)&&P instanceof P&&isFunction$2(H)&&H instanceof H)&&"constructor"in f&&"constructor"in s)return!1}if(d===0)return!1;d<0&&(d=-1),_=_||[],S=S||[];for(var J=_.length;J--;)if(_[J]===f)return S[J]===s;if(_.push(f),S.push(s),M){if(J=f.length,J!==s.length)return!1;for(;J--;)if(!eq(f[J],s[J],d-1,_,S))return!1}else{var K=Object.keys(f),z;if(J=K.length,Object.keys(s).length!==J)return!1;for(;J--;)if(z=K[J],!(hasProp(s,z)&&eq(f[z],s[z],d-1,_,S)))return!1}return _.pop(),S.pop(),!0}function unwrap(f){return isObservableArray(f)?f.slice():isES6Map(f)||isObservableMap(f)||isES6Set(f)||isObservableSet(f)?Array.from(f.entries()):f}function makeIterable(f){return f[Symbol.iterator]=getSelf,f}function getSelf(){return this}["Symbol","Map","Set"].forEach(function(f){var s=getGlobal();typeof s[f]>"u"&&die("MobX requires global '"+f+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy,extras:{getDebugName},$mobx});if(!reactExports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(f){f()}function observerBatching(f){f||(f=defaultNoopBatch),configure({reactionScheduler:f})}function printDebugValue(f){return getDependencyTree(f)}var REGISTRY_FINALIZE_AFTER=1e4,REGISTRY_SWEEP_INTERVAL=1e4,TimerBasedFinalizationRegistry=function(){function f(s){var d=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(_){_===void 0&&(_=REGISTRY_FINALIZE_AFTER),clearTimeout(d.sweepTimeout),d.sweepTimeout=void 0;var S=Date.now();d.registrations.forEach(function(T,F){S-T.registeredAt>=_&&(d.finalize(T.value),d.registrations.delete(F))}),d.registrations.size>0&&d.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){d.sweep(0)}})}return Object.defineProperty(f.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(s,d,_){this.registrations.set(_,{value:d,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(f.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(s){this.registrations.delete(s)}}),Object.defineProperty(f.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,REGISTRY_SWEEP_INTERVAL))}}),f}(),UniversalFinalizationRegistry=typeof FinalizationRegistry<"u"?FinalizationRegistry:TimerBasedFinalizationRegistry,observerFinalizationRegistry=new UniversalFinalizationRegistry(function(f){var s;(s=f.reaction)===null||s===void 0||s.dispose(),f.reaction=null}),shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=reactExports;function h$1(f,s){return f===s&&(f!==0||1/f===1/s)||f!==f&&s!==s}var k$1=typeof Object.is=="function"?Object.is:h$1,l=e.useState,m$1=e.useEffect,n$1=e.useLayoutEffect,p$1=e.useDebugValue;function q$1(f,s){var d=s(),_=l({inst:{value:d,getSnapshot:s}}),S=_[0].inst,T=_[1];return n$1(function(){S.value=d,S.getSnapshot=s,r$1(S)&&T({inst:S})},[f,d,s]),m$1(function(){return r$1(S)&&T({inst:S}),f(function(){r$1(S)&&T({inst:S})})},[f]),p$1(d),d}function r$1(f){var s=f.getSnapshot;f=f.value;try{var d=s();return!k$1(f,d)}catch{return!0}}function t$1(f,s){return s()}var u$2=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$1:q$1;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u$2;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;function createReaction(f){f.reaction=new Reaction("observer".concat(f.name),function(){var s;f.stateVersion=Symbol(),(s=f.onStoreChange)===null||s===void 0||s.call(f)})}function useObserver(f,s){s===void 0&&(s="observed");var d=React$1.useRef(null);if(!d.current){var _={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:s,subscribe:function(M){return observerFinalizationRegistry.unregister(_),_.onStoreChange=M,_.reaction||(createReaction(_),_.stateVersion=Symbol()),function(){var P;_.onStoreChange=null,(P=_.reaction)===null||P===void 0||P.dispose(),_.reaction=null}},getSnapshot:function(){return _.stateVersion}};d.current=_}var S=d.current;S.reaction||(createReaction(S),observerFinalizationRegistry.register(d,S,S)),React$1.useDebugValue(S.reaction,printDebugValue),shimExports.useSyncExternalStore(S.subscribe,S.getSnapshot,S.getSnapshot);var T,F;if(S.reaction.track(function(){try{T=f()}catch(M){F=M}}),F)throw F;return T}var _a$5,_b$1,hasSymbol=typeof Symbol=="function"&&Symbol.for,isFunctionNameConfigurable=(_b$1=(_a$5=Object.getOwnPropertyDescriptor(function(){},"name"))===null||_a$5===void 0?void 0:_a$5.configurable)!==null&&_b$1!==void 0?_b$1:!1,ReactForwardRefSymbol=hasSymbol?Symbol.for("react.forward_ref"):typeof reactExports.forwardRef=="function"&&reactExports.forwardRef(function(f){return null}).$$typeof,ReactMemoSymbol=hasSymbol?Symbol.for("react.memo"):typeof reactExports.memo=="function"&&reactExports.memo(function(f){return null}).$$typeof;function observer(f,s){var d;if(ReactMemoSymbol&&f.$$typeof===ReactMemoSymbol)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var _=(d=void 0)!==null&&d!==void 0?d:!1,S=f,T=f.displayName||f.name;if(ReactForwardRefSymbol&&f.$$typeof===ReactForwardRefSymbol&&(_=!0,S=f.render,typeof S!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var F=function(M,P){return useObserver(function(){return S(M,P)},T)};return F.displayName=f.displayName,isFunctionNameConfigurable&&Object.defineProperty(F,"name",{value:f.name,writable:!0,configurable:!0}),f.contextTypes&&(F.contextTypes=f.contextTypes),_&&(F=reactExports.forwardRef(F)),F=reactExports.memo(F),copyStaticProperties(f,F),F}var hoistBlackList={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function copyStaticProperties(f,s){Object.keys(f).forEach(function(d){hoistBlackList[d]||Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(f,d))})}var _a$4;observerBatching(reactDomExports.unstable_batchedUpdates);_a$4=observerFinalizationRegistry.finalizeAllImmediately;class BaseDialog{constructor(s,d){Bt(this,"_closed",!1);s.doc=s.doc||document,this.config=s,this.buttons={};const _=s.width?`${s.width}px`:"",S=s.height?`${s.height}px`:"";if(this.outer=createEl("div",{classes:["ciview-dlg-outer"],styles:{width:_,height:S}}),this.header=createEl("div",{classes:["ciview-dlg-header"]},this.outer),createEl("span",{classes:["ciview-dlg-header-text"],text:s.title},this.header),createEl("i",{classes:["fas","fa-times","ciview-dlg-close-icon"]},this.header).addEventListener("click",()=>{this.close()}),this.dialog=createEl("div",{classes:["ciview-dlg-content"]},this.outer),makeResizable(this.outer,{doc:s.doc,onresizeend:(P,H)=>{this.onResize(P,H)}}),makeDraggable(this.outer,{doc:s.doc,handle:".ciview-dlg-header"}),s.columns&&this._createColumns(s.columns),s.footer&&this._addFooter(),s.buttons){this.footer||this._addFooter();for(const P of s.buttons)this._addButton(P)}this.init(d),s.doc.body.append(this.outer);const T=s.doc.body.getBoundingClientRect(),F=this.outer.getBoundingClientRect();s.maxHeight&&F.height>s.maxHeight&&(F.height=s.maxHeight,this.outer.style.height=`${s.maxHeight}px`);let M=this.config.position;if(M||(M=[T.width/2-F.width/2,T.height/2-F.height/2]),M[0]+F.width>T.width){const P=T.width-F.width;M[0]=P<0?0:P}if(M[1]+F.height>T.height){const P=T.height-F.height;M[1]=P<0?0:P}this.outer.style.left=`${M[0]}px`,this.outer.style.top=`${M[1]}px`,this.observable=makeAutoObservable({container:s.doc.body})}setParent(s){action(()=>this.observable.container=s||document.body)(),removeResizable(this.outer),removeDraggable(this.outer),s?(s.append(this.outer),makeResizable(this.outer,{doc:s.ownerDocument,onresizeend:(d,_)=>{this.onResize(d,_)}}),makeDraggable(this.outer,{doc:s.ownerDocument,handle:".ciview-dlg-header"})):(this.config.doc.body.append(this.outer),makeResizable(this.outer,{doc:this.config.doc,onresizeend:(d,_)=>{this.onResize(d,_)}}),makeDraggable(this.outer,{doc:this.config.doc,handle:".ciview-dlg-header"}))}_addFooter(){this.footer=createEl("div",{styles:{flex:"0 0 auto",padding:"5px",justifyContent:"center",display:"flex",gap:"1em"}},this.outer)}_addButton(s){const d=createEl("button",{text:s.text,classes:["ciview-button"]},this.footer);d.addEventListener("click",()=>this[s.method]()),s.id&&(this.buttons[s.id]=d)}disableButton(s,d){d?this.buttons[s].classList.add("ciview-disabled"):this.buttons[s].classList.remove("ciview-disabled")}_createColumns(s){this.dialog.style.display="flex",this.dialog.style.flexDirection="row",this.columns=[];for(let d=0;d<s;d++)this.columns.push(createEl("div",{styles:{height:"100%",flexBasis:"0",flexGrow:"1",padding:"0px 4px",flexDirection:"column",alignItems:"stretch"}},this.dialog))}close(){this._closed||(this._closed=!0,this.config.onclose&&this.config.onclose(),this.outer.remove())}init(s){}onResize(s,d){this.outer&&(this.outer.style.width=`${s}px`,this.outer.style.height=`${d}px`)}}BaseDialog.experiment={};var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function f(_,S,T,F,M,P){if(P!==ReactPropTypesSecret){var H=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw H.name="Invariant Violation",H}}f.isRequired=f;function s(){return f}var d={array:f,bigint:f,bool:f,func:f,number:f,object:f,string:f,symbol:f,any:f,arrayOf:s,element:f,elementType:f,instanceOf:s,node:f,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return d.PropTypes=d,d};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports),usePreviousProps=f=>{const s=reactExports.useRef({});return reactExports.useEffect(()=>{s.current=f}),s.current};function getValidReactChildren(f){return reactExports.Children.toArray(f).filter(s=>reactExports.isValidElement(s))}const visuallyHidden={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function _typeof(f){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof(f)}function toPrimitive(f,s){if(_typeof(f)!="object"||!f)return f;var d=f[Symbol.toPrimitive];if(d!==void 0){var _=d.call(f,s||"default");if(_typeof(_)!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(f)}function toPropertyKey(f){var s=toPrimitive(f,"string");return _typeof(s)=="symbol"?s:s+""}const ProjectContext=reactExports.createContext(null),ProjectProvider=({children:f})=>{const{origin:s,pathname:d}=window.location,_=s+d,S=new URLSearchParams(window.location.search),T=S.get("dir")||_,M=(oe=>oe.endsWith("/")?oe.substring(0,oe.length-1):oe)(T),P=S.get("static")!==null,H=T.split("/").pop(),{chartManager:J}=window.mdv,[K,z]=reactExports.useState({flaskURL:_,dir:T,root:M,staticFolder:P,projectName:H,chartManager:J});return jsxRuntimeExports.jsx(ProjectContext.Provider,{value:{...K},children:f})},useProject=()=>reactExports.useContext(ProjectContext),OuterContainerContext=reactExports.createContext(null),OuterContainerProvider=observer(({children:f,parent:s})=>{var d;return jsxRuntimeExports.jsx(OuterContainerContext.Provider,{value:((d=s==null?void 0:s.observable)==null?void 0:d.container)||document.body,children:f})}),useOuterContainer=()=>reactExports.useContext(OuterContainerContext)||document.body,MaterialWrapper=observer(function({children:s}){const d=window.mdv.chartManager.theme==="dark",_=useOuterContainer(),S=reactExports.useMemo(()=>({container:_}),[_]),T=reactExports.useMemo(()=>createTheme({palette:{mode:d?"dark":"light"},components:{MuiPopper:{defaultProps:S},MuiPopover:{defaultProps:S},MuiDialog:{defaultProps:S}}}),[d,S]);return jsxRuntimeExports.jsx(ThemeProvider,{theme:T,children:jsxRuntimeExports.jsx(CssBaseline,{enableColorScheme:!0,children:s})})}),createMdvPortal=(f,s,d)=>{const _=createRoot(s);return _.render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(OuterContainerProvider,{parent:d,children:jsxRuntimeExports.jsx(MaterialWrapper,{children:jsxRuntimeExports.jsx(ProjectProvider,{children:f})})})})),_};function isObject$a(f){return Object.prototype.toString.call(f)==="[object Object]"}function objectSize(f){return Array.isArray(f)?f.length:isObject$a(f)?Object.keys(f).length:0}function stringifyForCopying(f,s){if(typeof f=="string")return f;try{return JSON.stringify(f,(d,_)=>{switch(typeof _){case"bigint":return String(_)+"n";case"number":case"boolean":case"object":case"string":return _;default:return String(_)}},s)}catch(d){return`${d.name}: ${d.message}`||"JSON.stringify failed"}}function isCollapsed(f,s,d,_,S,T){if(T&&T.collapsed!==void 0)return!!T.collapsed;if(typeof _=="boolean")return _;if(typeof _=="number"&&s>_)return!0;const F=objectSize(f);if(typeof _=="function"){const M=safeCall(_,[{node:f,depth:s,indexOrName:d,size:F}]);if(typeof M=="boolean")return M}return!!(Array.isArray(f)&&F>S||isObject$a(f)&&F>S)}function isCollapsed_largeArray(f,s,d,_,S,T){if(T&&T.collapsed!==void 0)return!!T.collapsed;if(typeof _=="boolean")return _;if(typeof _=="number"&&s>_)return!0;const F=Math.ceil(f.length/100);if(typeof _=="function"){const M=safeCall(_,[{node:f,depth:s,indexOrName:d,size:F}]);if(typeof M=="boolean")return M}return!!(Array.isArray(f)&&F>S||isObject$a(f)&&F>S)}function ifDisplay(f,s,d){return typeof f=="boolean"?f:!!(typeof f=="number"&&s>f||f==="collapsed"&&d||f==="expanded"&&!d)}function safeCall(f,s){try{return f(...s)}catch(d){reportError(d)}}function editableAdd(f){if(f===!0||isObject$a(f)&&f.add===!0)return!0}function editableEdit(f){if(f===!0||isObject$a(f)&&f.edit===!0)return!0}function editableDelete(f){if(f===!0||isObject$a(f)&&f.delete===!0)return!0}function isReactComponent(f){return typeof f=="function"}function customAdd(f){return!f||f.add===void 0||!!f.add}function customEdit(f){return!f||f.edit===void 0||!!f.edit}function customDelete(f){return!f||f.delete===void 0||!!f.delete}function customCopy(f){return!f||f.enableClipboard===void 0||!!f.enableClipboard}function customMatchesURL(f){return!f||f.matchesURL===void 0||!!f.matchesURL}function resolveEvalFailedNewValue(f,s){return f==="string"?s.trim().replace(/^\"([\s\S]+?)\"$/,"$1"):s}var _path$8;function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(f){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(f[_]=d[_])}return f},_extends$8.apply(this,arguments)}var SvgAngleDown=function(s){return reactExports.createElement("svg",_extends$8({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},s),_path$8||(_path$8=reactExports.createElement("path",{fill:"currentColor",d:"M12.473 5.806a.666.666 0 0 0-.946 0L8.473 8.86a.667.667 0 0 1-.946 0L4.473 5.806a.667.667 0 1 0-.946.94l3.06 3.06a2 2 0 0 0 2.826 0l3.06-3.06a.667.667 0 0 0 0-.94Z"})))},_path$7;function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(f){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(f[_]=d[_])}return f},_extends$7.apply(this,arguments)}var SvgCopy=function(s){return reactExports.createElement("svg",_extends$7({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$7||(_path$7=reactExports.createElement("path",{fill:"currentColor",d:"M17.542 2.5h-4.75a3.963 3.963 0 0 0-3.959 3.958v4.75a3.963 3.963 0 0 0 3.959 3.959h4.75a3.963 3.963 0 0 0 3.958-3.959v-4.75A3.963 3.963 0 0 0 17.542 2.5Zm2.375 8.708a2.378 2.378 0 0 1-2.375 2.375h-4.75a2.378 2.378 0 0 1-2.375-2.375v-4.75a2.378 2.378 0 0 1 2.375-2.375h4.75a2.378 2.378 0 0 1 2.375 2.375v4.75Zm-4.75 6.334a3.963 3.963 0 0 1-3.959 3.958h-4.75A3.963 3.963 0 0 1 2.5 17.542v-4.75a3.963 3.963 0 0 1 3.958-3.959.791.791 0 1 1 0 1.584 2.378 2.378 0 0 0-2.375 2.375v4.75a2.378 2.378 0 0 0 2.375 2.375h4.75a2.378 2.378 0 0 0 2.375-2.375.792.792 0 1 1 1.584 0Z"})))},_path$6,_path2$5;function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(f){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(f[_]=d[_])}return f},_extends$6.apply(this,arguments)}var SvgCopied=function(s){return reactExports.createElement("svg",_extends$6({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$6||(_path$6=reactExports.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.755 3.755 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.755 3.755 0 0 0 17.25 3Zm2.25 14.25a2.25 2.25 0 0 1-2.25 2.25H6.75a2.25 2.25 0 0 1-2.25-2.25V6.75A2.25 2.25 0 0 1 6.75 4.5h10.5a2.25 2.25 0 0 1 2.25 2.25v10.5Z"})),_path2$5||(_path2$5=reactExports.createElement("path",{fill:"#14C786",d:"M10.312 14.45 7.83 11.906a.625.625 0 0 0-.896 0 .659.659 0 0 0 0 .918l2.481 2.546a1.264 1.264 0 0 0 .896.381 1.237 1.237 0 0 0 .895-.38l5.858-6.011a.658.658 0 0 0 0-.919.625.625 0 0 0-.896 0l-5.857 6.01Z"})))};function CopyButton({node:f}){const{customizeCopy:s}=reactExports.useContext(JsonViewContext),[d,_]=reactExports.useState(!1);return d?jsxRuntimeExports.jsx(SvgCopied,{className:"json-view--copy",style:{display:"inline-block"}}):jsxRuntimeExports.jsx(SvgCopy,{onClick:S=>{S.stopPropagation();const T=s(f);typeof T=="string"&&T&&navigator.clipboard.writeText(T),_(!0),setTimeout(()=>_(!1),3e3)},className:"json-view--copy"})}function NameValue({indexOrName:f,value:s,depth:d,parent:_,deleteHandle:S,editHandle:T}){return jsxRuntimeExports.jsxs("div",Object.assign({className:"json-view--pair"},{children:[jsxRuntimeExports.jsx("span",Object.assign({className:typeof f=="number"?"json-view--index":"json-view--property"},{children:f})),":"," ",jsxRuntimeExports.jsx(JsonNode,{node:s,depth:d+1,deleteHandle:S,editHandle:T,parent:_,indexOrName:f})]}))}var _path$5,_path2$4;function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(f){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(f[_]=d[_])}return f},_extends$5.apply(this,arguments)}var SvgTrash=function(s){return reactExports.createElement("svg",_extends$5({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$5||(_path$5=reactExports.createElement("path",{fill:"currentColor",d:"M18.75 6h-2.325a3.757 3.757 0 0 0-3.675-3h-1.5a3.757 3.757 0 0 0-3.675 3H5.25a.75.75 0 0 0 0 1.5H6v9.75A3.754 3.754 0 0 0 9.75 21h4.5A3.754 3.754 0 0 0 18 17.25V7.5h.75a.75.75 0 1 0 0-1.5Zm-7.5-1.5h1.5A2.255 2.255 0 0 1 14.872 6H9.128a2.255 2.255 0 0 1 2.122-1.5Zm5.25 12.75a2.25 2.25 0 0 1-2.25 2.25h-4.5a2.25 2.25 0 0 1-2.25-2.25V7.5h9v9.75Z"})),_path2$4||(_path2$4=reactExports.createElement("path",{fill:"#DA0000",d:"M10.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75ZM13.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75Z"})))},_path$4,_path2$3;function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(f){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(f[_]=d[_])}return f},_extends$4.apply(this,arguments)}var SvgAddSquare=function(s){return reactExports.createElement("svg",_extends$4({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$4||(_path$4=reactExports.createElement("path",{fill:"currentColor",d:"M21 6.75v10.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3h10.5A3.754 3.754 0 0 1 21 6.75Zm-1.5 0c0-1.24-1.01-2.25-2.25-2.25H6.75C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25V6.75Z"})),_path2$3||(_path2$3=reactExports.createElement("path",{fill:"#14C786",d:"M15 12.75a.75.75 0 1 0 0-1.5h-2.25V9a.75.75 0 1 0-1.5 0v2.25H9a.75.75 0 1 0 0 1.5h2.25V15a.75.75 0 1 0 1.5 0v-2.25H15Z"})))},_path$3,_path2$2;function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(f){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(f[_]=d[_])}return f},_extends$3.apply(this,arguments)}var SvgDone=function(s){return reactExports.createElement("svg",_extends$3({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$3||(_path$3=reactExports.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})),_path2$2||(_path2$2=reactExports.createElement("path",{fill:"#14C786",d:"m10.85 13.96-1.986-2.036a.5.5 0 0 0-.716 0 .527.527 0 0 0 0 .735l1.985 2.036a1.01 1.01 0 0 0 .717.305.99.99 0 0 0 .716-.305l4.686-4.808a.526.526 0 0 0 0-.735.5.5 0 0 0-.716 0l-4.687 4.809Z"})))},_path$2,_path2$1;function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(f){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(f[_]=d[_])}return f},_extends$2.apply(this,arguments)}var SvgCancel=function(s){return reactExports.createElement("svg",_extends$2({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$2||(_path$2=reactExports.createElement("path",{fill:"#DA0000",d:"M15 9a.75.75 0 0 0-1.06 0L12 10.94 10.06 9A.75.75 0 0 0 9 10.06L10.94 12 9 13.94A.75.75 0 0 0 10.06 15L12 13.06 13.94 15A.75.75 0 0 0 15 13.94L13.06 12 15 10.06A.75.75 0 0 0 15 9Z"})),_path2$1||(_path2$1=reactExports.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})))};function LargeArrayNode({originNode:f,node:s,depth:d,index:_,deleteHandle:S,customOptions:T,startIndex:F}){const{enableClipboard:M,src:P,onEdit:H,onChange:J,forceUpdate:K,displaySize:z}=reactExports.useContext(JsonViewContext),[oe,se]=reactExports.useState(!0),ae=reactExports.useCallback((he,ve,be)=>{f[he]=ve,H&&H({newValue:ve,oldValue:be,depth:d,src:P,indexOrName:he,parentType:"array"}),J&&J({type:"edit",depth:d,src:P,indexOrName:he,parentType:"array"}),K()},[s,H,J,K]),ge=he=>{f.splice(he,1),K()},pe=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!oe&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>se(!0),className:"jv-size-chevron"},{children:[ifDisplay(z,d,oe)&&jsxRuntimeExports.jsxs("span",Object.assign({className:"jv-size"},{children:[objectSize(s)," Items"]})),jsxRuntimeExports.jsx(SvgAngleDown,{className:"jv-chevron"})]})),!oe&&M&&customCopy(T)&&jsxRuntimeExports.jsx(CopyButton,{node:s})]});return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{children:"["}),pe,oe?jsxRuntimeExports.jsxs("button",Object.assign({onClick:()=>se(!1),className:"jv-button"},{children:[F," ... ",F+s.length-1]})):jsxRuntimeExports.jsx("div",Object.assign({className:"jv-indent"},{children:s.map((he,ve)=>jsxRuntimeExports.jsx(NameValue,{indexOrName:ve+F,value:he,depth:d,parent:s,deleteHandle:ge,editHandle:ae},String(_)+String(ve)))})),jsxRuntimeExports.jsx("span",{children:"]"})]})}function LargeArray({node:f,depth:s,deleteHandle:d,indexOrName:_,customOptions:S}){const T=[];for(let xt=0;xt<f.length;xt+=100)T.push(f.slice(xt,xt+100));const{collapsed:F,enableClipboard:M,collapseObjectsAfterLength:P,editable:H,onDelete:J,src:K,onAdd:z,onEdit:oe,onChange:se,forceUpdate:ae,displaySize:ge}=reactExports.useContext(JsonViewContext),[pe,he]=reactExports.useState(isCollapsed_largeArray(f,s,_,F,P,S));reactExports.useEffect(()=>{he(isCollapsed_largeArray(f,s,_,F,P,S))},[F,P]);const[ve,be]=reactExports.useState(!1),Re=()=>{be(!1),d&&d(_),J&&J({value:f,depth:s,src:K,indexOrName:_,parentType:"array"}),se&&se({type:"delete",depth:s,src:K,indexOrName:_,parentType:"array"})},[Fe,ye]=reactExports.useState(!1),Ue=()=>{const xt=f;xt.push(null),z&&z({indexOrName:xt.length-1,depth:s,src:K,parentType:"array"}),se&&se({type:"add",indexOrName:xt.length-1,depth:s,src:K,parentType:"array"}),ae()},It=ve||Fe,St=()=>{be(!1),ye(!1)},At=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!pe&&!It&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>he(!0),className:"jv-size-chevron"},{children:[ifDisplay(ge,s,pe)&&jsxRuntimeExports.jsxs("span",Object.assign({className:"jv-size"},{children:[f.length," Items"]})),jsxRuntimeExports.jsx(SvgAngleDown,{className:"jv-chevron"})]})),It&&jsxRuntimeExports.jsx(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:Fe?Ue:Re}),It&&jsxRuntimeExports.jsx(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:St}),!pe&&!It&&M&&customCopy(S)&&jsxRuntimeExports.jsx(CopyButton,{node:f}),!pe&&!It&&editableAdd(H)&&customAdd(S)&&jsxRuntimeExports.jsx(SvgAddSquare,{className:"json-view--edit",onClick:()=>{Ue()}}),!pe&&!It&&editableDelete(H)&&customDelete(S)&&d&&jsxRuntimeExports.jsx(SvgTrash,{className:"json-view--edit",onClick:()=>be(!0)})]});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"["}),At,pe?jsxRuntimeExports.jsx("button",Object.assign({onClick:()=>he(!1),className:"jv-button"},{children:"..."})):jsxRuntimeExports.jsx("div",Object.assign({className:"jv-indent"},{children:T.map((xt,Ct)=>jsxRuntimeExports.jsx(LargeArrayNode,{originNode:f,node:xt,depth:s,index:Ct,startIndex:Ct*100},String(_)+String(Ct)))})),jsxRuntimeExports.jsx("span",{children:"]"}),pe&&ifDisplay(ge,s,pe)&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>he(!1),className:"jv-size"},{children:[f.length," Items"]}))]})}function ObjectNode({node:f,depth:s,indexOrName:d,deleteHandle:_,customOptions:S}){const{collapsed:T,enableClipboard:F,ignoreLargeArray:M,collapseObjectsAfterLength:P,editable:H,onDelete:J,src:K,onAdd:z,onEdit:oe,onChange:se,forceUpdate:ae,displaySize:ge}=reactExports.useContext(JsonViewContext);if(!M&&Array.isArray(f)&&f.length>100)return jsxRuntimeExports.jsx(LargeArray,{node:f,depth:s,indexOrName:d,deleteHandle:_,customOptions:S});const pe=isObject$a(f),[he,ve]=reactExports.useState(isCollapsed(f,s,d,T,P,S));reactExports.useEffect(()=>{ve(isCollapsed(f,s,d,T,P,S))},[T,P]);const be=reactExports.useCallback((qr,na,qn)=>{Array.isArray(f)?f[+qr]=na:f&&(f[qr]=na),oe&&oe({newValue:na,oldValue:qn,depth:s,src:K,indexOrName:qr,parentType:pe?"object":"array"}),se&&se({type:"edit",depth:s,src:K,indexOrName:qr,parentType:pe?"object":"array"}),ae()},[f,oe,se,ae]),Re=qr=>{Array.isArray(f)?f.splice(+qr,1):f&&delete f[qr],ae()},[Fe,ye]=reactExports.useState(!1),Ue=()=>{ye(!1),_&&_(d),J&&J({value:f,depth:s,src:K,indexOrName:d,parentType:pe?"object":"array"}),se&&se({type:"delete",depth:s,src:K,indexOrName:d,parentType:pe?"object":"array"})},[It,St]=reactExports.useState(!1),At=reactExports.useRef(null),xt=()=>{var qr;if(pe){const na=(qr=At.current)===null||qr===void 0?void 0:qr.value;na&&(f[na]=null,At.current&&(At.current.value=""),St(!1),z&&z({indexOrName:na,depth:s,src:K,parentType:"object"}),se&&se({type:"add",indexOrName:na,depth:s,src:K,parentType:"object"}))}else if(Array.isArray(f)){const na=f;na.push(null),z&&z({indexOrName:na.length-1,depth:s,src:K,parentType:"array"}),se&&se({type:"add",indexOrName:na.length-1,depth:s,src:K,parentType:"array"})}ae()},Ct=qr=>{qr.key==="Enter"?(qr.preventDefault(),xt()):qr.key==="Escape"&&qt()},Nt=Fe||It,qt=()=>{ye(!1),St(!1)},Jn=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!he&&!Nt&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>ve(!0),className:"jv-size-chevron"},{children:[ifDisplay(ge,s,he)&&jsxRuntimeExports.jsxs("span",Object.assign({className:"jv-size"},{children:[objectSize(f)," Items"]})),jsxRuntimeExports.jsx(SvgAngleDown,{className:"jv-chevron"})]})),It&&pe&&jsxRuntimeExports.jsx("input",{className:"json-view--input",placeholder:"property",ref:At,onKeyDown:Ct}),Nt&&jsxRuntimeExports.jsx(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:It?xt:Ue}),Nt&&jsxRuntimeExports.jsx(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:qt}),!he&&!Nt&&F&&customCopy(S)&&jsxRuntimeExports.jsx(CopyButton,{node:f}),!he&&!Nt&&editableAdd(H)&&customAdd(S)&&jsxRuntimeExports.jsx(SvgAddSquare,{className:"json-view--edit",onClick:()=>{pe?(St(!0),setTimeout(()=>{var qr;return(qr=At.current)===null||qr===void 0?void 0:qr.focus()})):xt()}}),!he&&!Nt&&editableDelete(H)&&customDelete(S)&&_&&jsxRuntimeExports.jsx(SvgTrash,{className:"json-view--edit",onClick:()=>ye(!0)})]});return Array.isArray(f)?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"["}),Jn,he?jsxRuntimeExports.jsx("button",Object.assign({onClick:()=>ve(!1),className:"jv-button"},{children:"..."})):jsxRuntimeExports.jsx("div",Object.assign({className:"jv-indent"},{children:f.map((qr,na)=>jsxRuntimeExports.jsx(NameValue,{indexOrName:na,value:qr,depth:s,parent:f,deleteHandle:Re,editHandle:be},String(d)+String(na)))})),jsxRuntimeExports.jsx("span",{children:"]"}),he&&ifDisplay(ge,s,he)&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>ve(!1),className:"jv-size"},{children:[objectSize(f)," Items"]}))]}):pe?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"{"}),Jn,he?jsxRuntimeExports.jsx("button",Object.assign({onClick:()=>ve(!1),className:"jv-button"},{children:"..."})):jsxRuntimeExports.jsx("div",Object.assign({className:"jv-indent"},{children:Object.entries(f).map(([qr,na])=>jsxRuntimeExports.jsx(NameValue,{indexOrName:qr,value:na,depth:s,parent:f,deleteHandle:Re,editHandle:be},String(d)+String(qr)))})),jsxRuntimeExports.jsx("span",{children:"}"}),he&&ifDisplay(ge,s,he)&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>ve(!1),className:"jv-size"},{children:[objectSize(f)," Items"]}))]}):null}const LongString=React$1.forwardRef(({str:f,className:s,ctrlClick:d},_)=>{let{collapseStringMode:S,collapseStringsAfterLength:T,customizeCollapseStringUI:F}=reactExports.useContext(JsonViewContext);const[M,P]=reactExports.useState(!0),H=reactExports.useRef(null);T=T>0?T:0;const J=f.replace(/\s+/g," "),K=typeof F=="function"?F(J,M):typeof F=="string"?F:"...",z=oe=>{var se;if((oe.ctrlKey||oe.metaKey)&&d)d(oe);else{const ae=window.getSelection();if(ae&&ae.anchorOffset!==ae.focusOffset&&((se=ae.anchorNode)===null||se===void 0?void 0:se.parentElement)===H.current)return;P(!M)}};if(f.length<=T)return jsxRuntimeExports.jsxs("span",Object.assign({ref:H,className:s,onClick:d},{children:['"',f,'"']}));if(S==="address")return f.length<=10?jsxRuntimeExports.jsxs("span",Object.assign({ref:H,className:s,onClick:d},{children:['"',f,'"']})):jsxRuntimeExports.jsxs("span",Object.assign({ref:H,onClick:z,className:s+" cursor-pointer"},{children:['"',M?[J.slice(0,6),K,J.slice(-4)]:f,'"']}));if(S==="directly")return jsxRuntimeExports.jsxs("span",Object.assign({ref:H,onClick:z,className:s+" cursor-pointer"},{children:['"',M?[J.slice(0,T),K]:f,'"']}));if(S==="word"){let oe=T,se=T+1,ae=J,ge=1;for(;;){if(/\W/.test(f[oe])){ae=f.slice(0,oe);break}if(/\W/.test(f[se])){ae=f.slice(0,se);break}if(ge===6){ae=f.slice(0,T);break}ge++,oe--,se++}return jsxRuntimeExports.jsxs("span",Object.assign({ref:H,onClick:z,className:s+" cursor-pointer"},{children:['"',M?[ae,K]:f,'"']}))}return jsxRuntimeExports.jsxs("span",Object.assign({ref:H,className:s},{children:['"',f,'"']}))});var _path$1;function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(f){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(f[_]=d[_])}return f},_extends$1.apply(this,arguments)}var SvgEdit=function(s){return reactExports.createElement("svg",_extends$1({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$1||(_path$1=reactExports.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.754 3.754 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.754 3.754 0 0 0 17.25 3Zm2.25 14.25c0 1.24-1.01 2.25-2.25 2.25H6.75c-1.24 0-2.25-1.01-2.25-2.25V6.75c0-1.24 1.01-2.25 2.25-2.25h10.5c1.24 0 2.25 1.01 2.25 2.25v10.5Zm-6.09-9.466-5.031 5.03a2.981 2.981 0 0 0-.879 2.121v1.19c0 .415.336.75.75.75h1.19c.8 0 1.554-.312 2.12-.879l5.03-5.03a2.252 2.252 0 0 0 0-3.182c-.85-.85-2.331-.85-3.18 0Zm-2.91 7.151c-.28.28-.666.44-1.06.44H9v-.44c0-.4.156-.777.44-1.06l3.187-3.188 1.06 1.061-3.187 3.188Zm5.03-5.03-.782.783-1.06-1.061.782-.782a.766.766 0 0 1 1.06 0 .75.75 0 0 1 0 1.06Z"})))},_path,_path2;function _extends(){return _extends=Object.assign?Object.assign.bind():function(f){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(f[_]=d[_])}return f},_extends.apply(this,arguments)}var SvgLink=function(s){return reactExports.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path||(_path=reactExports.createElement("path",{fill:"currentColor",d:"M6.75 3h5.5v1.5h-5.5C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25v-5.5H21v5.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3Z"})),_path2||(_path2=reactExports.createElement("path",{fill:"currentColor",d:"M20.013 3h-3.946a.987.987 0 0 0 0 1.973h1.564l-6.342 6.342a1.004 1.004 0 0 0 0 1.396 1.004 1.004 0 0 0 1.396 0l6.342-6.342v1.564a.987.987 0 0 0 1.973 0V3.987A.987.987 0 0 0 20.013 3Z"})))};function JsonNode({node,depth,deleteHandle:_deleteHandle,indexOrName,parent,editHandle}){const{collapseStringsAfterLength,enableClipboard,editable,src,onDelete,onChange,customizeNode,matchesURL,urlRegExp}=reactExports.useContext(JsonViewContext);let customReturn;if(typeof customizeNode=="function"&&(customReturn=safeCall(customizeNode,[{node,depth,indexOrName}])),customReturn){if(reactExports.isValidElement(customReturn))return customReturn;if(isReactComponent(customReturn)){const f=customReturn;return jsxRuntimeExports.jsx(f,{node,depth,indexOrName})}}if(Array.isArray(node)||isObject$a(node))return jsxRuntimeExports.jsx(ObjectNode,{node,depth,indexOrName,deleteHandle:_deleteHandle,customOptions:typeof customReturn=="object"?customReturn:void 0});{const type=typeof node,[editing,setEditing]=reactExports.useState(!1),[deleting,setDeleting]=reactExports.useState(!1),valueRef=reactExports.useRef(null),edit=()=>{setEditing(!0),setTimeout(()=>{var f,s;(f=window.getSelection())===null||f===void 0||f.selectAllChildren(valueRef.current),(s=valueRef.current)===null||s===void 0||s.focus()})},done=reactExports.useCallback(()=>{let newValue=valueRef.current.innerText;try{(newValue==="{}"||newValue==="[]")&&(newValue=`(${newValue})`);const evalValue=eval(newValue);editHandle&&editHandle(indexOrName,evalValue,node)}catch(f){const s=resolveEvalFailedNewValue(type,newValue);editHandle&&editHandle(indexOrName,s,node)}setEditing(!1)},[editHandle]),cancel=()=>{setEditing(!1),setDeleting(!1)},deleteHandle=()=>{setDeleting(!1),_deleteHandle&&_deleteHandle(indexOrName),onDelete&&onDelete({value:node,depth,src,indexOrName,parentType:Array.isArray(parent)?"array":"object"}),onChange&&onChange({depth,src,indexOrName,parentType:Array.isArray(parent)?"array":"object",type:"delete"})},handleKeyDown=reactExports.useCallback(f=>{f.key==="Enter"?(f.preventDefault(),done()):f.key==="Escape"&&cancel()},[done]),isEditing=editing||deleting,ctrlClick=!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle?f=>{(f.ctrlKey||f.metaKey)&&edit()}:void 0,Icons=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[isEditing&&jsxRuntimeExports.jsx(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:deleting?deleteHandle:done}),isEditing&&jsxRuntimeExports.jsx(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:cancel}),!isEditing&&enableClipboard&&customCopy(customReturn)&&jsxRuntimeExports.jsx(CopyButton,{node}),!isEditing&&matchesURL&&type==="string"&&urlRegExp.test(node)&&customMatchesURL(customReturn)&&jsxRuntimeExports.jsx("a",Object.assign({href:node,target:"_blank",className:"json-view--link"},{children:jsxRuntimeExports.jsx(SvgLink,{})})),!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle&&jsxRuntimeExports.jsx(SvgEdit,{className:"json-view--edit",onClick:edit}),!isEditing&&editableDelete(editable)&&customDelete(customReturn)&&_deleteHandle&&jsxRuntimeExports.jsx(SvgTrash,{className:"json-view--edit",onClick:()=>setDeleting(!0)})]});let className="json-view--string";switch(typeof(customReturn==null?void 0:customReturn.className)=="string"&&(className+=" "+customReturn.className),type){case"number":case"bigint":className="json-view--number";break;case"boolean":className="json-view--boolean";break;case"object":className="json-view--null";break}deleting&&(className+=" json-view--deleting");let displayValue=String(node);type==="bigint"&&(displayValue+="n");const EditingElement=reactExports.useMemo(()=>jsxRuntimeExports.jsx("span",{contentEditable:!0,className,dangerouslySetInnerHTML:{__html:type==="string"?`"${displayValue}"`:displayValue},ref:valueRef,onKeyDown:handleKeyDown}),[displayValue,type,handleKeyDown]);return type==="string"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[editing?EditingElement:node.length>collapseStringsAfterLength?jsxRuntimeExports.jsx(LongString,{str:node,ref:valueRef,className,ctrlClick}):jsxRuntimeExports.jsxs("span",Object.assign({className,onClick:ctrlClick},{children:['"',displayValue,'"']})),Icons]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[editing?EditingElement:jsxRuntimeExports.jsx("span",Object.assign({className,onClick:ctrlClick},{children:displayValue})),Icons]})}}const defaultURLRegExp=/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/,JsonViewContext=reactExports.createContext({src:void 0,collapseStringsAfterLength:99,collapseStringMode:"directly",customizeCollapseStringUI:void 0,collapseObjectsAfterLength:20,collapsed:!1,enableClipboard:!0,editable:!1,onEdit:void 0,onDelete:void 0,onAdd:void 0,onChange:void 0,forceUpdate:()=>{},customizeNode:void 0,customizeCopy:()=>{},displaySize:void 0,matchesURL:!1,urlRegExp:defaultURLRegExp,ignoreLargeArray:!1});function JsonView({src:f,collapseStringsAfterLength:s=99,collapseStringMode:d="directly",customizeCollapseStringUI:_,collapseObjectsAfterLength:S=99,collapsed:T,enableClipboard:F=!0,editable:M=!1,onEdit:P,onDelete:H,onAdd:J,onChange:K,dark:z=!1,theme:oe="default",customizeNode:se,customizeCopy:ae=stringifyForCopying,displaySize:ge,style:pe,className:he,matchesURL:ve=!1,urlRegExp:be=defaultURLRegExp,ignoreLargeArray:Re=!1}){const[Fe,ye]=reactExports.useState(0),Ue=reactExports.useCallback(()=>ye(At=>++At),[]),[It,St]=reactExports.useState(f);return reactExports.useEffect(()=>St(f),[f]),jsxRuntimeExports.jsx(JsonViewContext.Provider,Object.assign({value:{src:It,collapseStringsAfterLength:s,collapseStringMode:d,customizeCollapseStringUI:_,collapseObjectsAfterLength:S,collapsed:T,enableClipboard:F,editable:M,onEdit:P,onDelete:H,onAdd:J,onChange:K,forceUpdate:Ue,customizeNode:se,customizeCopy:ae,displaySize:ge,matchesURL:ve,urlRegExp:be,ignoreLargeArray:Re}},{children:jsxRuntimeExports.jsx("code",Object.assign({className:"json-view"+(z?" dark":"")+(oe&&oe!=="default"?" json-view_"+oe:"")+(he?" "+he:""),style:pe},{children:jsxRuntimeExports.jsx(JsonNode,{node:It,depth:1,editHandle:(At,xt,Ct)=>{St(xt),P&&P({newValue:xt,oldValue:Ct,depth:1,src:It,indexOrName:At,parentType:null}),K&&K({type:"edit",depth:1,src:It,indexOrName:At,parentType:null})},deleteHandle:()=>{St(void 0),H&&H({value:It,depth:1,src:It,indexOrName:"",parentType:null}),K&&K({depth:1,src:It,indexOrName:"",parentType:null,type:"delete"})}})}))}))}function c$2(f,s,d){var _=this,S=reactExports.useRef(null),T=reactExports.useRef(0),F=reactExports.useRef(null),M=reactExports.useRef([]),P=reactExports.useRef(),H=reactExports.useRef(),J=reactExports.useRef(f),K=reactExports.useRef(!0);J.current=f;var z=typeof window<"u",oe=!s&&s!==0&&z;if(typeof f!="function")throw new TypeError("Expected a function");s=+s||0;var se=!!(d=d||{}).leading,ae=!("trailing"in d)||!!d.trailing,ge="maxWait"in d,pe="debounceOnServer"in d&&!!d.debounceOnServer,he=ge?Math.max(+d.maxWait||0,s):null;reactExports.useEffect(function(){return K.current=!0,function(){K.current=!1}},[]);var ve=reactExports.useMemo(function(){var be=function(St){var At=M.current,xt=P.current;return M.current=P.current=null,T.current=St,H.current=J.current.apply(xt,At)},Re=function(St,At){oe&&cancelAnimationFrame(F.current),F.current=oe?requestAnimationFrame(St):setTimeout(St,At)},Fe=function(St){if(!K.current)return!1;var At=St-S.current;return!S.current||At>=s||At<0||ge&&St-T.current>=he},ye=function(St){return F.current=null,ae&&M.current?be(St):(M.current=P.current=null,H.current)},Ue=function St(){var At=Date.now();if(Fe(At))return ye(At);if(K.current){var xt=s-(At-S.current),Ct=ge?Math.min(xt,he-(At-T.current)):xt;Re(St,Ct)}},It=function(){if(z||pe){var St=Date.now(),At=Fe(St);if(M.current=[].slice.call(arguments),P.current=_,S.current=St,At){if(!F.current&&K.current)return T.current=S.current,Re(Ue,s),se?be(S.current):H.current;if(ge)return Re(Ue,s),be(S.current)}return F.current||Re(Ue,s),H.current}};return It.cancel=function(){F.current&&(oe?cancelAnimationFrame(F.current):clearTimeout(F.current)),T.current=0,M.current=S.current=P.current=F.current=null},It.isPending=function(){return!!F.current},It.flush=function(){return F.current?ye(Date.now()):H.current},It},[se,ge,s,he,ae,oe,z,pe]);return ve}function i$2(f,s){return f===s}function a$1(f,s){return s}function o$1(f,s,d){var _=i$2,S=reactExports.useReducer(a$1,f),T=S[0],F=S[1],M=c$2(reactExports.useCallback(function(H){return F(H)},[F]),s,d),P=reactExports.useRef(f);return _(P.current,f)||(M(f),P.current=f),_(T,f)&&M.cancel(),[T,M]}function filterJSON(f,s){if(!s)return f;const d=s.toLowerCase().split(" ");function _(T,F){const M=F.concat(T).join(" ").toLowerCase();return d.every(P=>M.includes(P))}function S(T,F){if(_("",F))return T;if(typeof T=="string")return _(T,F)?T:null;if(typeof T=="object"&&T!==null){const M={};let P=!1;for(const H in T){const J=S(T[H],F.concat(H));J!==null&&(M[H]=J,P=!0)}if(P||_("",F))return M}return null}return S(f,[])||{}}function Gui$1({json:f,header:s}){const[d,_]=reactExports.useState(""),[S]=o$1(d,300),T=reactExports.useMemo(()=>filterJSON(f,S),[f,S]);return jsxRuntimeExports.jsxs("div",{className:"max-h-[90vh] overflow-auto",children:[s&&jsxRuntimeExports.jsx("h2",{children:s}),jsxRuntimeExports.jsx("input",{type:"text",value:d,onChange:F=>_(F.target.value),placeholder:"Filter..."}),jsxRuntimeExports.jsx(JsonView,{src:T})]})}const DebugChart=observer(({chart:f,header:s})=>jsxRuntimeExports.jsx(Gui$1,{json:f,header:s}));class DebugChartReactWrapper extends BaseDialog{constructor(d,_){const S=_?_.config.title||`${_.config.type} ${_.config.id}`:"",T=_?_.__doc__:document,F={width:500,title:`Debug ${S}`,doc:T,onclose:()=>{_==null||_.dialogs.splice(_.dialogs.indexOf(this),1)}};super(F,d);Bt(this,"_root")}get root(){return this._root}set root(d){this._root=d}init(d){const _=createEl("div",{},this.dialog);this.root=createMdvPortal(jsxRuntimeExports.jsx(DebugChart,{chart:d}),_,this)}close(){super.close(),this.root?this.root.unmount():console.warn("not unmounting react root for dialog because of weirdness")}}const ErrorBoundaryContext=reactExports.createContext(null),initialState$1={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(s){super(s),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState$1}static getDerivedStateFromError(s){return{didCatch:!0,error:s}}resetErrorBoundary(){const{error:s}=this.state;if(s!==null){for(var d,_,S=arguments.length,T=new Array(S),F=0;F<S;F++)T[F]=arguments[F];(d=(_=this.props).onReset)===null||d===void 0||d.call(_,{args:T,reason:"imperative-api"}),this.setState(initialState$1)}}componentDidCatch(s,d){var _,S;(_=(S=this.props).onError)===null||_===void 0||_.call(S,s,d)}componentDidUpdate(s,d){const{didCatch:_}=this.state,{resetKeys:S}=this.props;if(_&&d.error!==null&&hasArrayChanged(s.resetKeys,S)){var T,F;(T=(F=this.props).onReset)===null||T===void 0||T.call(F,{next:S,prev:s.resetKeys,reason:"keys"}),this.setState(initialState$1)}}render(){const{children:s,fallbackRender:d,FallbackComponent:_,fallback:S}=this.props,{didCatch:T,error:F}=this.state;let M=s;if(T){const P={error:F,resetErrorBoundary:this.resetErrorBoundary};if(typeof d=="function")M=d(P);else if(_)M=reactExports.createElement(_,P);else if(S===null||reactExports.isValidElement(S))M=S;else throw F}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:T,error:F,resetErrorBoundary:this.resetErrorBoundary}},M)}}function hasArrayChanged(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return f.length!==s.length||f.some((d,_)=>!Object.is(d,s[_]))}function createContextScope$1(f,s=[]){let d=[];function _(T,F){const M=reactExports.createContext(F),P=d.length;d=[...d,F];const H=K=>{var pe;const{scope:z,children:oe,...se}=K,ae=((pe=z==null?void 0:z[f])==null?void 0:pe[P])||M,ge=reactExports.useMemo(()=>se,Object.values(se));return jsxRuntimeExports.jsx(ae.Provider,{value:ge,children:oe})};H.displayName=T+"Provider";function J(K,z){var ae;const oe=((ae=z==null?void 0:z[f])==null?void 0:ae[P])||M,se=reactExports.useContext(oe);if(se)return se;if(F!==void 0)return F;throw new Error(`\`${K}\` must be used within \`${T}\``)}return[H,J]}const S=()=>{const T=d.map(F=>reactExports.createContext(F));return function(M){const P=(M==null?void 0:M[f])||T;return reactExports.useMemo(()=>({[`__scope${f}`]:{...M,[f]:P}}),[M,P])}};return S.scopeName=f,[_,composeContextScopes$1(S,...s)]}function composeContextScopes$1(...f){const s=f[0];if(f.length===1)return s;const d=()=>{const _=f.map(S=>({useScope:S(),scopeName:S.scopeName}));return function(T){const F=_.reduce((M,{useScope:P,scopeName:H})=>{const K=P(T)[`__scope${H}`];return{...M,...K}},{});return reactExports.useMemo(()=>({[`__scope${s.scopeName}`]:F}),[F])}};return d.scopeName=s.scopeName,d}function createContextScope(f,s=[]){let d=[];function _(T,F){const M=reactExports.createContext(F),P=d.length;d=[...d,F];function H(K){const{scope:z,children:oe,...se}=K,ae=(z==null?void 0:z[f][P])||M,ge=reactExports.useMemo(()=>se,Object.values(se));return jsxRuntimeExports.jsx(ae.Provider,{value:ge,children:oe})}function J(K,z){const oe=(z==null?void 0:z[f][P])||M,se=reactExports.useContext(oe);if(se)return se;if(F!==void 0)return F;throw new Error(`\`${K}\` must be used within \`${T}\``)}return H.displayName=T+"Provider",[H,J]}const S=()=>{const T=d.map(F=>reactExports.createContext(F));return function(M){const P=(M==null?void 0:M[f])||T;return reactExports.useMemo(()=>({[`__scope${f}`]:{...M,[f]:P}}),[M,P])}};return S.scopeName=f,[_,composeContextScopes(S,...s)]}function composeContextScopes(...f){const s=f[0];if(f.length===1)return s;const d=()=>{const _=f.map(S=>({useScope:S(),scopeName:S.scopeName}));return function(T){const F=_.reduce((M,{useScope:P,scopeName:H})=>{const K=P(T)[`__scope${H}`];return{...M,...K}},{});return reactExports.useMemo(()=>({[`__scope${s.scopeName}`]:F}),[F])}};return d.scopeName=s.scopeName,d}function setRef(f,s){typeof f=="function"?f(s):f!=null&&(f.current=s)}function composeRefs(...f){return s=>f.forEach(d=>setRef(d,s))}function useComposedRefs(...f){return reactExports.useCallback(composeRefs(...f),f)}var Slot=reactExports.forwardRef((f,s)=>{const{children:d,..._}=f,S=reactExports.Children.toArray(d),T=S.find(isSlottable);if(T){const F=T.props.children,M=S.map(P=>P===T?reactExports.Children.count(F)>1?reactExports.Children.only(null):reactExports.isValidElement(F)?F.props.children:null:P);return jsxRuntimeExports.jsx(SlotClone,{..._,ref:s,children:reactExports.isValidElement(F)?reactExports.cloneElement(F,void 0,M):null})}return jsxRuntimeExports.jsx(SlotClone,{..._,ref:s,children:d})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((f,s)=>{const{children:d,..._}=f;if(reactExports.isValidElement(d)){const S=getElementRef$1(d);return reactExports.cloneElement(d,{...mergeProps(_,d.props),ref:s?composeRefs(s,S):S})}return reactExports.Children.count(d)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:f})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:f});function isSlottable(f){return reactExports.isValidElement(f)&&f.type===Slottable}function mergeProps(f,s){const d={...s};for(const _ in s){const S=f[_],T=s[_];/^on[A-Z]/.test(_)?S&&T?d[_]=(...M)=>{T(...M),S(...M)}:S&&(d[_]=S):_==="style"?d[_]={...S,...T}:_==="className"&&(d[_]=[S,T].filter(Boolean).join(" "))}return{...f,...d}}function getElementRef$1(f){var _,S;let s=(_=Object.getOwnPropertyDescriptor(f.props,"ref"))==null?void 0:_.get,d=s&&"isReactWarning"in s&&s.isReactWarning;return d?f.ref:(s=(S=Object.getOwnPropertyDescriptor(f,"ref"))==null?void 0:S.get,d=s&&"isReactWarning"in s&&s.isReactWarning,d?f.props.ref:f.props.ref||f.ref)}function createCollection(f){const s=f+"CollectionProvider",[d,_]=createContextScope(s),[S,T]=d(s,{collectionRef:{current:null},itemMap:new Map}),F=oe=>{const{scope:se,children:ae}=oe,ge=React$1.useRef(null),pe=React$1.useRef(new Map).current;return jsxRuntimeExports.jsx(S,{scope:se,itemMap:pe,collectionRef:ge,children:ae})};F.displayName=s;const M=f+"CollectionSlot",P=React$1.forwardRef((oe,se)=>{const{scope:ae,children:ge}=oe,pe=T(M,ae),he=useComposedRefs(se,pe.collectionRef);return jsxRuntimeExports.jsx(Slot,{ref:he,children:ge})});P.displayName=M;const H=f+"CollectionItemSlot",J="data-radix-collection-item",K=React$1.forwardRef((oe,se)=>{const{scope:ae,children:ge,...pe}=oe,he=React$1.useRef(null),ve=useComposedRefs(se,he),be=T(H,ae);return React$1.useEffect(()=>(be.itemMap.set(he,{ref:he,...pe}),()=>void be.itemMap.delete(he))),jsxRuntimeExports.jsx(Slot,{[J]:"",ref:ve,children:ge})});K.displayName=H;function z(oe){const se=T(f+"CollectionConsumer",oe);return React$1.useCallback(()=>{const ge=se.collectionRef.current;if(!ge)return[];const pe=Array.from(ge.querySelectorAll(`[${J}]`));return Array.from(se.itemMap.values()).sort((be,Re)=>pe.indexOf(be.ref.current)-pe.indexOf(Re.ref.current))},[se.collectionRef,se.itemMap])}return[{Provider:F,Slot:P,ItemSlot:K},z,_]}function composeEventHandlers$1(f,s,{checkForDefaultPrevented:d=!0}={}){return function(S){if(f==null||f(S),d===!1||!S.defaultPrevented)return s==null?void 0:s(S)}}function useCallbackRef(f){const s=reactExports.useRef(f);return reactExports.useEffect(()=>{s.current=f}),reactExports.useMemo(()=>(...d)=>{var _;return(_=s.current)==null?void 0:_.call(s,...d)},[])}function useControllableState({prop:f,defaultProp:s,onChange:d=()=>{}}){const[_,S]=useUncontrolledState({defaultProp:s,onChange:d}),T=f!==void 0,F=T?f:_,M=useCallbackRef(d),P=reactExports.useCallback(H=>{if(T){const K=typeof H=="function"?H(f):H;K!==f&&M(K)}else S(H)},[T,f,S,M]);return[F,P]}function useUncontrolledState({defaultProp:f,onChange:s}){const d=reactExports.useState(f),[_]=d,S=reactExports.useRef(_),T=useCallbackRef(s);return reactExports.useEffect(()=>{S.current!==_&&(T(_),S.current=_)},[_,S,T]),d}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((f,s)=>{const d=reactExports.forwardRef((_,S)=>{const{asChild:T,...F}=_,M=T?Slot:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(M,{...F,ref:S})});return d.displayName=`Primitive.${s}`,{...f,[s]:d}},{}),useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};function useStateMachine(f,s){return reactExports.useReducer((d,_)=>s[d][_]??d,f)}var Presence=f=>{const{present:s,children:d}=f,_=usePresence(s),S=typeof d=="function"?d({present:_.isPresent}):reactExports.Children.only(d),T=useComposedRefs(_.ref,getElementRef(S));return typeof d=="function"||_.isPresent?reactExports.cloneElement(S,{ref:T}):null};Presence.displayName="Presence";function usePresence(f){const[s,d]=reactExports.useState(),_=reactExports.useRef({}),S=reactExports.useRef(f),T=reactExports.useRef("none"),F=f?"mounted":"unmounted",[M,P]=useStateMachine(F,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const H=getAnimationName(_.current);T.current=M==="mounted"?H:"none"},[M]),useLayoutEffect2(()=>{const H=_.current,J=S.current;if(J!==f){const z=T.current,oe=getAnimationName(H);f?P("MOUNT"):oe==="none"||(H==null?void 0:H.display)==="none"?P("UNMOUNT"):P(J&&z!==oe?"ANIMATION_OUT":"UNMOUNT"),S.current=f}},[f,P]),useLayoutEffect2(()=>{if(s){let H;const J=s.ownerDocument.defaultView??window,K=oe=>{const ae=getAnimationName(_.current).includes(oe.animationName);if(oe.target===s&&ae&&(P("ANIMATION_END"),!S.current)){const ge=s.style.animationFillMode;s.style.animationFillMode="forwards",H=J.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=ge)})}},z=oe=>{oe.target===s&&(T.current=getAnimationName(_.current))};return s.addEventListener("animationstart",z),s.addEventListener("animationcancel",K),s.addEventListener("animationend",K),()=>{J.clearTimeout(H),s.removeEventListener("animationstart",z),s.removeEventListener("animationcancel",K),s.removeEventListener("animationend",K)}}else P("ANIMATION_END")},[s,P]),{isPresent:["mounted","unmountSuspended"].includes(M),ref:reactExports.useCallback(H=>{H&&(_.current=getComputedStyle(H)),d(H)},[])}}function getAnimationName(f){return(f==null?void 0:f.animationName)||"none"}function getElementRef(f){var _,S;let s=(_=Object.getOwnPropertyDescriptor(f.props,"ref"))==null?void 0:_.get,d=s&&"isReactWarning"in s&&s.isReactWarning;return d?f.ref:(s=(S=Object.getOwnPropertyDescriptor(f,"ref"))==null?void 0:S.get,d=s&&"isReactWarning"in s&&s.isReactWarning,d?f.props.ref:f.props.ref||f.ref)}var useReactId=React$2.useId||(()=>{}),count$2=0;function useId(f){const[s,d]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{d(_=>_??String(count$2++))},[f]),s?`radix-${s}`:""}var COLLAPSIBLE_NAME="Collapsible",[createCollapsibleContext,createCollapsibleScope]=createContextScope$1(COLLAPSIBLE_NAME),[CollapsibleProvider,useCollapsibleContext]=createCollapsibleContext(COLLAPSIBLE_NAME),Collapsible=reactExports.forwardRef((f,s)=>{const{__scopeCollapsible:d,open:_,defaultOpen:S,disabled:T,onOpenChange:F,...M}=f,[P=!1,H]=useControllableState({prop:_,defaultProp:S,onChange:F});return jsxRuntimeExports.jsx(CollapsibleProvider,{scope:d,disabled:T,contentId:useId(),open:P,onOpenToggle:reactExports.useCallback(()=>H(J=>!J),[H]),children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$1(P),"data-disabled":T?"":void 0,...M,ref:s})})});Collapsible.displayName=COLLAPSIBLE_NAME;var TRIGGER_NAME$1="CollapsibleTrigger",CollapsibleTrigger=reactExports.forwardRef((f,s)=>{const{__scopeCollapsible:d,..._}=f,S=useCollapsibleContext(TRIGGER_NAME$1,d);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-controls":S.contentId,"aria-expanded":S.open||!1,"data-state":getState$1(S.open),"data-disabled":S.disabled?"":void 0,disabled:S.disabled,..._,ref:s,onClick:composeEventHandlers$1(f.onClick,S.onOpenToggle)})});CollapsibleTrigger.displayName=TRIGGER_NAME$1;var CONTENT_NAME$1="CollapsibleContent",CollapsibleContent=reactExports.forwardRef((f,s)=>{const{forceMount:d,..._}=f,S=useCollapsibleContext(CONTENT_NAME$1,f.__scopeCollapsible);return jsxRuntimeExports.jsx(Presence,{present:d||S.open,children:({present:T})=>jsxRuntimeExports.jsx(CollapsibleContentImpl,{..._,ref:s,present:T})})});CollapsibleContent.displayName=CONTENT_NAME$1;var CollapsibleContentImpl=reactExports.forwardRef((f,s)=>{const{__scopeCollapsible:d,present:_,children:S,...T}=f,F=useCollapsibleContext(CONTENT_NAME$1,d),[M,P]=reactExports.useState(_),H=reactExports.useRef(null),J=useComposedRefs(s,H),K=reactExports.useRef(0),z=K.current,oe=reactExports.useRef(0),se=oe.current,ae=F.open||M,ge=reactExports.useRef(ae),pe=reactExports.useRef();return reactExports.useEffect(()=>{const he=requestAnimationFrame(()=>ge.current=!1);return()=>cancelAnimationFrame(he)},[]),useLayoutEffect2(()=>{const he=H.current;if(he){pe.current=pe.current||{transitionDuration:he.style.transitionDuration,animationName:he.style.animationName},he.style.transitionDuration="0s",he.style.animationName="none";const ve=he.getBoundingClientRect();K.current=ve.height,oe.current=ve.width,ge.current||(he.style.transitionDuration=pe.current.transitionDuration,he.style.animationName=pe.current.animationName),P(_)}},[F.open,_]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$1(F.open),"data-disabled":F.disabled?"":void 0,id:F.contentId,hidden:!ae,...T,ref:J,style:{"--radix-collapsible-content-height":z?`${z}px`:void 0,"--radix-collapsible-content-width":se?`${se}px`:void 0,...f.style},children:ae&&S})});function getState$1(f){return f?"open":"closed"}var Root=Collapsible,Trigger=CollapsibleTrigger,Content=CollapsibleContent,DirectionContext=reactExports.createContext(void 0);function useDirection(f){const s=reactExports.useContext(DirectionContext);return f||s||"ltr"}var ACCORDION_NAME="Accordion",ACCORDION_KEYS=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Collection$1,useCollection,createCollectionScope]=createCollection(ACCORDION_NAME),[createAccordionContext,createAccordionScope]=createContextScope$1(ACCORDION_NAME,[createCollectionScope,createCollapsibleScope]),useCollapsibleScope=createCollapsibleScope(),Accordion$2=React$1.forwardRef((f,s)=>{const{type:d,..._}=f,S=_,T=_;return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:f.__scopeAccordion,children:d==="multiple"?jsxRuntimeExports.jsx(AccordionImplMultiple,{...T,ref:s}):jsxRuntimeExports.jsx(AccordionImplSingle,{...S,ref:s})})});Accordion$2.displayName=ACCORDION_NAME;var[AccordionValueProvider,useAccordionValueContext]=createAccordionContext(ACCORDION_NAME),[AccordionCollapsibleProvider,useAccordionCollapsibleContext]=createAccordionContext(ACCORDION_NAME,{collapsible:!1}),AccordionImplSingle=React$1.forwardRef((f,s)=>{const{value:d,defaultValue:_,onValueChange:S=()=>{},collapsible:T=!1,...F}=f,[M,P]=useControllableState({prop:d,defaultProp:_,onChange:S});return jsxRuntimeExports.jsx(AccordionValueProvider,{scope:f.__scopeAccordion,value:M?[M]:[],onItemOpen:P,onItemClose:React$1.useCallback(()=>T&&P(""),[T,P]),children:jsxRuntimeExports.jsx(AccordionCollapsibleProvider,{scope:f.__scopeAccordion,collapsible:T,children:jsxRuntimeExports.jsx(AccordionImpl,{...F,ref:s})})})}),AccordionImplMultiple=React$1.forwardRef((f,s)=>{const{value:d,defaultValue:_,onValueChange:S=()=>{},...T}=f,[F=[],M]=useControllableState({prop:d,defaultProp:_,onChange:S}),P=React$1.useCallback(J=>M((K=[])=>[...K,J]),[M]),H=React$1.useCallback(J=>M((K=[])=>K.filter(z=>z!==J)),[M]);return jsxRuntimeExports.jsx(AccordionValueProvider,{scope:f.__scopeAccordion,value:F,onItemOpen:P,onItemClose:H,children:jsxRuntimeExports.jsx(AccordionCollapsibleProvider,{scope:f.__scopeAccordion,collapsible:!0,children:jsxRuntimeExports.jsx(AccordionImpl,{...T,ref:s})})})}),[AccordionImplProvider,useAccordionContext]=createAccordionContext(ACCORDION_NAME),AccordionImpl=React$1.forwardRef((f,s)=>{const{__scopeAccordion:d,disabled:_,dir:S,orientation:T="vertical",...F}=f,M=React$1.useRef(null),P=useComposedRefs(M,s),H=useCollection(d),K=useDirection(S)==="ltr",z=composeEventHandlers$1(f.onKeyDown,oe=>{var Ue;if(!ACCORDION_KEYS.includes(oe.key))return;const se=oe.target,ae=H().filter(It=>{var St;return!((St=It.ref.current)!=null&&St.disabled)}),ge=ae.findIndex(It=>It.ref.current===se),pe=ae.length;if(ge===-1)return;oe.preventDefault();let he=ge;const ve=0,be=pe-1,Re=()=>{he=ge+1,he>be&&(he=ve)},Fe=()=>{he=ge-1,he<ve&&(he=be)};switch(oe.key){case"Home":he=ve;break;case"End":he=be;break;case"ArrowRight":T==="horizontal"&&(K?Re():Fe());break;case"ArrowDown":T==="vertical"&&Re();break;case"ArrowLeft":T==="horizontal"&&(K?Fe():Re());break;case"ArrowUp":T==="vertical"&&Fe();break}const ye=he%pe;(Ue=ae[ye].ref.current)==null||Ue.focus()});return jsxRuntimeExports.jsx(AccordionImplProvider,{scope:d,disabled:_,direction:S,orientation:T,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:d,children:jsxRuntimeExports.jsx(Primitive.div,{...F,"data-orientation":T,ref:P,onKeyDown:_?void 0:z})})})}),ITEM_NAME="AccordionItem",[AccordionItemProvider,useAccordionItemContext]=createAccordionContext(ITEM_NAME),AccordionItem$1=React$1.forwardRef((f,s)=>{const{__scopeAccordion:d,value:_,...S}=f,T=useAccordionContext(ITEM_NAME,d),F=useAccordionValueContext(ITEM_NAME,d),M=useCollapsibleScope(d),P=useId(),H=_&&F.value.includes(_)||!1,J=T.disabled||f.disabled;return jsxRuntimeExports.jsx(AccordionItemProvider,{scope:d,open:H,disabled:J,triggerId:P,children:jsxRuntimeExports.jsx(Root,{"data-orientation":T.orientation,"data-state":getState(H),...M,...S,ref:s,disabled:J,open:H,onOpenChange:K=>{K?F.onItemOpen(_):F.onItemClose(_)}})})});AccordionItem$1.displayName=ITEM_NAME;var HEADER_NAME="AccordionHeader",AccordionHeader=React$1.forwardRef((f,s)=>{const{__scopeAccordion:d,..._}=f,S=useAccordionContext(ACCORDION_NAME,d),T=useAccordionItemContext(HEADER_NAME,d);return jsxRuntimeExports.jsx(Primitive.h3,{"data-orientation":S.orientation,"data-state":getState(T.open),"data-disabled":T.disabled?"":void 0,..._,ref:s})});AccordionHeader.displayName=HEADER_NAME;var TRIGGER_NAME="AccordionTrigger",AccordionTrigger$1=React$1.forwardRef((f,s)=>{const{__scopeAccordion:d,..._}=f,S=useAccordionContext(ACCORDION_NAME,d),T=useAccordionItemContext(TRIGGER_NAME,d),F=useAccordionCollapsibleContext(TRIGGER_NAME,d),M=useCollapsibleScope(d);return jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:d,children:jsxRuntimeExports.jsx(Trigger,{"aria-disabled":T.open&&!F.collapsible||void 0,"data-orientation":S.orientation,id:T.triggerId,...M,..._,ref:s})})});AccordionTrigger$1.displayName=TRIGGER_NAME;var CONTENT_NAME="AccordionContent",AccordionContent$1=React$1.forwardRef((f,s)=>{const{__scopeAccordion:d,..._}=f,S=useAccordionContext(ACCORDION_NAME,d),T=useAccordionItemContext(CONTENT_NAME,d),F=useCollapsibleScope(d);return jsxRuntimeExports.jsx(Content,{role:"region","aria-labelledby":T.triggerId,"data-orientation":S.orientation,...F,..._,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...f.style}})});AccordionContent$1.displayName=CONTENT_NAME;function getState(f){return f?"open":"closed"}var Root2=Accordion$2,Item=AccordionItem$1,Header=AccordionHeader,Trigger2=AccordionTrigger$1,Content2=AccordionContent$1;/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=f=>f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(f,s)=>{const d=reactExports.forwardRef(({color:_="currentColor",size:S=24,strokeWidth:T=2,absoluteStrokeWidth:F,className:M="",children:P,...H},J)=>reactExports.createElement("svg",{ref:J,...defaultAttributes,width:S,height:S,stroke:_,strokeWidth:F?Number(T)*24/Number(S):T,className:["lucide",`lucide-${toKebabCase(f)}`,M].join(" "),...H},[...s.map(([K,z])=>reactExports.createElement(K,z)),...Array.isArray(P)?P:[P]]));return d.displayName=`${f}`,d};/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$2=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),CLASS_PART_SEPARATOR="-",createClassGroupUtils=f=>{const s=createClassMap(f),{conflictingClassGroups:d,conflictingClassGroupModifiers:_}=f;return{getClassGroupId:F=>{const M=F.split(CLASS_PART_SEPARATOR);return M[0]===""&&M.length!==1&&M.shift(),getGroupRecursive(M,s)||getGroupIdForArbitraryProperty(F)},getConflictingClassGroupIds:(F,M)=>{const P=d[F]||[];return M&&_[F]?[...P,..._[F]]:P}}},getGroupRecursive=(f,s)=>{var F;if(f.length===0)return s.classGroupId;const d=f[0],_=s.nextPart.get(d),S=_?getGroupRecursive(f.slice(1),_):void 0;if(S)return S;if(s.validators.length===0)return;const T=f.join(CLASS_PART_SEPARATOR);return(F=s.validators.find(({validator:M})=>M(T)))==null?void 0:F.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=f=>{if(arbitraryPropertyRegex.test(f)){const s=arbitraryPropertyRegex.exec(f)[1],d=s==null?void 0:s.substring(0,s.indexOf(":"));if(d)return"arbitrary.."+d}},createClassMap=f=>{const{theme:s,prefix:d}=f,_={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(f.classGroups),d).forEach(([T,F])=>{processClassesRecursively(F,_,T,s)}),_},processClassesRecursively=(f,s,d,_)=>{f.forEach(S=>{if(typeof S=="string"){const T=S===""?s:getPart(s,S);T.classGroupId=d;return}if(typeof S=="function"){if(isThemeGetter(S)){processClassesRecursively(S(_),s,d,_);return}s.validators.push({validator:S,classGroupId:d});return}Object.entries(S).forEach(([T,F])=>{processClassesRecursively(F,getPart(s,T),d,_)})})},getPart=(f,s)=>{let d=f;return s.split(CLASS_PART_SEPARATOR).forEach(_=>{d.nextPart.has(_)||d.nextPart.set(_,{nextPart:new Map,validators:[]}),d=d.nextPart.get(_)}),d},isThemeGetter=f=>f.isThemeGetter,getPrefixedClassGroupEntries=(f,s)=>s?f.map(([d,_])=>{const S=_.map(T=>typeof T=="string"?s+T:typeof T=="object"?Object.fromEntries(Object.entries(T).map(([F,M])=>[s+F,M])):T);return[d,S]}):f,createLruCache=f=>{if(f<1)return{get:()=>{},set:()=>{}};let s=0,d=new Map,_=new Map;const S=(T,F)=>{d.set(T,F),s++,s>f&&(s=0,_=d,d=new Map)};return{get(T){let F=d.get(T);if(F!==void 0)return F;if((F=_.get(T))!==void 0)return S(T,F),F},set(T,F){d.has(T)?d.set(T,F):S(T,F)}}},IMPORTANT_MODIFIER="!",createParseClassName=f=>{const{separator:s,experimentalParseClassName:d}=f,_=s.length===1,S=s[0],T=s.length,F=M=>{const P=[];let H=0,J=0,K;for(let ge=0;ge<M.length;ge++){let pe=M[ge];if(H===0){if(pe===S&&(_||M.slice(ge,ge+T)===s)){P.push(M.slice(J,ge)),J=ge+T;continue}if(pe==="/"){K=ge;continue}}pe==="["?H++:pe==="]"&&H--}const z=P.length===0?M:M.substring(J),oe=z.startsWith(IMPORTANT_MODIFIER),se=oe?z.substring(1):z,ae=K&&K>J?K-J:void 0;return{modifiers:P,hasImportantModifier:oe,baseClassName:se,maybePostfixModifierPosition:ae}};return d?M=>d({className:M,parseClassName:F}):F},sortModifiers=f=>{if(f.length<=1)return f;const s=[];let d=[];return f.forEach(_=>{_[0]==="["?(s.push(...d.sort(),_),d=[]):d.push(_)}),s.push(...d.sort()),s},createConfigUtils=f=>({cache:createLruCache(f.cacheSize),parseClassName:createParseClassName(f),...createClassGroupUtils(f)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(f,s)=>{const{parseClassName:d,getClassGroupId:_,getConflictingClassGroupIds:S}=s,T=[],F=f.trim().split(SPLIT_CLASSES_REGEX);let M="";for(let P=F.length-1;P>=0;P-=1){const H=F[P],{modifiers:J,hasImportantModifier:K,baseClassName:z,maybePostfixModifierPosition:oe}=d(H);let se=!!oe,ae=_(se?z.substring(0,oe):z);if(!ae){if(!se){M=H+(M.length>0?" "+M:M);continue}if(ae=_(z),!ae){M=H+(M.length>0?" "+M:M);continue}se=!1}const ge=sortModifiers(J).join(":"),pe=K?ge+IMPORTANT_MODIFIER:ge,he=pe+ae;if(T.includes(he))continue;T.push(he);const ve=S(ae,se);for(let be=0;be<ve.length;++be){const Re=ve[be];T.push(pe+Re)}M=H+(M.length>0?" "+M:M)}return M};function twJoin(){let f=0,s,d,_="";for(;f<arguments.length;)(s=arguments[f++])&&(d=toValue(s))&&(_&&(_+=" "),_+=d);return _}const toValue=f=>{if(typeof f=="string")return f;let s,d="";for(let _=0;_<f.length;_++)f[_]&&(s=toValue(f[_]))&&(d&&(d+=" "),d+=s);return d};function createTailwindMerge(f,...s){let d,_,S,T=F;function F(P){const H=s.reduce((J,K)=>K(J),f());return d=createConfigUtils(H),_=d.cache.get,S=d.cache.set,T=M,M(P)}function M(P){const H=_(P);if(H)return H;const J=mergeClassList(P,d);return S(P,J),J}return function(){return T(twJoin.apply(null,arguments))}}const fromTheme=f=>{const s=d=>d[f]||[];return s.isThemeGetter=!0,s},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength=f=>isNumber$d(f)||stringLengths.has(f)||fractionRegex.test(f),isArbitraryLength=f=>getIsArbitraryValue(f,"length",isLengthOnly),isNumber$d=f=>!!f&&!Number.isNaN(Number(f)),isArbitraryNumber=f=>getIsArbitraryValue(f,"number",isNumber$d),isInteger$1=f=>!!f&&Number.isInteger(Number(f)),isPercent=f=>f.endsWith("%")&&isNumber$d(f.slice(0,-1)),isArbitraryValue=f=>arbitraryValueRegex.test(f),isTshirtSize=f=>tshirtUnitRegex.test(f),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=f=>getIsArbitraryValue(f,sizeLabels,isNever),isArbitraryPosition=f=>getIsArbitraryValue(f,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=f=>getIsArbitraryValue(f,imageLabels,isImage),isArbitraryShadow=f=>getIsArbitraryValue(f,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(f,s,d)=>{const _=arbitraryValueRegex.exec(f);return _?_[1]?typeof s=="string"?_[1]===s:s.has(_[1]):d(_[2]):!1},isLengthOnly=f=>lengthUnitRegex.test(f)&&!colorFunctionRegex.test(f),isNever=()=>!1,isShadow=f=>shadowRegex.test(f),isImage=f=>imageRegex.test(f),getDefaultConfig=()=>{const f=fromTheme("colors"),s=fromTheme("spacing"),d=fromTheme("blur"),_=fromTheme("brightness"),S=fromTheme("borderColor"),T=fromTheme("borderRadius"),F=fromTheme("borderSpacing"),M=fromTheme("borderWidth"),P=fromTheme("contrast"),H=fromTheme("grayscale"),J=fromTheme("hueRotate"),K=fromTheme("invert"),z=fromTheme("gap"),oe=fromTheme("gradientColorStops"),se=fromTheme("gradientColorStopPositions"),ae=fromTheme("inset"),ge=fromTheme("margin"),pe=fromTheme("opacity"),he=fromTheme("padding"),ve=fromTheme("saturate"),be=fromTheme("scale"),Re=fromTheme("sepia"),Fe=fromTheme("skew"),ye=fromTheme("space"),Ue=fromTheme("translate"),It=()=>["auto","contain","none"],St=()=>["auto","hidden","clip","visible","scroll"],At=()=>["auto",isArbitraryValue,s],xt=()=>[isArbitraryValue,s],Ct=()=>["",isLength,isArbitraryLength],Nt=()=>["auto",isNumber$d,isArbitraryValue],qt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Jn=()=>["solid","dashed","dotted","double","none"],qr=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],na=()=>["start","end","center","between","around","evenly","stretch"],qn=()=>["","0",isArbitraryValue],vA=()=>["auto","avoid","all","avoid-page","page","left","right","column"],TA=()=>[isNumber$d,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:TA(),borderColor:[f],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:xt(),borderWidth:Ct(),contrast:TA(),grayscale:qn(),hueRotate:TA(),invert:qn(),gap:xt(),gradientColorStops:[f],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:At(),margin:At(),opacity:TA(),padding:xt(),saturate:TA(),scale:TA(),sepia:qn(),skew:TA(),space:xt(),translate:xt()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":vA()}],"break-before":[{"break-before":vA()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...qt(),isArbitraryValue]}],overflow:[{overflow:St()}],"overflow-x":[{"overflow-x":St()}],"overflow-y":[{"overflow-y":St()}],overscroll:[{overscroll:It()}],"overscroll-x":[{"overscroll-x":It()}],"overscroll-y":[{"overscroll-y":It()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[ae]}],"inset-x":[{"inset-x":[ae]}],"inset-y":[{"inset-y":[ae]}],start:[{start:[ae]}],end:[{end:[ae]}],top:[{top:[ae]}],right:[{right:[ae]}],bottom:[{bottom:[ae]}],left:[{left:[ae]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger$1,isArbitraryValue]}],basis:[{basis:At()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:qn()}],shrink:[{shrink:qn()}],order:[{order:["first","last","none",isInteger$1,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger$1,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":Nt()}],"col-end":[{"col-end":Nt()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger$1,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":Nt()}],"row-end":[{"row-end":Nt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[z]}],"gap-x":[{"gap-x":[z]}],"gap-y":[{"gap-y":[z]}],"justify-content":[{justify:["normal",...na()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...na(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...na(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[he]}],px:[{px:[he]}],py:[{py:[he]}],ps:[{ps:[he]}],pe:[{pe:[he]}],pt:[{pt:[he]}],pr:[{pr:[he]}],pb:[{pb:[he]}],pl:[{pl:[he]}],m:[{m:[ge]}],mx:[{mx:[ge]}],my:[{my:[ge]}],ms:[{ms:[ge]}],me:[{me:[ge]}],mt:[{mt:[ge]}],mr:[{mr:[ge]}],mb:[{mb:[ge]}],ml:[{ml:[ge]}],"space-x":[{"space-x":[ye]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[ye]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,s]}],"min-w":[{"min-w":[isArbitraryValue,s,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,s,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,s,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$d,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[f]}],"placeholder-opacity":[{"placeholder-opacity":[pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[f]}],"text-opacity":[{"text-opacity":[pe]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Jn(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[f]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:xt()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[pe]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...qt(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[f]}],"gradient-from-pos":[{from:[se]}],"gradient-via-pos":[{via:[se]}],"gradient-to-pos":[{to:[se]}],"gradient-from":[{from:[oe]}],"gradient-via":[{via:[oe]}],"gradient-to":[{to:[oe]}],rounded:[{rounded:[T]}],"rounded-s":[{"rounded-s":[T]}],"rounded-e":[{"rounded-e":[T]}],"rounded-t":[{"rounded-t":[T]}],"rounded-r":[{"rounded-r":[T]}],"rounded-b":[{"rounded-b":[T]}],"rounded-l":[{"rounded-l":[T]}],"rounded-ss":[{"rounded-ss":[T]}],"rounded-se":[{"rounded-se":[T]}],"rounded-ee":[{"rounded-ee":[T]}],"rounded-es":[{"rounded-es":[T]}],"rounded-tl":[{"rounded-tl":[T]}],"rounded-tr":[{"rounded-tr":[T]}],"rounded-br":[{"rounded-br":[T]}],"rounded-bl":[{"rounded-bl":[T]}],"border-w":[{border:[M]}],"border-w-x":[{"border-x":[M]}],"border-w-y":[{"border-y":[M]}],"border-w-s":[{"border-s":[M]}],"border-w-e":[{"border-e":[M]}],"border-w-t":[{"border-t":[M]}],"border-w-r":[{"border-r":[M]}],"border-w-b":[{"border-b":[M]}],"border-w-l":[{"border-l":[M]}],"border-opacity":[{"border-opacity":[pe]}],"border-style":[{border:[...Jn(),"hidden"]}],"divide-x":[{"divide-x":[M]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[M]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[pe]}],"divide-style":[{divide:Jn()}],"border-color":[{border:[S]}],"border-color-x":[{"border-x":[S]}],"border-color-y":[{"border-y":[S]}],"border-color-s":[{"border-s":[S]}],"border-color-e":[{"border-e":[S]}],"border-color-t":[{"border-t":[S]}],"border-color-r":[{"border-r":[S]}],"border-color-b":[{"border-b":[S]}],"border-color-l":[{"border-l":[S]}],"divide-color":[{divide:[S]}],"outline-style":[{outline:["",...Jn()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[f]}],"ring-w":[{ring:Ct()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[f]}],"ring-opacity":[{"ring-opacity":[pe]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[f]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[pe]}],"mix-blend":[{"mix-blend":[...qr(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":qr()}],filter:[{filter:["","none"]}],blur:[{blur:[d]}],brightness:[{brightness:[_]}],contrast:[{contrast:[P]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[H]}],"hue-rotate":[{"hue-rotate":[J]}],invert:[{invert:[K]}],saturate:[{saturate:[ve]}],sepia:[{sepia:[Re]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[d]}],"backdrop-brightness":[{"backdrop-brightness":[_]}],"backdrop-contrast":[{"backdrop-contrast":[P]}],"backdrop-grayscale":[{"backdrop-grayscale":[H]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[J]}],"backdrop-invert":[{"backdrop-invert":[K]}],"backdrop-opacity":[{"backdrop-opacity":[pe]}],"backdrop-saturate":[{"backdrop-saturate":[ve]}],"backdrop-sepia":[{"backdrop-sepia":[Re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[F]}],"border-spacing-x":[{"border-spacing-x":[F]}],"border-spacing-y":[{"border-spacing-y":[F]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:TA()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:TA()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[be]}],"scale-x":[{"scale-x":[be]}],"scale-y":[{"scale-y":[be]}],rotate:[{rotate:[isInteger$1,isArbitraryValue]}],"translate-x":[{"translate-x":[Ue]}],"translate-y":[{"translate-y":[Ue]}],"skew-x":[{"skew-x":[Fe]}],"skew-y":[{"skew-y":[Fe]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",f]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[f]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":xt()}],"scroll-mx":[{"scroll-mx":xt()}],"scroll-my":[{"scroll-my":xt()}],"scroll-ms":[{"scroll-ms":xt()}],"scroll-me":[{"scroll-me":xt()}],"scroll-mt":[{"scroll-mt":xt()}],"scroll-mr":[{"scroll-mr":xt()}],"scroll-mb":[{"scroll-mb":xt()}],"scroll-ml":[{"scroll-ml":xt()}],"scroll-p":[{"scroll-p":xt()}],"scroll-px":[{"scroll-px":xt()}],"scroll-py":[{"scroll-py":xt()}],"scroll-ps":[{"scroll-ps":xt()}],"scroll-pe":[{"scroll-pe":xt()}],"scroll-pt":[{"scroll-pt":xt()}],"scroll-pr":[{"scroll-pr":xt()}],"scroll-pb":[{"scroll-pb":xt()}],"scroll-pl":[{"scroll-pl":xt()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[f,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[f,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn$1(...f){return twMerge(clsx(f))}const Accordion$1=Root2,AccordionItem=reactExports.forwardRef(({className:f,...s},d)=>jsxRuntimeExports.jsx(Item,{ref:d,className:cn$1("border-b",f),...s}));AccordionItem.displayName="AccordionItem";const AccordionTrigger=reactExports.forwardRef(({className:f,children:s,...d},_)=>jsxRuntimeExports.jsx(Header,{className:"flex",children:jsxRuntimeExports.jsxs(Trigger2,{ref:_,className:cn$1("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",f),...d,children:[s,jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));AccordionTrigger.displayName=Trigger2.displayName;const AccordionContent=reactExports.forwardRef(({className:f,children:s,...d},_)=>jsxRuntimeExports.jsx(Content2,{ref:_,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...d,children:jsxRuntimeExports.jsx("div",{className:cn$1("pb-4 pt-0",f),children:s})}));AccordionContent.displayName=Content2.displayName;var byteToHex=[];for(var i$1=0;i$1<256;++i$1)byteToHex.push((i$1+256).toString(16).slice(1));function unsafeStringify(f,s=0){return(byteToHex[f[s+0]]+byteToHex[f[s+1]]+byteToHex[f[s+2]]+byteToHex[f[s+3]]+"-"+byteToHex[f[s+4]]+byteToHex[f[s+5]]+"-"+byteToHex[f[s+6]]+byteToHex[f[s+7]]+"-"+byteToHex[f[s+8]]+byteToHex[f[s+9]]+"-"+byteToHex[f[s+10]]+byteToHex[f[s+11]]+byteToHex[f[s+12]]+byteToHex[f[s+13]]+byteToHex[f[s+14]]+byteToHex[f[s+15]]).toLowerCase()}var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const native={randomUUID};function v4(f,s,d){if(native.randomUUID&&!s&&!f)return native.randomUUID();f=f||{};var _=f.random||(f.rng||rng)();return _[6]=_[6]&15|64,_[8]=_[8]&63|128,unsafeStringify(_)}function getCollapseUtilityClass(f){return generateUtilityClass("MuiCollapse",f)}generateUtilityClasses("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const _excluded$e=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],useUtilityClasses$c=f=>{const{orientation:s,classes:d}=f,_={root:["root",`${s}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${s}`],wrapperInner:["wrapperInner",`${s}`]};return composeClasses(_,getCollapseUtilityClass,d)},CollapseRoot=styled("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(f,s)=>{const{ownerState:d}=f;return[s.root,s[d.orientation],d.state==="entered"&&s.entered,d.state==="exited"&&!d.in&&d.collapsedSize==="0px"&&s.hidden]}})(({theme:f,ownerState:s})=>_extends$a({height:0,overflow:"hidden",transition:f.transitions.create("height")},s.orientation==="horizontal"&&{height:"auto",width:0,transition:f.transitions.create("width")},s.state==="entered"&&_extends$a({height:"auto",overflow:"visible"},s.orientation==="horizontal"&&{width:"auto"}),s.state==="exited"&&!s.in&&s.collapsedSize==="0px"&&{visibility:"hidden"})),CollapseWrapper=styled("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(f,s)=>s.wrapper})(({ownerState:f})=>_extends$a({display:"flex",width:"100%"},f.orientation==="horizontal"&&{width:"auto",height:"100%"})),CollapseWrapperInner=styled("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(f,s)=>s.wrapperInner})(({ownerState:f})=>_extends$a({width:"100%"},f.orientation==="horizontal"&&{width:"auto",height:"100%"})),Collapse=reactExports.forwardRef(function f(s,d){const _=useDefaultProps({props:s,name:"MuiCollapse"}),{addEndListener:S,children:T,className:F,collapsedSize:M="0px",component:P,easing:H,in:J,onEnter:K,onEntered:z,onEntering:oe,onExit:se,onExited:ae,onExiting:ge,orientation:pe="vertical",style:he,timeout:ve=duration.standard,TransitionComponent:be=Transition$2}=_,Re=_objectWithoutPropertiesLoose$1(_,_excluded$e),Fe=_extends$a({},_,{orientation:pe,collapsedSize:M}),ye=useUtilityClasses$c(Fe),Ue=useTheme$1(),It=useTimeout(),St=reactExports.useRef(null),At=reactExports.useRef(),xt=typeof M=="number"?`${M}px`:M,Ct=pe==="horizontal",Nt=Ct?"width":"height",qt=reactExports.useRef(null),Jn=useForkRef(d,qt),qr=WA=>KA=>{if(WA){const rA=qt.current;KA===void 0?WA(rA):WA(rA,KA)}},na=()=>St.current?St.current[Ct?"clientWidth":"clientHeight"]:0,qn=qr((WA,KA)=>{St.current&&Ct&&(St.current.style.position="absolute"),WA.style[Nt]=xt,K&&K(WA,KA)}),vA=qr((WA,KA)=>{const rA=na();St.current&&Ct&&(St.current.style.position="");const{duration:ta,easing:fa}=getTransitionProps({style:he,timeout:ve,easing:H},{mode:"enter"});if(ve==="auto"){const yA=Ue.transitions.getAutoHeightDuration(rA);WA.style.transitionDuration=`${yA}ms`,At.current=yA}else WA.style.transitionDuration=typeof ta=="string"?ta:`${ta}ms`;WA.style[Nt]=`${rA}px`,WA.style.transitionTimingFunction=fa,oe&&oe(WA,KA)}),TA=qr((WA,KA)=>{WA.style[Nt]="auto",z&&z(WA,KA)}),VA=qr(WA=>{WA.style[Nt]=`${na()}px`,se&&se(WA)}),mI=qr(ae),jA=qr(WA=>{const KA=na(),{duration:rA,easing:ta}=getTransitionProps({style:he,timeout:ve,easing:H},{mode:"exit"});if(ve==="auto"){const fa=Ue.transitions.getAutoHeightDuration(KA);WA.style.transitionDuration=`${fa}ms`,At.current=fa}else WA.style.transitionDuration=typeof rA=="string"?rA:`${rA}ms`;WA.style[Nt]=xt,WA.style.transitionTimingFunction=ta,ge&&ge(WA)}),aI=WA=>{ve==="auto"&&It.start(At.current||0,WA),S&&S(qt.current,WA)};return jsxRuntimeExports.jsx(be,_extends$a({in:J,onEnter:qn,onEntered:TA,onEntering:vA,onExit:VA,onExited:mI,onExiting:jA,addEndListener:aI,nodeRef:qt,timeout:ve==="auto"?null:ve},Re,{children:(WA,KA)=>jsxRuntimeExports.jsx(CollapseRoot,_extends$a({as:P,className:clsx(ye.root,F,{entered:ye.entered,exited:!J&&xt==="0px"&&ye.hidden}[WA]),style:_extends$a({[Ct?"minWidth":"minHeight"]:xt},he),ref:Jn},KA,{ownerState:_extends$a({},Fe,{state:WA}),children:jsxRuntimeExports.jsx(CollapseWrapper,{ownerState:_extends$a({},Fe,{state:WA}),className:ye.wrapper,ref:St,children:jsxRuntimeExports.jsx(CollapseWrapperInner,{ownerState:_extends$a({},Fe,{state:WA}),className:ye.wrapperInner,children:T})})}))}))});Collapse.muiSupportAuto=!0;const AccordionContext=reactExports.createContext({});function getAccordionUtilityClass(f){return generateUtilityClass("MuiAccordion",f)}const accordionClasses=generateUtilityClasses("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),_excluded$d=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],useUtilityClasses$b=f=>{const{classes:s,square:d,expanded:_,disabled:S,disableGutters:T}=f;return composeClasses({root:["root",!d&&"rounded",_&&"expanded",S&&"disabled",!T&&"gutters"],region:["region"]},getAccordionUtilityClass,s)},AccordionRoot=styled(Paper,{name:"MuiAccordion",slot:"Root",overridesResolver:(f,s)=>{const{ownerState:d}=f;return[{[`& .${accordionClasses.region}`]:s.region},s.root,!d.square&&s.rounded,!d.disableGutters&&s.gutters]}})(({theme:f})=>{const s={duration:f.transitions.duration.shortest};return{position:"relative",transition:f.transitions.create(["margin"],s),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(f.vars||f).palette.divider,transition:f.transitions.create(["opacity","background-color"],s)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${accordionClasses.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${accordionClasses.disabled}`]:{backgroundColor:(f.vars||f).palette.action.disabledBackground}}},({theme:f})=>({variants:[{props:s=>!s.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(f.vars||f).shape.borderRadius,borderTopRightRadius:(f.vars||f).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(f.vars||f).shape.borderRadius,borderBottomRightRadius:(f.vars||f).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:s=>!s.disableGutters,style:{[`&.${accordionClasses.expanded}`]:{margin:"16px 0"}}}]})),Accordion=reactExports.forwardRef(function f(s,d){const _=useDefaultProps({props:s,name:"MuiAccordion"}),{children:S,className:T,defaultExpanded:F=!1,disabled:M=!1,disableGutters:P=!1,expanded:H,onChange:J,square:K=!1,slots:z={},slotProps:oe={},TransitionComponent:se,TransitionProps:ae}=_,ge=_objectWithoutPropertiesLoose$1(_,_excluded$d),[pe,he]=useControlled({controlled:H,default:F,name:"Accordion",state:"expanded"}),ve=reactExports.useCallback(Ct=>{he(!pe),J&&J(Ct,!pe)},[pe,J,he]),[be,...Re]=reactExports.Children.toArray(S),Fe=reactExports.useMemo(()=>({expanded:pe,disabled:M,disableGutters:P,toggle:ve}),[pe,M,P,ve]),ye=_extends$a({},_,{square:K,disabled:M,disableGutters:P,expanded:pe}),Ue=useUtilityClasses$b(ye),It=_extends$a({transition:se},z),St=_extends$a({transition:ae},oe),[At,xt]=useSlot("transition",{elementType:Collapse,externalForwardedProps:{slots:It,slotProps:St},ownerState:ye});return jsxRuntimeExports.jsxs(AccordionRoot,_extends$a({className:clsx(Ue.root,T),ref:d,ownerState:ye,square:K},ge,{children:[jsxRuntimeExports.jsx(AccordionContext.Provider,{value:Fe,children:be}),jsxRuntimeExports.jsx(At,_extends$a({in:pe,timeout:"auto"},xt,{children:jsxRuntimeExports.jsx("div",{"aria-labelledby":be.props.id,id:be.props["aria-controls"],role:"region",className:Ue.region,children:Re})}))]}))});function getAccordionDetailsUtilityClass(f){return generateUtilityClass("MuiAccordionDetails",f)}generateUtilityClasses("MuiAccordionDetails",["root"]);const _excluded$c=["className"],useUtilityClasses$a=f=>{const{classes:s}=f;return composeClasses({root:["root"]},getAccordionDetailsUtilityClass,s)},AccordionDetailsRoot=styled("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(f,s)=>s.root})(({theme:f})=>({padding:f.spacing(1,2,2)})),AccordionDetails=reactExports.forwardRef(function f(s,d){const _=useDefaultProps({props:s,name:"MuiAccordionDetails"}),{className:S}=_,T=_objectWithoutPropertiesLoose$1(_,_excluded$c),F=_,M=useUtilityClasses$a(F);return jsxRuntimeExports.jsx(AccordionDetailsRoot,_extends$a({className:clsx(M.root,S),ref:d,ownerState:F},T))});function getAccordionSummaryUtilityClass(f){return generateUtilityClass("MuiAccordionSummary",f)}const accordionSummaryClasses=generateUtilityClasses("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),_excluded$b=["children","className","expandIcon","focusVisibleClassName","onClick"],useUtilityClasses$9=f=>{const{classes:s,expanded:d,disabled:_,disableGutters:S}=f;return composeClasses({root:["root",d&&"expanded",_&&"disabled",!S&&"gutters"],focusVisible:["focusVisible"],content:["content",d&&"expanded",!S&&"contentGutters"],expandIconWrapper:["expandIconWrapper",d&&"expanded"]},getAccordionSummaryUtilityClass,s)},AccordionSummaryRoot=styled(ButtonBase,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(f,s)=>s.root})(({theme:f})=>{const s={duration:f.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:f.spacing(0,2),transition:f.transitions.create(["min-height","background-color"],s),[`&.${accordionSummaryClasses.focusVisible}`]:{backgroundColor:(f.vars||f).palette.action.focus},[`&.${accordionSummaryClasses.disabled}`]:{opacity:(f.vars||f).palette.action.disabledOpacity},[`&:hover:not(.${accordionSummaryClasses.disabled})`]:{cursor:"pointer"},variants:[{props:d=>!d.disableGutters,style:{[`&.${accordionSummaryClasses.expanded}`]:{minHeight:64}}}]}}),AccordionSummaryContent=styled("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(f,s)=>s.content})(({theme:f})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:s=>!s.disableGutters,style:{transition:f.transitions.create(["margin"],{duration:f.transitions.duration.shortest}),[`&.${accordionSummaryClasses.expanded}`]:{margin:"20px 0"}}}]})),AccordionSummaryExpandIconWrapper=styled("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(f,s)=>s.expandIconWrapper})(({theme:f})=>({display:"flex",color:(f.vars||f).palette.action.active,transform:"rotate(0deg)",transition:f.transitions.create("transform",{duration:f.transitions.duration.shortest}),[`&.${accordionSummaryClasses.expanded}`]:{transform:"rotate(180deg)"}})),AccordionSummary=reactExports.forwardRef(function f(s,d){const _=useDefaultProps({props:s,name:"MuiAccordionSummary"}),{children:S,className:T,expandIcon:F,focusVisibleClassName:M,onClick:P}=_,H=_objectWithoutPropertiesLoose$1(_,_excluded$b),{disabled:J=!1,disableGutters:K,expanded:z,toggle:oe}=reactExports.useContext(AccordionContext),se=pe=>{oe&&oe(pe),P&&P(pe)},ae=_extends$a({},_,{expanded:z,disabled:J,disableGutters:K}),ge=useUtilityClasses$9(ae);return jsxRuntimeExports.jsxs(AccordionSummaryRoot,_extends$a({focusRipple:!1,disableRipple:!0,disabled:J,component:"div","aria-expanded":z,className:clsx(ge.root,T),focusVisibleClassName:clsx(ge.focusVisible,M),onClick:se,ref:d,ownerState:ae},H,{children:[jsxRuntimeExports.jsx(AccordionSummaryContent,{className:ge.content,ownerState:ae,children:S}),F&&jsxRuntimeExports.jsx(AccordionSummaryExpandIconWrapper,{className:ge.expandIconWrapper,ownerState:ae,children:F})]}))}),ClearIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function stripDiacritics(f){return typeof f.normalize<"u"?f.normalize("NFD").replace(/[\u0300-\u036f]/g,""):f}function createFilterOptions(f={}){const{ignoreAccents:s=!0,ignoreCase:d=!0,limit:_,matchFrom:S="any",stringify:T,trim:F=!1}=f;return(M,{inputValue:P,getOptionLabel:H})=>{let J=F?P.trim():P;d&&(J=J.toLowerCase()),s&&(J=stripDiacritics(J));const K=J?M.filter(z=>{let oe=(T||H)(z);return d&&(oe=oe.toLowerCase()),s&&(oe=stripDiacritics(oe)),S==="start"?oe.indexOf(J)===0:oe.indexOf(J)>-1}):M;return typeof _=="number"?K.slice(0,_):K}}function findIndex(f,s){for(let d=0;d<f.length;d+=1)if(s(f[d]))return d;return-1}const defaultFilterOptions=createFilterOptions(),pageSize=5,defaultIsActiveElementInListbox=f=>{var s;return f.current!==null&&((s=f.current.parentElement)==null?void 0:s.contains(document.activeElement))};function useAutocomplete(f){const{unstable_isActiveElementInListbox:s=defaultIsActiveElementInListbox,unstable_classNamePrefix:d="Mui",autoComplete:_=!1,autoHighlight:S=!1,autoSelect:T=!1,blurOnSelect:F=!1,clearOnBlur:M=!f.freeSolo,clearOnEscape:P=!1,componentName:H="useAutocomplete",defaultValue:J=f.multiple?[]:null,disableClearable:K=!1,disableCloseOnSelect:z=!1,disabled:oe,disabledItemsFocusable:se=!1,disableListWrap:ae=!1,filterOptions:ge=defaultFilterOptions,filterSelectedOptions:pe=!1,freeSolo:he=!1,getOptionDisabled:ve,getOptionKey:be,getOptionLabel:Re=Ut=>{var Wt;return(Wt=Ut.label)!=null?Wt:Ut},groupBy:Fe,handleHomeEndKeys:ye=!f.freeSolo,id:Ue,includeInputInList:It=!1,inputValue:St,isOptionEqualToValue:At=(Ut,Wt)=>Ut===Wt,multiple:xt=!1,onChange:Ct,onClose:Nt,onHighlightChange:qt,onInputChange:Jn,onOpen:qr,open:na,openOnFocus:qn=!1,options:vA,readOnly:TA=!1,selectOnFocus:VA=!f.freeSolo,value:mI}=f,jA=useId$1(Ue);let aI=Re;aI=Ut=>{const Wt=Re(Ut);return typeof Wt!="string"?String(Wt):Wt};const WA=reactExports.useRef(!1),KA=reactExports.useRef(!0),rA=reactExports.useRef(null),ta=reactExports.useRef(null),[fa,yA]=reactExports.useState(null),[_A,la]=reactExports.useState(-1),AA=S?0:-1,tA=reactExports.useRef(AA),[ba,iA]=useControlled({controlled:mI,default:J,name:H}),[lA,yI]=useControlled({controlled:St,default:"",name:H,state:"inputValue"}),[rI,BI]=reactExports.useState(!1),NI=reactExports.useCallback((Ut,Wt)=>{if(!(xt?ba.length<Wt.length:Wt!==null)&&!M)return;let uA;if(xt)uA="";else if(Wt==null)uA="";else{const EA=aI(Wt);uA=typeof EA=="string"?EA:""}lA!==uA&&(yI(uA),Jn&&Jn(Ut,uA,"reset"))},[aI,lA,xt,Jn,yI,M,ba]),[Rt,QA]=useControlled({controlled:na,default:!1,name:H,state:"open"}),[cA,gI]=reactExports.useState(!0),LI=!xt&&ba!=null&&lA===aI(ba),da=Rt&&!TA,dA=da?ge(vA.filter(Ut=>!(pe&&(xt?ba:[ba]).some(Wt=>Wt!==null&&At(Ut,Wt)))),{inputValue:LI&&cA?"":lA,getOptionLabel:aI}):[],RA=usePreviousProps({filteredOptions:dA,value:ba,inputValue:lA});reactExports.useEffect(()=>{const Ut=ba!==RA.value;rI&&!Ut||he&&!Ut||NI(null,ba)},[ba,NI,rI,RA.value,he]);const pI=Rt&&dA.length>0&&!TA,vI=useEventCallback(Ut=>{Ut===-1?rA.current.focus():fa.querySelector(`[data-tag-index="${Ut}"]`).focus()});reactExports.useEffect(()=>{xt&&_A>ba.length-1&&(la(-1),vI(-1))},[ba,xt,_A,vI]);function EI(Ut,Wt){if(!ta.current||Ut<0||Ut>=dA.length)return-1;let ua=Ut;for(;;){const uA=ta.current.querySelector(`[data-option-index="${ua}"]`),EA=se?!1:!uA||uA.disabled||uA.getAttribute("aria-disabled")==="true";if(uA&&uA.hasAttribute("tabindex")&&!EA)return ua;if(Wt==="next"?ua=(ua+1)%dA.length:ua=(ua-1+dA.length)%dA.length,ua===Ut)return-1}}const zI=useEventCallback(({event:Ut,index:Wt,reason:ua="auto"})=>{if(tA.current=Wt,Wt===-1?rA.current.removeAttribute("aria-activedescendant"):rA.current.setAttribute("aria-activedescendant",`${jA}-option-${Wt}`),qt&&qt(Ut,Wt===-1?null:dA[Wt],ua),!ta.current)return;const uA=ta.current.querySelector(`[role="option"].${d}-focused`);uA&&(uA.classList.remove(`${d}-focused`),uA.classList.remove(`${d}-focusVisible`));let EA=ta.current;if(ta.current.getAttribute("role")!=="listbox"&&(EA=ta.current.parentElement.querySelector('[role="listbox"]')),!EA)return;if(Wt===-1){EA.scrollTop=0;return}const bA=ta.current.querySelector(`[data-option-index="${Wt}"]`);if(bA&&(bA.classList.add(`${d}-focused`),ua==="keyboard"&&bA.classList.add(`${d}-focusVisible`),EA.scrollHeight>EA.clientHeight&&ua!=="mouse"&&ua!=="touch")){const lI=bA,YI=EA.clientHeight+EA.scrollTop,uC=lI.offsetTop+lI.offsetHeight;uC>YI?EA.scrollTop=uC-EA.clientHeight:lI.offsetTop-lI.offsetHeight*(Fe?1.3:0)<EA.scrollTop&&(EA.scrollTop=lI.offsetTop-lI.offsetHeight*(Fe?1.3:0))}}),FI=useEventCallback(({event:Ut,diff:Wt,direction:ua="next",reason:uA="auto"})=>{if(!da)return;const bA=EI((()=>{const lI=dA.length-1;if(Wt==="reset")return AA;if(Wt==="start")return 0;if(Wt==="end")return lI;const YI=tA.current+Wt;return YI<0?YI===-1&&It?-1:ae&&tA.current!==-1||Math.abs(Wt)>1?0:lI:YI>lI?YI===lI+1&&It?-1:ae||Math.abs(Wt)>1?lI:0:YI})(),ua);if(zI({index:bA,reason:uA,event:Ut}),_&&Wt!=="reset")if(bA===-1)rA.current.value=lA;else{const lI=aI(dA[bA]);rA.current.value=lI,lI.toLowerCase().indexOf(lA.toLowerCase())===0&&lA.length>0&&rA.current.setSelectionRange(lA.length,lI.length)}}),DI=()=>{const Ut=(Wt,ua)=>{const uA=Wt?aI(Wt):"",EA=ua?aI(ua):"";return uA===EA};if(tA.current!==-1&&RA.filteredOptions&&RA.filteredOptions.length!==dA.length&&RA.inputValue===lA&&(xt?ba.length===RA.value.length&&RA.value.every((Wt,ua)=>aI(ba[ua])===aI(Wt)):Ut(RA.value,ba))){const Wt=RA.filteredOptions[tA.current];if(Wt)return findIndex(dA,ua=>aI(ua)===aI(Wt))}return-1},ZI=reactExports.useCallback(()=>{if(!da)return;const Ut=DI();if(Ut!==-1){tA.current=Ut;return}const Wt=xt?ba[0]:ba;if(dA.length===0||Wt==null){FI({diff:"reset"});return}if(ta.current){if(Wt!=null){const ua=dA[tA.current];if(xt&&ua&&findIndex(ba,EA=>At(ua,EA))!==-1)return;const uA=findIndex(dA,EA=>At(EA,Wt));uA===-1?FI({diff:"reset"}):zI({index:uA});return}if(tA.current>=dA.length-1){zI({index:dA.length-1});return}zI({index:tA.current})}},[dA.length,xt?!1:ba,pe,FI,zI,da,lA,xt]),IC=useEventCallback(Ut=>{setRef$1(ta,Ut),Ut&&ZI()});reactExports.useEffect(()=>{ZI()},[ZI]);const mC=Ut=>{Rt||(QA(!0),gI(!0),qr&&qr(Ut))},BC=(Ut,Wt)=>{Rt&&(QA(!1),Nt&&Nt(Ut,Wt))},yC=(Ut,Wt,ua,uA)=>{if(xt){if(ba.length===Wt.length&&ba.every((EA,bA)=>EA===Wt[bA]))return}else if(ba===Wt)return;Ct&&Ct(Ut,Wt,ua,uA),iA(Wt)},vC=reactExports.useRef(!1),_C=(Ut,Wt,ua="selectOption",uA="options")=>{let EA=ua,bA=Wt;if(xt){bA=Array.isArray(ba)?ba.slice():[];const lI=findIndex(bA,YI=>At(Wt,YI));lI===-1?bA.push(Wt):uA!=="freeSolo"&&(bA.splice(lI,1),EA="removeOption")}NI(Ut,bA),yC(Ut,bA,EA,{option:Wt}),!z&&(!Ut||!Ut.ctrlKey&&!Ut.metaKey)&&BC(Ut,EA),(F===!0||F==="touch"&&vC.current||F==="mouse"&&!vC.current)&&rA.current.blur()};function RC(Ut,Wt){if(Ut===-1)return-1;let ua=Ut;for(;;){if(Wt==="next"&&ua===ba.length||Wt==="previous"&&ua===-1)return-1;const uA=fa.querySelector(`[data-tag-index="${ua}"]`);if(!uA||!uA.hasAttribute("tabindex")||uA.disabled||uA.getAttribute("aria-disabled")==="true")ua+=Wt==="next"?1:-1;else return ua}}const Xt=(Ut,Wt)=>{if(!xt)return;lA===""&&BC(Ut,"toggleInput");let ua=_A;_A===-1?lA===""&&Wt==="previous"&&(ua=ba.length-1):(ua+=Wt==="next"?1:-1,ua<0&&(ua=0),ua===ba.length&&(ua=-1)),ua=RC(ua,Wt),la(ua),vI(ua)},zn=Ut=>{WA.current=!0,yI(""),Jn&&Jn(Ut,"","clear"),yC(Ut,xt?[]:null,"clear")},oa=Ut=>Wt=>{if(Ut.onKeyDown&&Ut.onKeyDown(Wt),!Wt.defaultMuiPrevented&&(_A!==-1&&["ArrowLeft","ArrowRight"].indexOf(Wt.key)===-1&&(la(-1),vI(-1)),Wt.which!==229))switch(Wt.key){case"Home":da&&ye&&(Wt.preventDefault(),FI({diff:"start",direction:"next",reason:"keyboard",event:Wt}));break;case"End":da&&ye&&(Wt.preventDefault(),FI({diff:"end",direction:"previous",reason:"keyboard",event:Wt}));break;case"PageUp":Wt.preventDefault(),FI({diff:-pageSize,direction:"previous",reason:"keyboard",event:Wt}),mC(Wt);break;case"PageDown":Wt.preventDefault(),FI({diff:pageSize,direction:"next",reason:"keyboard",event:Wt}),mC(Wt);break;case"ArrowDown":Wt.preventDefault(),FI({diff:1,direction:"next",reason:"keyboard",event:Wt}),mC(Wt);break;case"ArrowUp":Wt.preventDefault(),FI({diff:-1,direction:"previous",reason:"keyboard",event:Wt}),mC(Wt);break;case"ArrowLeft":Xt(Wt,"previous");break;case"ArrowRight":Xt(Wt,"next");break;case"Enter":if(tA.current!==-1&&da){const ua=dA[tA.current],uA=ve?ve(ua):!1;if(Wt.preventDefault(),uA)return;_C(Wt,ua,"selectOption"),_&&rA.current.setSelectionRange(rA.current.value.length,rA.current.value.length)}else he&&lA!==""&&LI===!1&&(xt&&Wt.preventDefault(),_C(Wt,lA,"createOption","freeSolo"));break;case"Escape":da?(Wt.preventDefault(),Wt.stopPropagation(),BC(Wt,"escape")):P&&(lA!==""||xt&&ba.length>0)&&(Wt.preventDefault(),Wt.stopPropagation(),zn(Wt));break;case"Backspace":if(xt&&!TA&&lA===""&&ba.length>0){const ua=_A===-1?ba.length-1:_A,uA=ba.slice();uA.splice(ua,1),yC(Wt,uA,"removeOption",{option:ba[ua]})}break;case"Delete":if(xt&&!TA&&lA===""&&ba.length>0&&_A!==-1){const ua=_A,uA=ba.slice();uA.splice(ua,1),yC(Wt,uA,"removeOption",{option:ba[ua]})}break}},MA=Ut=>{BI(!0),qn&&!WA.current&&mC(Ut)},YA=Ut=>{if(s(ta)){rA.current.focus();return}BI(!1),KA.current=!0,WA.current=!1,T&&tA.current!==-1&&da?_C(Ut,dA[tA.current],"blur"):T&&he&&lA!==""?_C(Ut,lA,"blur","freeSolo"):M&&NI(Ut,ba),BC(Ut,"blur")},PA=Ut=>{const Wt=Ut.target.value;lA!==Wt&&(yI(Wt),gI(!1),Jn&&Jn(Ut,Wt,"input")),Wt===""?!K&&!xt&&yC(Ut,null,"clear"):mC(Ut)},iI=Ut=>{const Wt=Number(Ut.currentTarget.getAttribute("data-option-index"));tA.current!==Wt&&zI({event:Ut,index:Wt,reason:"mouse"})},XA=Ut=>{zI({event:Ut,index:Number(Ut.currentTarget.getAttribute("data-option-index")),reason:"touch"}),vC.current=!0},$I=Ut=>{const Wt=Number(Ut.currentTarget.getAttribute("data-option-index"));_C(Ut,dA[Wt],"selectOption"),vC.current=!1},GI=Ut=>Wt=>{const ua=ba.slice();ua.splice(Ut,1),yC(Wt,ua,"removeOption",{option:ba[Ut]})},sC=Ut=>{Rt?BC(Ut,"toggleInput"):mC(Ut)},eC=Ut=>{Ut.currentTarget.contains(Ut.target)&&Ut.target.getAttribute("id")!==jA&&Ut.preventDefault()},KI=Ut=>{Ut.currentTarget.contains(Ut.target)&&(rA.current.focus(),VA&&KA.current&&rA.current.selectionEnd-rA.current.selectionStart===0&&rA.current.select(),KA.current=!1)},Yt=Ut=>{!oe&&(lA===""||!Rt)&&sC(Ut)};let Dn=he&&lA.length>0;Dn=Dn||(xt?ba.length>0:ba!==null);let Kn=dA;return Fe&&(Kn=dA.reduce((Ut,Wt,ua)=>{const uA=Fe(Wt);return Ut.length>0&&Ut[Ut.length-1].group===uA?Ut[Ut.length-1].options.push(Wt):Ut.push({key:ua,index:ua,group:uA,options:[Wt]}),Ut},[])),oe&&rI&&YA(),{getRootProps:(Ut={})=>_extends$a({"aria-owns":pI?`${jA}-listbox`:null},Ut,{onKeyDown:oa(Ut),onMouseDown:eC,onClick:KI}),getInputLabelProps:()=>({id:`${jA}-label`,htmlFor:jA}),getInputProps:()=>({id:jA,value:lA,onBlur:YA,onFocus:MA,onChange:PA,onMouseDown:Yt,"aria-activedescendant":da?"":null,"aria-autocomplete":_?"both":"list","aria-controls":pI?`${jA}-listbox`:void 0,"aria-expanded":pI,autoComplete:"off",ref:rA,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:oe}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:zn}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:sC}),getTagProps:({index:Ut})=>_extends$a({key:Ut,"data-tag-index":Ut,tabIndex:-1},!TA&&{onDelete:GI(Ut)}),getListboxProps:()=>({role:"listbox",id:`${jA}-listbox`,"aria-labelledby":`${jA}-label`,ref:IC,onMouseDown:Ut=>{Ut.preventDefault()}}),getOptionProps:({index:Ut,option:Wt})=>{var ua;const uA=(xt?ba:[ba]).some(bA=>bA!=null&&At(Wt,bA)),EA=ve?ve(Wt):!1;return{key:(ua=be==null?void 0:be(Wt))!=null?ua:aI(Wt),tabIndex:-1,role:"option",id:`${jA}-option-${Ut}`,onMouseMove:iI,onClick:$I,onTouchStart:XA,"data-option-index":Ut,"aria-disabled":EA,"aria-selected":uA}},id:jA,inputValue:lA,value:ba,dirty:Dn,expanded:da&&fa,popupOpen:da,focused:rI||_A!==-1,anchorEl:fa,setAnchorEl:yA,focusedTag:_A,groupedOptions:Kn}}var useThemeWithoutDefault={};Object.defineProperty(useThemeWithoutDefault,"__esModule",{value:!0});var default_1$d=useThemeWithoutDefault.default=void 0,React=_interopRequireWildcard(reactExports),_styledEngine=require$$1;function _getRequireWildcardCache(f){if(typeof WeakMap!="function")return null;var s=new WeakMap,d=new WeakMap;return(_getRequireWildcardCache=function(_){return _?d:s})(f)}function _interopRequireWildcard(f,s){if(f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var d=_getRequireWildcardCache(s);if(d&&d.has(f))return d.get(f);var _={__proto__:null},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in f)if(T!=="default"&&Object.prototype.hasOwnProperty.call(f,T)){var F=S?Object.getOwnPropertyDescriptor(f,T):null;F&&(F.get||F.set)?Object.defineProperty(_,T,F):_[T]=f[T]}return _.default=f,d&&d.set(f,_),_}function isObjectEmpty$4(f){return Object.keys(f).length===0}function useTheme(f=null){const s=React.useContext(_styledEngine.ThemeContext);return!s||isObjectEmpty$4(s)?f:s}default_1$d=useThemeWithoutDefault.default=useTheme;var top$1="top",bottom$1="bottom",right$1="right",left$1="left",auto="auto",basePlacements=[top$1,bottom$1,right$1,left$1],start$1="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(f,s){return f.concat([s+"-"+start$1,s+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(f,s){return f.concat([s,s+"-"+start$1,s+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main$1="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main$1,afterMain,beforeWrite,write,afterWrite];function getNodeName(f){return f?(f.nodeName||"").toLowerCase():null}function getWindow(f){if(f==null)return window;if(f.toString()!=="[object Window]"){var s=f.ownerDocument;return s&&s.defaultView||window}return f}function isElement$1(f){var s=getWindow(f).Element;return f instanceof s||f instanceof Element}function isHTMLElement$1(f){var s=getWindow(f).HTMLElement;return f instanceof s||f instanceof HTMLElement}function isShadowRoot(f){if(typeof ShadowRoot>"u")return!1;var s=getWindow(f).ShadowRoot;return f instanceof s||f instanceof ShadowRoot}function applyStyles(f){var s=f.state;Object.keys(s.elements).forEach(function(d){var _=s.styles[d]||{},S=s.attributes[d]||{},T=s.elements[d];!isHTMLElement$1(T)||!getNodeName(T)||(Object.assign(T.style,_),Object.keys(S).forEach(function(F){var M=S[F];M===!1?T.removeAttribute(F):T.setAttribute(F,M===!0?"":M)}))})}function effect$2(f){var s=f.state,d={popper:{position:s.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(s.elements.popper.style,d.popper),s.styles=d,s.elements.arrow&&Object.assign(s.elements.arrow.style,d.arrow),function(){Object.keys(s.elements).forEach(function(_){var S=s.elements[_],T=s.attributes[_]||{},F=Object.keys(s.styles.hasOwnProperty(_)?s.styles[_]:d[_]),M=F.reduce(function(P,H){return P[H]="",P},{});!isHTMLElement$1(S)||!getNodeName(S)||(Object.assign(S.style,M),Object.keys(T).forEach(function(P){S.removeAttribute(P)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(f){return f.split("-")[0]}var max$4=Math.max,min$3=Math.min,round$2=Math.round;function getUAString(){var f=navigator.userAgentData;return f!=null&&f.brands&&Array.isArray(f.brands)?f.brands.map(function(s){return s.brand+"/"+s.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(f,s,d){s===void 0&&(s=!1),d===void 0&&(d=!1);var _=f.getBoundingClientRect(),S=1,T=1;s&&isHTMLElement$1(f)&&(S=f.offsetWidth>0&&round$2(_.width)/f.offsetWidth||1,T=f.offsetHeight>0&&round$2(_.height)/f.offsetHeight||1);var F=isElement$1(f)?getWindow(f):window,M=F.visualViewport,P=!isLayoutViewport()&&d,H=(_.left+(P&&M?M.offsetLeft:0))/S,J=(_.top+(P&&M?M.offsetTop:0))/T,K=_.width/S,z=_.height/T;return{width:K,height:z,top:J,right:H+K,bottom:J+z,left:H,x:H,y:J}}function getLayoutRect(f){var s=getBoundingClientRect(f),d=f.offsetWidth,_=f.offsetHeight;return Math.abs(s.width-d)<=1&&(d=s.width),Math.abs(s.height-_)<=1&&(_=s.height),{x:f.offsetLeft,y:f.offsetTop,width:d,height:_}}function contains(f,s){var d=s.getRootNode&&s.getRootNode();if(f.contains(s))return!0;if(d&&isShadowRoot(d)){var _=s;do{if(_&&f.isSameNode(_))return!0;_=_.parentNode||_.host}while(_)}return!1}function getComputedStyle$1(f){return getWindow(f).getComputedStyle(f)}function isTableElement(f){return["table","td","th"].indexOf(getNodeName(f))>=0}function getDocumentElement(f){return((isElement$1(f)?f.ownerDocument:f.document)||window.document).documentElement}function getParentNode(f){return getNodeName(f)==="html"?f:f.assignedSlot||f.parentNode||(isShadowRoot(f)?f.host:null)||getDocumentElement(f)}function getTrueOffsetParent(f){return!isHTMLElement$1(f)||getComputedStyle$1(f).position==="fixed"?null:f.offsetParent}function getContainingBlock(f){var s=/firefox/i.test(getUAString()),d=/Trident/i.test(getUAString());if(d&&isHTMLElement$1(f)){var _=getComputedStyle$1(f);if(_.position==="fixed")return null}var S=getParentNode(f);for(isShadowRoot(S)&&(S=S.host);isHTMLElement$1(S)&&["html","body"].indexOf(getNodeName(S))<0;){var T=getComputedStyle$1(S);if(T.transform!=="none"||T.perspective!=="none"||T.contain==="paint"||["transform","perspective"].indexOf(T.willChange)!==-1||s&&T.willChange==="filter"||s&&T.filter&&T.filter!=="none")return S;S=S.parentNode}return null}function getOffsetParent(f){for(var s=getWindow(f),d=getTrueOffsetParent(f);d&&isTableElement(d)&&getComputedStyle$1(d).position==="static";)d=getTrueOffsetParent(d);return d&&(getNodeName(d)==="html"||getNodeName(d)==="body"&&getComputedStyle$1(d).position==="static")?s:d||getContainingBlock(f)||s}function getMainAxisFromPlacement(f){return["top","bottom"].indexOf(f)>=0?"x":"y"}function within(f,s,d){return max$4(f,min$3(s,d))}function withinMaxClamp(f,s,d){var _=within(f,s,d);return _>d?d:_}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(f){return Object.assign({},getFreshSideObject(),f)}function expandToHashMap(f,s){return s.reduce(function(d,_){return d[_]=f,d},{})}var toPaddingObject=function f(s,d){return s=typeof s=="function"?s(Object.assign({},d.rects,{placement:d.placement})):s,mergePaddingObject(typeof s!="number"?s:expandToHashMap(s,basePlacements))};function arrow(f){var s,d=f.state,_=f.name,S=f.options,T=d.elements.arrow,F=d.modifiersData.popperOffsets,M=getBasePlacement(d.placement),P=getMainAxisFromPlacement(M),H=[left$1,right$1].indexOf(M)>=0,J=H?"height":"width";if(!(!T||!F)){var K=toPaddingObject(S.padding,d),z=getLayoutRect(T),oe=P==="y"?top$1:left$1,se=P==="y"?bottom$1:right$1,ae=d.rects.reference[J]+d.rects.reference[P]-F[P]-d.rects.popper[J],ge=F[P]-d.rects.reference[P],pe=getOffsetParent(T),he=pe?P==="y"?pe.clientHeight||0:pe.clientWidth||0:0,ve=ae/2-ge/2,be=K[oe],Re=he-z[J]-K[se],Fe=he/2-z[J]/2+ve,ye=within(be,Fe,Re),Ue=P;d.modifiersData[_]=(s={},s[Ue]=ye,s.centerOffset=ye-Fe,s)}}function effect$1(f){var s=f.state,d=f.options,_=d.element,S=_===void 0?"[data-popper-arrow]":_;S!=null&&(typeof S=="string"&&(S=s.elements.popper.querySelector(S),!S)||contains(s.elements.popper,S)&&(s.elements.arrow=S))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(f){return f.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(f,s){var d=f.x,_=f.y,S=s.devicePixelRatio||1;return{x:round$2(d*S)/S||0,y:round$2(_*S)/S||0}}function mapToStyles(f){var s,d=f.popper,_=f.popperRect,S=f.placement,T=f.variation,F=f.offsets,M=f.position,P=f.gpuAcceleration,H=f.adaptive,J=f.roundOffsets,K=f.isFixed,z=F.x,oe=z===void 0?0:z,se=F.y,ae=se===void 0?0:se,ge=typeof J=="function"?J({x:oe,y:ae}):{x:oe,y:ae};oe=ge.x,ae=ge.y;var pe=F.hasOwnProperty("x"),he=F.hasOwnProperty("y"),ve=left$1,be=top$1,Re=window;if(H){var Fe=getOffsetParent(d),ye="clientHeight",Ue="clientWidth";if(Fe===getWindow(d)&&(Fe=getDocumentElement(d),getComputedStyle$1(Fe).position!=="static"&&M==="absolute"&&(ye="scrollHeight",Ue="scrollWidth")),Fe=Fe,S===top$1||(S===left$1||S===right$1)&&T===end){be=bottom$1;var It=K&&Fe===Re&&Re.visualViewport?Re.visualViewport.height:Fe[ye];ae-=It-_.height,ae*=P?1:-1}if(S===left$1||(S===top$1||S===bottom$1)&&T===end){ve=right$1;var St=K&&Fe===Re&&Re.visualViewport?Re.visualViewport.width:Fe[Ue];oe-=St-_.width,oe*=P?1:-1}}var At=Object.assign({position:M},H&&unsetSides),xt=J===!0?roundOffsetsByDPR({x:oe,y:ae},getWindow(d)):{x:oe,y:ae};if(oe=xt.x,ae=xt.y,P){var Ct;return Object.assign({},At,(Ct={},Ct[be]=he?"0":"",Ct[ve]=pe?"0":"",Ct.transform=(Re.devicePixelRatio||1)<=1?"translate("+oe+"px, "+ae+"px)":"translate3d("+oe+"px, "+ae+"px, 0)",Ct))}return Object.assign({},At,(s={},s[be]=he?ae+"px":"",s[ve]=pe?oe+"px":"",s.transform="",s))}function computeStyles(f){var s=f.state,d=f.options,_=d.gpuAcceleration,S=_===void 0?!0:_,T=d.adaptive,F=T===void 0?!0:T,M=d.roundOffsets,P=M===void 0?!0:M,H={placement:getBasePlacement(s.placement),variation:getVariation(s.placement),popper:s.elements.popper,popperRect:s.rects.popper,gpuAcceleration:S,isFixed:s.options.strategy==="fixed"};s.modifiersData.popperOffsets!=null&&(s.styles.popper=Object.assign({},s.styles.popper,mapToStyles(Object.assign({},H,{offsets:s.modifiersData.popperOffsets,position:s.options.strategy,adaptive:F,roundOffsets:P})))),s.modifiersData.arrow!=null&&(s.styles.arrow=Object.assign({},s.styles.arrow,mapToStyles(Object.assign({},H,{offsets:s.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:P})))),s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-placement":s.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(f){var s=f.state,d=f.instance,_=f.options,S=_.scroll,T=S===void 0?!0:S,F=_.resize,M=F===void 0?!0:F,P=getWindow(s.elements.popper),H=[].concat(s.scrollParents.reference,s.scrollParents.popper);return T&&H.forEach(function(J){J.addEventListener("scroll",d.update,passive)}),M&&P.addEventListener("resize",d.update,passive),function(){T&&H.forEach(function(J){J.removeEventListener("scroll",d.update,passive)}),M&&P.removeEventListener("resize",d.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function f(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(f){return f.replace(/left|right|bottom|top/g,function(s){return hash$1[s]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(f){return f.replace(/start|end/g,function(s){return hash[s]})}function getWindowScroll(f){var s=getWindow(f),d=s.pageXOffset,_=s.pageYOffset;return{scrollLeft:d,scrollTop:_}}function getWindowScrollBarX(f){return getBoundingClientRect(getDocumentElement(f)).left+getWindowScroll(f).scrollLeft}function getViewportRect(f,s){var d=getWindow(f),_=getDocumentElement(f),S=d.visualViewport,T=_.clientWidth,F=_.clientHeight,M=0,P=0;if(S){T=S.width,F=S.height;var H=isLayoutViewport();(H||!H&&s==="fixed")&&(M=S.offsetLeft,P=S.offsetTop)}return{width:T,height:F,x:M+getWindowScrollBarX(f),y:P}}function getDocumentRect(f){var s,d=getDocumentElement(f),_=getWindowScroll(f),S=(s=f.ownerDocument)==null?void 0:s.body,T=max$4(d.scrollWidth,d.clientWidth,S?S.scrollWidth:0,S?S.clientWidth:0),F=max$4(d.scrollHeight,d.clientHeight,S?S.scrollHeight:0,S?S.clientHeight:0),M=-_.scrollLeft+getWindowScrollBarX(f),P=-_.scrollTop;return getComputedStyle$1(S||d).direction==="rtl"&&(M+=max$4(d.clientWidth,S?S.clientWidth:0)-T),{width:T,height:F,x:M,y:P}}function isScrollParent(f){var s=getComputedStyle$1(f),d=s.overflow,_=s.overflowX,S=s.overflowY;return/auto|scroll|overlay|hidden/.test(d+S+_)}function getScrollParent(f){return["html","body","#document"].indexOf(getNodeName(f))>=0?f.ownerDocument.body:isHTMLElement$1(f)&&isScrollParent(f)?f:getScrollParent(getParentNode(f))}function listScrollParents(f,s){var d;s===void 0&&(s=[]);var _=getScrollParent(f),S=_===((d=f.ownerDocument)==null?void 0:d.body),T=getWindow(_),F=S?[T].concat(T.visualViewport||[],isScrollParent(_)?_:[]):_,M=s.concat(F);return S?M:M.concat(listScrollParents(getParentNode(F)))}function rectToClientRect(f){return Object.assign({},f,{left:f.x,top:f.y,right:f.x+f.width,bottom:f.y+f.height})}function getInnerBoundingClientRect(f,s){var d=getBoundingClientRect(f,!1,s==="fixed");return d.top=d.top+f.clientTop,d.left=d.left+f.clientLeft,d.bottom=d.top+f.clientHeight,d.right=d.left+f.clientWidth,d.width=f.clientWidth,d.height=f.clientHeight,d.x=d.left,d.y=d.top,d}function getClientRectFromMixedType(f,s,d){return s===viewport?rectToClientRect(getViewportRect(f,d)):isElement$1(s)?getInnerBoundingClientRect(s,d):rectToClientRect(getDocumentRect(getDocumentElement(f)))}function getClippingParents(f){var s=listScrollParents(getParentNode(f)),d=["absolute","fixed"].indexOf(getComputedStyle$1(f).position)>=0,_=d&&isHTMLElement$1(f)?getOffsetParent(f):f;return isElement$1(_)?s.filter(function(S){return isElement$1(S)&&contains(S,_)&&getNodeName(S)!=="body"}):[]}function getClippingRect(f,s,d,_){var S=s==="clippingParents"?getClippingParents(f):[].concat(s),T=[].concat(S,[d]),F=T[0],M=T.reduce(function(P,H){var J=getClientRectFromMixedType(f,H,_);return P.top=max$4(J.top,P.top),P.right=min$3(J.right,P.right),P.bottom=min$3(J.bottom,P.bottom),P.left=max$4(J.left,P.left),P},getClientRectFromMixedType(f,F,_));return M.width=M.right-M.left,M.height=M.bottom-M.top,M.x=M.left,M.y=M.top,M}function computeOffsets(f){var s=f.reference,d=f.element,_=f.placement,S=_?getBasePlacement(_):null,T=_?getVariation(_):null,F=s.x+s.width/2-d.width/2,M=s.y+s.height/2-d.height/2,P;switch(S){case top$1:P={x:F,y:s.y-d.height};break;case bottom$1:P={x:F,y:s.y+s.height};break;case right$1:P={x:s.x+s.width,y:M};break;case left$1:P={x:s.x-d.width,y:M};break;default:P={x:s.x,y:s.y}}var H=S?getMainAxisFromPlacement(S):null;if(H!=null){var J=H==="y"?"height":"width";switch(T){case start$1:P[H]=P[H]-(s[J]/2-d[J]/2);break;case end:P[H]=P[H]+(s[J]/2-d[J]/2);break}}return P}function detectOverflow(f,s){s===void 0&&(s={});var d=s,_=d.placement,S=_===void 0?f.placement:_,T=d.strategy,F=T===void 0?f.strategy:T,M=d.boundary,P=M===void 0?clippingParents:M,H=d.rootBoundary,J=H===void 0?viewport:H,K=d.elementContext,z=K===void 0?popper:K,oe=d.altBoundary,se=oe===void 0?!1:oe,ae=d.padding,ge=ae===void 0?0:ae,pe=mergePaddingObject(typeof ge!="number"?ge:expandToHashMap(ge,basePlacements)),he=z===popper?reference:popper,ve=f.rects.popper,be=f.elements[se?he:z],Re=getClippingRect(isElement$1(be)?be:be.contextElement||getDocumentElement(f.elements.popper),P,J,F),Fe=getBoundingClientRect(f.elements.reference),ye=computeOffsets({reference:Fe,element:ve,strategy:"absolute",placement:S}),Ue=rectToClientRect(Object.assign({},ve,ye)),It=z===popper?Ue:Fe,St={top:Re.top-It.top+pe.top,bottom:It.bottom-Re.bottom+pe.bottom,left:Re.left-It.left+pe.left,right:It.right-Re.right+pe.right},At=f.modifiersData.offset;if(z===popper&&At){var xt=At[S];Object.keys(St).forEach(function(Ct){var Nt=[right$1,bottom$1].indexOf(Ct)>=0?1:-1,qt=[top$1,bottom$1].indexOf(Ct)>=0?"y":"x";St[Ct]+=xt[qt]*Nt})}return St}function computeAutoPlacement(f,s){s===void 0&&(s={});var d=s,_=d.placement,S=d.boundary,T=d.rootBoundary,F=d.padding,M=d.flipVariations,P=d.allowedAutoPlacements,H=P===void 0?placements:P,J=getVariation(_),K=J?M?variationPlacements:variationPlacements.filter(function(se){return getVariation(se)===J}):basePlacements,z=K.filter(function(se){return H.indexOf(se)>=0});z.length===0&&(z=K);var oe=z.reduce(function(se,ae){return se[ae]=detectOverflow(f,{placement:ae,boundary:S,rootBoundary:T,padding:F})[getBasePlacement(ae)],se},{});return Object.keys(oe).sort(function(se,ae){return oe[se]-oe[ae]})}function getExpandedFallbackPlacements(f){if(getBasePlacement(f)===auto)return[];var s=getOppositePlacement(f);return[getOppositeVariationPlacement(f),s,getOppositeVariationPlacement(s)]}function flip(f){var s=f.state,d=f.options,_=f.name;if(!s.modifiersData[_]._skip){for(var S=d.mainAxis,T=S===void 0?!0:S,F=d.altAxis,M=F===void 0?!0:F,P=d.fallbackPlacements,H=d.padding,J=d.boundary,K=d.rootBoundary,z=d.altBoundary,oe=d.flipVariations,se=oe===void 0?!0:oe,ae=d.allowedAutoPlacements,ge=s.options.placement,pe=getBasePlacement(ge),he=pe===ge,ve=P||(he||!se?[getOppositePlacement(ge)]:getExpandedFallbackPlacements(ge)),be=[ge].concat(ve).reduce(function(jA,aI){return jA.concat(getBasePlacement(aI)===auto?computeAutoPlacement(s,{placement:aI,boundary:J,rootBoundary:K,padding:H,flipVariations:se,allowedAutoPlacements:ae}):aI)},[]),Re=s.rects.reference,Fe=s.rects.popper,ye=new Map,Ue=!0,It=be[0],St=0;St<be.length;St++){var At=be[St],xt=getBasePlacement(At),Ct=getVariation(At)===start$1,Nt=[top$1,bottom$1].indexOf(xt)>=0,qt=Nt?"width":"height",Jn=detectOverflow(s,{placement:At,boundary:J,rootBoundary:K,altBoundary:z,padding:H}),qr=Nt?Ct?right$1:left$1:Ct?bottom$1:top$1;Re[qt]>Fe[qt]&&(qr=getOppositePlacement(qr));var na=getOppositePlacement(qr),qn=[];if(T&&qn.push(Jn[xt]<=0),M&&qn.push(Jn[qr]<=0,Jn[na]<=0),qn.every(function(jA){return jA})){It=At,Ue=!1;break}ye.set(At,qn)}if(Ue)for(var vA=se?3:1,TA=function(aI){var WA=be.find(function(KA){var rA=ye.get(KA);if(rA)return rA.slice(0,aI).every(function(ta){return ta})});if(WA)return It=WA,"break"},VA=vA;VA>0;VA--){var mI=TA(VA);if(mI==="break")break}s.placement!==It&&(s.modifiersData[_]._skip=!0,s.placement=It,s.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(f,s,d){return d===void 0&&(d={x:0,y:0}),{top:f.top-s.height-d.y,right:f.right-s.width+d.x,bottom:f.bottom-s.height+d.y,left:f.left-s.width-d.x}}function isAnySideFullyClipped(f){return[top$1,right$1,bottom$1,left$1].some(function(s){return f[s]>=0})}function hide(f){var s=f.state,d=f.name,_=s.rects.reference,S=s.rects.popper,T=s.modifiersData.preventOverflow,F=detectOverflow(s,{elementContext:"reference"}),M=detectOverflow(s,{altBoundary:!0}),P=getSideOffsets(F,_),H=getSideOffsets(M,S,T),J=isAnySideFullyClipped(P),K=isAnySideFullyClipped(H);s.modifiersData[d]={referenceClippingOffsets:P,popperEscapeOffsets:H,isReferenceHidden:J,hasPopperEscaped:K},s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-reference-hidden":J,"data-popper-escaped":K})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(f,s,d){var _=getBasePlacement(f),S=[left$1,top$1].indexOf(_)>=0?-1:1,T=typeof d=="function"?d(Object.assign({},s,{placement:f})):d,F=T[0],M=T[1];return F=F||0,M=(M||0)*S,[left$1,right$1].indexOf(_)>=0?{x:M,y:F}:{x:F,y:M}}function offset$1(f){var s=f.state,d=f.options,_=f.name,S=d.offset,T=S===void 0?[0,0]:S,F=placements.reduce(function(J,K){return J[K]=distanceAndSkiddingToXY(K,s.rects,T),J},{}),M=F[s.placement],P=M.x,H=M.y;s.modifiersData.popperOffsets!=null&&(s.modifiersData.popperOffsets.x+=P,s.modifiersData.popperOffsets.y+=H),s.modifiersData[_]=F}const offset$2={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset$1};function popperOffsets(f){var s=f.state,d=f.name;s.modifiersData[d]=computeOffsets({reference:s.rects.reference,element:s.rects.popper,strategy:"absolute",placement:s.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(f){return f==="x"?"y":"x"}function preventOverflow(f){var s=f.state,d=f.options,_=f.name,S=d.mainAxis,T=S===void 0?!0:S,F=d.altAxis,M=F===void 0?!1:F,P=d.boundary,H=d.rootBoundary,J=d.altBoundary,K=d.padding,z=d.tether,oe=z===void 0?!0:z,se=d.tetherOffset,ae=se===void 0?0:se,ge=detectOverflow(s,{boundary:P,rootBoundary:H,padding:K,altBoundary:J}),pe=getBasePlacement(s.placement),he=getVariation(s.placement),ve=!he,be=getMainAxisFromPlacement(pe),Re=getAltAxis(be),Fe=s.modifiersData.popperOffsets,ye=s.rects.reference,Ue=s.rects.popper,It=typeof ae=="function"?ae(Object.assign({},s.rects,{placement:s.placement})):ae,St=typeof It=="number"?{mainAxis:It,altAxis:It}:Object.assign({mainAxis:0,altAxis:0},It),At=s.modifiersData.offset?s.modifiersData.offset[s.placement]:null,xt={x:0,y:0};if(Fe){if(T){var Ct,Nt=be==="y"?top$1:left$1,qt=be==="y"?bottom$1:right$1,Jn=be==="y"?"height":"width",qr=Fe[be],na=qr+ge[Nt],qn=qr-ge[qt],vA=oe?-Ue[Jn]/2:0,TA=he===start$1?ye[Jn]:Ue[Jn],VA=he===start$1?-Ue[Jn]:-ye[Jn],mI=s.elements.arrow,jA=oe&&mI?getLayoutRect(mI):{width:0,height:0},aI=s.modifiersData["arrow#persistent"]?s.modifiersData["arrow#persistent"].padding:getFreshSideObject(),WA=aI[Nt],KA=aI[qt],rA=within(0,ye[Jn],jA[Jn]),ta=ve?ye[Jn]/2-vA-rA-WA-St.mainAxis:TA-rA-WA-St.mainAxis,fa=ve?-ye[Jn]/2+vA+rA+KA+St.mainAxis:VA+rA+KA+St.mainAxis,yA=s.elements.arrow&&getOffsetParent(s.elements.arrow),_A=yA?be==="y"?yA.clientTop||0:yA.clientLeft||0:0,la=(Ct=At==null?void 0:At[be])!=null?Ct:0,AA=qr+ta-la-_A,tA=qr+fa-la,ba=within(oe?min$3(na,AA):na,qr,oe?max$4(qn,tA):qn);Fe[be]=ba,xt[be]=ba-qr}if(M){var iA,lA=be==="x"?top$1:left$1,yI=be==="x"?bottom$1:right$1,rI=Fe[Re],BI=Re==="y"?"height":"width",NI=rI+ge[lA],Rt=rI-ge[yI],QA=[top$1,left$1].indexOf(pe)!==-1,cA=(iA=At==null?void 0:At[Re])!=null?iA:0,gI=QA?NI:rI-ye[BI]-Ue[BI]-cA+St.altAxis,LI=QA?rI+ye[BI]+Ue[BI]-cA-St.altAxis:Rt,da=oe&&QA?withinMaxClamp(gI,rI,LI):within(oe?gI:NI,rI,oe?LI:Rt);Fe[Re]=da,xt[Re]=da-rI}s.modifiersData[_]=xt}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(f){return{scrollLeft:f.scrollLeft,scrollTop:f.scrollTop}}function getNodeScroll(f){return f===getWindow(f)||!isHTMLElement$1(f)?getWindowScroll(f):getHTMLElementScroll(f)}function isElementScaled(f){var s=f.getBoundingClientRect(),d=round$2(s.width)/f.offsetWidth||1,_=round$2(s.height)/f.offsetHeight||1;return d!==1||_!==1}function getCompositeRect(f,s,d){d===void 0&&(d=!1);var _=isHTMLElement$1(s),S=isHTMLElement$1(s)&&isElementScaled(s),T=getDocumentElement(s),F=getBoundingClientRect(f,S,d),M={scrollLeft:0,scrollTop:0},P={x:0,y:0};return(_||!_&&!d)&&((getNodeName(s)!=="body"||isScrollParent(T))&&(M=getNodeScroll(s)),isHTMLElement$1(s)?(P=getBoundingClientRect(s,!0),P.x+=s.clientLeft,P.y+=s.clientTop):T&&(P.x=getWindowScrollBarX(T))),{x:F.left+M.scrollLeft-P.x,y:F.top+M.scrollTop-P.y,width:F.width,height:F.height}}function order(f){var s=new Map,d=new Set,_=[];f.forEach(function(T){s.set(T.name,T)});function S(T){d.add(T.name);var F=[].concat(T.requires||[],T.requiresIfExists||[]);F.forEach(function(M){if(!d.has(M)){var P=s.get(M);P&&S(P)}}),_.push(T)}return f.forEach(function(T){d.has(T.name)||S(T)}),_}function orderModifiers(f){var s=order(f);return modifierPhases.reduce(function(d,_){return d.concat(s.filter(function(S){return S.phase===_}))},[])}function debounce$1(f){var s;return function(){return s||(s=new Promise(function(d){Promise.resolve().then(function(){s=void 0,d(f())})})),s}}function mergeByName(f){var s=f.reduce(function(d,_){var S=d[_.name];return d[_.name]=S?Object.assign({},S,_,{options:Object.assign({},S.options,_.options),data:Object.assign({},S.data,_.data)}):_,d},{});return Object.keys(s).map(function(d){return s[d]})}var DEFAULT_OPTIONS$2={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var f=arguments.length,s=new Array(f),d=0;d<f;d++)s[d]=arguments[d];return!s.some(function(_){return!(_&&typeof _.getBoundingClientRect=="function")})}function popperGenerator(f){f===void 0&&(f={});var s=f,d=s.defaultModifiers,_=d===void 0?[]:d,S=s.defaultOptions,T=S===void 0?DEFAULT_OPTIONS$2:S;return function(M,P,H){H===void 0&&(H=T);var J={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS$2,T),modifiersData:{},elements:{reference:M,popper:P},attributes:{},styles:{}},K=[],z=!1,oe={state:J,setOptions:function(pe){var he=typeof pe=="function"?pe(J.options):pe;ae(),J.options=Object.assign({},T,J.options,he),J.scrollParents={reference:isElement$1(M)?listScrollParents(M):M.contextElement?listScrollParents(M.contextElement):[],popper:listScrollParents(P)};var ve=orderModifiers(mergeByName([].concat(_,J.options.modifiers)));return J.orderedModifiers=ve.filter(function(be){return be.enabled}),se(),oe.update()},forceUpdate:function(){if(!z){var pe=J.elements,he=pe.reference,ve=pe.popper;if(areValidElements(he,ve)){J.rects={reference:getCompositeRect(he,getOffsetParent(ve),J.options.strategy==="fixed"),popper:getLayoutRect(ve)},J.reset=!1,J.placement=J.options.placement,J.orderedModifiers.forEach(function(St){return J.modifiersData[St.name]=Object.assign({},St.data)});for(var be=0;be<J.orderedModifiers.length;be++){if(J.reset===!0){J.reset=!1,be=-1;continue}var Re=J.orderedModifiers[be],Fe=Re.fn,ye=Re.options,Ue=ye===void 0?{}:ye,It=Re.name;typeof Fe=="function"&&(J=Fe({state:J,options:Ue,name:It,instance:oe})||J)}}}},update:debounce$1(function(){return new Promise(function(ge){oe.forceUpdate(),ge(J)})}),destroy:function(){ae(),z=!0}};if(!areValidElements(M,P))return oe;oe.setOptions(H).then(function(ge){!z&&H.onFirstUpdate&&H.onFirstUpdate(ge)});function se(){J.orderedModifiers.forEach(function(ge){var pe=ge.name,he=ge.options,ve=he===void 0?{}:he,be=ge.effect;if(typeof be=="function"){var Re=be({state:J,name:pe,instance:oe,options:ve}),Fe=function(){};K.push(Re||Fe)}})}function ae(){K.forEach(function(ge){return ge()}),K=[]}return oe}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$2,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function getPopperUtilityClass(f){return generateUtilityClass("MuiPopper",f)}generateUtilityClasses("MuiPopper",["root"]);const _excluded$a=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],_excluded2$2=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function flipPlacement(f,s){if(s==="ltr")return f;switch(f){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return f}}function resolveAnchorEl(f){return typeof f=="function"?f():f}function isHTMLElement(f){return f.nodeType!==void 0}const useUtilityClasses$8=f=>{const{classes:s}=f;return composeClasses({root:["root"]},getPopperUtilityClass,s)},defaultPopperOptions={},PopperTooltip=reactExports.forwardRef(function f(s,d){var _;const{anchorEl:S,children:T,direction:F,disablePortal:M,modifiers:P,open:H,placement:J,popperOptions:K,popperRef:z,slotProps:oe={},slots:se={},TransitionProps:ae}=s,ge=_objectWithoutPropertiesLoose$1(s,_excluded$a),pe=reactExports.useRef(null),he=useForkRef(pe,d),ve=reactExports.useRef(null),be=useForkRef(ve,z),Re=reactExports.useRef(be);useEnhancedEffect(()=>{Re.current=be},[be]),reactExports.useImperativeHandle(z,()=>ve.current,[]);const Fe=flipPlacement(J,F),[ye,Ue]=reactExports.useState(Fe),[It,St]=reactExports.useState(resolveAnchorEl(S));reactExports.useEffect(()=>{ve.current&&ve.current.forceUpdate()}),reactExports.useEffect(()=>{S&&St(resolveAnchorEl(S))},[S]),useEnhancedEffect(()=>{if(!It||!H)return;const qt=na=>{Ue(na.placement)};let Jn=[{name:"preventOverflow",options:{altBoundary:M}},{name:"flip",options:{altBoundary:M}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:na})=>{qt(na)}}];P!=null&&(Jn=Jn.concat(P)),K&&K.modifiers!=null&&(Jn=Jn.concat(K.modifiers));const qr=createPopper(It,pe.current,_extends$a({placement:Fe},K,{modifiers:Jn}));return Re.current(qr),()=>{qr.destroy(),Re.current(null)}},[It,M,P,H,K,Fe]);const At={placement:ye};ae!==null&&(At.TransitionProps=ae);const xt=useUtilityClasses$8(s),Ct=(_=se.root)!=null?_:"div",Nt=useSlotProps({elementType:Ct,externalSlotProps:oe.root,externalForwardedProps:ge,additionalProps:{role:"tooltip",ref:he},ownerState:s,className:xt.root});return jsxRuntimeExports.jsx(Ct,_extends$a({},Nt,{children:typeof T=="function"?T(At):T}))}),Popper$1=reactExports.forwardRef(function f(s,d){const{anchorEl:_,children:S,container:T,direction:F="ltr",disablePortal:M=!1,keepMounted:P=!1,modifiers:H,open:J,placement:K="bottom",popperOptions:z=defaultPopperOptions,popperRef:oe,style:se,transition:ae=!1,slotProps:ge={},slots:pe={}}=s,he=_objectWithoutPropertiesLoose$1(s,_excluded2$2),[ve,be]=reactExports.useState(!0),Re=()=>{be(!1)},Fe=()=>{be(!0)};if(!P&&!J&&(!ae||ve))return null;let ye;if(T)ye=T;else if(_){const St=resolveAnchorEl(_);ye=St&&isHTMLElement(St)?ownerDocument(St).body:ownerDocument(null).body}const Ue=!J&&P&&(!ae||ve)?"none":void 0,It=ae?{in:J,onEnter:Re,onExited:Fe}:void 0;return jsxRuntimeExports.jsx(Portal,{disablePortal:M,container:ye,children:jsxRuntimeExports.jsx(PopperTooltip,_extends$a({anchorEl:_,direction:F,disablePortal:M,modifiers:H,ref:d,open:ae?!ve:J,placement:K,popperOptions:z,popperRef:oe,slotProps:ge,slots:pe},he,{style:_extends$a({position:"fixed",top:0,left:0,display:Ue},se),TransitionProps:It,children:S}))})}),_excluded$9=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],PopperRoot=styled(Popper$1,{name:"MuiPopper",slot:"Root",overridesResolver:(f,s)=>s.root})({}),Popper=reactExports.forwardRef(function f(s,d){var _;const S=default_1$d(),T=useDefaultProps({props:s,name:"MuiPopper"}),{anchorEl:F,component:M,components:P,componentsProps:H,container:J,disablePortal:K,keepMounted:z,modifiers:oe,open:se,placement:ae,popperOptions:ge,popperRef:pe,transition:he,slots:ve,slotProps:be}=T,Re=_objectWithoutPropertiesLoose$1(T,_excluded$9),Fe=(_=ve==null?void 0:ve.root)!=null?_:P==null?void 0:P.Root,ye=_extends$a({anchorEl:F,container:J,disablePortal:K,keepMounted:z,modifiers:oe,open:se,placement:ae,popperOptions:ge,popperRef:pe,transition:he},Re);return jsxRuntimeExports.jsx(PopperRoot,_extends$a({as:M,direction:S==null?void 0:S.direction,slots:{root:Fe},slotProps:be??H},ye,{ref:d}))});function getListSubheaderUtilityClass(f){return generateUtilityClass("MuiListSubheader",f)}generateUtilityClasses("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const _excluded$8=["className","color","component","disableGutters","disableSticky","inset"],useUtilityClasses$7=f=>{const{classes:s,color:d,disableGutters:_,inset:S,disableSticky:T}=f,F={root:["root",d!=="default"&&`color${capitalize$1(d)}`,!_&&"gutters",S&&"inset",!T&&"sticky"]};return composeClasses(F,getListSubheaderUtilityClass,s)},ListSubheaderRoot=styled("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(f,s)=>{const{ownerState:d}=f;return[s.root,d.color!=="default"&&s[`color${capitalize$1(d.color)}`],!d.disableGutters&&s.gutters,d.inset&&s.inset,!d.disableSticky&&s.sticky]}})(({theme:f,ownerState:s})=>_extends$a({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(f.vars||f).palette.text.secondary,fontFamily:f.typography.fontFamily,fontWeight:f.typography.fontWeightMedium,fontSize:f.typography.pxToRem(14)},s.color==="primary"&&{color:(f.vars||f).palette.primary.main},s.color==="inherit"&&{color:"inherit"},!s.disableGutters&&{paddingLeft:16,paddingRight:16},s.inset&&{paddingLeft:72},!s.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(f.vars||f).palette.background.paper})),ListSubheader=reactExports.forwardRef(function f(s,d){const _=useDefaultProps({props:s,name:"MuiListSubheader"}),{className:S,color:T="default",component:F="li",disableGutters:M=!1,disableSticky:P=!1,inset:H=!1}=_,J=_objectWithoutPropertiesLoose$1(_,_excluded$8),K=_extends$a({},_,{color:T,component:F,disableGutters:M,disableSticky:P,inset:H}),z=useUtilityClasses$7(K);return jsxRuntimeExports.jsx(ListSubheaderRoot,_extends$a({as:F,className:clsx(z.root,S),ref:d,ownerState:K},J))});ListSubheader.muiSkipListHighlight=!0;const CancelIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function getChipUtilityClass(f){return generateUtilityClass("MuiChip",f)}const chipClasses=generateUtilityClasses("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),_excluded$7=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],useUtilityClasses$6=f=>{const{classes:s,disabled:d,size:_,color:S,iconColor:T,onDelete:F,clickable:M,variant:P}=f,H={root:["root",P,d&&"disabled",`size${capitalize$1(_)}`,`color${capitalize$1(S)}`,M&&"clickable",M&&`clickableColor${capitalize$1(S)}`,F&&"deletable",F&&`deletableColor${capitalize$1(S)}`,`${P}${capitalize$1(S)}`],label:["label",`label${capitalize$1(_)}`],avatar:["avatar",`avatar${capitalize$1(_)}`,`avatarColor${capitalize$1(S)}`],icon:["icon",`icon${capitalize$1(_)}`,`iconColor${capitalize$1(T)}`],deleteIcon:["deleteIcon",`deleteIcon${capitalize$1(_)}`,`deleteIconColor${capitalize$1(S)}`,`deleteIcon${capitalize$1(P)}Color${capitalize$1(S)}`]};return composeClasses(H,getChipUtilityClass,s)},ChipRoot=styled("div",{name:"MuiChip",slot:"Root",overridesResolver:(f,s)=>{const{ownerState:d}=f,{color:_,iconColor:S,clickable:T,onDelete:F,size:M,variant:P}=d;return[{[`& .${chipClasses.avatar}`]:s.avatar},{[`& .${chipClasses.avatar}`]:s[`avatar${capitalize$1(M)}`]},{[`& .${chipClasses.avatar}`]:s[`avatarColor${capitalize$1(_)}`]},{[`& .${chipClasses.icon}`]:s.icon},{[`& .${chipClasses.icon}`]:s[`icon${capitalize$1(M)}`]},{[`& .${chipClasses.icon}`]:s[`iconColor${capitalize$1(S)}`]},{[`& .${chipClasses.deleteIcon}`]:s.deleteIcon},{[`& .${chipClasses.deleteIcon}`]:s[`deleteIcon${capitalize$1(M)}`]},{[`& .${chipClasses.deleteIcon}`]:s[`deleteIconColor${capitalize$1(_)}`]},{[`& .${chipClasses.deleteIcon}`]:s[`deleteIcon${capitalize$1(P)}Color${capitalize$1(_)}`]},s.root,s[`size${capitalize$1(M)}`],s[`color${capitalize$1(_)}`],T&&s.clickable,T&&_!=="default"&&s[`clickableColor${capitalize$1(_)})`],F&&s.deletable,F&&_!=="default"&&s[`deletableColor${capitalize$1(_)}`],s[P],s[`${P}${capitalize$1(_)}`]]}})(({theme:f,ownerState:s})=>{const d=f.palette.mode==="light"?f.palette.grey[700]:f.palette.grey[300];return _extends$a({maxWidth:"100%",fontFamily:f.typography.fontFamily,fontSize:f.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(f.vars||f).palette.text.primary,backgroundColor:(f.vars||f).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:f.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${chipClasses.disabled}`]:{opacity:(f.vars||f).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${chipClasses.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:f.vars?f.vars.palette.Chip.defaultAvatarColor:d,fontSize:f.typography.pxToRem(12)},[`& .${chipClasses.avatarColorPrimary}`]:{color:(f.vars||f).palette.primary.contrastText,backgroundColor:(f.vars||f).palette.primary.dark},[`& .${chipClasses.avatarColorSecondary}`]:{color:(f.vars||f).palette.secondary.contrastText,backgroundColor:(f.vars||f).palette.secondary.dark},[`& .${chipClasses.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:f.typography.pxToRem(10)},[`& .${chipClasses.icon}`]:_extends$a({marginLeft:5,marginRight:-6},s.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},s.iconColor===s.color&&_extends$a({color:f.vars?f.vars.palette.Chip.defaultIconColor:d},s.color!=="default"&&{color:"inherit"})),[`& .${chipClasses.deleteIcon}`]:_extends$a({WebkitTapHighlightColor:"transparent",color:f.vars?`rgba(${f.vars.palette.text.primaryChannel} / 0.26)`:alpha_1(f.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:f.vars?`rgba(${f.vars.palette.text.primaryChannel} / 0.4)`:alpha_1(f.palette.text.primary,.4)}},s.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},s.color!=="default"&&{color:f.vars?`rgba(${f.vars.palette[s.color].contrastTextChannel} / 0.7)`:alpha_1(f.palette[s.color].contrastText,.7),"&:hover, &:active":{color:(f.vars||f).palette[s.color].contrastText}})},s.size==="small"&&{height:24},s.color!=="default"&&{backgroundColor:(f.vars||f).palette[s.color].main,color:(f.vars||f).palette[s.color].contrastText},s.onDelete&&{[`&.${chipClasses.focusVisible}`]:{backgroundColor:f.vars?`rgba(${f.vars.palette.action.selectedChannel} / calc(${f.vars.palette.action.selectedOpacity} + ${f.vars.palette.action.focusOpacity}))`:alpha_1(f.palette.action.selected,f.palette.action.selectedOpacity+f.palette.action.focusOpacity)}},s.onDelete&&s.color!=="default"&&{[`&.${chipClasses.focusVisible}`]:{backgroundColor:(f.vars||f).palette[s.color].dark}})},({theme:f,ownerState:s})=>_extends$a({},s.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:f.vars?`rgba(${f.vars.palette.action.selectedChannel} / calc(${f.vars.palette.action.selectedOpacity} + ${f.vars.palette.action.hoverOpacity}))`:alpha_1(f.palette.action.selected,f.palette.action.selectedOpacity+f.palette.action.hoverOpacity)},[`&.${chipClasses.focusVisible}`]:{backgroundColor:f.vars?`rgba(${f.vars.palette.action.selectedChannel} / calc(${f.vars.palette.action.selectedOpacity} + ${f.vars.palette.action.focusOpacity}))`:alpha_1(f.palette.action.selected,f.palette.action.selectedOpacity+f.palette.action.focusOpacity)},"&:active":{boxShadow:(f.vars||f).shadows[1]}},s.clickable&&s.color!=="default"&&{[`&:hover, &.${chipClasses.focusVisible}`]:{backgroundColor:(f.vars||f).palette[s.color].dark}}),({theme:f,ownerState:s})=>_extends$a({},s.variant==="outlined"&&{backgroundColor:"transparent",border:f.vars?`1px solid ${f.vars.palette.Chip.defaultBorder}`:`1px solid ${f.palette.mode==="light"?f.palette.grey[400]:f.palette.grey[700]}`,[`&.${chipClasses.clickable}:hover`]:{backgroundColor:(f.vars||f).palette.action.hover},[`&.${chipClasses.focusVisible}`]:{backgroundColor:(f.vars||f).palette.action.focus},[`& .${chipClasses.avatar}`]:{marginLeft:4},[`& .${chipClasses.avatarSmall}`]:{marginLeft:2},[`& .${chipClasses.icon}`]:{marginLeft:4},[`& .${chipClasses.iconSmall}`]:{marginLeft:2},[`& .${chipClasses.deleteIcon}`]:{marginRight:5},[`& .${chipClasses.deleteIconSmall}`]:{marginRight:3}},s.variant==="outlined"&&s.color!=="default"&&{color:(f.vars||f).palette[s.color].main,border:`1px solid ${f.vars?`rgba(${f.vars.palette[s.color].mainChannel} / 0.7)`:alpha_1(f.palette[s.color].main,.7)}`,[`&.${chipClasses.clickable}:hover`]:{backgroundColor:f.vars?`rgba(${f.vars.palette[s.color].mainChannel} / ${f.vars.palette.action.hoverOpacity})`:alpha_1(f.palette[s.color].main,f.palette.action.hoverOpacity)},[`&.${chipClasses.focusVisible}`]:{backgroundColor:f.vars?`rgba(${f.vars.palette[s.color].mainChannel} / ${f.vars.palette.action.focusOpacity})`:alpha_1(f.palette[s.color].main,f.palette.action.focusOpacity)},[`& .${chipClasses.deleteIcon}`]:{color:f.vars?`rgba(${f.vars.palette[s.color].mainChannel} / 0.7)`:alpha_1(f.palette[s.color].main,.7),"&:hover, &:active":{color:(f.vars||f).palette[s.color].main}}})),ChipLabel=styled("span",{name:"MuiChip",slot:"Label",overridesResolver:(f,s)=>{const{ownerState:d}=f,{size:_}=d;return[s.label,s[`label${capitalize$1(_)}`]]}})(({ownerState:f})=>_extends$a({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},f.variant==="outlined"&&{paddingLeft:11,paddingRight:11},f.size==="small"&&{paddingLeft:8,paddingRight:8},f.size==="small"&&f.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function isDeleteKeyboardEvent(f){return f.key==="Backspace"||f.key==="Delete"}const Chip=reactExports.forwardRef(function f(s,d){const _=useDefaultProps({props:s,name:"MuiChip"}),{avatar:S,className:T,clickable:F,color:M="default",component:P,deleteIcon:H,disabled:J=!1,icon:K,label:z,onClick:oe,onDelete:se,onKeyDown:ae,onKeyUp:ge,size:pe="medium",variant:he="filled",tabIndex:ve,skipFocusWhenDisabled:be=!1}=_,Re=_objectWithoutPropertiesLoose$1(_,_excluded$7),Fe=reactExports.useRef(null),ye=useForkRef(Fe,d),Ue=qn=>{qn.stopPropagation(),se&&se(qn)},It=qn=>{qn.currentTarget===qn.target&&isDeleteKeyboardEvent(qn)&&qn.preventDefault(),ae&&ae(qn)},St=qn=>{qn.currentTarget===qn.target&&(se&&isDeleteKeyboardEvent(qn)?se(qn):qn.key==="Escape"&&Fe.current&&Fe.current.blur()),ge&&ge(qn)},At=F!==!1&&oe?!0:F,xt=At||se?ButtonBase:P||"div",Ct=_extends$a({},_,{component:xt,disabled:J,size:pe,color:M,iconColor:reactExports.isValidElement(K)&&K.props.color||M,onDelete:!!se,clickable:At,variant:he}),Nt=useUtilityClasses$6(Ct),qt=xt===ButtonBase?_extends$a({component:P||"div",focusVisibleClassName:Nt.focusVisible},se&&{disableRipple:!0}):{};let Jn=null;se&&(Jn=H&&reactExports.isValidElement(H)?reactExports.cloneElement(H,{className:clsx(H.props.className,Nt.deleteIcon),onClick:Ue}):jsxRuntimeExports.jsx(CancelIcon,{className:clsx(Nt.deleteIcon),onClick:Ue}));let qr=null;S&&reactExports.isValidElement(S)&&(qr=reactExports.cloneElement(S,{className:clsx(Nt.avatar,S.props.className)}));let na=null;return K&&reactExports.isValidElement(K)&&(na=reactExports.cloneElement(K,{className:clsx(Nt.icon,K.props.className)})),jsxRuntimeExports.jsxs(ChipRoot,_extends$a({as:xt,className:clsx(Nt.root,T),disabled:At&&J?!0:void 0,onClick:oe,onKeyDown:It,onKeyUp:St,ref:ye,tabIndex:be&&J?-1:ve,ownerState:Ct},qt,Re,{children:[qr||na,jsxRuntimeExports.jsx(ChipLabel,{className:clsx(Nt.label),ownerState:Ct,children:z}),Jn]}))});function getAutocompleteUtilityClass(f){return generateUtilityClass("MuiAutocomplete",f)}const autocompleteClasses=generateUtilityClasses("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var _ClearIcon,_ArrowDropDownIcon;const _excluded$6=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],_excluded2$1=["ref"],_excluded3$1=["key"],_excluded4$1=["key"],useUtilityClasses$5=f=>{const{classes:s,disablePortal:d,expanded:_,focused:S,fullWidth:T,hasClearIcon:F,hasPopupIcon:M,inputFocused:P,popupOpen:H,size:J}=f,K={root:["root",_&&"expanded",S&&"focused",T&&"fullWidth",F&&"hasClearIcon",M&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",P&&"inputFocused"],tag:["tag",`tagSize${capitalize$1(J)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",H&&"popupIndicatorOpen"],popper:["popper",d&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return composeClasses(K,getAutocompleteUtilityClass,s)},AutocompleteRoot=styled("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(f,s)=>{const{ownerState:d}=f,{fullWidth:_,hasClearIcon:S,hasPopupIcon:T,inputFocused:F,size:M}=d;return[{[`& .${autocompleteClasses.tag}`]:s.tag},{[`& .${autocompleteClasses.tag}`]:s[`tagSize${capitalize$1(M)}`]},{[`& .${autocompleteClasses.inputRoot}`]:s.inputRoot},{[`& .${autocompleteClasses.input}`]:s.input},{[`& .${autocompleteClasses.input}`]:F&&s.inputFocused},s.root,_&&s.fullWidth,T&&s.hasPopupIcon,S&&s.hasClearIcon]}})({[`&.${autocompleteClasses.focused} .${autocompleteClasses.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${autocompleteClasses.clearIndicator}`]:{visibility:"visible"}},[`& .${autocompleteClasses.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${autocompleteClasses.inputRoot}`]:{[`.${autocompleteClasses.hasPopupIcon}&, .${autocompleteClasses.hasClearIcon}&`]:{paddingRight:30},[`.${autocompleteClasses.hasPopupIcon}.${autocompleteClasses.hasClearIcon}&`]:{paddingRight:56},[`& .${autocompleteClasses.input}`]:{width:0,minWidth:30}},[`& .${inputClasses.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${inputClasses.root}.${inputBaseClasses.sizeSmall}`]:{[`& .${inputClasses.input}`]:{padding:"2px 4px 3px 0"}},[`& .${outlinedInputClasses.root}`]:{padding:9,[`.${autocompleteClasses.hasPopupIcon}&, .${autocompleteClasses.hasClearIcon}&`]:{paddingRight:39},[`.${autocompleteClasses.hasPopupIcon}.${autocompleteClasses.hasClearIcon}&`]:{paddingRight:65},[`& .${autocompleteClasses.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${autocompleteClasses.endAdornment}`]:{right:9}},[`& .${outlinedInputClasses.root}.${inputBaseClasses.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${autocompleteClasses.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${filledInputClasses.root}`]:{paddingTop:19,paddingLeft:8,[`.${autocompleteClasses.hasPopupIcon}&, .${autocompleteClasses.hasClearIcon}&`]:{paddingRight:39},[`.${autocompleteClasses.hasPopupIcon}.${autocompleteClasses.hasClearIcon}&`]:{paddingRight:65},[`& .${filledInputClasses.input}`]:{padding:"7px 4px"},[`& .${autocompleteClasses.endAdornment}`]:{right:9}},[`& .${filledInputClasses.root}.${inputBaseClasses.sizeSmall}`]:{paddingBottom:1,[`& .${filledInputClasses.input}`]:{padding:"2.5px 4px"}},[`& .${inputBaseClasses.hiddenLabel}`]:{paddingTop:8},[`& .${filledInputClasses.root}.${inputBaseClasses.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${autocompleteClasses.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${filledInputClasses.root}.${inputBaseClasses.hiddenLabel}.${inputBaseClasses.sizeSmall}`]:{[`& .${autocompleteClasses.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${autocompleteClasses.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${autocompleteClasses.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${autocompleteClasses.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${autocompleteClasses.inputRoot}`]:{flexWrap:"wrap"}}}]}),AutocompleteEndAdornment=styled("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(f,s)=>s.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),AutocompleteClearIndicator=styled(IconButton,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(f,s)=>s.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),AutocompletePopupIndicator=styled(IconButton,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:f},s)=>_extends$a({},s.popupIndicator,f.popupOpen&&s.popupIndicatorOpen)})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),AutocompletePopper=styled(Popper,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(f,s)=>{const{ownerState:d}=f;return[{[`& .${autocompleteClasses.option}`]:s.option},s.popper,d.disablePortal&&s.popperDisablePortal]}})(({theme:f})=>({zIndex:(f.vars||f).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]})),AutocompletePaper=styled(Paper,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(f,s)=>s.paper})(({theme:f})=>_extends$a({},f.typography.body1,{overflow:"auto"})),AutocompleteLoading=styled("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(f,s)=>s.loading})(({theme:f})=>({color:(f.vars||f).palette.text.secondary,padding:"14px 16px"})),AutocompleteNoOptions=styled("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(f,s)=>s.noOptions})(({theme:f})=>({color:(f.vars||f).palette.text.secondary,padding:"14px 16px"})),AutocompleteListbox=styled("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(f,s)=>s.listbox})(({theme:f})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${autocompleteClasses.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[f.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${autocompleteClasses.focused}`]:{backgroundColor:(f.vars||f).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(f.vars||f).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${autocompleteClasses.focusVisible}`]:{backgroundColor:(f.vars||f).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:f.vars?`rgba(${f.vars.palette.primary.mainChannel} / ${f.vars.palette.action.selectedOpacity})`:alpha_1(f.palette.primary.main,f.palette.action.selectedOpacity),[`&.${autocompleteClasses.focused}`]:{backgroundColor:f.vars?`rgba(${f.vars.palette.primary.mainChannel} / calc(${f.vars.palette.action.selectedOpacity} + ${f.vars.palette.action.hoverOpacity}))`:alpha_1(f.palette.primary.main,f.palette.action.selectedOpacity+f.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(f.vars||f).palette.action.selected}},[`&.${autocompleteClasses.focusVisible}`]:{backgroundColor:f.vars?`rgba(${f.vars.palette.primary.mainChannel} / calc(${f.vars.palette.action.selectedOpacity} + ${f.vars.palette.action.focusOpacity}))`:alpha_1(f.palette.primary.main,f.palette.action.selectedOpacity+f.palette.action.focusOpacity)}}}})),AutocompleteGroupLabel=styled(ListSubheader,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(f,s)=>s.groupLabel})(({theme:f})=>({backgroundColor:(f.vars||f).palette.background.paper,top:-8})),AutocompleteGroupUl=styled("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(f,s)=>s.groupUl})({padding:0,[`& .${autocompleteClasses.option}`]:{paddingLeft:24}}),Autocomplete=reactExports.forwardRef(function f(s,d){var _,S,T,F;const M=useDefaultProps({props:s,name:"MuiAutocomplete"}),{autoComplete:P=!1,autoHighlight:H=!1,autoSelect:J=!1,blurOnSelect:K=!1,ChipProps:z,className:oe,clearIcon:se=_ClearIcon||(_ClearIcon=jsxRuntimeExports.jsx(ClearIcon,{fontSize:"small"})),clearOnBlur:ae=!M.freeSolo,clearOnEscape:ge=!1,clearText:pe="Clear",closeText:he="Close",componentsProps:ve={},defaultValue:be=M.multiple?[]:null,disableClearable:Re=!1,disableCloseOnSelect:Fe=!1,disabled:ye=!1,disabledItemsFocusable:Ue=!1,disableListWrap:It=!1,disablePortal:St=!1,filterSelectedOptions:At=!1,forcePopupIcon:xt="auto",freeSolo:Ct=!1,fullWidth:Nt=!1,getLimitTagsText:qt=uA=>`+${uA}`,getOptionLabel:Jn,groupBy:qr,handleHomeEndKeys:na=!M.freeSolo,includeInputInList:qn=!1,limitTags:vA=-1,ListboxComponent:TA="ul",ListboxProps:VA,loading:mI=!1,loadingText:jA="Loading",multiple:aI=!1,noOptionsText:WA="No options",openOnFocus:KA=!1,openText:rA="Open",PaperComponent:ta=Paper,PopperComponent:fa=Popper,popupIcon:yA=_ArrowDropDownIcon||(_ArrowDropDownIcon=jsxRuntimeExports.jsx(ArrowDropDownIcon,{})),readOnly:_A=!1,renderGroup:la,renderInput:AA,renderOption:tA,renderTags:ba,selectOnFocus:iA=!M.freeSolo,size:lA="medium",slotProps:yI={}}=M,rI=_objectWithoutPropertiesLoose$1(M,_excluded$6),{getRootProps:BI,getInputProps:NI,getInputLabelProps:Rt,getPopupIndicatorProps:QA,getClearProps:cA,getTagProps:gI,getListboxProps:LI,getOptionProps:da,value:dA,dirty:RA,expanded:pI,id:vI,popupOpen:EI,focused:zI,focusedTag:FI,anchorEl:DI,setAnchorEl:ZI,inputValue:IC,groupedOptions:mC}=useAutocomplete(_extends$a({},M,{componentName:"Autocomplete"})),BC=!Re&&!ye&&RA&&!_A,yC=(!Ct||xt===!0)&&xt!==!1,{onMouseDown:vC}=NI(),{ref:_C}=VA??{},RC=LI(),{ref:Xt}=RC,zn=_objectWithoutPropertiesLoose$1(RC,_excluded2$1),oa=useForkRef(Xt,_C),YA=Jn||(uA=>{var EA;return(EA=uA.label)!=null?EA:uA}),PA=_extends$a({},M,{disablePortal:St,expanded:pI,focused:zI,fullWidth:Nt,getOptionLabel:YA,hasClearIcon:BC,hasPopupIcon:yC,inputFocused:FI===-1,popupOpen:EI,size:lA}),iI=useUtilityClasses$5(PA);let XA;if(aI&&dA.length>0){const uA=EA=>_extends$a({className:iI.tag,disabled:ye},gI(EA));ba?XA=ba(dA,uA,PA):XA=dA.map((EA,bA)=>{const lI=uA({index:bA}),{key:YI}=lI,uC=_objectWithoutPropertiesLoose$1(lI,_excluded3$1);return jsxRuntimeExports.jsx(Chip,_extends$a({label:YA(EA),size:lA},uC,z),YI)})}if(vA>-1&&Array.isArray(XA)){const uA=XA.length-vA;!zI&&uA>0&&(XA=XA.splice(0,vA),XA.push(jsxRuntimeExports.jsx("span",{className:iI.tag,children:qt(uA)},XA.length)))}const GI=la||(uA=>jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(AutocompleteGroupLabel,{className:iI.groupLabel,ownerState:PA,component:"div",children:uA.group}),jsxRuntimeExports.jsx(AutocompleteGroupUl,{className:iI.groupUl,ownerState:PA,children:uA.children})]},uA.key)),eC=tA||((uA,EA)=>{const{key:bA}=uA,lI=_objectWithoutPropertiesLoose$1(uA,_excluded4$1);return jsxRuntimeExports.jsx("li",_extends$a({},lI,{children:YA(EA)}),bA)}),KI=(uA,EA)=>{const bA=da({option:uA,index:EA});return eC(_extends$a({},bA,{className:iI.option}),uA,{selected:bA["aria-selected"],index:EA,inputValue:IC},PA)},Yt=(_=yI.clearIndicator)!=null?_:ve.clearIndicator,Dn=(S=yI.paper)!=null?S:ve.paper,Kn=(T=yI.popper)!=null?T:ve.popper,Ut=(F=yI.popupIndicator)!=null?F:ve.popupIndicator,Wt=uA=>jsxRuntimeExports.jsx(AutocompletePopper,_extends$a({as:fa,disablePortal:St,style:{width:DI?DI.clientWidth:null},ownerState:PA,role:"presentation",anchorEl:DI,open:EI},Kn,{className:clsx(iI.popper,Kn==null?void 0:Kn.className),children:jsxRuntimeExports.jsx(AutocompletePaper,_extends$a({ownerState:PA,as:ta},Dn,{className:clsx(iI.paper,Dn==null?void 0:Dn.className),children:uA}))}));let ua=null;return mC.length>0?ua=Wt(jsxRuntimeExports.jsx(AutocompleteListbox,_extends$a({as:TA,className:iI.listbox,ownerState:PA},zn,VA,{ref:oa,children:mC.map((uA,EA)=>qr?GI({key:uA.key,group:uA.group,children:uA.options.map((bA,lI)=>KI(bA,uA.index+lI))}):KI(uA,EA))}))):mI&&mC.length===0?ua=Wt(jsxRuntimeExports.jsx(AutocompleteLoading,{className:iI.loading,ownerState:PA,children:jA})):mC.length===0&&!Ct&&!mI&&(ua=Wt(jsxRuntimeExports.jsx(AutocompleteNoOptions,{className:iI.noOptions,ownerState:PA,role:"presentation",onMouseDown:uA=>{uA.preventDefault()},children:WA}))),jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(AutocompleteRoot,_extends$a({ref:d,className:clsx(iI.root,oe),ownerState:PA},BI(rI),{children:AA({id:vI,disabled:ye,fullWidth:!0,size:lA==="small"?"small":void 0,InputLabelProps:Rt(),InputProps:_extends$a({ref:ZI,className:iI.inputRoot,startAdornment:XA,onClick:uA=>{uA.target===uA.currentTarget&&vC(uA)}},(BC||yC)&&{endAdornment:jsxRuntimeExports.jsxs(AutocompleteEndAdornment,{className:iI.endAdornment,ownerState:PA,children:[BC?jsxRuntimeExports.jsx(AutocompleteClearIndicator,_extends$a({},cA(),{"aria-label":pe,title:pe,ownerState:PA},Yt,{className:clsx(iI.clearIndicator,Yt==null?void 0:Yt.className),children:se})):null,yC?jsxRuntimeExports.jsx(AutocompletePopupIndicator,_extends$a({},QA(),{disabled:ye,"aria-label":EI?he:rA,title:EI?he:rA,ownerState:PA},Ut,{className:clsx(iI.popupIndicator,Ut==null?void 0:Ut.className),children:yA})):null]})}),inputProps:_extends$a({className:iI.input,disabled:ye,readOnly:_A},NI())})})),DI?ua:null]})});function getButtonGroupUtilityClass(f){return generateUtilityClass("MuiButtonGroup",f)}const buttonGroupClasses=generateUtilityClasses("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),_excluded$5=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],overridesResolver=(f,s)=>{const{ownerState:d}=f;return[{[`& .${buttonGroupClasses.grouped}`]:s.grouped},{[`& .${buttonGroupClasses.grouped}`]:s[`grouped${capitalize$1(d.orientation)}`]},{[`& .${buttonGroupClasses.grouped}`]:s[`grouped${capitalize$1(d.variant)}`]},{[`& .${buttonGroupClasses.grouped}`]:s[`grouped${capitalize$1(d.variant)}${capitalize$1(d.orientation)}`]},{[`& .${buttonGroupClasses.grouped}`]:s[`grouped${capitalize$1(d.variant)}${capitalize$1(d.color)}`]},{[`& .${buttonGroupClasses.firstButton}`]:s.firstButton},{[`& .${buttonGroupClasses.lastButton}`]:s.lastButton},{[`& .${buttonGroupClasses.middleButton}`]:s.middleButton},s.root,s[d.variant],d.disableElevation===!0&&s.disableElevation,d.fullWidth&&s.fullWidth,d.orientation==="vertical"&&s.vertical]},useUtilityClasses$4=f=>{const{classes:s,color:d,disabled:_,disableElevation:S,fullWidth:T,orientation:F,variant:M}=f,P={root:["root",M,F==="vertical"&&"vertical",T&&"fullWidth",S&&"disableElevation"],grouped:["grouped",`grouped${capitalize$1(F)}`,`grouped${capitalize$1(M)}`,`grouped${capitalize$1(M)}${capitalize$1(F)}`,`grouped${capitalize$1(M)}${capitalize$1(d)}`,_&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return composeClasses(P,getButtonGroupUtilityClass,s)},ButtonGroupRoot=styled("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver})(({theme:f,ownerState:s})=>_extends$a({display:"inline-flex",borderRadius:(f.vars||f).shape.borderRadius},s.variant==="contained"&&{boxShadow:(f.vars||f).shadows[2]},s.disableElevation&&{boxShadow:"none"},s.fullWidth&&{width:"100%"},s.orientation==="vertical"&&{flexDirection:"column"},{[`& .${buttonGroupClasses.grouped}`]:_extends$a({minWidth:40,"&:hover":_extends$a({},s.variant==="contained"&&{boxShadow:"none"})},s.variant==="contained"&&{boxShadow:"none"}),[`& .${buttonGroupClasses.firstButton},& .${buttonGroupClasses.middleButton}`]:_extends$a({},s.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},s.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},s.variant==="text"&&s.orientation==="horizontal"&&{borderRight:f.vars?`1px solid rgba(${f.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${f.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${buttonGroupClasses.disabled}`]:{borderRight:`1px solid ${(f.vars||f).palette.action.disabled}`}},s.variant==="text"&&s.orientation==="vertical"&&{borderBottom:f.vars?`1px solid rgba(${f.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${f.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${buttonGroupClasses.disabled}`]:{borderBottom:`1px solid ${(f.vars||f).palette.action.disabled}`}},s.variant==="text"&&s.color!=="inherit"&&{borderColor:f.vars?`rgba(${f.vars.palette[s.color].mainChannel} / 0.5)`:alpha_1(f.palette[s.color].main,.5)},s.variant==="outlined"&&s.orientation==="horizontal"&&{borderRightColor:"transparent"},s.variant==="outlined"&&s.orientation==="vertical"&&{borderBottomColor:"transparent"},s.variant==="contained"&&s.orientation==="horizontal"&&{borderRight:`1px solid ${(f.vars||f).palette.grey[400]}`,[`&.${buttonGroupClasses.disabled}`]:{borderRight:`1px solid ${(f.vars||f).palette.action.disabled}`}},s.variant==="contained"&&s.orientation==="vertical"&&{borderBottom:`1px solid ${(f.vars||f).palette.grey[400]}`,[`&.${buttonGroupClasses.disabled}`]:{borderBottom:`1px solid ${(f.vars||f).palette.action.disabled}`}},s.variant==="contained"&&s.color!=="inherit"&&{borderColor:(f.vars||f).palette[s.color].dark},{"&:hover":_extends$a({},s.variant==="outlined"&&s.orientation==="horizontal"&&{borderRightColor:"currentColor"},s.variant==="outlined"&&s.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${buttonGroupClasses.lastButton},& .${buttonGroupClasses.middleButton}`]:_extends$a({},s.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},s.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},s.variant==="outlined"&&s.orientation==="horizontal"&&{marginLeft:-1},s.variant==="outlined"&&s.orientation==="vertical"&&{marginTop:-1})})),ButtonGroup=reactExports.forwardRef(function f(s,d){const _=useDefaultProps({props:s,name:"MuiButtonGroup"}),{children:S,className:T,color:F="primary",component:M="div",disabled:P=!1,disableElevation:H=!1,disableFocusRipple:J=!1,disableRipple:K=!1,fullWidth:z=!1,orientation:oe="horizontal",size:se="medium",variant:ae="outlined"}=_,ge=_objectWithoutPropertiesLoose$1(_,_excluded$5),pe=_extends$a({},_,{color:F,component:M,disabled:P,disableElevation:H,disableFocusRipple:J,disableRipple:K,fullWidth:z,orientation:oe,size:se,variant:ae}),he=useUtilityClasses$4(pe),ve=reactExports.useMemo(()=>({className:he.grouped,color:F,disabled:P,disableElevation:H,disableFocusRipple:J,disableRipple:K,fullWidth:z,size:se,variant:ae}),[F,P,H,J,K,z,se,ae,he.grouped]),be=getValidReactChildren(S),Re=be.length,Fe=ye=>{const Ue=ye===0,It=ye===Re-1;return Ue&&It?"":Ue?he.firstButton:It?he.lastButton:he.middleButton};return jsxRuntimeExports.jsx(ButtonGroupRoot,_extends$a({as:M,role:"group",className:clsx(he.root,T),ref:d,ownerState:pe},ge,{children:jsxRuntimeExports.jsx(ButtonGroupContext.Provider,{value:ve,children:be.map((ye,Ue)=>jsxRuntimeExports.jsx(ButtonGroupButtonContext.Provider,{value:Fe(Ue),children:ye},Ue))})}))});function getSwitchBaseUtilityClass(f){return generateUtilityClass("PrivateSwitchBase",f)}generateUtilityClasses("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const _excluded$4=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],useUtilityClasses$3=f=>{const{classes:s,checked:d,disabled:_,edge:S}=f,T={root:["root",d&&"checked",_&&"disabled",S&&`edge${capitalize$1(S)}`],input:["input"]};return composeClasses(T,getSwitchBaseUtilityClass,s)},SwitchBaseRoot=styled(ButtonBase)(({ownerState:f})=>_extends$a({padding:9,borderRadius:"50%"},f.edge==="start"&&{marginLeft:f.size==="small"?-3:-12},f.edge==="end"&&{marginRight:f.size==="small"?-3:-12})),SwitchBaseInput=styled("input",{shouldForwardProp:rootShouldForwardProp})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),SwitchBase=reactExports.forwardRef(function f(s,d){const{autoFocus:_,checked:S,checkedIcon:T,className:F,defaultChecked:M,disabled:P,disableFocusRipple:H=!1,edge:J=!1,icon:K,id:z,inputProps:oe,inputRef:se,name:ae,onBlur:ge,onChange:pe,onFocus:he,readOnly:ve,required:be=!1,tabIndex:Re,type:Fe,value:ye}=s,Ue=_objectWithoutPropertiesLoose$1(s,_excluded$4),[It,St]=useControlled({controlled:S,default:!!M,name:"SwitchBase",state:"checked"}),At=useFormControl(),xt=qn=>{he&&he(qn),At&&At.onFocus&&At.onFocus(qn)},Ct=qn=>{ge&&ge(qn),At&&At.onBlur&&At.onBlur(qn)},Nt=qn=>{if(qn.nativeEvent.defaultPrevented)return;const vA=qn.target.checked;St(vA),pe&&pe(qn,vA)};let qt=P;At&&typeof qt>"u"&&(qt=At.disabled);const Jn=Fe==="checkbox"||Fe==="radio",qr=_extends$a({},s,{checked:It,disabled:qt,disableFocusRipple:H,edge:J}),na=useUtilityClasses$3(qr);return jsxRuntimeExports.jsxs(SwitchBaseRoot,_extends$a({component:"span",className:clsx(na.root,F),centerRipple:!0,focusRipple:!H,disabled:qt,tabIndex:null,role:void 0,onFocus:xt,onBlur:Ct,ownerState:qr,ref:d},Ue,{children:[jsxRuntimeExports.jsx(SwitchBaseInput,_extends$a({autoFocus:_,checked:S,defaultChecked:M,className:na.input,disabled:qt,id:Jn?z:void 0,name:ae,onChange:Nt,readOnly:ve,ref:se,required:be,ownerState:qr,tabIndex:Re,type:Fe},Fe==="checkbox"&&ye===void 0?{}:{value:ye},oe)),It?T:K]}))}),CheckBoxOutlineBlankIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),CheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),IndeterminateCheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function getCheckboxUtilityClass(f){return generateUtilityClass("MuiCheckbox",f)}const checkboxClasses=generateUtilityClasses("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),_excluded$3=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],useUtilityClasses$2=f=>{const{classes:s,indeterminate:d,color:_,size:S}=f,T={root:["root",d&&"indeterminate",`color${capitalize$1(_)}`,`size${capitalize$1(S)}`]},F=composeClasses(T,getCheckboxUtilityClass,s);return _extends$a({},s,F)},CheckboxRoot=styled(SwitchBase,{shouldForwardProp:f=>rootShouldForwardProp(f)||f==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(f,s)=>{const{ownerState:d}=f;return[s.root,d.indeterminate&&s.indeterminate,s[`size${capitalize$1(d.size)}`],d.color!=="default"&&s[`color${capitalize$1(d.color)}`]]}})(({theme:f,ownerState:s})=>_extends$a({color:(f.vars||f).palette.text.secondary},!s.disableRipple&&{"&:hover":{backgroundColor:f.vars?`rgba(${s.color==="default"?f.vars.palette.action.activeChannel:f.vars.palette[s.color].mainChannel} / ${f.vars.palette.action.hoverOpacity})`:alpha_1(s.color==="default"?f.palette.action.active:f.palette[s.color].main,f.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},s.color!=="default"&&{[`&.${checkboxClasses.checked}, &.${checkboxClasses.indeterminate}`]:{color:(f.vars||f).palette[s.color].main},[`&.${checkboxClasses.disabled}`]:{color:(f.vars||f).palette.action.disabled}})),defaultCheckedIcon=jsxRuntimeExports.jsx(CheckBoxIcon,{}),defaultIcon=jsxRuntimeExports.jsx(CheckBoxOutlineBlankIcon,{}),defaultIndeterminateIcon=jsxRuntimeExports.jsx(IndeterminateCheckBoxIcon,{}),Checkbox=reactExports.forwardRef(function f(s,d){var _,S;const T=useDefaultProps({props:s,name:"MuiCheckbox"}),{checkedIcon:F=defaultCheckedIcon,color:M="primary",icon:P=defaultIcon,indeterminate:H=!1,indeterminateIcon:J=defaultIndeterminateIcon,inputProps:K,size:z="medium",className:oe}=T,se=_objectWithoutPropertiesLoose$1(T,_excluded$3),ae=H?J:P,ge=H?J:F,pe=_extends$a({},T,{color:M,indeterminate:H,size:z}),he=useUtilityClasses$2(pe);return jsxRuntimeExports.jsx(CheckboxRoot,_extends$a({type:"checkbox",inputProps:_extends$a({"data-indeterminate":H},K),icon:reactExports.cloneElement(ae,{fontSize:(_=ae.props.fontSize)!=null?_:z}),checkedIcon:reactExports.cloneElement(ge,{fontSize:(S=ge.props.fontSize)!=null?S:z}),ownerState:pe,ref:d,className:clsx(he.root,oe)},se,{classes:he}))});function areArraysEqual(f,s,d=(_,S)=>_===S){return f.length===s.length&&f.every((_,S)=>d(_,s[S]))}const INTENTIONAL_DRAG_COUNT_THRESHOLD=2;function asc(f,s){return f-s}function findClosest(f,s){var d;const{index:_}=(d=f.reduce((S,T,F)=>{const M=Math.abs(s-T);return S===null||M<S.distance||M===S.distance?{distance:M,index:F}:S},null))!=null?d:{};return _}function trackFinger(f,s){if(s.current!==void 0&&f.changedTouches){const d=f;for(let _=0;_<d.changedTouches.length;_+=1){const S=d.changedTouches[_];if(S.identifier===s.current)return{x:S.clientX,y:S.clientY}}return!1}return{x:f.clientX,y:f.clientY}}function valueToPercent(f,s,d){return(f-s)*100/(d-s)}function percentToValue(f,s,d){return(d-s)*f+s}function getDecimalPrecision(f){if(Math.abs(f)<1){const d=f.toExponential().split("e-"),_=d[0].split(".")[1];return(_?_.length:0)+parseInt(d[1],10)}const s=f.toString().split(".")[1];return s?s.length:0}function roundValueToStep(f,s,d){const _=Math.round((f-d)/s)*s+d;return Number(_.toFixed(getDecimalPrecision(s)))}function setValueIndex({values:f,newValue:s,index:d}){const _=f.slice();return _[d]=s,_.sort(asc)}function focusThumb({sliderRef:f,activeIndex:s,setActive:d}){var _,S;const T=ownerDocument(f.current);if(!((_=f.current)!=null&&_.contains(T.activeElement))||Number(T==null||(S=T.activeElement)==null?void 0:S.getAttribute("data-index"))!==s){var F;(F=f.current)==null||F.querySelector(`[type="range"][data-index="${s}"]`).focus()}d&&d(s)}function areValuesEqual(f,s){return typeof f=="number"&&typeof s=="number"?f===s:typeof f=="object"&&typeof s=="object"?areArraysEqual(f,s):!1}const axisProps={horizontal:{offset:f=>({left:`${f}%`}),leap:f=>({width:`${f}%`})},"horizontal-reverse":{offset:f=>({right:`${f}%`}),leap:f=>({width:`${f}%`})},vertical:{offset:f=>({bottom:`${f}%`}),leap:f=>({height:`${f}%`})}},Identity$1=f=>f;let cachedSupportsTouchActionNone;function doesSupportTouchActionNone(){return cachedSupportsTouchActionNone===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?cachedSupportsTouchActionNone=CSS.supports("touch-action","none"):cachedSupportsTouchActionNone=!0),cachedSupportsTouchActionNone}function useSlider(f){const{"aria-labelledby":s,defaultValue:d,disabled:_=!1,disableSwap:S=!1,isRtl:T=!1,marks:F=!1,max:M=100,min:P=0,name:H,onChange:J,onChangeCommitted:K,orientation:z="horizontal",rootRef:oe,scale:se=Identity$1,step:ae=1,shiftStep:ge=10,tabIndex:pe,value:he}=f,ve=reactExports.useRef(),[be,Re]=reactExports.useState(-1),[Fe,ye]=reactExports.useState(-1),[Ue,It]=reactExports.useState(!1),St=reactExports.useRef(0),[At,xt]=useControlled({controlled:he,default:d??P,name:"Slider"}),Ct=J&&((da,dA,RA)=>{const pI=da.nativeEvent||da,vI=new pI.constructor(pI.type,pI);Object.defineProperty(vI,"target",{writable:!0,value:{value:dA,name:H}}),J(vI,dA,RA)}),Nt=Array.isArray(At);let qt=Nt?At.slice().sort(asc):[At];qt=qt.map(da=>da==null?P:clamp$4(da,P,M));const Jn=F===!0&&ae!==null?[...Array(Math.floor((M-P)/ae)+1)].map((da,dA)=>({value:P+ae*dA})):F||[],qr=Jn.map(da=>da.value),{isFocusVisibleRef:na,onBlur:qn,onFocus:vA,ref:TA}=useIsFocusVisible(),[VA,mI]=reactExports.useState(-1),jA=reactExports.useRef(),aI=useForkRef(TA,jA),WA=useForkRef(oe,aI),KA=da=>dA=>{var RA;const pI=Number(dA.currentTarget.getAttribute("data-index"));vA(dA),na.current===!0&&mI(pI),ye(pI),da==null||(RA=da.onFocus)==null||RA.call(da,dA)},rA=da=>dA=>{var RA;qn(dA),na.current===!1&&mI(-1),ye(-1),da==null||(RA=da.onBlur)==null||RA.call(da,dA)},ta=(da,dA)=>{const RA=Number(da.currentTarget.getAttribute("data-index")),pI=qt[RA],vI=qr.indexOf(pI);let EI=dA;if(Jn&&ae==null){const zI=qr[qr.length-1];EI>zI?EI=zI:EI<qr[0]?EI=qr[0]:EI=EI<pI?qr[vI-1]:qr[vI+1]}if(EI=clamp$4(EI,P,M),Nt){S&&(EI=clamp$4(EI,qt[RA-1]||-1/0,qt[RA+1]||1/0));const zI=EI;EI=setValueIndex({values:qt,newValue:EI,index:RA});let FI=RA;S||(FI=EI.indexOf(zI)),focusThumb({sliderRef:jA,activeIndex:FI})}xt(EI),mI(RA),Ct&&!areValuesEqual(EI,At)&&Ct(da,EI,RA),K&&K(da,EI)},fa=da=>dA=>{var RA;if(ae!==null){const pI=Number(dA.currentTarget.getAttribute("data-index")),vI=qt[pI];let EI=null;(dA.key==="ArrowLeft"||dA.key==="ArrowDown")&&dA.shiftKey||dA.key==="PageDown"?EI=Math.max(vI-ge,P):((dA.key==="ArrowRight"||dA.key==="ArrowUp")&&dA.shiftKey||dA.key==="PageUp")&&(EI=Math.min(vI+ge,M)),EI!==null&&(ta(dA,EI),dA.preventDefault())}da==null||(RA=da.onKeyDown)==null||RA.call(da,dA)};useEnhancedEffect(()=>{if(_&&jA.current.contains(document.activeElement)){var da;(da=document.activeElement)==null||da.blur()}},[_]),_&&be!==-1&&Re(-1),_&&VA!==-1&&mI(-1);const yA=da=>dA=>{var RA;(RA=da.onChange)==null||RA.call(da,dA),ta(dA,dA.target.valueAsNumber)},_A=reactExports.useRef();let la=z;T&&z==="horizontal"&&(la+="-reverse");const AA=({finger:da,move:dA=!1})=>{const{current:RA}=jA,{width:pI,height:vI,bottom:EI,left:zI}=RA.getBoundingClientRect();let FI;la.indexOf("vertical")===0?FI=(EI-da.y)/vI:FI=(da.x-zI)/pI,la.indexOf("-reverse")!==-1&&(FI=1-FI);let DI;if(DI=percentToValue(FI,P,M),ae)DI=roundValueToStep(DI,ae,P);else{const IC=findClosest(qr,DI);DI=qr[IC]}DI=clamp$4(DI,P,M);let ZI=0;if(Nt){dA?ZI=_A.current:ZI=findClosest(qt,DI),S&&(DI=clamp$4(DI,qt[ZI-1]||-1/0,qt[ZI+1]||1/0));const IC=DI;DI=setValueIndex({values:qt,newValue:DI,index:ZI}),S&&dA||(ZI=DI.indexOf(IC),_A.current=ZI)}return{newValue:DI,activeIndex:ZI}},tA=useEventCallback(da=>{const dA=trackFinger(da,ve);if(!dA)return;if(St.current+=1,da.type==="mousemove"&&da.buttons===0){ba(da);return}const{newValue:RA,activeIndex:pI}=AA({finger:dA,move:!0});focusThumb({sliderRef:jA,activeIndex:pI,setActive:Re}),xt(RA),!Ue&&St.current>INTENTIONAL_DRAG_COUNT_THRESHOLD&&It(!0),Ct&&!areValuesEqual(RA,At)&&Ct(da,RA,pI)}),ba=useEventCallback(da=>{const dA=trackFinger(da,ve);if(It(!1),!dA)return;const{newValue:RA}=AA({finger:dA,move:!0});Re(-1),da.type==="touchend"&&ye(-1),K&&K(da,RA),ve.current=void 0,lA()}),iA=useEventCallback(da=>{if(_)return;doesSupportTouchActionNone()||da.preventDefault();const dA=da.changedTouches[0];dA!=null&&(ve.current=dA.identifier);const RA=trackFinger(da,ve);if(RA!==!1){const{newValue:vI,activeIndex:EI}=AA({finger:RA});focusThumb({sliderRef:jA,activeIndex:EI,setActive:Re}),xt(vI),Ct&&!areValuesEqual(vI,At)&&Ct(da,vI,EI)}St.current=0;const pI=ownerDocument(jA.current);pI.addEventListener("touchmove",tA,{passive:!0}),pI.addEventListener("touchend",ba,{passive:!0})}),lA=reactExports.useCallback(()=>{const da=ownerDocument(jA.current);da.removeEventListener("mousemove",tA),da.removeEventListener("mouseup",ba),da.removeEventListener("touchmove",tA),da.removeEventListener("touchend",ba)},[ba,tA]);reactExports.useEffect(()=>{const{current:da}=jA;return da.addEventListener("touchstart",iA,{passive:doesSupportTouchActionNone()}),()=>{da.removeEventListener("touchstart",iA),lA()}},[lA,iA]),reactExports.useEffect(()=>{_&&lA()},[_,lA]);const yI=da=>dA=>{var RA;if((RA=da.onMouseDown)==null||RA.call(da,dA),_||dA.defaultPrevented||dA.button!==0)return;dA.preventDefault();const pI=trackFinger(dA,ve);if(pI!==!1){const{newValue:EI,activeIndex:zI}=AA({finger:pI});focusThumb({sliderRef:jA,activeIndex:zI,setActive:Re}),xt(EI),Ct&&!areValuesEqual(EI,At)&&Ct(dA,EI,zI)}St.current=0;const vI=ownerDocument(jA.current);vI.addEventListener("mousemove",tA,{passive:!0}),vI.addEventListener("mouseup",ba)},rI=valueToPercent(Nt?qt[0]:P,P,M),BI=valueToPercent(qt[qt.length-1],P,M)-rI,NI=(da={})=>{const dA=extractEventHandlers(da),RA={onMouseDown:yI(dA||{})},pI=_extends$a({},dA,RA);return _extends$a({},da,{ref:WA},pI)},Rt=da=>dA=>{var RA;(RA=da.onMouseOver)==null||RA.call(da,dA);const pI=Number(dA.currentTarget.getAttribute("data-index"));ye(pI)},QA=da=>dA=>{var RA;(RA=da.onMouseLeave)==null||RA.call(da,dA),ye(-1)};return{active:be,axis:la,axisProps,dragging:Ue,focusedThumbIndex:VA,getHiddenInputProps:(da={})=>{var dA;const RA=extractEventHandlers(da),pI={onChange:yA(RA||{}),onFocus:KA(RA||{}),onBlur:rA(RA||{}),onKeyDown:fa(RA||{})},vI=_extends$a({},RA,pI);return _extends$a({tabIndex:pe,"aria-labelledby":s,"aria-orientation":z,"aria-valuemax":se(M),"aria-valuemin":se(P),name:H,type:"range",min:f.min,max:f.max,step:f.step===null&&f.marks?"any":(dA=f.step)!=null?dA:void 0,disabled:_},da,vI,{style:_extends$a({},visuallyHidden,{direction:T?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:NI,getThumbProps:(da={})=>{const dA=extractEventHandlers(da),RA={onMouseOver:Rt(dA||{}),onMouseLeave:QA(dA||{})};return _extends$a({},da,dA,RA)},marks:Jn,open:Fe,range:Nt,rootRef:WA,trackLeap:BI,trackOffset:rI,values:qt,getThumbStyle:da=>({pointerEvents:be!==-1&&be!==da?"none":void 0})}}const shouldSpreadAdditionalProps=f=>!f||!isHostComponent(f);function getSliderUtilityClass(f){return generateUtilityClass("MuiSlider",f)}const sliderClasses=generateUtilityClasses("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),useValueLabelClasses=f=>{const{open:s}=f;return{offset:clsx(s&&sliderClasses.valueLabelOpen),circle:sliderClasses.valueLabelCircle,label:sliderClasses.valueLabelLabel}};function SliderValueLabel$1(f){const{children:s,className:d,value:_}=f,S=useValueLabelClasses(f);return s?reactExports.cloneElement(s,{className:clsx(s.props.className)},jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[s.props.children,jsxRuntimeExports.jsx("span",{className:clsx(S.offset,d),"aria-hidden":!0,children:jsxRuntimeExports.jsx("span",{className:S.circle,children:jsxRuntimeExports.jsx("span",{className:S.label,children:_})})})]})):null}const _excluded$2=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function Identity(f){return f}const SliderRoot=styled("span",{name:"MuiSlider",slot:"Root",overridesResolver:(f,s)=>{const{ownerState:d}=f;return[s.root,s[`color${capitalize$1(d.color)}`],d.size!=="medium"&&s[`size${capitalize$1(d.size)}`],d.marked&&s.marked,d.orientation==="vertical"&&s.vertical,d.track==="inverted"&&s.trackInverted,d.track===!1&&s.trackFalse]}})(({theme:f})=>{var s;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${sliderClasses.disabled}`]:{pointerEvents:"none",cursor:"default",color:(f.vars||f).palette.grey[400]},[`&.${sliderClasses.dragging}`]:{[`& .${sliderClasses.thumb}, & .${sliderClasses.track}`]:{transition:"none"}},variants:[...Object.keys(((s=f.vars)!=null?s:f).palette).filter(d=>{var _;return((_=f.vars)!=null?_:f).palette[d].main}).map(d=>({props:{color:d},style:{color:(f.vars||f).palette[d].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}}),SliderRail=styled("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(f,s)=>s.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),SliderTrack=styled("span",{name:"MuiSlider",slot:"Track",overridesResolver:(f,s)=>s.track})(({theme:f})=>{var s;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:f.transitions.create(["left","width","bottom","height"],{duration:f.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys(((s=f.vars)!=null?s:f).palette).filter(d=>{var _;return((_=f.vars)!=null?_:f).palette[d].main}).map(d=>({props:{color:d,track:"inverted"},style:_extends$a({},f.vars?{backgroundColor:f.vars.palette.Slider[`${d}Track`],borderColor:f.vars.palette.Slider[`${d}Track`]}:_extends$a({backgroundColor:lighten_1(f.palette[d].main,.62),borderColor:lighten_1(f.palette[d].main,.62)},f.applyStyles("dark",{backgroundColor:darken_1(f.palette[d].main,.5)}),f.applyStyles("dark",{borderColor:darken_1(f.palette[d].main,.5)})))}))]}}),SliderThumb=styled("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(f,s)=>{const{ownerState:d}=f;return[s.thumb,s[`thumbColor${capitalize$1(d.color)}`],d.size!=="medium"&&s[`thumbSize${capitalize$1(d.size)}`]]}})(({theme:f})=>{var s;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:f.transitions.create(["box-shadow","left","bottom"],{duration:f.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(f.vars||f).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${sliderClasses.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys(((s=f.vars)!=null?s:f).palette).filter(d=>{var _;return((_=f.vars)!=null?_:f).palette[d].main}).map(d=>({props:{color:d},style:{[`&:hover, &.${sliderClasses.focusVisible}`]:_extends$a({},f.vars?{boxShadow:`0px 0px 0px 8px rgba(${f.vars.palette[d].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${alpha_1(f.palette[d].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${sliderClasses.active}`]:_extends$a({},f.vars?{boxShadow:`0px 0px 0px 14px rgba(${f.vars.palette[d].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${alpha_1(f.palette[d].main,.16)}`})}}))]}}),SliderValueLabel=styled(SliderValueLabel$1,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(f,s)=>s.valueLabel})(({theme:f})=>_extends$a({zIndex:1,whiteSpace:"nowrap"},f.typography.body2,{fontWeight:500,transition:f.transitions.create(["transform"],{duration:f.transitions.duration.shortest}),position:"absolute",backgroundColor:(f.vars||f).palette.grey[600],borderRadius:2,color:(f.vars||f).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${sliderClasses.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${sliderClasses.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:f.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})),SliderMark=styled("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:f=>slotShouldForwardProp(f)&&f!=="markActive",overridesResolver:(f,s)=>{const{markActive:d}=f;return[s.mark,d&&s.markActive]}})(({theme:f})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(f.vars||f).palette.background.paper,opacity:.8}}]})),SliderMarkLabel=styled("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:f=>slotShouldForwardProp(f)&&f!=="markLabelActive",overridesResolver:(f,s)=>s.markLabel})(({theme:f})=>_extends$a({},f.typography.body2,{color:(f.vars||f).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(f.vars||f).palette.text.primary}}]})),useUtilityClasses$1=f=>{const{disabled:s,dragging:d,marked:_,orientation:S,track:T,classes:F,color:M,size:P}=f,H={root:["root",s&&"disabled",d&&"dragging",_&&"marked",S==="vertical"&&"vertical",T==="inverted"&&"trackInverted",T===!1&&"trackFalse",M&&`color${capitalize$1(M)}`,P&&`size${capitalize$1(P)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",s&&"disabled",P&&`thumbSize${capitalize$1(P)}`,M&&`thumbColor${capitalize$1(M)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return composeClasses(H,getSliderUtilityClass,F)},Forward=({children:f})=>f,Slider=reactExports.forwardRef(function f(s,d){var _,S,T,F,M,P,H,J,K,z,oe,se,ae,ge,pe,he,ve,be,Re,Fe,ye,Ue,It,St;const At=useDefaultProps({props:s,name:"MuiSlider"}),xt=useRtl(),{"aria-label":Ct,"aria-valuetext":Nt,"aria-labelledby":qt,component:Jn="span",components:qr={},componentsProps:na={},color:qn="primary",classes:vA,className:TA,disableSwap:VA=!1,disabled:mI=!1,getAriaLabel:jA,getAriaValueText:aI,marks:WA=!1,max:KA=100,min:rA=0,orientation:ta="horizontal",shiftStep:fa=10,size:yA="medium",step:_A=1,scale:la=Identity,slotProps:AA,slots:tA,track:ba="normal",valueLabelDisplay:iA="off",valueLabelFormat:lA=Identity}=At,yI=_objectWithoutPropertiesLoose$1(At,_excluded$2),rI=_extends$a({},At,{isRtl:xt,max:KA,min:rA,classes:vA,disabled:mI,disableSwap:VA,orientation:ta,marks:WA,color:qn,size:yA,step:_A,shiftStep:fa,scale:la,track:ba,valueLabelDisplay:iA,valueLabelFormat:lA}),{axisProps:BI,getRootProps:NI,getHiddenInputProps:Rt,getThumbProps:QA,open:cA,active:gI,axis:LI,focusedThumbIndex:da,range:dA,dragging:RA,marks:pI,values:vI,trackOffset:EI,trackLeap:zI,getThumbStyle:FI}=useSlider(_extends$a({},rI,{rootRef:d}));rI.marked=pI.length>0&&pI.some(Ut=>Ut.label),rI.dragging=RA,rI.focusedThumbIndex=da;const DI=useUtilityClasses$1(rI),ZI=(_=(S=tA==null?void 0:tA.root)!=null?S:qr.Root)!=null?_:SliderRoot,IC=(T=(F=tA==null?void 0:tA.rail)!=null?F:qr.Rail)!=null?T:SliderRail,mC=(M=(P=tA==null?void 0:tA.track)!=null?P:qr.Track)!=null?M:SliderTrack,BC=(H=(J=tA==null?void 0:tA.thumb)!=null?J:qr.Thumb)!=null?H:SliderThumb,yC=(K=(z=tA==null?void 0:tA.valueLabel)!=null?z:qr.ValueLabel)!=null?K:SliderValueLabel,vC=(oe=(se=tA==null?void 0:tA.mark)!=null?se:qr.Mark)!=null?oe:SliderMark,_C=(ae=(ge=tA==null?void 0:tA.markLabel)!=null?ge:qr.MarkLabel)!=null?ae:SliderMarkLabel,RC=(pe=(he=tA==null?void 0:tA.input)!=null?he:qr.Input)!=null?pe:"input",Xt=(ve=AA==null?void 0:AA.root)!=null?ve:na.root,zn=(be=AA==null?void 0:AA.rail)!=null?be:na.rail,oa=(Re=AA==null?void 0:AA.track)!=null?Re:na.track,MA=(Fe=AA==null?void 0:AA.thumb)!=null?Fe:na.thumb,YA=(ye=AA==null?void 0:AA.valueLabel)!=null?ye:na.valueLabel,PA=(Ue=AA==null?void 0:AA.mark)!=null?Ue:na.mark,iI=(It=AA==null?void 0:AA.markLabel)!=null?It:na.markLabel,XA=(St=AA==null?void 0:AA.input)!=null?St:na.input,$I=useSlotProps({elementType:ZI,getSlotProps:NI,externalSlotProps:Xt,externalForwardedProps:yI,additionalProps:_extends$a({},shouldSpreadAdditionalProps(ZI)&&{as:Jn}),ownerState:_extends$a({},rI,Xt==null?void 0:Xt.ownerState),className:[DI.root,TA]}),GI=useSlotProps({elementType:IC,externalSlotProps:zn,ownerState:rI,className:DI.rail}),sC=useSlotProps({elementType:mC,externalSlotProps:oa,additionalProps:{style:_extends$a({},BI[LI].offset(EI),BI[LI].leap(zI))},ownerState:_extends$a({},rI,oa==null?void 0:oa.ownerState),className:DI.track}),eC=useSlotProps({elementType:BC,getSlotProps:QA,externalSlotProps:MA,ownerState:_extends$a({},rI,MA==null?void 0:MA.ownerState),className:DI.thumb}),KI=useSlotProps({elementType:yC,externalSlotProps:YA,ownerState:_extends$a({},rI,YA==null?void 0:YA.ownerState),className:DI.valueLabel}),Yt=useSlotProps({elementType:vC,externalSlotProps:PA,ownerState:rI,className:DI.mark}),Dn=useSlotProps({elementType:_C,externalSlotProps:iI,ownerState:rI,className:DI.markLabel}),Kn=useSlotProps({elementType:RC,getSlotProps:Rt,externalSlotProps:XA,ownerState:rI});return jsxRuntimeExports.jsxs(ZI,_extends$a({},$I,{children:[jsxRuntimeExports.jsx(IC,_extends$a({},GI)),jsxRuntimeExports.jsx(mC,_extends$a({},sC)),pI.filter(Ut=>Ut.value>=rA&&Ut.value<=KA).map((Ut,Wt)=>{const ua=valueToPercent(Ut.value,rA,KA),uA=BI[LI].offset(ua);let EA;return ba===!1?EA=vI.indexOf(Ut.value)!==-1:EA=ba==="normal"&&(dA?Ut.value>=vI[0]&&Ut.value<=vI[vI.length-1]:Ut.value<=vI[0])||ba==="inverted"&&(dA?Ut.value<=vI[0]||Ut.value>=vI[vI.length-1]:Ut.value>=vI[0]),jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(vC,_extends$a({"data-index":Wt},Yt,!isHostComponent(vC)&&{markActive:EA},{style:_extends$a({},uA,Yt.style),className:clsx(Yt.className,EA&&DI.markActive)})),Ut.label!=null?jsxRuntimeExports.jsx(_C,_extends$a({"aria-hidden":!0,"data-index":Wt},Dn,!isHostComponent(_C)&&{markLabelActive:EA},{style:_extends$a({},uA,Dn.style),className:clsx(DI.markLabel,Dn.className,EA&&DI.markLabelActive),children:Ut.label})):null]},Wt)}),vI.map((Ut,Wt)=>{const ua=valueToPercent(Ut,rA,KA),uA=BI[LI].offset(ua),EA=iA==="off"?Forward:yC;return jsxRuntimeExports.jsx(EA,_extends$a({},!isHostComponent(EA)&&{valueLabelFormat:lA,valueLabelDisplay:iA,value:typeof lA=="function"?lA(la(Ut),Wt):lA,index:Wt,open:cA===Wt||gI===Wt||iA==="on",disabled:mI},KI,{children:jsxRuntimeExports.jsx(BC,_extends$a({"data-index":Wt},eC,{className:clsx(DI.thumb,eC.className,gI===Wt&&DI.active,da===Wt&&DI.focusVisible),style:_extends$a({},uA,FI(Wt),eC.style),children:jsxRuntimeExports.jsx(RC,_extends$a({"data-index":Wt,"aria-label":jA?jA(Wt):Ct,"aria-valuenow":la(Ut),"aria-labelledby":qt,"aria-valuetext":aI?aI(la(Ut),Wt):Nt,value:vI[Wt]},Kn))}))}),Wt)})]}))});function getTooltipUtilityClass(f){return generateUtilityClass("MuiTooltip",f)}const tooltipClasses=generateUtilityClasses("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),_excluded$1=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function round$1(f){return Math.round(f*1e5)/1e5}const useUtilityClasses=f=>{const{classes:s,disableInteractive:d,arrow:_,touch:S,placement:T}=f,F={popper:["popper",!d&&"popperInteractive",_&&"popperArrow"],tooltip:["tooltip",_&&"tooltipArrow",S&&"touch",`tooltipPlacement${capitalize$1(T.split("-")[0])}`],arrow:["arrow"]};return composeClasses(F,getTooltipUtilityClass,s)},TooltipPopper=styled(Popper,{name:"MuiTooltip",slot:"Popper",overridesResolver:(f,s)=>{const{ownerState:d}=f;return[s.popper,!d.disableInteractive&&s.popperInteractive,d.arrow&&s.popperArrow,!d.open&&s.popperClose]}})(({theme:f,ownerState:s,open:d})=>_extends$a({zIndex:(f.vars||f).zIndex.tooltip,pointerEvents:"none"},!s.disableInteractive&&{pointerEvents:"auto"},!d&&{pointerEvents:"none"},s.arrow&&{[`&[data-popper-placement*="bottom"] .${tooltipClasses.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${tooltipClasses.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:_extends$a({},s.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:_extends$a({},s.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),TooltipTooltip=styled("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(f,s)=>{const{ownerState:d}=f;return[s.tooltip,d.touch&&s.touch,d.arrow&&s.tooltipArrow,s[`tooltipPlacement${capitalize$1(d.placement.split("-")[0])}`]]}})(({theme:f,ownerState:s})=>_extends$a({backgroundColor:f.vars?f.vars.palette.Tooltip.bg:alpha_1(f.palette.grey[700],.92),borderRadius:(f.vars||f).shape.borderRadius,color:(f.vars||f).palette.common.white,fontFamily:f.typography.fontFamily,padding:"4px 8px",fontSize:f.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:f.typography.fontWeightMedium},s.arrow&&{position:"relative",margin:0},s.touch&&{padding:"8px 16px",fontSize:f.typography.pxToRem(14),lineHeight:`${round$1(16/14)}em`,fontWeight:f.typography.fontWeightRegular},{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:_extends$a({transformOrigin:"right center"},s.isRtl?_extends$a({marginLeft:"14px"},s.touch&&{marginLeft:"24px"}):_extends$a({marginRight:"14px"},s.touch&&{marginRight:"24px"})),[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:_extends$a({transformOrigin:"left center"},s.isRtl?_extends$a({marginRight:"14px"},s.touch&&{marginRight:"24px"}):_extends$a({marginLeft:"14px"},s.touch&&{marginLeft:"24px"})),[`.${tooltipClasses.popper}[data-popper-placement*="top"] &`]:_extends$a({transformOrigin:"center bottom",marginBottom:"14px"},s.touch&&{marginBottom:"24px"}),[`.${tooltipClasses.popper}[data-popper-placement*="bottom"] &`]:_extends$a({transformOrigin:"center top",marginTop:"14px"},s.touch&&{marginTop:"24px"})})),TooltipArrow=styled("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(f,s)=>s.arrow})(({theme:f})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:f.vars?f.vars.palette.Tooltip.bg:alpha_1(f.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let hystersisOpen=!1;const hystersisTimer=new Timeout;let cursorPosition={x:0,y:0};function composeEventHandler(f,s){return(d,..._)=>{s&&s(d,..._),f(d,..._)}}const Tooltip$1=reactExports.forwardRef(function f(s,d){var _,S,T,F,M,P,H,J,K,z,oe,se,ae,ge,pe,he,ve,be,Re;const Fe=useDefaultProps({props:s,name:"MuiTooltip"}),{arrow:ye=!1,children:Ue,components:It={},componentsProps:St={},describeChild:At=!1,disableFocusListener:xt=!1,disableHoverListener:Ct=!1,disableInteractive:Nt=!1,disableTouchListener:qt=!1,enterDelay:Jn=100,enterNextDelay:qr=0,enterTouchDelay:na=700,followCursor:qn=!1,id:vA,leaveDelay:TA=0,leaveTouchDelay:VA=1500,onClose:mI,onOpen:jA,open:aI,placement:WA="bottom",PopperComponent:KA,PopperProps:rA={},slotProps:ta={},slots:fa={},title:yA,TransitionComponent:_A=Grow,TransitionProps:la}=Fe,AA=_objectWithoutPropertiesLoose$1(Fe,_excluded$1),tA=reactExports.isValidElement(Ue)?Ue:jsxRuntimeExports.jsx("span",{children:Ue}),ba=useTheme$1(),iA=useRtl(),[lA,yI]=reactExports.useState(),[rI,BI]=reactExports.useState(null),NI=reactExports.useRef(!1),Rt=Nt||qn,QA=useTimeout(),cA=useTimeout(),gI=useTimeout(),LI=useTimeout(),[da,dA]=useControlled({controlled:aI,default:!1,name:"Tooltip",state:"open"});let RA=da;const pI=useId$1(vA),vI=reactExports.useRef(),EI=useEventCallback(()=>{vI.current!==void 0&&(document.body.style.WebkitUserSelect=vI.current,vI.current=void 0),LI.clear()});reactExports.useEffect(()=>EI,[EI]);const zI=bA=>{hystersisTimer.clear(),hystersisOpen=!0,dA(!0),jA&&!RA&&jA(bA)},FI=useEventCallback(bA=>{hystersisTimer.start(800+TA,()=>{hystersisOpen=!1}),dA(!1),mI&&RA&&mI(bA),QA.start(ba.transitions.duration.shortest,()=>{NI.current=!1})}),DI=bA=>{NI.current&&bA.type!=="touchstart"||(lA&&lA.removeAttribute("title"),cA.clear(),gI.clear(),Jn||hystersisOpen&&qr?cA.start(hystersisOpen?qr:Jn,()=>{zI(bA)}):zI(bA))},ZI=bA=>{cA.clear(),gI.start(TA,()=>{FI(bA)})},{isFocusVisibleRef:IC,onBlur:mC,onFocus:BC,ref:yC}=useIsFocusVisible(),[,vC]=reactExports.useState(!1),_C=bA=>{mC(bA),IC.current===!1&&(vC(!1),ZI(bA))},RC=bA=>{lA||yI(bA.currentTarget),BC(bA),IC.current===!0&&(vC(!0),DI(bA))},Xt=bA=>{NI.current=!0;const lI=tA.props;lI.onTouchStart&&lI.onTouchStart(bA)},zn=bA=>{Xt(bA),gI.clear(),QA.clear(),EI(),vI.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",LI.start(na,()=>{document.body.style.WebkitUserSelect=vI.current,DI(bA)})},oa=bA=>{tA.props.onTouchEnd&&tA.props.onTouchEnd(bA),EI(),gI.start(VA,()=>{FI(bA)})};reactExports.useEffect(()=>{if(!RA)return;function bA(lI){(lI.key==="Escape"||lI.key==="Esc")&&FI(lI)}return document.addEventListener("keydown",bA),()=>{document.removeEventListener("keydown",bA)}},[FI,RA]);const MA=useForkRef(tA.ref,yC,yI,d);!yA&&yA!==0&&(RA=!1);const YA=reactExports.useRef(),PA=bA=>{const lI=tA.props;lI.onMouseMove&&lI.onMouseMove(bA),cursorPosition={x:bA.clientX,y:bA.clientY},YA.current&&YA.current.update()},iI={},XA=typeof yA=="string";At?(iI.title=!RA&&XA&&!Ct?yA:null,iI["aria-describedby"]=RA?pI:null):(iI["aria-label"]=XA?yA:null,iI["aria-labelledby"]=RA&&!XA?pI:null);const $I=_extends$a({},iI,AA,tA.props,{className:clsx(AA.className,tA.props.className),onTouchStart:Xt,ref:MA},qn?{onMouseMove:PA}:{}),GI={};qt||($I.onTouchStart=zn,$I.onTouchEnd=oa),Ct||($I.onMouseOver=composeEventHandler(DI,$I.onMouseOver),$I.onMouseLeave=composeEventHandler(ZI,$I.onMouseLeave),Rt||(GI.onMouseOver=DI,GI.onMouseLeave=ZI)),xt||($I.onFocus=composeEventHandler(RC,$I.onFocus),$I.onBlur=composeEventHandler(_C,$I.onBlur),Rt||(GI.onFocus=RC,GI.onBlur=_C));const sC=reactExports.useMemo(()=>{var bA;let lI=[{name:"arrow",enabled:!!rI,options:{element:rI,padding:4}}];return(bA=rA.popperOptions)!=null&&bA.modifiers&&(lI=lI.concat(rA.popperOptions.modifiers)),_extends$a({},rA.popperOptions,{modifiers:lI})},[rI,rA]),eC=_extends$a({},Fe,{isRtl:iA,arrow:ye,disableInteractive:Rt,placement:WA,PopperComponentProp:KA,touch:NI.current}),KI=useUtilityClasses(eC),Yt=(_=(S=fa.popper)!=null?S:It.Popper)!=null?_:TooltipPopper,Dn=(T=(F=(M=fa.transition)!=null?M:It.Transition)!=null?F:_A)!=null?T:Grow,Kn=(P=(H=fa.tooltip)!=null?H:It.Tooltip)!=null?P:TooltipTooltip,Ut=(J=(K=fa.arrow)!=null?K:It.Arrow)!=null?J:TooltipArrow,Wt=appendOwnerState(Yt,_extends$a({},rA,(z=ta.popper)!=null?z:St.popper,{className:clsx(KI.popper,rA==null?void 0:rA.className,(oe=(se=ta.popper)!=null?se:St.popper)==null?void 0:oe.className)}),eC),ua=appendOwnerState(Dn,_extends$a({},la,(ae=ta.transition)!=null?ae:St.transition),eC),uA=appendOwnerState(Kn,_extends$a({},(ge=ta.tooltip)!=null?ge:St.tooltip,{className:clsx(KI.tooltip,(pe=(he=ta.tooltip)!=null?he:St.tooltip)==null?void 0:pe.className)}),eC),EA=appendOwnerState(Ut,_extends$a({},(ve=ta.arrow)!=null?ve:St.arrow,{className:clsx(KI.arrow,(be=(Re=ta.arrow)!=null?Re:St.arrow)==null?void 0:be.className)}),eC);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[reactExports.cloneElement(tA,$I),jsxRuntimeExports.jsx(Yt,_extends$a({as:KA??Popper,placement:WA,anchorEl:qn?{getBoundingClientRect:()=>({top:cursorPosition.y,left:cursorPosition.x,right:cursorPosition.x,bottom:cursorPosition.y,width:0,height:0})}:lA,popperRef:YA,open:lA?RA:!1,id:pI,transition:!0},GI,Wt,{popperOptions:sC,children:({TransitionProps:bA})=>jsxRuntimeExports.jsx(Dn,_extends$a({timeout:ba.transitions.duration.shorter},bA,ua,{children:jsxRuntimeExports.jsxs(Kn,_extends$a({},uA,{children:[yA,ye?jsxRuntimeExports.jsx(Ut,_extends$a({},EA,{ref:BI})):null]}))}))}))]})});var CheckBoxOutlineBlank={},_interopRequireDefault$c=interopRequireDefaultExports;Object.defineProperty(CheckBoxOutlineBlank,"__esModule",{value:!0});var default_1$c=CheckBoxOutlineBlank.default=void 0,_createSvgIcon$c=_interopRequireDefault$c(requireCreateSvgIcon()),_jsxRuntime$c=jsxRuntimeExports;default_1$c=CheckBoxOutlineBlank.default=(0,_createSvgIcon$c.default)((0,_jsxRuntime$c.jsx)("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"CheckBoxOutlineBlank");var CheckBox={},_interopRequireDefault$b=interopRequireDefaultExports;Object.defineProperty(CheckBox,"__esModule",{value:!0});var default_1$b=CheckBox.default=void 0,_createSvgIcon$b=_interopRequireDefault$b(requireCreateSvgIcon()),_jsxRuntime$b=jsxRuntimeExports;default_1$b=CheckBox.default=(0,_createSvgIcon$b.default)((0,_jsxRuntime$b.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckBox");const TextComponent$1=({props:f})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{children:f.label}),jsxRuntimeExports.jsx("input",{type:"text",value:f.current_value,onChange:action(s=>{f.current_value=s.target.value,f.func&&f.func(s.target.value)}),className:"w-full"})]}),TextBoxComponent=({props:f})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{children:f.label}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("textarea",{value:f.current_value,onChange:action(s=>{f.current_value=s.target.value,f.func&&f.func(s.target.value)}),className:"w-full col-span-2"})]}),SliderComponent=({props:f})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{children:f.label}),jsxRuntimeExports.jsx(Slider,{value:f.current_value,min:f.min||0,max:f.max||1,step:f.step||.01,onChange:action((s,d)=>{if(Array.isArray(d))throw"slider callback should have multiple values";f.current_value=d,f.func&&f.func(d)})})]}),SpinnerComponent=({props:f})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{children:f.label}),jsxRuntimeExports.jsx("input",{type:"number",value:f.current_value,min:f.min||0,max:f.max||null,step:f.step||1,onChange:action(s=>{const d=f.current_value=Number.parseInt(s.target.value);f.func&&f.func(d)})})]}),icon$2=jsxRuntimeExports.jsx(default_1$c,{fontSize:"small"}),checkedIcon$2=jsxRuntimeExports.jsx(default_1$b,{fontSize:"small"});function DropdownAutocompleteComponent({props:f}){const s=reactExports.useId(),d=f.type==="multidropdown",_=f.values.length===3,[S,T,F]=f.values,M=reactExports.useCallback(ve=>{const be=_?ve[T]:ve,Re=_?ve[F]:ve;return{label:be,value:Re,original:ve}},[_,T,F]),P=reactExports.useMemo(()=>f.values[0].map(M),[f.values,M]),J=reactExports.useCallback(ve=>(Array.isArray(ve)&&ve.length>1&&console.warn("ideally we shouldn't have to deal with arrays at all here, but we only expect one value when we do"),Array.isArray(ve)?ve[0]:ve),[]),K=reactExports.useCallback(ve=>J(ve).label,[J]),z=reactExports.useCallback(ve=>J(ve).value,[J]),oe=reactExports.useMemo(()=>d&&!Array.isArray(f.current_value)?[f.current_value]:f.current_value,[f.current_value,d]);if(d!==Array.isArray(oe))throw"logical inconsistency - 'multidropdown' value should be coerced to array by now";const se=reactExports.useCallback(ve=>P.some(be=>be.value===ve),[P]),ae=Array.isArray(oe),pe=(ae?oe.every(se):se(oe))?oe:ae?oe.filter(se):null,he=Array.isArray(pe)?pe.map(ve=>P.find(be=>be.value===ve)):[P.find(ve=>ve.value===oe)];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"align-middle",htmlFor:s,children:f.label}),jsxRuntimeExports.jsx(Autocomplete,{className:"w-full",multiple:d,size:"small",id:s,options:P,disableCloseOnSelect:d,getOptionLabel:K,value:he,onChange:action((ve,be)=>{if(be!==null){if(Array.isArray(be)){const Re=Array.from(be).map(Fe=>Fe.value);f.current_value=Re,f.func&&f.func(Re);return}f.current_value=be.value,f.func&&f.func(be.value)}}),isOptionEqualToValue:(ve,be)=>J(ve).original===J(be).original,renderOption:(ve,be,{selected:Re})=>{const{key:Fe,...ye}=ve;return d?jsxRuntimeExports.jsxs("li",{...ye,children:[jsxRuntimeExports.jsx(Checkbox,{icon:icon$2,checkedIcon:checkedIcon$2,style:{marginRight:8},checked:Re}),K(be)]},Fe):jsxRuntimeExports.jsx("li",{...ye,children:K(be)},Fe)},renderTags:(ve,be)=>ve.map((Re,Fe)=>reactExports.createElement(Chip,{...be({index:Fe}),key:z(Re),label:K(Re)})),renderInput:ve=>jsxRuntimeExports.jsx(TextField,{...ve})})]})}const CheckboxComponent=({props:f})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{children:f.label}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:f.current_value,onChange:action(s=>{f.current_value=s.target.checked,f.func&&f.func(s.target.checked)})})]}),RadioButtonComponent=({props:f})=>{const s=reactExports.useMemo(()=>f.choices.map(d=>({v:d,id:v4()})),[f.choices]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{children:f.label}),jsxRuntimeExports.jsx("div",{className:"ciview-radio-group",children:s.map(({v:d,id:_})=>jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("span",{className:"m-1",children:d[0]}),jsxRuntimeExports.jsx("input",{type:"radio",value:d[1],checked:d[1]==f.current_value,onChange:action(S=>{f.current_value=S.currentTarget.value,f.func&&f.func(S.currentTarget.value)})})]},_))})]})},DoubleSliderComponent=({props:f})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{children:f.label}),jsxRuntimeExports.jsx(Slider,{value:f.current_value,min:f.min||0,max:f.max||1,onChange:action((s,d)=>{if(!Array.isArray(d))throw"doubleslider callback should have multiple values";f.current_value=d,f.func&&f.func(d)})})]}),ButtonComponent=({props:f})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{children:f.label}),jsxRuntimeExports.jsx(Button$1,{variant:"contained",onClick:()=>{f.func&&f.func(void 0)},children:f.label})]}),FolderComponent=({props:f})=>{const s=reactExports.useMemo(()=>f.current_value.map(d=>({setting:d,id:v4()})),[f.current_value]);return s.length===0?null:jsxRuntimeExports.jsx(Accordion$1,{type:"single",collapsible:!0,className:"w-full col-span-2",defaultValue:f.label,children:jsxRuntimeExports.jsxs(AccordionItem,{value:f.label,children:[jsxRuntimeExports.jsx(AccordionTrigger,{children:f.label}),jsxRuntimeExports.jsx(AccordionContent,{children:s.map(({setting:d,id:_})=>jsxRuntimeExports.jsx(AbstractComponent$1,{props:d},_))})]})})},Components$1={text:observer(TextComponent$1),textbox:observer(TextBoxComponent),slider:observer(SliderComponent),spinner:observer(SpinnerComponent),dropdown:observer(DropdownAutocompleteComponent),multidropdown:observer(DropdownAutocompleteComponent),check:observer(CheckboxComponent),radiobuttons:observer(RadioButtonComponent),doubleslider:observer(DoubleSliderComponent),button:observer(ButtonComponent),folder:observer(FolderComponent)},ErrorComponent=({props:f,label:s})=>{const[d,_]=reactExports.useState(!0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Dialog,{open:d,className:"border-red-500 border-2 border-solid",children:[jsxRuntimeExports.jsx("h2",{children:"Settings Dialog Error..."}),jsxRuntimeExports.jsx(JsonView,{src:f,collapsed:1}),jsxRuntimeExports.jsx(Button$1,{onClick:()=>_(!d),children:"ok"})]}),jsxRuntimeExports.jsx("label",{className:"text-red-500",children:"Error in component:"}),jsxRuntimeExports.jsx("label",{className:"text-red-500",children:s})]})},AbstractComponent$1=observer(({props:f})=>{const s=Components$1[f.type];if(!(f.type in Components$1)){console.error(`Unknown component type: '${f.type}'`);const d={props:f,error:`Unknown component type: ${f.type}`};return jsxRuntimeExports.jsx(ErrorComponent,{props:d,label:f.label})}return jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 p-1 justify-items-start",children:jsxRuntimeExports.jsx(ErrorBoundary,{fallback:jsxRuntimeExports.jsx(ErrorComponent,{props:f,label:f.label}),children:jsxRuntimeExports.jsx(s,{props:f})})})}),Gui=observer(({chart:f})=>{const s=reactExports.useMemo(()=>{const _={settings:f.getSettings().map(S=>({setting:S,id:v4()}))};return makeAutoObservable(_),_.settings},[f]);return jsxRuntimeExports.jsx("div",{className:"w-full",children:s.map(({setting:d,id:_})=>jsxRuntimeExports.jsx(AbstractComponent$1,{props:d},_))})}),SettingsDialog=observer(({chart:f})=>jsxRuntimeExports.jsx(Gui,{chart:f}));class SettingsDialogReactWrapper extends BaseDialog{constructor(d,_){const T={width:500,title:`Settings (${d.config.title||`${d.config.type} ${d.config.id}`})`,doc:d.__doc__||document,position:_,onclose:()=>{d.dialogs.splice(d.dialogs.indexOf(this),1),d.settingsDialog===this&&(d.settingsDialog=null)}};super(T,d);Bt(this,"_root")}get root(){return this._root}set root(d){this._root=d}init(d){const _=createEl("div",{},this.dialog);this.root=createMdvPortal(jsxRuntimeExports.jsx(SettingsDialog,{chart:d}),_,this)}close(){super.close(),this.root?this.root.unmount():console.warn("not unmounting react root for dialog because of weirdness")}}const SettingsDialogReactWrapper$1=Object.freeze(Object.defineProperty({__proto__:null,default:SettingsDialogReactWrapper},Symbol.toStringTag,{value:"Module"}));class BaseChart{constructor(s,d,_){Bt(this,"dialogs",[]);Bt(this,"getQunatile");_.color_by&&_.color_by.column&&(_.color_by=_.color_by.column.field),this.config=JSON.parse(JSON.stringify(_)),this.config.id||(this.config.id=getRandomString()),this.__doc__=document,this.dataStore=s,this.listeners={},this.div=typeof d=="string"?document.getElementById(d):d,this.div.classList.add("ciview-chart-panel"),this.titleBar=createEl("div",{classes:["ciview-chart-titlebar"]}),this.title=createEl("div",{classes:["ciview-chart-title"],text:_.title},this.titleBar),this.menuSpace=createEl("div",{classes:["ciview-chart-menuspace"]},this.titleBar),this.contentDiv=createEl("div",{classes:["ciview-chart-content"]}),_.title_color&&(this.titleBar.style.backgroundColor=_.title_color),this.resetButton=this.addMenuIcon("fas fa-sync","remove filter"),this.resetButton.style.display="none",this.resetButton.addEventListener("click",()=>{this.removeFilter(),this.resetButton.style.display="none"}),this.dataStore.addListener(this.config.id,(T,F)=>{T==="filtered"?this.onDataFiltered(F):T==="data_changed"?this.onDataChanged(F):T==="data_added"?this.onDataAdded(F):T==="data_highlighted"&&(F.source===this&&this._callListeners("data_highlighted",F),this.onDataHighlighted&&this.onDataHighlighted(F))}),this.contextMenu=new ContextMenu(T=>this.getContextMenu(T)),this.addMenuIcon("fas fa-bars","more").addEventListener("click",T=>this.contextMenu.show(T)),this.addMenuIcon("fas fa-cog","settings").addEventListener("click",T=>this._openSettingsDialog(T)),this.addMenuIcon("fas fa-copy","duplicate chart").addEventListener("click",()=>{const T=JSON.parse(JSON.stringify(this.getConfig()));T.id=getRandomString(),T.title=`${T.title} copy`,window.mdv.chartManager.addChart(this.dataStore.name,T)}),this.legendIcon=this.addMenuIcon("fas fa-info",_.legend||"No description",{size:"medium"});let S=_.size;this.contentDiv.addEventListener("fullscreenchange",action(()=>{if(document.fullscreenElement){this.contentDiv!==document.fullscreenElement&&console.error("unexpected fullscreen element"),this.observable.container=this.contentDiv;const T=window.screen;this.setSize(T.width,T.height);for(const F of this.dialogs)F.setParent(this.contentDiv)}else{this.observable.container=this.__doc__.body,this.setSize(...S);for(const T of this.dialogs)T.setParent(null)}})),this.addMenuIcon("fas fa-expand","fullscreen",{func:async()=>{S=this.config.size,await this.contentDiv.requestFullscreen()}}),this.div.append(this.titleBar),this.div.append(this.contentDiv),this.listeners={},this._setDimensions(),this.observable=makeAutoObservable({container:this.__doc__.body})}_getContentDimensions(){return{top:5,left:5,height:this.height,width:this.width-5}}getFilter(){}setFilter(){}addListener(s,d){this.listeners[s]=d}removeListener(s){delete this.listeners[s]}_callListeners(s,d){for(const _ in this.listeners)this.listeners[_](s,d)}addMenuIcon(s,d,_={}){const S=createEl("span",{"aria-label":d,"data-microtip-color":"red",role:"tooltip","data-microtip-size":_.size||"small","data-microtip-position":_.position||"bottom-left",styles:{margin:"0px 1px"}},this.menuSpace);return createEl("i",{classes:["ciview-chart-icon"].concat(s.split(" "))},S),_.func&&S.addEventListener("click",T=>_.func(T)),S}removeFilter(){}onDataFiltered(s){}onDataChanged(s){const d=s.columns;if(!s.hasFiltered){let _=this.config.param,S=!1;typeof this.config.param=="string"&&(_=[this.config.param]);for(const T of _)if(d.indexOf(T)!==-1){S=!0;break}S&&this.onDataFiltered()}d.indexOf(this.config.color_by)!==-1&&this.colorByColumn(this.config.color_by)}getColorLegend(){const s={overideValues:{colorLogScale:this.config.log_color_scale}};return this._addTrimmedColor(this.config.color_by,s),this.dataStore.getColorLegend(this.config.color_by,s)}_addTrimmedColor(s,d){const _=this.config.trim_color_scale,S=this.dataStore.columnIndex[s];_&&_!=="none"&&S.quantiles&&S.quantiles!=="NA"&&(d.overideValues.min=S.quantiles[_][0],d.overideValues.max=S.quantiles[_][1])}setColorLegend(){if(!this.config.color_legend.display){this.legend&&(this.config.color_legend.pos=[this.legend.offsetLeft,this.legend.offsetTop],this.legend.remove(),this.legend=void 0);return}const s=this._getContentDimensions();let d=0,_=0;if(this.legend)_=this.legend.style.left,d=this.legend.style.top,this.legend.remove();else{const S=this.config.color_legend;S.pos||(S.pos=[s.left,s.top]),_=`${S.pos[0]}px`,d=`${S.pos[1]}px`}if(this.legend=this.getColorLegend(),!this.legend){console.warn("no color legend");return}this.contentDiv.append(this.legend),this.legend.style.left=_,this.legend.style.top=d,this.legend.__doc__=this.__doc__}getColorFunction(s,d){this.config.color_by=s;const _={asArray:d,overideValues:{colorLogScale:this.config.log_color_scale,fallbackOnZero:this.config.fallbackOnZero}};this._addTrimmedColor(s,_);const S=this.dataStore.getColorFunction(s,_);return this.config.color_legend||(this.config.color_legend={display:!0}),this.setColorLegend(),S}onColumnRemoved(s){let d=this.config.param,_=!1;typeof this.config.param=="string"&&(d=[this.config.param]);for(const S of d)if(s===S){_=!0;break}return _?(this.remove(!1),!0):(this.colorByColumn&&this.config.color_by===s&&(this.config.color_by=void 0,this.colorByDefault()),!1)}onDataAdded(s){this.onDataFiltered()}onDataHighlighted(s){}addToolTip(){this._tooltip=createEl("div",{classes:["ciview-tooltip"],stlyles:{display:"none",position:"absolute"}},this.__doc__.body)}showToolTip(s,d){this._tooltip||this.addToolTip(),this._tooltip.innerHTML=d,this._tooltip.style.display="inline-block",this._tooltip.style.left=`${3+s.clientX}px`,this._tooltip.style.top=`${3+s.clientY}px`}hideToolTip(){this._tooltip&&(this._tooltip.style.display="none")}remove(){this.titleBar.remove(),this.contentDiv.remove(),this.dataStore.removeListener(this.config.id),this._tooltip&&this._tooltip.remove();for(const s of this.dialogs)s.close()}getSettings(){const s=this.config,d=[{type:"text",label:"Chart Name",current_value:s.title,func:S=>{this.setTitle(S)}}],_=this.getColorOptions();if(_.colorby){const S=_.colorby==="all"?["int32","text","integer","double","text16","multitext"]:_.colorby,T=this.dataStore.getColumnList(S);T.push({name:"None",field:"_none"}),d.push({label:"Color By",type:"dropdown",values:[T,"name","field"],current_value:s.color_by||"_none",func:F=>{F==="_none"?(s.color_by=void 0,this.colorByDefault()):(s.color_by=F,this.colorByColumn(F))}}),_.color_overlay!==void 0&&d.push({label:"Color Overlay",type:"slider",current_value:s.color_overlay,func:F=>{s.color_overlay=F,this.colorByColumn(s.color_by)}}),d.push({label:"Show Color Legend",type:"check",current_value:s.color_legend?s.color_legend.display:!0,func:F=>{s.color_by&&(s.color_legend.display=F,this.setColorLegend())}}),d.push({label:"SymLog Color Scale",type:"check",current_value:s.log_color_scale,func:F=>{s.log_color_scale=F,s.color_by&&this.colorByColumn(s.color_by)}}),d.push({label:"Treat zero as missing",type:"check",current_value:s.fallbackOnZero,func:F=>{s.fallbackOnZero=F,s.color_by&&this.colorByColumn(s.color_by)}}),d.push({type:"radiobuttons",label:"Trim Color Scale to Percentile",current_value:s.trim_color_scale||"none",choices:[["No Trim","none"],["0.001","0.001"],["0.01","0.01"],["0.05","0.05"]],func:F=>{s.trim_color_scale=F,s.color_by&&this.colorByColumn(s.color_by)}})}return d}_addUnpinIcon(){this.unpinIcon=this.addMenuIcon("fas fa-thumbtack","unpin chart"),this.unpinIcon.addEventListener("click",s=>{this.unpinIcon.remove(),this.unpinChart()})}_openSettingsDialog(s){this.settingsDialog||(this.settingsDialog=new SettingsDialogReactWrapper(this,[s.pageX,s.pageY]),this.dialogs.push(this.settingsDialog))}getContextMenu(s){let d=[];return this.getImage&&(d=d.concat([{text:"create svg image",icon:"far fa-image",func:()=>this.downloadImage("svg")},{text:"create png image",icon:"far fa-image",func:()=>this.downloadImage("png")}])),this.pinChart&&!this.isPinned&&d.push({text:"pin chart",icon:"fas fa-thumbtack",func:()=>{this.pinChart(),this._addUnpinIcon()}}),this.getChartData&&d.push({text:"download data",icon:"fas fa-download",func:()=>this.downloadData()}),this.addToContextMenu&&(d=d.concat(this.addToContextMenu())),d.push({text:"experimental settings dialog",icon:"fas fa-cog",func:async()=>{const S=(await __vitePreload(()=>Promise.resolve().then(()=>SettingsDialogReactWrapper$1),void 0,import.meta.url)).default;this.dialogs.push(new S(this))}}),d}getDiv(){return this.div}changeBaseDocument(s){this.contextMenu.__doc__=s,action(()=>this.observable.container=s.body)(),this.__doc__=s;for(const d of this.dialogs)d.setParent(s.body);if(this.legend&&(this.legend.__doc__=s),this._tooltip&&(this._tooltip.remove(),this.addToolTip()),this.extra_legends)for(const d of this.extra_legends)this[d]&&(this[d].__doc__=s)}_setConfigValue(s,d,_){return s[d]===void 0&&(s[d]=_),s[d]}drawChart(){}getConfig(){return this.legend&&(this.config.color_legend={display:!0,pos:[this.legend.offsetLeft,this.legend.offsetTop]}),JSON.parse(JSON.stringify(this.config))}getColorOptions(){return{}}setSize(s,d){s&&(this.div.style.height=`${d}px`,this.div.style.width=`${s}px`),this._setDimensions()}_setDimensions(){const s=this.div.getBoundingClientRect(),d=Math.round(s.height),_=Math.round(s.width);this.config.size=[_,d];const S=this.contentDiv.getBoundingClientRect();this.height=Math.round(S.height),this.width=_}downloadImage(s){const d=this.contentDiv.style.color;this.contentDiv.style.color="black",this.getImage(_=>{const S=document.createElement("a"),T=this.config.title||"image";if(S.download=`${T}.${s}`,s==="svg")S.href=`data:image/svg+xml,${encodeURIComponent(_)}`;else{let F=_.toDataURL("image/png");F=F.replace(/^data:image\/png/,"data:application/octet-stream"),S.href=F}S.click(),S.remove(),this.contentDiv.style.color=d},s)}downloadData(){const s=this.getChartData(),d=createEl("a",{download:this.config.title,target:"_blank",href:window.URL.createObjectURL(s)},this.__doc__.body);d.click(),d.remove()}setTitle(s){this.title.textContent=s,this.config.title!==s&&(this.config.title=s)}getImageFromSVG(s,d){const _=s.cloneNode(!0);copyStylesInline(_,s);const S=document.createElement("canvas");_.style.top="0px",S.width=s.width.baseVal.value,S.height=s.height.baseVal.value;const T=S.getContext("2d");T.clearRect(0,0,S.width,S.height);const F=new XMLSerializer().serializeToString(_),M=window.URL||window.webkitURL||window,P=new Image,H=new Blob([F],{type:"image/svg+xml;charset=utf-8"}),J=M.createObjectURL(H);P.src=J,P.onload=()=>{T.drawImage(P,0,0),d(S,T)}}}BaseChart.types=chartTypes;function copyStylesInline(f,s){const d=["svg","g"];for(let _=0;_<f.childNodes.length;_++){const S=f.childNodes[_];if(d.indexOf(S.tagName)!==-1){copyStylesInline(S,s.childNodes[_]);continue}const T=s.childNodes[_].currentStyle||window.getComputedStyle(s.childNodes[_]);if(!(T==="undefined"||T==null))for(let F=0;F<T.length;F++)S.style.setProperty(T[F],T.getPropertyValue(T[F]))}}const ChartContext=reactExports.createContext(void 0),DataStoreContext=reactExports.createContext(void 0);function ChartProvider({chart:f,children:s}){return jsxRuntimeExports.jsx(ChartContext.Provider,{value:f,children:jsxRuntimeExports.jsx(DataStoreContext.Provider,{value:f.dataStore,children:s})})}function useChart(){const f=reactExports.useContext(ChartContext);if(!f)throw new Error("no chart context");return f}function useDataStore(){const f=reactExports.useContext(DataStoreContext);if(!f)throw new Error("no data store context");return f}function useVivConfig(){const f=reactExports.useContext(ChartContext);return f?f.config.viv:{viewerStore:{},channelsStore:{},imageSettingsStore:{}}}function Fallback(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{children:"BaseReactChart"}),jsxRuntimeExports.jsx("p",{children:"BaseReactChart is a base class for charts that use React."}),jsxRuntimeExports.jsx("p",{children:"As of this writing, in order to implement a new React-based chart, make a class that extends BaseReactChart, and make it call the super constructor with an argument for the (mobx observable) function that does the react rendering."}),jsxRuntimeExports.jsx("p",{children:"See `react.md` for more detail..."})]})}class BaseReactChart extends BaseChart{constructor(d,_,S,T=Fallback){super(d,_,S);Bt(this,"useMobx",!0);Bt(this,"root");Bt(this,"reactEl");Bt(this,"ComponentFn");Bt(this,"reactionDisposers",[]);S=this.config,makeAutoObservable(S),Object.defineProperty(this,"config",{get:()=>S,set:F=>{S=F,makeAutoObservable(S)}}),this.mobxAutorun(()=>{this.setTitle(S.title)}),this.reactEl=createEl("div",{className:"react-chart"},this.contentDiv),this.ComponentFn=T,this.mountReact()}get dataSource(){return window.mdv.chartManager.charts[this.config.id].dataSource}mobxAutorun(d,_){this.reactionDisposers.push(autorun(d,_))}mountReact(){const d=this.ComponentFn;this.root=createMdvPortal(jsxRuntimeExports.jsx(ChartProvider,{chart:this,children:jsxRuntimeExports.jsx(d,{})}),this.reactEl,this)}remove(){this.root.unmount(),super.remove();for(const d of this.reactionDisposers)d()}}const __vite_import_meta_env__={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},createStoreImpl=f=>{let s;const d=new Set,_=(J,K)=>{const z=typeof J=="function"?J(s):J;if(!Object.is(z,s)){const oe=s;s=K??(typeof z!="object"||z===null)?z:Object.assign({},s,z),d.forEach(se=>se(s,oe))}},S=()=>s,P={setState:_,getState:S,getInitialState:()=>H,subscribe:J=>(d.add(J),()=>d.delete(J)),destroy:()=>{(__vite_import_meta_env__?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),d.clear()}},H=s=f(_,S,P);return P},createStore=f=>f?createStoreImpl(f):createStoreImpl;var withSelector={exports:{}},withSelector_production_min={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h=reactExports,n=shimExports;function p(f,s){return f===s&&(f!==0||1/f===1/s)||f!==f&&s!==s}var q=typeof Object.is=="function"?Object.is:p,r=n.useSyncExternalStore,t=h.useRef,u$1=h.useEffect,v=h.useMemo,w$1=h.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(f,s,d,_,S){var T=t(null);if(T.current===null){var F={hasValue:!1,value:null};T.current=F}else F=T.current;T=v(function(){function P(oe){if(!H){if(H=!0,J=oe,oe=_(oe),S!==void 0&&F.hasValue){var se=F.value;if(S(se,oe))return K=se}return K=oe}if(se=K,q(J,oe))return se;var ae=_(oe);return S!==void 0&&S(se,ae)?se:(J=oe,K=ae)}var H=!1,J,K,z=d===void 0?null:d;return[function(){return P(s())},z===null?void 0:function(){return P(z())}]},[s,d,_,S]);var M=r(f,T[0],T[1]);return u$1(function(){F.hasValue=!0,F.value=M},[M]),w$1(M),M};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),{useDebugValue}=React$1,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity$a=f=>f;function useStoreWithEqualityFn(f,s=identity$a,d){const _=useSyncExternalStoreWithSelector(f.subscribe,f.getState,f.getServerState||f.getInitialState,s,d);return useDebugValue(_),_}function assert$9(f,s){if(!f)throw new Error(s||"loader assertion failed.")}const isBrowser$2=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),matches$1=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);matches$1&&parseFloat(matches$1[1]);const window_$1=globalThis,process_=globalThis.process||{},navigator_=globalThis.navigator||{};function isElectron(f){var _,S;if(typeof window<"u"&&((_=window.process)==null?void 0:_.type)==="renderer"||typeof process<"u"&&((S=process.versions)!=null&&S.electron))return!0;const d=typeof navigator<"u"&&navigator.userAgent;return!!(d&&d.indexOf("Electron")>=0)}function isBrowser$1(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||isElectron()}function getBrowser(f){return isBrowser$1()?isElectron()?"Electron":(navigator_.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node"}const VERSION$5="4.0.7";function getStorage(f){try{const s=window[f],d="__storage_test__";return s.setItem(d,d),s.removeItem(d),s}catch{return null}}class LocalStorage{constructor(s,d,_="sessionStorage"){this.storage=getStorage(_),this.id=s,this.config=d,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(s){if(Object.assign(this.config,s),this.storage){const d=JSON.stringify(this.config);this.storage.setItem(this.id,d)}}_loadConfiguration(){let s={};if(this.storage){const d=this.storage.getItem(this.id);s=d?JSON.parse(d):{}}return Object.assign(this.config,s),this}}function formatTime(f){let s;return f<10?s=`${f.toFixed(2)}ms`:f<100?s=`${f.toFixed(1)}ms`:f<1e3?s=`${f.toFixed(0)}ms`:s=`${(f/1e3).toFixed(2)}s`,s}function leftPad(f,s=8){const d=Math.max(s-f.length,0);return`${" ".repeat(d)}${f}`}var COLOR;(function(f){f[f.BLACK=30]="BLACK",f[f.RED=31]="RED",f[f.GREEN=32]="GREEN",f[f.YELLOW=33]="YELLOW",f[f.BLUE=34]="BLUE",f[f.MAGENTA=35]="MAGENTA",f[f.CYAN=36]="CYAN",f[f.WHITE=37]="WHITE",f[f.BRIGHT_BLACK=90]="BRIGHT_BLACK",f[f.BRIGHT_RED=91]="BRIGHT_RED",f[f.BRIGHT_GREEN=92]="BRIGHT_GREEN",f[f.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",f[f.BRIGHT_BLUE=94]="BRIGHT_BLUE",f[f.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",f[f.BRIGHT_CYAN=96]="BRIGHT_CYAN",f[f.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(COLOR||(COLOR={}));const BACKGROUND_INCREMENT=10;function getColor(f){return typeof f!="string"?f:(f=f.toUpperCase(),COLOR[f]||COLOR.WHITE)}function addColor(f,s,d){return!isBrowser$1&&typeof f=="string"&&(s&&(f=`\x1B[${getColor(s)}m${f}\x1B[39m`),d&&(f=`\x1B[${getColor(d)+BACKGROUND_INCREMENT}m${f}\x1B[49m`)),f}function autobind(f,s=["constructor"]){const d=Object.getPrototypeOf(f),_=Object.getOwnPropertyNames(d),S=f;for(const T of _){const F=S[T];typeof F=="function"&&(s.find(M=>T===M)||(S[T]=F.bind(f)))}}function assert$8(f,s){if(!f)throw new Error("Assertion failed")}function getHiResTimestamp$1(){var s,d,_;let f;if(isBrowser$1()&&window_$1.performance)f=(d=(s=window_$1==null?void 0:window_$1.performance)==null?void 0:s.now)==null?void 0:d.call(s);else if("hrtime"in process_){const S=(_=process_==null?void 0:process_.hrtime)==null?void 0:_.call(process_);f=S[0]*1e3+S[1]/1e6}else f=Date.now();return f}const originalConsole={debug:isBrowser$1()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},DEFAULT_LOG_CONFIGURATION={enabled:!0,level:0};function noop$9(){}const cache$1={},ONCE={once:!0};class Log{constructor({id:s}={id:""}){this.VERSION=VERSION$5,this._startTs=getHiResTimestamp$1(),this._deltaTs=getHiResTimestamp$1(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=s,this.userData={},this._storage=new LocalStorage(`__probe-${this.id}__`,DEFAULT_LOG_CONFIGURATION),this.timeStamp(`${this.id} started`),autobind(this),Object.seal(this)}set level(s){this.setLevel(s)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((getHiResTimestamp$1()-this._startTs).toPrecision(10))}getDelta(){return Number((getHiResTimestamp$1()-this._deltaTs).toPrecision(10))}set priority(s){this.level=s}get priority(){return this.level}getPriority(){return this.level}enable(s=!0){return this._storage.setConfiguration({enabled:s}),this}setLevel(s){return this._storage.setConfiguration({level:s}),this}get(s){return this._storage.config[s]}set(s,d){this._storage.setConfiguration({[s]:d})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(s,d){if(!s)throw new Error(d||"Assertion failed")}warn(s){return this._getLogFunction(0,s,originalConsole.warn,arguments,ONCE)}error(s){return this._getLogFunction(0,s,originalConsole.error,arguments)}deprecated(s,d){return this.warn(`\`${s}\` is deprecated and will be removed in a later version. Use \`${d}\` instead`)}removed(s,d){return this.error(`\`${s}\` has been removed. Use \`${d}\` instead`)}probe(s,d){return this._getLogFunction(s,d,originalConsole.log,arguments,{time:!0,once:!0})}log(s,d){return this._getLogFunction(s,d,originalConsole.debug,arguments)}info(s,d){return this._getLogFunction(s,d,console.info,arguments)}once(s,d){return this._getLogFunction(s,d,originalConsole.debug||originalConsole.info,arguments,ONCE)}table(s,d,_){return d?this._getLogFunction(s,d,console.table||noop$9,_&&[_],{tag:getTableHeader(d)}):noop$9}time(s,d){return this._getLogFunction(s,d,console.time?console.time:console.info)}timeEnd(s,d){return this._getLogFunction(s,d,console.timeEnd?console.timeEnd:console.info)}timeStamp(s,d){return this._getLogFunction(s,d,console.timeStamp||noop$9)}group(s,d,_={collapsed:!1}){const S=normalizeArguments({logLevel:s,message:d,opts:_}),{collapsed:T}=_;return S.method=(T?console.groupCollapsed:console.group)||console.info,this._getLogFunction(S)}groupCollapsed(s,d,_={}){return this.group(s,d,Object.assign({},_,{collapsed:!0}))}groupEnd(s){return this._getLogFunction(s,"",console.groupEnd||noop$9)}withGroup(s,d,_){this.group(s,d)();try{_()}finally{this.groupEnd(s)()}}trace(){console.trace&&console.trace()}_shouldLog(s){return this.isEnabled()&&this.getLevel()>=normalizeLogLevel(s)}_getLogFunction(s,d,_,S,T){if(this._shouldLog(s)){T=normalizeArguments({logLevel:s,message:d,args:S,opts:T}),_=_||T.method,assert$8(_),T.total=this.getTotal(),T.delta=this.getDelta(),this._deltaTs=getHiResTimestamp$1();const F=T.tag||T.message;if(T.once&&F)if(!cache$1[F])cache$1[F]=getHiResTimestamp$1();else return noop$9;return d=decorateMessage(this.id,T.message,T),_.bind(console,d,...T.args)}return noop$9}}Log.VERSION=VERSION$5;function normalizeLogLevel(f){if(!f)return 0;let s;switch(typeof f){case"number":s=f;break;case"object":s=f.logLevel||f.priority||0;break;default:return 0}return assert$8(Number.isFinite(s)&&s>=0),s}function normalizeArguments(f){const{logLevel:s,message:d}=f;f.logLevel=normalizeLogLevel(s);const _=f.args?Array.from(f.args):[];for(;_.length&&_.shift()!==d;);switch(typeof s){case"string":case"function":d!==void 0&&_.unshift(d),f.message=s;break;case"object":Object.assign(f,s);break}typeof f.message=="function"&&(f.message=f.message());const S=typeof f.message;return assert$8(S==="string"||S==="object"),Object.assign(f,{args:_},f.opts)}function decorateMessage(f,s,d){if(typeof s=="string"){const _=d.time?leftPad(formatTime(d.total)):"";s=d.time?`${f}: ${_}  ${s}`:`${f}: ${s}`,s=addColor(s,d.color,d.background)}return s}function getTableHeader(f){for(const s in f)for(const d in f[s])return d||"untitled";return"empty"}function mergeLoaderOptions(f,s){return mergeOptionsRecursively(f||{},s)}function mergeOptionsRecursively(f,s,d=0){if(d>3)return s;const _={...f};for(const[S,T]of Object.entries(s))T&&typeof T=="object"&&!Array.isArray(T)?_[S]=mergeOptionsRecursively(_[S]||{},s[S],d+1):_[S]=s[S];return _}const NPM_TAG="latest";function getVersion(){var f;return(f=globalThis._loadersgl_)!=null&&f.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.4"),globalThis._loadersgl_.version}const VERSION$4=getVersion();function assert$7(f,s){if(!f)throw new Error(s||"loaders.gl assertion failed.")}const isBrowser=typeof process!="object"||String(process)!=="[object process]"||process.browser,isMobile=typeof window<"u"&&typeof window.orientation<"u",matches=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);matches&&parseFloat(matches[1]);class WorkerJob{constructor(s,d){Bt(this,"name");Bt(this,"workerThread");Bt(this,"isRunning",!0);Bt(this,"result");Bt(this,"_resolve",()=>{});Bt(this,"_reject",()=>{});this.name=s,this.workerThread=d,this.result=new Promise((_,S)=>{this._resolve=_,this._reject=S})}postMessage(s,d){this.workerThread.postMessage({source:"loaders.gl",type:s,payload:d})}done(s){assert$7(this.isRunning),this.isRunning=!1,this._resolve(s)}error(s){assert$7(this.isRunning),this.isRunning=!1,this._reject(s)}}class NodeWorker{terminate(){}}const workerURLCache=new Map;function getLoadableWorkerURL(f){assert$7(f.source&&!f.url||!f.source&&f.url);let s=workerURLCache.get(f.source||f.url);return s||(f.url&&(s=getLoadableWorkerURLFromURL(f.url),workerURLCache.set(f.url,s)),f.source&&(s=getLoadableWorkerURLFromSource(f.source),workerURLCache.set(f.source,s))),assert$7(s),s}function getLoadableWorkerURLFromURL(f){if(!f.startsWith("http"))return f;const s=buildScriptSource(f);return getLoadableWorkerURLFromSource(s)}function getLoadableWorkerURLFromSource(f){const s=new Blob([f],{type:"application/javascript"});return URL.createObjectURL(s)}function buildScriptSource(f){return`try {
  importScripts('${f}');
} catch (error) {
  console.error(error);
  throw error;
}`}function getTransferList(f,s=!0,d){const _=d||new Set;if(f){if(isTransferable(f))_.add(f);else if(isTransferable(f.buffer))_.add(f.buffer);else if(!ArrayBuffer.isView(f)){if(s&&typeof f=="object")for(const S in f)getTransferList(f[S],s,_)}}return d===void 0?Array.from(_):[]}function isTransferable(f){return f?f instanceof ArrayBuffer||typeof MessagePort<"u"&&f instanceof MessagePort||typeof ImageBitmap<"u"&&f instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&f instanceof OffscreenCanvas:!1}const NOOP=()=>{};class WorkerThread{constructor(s){Bt(this,"name");Bt(this,"source");Bt(this,"url");Bt(this,"terminated",!1);Bt(this,"worker");Bt(this,"onMessage");Bt(this,"onError");Bt(this,"_loadableURL","");const{name:d,source:_,url:S}=s;assert$7(_||S),this.name=d,this.source=_,this.url=S,this.onMessage=NOOP,this.onError=T=>console.log(T),this.worker=isBrowser?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&isBrowser||typeof NodeWorker<"u"&&!isBrowser}destroy(){this.onMessage=NOOP,this.onError=NOOP,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(s,d){d=d||getTransferList(s),this.worker.postMessage(s,d)}_getErrorFromErrorEvent(s){let d="Failed to load ";return d+=`worker ${this.name} from ${this.url}. `,s.message&&(d+=`${s.message} in `),s.lineno&&(d+=`:${s.lineno}:${s.colno}`),new Error(d)}_createBrowserWorker(){this._loadableURL=getLoadableWorkerURL({source:this.source,url:this.url});const s=new Worker(this._loadableURL,{name:this.name});return s.onmessage=d=>{d.data?this.onMessage(d.data):this.onError(new Error("No data received"))},s.onerror=d=>{this.onError(this._getErrorFromErrorEvent(d)),this.terminated=!0},s.onmessageerror=d=>console.error(d),s}_createNodeWorker(){let s;if(this.url){const _=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;s=new NodeWorker(_,{eval:!1})}else if(this.source)s=new NodeWorker(this.source,{eval:!0});else throw new Error("no worker");return s.on("message",d=>{this.onMessage(d)}),s.on("error",d=>{this.onError(d)}),s.on("exit",d=>{}),s}}class WorkerPool{constructor(s){Bt(this,"name","unnamed");Bt(this,"source");Bt(this,"url");Bt(this,"maxConcurrency",1);Bt(this,"maxMobileConcurrency",1);Bt(this,"onDebug",()=>{});Bt(this,"reuseWorkers",!0);Bt(this,"props",{});Bt(this,"jobQueue",[]);Bt(this,"idleQueue",[]);Bt(this,"count",0);Bt(this,"isDestroyed",!1);this.source=s.source,this.url=s.url,this.setProps(s)}static isSupported(){return WorkerThread.isSupported()}destroy(){this.idleQueue.forEach(s=>s.destroy()),this.isDestroyed=!0}setProps(s){this.props={...this.props,...s},s.name!==void 0&&(this.name=s.name),s.maxConcurrency!==void 0&&(this.maxConcurrency=s.maxConcurrency),s.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=s.maxMobileConcurrency),s.reuseWorkers!==void 0&&(this.reuseWorkers=s.reuseWorkers),s.onDebug!==void 0&&(this.onDebug=s.onDebug)}async startJob(s,d=(S,T,F)=>S.done(F),_=(S,T)=>S.error(T)){const S=new Promise(T=>(this.jobQueue.push({name:s,onMessage:d,onError:_,onStart:T}),this));return this._startQueuedJob(),await S}async _startQueuedJob(){if(!this.jobQueue.length)return;const s=this._getAvailableWorker();if(!s)return;const d=this.jobQueue.shift();if(d){this.onDebug({message:"Starting job",name:d.name,workerThread:s,backlog:this.jobQueue.length});const _=new WorkerJob(d.name,s);s.onMessage=S=>d.onMessage(_,S.type,S.payload),s.onError=S=>d.onError(_,S),d.onStart(_);try{await _.result}catch(S){console.error(`Worker exception: ${S}`)}finally{this.returnWorkerToQueue(s)}}}returnWorkerToQueue(s){!isBrowser||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(s.destroy(),this.count--):this.idleQueue.push(s),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const s=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new WorkerThread({name:s,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return isMobile?this.maxMobileConcurrency:this.maxConcurrency}}const DEFAULT_PROPS$2={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},gm=class gm{constructor(s){Bt(this,"props");Bt(this,"workerPools",new Map);this.props={...DEFAULT_PROPS$2},this.setProps(s),this.workerPools=new Map}static isSupported(){return WorkerThread.isSupported()}static getWorkerFarm(s={}){return gm._workerFarm=gm._workerFarm||new gm({}),gm._workerFarm.setProps(s),gm._workerFarm}destroy(){for(const s of this.workerPools.values())s.destroy();this.workerPools=new Map}setProps(s){this.props={...this.props,...s};for(const d of this.workerPools.values())d.setProps(this._getWorkerPoolProps())}getWorkerPool(s){const{name:d,source:_,url:S}=s;let T=this.workerPools.get(d);return T||(T=new WorkerPool({name:d,source:_,url:S}),T.setProps(this._getWorkerPoolProps()),this.workerPools.set(d,T)),T}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};Bt(gm,"_workerFarm");let WorkerFarm=gm;function getWorkerURL(f,s={}){const d=s[f.id]||{},_=isBrowser?`${f.id}-worker.js`:`${f.id}-worker-node.js`;let S=d.workerUrl;if(!S&&f.id==="compression"&&(S=s.workerUrl),s._workerType==="test"&&(isBrowser?S=`modules/${f.module}/dist/${_}`:S=`modules/${f.module}/src/workers/${f.id}-worker-node.ts`),!S){let T=f.version;T==="latest"&&(T=NPM_TAG);const F=T?`@${T}`:"";S=`https://unpkg.com/@loaders.gl/${f.module}${F}/dist/${_}`}return assert$7(S),S}function validateWorkerVersion(f,s=VERSION$4){assert$7(f,"no worker provided");const d=f.version;return!(!s||!d)}const zlib={};function canParseWithWorker(f,s){return!WorkerFarm.isSupported()||!isBrowser&&!(s!=null&&s._nodeWorkers)?!1:f.worker&&(s==null?void 0:s.worker)}async function parseWithWorker(f,s,d,_,S){const T=f.id,F=getWorkerURL(f,d),P=WorkerFarm.getWorkerFarm(d).getWorkerPool({name:T,url:F});d=JSON.parse(JSON.stringify(d)),_=JSON.parse(JSON.stringify(_||{}));const H=await P.startJob("process-on-worker",onMessage.bind(null,S));return H.postMessage("process",{input:s,options:d,context:_}),await(await H.result).result}async function onMessage(f,s,d,_){switch(d){case"done":s.done(_);break;case"error":s.error(new Error(_.error));break;case"process":const{id:S,input:T,options:F}=_;try{const M=await f(T,F);s.postMessage("done",{id:S,result:M})}catch(M){const P=M instanceof Error?M.message:"unknown error";s.postMessage("error",{id:S,error:P})}break;default:console.warn(`parse-with-worker unknown message ${d}`)}}function compareArrayBuffers(f,s,d){if(d=d||f.byteLength,f.byteLength<d||s.byteLength<d)return!1;const _=new Uint8Array(f),S=new Uint8Array(s);for(let T=0;T<_.length;++T)if(_[T]!==S[T])return!1;return!0}function concatenateArrayBuffers(...f){return concatenateArrayBuffersFromArray(f)}function concatenateArrayBuffersFromArray(f){const s=f.map(T=>T instanceof ArrayBuffer?new Uint8Array(T):T),d=s.reduce((T,F)=>T+F.byteLength,0),_=new Uint8Array(d);let S=0;for(const T of s)_.set(T,S),S+=T.byteLength;return _.buffer}async function concatenateArrayBuffersAsync(f){const s=[];for await(const d of f)s.push(d);return concatenateArrayBuffers(...s)}function getHiResTimestamp(){let f;if(typeof window<"u"&&window.performance)f=window.performance.now();else if(typeof process<"u"&&process.hrtime){const s=process.hrtime();f=s[0]*1e3+s[1]/1e6}else f=Date.now();return f}class Stat{constructor(s,d){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=s,this.type=d,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(s){return this.sampleSize=s,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(s){return this._count+=s,this._samples++,this._checkSampling(),this}subtractCount(s){return this._count-=s,this._samples++,this._checkSampling(),this}addTime(s){return this._time+=s,this.lastTiming=s,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=getHiResTimestamp(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(getHiResTimestamp()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Stats{constructor(s){this.stats={},this.id=s.id,this.stats={},this._initializeStats(s.stats),Object.seal(this)}get(s,d="count"){return this._getOrCreate({name:s,type:d})}get size(){return Object.keys(this.stats).length}reset(){for(const s of Object.values(this.stats))s.reset();return this}forEach(s){for(const d of Object.values(this.stats))s(d)}getTable(){const s={};return this.forEach(d=>{s[d.name]={time:d.time||0,count:d.count||0,average:d.getAverageTime()||0,hz:d.getHz()||0}}),s}_initializeStats(s=[]){s.forEach(d=>this._getOrCreate(d))}_getOrCreate(s){const{name:d,type:_}=s;let S=this.stats[d];return S||(s instanceof Stat?S=s:S=new Stat(d,_),this.stats[d]=S),S}}const STAT_QUEUED_REQUESTS="Queued Requests",STAT_ACTIVE_REQUESTS="Active Requests",STAT_CANCELLED_REQUESTS="Cancelled Requests",STAT_QUEUED_REQUESTS_EVER="Queued Requests Ever",STAT_ACTIVE_REQUESTS_EVER="Active Requests Ever",DEFAULT_PROPS$1={id:"request-scheduler",throttleRequests:!0,maxRequests:6,debounceTime:0};class RequestScheduler{constructor(s={}){Bt(this,"props");Bt(this,"stats");Bt(this,"activeRequestCount",0);Bt(this,"requestQueue",[]);Bt(this,"requestMap",new Map);Bt(this,"updateTimer",null);this.props={...DEFAULT_PROPS$1,...s},this.stats=new Stats({id:this.props.id}),this.stats.get(STAT_QUEUED_REQUESTS),this.stats.get(STAT_ACTIVE_REQUESTS),this.stats.get(STAT_CANCELLED_REQUESTS),this.stats.get(STAT_QUEUED_REQUESTS_EVER),this.stats.get(STAT_ACTIVE_REQUESTS_EVER)}scheduleRequest(s,d=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(s))return this.requestMap.get(s);const _={handle:s,priority:0,getPriority:d},S=new Promise(T=>(_.resolve=T,_));return this.requestQueue.push(_),this.requestMap.set(s,S),this._issueNewRequests(),S}_issueRequest(s){const{handle:d,resolve:_}=s;let S=!1;const T=()=>{S||(S=!0,this.requestMap.delete(d),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,_?_({done:T}):Promise.resolve({done:T})}_issueNewRequests(){this.updateTimer!==null&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>this._issueNewRequestsAsync(),this.props.debounceTime)}_issueNewRequestsAsync(){this.updateTimer!==null&&clearTimeout(this.updateTimer),this.updateTimer=null;const s=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(s!==0){this._updateAllRequests();for(let d=0;d<s;++d){const _=this.requestQueue.shift();_&&this._issueRequest(_)}}}_updateAllRequests(){const s=this.requestQueue;for(let d=0;d<s.length;++d){const _=s[d];this._updateRequest(_)||(s.splice(d,1),this.requestMap.delete(_.handle),d--)}s.sort((d,_)=>d.priority-_.priority)}_updateRequest(s){return s.priority=s.getPriority(s.handle),s.priority<0?(s.resolve(null),!1):!0}}let pathPrefix$1="";const fileAliases={};function resolvePath(f){for(const s in fileAliases)if(f.startsWith(s)){const d=fileAliases[s];f=f.replace(s,d)}return!f.startsWith("http://")&&!f.startsWith("https://")&&(f=`${pathPrefix$1}${f}`),f}function toArrayBuffer$1(f){return f}function isBuffer$2(f){return f&&typeof f=="object"&&f.isBuffer}function toArrayBuffer(f){if(isBuffer$2(f))return f;if(f instanceof ArrayBuffer)return f;if(ArrayBuffer.isView(f))return f.byteOffset===0&&f.byteLength===f.buffer.byteLength?f.buffer:f.buffer.slice(f.byteOffset,f.byteOffset+f.byteLength);if(typeof f=="string"){const s=f;return new TextEncoder().encode(s).buffer}if(f&&typeof f=="object"&&f._toArrayBuffer)return f._toArrayBuffer();throw new Error("toArrayBuffer")}function filename(f){const s=f?f.lastIndexOf("/"):-1;return s>=0?f.substr(s+1):""}function dirname(f){const s=f?f.lastIndexOf("/"):-1;return s>=0?f.substr(0,s):""}const isBoolean$1=f=>typeof f=="boolean",isFunction$1=f=>typeof f=="function",isObject$9=f=>f!==null&&typeof f=="object",isPureObject=f=>isObject$9(f)&&f.constructor==={}.constructor,isIterable=f=>!!f&&typeof f[Symbol.iterator]=="function",isAsyncIterable$1=f=>f&&typeof f[Symbol.asyncIterator]=="function",isResponse$1=f=>typeof Response<"u"&&f instanceof Response||f&&f.arrayBuffer&&f.text&&f.json,isBlob$1=f=>typeof Blob<"u"&&f instanceof Blob,isBuffer$1=f=>f&&typeof f=="object"&&f.isBuffer,isReadableDOMStream=f=>typeof ReadableStream<"u"&&f instanceof ReadableStream||isObject$9(f)&&isFunction$1(f.tee)&&isFunction$1(f.cancel)&&isFunction$1(f.getReader),isReadableNodeStream=f=>isObject$9(f)&&isFunction$1(f.read)&&isFunction$1(f.pipe)&&isBoolean$1(f.readable),isReadableStream$1=f=>isReadableDOMStream(f)||isReadableNodeStream(f);class FetchError extends Error{constructor(d,_){super(d);Bt(this,"reason");Bt(this,"url");Bt(this,"response");this.reason=_.reason,this.url=_.url,this.response=_.response}}const DATA_URL_PATTERN=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,MIME_TYPE_PATTERN=/^([-\w.]+\/[-\w.+]+)/;function compareMIMETypes(f,s){return f.toLowerCase()===s.toLowerCase()}function parseMIMEType(f){const s=MIME_TYPE_PATTERN.exec(f);return s?s[1]:f}function parseMIMETypeFromURL(f){const s=DATA_URL_PATTERN.exec(f);return s?s[1]:""}const QUERY_STRING_PATTERN=/\?.*/;function extractQueryString(f){const s=f.match(QUERY_STRING_PATTERN);return s&&s[0]}function stripQueryString(f){return f.replace(QUERY_STRING_PATTERN,"")}function shortenUrlForDisplay(f){if(f.length<50)return f;const s=f.slice(f.length-15);return`${f.substr(0,32)}...${s}`}function getResourceUrl(f){return isResponse$1(f)?f.url:isBlob$1(f)?f.name||"":typeof f=="string"?f:""}function getResourceMIMEType(f){if(isResponse$1(f)){const s=f,d=s.headers.get("content-type")||"",_=stripQueryString(s.url);return parseMIMEType(d)||parseMIMETypeFromURL(_)}return isBlob$1(f)?f.type||"":typeof f=="string"?parseMIMETypeFromURL(f):""}function getResourceContentLength(f){return isResponse$1(f)?f.headers["content-length"]||-1:isBlob$1(f)?f.size:typeof f=="string"?f.length:f instanceof ArrayBuffer||ArrayBuffer.isView(f)?f.byteLength:-1}async function makeResponse(f){if(isResponse$1(f))return f;const s={},d=getResourceContentLength(f);d>=0&&(s["content-length"]=String(d));const _=getResourceUrl(f),S=getResourceMIMEType(f);S&&(s["content-type"]=S);const T=await getInitialDataUrl(f);T&&(s["x-first-bytes"]=T),typeof f=="string"&&(f=new TextEncoder().encode(f));const F=new Response(f,{headers:s});return Object.defineProperty(F,"url",{value:_}),F}async function checkResponse(f){if(!f.ok)throw await getResponseError(f)}async function getResponseError(f){const s=shortenUrlForDisplay(f.url);let d=`Failed to fetch resource (${f.status}) ${f.statusText}: ${s}`;d=d.length>100?`${d.slice(0,100)}...`:d;const _={reason:f.statusText,url:f.url,response:f};try{const S=f.headers.get("Content-Type");_.reason=S!=null&&S.includes("application/json")?await f.json():f.text()}catch{}return new FetchError(d,_)}async function getInitialDataUrl(f){if(typeof f=="string")return`data:,${f.slice(0,5)}`;if(f instanceof Blob){const d=f.slice(0,5);return await new Promise(_=>{const S=new FileReader;S.onload=T=>{var F;return _((F=T==null?void 0:T.target)==null?void 0:F.result)},S.readAsDataURL(d)})}if(f instanceof ArrayBuffer){const d=f.slice(0,5);return`data:base64,${arrayBufferToBase64(d)}`}return null}function arrayBufferToBase64(f){let s="";const d=new Uint8Array(f);for(let _=0;_<d.byteLength;_++)s+=String.fromCharCode(d[_]);return btoa(s)}function isNodePath(f){return!isRequestURL(f)&&!isDataURL(f)}function isRequestURL(f){return f.startsWith("http:")||f.startsWith("https:")}function isDataURL(f){return f.startsWith("data:")}async function fetchFile(f,s){var d,_;if(typeof f=="string"){const S=resolvePath(f);return isNodePath(S)&&(d=globalThis.loaders)!=null&&d.fetchNode?(_=globalThis.loaders)==null?void 0:_.fetchNode(S,s):await fetch(S,s)}return await makeResponse(f)}const probeLog=new Log({id:"loaders.gl"});class NullLog{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class ConsoleLog{constructor(){Bt(this,"console");this.console=console}log(...s){return this.console.log.bind(this.console,...s)}info(...s){return this.console.info.bind(this.console,...s)}warn(...s){return this.console.warn.bind(this.console,...s)}error(...s){return this.console.error.bind(this.console,...s)}}const DEFAULT_LOADER_OPTIONS={fetch:null,mimeType:void 0,nothrow:!1,log:new ConsoleLog,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:isBrowser$2,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},REMOVED_LOADER_OPTIONS={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function getGlobalLoaderState(){globalThis.loaders=globalThis.loaders||{};const{loaders:f}=globalThis;return f._state||(f._state={}),f._state}function getGlobalLoaderOptions(){const f=getGlobalLoaderState();return f.globalOptions=f.globalOptions||{...DEFAULT_LOADER_OPTIONS},f.globalOptions}function normalizeOptions(f,s,d,_){return d=d||[],d=Array.isArray(d)?d:[d],validateOptions(f,d),normalizeOptionsInternal(s,f,_)}function validateOptions(f,s){validateOptionsObject(f,null,DEFAULT_LOADER_OPTIONS,REMOVED_LOADER_OPTIONS,s);for(const d of s){const _=f&&f[d.id]||{},S=d.options&&d.options[d.id]||{},T=d.deprecatedOptions&&d.deprecatedOptions[d.id]||{};validateOptionsObject(_,d.id,S,T,s)}}function validateOptionsObject(f,s,d,_,S){const T=s||"Top level",F=s?`${s}.`:"";for(const M in f){const P=!s&&isObject$9(f[M]),H=M==="baseUri"&&!s,J=M==="workerUrl"&&s;if(!(M in d)&&!H&&!J){if(M in _)probeLog.warn(`${T} loader option '${F}${M}' no longer supported, use '${_[M]}'`)();else if(!P){const K=findSimilarOption(M,S);probeLog.warn(`${T} loader option '${F}${M}' not recognized. ${K}`)()}}}}function findSimilarOption(f,s){const d=f.toLowerCase();let _="";for(const S of s)for(const T in S.options){if(f===T)return`Did you mean '${S.id}.${T}'?`;const F=T.toLowerCase();(d.startsWith(F)||F.startsWith(d))&&(_=_||`Did you mean '${S.id}.${T}'?`)}return _}function normalizeOptionsInternal(f,s,d){const S={...f.options||{}};return addUrlOptions(S,d),S.log===null&&(S.log=new NullLog),mergeNestedFields(S,getGlobalLoaderOptions()),mergeNestedFields(S,s),S}function mergeNestedFields(f,s){for(const d in s)if(d in s){const _=s[d];isPureObject(_)&&isPureObject(f[d])?f[d]={...f[d],...s[d]}:f[d]=s[d]}}function addUrlOptions(f,s){s&&!("baseUri"in f)&&(f.baseUri=s)}function isLoaderObject(f){return f?(Array.isArray(f)&&(f=f[0]),Array.isArray(f==null?void 0:f.extensions)):!1}function normalizeLoader(f){assert$9(f,"null loader"),assert$9(isLoaderObject(f),"invalid loader");let s;return Array.isArray(f)&&(s=f[1],f=f[0],f={...f,options:{...f.options,...s}}),(f!=null&&f.parseTextSync||f!=null&&f.parseText)&&(f.text=!0),f.text||(f.binary=!0),f}const getGlobalLoaderRegistry=()=>{const f=getGlobalLoaderState();return f.loaderRegistry=f.loaderRegistry||[],f.loaderRegistry};function registerLoaders(f){const s=getGlobalLoaderRegistry();f=Array.isArray(f)?f:[f];for(const d of f){const _=normalizeLoader(d);s.find(S=>_===S)||s.unshift(_)}}function getRegisteredLoaders(){return getGlobalLoaderRegistry()}const log$1=new Log({id:"loaders.gl"}),EXT_PATTERN=/\.([^.]+)$/;async function selectLoader(f,s=[],d,_){if(!validHTTPResponse(f))return null;let S=selectLoaderSync(f,s,{...d,nothrow:!0},_);if(S)return S;if(isBlob$1(f)&&(f=await f.slice(0,10).arrayBuffer(),S=selectLoaderSync(f,s,d,_)),!S&&!(d!=null&&d.nothrow))throw new Error(getNoValidLoaderMessage(f));return S}function selectLoaderSync(f,s=[],d,_){if(!validHTTPResponse(f))return null;if(s&&!Array.isArray(s))return normalizeLoader(s);let S=[];s&&(S=S.concat(s)),d!=null&&d.ignoreRegisteredLoaders||S.push(...getRegisteredLoaders()),normalizeLoaders(S);const T=selectLoaderInternal(f,S,d,_);if(!T&&!(d!=null&&d.nothrow))throw new Error(getNoValidLoaderMessage(f));return T}function selectLoaderInternal(f,s,d,_){const S=getResourceUrl(f),T=getResourceMIMEType(f),F=stripQueryString(S)||(_==null?void 0:_.url);let M=null,P="";return d!=null&&d.mimeType&&(M=findLoaderByMIMEType(s,d==null?void 0:d.mimeType),P=`match forced by supplied MIME type ${d==null?void 0:d.mimeType}`),M=M||findLoaderByUrl(s,F),P=P||(M?`matched url ${F}`:""),M=M||findLoaderByMIMEType(s,T),P=P||(M?`matched MIME type ${T}`:""),M=M||findLoaderByInitialBytes(s,f),P=P||(M?`matched initial data ${getFirstCharacters(f)}`:""),d!=null&&d.fallbackMimeType&&(M=M||findLoaderByMIMEType(s,d==null?void 0:d.fallbackMimeType),P=P||(M?`matched fallback MIME type ${T}`:"")),P&&log$1.log(1,`selectLoader selected ${M==null?void 0:M.name}: ${P}.`),M}function validHTTPResponse(f){return!(f instanceof Response&&f.status===204)}function getNoValidLoaderMessage(f){const s=getResourceUrl(f),d=getResourceMIMEType(f);let _="No valid loader found (";_+=s?`${filename(s)}, `:"no url provided, ",_+=`MIME type: ${d?`"${d}"`:"not provided"}, `;const S=f?getFirstCharacters(f):"";return _+=S?` first bytes: "${S}"`:"first bytes: not available",_+=")",_}function normalizeLoaders(f){for(const s of f)normalizeLoader(s)}function findLoaderByUrl(f,s){const d=s&&EXT_PATTERN.exec(s),_=d&&d[1];return _?findLoaderByExtension(f,_):null}function findLoaderByExtension(f,s){s=s.toLowerCase();for(const d of f)for(const _ of d.extensions)if(_.toLowerCase()===s)return d;return null}function findLoaderByMIMEType(f,s){var d;for(const _ of f)if((d=_.mimeTypes)!=null&&d.some(S=>compareMIMETypes(s,S))||compareMIMETypes(s,`application/x.${_.id}`))return _;return null}function findLoaderByInitialBytes(f,s){if(!s)return null;for(const d of f)if(typeof s=="string"){if(testDataAgainstText(s,d))return d}else if(ArrayBuffer.isView(s)){if(testDataAgainstBinary(s.buffer,s.byteOffset,d))return d}else if(s instanceof ArrayBuffer&&testDataAgainstBinary(s,0,d))return d;return null}function testDataAgainstText(f,s){return s.testText?s.testText(f):(Array.isArray(s.tests)?s.tests:[s.tests]).some(_=>f.startsWith(_))}function testDataAgainstBinary(f,s,d){return(Array.isArray(d.tests)?d.tests:[d.tests]).some(S=>testBinary(f,s,d,S))}function testBinary(f,s,d,_){if(_ instanceof ArrayBuffer)return compareArrayBuffers(_,f,_.byteLength);switch(typeof _){case"function":return _(f);case"string":const S=getMagicString(f,s,_.length);return _===S;default:return!1}}function getFirstCharacters(f,s=5){return typeof f=="string"?f.slice(0,s):ArrayBuffer.isView(f)?getMagicString(f.buffer,f.byteOffset,s):f instanceof ArrayBuffer?getMagicString(f,0,s):""}function getMagicString(f,s,d){if(f.byteLength<s+d)return"";const _=new DataView(f);let S="";for(let T=0;T<d;T++)S+=String.fromCharCode(_.getUint8(s+T));return S}const DEFAULT_CHUNK_SIZE$3=256*1024;function*makeStringIterator(f,s){const d=(s==null?void 0:s.chunkSize)||DEFAULT_CHUNK_SIZE$3;let _=0;const S=new TextEncoder;for(;_<f.length;){const T=Math.min(f.length-_,d),F=f.slice(_,_+T);_+=T,yield S.encode(F)}}const DEFAULT_CHUNK_SIZE$2=256*1024;function*makeArrayBufferIterator(f,s={}){const{chunkSize:d=DEFAULT_CHUNK_SIZE$2}=s;let _=0;for(;_<f.byteLength;){const S=Math.min(f.byteLength-_,d),T=new ArrayBuffer(S),F=new Uint8Array(f,_,S);new Uint8Array(T).set(F),_+=S,yield T}}const DEFAULT_CHUNK_SIZE$1=1024*1024;async function*makeBlobIterator(f,s){const d=(s==null?void 0:s.chunkSize)||DEFAULT_CHUNK_SIZE$1;let _=0;for(;_<f.size;){const S=_+d,T=await f.slice(_,S).arrayBuffer();_=S,yield T}}function makeStreamIterator(f,s){return isBrowser$2?makeBrowserStreamIterator(f,s):makeNodeStreamIterator(f)}async function*makeBrowserStreamIterator(f,s){const d=f.getReader();let _;try{for(;;){const S=_||d.read();s!=null&&s._streamReadAhead&&(_=d.read());const{done:T,value:F}=await S;if(T)return;yield toArrayBuffer(F)}}catch{d.releaseLock()}}async function*makeNodeStreamIterator(f,s){for await(const d of f)yield toArrayBuffer(d)}function makeIterator(f,s){if(typeof f=="string")return makeStringIterator(f,s);if(f instanceof ArrayBuffer)return makeArrayBufferIterator(f,s);if(isBlob$1(f))return makeBlobIterator(f,s);if(isReadableStream$1(f))return makeStreamIterator(f,s);if(isResponse$1(f))return makeStreamIterator(f.body,s);throw new Error("makeIterator")}const ERR_DATA="Cannot convert supplied data type";function getArrayBufferOrStringFromDataSync(f,s,d){if(s.text&&typeof f=="string")return f;if(isBuffer$1(f)&&(f=f.buffer),f instanceof ArrayBuffer){const _=f;return s.text&&!s.binary?new TextDecoder("utf8").decode(_):_}if(ArrayBuffer.isView(f)){if(s.text&&!s.binary)return new TextDecoder("utf8").decode(f);let _=f.buffer;const S=f.byteLength||f.length;return(f.byteOffset!==0||S!==_.byteLength)&&(_=_.slice(f.byteOffset,f.byteOffset+S)),_}throw new Error(ERR_DATA)}async function getArrayBufferOrStringFromData(f,s,d){const _=f instanceof ArrayBuffer||ArrayBuffer.isView(f);if(typeof f=="string"||_)return getArrayBufferOrStringFromDataSync(f,s);if(isBlob$1(f)&&(f=await makeResponse(f)),isResponse$1(f)){const S=f;return await checkResponse(S),s.binary?await S.arrayBuffer():await S.text()}if(isReadableStream$1(f)&&(f=makeIterator(f,d)),isIterable(f)||isAsyncIterable$1(f))return concatenateArrayBuffersAsync(f);throw new Error(ERR_DATA)}function getFetchFunction(f,s){const d=getGlobalLoaderOptions(),_=f||d;return typeof _.fetch=="function"?_.fetch:isObject$9(_.fetch)?S=>fetchFile(S,_.fetch):s!=null&&s.fetch?s==null?void 0:s.fetch:fetchFile}function getLoaderContext(f,s,d){if(d)return d;const _={fetch:getFetchFunction(s,f),...f};if(_.url){const S=stripQueryString(_.url);_.baseUrl=S,_.queryString=extractQueryString(_.url),_.filename=filename(S),_.baseUrl=dirname(S)}return Array.isArray(_.loaders)||(_.loaders=null),_}function getLoadersFromContext(f,s){if(f&&!Array.isArray(f))return f;let d;if(f&&(d=Array.isArray(f)?f:[f]),s&&s.loaders){const _=Array.isArray(s.loaders)?s.loaders:[s.loaders];d=d?[...d,..._]:_}return d&&d.length?d:void 0}async function parse$2(f,s,d,_){s&&!Array.isArray(s)&&!isLoaderObject(s)&&(_=void 0,d=s,s=void 0),f=await f,d=d||{};const S=getResourceUrl(f),F=getLoadersFromContext(s,_),M=await selectLoader(f,F,d);return M?(d=normalizeOptions(d,M,F,S),_=getLoaderContext({url:S,_parse:parse$2,loaders:F},d,_||null),await parseWithLoader(M,f,d,_)):null}async function parseWithLoader(f,s,d,_){if(validateWorkerVersion(f),d=mergeLoaderOptions(f.options,d),isResponse$1(s)){const T=s,{ok:F,redirected:M,status:P,statusText:H,type:J,url:K}=T,z=Object.fromEntries(T.headers.entries());_.response={headers:z,ok:F,redirected:M,status:P,statusText:H,type:J,url:K}}s=await getArrayBufferOrStringFromData(s,f,d);const S=f;if(S.parseTextSync&&typeof s=="string")return S.parseTextSync(s,d,_);if(canParseWithWorker(f,d))return await parseWithWorker(f,s,d,_,parse$2);if(S.parseText&&typeof s=="string")return await S.parseText(s,d,_);if(S.parse)return await S.parse(s,d,_);throw assert$7(!S.parseSync),new Error(`${f.id} loader - no parser found and worker is disabled`)}async function load$3(f,s,d,_){let S,T;!Array.isArray(s)&&!isLoaderObject(s)?(S=[],T=s):(S=s,T=d);const F=getFetchFunction(T);let M=f;return typeof f=="string"&&(M=await F(f)),isBlob$1(f)&&(M=await F(f)),Array.isArray(S)?await parse$2(M,S,T):await parse$2(M,S,T)}const VERSION$3="4.2.4";var xQ;const parseImageNode=(xQ=globalThis.loaders)==null?void 0:xQ.parseImageNode,IMAGE_SUPPORTED=typeof Image<"u",IMAGE_BITMAP_SUPPORTED=typeof ImageBitmap<"u",NODE_IMAGE_SUPPORTED=!!parseImageNode,DATA_SUPPORTED=isBrowser$2?!0:NODE_IMAGE_SUPPORTED;function isImageTypeSupported(f){switch(f){case"auto":return IMAGE_BITMAP_SUPPORTED||IMAGE_SUPPORTED||DATA_SUPPORTED;case"imagebitmap":return IMAGE_BITMAP_SUPPORTED;case"image":return IMAGE_SUPPORTED;case"data":return DATA_SUPPORTED;default:throw new Error(`@loaders.gl/images: image ${f} not supported in this environment`)}}function getDefaultImageType(){if(IMAGE_BITMAP_SUPPORTED)return"imagebitmap";if(IMAGE_SUPPORTED)return"image";if(DATA_SUPPORTED)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function getImageType(f){const s=getImageTypeOrNull(f);if(!s)throw new Error("Not an image");return s}function getImageData(f){switch(getImageType(f)){case"data":return f;case"image":case"imagebitmap":const s=document.createElement("canvas"),d=s.getContext("2d");if(!d)throw new Error("getImageData");return s.width=f.width,s.height=f.height,d.drawImage(f,0,0),d.getImageData(0,0,f.width,f.height);default:throw new Error("getImageData")}}function getImageTypeOrNull(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&f instanceof Image?"image":f&&typeof f=="object"&&f.data&&f.width&&f.height?"data":null}const SVG_DATA_URL_PATTERN=/^data:image\/svg\+xml/,SVG_URL_PATTERN=/\.svg((\?|#).*)?$/;function isSVG(f){return f&&(SVG_DATA_URL_PATTERN.test(f)||SVG_URL_PATTERN.test(f))}function getBlobOrSVGDataUrl(f,s){if(isSVG(s)){let _=new TextDecoder().decode(f);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(_=unescape(encodeURIComponent(_)))}catch(T){throw new Error(T.message)}return`data:image/svg+xml;base64,${btoa(_)}`}return getBlob(f,s)}function getBlob(f,s){if(isSVG(s))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(f)])}async function parseToImage(f,s,d){const _=getBlobOrSVGDataUrl(f,d),S=self.URL||self.webkitURL,T=typeof _!="string"&&S.createObjectURL(_);try{return await loadToImage(T||_,s)}finally{T&&S.revokeObjectURL(T)}}async function loadToImage(f,s){const d=new Image;return d.src=f,s.image&&s.image.decode&&d.decode?(await d.decode(),d):await new Promise((_,S)=>{try{d.onload=()=>_(d),d.onerror=T=>{const F=T instanceof Error?T.message:"error";S(new Error(F))}}catch(T){S(T)}})}const EMPTY_OBJECT={};let imagebitmapOptionsSupported=!0;async function parseToImageBitmap(f,s,d){let _;isSVG(d)?_=await parseToImage(f,s,d):_=getBlob(f,d);const S=s&&s.imagebitmap;return await safeCreateImageBitmap(_,S)}async function safeCreateImageBitmap(f,s=null){if((isEmptyObject(s)||!imagebitmapOptionsSupported)&&(s=null),s)try{return await createImageBitmap(f,s)}catch(d){console.warn(d),imagebitmapOptionsSupported=!1}return await createImageBitmap(f)}function isEmptyObject(f){for(const s in f||EMPTY_OBJECT)return!1;return!0}function getISOBMFFMediaType(f){return!checkString(f,"ftyp",4)||!(f[8]&96)?null:decodeMajorBrand(f)}function decodeMajorBrand(f){switch(getUTF8String(f,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function getUTF8String(f,s,d){return String.fromCharCode(...f.slice(s,d))}function stringToBytes(f){return[...f].map(s=>s.charCodeAt(0))}function checkString(f,s,d=0){const _=stringToBytes(s);for(let S=0;S<_.length;++S)if(_[S]!==f[S+d])return!1;return!0}const BIG_ENDIAN=!1,LITTLE_ENDIAN=!0;function getBinaryImageMetadata(f){const s=toDataView(f);return getPngMetadata(s)||getJpegMetadata(s)||getGifMetadata(s)||getBmpMetadata(s)||getISOBMFFMetadata(s)}function getISOBMFFMetadata(f){const s=new Uint8Array(f instanceof DataView?f.buffer:f),d=getISOBMFFMediaType(s);return d?{mimeType:d.mimeType,width:0,height:0}:null}function getPngMetadata(f){const s=toDataView(f);return s.byteLength>=24&&s.getUint32(0,BIG_ENDIAN)===2303741511?{mimeType:"image/png",width:s.getUint32(16,BIG_ENDIAN),height:s.getUint32(20,BIG_ENDIAN)}:null}function getGifMetadata(f){const s=toDataView(f);return s.byteLength>=10&&s.getUint32(0,BIG_ENDIAN)===1195984440?{mimeType:"image/gif",width:s.getUint16(6,LITTLE_ENDIAN),height:s.getUint16(8,LITTLE_ENDIAN)}:null}function getBmpMetadata(f){const s=toDataView(f);return s.byteLength>=14&&s.getUint16(0,BIG_ENDIAN)===16973&&s.getUint32(2,LITTLE_ENDIAN)===s.byteLength?{mimeType:"image/bmp",width:s.getUint32(18,LITTLE_ENDIAN),height:s.getUint32(22,LITTLE_ENDIAN)}:null}function getJpegMetadata(f){const s=toDataView(f);if(!(s.byteLength>=3&&s.getUint16(0,BIG_ENDIAN)===65496&&s.getUint8(2)===255))return null;const{tableMarkers:_,sofMarkers:S}=getJpegMarkers();let T=2;for(;T+9<s.byteLength;){const F=s.getUint16(T,BIG_ENDIAN);if(S.has(F))return{mimeType:"image/jpeg",height:s.getUint16(T+5,BIG_ENDIAN),width:s.getUint16(T+7,BIG_ENDIAN)};if(!_.has(F))return null;T+=2,T+=s.getUint16(T,BIG_ENDIAN)}return null}function getJpegMarkers(){const f=new Set([65499,65476,65484,65501,65534]);for(let d=65504;d<65520;++d)f.add(d);return{tableMarkers:f,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function toDataView(f){if(f instanceof DataView)return f;if(ArrayBuffer.isView(f))return new DataView(f.buffer);if(f instanceof ArrayBuffer)return new DataView(f);throw new Error("toDataView")}async function parseToNodeImage(f,s){var S;const{mimeType:d}=getBinaryImageMetadata(f)||{},_=(S=globalThis.loaders)==null?void 0:S.parseImageNode;return assert$9(_),await _(f,d)}async function parseImage(f,s,d){s=s||{};const S=(s.image||{}).type||"auto",{url:T}=d||{},F=getLoadableImageType(S);let M;switch(F){case"imagebitmap":M=await parseToImageBitmap(f,s,T);break;case"image":M=await parseToImage(f,s,T);break;case"data":M=await parseToNodeImage(f);break;default:assert$9(!1)}return S==="data"&&(M=getImageData(M)),M}function getLoadableImageType(f){switch(f){case"auto":case"data":return getDefaultImageType();default:return isImageTypeSupported(f),f}}const EXTENSIONS=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],MIME_TYPES=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],DEFAULT_IMAGE_LOADER_OPTIONS={image:{type:"auto",decode:!0}},ImageLoader={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:VERSION$3,mimeTypes:MIME_TYPES,extensions:EXTENSIONS,parse:parseImage,tests:[f=>!!getBinaryImageMetadata(new DataView(f))],options:DEFAULT_IMAGE_LOADER_OPTIONS},defaultLogger=new Log({id:"deck"});let loggers={};function register(f){loggers=f}function debug(f,s,d,_){defaultLogger.level>0&&loggers[f]&&loggers[f].call(null,s,d,_)}function isJSON(f){const s=f[0],d=f[f.length-1];return s==="{"&&d==="}"||s==="["&&d==="]"}const jsonLoader={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:isJSON,parseTextSync:JSON.parse};function checkVersion(){const f="9.0.33",s=globalThis.deck&&globalThis.deck.VERSION;if(s&&s!==f)throw new Error(`deck.gl - multiple versions detected: ${s} vs ${f}`);return s||(defaultLogger.log(1,`deck.gl ${f}`)(),globalThis.deck={...globalThis.deck,VERSION:f,version:f,log:defaultLogger,_registerLoggers:register},registerLoaders([jsonLoader,[ImageLoader,{imagebitmap:{premultiplyAlpha:"none"}}]])),f}const VERSION$2=checkVersion();function assert$6(f,s){if(!f)throw new Error(s||"shadertools: assertion failed.")}const DEFAULT_PROP_VALIDATORS={number:{type:"number",validate(f,s){return Number.isFinite(f)&&typeof s=="object"&&(s.max===void 0||f<=s.max)&&(s.min===void 0||f>=s.min)}},array:{type:"array",validate(f,s){return Array.isArray(f)||ArrayBuffer.isView(f)}}};function makePropValidators(f){const s={};for(const[d,_]of Object.entries(f))s[d]=makePropValidator(_);return s}function getValidatedProperties(f,s,d){const _={};for(const[S,T]of Object.entries(s))f&&S in f&&!T.private?(T.validate&&assert$6(T.validate(f[S],T),`${d}: invalid ${S}`),_[S]=f[S]):_[S]=T.value;return _}function makePropValidator(f){let s=getTypeOf$1(f);if(s!=="object")return{value:f,...DEFAULT_PROP_VALIDATORS[s],type:s};if(typeof f=="object")return f?f.type!==void 0?{...f,...DEFAULT_PROP_VALIDATORS[f.type],type:f.type}:f.value===void 0?{type:"object",value:f}:(s=getTypeOf$1(f.value),{...f,...DEFAULT_PROP_VALIDATORS[s],type:s}):{type:"object",value:null};throw new Error("props")}function getTypeOf$1(f){return Array.isArray(f)||ArrayBuffer.isView(f)?"array":typeof f}const MODULE_INJECTORS_VS=`#ifdef MODULE_LOGDEPTH
logdepth_adjustPosition(gl_Position);
#endif
`,MODULE_INJECTORS_FS=`#ifdef MODULE_MATERIAL
gl_FragColor = material_filterColor(gl_FragColor);
#endif
#ifdef MODULE_LIGHTING
gl_FragColor = lighting_filterColor(gl_FragColor);
#endif
#ifdef MODULE_FOG
gl_FragColor = fog_filterColor(gl_FragColor);
#endif
#ifdef MODULE_PICKING
gl_FragColor = picking_filterHighlightColor(gl_FragColor);
gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif
#ifdef MODULE_LOGDEPTH
logdepth_setFragDepth();
#endif
`,MODULE_INJECTORS={vertex:MODULE_INJECTORS_VS,fragment:MODULE_INJECTORS_FS},REGEX_START_OF_MAIN=/void\s+main\s*\([^)]*\)\s*\{\n?/,REGEX_END_OF_MAIN=/}\n?[^{}]*$/,fragments=[],DECLARATION_INJECT_MARKER="__LUMA_INJECT_DECLARATIONS__";function normalizeInjections(f){const s={vertex:{},fragment:{}};for(const d in f){let _=f[d];const S=getHookStage(d);typeof _=="string"&&(_={order:0,injection:_}),s[S][d]=_}return s}function getHookStage(f){const s=f.slice(0,2);switch(s){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(s)}}function injectShader(f,s,d,_=!1){const S=s==="vertex";for(const T in d){const F=d[T];F.sort((P,H)=>P.order-H.order),fragments.length=F.length;for(let P=0,H=F.length;P<H;++P)fragments[P]=F[P].injection;const M=`${fragments.join(`
`)}
`;switch(T){case"vs:#decl":S&&(f=f.replace(DECLARATION_INJECT_MARKER,M));break;case"vs:#main-start":S&&(f=f.replace(REGEX_START_OF_MAIN,P=>P+M));break;case"vs:#main-end":S&&(f=f.replace(REGEX_END_OF_MAIN,P=>M+P));break;case"fs:#decl":S||(f=f.replace(DECLARATION_INJECT_MARKER,M));break;case"fs:#main-start":S||(f=f.replace(REGEX_START_OF_MAIN,P=>P+M));break;case"fs:#main-end":S||(f=f.replace(REGEX_END_OF_MAIN,P=>M+P));break;default:f=f.replace(T,P=>P+M)}}return f=f.replace(DECLARATION_INJECT_MARKER,""),_&&(f=f.replace(/\}\s*$/,T=>T+MODULE_INJECTORS[s])),f}let index$2=1;class ShaderModuleInstance{constructor(s){Bt(this,"name");Bt(this,"vs");Bt(this,"fs");Bt(this,"getModuleUniforms");Bt(this,"dependencies");Bt(this,"deprecations");Bt(this,"defines");Bt(this,"injections");Bt(this,"uniforms",{});Bt(this,"uniformTypes",{});const{name:d,vs:_,fs:S,dependencies:T=[],uniformTypes:F={},uniformPropTypes:M={},getUniforms:P,deprecations:H=[],defines:J={},inject:K={}}=s;assert$6(typeof d=="string"),this.name=d,this.vs=_,this.fs=S,this.getModuleUniforms=P,this.dependencies=ShaderModuleInstance.instantiateModules(T),this.deprecations=this._parseDeprecationDefinitions(H),this.defines=J,this.injections=normalizeInjections(K),this.uniformTypes=F,M&&(this.uniforms=makePropValidators(M))}static instantiateModules(s){return s.map(d=>{if(d instanceof ShaderModuleInstance)return d;assert$6(typeof d!="string",`Shader module use by name is deprecated. Import shader module '${JSON.stringify(d)}' and use it directly.`),d.name||(console.warn("shader module has no name"),d.name=`shader-module-${index$2++}`);const _=new ShaderModuleInstance(d);return _.dependencies=ShaderModuleInstance.instantiateModules(d.dependencies||[]),_})}getModuleSource(s){let d;switch(s){case"vertex":d=this.vs||"";break;case"fragment":d=this.fs||"";break;default:assert$6(!1)}const _=this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");return`// ----- MODULE ${this.name} ---------------

#define MODULE_${_}
${d}

`}getUniforms(s,d){return this.getModuleUniforms?this.getModuleUniforms(s,d):getValidatedProperties(s,this.uniforms,this.name)}getDefines(){return this.defines}checkDeprecations(s,d){this.deprecations.forEach(_=>{var S;(S=_.regex)!=null&&S.test(s)&&(_.deprecated?d.deprecated(_.old,_.new)():d.removed(_.old,_.new)())})}_parseDeprecationDefinitions(s){return s.forEach(d=>{switch(d.type){case"function":d.regex=new RegExp(`\\b${d.old}\\(`);break;default:d.regex=new RegExp(`${d.type} ${d.old};`)}}),s}_defaultGetUniforms(s={}){const d={},_=this.uniforms;for(const S in _){const T=_[S];S in s&&!T.private?(T.validate&&assert$6(T.validate(s[S],T),`${this.name}: invalid ${S}`),d[S]=s[S]):d[S]=T.value}return d}}function selectShaders(f){if(f.source&&f.platformInfo.type==="webgpu")return{...f,vs:void 0,fs:void 0};if(!f.vs)throw new Error("no vertex shader");const s=getShaderSource(f.platformInfo,f.vs);let d;return f.fs&&(d=getShaderSource(f.platformInfo,f.fs)),{...f,vs:s,fs:d}}function getShaderSource(f,s){if(typeof s=="string")return s;switch(f.type){case"webgpu":if(s!=null&&s.wgsl)return s.wgsl;throw new Error("WebGPU does not support GLSL shaders");default:if(s!=null&&s.glsl)return s.glsl;throw new Error("WebGL does not support WGSL shaders")}}function resolveModules(f){const s=ShaderModuleInstance.instantiateModules(f);return getShaderDependencies(s)}function getShaderDependencies(f){const s={},d={};return getDependencyGraph({modules:f,level:0,moduleMap:s,moduleDepth:d}),Object.keys(d).sort((_,S)=>d[S]-d[_]).map(_=>s[_])}function getDependencyGraph(f){const{modules:s,level:d,moduleMap:_,moduleDepth:S}=f;if(d>=5)throw new Error("Possible loop in shader dependency graph");for(const T of s)_[T.name]=T,(S[T.name]===void 0||S[T.name]<d)&&(S[T.name]=d);for(const T of s)T.dependencies&&getDependencyGraph({modules:T.dependencies,level:d+1,moduleMap:_,moduleDepth:S})}function getPlatformShaderDefines(f){switch(f==null?void 0:f.gpu.toLowerCase()){case"apple":return`#define APPLE_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"nvidia":return`#define NVIDIA_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function transpileGLSLShader(f,s){var _;if(Number(((_=f.match(/^#version[ \t]+(\d+)/m))==null?void 0:_[1])||100)!==300)throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(s){case"vertex":return f=convertShader(f,ES300_VERTEX_REPLACEMENTS),f;case"fragment":return f=convertShader(f,ES300_FRAGMENT_REPLACEMENTS),f;default:throw new Error(s)}}const ES300_REPLACEMENTS=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],ES300_VERTEX_REPLACEMENTS=[...ES300_REPLACEMENTS,[makeVariableTextRegExp("attribute"),"in $1"],[makeVariableTextRegExp("varying"),"out $1"]],ES300_FRAGMENT_REPLACEMENTS=[...ES300_REPLACEMENTS,[makeVariableTextRegExp("varying"),"in $1"]];function convertShader(f,s){for(const[d,_]of s)f=f.replace(d,_);return f}function makeVariableTextRegExp(f){return new RegExp(`\\b${f}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function getShaderHooks(f,s){let d="";for(const _ in f){const S=f[_];if(d+=`void ${S.signature} {
`,S.header&&(d+=`  ${S.header}`),s[_]){const T=s[_];T.sort((F,M)=>F.order-M.order);for(const F of T)d+=`  ${F.injection}
`}S.footer&&(d+=`  ${S.footer}`),d+=`}
`}return d}function normalizeShaderHooks(f){const s={vertex:{},fragment:{}};for(const d of f){let _,S;typeof d!="string"?(_=d,S=_.hook):(_={},S=d),S=S.trim();const[T,F]=S.split(":"),M=S.replace(/\(.+/,""),P=Object.assign(_,{signature:F});switch(T){case"vs":s.vertex[M]=P;break;case"fs":s.fragment[M]=P;break;default:throw new Error(T)}}return s}function getShaderInfo$1(f,s){return{name:getShaderName$1(f,s),language:"glsl",version:getShaderVersion$1(f)}}function getShaderName$1(f,s="unnamed"){const _=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(f);return _?_[1]:s}function getShaderVersion$1(f){let s=100;const d=f.match(/[^\s]+/g);if(d&&d.length>=2&&d[0]==="#version"){const _=parseInt(d[1],10);Number.isFinite(_)&&(s=_)}if(s!==100&&s!==300)throw new Error(`Invalid GLSL version ${s}`);return s}const INJECT_SHADER_DECLARATIONS=`

${DECLARATION_INJECT_MARKER}
`,FRAGMENT_SHADER_PROLOGUE=`precision highp float;
`;function assembleShaderWGSL(f){const s=resolveModules(f.modules||[]);return{source:assembleWGSLShader(f.platformInfo,{...f,source:f.source,stage:"vertex",modules:s}),getUniforms:assembleGetUniforms(s)}}function assembleShaderPairWGSL(f){const s=resolveModules(f.modules||[]);return{vs:assembleWGSLShader(f.platformInfo,{...f,source:f.vs,stage:"vertex",modules:s}),fs:assembleWGSLShader(f.platformInfo,{...f,source:f.fs,stage:"fragment",modules:s}),getUniforms:assembleGetUniforms(s)}}function assembleShaderPairGLSL(f){const{vs:s,fs:d}=f,_=resolveModules(f.modules||[]);return{vs:assembleGLSLShader(f.platformInfo,{...f,source:s,stage:"vertex",modules:_}),fs:assembleGLSLShader(f.platformInfo,{...f,source:d,stage:"fragment",modules:_}),getUniforms:assembleGetUniforms(_)}}function assembleWGSLShader(f,s){const{source:d,stage:_,modules:S,hookFunctions:T=[],inject:F={},log:M}=s;assert$6(typeof d=="string","shader source must be a string");const P=d;let H="";const J=normalizeShaderHooks(T),K={},z={},oe={};for(const ae in F){const ge=typeof F[ae]=="string"?{injection:F[ae],order:0}:F[ae],pe=/^(v|f)s:(#)?([\w-]+)$/.exec(ae);if(pe){const he=pe[2],ve=pe[3];he?ve==="decl"?z[ae]=[ge]:oe[ae]=[ge]:K[ae]=[ge]}else oe[ae]=[ge]}const se=f.type!=="webgpu"?S:[];for(const ae of se){M&&ae.checkDeprecations(P,M);const ge=ae.getModuleSource(_,"wgsl");H+=ge;const pe=ae.injections[_];for(const he in pe){const ve=/^(v|f)s:#([\w-]+)$/.exec(he);if(ve){const Re=ve[2]==="decl"?z:oe;Re[he]=Re[he]||[],Re[he].push(pe[he])}else K[he]=K[he]||[],K[he].push(pe[he])}}return H+=INJECT_SHADER_DECLARATIONS,H=injectShader(H,_,z),H+=getShaderHooks(J[_],K),H+=P,H=injectShader(H,_,oe),H}function assembleGLSLShader(f,s){const{id:d,source:_,stage:S,language:T="glsl",modules:F,defines:M={},hookFunctions:P=[],inject:H={},prologue:J=!0,log:K}=s;assert$6(typeof _=="string","shader source must be a string");const z=T==="glsl"?getShaderInfo$1(_).version:-1,oe=f.shaderLanguageVersion,se=z===100?"#version 100":"#version 300 es",ge=_.split(`
`).slice(1).join(`
`),pe={};F.forEach(ye=>{Object.assign(pe,ye.getDefines())}),Object.assign(pe,M);let he="";switch(T){case"wgsl":break;case"glsl":he=J?`${se}

// ----- PROLOGUE -------------------------
${getShaderNameDefine({id:d,source:_,stage:S})}
${`#define SHADER_TYPE_${S.toUpperCase()}`}
${getPlatformShaderDefines(f)}
${S==="fragment"?FRAGMENT_SHADER_PROLOGUE:""}

// ----- APPLICATION DEFINES -------------------------

${getApplicationDefines(pe)}

`:`${se}
`;break}const ve=normalizeShaderHooks(P),be={},Re={},Fe={};for(const ye in H){const Ue=typeof H[ye]=="string"?{injection:H[ye],order:0}:H[ye],It=/^(v|f)s:(#)?([\w-]+)$/.exec(ye);if(It){const St=It[2],At=It[3];St?At==="decl"?Re[ye]=[Ue]:Fe[ye]=[Ue]:be[ye]=[Ue]}else Fe[ye]=[Ue]}for(const ye of F){K&&ye.checkDeprecations(ge,K);const Ue=ye.getModuleSource(S);he+=Ue;const It=ye.injections[S];for(const St in It){const At=/^(v|f)s:#([\w-]+)$/.exec(St);if(At){const Ct=At[2]==="decl"?Re:Fe;Ct[St]=Ct[St]||[],Ct[St].push(It[St])}else be[St]=be[St]||[],be[St].push(It[St])}}return he+="// ----- MAIN SHADER SOURCE -------------------------",he+=INJECT_SHADER_DECLARATIONS,he=injectShader(he,S,Re),he+=getShaderHooks(ve[S],be),he+=ge,he=injectShader(he,S,Fe),T==="glsl"&&z!==oe&&(he=transpileGLSLShader(he,S)),he.trim()}function assembleGetUniforms(f){return function(d){const _={};for(const S of f){const T=S.getUniforms(d,_);Object.assign(_,T)}return _}}function getShaderNameDefine(f){const{id:s,source:d,stage:_}=f;return s&&d.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${s}_${_}

`:""}function getApplicationDefines(f={}){let s="";for(const d in f){const _=f[d];(_||Number.isFinite(_))&&(s+=`#define ${d.toUpperCase()} ${f[d]}
`)}return s}const Rm=class Rm{constructor(){Bt(this,"_hookFunctions",[]);Bt(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return Rm.defaultShaderAssembler=Rm.defaultShaderAssembler||new Rm,Rm.defaultShaderAssembler}addDefaultModule(s){this._defaultModules.find(d=>d.name===(typeof s=="string"?s:s.name))||this._defaultModules.push(s)}removeDefaultModule(s){const d=typeof s=="string"?s:s.name;this._defaultModules=this._defaultModules.filter(_=>_.name!==d)}addShaderHook(s,d){d&&(s=Object.assign(d,{hook:s})),this._hookFunctions.push(s)}assembleShader(s){const d=this._getModuleList(s.modules),_=this._hookFunctions,S=selectShaders(s);return{...assembleShaderWGSL({platformInfo:s.platformInfo,...S,modules:d,hookFunctions:_}),modules:d}}assembleShaderPair(s){const d=selectShaders(s),_=this._getModuleList(s.modules),S=this._hookFunctions,{platformInfo:T}=s;return{...s.platformInfo.shaderLanguage==="wgsl"?assembleShaderPairWGSL({platformInfo:T,...d,modules:_,hookFunctions:S}):assembleShaderPairGLSL({platformInfo:T,...d,modules:_,hookFunctions:S}),modules:_}}_getModuleList(s=[]){const d=new Array(this._defaultModules.length+s.length),_={};let S=0;for(let T=0,F=this._defaultModules.length;T<F;++T){const M=this._defaultModules[T],P=M.name;d[S++]=M,_[P]=!0}for(let T=0,F=s.length;T<F;++T){const M=s[T],P=M.name;_[P]||(d[S++]=M,_[P]=!0)}return d.length=S,ShaderModuleInstance.instantiateModules(d)}};Bt(Rm,"defaultShaderAssembler");let ShaderAssembler=Rm;const FS_GLES=`out vec4 transform_output;
void main() {
transform_output = vec4(0);
}`,FS300=`#version 300 es
${FS_GLES}`;function getPassthroughFS(f){const{input:s,inputChannels:d,output:_}=f||{};if(!s)return FS300;if(!d)throw new Error("inputChannels");const S=channelCountToType(d),T=convertToVec4(s,d);return`#version 300 es
in ${S} ${s};
out vec4 ${_};
void main() {
  ${_} = ${T};
}`}function channelCountToType(f){switch(f){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${f}`)}}function convertToVec4(f,s){switch(s){case 1:return`vec4(${f}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${f}, 0.0, 1.0)`;case 3:return`vec4(${f}, 1.0)`;case 4:return f;default:throw new Error(`invalid channels: ${s}`)}}const log=new Log({id:"luma.gl"});class StatsManager{constructor(){Bt(this,"stats",new Map)}getStats(s){return this.get(s)}get(s){return this.stats.has(s)||this.stats.set(s,new Stats({id:s})),this.stats.get(s)}}const lumaStats=new StatsManager;function initializeLuma(){const f="9.0.27",s="set luma.log.level=1 (or higher) to trace rendering";if(globalThis.luma&&globalThis.luma.VERSION!==f)throw new Error(`luma.gl - multiple VERSIONs detected: ${globalThis.luma.VERSION} vs ${f}`);return globalThis.luma||(isBrowser$1()&&log.log(1,`${f} - ${s}`)(),globalThis.luma=globalThis.luma||{VERSION:f,version:f,log,stats:lumaStats}),f}const VERSION$1=initializeLuma();function isTypedArray$1(f){return ArrayBuffer.isView(f)&&!(f instanceof DataView)?f:null}function isNumberArray$1(f){return Array.isArray(f)?f.length===0||typeof f[0]=="number"?f:null:isTypedArray$1(f)}const uidCounters={};function uid(f="id"){uidCounters[f]=uidCounters[f]||1;const s=uidCounters[f]++;return`${f}-${s}`}function isObjectEmpty$3(f){let s=!0;for(const d in f){s=!1;break}return s}var i0;let Resource$1=(i0=class{constructor(s,d,_){Bt(this,"id");Bt(this,"props");Bt(this,"userData",{});Bt(this,"_device");Bt(this,"destroyed",!1);Bt(this,"allocatedBytes",0);Bt(this,"_attachedResources",new Set);if(!s)throw new Error("no device");this._device=s,this.props=selectivelyMerge(d,_);const S=this.props.id!=="undefined"?this.props.id:uid(this[Symbol.toStringTag]);this.props.id=S,this.id=S,this.userData=this.props.userData||{},this.addStats()}destroy(){this.destroyResource()}delete(){return this.destroy(),this}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}(${this.id})`}getProps(){return this.props}attachResource(s){this._attachedResources.add(s)}detachResource(s){this._attachedResources.delete(s)}destroyAttachedResource(s){this._attachedResources.delete(s)&&s.destroy()}destroyAttachedResources(){for(const s of Object.values(this._attachedResources))s.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const s=this._device.statsManager.getStats("Resource Counts"),d=this[Symbol.toStringTag];s.get(`${d}s Active`).decrementCount()}trackAllocatedMemory(s,d=this[Symbol.toStringTag]){const _=this._device.statsManager.getStats("Resource Counts");_.get("GPU Memory").addCount(s),_.get(`${d} Memory`).addCount(s),this.allocatedBytes=s}trackDeallocatedMemory(s=this[Symbol.toStringTag]){const d=this._device.statsManager.getStats("Resource Counts");d.get("GPU Memory").subtractCount(this.allocatedBytes),d.get(`${s} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const s=this._device.statsManager.getStats("Resource Counts"),d=this[Symbol.toStringTag];s.get("Resources Created").incrementCount(),s.get(`${d}s Created`).incrementCount(),s.get(`${d}s Active`).incrementCount()}},Bt(i0,"defaultProps",{id:"undefined",handle:void 0,userData:void 0}),i0);function selectivelyMerge(f,s){const d={...s};for(const _ in f)f[_]!==void 0&&(d[_]=f[_]);return d}var zC;let Buffer$1=(zC=class extends Resource$1{constructor(d,_){const S={..._};(_.usage||0)&zC.INDEX&&!_.indexType&&(_.data instanceof Uint32Array?S.indexType="uint32":_.data instanceof Uint16Array&&(S.indexType="uint16"));super(d,S,zC.defaultProps);Bt(this,"usage");Bt(this,"indexType");Bt(this,"updateTimestamp");Bt(this,"debugData",new ArrayBuffer(0));this.usage=_.usage||0,this.indexType=S.indexType,this.updateTimestamp=d.incrementTimestamp()}get[Symbol.toStringTag](){return"Buffer"}readSyncWebGL(d,_){throw new Error("not implemented")}_setDebugData(d,_,S){const T=ArrayBuffer.isView(d)?d.buffer:d,F=Math.min(d?d.byteLength:S,zC.DEBUG_DATA_MAX_LENGTH);d===null?this.debugData=new ArrayBuffer(F):_===0&&S===d.byteLength?this.debugData=T.slice(0,F):this.debugData=T.slice(_,_+F)}},Bt(zC,"defaultProps",{...Resource$1.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1}),Bt(zC,"MAP_READ",1),Bt(zC,"MAP_WRITE",2),Bt(zC,"COPY_SRC",4),Bt(zC,"COPY_DST",8),Bt(zC,"INDEX",16),Bt(zC,"VERTEX",32),Bt(zC,"UNIFORM",64),Bt(zC,"STORAGE",128),Bt(zC,"INDIRECT",256),Bt(zC,"QUERY_RESOLVE",512),Bt(zC,"DEBUG_DATA_MAX_LENGTH",32),zC);function decodeVertexType(f){const s=TYPE_MAP[f],d=getDataTypeBytes(s),_=f.includes("norm"),S=!_&&!f.startsWith("float"),T=f.startsWith("s");return{dataType:TYPE_MAP[f],byteLength:d,integer:S,signed:T,normalized:_}}function getDataTypeBytes(f){return TYPE_SIZES$2[f]}const TYPE_MAP={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},TYPE_SIZES$2={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4},COMPRESSED_TEXTURE_FORMAT_PREFIXES=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],REGEX=/^(rg?b?a?)([0-9]*)([a-z]*)(-srgb)?(-webgl|-unsized)?$/;function isTextureFormatCompressed(f){return COMPRESSED_TEXTURE_FORMAT_PREFIXES.some(s=>f.startsWith(s))}function decodeTextureFormat(f){const s=REGEX.exec(f);if(s){const[,d,_,S,T,F]=s;if(d){const M=`${S}${_}`,P=decodeVertexType(M);return{format:d,components:d.length,srgb:T==="-srgb",unsized:F==="-unsized",webgl:F==="-webgl",...P}}}return decodeNonStandardFormat(f)}const EXCEPTIONS={"rgba4unorm-webgl":{format:"rgba",bpp:2},"rgb565unorm-webgl":{format:"rgb",bpp:2},"rgb5a1unorm-webgl":{format:"rgba",bbp:2},rgb9e5ufloat:{format:"rgb",bbp:4},rg11b10ufloat:{format:"rgb",bbp:4},rgb10a2unorm:{format:"rgba",bbp:4},"rgb10a2uint-webgl":{format:"rgba",bbp:4},stencil8:{components:1,bpp:1,a:"stencil"},depth16unorm:{components:1,bpp:2,a:"depth"},depth24plus:{components:1,bpp:3,a:"depth"},depth32float:{components:1,bpp:4,a:"depth"},"depth24plus-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth24unorm-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth32float-stencil8":{components:2,bpp:4,a:"depth-stencil"}};function decodeNonStandardFormat(f){var d;const s=EXCEPTIONS[f];if(!s)throw new Error(`Unknown format ${f}`);return{format:s.format||"",components:s.components||((d=s.format)==null?void 0:d.length)||1,byteLength:s.bpp||1,srgb:!1,unsized:!1}}class DeviceLimits{}class DeviceFeatures{constructor(s=[],d){Bt(this,"features");Bt(this,"disabledFeatures");this.features=new Set(s),this.disabledFeatures=d||{}}*[Symbol.iterator](){yield*this.features}has(s){return!this.disabledFeatures[s]&&this.features.has(s)}}const SB=class SB{constructor(s){Bt(this,"id");Bt(this,"props");Bt(this,"userData",{});Bt(this,"statsManager",lumaStats);Bt(this,"_lumaData",{});Bt(this,"timestamp",0);this.props={...SB.defaultProps,...s},this.id=this.props.id||uid(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return"Device"}isTextureFormatCompressed(s){return isTextureFormatCompressed(s)}loseDevice(){return!1}getCanvasContext(){if(!this.canvasContext)throw new Error("Device has no CanvasContext");return this.canvasContext}createTexture(s){return(s instanceof Promise||typeof s=="string")&&(s={data:s}),this._createTexture(s)}createCommandEncoder(s={}){throw new Error("not implemented")}readPixelsToArrayWebGL(s,d){throw new Error("not implemented")}readPixelsToBufferWebGL(s,d){throw new Error("not implemented")}setParametersWebGL(s){throw new Error("not implemented")}getParametersWebGL(s){throw new Error("not implemented")}withParametersWebGL(s,d){throw new Error("not implemented")}clearWebGL(s){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(s){this.props.onError(s)}_getBufferProps(s){(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const d={...s};return(s.usage||0)&Buffer$1.INDEX&&!s.indexType&&(s.data instanceof Uint32Array?d.indexType="uint32":s.data instanceof Uint16Array?d.indexType="uint16":log.warn("indices buffer content must be of integer type")()),d}};Bt(SB,"defaultProps",{id:null,canvas:null,container:null,manageState:!0,width:800,height:600,requestMaxLimits:!0,debug:!!log.get("debug"),spector:!!(log.get("spector")||log.get("spectorjs")),break:[],initalizeFeatures:!0,disabledFeatures:{"compilation-status-async-webgl":!0},gl:null,onError:s=>log.error(s.message)}),Bt(SB,"VERSION",VERSION$1);let Device=SB;function assert$5(f,s){if(!f)throw new Error(s||"luma.gl: assertion failed.")}const deviceMap=new Map,rB=class rB{static registerDevices(s){for(const d of s)assert$5(d.type&&d.isSupported&&d.create),deviceMap.set(d.type,d)}static getAvailableDevices(){return Array.from(deviceMap).map(s=>s.type)}static getSupportedDevices(){return Array.from(deviceMap).filter(s=>s.isSupported()).map(s=>s.type)}static setDefaultDeviceProps(s){Object.assign(Device.defaultProps,s)}static async attachDevice(s){const d=getDeviceMap(s.devices)||deviceMap;if(s.handle instanceof WebGL2RenderingContext){const _=d.get("webgl");if(_)return await _.attach(s.handle)}if(s.handle===null){const _=d.get("unknown");if(_)return await _.attach(null)}throw new Error("Failed to attach device. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static async createDevice(s={}){var T,F;s={...rB.defaultProps,...s},s.gl&&(s.type="webgl");const d=getDeviceMap(s.devices)||deviceMap;let _,S;switch(s.type){case"webgpu":if(_=d.get("webgpu"),_)return await _.create(s);break;case"webgl":if(S=d.get("webgl"),S)return await S.create(s);break;case"unknown":const M=d.get("unknown");if(M)return await M.create(s);break;case"best-available":if(_=d.get("webgpu"),(T=_==null?void 0:_.isSupported)!=null&&T.call(_))return await _.create(s);if(S=d.get("webgl"),(F=S==null?void 0:S.isSupported)!=null&&F.call(S))return await S.create(s);break}throw new Error("No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static enforceWebGL2(s=!0){const d=HTMLCanvasElement.prototype;if(!s&&d.originalGetContext){d.getContext=d.originalGetContext,d.originalGetContext=void 0;return}d.originalGetContext=d.getContext,d.getContext=function(_,S){return _==="webgl"||_==="experimental-webgl"?this.originalGetContext("webgl2",S):this.originalGetContext(_,S)}}};Bt(rB,"defaultProps",{...Device.defaultProps,type:"best-available",devices:void 0}),Bt(rB,"stats",lumaStats),Bt(rB,"log",log);let luma=rB;function getDeviceMap(f){if(!f||(f==null?void 0:f.length)===0)return null;const s=new Map;for(const d of f)s.set(d.type,d);return s}const isPage=isBrowser$1()&&typeof document<"u",isPageLoaded=()=>isPage&&document.readyState==="complete",DEFAULT_CANVAS_CONTEXT_PROPS={canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,colorSpace:"srgb",alphaMode:"opaque"};class CanvasContext{constructor(s){Bt(this,"id");Bt(this,"props");Bt(this,"canvas");Bt(this,"htmlCanvas");Bt(this,"offscreenCanvas");Bt(this,"type");Bt(this,"width",1);Bt(this,"height",1);Bt(this,"resizeObserver");Bt(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});if(this.props={...DEFAULT_CANVAS_CONTEXT_PROPS,...s},s=this.props,!isBrowser$1()){this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,this.canvas=null;return}if(s.canvas)typeof s.canvas=="string"?this.canvas=getCanvasFromDOM(s.canvas):this.canvas=s.canvas;else{const d=createCanvas(s),_=getContainer((s==null?void 0:s.container)||null);_.insertBefore(d,_.firstChild),this.canvas=d,s!=null&&s.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&s.autoResize&&(this.resizeObserver=new ResizeObserver(d=>{for(const _ of d)_.target===this.canvas&&this.update()}),this.resizeObserver.observe(this.canvas))}static get isPageLoaded(){return isPageLoaded()}getDevicePixelRatio(s){return typeof OffscreenCanvas<"u"&&this.canvas instanceof OffscreenCanvas||(s=s===void 0?this.props.useDevicePixels:s,!s||s<=0)?1:s===!0?typeof window<"u"&&window.devicePixelRatio||1:s}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const s=this.getDevicePixelRatio(),d=this.canvas;return d.parentElement?[d.clientWidth*s,d.clientHeight*s]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[s,d]=this.getPixelSize();return s/d}cssToDeviceRatio(){try{const[s]=this.getDrawingBufferSize(),{clientWidth:d}=this._canvasSizeInfo;return d?s/d:1}catch{return 1}}cssToDevicePixels(s,d=!0){const _=this.cssToDeviceRatio(),[S,T]=this.getDrawingBufferSize();return scalePixels(s,_,S,T,d)}setDevicePixelRatio(s,d={}){if(!this.htmlCanvas)return;let _="width"in d?d.width:this.htmlCanvas.clientWidth,S="height"in d?d.height:this.htmlCanvas.clientHeight;(!_||!S)&&(log.log(1,"Canvas clientWidth/clientHeight is 0")(),s=1,_=this.htmlCanvas.width||1,S=this.htmlCanvas.height||1);const T=this._canvasSizeInfo;if(T.clientWidth!==_||T.clientHeight!==S||T.devicePixelRatio!==s){let F=s;const M=Math.floor(_*F),P=Math.floor(S*F);this.htmlCanvas.width=M,this.htmlCanvas.height=P;const[H,J]=this.getDrawingBufferSize();(H!==M||J!==P)&&(F=Math.min(H/_,J/S),this.htmlCanvas.width=Math.floor(_*F),this.htmlCanvas.height=Math.floor(S*F),log.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=_,this._canvasSizeInfo.clientHeight=S,this._canvasSizeInfo.devicePixelRatio=s}}getDrawingBufferSize(){const s=this.device.gl;if(!s)throw new Error("canvas size");return[s.drawingBufferWidth,s.drawingBufferHeight]}_setAutoCreatedCanvasId(s){var d;((d=this.htmlCanvas)==null?void 0:d.id)==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=s)}}Bt(CanvasContext,"pageLoaded",getPageLoadPromise());function getPageLoadPromise(){return isPageLoaded()||typeof window>"u"?Promise.resolve():new Promise(f=>{window.addEventListener("load",()=>f())})}function getContainer(f){if(typeof f=="string"){const s=document.getElementById(f);if(!s&&!isPageLoaded())throw new Error(`Accessing '${f}' before page was loaded`);if(!s)throw new Error(`${f} is not an HTML element`);return s}else if(f)return f;return document.body}function getCanvasFromDOM(f){const s=document.getElementById(f);if(!s&&!isPageLoaded())throw new Error(`Accessing '${f}' before page was loaded`);if(!(s instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return s}function createCanvas(f){const{width:s,height:d}=f,_=document.createElement("canvas");return _.id="lumagl-auto-created-canvas",_.width=s||1,_.height=d||1,_.style.width=Number.isFinite(s)?`${s}px`:"100%",_.style.height=Number.isFinite(d)?`${d}px`:"100%",_}function scalePixels(f,s,d,_,S){const T=f,F=scaleX(T[0],s,d);let M=scaleY(T[1],s,_,S),P=scaleX(T[0]+1,s,d);const H=P===d-1?P:P-1;P=scaleY(T[1]+1,s,_,S);let J;return S?(P=P===0?P:P+1,J=M,M=P):J=P===_-1?P:P-1,{x:F,y:M,width:Math.max(H-F+1,1),height:Math.max(J-M+1,1)}}function scaleX(f,s,d){return Math.min(Math.round(f*s),d-1)}function scaleY(f,s,d,_){return _?Math.max(0,d-1-Math.round(f*s)):Math.min(Math.round(f*s),d-1)}const ZE=class ZE extends Resource$1{constructor(d,_,S=ZE.defaultProps){super(d,_,S);Bt(this,"dimension");Bt(this,"format");Bt(this,"width");Bt(this,"height");Bt(this,"depth");Bt(this,"updateTimestamp");this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.updateTimestamp=d.incrementTimestamp()}get[Symbol.toStringTag](){return"Texture"}};Bt(ZE,"defaultProps",{...Resource$1.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!0,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,type:void 0,sampler:{},view:void 0}),Bt(ZE,"COPY_SRC",1),Bt(ZE,"COPY_DST",2),Bt(ZE,"TEXTURE_BINDING",4),Bt(ZE,"STORAGE_BINDING",8),Bt(ZE,"RENDER_ATTACHMENT",16);let Texture=ZE;const ry=class ry extends Resource$1{get[Symbol.toStringTag](){return"TextureView"}constructor(s,d){super(s,d,ry.defaultProps)}};Bt(ry,"defaultProps",{...Resource$1.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});let TextureView=ry;function formatCompilerLog(f,s,d){let _="";const S=s.split(/\r?\n/),T=f.slice().sort((F,M)=>F.lineNum-M.lineNum);switch((d==null?void 0:d.showSourceCode)||"no"){case"all":let F=0;for(let M=1;M<=S.length;M++)for(_+=getNumberedLine(S[M-1],M,d);T.length>F&&T[F].lineNum===M;){const P=T[F++];_+=formatCompilerMessage(P,S,P.lineNum,{...d,inlineSource:!1})}return _;case"issues":case"no":for(const M of f)_+=formatCompilerMessage(M,S,M.lineNum,{inlineSource:(d==null?void 0:d.showSourceCode)!=="no"});return _}}function formatCompilerMessage(f,s,d,_){if(_!=null&&_.inlineSource){const S=getNumberedLines(s,d),T=f.linePos>0?`${" ".repeat(f.linePos+5)}^^^
`:"";return`
${S}${T}${f.type.toUpperCase()}: ${f.message}

`}return _!=null&&_.html?`<div class='luma-compiler-log-error' style="color:red;"><b> ${f.type.toUpperCase()}: ${f.message}</b></div>`:`${f.type.toUpperCase()}: ${f.message}`}function getNumberedLines(f,s,d){let _="";for(let S=s-2;S<=s;S++){const T=f[S-1];T!==void 0&&(_+=getNumberedLine(T,s,d))}return _}function getNumberedLine(f,s,d){const _=d!=null&&d.html?escapeHTML(f):f;return`${padLeft(String(s),4)}: ${_}${d!=null&&d.html?"<br/>":`
`}`}function padLeft(f,s){let d="";for(let _=f.length;_<s;++_)d+=" ";return d+f}function escapeHTML(f){return f.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function getShaderInfo(f,s){return{name:getShaderName(f,s),language:"glsl",version:getShaderVersion(f)}}function getShaderName(f,s="unnamed"){const _=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(f);return _?_[1]:s}function getShaderVersion(f){let s=100;const d=f.match(/[^\s]+/g);if(d&&d.length>=2&&d[0]==="#version"){const _=parseInt(d[1],10);Number.isFinite(_)&&(s=_)}return s}const iy=class iy extends Resource$1{constructor(d,_){super(d,{id:getShaderIdFromProps(_),..._},iy.defaultProps);Bt(this,"stage");Bt(this,"source");Bt(this,"compilationStatus","pending");this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return"Shader"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(d=this.props.debug){switch(d){case"never":return;case"errors":if(this.compilationStatus==="success")return;break}const _=await this.getCompilationInfo();this.props.debug==="warnings"&&(_==null?void 0:_.length)===0||this._displayShaderLog(_)}_displayShaderLog(d){var H;if(typeof document>"u"||!(document!=null&&document.createElement))return;const _=getShaderInfo(this.source).name,S=`${this.stage} ${_}`;let T=formatCompilerLog(d,this.source,{showSourceCode:"all",html:!0});const F=this.getTranslatedSource();F&&(T+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${F}</pre></code>`);const M=document.createElement("Button");M.innerHTML=`
<h1>Shader Compilation Error in ${S}</h1><br /><br />
<code style="user-select:text;"><pre>
${T}
</pre></code>`,M.style.top="10px",M.style.left="10px",M.style.position="absolute",M.style.zIndex="9999",M.style.width="100%",M.style.textAlign="left",document.body.appendChild(M);const P=document.getElementsByClassName("luma-compiler-log-error");(H=P[0])!=null&&H.scrollIntoView&&P[0].scrollIntoView(),M.onclick=()=>{const J=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(J)}}};Bt(iy,"defaultProps",{...Resource$1.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debug:"errors"});let Shader=iy;function getShaderIdFromProps(f){return getShaderInfo(f.source).name||f.id||uid(`unnamed ${f.stage}-shader`)}const ny=class ny extends Resource$1{get[Symbol.toStringTag](){return"Sampler"}constructor(s,d){super(s,d,ny.defaultProps)}};Bt(ny,"defaultProps",{...Resource$1.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});let Sampler=ny;const oy=class oy extends Resource$1{constructor(d,_={}){super(d,_,oy.defaultProps);Bt(this,"width");Bt(this,"height");Bt(this,"colorAttachments",[]);Bt(this,"depthStencilAttachment",null);this.width=this.props.width,this.height=this.props.height}get[Symbol.toStringTag](){return"Framebuffer"}resize(d){let _=!d;if(d){const[S,T]=Array.isArray(d)?d:[d.width,d.height];_=_||T!==this.height||S!==this.width,this.width=S,this.height=T}_&&(log.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map(_=>{if(typeof _=="string"){const S=this.createColorTexture(_);return this.attachResource(S),S.view}return _ instanceof Texture?_.view:_});const d=this.props.depthStencilAttachment;if(d)if(typeof d=="string"){const _=this.createDepthStencilTexture(d);this.attachResource(_),this.depthStencilAttachment=_.view}else d instanceof Texture?this.depthStencilAttachment=d.view:this.depthStencilAttachment=d}createColorTexture(d){return this.device.createTexture({id:"color-attachment",usage:Texture.RENDER_ATTACHMENT,format:d,width:this.width,height:this.height})}createDepthStencilTexture(d){return this.device.createTexture({id:"depth-stencil-attachment",usage:Texture.RENDER_ATTACHMENT,format:d,width:this.width,height:this.height})}resizeAttachments(d,_){for(let S=0;S<this.colorAttachments.length;++S)if(this.colorAttachments[S]){const T=this.device._createTexture({...this.colorAttachments[S].props,width:d,height:_});this.destroyAttachedResource(this.colorAttachments[S]),this.colorAttachments[S]=T.view,this.attachResource(T.view)}if(this.depthStencilAttachment){const S=this.device._createTexture({...this.depthStencilAttachment.props,width:d,height:_});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=S.view,this.attachResource(S)}}};Bt(oy,"defaultProps",{...Resource$1.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});let Framebuffer=oy;const sy=class sy extends Resource$1{constructor(d,_){super(d,_,sy.defaultProps);Bt(this,"shaderLayout");Bt(this,"bufferLayout");Bt(this,"linkStatus","pending");Bt(this,"hash","");this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return"RenderPipeline"}setUniformsWebGL(d){throw new Error("Use uniform blocks")}};Bt(sy,"defaultProps",{...Resource$1.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}});let RenderPipeline=sy;const ay=class ay extends Resource$1{get[Symbol.toStringTag](){return"RenderPass"}constructor(s,d){super(s,d,ay.defaultProps)}};Bt(ay,"defaultProps",{...Resource$1.defaultProps,framebuffer:null,parameters:void 0,clearColor:[0,0,0,0],clearDepth:1,clearStencil:0,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});let RenderPass=ay;const Ay=class Ay extends Resource$1{constructor(d,_){super(d,_,Ay.defaultProps);Bt(this,"hash","")}get[Symbol.toStringTag](){return"ComputePipeline"}};Bt(Ay,"defaultProps",{...Resource$1.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});let ComputePipeline=Ay;const ly=class ly extends Resource$1{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(s,d){super(s,d,ly.defaultProps)}};Bt(ly,"defaultProps",{...Resource$1.defaultProps,measureExecutionTime:void 0});let CommandEncoder=ly;const cy=class cy extends Resource$1{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(s,d){super(s,d,cy.defaultProps)}};Bt(cy,"defaultProps",{...Resource$1.defaultProps});let CommandBuffer=cy;function decodeShaderAttributeType(f){const[s,d]=TYPE_INFO[f],_=s==="i32"||s==="u32",S=s!=="u32",T=TYPE_SIZES$1[s]*d,F=getCompatibleVertexFormat(s,d);return{dataType:s,components:d,defaultVertexFormat:F,byteLength:T,integer:_,signed:S}}function getCompatibleVertexFormat(f,s){let d;switch(f){case"f32":d="float32";break;case"i32":d="sint32";break;case"u32":d="uint32";break;case"f16":return s<=2?"float16x2":"float16x4"}return s===1?d:`${d}x${s}`}const TYPE_INFO={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},TYPE_SIZES$1={f32:4,f16:2,i32:4,u32:4};function decodeVertexFormat(f){let s;f.endsWith("-webgl")&&(f.replace("-webgl",""),s=!0);const[d,_]=f.split("x"),S=d,T=_?parseInt(_):1,F=decodeVertexType(S),M={type:S,components:T,byteLength:F.byteLength*T,integer:F.integer,signed:F.signed,normalized:F.normalized};return s&&(M.webglOnly=!0),M}function getAttributeInfosFromLayouts(f,s){const d={};for(const _ of f.attributes)d[_.name]=getAttributeInfoFromLayouts(f,s,_.name);return d}function getAttributeInfosByLocation(f,s,d=16){const _=getAttributeInfosFromLayouts(f,s),S=new Array(d).fill(null);for(const T of Object.values(_))S[T.location]=T;return S}function getAttributeInfoFromLayouts(f,s,d){const _=getAttributeFromShaderLayout(f,d),S=getAttributeFromBufferLayout(s,d);if(!_)return null;const T=decodeShaderAttributeType(_.type),F=(S==null?void 0:S.vertexFormat)||T.defaultVertexFormat,M=decodeVertexFormat(F);return{attributeName:(S==null?void 0:S.attributeName)||_.name,bufferName:(S==null?void 0:S.bufferName)||_.name,location:_.location,shaderType:_.type,shaderDataType:T.dataType,shaderComponents:T.components,vertexFormat:F,bufferDataType:M.type,bufferComponents:M.components,normalized:M.normalized,integer:T.integer,stepMode:(S==null?void 0:S.stepMode)||_.stepMode,byteOffset:(S==null?void 0:S.byteOffset)||0,byteStride:(S==null?void 0:S.byteStride)||0}}function getAttributeFromShaderLayout(f,s){const d=f.attributes.find(_=>_.name===s);return d||log.warn(`shader layout attribute "${s}" not present in shader`),d||null}function getAttributeFromBufferLayout(f,s){checkBufferLayouts(f);let d=getAttributeFromShortHand(f,s);return d||(d=getAttributeFromAttributesList(f,s),d)?d:(log.warn(`layout for attribute "${s}" not present in buffer layout`),null)}function checkBufferLayouts(f){for(const s of f)(s.attributes&&s.format||!s.attributes&&!s.format)&&log.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function getAttributeFromShortHand(f,s){for(const d of f)if(d.format&&d.name===s)return{attributeName:d.name,bufferName:s,stepMode:d.stepMode,vertexFormat:d.format,byteOffset:0,byteStride:d.byteStride||0};return null}function getAttributeFromAttributesList(f,s){var d;for(const _ of f){let S=_.byteStride;if(typeof _.byteStride!="number")for(const F of _.attributes||[]){const M=decodeVertexFormat(F.format);S+=M.byteLength}const T=(d=_.attributes)==null?void 0:d.find(F=>F.attribute===s);if(T)return{attributeName:T.attribute,bufferName:_.name,stepMode:_.stepMode,vertexFormat:T.format,byteOffset:T.byteOffset,byteStride:S}}return null}function mergeShaderLayout(f,s){const d={...f,attributes:f.attributes.map(_=>({..._}))};for(const _ of(s==null?void 0:s.attributes)||[]){const S=d.attributes.find(T=>T.name===_.name);S?(S.type=_.type||S.type,S.stepMode=_.stepMode||S.stepMode):log.warn(`shader layout attribute ${_.name} not present in shader`)}return d}const uy=class uy extends Resource$1{constructor(d,_){super(d,_,uy.defaultProps);Bt(this,"maxVertexAttributes");Bt(this,"attributeInfos");Bt(this,"indexBuffer",null);Bt(this,"attributes");this.maxVertexAttributes=d.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null),this.attributeInfos=getAttributeInfosByLocation(_.renderPipeline.shaderLayout,_.renderPipeline.bufferLayout,this.maxVertexAttributes)}get[Symbol.toStringTag](){return"VertexArray"}setConstantWebGL(d,_){throw new Error("constant attributes not supported")}};Bt(uy,"defaultProps",{...Resource$1.defaultProps,renderPipeline:null});let VertexArray=uy;const gy=class gy extends Resource$1{get[Symbol.toStringTag](){return"TransformFeedback"}constructor(s,d){super(s,d,gy.defaultProps)}};Bt(gy,"defaultProps",{...Resource$1.defaultProps,layout:void 0,buffers:{}});let TransformFeedback=gy;const hy=class hy extends Resource$1{get[Symbol.toStringTag](){return"QuerySet"}constructor(s,d){super(s,d,hy.defaultProps)}};Bt(hy,"defaultProps",{...Resource$1.defaultProps,type:void 0,count:void 0});let QuerySet=hy;const UNIFORM_FORMATS={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function decodeShaderUniformType(f){const s=UNIFORM_FORMATS[f];return assert$5(f),s}function alignTo(f,s){switch(s){case 1:return f;case 2:return f+f%2;default:return f+(4-f%4)%4}}let arrayBuffer;function getScratchArrayBuffer(f){return(!arrayBuffer||arrayBuffer.byteLength<f)&&(arrayBuffer=new ArrayBuffer(f)),arrayBuffer}function getScratchArray(f,s){const d=getScratchArrayBuffer(f.BYTES_PER_ELEMENT*s);return new f(d,0,s)}function fillArray$1(f){const{target:s,source:d,start:_=0,count:S=1}=f,T=d.length,F=S*T;let M=0;for(let P=_;M<T;M++)s[P++]=d[M];for(;M<F;)M<F-M?(s.copyWithin(_+M,_,_+M),M*=2):(s.copyWithin(_+M,_,_+F-M),M=F);return f.target}const minBufferSize=1024;class UniformBufferLayout{constructor(s){Bt(this,"layout",{});Bt(this,"byteLength");let d=0;for(const[S,T]of Object.entries(s)){const F=decodeShaderUniformType(T),{type:M,components:P}=F;d=alignTo(d,P);const H=d;d+=P,this.layout[S]={type:M,size:P,offset:H}}d+=(4-d%4)%4;const _=d*4;this.byteLength=Math.max(_,minBufferSize)}getData(s){const d=Math.max(this.byteLength,minBufferSize),_=getScratchArrayBuffer(d),S={i32:new Int32Array(_),u32:new Uint32Array(_),f32:new Float32Array(_),f16:new Uint16Array(_)};for(const[T,F]of Object.entries(s)){const M=this.layout[T];if(!M){log.warn(`Supplied uniform value ${T} not present in uniform block layout`)();continue}const{type:P,size:H,offset:J}=M,K=S[P];if(H===1){if(typeof F!="number"&&typeof F!="boolean"){log.warn(`Supplied value for single component uniform ${T} is not a number: ${F}`)();continue}K[J]=Number(F)}else{const z=isNumberArray$1(F);if(!z){log.warn(`Supplied value for multi component / array uniform ${T} is not a numeric array: ${F}`)();continue}K.set(z,J)}}return new Uint8Array(_)}has(s){return!!this.layout[s]}get(s){return this.layout[s]}}function arrayEqual(f,s,d=16){if(f!==s)return!1;const _=isNumberArray$1(f);if(!_)return!1;const S=isNumberArray$1(s);if(S&&_.length===S.length){for(let T=0;T<_.length;++T)if(S[T]!==_[T])return!1}return!0}function arrayCopy(f){const s=isNumberArray$1(f);return s?s.slice():f}class UniformBlock{constructor(s){Bt(this,"name");Bt(this,"uniforms",{});Bt(this,"modifiedUniforms",{});Bt(this,"modified",!0);Bt(this,"bindingLayout",{});Bt(this,"needsRedraw","initialized");var d;if(this.name=s==null?void 0:s.name,s!=null&&s.name&&(s!=null&&s.shaderLayout)){const _=(d=s==null?void 0:s.shaderLayout.bindings)==null?void 0:d.find(T=>T.type==="uniform"&&T.name===(s==null?void 0:s.name));if(!_)throw new Error(s==null?void 0:s.name);const S=_;for(const T of S.uniforms||[])this.bindingLayout[T.name]=T}}setUniforms(s){for(const[d,_]of Object.entries(s))this._setUniform(d,_),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${d}=${_}`)}setNeedsRedraw(s){this.needsRedraw=this.needsRedraw||s}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(s,d){arrayEqual(this.uniforms[s],d)||(this.uniforms[s]=arrayCopy(d),this.modifiedUniforms[s]=!0,this.modified=!0)}}class UniformStore{constructor(s){Bt(this,"uniformBlocks",new Map);Bt(this,"uniformBufferLayouts",new Map);Bt(this,"uniformBuffers",new Map);for(const[d,_]of Object.entries(s)){const S=d,T=new UniformBufferLayout(_.uniformTypes||{});this.uniformBufferLayouts.set(S,T);const F=new UniformBlock({name:d});F.setUniforms(_.defaultUniforms||{}),this.uniformBlocks.set(S,F)}}destroy(){for(const s of this.uniformBuffers.values())s.destroy()}setUniforms(s){for(const[d,_]of Object.entries(s))this.uniformBlocks.get(d).setUniforms(_);this.updateUniformBuffers()}getUniformBufferByteLength(s){return this.uniformBufferLayouts.get(s).byteLength}getUniformBufferData(s){const d=this.uniformBlocks.get(s).getAllUniforms();return this.uniformBufferLayouts.get(s).getData(d)}createUniformBuffer(s,d,_){_&&this.setUniforms(_);const S=this.getUniformBufferByteLength(d),T=s.createBuffer({usage:Buffer$1.UNIFORM|Buffer$1.COPY_DST,byteLength:S}),F=this.getUniformBufferData(d);return T.write(F),T}getManagedUniformBuffer(s,d){if(!this.uniformBuffers.get(d)){const _=this.getUniformBufferByteLength(d),S=s.createBuffer({usage:Buffer$1.UNIFORM|Buffer$1.COPY_DST,byteLength:_});this.uniformBuffers.set(d,S)}return this.uniformBuffers.get(d)}updateUniformBuffers(){let s=!1;for(const d of this.uniformBlocks.keys()){const _=this.updateUniformBuffer(d);s||(s=_)}return s&&log.log(3,`UniformStore.updateUniformBuffers(): ${s}`)(),s}updateUniformBuffer(s){const d=this.uniformBlocks.get(s),_=this.uniformBuffers.get(s);let S=!1;if(_&&d.needsRedraw){S||(S=d.needsRedraw);const T=this.getUniformBufferData(s);this.uniformBuffers.get(s).write(T);const M=this.uniformBlocks.get(s).getAllUniforms();log.log(4,`Writing to uniform buffer ${String(s)}`,T,M)()}return S}}function getDataTypeFromTypedArray(f){const s=ArrayBuffer.isView(f)?f.constructor:f;switch(s){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(s.constructor.name)}}function getTypedArrayFromDataType(f){switch(f){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(f)}}function getVertexFormatFromAttribute(f,s,d){if(!s||s>4)throw new Error(`size ${s}`);const _=s;let S=getDataTypeFromTypedArray(f);if(S==="uint8"&&d&&_===1)return"unorm8-webgl";if(S==="uint8"&&d&&_===3)return"unorm8x3-webgl";if(S==="uint8"||S==="sint8"){if(_===1||_===3)throw new Error(`size: ${s}`);return d&&(S=S.replace("int","norm")),`${S}x${_}`}if(S==="uint16"||S==="sint16"){if(_===1||_===3)throw new Error(`size: ${s}`);return d&&(S=S.replace("int","norm")),`${S}x${_}`}return _===1?S:`${S}x${_}`}function cast$1(f){return f}function isUniformValue(f){return isNumberArray$1(f)!==null||typeof f=="number"||typeof f=="boolean"}function splitUniformsAndBindings(f){const s={bindings:{},uniforms:{}};return Object.keys(f).forEach(d=>{const _=f[d];isUniformValue(_)?s.uniforms[d]=_:s.bindings[d]=_}),s}function checkProps(f,s,d){const{removedProps:_={},deprecatedProps:S={},replacedProps:T={}}=d;for(const M in _)if(M in s){const H=_[M]?`${f}.${_[M]}`:"N/A";log.removed(`${f}.${M}`,H)()}for(const M in S)if(M in s){const P=S[M];log.deprecated(`${f}.${M}`,`${f}.${P}`)()}let F=null;for(const[M,P]of Object.entries(T))M in s&&(log.deprecated(`${f}.${M}`,`${f}.${P}`)(),F=F||Object.assign({},s),F[P]=s[M],delete F[M]);return F||s}let pathPrefix="";async function loadImage(f,s){return await new Promise((d,_)=>{try{const S=new Image;S.onload=()=>d(S),S.onerror=()=>_(new Error(`Could not load image ${f}.`)),S.crossOrigin=(s==null?void 0:s.crossOrigin)||"anonymous",S.src=f.startsWith("http")?f:pathPrefix+f}catch(S){_(S)}})}async function loadScript(f,s){const d=document.getElementsByTagName("head")[0];if(!d)throw new Error("loadScript");const _=document.createElement("script");return _.setAttribute("type","text/javascript"),_.setAttribute("src",f),new Promise((S,T)=>{_.onload=S,_.onerror=F=>T(new Error(`Unable to load script '${f}': ${F}`)),d.appendChild(_)})}function deepEqual$1(f,s,d){if(f===s)return!0;if(!d||!f||!s)return!1;if(Array.isArray(f)){if(!Array.isArray(s)||f.length!==s.length)return!1;for(let _=0;_<f.length;_++)if(!deepEqual$1(f[_],s[_],d-1))return!1;return!0}if(Array.isArray(s))return!1;if(typeof f=="object"&&typeof s=="object"){const _=Object.keys(f),S=Object.keys(s);if(_.length!==S.length)return!1;for(const T of _)if(!s.hasOwnProperty(T)||!deepEqual$1(f[T],s[T],d-1))return!1;return!0}return!1}function requestAnimationFrame$1(f){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(f):setTimeout(f,1e3/60)}function cancelAnimationFrame$1(f){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(f):clearTimeout(f)}class ParseContext{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}let Node$4=class{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(s){throw new Error("Cannot evaluate node")}evaluateString(s){return this.evaluate(s).toString()}search(s){}searchBlock(s,d){if(s){d(_BlockStart.instance);for(const _ of s)_ instanceof Array?this.searchBlock(_,d):_.search(d);d(_BlockEnd.instance)}}};class _BlockStart extends Node$4{}_BlockStart.instance=new _BlockStart;class _BlockEnd extends Node$4{}_BlockEnd.instance=new _BlockEnd;class Statement extends Node$4{constructor(){super()}}let Function$1=class extends Statement{constructor(s,d,_,S,T,F){super(),this.calls=new Set,this.name=s,this.args=d,this.returnType=_,this.body=S,this.startLine=T,this.endLine=F}get astNodeType(){return"function"}search(s){this.searchBlock(this.body,s)}};class StaticAssert extends Statement{constructor(s){super(),this.expression=s}get astNodeType(){return"staticAssert"}search(s){this.expression.search(s)}}class While extends Statement{constructor(s,d){super(),this.condition=s,this.body=d}get astNodeType(){return"while"}search(s){this.condition.search(s),this.searchBlock(this.body,s)}}class Continuing extends Statement{constructor(s){super(),this.body=s}get astNodeType(){return"continuing"}search(s){this.searchBlock(this.body,s)}}class For extends Statement{constructor(s,d,_,S){super(),this.init=s,this.condition=d,this.increment=_,this.body=S}get astNodeType(){return"for"}search(s){var d,_,S;(d=this.init)===null||d===void 0||d.search(s),(_=this.condition)===null||_===void 0||_.search(s),(S=this.increment)===null||S===void 0||S.search(s),this.searchBlock(this.body,s)}}class Var extends Statement{constructor(s,d,_,S,T){super(),this.name=s,this.type=d,this.storage=_,this.access=S,this.value=T}get astNodeType(){return"var"}search(s){var d;s(this),(d=this.value)===null||d===void 0||d.search(s)}}class Override extends Statement{constructor(s,d,_){super(),this.name=s,this.type=d,this.value=_}get astNodeType(){return"override"}search(s){var d;(d=this.value)===null||d===void 0||d.search(s)}}class Let extends Statement{constructor(s,d,_,S,T){super(),this.name=s,this.type=d,this.storage=_,this.access=S,this.value=T}get astNodeType(){return"let"}search(s){var d;s(this),(d=this.value)===null||d===void 0||d.search(s)}}class Const extends Statement{constructor(s,d,_,S,T){super(),this.name=s,this.type=d,this.storage=_,this.access=S,this.value=T}get astNodeType(){return"const"}evaluate(s){return this.value.evaluate(s)}search(s){var d;s(this),(d=this.value)===null||d===void 0||d.search(s)}}var IncrementOperator;(function(f){f.increment="++",f.decrement="--"})(IncrementOperator||(IncrementOperator={}));(function(f){function s(d){const _=d;if(_=="parse")throw new Error("Invalid value for IncrementOperator");return f[_]}f.parse=s})(IncrementOperator||(IncrementOperator={}));class Increment extends Statement{constructor(s,d){super(),this.operator=s,this.variable=d}get astNodeType(){return"increment"}search(s){this.variable.search(s)}}var AssignOperator;(function(f){f.assign="=",f.addAssign="+=",f.subtractAssin="-=",f.multiplyAssign="*=",f.divideAssign="/=",f.moduloAssign="%=",f.andAssign="&=",f.orAssign="|=",f.xorAssign="^=",f.shiftLeftAssign="<<=",f.shiftRightAssign=">>="})(AssignOperator||(AssignOperator={}));(function(f){function s(d){const _=d;if(_=="parse")throw new Error("Invalid value for AssignOperator");return _}f.parse=s})(AssignOperator||(AssignOperator={}));class Assign extends Statement{constructor(s,d,_){super(),this.operator=s,this.variable=d,this.value=_}get astNodeType(){return"assign"}search(s){this.variable.search(s),this.value.search(s)}}class Call extends Statement{constructor(s,d){super(),this.name=s,this.args=d}get astNodeType(){return"call"}search(s){for(const d of this.args)d.search(s);s(this)}}class Loop extends Statement{constructor(s,d){super(),this.body=s,this.continuing=d}get astNodeType(){return"loop"}}class Switch extends Statement{constructor(s,d){super(),this.condition=s,this.body=d}get astNodeType(){return"body"}}let If$1=class extends Statement{constructor(s,d,_,S){super(),this.condition=s,this.body=d,this.elseif=_,this.else=S}get astNodeType(){return"if"}search(s){this.condition.search(s),this.searchBlock(this.body,s),this.searchBlock(this.elseif,s),this.searchBlock(this.else,s)}};class Return extends Statement{constructor(s){super(),this.value=s}get astNodeType(){return"return"}search(s){var d;(d=this.value)===null||d===void 0||d.search(s)}}class Enable extends Statement{constructor(s){super(),this.name=s}get astNodeType(){return"enable"}}class Requires extends Statement{constructor(s){super(),this.extensions=s}get astNodeType(){return"requires"}}class Diagnostic extends Statement{constructor(s,d){super(),this.severity=s,this.rule=d}get astNodeType(){return"diagnostic"}}class Alias extends Statement{constructor(s,d){super(),this.name=s,this.type=d}get astNodeType(){return"alias"}}class Discard extends Statement{constructor(){super()}get astNodeType(){return"discard"}}class Break extends Statement{constructor(){super()}get astNodeType(){return"break"}}class Continue extends Statement{constructor(){super()}get astNodeType(){return"continue"}}let Type$1=class extends Statement{constructor(s){super(),this.name=s}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}};class Struct extends Type$1{constructor(s,d,_,S){super(s),this.members=d,this.startLine=_,this.endLine=S}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(s){for(let d=0;d<this.members.length;d++)if(this.members[d].name==s)return d;return-1}}class TemplateType extends Type$1{constructor(s,d,_){super(s),this.format=d,this.access=_}get astNodeType(){return"template"}}class PointerType extends Type$1{constructor(s,d,_,S){super(s),this.storage=d,this.type=_,this.access=S}get astNodeType(){return"pointer"}}class ArrayType extends Type$1{constructor(s,d,_,S){super(s),this.attributes=d,this.format=_,this.count=S}get astNodeType(){return"array"}get isArray(){return!0}}class SamplerType extends Type$1{constructor(s,d,_){super(s),this.format=d,this.access=_}get astNodeType(){return"sampler"}}class Expression extends Node$4{constructor(){super()}}class StringExpr extends Expression{constructor(s){super(),this.value=s}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class CreateExpr extends Expression{constructor(s,d){super(),this.type=s,this.args=d}get astNodeType(){return"createExpr"}search(s){if(s(this),this.args)for(const d of this.args)d.search(s)}evaluate(s){return this.args[0].evaluate(s)}}class CallExpr extends Expression{constructor(s,d){super(),this.name=s,this.args=d}get astNodeType(){return"callExpr"}evaluate(s){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(s));case"acos":return Math.acos(this.args[0].evaluate(s));case"acosh":return Math.acosh(this.args[0].evaluate(s));case"asin":return Math.asin(this.args[0].evaluate(s));case"asinh":return Math.asinh(this.args[0].evaluate(s));case"atan":return Math.atan(this.args[0].evaluate(s));case"atan2":return Math.atan2(this.args[0].evaluate(s),this.args[1].evaluate(s));case"atanh":return Math.atanh(this.args[0].evaluate(s));case"ceil":return Math.ceil(this.args[0].evaluate(s));case"clamp":return Math.min(Math.max(this.args[0].evaluate(s),this.args[1].evaluate(s)),this.args[2].evaluate(s));case"cos":return Math.cos(this.args[0].evaluate(s));case"degrees":return this.args[0].evaluate(s)*180/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(s)-this.args[1].evaluate(s),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(s));case"exp2":return Math.pow(2,this.args[0].evaluate(s));case"floor":return Math.floor(this.args[0].evaluate(s));case"fma":return this.args[0].evaluate(s)*this.args[1].evaluate(s)+this.args[2].evaluate(s);case"fract":return this.args[0].evaluate(s)-Math.floor(this.args[0].evaluate(s));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(s));case"log":return Math.log(this.args[0].evaluate(s));case"log2":return Math.log2(this.args[0].evaluate(s));case"max":return Math.max(this.args[0].evaluate(s),this.args[1].evaluate(s));case"min":return Math.min(this.args[0].evaluate(s),this.args[1].evaluate(s));case"mix":return this.args[0].evaluate(s)*(1-this.args[2].evaluate(s))+this.args[1].evaluate(s)*this.args[2].evaluate(s);case"modf":return this.args[0].evaluate(s)-Math.floor(this.args[0].evaluate(s));case"pow":return Math.pow(this.args[0].evaluate(s),this.args[1].evaluate(s));case"radians":return this.args[0].evaluate(s)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(s));case"sign":return Math.sign(this.args[0].evaluate(s));case"sin":return Math.sin(this.args[0].evaluate(s));case"sinh":return Math.sinh(this.args[0].evaluate(s));case"saturate":return Math.min(Math.max(this.args[0].evaluate(s),0),1);case"smoothstep":return this.args[0].evaluate(s)*this.args[0].evaluate(s)*(3-2*this.args[0].evaluate(s));case"sqrt":return Math.sqrt(this.args[0].evaluate(s));case"step":return this.args[0].evaluate(s)<this.args[1].evaluate(s)?0:1;case"tan":return Math.tan(this.args[0].evaluate(s));case"tanh":return Math.tanh(this.args[0].evaluate(s));case"trunc":return Math.trunc(this.args[0].evaluate(s));default:throw new Error("Non const function: "+this.name)}}search(s){for(const d of this.args)d.search(s);s(this)}}class VariableExpr extends Expression{constructor(s){super(),this.name=s}get astNodeType(){return"varExpr"}search(s){s(this),this.postfix&&this.postfix.search(s)}evaluate(s){const d=s.constants.get(this.name);if(!d)throw new Error("Cannot evaluate node");return d.evaluate(s)}}class ConstExpr extends Expression{constructor(s,d){super(),this.name=s,this.initializer=d}get astNodeType(){return"constExpr"}evaluate(s){var d,_;if(this.initializer instanceof CreateExpr){const S=(d=this.postfix)===null||d===void 0?void 0:d.evaluateString(s),T=(_=this.initializer.type)===null||_===void 0?void 0:_.name,F=s.structs.get(T),M=F==null?void 0:F.getMemberIndex(S);return M!==void 0&&M!=-1?this.initializer.args[M].evaluate(s):this.initializer.evaluate(s)}return this.initializer.evaluate(s)}search(s){this.initializer.search(s)}}class LiteralExpr extends Expression{constructor(s){super(),this.value=s}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class BitcastExpr extends Expression{constructor(s,d){super(),this.type=s,this.value=d}get astNodeType(){return"bitcastExpr"}search(s){this.value.search(s)}}class GroupingExpr extends Expression{constructor(s){super(),this.contents=s}get astNodeType(){return"groupExpr"}evaluate(s){return this.contents[0].evaluate(s)}search(s){this.searchBlock(this.contents,s)}}class ArrayIndex extends Expression{constructor(s){super(),this.index=s}search(s){this.index.search(s)}}class Operator extends Expression{constructor(){super()}}class UnaryOperator extends Operator{constructor(s,d){super(),this.operator=s,this.right=d}get astNodeType(){return"unaryOp"}evaluate(s){switch(this.operator){case"+":return this.right.evaluate(s);case"-":return-this.right.evaluate(s);case"!":return this.right.evaluate(s)?0:1;case"~":return~this.right.evaluate(s);default:throw new Error("Unknown unary operator: "+this.operator)}}search(s){this.right.search(s)}}class BinaryOperator extends Operator{constructor(s,d,_){super(),this.operator=s,this.left=d,this.right=_}get astNodeType(){return"binaryOp"}evaluate(s){switch(this.operator){case"+":return this.left.evaluate(s)+this.right.evaluate(s);case"-":return this.left.evaluate(s)-this.right.evaluate(s);case"*":return this.left.evaluate(s)*this.right.evaluate(s);case"/":return this.left.evaluate(s)/this.right.evaluate(s);case"%":return this.left.evaluate(s)%this.right.evaluate(s);case"==":return this.left.evaluate(s)==this.right.evaluate(s)?1:0;case"!=":return this.left.evaluate(s)!=this.right.evaluate(s)?1:0;case"<":return this.left.evaluate(s)<this.right.evaluate(s)?1:0;case">":return this.left.evaluate(s)>this.right.evaluate(s)?1:0;case"<=":return this.left.evaluate(s)<=this.right.evaluate(s)?1:0;case">=":return this.left.evaluate(s)>=this.right.evaluate(s)?1:0;case"&&":return this.left.evaluate(s)&&this.right.evaluate(s)?1:0;case"||":return this.left.evaluate(s)||this.right.evaluate(s)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}search(s){this.left.search(s),this.right.search(s)}}class SwitchCase extends Node$4{constructor(){super()}}class Case extends SwitchCase{constructor(s,d){super(),this.selector=s,this.body=d}get astNodeType(){return"case"}search(s){this.searchBlock(this.body,s)}}class Default extends SwitchCase{constructor(s){super(),this.body=s}get astNodeType(){return"default"}search(s){this.searchBlock(this.body,s)}}class Argument extends Node$4{constructor(s,d,_){super(),this.name=s,this.type=d,this.attributes=_}get astNodeType(){return"argument"}}class ElseIf extends Node$4{constructor(s,d){super(),this.condition=s,this.body=d}get astNodeType(){return"elseif"}search(s){this.condition.search(s),this.searchBlock(this.body,s)}}class Member extends Node$4{constructor(s,d,_){super(),this.name=s,this.type=d,this.attributes=_}get astNodeType(){return"member"}}let Attribute$1=class extends Node$4{constructor(s,d){super(),this.name=s,this.value=d}get astNodeType(){return"attribute"}};var _a$3,TokenClass;(function(f){f[f.token=0]="token",f[f.keyword=1]="keyword",f[f.reserved=2]="reserved"})(TokenClass||(TokenClass={}));class TokenType{constructor(s,d,_){this.name=s,this.type=d,this.rule=_}toString(){return this.name}}class TokenTypes{}_a$3=TokenTypes;TokenTypes.none=new TokenType("",TokenClass.reserved,"");TokenTypes.eof=new TokenType("EOF",TokenClass.token,"");TokenTypes.reserved={asm:new TokenType("asm",TokenClass.reserved,"asm"),bf16:new TokenType("bf16",TokenClass.reserved,"bf16"),do:new TokenType("do",TokenClass.reserved,"do"),enum:new TokenType("enum",TokenClass.reserved,"enum"),f16:new TokenType("f16",TokenClass.reserved,"f16"),f64:new TokenType("f64",TokenClass.reserved,"f64"),handle:new TokenType("handle",TokenClass.reserved,"handle"),i8:new TokenType("i8",TokenClass.reserved,"i8"),i16:new TokenType("i16",TokenClass.reserved,"i16"),i64:new TokenType("i64",TokenClass.reserved,"i64"),mat:new TokenType("mat",TokenClass.reserved,"mat"),premerge:new TokenType("premerge",TokenClass.reserved,"premerge"),regardless:new TokenType("regardless",TokenClass.reserved,"regardless"),typedef:new TokenType("typedef",TokenClass.reserved,"typedef"),u8:new TokenType("u8",TokenClass.reserved,"u8"),u16:new TokenType("u16",TokenClass.reserved,"u16"),u64:new TokenType("u64",TokenClass.reserved,"u64"),unless:new TokenType("unless",TokenClass.reserved,"unless"),using:new TokenType("using",TokenClass.reserved,"using"),vec:new TokenType("vec",TokenClass.reserved,"vec"),void:new TokenType("void",TokenClass.reserved,"void")};TokenTypes.keywords={array:new TokenType("array",TokenClass.keyword,"array"),atomic:new TokenType("atomic",TokenClass.keyword,"atomic"),bool:new TokenType("bool",TokenClass.keyword,"bool"),f32:new TokenType("f32",TokenClass.keyword,"f32"),i32:new TokenType("i32",TokenClass.keyword,"i32"),mat2x2:new TokenType("mat2x2",TokenClass.keyword,"mat2x2"),mat2x3:new TokenType("mat2x3",TokenClass.keyword,"mat2x3"),mat2x4:new TokenType("mat2x4",TokenClass.keyword,"mat2x4"),mat3x2:new TokenType("mat3x2",TokenClass.keyword,"mat3x2"),mat3x3:new TokenType("mat3x3",TokenClass.keyword,"mat3x3"),mat3x4:new TokenType("mat3x4",TokenClass.keyword,"mat3x4"),mat4x2:new TokenType("mat4x2",TokenClass.keyword,"mat4x2"),mat4x3:new TokenType("mat4x3",TokenClass.keyword,"mat4x3"),mat4x4:new TokenType("mat4x4",TokenClass.keyword,"mat4x4"),ptr:new TokenType("ptr",TokenClass.keyword,"ptr"),sampler:new TokenType("sampler",TokenClass.keyword,"sampler"),sampler_comparison:new TokenType("sampler_comparison",TokenClass.keyword,"sampler_comparison"),struct:new TokenType("struct",TokenClass.keyword,"struct"),texture_1d:new TokenType("texture_1d",TokenClass.keyword,"texture_1d"),texture_2d:new TokenType("texture_2d",TokenClass.keyword,"texture_2d"),texture_2d_array:new TokenType("texture_2d_array",TokenClass.keyword,"texture_2d_array"),texture_3d:new TokenType("texture_3d",TokenClass.keyword,"texture_3d"),texture_cube:new TokenType("texture_cube",TokenClass.keyword,"texture_cube"),texture_cube_array:new TokenType("texture_cube_array",TokenClass.keyword,"texture_cube_array"),texture_multisampled_2d:new TokenType("texture_multisampled_2d",TokenClass.keyword,"texture_multisampled_2d"),texture_storage_1d:new TokenType("texture_storage_1d",TokenClass.keyword,"texture_storage_1d"),texture_storage_2d:new TokenType("texture_storage_2d",TokenClass.keyword,"texture_storage_2d"),texture_storage_2d_array:new TokenType("texture_storage_2d_array",TokenClass.keyword,"texture_storage_2d_array"),texture_storage_3d:new TokenType("texture_storage_3d",TokenClass.keyword,"texture_storage_3d"),texture_depth_2d:new TokenType("texture_depth_2d",TokenClass.keyword,"texture_depth_2d"),texture_depth_2d_array:new TokenType("texture_depth_2d_array",TokenClass.keyword,"texture_depth_2d_array"),texture_depth_cube:new TokenType("texture_depth_cube",TokenClass.keyword,"texture_depth_cube"),texture_depth_cube_array:new TokenType("texture_depth_cube_array",TokenClass.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new TokenType("texture_depth_multisampled_2d",TokenClass.keyword,"texture_depth_multisampled_2d"),texture_external:new TokenType("texture_external",TokenClass.keyword,"texture_external"),u32:new TokenType("u32",TokenClass.keyword,"u32"),vec2:new TokenType("vec2",TokenClass.keyword,"vec2"),vec3:new TokenType("vec3",TokenClass.keyword,"vec3"),vec4:new TokenType("vec4",TokenClass.keyword,"vec4"),bitcast:new TokenType("bitcast",TokenClass.keyword,"bitcast"),block:new TokenType("block",TokenClass.keyword,"block"),break:new TokenType("break",TokenClass.keyword,"break"),case:new TokenType("case",TokenClass.keyword,"case"),continue:new TokenType("continue",TokenClass.keyword,"continue"),continuing:new TokenType("continuing",TokenClass.keyword,"continuing"),default:new TokenType("default",TokenClass.keyword,"default"),diagnostic:new TokenType("diagnostic",TokenClass.keyword,"diagnostic"),discard:new TokenType("discard",TokenClass.keyword,"discard"),else:new TokenType("else",TokenClass.keyword,"else"),enable:new TokenType("enable",TokenClass.keyword,"enable"),fallthrough:new TokenType("fallthrough",TokenClass.keyword,"fallthrough"),false:new TokenType("false",TokenClass.keyword,"false"),fn:new TokenType("fn",TokenClass.keyword,"fn"),for:new TokenType("for",TokenClass.keyword,"for"),function:new TokenType("function",TokenClass.keyword,"function"),if:new TokenType("if",TokenClass.keyword,"if"),let:new TokenType("let",TokenClass.keyword,"let"),const:new TokenType("const",TokenClass.keyword,"const"),loop:new TokenType("loop",TokenClass.keyword,"loop"),while:new TokenType("while",TokenClass.keyword,"while"),private:new TokenType("private",TokenClass.keyword,"private"),read:new TokenType("read",TokenClass.keyword,"read"),read_write:new TokenType("read_write",TokenClass.keyword,"read_write"),return:new TokenType("return",TokenClass.keyword,"return"),requires:new TokenType("requires",TokenClass.keyword,"requires"),storage:new TokenType("storage",TokenClass.keyword,"storage"),switch:new TokenType("switch",TokenClass.keyword,"switch"),true:new TokenType("true",TokenClass.keyword,"true"),alias:new TokenType("alias",TokenClass.keyword,"alias"),type:new TokenType("type",TokenClass.keyword,"type"),uniform:new TokenType("uniform",TokenClass.keyword,"uniform"),var:new TokenType("var",TokenClass.keyword,"var"),override:new TokenType("override",TokenClass.keyword,"override"),workgroup:new TokenType("workgroup",TokenClass.keyword,"workgroup"),write:new TokenType("write",TokenClass.keyword,"write"),r8unorm:new TokenType("r8unorm",TokenClass.keyword,"r8unorm"),r8snorm:new TokenType("r8snorm",TokenClass.keyword,"r8snorm"),r8uint:new TokenType("r8uint",TokenClass.keyword,"r8uint"),r8sint:new TokenType("r8sint",TokenClass.keyword,"r8sint"),r16uint:new TokenType("r16uint",TokenClass.keyword,"r16uint"),r16sint:new TokenType("r16sint",TokenClass.keyword,"r16sint"),r16float:new TokenType("r16float",TokenClass.keyword,"r16float"),rg8unorm:new TokenType("rg8unorm",TokenClass.keyword,"rg8unorm"),rg8snorm:new TokenType("rg8snorm",TokenClass.keyword,"rg8snorm"),rg8uint:new TokenType("rg8uint",TokenClass.keyword,"rg8uint"),rg8sint:new TokenType("rg8sint",TokenClass.keyword,"rg8sint"),r32uint:new TokenType("r32uint",TokenClass.keyword,"r32uint"),r32sint:new TokenType("r32sint",TokenClass.keyword,"r32sint"),r32float:new TokenType("r32float",TokenClass.keyword,"r32float"),rg16uint:new TokenType("rg16uint",TokenClass.keyword,"rg16uint"),rg16sint:new TokenType("rg16sint",TokenClass.keyword,"rg16sint"),rg16float:new TokenType("rg16float",TokenClass.keyword,"rg16float"),rgba8unorm:new TokenType("rgba8unorm",TokenClass.keyword,"rgba8unorm"),rgba8unorm_srgb:new TokenType("rgba8unorm_srgb",TokenClass.keyword,"rgba8unorm_srgb"),rgba8snorm:new TokenType("rgba8snorm",TokenClass.keyword,"rgba8snorm"),rgba8uint:new TokenType("rgba8uint",TokenClass.keyword,"rgba8uint"),rgba8sint:new TokenType("rgba8sint",TokenClass.keyword,"rgba8sint"),bgra8unorm:new TokenType("bgra8unorm",TokenClass.keyword,"bgra8unorm"),bgra8unorm_srgb:new TokenType("bgra8unorm_srgb",TokenClass.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new TokenType("rgb10a2unorm",TokenClass.keyword,"rgb10a2unorm"),rg11b10float:new TokenType("rg11b10float",TokenClass.keyword,"rg11b10float"),rg32uint:new TokenType("rg32uint",TokenClass.keyword,"rg32uint"),rg32sint:new TokenType("rg32sint",TokenClass.keyword,"rg32sint"),rg32float:new TokenType("rg32float",TokenClass.keyword,"rg32float"),rgba16uint:new TokenType("rgba16uint",TokenClass.keyword,"rgba16uint"),rgba16sint:new TokenType("rgba16sint",TokenClass.keyword,"rgba16sint"),rgba16float:new TokenType("rgba16float",TokenClass.keyword,"rgba16float"),rgba32uint:new TokenType("rgba32uint",TokenClass.keyword,"rgba32uint"),rgba32sint:new TokenType("rgba32sint",TokenClass.keyword,"rgba32sint"),rgba32float:new TokenType("rgba32float",TokenClass.keyword,"rgba32float"),static_assert:new TokenType("static_assert",TokenClass.keyword,"static_assert")};TokenTypes.tokens={decimal_float_literal:new TokenType("decimal_float_literal",TokenClass.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new TokenType("hex_float_literal",TokenClass.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new TokenType("int_literal",TokenClass.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new TokenType("uint_literal",TokenClass.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new TokenType("ident",TokenClass.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new TokenType("and",TokenClass.token,"&"),and_and:new TokenType("and_and",TokenClass.token,"&&"),arrow:new TokenType("arrow ",TokenClass.token,"->"),attr:new TokenType("attr",TokenClass.token,"@"),forward_slash:new TokenType("forward_slash",TokenClass.token,"/"),bang:new TokenType("bang",TokenClass.token,"!"),bracket_left:new TokenType("bracket_left",TokenClass.token,"["),bracket_right:new TokenType("bracket_right",TokenClass.token,"]"),brace_left:new TokenType("brace_left",TokenClass.token,"{"),brace_right:new TokenType("brace_right",TokenClass.token,"}"),colon:new TokenType("colon",TokenClass.token,":"),comma:new TokenType("comma",TokenClass.token,","),equal:new TokenType("equal",TokenClass.token,"="),equal_equal:new TokenType("equal_equal",TokenClass.token,"=="),not_equal:new TokenType("not_equal",TokenClass.token,"!="),greater_than:new TokenType("greater_than",TokenClass.token,">"),greater_than_equal:new TokenType("greater_than_equal",TokenClass.token,">="),shift_right:new TokenType("shift_right",TokenClass.token,">>"),less_than:new TokenType("less_than",TokenClass.token,"<"),less_than_equal:new TokenType("less_than_equal",TokenClass.token,"<="),shift_left:new TokenType("shift_left",TokenClass.token,"<<"),modulo:new TokenType("modulo",TokenClass.token,"%"),minus:new TokenType("minus",TokenClass.token,"-"),minus_minus:new TokenType("minus_minus",TokenClass.token,"--"),period:new TokenType("period",TokenClass.token,"."),plus:new TokenType("plus",TokenClass.token,"+"),plus_plus:new TokenType("plus_plus",TokenClass.token,"++"),or:new TokenType("or",TokenClass.token,"|"),or_or:new TokenType("or_or",TokenClass.token,"||"),paren_left:new TokenType("paren_left",TokenClass.token,"("),paren_right:new TokenType("paren_right",TokenClass.token,")"),semicolon:new TokenType("semicolon",TokenClass.token,";"),star:new TokenType("star",TokenClass.token,"*"),tilde:new TokenType("tilde",TokenClass.token,"~"),underscore:new TokenType("underscore",TokenClass.token,"_"),xor:new TokenType("xor",TokenClass.token,"^"),plus_equal:new TokenType("plus_equal",TokenClass.token,"+="),minus_equal:new TokenType("minus_equal",TokenClass.token,"-="),times_equal:new TokenType("times_equal",TokenClass.token,"*="),division_equal:new TokenType("division_equal",TokenClass.token,"/="),modulo_equal:new TokenType("modulo_equal",TokenClass.token,"%="),and_equal:new TokenType("and_equal",TokenClass.token,"&="),or_equal:new TokenType("or_equal",TokenClass.token,"|="),xor_equal:new TokenType("xor_equal",TokenClass.token,"^="),shift_right_equal:new TokenType("shift_right_equal",TokenClass.token,">>="),shift_left_equal:new TokenType("shift_left_equal",TokenClass.token,"<<=")};TokenTypes.simpleTokens={"@":_a$3.tokens.attr,"{":_a$3.tokens.brace_left,"}":_a$3.tokens.brace_right,":":_a$3.tokens.colon,",":_a$3.tokens.comma,"(":_a$3.tokens.paren_left,")":_a$3.tokens.paren_right,";":_a$3.tokens.semicolon};TokenTypes.literalTokens={"&":_a$3.tokens.and,"&&":_a$3.tokens.and_and,"->":_a$3.tokens.arrow,"/":_a$3.tokens.forward_slash,"!":_a$3.tokens.bang,"[":_a$3.tokens.bracket_left,"]":_a$3.tokens.bracket_right,"=":_a$3.tokens.equal,"==":_a$3.tokens.equal_equal,"!=":_a$3.tokens.not_equal,">":_a$3.tokens.greater_than,">=":_a$3.tokens.greater_than_equal,">>":_a$3.tokens.shift_right,"<":_a$3.tokens.less_than,"<=":_a$3.tokens.less_than_equal,"<<":_a$3.tokens.shift_left,"%":_a$3.tokens.modulo,"-":_a$3.tokens.minus,"--":_a$3.tokens.minus_minus,".":_a$3.tokens.period,"+":_a$3.tokens.plus,"++":_a$3.tokens.plus_plus,"|":_a$3.tokens.or,"||":_a$3.tokens.or_or,"*":_a$3.tokens.star,"~":_a$3.tokens.tilde,_:_a$3.tokens.underscore,"^":_a$3.tokens.xor,"+=":_a$3.tokens.plus_equal,"-=":_a$3.tokens.minus_equal,"*=":_a$3.tokens.times_equal,"/=":_a$3.tokens.division_equal,"%=":_a$3.tokens.modulo_equal,"&=":_a$3.tokens.and_equal,"|=":_a$3.tokens.or_equal,"^=":_a$3.tokens.xor_equal,">>=":_a$3.tokens.shift_right_equal,"<<=":_a$3.tokens.shift_left_equal};TokenTypes.regexTokens={decimal_float_literal:_a$3.tokens.decimal_float_literal,hex_float_literal:_a$3.tokens.hex_float_literal,int_literal:_a$3.tokens.int_literal,uint_literal:_a$3.tokens.uint_literal,ident:_a$3.tokens.ident};TokenTypes.storage_class=[_a$3.keywords.function,_a$3.keywords.private,_a$3.keywords.workgroup,_a$3.keywords.uniform,_a$3.keywords.storage];TokenTypes.access_mode=[_a$3.keywords.read,_a$3.keywords.write,_a$3.keywords.read_write];TokenTypes.sampler_type=[_a$3.keywords.sampler,_a$3.keywords.sampler_comparison];TokenTypes.sampled_texture_type=[_a$3.keywords.texture_1d,_a$3.keywords.texture_2d,_a$3.keywords.texture_2d_array,_a$3.keywords.texture_3d,_a$3.keywords.texture_cube,_a$3.keywords.texture_cube_array];TokenTypes.multisampled_texture_type=[_a$3.keywords.texture_multisampled_2d];TokenTypes.storage_texture_type=[_a$3.keywords.texture_storage_1d,_a$3.keywords.texture_storage_2d,_a$3.keywords.texture_storage_2d_array,_a$3.keywords.texture_storage_3d];TokenTypes.depth_texture_type=[_a$3.keywords.texture_depth_2d,_a$3.keywords.texture_depth_2d_array,_a$3.keywords.texture_depth_cube,_a$3.keywords.texture_depth_cube_array,_a$3.keywords.texture_depth_multisampled_2d];TokenTypes.texture_external_type=[_a$3.keywords.texture_external];TokenTypes.any_texture_type=[..._a$3.sampled_texture_type,..._a$3.multisampled_texture_type,..._a$3.storage_texture_type,..._a$3.depth_texture_type,..._a$3.texture_external_type];TokenTypes.texel_format=[_a$3.keywords.r8unorm,_a$3.keywords.r8snorm,_a$3.keywords.r8uint,_a$3.keywords.r8sint,_a$3.keywords.r16uint,_a$3.keywords.r16sint,_a$3.keywords.r16float,_a$3.keywords.rg8unorm,_a$3.keywords.rg8snorm,_a$3.keywords.rg8uint,_a$3.keywords.rg8sint,_a$3.keywords.r32uint,_a$3.keywords.r32sint,_a$3.keywords.r32float,_a$3.keywords.rg16uint,_a$3.keywords.rg16sint,_a$3.keywords.rg16float,_a$3.keywords.rgba8unorm,_a$3.keywords.rgba8unorm_srgb,_a$3.keywords.rgba8snorm,_a$3.keywords.rgba8uint,_a$3.keywords.rgba8sint,_a$3.keywords.bgra8unorm,_a$3.keywords.bgra8unorm_srgb,_a$3.keywords.rgb10a2unorm,_a$3.keywords.rg11b10float,_a$3.keywords.rg32uint,_a$3.keywords.rg32sint,_a$3.keywords.rg32float,_a$3.keywords.rgba16uint,_a$3.keywords.rgba16sint,_a$3.keywords.rgba16float,_a$3.keywords.rgba32uint,_a$3.keywords.rgba32sint,_a$3.keywords.rgba32float];TokenTypes.const_literal=[_a$3.tokens.int_literal,_a$3.tokens.uint_literal,_a$3.tokens.decimal_float_literal,_a$3.tokens.hex_float_literal,_a$3.keywords.true,_a$3.keywords.false];TokenTypes.literal_or_ident=[_a$3.tokens.ident,_a$3.tokens.int_literal,_a$3.tokens.uint_literal,_a$3.tokens.decimal_float_literal,_a$3.tokens.hex_float_literal];TokenTypes.element_count_expression=[_a$3.tokens.int_literal,_a$3.tokens.uint_literal,_a$3.tokens.ident];TokenTypes.template_types=[_a$3.keywords.vec2,_a$3.keywords.vec3,_a$3.keywords.vec4,_a$3.keywords.mat2x2,_a$3.keywords.mat2x3,_a$3.keywords.mat2x4,_a$3.keywords.mat3x2,_a$3.keywords.mat3x3,_a$3.keywords.mat3x4,_a$3.keywords.mat4x2,_a$3.keywords.mat4x3,_a$3.keywords.mat4x4,_a$3.keywords.atomic,_a$3.keywords.bitcast,..._a$3.any_texture_type];TokenTypes.attribute_name=[_a$3.tokens.ident,_a$3.keywords.block,_a$3.keywords.diagnostic];TokenTypes.assignment_operators=[_a$3.tokens.equal,_a$3.tokens.plus_equal,_a$3.tokens.minus_equal,_a$3.tokens.times_equal,_a$3.tokens.division_equal,_a$3.tokens.modulo_equal,_a$3.tokens.and_equal,_a$3.tokens.or_equal,_a$3.tokens.xor_equal,_a$3.tokens.shift_right_equal,_a$3.tokens.shift_left_equal];TokenTypes.increment_operators=[_a$3.tokens.plus_plus,_a$3.tokens.minus_minus];class Token{constructor(s,d,_){this.type=s,this.lexeme=d,this.line=_}toString(){return this.lexeme}isTemplateType(){return TokenTypes.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==TokenTypes.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class WgslScanner{constructor(s){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=s??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new Token(TokenTypes.eof,"",this._line)),this._tokens}scanToken(){let s=this._advance();if(s==`
`)return this._line++,!0;if(this._isWhitespace(s))return!0;if(s=="/"){if(this._peekAhead()=="/"){for(;s!=`
`;){if(this._isAtEnd())return!0;s=this._advance()}return this._line++,!0}else if(this._peekAhead()=="*"){this._advance();let F=1;for(;F>0;){if(this._isAtEnd())return!0;if(s=this._advance(),s==`
`)this._line++;else if(s=="*"){if(this._peekAhead()=="/"&&(this._advance(),F--,F==0))return!0}else s=="/"&&this._peekAhead()=="*"&&(this._advance(),F++)}return!0}}const d=TokenTypes.simpleTokens[s];if(d)return this._addToken(d),!0;let _=TokenTypes.none;const S=this._isAlpha(s),T=s==="_";if(this._isAlphaNumeric(s)){let F=this._peekAhead();for(;this._isAlphaNumeric(F);)s+=this._advance(),F=this._peekAhead()}if(S){const F=TokenTypes.keywords[s];if(F)return this._addToken(F),!0}if(S||T)return this._addToken(TokenTypes.tokens.ident),!0;for(;;){let F=this._findType(s);const M=this._peekAhead();if(s=="-"&&this._tokens.length>0){if(M=="=")return this._current++,s+=M,this._addToken(TokenTypes.tokens.minus_equal),!0;if(M=="-")return this._current++,s+=M,this._addToken(TokenTypes.tokens.minus_minus),!0;const P=this._tokens.length-1;if((TokenTypes.literal_or_ident.indexOf(this._tokens[P].type)!=-1||this._tokens[P].type==TokenTypes.tokens.paren_right)&&M!=">")return this._addToken(F),!0}if(s==">"&&(M==">"||M=="=")){let P=!1,H=this._tokens.length-1;for(let J=0;J<5&&H>=0&&TokenTypes.assignment_operators.indexOf(this._tokens[H].type)===-1;++J,--H)if(this._tokens[H].type===TokenTypes.tokens.less_than){H>0&&this._tokens[H-1].isArrayOrTemplateType()&&(P=!0);break}if(P)return this._addToken(F),!0}if(F===TokenTypes.none){let P=s,H=0;const J=2;for(let K=0;K<J;++K)if(P+=this._peekAhead(K),F=this._findType(P),F!==TokenTypes.none){H=K;break}if(F===TokenTypes.none)return _===TokenTypes.none?!1:(this._current--,this._addToken(_),!0);s=P,this._current+=H+1}if(_=F,this._isAtEnd())break;s+=this._advance()}return _===TokenTypes.none?!1:(this._addToken(_),!0)}_findType(s){for(const _ in TokenTypes.regexTokens){const S=TokenTypes.regexTokens[_];if(this._match(s,S.rule))return S}const d=TokenTypes.literalTokens[s];return d||TokenTypes.none}_match(s,d){const _=d.exec(s);return _&&_.index==0&&_[0]==s}_isAtEnd(){return this._current>=this._source.length}_isAlpha(s){return s>="a"&&s<="z"||s>="A"&&s<="Z"}_isAlphaNumeric(s){return s>="a"&&s<="z"||s>="A"&&s<="Z"||s=="_"||s>="0"&&s<="9"}_isWhitespace(s){return s==" "||s=="	"||s=="\r"}_advance(s=0){let d=this._source[this._current];return s=s||0,s++,this._current+=s,d}_peekAhead(s=0){return s=s||0,this._current+s>=this._source.length?"\0":this._source[this._current+s]}_addToken(s){const d=this._source.substring(this._start,this._current);this._tokens.push(new Token(s,d,this._line))}}class WgslParser{constructor(){this._tokens=[],this._current=0,this._currentLine=0,this._context=new ParseContext,this._deferArrayCountEval=[]}parse(s){this._initialize(s),this._deferArrayCountEval.length=0;const d=[];for(;!this._isAtEnd();){const _=this._global_decl_or_directive();if(!_)break;d.push(_)}if(this._deferArrayCountEval.length>0){for(const _ of this._deferArrayCountEval){const S=_.arrayType,T=_.countNode;if(T instanceof VariableExpr){const M=T.name,P=this._context.constants.get(M);if(P)try{const H=P.evaluate(this._context);S.count=H}catch{}}}this._deferArrayCountEval.length=0}return d}_initialize(s){if(s)if(typeof s=="string"){const d=new WgslScanner(s);this._tokens=d.scanTokens()}else this._tokens=s;else this._tokens=[];this._current=0}_error(s,d){return{token:s,message:d,toString:function(){return`${d}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==TokenTypes.eof}_match(s){if(s instanceof TokenType)return this._check(s)?(this._advance(),!0):!1;for(let d=0,_=s.length;d<_;++d){const S=s[d];if(this._check(S))return this._advance(),!0}return!1}_consume(s,d){if(this._check(s))return this._advance();throw this._error(this._peek(),d)}_check(s){if(this._isAtEnd())return!1;const d=this._peek();if(s instanceof Array){const _=d.type;return s.indexOf(_)!=-1}return d.type==s}_advance(){var s,d;return this._currentLine=(d=(s=this._peek())===null||s===void 0?void 0:s.line)!==null&&d!==void 0?d:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(TokenTypes.tokens.semicolon)&&!this._isAtEnd(););if(this._match(TokenTypes.keywords.alias)){const d=this._type_alias();return this._consume(TokenTypes.tokens.semicolon,"Expected ';'"),d}if(this._match(TokenTypes.keywords.diagnostic)){const d=this._diagnostic();return this._consume(TokenTypes.tokens.semicolon,"Expected ';'"),d}if(this._match(TokenTypes.keywords.requires)){const d=this._requires_directive();return this._consume(TokenTypes.tokens.semicolon,"Expected ';'"),d}if(this._match(TokenTypes.keywords.enable)){const d=this._enable_directive();return this._consume(TokenTypes.tokens.semicolon,"Expected ';'"),d}const s=this._attribute();if(this._check(TokenTypes.keywords.var)){const d=this._global_variable_decl();return d!=null&&(d.attributes=s),this._consume(TokenTypes.tokens.semicolon,"Expected ';'."),d}if(this._check(TokenTypes.keywords.override)){const d=this._override_variable_decl();return d!=null&&(d.attributes=s),this._consume(TokenTypes.tokens.semicolon,"Expected ';'."),d}if(this._check(TokenTypes.keywords.let)){const d=this._global_let_decl();return d!=null&&(d.attributes=s),this._consume(TokenTypes.tokens.semicolon,"Expected ';'."),d}if(this._check(TokenTypes.keywords.const)){const d=this._global_const_decl();return d!=null&&(d.attributes=s),this._consume(TokenTypes.tokens.semicolon,"Expected ';'."),d}if(this._check(TokenTypes.keywords.struct)){const d=this._struct_decl();return d!=null&&(d.attributes=s),d}if(this._check(TokenTypes.keywords.fn)){const d=this._function_decl();return d!=null&&(d.attributes=s),d}return null}_function_decl(){if(!this._match(TokenTypes.keywords.fn))return null;const s=this._currentLine,d=this._consume(TokenTypes.tokens.ident,"Expected function name.").toString();this._consume(TokenTypes.tokens.paren_left,"Expected '(' for function arguments.");const _=[];if(!this._check(TokenTypes.tokens.paren_right))do{if(this._check(TokenTypes.tokens.paren_right))break;const M=this._attribute(),P=this._consume(TokenTypes.tokens.ident,"Expected argument name.").toString();this._consume(TokenTypes.tokens.colon,"Expected ':' for argument type.");const H=this._attribute(),J=this._type_decl();J!=null&&(J.attributes=H,_.push(new Argument(P,J,M)))}while(this._match(TokenTypes.tokens.comma));this._consume(TokenTypes.tokens.paren_right,"Expected ')' after function arguments.");let S=null;if(this._match(TokenTypes.tokens.arrow)){const M=this._attribute();S=this._type_decl(),S!=null&&(S.attributes=M)}const T=this._compound_statement(),F=this._currentLine;return new Function$1(d,_,S,T,s,F)}_compound_statement(){const s=[];for(this._consume(TokenTypes.tokens.brace_left,"Expected '{' for block.");!this._check(TokenTypes.tokens.brace_right);){const d=this._statement();d!==null&&s.push(d)}return this._consume(TokenTypes.tokens.brace_right,"Expected '}' for block."),s}_statement(){for(;this._match(TokenTypes.tokens.semicolon)&&!this._isAtEnd(););if(this._check(TokenTypes.tokens.attr)&&this._attribute(),this._check(TokenTypes.keywords.if))return this._if_statement();if(this._check(TokenTypes.keywords.switch))return this._switch_statement();if(this._check(TokenTypes.keywords.loop))return this._loop_statement();if(this._check(TokenTypes.keywords.for))return this._for_statement();if(this._check(TokenTypes.keywords.while))return this._while_statement();if(this._check(TokenTypes.keywords.continuing))return this._continuing_statement();if(this._check(TokenTypes.keywords.static_assert))return this._static_assert_statement();if(this._check(TokenTypes.tokens.brace_left))return this._compound_statement();let s=null;return this._check(TokenTypes.keywords.return)?s=this._return_statement():this._check([TokenTypes.keywords.var,TokenTypes.keywords.let,TokenTypes.keywords.const])?s=this._variable_statement():this._match(TokenTypes.keywords.discard)?s=new Discard:this._match(TokenTypes.keywords.break)?s=new Break:this._match(TokenTypes.keywords.continue)?s=new Continue:s=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),s!=null&&this._consume(TokenTypes.tokens.semicolon,"Expected ';' after statement."),s}_static_assert_statement(){if(!this._match(TokenTypes.keywords.static_assert))return null;const s=this._optional_paren_expression();return new StaticAssert(s)}_while_statement(){if(!this._match(TokenTypes.keywords.while))return null;const s=this._optional_paren_expression();this._check(TokenTypes.tokens.attr)&&this._attribute();const d=this._compound_statement();return new While(s,d)}_continuing_statement(){if(!this._match(TokenTypes.keywords.continuing))return null;const s=this._compound_statement();return new Continuing(s)}_for_statement(){if(!this._match(TokenTypes.keywords.for))return null;this._consume(TokenTypes.tokens.paren_left,"Expected '('.");const s=this._check(TokenTypes.tokens.semicolon)?null:this._for_init();this._consume(TokenTypes.tokens.semicolon,"Expected ';'.");const d=this._check(TokenTypes.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(TokenTypes.tokens.semicolon,"Expected ';'.");const _=this._check(TokenTypes.tokens.paren_right)?null:this._for_increment();this._consume(TokenTypes.tokens.paren_right,"Expected ')'."),this._check(TokenTypes.tokens.attr)&&this._attribute();const S=this._compound_statement();return new For(s,d,_,S)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(TokenTypes.keywords.var)){const s=this._variable_decl();if(s===null)throw this._error(this._peek(),"Variable declaration expected.");let d=null;return this._match(TokenTypes.tokens.equal)&&(d=this._short_circuit_or_expression()),new Var(s.name,s.type,s.storage,s.access,d)}if(this._match(TokenTypes.keywords.let)){const s=this._consume(TokenTypes.tokens.ident,"Expected name for let.").toString();let d=null;if(this._match(TokenTypes.tokens.colon)){const S=this._attribute();d=this._type_decl(),d!=null&&(d.attributes=S)}this._consume(TokenTypes.tokens.equal,"Expected '=' for let.");const _=this._short_circuit_or_expression();return new Let(s,d,null,null,_)}if(this._match(TokenTypes.keywords.const)){const s=this._consume(TokenTypes.tokens.ident,"Expected name for const.").toString();let d=null;if(this._match(TokenTypes.tokens.colon)){const S=this._attribute();d=this._type_decl(),d!=null&&(d.attributes=S)}this._consume(TokenTypes.tokens.equal,"Expected '=' for const.");const _=this._short_circuit_or_expression();return new Const(s,d,null,null,_)}return null}_increment_decrement_statement(){const s=this._current,d=this._unary_expression();if(d==null)return null;if(!this._check(TokenTypes.increment_operators))return this._current=s,null;const _=this._consume(TokenTypes.increment_operators,"Expected increment operator");return new Increment(_.type===TokenTypes.tokens.plus_plus?IncrementOperator.increment:IncrementOperator.decrement,d)}_assignment_statement(){let s=null;if(this._check(TokenTypes.tokens.brace_right))return null;let d=this._match(TokenTypes.tokens.underscore);if(d||(s=this._unary_expression()),!d&&s==null)return null;const _=this._consume(TokenTypes.assignment_operators,"Expected assignment operator."),S=this._short_circuit_or_expression();return new Assign(AssignOperator.parse(_.lexeme),s,S)}_func_call_statement(){if(!this._check(TokenTypes.tokens.ident))return null;const s=this._current,d=this._consume(TokenTypes.tokens.ident,"Expected function name."),_=this._argument_expression_list();return _===null?(this._current=s,null):new Call(d.lexeme,_)}_loop_statement(){if(!this._match(TokenTypes.keywords.loop))return null;this._check(TokenTypes.tokens.attr)&&this._attribute(),this._consume(TokenTypes.tokens.brace_left,"Expected '{' for loop.");const s=[];let d=this._statement();for(;d!==null;){if(Array.isArray(d))for(let S of d)s.push(S);else s.push(d);d=this._statement()}let _=null;return this._match(TokenTypes.keywords.continuing)&&(_=this._compound_statement()),this._consume(TokenTypes.tokens.brace_right,"Expected '}' for loop."),new Loop(s,_)}_switch_statement(){if(!this._match(TokenTypes.keywords.switch))return null;const s=this._optional_paren_expression();this._check(TokenTypes.tokens.attr)&&this._attribute(),this._consume(TokenTypes.tokens.brace_left,"Expected '{' for switch.");const d=this._switch_body();if(d==null||d.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(TokenTypes.tokens.brace_right,"Expected '}' for switch."),new Switch(s,d)}_switch_body(){const s=[];if(this._match(TokenTypes.keywords.case)){const d=this._case_selectors();this._match(TokenTypes.tokens.colon),this._check(TokenTypes.tokens.attr)&&this._attribute(),this._consume(TokenTypes.tokens.brace_left,"Exected '{' for switch case.");const _=this._case_body();this._consume(TokenTypes.tokens.brace_right,"Exected '}' for switch case."),s.push(new Case(d,_))}if(this._match(TokenTypes.keywords.default)){this._match(TokenTypes.tokens.colon),this._check(TokenTypes.tokens.attr)&&this._attribute(),this._consume(TokenTypes.tokens.brace_left,"Exected '{' for switch default.");const d=this._case_body();this._consume(TokenTypes.tokens.brace_right,"Exected '}' for switch default."),s.push(new Default(d))}if(this._check([TokenTypes.keywords.default,TokenTypes.keywords.case])){const d=this._switch_body();s.push(d[0])}return s}_case_selectors(){const s=[this._shift_expression()];for(;this._match(TokenTypes.tokens.comma);)s.push(this._shift_expression());return s}_case_body(){if(this._match(TokenTypes.keywords.fallthrough))return this._consume(TokenTypes.tokens.semicolon,"Expected ';'"),[];let s=this._statement();if(s==null)return[];s instanceof Array||(s=[s]);const d=this._case_body();return d.length==0?s:[...s,d[0]]}_if_statement(){if(!this._match(TokenTypes.keywords.if))return null;const s=this._optional_paren_expression();this._check(TokenTypes.tokens.attr)&&this._attribute();const d=this._compound_statement();let _=[];this._match_elseif()&&(this._check(TokenTypes.tokens.attr)&&this._attribute(),_=this._elseif_statement(_));let S=null;return this._match(TokenTypes.keywords.else)&&(this._check(TokenTypes.tokens.attr)&&this._attribute(),S=this._compound_statement()),new If$1(s,d,_,S)}_match_elseif(){return this._tokens[this._current].type===TokenTypes.keywords.else&&this._tokens[this._current+1].type===TokenTypes.keywords.if?(this._advance(),this._advance(),!0):!1}_elseif_statement(s=[]){const d=this._optional_paren_expression(),_=this._compound_statement();return s.push(new ElseIf(d,_)),this._match_elseif()&&(this._check(TokenTypes.tokens.attr)&&this._attribute(),this._elseif_statement(s)),s}_return_statement(){if(!this._match(TokenTypes.keywords.return))return null;const s=this._short_circuit_or_expression();return new Return(s)}_short_circuit_or_expression(){let s=this._short_circuit_and_expr();for(;this._match(TokenTypes.tokens.or_or);)s=new BinaryOperator(this._previous().toString(),s,this._short_circuit_and_expr());return s}_short_circuit_and_expr(){let s=this._inclusive_or_expression();for(;this._match(TokenTypes.tokens.and_and);)s=new BinaryOperator(this._previous().toString(),s,this._inclusive_or_expression());return s}_inclusive_or_expression(){let s=this._exclusive_or_expression();for(;this._match(TokenTypes.tokens.or);)s=new BinaryOperator(this._previous().toString(),s,this._exclusive_or_expression());return s}_exclusive_or_expression(){let s=this._and_expression();for(;this._match(TokenTypes.tokens.xor);)s=new BinaryOperator(this._previous().toString(),s,this._and_expression());return s}_and_expression(){let s=this._equality_expression();for(;this._match(TokenTypes.tokens.and);)s=new BinaryOperator(this._previous().toString(),s,this._equality_expression());return s}_equality_expression(){const s=this._relational_expression();return this._match([TokenTypes.tokens.equal_equal,TokenTypes.tokens.not_equal])?new BinaryOperator(this._previous().toString(),s,this._relational_expression()):s}_relational_expression(){let s=this._shift_expression();for(;this._match([TokenTypes.tokens.less_than,TokenTypes.tokens.greater_than,TokenTypes.tokens.less_than_equal,TokenTypes.tokens.greater_than_equal]);)s=new BinaryOperator(this._previous().toString(),s,this._shift_expression());return s}_shift_expression(){let s=this._additive_expression();for(;this._match([TokenTypes.tokens.shift_left,TokenTypes.tokens.shift_right]);)s=new BinaryOperator(this._previous().toString(),s,this._additive_expression());return s}_additive_expression(){let s=this._multiplicative_expression();for(;this._match([TokenTypes.tokens.plus,TokenTypes.tokens.minus]);)s=new BinaryOperator(this._previous().toString(),s,this._multiplicative_expression());return s}_multiplicative_expression(){let s=this._unary_expression();for(;this._match([TokenTypes.tokens.star,TokenTypes.tokens.forward_slash,TokenTypes.tokens.modulo]);)s=new BinaryOperator(this._previous().toString(),s,this._unary_expression());return s}_unary_expression(){return this._match([TokenTypes.tokens.minus,TokenTypes.tokens.bang,TokenTypes.tokens.tilde,TokenTypes.tokens.star,TokenTypes.tokens.and])?new UnaryOperator(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const s=this._primary_expression(),d=this._postfix_expression();return d&&(s.postfix=d),s}_postfix_expression(){if(this._match(TokenTypes.tokens.bracket_left)){const s=this._short_circuit_or_expression();this._consume(TokenTypes.tokens.bracket_right,"Expected ']'.");const d=new ArrayIndex(s),_=this._postfix_expression();return _&&(d.postfix=_),d}if(this._match(TokenTypes.tokens.period)){const s=this._consume(TokenTypes.tokens.ident,"Expected member name."),d=this._postfix_expression(),_=new StringExpr(s.lexeme);return d&&(_.postfix=d),_}return null}_getStruct(s){return this._context.aliases.has(s)?this._context.aliases.get(s).type:this._context.structs.has(s)?this._context.structs.get(s):null}_primary_expression(){if(this._match(TokenTypes.tokens.ident)){const _=this._previous().toString();if(this._check(TokenTypes.tokens.paren_left)){const S=this._argument_expression_list(),T=this._getStruct(_);return T!=null?new CreateExpr(T,S):new CallExpr(_,S)}if(this._context.constants.has(_)){const S=this._context.constants.get(_);return new ConstExpr(_,S.value)}return new VariableExpr(_)}if(this._match(TokenTypes.const_literal))return new LiteralExpr(parseFloat(this._previous().toString()));if(this._check(TokenTypes.tokens.paren_left))return this._paren_expression();if(this._match(TokenTypes.keywords.bitcast)){this._consume(TokenTypes.tokens.less_than,"Expected '<'.");const _=this._type_decl();this._consume(TokenTypes.tokens.greater_than,"Expected '>'.");const S=this._paren_expression();return new BitcastExpr(_,S)}const s=this._type_decl(),d=this._argument_expression_list();return new CreateExpr(s,d)}_argument_expression_list(){if(!this._match(TokenTypes.tokens.paren_left))return null;const s=[];do{if(this._check(TokenTypes.tokens.paren_right))break;const d=this._short_circuit_or_expression();s.push(d)}while(this._match(TokenTypes.tokens.comma));return this._consume(TokenTypes.tokens.paren_right,"Expected ')' for agument list"),s}_optional_paren_expression(){this._match(TokenTypes.tokens.paren_left);const s=this._short_circuit_or_expression();return this._match(TokenTypes.tokens.paren_right),new GroupingExpr([s])}_paren_expression(){this._consume(TokenTypes.tokens.paren_left,"Expected '('.");const s=this._short_circuit_or_expression();return this._consume(TokenTypes.tokens.paren_right,"Expected ')'."),new GroupingExpr([s])}_struct_decl(){if(!this._match(TokenTypes.keywords.struct))return null;const s=this._currentLine,d=this._consume(TokenTypes.tokens.ident,"Expected name for struct.").toString();this._consume(TokenTypes.tokens.brace_left,"Expected '{' for struct body.");const _=[];for(;!this._check(TokenTypes.tokens.brace_right);){const F=this._attribute(),M=this._consume(TokenTypes.tokens.ident,"Expected variable name.").toString();this._consume(TokenTypes.tokens.colon,"Expected ':' for struct member type.");const P=this._attribute(),H=this._type_decl();H!=null&&(H.attributes=P),this._check(TokenTypes.tokens.brace_right)?this._match(TokenTypes.tokens.comma):this._consume(TokenTypes.tokens.comma,"Expected ',' for struct member."),_.push(new Member(M,H,F))}this._consume(TokenTypes.tokens.brace_right,"Expected '}' after struct body.");const S=this._currentLine,T=new Struct(d,_,s,S);return this._context.structs.set(d,T),T}_global_variable_decl(){const s=this._variable_decl();return s&&this._match(TokenTypes.tokens.equal)&&(s.value=this._const_expression()),s}_override_variable_decl(){const s=this._override_decl();return s&&this._match(TokenTypes.tokens.equal)&&(s.value=this._const_expression()),s}_global_const_decl(){if(!this._match(TokenTypes.keywords.const))return null;const s=this._consume(TokenTypes.tokens.ident,"Expected variable name");let d=null;if(this._match(TokenTypes.tokens.colon)){const T=this._attribute();d=this._type_decl(),d!=null&&(d.attributes=T)}let _=null;if(this._match(TokenTypes.tokens.equal)){const T=this._short_circuit_or_expression();if(T instanceof CreateExpr)_=T;else if(T instanceof ConstExpr&&T.initializer instanceof CreateExpr)_=T.initializer;else try{const F=T.evaluate(this._context);_=new LiteralExpr(F)}catch{_=T}}const S=new Const(s.toString(),d,"","",_);return this._context.constants.set(S.name,S),S}_global_let_decl(){if(!this._match(TokenTypes.keywords.let))return null;const s=this._consume(TokenTypes.tokens.ident,"Expected variable name");let d=null;if(this._match(TokenTypes.tokens.colon)){const S=this._attribute();d=this._type_decl(),d!=null&&(d.attributes=S)}let _=null;return this._match(TokenTypes.tokens.equal)&&(_=this._const_expression()),new Let(s.toString(),d,"","",_)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(TokenTypes.keywords.var))return null;let s="",d="";this._match(TokenTypes.tokens.less_than)&&(s=this._consume(TokenTypes.storage_class,"Expected storage_class.").toString(),this._match(TokenTypes.tokens.comma)&&(d=this._consume(TokenTypes.access_mode,"Expected access_mode.").toString()),this._consume(TokenTypes.tokens.greater_than,"Expected '>'."));const _=this._consume(TokenTypes.tokens.ident,"Expected variable name");let S=null;if(this._match(TokenTypes.tokens.colon)){const T=this._attribute();S=this._type_decl(),S!=null&&(S.attributes=T)}return new Var(_.toString(),S,s,d,null)}_override_decl(){if(!this._match(TokenTypes.keywords.override))return null;const s=this._consume(TokenTypes.tokens.ident,"Expected variable name");let d=null;if(this._match(TokenTypes.tokens.colon)){const _=this._attribute();d=this._type_decl(),d!=null&&(d.attributes=_)}return new Override(s.toString(),d,null)}_diagnostic(){this._consume(TokenTypes.tokens.paren_left,"Expected '('");const s=this._consume(TokenTypes.tokens.ident,"Expected severity control name.");this._consume(TokenTypes.tokens.comma,"Expected ','");const d=this._consume(TokenTypes.tokens.ident,"Expected diagnostic rule name.");return this._consume(TokenTypes.tokens.paren_right,"Expected ')'"),new Diagnostic(s.toString(),d.toString())}_enable_directive(){const s=this._consume(TokenTypes.tokens.ident,"identity expected.");return new Enable(s.toString())}_requires_directive(){const s=[this._consume(TokenTypes.tokens.ident,"identity expected.").toString()];for(;this._match(TokenTypes.tokens.comma);){const d=this._consume(TokenTypes.tokens.ident,"identity expected.");s.push(d.toString())}return new Requires(s)}_type_alias(){const s=this._consume(TokenTypes.tokens.ident,"identity expected.");this._consume(TokenTypes.tokens.equal,"Expected '=' for type alias.");let d=this._type_decl();if(d===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(d.name)&&(d=this._context.aliases.get(d.name).type);const _=new Alias(s.toString(),d);return this._context.aliases.set(_.name,_),_}_type_decl(){if(this._check([TokenTypes.tokens.ident,...TokenTypes.texel_format,TokenTypes.keywords.bool,TokenTypes.keywords.f32,TokenTypes.keywords.i32,TokenTypes.keywords.u32])){const _=this._advance(),S=_.toString();return this._context.structs.has(S)?this._context.structs.get(S):this._context.aliases.has(S)?this._context.aliases.get(S).type:new Type$1(_.toString())}let s=this._texture_sampler_types();if(s)return s;if(this._check(TokenTypes.template_types)){let _=this._advance().toString(),S=null,T=null;return this._match(TokenTypes.tokens.less_than)&&(S=this._type_decl(),T=null,this._match(TokenTypes.tokens.comma)&&(T=this._consume(TokenTypes.access_mode,"Expected access_mode for pointer").toString()),this._consume(TokenTypes.tokens.greater_than,"Expected '>' for type.")),new TemplateType(_,S,T)}if(this._match(TokenTypes.keywords.ptr)){let _=this._previous().toString();this._consume(TokenTypes.tokens.less_than,"Expected '<' for pointer.");const S=this._consume(TokenTypes.storage_class,"Expected storage_class for pointer");this._consume(TokenTypes.tokens.comma,"Expected ',' for pointer.");const T=this._type_decl();let F=null;return this._match(TokenTypes.tokens.comma)&&(F=this._consume(TokenTypes.access_mode,"Expected access_mode for pointer").toString()),this._consume(TokenTypes.tokens.greater_than,"Expected '>' for pointer."),new PointerType(_,S.toString(),T,F)}const d=this._attribute();if(this._match(TokenTypes.keywords.array)){let _=null,S=-1;const T=this._previous();let F=null;if(this._match(TokenTypes.tokens.less_than)){_=this._type_decl(),this._context.aliases.has(_.name)&&(_=this._context.aliases.get(_.name).type);let P="";if(this._match(TokenTypes.tokens.comma)){F=this._shift_expression();try{P=F.evaluate(this._context).toString(),F=null}catch{P="1"}}this._consume(TokenTypes.tokens.greater_than,"Expected '>' for array."),S=P?parseInt(P):0}const M=new ArrayType(T.toString(),d,_,S);return F&&this._deferArrayCountEval.push({arrayType:M,countNode:F}),M}return null}_texture_sampler_types(){if(this._match(TokenTypes.sampler_type))return new SamplerType(this._previous().toString(),null,null);if(this._match(TokenTypes.depth_texture_type))return new SamplerType(this._previous().toString(),null,null);if(this._match(TokenTypes.sampled_texture_type)||this._match(TokenTypes.multisampled_texture_type)){const s=this._previous();this._consume(TokenTypes.tokens.less_than,"Expected '<' for sampler type.");const d=this._type_decl();return this._consume(TokenTypes.tokens.greater_than,"Expected '>' for sampler type."),new SamplerType(s.toString(),d,null)}if(this._match(TokenTypes.storage_texture_type)){const s=this._previous();this._consume(TokenTypes.tokens.less_than,"Expected '<' for sampler type.");const d=this._consume(TokenTypes.texel_format,"Invalid texel format.").toString();this._consume(TokenTypes.tokens.comma,"Expected ',' after texel format.");const _=this._consume(TokenTypes.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(TokenTypes.tokens.greater_than,"Expected '>' for sampler type."),new SamplerType(s.toString(),d,_)}return null}_attribute(){let s=[];for(;this._match(TokenTypes.tokens.attr);){const d=this._consume(TokenTypes.attribute_name,"Expected attribute name"),_=new Attribute$1(d.toString(),null);if(this._match(TokenTypes.tokens.paren_left)){if(_.value=this._consume(TokenTypes.literal_or_ident,"Expected attribute value").toString(),this._check(TokenTypes.tokens.comma)){this._advance();do{const S=this._consume(TokenTypes.literal_or_ident,"Expected attribute value").toString();_.value instanceof Array||(_.value=[_.value]),_.value.push(S)}while(this._match(TokenTypes.tokens.comma))}this._consume(TokenTypes.tokens.paren_right,"Expected ')'")}s.push(_)}return s.length==0?null:s}}class TypeInfo{constructor(s,d){this.name=s,this.attributes=d,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class MemberInfo{constructor(s,d,_){this.name=s,this.type=d,this.attributes=_,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class StructInfo extends TypeInfo{constructor(s,d){super(s,d),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class ArrayInfo extends TypeInfo{constructor(s,d){super(s,d),this.count=0,this.stride=0}get isArray(){return!0}}class TemplateInfo extends TypeInfo{constructor(s,d,_,S){super(s,_),this.format=d,this.access=S}get isTemplate(){return!0}}var ResourceType;(function(f){f[f.Uniform=0]="Uniform",f[f.Storage=1]="Storage",f[f.Texture=2]="Texture",f[f.Sampler=3]="Sampler",f[f.StorageTexture=4]="StorageTexture"})(ResourceType||(ResourceType={}));class VariableInfo{constructor(s,d,_,S,T,F,M){this.name=s,this.type=d,this.group=_,this.binding=S,this.attributes=T,this.resourceType=F,this.access=M}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class AliasInfo{constructor(s,d){this.name=s,this.type=d}}class _TypeSize{constructor(s,d){this.align=s,this.size=d}}class InputInfo{constructor(s,d,_,S){this.name=s,this.type=d,this.locationType=_,this.location=S,this.interpolation=null}}class OutputInfo{constructor(s,d,_,S){this.name=s,this.type=d,this.locationType=_,this.location=S}}class OverrideInfo{constructor(s,d,_,S){this.name=s,this.type=d,this.attributes=_,this.id=S}}class FunctionInfo{constructor(s,d=null){this.stage=null,this.inputs=[],this.outputs=[],this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=s,this.stage=d}}class EntryFunctions{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class _FunctionResources{constructor(s){this.resources=null,this.inUse=!1,this.info=null,this.node=s}}class WgslReflect{constructor(s){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new EntryFunctions,this.functions=[],this._types=new Map,this._functions=new Map,s&&this.update(s)}_isStorageTexture(s){return s.name=="texture_storage_1d"||s.name=="texture_storage_2d"||s.name=="texture_storage_2d_array"||s.name=="texture_storage_3d"}update(s){const _=new WgslParser().parse(s);for(const S of _)S instanceof Function$1&&this._functions.set(S.name,new _FunctionResources(S));for(const S of _)if(S instanceof Struct){const T=this._getTypeInfo(S,null);T instanceof StructInfo&&this.structs.push(T)}for(const S of _){if(S instanceof Alias){this.aliases.push(this._getAliasInfo(S));continue}if(S instanceof Override){const T=S,F=this._getAttributeNum(T.attributes,"id",0),M=T.type!=null?this._getTypeInfo(T.type,T.attributes):null;this.overrides.push(new OverrideInfo(T.name,M,T.attributes,F));continue}if(this._isUniformVar(S)){const T=S,F=this._getAttributeNum(T.attributes,"group",0),M=this._getAttributeNum(T.attributes,"binding",0),P=this._getTypeInfo(T.type,T.attributes),H=new VariableInfo(T.name,P,F,M,T.attributes,ResourceType.Uniform,T.access);this.uniforms.push(H);continue}if(this._isStorageVar(S)){const T=S,F=this._getAttributeNum(T.attributes,"group",0),M=this._getAttributeNum(T.attributes,"binding",0),P=this._getTypeInfo(T.type,T.attributes),H=this._isStorageTexture(P),J=new VariableInfo(T.name,P,F,M,T.attributes,H?ResourceType.StorageTexture:ResourceType.Storage,T.access);this.storage.push(J);continue}if(this._isTextureVar(S)){const T=S,F=this._getAttributeNum(T.attributes,"group",0),M=this._getAttributeNum(T.attributes,"binding",0),P=this._getTypeInfo(T.type,T.attributes),H=this._isStorageTexture(P),J=new VariableInfo(T.name,P,F,M,T.attributes,H?ResourceType.StorageTexture:ResourceType.Texture,T.access);H?this.storage.push(J):this.textures.push(J);continue}if(this._isSamplerVar(S)){const T=S,F=this._getAttributeNum(T.attributes,"group",0),M=this._getAttributeNum(T.attributes,"binding",0),P=this._getTypeInfo(T.type,T.attributes),H=new VariableInfo(T.name,P,F,M,T.attributes,ResourceType.Sampler,T.access);this.samplers.push(H);continue}if(S instanceof Function$1){const T=this._getAttribute(S,"vertex"),F=this._getAttribute(S,"fragment"),M=this._getAttribute(S,"compute"),P=T||F||M,H=new FunctionInfo(S.name,P==null?void 0:P.name);H.startLine=S.startLine,H.endLine=S.endLine,this.functions.push(H),this._functions.get(S.name).info=H,P&&(this._functions.get(S.name).inUse=!0,H.inUse=!0,H.resources=this._findResources(S,!!P),H.inputs=this._getInputs(S.args),H.outputs=this._getOutputs(S.returnType),this.entry[P.name].push(H));continue}}for(const S of this._functions.values())S.info&&(S.info.inUse=S.inUse,this._addCalls(S.node,S.info.calls));for(const S of this._functions.values())S.node.search(T=>{var F;if(T.astNodeType==="varExpr"){const M=T;for(const P of this.overrides)M.name==P.name&&((F=S.info)===null||F===void 0||F.overrides.push(P))}});for(const S of this.uniforms)this._markStructsInUse(S.type);for(const S of this.storage)this._markStructsInUse(S.type)}_markStructsInUse(s){if(s)if(s.isStruct){if(s.inUse=!0,s.members)for(const d of s.members)this._markStructsInUse(d.type)}else if(s.isArray)this._markStructsInUse(s.format);else if(s.isTemplate)s.format&&this._markStructsInUse(s.format);else{const d=this._getAlias(s.name);d&&this._markStructsInUse(d)}}_addCalls(s,d){var _;for(const S of s.calls){const T=(_=this._functions.get(S.name))===null||_===void 0?void 0:_.info;T&&d.add(T)}}findResource(s,d){for(const _ of this.uniforms)if(_.group==s&&_.binding==d)return _;for(const _ of this.storage)if(_.group==s&&_.binding==d)return _;for(const _ of this.textures)if(_.group==s&&_.binding==d)return _;for(const _ of this.samplers)if(_.group==s&&_.binding==d)return _;return null}_findResource(s){for(const d of this.uniforms)if(d.name==s)return d;for(const d of this.storage)if(d.name==s)return d;for(const d of this.textures)if(d.name==s)return d;for(const d of this.samplers)if(d.name==s)return d;return null}_markStructsFromAST(s){const d=this._getTypeInfo(s,null);this._markStructsInUse(d)}_findResources(s,d){const _=[],S=this,T=[];return s.search(F=>{if(F instanceof _BlockStart)T.push({});else if(F instanceof _BlockEnd)T.pop();else if(F instanceof Var){const M=F;d&&M.type!==null&&this._markStructsFromAST(M.type),T.length>0&&(T[T.length-1][M.name]=M)}else if(F instanceof CreateExpr){const M=F;d&&M.type!==null&&this._markStructsFromAST(M.type)}else if(F instanceof Let){const M=F;d&&M.type!==null&&this._markStructsFromAST(M.type),T.length>0&&(T[T.length-1][M.name]=M)}else if(F instanceof VariableExpr){const M=F;if(T.length>0&&T[T.length-1][M.name])return;const P=S._findResource(M.name);P&&_.push(P)}else if(F instanceof CallExpr){const M=F,P=S._functions.get(M.name);P&&(d&&(P.inUse=!0),s.calls.add(P.node),P.resources===null&&(P.resources=S._findResources(P.node,d)),_.push(...P.resources))}else if(F instanceof Call){const M=F,P=S._functions.get(M.name);P&&(d&&(P.inUse=!0),s.calls.add(P.node),P.resources===null&&(P.resources=S._findResources(P.node,d)),_.push(...P.resources))}}),[...new Map(_.map(F=>[F.name,F])).values()]}getBindGroups(){const s=[];function d(_,S){_>=s.length&&(s.length=_+1),s[_]===void 0&&(s[_]=[]),S>=s[_].length&&(s[_].length=S+1)}for(const _ of this.uniforms){d(_.group,_.binding);const S=s[_.group];S[_.binding]=_}for(const _ of this.storage){d(_.group,_.binding);const S=s[_.group];S[_.binding]=_}for(const _ of this.textures){d(_.group,_.binding);const S=s[_.group];S[_.binding]=_}for(const _ of this.samplers){d(_.group,_.binding);const S=s[_.group];S[_.binding]=_}return s}_getOutputs(s,d=void 0){if(d===void 0&&(d=[]),s instanceof Struct)this._getStructOutputs(s,d);else{const _=this._getOutputInfo(s);_!==null&&d.push(_)}return d}_getStructOutputs(s,d){for(const _ of s.members)if(_.type instanceof Struct)this._getStructOutputs(_.type,d);else{const S=this._getAttribute(_,"location")||this._getAttribute(_,"builtin");if(S!==null){const T=this._getTypeInfo(_.type,_.type.attributes),F=this._parseInt(S.value),M=new OutputInfo(_.name,T,S.name,F);d.push(M)}}}_getOutputInfo(s){const d=this._getAttribute(s,"location")||this._getAttribute(s,"builtin");if(d!==null){const _=this._getTypeInfo(s,s.attributes),S=this._parseInt(d.value);return new OutputInfo("",_,d.name,S)}return null}_getInputs(s,d=void 0){d===void 0&&(d=[]);for(const _ of s)if(_.type instanceof Struct)this._getStructInputs(_.type,d);else{const S=this._getInputInfo(_);S!==null&&d.push(S)}return d}_getStructInputs(s,d){for(const _ of s.members)if(_.type instanceof Struct)this._getStructInputs(_.type,d);else{const S=this._getInputInfo(_);S!==null&&d.push(S)}}_getInputInfo(s){const d=this._getAttribute(s,"location")||this._getAttribute(s,"builtin");if(d!==null){const _=this._getAttribute(s,"interpolation"),S=this._getTypeInfo(s.type,s.attributes),T=this._parseInt(d.value),F=new InputInfo(s.name,S,d.name,T);return _!==null&&(F.interpolation=this._parseString(_.value)),F}return null}_parseString(s){return s instanceof Array&&(s=s[0]),s}_parseInt(s){s instanceof Array&&(s=s[0]);const d=parseInt(s);return isNaN(d)?s:d}_getAlias(s){for(const d of this.aliases)if(d.name==s)return d.type;return null}_getAliasInfo(s){return new AliasInfo(s.name,this._getTypeInfo(s.type,null))}_getTypeInfo(s,d){if(this._types.has(s))return this._types.get(s);if(s instanceof ArrayType){const S=s,T=this._getTypeInfo(S.format,S.attributes),F=new ArrayInfo(S.name,d);return F.format=T,F.count=S.count,this._types.set(s,F),this._updateTypeInfo(F),F}if(s instanceof Struct){const S=s,T=new StructInfo(S.name,d);T.startLine=S.startLine,T.endLine=S.endLine;for(const F of S.members){const M=this._getTypeInfo(F.type,F.attributes);T.members.push(new MemberInfo(F.name,M,F.attributes))}return this._types.set(s,T),this._updateTypeInfo(T),T}if(s instanceof SamplerType){const S=s,T=S.format instanceof Type$1,F=S.format?T?this._getTypeInfo(S.format,null):new TypeInfo(S.format,null):null,M=new TemplateInfo(S.name,F,d,S.access);return this._types.set(s,M),this._updateTypeInfo(M),M}if(s instanceof TemplateType){const S=s,T=S.format?this._getTypeInfo(S.format,null):null,F=new TemplateInfo(S.name,T,d,S.access);return this._types.set(s,F),this._updateTypeInfo(F),F}const _=new TypeInfo(s.name,d);return this._types.set(s,_),this._updateTypeInfo(_),_}_updateTypeInfo(s){var d,_;const S=this._getTypeSize(s);if(s.size=(d=S==null?void 0:S.size)!==null&&d!==void 0?d:0,s instanceof ArrayInfo){const T=this._getTypeSize(s.format);s.stride=(_=T==null?void 0:T.size)!==null&&_!==void 0?_:0,this._updateTypeInfo(s.format)}s instanceof StructInfo&&this._updateStructInfo(s)}_updateStructInfo(s){var d;let _=0,S=0,T=0,F=0;for(let M=0,P=s.members.length;M<P;++M){const H=s.members[M],J=this._getTypeSize(H);if(!J)continue;(d=this._getAlias(H.type.name))!==null&&d!==void 0||H.type;const K=J.align,z=J.size;_=this._roundUp(K,_+S),S=z,T=_,F=Math.max(F,K),H.offset=_,H.size=z,this._updateTypeInfo(H.type)}s.size=this._roundUp(F,T+S),s.align=F}_getTypeSize(s){var d,_;if(s==null)return null;const S=this._getAttributeNum(s.attributes,"size",0),T=this._getAttributeNum(s.attributes,"align",0);if(s instanceof MemberInfo&&(s=s.type),s instanceof TypeInfo){const F=this._getAlias(s.name);F!==null&&(s=F)}{const F=WgslReflect._typeInfo[s.name];if(F!==void 0){const M=((d=s.format)===null||d===void 0?void 0:d.name)==="f16"?2:1;return new _TypeSize(Math.max(T,F.align/M),Math.max(S,F.size/M))}}{const F=WgslReflect._typeInfo[s.name.substring(0,s.name.length-1)];if(F){const M=s.name[s.name.length-1]==="h"?2:1;return new _TypeSize(Math.max(T,F.align/M),Math.max(S,F.size/M))}}if(s instanceof ArrayInfo){let F=s,M=8,P=8;const H=this._getTypeSize(F.format);H!==null&&(P=H.size,M=H.align);const J=F.count,K=this._getAttributeNum((_=s==null?void 0:s.attributes)!==null&&_!==void 0?_:null,"stride",this._roundUp(M,P));return P=J*K,S&&(P=S),new _TypeSize(Math.max(T,M),Math.max(S,P))}if(s instanceof StructInfo){let F=0,M=0,P=0,H=0,J=0;for(const K of s.members){const z=this._getTypeSize(K.type);z!==null&&(F=Math.max(z.align,F),P=this._roundUp(z.align,P+H),H=z.size,J=P)}return M=this._roundUp(F,J+H),new _TypeSize(Math.max(T,F),Math.max(S,M))}return null}_isUniformVar(s){return s instanceof Var&&s.storage=="uniform"}_isStorageVar(s){return s instanceof Var&&s.storage=="storage"}_isTextureVar(s){return s instanceof Var&&s.type!==null&&WgslReflect._textureTypes.indexOf(s.type.name)!=-1}_isSamplerVar(s){return s instanceof Var&&s.type!==null&&WgslReflect._samplerTypes.indexOf(s.type.name)!=-1}_getAttribute(s,d){const _=s;if(!_||!_.attributes)return null;const S=_.attributes;for(let T of S)if(T.name==d)return T;return null}_getAttributeNum(s,d,_){if(s===null)return _;for(let S of s)if(S.name==d){let T=S!==null&&S.value!==null?S.value:_;return T instanceof Array&&(T=T[0]),typeof T=="number"?T:typeof T=="string"?parseInt(T):_}return _}_roundUp(s,d){return Math.ceil(d/s)*s}}WgslReflect._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}};WgslReflect._textureTypes=TokenTypes.any_texture_type.map(f=>f.name);WgslReflect._samplerTypes=TokenTypes.sampler_type.map(f=>f.name);function getShaderLayoutFromWGSL(f){var T;const s={attributes:[],bindings:[]};let d;try{d=parseWGSL(f)}catch(F){return log.error(F.message)(),s}for(const F of d.uniforms){const M=[];for(const P of((T=F.type)==null?void 0:T.members)||[])M.push({name:P.name,type:getType$1(P.type)});s.bindings.push({type:"uniform",name:F.name,location:F.binding,group:F.group,members:M})}const _=d.entry.vertex[0],S=(_==null?void 0:_.inputs.length)||0;for(let F=0;F<S;F++){const M=_.inputs[F];if(M.locationType==="location"){const P=getType$1(M.type);s.attributes.push({name:M.name,location:Number(M.location),type:P})}}return s}function getType$1(f){return f.format?`${f.name}<${f.format.name}>`:f.name}function parseWGSL(f){try{return new WgslReflect(f)}catch(s){if(s instanceof Error)throw s;let d="WGSL parse error";throw typeof s=="object"&&(s!=null&&s.message)&&(d+=`: ${s.message} `),typeof s=="object"&&(s!=null&&s.token)&&(d+=s.token.line||""),new Error(d,{cause:s})}}const fp32shader=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;
const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;
const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;
const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;
float sin_taylor_fp32(float a) {
float r, s, t, x;
if (a == 0.0) {
return 0.0;
}
x = -a * a;
s = a;
r = a;
r = r * x;
t = r * INVERSE_FACTORIAL_3;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_5;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_7;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_9;
s = s + t;
return s;
}
void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
if (a == 0.0) {
sin_t = 0.0;
cos_t = 1.0;
}
sin_t = sin_taylor_fp32(a);
cos_t = sqrt(1.0 - sin_t * sin_t);
}
float tan_taylor_fp32(float a) {
float sin_a;
float cos_a;
if (a == 0.0) {
return 0.0;
}
float z = floor(a / TWO_PI);
float r = a - TWO_PI * z;
float t;
float q = floor(r / PI_2 + 0.5);
int j = int(q);
if (j < -2 || j > 2) {
return 1.0 / 0.0;
}
t = r - PI_2 * q;
q = floor(t / PI_16 + 0.5);
int k = int(q);
int abs_k = int(abs(float(k)));
if (abs_k > 4) {
return 1.0 / 0.0;
} else {
t = t - PI_16 * q;
}
float u = 0.0;
float v = 0.0;
float sin_t, cos_t;
float s, c;
sincos_taylor_fp32(t, sin_t, cos_t);
if (k == 0) {
s = sin_t;
c = cos_t;
} else {
if (abs(float(abs_k) - 1.0) < 0.5) {
u = COS_TABLE_0;
v = SIN_TABLE_0;
} else if (abs(float(abs_k) - 2.0) < 0.5) {
u = COS_TABLE_1;
v = SIN_TABLE_1;
} else if (abs(float(abs_k) - 3.0) < 0.5) {
u = COS_TABLE_2;
v = SIN_TABLE_2;
} else if (abs(float(abs_k) - 4.0) < 0.5) {
u = COS_TABLE_3;
v = SIN_TABLE_3;
}
if (k > 0) {
s = u * sin_t + v * cos_t;
c = u * cos_t - v * sin_t;
} else {
s = u * sin_t - v * cos_t;
c = u * cos_t + v * sin_t;
}
}
if (j == 0) {
sin_a = s;
cos_a = c;
} else if (j == 1) {
sin_a = c;
cos_a = -s;
} else if (j == -1) {
sin_a = -c;
cos_a = s;
} else {
sin_a = -s;
cos_a = -c;
}
return sin_a / cos_a;
}
#endif
float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
return tan_taylor_fp32(a);
#else
return tan(a);
#endif
}
`,fp32={name:"fp32",vs:fp32shader},DEFAULT_HIGHLIGHT_COLOR=[0,1,1,1],vs$e=`uniform pickingUniforms {
float isActive;
float isAttribute;
float isHighlightActive;
float useFloatColors;
vec3 highlightedObjectColor;
vec4 highlightColor;
} picking;
out vec4 picking_vRGBcolor_Avalid;
vec3 picking_normalizeColor(vec3 color) {
return picking.useFloatColors > 0.5 ? color : color / 255.0;
}
vec4 picking_normalizeColor(vec4 color) {
return picking.useFloatColors > 0.5 ? color : color / 255.0;
}
bool picking_isColorZero(vec3 color) {
return dot(color, vec3(1.0)) < 0.00001;
}
bool picking_isColorValid(vec3 color) {
return dot(color, vec3(1.0)) > 0.00001;
}
bool isVertexHighlighted(vec3 vertexColor) {
vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);
return
bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));
}
void picking_setPickingColor(vec3 pickingColor) {
pickingColor = picking_normalizeColor(pickingColor);
if (bool(picking.isActive)) {
picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));
if (!bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rgb = pickingColor;
}
} else {
picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));
}
}
void picking_setPickingAttribute(float value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.r = value;
}
}
void picking_setPickingAttribute(vec2 value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rg = value;
}
}
void picking_setPickingAttribute(vec3 value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rgb = value;
}
}
`,fs$g=`uniform pickingUniforms {
float isActive;
float isAttribute;
float isHighlightActive;
float useFloatColors;
vec3 highlightedObjectColor;
vec4 highlightColor;
} picking;
in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
if (picking.isActive > 0.5) {
return color;
}
bool selected = bool(picking_vRGBcolor_Avalid.a);
if (selected) {
float highLightAlpha = picking.highlightColor.a;
float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
float highLightRatio = highLightAlpha / blendedAlpha;
vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);
return vec4(blendedRGB, blendedAlpha);
} else {
return color;
}
}
vec4 picking_filterPickingColor(vec4 color) {
if (bool(picking.isActive)) {
if (picking_vRGBcolor_Avalid.a == 0.0) {
discard;
}
return picking_vRGBcolor_Avalid;
}
return color;
}
vec4 picking_filterColor(vec4 color) {
vec4 highlightColor = picking_filterHighlightColor(color);
return picking_filterPickingColor(highlightColor);
}
`,picking$1={name:"picking",vs:vs$e,fs:fs$g,uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:DEFAULT_HIGHLIGHT_COLOR},getUniforms:getUniforms$4};function getUniforms$4(f={},s){const d={};if(f.highlightedObjectColor!==void 0)if(f.highlightedObjectColor===null)d.isHighlightActive=!1;else{d.isHighlightActive=!0;const _=f.highlightedObjectColor.slice(0,3);d.highlightedObjectColor=_}if(f.highlightColor){const _=Array.from(f.highlightColor,S=>S/255);Number.isFinite(_[3])||(_[3]=1),d.highlightColor=_}return f.isActive!==void 0&&(d.isActive=!!f.isActive,d.isAttribute=!!f.isAttribute),f.useFloatColors!==void 0&&(d.useFloatColors=!!f.useFloatColors),d}function fp64ify(f,s=[],d=0){const _=Math.fround(f),S=f-_;return s[d]=_,s[d+1]=S,s}function fp64LowPart$1(f){return f-Math.fround(f)}function fp64ifyMatrix4(f){const s=new Float32Array(32);for(let d=0;d<4;++d)for(let _=0;_<4;++_){const S=d*4+_;fp64ify(f[_*4+d],s,S*2)}return s}const fp64arithmeticShader=`uniform float ONE;
vec2 split(float a) {
const float SPLIT = 4097.0;
float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float a_hi = t * ONE - (t - a);
float a_lo = a * ONE - a_hi;
#else
float a_hi = t - (t - a);
float a_lo = a - a_hi;
#endif
return vec2(a_hi, a_lo);
}
vec2 split2(vec2 a) {
vec2 b = split(a.x);
b.y += a.y;
return b;
}
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float sum = (a + b) * ONE;
float err = b - (sum - a) * ONE;
#else
float sum = a + b;
float err = b - (sum - a);
#endif
return vec2(sum, err);
}
vec2 twoSum(float a, float b) {
float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float v = (s * ONE - a) * ONE;
float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);
#else
float v = s - a;
float err = (a - (s - v)) + (b - v);
#endif
return vec2(s, err);
}
vec2 twoSub(float a, float b) {
float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float v = (s * ONE - a) * ONE;
float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);
#else
float v = s - a;
float err = (a - (s - v)) - (b + v);
#endif
return vec2(s, err);
}
vec2 twoSqr(float a) {
float prod = a * a;
vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *
a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;
#else
float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
return vec2(prod, err);
}
vec2 twoProd(float a, float b) {
float prod = a * b;
vec2 a_fp64 = split(a);
vec2 b_fp64 = split(b);
float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
return vec2(prod, err);
}
vec2 sum_fp64(vec2 a, vec2 b) {
vec2 s, t;
s = twoSum(a.x, b.x);
t = twoSum(a.y, b.y);
s.y += t.x;
s = quickTwoSum(s.x, s.y);
s.y += t.y;
s = quickTwoSum(s.x, s.y);
return s;
}
vec2 sub_fp64(vec2 a, vec2 b) {
vec2 s, t;
s = twoSub(a.x, b.x);
t = twoSub(a.y, b.y);
s.y += t.x;
s = quickTwoSum(s.x, s.y);
s.y += t.y;
s = quickTwoSum(s.x, s.y);
return s;
}
vec2 mul_fp64(vec2 a, vec2 b) {
vec2 prod = twoProd(a.x, b.x);
prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
prod = split2(prod);
#endif
prod = quickTwoSum(prod.x, prod.y);
prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
prod = split2(prod);
#endif
prod = quickTwoSum(prod.x, prod.y);
return prod;
}
vec2 div_fp64(vec2 a, vec2 b) {
float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
vec2 yn = a * xn;
#endif
float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
vec2 prod = twoProd(xn, diff);
return sum_fp64(yn, prod);
}
vec2 sqrt_fp64(vec2 a) {
if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);
float x = 1.0 / sqrt(a.x);
float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
vec2 yn_sqr = twoSqr(yn) * ONE;
#else
vec2 yn_sqr = twoSqr(yn);
#endif
float diff = sub_fp64(a, yn_sqr).x;
vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
return sum_fp64(split(yn), prod);
#else
return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`,CONST_UNIFORMS={ONE:1};function getUniforms$3(){return CONST_UNIFORMS}const fp64arithmetic={name:"fp64-arithmetic",vs:fp64arithmeticShader,getUniforms:getUniforms$3,fp64ify,fp64LowPart:fp64LowPart$1,fp64ifyMatrix4},DEFAULT_CONFIG={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...DEFAULT_CONFIG}};const config=globalThis.mathgl.config;function formatValue(f,{precision:s=config.precision}={}){return f=round(f),`${parseFloat(f.toPrecision(s))}`}function isArray$3(f){return Array.isArray(f)||ArrayBuffer.isView(f)&&!(f instanceof DataView)}function clamp$3(f,s,d){return map$2(f,_=>Math.max(s,Math.min(d,_)))}function lerp$6(f,s,d){return isArray$3(f)?f.map((_,S)=>lerp$6(_,s[S],d)):d*s+(1-d)*f}function equals$2(f,s,d){const _=config.EPSILON;try{if(f===s)return!0;if(isArray$3(f)&&isArray$3(s)){if(f.length!==s.length)return!1;for(let S=0;S<f.length;++S)if(!equals$2(f[S],s[S]))return!1;return!0}return f&&f.equals?f.equals(s):s&&s.equals?s.equals(f):typeof f=="number"&&typeof s=="number"?Math.abs(f-s)<=config.EPSILON*Math.max(1,Math.abs(f),Math.abs(s)):!1}finally{config.EPSILON=_}}function round(f){return Math.round(f/config.EPSILON)*config.EPSILON}function duplicateArray(f){return f.clone?f.clone():new Array(f.length)}function map$2(f,s,d){if(isArray$3(f)){const _=f;d=d||duplicateArray(_);for(let S=0;S<d.length&&S<_.length;++S){const T=typeof f=="number"?f:f[S];d[S]=s(T,S,d)}return d}return s(f)}class MathArray extends Array{clone(){return new this.constructor().copy(this)}fromArray(s,d=0){for(let _=0;_<this.ELEMENTS;++_)this[_]=s[_+d];return this.check()}toArray(s=[],d=0){for(let _=0;_<this.ELEMENTS;++_)s[d+_]=this[_];return s}toObject(s){return s}from(s){return Array.isArray(s)?this.copy(s):this.fromObject(s)}to(s){return s===this?this:isArray$3(s)?this.toArray(s):this.toObject(s)}toTarget(s){return s?this.to(s):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(config)}formatString(s){let d="";for(let _=0;_<this.ELEMENTS;++_)d+=(_>0?", ":"")+formatValue(this[_],s);return`${s.printTypes?this.constructor.name:""}[${d}]`}equals(s){if(!s||this.length!==s.length)return!1;for(let d=0;d<this.ELEMENTS;++d)if(!equals$2(this[d],s[d]))return!1;return!0}exactEquals(s){if(!s||this.length!==s.length)return!1;for(let d=0;d<this.ELEMENTS;++d)if(this[d]!==s[d])return!1;return!0}negate(){for(let s=0;s<this.ELEMENTS;++s)this[s]=-this[s];return this.check()}lerp(s,d,_){if(_===void 0)return this.lerp(this,s,d);for(let S=0;S<this.ELEMENTS;++S){const T=s[S],F=typeof d=="number"?d:d[S];this[S]=T+_*(F-T)}return this.check()}min(s){for(let d=0;d<this.ELEMENTS;++d)this[d]=Math.min(s[d],this[d]);return this.check()}max(s){for(let d=0;d<this.ELEMENTS;++d)this[d]=Math.max(s[d],this[d]);return this.check()}clamp(s,d){for(let _=0;_<this.ELEMENTS;++_)this[_]=Math.min(Math.max(this[_],s[_]),d[_]);return this.check()}add(...s){for(const d of s)for(let _=0;_<this.ELEMENTS;++_)this[_]+=d[_];return this.check()}subtract(...s){for(const d of s)for(let _=0;_<this.ELEMENTS;++_)this[_]-=d[_];return this.check()}scale(s){if(typeof s=="number")for(let d=0;d<this.ELEMENTS;++d)this[d]*=s;else for(let d=0;d<this.ELEMENTS&&d<s.length;++d)this[d]*=s[d];return this.check()}multiplyByScalar(s){for(let d=0;d<this.ELEMENTS;++d)this[d]*=s;return this.check()}check(){if(config.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let s=this.length===this.ELEMENTS;for(let d=0;d<this.ELEMENTS;++d)s=s&&Number.isFinite(this[d]);return s}sub(s){return this.subtract(s)}setScalar(s){for(let d=0;d<this.ELEMENTS;++d)this[d]=s;return this.check()}addScalar(s){for(let d=0;d<this.ELEMENTS;++d)this[d]+=s;return this.check()}subScalar(s){return this.addScalar(-s)}multiplyScalar(s){for(let d=0;d<this.ELEMENTS;++d)this[d]*=s;return this.check()}divideScalar(s){return this.multiplyByScalar(1/s)}clampScalar(s,d){for(let _=0;_<this.ELEMENTS;++_)this[_]=Math.min(Math.max(this[_],s),d);return this.check()}get elements(){return this}}function validateVector(f,s){if(f.length!==s)return!1;for(let d=0;d<f.length;++d)if(!Number.isFinite(f[d]))return!1;return!0}function checkNumber(f){if(!Number.isFinite(f))throw new Error(`Invalid number ${JSON.stringify(f)}`);return f}function checkVector(f,s,d=""){if(config.debug&&!validateVector(f,s))throw new Error(`math.gl: ${d} some fields set to invalid numbers'`);return f}function assert$4(f,s){if(!f)throw new Error(`math.gl assertion ${s}`)}class Vector extends MathArray{get x(){return this[0]}set x(s){this[0]=checkNumber(s)}get y(){return this[1]}set y(s){this[1]=checkNumber(s)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let s=0;for(let d=0;d<this.ELEMENTS;++d)s+=this[d]*this[d];return s}magnitudeSquared(){return this.lengthSquared()}distance(s){return Math.sqrt(this.distanceSquared(s))}distanceSquared(s){let d=0;for(let _=0;_<this.ELEMENTS;++_){const S=this[_]-s[_];d+=S*S}return checkNumber(d)}dot(s){let d=0;for(let _=0;_<this.ELEMENTS;++_)d+=this[_]*s[_];return checkNumber(d)}normalize(){const s=this.magnitude();if(s!==0)for(let d=0;d<this.ELEMENTS;++d)this[d]/=s;return this.check()}multiply(...s){for(const d of s)for(let _=0;_<this.ELEMENTS;++_)this[_]*=d[_];return this.check()}divide(...s){for(const d of s)for(let _=0;_<this.ELEMENTS;++_)this[_]/=d[_];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(s){return this.distance(s)}distanceToSquared(s){return this.distanceSquared(s)}getComponent(s){return assert$4(s>=0&&s<this.ELEMENTS,"index is out of range"),checkNumber(this[s])}setComponent(s,d){return assert$4(s>=0&&s<this.ELEMENTS,"index is out of range"),this[s]=d,this.check()}addVectors(s,d){return this.copy(s).add(d)}subVectors(s,d){return this.copy(s).subtract(d)}multiplyVectors(s,d){return this.copy(s).multiply(d)}addScaledVector(s,d){return this.add(new this.constructor(s).multiplyScalar(d))}}const EPSILON$2=1e-6;let ARRAY_TYPE$1=typeof Float32Array<"u"?Float32Array:Array;function create$9(){const f=new ARRAY_TYPE$1(2);return ARRAY_TYPE$1!=Float32Array&&(f[0]=0,f[1]=0),f}function add$7(f,s,d){return f[0]=s[0]+d[0],f[1]=s[1]+d[1],f}function negate$3(f,s){return f[0]=-s[0],f[1]=-s[1],f}function lerp$5(f,s,d,_){const S=s[0],T=s[1];return f[0]=S+_*(d[0]-S),f[1]=T+_*(d[1]-T),f}function transformMat3$1(f,s,d){const _=s[0],S=s[1];return f[0]=d[0]*_+d[3]*S+d[6],f[1]=d[1]*_+d[4]*S+d[7],f}function transformMat4$3(f,s,d){const _=s[0],S=s[1];return f[0]=d[0]*_+d[4]*S+d[12],f[1]=d[1]*_+d[5]*S+d[13],f}(function(){const f=create$9();return function(s,d,_,S,T,F){let M,P;for(d||(d=2),_||(_=0),S?P=Math.min(S*d+_,s.length):P=s.length,M=_;M<P;M+=d)f[0]=s[M],f[1]=s[M+1],T(f,f,F),s[M]=f[0],s[M+1]=f[1];return s}})();function vec2_transformMat4AsVector(f,s,d){const _=s[0],S=s[1],T=d[3]*_+d[7]*S||1;return f[0]=(d[0]*_+d[4]*S)/T,f[1]=(d[1]*_+d[5]*S)/T,f}function vec3_transformMat4AsVector(f,s,d){const _=s[0],S=s[1],T=s[2],F=d[3]*_+d[7]*S+d[11]*T||1;return f[0]=(d[0]*_+d[4]*S+d[8]*T)/F,f[1]=(d[1]*_+d[5]*S+d[9]*T)/F,f[2]=(d[2]*_+d[6]*S+d[10]*T)/F,f}function vec3_transformMat2(f,s,d){const _=s[0],S=s[1];return f[0]=d[0]*_+d[2]*S,f[1]=d[1]*_+d[3]*S,f[2]=s[2],f}function vec4_transformMat2(f,s,d){const _=s[0],S=s[1];return f[0]=d[0]*_+d[2]*S,f[1]=d[1]*_+d[3]*S,f[2]=s[2],f[3]=s[3],f}function vec4_transformMat3(f,s,d){const _=s[0],S=s[1],T=s[2];return f[0]=d[0]*_+d[3]*S+d[6]*T,f[1]=d[1]*_+d[4]*S+d[7]*T,f[2]=d[2]*_+d[5]*S+d[8]*T,f[3]=s[3],f}function create$8(){const f=new ARRAY_TYPE$1(3);return ARRAY_TYPE$1!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function length$3(f){const s=f[0],d=f[1],_=f[2];return Math.sqrt(s*s+d*d+_*_)}function fromValues(f,s,d){const _=new ARRAY_TYPE$1(3);return _[0]=f,_[1]=s,_[2]=d,_}function subtract(f,s,d){return f[0]=s[0]-d[0],f[1]=s[1]-d[1],f[2]=s[2]-d[2],f}function squaredLength$2(f){const s=f[0],d=f[1],_=f[2];return s*s+d*d+_*_}function negate$2(f,s){return f[0]=-s[0],f[1]=-s[1],f[2]=-s[2],f}function normalize$5(f,s){const d=s[0],_=s[1],S=s[2];let T=d*d+_*_+S*S;return T>0&&(T=1/Math.sqrt(T)),f[0]=s[0]*T,f[1]=s[1]*T,f[2]=s[2]*T,f}function dot$3(f,s){return f[0]*s[0]+f[1]*s[1]+f[2]*s[2]}function cross(f,s,d){const _=s[0],S=s[1],T=s[2],F=d[0],M=d[1],P=d[2];return f[0]=S*P-T*M,f[1]=T*F-_*P,f[2]=_*M-S*F,f}function lerp$4(f,s,d,_){const S=s[0],T=s[1],F=s[2];return f[0]=S+_*(d[0]-S),f[1]=T+_*(d[1]-T),f[2]=F+_*(d[2]-F),f}function transformMat4$2(f,s,d){const _=s[0],S=s[1],T=s[2];let F=d[3]*_+d[7]*S+d[11]*T+d[15];return F=F||1,f[0]=(d[0]*_+d[4]*S+d[8]*T+d[12])/F,f[1]=(d[1]*_+d[5]*S+d[9]*T+d[13])/F,f[2]=(d[2]*_+d[6]*S+d[10]*T+d[14])/F,f}function transformMat3(f,s,d){const _=s[0],S=s[1],T=s[2];return f[0]=_*d[0]+S*d[3]+T*d[6],f[1]=_*d[1]+S*d[4]+T*d[7],f[2]=_*d[2]+S*d[5]+T*d[8],f}function transformQuat$1(f,s,d){const _=d[0],S=d[1],T=d[2],F=d[3],M=s[0],P=s[1],H=s[2];let J=S*H-T*P,K=T*M-_*H,z=_*P-S*M,oe=S*z-T*K,se=T*J-_*z,ae=_*K-S*J;const ge=F*2;return J*=ge,K*=ge,z*=ge,oe*=2,se*=2,ae*=2,f[0]=M+J+oe,f[1]=P+K+se,f[2]=H+z+ae,f}function rotateX$3(f,s,d,_){const S=[],T=[];return S[0]=s[0]-d[0],S[1]=s[1]-d[1],S[2]=s[2]-d[2],T[0]=S[0],T[1]=S[1]*Math.cos(_)-S[2]*Math.sin(_),T[2]=S[1]*Math.sin(_)+S[2]*Math.cos(_),f[0]=T[0]+d[0],f[1]=T[1]+d[1],f[2]=T[2]+d[2],f}function rotateY$2(f,s,d,_){const S=[],T=[];return S[0]=s[0]-d[0],S[1]=s[1]-d[1],S[2]=s[2]-d[2],T[0]=S[2]*Math.sin(_)+S[0]*Math.cos(_),T[1]=S[1],T[2]=S[2]*Math.cos(_)-S[0]*Math.sin(_),f[0]=T[0]+d[0],f[1]=T[1]+d[1],f[2]=T[2]+d[2],f}function rotateZ$3(f,s,d,_){const S=[],T=[];return S[0]=s[0]-d[0],S[1]=s[1]-d[1],S[2]=s[2]-d[2],T[0]=S[0]*Math.cos(_)-S[1]*Math.sin(_),T[1]=S[0]*Math.sin(_)+S[1]*Math.cos(_),T[2]=S[2],f[0]=T[0]+d[0],f[1]=T[1]+d[1],f[2]=T[2]+d[2],f}function angle(f,s){const d=f[0],_=f[1],S=f[2],T=s[0],F=s[1],M=s[2],P=Math.sqrt((d*d+_*_+S*S)*(T*T+F*F+M*M)),H=P&&dot$3(f,s)/P;return Math.acos(Math.min(Math.max(H,-1),1))}const sub=subtract,len=length$3,sqrLen=squaredLength$2;(function(){const f=create$8();return function(s,d,_,S,T,F){let M,P;for(d||(d=3),_||(_=0),S?P=Math.min(S*d+_,s.length):P=s.length,M=_;M<P;M+=d)f[0]=s[M],f[1]=s[M+1],f[2]=s[M+2],T(f,f,F),s[M]=f[0],s[M+1]=f[1],s[M+2]=f[2];return s}})();const ORIGIN=[0,0,0];let ZERO$2;class Vector3 extends Vector{static get ZERO(){return ZERO$2||(ZERO$2=new Vector3(0,0,0),Object.freeze(ZERO$2)),ZERO$2}constructor(s=0,d=0,_=0){super(-0,-0,-0),arguments.length===1&&isArray$3(s)?this.copy(s):(config.debug&&(checkNumber(s),checkNumber(d),checkNumber(_)),this[0]=s,this[1]=d,this[2]=_)}set(s,d,_){return this[0]=s,this[1]=d,this[2]=_,this.check()}copy(s){return this[0]=s[0],this[1]=s[1],this[2]=s[2],this.check()}fromObject(s){return config.debug&&(checkNumber(s.x),checkNumber(s.y),checkNumber(s.z)),this[0]=s.x,this[1]=s.y,this[2]=s.z,this.check()}toObject(s){return s.x=this[0],s.y=this[1],s.z=this[2],s}get ELEMENTS(){return 3}get z(){return this[2]}set z(s){this[2]=checkNumber(s)}angle(s){return angle(this,s)}cross(s){return cross(this,this,s),this.check()}rotateX({radians:s,origin:d=ORIGIN}){return rotateX$3(this,this,d,s),this.check()}rotateY({radians:s,origin:d=ORIGIN}){return rotateY$2(this,this,d,s),this.check()}rotateZ({radians:s,origin:d=ORIGIN}){return rotateZ$3(this,this,d,s),this.check()}transform(s){return this.transformAsPoint(s)}transformAsPoint(s){return transformMat4$2(this,this,s),this.check()}transformAsVector(s){return vec3_transformMat4AsVector(this,this,s),this.check()}transformByMatrix3(s){return transformMat3(this,this,s),this.check()}transformByMatrix2(s){return vec3_transformMat2(this,this,s),this.check()}transformByQuaternion(s){return transformQuat$1(this,this,s),this.check()}}let ZERO$1;class Vector4 extends Vector{static get ZERO(){return ZERO$1||(ZERO$1=new Vector4(0,0,0,0),Object.freeze(ZERO$1)),ZERO$1}constructor(s=0,d=0,_=0,S=0){super(-0,-0,-0,-0),isArray$3(s)&&arguments.length===1?this.copy(s):(config.debug&&(checkNumber(s),checkNumber(d),checkNumber(_),checkNumber(S)),this[0]=s,this[1]=d,this[2]=_,this[3]=S)}set(s,d,_,S){return this[0]=s,this[1]=d,this[2]=_,this[3]=S,this.check()}copy(s){return this[0]=s[0],this[1]=s[1],this[2]=s[2],this[3]=s[3],this.check()}fromObject(s){return config.debug&&(checkNumber(s.x),checkNumber(s.y),checkNumber(s.z),checkNumber(s.w)),this[0]=s.x,this[1]=s.y,this[2]=s.z,this[3]=s.w,this}toObject(s){return s.x=this[0],s.y=this[1],s.z=this[2],s.w=this[3],s}get ELEMENTS(){return 4}get z(){return this[2]}set z(s){this[2]=checkNumber(s)}get w(){return this[3]}set w(s){this[3]=checkNumber(s)}transform(s){return transformMat4$2(this,this,s),this.check()}transformByMatrix3(s){return vec4_transformMat3(this,this,s),this.check()}transformByMatrix2(s){return vec4_transformMat2(this,this,s),this.check()}transformByQuaternion(s){return transformQuat$1(this,this,s),this.check()}applyMatrix4(s){return s.transform(this,this),this}}class Matrix extends MathArray{toString(){let s="[";if(config.printRowMajor){s+="row-major:";for(let d=0;d<this.RANK;++d)for(let _=0;_<this.RANK;++_)s+=` ${this[_*this.RANK+d]}`}else{s+="column-major:";for(let d=0;d<this.ELEMENTS;++d)s+=` ${this[d]}`}return s+="]",s}getElementIndex(s,d){return d*this.RANK+s}getElement(s,d){return this[d*this.RANK+s]}setElement(s,d,_){return this[d*this.RANK+s]=checkNumber(_),this}getColumn(s,d=new Array(this.RANK).fill(-0)){const _=s*this.RANK;for(let S=0;S<this.RANK;++S)d[S]=this[_+S];return d}setColumn(s,d){const _=s*this.RANK;for(let S=0;S<this.RANK;++S)this[_+S]=d[S];return this}}function create$7(){const f=new ARRAY_TYPE$1(9);return ARRAY_TYPE$1!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function transpose$1(f,s){if(f===s){const d=s[1],_=s[2],S=s[5];f[1]=s[3],f[2]=s[6],f[3]=d,f[5]=s[7],f[6]=_,f[7]=S}else f[0]=s[0],f[1]=s[3],f[2]=s[6],f[3]=s[1],f[4]=s[4],f[5]=s[7],f[6]=s[2],f[7]=s[5],f[8]=s[8];return f}function invert$3(f,s){const d=s[0],_=s[1],S=s[2],T=s[3],F=s[4],M=s[5],P=s[6],H=s[7],J=s[8],K=J*F-M*H,z=-J*T+M*P,oe=H*T-F*P;let se=d*K+_*z+S*oe;return se?(se=1/se,f[0]=K*se,f[1]=(-J*_+S*H)*se,f[2]=(M*_-S*F)*se,f[3]=z*se,f[4]=(J*d-S*P)*se,f[5]=(-M*d+S*T)*se,f[6]=oe*se,f[7]=(-H*d+_*P)*se,f[8]=(F*d-_*T)*se,f):null}function determinant$1(f){const s=f[0],d=f[1],_=f[2],S=f[3],T=f[4],F=f[5],M=f[6],P=f[7],H=f[8];return s*(H*T-F*P)+d*(-H*S+F*M)+_*(P*S-T*M)}function multiply$4(f,s,d){const _=s[0],S=s[1],T=s[2],F=s[3],M=s[4],P=s[5],H=s[6],J=s[7],K=s[8],z=d[0],oe=d[1],se=d[2],ae=d[3],ge=d[4],pe=d[5],he=d[6],ve=d[7],be=d[8];return f[0]=z*_+oe*F+se*H,f[1]=z*S+oe*M+se*J,f[2]=z*T+oe*P+se*K,f[3]=ae*_+ge*F+pe*H,f[4]=ae*S+ge*M+pe*J,f[5]=ae*T+ge*P+pe*K,f[6]=he*_+ve*F+be*H,f[7]=he*S+ve*M+be*J,f[8]=he*T+ve*P+be*K,f}function translate$3(f,s,d){const _=s[0],S=s[1],T=s[2],F=s[3],M=s[4],P=s[5],H=s[6],J=s[7],K=s[8],z=d[0],oe=d[1];return f[0]=_,f[1]=S,f[2]=T,f[3]=F,f[4]=M,f[5]=P,f[6]=z*_+oe*F+H,f[7]=z*S+oe*M+J,f[8]=z*T+oe*P+K,f}function rotate$1(f,s,d){const _=s[0],S=s[1],T=s[2],F=s[3],M=s[4],P=s[5],H=s[6],J=s[7],K=s[8],z=Math.sin(d),oe=Math.cos(d);return f[0]=oe*_+z*F,f[1]=oe*S+z*M,f[2]=oe*T+z*P,f[3]=oe*F-z*_,f[4]=oe*M-z*S,f[5]=oe*P-z*T,f[6]=H,f[7]=J,f[8]=K,f}function scale$6(f,s,d){const _=d[0],S=d[1];return f[0]=_*s[0],f[1]=_*s[1],f[2]=_*s[2],f[3]=S*s[3],f[4]=S*s[4],f[5]=S*s[5],f[6]=s[6],f[7]=s[7],f[8]=s[8],f}function fromQuat$1(f,s){const d=s[0],_=s[1],S=s[2],T=s[3],F=d+d,M=_+_,P=S+S,H=d*F,J=_*F,K=_*M,z=S*F,oe=S*M,se=S*P,ae=T*F,ge=T*M,pe=T*P;return f[0]=1-K-se,f[3]=J-pe,f[6]=z+ge,f[1]=J+pe,f[4]=1-H-se,f[7]=oe-ae,f[2]=z-ge,f[5]=oe+ae,f[8]=1-H-K,f}var INDICES$1;(function(f){f[f.COL0ROW0=0]="COL0ROW0",f[f.COL0ROW1=1]="COL0ROW1",f[f.COL0ROW2=2]="COL0ROW2",f[f.COL1ROW0=3]="COL1ROW0",f[f.COL1ROW1=4]="COL1ROW1",f[f.COL1ROW2=5]="COL1ROW2",f[f.COL2ROW0=6]="COL2ROW0",f[f.COL2ROW1=7]="COL2ROW1",f[f.COL2ROW2=8]="COL2ROW2"})(INDICES$1||(INDICES$1={}));const IDENTITY_MATRIX$2=Object.freeze([1,0,0,0,1,0,0,0,1]);class Matrix3 extends Matrix{static get IDENTITY(){return getIdentityMatrix$1()}static get ZERO(){return getZeroMatrix$1()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return INDICES$1}constructor(s,...d){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(s)?this.copy(s):d.length>0?this.copy([s,...d]):this.identity()}copy(s){return this[0]=s[0],this[1]=s[1],this[2]=s[2],this[3]=s[3],this[4]=s[4],this[5]=s[5],this[6]=s[6],this[7]=s[7],this[8]=s[8],this.check()}identity(){return this.copy(IDENTITY_MATRIX$2)}fromObject(s){return this.check()}fromQuaternion(s){return fromQuat$1(this,s),this.check()}set(s,d,_,S,T,F,M,P,H){return this[0]=s,this[1]=d,this[2]=_,this[3]=S,this[4]=T,this[5]=F,this[6]=M,this[7]=P,this[8]=H,this.check()}setRowMajor(s,d,_,S,T,F,M,P,H){return this[0]=s,this[1]=S,this[2]=M,this[3]=d,this[4]=T,this[5]=P,this[6]=_,this[7]=F,this[8]=H,this.check()}determinant(){return determinant$1(this)}transpose(){return transpose$1(this,this),this.check()}invert(){return invert$3(this,this),this.check()}multiplyLeft(s){return multiply$4(this,s,this),this.check()}multiplyRight(s){return multiply$4(this,this,s),this.check()}rotate(s){return rotate$1(this,this,s),this.check()}scale(s){return Array.isArray(s)?scale$6(this,this,s):scale$6(this,this,[s,s]),this.check()}translate(s){return translate$3(this,this,s),this.check()}transform(s,d){let _;switch(s.length){case 2:_=transformMat3$1(d||[-0,-0],s,this);break;case 3:_=transformMat3(d||[-0,-0,-0],s,this);break;case 4:_=vec4_transformMat3(d||[-0,-0,-0,-0],s,this);break;default:throw new Error("Illegal vector")}return checkVector(_,s.length),_}transformVector(s,d){return this.transform(s,d)}transformVector2(s,d){return this.transform(s,d)}transformVector3(s,d){return this.transform(s,d)}}let ZERO_MATRIX3,IDENTITY_MATRIX3=null;function getZeroMatrix$1(){return ZERO_MATRIX3||(ZERO_MATRIX3=new Matrix3([0,0,0,0,0,0,0,0,0]),Object.freeze(ZERO_MATRIX3)),ZERO_MATRIX3}function getIdentityMatrix$1(){return IDENTITY_MATRIX3||(IDENTITY_MATRIX3=new Matrix3,Object.freeze(IDENTITY_MATRIX3)),IDENTITY_MATRIX3}function identity$9(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function transpose(f,s){if(f===s){const d=s[1],_=s[2],S=s[3],T=s[6],F=s[7],M=s[11];f[1]=s[4],f[2]=s[8],f[3]=s[12],f[4]=d,f[6]=s[9],f[7]=s[13],f[8]=_,f[9]=T,f[11]=s[14],f[12]=S,f[13]=F,f[14]=M}else f[0]=s[0],f[1]=s[4],f[2]=s[8],f[3]=s[12],f[4]=s[1],f[5]=s[5],f[6]=s[9],f[7]=s[13],f[8]=s[2],f[9]=s[6],f[10]=s[10],f[11]=s[14],f[12]=s[3],f[13]=s[7],f[14]=s[11],f[15]=s[15];return f}function invert$2(f,s){const d=s[0],_=s[1],S=s[2],T=s[3],F=s[4],M=s[5],P=s[6],H=s[7],J=s[8],K=s[9],z=s[10],oe=s[11],se=s[12],ae=s[13],ge=s[14],pe=s[15],he=d*M-_*F,ve=d*P-S*F,be=d*H-T*F,Re=_*P-S*M,Fe=_*H-T*M,ye=S*H-T*P,Ue=J*ae-K*se,It=J*ge-z*se,St=J*pe-oe*se,At=K*ge-z*ae,xt=K*pe-oe*ae,Ct=z*pe-oe*ge;let Nt=he*Ct-ve*xt+be*At+Re*St-Fe*It+ye*Ue;return Nt?(Nt=1/Nt,f[0]=(M*Ct-P*xt+H*At)*Nt,f[1]=(S*xt-_*Ct-T*At)*Nt,f[2]=(ae*ye-ge*Fe+pe*Re)*Nt,f[3]=(z*Fe-K*ye-oe*Re)*Nt,f[4]=(P*St-F*Ct-H*It)*Nt,f[5]=(d*Ct-S*St+T*It)*Nt,f[6]=(ge*be-se*ye-pe*ve)*Nt,f[7]=(J*ye-z*be+oe*ve)*Nt,f[8]=(F*xt-M*St+H*Ue)*Nt,f[9]=(_*St-d*xt-T*Ue)*Nt,f[10]=(se*Fe-ae*be+pe*he)*Nt,f[11]=(K*be-J*Fe-oe*he)*Nt,f[12]=(M*It-F*At-P*Ue)*Nt,f[13]=(d*At-_*It+S*Ue)*Nt,f[14]=(ae*ve-se*Re-ge*he)*Nt,f[15]=(J*Re-K*ve+z*he)*Nt,f):null}function determinant(f){const s=f[0],d=f[1],_=f[2],S=f[3],T=f[4],F=f[5],M=f[6],P=f[7],H=f[8],J=f[9],K=f[10],z=f[11],oe=f[12],se=f[13],ae=f[14],ge=f[15],pe=s*F-d*T,he=s*M-_*T,ve=d*M-_*F,be=H*se-J*oe,Re=H*ae-K*oe,Fe=J*ae-K*se,ye=s*Fe-d*Re+_*be,Ue=T*Fe-F*Re+M*be,It=H*ve-J*he+K*pe,St=oe*ve-se*he+ae*pe;return P*ye-S*Ue+ge*It-z*St}function multiply$3(f,s,d){const _=s[0],S=s[1],T=s[2],F=s[3],M=s[4],P=s[5],H=s[6],J=s[7],K=s[8],z=s[9],oe=s[10],se=s[11],ae=s[12],ge=s[13],pe=s[14],he=s[15];let ve=d[0],be=d[1],Re=d[2],Fe=d[3];return f[0]=ve*_+be*M+Re*K+Fe*ae,f[1]=ve*S+be*P+Re*z+Fe*ge,f[2]=ve*T+be*H+Re*oe+Fe*pe,f[3]=ve*F+be*J+Re*se+Fe*he,ve=d[4],be=d[5],Re=d[6],Fe=d[7],f[4]=ve*_+be*M+Re*K+Fe*ae,f[5]=ve*S+be*P+Re*z+Fe*ge,f[6]=ve*T+be*H+Re*oe+Fe*pe,f[7]=ve*F+be*J+Re*se+Fe*he,ve=d[8],be=d[9],Re=d[10],Fe=d[11],f[8]=ve*_+be*M+Re*K+Fe*ae,f[9]=ve*S+be*P+Re*z+Fe*ge,f[10]=ve*T+be*H+Re*oe+Fe*pe,f[11]=ve*F+be*J+Re*se+Fe*he,ve=d[12],be=d[13],Re=d[14],Fe=d[15],f[12]=ve*_+be*M+Re*K+Fe*ae,f[13]=ve*S+be*P+Re*z+Fe*ge,f[14]=ve*T+be*H+Re*oe+Fe*pe,f[15]=ve*F+be*J+Re*se+Fe*he,f}function translate$2(f,s,d){const _=d[0],S=d[1],T=d[2];let F,M,P,H,J,K,z,oe,se,ae,ge,pe;return s===f?(f[12]=s[0]*_+s[4]*S+s[8]*T+s[12],f[13]=s[1]*_+s[5]*S+s[9]*T+s[13],f[14]=s[2]*_+s[6]*S+s[10]*T+s[14],f[15]=s[3]*_+s[7]*S+s[11]*T+s[15]):(F=s[0],M=s[1],P=s[2],H=s[3],J=s[4],K=s[5],z=s[6],oe=s[7],se=s[8],ae=s[9],ge=s[10],pe=s[11],f[0]=F,f[1]=M,f[2]=P,f[3]=H,f[4]=J,f[5]=K,f[6]=z,f[7]=oe,f[8]=se,f[9]=ae,f[10]=ge,f[11]=pe,f[12]=F*_+J*S+se*T+s[12],f[13]=M*_+K*S+ae*T+s[13],f[14]=P*_+z*S+ge*T+s[14],f[15]=H*_+oe*S+pe*T+s[15]),f}function scale$5(f,s,d){const _=d[0],S=d[1],T=d[2];return f[0]=s[0]*_,f[1]=s[1]*_,f[2]=s[2]*_,f[3]=s[3]*_,f[4]=s[4]*S,f[5]=s[5]*S,f[6]=s[6]*S,f[7]=s[7]*S,f[8]=s[8]*T,f[9]=s[9]*T,f[10]=s[10]*T,f[11]=s[11]*T,f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15],f}function rotate(f,s,d,_){let S=_[0],T=_[1],F=_[2],M=Math.sqrt(S*S+T*T+F*F),P,H,J,K,z,oe,se,ae,ge,pe,he,ve,be,Re,Fe,ye,Ue,It,St,At,xt,Ct,Nt,qt;return M<EPSILON$2?null:(M=1/M,S*=M,T*=M,F*=M,H=Math.sin(d),P=Math.cos(d),J=1-P,K=s[0],z=s[1],oe=s[2],se=s[3],ae=s[4],ge=s[5],pe=s[6],he=s[7],ve=s[8],be=s[9],Re=s[10],Fe=s[11],ye=S*S*J+P,Ue=T*S*J+F*H,It=F*S*J-T*H,St=S*T*J-F*H,At=T*T*J+P,xt=F*T*J+S*H,Ct=S*F*J+T*H,Nt=T*F*J-S*H,qt=F*F*J+P,f[0]=K*ye+ae*Ue+ve*It,f[1]=z*ye+ge*Ue+be*It,f[2]=oe*ye+pe*Ue+Re*It,f[3]=se*ye+he*Ue+Fe*It,f[4]=K*St+ae*At+ve*xt,f[5]=z*St+ge*At+be*xt,f[6]=oe*St+pe*At+Re*xt,f[7]=se*St+he*At+Fe*xt,f[8]=K*Ct+ae*Nt+ve*qt,f[9]=z*Ct+ge*Nt+be*qt,f[10]=oe*Ct+pe*Nt+Re*qt,f[11]=se*Ct+he*Nt+Fe*qt,s!==f&&(f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15]),f)}function rotateX$2(f,s,d){const _=Math.sin(d),S=Math.cos(d),T=s[4],F=s[5],M=s[6],P=s[7],H=s[8],J=s[9],K=s[10],z=s[11];return s!==f&&(f[0]=s[0],f[1]=s[1],f[2]=s[2],f[3]=s[3],f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15]),f[4]=T*S+H*_,f[5]=F*S+J*_,f[6]=M*S+K*_,f[7]=P*S+z*_,f[8]=H*S-T*_,f[9]=J*S-F*_,f[10]=K*S-M*_,f[11]=z*S-P*_,f}function rotateY$1(f,s,d){const _=Math.sin(d),S=Math.cos(d),T=s[0],F=s[1],M=s[2],P=s[3],H=s[8],J=s[9],K=s[10],z=s[11];return s!==f&&(f[4]=s[4],f[5]=s[5],f[6]=s[6],f[7]=s[7],f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15]),f[0]=T*S-H*_,f[1]=F*S-J*_,f[2]=M*S-K*_,f[3]=P*S-z*_,f[8]=T*_+H*S,f[9]=F*_+J*S,f[10]=M*_+K*S,f[11]=P*_+z*S,f}function rotateZ$2(f,s,d){const _=Math.sin(d),S=Math.cos(d),T=s[0],F=s[1],M=s[2],P=s[3],H=s[4],J=s[5],K=s[6],z=s[7];return s!==f&&(f[8]=s[8],f[9]=s[9],f[10]=s[10],f[11]=s[11],f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15]),f[0]=T*S+H*_,f[1]=F*S+J*_,f[2]=M*S+K*_,f[3]=P*S+z*_,f[4]=H*S-T*_,f[5]=J*S-F*_,f[6]=K*S-M*_,f[7]=z*S-P*_,f}function getScaling(f,s){const d=s[0],_=s[1],S=s[2],T=s[4],F=s[5],M=s[6],P=s[8],H=s[9],J=s[10];return f[0]=Math.sqrt(d*d+_*_+S*S),f[1]=Math.sqrt(T*T+F*F+M*M),f[2]=Math.sqrt(P*P+H*H+J*J),f}function fromQuat(f,s){const d=s[0],_=s[1],S=s[2],T=s[3],F=d+d,M=_+_,P=S+S,H=d*F,J=_*F,K=_*M,z=S*F,oe=S*M,se=S*P,ae=T*F,ge=T*M,pe=T*P;return f[0]=1-K-se,f[1]=J+pe,f[2]=z-ge,f[3]=0,f[4]=J-pe,f[5]=1-H-se,f[6]=oe+ae,f[7]=0,f[8]=z+ge,f[9]=oe-ae,f[10]=1-H-K,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function frustum(f,s,d,_,S,T,F){const M=1/(d-s),P=1/(S-_),H=1/(T-F);return f[0]=T*2*M,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=T*2*P,f[6]=0,f[7]=0,f[8]=(d+s)*M,f[9]=(S+_)*P,f[10]=(F+T)*H,f[11]=-1,f[12]=0,f[13]=0,f[14]=F*T*2*H,f[15]=0,f}function perspectiveNO$1(f,s,d,_,S){const T=1/Math.tan(s/2);if(f[0]=T/d,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=T,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,S!=null&&S!==1/0){const F=1/(_-S);f[10]=(S+_)*F,f[14]=2*S*_*F}else f[10]=-1,f[14]=-2*_;return f}const perspective$1=perspectiveNO$1;function orthoNO(f,s,d,_,S,T,F){const M=1/(s-d),P=1/(_-S),H=1/(T-F);return f[0]=-2*M,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*P,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*H,f[11]=0,f[12]=(s+d)*M,f[13]=(S+_)*P,f[14]=(F+T)*H,f[15]=1,f}const ortho=orthoNO;function lookAt$1(f,s,d,_){let S,T,F,M,P,H,J,K,z,oe;const se=s[0],ae=s[1],ge=s[2],pe=_[0],he=_[1],ve=_[2],be=d[0],Re=d[1],Fe=d[2];return Math.abs(se-be)<EPSILON$2&&Math.abs(ae-Re)<EPSILON$2&&Math.abs(ge-Fe)<EPSILON$2?identity$9(f):(K=se-be,z=ae-Re,oe=ge-Fe,S=1/Math.sqrt(K*K+z*z+oe*oe),K*=S,z*=S,oe*=S,T=he*oe-ve*z,F=ve*K-pe*oe,M=pe*z-he*K,S=Math.sqrt(T*T+F*F+M*M),S?(S=1/S,T*=S,F*=S,M*=S):(T=0,F=0,M=0),P=z*M-oe*F,H=oe*T-K*M,J=K*F-z*T,S=Math.sqrt(P*P+H*H+J*J),S?(S=1/S,P*=S,H*=S,J*=S):(P=0,H=0,J=0),f[0]=T,f[1]=P,f[2]=K,f[3]=0,f[4]=F,f[5]=H,f[6]=z,f[7]=0,f[8]=M,f[9]=J,f[10]=oe,f[11]=0,f[12]=-(T*se+F*ae+M*ge),f[13]=-(P*se+H*ae+J*ge),f[14]=-(K*se+z*ae+oe*ge),f[15]=1,f)}function create$6(){const f=new ARRAY_TYPE$1(4);return ARRAY_TYPE$1!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0,f[3]=0),f}function add$6(f,s,d){return f[0]=s[0]+d[0],f[1]=s[1]+d[1],f[2]=s[2]+d[2],f[3]=s[3]+d[3],f}function scale$4(f,s,d){return f[0]=s[0]*d,f[1]=s[1]*d,f[2]=s[2]*d,f[3]=s[3]*d,f}function length$2(f){const s=f[0],d=f[1],_=f[2],S=f[3];return Math.sqrt(s*s+d*d+_*_+S*S)}function squaredLength$1(f){const s=f[0],d=f[1],_=f[2],S=f[3];return s*s+d*d+_*_+S*S}function normalize$4(f,s){const d=s[0],_=s[1],S=s[2],T=s[3];let F=d*d+_*_+S*S+T*T;return F>0&&(F=1/Math.sqrt(F)),f[0]=d*F,f[1]=_*F,f[2]=S*F,f[3]=T*F,f}function dot$2(f,s){return f[0]*s[0]+f[1]*s[1]+f[2]*s[2]+f[3]*s[3]}function lerp$3(f,s,d,_){const S=s[0],T=s[1],F=s[2],M=s[3];return f[0]=S+_*(d[0]-S),f[1]=T+_*(d[1]-T),f[2]=F+_*(d[2]-F),f[3]=M+_*(d[3]-M),f}function transformMat4$1(f,s,d){const _=s[0],S=s[1],T=s[2],F=s[3];return f[0]=d[0]*_+d[4]*S+d[8]*T+d[12]*F,f[1]=d[1]*_+d[5]*S+d[9]*T+d[13]*F,f[2]=d[2]*_+d[6]*S+d[10]*T+d[14]*F,f[3]=d[3]*_+d[7]*S+d[11]*T+d[15]*F,f}function transformQuat(f,s,d){const _=s[0],S=s[1],T=s[2],F=d[0],M=d[1],P=d[2],H=d[3],J=H*_+M*T-P*S,K=H*S+P*_-F*T,z=H*T+F*S-M*_,oe=-F*_-M*S-P*T;return f[0]=J*H+oe*-F+K*-P-z*-M,f[1]=K*H+oe*-M+z*-F-J*-P,f[2]=z*H+oe*-P+J*-M-K*-F,f[3]=s[3],f}(function(){const f=create$6();return function(s,d,_,S,T,F){let M,P;for(d||(d=4),_||(_=0),S?P=Math.min(S*d+_,s.length):P=s.length,M=_;M<P;M+=d)f[0]=s[M],f[1]=s[M+1],f[2]=s[M+2],f[3]=s[M+3],T(f,f,F),s[M]=f[0],s[M+1]=f[1],s[M+2]=f[2],s[M+3]=f[3];return s}})();var INDICES;(function(f){f[f.COL0ROW0=0]="COL0ROW0",f[f.COL0ROW1=1]="COL0ROW1",f[f.COL0ROW2=2]="COL0ROW2",f[f.COL0ROW3=3]="COL0ROW3",f[f.COL1ROW0=4]="COL1ROW0",f[f.COL1ROW1=5]="COL1ROW1",f[f.COL1ROW2=6]="COL1ROW2",f[f.COL1ROW3=7]="COL1ROW3",f[f.COL2ROW0=8]="COL2ROW0",f[f.COL2ROW1=9]="COL2ROW1",f[f.COL2ROW2=10]="COL2ROW2",f[f.COL2ROW3=11]="COL2ROW3",f[f.COL3ROW0=12]="COL3ROW0",f[f.COL3ROW1=13]="COL3ROW1",f[f.COL3ROW2=14]="COL3ROW2",f[f.COL3ROW3=15]="COL3ROW3"})(INDICES||(INDICES={}));const DEFAULT_FOVY=45*Math.PI/180,DEFAULT_ASPECT=1,DEFAULT_NEAR=.1,DEFAULT_FAR=500,IDENTITY_MATRIX$1=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Matrix4 extends Matrix{static get IDENTITY(){return getIdentityMatrix()}static get ZERO(){return getZeroMatrix()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return INDICES}constructor(s){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(s)?this.copy(s):this.identity()}copy(s){return this[0]=s[0],this[1]=s[1],this[2]=s[2],this[3]=s[3],this[4]=s[4],this[5]=s[5],this[6]=s[6],this[7]=s[7],this[8]=s[8],this[9]=s[9],this[10]=s[10],this[11]=s[11],this[12]=s[12],this[13]=s[13],this[14]=s[14],this[15]=s[15],this.check()}set(s,d,_,S,T,F,M,P,H,J,K,z,oe,se,ae,ge){return this[0]=s,this[1]=d,this[2]=_,this[3]=S,this[4]=T,this[5]=F,this[6]=M,this[7]=P,this[8]=H,this[9]=J,this[10]=K,this[11]=z,this[12]=oe,this[13]=se,this[14]=ae,this[15]=ge,this.check()}setRowMajor(s,d,_,S,T,F,M,P,H,J,K,z,oe,se,ae,ge){return this[0]=s,this[1]=T,this[2]=H,this[3]=oe,this[4]=d,this[5]=F,this[6]=J,this[7]=se,this[8]=_,this[9]=M,this[10]=K,this[11]=ae,this[12]=S,this[13]=P,this[14]=z,this[15]=ge,this.check()}toRowMajor(s){return s[0]=this[0],s[1]=this[4],s[2]=this[8],s[3]=this[12],s[4]=this[1],s[5]=this[5],s[6]=this[9],s[7]=this[13],s[8]=this[2],s[9]=this[6],s[10]=this[10],s[11]=this[14],s[12]=this[3],s[13]=this[7],s[14]=this[11],s[15]=this[15],s}identity(){return this.copy(IDENTITY_MATRIX$1)}fromObject(s){return this.check()}fromQuaternion(s){return fromQuat(this,s),this.check()}frustum(s){const{left:d,right:_,bottom:S,top:T,near:F=DEFAULT_NEAR,far:M=DEFAULT_FAR}=s;return M===1/0?computeInfinitePerspectiveOffCenter(this,d,_,S,T,F):frustum(this,d,_,S,T,F,M),this.check()}lookAt(s){const{eye:d,center:_=[0,0,0],up:S=[0,1,0]}=s;return lookAt$1(this,d,_,S),this.check()}ortho(s){const{left:d,right:_,bottom:S,top:T,near:F=DEFAULT_NEAR,far:M=DEFAULT_FAR}=s;return ortho(this,d,_,S,T,F,M),this.check()}orthographic(s){const{fovy:d=DEFAULT_FOVY,aspect:_=DEFAULT_ASPECT,focalDistance:S=1,near:T=DEFAULT_NEAR,far:F=DEFAULT_FAR}=s;checkRadians(d);const M=d/2,P=S*Math.tan(M),H=P*_;return this.ortho({left:-H,right:H,bottom:-P,top:P,near:T,far:F})}perspective(s){const{fovy:d=45*Math.PI/180,aspect:_=1,near:S=.1,far:T=500}=s;return checkRadians(d),perspective$1(this,d,_,S,T),this.check()}determinant(){return determinant(this)}getScale(s=[-0,-0,-0]){return s[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),s[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),s[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),s}getTranslation(s=[-0,-0,-0]){return s[0]=this[12],s[1]=this[13],s[2]=this[14],s}getRotation(s,d){s=s||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],d=d||[-0,-0,-0];const _=this.getScale(d),S=1/_[0],T=1/_[1],F=1/_[2];return s[0]=this[0]*S,s[1]=this[1]*T,s[2]=this[2]*F,s[3]=0,s[4]=this[4]*S,s[5]=this[5]*T,s[6]=this[6]*F,s[7]=0,s[8]=this[8]*S,s[9]=this[9]*T,s[10]=this[10]*F,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}getRotationMatrix3(s,d){s=s||[-0,-0,-0,-0,-0,-0,-0,-0,-0],d=d||[-0,-0,-0];const _=this.getScale(d),S=1/_[0],T=1/_[1],F=1/_[2];return s[0]=this[0]*S,s[1]=this[1]*T,s[2]=this[2]*F,s[3]=this[4]*S,s[4]=this[5]*T,s[5]=this[6]*F,s[6]=this[8]*S,s[7]=this[9]*T,s[8]=this[10]*F,s}transpose(){return transpose(this,this),this.check()}invert(){return invert$2(this,this),this.check()}multiplyLeft(s){return multiply$3(this,s,this),this.check()}multiplyRight(s){return multiply$3(this,this,s),this.check()}rotateX(s){return rotateX$2(this,this,s),this.check()}rotateY(s){return rotateY$1(this,this,s),this.check()}rotateZ(s){return rotateZ$2(this,this,s),this.check()}rotateXYZ(s){return this.rotateX(s[0]).rotateY(s[1]).rotateZ(s[2])}rotateAxis(s,d){return rotate(this,this,s,d),this.check()}scale(s){return scale$5(this,this,Array.isArray(s)?s:[s,s,s]),this.check()}translate(s){return translate$2(this,this,s),this.check()}transform(s,d){return s.length===4?(d=transformMat4$1(d||[-0,-0,-0,-0],s,this),checkVector(d,4),d):this.transformAsPoint(s,d)}transformAsPoint(s,d){const{length:_}=s;let S;switch(_){case 2:S=transformMat4$3(d||[-0,-0],s,this);break;case 3:S=transformMat4$2(d||[-0,-0,-0],s,this);break;default:throw new Error("Illegal vector")}return checkVector(S,s.length),S}transformAsVector(s,d){let _;switch(s.length){case 2:_=vec2_transformMat4AsVector(d||[-0,-0],s,this);break;case 3:_=vec3_transformMat4AsVector(d||[-0,-0,-0],s,this);break;default:throw new Error("Illegal vector")}return checkVector(_,s.length),_}transformPoint(s,d){return this.transformAsPoint(s,d)}transformVector(s,d){return this.transformAsPoint(s,d)}transformDirection(s,d){return this.transformAsVector(s,d)}makeRotationX(s){return this.identity().rotateX(s)}makeTranslation(s,d,_){return this.identity().translate([s,d,_])}}let ZERO,IDENTITY$1;function getZeroMatrix(){return ZERO||(ZERO=new Matrix4([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(ZERO)),ZERO}function getIdentityMatrix(){return IDENTITY$1||(IDENTITY$1=new Matrix4,Object.freeze(IDENTITY$1)),IDENTITY$1}function checkRadians(f){if(f>Math.PI*2)throw Error("expected radians")}function computeInfinitePerspectiveOffCenter(f,s,d,_,S,T){const F=2*T/(d-s),M=2*T/(S-_),P=(d+s)/(d-s),H=(S+_)/(S-_),J=-1,K=-1,z=-2*T;return f[0]=F,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=M,f[6]=0,f[7]=0,f[8]=P,f[9]=H,f[10]=J,f[11]=K,f[12]=0,f[13]=0,f[14]=z,f[15]=0,f}function create$5(){const f=new ARRAY_TYPE$1(4);return ARRAY_TYPE$1!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function identity$8(f){return f[0]=0,f[1]=0,f[2]=0,f[3]=1,f}function setAxisAngle(f,s,d){d=d*.5;const _=Math.sin(d);return f[0]=_*s[0],f[1]=_*s[1],f[2]=_*s[2],f[3]=Math.cos(d),f}function multiply$2(f,s,d){const _=s[0],S=s[1],T=s[2],F=s[3],M=d[0],P=d[1],H=d[2],J=d[3];return f[0]=_*J+F*M+S*H-T*P,f[1]=S*J+F*P+T*M-_*H,f[2]=T*J+F*H+_*P-S*M,f[3]=F*J-_*M-S*P-T*H,f}function rotateX$1(f,s,d){d*=.5;const _=s[0],S=s[1],T=s[2],F=s[3],M=Math.sin(d),P=Math.cos(d);return f[0]=_*P+F*M,f[1]=S*P+T*M,f[2]=T*P-S*M,f[3]=F*P-_*M,f}function rotateY(f,s,d){d*=.5;const _=s[0],S=s[1],T=s[2],F=s[3],M=Math.sin(d),P=Math.cos(d);return f[0]=_*P-T*M,f[1]=S*P+F*M,f[2]=T*P+_*M,f[3]=F*P-S*M,f}function rotateZ$1(f,s,d){d*=.5;const _=s[0],S=s[1],T=s[2],F=s[3],M=Math.sin(d),P=Math.cos(d);return f[0]=_*P+S*M,f[1]=S*P-_*M,f[2]=T*P+F*M,f[3]=F*P-T*M,f}function calculateW(f,s){const d=s[0],_=s[1],S=s[2];return f[0]=d,f[1]=_,f[2]=S,f[3]=Math.sqrt(Math.abs(1-d*d-_*_-S*S)),f}function slerp(f,s,d,_){const S=s[0],T=s[1],F=s[2],M=s[3];let P=d[0],H=d[1],J=d[2],K=d[3],z,oe,se,ae,ge;return z=S*P+T*H+F*J+M*K,z<0&&(z=-z,P=-P,H=-H,J=-J,K=-K),1-z>EPSILON$2?(oe=Math.acos(z),ge=Math.sin(oe),se=Math.sin((1-_)*oe)/ge,ae=Math.sin(_*oe)/ge):(se=1-_,ae=_),f[0]=se*S+ae*P,f[1]=se*T+ae*H,f[2]=se*F+ae*J,f[3]=se*M+ae*K,f}function invert$1(f,s){const d=s[0],_=s[1],S=s[2],T=s[3],F=d*d+_*_+S*S+T*T,M=F?1/F:0;return f[0]=-d*M,f[1]=-_*M,f[2]=-S*M,f[3]=T*M,f}function conjugate(f,s){return f[0]=-s[0],f[1]=-s[1],f[2]=-s[2],f[3]=s[3],f}function fromMat3(f,s){const d=s[0]+s[4]+s[8];let _;if(d>0)_=Math.sqrt(d+1),f[3]=.5*_,_=.5/_,f[0]=(s[5]-s[7])*_,f[1]=(s[6]-s[2])*_,f[2]=(s[1]-s[3])*_;else{let S=0;s[4]>s[0]&&(S=1),s[8]>s[S*3+S]&&(S=2);const T=(S+1)%3,F=(S+2)%3;_=Math.sqrt(s[S*3+S]-s[T*3+T]-s[F*3+F]+1),f[S]=.5*_,_=.5/_,f[3]=(s[T*3+F]-s[F*3+T])*_,f[T]=(s[T*3+S]+s[S*3+T])*_,f[F]=(s[F*3+S]+s[S*3+F])*_}return f}const add$5=add$6,scale$3=scale$4,dot$1=dot$2,lerp$2=lerp$3,length$1=length$2,squaredLength=squaredLength$1,normalize$3=normalize$4,rotationTo=function(){const f=create$8(),s=fromValues(1,0,0),d=fromValues(0,1,0);return function(_,S,T){const F=dot$3(S,T);return F<-.999999?(cross(f,s,S),len(f)<1e-6&&cross(f,d,S),normalize$5(f,f),setAxisAngle(_,f,Math.PI),_):F>.999999?(_[0]=0,_[1]=0,_[2]=0,_[3]=1,_):(cross(f,S,T),_[0]=f[0],_[1]=f[1],_[2]=f[2],_[3]=1+F,normalize$3(_,_))}}();(function(){const f=create$5(),s=create$5();return function(d,_,S,T,F,M){return slerp(f,_,F,M),slerp(s,S,T,M),slerp(d,f,s,2*M*(1-M)),d}})();(function(){const f=create$7();return function(s,d,_,S){return f[0]=_[0],f[3]=_[1],f[6]=_[2],f[1]=S[0],f[4]=S[1],f[7]=S[2],f[2]=-d[0],f[5]=-d[1],f[8]=-d[2],normalize$3(s,fromMat3(s,f))}})();const IDENTITY_QUATERNION=[0,0,0,1];class Quaternion extends MathArray{constructor(s=0,d=0,_=0,S=1){super(-0,-0,-0,-0),Array.isArray(s)&&arguments.length===1?this.copy(s):this.set(s,d,_,S)}copy(s){return this[0]=s[0],this[1]=s[1],this[2]=s[2],this[3]=s[3],this.check()}set(s,d,_,S){return this[0]=s,this[1]=d,this[2]=_,this[3]=S,this.check()}fromObject(s){return this[0]=s.x,this[1]=s.y,this[2]=s.z,this[3]=s.w,this.check()}fromMatrix3(s){return fromMat3(this,s),this.check()}fromAxisRotation(s,d){return setAxisAngle(this,s,d),this.check()}identity(){return identity$8(this),this.check()}setAxisAngle(s,d){return this.fromAxisRotation(s,d)}get ELEMENTS(){return 4}get x(){return this[0]}set x(s){this[0]=checkNumber(s)}get y(){return this[1]}set y(s){this[1]=checkNumber(s)}get z(){return this[2]}set z(s){this[2]=checkNumber(s)}get w(){return this[3]}set w(s){this[3]=checkNumber(s)}len(){return length$1(this)}lengthSquared(){return squaredLength(this)}dot(s){return dot$1(this,s)}rotationTo(s,d){return rotationTo(this,s,d),this.check()}add(s){return add$5(this,this,s),this.check()}calculateW(){return calculateW(this,this),this.check()}conjugate(){return conjugate(this,this),this.check()}invert(){return invert$1(this,this),this.check()}lerp(s,d,_){return _===void 0?this.lerp(this,s,d):(lerp$2(this,s,d,_),this.check())}multiplyRight(s){return multiply$2(this,this,s),this.check()}multiplyLeft(s){return multiply$2(this,s,this),this.check()}normalize(){const s=this.len(),d=s>0?1/s:0;return this[0]=this[0]*d,this[1]=this[1]*d,this[2]=this[2]*d,this[3]=this[3]*d,s===0&&(this[3]=1),this.check()}rotateX(s){return rotateX$1(this,this,s),this.check()}rotateY(s){return rotateY(this,this,s),this.check()}rotateZ(s){return rotateZ$1(this,this,s),this.check()}scale(s){return scale$3(this,this,s),this.check()}slerp(s,d,_){let S,T,F;switch(arguments.length){case 1:({start:S=IDENTITY_QUATERNION,target:T,ratio:F}=s);break;case 2:S=this,T=s,F=d;break;default:S=s,T=d,F=_}return slerp(this,S,T,F),this.check()}transformVector4(s,d=new Vector4){return transformQuat(d,s,this),checkVector(d,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(s,d){return this.setAxisAngle(s,d)}premultiply(s){return this.multiplyLeft(s)}multiply(s){return this.multiplyRight(s)}}const EPSILON15=1e-15,EPSILON20=1e-20,lightingShader$1=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))
struct AmbientLight {
vec3 color;
};
struct PointLight {
vec3 color;
vec3 position;
vec3 attenuation;
};
struct DirectionalLight {
vec3 color;
vec3 direction;
};
uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;
uniform bool lighting_uEnabled;
float getPointLightAttenuation(PointLight pointLight, float distance) {
return pointLight.attenuation.x
+ pointLight.attenuation.y * distance
+ pointLight.attenuation.z * distance * distance;
}
#endif
`,INITIAL_MODULE_OPTIONS$2={lightSources:{}};function convertColor(f={}){const{color:s=[0,0,0],intensity:d=1}=f;return s.map(_=>_*d/255)}function getLightSourceUniforms({ambientLight:f,pointLights:s=[],directionalLights:d=[]}){const _={};return f?_["lighting_uAmbientLight.color"]=convertColor(f):_["lighting_uAmbientLight.color"]=[0,0,0],s.forEach((S,T)=>{_[`lighting_uPointLight[${T}].color`]=convertColor(S),_[`lighting_uPointLight[${T}].position`]=S.position,_[`lighting_uPointLight[${T}].attenuation`]=S.attenuation||[1,0,0]}),_.lighting_uPointLightCount=s.length,d.forEach((S,T)=>{_[`lighting_uDirectionalLight[${T}].color`]=convertColor(S),_[`lighting_uDirectionalLight[${T}].direction`]=S.direction}),_.lighting_uDirectionalLightCount=d.length,_}function getUniforms$2(f=INITIAL_MODULE_OPTIONS$2){var s,d;if("lightSources"in f){const{ambientLight:_,pointLights:S,directionalLights:T}=f.lightSources||{};return _||S&&S.length>0||T&&T.length>0?Object.assign({},getLightSourceUniforms({ambientLight:_,pointLights:S,directionalLights:T}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in f){const _={pointLights:[],directionalLights:[]};for(const S of f.lights||[])switch(S.type){case"ambient":_.ambientLight=S;break;case"directional":(s=_.directionalLights)==null||s.push(S);break;case"point":(d=_.pointLights)==null||d.push(S);break}return getUniforms$2({lightSources:_})}return{}}const lights={name:"lights",vs:lightingShader$1,fs:lightingShader$1,getUniforms:getUniforms$2,defines:{MAX_LIGHTS:3}},lightingShader=`uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;
vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
vec3 halfway_direction = normalize(light_direction + view_direction);
float lambertian = dot(light_direction, normal_worldspace);
float specular = 0.0;
if (lambertian > 0.0) {
float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
specular = pow(specular_angle, lighting_uShininess);
}
lambertian = max(lambertian, 0.0);
return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}
vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
vec3 lightColor = surfaceColor;
if (lighting_uEnabled) {
vec3 view_direction = normalize(cameraPosition - position_worldspace);
lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uPointLightCount) {
break;
}
PointLight pointLight = lighting_uPointLight[i];
vec3 light_position_worldspace = pointLight.position;
vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
}
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uDirectionalLightCount) {
break;
}
DirectionalLight directionalLight = lighting_uDirectionalLight[i];
lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
}
}
return lightColor;
}
vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
vec3 lightColor = vec3(0, 0, 0);
vec3 surfaceColor = vec3(0, 0, 0);
if (lighting_uEnabled) {
vec3 view_direction = normalize(cameraPosition - position_worldspace);
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uPointLightCount) {
break;
}
PointLight pointLight = lighting_uPointLight[i];
vec3 light_position_worldspace = pointLight.position;
vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
}
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uDirectionalLightCount) {
break;
}
DirectionalLight directionalLight = lighting_uDirectionalLight[i];
lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
}
}
return lightColor;
}
`,INITIAL_MODULE_OPTIONS$1={};function getMaterialUniforms(f){const{ambient:s=.35,diffuse:d=.6,shininess:_=32,specularColor:S=[30,30,30]}=f;return{lighting_uAmbient:s,lighting_uDiffuse:d,lighting_uShininess:_,lighting_uSpecularColor:S.map(T=>T/255)}}function getUniforms$1(f=INITIAL_MODULE_OPTIONS$1){if(!("material"in f))return{};const{material:s}=f;return s?getMaterialUniforms(s):{lighting_uEnabled:!1}}const gouraudLighting={name:"gouraud-lighting",dependencies:[lights],vs:lightingShader,defines:{LIGHTING_VERTEX:1},getUniforms:getUniforms$1},defines="#define SMOOTH_EDGE_RADIUS 0.5",vs$d=`
${defines}

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,fs$f=`
${defines}

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,geometry={name:"geometry",vs:vs$d,fs:fs$f},COORDINATE_SYSTEM={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(COORDINATE_SYSTEM,"IDENTITY",{get:()=>(defaultLogger.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const PROJECTION_MODE={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},UNIT={common:0,meters:1,pixels:2},EVENTS={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},COORDINATE_SYSTEM_GLSL_CONSTANTS=Object.keys(COORDINATE_SYSTEM).map(f=>`const int COORDINATE_SYSTEM_${f} = ${COORDINATE_SYSTEM[f]};`).join(""),PROJECTION_MODE_GLSL_CONSTANTS=Object.keys(PROJECTION_MODE).map(f=>`const int PROJECTION_MODE_${f} = ${PROJECTION_MODE[f]};`).join(""),UNIT_GLSL_CONSTANTS=Object.keys(UNIT).map(f=>`const int UNIT_${f.toUpperCase()} = ${UNIT[f]};`).join(""),projectShader=`${COORDINATE_SYSTEM_GLSL_CONSTANTS}
${PROJECTION_MODE_GLSL_CONSTANTS}
${UNIT_GLSL_CONSTANTS}
uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
float y = clamp(lat, -89.9, 89.9);
return 1.0 / cos(radians(y));
}
float project_size() {
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
project_uPseudoMeters == false) {
if (geometry.position.w == 0.0) {
return project_size_at_latitude(geometry.worldPosition.y);
}
float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
float y2 = y * y;
float y4 = y2 * y2;
float y6 = y4 * y2;
return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
}
return 1.0;
}
float project_size_at_latitude(float meters, float lat) {
return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
return meters * project_uCommonUnitsPerMeter.z * project_size();
}
vec2 project_size(vec2 meters) {
return meters * project_uCommonUnitsPerMeter.xy * project_size();
}
vec3 project_size(vec3 meters) {
return meters * project_uCommonUnitsPerMeter * project_size();
}
vec4 project_size(vec4 meters) {
return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
vec3 uz = normalize(up);
vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
vec3 uy = cross(uz, ux);
return mat3(ux, uy, uz);
}
bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
transform = project_get_orientation_matrix(commonPosition);
return true;
}
return false;
}
vec3 project_normal(vec3 vector) {
vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
mat3 rotation;
if (project_needs_rotation(geometry.position.xyz, rotation)) {
n = rotation * n;
}
return n;
}
vec4 project_offset_(vec4 offset) {
float dy = offset.y;
vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
float x = lnglat.x;
if (project_uWrapLongitude) {
x = mod(x + 180., 360.0) - 180.;
}
float y = clamp(lnglat.y, -89.9, 89.9);
return vec2(
radians(x) + PI,
PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
) * WORLD_SCALE;
}
vec3 project_globe_(vec3 lnglatz) {
float lambda = radians(lnglatz.x);
float phi = radians(lnglatz.y);
float cosPhi = cos(phi);
float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
return vec3(
sin(lambda) * cosPhi,
-cos(lambda) * cosPhi,
sin(phi)
) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
vec4 position_world = project_uModelMatrix * position;
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_mercator_(position_world.xy),
project_size_at_latitude(position_world.z, position_world.y),
position_world.w
);
}
if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
position_world.xyz += project_uCoordinateOrigin;
}
}
if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_globe_(position_world.xyz),
position_world.w
);
}
}
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
return vec4(
project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
project_size(position_world.z),
position_world.w
);
}
}
}
if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
(project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
(project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
position_world.xyz -= project_uCoordinateOrigin;
}
return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));
}
vec4 project_position(vec4 position) {
return project_position(position, ZERO_64_LOW);
}
vec3 project_position(vec3 position, vec3 position64Low) {
vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
return projected_position.xyz;
}
vec3 project_position(vec3 position) {
vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
return projected_position.xyz;
}
vec2 project_position(vec2 position) {
vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
return projected_position.xy;
}
vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
return offset * project_uFocalDistance;
}
float project_size_to_pixel(float meters) {
return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
if (unit == UNIT_METERS) return project_size_to_pixel(size);
if (unit == UNIT_COMMON) return size * project_uScale;
return size;
}
float project_pixel_size(float pixels) {
return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
return pixels / project_uScale;
}
`;function isEqual$2(f,s){if(f===s)return!0;if(Array.isArray(f)){const d=f.length;if(!s||s.length!==d)return!1;for(let _=0;_<d;_++)if(f[_]!==s[_])return!1;return!0}return!1}function memoize$2(f){let s={},d;return _=>{for(const S in _)if(!isEqual$2(_[S],s[S])){d=f(_),s=_;break}return d}}const ZERO_VECTOR$1=[0,0,0,0],VECTOR_TO_POINT_MATRIX$1=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],IDENTITY_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],DEFAULT_PIXELS_PER_UNIT2=[0,0,0],DEFAULT_COORDINATE_ORIGIN$1=[0,0,0],getMemoizedViewportUniforms=memoize$2(calculateViewportUniforms);function getOffsetOrigin(f,s,d=DEFAULT_COORDINATE_ORIGIN$1){d.length<3&&(d=[d[0],d[1],0]);let _=d,S,T=!0;switch(s===COORDINATE_SYSTEM.LNGLAT_OFFSETS||s===COORDINATE_SYSTEM.METER_OFFSETS?S=d:S=f.isGeospatial?[Math.fround(f.longitude),Math.fround(f.latitude),0]:null,f.projectionMode){case PROJECTION_MODE.WEB_MERCATOR:(s===COORDINATE_SYSTEM.LNGLAT||s===COORDINATE_SYSTEM.CARTESIAN)&&(S=[0,0,0],T=!1);break;case PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:s===COORDINATE_SYSTEM.LNGLAT?_=S:s===COORDINATE_SYSTEM.CARTESIAN&&(_=[Math.fround(f.center[0]),Math.fround(f.center[1]),0],S=f.unprojectPosition(_),_[0]-=d[0],_[1]-=d[1],_[2]-=d[2]);break;case PROJECTION_MODE.IDENTITY:_=f.position.map(Math.fround),_[2]=_[2]||0;break;case PROJECTION_MODE.GLOBE:T=!1,S=null;break;default:T=!1}return{geospatialOrigin:S,shaderCoordinateOrigin:_,offsetMode:T}}function calculateMatrixAndOffset(f,s,d){const{viewMatrixUncentered:_,projectionMatrix:S}=f;let{viewMatrix:T,viewProjectionMatrix:F}=f,M=ZERO_VECTOR$1,P=ZERO_VECTOR$1,H=f.cameraPosition;const{geospatialOrigin:J,shaderCoordinateOrigin:K,offsetMode:z}=getOffsetOrigin(f,s,d);return z&&(P=f.projectPosition(J||K),H=[H[0]-P[0],H[1]-P[1],H[2]-P[2]],P[3]=1,M=transformMat4$1([],P,F),T=_||T,F=multiply$3([],S,T),F=multiply$3([],F,VECTOR_TO_POINT_MATRIX$1)),{viewMatrix:T,viewProjectionMatrix:F,projectionCenter:M,originCommon:P,cameraPosCommon:H,shaderCoordinateOrigin:K,geospatialOrigin:J}}function getUniformsFromViewport({viewport:f,devicePixelRatio:s=1,modelMatrix:d=null,coordinateSystem:_=COORDINATE_SYSTEM.DEFAULT,coordinateOrigin:S=DEFAULT_COORDINATE_ORIGIN$1,autoWrapLongitude:T=!1}){_===COORDINATE_SYSTEM.DEFAULT&&(_=f.isGeospatial?COORDINATE_SYSTEM.LNGLAT:COORDINATE_SYSTEM.CARTESIAN);const F=getMemoizedViewportUniforms({viewport:f,devicePixelRatio:s,coordinateSystem:_,coordinateOrigin:S});return F.project_uWrapLongitude=T,F.project_uModelMatrix=d||IDENTITY_MATRIX,F}function calculateViewportUniforms({viewport:f,devicePixelRatio:s,coordinateSystem:d,coordinateOrigin:_}){const{projectionCenter:S,viewProjectionMatrix:T,originCommon:F,cameraPosCommon:M,shaderCoordinateOrigin:P,geospatialOrigin:H}=calculateMatrixAndOffset(f,d,_),J=f.getDistanceScales(),K=[f.width*s,f.height*s],z=transformMat4$1([],[0,0,-f.focalDistance,1],f.projectionMatrix)[3]||1,oe={project_uCoordinateSystem:d,project_uProjectionMode:f.projectionMode,project_uCoordinateOrigin:P,project_uCommonOrigin:F.slice(0,3),project_uCenter:S,project_uPseudoMeters:!!f._pseudoMeters,project_uViewportSize:K,project_uDevicePixelRatio:s,project_uFocalDistance:z,project_uCommonUnitsPerMeter:J.unitsPerMeter,project_uCommonUnitsPerWorldUnit:J.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:DEFAULT_PIXELS_PER_UNIT2,project_uScale:f.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:T,project_uModelMatrix:IDENTITY_MATRIX,project_uCameraPosition:M};if(H){const se=f.getDistanceScales(H);switch(d){case COORDINATE_SYSTEM.METER_OFFSETS:oe.project_uCommonUnitsPerWorldUnit=se.unitsPerMeter,oe.project_uCommonUnitsPerWorldUnit2=se.unitsPerMeter2;break;case COORDINATE_SYSTEM.LNGLAT:case COORDINATE_SYSTEM.LNGLAT_OFFSETS:f._pseudoMeters||(oe.project_uCommonUnitsPerMeter=se.unitsPerMeter),oe.project_uCommonUnitsPerWorldUnit=se.unitsPerDegree,oe.project_uCommonUnitsPerWorldUnit2=se.unitsPerDegree2;break;case COORDINATE_SYSTEM.CARTESIAN:oe.project_uCommonUnitsPerWorldUnit=[1,1,se.unitsPerMeter[2]],oe.project_uCommonUnitsPerWorldUnit2=[0,0,se.unitsPerMeter2[2]];break}}return oe}const INITIAL_MODULE_OPTIONS={};function getUniforms(f=INITIAL_MODULE_OPTIONS){return"viewport"in f?getUniformsFromViewport(f):{}}const project$1={name:"project",dependencies:[fp32,geometry],vs:projectShader,getUniforms},vs$c=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,project32={name:"project32",dependencies:[project$1],vs:vs$c};function createMat4$2(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function transformVector$2(f,s){const d=transformMat4$1([],s,f);return scale$4(d,d,1/d[3]),d}function mod$1(f,s){const d=f%s;return d<0?s+d:d}function clamp$2(f,s,d){return f<s?s:f>d?d:f}function ieLog2$1(f){return Math.log(f)*Math.LOG2E}const log2$1=Math.log2||ieLog2$1;function assert$3(f,s){if(!f)throw new Error(s||"@math.gl/web-mercator: assertion failed.")}const PI$1=Math.PI,PI_4$1=PI$1/4,DEGREES_TO_RADIANS$6=PI$1/180,RADIANS_TO_DEGREES$2=180/PI$1,TILE_SIZE$4=512,EARTH_CIRCUMFERENCE$1=4003e4,MAX_LATITUDE$1=85.051129,DEFAULT_ALTITUDE$1=1.5;function scaleToZoom(f){return log2$1(f)}function lngLatToWorld$1(f){const[s,d]=f;assert$3(Number.isFinite(s)),assert$3(Number.isFinite(d)&&d>=-90&&d<=90,"invalid latitude");const _=s*DEGREES_TO_RADIANS$6,S=d*DEGREES_TO_RADIANS$6,T=TILE_SIZE$4*(_+PI$1)/(2*PI$1),F=TILE_SIZE$4*(PI$1+Math.log(Math.tan(PI_4$1+S*.5)))/(2*PI$1);return[T,F]}function worldToLngLat$1(f){const[s,d]=f,_=s/TILE_SIZE$4*(2*PI$1)-PI$1,S=2*(Math.atan(Math.exp(d/TILE_SIZE$4*(2*PI$1)-PI$1))-PI_4$1);return[_*RADIANS_TO_DEGREES$2,S*RADIANS_TO_DEGREES$2]}function getMeterZoom(f){const{latitude:s}=f;assert$3(Number.isFinite(s));const d=Math.cos(s*DEGREES_TO_RADIANS$6);return scaleToZoom(EARTH_CIRCUMFERENCE$1*d)-9}function unitsPerMeter(f){const s=Math.cos(f*DEGREES_TO_RADIANS$6);return TILE_SIZE$4/EARTH_CIRCUMFERENCE$1/s}function getDistanceScales$2(f){const{latitude:s,longitude:d,highPrecision:_=!1}=f;assert$3(Number.isFinite(s)&&Number.isFinite(d));const S=TILE_SIZE$4,T=Math.cos(s*DEGREES_TO_RADIANS$6),F=S/360,M=F/T,P=S/EARTH_CIRCUMFERENCE$1/T,H={unitsPerMeter:[P,P,P],metersPerUnit:[1/P,1/P,1/P],unitsPerDegree:[F,M,P],degreesPerUnit:[1/F,1/M,1/P]};if(_){const J=DEGREES_TO_RADIANS$6*Math.tan(s*DEGREES_TO_RADIANS$6)/T,K=F*J/2,z=S/EARTH_CIRCUMFERENCE$1*J,oe=z/M*P;H.unitsPerDegree2=[0,K,z],H.unitsPerMeter2=[oe,0,oe]}return H}function addMetersToLngLat(f,s){const[d,_,S]=f,[T,F,M]=s,{unitsPerMeter:P,unitsPerMeter2:H}=getDistanceScales$2({longitude:d,latitude:_,highPrecision:!0}),J=lngLatToWorld$1(f);J[0]+=T*(P[0]+H[0]*F),J[1]+=F*(P[1]+H[1]*F);const K=worldToLngLat$1(J),z=(S||0)+(M||0);return Number.isFinite(S)||Number.isFinite(M)?[K[0],K[1],z]:K}function getViewMatrix$2(f){const{height:s,pitch:d,bearing:_,altitude:S,scale:T,center:F}=f,M=createMat4$2();translate$2(M,M,[0,0,-S]),rotateX$2(M,M,-d*DEGREES_TO_RADIANS$6),rotateZ$2(M,M,_*DEGREES_TO_RADIANS$6);const P=T/s;return scale$5(M,M,[P,P,P]),F&&translate$2(M,M,negate$2([],F)),M}function getProjectionParameters$1(f){const{width:s,height:d,altitude:_,pitch:S=0,offset:T,center:F,scale:M,nearZMultiplier:P=1,farZMultiplier:H=1}=f;let{fovy:J=altitudeToFovy$1(DEFAULT_ALTITUDE$1)}=f;_!==void 0&&(J=altitudeToFovy$1(_));const K=J*DEGREES_TO_RADIANS$6,z=S*DEGREES_TO_RADIANS$6,oe=fovyToAltitude$1(J);let se=oe;F&&(se+=F[2]*M/Math.cos(z)/d);const ae=K*(.5+(T?T[1]:0)/d),ge=Math.sin(ae)*se/Math.sin(clamp$2(Math.PI/2-z-ae,.01,Math.PI-.01)),pe=Math.sin(z)*ge+se,he=se*10,ve=Math.min(pe*H,he);return{fov:K,aspect:s/d,focalDistance:oe,near:P,far:ve}}function altitudeToFovy$1(f){return 2*Math.atan(.5/f)*RADIANS_TO_DEGREES$2}function fovyToAltitude$1(f){return .5/Math.tan(.5*f*DEGREES_TO_RADIANS$6)}function worldToPixels$1(f,s){const[d,_,S=0]=f;return assert$3(Number.isFinite(d)&&Number.isFinite(_)&&Number.isFinite(S)),transformVector$2(s,[d,_,S,1])}function pixelsToWorld$1(f,s,d=0){const[_,S,T]=f;if(assert$3(Number.isFinite(_)&&Number.isFinite(S),"invalid pixel coordinate"),Number.isFinite(T))return transformVector$2(s,[_,S,T,1]);const F=transformVector$2(s,[_,S,0,1]),M=transformVector$2(s,[_,S,1,1]),P=F[2],H=M[2],J=P===H?0:((d||0)-P)/(H-P);return lerp$5([],F,M,J)}function fitBounds$1(f){const{width:s,height:d,bounds:_,minExtent:S=0,maxZoom:T=24,offset:F=[0,0]}=f,[[M,P],[H,J]]=_,K=getPaddingObject$1(f.padding),z=lngLatToWorld$1([M,clamp$2(J,-MAX_LATITUDE$1,MAX_LATITUDE$1)]),oe=lngLatToWorld$1([H,clamp$2(P,-MAX_LATITUDE$1,MAX_LATITUDE$1)]),se=[Math.max(Math.abs(oe[0]-z[0]),S),Math.max(Math.abs(oe[1]-z[1]),S)],ae=[s-K.left-K.right-Math.abs(F[0])*2,d-K.top-K.bottom-Math.abs(F[1])*2];assert$3(ae[0]>0&&ae[1]>0);const ge=ae[0]/se[0],pe=ae[1]/se[1],he=(K.right-K.left)/2/ge,ve=(K.top-K.bottom)/2/pe,be=[(oe[0]+z[0])/2+he,(oe[1]+z[1])/2+ve],Re=worldToLngLat$1(be),Fe=Math.min(T,log2$1(Math.abs(Math.min(ge,pe))));return assert$3(Number.isFinite(Fe)),{longitude:Re[0],latitude:Re[1],zoom:Fe}}function getPaddingObject$1(f=0){return typeof f=="number"?{top:f,bottom:f,left:f,right:f}:(assert$3(Number.isFinite(f.top)&&Number.isFinite(f.bottom)&&Number.isFinite(f.left)&&Number.isFinite(f.right)),f)}const DEGREES_TO_RADIANS$5=Math.PI/180;function getBounds$2(f,s=0){const{width:d,height:_,unproject:S}=f,T={targetZ:s},F=S([0,_],T),M=S([d,_],T);let P,H;const J=f.fovy?.5*f.fovy*DEGREES_TO_RADIANS$5:Math.atan(.5/f.altitude),K=(90-f.pitch)*DEGREES_TO_RADIANS$5;return J>K-.01?(P=unprojectOnFarPlane$1(f,0,s),H=unprojectOnFarPlane$1(f,d,s)):(P=S([0,0],T),H=S([d,0],T)),[F,M,H,P]}function unprojectOnFarPlane$1(f,s,d){const{pixelUnprojectionMatrix:_}=f,S=transformVector$2(_,[s,0,1,1]),T=transformVector$2(_,[s,f.height,1,1]),M=(d*f.distanceScales.unitsPerMeter[2]-S[2])/(T[2]-S[2]),P=lerp$5([],S,T,M),H=worldToLngLat$1(P);return H.push(d),H}const TILE_SIZE$3=512;function normalizeViewportProps(f){const{width:s,height:d,pitch:_=0}=f;let{longitude:S,latitude:T,zoom:F,bearing:M=0}=f;(S<-180||S>180)&&(S=mod$1(S+180,360)-180),(M<-180||M>180)&&(M=mod$1(M+180,360)-180);const P=log2$1(d/TILE_SIZE$3);if(F<=P)F=P,T=0;else{const H=d/2/Math.pow(2,F),J=worldToLngLat$1([0,H])[1];if(T<J)T=J;else{const K=worldToLngLat$1([0,TILE_SIZE$3-H])[1];T>K&&(T=K)}}return{width:s,height:d,longitude:S,latitude:T,zoom:F,pitch:_,bearing:M}}const vs$b=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,fs$e=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,getMemoizedViewportCenterPosition=memoize$2(getViewportCenterPosition),getMemoizedViewProjectionMatrices=memoize$2(getViewProjectionMatrices),DEFAULT_SHADOW_COLOR$1=[0,0,0,1],VECTOR_TO_POINT_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function screenToCommonSpace(f,s){const[d,_,S]=f,T=pixelsToWorld$1([d,_,S],s);return Number.isFinite(S)?T:[T[0],T[1],0]}function getViewportCenterPosition({viewport:f,center:s}){return new Matrix4(f.viewProjectionMatrix).invert().transform(s)}function getViewProjectionMatrices({viewport:f,shadowMatrices:s}){const d=[],_=f.pixelUnprojectionMatrix,S=f.isGeospatial?void 0:1,T=[[0,0,S],[f.width,0,S],[0,f.height,S],[f.width,f.height,S],[0,0,-1],[f.width,0,-1],[0,f.height,-1],[f.width,f.height,-1]].map(F=>screenToCommonSpace(F,_));for(const F of s){const M=F.clone().translate(new Vector3(f.center).negate()),P=T.map(J=>M.transform(J)),H=new Matrix4().ortho({left:Math.min(...P.map(J=>J[0])),right:Math.max(...P.map(J=>J[0])),bottom:Math.min(...P.map(J=>J[1])),top:Math.max(...P.map(J=>J[1])),near:Math.min(...P.map(J=>-J[2])),far:Math.max(...P.map(J=>-J[2]))});d.push(H.multiplyRight(F))}return d}function createShadowUniforms(f,s){const{shadowEnabled:d=!0}=f;if(!d||!f.shadowMatrices||!f.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1,shadow_uShadowMap0:f.dummyShadowMap,shadow_uShadowMap1:f.dummyShadowMap};const _={shadow_uDrawShadowMap:!!f.drawToShadowMap,shadow_uUseShadowMap:f.shadowMaps?f.shadowMaps.length>0:!1,shadow_uColor:f.shadowColor||DEFAULT_SHADOW_COLOR$1,shadow_uLightId:f.shadowLightId||0,shadow_uLightCount:f.shadowMatrices.length},S=getMemoizedViewportCenterPosition({viewport:f.viewport,center:s.project_uCenter}),T=[],F=getMemoizedViewProjectionMatrices({shadowMatrices:f.shadowMatrices,viewport:f.viewport}).slice();for(let M=0;M<f.shadowMatrices.length;M++){const P=F[M],H=P.clone().translate(new Vector3(f.viewport.center).negate());s.project_uCoordinateSystem===COORDINATE_SYSTEM.LNGLAT&&s.project_uProjectionMode===PROJECTION_MODE.WEB_MERCATOR?(F[M]=H,T[M]=S):(F[M]=P.clone().multiplyRight(VECTOR_TO_POINT_MATRIX),T[M]=H.transform(S))}for(let M=0;M<F.length;M++)_[`shadow_uViewProjectionMatrices[${M}]`]=F[M],_[`shadow_uProjectCenters[${M}]`]=T[M];for(let M=0;M<2;M++)_[`shadow_uShadowMap${M}`]=f.shadowMaps&&f.shadowMaps[M]||f.dummyShadowMap;return _}const shadow={name:"shadow",dependencies:[project$1],vs:vs$b,fs:fs$e,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(f={},s={})=>"viewport"in f&&(f.drawToShadowMap||f.shadowMaps&&f.shadowMaps.length>0)?createShadowUniforms(f,s):{}},picking={...picking$1,defaultUniforms:{...picking$1.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},DEFAULT_MODULES=[project$1],SHADER_HOOKS=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function getShaderAssembler(){const f=ShaderAssembler.getDefaultShaderAssembler();for(const s of DEFAULT_MODULES)f.addDefaultModule(s);for(const s of SHADER_HOOKS)f.addShaderHook(s);return f}const DEFAULT_LIGHT_COLOR$1=[255,255,255],DEFAULT_LIGHT_INTENSITY$1=1;let idCount$1=0;class AmbientLight{constructor(s={}){this.type="ambient";const{color:d=DEFAULT_LIGHT_COLOR$1}=s,{intensity:_=DEFAULT_LIGHT_INTENSITY$1}=s;this.id=s.id||`ambient-${idCount$1++}`,this.color=d,this.intensity=_}}const DEFAULT_LIGHT_COLOR=[255,255,255],DEFAULT_LIGHT_INTENSITY=1,DEFAULT_LIGHT_DIRECTION=[0,0,-1];let idCount=0;class DirectionalLight{constructor(s={}){this.type="directional";const{color:d=DEFAULT_LIGHT_COLOR}=s,{intensity:_=DEFAULT_LIGHT_INTENSITY}=s,{direction:S=DEFAULT_LIGHT_DIRECTION}=s,{_shadow:T=!1}=s;this.id=s.id||`directional-${idCount++}`,this.color=d,this.intensity=_,this.type="directional",this.direction=new Vector3(S).normalize().toArray(),this.shadow=T}getProjectedLight(s){return this}}class Pass{constructor(s,d={id:"pass"}){const{id:_}=d;this.id=_,this.device=s,this.props={...d}}setProps(s){Object.assign(this.props,s)}render(s){}cleanup(){}}class LayersPass extends Pass{constructor(){super(...arguments),this._lastRenderIndex=-1}render(s){const[d,_]=this.device.canvasContext.getDrawingBufferSize(),S=s.clearCanvas??!0,T=s.clearColor??(S?[0,0,0,0]:!1),F=S?1:!1,M=S?0:!1,P=s.colorMask??15,H={viewport:[0,0,d,_]};s.colorMask&&(H.colorMask=P),s.scissorRect&&(H.scissorRect=s.scissorRect);const J=this.device.beginRenderPass({framebuffer:s.target,parameters:H,clearColor:T,clearDepth:F,clearStencil:M});try{return this._drawLayers(J,s)}finally{J.end()}}_drawLayers(s,d){const{target:_,moduleParameters:S,viewports:T,views:F,onViewportActive:M,clearStack:P=!0}=d;d.pass=d.pass||"unknown",P&&(this._lastRenderIndex=-1);const H=[];for(const J of T){const K=F&&F[J.id];M==null||M(J);const z=this._getDrawLayerParams(J,d),oe=J.subViewports||[J];for(const se of oe){const ae=this._drawLayersInViewport(s,{target:_,moduleParameters:S,viewport:se,view:K,pass:d.pass,layers:d.layers},z);H.push(ae)}}return H}_getDrawLayerParams(s,{layers:d,pass:_,isPicking:S=!1,layerFilter:T,cullRect:F,effects:M,moduleParameters:P},H=!1){var se;const J=[],K=layerIndexResolver(this._lastRenderIndex+1),z={layer:d[0],viewport:s,isPicking:S,renderPass:_,cullRect:F},oe={};for(let ae=0;ae<d.length;ae++){const ge=d[ae],pe=this._shouldDrawLayer(ge,z,T,oe),he={shouldDrawLayer:pe};pe&&!H&&(he.layerRenderIndex=K(ge,pe),he.moduleParameters=this._getModuleParameters(ge,M,_,P),he.layerParameters={...(se=ge.context.deck)==null?void 0:se.props.parameters,...this.getLayerParameters(ge,ae,s)}),J[ae]=he}return J}_drawLayersInViewport(s,{layers:d,moduleParameters:_,pass:S,target:T,viewport:F,view:M},P){const H=getGLViewport(this.device,{moduleParameters:_,target:T,viewport:F});if(M&&M.props.clear){const K=M.props.clear===!0?{color:!0,depth:!0}:M.props.clear;this.device.withParametersWebGL({scissorTest:!0,scissor:H},()=>this.device.clearWebGL(K))}const J={totalCount:d.length,visibleCount:0,compositeCount:0,pickableCount:0};s.setParameters({viewport:H});for(let K=0;K<d.length;K++){const z=d[K],{shouldDrawLayer:oe,layerRenderIndex:se,moduleParameters:ae,layerParameters:ge}=P[K];if(oe&&z.props.pickable&&J.pickableCount++,z.isComposite)J.compositeCount++;else if(oe){J.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,se),ae.viewport=F,z.context.renderPass=s;try{z._drawLayer({renderPass:s,moduleParameters:ae,uniforms:{layerIndex:se},parameters:ge})}catch(pe){z.raiseError(pe,`drawing ${z} to ${S}`)}}}return J}shouldDrawLayer(s){return!0}getModuleParameters(s,d){return null}getLayerParameters(s,d,_){return s.props.parameters}_shouldDrawLayer(s,d,_,S){if(!(s.props.visible&&this.shouldDrawLayer(s)))return!1;d.layer=s;let F=s.parent;for(;F;){if(!F.props.visible||!F.filterSubLayer(d))return!1;d.layer=F,F=F.parent}if(_){const M=d.layer.id;if(M in S||(S[M]=_(d)),!S[M])return!1}return s.activateViewport(d.viewport),!0}_getModuleParameters(s,d,_,S){var M,P;const T=this.device.canvasContext.cssToDeviceRatio(),F=Object.assign(Object.create(((M=s.internalState)==null?void 0:M.propsInTransition)||s.props),{autoWrapLongitude:s.wrapLongitude,viewport:s.context.viewport,mousePosition:s.context.mousePosition,picking:{isActive:0},devicePixelRatio:T});if(d)for(const H of d)Object.assign(F,(P=H.getModuleParameters)==null?void 0:P.call(H,s));return Object.assign(F,this.getModuleParameters(s,d),S)}}function layerIndexResolver(f=0,s={}){const d={},_=(S,T)=>{const F=S.props._offset,M=S.id,P=S.parent&&S.parent.id;let H;if(P&&!(P in s)&&_(S.parent,!1),P in d){const J=d[P]=d[P]||layerIndexResolver(s[P],s);H=J(S,T),d[M]=J}else Number.isFinite(F)?(H=F+(s[P]||0),d[M]=null):H=f;return T&&H>=f&&(f=H+1),s[M]=H,H};return _}function getGLViewport(f,{moduleParameters:s,target:d,viewport:_}){const S=s&&s.devicePixelRatio||f.canvasContext.cssToDeviceRatio(),[,T]=f.canvasContext.getDrawingBufferSize(),F=d?d.height:T,M=_;return[M.x*S,F-(M.y+M.height)*S,M.width*S,M.height*S]}class ShadowPass extends LayersPass{constructor(s,d){super(s,d),this.shadowMap=s.createTexture({width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}}),this.depthBuffer=s.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1,dataFormat:6402,type:5125}),this.fbo=s.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[this.shadowMap],depthStencilAttachment:this.depthBuffer})}render(s){const d=this.fbo,_=this.device.canvasContext.cssToDeviceRatio(),S=s.viewports[0],T=S.width*_,F=S.height*_,M=[1,1,1,1];(T!==d.width||F!==d.height)&&d.resize({width:T,height:F}),super.render({...s,clearColor:M,target:d,pass:"shadow"})}getLayerParameters(s,d,_){return{...s.props.parameters,blend:!1,depthRange:[0,1],depthTest:!0}}shouldDrawLayer(s){return s.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null),this.shadowMap&&(this.shadowMap.destroy(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.destroy(),this.depthBuffer=null)}}const DEFAULT_AMBIENT_LIGHT_PROPS={color:[255,255,255],intensity:1},DEFAULT_DIRECTIONAL_LIGHT_PROPS=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],DEFAULT_SHADOW_COLOR=[0,0,0,200/255];class LightingEffect{constructor(s={}){this.id="lighting-effect",this.shadowColor=DEFAULT_SHADOW_COLOR,this.shadow=!1,this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.setProps(s)}setup(s){this.context=s;const{device:d,deck:_}=s;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(d),_._addDefaultShaderModule(shadow),this.dummyShadowMap=d.createTexture({width:1,height:1}))}setProps(s){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const d in s){const _=s[d];switch(_.type){case"ambient":this.ambientLight=_;break;case"directional":this.directionalLights.push(_);break;case"point":this.pointLights.push(_);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(d=>d.shadow),this.context&&this.setup(this.context),this.props=s}preRender({layers:s,layerFilter:d,viewports:_,onViewportActive:S,views:T}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let F=0;F<this.shadowPasses.length;F++)this.shadowPasses[F].render({layers:s,layerFilter:d,viewports:_,onViewportActive:S,views:T,moduleParameters:{shadowLightId:F,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(s){const d=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return d.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(_=>_.getProjectedLight({layer:s})),pointLights:this.pointLights.map(_=>_.getProjectedLight({layer:s}))},d}cleanup(s){for(const d of this.shadowPasses)d.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,s.deck._removeDefaultShaderModule(shadow))}_calculateMatrices(){const s=[];for(const d of this.directionalLights){const _=new Matrix4().lookAt({eye:new Vector3(d.direction).negate()});s.push(_)}return s}_createShadowPasses(s){for(let d=0;d<this.directionalLights.length;d++){const _=new ShadowPass(s);this.shadowPasses[d]=_,this.shadowMaps[d]=_.shadowMap}}_applyDefaultLights(){const{ambientLight:s,pointLights:d,directionalLights:_}=this;!s&&d.length===0&&_.length===0&&(this.ambientLight=new AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS),this.directionalLights.push(new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]),new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1])))}}class TypedArrayManager{constructor(s={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(s)}setOptions(s){Object.assign(this.opts,s)}allocate(s,d,{size:_=1,type:S,padding:T=0,copy:F=!1,initialize:M=!1,maxCount:P}){const H=S||s&&s.constructor||Float32Array,J=d*_+T;if(ArrayBuffer.isView(s)){if(J<=s.length)return s;if(J*s.BYTES_PER_ELEMENT<=s.buffer.byteLength)return new H(s.buffer,0,J)}let K=1/0;P&&(K=P*_+T);const z=this._allocate(H,J,M,K);return s&&F?z.set(s):M||z.fill(0,0,4),this._release(s),z}release(s){this._release(s)}_allocate(s,d,_,S){let T=Math.max(Math.ceil(d*this.opts.overAlloc),1);T>S&&(T=S);const F=this._pool,M=s.BYTES_PER_ELEMENT*T,P=F.findIndex(H=>H.byteLength>=M);if(P>=0){const H=new s(F.splice(P,1)[0],0,T);return _&&H.fill(0),H}return new s(T)}_release(s){if(!ArrayBuffer.isView(s))return;const d=this._pool,{buffer:_}=s,{byteLength:S}=_,T=d.findIndex(F=>F.byteLength>=S);T<0?d.push(_):(T>0||d.length<this.opts.poolSize)&&d.splice(T,0,_),d.length>this.opts.poolSize&&d.shift()}}const defaultTypedArrayManager=new TypedArrayManager;function createMat4$1(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function mod(f,s){const d=f%s;return d<0?s+d:d}function getCameraPosition(f){return[f[12],f[13],f[14]]}function getFrustumPlanes(f){return{left:getFrustumPlane(f[3]+f[0],f[7]+f[4],f[11]+f[8],f[15]+f[12]),right:getFrustumPlane(f[3]-f[0],f[7]-f[4],f[11]-f[8],f[15]-f[12]),bottom:getFrustumPlane(f[3]+f[1],f[7]+f[5],f[11]+f[9],f[15]+f[13]),top:getFrustumPlane(f[3]-f[1],f[7]-f[5],f[11]-f[9],f[15]-f[13]),near:getFrustumPlane(f[3]+f[2],f[7]+f[6],f[11]+f[10],f[15]+f[14]),far:getFrustumPlane(f[3]-f[2],f[7]-f[6],f[11]-f[10],f[15]-f[14])}}const scratchVector$2=new Vector3;function getFrustumPlane(f,s,d,_){scratchVector$2.set(f,s,d);const S=scratchVector$2.len();return{distance:_/S,normal:new Vector3(-f/S,-s/S,-d/S)}}function fp64LowPart(f){return f-Math.fround(f)}let scratchArray$1;function toDoublePrecisionArray(f,s){const{size:d=1,startIndex:_=0}=s,S=s.endIndex!==void 0?s.endIndex:f.length,T=(S-_)/d;scratchArray$1=defaultTypedArrayManager.allocate(scratchArray$1,T,{type:Float32Array,size:d*2});let F=_,M=0;for(;F<S;){for(let P=0;P<d;P++){const H=f[F++];scratchArray$1[M+P]=H,scratchArray$1[M+P+d]=fp64LowPart(H)}M+=d*2}return scratchArray$1.subarray(0,T*d*2)}function mergeBounds(f){let s=null,d=!1;for(const _ of f)_&&(s?(d||(s=[[s[0][0],s[0][1]],[s[1][0],s[1][1]]],d=!0),s[0][0]=Math.min(s[0][0],_[0][0]),s[0][1]=Math.min(s[0][1],_[0][1]),s[1][0]=Math.max(s[1][0],_[1][0]),s[1][1]=Math.max(s[1][1],_[1][1])):s=_);return s}const DEGREES_TO_RADIANS$4=Math.PI/180,IDENTITY=createMat4$1(),ZERO_VECTOR=[0,0,0],DEFAULT_DISTANCE_SCALES={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function createProjectionMatrix({width:f,height:s,orthographic:d,fovyRadians:_,focalDistance:S,padding:T,near:F,far:M}){const P=f/s,H=d?new Matrix4().orthographic({fovy:_,aspect:P,focalDistance:S,near:F,far:M}):new Matrix4().perspective({fovy:_,aspect:P,near:F,far:M});if(T){const{left:J=0,right:K=0,top:z=0,bottom:oe=0}=T,se=clamp$3((J+f-K)/2,0,f)-f/2,ae=clamp$3((z+s-oe)/2,0,s)-s/2;H[8]-=se*2/f,H[9]+=ae*2/s}return H}class Viewport{constructor(s={}){this._frustumPlanes={},this.id=s.id||this.constructor.displayName||"viewport",this.x=s.x||0,this.y=s.y||0,this.width=s.width||1,this.height=s.height||1,this.zoom=s.zoom||0,this.padding=s.padding,this.distanceScales=s.distanceScales||DEFAULT_DISTANCE_SCALES,this.focalDistance=s.focalDistance||1,this.position=s.position||ZERO_VECTOR,this.modelMatrix=s.modelMatrix||null;const{longitude:d,latitude:_}=s;this.isGeospatial=Number.isFinite(_)&&Number.isFinite(d),this._initProps(s),this._initMatrices(s),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?PROJECTION_MODE.WEB_MERCATOR:PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:PROJECTION_MODE.IDENTITY}equals(s){return s instanceof Viewport?this===s?!0:s.width===this.width&&s.height===this.height&&s.scale===this.scale&&equals$2(s.projectionMatrix,this.projectionMatrix)&&equals$2(s.viewMatrix,this.viewMatrix):!1}project(s,{topLeft:d=!0}={}){const _=this.projectPosition(s),S=worldToPixels$1(_,this.pixelProjectionMatrix),[T,F]=S,M=d?F:this.height-F;return s.length===2?[T,M]:[T,M,S[2]]}unproject(s,{topLeft:d=!0,targetZ:_}={}){const[S,T,F]=s,M=d?T:this.height-T,P=_&&_*this.distanceScales.unitsPerMeter[2],H=pixelsToWorld$1([S,M,F],this.pixelUnprojectionMatrix,P),[J,K,z]=this.unprojectPosition(H);return Number.isFinite(F)?[J,K,z]:Number.isFinite(_)?[J,K,_]:[J,K]}projectPosition(s){const[d,_]=this.projectFlat(s),S=(s[2]||0)*this.distanceScales.unitsPerMeter[2];return[d,_,S]}unprojectPosition(s){const[d,_]=this.unprojectFlat(s),S=(s[2]||0)*this.distanceScales.metersPerUnit[2];return[d,_,S]}projectFlat(s){if(this.isGeospatial){const d=lngLatToWorld$1(s);return d[1]=clamp$3(d[1],-318,830),d}return s}unprojectFlat(s){return this.isGeospatial?worldToLngLat$1(s):s}getBounds(s={}){const d={targetZ:s.z||0},_=this.unproject([0,0],d),S=this.unproject([this.width,0],d),T=this.unproject([0,this.height],d),F=this.unproject([this.width,this.height],d);return[Math.min(_[0],S[0],T[0],F[0]),Math.min(_[1],S[1],T[1],F[1]),Math.max(_[0],S[0],T[0],F[0]),Math.max(_[1],S[1],T[1],F[1])]}getDistanceScales(s){return s?getDistanceScales$2({longitude:s[0],latitude:s[1],highPrecision:!0}):this.distanceScales}containsPixel({x:s,y:d,width:_=1,height:S=1}){return s<this.x+this.width&&this.x<s+_&&d<this.y+this.height&&this.y<d+S}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,getFrustumPlanes(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(s,d){return null}_initProps(s){const d=s.longitude,_=s.latitude;this.isGeospatial&&(Number.isFinite(s.zoom)||(this.zoom=getMeterZoom({latitude:_})+Math.log2(this.focalDistance)),this.distanceScales=s.distanceScales||getDistanceScales$2({latitude:_,longitude:d}));const S=Math.pow(2,this.zoom);this.scale=S;const{position:T,modelMatrix:F}=s;let M=ZERO_VECTOR;if(T&&(M=F?new Matrix4(F).transformAsVector(T,[]):T),this.isGeospatial){const P=this.projectPosition([d,_,0]);this.center=new Vector3(M).scale(this.distanceScales.unitsPerMeter).add(P)}else this.center=this.projectPosition(M)}_initMatrices(s){const{viewMatrix:d=IDENTITY,projectionMatrix:_=null,orthographic:S=!1,fovyRadians:T,fovy:F=75,near:M=.1,far:P=1e3,padding:H=null,focalDistance:J=1}=s;this.viewMatrixUncentered=d,this.viewMatrix=new Matrix4().multiplyRight(d).translate(new Vector3(this.center).negate()),this.projectionMatrix=_||createProjectionMatrix({width:this.width,height:this.height,orthographic:S,fovyRadians:T||F*DEGREES_TO_RADIANS$4,focalDistance:J,padding:H,near:M,far:P});const K=createMat4$1();multiply$3(K,K,this.projectionMatrix),multiply$3(K,K,this.viewMatrix),this.viewProjectionMatrix=K,this.viewMatrixInverse=invert$2([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=getCameraPosition(this.viewMatrixInverse);const z=createMat4$1(),oe=createMat4$1();scale$5(z,z,[this.width/2,-this.height/2,1]),translate$2(z,z,[1,-1,0]),multiply$3(oe,z,this.viewProjectionMatrix),this.pixelProjectionMatrix=oe,this.pixelUnprojectionMatrix=invert$2(createMat4$1(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||defaultLogger.warn("Pixel project matrix not invertible")()}}Viewport.displayName="Viewport";let WebMercatorViewport$1=class n0 extends Viewport{constructor(s={}){const{latitude:d=0,longitude:_=0,zoom:S=0,pitch:T=0,bearing:F=0,nearZMultiplier:M=.1,farZMultiplier:P=1.01,nearZ:H,farZ:J,orthographic:K=!1,projectionMatrix:z,repeat:oe=!1,worldOffset:se=0,position:ae,padding:ge,legacyMeterSizes:pe=!1}=s;let{width:he,height:ve,altitude:be=1.5}=s;const Re=Math.pow(2,S);he=he||1,ve=ve||1;let Fe,ye=null;if(z)be=z[5]/2,Fe=altitudeToFovy$1(be);else{s.fovy?(Fe=s.fovy,be=fovyToAltitude$1(Fe)):Fe=altitudeToFovy$1(be);let It;if(ge){const{top:St=0,bottom:At=0}=ge;It=[0,clamp$3((St+ve-At)/2,0,ve)-ve/2]}ye=getProjectionParameters$1({width:he,height:ve,scale:Re,center:ae&&[0,0,ae[2]*unitsPerMeter(d)],offset:It,pitch:T,fovy:Fe,nearZMultiplier:M,farZMultiplier:P}),Number.isFinite(H)&&(ye.near=H),Number.isFinite(J)&&(ye.far=J)}let Ue=getViewMatrix$2({height:ve,pitch:T,bearing:F,scale:Re,altitude:be});se&&(Ue=new Matrix4().translate([512*se,0,0]).multiplyLeft(Ue)),super({...s,width:he,height:ve,viewMatrix:Ue,longitude:_,latitude:d,zoom:S,...ye,fovy:Fe,focalDistance:be}),this.latitude=d,this.longitude=_,this.zoom=S,this.pitch=T,this.bearing=F,this.altitude=be,this.fovy=Fe,this.orthographic=K,this._subViewports=oe?[]:null,this._pseudoMeters=pe,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const s=this.getBounds(),d=Math.floor((s[0]+180)/360),_=Math.ceil((s[2]-180)/360);for(let S=d;S<=_;S++){const T=S?new n0({...this,worldOffset:S}):this;this._subViewports.push(T)}}return this._subViewports}projectPosition(s){if(this._pseudoMeters)return super.projectPosition(s);const[d,_]=this.projectFlat(s),S=(s[2]||0)*unitsPerMeter(s[1]);return[d,_,S]}unprojectPosition(s){if(this._pseudoMeters)return super.unprojectPosition(s);const[d,_]=this.unprojectFlat(s),S=(s[2]||0)/unitsPerMeter(_);return[d,_,S]}addMetersToLngLat(s,d){return addMetersToLngLat(s,d)}panByPosition(s,d){const _=pixelsToWorld$1(d,this.pixelUnprojectionMatrix),S=this.projectFlat(s),T=add$7([],S,negate$3([],_)),F=add$7([],this.center,T),[M,P]=this.unprojectFlat(F);return{longitude:M,latitude:P}}getBounds(s={}){const d=getBounds$2(this,s.z||0);return[Math.min(d[0][0],d[1][0],d[2][0],d[3][0]),Math.min(d[0][1],d[1][1],d[2][1],d[3][1]),Math.max(d[0][0],d[1][0],d[2][0],d[3][0]),Math.max(d[0][1],d[1][1],d[2][1],d[3][1])]}fitBounds(s,d={}){const{width:_,height:S}=this,{longitude:T,latitude:F,zoom:M}=fitBounds$1({width:_,height:S,bounds:s,...d});return new n0({width:_,height:S,longitude:T,latitude:F,zoom:M})}};WebMercatorViewport$1.displayName="WebMercatorViewport";const DEFAULT_COORDINATE_ORIGIN=[0,0,0];function lngLatZToWorldPosition(f,s,d=!1){const _=s.projectPosition(f);if(d&&s instanceof WebMercatorViewport$1){const[S,T,F=0]=f,M=s.getDistanceScales([S,T]);_[2]=F*M.unitsPerMeter[2]}return _}function normalizeParameters(f){const{viewport:s,modelMatrix:d,coordinateOrigin:_}=f;let{coordinateSystem:S,fromCoordinateSystem:T,fromCoordinateOrigin:F}=f;return S===COORDINATE_SYSTEM.DEFAULT&&(S=s.isGeospatial?COORDINATE_SYSTEM.LNGLAT:COORDINATE_SYSTEM.CARTESIAN),T===void 0&&(T=S),F===void 0&&(F=_),{viewport:s,coordinateSystem:S,coordinateOrigin:_,modelMatrix:d,fromCoordinateSystem:T,fromCoordinateOrigin:F}}function getWorldPosition(f,{viewport:s,modelMatrix:d,coordinateSystem:_,coordinateOrigin:S,offsetMode:T}){let[F,M,P=0]=f;switch(d&&([F,M,P]=transformMat4$1([],[F,M,P,1],d)),_){case COORDINATE_SYSTEM.LNGLAT:return lngLatZToWorldPosition([F,M,P],s,T);case COORDINATE_SYSTEM.LNGLAT_OFFSETS:return lngLatZToWorldPosition([F+S[0],M+S[1],P+(S[2]||0)],s,T);case COORDINATE_SYSTEM.METER_OFFSETS:return lngLatZToWorldPosition(addMetersToLngLat(S,[F,M,P]),s,T);case COORDINATE_SYSTEM.CARTESIAN:default:return s.isGeospatial?[F+S[0],M+S[1],P+S[2]]:s.projectPosition([F,M,P])}}function projectPosition(f,s){const{viewport:d,coordinateSystem:_,coordinateOrigin:S,modelMatrix:T,fromCoordinateSystem:F,fromCoordinateOrigin:M}=normalizeParameters(s),{autoOffset:P=!0}=s,{geospatialOrigin:H=DEFAULT_COORDINATE_ORIGIN,shaderCoordinateOrigin:J=DEFAULT_COORDINATE_ORIGIN,offsetMode:K=!1}=P?getOffsetOrigin(d,_,S):{},z=getWorldPosition(f,{viewport:d,modelMatrix:T,coordinateSystem:F,coordinateOrigin:M,offsetMode:K});if(K){const oe=d.projectPosition(H||J);sub(z,z,oe)}return z}let channelHandles=1,animationHandles=1;class Timeline{constructor(){Bt(this,"time",0);Bt(this,"channels",new Map);Bt(this,"animations",new Map);Bt(this,"playing",!1);Bt(this,"lastEngineTime",-1)}addChannel(s){const{delay:d=0,duration:_=Number.POSITIVE_INFINITY,rate:S=1,repeat:T=1}=s,F=channelHandles++,M={time:0,delay:d,duration:_,rate:S,repeat:T};return this._setChannelTime(M,this.time),this.channels.set(F,M),F}removeChannel(s){this.channels.delete(s);for(const[d,_]of this.animations)_.channel===s&&this.detachAnimation(d)}isFinished(s){const d=this.channels.get(s);return d===void 0?!1:this.time>=d.delay+d.duration*d.repeat}getTime(s){if(s===void 0)return this.time;const d=this.channels.get(s);return d===void 0?-1:d.time}setTime(s){this.time=Math.max(0,s);const d=this.channels.values();for(const S of d)this._setChannelTime(S,this.time);const _=this.animations.values();for(const S of _){const{animation:T,channel:F}=S;T.setTime(this.getTime(F))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(s,d){const _=animationHandles++;return this.animations.set(_,{animation:s,channel:d}),s.setTime(this.getTime(d)),_}detachAnimation(s){this.animations.delete(s)}update(s){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=s),this.setTime(this.time+(s-this.lastEngineTime)),this.lastEngineTime=s)}_setChannelTime(s,d){const _=d-s.delay,S=s.duration*s.repeat;_>=S?s.time=s.duration*s.rate:(s.time=Math.max(0,_)%s.duration,s.time*=s.rate)}}let statIdCounter=0;const DEFAULT_ANIMATION_LOOP_PROPS={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:f=>console.error(f),stats:luma.stats.get(`animation-loop-${statIdCounter++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class AnimationLoop{constructor(s){Bt(this,"device",null);Bt(this,"canvas",null);Bt(this,"props");Bt(this,"animationProps",null);Bt(this,"timeline",null);Bt(this,"stats");Bt(this,"cpuTime");Bt(this,"gpuTime");Bt(this,"frameRate");Bt(this,"display");Bt(this,"needsRedraw","initialized");Bt(this,"_initialized",!1);Bt(this,"_running",!1);Bt(this,"_animationFrameId",null);Bt(this,"_nextFramePromise",null);Bt(this,"_resolveNextFrame",null);Bt(this,"_cpuStartTime",0);if(this.props={...DEFAULT_ANIMATION_LOOP_PROPS,...s},s=this.props,!s.device)throw new Error("No device provided");const{useDevicePixels:d=!0}=this.props;this.stats=s.stats||new Stats({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:s.autoResizeViewport,autoResizeDrawingBuffer:s.autoResizeDrawingBuffer,useDevicePixels:d}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setNeedsRedraw(s){return this.needsRedraw=this.needsRedraw||s,this}setProps(s){return"autoResizeViewport"in s&&(this.props.autoResizeViewport=s.autoResizeViewport||!1),"autoResizeDrawingBuffer"in s&&(this.props.autoResizeDrawingBuffer=s.autoResizeDrawingBuffer||!1),"useDevicePixels"in s&&(this.props.useDevicePixels=s.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let s;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(s!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(s){const d=s instanceof Error?s:new Error("Unknown error");throw this.props.onError(d),d}}stop(){return this._running&&(this.animationProps&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var s;return(s=this.device)!=null&&s.isLost?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(s){return this.timeline=s,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(s=>{this._resolveNextFrame=s})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(s){this.display&&(this.display.destroy(),this.display.animationLoop=null),s&&(s.animationLoop=this),this.display=s}_requestAnimationFrame(){this._running&&(this._animationFrameId=requestAnimationFrame$1(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(cancelAnimationFrame$1(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(s){if(this.display){this.display._renderFrame(s);return}this.props.onRender(this._getAnimationProps()),this.device.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){var s,d;if(!this.device)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:(d=(s=this.device)==null?void 0:s.canvasContext)==null?void 0:d.canvas,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:s,height:d,aspect:_}=this._getSizeAndAspect();(s!==this.animationProps.width||d!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),_!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=s,this.animationProps.height=d,this.animationProps.aspect=_,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){var s;if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=((s=this.device.canvasContext)==null?void 0:s.canvas)||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const s=document.createElement("div");document.body.appendChild(s),s.style.position="relative";const d=document.createElement("div");d.style.position="absolute",d.style.left="10px",d.style.bottom="10px",d.style.width="300px",d.style.background="white",this.canvas instanceof HTMLCanvasElement&&s.appendChild(this.canvas),s.appendChild(d);const _=this.props.onAddHTML(d);_&&(d.innerHTML=_)}}_getSizeAndAspect(){var T,F,M,P;if(!this.device)return{width:1,height:1,aspect:1};const[s,d]=((F=(T=this.device)==null?void 0:T.canvasContext)==null?void 0:F.getPixelSize())||[1,1];let _=1;const S=(P=(M=this.device)==null?void 0:M.canvasContext)==null?void 0:P.canvas;return S&&S.clientHeight?_=S.clientWidth/S.clientHeight:s>0&&d>0&&(_=s/d),{width:s,height:d,aspect:_}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){var s,d;this.props.autoResizeDrawingBuffer&&((d=(s=this.device)==null?void 0:s.canvasContext)==null||d.resize({useDevicePixels:this.props.useDevicePixels}))}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(s){s instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[s.offsetX,s.offsetY])}_onMouseleave(s){this._getAnimationProps()._mousePosition=null}}class GPUGeometry{constructor(s){Bt(this,"id");Bt(this,"userData",{});Bt(this,"topology");Bt(this,"bufferLayout",[]);Bt(this,"vertexCount");Bt(this,"indices");Bt(this,"attributes");this.id=s.id||uid("geometry"),this.topology=s.topology,this.indices=s.indices||null,this.attributes=s.attributes,this.vertexCount=s.vertexCount,this.bufferLayout=s.bufferLayout||[],this.indices&&assert$5(this.indices.usage===Buffer$1.INDEX)}destroy(){var s;(s=this.indices)==null||s.destroy();for(const d of Object.values(this.attributes))d.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices}_calculateVertexCount(s){return s.byteLength/12}}function makeGPUGeometry(f,s){if(s instanceof GPUGeometry)return s;const d=getIndexBufferFromGeometry(f,s),{attributes:_,bufferLayout:S}=getAttributeBuffersFromGeometry(f,s);return new GPUGeometry({topology:s.topology||"triangle-list",bufferLayout:S,vertexCount:s.vertexCount,indices:d,attributes:_})}function getIndexBufferFromGeometry(f,s){if(!s.indices)return;const d=s.indices.value;return f.createBuffer({usage:Buffer$1.INDEX,data:d})}function getAttributeBuffersFromGeometry(f,s){const d=[],_={};for(const[T,F]of Object.entries(s.attributes)){let M=T;switch(T){case"POSITION":M="positions";break;case"NORMAL":M="normals";break;case"TEXCOORD_0":M="texCoords";break;case"COLOR_0":M="colors";break}_[M]=f.createBuffer({data:F.value,id:`${T}-buffer`});const{value:P,size:H,normalized:J}=F;d.push({name:M,format:getVertexFormatFromAttribute(P,H,J)})}const S=s._calculateVertexCount(s.attributes,s.indices);return{attributes:_,bufferLayout:d,vertexCount:S}}class ShaderInputs{constructor(s){Bt(this,"modules");Bt(this,"moduleUniforms");Bt(this,"moduleBindings");Bt(this,"moduleUniformsChanged");const d=resolveModules(Object.values(s).filter(_=>_.dependencies));for(const _ of d)s[_.name]=_;log.log(1,"Creating ShaderInputs with modules",Object.keys(s))(),this.modules=s,this.moduleUniforms={},this.moduleBindings={};for(const[_,S]of Object.entries(s)){const T=_;this.moduleUniforms[T]=S.defaultUniforms||{},this.moduleBindings[T]={}}}destroy(){}setProps(s){var d;for(const _ of Object.keys(s)){const S=_,T=s[S],F=this.modules[S];if(!F){log.warn(`Module ${_} not found`)();continue}const M=this.moduleUniforms[S],P=this.moduleBindings[S],H=((d=F.getUniforms)==null?void 0:d.call(F,T,M))||T,{uniforms:J,bindings:K}=splitUniformsAndBindings(H);this.moduleUniforms[S]={...M,...J},this.moduleBindings[S]={...P,...K}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindings(){const s={};for(const d of Object.values(this.moduleBindings))Object.assign(s,d);return s}getDebugTable(){var d;const s={};for(const[_,S]of Object.entries(this.moduleUniforms))for(const[T,F]of Object.entries(S))s[`${_}.${T}`]={type:(d=this.modules[_].uniformTypes)==null?void 0:d[T],value:String(F)};return s}}const fy=class fy{constructor(s){Bt(this,"device");Bt(this,"_hashCounter",0);Bt(this,"_hashes",{});Bt(this,"_renderPipelineCache",{});Bt(this,"_computePipelineCache",{});this.device=s}static getDefaultPipelineFactory(s){return s._lumaData.defaultPipelineFactory=s._lumaData.defaultPipelineFactory||new fy(s),s._lumaData.defaultPipelineFactory}createRenderPipeline(s){const d={...RenderPipeline.defaultProps,...s},_=this._hashRenderPipeline(d);if(!this._renderPipelineCache[_]){const S=this.device.createRenderPipeline({...d,id:d.id?`${d.id}-cached`:void 0});S.hash=_,this._renderPipelineCache[_]={pipeline:S,useCount:0}}return this._renderPipelineCache[_].useCount++,this._renderPipelineCache[_].pipeline}createComputePipeline(s){const d={...ComputePipeline.defaultProps,...s},_=this._hashComputePipeline(d);if(!this._computePipelineCache[_]){const S=this.device.createComputePipeline({...d,id:d.id?`${d.id}-cached`:void 0});S.hash=_,this._computePipelineCache[_]={pipeline:S,useCount:0}}return this._computePipelineCache[_].useCount++,this._computePipelineCache[_].pipeline}release(s){const d=s.hash,_=s instanceof ComputePipeline?this._computePipelineCache:this._renderPipelineCache;_[d].useCount--,_[d].useCount===0&&(_[d].pipeline.destroy(),delete _[d])}_hashComputePipeline(s){return`${this._getHash(s.shader.source)}`}_hashRenderPipeline(s){const d=this._getHash(s.vs.source),_=s.fs?this._getHash(s.fs.source):0,S="-",T=this._getHash(JSON.stringify(s.bufferLayout));switch(this.device.type){case"webgl":return`${d}/${_}V${S}BL${T}`;default:const F=this._getHash(JSON.stringify(s.parameters));return`${d}/${_}V${S}T${s.topology}P${F}BL${T}`}}_getHash(s){return this._hashes[s]===void 0&&(this._hashes[s]=this._hashCounter++),this._hashes[s]}};Bt(fy,"defaultProps",{...RenderPipeline.defaultProps});let PipelineFactory=fy;const dy=class dy{constructor(s){Bt(this,"device");Bt(this,"_cache",{});this.device=s}static getDefaultShaderFactory(s){var d;return(d=s._lumaData).defaultShaderFactory||(d.defaultShaderFactory=new dy(s)),s._lumaData.defaultShaderFactory}createShader(s){const d=this._hashShader(s);let _=this._cache[d];if(!_){const S=this.device.createShader({...s,id:s.id?`${s.id}-cached`:void 0});this._cache[d]=_={shader:S,useCount:0}}return _.useCount++,_.shader}release(s){const d=this._hashShader(s),_=this._cache[d];_&&(_.useCount--,_.useCount===0&&(delete this._cache[d],_.shader.destroy()))}_hashShader(s){return`${s.stage}:${s.source}`}};Bt(dy,"defaultProps",{...Shader.defaultProps});let ShaderFactory=dy;function getDebugTableForShaderLayout(f,s){var S;const d={},_="Values";if(f.attributes.length===0&&!((S=f.varyings)!=null&&S.length))return{"No attributes or varyings":{[_]:"N/A"}};for(const T of f.attributes)if(T){const F=`${T.location} ${T.name}: ${T.type}`;d[`in ${F}`]={[_]:T.stepMode||"vertex"}}for(const T of f.varyings||[]){const F=`${T.location} ${T.name}`;d[`out ${F}`]={[_]:JSON.stringify(T.accessor)}}return d}let canvas=null,ctx=null;function debugFramebuffer(f,{id:s,minimap:d,opaque:_,top:S="0",left:T="0",rgbaScale:F=1}){canvas||(canvas=document.createElement("canvas"),canvas.id=s,canvas.title=s,canvas.style.zIndex="100",canvas.style.position="absolute",canvas.style.top=S,canvas.style.left=T,canvas.style.border="blue 1px solid",canvas.style.transform="scaleY(-1)",document.body.appendChild(canvas),ctx=canvas.getContext("2d")),(canvas.width!==f.width||canvas.height!==f.height)&&(canvas.width=f.width/2,canvas.height=f.height/2,canvas.style.width="400px",canvas.style.height="400px");const M=f.device.readPixelsToArrayWebGL(f),P=ctx.createImageData(f.width,f.height),H=0;for(let J=0;J<M.length;J+=4)P.data[H+J+0]=M[J+0]*F,P.data[H+J+1]=M[J+1]*F,P.data[H+J+2]=M[J+2]*F,P.data[H+J+3]=_?255:M[J+3]*F;ctx.putImageData(P,0,0)}const LOG_DRAW_PRIORITY=2,LOG_DRAW_TIMEOUT=1e4,py=class py{constructor(s,d){Bt(this,"device");Bt(this,"id");Bt(this,"source");Bt(this,"vs");Bt(this,"fs");Bt(this,"pipelineFactory");Bt(this,"shaderFactory");Bt(this,"userData",{});Bt(this,"parameters");Bt(this,"topology");Bt(this,"bufferLayout");Bt(this,"isInstanced");Bt(this,"instanceCount",0);Bt(this,"vertexCount");Bt(this,"indexBuffer",null);Bt(this,"bufferAttributes",{});Bt(this,"constantAttributes",{});Bt(this,"bindings",{});Bt(this,"uniforms",{});Bt(this,"vertexArray");Bt(this,"transformFeedback",null);Bt(this,"pipeline");Bt(this,"shaderInputs");Bt(this,"_uniformStore");Bt(this,"_attributeInfos",{});Bt(this,"_gpuGeometry",null);Bt(this,"_getModuleUniforms");Bt(this,"props");Bt(this,"_pipelineNeedsUpdate","newly created");Bt(this,"_needsRedraw","initializing");Bt(this,"_destroyed",!1);Bt(this,"_lastDrawTimestamp",-1);Bt(this,"_lastLogTime",0);Bt(this,"_logOpen",!1);Bt(this,"_drawCount",0);var M,P,H,J;this.props={...py.defaultProps,...d},d=this.props,this.id=d.id||uid("model"),this.device=s,Object.assign(this.userData,d.userData);const _=Object.fromEntries(((M=this.props.modules)==null?void 0:M.map(K=>[K.name,K]))||[]);this.setShaderInputs(d.shaderInputs||new ShaderInputs(_));const S=getPlatformInfo(s),T=(((P=this.props.modules)==null?void 0:P.length)>0?this.props.modules:(H=this.shaderInputs)==null?void 0:H.getModules())||[];if(this.device.type==="webgpu"&&this.props.source){(J=this.props).shaderLayout||(J.shaderLayout=getShaderLayoutFromWGSL(this.props.source));const{source:K,getUniforms:z}=this.props.shaderAssembler.assembleShader({platformInfo:S,...this.props,modules:T});this.source=K,this._getModuleUniforms=z}else{const{vs:K,fs:z,getUniforms:oe}=this.props.shaderAssembler.assembleShaderPair({platformInfo:S,...this.props,modules:T});this.vs=K,this.fs=z,this._getModuleUniforms=oe}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,d.geometry&&this.setGeometry(d.geometry),this.pipelineFactory=d.pipelineFactory||PipelineFactory.getDefaultPipelineFactory(this.device),this.shaderFactory=d.shaderFactory||ShaderFactory.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=s.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in d&&(this.isInstanced=d.isInstanced),d.instanceCount&&this.setInstanceCount(d.instanceCount),d.vertexCount&&this.setVertexCount(d.vertexCount),d.indexBuffer&&this.setIndexBuffer(d.indexBuffer),d.attributes&&this.setAttributes(d.attributes),d.constantAttributes&&this.setConstantAttributes(d.constantAttributes),d.bindings&&this.setBindings(d.bindings),d.uniforms&&this.setUniforms(d.uniforms),d.moduleSettings&&this.updateModuleSettings(d.moduleSettings),d.transformFeedback&&(this.transformFeedback=d.transformFeedback),Object.seal(this)}destroy(){var s;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),(s=this._gpuGeometry)==null||s.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const s=this._needsRedraw;return this._needsRedraw=!1,s}setNeedsRedraw(s){this._needsRedraw||(this._needsRedraw=s)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(s){this.predraw();let d;try{this._logDrawCallStart(),this.pipeline=this._updatePipeline(),this.pipeline.setBindings(this.bindings,{disableWarnings:this.props.disableWarnings}),isObjectEmpty$3(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:_}=this.vertexArray,S=_?_.byteLength/(_.indexType==="uint32"?4:2):void 0;d=this.pipeline.draw({renderPass:s,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:S,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{this._logDrawCallEnd()}return this._logFramebuffer(s),d?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",d}setGeometry(s){var _;(_=this._gpuGeometry)==null||_.destroy();const d=s&&makeGPUGeometry(this.device,s);d&&(this.setTopology(d.topology||"triangle-list"),this.bufferLayout=mergeBufferLayouts(d.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(d)),this._gpuGeometry=d}setTopology(s){s!==this.topology&&(this.topology=s,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(s){this.bufferLayout=this._gpuGeometry?mergeBufferLayouts(s,this._gpuGeometry.bufferLayout):s,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(s){deepEqual$1(s,this.parameters,2)||(this.parameters=s,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(s){this.instanceCount=s,this.isInstanced===void 0&&s>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(s){this.vertexCount=s,this.setNeedsRedraw("vertexCount")}setShaderInputs(s){this.shaderInputs=s,this._uniformStore=new UniformStore(this.shaderInputs.modules);for(const d of Object.keys(this.shaderInputs.modules)){const _=this._uniformStore.getManagedUniformBuffer(this.device,d);this.bindings[`${d}Uniforms`]=_}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindings()),this.setNeedsRedraw("shaderInputs")}setBindings(s){Object.assign(this.bindings,s),this.setNeedsRedraw("bindings")}setTransformFeedback(s){this.transformFeedback=s,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(s){this.vertexArray.setIndexBuffer(s),this.setNeedsRedraw("indexBuffer")}setAttributes(s,d){s.indices&&log.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)();for(const[_,S]of Object.entries(s)){const T=this.bufferLayout.find(P=>getAttributeNames(P).includes(_));if(!T){log.warn(`Model(${this.id}): Missing layout for buffer "${_}".`)();continue}const F=getAttributeNames(T);let M=!1;for(const P of F){const H=this._attributeInfos[P];H&&(this.vertexArray.setBuffer(H.location,S),M=!0)}!M&&!((d==null?void 0:d.disableWarnings)??this.props.disableWarnings)&&log.warn(`Model(${this.id}): Ignoring buffer "${S.id}" for unknown attribute "${_}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(s,d){for(const[_,S]of Object.entries(s)){const T=this._attributeInfos[_];T?this.vertexArray.setConstantWebGL(T.location,S):((d==null?void 0:d.disableWarnings)??this.props.disableWarnings)||log.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${_}"`)()}this.setNeedsRedraw("constants")}setUniforms(s){isObjectEmpty$3(s)||(this.pipeline.setUniformsWebGL(s),Object.assign(this.uniforms,s)),this.setNeedsRedraw("uniforms")}updateModuleSettings(s){const{bindings:d,uniforms:_}=splitUniformsAndBindings(this._getModuleUniforms(s));Object.assign(this.bindings,d),Object.assign(this.uniforms,_),this.setNeedsRedraw("moduleSettings")}_getBindingsUpdateTimestamp(){let s=0;for(const d of Object.values(this.bindings))d instanceof TextureView?s=Math.max(s,d.texture.updateTimestamp):d instanceof Buffer$1||d instanceof Texture?s=Math.max(s,d.updateTimestamp):d instanceof Sampler||(s=Math.max(s,d.buffer.updateTimestamp));return s}_setGeometryAttributes(s){const d={...s.attributes};for(const[_]of Object.entries(d))!this.pipeline.shaderLayout.attributes.find(S=>S.name===_)&&_!=="positions"&&delete d[_];this.vertexCount=s.vertexCount,this.setIndexBuffer(s.indices||null),this.setAttributes(s.attributes,{disableWarnings:!0}),this.setAttributes(d,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(s){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=s),this.setNeedsRedraw(s)}_updatePipeline(){if(this._pipelineNeedsUpdate){let s=null,d=null;this.pipeline&&(log.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),s=this.pipeline.vs,d=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const _=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debug:this.props.debugShaders});let S=null;this.source?S=_:this.fs&&(S=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debug:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,vs:_,fs:S}),this._attributeInfos=getAttributeInfosFromLayouts(this.pipeline.shaderLayout,this.bufferLayout),s&&this.shaderFactory.release(s),d&&this.shaderFactory.release(d)}return this.pipeline}_logDrawCallStart(){const s=log.level>3?0:LOG_DRAW_TIMEOUT;log.level<2||Date.now()-this._lastLogTime<s||(this._lastLogTime=Date.now(),this._logOpen=!0,log.group(LOG_DRAW_PRIORITY,`>>> DRAWING MODEL ${this.id}`,{collapsed:log.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const s=getDebugTableForShaderLayout(this.pipeline.shaderLayout,this.id);log.table(LOG_DRAW_PRIORITY,s)();const d=this.shaderInputs.getDebugTable();for(const[S,T]of Object.entries(this.uniforms))d[S]={value:T};log.table(LOG_DRAW_PRIORITY,d)();const _=this._getAttributeDebugTable();log.table(LOG_DRAW_PRIORITY,this._attributeInfos)(),log.table(LOG_DRAW_PRIORITY,_)(),log.groupEnd(LOG_DRAW_PRIORITY)(),this._logOpen=!1}}_logFramebuffer(s){const d=log.get("framebuffer");if(this._drawCount++,!d||this._drawCount++>3&&this._drawCount%60)return;const _=s.props.framebuffer;_&&debugFramebuffer(_,{id:_.id,minimap:!0})}_getAttributeDebugTable(){const s={};for(const[d,_]of Object.entries(this._attributeInfos))s[_.location]={name:d,type:_.shaderType,values:this._getBufferOrConstantValues(this.vertexArray.attributes[_.location],_.bufferDataType)};if(this.vertexArray.indexBuffer){const{indexBuffer:d}=this.vertexArray,_=d.indexType==="uint32"?new Uint32Array(d.debugData):new Uint16Array(d.debugData);s.indices={name:"indices",type:d.indexType,values:_.toString()}}return s}_getBufferOrConstantValues(s,d){const _=getTypedArrayFromDataType(d);return(s instanceof Buffer$1?new _(s.debugData):s).toString()}};Bt(py,"defaultProps",{...RenderPipeline.defaultProps,source:null,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:ShaderAssembler.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});let Model=py;function mergeBufferLayouts(f,s){const d=[...f];for(const _ of s){const S=d.findIndex(T=>T.name===_.name);S<0?d.push(_):d[S]=_}return d}function getPlatformInfo(f){return{type:f.type,shaderLanguage:f.info.shadingLanguage,shaderLanguageVersion:f.info.shadingLanguageVersion,gpu:f.info.gpu,features:f.features}}function getAttributeNames(f){var s;return f.attributes?(s=f.attributes)==null?void 0:s.map(d=>d.attribute):[f.name]}class BufferTransform{constructor(s,d=Model.defaultProps){Bt(this,"device");Bt(this,"model");Bt(this,"transformFeedback");assert$5(BufferTransform.isSupported(s),"BufferTransform not yet implemented on WebGPU"),this.device=s,this.model=new Model(this.device,{id:d.id||"buffer-transform-model",fs:d.fs||getPassthroughFS(),topology:d.topology||"point-list",...d}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:d.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}static isSupported(s){var d;return((d=s==null?void 0:s.info)==null?void 0:d.type)==="webgl"}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(s){const d=this.device.beginRenderPass(s);this.model.draw(d),d.end()}update(...s){console.warn("TextureTransform#update() not implemented")}getBuffer(s){return this.transformFeedback.getBuffer(s)}readAsync(s){const d=this.getBuffer(s);if(d instanceof Buffer$1)return d.readAsync();const{buffer:_,byteOffset:S=0,byteLength:T=_.byteLength}=d;return _.readAsync(S,T)}}const FS_OUTPUT_VARIABLE="transform_output";class TextureTransform{constructor(s,d){Bt(this,"device");Bt(this,"model");Bt(this,"sampler");Bt(this,"currentIndex",0);Bt(this,"samplerTextureMap",null);Bt(this,"bindings",[]);Bt(this,"resources",{});this.device=s,this.sampler=s.createSampler({addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",minFilter:"nearest",magFilter:"nearest",mipmapFilter:"nearest"}),this.model=new Model(this.device,{id:d.id||"texture-transform-model",fs:d.fs||getPassthroughFS({input:d.targetTextureVarying,inputChannels:d.targetTextureChannels,output:FS_OUTPUT_VARIABLE}),vertexCount:d.vertexCount,...d}),this._initialize(d),Object.seal(this)}destroy(){}delete(){this.destroy()}run(s){const{framebuffer:d}=this.bindings[this.currentIndex],_=this.device.beginRenderPass({framebuffer:d,...s});this.model.draw(_),_.end()}update(...s){console.warn("TextureTransform#update() not implemented")}getData({packed:s=!1}={}){throw new Error("getData() not implemented")}getTargetTexture(){const{targetTexture:s}=this.bindings[this.currentIndex];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}_initialize(s){this._updateBindings(s)}_updateBindings(s){this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],s)}_updateBinding(s,{sourceBuffers:d,sourceTextures:_,targetTexture:S}){if(s||(s={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(s.sourceTextures,_),Object.assign(s.sourceBuffers,d),S){s.targetTexture=S;const{width:T,height:F}=S;s.framebuffer&&s.framebuffer.destroy(),s.framebuffer=this.device.createFramebuffer({id:"transform-framebuffer",width:T,height:F,colorAttachments:[S]}),s.framebuffer.resize({width:T,height:F})}return s}_setSourceTextureParameters(){const s=this.currentIndex,{sourceTextures:d}=this.bindings[s];for(const _ in d)d[_].sampler=this.sampler}}let Geometry$1=class{constructor(s){Bt(this,"id");Bt(this,"topology");Bt(this,"vertexCount");Bt(this,"indices");Bt(this,"attributes");Bt(this,"userData",{});const{attributes:d={},indices:_=null,vertexCount:S=null}=s;this.id=s.id||uid("geometry"),this.topology=s.topology,_&&(this.indices=ArrayBuffer.isView(_)?{value:_,size:1}:_),this.attributes={};for(const[T,F]of Object.entries(d)){const M=ArrayBuffer.isView(F)?{value:F}:F;assert$5(ArrayBuffer.isView(M.value),`${this._print(T)}: must be typed array or object with value as typed array`),(T==="POSITION"||T==="positions")&&!M.size&&(M.size=3),T==="indices"?(assert$5(!this.indices),this.indices=M):this.attributes[T]=M}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=S||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(s){return`Geometry ${this.id} attribute ${s}`}_setAttributes(s,d){return this}_calculateVertexCount(s,d){if(d)return d.value.length;let _=1/0;for(const S of Object.values(s)){const{value:T,size:F,constant:M}=S;!M&&T&&F>=1&&(_=Math.min(_,T.length/F))}return assert$5(Number.isFinite(_)),_}};const PICKING_BLENDING={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class PickLayersPass extends LayersPass{constructor(){super(...arguments),this._colorEncoderState=null}render(s){return"pickingFBO"in s?this._drawPickingBuffer(s):super.render(s)}_drawPickingBuffer({layers:s,layerFilter:d,views:_,viewports:S,onViewportActive:T,pickingFBO:F,deviceRect:{x:M,y:P,width:H,height:J},cullRect:K,effects:z,pass:oe="picking",pickZ:se,moduleParameters:ae}){this.pickZ=se;const ge=this._resetColorEncoder(se),pe=[M,P,H,J],he=super.render({target:F,layers:s,layerFilter:d,views:_,viewports:S,onViewportActive:T,cullRect:K,effects:z==null?void 0:z.filter(be=>be.useInPicking),pass:oe,isPicking:!0,moduleParameters:ae,clearColor:[0,0,0,0],colorMask:15,scissorRect:pe});return this._colorEncoderState=null,{decodePickingColor:ge&&decodeColor.bind(null,ge),stats:he}}shouldDrawLayer(s){const{pickable:d,operation:_}=s.props;return d&&_.includes("draw")||_.includes("terrain")||_.includes("mask")}getModuleParameters(){return{picking:{isActive:1,isAttribute:this.pickZ},lightSources:{}}}getLayerParameters(s,d,_){const S={depthMask:!0,depthTest:!0,depthRange:[0,1],...s.props.parameters},{pickable:T,operation:F}=s.props;return!this._colorEncoderState||F.includes("terrain")?S.blend=!1:T&&F.includes("draw")&&(Object.assign(S,PICKING_BLENDING),S.blend=!0,S.blendColor=encodeColor(this._colorEncoderState,s,_)),S}_resetColorEncoder(s){return this._colorEncoderState=s?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function encodeColor(f,s,d){const{byLayer:_,byAlpha:S}=f;let T,F=_.get(s);return F?(F.viewports.push(d),T=F.a):(T=_.size+1,T<=255?(F={a:T,layer:s,viewports:[d]},_.set(s,F),S[T]=F):(defaultLogger.warn("Too many pickable layers, only picking the first 255")(),T=0)),[0,0,0,T/255]}function decodeColor(f,s){const d=f.byAlpha[s[3]];return d&&{pickedLayer:d.layer,pickedViewports:d.viewports,pickedObjectIndex:d.layer.decodePickingColor(s)}}const LIFECYCLE={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},COMPONENT_SYMBOL=Symbol.for("component"),PROP_TYPES_SYMBOL=Symbol.for("propTypes"),DEPRECATED_PROPS_SYMBOL=Symbol.for("deprecatedProps"),ASYNC_DEFAULTS_SYMBOL=Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL_SYMBOL=Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED_SYMBOL=Symbol.for("asyncPropResolved");function flatten$1(f,s=()=>!0){return Array.isArray(f)?flattenArray(f,s,[]):s(f)?[f]:[]}function flattenArray(f,s,d){let _=-1;for(;++_<f.length;){const S=f[_];Array.isArray(S)?flattenArray(S,s,d):s(S)&&d.push(S)}return d}function fillArray({target:f,source:s,start:d=0,count:_=1}){const S=s.length,T=_*S;let F=0;for(let M=d;F<S;F++)f[M++]=s[F];for(;F<T;)F<T-F?(f.copyWithin(d+F,d,d+F),F*=2):(f.copyWithin(d+F,d,d+T-F),F=T);return f}class Resource{constructor(s,d,_){this._loadCount=0,this._subscribers=new Set,this.id=s,this.context=_,this.setData(d)}subscribe(s){this._subscribers.add(s)}unsubscribe(s){this._subscribers.delete(s)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(s,d){if(s===this._data&&!d)return;this._data=s;const _=++this._loadCount;let S=s;typeof s=="string"&&(S=load$3(s)),S instanceof Promise?(this.isLoaded=!1,this._loader=S.then(T=>{this._loadCount===_&&(this.isLoaded=!0,this._error=void 0,this._content=T)}).catch(T=>{this._loadCount===_&&(this.isLoaded=!0,this._error=T||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=s);for(const T of this._subscribers)T.onChange(this.getData())}}class ResourceManager{constructor(s){var d;this.protocol=s.protocol||"resource://",this._context={device:s.device,gl:(d=s.device)==null?void 0:d.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(s){return s.startsWith(this.protocol)?!0:s in this._resources}add({resourceId:s,data:d,forceUpdate:_=!1,persistent:S=!0}){let T=this._resources[s];T?T.setData(d,_):(T=new Resource(s,d,this._context),this._resources[s]=T),T.persistent=S}remove(s){const d=this._resources[s];d&&(d.delete(),delete this._resources[s])}unsubscribe({consumerId:s}){const d=this._consumers[s];if(d){for(const _ in d){const S=d[_],T=this._resources[S.resourceId];T&&T.unsubscribe(S)}delete this._consumers[s],this.prune()}}subscribe({resourceId:s,onChange:d,consumerId:_,requestId:S="default"}){const{_resources:T,protocol:F}=this;s.startsWith(F)&&(s=s.replace(F,""),T[s]||this.add({resourceId:s,data:null,persistent:!1}));const M=T[s];if(this._track(_,S,M,d),M)return M.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const s in this._resources)this._resources[s].delete()}_track(s,d,_,S){const T=this._consumers,F=T[s]=T[s]||{};let M=F[d];const P=M&&M.resourceId&&this._resources[M.resourceId];P&&(P.unsubscribe(M),this.prune()),_&&(M?(M.onChange=S,M.resourceId=_.id):M={onChange:S,resourceId:_.id},F[d]=M,_.subscribe(M))}_prune(){this._pruneRequest=null;for(const s of Object.keys(this._resources)){const d=this._resources[s];!d.persistent&&!d.inUse()&&(d.delete(),delete this._resources[s])}}}const TRACE_SET_LAYERS="layerManager.setLayers",TRACE_ACTIVATE_VIEWPORT="layerManager.activateViewport";class LayerManager{constructor(s,d){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=M=>{debug(TRACE_ACTIVATE_VIEWPORT,this,M),M&&(this.context.viewport=M)};const{deck:_,stats:S,viewport:T,timeline:F}=d||{};this.layers=[],this.resourceManager=new ResourceManager({device:s,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:s,gl:s==null?void 0:s.gl,deck:_,shaderAssembler:getShaderAssembler(),defaultShaderModules:[],renderPass:void 0,stats:S||new Stats({id:"deck.gl"}),viewport:T||new Viewport({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:F||new Timeline,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const s of this.layers)this._finalizeLayer(s)}needsRedraw(s={clearRedrawFlags:!1}){let d=this._needsRedraw;s.clearRedrawFlags&&(this._needsRedraw=!1);for(const _ of this.layers){const S=_.getNeedsRedraw(s);d=d||S}return d}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(s){this._needsRedraw=this._needsRedraw||s}setNeedsUpdate(s){this._needsUpdate=this._needsUpdate||s}getLayers({layerIds:s}={}){return s?this.layers.filter(d=>s.find(_=>d.id.indexOf(_)===0)):this.layers}setProps(s){"debug"in s&&(this._debug=s.debug),"userData"in s&&(this.context.userData=s.userData),"layers"in s&&(this._nextLayers=s.layers),"onError"in s&&(this.context.onError=s.onError)}setLayers(s,d){debug(TRACE_SET_LAYERS,this,d,s),this._lastRenderedLayers=s;const _=flatten$1(s,Boolean);for(const S of _)S.context=this.context;this._updateLayers(this.layers,_)}updateLayers(){const s=this.needsUpdate();s&&(this.setNeedsRedraw(`updating layers: ${s}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,s)),this._nextLayers=null}addDefaultShaderModule(s){const{defaultShaderModules:d}=this.context;d.find(_=>_.name===s.name)||(d.push(s),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(s){const{defaultShaderModules:d}=this.context,_=d.findIndex(S=>S.name===s.name);_>=0&&(d.splice(_,1),this._defaultShaderModulesChanged=!0)}_handleError(s,d,_){_.raiseError(d,`${s} of ${_}`)}_updateLayers(s,d){const _={};for(const F of s)_[F.id]?defaultLogger.warn(`Multiple old layers with same id ${F.id}`)():_[F.id]=F;if(this._defaultShaderModulesChanged){for(const F of s)F.setNeedsUpdate(),F.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const S=[];this._updateSublayersRecursively(d,_,S),this._finalizeOldLayers(_);let T=!1;for(const F of S)if(F.hasUniformTransition()){T=`Uniform transition in ${F}`;break}this._needsUpdate=T,this.layers=S}_updateSublayersRecursively(s,d,_){for(const S of s){S.context=this.context;const T=d[S.id];T===null&&defaultLogger.warn(`Multiple new layers with same id ${S.id}`)(),d[S.id]=null;let F=null;try{this._debug&&T!==S&&S.validateProps(),T?(this._transferLayerState(T,S),this._updateLayer(S)):this._initializeLayer(S),_.push(S),F=S.isComposite?S.getSubLayers():null}catch(M){this._handleError("matching",M,S)}F&&this._updateSublayersRecursively(F,d,_)}}_finalizeOldLayers(s){for(const d in s){const _=s[d];_&&this._finalizeLayer(_)}}_initializeLayer(s){try{s._initialize(),s.lifecycle=LIFECYCLE.INITIALIZED}catch(d){this._handleError("initialization",d,s)}}_transferLayerState(s,d){d._transferState(s),d.lifecycle=LIFECYCLE.MATCHED,d!==s&&(s.lifecycle=LIFECYCLE.AWAITING_GC)}_updateLayer(s){try{s._update()}catch(d){this._handleError("update",d,s)}}_finalizeLayer(s){this._needsRedraw=this._needsRedraw||`finalized ${s}`,s.lifecycle=LIFECYCLE.AWAITING_FINALIZATION;try{s._finalize(),s.lifecycle=LIFECYCLE.FINALIZED}catch(d){this._handleError("finalization",d,s)}}}function deepEqual(f,s,d){if(f===s)return!0;if(!d||!f||!s)return!1;if(Array.isArray(f)){if(!Array.isArray(s)||f.length!==s.length)return!1;for(let _=0;_<f.length;_++)if(!deepEqual(f[_],s[_],d-1))return!1;return!0}if(Array.isArray(s))return!1;if(typeof f=="object"&&typeof s=="object"){const _=Object.keys(f),S=Object.keys(s);if(_.length!==S.length)return!1;for(const T of _)if(!s.hasOwnProperty(T)||!deepEqual(f[T],s[T],d-1))return!1;return!0}return!1}class ViewManager{constructor(s){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=s.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=s.eventManager,this._eventCallbacks={onViewStateChange:s.onViewStateChange,onInteractionStateChange:s.onInteractionStateChange},Object.seal(this),this.setProps(s)}finalize(){for(const s in this.controllers){const d=this.controllers[s];d&&d.finalize()}this.controllers={}}needsRedraw(s={clearRedrawFlags:!1}){const d=this._needsRedraw;return s.clearRedrawFlags&&(this._needsRedraw=!1),d}setNeedsUpdate(s){this._needsUpdate=this._needsUpdate||s,this._needsRedraw=this._needsRedraw||s}updateViewStates(){for(const s in this.controllers){const d=this.controllers[s];d&&d.updateTransition()}}getViewports(s){return s?this._viewports.filter(d=>d.containsPixel(s)):this._viewports}getViews(){const s={};return this.views.forEach(d=>{s[d.id]=d}),s}getView(s){return this.views.find(d=>d.id===s)}getViewState(s){const d=typeof s=="string"?this.getView(s):s,_=d&&this.viewState[d.getViewStateId()]||this.viewState;return d?d.filterViewState(_):_}getViewport(s){return this._viewportMap[s]}unproject(s,d){const _=this.getViewports(),S={x:s[0],y:s[1]};for(let T=_.length-1;T>=0;--T){const F=_[T];if(F.containsPixel(S)){const M=s.slice();return M[0]-=F.x,M[1]-=F.y,F.unproject(M,d)}}return null}setProps(s){s.views&&this._setViews(s.views),s.viewState&&this._setViewState(s.viewState),("width"in s||"height"in s)&&this._setSize(s.width,s.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(s,d){(s!==this.width||d!==this.height)&&(this.width=s,this.height=d,this.setNeedsUpdate("Size changed"))}_setViews(s){s=flatten$1(s,Boolean),this._diffViews(s,this.views)&&this.setNeedsUpdate("views changed"),this.views=s}_setViewState(s){s?(!deepEqual(s,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=s):defaultLogger.warn("missing `viewState` or `initialViewState`")()}_createController(s,d){const _=d.type;return new _({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:T=>{var F;return(F=this.getView(s.id))==null?void 0:F.makeViewport({viewState:T,width:this.width,height:this.height})}})}_updateController(s,d,_,S){const T=s.controller;if(T&&_){const F={...d,...T,id:s.id,x:_.x,y:_.y,width:_.width,height:_.height};return(!S||S.constructor!==T.type)&&(S=this._createController(s,F)),S&&S.setProps(F),S}return null}_rebuildViewports(){const{views:s}=this,d=this.controllers;this._viewports=[],this.controllers={};let _=!1;for(let S=s.length;S--;){const T=s[S],F=this.getViewState(T),M=T.makeViewport({viewState:F,width:this.width,height:this.height});let P=d[T.id];const H=!!T.controller;H&&!P&&(_=!0),(_||!H)&&P&&(P.finalize(),P=null),this.controllers[T.id]=this._updateController(T,F,M,P),M&&this._viewports.unshift(M)}for(const S in d){const T=d[S];T&&!this.controllers[S]&&T.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(s=>{s.id&&(this._viewportMap[s.id]=this._viewportMap[s.id]||s)})}_diffViews(s,d){return s.length!==d.length?!0:s.some((_,S)=>!s[S].equals(d[S]))}}const PERCENT_OR_PIXELS_REGEX=/([0-9]+\.?[0-9]*)(%|px)/;function parsePosition(f){switch(typeof f){case"number":return{position:f,relative:!1};case"string":const s=PERCENT_OR_PIXELS_REGEX.exec(f);if(s&&s.length>=3){const d=s[2]==="%",_=parseFloat(s[1]);return{position:d?_/100:_,relative:d}}default:throw new Error(`Could not parse position string ${f}`)}}function getPosition$1(f,s){return f.relative?Math.round(f.position*s):f.position}class View{constructor(s){const{id:d,x:_=0,y:S=0,width:T="100%",height:F="100%",padding:M=null}=s;this.id=d||this.constructor.displayName||"view",this.props={...s,id:this.id},this._x=parsePosition(_),this._y=parsePosition(S),this._width=parsePosition(T),this._height=parsePosition(F),this._padding=M&&{left:parsePosition(M.left||0),right:parsePosition(M.right||0),top:parsePosition(M.top||0),bottom:parsePosition(M.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(s){return this===s?!0:this.ViewportType===s.ViewportType&&deepEqual(this.props,s.props,2)}makeViewport({width:s,height:d,viewState:_}){_=this.filterViewState(_);const S=this.getDimensions({width:s,height:d});return!S.height||!S.width?null:new this.ViewportType({..._,...this.props,...S})}getViewStateId(){const{viewState:s}=this.props;return typeof s=="string"?s:(s==null?void 0:s.id)||this.id}filterViewState(s){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const d={...s};for(const _ in this.props.viewState)_!=="id"&&(d[_]=this.props.viewState[_]);return d}return s}getDimensions({width:s,height:d}){const _={x:getPosition$1(this._x,s),y:getPosition$1(this._y,d),width:getPosition$1(this._width,s),height:getPosition$1(this._height,d)};return this._padding&&(_.padding={left:getPosition$1(this._padding.left,s),top:getPosition$1(this._padding.top,d),right:getPosition$1(this._padding.right,s),bottom:getPosition$1(this._padding.bottom,d)}),_}get controller(){const s=this.props.controller;return s?s===!0?{type:this.ControllerType}:typeof s=="function"?{type:s}:{type:this.ControllerType,...s}:null}}let Transition$1=class{constructor(s){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=s}get inProgress(){return this._inProgress}start(s){var d,_;this.cancel(),this.settings=s,this._inProgress=!0,(_=(d=this.settings).onStart)==null||_.call(d,this)}end(){var s,d;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(d=(s=this.settings).onEnd)==null||d.call(s,this))}cancel(){var s,d;this._inProgress&&((d=(s=this.settings).onInterrupt)==null||d.call(s,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var s,d;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:_,settings:S}=this;this._handle=_.addChannel({delay:_.getTime(),duration:S.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(d=(s=this.settings).onUpdate)==null||d.call(s,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}};const noop$8=()=>{},TRANSITION_EVENTS={BREAK:1,SNAP_TO_END:2,IGNORE:3},DEFAULT_EASING=f=>f,DEFAULT_INTERRUPTION=TRANSITION_EVENTS.BREAK;class TransitionManager{constructor(s){this._onTransitionUpdate=d=>{const{time:_,settings:{interpolator:S,startProps:T,endProps:F,duration:M,easing:P}}=d,H=P(_/M),J=S.interpolateProps(T,F,H);this.propsInTransition=this.getControllerState({...this.props,...J}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=s.getControllerState,this.propsInTransition=null,this.transition=new Transition$1(s.timeline),this.onViewStateChange=s.onViewStateChange||noop$8,this.onStateChange=s.onStateChange||noop$8}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(s){let d=!1;const _=this.props;if(this.props=s,!_||this._shouldIgnoreViewportChange(_,s))return!1;if(this._isTransitionEnabled(s)){let S=_;if(this.transition.inProgress){const{interruption:T,endProps:F}=this.transition.settings;S={..._,...T===TRANSITION_EVENTS.SNAP_TO_END?F:this.propsInTransition||_}}this._triggerTransition(S,s),d=!0}else this.transition.cancel();return d}updateTransition(){this.transition.update()}_isTransitionEnabled(s){const{transitionDuration:d,transitionInterpolator:_}=s;return(d>0||d==="auto")&&!!_}_isUpdateDueToCurrentTransition(s){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(s,this.propsInTransition):!1}_shouldIgnoreViewportChange(s,d){return this.transition.inProgress?this.transition.settings.interruption===TRANSITION_EVENTS.IGNORE||this._isUpdateDueToCurrentTransition(d):this._isTransitionEnabled(d)?d.transitionInterpolator.arePropsEqual(s,d):!0}_triggerTransition(s,d){const _=this.getControllerState(s),S=this.getControllerState(d).shortestPathFrom(_),T=d.transitionInterpolator,F=T.getDuration?T.getDuration(s,d):d.transitionDuration;if(F===0)return;const M=T.initializeProps(s,S);this.propsInTransition={};const P={duration:F,easing:d.transitionEasing||DEFAULT_EASING,interpolator:T,interruption:d.transitionInterruption||DEFAULT_INTERRUPTION,startProps:M.start,endProps:M.end,onStart:d.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(d.onTransitionInterrupt),onEnd:this._onTransitionEnd(d.onTransitionEnd)};this.transition.start(P),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(s){return d=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),s==null||s(d)}}}function assert$2(f,s){if(!f)throw new Error(s||"deck.gl: assertion failed.")}class TransitionInterpolator{constructor(s){const{compare:d,extract:_,required:S}=s;this._propsToCompare=d,this._propsToExtract=_||d,this._requiredProps=S}arePropsEqual(s,d){for(const _ of this._propsToCompare)if(!(_ in s)||!(_ in d)||!equals$2(s[_],d[_]))return!1;return!0}initializeProps(s,d){const _={},S={};for(const T of this._propsToExtract)(T in s||T in d)&&(_[T]=s[T],S[T]=d[T]);return this._checkRequiredProps(_),this._checkRequiredProps(S),{start:_,end:S}}getDuration(s,d){return d.transitionDuration}_checkRequiredProps(s){this._requiredProps&&this._requiredProps.forEach(d=>{const _=s[d];assert$2(Number.isFinite(_)||Array.isArray(_),`${d} is required for transition`)})}}const DEFAULT_PROPS=["longitude","latitude","zoom","bearing","pitch"],DEFAULT_REQUIRED_PROPS=["longitude","latitude","zoom"];class LinearInterpolator extends TransitionInterpolator{constructor(s={}){const d=Array.isArray(s)?s:s.transitionProps,_=Array.isArray(s)?{}:s;_.transitionProps=Array.isArray(d)?{compare:d,required:d}:d||{compare:DEFAULT_PROPS,required:DEFAULT_REQUIRED_PROPS},super(_.transitionProps),this.opts=_}initializeProps(s,d){const _=super.initializeProps(s,d),{makeViewport:S,around:T}=this.opts;if(S&&T){const F=S(s),M=S(d),P=F.unproject(T);_.start.around=T,Object.assign(_.end,{around:M.project(P),aroundPosition:P,width:d.width,height:d.height})}return _}interpolateProps(s,d,_){const S={};for(const T of this._propsToExtract)S[T]=lerp$6(s[T]||0,d[T]||0,_);if(d.aroundPosition&&this.opts.makeViewport){const T=this.opts.makeViewport({...d,...S});Object.assign(S,T.panByPosition(d.aroundPosition,lerp$6(s.around,d.around,_)))}return S}}const NO_TRANSITION_PROPS={transitionDuration:0},DEFAULT_INERTIA=300,INERTIA_EASING=f=>1-(1-f)*(1-f),EVENT_TYPES$1={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},pinchEventWorkaround={};class Controller{constructor(s){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new TransitionManager({...s,getControllerState:d=>new this.ControllerState(d),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=s.eventManager,this.onViewStateChange=s.onViewStateChange||(()=>{}),this.onStateChange=s.onStateChange||(()=>{}),this.makeViewport=s.makeViewport}set events(s){this.toggleEvents(this._customEvents,!1),this.toggleEvents(s,!0),this._customEvents=s,this.props&&this.setProps(this.props)}finalize(){var s;for(const d in this._events)this._events[d]&&((s=this.eventManager)==null||s.off(d,this.handleEvent));this.transitionManager.finalize()}handleEvent(s){this._controllerState=void 0;const d=this._eventStartBlocked;switch(s.type){case"panstart":return d?!1:this._onPanStart(s);case"panmove":return this._onPan(s);case"panend":return this._onPanEnd(s);case"pinchstart":return d?!1:this._onPinchStart(s);case"pinchmove":return this._onPinch(s);case"pinchend":return this._onPinchEnd(s);case"tripanstart":return d?!1:this._onTriplePanStart(s);case"tripanmove":return this._onTriplePan(s);case"tripanend":return this._onTriplePanEnd(s);case"doubletap":return this._onDoubleTap(s);case"wheel":return this._onWheel(s);case"keydown":return this._onKeyDown(s);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(s){const{x:d,y:_}=this.props,{offsetCenter:S}=s;return[S.x-d,S.y-_]}isPointInBounds(s,d){const{width:_,height:S}=this.props;if(d&&d.handled)return!1;const T=s[0]>=0&&s[0]<=_&&s[1]>=0&&s[1]<=S;return T&&d&&d.stopPropagation(),T}isFunctionKeyPressed(s){const{srcEvent:d}=s;return!!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(s){const d=setTimeout(()=>{this._eventStartBlocked===d&&(this._eventStartBlocked=null)},s);this._eventStartBlocked=d}setProps(s){s.dragMode&&(this.dragMode=s.dragMode),this.props=s,"transitionInterpolator"in s||(s.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(s);const{inertia:d}=s;this.inertia=Number.isFinite(d)?d:d===!0?DEFAULT_INERTIA:0;const{scrollZoom:_=!0,dragPan:S=!0,dragRotate:T=!0,doubleClickZoom:F=!0,touchZoom:M=!0,touchRotate:P=!1,keyboard:H=!0}=s,J=!!this.onViewStateChange;this.toggleEvents(EVENT_TYPES$1.WHEEL,J&&_),this.toggleEvents(EVENT_TYPES$1.PAN,J),this.toggleEvents(EVENT_TYPES$1.PINCH,J&&(M||P)),this.toggleEvents(EVENT_TYPES$1.TRIPLE_PAN,J&&P),this.toggleEvents(EVENT_TYPES$1.DOUBLE_TAP,J&&F),this.toggleEvents(EVENT_TYPES$1.KEYBOARD,J&&H),this.scrollZoom=_,this.dragPan=S,this.dragRotate=T,this.doubleClickZoom=F,this.touchZoom=M,this.touchRotate=P,this.keyboard=H}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(s,d){this.eventManager&&s.forEach(_=>{this._events[_]!==d&&(this._events[_]=d,d?this.eventManager.on(_,this.handleEvent):this.eventManager.off(_,this.handleEvent))})}updateViewport(s,d=null,_={}){const S={...s.getViewportProps(),...d},T=this.controllerState!==s;if(this.state=s.getState(),this._setInteractionState(_),T){const F=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:S,interactionState:this._interactionState,oldViewState:F,viewId:this.props.id})}}_onTransition(s){this.onViewStateChange({...s,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(s){Object.assign(this._interactionState,s),this.onStateChange(this._interactionState)}_onPanStart(s){const d=this.getCenter(s);if(!this.isPointInBounds(d,s))return!1;let _=this.isFunctionKeyPressed(s)||s.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(_=!_);const S=this.controllerState[_?"panStart":"rotateStart"]({pos:d});return this._panMove=_,this.updateViewport(S,NO_TRANSITION_PROPS,{isDragging:!0}),!0}_onPan(s){return this.isDragging()?this._panMove?this._onPanMove(s):this._onPanRotate(s):!1}_onPanEnd(s){return this.isDragging()?this._panMove?this._onPanMoveEnd(s):this._onPanRotateEnd(s):!1}_onPanMove(s){if(!this.dragPan)return!1;const d=this.getCenter(s),_=this.controllerState.pan({pos:d});return this.updateViewport(_,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(s){const{inertia:d}=this;if(this.dragPan&&d&&s.velocity){const _=this.getCenter(s),S=[_[0]+s.velocityX*d/2,_[1]+s.velocityY*d/2],T=this.controllerState.pan({pos:S}).panEnd();this.updateViewport(T,{...this._getTransitionProps(),transitionDuration:d,transitionEasing:INERTIA_EASING},{isDragging:!1,isPanning:!0})}else{const _=this.controllerState.panEnd();this.updateViewport(_,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(s){if(!this.dragRotate)return!1;const d=this.getCenter(s),_=this.controllerState.rotate({pos:d});return this.updateViewport(_,NO_TRANSITION_PROPS,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(s){const{inertia:d}=this;if(this.dragRotate&&d&&s.velocity){const _=this.getCenter(s),S=[_[0]+s.velocityX*d/2,_[1]+s.velocityY*d/2],T=this.controllerState.rotate({pos:S}).rotateEnd();this.updateViewport(T,{...this._getTransitionProps(),transitionDuration:d,transitionEasing:INERTIA_EASING},{isDragging:!1,isRotating:!0})}else{const _=this.controllerState.rotateEnd();this.updateViewport(_,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(s){if(!this.scrollZoom)return!1;const d=this.getCenter(s);if(!this.isPointInBounds(d,s))return!1;s.srcEvent.preventDefault();const{speed:_=.01,smooth:S=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:T}=s;let F=2/(1+Math.exp(-Math.abs(T*_)));T<0&&F!==0&&(F=1/F);const M=this.controllerState.zoom({pos:d,scale:F});return this.updateViewport(M,{...this._getTransitionProps({around:d}),transitionDuration:S?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(s){const d=this.getCenter(s);if(!this.isPointInBounds(d,s))return!1;const _=this.controllerState.rotateStart({pos:d});return this.updateViewport(_,NO_TRANSITION_PROPS,{isDragging:!0}),!0}_onTriplePan(s){if(!this.touchRotate||!this.isDragging())return!1;const d=this.getCenter(s);d[0]-=s.deltaX;const _=this.controllerState.rotate({pos:d});return this.updateViewport(_,NO_TRANSITION_PROPS,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(s){if(!this.isDragging())return!1;const{inertia:d}=this;if(this.touchRotate&&d&&s.velocityY){const _=this.getCenter(s),S=[_[0],_[1]+=s.velocityY*d/2],T=this.controllerState.rotate({pos:S});this.updateViewport(T,{...this._getTransitionProps(),transitionDuration:d,transitionEasing:INERTIA_EASING},{isDragging:!1,isRotating:!0}),this.blockEvents(d)}else{const _=this.controllerState.rotateEnd();this.updateViewport(_,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(s){const d=this.getCenter(s);if(!this.isPointInBounds(d,s))return!1;const _=this.controllerState.zoomStart({pos:d}).rotateStart({pos:d});return pinchEventWorkaround._startPinchRotation=s.rotation,pinchEventWorkaround._lastPinchEvent=s,this.updateViewport(_,NO_TRANSITION_PROPS,{isDragging:!0}),!0}_onPinch(s){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let d=this.controllerState;if(this.touchZoom){const{scale:_}=s,S=this.getCenter(s);d=d.zoom({pos:S,scale:_})}if(this.touchRotate){const{rotation:_}=s;d=d.rotate({deltaAngleX:pinchEventWorkaround._startPinchRotation-_})}return this.updateViewport(d,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),pinchEventWorkaround._lastPinchEvent=s,!0}_onPinchEnd(s){if(!this.isDragging())return!1;const{inertia:d}=this,{_lastPinchEvent:_}=pinchEventWorkaround;if(this.touchZoom&&d&&_&&s.scale!==_.scale){const S=this.getCenter(s);let T=this.controllerState.rotateEnd();const F=Math.log2(s.scale),M=(F-Math.log2(_.scale))/(s.deltaTime-_.deltaTime),P=Math.pow(2,F+M*d/2);T=T.zoom({pos:S,scale:P}).zoomEnd(),this.updateViewport(T,{...this._getTransitionProps({around:S}),transitionDuration:d,transitionEasing:INERTIA_EASING},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(d)}else{const S=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(S,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return pinchEventWorkaround._startPinchRotation=null,pinchEventWorkaround._lastPinchEvent=null,!0}_onDoubleTap(s){if(!this.doubleClickZoom)return!1;const d=this.getCenter(s);if(!this.isPointInBounds(d,s))return!1;const _=this.isFunctionKeyPressed(s),S=this.controllerState.zoom({pos:d,scale:_?.5:2});return this.updateViewport(S,this._getTransitionProps({around:d}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(s){if(!this.keyboard)return!1;const d=this.isFunctionKeyPressed(s),{zoomSpeed:_,moveSpeed:S,rotateSpeedX:T,rotateSpeedY:F}=this.keyboard===!0?{}:this.keyboard,{controllerState:M}=this;let P;const H={};switch(s.srcEvent.code){case"Minus":P=d?M.zoomOut(_).zoomOut(_):M.zoomOut(_),H.isZooming=!0;break;case"Equal":P=d?M.zoomIn(_).zoomIn(_):M.zoomIn(_),H.isZooming=!0;break;case"ArrowLeft":d?(P=M.rotateLeft(T),H.isRotating=!0):(P=M.moveLeft(S),H.isPanning=!0);break;case"ArrowRight":d?(P=M.rotateRight(T),H.isRotating=!0):(P=M.moveRight(S),H.isPanning=!0);break;case"ArrowUp":d?(P=M.rotateUp(F),H.isRotating=!0):(P=M.moveUp(S),H.isPanning=!0);break;case"ArrowDown":d?(P=M.rotateDown(F),H.isRotating=!0):(P=M.moveDown(S),H.isPanning=!0);break;default:return!1}return this.updateViewport(P,this._getTransitionProps(),H),!0}_getTransitionProps(s){const{transition:d}=this;return!d||!d.transitionInterpolator?NO_TRANSITION_PROPS:s?{...d,transitionInterpolator:new LinearInterpolator({...s,...d.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:d}}class ViewState{constructor(s,d){this._viewportProps=this.applyConstraints(s),this._state=d}getViewportProps(){return this._viewportProps}getState(){return this._state}}const PITCH_MOUSE_THRESHOLD=5,PITCH_ACCEL=1.2;class MapState extends ViewState{constructor(s){const{width:d,height:_,latitude:S,longitude:T,zoom:F,bearing:M=0,pitch:P=0,altitude:H=1.5,position:J=[0,0,0],maxZoom:K=20,minZoom:z=0,maxPitch:oe=60,minPitch:se=0,startPanLngLat:ae,startZoomLngLat:ge,startRotatePos:pe,startBearing:he,startPitch:ve,startZoom:be,normalize:Re=!0}=s;assert$2(Number.isFinite(T)),assert$2(Number.isFinite(S)),assert$2(Number.isFinite(F)),super({width:d,height:_,latitude:S,longitude:T,zoom:F,bearing:M,pitch:P,altitude:H,maxZoom:K,minZoom:z,maxPitch:oe,minPitch:se,normalize:Re,position:J},{startPanLngLat:ae,startZoomLngLat:ge,startRotatePos:pe,startBearing:he,startPitch:ve,startZoom:be}),this.makeViewport=s.makeViewport}panStart({pos:s}){return this._getUpdatedState({startPanLngLat:this._unproject(s)})}pan({pos:s,startPos:d}){const _=this.getState().startPanLngLat||this._unproject(d);if(!_)return this;const T=this.makeViewport(this.getViewportProps()).panByPosition(_,s);return this._getUpdatedState(T)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:s}){return this._getUpdatedState({startRotatePos:s,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:s,deltaAngleX:d=0,deltaAngleY:_=0}){const{startRotatePos:S,startBearing:T,startPitch:F}=this.getState();if(!S||T===void 0||F===void 0)return this;let M;return s?M=this._getNewRotation(s,S,F,T):M={bearing:T+d,pitch:F+_},this._getUpdatedState(M)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:s}){return this._getUpdatedState({startZoomLngLat:this._unproject(s),startZoom:this.getViewportProps().zoom})}zoom({pos:s,startPos:d,scale:_}){let{startZoom:S,startZoomLngLat:T}=this.getState();if(T||(S=this.getViewportProps().zoom,T=this._unproject(d)||this._unproject(s)),!T)return this;const{maxZoom:F,minZoom:M}=this.getViewportProps();let P=S+Math.log2(_);P=clamp$3(P,M,F);const H=this.makeViewport({...this.getViewportProps(),zoom:P});return this._getUpdatedState({zoom:P,...H.panByPosition(T,s)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(s=2){return this._zoomFromCenter(s)}zoomOut(s=2){return this._zoomFromCenter(1/s)}moveLeft(s=100){return this._panFromCenter([s,0])}moveRight(s=100){return this._panFromCenter([-s,0])}moveUp(s=100){return this._panFromCenter([0,s])}moveDown(s=100){return this._panFromCenter([0,-s])}rotateLeft(s=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-s})}rotateRight(s=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+s})}rotateUp(s=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+s})}rotateDown(s=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-s})}shortestPathFrom(s){const d=s.getViewportProps(),_={...this.getViewportProps()},{bearing:S,longitude:T}=_;return Math.abs(S-d.bearing)>180&&(_.bearing=S<0?S+360:S-360),Math.abs(T-d.longitude)>180&&(_.longitude=T<0?T+360:T-360),_}applyConstraints(s){const{maxZoom:d,minZoom:_,zoom:S}=s;s.zoom=clamp$3(S,_,d);const{maxPitch:T,minPitch:F,pitch:M}=s;s.pitch=clamp$3(M,F,T);const{normalize:P=!0}=s;return P&&Object.assign(s,normalizeViewportProps(s)),s}_zoomFromCenter(s){const{width:d,height:_}=this.getViewportProps();return this.zoom({pos:[d/2,_/2],scale:s})}_panFromCenter(s){const{width:d,height:_}=this.getViewportProps();return this.pan({startPos:[d/2,_/2],pos:[d/2+s[0],_/2+s[1]]})}_getUpdatedState(s){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...s})}_unproject(s){const d=this.makeViewport(this.getViewportProps());return s&&d.unproject(s)}_getNewRotation(s,d,_,S){const T=s[0]-d[0],F=s[1]-d[1],M=s[1],P=d[1],{width:H,height:J}=this.getViewportProps(),K=T/H;let z=0;F>0?Math.abs(J-P)>PITCH_MOUSE_THRESHOLD&&(z=F/(P-J)*PITCH_ACCEL):F<0&&P>PITCH_MOUSE_THRESHOLD&&(z=1-M/P),z=clamp$3(z,-1,1);const{minPitch:oe,maxPitch:se}=this.getViewportProps(),ae=S+180*K;let ge=_;return z>0?ge=_+z*(se-_):z<0&&(ge=_-z*(oe-_)),{pitch:ge,bearing:ae}}}class MapController extends Controller{constructor(){super(...arguments),this.ControllerState=MapState,this.transition={transitionDuration:300,transitionInterpolator:new LinearInterpolator({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(s){s.position=s.position||[0,0,0];const d=this.props;super.setProps(s),(!d||d.height!==s.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...s,...this.state}))}}class MapView extends View{constructor(s={}){super(s)}get ViewportType(){return WebMercatorViewport$1}get ControllerType(){return MapController}}MapView.displayName="MapView";const DEFAULT_LIGHTING_EFFECT=new LightingEffect;function compareEffects(f,s){const d=f.order??1/0,_=s.order??1/0;return d-_}class EffectManager{constructor(s){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=s,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(s){const d=this._defaultEffects;if(!d.find(_=>_.id===s.id)){const _=d.findIndex(S=>compareEffects(S,s)>0);_<0?d.push(s):d.splice(_,0,s),s.setup(this._context),this._setEffects(this.effects)}}setProps(s){"effects"in s&&(deepEqual(s.effects,this.effects,1)||this._setEffects(s.effects))}needsRedraw(s={clearRedrawFlags:!1}){const d=this._needsRedraw;return s.clearRedrawFlags&&(this._needsRedraw=!1),d}getEffects(){return this._resolvedEffects}_setEffects(s){const d={};for(const S of this.effects)d[S.id]=S;const _=[];for(const S of s){const T=d[S.id];let F=S;T&&T!==S?T.setProps?(T.setProps(S.props),F=T):T.cleanup(this._context):T||S.setup(this._context),_.push(F),delete d[S.id]}for(const S in d)d[S].cleanup(this._context);this.effects=_,this._resolvedEffects=_.concat(this._defaultEffects),s.some(S=>S instanceof LightingEffect)||this._resolvedEffects.push(DEFAULT_LIGHTING_EFFECT),this._needsRedraw="effects changed"}finalize(){for(const s of this._resolvedEffects)s.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class DrawLayersPass extends LayersPass{shouldDrawLayer(s){const{operation:d}=s.props;return d.includes("draw")||d.includes("terrain")}}const TRACE_RENDER_LAYERS$1="deckRenderer.renderLayers";class DeckRenderer{constructor(s){this.device=s,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new DrawLayersPass(s),this.pickLayersPass=new PickLayersPass(s),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(s){this.layerFilter!==s.layerFilter&&(this.layerFilter=s.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==s.drawPickingColors&&(this.drawPickingColors=s.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(s){if(!s.viewports.length)return;const d=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,_={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...s};_.effects&&this._preRender(_.effects,_);const S=this.lastPostProcessEffect?this.renderBuffers[0]:_.target;this.lastPostProcessEffect&&(_.clearColor=[0,0,0,0],_.clearCanvas=!0);const T=d.render({..._,target:S});_.effects&&this._postRender(_.effects,_),this.renderCount++,debug(TRACE_RENDER_LAYERS$1,this,T,s)}needsRedraw(s={clearRedrawFlags:!1}){const d=this._needsRedraw;return s.clearRedrawFlags&&(this._needsRedraw=!1),d}finalize(){const{renderBuffers:s}=this;for(const d of s)d.delete();s.length=0}_preRender(s,d){this.lastPostProcessEffect=null,d.preRenderStats=d.preRenderStats||{};for(const _ of s)d.preRenderStats[_.id]=_.preRender(d),_.postRender&&(this.lastPostProcessEffect=_.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:s}=this,d=this.device.canvasContext.getDrawingBufferSize();s.length===0&&[0,1].map(_=>{const S=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});s.push(this.device.createFramebuffer({id:`deck-renderbuffer-${_}`,colorAttachments:[S]}))});for(const _ of s)_.resize(d)}_postRender(s,d){const{renderBuffers:_}=this,S={...d,inputBuffer:_[0],swapBuffer:_[1]};for(const T of s)if(T.postRender){S.target=T.id===this.lastPostProcessEffect?d.target:void 0;const F=T.postRender(S);S.inputBuffer=F,S.swapBuffer=F===_[0]?_[1]:_[0]}}}const NO_PICKED_OBJECT={pickedColor:null,pickedObjectIndex:-1};function getClosestObject({pickedColors:f,decodePickingColor:s,deviceX:d,deviceY:_,deviceRadius:S,deviceRect:T}){const{x:F,y:M,width:P,height:H}=T;let J=S*S,K=-1,z=0;for(let oe=0;oe<H;oe++){const se=oe+M-_,ae=se*se;if(ae>J)z+=4*P;else for(let ge=0;ge<P;ge++){if(f[z+3]-1>=0){const he=ge+F-d,ve=he*he+ae;ve<=J&&(J=ve,K=z)}z+=4}}if(K>=0){const oe=f.slice(K,K+4),se=s(oe);if(se){const ae=Math.floor(K/4/P),ge=K/4-ae*P;return{...se,pickedColor:oe,pickedX:F+ge,pickedY:M+ae}}defaultLogger.error("Picked non-existent layer. Is picking buffer corrupt?")()}return NO_PICKED_OBJECT}function getUniqueObjects({pickedColors:f,decodePickingColor:s}){const d=new Map;if(f){for(let _=0;_<f.length;_+=4)if(f[_+3]-1>=0){const T=f.slice(_,_+4),F=T.join(",");if(!d.has(F)){const M=s(T);M?d.set(F,{...M,color:T}):defaultLogger.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(d.values())}function getEmptyPickingInfo({pickInfo:f,viewports:s,pixelRatio:d,x:_,y:S,z:T}){let F=s[0];s.length>1&&(F=getViewportFromCoordinates((f==null?void 0:f.pickedViewports)||s,{x:_,y:S}));let M;if(F){const P=[_-F.x,S-F.y];T!==void 0&&(P[2]=T),M=F.unproject(P)}return{color:null,layer:null,viewport:F,index:-1,picked:!1,x:_,y:S,pixel:[_,S],coordinate:M,devicePixel:f&&"pickedX"in f?[f.pickedX,f.pickedY]:void 0,pixelRatio:d}}function processPickInfo(f){const{pickInfo:s,lastPickedInfo:d,mode:_,layers:S}=f,{pickedColor:T,pickedLayer:F,pickedObjectIndex:M}=s,P=F?[F]:[];if(_==="hover"){const K=d.index,z=d.layerId,oe=F?F.props.id:null;if(oe!==z||M!==K){if(oe!==z){const se=S.find(ae=>ae.props.id===z);se&&P.unshift(se)}d.layerId=oe,d.index=M,d.info=null}}const H=getEmptyPickingInfo(f),J=new Map;return J.set(null,H),P.forEach(K=>{let z={...H};K===F&&(z.color=T,z.index=M,z.picked=!0),z=getLayerPickingInfo({layer:K,info:z,mode:_});const oe=z.layer;K===F&&_==="hover"&&(d.info=z),J.set(oe.id,z),_==="hover"&&oe.updateAutoHighlight(z)}),J}function getLayerPickingInfo({layer:f,info:s,mode:d}){for(;f&&s;){const _=s.layer||null;s.sourceLayer=_,s.layer=f,s=f.getPickingInfo({info:s,mode:d,sourceLayer:_}),f=f.parent}return s}function getViewportFromCoordinates(f,s){for(let d=f.length-1;d>=0;d--){const _=f[d];if(_.containsPixel(s))return _}return f[0]}class DeckPicker{constructor(s){this._pickable=!0,this.device=s,this.pickLayersPass=new PickLayersPass(s),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(s){"layerFilter"in s&&(this.layerFilter=s.layerFilter),"_pickable"in s&&(this._pickable=s._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(s){return this._pickClosestObject(s)}pickObjects(s){return this._pickVisibleObjects(s)}getLastPickedObject({x:s,y:d,layers:_,viewports:S},T=this.lastPickedInfo.info){const F=T&&T.layer&&T.layer.id,M=T&&T.viewport&&T.viewport.id,P=F?_.find(z=>z.id===F):null,H=M&&S.find(z=>z.id===M)||S[0],J=H&&H.unproject([s-H.x,d-H.y]);return{...T,...{x:s,y:d,viewport:H,coordinate:J,layer:P}}}_resizeBuffer(){var d,_;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const S=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=S}const{canvas:s}=this.device.getCanvasContext();(d=this.pickingFBO)==null||d.resize({width:s.width,height:s.height}),(_=this.depthFBO)==null||_.resize({width:s.width,height:s.height})}_getPickable(s){if(this._pickable===!1)return null;const d=s.filter(_=>this.pickLayersPass.shouldDrawLayer(_)&&!_.isComposite);return d.length?d:null}_pickClosestObject({layers:s,views:d,viewports:_,x:S,y:T,radius:F=0,depth:M=1,mode:P="query",unproject3D:H,onViewportActive:J,effects:K}){const z=this.device.canvasContext.cssToDeviceRatio(),oe=this._getPickable(s);if(!oe||_.length===0)return{result:[],emptyInfo:getEmptyPickingInfo({viewports:_,x:S,y:T,pixelRatio:z})};this._resizeBuffer();const se=this.device.canvasContext.cssToDevicePixels([S,T],!0),ae=[se.x+Math.floor(se.width/2),se.y+Math.floor(se.height/2)],ge=Math.round(F*z),{width:pe,height:he}=this.pickingFBO,ve=this._getPickingRect({deviceX:ae[0],deviceY:ae[1],deviceRadius:ge,deviceWidth:pe,deviceHeight:he}),be={x:S-F,y:T-F,width:F*2+1,height:F*2+1};let Re;const Fe=[],ye=new Set;for(let Ue=0;Ue<M;Ue++){let It;if(ve){const At=this._drawAndSample({layers:oe,views:d,viewports:_,onViewportActive:J,deviceRect:ve,cullRect:be,effects:K,pass:`picking:${P}`});It=getClosestObject({...At,deviceX:ae[0],deviceY:ae[1],deviceRadius:ge,deviceRect:ve})}else It={pickedColor:null,pickedObjectIndex:-1};let St;if(It.pickedLayer&&H&&this.depthFBO){const{pickedColors:At}=this._drawAndSample({layers:[It.pickedLayer],views:d,viewports:_,onViewportActive:J,deviceRect:{x:It.pickedX,y:It.pickedY,width:1,height:1},cullRect:be,effects:K,pass:`picking:${P}:z`},!0);At[3]&&(St=At[0])}It.pickedLayer&&Ue+1<M&&(ye.add(It.pickedLayer),It.pickedLayer.disablePickingIndex(It.pickedObjectIndex)),Re=processPickInfo({pickInfo:It,lastPickedInfo:this.lastPickedInfo,mode:P,layers:oe,viewports:_,x:S,y:T,z:St,pixelRatio:z});for(const At of Re.values())At.layer&&Fe.push(At);if(!It.pickedColor)break}for(const Ue of ye)Ue.restorePickingColors();return{result:Fe,emptyInfo:Re.get(null)}}_pickVisibleObjects({layers:s,views:d,viewports:_,x:S,y:T,width:F=1,height:M=1,mode:P="query",maxObjects:H=null,onViewportActive:J,effects:K}){const z=this._getPickable(s);if(!z||_.length===0)return[];this._resizeBuffer();const oe=this.device.canvasContext.cssToDeviceRatio(),se=this.device.canvasContext.cssToDevicePixels([S,T],!0),ae=se.x,ge=se.y+se.height,pe=this.device.canvasContext.cssToDevicePixels([S+F,T+M],!0),he=pe.x+pe.width,ve=pe.y,be={x:ae,y:ve,width:he-ae,height:ge-ve},Re=this._drawAndSample({layers:z,views:d,viewports:_,onViewportActive:J,deviceRect:be,cullRect:{x:S,y:T,width:F,height:M},effects:K,pass:`picking:${P}`}),Fe=getUniqueObjects(Re),ye=new Map,Ue=[],It=Number.isFinite(H);for(let St=0;St<Fe.length&&!(It&&Ue.length>=H);St++){const At=Fe[St];let xt={color:At.pickedColor,layer:null,index:At.pickedObjectIndex,picked:!0,x:S,y:T,pixelRatio:oe};xt=getLayerPickingInfo({layer:At.pickedLayer,info:xt,mode:P});const Ct=xt.layer.id;ye.has(Ct)||ye.set(Ct,new Set);const Nt=ye.get(Ct),qt=xt.object??xt.index;Nt.has(qt)||(Nt.add(qt),Ue.push(xt))}return Ue}_drawAndSample({layers:s,views:d,viewports:_,onViewportActive:S,deviceRect:T,cullRect:F,effects:M,pass:P},H=!1){const J=H?this.depthFBO:this.pickingFBO,K={layers:s,layerFilter:this.layerFilter,views:d,viewports:_,onViewportActive:S,pickingFBO:J,deviceRect:T,cullRect:F,effects:M,pass:P,pickZ:H,preRenderStats:{}};for(const he of M)he.useInPicking&&(K.preRenderStats[he.id]=he.preRender(K));const{decodePickingColor:z}=this.pickLayersPass.render(K),{x:oe,y:se,width:ae,height:ge}=T,pe=new(H?Float32Array:Uint8Array)(ae*ge*4);return this.device.readPixelsToArrayWebGL(J,{sourceX:oe,sourceY:se,sourceWidth:ae,sourceHeight:ge,target:pe}),{pickedColors:pe,decodePickingColor:z}}_getPickingRect({deviceX:s,deviceY:d,deviceRadius:_,deviceWidth:S,deviceHeight:T}){const F=Math.max(0,s-_),M=Math.max(0,d-_),P=Math.min(S,s+_+1)-F,H=Math.min(T,d+_+1)-M;return P<=0||H<=0?null:{x:F,y:M,width:P,height:H}}}const PLACEMENTS={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},DEFAULT_PLACEMENT="top-left",ROOT_CONTAINER_ID="__root";class WidgetManager{constructor({deck:s,parentElement:d}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=s,this.parentElement=d}getWidgets(){return this.resolvedWidgets}setProps(s){s.widgets&&!deepEqual(s.widgets,this.widgets,1)&&this._setWidgets(s.widgets)}finalize(){for(const s of this.getWidgets())this._remove(s);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const s in this.containers)this.containers[s].remove()}addDefault(s){this.defaultWidgets.find(d=>d.id===s.id)||(this._add(s),this.defaultWidgets.push(s),this._setWidgets(this.widgets))}_setWidgets(s){const d={};for(const _ of this.resolvedWidgets)d[_.id]=_;this.resolvedWidgets.length=0;for(const _ of this.defaultWidgets)d[_.id]=null,this.resolvedWidgets.push(_);for(let _ of s){const S=d[_.id];S?S.viewId!==_.viewId||S.placement!==_.placement?(this._remove(S),this._add(_)):_!==S&&(S.setProps(_.props),_=S):this._add(_),d[_.id]=null,this.resolvedWidgets.push(_)}for(const _ in d){const S=d[_];S&&this._remove(S)}this.widgets=s}_add(s){const{viewId:d=null,placement:_=DEFAULT_PLACEMENT}=s,S=s.onAdd({deck:this.deck,viewId:d});S&&this._getContainer(d,_).append(S),s._element=S}_remove(s){s.onRemove(),s._element&&s._element.remove(),s._element=void 0}_getContainer(s,d){var F;const _=s||ROOT_CONTAINER_ID;let S=this.containers[_];S||(S=document.createElement("div"),S.style.pointerEvents="none",S.style.position="absolute",S.style.overflow="hidden",(F=this.parentElement)==null||F.append(S),this.containers[_]=S);let T=S.querySelector(`.${d}`);return T||(T=document.createElement("div"),T.className=d,T.style.position="absolute",T.style.zIndex="2",Object.assign(T.style,PLACEMENTS[d]),S.append(T)),T}_updateContainers(){const s=this.deck.width,d=this.deck.height;for(const _ in this.containers){const S=this.lastViewports[_]||null,T=_===ROOT_CONTAINER_ID||S,F=this.containers[_];T?(F.style.display="block",F.style.left=`${S?S.x:0}px`,F.style.top=`${S?S.y:0}px`,F.style.width=`${S?S.width:s}px`,F.style.height=`${S?S.height:d}px`):F.style.display="none"}}onRedraw({viewports:s,layers:d}){var T,F;const _=s.reduce((M,P)=>(M[P.id]=P,M),{}),{lastViewports:S}=this;for(const M of this.getWidgets()){const{viewId:P}=M;if(P){const H=_[P];H&&(M.onViewportChange&&!H.equals(S[P])&&M.onViewportChange(H),(T=M.onRedraw)==null||T.call(M,{viewports:[H],layers:d}))}else{if(M.onViewportChange)for(const H of s)H.equals(S[H.id])||M.onViewportChange(H);(F=M.onRedraw)==null||F.call(M,{viewports:s,layers:d})}}this.lastViewports=_,this._updateContainers()}onHover(s,d){var _,S;for(const T of this.getWidgets()){const{viewId:F}=T;(!F||F===((_=s.viewport)==null?void 0:_.id))&&((S=T.onHover)==null||S.call(T,s,d))}}onEvent(s,d){var S,T;const _=EVENTS[d.type];if(_)for(const F of this.getWidgets()){const{viewId:M}=F;(!M||M===((S=s.viewport)==null?void 0:S.id))&&((T=F[_.handler])==null||T.call(F,s,d))}}}const defaultStyle={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Tooltip{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:s}){const d=document.createElement("div");return d.className="deck-tooltip",Object.assign(d.style,defaultStyle),this.deck=s,this.element=d,d}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(s){var d;this.isVisible&&s.id===((d=this.lastViewport)==null?void 0:d.id)&&s!==this.lastViewport&&this.setTooltip(null)}onHover(s){const{deck:d}=this,_=d&&d.props.getTooltip;if(!_)return;const S=_(s);this.lastViewport=s.viewport,this.setTooltip(S,s.x,s.y)}setTooltip(s,d,_){const S=this.element;if(S){if(typeof s=="string")S.innerText=s;else if(s)s.text&&(S.innerText=s.text),s.html&&(S.innerHTML=s.html),s.className&&(S.className=s.className);else{this.isVisible=!1,S.style.display="none";return}this.isVisible=!0,S.style.display="block",S.style.transform=`translate(${d}px, ${_}px)`,s&&typeof s=="object"&&"style"in s&&Object.assign(S.style,s.style)}}}var GLEnum;(function(f){f[f.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",f[f.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",f[f.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",f[f.POINTS=0]="POINTS",f[f.LINES=1]="LINES",f[f.LINE_LOOP=2]="LINE_LOOP",f[f.LINE_STRIP=3]="LINE_STRIP",f[f.TRIANGLES=4]="TRIANGLES",f[f.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",f[f.TRIANGLE_FAN=6]="TRIANGLE_FAN",f[f.ZERO=0]="ZERO",f[f.ONE=1]="ONE",f[f.SRC_COLOR=768]="SRC_COLOR",f[f.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",f[f.SRC_ALPHA=770]="SRC_ALPHA",f[f.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",f[f.DST_ALPHA=772]="DST_ALPHA",f[f.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",f[f.DST_COLOR=774]="DST_COLOR",f[f.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",f[f.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",f[f.CONSTANT_COLOR=32769]="CONSTANT_COLOR",f[f.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",f[f.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",f[f.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",f[f.FUNC_ADD=32774]="FUNC_ADD",f[f.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",f[f.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",f[f.BLEND_EQUATION=32777]="BLEND_EQUATION",f[f.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",f[f.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",f[f.BLEND_DST_RGB=32968]="BLEND_DST_RGB",f[f.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",f[f.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",f[f.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",f[f.BLEND_COLOR=32773]="BLEND_COLOR",f[f.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",f[f.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",f[f.LINE_WIDTH=2849]="LINE_WIDTH",f[f.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",f[f.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",f[f.CULL_FACE_MODE=2885]="CULL_FACE_MODE",f[f.FRONT_FACE=2886]="FRONT_FACE",f[f.DEPTH_RANGE=2928]="DEPTH_RANGE",f[f.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",f[f.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",f[f.DEPTH_FUNC=2932]="DEPTH_FUNC",f[f.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",f[f.STENCIL_FUNC=2962]="STENCIL_FUNC",f[f.STENCIL_FAIL=2964]="STENCIL_FAIL",f[f.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",f[f.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",f[f.STENCIL_REF=2967]="STENCIL_REF",f[f.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",f[f.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",f[f.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",f[f.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",f[f.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",f[f.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",f[f.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",f[f.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",f[f.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",f[f.VIEWPORT=2978]="VIEWPORT",f[f.SCISSOR_BOX=3088]="SCISSOR_BOX",f[f.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",f[f.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",f[f.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",f[f.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",f[f.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",f[f.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",f[f.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",f[f.RED_BITS=3410]="RED_BITS",f[f.GREEN_BITS=3411]="GREEN_BITS",f[f.BLUE_BITS=3412]="BLUE_BITS",f[f.ALPHA_BITS=3413]="ALPHA_BITS",f[f.DEPTH_BITS=3414]="DEPTH_BITS",f[f.STENCIL_BITS=3415]="STENCIL_BITS",f[f.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",f[f.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",f[f.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",f[f.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",f[f.SAMPLES=32937]="SAMPLES",f[f.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",f[f.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",f[f.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",f[f.VENDOR=7936]="VENDOR",f[f.RENDERER=7937]="RENDERER",f[f.VERSION=7938]="VERSION",f[f.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",f[f.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",f[f.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",f[f.STATIC_DRAW=35044]="STATIC_DRAW",f[f.STREAM_DRAW=35040]="STREAM_DRAW",f[f.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",f[f.ARRAY_BUFFER=34962]="ARRAY_BUFFER",f[f.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",f[f.BUFFER_SIZE=34660]="BUFFER_SIZE",f[f.BUFFER_USAGE=34661]="BUFFER_USAGE",f[f.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",f[f.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",f[f.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",f[f.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",f[f.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",f[f.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",f[f.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",f[f.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",f[f.CULL_FACE=2884]="CULL_FACE",f[f.FRONT=1028]="FRONT",f[f.BACK=1029]="BACK",f[f.FRONT_AND_BACK=1032]="FRONT_AND_BACK",f[f.BLEND=3042]="BLEND",f[f.DEPTH_TEST=2929]="DEPTH_TEST",f[f.DITHER=3024]="DITHER",f[f.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",f[f.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",f[f.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",f[f.SCISSOR_TEST=3089]="SCISSOR_TEST",f[f.STENCIL_TEST=2960]="STENCIL_TEST",f[f.NO_ERROR=0]="NO_ERROR",f[f.INVALID_ENUM=1280]="INVALID_ENUM",f[f.INVALID_VALUE=1281]="INVALID_VALUE",f[f.INVALID_OPERATION=1282]="INVALID_OPERATION",f[f.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",f[f.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",f[f.CW=2304]="CW",f[f.CCW=2305]="CCW",f[f.DONT_CARE=4352]="DONT_CARE",f[f.FASTEST=4353]="FASTEST",f[f.NICEST=4354]="NICEST",f[f.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",f[f.BYTE=5120]="BYTE",f[f.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",f[f.SHORT=5122]="SHORT",f[f.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",f[f.INT=5124]="INT",f[f.UNSIGNED_INT=5125]="UNSIGNED_INT",f[f.FLOAT=5126]="FLOAT",f[f.DOUBLE=5130]="DOUBLE",f[f.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",f[f.ALPHA=6406]="ALPHA",f[f.RGB=6407]="RGB",f[f.RGBA=6408]="RGBA",f[f.LUMINANCE=6409]="LUMINANCE",f[f.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",f[f.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",f[f.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",f[f.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",f[f.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",f[f.VERTEX_SHADER=35633]="VERTEX_SHADER",f[f.COMPILE_STATUS=35713]="COMPILE_STATUS",f[f.DELETE_STATUS=35712]="DELETE_STATUS",f[f.LINK_STATUS=35714]="LINK_STATUS",f[f.VALIDATE_STATUS=35715]="VALIDATE_STATUS",f[f.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",f[f.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",f[f.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",f[f.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",f[f.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",f[f.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",f[f.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",f[f.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",f[f.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",f[f.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",f[f.SHADER_TYPE=35663]="SHADER_TYPE",f[f.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",f[f.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",f[f.NEVER=512]="NEVER",f[f.LESS=513]="LESS",f[f.EQUAL=514]="EQUAL",f[f.LEQUAL=515]="LEQUAL",f[f.GREATER=516]="GREATER",f[f.NOTEQUAL=517]="NOTEQUAL",f[f.GEQUAL=518]="GEQUAL",f[f.ALWAYS=519]="ALWAYS",f[f.KEEP=7680]="KEEP",f[f.REPLACE=7681]="REPLACE",f[f.INCR=7682]="INCR",f[f.DECR=7683]="DECR",f[f.INVERT=5386]="INVERT",f[f.INCR_WRAP=34055]="INCR_WRAP",f[f.DECR_WRAP=34056]="DECR_WRAP",f[f.NEAREST=9728]="NEAREST",f[f.LINEAR=9729]="LINEAR",f[f.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",f[f.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",f[f.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",f[f.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",f[f.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",f[f.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",f[f.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",f[f.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",f[f.TEXTURE_2D=3553]="TEXTURE_2D",f[f.TEXTURE=5890]="TEXTURE",f[f.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",f[f.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",f[f.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",f[f.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",f[f.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",f[f.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",f[f.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",f[f.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",f[f.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",f[f.TEXTURE0=33984]="TEXTURE0",f[f.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",f[f.REPEAT=10497]="REPEAT",f[f.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",f[f.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",f[f.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",f[f.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",f[f.FLOAT_VEC2=35664]="FLOAT_VEC2",f[f.FLOAT_VEC3=35665]="FLOAT_VEC3",f[f.FLOAT_VEC4=35666]="FLOAT_VEC4",f[f.INT_VEC2=35667]="INT_VEC2",f[f.INT_VEC3=35668]="INT_VEC3",f[f.INT_VEC4=35669]="INT_VEC4",f[f.BOOL=35670]="BOOL",f[f.BOOL_VEC2=35671]="BOOL_VEC2",f[f.BOOL_VEC3=35672]="BOOL_VEC3",f[f.BOOL_VEC4=35673]="BOOL_VEC4",f[f.FLOAT_MAT2=35674]="FLOAT_MAT2",f[f.FLOAT_MAT3=35675]="FLOAT_MAT3",f[f.FLOAT_MAT4=35676]="FLOAT_MAT4",f[f.SAMPLER_2D=35678]="SAMPLER_2D",f[f.SAMPLER_CUBE=35680]="SAMPLER_CUBE",f[f.LOW_FLOAT=36336]="LOW_FLOAT",f[f.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",f[f.HIGH_FLOAT=36338]="HIGH_FLOAT",f[f.LOW_INT=36339]="LOW_INT",f[f.MEDIUM_INT=36340]="MEDIUM_INT",f[f.HIGH_INT=36341]="HIGH_INT",f[f.FRAMEBUFFER=36160]="FRAMEBUFFER",f[f.RENDERBUFFER=36161]="RENDERBUFFER",f[f.RGBA4=32854]="RGBA4",f[f.RGB5_A1=32855]="RGB5_A1",f[f.RGB565=36194]="RGB565",f[f.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",f[f.STENCIL_INDEX=6401]="STENCIL_INDEX",f[f.STENCIL_INDEX8=36168]="STENCIL_INDEX8",f[f.DEPTH_STENCIL=34041]="DEPTH_STENCIL",f[f.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",f[f.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",f[f.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",f[f.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",f[f.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",f[f.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",f[f.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",f[f.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",f[f.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",f[f.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",f[f.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",f[f.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",f[f.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",f[f.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",f[f.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",f[f.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",f[f.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",f[f.NONE=0]="NONE",f[f.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",f[f.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",f[f.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",f[f.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",f[f.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",f[f.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",f[f.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",f[f.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",f[f.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",f[f.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",f[f.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",f[f.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",f[f.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",f[f.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",f[f.READ_BUFFER=3074]="READ_BUFFER",f[f.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",f[f.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",f[f.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",f[f.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",f[f.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",f[f.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",f[f.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",f[f.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",f[f.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",f[f.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",f[f.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",f[f.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",f[f.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",f[f.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",f[f.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",f[f.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",f[f.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",f[f.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",f[f.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",f[f.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",f[f.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",f[f.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",f[f.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",f[f.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",f[f.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",f[f.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",f[f.RED=6403]="RED",f[f.RGB8=32849]="RGB8",f[f.RGBA8=32856]="RGBA8",f[f.RGB10_A2=32857]="RGB10_A2",f[f.TEXTURE_3D=32879]="TEXTURE_3D",f[f.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",f[f.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",f[f.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",f[f.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",f[f.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",f[f.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",f[f.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",f[f.SRGB=35904]="SRGB",f[f.SRGB8=35905]="SRGB8",f[f.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",f[f.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",f[f.RGBA32F=34836]="RGBA32F",f[f.RGB32F=34837]="RGB32F",f[f.RGBA16F=34842]="RGBA16F",f[f.RGB16F=34843]="RGB16F",f[f.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",f[f.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",f[f.R11F_G11F_B10F=35898]="R11F_G11F_B10F",f[f.RGB9_E5=35901]="RGB9_E5",f[f.RGBA32UI=36208]="RGBA32UI",f[f.RGB32UI=36209]="RGB32UI",f[f.RGBA16UI=36214]="RGBA16UI",f[f.RGB16UI=36215]="RGB16UI",f[f.RGBA8UI=36220]="RGBA8UI",f[f.RGB8UI=36221]="RGB8UI",f[f.RGBA32I=36226]="RGBA32I",f[f.RGB32I=36227]="RGB32I",f[f.RGBA16I=36232]="RGBA16I",f[f.RGB16I=36233]="RGB16I",f[f.RGBA8I=36238]="RGBA8I",f[f.RGB8I=36239]="RGB8I",f[f.RED_INTEGER=36244]="RED_INTEGER",f[f.RGB_INTEGER=36248]="RGB_INTEGER",f[f.RGBA_INTEGER=36249]="RGBA_INTEGER",f[f.R8=33321]="R8",f[f.RG8=33323]="RG8",f[f.R16F=33325]="R16F",f[f.R32F=33326]="R32F",f[f.RG16F=33327]="RG16F",f[f.RG32F=33328]="RG32F",f[f.R8I=33329]="R8I",f[f.R8UI=33330]="R8UI",f[f.R16I=33331]="R16I",f[f.R16UI=33332]="R16UI",f[f.R32I=33333]="R32I",f[f.R32UI=33334]="R32UI",f[f.RG8I=33335]="RG8I",f[f.RG8UI=33336]="RG8UI",f[f.RG16I=33337]="RG16I",f[f.RG16UI=33338]="RG16UI",f[f.RG32I=33339]="RG32I",f[f.RG32UI=33340]="RG32UI",f[f.R8_SNORM=36756]="R8_SNORM",f[f.RG8_SNORM=36757]="RG8_SNORM",f[f.RGB8_SNORM=36758]="RGB8_SNORM",f[f.RGBA8_SNORM=36759]="RGBA8_SNORM",f[f.RGB10_A2UI=36975]="RGB10_A2UI",f[f.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",f[f.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",f[f.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",f[f.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",f[f.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",f[f.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",f[f.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",f[f.HALF_FLOAT=5131]="HALF_FLOAT",f[f.RG=33319]="RG",f[f.RG_INTEGER=33320]="RG_INTEGER",f[f.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",f[f.CURRENT_QUERY=34917]="CURRENT_QUERY",f[f.QUERY_RESULT=34918]="QUERY_RESULT",f[f.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",f[f.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",f[f.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",f[f.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",f[f.DRAW_BUFFER0=34853]="DRAW_BUFFER0",f[f.DRAW_BUFFER1=34854]="DRAW_BUFFER1",f[f.DRAW_BUFFER2=34855]="DRAW_BUFFER2",f[f.DRAW_BUFFER3=34856]="DRAW_BUFFER3",f[f.DRAW_BUFFER4=34857]="DRAW_BUFFER4",f[f.DRAW_BUFFER5=34858]="DRAW_BUFFER5",f[f.DRAW_BUFFER6=34859]="DRAW_BUFFER6",f[f.DRAW_BUFFER7=34860]="DRAW_BUFFER7",f[f.DRAW_BUFFER8=34861]="DRAW_BUFFER8",f[f.DRAW_BUFFER9=34862]="DRAW_BUFFER9",f[f.DRAW_BUFFER10=34863]="DRAW_BUFFER10",f[f.DRAW_BUFFER11=34864]="DRAW_BUFFER11",f[f.DRAW_BUFFER12=34865]="DRAW_BUFFER12",f[f.DRAW_BUFFER13=34866]="DRAW_BUFFER13",f[f.DRAW_BUFFER14=34867]="DRAW_BUFFER14",f[f.DRAW_BUFFER15=34868]="DRAW_BUFFER15",f[f.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",f[f.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",f[f.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",f[f.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",f[f.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",f[f.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",f[f.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",f[f.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",f[f.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",f[f.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",f[f.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",f[f.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",f[f.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",f[f.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",f[f.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",f[f.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",f[f.SAMPLER_3D=35679]="SAMPLER_3D",f[f.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",f[f.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",f[f.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",f[f.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",f[f.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",f[f.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",f[f.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",f[f.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",f[f.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",f[f.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",f[f.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",f[f.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",f[f.MAX_SAMPLES=36183]="MAX_SAMPLES",f[f.SAMPLER_BINDING=35097]="SAMPLER_BINDING",f[f.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",f[f.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",f[f.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",f[f.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",f[f.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",f[f.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",f[f.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",f[f.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",f[f.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",f[f.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",f[f.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",f[f.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",f[f.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",f[f.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",f[f.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",f[f.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",f[f.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",f[f.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",f[f.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",f[f.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",f[f.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",f[f.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",f[f.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",f[f.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",f[f.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",f[f.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",f[f.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",f[f.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",f[f.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",f[f.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",f[f.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",f[f.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",f[f.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",f[f.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",f[f.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",f[f.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",f[f.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",f[f.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",f[f.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",f[f.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",f[f.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",f[f.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",f[f.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",f[f.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",f[f.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",f[f.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",f[f.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",f[f.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",f[f.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",f[f.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",f[f.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",f[f.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",f[f.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",f[f.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",f[f.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",f[f.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",f[f.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",f[f.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",f[f.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",f[f.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",f[f.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",f[f.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",f[f.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",f[f.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",f[f.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",f[f.UNIFORM_TYPE=35383]="UNIFORM_TYPE",f[f.UNIFORM_SIZE=35384]="UNIFORM_SIZE",f[f.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",f[f.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",f[f.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",f[f.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",f[f.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",f[f.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",f[f.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",f[f.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",f[f.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",f[f.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",f[f.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",f[f.OBJECT_TYPE=37138]="OBJECT_TYPE",f[f.SYNC_CONDITION=37139]="SYNC_CONDITION",f[f.SYNC_STATUS=37140]="SYNC_STATUS",f[f.SYNC_FLAGS=37141]="SYNC_FLAGS",f[f.SYNC_FENCE=37142]="SYNC_FENCE",f[f.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",f[f.UNSIGNALED=37144]="UNSIGNALED",f[f.SIGNALED=37145]="SIGNALED",f[f.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",f[f.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",f[f.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",f[f.WAIT_FAILED=37149]="WAIT_FAILED",f[f.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",f[f.COLOR=6144]="COLOR",f[f.DEPTH=6145]="DEPTH",f[f.STENCIL=6146]="STENCIL",f[f.MIN=32775]="MIN",f[f.MAX=32776]="MAX",f[f.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",f[f.STREAM_READ=35041]="STREAM_READ",f[f.STREAM_COPY=35042]="STREAM_COPY",f[f.STATIC_READ=35045]="STATIC_READ",f[f.STATIC_COPY=35046]="STATIC_COPY",f[f.DYNAMIC_READ=35049]="DYNAMIC_READ",f[f.DYNAMIC_COPY=35050]="DYNAMIC_COPY",f[f.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",f[f.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",f[f.INVALID_INDEX=4294967295]="INVALID_INDEX",f[f.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",f[f.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",f[f.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",f[f.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",f[f.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",f[f.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",f[f.R16_EXT=33322]="R16_EXT",f[f.RG16_EXT=33324]="RG16_EXT",f[f.RGB16_EXT=32852]="RGB16_EXT",f[f.RGBA16_EXT=32859]="RGBA16_EXT",f[f.R16_SNORM_EXT=36760]="R16_SNORM_EXT",f[f.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",f[f.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",f[f.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",f[f.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",f[f.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",f[f.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",f[f.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",f[f.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",f[f.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",f[f.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",f[f.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",f[f.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",f[f.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",f[f.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",f[f.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",f[f.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",f[f.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",f[f.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",f[f.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",f[f.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",f[f.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",f[f.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",f[f.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",f[f.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",f[f.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",f[f.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",f[f.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",f[f.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",f[f.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",f[f.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",f[f.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",f[f.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",f[f.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",f[f.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",f[f.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",f[f.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",f[f.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",f[f.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",f[f.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",f[f.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",f[f.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",f[f.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",f[f.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",f[f.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",f[f.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",f[f.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",f[f.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",f[f.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",f[f.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",f[f.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",f[f.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",f[f.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",f[f.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",f[f.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",f[f.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",f[f.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",f[f.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",f[f.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",f[f.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",f[f.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",f[f.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",f[f.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",f[f.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",f[f.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",f[f.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",f[f.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",f[f.LINE_WEBGL=6913]="LINE_WEBGL",f[f.FILL_WEBGL=6914]="FILL_WEBGL",f[f.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",f[f.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",f[f.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",f[f.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",f[f.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",f[f.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",f[f.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",f[f.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",f[f.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",f[f.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",f[f.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",f[f.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",f[f.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",f[f.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",f[f.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",f[f.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",f[f.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",f[f.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",f[f.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",f[f.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",f[f.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",f[f.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",f[f.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",f[f.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"})(GLEnum||(GLEnum={}));const GL_PARAMETER_DEFAULTS={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},enable=(f,s,d)=>s?f.enable(d):f.disable(d),hint=(f,s,d)=>f.hint(d,s),pixelStorei=(f,s,d)=>f.pixelStorei(d,s),bindFramebuffer=(f,s,d)=>{const _=d===36006?36009:36008;return f.bindFramebuffer(_,s)},bindBuffer=(f,s,d)=>{const S={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[d];f.bindBuffer(S,s)};function isArray$2(f){return Array.isArray(f)||ArrayBuffer.isView(f)&&!(f instanceof DataView)}const GL_PARAMETER_SETTERS={3042:enable,32773:(f,s)=>f.blendColor(...s),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(f,s)=>f.clearColor(...s),3107:(f,s)=>f.colorMask(...s),2884:enable,2885:(f,s)=>f.cullFace(s),2929:enable,2931:(f,s)=>f.clearDepth(s),2932:(f,s)=>f.depthFunc(s),2928:(f,s)=>f.depthRange(...s),2930:(f,s)=>f.depthMask(s),3024:enable,35723:hint,35725:(f,s)=>f.useProgram(s),36007:(f,s)=>f.bindRenderbuffer(36161,s),36389:(f,s)=>{var d;return(d=f.bindTransformFeedback)==null?void 0:d.call(f,36386,s)},34229:(f,s)=>f.bindVertexArray(s),36006:bindFramebuffer,36010:bindFramebuffer,34964:bindBuffer,36662:bindBuffer,36663:bindBuffer,35053:bindBuffer,35055:bindBuffer,2886:(f,s)=>f.frontFace(s),33170:hint,2849:(f,s)=>f.lineWidth(s),32823:enable,32824:"polygonOffset",10752:"polygonOffset",35977:enable,32926:enable,32928:enable,32938:"sampleCoverage",32939:"sampleCoverage",3089:enable,3088:(f,s)=>f.scissor(...s),2960:enable,2961:(f,s)=>f.clearStencil(s),2968:(f,s)=>f.stencilMaskSeparate(1028,s),36005:(f,s)=>f.stencilMaskSeparate(1029,s),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(f,s)=>f.viewport(...s),34383:enable,10754:enable,12288:enable,12289:enable,12290:enable,12291:enable,12292:enable,12293:enable,12294:enable,12295:enable,3333:pixelStorei,3317:pixelStorei,37440:pixelStorei,37441:pixelStorei,37443:pixelStorei,3330:pixelStorei,3332:pixelStorei,3331:pixelStorei,3314:pixelStorei,32878:pixelStorei,3316:pixelStorei,3315:pixelStorei,32877:pixelStorei,framebuffer:(f,s)=>{const d=s&&"handle"in s?s.handle:s;return f.bindFramebuffer(36160,d)},blend:(f,s)=>s?f.enable(3042):f.disable(3042),blendColor:(f,s)=>f.blendColor(...s),blendEquation:(f,s)=>{const d=typeof s=="number"?[s,s]:s;f.blendEquationSeparate(...d)},blendFunc:(f,s)=>{const d=(s==null?void 0:s.length)===2?[...s,...s]:s;f.blendFuncSeparate(...d)},clearColor:(f,s)=>f.clearColor(...s),clearDepth:(f,s)=>f.clearDepth(s),clearStencil:(f,s)=>f.clearStencil(s),colorMask:(f,s)=>f.colorMask(...s),cull:(f,s)=>s?f.enable(2884):f.disable(2884),cullFace:(f,s)=>f.cullFace(s),depthTest:(f,s)=>s?f.enable(2929):f.disable(2929),depthFunc:(f,s)=>f.depthFunc(s),depthMask:(f,s)=>f.depthMask(s),depthRange:(f,s)=>f.depthRange(...s),dither:(f,s)=>s?f.enable(3024):f.disable(3024),derivativeHint:(f,s)=>{f.hint(35723,s)},frontFace:(f,s)=>f.frontFace(s),mipmapHint:(f,s)=>f.hint(33170,s),lineWidth:(f,s)=>f.lineWidth(s),polygonOffsetFill:(f,s)=>s?f.enable(32823):f.disable(32823),polygonOffset:(f,s)=>f.polygonOffset(...s),sampleCoverage:(f,s)=>f.sampleCoverage(...s),scissorTest:(f,s)=>s?f.enable(3089):f.disable(3089),scissor:(f,s)=>f.scissor(...s),stencilTest:(f,s)=>s?f.enable(2960):f.disable(2960),stencilMask:(f,s)=>{s=isArray$2(s)?s:[s,s];const[d,_]=s;f.stencilMaskSeparate(1028,d),f.stencilMaskSeparate(1029,_)},stencilFunc:(f,s)=>{s=isArray$2(s)&&s.length===3?[...s,...s]:s;const[d,_,S,T,F,M]=s;f.stencilFuncSeparate(1028,d,_,S),f.stencilFuncSeparate(1029,T,F,M)},stencilOp:(f,s)=>{s=isArray$2(s)&&s.length===3?[...s,...s]:s;const[d,_,S,T,F,M]=s;f.stencilOpSeparate(1028,d,_,S),f.stencilOpSeparate(1029,T,F,M)},viewport:(f,s)=>f.viewport(...s)};function getValue(f,s,d){return s[f]!==void 0?s[f]:d[f]}const GL_COMPOSITE_PARAMETER_SETTERS={blendEquation:(f,s,d)=>f.blendEquationSeparate(getValue(32777,s,d),getValue(34877,s,d)),blendFunc:(f,s,d)=>f.blendFuncSeparate(getValue(32969,s,d),getValue(32968,s,d),getValue(32971,s,d),getValue(32970,s,d)),polygonOffset:(f,s,d)=>f.polygonOffset(getValue(32824,s,d),getValue(10752,s,d)),sampleCoverage:(f,s,d)=>f.sampleCoverage(getValue(32938,s,d),getValue(32939,s,d)),stencilFuncFront:(f,s,d)=>f.stencilFuncSeparate(1028,getValue(2962,s,d),getValue(2967,s,d),getValue(2963,s,d)),stencilFuncBack:(f,s,d)=>f.stencilFuncSeparate(1029,getValue(34816,s,d),getValue(36003,s,d),getValue(36004,s,d)),stencilOpFront:(f,s,d)=>f.stencilOpSeparate(1028,getValue(2964,s,d),getValue(2965,s,d),getValue(2966,s,d)),stencilOpBack:(f,s,d)=>f.stencilOpSeparate(1029,getValue(34817,s,d),getValue(34818,s,d),getValue(34819,s,d))},GL_HOOKED_SETTERS={enable:(f,s)=>f({[s]:!0}),disable:(f,s)=>f({[s]:!1}),pixelStorei:(f,s,d)=>f({[s]:d}),hint:(f,s,d)=>f({[s]:d}),useProgram:(f,s)=>f({35725:s}),bindRenderbuffer:(f,s,d)=>f({36007:d}),bindTransformFeedback:(f,s,d)=>f({36389:d}),bindVertexArray:(f,s)=>f({34229:s}),bindFramebuffer:(f,s,d)=>{switch(s){case 36160:return f({36006:d,36010:d});case 36009:return f({36006:d});case 36008:return f({36010:d});default:return null}},bindBuffer:(f,s,d)=>{const _={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[s];return _?f({[_]:d}):{valueChanged:!0}},blendColor:(f,s,d,_,S)=>f({32773:new Float32Array([s,d,_,S])}),blendEquation:(f,s)=>f({32777:s,34877:s}),blendEquationSeparate:(f,s,d)=>f({32777:s,34877:d}),blendFunc:(f,s,d)=>f({32969:s,32968:d,32971:s,32970:d}),blendFuncSeparate:(f,s,d,_,S)=>f({32969:s,32968:d,32971:_,32970:S}),clearColor:(f,s,d,_,S)=>f({3106:new Float32Array([s,d,_,S])}),clearDepth:(f,s)=>f({2931:s}),clearStencil:(f,s)=>f({2961:s}),colorMask:(f,s,d,_,S)=>f({3107:[s,d,_,S]}),cullFace:(f,s)=>f({2885:s}),depthFunc:(f,s)=>f({2932:s}),depthRange:(f,s,d)=>f({2928:new Float32Array([s,d])}),depthMask:(f,s)=>f({2930:s}),frontFace:(f,s)=>f({2886:s}),lineWidth:(f,s)=>f({2849:s}),polygonOffset:(f,s,d)=>f({32824:s,10752:d}),sampleCoverage:(f,s,d)=>f({32938:s,32939:d}),scissor:(f,s,d,_,S)=>f({3088:new Int32Array([s,d,_,S])}),stencilMask:(f,s)=>f({2968:s,36005:s}),stencilMaskSeparate:(f,s,d)=>f({[s===1028?2968:36005]:d}),stencilFunc:(f,s,d,_)=>f({2962:s,2967:d,2963:_,34816:s,36003:d,36004:_}),stencilFuncSeparate:(f,s,d,_,S)=>f({[s===1028?2962:34816]:d,[s===1028?2967:36003]:_,[s===1028?2963:36004]:S}),stencilOp:(f,s,d,_)=>f({2964:s,2965:d,2966:_,34817:s,34818:d,34819:_}),stencilOpSeparate:(f,s,d,_,S)=>f({[s===1028?2964:34817]:d,[s===1028?2965:34818]:_,[s===1028?2966:34819]:S}),viewport:(f,s,d,_,S)=>f({2978:[s,d,_,S]})},isEnabled=(f,s)=>f.isEnabled(s),GL_PARAMETER_GETTERS={3042:isEnabled,2884:isEnabled,2929:isEnabled,3024:isEnabled,32823:isEnabled,32926:isEnabled,32928:isEnabled,3089:isEnabled,2960:isEnabled,35977:isEnabled},NON_CACHE_PARAMETERS=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function setGLParameters(f,s){if(isObjectEmpty$2(s))return;const d={};for(const S in s){const T=Number(S),F=GL_PARAMETER_SETTERS[S];F&&(typeof F=="string"?d[F]=!0:F(f,s[S],T))}const _=f.state&&f.state.cache;if(_)for(const S in d){const T=GL_COMPOSITE_PARAMETER_SETTERS[S];T(f,s,_)}}function getGLParameters(f,s=GL_PARAMETER_DEFAULTS){if(typeof s=="number"){const S=s,T=GL_PARAMETER_GETTERS[S];return T?T(f,S):f.getParameter(S)}const d=Array.isArray(s)?s:Object.keys(s),_={};for(const S of d){const T=GL_PARAMETER_GETTERS[S];_[S]=T?T(f,Number(S)):f.getParameter(Number(S))}return _}function resetGLParameters(f){setGLParameters(f,GL_PARAMETER_DEFAULTS)}function isObjectEmpty$2(f){for(const s in f)return!1;return!0}function deepArrayEqual(f,s){if(f===s)return!0;const d=Array.isArray(f)||ArrayBuffer.isView(f),_=Array.isArray(s)||ArrayBuffer.isView(s);if(d&&_&&f.length===s.length){for(let S=0;S<f.length;++S)if(f[S]!==s[S])return!1;return!0}return!1}class GLState{constructor(s,{copyState:d=!1,log:_=()=>{}}={}){Bt(this,"gl");Bt(this,"program",null);Bt(this,"stateStack",[]);Bt(this,"enable",!0);Bt(this,"cache");Bt(this,"log");this.gl=s,this.cache=d?getGLParameters(s):Object.assign({},GL_PARAMETER_DEFAULTS),this.log=_,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(s={}){this.stateStack.push({})}pop(){assert$5(this.stateStack.length>0);const s=this.stateStack[this.stateStack.length-1];setGLParameters(this.gl,s),this.stateStack.pop()}_updateCache(s){let d=!1,_;const S=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const T in s){assert$5(T!==void 0);const F=s[T],M=this.cache[T];deepArrayEqual(F,M)||(d=!0,_=M,S&&!(T in S)&&(S[T]=M),this.cache[T]=F)}return{valueChanged:d,oldValue:_}}}function getContextState(f){return f.state}function trackContextState(f,s){const{enable:d=!0,copyState:_}=s;if(assert$5(_!==void 0),!f.state){f.state=new GLState(f,{copyState:_}),installProgramSpy(f);for(const T in GL_HOOKED_SETTERS){const F=GL_HOOKED_SETTERS[T];installSetterSpy(f,T,F)}installGetterOverride(f,"getParameter"),installGetterOverride(f,"isEnabled")}const S=getContextState(f);return S.enable=d,f}function pushContextState(f){let s=getContextState(f);s||(trackContextState(f,{copyState:!1}),s=getContextState(f)),s.push()}function popContextState(f){const s=getContextState(f);assert$5(s),s.pop()}function installGetterOverride(f,s){const d=f[s].bind(f);f[s]=function(S){if(S===void 0||NON_CACHE_PARAMETERS.has(S))return d(S);const T=getContextState(f);return S in T.cache||(T.cache[S]=d(S)),T.enable?T.cache[S]:d(S)},Object.defineProperty(f[s],"name",{value:`${s}-from-cache`,configurable:!1})}function installSetterSpy(f,s,d){if(!f[s])return;const _=f[s].bind(f);f[s]=function(...T){const F=getContextState(f),{valueChanged:M,oldValue:P}=d(F._updateCache,...T);return M&&_(...T),P},Object.defineProperty(f[s],"name",{value:`${s}-to-cache`,configurable:!1})}function installProgramSpy(f){const s=f.useProgram.bind(f);f.useProgram=function(_){const S=getContextState(f);S.program!==_&&(s(_),S.program=_)}}const DEFAULT_CONTEXT_PROPS={powerPreference:"high-performance",onContextLost:()=>console.error("WebGL context lost"),onContextRestored:()=>console.info("WebGL context restored")};function createBrowserContext(f,s){s={...DEFAULT_CONTEXT_PROPS,...s};let d=null;const _=T=>d=T.statusMessage||d;f.addEventListener("webglcontextcreationerror",_,!1);let S=null;if(S||(S=f.getContext("webgl2",s)),f.removeEventListener("webglcontextcreationerror",_,!1),!S)throw new Error(`Failed to create WebGL context: ${d||"Unknown error"}`);if(s.onContextLost){const{onContextLost:T}=s;f.addEventListener("webglcontextlost",F=>T(F),!1)}if(s.onContextRestored){const{onContextRestored:T}=s;f.addEventListener("webglcontextrestored",F=>T(F),!1)}return S}function getWebGLExtension(f,s,d){return d[s]===void 0&&(d[s]=f.getExtension(s)||null),d[s]}function getDeviceInfo(f,s){const d=f.getParameter(7936),_=f.getParameter(7937);getWebGLExtension(f,"WEBGL_debug_renderer_info",s);const S=s.WEBGL_debug_renderer_info,T=f.getParameter(S?S.UNMASKED_VENDOR_WEBGL:7936),F=f.getParameter(S?S.UNMASKED_RENDERER_WEBGL:7937),M=T||d,P=F||_,H=f.getParameter(7938),J=identifyGPUVendor(M,P),K=identifyGPUBackend(M,P),z=identifyGPUType(M,P);return{type:"webgl",gpu:J,gpuType:z,gpuBackend:K,vendor:M,renderer:P,version:H,shadingLanguage:"glsl",shadingLanguageVersion:300}}function identifyGPUVendor(f,s){return/NVIDIA/i.exec(f)||/NVIDIA/i.exec(s)?"nvidia":/INTEL/i.exec(f)||/INTEL/i.exec(s)?"intel":/Apple/i.exec(f)||/Apple/i.exec(s)?"apple":/AMD/i.exec(f)||/AMD/i.exec(s)||/ATI/i.exec(f)||/ATI/i.exec(s)?"amd":/SwiftShader/i.exec(f)||/SwiftShader/i.exec(s)?"software":"unknown"}function identifyGPUBackend(f,s){return/Metal/i.exec(f)||/Metal/i.exec(s)?"metal":/ANGLE/i.exec(f)||/ANGLE/i.exec(s)?"opengl":"unknown"}function identifyGPUType(f,s){if(/SwiftShader/i.exec(f)||/SwiftShader/i.exec(s))return"cpu";switch(identifyGPUVendor(f,s)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}function getGLFromVertexType(f){switch(f){case"uint8":return 5121;case"sint8":return 5120;case"unorm8":return 5121;case"snorm8":return 5120;case"uint16":return 5123;case"sint16":return 5122;case"unorm16":return 5123;case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(f))}const texture_compression_bc="texture-compression-bc",texture_compression_astc="texture-compression-astc",texture_compression_etc2="texture-compression-etc2",texture_compression_etc1_webgl="texture-compression-etc1-webgl",texture_compression_pvrtc_webgl="texture-compression-pvrtc-webgl",texture_compression_atc_webgl="texture-compression-atc-webgl",float32_renderable="float32-renderable-webgl",float16_renderable="float16-renderable-webgl",rgb9e5ufloat_renderable="rgb9e5ufloat_renderable-webgl",snorm8_renderable="snorm8-renderable-webgl",norm16_renderable="norm16-renderable-webgl",snorm16_renderable="snorm16-renderable-webgl",float32_filterable="float32-filterable",float16_filterable="float16-filterable-webgl",X_S3TC="WEBGL_compressed_texture_s3tc",X_S3TC_SRGB="WEBGL_compressed_texture_s3tc_srgb",X_RGTC="EXT_texture_compression_rgtc",X_BPTC="EXT_texture_compression_bptc",X_ETC2="WEBGL_compressed_texture_etc",X_ASTC="WEBGL_compressed_texture_astc",X_ETC1="WEBGL_compressed_texture_etc1",X_PVRTC="WEBGL_compressed_texture_pvrtc",X_ATC="WEBGL_compressed_texture_atc",EXT_texture_norm16="EXT_texture_norm16",EXT_render_snorm="EXT_render_snorm",EXT_color_buffer_float="EXT_color_buffer_float",TEXTURE_FEATURES={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat_renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[EXT_render_snorm],"norm16-renderable-webgl":[EXT_texture_norm16],"snorm16-renderable-webgl":[EXT_texture_norm16,EXT_render_snorm],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[X_S3TC,X_S3TC_SRGB,X_RGTC,X_BPTC],"texture-compression-bc5-webgl":[X_RGTC],"texture-compression-bc7-webgl":[X_BPTC],"texture-compression-etc2":[X_ETC2],"texture-compression-astc":[X_ASTC],"texture-compression-etc1-webgl":[X_ETC1],"texture-compression-pvrtc-webgl":[X_PVRTC],"texture-compression-atc-webgl":[X_ATC]};function isTextureFeature(f){return f in TEXTURE_FEATURES}function checkTextureFeature(f,s,d){return(TEXTURE_FEATURES[s]||[]).every(S=>getWebGLExtension(f,S,d))}const TEXTURE_FORMATS={"rgb8unorm-unsized":{gl:6407,b:4,c:2,bpp:4,dataFormat:6407,types:[5121,33635]},"rgba8unorm-unsized":{gl:6408,b:4,c:2,bpp:4,dataFormat:6408,types:[5121,32819,32820]},r8unorm:{gl:33321,b:1,c:1,rb:!0},r8snorm:{gl:36756,b:1,c:1,render:snorm8_renderable},r8uint:{gl:33330,b:1,c:1,rb:!0},r8sint:{gl:33329,b:1,c:1,rb:!0},rg8unorm:{gl:33323,b:2,c:2,rb:!0},rg8snorm:{gl:36757,b:2,c:2,render:snorm8_renderable},rg8uint:{gl:33336,b:2,c:2,rb:!0},rg8sint:{gl:33335,b:2,c:2,rb:!0},r16uint:{gl:33332,b:2,c:1,rb:!0},r16sint:{gl:33331,b:2,c:1,rb:!0},r16float:{gl:33325,b:2,c:1,render:float16_renderable,filter:"float16-filterable-webgl",rb:!0},"r16unorm-webgl":{gl:33322,b:2,c:1,f:norm16_renderable,rb:!0},"r16snorm-webgl":{gl:36760,b:2,c:1,f:snorm16_renderable},"rgba4unorm-webgl":{gl:32854,b:2,c:4,wgpu:!1,rb:!0},"rgb565unorm-webgl":{gl:36194,b:2,c:4,wgpu:!1,rb:!0},"rgb5a1unorm-webgl":{gl:32855,b:2,c:4,wgpu:!1,rb:!0},"rgb8unorm-webgl":{gl:32849,b:3,c:3,wgpu:!1},"rgb8snorm-webgl":{gl:36758,b:3,c:3,wgpu:!1},rgba8unorm:{gl:32856,b:4,c:2,bpp:4},"rgba8unorm-srgb":{gl:35907,b:4,c:4,bpp:4},rgba8snorm:{gl:36759,b:4,c:4,render:snorm8_renderable},rgba8uint:{gl:36220,b:4,c:4,bpp:4},rgba8sint:{gl:36238,b:4,c:4,bpp:4},bgra8unorm:{b:4,c:4},"bgra8unorm-srgb":{b:4,c:4},rg16uint:{gl:33338,b:4,c:1,bpp:4},rg16sint:{gl:33337,b:4,c:2,bpp:4},rg16float:{gl:33327,bpp:4,b:4,c:2,render:float16_renderable,filter:float16_filterable,rb:!0},"rg16unorm-webgl":{gl:33324,b:2,c:2,render:norm16_renderable},"rg16snorm-webgl":{gl:36761,b:2,c:2,render:snorm16_renderable},r32uint:{gl:33334,b:4,c:1,bpp:4,rb:!0},r32sint:{gl:33333,b:4,c:1,bpp:4,rb:!0},r32float:{gl:33326,bpp:4,b:4,c:1,render:float32_renderable,filter:float32_filterable},rgb9e5ufloat:{gl:35901,b:4,c:3,p:1,render:rgb9e5ufloat_renderable},rg11b10ufloat:{gl:35898,b:4,c:3,p:1,render:float32_renderable,rb:!0},rgb10a2unorm:{gl:32857,b:4,c:4,p:1,rb:!0},"rgb10a2uint-webgl":{b:4,c:4,gl:36975,p:1,wgpu:!1,bpp:4,rb:!0},"rgb16unorm-webgl":{gl:32852,b:2,c:3,f:norm16_renderable},"rgb16snorm-webgl":{gl:36762,b:2,c:3,f:norm16_renderable},rg32uint:{gl:33340,b:8,c:2,rb:!0},rg32sint:{gl:33339,b:8,c:2,rb:!0},rg32float:{gl:33328,b:8,c:2,render:float32_renderable,filter:float32_filterable,rb:!0},rgba16uint:{gl:36214,b:8,c:4,rb:!0},rgba16sint:{gl:36232,b:8,c:4,rb:!0},rgba16float:{gl:34842,b:8,c:4,render:float16_renderable,filter:float16_filterable},"rgba16unorm-webgl":{gl:32859,b:2,c:4,render:norm16_renderable,rb:!0},"rgba16snorm-webgl":{gl:36763,b:2,c:4,render:snorm16_renderable},"rgb32float-webgl":{gl:34837,render:float32_renderable,filter:float32_filterable,gl2ext:EXT_color_buffer_float,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,b:16,c:4,rb:!0},rgba32sint:{gl:36226,b:16,c:4,rb:!0},rgba32float:{gl:34836,b:16,c:4,render:float32_renderable,filter:float32_filterable,rb:!0},stencil8:{gl:36168,b:1,c:1,attachment:36128,rb:!0},depth16unorm:{gl:33189,b:2,c:1,attachment:36096,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,b:3,c:1,attachment:36096,dataFormat:6402,types:[5125]},depth32float:{gl:36012,b:4,c:1,attachment:36096,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth24unorm-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,dataFormat:34041,types:[34042],rb:!0},"depth32float-stencil8":{gl:36013,b:5,c:2,p:1,attachment:33306,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:X_S3TC,f:texture_compression_bc},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:X_S3TC_SRGB,f:texture_compression_bc},"bc1-rgba-unorm":{gl:33777,x:X_S3TC,f:texture_compression_bc},"bc1-rgba-unorm-srgb":{gl:35916,x:X_S3TC_SRGB,f:texture_compression_bc},"bc2-rgba-unorm":{gl:33778,x:X_S3TC,f:texture_compression_bc},"bc2-rgba-unorm-srgb":{gl:35918,x:X_S3TC_SRGB,f:texture_compression_bc},"bc3-rgba-unorm":{gl:33779,x:X_S3TC,f:texture_compression_bc},"bc3-rgba-unorm-srgb":{gl:35919,x:X_S3TC_SRGB,f:texture_compression_bc},"bc4-r-unorm":{gl:36283,x:X_RGTC,f:texture_compression_bc},"bc4-r-snorm":{gl:36284,x:X_RGTC,f:texture_compression_bc},"bc5-rg-unorm":{gl:36285,x:X_RGTC,f:texture_compression_bc},"bc5-rg-snorm":{gl:36286,x:X_RGTC,f:texture_compression_bc},"bc6h-rgb-ufloat":{gl:36495,x:X_BPTC,f:texture_compression_bc},"bc6h-rgb-float":{gl:36494,x:X_BPTC,f:texture_compression_bc},"bc7-rgba-unorm":{gl:36492,x:X_BPTC,f:texture_compression_bc},"bc7-rgba-unorm-srgb":{gl:36493,x:X_BPTC,f:texture_compression_bc},"etc2-rgb8unorm":{gl:37492,f:texture_compression_etc2},"etc2-rgb8unorm-srgb":{gl:37494,f:texture_compression_etc2},"etc2-rgb8a1unorm":{gl:37496,f:texture_compression_etc2},"etc2-rgb8a1unorm-srgb":{gl:37497,f:texture_compression_etc2},"etc2-rgba8unorm":{gl:37493,f:texture_compression_etc2},"etc2-rgba8unorm-srgb":{gl:37495,f:texture_compression_etc2},"eac-r11unorm":{gl:37488,f:texture_compression_etc2},"eac-r11snorm":{gl:37489,f:texture_compression_etc2},"eac-rg11unorm":{gl:37490,f:texture_compression_etc2},"eac-rg11snorm":{gl:37491,f:texture_compression_etc2},"astc-4x4-unorm":{gl:37808,f:texture_compression_astc},"astc-4x4-unorm-srgb":{gl:37840,f:texture_compression_astc},"astc-5x4-unorm":{gl:37809,f:texture_compression_astc},"astc-5x4-unorm-srgb":{gl:37841,f:texture_compression_astc},"astc-5x5-unorm":{gl:37810,f:texture_compression_astc},"astc-5x5-unorm-srgb":{gl:37842,f:texture_compression_astc},"astc-6x5-unorm":{gl:37811,f:texture_compression_astc},"astc-6x5-unorm-srgb":{gl:37843,f:texture_compression_astc},"astc-6x6-unorm":{gl:37812,f:texture_compression_astc},"astc-6x6-unorm-srgb":{gl:37844,f:texture_compression_astc},"astc-8x5-unorm":{gl:37813,f:texture_compression_astc},"astc-8x5-unorm-srgb":{gl:37845,f:texture_compression_astc},"astc-8x6-unorm":{gl:37814,f:texture_compression_astc},"astc-8x6-unorm-srgb":{gl:37846,f:texture_compression_astc},"astc-8x8-unorm":{gl:37815,f:texture_compression_astc},"astc-8x8-unorm-srgb":{gl:37847,f:texture_compression_astc},"astc-10x5-unorm":{gl:37819,f:texture_compression_astc},"astc-10x5-unorm-srgb":{gl:37851,f:texture_compression_astc},"astc-10x6-unorm":{gl:37817,f:texture_compression_astc},"astc-10x6-unorm-srgb":{gl:37849,f:texture_compression_astc},"astc-10x8-unorm":{gl:37818,f:texture_compression_astc},"astc-10x8-unorm-srgb":{gl:37850,f:texture_compression_astc},"astc-10x10-unorm":{gl:37819,f:texture_compression_astc},"astc-10x10-unorm-srgb":{gl:37851,f:texture_compression_astc},"astc-12x10-unorm":{gl:37820,f:texture_compression_astc},"astc-12x10-unorm-srgb":{gl:37852,f:texture_compression_astc},"astc-12x12-unorm":{gl:37821,f:texture_compression_astc},"astc-12x12-unorm-srgb":{gl:37853,f:texture_compression_astc},"pvrtc-rgb4unorm-webgl":{gl:35840,f:texture_compression_pvrtc_webgl},"pvrtc-rgba4unorm-webgl":{gl:35842,f:texture_compression_pvrtc_webgl},"pvrtc-rbg2unorm-webgl":{gl:35841,f:texture_compression_pvrtc_webgl},"pvrtc-rgba2unorm-webgl":{gl:35843,f:texture_compression_pvrtc_webgl},"etc1-rbg-unorm-webgl":{gl:36196,f:texture_compression_etc1_webgl},"atc-rgb-unorm-webgl":{gl:35986,f:texture_compression_atc_webgl},"atc-rgba-unorm-webgl":{gl:35986,f:texture_compression_atc_webgl},"atc-rgbai-unorm-webgl":{gl:34798,f:texture_compression_atc_webgl}},DATA_FORMAT_CHANNELS={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},TYPE_SIZES={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function isTextureFormatSupported(f,s,d){const _=TEXTURE_FORMATS[s];if(!_||_.gl===void 0)return!1;const S=_.x||_.gl2ext;return S?!!getWebGLExtension(f,S,d):!0}function convertTextureFormatToGL(f){const s=TEXTURE_FORMATS[f],d=s==null?void 0:s.gl;if(d===void 0)throw new Error(`Unsupported texture format ${f}`);return d}function isTextureFormatFilterable(f,s,d){if(!isTextureFormatSupported(f,s,d)||s.startsWith("depth")||s.startsWith("stencil"))return!1;try{if(decodeTextureFormat(s).signed)return!1}catch{return!1}return s.endsWith("32float")?!!getWebGLExtension(f,"OES_texture_float_linear, extensions",d):s.endsWith("16float")?!!getWebGLExtension(f,"OES_texture_half_float_linear, extensions",d):!0}function isTextureFormatRenderable(f,s,d){return!(!isTextureFormatSupported(f,s,d)||typeof s=="number")}function getWebGLTextureParameters(f){var S;const s=TEXTURE_FORMATS[f],d=convertTextureFormatToGL(f),_=decodeTextureFormat(f);return{format:d,dataFormat:(s==null?void 0:s.dataFormat)||getWebGLPixelDataFormat(_.format,_.integer,_.normalized,d),type:_.dataType?getGLFromVertexType(_.dataType):((S=s==null?void 0:s.types)==null?void 0:S[0])||5121,compressed:_.compressed}}function getDepthStencilAttachmentWebGL(f){const s=TEXTURE_FORMATS[f];if(!(s!=null&&s.attachment))throw new Error(`${f} is not a depth stencil format`);return s.attachment}function getTextureFormatBytesPerPixel(f){const s=getWebGLTextureParameters(f),d=DATA_FORMAT_CHANNELS[s.dataFormat]||4,_=TYPE_SIZES[s.type]||1;return d*_}function getWebGLPixelDataFormat(f,s,d,_){if(_===6408||_===6407)return _;switch(f){case"r":return s&&!d?36244:6403;case"rg":return s&&!d?33320:33319;case"rgb":return s&&!d?36248:6407;case"rgba":return s&&!d?36249:6408;default:return 6408}}const WEBGL_FEATURES={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class WebGLDeviceFeatures extends DeviceFeatures{constructor(d,_,S){super([],S);Bt(this,"gl");Bt(this,"extensions");Bt(this,"testedFeatures",new Set);this.gl=d,this.extensions=_,getWebGLExtension(d,"EXT_color_buffer_float",_)}*[Symbol.iterator](){const d=this.getFeatures();for(const _ of d)this.has(_)&&(yield _);return[]}has(d){return this.disabledFeatures[d]?!1:(this.testedFeatures.has(d)||(this.testedFeatures.add(d),isTextureFeature(d)&&checkTextureFeature(this.gl,d,this.extensions)&&this.features.add(d),this.getWebGLFeature(d)&&this.features.add(d)),this.features.has(d))}initializeFeatures(){const d=this.getFeatures().filter(_=>_!=="polygon-mode-webgl");for(const _ of d)this.has(_)}getFeatures(){return[...Object.keys(WEBGL_FEATURES),...Object.keys(TEXTURE_FEATURES)]}getWebGLFeature(d){const _=WEBGL_FEATURES[d];return typeof _=="string"?!!getWebGLExtension(this.gl,_,this.extensions):!!_}}class WebGLDeviceLimits extends DeviceLimits{constructor(d){super();Bt(this,"gl");Bt(this,"limits",{});this.gl=d}get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}getParameter(d){return this.limits[d]===void 0&&(this.limits[d]=this.gl.getParameter(d)),this.limits[d]}}function withGLParameters(f,s,d){if(isObjectEmpty$1(s))return d(f);const{nocatch:_=!0}=s;pushContextState(f),setGLParameters(f,s);let S;if(_)S=d(f),popContextState(f);else try{S=d(f)}finally{popContextState(f)}return S}function isObjectEmpty$1(f){for(const s in f)return!1;return!0}function withDeviceAndGLParameters(f,s,d,_){if(isObjectEmpty$3(s))return _(f);const S=f;pushContextState(S.gl);try{return setDeviceParameters(f,s),setGLParameters(S.gl,d),_(f)}finally{popContextState(S.gl)}}function setDeviceParameters(f,s){const d=f,{gl:_}=d;if(s.cullMode)switch(s.cullMode){case"none":_.disable(2884);break;case"front":_.enable(2884),_.cullFace(1028);break;case"back":_.enable(2884),_.cullFace(1029);break}if(s.frontFace&&_.frontFace(map$1("frontFace",s.frontFace,{ccw:2305,cw:2304})),s.unclippedDepth&&f.features.has("depth-clip-control")&&_.enable(34383),s.depthBias!==void 0&&(_.enable(32823),_.polygonOffset(s.depthBias,s.depthBiasSlopeScale||0)),s.provokingVertex&&f.features.has("provoking-vertex-webgl")){const T=d.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,F=map$1("provokingVertex",s.provokingVertex,{first:36429,last:36430});T==null||T.provokingVertexWEBGL(F)}if((s.polygonMode||s.polygonOffsetLine)&&f.features.has("polygon-mode-webgl")){if(s.polygonMode){const T=d.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,F=map$1("polygonMode",s.polygonMode,{fill:6914,line:6913});T==null||T.polygonModeWEBGL(1028,F),T==null||T.polygonModeWEBGL(1029,F)}s.polygonOffsetLine&&_.enable(10754)}if(f.features.has("shader-clip-cull-distance-webgl")&&(s.clipDistance0&&_.enable(12288),s.clipDistance1&&_.enable(12289),s.clipDistance2&&_.enable(12290),s.clipDistance3&&_.enable(12291),s.clipDistance4&&_.enable(12292),s.clipDistance5&&_.enable(12293),s.clipDistance6&&_.enable(12294),s.clipDistance7&&_.enable(12295)),s.depthWriteEnabled!==void 0&&_.depthMask(mapBoolean("depthWriteEnabled",s.depthWriteEnabled)),s.depthCompare&&(s.depthCompare!=="always"?_.enable(2929):_.disable(2929),_.depthFunc(convertCompareFunction("depthCompare",s.depthCompare))),s.stencilWriteMask){const S=s.stencilWriteMask;_.stencilMaskSeparate(1028,S),_.stencilMaskSeparate(1029,S)}if(s.stencilReadMask&&log.warn("stencilReadMask not supported under WebGL"),s.stencilCompare){const S=s.stencilReadMask||4294967295,T=convertCompareFunction("depthCompare",s.stencilCompare);s.stencilCompare!=="always"?_.enable(2960):_.disable(2960),_.stencilFuncSeparate(1028,T,0,S),_.stencilFuncSeparate(1029,T,0,S)}if(s.stencilPassOperation&&s.stencilFailOperation&&s.stencilDepthFailOperation){const S=convertStencilOperation("stencilPassOperation",s.stencilPassOperation),T=convertStencilOperation("stencilFailOperation",s.stencilFailOperation),F=convertStencilOperation("stencilDepthFailOperation",s.stencilDepthFailOperation);_.stencilOpSeparate(1028,T,F,S),_.stencilOpSeparate(1029,T,F,S)}if(s.blendColorOperation||s.blendAlphaOperation){_.enable(3042);const S=convertBlendOperationToEquation("blendColorOperation",s.blendColorOperation||"add"),T=convertBlendOperationToEquation("blendAlphaOperation",s.blendAlphaOperation||"add");_.blendEquationSeparate(S,T);const F=convertBlendFactorToFunction("blendColorSrcFactor",s.blendColorSrcFactor||"one"),M=convertBlendFactorToFunction("blendColorDstFactor",s.blendColorDstFactor||"zero"),P=convertBlendFactorToFunction("blendAlphaSrcFactor",s.blendAlphaSrcFactor||"one"),H=convertBlendFactorToFunction("blendAlphaDstFactor",s.blendAlphaDstFactor||"zero");_.blendFuncSeparate(F,M,P,H)}}function convertCompareFunction(f,s){return map$1(f,s,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function convertStencilOperation(f,s){return map$1(f,s,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function convertBlendOperationToEquation(f,s){return map$1(f,s,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function convertBlendFactorToFunction(f,s){return map$1(f,s,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function message(f,s){return`Illegal parameter ${s} for ${f}`}function map$1(f,s,d){if(!(s in d))throw new Error(message(f,s));return d[s]}function mapBoolean(f,s){return s}function convertSamplerParametersToWebGL(f){const s={};return f.addressModeU&&(s[10242]=convertAddressMode(f.addressModeU)),f.addressModeV&&(s[10243]=convertAddressMode(f.addressModeV)),f.addressModeW&&(s[32882]=convertAddressMode(f.addressModeW)),f.magFilter&&(s[10240]=convertMaxFilterMode(f.magFilter)),(f.minFilter||f.mipmapFilter)&&(s[10241]=convertMinFilterMode(f.minFilter||"linear",f.mipmapFilter)),f.lodMinClamp!==void 0&&(s[33082]=f.lodMinClamp),f.lodMaxClamp!==void 0&&(s[33083]=f.lodMaxClamp),f.type==="comparison-sampler"&&(s[34892]=34894),f.compare&&(s[34893]=convertCompareFunction("compare",f.compare)),f.maxAnisotropy&&(s[34046]=f.maxAnisotropy),s}function convertAddressMode(f){switch(f){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function convertMaxFilterMode(f){switch(f){case"nearest":return 9728;case"linear":return 9729}}function convertMinFilterMode(f,s){if(!s)return convertMaxFilterMode(f);switch(f){case"nearest":return s==="nearest"?9984:9986;case"linear":return s==="nearest"?9985:9987}}class WEBGLBuffer extends Buffer$1{constructor(d,_={}){super(d,_);Bt(this,"device");Bt(this,"gl");Bt(this,"handle");Bt(this,"glTarget");Bt(this,"glUsage");Bt(this,"glIndexType",5123);Bt(this,"byteLength");Bt(this,"bytesUsed");this.device=d,this.gl=this.device.gl;const S=typeof _=="object"?_.handle:void 0;this.handle=S||this.gl.createBuffer(),d.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=getWebGLTarget(this.props.usage),this.glUsage=getWebGLUsage(this.props.usage),this.glIndexType=this.props.indexType==="uint32"?5125:5123,_.data?this._initWithData(_.data,_.byteOffset,_.byteLength):this._initWithByteLength(_.byteLength||0)}_initWithData(d,_=0,S=d.byteLength+_){const T=this.glTarget;this.gl.bindBuffer(T,this.handle),this.gl.bufferData(T,S,this.glUsage),this.gl.bufferSubData(T,_,d),this.gl.bindBuffer(T,null),this.bytesUsed=S,this.byteLength=S,this._setDebugData(d,_,S),this.trackAllocatedMemory(S)}_initWithByteLength(d){assert$5(d>=0);let _=d;d===0&&(_=new Float32Array(0));const S=this.glTarget;return this.gl.bindBuffer(S,this.handle),this.gl.bufferData(S,_,this.glUsage),this.gl.bindBuffer(S,null),this.bytesUsed=d,this.byteLength=d,this._setDebugData(null,0,d),this.trackAllocatedMemory(d),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(d,_=0){this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,_,d),this.gl.bindBuffer(36663,null),this._setDebugData(d,_,d.byteLength)}async readAsync(d=0,_){return this.readSyncWebGL(d,_)}readSyncWebGL(d=0,_){_=_??this.byteLength-d;const S=new Uint8Array(_),T=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,d,S,T,_),this.gl.bindBuffer(36662,null),this._setDebugData(S,d,_),S}}function getWebGLTarget(f){return f&Buffer$1.INDEX?34963:f&Buffer$1.VERTEX?34962:f&Buffer$1.UNIFORM?35345:34962}function getWebGLUsage(f){return f&Buffer$1.INDEX||f&Buffer$1.VERTEX?35044:f&Buffer$1.UNIFORM?35048:35044}class WEBGLSampler extends Sampler{constructor(d,_){super(d,_);Bt(this,"device");Bt(this,"handle");Bt(this,"parameters");this.device=d,this.parameters=convertSamplerParametersToWebGL(_),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(d){for(const[_,S]of Object.entries(d)){const T=Number(_);switch(T){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,T,S);break;default:this.device.gl.samplerParameteri(this.handle,T,S);break}}}}class WEBGLTextureView extends TextureView{constructor(d,_){super(d,{...Texture.defaultProps,..._});Bt(this,"device");Bt(this,"gl");Bt(this,"handle");Bt(this,"texture");this.device=d,this.gl=this.device.gl,this.handle=null,this.texture=_.texture}}const DEFAULT_WEBGL_TEXTURE_PROPS={parameters:{},pixelStore:{},pixels:null,border:0,dataFormat:void 0,textureUnit:void 0,target:void 0},wB=class wB extends Texture{constructor(d,_){var S;super(d,{...DEFAULT_WEBGL_TEXTURE_PROPS,format:"rgba8unorm",..._});Bt(this,"MAX_ATTRIBUTES");Bt(this,"device");Bt(this,"gl");Bt(this,"handle");Bt(this,"sampler");Bt(this,"view");Bt(this,"glFormat");Bt(this,"type");Bt(this,"dataFormat");Bt(this,"mipmaps");Bt(this,"target");Bt(this,"textureUnit");Bt(this,"loaded",!1);Bt(this,"_video");this.device=d,this.gl=this.device.gl,this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glFormat=6408,this.target=getWebGLTextureTarget(this.props),this.loaded=!1,typeof((S=this.props)==null?void 0:S.data)=="string"&&Object.assign(this.props,{data:loadImage(this.props.data)}),this.initialize(this.props),Object.seal(this)}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}toString(){return`Texture(${this.id},${this.width}x${this.height})`}createView(d){return new WEBGLTextureView(this.device,{...d,texture:this})}initialize(d={}){if(this.props.dimension==="cube")return this.initializeCube(d);let _=d.data;if(_ instanceof Promise)return _.then(pe=>this.initialize(Object.assign({},d,{pixels:pe,data:pe}))),this;const S=typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement;if(S&&_.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,_.addEventListener("loadeddata",()=>this.initialize(d)),this;const{parameters:T={}}=d,{pixels:F=null,pixelStore:M={},textureUnit:P=void 0,mipmaps:H=!0}=d;_||(_=F);let{width:J,height:K,dataFormat:z,type:oe,compressed:se=!1}=d;const{depth:ae=0}=d,ge=convertTextureFormatToGL(d.format);return{width:J,height:K,compressed:se,dataFormat:z,type:oe}=this._deduceParameters({format:d.format,type:oe,dataFormat:z,compressed:se,data:_,width:J,height:K}),this.width=J,this.height=K,this.glFormat=ge,this.type=oe,this.dataFormat=z,this.textureUnit=P,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),this.mipmaps=H,this.setImageData({data:_,width:J,height:K,depth:ae,format:d.format,type:oe,dataFormat:z,parameters:M,compressed:se}),this.setSampler(d.sampler),this._setSamplerParameters(T),this.view=this.createView({...this.props,mipLevelCount:1,arrayLayerCount:1}),H&&this.device.isTextureFormatFilterable(d.format)&&this.generateMipmap(),S&&(this._video={video:_,parameters:T,lastTime:_.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?_.currentTime:-1}),this}initializeCube(d){const{mipmaps:_=!0,parameters:S={}}=d;return this.setCubeMapImageData(d).then(()=>{this.loaded=!0,_&&this.generateMipmap(d),this.setSampler(d.sampler),this._setSamplerParameters(S)}),this}setSampler(d={}){let _;d instanceof WEBGLSampler?(this.sampler=d,_=d.props):(this.sampler=new WEBGLSampler(this.device,d),_=d);const S=convertSamplerParametersToWebGL(_);return this._setSamplerParameters(S),this}resize(d){const{height:_,width:S,mipmaps:T=!1}=d;return S!==this.width||_!==this.height?this.initialize({width:S,height:_,format:this.format,type:this.type,dataFormat:this.dataFormat,mipmaps:T}):this}update(){if(this._video){const{video:d,parameters:_,lastTime:S}=this._video;if(S===d.currentTime||d.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:d,parameters:_}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=d.currentTime}}generateMipmap(d={}){return this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),withGLParameters(this.gl,d,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this}setImageData(d){if(this.props.dimension==="3d"||this.props.dimension==="2d-array")return this.setImageData3D(d);this.trackDeallocatedMemory("Texture");const{target:_=this.target,pixels:S=null,level:T=0,glFormat:F=this.glFormat,offset:M=0,parameters:P={}}=d;let{data:H=null,type:J=this.type,width:K=this.width,height:z=this.height,dataFormat:oe=this.dataFormat,compressed:se=!1}=d;H||(H=S),{type:J,dataFormat:oe,compressed:se,width:K,height:z}=this._deduceParameters({format:this.props.format,type:J,dataFormat:oe,compressed:se,data:H,width:K,height:z});const{gl:ae}=this;ae.bindTexture(this.target,this.handle);let ge=null;if({data:H,dataType:ge}=this._getDataType({data:H,compressed:se}),withGLParameters(this.gl,P,()=>{switch(ge){case"null":ae.texImage2D(_,T,F,K,z,0,oe,J,H);break;case"typed-array":ae.texImage2D(_,T,F,K,z,0,oe,J,H,M);break;case"buffer":this.device.gl.bindBuffer(35052,H.handle||H),this.device.gl.texImage2D(_,T,F,K,z,0,oe,J,M),this.device.gl.bindBuffer(35052,null);break;case"browser-object":ae.texImage2D(_,T,F,K,z,0,oe,J,H);break;case"compressed":for(const[pe,he]of H.entries())ae.compressedTexImage2D(_,pe,he.format,he.width,he.height,0,he.data);break;default:assert$5(!1,"Unknown image data type")}}),H&&H.byteLength)this.trackAllocatedMemory(H.byteLength,"Texture");else{const pe=getTextureFormatBytesPerPixel(this.props.format);this.trackAllocatedMemory(this.width*this.height*pe,"Texture")}return this.loaded=!0,this}setSubImageData({target:d=this.target,pixels:_=null,data:S=null,x:T=0,y:F=0,width:M=this.width,height:P=this.height,level:H=0,glFormat:J=this.glFormat,type:K=this.type,dataFormat:z=this.dataFormat,compressed:oe=!1,offset:se=0,parameters:ae={}}){if({type:K,dataFormat:z,compressed:oe,width:M,height:P}=this._deduceParameters({format:this.props.format,type:K,dataFormat:z,compressed:oe,data:S,width:M,height:P}),assert$5(this.depth===1,"texSubImage not supported for 3D textures"),S||(S=_),S&&S.data){const ge=S;S=ge.data,M=ge.shape[0],P=ge.shape[1]}S instanceof WEBGLBuffer&&(S=S.handle),this.gl.bindTexture(this.target,this.handle),withGLParameters(this.gl,ae,()=>{oe?this.gl.compressedTexSubImage2D(d,H,T,F,M,P,J,S):S===null?this.gl.texSubImage2D(d,H,T,F,M,P,z,K,null):ArrayBuffer.isView(S)?this.gl.texSubImage2D(d,H,T,F,M,P,z,K,S,se):typeof WebGLBuffer<"u"&&S instanceof WebGLBuffer?(this.device.gl.bindBuffer(35052,S),this.device.gl.texSubImage2D(d,H,T,F,M,P,z,K,se),this.device.gl.bindBuffer(35052,null)):this.device.gl.texSubImage2D(d,H,T,F,M,P,z,K,S)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(d={}){return log.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(d=this.textureUnit){const{gl:_}=this;return d!==void 0&&(this.textureUnit=d,_.activeTexture(33984+d)),_.bindTexture(this.target,this.handle),d}unbind(d=this.textureUnit){const{gl:_}=this;return d!==void 0&&(this.textureUnit=d,_.activeTexture(33984+d)),_.bindTexture(this.target,null),d}_getDataType({data:d,compressed:_=!1}){return _?{data:d,dataType:"compressed"}:d===null?{data:d,dataType:"null"}:ArrayBuffer.isView(d)?{data:d,dataType:"typed-array"}:d instanceof WEBGLBuffer?{data:d.handle,dataType:"buffer"}:typeof WebGLBuffer<"u"&&d instanceof WebGLBuffer?{data:d,dataType:"buffer"}:{data:d,dataType:"browser-object"}}_deduceParameters(d){const{format:_,data:S}=d;let{width:T,height:F,dataFormat:M,type:P,compressed:H}=d;const J=getWebGLTextureParameters(_);return M=M||J.dataFormat,P=P||J.type,H=H||J.compressed,{width:T,height:F}=this._deduceImageSize(S,T,F),{dataFormat:M,type:P,compressed:H,width:T,height:F,format:_,data:S}}_deduceImageSize(d,_,S){let T;return typeof ImageData<"u"&&d instanceof ImageData?T={width:d.width,height:d.height}:typeof HTMLImageElement<"u"&&d instanceof HTMLImageElement?T={width:d.naturalWidth,height:d.naturalHeight}:typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement?T={width:d.width,height:d.height}:typeof ImageBitmap<"u"&&d instanceof ImageBitmap?T={width:d.width,height:d.height}:typeof HTMLVideoElement<"u"&&d instanceof HTMLVideoElement?T={width:d.videoWidth,height:d.videoHeight}:d?T={width:_,height:S}:T={width:_>=0?_:1,height:S>=0?S:1},assert$5(T,"Could not deduced texture size"),assert$5(_===void 0||T.width===_,"Deduced texture width does not match supplied width"),assert$5(S===void 0||T.height===S,"Deduced texture height does not match supplied height"),T}async setCubeMapImageData(d){const{gl:_}=this,{width:S,height:T,pixels:F,data:M,format:P=6408,type:H=5121}=d,J=F||M,K=await Promise.all(wB.FACES.map(z=>{const oe=J[z];return Promise.all(Array.isArray(oe)?oe:[oe])}));this.bind(),wB.FACES.forEach((z,oe)=>{K[oe].length>1&&this.props.mipmaps!==!1&&log.warn(`${this.id} has mipmap and multiple LODs.`)(),K[oe].forEach((se,ae)=>{S&&T?_.texImage2D(z,ae,P,S,T,0,P,H,se):_.texImage2D(z,ae,P,P,H,se)})}),this.unbind()}setImageDataForFace(d){const{face:_,width:S,height:T,pixels:F,data:M,format:P=6408,type:H=5121}=d,{gl:J}=this,K=F||M;return this.bind(),K instanceof Promise?K.then(z=>this.setImageDataForFace(Object.assign({},d,{face:_,data:z,pixels:z}))):this.width||this.height?J.texImage2D(_,0,P,S,T,0,P,H,K):J.texImage2D(_,0,P,P,H,K),this}setImageData3D(d){const{level:_=0,dataFormat:S,format:T,type:F,width:M,height:P,depth:H=1,offset:J=0,data:K,parameters:z={}}=d;this.trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle);const oe=getWebGLTextureParameters(T);if(withGLParameters(this.gl,z,()=>{ArrayBuffer.isView(K)&&this.gl.texImage3D(this.target,_,oe.format,M,P,H,0,oe.dataFormat,oe.type,K),K instanceof WEBGLBuffer&&(this.gl.bindBuffer(35052,K.handle),this.gl.texImage3D(this.target,_,S,M,P,H,0,T,F,J))}),K&&K.byteLength)this.trackAllocatedMemory(K.byteLength,"Texture");else{const se=getTextureFormatBytesPerPixel(this.props.format);this.trackAllocatedMemory(this.width*this.height*this.depth*se,"Texture")}return this.loaded=!0,this}_setSamplerParameters(d){if(!isObjectEmpty$3(d)){logParameters(d),this.gl.bindTexture(this.target,this.handle);for(const[_,S]of Object.entries(d)){const T=Number(_),F=S;switch(T){case 33082:case 33083:this.gl.texParameterf(this.target,T,F);break;default:this.gl.texParameteri(this.target,T,F);break}}this.gl.bindTexture(this.target,null)}}};Bt(wB,"FACES",[34069,34070,34071,34072,34073,34074]);let WEBGLTexture=wB;function getWebGLTextureTarget(f){switch(f.dimension){case"2d":return 3553;case"cube":return 34067;case"2d-array":return 35866;case"3d":return 32879;case"1d":case"cube-array":default:throw new Error(f.dimension)}}function logParameters(f){log.log(1,"texture sampler parameters",f)()}class WEBGLFramebuffer extends Framebuffer{constructor(d,_){super(d,_);Bt(this,"device");Bt(this,"gl");Bt(this,"handle");const S=_.handle===null;if(this.device=d,this.gl=d.gl,this.handle=this.props.handle||S?this.props.handle:this.gl.createFramebuffer(),!S){d.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures();const T=this.gl.bindFramebuffer(36160,this.handle);for(let F=0;F<this.colorAttachments.length;++F){const M=this.colorAttachments[F],P=36064+F;M&&this._attachOne(P,M)}if(this.depthStencilAttachment&&this._attachOne(getDepthStencilAttachmentWebGL(this.depthStencilAttachment.props.format),this.depthStencilAttachment),_.check!==!1){const F=this.gl.checkFramebufferStatus(36160);if(F!==36053)throw new Error(`Framebuffer ${_getFrameBufferStatus(F)}`)}this.gl.bindFramebuffer(36160,T)}}get texture(){return this.colorAttachments[0]}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}createDepthStencilTexture(d){return new WEBGLTexture(this.device,{id:`${this.id}-depth-stencil`,format:d,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(d,_){if(this.handle===null)return this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;d===void 0&&(d=this.gl.drawingBufferWidth),_===void 0&&(_=this.gl.drawingBufferHeight);for(const S of this.colorAttachments)S.texture.resize({width:d,height:_});return this.depthStencilAttachment&&this.depthStencilAttachment.texture.resize({width:d,height:_}),this}_attachOne(d,_){if(Array.isArray(_)){const[S,T=0,F=0]=_;return this._attachTexture(d,S,T,F),S}if(_ instanceof WEBGLTexture)return this._attachTexture(d,_,0,0),_;if(_ instanceof WEBGLTextureView){const S=_;return this._attachTexture(d,S.texture,S.props.baseMipLevel,S.props.baseArrayLayer),_.texture}throw new Error("attach")}_attachTexture(d,_,S,T){const{gl:F}=this.device;switch(F.bindTexture(_.target,_.handle),_.target){case 35866:case 32879:F.framebufferTextureLayer(36160,d,_.target,T,S);break;case 34067:const M=mapIndexToCubeMapFace(S);F.framebufferTexture2D(36160,d,M,_.handle,T);break;case 3553:F.framebufferTexture2D(36160,d,3553,_.handle,T);break;default:assert$5(!1,"Illegal texture type")}F.bindTexture(_.target,null)}}function mapIndexToCubeMapFace(f){return f<34069?f+34069:f}function _getFrameBufferStatus(f){switch(f){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${f}`}}class WebGLCanvasContext extends CanvasContext{constructor(d,_){super(_);Bt(this,"device");Bt(this,"presentationSize");Bt(this,"_framebuffer",null);this.device=d,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new WEBGLFramebuffer(this.device,{handle:null}),this._framebuffer}update(){const d=this.getPixelSize();(d[0]!==this.presentationSize[0]||d[1]!==this.presentationSize[1])&&(this.presentationSize=d,this.resize())}resize(d){if(this.device.gl&&this.canvas){const _=this.getDevicePixelRatio(d==null?void 0:d.useDevicePixels);this.setDevicePixelRatio(_,d);return}}commit(){}}const DEFAULT_SPECTOR_PROPS={spector:log.get("spector")||log.get("spectorjs")},SPECTOR_CDN_URL="https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",LOG_LEVEL$1=1;let spector=null,initialized=!1;async function loadSpectorJS(f){if(!globalThis.SPECTOR)try{await loadScript(SPECTOR_CDN_URL)}catch(s){log.warn(String(s))}}function initializeSpectorJS(f){if(f={...DEFAULT_SPECTOR_PROPS,...f},!(f!=null&&f.spector)||(!spector&&globalThis.SPECTOR&&(log.probe(LOG_LEVEL$1,"SPECTOR found and initialized")(),spector=new globalThis.SPECTOR.Spector,globalThis.luma&&(globalThis.luma.spector=spector)),!spector))return null;if(initialized||(initialized=!0,spector.spyCanvases(),spector==null||spector.onCaptureStarted.add(s=>log.info("Spector capture started:",s)()),spector==null||spector.onCapture.add(s=>{log.info("Spector capture complete:",s)(),spector==null||spector.getResultUI(),spector==null||spector.resultView.display(),spector==null||spector.resultView.addCapture(s)})),f!=null&&f.canvas){if(typeof f.spector=="string"&&f.spector!==f.canvas.id)return spector;spector==null||spector.startCapture(f==null?void 0:f.canvas,500),new Promise(s=>setTimeout(s,2e3)).then(s=>{log.info("Spector capture stopped after 2 seconds")(),spector==null||spector.stopCapture()})}return spector}const WEBGL_DEBUG_CDN_URL="https://unpkg.com/webgl-debug@2.0.1/index.js";function getWebGLContextData(f){return f.luma=f.luma||{},f.luma}async function loadWebGLDeveloperTools(){isBrowser$1()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await loadScript(WEBGL_DEBUG_CDN_URL))}function makeDebugContext(f,s={}){return f?s.debug?getDebugContext(f,s):getRealContext(f):null}function getRealContext(f){const s=getWebGLContextData(f);return s.realContext?s.realContext:f}function getDebugContext(f,s){if(!globalThis.WebGLDebugUtils)return log.warn("webgl-debug not loaded")(),f;const d=getWebGLContextData(f);if(d.debugContext)return d.debugContext;globalThis.WebGLDebugUtils.init({...GLEnum,...f});const _=globalThis.WebGLDebugUtils.makeDebugContext(f,onGLError.bind(null,s),onValidateGLFunc.bind(null,s));for(const F in GLEnum)!(F in _)&&typeof GLEnum[F]=="number"&&(_[F]=GLEnum[F]);class S{}Object.setPrototypeOf(_,Object.getPrototypeOf(f)),Object.setPrototypeOf(S,_);const T=Object.create(S);return d.realContext=f,d.debugContext=T,T.debug=!0,T}function getFunctionString(f,s){s=Array.from(s).map(_=>_===void 0?"undefined":_);let d=globalThis.WebGLDebugUtils.glFunctionArgsToString(f,s);return d=`${d.slice(0,100)}${d.length>100?"...":""}`,`gl.${f}(${d})`}function onGLError(f,s,d,_){_=Array.from(_).map(M=>M===void 0?"undefined":M);const S=globalThis.WebGLDebugUtils.glEnumToString(s),T=globalThis.WebGLDebugUtils.glFunctionArgsToString(d,_),F=`${S} in gl.${d}(${T})`;log.error(F)();debugger;if(f.throwOnError)throw new Error(F)}function onValidateGLFunc(f,s,d){let _="";if(log.level>=1&&(_=getFunctionString(s,d),log.log(1,_)()),f.break&&f.break.length>0&&(_=_||getFunctionString(s,d),f.break.every(T=>_.indexOf(T)!==-1)))debugger;for(const S of d)if(S===void 0){if(_=_||getFunctionString(s,d),f.throwOnError)throw new Error(`Undefined argument: ${_}`);log.error(`Undefined argument: ${_}`)();debugger}}function parseShaderCompilerLog(f){const s=f.split(/\r?\n/),d=[];for(const _ of s){if(_.length<=1)continue;const S=_.split(":");if(S.length===2){const[K,z]=S;d.push({message:z.trim(),type:getMessageType(K),lineNum:0,linePos:0});continue}const[T,F,M,...P]=S;let H=parseInt(M,10);isNaN(H)&&(H=0);let J=parseInt(F,10);isNaN(J)&&(J=0),d.push({message:P.join(":").trim(),type:getMessageType(T),lineNum:H,linePos:J})}return d}function getMessageType(f){const s=["warning","error","info"],d=f.toLowerCase();return s.includes(d)?d:"info"}class WEBGLShader extends Shader{constructor(d,_){super(d,_);Bt(this,"device");Bt(this,"handle");switch(this.device=d,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const d=this.device.gl.getShaderInfoLog(this.handle);return parseShaderCompilerLog(d)}getTranslatedSource(){const _=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return _==null?void 0:_.getTranslatedShaderSource(this.handle)}async _compile(d){d=(T=>T.startsWith("#version ")?T:`#version 100
${T}`)(d);const{gl:S}=this.device;if(S.shaderSource(this.handle,d),S.compileShader(this.handle),log.level===0){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus==="error")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}log.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),log.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){const d=async T=>await new Promise(F=>setTimeout(F,T));if(!this.device.features.has("compilation-status-async-webgl")){await d(10);return}const{gl:S}=this.device;for(;;){if(S.getShaderParameter(this.handle,37297))return;await d(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}const GL_DEPTH_BUFFER_BIT$1=256,GL_STENCIL_BUFFER_BIT$1=1024,GL_COLOR_BUFFER_BIT$1=16384,GL_COLOR=6144,COLOR_CHANNELS=[1,2,4,8];class WEBGLRenderPass extends RenderPass{constructor(d,_){super(d,_);Bt(this,"device");Bt(this,"glParameters");this.device=d,pushContextState(this.device.gl),this.setParameters(this.props.parameters),this.clear()}end(){popContextState(this.device.gl)}pushDebugGroup(d){}popDebugGroup(){}insertDebugMarker(d){}setParameters(d={}){const _={...this.glParameters};this.props.framebuffer&&(_.framebuffer=this.props.framebuffer),this.props.depthReadOnly&&(_.depthMask=!this.props.depthReadOnly),_.stencilMask=this.props.stencilReadOnly?0:1,_[35977]=this.props.discard,d.viewport&&(d.viewport.length>=6?(_.viewport=d.viewport.slice(0,4),_.depthRange=[d.viewport[4],d.viewport[5]]):_.viewport=d.viewport),d.scissorRect&&(_.scissorTest=!0,_.scissor=d.scissorRect),d.blendConstant&&(_.blendColor=d.blendConstant),d.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),d[2967]=d.stencilReference),d.colorMask&&(_.colorMask=COLOR_CHANNELS.map(S=>!!(S&d.colorMask))),this.glParameters=_,setGLParameters(this.device.gl,_)}beginOcclusionQuery(d){const _=this.props.occlusionQuerySet;_==null||_.beginOcclusionQuery()}endOcclusionQuery(){const d=this.props.occlusionQuerySet;d==null||d.endOcclusionQuery()}clear(){const d={...this.glParameters};let _=0;this.props.clearColor!==!1&&(_|=GL_COLOR_BUFFER_BIT$1,d.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(_|=GL_DEPTH_BUFFER_BIT$1,d.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(_|=GL_STENCIL_BUFFER_BIT$1,d.clearStencil=this.props.clearStencil),_!==0&&withGLParameters(this.device.gl,d,()=>{this.device.gl.clear(_)})}clearColorBuffer(d=0,_=[0,0,0,0]){withGLParameters(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(_.constructor){case Int32Array:this.device.gl.clearBufferiv(GL_COLOR,d,_);break;case Uint32Array:this.device.gl.clearBufferuiv(GL_COLOR,d,_);break;case Float32Array:default:this.device.gl.clearBufferfv(GL_COLOR,d,_);break}})}}const ERR_TYPE_DEDUCTION="Failed to deduce GL constant from typed array";function getGLTypeFromTypedArray(f){switch(ArrayBuffer.isView(f)?f.constructor:f){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(ERR_TYPE_DEDUCTION)}}function getTypedArrayFromGLType(f,s){const{clamped:d=!0}=s||{};switch(f){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return d?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}const DEFAULT_ACCESSOR_VALUES={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},PROP_CHECKS={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Accessor{constructor(...s){Bt(this,"offset");Bt(this,"stride");Bt(this,"type");Bt(this,"size");Bt(this,"divisor");Bt(this,"normalized");Bt(this,"integer");Bt(this,"buffer");Bt(this,"index");s.forEach(d=>this._assign(d)),Object.freeze(this)}static getBytesPerElement(s){return getTypedArrayFromGLType(s.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(s){return assert$5(s.size),getTypedArrayFromGLType(s.type||5126).BYTES_PER_ELEMENT*s.size}static resolve(...s){return new Accessor(DEFAULT_ACCESSOR_VALUES,...s)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Accessor.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Accessor.getBytesPerVertex(this)}_assign(s={}){return s=checkProps("Accessor",s,PROP_CHECKS),s.type!==void 0&&(this.type=s.type,(s.type===5124||s.type===5125)&&(this.integer=!0)),s.size!==void 0&&(this.size=s.size),s.offset!==void 0&&(this.offset=s.offset),s.stride!==void 0&&(this.stride=s.stride),s.normalize!==void 0&&(this.normalized=s.normalize),s.normalized!==void 0&&(this.normalized=s.normalized),s.integer!==void 0&&(this.integer=s.integer),s.divisor!==void 0&&(this.divisor=s.divisor),s.buffer!==void 0&&(this.buffer=s.buffer),s.index!==void 0&&(typeof s.index=="boolean"?this.index=s.index?1:0:this.index=s.index),s.instanced!==void 0&&(this.divisor=s.instanced?1:0),s.isInstanced!==void 0&&(this.divisor=s.isInstanced?1:0),this.offset===void 0&&delete this.offset,this.stride===void 0&&delete this.stride,this.type===void 0&&delete this.type,this.size===void 0&&delete this.size,this.divisor===void 0&&delete this.divisor,this.normalized===void 0&&delete this.normalized,this.integer===void 0&&delete this.integer,this.buffer===void 0&&delete this.buffer,this.index===void 0&&delete this.index,this}}function isSamplerUniform(f){return SAMPLER_TYPES.includes(f)}const SAMPLER_TYPES=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],COMPOSITE_GL_TYPES={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function decodeGLUniformType(f){const s=COMPOSITE_GL_TYPES[f];if(!s)throw new Error("uniform");const[d,_,,S]=s;return{format:S,components:_,glType:d}}function decodeGLAttributeType(f){const s=COMPOSITE_GL_TYPES[f];if(!s)throw new Error("attribute");const[,d,,_,S]=s;return{attributeType:_,vertexFormat:S,components:d}}function getShaderLayout(f,s){const d={attributes:[],bindings:[]};d.attributes=readAttributeDeclarations(f,s);const _=readUniformBlocks(f,s);for(const M of _){const P=M.uniforms.map(H=>({name:H.name,format:H.format,byteOffset:H.byteOffset,byteStride:H.byteStride,arrayLength:H.arrayLength}));d.bindings.push({type:"uniform",name:M.name,location:M.location,visibility:(M.vertex?1:0)&(M.fragment?2:0),minBindingSize:M.byteLength,uniforms:P})}const S=readUniformBindings(f,s);let T=0;for(const M of S)if(isSamplerUniform(M.type)){const{viewDimension:P,sampleType:H}=getSamplerInfo(M.type);d.bindings.push({type:"texture",name:M.name,location:T,viewDimension:P,sampleType:H}),M.textureUnit=T,T+=1}S.length&&(d.uniforms=S);const F=readVaryings(f,s);return F!=null&&F.length&&(d.varyings=F),d}function readAttributeDeclarations(f,s){const d=[],_=f.getProgramParameter(s,35721);for(let S=0;S<_;S++){const T=f.getActiveAttrib(s,S);if(!T)throw new Error("activeInfo");const{name:F,type:M}=T,P=f.getAttribLocation(s,F);if(P>=0){const{attributeType:H}=decodeGLAttributeType(M),J=/instance/i.test(F)?"instance":"vertex";d.push({name:F,location:P,stepMode:J,type:H})}}return d.sort((S,T)=>S.location-T.location),d}function readVaryings(f,s){const d=[],_=f.getProgramParameter(s,35971);for(let S=0;S<_;S++){const T=f.getTransformFeedbackVarying(s,S);if(!T)throw new Error("activeInfo");const{name:F,type:M,size:P}=T,{glType:H,components:J}=decodeGLUniformType(M),K=new Accessor({type:H,size:P*J}),z={location:S,name:F,accessor:K};d.push(z)}return d.sort((S,T)=>S.location-T.location),d}function readUniformBindings(f,s){const d=[],_=f.getProgramParameter(s,35718);for(let S=0;S<_;S++){const T=f.getActiveUniform(s,S);if(!T)throw new Error("activeInfo");const{name:F,size:M,type:P}=T,{name:H,isArray:J}=parseUniformName(F);let K=f.getUniformLocation(s,H);const z={location:K,name:H,size:M,type:P,isArray:J};if(d.push(z),z.size>1)for(let oe=0;oe<z.size;oe++){const se=`${H}[${oe}]`;K=f.getUniformLocation(s,se);const ae={...z,name:se,location:K};d.push(ae)}}return d}function readUniformBlocks(f,s){const d=(T,F)=>f.getActiveUniformBlockParameter(s,T,F),_=[],S=f.getProgramParameter(s,35382);for(let T=0;T<S;T++){const F={name:f.getActiveUniformBlockName(s,T)||"",location:d(T,35391),byteLength:d(T,35392),vertex:d(T,35396),fragment:d(T,35398),uniformCount:d(T,35394),uniforms:[]},M=d(T,35395)||[],P=f.getActiveUniforms(s,M,35383),H=f.getActiveUniforms(s,M,35384),J=f.getActiveUniforms(s,M,35387),K=f.getActiveUniforms(s,M,35388);for(let z=0;z<F.uniformCount;++z){const oe=f.getActiveUniform(s,M[z]);if(!oe)throw new Error("activeInfo");F.uniforms.push({name:oe.name,format:decodeGLUniformType(P[z]).format,type:P[z],arrayLength:H[z],byteOffset:J[z],byteStride:K[z]})}_.push(F)}return _.sort((T,F)=>T.location-F.location),_}const SAMPLER_UNIFORMS_GL_TO_GPU={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function getSamplerInfo(f){const s=SAMPLER_UNIFORMS_GL_TO_GPU[f];if(!s)throw new Error("sampler");const[d,_]=s;return{viewDimension:d,sampleType:_}}function parseUniformName(f){if(f[f.length-1]!=="]")return{name:f,length:1,isArray:!1};const d=/([^[]*)(\[[0-9]+\])?/.exec(f);if(!d||d.length<2)throw new Error(`Failed to parse GLSL uniform name ${f}`);return{name:d[1],length:d[2]?1:0,isArray:!!d[2]}}function setUniform(f,s,d,_){const S=f;let T=_;T===!0&&(T=1),T===!1&&(T=0);const F=typeof T=="number"?[T]:T;switch(d){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof _!="number")throw new Error("samplers must be set to integers");return f.uniform1i(s,_);case 5126:return f.uniform1fv(s,F);case 35664:return f.uniform2fv(s,F);case 35665:return f.uniform3fv(s,F);case 35666:return f.uniform4fv(s,F);case 5124:return f.uniform1iv(s,F);case 35667:return f.uniform2iv(s,F);case 35668:return f.uniform3iv(s,F);case 35669:return f.uniform4iv(s,F);case 35670:return f.uniform1iv(s,F);case 35671:return f.uniform2iv(s,F);case 35672:return f.uniform3iv(s,F);case 35673:return f.uniform4iv(s,F);case 5125:return S.uniform1uiv(s,F,1);case 36294:return S.uniform2uiv(s,F,2);case 36295:return S.uniform3uiv(s,F,3);case 36296:return S.uniform4uiv(s,F,4);case 35674:return f.uniformMatrix2fv(s,!1,F);case 35675:return f.uniformMatrix3fv(s,!1,F);case 35676:return f.uniformMatrix4fv(s,!1,F);case 35685:return S.uniformMatrix2x3fv(s,!1,F);case 35686:return S.uniformMatrix2x4fv(s,!1,F);case 35687:return S.uniformMatrix3x2fv(s,!1,F);case 35688:return S.uniformMatrix3x4fv(s,!1,F);case 35689:return S.uniformMatrix4x2fv(s,!1,F);case 35690:return S.uniformMatrix4x3fv(s,!1,F)}throw new Error("Illegal uniform")}function getGLDrawMode(f){switch(f){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"line-loop-webgl":return 2;case"triangle-list":return 4;case"triangle-strip":return 5;case"triangle-fan-webgl":return 6;default:throw new Error(f)}}function getGLPrimitive(f){switch(f){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 1;case"line-loop-webgl":return 1;case"triangle-list":return 4;case"triangle-strip":return 4;case"triangle-fan-webgl":return 4;default:throw new Error(f)}}const LOG_PROGRAM_PERF_PRIORITY=4;class WEBGLRenderPipeline extends RenderPipeline{constructor(d,_){super(d,_);Bt(this,"device");Bt(this,"handle");Bt(this,"vs");Bt(this,"fs");Bt(this,"introspectedLayout");Bt(this,"uniforms",{});Bt(this,"bindings",{});Bt(this,"varyings",null);Bt(this,"_uniformCount",0);Bt(this,"_uniformSetters",{});this.device=d,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=_.vs,this.fs=_.fs;const{varyings:S,bufferMode:T=35981}=_;switch(S&&S.length>0&&(this.varyings=S,this.device.gl.transformFeedbackVaryings(this.handle,S,T)),this._linkShaders(),log.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=getShaderLayout(this.device.gl,this.handle),log.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=mergeShaderLayout(this.introspectedLayout,_.shaderLayout),this.props.topology){case"triangle-fan-webgl":case"line-loop-webgl":log.warn(`Primitive topology ${this.props.topology} is deprecated and will be removed in v9.1`);break}}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(d,_){for(const[S,T]of Object.entries(d)){const F=this.shaderLayout.bindings.find(M=>M.name===S)||this.shaderLayout.bindings.find(M=>M.name===`${S}Uniforms`);if(!F){const M=this.shaderLayout.bindings.map(P=>`"${P.name}"`).join(", ");_!=null&&_.disableWarnings||log.warn(`Unknown binding "${S}" in render pipeline "${this.id}", expected one of ${M}`)();continue}switch(T||log.warn(`Unsetting binding "${S}" in render pipeline "${this.id}"`)(),F.type){case"uniform":if(!(T instanceof WEBGLBuffer)&&!(T.buffer instanceof WEBGLBuffer))throw new Error("buffer value");break;case"texture":if(!(T instanceof WEBGLTextureView||T instanceof WEBGLTexture||T instanceof WEBGLFramebuffer))throw new Error("texture value");break;case"sampler":log.warn(`Ignoring sampler ${S}`)();break;default:throw new Error(F.type)}this.bindings[S]=T}}draw(d){var ge;const{renderPass:_,parameters:S=this.props.parameters,topology:T=this.props.topology,vertexArray:F,vertexCount:M,instanceCount:P,isInstanced:H=!1,firstVertex:J=0,transformFeedback:K}=d,z=getGLDrawMode(T),oe=!!F.indexBuffer,se=(ge=F.indexBuffer)==null?void 0:ge.glIndexType;if(this.linkStatus!=="success")return log.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable()||M===0)return log.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;if(M===0)return log.info(2,`RenderPipeline:${this.id}.draw() aborted - no vertices to draw`)(),!0;this.device.gl.useProgram(this.handle),F.bindBeforeRender(_),K&&K.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const ae=_;return withDeviceAndGLParameters(this.device,S,ae.glParameters,()=>{oe&&H?this.device.gl.drawElementsInstanced(z,M||0,se,J,P||0):oe?this.device.gl.drawElements(z,M||0,se,J):H?this.device.gl.drawArraysInstanced(z,J,M||0,P||0):this.device.gl.drawArrays(z,J,M||0),K&&K.end()}),F.unbindAfterRender(_),!0}setUniformsWebGL(d){const{bindings:_}=splitUniformsAndBindings(d);Object.keys(_).forEach(S=>{log.warn(`Unsupported value "${JSON.stringify(_[S])}" used in setUniforms() for key ${S}. Use setBindings() instead?`)()}),Object.assign(this.uniforms,d)}async _linkShaders(){const{gl:d}=this.device;if(d.attachShader(this.handle,this.vs.handle),d.attachShader(this.handle,this.fs.handle),log.time(LOG_PROGRAM_PERF_PRIORITY,`linkProgram for ${this.id}`)(),d.linkProgram(this.handle),log.timeEnd(LOG_PROGRAM_PERF_PRIORITY,`linkProgram for ${this.id}`)(),log.level,!this.device.features.has("compilation-status-async-webgl")){const S=this._getLinkStatus();this._reportLinkStatus(S);return}log.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),log.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const _=this._getLinkStatus();this._reportLinkStatus(_)}_reportLinkStatus(d){var _;switch(d){case"success":return;default:throw this.vs.compilationStatus==="error"?(this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`)):((_=this.fs)==null?void 0:_.compilationStatus)==="error"?(this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`)):new Error(`Error during ${d}: ${this.device.gl.getProgramInfoLog(this.handle)}`)}}_getLinkStatus(){const{gl:d}=this.device;return d.getProgramParameter(this.handle,35714)?(d.validateProgram(this.handle),d.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")):(this.linkStatus="error","linking")}async _waitForLinkComplete(){const d=async T=>await new Promise(F=>setTimeout(F,T));if(!this.device.features.has("compilation-status-async-webgl")){await d(10);return}const{gl:S}=this.device;for(;;){if(S.getProgramParameter(this.handle,37297))return;await d(10)}}_areTexturesRenderable(){let d=!0;for(const[,_]of Object.entries(this.bindings))_ instanceof WEBGLTexture&&(_.update(),d=d&&_.loaded);return d}_applyBindings(){if(this.linkStatus!=="success")return;const{gl:d}=this.device;d.useProgram(this.handle);let _=0,S=0;for(const T of this.shaderLayout.bindings){const F=this.bindings[T.name]||this.bindings[T.name.replace(/Uniforms$/,"")];if(!F)throw new Error(`No value for binding ${T.name} in ${this.id}`);switch(T.type){case"uniform":const{name:M}=T,P=d.getUniformBlockIndex(this.handle,M);if(P===4294967295)throw new Error(`Invalid uniform block name ${M}`);d.uniformBlockBinding(this.handle,S,P),F instanceof WEBGLBuffer?d.bindBufferBase(35345,S,F.handle):d.bindBufferRange(35345,S,F.buffer.handle,F.offset||0,F.size||F.buffer.byteLength-F.offset),S+=1;break;case"texture":if(!(F instanceof WEBGLTextureView||F instanceof WEBGLTexture||F instanceof WEBGLFramebuffer))throw new Error("texture");let H;if(F instanceof WEBGLTextureView)H=F.texture;else if(F instanceof WEBGLTexture)H=F;else if(F instanceof WEBGLFramebuffer&&F.colorAttachments[0]instanceof WEBGLTextureView)log.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),H=F.colorAttachments[0].texture;else throw new Error("No texture");d.activeTexture(33984+_),d.bindTexture(H.target,H.handle),_+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${T.type}' not supported in WebGL`)}}}_applyUniforms(){for(const d of this.shaderLayout.uniforms||[]){const{name:_,location:S,type:T,textureUnit:F}=d,M=this.uniforms[_]??F;M!==void 0&&setUniform(this.device.gl,S,T,M)}}}function cast(f){return f}class WEBGLCommandBuffer extends CommandBuffer{constructor(d){super(d,{});Bt(this,"device");Bt(this,"commands",[]);this.device=d}submitCommands(d=this.commands){for(const _ of d)switch(_.name){case"copy-buffer-to-buffer":_copyBufferToBuffer(this.device,_.options);break;case"copy-buffer-to-texture":_copyBufferToTexture(this.device,_.options);break;case"copy-texture-to-buffer":_copyTextureToBuffer(this.device,_.options);break;case"copy-texture-to-texture":_copyTextureToTexture(this.device,_.options);break}}}function _copyBufferToBuffer(f,s){const d=s.source,_=s.destination;f.gl.bindBuffer(36662,d.handle),f.gl.bindBuffer(36663,_.handle),f.gl.copyBufferSubData(36662,36663,s.sourceOffset??0,s.destinationOffset??0,s.size),f.gl.bindBuffer(36662,null),f.gl.bindBuffer(36663,null)}function _copyBufferToTexture(f,s){throw new Error("Not implemented")}function _copyTextureToBuffer(f,s){const{source:d,mipLevel:_=0,aspect:S="all",width:T=s.source.width,height:F=s.source.height,depthOrArrayLayers:M=0,origin:P=[0,0],destination:H,byteOffset:J=0,bytesPerRow:K,rowsPerImage:z}=s;if(S!=="all")throw new Error("not supported");if(_!==0||M!==0||K||z)throw new Error("not implemented");const{framebuffer:oe,destroyFramebuffer:se}=getFramebuffer$2(d);let ae;try{const ge=H,pe=T||oe.width,he=F||oe.height,ve=getWebGLTextureParameters(oe.texture.props.format),be=ve.dataFormat,Re=ve.type;f.gl.bindBuffer(35051,ge.handle),ae=f.gl.bindFramebuffer(36160,oe.handle),f.gl.readPixels(P[0],P[1],pe,he,be,Re,J)}finally{f.gl.bindBuffer(35051,null),ae!==void 0&&f.gl.bindFramebuffer(36160,ae),se&&oe.destroy()}}function _copyTextureToTexture(f,s){const{source:d,destinationMipLevel:_=0,origin:S=[0,0],destinationOrigin:T=[0,0],destination:F}=s;let{width:M=s.destination.width,height:P=s.destination.height}=s;const{framebuffer:H,destroyFramebuffer:J}=getFramebuffer$2(d),[K,z]=S,[oe,se,ae]=T,ge=f.gl.bindFramebuffer(36160,H.handle);let pe=null,he;if(F instanceof WEBGLTexture)pe=F,M=Number.isFinite(M)?M:pe.width,P=Number.isFinite(P)?P:pe.height,pe.bind(0),he=pe.target;else throw new Error("invalid destination");switch(he){case 3553:case 34067:f.gl.copyTexSubImage2D(he,_,oe,se,K,z,M,P);break;case 35866:case 32879:f.gl.copyTexSubImage3D(he,_,oe,se,ae,K,z,M,P);break}pe&&pe.unbind(),f.gl.bindFramebuffer(36160,ge),J&&H.destroy()}function getFramebuffer$2(f){if(f instanceof Texture){const{width:s,height:d,id:_}=f;return{framebuffer:f.device.createFramebuffer({id:`framebuffer-for-${_}`,width:s,height:d,colorAttachments:[f]}),destroyFramebuffer:!0}}return{framebuffer:f,destroyFramebuffer:!1}}class WEBGLCommandEncoder extends CommandEncoder{constructor(d,_){super(d,_);Bt(this,"device");Bt(this,"commandBuffer");this.device=d,this.commandBuffer=new WEBGLCommandBuffer(d)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(d){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:d})}copyBufferToTexture(d){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:d})}copyTextureToBuffer(d){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:d})}copyTextureToTexture(d){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:d})}pushDebugGroup(d){}popDebugGroup(){}insertDebugMarker(d){}resolveQuerySet(d,_,S){}}class WEBGLVertexArray extends VertexArray{constructor(d,_){super(d,_);Bt(this,"device");Bt(this,"handle");Bt(this,"buffer",null);Bt(this,"bufferValue",null);this.device=d,this.handle=this.device.gl.createVertexArray()}get[Symbol.toStringTag](){return"VertexArray"}static isConstantAttributeZeroSupported(d){return getBrowser()==="Chrome"}destroy(){var d;super.destroy(),this.buffer&&((d=this.buffer)==null||d.destroy()),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(d){const _=d;if(_&&_.glTarget!==34963)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,_?_.handle:null),this.indexBuffer=_,this.device.gl.bindVertexArray(null)}setBuffer(d,_){const S=_;if(S.glTarget===34963)throw new Error("Use .setIndexBuffer()");const{size:T,type:F,stride:M,offset:P,normalized:H,integer:J,divisor:K}=this._getAccessor(d);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,S.handle),J?this.device.gl.vertexAttribIPointer(d,T,F,M,P):this.device.gl.vertexAttribPointer(d,T,F,H,M,P),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(d),this.device.gl.vertexAttribDivisor(d,K||0),this.attributes[d]=S,this.device.gl.bindVertexArray(null)}setConstantWebGL(d,_){this._enable(d,!1),this.attributes[d]=_}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let d=0;d<this.maxVertexAttributes;++d){const _=this.attributes[d];ArrayBuffer.isView(_)&&this.device.setConstantAttributeWebGL(d,_)}}_getAccessor(d){const _=this.attributeInfos[d];if(!_)throw new Error(`Unknown attribute location ${d}`);const S=getGLFromVertexType(_.bufferDataType);return{size:_.bufferComponents,type:S,stride:_.byteStride,offset:_.byteOffset,normalized:_.normalized,integer:_.integer,divisor:_.stepMode==="instance"?1:0}}_enable(d,_=!0){const T=WEBGLVertexArray.isConstantAttributeZeroSupported(this.device)||d!==0;(_||T)&&(d=Number(d),this.device.gl.bindVertexArray(this.handle),_?this.device.gl.enableVertexAttribArray(d):this.device.gl.disableVertexAttribArray(d),this.device.gl.bindVertexArray(null))}getConstantBuffer(d,_){const S=normalizeConstantArrayValue(_),T=S.byteLength*d,F=S.length*d;if(this.buffer&&T!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${T} !== ${this.buffer.byteLength}.`);let M=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:T}),M=M||!compareConstantArrayValues$1(S,this.bufferValue),M){const P=getScratchArray(_.constructor,F);fillArray$1({target:P,source:S,start:0,count:F}),this.buffer.write(P),this.bufferValue=_}return this.buffer}}function normalizeConstantArrayValue(f){return Array.isArray(f)?new Float32Array(f):f}function compareConstantArrayValues$1(f,s){if(!f||!s||f.length!==s.length||f.constructor!==s.constructor)return!1;for(let d=0;d<f.length;++d)if(f[d]!==s[d])return!1;return!0}class WEBGLTransformFeedback extends TransformFeedback{constructor(d,_){super(d,_);Bt(this,"device");Bt(this,"gl");Bt(this,"handle");Bt(this,"layout");Bt(this,"buffers",{});Bt(this,"unusedBuffers",{});Bt(this,"bindOnUse",!0);Bt(this,"_bound",!1);this.device=d,this.gl=d.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,_.buffers&&this.setBuffers(_.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(d="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(getGLPrimitive(d))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(d){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(const _ in d)this.setBuffer(_,d[_])})}setBuffer(d,_){const S=this._getVaryingIndex(d),{buffer:T,byteLength:F,byteOffset:M}=this._getBufferRange(_);if(S<0){this.unusedBuffers[d]=T,log.warn(`${this.id} unusedBuffers varying buffer ${d}`)();return}this.buffers[S]={buffer:T,byteLength:F,byteOffset:M},this.bindOnUse||this._bindBuffer(S,T,M,F)}getBuffer(d){if(isIndex(d))return this.buffers[d]||null;const _=this._getVaryingIndex(d);return _>=0?this.buffers[_]:null}bind(d=this.handle){if(typeof d!="function")return this.gl.bindTransformFeedback(36386,d),this;let _;return this._bound?_=d():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,_=d(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),_}unbind(){this.bind(null)}_getBufferRange(d){if(d instanceof WEBGLBuffer)return{buffer:d,byteOffset:0,byteLength:d.byteLength};const{buffer:_,byteOffset:S=0,byteLength:T=d.buffer.byteLength}=d;return{buffer:_,byteOffset:S,byteLength:T}}_getVaryingIndex(d){if(isIndex(d))return Number(d);for(const _ of this.layout.varyings)if(d===_.name)return _.location;return-1}_bindBuffers(){for(const d in this.buffers){const{buffer:_,byteLength:S,byteOffset:T}=this._getBufferRange(this.buffers[d]);this._bindBuffer(Number(d),_,T,S)}}_unbindBuffers(){for(const d in this.buffers)this.gl.bindBufferBase(35982,Number(d),null)}_bindBuffer(d,_,S=0,T){const F=_&&_.handle;!F||T===void 0?this.gl.bindBufferBase(35982,d,F):this.gl.bindBufferRange(35982,d,F,S,T)}}function isIndex(f){return typeof f=="number"?Number.isInteger(f):/^\d+$/.test(f)}class WEBGLQuerySet extends QuerySet{constructor(d,_){super(d,_);Bt(this,"device");Bt(this,"handle");Bt(this,"target",null);Bt(this,"_queryPending",!1);Bt(this,"_pollingPromise",null);if(this.device=d,_.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}get[Symbol.toStringTag](){return"Query"}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(d){return this._begin(d!=null&&d.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(d){this._queryPending||(this.target=d,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const d=this.device.gl.getQueryParameter(this.handle,34919);return d&&(this._queryPending=!1),d}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(d=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let _=0;return this._pollingPromise=new Promise((S,T)=>{const F=()=>{this.isResultAvailable()?(S(this.getResult()),this._pollingPromise=null):_++>d?(T("Timed out"),this._pollingPromise=null):requestAnimationFrame(F)};requestAnimationFrame(F)}),this._pollingPromise}}function glFormatToComponents(f){switch(f){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return assert$5(!1),0}}function glTypeToBytes(f){switch(f){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return assert$5(!1),0}}function readPixelsToArray(f,s){var ge,pe;const{sourceX:d=0,sourceY:_=0,sourceFormat:S=6408,sourceAttachment:T=36064}=s||{};let{target:F=null,sourceWidth:M,sourceHeight:P,sourceType:H}=s||{};const{framebuffer:J,deleteFramebuffer:K}=getFramebuffer$1(f);assert$5(J);const{gl:z,handle:oe}=J;M=M||J.width,P=P||J.height;const se=T-36064;H=H||((pe=(ge=J.colorAttachments[se])==null?void 0:ge.texture)==null?void 0:pe.type)||5121,F=getPixelArray(F,H,S,M,P),H=H||getGLTypeFromTypedArray(F);const ae=z.bindFramebuffer(36160,oe);return z.readPixels(d,_,M,P,S,H,F),z.bindFramebuffer(36160,ae||null),K&&J.destroy(),F}function readPixelsToBuffer(f,s){const{target:d,sourceX:_=0,sourceY:S=0,sourceFormat:T=6408,targetByteOffset:F=0}=s||{};let{sourceWidth:M,sourceHeight:P,sourceType:H}=s||{};const{framebuffer:J,deleteFramebuffer:K}=getFramebuffer$1(f);assert$5(J),M=M||J.width,P=P||J.height;const z=J;H=H||5121;let oe=d;if(!oe){const ae=glFormatToComponents(T),ge=glTypeToBytes(H),pe=F+M*P*ae*ge;oe=z.device.createBuffer({byteLength:pe})}const se=f.device.createCommandEncoder();return se.copyTextureToBuffer({source:f,width:M,height:P,origin:[_,S],destination:oe,byteOffset:F}),se.destroy(),K&&J.destroy(),oe}function getFramebuffer$1(f){return f instanceof Framebuffer?{framebuffer:f,deleteFramebuffer:!1}:{framebuffer:toFramebuffer(f),deleteFramebuffer:!0}}function toFramebuffer(f,s){const{device:d,width:_,height:S,id:T}=f;return d.createFramebuffer({...s,id:`framebuffer-for-${T}`,width:_,height:S,colorAttachments:[f]})}function getPixelArray(f,s,d,_,S){if(f)return f;s=s||5121;const T=getTypedArrayFromGLType(s,{clamped:!1}),F=glFormatToComponents(d);return new T(_*S*F)}const GL_DEPTH_BUFFER_BIT=256,GL_STENCIL_BUFFER_BIT=1024,GL_COLOR_BUFFER_BIT=16384,ERR_ARGUMENTS="clear: bad arguments";function clear(f,s){const{framebuffer:d=null,color:_=null,depth:S=null,stencil:T=null}=s||{},F={};d&&(F.framebuffer=d);let M=0;_&&(M|=GL_COLOR_BUFFER_BIT,_!==!0&&(F.clearColor=_)),S&&(M|=GL_DEPTH_BUFFER_BIT,S!==!0&&(F.clearDepth=S)),T&&(M|=GL_STENCIL_BUFFER_BIT,S!==!0&&(F.clearStencil=S)),assert$5(M!==0,ERR_ARGUMENTS);const P=f.gl;withGLParameters(P,F,()=>{P.clear(M)})}const LOG_LEVEL=1,Tm=class Tm extends Device{constructor(d){var P,H;super({...d,id:d.id||uid("webgl-device")});Bt(this,"type","webgl");Bt(this,"handle");Bt(this,"features");Bt(this,"limits");Bt(this,"info");Bt(this,"canvasContext");Bt(this,"lost");Bt(this,"_resolveContextLost");Bt(this,"renderPass",null);Bt(this,"gl");Bt(this,"debug",!1);Bt(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});Bt(this,"_extensions",{});Bt(this,"_polyfilled",!1);Bt(this,"spectorJS");Bt(this,"_constants");const _=(P=d.gl)==null?void 0:P.device;if(_)throw new Error(`WebGL context already attached to device ${_.id}`);const S=((H=d.gl)==null?void 0:H.canvas)||d.canvas;this.canvasContext=new WebGLCanvasContext(this,{...d,canvas:S}),this.lost=new Promise(J=>{this._resolveContextLost=J});let T=d.gl||null;if(T||(T=createBrowserContext(this.canvasContext.canvas,{...d,onContextLost:J=>{var K;return(K=this._resolveContextLost)==null?void 0:K.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})}})),!T)throw new Error("WebGL context creation failed");this.handle=T,this.gl=T,this.gl.device=this,this.gl._version=2,d.spector&&(this.spectorJS=initializeSpectorJS({...this.props,canvas:this.handle.canvas})),this.info=getDeviceInfo(this.gl,this._extensions),this.limits=new WebGLDeviceLimits(this.gl),this.features=new WebGLDeviceFeatures(this.gl,this._extensions,this.props.disabledFeatures),this.props.initalizeFeatures&&this.features.initializeFeatures(),this.canvasContext.resize();const{enable:F=!0,copyState:M=!1}=d;trackContextState(this.gl,{enable:F,copyState:M,log:(...J)=>log.log(1,...J)()}),d.debug&&(this.gl=makeDebugContext(this.gl,{...d,throwOnError:!0}),this.debug=!0,log.level=Math.max(log.level,1),log.warn("WebGL debug mode activated. Performance reduced.")())}static isSupported(){return typeof WebGL2RenderingContext<"u"}static attach(d){if(d instanceof Tm)return d;if((d==null?void 0:d.device)instanceof Device)return d.device;if(!isWebGL(d))throw new Error("Invalid WebGL2RenderingContext");return new Tm({gl:d})}static async create(d={}){var M;log.groupCollapsed(LOG_LEVEL,"WebGLDevice created")();const _=[];d.debug&&_.push(loadWebGLDeveloperTools()),d.spector&&_.push(loadSpectorJS()),typeof d.canvas=="string"&&_.push(CanvasContext.pageLoaded);const S=await Promise.allSettled(_);for(const P of S)P.status==="rejected"&&log.error(`Failed to initialize debug libraries ${P.reason}`)();if(log.probe(LOG_LEVEL+1,"DOM is loaded")(),(M=d.gl)!=null&&M.device)return log.warn("reattaching existing device")(),Tm.attach(d.gl);const T=new Tm(d),F=`Created ${T.type}${T.debug?" debug":""} context: ${T.info.vendor}, ${T.info.renderer} for canvas: ${T.canvasContext.id}`;return log.probe(LOG_LEVEL,F)(),log.table(LOG_LEVEL,T.info)(),log.groupEnd(LOG_LEVEL)(),T}destroy(){}get isLost(){return this.gl.isContextLost()}getSize(){return[this.gl.drawingBufferWidth,this.gl.drawingBufferHeight]}isTextureFormatSupported(d){return isTextureFormatSupported(this.gl,d,this._extensions)}isTextureFormatFilterable(d){return isTextureFormatFilterable(this.gl,d,this._extensions)}isTextureFormatRenderable(d){return isTextureFormatRenderable(this.gl,d,this._extensions)}createCanvasContext(d){throw new Error("WebGL only supports a single canvas")}createBuffer(d){const _=this._getBufferProps(d);return new WEBGLBuffer(this,_)}_createTexture(d){return new WEBGLTexture(this,d)}createExternalTexture(d){throw new Error("createExternalTexture() not implemented")}createSampler(d){return new WEBGLSampler(this,d)}createShader(d){return new WEBGLShader(this,d)}createFramebuffer(d){return new WEBGLFramebuffer(this,d)}createVertexArray(d){return new WEBGLVertexArray(this,d)}createTransformFeedback(d){return new WEBGLTransformFeedback(this,d)}createQuerySet(d){return new WEBGLQuerySet(this,d)}createRenderPipeline(d){return new WEBGLRenderPipeline(this,d)}beginRenderPass(d){return new WEBGLRenderPass(this,d)}createComputePipeline(d){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(d){throw new Error("ComputePass not supported in WebGL")}createCommandEncoder(d){return new WEBGLCommandEncoder(this,d)}submit(){var d;(d=this.renderPass)==null||d.end(),this.renderPass=null}readPixelsToArrayWebGL(d,_){return readPixelsToArray(d,_)}readPixelsToBufferWebGL(d,_){return readPixelsToBuffer(d,_)}setParametersWebGL(d){setGLParameters(this.gl,d)}getParametersWebGL(d){return getGLParameters(this.gl,d)}withParametersWebGL(d,_){return withGLParameters(this.gl,d,_)}clearWebGL(d){clear(this,d)}resetWebGL(){log.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),resetGLParameters(this.gl)}loseDevice(){var T;let d=!1;const S=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return S&&(d=!0,S.loseContext()),(T=this._resolveContextLost)==null||T.call(this,{reason:"destroyed",message:"Application triggered context loss"}),d}pushState(){pushContextState(this.gl)}popState(){popContextState(this.gl)}setSpectorMetadata(d,_){d.__SPECTOR_Metadata=_}getGLKey(d,_){_=_||this.gl2||this.gl;const S=Number(d);for(const T in _)if(_[T]===S)return`GL.${T}`;return String(d)}setConstantAttributeWebGL(d,_){const S=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(S).fill(null);const T=this._constants[d];switch(T&&compareConstantArrayValues(T,_)&&log.info(1,`setConstantAttributeWebGL(${d}) could have been skipped, value unchanged`)(),this._constants[d]=_,_.constructor){case Float32Array:setConstantFloatArray(this,d,_);break;case Int32Array:setConstantIntArray(this,d,_);break;case Uint32Array:setConstantUintArray(this,d,_);break;default:assert$5(!1)}}getExtension(d){return getWebGLExtension(this.gl,d,this._extensions),this._extensions}};Bt(Tm,"type","webgl");let WebGLDevice=Tm;function isWebGL(f){return typeof WebGL2RenderingContext<"u"&&f instanceof WebGL2RenderingContext?!0:!!(f&&Number.isFinite(f._version))}function setConstantFloatArray(f,s,d){switch(d.length){case 1:f.gl.vertexAttrib1fv(s,d);break;case 2:f.gl.vertexAttrib2fv(s,d);break;case 3:f.gl.vertexAttrib3fv(s,d);break;case 4:f.gl.vertexAttrib4fv(s,d);break;default:assert$5(!1)}}function setConstantIntArray(f,s,d){f.gl.vertexAttribI4iv(s,d)}function setConstantUintArray(f,s,d){f.gl.vertexAttribI4uiv(s,d)}function compareConstantArrayValues(f,s){if(!f||!s||f.length!==s.length||f.constructor!==s.constructor)return!1;for(let d=0;d<f.length;++d)if(f[d]!==s[d])return!1;return!0}var hammer$1={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(f){(function(s,d,_,S){var T=["","webkit","Moz","MS","ms","o"],F=d.createElement("div"),M="function",P=Math.round,H=Math.abs,J=Date.now;function K(Mt,Ot,Qn){return setTimeout(ve(Mt,Qn),Ot)}function z(Mt,Ot,Qn){return Array.isArray(Mt)?(oe(Mt,Qn[Ot],Qn),!0):!1}function oe(Mt,Ot,Qn){var va;if(Mt)if(Mt.forEach)Mt.forEach(Ot,Qn);else if(Mt.length!==S)for(va=0;va<Mt.length;)Ot.call(Qn,Mt[va],va,Mt),va++;else for(va in Mt)Mt.hasOwnProperty(va)&&Ot.call(Qn,Mt[va],va,Mt)}function se(Mt,Ot,Qn){var va="DEPRECATED METHOD: "+Ot+`
`+Qn+` AT 
`;return function(){var UA=new Error("get-stack-trace"),wI=UA&&UA.stack?UA.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",AC=s.console&&(s.console.warn||s.console.log);return AC&&AC.call(s.console,va,wI),Mt.apply(this,arguments)}}var ae;typeof Object.assign!="function"?ae=function(Ot){if(Ot===S||Ot===null)throw new TypeError("Cannot convert undefined or null to object");for(var Qn=Object(Ot),va=1;va<arguments.length;va++){var UA=arguments[va];if(UA!==S&&UA!==null)for(var wI in UA)UA.hasOwnProperty(wI)&&(Qn[wI]=UA[wI])}return Qn}:ae=Object.assign;var ge=se(function(Ot,Qn,va){for(var UA=Object.keys(Qn),wI=0;wI<UA.length;)(!va||va&&Ot[UA[wI]]===S)&&(Ot[UA[wI]]=Qn[UA[wI]]),wI++;return Ot},"extend","Use `assign`."),pe=se(function(Ot,Qn){return ge(Ot,Qn,!0)},"merge","Use `assign`.");function he(Mt,Ot,Qn){var va=Ot.prototype,UA;UA=Mt.prototype=Object.create(va),UA.constructor=Mt,UA._super=va,Qn&&ae(UA,Qn)}function ve(Mt,Ot){return function(){return Mt.apply(Ot,arguments)}}function be(Mt,Ot){return typeof Mt==M?Mt.apply(Ot&&Ot[0]||S,Ot):Mt}function Re(Mt,Ot){return Mt===S?Ot:Mt}function Fe(Mt,Ot,Qn){oe(St(Ot),function(va){Mt.addEventListener(va,Qn,!1)})}function ye(Mt,Ot,Qn){oe(St(Ot),function(va){Mt.removeEventListener(va,Qn,!1)})}function Ue(Mt,Ot){for(;Mt;){if(Mt==Ot)return!0;Mt=Mt.parentNode}return!1}function It(Mt,Ot){return Mt.indexOf(Ot)>-1}function St(Mt){return Mt.trim().split(/\s+/g)}function At(Mt,Ot,Qn){if(Mt.indexOf&&!Qn)return Mt.indexOf(Ot);for(var va=0;va<Mt.length;){if(Qn&&Mt[va][Qn]==Ot||!Qn&&Mt[va]===Ot)return va;va++}return-1}function xt(Mt){return Array.prototype.slice.call(Mt,0)}function Ct(Mt,Ot,Qn){for(var va=[],UA=[],wI=0;wI<Mt.length;){var AC=Mt[wI][Ot];At(UA,AC)<0&&va.push(Mt[wI]),UA[wI]=AC,wI++}return va=va.sort(function(NC,UC){return NC[Ot]>UC[Ot]}),va}function Nt(Mt,Ot){for(var Qn,va,UA=Ot[0].toUpperCase()+Ot.slice(1),wI=0;wI<T.length;){if(Qn=T[wI],va=Qn?Qn+UA:Ot,va in Mt)return va;wI++}return S}var qt=1;function Jn(){return qt++}function qr(Mt){var Ot=Mt.ownerDocument||Mt;return Ot.defaultView||Ot.parentWindow||s}var na=/mobile|tablet|ip(ad|hone|od)|android/i,qn="ontouchstart"in s,vA=Nt(s,"PointerEvent")!==S,TA=qn&&na.test(navigator.userAgent),VA="touch",mI="pen",jA="mouse",aI="kinect",WA=25,KA=1,rA=2,ta=4,fa=8,yA=1,_A=2,la=4,AA=8,tA=16,ba=_A|la,iA=AA|tA,lA=ba|iA,yI=["x","y"],rI=["clientX","clientY"];function BI(Mt,Ot){var Qn=this;this.manager=Mt,this.callback=Ot,this.element=Mt.element,this.target=Mt.options.inputTarget,this.domHandler=function(va){be(Mt.options.enable,[Mt])&&Qn.handler(va)},this.init()}BI.prototype={handler:function(){},init:function(){this.evEl&&Fe(this.element,this.evEl,this.domHandler),this.evTarget&&Fe(this.target,this.evTarget,this.domHandler),this.evWin&&Fe(qr(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ye(this.element,this.evEl,this.domHandler),this.evTarget&&ye(this.target,this.evTarget,this.domHandler),this.evWin&&ye(qr(this.element),this.evWin,this.domHandler)}};function NI(Mt){var Ot,Qn=Mt.options.inputClass;return Qn?Ot=Qn:vA?Ot=_C:TA?Ot=iI:qn?Ot=sC:Ot=IC,new Ot(Mt,Rt)}function Rt(Mt,Ot,Qn){var va=Qn.pointers.length,UA=Qn.changedPointers.length,wI=Ot&KA&&va-UA===0,AC=Ot&(ta|fa)&&va-UA===0;Qn.isFirst=!!wI,Qn.isFinal=!!AC,wI&&(Mt.session={}),Qn.eventType=Ot,QA(Mt,Qn),Mt.emit("hammer.input",Qn),Mt.recognize(Qn),Mt.session.prevInput=Qn}function QA(Mt,Ot){var Qn=Mt.session,va=Ot.pointers,UA=va.length;Qn.firstInput||(Qn.firstInput=LI(Ot)),UA>1&&!Qn.firstMultiple?Qn.firstMultiple=LI(Ot):UA===1&&(Qn.firstMultiple=!1);var wI=Qn.firstInput,AC=Qn.firstMultiple,xC=AC?AC.center:wI.center,NC=Ot.center=da(va);Ot.timeStamp=J(),Ot.deltaTime=Ot.timeStamp-wI.timeStamp,Ot.angle=vI(xC,NC),Ot.distance=pI(xC,NC),cA(Qn,Ot),Ot.offsetDirection=RA(Ot.deltaX,Ot.deltaY);var UC=dA(Ot.deltaTime,Ot.deltaX,Ot.deltaY);Ot.overallVelocityX=UC.x,Ot.overallVelocityY=UC.y,Ot.overallVelocity=H(UC.x)>H(UC.y)?UC.x:UC.y,Ot.scale=AC?zI(AC.pointers,va):1,Ot.rotation=AC?EI(AC.pointers,va):0,Ot.maxPointers=Qn.prevInput?Ot.pointers.length>Qn.prevInput.maxPointers?Ot.pointers.length:Qn.prevInput.maxPointers:Ot.pointers.length,gI(Qn,Ot);var lE=Mt.element;Ue(Ot.srcEvent.target,lE)&&(lE=Ot.srcEvent.target),Ot.target=lE}function cA(Mt,Ot){var Qn=Ot.center,va=Mt.offsetDelta||{},UA=Mt.prevDelta||{},wI=Mt.prevInput||{};(Ot.eventType===KA||wI.eventType===ta)&&(UA=Mt.prevDelta={x:wI.deltaX||0,y:wI.deltaY||0},va=Mt.offsetDelta={x:Qn.x,y:Qn.y}),Ot.deltaX=UA.x+(Qn.x-va.x),Ot.deltaY=UA.y+(Qn.y-va.y)}function gI(Mt,Ot){var Qn=Mt.lastInterval||Ot,va=Ot.timeStamp-Qn.timeStamp,UA,wI,AC,xC;if(Ot.eventType!=fa&&(va>WA||Qn.velocity===S)){var NC=Ot.deltaX-Qn.deltaX,UC=Ot.deltaY-Qn.deltaY,lE=dA(va,NC,UC);wI=lE.x,AC=lE.y,UA=H(lE.x)>H(lE.y)?lE.x:lE.y,xC=RA(NC,UC),Mt.lastInterval=Ot}else UA=Qn.velocity,wI=Qn.velocityX,AC=Qn.velocityY,xC=Qn.direction;Ot.velocity=UA,Ot.velocityX=wI,Ot.velocityY=AC,Ot.direction=xC}function LI(Mt){for(var Ot=[],Qn=0;Qn<Mt.pointers.length;)Ot[Qn]={clientX:P(Mt.pointers[Qn].clientX),clientY:P(Mt.pointers[Qn].clientY)},Qn++;return{timeStamp:J(),pointers:Ot,center:da(Ot),deltaX:Mt.deltaX,deltaY:Mt.deltaY}}function da(Mt){var Ot=Mt.length;if(Ot===1)return{x:P(Mt[0].clientX),y:P(Mt[0].clientY)};for(var Qn=0,va=0,UA=0;UA<Ot;)Qn+=Mt[UA].clientX,va+=Mt[UA].clientY,UA++;return{x:P(Qn/Ot),y:P(va/Ot)}}function dA(Mt,Ot,Qn){return{x:Ot/Mt||0,y:Qn/Mt||0}}function RA(Mt,Ot){return Mt===Ot?yA:H(Mt)>=H(Ot)?Mt<0?_A:la:Ot<0?AA:tA}function pI(Mt,Ot,Qn){Qn||(Qn=yI);var va=Ot[Qn[0]]-Mt[Qn[0]],UA=Ot[Qn[1]]-Mt[Qn[1]];return Math.sqrt(va*va+UA*UA)}function vI(Mt,Ot,Qn){Qn||(Qn=yI);var va=Ot[Qn[0]]-Mt[Qn[0]],UA=Ot[Qn[1]]-Mt[Qn[1]];return Math.atan2(UA,va)*180/Math.PI}function EI(Mt,Ot){return vI(Ot[1],Ot[0],rI)+vI(Mt[1],Mt[0],rI)}function zI(Mt,Ot){return pI(Ot[0],Ot[1],rI)/pI(Mt[0],Mt[1],rI)}var FI={mousedown:KA,mousemove:rA,mouseup:ta},DI="mousedown",ZI="mousemove mouseup";function IC(){this.evEl=DI,this.evWin=ZI,this.pressed=!1,BI.apply(this,arguments)}he(IC,BI,{handler:function(Ot){var Qn=FI[Ot.type];Qn&KA&&Ot.button===0&&(this.pressed=!0),Qn&rA&&Ot.which!==1&&(Qn=ta),this.pressed&&(Qn&ta&&(this.pressed=!1),this.callback(this.manager,Qn,{pointers:[Ot],changedPointers:[Ot],pointerType:jA,srcEvent:Ot}))}});var mC={pointerdown:KA,pointermove:rA,pointerup:ta,pointercancel:fa,pointerout:fa},BC={2:VA,3:mI,4:jA,5:aI},yC="pointerdown",vC="pointermove pointerup pointercancel";s.MSPointerEvent&&!s.PointerEvent&&(yC="MSPointerDown",vC="MSPointerMove MSPointerUp MSPointerCancel");function _C(){this.evEl=yC,this.evWin=vC,BI.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}he(_C,BI,{handler:function(Ot){var Qn=this.store,va=!1,UA=Ot.type.toLowerCase().replace("ms",""),wI=mC[UA],AC=BC[Ot.pointerType]||Ot.pointerType,xC=AC==VA,NC=At(Qn,Ot.pointerId,"pointerId");wI&KA&&(Ot.button===0||xC)?NC<0&&(Qn.push(Ot),NC=Qn.length-1):wI&(ta|fa)&&(va=!0),!(NC<0)&&(Qn[NC]=Ot,this.callback(this.manager,wI,{pointers:Qn,changedPointers:[Ot],pointerType:AC,srcEvent:Ot}),va&&Qn.splice(NC,1))}});var RC={touchstart:KA,touchmove:rA,touchend:ta,touchcancel:fa},Xt="touchstart",zn="touchstart touchmove touchend touchcancel";function oa(){this.evTarget=Xt,this.evWin=zn,this.started=!1,BI.apply(this,arguments)}he(oa,BI,{handler:function(Ot){var Qn=RC[Ot.type];if(Qn===KA&&(this.started=!0),!!this.started){var va=MA.call(this,Ot,Qn);Qn&(ta|fa)&&va[0].length-va[1].length===0&&(this.started=!1),this.callback(this.manager,Qn,{pointers:va[0],changedPointers:va[1],pointerType:VA,srcEvent:Ot})}}});function MA(Mt,Ot){var Qn=xt(Mt.touches),va=xt(Mt.changedTouches);return Ot&(ta|fa)&&(Qn=Ct(Qn.concat(va),"identifier")),[Qn,va]}var YA={touchstart:KA,touchmove:rA,touchend:ta,touchcancel:fa},PA="touchstart touchmove touchend touchcancel";function iI(){this.evTarget=PA,this.targetIds={},BI.apply(this,arguments)}he(iI,BI,{handler:function(Ot){var Qn=YA[Ot.type],va=XA.call(this,Ot,Qn);va&&this.callback(this.manager,Qn,{pointers:va[0],changedPointers:va[1],pointerType:VA,srcEvent:Ot})}});function XA(Mt,Ot){var Qn=xt(Mt.touches),va=this.targetIds;if(Ot&(KA|rA)&&Qn.length===1)return va[Qn[0].identifier]=!0,[Qn,Qn];var UA,wI,AC=xt(Mt.changedTouches),xC=[],NC=this.target;if(wI=Qn.filter(function(UC){return Ue(UC.target,NC)}),Ot===KA)for(UA=0;UA<wI.length;)va[wI[UA].identifier]=!0,UA++;for(UA=0;UA<AC.length;)va[AC[UA].identifier]&&xC.push(AC[UA]),Ot&(ta|fa)&&delete va[AC[UA].identifier],UA++;if(xC.length)return[Ct(wI.concat(xC),"identifier"),xC]}var $I=2500,GI=25;function sC(){BI.apply(this,arguments);var Mt=ve(this.handler,this);this.touch=new iI(this.manager,Mt),this.mouse=new IC(this.manager,Mt),this.primaryTouch=null,this.lastTouches=[]}he(sC,BI,{handler:function(Ot,Qn,va){var UA=va.pointerType==VA,wI=va.pointerType==jA;if(!(wI&&va.sourceCapabilities&&va.sourceCapabilities.firesTouchEvents)){if(UA)eC.call(this,Qn,va);else if(wI&&Yt.call(this,va))return;this.callback(Ot,Qn,va)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function eC(Mt,Ot){Mt&KA?(this.primaryTouch=Ot.changedPointers[0].identifier,KI.call(this,Ot)):Mt&(ta|fa)&&KI.call(this,Ot)}function KI(Mt){var Ot=Mt.changedPointers[0];if(Ot.identifier===this.primaryTouch){var Qn={x:Ot.clientX,y:Ot.clientY};this.lastTouches.push(Qn);var va=this.lastTouches,UA=function(){var wI=va.indexOf(Qn);wI>-1&&va.splice(wI,1)};setTimeout(UA,$I)}}function Yt(Mt){for(var Ot=Mt.srcEvent.clientX,Qn=Mt.srcEvent.clientY,va=0;va<this.lastTouches.length;va++){var UA=this.lastTouches[va],wI=Math.abs(Ot-UA.x),AC=Math.abs(Qn-UA.y);if(wI<=GI&&AC<=GI)return!0}return!1}var Dn=Nt(F.style,"touchAction"),Kn=Dn!==S,Ut="compute",Wt="auto",ua="manipulation",uA="none",EA="pan-x",bA="pan-y",lI=VC();function YI(Mt,Ot){this.manager=Mt,this.set(Ot)}YI.prototype={set:function(Mt){Mt==Ut&&(Mt=this.compute()),Kn&&this.manager.element.style&&lI[Mt]&&(this.manager.element.style[Dn]=Mt),this.actions=Mt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Mt=[];return oe(this.manager.recognizers,function(Ot){be(Ot.options.enable,[Ot])&&(Mt=Mt.concat(Ot.getTouchAction()))}),uC(Mt.join(" "))},preventDefaults:function(Mt){var Ot=Mt.srcEvent,Qn=Mt.offsetDirection;if(this.manager.session.prevented){Ot.preventDefault();return}var va=this.actions,UA=It(va,uA)&&!lI[uA],wI=It(va,bA)&&!lI[bA],AC=It(va,EA)&&!lI[EA];if(UA){var xC=Mt.pointers.length===1,NC=Mt.distance<2,UC=Mt.deltaTime<250;if(xC&&NC&&UC)return}if(!(AC&&wI)&&(UA||wI&&Qn&ba||AC&&Qn&iA))return this.preventSrc(Ot)},preventSrc:function(Mt){this.manager.session.prevented=!0,Mt.preventDefault()}};function uC(Mt){if(It(Mt,uA))return uA;var Ot=It(Mt,EA),Qn=It(Mt,bA);return Ot&&Qn?uA:Ot||Qn?Ot?EA:bA:It(Mt,ua)?ua:Wt}function VC(){if(!Kn)return!1;var Mt={},Ot=s.CSS&&s.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Qn){Mt[Qn]=Ot?s.CSS.supports("touch-action",Qn):!0}),Mt}var jC=1,VI=2,hE=4,OC=8,JC=OC,fE=16,dE=32;function EE(Mt){this.options=ae({},this.defaults,Mt||{}),this.id=Jn(),this.manager=null,this.options.enable=Re(this.options.enable,!0),this.state=jC,this.simultaneous={},this.requireFail=[]}EE.prototype={defaults:{},set:function(Mt){return ae(this.options,Mt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Mt){if(z(Mt,"recognizeWith",this))return this;var Ot=this.simultaneous;return Mt=kE(Mt,this),Ot[Mt.id]||(Ot[Mt.id]=Mt,Mt.recognizeWith(this)),this},dropRecognizeWith:function(Mt){return z(Mt,"dropRecognizeWith",this)?this:(Mt=kE(Mt,this),delete this.simultaneous[Mt.id],this)},requireFailure:function(Mt){if(z(Mt,"requireFailure",this))return this;var Ot=this.requireFail;return Mt=kE(Mt,this),At(Ot,Mt)===-1&&(Ot.push(Mt),Mt.requireFailure(this)),this},dropRequireFailure:function(Mt){if(z(Mt,"dropRequireFailure",this))return this;Mt=kE(Mt,this);var Ot=At(this.requireFail,Mt);return Ot>-1&&this.requireFail.splice(Ot,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Mt){return!!this.simultaneous[Mt.id]},emit:function(Mt){var Ot=this,Qn=this.state;function va(UA){Ot.manager.emit(UA,Mt)}Qn<OC&&va(Ot.options.event+hm(Qn)),va(Ot.options.event),Mt.additionalEvent&&va(Mt.additionalEvent),Qn>=OC&&va(Ot.options.event+hm(Qn))},tryEmit:function(Mt){if(this.canEmit())return this.emit(Mt);this.state=dE},canEmit:function(){for(var Mt=0;Mt<this.requireFail.length;){if(!(this.requireFail[Mt].state&(dE|jC)))return!1;Mt++}return!0},recognize:function(Mt){var Ot=ae({},Mt);if(!be(this.options.enable,[this,Ot])){this.reset(),this.state=dE;return}this.state&(JC|fE|dE)&&(this.state=jC),this.state=this.process(Ot),this.state&(VI|hE|OC|fE)&&this.tryEmit(Ot)},process:function(Mt){},getTouchAction:function(){},reset:function(){}};function hm(Mt){return Mt&fE?"cancel":Mt&OC?"end":Mt&hE?"move":Mt&VI?"start":""}function fm(Mt){return Mt==tA?"down":Mt==AA?"up":Mt==_A?"left":Mt==la?"right":""}function kE(Mt,Ot){var Qn=Ot.manager;return Qn?Qn.get(Mt):Mt}function sE(){EE.apply(this,arguments)}he(sE,EE,{defaults:{pointers:1},attrTest:function(Mt){var Ot=this.options.pointers;return Ot===0||Mt.pointers.length===Ot},process:function(Mt){var Ot=this.state,Qn=Mt.eventType,va=Ot&(VI|hE),UA=this.attrTest(Mt);return va&&(Qn&fa||!UA)?Ot|fE:va||UA?Qn&ta?Ot|OC:Ot&VI?Ot|hE:VI:dE}});function GC(){sE.apply(this,arguments),this.pX=null,this.pY=null}he(GC,sE,{defaults:{event:"pan",threshold:10,pointers:1,direction:lA},getTouchAction:function(){var Mt=this.options.direction,Ot=[];return Mt&ba&&Ot.push(bA),Mt&iA&&Ot.push(EA),Ot},directionTest:function(Mt){var Ot=this.options,Qn=!0,va=Mt.distance,UA=Mt.direction,wI=Mt.deltaX,AC=Mt.deltaY;return UA&Ot.direction||(Ot.direction&ba?(UA=wI===0?yA:wI<0?_A:la,Qn=wI!=this.pX,va=Math.abs(Mt.deltaX)):(UA=AC===0?yA:AC<0?AA:tA,Qn=AC!=this.pY,va=Math.abs(Mt.deltaY))),Mt.direction=UA,Qn&&va>Ot.threshold&&UA&Ot.direction},attrTest:function(Mt){return sE.prototype.attrTest.call(this,Mt)&&(this.state&VI||!(this.state&VI)&&this.directionTest(Mt))},emit:function(Mt){this.pX=Mt.deltaX,this.pY=Mt.deltaY;var Ot=fm(Mt.direction);Ot&&(Mt.additionalEvent=this.options.event+Ot),this._super.emit.call(this,Mt)}});function QE(){sE.apply(this,arguments)}he(QE,sE,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[uA]},attrTest:function(Mt){return this._super.attrTest.call(this,Mt)&&(Math.abs(Mt.scale-1)>this.options.threshold||this.state&VI)},emit:function(Mt){if(Mt.scale!==1){var Ot=Mt.scale<1?"in":"out";Mt.additionalEvent=this.options.event+Ot}this._super.emit.call(this,Mt)}});function PE(){EE.apply(this,arguments),this._timer=null,this._input=null}he(PE,EE,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Wt]},process:function(Mt){var Ot=this.options,Qn=Mt.pointers.length===Ot.pointers,va=Mt.distance<Ot.threshold,UA=Mt.deltaTime>Ot.time;if(this._input=Mt,!va||!Qn||Mt.eventType&(ta|fa)&&!UA)this.reset();else if(Mt.eventType&KA)this.reset(),this._timer=K(function(){this.state=JC,this.tryEmit()},Ot.time,this);else if(Mt.eventType&ta)return JC;return dE},reset:function(){clearTimeout(this._timer)},emit:function(Mt){this.state===JC&&(Mt&&Mt.eventType&ta?this.manager.emit(this.options.event+"up",Mt):(this._input.timeStamp=J(),this.manager.emit(this.options.event,this._input)))}});function OE(){sE.apply(this,arguments)}he(OE,sE,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[uA]},attrTest:function(Mt){return this._super.attrTest.call(this,Mt)&&(Math.abs(Mt.rotation)>this.options.threshold||this.state&VI)}});function em(){sE.apply(this,arguments)}he(em,sE,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ba|iA,pointers:1},getTouchAction:function(){return GC.prototype.getTouchAction.call(this)},attrTest:function(Mt){var Ot=this.options.direction,Qn;return Ot&(ba|iA)?Qn=Mt.overallVelocity:Ot&ba?Qn=Mt.overallVelocityX:Ot&iA&&(Qn=Mt.overallVelocityY),this._super.attrTest.call(this,Mt)&&Ot&Mt.offsetDirection&&Mt.distance>this.options.threshold&&Mt.maxPointers==this.options.pointers&&H(Qn)>this.options.velocity&&Mt.eventType&ta},emit:function(Mt){var Ot=fm(Mt.offsetDirection);Ot&&this.manager.emit(this.options.event+Ot,Mt),this.manager.emit(this.options.event,Mt)}});function GE(){EE.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}he(GE,EE,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ua]},process:function(Mt){var Ot=this.options,Qn=Mt.pointers.length===Ot.pointers,va=Mt.distance<Ot.threshold,UA=Mt.deltaTime<Ot.time;if(this.reset(),Mt.eventType&KA&&this.count===0)return this.failTimeout();if(va&&UA&&Qn){if(Mt.eventType!=ta)return this.failTimeout();var wI=this.pTime?Mt.timeStamp-this.pTime<Ot.interval:!0,AC=!this.pCenter||pI(this.pCenter,Mt.center)<Ot.posThreshold;this.pTime=Mt.timeStamp,this.pCenter=Mt.center,!AC||!wI?this.count=1:this.count+=1,this._input=Mt;var xC=this.count%Ot.taps;if(xC===0)return this.hasRequireFailures()?(this._timer=K(function(){this.state=JC,this.tryEmit()},Ot.interval,this),VI):JC}return dE},failTimeout:function(){return this._timer=K(function(){this.state=dE},this.options.interval,this),dE},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==JC&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function mE(Mt,Ot){return Ot=Ot||{},Ot.recognizers=Re(Ot.recognizers,mE.defaults.preset),new tm(Mt,Ot)}mE.VERSION="2.0.7",mE.defaults={domEvents:!1,touchAction:Ut,enable:!0,inputTarget:null,inputClass:null,preset:[[OE,{enable:!1}],[QE,{enable:!1},["rotate"]],[em,{direction:ba}],[GC,{direction:ba},["swipe"]],[GE],[GE,{event:"doubletap",taps:2},["tap"]],[PE]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var _E=1,VE=2;function tm(Mt,Ot){this.options=ae({},mE.defaults,Ot||{}),this.options.inputTarget=this.options.inputTarget||Mt,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Mt,this.input=NI(this),this.touchAction=new YI(this,this.options.touchAction),rm(this,!0),oe(this.options.recognizers,function(Qn){var va=this.add(new Qn[0](Qn[1]));Qn[2]&&va.recognizeWith(Qn[2]),Qn[3]&&va.requireFailure(Qn[3])},this)}tm.prototype={set:function(Mt){return ae(this.options,Mt),Mt.touchAction&&this.touchAction.update(),Mt.inputTarget&&(this.input.destroy(),this.input.target=Mt.inputTarget,this.input.init()),this},stop:function(Mt){this.session.stopped=Mt?VE:_E},recognize:function(Mt){var Ot=this.session;if(!Ot.stopped){this.touchAction.preventDefaults(Mt);var Qn,va=this.recognizers,UA=Ot.curRecognizer;(!UA||UA&&UA.state&JC)&&(UA=Ot.curRecognizer=null);for(var wI=0;wI<va.length;)Qn=va[wI],Ot.stopped!==VE&&(!UA||Qn==UA||Qn.canRecognizeWith(UA))?Qn.recognize(Mt):Qn.reset(),!UA&&Qn.state&(VI|hE|OC)&&(UA=Ot.curRecognizer=Qn),wI++}},get:function(Mt){if(Mt instanceof EE)return Mt;for(var Ot=this.recognizers,Qn=0;Qn<Ot.length;Qn++)if(Ot[Qn].options.event==Mt)return Ot[Qn];return null},add:function(Mt){if(z(Mt,"add",this))return this;var Ot=this.get(Mt.options.event);return Ot&&this.remove(Ot),this.recognizers.push(Mt),Mt.manager=this,this.touchAction.update(),Mt},remove:function(Mt){if(z(Mt,"remove",this))return this;if(Mt=this.get(Mt),Mt){var Ot=this.recognizers,Qn=At(Ot,Mt);Qn!==-1&&(Ot.splice(Qn,1),this.touchAction.update())}return this},on:function(Mt,Ot){if(Mt!==S&&Ot!==S){var Qn=this.handlers;return oe(St(Mt),function(va){Qn[va]=Qn[va]||[],Qn[va].push(Ot)}),this}},off:function(Mt,Ot){if(Mt!==S){var Qn=this.handlers;return oe(St(Mt),function(va){Ot?Qn[va]&&Qn[va].splice(At(Qn[va],Ot),1):delete Qn[va]}),this}},emit:function(Mt,Ot){this.options.domEvents&&AE(Mt,Ot);var Qn=this.handlers[Mt]&&this.handlers[Mt].slice();if(!(!Qn||!Qn.length)){Ot.type=Mt,Ot.preventDefault=function(){Ot.srcEvent.preventDefault()};for(var va=0;va<Qn.length;)Qn[va](Ot),va++}},destroy:function(){this.element&&rm(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function rm(Mt,Ot){var Qn=Mt.element;if(Qn.style){var va;oe(Mt.options.cssProps,function(UA,wI){va=Nt(Qn.style,wI),Ot?(Mt.oldCssProps[va]=Qn.style[va],Qn.style[va]=UA):Qn.style[va]=Mt.oldCssProps[va]||""}),Ot||(Mt.oldCssProps={})}}function AE(Mt,Ot){var Qn=d.createEvent("Event");Qn.initEvent(Mt,!0,!0),Qn.gesture=Ot,Ot.target.dispatchEvent(Qn)}ae(mE,{INPUT_START:KA,INPUT_MOVE:rA,INPUT_END:ta,INPUT_CANCEL:fa,STATE_POSSIBLE:jC,STATE_BEGAN:VI,STATE_CHANGED:hE,STATE_ENDED:OC,STATE_RECOGNIZED:JC,STATE_CANCELLED:fE,STATE_FAILED:dE,DIRECTION_NONE:yA,DIRECTION_LEFT:_A,DIRECTION_RIGHT:la,DIRECTION_UP:AA,DIRECTION_DOWN:tA,DIRECTION_HORIZONTAL:ba,DIRECTION_VERTICAL:iA,DIRECTION_ALL:lA,Manager:tm,Input:BI,TouchAction:YI,TouchInput:iI,MouseInput:IC,PointerEventInput:_C,TouchMouseInput:sC,SingleTouchInput:oa,Recognizer:EE,AttrRecognizer:sE,Tap:GE,Pan:GC,Swipe:em,Pinch:QE,Rotate:OE,Press:PE,on:Fe,off:ye,each:oe,merge:pe,extend:ge,assign:ae,inherit:he,bindFn:ve,prefixed:Nt});var Nm=typeof s<"u"?s:typeof self<"u"?self:{};Nm.Hammer=mE,f.exports?f.exports=mE:s[_]=mE})(window,document,"Hammer")})(hammer$1);var hammerExports=hammer$1.exports;const hammer=getDefaultExportFromCjs(hammerExports),hammerjs=_mergeNamespaces({__proto__:null,default:hammer},[hammerExports]),INPUT_START=1,INPUT_MOVE=2,INPUT_END=4,MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END};function some(f,s){for(let d=0;d<f.length;d++)if(s(f[d]))return!0;return!1}function enhancePointerEventInput(f){const s=f.prototype.handler;f.prototype.handler=function(_){const S=this.store;_.button>0&&_.type==="pointerdown"&&(some(S,T=>T.pointerId===_.pointerId)||S.push(_)),s.call(this,_)}}function enhanceMouseInput(f){f.prototype.handler=function(d){let _=MOUSE_INPUT_MAP[d.type];_&INPUT_START&&d.button>=0&&(this.pressed=!0),_&INPUT_MOVE&&d.buttons===0&&(_=INPUT_END),this.pressed&&(_&INPUT_END&&(this.pressed=!1),this.callback(this.manager,_,{pointers:[d],changedPointers:[d],pointerType:"mouse",srcEvent:d}))}}enhancePointerEventInput(hammerExports.PointerEventInput);enhanceMouseInput(hammerExports.MouseInput);const Manager=hammerExports.Manager;class Input{constructor(s,d,_){this.element=s,this.callback=d,this.options={enable:!0,..._}}}const RECOGNIZERS=hammerjs?[[hammerjs.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[hammerjs.Rotate,{enable:!1}],[hammerjs.Pinch,{enable:!1}],[hammerjs.Swipe,{enable:!1}],[hammerjs.Pan,{threshold:0,enable:!1}],[hammerjs.Press,{enable:!1}],[hammerjs.Tap,{event:"doubletap",taps:2,enable:!1}],[hammerjs.Tap,{event:"anytap",enable:!1}],[hammerjs.Tap,{enable:!1}]]:null,RECOGNIZER_COMPATIBLE_MAP={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},RECOGNIZER_FALLBACK_MAP={doubletap:["tap"]},BASIC_EVENT_ALIASES={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},INPUT_EVENT_TYPES={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},EVENT_RECOGNIZER_MAP={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},GESTURE_EVENT_ALIASES={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},userAgent=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",window_=typeof window<"u"?window:global;let passiveSupported=!1;try{const f={get passive(){return passiveSupported=!0,!0}};window_.addEventListener("test",null,f),window_.removeEventListener("test",null)}catch(f){passiveSupported=!1}const firefox=userAgent.indexOf("firefox")!==-1,{WHEEL_EVENTS}=INPUT_EVENT_TYPES,EVENT_TYPE$1="wheel",WHEEL_DELTA_MAGIC_SCALER=4.000244140625,WHEEL_DELTA_PER_LINE=40,SHIFT_MULTIPLIER=.25;class WheelInput extends Input{constructor(s,d,_){super(s,d,_),this.handleEvent=S=>{if(!this.options.enable)return;let T=S.deltaY;window_.WheelEvent&&(firefox&&S.deltaMode===window_.WheelEvent.DOM_DELTA_PIXEL&&(T/=window_.devicePixelRatio),S.deltaMode===window_.WheelEvent.DOM_DELTA_LINE&&(T*=WHEEL_DELTA_PER_LINE)),T!==0&&T%WHEEL_DELTA_MAGIC_SCALER===0&&(T=Math.floor(T/WHEEL_DELTA_MAGIC_SCALER)),S.shiftKey&&T&&(T=T*SHIFT_MULTIPLIER),this.callback({type:EVENT_TYPE$1,center:{x:S.clientX,y:S.clientY},delta:-T,srcEvent:S,pointerType:"mouse",target:S.target})},this.events=(this.options.events||[]).concat(WHEEL_EVENTS),this.events.forEach(S=>s.addEventListener(S,this.handleEvent,passiveSupported?{passive:!1}:!1))}destroy(){this.events.forEach(s=>this.element.removeEventListener(s,this.handleEvent))}enableEventType(s,d){s===EVENT_TYPE$1&&(this.options.enable=d)}}const{MOUSE_EVENTS:MOUSE_EVENTS$1}=INPUT_EVENT_TYPES,MOVE_EVENT_TYPE="pointermove",OVER_EVENT_TYPE="pointerover",OUT_EVENT_TYPE="pointerout",ENTER_EVENT_TYPE="pointerenter",LEAVE_EVENT_TYPE="pointerleave";class MoveInput extends Input{constructor(s,d,_){super(s,d,_),this.handleEvent=T=>{this.handleOverEvent(T),this.handleOutEvent(T),this.handleEnterEvent(T),this.handleLeaveEvent(T),this.handleMoveEvent(T)},this.pressed=!1;const{enable:S}=this.options;this.enableMoveEvent=S,this.enableLeaveEvent=S,this.enableEnterEvent=S,this.enableOutEvent=S,this.enableOverEvent=S,this.events=(this.options.events||[]).concat(MOUSE_EVENTS$1),this.events.forEach(T=>s.addEventListener(T,this.handleEvent))}destroy(){this.events.forEach(s=>this.element.removeEventListener(s,this.handleEvent))}enableEventType(s,d){s===MOVE_EVENT_TYPE&&(this.enableMoveEvent=d),s===OVER_EVENT_TYPE&&(this.enableOverEvent=d),s===OUT_EVENT_TYPE&&(this.enableOutEvent=d),s===ENTER_EVENT_TYPE&&(this.enableEnterEvent=d),s===LEAVE_EVENT_TYPE&&(this.enableLeaveEvent=d)}handleOverEvent(s){this.enableOverEvent&&s.type==="mouseover"&&this._emit(OVER_EVENT_TYPE,s)}handleOutEvent(s){this.enableOutEvent&&s.type==="mouseout"&&this._emit(OUT_EVENT_TYPE,s)}handleEnterEvent(s){this.enableEnterEvent&&s.type==="mouseenter"&&this._emit(ENTER_EVENT_TYPE,s)}handleLeaveEvent(s){this.enableLeaveEvent&&s.type==="mouseleave"&&this._emit(LEAVE_EVENT_TYPE,s)}handleMoveEvent(s){if(this.enableMoveEvent)switch(s.type){case"mousedown":s.button>=0&&(this.pressed=!0);break;case"mousemove":s.buttons===0&&(this.pressed=!1),this.pressed||this._emit(MOVE_EVENT_TYPE,s);break;case"mouseup":this.pressed=!1;break}}_emit(s,d){this.callback({type:s,center:{x:d.clientX,y:d.clientY},srcEvent:d,pointerType:"mouse",target:d.target})}}const{KEY_EVENTS}=INPUT_EVENT_TYPES,DOWN_EVENT_TYPE="keydown",UP_EVENT_TYPE="keyup";class KeyInput extends Input{constructor(s,d,_){super(s,d,_),this.handleEvent=S=>{const T=S.target||S.srcElement;T.tagName==="INPUT"&&T.type==="text"||T.tagName==="TEXTAREA"||(this.enableDownEvent&&S.type==="keydown"&&this.callback({type:DOWN_EVENT_TYPE,srcEvent:S,key:S.key,target:S.target}),this.enableUpEvent&&S.type==="keyup"&&this.callback({type:UP_EVENT_TYPE,srcEvent:S,key:S.key,target:S.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(KEY_EVENTS),s.tabIndex=this.options.tabIndex||0,s.style.outline="none",this.events.forEach(S=>s.addEventListener(S,this.handleEvent))}destroy(){this.events.forEach(s=>this.element.removeEventListener(s,this.handleEvent))}enableEventType(s,d){s===DOWN_EVENT_TYPE&&(this.enableDownEvent=d),s===UP_EVENT_TYPE&&(this.enableUpEvent=d)}}const EVENT_TYPE="contextmenu";class ContextmenuInput extends Input{constructor(s,d,_){super(s,d,_),this.handleEvent=S=>{this.options.enable&&this.callback({type:EVENT_TYPE,center:{x:S.clientX,y:S.clientY},srcEvent:S,pointerType:"mouse",target:S.target})},s.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(s,d){s===EVENT_TYPE&&(this.options.enable=d)}}const DOWN_EVENT=1,MOVE_EVENT=2,UP_EVENT=4,MOUSE_EVENTS={pointerdown:DOWN_EVENT,pointermove:MOVE_EVENT,pointerup:UP_EVENT,mousedown:DOWN_EVENT,mousemove:MOVE_EVENT,mouseup:UP_EVENT},MOUSE_EVENT_BUTTON_LEFT=0,MOUSE_EVENT_BUTTON_MIDDLE=1,MOUSE_EVENT_BUTTON_RIGHT=2,MOUSE_EVENT_BUTTONS_LEFT_MASK=1,MOUSE_EVENT_BUTTONS_RIGHT_MASK=2,MOUSE_EVENT_BUTTONS_MIDDLE_MASK=4;function whichButtons(f){const s=MOUSE_EVENTS[f.srcEvent.type];if(!s)return null;const{buttons:d,button:_}=f.srcEvent;let S=!1,T=!1,F=!1;return s===MOVE_EVENT?(S=!!(d&MOUSE_EVENT_BUTTONS_LEFT_MASK),T=!!(d&MOUSE_EVENT_BUTTONS_MIDDLE_MASK),F=!!(d&MOUSE_EVENT_BUTTONS_RIGHT_MASK)):(S=_===MOUSE_EVENT_BUTTON_LEFT,T=_===MOUSE_EVENT_BUTTON_MIDDLE,F=_===MOUSE_EVENT_BUTTON_RIGHT),{leftButton:S,middleButton:T,rightButton:F}}function getOffsetPosition(f,s){const d=f.center;if(!d)return null;const _=s.getBoundingClientRect(),S=_.width/s.offsetWidth||1,T=_.height/s.offsetHeight||1,F={x:(d.x-_.left-s.clientLeft)/S,y:(d.y-_.top-s.clientTop)/T};return{center:d,offsetCenter:F}}const DEFAULT_OPTIONS$1={srcElement:"root",priority:0};class EventRegistrar{constructor(s){this.handleEvent=d=>{if(this.isEmpty())return;const _=this._normalizeEvent(d);let S=d.srcEvent.target;for(;S&&S!==_.rootElement;){if(this._emit(_,S),_.handled)return;S=S.parentNode}this._emit(_,"root")},this.eventManager=s,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(s,d,_,S=!1,T=!1){const{handlers:F,handlersByElement:M}=this;let P=DEFAULT_OPTIONS$1;typeof _=="string"||_&&_.addEventListener?P={...DEFAULT_OPTIONS$1,srcElement:_}:_&&(P={...DEFAULT_OPTIONS$1,..._});let H=M.get(P.srcElement);H||(H=[],M.set(P.srcElement,H));const J={type:s,handler:d,srcElement:P.srcElement,priority:P.priority};S&&(J.once=!0),T&&(J.passive=!0),F.push(J),this._active=this._active||!J.passive;let K=H.length-1;for(;K>=0&&!(H[K].priority>=J.priority);)K--;H.splice(K+1,0,J)}remove(s,d){const{handlers:_,handlersByElement:S}=this;for(let T=_.length-1;T>=0;T--){const F=_[T];if(F.type===s&&F.handler===d){_.splice(T,1);const M=S.get(F.srcElement);M.splice(M.indexOf(F),1),M.length===0&&S.delete(F.srcElement)}}this._active=_.some(T=>!T.passive)}_emit(s,d){const _=this.handlersByElement.get(d);if(_){let S=!1;const T=()=>{s.handled=!0},F=()=>{s.handled=!0,S=!0},M=[];for(let P=0;P<_.length;P++){const{type:H,handler:J,once:K}=_[P];if(J({...s,type:H,stopPropagation:T,stopImmediatePropagation:F}),K&&M.push(_[P]),S)break}for(let P=0;P<M.length;P++){const{type:H,handler:J}=M[P];this.remove(H,J)}}}_normalizeEvent(s){const d=this.eventManager.getElement();return{...s,...whichButtons(s),...getOffsetPosition(s,d),preventDefault:()=>{s.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:d}}}const DEFAULT_OPTIONS={events:null,recognizers:null,recognizerOptions:{},Manager,touchAction:"none",tabIndex:0};class EventManager{constructor(s=null,d){this._onBasicInput=S=>{const{srcEvent:T}=S,F=BASIC_EVENT_ALIASES[T.type];F&&this.manager.emit(F,S)},this._onOtherEvent=S=>{this.manager.emit(S.type,S)},this.options={...DEFAULT_OPTIONS,...d},this.events=new Map,this.setElement(s);const{events:_}=this.options;_&&this.on(_)}getElement(){return this.element}setElement(s){if(this.element&&this.destroy(),this.element=s,!s)return;const{options:d}=this,_=d.Manager;this.manager=new _(s,{touchAction:d.touchAction,recognizers:d.recognizers||RECOGNIZERS}).on("hammer.input",this._onBasicInput),d.recognizers||Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach(S=>{const T=this.manager.get(S);T&&RECOGNIZER_COMPATIBLE_MAP[S].forEach(F=>{T.recognizeWith(F)})});for(const S in d.recognizerOptions){const T=this.manager.get(S);if(T){const F=d.recognizerOptions[S];delete F.enable,T.set(F)}}this.wheelInput=new WheelInput(s,this._onOtherEvent,{enable:!1}),this.moveInput=new MoveInput(s,this._onOtherEvent,{enable:!1}),this.keyInput=new KeyInput(s,this._onOtherEvent,{enable:!1,tabIndex:d.tabIndex}),this.contextmenuInput=new ContextmenuInput(s,this._onOtherEvent,{enable:!1});for(const[S,T]of this.events)T.isEmpty()||(this._toggleRecognizer(T.recognizerName,!0),this.manager.on(S,T.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(s,d,_){this._addEventHandler(s,d,_,!1)}once(s,d,_){this._addEventHandler(s,d,_,!0)}watch(s,d,_){this._addEventHandler(s,d,_,!1,!0)}off(s,d){this._removeEventHandler(s,d)}_toggleRecognizer(s,d){const{manager:_}=this;if(!_)return;const S=_.get(s);if(S&&S.options.enable!==d){S.set({enable:d});const T=RECOGNIZER_FALLBACK_MAP[s];T&&!this.options.recognizers&&T.forEach(F=>{const M=_.get(F);d?(M.requireFailure(s),S.dropRequireFailure(F)):M.dropRequireFailure(s)})}this.wheelInput.enableEventType(s,d),this.moveInput.enableEventType(s,d),this.keyInput.enableEventType(s,d),this.contextmenuInput.enableEventType(s,d)}_addEventHandler(s,d,_,S,T){if(typeof s!="string"){_=d;for(const J in s)this._addEventHandler(J,s[J],_,S,T);return}const{manager:F,events:M}=this,P=GESTURE_EVENT_ALIASES[s]||s;let H=M.get(P);H||(H=new EventRegistrar(this),M.set(P,H),H.recognizerName=EVENT_RECOGNIZER_MAP[P]||P,F&&F.on(P,H.handleEvent)),H.add(s,d,_,S,T),H.isEmpty()||this._toggleRecognizer(H.recognizerName,!0)}_removeEventHandler(s,d){if(typeof s!="string"){for(const F in s)this._removeEventHandler(F,s[F]);return}const{events:_}=this,S=GESTURE_EVENT_ALIASES[s]||s,T=_.get(S);if(T&&(T.remove(s,d),T.isEmpty())){const{recognizerName:F}=T;let M=!1;for(const P of _.values())if(P.recognizerName===F&&!P.isEmpty()){M=!0;break}M||this._toggleRecognizer(F,!1)}}}function noop$7(){}const getCursor=({isDragging:f})=>f?"grabbing":"grab",defaultProps$o={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{type:"webgl"},gl:null,glOptions:{},canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:noop$7,onWebGLInitialized:noop$7,onResize:noop$7,onViewStateChange:noop$7,onInteractionStateChange:noop$7,onBeforeRender:noop$7,onAfterRender:noop$7,onLoad:noop$7,onError:f=>defaultLogger.error(f.message,f.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor,getTooltip:null,debug:!1,drawPickingColors:!1};class Deck{constructor(s){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new Stats({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=_=>{const{_pickRequest:S}=this;if(_.type==="pointerleave")S.x=-1,S.y=-1,S.radius=0;else{if(_.leftButton||_.rightButton)return;{const T=_.offsetCenter;if(!T)return;S.x=T.x,S.y=T.y,S.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:S.x,y:S.y}),S.event=_},this._onEvent=_=>{const S=EVENTS[_.type],T=_.offsetCenter;if(!S||!T||!this.layerManager)return;const F=this.layerManager.getLayers(),M=this.deckPicker.getLastPickedObject({x:T.x,y:T.y,layers:F,viewports:this.getViewports(T)},this._lastPointerDownInfo),{layer:P}=M,H=P&&(P[S.handler]||P.props[S.handler]),J=this.props[S.handler];let K=!1;H&&(K=H.call(P,M,_)),K||(J==null||J(M,_),this.widgetManager.onEvent(M,_))},this._onPointerDown=_=>{const S=_.offsetCenter,T=this._pick("pickObject","pickObject Time",{x:S.x,y:S.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=T.result[0]||T.emptyInfo},this.props={...defaultProps$o,...s},s=this.props,s.viewState&&s.initialViewState&&defaultLogger.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,s.device?this.device=s.device:s.gl&&(s.gl instanceof WebGLRenderingContext&&defaultLogger.error("WebGL1 context not supported.")(),this.device=WebGLDevice.attach(s.gl));let d=this.device;d||(luma.registerDevices([WebGLDevice]),d=luma.createDevice({...s.deviceProps,canvas:this._createCanvas(s)})),this.animationLoop=this._createAnimationLoop(d,s),this.setProps(s),s._typedArrayManagerProps&&defaultTypedArrayManager.setOptions(s._typedArrayManagerProps),this.animationLoop.start()}finalize(){var s,d,_,S,T,F,M,P,H,J;(s=this.animationLoop)==null||s.stop(),(d=this.animationLoop)==null||d.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,(_=this.layerManager)==null||_.finalize(),this.layerManager=null,(S=this.viewManager)==null||S.finalize(),this.viewManager=null,(T=this.effectManager)==null||T.finalize(),this.effectManager=null,(F=this.deckRenderer)==null||F.finalize(),this.deckRenderer=null,(M=this.deckPicker)==null||M.finalize(),this.deckPicker=null,(P=this.eventManager)==null||P.destroy(),this.eventManager=null,(H=this.widgetManager)==null||H.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&((J=this.canvas.parentElement)==null||J.removeChild(this.canvas),this.canvas=null)}setProps(s){var _;this.stats.get("setProps Time").timeStart(),"onLayerHover"in s&&defaultLogger.removed("onLayerHover","onHover")(),"onLayerClick"in s&&defaultLogger.removed("onLayerClick","onClick")(),s.initialViewState&&!deepEqual(this.props.initialViewState,s.initialViewState,3)&&(this.viewState=s.initialViewState),Object.assign(this.props,s),this._setCanvasSize(this.props);const d=Object.create(this.props);Object.assign(d,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),(_=this.animationLoop)==null||_.setProps(d),this.layerManager&&(this.viewManager.setProps(d),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(d),this.effectManager.setProps(d),this.deckRenderer.setProps(d),this.deckPicker.setProps(d),this.widgetManager.setProps(d)),this.stats.get("setProps Time").timeEnd()}needsRedraw(s={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let d=this._needsRedraw;s.clearRedrawFlags&&(this._needsRedraw=!1);const _=this.viewManager.needsRedraw(s),S=this.layerManager.needsRedraw(s),T=this.effectManager.needsRedraw(s),F=this.deckRenderer.needsRedraw(s);return d=d||_||S||T||F,d}redraw(s){if(!this.layerManager)return;let d=this.needsRedraw({clearRedrawFlags:!0});d=s||d,d&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(d):this._drawLayers(d))}get isInitialized(){return this.viewManager!==null}getViews(){return assert$2(this.viewManager),this.viewManager.views}getViewports(s){return assert$2(this.viewManager),this.viewManager.getViewports(s)}getCanvas(){return this.canvas}pickObject(s){const d=this._pick("pickObject","pickObject Time",s).result;return d.length?d[0]:null}pickMultipleObjects(s){return s.depth=s.depth||10,this._pick("pickObject","pickMultipleObjects Time",s).result}pickObjects(s){return this._pick("pickObjects","pickObjects Time",s)}_addResources(s,d=!1){for(const _ in s)this.layerManager.resourceManager.add({resourceId:_,data:s[_],forceUpdate:d})}_removeResources(s){for(const d of s)this.layerManager.resourceManager.remove(d)}_addDefaultEffect(s){this.effectManager.addDefaultEffect(s)}_addDefaultShaderModule(s){this.layerManager.addDefaultShaderModule(s)}_removeDefaultShaderModule(s){var d;(d=this.layerManager)==null||d.removeDefaultShaderModule(s)}_pick(s,d,_){assert$2(this.deckPicker);const{stats:S}=this;S.get("Pick Count").incrementCount(),S.get(d).timeStart();const T=this.deckPicker[s]({layers:this.layerManager.getLayers(_),views:this.viewManager.getViews(),viewports:this.getViewports(_),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),..._});return S.get(d).timeEnd(),T}_createCanvas(s){let d=s.canvas;return typeof d=="string"&&(d=document.getElementById(d),assert$2(d)),d||(d=document.createElement("canvas"),d.id=s.id||"deckgl-overlay",(s.parent||document.body).appendChild(d)),Object.assign(d.style,s.style),d}_setCanvasSize(s){var S;if(!this.canvas)return;const{width:d,height:_}=s;if(d||d===0){const T=Number.isFinite(d)?`${d}px`:d;this.canvas.style.width=T}if(_||_===0){const T=Number.isFinite(_)?`${_}px`:_;this.canvas.style.position=((S=s.style)==null?void 0:S.position)||"absolute",this.canvas.style.height=T}}_updateCanvasSize(){var S,T;const{canvas:s}=this;if(!s)return;const d=s.clientWidth??s.width,_=s.clientHeight??s.height;(d!==this.width||_!==this.height)&&(this.width=d,this.height=_,(S=this.viewManager)==null||S.setProps({width:d,height:_}),(T=this.layerManager)==null||T.activateViewport(this.getViewports()[0]),this.props.onResize({width:d,height:_}))}_createAnimationLoop(s,d){const{gl:_,onError:S,useDevicePixels:T}=d;return new AnimationLoop({device:s,useDevicePixels:T,autoResizeDrawingBuffer:!_,autoResizeViewport:!1,onInitialize:F=>this._setDevice(F.device),onRender:this._onRenderFrame.bind(this),onError:S})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:s}=this.props,d=Array.isArray(s)?s:s?[s]:[new MapView({id:"default-view"})];return d.length&&this.props.controller&&(d[0].props.controller=this.props.controller),d}_onContextLost(){const{onError:s}=this.props;this.animationLoop&&s&&s(new Error("WebGL context is lost"))}_pickAndCallback(){var d,_,S;const{_pickRequest:s}=this;if(s.event){const{result:T,emptyInfo:F}=this._pick("pickObject","pickObject Time",s);this.cursorState.isHovering=T.length>0;let M=F,P=!1;for(const H of T)M=H,P=((d=H.layer)==null?void 0:d.onHover(H,s.event))||P;P||((S=(_=this.props).onHover)==null||S.call(_,M,s.event),this.widgetManager.onHover(M,s.event)),s.event=null}}_updateCursor(){const s=this.props.parent||this.canvas;s&&(s.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(s){var S,T;if(this.device=s,!this.animationLoop)return;this.canvas||(this.canvas=(S=this.device.canvasContext)==null?void 0:S.canvas),this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device instanceof WebGLDevice&&this.props.onWebGLInitialized(this.device.gl);const d=new Timeline;d.play(),this.animationLoop.attachTimeline(d),this.eventManager=new EventManager(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const F in EVENTS)this.eventManager.on(F,this._onEvent);this.viewManager=new ViewManager({timeline:d,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const _=this.viewManager.getViewports()[0];this.layerManager=new LayerManager(this.device,{deck:this,stats:this.stats,viewport:_,timeline:d}),this.effectManager=new EffectManager({deck:this,device:this.device}),this.deckRenderer=new DeckRenderer(this.device),this.deckPicker=new DeckPicker(this.device),this.widgetManager=new WidgetManager({deck:this,parentElement:(T=this.canvas)==null?void 0:T.parentElement}),this.widgetManager.addDefault(new Tooltip),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(s,d){var F;const{device:_,gl:S}=this.layerManager.context;this.props.onBeforeRender({device:_,gl:S});const T={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...d};(F=this.deckRenderer)==null||F.renderLayers(T),T.pass==="screen"&&this.widgetManager.onRedraw({viewports:T.viewports,layers:T.layers}),this.props.onAfterRender({device:_,gl:S})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),defaultLogger.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(s){const d=this.props.onViewStateChange(s)||s.viewState;this.viewState&&(this.viewState={...this.viewState,[s.viewId]:d},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(s){this.cursorState.isDragging=s.isDragging||!1,this.props.onInteractionStateChange(s)}_getFrameStats(){const{stats:s}=this;s.get("frameRate").timeEnd(),s.get("frameRate").timeStart();const d=this.animationLoop.stats;s.get("GPU Time").addTime(d.get("GPU Time").lastTiming),s.get("CPU Time").addTime(d.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:s,stats:d}=this;s.fps=d.get("frameRate").getHz(),s.setPropsTime=d.get("setProps Time").time,s.updateAttributesTime=d.get("Update Attributes").time,s.framesRedrawn=d.get("Redraw Count").count,s.pickTime=d.get("pickObject Time").time+d.get("pickMultipleObjects Time").time+d.get("pickObjects Time").time,s.pickCount=d.get("Pick Count").count,s.gpuTime=d.get("GPU Time").time,s.cpuTime=d.get("CPU Time").time,s.gpuTimePerFrame=d.get("GPU Time").getAverageTime(),s.cpuTimePerFrame=d.get("CPU Time").getAverageTime();const _=luma.stats.get("Memory Usage");s.bufferMemory=_.get("Buffer Memory").count,s.textureMemory=_.get("Texture Memory").count,s.renderbufferMemory=_.get("Renderbuffer Memory").count,s.gpuMemory=_.get("GPU Memory").count}}Deck.defaultProps=defaultProps$o;Deck.VERSION=VERSION$2;function typedArrayFromDataType(f){switch(f){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return getTypedArrayFromDataType(f)}}const dataTypeFromTypedArray=getDataTypeFromTypedArray;function getBufferAttributeLayout(f,s){return{attribute:f,format:s.size>1?`${s.type}x${s.size}`:s.type,byteOffset:s.offset||0}}function getStride(f){return f.stride||f.size*f.bytesPerElement}function bufferLayoutEqual(f,s){return f.type===s.type&&f.size===s.size&&getStride(f)===getStride(s)&&(f.offset||0)===(s.offset||0)}function resolveShaderAttribute(f,s){s.offset&&defaultLogger.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const d=getStride(f),_=s.vertexOffset!==void 0?s.vertexOffset:f.vertexOffset||0,S=s.elementOffset||0,T=_*d+S*f.bytesPerElement+(f.offset||0);return{...s,offset:T,stride:d}}function resolveDoublePrecisionShaderAttributes(f,s){const d=resolveShaderAttribute(f,s);return{high:d,low:{...d,offset:d.offset+f.size*4}}}class DataColumn{constructor(s,d,_){this._buffer=null,this.device=s,this.id=d.id||"",this.size=d.size||1;const S=d.logicalType||d.type,T=S==="float64";let{defaultValue:F}=d;F=Number.isFinite(F)?[F]:F||new Array(this.size).fill(0);let M;T?M="float32":!S&&d.isIndexed?M="uint32":M=S||"float32";let P=typedArrayFromDataType(S||M);this.doublePrecision=T,T&&d.fp64===!1&&(P=Float32Array),this.value=null,this.settings={...d,defaultType:P,defaultValue:F,logicalType:S,type:M,normalized:M.includes("norm"),size:this.size,bytesPerElement:P.BYTES_PER_ELEMENT},this.state={..._,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const s=this.getAccessor();return s.vertexOffset?s.vertexOffset*getStride(s):0}get numInstances(){return this.state.numInstances}set numInstances(s){this.state.numInstances=s}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),defaultTypedArrayManager.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(s=this.id,d=null){const _={};if(this.state.constant){const S=this.value;if(d){const T=resolveShaderAttribute(this.getAccessor(),d),F=T.offset/S.BYTES_PER_ELEMENT,M=T.size||this.size;_[s]=S.subarray(F,F+M)}else _[s]=S}else _[s]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?_[`${s}64Low`]=_[s]:_[`${s}64Low`]=new Float32Array(this.size)),_}_getBufferLayout(s=this.id,d=null){const _=this.getAccessor(),S=[],T={name:this.id,byteStride:getStride(_),attributes:S};if(this.doublePrecision){const F=resolveDoublePrecisionShaderAttributes(_,d||{});S.push(getBufferAttributeLayout(s,{..._,...F.high}),getBufferAttributeLayout(`${s}64Low`,{..._,...F.low}))}else if(d){const F=resolveShaderAttribute(_,d);S.push(getBufferAttributeLayout(s,{..._,...F}))}else S.push(getBufferAttributeLayout(s,_));return T}setAccessor(s){this.state.bufferAccessor=s}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let s=null;if(this.state.constant&&this.value){const d=Array.from(this.value);s=[d,d]}else{const{value:d,numInstances:_,size:S}=this,T=_*S;if(d&&T&&d.length>=T){const F=new Array(S).fill(1/0),M=new Array(S).fill(-1/0);for(let P=0;P<T;)for(let H=0;H<S;H++){const J=d[P++];J<F[H]&&(F[H]=J),J>M[H]&&(M[H]=J)}s=[F,M]}}return this.state.bounds=s,s}setData(s){const{state:d}=this;let _;ArrayBuffer.isView(s)?_={value:s}:s instanceof Buffer$1?_={buffer:s}:_=s;const S={...this.settings,..._};if(ArrayBuffer.isView(_.value)){if(!_.type)if(this.doublePrecision&&_.value instanceof Float64Array)S.type="float32";else{const F=dataTypeFromTypedArray(_.value);S.type=S.normalized?F.replace("int","norm"):F}S.bytesPerElement=_.value.BYTES_PER_ELEMENT,S.stride=getStride(S)}if(d.bounds=null,_.constant){let T=_.value;if(T=this._normalizeValue(T,[],0),this.settings.normalized&&(T=this.normalizeConstant(T)),!(!d.constant||!this._areValuesEqual(T,this.value)))return!1;d.externalBuffer=null,d.constant=!0,this.value=ArrayBuffer.isView(T)?T:new Float32Array(T)}else if(_.buffer){const T=_.buffer;d.externalBuffer=T,d.constant=!1,this.value=_.value||null}else if(_.value){this._checkExternalBuffer(_);let T=_.value;d.externalBuffer=null,d.constant=!1,this.value=T;let{buffer:F}=this;const M=getStride(S),P=(S.vertexOffset||0)*M;if(this.doublePrecision&&T instanceof Float64Array&&(T=toDoublePrecisionArray(T,S)),this.settings.isIndexed){const J=this.settings.defaultType;T.constructor!==J&&(T=new J(T))}const H=T.byteLength+P+M*2;(!F||F.byteLength<H)&&(F=this._createBuffer(H)),F.write(T,P)}return this.setAccessor(S),!0}updateSubBuffer(s={}){this.state.bounds=null;const d=this.value,{startOffset:_=0,endOffset:S}=s;this.buffer.write(this.doublePrecision&&d instanceof Float64Array?toDoublePrecisionArray(d,{size:this.size,startIndex:_,endIndex:S}):d.subarray(_,S),_*d.BYTES_PER_ELEMENT+this.byteOffset)}allocate(s,d=!1){const{state:_}=this,S=_.allocatedValue,T=defaultTypedArrayManager.allocate(S,s+1,{size:this.size,type:this.settings.defaultType,copy:d});this.value=T;const{byteOffset:F}=this;let{buffer:M}=this;return(!M||M.byteLength<T.byteLength+F)&&(M=this._createBuffer(T.byteLength+F),d&&S&&M.write(S instanceof Float64Array?toDoublePrecisionArray(S,this):S,F)),_.allocatedValue=T,_.constant=!1,_.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(s){const{value:d}=s;if(!ArrayBuffer.isView(d))throw new Error(`Attribute ${this.id} value is not TypedArray`);const _=this.settings.defaultType;let S=!1;if(this.doublePrecision&&(S=d.BYTES_PER_ELEMENT<4),S)throw new Error(`Attribute ${this.id} does not support ${d.constructor.name}`);!(d instanceof _)&&this.settings.normalized&&!("normalized"in s)&&defaultLogger.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(s){switch(this.settings.type){case"snorm8":return new Float32Array(s).map(d=>(d+128)/255*2-1);case"snorm16":return new Float32Array(s).map(d=>(d+32768)/65535*2-1);case"unorm8":return new Float32Array(s).map(d=>d/255);case"unorm16":return new Float32Array(s).map(d=>d/65535);default:return s}}_normalizeValue(s,d,_){const{defaultValue:S,size:T}=this.settings;if(Number.isFinite(s))return d[_]=s,d;if(!s){let F=T;for(;--F>=0;)d[_+F]=S[F];return d}switch(T){case 4:d[_+3]=Number.isFinite(s[3])?s[3]:S[3];case 3:d[_+2]=Number.isFinite(s[2])?s[2]:S[2];case 2:d[_+1]=Number.isFinite(s[1])?s[1]:S[1];case 1:d[_+0]=Number.isFinite(s[0])?s[0]:S[0];break;default:let F=T;for(;--F>=0;)d[_+F]=Number.isFinite(s[F])?s[F]:S[F]}return d}_areValuesEqual(s,d){if(!s||!d)return!1;const{size:_}=this;for(let S=0;S<_;S++)if(s[S]!==d[S])return!1;return!0}_createBuffer(s){var S;this._buffer&&this._buffer.destroy();const{isIndexed:d,type:_}=this.settings;return this._buffer=this.device.createBuffer({...(S=this._buffer)==null?void 0:S.props,id:this.id,usage:d?Buffer$1.INDEX:Buffer$1.VERTEX,indexType:d?_:void 0,byteLength:s}),this._buffer}}const EMPTY_ARRAY$2=[],placeholderArray=[];function createIterable(f,s=0,d=1/0){let _=EMPTY_ARRAY$2;const S={index:-1,data:f,target:[]};return f?typeof f[Symbol.iterator]=="function"?_=f:f.length>0&&(placeholderArray.length=f.length,_=placeholderArray):_=EMPTY_ARRAY$2,(s>0||Number.isFinite(d))&&(_=(Array.isArray(_)?_:Array.from(_)).slice(s,d),S.index=s-1),{iterable:_,objectInfo:S}}function isAsyncIterable(f){return f&&f[Symbol.asyncIterator]}function getAccessorFromBuffer(f,s){const{size:d,stride:_,offset:S,startIndices:T,nested:F}=s,M=f.BYTES_PER_ELEMENT,P=_?_/M:d,H=S?S/M:0,J=Math.floor((f.length-H)/P);return(K,{index:z,target:oe})=>{if(!T){const pe=z*P+H;for(let he=0;he<d;he++)oe[he]=f[pe+he];return oe}const se=T[z],ae=T[z+1]||J;let ge;if(F){ge=new Array(ae-se);for(let pe=se;pe<ae;pe++){const he=pe*P+H;oe=new Array(d);for(let ve=0;ve<d;ve++)oe[ve]=f[he+ve];ge[pe-se]=oe}}else if(P===d)ge=f.subarray(se*d+H,ae*d+H);else{ge=new f.constructor((ae-se)*d);let pe=0;for(let he=se;he<ae;he++){const ve=he*P+H;for(let be=0;be<d;be++)ge[pe++]=f[ve+be]}}return ge}}const EMPTY=[],FULL=[[0,1/0]];function add$4(f,s){if(f===FULL||(s[0]<0&&(s[0]=0),s[0]>=s[1]))return f;const d=[],_=f.length;let S=0;for(let T=0;T<_;T++){const F=f[T];F[1]<s[0]?(d.push(F),S=T+1):F[0]>s[1]?d.push(F):s=[Math.min(F[0],s[0]),Math.max(F[1],s[1])]}return d.splice(S,0,s),d}const DEFAULT_TRANSITION_SETTINGS={interpolation:{duration:0,easing:f=>f},spring:{stiffness:.05,damping:.5}};function normalizeTransitionSettings(f,s){if(!f)return null;Number.isFinite(f)&&(f={type:"interpolation",duration:f});const d=f.type||"interpolation";return{...DEFAULT_TRANSITION_SETTINGS[d],...s,...f,type:d}}class Attribute extends DataColumn{constructor(s,d){super(s,d,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:FULL}),this.constant=!1,this.settings.update=d.update||(d.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(s){this.state.startIndices=s}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:s=!1}={}){const d=this.state.needsRedraw;return this.state.needsRedraw=d&&!s,d}layoutChanged(){return this.state.layoutChanged}setAccessor(s){var d;(d=this.state).layoutChanged||(d.layoutChanged=!bufferLayoutEqual(s,this.getAccessor())),super.setAccessor(s)}getUpdateTriggers(){const{accessor:s}=this.settings;return[this.id].concat(typeof s!="function"&&s||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(s){if(!s||!this.supportsTransition())return null;const{accessor:d}=this.settings,_=this.settings.transition,S=Array.isArray(d)?s[d.find(T=>s[T])]:s[d];return normalizeTransitionSettings(S,_)}setNeedsUpdate(s=this.id,d){if(this.state.needsUpdate=this.state.needsUpdate||s,this.setNeedsRedraw(s),d){const{startRow:_=0,endRow:S=1/0}=d;this.state.updateRanges=add$4(this.state.updateRanges,[_,S])}else this.state.updateRanges=FULL}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=EMPTY}setNeedsRedraw(s=this.id){this.state.needsRedraw=this.state.needsRedraw||s}allocate(s){const{state:d,settings:_}=this;return _.noAlloc?!1:_.update?(super.allocate(s,d.updateRanges!==FULL),!0):!1}updateBuffer({numInstances:s,data:d,props:_,context:S}){if(!this.needsUpdate())return!1;const{state:{updateRanges:T},settings:{update:F,noAlloc:M}}=this;let P=!0;if(F){for(const[H,J]of T)F.call(S,this,{data:d,startRow:H,endRow:J,props:_,numInstances:s});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[H,J]of T){const K=Number.isFinite(H)?this.getVertexOffset(H):0,z=Number.isFinite(J)?this.getVertexOffset(J):M||!Number.isFinite(s)?this.value.length:s*this.size;super.updateSubBuffer({startOffset:K,endOffset:z})}this._checkAttributeArray()}else P=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),P}setConstantValue(s){return s===void 0||typeof s=="function"?!1:(this.setData({constant:!0,value:s})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(s){const{state:d}=this;return s?(this.clearNeedsUpdate(),d.lastExternalBuffer===s||(d.lastExternalBuffer=s,this.setNeedsRedraw(),this.setData(s)),!0):(d.lastExternalBuffer=null,!1)}setBinaryValue(s,d=null){const{state:_,settings:S}=this;if(!s)return _.binaryValue=null,_.binaryAccessor=null,!1;if(S.noAlloc)return!1;if(_.binaryValue===s)return this.clearNeedsUpdate(),!0;if(_.binaryValue=s,this.setNeedsRedraw(),S.transform||d!==this.startIndices){ArrayBuffer.isView(s)&&(s={value:s});const F=s;assert$2(ArrayBuffer.isView(F.value),`invalid ${S.accessor}`);const M=!!F.size&&F.size!==this.size;return _.binaryAccessor=getAccessorFromBuffer(F.value,{size:F.size||this.size,stride:F.stride,offset:F.offset,startIndices:d,nested:M}),!1}return this.clearNeedsUpdate(),this.setData(s),!0}getVertexOffset(s){const{startIndices:d}=this;return(d?s<d.length?d[s]:this.numInstances:s)*this.size}getValue(){const s=this.settings.shaderAttributes,d=super.getValue();if(!s)return d;for(const _ in s)Object.assign(d,super.getValue(_,s[_]));return d}getBufferLayout(s){this.state.layoutChanged=!1;const d=this.settings.shaderAttributes,_=super._getBufferLayout(),{stepMode:S}=this.settings;if(S==="dynamic"?_.stepMode=s?s.isInstanced?"instance":"vertex":"instance":_.stepMode=S??"vertex",!d)return _;for(const T in d){const F=super._getBufferLayout(T,d[T]);_.attributes.push(...F.attributes)}return _}_autoUpdater(s,{data:d,startRow:_,endRow:S,props:T,numInstances:F}){if(s.constant)return;const{settings:M,state:P,value:H,size:J,startIndices:K}=s,{accessor:z,transform:oe}=M,se=P.binaryAccessor||(typeof z=="function"?z:T[z]);assert$2(typeof se=="function",`accessor "${z}" is not a function`);let ae=s.getVertexOffset(_);const{iterable:ge,objectInfo:pe}=createIterable(d,_,S);for(const he of ge){pe.index++;let ve=se(he,pe);if(oe&&(ve=oe.call(this,ve)),K){const be=(pe.index<K.length-1?K[pe.index+1]:F)-K[pe.index];if(ve&&Array.isArray(ve[0])){let Re=ae;for(const Fe of ve)s._normalizeValue(Fe,H,Re),Re+=J}else ve&&ve.length>J?H.set(ve,ae):(s._normalizeValue(ve,pe.target,0),fillArray({target:H,source:pe.target,start:ae,count:be}));ae+=be*J}else s._normalizeValue(ve,H,ae),ae+=J}}_validateAttributeUpdaters(){const{settings:s}=this;if(!(s.noAlloc||typeof s.update=="function"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:s}=this,d=Math.min(4,this.size);if(s&&s.length>=d){let _=!0;switch(d){case 4:_=_&&Number.isFinite(s[3]);case 3:_=_&&Number.isFinite(s[2]);case 2:_=_&&Number.isFinite(s[1]);case 1:_=_&&Number.isFinite(s[0]);break;default:_=!1}if(!_)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function padArrayChunk(f){const{source:s,target:d,start:_=0,size:S,getData:T}=f,F=f.end||d.length,M=s.length,P=F-_;if(M>P){d.set(s.subarray(0,P),_);return}if(d.set(s,_),!T)return;let H=M;for(;H<P;){const J=T(H,s);for(let K=0;K<S;K++)d[_+H]=J[K]||0,H++}}function padArray({source:f,target:s,size:d,getData:_,sourceStartIndices:S,targetStartIndices:T}){if(!S||!T)return padArrayChunk({source:f,target:s,size:d,getData:_}),s;let F=0,M=0;const P=_&&((J,K)=>_(J+M,K)),H=Math.min(S.length,T.length);for(let J=1;J<H;J++){const K=S[J]*d,z=T[J]*d;padArrayChunk({source:f.subarray(F,K),target:s,start:M,end:z,size:d,getData:P}),F=K,M=z}return M<s.length&&padArrayChunk({source:[],target:s,start:M,size:d,getData:P}),s}function cloneAttribute(f){const{device:s,settings:d,value:_}=f,S=new Attribute(s,d);return S.setData({value:_ instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:d.normalized}),S}function getAttributeTypeFromSize(f){switch(f){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${f}"`)}}function getFloat32VertexFormat(f){switch(f){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function cycleBuffers(f){f.push(f.shift())}function getAttributeBufferLength(f,s){const{doublePrecision:d,settings:_,value:S,size:T}=f,F=d&&S instanceof Float64Array?2:1;let M=0;const{shaderAttributes:P}=f.settings;if(P)for(const H of Object.values(P))M=Math.max(M,H.vertexOffset??0);return(_.noAlloc?S.length:(s+M)*T)*F}function matchBuffer({device:f,source:s,target:d}){return(!d||d.byteLength<s.byteLength)&&(d==null||d.destroy(),d=f.createBuffer({byteLength:s.byteLength,usage:s.usage})),d}function padBuffer({device:f,buffer:s,attribute:d,fromLength:_,toLength:S,fromStartIndices:T,getData:F=M=>M}){const M=d.doublePrecision&&d.value instanceof Float64Array?2:1,P=d.size*M,H=d.byteOffset,J=d.settings.bytesPerElement<4?H/d.settings.bytesPerElement*4:H,K=d.startIndices,z=T&&K,oe=d.isConstant;if(!z&&s&&_>=S)return s;const se=d.value instanceof Float64Array?Float32Array:d.value.constructor,ae=oe?d.value:new se(d.getBuffer().readSyncWebGL(H,S*se.BYTES_PER_ELEMENT).buffer);if(d.settings.normalized&&!oe){const ve=F;F=(be,Re)=>d.normalizeConstant(ve(be,Re))}const ge=oe?(ve,be)=>F(ae,be):(ve,be)=>F(ae.subarray(ve+H,ve+H+P),be),pe=s?new Float32Array(s.readSyncWebGL(J,_*4).buffer):new Float32Array(0),he=new Float32Array(S);return padArray({source:pe,target:he,sourceStartIndices:T,targetStartIndices:K,size:P,getData:ge}),(!s||s.byteLength<he.byteLength+J)&&(s==null||s.destroy(),s=f.createBuffer({byteLength:he.byteLength+J,usage:35050})),s.write(he,J),s}class GPUTransitionBase{constructor({device:s,attribute:d,timeline:_}){this.buffers=[],this.currentLength=0,this.device=s,this.transition=new Transition$1(_),this.attribute=d,this.attributeInTransition=cloneAttribute(d),this.currentStartIndices=d.startIndices}get inProgress(){return this.transition.inProgress}start(s,d,_=1/0){this.settings=s,this.currentStartIndices=this.attribute.startIndices,this.currentLength=getAttributeBufferLength(this.attribute,d),this.transition.start({...s,duration:_})}update(){const s=this.transition.update();return s&&this.onUpdate(),s}setBuffer(s){this.attributeInTransition.setData({buffer:s,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const s of this.buffers)s.destroy();this.buffers.length=0}}class GPUInterpolationTransition extends GPUTransitionBase{constructor({device:s,attribute:d,timeline:_}){super({device:s,attribute:d,timeline:_}),this.type="interpolation",this.transform=getTransform$1(s,d)}start(s,d){const _=this.currentLength,S=this.currentStartIndices;if(super.start(s,d,s.duration),s.duration<=0){this.transition.cancel();return}const{buffers:T,attribute:F}=this;cycleBuffers(T),T[0]=padBuffer({device:this.device,buffer:T[0],attribute:F,fromLength:_,toLength:this.currentLength,fromStartIndices:S,getData:s.enter}),T[1]=matchBuffer({device:this.device,source:T[0],target:T[1]}),this.setBuffer(T[1]);const{transform:M}=this,P=M.model;let H=Math.floor(this.currentLength/F.size);useFp64(F)&&(H/=2),P.setVertexCount(H),F.isConstant?(P.setAttributes({aFrom:T[0]}),P.setConstantAttributes({aTo:F.value})):P.setAttributes({aFrom:T[0],aTo:F.getBuffer()}),M.transformFeedback.setBuffers({vCurrent:T[1]})}onUpdate(){const{duration:s,easing:d}=this.settings,{time:_}=this.transition;let S=_/s;d&&(S=d(S));const{model:T}=this.transform;T.setUniforms({time:S}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}}const vs$a=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`,vs64=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aFrom64Low;
in ATTRIBUTE_TYPE aTo;
in ATTRIBUTE_TYPE aTo64Low;
out ATTRIBUTE_TYPE vCurrent;
out ATTRIBUTE_TYPE vCurrent64Low;

vec2 mix_fp64(vec2 a, vec2 b, float x) {
  vec2 range = sub_fp64(b, a);
  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));
}

void main(void) {
  for (int i=0; i<ATTRIBUTE_SIZE; i++) {
    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), time);
    vCurrent[i] = value.x;
    vCurrent64Low[i] = value.y;
  }
  gl_Position = vec4(0.0);
}
`;function useFp64(f){return f.doublePrecision&&f.value instanceof Float64Array}function getTransform$1(f,s){const d=s.size,_=getAttributeTypeFromSize(d),S=getFloat32VertexFormat(d),T=s.getBufferLayout();return useFp64(s)?new BufferTransform(f,{vs:vs64,bufferLayout:[{name:"aFrom",byteStride:8*d,attributes:[{attribute:"aFrom",format:S,byteOffset:0},{attribute:"aFrom64Low",format:S,byteOffset:4*d}]},{name:"aTo",byteStride:8*d,attributes:[{attribute:"aTo",format:S,byteOffset:0},{attribute:"aTo64Low",format:S,byteOffset:4*d}]}],modules:[fp64arithmetic],defines:{ATTRIBUTE_TYPE:_,ATTRIBUTE_SIZE:d},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0}):new BufferTransform(f,{vs:vs$a,bufferLayout:[{name:"aFrom",format:S},{name:"aTo",format:T.attributes[0].format}],defines:{ATTRIBUTE_TYPE:_},varyings:["vCurrent"],disableWarnings:!0})}class GPUSpringTransition extends GPUTransitionBase{constructor({device:s,attribute:d,timeline:_}){super({device:s,attribute:d,timeline:_}),this.type="spring",this.texture=getTexture(s),this.framebuffer=getFramebuffer(s,this.texture),this.transform=getTransform(s,d)}start(s,d){const _=this.currentLength,S=this.currentStartIndices;super.start(s,d);const{buffers:T,attribute:F}=this;for(let P=0;P<2;P++)T[P]=padBuffer({device:this.device,buffer:T[P],attribute:F,fromLength:_,toLength:this.currentLength,fromStartIndices:S,getData:s.enter});T[2]=matchBuffer({device:this.device,source:T[0],target:T[2]}),this.setBuffer(T[1]);const{model:M}=this.transform;M.setVertexCount(Math.floor(this.currentLength/F.size)),F.isConstant?M.setConstantAttributes({aTo:F.value}):M.setAttributes({aTo:F.getBuffer()})}onUpdate(){const{buffers:s,transform:d,framebuffer:_,transition:S}=this,T=this.settings;d.model.setAttributes({aPrev:s[0],aCur:s[1]}),d.transformFeedback.setBuffers({vNext:s[2]}),d.model.setUniforms({stiffness:T.stiffness,damping:T.damping}),d.run({framebuffer:_,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),cycleBuffers(s),this.setBuffer(s[1]),this.device.readPixelsToArrayWebGL(_)[0]>0||S.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}const vs$9=`#version 300 es
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
in ATTRIBUTE_TYPE aPrev;
in ATTRIBUTE_TYPE aCur;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vNext;
out float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs$d=`#version 300 es
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

in float vIsTransitioningFlag;

out vec4 fragColor;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  fragColor = vec4(1.0);
}`;function getTransform(f,s){const d=getAttributeTypeFromSize(s.size),_=getFloat32VertexFormat(s.size);return new BufferTransform(f,{vs:vs$9,fs:fs$d,bufferLayout:[{name:"aPrev",format:_},{name:"aCur",format:_},{name:"aTo",format:s.getBufferLayout().attributes[0].format}],varyings:["vNext"],defines:{ATTRIBUTE_TYPE:d},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}function getTexture(f){return f.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}function getFramebuffer(f,s){return f.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[s]})}const TRANSITION_TYPES$1={interpolation:GPUInterpolationTransition,spring:GPUSpringTransition};class AttributeTransitionManager{constructor(s,{id:d,timeline:_}){if(!s)throw new Error("AttributeTransitionManager is constructed without device");this.id=d,this.device=s,this.timeline=_,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const s in this.transitions)this._removeTransition(s)}update({attributes:s,transitions:d,numInstances:_}){this.numInstances=_||1;for(const S in s){const T=s[S],F=T.getTransitionSetting(d);F&&this._updateAttribute(S,T,F)}for(const S in this.transitions){const T=s[S];(!T||!T.getTransitionSetting(d))&&this._removeTransition(S)}}hasAttribute(s){const d=this.transitions[s];return d&&d.inProgress}getAttributes(){const s={};for(const d in this.transitions){const _=this.transitions[d];_.inProgress&&(s[d]=_.attributeInTransition)}return s}run(){if(this.numInstances===0)return!1;for(const d in this.transitions)this.transitions[d].update()&&(this.needsRedraw=!0);const s=this.needsRedraw;return this.needsRedraw=!1,s}_removeTransition(s){this.transitions[s].delete(),delete this.transitions[s]}_updateAttribute(s,d,_){const S=this.transitions[s];let T=!S||S.type!==_.type;if(T){S&&this._removeTransition(s);const F=TRANSITION_TYPES$1[_.type];F?this.transitions[s]=new F({attribute:d,timeline:this.timeline,device:this.device}):(defaultLogger.error(`unsupported transition type '${_.type}'`)(),T=!1)}(T||d.needsRedraw())&&(this.needsRedraw=!0,this.transitions[s].start(_,this.numInstances))}}const TRACE_INVALIDATE="attributeManager.invalidate",TRACE_UPDATE_START="attributeManager.updateStart",TRACE_UPDATE_END="attributeManager.updateEnd",TRACE_ATTRIBUTE_UPDATE_START="attribute.updateStart",TRACE_ATTRIBUTE_ALLOCATE="attribute.allocate",TRACE_ATTRIBUTE_UPDATE_END="attribute.updateEnd";class AttributeManager{constructor(s,{id:d="attribute-manager",stats:_,timeline:S}={}){this.mergeBoundsMemoized=memoize$2(mergeBounds),this.id=d,this.device=s,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=_,this.attributeTransitionManager=new AttributeTransitionManager(s,{id:`${d}-transitions`,timeline:S}),Object.seal(this)}finalize(){for(const s in this.attributes)this.attributes[s].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(s={clearRedrawFlags:!1}){const d=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!s.clearRedrawFlags,d&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(s){this._add(s)}addInstanced(s){this._add(s,{stepMode:"instance"})}remove(s){for(const d of s)this.attributes[d]!==void 0&&(this.attributes[d].delete(),delete this.attributes[d])}invalidate(s,d){const _=this._invalidateTrigger(s,d);debug(TRACE_INVALIDATE,this,s,_)}invalidateAll(s){for(const d in this.attributes)this.attributes[d].setNeedsUpdate(d,s);debug(TRACE_INVALIDATE,this,"all")}update({data:s,numInstances:d,startIndices:_=null,transitions:S,props:T={},buffers:F={},context:M={}}){let P=!1;debug(TRACE_UPDATE_START,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const H in this.attributes){const J=this.attributes[H],K=J.settings.accessor;J.startIndices=_,J.numInstances=d,T[H]&&defaultLogger.removed(`props.${H}`,`data.attributes.${H}`)(),J.setExternalBuffer(F[H])||J.setBinaryValue(typeof K=="string"?F[K]:void 0,s.startIndices)||typeof K=="string"&&!F[K]&&J.setConstantValue(T[K])||J.needsUpdate()&&(P=!0,this._updateAttribute({attribute:J,numInstances:d,data:s,props:T,context:M})),this.needsRedraw=this.needsRedraw||J.needsRedraw()}P&&debug(TRACE_UPDATE_END,this,d),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:d,transitions:S})}updateTransition(){const{attributeTransitionManager:s}=this,d=s.run();return this.needsRedraw=this.needsRedraw||d,d}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(s){const d=s.map(_=>{var S;return(S=this.attributes[_])==null?void 0:S.getBounds()});return this.mergeBoundsMemoized(d)}getChangedAttributes(s={clearChangedFlags:!1}){const{attributes:d,attributeTransitionManager:_}=this,S={..._.getAttributes()};for(const T in d){const F=d[T];F.needsRedraw(s)&&!_.hasAttribute(T)&&(S[T]=F)}return S}getBufferLayouts(s){return Object.values(this.getAttributes()).map(d=>d.getBufferLayout(s))}_add(s,d){for(const _ in s){const S=s[_],T={...S,id:_,size:S.isIndexed&&1||S.size||1,...d};this.attributes[_]=new Attribute(this.device,T)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const s={};for(const d in this.attributes)this.attributes[d].getUpdateTriggers().forEach(S=>{s[S]||(s[S]=[]),s[S].push(d)});this.updateTriggers=s}_invalidateTrigger(s,d){const{attributes:_,updateTriggers:S}=this,T=S[s];return T&&T.forEach(F=>{const M=_[F];M&&M.setNeedsUpdate(M.id,d)}),T}_updateAttribute(s){const{attribute:d,numInstances:_}=s;if(debug(TRACE_ATTRIBUTE_UPDATE_START,d),d.constant){d.setConstantValue(d.value);return}d.allocate(_)&&debug(TRACE_ATTRIBUTE_ALLOCATE,d,_),d.updateBuffer(s)&&(this.needsRedraw=!0,debug(TRACE_ATTRIBUTE_UPDATE_END,d,_))}}class CPUInterpolationTransition extends Transition$1{get value(){return this._value}_onUpdate(){const{time:s,settings:{fromValue:d,toValue:_,duration:S,easing:T}}=this,F=T(s/S);this._value=lerp$6(d,_,F)}}const EPSILON$1=1e-5;function updateSpringElement(f,s,d,_,S){const T=s-f,M=(d-s)*S,P=-T*_;return M+P+T+s}function updateSpring(f,s,d,_,S){if(Array.isArray(d)){const T=[];for(let F=0;F<d.length;F++)T[F]=updateSpringElement(f[F],s[F],d[F],_,S);return T}return updateSpringElement(f,s,d,_,S)}function distance$1(f,s){if(Array.isArray(f)){let d=0;for(let _=0;_<f.length;_++){const S=f[_]-s[_];d+=S*S}return Math.sqrt(d)}return Math.abs(f-s)}class CPUSpringTransition extends Transition$1{get value(){return this._currValue}_onUpdate(){const{fromValue:s,toValue:d,damping:_,stiffness:S}=this.settings,{_prevValue:T=s,_currValue:F=s}=this;let M=updateSpring(T,F,d,_,S);const P=distance$1(M,d),H=distance$1(M,F);P<EPSILON$1&&H<EPSILON$1&&(M=d,this.end()),this._prevValue=F,this._currValue=M}}const TRANSITION_TYPES={interpolation:CPUInterpolationTransition,spring:CPUSpringTransition};class UniformTransitionManager{constructor(s){this.transitions=new Map,this.timeline=s}get active(){return this.transitions.size>0}add(s,d,_,S){const{transitions:T}=this;if(T.has(s)){const P=T.get(s),{value:H=P.settings.fromValue}=P;d=H,this.remove(s)}if(S=normalizeTransitionSettings(S),!S)return;const F=TRANSITION_TYPES[S.type];if(!F){defaultLogger.error(`unsupported transition type '${S.type}'`)();return}const M=new F(this.timeline);M.start({...S,fromValue:d,toValue:_}),T.set(s,M)}remove(s){const{transitions:d}=this;d.has(s)&&(d.get(s).cancel(),d.delete(s))}update(){const s={};for(const[d,_]of this.transitions)_.update(),s[d]=_.value,_.inProgress||this.remove(d);return s}clear(){for(const s of this.transitions.keys())this.remove(s)}}function validateProps(f){const s=f[PROP_TYPES_SYMBOL];for(const d in s){const _=s[d],{validate:S}=_;if(S&&!S(f[d],_))throw new Error(`Invalid prop ${d}: ${f[d]}`)}}function diffProps(f,s){const d=compareProps({newProps:f,oldProps:s,propTypes:f[PROP_TYPES_SYMBOL],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),_=diffDataProps(f,s);let S=!1;return _||(S=diffUpdateTriggers(f,s)),{dataChanged:_,propsChanged:d,updateTriggersChanged:S,extensionsChanged:diffExtensions(f,s),transitionsChanged:diffTransitions(f,s)}}function diffTransitions(f,s){if(!f.transitions)return!1;const d={},_=f[PROP_TYPES_SYMBOL];let S=!1;for(const T in f.transitions){const F=_[T],M=F&&F.type;(M==="number"||M==="color"||M==="array")&&comparePropValues(f[T],s[T],F)&&(d[T]=!0,S=!0)}return S?d:!1}function compareProps({newProps:f,oldProps:s,ignoreProps:d={},propTypes:_={},triggerName:S="props"}){if(s===f)return!1;if(typeof f!="object"||f===null)return`${S} changed shallowly`;if(typeof s!="object"||s===null)return`${S} changed shallowly`;for(const T of Object.keys(f))if(!(T in d)){if(!(T in s))return`${S}.${T} added`;const F=comparePropValues(f[T],s[T],_[T]);if(F)return`${S}.${T} ${F}`}for(const T of Object.keys(s))if(!(T in d)){if(!(T in f))return`${S}.${T} dropped`;if(!Object.hasOwnProperty.call(f,T)){const F=comparePropValues(f[T],s[T],_[T]);if(F)return`${S}.${T} ${F}`}}return!1}function comparePropValues(f,s,d){let _=d&&d.equal;return _&&!_(f,s,d)||!_&&(_=f&&s&&f.equals,_&&!_.call(f,s))?"changed deeply":!_&&s!==f?"changed shallowly":null}function diffDataProps(f,s){if(s===null)return"oldProps is null, initial diff";let d=!1;const{dataComparator:_,_dataDiff:S}=f;return _?_(f.data,s.data)||(d="Data comparator detected a change"):f.data!==s.data&&(d="A new data container was supplied"),d&&S&&(d=S(f.data,s.data)||d),d}function diffUpdateTriggers(f,s){if(s===null)return{all:!0};if("all"in f.updateTriggers&&diffUpdateTrigger(f,s,"all"))return{all:!0};const d={};let _=!1;for(const S in f.updateTriggers)S!=="all"&&diffUpdateTrigger(f,s,S)&&(d[S]=!0,_=!0);return _?d:!1}function diffExtensions(f,s){if(s===null)return!0;const d=s.extensions,{extensions:_}=f;if(_===d)return!1;if(!d||!_||_.length!==d.length)return!0;for(let S=0;S<_.length;S++)if(!_[S].equals(d[S]))return!0;return!1}function diffUpdateTrigger(f,s,d){let _=f.updateTriggers[d];_=_??{};let S=s.updateTriggers[d];return S=S??{},compareProps({oldProps:S,newProps:_,triggerName:d})}const ERR_NOT_OBJECT="count(): argument not an object",ERR_NOT_CONTAINER="count(): argument not a container";function count$1(f){if(!isObject$8(f))throw new Error(ERR_NOT_OBJECT);if(typeof f.count=="function")return f.count();if(Number.isFinite(f.size))return f.size;if(Number.isFinite(f.length))return f.length;if(isPlainObject$1(f))return Object.keys(f).length;throw new Error(ERR_NOT_CONTAINER)}function isPlainObject$1(f){return f!==null&&typeof f=="object"&&f.constructor===Object}function isObject$8(f){return f!==null&&typeof f=="object"}function mergeShaders(f,s){if(!s)return f;const d={...f,...s};if("defines"in s&&(d.defines={...f.defines,...s.defines}),"modules"in s&&(d.modules=(f.modules||[]).concat(s.modules),s.modules.some(_=>_.name==="project64"))){const _=d.modules.findIndex(S=>S.name==="project32");_>=0&&d.modules.splice(_,1)}if("inject"in s)if(!f.inject)d.inject=s.inject;else{const _={...f.inject};for(const S in s.inject)_[S]=(_[S]||"")+s.inject[S];d.inject=_}return d}const DEFAULT_TEXTURE_PARAMETERS={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},internalTextures={};function createTexture(f,s,d,_){if(d instanceof Texture)return d;d.constructor&&d.constructor.name!=="Object"&&(d={data:d});let S=null;d.compressed&&(S={minFilter:"linear",mipmapFilter:d.data.length>1?"nearest":"linear"});const T=s.createTexture({...d,sampler:{...DEFAULT_TEXTURE_PARAMETERS,...S,..._}});return internalTextures[T.id]=f,T}function destroyTexture(f,s){!s||!(s instanceof Texture)||internalTextures[s.id]===f&&(s.delete(),delete internalTextures[s.id])}const TYPE_DEFINITIONS={boolean:{validate(f,s){return!0},equal(f,s,d){return!!f==!!s}},number:{validate(f,s){return Number.isFinite(f)&&(!("max"in s)||f<=s.max)&&(!("min"in s)||f>=s.min)}},color:{validate(f,s){return s.optional&&!f||isArray$1(f)&&(f.length===3||f.length===4)},equal(f,s,d){return deepEqual(f,s,1)}},accessor:{validate(f,s){const d=getTypeOf(f);return d==="function"||d===getTypeOf(s.value)},equal(f,s,d){return typeof s=="function"?!0:deepEqual(f,s,1)}},array:{validate(f,s){return s.optional&&!f||isArray$1(f)},equal(f,s,d){const{compare:_}=d,S=Number.isInteger(_)?_:_?1:0;return _?deepEqual(f,s,S):f===s}},object:{equal(f,s,d){if(d.ignore)return!0;const{compare:_}=d,S=Number.isInteger(_)?_:_?1:0;return _?deepEqual(f,s,S):f===s}},function:{validate(f,s){return s.optional&&!f||typeof f=="function"},equal(f,s,d){return!d.compare&&d.ignore!==!1||f===s}},data:{transform:(f,s,d)=>{if(!f)return f;const{dataTransform:_}=d.props;return _?_(f):typeof f.shape=="string"&&f.shape.endsWith("-table")&&Array.isArray(f.data)?f.data:f}},image:{transform:(f,s,d)=>{const _=d.context;return!_||!_.device?null:createTexture(d.id,_.device,f,{...s.parameters,...d.props.textureParameters})},release:(f,s,d)=>{destroyTexture(d.id,f)}}};function parsePropTypes(f){const s={},d={},_={};for(const[S,T]of Object.entries(f)){const F=T==null?void 0:T.deprecatedFor;if(F)_[S]=Array.isArray(F)?F:[F];else{const M=parsePropType(S,T);s[S]=M,d[S]=M.value}}return{propTypes:s,defaultProps:d,deprecatedProps:_}}function parsePropType(f,s){switch(getTypeOf(s)){case"object":return normalizePropDefinition(f,s);case"array":return normalizePropDefinition(f,{type:"array",value:s,compare:!1});case"boolean":return normalizePropDefinition(f,{type:"boolean",value:s});case"number":return normalizePropDefinition(f,{type:"number",value:s});case"function":return normalizePropDefinition(f,{type:"function",value:s,compare:!0});default:return{name:f,type:"unknown",value:s}}}function normalizePropDefinition(f,s){return"type"in s?{name:f,...TYPE_DEFINITIONS[s.type],...s}:"value"in s?{name:f,type:getTypeOf(s.value),...s}:{name:f,type:"object",value:s}}function isArray$1(f){return Array.isArray(f)||ArrayBuffer.isView(f)}function getTypeOf(f){return isArray$1(f)?"array":f===null?"null":typeof f}function createProps(f,s){let d;for(let T=s.length-1;T>=0;T--){const F=s[T];"extensions"in F&&(d=F.extensions)}const _=getPropsPrototype(f.constructor,d),S=Object.create(_);S[COMPONENT_SYMBOL]=f,S[ASYNC_ORIGINAL_SYMBOL]={},S[ASYNC_RESOLVED_SYMBOL]={};for(let T=0;T<s.length;++T){const F=s[T];for(const M in F)S[M]=F[M]}return Object.freeze(S),S}const MergedDefaultPropsCacheKey="_mergedDefaultProps";function getPropsPrototype(f,s){let d=MergedDefaultPropsCacheKey;if(s)for(const S of s){const T=S.constructor;T&&(d+=`:${T.extensionName||T.name}`)}const _=getOwnProperty(f,d);return _||(f[d]=createPropsPrototypeAndTypes(f,s||[]))}function createPropsPrototypeAndTypes(f,s){if(!f.prototype)return null;const _=Object.getPrototypeOf(f),S=getPropsPrototype(_),T=getOwnProperty(f,"defaultProps")||{},F=parsePropTypes(T),M=Object.assign(Object.create(null),S,F.defaultProps),P=Object.assign(Object.create(null),S==null?void 0:S[PROP_TYPES_SYMBOL],F.propTypes),H=Object.assign(Object.create(null),S==null?void 0:S[DEPRECATED_PROPS_SYMBOL],F.deprecatedProps);for(const J of s){const K=getPropsPrototype(J.constructor);K&&(Object.assign(M,K),Object.assign(P,K[PROP_TYPES_SYMBOL]),Object.assign(H,K[DEPRECATED_PROPS_SYMBOL]))}return createPropsPrototype(M,f),addAsyncPropsToPropPrototype(M,P),addDeprecatedPropsToPropPrototype(M,H),M[PROP_TYPES_SYMBOL]=P,M[DEPRECATED_PROPS_SYMBOL]=H,s.length===0&&!hasOwnProperty$1(f,"_propTypes")&&(f._propTypes=P),M}function createPropsPrototype(f,s){const d=getComponentName(s);Object.defineProperties(f,{id:{writable:!0,value:d}})}function addDeprecatedPropsToPropPrototype(f,s){for(const d in s)Object.defineProperty(f,d,{enumerable:!1,set(_){const S=`${this.id}: ${d}`;for(const T of s[d])hasOwnProperty$1(this,T)||(this[T]=_);defaultLogger.deprecated(S,s[d].join("/"))()}})}function addAsyncPropsToPropPrototype(f,s){const d={},_={};for(const S in s){const T=s[S],{name:F,value:M}=T;T.async&&(d[F]=M,_[F]=getDescriptorForAsyncProp(F))}f[ASYNC_DEFAULTS_SYMBOL]=d,f[ASYNC_ORIGINAL_SYMBOL]={},Object.defineProperties(f,_)}function getDescriptorForAsyncProp(f){return{enumerable:!0,set(s){typeof s=="string"||s instanceof Promise||isAsyncIterable(s)?this[ASYNC_ORIGINAL_SYMBOL][f]=s:this[ASYNC_RESOLVED_SYMBOL][f]=s},get(){if(this[ASYNC_RESOLVED_SYMBOL]){if(f in this[ASYNC_RESOLVED_SYMBOL])return this[ASYNC_RESOLVED_SYMBOL][f]||this[ASYNC_DEFAULTS_SYMBOL][f];if(f in this[ASYNC_ORIGINAL_SYMBOL]){const s=this[COMPONENT_SYMBOL]&&this[COMPONENT_SYMBOL].internalState;if(s&&s.hasAsyncProp(f))return s.getAsyncProp(f)||this[ASYNC_DEFAULTS_SYMBOL][f]}}return this[ASYNC_DEFAULTS_SYMBOL][f]}}}function hasOwnProperty$1(f,s){return Object.prototype.hasOwnProperty.call(f,s)}function getOwnProperty(f,s){return hasOwnProperty$1(f,s)&&f[s]}function getComponentName(f){const s=f.componentName;return s||defaultLogger.warn(`${f.name}.componentName not specified`)(),s||f.name}let counter=0;class Component{constructor(...s){this.props=createProps(this,s),this.id=this.props.id,this.count=counter++}clone(s){const{props:d}=this,_={};for(const S in d[ASYNC_DEFAULTS_SYMBOL])S in d[ASYNC_RESOLVED_SYMBOL]?_[S]=d[ASYNC_RESOLVED_SYMBOL][S]:S in d[ASYNC_ORIGINAL_SYMBOL]&&(_[S]=d[ASYNC_ORIGINAL_SYMBOL][S]);return new this.constructor({...d,..._,...s})}}Component.componentName="Component";Component.defaultProps={};const EMPTY_PROPS=Object.freeze({});class ComponentState{constructor(s){this.component=s,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const s in this.asyncProps){const d=this.asyncProps[s];d&&d.type&&d.type.release&&d.type.release(d.resolvedValue,d.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||EMPTY_PROPS}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(s){return s in this.asyncProps}getAsyncProp(s){const d=this.asyncProps[s];return d&&d.resolvedValue}isAsyncPropLoading(s){if(s){const d=this.asyncProps[s];return!!(d&&d.pendingLoadCount>0&&d.pendingLoadCount!==d.resolvedLoadCount)}for(const d in this.asyncProps)if(this.isAsyncPropLoading(d))return!0;return!1}reloadAsyncProp(s,d){this._watchPromise(s,Promise.resolve(d))}setAsyncProps(s){this.component=s[COMPONENT_SYMBOL]||this.component;const d=s[ASYNC_RESOLVED_SYMBOL]||{},_=s[ASYNC_ORIGINAL_SYMBOL]||s,S=s[ASYNC_DEFAULTS_SYMBOL]||{};for(const T in d){const F=d[T];this._createAsyncPropData(T,S[T]),this._updateAsyncProp(T,F),d[T]=this.getAsyncProp(T)}for(const T in _){const F=_[T];this._createAsyncPropData(T,S[T]),this._updateAsyncProp(T,F)}}_fetch(s,d){return null}_onResolve(s,d){}_onError(s,d){}_updateAsyncProp(s,d){if(this._didAsyncInputValueChange(s,d)){if(typeof d=="string"&&(d=this._fetch(s,d)),d instanceof Promise){this._watchPromise(s,d);return}if(isAsyncIterable(d)){this._resolveAsyncIterable(s,d);return}this._setPropValue(s,d)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const s in this.asyncProps)Object.defineProperty(this.oldAsyncProps,s,{enumerable:!0,value:this.oldProps[s]})}}_didAsyncInputValueChange(s,d){const _=this.asyncProps[s];return d===_.resolvedValue||d===_.lastValue?!1:(_.lastValue=d,!0)}_setPropValue(s,d){this._freezeAsyncOldProps();const _=this.asyncProps[s];_&&(d=this._postProcessValue(_,d),_.resolvedValue=d,_.pendingLoadCount++,_.resolvedLoadCount=_.pendingLoadCount)}_setAsyncPropValue(s,d,_){const S=this.asyncProps[s];S&&_>=S.resolvedLoadCount&&d!==void 0&&(this._freezeAsyncOldProps(),S.resolvedValue=d,S.resolvedLoadCount=_,this.onAsyncPropUpdated(s,d))}_watchPromise(s,d){const _=this.asyncProps[s];if(_){_.pendingLoadCount++;const S=_.pendingLoadCount;d.then(T=>{this.component&&(T=this._postProcessValue(_,T),this._setAsyncPropValue(s,T,S),this._onResolve(s,T))}).catch(T=>{this._onError(s,T)})}}async _resolveAsyncIterable(s,d){if(s!=="data"){this._setPropValue(s,d);return}const _=this.asyncProps[s];if(!_)return;_.pendingLoadCount++;const S=_.pendingLoadCount;let T=[],F=0;for await(const M of d){if(!this.component)return;const{dataTransform:P}=this.component.props;P?T=P(M,T):T=T.concat(M),Object.defineProperty(T,"__diff",{enumerable:!1,value:[{startRow:F,endRow:T.length}]}),F=T.length,this._setAsyncPropValue(s,T,S)}this._onResolve(s,T)}_postProcessValue(s,d){const _=s.type;return _&&this.component&&(_.release&&_.release(s.resolvedValue,_,this.component),_.transform)?_.transform(d,_,this.component):d}_createAsyncPropData(s,d){if(!this.asyncProps[s]){const S=this.component&&this.component.props[PROP_TYPES_SYMBOL];this.asyncProps[s]={type:S&&S[s],lastValue:null,resolvedValue:d,pendingLoadCount:0,resolvedLoadCount:0}}}}class LayerState extends ComponentState{constructor({attributeManager:s,layer:d}){super(d),this.attributeManager=s,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(s,d){const _=this.layer,S=_==null?void 0:_.props.fetch;return S?S(d,{propName:s,layer:_}):super._fetch(s,d)}_onResolve(s,d){const _=this.layer;if(_){const S=_.props.onDataLoad;s==="data"&&S&&S(d,{propName:s,layer:_})}}_onError(s,d){const _=this.layer;_&&_.raiseError(d,`loading ${s} of ${this.layer}`)}}const TRACE_CHANGE_FLAG="layer.changeFlag",TRACE_INITIALIZE="layer.initialize",TRACE_UPDATE="layer.update",TRACE_FINALIZE="layer.finalize",TRACE_MATCHED="layer.matched",MAX_PICKING_COLOR_CACHE_SIZE=2**24-1,EMPTY_ARRAY$1=Object.freeze([]),areViewportsEqual=memoize$2(({oldViewport:f,viewport:s})=>f.equals(s));let pickingColorCache=new Uint8ClampedArray(0);const defaultProps$n={data:{type:"data",value:EMPTY_ARRAY$1,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:f=>f&&f.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(f,{propName:s,layer:d,loaders:_,loadOptions:S,signal:T})=>{const{resourceManager:F}=d.context;S=S||d.getLoadOptions(),_=_||d.props.loaders,T&&(S={...S,fetch:{...S==null?void 0:S.fetch,signal:T}});let M=F.contains(f);return!M&&!S&&(F.add({resourceId:f,data:load$3(f,_),persistent:!1}),M=!0),M?F.subscribe({resourceId:f,onChange:P=>{var H;return(H=d.internalState)==null?void 0:H.reloadAsyncProp(s,P)},consumerId:d.id,requestId:s}):load$3(f,_,S)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:COORDINATE_SYSTEM.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:f})=>[0,-f*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Layer extends Component{constructor(){super(...arguments),this.internalState=null,this.lifecycle=LIFECYCLE.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let s=this;for(;s.parent;)s=s.parent;return s}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(s){assert$2(this.internalState);const d=this.internalState.viewport||this.context.viewport,_=getWorldPosition(s,{viewport:d,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[S,T,F]=worldToPixels$1(_,d.pixelProjectionMatrix);return s.length===2?[S,T]:[S,T,F]}unproject(s){return assert$2(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(s)}projectPosition(s,d){assert$2(this.internalState);const _=this.internalState.viewport||this.context.viewport;return projectPosition(s,{viewport:_,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...d})}get isComposite(){return!1}setState(s){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,s),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const s=this.state;return s&&(s.models||s.model&&[s.model])||[]}setModuleParameters(s){for(const d of this.getModels())d.updateModuleSettings(s)}setShaderModuleProps(...s){for(const d of this.getModels())d.shaderInputs.setProps(...s)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:s}=this.props;return s===COORDINATE_SYSTEM.DEFAULT||s===COORDINATE_SYSTEM.LNGLAT||s===COORDINATE_SYSTEM.CARTESIAN}onHover(s,d){return this.props.onHover&&this.props.onHover(s,d)||!1}onClick(s,d){return this.props.onClick&&this.props.onClick(s,d)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(s,d=[]){return d[0]=s+1&255,d[1]=s+1>>8&255,d[2]=s+1>>8>>8&255,d}decodePickingColor(s){assert$2(s instanceof Uint8Array);const[d,_,S]=s;return d+_*256+S*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:count$1(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var s;return(s=this.getAttributeManager())==null?void 0:s.getBounds(["positions","instancePositions"])}getShaders(s){s=mergeShaders(s,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const d of this.props.extensions)s=mergeShaders(s,d.getShaders.call(this,d));return s}shouldUpdateState(s){return s.changeFlags.propsOrDataChanged}updateState(s){const d=this.getAttributeManager(),{dataChanged:_}=s.changeFlags;if(_&&d)if(Array.isArray(_))for(const S of _)d.invalidateAll(S);else d.invalidateAll();if(d){const{props:S}=s,T=this.internalState.hasPickingBuffer,F=Number.isInteger(S.highlightedObjectIndex)||S.pickable||S.extensions.some(M=>M.getNeedsPickingBuffer.call(this,M));if(T!==F){this.internalState.hasPickingBuffer=F;const{pickingColors:M,instancePickingColors:P}=d.attributes,H=M||P;H&&(F&&H.constant&&(H.constant=!1,d.invalidate(H.id)),!H.value&&!F&&(H.constant=!0,H.value=[0,0,0]))}}}finalizeState(s){for(const _ of this.getModels())_.destroy();const d=this.getAttributeManager();d&&d.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(s){for(const d of this.getModels())d.draw(s)}getPickingInfo({info:s,mode:d,sourceLayer:_}){const{index:S}=s;return S>=0&&Array.isArray(this.props.data)&&(s.object=this.props.data[S]),s}raiseError(s,d){var _,S,T,F;d&&(s=new Error(`${d}: ${s.message}`,{cause:s})),(S=(_=this.props).onError)!=null&&S.call(_,s)||(F=(T=this.context)==null?void 0:T.onError)==null||F.call(T,s,this)}getNeedsRedraw(s={clearRedrawFlags:!1}){return this._getNeedsRedraw(s)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var s;return((s=this.internalState)==null?void 0:s.uniformTransitions.active)||!1}activateViewport(s){if(!this.internalState)return;const d=this.internalState.viewport;this.internalState.viewport=s,(!d||!areViewportsEqual({oldViewport:d,viewport:s}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(s="all"){const d=this.getAttributeManager();d&&(s==="all"?d.invalidateAll():d.invalidate(s))}updateAttributes(s){let d=!1;for(const _ in s)s[_].layoutChanged()&&(d=!0);for(const _ of this.getModels())this._setModelAttributes(_,s,d)}_updateAttributes(){const s=this.getAttributeManager();if(!s)return;const d=this.props,_=this.getNumInstances(),S=this.getStartIndices();s.update({data:d.data,numInstances:_,startIndices:S,props:d,transitions:d.transitions,buffers:d.data.attributes,context:this});const T=s.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(T)}_updateAttributeTransition(){const s=this.getAttributeManager();s&&s.updateTransition()}_updateUniformTransition(){const{uniformTransitions:s}=this.internalState;if(s.active){const d=s.update(),_=Object.create(this.props);for(const S in d)Object.defineProperty(_,S,{value:d[S]});return _}return this.props}calculateInstancePickingColors(s,{numInstances:d}){if(s.constant)return;const _=Math.floor(pickingColorCache.length/4);if(this.internalState.usesPickingColorCache=!0,_<d){d>MAX_PICKING_COLOR_CACHE_SIZE&&defaultLogger.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),pickingColorCache=defaultTypedArrayManager.allocate(pickingColorCache,d,{size:4,copy:!0,maxCount:Math.max(d,MAX_PICKING_COLOR_CACHE_SIZE)});const S=Math.floor(pickingColorCache.length/4),T=[];for(let F=_;F<S;F++)this.encodePickingColor(F,T),pickingColorCache[F*4+0]=T[0],pickingColorCache[F*4+1]=T[1],pickingColorCache[F*4+2]=T[2]}s.value=pickingColorCache.subarray(0,d*4)}_setModelAttributes(s,d,_=!1){var M;if(!Object.keys(d).length)return;if(_){const P=this.getAttributeManager();s.setBufferLayout(P.getBufferLayouts(s)),d=P.getAttributes()}const S=((M=s.userData)==null?void 0:M.excludeAttributes)||{},T={},F={};for(const P in d){if(S[P])continue;const H=d[P].getValue();for(const J in H){const K=H[J];K instanceof Buffer$1?d[P].settings.isIndexed?s.setIndexBuffer(K):T[J]=K:K&&(F[J]=K)}}s.setAttributes(T),s.setConstantAttributes(F)}disablePickingIndex(s){const d=this.props.data;if(!("attributes"in d)){this._disablePickingIndex(s);return}const{pickingColors:_,instancePickingColors:S}=this.getAttributeManager().attributes,T=_||S,F=T&&d.attributes&&d.attributes[T.id];if(F&&F.value){const M=F.value,P=this.encodePickingColor(s);for(let H=0;H<d.length;H++){const J=T.getVertexOffset(H);M[J]===P[0]&&M[J+1]===P[1]&&M[J+2]===P[2]&&this._disablePickingIndex(H)}}else this._disablePickingIndex(s)}_disablePickingIndex(s){const{pickingColors:d,instancePickingColors:_}=this.getAttributeManager().attributes,S=d||_;if(!S)return;const T=S.getVertexOffset(s),F=S.getVertexOffset(s+1);S.buffer.write(new Uint8Array(F-T),T)}restorePickingColors(){const{pickingColors:s,instancePickingColors:d}=this.getAttributeManager().attributes,_=s||d;_&&(this.internalState.usesPickingColorCache&&_.value.buffer!==pickingColorCache.buffer&&(_.value=pickingColorCache.subarray(0,_.value.length)),_.updateSubBuffer({startOffset:0}))}_initialize(){assert$2(!this.internalState),assert$2(Number.isFinite(this.props.coordinateSystem)),debug(TRACE_INITIALIZE,this);const s=this._getAttributeManager();s&&s.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new LayerState({attributeManager:s,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(defaultLogger.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),s)}),this.internalState.uniformTransitions=new UniformTransitionManager(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const d of this.props.extensions)d.initializeState.call(this,this.context,d);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(s){debug(TRACE_MATCHED,this,this===s);const{state:d,internalState:_}=s;this!==s&&(this.internalState=_,this.state=d,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const s=this.needsUpdate();if(debug(TRACE_UPDATE,this,s),!s)return;const d=this.props,_=this.context,S=this.internalState,T=_.viewport,F=this._updateUniformTransition();S.propsInTransition=F,_.viewport=S.viewport||T,this.props=F;try{const M=this._getUpdateParams(),P=this.getModels();if(_.device)this.updateState(M);else try{this.updateState(M)}catch{}for(const J of this.props.extensions)J.updateState.call(this,M,J);const H=this.getModels()[0]!==P[0];this._postUpdate(M,H)}finally{_.viewport=T,this.props=d,this._clearChangeFlags(),S.needsUpdate=!1,S.resetOldProps()}}_finalize(){debug(TRACE_FINALIZE,this),this.finalizeState(this.context);for(const s of this.props.extensions)s.finalizeState.call(this,this.context,s)}_drawLayer({renderPass:s,moduleParameters:d=null,uniforms:_={},parameters:S={}}){this._updateAttributeTransition();const T=this.props,F=this.context;this.props=this.internalState.propsInTransition||T;const M=this.props.opacity;_.opacity=Math.pow(M,1/2.2);try{if(d){const{isActive:J,isAttribute:K}=d.picking;this.setModuleParameters(d),this.setShaderModuleProps({picking:{isActive:J,isAttribute:K}})}const{getPolygonOffset:P}=this.props,H=P&&P(_)||[0,0];F.device.setParametersWebGL({polygonOffset:H});for(const J of this.getModels())J.setParameters(S);F.device.withParametersWebGL(S,()=>{const J={renderPass:s,moduleParameters:d,uniforms:_,parameters:S,context:F};for(const K of this.props.extensions)K.draw.call(this,J,K);this.draw(J)})}finally{this.props=T}}getChangeFlags(){var s;return(s=this.internalState)==null?void 0:s.changeFlags}setChangeFlags(s){if(!this.internalState)return;const{changeFlags:d}=this.internalState;for(const S in s)if(s[S]){let T=!1;switch(S){case"dataChanged":const F=s[S],M=d[S];F&&Array.isArray(M)&&(d.dataChanged=Array.isArray(F)?M.concat(F):F,T=!0);default:d[S]||(d[S]=s[S],T=!0)}T&&debug(TRACE_CHANGE_FLAG,this,S,s)}const _=!!(d.dataChanged||d.updateTriggersChanged||d.propsChanged||d.extensionsChanged);d.propsOrDataChanged=_,d.somethingChanged=_||d.viewportChanged||d.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(s,d){var S;const _=diffProps(s,d);if(_.updateTriggersChanged)for(const T in _.updateTriggersChanged)_.updateTriggersChanged[T]&&this.invalidateAttribute(T);if(_.transitionsChanged)for(const T in _.transitionsChanged)this.internalState.uniformTransitions.add(T,d[T],s[T],(S=s.transitions)==null?void 0:S[T]);return this.setChangeFlags(_)}validateProps(){validateProps(this.props)}updateAutoHighlight(s){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(s)}_updateAutoHighlight(s){const d={highlightedObjectColor:s.picked?s.color:null},{highlightColor:_}=this.props;s.picked&&typeof _=="function"&&(d.highlightColor=_(s)),this.setShaderModuleProps({picking:d}),this.setNeedsRedraw()}_getAttributeManager(){const s=this.context;return new AttributeManager(s.device,{id:this.props.id,stats:s.stats,timeline:s.timeline})}_postUpdate(s,d){const{props:_,oldProps:S}=s;this.setNeedsRedraw(),this._updateAttributes();const T=this.state.model;T!=null&&T.isInstanced&&T.setInstanceCount(this.getNumInstances());const{autoHighlight:F,highlightedObjectIndex:M,highlightColor:P}=_;if(d||S.autoHighlight!==F||S.highlightedObjectIndex!==M||S.highlightColor!==P){const H={};Array.isArray(P)&&(H.highlightColor=P),(d||S.autoHighlight!==F||M!==S.highlightedObjectIndex)&&(H.highlightedObjectColor=Number.isFinite(M)&&M>=0?this.encodePickingColor(M):null),this.setShaderModuleProps({picking:H})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(s){if(!this.internalState)return!1;let d=!1;d=d||this.internalState.needsRedraw&&this.id;const _=this.getAttributeManager(),S=_?_.getNeedsRedraw(s):!1;if(d=d||S,d)for(const T of this.props.extensions)T.onNeedsRedraw.call(this,T);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!s.clearRedrawFlags,d}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Layer.defaultProps=defaultProps$n;Layer.layerName="Layer";const TRACE_RENDER_LAYERS="compositeLayer.renderLayers";class CompositeLayer extends Layer{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(s=>s.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(s){}setState(s){super.setState(s),this.setNeedsUpdate()}getPickingInfo({info:s}){const{object:d}=s;return d&&d.__source&&d.__source.parent&&d.__source.parent.id===this.id&&(s.object=d.__source.object,s.index=d.__source.index),s}filterSubLayer(s){return!0}shouldRenderSubLayer(s,d){return d&&d.length}getSubLayerClass(s,d){const{_subLayerProps:_}=this.props;return _&&_[s]&&_[s].type||d}getSubLayerRow(s,d,_){return s.__source={parent:this,object:d,index:_},s}getSubLayerAccessor(s){if(typeof s=="function"){const d={index:-1,data:this.props.data,target:[]};return(_,S)=>_&&_.__source?(d.index=_.__source.index,s(_.__source.object,d)):s(_,S)}return s}getSubLayerProps(s={}){var ye;const{opacity:d,pickable:_,visible:S,parameters:T,getPolygonOffset:F,highlightedObjectIndex:M,autoHighlight:P,highlightColor:H,coordinateSystem:J,coordinateOrigin:K,wrapLongitude:z,positionFormat:oe,modelMatrix:se,extensions:ae,fetch:ge,operation:pe,_subLayerProps:he}=this.props,ve={id:"",updateTriggers:{},opacity:d,pickable:_,visible:S,parameters:T,getPolygonOffset:F,highlightedObjectIndex:M,autoHighlight:P,highlightColor:H,coordinateSystem:J,coordinateOrigin:K,wrapLongitude:z,positionFormat:oe,modelMatrix:se,extensions:ae,fetch:ge,operation:pe},be=he&&s.id&&he[s.id],Re=be&&be.updateTriggers,Fe=s.id||"sublayer";if(be){const Ue=this.props[PROP_TYPES_SYMBOL],It=s.type?s.type._propTypes:{};for(const St in be){const At=It[St]||Ue[St];At&&At.type==="accessor"&&(be[St]=this.getSubLayerAccessor(be[St]))}}Object.assign(ve,s,be),ve.id=`${this.props.id}-${Fe}`,ve.updateTriggers={all:(ye=this.props.updateTriggers)==null?void 0:ye.all,...s.updateTriggers,...Re};for(const Ue of ae){const It=Ue.getSubLayerProps.call(this,Ue);It&&Object.assign(ve,It,{updateTriggers:Object.assign(ve.updateTriggers,It.updateTriggers)})}return ve}_updateAutoHighlight(s){for(const d of this.getSubLayers())d.updateAutoHighlight(s)}_getAttributeManager(){return null}_postUpdate(s,d){let _=this.internalState.subLayers;const S=!_||this.needsUpdate();if(S){const T=this.renderLayers();_=flatten$1(T,Boolean),this.internalState.subLayers=_}debug(TRACE_RENDER_LAYERS,this,S,_);for(const T of _)T.parent=this}}CompositeLayer.layerName="CompositeLayer";const DEGREES_TO_RADIANS$3=Math.PI/180,RADIANS_TO_DEGREES$1=180/Math.PI,EARTH_RADIUS=6370972,GLOBE_RADIUS=256;function getDistanceScales$1(){const f=GLOBE_RADIUS/EARTH_RADIUS,s=Math.PI/180*GLOBE_RADIUS;return{unitsPerMeter:[f,f,f],unitsPerMeter2:[0,0,0],metersPerUnit:[1/f,1/f,1/f],unitsPerDegree:[s,s,f],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/s,1/s,1/f]}}class GlobeViewport extends Viewport{constructor(s={}){const{latitude:d=0,longitude:_=0,zoom:S=0,nearZMultiplier:T=.1,farZMultiplier:F=2,resolution:M=10}=s;let{height:P,altitude:H=1.5}=s;P=P||1,H=Math.max(.75,H);const J=new Matrix4().lookAt({eye:[0,-H,0],up:[0,0,1]}),K=Math.pow(2,S);J.rotateX(d*DEGREES_TO_RADIANS$3),J.rotateZ(-_*DEGREES_TO_RADIANS$3),J.scale(K/P);const z=Math.atan(.5/H),oe=GLOBE_RADIUS*2*K/P;super({...s,height:P,viewMatrix:J,longitude:_,latitude:d,zoom:S,distanceScales:getDistanceScales$1(),fovyRadians:z*2,focalDistance:H,near:T,far:Math.min(2,1/oe+1)*H*F}),this.latitude=d,this.longitude=_,this.resolution=M}get projectionMode(){return PROJECTION_MODE.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(s={}){const d={targetZ:s.z||0},_=this.unproject([0,this.height/2],d),S=this.unproject([this.width/2,0],d),T=this.unproject([this.width,this.height/2],d),F=this.unproject([this.width/2,this.height],d);return T[0]<this.longitude&&(T[0]+=360),_[0]>this.longitude&&(_[0]-=360),[Math.min(_[0],T[0],S[0],F[0]),Math.min(_[1],T[1],S[1],F[1]),Math.max(_[0],T[0],S[0],F[0]),Math.max(_[1],T[1],S[1],F[1])]}unproject(s,{topLeft:d=!0,targetZ:_}={}){const[S,T,F]=s,M=d?T:this.height-T,{pixelUnprojectionMatrix:P}=this;let H;if(Number.isFinite(F))H=transformVector$1(P,[S,M,F,1]);else{const oe=transformVector$1(P,[S,M,-1,1]),se=transformVector$1(P,[S,M,1,1]),ae=((_||0)/EARTH_RADIUS+1)*GLOBE_RADIUS,ge=sqrLen(sub([],oe,se)),pe=sqrLen(oe),he=sqrLen(se),be=4*((4*pe*he-(ge-pe-he)**2)/16)/ge,Re=Math.sqrt(pe-be),Fe=Math.sqrt(Math.max(0,ae*ae-be)),ye=(Re-Fe)/Math.sqrt(ge);H=lerp$4([],oe,se,ye)}const[J,K,z]=this.unprojectPosition(H);return Number.isFinite(F)?[J,K,z]:Number.isFinite(_)?[J,K,_]:[J,K]}projectPosition(s){const[d,_,S=0]=s,T=d*DEGREES_TO_RADIANS$3,F=_*DEGREES_TO_RADIANS$3,M=Math.cos(F),P=(S/EARTH_RADIUS+1)*GLOBE_RADIUS;return[Math.sin(T)*M*P,-Math.cos(T)*M*P,Math.sin(F)*P]}unprojectPosition(s){const[d,_,S]=s,T=len(s),F=Math.asin(S/T),P=Math.atan2(d,-_)*RADIANS_TO_DEGREES$1,H=F*RADIANS_TO_DEGREES$1,J=(T/GLOBE_RADIUS-1)*EARTH_RADIUS;return[P,H,J]}projectFlat(s){return s}unprojectFlat(s){return s}panByPosition(s,d){const _=this.unproject(d);return{longitude:s[0]-_[0]+this.longitude,latitude:s[1]-_[1]+this.latitude}}}function transformVector$1(f,s){const d=transformMat4$1([],s,f);return scale$4(d,d,1/d[3]),d}const DEGREES_TO_RADIANS$2=Math.PI/180;function getViewMatrix$1({height:f,focalDistance:s,orbitAxis:d,rotationX:_,rotationOrbit:S,zoom:T}){const F=d==="Z"?[0,0,1]:[0,1,0],M=d==="Z"?[0,-s,0]:[0,0,s],P=new Matrix4().lookAt({eye:M,up:F});P.rotateX(_*DEGREES_TO_RADIANS$2),d==="Z"?P.rotateZ(S*DEGREES_TO_RADIANS$2):P.rotateY(S*DEGREES_TO_RADIANS$2);const H=Math.pow(2,T)/f;return P.scale(H),P}class OrbitViewport extends Viewport{constructor(s){const{height:d,projectionMatrix:_,fovy:S=50,orbitAxis:T="Z",target:F=[0,0,0],rotationX:M=0,rotationOrbit:P=0,zoom:H=0}=s,J=_?_[5]/2:fovyToAltitude$1(S);super({...s,longitude:void 0,viewMatrix:getViewMatrix$1({height:d||1,focalDistance:J,orbitAxis:T,rotationX:M,rotationOrbit:P,zoom:H}),fovy:S,focalDistance:J,position:F,zoom:H}),this.projectedCenter=this.project(this.center)}unproject(s,{topLeft:d=!0}={}){const[_,S,T=this.projectedCenter[2]]=s,F=d?S:this.height-S,[M,P,H]=pixelsToWorld$1([_,F,T],this.pixelUnprojectionMatrix);return[M,P,H]}panByPosition(s,d){const _=this.project(s),S=[this.width/2+_[0]-d[0],this.height/2+_[1]-d[1],this.projectedCenter[2]];return{target:this.unproject(S)}}}const viewMatrix=new Matrix4().lookAt({eye:[0,0,1]});function getProjectionMatrix$1({width:f,height:s,near:d,far:_,padding:S}){let T=-f/2,F=f/2,M=-s/2,P=s/2;if(S){const{left:H=0,right:J=0,top:K=0,bottom:z=0}=S,oe=clamp$3((H+f-J)/2,0,f)-f/2,se=clamp$3((K+s-z)/2,0,s)-s/2;T-=oe,F-=oe,M+=se,P+=se}return new Matrix4().ortho({left:T,right:F,bottom:M,top:P,near:d,far:_})}class OrthographicViewport extends Viewport{constructor(s){const{width:d,height:_,near:S=.1,far:T=1e3,zoom:F=0,target:M=[0,0,0],padding:P=null,flipY:H=!0}=s,J=Array.isArray(F)?F[0]:F,K=Array.isArray(F)?F[1]:F,z=Math.min(J,K),oe=Math.pow(2,z);let se;if(J!==K){const ae=Math.pow(2,J),ge=Math.pow(2,K);se={unitsPerMeter:[ae/oe,ge/oe,1],metersPerUnit:[oe/ae,oe/ge,1]}}super({...s,longitude:void 0,position:M,viewMatrix:viewMatrix.clone().scale([oe,oe*(H?-1:1),oe]),projectionMatrix:getProjectionMatrix$1({width:d||1,height:_||1,padding:P,near:S,far:T}),zoom:z,distanceScales:se})}projectFlat([s,d]){const{unitsPerMeter:_}=this.distanceScales;return[s*_[0],d*_[1]]}unprojectFlat([s,d]){const{metersPerUnit:_}=this.distanceScales;return[s*_[0],d*_[1]]}panByPosition(s,d){const _=pixelsToWorld$1(d,this.pixelUnprojectionMatrix),S=this.projectFlat(s),T=add$7([],S,negate$3([],_)),F=add$7([],this.center,T);return{target:this.unprojectFlat(F)}}}class OrbitState extends ViewState{constructor(s){const{width:d,height:_,rotationX:S=0,rotationOrbit:T=0,target:F=[0,0,0],zoom:M=0,minRotationX:P=-90,maxRotationX:H=90,minZoom:J=-1/0,maxZoom:K=1/0,startPanPosition:z,startRotatePos:oe,startRotationX:se,startRotationOrbit:ae,startZoomPosition:ge,startZoom:pe}=s;super({width:d,height:_,rotationX:S,rotationOrbit:T,target:F,zoom:M,minRotationX:P,maxRotationX:H,minZoom:J,maxZoom:K},{startPanPosition:z,startRotatePos:oe,startRotationX:se,startRotationOrbit:ae,startZoomPosition:ge,startZoom:pe}),this.makeViewport=s.makeViewport}panStart({pos:s}){return this._getUpdatedState({startPanPosition:this._unproject(s)})}pan({pos:s,startPosition:d}){const _=this.getState().startPanPosition||d;if(!_)return this;const T=this.makeViewport(this.getViewportProps()).panByPosition(_,s);return this._getUpdatedState(T)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:s}){return this._getUpdatedState({startRotatePos:s,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:s,deltaAngleX:d=0,deltaAngleY:_=0}){const{startRotatePos:S,startRotationX:T,startRotationOrbit:F}=this.getState(),{width:M,height:P}=this.getViewportProps();if(!S||T===void 0||F===void 0)return this;let H;if(s){let J=(s[0]-S[0])/M;const K=(s[1]-S[1])/P;(T<-90||T>90)&&(J*=-1),H={rotationX:T+K*180,rotationOrbit:F+J*180}}else H={rotationX:T+_,rotationOrbit:F+d};return this._getUpdatedState(H)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(s){const d=s.getViewportProps(),_={...this.getViewportProps()},{rotationOrbit:S}=_;return Math.abs(S-d.rotationOrbit)>180&&(_.rotationOrbit=S<0?S+360:S-360),_}zoomStart({pos:s}){return this._getUpdatedState({startZoomPosition:this._unproject(s),startZoom:this.getViewportProps().zoom})}zoom({pos:s,startPos:d,scale:_}){let{startZoom:S,startZoomPosition:T}=this.getState();if(T||(S=this.getViewportProps().zoom,T=this._unproject(d)||this._unproject(s)),!T)return this;const F=this._calculateNewZoom({scale:_,startZoom:S}),M=this.makeViewport({...this.getViewportProps(),zoom:F});return this._getUpdatedState({zoom:F,...M.panByPosition(T,s)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(s=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:s})})}zoomOut(s=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/s})})}moveLeft(s=50){return this._panFromCenter([-s,0])}moveRight(s=50){return this._panFromCenter([s,0])}moveUp(s=50){return this._panFromCenter([0,-s])}moveDown(s=50){return this._panFromCenter([0,s])}rotateLeft(s=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-s})}rotateRight(s=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+s})}rotateUp(s=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-s})}rotateDown(s=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+s})}_unproject(s){const d=this.makeViewport(this.getViewportProps());return s&&d.unproject(s)}_calculateNewZoom({scale:s,startZoom:d}){const{maxZoom:_,minZoom:S}=this.getViewportProps();d===void 0&&(d=this.getViewportProps().zoom);const T=d+Math.log2(s);return clamp$3(T,S,_)}_panFromCenter(s){const{width:d,height:_,target:S}=this.getViewportProps();return this.pan({startPosition:S,pos:[d/2+s[0],_/2+s[1]]})}_getUpdatedState(s){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...s})}applyConstraints(s){const{maxZoom:d,minZoom:_,zoom:S,maxRotationX:T,minRotationX:F,rotationOrbit:M}=s;return s.zoom=Array.isArray(S)?[clamp$3(S[0],_,d),clamp$3(S[1],_,d)]:clamp$3(S,_,d),s.rotationX=clamp$3(s.rotationX,F,T),(M<-180||M>180)&&(s.rotationOrbit=mod(M+180,360)-180),s}}class OrbitController extends Controller{constructor(){super(...arguments),this.ControllerState=OrbitState,this.transition={transitionDuration:300,transitionInterpolator:new LinearInterpolator({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})}}}class OrbitView extends View{constructor(s={}){super(s),this.props.orbitAxis=s.orbitAxis||"Z"}get ViewportType(){return OrbitViewport}get ControllerType(){return OrbitController}}OrbitView.displayName="OrbitView";class OrthographicState extends OrbitState{constructor(s){super(s),this.zoomAxis=s.zoomAxis||"all"}_calculateNewZoom({scale:s,startZoom:d}){const{maxZoom:_,minZoom:S}=this.getViewportProps();d===void 0&&(d=this.getViewportProps().zoom);let T=Math.log2(s);if(Array.isArray(d)){let[F,M]=d;switch(this.zoomAxis){case"X":F=clamp$3(F+T,S,_);break;case"Y":M=clamp$3(M+T,S,_);break;default:let P=Math.min(F+T,M+T);P<S&&(T+=S-P),P=Math.max(F+T,M+T),P>_&&(T+=_-P),F+=T,M+=T}return[F,M]}return clamp$3(d+T,S,_)}}class OrthographicController extends Controller{constructor(){super(...arguments),this.ControllerState=OrthographicState,this.transition={transitionDuration:300,transitionInterpolator:new LinearInterpolator(["target","zoom"])},this.dragMode="pan"}_onPanRotate(){return!1}}class OrthographicView extends View{constructor(s={}){super(s)}get ViewportType(){return OrthographicViewport}get ControllerType(){return OrthographicController}}OrthographicView.displayName="OrthographicView";class LayerExtension{static get componentName(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}constructor(s){s&&(this.opts=s)}equals(s){return this===s?!0:this.constructor===s.constructor&&deepEqual(this.opts,s.opts,1)}getShaders(s){return null}getSubLayerProps(s){const{defaultProps:d}=s.constructor,_={updateTriggers:{}};for(const S in d)if(S in this.props){const T=d[S],F=this.props[S];_[S]=F,T&&T.type==="accessor"&&(_.updateTriggers[S]=this.props.updateTriggers[S],typeof F=="function"&&(_[S]=this.getSubLayerAccessor(F)))}return _}initializeState(s,d){}updateState(s,d){}onNeedsRedraw(s){}getNeedsPickingBuffer(s){return!1}draw(s,d){}finalizeState(s,d){}}LayerExtension.defaultProps={};LayerExtension.extensionName="LayerExtension";class Tesselator{constructor(s){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;const{attributes:d={}}=s;this.typedArrayManager=defaultTypedArrayManager,this.attributes={},this._attributeDefs=d,this.opts=s,this.updateGeometry(s)}updateGeometry(s){Object.assign(this.opts,s);const{data:d,buffers:_={},getGeometry:S,geometryBuffer:T,positionFormat:F,dataChanged:M,normalize:P=!0}=this.opts;if(this.data=d,this.getGeometry=S,this.positionSize=T&&T.size||(F==="XY"?2:3),this.buffers=_,this.normalize=P,T&&(assert$2(d.startIndices),this.getGeometry=this.getGeometryFromBuffer(T),P||(_.vertexPositions=T)),this.geometryBuffer=_.vertexPositions,Array.isArray(M))for(const H of M)this._rebuildGeometry(H);else this._rebuildGeometry()}updatePartialGeometry({startRow:s,endRow:d}){this._rebuildGeometry({startRow:s,endRow:d})}getGeometryFromBuffer(s){const d=s.value||s;return ArrayBuffer.isView(d)?getAccessorFromBuffer(d,{size:this.positionSize,offset:s.offset,stride:s.stride,startIndices:this.data.startIndices}):null}_allocate(s,d){const{attributes:_,buffers:S,_attributeDefs:T,typedArrayManager:F}=this;for(const M in T)if(M in S)F.release(_[M]),_[M]=null;else{const P=T[M];P.copy=d,_[M]=F.allocate(_[M],s,P)}}_forEachGeometry(s,d,_){const{data:S,getGeometry:T}=this,{iterable:F,objectInfo:M}=createIterable(S,d,_);for(const P of F){M.index++;const H=T?T(P,M):null;s(H,M.index)}}_rebuildGeometry(s){if(!this.data)return;let{indexStarts:d,vertexStarts:_,instanceCount:S}=this;const{data:T,geometryBuffer:F}=this,{startRow:M=0,endRow:P=1/0}=s||{},H={};if(s||(d=[0],_=[0]),this.normalize||!F)this._forEachGeometry((K,z)=>{const oe=K&&this.normalizeGeometry(K);H[z]=oe,_[z+1]=_[z]+(oe?this.getGeometrySize(oe):0)},M,P),S=_[_.length-1];else if(_=T.startIndices,S=_[T.length]||0,ArrayBuffer.isView(F))S=S||F.length/this.positionSize;else if(F instanceof Buffer$1){const K=this.positionSize*4;S=S||F.byteLength/K}else if(F.buffer){const K=F.stride||this.positionSize*4;S=S||F.buffer.byteLength/K}else if(F.value){const K=F.value,z=F.stride/K.BYTES_PER_ELEMENT||this.positionSize;S=S||K.length/z}this._allocate(S,!!s),this.indexStarts=d,this.vertexStarts=_,this.instanceCount=S;const J={};this._forEachGeometry((K,z)=>{const oe=H[z]||K;J.vertexStart=_[z],J.indexStart=d[z];const se=z<_.length-1?_[z+1]:S;J.geometrySize=se-_[z],J.geometryIndex=z,this.updateGeometryAttributes(oe,J)},M,P),this.vertexCount=d[d.length-1]}}const MAX_COLOR_INTENSITY=255,DEFAULT_COLOR_OFF=[0,0,0],MAX_CHANNELS=6,DEFAULT_FONT_FAMILY="-apple-system, 'Helvetica Neue', Arial, sans-serif",DTYPE_VALUES={Uint8:{format:"r8uint",dataFormat:GLEnum.RED_INTEGER,type:GLEnum.UNSIGNED_BYTE,max:2**8-1,sampler:"usampler2D"},Uint16:{format:"r16uint",dataFormat:GLEnum.RED_INTEGER,type:GLEnum.UNSIGNED_SHORT,max:2**16-1,sampler:"usampler2D"},Uint32:{format:"r32uint",dataFormat:GLEnum.RED_INTEGER,type:GLEnum.UNSIGNED_INT,max:2**32-1,sampler:"usampler2D"},Float32:{format:"r32float",dataFormat:GLEnum.RED,type:GLEnum.FLOAT,max:3.4*10**38,sampler:"sampler2D"},Int8:{format:"r8int",dataFormat:GLEnum.RED_INTEGER,type:GLEnum.BYTE,max:2**7-1,sampler:"isampler2D"},Int16:{format:"r16int",dataFormat:GLEnum.RED_INTEGER,type:GLEnum.SHORT,max:2**15-1,sampler:"isampler2D"},Int32:{format:"r32int",dataFormat:GLEnum.RED_INTEGER,type:GLEnum.INT,max:2**31-1,sampler:"isampler2D"},Float64:{format:"r32float",dataFormat:GLEnum.RED,type:GLEnum.FLOAT,max:3.4*10**38,sampler:"sampler2D",cast:f=>new Float32Array(f)}};var RENDERING_MODES=(f=>(f.MAX_INTENSITY_PROJECTION="Maximum Intensity Projection",f.MIN_INTENSITY_PROJECTION="Minimum Intensity Projection",f.ADDITIVE="Additive",f))(RENDERING_MODES||{});const apply_transparent_color=`vec4 apply_transparent_color(vec3 color, vec3 transparentColor, bool useTransparentColor, float opacity){
  return vec4(color, (color == transparentColor && useTransparentColor) ? 0. : opacity);
}
`,alpha=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,1,1,0);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,autumn=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,0,0,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,bathymetry=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.1568627450980392,0.10196078431372549,0.17254901960784313,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.23137254901960785,0.19215686274509805,0.35294117647058826,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.25098039215686274,0.2980392156862745,0.5450980392156862,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.24705882352941178,0.43137254901960786,0.592156862745098,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.2823529411764706,0.5568627450980392,0.6196078431372549,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.3333333333333333,0.6823529411764706,0.6392156862745098,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.47058823529411764,0.807843137254902,0.6392156862745098,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7333333333333333,0.9019607843137255,0.6745098039215687,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9921568627450981,0.996078431372549,0.8,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,blackbody=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.2;
  const vec4 v1 = vec4(0.9019607843137255,0,0,1);
  const float e2 = 0.4;
  const vec4 v2 = vec4(0.9019607843137255,0.8235294117647058,0,1);
  const float e3 = 0.7;
  const vec4 v3 = vec4(1,1,1,1);
  const float e4 = 1.0;
  const vec4 v4 = vec4(0.6274509803921569,0.7843137254901961,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),mix(v3,v4,a3)*step(e3,x)*step(x,e4)
  )));
}
`,bluered=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,1,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,bone=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.376;
  const vec4 v1 = vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);
  const float e2 = 0.753;
  const vec4 v2 = vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);
  const float e3 = 1.0;
  const vec4 v3 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),mix(v2,v3,a2)*step(e2,x)*step(x,e3)
  ));
}
`,cdom=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.1843137254901961,0.058823529411764705,0.24313725490196078,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.3411764705882353,0.09019607843137255,0.33725490196078434,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5098039215686274,0.10980392156862745,0.38823529411764707,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6705882352941176,0.1607843137254902,0.3764705882352941,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.807843137254902,0.2627450980392157,0.33725490196078434,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.9019607843137255,0.41568627450980394,0.32941176470588235,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9490196078431372,0.5843137254901961,0.403921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9764705882352941,0.7568627450980392,0.5294117647058824,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.996078431372549,0.9294117647058824,0.6901960784313725,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,chlorophyll=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.07058823529411765,0.1411764705882353,0.0784313725490196,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.09803921568627451,0.24705882352941178,0.1607843137254902,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.09411764705882353,0.3568627450980392,0.23137254901960785,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.050980392156862744,0.4666666666666667,0.2823529411764706,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.07058823529411765,0.5803921568627451,0.3137254901960784,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.3137254901960784,0.6784313725490196,0.34901960784313724,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.5176470588235295,0.7686274509803922,0.47843137254901963,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.6862745098039216,0.8666666666666667,0.6352941176470588,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.8431372549019608,0.9764705882352941,0.8156862745098039,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,cool=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.4549019607843137,0,0.8549019607843137,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0,0.8,0.7725490196078432,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0,0.9686274509803922,0.5725490196078431,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0,1,0.34509803921568627,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.1568627450980392,1,0.03137254901960784,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.5764705882352941,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,copper=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.804;
  const vec4 v1 = vec4(1,0.6274509803921569,0.4,1);
  const float e2 = 1.0;
  const vec4 v2 = vec4(1,0.7803921568627451,0.4980392156862745,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),mix(v1,v2,a1)*step(e1,x)*step(x,e2)
  );
}
`,cubehelix=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.07;
  const vec4 v1 = vec4(0.08627450980392157,0.0196078431372549,0.23137254901960785,1);
  const float e2 = 0.13;
  const vec4 v2 = vec4(0.23529411764705882,0.01568627450980392,0.4117647058823529,1);
  const float e3 = 0.2;
  const vec4 v3 = vec4(0.42745098039215684,0.00392156862745098,0.5294117647058824,1);
  const float e4 = 0.27;
  const vec4 v4 = vec4(0.6313725490196078,0,0.5764705882352941,1);
  const float e5 = 0.33;
  const vec4 v5 = vec4(0.8235294117647058,0.00784313725490196,0.5568627450980392,1);
  const float e6 = 0.4;
  const vec4 v6 = vec4(0.984313725490196,0.043137254901960784,0.4823529411764706,1);
  const float e7 = 0.47;
  const vec4 v7 = vec4(1,0.11372549019607843,0.3803921568627451,1);
  const float e8 = 0.53;
  const vec4 v8 = vec4(1,0.21176470588235294,0.27058823529411763,1);
  const float e9 = 0.6;
  const vec4 v9 = vec4(1,0.3333333333333333,0.1803921568627451,1);
  const float e10 = 0.67;
  const vec4 v10 = vec4(1,0.47058823529411764,0.13333333333333333,1);
  const float e11 = 0.73;
  const vec4 v11 = vec4(1,0.615686274509804,0.1450980392156863,1);
  const float e12 = 0.8;
  const vec4 v12 = vec4(0.9450980392156862,0.7490196078431373,0.2235294117647059,1);
  const float e13 = 0.87;
  const vec4 v13 = vec4(0.8784313725490196,0.8627450980392157,0.36470588235294116,1);
  const float e14 = 0.93;
  const vec4 v14 = vec4(0.8549019607843137,0.9450980392156862,0.5568627450980392,1);
  const float e15 = 1.0;
  const vec4 v15 = vec4(0.8901960784313725,0.9921568627450981,0.7764705882352941,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  float a10 = smoothstep(e10,e11,x);
  float a11 = smoothstep(e11,e12,x);
  float a12 = smoothstep(e12,e13,x);
  float a13 = smoothstep(e13,e14,x);
  float a14 = smoothstep(e14,e15,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),
    max(mix(v9,v10,a9)*step(e9,x)*step(x,e10),
    max(mix(v10,v11,a10)*step(e10,x)*step(x,e11),
    max(mix(v11,v12,a11)*step(e11,x)*step(x,e12),
    max(mix(v12,v13,a12)*step(e12,x)*step(x,e13),
    max(mix(v13,v14,a13)*step(e13,x)*step(x,e14),mix(v14,v15,a14)*step(e14,x)*step(x,e15)
  ))))))))))))));
}
`,density=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,earth=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.5098039215686274,1);
  const float e1 = 0.1;
  const vec4 v1 = vec4(0,0.7058823529411765,0.7058823529411765,1);
  const float e2 = 0.2;
  const vec4 v2 = vec4(0.1568627450980392,0.8235294117647058,0.1568627450980392,1);
  const float e3 = 0.4;
  const vec4 v3 = vec4(0.9019607843137255,0.9019607843137255,0.19607843137254902,1);
  const float e4 = 0.6;
  const vec4 v4 = vec4(0.47058823529411764,0.27450980392156865,0.0784313725490196,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,electric=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.15;
  const vec4 v1 = vec4(0.11764705882352941,0,0.39215686274509803,1);
  const float e2 = 0.4;
  const vec4 v2 = vec4(0.47058823529411764,0,0.39215686274509803,1);
  const float e3 = 0.6;
  const vec4 v3 = vec4(0.6274509803921569,0.35294117647058826,0,1);
  const float e4 = 0.8;
  const vec4 v4 = vec4(0.9019607843137255,0.7843137254901961,0,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(1,0.9803921568627451,0.8627450980392157,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,freesurface_blue=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.11764705882352941,0.01568627450980392,0.43137254901960786,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.1843137254901961,0.054901960784313725,0.6901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.1607843137254902,0.17647058823529413,0.9254901960784314,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.09803921568627451,0.38823529411764707,0.8313725490196079,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.26666666666666666,0.5137254901960784,0.7843137254901961,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.4470588235294118,0.611764705882353,0.7725490196078432,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.615686274509804,0.7098039215686275,0.796078431372549,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7843137254901961,0.8156862745098039,0.8470588235294118,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,freesurface_red=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.23529411764705882,0.03529411764705882,0.07058823529411765,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.39215686274509803,0.06666666666666667,0.10588235294117647,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5568627450980392,0.0784313725490196,0.11372549019607843,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6941176470588235,0.16862745098039217,0.10588235294117647,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7529411764705882,0.3411764705882353,0.24705882352941178,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.803921568627451,0.49019607843137253,0.4117647058823529,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.8470588235294118,0.6352941176470588,0.5803921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.8901960784313725,0.7803921568627451,0.7568627450980392,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,greens=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0.26666666666666666,0.10588235294117647,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0,0.42745098039215684,0.17254901960784313,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.13725490196078433,0.5450980392156862,0.27058823529411763,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0.2549019607843137,0.6705882352941176,0.36470588235294116,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.4549019607843137,0.7686274509803922,0.4627450980392157,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.6313725490196078,0.8509803921568627,0.6078431372549019,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.7803921568627451,0.9137254901960784,0.7529411764705882,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(0.8980392156862745,0.9607843137254902,0.8784313725490196,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9686274509803922,0.9882352941176471,0.9607843137254902,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,greys=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,hot=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.3;
  const vec4 v1 = vec4(0.9019607843137255,0,0,1);
  const float e2 = 0.6;
  const vec4 v2 = vec4(1,0.8235294117647058,0,1);
  const float e3 = 1.0;
  const vec4 v3 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),mix(v2,v3,a2)*step(e2,x)*step(x,e3)
  ));
}
`,hsv=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,0,0,1);
  const float e1 = 0.169;
  const vec4 v1 = vec4(0.9921568627450981,1,0.00784313725490196,1);
  const float e2 = 0.173;
  const vec4 v2 = vec4(0.9686274509803922,1,0.00784313725490196,1);
  const float e3 = 0.337;
  const vec4 v3 = vec4(0,0.9882352941176471,0.01568627450980392,1);
  const float e4 = 0.341;
  const vec4 v4 = vec4(0,0.9882352941176471,0.0392156862745098,1);
  const float e5 = 0.506;
  const vec4 v5 = vec4(0.00392156862745098,0.9764705882352941,1,1);
  const float e6 = 0.671;
  const vec4 v6 = vec4(0.00784313725490196,0,0.9921568627450981,1);
  const float e7 = 0.675;
  const vec4 v7 = vec4(0.03137254901960784,0,0.9921568627450981,1);
  const float e8 = 0.839;
  const vec4 v8 = vec4(1,0,0.984313725490196,1);
  const float e9 = 0.843;
  const vec4 v9 = vec4(1,0,0.9607843137254902,1);
  const float e10 = 1.0;
  const vec4 v10 = vec4(1,0,0.023529411764705882,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),mix(v9,v10,a9)*step(e9,x)*step(x,e10)
  )))))))));
}
`,inferno=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.01568627450980392,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8901960784313725,0.34901960784313724,0.2,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9882352941176471,1,0.6431372549019608,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,jet=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.5137254901960784,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0,0.23529411764705882,0.6666666666666666,1);
  const float e2 = 0.375;
  const vec4 v2 = vec4(0.0196078431372549,1,1,1);
  const float e3 = 0.625;
  const vec4 v3 = vec4(1,1,0,1);
  const float e4 = 0.875;
  const vec4 v4 = vec4(0.9803921568627451,0,0,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(0.5019607843137255,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,magma=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.01568627450980392,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,oxygen=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.25098039215686274,0.0196078431372549,0.0196078431372549,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.41568627450980394,0.023529411764705882,0.058823529411764705,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5647058823529412,0.10196078431372549,0.027450980392156862,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6588235294117647,0.25098039215686274,0.011764705882352941,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7372549019607844,0.39215686274509803,0.01568627450980392,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.807843137254902,0.5333333333333333,0.043137254901960784,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.8627450980392157,0.6823529411764706,0.09803921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9058823529411765,0.8431372549019608,0.17254901960784313,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9725490196078431,0.996078431372549,0.4117647058823529,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,par=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.2,0.0784313725490196,0.09411764705882353,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.35294117647058826,0.12549019607843137,0.13725490196078433,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5058823529411764,0.17254901960784313,0.13333333333333333,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6235294117647059,0.26666666666666666,0.09803921568627451,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7137254901960784,0.38823529411764707,0.07450980392156863,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.7803921568627451,0.5254901960784314,0.08627450980392157,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.8313725490196079,0.6705882352941176,0.13725490196078433,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.8666666666666667,0.8235294117647058,0.21176470588235294,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.8823529411764706,0.9921568627450981,0.29411764705882354,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,phase=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.7215686274509804,0.2784313725490196,0.14901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.7294117647058823,0.22745098039215686,0.45098039215686275,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6274509803921569,0.2784313725490196,0.7254901960784313,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.43137254901960786,0.3803921568627451,0.8549019607843137,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.19607843137254902,0.4823529411764706,0.6431372549019608,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.12156862745098039,0.5137254901960784,0.43137254901960786,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.30196078431372547,0.5058823529411764,0.13333333333333333,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,picnic=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,1,1);
  const float e1 = 0.1;
  const vec4 v1 = vec4(0.2,0.6,1,1);
  const float e2 = 0.2;
  const vec4 v2 = vec4(0.4,0.8,1,1);
  const float e3 = 0.3;
  const vec4 v3 = vec4(0.6,0.8,1,1);
  const float e4 = 0.4;
  const vec4 v4 = vec4(0.8,0.8,1,1);
  const float e5 = 0.5;
  const vec4 v5 = vec4(1,1,1,1);
  const float e6 = 0.6;
  const vec4 v6 = vec4(1,0.8,1,1);
  const float e7 = 0.7;
  const vec4 v7 = vec4(1,0.6,1,1);
  const float e8 = 0.8;
  const vec4 v8 = vec4(1,0.4,0.8,1);
  const float e9 = 0.9;
  const vec4 v9 = vec4(1,0.4,0.4,1);
  const float e10 = 1.0;
  const vec4 v10 = vec4(1,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),mix(v9,v10,a9)*step(e9,x)*step(x,e10)
  )))))))));
}
`,plasma=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,portland=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.047058823529411764,0.2,0.5137254901960784,1);
  const float e1 = 0.25;
  const vec4 v1 = vec4(0.0392156862745098,0.5333333333333333,0.7294117647058823,1);
  const float e2 = 0.5;
  const vec4 v2 = vec4(0.9490196078431372,0.8274509803921568,0.2196078431372549,1);
  const float e3 = 0.75;
  const vec4 v3 = vec4(0.9490196078431372,0.5607843137254902,0.2196078431372549,1);
  const float e4 = 1.0;
  const vec4 v4 = vec4(0.8509803921568627,0.11764705882352941,0.11764705882352941,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),mix(v3,v4,a3)*step(e3,x)*step(x,e4)
  )));
}
`,rainbow_soft=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);
  const float e1 = 0.1;
  const vec4 v1 = vec4(0.7803921568627451,0,0.7058823529411765,1);
  const float e2 = 0.2;
  const vec4 v2 = vec4(1,0,0.4745098039215686,1);
  const float e3 = 0.3;
  const vec4 v3 = vec4(1,0.4235294117647059,0,1);
  const float e4 = 0.4;
  const vec4 v4 = vec4(0.8705882352941177,0.7607843137254902,0,1);
  const float e5 = 0.5;
  const vec4 v5 = vec4(0.5882352941176471,1,0,1);
  const float e6 = 0.6;
  const vec4 v6 = vec4(0,1,0.21568627450980393,1);
  const float e7 = 0.7;
  const vec4 v7 = vec4(0,0.9647058823529412,0.5882352941176471,1);
  const float e8 = 0.8;
  const vec4 v8 = vec4(0.19607843137254902,0.6549019607843137,0.8705882352941177,1);
  const float e9 = 0.9;
  const vec4 v9 = vec4(0.403921568627451,0.2,0.9215686274509803,1);
  const float e10 = 1.0;
  const vec4 v10 = vec4(0.48627450980392156,0,0.7294117647058823,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),mix(v9,v10,a9)*step(e9,x)*step(x,e10)
  )))))))));
}
`,rainbow=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.5882352941176471,0,0.35294117647058826,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0,0,0.7843137254901961,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0,0.09803921568627451,1,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0,0.596078431372549,1,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.17254901960784313,1,0.5882352941176471,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.592156862745098,1,0,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(1,0.9176470588235294,0,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(1,0.43529411764705883,0,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,rdbu=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);
  const float e1 = 0.35;
  const vec4 v1 = vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);
  const float e2 = 0.5;
  const vec4 v2 = vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);
  const float e3 = 0.6;
  const vec4 v3 = vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);
  const float e4 = 0.7;
  const vec4 v4 = vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,salinity=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.16470588235294117,0.09411764705882353,0.4235294117647059,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.12941176470588237,0.19607843137254902,0.6352941176470588,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.058823529411764705,0.35294117647058826,0.5686274509803921,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.1568627450980392,0.4627450980392157,0.5372549019607843,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.23137254901960785,0.5725490196078431,0.5294117647058824,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.30980392156862746,0.6862745098039216,0.49411764705882355,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.47058823529411764,0.796078431372549,0.40784313725490196,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7568627450980392,0.8666666666666667,0.39215686274509803,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9921568627450981,0.9372549019607843,0.6039215686274509,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,spring=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,0,1,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,summer=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0.5019607843137255,0.4,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,0.4,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,temperature=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.01568627450980392,0.13725490196078433,0.2,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.09019607843137255,0.2,0.47843137254901963,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3333333333333333,0.23137254901960785,0.615686274509804,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5058823529411764,0.30980392156862746,0.5607843137254902,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.6862745098039216,0.37254901960784315,0.5098039215686274,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8705882352941177,0.4392156862745098,0.396078431372549,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9764705882352941,0.5725490196078431,0.25882352941176473,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9764705882352941,0.7686274509803922,0.2549019607843137,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9098039215686274,0.9803921568627451,0.3568627450980392,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,turbidity=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.13333333333333333,0.12156862745098039,0.10588235294117647,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.2549019607843137,0.19607843137254902,0.1607843137254902,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3843137254901961,0.27058823529411763,0.20392156862745098,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5137254901960784,0.34901960784313724,0.2235294117647059,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.6313725490196078,0.4392156862745098,0.23137254901960785,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.7254901960784313,0.5490196078431373,0.25882352941176473,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.792156862745098,0.6823529411764706,0.34509803921568627,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.8470588235294118,0.8196078431372549,0.49411764705882355,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9137254901960784,0.9647058823529412,0.6705882352941176,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,velocity_blue=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.06666666666666667,0.12549019607843137,0.25098039215686274,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.13725490196078433,0.20392156862745098,0.4549019607843137,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.11372549019607843,0.3176470588235294,0.611764705882353,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.12156862745098039,0.44313725490196076,0.6352941176470588,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.19607843137254902,0.5647058823529412,0.6627450980392157,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.3411764705882353,0.6784313725490196,0.6901960784313725,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.5843137254901961,0.7686274509803922,0.7411764705882353,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.796078431372549,0.8666666666666667,0.8274509803921568,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.996078431372549,0.984313725490196,0.9019607843137255,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,velocity_green=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.09019607843137255,0.13725490196078433,0.07450980392156863,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.09411764705882353,0.25098039215686274,0.14901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.043137254901960784,0.37254901960784315,0.17647058823529413,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.15294117647058825,0.4823529411764706,0.13725490196078433,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.37254901960784315,0.5725490196078431,0.047058823529411764,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.596078431372549,0.6470588235294118,0.07058823529411765,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.788235294117647,0.7294117647058823,0.27058823529411763,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9137254901960784,0.8470588235294118,0.5372549019607843,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,0.9921568627450981,0.803921568627451,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,viridis$1=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,warm=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.6745098039215687,0,0.7333333333333333,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.8588235294117647,0,0.6666666666666666,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(1,0,0.5098039215686274,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(1,0.24705882352941178,0.2901960784313726,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(1,0.4823529411764706,0,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9176470588235294,0.6901960784313725,0,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7450980392156863,0.8941176470588236,0,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.5764705882352941,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,winter=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,1,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(0,1,0.5019607843137255,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,yignbu=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.03137254901960784,0.11372549019607843,0.34509803921568627,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0.1450980392156863,0.20392156862745098,0.5803921568627451,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.13333333333333333,0.3686274509803922,0.6588235294117647,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0.11372549019607843,0.5686274509803921,0.7529411764705882,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.2549019607843137,0.7137254901960784,0.7686274509803922,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.4980392156862745,0.803921568627451,0.7333333333333333,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.7803921568627451,0.9137254901960784,0.7058823529411765,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(0.9294117647058824,0.9725490196078431,0.8509803921568627,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,1,0.8509803921568627,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,yiorrd=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.5019607843137255,0,0.14901960784313725,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0.7411764705882353,0,0.14901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.8901960784313725,0.10196078431372549,0.10980392156862745,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0.9882352941176471,0.3058823529411765,0.16470588235294117,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.9921568627450981,0.5529411764705883,0.23529411764705882,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.996078431372549,0.6980392156862745,0.2980392156862745,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.996078431372549,0.8509803921568627,0.4627450980392157,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(1,0.9294117647058824,0.6274509803921569,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,1,0.8,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,cmaps={__proto__:null,alpha,autumn,bathymetry,blackbody,bluered,bone,cdom,chlorophyll,cool,copper,cubehelix,density,earth,electric,freesurface_blue,freesurface_red,greens,greys,hot,hsv,inferno,jet,magma,oxygen,par,phase,picnic,plasma,portland,rainbow,rainbow_soft,rdbu,salinity,spring,summer,temperature,turbidity,velocity_blue,velocity_green,viridis:viridis$1,warm,winter,yignbu,yiorrd};function colormapModuleFactory(f,s){return{name:`additive-colormap-${f}`,fs:`uniform float opacity;
uniform bool useTransparentColor;

${apply_transparent_color}
${s}

vec4 colormap(float intensity) {
  return vec4(apply_transparent_color(apply_cmap(min(1.,intensity)).xyz, apply_cmap(0.).xyz, useTransparentColor, opacity));
}`,inject:{"fs:DECKGL_MUTATE_COLOR":`  float intensityCombo = 0.;
  intensityCombo += max(0.,intensity0);
  intensityCombo += max(0.,intensity1);
  intensityCombo += max(0.,intensity2);
  intensityCombo += max(0.,intensity3);
  intensityCombo += max(0.,intensity4);
  intensityCombo += max(0.,intensity5);
  rgba = colormap(intensityCombo);`}}}const defaultProps$4$1={colormap:{type:"string",value:"viridis",compare:!0},opacity:{type:"number",value:1,compare:!0},useTransparentColor:{type:"boolean",value:!1,compare:!0}},AdditiveColormapExtension=class extends LayerExtension{getShaders(){var d;const f=((d=this==null?void 0:this.props)==null?void 0:d.colormap)||defaultProps$4$1.colormap.value,s=cmaps[f];if(!s)throw Error(`No colormap named ${f} found in registry`);return{modules:[colormapModuleFactory(f,s)]}}updateState({props:f,oldProps:s,changeFlags:d,..._}){if(super.updateState({props:f,oldProps:s,changeFlags:d,..._}),f.colormap!==s.colormap){const{device:S}=this.context;this.state.model&&(this.state.model.destroy(),this.setState({model:this._getModel(S)}))}}draw(){var _;const{useTransparentColor:f=defaultProps$4$1.useTransparentColor.value,opacity:s=defaultProps$4$1.opacity.value}=this.props,d={opacity:s,useTransparentColor:f};(_=this.state.model)==null||_.setUniforms(d)}};AdditiveColormapExtension.extensionName="AdditiveColormapExtension";AdditiveColormapExtension.defaultProps=defaultProps$4$1;function padWithDefault$1(f,s,d){for(let _=0;_<d;_+=1)f.push(s);return f}const COLOR_PALETTE=[[0,0,255],[0,255,0],[255,0,255],[255,255,0],[255,128,0],[0,255,255],[255,255,255],[255,0,0]];function getDefaultPalette(f){if(f>COLOR_PALETTE.length)throw new Error("Too many colors");return COLOR_PALETTE.slice(0,f)}function padColors({colors:f,channelsVisible:s}){const d=f.map((T,F)=>s[F]?T.map(M=>M/MAX_COLOR_INTENSITY):DEFAULT_COLOR_OFF),_=MAX_CHANNELS-d.length;return padWithDefault$1(d,DEFAULT_COLOR_OFF,_).reduce((T,F)=>T.concat(F),[])}const fs$1$2=`uniform vec3 transparentColor;
uniform bool useTransparentColor;
uniform float opacity;

uniform vec3 colors[6];

${apply_transparent_color}

void mutate_color(inout vec3 rgb, float intensity0, float intensity1, float intensity2, float intensity3, float intensity4, float intensity5) { 
  rgb += max(0.0, min(1.0, intensity0)) * vec3(colors[0]);
  rgb += max(0.0, min(1.0, intensity1)) * vec3(colors[1]);
  rgb += max(0.0, min(1.0, intensity2)) * vec3(colors[2]);
  rgb += max(0.0, min(1.0, intensity3)) * vec3(colors[3]);
  rgb += max(0.0, min(1.0, intensity4)) * vec3(colors[4]);
  rgb += max(0.0, min(1.0, intensity5)) * vec3(colors[5]);
}

vec4 apply_opacity(vec3 rgb) {
  return vec4(apply_transparent_color(rgb, transparentColor, useTransparentColor, opacity));
}
`,DECKGL_MUTATE_COLOR=`vec3 rgb = rgba.rgb;
mutate_color(rgb, intensity0, intensity1, intensity2, intensity3, intensity4, intensity5);
rgba = apply_opacity(rgb);
`,colorPalette={name:"color-palette-module",fs:fs$1$2,inject:{"fs:DECKGL_MUTATE_COLOR":DECKGL_MUTATE_COLOR}},defaultProps$3$2={colors:{type:"array",value:null,compare:!0},opacity:{type:"number",value:1,compare:!0},transparentColor:{type:"array",value:null,compare:!0},useTransparentColor:{type:"boolean",value:!1,compare:!0}},ColorPaletteExtension=class extends LayerExtension{getShaders(){return{...super.getShaders(),modules:[colorPalette]}}draw(){var M;const{colors:f,channelsVisible:s,opacity:d=defaultProps$3$2.opacity.value,transparentColor:_=defaultProps$3$2.transparentColor.value,useTransparentColor:S=defaultProps$3$2.useTransparentColor.value}=this.props,F={colors:padColors({channelsVisible:s||this.selections.map(()=>!0),colors:f||getDefaultPalette(this.props.selections.length)}),opacity:d,transparentColor:(_||[0,0,0]).map(P=>P/255),useTransparentColor:!!S};(M=this.state.model)==null||M.setUniforms(F)}};ColorPaletteExtension.extensionName="ColorPaletteExtension";ColorPaletteExtension.defaultProps=defaultProps$3$2;const fs$c=`// lens bounds for ellipse
uniform float majorLensAxis;
uniform float minorLensAxis;
uniform vec2 lensCenter;

// lens uniforms
uniform bool lensEnabled;
uniform int lensSelection;
uniform vec3 lensBorderColor;
uniform float lensBorderRadius;

// color palette
uniform vec3 colors[6];

bool frag_in_lens_bounds(vec2 vTexCoord) {
  // Check membership in what is (not visually, but effectively) an ellipse.
  // Since the fragment space is a unit square and the real coordinates could be longer than tall,
  // to get a circle visually we have to treat the check as that of an ellipse to get the effect of a circle.

  // Check membership in ellipse.
  return pow((lensCenter.x - vTexCoord.x) / majorLensAxis, 2.) + pow((lensCenter.y - vTexCoord.y) / minorLensAxis, 2.) < (1. - lensBorderRadius);
}

bool frag_on_lens_bounds(vec2 vTexCoord) {
  // Same as the above, except this checks the boundary.

  float ellipseDistance = pow((lensCenter.x - vTexCoord.x) / majorLensAxis, 2.) + pow((lensCenter.y - vTexCoord.y) / minorLensAxis, 2.);

  // Check membership on "bourndary" of ellipse.
  return ellipseDistance <= 1. && ellipseDistance >= (1. - lensBorderRadius);
}
// Return a float for boolean arithmetic calculation.
float get_use_color_float(vec2 vTexCoord, int channelIndex) {
  bool isFragInLensBounds = frag_in_lens_bounds(vTexCoord);
  bool inLensAndUseLens = lensEnabled && isFragInLensBounds;
  return float(int((inLensAndUseLens && channelIndex == lensSelection) || (!inLensAndUseLens)));
 
}
void mutate_color(inout vec3 rgb, float intensity0, float intensity1, float intensity2, float intensity3, float intensity4, float intensity5, vec2 vTexCoord){
  float useColorValue = 0.;

  useColorValue = get_use_color_float(vTexCoord, 0);
  rgb += max(0., min(1., intensity0)) * max(vec3(colors[0]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 1);
  rgb += max(0., min(1., intensity1)) * max(vec3(colors[1]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 2);
  rgb += max(0., min(1., intensity2)) * max(vec3(colors[2]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 3);
  rgb += max(0., min(1., intensity3)) * max(vec3(colors[3]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 4);
  rgb += max(0., min(1., intensity4)) * max(vec3(colors[4]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 5);
  rgb += max(0., min(1., intensity5)) * max(vec3(colors[5]), (1. - useColorValue) * vec3(1., 1., 1.));
}
`,lens={name:"lens-module",fs:fs$c,inject:{"fs:DECKGL_MUTATE_COLOR":`
   vec3 rgb = rgba.rgb;
   mutate_color(rgb, intensity0, intensity1, intensity2, intensity3, intensity4, intensity5, vTexCoord);
   rgba = vec4(rgb, 1.);
  `,"fs:#main-end":`
      bool isFragOnLensBounds = frag_on_lens_bounds(vTexCoord);
      fragColor = (lensEnabled && isFragOnLensBounds) ? vec4(lensBorderColor, 1.) : fragColor;
  `}},defaultProps$2$2={lensEnabled:{type:"boolean",value:!1,compare:!0},lensSelection:{type:"number",value:0,compare:!0},lensRadius:{type:"number",value:100,compare:!0},lensBorderColor:{type:"array",value:[255,255,255],compare:!0},lensBorderRadius:{type:"number",value:.02,compare:!0},colors:{type:"array",value:null,compare:!0}},LensExtension=class extends LayerExtension{getShaders(){return{...super.getShaders(),modules:[lens]}}initializeState(){const f=this.getCurrentLayer();if(f.isComposite)return;const s=()=>{const{viewportId:d}=f.props,{lensRadius:_=defaultProps$2$2.lensRadius.value}=this.props;if(!d){f.setState({unprojectLensBounds:[0,0,0,0]});return}const{mousePosition:S}=f.context,T=f.context.deck.viewManager.views.filter(P=>P.id===d)[0],F=f.context.deck.viewManager.viewState[d],M=T.makeViewport({...F,viewState:F});if(S&&M.containsPixel(S)){const P={x:S.x-M.x,y:S.y-M.y},J=[[P.x-_,P.y],[P.x,P.y+_],[P.x+_,P.y],[P.x,P.y-_]].map((K,z)=>M.unproject(K)[z%2]);f.setState({unprojectLensBounds:J})}else f.setState({unprojectLensBounds:[0,0,0,0]})};this.context.deck&&this.context.deck.eventManager.on({pointermove:s,pointerleave:s,wheel:s}),this.setState({onMouseMove:s,unprojectLensBounds:[0,0,0,0]})}draw(){var Fe;const{unprojectLensBounds:f=[0,0,0,0]}=this.state,{bounds:s,lensEnabled:d=defaultProps$2$2.lensEnabled.value,lensSelection:_=defaultProps$2$2.lensSelection.value,lensBorderColor:S=defaultProps$2$2.lensBorderColor.value,lensBorderRadius:T=defaultProps$2$2.lensBorderRadius.value,colors:F,channelsVisible:M}=this.props,[P,H,J,K]=f,[z,oe,se,ae]=s,ge=(P-z)/(se-z),pe=(H-ae)/(oe-ae),he=(J-z)/(se-z),ve=(K-ae)/(oe-ae),be=padColors({channelsVisible:M||this.selections.map(()=>!0),colors:F||getDefaultPalette(this.props.selections.length)}),Re={majorLensAxis:(he-ge)/2,minorLensAxis:(pe-ve)/2,lensCenter:[(he+ge)/2,(pe+ve)/2],lensEnabled:d,lensSelection:_,lensBorderColor:S,lensBorderRadius:T,colors:be};(Fe=this.state.model)==null||Fe.setUniforms(Re)}finalizeState(){var f,s,d;this.context.deck&&this.context.deck.eventManager.off({pointermove:(f=this.state)==null?void 0:f.onMouseMove,pointerleave:(s=this.state)==null?void 0:s.onMouseMove,wheel:(d=this.state)==null?void 0:d.onMouseMove})}};LensExtension.extensionName="LensExtension";LensExtension.defaultProps=defaultProps$2$2;function colormapModuleFactory3D(f,s){const d=`${s}

vec4 colormap(float intensity, float opacity) {
  return vec4(apply_cmap(min(1.,intensity)).xyz, opacity);
}`;return{name:`additive-colormap-3d-${f}`,fs:d}}const defaultProps$1$2={colormap:{type:"string",value:"viridis",compare:!0}},BaseExtension$1=class extends LayerExtension{constructor(...s){super(s),this.opts=this.opts||{}}getShaders(){var _;const s=((_=this==null?void 0:this.props)==null?void 0:_.colormap)||defaultProps$1$2.colormap.value,d=cmaps[s];return{...super.getShaders(),modules:[colormapModuleFactory3D(s,d)]}}updateState({props:s,oldProps:d,changeFlags:_,...S}){if(super.updateState({props:s,oldProps:d,changeFlags:_,...S}),s.colormap!==d.colormap){const{device:T}=this.context;this.state.model&&(this.state.model.destroy(),this.setState({model:this._getModel(T)}))}}};BaseExtension$1.extensionName="BaseExtension";BaseExtension$1.defaultProps=defaultProps$1$2;const _BEFORE_RENDER$5="",_RENDER$5=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);
  float total = 0.0;

  for(int i = 0; i < 6; i++) {
    total += intensityArray[i];
  }
  // Do not go past 1 in opacity/colormap value.
  total = min(total, 1.0);

  vec4 val_color = colormap(total, total);

  // Opacity correction
  val_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);
  color.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;
  color.a += (1.0 - color.a) * val_color.a;
  if (color.a >= 0.95) {
    break;
  }
  p += ray_dir * dt;
`,_AFTER_RENDER$5="",AdditiveBlendExtension$1=class extends BaseExtension$1{constructor(s){super(s),this.rendering={_BEFORE_RENDER:_BEFORE_RENDER$5,_RENDER:_RENDER$5,_AFTER_RENDER:_AFTER_RENDER$5}}};AdditiveBlendExtension$1.extensionName="AdditiveBlendExtension";const _BEFORE_RENDER$4=`  float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);
`,_RENDER$4=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] > maxVals[i]) {
      maxVals[i] = intensityArray[i];
    }
  }
`,_AFTER_RENDER$4=`  float total = 0.0;
  for(int i = 0; i < 6; i++) {
    total += maxVals[i];
  }
  // Do not go past 1 in opacity/colormap value.
  total = min(total, 1.0);
  color = colormap(total, total);
`,MaximumIntensityProjectionExtension$1=class extends BaseExtension$1{constructor(s){super(s),this.rendering={_BEFORE_RENDER:_BEFORE_RENDER$4,_RENDER:_RENDER$4,_AFTER_RENDER:_AFTER_RENDER$4}}};MaximumIntensityProjectionExtension$1.extensionName="MaximumIntensityProjectionExtension";const _BEFORE_RENDER$3=`  float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);
`,_RENDER$3=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] < minVals[i]) {
      minVals[i] = intensityArray[i];
    }
  }
`,_AFTER_RENDER$3=`  float total = 0.0;
  for(int i = 0; i < 6; i++) {
    total += minVals[i];
  }
  // Do not go past 1 in opacity/colormap value.
  total = min(total, 1.0);
  color = colormap(total, total);
`,MinimumIntensityProjectionExtension$1=class extends BaseExtension$1{constructor(s){super(s),this.rendering={_BEFORE_RENDER:_BEFORE_RENDER$3,_RENDER:_RENDER$3,_AFTER_RENDER:_AFTER_RENDER$3}}};MinimumIntensityProjectionExtension$1.extensionName="MinimumIntensityProjectionExtension";const defaultProps$m={colors:{type:"array",value:null,compare:!0}},BaseExtension=class extends LayerExtension{constructor(...f){super(f),this.opts=this.opts||{}}draw(){var S;const{colors:f,channelsVisible:s}=this.props,_={colors:padColors({channelsVisible:s||this.selections.map(()=>!0),colors:f||getDefaultPalette(this.props.selections.length)})};(S=this.state.model)==null||S.setUniforms(_)}};BaseExtension.extensionName="BaseExtension";BaseExtension.defaultProps=defaultProps$m;const _BEFORE_RENDER$2="",_RENDER$2=`  vec3 rgbCombo = vec3(0.0);
  vec3 hsvCombo = vec3(0.0);
  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);
  float total = 0.0;
  for(int i = 0; i < 6; i++) {
    float intensityValue = intensityArray[i];
    rgbCombo += max(0.0, min(1.0, intensityValue)) * colors[i];
    total += intensityValue;
  }
  // Do not go past 1 in opacity.
  total = min(total, 1.0);
  vec4 val_color = vec4(rgbCombo, total);
  // Opacity correction
  val_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);
  color.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;
  color.a += (1.0 - color.a) * val_color.a;
  if (color.a >= 0.95) {
    break;
  }
`,_AFTER_RENDER$2="",AdditiveBlendExtension=class extends BaseExtension{constructor(f){super(f),this.rendering={_BEFORE_RENDER:_BEFORE_RENDER$2,_RENDER:_RENDER$2,_AFTER_RENDER:_AFTER_RENDER$2}}};AdditiveBlendExtension.extensionName="AdditiveBlendExtension";const _BEFORE_RENDER$1=`  float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);
`,_RENDER$1=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] > maxVals[i]) {
      maxVals[i] = intensityArray[i];
    }
  }
`,_AFTER_RENDER$1=`  vec3 rgbCombo = vec3(0.0);
  for(int i = 0; i < 6; i++) {
    rgbCombo += max(0.0, min(1.0, maxVals[i])) * vec3(colors[i]);
  }
  color = vec4(rgbCombo, 1.0);
`,MaximumIntensityProjectionExtension=class extends BaseExtension{constructor(f){super(f),this.rendering={_BEFORE_RENDER:_BEFORE_RENDER$1,_RENDER:_RENDER$1,_AFTER_RENDER:_AFTER_RENDER$1}}};MaximumIntensityProjectionExtension.extensionName="MaximumIntensityProjectionExtension";const _BEFORE_RENDER=`  float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);
`,_RENDER=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] < minVals[i]) {
      minVals[i] = intensityArray[i];
    }
  }
`,_AFTER_RENDER=`  vec3 rgbCombo = vec3(0.0);
  for(int i = 0; i < 6; i++) {
    rgbCombo += max(0.0, min(1.0, minVals[i])) * vec3(colors[i]);
  }
  color = vec4(rgbCombo, 1.0);
`,MinimumIntensityProjectionExtension=class extends BaseExtension{constructor(f){super(f),this.rendering={_BEFORE_RENDER,_RENDER,_AFTER_RENDER}}};MinimumIntensityProjectionExtension.extensionName="MinimumIntensityProjectionExtension";const ColorPalette3DExtensions={BaseExtension,AdditiveBlendExtension,MaximumIntensityProjectionExtension,MinimumIntensityProjectionExtension};function uncurryThis(f){return(s,...d)=>ReflectApply(f,s,d)}function uncurryThisGetter(f,s){return uncurryThis(ReflectGetOwnPropertyDescriptor(f,s).get)}const{apply:ReflectApply,construct:ReflectConstruct,defineProperty:ReflectDefineProperty,get:ReflectGet,getOwnPropertyDescriptor:ReflectGetOwnPropertyDescriptor,getPrototypeOf:ReflectGetPrototypeOf,has:ReflectHas,ownKeys:ReflectOwnKeys,set:ReflectSet,setPrototypeOf:ReflectSetPrototypeOf}=Reflect,{iterator:SymbolIterator,species:SymbolSpecies,toStringTag:SymbolToStringTag,for:SymbolFor}=Symbol,NativeObject=Object,{create:ObjectCreate,defineProperty:ObjectDefineProperty,freeze:ObjectFreeze,is:ObjectIs}=NativeObject,NativeArray=Array,ArrayPrototype=NativeArray.prototype,NativeArrayPrototypeSymbolIterator=ArrayPrototype[SymbolIterator],ArrayPrototypeSymbolIterator=uncurryThis(NativeArrayPrototypeSymbolIterator),NativeArrayBuffer=ArrayBuffer,ArrayBufferPrototype=NativeArrayBuffer.prototype;uncurryThisGetter(ArrayBufferPrototype,"byteLength");const NativeSharedArrayBuffer=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;NativeSharedArrayBuffer&&uncurryThisGetter(NativeSharedArrayBuffer.prototype,"byteLength");const TypedArray=ReflectGetPrototypeOf(Uint8Array);TypedArray.from;const TypedArrayPrototype=TypedArray.prototype;TypedArrayPrototype[SymbolIterator];uncurryThis(TypedArrayPrototype.keys);uncurryThis(TypedArrayPrototype.values);uncurryThis(TypedArrayPrototype.entries);uncurryThis(TypedArrayPrototype.set);uncurryThis(TypedArrayPrototype.reverse);uncurryThis(TypedArrayPrototype.fill);uncurryThis(TypedArrayPrototype.copyWithin);uncurryThis(TypedArrayPrototype.sort);uncurryThis(TypedArrayPrototype.slice);uncurryThis(TypedArrayPrototype.subarray);uncurryThisGetter(TypedArrayPrototype,"buffer");uncurryThisGetter(TypedArrayPrototype,"byteOffset");uncurryThisGetter(TypedArrayPrototype,"length");uncurryThisGetter(TypedArrayPrototype,SymbolToStringTag);const NativeUint8Array=Uint8Array,NativeUint16Array=Uint16Array,NativeUint32Array=Uint32Array,NativeFloat32Array=Float32Array,ArrayIteratorPrototype=ReflectGetPrototypeOf([][SymbolIterator]()),ArrayIteratorPrototypeNext=uncurryThis(ArrayIteratorPrototype.next),GeneratorPrototypeNext=uncurryThis(function*(){}().next),IteratorPrototype=ReflectGetPrototypeOf(ArrayIteratorPrototype),DataViewPrototype=DataView.prototype,DataViewPrototypeGetUint16=uncurryThis(DataViewPrototype.getUint16),NativeWeakMap=WeakMap,WeakMapPrototype=NativeWeakMap.prototype,WeakMapPrototypeGet=uncurryThis(WeakMapPrototype.get),WeakMapPrototypeSet=uncurryThis(WeakMapPrototype.set),arrayIterators=new NativeWeakMap,SafeIteratorPrototype=ObjectCreate(null,{next:{value:function f(){const s=WeakMapPrototypeGet(arrayIterators,this);return ArrayIteratorPrototypeNext(s)}},[SymbolIterator]:{value:function f(){return this}}});function safeIfNeeded(f){if(f[SymbolIterator]===NativeArrayPrototypeSymbolIterator&&ArrayIteratorPrototype.next===ArrayIteratorPrototypeNext)return f;const s=ObjectCreate(SafeIteratorPrototype);return WeakMapPrototypeSet(arrayIterators,s,ArrayPrototypeSymbolIterator(f)),s}const generators=new NativeWeakMap,DummyArrayIteratorPrototype=ObjectCreate(IteratorPrototype,{next:{value:function f(){const s=WeakMapPrototypeGet(generators,this);return GeneratorPrototypeNext(s)},writable:!0,configurable:!0}});for(const f of ReflectOwnKeys(ArrayIteratorPrototype))f!=="next"&&ObjectDefineProperty(DummyArrayIteratorPrototype,f,ReflectGetOwnPropertyDescriptor(ArrayIteratorPrototype,f));const buffer$1=new NativeArrayBuffer(4),floatView=new NativeFloat32Array(buffer$1),uint32View=new NativeUint32Array(buffer$1),baseTable=new NativeUint16Array(512),shiftTable=new NativeUint8Array(512);for(let f=0;f<256;++f){const s=f-127;s<-24?(baseTable[f]=0,baseTable[f|256]=32768,shiftTable[f]=24,shiftTable[f|256]=24):s<-14?(baseTable[f]=1024>>-s-14,baseTable[f|256]=1024>>-s-14|32768,shiftTable[f]=-s-1,shiftTable[f|256]=-s-1):s<=15?(baseTable[f]=s+15<<10,baseTable[f|256]=s+15<<10|32768,shiftTable[f]=13,shiftTable[f|256]=13):s<128?(baseTable[f]=31744,baseTable[f|256]=64512,shiftTable[f]=24,shiftTable[f|256]=24):(baseTable[f]=31744,baseTable[f|256]=64512,shiftTable[f]=13,shiftTable[f|256]=13)}const mantissaTable=new NativeUint32Array(2048);for(let f=1;f<1024;++f){let s=f<<13,d=0;for(;!(s&8388608);)s<<=1,d-=8388608;s&=-8388609,d+=947912704,mantissaTable[f]=s|d}for(let f=1024;f<2048;++f)mantissaTable[f]=939524096+(f-1024<<13);const exponentTable=new NativeUint32Array(64);for(let f=1;f<31;++f)exponentTable[f]=f<<23;exponentTable[31]=1199570944;exponentTable[32]=2147483648;for(let f=33;f<63;++f)exponentTable[f]=2147483648+(f-32<<23);exponentTable[63]=3347054592;const offsetTable=new NativeUint16Array(64);for(let f=1;f<64;++f)f!==32&&(offsetTable[f]=1024);function convertToNumber(f){const s=f>>10;return uint32View[0]=mantissaTable[offsetTable[s]+(f&1023)]+exponentTable[s],floatView[0]}function getFloat16(f,s,...d){return convertToNumber(DataViewPrototypeGetUint16(f,s,...safeIfNeeded(d)))}var getAttribute$2={exports:{}};function getAttribute(f,s,d){const _=d&&d.debug||!1;_&&console.log("[xml-utils] getting "+s+" in "+f);const S=typeof f=="object"?f.outer:f,T=S.slice(0,S.indexOf(">")+1),F=['"',"'"];for(let M=0;M<F.length;M++){const P=F[M],H=s+"\\="+P+"([^"+P+"]*)"+P;_&&console.log("[xml-utils] pattern:",H);const K=new RegExp(H).exec(T);if(_&&console.log("[xml-utils] match:",K),K)return K[1]}}getAttribute$2.exports=getAttribute;getAttribute$2.exports.default=getAttribute;var getAttributeExports=getAttribute$2.exports;const getAttribute$1=getDefaultExportFromCjs(getAttributeExports);var findTagsByName$2={exports:{}},findTagByName$2={exports:{}},indexOfMatch$2={exports:{}};function indexOfMatch$1(f,s,d){const S=new RegExp(s).exec(f.slice(d));return S?d+S.index:-1}indexOfMatch$2.exports=indexOfMatch$1;indexOfMatch$2.exports.default=indexOfMatch$1;var indexOfMatchExports=indexOfMatch$2.exports,indexOfMatchEnd$2={exports:{}};function indexOfMatchEnd$1(f,s,d){const S=new RegExp(s).exec(f.slice(d));return S?d+S.index+S[0].length-1:-1}indexOfMatchEnd$2.exports=indexOfMatchEnd$1;indexOfMatchEnd$2.exports.default=indexOfMatchEnd$1;var indexOfMatchEndExports=indexOfMatchEnd$2.exports,countSubstring$2={exports:{}};function countSubstring$1(f,s){const d=new RegExp(s,"g"),_=f.match(d);return _?_.length:0}countSubstring$2.exports=countSubstring$1;countSubstring$2.exports.default=countSubstring$1;var countSubstringExports=countSubstring$2.exports;const indexOfMatch=indexOfMatchExports,indexOfMatchEnd=indexOfMatchEndExports,countSubstring=countSubstringExports;function findTagByName$1(f,s,d){const _=d&&d.debug||!1,S=!(d&&typeof d.nested===!1),T=d&&d.startIndex||0;_&&console.log("[xml-utils] starting findTagByName with",s," and ",d);const F=indexOfMatch(f,`<${s}[ 
>/]`,T);if(_&&console.log("[xml-utils] start:",F),F===-1)return;const M=f.slice(F+s.length);let P=indexOfMatchEnd(M,"^[^<]*[ /]>",0);const H=P!==-1&&M[P-1]==="/";if(_&&console.log("[xml-utils] selfClosing:",H),H===!1)if(S){let oe=0,se=1,ae=0;for(;(P=indexOfMatchEnd(M,"[ /]"+s+">",oe))!==-1;){const ge=M.substring(oe,P+1);if(se+=countSubstring(ge,"<"+s+`[ 
	>]`),ae+=countSubstring(ge,"</"+s+">"),ae>=se)break;oe=P}}else P=indexOfMatchEnd(M,"[ /]"+s+">",0);const J=F+s.length+P+1;if(_&&console.log("[xml-utils] end:",J),J===-1)return;const K=f.slice(F,J);let z;return H?z=null:z=K.slice(K.indexOf(">")+1,K.lastIndexOf("<")),{inner:z,outer:K,start:F,end:J}}findTagByName$2.exports=findTagByName$1;findTagByName$2.exports.default=findTagByName$1;var findTagByNameExports=findTagByName$2.exports;const findTagByName=findTagByNameExports;function findTagsByName(f,s,d){const _=[],S=d&&d.debug||!1,T=d&&typeof d.nested=="boolean"?d.nested:!0;let F=d&&d.startIndex||0,M;for(;M=findTagByName(f,s,{debug:S,startIndex:F});)T?F=M.start+1+s.length:F=M.end,_.push(M);return S&&console.log("findTagsByName found",_.length,"tags"),_}findTagsByName$2.exports=findTagsByName;findTagsByName$2.exports.default=findTagsByName;var findTagsByNameExports=findTagsByName$2.exports;const findTagsByName$1=getDefaultExportFromCjs(findTagsByNameExports),fieldTagNames={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},fieldTags={};for(const f in fieldTagNames)fieldTagNames.hasOwnProperty(f)&&(fieldTags[fieldTagNames[f]]=parseInt(f,10));const arrayFields=[fieldTags.BitsPerSample,fieldTags.ExtraSamples,fieldTags.SampleFormat,fieldTags.StripByteCounts,fieldTags.StripOffsets,fieldTags.StripRowCounts,fieldTags.TileByteCounts,fieldTags.TileOffsets,fieldTags.SubIFDs],fieldTypeNames={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},fieldTypes={};for(const f in fieldTypeNames)fieldTypeNames.hasOwnProperty(f)&&(fieldTypes[fieldTypeNames[f]]=parseInt(f,10));const photometricInterpretations={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},ExtraSamplesValues={Unspecified:0,Assocalpha:1,Unassalpha:2},LercParameters={Version:0,AddCompression:1},LercAddCompression={None:0,Deflate:1,Zstandard:2},geoKeyNames={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function fromWhiteIsZero(f,s){const{width:d,height:_}=f,S=new Uint8Array(d*_*3);let T;for(let F=0,M=0;F<f.length;++F,M+=3)T=256-f[F]/s*256,S[M]=T,S[M+1]=T,S[M+2]=T;return S}function fromBlackIsZero(f,s){const{width:d,height:_}=f,S=new Uint8Array(d*_*3);let T;for(let F=0,M=0;F<f.length;++F,M+=3)T=f[F]/s*256,S[M]=T,S[M+1]=T,S[M+2]=T;return S}function fromPalette(f,s){const{width:d,height:_}=f,S=new Uint8Array(d*_*3),T=s.length/3,F=s.length/3*2;for(let M=0,P=0;M<f.length;++M,P+=3){const H=f[M];S[P]=s[H]/65536*256,S[P+1]=s[H+T]/65536*256,S[P+2]=s[H+F]/65536*256}return S}function fromCMYK(f){const{width:s,height:d}=f,_=new Uint8Array(s*d*3);for(let S=0,T=0;S<f.length;S+=4,T+=3){const F=f[S],M=f[S+1],P=f[S+2],H=f[S+3];_[T]=255*((255-F)/256)*((255-H)/256),_[T+1]=255*((255-M)/256)*((255-H)/256),_[T+2]=255*((255-P)/256)*((255-H)/256)}return _}function fromYCbCr(f){const{width:s,height:d}=f,_=new Uint8ClampedArray(s*d*3);for(let S=0,T=0;S<f.length;S+=3,T+=3){const F=f[S],M=f[S+1],P=f[S+2];_[T]=F+1.402*(P-128),_[T+1]=F-.34414*(M-128)-.71414*(P-128),_[T+2]=F+1.772*(M-128)}return _}const Xn=.95047,Yn=1,Zn=1.08883;function fromCIELab(f){const{width:s,height:d}=f,_=new Uint8Array(s*d*3);for(let S=0,T=0;S<f.length;S+=3,T+=3){const F=f[S+0],M=f[S+1]<<24>>24,P=f[S+2]<<24>>24;let H=(F+16)/116,J=M/500+H,K=H-P/200,z,oe,se;J=Xn*(J*J*J>.008856?J*J*J:(J-16/116)/7.787),H=Yn*(H*H*H>.008856?H*H*H:(H-16/116)/7.787),K=Zn*(K*K*K>.008856?K*K*K:(K-16/116)/7.787),z=J*3.2406+H*-1.5372+K*-.4986,oe=J*-.9689+H*1.8758+K*.0415,se=J*.0557+H*-.204+K*1.057,z=z>.0031308?1.055*z**(1/2.4)-.055:12.92*z,oe=oe>.0031308?1.055*oe**(1/2.4)-.055:12.92*oe,se=se>.0031308?1.055*se**(1/2.4)-.055:12.92*se,_[T]=Math.max(0,Math.min(1,z))*255,_[T+1]=Math.max(0,Math.min(1,oe))*255,_[T+2]=Math.max(0,Math.min(1,se))*255}return _}const registry$1=new Map;function addDecoder(f,s){Array.isArray(f)||(f=[f]),f.forEach(d=>registry$1.set(d,s))}async function getDecoder(f){const s=registry$1.get(f.Compression);if(!s)throw new Error(`Unknown compression method identifier: ${f.Compression}`);const d=await s();return new d(f)}addDecoder([void 0,1],()=>__vitePreload(()=>import("../assets/raw-D-xlsccP.js"),__vite__mapDeps([2,1]),import.meta.url).then(f=>f.default));addDecoder(5,()=>__vitePreload(()=>import("../assets/lzw-C8SAzNNs.js"),__vite__mapDeps([3,1]),import.meta.url).then(f=>f.default));addDecoder(6,()=>{throw new Error("old style JPEG compression is not supported.")});addDecoder(7,()=>__vitePreload(()=>import("../assets/jpeg-RJGuIsKe.js"),__vite__mapDeps([4,1]),import.meta.url).then(f=>f.default));addDecoder([8,32946],()=>__vitePreload(()=>import("../assets/deflate-CA5tTHQ_.js"),__vite__mapDeps([5,6,1]),import.meta.url).then(f=>f.default));addDecoder(32773,()=>__vitePreload(()=>import("../assets/packbits-C1ej-UzG.js"),__vite__mapDeps([7,1]),import.meta.url).then(f=>f.default));addDecoder(34887,()=>__vitePreload(()=>import("../assets/lerc-BiCGFepN.js"),__vite__mapDeps([8,6,1]),import.meta.url).then(async f=>(await f.zstd.init(),f)).then(f=>f.default));addDecoder(50001,()=>__vitePreload(()=>import("../assets/webimage-DEhUXo1v.js"),__vite__mapDeps([9,1]),import.meta.url).then(f=>f.default));function copyNewSize(f,s,d,_=1){return new(Object.getPrototypeOf(f)).constructor(s*d*_)}function resampleNearest(f,s,d,_,S){const T=s/_,F=d/S;return f.map(M=>{const P=copyNewSize(M,_,S);for(let H=0;H<S;++H){const J=Math.min(Math.round(F*H),d-1);for(let K=0;K<_;++K){const z=Math.min(Math.round(T*K),s-1),oe=M[J*s+z];P[H*_+K]=oe}}return P})}function lerp$1(f,s,d){return(1-d)*f+d*s}function resampleBilinear(f,s,d,_,S){const T=s/_,F=d/S;return f.map(M=>{const P=copyNewSize(M,_,S);for(let H=0;H<S;++H){const J=F*H,K=Math.floor(J),z=Math.min(Math.ceil(J),d-1);for(let oe=0;oe<_;++oe){const se=T*oe,ae=se%1,ge=Math.floor(se),pe=Math.min(Math.ceil(se),s-1),he=M[K*s+ge],ve=M[K*s+pe],be=M[z*s+ge],Re=M[z*s+pe],Fe=lerp$1(lerp$1(he,ve,ae),lerp$1(be,Re,ae),J%1);P[H*_+oe]=Fe}}return P})}function resample$2(f,s,d,_,S,T="nearest"){switch(T.toLowerCase()){case"nearest":return resampleNearest(f,s,d,_,S);case"bilinear":case"linear":return resampleBilinear(f,s,d,_,S);default:throw new Error(`Unsupported resampling method: '${T}'`)}}function resampleNearestInterleaved(f,s,d,_,S,T){const F=s/_,M=d/S,P=copyNewSize(f,_,S,T);for(let H=0;H<S;++H){const J=Math.min(Math.round(M*H),d-1);for(let K=0;K<_;++K){const z=Math.min(Math.round(F*K),s-1);for(let oe=0;oe<T;++oe){const se=f[J*s*T+z*T+oe];P[H*_*T+K*T+oe]=se}}}return P}function resampleBilinearInterleaved(f,s,d,_,S,T){const F=s/_,M=d/S,P=copyNewSize(f,_,S,T);for(let H=0;H<S;++H){const J=M*H,K=Math.floor(J),z=Math.min(Math.ceil(J),d-1);for(let oe=0;oe<_;++oe){const se=F*oe,ae=se%1,ge=Math.floor(se),pe=Math.min(Math.ceil(se),s-1);for(let he=0;he<T;++he){const ve=f[K*s*T+ge*T+he],be=f[K*s*T+pe*T+he],Re=f[z*s*T+ge*T+he],Fe=f[z*s*T+pe*T+he],ye=lerp$1(lerp$1(ve,be,ae),lerp$1(Re,Fe,ae),J%1);P[H*_*T+oe*T+he]=ye}}}return P}function resampleInterleaved(f,s,d,_,S,T,F="nearest"){switch(F.toLowerCase()){case"nearest":return resampleNearestInterleaved(f,s,d,_,S,T);case"bilinear":case"linear":return resampleBilinearInterleaved(f,s,d,_,S,T);default:throw new Error(`Unsupported resampling method: '${F}'`)}}function sum$3(f,s,d){let _=0;for(let S=s;S<d;++S)_+=f[S];return _}function arrayForType(f,s,d){switch(f){case 1:if(s<=8)return new Uint8Array(d);if(s<=16)return new Uint16Array(d);if(s<=32)return new Uint32Array(d);break;case 2:if(s===8)return new Int8Array(d);if(s===16)return new Int16Array(d);if(s===32)return new Int32Array(d);break;case 3:switch(s){case 16:case 32:return new Float32Array(d);case 64:return new Float64Array(d)}break}throw Error("Unsupported data format/bitsPerSample")}function needsNormalization(f,s){return(f===1||f===2)&&s<=32&&s%8===0?!1:!(f===3&&(s===16||s===32||s===64))}function normalizeArray(f,s,d,_,S,T,F){const M=new DataView(f),P=d===2?F*T:F*T*_,H=d===2?1:_,J=arrayForType(s,S,P),K=parseInt("1".repeat(S),2);if(s===1){let z;d===1?z=_*S:z=S;let oe=T*z;oe&7&&(oe=oe+7&-8);for(let se=0;se<F;++se){const ae=se*oe;for(let ge=0;ge<T;++ge){const pe=ae+ge*H*S;for(let he=0;he<H;++he){const ve=pe+he*S,be=(se*T+ge)*H+he,Re=Math.floor(ve/8),Fe=ve%8;if(Fe+S<=8)J[be]=M.getUint8(Re)>>8-S-Fe&K;else if(Fe+S<=16)J[be]=M.getUint16(Re)>>16-S-Fe&K;else if(Fe+S<=24){const ye=M.getUint16(Re)<<8|M.getUint8(Re+2);J[be]=ye>>24-S-Fe&K}else J[be]=M.getUint32(Re)>>32-S-Fe&K}}}}return J.buffer}class GeoTIFFImage{constructor(s,d,_,S,T,F){this.fileDirectory=s,this.geoKeys=d,this.dataView=_,this.littleEndian=S,this.tiles=T?{}:null,this.isTiled=!s.StripOffsets;const M=s.PlanarConfiguration;if(this.planarConfiguration=typeof M>"u"?1:M,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=F}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(s){return this.isTiled||(s+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-s*this.getTileHeight()}getBytesPerPixel(){let s=0;for(let d=0;d<this.fileDirectory.BitsPerSample.length;++d)s+=this.getSampleByteSize(d);return s}getSampleByteSize(s){if(s>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${s} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[s]/8)}getReaderForSample(s){const d=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[s]:1,_=this.fileDirectory.BitsPerSample[s];switch(d){case 1:if(_<=8)return DataView.prototype.getUint8;if(_<=16)return DataView.prototype.getUint16;if(_<=32)return DataView.prototype.getUint32;break;case 2:if(_<=8)return DataView.prototype.getInt8;if(_<=16)return DataView.prototype.getInt16;if(_<=32)return DataView.prototype.getInt32;break;case 3:switch(_){case 16:return function(S,T){return getFloat16(this,S,T)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(s=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[s]:1}getBitsPerSample(s=0){return this.fileDirectory.BitsPerSample[s]}getArrayForSample(s,d){const _=this.getSampleFormat(s),S=this.getBitsPerSample(s);return arrayForType(_,S,d)}async getTileOrStrip(s,d,_,S,T){const F=Math.ceil(this.getWidth()/this.getTileWidth()),M=Math.ceil(this.getHeight()/this.getTileHeight());let P;const{tiles:H}=this;this.planarConfiguration===1?P=d*F+s:this.planarConfiguration===2&&(P=_*F*M+d*F+s);let J,K;this.isTiled?(J=this.fileDirectory.TileOffsets[P],K=this.fileDirectory.TileByteCounts[P]):(J=this.fileDirectory.StripOffsets[P],K=this.fileDirectory.StripByteCounts[P]);const z=(await this.source.fetch([{offset:J,length:K}],T))[0];let oe;return H===null||!H[P]?(oe=(async()=>{let se=await S.decode(this.fileDirectory,z);const ae=this.getSampleFormat(),ge=this.getBitsPerSample();return needsNormalization(ae,ge)&&(se=normalizeArray(se,ae,this.planarConfiguration,this.getSamplesPerPixel(),ge,this.getTileWidth(),this.getBlockHeight(d))),se})(),H!==null&&(H[P]=oe)):oe=H[P],{x:s,y:d,sample:_,data:await oe}}async _readRaster(s,d,_,S,T,F,M,P,H){const J=this.getTileWidth(),K=this.getTileHeight(),z=this.getWidth(),oe=this.getHeight(),se=Math.max(Math.floor(s[0]/J),0),ae=Math.min(Math.ceil(s[2]/J),Math.ceil(z/J)),ge=Math.max(Math.floor(s[1]/K),0),pe=Math.min(Math.ceil(s[3]/K),Math.ceil(oe/K)),he=s[2]-s[0];let ve=this.getBytesPerPixel();const be=[],Re=[];for(let Ue=0;Ue<d.length;++Ue)this.planarConfiguration===1?be.push(sum$3(this.fileDirectory.BitsPerSample,0,d[Ue])/8):be.push(0),Re.push(this.getReaderForSample(d[Ue]));const Fe=[],{littleEndian:ye}=this;for(let Ue=ge;Ue<pe;++Ue)for(let It=se;It<ae;++It){let St;this.planarConfiguration===1&&(St=this.getTileOrStrip(It,Ue,0,T,H));for(let At=0;At<d.length;++At){const xt=At,Ct=d[At];this.planarConfiguration===2&&(ve=this.getSampleByteSize(Ct),St=this.getTileOrStrip(It,Ue,Ct,T,H));const Nt=St.then(qt=>{const Jn=qt.data,qr=new DataView(Jn),na=this.getBlockHeight(qt.y),qn=qt.y*K,vA=qt.x*J,TA=qn+na,VA=(qt.x+1)*J,mI=Re[xt],jA=Math.min(na,na-(TA-s[3]),oe-qn),aI=Math.min(J,J-(VA-s[2]),z-vA);for(let WA=Math.max(0,s[1]-qn);WA<jA;++WA)for(let KA=Math.max(0,s[0]-vA);KA<aI;++KA){const rA=(WA*J+KA)*ve,ta=mI.call(qr,rA+be[xt],ye);let fa;S?(fa=(WA+qn-s[1])*he*d.length+(KA+vA-s[0])*d.length+xt,_[fa]=ta):(fa=(WA+qn-s[1])*he+KA+vA-s[0],_[xt][fa]=ta)}});Fe.push(Nt)}}if(await Promise.all(Fe),F&&s[2]-s[0]!==F||M&&s[3]-s[1]!==M){let Ue;return S?Ue=resampleInterleaved(_,s[2]-s[0],s[3]-s[1],F,M,d.length,P):Ue=resample$2(_,s[2]-s[0],s[3]-s[1],F,M,P),Ue.width=F,Ue.height=M,Ue}return _.width=F||s[2]-s[0],_.height=M||s[3]-s[1],_}async readRasters({window:s,samples:d=[],interleave:_,pool:S=null,width:T,height:F,resampleMethod:M,fillValue:P,signal:H}={}){const J=s||[0,0,this.getWidth(),this.getHeight()];if(J[0]>J[2]||J[1]>J[3])throw new Error("Invalid subsets");const K=J[2]-J[0],z=J[3]-J[1],oe=K*z,se=this.getSamplesPerPixel();if(!d||!d.length)for(let he=0;he<se;++he)d.push(he);else for(let he=0;he<d.length;++he)if(d[he]>=se)return Promise.reject(new RangeError(`Invalid sample index '${d[he]}'.`));let ae;if(_){const he=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,ve=Math.max.apply(null,this.fileDirectory.BitsPerSample);ae=arrayForType(he,ve,oe*d.length),P&&ae.fill(P)}else{ae=[];for(let he=0;he<d.length;++he){const ve=this.getArrayForSample(d[he],oe);Array.isArray(P)&&he<P.length?ve.fill(P[he]):P&&!Array.isArray(P)&&ve.fill(P),ae.push(ve)}}const ge=S||await getDecoder(this.fileDirectory);return await this._readRaster(J,d,ae,_,ge,T,F,M,H)}async readRGB({window:s,interleave:d=!0,pool:_=null,width:S,height:T,resampleMethod:F,enableAlpha:M=!1,signal:P}={}){const H=s||[0,0,this.getWidth(),this.getHeight()];if(H[0]>H[2]||H[1]>H[3])throw new Error("Invalid subsets");const J=this.fileDirectory.PhotometricInterpretation;if(J===photometricInterpretations.RGB){let pe=[0,1,2];if(this.fileDirectory.ExtraSamples!==ExtraSamplesValues.Unspecified&&M){pe=[];for(let he=0;he<this.fileDirectory.BitsPerSample.length;he+=1)pe.push(he)}return this.readRasters({window:s,interleave:d,samples:pe,pool:_,width:S,height:T,resampleMethod:F,signal:P})}let K;switch(J){case photometricInterpretations.WhiteIsZero:case photometricInterpretations.BlackIsZero:case photometricInterpretations.Palette:K=[0];break;case photometricInterpretations.CMYK:K=[0,1,2,3];break;case photometricInterpretations.YCbCr:case photometricInterpretations.CIELab:K=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const z={window:H,interleave:!0,samples:K,pool:_,width:S,height:T,resampleMethod:F,signal:P},{fileDirectory:oe}=this,se=await this.readRasters(z),ae=2**this.fileDirectory.BitsPerSample[0];let ge;switch(J){case photometricInterpretations.WhiteIsZero:ge=fromWhiteIsZero(se,ae);break;case photometricInterpretations.BlackIsZero:ge=fromBlackIsZero(se,ae);break;case photometricInterpretations.Palette:ge=fromPalette(se,oe.ColorMap);break;case photometricInterpretations.CMYK:ge=fromCMYK(se);break;case photometricInterpretations.YCbCr:ge=fromYCbCr(se);break;case photometricInterpretations.CIELab:ge=fromCIELab(se);break;default:throw new Error("Unsupported photometric interpretation.")}if(!d){const pe=new Uint8Array(ge.length/3),he=new Uint8Array(ge.length/3),ve=new Uint8Array(ge.length/3);for(let be=0,Re=0;be<ge.length;be+=3,++Re)pe[Re]=ge[be],he[Re]=ge[be+1],ve[Re]=ge[be+2];ge=[pe,he,ve]}return ge.width=se.width,ge.height=se.height,ge}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const s=[];for(let d=0;d<this.fileDirectory.ModelTiepoint.length;d+=6)s.push({i:this.fileDirectory.ModelTiepoint[d],j:this.fileDirectory.ModelTiepoint[d+1],k:this.fileDirectory.ModelTiepoint[d+2],x:this.fileDirectory.ModelTiepoint[d+3],y:this.fileDirectory.ModelTiepoint[d+4],z:this.fileDirectory.ModelTiepoint[d+5]});return s}getGDALMetadata(s=null){const d={};if(!this.fileDirectory.GDAL_METADATA)return null;const _=this.fileDirectory.GDAL_METADATA;let S=findTagsByName$1(_,"Item");s===null?S=S.filter(T=>getAttribute$1(T,"sample")===void 0):S=S.filter(T=>Number(getAttribute$1(T,"sample"))===s);for(let T=0;T<S.length;++T){const F=S[T];d[getAttribute$1(F,"name")]=F.inner}return d}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const s=this.fileDirectory.GDAL_NODATA;return Number(s.substring(0,s.length-1))}getOrigin(){const s=this.fileDirectory.ModelTiepoint,d=this.fileDirectory.ModelTransformation;if(s&&s.length===6)return[s[3],s[4],s[5]];if(d)return[d[3],d[7],d[11]];throw new Error("The image does not have an affine transformation.")}getResolution(s=null){const d=this.fileDirectory.ModelPixelScale,_=this.fileDirectory.ModelTransformation;if(d)return[d[0],-d[1],d[2]];if(_)return _[1]===0&&_[4]===0?[_[0],-_[5],_[10]]:[Math.sqrt(_[0]*_[0]+_[4]*_[4]),-Math.sqrt(_[1]*_[1]+_[5]*_[5]),_[10]];if(s){const[S,T,F]=s.getResolution();return[S*s.getWidth()/this.getWidth(),T*s.getHeight()/this.getHeight(),F*s.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(s=!1){const d=this.getHeight(),_=this.getWidth();if(this.fileDirectory.ModelTransformation&&!s){const[S,T,F,M,P,H,J,K]=this.fileDirectory.ModelTransformation,oe=[[0,0],[0,d],[_,0],[_,d]].map(([ge,pe])=>[M+S*ge+T*pe,K+P*ge+H*pe]),se=oe.map(ge=>ge[0]),ae=oe.map(ge=>ge[1]);return[Math.min(...se),Math.min(...ae),Math.max(...se),Math.max(...ae)]}else{const S=this.getOrigin(),T=this.getResolution(),F=S[0],M=S[1],P=F+T[0]*_,H=M+T[1]*d;return[Math.min(F,P),Math.min(M,H),Math.max(F,P),Math.max(M,H)]}}}class DataView64{constructor(s){this._dataView=new DataView(s)}get buffer(){return this._dataView.buffer}getUint64(s,d){const _=this.getUint32(s,d),S=this.getUint32(s+4,d);let T;if(d){if(T=_+2**32*S,!Number.isSafeInteger(T))throw new Error(`${T} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return T}if(T=2**32*_+S,!Number.isSafeInteger(T))throw new Error(`${T} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return T}getInt64(s,d){let _=0;const S=(this._dataView.getUint8(s+(d?7:0))&128)>0;let T=!0;for(let F=0;F<8;F++){let M=this._dataView.getUint8(s+(d?F:7-F));S&&(T?M!==0&&(M=~(M-1)&255,T=!1):M=~M&255),_+=M*256**F}return S&&(_=-_),_}getUint8(s,d){return this._dataView.getUint8(s,d)}getInt8(s,d){return this._dataView.getInt8(s,d)}getUint16(s,d){return this._dataView.getUint16(s,d)}getInt16(s,d){return this._dataView.getInt16(s,d)}getUint32(s,d){return this._dataView.getUint32(s,d)}getInt32(s,d){return this._dataView.getInt32(s,d)}getFloat16(s,d){return getFloat16(this._dataView,s,d)}getFloat32(s,d){return this._dataView.getFloat32(s,d)}getFloat64(s,d){return this._dataView.getFloat64(s,d)}}class DataSlice{constructor(s,d,_,S){this._dataView=new DataView(s),this._sliceOffset=d,this._littleEndian=_,this._bigTiff=S}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(s,d){return this.sliceOffset<=s&&this.sliceTop>=s+d}readUint8(s){return this._dataView.getUint8(s-this._sliceOffset,this._littleEndian)}readInt8(s){return this._dataView.getInt8(s-this._sliceOffset,this._littleEndian)}readUint16(s){return this._dataView.getUint16(s-this._sliceOffset,this._littleEndian)}readInt16(s){return this._dataView.getInt16(s-this._sliceOffset,this._littleEndian)}readUint32(s){return this._dataView.getUint32(s-this._sliceOffset,this._littleEndian)}readInt32(s){return this._dataView.getInt32(s-this._sliceOffset,this._littleEndian)}readFloat32(s){return this._dataView.getFloat32(s-this._sliceOffset,this._littleEndian)}readFloat64(s){return this._dataView.getFloat64(s-this._sliceOffset,this._littleEndian)}readUint64(s){const d=this.readUint32(s),_=this.readUint32(s+4);let S;if(this._littleEndian){if(S=d+2**32*_,!Number.isSafeInteger(S))throw new Error(`${S} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return S}if(S=2**32*d+_,!Number.isSafeInteger(S))throw new Error(`${S} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return S}readInt64(s){let d=0;const _=(this._dataView.getUint8(s+(this._littleEndian?7:0))&128)>0;let S=!0;for(let T=0;T<8;T++){let F=this._dataView.getUint8(s+(this._littleEndian?T:7-T));_&&(S?F!==0&&(F=~(F-1)&255,S=!1):F=~F&255),d+=F*256**T}return _&&(d=-d),d}readOffset(s){return this._bigTiff?this.readUint64(s):this.readUint32(s)}}const CRLFCRLF=`\r
\r
`;function itemsToObject(f){if(typeof Object.fromEntries<"u")return Object.fromEntries(f);const s={};for(const[d,_]of f)s[d.toLowerCase()]=_;return s}function parseHeaders$1(f){const s=f.split(`\r
`).map(d=>{const _=d.split(":").map(S=>S.trim());return _[0]=_[0].toLowerCase(),_});return itemsToObject(s)}function parseContentType(f){const[s,...d]=f.split(";").map(S=>S.trim()),_=d.map(S=>S.split("="));return{type:s,params:itemsToObject(_)}}function parseContentRange(f){let s,d,_;return f&&([,s,d,_]=f.match(/bytes (\d+)-(\d+)\/(\d+)/),s=parseInt(s,10),d=parseInt(d,10),_=parseInt(_,10)),{start:s,end:d,total:_}}function parseByteRanges(f,s){let d=null;const _=new TextDecoder("ascii"),S=[],T=`--${s}`,F=`${T}--`;for(let M=0;M<10;++M)_.decode(new Uint8Array(f,M,T.length))===T&&(d=M);if(d===null)throw new Error("Could not find initial boundary");for(;d<f.byteLength;){const M=_.decode(new Uint8Array(f,d,Math.min(T.length+1024,f.byteLength-d)));if(M.length===0||M.startsWith(F))break;if(!M.startsWith(T))throw new Error("Part does not start with boundary");const P=M.substr(T.length+2);if(P.length===0)break;const H=P.indexOf(CRLFCRLF),J=parseHeaders$1(P.substr(0,H)),{start:K,end:z,total:oe}=parseContentRange(J["content-range"]),se=d+T.length+H+CRLFCRLF.length,ae=parseInt(z,10)+1-parseInt(K,10);S.push({headers:J,data:f.slice(se,se+ae),offset:K,length:ae,fileSize:oe}),d=se+ae+4}return S}class BaseSource{async fetch(s,d=void 0){return Promise.all(s.map(_=>this.fetchSlice(_,d)))}async fetchSlice(s){throw new Error(`fetching of slice ${s} not possible, not implemented`)}get fileSize(){return null}async close(){}}class QuickLRU extends Map{constructor(s={}){if(super(),!(s.maxSize&&s.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof s.maxAge=="number"&&s.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=s.maxSize,this.maxAge=s.maxAge||Number.POSITIVE_INFINITY,this.onEviction=s.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(s){if(typeof this.onEviction=="function")for(const[d,_]of s)this.onEviction(d,_.value)}_deleteIfExpired(s,d){return typeof d.expiry=="number"&&d.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(s,d.value),this.delete(s)):!1}_getOrDeleteIfExpired(s,d){if(this._deleteIfExpired(s,d)===!1)return d.value}_getItemValue(s,d){return d.expiry?this._getOrDeleteIfExpired(s,d):d.value}_peek(s,d){const _=d.get(s);return this._getItemValue(s,_)}_set(s,d){this.cache.set(s,d),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(s,d){this.oldCache.delete(s),this._set(s,d)}*_entriesAscending(){for(const s of this.oldCache){const[d,_]=s;this.cache.has(d)||this._deleteIfExpired(d,_)===!1&&(yield s)}for(const s of this.cache){const[d,_]=s;this._deleteIfExpired(d,_)===!1&&(yield s)}}get(s){if(this.cache.has(s)){const d=this.cache.get(s);return this._getItemValue(s,d)}if(this.oldCache.has(s)){const d=this.oldCache.get(s);if(this._deleteIfExpired(s,d)===!1)return this._moveToRecent(s,d),d.value}}set(s,d,{maxAge:_=this.maxAge}={}){const S=typeof _=="number"&&_!==Number.POSITIVE_INFINITY?Date.now()+_:void 0;return this.cache.has(s)?this.cache.set(s,{value:d,expiry:S}):this._set(s,{value:d,expiry:S}),this}has(s){return this.cache.has(s)?!this._deleteIfExpired(s,this.cache.get(s)):this.oldCache.has(s)?!this._deleteIfExpired(s,this.oldCache.get(s)):!1}peek(s){if(this.cache.has(s))return this._peek(s,this.cache);if(this.oldCache.has(s))return this._peek(s,this.oldCache)}delete(s){const d=this.cache.delete(s);return d&&this._size--,this.oldCache.delete(s)||d}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(s){if(!(s&&s>0))throw new TypeError("`maxSize` must be a number greater than 0");const d=[...this._entriesAscending()],_=d.length-s;_<0?(this.cache=new Map(d),this.oldCache=new Map,this._size=d.length):(_>0&&this._emitEvictions(d.slice(0,_)),this.oldCache=new Map(d.slice(_)),this.cache=new Map,this._size=0),this.maxSize=s}*keys(){for(const[s]of this)yield s}*values(){for(const[,s]of this)yield s}*[Symbol.iterator](){for(const s of this.cache){const[d,_]=s;this._deleteIfExpired(d,_)===!1&&(yield[d,_.value])}for(const s of this.oldCache){const[d,_]=s;this.cache.has(d)||this._deleteIfExpired(d,_)===!1&&(yield[d,_.value])}}*entriesDescending(){let s=[...this.cache];for(let d=s.length-1;d>=0;--d){const _=s[d],[S,T]=_;this._deleteIfExpired(S,T)===!1&&(yield[S,T.value])}s=[...this.oldCache];for(let d=s.length-1;d>=0;--d){const _=s[d],[S,T]=_;this.cache.has(S)||this._deleteIfExpired(S,T)===!1&&(yield[S,T.value])}}*entriesAscending(){for(const[s,d]of this._entriesAscending())yield[s,d.value]}get size(){if(!this._size)return this.oldCache.size;let s=0;for(const d of this.oldCache.keys())this.cache.has(d)||s++;return Math.min(this._size+s,this.maxSize)}entries(){return this.entriesAscending()}forEach(s,d=this){for(const[_,S]of this.entriesAscending())s.call(d,S,_,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function wait(f){return new Promise(s=>setTimeout(s,f))}function zip$1(f,s){const d=Array.isArray(f)?f:Array.from(f),_=Array.isArray(s)?s:Array.from(s);return d.map((S,T)=>[S,_[T]])}class AbortError extends Error{constructor(s){super(s),Error.captureStackTrace&&Error.captureStackTrace(this,AbortError),this.name="AbortError"}}class CustomAggregateError extends Error{constructor(s,d){super(d),this.errors=s,this.message=d,this.name="AggregateError"}}const AggregateError=CustomAggregateError;class Block{constructor(s,d,_=null){this.offset=s,this.length=d,this.data=_}get top(){return this.offset+this.length}}class BlockGroup{constructor(s,d,_){this.offset=s,this.length=d,this.blockIds=_}}class BlockedSource extends BaseSource{constructor(s,{blockSize:d=65536,cacheSize:_=100}={}){super(),this.source=s,this.blockSize=d,this.blockCache=new QuickLRU({maxSize:_,onEviction:(S,T)=>{this.evictedBlocks.set(S,T)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(s,d){const _=[],S=[],T=[];this.evictedBlocks.clear();for(const{offset:z,length:oe}of s){let se=z+oe;const{fileSize:ae}=this;ae!==null&&(se=Math.min(se,ae));const ge=Math.floor(z/this.blockSize)*this.blockSize;for(let pe=ge;pe<se;pe+=this.blockSize){const he=Math.floor(pe/this.blockSize);!this.blockCache.has(he)&&!this.blockRequests.has(he)&&(this.blockIdsToFetch.add(he),S.push(he)),this.blockRequests.has(he)&&_.push(this.blockRequests.get(he)),T.push(he)}}await wait(),this.fetchBlocks(d);const F=[];for(const z of S)this.blockRequests.has(z)&&F.push(this.blockRequests.get(z));await Promise.allSettled(_),await Promise.allSettled(F);const M=[],P=T.filter(z=>this.abortedBlockIds.has(z)||!this.blockCache.has(z));if(P.forEach(z=>this.blockIdsToFetch.add(z)),P.length>0&&d&&!d.aborted){this.fetchBlocks(null);for(const z of P){const oe=this.blockRequests.get(z);if(!oe)throw new Error(`Block ${z} is not in the block requests`);M.push(oe)}await Promise.allSettled(M)}if(d&&d.aborted)throw new AbortError("Request was aborted");const H=T.map(z=>this.blockCache.get(z)||this.evictedBlocks.get(z)),J=H.filter(z=>!z);if(J.length)throw new AggregateError(J,"Request failed");const K=new Map(zip$1(T,H));return this.readSliceData(s,K)}fetchBlocks(s){if(this.blockIdsToFetch.size>0){const d=this.groupBlocks(this.blockIdsToFetch),_=this.source.fetch(d,s);for(let S=0;S<d.length;++S){const T=d[S];for(const F of T.blockIds)this.blockRequests.set(F,(async()=>{try{const M=(await _)[S],P=F*this.blockSize,H=P-M.offset,J=Math.min(H+this.blockSize,M.data.byteLength),K=M.data.slice(H,J),z=new Block(P,K.byteLength,K,F);this.blockCache.set(F,z),this.abortedBlockIds.delete(F)}catch(M){if(M.name==="AbortError")M.signal=s,this.blockCache.delete(F),this.abortedBlockIds.add(F);else throw M}finally{this.blockRequests.delete(F)}})())}this.blockIdsToFetch.clear()}}groupBlocks(s){const d=Array.from(s).sort((F,M)=>F-M);if(d.length===0)return[];let _=[],S=null;const T=[];for(const F of d)S===null||S+1===F?(_.push(F),S=F):(T.push(new BlockGroup(_[0]*this.blockSize,_.length*this.blockSize,_)),_=[F],S=F);return T.push(new BlockGroup(_[0]*this.blockSize,_.length*this.blockSize,_)),T}readSliceData(s,d){return s.map(_=>{let S=_.offset+_.length;this.fileSize!==null&&(S=Math.min(this.fileSize,S));const T=Math.floor(_.offset/this.blockSize),F=Math.floor(S/this.blockSize),M=new ArrayBuffer(_.length),P=new Uint8Array(M);for(let H=T;H<=F;++H){const J=d.get(H),K=J.offset-_.offset,z=J.top-S;let oe=0,se=0,ae;K<0?oe=-K:K>0&&(se=K),z<0?ae=J.length-oe:ae=S-J.offset-oe;const ge=new Uint8Array(J.data,oe,ae);P.set(ge,se)}return M})}}class BaseResponse{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(s){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class BaseClient{constructor(s){this.url=s}async request({headers:s,signal:d}={}){throw new Error("request is not implemented")}}class FetchResponse extends BaseResponse{constructor(s){super(),this.response=s}get status(){return this.response.status}getHeader(s){return this.response.headers.get(s)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class FetchClient extends BaseClient{constructor(s,d){super(s),this.credentials=d}async request({headers:s,signal:d}={}){const _=await fetch(this.url,{headers:s,credentials:this.credentials,signal:d});return new FetchResponse(_)}}class XHRResponse extends BaseResponse{constructor(s,d){super(),this.xhr=s,this.data=d}get status(){return this.xhr.status}getHeader(s){return this.xhr.getResponseHeader(s)}async getData(){return this.data}}class XHRClient extends BaseClient{constructRequest(s,d){return new Promise((_,S)=>{const T=new XMLHttpRequest;T.open("GET",this.url),T.responseType="arraybuffer";for(const[F,M]of Object.entries(s))T.setRequestHeader(F,M);T.onload=()=>{const F=T.response;_(new XHRResponse(T,F))},T.onerror=S,T.onabort=()=>S(new AbortError("Request aborted")),T.send(),d&&(d.aborted&&T.abort(),d.addEventListener("abort",()=>T.abort()))})}async request({headers:s,signal:d}={}){return await this.constructRequest(s,d)}}class HttpResponse extends BaseResponse{constructor(s,d){super(),this.response=s,this.dataPromise=d}get status(){return this.response.statusCode}getHeader(s){return this.response.headers[s]}async getData(){return await this.dataPromise}}class HttpClient extends BaseClient{constructor(s){super(s),this.parsedUrl=zlib.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",zlib)}constructRequest(s,d){return new Promise((_,S)=>{const T=this.httpApi.get({...this.parsedUrl,headers:s},F=>{const M=new Promise(P=>{const H=[];F.on("data",J=>{H.push(J)}),F.on("end",()=>{const J=Buffer.concat(H).buffer;P(J)}),F.on("error",S)});_(new HttpResponse(F,M))});T.on("error",S),d&&(d.aborted&&T.destroy(new AbortError("Request aborted")),d.addEventListener("abort",()=>T.destroy(new AbortError("Request aborted"))))})}async request({headers:s,signal:d}={}){return await this.constructRequest(s,d)}}class RemoteSource extends BaseSource{constructor(s,d,_,S){super(),this.client=s,this.headers=d,this.maxRanges=_,this.allowFullFile=S,this._fileSize=null}async fetch(s,d){return this.maxRanges>=s.length?this.fetchSlices(s,d):(this.maxRanges>0&&s.length>1,Promise.all(s.map(_=>this.fetchSlice(_,d))))}async fetchSlices(s,d){const _=await this.client.request({headers:{...this.headers,Range:`bytes=${s.map(({offset:S,length:T})=>`${S}-${S+T}`).join(",")}`},signal:d});if(_.ok)if(_.status===206){const{type:S,params:T}=parseContentType(_.getHeader("content-type"));if(S==="multipart/byteranges"){const K=parseByteRanges(await _.getData(),T.boundary);return this._fileSize=K[0].fileSize||null,K}const F=await _.getData(),{start:M,end:P,total:H}=parseContentRange(_.getHeader("content-range"));this._fileSize=H||null;const J=[{data:F,offset:M,length:P-M}];if(s.length>1){const K=await Promise.all(s.slice(1).map(z=>this.fetchSlice(z,d)));return J.concat(K)}return J}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const S=await _.getData();return this._fileSize=S.byteLength,[{data:S,offset:0,length:S.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(s,d){const{offset:_,length:S}=s,T=await this.client.request({headers:{...this.headers,Range:`bytes=${_}-${_+S}`},signal:d});if(T.ok)if(T.status===206){const F=await T.getData(),{total:M}=parseContentRange(T.getHeader("content-range"));return this._fileSize=M||null,{data:F,offset:_,length:S}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const F=await T.getData();return this._fileSize=F.byteLength,{data:F,offset:0,length:F.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function maybeWrapInBlockedSource(f,{blockSize:s,cacheSize:d}){return s===null?f:new BlockedSource(f,{blockSize:s,cacheSize:d})}function makeFetchSource(f,{headers:s={},credentials:d,maxRanges:_=0,allowFullFile:S=!1,...T}={}){const F=new FetchClient(f,d),M=new RemoteSource(F,s,_,S);return maybeWrapInBlockedSource(M,T)}function makeXHRSource(f,{headers:s={},maxRanges:d=0,allowFullFile:_=!1,...S}={}){const T=new XHRClient(f),F=new RemoteSource(T,s,d,_);return maybeWrapInBlockedSource(F,S)}function makeHttpSource(f,{headers:s={},maxRanges:d=0,allowFullFile:_=!1,...S}={}){const T=new HttpClient(f),F=new RemoteSource(T,s,d,_);return maybeWrapInBlockedSource(F,S)}function makeRemoteSource(f,{forceXHR:s=!1,...d}={}){return typeof fetch=="function"&&!s?makeFetchSource(f,d):typeof XMLHttpRequest<"u"?makeXHRSource(f,d):makeHttpSource(f,d)}class FileReaderSource extends BaseSource{constructor(s){super(),this.file=s}async fetchSlice(s,d){return new Promise((_,S)=>{const T=this.file.slice(s.offset,s.offset+s.length),F=new FileReader;F.onload=M=>_(M.target.result),F.onerror=S,F.onabort=S,F.readAsArrayBuffer(T),d&&d.addEventListener("abort",()=>F.abort())})}}function makeFileReaderSource(f){return new FileReaderSource(f)}function closeAsync(f){return new Promise((s,d)=>{zlib.close(f,_=>{_?d(_):s()})})}function openAsync(f,s,d=void 0){return new Promise((_,S)=>{zlib.open(f,s,d,(T,F)=>{T?S(T):_(F)})})}function readAsync(...f){return new Promise((s,d)=>{zlib.read(...f,(_,S,T)=>{_?d(_):s({bytesRead:S,buffer:T})})})}class FileSource extends BaseSource{constructor(s){super(),this.path=s,this.openRequest=openAsync(s,"r")}async fetchSlice(s){const d=await this.openRequest,{buffer:_}=await readAsync(d,Buffer.alloc(s.length),0,s.length,s.offset);return _.buffer}async close(){const s=await this.openRequest;await closeAsync(s)}}function makeFileSource(f){return new FileSource(f)}function decodeRowAcc(f,s){let d=f.length-s,_=0;do{for(let S=s;S>0;S--)f[_+s]+=f[_],_++;d-=s}while(d>0)}function decodeRowFloatingPoint(f,s,d){let _=0,S=f.length;const T=S/d;for(;S>s;){for(let M=s;M>0;--M)f[_+s]+=f[_],++_;S-=s}const F=f.slice();for(let M=0;M<T;++M)for(let P=0;P<d;++P)f[d*M+P]=F[(d-P-1)*T+M]}function applyPredictor(f,s,d,_,S,T){if(!s||s===1)return f;for(let P=0;P<S.length;++P){if(S[P]%8!==0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(S[P]!==S[0])throw new Error("When decoding with predictor, all samples must have the same size.")}const F=S[0]/8,M=T===2?1:S.length;for(let P=0;P<_&&!(P*M*d*F>=f.byteLength);++P){let H;if(s===2){switch(S[0]){case 8:H=new Uint8Array(f,P*M*d*F,M*d*F);break;case 16:H=new Uint16Array(f,P*M*d*F,M*d*F/2);break;case 32:H=new Uint32Array(f,P*M*d*F,M*d*F/4);break;default:throw new Error(`Predictor 2 not allowed with ${S[0]} bits per sample.`)}decodeRowAcc(H,M)}else s===3&&(H=new Uint8Array(f,P*M*d*F,M*d*F),decodeRowFloatingPoint(H,M,F))}return f}class BaseDecoder{async decode(s,d){const _=await this.decodeBlock(d),S=s.Predictor||1;if(S!==1){const T=!s.StripOffsets,F=T?s.TileWidth:s.ImageWidth,M=T?s.TileLength:s.RowsPerStrip||s.ImageLength;return applyPredictor(_,S,F,M,s.BitsPerSample,s.PlanarConfiguration)}return _}}function getFieldTypeLength(f){switch(f){case fieldTypes.BYTE:case fieldTypes.ASCII:case fieldTypes.SBYTE:case fieldTypes.UNDEFINED:return 1;case fieldTypes.SHORT:case fieldTypes.SSHORT:return 2;case fieldTypes.LONG:case fieldTypes.SLONG:case fieldTypes.FLOAT:case fieldTypes.IFD:return 4;case fieldTypes.RATIONAL:case fieldTypes.SRATIONAL:case fieldTypes.DOUBLE:case fieldTypes.LONG8:case fieldTypes.SLONG8:case fieldTypes.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${f}`)}}function parseGeoKeyDirectory(f){const s=f.GeoKeyDirectory;if(!s)return null;const d={};for(let _=4;_<=s[3]*4;_+=4){const S=geoKeyNames[s[_]],T=s[_+1]?fieldTagNames[s[_+1]]:null,F=s[_+2],M=s[_+3];let P=null;if(!T)P=M;else{if(P=f[T],typeof P>"u"||P===null)throw new Error(`Could not get value of geoKey '${S}'.`);typeof P=="string"?P=P.substring(M,M+F-1):P.subarray&&(P=P.subarray(M,M+F),F===1&&(P=P[0]))}d[S]=P}return d}function getValues(f,s,d,_){let S=null,T=null;const F=getFieldTypeLength(s);switch(s){case fieldTypes.BYTE:case fieldTypes.ASCII:case fieldTypes.UNDEFINED:S=new Uint8Array(d),T=f.readUint8;break;case fieldTypes.SBYTE:S=new Int8Array(d),T=f.readInt8;break;case fieldTypes.SHORT:S=new Uint16Array(d),T=f.readUint16;break;case fieldTypes.SSHORT:S=new Int16Array(d),T=f.readInt16;break;case fieldTypes.LONG:case fieldTypes.IFD:S=new Uint32Array(d),T=f.readUint32;break;case fieldTypes.SLONG:S=new Int32Array(d),T=f.readInt32;break;case fieldTypes.LONG8:case fieldTypes.IFD8:S=new Array(d),T=f.readUint64;break;case fieldTypes.SLONG8:S=new Array(d),T=f.readInt64;break;case fieldTypes.RATIONAL:S=new Uint32Array(d*2),T=f.readUint32;break;case fieldTypes.SRATIONAL:S=new Int32Array(d*2),T=f.readInt32;break;case fieldTypes.FLOAT:S=new Float32Array(d),T=f.readFloat32;break;case fieldTypes.DOUBLE:S=new Float64Array(d),T=f.readFloat64;break;default:throw new RangeError(`Invalid field type: ${s}`)}if(s===fieldTypes.RATIONAL||s===fieldTypes.SRATIONAL)for(let M=0;M<d;M+=2)S[M]=T.call(f,_+M*F),S[M+1]=T.call(f,_+(M*F+4));else for(let M=0;M<d;++M)S[M]=T.call(f,_+M*F);return s===fieldTypes.ASCII?new TextDecoder("utf-8").decode(S):S}class ImageFileDirectory{constructor(s,d,_){this.fileDirectory=s,this.geoKeyDirectory=d,this.nextIFDByteOffset=_}}class GeoTIFFImageIndexError extends Error{constructor(s){super(`No image at index ${s}`),this.index=s}}class GeoTIFFBase{async readRasters(s={}){const{window:d,width:_,height:S}=s;let{resX:T,resY:F,bbox:M}=s;const P=await this.getImage();let H=P;const J=await this.getImageCount(),K=P.getBoundingBox();if(d&&M)throw new Error('Both "bbox" and "window" passed.');if(_||S){if(d){const[se,ae]=P.getOrigin(),[ge,pe]=P.getResolution();M=[se+d[0]*ge,ae+d[1]*pe,se+d[2]*ge,ae+d[3]*pe]}const oe=M||K;if(_){if(T)throw new Error("Both width and resX passed");T=(oe[2]-oe[0])/_}if(S){if(F)throw new Error("Both width and resY passed");F=(oe[3]-oe[1])/S}}if(T||F){const oe=[];for(let se=0;se<J;++se){const ae=await this.getImage(se),{SubfileType:ge,NewSubfileType:pe}=ae.fileDirectory;(se===0||ge===2||pe&1)&&oe.push(ae)}oe.sort((se,ae)=>se.getWidth()-ae.getWidth());for(let se=0;se<oe.length;++se){const ae=oe[se],ge=(K[2]-K[0])/ae.getWidth(),pe=(K[3]-K[1])/ae.getHeight();if(H=ae,T&&T>ge||F&&F>pe)break}}let z=d;if(M){const[oe,se]=P.getOrigin(),[ae,ge]=H.getResolution(P);z=[Math.round((M[0]-oe)/ae),Math.round((M[1]-se)/ge),Math.round((M[2]-oe)/ae),Math.round((M[3]-se)/ge)],z=[Math.min(z[0],z[2]),Math.min(z[1],z[3]),Math.max(z[0],z[2]),Math.max(z[1],z[3])]}return H.readRasters({...s,window:z})}}class GeoTIFF extends GeoTIFFBase{constructor(s,d,_,S,T={}){super(),this.source=s,this.littleEndian=d,this.bigTiff=_,this.firstIFDOffset=S,this.cache=T.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(s,d){const _=this.bigTiff?4048:1024;return new DataSlice((await this.source.fetch([{offset:s,length:typeof d<"u"?d:_}]))[0],s,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(s){const d=this.bigTiff?20:12,_=this.bigTiff?8:2;let S=await this.getSlice(s);const T=this.bigTiff?S.readUint64(s):S.readUint16(s),F=T*d+(this.bigTiff?16:6);S.covers(s,F)||(S=await this.getSlice(s,F));const M={};let P=s+(this.bigTiff?8:2);for(let K=0;K<T;P+=d,++K){const z=S.readUint16(P),oe=S.readUint16(P+2),se=this.bigTiff?S.readUint64(P+4):S.readUint32(P+4);let ae,ge;const pe=getFieldTypeLength(oe),he=P+(this.bigTiff?12:8);if(pe*se<=(this.bigTiff?8:4))ae=getValues(S,oe,se,he);else{const ve=S.readOffset(he),be=getFieldTypeLength(oe)*se;if(S.covers(ve,be))ae=getValues(S,oe,se,ve);else{const Re=await this.getSlice(ve,be);ae=getValues(Re,oe,se,ve)}}se===1&&arrayFields.indexOf(z)===-1&&!(oe===fieldTypes.RATIONAL||oe===fieldTypes.SRATIONAL)?ge=ae[0]:ge=ae,M[fieldTagNames[z]]=ge}const H=parseGeoKeyDirectory(M),J=S.readOffset(s+_+d*T);return new ImageFileDirectory(M,H,J)}async requestIFD(s){if(this.ifdRequests[s])return this.ifdRequests[s];if(s===0)return this.ifdRequests[s]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[s];if(!this.ifdRequests[s-1])try{this.ifdRequests[s-1]=this.requestIFD(s-1)}catch(d){throw d instanceof GeoTIFFImageIndexError?new GeoTIFFImageIndexError(s):d}return this.ifdRequests[s]=(async()=>{const d=await this.ifdRequests[s-1];if(d.nextIFDByteOffset===0)throw new GeoTIFFImageIndexError(s);return this.parseFileDirectoryAt(d.nextIFDByteOffset)})(),this.ifdRequests[s]}async getImage(s=0){const d=await this.requestIFD(s);return new GeoTIFFImage(d.fileDirectory,d.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let s=0,d=!0;for(;d;)try{await this.requestIFD(s),++s}catch(_){if(_ instanceof GeoTIFFImageIndexError)d=!1;else throw _}return s}async getGhostValues(){const s=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const d="GDAL_STRUCTURAL_METADATA_SIZE=",_=d.length+100;let S=await this.getSlice(s,_);if(d===getValues(S,fieldTypes.ASCII,d.length,s)){const F=getValues(S,fieldTypes.ASCII,_,s).split(`
`)[0],M=Number(F.split("=")[1].split(" ")[0])+F.length;M>_&&(S=await this.getSlice(s,M));const P=getValues(S,fieldTypes.ASCII,M,s);this.ghostValues={},P.split(`
`).filter(H=>H.length>0).map(H=>H.split("=")).forEach(([H,J])=>{this.ghostValues[H]=J})}return this.ghostValues}static async fromSource(s,d,_){const S=(await s.fetch([{offset:0,length:1024}],_))[0],T=new DataView64(S),F=T.getUint16(0,0);let M;if(F===18761)M=!0;else if(F===19789)M=!1;else throw new TypeError("Invalid byte order value.");const P=T.getUint16(2,M);let H;if(P===42)H=!1;else if(P===43){if(H=!0,T.getUint16(4,M)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const J=H?T.getUint64(8,M):T.getUint32(4,M);return new GeoTIFF(s,M,H,J,d)}close(){return typeof this.source.close=="function"?this.source.close():!1}}async function fromUrl(f,s={},d){return GeoTIFF.fromSource(makeRemoteSource(f,s),d)}async function fromFile(f,s){return GeoTIFF.fromSource(makeFileSource(f),s)}async function fromBlob(f,s){return GeoTIFF.fromSource(makeFileReaderSource(f),s)}let A$1,I=null;function g(){return I!==null&&I.buffer===A$1.memory.buffer||(I=new Uint8Array(A$1.memory.buffer)),I}let B$1=0,Q$1=null;function C(){return Q$1!==null&&Q$1.buffer===A$1.memory.buffer||(Q$1=new Int32Array(A$1.memory.buffer)),Q$1}async function E(f){f===void 0&&(f="".replace(/\.js$/,"_bg.wasm")),(typeof f=="string"||typeof Request=="function"&&f instanceof Request||typeof URL=="function"&&f instanceof URL)&&(f=fetch(f));const{instance:s,module:d}=await async function(_,S){if(typeof Response=="function"&&_ instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(_,S)}catch(F){if(_.headers.get("Content-Type")=="application/wasm")throw F;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",F)}const T=await _.arrayBuffer();return await WebAssembly.instantiate(T,S)}{const T=await WebAssembly.instantiate(_,S);return T instanceof WebAssembly.Instance?{instance:T,module:_}:T}}(await f,{});return A$1=s.exports,E.__wbindgen_wasm_module=d,A$1}var D$2=Object.freeze({__proto__:null,decompress:function(f,s){try{const H=A$1.__wbindgen_add_to_stack_pointer(-16);var d=function(J,K){const z=K(1*J.length);return g().set(J,z/1),B$1=J.length,z}(f,A$1.__wbindgen_malloc),_=B$1;A$1.decompress(H,d,_,s);var S=C()[H/4+0],T=C()[H/4+1],F=(M=S,P=T,g().subarray(M/1,M/1+P)).slice();return A$1.__wbindgen_free(S,1*T),F}finally{A$1.__wbindgen_add_to_stack_pointer(16)}var M,P},default:E});const i=[62,0,0,0,63,52,53,54,55,56,57,58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,0,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function w(f){return i[f-43]}const G$1=function(f){let s,d=f.endsWith("==")?2:f.endsWith("=")?1:0,_=f.length,S=new Uint8Array(_/4*3);for(let T=0,F=0;T<_;T+=4,F+=3)s=w(f.charCodeAt(T))<<18|w(f.charCodeAt(T+1))<<12|w(f.charCodeAt(T+2))<<6|w(f.charCodeAt(T+3)),S[F]=s>>16,S[F+1]=s>>8&255,S[F+2]=255&s;return S.subarray(0,S.length-d)}("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NwMAIANBEGokAA8LIARBCEHYhcAAEDcACyACQQhByIXAABA3AAuqAgEDfyMAQYABayIEJAACQAJAAn8CQCABKAIAIgNBEHFFBEAgACgCACECIANBIHENASACrSABEBUMAgsgACgCACECQQAhAANAIAAgBGpB/wBqIAJBD3EiA0EwciADQdcAaiADQQpJGzoAACAAQX9qIQAgAkEEdiICDQALIABBgAFqIgJBgQFPDQIgAUGkjsAAQQIgACAEakGAAWpBACAAaxAIDAELQQAhAANAIAAgBGpB/wBqIAJBD3EiA0EwciADQTdqIANBCkkbOgAAIABBf2ohACACQQR2IgINAAsgAEGAAWoiAkGBAU8NAiABQaSOwABBAiAAIARqQYABakEAIABrEAgLIARBgAFqJAAPCyACQYABQZSOwAAQOQALIAJBgAFBlI7AABA5AAuxAgEEfyMAQUBqIgIkACABKAIEIgNFBEAgAUEEaiEDIAEoAgAhBCACQQA2AiAgAkIBNwMYIAIgAkEYajYCJCACQThqIARBEGopAgA3AwAgAkEwaiAEQQhqKQIANwMAIAIgBCkCADcDKCACQSRqQdiJwAAgAkEoahAJGiACQRBqIgQgAigCIDYCACACIAIpAxg3AwgCQCABKAIEIgVFDQAgAUEIaigCAEUNACAFEAQLIAMgAikDCDcCACADQQhqIAQoAgA2AgAgAygCACEDCyABQQE2AgQgAUEMaigCACEEIAFBCGoiASgCACEFIAFCADcCAEEMQQQQWSIBRQRAQQxBBBBjAAsgASAENgIIIAEgBTYCBCABIAM2AgAgAEGQi8AANgIEIAAgATYCACACQUBrJAAL/AEBAn8jAEEQayICJAAgACgCACACQQA2AgwCfwJAAkAgAUGAAU8EQCABQYAQSQ0BIAJBDGohACABQYCABE8NAiACIAFBP3FBgAFyOgAOIAIgAUEMdkHgAXI6AAwgAiABQQZ2QT9xQYABcjoADUEDDAMLIAIgAToADCACQQxqIQBBAQwCCyACIAFBP3FBgAFyOgANIAIgAUEGdkHAAXI6AAwgAkEMaiEAQQIMAQsgAiABQT9xQYABcjoADyACIAFBEnZB8AFyOgAMIAIgAUEGdkE/cUGAAXI6AA4gAiABQQx2QT9xQYABcjoADUEECyEBIAAgARALIAJBEGokAAv5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QSxqQQI2AgAgAUE8akEhNgIAIAFCAjcCHCABQayMwAA2AhggAUEdNgI0IAEgAUEwajYCKCABIAFBEGo2AjggASABQQhqNgIwIAFBGGpB8IDAABBRAAtxAQN/IwBBIGsiAiQAAkAgACABEBkNACABQRxqKAIAIQMgASgCGCACQRxqQQA2AgAgAkHwi8AANgIYIAJCATcCDCACQfSLwAA2AgggAyACQQhqEAkNACAAQQRqIAEQGSACQSBqJAAPCyACQSBqJABBAQswAQF/AkACQEGAwABBAhBZIgENAQwAC0GAwABBAhBjAAsgACABNgIAIABBgCA2AgQLewECfwJAAkAgACgCBCIBBEAgACgCDCICIAFPDQEgACgCACIBIAJqIAEtAAA6AAAgAEEANgIIIAAgACgCDEEBajYCDCAAKAIERQ0CIAAoAgAtAAAPC0EAQQBBiIbAABA2AAsgAiABQZiGwAAQNgALQQBBAEGohsAAEDYAC2gBAn8gACAALQBGIgFBAWoiAjoACiAAQQEgAUEPcXRBAmoiATsBQCAAQX8gAkEPcXRBf3M7AQggAEEYaigCACABQf//A3EiAU8EQCAAIAE2AhgLIABBJGooAgAgAU8EQCAAIAE2AiQLC1ABAX8gAEEUaigCACIBRSABQQJ0RXJFBEAgACgCEBAECyAAQSBqKAIAIgFFIAFBAXRFckUEQCAAKAIcEAQLIABBLGooAgAEQCAAKAIoEAQLC2wBAX8jAEEwayIDJAAgAyABNgIEIAMgADYCACADQRxqQQI2AgAgA0EsakEcNgIAIANCAjcCDCADQYCNwAA2AgggA0EcNgIkIAMgA0EgajYCGCADIAM2AiggAyADQQRqNgIgIANBCGogAhBRAAtsAQF/IwBBMGsiAyQAIAMgATYCBCADIAA2AgAgA0EcakECNgIAIANBLGpBHDYCACADQgI3AgwgA0HMkcAANgIIIANBHDYCJCADIANBIGo2AhggAyADQQRqNgIoIAMgAzYCICADQQhqIAIQUQALbAEBfyMAQTBrIgMkACADIAE2AgQgAyAANgIAIANBHGpBAjYCACADQSxqQRw2AgAgA0ICNwIMIANBgJLAADYCCCADQRw2AiQgAyADQSBqNgIYIAMgA0EEajYCKCADIAM2AiAgA0EIaiACEFEAC2wBAX8jAEEwayIDJAAgAyABNgIEIAMgADYCACADQRxqQQI2AgAgA0EsakEcNgIAIANCAjcCDCADQayRwAA2AgggA0EcNgIkIAMgA0EgajYCGCADIANBBGo2AiggAyADNgIgIANBCGogAhBRAAtcAQF/IwBBEGsiAyQAAkAgACgCBCABayACTwRAIANBADYCAAwBCyADIAAgASACEBYgAygCAEEBRw0AIANBCGooAgAiAARAIAMoAgQgABBjAAsQXQALIANBEGokAAtaAQF/IwBBEGsiAiQAAkAgACgCBCABa0EBTwRAIAJBADYCAAwBCyACIAAgARAeIAIoAgBBAUcNACACQQhqKAIAIgAEQCACKAIEIAAQYwALEF0ACyACQRBqJAALWgEBfyMAQRBrIgIkAAJAIAAoAgQgAWtBAU8EQCACQQA2AgAMAQsgAiAAIAEQHSACKAIAQQFHDQAgAkEIaigCACIABEAgAigCBCAAEGMACxBdAAsgAkEQaiQAC1kBAX8jAEEgayICJAAgAiAAKAIANgIEIAJBGGogAUEQaikCADcDACACQRBqIAFBCGopAgA3AwAgAiABKQIANwMIIAJBBGpB2InAACACQQhqEAkgAkEgaiQAC0YAAkBBCCACSQRAAn9BCCACSQRAIAIgAxAQDAELIAMQAAsiAg0BQQAPCyAAIAMQCg8LIAIgACADIAEgASADSxsQSyAAEAQLWQEBfyMAQSBrIgIkACACIAAoAgA2AgQgAkEYaiABQRBqKQIANwMAIAJBEGogAUEIaikCADcDACACIAEpAgA3AwggAkEEakHwj8AAIAJBCGoQCSACQSBqJAALWQACQAJAAkAgAUF/SgRAAkAgAgRAIAENAQwECyABRQ0DIAFBARBZIgINBAwCCyABEEciAkUNAQwDCxBdAAsgAUEBEGMAC0EBIQILIAAgATYCBCAAIAI2AgALVgEBfyMAQSBrIgIkACACIAA2AgQgAkEYaiABQRBqKQIANwMAIAJBEGogAUEIaikCADcDACACIAEpAgA3AwggAkEEakHwj8AAIAJBCGoQCSACQSBqJAALWQEDfwJAIAEoAgwiAiABKAIIIgNPBEAgASgCBCIEIAJJDQEgASgCACEBIAAgAiADazYCBCAAIAEgA2o2AgAPCyADIAJB2IbAABA4AAsgAiAEQdiGwAAQNwALVQEBfyAAQRBqIAAt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");let o;async function N(f,s){o||(o=await(async()=>(await E(G$1),D$2))());const d=o.decompress(f,s);if(d.length===0)throw Error("Failed to decode with LZW decoder.");return d}function quickselect(f,s,d,_,S){quickselectStep(f,s,d||0,_||f.length-1,defaultCompare)}function quickselectStep(f,s,d,_,S){for(;_>d;){if(_-d>600){var T=_-d+1,F=s-d+1,M=Math.log(T),P=.5*Math.exp(2*M/3),H=.5*Math.sqrt(M*P*(T-P)/T)*(F-T/2<0?-1:1),J=Math.max(d,Math.floor(s-F*P/T+H)),K=Math.min(_,Math.floor(s+(T-F)*P/T+H));quickselectStep(f,s,J,K,S)}var z=f[s],oe=d,se=_;for(swap(f,d,s),S(f[_],z)>0&&swap(f,d,_);oe<se;){for(swap(f,oe,se),oe++,se--;S(f[oe],z)<0;)oe++;for(;S(f[se],z)>0;)se--}S(f[d],z)===0?swap(f,d,se):(se++,swap(f,se,_)),se<=s&&(d=se+1),s<=se&&(_=se-1)}}function swap(f,s,d){var _=f[s];f[s]=f[d],f[d]=_}function defaultCompare(f,s){return f<s?-1:f>s?1:0}var util;(function(f){f.assertEqual=S=>S;function s(S){}f.assertIs=s;function d(S){throw new Error}f.assertNever=d,f.arrayToEnum=S=>{const T={};for(const F of S)T[F]=F;return T},f.getValidEnumValues=S=>{const T=f.objectKeys(S).filter(M=>typeof S[S[M]]!="number"),F={};for(const M of T)F[M]=S[M];return f.objectValues(F)},f.objectValues=S=>f.objectKeys(S).map(function(T){return S[T]}),f.objectKeys=typeof Object.keys=="function"?S=>Object.keys(S):S=>{const T=[];for(const F in S)Object.prototype.hasOwnProperty.call(S,F)&&T.push(F);return T},f.find=(S,T)=>{for(const F of S)if(T(F))return F},f.isInteger=typeof Number.isInteger=="function"?S=>Number.isInteger(S):S=>typeof S=="number"&&isFinite(S)&&Math.floor(S)===S;function _(S,T=" | "){return S.map(F=>typeof F=="string"?`'${F}'`:F).join(T)}f.joinValues=_,f.jsonStringifyReplacer=(S,T)=>typeof T=="bigint"?T.toString():T})(util||(util={}));var objectUtil;(function(f){f.mergeShapes=(s,d)=>({...s,...d})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=f=>{switch(typeof f){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(f)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(f)?ZodParsedType.array:f===null?ZodParsedType.null:f.then&&typeof f.then=="function"&&f.catch&&typeof f.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&f instanceof Map?ZodParsedType.map:typeof Set<"u"&&f instanceof Set?ZodParsedType.set:typeof Date<"u"&&f instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ZodError extends Error{constructor(s){super(),this.issues=[],this.addIssue=_=>{this.issues=[...this.issues,_]},this.addIssues=(_=[])=>{this.issues=[...this.issues,..._]};const d=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,d):this.__proto__=d,this.name="ZodError",this.issues=s}get errors(){return this.issues}format(s){const d=s||function(T){return T.message},_={_errors:[]},S=T=>{for(const F of T.issues)if(F.code==="invalid_union")F.unionErrors.map(S);else if(F.code==="invalid_return_type")S(F.returnTypeError);else if(F.code==="invalid_arguments")S(F.argumentsError);else if(F.path.length===0)_._errors.push(d(F));else{let M=_,P=0;for(;P<F.path.length;){const H=F.path[P];P===F.path.length-1?(M[H]=M[H]||{_errors:[]},M[H]._errors.push(d(F))):M[H]=M[H]||{_errors:[]},M=M[H],P++}}};return S(this),_}static assert(s){if(!(s instanceof ZodError))throw new Error(`Not a ZodError: ${s}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=d=>d.message){const d={},_=[];for(const S of this.issues)S.path.length>0?(d[S.path[0]]=d[S.path[0]]||[],d[S.path[0]].push(s(S))):_.push(s(S));return{formErrors:_,fieldErrors:d}}get formErrors(){return this.flatten()}}ZodError.create=f=>new ZodError(f);const errorMap=(f,s)=>{let d;switch(f.code){case ZodIssueCode.invalid_type:f.received===ZodParsedType.undefined?d="Required":d=`Expected ${f.expected}, received ${f.received}`;break;case ZodIssueCode.invalid_literal:d=`Invalid literal value, expected ${JSON.stringify(f.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:d=`Unrecognized key(s) in object: ${util.joinValues(f.keys,", ")}`;break;case ZodIssueCode.invalid_union:d="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:d=`Invalid discriminator value. Expected ${util.joinValues(f.options)}`;break;case ZodIssueCode.invalid_enum_value:d=`Invalid enum value. Expected ${util.joinValues(f.options)}, received '${f.received}'`;break;case ZodIssueCode.invalid_arguments:d="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:d="Invalid function return type";break;case ZodIssueCode.invalid_date:d="Invalid date";break;case ZodIssueCode.invalid_string:typeof f.validation=="object"?"includes"in f.validation?(d=`Invalid input: must include "${f.validation.includes}"`,typeof f.validation.position=="number"&&(d=`${d} at one or more positions greater than or equal to ${f.validation.position}`)):"startsWith"in f.validation?d=`Invalid input: must start with "${f.validation.startsWith}"`:"endsWith"in f.validation?d=`Invalid input: must end with "${f.validation.endsWith}"`:util.assertNever(f.validation):f.validation!=="regex"?d=`Invalid ${f.validation}`:d="Invalid";break;case ZodIssueCode.too_small:f.type==="array"?d=`Array must contain ${f.exact?"exactly":f.inclusive?"at least":"more than"} ${f.minimum} element(s)`:f.type==="string"?d=`String must contain ${f.exact?"exactly":f.inclusive?"at least":"over"} ${f.minimum} character(s)`:f.type==="number"?d=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`:f.type==="date"?d=`Date must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(f.minimum))}`:d="Invalid input";break;case ZodIssueCode.too_big:f.type==="array"?d=`Array must contain ${f.exact?"exactly":f.inclusive?"at most":"less than"} ${f.maximum} element(s)`:f.type==="string"?d=`String must contain ${f.exact?"exactly":f.inclusive?"at most":"under"} ${f.maximum} character(s)`:f.type==="number"?d=`Number must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`:f.type==="bigint"?d=`BigInt must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`:f.type==="date"?d=`Date must be ${f.exact?"exactly":f.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(f.maximum))}`:d="Invalid input";break;case ZodIssueCode.custom:d="Invalid input";break;case ZodIssueCode.invalid_intersection_types:d="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:d=`Number must be a multiple of ${f.multipleOf}`;break;case ZodIssueCode.not_finite:d="Number must be finite";break;default:d=s.defaultError,util.assertNever(f)}return{message:d}};let overrideErrorMap=errorMap;function getErrorMap(){return overrideErrorMap}const makeIssue=f=>{const{data:s,path:d,errorMaps:_,issueData:S}=f,T=[...d,...S.path||[]],F={...S,path:T};if(S.message!==void 0)return{...S,path:T,message:S.message};let M="";const P=_.filter(H=>!!H).slice().reverse();for(const H of P)M=H(F,{data:s,defaultError:M}).message;return{...S,path:T,message:M}};function addIssueToContext(f,s){const d=getErrorMap(),_=makeIssue({issueData:s,data:f.data,path:f.path,errorMaps:[f.common.contextualErrorMap,f.schemaErrorMap,d,d===errorMap?void 0:errorMap].filter(S=>!!S)});f.common.issues.push(_)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,d){const _=[];for(const S of d){if(S.status==="aborted")return INVALID$1;S.status==="dirty"&&s.dirty(),_.push(S.value)}return{status:s.value,value:_}}static async mergeObjectAsync(s,d){const _=[];for(const S of d){const T=await S.key,F=await S.value;_.push({key:T,value:F})}return ParseStatus.mergeObjectSync(s,_)}static mergeObjectSync(s,d){const _={};for(const S of d){const{key:T,value:F}=S;if(T.status==="aborted"||F.status==="aborted")return INVALID$1;T.status==="dirty"&&s.dirty(),F.status==="dirty"&&s.dirty(),T.value!=="__proto__"&&(typeof F.value<"u"||S.alwaysSet)&&(_[T.value]=F.value)}return{status:s.value,value:_}}}const INVALID$1=Object.freeze({status:"aborted"}),DIRTY=f=>({status:"dirty",value:f}),OK=f=>({status:"valid",value:f}),isAborted=f=>f.status==="aborted",isDirty=f=>f.status==="dirty",isValid=f=>f.status==="valid",isAsync=f=>typeof Promise<"u"&&f instanceof Promise;function __classPrivateFieldGet(f,s,d,_){if(typeof s=="function"?f!==s||!_:!s.has(f))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s.get(f)}function __classPrivateFieldSet(f,s,d,_,S){if(typeof s=="function"?f!==s||!S:!s.has(f))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s.set(f,d),d}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(f){f.errToObj=s=>typeof s=="string"?{message:s}:s||{},f.toString=s=>typeof s=="string"?s:s==null?void 0:s.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(s,d,_,S){this._cachedPath=[],this.parent=s,this.data=d,this._path=_,this._key=S}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(f,s)=>{if(isValid(s))return{success:!0,data:s.value};if(!f.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const d=new ZodError(f.common.issues);return this._error=d,this._error}}};function processCreateParams(f){if(!f)return{};const{errorMap:s,invalid_type_error:d,required_error:_,description:S}=f;if(s&&(d||_))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:S}:{errorMap:(F,M)=>{var P,H;const{message:J}=f;return F.code==="invalid_enum_value"?{message:J??M.defaultError}:typeof M.data>"u"?{message:(P=J??_)!==null&&P!==void 0?P:M.defaultError}:F.code!=="invalid_type"?{message:M.defaultError}:{message:(H=J??d)!==null&&H!==void 0?H:M.defaultError}},description:S}}class ZodType{constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(s){return getParsedType(s.data)}_getOrReturnCtx(s,d){return d||{common:s.parent.common,data:s.data,parsedType:getParsedType(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new ParseStatus,ctx:{common:s.parent.common,data:s.data,parsedType:getParsedType(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const d=this._parse(s);if(isAsync(d))throw new Error("Synchronous parse encountered promise.");return d}_parseAsync(s){const d=this._parse(s);return Promise.resolve(d)}parse(s,d){const _=this.safeParse(s,d);if(_.success)return _.data;throw _.error}safeParse(s,d){var _;const S={common:{issues:[],async:(_=d==null?void 0:d.async)!==null&&_!==void 0?_:!1,contextualErrorMap:d==null?void 0:d.errorMap},path:(d==null?void 0:d.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:getParsedType(s)},T=this._parseSync({data:s,path:S.path,parent:S});return handleResult(S,T)}async parseAsync(s,d){const _=await this.safeParseAsync(s,d);if(_.success)return _.data;throw _.error}async safeParseAsync(s,d){const _={common:{issues:[],contextualErrorMap:d==null?void 0:d.errorMap,async:!0},path:(d==null?void 0:d.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:getParsedType(s)},S=this._parse({data:s,path:_.path,parent:_}),T=await(isAsync(S)?S:Promise.resolve(S));return handleResult(_,T)}refine(s,d){const _=S=>typeof d=="string"||typeof d>"u"?{message:d}:typeof d=="function"?d(S):d;return this._refinement((S,T)=>{const F=s(S),M=()=>T.addIssue({code:ZodIssueCode.custom,..._(S)});return typeof Promise<"u"&&F instanceof Promise?F.then(P=>P?!0:(M(),!1)):F?!0:(M(),!1)})}refinement(s,d){return this._refinement((_,S)=>s(_)?!0:(S.addIssue(typeof d=="function"?d(_,S):d),!1))}_refinement(s){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(s){return ZodUnion.create([this,s],this._def)}and(s){return ZodIntersection.create(this,s,this._def)}transform(s){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const d=typeof s=="function"?s:()=>s;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:d,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(s){const d=typeof s=="function"?s:()=>s;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:d,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(s){const d=this.constructor;return new d({...this._def,description:s})}pipe(s){return ZodPipeline.create(this,s)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(f){let s="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return f.precision?s=`${s}\\.\\d{${f.precision}}`:f.precision==null&&(s=`${s}(\\.\\d+)?`),s}function timeRegex(f){return new RegExp(`^${timeRegexSource(f)}$`)}function datetimeRegex(f){let s=`${dateRegexSource}T${timeRegexSource(f)}`;const d=[];return d.push(f.local?"Z?":"Z"),f.offset&&d.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${d.join("|")})`,new RegExp(`^${s}$`)}function isValidIP(f,s){return!!((s==="v4"||!s)&&ipv4Regex.test(f)||(s==="v6"||!s)&&ipv6Regex.test(f))}class ZodString extends ZodType{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==ZodParsedType.string){const T=this._getOrReturnCtx(s);return addIssueToContext(T,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:T.parsedType}),INVALID$1}const _=new ParseStatus;let S;for(const T of this._def.checks)if(T.kind==="min")s.data.length<T.value&&(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.too_small,minimum:T.value,type:"string",inclusive:!0,exact:!1,message:T.message}),_.dirty());else if(T.kind==="max")s.data.length>T.value&&(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.too_big,maximum:T.value,type:"string",inclusive:!0,exact:!1,message:T.message}),_.dirty());else if(T.kind==="length"){const F=s.data.length>T.value,M=s.data.length<T.value;(F||M)&&(S=this._getOrReturnCtx(s,S),F?addIssueToContext(S,{code:ZodIssueCode.too_big,maximum:T.value,type:"string",inclusive:!0,exact:!0,message:T.message}):M&&addIssueToContext(S,{code:ZodIssueCode.too_small,minimum:T.value,type:"string",inclusive:!0,exact:!0,message:T.message}),_.dirty())}else if(T.kind==="email")emailRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"email",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"emoji",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="uuid")uuidRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"uuid",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="nanoid")nanoidRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="cuid")cuidRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"cuid",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="cuid2")cuid2Regex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="ulid")ulidRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"ulid",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="url")try{new URL(s.data)}catch{S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"url",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty()}else T.kind==="regex"?(T.regex.lastIndex=0,T.regex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"regex",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty())):T.kind==="trim"?s.data=s.data.trim():T.kind==="includes"?s.data.includes(T.value,T.position)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.invalid_string,validation:{includes:T.value,position:T.position},message:T.message}),_.dirty()):T.kind==="toLowerCase"?s.data=s.data.toLowerCase():T.kind==="toUpperCase"?s.data=s.data.toUpperCase():T.kind==="startsWith"?s.data.startsWith(T.value)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.invalid_string,validation:{startsWith:T.value},message:T.message}),_.dirty()):T.kind==="endsWith"?s.data.endsWith(T.value)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.invalid_string,validation:{endsWith:T.value},message:T.message}),_.dirty()):T.kind==="datetime"?datetimeRegex(T).test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.invalid_string,validation:"datetime",message:T.message}),_.dirty()):T.kind==="date"?dateRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.invalid_string,validation:"date",message:T.message}),_.dirty()):T.kind==="time"?timeRegex(T).test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.invalid_string,validation:"time",message:T.message}),_.dirty()):T.kind==="duration"?durationRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"duration",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty()):T.kind==="ip"?isValidIP(s.data,T.version)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"ip",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty()):T.kind==="base64"?base64Regex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"base64",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty()):util.assertNever(T);return{status:_.value,value:s.data}}_regex(s,d,_){return this.refinement(S=>s.test(S),{validation:d,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(_)})}_addCheck(s){return new ZodString({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",...errorUtil.errToObj(s)})}url(s){return this._addCheck({kind:"url",...errorUtil.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",...errorUtil.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",...errorUtil.errToObj(s)})}nanoid(s){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",...errorUtil.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",...errorUtil.errToObj(s)})}base64(s){return this._addCheck({kind:"base64",...errorUtil.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",...errorUtil.errToObj(s)})}datetime(s){var d,_;return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,offset:(d=s==null?void 0:s.offset)!==null&&d!==void 0?d:!1,local:(_=s==null?void 0:s.local)!==null&&_!==void 0?_:!1,...errorUtil.errToObj(s==null?void 0:s.message)})}date(s){return this._addCheck({kind:"date",message:s})}time(s){return typeof s=="string"?this._addCheck({kind:"time",precision:null,message:s}):this._addCheck({kind:"time",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,...errorUtil.errToObj(s==null?void 0:s.message)})}duration(s){return this._addCheck({kind:"duration",...errorUtil.errToObj(s)})}regex(s,d){return this._addCheck({kind:"regex",regex:s,...errorUtil.errToObj(d)})}includes(s,d){return this._addCheck({kind:"includes",value:s,position:d==null?void 0:d.position,...errorUtil.errToObj(d==null?void 0:d.message)})}startsWith(s,d){return this._addCheck({kind:"startsWith",value:s,...errorUtil.errToObj(d)})}endsWith(s,d){return this._addCheck({kind:"endsWith",value:s,...errorUtil.errToObj(d)})}min(s,d){return this._addCheck({kind:"min",value:s,...errorUtil.errToObj(d)})}max(s,d){return this._addCheck({kind:"max",value:s,...errorUtil.errToObj(d)})}length(s,d){return this._addCheck({kind:"length",value:s,...errorUtil.errToObj(d)})}nonempty(s){return this.min(1,errorUtil.errToObj(s))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isDate(){return!!this._def.checks.find(s=>s.kind==="date")}get isTime(){return!!this._def.checks.find(s=>s.kind==="time")}get isDuration(){return!!this._def.checks.find(s=>s.kind==="duration")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(s=>s.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get isBase64(){return!!this._def.checks.find(s=>s.kind==="base64")}get minLength(){let s=null;for(const d of this._def.checks)d.kind==="min"&&(s===null||d.value>s)&&(s=d.value);return s}get maxLength(){let s=null;for(const d of this._def.checks)d.kind==="max"&&(s===null||d.value<s)&&(s=d.value);return s}}ZodString.create=f=>{var s;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(s=f==null?void 0:f.coerce)!==null&&s!==void 0?s:!1,...processCreateParams(f)})};function floatSafeRemainder(f,s){const d=(f.toString().split(".")[1]||"").length,_=(s.toString().split(".")[1]||"").length,S=d>_?d:_,T=parseInt(f.toFixed(S).replace(".","")),F=parseInt(s.toFixed(S).replace(".",""));return T%F/Math.pow(10,S)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==ZodParsedType.number){const T=this._getOrReturnCtx(s);return addIssueToContext(T,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:T.parsedType}),INVALID$1}let _;const S=new ParseStatus;for(const T of this._def.checks)T.kind==="int"?util.isInteger(s.data)||(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:T.message}),S.dirty()):T.kind==="min"?(T.inclusive?s.data<T.value:s.data<=T.value)&&(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.too_small,minimum:T.value,type:"number",inclusive:T.inclusive,exact:!1,message:T.message}),S.dirty()):T.kind==="max"?(T.inclusive?s.data>T.value:s.data>=T.value)&&(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.too_big,maximum:T.value,type:"number",inclusive:T.inclusive,exact:!1,message:T.message}),S.dirty()):T.kind==="multipleOf"?floatSafeRemainder(s.data,T.value)!==0&&(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.not_multiple_of,multipleOf:T.value,message:T.message}),S.dirty()):T.kind==="finite"?Number.isFinite(s.data)||(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.not_finite,message:T.message}),S.dirty()):util.assertNever(T);return{status:S.value,value:s.data}}gte(s,d){return this.setLimit("min",s,!0,errorUtil.toString(d))}gt(s,d){return this.setLimit("min",s,!1,errorUtil.toString(d))}lte(s,d){return this.setLimit("max",s,!0,errorUtil.toString(d))}lt(s,d){return this.setLimit("max",s,!1,errorUtil.toString(d))}setLimit(s,d,_,S){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:s,value:d,inclusive:_,message:errorUtil.toString(S)}]})}_addCheck(s){return new ZodNumber({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:errorUtil.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(s)})}multipleOf(s,d){return this._addCheck({kind:"multipleOf",value:s,message:errorUtil.toString(d)})}finite(s){return this._addCheck({kind:"finite",message:errorUtil.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(s)})}get minValue(){let s=null;for(const d of this._def.checks)d.kind==="min"&&(s===null||d.value>s)&&(s=d.value);return s}get maxValue(){let s=null;for(const d of this._def.checks)d.kind==="max"&&(s===null||d.value<s)&&(s=d.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&util.isInteger(s.value))}get isFinite(){let s=null,d=null;for(const _ of this._def.checks){if(_.kind==="finite"||_.kind==="int"||_.kind==="multipleOf")return!0;_.kind==="min"?(d===null||_.value>d)&&(d=_.value):_.kind==="max"&&(s===null||_.value<s)&&(s=_.value)}return Number.isFinite(d)&&Number.isFinite(s)}}ZodNumber.create=f=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(f==null?void 0:f.coerce)||!1,...processCreateParams(f)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce&&(s.data=BigInt(s.data)),this._getType(s)!==ZodParsedType.bigint){const T=this._getOrReturnCtx(s);return addIssueToContext(T,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:T.parsedType}),INVALID$1}let _;const S=new ParseStatus;for(const T of this._def.checks)T.kind==="min"?(T.inclusive?s.data<T.value:s.data<=T.value)&&(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.too_small,type:"bigint",minimum:T.value,inclusive:T.inclusive,message:T.message}),S.dirty()):T.kind==="max"?(T.inclusive?s.data>T.value:s.data>=T.value)&&(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.too_big,type:"bigint",maximum:T.value,inclusive:T.inclusive,message:T.message}),S.dirty()):T.kind==="multipleOf"?s.data%T.value!==BigInt(0)&&(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.not_multiple_of,multipleOf:T.value,message:T.message}),S.dirty()):util.assertNever(T);return{status:S.value,value:s.data}}gte(s,d){return this.setLimit("min",s,!0,errorUtil.toString(d))}gt(s,d){return this.setLimit("min",s,!1,errorUtil.toString(d))}lte(s,d){return this.setLimit("max",s,!0,errorUtil.toString(d))}lt(s,d){return this.setLimit("max",s,!1,errorUtil.toString(d))}setLimit(s,d,_,S){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:s,value:d,inclusive:_,message:errorUtil.toString(S)}]})}_addCheck(s){return new ZodBigInt({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(s)})}multipleOf(s,d){return this._addCheck({kind:"multipleOf",value:s,message:errorUtil.toString(d)})}get minValue(){let s=null;for(const d of this._def.checks)d.kind==="min"&&(s===null||d.value>s)&&(s=d.value);return s}get maxValue(){let s=null;for(const d of this._def.checks)d.kind==="max"&&(s===null||d.value<s)&&(s=d.value);return s}}ZodBigInt.create=f=>{var s;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(s=f==null?void 0:f.coerce)!==null&&s!==void 0?s:!1,...processCreateParams(f)})};class ZodBoolean extends ZodType{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==ZodParsedType.boolean){const _=this._getOrReturnCtx(s);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:_.parsedType}),INVALID$1}return OK(s.data)}}ZodBoolean.create=f=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(f==null?void 0:f.coerce)||!1,...processCreateParams(f)});class ZodDate extends ZodType{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==ZodParsedType.date){const T=this._getOrReturnCtx(s);return addIssueToContext(T,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:T.parsedType}),INVALID$1}if(isNaN(s.data.getTime())){const T=this._getOrReturnCtx(s);return addIssueToContext(T,{code:ZodIssueCode.invalid_date}),INVALID$1}const _=new ParseStatus;let S;for(const T of this._def.checks)T.kind==="min"?s.data.getTime()<T.value&&(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.too_small,message:T.message,inclusive:!0,exact:!1,minimum:T.value,type:"date"}),_.dirty()):T.kind==="max"?s.data.getTime()>T.value&&(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.too_big,message:T.message,inclusive:!0,exact:!1,maximum:T.value,type:"date"}),_.dirty()):util.assertNever(T);return{status:_.value,value:new Date(s.data.getTime())}}_addCheck(s){return new ZodDate({...this._def,checks:[...this._def.checks,s]})}min(s,d){return this._addCheck({kind:"min",value:s.getTime(),message:errorUtil.toString(d)})}max(s,d){return this._addCheck({kind:"max",value:s.getTime(),message:errorUtil.toString(d)})}get minDate(){let s=null;for(const d of this._def.checks)d.kind==="min"&&(s===null||d.value>s)&&(s=d.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const d of this._def.checks)d.kind==="max"&&(s===null||d.value<s)&&(s=d.value);return s!=null?new Date(s):null}}ZodDate.create=f=>new ZodDate({checks:[],coerce:(f==null?void 0:f.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(f)});class ZodSymbol extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.symbol){const _=this._getOrReturnCtx(s);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:_.parsedType}),INVALID$1}return OK(s.data)}}ZodSymbol.create=f=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(f)});class ZodUndefined extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.undefined){const _=this._getOrReturnCtx(s);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:_.parsedType}),INVALID$1}return OK(s.data)}}ZodUndefined.create=f=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(f)});class ZodNull extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.null){const _=this._getOrReturnCtx(s);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:_.parsedType}),INVALID$1}return OK(s.data)}}ZodNull.create=f=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(f)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(s){return OK(s.data)}}ZodAny.create=f=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(f)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(s){return OK(s.data)}}ZodUnknown.create=f=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(f)});class ZodNever extends ZodType{_parse(s){const d=this._getOrReturnCtx(s);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:d.parsedType}),INVALID$1}}ZodNever.create=f=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(f)});class ZodVoid extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.undefined){const _=this._getOrReturnCtx(s);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:_.parsedType}),INVALID$1}return OK(s.data)}}ZodVoid.create=f=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(f)});class ZodArray extends ZodType{_parse(s){const{ctx:d,status:_}=this._processInputParams(s),S=this._def;if(d.parsedType!==ZodParsedType.array)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:d.parsedType}),INVALID$1;if(S.exactLength!==null){const F=d.data.length>S.exactLength.value,M=d.data.length<S.exactLength.value;(F||M)&&(addIssueToContext(d,{code:F?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:M?S.exactLength.value:void 0,maximum:F?S.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:S.exactLength.message}),_.dirty())}if(S.minLength!==null&&d.data.length<S.minLength.value&&(addIssueToContext(d,{code:ZodIssueCode.too_small,minimum:S.minLength.value,type:"array",inclusive:!0,exact:!1,message:S.minLength.message}),_.dirty()),S.maxLength!==null&&d.data.length>S.maxLength.value&&(addIssueToContext(d,{code:ZodIssueCode.too_big,maximum:S.maxLength.value,type:"array",inclusive:!0,exact:!1,message:S.maxLength.message}),_.dirty()),d.common.async)return Promise.all([...d.data].map((F,M)=>S.type._parseAsync(new ParseInputLazyPath(d,F,d.path,M)))).then(F=>ParseStatus.mergeArray(_,F));const T=[...d.data].map((F,M)=>S.type._parseSync(new ParseInputLazyPath(d,F,d.path,M)));return ParseStatus.mergeArray(_,T)}get element(){return this._def.type}min(s,d){return new ZodArray({...this._def,minLength:{value:s,message:errorUtil.toString(d)}})}max(s,d){return new ZodArray({...this._def,maxLength:{value:s,message:errorUtil.toString(d)}})}length(s,d){return new ZodArray({...this._def,exactLength:{value:s,message:errorUtil.toString(d)}})}nonempty(s){return this.min(1,s)}}ZodArray.create=(f,s)=>new ZodArray({type:f,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(s)});function deepPartialify(f){if(f instanceof ZodObject){const s={};for(const d in f.shape){const _=f.shape[d];s[d]=ZodOptional.create(deepPartialify(_))}return new ZodObject({...f._def,shape:()=>s})}else return f instanceof ZodArray?new ZodArray({...f._def,type:deepPartialify(f.element)}):f instanceof ZodOptional?ZodOptional.create(deepPartialify(f.unwrap())):f instanceof ZodNullable?ZodNullable.create(deepPartialify(f.unwrap())):f instanceof ZodTuple?ZodTuple.create(f.items.map(s=>deepPartialify(s))):f}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),d=util.objectKeys(s);return this._cached={shape:s,keys:d}}_parse(s){if(this._getType(s)!==ZodParsedType.object){const H=this._getOrReturnCtx(s);return addIssueToContext(H,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:H.parsedType}),INVALID$1}const{status:_,ctx:S}=this._processInputParams(s),{shape:T,keys:F}=this._getCached(),M=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const H in S.data)F.includes(H)||M.push(H);const P=[];for(const H of F){const J=T[H],K=S.data[H];P.push({key:{status:"valid",value:H},value:J._parse(new ParseInputLazyPath(S,K,S.path,H)),alwaysSet:H in S.data})}if(this._def.catchall instanceof ZodNever){const H=this._def.unknownKeys;if(H==="passthrough")for(const J of M)P.push({key:{status:"valid",value:J},value:{status:"valid",value:S.data[J]}});else if(H==="strict")M.length>0&&(addIssueToContext(S,{code:ZodIssueCode.unrecognized_keys,keys:M}),_.dirty());else if(H!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const H=this._def.catchall;for(const J of M){const K=S.data[J];P.push({key:{status:"valid",value:J},value:H._parse(new ParseInputLazyPath(S,K,S.path,J)),alwaysSet:J in S.data})}}return S.common.async?Promise.resolve().then(async()=>{const H=[];for(const J of P){const K=await J.key,z=await J.value;H.push({key:K,value:z,alwaysSet:J.alwaysSet})}return H}).then(H=>ParseStatus.mergeObjectSync(_,H)):ParseStatus.mergeObjectSync(_,P)}get shape(){return this._def.shape()}strict(s){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(d,_)=>{var S,T,F,M;const P=(F=(T=(S=this._def).errorMap)===null||T===void 0?void 0:T.call(S,d,_).message)!==null&&F!==void 0?F:_.defaultError;return d.code==="unrecognized_keys"?{message:(M=errorUtil.errToObj(s).message)!==null&&M!==void 0?M:P}:{message:P}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(s){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new ZodObject({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(s,d){return this.augment({[s]:d})}catchall(s){return new ZodObject({...this._def,catchall:s})}pick(s){const d={};return util.objectKeys(s).forEach(_=>{s[_]&&this.shape[_]&&(d[_]=this.shape[_])}),new ZodObject({...this._def,shape:()=>d})}omit(s){const d={};return util.objectKeys(this.shape).forEach(_=>{s[_]||(d[_]=this.shape[_])}),new ZodObject({...this._def,shape:()=>d})}deepPartial(){return deepPartialify(this)}partial(s){const d={};return util.objectKeys(this.shape).forEach(_=>{const S=this.shape[_];s&&!s[_]?d[_]=S:d[_]=S.optional()}),new ZodObject({...this._def,shape:()=>d})}required(s){const d={};return util.objectKeys(this.shape).forEach(_=>{if(s&&!s[_])d[_]=this.shape[_];else{let T=this.shape[_];for(;T instanceof ZodOptional;)T=T._def.innerType;d[_]=T}}),new ZodObject({...this._def,shape:()=>d})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(f,s)=>new ZodObject({shape:()=>f,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(s)});ZodObject.strictCreate=(f,s)=>new ZodObject({shape:()=>f,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(s)});ZodObject.lazycreate=(f,s)=>new ZodObject({shape:f,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(s)});class ZodUnion extends ZodType{_parse(s){const{ctx:d}=this._processInputParams(s),_=this._def.options;function S(T){for(const M of T)if(M.result.status==="valid")return M.result;for(const M of T)if(M.result.status==="dirty")return d.common.issues.push(...M.ctx.common.issues),M.result;const F=T.map(M=>new ZodError(M.ctx.common.issues));return addIssueToContext(d,{code:ZodIssueCode.invalid_union,unionErrors:F}),INVALID$1}if(d.common.async)return Promise.all(_.map(async T=>{const F={...d,common:{...d.common,issues:[]},parent:null};return{result:await T._parseAsync({data:d.data,path:d.path,parent:F}),ctx:F}})).then(S);{let T;const F=[];for(const P of _){const H={...d,common:{...d.common,issues:[]},parent:null},J=P._parseSync({data:d.data,path:d.path,parent:H});if(J.status==="valid")return J;J.status==="dirty"&&!T&&(T={result:J,ctx:H}),H.common.issues.length&&F.push(H.common.issues)}if(T)return d.common.issues.push(...T.ctx.common.issues),T.result;const M=F.map(P=>new ZodError(P));return addIssueToContext(d,{code:ZodIssueCode.invalid_union,unionErrors:M}),INVALID$1}}get options(){return this._def.options}}ZodUnion.create=(f,s)=>new ZodUnion({options:f,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(s)});const getDiscriminator=f=>f instanceof ZodLazy?getDiscriminator(f.schema):f instanceof ZodEffects?getDiscriminator(f.innerType()):f instanceof ZodLiteral?[f.value]:f instanceof ZodEnum?f.options:f instanceof ZodNativeEnum?util.objectValues(f.enum):f instanceof ZodDefault?getDiscriminator(f._def.innerType):f instanceof ZodUndefined?[void 0]:f instanceof ZodNull?[null]:f instanceof ZodOptional?[void 0,...getDiscriminator(f.unwrap())]:f instanceof ZodNullable?[null,...getDiscriminator(f.unwrap())]:f instanceof ZodBranded||f instanceof ZodReadonly?getDiscriminator(f.unwrap()):f instanceof ZodCatch?getDiscriminator(f._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(s){const{ctx:d}=this._processInputParams(s);if(d.parsedType!==ZodParsedType.object)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:d.parsedType}),INVALID$1;const _=this.discriminator,S=d.data[_],T=this.optionsMap.get(S);return T?d.common.async?T._parseAsync({data:d.data,path:d.path,parent:d}):T._parseSync({data:d.data,path:d.path,parent:d}):(addIssueToContext(d,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[_]}),INVALID$1)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(s,d,_){const S=new Map;for(const T of d){const F=getDiscriminator(T.shape[s]);if(!F.length)throw new Error(`A discriminator value for key \`${s}\` could not be extracted from all schema options`);for(const M of F){if(S.has(M))throw new Error(`Discriminator property ${String(s)} has duplicate value ${String(M)}`);S.set(M,T)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:s,options:d,optionsMap:S,...processCreateParams(_)})}}function mergeValues(f,s){const d=getParsedType(f),_=getParsedType(s);if(f===s)return{valid:!0,data:f};if(d===ZodParsedType.object&&_===ZodParsedType.object){const S=util.objectKeys(s),T=util.objectKeys(f).filter(M=>S.indexOf(M)!==-1),F={...f,...s};for(const M of T){const P=mergeValues(f[M],s[M]);if(!P.valid)return{valid:!1};F[M]=P.data}return{valid:!0,data:F}}else if(d===ZodParsedType.array&&_===ZodParsedType.array){if(f.length!==s.length)return{valid:!1};const S=[];for(let T=0;T<f.length;T++){const F=f[T],M=s[T],P=mergeValues(F,M);if(!P.valid)return{valid:!1};S.push(P.data)}return{valid:!0,data:S}}else return d===ZodParsedType.date&&_===ZodParsedType.date&&+f==+s?{valid:!0,data:f}:{valid:!1}}class ZodIntersection extends ZodType{_parse(s){const{status:d,ctx:_}=this._processInputParams(s),S=(T,F)=>{if(isAborted(T)||isAborted(F))return INVALID$1;const M=mergeValues(T.value,F.value);return M.valid?((isDirty(T)||isDirty(F))&&d.dirty(),{status:d.value,value:M.data}):(addIssueToContext(_,{code:ZodIssueCode.invalid_intersection_types}),INVALID$1)};return _.common.async?Promise.all([this._def.left._parseAsync({data:_.data,path:_.path,parent:_}),this._def.right._parseAsync({data:_.data,path:_.path,parent:_})]).then(([T,F])=>S(T,F)):S(this._def.left._parseSync({data:_.data,path:_.path,parent:_}),this._def.right._parseSync({data:_.data,path:_.path,parent:_}))}}ZodIntersection.create=(f,s,d)=>new ZodIntersection({left:f,right:s,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(d)});class ZodTuple extends ZodType{_parse(s){const{status:d,ctx:_}=this._processInputParams(s);if(_.parsedType!==ZodParsedType.array)return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:_.parsedType}),INVALID$1;if(_.data.length<this._def.items.length)return addIssueToContext(_,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID$1;!this._def.rest&&_.data.length>this._def.items.length&&(addIssueToContext(_,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),d.dirty());const T=[..._.data].map((F,M)=>{const P=this._def.items[M]||this._def.rest;return P?P._parse(new ParseInputLazyPath(_,F,_.path,M)):null}).filter(F=>!!F);return _.common.async?Promise.all(T).then(F=>ParseStatus.mergeArray(d,F)):ParseStatus.mergeArray(d,T)}get items(){return this._def.items}rest(s){return new ZodTuple({...this._def,rest:s})}}ZodTuple.create=(f,s)=>{if(!Array.isArray(f))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:f,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(s)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:d,ctx:_}=this._processInputParams(s);if(_.parsedType!==ZodParsedType.object)return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:_.parsedType}),INVALID$1;const S=[],T=this._def.keyType,F=this._def.valueType;for(const M in _.data)S.push({key:T._parse(new ParseInputLazyPath(_,M,_.path,M)),value:F._parse(new ParseInputLazyPath(_,_.data[M],_.path,M)),alwaysSet:M in _.data});return _.common.async?ParseStatus.mergeObjectAsync(d,S):ParseStatus.mergeObjectSync(d,S)}get element(){return this._def.valueType}static create(s,d,_){return d instanceof ZodType?new ZodRecord({keyType:s,valueType:d,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(_)}):new ZodRecord({keyType:ZodString.create(),valueType:s,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(d)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:d,ctx:_}=this._processInputParams(s);if(_.parsedType!==ZodParsedType.map)return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:_.parsedType}),INVALID$1;const S=this._def.keyType,T=this._def.valueType,F=[..._.data.entries()].map(([M,P],H)=>({key:S._parse(new ParseInputLazyPath(_,M,_.path,[H,"key"])),value:T._parse(new ParseInputLazyPath(_,P,_.path,[H,"value"]))}));if(_.common.async){const M=new Map;return Promise.resolve().then(async()=>{for(const P of F){const H=await P.key,J=await P.value;if(H.status==="aborted"||J.status==="aborted")return INVALID$1;(H.status==="dirty"||J.status==="dirty")&&d.dirty(),M.set(H.value,J.value)}return{status:d.value,value:M}})}else{const M=new Map;for(const P of F){const H=P.key,J=P.value;if(H.status==="aborted"||J.status==="aborted")return INVALID$1;(H.status==="dirty"||J.status==="dirty")&&d.dirty(),M.set(H.value,J.value)}return{status:d.value,value:M}}}}ZodMap.create=(f,s,d)=>new ZodMap({valueType:s,keyType:f,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(d)});class ZodSet extends ZodType{_parse(s){const{status:d,ctx:_}=this._processInputParams(s);if(_.parsedType!==ZodParsedType.set)return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:_.parsedType}),INVALID$1;const S=this._def;S.minSize!==null&&_.data.size<S.minSize.value&&(addIssueToContext(_,{code:ZodIssueCode.too_small,minimum:S.minSize.value,type:"set",inclusive:!0,exact:!1,message:S.minSize.message}),d.dirty()),S.maxSize!==null&&_.data.size>S.maxSize.value&&(addIssueToContext(_,{code:ZodIssueCode.too_big,maximum:S.maxSize.value,type:"set",inclusive:!0,exact:!1,message:S.maxSize.message}),d.dirty());const T=this._def.valueType;function F(P){const H=new Set;for(const J of P){if(J.status==="aborted")return INVALID$1;J.status==="dirty"&&d.dirty(),H.add(J.value)}return{status:d.value,value:H}}const M=[..._.data.values()].map((P,H)=>T._parse(new ParseInputLazyPath(_,P,_.path,H)));return _.common.async?Promise.all(M).then(P=>F(P)):F(M)}min(s,d){return new ZodSet({...this._def,minSize:{value:s,message:errorUtil.toString(d)}})}max(s,d){return new ZodSet({...this._def,maxSize:{value:s,message:errorUtil.toString(d)}})}size(s,d){return this.min(s,d).max(s,d)}nonempty(s){return this.min(1,s)}}ZodSet.create=(f,s)=>new ZodSet({valueType:f,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(s)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(s){const{ctx:d}=this._processInputParams(s);if(d.parsedType!==ZodParsedType.function)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:d.parsedType}),INVALID$1;function _(M,P){return makeIssue({data:M,path:d.path,errorMaps:[d.common.contextualErrorMap,d.schemaErrorMap,getErrorMap(),errorMap].filter(H=>!!H),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:P}})}function S(M,P){return makeIssue({data:M,path:d.path,errorMaps:[d.common.contextualErrorMap,d.schemaErrorMap,getErrorMap(),errorMap].filter(H=>!!H),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:P}})}const T={errorMap:d.common.contextualErrorMap},F=d.data;if(this._def.returns instanceof ZodPromise){const M=this;return OK(async function(...P){const H=new ZodError([]),J=await M._def.args.parseAsync(P,T).catch(oe=>{throw H.addIssue(_(P,oe)),H}),K=await Reflect.apply(F,this,J);return await M._def.returns._def.type.parseAsync(K,T).catch(oe=>{throw H.addIssue(S(K,oe)),H})})}else{const M=this;return OK(function(...P){const H=M._def.args.safeParse(P,T);if(!H.success)throw new ZodError([_(P,H.error)]);const J=Reflect.apply(F,this,H.data),K=M._def.returns.safeParse(J,T);if(!K.success)throw new ZodError([S(J,K.error)]);return K.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...s){return new ZodFunction({...this._def,args:ZodTuple.create(s).rest(ZodUnknown.create())})}returns(s){return new ZodFunction({...this._def,returns:s})}implement(s){return this.parse(s)}strictImplement(s){return this.parse(s)}static create(s,d,_){return new ZodFunction({args:s||ZodTuple.create([]).rest(ZodUnknown.create()),returns:d||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(_)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(s){const{ctx:d}=this._processInputParams(s);return this._def.getter()._parse({data:d.data,path:d.path,parent:d})}}ZodLazy.create=(f,s)=>new ZodLazy({getter:f,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(s)});class ZodLiteral extends ZodType{_parse(s){if(s.data!==this._def.value){const d=this._getOrReturnCtx(s);return addIssueToContext(d,{received:d.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID$1}return{status:"valid",value:s.data}}get value(){return this._def.value}}ZodLiteral.create=(f,s)=>new ZodLiteral({value:f,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(s)});function createZodEnum(f,s){return new ZodEnum({values:f,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(s)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(s){if(typeof s.data!="string"){const d=this._getOrReturnCtx(s),_=this._def.values;return addIssueToContext(d,{expected:util.joinValues(_),received:d.parsedType,code:ZodIssueCode.invalid_type}),INVALID$1}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(s.data)){const d=this._getOrReturnCtx(s),_=this._def.values;return addIssueToContext(d,{received:d.data,code:ZodIssueCode.invalid_enum_value,options:_}),INVALID$1}return OK(s.data)}get options(){return this._def.values}get enum(){const s={};for(const d of this._def.values)s[d]=d;return s}get Values(){const s={};for(const d of this._def.values)s[d]=d;return s}get Enum(){const s={};for(const d of this._def.values)s[d]=d;return s}extract(s,d=this._def){return ZodEnum.create(s,{...this._def,...d})}exclude(s,d=this._def){return ZodEnum.create(this.options.filter(_=>!s.includes(_)),{...this._def,...d})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(s){const d=util.getValidEnumValues(this._def.values),_=this._getOrReturnCtx(s);if(_.parsedType!==ZodParsedType.string&&_.parsedType!==ZodParsedType.number){const S=util.objectValues(d);return addIssueToContext(_,{expected:util.joinValues(S),received:_.parsedType,code:ZodIssueCode.invalid_type}),INVALID$1}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(s.data)){const S=util.objectValues(d);return addIssueToContext(_,{received:_.data,code:ZodIssueCode.invalid_enum_value,options:S}),INVALID$1}return OK(s.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(f,s)=>new ZodNativeEnum({values:f,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(s)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(s){const{ctx:d}=this._processInputParams(s);if(d.parsedType!==ZodParsedType.promise&&d.common.async===!1)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:d.parsedType}),INVALID$1;const _=d.parsedType===ZodParsedType.promise?d.data:Promise.resolve(d.data);return OK(_.then(S=>this._def.type.parseAsync(S,{path:d.path,errorMap:d.common.contextualErrorMap})))}}ZodPromise.create=(f,s)=>new ZodPromise({type:f,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(s)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:d,ctx:_}=this._processInputParams(s),S=this._def.effect||null,T={addIssue:F=>{addIssueToContext(_,F),F.fatal?d.abort():d.dirty()},get path(){return _.path}};if(T.addIssue=T.addIssue.bind(T),S.type==="preprocess"){const F=S.transform(_.data,T);if(_.common.async)return Promise.resolve(F).then(async M=>{if(d.value==="aborted")return INVALID$1;const P=await this._def.schema._parseAsync({data:M,path:_.path,parent:_});return P.status==="aborted"?INVALID$1:P.status==="dirty"||d.value==="dirty"?DIRTY(P.value):P});{if(d.value==="aborted")return INVALID$1;const M=this._def.schema._parseSync({data:F,path:_.path,parent:_});return M.status==="aborted"?INVALID$1:M.status==="dirty"||d.value==="dirty"?DIRTY(M.value):M}}if(S.type==="refinement"){const F=M=>{const P=S.refinement(M,T);if(_.common.async)return Promise.resolve(P);if(P instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return M};if(_.common.async===!1){const M=this._def.schema._parseSync({data:_.data,path:_.path,parent:_});return M.status==="aborted"?INVALID$1:(M.status==="dirty"&&d.dirty(),F(M.value),{status:d.value,value:M.value})}else return this._def.schema._parseAsync({data:_.data,path:_.path,parent:_}).then(M=>M.status==="aborted"?INVALID$1:(M.status==="dirty"&&d.dirty(),F(M.value).then(()=>({status:d.value,value:M.value}))))}if(S.type==="transform")if(_.common.async===!1){const F=this._def.schema._parseSync({data:_.data,path:_.path,parent:_});if(!isValid(F))return F;const M=S.transform(F.value,T);if(M instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:d.value,value:M}}else return this._def.schema._parseAsync({data:_.data,path:_.path,parent:_}).then(F=>isValid(F)?Promise.resolve(S.transform(F.value,T)).then(M=>({status:d.value,value:M})):F);util.assertNever(S)}}ZodEffects.create=(f,s,d)=>new ZodEffects({schema:f,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:s,...processCreateParams(d)});ZodEffects.createWithPreprocess=(f,s,d)=>new ZodEffects({schema:s,effect:{type:"preprocess",transform:f},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(d)});class ZodOptional extends ZodType{_parse(s){return this._getType(s)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}ZodOptional.create=(f,s)=>new ZodOptional({innerType:f,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(s)});class ZodNullable extends ZodType{_parse(s){return this._getType(s)===ZodParsedType.null?OK(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}ZodNullable.create=(f,s)=>new ZodNullable({innerType:f,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(s)});class ZodDefault extends ZodType{_parse(s){const{ctx:d}=this._processInputParams(s);let _=d.data;return d.parsedType===ZodParsedType.undefined&&(_=this._def.defaultValue()),this._def.innerType._parse({data:_,path:d.path,parent:d})}removeDefault(){return this._def.innerType}}ZodDefault.create=(f,s)=>new ZodDefault({innerType:f,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,...processCreateParams(s)});class ZodCatch extends ZodType{_parse(s){const{ctx:d}=this._processInputParams(s),_={...d,common:{...d.common,issues:[]}},S=this._def.innerType._parse({data:_.data,path:_.path,parent:{..._}});return isAsync(S)?S.then(T=>({status:"valid",value:T.status==="valid"?T.value:this._def.catchValue({get error(){return new ZodError(_.common.issues)},input:_.data})})):{status:"valid",value:S.status==="valid"?S.value:this._def.catchValue({get error(){return new ZodError(_.common.issues)},input:_.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(f,s)=>new ZodCatch({innerType:f,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,...processCreateParams(s)});class ZodNaN extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.nan){const _=this._getOrReturnCtx(s);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:_.parsedType}),INVALID$1}return{status:"valid",value:s.data}}}ZodNaN.create=f=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(f)});class ZodBranded extends ZodType{_parse(s){const{ctx:d}=this._processInputParams(s),_=d.data;return this._def.type._parse({data:_,path:d.path,parent:d})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(s){const{status:d,ctx:_}=this._processInputParams(s);if(_.common.async)return(async()=>{const T=await this._def.in._parseAsync({data:_.data,path:_.path,parent:_});return T.status==="aborted"?INVALID$1:T.status==="dirty"?(d.dirty(),DIRTY(T.value)):this._def.out._parseAsync({data:T.value,path:_.path,parent:_})})();{const S=this._def.in._parseSync({data:_.data,path:_.path,parent:_});return S.status==="aborted"?INVALID$1:S.status==="dirty"?(d.dirty(),{status:"dirty",value:S.value}):this._def.out._parseSync({data:S.value,path:_.path,parent:_})}}static create(s,d){return new ZodPipeline({in:s,out:d,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(s){const d=this._def.innerType._parse(s),_=S=>(isValid(S)&&(S.value=Object.freeze(S.value)),S);return isAsync(d)?d.then(S=>_(S)):_(d)}unwrap(){return this._def.innerType}}ZodReadonly.create=(f,s)=>new ZodReadonly({innerType:f,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(s)});ZodObject.lazycreate;var ZodFirstPartyTypeKind;(function(f){f.ZodString="ZodString",f.ZodNumber="ZodNumber",f.ZodNaN="ZodNaN",f.ZodBigInt="ZodBigInt",f.ZodBoolean="ZodBoolean",f.ZodDate="ZodDate",f.ZodSymbol="ZodSymbol",f.ZodUndefined="ZodUndefined",f.ZodNull="ZodNull",f.ZodAny="ZodAny",f.ZodUnknown="ZodUnknown",f.ZodNever="ZodNever",f.ZodVoid="ZodVoid",f.ZodArray="ZodArray",f.ZodObject="ZodObject",f.ZodUnion="ZodUnion",f.ZodDiscriminatedUnion="ZodDiscriminatedUnion",f.ZodIntersection="ZodIntersection",f.ZodTuple="ZodTuple",f.ZodRecord="ZodRecord",f.ZodMap="ZodMap",f.ZodSet="ZodSet",f.ZodFunction="ZodFunction",f.ZodLazy="ZodLazy",f.ZodLiteral="ZodLiteral",f.ZodEnum="ZodEnum",f.ZodEffects="ZodEffects",f.ZodNativeEnum="ZodNativeEnum",f.ZodOptional="ZodOptional",f.ZodNullable="ZodNullable",f.ZodDefault="ZodDefault",f.ZodCatch="ZodCatch",f.ZodPromise="ZodPromise",f.ZodBranded="ZodBranded",f.ZodPipeline="ZodPipeline",f.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const stringType=ZodString.create;ZodNumber.create;ZodNaN.create;ZodBigInt.create;ZodBoolean.create;ZodDate.create;ZodSymbol.create;ZodUndefined.create;ZodNull.create;ZodAny.create;const unknownType=ZodUnknown.create;ZodNever.create;ZodVoid.create;ZodArray.create;const objectType=ZodObject.create;ZodObject.strictCreate;ZodUnion.create;ZodDiscriminatedUnion.create;ZodIntersection.create;ZodTuple.create;ZodRecord.create;ZodMap.create;ZodSet.create;ZodFunction.create;ZodLazy.create;ZodLiteral.create;const enumType=ZodEnum.create;ZodNativeEnum.create;ZodPromise.create;ZodEffects.create;ZodOptional.create;ZodNullable.create;const preprocessType=ZodEffects.createWithPreprocess;ZodPipeline.create;const coerce={string:f=>ZodString.create({...f,coerce:!0}),number:f=>ZodNumber.create({...f,coerce:!0}),boolean:f=>ZodBoolean.create({...f,coerce:!0}),bigint:f=>ZodBigInt.create({...f,coerce:!0}),date:f=>ZodDate.create({...f,coerce:!0})},registry=new Map;function addCodec(f,s){registry.set(f,s)}async function getCodec(f){if(!registry.has(f.id))throw new Error(`Compression codec ${f.id} is not supported by Zarr.js yet.`);return(await registry.get(f.id)()).fromConfig(f)}function createProxy(f){return new Proxy(f,{set(s,d,_,S){return s.setItem(d,_)},get(s,d,_){return s.getItem(d)},deleteProperty(s,d){return s.deleteItem(d)},has(s,d){return s.containsItem(d)}})}function isZarrError(f){return typeof f=="object"&&f!==null&&"__zarr__"in f}function isKeyError(f){return isZarrError(f)&&f.__zarr__==="KeyError"}class ContainsArrayError extends Error{constructor(s){super(`path ${s} contains an array`),this.__zarr__="ContainsArrayError",Object.setPrototypeOf(this,ContainsArrayError.prototype)}}class ContainsGroupError extends Error{constructor(s){super(`path ${s} contains a group`),this.__zarr__="ContainsGroupError",Object.setPrototypeOf(this,ContainsGroupError.prototype)}}class GroupNotFoundError extends Error{constructor(s){super(`group not found at path ${s}`),this.__zarr__="GroupNotFoundError",Object.setPrototypeOf(this,GroupNotFoundError.prototype)}}class PermissionError extends Error{constructor(s){super(s),this.__zarr__="PermissionError",Object.setPrototypeOf(this,PermissionError.prototype)}}class KeyError extends Error{constructor(s){super(`key ${s} not present`),this.__zarr__="KeyError",Object.setPrototypeOf(this,KeyError.prototype)}}class TooManyIndicesError extends RangeError{constructor(s,d){super(`too many indices for array; expected ${d.length}, got ${s.length}`),this.__zarr__="TooManyIndicesError",Object.setPrototypeOf(this,TooManyIndicesError.prototype)}}let BoundsCheckError$1=class bQ extends RangeError{constructor(s){super(s),this.__zarr__="BoundsCheckError",Object.setPrototypeOf(this,bQ.prototype)}};class InvalidSliceError extends RangeError{constructor(s,d,_,S){super(`slice arguments slice(${s}, ${d}, ${_}) invalid: ${S}`),this.__zarr__="InvalidSliceError",Object.setPrototypeOf(this,InvalidSliceError.prototype)}}class NegativeStepError extends Error{constructor(){super("Negative step size is not supported when indexing."),this.__zarr__="NegativeStepError",Object.setPrototypeOf(this,NegativeStepError.prototype)}}class ValueError extends Error{constructor(s){super(s),this.__zarr__="ValueError",Object.setPrototypeOf(this,ValueError.prototype)}}class HTTPError extends Error{constructor(s){super(s),this.__zarr__="HTTPError",Object.setPrototypeOf(this,HTTPError.prototype)}}function slice$2(f,s=void 0,d=null){if(f===void 0)throw new InvalidSliceError(f,s,d,"The first argument must not be undefined");if(typeof f=="string"&&f!==":"||typeof s=="string"&&s!==":")throw new InvalidSliceError(f,s,d,'Arguments can only be integers, ":" or null');return s===void 0&&(s=f,f=null),{start:f===":"?null:f,stop:s===":"?null:s,step:d,_slice:!0}}function adjustIndices(f,s,d,_){if(f<0?(f+=_,f<0&&(f=d<0?-1:0)):f>=_&&(f=d<0?_-1:_),s<0?(s+=_,s<0&&(s=d<0?-1:0)):s>=_&&(s=d<0?_-1:_),d<0){if(s<f){const S=Math.floor((f-s-1)/-d+1);return[f,s,d,S]}}else if(f<s){const S=Math.floor((s-f-1)/d+1);return[f,s,d,S]}return[f,s,d,0]}function sliceIndices(f,s){let d,_,S;f.step===null?S=1:S=f.step,f.start===null?d=S<0?Number.MAX_SAFE_INTEGER:0:(d=f.start,d<0&&(d+=s)),f.stop===null?_=S<0?-Number.MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER:(_=f.stop,_<0&&(_+=s));const T=adjustIndices(d,_,S,s);if(d=T[0],_=T[1],S=T[2],s=T[3],S===0)throw new Error("Step size 0 is invalid");return[d,_,S,s]}function ensureArray$1(f){return Array.isArray(f)?f:[f]}function checkSelectionLength(f,s){if(f.length>s.length)throw new TooManyIndicesError(f,s)}function selectionToSliceIndices(f,s){const d=[],_=[];for(let S=0;S<f.length;S++){const T=f[S];if(typeof T=="number")d.push(T);else{const F=sliceIndices(T,s[S]),M=F[3];_.push(M),d.push(F)}}return[d,_]}function normalizeArraySelection(f,s,d=!1){f=replaceEllipsis(f,s);for(let _=0;_<f.length;_++){const S=f[_];if(typeof S=="number")d?f[_]=slice$2(S,S+1,1):f[_]=normalizeIntegerSelection(S,s[_]);else{if(isIntegerArray(S))throw new TypeError("Integer array selections are not supported (yet)");(S===":"||S===null)&&(f[_]=slice$2(null,null,1))}}return f}function replaceEllipsis(f,s){f=ensureArray$1(f);let d=-1,_=0;for(let S=0;S<f.length;S++)f[S]==="..."&&(d=S,_+=1);if(_>1)throw new RangeError("an index can only have a single ellipsis ('...')");if(_===1){const S=d,T=f.length-(S+1),F=f.length-1;if(F>=s.length)f=f.filter(M=>M!=="...");else{const M=s.length-F;let P=f.slice(0,S).concat(new Array(M).fill(null));T>0&&(P=P.concat(f.slice(f.length-T))),f=P}}if(f.length<s.length){const S=s.length-f.length;f=f.concat(new Array(S).fill(null))}return checkSelectionLength(f,s),f}function normalizeIntegerSelection(f,s){if(f<0&&(f=s+f),f>=s||f<0)throw new BoundsCheckError$1(`index out of bounds for dimension with length ${s}`);return f}function isInteger(f){return typeof f=="number"}function isIntegerArray(f){if(!Array.isArray(f))return!1;for(const s of f)if(typeof s!="number")return!1;return!0}function isSlice(f){return f!==null&&f._slice===!0}function isContiguousSlice(f){return isSlice(f)&&(f.step===null||f.step===1)}function isContiguousSelection(f){f=ensureArray$1(f);for(let s=0;s<f.length;s++){const d=f[s];if(!(isIntegerArray(d)||isContiguousSlice(d)||d==="..."))return!1}return!0}function*product(...f){if(f.length===0)return;const s=f.map(_=>_()),d=s.map(_=>_.next());for(let _=0;;){if(d[_].done){if(s[_]=f[_](),d[_]=s[_].next(),++_>=s.length)return}else yield d.map(({value:S})=>S),_=0;d[_]=s[_].next()}}class BasicIndexer{constructor(s,d){s=normalizeArraySelection(s,d.shape),this.dimIndexers=[];const _=d.shape;for(let S=0;S<_.length;S++){let T=s[S];const F=_[S],M=d.chunks[S];if(T===null&&(T=slice$2(null)),isInteger(T))this.dimIndexers.push(new IntDimIndexer(T,F,M));else if(isSlice(T))this.dimIndexers.push(new SliceDimIndexer(T,F,M));else throw new RangeError(`Unspported selection item for basic indexing; expected integer or slice, got ${T}`)}this.shape=[];for(const S of this.dimIndexers)S instanceof SliceDimIndexer&&this.shape.push(S.numItems);this.dropAxes=null}*iter(){const s=this.dimIndexers.map(_=>()=>_.iter()),d=product(...s);for(const _ of d){const S=[],T=[],F=[];for(const M of _)S.push(M.dimChunkIndex),T.push(M.dimChunkSelection),M.dimOutSelection!==null&&F.push(M.dimOutSelection);yield{chunkCoords:S,chunkSelection:T,outSelection:F}}}}class IntDimIndexer{constructor(s,d,_){s=normalizeIntegerSelection(s,d),this.dimSelection=s,this.dimLength=d,this.dimChunkLength=_,this.numItems=1}*iter(){const s=Math.floor(this.dimSelection/this.dimChunkLength),d=s*this.dimChunkLength,_=this.dimSelection-d;yield{dimChunkIndex:s,dimChunkSelection:_,dimOutSelection:null}}}class SliceDimIndexer{constructor(s,d,_){const[S,T,F]=sliceIndices(s,d);if(this.start=S,this.stop=T,this.step=F,this.step<1)throw new NegativeStepError;this.dimLength=d,this.dimChunkLength=_,this.numItems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.numChunks=Math.ceil(this.dimLength/this.dimChunkLength)}*iter(){const s=Math.floor(this.start/this.dimChunkLength),d=Math.ceil(this.stop/this.dimChunkLength);for(let _=s;_<d;_++){const S=_*this.dimChunkLength,T=Math.min(this.dimLength,(_+1)*this.dimChunkLength),F=T-S;let M,P,H;if(this.start<S){M=0;const oe=(S-this.start)%this.step;oe>0&&(M+=this.step-oe),H=Math.ceil((S-this.start)/this.step)}else M=this.start-S,H=0;this.stop>T?P=F:P=this.stop-S;const J=slice$2(M,P,this.step),K=Math.ceil((P-M)/this.step),z=slice$2(H,H+K);yield{dimChunkIndex:_,dimChunkSelection:J,dimOutSelection:z}}}}const IS_NODE=typeof process<"u"&&process.versions&&process.versions.node;function noop$6(){}function normalizeStoragePath(f){if(f===null)return"";for(f instanceof String&&(f=f.valueOf()),f=f.replace(/\\/g,"/");f.length>0&&f[0]==="/";)f=f.slice(1);for(;f.length>0&&f[f.length-1]==="/";)f=f.slice(0,f.length-1);f=f.replace(/\/\/+/g,"/");const s=f.split("/");for(const d of s)if(d==="."||d==="..")throw Error("path containing '.' or '..' segment not allowed");return f}function normalizeShape(f){return typeof f=="number"&&(f=[f]),f.map(s=>Math.floor(s))}function normalizeChunks(f,s){if(f===null||f===!0)throw new Error("Chunk guessing is not supported yet");return f===!1?s:(typeof f=="number"&&(f=[f]),f.length<s.length&&(f=f.concat(s.slice(f.length))),f.map((d,_)=>d===-1||d===null?s[_]:Math.floor(d)))}function normalizeOrder(f){return f=f.toUpperCase(),f}function normalizeDtype(f){return f}function normalizeFillValue(f){return f}function isTotalSlice(f,s){if(f===null)return!0;Array.isArray(f)||(f=[f]);for(let d=0;d<Math.min(f.length,s.length);d++){const _=f[d];if(_!==null){if(isSlice(_)){const S=_,T=S.step===1||S.step===null;if(S.start===null&&S.stop===null&&T||S.stop-S.start===s[d]&&T)continue;return!1}return!1}}return!0}function arrayEquals1D(f,s){if(f.length!==s.length)return!1;for(let d=0;d<f.length;d++)if(f[d]!==s[d])return!1;return!0}function getStrides(f){const s=f.length,d=Array(s);let _=1;for(let S=s-1;S>=0;S--)d[S]=_,_*=f[S];return d}function resolveUrl(f,s){const d=typeof f=="string"?new URL(f):f;d.pathname.endsWith("/")||(d.pathname+="/");const _=new URL(s,d);return _.search=d.search,_.href}function byteSwapInplace(f){const s=f.BYTES_PER_ELEMENT;if(s===1)return;if(IS_NODE){const F=Buffer.from(f.buffer,f.byteOffset,f.length*s);s===2&&F.swap16(),s===4&&F.swap32(),s===8&&F.swap64();return}const d=new Uint8Array(f.buffer,f.byteOffset,f.length*s),_=s/2,S=s-1;let T;for(let F=0;F<d.length;F+=s)for(let M=0;M<_;M++)T=d[F+M],d[F+M]=d[F+S-M],d[F+S-M]=T}function byteSwap(f){const s=f.slice();return byteSwapInplace(s),s}function convertColMajorToRowMajor2D(f,s,d){let _=0;const S=d[0],T=d[1],F=T;for(let M=0;M<T;M++)for(let P=0;P<S;P++)s[P*F+M]=f[_++]}function convertColMajorToRowMajor3D(f,s,d){let _=0;const S=d[0],T=d[1],F=d[2],M=F*T,P=F;for(let H=0;H<F;H++)for(let J=0;J<T;J++)for(let K=0;K<S;K++)s[K*M+J*P+H]=f[_++]}function convertColMajorToRowMajor4D(f,s,d){let _=0;const S=d[0],T=d[1],F=d[2],M=d[3],P=M*F*T,H=M*F,J=M;for(let K=0;K<M;K++)for(let z=0;z<F;z++)for(let oe=0;oe<T;oe++)for(let se=0;se<S;se++)s[se*P+oe*H+z*J+K]=f[_++]}function convertColMajorToRowMajorGeneric(f,s,d){const _=d.length,S=d.reduce((M,P)=>M*P),T=d.map((M,P)=>P+1===_?1:d.slice(P+1).reduce((H,J)=>H*J,1)),F=Array(_).fill(0);for(let M=0;M<S;M++){let P=0;for(let H=0;H<_;H++)P+=F[H]*T[H];s[P]=f[M],F[0]+=1;for(let H=0;H<_;H++)if(F[H]===d[H]){if(H+1===_)return;F[H]=0,F[H+1]+=1}}}const colMajorToRowMajorConverters={0:noop$6,1:noop$6,2:convertColMajorToRowMajor2D,3:convertColMajorToRowMajor3D,4:convertColMajorToRowMajor4D};function convertColMajorToRowMajor(f,s,d){return(colMajorToRowMajorConverters[d.length]||convertColMajorToRowMajorGeneric)(f,s,d)}function isArrayBufferLike(f){return f===null?!1:f instanceof ArrayBuffer||typeof SharedArrayBuffer=="function"&&f instanceof SharedArrayBuffer?!0:IS_NODE?f.toString().startsWith("[object ArrayBuffer]")||f.toString().startsWith("[object SharedArrayBuffer]"):!1}const ARRAY_META_KEY=".zarray",GROUP_META_KEY=".zgroup",ATTRS_META_KEY=".zattrs";async function containsArray(f,s=null){s=normalizeStoragePath(s);const _=pathToPrefix(s)+ARRAY_META_KEY;return f.containsItem(_)}async function containsGroup(f,s=null){s=normalizeStoragePath(s);const _=pathToPrefix(s)+GROUP_META_KEY;return f.containsItem(_)}function pathToPrefix(f){return f.length>0?f+"/":""}async function requireParentGroup(f,s,d,_){if(s.length===0)return;const S=s.split("/");let T="";for(const F of S.slice(0,S.length-1))T+=F,await containsArray(f,T)?await initGroupMetadata(f,T,_):await containsGroup(f,T)||await initGroupMetadata(f,T),T+="/"}async function initGroupMetadata(f,s=null,d=!1){if(s=normalizeStoragePath(s),d)throw Error("Group overwriting not implemented yet :(");if(await containsArray(f,s))throw new ContainsArrayError(s);if(await containsGroup(f,s))throw new ContainsGroupError(s);const _={zarr_format:2},S=pathToPrefix(s)+GROUP_META_KEY;await f.setItem(S,JSON.stringify(_))}async function initGroup(f,s=null,d=null,_=!1){s=normalizeStoragePath(s),await requireParentGroup(f,s,d,_),await initGroupMetadata(f,s,_)}async function initArrayMetadata(f,s,d,_,S,T,F,M,P,H,J,K){if(P)throw Error("Array overwriting not implemented yet :(");if(await containsArray(f,S))throw new ContainsArrayError(S);if(await containsGroup(f,S))throw new ContainsGroupError(S);if(_=_,s=normalizeShape(s),d=normalizeChunks(d,s),M=normalizeOrder(M),F=F,J!==null&&J.length>0)throw Error("Filters are not supported yet");let z=F;typeof F=="number"&&(Number.isNaN(F)&&(z="NaN"),Number.POSITIVE_INFINITY===F&&(z="Infinity"),Number.NEGATIVE_INFINITY===F&&(z="-Infinity")),J=null;const oe={zarr_format:2,shape:s,chunks:d,dtype:_,fill_value:z,order:M,compressor:T,filters:J};K&&(oe.dimension_separator=K);const se=pathToPrefix(S)+ARRAY_META_KEY;await f.setItem(se,JSON.stringify(oe))}async function initArray(f,s,d,_,S=null,T=null,F=null,M="C",P=!1,H=null,J=null,K){S=normalizeStoragePath(S),await requireParentGroup(f,S,H,P),await initArrayMetadata(f,s,d,_,S,T,F,M,P,H,J,K)}function parseMetadata(f){if(typeof f!="string"){if(IS_NODE&&Buffer.isBuffer(f))return JSON.parse(f.toString());if(isArrayBufferLike(f)){const s=new TextDecoder,d=new Uint8Array(f);return JSON.parse(s.decode(d))}else return f}return JSON.parse(f)}class Attributes{constructor(s,d,_,S=!0){this.store=s,this.key=d,this.readOnly=_,this.cache=S,this.cachedValue=null}async asObject(){if(this.cache&&this.cachedValue!==null)return this.cachedValue;const s=await this.getNoSync();return this.cache&&(this.cachedValue=s),s}async getNoSync(){try{const s=await this.store.getItem(this.key);return parseMetadata(s)}catch{return{}}}async setNoSync(s,d){const _=await this.getNoSync();return _[s]=d,await this.putNoSync(_),!0}async putNoSync(s){await this.store.setItem(this.key,JSON.stringify(s)),this.cache&&(this.cachedValue=s)}async delNoSync(s){const d=await this.getNoSync();return delete d[s],await this.putNoSync(d),!0}async put(s){if(this.readOnly)throw new PermissionError("attributes are read-only");return this.putNoSync(s)}async setItem(s,d){if(this.readOnly)throw new PermissionError("attributes are read-only");return this.setNoSync(s,d)}async getItem(s){return(await this.asObject())[s]}async deleteItem(s){if(this.readOnly)throw new PermissionError("attributes are read-only");return this.delNoSync(s)}async containsItem(s){return(await this.asObject())[s]!==void 0}proxy(){return createProxy(this)}}const Float16Array=globalThis.Float16Array,DTYPE_TYPEDARRAY_MAPPING={"|b":Int8Array,"|b1":Uint8Array,"|B":Uint8Array,"|u1":Uint8Array,"|i1":Int8Array,"<b":Int8Array,"<B":Uint8Array,"<u1":Uint8Array,"<i1":Int8Array,"<u2":Uint16Array,"<i2":Int16Array,"<u4":Uint32Array,"<i4":Int32Array,"<f4":Float32Array,"<f2":Float16Array,"<f8":Float64Array,">b":Int8Array,">B":Uint8Array,">u1":Uint8Array,">i1":Int8Array,">u2":Uint16Array,">i2":Int16Array,">u4":Uint32Array,">i4":Int32Array,">f4":Float32Array,">f2":Float16Array,">f8":Float64Array};function getTypedArrayCtr(f){const s=DTYPE_TYPEDARRAY_MAPPING[f];if(!s)throw f.slice(1)==="f2"?Error(`'${f}' is not supported natively in zarr.js. In order to access this dataset you must make Float16Array available as a global. See https://github.com/gzuidhof/zarr.js/issues/127`):Error(`Dtype not recognized or not supported in zarr.js, got ${f}.`);return s}function getTypedArrayDtypeString(f){if(f instanceof Uint8Array)return"|u1";if(f instanceof Int8Array)return"|i1";if(f instanceof Uint16Array)return"<u2";if(f instanceof Int16Array)return"<i2";if(f instanceof Uint32Array)return"<u4";if(f instanceof Int32Array)return"<i4";if(f instanceof Float32Array)return"<f4";if(f instanceof Float64Array)return"<f8";throw new ValueError("Mapping for TypedArray to Dtypestring not known")}function getNestedArrayConstructor(f){return f.byteLength!==void 0?f.constructor:getNestedArrayConstructor(f[0])}function sliceNestedArray(f,s,d){const _=normalizeArraySelection(d,s),[S,T]=selectionToSliceIndices(_,s);return[_sliceNestedArray(f,s,S),T]}function _sliceNestedArray(f,s,d){const _=d[0];if(typeof _=="number")return s.length===1?f[_]:_sliceNestedArray(f[_],s.slice(1),d.slice(1));const[S,T,F,M]=_;if(M===0)return new(getNestedArrayConstructor(f))(0);if(s.length===1){if(F===1)return f.slice(S,T);const H=new f.constructor(M);for(let J=0;J<M;J++)H[J]=f[S+J*F];return H}let P=new Array(M);for(let H=0;H<M;H++)P[H]=_sliceNestedArray(f[S+H*F],s.slice(1),d.slice(1));return M>0&&typeof P[0]=="number"&&(P=f[0].constructor.from(P)),P}function setNestedArrayToScalar(f,s,d,_){const S=normalizeArraySelection(_,d,!0),[T,F]=selectionToSliceIndices(S,d);_setNestedArrayToScalar(f,s,d,T)}function setNestedArray(f,s,d,_,S){const T=normalizeArraySelection(S,d,!1),[F,M]=selectionToSliceIndices(T,d);if(JSON.stringify(M)!==JSON.stringify(_))throw new ValueError(`Shape mismatch in target and source NestedArray: ${M} and ${_}`);_setNestedArray(f,s,d,F)}function _setNestedArray(f,s,d,_){const S=_[0];if(typeof s=="number"){_setNestedArrayToScalar(f,s,d,_.map(H=>typeof H=="number"?[H,H+1,1,1]:H));return}if(typeof S=="number"){_setNestedArray(f[S],s,d.slice(1),_.slice(1));return}const[T,F,M,P]=S;if(d.length===1){if(M===1)f.set(s,T);else for(let H=0;H<P;H++)f[T+H*M]=s[H];return}for(let H=0;H<P;H++)_setNestedArray(f[T+H*M],s[H],d.slice(1),_.slice(1))}function _setNestedArrayToScalar(f,s,d,_){const S=_[0],[T,F,M,P]=S;if(d.length===1){if(M===1)f.fill(s,T,F);else for(let H=0;H<P;H++)f[T+H*M]=s;return}for(let H=0;H<P;H++)_setNestedArrayToScalar(f[T+H*M],s,d.slice(1),_.slice(1))}function flattenNestedArray(f,s,d){d===void 0&&(d=getNestedArrayConstructor(f));const _=s.reduce((T,F)=>T*F,1),S=new d(_);return _flattenNestedArray(f,s,S,0),S}function _flattenNestedArray(f,s,d,_){if(s.length===1){d.set(f,_);return}if(s.length===2){for(let F=0;F<s[0];F++)d.set(f[F],_+s[1]*F);return f}const S=s.slice(1),T=S.reduce((F,M)=>F*M,1);for(let F=0;F<s[0];F++)_flattenNestedArray(f[F],S,d,_+T*F);return f}class NestedArray{constructor(s,d,_){const S=s!==null&&!!s.BYTES_PER_ELEMENT;if(d===void 0){if(!S)throw new ValueError("Shape argument is required unless you pass in a TypedArray");d=[s.length]}if(_===void 0){if(!S)throw new ValueError("Dtype argument is required unless you pass in a TypedArray");_=getTypedArrayDtypeString(s)}if(d=normalizeShape(d),this.shape=d,this.dtype=_,S&&d.length!==1&&(s=s.buffer),this.shape.length===0)this.data=new(getTypedArrayCtr(_))(1);else if(IS_NODE&&Buffer.isBuffer(s)||isArrayBufferLike(s)||s===null){const T=d.reduce((P,H)=>P*H,1);s===null&&(s=new ArrayBuffer(T*parseInt(_[_.length-1],10)));const F=s.byteLength/parseInt(_[_.length-1],10);if(T!==F)throw new Error(`Buffer has ${F} of dtype ${_}, shape is too large or small ${d} (flat=${T})`);const M=getTypedArrayCtr(_);this.data=createNestedArray(s,M,d)}else this.data=s}get(s){const[d,_]=sliceNestedArray(this.data,this.shape,s);return _.length===0?d:new NestedArray(d,_,this.dtype)}set(s=null,d){s===null&&(s=[slice$2(null)]),typeof d=="number"?this.shape.length===0?this.data[0]=d:setNestedArrayToScalar(this.data,d,this.shape,s):setNestedArray(this.data,d.data,this.shape,d.shape,s)}flatten(){return this.shape.length===1?this.data:flattenNestedArray(this.data,this.shape,getTypedArrayCtr(this.dtype))}static arange(s,d="<i4"){const _=getTypedArrayCtr(d),S=rangeTypedArray([s],_);return new NestedArray(S,[s],d)}}function rangeTypedArray(f,s){const d=f.reduce((S,T)=>S*T,1),_=new s(d);return _.set([...Array(d).keys()]),_}function createNestedArray(f,s,d,_=0){if(d.length===1)return new s(f.slice(_,_+d[0]*s.BYTES_PER_ELEMENT));const S=new Array(d[0]);if(d.length===2){for(let M=0;M<d[0];M++)S[M]=new s(f.slice(_+d[1]*M*s.BYTES_PER_ELEMENT,_+d[1]*(M+1)*s.BYTES_PER_ELEMENT));return S}const T=d.slice(1),F=T.reduce((M,P)=>M*P,1);for(let M=0;M<d[0];M++)S[M]=createNestedArray(f,s,T,_+F*M*s.BYTES_PER_ELEMENT);return S}function setRawArrayToScalar(f,s,d,_,S){const T=normalizeArraySelection(_,d,!0),[F]=selectionToSliceIndices(T,d);_setRawArrayToScalar(S,f,s,F)}function setRawArray(f,s,d,_,S,T,F){const M=normalizeArraySelection(_,d,!1),[P,H]=selectionToSliceIndices(M,d);if(JSON.stringify(H)!==JSON.stringify(F))throw new ValueError(`Shape mismatch in target and source RawArray: ${H} and ${F}`);_setRawArray(f,s,P,S,T)}function setRawArrayFromChunkItem(f,s,d,_,S,T,F,M){const P=normalizeArraySelection(_,d,!0),[H]=selectionToSliceIndices(P,d),J=normalizeArraySelection(M,F,!1),[K]=selectionToSliceIndices(J,F);_setRawArrayFromChunkItem(f,s,H,S,T,K)}function _setRawArrayToScalar(f,s,d,_){const[S,...T]=_,[F,...M]=d,[P,H,J,K]=S;if(d.length===1){if(J===1&&F===1)s.fill(f,P,P+K);else for(let z=0;z<K;z++)s[F*(P+J*z)]=f;return}for(let z=0;z<K;z++)_setRawArrayToScalar(f,s.subarray(F*(P+J*z)),M,T)}function _setRawArray(f,s,d,_,S){if(d.length===0){f.set(_);return}const[T,...F]=d,[M,...P]=s;if(typeof T=="number"){_setRawArray(f.subarray(T*M),P,F,_,S);return}const[H,...J]=S,[K,z,oe,se]=T;if(s.length===1){if(oe===1&&M===1&&H===1)f.set(_.subarray(0,se),K);else for(let ae=0;ae<se;ae++)f[M*(K+oe*ae)]=_[H*ae];return}for(let ae=0;ae<se;ae++)_setRawArray(f.subarray(M*(K+ae*oe)),P,F,_.subarray(H*ae),J)}function _setRawArrayFromChunkItem(f,s,d,_,S,T){if(T.length===0){f.set(_.subarray(0,f.length));return}const[F,...M]=d,[P,...H]=T,[J,...K]=s,[z,...oe]=S;if(typeof P=="number"){_setRawArrayFromChunkItem(f,s,d,_.subarray(z*P),oe,H);return}const[se,ae,ge,pe]=F,[he,ve,be,Re]=P;if(s.length===1&&S.length===1){if(ge===1&&J===1&&be===1&&z===1)f.set(_.subarray(he,he+pe),se);else for(let Fe=0;Fe<pe;Fe++)f[J*(se+ge*Fe)]=_[z*(he+be*Fe)];return}for(let Fe=0;Fe<pe;Fe++)_setRawArrayFromChunkItem(f.subarray(J*(se+Fe*ge)),K,M,_.subarray(z*(he+Fe*be)),oe,H)}class RawArray{constructor(s,d,_,S){const T=s!==null&&!!s.BYTES_PER_ELEMENT;if(d===void 0){if(!T)throw new ValueError("Shape argument is required unless you pass in a TypedArray");d=[s.length]}if(d=normalizeShape(d),_===void 0){if(!T)throw new ValueError("Dtype argument is required unless you pass in a TypedArray");_=getTypedArrayDtypeString(s)}if(S===void 0&&(S=getStrides(d)),this.shape=d,this.dtype=_,this.strides=S,T&&d.length!==1&&(s=s.buffer),this.shape.length===0)this.data=new(getTypedArrayCtr(_))(1);else if(IS_NODE&&Buffer.isBuffer(s)||isArrayBufferLike(s)||s===null){const F=d.reduce((H,J)=>H*J,1);s===null&&(s=new ArrayBuffer(F*parseInt(_[_.length-1],10)));const M=s.byteLength/parseInt(_[_.length-1],10);if(F!==M)throw new Error(`Buffer has ${M} of dtype ${_}, shape is too large or small ${d} (flat=${F})`);const P=getTypedArrayCtr(_);this.data=new P(s)}else this.data=s}set(s=null,d,_){s===null&&(s=[slice$2(null)]),typeof d=="number"?this.shape.length===0?this.data[0]=d:setRawArrayToScalar(this.data,this.strides,this.shape,s,d):d instanceof RawArray&&_?setRawArrayFromChunkItem(this.data,this.strides,this.shape,s,d.data,d.strides,d.shape,_):setRawArray(this.data,this.strides,this.shape,s,d.data,d.strides,d.shape)}}var eventemitter3$1={exports:{}};(function(f){var s=Object.prototype.hasOwnProperty,d="~";function _(){}Object.create&&(_.prototype=Object.create(null),new _().__proto__||(d=!1));function S(P,H,J){this.fn=P,this.context=H,this.once=J||!1}function T(P,H,J,K,z){if(typeof J!="function")throw new TypeError("The listener must be a function");var oe=new S(J,K||P,z),se=d?d+H:H;return P._events[se]?P._events[se].fn?P._events[se]=[P._events[se],oe]:P._events[se].push(oe):(P._events[se]=oe,P._eventsCount++),P}function F(P,H){--P._eventsCount===0?P._events=new _:delete P._events[H]}function M(){this._events=new _,this._eventsCount=0}M.prototype.eventNames=function(){var H=[],J,K;if(this._eventsCount===0)return H;for(K in J=this._events)s.call(J,K)&&H.push(d?K.slice(1):K);return Object.getOwnPropertySymbols?H.concat(Object.getOwnPropertySymbols(J)):H},M.prototype.listeners=function(H){var J=d?d+H:H,K=this._events[J];if(!K)return[];if(K.fn)return[K.fn];for(var z=0,oe=K.length,se=new Array(oe);z<oe;z++)se[z]=K[z].fn;return se},M.prototype.listenerCount=function(H){var J=d?d+H:H,K=this._events[J];return K?K.fn?1:K.length:0},M.prototype.emit=function(H,J,K,z,oe,se){var ae=d?d+H:H;if(!this._events[ae])return!1;var ge=this._events[ae],pe=arguments.length,he,ve;if(ge.fn){switch(ge.once&&this.removeListener(H,ge.fn,void 0,!0),pe){case 1:return ge.fn.call(ge.context),!0;case 2:return ge.fn.call(ge.context,J),!0;case 3:return ge.fn.call(ge.context,J,K),!0;case 4:return ge.fn.call(ge.context,J,K,z),!0;case 5:return ge.fn.call(ge.context,J,K,z,oe),!0;case 6:return ge.fn.call(ge.context,J,K,z,oe,se),!0}for(ve=1,he=new Array(pe-1);ve<pe;ve++)he[ve-1]=arguments[ve];ge.fn.apply(ge.context,he)}else{var be=ge.length,Re;for(ve=0;ve<be;ve++)switch(ge[ve].once&&this.removeListener(H,ge[ve].fn,void 0,!0),pe){case 1:ge[ve].fn.call(ge[ve].context);break;case 2:ge[ve].fn.call(ge[ve].context,J);break;case 3:ge[ve].fn.call(ge[ve].context,J,K);break;case 4:ge[ve].fn.call(ge[ve].context,J,K,z);break;default:if(!he)for(Re=1,he=new Array(pe-1);Re<pe;Re++)he[Re-1]=arguments[Re];ge[ve].fn.apply(ge[ve].context,he)}}return!0},M.prototype.on=function(H,J,K){return T(this,H,J,K,!1)},M.prototype.once=function(H,J,K){return T(this,H,J,K,!0)},M.prototype.removeListener=function(H,J,K,z){var oe=d?d+H:H;if(!this._events[oe])return this;if(!J)return F(this,oe),this;var se=this._events[oe];if(se.fn)se.fn===J&&(!z||se.once)&&(!K||se.context===K)&&F(this,oe);else{for(var ae=0,ge=[],pe=se.length;ae<pe;ae++)(se[ae].fn!==J||z&&!se[ae].once||K&&se[ae].context!==K)&&ge.push(se[ae]);ge.length?this._events[oe]=ge.length===1?ge[0]:ge:F(this,oe)}return this},M.prototype.removeAllListeners=function(H){var J;return H?(J=d?d+H:H,this._events[J]&&F(this,J)):(this._events=new _,this._eventsCount=0),this},M.prototype.off=M.prototype.removeListener,M.prototype.addListener=M.prototype.on,M.prefixed=d,M.EventEmitter=M,f.exports=M})(eventemitter3$1);var EventEmitter=eventemitter3$1.exports;class TimeoutError extends Error{constructor(s){super(s),this.name="TimeoutError"}}function pTimeout(f,s,d,_){let S;const T=new Promise((F,M)=>{if(typeof s!="number"||s<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(s===Number.POSITIVE_INFINITY){F(f);return}_={customTimers:{setTimeout,clearTimeout},..._},S=_.customTimers.setTimeout.call(void 0,()=>{if(typeof d=="function"){try{F(d())}catch(J){M(J)}return}const P=typeof d=="string"?d:`Promise timed out after ${s} milliseconds`,H=d instanceof Error?d:new TimeoutError(P);typeof f.cancel=="function"&&f.cancel(),M(H)},s),(async()=>{try{F(await f)}catch(P){M(P)}finally{_.customTimers.clearTimeout.call(void 0,S)}})()});return T.clear=()=>{clearTimeout(S),S=void 0},T}function lowerBound(f,s,d){let _=0,S=f.length;for(;S>0;){const T=Math.trunc(S/2);let F=_+T;d(f[F],s)<=0?(_=++F,S-=T+1):S=T}return _}let PriorityQueue$1=class{constructor(){Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:[]})}enqueue(s,d){var _;d={priority:0,...d};const S={priority:d.priority,run:s};if(this.size&&((_=this._queue[this.size-1])===null||_===void 0?void 0:_.priority)>=d.priority){this._queue.push(S);return}const T=lowerBound(this._queue,S,(F,M)=>M.priority-F.priority);this._queue.splice(T,0,S)}dequeue(){const s=this._queue.shift();return s==null?void 0:s.run}filter(s){return this._queue.filter(d=>d.priority===s.priority).map(d=>d.run)}get size(){return this._queue.length}};const empty$1$1=()=>{},timeoutError=new TimeoutError;class PQueue extends EventEmitter{constructor(s){var d,_,S,T;if(super(),Object.defineProperty(this,"_carryoverConcurrencyCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isIntervalIgnored",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalCap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalEnd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_timeoutId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queueClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pendingCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_concurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isPaused",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_resolveEmpty",{enumerable:!0,configurable:!0,writable:!0,value:empty$1$1}),Object.defineProperty(this,"_resolveIdle",{enumerable:!0,configurable:!0,writable:!0,value:empty$1$1}),Object.defineProperty(this,"_timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_throwOnTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),s={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue$1,...s},!(typeof s.intervalCap=="number"&&s.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(_=(d=s.intervalCap)===null||d===void 0?void 0:d.toString())!==null&&_!==void 0?_:""}\` (${typeof s.intervalCap})`);if(s.interval===void 0||!(Number.isFinite(s.interval)&&s.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(T=(S=s.interval)===null||S===void 0?void 0:S.toString())!==null&&T!==void 0?T:""}\` (${typeof s.interval})`);this._carryoverConcurrencyCount=s.carryoverConcurrencyCount,this._isIntervalIgnored=s.intervalCap===Number.POSITIVE_INFINITY||s.interval===0,this._intervalCap=s.intervalCap,this._interval=s.interval,this._queue=new s.queueClass,this._queueClass=s.queueClass,this.concurrency=s.concurrency,this._timeout=s.timeout,this._throwOnTimeout=s.throwOnTimeout===!0,this._isPaused=s.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=empty$1$1,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=empty$1$1,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const s=Date.now();if(this._intervalId===void 0){const d=this._intervalEnd-s;if(d<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},d)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const s=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const d=this._queue.dequeue();return d?(this.emit("active"),d(),s&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(s){if(!(typeof s=="number"&&s>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${s}\` (${typeof s})`);this._concurrency=s,this._processQueue()}async add(s,d={}){return new Promise((_,S)=>{const T=async()=>{this._pendingCount++,this._intervalCount++;try{const M=await(this._timeout===void 0&&d.timeout===void 0?s():pTimeout(Promise.resolve(s()),d.timeout===void 0?this._timeout:d.timeout,()=>{(d.throwOnTimeout===void 0?this._throwOnTimeout:d.throwOnTimeout)&&S(timeoutError)}));_(M),this.emit("completed",M)}catch(F){S(F),this.emit("error",F)}this._next()};this._queue.enqueue(T,d),this._tryToStartAnother(),this.emit("add")})}async addAll(s,d){return Promise.all(s.map(async _=>this.add(_,d)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(s=>{const d=this._resolveEmpty;this._resolveEmpty=()=>{d(),s()}})}async onSizeLessThan(s){if(!(this._queue.size<s))return new Promise(d=>{const _=()=>{this._queue.size<s&&(this.removeListener("next",_),d())};this.on("next",_)})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(s=>{const d=this._resolveIdle;this._resolveIdle=()=>{d(),s()}})}get size(){return this._queue.size}sizeBy(s){return this._queue.filter(s).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(s){this._timeout=s}}class ZarrArray{constructor(s,d=null,_,S=!1,T=null,F=!0,M=!0){this.store=s,this._chunkStore=T,this.path=normalizeStoragePath(d),this.keyPrefix=pathToPrefix(this.path),this.readOnly=S,this.cacheMetadata=F,this.cacheAttrs=M,this.meta=_,this.meta.compressor!==null?this.compressor=getCodec(this.meta.compressor):this.compressor=null;const P=this.keyPrefix+ATTRS_META_KEY;this.attrs=new Attributes(this.store,P,this.readOnly,M)}get chunkStore(){return this._chunkStore?this._chunkStore:this.store}get name(){return this.path.length>0?this.path[0]!=="/"?"/"+this.path:this.path:null}get basename(){const s=this.name;if(s===null)return null;const d=s.split("/");return d[d.length-1]}get shape(){return this.meta.shape}get chunks(){return this.meta.chunks}get chunkSize(){return this.chunks.reduce((s,d)=>s*d,1)}get dtype(){return this.meta.dtype}get fillValue(){const s=this.meta.fill_value;return s==="NaN"?NaN:s==="Infinity"?1/0:s==="-Infinity"?-1/0:this.meta.fill_value}get nDims(){return this.meta.shape.length}get size(){return this.meta.shape.reduce((s,d)=>s*d,1)}get length(){return this.shape[0]}get _chunkDataShape(){if(this.shape.length===0)return[1];{const s=[];for(let d=0;d<this.shape.length;d++)s[d]=Math.ceil(this.shape[d]/this.chunks[d]);return s}}get chunkDataShape(){return this._chunkDataShape}get numChunks(){return this.chunkDataShape.reduce((s,d)=>s*d,1)}static async create(s,d=null,_=!1,S=null,T=!0,F=!0){const M=await this.loadMetadataForConstructor(s,d);return new ZarrArray(s,d,M,_,S,T,F)}static async loadMetadataForConstructor(s,d){try{d=normalizeStoragePath(d);const _=pathToPrefix(d),S=await s.getItem(_+ARRAY_META_KEY);return parseMetadata(S)}catch(_){throw await containsGroup(s,d)?new ContainsGroupError(d??""):new Error("Failed to load metadata for ZarrArray:"+_.toString())}}async reloadMetadata(){const s=this.keyPrefix+ARRAY_META_KEY,d=this.store.getItem(s);return this.meta=parseMetadata(await d),this.meta}async refreshMetadata(){this.cacheMetadata||await this.reloadMetadata()}get(s=null,d={}){return this.getBasicSelection(s,!1,d)}getRaw(s=null,d={}){return this.getBasicSelection(s,!0,d)}async getBasicSelection(s,d=!1,{concurrencyLimit:_=10,progressCallback:S,storeOptions:T}={}){if(this.cacheMetadata||await this.reloadMetadata(),this.shape.length===0)throw new Error("Shape [] indexing is not supported yet");return this.getBasicSelectionND(s,d,_,S,T)}getBasicSelectionND(s,d,_,S,T){const F=new BasicIndexer(s,this);return this.getSelection(F,d,_,S,T)}async getSelection(s,d,_,S,T){const F=this.dtype,M=s.shape,P=s.shape.reduce((z,oe)=>z*oe,1);if(d&&P===this.chunkSize){const z=s.iter(),oe=z.next();if(oe.done===!1&&z.next().done===!0){const se=oe.value;return await this.decodeDirectToRawArray(se,M,P)}}const H=d?new RawArray(null,M,F):new NestedArray(null,M,F);if(P===0)return H;const J=new PQueue({concurrency:_}),K=[];if(S){let z=0,oe=0;for(const se of s.iter())oe+=1;S({progress:0,queueSize:oe});for(const se of s.iter())K.push(J.add(async()=>{await this.chunkGetItem(se.chunkCoords,se.chunkSelection,H,se.outSelection,s.dropAxes,T),z+=1,S({progress:z,queueSize:oe})}))}else for(const z of s.iter())K.push(J.add(()=>this.chunkGetItem(z.chunkCoords,z.chunkSelection,H,z.outSelection,s.dropAxes,T)));return await Promise.all(K),H.shape.length===0?H.data[0]:H}async chunkGetItem(s,d,_,S,T,F){if(s.length!==this._chunkDataShape.length)throw new ValueError(`Inconsistent shapes: chunkCoordsLength: ${s.length}, cDataShapeLength: ${this.chunkDataShape.length}`);const M=this.chunkKey(s);try{const P=await this.chunkStore.getItem(M,F),H=await this.decodeChunk(P);if(_ instanceof NestedArray){if(isContiguousSelection(S)&&isTotalSlice(d,this.chunks)&&!this.meta.filters){_.set(S,this.toNestedArray(H));return}const K=this.toNestedArray(H).get(d);if(T!==null)throw new Error("Drop axes is not supported yet");_.set(S,K)}else _.set(S,this.chunkBufferToRawArray(H),d)}catch(P){if(isKeyError(P))this.fillValue!==null&&_.set(S,this.fillValue);else throw P}}async getRawChunk(s,d){if(s.length!==this.shape.length)throw new Error(`Chunk coordinates ${s.join(".")} do not correspond to shape ${this.shape}.`);try{for(let M=0;M<s.length;M++){const P=Math.ceil(this.shape[M]/this.chunks[M]);s[M]=normalizeIntegerSelection(s[M],P)}}catch(M){throw M instanceof BoundsCheckError$1?new BoundsCheckError$1(`index ${s.join(".")} is out of bounds for shape: ${this.shape} and chunks ${this.chunks}`):M}const _=this.chunkKey(s),S=this.chunkStore.getItem(_,d==null?void 0:d.storeOptions),T=await this.decodeChunk(await S),F=this.chunks.filter(M=>M!==1);return new RawArray(T,F,this.dtype)}chunkKey(s){var d;const _=(d=this.meta.dimension_separator)!==null&&d!==void 0?d:".";return this.keyPrefix+s.join(_)}ensureByteArray(s){return typeof s=="string"?new Uint8Array(Buffer.from(s).buffer):new Uint8Array(s)}toTypedArray(s){return new(getTypedArrayCtr(this.dtype))(s)}toNestedArray(s){const d=this.ensureByteArray(s).buffer;return new NestedArray(d,this.chunks,this.dtype)}async decodeChunk(s){let d=this.ensureByteArray(s);if(this.compressor!==null&&(d=await(await this.compressor).decode(d)),this.dtype.includes(">")&&byteSwapInplace(this.toTypedArray(d.buffer)),this.meta.order==="F"&&this.nDims>1){const _=this.toTypedArray(d.buffer),S=new(getTypedArrayCtr(this.dtype))(_.length);return convertColMajorToRowMajor(_,S,this.chunks),S.buffer}return d.buffer}chunkBufferToRawArray(s){return new RawArray(s,this.chunks,this.dtype)}async decodeDirectToRawArray({chunkCoords:s},d,_){const S=this.chunkKey(s);try{const T=await this.chunkStore.getItem(S);return new RawArray(await this.decodeChunk(T),d,this.dtype)}catch(T){if(isKeyError(T)){const F=new(getTypedArrayCtr(this.dtype))(_);return new RawArray(F.fill(this.fillValue),d)}else throw T}}async set(s=null,d,_={}){await this.setBasicSelection(s,d,_)}async setBasicSelection(s,d,{concurrencyLimit:_=10,progressCallback:S}={}){if(this.readOnly)throw new PermissionError("Object is read only");if(this.cacheMetadata||await this.reloadMetadata(),this.shape.length===0)throw new Error("Shape [] indexing is not supported yet");await this.setBasicSelectionND(s,d,_,S)}async setBasicSelectionND(s,d,_,S){const T=new BasicIndexer(s,this);await this.setSelection(T,d,_,S)}getChunkValue(s,d,_,S){let T;if(S.length===0)T=_;else if(typeof _=="number")T=_;else if(T=_.get(s.outSelection),d.dropAxes!==null)throw new Error("Handling drop axes not supported yet");return T}async setSelection(s,d,_,S){const T=s.shape;if(T.length!==0){if(typeof d!="number")if(d instanceof NestedArray){if(!arrayEquals1D(d.shape,T))throw new ValueError(`Shape mismatch in source NestedArray and set selection: ${d.shape} and ${T}`)}else throw new Error("Unknown data type for setting :(")}const F=new PQueue({concurrency:_}),M=[];if(S){let P=0;for(const J of s.iter())P+=1;let H=0;S({progress:0,queueSize:P});for(const J of s.iter()){const K=this.getChunkValue(J,s,d,T);M.push(F.add(async()=>{await this.chunkSetItem(J.chunkCoords,J.chunkSelection,K),H+=1,S({progress:H,queueSize:P})}))}}else for(const P of s.iter()){const H=this.getChunkValue(P,s,d,T);M.push(F.add(()=>this.chunkSetItem(P.chunkCoords,P.chunkSelection,H)))}await Promise.all(M)}async chunkSetItem(s,d,_){if(this.meta.order==="F"&&this.nDims>1)throw new Error("Setting content for arrays in F-order is not supported.");const S=this.chunkKey(s);let T=null;const F=getTypedArrayCtr(this.dtype),M=this.chunkSize;if(isTotalSlice(d,this.chunks))typeof _=="number"?(T=new F(M),T.fill(_)):T=_.flatten();else{let H;try{const K=await this.chunkStore.getItem(S),z=await this.decodeChunk(K);H=this.toTypedArray(z)}catch(K){if(isKeyError(K))H=new F(M),this.fillValue!==null&&H.fill(this.fillValue);else throw K}const J=new NestedArray(H,this.chunks,this.dtype);J.set(d,_),T=J.flatten()}const P=await this.encodeChunk(T);this.chunkStore.setItem(S,P)}async encodeChunk(s){if(this.dtype.includes(">")&&(s=byteSwap(s)),this.compressor!==null){const d=new Uint8Array(s.buffer);return(await(await this.compressor).encode(d)).buffer}return s.buffer}}class MemoryStore{constructor(s={}){this.root=s}proxy(){return createProxy(this)}getParent(s){let d=this.root;const _=s.split("/");for(const S of _.slice(0,_.length-1))if(d=d[S],!d)throw Error(s);return[d,_[_.length-1]]}requireParent(s){let d=this.root;const _=s.split("/");for(const S of _.slice(0,_.length-1))d[S]===void 0&&(d[S]={}),d=d[S];return[d,_[_.length-1]]}getItem(s){const[d,_]=this.getParent(s),S=d[_];if(S===void 0)throw new KeyError(s);return S}setItem(s,d){const[_,S]=this.requireParent(s);return _[S]=d,!0}deleteItem(s){const[d,_]=this.getParent(s);return delete d[_]}containsItem(s){try{return this.getItem(s)!==void 0}catch{return!1}}keys(){throw new Error("Method not implemented.")}}var HTTPMethod;(function(f){f.HEAD="HEAD",f.GET="GET",f.PUT="PUT"})(HTTPMethod||(HTTPMethod={}));const DEFAULT_METHODS=[HTTPMethod.HEAD,HTTPMethod.GET,HTTPMethod.PUT];class HTTPStore{constructor(s,d={}){this.url=s;const{fetchOptions:_={},supportedMethods:S=DEFAULT_METHODS}=d;this.fetchOptions=_,this.supportedMethods=new Set(S)}keys(){throw new Error("Method not implemented.")}async getItem(s,d){const _=resolveUrl(this.url,s),S=await fetch(_,{...this.fetchOptions,...d});if(S.status===404)throw new KeyError(s);if(S.status!==200)throw new HTTPError(String(S.status));return IS_NODE?Buffer.from(await S.arrayBuffer()):S.arrayBuffer()}async setItem(s,d){if(!this.supportedMethods.has(HTTPMethod.PUT))throw new Error("HTTP PUT no a supported method for store.");const _=resolveUrl(this.url,s);return typeof d=="string"&&(d=new TextEncoder().encode(d).buffer),(await fetch(_,{...this.fetchOptions,method:HTTPMethod.PUT,body:d})).status.toString()[0]==="2"}deleteItem(s){throw new Error("Method not implemented.")}async containsItem(s){const d=resolveUrl(this.url,s),_=this.supportedMethods.has(HTTPMethod.HEAD)?HTTPMethod.HEAD:HTTPMethod.GET;return(await fetch(d,{...this.fetchOptions,method:_})).status===200}}async function create$4({shape:f,chunks:s=!0,dtype:d="<i4",compressor:_=null,fillValue:S=null,order:T="C",store:F,overwrite:M=!1,path:P,chunkStore:H,filters:J,cacheMetadata:K=!0,cacheAttrs:z=!0,readOnly:oe=!1,dimensionSeparator:se}){const ae=normalizeStoreArgument(F);return await initArray(ae,f,s,d,P,_,S,T,M,H,J,se),await ZarrArray.create(ae,P,oe,H,K,z)}async function empty$2(f,s={}){return s.fillValue=null,create$4({shape:f,...s})}async function zeros(f,s={}){return s.fillValue=0,create$4({shape:f,...s})}async function ones(f,s={}){return s.fillValue=1,create$4({shape:f,...s})}async function full(f,s,d={}){return d.fillValue=s,create$4({shape:f,...d})}async function array$2(f,s={}){let d=null;f instanceof NestedArray?(d=f.shape,s.dtype=s.dtype===void 0?f.dtype:s.dtype):d=f.byteLength;const _=s.readOnly===void 0?!1:s.readOnly;s.readOnly=!1;const S=await create$4({shape:d,...s});return await S.set(null,f),S.readOnly=_,S}function normalizeStoreArgument(f){return f===void 0?new MemoryStore:typeof f=="string"?new HTTPStore(f):f}let Group$1=class _B{constructor(s,d=null,_,S=!1,T=null,F=!0){this.store=s,this._chunkStore=T,this.path=normalizeStoragePath(d),this.keyPrefix=pathToPrefix(this.path),this.readOnly=S,this.meta=_;const M=this.keyPrefix+ATTRS_META_KEY;this.attrs=new Attributes(this.store,M,this.readOnly,F)}get name(){return this.path.length>0?this.path[0]!=="/"?"/"+this.path:this.path:"/"}get basename(){const s=this.name.split("/");return s[s.length-1]}get chunkStore(){return this._chunkStore?this._chunkStore:this.store}static async create(s,d=null,_=!1,S=null,T=!0){const F=await this.loadMetadataForConstructor(s,d);return new _B(s,d,F,_,S,T)}static async loadMetadataForConstructor(s,d){d=normalizeStoragePath(d);const _=pathToPrefix(d);try{const S=await s.getItem(_+GROUP_META_KEY);return parseMetadata(S)}catch{throw await containsArray(s,d)?new ContainsArrayError(d):new GroupNotFoundError(d)}}itemPath(s){const d=typeof s=="string"&&s.length>0&&s[0]==="/",_=normalizeStoragePath(s);return!d&&this.path.length>0?this.keyPrefix+_:_}async createGroup(s,d=!1){if(this.readOnly)throw new PermissionError("group is read only");const _=this.itemPath(s);return await initGroup(this.store,_,this._chunkStore,d),_B.create(this.store,_,this.readOnly,this._chunkStore,this.attrs.cache)}async requireGroup(s,d=!1){if(this.readOnly)throw new PermissionError("group is read only");const _=this.itemPath(s);return await containsGroup(this.store,_)||await initGroup(this.store,_,this._chunkStore,d),_B.create(this.store,_,this.readOnly,this._chunkStore,this.attrs.cache)}getOptsForArrayCreation(s,d={}){const _=this.itemPath(s);return d.path=_,d.cacheAttrs===void 0&&(d.cacheAttrs=this.attrs.cache),d.store=this.store,d.chunkStore=this.chunkStore,d}array(s,d,_,S){if(this.readOnly)throw new PermissionError("group is read only");return _=this.getOptsForArrayCreation(s,_),_.overwrite=S===void 0?_.overwrite:S,array$2(d,_)}empty(s,d,_={}){if(this.readOnly)throw new PermissionError("group is read only");return _=this.getOptsForArrayCreation(s,_),empty$2(d,_)}zeros(s,d,_={}){if(this.readOnly)throw new PermissionError("group is read only");return _=this.getOptsForArrayCreation(s,_),zeros(d,_)}ones(s,d,_={}){if(this.readOnly)throw new PermissionError("group is read only");return _=this.getOptsForArrayCreation(s,_),ones(d,_)}full(s,d,_,S={}){if(this.readOnly)throw new PermissionError("group is read only");return S=this.getOptsForArrayCreation(s,S),full(d,_,S)}createDataset(s,d,_,S){if(this.readOnly)throw new PermissionError("group is read only");S=this.getOptsForArrayCreation(s,S);let T;if(_===void 0){if(d===void 0)throw new ValueError("Shape must be set if no data is passed to CreateDataset");T=create$4({shape:d,...S})}else T=array$2(_,S);return T}async getItem(s){const d=this.itemPath(s);if(await containsArray(this.store,d))return ZarrArray.create(this.store,d,this.readOnly,this.chunkStore,void 0,this.attrs.cache);if(await containsGroup(this.store,d))return _B.create(this.store,d,this.readOnly,this._chunkStore,this.attrs.cache);throw new KeyError(s)}async setItem(s,d){return await this.array(s,d,{},!0),!0}async deleteItem(s){throw this.readOnly?new PermissionError("group is read only"):new Error("Method not implemented.")}async containsItem(s){const d=this.itemPath(s);return await containsArray(this.store,d)||containsGroup(this.store,d)}proxy(){return createProxy(this)}};async function openGroup(f,s=null,d="a",_,S=!0){if(f=normalizeStoreArgument(f),s=normalizeStoragePath(s),d==="r"||d==="r+"){if(!await containsGroup(f,s))throw await containsArray(f,s)?new ContainsArrayError(s):new GroupNotFoundError(s)}else if(d==="w")await initGroup(f,s,_,!0);else if(d==="a"){if(!await containsGroup(f,s)){if(await containsArray(f,s))throw new ContainsArrayError(s);await initGroup(f,s,_)}}else if(d==="w-"||d==="x"){if(await containsArray(f,s))throw new ContainsArrayError(s);if(await containsGroup(f,s))throw new ContainsGroupError(s);await initGroup(f,s,_)}else throw new ValueError(`Invalid mode argument: ${d}`);const T=d==="r";return Group$1.create(f,s,T,_,S)}/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2;function zero$2(f){let s=f.length;for(;--s>=0;)f[s]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES+2)*2);zero$2(static_ltree);const static_dtree=new Array(D_CODES*2);zero$2(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$2(_dist_code);const _length_code=new Array(MAX_MATCH-MIN_MATCH+1);zero$2(_length_code);const base_length=new Array(LENGTH_CODES);zero$2(base_length);const base_dist=new Array(D_CODES);zero$2(base_dist);function StaticTreeDesc(f,s,d,_,S){this.static_tree=f,this.extra_bits=s,this.extra_base=d,this.elems=_,this.max_length=S,this.has_stree=f&&f.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(f,s){this.dyn_tree=f,this.max_code=0,this.stat_desc=s}const d_code=f=>f<256?_dist_code[f]:_dist_code[256+(f>>>7)],put_short=(f,s)=>{f.pending_buf[f.pending++]=s&255,f.pending_buf[f.pending++]=s>>>8&255},send_bits=(f,s,d)=>{f.bi_valid>Buf_size-d?(f.bi_buf|=s<<f.bi_valid&65535,put_short(f,f.bi_buf),f.bi_buf=s>>Buf_size-f.bi_valid,f.bi_valid+=d-Buf_size):(f.bi_buf|=s<<f.bi_valid&65535,f.bi_valid+=d)},send_code=(f,s,d)=>{send_bits(f,d[s*2],d[s*2+1])},bi_reverse=(f,s)=>{let d=0;do d|=f&1,f>>>=1,d<<=1;while(--s>0);return d>>>1},bi_flush=f=>{f.bi_valid===16?(put_short(f,f.bi_buf),f.bi_buf=0,f.bi_valid=0):f.bi_valid>=8&&(f.pending_buf[f.pending++]=f.bi_buf&255,f.bi_buf>>=8,f.bi_valid-=8)},gen_bitlen=(f,s)=>{const d=s.dyn_tree,_=s.max_code,S=s.stat_desc.static_tree,T=s.stat_desc.has_stree,F=s.stat_desc.extra_bits,M=s.stat_desc.extra_base,P=s.stat_desc.max_length;let H,J,K,z,oe,se,ae=0;for(z=0;z<=MAX_BITS;z++)f.bl_count[z]=0;for(d[f.heap[f.heap_max]*2+1]=0,H=f.heap_max+1;H<HEAP_SIZE;H++)J=f.heap[H],z=d[d[J*2+1]*2+1]+1,z>P&&(z=P,ae++),d[J*2+1]=z,!(J>_)&&(f.bl_count[z]++,oe=0,J>=M&&(oe=F[J-M]),se=d[J*2],f.opt_len+=se*(z+oe),T&&(f.static_len+=se*(S[J*2+1]+oe)));if(ae!==0){do{for(z=P-1;f.bl_count[z]===0;)z--;f.bl_count[z]--,f.bl_count[z+1]+=2,f.bl_count[P]--,ae-=2}while(ae>0);for(z=P;z!==0;z--)for(J=f.bl_count[z];J!==0;)K=f.heap[--H],!(K>_)&&(d[K*2+1]!==z&&(f.opt_len+=(z-d[K*2+1])*d[K*2],d[K*2+1]=z),J--)}},gen_codes=(f,s,d)=>{const _=new Array(MAX_BITS+1);let S=0,T,F;for(T=1;T<=MAX_BITS;T++)_[T]=S=S+d[T-1]<<1;for(F=0;F<=s;F++){let M=f[F*2+1];M!==0&&(f[F*2]=bi_reverse(_[M]++,M))}},tr_static_init=()=>{let f,s,d,_,S;const T=new Array(MAX_BITS+1);for(d=0,_=0;_<LENGTH_CODES-1;_++)for(base_length[_]=d,f=0;f<1<<extra_lbits[_];f++)_length_code[d++]=_;for(_length_code[d-1]=_,S=0,_=0;_<16;_++)for(base_dist[_]=S,f=0;f<1<<extra_dbits[_];f++)_dist_code[S++]=_;for(S>>=7;_<D_CODES;_++)for(base_dist[_]=S<<7,f=0;f<1<<extra_dbits[_]-7;f++)_dist_code[256+S++]=_;for(s=0;s<=MAX_BITS;s++)T[s]=0;for(f=0;f<=143;)static_ltree[f*2+1]=8,f++,T[8]++;for(;f<=255;)static_ltree[f*2+1]=9,f++,T[9]++;for(;f<=279;)static_ltree[f*2+1]=7,f++,T[7]++;for(;f<=287;)static_ltree[f*2+1]=8,f++,T[8]++;for(gen_codes(static_ltree,L_CODES+1,T),f=0;f<D_CODES;f++)static_dtree[f*2+1]=5,static_dtree[f*2]=bi_reverse(f,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES,MAX_BL_BITS)},init_block=f=>{let s;for(s=0;s<L_CODES;s++)f.dyn_ltree[s*2]=0;for(s=0;s<D_CODES;s++)f.dyn_dtree[s*2]=0;for(s=0;s<BL_CODES;s++)f.bl_tree[s*2]=0;f.dyn_ltree[END_BLOCK*2]=1,f.opt_len=f.static_len=0,f.last_lit=f.matches=0},bi_windup=f=>{f.bi_valid>8?put_short(f,f.bi_buf):f.bi_valid>0&&(f.pending_buf[f.pending++]=f.bi_buf),f.bi_buf=0,f.bi_valid=0},copy_block=(f,s,d,_)=>{bi_windup(f),put_short(f,d),put_short(f,~d),f.pending_buf.set(f.window.subarray(s,s+d),f.pending),f.pending+=d},smaller=(f,s,d,_)=>{const S=s*2,T=d*2;return f[S]<f[T]||f[S]===f[T]&&_[s]<=_[d]},pqdownheap=(f,s,d)=>{const _=f.heap[d];let S=d<<1;for(;S<=f.heap_len&&(S<f.heap_len&&smaller(s,f.heap[S+1],f.heap[S],f.depth)&&S++,!smaller(s,_,f.heap[S],f.depth));)f.heap[d]=f.heap[S],d=S,S<<=1;f.heap[d]=_},compress_block=(f,s,d)=>{let _,S,T=0,F,M;if(f.last_lit!==0)do _=f.pending_buf[f.d_buf+T*2]<<8|f.pending_buf[f.d_buf+T*2+1],S=f.pending_buf[f.l_buf+T],T++,_===0?send_code(f,S,s):(F=_length_code[S],send_code(f,F+LITERALS+1,s),M=extra_lbits[F],M!==0&&(S-=base_length[F],send_bits(f,S,M)),_--,F=d_code(_),send_code(f,F,d),M=extra_dbits[F],M!==0&&(_-=base_dist[F],send_bits(f,_,M)));while(T<f.last_lit);send_code(f,END_BLOCK,s)},build_tree=(f,s)=>{const d=s.dyn_tree,_=s.stat_desc.static_tree,S=s.stat_desc.has_stree,T=s.stat_desc.elems;let F,M,P=-1,H;for(f.heap_len=0,f.heap_max=HEAP_SIZE,F=0;F<T;F++)d[F*2]!==0?(f.heap[++f.heap_len]=P=F,f.depth[F]=0):d[F*2+1]=0;for(;f.heap_len<2;)H=f.heap[++f.heap_len]=P<2?++P:0,d[H*2]=1,f.depth[H]=0,f.opt_len--,S&&(f.static_len-=_[H*2+1]);for(s.max_code=P,F=f.heap_len>>1;F>=1;F--)pqdownheap(f,d,F);H=T;do F=f.heap[1],f.heap[1]=f.heap[f.heap_len--],pqdownheap(f,d,1),M=f.heap[1],f.heap[--f.heap_max]=F,f.heap[--f.heap_max]=M,d[H*2]=d[F*2]+d[M*2],f.depth[H]=(f.depth[F]>=f.depth[M]?f.depth[F]:f.depth[M])+1,d[F*2+1]=d[M*2+1]=H,f.heap[1]=H++,pqdownheap(f,d,1);while(f.heap_len>=2);f.heap[--f.heap_max]=f.heap[1],gen_bitlen(f,s),gen_codes(d,P,f.bl_count)},scan_tree=(f,s,d)=>{let _,S=-1,T,F=s[0*2+1],M=0,P=7,H=4;for(F===0&&(P=138,H=3),s[(d+1)*2+1]=65535,_=0;_<=d;_++)T=F,F=s[(_+1)*2+1],!(++M<P&&T===F)&&(M<H?f.bl_tree[T*2]+=M:T!==0?(T!==S&&f.bl_tree[T*2]++,f.bl_tree[REP_3_6*2]++):M<=10?f.bl_tree[REPZ_3_10*2]++:f.bl_tree[REPZ_11_138*2]++,M=0,S=T,F===0?(P=138,H=3):T===F?(P=6,H=3):(P=7,H=4))},send_tree=(f,s,d)=>{let _,S=-1,T,F=s[0*2+1],M=0,P=7,H=4;for(F===0&&(P=138,H=3),_=0;_<=d;_++)if(T=F,F=s[(_+1)*2+1],!(++M<P&&T===F)){if(M<H)do send_code(f,T,f.bl_tree);while(--M!==0);else T!==0?(T!==S&&(send_code(f,T,f.bl_tree),M--),send_code(f,REP_3_6,f.bl_tree),send_bits(f,M-3,2)):M<=10?(send_code(f,REPZ_3_10,f.bl_tree),send_bits(f,M-3,3)):(send_code(f,REPZ_11_138,f.bl_tree),send_bits(f,M-11,7));M=0,S=T,F===0?(P=138,H=3):T===F?(P=6,H=3):(P=7,H=4)}},build_bl_tree=f=>{let s;for(scan_tree(f,f.dyn_ltree,f.l_desc.max_code),scan_tree(f,f.dyn_dtree,f.d_desc.max_code),build_tree(f,f.bl_desc),s=BL_CODES-1;s>=3&&f.bl_tree[bl_order[s]*2+1]===0;s--);return f.opt_len+=3*(s+1)+5+5+4,s},send_all_trees=(f,s,d,_)=>{let S;for(send_bits(f,s-257,5),send_bits(f,d-1,5),send_bits(f,_-4,4),S=0;S<_;S++)send_bits(f,f.bl_tree[bl_order[S]*2+1],3);send_tree(f,f.dyn_ltree,s-1),send_tree(f,f.dyn_dtree,d-1)},detect_data_type=f=>{let s=4093624447,d;for(d=0;d<=31;d++,s>>>=1)if(s&1&&f.dyn_ltree[d*2]!==0)return Z_BINARY;if(f.dyn_ltree[9*2]!==0||f.dyn_ltree[10*2]!==0||f.dyn_ltree[13*2]!==0)return Z_TEXT;for(d=32;d<LITERALS;d++)if(f.dyn_ltree[d*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init=f=>{static_init_done||(tr_static_init(),static_init_done=!0),f.l_desc=new TreeDesc(f.dyn_ltree,static_l_desc),f.d_desc=new TreeDesc(f.dyn_dtree,static_d_desc),f.bl_desc=new TreeDesc(f.bl_tree,static_bl_desc),f.bi_buf=0,f.bi_valid=0,init_block(f)},_tr_stored_block=(f,s,d,_)=>{send_bits(f,(STORED_BLOCK<<1)+(_?1:0),3),copy_block(f,s,d)},_tr_align=f=>{send_bits(f,STATIC_TREES<<1,3),send_code(f,END_BLOCK,static_ltree),bi_flush(f)},_tr_flush_block=(f,s,d,_)=>{let S,T,F=0;f.level>0?(f.strm.data_type===Z_UNKNOWN&&(f.strm.data_type=detect_data_type(f)),build_tree(f,f.l_desc),build_tree(f,f.d_desc),F=build_bl_tree(f),S=f.opt_len+3+7>>>3,T=f.static_len+3+7>>>3,T<=S&&(S=T)):S=T=d+5,d+4<=S&&s!==-1?_tr_stored_block(f,s,d,_):f.strategy===Z_FIXED||T===S?(send_bits(f,(STATIC_TREES<<1)+(_?1:0),3),compress_block(f,static_ltree,static_dtree)):(send_bits(f,(DYN_TREES<<1)+(_?1:0),3),send_all_trees(f,f.l_desc.max_code+1,f.d_desc.max_code+1,F+1),compress_block(f,f.dyn_ltree,f.dyn_dtree)),init_block(f),_&&bi_windup(f)},_tr_tally=(f,s,d)=>(f.pending_buf[f.d_buf+f.last_lit*2]=s>>>8&255,f.pending_buf[f.d_buf+f.last_lit*2+1]=s&255,f.pending_buf[f.l_buf+f.last_lit]=d&255,f.last_lit++,s===0?f.dyn_ltree[d*2]++:(f.matches++,s--,f.dyn_ltree[(_length_code[d]+LITERALS+1)*2]++,f.dyn_dtree[d_code(s)*2]++),f.last_lit===f.lit_bufsize-1);var _tr_init_1=_tr_init,_tr_stored_block_1=_tr_stored_block,_tr_flush_block_1=_tr_flush_block,_tr_tally_1=_tr_tally,_tr_align_1=_tr_align,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(f,s,d,_)=>{let S=f&65535|0,T=f>>>16&65535|0,F=0;for(;d!==0;){F=d>2e3?2e3:d,d-=F;do S=S+s[_++]|0,T=T+S|0;while(--F);S%=65521,T%=65521}return S|T<<16|0};var adler32_1=adler32;const makeTable=()=>{let f,s=[];for(var d=0;d<256;d++){f=d;for(var _=0;_<8;_++)f=f&1?3988292384^f>>>1:f>>>1;s[d]=f}return s},crcTable=new Uint32Array(makeTable()),crc32=(f,s,d,_)=>{const S=crcTable,T=_+d;f^=-1;for(let F=_;F<T;F++)f=f>>>8^S[(f^s[F])&255];return f^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:_tr_init$1,_tr_stored_block:_tr_stored_block$1,_tr_flush_block:_tr_flush_block$1,_tr_tally:_tr_tally$1,_tr_align:_tr_align$1}=trees,{Z_NO_FLUSH,Z_PARTIAL_FLUSH,Z_FULL_FLUSH,Z_FINISH,Z_BLOCK,Z_OK,Z_STREAM_END,Z_STREAM_ERROR,Z_DATA_ERROR,Z_BUF_ERROR,Z_DEFAULT_COMPRESSION,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED:Z_FIXED$1,Z_DEFAULT_STRATEGY,Z_UNKNOWN:Z_UNKNOWN$1,Z_DEFLATED}=constants$1,MAX_MEM_LEVEL=9,MAX_WBITS=15,DEF_MEM_LEVEL=8,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,MIN_MATCH$1=3,MAX_MATCH$1=258,MIN_LOOKAHEAD=MAX_MATCH$1+MIN_MATCH$1+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(f,s)=>(f.msg=messages[s],s),rank=f=>(f<<1)-(f>4?9:0),zero$1$1=f=>{let s=f.length;for(;--s>=0;)f[s]=0};let HASH_ZLIB=(f,s,d)=>(s<<f.hash_shift^d)&f.hash_mask,HASH=HASH_ZLIB;const flush_pending=f=>{const s=f.state;let d=s.pending;d>f.avail_out&&(d=f.avail_out),d!==0&&(f.output.set(s.pending_buf.subarray(s.pending_out,s.pending_out+d),f.next_out),f.next_out+=d,s.pending_out+=d,f.total_out+=d,f.avail_out-=d,s.pending-=d,s.pending===0&&(s.pending_out=0))},flush_block_only=(f,s)=>{_tr_flush_block$1(f,f.block_start>=0?f.block_start:-1,f.strstart-f.block_start,s),f.block_start=f.strstart,flush_pending(f.strm)},put_byte=(f,s)=>{f.pending_buf[f.pending++]=s},putShortMSB=(f,s)=>{f.pending_buf[f.pending++]=s>>>8&255,f.pending_buf[f.pending++]=s&255},read_buf=(f,s,d,_)=>{let S=f.avail_in;return S>_&&(S=_),S===0?0:(f.avail_in-=S,s.set(f.input.subarray(f.next_in,f.next_in+S),d),f.state.wrap===1?f.adler=adler32_1(f.adler,s,S,d):f.state.wrap===2&&(f.adler=crc32_1(f.adler,s,S,d)),f.next_in+=S,f.total_in+=S,S)},longest_match=(f,s)=>{let d=f.max_chain_length,_=f.strstart,S,T,F=f.prev_length,M=f.nice_match;const P=f.strstart>f.w_size-MIN_LOOKAHEAD?f.strstart-(f.w_size-MIN_LOOKAHEAD):0,H=f.window,J=f.w_mask,K=f.prev,z=f.strstart+MAX_MATCH$1;let oe=H[_+F-1],se=H[_+F];f.prev_length>=f.good_match&&(d>>=2),M>f.lookahead&&(M=f.lookahead);do if(S=s,!(H[S+F]!==se||H[S+F-1]!==oe||H[S]!==H[_]||H[++S]!==H[_+1])){_+=2,S++;do;while(H[++_]===H[++S]&&H[++_]===H[++S]&&H[++_]===H[++S]&&H[++_]===H[++S]&&H[++_]===H[++S]&&H[++_]===H[++S]&&H[++_]===H[++S]&&H[++_]===H[++S]&&_<z);if(T=MAX_MATCH$1-(z-_),_=z-MAX_MATCH$1,T>F){if(f.match_start=s,F=T,T>=M)break;oe=H[_+F-1],se=H[_+F]}}while((s=K[s&J])>P&&--d!==0);return F<=f.lookahead?F:f.lookahead},fill_window=f=>{const s=f.w_size;let d,_,S,T,F;do{if(T=f.window_size-f.lookahead-f.strstart,f.strstart>=s+(s-MIN_LOOKAHEAD)){f.window.set(f.window.subarray(s,s+s),0),f.match_start-=s,f.strstart-=s,f.block_start-=s,_=f.hash_size,d=_;do S=f.head[--d],f.head[d]=S>=s?S-s:0;while(--_);_=s,d=_;do S=f.prev[--d],f.prev[d]=S>=s?S-s:0;while(--_);T+=s}if(f.strm.avail_in===0)break;if(_=read_buf(f.strm,f.window,f.strstart+f.lookahead,T),f.lookahead+=_,f.lookahead+f.insert>=MIN_MATCH$1)for(F=f.strstart-f.insert,f.ins_h=f.window[F],f.ins_h=HASH(f,f.ins_h,f.window[F+1]);f.insert&&(f.ins_h=HASH(f,f.ins_h,f.window[F+MIN_MATCH$1-1]),f.prev[F&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=F,F++,f.insert--,!(f.lookahead+f.insert<MIN_MATCH$1)););}while(f.lookahead<MIN_LOOKAHEAD&&f.strm.avail_in!==0)},deflate_stored=(f,s)=>{let d=65535;for(d>f.pending_buf_size-5&&(d=f.pending_buf_size-5);;){if(f.lookahead<=1){if(fill_window(f),f.lookahead===0&&s===Z_NO_FLUSH)return BS_NEED_MORE;if(f.lookahead===0)break}f.strstart+=f.lookahead,f.lookahead=0;const _=f.block_start+d;if((f.strstart===0||f.strstart>=_)&&(f.lookahead=f.strstart-_,f.strstart=_,flush_block_only(f,!1),f.strm.avail_out===0)||f.strstart-f.block_start>=f.w_size-MIN_LOOKAHEAD&&(flush_block_only(f,!1),f.strm.avail_out===0))return BS_NEED_MORE}return f.insert=0,s===Z_FINISH?(flush_block_only(f,!0),f.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):(f.strstart>f.block_start&&(flush_block_only(f,!1),f.strm.avail_out===0),BS_NEED_MORE)},deflate_fast=(f,s)=>{let d,_;for(;;){if(f.lookahead<MIN_LOOKAHEAD){if(fill_window(f),f.lookahead<MIN_LOOKAHEAD&&s===Z_NO_FLUSH)return BS_NEED_MORE;if(f.lookahead===0)break}if(d=0,f.lookahead>=MIN_MATCH$1&&(f.ins_h=HASH(f,f.ins_h,f.window[f.strstart+MIN_MATCH$1-1]),d=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),d!==0&&f.strstart-d<=f.w_size-MIN_LOOKAHEAD&&(f.match_length=longest_match(f,d)),f.match_length>=MIN_MATCH$1)if(_=_tr_tally$1(f,f.strstart-f.match_start,f.match_length-MIN_MATCH$1),f.lookahead-=f.match_length,f.match_length<=f.max_lazy_match&&f.lookahead>=MIN_MATCH$1){f.match_length--;do f.strstart++,f.ins_h=HASH(f,f.ins_h,f.window[f.strstart+MIN_MATCH$1-1]),d=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart;while(--f.match_length!==0);f.strstart++}else f.strstart+=f.match_length,f.match_length=0,f.ins_h=f.window[f.strstart],f.ins_h=HASH(f,f.ins_h,f.window[f.strstart+1]);else _=_tr_tally$1(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++;if(_&&(flush_block_only(f,!1),f.strm.avail_out===0))return BS_NEED_MORE}return f.insert=f.strstart<MIN_MATCH$1-1?f.strstart:MIN_MATCH$1-1,s===Z_FINISH?(flush_block_only(f,!0),f.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):f.last_lit&&(flush_block_only(f,!1),f.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(f,s)=>{let d,_,S;for(;;){if(f.lookahead<MIN_LOOKAHEAD){if(fill_window(f),f.lookahead<MIN_LOOKAHEAD&&s===Z_NO_FLUSH)return BS_NEED_MORE;if(f.lookahead===0)break}if(d=0,f.lookahead>=MIN_MATCH$1&&(f.ins_h=HASH(f,f.ins_h,f.window[f.strstart+MIN_MATCH$1-1]),d=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),f.prev_length=f.match_length,f.prev_match=f.match_start,f.match_length=MIN_MATCH$1-1,d!==0&&f.prev_length<f.max_lazy_match&&f.strstart-d<=f.w_size-MIN_LOOKAHEAD&&(f.match_length=longest_match(f,d),f.match_length<=5&&(f.strategy===Z_FILTERED||f.match_length===MIN_MATCH$1&&f.strstart-f.match_start>4096)&&(f.match_length=MIN_MATCH$1-1)),f.prev_length>=MIN_MATCH$1&&f.match_length<=f.prev_length){S=f.strstart+f.lookahead-MIN_MATCH$1,_=_tr_tally$1(f,f.strstart-1-f.prev_match,f.prev_length-MIN_MATCH$1),f.lookahead-=f.prev_length-1,f.prev_length-=2;do++f.strstart<=S&&(f.ins_h=HASH(f,f.ins_h,f.window[f.strstart+MIN_MATCH$1-1]),d=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart);while(--f.prev_length!==0);if(f.match_available=0,f.match_length=MIN_MATCH$1-1,f.strstart++,_&&(flush_block_only(f,!1),f.strm.avail_out===0))return BS_NEED_MORE}else if(f.match_available){if(_=_tr_tally$1(f,0,f.window[f.strstart-1]),_&&flush_block_only(f,!1),f.strstart++,f.lookahead--,f.strm.avail_out===0)return BS_NEED_MORE}else f.match_available=1,f.strstart++,f.lookahead--}return f.match_available&&(_=_tr_tally$1(f,0,f.window[f.strstart-1]),f.match_available=0),f.insert=f.strstart<MIN_MATCH$1-1?f.strstart:MIN_MATCH$1-1,s===Z_FINISH?(flush_block_only(f,!0),f.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):f.last_lit&&(flush_block_only(f,!1),f.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(f,s)=>{let d,_,S,T;const F=f.window;for(;;){if(f.lookahead<=MAX_MATCH$1){if(fill_window(f),f.lookahead<=MAX_MATCH$1&&s===Z_NO_FLUSH)return BS_NEED_MORE;if(f.lookahead===0)break}if(f.match_length=0,f.lookahead>=MIN_MATCH$1&&f.strstart>0&&(S=f.strstart-1,_=F[S],_===F[++S]&&_===F[++S]&&_===F[++S])){T=f.strstart+MAX_MATCH$1;do;while(_===F[++S]&&_===F[++S]&&_===F[++S]&&_===F[++S]&&_===F[++S]&&_===F[++S]&&_===F[++S]&&_===F[++S]&&S<T);f.match_length=MAX_MATCH$1-(T-S),f.match_length>f.lookahead&&(f.match_length=f.lookahead)}if(f.match_length>=MIN_MATCH$1?(d=_tr_tally$1(f,1,f.match_length-MIN_MATCH$1),f.lookahead-=f.match_length,f.strstart+=f.match_length,f.match_length=0):(d=_tr_tally$1(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++),d&&(flush_block_only(f,!1),f.strm.avail_out===0))return BS_NEED_MORE}return f.insert=0,s===Z_FINISH?(flush_block_only(f,!0),f.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):f.last_lit&&(flush_block_only(f,!1),f.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(f,s)=>{let d;for(;;){if(f.lookahead===0&&(fill_window(f),f.lookahead===0)){if(s===Z_NO_FLUSH)return BS_NEED_MORE;break}if(f.match_length=0,d=_tr_tally$1(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++,d&&(flush_block_only(f,!1),f.strm.avail_out===0))return BS_NEED_MORE}return f.insert=0,s===Z_FINISH?(flush_block_only(f,!0),f.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):f.last_lit&&(flush_block_only(f,!1),f.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(f,s,d,_,S){this.good_length=f,this.max_lazy=s,this.nice_length=d,this.max_chain=_,this.func=S}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=f=>{f.window_size=2*f.w_size,zero$1$1(f.head),f.max_lazy_match=configuration_table[f.level].max_lazy,f.good_match=configuration_table[f.level].good_length,f.nice_match=configuration_table[f.level].nice_length,f.max_chain_length=configuration_table[f.level].max_chain,f.strstart=0,f.block_start=0,f.lookahead=0,f.insert=0,f.match_length=f.prev_length=MIN_MATCH$1-1,f.match_available=0,f.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE$1*2),this.dyn_dtree=new Uint16Array((2*D_CODES$1+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES$1+1)*2),zero$1$1(this.dyn_ltree),zero$1$1(this.dyn_dtree),zero$1$1(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS$1+1),this.heap=new Uint16Array(2*L_CODES$1+1),zero$1$1(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES$1+1),zero$1$1(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateResetKeep=f=>{if(!f||!f.state)return err(f,Z_STREAM_ERROR);f.total_in=f.total_out=0,f.data_type=Z_UNKNOWN$1;const s=f.state;return s.pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=s.wrap?INIT_STATE:BUSY_STATE,f.adler=s.wrap===2?0:1,s.last_flush=Z_NO_FLUSH,_tr_init$1(s),Z_OK},deflateReset=f=>{const s=deflateResetKeep(f);return s===Z_OK&&lm_init(f.state),s},deflateSetHeader=(f,s)=>!f||!f.state||f.state.wrap!==2?Z_STREAM_ERROR:(f.state.gzhead=s,Z_OK),deflateInit2=(f,s,d,_,S,T)=>{if(!f)return Z_STREAM_ERROR;let F=1;if(s===Z_DEFAULT_COMPRESSION&&(s=6),_<0?(F=0,_=-_):_>15&&(F=2,_-=16),S<1||S>MAX_MEM_LEVEL||d!==Z_DEFLATED||_<8||_>15||s<0||s>9||T<0||T>Z_FIXED$1)return err(f,Z_STREAM_ERROR);_===8&&(_=9);const M=new DeflateState;return f.state=M,M.strm=f,M.wrap=F,M.gzhead=null,M.w_bits=_,M.w_size=1<<M.w_bits,M.w_mask=M.w_size-1,M.hash_bits=S+7,M.hash_size=1<<M.hash_bits,M.hash_mask=M.hash_size-1,M.hash_shift=~~((M.hash_bits+MIN_MATCH$1-1)/MIN_MATCH$1),M.window=new Uint8Array(M.w_size*2),M.head=new Uint16Array(M.hash_size),M.prev=new Uint16Array(M.w_size),M.lit_bufsize=1<<S+6,M.pending_buf_size=M.lit_bufsize*4,M.pending_buf=new Uint8Array(M.pending_buf_size),M.d_buf=1*M.lit_bufsize,M.l_buf=3*M.lit_bufsize,M.level=s,M.strategy=T,M.method=d,deflateReset(f)},deflateInit=(f,s)=>deflateInit2(f,s,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY),deflate=(f,s)=>{let d,_;if(!f||!f.state||s>Z_BLOCK||s<0)return f?err(f,Z_STREAM_ERROR):Z_STREAM_ERROR;const S=f.state;if(!f.output||!f.input&&f.avail_in!==0||S.status===FINISH_STATE&&s!==Z_FINISH)return err(f,f.avail_out===0?Z_BUF_ERROR:Z_STREAM_ERROR);S.strm=f;const T=S.last_flush;if(S.last_flush=s,S.status===INIT_STATE)if(S.wrap===2)f.adler=0,put_byte(S,31),put_byte(S,139),put_byte(S,8),S.gzhead?(put_byte(S,(S.gzhead.text?1:0)+(S.gzhead.hcrc?2:0)+(S.gzhead.extra?4:0)+(S.gzhead.name?8:0)+(S.gzhead.comment?16:0)),put_byte(S,S.gzhead.time&255),put_byte(S,S.gzhead.time>>8&255),put_byte(S,S.gzhead.time>>16&255),put_byte(S,S.gzhead.time>>24&255),put_byte(S,S.level===9?2:S.strategy>=Z_HUFFMAN_ONLY||S.level<2?4:0),put_byte(S,S.gzhead.os&255),S.gzhead.extra&&S.gzhead.extra.length&&(put_byte(S,S.gzhead.extra.length&255),put_byte(S,S.gzhead.extra.length>>8&255)),S.gzhead.hcrc&&(f.adler=crc32_1(f.adler,S.pending_buf,S.pending,0)),S.gzindex=0,S.status=EXTRA_STATE):(put_byte(S,0),put_byte(S,0),put_byte(S,0),put_byte(S,0),put_byte(S,0),put_byte(S,S.level===9?2:S.strategy>=Z_HUFFMAN_ONLY||S.level<2?4:0),put_byte(S,OS_CODE),S.status=BUSY_STATE);else{let F=Z_DEFLATED+(S.w_bits-8<<4)<<8,M=-1;S.strategy>=Z_HUFFMAN_ONLY||S.level<2?M=0:S.level<6?M=1:S.level===6?M=2:M=3,F|=M<<6,S.strstart!==0&&(F|=PRESET_DICT),F+=31-F%31,S.status=BUSY_STATE,putShortMSB(S,F),S.strstart!==0&&(putShortMSB(S,f.adler>>>16),putShortMSB(S,f.adler&65535)),f.adler=1}if(S.status===EXTRA_STATE)if(S.gzhead.extra){for(d=S.pending;S.gzindex<(S.gzhead.extra.length&65535)&&!(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>d&&(f.adler=crc32_1(f.adler,S.pending_buf,S.pending-d,d)),flush_pending(f),d=S.pending,S.pending===S.pending_buf_size));)put_byte(S,S.gzhead.extra[S.gzindex]&255),S.gzindex++;S.gzhead.hcrc&&S.pending>d&&(f.adler=crc32_1(f.adler,S.pending_buf,S.pending-d,d)),S.gzindex===S.gzhead.extra.length&&(S.gzindex=0,S.status=NAME_STATE)}else S.status=NAME_STATE;if(S.status===NAME_STATE)if(S.gzhead.name){d=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>d&&(f.adler=crc32_1(f.adler,S.pending_buf,S.pending-d,d)),flush_pending(f),d=S.pending,S.pending===S.pending_buf_size)){_=1;break}S.gzindex<S.gzhead.name.length?_=S.gzhead.name.charCodeAt(S.gzindex++)&255:_=0,put_byte(S,_)}while(_!==0);S.gzhead.hcrc&&S.pending>d&&(f.adler=crc32_1(f.adler,S.pending_buf,S.pending-d,d)),_===0&&(S.gzindex=0,S.status=COMMENT_STATE)}else S.status=COMMENT_STATE;if(S.status===COMMENT_STATE)if(S.gzhead.comment){d=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>d&&(f.adler=crc32_1(f.adler,S.pending_buf,S.pending-d,d)),flush_pending(f),d=S.pending,S.pending===S.pending_buf_size)){_=1;break}S.gzindex<S.gzhead.comment.length?_=S.gzhead.comment.charCodeAt(S.gzindex++)&255:_=0,put_byte(S,_)}while(_!==0);S.gzhead.hcrc&&S.pending>d&&(f.adler=crc32_1(f.adler,S.pending_buf,S.pending-d,d)),_===0&&(S.status=HCRC_STATE)}else S.status=HCRC_STATE;if(S.status===HCRC_STATE&&(S.gzhead.hcrc?(S.pending+2>S.pending_buf_size&&flush_pending(f),S.pending+2<=S.pending_buf_size&&(put_byte(S,f.adler&255),put_byte(S,f.adler>>8&255),f.adler=0,S.status=BUSY_STATE)):S.status=BUSY_STATE),S.pending!==0){if(flush_pending(f),f.avail_out===0)return S.last_flush=-1,Z_OK}else if(f.avail_in===0&&rank(s)<=rank(T)&&s!==Z_FINISH)return err(f,Z_BUF_ERROR);if(S.status===FINISH_STATE&&f.avail_in!==0)return err(f,Z_BUF_ERROR);if(f.avail_in!==0||S.lookahead!==0||s!==Z_NO_FLUSH&&S.status!==FINISH_STATE){let F=S.strategy===Z_HUFFMAN_ONLY?deflate_huff(S,s):S.strategy===Z_RLE?deflate_rle(S,s):configuration_table[S.level].func(S,s);if((F===BS_FINISH_STARTED||F===BS_FINISH_DONE)&&(S.status=FINISH_STATE),F===BS_NEED_MORE||F===BS_FINISH_STARTED)return f.avail_out===0&&(S.last_flush=-1),Z_OK;if(F===BS_BLOCK_DONE&&(s===Z_PARTIAL_FLUSH?_tr_align$1(S):s!==Z_BLOCK&&(_tr_stored_block$1(S,0,0,!1),s===Z_FULL_FLUSH&&(zero$1$1(S.head),S.lookahead===0&&(S.strstart=0,S.block_start=0,S.insert=0))),flush_pending(f),f.avail_out===0))return S.last_flush=-1,Z_OK}return s!==Z_FINISH?Z_OK:S.wrap<=0?Z_STREAM_END:(S.wrap===2?(put_byte(S,f.adler&255),put_byte(S,f.adler>>8&255),put_byte(S,f.adler>>16&255),put_byte(S,f.adler>>24&255),put_byte(S,f.total_in&255),put_byte(S,f.total_in>>8&255),put_byte(S,f.total_in>>16&255),put_byte(S,f.total_in>>24&255)):(putShortMSB(S,f.adler>>>16),putShortMSB(S,f.adler&65535)),flush_pending(f),S.wrap>0&&(S.wrap=-S.wrap),S.pending!==0?Z_OK:Z_STREAM_END)},deflateEnd=f=>{if(!f||!f.state)return Z_STREAM_ERROR;const s=f.state.status;return s!==INIT_STATE&&s!==EXTRA_STATE&&s!==NAME_STATE&&s!==COMMENT_STATE&&s!==HCRC_STATE&&s!==BUSY_STATE&&s!==FINISH_STATE?err(f,Z_STREAM_ERROR):(f.state=null,s===BUSY_STATE?err(f,Z_DATA_ERROR):Z_OK)},deflateSetDictionary=(f,s)=>{let d=s.length;if(!f||!f.state)return Z_STREAM_ERROR;const _=f.state,S=_.wrap;if(S===2||S===1&&_.status!==INIT_STATE||_.lookahead)return Z_STREAM_ERROR;if(S===1&&(f.adler=adler32_1(f.adler,s,d,0)),_.wrap=0,d>=_.w_size){S===0&&(zero$1$1(_.head),_.strstart=0,_.block_start=0,_.insert=0);let P=new Uint8Array(_.w_size);P.set(s.subarray(d-_.w_size,d),0),s=P,d=_.w_size}const T=f.avail_in,F=f.next_in,M=f.input;for(f.avail_in=d,f.next_in=0,f.input=s,fill_window(_);_.lookahead>=MIN_MATCH$1;){let P=_.strstart,H=_.lookahead-(MIN_MATCH$1-1);do _.ins_h=HASH(_,_.ins_h,_.window[P+MIN_MATCH$1-1]),_.prev[P&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=P,P++;while(--H);_.strstart=P,_.lookahead=MIN_MATCH$1-1,fill_window(_)}return _.strstart+=_.lookahead,_.block_start=_.strstart,_.insert=_.lookahead,_.lookahead=0,_.match_length=_.prev_length=MIN_MATCH$1-1,_.match_available=0,f.next_in=F,f.input=M,f.avail_in=T,_.wrap=S,Z_OK};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2=deflate,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(f,s)=>Object.prototype.hasOwnProperty.call(f,s);var assign=function(f){const s=Array.prototype.slice.call(arguments,1);for(;s.length;){const d=s.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(const _ in d)_has(d,_)&&(f[_]=d[_])}}return f},flattenChunks=f=>{let s=0;for(let _=0,S=f.length;_<S;_++)s+=f[_].length;const d=new Uint8Array(s);for(let _=0,S=0,T=f.length;_<T;_++){let F=f[_];d.set(F,S),S+=F.length}return d},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(f){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let f=0;f<256;f++)_utf8len[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=f=>{let s,d,_,S,T,F=f.length,M=0;for(S=0;S<F;S++)d=f.charCodeAt(S),(d&64512)===55296&&S+1<F&&(_=f.charCodeAt(S+1),(_&64512)===56320&&(d=65536+(d-55296<<10)+(_-56320),S++)),M+=d<128?1:d<2048?2:d<65536?3:4;for(s=new Uint8Array(M),T=0,S=0;T<M;S++)d=f.charCodeAt(S),(d&64512)===55296&&S+1<F&&(_=f.charCodeAt(S+1),(_&64512)===56320&&(d=65536+(d-55296<<10)+(_-56320),S++)),d<128?s[T++]=d:d<2048?(s[T++]=192|d>>>6,s[T++]=128|d&63):d<65536?(s[T++]=224|d>>>12,s[T++]=128|d>>>6&63,s[T++]=128|d&63):(s[T++]=240|d>>>18,s[T++]=128|d>>>12&63,s[T++]=128|d>>>6&63,s[T++]=128|d&63);return s};const buf2binstring=(f,s)=>{if(s<65534&&f.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,f.length===s?f:f.subarray(0,s));let d="";for(let _=0;_<s;_++)d+=String.fromCharCode(f[_]);return d};var buf2string=(f,s)=>{let d,_;const S=s||f.length,T=new Array(S*2);for(_=0,d=0;d<S;){let F=f[d++];if(F<128){T[_++]=F;continue}let M=_utf8len[F];if(M>4){T[_++]=65533,d+=M-1;continue}for(F&=M===2?31:M===3?15:7;M>1&&d<S;)F=F<<6|f[d++]&63,M--;if(M>1){T[_++]=65533;continue}F<65536?T[_++]=F:(F-=65536,T[_++]=55296|F>>10&1023,T[_++]=56320|F&1023)}return buf2binstring(T,_)},utf8border=(f,s)=>{s=s||f.length,s>f.length&&(s=f.length);let d=s-1;for(;d>=0&&(f[d]&192)===128;)d--;return d<0||d===0?s:d+_utf8len[f[d]]>s?d:s},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$1,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_DEFLATED:Z_DEFLATED$1}=constants$1;function Deflate(f){this.options=common.assign({level:Z_DEFAULT_COMPRESSION$1,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY$1},f||{});let s=this.options;s.raw&&s.windowBits>0?s.windowBits=-s.windowBits:s.gzip&&s.windowBits>0&&s.windowBits<16&&(s.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let d=deflate_1.deflateInit2(this.strm,s.level,s.method,s.windowBits,s.memLevel,s.strategy);if(d!==Z_OK$1)throw new Error(messages[d]);if(s.header&&deflate_1.deflateSetHeader(this.strm,s.header),s.dictionary){let _;if(typeof s.dictionary=="string"?_=strings.string2buf(s.dictionary):toString$1.call(s.dictionary)==="[object ArrayBuffer]"?_=new Uint8Array(s.dictionary):_=s.dictionary,d=deflate_1.deflateSetDictionary(this.strm,_),d!==Z_OK$1)throw new Error(messages[d]);this._dict_set=!0}}Deflate.prototype.push=function(f,s){const d=this.strm,_=this.options.chunkSize;let S,T;if(this.ended)return!1;for(s===~~s?T=s:T=s===!0?Z_FINISH$1:Z_NO_FLUSH$1,typeof f=="string"?d.input=strings.string2buf(f):toString$1.call(f)==="[object ArrayBuffer]"?d.input=new Uint8Array(f):d.input=f,d.next_in=0,d.avail_in=d.input.length;;){if(d.avail_out===0&&(d.output=new Uint8Array(_),d.next_out=0,d.avail_out=_),(T===Z_SYNC_FLUSH||T===Z_FULL_FLUSH$1)&&d.avail_out<=6){this.onData(d.output.subarray(0,d.next_out)),d.avail_out=0;continue}if(S=deflate_1.deflate(d,T),S===Z_STREAM_END$1)return d.next_out>0&&this.onData(d.output.subarray(0,d.next_out)),S=deflate_1.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===Z_OK$1;if(d.avail_out===0){this.onData(d.output);continue}if(T>0&&d.next_out>0){this.onData(d.output.subarray(0,d.next_out)),d.avail_out=0;continue}if(d.avail_in===0)break}return!0};Deflate.prototype.onData=function(f){this.chunks.push(f)};Deflate.prototype.onEnd=function(f){f===Z_OK$1&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg};function deflate$1(f,s){const d=new Deflate(s);if(d.push(f,!0),d.err)throw d.msg||messages[d.err];return d.result}function deflateRaw(f,s){return s=s||{},s.raw=!0,deflate$1(f,s)}function gzip(f,s){return s=s||{},s.gzip=!0,deflate$1(f,s)}var Deflate_1=Deflate,deflate_2$1=deflate$1,deflateRaw_1=deflateRaw,gzip_1=gzip,constants$1$1=constants$1,deflate_1$1={Deflate:Deflate_1,deflate:deflate_2$1,deflateRaw:deflateRaw_1,gzip:gzip_1,constants:constants$1$1};const BAD=30,TYPE=12;var inffast=function f(s,d){let _,S,T,F,M,P,H,J,K,z,oe,se,ae,ge,pe,he,ve,be,Re,Fe,ye,Ue,It,St;const At=s.state;_=s.next_in,It=s.input,S=_+(s.avail_in-5),T=s.next_out,St=s.output,F=T-(d-s.avail_out),M=T+(s.avail_out-257),P=At.dmax,H=At.wsize,J=At.whave,K=At.wnext,z=At.window,oe=At.hold,se=At.bits,ae=At.lencode,ge=At.distcode,pe=(1<<At.lenbits)-1,he=(1<<At.distbits)-1;e:do{se<15&&(oe+=It[_++]<<se,se+=8,oe+=It[_++]<<se,se+=8),ve=ae[oe&pe];t:for(;;){if(be=ve>>>24,oe>>>=be,se-=be,be=ve>>>16&255,be===0)St[T++]=ve&65535;else if(be&16){Re=ve&65535,be&=15,be&&(se<be&&(oe+=It[_++]<<se,se+=8),Re+=oe&(1<<be)-1,oe>>>=be,se-=be),se<15&&(oe+=It[_++]<<se,se+=8,oe+=It[_++]<<se,se+=8),ve=ge[oe&he];r:for(;;){if(be=ve>>>24,oe>>>=be,se-=be,be=ve>>>16&255,be&16){if(Fe=ve&65535,be&=15,se<be&&(oe+=It[_++]<<se,se+=8,se<be&&(oe+=It[_++]<<se,se+=8)),Fe+=oe&(1<<be)-1,Fe>P){s.msg="invalid distance too far back",At.mode=BAD;break e}if(oe>>>=be,se-=be,be=T-F,Fe>be){if(be=Fe-be,be>J&&At.sane){s.msg="invalid distance too far back",At.mode=BAD;break e}if(ye=0,Ue=z,K===0){if(ye+=H-be,be<Re){Re-=be;do St[T++]=z[ye++];while(--be);ye=T-Fe,Ue=St}}else if(K<be){if(ye+=H+K-be,be-=K,be<Re){Re-=be;do St[T++]=z[ye++];while(--be);if(ye=0,K<Re){be=K,Re-=be;do St[T++]=z[ye++];while(--be);ye=T-Fe,Ue=St}}}else if(ye+=K-be,be<Re){Re-=be;do St[T++]=z[ye++];while(--be);ye=T-Fe,Ue=St}for(;Re>2;)St[T++]=Ue[ye++],St[T++]=Ue[ye++],St[T++]=Ue[ye++],Re-=3;Re&&(St[T++]=Ue[ye++],Re>1&&(St[T++]=Ue[ye++]))}else{ye=T-Fe;do St[T++]=St[ye++],St[T++]=St[ye++],St[T++]=St[ye++],Re-=3;while(Re>2);Re&&(St[T++]=St[ye++],Re>1&&(St[T++]=St[ye++]))}}else if(be&64){s.msg="invalid distance code",At.mode=BAD;break e}else{ve=ge[(ve&65535)+(oe&(1<<be)-1)];continue r}break}}else if(be&64)if(be&32){At.mode=TYPE;break e}else{s.msg="invalid literal/length code",At.mode=BAD;break e}else{ve=ae[(ve&65535)+(oe&(1<<be)-1)];continue t}break}}while(_<S&&T<M);Re=se>>3,_-=Re,se-=Re<<3,oe&=(1<<se)-1,s.next_in=_,s.next_out=T,s.avail_in=_<S?5+(S-_):5-(_-S),s.avail_out=T<M?257+(M-T):257-(T-M),At.hold=oe,At.bits=se};const MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(f,s,d,_,S,T,F,M)=>{const P=M.bits;let H=0,J=0,K=0,z=0,oe=0,se=0,ae=0,ge=0,pe=0,he=0,ve,be,Re,Fe,ye,Ue=null,It=0,St;const At=new Uint16Array(MAXBITS+1),xt=new Uint16Array(MAXBITS+1);let Ct=null,Nt=0,qt,Jn,qr;for(H=0;H<=MAXBITS;H++)At[H]=0;for(J=0;J<_;J++)At[s[d+J]]++;for(oe=P,z=MAXBITS;z>=1&&At[z]===0;z--);if(oe>z&&(oe=z),z===0)return S[T++]=1<<24|64<<16|0,S[T++]=1<<24|64<<16|0,M.bits=1,0;for(K=1;K<z&&At[K]===0;K++);for(oe<K&&(oe=K),ge=1,H=1;H<=MAXBITS;H++)if(ge<<=1,ge-=At[H],ge<0)return-1;if(ge>0&&(f===CODES||z!==1))return-1;for(xt[1]=0,H=1;H<MAXBITS;H++)xt[H+1]=xt[H]+At[H];for(J=0;J<_;J++)s[d+J]!==0&&(F[xt[s[d+J]]++]=J);if(f===CODES?(Ue=Ct=F,St=19):f===LENS?(Ue=lbase,It-=257,Ct=lext,Nt-=257,St=256):(Ue=dbase,Ct=dext,St=-1),he=0,J=0,H=K,ye=T,se=oe,ae=0,Re=-1,pe=1<<oe,Fe=pe-1,f===LENS&&pe>ENOUGH_LENS||f===DISTS&&pe>ENOUGH_DISTS)return 1;for(;;){qt=H-ae,F[J]<St?(Jn=0,qr=F[J]):F[J]>St?(Jn=Ct[Nt+F[J]],qr=Ue[It+F[J]]):(Jn=96,qr=0),ve=1<<H-ae,be=1<<se,K=be;do be-=ve,S[ye+(he>>ae)+be]=qt<<24|Jn<<16|qr|0;while(be!==0);for(ve=1<<H-1;he&ve;)ve>>=1;if(ve!==0?(he&=ve-1,he+=ve):he=0,J++,--At[H]===0){if(H===z)break;H=s[d+F[J]]}if(H>oe&&(he&Fe)!==Re){for(ae===0&&(ae=oe),ye+=K,se=H-ae,ge=1<<se;se+ae<z&&(ge-=At[se+ae],!(ge<=0));)se++,ge<<=1;if(pe+=1<<se,f===LENS&&pe>ENOUGH_LENS||f===DISTS&&pe>ENOUGH_DISTS)return 1;Re=he&Fe,S[Re]=oe<<24|se<<16|ye-T|0}}return he!==0&&(S[ye+he]=H-ae<<24|64<<16|0),M.bits=oe,0};var inftrees=inflate_table;const CODES$1=0,LENS$1=1,DISTS$1=2,{Z_FINISH:Z_FINISH$2,Z_BLOCK:Z_BLOCK$1,Z_TREES,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_NEED_DICT,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFLATED:Z_DEFLATED$2}=constants$1,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE$1=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD$1=30,MEM=31,SYNC=32,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,MAX_WBITS$1=15,DEF_WBITS=MAX_WBITS$1,zswap32=f=>(f>>>24&255)+(f>>>8&65280)+((f&65280)<<8)+((f&255)<<24);function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateResetKeep=f=>{if(!f||!f.state)return Z_STREAM_ERROR$1;const s=f.state;return f.total_in=f.total_out=s.total=0,f.msg="",s.wrap&&(f.adler=s.wrap&1),s.mode=HEAD,s.last=0,s.havedict=0,s.dmax=32768,s.head=null,s.hold=0,s.bits=0,s.lencode=s.lendyn=new Int32Array(ENOUGH_LENS$1),s.distcode=s.distdyn=new Int32Array(ENOUGH_DISTS$1),s.sane=1,s.back=-1,Z_OK$2},inflateReset=f=>{if(!f||!f.state)return Z_STREAM_ERROR$1;const s=f.state;return s.wsize=0,s.whave=0,s.wnext=0,inflateResetKeep(f)},inflateReset2=(f,s)=>{let d;if(!f||!f.state)return Z_STREAM_ERROR$1;const _=f.state;return s<0?(d=0,s=-s):(d=(s>>4)+1,s<48&&(s&=15)),s&&(s<8||s>15)?Z_STREAM_ERROR$1:(_.window!==null&&_.wbits!==s&&(_.window=null),_.wrap=d,_.wbits=s,inflateReset(f))},inflateInit2=(f,s)=>{if(!f)return Z_STREAM_ERROR$1;const d=new InflateState;f.state=d,d.window=null;const _=inflateReset2(f,s);return _!==Z_OK$2&&(f.state=null),_},inflateInit=f=>inflateInit2(f,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=f=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let s=0;for(;s<144;)f.lens[s++]=8;for(;s<256;)f.lens[s++]=9;for(;s<280;)f.lens[s++]=7;for(;s<288;)f.lens[s++]=8;for(inftrees(LENS$1,f.lens,0,288,lenfix,0,f.work,{bits:9}),s=0;s<32;)f.lens[s++]=5;inftrees(DISTS$1,f.lens,0,32,distfix,0,f.work,{bits:5}),virgin=!1}f.lencode=lenfix,f.lenbits=9,f.distcode=distfix,f.distbits=5},updatewindow=(f,s,d,_)=>{let S;const T=f.state;return T.window===null&&(T.wsize=1<<T.wbits,T.wnext=0,T.whave=0,T.window=new Uint8Array(T.wsize)),_>=T.wsize?(T.window.set(s.subarray(d-T.wsize,d),0),T.wnext=0,T.whave=T.wsize):(S=T.wsize-T.wnext,S>_&&(S=_),T.window.set(s.subarray(d-_,d-_+S),T.wnext),_-=S,_?(T.window.set(s.subarray(d-_,d),0),T.wnext=_,T.whave=T.wsize):(T.wnext+=S,T.wnext===T.wsize&&(T.wnext=0),T.whave<T.wsize&&(T.whave+=S))),0},inflate=(f,s)=>{let d,_,S,T,F,M,P,H,J,K,z,oe,se,ae,ge=0,pe,he,ve,be,Re,Fe,ye,Ue;const It=new Uint8Array(4);let St,At;const xt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!f||!f.state||!f.output||!f.input&&f.avail_in!==0)return Z_STREAM_ERROR$1;d=f.state,d.mode===TYPE$1&&(d.mode=TYPEDO),F=f.next_out,S=f.output,P=f.avail_out,T=f.next_in,_=f.input,M=f.avail_in,H=d.hold,J=d.bits,K=M,z=P,Ue=Z_OK$2;e:for(;;)switch(d.mode){case HEAD:if(d.wrap===0){d.mode=TYPEDO;break}for(;J<16;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(d.wrap&2&&H===35615){d.check=0,It[0]=H&255,It[1]=H>>>8&255,d.check=crc32_1(d.check,It,2,0),H=0,J=0,d.mode=FLAGS;break}if(d.flags=0,d.head&&(d.head.done=!1),!(d.wrap&1)||(((H&255)<<8)+(H>>8))%31){f.msg="incorrect header check",d.mode=BAD$1;break}if((H&15)!==Z_DEFLATED$2){f.msg="unknown compression method",d.mode=BAD$1;break}if(H>>>=4,J-=4,ye=(H&15)+8,d.wbits===0)d.wbits=ye;else if(ye>d.wbits){f.msg="invalid window size",d.mode=BAD$1;break}d.dmax=1<<d.wbits,f.adler=d.check=1,d.mode=H&512?DICTID:TYPE$1,H=0,J=0;break;case FLAGS:for(;J<16;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(d.flags=H,(d.flags&255)!==Z_DEFLATED$2){f.msg="unknown compression method",d.mode=BAD$1;break}if(d.flags&57344){f.msg="unknown header flags set",d.mode=BAD$1;break}d.head&&(d.head.text=H>>8&1),d.flags&512&&(It[0]=H&255,It[1]=H>>>8&255,d.check=crc32_1(d.check,It,2,0)),H=0,J=0,d.mode=TIME;case TIME:for(;J<32;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}d.head&&(d.head.time=H),d.flags&512&&(It[0]=H&255,It[1]=H>>>8&255,It[2]=H>>>16&255,It[3]=H>>>24&255,d.check=crc32_1(d.check,It,4,0)),H=0,J=0,d.mode=OS;case OS:for(;J<16;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}d.head&&(d.head.xflags=H&255,d.head.os=H>>8),d.flags&512&&(It[0]=H&255,It[1]=H>>>8&255,d.check=crc32_1(d.check,It,2,0)),H=0,J=0,d.mode=EXLEN;case EXLEN:if(d.flags&1024){for(;J<16;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}d.length=H,d.head&&(d.head.extra_len=H),d.flags&512&&(It[0]=H&255,It[1]=H>>>8&255,d.check=crc32_1(d.check,It,2,0)),H=0,J=0}else d.head&&(d.head.extra=null);d.mode=EXTRA;case EXTRA:if(d.flags&1024&&(oe=d.length,oe>M&&(oe=M),oe&&(d.head&&(ye=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Uint8Array(d.head.extra_len)),d.head.extra.set(_.subarray(T,T+oe),ye)),d.flags&512&&(d.check=crc32_1(d.check,_,oe,T)),M-=oe,T+=oe,d.length-=oe),d.length))break e;d.length=0,d.mode=NAME;case NAME:if(d.flags&2048){if(M===0)break e;oe=0;do ye=_[T+oe++],d.head&&ye&&d.length<65536&&(d.head.name+=String.fromCharCode(ye));while(ye&&oe<M);if(d.flags&512&&(d.check=crc32_1(d.check,_,oe,T)),M-=oe,T+=oe,ye)break e}else d.head&&(d.head.name=null);d.length=0,d.mode=COMMENT;case COMMENT:if(d.flags&4096){if(M===0)break e;oe=0;do ye=_[T+oe++],d.head&&ye&&d.length<65536&&(d.head.comment+=String.fromCharCode(ye));while(ye&&oe<M);if(d.flags&512&&(d.check=crc32_1(d.check,_,oe,T)),M-=oe,T+=oe,ye)break e}else d.head&&(d.head.comment=null);d.mode=HCRC;case HCRC:if(d.flags&512){for(;J<16;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(H!==(d.check&65535)){f.msg="header crc mismatch",d.mode=BAD$1;break}H=0,J=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),f.adler=d.check=0,d.mode=TYPE$1;break;case DICTID:for(;J<32;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}f.adler=d.check=zswap32(H),H=0,J=0,d.mode=DICT;case DICT:if(d.havedict===0)return f.next_out=F,f.avail_out=P,f.next_in=T,f.avail_in=M,d.hold=H,d.bits=J,Z_NEED_DICT;f.adler=d.check=1,d.mode=TYPE$1;case TYPE$1:if(s===Z_BLOCK$1||s===Z_TREES)break e;case TYPEDO:if(d.last){H>>>=J&7,J-=J&7,d.mode=CHECK;break}for(;J<3;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}switch(d.last=H&1,H>>>=1,J-=1,H&3){case 0:d.mode=STORED;break;case 1:if(fixedtables(d),d.mode=LEN_,s===Z_TREES){H>>>=2,J-=2;break e}break;case 2:d.mode=TABLE;break;case 3:f.msg="invalid block type",d.mode=BAD$1}H>>>=2,J-=2;break;case STORED:for(H>>>=J&7,J-=J&7;J<32;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if((H&65535)!==(H>>>16^65535)){f.msg="invalid stored block lengths",d.mode=BAD$1;break}if(d.length=H&65535,H=0,J=0,d.mode=COPY_,s===Z_TREES)break e;case COPY_:d.mode=COPY;case COPY:if(oe=d.length,oe){if(oe>M&&(oe=M),oe>P&&(oe=P),oe===0)break e;S.set(_.subarray(T,T+oe),F),M-=oe,T+=oe,P-=oe,F+=oe,d.length-=oe;break}d.mode=TYPE$1;break;case TABLE:for(;J<14;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(d.nlen=(H&31)+257,H>>>=5,J-=5,d.ndist=(H&31)+1,H>>>=5,J-=5,d.ncode=(H&15)+4,H>>>=4,J-=4,d.nlen>286||d.ndist>30){f.msg="too many length or distance symbols",d.mode=BAD$1;break}d.have=0,d.mode=LENLENS;case LENLENS:for(;d.have<d.ncode;){for(;J<3;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}d.lens[xt[d.have++]]=H&7,H>>>=3,J-=3}for(;d.have<19;)d.lens[xt[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,St={bits:d.lenbits},Ue=inftrees(CODES$1,d.lens,0,19,d.lencode,0,d.work,St),d.lenbits=St.bits,Ue){f.msg="invalid code lengths set",d.mode=BAD$1;break}d.have=0,d.mode=CODELENS;case CODELENS:for(;d.have<d.nlen+d.ndist;){for(;ge=d.lencode[H&(1<<d.lenbits)-1],pe=ge>>>24,he=ge>>>16&255,ve=ge&65535,!(pe<=J);){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(ve<16)H>>>=pe,J-=pe,d.lens[d.have++]=ve;else{if(ve===16){for(At=pe+2;J<At;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(H>>>=pe,J-=pe,d.have===0){f.msg="invalid bit length repeat",d.mode=BAD$1;break}ye=d.lens[d.have-1],oe=3+(H&3),H>>>=2,J-=2}else if(ve===17){for(At=pe+3;J<At;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}H>>>=pe,J-=pe,ye=0,oe=3+(H&7),H>>>=3,J-=3}else{for(At=pe+7;J<At;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}H>>>=pe,J-=pe,ye=0,oe=11+(H&127),H>>>=7,J-=7}if(d.have+oe>d.nlen+d.ndist){f.msg="invalid bit length repeat",d.mode=BAD$1;break}for(;oe--;)d.lens[d.have++]=ye}}if(d.mode===BAD$1)break;if(d.lens[256]===0){f.msg="invalid code -- missing end-of-block",d.mode=BAD$1;break}if(d.lenbits=9,St={bits:d.lenbits},Ue=inftrees(LENS$1,d.lens,0,d.nlen,d.lencode,0,d.work,St),d.lenbits=St.bits,Ue){f.msg="invalid literal/lengths set",d.mode=BAD$1;break}if(d.distbits=6,d.distcode=d.distdyn,St={bits:d.distbits},Ue=inftrees(DISTS$1,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,St),d.distbits=St.bits,Ue){f.msg="invalid distances set",d.mode=BAD$1;break}if(d.mode=LEN_,s===Z_TREES)break e;case LEN_:d.mode=LEN;case LEN:if(M>=6&&P>=258){f.next_out=F,f.avail_out=P,f.next_in=T,f.avail_in=M,d.hold=H,d.bits=J,inffast(f,z),F=f.next_out,S=f.output,P=f.avail_out,T=f.next_in,_=f.input,M=f.avail_in,H=d.hold,J=d.bits,d.mode===TYPE$1&&(d.back=-1);break}for(d.back=0;ge=d.lencode[H&(1<<d.lenbits)-1],pe=ge>>>24,he=ge>>>16&255,ve=ge&65535,!(pe<=J);){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(he&&!(he&240)){for(be=pe,Re=he,Fe=ve;ge=d.lencode[Fe+((H&(1<<be+Re)-1)>>be)],pe=ge>>>24,he=ge>>>16&255,ve=ge&65535,!(be+pe<=J);){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}H>>>=be,J-=be,d.back+=be}if(H>>>=pe,J-=pe,d.back+=pe,d.length=ve,he===0){d.mode=LIT;break}if(he&32){d.back=-1,d.mode=TYPE$1;break}if(he&64){f.msg="invalid literal/length code",d.mode=BAD$1;break}d.extra=he&15,d.mode=LENEXT;case LENEXT:if(d.extra){for(At=d.extra;J<At;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}d.length+=H&(1<<d.extra)-1,H>>>=d.extra,J-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=DIST;case DIST:for(;ge=d.distcode[H&(1<<d.distbits)-1],pe=ge>>>24,he=ge>>>16&255,ve=ge&65535,!(pe<=J);){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(!(he&240)){for(be=pe,Re=he,Fe=ve;ge=d.distcode[Fe+((H&(1<<be+Re)-1)>>be)],pe=ge>>>24,he=ge>>>16&255,ve=ge&65535,!(be+pe<=J);){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}H>>>=be,J-=be,d.back+=be}if(H>>>=pe,J-=pe,d.back+=pe,he&64){f.msg="invalid distance code",d.mode=BAD$1;break}d.offset=ve,d.extra=he&15,d.mode=DISTEXT;case DISTEXT:if(d.extra){for(At=d.extra;J<At;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}d.offset+=H&(1<<d.extra)-1,H>>>=d.extra,J-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){f.msg="invalid distance too far back",d.mode=BAD$1;break}d.mode=MATCH;case MATCH:if(P===0)break e;if(oe=z-P,d.offset>oe){if(oe=d.offset-oe,oe>d.whave&&d.sane){f.msg="invalid distance too far back",d.mode=BAD$1;break}oe>d.wnext?(oe-=d.wnext,se=d.wsize-oe):se=d.wnext-oe,oe>d.length&&(oe=d.length),ae=d.window}else ae=S,se=F-d.offset,oe=d.length;oe>P&&(oe=P),P-=oe,d.length-=oe;do S[F++]=ae[se++];while(--oe);d.length===0&&(d.mode=LEN);break;case LIT:if(P===0)break e;S[F++]=d.length,P--,d.mode=LEN;break;case CHECK:if(d.wrap){for(;J<32;){if(M===0)break e;M--,H|=_[T++]<<J,J+=8}if(z-=P,f.total_out+=z,d.total+=z,z&&(f.adler=d.check=d.flags?crc32_1(d.check,S,z,F-z):adler32_1(d.check,S,z,F-z)),z=P,(d.flags?H:zswap32(H))!==d.check){f.msg="incorrect data check",d.mode=BAD$1;break}H=0,J=0}d.mode=LENGTH;case LENGTH:if(d.wrap&&d.flags){for(;J<32;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(H!==(d.total&4294967295)){f.msg="incorrect length check",d.mode=BAD$1;break}H=0,J=0}d.mode=DONE;case DONE:Ue=Z_STREAM_END$2;break e;case BAD$1:Ue=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR$1}return f.next_out=F,f.avail_out=P,f.next_in=T,f.avail_in=M,d.hold=H,d.bits=J,(d.wsize||z!==f.avail_out&&d.mode<BAD$1&&(d.mode<CHECK||s!==Z_FINISH$2))&&updatewindow(f,f.output,f.next_out,z-f.avail_out),K-=f.avail_in,z-=f.avail_out,f.total_in+=K,f.total_out+=z,d.total+=z,d.wrap&&z&&(f.adler=d.check=d.flags?crc32_1(d.check,S,z,f.next_out-z):adler32_1(d.check,S,z,f.next_out-z)),f.data_type=d.bits+(d.last?64:0)+(d.mode===TYPE$1?128:0)+(d.mode===LEN_||d.mode===COPY_?256:0),(K===0&&z===0||s===Z_FINISH$2)&&Ue===Z_OK$2&&(Ue=Z_BUF_ERROR$1),Ue},inflateEnd=f=>{if(!f||!f.state)return Z_STREAM_ERROR$1;let s=f.state;return s.window&&(s.window=null),f.state=null,Z_OK$2},inflateGetHeader=(f,s)=>{if(!f||!f.state)return Z_STREAM_ERROR$1;const d=f.state;return d.wrap&2?(d.head=s,s.done=!1,Z_OK$2):Z_STREAM_ERROR$1},inflateSetDictionary=(f,s)=>{const d=s.length;let _,S,T;return!f||!f.state||(_=f.state,_.wrap!==0&&_.mode!==DICT)?Z_STREAM_ERROR$1:_.mode===DICT&&(S=1,S=adler32_1(S,s,d,0),S!==_.check)?Z_DATA_ERROR$1:(T=updatewindow(f,s,d,d),T?(_.mode=MEM,Z_MEM_ERROR):(_.havedict=1,Z_OK$2))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2=inflate,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$1$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_FINISH:Z_FINISH$3,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_MEM_ERROR:Z_MEM_ERROR$1}=constants$1;function Inflate(f){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},f||{});const s=this.options;s.raw&&s.windowBits>=0&&s.windowBits<16&&(s.windowBits=-s.windowBits,s.windowBits===0&&(s.windowBits=-15)),s.windowBits>=0&&s.windowBits<16&&!(f&&f.windowBits)&&(s.windowBits+=32),s.windowBits>15&&s.windowBits<48&&(s.windowBits&15||(s.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let d=inflate_1.inflateInit2(this.strm,s.windowBits);if(d!==Z_OK$3)throw new Error(messages[d]);if(this.header=new gzheader,inflate_1.inflateGetHeader(this.strm,this.header),s.dictionary&&(typeof s.dictionary=="string"?s.dictionary=strings.string2buf(s.dictionary):toString$1$1.call(s.dictionary)==="[object ArrayBuffer]"&&(s.dictionary=new Uint8Array(s.dictionary)),s.raw&&(d=inflate_1.inflateSetDictionary(this.strm,s.dictionary),d!==Z_OK$3)))throw new Error(messages[d])}Inflate.prototype.push=function(f,s){const d=this.strm,_=this.options.chunkSize,S=this.options.dictionary;let T,F,M;if(this.ended)return!1;for(s===~~s?F=s:F=s===!0?Z_FINISH$3:Z_NO_FLUSH$2,toString$1$1.call(f)==="[object ArrayBuffer]"?d.input=new Uint8Array(f):d.input=f,d.next_in=0,d.avail_in=d.input.length;;){for(d.avail_out===0&&(d.output=new Uint8Array(_),d.next_out=0,d.avail_out=_),T=inflate_1.inflate(d,F),T===Z_NEED_DICT$1&&S&&(T=inflate_1.inflateSetDictionary(d,S),T===Z_OK$3?T=inflate_1.inflate(d,F):T===Z_DATA_ERROR$2&&(T=Z_NEED_DICT$1));d.avail_in>0&&T===Z_STREAM_END$3&&d.state.wrap>0&&f[d.next_in]!==0;)inflate_1.inflateReset(d),T=inflate_1.inflate(d,F);switch(T){case Z_STREAM_ERROR$2:case Z_DATA_ERROR$2:case Z_NEED_DICT$1:case Z_MEM_ERROR$1:return this.onEnd(T),this.ended=!0,!1}if(M=d.avail_out,d.next_out&&(d.avail_out===0||T===Z_STREAM_END$3))if(this.options.to==="string"){let P=strings.utf8border(d.output,d.next_out),H=d.next_out-P,J=strings.buf2string(d.output,P);d.next_out=H,d.avail_out=_-H,H&&d.output.set(d.output.subarray(P,P+H),0),this.onData(J)}else this.onData(d.output.length===d.next_out?d.output:d.output.subarray(0,d.next_out));if(!(T===Z_OK$3&&M===0)){if(T===Z_STREAM_END$3)return T=inflate_1.inflateEnd(this.strm),this.onEnd(T),this.ended=!0,!0;if(d.avail_in===0)break}}return!0};Inflate.prototype.onData=function(f){this.chunks.push(f)};Inflate.prototype.onEnd=function(f){f===Z_OK$3&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg};function inflate$1(f,s){const d=new Inflate(s);if(d.push(f),d.err)throw d.msg||messages[d.err];return d.result}function inflateRaw(f,s){return s=s||{},s.raw=!0,inflate$1(f,s)}var Inflate_1=Inflate,inflate_2$1=inflate$1,inflateRaw_1=inflateRaw,ungzip=inflate$1,constants$2=constants$1,inflate_1$1={Inflate:Inflate_1,inflate:inflate_2$1,inflateRaw:inflateRaw_1,ungzip,constants:constants$2};const{Deflate:Deflate$1,deflate:deflate$2,deflateRaw:deflateRaw$1,gzip:gzip$1}=deflate_1$1,{Inflate:Inflate$1,inflate:inflate$2,inflateRaw:inflateRaw$1,ungzip:ungzip$1}=inflate_1$1;var Deflate_1$1=Deflate$1,deflate_1$2=deflate$2,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,Inflate_1$1=Inflate$1,inflate_1$2=inflate$2,inflateRaw_1$1=inflateRaw$1,ungzip_1=ungzip$1,constants_1=constants$1,pako={Deflate:Deflate_1$1,deflate:deflate_1$2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1,Inflate:Inflate_1$1,inflate:inflate_1$2,inflateRaw:inflateRaw_1$1,ungzip:ungzip_1,constants:constants_1},_a$2;const GZip=(_a$2=class{constructor(f=1){if(f<0||f>9)throw new Error("Invalid gzip compression level, it should be between 0 and 9");this.level=f}static fromConfig({level:f}){return new _a$2(f)}encode(f){return pako.gzip(f,{level:this.level})}decode(f,s){const d=pako.ungzip(f);return s!==void 0?(s.set(d),s):d}},_a$2.codecId="gzip",_a$2);var GZip$1=GZip,_a$1;const Zlib=(_a$1=class{constructor(f=1){if(f<-1||f>9)throw new Error("Invalid zlib compression level, it should be between -1 and 9");this.level=f}static fromConfig({level:f}){return new _a$1(f)}encode(f){return pako.deflate(f,{level:this.level})}decode(f,s){const d=pako.inflate(f);return s!==void 0?(s.set(d),s):d}},_a$1.codecId="zlib",_a$1);var Zlib$1=Zlib,blosc_codec=function(){return typeof document<"u"&&document.currentScript&&document.currentScript.src,function(f){f=f||{};var s;s||(s=typeof f<"u"?f:{});var d,_;s.ready=new Promise(function(Yt,Dn){d=Yt,_=Dn});var S={},T;for(T in s)s.hasOwnProperty(T)&&(S[T]=s[T]);var F="./this.program",M=s.print||console.log.bind(console),P=s.printErr||console.warn.bind(console);for(T in S)S.hasOwnProperty(T)&&(s[T]=S[T]);S=null,s.thisProgram&&(F=s.thisProgram);var H;s.wasmBinary&&(H=s.wasmBinary),s.noExitRuntime&&s.noExitRuntime,typeof WebAssembly!="object"&&aI("no native wasm support detected");var J,K=!1,z=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function oe(Yt,Dn,Kn){var Ut=Dn+Kn;for(Kn=Dn;Yt[Kn]&&!(Kn>=Ut);)++Kn;if(16<Kn-Dn&&Yt.subarray&&z)return z.decode(Yt.subarray(Dn,Kn));for(Ut="";Dn<Kn;){var Wt=Yt[Dn++];if(Wt&128){var ua=Yt[Dn++]&63;if((Wt&224)==192)Ut+=String.fromCharCode((Wt&31)<<6|ua);else{var uA=Yt[Dn++]&63;Wt=(Wt&240)==224?(Wt&15)<<12|ua<<6|uA:(Wt&7)<<18|ua<<12|uA<<6|Yt[Dn++]&63,65536>Wt?Ut+=String.fromCharCode(Wt):(Wt-=65536,Ut+=String.fromCharCode(55296|Wt>>10,56320|Wt&1023))}}else Ut+=String.fromCharCode(Wt)}return Ut}function se(Yt,Dn,Kn){var Ut=Ue;if(0<Kn){Kn=Dn+Kn-1;for(var Wt=0;Wt<Yt.length;++Wt){var ua=Yt.charCodeAt(Wt);if(55296<=ua&&57343>=ua){var uA=Yt.charCodeAt(++Wt);ua=65536+((ua&1023)<<10)|uA&1023}if(127>=ua){if(Dn>=Kn)break;Ut[Dn++]=ua}else{if(2047>=ua){if(Dn+1>=Kn)break;Ut[Dn++]=192|ua>>6}else{if(65535>=ua){if(Dn+2>=Kn)break;Ut[Dn++]=224|ua>>12}else{if(Dn+3>=Kn)break;Ut[Dn++]=240|ua>>18,Ut[Dn++]=128|ua>>12&63}Ut[Dn++]=128|ua>>6&63}Ut[Dn++]=128|ua&63}}Ut[Dn]=0}}var ae=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function ge(Yt,Dn){for(var Kn=Yt>>1,Ut=Kn+Dn/2;!(Kn>=Ut)&&St[Kn];)++Kn;if(Kn<<=1,32<Kn-Yt&&ae)return ae.decode(Ue.subarray(Yt,Kn));for(Kn=0,Ut="";;){var Wt=It[Yt+2*Kn>>1];if(Wt==0||Kn==Dn/2)return Ut;++Kn,Ut+=String.fromCharCode(Wt)}}function pe(Yt,Dn,Kn){if(Kn===void 0&&(Kn=2147483647),2>Kn)return 0;Kn-=2;var Ut=Dn;Kn=Kn<2*Yt.length?Kn/2:Yt.length;for(var Wt=0;Wt<Kn;++Wt)It[Dn>>1]=Yt.charCodeAt(Wt),Dn+=2;return It[Dn>>1]=0,Dn-Ut}function he(Yt){return 2*Yt.length}function ve(Yt,Dn){for(var Kn=0,Ut="";!(Kn>=Dn/4);){var Wt=At[Yt+4*Kn>>2];if(Wt==0)break;++Kn,65536<=Wt?(Wt-=65536,Ut+=String.fromCharCode(55296|Wt>>10,56320|Wt&1023)):Ut+=String.fromCharCode(Wt)}return Ut}function be(Yt,Dn,Kn){if(Kn===void 0&&(Kn=2147483647),4>Kn)return 0;var Ut=Dn;Kn=Ut+Kn-4;for(var Wt=0;Wt<Yt.length;++Wt){var ua=Yt.charCodeAt(Wt);if(55296<=ua&&57343>=ua){var uA=Yt.charCodeAt(++Wt);ua=65536+((ua&1023)<<10)|uA&1023}if(At[Dn>>2]=ua,Dn+=4,Dn+4>Kn)break}return At[Dn>>2]=0,Dn-Ut}function Re(Yt){for(var Dn=0,Kn=0;Kn<Yt.length;++Kn){var Ut=Yt.charCodeAt(Kn);55296<=Ut&&57343>=Ut&&++Kn,Dn+=4}return Dn}var Fe,ye,Ue,It,St,At,xt,Ct,Nt;function qt(Yt){Fe=Yt,s.HEAP8=ye=new Int8Array(Yt),s.HEAP16=It=new Int16Array(Yt),s.HEAP32=At=new Int32Array(Yt),s.HEAPU8=Ue=new Uint8Array(Yt),s.HEAPU16=St=new Uint16Array(Yt),s.HEAPU32=xt=new Uint32Array(Yt),s.HEAPF32=Ct=new Float32Array(Yt),s.HEAPF64=Nt=new Float64Array(Yt)}var Jn=s.INITIAL_MEMORY||16777216;s.wasmMemory?J=s.wasmMemory:J=new WebAssembly.Memory({initial:Jn/65536,maximum:32768}),J&&(Fe=J.buffer),Jn=Fe.byteLength,qt(Fe);var qr,na=[],qn=[],vA=[],TA=[];function VA(){var Yt=s.preRun.shift();na.unshift(Yt)}var mI=0,jA=null;s.preloadedImages={},s.preloadedAudios={};function aI(Yt){throw s.onAbort&&s.onAbort(Yt),P(Yt),K=!0,Yt=new WebAssembly.RuntimeError("abort("+Yt+"). Build with -s ASSERTIONS=1 for more info."),_(Yt),Yt}function WA(Yt){var Dn=rA;return String.prototype.startsWith?Dn.startsWith(Yt):Dn.indexOf(Yt)===0}function KA(){return WA("data:application/octet-stream;base64,")}var rA="blosc_codec.wasm";if(!KA()){var ta=rA;rA=s.locateFile?s.locateFile(ta,""):""+ta}function fa(){try{if(H)return new Uint8Array(H);throw"both async and sync fetching of the wasm failed"}catch(Yt){aI(Yt)}}function yA(Yt){for(;0<Yt.length;){var Dn=Yt.shift();if(typeof Dn=="function")Dn(s);else{var Kn=Dn.T;typeof Kn=="number"?Dn.O===void 0?qr.get(Kn)():qr.get(Kn)(Dn.O):Kn(Dn.O===void 0?null:Dn.O)}}}function _A(Yt){this.N=Yt-16,this.$=function(Dn){At[this.N+8>>2]=Dn},this.X=function(Dn){At[this.N+0>>2]=Dn},this.Y=function(){At[this.N+4>>2]=0},this.W=function(){ye[this.N+12>>0]=0},this.Z=function(){ye[this.N+13>>0]=0},this.V=function(Dn,Kn){this.$(Dn),this.X(Kn),this.Y(),this.W(),this.Z()}}function la(Yt){switch(Yt){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+Yt)}}var AA=void 0;function tA(Yt){for(var Dn="";Ue[Yt];)Dn+=AA[Ue[Yt++]];return Dn}var ba={},iA={},lA={};function yI(Yt){if(Yt===void 0)return"_unknown";Yt=Yt.replace(/[^a-zA-Z0-9_]/g,"$");var Dn=Yt.charCodeAt(0);return 48<=Dn&&57>=Dn?"_"+Yt:Yt}function rI(Yt,Dn){return Yt=yI(Yt),new Function("body","return function "+Yt+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(Dn)}function BI(Yt){var Dn=Error,Kn=rI(Yt,function(Ut){this.name=Yt,this.message=Ut,Ut=Error(Ut).stack,Ut!==void 0&&(this.stack=this.toString()+`
`+Ut.replace(/^Error(:[^\n]*)?\n/,""))});return Kn.prototype=Object.create(Dn.prototype),Kn.prototype.constructor=Kn,Kn.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},Kn}var NI=void 0;function Rt(Yt){throw new NI(Yt)}var QA=void 0;function cA(Yt,Dn){function Kn(EA){if(EA=Dn(EA),EA.length!==Ut.length)throw new QA("Mismatched type converter count");for(var bA=0;bA<Ut.length;++bA)gI(Ut[bA],EA[bA])}var Ut=[];Ut.forEach(function(EA){lA[EA]=Yt});var Wt=Array(Yt.length),ua=[],uA=0;Yt.forEach(function(EA,bA){iA.hasOwnProperty(EA)?Wt[bA]=iA[EA]:(ua.push(EA),ba.hasOwnProperty(EA)||(ba[EA]=[]),ba[EA].push(function(){Wt[bA]=iA[EA],++uA,uA===ua.length&&Kn(Wt)}))}),ua.length===0&&Kn(Wt)}function gI(Yt,Dn,Kn){if(Kn=Kn||{},!("argPackAdvance"in Dn))throw new TypeError("registerType registeredInstance requires argPackAdvance");var Ut=Dn.name;if(Yt||Rt('type "'+Ut+'" must have a positive integer typeid pointer'),iA.hasOwnProperty(Yt)){if(Kn.U)return;Rt("Cannot register type '"+Ut+"' twice")}iA[Yt]=Dn,delete lA[Yt],ba.hasOwnProperty(Yt)&&(Dn=ba[Yt],delete ba[Yt],Dn.forEach(function(Wt){Wt()}))}var LI=[],da=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function dA(Yt){4<Yt&&--da[Yt].P===0&&(da[Yt]=void 0,LI.push(Yt))}function RA(Yt){switch(Yt){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var Dn=LI.length?LI.pop():da.length;return da[Dn]={P:1,value:Yt},Dn}}function pI(Yt){return this.fromWireType(xt[Yt>>2])}function vI(Yt){if(Yt===null)return"null";var Dn=typeof Yt;return Dn==="object"||Dn==="array"||Dn==="function"?Yt.toString():""+Yt}function EI(Yt,Dn){switch(Dn){case 2:return function(Kn){return this.fromWireType(Ct[Kn>>2])};case 3:return function(Kn){return this.fromWireType(Nt[Kn>>3])};default:throw new TypeError("Unknown float type: "+Yt)}}function zI(Yt){var Dn=Function;if(!(Dn instanceof Function))throw new TypeError("new_ called with constructor type "+typeof Dn+" which is not a function");var Kn=rI(Dn.name||"unknownFunctionName",function(){});return Kn.prototype=Dn.prototype,Kn=new Kn,Yt=Dn.apply(Kn,Yt),Yt instanceof Object?Yt:Kn}function FI(Yt){for(;Yt.length;){var Dn=Yt.pop();Yt.pop()(Dn)}}function DI(Yt,Dn){var Kn=s;if(Kn[Yt].L===void 0){var Ut=Kn[Yt];Kn[Yt]=function(){return Kn[Yt].L.hasOwnProperty(arguments.length)||Rt("Function '"+Dn+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+Kn[Yt].L+")!"),Kn[Yt].L[arguments.length].apply(this,arguments)},Kn[Yt].L=[],Kn[Yt].L[Ut.S]=Ut}}function ZI(Yt,Dn,Kn){s.hasOwnProperty(Yt)?((Kn===void 0||s[Yt].L!==void 0&&s[Yt].L[Kn]!==void 0)&&Rt("Cannot register public name '"+Yt+"' twice"),DI(Yt,Yt),s.hasOwnProperty(Kn)&&Rt("Cannot register multiple overloads of a function with the same number of arguments ("+Kn+")!"),s[Yt].L[Kn]=Dn):(s[Yt]=Dn,Kn!==void 0&&(s[Yt].ba=Kn))}function IC(Yt,Dn){for(var Kn=[],Ut=0;Ut<Yt;Ut++)Kn.push(At[(Dn>>2)+Ut]);return Kn}function mC(Yt,Dn){0<=Yt.indexOf("j")||aI("Assertion failed: getDynCaller should only be called with i64 sigs");var Kn=[];return function(){Kn.length=arguments.length;for(var Ut=0;Ut<arguments.length;Ut++)Kn[Ut]=arguments[Ut];var Wt;return Yt.indexOf("j")!=-1?Wt=Kn&&Kn.length?s["dynCall_"+Yt].apply(null,[Dn].concat(Kn)):s["dynCall_"+Yt].call(null,Dn):Wt=qr.get(Dn).apply(null,Kn),Wt}}function BC(Yt,Dn){Yt=tA(Yt);var Kn=Yt.indexOf("j")!=-1?mC(Yt,Dn):qr.get(Dn);return typeof Kn!="function"&&Rt("unknown function pointer with signature "+Yt+": "+Dn),Kn}var yC=void 0;function vC(Yt){Yt=sC(Yt);var Dn=tA(Yt);return GI(Yt),Dn}function _C(Yt,Dn){function Kn(ua){Wt[ua]||iA[ua]||(lA[ua]?lA[ua].forEach(Kn):(Ut.push(ua),Wt[ua]=!0))}var Ut=[],Wt={};throw Dn.forEach(Kn),new yC(Yt+": "+Ut.map(vC).join([", "]))}function RC(Yt,Dn,Kn){switch(Dn){case 0:return Kn?function(Ut){return ye[Ut]}:function(Ut){return Ue[Ut]};case 1:return Kn?function(Ut){return It[Ut>>1]}:function(Ut){return St[Ut>>1]};case 2:return Kn?function(Ut){return At[Ut>>2]}:function(Ut){return xt[Ut>>2]};default:throw new TypeError("Unknown integer type: "+Yt)}}var Xt={};function zn(){if(!oa){var Yt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:F||"./this.program"},Dn;for(Dn in Xt)Yt[Dn]=Xt[Dn];var Kn=[];for(Dn in Yt)Kn.push(Dn+"="+Yt[Dn]);oa=Kn}return oa}for(var oa,MA=[null,[],[]],YA=Array(256),PA=0;256>PA;++PA)YA[PA]=String.fromCharCode(PA);AA=YA,NI=s.BindingError=BI("BindingError"),QA=s.InternalError=BI("InternalError"),s.count_emval_handles=function(){for(var Yt=0,Dn=5;Dn<da.length;++Dn)da[Dn]!==void 0&&++Yt;return Yt},s.get_first_emval=function(){for(var Yt=5;Yt<da.length;++Yt)if(da[Yt]!==void 0)return da[Yt];return null},yC=s.UnboundTypeError=BI("UnboundTypeError"),qn.push({T:function(){XA()}});var iI={p:function(Yt){return $I(Yt+16)+16},o:function(Yt,Dn,Kn){throw new _A(Yt).V(Dn,Kn),Yt},z:function(Yt,Dn,Kn,Ut,Wt){var ua=la(Kn);Dn=tA(Dn),gI(Yt,{name:Dn,fromWireType:function(uA){return!!uA},toWireType:function(uA,EA){return EA?Ut:Wt},argPackAdvance:8,readValueFromPointer:function(uA){if(Kn===1)var EA=ye;else if(Kn===2)EA=It;else if(Kn===4)EA=At;else throw new TypeError("Unknown boolean type size: "+Dn);return this.fromWireType(EA[uA>>ua])},M:null})},y:function(Yt,Dn){Dn=tA(Dn),gI(Yt,{name:Dn,fromWireType:function(Kn){var Ut=da[Kn].value;return dA(Kn),Ut},toWireType:function(Kn,Ut){return RA(Ut)},argPackAdvance:8,readValueFromPointer:pI,M:null})},h:function(Yt,Dn,Kn){Kn=la(Kn),Dn=tA(Dn),gI(Yt,{name:Dn,fromWireType:function(Ut){return Ut},toWireType:function(Ut,Wt){if(typeof Wt!="number"&&typeof Wt!="boolean")throw new TypeError('Cannot convert "'+vI(Wt)+'" to '+this.name);return Wt},argPackAdvance:8,readValueFromPointer:EI(Dn,Kn),M:null})},e:function(Yt,Dn,Kn,Ut,Wt,ua){var uA=IC(Dn,Kn);Yt=tA(Yt),Wt=BC(Ut,Wt),ZI(Yt,function(){_C("Cannot call "+Yt+" due to unbound types",uA)},Dn-1),cA(uA,function(EA){var bA=Yt,lI=Yt;EA=[EA[0],null].concat(EA.slice(1));var YI=Wt,uC=EA.length;2>uC&&Rt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var VC=EA[1]!==null&&!1,jC=!1,VI=1;VI<EA.length;++VI)if(EA[VI]!==null&&EA[VI].M===void 0){jC=!0;break}var hE=EA[0].name!=="void",OC="",JC="";for(VI=0;VI<uC-2;++VI)OC+=(VI!==0?", ":"")+"arg"+VI,JC+=(VI!==0?", ":"")+"arg"+VI+"Wired";lI="return function "+yI(lI)+"("+OC+`) {
if (arguments.length !== `+(uC-2)+`) {
throwBindingError('function `+lI+" called with ' + arguments.length + ' arguments, expected "+(uC-2)+` args!');
}
`,jC&&(lI+=`var destructors = [];
`);var fE=jC?"destructors":"null";for(OC="throwBindingError invoker fn runDestructors retType classParam".split(" "),YI=[Rt,YI,ua,FI,EA[0],EA[1]],VC&&(lI+="var thisWired = classParam.toWireType("+fE+`, this);
`),VI=0;VI<uC-2;++VI)lI+="var arg"+VI+"Wired = argType"+VI+".toWireType("+fE+", arg"+VI+"); // "+EA[VI+2].name+`
`,OC.push("argType"+VI),YI.push(EA[VI+2]);if(VC&&(JC="thisWired"+(0<JC.length?", ":"")+JC),lI+=(hE?"var rv = ":"")+"invoker(fn"+(0<JC.length?", ":"")+JC+`);
`,jC)lI+=`runDestructors(destructors);
`;else for(VI=VC?1:2;VI<EA.length;++VI)uC=VI===1?"thisWired":"arg"+(VI-2)+"Wired",EA[VI].M!==null&&(lI+=uC+"_dtor("+uC+"); // "+EA[VI].name+`
`,OC.push(uC+"_dtor"),YI.push(EA[VI].M));if(hE&&(lI+=`var ret = retType.fromWireType(rv);
return ret;
`),OC.push(lI+`}
`),EA=zI(OC).apply(null,YI),VI=Dn-1,!s.hasOwnProperty(bA))throw new QA("Replacing nonexistant public symbol");return s[bA].L!==void 0&&VI!==void 0?s[bA].L[VI]=EA:(s[bA]=EA,s[bA].S=VI),[]})},c:function(Yt,Dn,Kn,Ut,Wt){function ua(lI){return lI}Dn=tA(Dn),Wt===-1&&(Wt=4294967295);var uA=la(Kn);if(Ut===0){var EA=32-8*Kn;ua=function(lI){return lI<<EA>>>EA}}var bA=Dn.indexOf("unsigned")!=-1;gI(Yt,{name:Dn,fromWireType:ua,toWireType:function(lI,YI){if(typeof YI!="number"&&typeof YI!="boolean")throw new TypeError('Cannot convert "'+vI(YI)+'" to '+this.name);if(YI<Ut||YI>Wt)throw new TypeError('Passing a number "'+vI(YI)+'" from JS side to C/C++ side to an argument of type "'+Dn+'", which is outside the valid range ['+Ut+", "+Wt+"]!");return bA?YI>>>0:YI|0},argPackAdvance:8,readValueFromPointer:RC(Dn,uA,Ut!==0),M:null})},b:function(Yt,Dn,Kn){function Ut(ua){ua>>=2;var uA=xt;return new Wt(Fe,uA[ua+1],uA[ua])}var Wt=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][Dn];Kn=tA(Kn),gI(Yt,{name:Kn,fromWireType:Ut,argPackAdvance:8,readValueFromPointer:Ut},{U:!0})},i:function(Yt,Dn){Dn=tA(Dn);var Kn=Dn==="std::string";gI(Yt,{name:Dn,fromWireType:function(Ut){var Wt=xt[Ut>>2];if(Kn)for(var ua=Ut+4,uA=0;uA<=Wt;++uA){var EA=Ut+4+uA;if(uA==Wt||Ue[EA]==0){if(ua=ua?oe(Ue,ua,EA-ua):"",bA===void 0)var bA=ua;else bA+="\0",bA+=ua;ua=EA+1}}else{for(bA=Array(Wt),uA=0;uA<Wt;++uA)bA[uA]=String.fromCharCode(Ue[Ut+4+uA]);bA=bA.join("")}return GI(Ut),bA},toWireType:function(Ut,Wt){Wt instanceof ArrayBuffer&&(Wt=new Uint8Array(Wt));var ua=typeof Wt=="string";ua||Wt instanceof Uint8Array||Wt instanceof Uint8ClampedArray||Wt instanceof Int8Array||Rt("Cannot pass non-string to std::string");var uA=(Kn&&ua?function(){for(var lI=0,YI=0;YI<Wt.length;++YI){var uC=Wt.charCodeAt(YI);55296<=uC&&57343>=uC&&(uC=65536+((uC&1023)<<10)|Wt.charCodeAt(++YI)&1023),127>=uC?++lI:lI=2047>=uC?lI+2:65535>=uC?lI+3:lI+4}return lI}:function(){return Wt.length})(),EA=$I(4+uA+1);if(xt[EA>>2]=uA,Kn&&ua)se(Wt,EA+4,uA+1);else if(ua)for(ua=0;ua<uA;++ua){var bA=Wt.charCodeAt(ua);255<bA&&(GI(EA),Rt("String has UTF-16 code units that do not fit in 8 bits")),Ue[EA+4+ua]=bA}else for(ua=0;ua<uA;++ua)Ue[EA+4+ua]=Wt[ua];return Ut!==null&&Ut.push(GI,EA),EA},argPackAdvance:8,readValueFromPointer:pI,M:function(Ut){GI(Ut)}})},d:function(Yt,Dn,Kn){if(Kn=tA(Kn),Dn===2)var Ut=ge,Wt=pe,ua=he,uA=function(){return St},EA=1;else Dn===4&&(Ut=ve,Wt=be,ua=Re,uA=function(){return xt},EA=2);gI(Yt,{name:Kn,fromWireType:function(bA){for(var lI=xt[bA>>2],YI=uA(),uC,VC=bA+4,jC=0;jC<=lI;++jC){var VI=bA+4+jC*Dn;(jC==lI||YI[VI>>EA]==0)&&(VC=Ut(VC,VI-VC),uC===void 0?uC=VC:(uC+="\0",uC+=VC),VC=VI+Dn)}return GI(bA),uC},toWireType:function(bA,lI){typeof lI!="string"&&Rt("Cannot pass non-string to C++ string type "+Kn);var YI=ua(lI),uC=$I(4+YI+Dn);return xt[uC>>2]=YI>>EA,Wt(lI,uC+4,YI+Dn),bA!==null&&bA.push(GI,uC),uC},argPackAdvance:8,readValueFromPointer:pI,M:function(bA){GI(bA)}})},A:function(Yt,Dn){Dn=tA(Dn),gI(Yt,{aa:!0,name:Dn,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},n:dA,x:function(Yt){4<Yt&&(da[Yt].P+=1)},C:function(Yt,Dn){var Kn=iA[Yt];return Kn===void 0&&Rt("_emval_take_value has unknown type "+vC(Yt)),Yt=Kn.readValueFromPointer(Dn),RA(Yt)},t:function(){aI()},r:function(Yt,Dn,Kn){Ue.copyWithin(Yt,Dn,Dn+Kn)},s:function(Yt){Yt>>>=0;var Dn=Ue.length;if(2147483648<Yt)return!1;for(var Kn=1;4>=Kn;Kn*=2){var Ut=Dn*(1+.2/Kn);Ut=Math.min(Ut,Yt+100663296),Ut=Math.max(16777216,Yt,Ut),0<Ut%65536&&(Ut+=65536-Ut%65536);e:{try{J.grow(Math.min(2147483648,Ut)-Fe.byteLength+65535>>>16),qt(J.buffer);var Wt=1;break e}catch{}Wt=void 0}if(Wt)return!0}return!1},u:function(Yt,Dn){var Kn=0;return zn().forEach(function(Ut,Wt){var ua=Dn+Kn;for(Wt=At[Yt+4*Wt>>2]=ua,ua=0;ua<Ut.length;++ua)ye[Wt++>>0]=Ut.charCodeAt(ua);ye[Wt>>0]=0,Kn+=Ut.length+1}),0},v:function(Yt,Dn){var Kn=zn();At[Yt>>2]=Kn.length;var Ut=0;return Kn.forEach(function(Wt){Ut+=Wt.length+1}),At[Dn>>2]=Ut,0},w:function(){return 0},q:function(){},g:function(Yt,Dn,Kn,Ut){for(var Wt=0,ua=0;ua<Kn;ua++){for(var uA=At[Dn+8*ua>>2],EA=At[Dn+(8*ua+4)>>2],bA=0;bA<EA;bA++){var lI=Ue[uA+bA],YI=MA[Yt];lI===0||lI===10?((Yt===1?M:P)(oe(YI,0)),YI.length=0):YI.push(lI)}Wt+=EA}return At[Ut>>2]=Wt,0},a:J,l:function(){return 0},k:function(){return 0},j:function(){},B:function(){return 6},m:function(){},f:function(){}};(function(){function Yt(Wt){s.asm=Wt.exports,qr=s.asm.D,mI--,s.monitorRunDependencies&&s.monitorRunDependencies(mI),mI==0&&jA&&(Wt=jA,jA=null,Wt())}function Dn(Wt){Yt(Wt.instance)}function Kn(Wt){return Promise.resolve().then(fa).then(function(ua){return WebAssembly.instantiate(ua,Ut)}).then(Wt,function(ua){P("failed to asynchronously prepare wasm: "+ua),aI(ua)})}var Ut={a:iI};if(mI++,s.monitorRunDependencies&&s.monitorRunDependencies(mI),s.instantiateWasm)try{return s.instantiateWasm(Ut,Yt)}catch(Wt){return P("Module.instantiateWasm callback failed with error: "+Wt),!1}return function(){return H||typeof WebAssembly.instantiateStreaming!="function"||KA()||WA("file://")||typeof fetch!="function"?Kn(Dn):fetch(rA,{credentials:"same-origin"}).then(function(Wt){return WebAssembly.instantiateStreaming(Wt,Ut).then(Dn,function(ua){return P("wasm streaming compile failed: "+ua),P("falling back to ArrayBuffer instantiation"),Kn(Dn)})})}().catch(_),{}})();var XA=s.___wasm_call_ctors=function(){return(XA=s.___wasm_call_ctors=s.asm.E).apply(null,arguments)},$I=s._malloc=function(){return($I=s._malloc=s.asm.F).apply(null,arguments)},GI=s._free=function(){return(GI=s._free=s.asm.G).apply(null,arguments)},sC=s.___getTypeName=function(){return(sC=s.___getTypeName=s.asm.H).apply(null,arguments)};s.___embind_register_native_and_builtin_types=function(){return(s.___embind_register_native_and_builtin_types=s.asm.I).apply(null,arguments)},s.dynCall_jiiiii=function(){return(s.dynCall_jiiiii=s.asm.J).apply(null,arguments)},s.dynCall_jiji=function(){return(s.dynCall_jiji=s.asm.K).apply(null,arguments)};var eC;jA=function Yt(){eC||KI(),eC||(jA=Yt)};function KI(){function Yt(){if(!eC&&(eC=!0,s.calledRun=!0,!K)){if(yA(qn),yA(vA),d(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;){var Dn=s.postRun.shift();TA.unshift(Dn)}yA(TA)}}if(!(0<mI)){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)VA();yA(na),0<mI||(s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),Yt()},1)):Yt())}}if(s.run=KI,s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return KI(),f.ready}}(),__isNode=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,__toBinary=__isNode?f=>new Uint8Array(Buffer.from(f,"base64")):(()=>{for(var f=new Uint8Array(128),s=0;s<64;s++)f[s<26?s+65:s<52?s+71:s<62?s-4:s*4-205]=s;return d=>{for(var _=d.length,S=new Uint8Array((_-(d[_-1]=="=")-(d[_-2]=="="))*3/4|0),T=0,F=0;T<_;){var M=f[d.charCodeAt(T++)],P=f[d.charCodeAt(T++)],H=f[d.charCodeAt(T++)],J=f[d.charCodeAt(T++)];S[F++]=M<<2|P>>4,S[F++]=P<<4|H>>2,S[F++]=H<<6|J}return S}})(),wasmBinary=__toBinary("AGFzbQEAAAABwAImYAF/AX9gA39/fwF/YAV/f39/fwF/YAJ/fwF/YAJ/fwBgAX8AYAN/f38AYAR/f39/AX9gBH9/f38AYAAAYAZ/f39/f38Bf2AFf39/f38AYAZ/f39/f38AYAd/f39/f39/AX9gBH9/f38BfmAFf39/f38BfmAIf39/f39/f38Bf2AJf39/f39/f39/AX9gAn5/AX9gC39/f39/f39/f39/AX9gA39+fwF+YAN/f34AYAN/f34Bf2ADfn9/AX9gAn5+AX5gCH9/f39/f39/AGAJf39/f39/f39/AGAFf35/f38AYAABf2ANf39/f39/f39/f39/fwF/YA9/f39/f39/f39/f39/f38Bf2AFf39/fn8Bf2AGf3x/f39/AX9gAX8BfmACf38BfmAHf35/f39/fwF+YAF+AX5gBH5/f34BfgK0AR0BYQFiAAYBYQFjAAsBYQFkAAYBYQFlAAwBYQFmAAUBYQFnAAcBYQFoAAYBYQFpAAQBYQFqAAMBYQFrAAABYQFsAAABYQFtAAMBYQFuAAUBYQFvAAYBYQFwAAABYQFxAAIBYQFyAAEBYQFzAAABYQF0AAkBYQF1AAMBYQF2AAMBYQF3AAABYQF4AAUBYQF5AAQBYQF6AAsBYQFBAAQBYQFCAAcBYQFDAAMBYQFhAgGAAoCAAgOtBKsEBAEBAwIACAAAAAQHAQEBAAIBAAQDAQMBBAEFAwUFAAYAAwAIAgIDAQgBAwYBCwEBAAQYBAEEBwoGAwMLBwgBBggDCwUDAwMGCAEGBAYABwIGAAABAAIEBAYEBQMDAAsABgwDAAANBgIYAwkAAQwGBggAAgAAAAUQHQAEAQMbBwcHBwMDBh4TBAgBAgECCgcGCgYEAAQAARARAwAIAAYDBgAFBQUFBQUJCwUGAQAFBQICAgcHAwQEAAcSARIXJQQGAwMDAAUEAQABBQUDAAMGCgAFBQMBHwUDAwUFAREDBwoEAAUBAwcKCiEGBQEABgYGBQUIAxMNAAADAAkBBwcHBwcHBwcAAQgGBwMRAgICAgYCCAoCAgcCCAAFBAUFAAMAAAIKBBQACQwMCwMLCAgICwwAAQEFAAUABQkDAAMSEhcGAQAUAAAJCQkJBgAJCQkJCQkJCQkJCQkJDQ0ABgcBAQcHAgEBAgEEAwoABAcFBRwKCgoFAgoCAgMaGQUE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BCAGanQgAWohASACIARHIQwgBEEBaiEEIAwNAAsLIA1BAWoiDSACayIBIAcgAWtBAWoiCEkEQCAKQQJJIQYDQEEBIQQgBkUEQANAIARBAnQiCiADIAFBNGxqaiADIApqKAIAIAF2NgIAIAIgBEchCiAEQQFqIQQgCg0ACwsgAUEBaiIBIAhJDQALCyAAQQRqIAcgCyAJIANBpAVqIAMgAiANEJYDIAVBAToABSAFIAc6AAYgACAFKAIENgIACyAQIQQLIAVBEGokACAEC+ACAQl/IwBBEGsiBCQAIARBADYCDCAEQQA2AggCQCADQUBrIgkgAyAEQQhqIARBDGogASACEPsBIggQIQ0AIARBBGogACgCABA0QQEhASAEKAIMIgUgBC0ABEEBak0EQEEAIQIgBEEAOgAFIAQgBToABiAAIAQoAgQ2AgAgBUEBakEBSwRAA0AgAyABQQJ0aiIGKAIAIQcgBiACNgIAIAcgAUF/anQgAmohAiABIAVGIQYgAUEBaiEBIAZFDQALCyAEKAIIIgdFDQEgAEEEaiEKIAVBAWohC0EAIQADQCADIAAgCWotAAAiBUECdGoiBigCACIBIAFBASAFdEEBdSIMaiICSQRAIAsgBWshBQNAIAogAUEBdGoiAiAFOgABIAIgADoAACABQQFqIgEgBigCACAMaiICSQ0ACwsgBiACNgIAIABBAWoiACAHRw0ACwwBC0FUIQgLIARBEGokACAICxQAIAAoAABBgPqerQNsQSAgAWt2CygAAkACQAJAIAAoAowBQX9qDgIAAQILIAAgARDCAw8LIAAgARDHAwsLOgEBfyABIAAoAgRrIgEgACgCGCICQYAIaksEQCAAIAEgASACa0GAeGoiAEGABCAAQYAESRtrNgIYCwsVACAAEJEBBEAgACgCBA8LIAAtAAsLRQEBfwJAIAIgA00gACABTXINAANAIABBf2oiAC0AACACQX9qIgItAABHDQEgBEEBaiEEIAIgA00NASAAIAFLDQALCyAECwwAIABBICABa62IpwsQACAAIAEgAigCCHRBA3RqCxIAIABBwAAgAWutiKdBACABGwsvAEEgIAFrIgEgAkkEQCAAp0F/IAJ0QX9zcQ8LIAAgASACa62Ip0F/IAJ0QX9zcQsgACACrSAAIAGtQgp8IAN+fULjyJW9y5vvjU9+fEIK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nn9+QuPcypX8zvL1hX98IQYgBCIDIgFBCGoiBCACTQ0ACwsCQCADQQRqIgEgAksEQCADIQEMAQsgAygAAK1Ch5Wvr5i23puef34gBoVCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQYLIAEgAkkEQCAAIAVqQShqIQADQCABMQAAQsXP2bLx5brqJ34gBoVCC4lCh5Wvr5i23puef34hBiABQQFqIgEgAEcNAAsLIAZCIYggBoVCz9bTvtLHq9lCfiIGQh2IIAaFQvnz3fGZ9pmrFn4iBkIgiCAGhQv4AgICfwR+IAAgACkDACACrXw3AwACQAJAIAAoAkgiAyACakEfTQRAIAAgA2pBKGogASACEKsBIAAoAkggAmohAQwBCyABIAJqIQQCQAJ/IAMEQCAAQShqIgIgA2ogAUEgIANrEKsBIAAgACkDCCACKQAAEE43AwggACAAKQMQIAApADAQTjcDECAAIAApAxggACkAOBBONwMYIAAgACkDICAAQUBrKQAAEE43AyAgACgCSCECIABBADYCSCABIAJrQSBqIQELIAFBIGogBEsLBEAgASECDAELIARBYGohAyAAKQMgIQUgACkDGCEGIAApAxAhByAAKQMIIQgDQCAIIAEpAAAQTiEIIAcgASkACBBOIQcgBiABKQAQEE4hBiAFIAEpABgQTiEFIAFBIGoiAiEBIAIgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyACIARPDQEgAEEoaiACIAQgAmsiARCrAQsgACABNgJICwtlACAAQgA3AyggAEL56tDQ58mh5OEANwMgIABCADcDGCAAQs/W077Sx6vZQjcDECAAQtbrgu7q/Yn14AA3AwggAEIANwMAIABCADcDMCAAQgA3AzggAEFAa0IANwMAIABCADcDSAsVACABBEAgAiAAIAERAwAPCyAAEEwLYQEDf0F+IQECQCAARQ0AIAAoAhwiAkUNACAAKAIkIgNFDQAgAigCNCIBBEAgACgCKCABIAMRBAAgACgCJCEDIAAoAhwhAgsgACgCKCACIAMRBABBACEBIABBADYCHAsgAQudCwEMfyACQQBOBEBBBEEDIAEvAQIiCxshB0EHQYoBIAsbIQQgAEG5LWohCEF/IQYDQCALIQkCQCAJIAEgDCINQQFqIgxBAnRqLwECIgtH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AhQgCiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACABQRAgACgCvC0iAWt2OwG4LSAAIAEgAmpBcGo2ArwtDwsgACACIARqNgK8LQuXAQECfwJAAn8gACgCvC0iAUEJTgRAIAAgACgCFCIBQQFqNgIUIAEgACgCCGogAC0AuC06AAAgACAAKAIUIgFBAWo2AhQgAEG5LWotAAAhAiABIAAoAghqDAELIAFBAUgNASAAIAAoAhQiAUEBajYCFCAALQC4LSECIAEgACgCCGoLIAI6AAALIABBADYCvC0gAEEAOwG4LQvaBAEBfwNAIAAgAUECdGpBADsBlAEgAUEBaiIBQZ4CRw0ACyAAQQA7AfwUIABBADsBiBMgAEHEFWpBADsBACAAQcAVakEAOwEAIABBvBVqQQA7AQAgAEG4FWpBADsBACAAQbQVakEAOwEAIABBsBVqQQA7AQAgAEGsFWpBADsBACAAQagVakEAOwEAIABBpBVqQQA7AQAgAEGgFWpBADsBACAAQZwVakEAOwEAIABBmBVqQQA7AQAgAEGUFWpBADsBACAAQZAVakEAOwEAIABBjBVqQQA7AQAgAEGIFWpBADsBACAAQYQVakEAOwEAIABBgBVqQQA7AQAgAEH8E2pBADsBACAAQfgTakEAOwEAIABB9BNqQQA7AQAgAEHwE2pBADsBACAAQewTakEAOwEAIABB6BNqQQA7AQAgAEHkE2pBADsBACAAQeATakEAOwEAIABB3BNqQQA7AQAgAEHYE2pBADsBACAAQdQTakEAOwEAIABB0BNqQQA7AQAgAEHME2pBADsBACAAQcgTakEAOwEAIABBxBNqQQA7AQAgAEHAE2pBADsBACAAQbwTakEAOwEAIABBuBNqQQA7AQAgAEG0E2pBADsBACAAQbATakEAOwEAIABBrBNqQQA7AQAgAEGoE2pBADsBACAAQaQTakEAOwEAIABBoBNqQQA7AQAgAEGcE2pBADsBACAAQZgTakEAOwEAIABBlBNqQQA7AQAgAEGQE2pBADsBACAAQYwTakEAOwEAIABCADcCrC0gAEGUCWpBATsBACAAQQA2AqgtIABBADYCoC0LngEBAn8gACAALwG4LSADQf//A3EiBCAAKAK8LSIDdHIiBTsBuC0gAAJ/IANB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A0AgCSAFIARBAXRqIgotAAEiC0ECdGoiDCgCACEDIAlBPGogCi0AAEEIdCAIakH//wNxEC8gCUECOgA/IAkgByALayIKIAJqOgA+IANBASABIAprdGohCiAJKAI8IQsDQCAAIANBAnRqIAs2AQAgA0EBaiIDIApJDQALIAwgCjYCACAEQQFqIgQgBkcNAAsLIAlBQGskAAvdAgEJfyMAQdAAayIJJAAgCUFAayAFKAIwNgIAIAkgBSkCKDcDOCAJIAUpAiA3AzAgCSAFKQIYNwMoIAkgBSkCEDcDICAJIAUpAgA3AxAgCSAFKQIINwMYIAMEQCAHIAZrIQ8gByABayEQA0BBASABIAcgAiALQQF0aiIGLQABIgxrIghrIgp0IQ0gBi0AACEOIAlBEGogDEECdGoiDCgCACEGAkAgCiAPTwRAIAAgBkECdGogCiAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QlQMgBiANaiEIDAELIAlBDGogDhAvIAlBAToADyAJIAg6AA4gBiAGIA1qIghPDQAgCSgCDCEKA0AgACAGQQJ0aiAKNgEAIAZBAWoiBiAIRw0ACwsgDCAINgIAIAtBAWoiCyADRw0ACwsgCUHQAGokAAs+AQN/IAAEQCAAKAIAIABBvNABaigCACIBIABBwNABaigCACICIABBxNABaigCACIDEGQgACABIAIgAxBkCwvMAQEBfyAAIAEoArTQATYCmOIBIAAgASgCBCICNgLA4AEgACACNgK84AEgACACIAEoAghqIgI2ArjgASAAIAI2AsTgASABKAK40AEEQCAAQoGAgIAQNwOI4QEgACABQaTQAGo2AgwgACABQZQgajYCCCAAIAFBnDBqNgIEIAAgAUEMajYCACAAQazQAWogAUGo0AFqKAIANgIAIABBsNABaiABQazQAWooAgA2AgAgAEG00AFqIAFBsNABaigCADYCAA8LIABCADcDiOEBC6JIAS5/IwBB4ABrIhIkACAAKAKEASEGIAAoAgQhByAAKAKIASEFIAAoAgwhCCASIAAoAhg2AlwgACgCPCEbIABBQGsoAgAhHCAAQSxqIiYgAyAEQQIQWSADIAcgCGogA0ZqIg0gAyAEaiIMQXhqIi5JBEAgBUH/HyAFQf8fSRsh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AnRBsKcBaigCABBHIAtBOGoQOSALQThqIAAvAQYgAi0AAEECdEGQpAFqKAIAEEcgC0E4ahA5AkAgCgRAIAEtAAAiASABQRggAUEYSRsiAmsiAQRAIAtBOGogACgCACABEEcgC0E4ahA5CyALQThqIAAoAgAgAXYgAhBHDAELIAtBOGogACgCACABLQAAEEcLIAtBOGoQOSAJQQJPBEAgCUF+aiEMA0AgByAMai0AACECIAMgDGotAAAhBCALQThqIAtBGGogBSAMai0AACIAEGwgC0E4aiALQShqIAQQbCALQThqEDkgC0E4aiALQQhqIAIQbCALQThqEDkgC0E4aiAIIAxBA3RqIgEvAQQgAkECdEGwpwFqKAIAIgIQRyACIARBAnRBkKQBaigCACICakEZTwRAIAtBOGoQOQsgC0E4aiABLwEGIAIQRyALQThqEDkCQCAKBEAgACAAQRggAEEYSRsiAmsiAARAIAtBOGogASgCACAAEEcgC0E4ahA5CyALQThqIAEoAgAgAHYgAhBHDAELIAtBOGogASgCACAAEEcLIAtBOGoQOSAMQX9qIgwgCUkNAAsLIAtBOGogCygCKCALKAI0EHQgC0E4aiALKAIYIAsoAiQQdCALQThqIAsoAgggCygCFBB0IAtBOGoQ/QEiAEG6fyAAGyEMCyALQdAAaiQAIAwLLwAgACACQQN0aigCBCIAQRB2QQFqIgJBCHRBfyABdCAAayACQRB0akEIdCABdmsLTwEEfwNAIANBASAAIARBAnRqKAIAIgNBCHQiBSACbiIGIAUgAkkbIAYgAxtBAnRBkJwBaigCACADbGohAyAEQQFqIgQgAU0NAAsgA0EIdgtKAQF/IwBB8ARrIgQkACAEIAMgAiABEKcBIgMgACACIAEQpgEiAhAhRQRAIARB8ABqQYAEIAQgASADEKgBIQILIARB8ARqJAAgAguKAQEIfyMAQRBrIgMkACADIAAQc0F/IQUCQCAALwACIAJJDQAgAygCDCIHQQh0QYACaiEIIAMoAgghCUEAIQADQCAJIAcgABDJAyEGIAEgAEECdGooAgAiCgRAIAYgCE8NAiAGIApsIARqIQQLIABBAWoiACACTQ0ACyAEQQh2IQULIANBEGokACAFC18BAn9BCCABayEFQQAhAQNAIARBASAAIAFBAXRqLwEAIgQg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ASACEEUiARAhDQEgBEEQaiAEQRhqIAMQggEgBEEIaiAEQRhqIAMQggFBACEBAkAgBEEYahAjBEBBACEDDAELA0AgACABaiICIARBEGogBEEYahBiOgAAIAIgBEEIaiAEQRhqEGI6AAEgBEEYahAjBEAgAUECciEDDAILIAIgBEEQaiAEQRhqEGI6AAIgAiAEQQhqIARBGGoQYjoAAyABQQRqIQMgBEEYahAjIQIgAUH3AUsNASADIQEgAkUNAAsLAn8DQEG6fyEBIANB/QFLDQMgACADaiICIARBEGogBEEYahBiOgAAIAIiBkEBaiEFIARBGGoQI0EDRgRAQQIhAyAEQQhqDAILIANB/AFLDQMgBiAEQQhqIARBGGoQYjoAASADQQJqIQMgBEEYahAjQQNHDQALIAAgA2ohBUEDIQMgBEEQagshASAFIAEgBEEYahBiOgAAIAIgA2ogAGshAQwBCyAEQRhqIAEgAhBFIgEQIQ0AIARBEGogBEEYaiADEIIBIARBCGogBEEYaiADEIIBQQAhAQJAIARBGGoQIwRAQQAhAwwBCwNAIAAgAWoiAiAEQRBqIARBGGoQYToAACACIARBCGogBEEYahBhOgABIARBGGoQIwRAIAFBAnIhAwwCCyACIARBEGogBEEYahBhOgACIAIgBEEIaiAEQRhqEGE6AAMgAUEEaiEDIARBGGoQIyECIAFB9wFLDQEgAyEBIAJFDQALCwJ/A0BBun8hASADQf0BSw0CIAAgA2oiAiAEQRBqIARBGGoQYToAACACIgZBAWohBSAEQRhqECNBA0YEQEECIQMgBEEIagwCCyADQfwBSw0CIAYgBEEIaiAEQRhqEGE6AAEgA0ECaiEDIARBGGoQI0EDRw0ACyAAIANqIQVBAyEDIARBEGoLIQEgBSABIARBGGoQYToAACACIANqIABrIQELIARBMGokACABC68DAQp/IwBBgARrIgkkAEFSIQUCQCACQf8BSw0AIABBBGohCkGAgAQgA0F/anRBEHUhC0EBIAN0IghBf2oiDCEHQQEhBQNAAkAgASAEQQF0Ig1qLwEAIgZB//8DRgRAIAogB0ECdGogBDoAAiAHQX9qIQdBASEGDAELIAVBACALIAZBEHRBEHVKGyEFCyAJIA1qIAY7AQAgAiAERyEGIARBAWohBCAGDQALIAAgBTsB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IAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AABBAiECIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQM6AAAgAUHxADYCBAwNCyACKAIkIQMgAigCHCEEIAIoAhAhBSACKAIsIQYgAigCACEHIAEgASgCFCIIQQFqNgIUQQIhAiAIIAEoAghqIAZBAEdBAXQgB0EAR3IgBUEAR0ECdHIgBEEAR0EDdHIgA0EAR0EEdHI6AAAgASgCHCgCBCEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADQQh2OgAAIAEoAhwvAQYhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIAM6AAAgASgCHC0AByEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAKEASIDQQlHBEBBBCABKAKIAUEBSkECdCADQQJIGyECCyABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCDCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAJ/IAEoAhwiBCgCEARAIAQoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcIQQLIAQoAiwLBEAgACAAKAIwIAEoAgggASgCFBA1NgIwCyABQcUANgIEIAFBADYCIAwCCyABKAIwQQx0QYCQfmohBEEAIQICQCABKAKIAUEBSg0AIAEoAoQBIgNBAkgNAEHAACECIANBBkgNAEGAAUHAASADQQZGGyECCyABQfEANgIEIAEgAiAEciICQSByIAIgASgCbBsiAkEfcCACckEfcxB1IAEoAmwEQCABIAAvATIQdSABIAAvATAQdQsgAEEAQQBBABBlNgIwIAEoAgQhAgsgAkHFAEcNASABKAIcIQQLAkAgBCgCEARAIAEoAhQhAiABKAIgIgUgBC8BFE8NASACIQMDQCABKAIMIAJGBEACQCACIANNDQAgBCgCLEUNACAAIAAoAjAgASgCCCADaiACIANrEDU2AjALIAAQNiABKAIcIQQgASgCFCICIAEoAgxGDQMgASgCICEFIAIhAwsgBCgCECAFai0AACEEIAEgAkEBajYCFCABKAIIIAJqIAQ6AAAgASABKAIgQQFqIgU2AiAgBSABKAIcIgQvARRPBEAgAyECDAMFIAEoAhQhAgwBCwALAAsgAUHJADYCBAwCCwJAIAQoAixFDQAgASgCFCIDIAJNDQAgACAAKAIwIAEoAgggAmogAyACaxA1NgIwCyABKAIgIAQoAhRGBEAgAUHJADYCBCABQQA2AiAMAgsgASgCBCECCyACQckARw0BIAEoAhwhBAsgBCgCHEUNAiABKAIUIgIhAwJAA0ACQCABKAIMIAJGBEACQCACIANNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCADaiACIANrEDU2AjALIAAQNiABKAIUIgIgASgCDEYNASACIQMLQQEhBSABKAIcKAIcIQQgASABKAIgIgZBAWo2AiAgBCAGai0AACEEIAEgAkEBajYCFCABKAIIIAJqIAQ6AAAgBARAIAEoAhQhAgwCBSADIQIMAwsACwtBACEFCwJAIAEoAhwiBCgCLEUNACABKAIUIgMgAk0NACAAIAAoAjAgASgCCCACaiADIAJrEDU2AjALIAUNASABKAIEIQILIAJB2wBHDQMgASgCHCEEDAILIAFBADYCIAsgAUHbADYCBAsgBCgCJEUNASABKAIUIgIhAwJAA0ACQCABKAIMIAJGBEACQCACIANNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCADaiACIANrEDU2AjALIAAQNiABKAIUIgIgASgCDEYNASACIQMLQQEhBSABKAIcKAIkIQQgASABKAIgIgZBAWo2AiAgBCAGai0AACEEIAEgAkEBajYCFCABKAIIIAJqIAQ6AAAgBARAIAEoAhQhAgwCBSADIQIMAwsACwtBACEFCwJAIAEoAhwiBCgCLEUNACABKAIUIgMgAk0NACAAIAAoAjAgASgCCCACaiADIAJrEDU2AjALIAUNASABKAIEIQILIAJB5wBHDQIgASgCHCEEDAELIAFB5wA2AgQLIAQoAiwEQCABKAIUIgVBAmoiAiABKAIMIgRLBH8gABA2IAEoAgwhBCABKAIUIgVBAmoFIAILIARLDQEgACgCMCECIAEgBUEBajYCFCABKAIIIAVqIAI6AAAgACgCMCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACAAQQBBAEEAEDU2AjAgAUHxADYCBAwBCyABQfEANgIECwJAIAEoAhQEQCAAEDYgACgCEARAIAAoAgQhAgwCCwwECyAAKAIEIgINAEEAIQILAkACQAJAIAEoAgQiA0GaBUYEQCACRQ0BDAULIAINAQsgA0GaBUcNACABKAJ0RQ0BCwJ/AkACQAJAIAEoAogBQX5qDgIAAQILIAEQnQQMAgsgARCcBAwBCyABQQQgASgChAFBDGxBuNcAaigCABEDAAsiAkF+cUECRgRAIAFBmgU2AgQLIAJBfXFFBEBBACECIAAoAhANAgwECyACQQFHDQAgAUEAQQBBABCOAiAAEDYgACgCEA0ADAMLQQEhAiABKAIYIgNBAUgNACAAKAIwIQICQCADQQJGBEAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAC8BMiECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACAALQAzIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAAoAgghAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgACgCCCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACAALwEKIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAAtAAshAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAMAQsgASACQRB2EHUgASAALwEwEHULIAAQNiABKAIYIgBBAU4EQCABQQAgAGs2AhgLIAEoAhRFIQILIAIPCyAAQceEATYCGEF7DwsgAUF/NgIoQQAL3QEBBn8CQCAAKAKAgBAiBSAAKAKEgBAiAyAAKAKMgBAiBGpBBGpJDQAgACgClIAQIgIgBSADa0F9aiIGTw0AA0AgACACQf//A3FBAXRqQYCACGogAiAAIAIgA2oQOkECdGoiBCgCAGsiB0H//wMgB0H//wNJGzsBACAEIAI2AgAgAkEBaiICIAZJDQALIAAoAoyAECEECyAAIAQ2ApCAECAAIAM2AoiAECAAQQA2ApyAECAAIAE2AoCAECAAIAUgA2siAjYCjIAQIAAgAjYClIAQIAAgASACazYChIAQC9kDAQR/IwBBEGsiAyQAIAFBADYCACAAKAIAIgIgA0EMaiACKAIAKAIMEQMAIQICQCADKAIMRQ0AIAIsAAAhAiAAKAIAIgRBASAEKAIAKAIQEQQAIAEgASgCACACQf8AcXI2AgACQCACQX9KDQAgACgCACICIANBDGogAigCACgCDBEDACECIAMoAgxFDQEgAiwAACECIAAoAgAiBEEBIAQoAgAoAhARBAAgASABKAIAIAJB/wBxQQd0cjYCACACQX9KDQAgACgCACICIANBDGogAigCACgCDBEDACECIAMoAgxFDQEgAiwAACECIAAoAgAiBEEBIAQoAgAoAhARBAAgASABKAIAIAJB/wBxQQ50cjYCACACQX9KDQAgACgCACICIANBDGogAigCACgCDBEDACECIAMoAgxFDQEgAiwAACECIAAoAgAiBEEBIAQoAgAoAhARBAAgASABKAIAIAJB/wBxQRV0cjYCACACQX9KDQAgACgCACICIANBDGogAigCACgCDBEDACECIAMoAgxFDQEgAiwAACEFIAAoAgAiAEEBIAAoAgAoAhARBAAgASABKAIAIAVBHHRyNgIAIAVBf0oNAEEAIQUMAQtBASEFCyADQRBqJAAgBQvhSQE3fwJAIAAoAoCAECIJIAAoAoSAECILayAAKAKQgBBrIghBgIAETwRAIABBADYCnIAQDAELAkAgCA0AIAMoAgBBgSBIDQAgACAAKAKcgBBBoIAQECoiACABEKwEIAAgBTsBmIAQDAELAkAgBEEATEEAIAZBAkYbDQAgAygCACIIQYCAgPAHSw0AIAAgCCAJajYCgIAQQQkgBSAFQQFIGyIFQQwgBUEMSBsiG0EMbCIJQZQWaigCACEuAkACfyAbQQlNBEAgA0EANgIAIAIgBGoiOkF7aiA6IAZBAkYiOxshKSABIAhqITMgASEoIAIhCQJAIAhBDUgNACAzQXRqIjIgAUkNAEGANCAbdkEBcSE0IDNBe2oiGEF/aiEvIBhBfWohIkEAIRsDQCAAKAKUgBAhBCAAKAKIgBAhEyAAKAKcgBAhFCAoIQwDQCAAKAKQgBAiBSAMIAtrIh9BgYB8aiAFQYCABGogH0sbIRUgACgC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BEADQCADKAAAIAQoAABzIgkEQCAJECUgBGogAGsMBAsgA0EEaiEDIARBBGoiBCAUSQ0ACwsCQCAEIBhPDQAgAy8AACAELwAARw0AIANBAmohAyAEQQJqIQQLIAQgF0kEfyAEQQFqIAQgAy0AACAELQAARhsFIAQLIABrDAELIAMQJQsiAEHwAWpB/wFuakEIaiAPSw0EIAdBAmohAyAAIAZqQQRqIQYgBS0AACEEAn8gAEEPTwRAIAUgBEEPajoAACADQX8QNCAAQXFqIgRB/AdPBEADQCADQQRqIgNBfxA0IARBhHhqIgRB+wdLDQALCyADIARB//8DcUH/AW4iAGoiAyAAQYF+bCAEajoAACADQQFqDAELIAUgACAEajoAACADCyEFIAYgEU8NASAGQX5qIgAgACgAACALEDAgCCALIAwQSSAGKAAAIQACQAJAIBZFBEAgAEEBEDAiACAIEIUBIQQgBiAAIAhBASAMEEkgBEH//wNqIAZJDQEgBCgAACAGKAAARw0BDAILIAAgCxAwIgMgCCALEEghACAGIAxrIgQgAyAIIAsQXCAAQf//A2ogBEkNACAAIAxqIgQoAAAgBigAAEYNAQsgBkEBaiIDKAAAIAsQMCEEDAMLIAVBADoAACAFQQFqIQcMAAsACwtBACETIAUgECAGayIBaiABQfABakH/AW5qQQFqIA9LDQECQCABQQ9PBEAgBUHwAToAACAFQQFqIQAgAUFxaiIDQf8BSQRAIAAiBSADOgAADAILIABB/wEgAUHyfWoiAEH/AW5BAWoQKBogAEH/AW4iAyAFakECaiIFIANBgX5sIABqOgAADAELIAUgAUEEdDoAAAsgBUEBaiAGIAEQKiABaiACayETDAELIANBgICA8AdLDQAgASADaiIPQXVqIRAgD0F0aiEUIAgoAoCAASEAIAhBAUECIAFB//8DSxsiCzsBhoABIAggACADajYCgIABIAggCCgCkIABIANqNgKQgAEgASABKAAAIAsQMCAIIAsgASAAayIMEEkgD0F7aiITQX9qIRcgE0F9aiERIAZBBnQiCkEBciENIAFBAWoiAygAACALEDAhBCABQYCABEkhFSACIQUgASEGA0ACQCAVRQRAIAMgFEsNBCADQQFqIQ4gCiEJIA0hBwNAIAQgCBCFASEAIA4oAABBARAwIRIgAyAE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IAJBCE8EQANAIAMEQCADIAVsIQcgBUEHciIIIANsIQkgBUEGciIKIANsIQsgBUEFciIMIANsIQ0gBUEEciIOIANsIQ8gBUEDciIQIANsIREgBUECciISIANsIRMgBUEBciIUIANsIRVBACEEA0AgASAFIAIgBGwiBmpqIAAgBCAHamotAAA6AAAgASAGIBRqaiAAIAQgFWpqLQAAOgAAIAEgBiASamogACAEIBNqai0AADoAACABIAYgEGpqIAAgBCARamotAAA6AAAgASAGIA5qaiAAIAQgD2pqLQAAOgAAIAEgBiAMamogACAEIA1qai0AADoAACABIAYgCmpqIAAgBCALamotAAA6AAAgASAGIAhqaiAAIAQgCWpqLQAAOgAAIARBAWoiBCADRw0ACwsgBUEPaiEEIAVBCGohBSAEIAJJDQALCyACQXhxIgUgAk8NAANAIAMEQCADIAVsIQZBACEEA0AgASACIARsIAVqaiAAIAQgBmpqLQAAOgAAIARBAWoiBCADRw0ACwsgBUEBaiIFIAJHDQALCyACIANsrQuCAQEGfyABIAEgAG4iBiAAbGshByAAIAFNBEAgBkEBIAZBAUsbIQgDQCAABEAgACAEbCEJQQAhBQNAIAMgBSAJamogAiAFIAZsIARqai0AADoAACAFQQFqIgUgAEcNAAsLIARBAWoiBCAIRw0ACwsgAyABIAdrIgBqIAAgAmogBxAqGgsNACAAIAEgAiADEL0EC4IBAQZ/IAEgASAAbiIGIABsayEHIAAEQCAGQQEgBkEBSxshCANAIAAgAU0EQCAEIAZsIQlBACEFA0AgAyAFIAlqaiACIAAgBWwgBGpqLQAAOgAAIAVBAWoiBSAIRw0ACwsgBEEBaiIEIABHDQALCyADIAEgB2siAGogACACaiAHECoaC7gBAQN/AkAgAUEBSA0AIAAsAAAiBEH/AHEhAwJAIARBf0oNACABQQJIDQEgACwAASIEQQd0QYD/AHEgA3IhAyAEQX9KDQAgAUEDSA0BIAAsAAIiBEEOdEGAgP8AcSADciEDIARBf0oNACABQQRIDQEgACwAAyIEQRV0QYCAgP8AcSADciEDIARBf0oNACABQQVIDQEgAC0ABCIAQQ9LDQEgAEEcdCADciEDCyACIAM2AgBBASEFCyAFCw0AIAAgASACIAMQvwQLlAIBA38gACABEDcaIAJBA3YiBEH4////AXEhAyABIAJBB3EiBWohAiAAIAVqIQACQAJAAkACQAJAAkACQAJAIARBB3FBf2oOBwYFBAMCAQAHCyAAIAIQNyEAIAJBCGohAgsgACACEDchACACQQhqIQILIAAgAhA3IQAgAkEIaiECCyAAIAIQNyEAIAJBCGohAgsgACACEDchACACQQhqIQILIAAgAhA3IQAgAkEIaiECCyAAIAIQNyEAIAJBCGohAgsgAwRAA0AgACACEDcgAkEIahA3IAJBEGoQNyACQRhqEDcgAkEgahA3IAJBKGoQNyACQTBqEDcgAkE4ahA3IQAgAkFAayECIANBeGoiAw0ACwsgAAstACACBEADQCAAIAEtAAA6AAAgAEEBaiEAIAFBAWohASACQX9qIgINAAsLIAALvQUBA38gACABayIDQQlPBEAgACABIAIQUA8LAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIANBfmpBH3cOEAABDAIMDAwDBAUGBwgJCgsMCyACQQFNDQwDQCAAIAEQeCEAIAJBfmoiAkEBSw0ACwwMCyACQQNNDQsDQCAAIAEQdyEAIAJBfGoiAkEDSw0ACwwLCyACQQdNDQoDQCAAIAEQNyEAIAJBeGoiAkEHSw0ACwwKCyACQQ9NDQkDQCAAIAEQViEAIAJBcGoiAkEPSw0ACwwJCyACQRJJDQggAUEQaiEDA0AgACABEFYgAxB4IQAgAkFuaiICQRFLDQALDAgLIAJBFEkNByABQRBqIQMDQCAAIAEQViADEHchACACQWxqIgJBE0sNAAsMBwsgAkEWSQ0GIAFBFGohAyABQRBqIQQDQCAAIAEQViAEEHcgAxB4IQAgAkFqaiICQRVLDQALDAYLIAJBGEkNBSABQRBqIQMDQCAAIAEQViADEDchACACQWhqIgJBF0sNAAsMBQsgAkEaSQ0EIAFBGGohAyABQRBqIQQDQCAAIAEQViAEEDcgAxB4IQAgAkFmaiICQRlLDQALDAQLIAJBHEkNAyABQRhqIQMgAUEQaiEEA0AgACABEFYgBBA3IAMQdyEAIAJBZGoiAkEbSw0ACwwDCyACQR5JDQIgAUEcaiEDIAFBGGohBCABQRBqIQUDQCAAIAEQViAFEDcgBBB3IAMQeCEAIAJBYmoiAkEdSw0ACwwCCyACQR9NDQEDQCAAIAEQlAIhACACQWBqIgJBH0sNAAsMAQsgAkUNAQNAIAAgAS0AADoAACAAQQFqIQAgAUEBaiEBIAJBf2oiAg0ACwwBCyACRQ0AA0AgACABLQAAOgAAIABBAWohACABQQFqIQEgAkF/aiICDQALCyAAC7EBAgJ/An4gAEF/ai0AACEDAkACQCABQXhqIgQgAE0NACADrUL/AYNCgYKEiJCgwIABfiEFA0AgAikAACIGIAVRBEAgAkEIaiECIABBCGoiACAESQ0BDAILCyAGp0H/AXEgA0cNAQNAIABBAWohACACLQABIQEgAkEBaiECIAEgA0YNAAsMAQsgACABTw0AA0AgAi0AACADRw0BIAJBAWohAiAAQQFqIgAgAUkNAAsLIAALJgEBf0ECIQQgAygCACABEJUCTwR/IAAgASACIAMQlQRBAAUgBAsLC8zcATgAQYAIC4MGTjZzbmFwcHk0U2lua0UAABh0AAAABAAATjZzbmFwcHk2U291cmNlRQAAAAAYdAAAGAQAAAAAAABsBAAAAQAAAAIAAAADAAAABAAAAAUAAABONnNuYXBweTE1Qnl0ZUFycmF5U291cmNlRQAAjHIAAFAEAAAsBAAAAAAAALQEAAAGAAAABwAAAAgAAAAJAAAATjZzbmFwcHkyMlVuY2hlY2tlZEJ5dGVBcnJheVNpbmtFAAAAjHIAAJAEAAAQBAAAAQAECAEQASACAAUIAhACIAMABggDEAMgBAAHCAQQBCAFAAgIBRAFIAYACQgGEAYgBwAKCAcQByAIAAsICBAIIAkABAkJEAkgCgAFCQoQCiALAAYJCxALIAwABwkMEAwgDQAICQ0QDSAOAAkJDhAOIA8ACgkPEA8gEAALCRAQECARAAQKERARIBIABQoSEBIgEwAGChMQEyAUAAcKFBAUIBUACAoVEBUgFgAJChYQFiAXAAoKFxAXIBgACwoYEBggGQAECxkQGSAaAAULGhAaIBsABgsbEBsgHAAHCxwQHCAdAAgLHRAdIB4ACQseEB4gHwAKCx8QHyAgAAsLIBAgICEABAwhECEgIgAFDCIQIiAjAAYMIxAjICQABwwkECQgJQAIDCUQJSAmAAkMJhAmICcACgwnECcgKAALDCgQKCApAAQNKRApICoABQ0qECogKwAGDSsQKyAsAAcNLBAsIC0ACA0tEC0gLgAJDS4QLiAvAAoNLxAvIDAACw0wEDAgMQAEDjEQMSAyAAUOMhAyIDMABg4zEDMgNAAHDjQQNCA1AAgONRA1IDYACQ42EDYgNwAKDjcQNyA4AAsOOBA4IDkABA85EDkgOgAFDzoQOiA7AAYPOxA7IDwABw88EDwgAQgIDz0QPSABEAkPPhA+IAEYCg8/ED8gASALD0AQQCAAAAAA/wAAAP//AAD///8A/////2RlY29tcHJlc3MAY29tcHJlc3MAZnJlZV9yZXN1bHQAdmkAAHhzAABpaWlpaWlpAEGQDgvUBigHAAAwBwAAMAcAAMxzAADMcwAAzHMAABh0AAC2BwAAQHQAAEgHAAAAAAAAAQAAAIgHAAAAAAAATlN0M19fMjEyYmFzaWNfc3RyaW5nSWNOU18xMWNoYXJfdHJhaXRzSWNFRU5TXzlhbGxvY2F0b3JJY0VFRUUAABh0AACQBwAATlN0M19fMjIxX19iYXNpY19zdHJpbmdfY29tbW9uSUxiMUVFRQBOMTBlbXNjcmlwdGVuM3ZhbEUAAAAAGHQAANQHAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0loRUUAaWlpAAAoBwAAMAcAABgIAAAgCAAAJAgAACoIAAAxCAAANggAAGJsb3NjbHoAbHo0AGx6NGhjAHNuYXBweQB6bGliAHpzdGQARXJyb3IuICBudGhyZWFkcyBjYW5ub3QgYmUgbGFyZ2VyIHRoYW4gQkxPU0NfTUFYX1RIUkVBRFMgKCVkKQBFcnJvci4gIG50aHJlYWRzIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyAEVSUk9SOyByZXR1cm4gY29kZSBmcm9tIHB0aHJlYWRfY3JlYXRlKCkgaXMgJWQKAAlFcnJvciBkZXRhaWw6ICVzCgBCbG9zYyBoYXMgbm90IGJlZW4gY29tcGlsZWQgd2l0aCAnJXMnIABjb21wcmVzc2lvbiBzdXBwb3J0LiAgUGxlYXNlIHVzZSBvbmUgaGF2aW5nIGl0LgBFcnJvciBhbGxvY2F0aW5nIG1lbW9yeSEARVJST1I7IHJldHVybiBjb2RlIGZyb20gcHRocmVhZF9qb2luKCkgaXMgJWQKAElucHV0IGJ1ZmZlciBzaXplIGNhbm5vdCBleGNlZWQgJWQgYnl0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AAAIAAAACQAAAAkAAAAKAAAACgAAAAsAAAALAAAADAAAAAwAAAANAAAADQBBgNsAC/8IDAAIAIwACABMAAgAzAAIACwACACsAAgAbAAIAOwACAAcAAgAnAAIAFwACADcAAgAPAAIALwACAB8AAgA/AAIAAIACACCAAgAQgAIAMIACAAiAAgAogAIAGIACADiAAgAEgAIAJIACABSAAgA0gAIADIACACyAAgAcgAIAPIACAAKAAgAigAIAEoACADKAAgAKgAIAKoACABqAAgA6gAIABoACACaAAgAWgAIANoACAA6AAgAugAIAHoACAD6AAgABgAIAIYACABGAAgAxgAIACYACACmAAgAZgAIAOYACAAWAAgAlgAIAFYACADWAAgANgAIALYACAB2AAgA9gAIAA4ACACOAAgATgAIAM4ACAAuAAgArgAIAG4ACADuAAgAHgAIAJ4ACABeAAgA3gAIAD4ACAC+AAgAfgAIAP4ACAABAAgAgQAIAEEACADBAAgAIQAIAKEACABhAAgA4QAIABEACACRAAgAUQAIANEACAAxAAgAsQAIAHEACADxAAgACQAIAIkACABJAAgAyQAIACkACACpAAgAaQAIAOkACAAZAAgAmQAIAFkACADZAAgAOQAIALkACAB5AAgA+QAIAAUACACFAAgARQAIAMUACAAlAAgApQAIAGUACADlAAgAFQAIAJUACABVAAgA1QAIADUACAC1AAgAdQAIAPUACAANAAgAjQAIAE0ACADNAAgALQAIAK0ACABtAAgA7QAIAB0ACACdAAgAXQAIAN0ACAA9AAgAvQAIAH0ACAD9AAgAEwAJABMBCQCTAAkAkwEJAFMACQBTAQkA0wAJANMBCQAzAAkAMwEJALMACQCzAQkAcwAJAHMBCQDzAAkA8wEJAAsACQALAQkAiwAJAIsBCQBLAAkASwEJAMsACQDLAQkAKwAJACsBCQCrAAkAqwEJAGsACQBrAQkA6wAJAOsBCQAbAAkAGwEJAJsACQCbAQkAWwAJAFsBCQDbAAkA2wEJADsACQA7AQkAuwAJALsBCQB7AAkAewEJAPsACQD7AQkABwAJAAcBCQCHAAkAhwEJAEcACQBHAQkAxwAJAMcBCQAnAAkAJwEJAKcACQCnAQkAZwAJAGcBCQDnAAkA5wEJABcACQAXAQkAlwAJAJcBCQBX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AAAJ/ABgBwAAAAhRAAAIEQAVCIMAEgcfAAAIcQAACDEAAAnCABAHCgAACGEAAAghAAAJogAACAEAAAiBAAAIQQAACeIAEAcGAAAIWQAACBkAAAmSABMHOwAACHkAAAg5AAAJ0gARBxEAAAhpAAAIKQAACbIAAAgJAAAIiQAACEkAAAnyABAHBAAACFUAAAgVABAIAgETBysAAAh1AAAINQAACcoAEQcNAAAIZQAACCUAAAmqAAAIBQAACIUAAAhFAAAJ6gAQBwgAAAhdAAAIHQAACZoAFAdTAAAIfQAACD0AAAnaABIHFwAACG0AAAgtAAAJugAACA0AAAiNAAAITQAACfoAEAcDAAAIUwAACBMAFQjDABMHIwAACHMAAAgzAAAJxgARBwsAAAhjAAAIIwAACaYAAAgDAAAIgwAACEMAAAnmABAHBwAACFsAAAgbAAAJlgAUB0MAAAh7AAAIOwAACdYAEgcTAAAIawAACCsAAAm2AAAICwAACIsAAAhLAAAJ9gAQBwUAAAhXAAAIFwBACAAAEwczAAAIdwAACDcAAAnOABEHDwAACGcAAAgnAAAJrgAACAcAAAiHAAAIRwAACe4AEAcJAAAIXwAACB8AAAmeABQHYwAACH8AAAg/AAAJ3gASBxsAAAhvAAAILwAACb4AAAgPAAAIjwAACE8AAAn+AGAHAAAACFAAAAgQABQIcwASBx8AAAhwAAAIMAAACcEAEAcKAAAIYAAACCAAAAmhAAAIAAAACIAAAAhAAAAJ4QAQBwYAAAhYAAAIGAAACZEAEwc7AAAIeAAACDgAAAnRABEHEQAACGgAAAgoAAAJsQAACAgAAAiIAAAISAAACfEAEAcEAAAIVAAACBQAFQjjABMHKwAACHQAAAg0AAAJyQARBw0AAAhkAAAIJAAACakAAAgEAAAIhAAACEQAAAnpABAHCAAACFwAAAgcAAAJmQAUB1MAAAh8AAAIPAAACdkAEgcXAAAIbAAACCwAAAm5AAAIDAAACIwAAAhMAAAJ+QAQBwMAAAhSAAAIEgAVCKMAEwcjAAAIcgAACDIAAAnFABEHCwAACGIAAAgiAAAJpQAACAIAAAiCAAAIQgAACeUAEAcHAAAIWgAACBoAAAmVABQHQwAACHoAAAg6AAAJ1QASBxMAAAhqAAAIKgAACbUAAAgKAAAIigAACEoAAAn1ABAHBQAACFYAAAgWAEAIAAATBzMAAAh2AAAINgAACc0AEQcPAAAIZgAACCYAAAmtAAAIBgAACIYAAAhGAAAJ7QAQBwkAAAheAAAIHgAACZ0AFAdjAAAIfgAACD4AAAndABIHGwAACG4AAAguAAAJvQAACA4AAAiOAAAITgAACf0AYAcAAAAIUQAACBEAFQiDABIHHwAACHEAAAgxAAAJwwAQBwoAAAhhAAAIIQAACaMAAAgBAAAIgQAACEEAAAnjABAHBgAACFkAAAgZAAAJkwATBzsAAAh5AAAIOQAACdMAEQcRAAAIaQAACCkAAAmzAAAICQAACIkAAAhJAAAJ8wAQBwQAAAhVAAAIFQAQCAIBEwcrAAAIdQAACDUAAAnLABEHDQAACGUAAAglAAAJqwAACAUAAAiFAAAIRQAACesAEAcIAAAIXQAACB0AAAmbABQHUwAACH0AAAg9AAAJ2wASBxcAAAhtAAAILQAACbsAAAgNAAAIjQAACE0AAAn7ABAHAwAACFMAAAgTABUIwwATByMAAAhzAAAIMwAACccAEQcLAAAIYwAACCMAAAmnAAAIAwAACIMAAAhDAAAJ5wAQBwcAAAhbAAAIGwAACZcAFAdDAAAIewAACDsAAAnXABIHEwAACGsAAAgrAAAJtwAACAsAAAiLAAAISwAACfcAEAcFAAAIVwAACBcAQAgAABMHMwAACHcAAAg3AAAJzwARBw8AAAhnAAAIJwAACa8AAAgHAAAIhwAACEcAAAnvABAHCQAACF8AAAgfAAAJnwAUB2MAAAh/AAAIPwAACd8AEgcbAAAIbwAACC8AAAm/AAAIDwAACI8AAAhPAAAJ/wAQBQEAFwUBARMFEQAbBQEQEQUFABkFAQQVBUEAHQUBQBAFAwAYBQECFAUhABwFASASBQkAGgUBCBYFgQBABQAAEAUCABcFgQETBRkAGwUBGBEFBwAZBQEGFQVhAB0FAWAQBQQAGAUBAxQFMQAcBQEwEgUNABoFAQwWBcEAQAUAADEuMi44AHN0cmVhbSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBB5IQBC6EVazgHAA2yBwCc8gcAcGQIAGCuCgCwcQsAMKoMABMAAAAMAAAADQAAAAEAAAAGAAAAAQAAAAEAAAATAAAADQAAAA4AAAABAAAABwAAAAAAAAABAAAAFAAAAA8AAAAQAAAAAQAAAAYAAAAAAAAAAQAAABUAAAAQAAAAEQAAAAEAAAAFAAAAAAAAAAIAAAAVAAAAEgAAABIAAAABAAAABQAAAAAAAAACAAAAFQAAABIAAAATAAAAAgAAAAUAAAACAAAAAwAAABUAAAATAAAAEwAAAAMAAAAFAAAABAAAAAMAAAAVAAAAEwAAABMAAAADAAAABQAAAAgAAAAEAAAAFQAAABMAAAATAAAAAwAAAAUAAAAQAAAABQAAABUAAAATAAAAFAAAAAQAAAAFAAAAEAAAAAUAAAAWAAAAFAAAABUAAAAEAAAABQAAABAAAAAFAAAAFgAAABUAAAAWAAAABAAAAAUAAAAQAAAABQAAABYAAAAVAAAAFgAAAAUAAAAFAAAAEAAAAAUAAAAWAAAAFQAAABYAAAAFAAAABQAAACAAAAAGAAAAFgAAABYAAAAXAAAABQAAAAUAAAAgAAAABgAAABYAAAAXAAAAFwAAAAYAAAAFAAAAIAAAAAYAAAAWAAAAFgAAABYAAAAFAAAABQAAADAAAAAHAAAAFwAAABcAAAAWAAAABQAAAAQAAABAAAAABwAAABcAAAAXAAAAFgAAAAYAAAADAAAAQAAAAAgAAAAXAAAAGAAAABYAAAAHAAAAAwAAAAABAAAJAAAAGQAAABkAAAAXAAAABwAAAAMAAAAAAQAACQAAABoAAAAaAAAAGAAAAAcAAAADAAAAAAIAAAkAAAAbAAAAGwAAABkAAAAJAAAAAwAAAOcDAAAJAAAAEgAAAAwAAAANAAAAAQAAAAUAAAABAAAAAQAAABIAAAANAAAADgAAAAEAAAAGAAAAAAAAAAEAAAASAAAADgAAAA4AAAABAAAABQAAAAAAAAACAAAAEgAAABAAAAAQAAAAAQAAAAQAAAAAAAAAAgAAABIAAAAQAAAAEQAAAAIAAAAFAAAAAgAAAAMAAAASAAAAEgAAABIAAAADAAAABQAAAAIAAAADAAAAEgAAABIAAAATAAAAAwAAAAUAAAAEAAAABAAAABIAAAASAAAAEwAAAAQAAAAEAAAABAAAAAQAAAASAAAAEgAAABMAAAAEAAAABAAAAAgAAAAFAAAAEgAAABIAAAATAAAABQAAAAQAAAAIAAAABQAAABIAAAASAAAAEwAAAAYAAAAEAAAACAAAAAUAAAASAAAAEgAAABMAAAAFAAAABAAAAAwAAAAGAAAAEgAAABMAAAATAAAABwAAAAQAAAAMAAAABgAAABIAAAASAAAAEwAAAAQAAAAEAAAAEAAAAAcAAAASAAAAEgAAABMAAAAEAAAAAwAAACAAAAAHAAAAEgAAABIAAAATAAAABgAAAAMAAACAAAAABwAAABIAAAATAAAAEwAAAAYAAAADAAAAgAAAAAgAAAASAAAAEwAAABMAAAAIAAAAAwAAAAABAAAIAAAAEgAAABMAAAATAAAABgAAAAMAAACAAAAACQAAABIAAAATAAAAEwAAAAgAAAADAAAAAAEAAAkAAAASAAAAEwAAABMAAAAKAAAAAwAAAAACAAAJAAAAEgAAABMAAAATAAAADAAAAAMAAAAAAgAACQAAABIAAAATAAAAEwAAAA0AAAADAAAA5wMAAAkAAAARAAAADAAAAAwAAAABAAAABQAAAAEAAAABAAAAEQAAAAwAAAANAAAAAQAAAAYAAAAAAAAAAQAAABEAAAANAAAADwAAAAEAAAAFAAAAAAAAAAEAAAARAAAADwAAABAAAAACAAAABQAAAAAAAAACAAAAEQAAABEAAAARAAAAAgAAAAQAAAAAAAAAAgAAABEAAAAQAAAAEQAAAAMAAAAEAAAAAgAAAAMAAAARAAAAEQAAABEAAAADAAAABAAAAAQAAAAEAAAAEQAAABEAAAARAAAAAwAAAAQAAAAIAAAABQAAABEAAAARAAAAEQAAAAQAAAAEAAAACAAAAAUAAAARAAAAEQAAABEAAAAFAAAABAAAAAgAAAAFAAAAEQAAABEAAAARAAAABgAAAAQAAAAIAAAABQAAABEAAAARAAAAEQAAAAUAAAAEAAAACAAAAAYAAAARAAAAEgAAABEAAAAHAAAABAAAAAwAAAAGAAAAEQAAABIAAAARAAAAAwAAAAQAAAAMAAAABwAAABEAAAASAAAAEQAAAAQAAAADAAAAIAAAAAcAAAARAAAAEgAAABEAAAAGAAAAAwAAAAABAAAHAAAAEQAAABIAAAARAAAABgAAAAMAAACAAAAACAAAABEAAAASAAAAEQAAAAgAAAADAAAAAAEAAAgAAAARAAAAEgAAABEAAAAKAAAAAwAAAAACAAAIAAAAEQAAABIAAAARAAAABQAAAAMAAAAAAQAACQAAABEAAAASAAAAEQAAAAcAAAADAAAAAAIAAAkAAAARAAAAEgAAABEAAAAJAAAAAwAAAAACAAAJAAAAEQAAABIAAAARAAAACwAAAAMAAADnAwAACQAAAA4AAAAMAAAADQAAAAEAAAAFAAAAAQAAAAEAAAAOAAAADgAAAA8AAAABAAAABQAAAAAAAAABAAAADgAAAA4AAAAPAAAAAQAAAAQAAAAAAAAAAQAAAA4AAAAOAAAADwAAAAIAAAAEAAAAAAAAAAIAAAAOAAAADgAAAA4AAAAEAAAABAAAAAIAAAADAAAADgAAAA4AAAAOAAAAAwAAAAQAAAAEAAAABAAAAA4AAAAOAAAADgAAAAQAAAAEAAAACAAAAAUAAAAOAAAADgAAAA4AAAAGAAAABAAAAAgAAAAFAAAADgAAAA4AAAAOAAAACAAAAAQAAAAIAAAABQAAAA4AAAAPAAAADgAAAAUAAAAEAAAACAAAAAYAAAAOAAAADwAAAA4AAAAJAAAABAAAAAgAAAAGAAAADgAAAA8AAAAOAAAAAwAAAAQAAAAMAAAABwAAAA4AAAAPAAAADgAAAAQAAAADAAAAGAAAAAcAAAAOAAAADwAAAA4AAAAFAAAAAwAAACAAAAAIAAAADgAAAA8AAAAPAAAABgAAAAMAAABAAAAACAAAAA4AAAAPAAAADwAAAAcAAAADAAAAAAEAAAgAAAAOAAAADwAAAA8AAAAFAAAAAwAAADAAAAAJAAAADgAAAA8AAAAPAAAABgAAAAMAAACAAAAACQAAAA4AAAAPAAAADwAAAAcAAAADAAAAAAEAAAkAAAAOAAAADwAAAA8AAAAIAAAAAwAAAAABAAAJAAAADgAAAA8AAAAPAAAACAAAAAMAAAAAAgAACQAAAA4AAAAPAAAADwAAAAkAAAADAAAAAAIAAAkAAAAOAAAADwAAAA8AAAAKAAAAAwAAAOcDAAAJAAAAIAAAACAAAAAhAAAAIgAAACMAAAAkAAAAJQAAACYAAAAnAAAAKAAAACkAAAApAAAAKgAAACsAAAAsAAAALQAAAC4AAAAvAAAAMAAAADAAAAAxAAAAMQAAADIAAAAzAAAANAAAADUAAAA2AAAANwAAADgAAAA4AEGQmgEL+gEEAAMAAgACAAIAAgACAAIAAgACAAIAAgACAAEAAQABAAIAAgACAAIAAgACAAIAAgACAAMAAgABAAEAAQABAAEA//////////8AAAAAAAAAAAEAAQABAAEAAQABAAIAAgACAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAP////////////8AAAAAAAABAAQAAwACAAIAAgACAAIAAgABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAP//////////////////AEGVnAEL+AcIAAAABwAAagYAAAAGAACtBQAAagUAADEFAAAABQAA1AQAAK0EAACKBAAAagQAAEwEAAAxBAAAFwQAAAAEAADpAwAA1AMAAMADAACtAwAAmwMAAIoDAAB5AwAAagMAAFsDAABMAwAAPgMAADEDAAAkAwAAFwMAAAsDAAAAAwAA9AIAAOkCAADeAgAA1AIAAMoCAADAAgAAtgIAAK0CAACkAgAAmwIAAJICAACKAgAAggIAAHkCAAByAgAAagIAAGICAABbAgAAUwIAAEwCAABFAgAAPgIAADcCAAAxAgAAKgIAACQCAAAeAgAAFwIAABECAAALAgAABQIAAAACAAD6AQAA9AEAAO8BAADpAQAA5AEAAN4BAADZAQAA1AEAAM8BAADKAQAAxQEAAMABAAC7AQAAtgEAALIBAACtAQAAqAEAAKQBAACfAQAAmwEAAJcBAACSAQAAjgEAAIoBAACGAQAAggEAAH4BAAB5AQAAdQEAAHIBAABuAQAAagEAAGYBAABiAQAAXgEAAFsBAABXAQAAUwEAAFABAABMAQAASQEAAEUBAABCAQAAPgEAADsBAAA3AQAANAEAADEBAAAuAQAAKgEAACcBAAAkAQAAIQEAAB4BAAAaAQAAFwEAABQBAAARAQAADgEAAAsBAAAIAQAABQEAAAIBAAAAAQAA/QAAAPoAAAD3AAAA9AAAAPEAAADvAAAA7AAAAOkAAADmAAAA5AAAAOEAAADeAAAA3AAAANkAAADXAAAA1AAAANEAAADPAAAAzAAAAMoAAADHAAAAxQAAAMIAAADAAAAAvgAAALsAAAC5AAAAtgAAALQAAACyAAAArwAAAK0AAACrAAAAqAAAAKYAAACkAAAAogAAAJ8AAACdAAAAmwAAAJkAAACXAAAAlQAAAJIAAACQAAAAjgAAAIwAAACKAAAAiAAAAIYAAACEAAAAggAAAIAAAAB+AAAAewAAAHkAAAB3AAAAdQAAAHMAAAByAAAAcAAAAG4AAABsAAAAagAAAGgAAABmAAAAZAAAAGIAAABgAAAAXgAAAF0AAABbAAAAWQAAAFcAAABVAAAAUwAAAFIAAABQAAAATgAAAEwAAABKAAAASQAAAEcAAABFAAAAQwAAAEIAAABAAAAAPgAAAD0AAAA7AAAAOQAAADcAAAA2AAAANAAAADIAAAAxAAAALwAAAC4AAAAsAAAAKgAAACkAAAAnAAAAJQAAACQAAAAiAAAAIQAAAB8AAAAeAAAAHAAAABoAAAAZAAAAFwAAABYAAAAUAAAAEwAAABEAAAAQAAAADgAAAA0AAAALAAAACgAAAAgAAAAHAAAABQAAAAQAAAACAAAAAQBBkKUBC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQfGlAQu/AQECAwQFBgcICQoLDA0ODxAQERESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGAABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZGhscHR4fICAhISIiIyMkJCQkJSUlJSYmJiYmJiYmJycnJycnJycoKCgoKCgoKCgoKCgoKCgoKSkpKSkpKSkpKSkpKSkpKSoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqAEHwpwELTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAMAAAADAAAABAAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAEHIqAELDQEAAAABAAAAAgAAAAIAQeCoAQvTBgEAAAABAAAAAgAAAAIAAAAmAAAAggAAACEFAABKAAAAZwgAACYAAADAAQAAgAAAAEkFAABKAAAAvggAACkAAAAsAgAAgAAAAEkFAABKAAAAvggAAC8AAADKAgAAgAAAAIoFAABKAAAAhAkAADUAAABzAwAAgAAAAJ0FAABKAAAAoAkAAD0AAACBAwAAgAAAAOsFAABLAAAAPgoAAEQAAACeAwAAgAAAAE0GAABLAAAAqgoAAEsAAACzAwAAgAAAAMEGAABNAAAAHw0AAE0AAABTBAAAgAAAACMIAABRAAAApg8AAFQAAACZBAAAgAAAAEsJAABXAAAAsRIAAFgAAADaBAAAgAAAAG8JAABdAAAAIxQAAFQAAABFBQAAgAAAAFQKAABqAAAAjBQAAGoAAACvBQAAgAAAAHYJAAB8AAAAThAAAHwAAADSAgAAgAAAAGMHAACRAAAAkAcAAJIAAAAAAAAAAQAAAAIAAAAEAAAAAAAAAAIAAAAEAAAACAAAAAAAAAABAAAAAQAAAAUAAAANAAAAHQAAAD0AAAB9AAAA/QAAAP0BAAD9AwAA/QcAAP0PAAD9HwAA/T8AAP1/AAD9/wAA/f8BAP3/AwD9/wcA/f8PAP3/HwD9/z8A/f9/AP3//wD9//8B/f//A/3//wf9//8P/f//H/3//z/9//9/AAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAAAARAAAAEgAAABMAAAAUAAAAFQAAABYAAAAXAAAAGAAAABkAAAAaAAAAGwAAABwAAAAdAAAAHgAAAB8AAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAIgAAACMAAAAlAAAAJwAAACkAAAArAAAALwAAADMAAAA7AAAAQwAAAFMAAABjAAAAgwAAAAMBAAADAgAAAwQAAAMIAAADEAAAAyAAAANAAAADgAAAAwABAEHErwELlQEBAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEgAAABQAAAAWAAAAGAAAABwAAAAgAAAAKAAAADAAAABAAAAAgAAAAAABAAAAAgAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAAABAAEAAAAEAAAACABB5LABC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBsLIBC9YEAQAAAAEAAAABAAAAAQAAAAIAAAACAAAAAwAAAAMAAAAEAAAABgAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBlLcBC4MEAQAAAAEAAAAFAAAADQAAAB0AAAA9AAAAfQAAAP0AAAD9AQAA/QMAAP0HAAD9DwAA/R8AAP0/AAD9fwAA/f8AAP3/AQD9/wMA/f8HAP3/DwD9/x8A/f8/AP3/fwD9//8A/f//Af3//wP9//8H/f//D/3//x/9//8//f//fwAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAAT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IGludD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8bG9uZz4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgbG9uZz4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50MTZfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dWludDMyX3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGZsb2F0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxkb3VibGU+AAAAGHQAAFBlAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lkRUUAABh0AAB4ZQAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJZkVFAAAYdAAAoGUAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SW1FRQAAGHQAAMhlAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lsRUUAABh0AADwZQAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJakVFAAAYdAAAGGYAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWlFRQAAGHQAAEBmAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0l0RUUAABh0AABoZgAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJc0VFAAAYdAAAkGYAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWFFRQAAGHQAALhmAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0ljRUUAAEB0AADwZgAAAAAAAAEAAACIBwAAAAAAAE5TdDNfXzIxMmJhc2ljX3N0cmluZ0lEaU5TXzExY2hhcl90cmFpdHNJRGlFRU5TXzlhbGxvY2F0b3JJRGlFRUVFAAAAQHQAAExnAAAAAAAAAQAAAIgHAAAAAAAATlN0M19fMjEyYmFzaWNfc3RyaW5nSURzTlNfMTFjaGFyX3RyYWl0c0lEc0VFTlNfOWFsbG9jYXRvcklEc0VFRUUAAABAdAAAqGcAAAAAAAABAAAAiAcAAAAAAABOU3QzX18yMTJiYXNpY19zdHJpbmdJd05TXzExY2hhcl90cmFpdHNJd0VFTlNfOWFsbG9jYXRvckl3RUVFRQAAQHQAAABoAAAAAAAAAQAAAIgHAAAAAAAATlN0M19fMjEyYmFzaWNfc3RyaW5nSWhOU18xMWNoYXJfdHJhaXRzSWhFRU5TXzlhbGxvY2F0b3JJaEVFRUUAABEACgAREREAAAAABQAAAAAAAAkAAAAACwAAAAAAAAAAEQAPChEREQMKBwABAAkLCwAACQYLAAALAAYRAAAAERERAEGR0QELIQsAAAAAAAAAABEACgoREREACgAAAgAJCwAAAAkACwAACwBBy9EBCwEMAEHX0QELFQwAAAAADAAAAAAJDAAAAAAADAAADABBhdIBCwEOAEGR0gELFQ0AAAAEDQAAAAAJDgAAAAAADgAADgBBv9IBCwEQAEHL0gELHg8AAAAADwAAAAAJEAAAAAAAEAAAEAAAEgAAABISEgBBgtMBCw4SAAAAEhISAAAAAAAACQBBs9MBCwELAEG/0wELFQoAAAAACgAAAAAJCwAAAAAACwAACwBB7dMBCwEMAEH50wELJwwAAAAADAAAAAAJDAAAAAAADAAADAAALSsgICAwWDB4AChudWxsKQBBsNQBC2cwMTIzNDU2Nzg5QUJDREVGGRJEOwI/LEcUPTMwChsGRktFNw9JDo4XA0AdPGkrNh9KLRwBICUpIQgMFRYiLhA4Pgs0MRhkdHV2L0EJfzkRI0MyQomKiwUEJignDSoeNYwHGkiTE5SVAEGg1QEL9hNJbGxlZ2FsIGJ5dGUgc2VxdWVuY2UARG9tYWluIGVycm9yAFJlc3VsdCBub3QgcmVwcmVzZW50YWJsZQBOb3QgYSB0dHkAUGVybWlzc2lvbiBkZW5pZWQAT3BlcmF0aW9uIG5vdCBwZXJtaXR0ZWQATm8gc3VjaCBmaWxlIG9yIGRpcmVjdG9yeQBObyBzdWNoIHByb2Nlc3MARmlsZSBleGlzdHMAVmFsdWUgdG9vIGxhcmdlIGZvciBkYXRhIHR5cGUATm8gc3BhY2UgbGVmdCBvbiBkZXZpY2UAT3V0IG9mIG1lbW9yeQBSZXNvdXJjZSBidXN5AEludGVycnVwdGVkIHN5c3RlbSBjYWxsAFJlc291cmNlIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlAEludmFsaWQgc2VlawBDcm9zcy1kZXZpY2UgbGluawBSZWFkLW9ubHkgZmlsZSBzeXN0ZW0ARGlyZWN0b3J5IG5vdCBlbXB0eQBDb25uZWN0aW9uIHJlc2V0IGJ5IHBlZXIAT3BlcmF0aW9uIHRpbWVkIG91dABDb25uZWN0aW9uIHJlZnVzZWQASG9zdCBpcyBkb3duAEhvc3QgaXMgdW5yZWFjaGFibGUAQWRkcmVzcyBpbiB1c2UAQnJva2VuIHBpcGUASS9PIGVycm9yAE5vIHN1Y2ggZGV2aWNlIG9yIGFkZHJlc3MAQmxvY2sgZGV2aWNlIHJlcXVpcmVkAE5vIHN1Y2ggZGV2aWNlAE5vdCBhIGRpcmVjdG9yeQBJcyBhIGRpcmVjdG9yeQBUZXh0IGZpbGUgYnVzeQBFeGVjIGZvcm1hdCBlcnJvcgBJbnZhbGlkIGFyZ3VtZW50AEFyZ3VtZW50IGxpc3QgdG9vIGxvbmcAU3ltYm9saWMgbGluayBsb29wAEZpbGVuYW1lIHRvbyBsb25nAFRvbyBtYW55IG9wZW4gZmlsZXMgaW4gc3lzdGVtAE5vIGZpbGUgZGVzY3JpcHRvcnMgYXZhaWxhYmxlAEJhZCBmaWxlIGRlc2NyaXB0b3IATm8gY2hpbGQgcHJvY2VzcwBCYWQgYWRkcmVzcwBGaWxlIHRvbyBsYXJnZQBUb28gbWFueSBsaW5rcwBObyBsb2NrcyBhdmFpbGFibGUAUmVzb3VyY2UgZGVhZGxvY2sgd291bGQgb2NjdXIAU3RhdGUgbm90IHJlY292ZXJhYmxlAFByZXZpb3VzIG93bmVyIGRpZWQAT3BlcmF0aW9uIGNhbmNlbGVkAEZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZABObyBtZXNzYWdlIG9mIGRlc2lyZWQgdHlwZQBJZGVudGlmaWVyIHJlbW92ZWQARGV2aWNlIG5vdCBhIHN0cmVhbQBObyBkYXRhIGF2YWlsYWJsZQBEZXZpY2UgdGltZW91dABPdXQgb2Ygc3RyZWFtcyByZXNvdXJjZXMATGluayBoYXMgYmVlbiBzZXZlcmVkAFByb3RvY29sIGVycm9yAEJhZCBtZXNzYWdlAEZpbGUgZGVzY3JpcHRvciBpbiBiYWQgc3RhdGUATm90IGEgc29ja2V0AERlc3RpbmF0aW9uIGFkZHJlc3MgcmVxdWlyZWQATWVzc2FnZSB0b28gbGFyZ2UAUHJvdG9jb2wgd3JvbmcgdHlwZSBmb3Igc29ja2V0AFByb3RvY29sIG5vdCBhdmFpbGFibGUAUHJvdG9jb2wgbm90IHN1cHBvcnRlZABTb2NrZXQgdHlwZSBub3Qgc3VwcG9ydGVkAE5vdCBzdXBwb3J0ZWQAUHJvdG9jb2wgZmFtaWx5IG5vdCBzdXBwb3J0ZWQAQWRkcmVzcyBmYW1pbHkgbm90IHN1cHBvcnRlZCBieSBwcm90b2NvbABBZGRyZXNzIG5vdCBhdmFpbGFibGUATmV0d29yayBpcyBkb3duAE5ldHdvcmsgdW5yZWFjaGFibGUAQ29ubmVjdGlvbiByZXNldCBieSBuZXR3b3JrAENvbm5lY3Rpb24gYWJvcnRlZABObyBidWZmZXIgc3BhY2UgYXZhaWxhYmxlAFNvY2tldCBpcyBjb25uZWN0ZWQAU29ja2V0IG5vdCBjb25uZWN0ZWQAQ2Fubm90IHNlbmQgYWZ0ZXIgc29ja2V0IHNodXRkb3duAE9wZXJhdGlvbiBhbHJlYWR5IGluIHByb2dyZXNzAE9wZXJhdGlvbiBpbiBwcm9ncmVzcwBTdGFsZSBmaWxlIGhhbmRsZQBSZW1vdGUgSS9PIGVycm9yAFF1b3RhIGV4Y2VlZGVkAE5vIG1lZGl1bSBmb3VuZABXcm9uZyBtZWRpdW0gdHlwZQBObyBlcnJvciBpbmZvcm1hdGlvbgAAYmFzaWNfc3RyaW5nAHN0ZDo6ZXhjZXB0aW9uAAAAAADccQAAPAAAAD0AAAA+AAAAGHQAAORxAABTdDlleGNlcHRpb24AAAAAAAAAAAhyAAAQAAAAPwAAAEAAAACMcgAAFHIAANxxAABTdDExbG9naWNfZXJyb3IAAAAAADhyAAAQAAAAQQAAAEAAAACMcgAARHIAAAhyAABTdDEybGVuZ3RoX2Vycm9yAFN0OXR5cGVfaW5mbwAAABh0AABVcgAAjHIAAAFzAABkcgAAjHIAAKxyAABscgAAAAAAANByAABCAAAAQwAAAEQAAABFAAAARgAAAEcAAABIAAAASQAAAE4xMF9fY3h4YWJpdjExN19fY2xhc3NfdHlwZV9pbmZvRQAAAIxyAADccgAAeHIAAE4xMF9fY3h4YWJpdjEyMF9fc2lfY2xhc3NfdHlwZV9pbmZvRQBOMTBfX2N4eGFiaXYxMTZfX3NoaW1fdHlwZV9pbmZvRQAAAAAAAABAcwAAQgAAAEoAAABEAAAARQAAAEsAAACMcgAATHMAAGxyAABOMTBfX2N4eGFiaXYxMjNfX2Z1bmRhbWVudGFsX3R5cGVfaW5mb0UAdgAAACxzAAB0cwAAYgAAACxzAACAcwAAYwAAACxzAACMcwAAaAAAACxzAACYcwAAYQAAACxzAACkcwAAcwAAACxzAACwcwAAdAAAACxzAAC8cwAAaQAAACxzAADIcwAAagAAACxzAADUcwAAbAAAACxzAADgcwAAbQAAACxzAADscwAAZgAAACxzAAD4cwAAZAAAACxzAAAEdAAAAAAAAHhyAABCAAAATAAAAEQAAABFAAAARgAAAE0AAABOAAAATwAAAAAAAABgdAAAQgAAAFAAAABEAAAARQAAAEYAAABRAAAAUgAAAFMAAACMcgAAbHQAAHhyAABOMTBfX2N4eGFiaXYxMjFfX3ZtaV9jbGFzc190eXBlX2luZm9FAAAAcHUAQZjpAQtBgC0AAAAyAAABAQAAHgEAAA8AAACALAAAAC0AAAAAAAAeAAAADwAAAAAAAAAwLAAAAAAAABMAAAAHAAAAAAAAAAUAQeTpAQsBOQBB/OkBCwo6AAAAOwAAAC12AEGU6gELAQIAQaPqAQsF//////8AQejqAQsJoH5QAAAAAAAFAEH86gELAVQAQZTrAQsOOgAAAFUAAACYegAAAAQAQazrAQsBAQBBu+sBCwUK/////w=="),_a,BloscShuffle;(function(f){f[f.NOSHUFFLE=0]="NOSHUFFLE",f[f.SHUFFLE=1]="SHUFFLE",f[f.BITSHUFFLE=2]="BITSHUFFLE",f[f.AUTOSHUFFLE=-1]="AUTOSHUFFLE"})(BloscShuffle||(BloscShuffle={}));const COMPRESSORS=new Set(["blosclz","lz4","lz4hc","snappy","zlib","zstd"]);let emscriptenModule;const init$1=()=>blosc_codec({noInitialRun:!0,wasmBinary}),Blosc=(_a=class{constructor(f=5,s="lz4",d=1,_=0){if(f<0||f>9)throw new Error(`Invalid compression level: '${f}'. It should be between 0 and 9`);if(!COMPRESSORS.has(s))throw new Error(`Invalid compressor '${s}'. Valid compressors include
        'blosclz', 'lz4', 'lz4hc','snappy', 'zlib', 'zstd'.`);if(d<-1||d>2)throw new Error(`Invalid shuffle ${d}. Must be one of 0 (NOSHUFFLE),
        1 (SHUFFLE), 2 (BITSHUFFLE), -1 (AUTOSHUFFLE).`);this.blocksize=_,this.clevel=f,this.cname=s,this.shuffle=d}static fromConfig({blocksize:f,clevel:s,cname:d,shuffle:_}){return new _a(s,d,_,f)}async encode(f){emscriptenModule||(emscriptenModule=init$1());const s=await emscriptenModule,d=s.compress(f,this.cname,this.clevel,this.shuffle,this.blocksize),_=new Uint8Array(d);return s.free_result(),_}async decode(f,s){emscriptenModule||(emscriptenModule=init$1());const d=await emscriptenModule,_=d.decompress(f),S=new Uint8Array(_);return d.free_result(),s!==void 0?(s.set(S),s):S}},_a.codecId="blosc",_a.COMPRESSORS=[...COMPRESSORS],_a.NOSHUFFLE=0,_a.SHUFFLE=1,_a.BITSHUFFLE=2,_a.AUTOSHUFFLE=-1,_a);var Blosc$1=Blosc;addCodec(Zlib$1.codecId,()=>Zlib$1);addCodec(GZip$1.codecId,()=>GZip$1);addCodec(Blosc$1.codecId,()=>Blosc$1);var __defProp$3=Object.defineProperty,__defNormalProp$3=(f,s,d)=>s in f?__defProp$3(f,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):f[s]=d,__publicField$3=(f,s,d)=>(__defNormalProp$3(f,s+"",d),d);class LZWDecoder extends BaseDecoder{constructor(s){super(),__publicField$3(this,"maxUncompressedSize");const d=s.TileWidth||s.ImageWidth,_=s.TileLength||s.ImageLength,S=s.BitsPerSample[0]/8;this.maxUncompressedSize=d*_*S}async decodeBlock(s){const d=new Uint8Array(s);return(await N(d,this.maxUncompressedSize)).buffer}}const DTYPE_LOOKUP$1={uint8:"Uint8",uint16:"Uint16",uint32:"Uint32",float:"Float32",double:"Float64",int8:"Int8",int16:"Int16",int32:"Int32"};function getChannelStats(f){let s=f.length,d=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,S=0;for(;s--;)f[s]<d&&(d=f[s]),f[s]>_&&(_=f[s]),S+=f[s];const T=S/f.length;s=f.length;let F=0;for(;s--;)F+=(f[s]-T)**2;const M=(F/f.length)**.5,P=Math.floor(f.length/2),H=Math.floor(f.length/4),J=3*Math.floor(f.length/4);quickselect(f,P);const K=f[P];quickselect(f,H,0,P);const z=f[H];quickselect(f,J,P,f.length-1);const oe=f[J],se=f.filter(ve=>ve>0),ae=5e-4,ge=Math.floor(se.length*(1-ae)),pe=Math.floor(se.length*ae);quickselect(se,ge),quickselect(se,pe,0,ge);const he=[se[pe]||0,se[ge]||0];return{mean:T,sd:M,q1:z,q3:oe,median:K,domain:[d,_],contrastLimits:he}}function intToRgba(f){if(!Number.isInteger(f))throw Error("Not an integer.");const s=new ArrayBuffer(4);new DataView(s).setInt32(0,f,!1);const _=new Uint8Array(s);return Array.from(_)}function isInterleaved$1(f){const s=f[f.length-1];return s===3||s===4}function getLabels(f){return f.toLowerCase().split("").reverse()}function getImageSize(f){const s=isInterleaved$1(f.shape),[d,_]=f.shape.slice(s?-3:-2);return{height:d,width:_}}function prevPowerOf2(f){return 2**Math.floor(Math.log2(f))}const SIGNAL_ABORTED="__vivSignalAborted";function isElement(f){return f.nodeType===1}function isText(f){return f.nodeType===3}function xmlToJson(f,s){var _;if(isText(f))return((_=f.nodeValue)==null?void 0:_.trim())??"";if(f.childNodes.length===0&&(!f.attributes||f.attributes.length===0))return"";const d={};if(f.attributes&&f.attributes.length>0){const S={};for(let T=0;T<f.attributes.length;T++){const F=f.attributes[T];S[F.name]=F.value}d[s.attrtibutesKey]=S}for(let S=0;S<f.childNodes.length;S++){const T=f.childNodes[S];if(!isElement(T))continue;const F=xmlToJson(T,s);if(F!==void 0&&F!==""){if(T.nodeName==="#text"&&f.childNodes.length===1)return F;d[T.nodeName]?(Array.isArray(d[T.nodeName])||(d[T.nodeName]=[d[T.nodeName]]),d[T.nodeName].push(F)):d[T.nodeName]=F}}return d}function parseXML(f){const d=new DOMParser().parseFromString(f.replace(/\u0000$/,""),"application/xml");return xmlToJson(d.documentElement,{attrtibutesKey:"attr"})}function assert$1(f,s){if(!f)throw new Error(`Assert failed${s?`: ${s}`:""}`)}const VIV_PROXY_KEY="__viv",OFFSETS_PROXY_KEY=`${VIV_PROXY_KEY}-offsets`;function createOffsetsProxy(f,s){const d=(_,S)=>S==="getImage"?T=>{if(!(T in _.ifdRequests)&&T in s){const F=s[T];_.ifdRequests[T]=_.parseFileDirectoryAt(F)}return _.getImage(T)}:S===OFFSETS_PROXY_KEY?!0:Reflect.get(_,S);return new Proxy(f,{get:d})}function extractPhysicalSizesfromPixels(f){if(!f.PhysicalSizeX||!f.PhysicalSizeY||!f.PhysicalSizeXUnit||!f.PhysicalSizeYUnit)return;const s={x:{size:f.PhysicalSizeX,unit:f.PhysicalSizeXUnit},y:{size:f.PhysicalSizeY,unit:f.PhysicalSizeYUnit}};return f.PhysicalSizeZ&&f.PhysicalSizeZUnit&&(s.z={size:f.PhysicalSizeZ,unit:f.PhysicalSizeZUnit}),s}function parsePixelDataType(f){return assert$1(f in DTYPE_LOOKUP$1,`Pixel type ${f} not supported.`),DTYPE_LOOKUP$1[f]}function extractAxesFromPixels(f){const s=getLabels(f.DimensionOrder),d=Array(s.length).fill(0);return d[s.indexOf("t")]=f.SizeT,d[s.indexOf("c")]=f.SizeC,d[s.indexOf("z")]=f.SizeZ,d[s.indexOf("y")]=f.SizeY,d[s.indexOf("x")]=f.SizeX,f.Interleaved&&(s.push("_c"),d.push(3)),{labels:s,shape:d}}function getShapeForBinaryDownsampleLevel(f){const{axes:s,level:d}=f,_=s.labels.indexOf("x");assert$1(_!==-1,"x dimension not found");const S=s.labels.indexOf("y");assert$1(S!==-1,"y dimension not found");const T=s.shape.slice();return T[_]=s.shape[_]>>d,T[S]=s.shape[S]>>d,T}function getTiffTileSize(f){const s=f.getTileWidth(),d=f.getTileHeight(),_=Math.min(s,d);return prevPowerOf2(_)}function guessImageDataType(f){var S,T;const d=((T=(S=f.fileDirectory)==null?void 0:S.SampleFormat)==null?void 0:T[0])??1,_=f.fileDirectory.BitsPerSample[0];switch(d){case 1:if(_<=8)return DTYPE_LOOKUP$1.uint8;if(_<=16)return DTYPE_LOOKUP$1.uint16;if(_<=32)return DTYPE_LOOKUP$1.uint32;break;case 2:if(_<=8)return DTYPE_LOOKUP$1.int8;if(_<=16)return DTYPE_LOOKUP$1.int16;if(_<=32)return DTYPE_LOOKUP$1.int32;break;case 3:switch(_){case 16:return DTYPE_LOOKUP$1.float;case 32:return DTYPE_LOOKUP$1.float;case 64:return DTYPE_LOOKUP$1.double}break}throw Error("Unsupported data format/bitsPerSample")}function getMultiTiffShapeMap(f){let[s,d,_]=[0,0,0];for(const T of f)s=Math.max(s,T.selection.c),d=Math.max(d,T.selection.z),_=Math.max(_,T.selection.t);const S=f[0].tiff;return{x:S.getWidth(),y:S.getHeight(),z:d+1,c:s+1,t:_+1}}function getChannelSamplesPerPixel(f,s){const d=Array(s).fill(0);for(const _ of f){const S=_.selection.c,T=_.tiff.getSamplesPerPixel(),F=d[S];if(F&&F!==T)throw Error("Channel samples per pixel mismatch");d[S]=T}return d}function getMultiTiffMeta(f,s){const d=s[0].tiff,_=getMultiTiffShapeMap(s),S=[];for(const M of f.toLowerCase())S.unshift(_[M]);const T=getLabels(f),F=guessImageDataType(d);return{shape:S,labels:T,dtype:F}}function getMultiTiffPixelMedatata(f,s,d,_,S,T,F){const M=[];for(let P=0;P<d.c;P+=1)M.push({ID:`Channel:${f}:${P}`,Name:T[P],SamplesPerPixel:F[P]});return{BigEndian:!S[0].tiff.littleEndian,DimensionOrder:s,ID:`Pixels:${f}`,SizeC:d.c,SizeT:d.t,SizeX:d.x,SizeY:d.y,SizeZ:d.z,Type:_,Channels:M}}function getMultiTiffMetadata(f,s,d,_,S){const F="Image:0",M="",P="",H=getMultiTiffShapeMap(s),J=getChannelSamplesPerPixel(s,H.c);if(d.length!==H.c)throw Error("Wrong number of channel names for number of channels provided");const K=getMultiTiffPixelMedatata(0,_,H,S,s,d,J);return{ID:F,Name:f,AcquisitionDate:M,Description:P,Pixels:K,format:()=>({"Acquisition Date":M,"Dimensions (XY)":`${H.x} x ${H.y}`,PixelsType:S,"Z-sections/Timepoints":`${H.z} x ${H.t}`,Channels:H.c})}}function parseFilename(f){const s={},d=f.split("/").pop(),_=d==null?void 0:d.split(".");return _&&(s.name=_.slice(0,-1).join("."),[,s.extension]=_),s}function createGeoTiffObject(f,{headers:s}){if(f instanceof Blob)return fromBlob(f);const d=typeof f=="string"?new URL(f):f;return d.protocol==="file:"?fromFile(d.pathname):fromUrl(d.href,{headers:s,cacheSize:Number.POSITIVE_INFINITY})}async function createGeoTiff(f,s={}){const d=await createGeoTiffObject(f,s);return s.offsets?createOffsetsProxy(d,s.offsets):d}function createOmeImageIndexerFromResolver(f,s){const d=[];return async(_,S)=>{const{tiff:T,ifdIndex:F}=await f(_),M=await T.getImage(F);if(S===0)return M;let P;if(M.fileDirectory.SubIFDs)P=M.fileDirectory.SubIFDs[S-1];else{const J=S*s.size.z*s.size.t*s.size.c;P=F+J}d[P]||(d[P]=await T.parseFileDirectoryAt(P));const H=d[P];return new GeoTIFFImage(H.fileDirectory,H.geoKeyDirectory,M.dataView,T.littleEndian,T.cache,T.source)}}function getMultiTiffIndexer(f){function s({c:_=0,t:S=0,z:T=0}){return`${_}-${S}-${T}`}const d=new Map(f.map(({selection:_,tiff:S})=>[s(_),S]));return async _=>{const S=s(_),T=d.get(S);if(!T)throw new Error(`No image available for selection ${S}`);return T}}var __defProp$2=Object.defineProperty,__defNormalProp$2=(f,s,d)=>s in f?__defProp$2(f,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):f[s]=d,__publicField$2=(f,s,d)=>(__defNormalProp$2(f,s+"",d),d);class TiffPixelSource{constructor(s,d,_,S,T,F,M){this.dtype=d,this.tileSize=_,this.shape=S,this.labels=T,this.meta=F,this.pool=M,__publicField$2(this,"_indexer"),this._indexer=s}async getRaster({selection:s,signal:d}){const _=await this._indexer(s);return this._readRasters(_,{signal:d})}async getTile({x:s,y:d,selection:_,signal:S}){const{height:T,width:F}=this._getTileExtent(s,d),M=s*this.tileSize,P=d*this.tileSize,H=[M,P,M+F,P+T],J=await this._indexer(_);return this._readRasters(J,{window:H,width:F,height:T,signal:S})}async _readRasters(s,d){var F;const _=isInterleaved$1(this.shape),S=await s.readRasters({interleave:_,...d,pool:this.pool});if((F=d==null?void 0:d.signal)!=null&&F.aborted)throw SIGNAL_ABORTED;return{data:_?S:S[0],width:S.width,height:S.height}}_getTileExtent(s,d){const{height:_,width:S}=getImageSize(this);let T=this.tileSize,F=this.tileSize;const M=Math.floor(S/this.tileSize),P=Math.floor(_/this.tileSize);return s===M&&(F=S%this.tileSize),d===P&&(T=_%this.tileSize),{height:T,width:F}}onTileError(s){console.error(s)}}function assertSameResolution(f){const s=f[0].tiff.getWidth(),d=f[0].tiff.getHeight();for(const _ of f)if(_.tiff.getWidth()!==s||_.tiff.getHeight()!==d)throw new Error("All images must have the same width and height")}async function assertCompleteStack(f,s){for(let d=0;d<=Math.max(...f.map(_=>_.selection.t));d+=1)for(let _=0;_<=Math.max(...f.map(S=>S.selection.c));_+=1)for(let S=0;S<=Math.max(...f.map(T=>T.selection.z));S+=1)await s({t:d,c:_,z:S})}async function load$2(f,s,d,_){assertSameResolution(s);const S=s[0].tiff,{PhotometricInterpretation:T}=S.fileDirectory,F="XYZCT",M=getTiffTileSize(S),P={photometricInterpretation:T},H=getMultiTiffIndexer(s),{shape:J,labels:K,dtype:z}=getMultiTiffMeta(F,s),oe=getMultiTiffMetadata(f,s,d,F,z);return await assertCompleteStack(s,H),{data:[new TiffPixelSource(H,z,M,J,K,P,_)],metadata:oe}}function flattenAttributes({attr:f,...s}){return{...f,...s}}function ensureArray(f){return Array.isArray(f)?f:[f]}const DimensionOrderSchema=enumType(["XYZCT","XYZTC","XYCTZ","XYCZT","XYTCZ","XYTZC"]),PixelTypeSchema=enumType(["int8","int16","int32","uint8","uint16","uint32","float","bit","double","complex","double-complex"]),PhysicalUnitSchema=enumType(["Ym","Zm","Em","Pm","Tm","Gm","Mm","km","hm","dam","m","dm","cm","mm","m","nm","pm","fm","am","zm","ym","","thou","li","in","ft","yd","mi","ua","ly","pc","pt","pixel","reference frame"]),ChannelSchema=objectType({}).extend({attr:objectType({ID:stringType(),SamplesPerPixel:coerce.number().optional(),Name:stringType().optional(),Color:coerce.number().transform(intToRgba).optional()})}).transform(flattenAttributes),UuidSchema=objectType({}).extend({attr:objectType({FileName:stringType()})}).transform(flattenAttributes),TiffDataSchema=objectType({UUID:UuidSchema.optional()}).extend({attr:objectType({IFD:coerce.number().default(0),PlaneCount:coerce.number().default(1),FirstT:coerce.number().optional(),FirstC:coerce.number().optional(),FirstZ:coerce.number().optional()})}).transform(flattenAttributes),PixelsSchema=objectType({Channel:preprocessType(ensureArray,ChannelSchema.array()),TiffData:preprocessType(ensureArray,TiffDataSchema.array()).optional()}).extend({attr:objectType({ID:stringType(),DimensionOrder:DimensionOrderSchema,Type:PixelTypeSchema,SizeT:coerce.number(),SizeC:coerce.number(),SizeZ:coerce.number(),SizeY:coerce.number(),SizeX:coerce.number(),PhysicalSizeX:coerce.number().optional(),PhysicalSizeY:coerce.number().optional(),PhysicalSizeZ:coerce.number().optional(),SignificantBits:coerce.number().optional(),PhysicalSizeXUnit:PhysicalUnitSchema.optional().default("m"),PhysicalSizeYUnit:PhysicalUnitSchema.optional().default("m"),PhysicalSizeZUnit:PhysicalUnitSchema.optional().default("m"),BigEndian:stringType().transform(f=>f.toLowerCase()==="true").optional(),Interleaved:stringType().transform(f=>f.toLowerCase()==="true").optional()})}).transform(flattenAttributes).transform(({Channel:f,...s})=>({Channels:f,...s})),ImageSchema=objectType({AquisitionDate:stringType().optional().default(""),Description:unknownType().optional().default(""),Pixels:PixelsSchema}).extend({attr:objectType({ID:stringType(),Name:stringType().optional()})}).transform(flattenAttributes),OmeSchema=objectType({Image:preprocessType(ensureArray,ImageSchema.array())});function fromString(f){const s=parseXML(f);return OmeSchema.parse(s).Image.map(_=>({..._,format(){const S=["X","Y","Z"].map(T=>{const F=_.Pixels[`PhysicalSize${T}`],M=_.Pixels[`PhysicalSize${T}Unit`];return F?`${F} ${M}`:"-"}).join(" x ");return{"Acquisition Date":_.AquisitionDate,"Dimensions (XY)":`${_.Pixels.SizeX} x ${_.Pixels.SizeY}`,"Pixels Type":_.Pixels.Type,"Pixels Size (XYZ)":S,"Z-sections/Timepoints":`${_.Pixels.SizeZ} x ${_.Pixels.SizeT}`,Channels:_.Pixels.SizeC}}}))}function isCompleteTiffDataItem(f){return"FirstC"in f&&"FirstT"in f&&"FirstZ"in f&&"IFD"in f&&"UUID"in f}function createMultifileImageDataLookup(f){const s=new Map;function d({t:_,c:S,z:T}){return`t${_}.c${S}.z${T}`}assert$1(f,"No TiffData in OME-XML");for(const _ of f){assert$1(isCompleteTiffDataItem(_),"Incomplete TiffData item");const S=d({t:_.FirstT,c:_.FirstC,z:_.FirstZ}),T={ifd:_.IFD,filename:_.UUID.FileName};s.set(S,T)}return{getImageDataPointer(_){const S=s.get(d(_));return assert$1(S,`No image for selection: ${JSON.stringify(_)}`),S}}}function createMultifileOmeTiffResolver(f){const s=new Map,d=createMultifileImageDataLookup(f.tiffData);return async _=>{const S=d.getImageDataPointer(_);if(!s.has(S.filename)){const F=new URL(S.filename,f.baseUrl),M=await createGeoTiff(F,f);s.set(S.filename,M)}const T=s.get(S.filename);return assert$1(T,`No GeoTIFF for ${S.filename}`),{tiff:T,ifdIndex:S.ifd}}}async function getPixelSourceOptionsForImage(f,s){const d=createMultifileOmeTiffResolver({tiffData:f.Pixels.TiffData,baseUrl:s.baseUrl,headers:s.headers}),{tiff:_,ifdIndex:S}=await d({c:0,t:0,z:0}),T=await _.getImage(S);return{pyramidIndexer:createOmeImageIndexerFromResolver(d,{size:{z:f.Pixels.SizeZ,t:f.Pixels.SizeT,c:f.Pixels.SizeC}}),levels:T.fileDirectory.SubIFDs?T.fileDirectory.SubIFDs.length+1:1,tileSize:getTiffTileSize(T),axes:extractAxesFromPixels(f.Pixels),dtype:parsePixelDataType(f.Pixels.Type),meta:{physicalSizes:extractPhysicalSizesfromPixels(f.Pixels),photometricInterpretation:T.fileDirectory.PhotometricInterpretation}}}async function loadMultifileOmeTiff(f,s={}){assert$1(!(f instanceof File),"File or Blob not supported for multifile OME-TIFF");const d=new URL(f),_=await fetch(d).then(F=>F.text()),S=fromString(_),T=[];for(const F of S){const M=await getPixelSourceOptionsForImage(F,{baseUrl:d,headers:s.headers||{}}),P=Array.from({length:M.levels},(H,J)=>new TiffPixelSource(K=>M.pyramidIndexer(K,J),M.dtype,M.tileSize,getShapeForBinaryDownsampleLevel({axes:M.axes,level:J}),M.axes.labels,M.meta,s.pool));T.push({data:P,metadata:F})}return T}function resolveMetadata(f,s){if(s)return{levels:s.length+1,rootMeta:f};const d=f[0];return{levels:f.length,rootMeta:[d]}}function getRelativeOmeIfdIndex({z:f,t:s,c:d},_){const{size:S,dimensionOrder:T}=_;switch(_.dimensionOrder){case"XYZCT":return f+S.z*d+S.z*S.c*s;case"XYZTC":return f+S.z*s+S.z*S.t*d;case"XYCTZ":return d+S.c*s+S.c*S.t*f;case"XYCZT":return d+S.c*f+S.c*S.z*s;case"XYTCZ":return s+S.t*d+S.t*S.c*f;case"XYTZC":return s+S.t*f+S.t*S.z*d;default:throw new Error(`Invalid dimension order: ${T}`)}}function createSingleFileOmeTiffPyramidalIndexer(f,s){return createOmeImageIndexerFromResolver(d=>{const S=getRelativeOmeIfdIndex(d,s)+s.ifdOffset;return{tiff:f,ifdIndex:S}},s)}async function loadSingleFileOmeTiff(f,s={}){const{offsets:d,headers:_,pool:S}=s,T=await createGeoTiff(f,{headers:_,offsets:d}),F=await T.getImage(),{rootMeta:M,levels:P}=resolveMetadata(fromString(F.fileDirectory.ImageDescription),F.fileDirectory.SubIFDs),H=[];let J=0;for(const K of M){const z={z:K.Pixels.SizeZ,c:K.Pixels.SizeC,t:K.Pixels.SizeT},oe=extractAxesFromPixels(K.Pixels),se=createSingleFileOmeTiffPyramidalIndexer(T,{size:z,ifdOffset:J,dimensionOrder:K.Pixels.DimensionOrder}),ae=parsePixelDataType(K.Pixels.Type),ge=getTiffTileSize(await se({c:0,t:0,z:0},0)),pe={physicalSizes:extractPhysicalSizesfromPixels(K.Pixels),photometricInterpretation:F.fileDirectory.PhotometricInterpretation},he=Array.from({length:P},(ve,be)=>new TiffPixelSource(Re=>se(Re,be),ae,ge,getShapeForBinaryDownsampleLevel({axes:oe,level:be}),oe.labels,pe,S));H.push({data:he,metadata:K}),J+=z.t*z.z*z.c}return H}addDecoder(5,()=>LZWDecoder);function isSupportedCompanionOmeTiffFile(f){return typeof f=="string"&&f.endsWith(".companion.ome")}async function loadOmeTiff(f,s={}){const _=await(isSupportedCompanionOmeTiffFile(f)?loadMultifileOmeTiff:loadSingleFileOmeTiff)(f,s);return s.images==="all"?_:_[0]}function getImageSelectionName(f,s,d){return d.length===1?f:`${f}_${s.toString()}`}async function loadMultiTiff(f,s={}){var M;const{pool:d,headers:_={},name:S="MultiTiff"}=s,T=[],F=[];for(const P of f){const[H,J]=P,K=Array.isArray(H)?H:[H];if(typeof J=="string"){const z=parseFilename(J),oe=(M=z.extension)==null?void 0:M.toLowerCase();if(oe==="tif"||oe==="tiff"){const se=z.name;if(se){const ae=await createGeoTiff(J,{headers:_});for(let ge=0;ge<K.length;ge++){const pe=K[ge];if(pe){const he=await ae.getImage(ge);T.push({selection:pe,tiff:he}),F[pe.c]=getImageSelectionName(se,ge,K)}}}}}else{const{name:z}=parseFilename(J.path);if(z){const oe=await fromBlob(J);for(let se=0;se<K.length;se++){const ae=K[se];if(ae){const ge=await oe.getImage(se);T.push({selection:ae,tiff:ge}),F[ae.c]=getImageSelectionName(z,se,K)}}}}}if(T.length>0)return load$2(S,T,s.channelNames||F,d);throw new Error("Unable to load image from provided TiffFolder source.")}var __defProp$1=Object.defineProperty,__defNormalProp$1=(f,s,d)=>s in f?__defProp$1(f,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):f[s]=d,__publicField$1=(f,s,d)=>(__defNormalProp$1(f,typeof s!="symbol"?s+"":s,d),d);function joinUrlParts(...f){return f.map((s,d)=>d===0?s.trim().replace(/[/]*$/g,""):s.trim().replace(/(^[/]*|[/]*$)/g,"")).filter(s=>s.length).join("/")}class ReadOnlyStore{async keys(){return[]}async deleteItem(){return!1}async setItem(){return console.warn("Cannot write to read-only store."),!1}}class FileStore extends ReadOnlyStore{constructor(s,d=""){super(),__publicField$1(this,"_map"),__publicField$1(this,"_rootPrefix"),this._map=s,this._rootPrefix=d}_key(s){return joinUrlParts(this._rootPrefix,s)}async getItem(s){const d=this._map.get(this._key(s));if(!d)throw new KeyError(s);return await d.arrayBuffer()}async containsItem(s){const d=this._key(s);return this._map.has(d)}}function isOmeZarr(f,s){const{SizeT:d,SizeC:_,SizeZ:S,SizeY:T,SizeX:F}=s,M=[d,_,S,T,F];return f.every((P,H)=>M[H]===P)}function guessBioformatsLabels({shape:f},{Pixels:s}){if(isOmeZarr(f,s))return getLabels("XYZCT");const d=getLabels(s.DimensionOrder);return d.forEach((_,S)=>{const T=_.toUpperCase(),F=s[`Size${T}`];if(!F)throw Error(`Dimension ${T} is invalid for OME-XML.`);if(f[S]!==F)throw Error("Dimension mismatch between zarr source and OME-XML.")}),d}function getRootPrefix(f,s){const d=f.find(S=>S.path.indexOf(s)>0);if(!d)throw Error("Could not find root in store.");const _=d.path.indexOf(s)+s.length;return d.path.slice(0,_)}function isAxis(f){return typeof f[0]!="string"}function castLabels(f){return f}async function loadMultiscales(f,s=""){const d=await openGroup(f,s),_=await d.attrs.asObject();let S=["0"],T=["t","c","z","y","x"];if("multiscales"in _){const{datasets:M,axes:P}=_.multiscales[0];S=M.map(H=>H.path),P&&(isAxis(P)?T=P.map(H=>H.name):T=P)}const F=S.map(M=>d.getItem(M));return{data:await Promise.all(F),rootAttrs:_,labels:T}}function guessTileSize(f){const s=isInterleaved$1(f.shape),[d,_]=f.chunks.slice(s?-3:-2),S=Math.min(d,_);return prevPowerOf2(S)}function getIndexer(f){if(new Set(f).size!==f.length)throw new Error("Labels must be unique");return d=>{if(Array.isArray(d))return[...d];const _=Array(f.length).fill(0);for(const[S,T]of Object.entries(d)){const F=f.indexOf(S);if(F===-1)throw new Error(`Invalid indexer key: ${S}`);_[F]=T}return _}}var __defProp=Object.defineProperty,__defNormalProp=(f,s,d)=>s in f?__defProp(f,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):f[s]=d,__publicField=(f,s,d)=>(__defNormalProp(f,typeof s!="symbol"?s+"":s,d),d);const DTYPE_LOOKUP={u1:"Uint8",u2:"Uint16",u4:"Uint32",f4:"Float32",f8:"Float64",i1:"Int8",i2:"Int16",i4:"Int32"};function slice$1(f,s){return{start:f,stop:s,step:1,_slice:!0}}class BoundsCheckError extends Error{}class ZarrPixelSource{constructor(s,d,_){this.labels=d,this.tileSize=_,__publicField(this,"_data"),__publicField(this,"_indexer"),this._indexer=getIndexer(d),this._data=s}get shape(){return this._data.shape}get dtype(){const s=this._data.dtype.slice(1);if(!(s in DTYPE_LOOKUP))throw Error(`Zarr dtype not supported, got ${s}.`);return DTYPE_LOOKUP[s]}get _xIndex(){const s=isInterleaved$1(this._data.shape);return this._data.shape.length-(s?2:1)}_chunkIndex(s,{x:d,y:_}){const S=this._indexer(s);return S[this._xIndex]=d,S[this._xIndex-1]=_,S}_getSlices(s,d){const{height:_,width:S}=getImageSize(this),[T,F]=[s*this.tileSize,Math.min((s+1)*this.tileSize,S)],[M,P]=[d*this.tileSize,Math.min((d+1)*this.tileSize,_)];if(T===F||M===P)throw new BoundsCheckError("Tile slice is zero-sized.");if(T<0||M<0||F>S||P>_)throw new BoundsCheckError("Tile slice is out of bounds.");return[slice$1(T,F),slice$1(M,P)]}async _getRaw(s,d){const _=await this._data.getRaw(s,d);if(typeof _!="object")throw new Error("Expected object from getRaw");return _}async getRaster({selection:s,signal:d}){const _=this._chunkIndex(s,{x:null,y:null}),S=await this._getRaw(_,{storeOptions:{signal:d}}),{data:T,shape:[F,M]}=S;return{data:T,width:M,height:F}}async getTile(s){const{x:d,y:_,selection:S,signal:T}=s,[F,M]=this._getSlices(d,_),P=this._chunkIndex(S,{x:F,y:M}),H=await this._getRaw(P,{storeOptions:{signal:T}}),{data:J,shape:[K,z]}=H;return{data:J,height:K,width:z}}onTileError(s){if(!(s instanceof BoundsCheckError))throw s}}async function load$1(f,s){let d;typeof s!="string"?d=await s.text():d=s;const _=fromString(d)[0],{data:S}=await loadMultiscales(f,"0"),T=guessBioformatsLabels(S[0],_),F=guessTileSize(S[0]);return{data:S.map(P=>new ZarrPixelSource(P,T,F)),metadata:_}}async function load(f){const{data:s,rootAttrs:d,labels:_}=await loadMultiscales(f),S=guessTileSize(s[0]);return{data:s.map(F=>new ZarrPixelSource(F,_,S)),metadata:d}}async function loadBioformatsZarr(f,s={}){const d="METADATA.ome.xml",_="data.zarr";if(typeof f=="string"){const M=f.endsWith("/")?f.slice(0,-1):f,P=new HTTPStore(`${M}/${_}`,s),H=await fetch(`${M}/${d}`,s.fetchOptions);if(!H.ok)throw Error("No OME-XML metadata found for store.");return load$1(P,H)}const S=new Map;let T;for(const M of f)M.name===d?T=M:S.set(M.path,M);if(!T)throw Error("No OME-XML metadata found for store.");const F=new FileStore(S,getRootPrefix(f,_));return load$1(F,T)}async function loadOmeZarr(f,s={}){const d=new HTTPStore(f,s);if((s==null?void 0:s.type)!=="multiscales")throw Error("Only multiscale OME-Zarr is supported.");return load(d)}const DEFAULT_INDICES=new Uint32Array([0,2,1,0,3,2]),DEFAULT_TEX_COORDS=new Float32Array([0,1,0,0,1,0,1,1]);function createMesh(f,s){if(!s)return createQuad(f);const d=Math.max(Math.abs(f[0][0]-f[3][0]),Math.abs(f[1][0]-f[2][0])),_=Math.max(Math.abs(f[1][1]-f[0][1]),Math.abs(f[2][1]-f[3][1])),S=Math.ceil(d/s)+1,T=Math.ceil(_/s)+1,F=(S-1)*(T-1)*6,M=new Uint32Array(F),P=new Float32Array(S*T*2),H=new Float64Array(S*T*3);let J=0,K=0;for(let z=0;z<S;z++){const oe=z/(S-1);for(let se=0;se<T;se++){const ae=se/(T-1),ge=interpolateQuad(f,oe,ae);H[J*3+0]=ge[0],H[J*3+1]=ge[1],H[J*3+2]=ge[2]||0,P[J*2+0]=oe,P[J*2+1]=1-ae,z>0&&se>0&&(M[K++]=J-T,M[K++]=J-T-1,M[K++]=J-1,M[K++]=J-T,M[K++]=J-1,M[K++]=J),J++}}return{vertexCount:F,positions:H,indices:M,texCoords:P}}function createQuad(f){const s=new Float64Array(12);for(let d=0;d<f.length;d++)s[d*3+0]=f[d][0],s[d*3+1]=f[d][1],s[d*3+2]=f[d][2]||0;return{vertexCount:6,positions:s,indices:DEFAULT_INDICES,texCoords:DEFAULT_TEX_COORDS}}function interpolateQuad(f,s,d){return lerp$6(lerp$6(f[0],f[1],d),lerp$6(f[3],f[2],d),s)}const vs$8=`#version 300 es
#define SHADER_NAME bitmap-layer-vertex-shader

in vec2 texCoords;
in vec3 positions;
in vec3 positions64Low;

out vec2 vTexCoord;
out vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,packUVsIntoRGB=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,fs$b=`#version 300 es
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

in vec2 vTexCoord;
in vec2 vTexPos;

out vec4 fragColor;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  if (transparentColor.a == 0.0) {
    return vec4(color, alpha);
  }
  float blendedAlpha = alpha + transparentColor.a * (1.0 - alpha);
  float highLightRatio = alpha / blendedAlpha;
  vec3 blendedRGB = mix(transparentColor.rgb, color, highLightRatio);
  return vec4(blendedRGB, blendedAlpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

${packUVsIntoRGB}

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture(bitmapTexture, uv);

  fragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(fragColor, geometry);

  if (bool(picking.isActive) && !bool(picking.isAttribute)) {
    // Since instance information is not used, we can use picking color for pixel index
    fragColor.rgb = packUVsIntoRGB(uv);
  }
}
`,defaultProps$l={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:COORDINATE_SYSTEM.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0,value:null}};let BitmapLayer$1=class extends Layer{getShaders(){return super.getShaders({vs:vs$8,fs:fs$b,modules:[project32,picking]})}initializeState(){const s=this.getAttributeManager();s.remove(["instancePickingColors"]);const d=!0;s.add({indices:{size:1,isIndexed:!0,update:_=>_.value=this.state.mesh.indices,noAlloc:d},positions:{size:3,type:"float64",fp64:this.use64bitPositions(),update:_=>_.value=this.state.mesh.positions,noAlloc:d},texCoords:{size:2,update:_=>_.value=this.state.mesh.texCoords,noAlloc:d}})}updateState({props:s,oldProps:d,changeFlags:_}){var T;const S=this.getAttributeManager();if(_.extensionsChanged&&((T=this.state.model)==null||T.destroy(),this.state.model=this._getModel(),S.invalidateAll()),s.bounds!==d.bounds){const F=this.state.mesh,M=this._createMesh();this.state.model.setVertexCount(M.vertexCount);for(const P in M)F&&F[P]!==M[P]&&S.invalidate(P);this.setState({mesh:M,...this._getCoordinateUniforms()})}else s._imageCoordinateSystem!==d._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(s){const{image:d}=this.props,_=s.info;if(!_.color||!d)return _.bitmap=null,_;const{width:S,height:T}=d;_.index=0;const F=unpackUVsFromRGB(_.color);return _.bitmap={size:{width:S,height:T},uv:F,pixel:[Math.floor(F[0]*S),Math.floor(F[1]*T)]},_}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(s){super._updateAutoHighlight({...s,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:s}=this.props;let d=s;return isRectangularBounds(s)&&(d=[[s[0],s[1]],[s[0],s[3]],[s[2],s[3]],[s[2],s[1]]]),createMesh(d,this.context.viewport.resolution)}_getModel(){return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),topology:"triangle-list",isInstanced:!1})}draw(s){const{uniforms:d,moduleParameters:_}=s,{model:S,coordinateConversion:T,bounds:F,disablePicking:M}=this.state,{image:P,desaturate:H,transparentColor:J,tintColor:K}=this.props;_.picking.isActive&&M||P&&S&&(S.setUniforms(d),S.setBindings({bitmapTexture:P}),S.setUniforms({desaturate:H,transparentColor:J.map(z=>z/255),tintColor:K.slice(0,3).map(z=>z/255),coordinateConversion:T,bounds:F}),S.draw(this.context.renderPass))}_getCoordinateUniforms(){const{LNGLAT:s,CARTESIAN:d,DEFAULT:_}=COORDINATE_SYSTEM;let{_imageCoordinateSystem:S}=this.props;if(S!==_){const{bounds:T}=this.props;if(!isRectangularBounds(T))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const F=this.context.viewport.resolution?s:d;if(S=S===s?s:d,S===s&&F===d)return{coordinateConversion:-1,bounds:T};if(S===d&&F===s){const M=lngLatToWorld$1([T[0],T[1]]),P=lngLatToWorld$1([T[2],T[3]]);return{coordinateConversion:1,bounds:[M[0],M[1],P[0],P[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}};BitmapLayer$1.layerName="BitmapLayer";BitmapLayer$1.defaultProps=defaultProps$l;function unpackUVsFromRGB(f){const[s,d,_]=f,S=(_&240)/256,T=(_&15)/16;return[(s+T)/256,(d+S)/256]}function isRectangularBounds(f){return Number.isFinite(f[0])}const vs$7=`#version 300 es
#define SHADER_NAME icon-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceSizes;
in float instanceAngles;
in vec4 instanceColors;
in vec3 instancePickingColors;
in vec4 instanceIconFrames;
in float instanceColorModes;
in vec2 instanceOffsets;
in vec2 instancePixelOffset;
uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;
out float vColorMode;
out vec4 vColor;
out vec2 vTextureCoords;
out vec2 uv;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = angle * PI / 180.0;
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vec2 iconSize = instanceIconFrames.zw;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
sizeMinPixels, sizeMaxPixels
);
float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
pixelOffset += instancePixelOffset;
pixelOffset.y *= -1.0;
if (billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vTextureCoords = mix(
instanceIconFrames.xy,
instanceIconFrames.xy + iconSize,
(positions.xy + 1.0) / 2.0
) / iconsTextureDim;
vColor = instanceColors;
DECKGL_FILTER_COLOR(vColor, geometry);
vColorMode = instanceColorModes;
}
`,fs$a=`#version 300 es
#define SHADER_NAME icon-layer-fragment-shader
precision highp float;
uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;
in float vColorMode;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec4 texColor = texture(iconsTexture, vTextureCoords);
vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
float a = texColor.a * opacity * vColor.a;
if (a < alphaCutoff) {
discard;
}
fragColor = vec4(color, a);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,DEFAULT_CANVAS_WIDTH=1024,DEFAULT_BUFFER$1=4,noop$5=()=>{},DEFAULT_SAMPLER_PARAMETERS={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},MISSING_ICON={x:0,y:0,width:0,height:0};function nextPowOfTwo$1(f){return Math.pow(2,Math.ceil(Math.log2(f)))}function resizeImage$1(f,s,d,_){const S=Math.min(d/s.width,_/s.height),T=Math.floor(s.width*S),F=Math.floor(s.height*S);return S===1?{data:s,width:T,height:F}:(f.canvas.height=F,f.canvas.width=T,f.clearRect(0,0,T,F),f.drawImage(s,0,0,s.width,s.height,0,0,T,F),{data:f.canvas,width:T,height:F})}function getIconId(f){return f&&(f.id||f.url)}function resizeTexture(f,s,d,_){const{width:S,height:T,device:F}=f,M=F.createTexture({format:"rgba8unorm",width:s,height:d,sampler:_}),P=F.createCommandEncoder();return P.copyTextureToTexture({source:f,destination:M,width:S,height:T}),P.finish(),f.destroy(),M}function buildRowMapping(f,s,d){for(let _=0;_<s.length;_++){const{icon:S,xOffset:T}=s[_],F=getIconId(S);f[F]={...S,x:T,y:d}}}function buildMapping$1({icons:f,buffer:s,mapping:d={},xOffset:_=0,yOffset:S=0,rowHeight:T=0,canvasWidth:F}){let M=[];for(let P=0;P<f.length;P++){const H=f[P],J=getIconId(H);if(!d[J]){const{height:K,width:z}=H;_+z+s>F&&(buildRowMapping(d,M,S),_=0,S=T+S+s,T=0,M=[]),M.push({icon:H,xOffset:_}),_=_+z+s,T=Math.max(T,K)}}return M.length>0&&buildRowMapping(d,M,S),{mapping:d,rowHeight:T,xOffset:_,yOffset:S,canvasWidth:F,canvasHeight:nextPowOfTwo$1(T+S+s)}}function getDiffIcons(f,s,d){if(!f||!s)return null;d=d||{};const _={},{iterable:S,objectInfo:T}=createIterable(f);for(const F of S){T.index++;const M=s(F,T),P=getIconId(M);if(!M)throw new Error("Icon is missing.");if(!M.url)throw new Error("Icon url is missing.");!_[P]&&(!d[P]||M.url!==d[P].url)&&(_[P]={...M,source:F,sourceIndex:T.index})}return _}class IconManager{constructor(s,{onUpdate:d=noop$5,onError:_=noop$5}){this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._textureParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=DEFAULT_BUFFER$1,this._canvasWidth=DEFAULT_CANVAS_WIDTH,this._canvasHeight=0,this._canvas=null,this.device=s,this.onUpdate=d,this.onError=_}finalize(){var s;(s=this._texture)==null||s.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(s){const d=this._autoPacking?getIconId(s):s;return this._mapping[d]||MISSING_ICON}setProps({loadOptions:s,autoPacking:d,iconAtlas:_,iconMapping:S,textureParameters:T}){var F;s&&(this._loadOptions=s),d!==void 0&&(this._autoPacking=d),S&&(this._mapping=S),_&&((F=this._texture)==null||F.delete(),this._texture=null,this._externalTexture=_),T&&(this._textureParameters=T)}get isLoaded(){return this._pendingCount===0}packIcons(s,d){if(!this._autoPacking||typeof document>"u")return;const _=Object.values(getDiffIcons(s,d,this._mapping)||{});if(_.length>0){const{mapping:S,xOffset:T,yOffset:F,rowHeight:M,canvasHeight:P}=buildMapping$1({icons:_,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=M,this._mapping=S,this._xOffset=T,this._yOffset=F,this._canvasHeight=P,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",width:this._canvasWidth,height:this._canvasHeight,sampler:this._textureParameters||DEFAULT_SAMPLER_PARAMETERS})),this._texture.height!==this._canvasHeight&&(this._texture=resizeTexture(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||DEFAULT_SAMPLER_PARAMETERS)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(_)}}_loadIcons(s){const d=this._canvas.getContext("2d",{willReadFrequently:!0});for(const _ of s)this._pendingCount++,load$3(_.url,this._loadOptions).then(S=>{const T=getIconId(_),F=this._mapping[T],{x:M,y:P,width:H,height:J}=F,{data:K,width:z,height:oe}=resizeImage$1(d,S,H,J);this._texture.setSubImageData({data:K,x:M+(H-z)/2,y:P+(J-oe)/2,width:z,height:oe}),F.width=z,F.height=oe,this._texture.generateMipmap(),this.onUpdate()}).catch(S=>{this.onError({url:_.url,source:_.source,sourceIndex:_.sourceIndex,loadOptions:this._loadOptions,error:S})}).finally(()=>{this._pendingCount--})}}const DEFAULT_COLOR$5=[0,0,0,255],defaultProps$k={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:f=>f.position},getIcon:{type:"accessor",value:f=>f.icon},getColor:{type:"accessor",value:DEFAULT_COLOR$5},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}};class IconLayer extends Layer{getShaders(){return super.getShaders({vs:vs$7,fs:fs$a,modules:[project32,picking]})}initializeState(){this.state={iconManager:new IconManager(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:DEFAULT_COLOR$5},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(s){var oe;super.updateState(s);const{props:d,oldProps:_,changeFlags:S}=s,T=this.getAttributeManager(),{iconAtlas:F,iconMapping:M,data:P,getIcon:H,textureParameters:J}=d,{iconManager:K}=this.state;if(typeof F=="string")return;const z=F||this.internalState.isAsyncPropLoading("iconAtlas");K.setProps({loadOptions:d.loadOptions,autoPacking:!z,iconAtlas:F,iconMapping:z?M:null,textureParameters:J}),z?_.iconMapping!==d.iconMapping&&T.invalidate("getIcon"):(S.dataChanged||S.updateTriggersChanged&&(S.updateTriggersChanged.all||S.updateTriggersChanged.getIcon))&&K.packIcons(P,H),S.extensionsChanged&&((oe=this.state.model)==null||oe.destroy(),this.state.model=this._getModel(),T.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(s){super.finalizeState(s),this.state.iconManager.finalize()}draw({uniforms:s}){const{sizeScale:d,sizeMinPixels:_,sizeMaxPixels:S,sizeUnits:T,billboard:F,alphaCutoff:M}=this.props,{iconManager:P}=this.state,H=P.getTexture();if(H){const J=this.state.model;J.setBindings({iconsTexture:H}),J.setUniforms(s),J.setUniforms({iconsTextureDim:[H.width,H.height],sizeUnits:UNIT[T],sizeScale:d,sizeMinPixels:_,sizeMaxPixels:S,billboard:F,alphaCutoff:M}),J.draw(this.context.renderPass)}}_getModel(){const s=[-1,-1,1,-1,-1,1,1,1];return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Geometry$1({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array(s)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(s){var _;const d=(_=this.getCurrentLayer())==null?void 0:_.props.onIconError;d?d(s):defaultLogger.error(s.error.message)()}getInstanceOffset(s){const{width:d,height:_,anchorX:S=d/2,anchorY:T=_/2}=this.state.iconManager.getIconMapping(s);return[d/2-S,_/2-T]}getInstanceColorMode(s){return this.state.iconManager.getIconMapping(s).mask?1:0}getInstanceIconFrame(s){const{x:d,y:_,width:S,height:T}=this.state.iconManager.getIconMapping(s);return[d,_,S,T]}}IconLayer.defaultProps=defaultProps$k;IconLayer.layerName="IconLayer";const vs$6=`#version 300 es
#define SHADER_NAME line-layer-vertex-shader
in vec3 positions;
in vec3 instanceSourcePositions;
in vec3 instanceTargetPositions;
in vec3 instanceSourcePositions64Low;
in vec3 instanceTargetPositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in float instanceWidths;
uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;
out vec4 vColor;
out vec2 uv;
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
return dir_screenspace * offset_direction * width / 2.0;
}
vec3 splitLine(vec3 a, vec3 b, float x) {
float t = (x - a.x) / (b.x - a.x);
return vec3(x, mix(a.yz, b.yz, t));
}
void main(void) {
geometry.worldPosition = instanceSourcePositions;
geometry.worldPositionAlt = instanceTargetPositions;
vec3 source_world = instanceSourcePositions;
vec3 target_world = instanceTargetPositions;
vec3 source_world_64low = instanceSourcePositions64Low;
vec3 target_world_64low = instanceTargetPositions64Low;
if (useShortestPath > 0.5 || useShortestPath < -0.5) {
source_world.x = mod(source_world.x + 180., 360.0) - 180.;
target_world.x = mod(target_world.x + 180., 360.0) - 180.;
float deltaLng = target_world.x - source_world.x;
if (deltaLng * useShortestPath > 180.) {
source_world.x += 360. * useShortestPath;
source_world = splitLine(source_world, target_world, 180. * useShortestPath);
source_world_64low = vec3(0.0);
} else if (deltaLng * useShortestPath < -180.) {
target_world.x += 360. * useShortestPath;
target_world = splitLine(source_world, target_world, 180. * useShortestPath);
target_world_64low = vec3(0.0);
} else if (useShortestPath < 0.) {
gl_Position = vec4(0.);
return;
}
}
vec4 source_commonspace;
vec4 target_commonspace;
vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
float segmentIndex = positions.x;
vec4 p = mix(source, target, segmentIndex);
geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
uv = positions.xy;
geometry.uv = uv;
geometry.pickingColor = instancePickingColors;
float widthPixels = clamp(
project_size_to_pixel(instanceWidths * widthScale, widthUnits),
widthMinPixels, widthMaxPixels
);
vec3 offset = vec3(
getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
0.0);
DECKGL_FILTER_SIZE(offset, geometry);
DECKGL_FILTER_GL_POSITION(p, geometry);
gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,fs$9=`#version 300 es
#define SHADER_NAME line-layer-fragment-shader
precision highp float;
in vec4 vColor;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,DEFAULT_COLOR$4=[0,0,0,255],defaultProps$j={getSourcePosition:{type:"accessor",value:f=>f.sourcePosition},getTargetPosition:{type:"accessor",value:f=>f.targetPosition},getColor:{type:"accessor",value:DEFAULT_COLOR$4},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class LineLayer extends Layer{getBounds(){var s;return(s=this.getAttributeManager())==null?void 0:s.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:vs$6,fs:fs$9,modules:[project32,picking]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(s){var d;super.updateState(s),s.changeFlags.extensionsChanged&&((d=this.state.model)==null||d.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:s}){const{widthUnits:d,widthScale:_,widthMinPixels:S,widthMaxPixels:T,wrapLongitude:F}=this.props,M=this.state.model;M.setUniforms(s),M.setUniforms({widthUnits:UNIT[d],widthScale:_,widthMinPixels:S,widthMaxPixels:T,useShortestPath:F?1:0}),M.draw(this.context.renderPass),F&&(M.setUniforms({useShortestPath:-1}),M.draw(this.context.renderPass))}_getModel(){const s=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Geometry$1({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(s)}}}),isInstanced:!0})}}LineLayer.layerName="LineLayer";LineLayer.defaultProps=defaultProps$j;const vs$5=`#version 300 es
#define SHADER_NAME scatterplot-layer-vertex-shader
in vec3 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceRadius;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;
out vec4 vFillColor;
out vec4 vLineColor;
out vec2 unitPosition;
out float innerUnitRadius;
out float outerRadiusPixels;
void main(void) {
geometry.worldPosition = instancePositions;
outerRadiusPixels = clamp(
project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
radiusMinPixels, radiusMaxPixels
);
float lineWidthPixels = clamp(
project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
lineWidthMinPixels, lineWidthMaxPixels
);
outerRadiusPixels += stroked * lineWidthPixels / 2.0;
float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
unitPosition = edgePadding * positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
if (billboard) {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = edgePadding * positions * outerRadiusPixels;
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,fs$8=`#version 300 es
#define SHADER_NAME scatterplot-layer-fragment-shader
precision highp float;
uniform bool filled;
uniform float stroked;
uniform bool antialiasing;
in vec4 vFillColor;
in vec4 vLineColor;
in vec2 unitPosition;
in float innerUnitRadius;
in float outerRadiusPixels;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition;
float distToCenter = length(unitPosition) * outerRadiusPixels;
float inCircle = antialiasing ?
smoothedge(distToCenter, outerRadiusPixels) :
step(distToCenter, outerRadiusPixels);
if (inCircle == 0.0) {
discard;
}
if (stroked > 0.5) {
float isLine = antialiasing ?
smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
step(innerUnitRadius * outerRadiusPixels, distToCenter);
if (filled) {
fragColor = mix(vFillColor, vLineColor, isLine);
} else {
if (isLine == 0.0) {
discard;
}
fragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
}
} else if (!filled) {
discard;
} else {
fragColor = vFillColor;
}
fragColor.a *= inCircle;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,DEFAULT_COLOR$3=[0,0,0,255],defaultProps$i={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:f=>f.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:DEFAULT_COLOR$3},getLineColor:{type:"accessor",value:DEFAULT_COLOR$3},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class ScatterplotLayer extends Layer{getShaders(){return super.getShaders({vs:vs$5,fs:fs$8,modules:[project32,picking]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(s){var d;super.updateState(s),s.changeFlags.extensionsChanged&&((d=this.state.model)==null||d.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:s}){const{radiusUnits:d,radiusScale:_,radiusMinPixels:S,radiusMaxPixels:T,stroked:F,filled:M,billboard:P,antialiasing:H,lineWidthUnits:J,lineWidthScale:K,lineWidthMinPixels:z,lineWidthMaxPixels:oe}=this.props,se=this.state.model;se.setUniforms(s),se.setUniforms({stroked:F?1:0,filled:M,billboard:P,antialiasing:H,radiusUnits:UNIT[d],radiusScale:_,radiusMinPixels:S,radiusMaxPixels:T,lineWidthUnits:UNIT[J],lineWidthScale:K,lineWidthMinPixels:z,lineWidthMaxPixels:oe}),se.draw(this.context.renderPass)}_getModel(){const s=[-1,-1,0,1,-1,0,-1,1,0,1,1,0];return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Geometry$1({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(s)}}}),isInstanced:!0})}}ScatterplotLayer.defaultProps=defaultProps$i;ScatterplotLayer.layerName="ScatterplotLayer";const WINDING={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function modifyPolygonWindingDirection(f,s,d={}){return getPolygonWindingDirection(f,d)!==s?(reversePolygon(f,d),!0):!1}function getPolygonWindingDirection(f,s={}){return Math.sign(getPolygonSignedArea(f,s))}const DimIndex={x:0,y:1,z:2};function getPolygonSignedArea(f,s={}){const{start:d=0,end:_=f.length,plane:S="xy"}=s,T=s.size||2;let F=0;const M=DimIndex[S[0]],P=DimIndex[S[1]];for(let H=d,J=_-T;H<_;H+=T)F+=(f[H+M]-f[J+M])*(f[H+P]+f[J+P]),J=H;return F/2}function reversePolygon(f,s){const{start:d=0,end:_=f.length,size:S=2}=s,T=(_-d)/S,F=Math.floor(T/2);for(let M=0;M<F;++M){const P=d+M*S,H=d+(T-1-M)*S;for(let J=0;J<S;++J){const K=f[P+J];f[P+J]=f[H+J],f[H+J]=K}}}function push(f,s){const d=s.length,_=f.length;if(_>0){let S=!0;for(let T=0;T<d;T++)if(f[_-d+T]!==s[T]){S=!1;break}if(S)return!1}for(let S=0;S<d;S++)f[_+S]=s[S];return!0}function copy$1(f,s){const d=s.length;for(let _=0;_<d;_++)f[_]=s[_]}function getPointAtIndex(f,s,d,_,S=[]){const T=_+s*d;for(let F=0;F<d;F++)S[F]=f[T+F];return S}function intersect$2(f,s,d,_,S=[]){let T,F;if(d&8)T=(_[3]-f[1])/(s[1]-f[1]),F=3;else if(d&4)T=(_[1]-f[1])/(s[1]-f[1]),F=1;else if(d&2)T=(_[2]-f[0])/(s[0]-f[0]),F=2;else if(d&1)T=(_[0]-f[0])/(s[0]-f[0]),F=0;else return null;for(let M=0;M<f.length;M++)S[M]=(F&1)===M?_[F]:T*(s[M]-f[M])+f[M];return S}function bitCode(f,s){let d=0;return f[0]<s[0]?d|=1:f[0]>s[2]&&(d|=2),f[1]<s[1]?d|=4:f[1]>s[3]&&(d|=8),d}function cutPolylineByGrid(f,s){const{size:d=2,broken:_=!1,gridResolution:S=10,gridOffset:T=[0,0],startIndex:F=0,endIndex:M=f.length}=s||{},P=(M-F)/d;let H=[];const J=[H],K=getPointAtIndex(f,0,d,F);let z,oe;const se=getGridCell(K,S,T,[]),ae=[];push(H,K);for(let ge=1;ge<P;ge++){for(z=getPointAtIndex(f,ge,d,F,z),oe=bitCode(z,se);oe;){intersect$2(K,z,oe,se,ae);const pe=bitCode(ae,se);pe&&(intersect$2(K,ae,pe,se,ae),oe=pe),push(H,ae),copy$1(K,ae),moveToNeighborCell(se,S,oe),_&&H.length>d&&(H=[],J.push(H),push(H,K)),oe=bitCode(z,se)}push(H,z),copy$1(K,z)}return _?J:J[0]}const TYPE_INSIDE=0,TYPE_BORDER=1;function cutPolygonByGrid(f,s=null,d){if(!f.length)return[];const{size:_=2,gridResolution:S=10,gridOffset:T=[0,0],edgeTypes:F=!1}=d||{},M=[],P=[{pos:f,types:F?new Array(f.length/_).fill(TYPE_BORDER):null,holes:s||[]}],H=[[],[]];let J=[];for(;P.length;){const{pos:K,types:z,holes:oe}=P.shift();getBoundingBox$1(K,_,oe[0]||K.length,H),J=getGridCell(H[0],S,T,J);const se=bitCode(H[1],J);if(se){let ae=bisectPolygon(K,z,_,0,oe[0]||K.length,J,se);const ge={pos:ae[0].pos,types:ae[0].types,holes:[]},pe={pos:ae[1].pos,types:ae[1].types,holes:[]};P.push(ge,pe);for(let he=0;he<oe.length;he++)ae=bisectPolygon(K,z,_,oe[he],oe[he+1]||K.length,J,se),ae[0]&&(ge.holes.push(ge.pos.length),ge.pos=concatInPlace(ge.pos,ae[0].pos),F&&(ge.types=concatInPlace(ge.types,ae[0].types))),ae[1]&&(pe.holes.push(pe.pos.length),pe.pos=concatInPlace(pe.pos,ae[1].pos),F&&(pe.types=concatInPlace(pe.types,ae[1].types)))}else{const ae={positions:K};F&&(ae.edgeTypes=z),oe.length&&(ae.holeIndices=oe),M.push(ae)}}return M}function bisectPolygon(f,s,d,_,S,T,F){const M=(S-_)/d,P=[],H=[],J=[],K=[],z=[];let oe,se,ae;const ge=getPointAtIndex(f,M-1,d,_);let pe=Math.sign(F&8?ge[1]-T[3]:ge[0]-T[2]),he=s&&s[M-1],ve=0,be=0;for(let Re=0;Re<M;Re++)oe=getPointAtIndex(f,Re,d,_,oe),se=Math.sign(F&8?oe[1]-T[3]:oe[0]-T[2]),ae=s&&s[_/d+Re],se&&pe&&pe!==se&&(intersect$2(ge,oe,F,T,z),push(P,z)&&J.push(he),push(H,z)&&K.push(he)),se<=0?(push(P,oe)&&J.push(ae),ve-=se):J.length&&(J[J.length-1]=TYPE_INSIDE),se>=0?(push(H,oe)&&K.push(ae),be+=se):K.length&&(K[K.length-1]=TYPE_INSIDE),copy$1(ge,oe),pe=se,he=ae;return[ve?{pos:P,types:s&&J}:null,be?{pos:H,types:s&&K}:null]}function getGridCell(f,s,d,_){const S=Math.floor((f[0]-d[0])/s)*s+d[0],T=Math.floor((f[1]-d[1])/s)*s+d[1];return _[0]=S,_[1]=T,_[2]=S+s,_[3]=T+s,_}function moveToNeighborCell(f,s,d){d&8?(f[1]+=s,f[3]+=s):d&4?(f[1]-=s,f[3]-=s):d&2?(f[0]+=s,f[2]+=s):d&1&&(f[0]-=s,f[2]-=s)}function getBoundingBox$1(f,s,d,_){let S=1/0,T=-1/0,F=1/0,M=-1/0;for(let P=0;P<d;P+=s){const H=f[P],J=f[P+1];S=H<S?H:S,T=H>T?H:T,F=J<F?J:F,M=J>M?J:M}return _[0][0]=S,_[0][1]=F,_[1][0]=T,_[1][1]=M,_}function concatInPlace(f,s){for(let d=0;d<s.length;d++)f.push(s[d]);return f}const DEFAULT_MAX_LATITUDE=85.051129;function cutPolylineByMercatorBounds(f,s){const{size:d=2,startIndex:_=0,endIndex:S=f.length,normalize:T=!0}=s||{},F=f.slice(_,S);wrapLongitudesForShortestPath(F,d,0,S-_);const M=cutPolylineByGrid(F,{size:d,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(T)for(const P of M)shiftLongitudesIntoRange(P,d);return M}function cutPolygonByMercatorBounds(f,s=null,d){const{size:_=2,normalize:S=!0,edgeTypes:T=!1}=d||{};s=s||[];const F=[],M=[];let P=0,H=0;for(let K=0;K<=s.length;K++){const z=s[K]||f.length,oe=H,se=findSplitIndex(f,_,P,z);for(let ae=se;ae<z;ae++)F[H++]=f[ae];for(let ae=P;ae<se;ae++)F[H++]=f[ae];wrapLongitudesForShortestPath(F,_,oe,H),insertPoleVertices(F,_,oe,H,d==null?void 0:d.maxLatitude),P=z,M[K]=H}M.pop();const J=cutPolygonByGrid(F,M,{size:_,gridResolution:360,gridOffset:[-180,-180],edgeTypes:T});if(S)for(const K of J)shiftLongitudesIntoRange(K.positions,_);return J}function findSplitIndex(f,s,d,_){let S=-1,T=-1;for(let F=d+1;F<_;F+=s){const M=Math.abs(f[F]);M>S&&(S=M,T=F-1)}return T}function insertPoleVertices(f,s,d,_,S=DEFAULT_MAX_LATITUDE){const T=f[d],F=f[_-s];if(Math.abs(T-F)>180){const M=getPointAtIndex(f,0,s,d);M[0]+=Math.round((F-T)/360)*360,push(f,M),M[1]=Math.sign(M[1])*S,push(f,M),M[0]=T,push(f,M)}}function wrapLongitudesForShortestPath(f,s,d,_){let S=f[0],T;for(let F=d;F<_;F+=s){T=f[F];const M=T-S;(M>180||M<-180)&&(T-=Math.round(M/360)*360),f[F]=S=T}}function shiftLongitudesIntoRange(f,s){let d;const _=f.length/s;for(let T=0;T<_&&(d=f[T*s],(d+180)%360===0);T++);const S=-Math.round(d/360)*360;if(S!==0)for(let T=0;T<_;T++)f[T*s]+=S}function normalizePath(f,s,d,_){let S;if(Array.isArray(f[0])){const T=f.length*s;S=new Array(T);for(let F=0;F<f.length;F++)for(let M=0;M<s;M++)S[F*s+M]=f[F][M]||0}else S=f;return d?cutPolylineByGrid(S,{size:s,gridResolution:d}):_?cutPolylineByMercatorBounds(S,{size:s}):S}const START_CAP=1,END_CAP=2,INVALID=4;class PathTesselator extends Tesselator{constructor(s){super({...s,attributes:{positions:{size:3,padding:18,initialize:!0,type:s.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(s){return this.attributes[s]}getGeometryFromBuffer(s){return this.normalize?super.getGeometryFromBuffer(s):null}normalizeGeometry(s){return this.normalize?normalizePath(s,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):s}getGeometrySize(s){if(isCut$1(s)){let _=0;for(const S of s)_+=this.getGeometrySize(S);return _}const d=this.getPathLength(s);return d<2?0:this.isClosed(s)?d<3?0:d+2:d}updateGeometryAttributes(s,d){if(d.geometrySize!==0)if(s&&isCut$1(s))for(const _ of s){const S=this.getGeometrySize(_);d.geometrySize=S,this.updateGeometryAttributes(_,d),d.vertexStart+=S}else this._updateSegmentTypes(s,d),this._updatePositions(s,d)}_updateSegmentTypes(s,d){const _=this.attributes.segmentTypes,S=s?this.isClosed(s):!1,{vertexStart:T,geometrySize:F}=d;_.fill(0,T,T+F),S?(_[T]=INVALID,_[T+F-2]=INVALID):(_[T]+=START_CAP,_[T+F-2]+=END_CAP),_[T+F-1]=INVALID}_updatePositions(s,d){const{positions:_}=this.attributes;if(!_||!s)return;const{vertexStart:S,geometrySize:T}=d,F=new Array(3);for(let M=S,P=0;P<T;M++,P++)this.getPointOnPath(s,P,F),_[M*3]=F[0],_[M*3+1]=F[1],_[M*3+2]=F[2]}getPathLength(s){return s.length/this.positionSize}getPointOnPath(s,d,_=[]){const{positionSize:S}=this;d*S>=s.length&&(d+=1-s.length/S);const T=d*S;return _[0]=s[T],_[1]=s[T+1],_[2]=S===3&&s[T+2]||0,_}isClosed(s){if(!this.normalize)return!!this.opts.loop;const{positionSize:d}=this,_=s.length-d;return s[0]===s[_]&&s[1]===s[_+1]&&(d===2||s[2]===s[_+2])}}function isCut$1(f){return Array.isArray(f[0])}const vs$4=`#version 300 es
#define SHADER_NAME path-layer-vertex-shader
in vec2 positions;
in float instanceTypes;
in vec3 instanceStartPositions;
in vec3 instanceEndPositions;
in vec3 instanceLeftPositions;
in vec3 instanceRightPositions;
in vec3 instanceLeftPositions64Low;
in vec3 instanceStartPositions64Low;
in vec3 instanceEndPositions64Low;
in vec3 instanceRightPositions64Low;
in float instanceStrokeWidths;
in vec4 instanceColors;
in vec3 instancePickingColors;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;
uniform float opacity;
out vec4 vColor;
out vec2 vCornerOffset;
out float vMiterLength;
out vec2 vPathPosition;
out float vPathLength;
out float vJointType;
const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);
float flipIfTrue(bool flag) {
return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
vec2 width
) {
bool isEnd = positions.x > 0.0;
float sideOfPath = positions.y;
float isJoint = float(sideOfPath == 0.0);
vec3 deltaA3 = (currPoint - prevPoint);
vec3 deltaB3 = (nextPoint - currPoint);
mat3 rotationMatrix;
bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
if (needsRotation) {
deltaA3 = deltaA3 * rotationMatrix;
deltaB3 = deltaB3 * rotationMatrix;
}
vec2 deltaA = deltaA3.xy / width;
vec2 deltaB = deltaB3.xy / width;
float lenA = length(deltaA);
float lenB = length(deltaB);
vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);
vec2 perpA = vec2(-dirA.y, dirA.x);
vec2 perpB = vec2(-dirB.y, dirB.x);
vec2 tangent = dirA + dirB;
tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
vec2 miterVec = vec2(-tangent.y, tangent.x);
vec2 dir = isEnd ? dirA : dirB;
vec2 perp = isEnd ? perpA : perpB;
float L = isEnd ? lenA : lenB;
float sinHalfA = abs(dot(miterVec, perp));
float cosHalfA = abs(dot(dirA, miterVec));
float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
float cornerPosition = sideOfPath * turnDirection;
float miterSize = 1.0 / max(sinHalfA, EPSILON);
miterSize = mix(
min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
miterSize,
step(0.0, cornerPosition)
);
vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
* (sideOfPath + isJoint * turnDirection);
bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
bool isCap = isStartCap || isEndCap;
if (isCap) {
offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
vJointType = capType;
} else {
vJointType = jointType;
}
vPathLength = L;
vCornerOffset = offsetVec;
vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
vMiterLength = isCap ? isJoint : vMiterLength;
vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
vPathPosition = vec2(
dot(offsetFromStartOfPath, perp),
dot(offsetFromStartOfPath, dir)
);
geometry.uv = vPathPosition;
float isValid = step(instanceTypes, 3.5);
vec3 offset = vec3(offsetVec * width * isValid, 0.0);
if (needsRotation) {
offset = rotationMatrix * offset;
}
return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
if (position.w < EPSILON) {
float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
position = refPosition + (position - refPosition) * r;
}
}
void main() {
geometry.pickingColor = instancePickingColors;
vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
float isEnd = positions.x;
vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);
vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);
vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);
geometry.worldPosition = currPosition;
vec2 widthPixels = vec2(clamp(
project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
widthMinPixels, widthMaxPixels) / 2.0);
vec3 width;
if (billboard) {
vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);
clipLine(prevPositionScreen, currPositionScreen);
clipLine(nextPositionScreen, currPositionScreen);
clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));
width = vec3(widthPixels, 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(
prevPositionScreen.xyz / prevPositionScreen.w,
currPositionScreen.xyz / currPositionScreen.w,
nextPositionScreen.xyz / nextPositionScreen.w,
project_pixel_size_to_clipspace(width.xy)
);
DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
} else {
prevPosition = project_position(prevPosition, prevPosition64Low);
currPosition = project_position(currPosition, currPosition64Low);
nextPosition = project_position(nextPosition, nextPosition64Low);
width = vec3(project_pixel_size(widthPixels), 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
geometry.position = vec4(currPosition + offset, 1.0);
gl_Position = project_common_position_to_clipspace(geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,fs$7=`#version 300 es
#define SHADER_NAME path-layer-fragment-shader
precision highp float;
uniform float miterLimit;
in vec4 vColor;
in vec2 vCornerOffset;
in float vMiterLength;
in vec2 vPathPosition;
in float vPathLength;
in float vJointType;
out vec4 fragColor;
void main(void) {
geometry.uv = vPathPosition;
if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
discard;
}
if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
discard;
}
}
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,DEFAULT_COLOR$2=[0,0,0,255],defaultProps$h={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:f=>f.path},getColor:{type:"accessor",value:DEFAULT_COLOR$2},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},ATTRIBUTE_TRANSITION$1={enter:(f,s)=>s.length?s.subarray(s.length-f.length):f};class PathLayer extends Layer{getShaders(){return super.getShaders({vs:vs$4,fs:fs$7,modules:[project32,picking]})}get wrapLongitude(){return!1}getBounds(){var s;return(s=this.getAttributeManager())==null?void 0:s.getBounds(["vertexPositions"])}initializeState(){this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:ATTRIBUTE_TRANSITION$1,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:ATTRIBUTE_TRANSITION$1,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:ATTRIBUTE_TRANSITION$1,defaultValue:DEFAULT_COLOR$2},instancePickingColors:{size:4,type:"uint8",accessor:(_,{index:S,target:T})=>this.encodePickingColor(_&&_.__source?_.__source.index:S,T)}}),this.setState({pathTesselator:new PathTesselator({fp64:this.use64bitPositions()})})}updateState(s){var F;super.updateState(s);const{props:d,changeFlags:_}=s,S=this.getAttributeManager();if(_.dataChanged||_.updateTriggersChanged&&(_.updateTriggersChanged.all||_.updateTriggersChanged.getPath)){const{pathTesselator:M}=this.state,P=d.data.attributes||{};M.updateGeometry({data:d.data,geometryBuffer:P.getPath,buffers:P,normalize:!d._pathType,loop:d._pathType==="loop",getGeometry:d.getPath,positionFormat:d.positionFormat,wrapLongitude:d.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:_.dataChanged}),this.setState({numInstances:M.instanceCount,startIndices:M.vertexStarts}),_.dataChanged||S.invalidateAll()}_.extensionsChanged&&((F=this.state.model)==null||F.destroy(),this.state.model=this._getModel(),S.invalidateAll())}getPickingInfo(s){const d=super.getPickingInfo(s),{index:_}=d,S=this.props.data;return S[0]&&S[0].__source&&(d.object=S.find(T=>T.__source.index===_)),d}disablePickingIndex(s){const d=this.props.data;if(d[0]&&d[0].__source)for(let _=0;_<d.length;_++)d[_].__source.index===s&&this._disablePickingIndex(_);else super.disablePickingIndex(s)}draw({uniforms:s}){const{jointRounded:d,capRounded:_,billboard:S,miterLimit:T,widthUnits:F,widthScale:M,widthMinPixels:P,widthMaxPixels:H}=this.props,J=this.state.model;J.setUniforms(s),J.setUniforms({jointType:Number(d),capType:Number(_),billboard:S,widthUnits:UNIT[F],widthScale:M,miterLimit:T,widthMinPixels:P,widthMaxPixels:H}),J.draw(this.context.renderPass)}_getModel(){const s=[0,1,2,1,4,2,1,3,4,3,5,4],d=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Geometry$1({topology:"triangle-list",attributes:{indices:new Uint16Array(s),positions:{value:new Float32Array(d),size:2}}}),isInstanced:!0})}calculatePositions(s){const{pathTesselator:d}=this.state;s.startIndices=d.vertexStarts,s.value=d.get("positions")}calculateSegmentTypes(s){const{pathTesselator:d}=this.state;s.startIndices=d.vertexStarts,s.value=d.get("segmentTypes")}}PathLayer.defaultProps=defaultProps$h;PathLayer.layerName="PathLayer";var earcut$2={exports:{}};earcut$2.exports=earcut;earcut$2.exports.default=earcut;function earcut(f,s,d){d=d||2;var _=s&&s.length,S=_?s[0]*d:f.length,T=linkedList(f,0,S,d,!0),F=[];if(!T||T.next===T.prev)return F;var M,P,H,J,K,z,oe;if(_&&(T=eliminateHoles(f,s,T,d)),f.length>80*d){M=H=f[0],P=J=f[1];for(var se=d;se<S;se+=d)K=f[se],z=f[se+1],K<M&&(M=K),z<P&&(P=z),K>H&&(H=K),z>J&&(J=z);oe=Math.max(H-M,J-P),oe=oe!==0?32767/oe:0}return earcutLinked(T,F,d,M,P,oe,0),F}function linkedList(f,s,d,_,S){var T,F;if(S===signedArea(f,s,d,_)>0)for(T=s;T<d;T+=_)F=insertNode(T,f[T],f[T+1],F);else for(T=d-_;T>=s;T-=_)F=insertNode(T,f[T],f[T+1],F);return F&&equals$1(F,F.next)&&(removeNode(F),F=F.next),F}function filterPoints(f,s){if(!f)return f;s||(s=f);var d=f,_;do if(_=!1,!d.steiner&&(equals$1(d,d.next)||area$2(d.prev,d,d.next)===0)){if(removeNode(d),d=s=d.prev,d===d.next)break;_=!0}else d=d.next;while(_||d!==s);return s}function earcutLinked(f,s,d,_,S,T,F){if(f){!F&&T&&indexCurve(f,_,S,T);for(var M=f,P,H;f.prev!==f.next;){if(P=f.prev,H=f.next,T?isEarHashed(f,_,S,T):isEar(f)){s.push(P.i/d|0),s.push(f.i/d|0),s.push(H.i/d|0),removeNode(f),f=H.next,M=H.next;continue}if(f=H,f===M){F?F===1?(f=cureLocalIntersections(filterPoints(f),s,d),earcutLinked(f,s,d,_,S,T,2)):F===2&&splitEarcut(f,s,d,_,S,T):earcutLinked(filterPoints(f),s,d,_,S,T,1);break}}}}function isEar(f){var s=f.prev,d=f,_=f.next;if(area$2(s,d,_)>=0)return!1;for(var S=s.x,T=d.x,F=_.x,M=s.y,P=d.y,H=_.y,J=S<T?S<F?S:F:T<F?T:F,K=M<P?M<H?M:H:P<H?P:H,z=S>T?S>F?S:F:T>F?T:F,oe=M>P?M>H?M:H:P>H?P:H,se=_.next;se!==s;){if(se.x>=J&&se.x<=z&&se.y>=K&&se.y<=oe&&pointInTriangle(S,M,T,P,F,H,se.x,se.y)&&area$2(se.prev,se,se.next)>=0)return!1;se=se.next}return!0}function isEarHashed(f,s,d,_){var S=f.prev,T=f,F=f.next;if(area$2(S,T,F)>=0)return!1;for(var M=S.x,P=T.x,H=F.x,J=S.y,K=T.y,z=F.y,oe=M<P?M<H?M:H:P<H?P:H,se=J<K?J<z?J:z:K<z?K:z,ae=M>P?M>H?M:H:P>H?P:H,ge=J>K?J>z?J:z:K>z?K:z,pe=zOrder(oe,se,s,d,_),he=zOrder(ae,ge,s,d,_),ve=f.prevZ,be=f.nextZ;ve&&ve.z>=pe&&be&&be.z<=he;){if(ve.x>=oe&&ve.x<=ae&&ve.y>=se&&ve.y<=ge&&ve!==S&&ve!==F&&pointInTriangle(M,J,P,K,H,z,ve.x,ve.y)&&area$2(ve.prev,ve,ve.next)>=0||(ve=ve.prevZ,be.x>=oe&&be.x<=ae&&be.y>=se&&be.y<=ge&&be!==S&&be!==F&&pointInTriangle(M,J,P,K,H,z,be.x,be.y)&&area$2(be.prev,be,be.next)>=0))return!1;be=be.nextZ}for(;ve&&ve.z>=pe;){if(ve.x>=oe&&ve.x<=ae&&ve.y>=se&&ve.y<=ge&&ve!==S&&ve!==F&&pointInTriangle(M,J,P,K,H,z,ve.x,ve.y)&&area$2(ve.prev,ve,ve.next)>=0)return!1;ve=ve.prevZ}for(;be&&be.z<=he;){if(be.x>=oe&&be.x<=ae&&be.y>=se&&be.y<=ge&&be!==S&&be!==F&&pointInTriangle(M,J,P,K,H,z,be.x,be.y)&&area$2(be.prev,be,be.next)>=0)return!1;be=be.nextZ}return!0}function cureLocalIntersections(f,s,d){var _=f;do{var S=_.prev,T=_.next.next;!equals$1(S,T)&&intersects$1(S,_,_.next,T)&&locallyInside(S,T)&&locallyInside(T,S)&&(s.push(S.i/d|0),s.push(_.i/d|0),s.push(T.i/d|0),removeNode(_),removeNode(_.next),_=f=T),_=_.next}while(_!==f);return filterPoints(_)}function splitEarcut(f,s,d,_,S,T){var F=f;do{for(var M=F.next.next;M!==F.prev;){if(F.i!==M.i&&isValidDiagonal(F,M)){var P=splitPolygon(F,M);F=filterPoints(F,F.next),P=filterPoints(P,P.next),earcutLinked(F,s,d,_,S,T,0),earcutLinked(P,s,d,_,S,T,0);return}M=M.next}F=F.next}while(F!==f)}function eliminateHoles(f,s,d,_){var S=[],T,F,M,P,H;for(T=0,F=s.length;T<F;T++)M=s[T]*_,P=T<F-1?s[T+1]*_:f.length,H=linkedList(f,M,P,_,!1),H===H.next&&(H.steiner=!0),S.push(getLeftmost(H));for(S.sort(compareX),T=0;T<S.length;T++)d=eliminateHole(S[T],d);return d}function compareX(f,s){return f.x-s.x}function eliminateHole(f,s){var d=findHoleBridge(f,s);if(!d)return s;var _=splitPolygon(d,f);return filterPoints(_,_.next),filterPoints(d,d.next)}function findHoleBridge(f,s){var d=s,_=f.x,S=f.y,T=-1/0,F;do{if(S<=d.y&&S>=d.next.y&&d.next.y!==d.y){var M=d.x+(S-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(M<=_&&M>T&&(T=M,F=d.x<d.next.x?d:d.next,M===_))return F}d=d.next}while(d!==s);if(!F)return null;var P=F,H=F.x,J=F.y,K=1/0,z;d=F;do _>=d.x&&d.x>=H&&_!==d.x&&pointInTriangle(S<J?_:T,S,H,J,S<J?T:_,S,d.x,d.y)&&(z=Math.abs(S-d.y)/(_-d.x),locallyInside(d,f)&&(z<K||z===K&&(d.x>F.x||d.x===F.x&&sectorContainsSector(F,d)))&&(F=d,K=z)),d=d.next;while(d!==P);return F}function sectorContainsSector(f,s){return area$2(f.prev,f,s.prev)<0&&area$2(s.next,f,f.next)<0}function indexCurve(f,s,d,_){var S=f;do S.z===0&&(S.z=zOrder(S.x,S.y,s,d,_)),S.prevZ=S.prev,S.nextZ=S.next,S=S.next;while(S!==f);S.prevZ.nextZ=null,S.prevZ=null,sortLinked(S)}function sortLinked(f){var s,d,_,S,T,F,M,P,H=1;do{for(d=f,f=null,T=null,F=0;d;){for(F++,_=d,M=0,s=0;s<H&&(M++,_=_.nextZ,!!_);s++);for(P=H;M>0||P>0&&_;)M!==0&&(P===0||!_||d.z<=_.z)?(S=d,d=d.nextZ,M--):(S=_,_=_.nextZ,P--),T?T.nextZ=S:f=S,S.prevZ=T,T=S;d=_}T.nextZ=null,H*=2}while(F>1);return f}function zOrder(f,s,d,_,S){return f=(f-d)*S|0,s=(s-_)*S|0,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,f|s<<1}function getLeftmost(f){var s=f,d=f;do(s.x<d.x||s.x===d.x&&s.y<d.y)&&(d=s),s=s.next;while(s!==f);return d}function pointInTriangle(f,s,d,_,S,T,F,M){return(S-F)*(s-M)>=(f-F)*(T-M)&&(f-F)*(_-M)>=(d-F)*(s-M)&&(d-F)*(T-M)>=(S-F)*(_-M)}function isValidDiagonal(f,s){return f.next.i!==s.i&&f.prev.i!==s.i&&!intersectsPolygon(f,s)&&(locallyInside(f,s)&&locallyInside(s,f)&&middleInside(f,s)&&(area$2(f.prev,f,s.prev)||area$2(f,s.prev,s))||equals$1(f,s)&&area$2(f.prev,f,f.next)>0&&area$2(s.prev,s,s.next)>0)}function area$2(f,s,d){return(s.y-f.y)*(d.x-s.x)-(s.x-f.x)*(d.y-s.y)}function equals$1(f,s){return f.x===s.x&&f.y===s.y}function intersects$1(f,s,d,_){var S=sign(area$2(f,s,d)),T=sign(area$2(f,s,_)),F=sign(area$2(d,_,f)),M=sign(area$2(d,_,s));return!!(S!==T&&F!==M||S===0&&onSegment(f,d,s)||T===0&&onSegment(f,_,s)||F===0&&onSegment(d,f,_)||M===0&&onSegment(d,s,_))}function onSegment(f,s,d){return s.x<=Math.max(f.x,d.x)&&s.x>=Math.min(f.x,d.x)&&s.y<=Math.max(f.y,d.y)&&s.y>=Math.min(f.y,d.y)}function sign(f){return f>0?1:f<0?-1:0}function intersectsPolygon(f,s){var d=f;do{if(d.i!==f.i&&d.next.i!==f.i&&d.i!==s.i&&d.next.i!==s.i&&intersects$1(d,d.next,f,s))return!0;d=d.next}while(d!==f);return!1}function locallyInside(f,s){return area$2(f.prev,f,f.next)<0?area$2(f,s,f.next)>=0&&area$2(f,f.prev,s)>=0:area$2(f,s,f.prev)<0||area$2(f,f.next,s)<0}function middleInside(f,s){var d=f,_=!1,S=(f.x+s.x)/2,T=(f.y+s.y)/2;do d.y>T!=d.next.y>T&&d.next.y!==d.y&&S<(d.next.x-d.x)*(T-d.y)/(d.next.y-d.y)+d.x&&(_=!_),d=d.next;while(d!==f);return _}function splitPolygon(f,s){var d=new Node$3(f.i,f.x,f.y),_=new Node$3(s.i,s.x,s.y),S=f.next,T=s.prev;return f.next=s,s.prev=f,d.next=S,S.prev=d,_.next=d,d.prev=_,T.next=_,_.prev=T,_}function insertNode(f,s,d,_){var S=new Node$3(f,s,d);return _?(S.next=_.next,S.prev=_,_.next.prev=S,_.next=S):(S.prev=S,S.next=S),S}function removeNode(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Node$3(f,s,d){this.i=f,this.x=s,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(f,s,d,_){var S=s&&s.length,T=S?s[0]*d:f.length,F=Math.abs(signedArea(f,0,T,d));if(S)for(var M=0,P=s.length;M<P;M++){var H=s[M]*d,J=M<P-1?s[M+1]*d:f.length;F-=Math.abs(signedArea(f,H,J,d))}var K=0;for(M=0;M<_.length;M+=3){var z=_[M]*d,oe=_[M+1]*d,se=_[M+2]*d;K+=Math.abs((f[z]-f[se])*(f[oe+1]-f[z+1])-(f[z]-f[oe])*(f[se+1]-f[z+1]))}return F===0&&K===0?0:Math.abs((K-F)/F)};function signedArea(f,s,d,_){for(var S=0,T=s,F=d-_;T<d;T+=_)S+=(f[F]-f[T])*(f[T+1]+f[F+1]),F=T;return S}earcut.flatten=function(f){for(var s=f[0][0].length,d={vertices:[],holes:[],dimensions:s},_=0,S=0;S<f.length;S++){for(var T=0;T<f[S].length;T++)for(var F=0;F<s;F++)d.vertices.push(f[S][T][F]);S>0&&(_+=f[S-1].length,d.holes.push(_))}return d};var earcutExports=earcut$2.exports;const earcut$1=getDefaultExportFromCjs(earcutExports),OUTER_POLYGON_WINDING=WINDING.CLOCKWISE,HOLE_POLYGON_WINDING=WINDING.COUNTER_CLOCKWISE,windingOptions={isClosed:!0};function validate(f){if(f=f&&f.positions||f,!Array.isArray(f)&&!ArrayBuffer.isView(f))throw new Error("invalid polygon")}function getPositions(f){return"positions"in f?f.positions:f}function getHoleIndices(f){return"holeIndices"in f?f.holeIndices:null}function isNested(f){return Array.isArray(f[0])}function isSimple(f){return f.length>=1&&f[0].length>=2&&Number.isFinite(f[0][0])}function isNestedRingClosed(f){const s=f[0],d=f[f.length-1];return s[0]===d[0]&&s[1]===d[1]&&s[2]===d[2]}function isFlatRingClosed(f,s,d,_){for(let S=0;S<s;S++)if(f[d+S]!==f[_-s+S])return!1;return!0}function copyNestedRing(f,s,d,_,S){let T=s;const F=d.length;for(let M=0;M<F;M++)for(let P=0;P<_;P++)f[T++]=d[M][P]||0;if(!isNestedRingClosed(d))for(let M=0;M<_;M++)f[T++]=d[0][M]||0;return windingOptions.start=s,windingOptions.end=T,windingOptions.size=_,modifyPolygonWindingDirection(f,S,windingOptions),T}function copyFlatRing(f,s,d,_,S=0,T,F){T=T||d.length;const M=T-S;if(M<=0)return s;let P=s;for(let H=0;H<M;H++)f[P++]=d[S+H];if(!isFlatRingClosed(d,_,S,T))for(let H=0;H<_;H++)f[P++]=d[S+H];return windingOptions.start=s,windingOptions.end=P,windingOptions.size=_,modifyPolygonWindingDirection(f,F,windingOptions),P}function normalize$2(f,s){validate(f);const d=[],_=[];if("positions"in f){const{positions:S,holeIndices:T}=f;if(T){let F=0;for(let M=0;M<=T.length;M++)F=copyFlatRing(d,F,S,s,T[M-1],T[M],M===0?OUTER_POLYGON_WINDING:HOLE_POLYGON_WINDING),_.push(F);return _.pop(),{positions:d,holeIndices:_}}f=S}if(!isNested(f))return copyFlatRing(d,0,f,s,0,d.length,OUTER_POLYGON_WINDING),d;if(!isSimple(f)){let S=0;for(const[T,F]of f.entries())S=copyNestedRing(d,S,F,s,T===0?OUTER_POLYGON_WINDING:HOLE_POLYGON_WINDING),_.push(S);return _.pop(),{positions:d,holeIndices:_}}return copyNestedRing(d,0,f,s,OUTER_POLYGON_WINDING),d}function getPlaneArea(f,s,d){const _=f.length/3;let S=0;for(let T=0;T<_;T++){const F=(T+1)%_;S+=f[T*3+s]*f[F*3+d],S-=f[F*3+s]*f[T*3+d]}return Math.abs(S/2)}function permutePositions(f,s,d,_){const S=f.length/3;for(let T=0;T<S;T++){const F=T*3,M=f[F+0],P=f[F+1],H=f[F+2];f[F+s]=M,f[F+d]=P,f[F+_]=H}}function getSurfaceIndices(f,s,d,_){let S=getHoleIndices(f);S&&(S=S.map(M=>M/s));let T=getPositions(f);const F=_&&s===3;if(d){const M=T.length;T=T.slice();const P=[];for(let H=0;H<M;H+=s){P[0]=T[H],P[1]=T[H+1],F&&(P[2]=T[H+2]);const J=d(P);T[H]=J[0],T[H+1]=J[1],F&&(T[H+2]=J[2])}}if(F){const M=getPlaneArea(T,0,1),P=getPlaneArea(T,0,2),H=getPlaneArea(T,1,2);if(!M&&!P&&!H)return[];M>P&&M>H||(P>H?(d||(T=T.slice()),permutePositions(T,0,2,1)):(d||(T=T.slice()),permutePositions(T,2,0,1)))}return earcut$1(T,S,s)}class PolygonTesselator extends Tesselator{constructor(s){const{fp64:d,IndexType:_=Uint32Array}=s;super({...s,attributes:{positions:{size:3,type:d?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:_,size:1}}})}get(s){const{attributes:d}=this;return s==="indices"?d.indices&&d.indices.subarray(0,this.vertexCount):d[s]}updateGeometry(s){super.updateGeometry(s);const d=this.buffers.indices;if(d)this.vertexCount=(d.value||d).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(s){if(this.normalize){const d=normalize$2(s,this.positionSize);return this.opts.resolution?cutPolygonByGrid(getPositions(d),getHoleIndices(d),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?cutPolygonByMercatorBounds(getPositions(d),getHoleIndices(d),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):d}return s}getGeometrySize(s){if(isCut(s)){let d=0;for(const _ of s)d+=this.getGeometrySize(_);return d}return getPositions(s).length/this.positionSize}getGeometryFromBuffer(s){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(s):null}updateGeometryAttributes(s,d){if(s&&isCut(s))for(const _ of s){const S=this.getGeometrySize(_);d.geometrySize=S,this.updateGeometryAttributes(_,d),d.vertexStart+=S,d.indexStart=this.indexStarts[d.geometryIndex+1]}else{const _=s;this._updateIndices(_,d),this._updatePositions(_,d),this._updateVertexValid(_,d)}}_updateIndices(s,{geometryIndex:d,vertexStart:_,indexStart:S}){const{attributes:T,indexStarts:F,typedArrayManager:M}=this;let P=T.indices;if(!P||!s)return;let H=S;const J=getSurfaceIndices(s,this.positionSize,this.opts.preproject,this.opts.full3d);P=M.allocate(P,S+J.length,{copy:!0});for(let K=0;K<J.length;K++)P[H++]=J[K]+_;F[d+1]=S+J.length,T.indices=P}_updatePositions(s,{vertexStart:d,geometrySize:_}){const{attributes:{positions:S},positionSize:T}=this;if(!S||!s)return;const F=getPositions(s);for(let M=d,P=0;P<_;M++,P++){const H=F[P*T],J=F[P*T+1],K=T>2?F[P*T+2]:0;S[M*3]=H,S[M*3+1]=J,S[M*3+2]=K}}_updateVertexValid(s,{vertexStart:d,geometrySize:_}){const{positionSize:S}=this,T=this.attributes.vertexValid,F=s&&getHoleIndices(s);if(s&&s.edgeTypes?T.set(s.edgeTypes,d):T.fill(1,d,d+_),F)for(let M=0;M<F.length;M++)T[d+F[M]/S-1]=0;T[d+_-1]=0}}function isCut(f){return Array.isArray(f)&&f.length>0&&!Number.isFinite(f[0])}const main=`uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;
in vec4 fillColors;
in vec4 lineColors;
in vec3 pickingColors;
out vec4 vColor;
struct PolygonProps {
vec3 positions;
vec3 positions64Low;
vec3 normal;
float elevations;
};
vec3 project_offset_normal(vec3 vector) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
return normalize(vector * project_uCommonUnitsPerWorldUnit);
}
return project_normal(vector);
}
void calculatePosition(PolygonProps props) {
vec3 pos = props.positions;
vec3 pos64Low = props.positions64Low;
vec3 normal = props.normal;
vec4 colors = isWireframe ? lineColors : fillColors;
geometry.worldPosition = props.positions;
geometry.pickingColor = pickingColors;
if (extruded) {
pos.z += props.elevations * elevationScale;
}
gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
if (extruded) {
#ifdef IS_SIDE_VERTEX
normal = project_offset_normal(normal);
#else
normal = project_normal(normal);
#endif
geometry.normal = normal;
vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);
vColor = vec4(lightColor, colors.a * opacity);
} else {
vColor = vec4(colors.rgb, colors.a * opacity);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,vsTop=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader
in vec3 vertexPositions;
in vec3 vertexPositions64Low;
in float elevations;
${main}
void main(void) {
PolygonProps props;
props.positions = vertexPositions;
props.positions64Low = vertexPositions64Low;
props.elevations = elevations;
props.normal = vec3(0.0, 0.0, 1.0);
calculatePosition(props);
}
`,vsSide=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX
in vec2 positions;
in vec3 vertexPositions;
in vec3 nextVertexPositions;
in vec3 vertexPositions64Low;
in vec3 nextVertexPositions64Low;
in float elevations;
in float instanceVertexValid;
${main}
void main(void) {
if(instanceVertexValid < 0.5){
gl_Position = vec4(0.);
return;
}
PolygonProps props;
vec3 pos;
vec3 pos64Low;
vec3 nextPos;
vec3 nextPos64Low;
#if RING_WINDING_ORDER_CW == 1
pos = vertexPositions;
pos64Low = vertexPositions64Low;
nextPos = nextVertexPositions;
nextPos64Low = nextVertexPositions64Low;
#else
pos = nextVertexPositions;
pos64Low = nextVertexPositions64Low;
nextPos = vertexPositions;
nextPos64Low = vertexPositions64Low;
#endif
props.positions = mix(pos, nextPos, positions.x);
props.positions64Low = mix(pos64Low, nextPos64Low, positions.x);
props.normal = vec3(
pos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),
nextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),
0.0);
props.elevations = elevations * positions.y;
calculatePosition(props);
}
`,fs$6=`#version 300 es
#define SHADER_NAME solid-polygon-layer-fragment-shader
precision highp float;
in vec4 vColor;
out vec4 fragColor;
void main(void) {
fragColor = vColor;
geometry.uv = vec2(0.);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,DEFAULT_COLOR$1=[0,0,0,255],defaultProps$g={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:f=>f.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:DEFAULT_COLOR$1},getLineColor:{type:"accessor",value:DEFAULT_COLOR$1},material:!0},ATTRIBUTE_TRANSITION={enter:(f,s)=>s.length?s.subarray(s.length-f.length):f};class SolidPolygonLayer extends Layer{getShaders(s){return super.getShaders({vs:s==="top"?vsTop:vsSide,fs:fs$6,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[project32,gouraudLighting,picking]})}get wrapLongitude(){return!1}getBounds(){var s;return(s=this.getAttributeManager())==null?void 0:s.getBounds(["vertexPositions"])}initializeState(){const{viewport:s}=this.context;let{coordinateSystem:d}=this.props;const{_full3d:_}=this.props;s.isGeospatial&&d===COORDINATE_SYSTEM.DEFAULT&&(d=COORDINATE_SYSTEM.LNGLAT);let S;d===COORDINATE_SYSTEM.LNGLAT&&(_?S=s.projectPosition.bind(s):S=s.projectFlat.bind(s)),this.setState({numInstances:0,polygonTesselator:new PolygonTesselator({preproject:S,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const T=this.getAttributeManager(),F=!0;T.remove(["instancePickingColors"]),T.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:F},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:ATTRIBUTE_TRANSITION,accessor:"getPolygon",update:this.calculatePositions,noAlloc:F,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:F},elevations:{size:1,stepMode:"dynamic",transition:ATTRIBUTE_TRANSITION,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:ATTRIBUTE_TRANSITION,accessor:"getFillColor",defaultValue:DEFAULT_COLOR$1},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:ATTRIBUTE_TRANSITION,accessor:"getLineColor",defaultValue:DEFAULT_COLOR$1},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(M,{index:P,target:H})=>this.encodePickingColor(M&&M.__source?M.__source.index:P,H)}})}getPickingInfo(s){const d=super.getPickingInfo(s),{index:_}=d,S=this.props.data;return S[0]&&S[0].__source&&(d.object=S.find(T=>T.__source.index===_)),d}disablePickingIndex(s){const d=this.props.data;if(d[0]&&d[0].__source)for(let _=0;_<d.length;_++)d[_].__source.index===s&&this._disablePickingIndex(_);else super.disablePickingIndex(s)}draw({uniforms:s}){const{extruded:d,filled:_,wireframe:S,elevationScale:T}=this.props,{topModel:F,sideModel:M,wireframeModel:P,polygonTesselator:H}=this.state,J={...s,extruded:!!d,elevationScale:T};P&&S&&(P.setInstanceCount(H.instanceCount-1),P.setUniforms(J),P.draw(this.context.renderPass)),M&&_&&(M.setInstanceCount(H.instanceCount-1),M.setUniforms(J),M.draw(this.context.renderPass)),F&&_&&(F.setVertexCount(H.vertexCount),F.setUniforms(J),F.draw(this.context.renderPass))}updateState(s){var M;super.updateState(s),this.updateGeometry(s);const{props:d,oldProps:_,changeFlags:S}=s,T=this.getAttributeManager();(S.extensionsChanged||d.filled!==_.filled||d.extruded!==_.extruded)&&((M=this.state.models)==null||M.forEach(P=>P.destroy()),this.setState(this._getModels()),T.invalidateAll())}updateGeometry({props:s,oldProps:d,changeFlags:_}){if(_.dataChanged||_.updateTriggersChanged&&(_.updateTriggersChanged.all||_.updateTriggersChanged.getPolygon)){const{polygonTesselator:T}=this.state,F=s.data.attributes||{};T.updateGeometry({data:s.data,normalize:s._normalize,geometryBuffer:F.getPolygon,buffers:F,getGeometry:s.getPolygon,positionFormat:s.positionFormat,wrapLongitude:s.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:_.dataChanged,full3d:s._full3d}),this.setState({numInstances:T.instanceCount,startIndices:T.vertexStarts}),_.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:s,filled:d,extruded:_}=this.props;let S,T,F;if(d){const M=this.getShaders("top");M.defines.NON_INSTANCED_MODEL=1;const P=this.getAttributeManager().getBufferLayouts({isInstanced:!1});S=new Model(this.context.device,{...M,id:`${s}-top`,topology:"triangle-list",uniforms:{isWireframe:!1},bufferLayout:P,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(_){const M=this.getAttributeManager().getBufferLayouts({isInstanced:!0});T=new Model(this.context.device,{...this.getShaders("side"),id:`${s}-side`,bufferLayout:M,uniforms:{isWireframe:!1},geometry:new Geometry$1({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),F=new Model(this.context.device,{...this.getShaders("side"),id:`${s}-wireframe`,bufferLayout:M,uniforms:{isWireframe:!0},geometry:new Geometry$1({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[T,F,S].filter(Boolean),topModel:S,sideModel:T,wireframeModel:F}}calculateIndices(s){const{polygonTesselator:d}=this.state;s.startIndices=d.indexStarts,s.value=d.get("indices")}calculatePositions(s){const{polygonTesselator:d}=this.state;s.startIndices=d.vertexStarts,s.value=d.get("positions")}calculateVertexValid(s){s.value=this.state.polygonTesselator.get("vertexValid")}}SolidPolygonLayer.defaultProps=defaultProps$g;SolidPolygonLayer.layerName="SolidPolygonLayer";function replaceInRange({data:f,getIndex:s,dataRange:d,replace:_}){const{startRow:S=0,endRow:T=1/0}=d,F=f.length;let M=F,P=F;for(let z=0;z<F;z++){const oe=s(f[z]);if(M>z&&oe>=S&&(M=z),oe>=T){P=z;break}}let H=M;const K=P-M!==_.length?f.slice(P):void 0;for(let z=0;z<_.length;z++)f[H++]=_[z];if(K){for(let z=0;z<K.length;z++)f[H++]=K[z];f.length=H}return{startRow:M,endRow:M+_.length}}const defaultLineColor=[0,0,0,255],defaultFillColor=[0,0,0,255],defaultProps$f={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:f=>f.polygon},getFillColor:{type:"accessor",value:defaultFillColor},getLineColor:{type:"accessor",value:defaultLineColor},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class PolygonLayer extends CompositeLayer{initializeState(){this.state={paths:[],pathsDiff:null},this.props.getLineDashArray&&defaultLogger.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:s}){const d=s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getPolygon);if(d&&Array.isArray(s.dataChanged)){const _=this.state.paths.slice(),S=s.dataChanged.map(T=>replaceInRange({data:_,getIndex:F=>F.__source.index,dataRange:T,replace:this._getPaths(T)}));this.setState({paths:_,pathsDiff:S})}else d&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(s={}){const{data:d,getPolygon:_,positionFormat:S,_normalize:T}=this.props,F=[],M=S==="XY"?2:3,{startRow:P,endRow:H}=s,{iterable:J,objectInfo:K}=createIterable(d,P,H);for(const z of J){K.index++;let oe=_(z,K);T&&(oe=normalize$2(oe,M));const{holeIndices:se}=oe,ae=oe.positions||oe;if(se)for(let ge=0;ge<=se.length;ge++){const pe=ae.slice(se[ge-1]||0,se[ge]||ae.length);F.push(this.getSubLayerRow({path:pe},z,K.index))}else F.push(this.getSubLayerRow({path:ae},z,K.index))}return F}renderLayers(){const{data:s,_dataDiff:d,stroked:_,filled:S,extruded:T,wireframe:F,_normalize:M,_windingOrder:P,elevationScale:H,transitions:J,positionFormat:K}=this.props,{lineWidthUnits:z,lineWidthScale:oe,lineWidthMinPixels:se,lineWidthMaxPixels:ae,lineJointRounded:ge,lineMiterLimit:pe,lineDashJustified:he}=this.props,{getFillColor:ve,getLineColor:be,getLineWidth:Re,getLineDashArray:Fe,getElevation:ye,getPolygon:Ue,updateTriggers:It,material:St}=this.props,{paths:At,pathsDiff:xt}=this.state,Ct=this.getSubLayerClass("fill",SolidPolygonLayer),Nt=this.getSubLayerClass("stroke",PathLayer),qt=this.shouldRenderSubLayer("fill",At)&&new Ct({_dataDiff:d,extruded:T,elevationScale:H,filled:S,wireframe:F,_normalize:M,_windingOrder:P,getElevation:ye,getFillColor:ve,getLineColor:T&&F?be:defaultLineColor,material:St,transitions:J},this.getSubLayerProps({id:"fill",updateTriggers:It&&{getPolygon:It.getPolygon,getElevation:It.getElevation,getFillColor:It.getFillColor,lineColors:T&&F,getLineColor:It.getLineColor}}),{data:s,positionFormat:K,getPolygon:Ue}),Jn=!T&&_&&this.shouldRenderSubLayer("stroke",At)&&new Nt({_dataDiff:xt&&(()=>xt),widthUnits:z,widthScale:oe,widthMinPixels:se,widthMaxPixels:ae,jointRounded:ge,miterLimit:pe,dashJustified:he,_pathType:"loop",transitions:J&&{getWidth:J.getLineWidth,getColor:J.getLineColor,getPath:J.getPolygon},getColor:this.getSubLayerAccessor(be),getWidth:this.getSubLayerAccessor(Re),getDashArray:this.getSubLayerAccessor(Fe)},this.getSubLayerProps({id:"stroke",updateTriggers:It&&{getWidth:It.getLineWidth,getColor:It.getLineColor,getDashArray:It.getLineDashArray}}),{data:At,positionFormat:K,getPath:qr=>qr.path});return[!T&&qt,Jn,T&&qt]}}PolygonLayer.layerName="PolygonLayer";PolygonLayer.defaultProps=defaultProps$f;function binaryToFeatureForAccesor(f,s){if(!f)return null;const d="startIndices"in f?f.startIndices[s]:s,_=f.featureIds.value[d];return d!==-1?getPropertiesForIndex(f,_,d):null}function getPropertiesForIndex(f,s,d){const _={properties:{...f.properties[s]}};for(const S in f.numericProps)_.properties[S]=f.numericProps[S].value[d];return _}function calculatePickingColors(f,s){const d={points:null,lines:null,polygons:null};for(const _ in d){const S=f[_].globalFeatureIds.value;d[_]=new Uint8ClampedArray(S.length*3);const T=[];for(let F=0;F<S.length;F++)s(S[F],T),d[_][F*3+0]=T[0],d[_][F*3+1]=T[1],d[_][F*3+2]=T[2]}return d}const fs$5=`#version 300 es
#define SHADER_NAME multi-icon-layer-fragment-shader
precision highp float;
uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float sdfBuffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
if (!bool(picking.isActive)) {
float alpha = texture(iconsTexture, vTextureCoords).a;
vec4 color = vColor;
if (sdf) {
float distance = alpha;
alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);
if (outlineBuffer > 0.0) {
float inFill = alpha;
float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
color = mix(outlineColor, vColor, inFill);
alpha = inBorder;
}
}
float a = alpha * color.a;
if (a < alphaCutoff) {
discard;
}
fragColor = vec4(color.rgb, a * opacity);
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,DEFAULT_BUFFER=192/256,EMPTY_ARRAY=[],defaultProps$e={getIconOffsets:{type:"accessor",value:f=>f.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class MultiIconLayer extends IconLayer{getShaders(){return{...super.getShaders(),fs:fs$5}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:"uint8",size:3,accessor:(d,{index:_,target:S})=>this.encodePickingColor(_,S)}})}updateState(s){super.updateState(s);const{props:d,oldProps:_}=s;let{outlineColor:S}=d;S!==_.outlineColor&&(S=S.map(T=>T/255),S[3]=Number.isFinite(S[3])?S[3]:1,this.setState({outlineColor:S})),!d.sdf&&d.outlineWidth&&defaultLogger.warn(`${this.id}: fontSettings.sdf is required to render outline`)()}draw(s){const{sdf:d,smoothing:_,outlineWidth:S}=this.props,{outlineColor:T}=this.state,F=S?Math.max(_,DEFAULT_BUFFER*(1-S)):-1;if(s.uniforms={...s.uniforms,sdfBuffer:DEFAULT_BUFFER,outlineBuffer:F,gamma:_,sdf:!!d,outlineColor:T},super.draw(s),d&&S){const{iconManager:M}=this.state,P=M.getTexture(),H=this.state.model;P&&(H.setUniforms({outlineBuffer:DEFAULT_BUFFER}),H.draw(this.context.renderPass))}}getInstanceOffset(s){return s?Array.from(s).flatMap(d=>super.getInstanceOffset(d)):EMPTY_ARRAY}getInstanceColorMode(s){return 1}getInstanceIconFrame(s){return s?Array.from(s).flatMap(d=>super.getInstanceIconFrame(d)):EMPTY_ARRAY}}MultiIconLayer.defaultProps=defaultProps$e;MultiIconLayer.layerName="MultiIconLayer";const INF=1e20;class TinySDF{constructor({fontSize:s=24,buffer:d=3,radius:_=8,cutoff:S=.25,fontFamily:T="sans-serif",fontWeight:F="normal",fontStyle:M="normal"}={}){this.buffer=d,this.cutoff=S,this.radius=_;const P=this.size=s+d*4,H=this._createCanvas(P),J=this.ctx=H.getContext("2d",{willReadFrequently:!0});J.font=`${M} ${F} ${s}px ${T}`,J.textBaseline="alphabetic",J.textAlign="left",J.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(s){const d=document.createElement("canvas");return d.width=d.height=s,d}draw(s){const{width:d,actualBoundingBoxAscent:_,actualBoundingBoxDescent:S,actualBoundingBoxLeft:T,actualBoundingBoxRight:F}=this.ctx.measureText(s),M=Math.ceil(_),P=0,H=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(F-T))),J=Math.min(this.size-this.buffer,M+Math.ceil(S)),K=H+2*this.buffer,z=J+2*this.buffer,oe=Math.max(K*z,0),se=new Uint8ClampedArray(oe),ae={data:se,width:K,height:z,glyphWidth:H,glyphHeight:J,glyphTop:M,glyphLeft:P,glyphAdvance:d};if(H===0||J===0)return ae;const{ctx:ge,buffer:pe,gridInner:he,gridOuter:ve}=this;ge.clearRect(pe,pe,H,J),ge.fillText(s,pe,pe+M);const be=ge.getImageData(pe,pe,H,J);ve.fill(INF,0,oe),he.fill(0,0,oe);for(let Re=0;Re<J;Re++)for(let Fe=0;Fe<H;Fe++){const ye=be.data[4*(Re*H+Fe)+3]/255;if(ye===0)continue;const Ue=(Re+pe)*K+Fe+pe;if(ye===1)ve[Ue]=0,he[Ue]=INF;else{const It=.5-ye;ve[Ue]=It>0?It*It:0,he[Ue]=It<0?It*It:0}}edt(ve,0,0,K,z,K,this.f,this.v,this.z),edt(he,pe,pe,H,J,K,this.f,this.v,this.z);for(let Re=0;Re<oe;Re++){const Fe=Math.sqrt(ve[Re])-Math.sqrt(he[Re]);se[Re]=Math.round(255-255*(Fe/this.radius+this.cutoff))}return ae}}function edt(f,s,d,_,S,T,F,M,P){for(let H=s;H<s+_;H++)edt1d(f,d*T+H,T,S,F,M,P);for(let H=d;H<d+S;H++)edt1d(f,H*T+s,1,_,F,M,P)}function edt1d(f,s,d,_,S,T,F){T[0]=0,F[0]=-INF,F[1]=INF,S[0]=f[s];for(let M=1,P=0,H=0;M<_;M++){S[M]=f[s+M*d];const J=M*M;do{const K=T[P];H=(S[M]-S[K]+J-K*K)/(M-K)/2}while(H<=F[P]&&--P>-1);P++,T[P]=M,F[P]=H,F[P+1]=INF}for(let M=0,P=0;M<_;M++){for(;F[P+1]<M;)P++;const H=T[P],J=M-H;f[s+M*d]=S[H]+J*J}}const MISSING_CHAR_WIDTH=32,SINGLE_LINE=[];function nextPowOfTwo(f){return Math.pow(2,Math.ceil(Math.log2(f)))}function buildMapping({characterSet:f,getFontWidth:s,fontHeight:d,buffer:_,maxCanvasWidth:S,mapping:T={},xOffset:F=0,yOffset:M=0}){let P=0,H=F;const J=d+_*2;for(const K of f)if(!T[K]){const z=s(K);H+z+_*2>S&&(H=0,P++),T[K]={x:H+_,y:M+P*J+_,width:z,height:J,layoutWidth:z,layoutHeight:d},H+=z+_*2}return{mapping:T,xOffset:H,yOffset:M+P*J,canvasHeight:nextPowOfTwo(M+(P+1)*J)}}function getTextWidth(f,s,d,_){var T;let S=0;for(let F=s;F<d;F++){const M=f[F];S+=((T=_[M])==null?void 0:T.layoutWidth)||0}return S}function breakAll(f,s,d,_,S,T){let F=s,M=0;for(let P=s;P<d;P++){const H=getTextWidth(f,P,P+1,S);M+H>_&&(F<P&&T.push(P),F=P,M=0),M+=H}return M}function breakWord(f,s,d,_,S,T){let F=s,M=s,P=s,H=0;for(let J=s;J<d;J++)if((f[J]===" "||f[J+1]===" "||J+1===d)&&(P=J+1),P>M){let K=getTextWidth(f,M,P,S);H+K>_&&(F<M&&(T.push(M),F=M,H=0),K>_&&(K=breakAll(f,M,P,_,S,T),F=T[T.length-1])),M=P,H+=K}return H}function autoWrapping(f,s,d,_,S=0,T){T===void 0&&(T=f.length);const F=[];return s==="break-all"?breakAll(f,S,T,d,_,F):breakWord(f,S,T,d,_,F),F}function transformRow(f,s,d,_,S,T){let F=0,M=0;for(let P=s;P<d;P++){const H=f[P],J=_[H];J?(M||(M=J.layoutHeight),S[P]=F+J.layoutWidth/2,F+=J.layoutWidth):(defaultLogger.warn(`Missing character: ${H} (${H.codePointAt(0)})`)(),S[P]=F,F+=MISSING_CHAR_WIDTH)}T[0]=F,T[1]=M}function transformParagraph(f,s,d,_,S){var ge;const T=Array.from(f),F=T.length,M=new Array(F),P=new Array(F),H=new Array(F),J=(d==="break-word"||d==="break-all")&&isFinite(_)&&_>0,K=[0,0],z=[0,0];let oe=0,se=0,ae=0;for(let pe=0;pe<=F;pe++){const he=T[pe];if((he===`
`||pe===F)&&(ae=pe),ae>se){const ve=J?autoWrapping(T,d,_,S,se,ae):SINGLE_LINE;for(let be=0;be<=ve.length;be++){const Re=be===0?se:ve[be-1],Fe=be<ve.length?ve[be]:ae;transformRow(T,Re,Fe,S,M,z);for(let ye=Re;ye<Fe;ye++){const Ue=T[ye],It=((ge=S[Ue])==null?void 0:ge.layoutOffsetY)||0;P[ye]=oe+z[1]/2+It,H[ye]=z[0]}oe=oe+z[1]*s,K[0]=Math.max(K[0],z[0])}se=ae}he===`
`&&(M[se]=0,P[se]=0,H[se]=0,se++)}return K[1]=oe,{x:M,y:P,rowWidth:H,size:K}}function getTextFromBuffer({value:f,length:s,stride:d,offset:_,startIndices:S,characterSet:T}){const F=f.BYTES_PER_ELEMENT,M=d?d/F:1,P=_?_/F:0,H=S[s]||Math.ceil((f.length-P)/M),J=T&&new Set,K=new Array(s);let z=f;if(M>1||P>0){const oe=f.constructor;z=new oe(H);for(let se=0;se<H;se++)z[se]=f[se*M+P]}for(let oe=0;oe<s;oe++){const se=S[oe],ae=S[oe+1]||H,ge=z.subarray(se,ae);K[oe]=String.fromCodePoint.apply(null,ge),J&&ge.forEach(J.add,J)}if(J)for(const oe of J)T.add(String.fromCodePoint(oe));return{texts:K,characterCount:H}}class LRUCache{constructor(s=5){this._cache={},this._order=[],this.limit=s}get(s){const d=this._cache[s];return d&&(this._deleteOrder(s),this._appendOrder(s)),d}set(s,d){this._cache[s]?(this.delete(s),this._cache[s]=d,this._appendOrder(s)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[s]=d,this._appendOrder(s))}delete(s){this._cache[s]&&(delete this._cache[s],this._deleteOrder(s))}_deleteOrder(s){const d=this._order.indexOf(s);d>=0&&this._order.splice(d,1)}_appendOrder(s){this._order.push(s)}}function getDefaultCharacterSet(){const f=[];for(let s=32;s<128;s++)f.push(String.fromCharCode(s));return f}const DEFAULT_FONT_SETTINGS={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:getDefaultCharacterSet(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},MAX_CANVAS_WIDTH=1024,BASELINE_SCALE=.9,HEIGHT_SCALE=1.2,CACHE_LIMIT=3;let cache=new LRUCache(CACHE_LIMIT);function getNewChars(f,s){let d;typeof s=="string"?d=new Set(Array.from(s)):d=new Set(s);const _=cache.get(f);if(!_)return d;for(const S in _.mapping)d.has(S)&&d.delete(S);return d}function populateAlphaChannel(f,s){for(let d=0;d<f.length;d++)s.data[4*d+3]=f[d]}function setTextStyle(f,s,d,_){f.font=`${_} ${d}px ${s}`,f.fillStyle="#000",f.textBaseline="alphabetic",f.textAlign="left"}function setFontAtlasCacheLimit(f){defaultLogger.assert(Number.isFinite(f)&&f>=CACHE_LIMIT,"Invalid cache limit"),cache=new LRUCache(f)}class FontAtlasManager{constructor(){this.props={...DEFAULT_FONT_SETTINGS}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:s,buffer:d}=this.props;return(s*HEIGHT_SCALE+d*2)/s}setProps(s={}){Object.assign(this.props,s),this._key=this._getKey();const d=getNewChars(this._key,this.props.characterSet),_=cache.get(this._key);if(_&&d.size===0){this._atlas!==_&&(this._atlas=_);return}const S=this._generateFontAtlas(d,_);this._atlas=S,cache.set(this._key,S)}_generateFontAtlas(s,d){const{fontFamily:_,fontWeight:S,fontSize:T,buffer:F,sdf:M,radius:P,cutoff:H}=this.props;let J=d&&d.data;J||(J=document.createElement("canvas"),J.width=MAX_CANVAS_WIDTH);const K=J.getContext("2d",{willReadFrequently:!0});setTextStyle(K,_,T,S);const{mapping:z,canvasHeight:oe,xOffset:se,yOffset:ae}=buildMapping({getFontWidth:ge=>K.measureText(ge).width,fontHeight:T*HEIGHT_SCALE,buffer:F,characterSet:s,maxCanvasWidth:MAX_CANVAS_WIDTH,...d&&{mapping:d.mapping,xOffset:d.xOffset,yOffset:d.yOffset}});if(J.height!==oe){const ge=K.getImageData(0,0,J.width,J.height);J.height=oe,K.putImageData(ge,0,0)}if(setTextStyle(K,_,T,S),M){const ge=new TinySDF({fontSize:T,buffer:F,radius:P,cutoff:H,fontFamily:_,fontWeight:`${S}`});for(const pe of s){const{data:he,width:ve,height:be,glyphTop:Re}=ge.draw(pe);z[pe].width=ve,z[pe].layoutOffsetY=T*BASELINE_SCALE-Re;const Fe=K.createImageData(ve,be);populateAlphaChannel(he,Fe),K.putImageData(Fe,z[pe].x,z[pe].y)}}else for(const ge of s)K.fillText(ge,z[ge].x,z[ge].y+F+T*BASELINE_SCALE);return{xOffset:se,yOffset:ae,mapping:z,data:J,width:J.width,height:J.height}}_getKey(){const{fontFamily:s,fontWeight:d,fontSize:_,buffer:S,sdf:T,radius:F,cutoff:M}=this.props;return T?`${s} ${d} ${_} ${S} ${F} ${M}`:`${s} ${d} ${_} ${S}`}}const vs$3=`#version 300 es
#define SHADER_NAME text-background-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceRects;
in float instanceSizes;
in float instanceAngles;
in vec2 instancePixelOffsets;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;
out vec4 vFillColor;
out vec4 vLineColor;
out float vLineWidth;
out vec2 uv;
out vec2 dimensions;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = radians(angle);
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vLineWidth = instanceLineWidths;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
sizeMinPixels, sizeMaxPixels
);
dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;
vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
pixelOffset += instancePixelOffsets;
pixelOffset.y *= -1.0;
if (billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,fs$4=`#version 300 es
#define SHADER_NAME text-background-layer-fragment-shader
precision highp float;
uniform bool stroked;
in vec4 vFillColor;
in vec4 vLineColor;
in float vLineWidth;
in vec2 uv;
in vec2 dimensions;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec2 pixelPosition = uv * dimensions;
if (stroked) {
float distToEdge = min(
min(pixelPosition.x, dimensions.x - pixelPosition.x),
min(pixelPosition.y, dimensions.y - pixelPosition.y)
);
float isBorder = smoothedge(distToEdge, vLineWidth);
fragColor = mix(vFillColor, vLineColor, isBorder);
} else {
fragColor = vFillColor;
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,defaultProps$d={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:f=>f.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class TextBackgroundLayer extends Layer{getShaders(){return super.getShaders({vs:vs$3,fs:fs$4,modules:[project32,picking]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(s){var _;super.updateState(s);const{changeFlags:d}=s;d.extensionsChanged&&((_=this.state.model)==null||_.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:s}){const{billboard:d,sizeScale:_,sizeUnits:S,sizeMinPixels:T,sizeMaxPixels:F,getLineWidth:M}=this.props;let{padding:P}=this.props;P.length<4&&(P=[P[0],P[1],P[0],P[1]]);const H=this.state.model;H.setUniforms(s),H.setUniforms({billboard:d,stroked:!!M,padding:P,sizeUnits:UNIT[S],sizeScale:_,sizeMinPixels:T,sizeMaxPixels:F}),H.draw(this.context.renderPass)}_getModel(){const s=[0,0,1,0,1,1,0,1];return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Geometry$1({topology:"triangle-fan-webgl",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(s)}}}),isInstanced:!0})}}TextBackgroundLayer.defaultProps=defaultProps$d;TextBackgroundLayer.layerName="TextBackgroundLayer";const TEXT_ANCHOR={start:1,middle:0,end:-1},ALIGNMENT_BASELINE={top:1,center:0,bottom:-1},DEFAULT_COLOR=[0,0,0,255],DEFAULT_LINE_HEIGHT=1,defaultProps$c={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:DEFAULT_COLOR},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:DEFAULT_FONT_SETTINGS.characterSet},fontFamily:DEFAULT_FONT_SETTINGS.fontFamily,fontWeight:DEFAULT_FONT_SETTINGS.fontWeight,lineHeight:DEFAULT_LINE_HEIGHT,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:DEFAULT_COLOR},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:f=>f.text},getPosition:{type:"accessor",value:f=>f.position},getColor:{type:"accessor",value:DEFAULT_COLOR},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class TextLayer extends CompositeLayer{constructor(){super(...arguments),this.getBoundingRect=(s,d)=>{let{size:[_,S]}=this.transformParagraph(s,d);const{fontSize:T}=this.state.fontAtlasManager.props;_/=T,S/=T;const{getTextAnchor:F,getAlignmentBaseline:M}=this.props,P=TEXT_ANCHOR[typeof F=="function"?F(s,d):F],H=ALIGNMENT_BASELINE[typeof M=="function"?M(s,d):M];return[(P-1)*_/2,(H-1)*S/2,_,S]},this.getIconOffsets=(s,d)=>{const{getTextAnchor:_,getAlignmentBaseline:S}=this.props,{x:T,y:F,rowWidth:M,size:[P,H]}=this.transformParagraph(s,d),J=TEXT_ANCHOR[typeof _=="function"?_(s,d):_],K=ALIGNMENT_BASELINE[typeof S=="function"?S(s,d):S],z=T.length,oe=new Array(z*2);let se=0;for(let ae=0;ae<z;ae++){const ge=(1-J)*(P-M[ae])/2;oe[se++]=(J-1)*P/2+ge+T[ae],oe[se++]=(K-1)*H/2+F[ae]}return oe}}initializeState(){this.state={styleVersion:0,fontAtlasManager:new FontAtlasManager},this.props.maxWidth>0&&defaultLogger.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(s){const{props:d,oldProps:_,changeFlags:S}=s;(S.dataChanged||S.updateTriggersChanged&&(S.updateTriggersChanged.all||S.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||d.lineHeight!==_.lineHeight||d.wordBreak!==_.wordBreak||d.maxWidth!==_.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:s}){return s.object=s.index>=0?this.props.data[s.index]:null,s}_updateFontAtlas(){const{fontSettings:s,fontFamily:d,fontWeight:_}=this.props,{fontAtlasManager:S,characterSet:T}=this.state,F={...s,characterSet:T,fontFamily:d,fontWeight:_};if(!S.mapping)return S.setProps(F),!0;for(const M in F)if(F[M]!==S.props[M])return S.setProps(F),!0;return!1}_updateText(){var P;const{data:s,characterSet:d}=this.props,_=(P=s.attributes)==null?void 0:P.getText;let{getText:S}=this.props,T=s.startIndices,F;const M=d==="auto"&&new Set;if(_&&T){const{texts:H,characterCount:J}=getTextFromBuffer({...ArrayBuffer.isView(_)?{value:_}:_,length:s.length,startIndices:T,characterSet:M});F=J,S=(K,{index:z})=>H[z]}else{const{iterable:H,objectInfo:J}=createIterable(s);T=[0],F=0;for(const K of H){J.index++;const z=Array.from(S(K,J)||"");M&&z.forEach(M.add,M),F+=z.length,T.push(F)}}this.setState({getText:S,startIndices:T,numInstances:F,characterSet:M||d})}transformParagraph(s,d){const{fontAtlasManager:_}=this.state,S=_.mapping,T=this.state.getText,{wordBreak:F,lineHeight:M,maxWidth:P}=this.props,H=T(s,d)||"";return transformParagraph(H,M,F,P*_.props.fontSize,S)}renderLayers(){const{startIndices:s,numInstances:d,getText:_,fontAtlasManager:{scale:S,atlas:T,mapping:F},styleVersion:M}=this.state,{data:P,_dataDiff:H,getPosition:J,getColor:K,getSize:z,getAngle:oe,getPixelOffset:se,getBackgroundColor:ae,getBorderColor:ge,getBorderWidth:pe,backgroundPadding:he,background:ve,billboard:be,fontSettings:Re,outlineWidth:Fe,outlineColor:ye,sizeScale:Ue,sizeUnits:It,sizeMinPixels:St,sizeMaxPixels:At,transitions:xt,updateTriggers:Ct}=this.props,Nt=this.getSubLayerClass("characters",MultiIconLayer),qt=this.getSubLayerClass("background",TextBackgroundLayer);return[ve&&new qt({getFillColor:ae,getLineColor:ge,getLineWidth:pe,padding:he,getPosition:J,getSize:z,getAngle:oe,getPixelOffset:se,billboard:be,sizeScale:Ue,sizeUnits:It,sizeMinPixels:St,sizeMaxPixels:At,transitions:xt&&{getPosition:xt.getPosition,getAngle:xt.getAngle,getSize:xt.getSize,getFillColor:xt.getBackgroundColor,getLineColor:xt.getBorderColor,getLineWidth:xt.getBorderWidth,getPixelOffset:xt.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:Ct.getPosition,getAngle:Ct.getAngle,getSize:Ct.getSize,getFillColor:Ct.getBackgroundColor,getLineColor:Ct.getBorderColor,getLineWidth:Ct.getBorderWidth,getPixelOffset:Ct.getPixelOffset,getBoundingRect:{getText:Ct.getText,getTextAnchor:Ct.getTextAnchor,getAlignmentBaseline:Ct.getAlignmentBaseline,styleVersion:M}}}),{data:P.attributes&&P.attributes.background?{length:P.length,attributes:P.attributes.background}:P,_dataDiff:H,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new Nt({sdf:Re.sdf,smoothing:Number.isFinite(Re.smoothing)?Re.smoothing:DEFAULT_FONT_SETTINGS.smoothing,outlineWidth:Fe/(Re.radius||DEFAULT_FONT_SETTINGS.radius),outlineColor:ye,iconAtlas:T,iconMapping:F,getPosition:J,getColor:K,getSize:z,getAngle:oe,getPixelOffset:se,billboard:be,sizeScale:Ue*S,sizeUnits:It,sizeMinPixels:St*S,sizeMaxPixels:At*S,transitions:xt&&{getPosition:xt.getPosition,getAngle:xt.getAngle,getColor:xt.getColor,getSize:xt.getSize,getPixelOffset:xt.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:Ct.getText,getPosition:Ct.getPosition,getAngle:Ct.getAngle,getColor:Ct.getColor,getSize:Ct.getSize,getPixelOffset:Ct.getPixelOffset,getIconOffsets:{getTextAnchor:Ct.getTextAnchor,getAlignmentBaseline:Ct.getAlignmentBaseline,styleVersion:M}}}),{data:P,_dataDiff:H,startIndices:s,numInstances:d,getIconOffsets:this.getIconOffsets,getIcon:_})]}static set fontAtlasCacheLimit(s){setFontAtlasCacheLimit(s)}}TextLayer.defaultProps=defaultProps$c;TextLayer.layerName="TextLayer";const POINT_LAYER={circle:{type:ScatterplotLayer,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:IconLayer,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:TextLayer,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},LINE_LAYER={type:PathLayer,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},POLYGON_LAYER={type:SolidPolygonLayer,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function getDefaultProps({type:f,props:s}){const d={};for(const _ in s)d[_]=f.defaultProps[s[_]];return d}function forwardProps(f,s){const{transitions:d,updateTriggers:_}=f.props,S={updateTriggers:{},transitions:d&&{getPosition:d.geometry}};for(const T in s){const F=s[T];let M=f.props[T];T.startsWith("get")&&(M=f.getSubLayerAccessor(M),S.updateTriggers[F]=_[T],d&&(S.transitions[F]=d[T])),S[F]=M}return S}function getGeojsonFeatures(f){if(Array.isArray(f))return f;switch(defaultLogger.assert(f.type,"GeoJSON does not have type"),f.type){case"Feature":return[f];case"FeatureCollection":return defaultLogger.assert(Array.isArray(f.features),"GeoJSON does not have features array"),f.features;default:return[{geometry:f}]}}function separateGeojsonFeatures(f,s,d={}){const _={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:S=0,endRow:T=f.length}=d;for(let F=S;F<T;F++){const M=f[F],{geometry:P}=M;if(P)if(P.type==="GeometryCollection"){defaultLogger.assert(Array.isArray(P.geometries),"GeoJSON does not have geometries array");const{geometries:H}=P;for(let J=0;J<H.length;J++){const K=H[J];separateGeometry(K,_,s,M,F)}}else separateGeometry(P,_,s,M,F)}return _}function separateGeometry(f,s,d,_,S){const{type:T,coordinates:F}=f,{pointFeatures:M,lineFeatures:P,polygonFeatures:H,polygonOutlineFeatures:J}=s;if(!validateGeometry(T,F)){defaultLogger.warn(`${T} coordinates are malformed`)();return}switch(T){case"Point":M.push(d({geometry:f},_,S));break;case"MultiPoint":F.forEach(K=>{M.push(d({geometry:{type:"Point",coordinates:K}},_,S))});break;case"LineString":P.push(d({geometry:f},_,S));break;case"MultiLineString":F.forEach(K=>{P.push(d({geometry:{type:"LineString",coordinates:K}},_,S))});break;case"Polygon":H.push(d({geometry:f},_,S)),F.forEach(K=>{J.push(d({geometry:{type:"LineString",coordinates:K}},_,S))});break;case"MultiPolygon":F.forEach(K=>{H.push(d({geometry:{type:"Polygon",coordinates:K}},_,S)),K.forEach(z=>{J.push(d({geometry:{type:"LineString",coordinates:z}},_,S))})});break}}const COORDINATE_NEST_LEVEL={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function validateGeometry(f,s){let d=COORDINATE_NEST_LEVEL[f];for(defaultLogger.assert(d,`Unknown GeoJSON type ${f}`);s&&--d>0;)s=s[0];return s&&Number.isFinite(s[0])}function createEmptyLayerProps(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function getCoordinates(f){return f.geometry.coordinates}function createLayerPropsFromFeatures(f,s){const d=createEmptyLayerProps(),{pointFeatures:_,lineFeatures:S,polygonFeatures:T,polygonOutlineFeatures:F}=f;return d.points.data=_,d.points._dataDiff=s.pointFeatures&&(()=>s.pointFeatures),d.points.getPosition=getCoordinates,d.lines.data=S,d.lines._dataDiff=s.lineFeatures&&(()=>s.lineFeatures),d.lines.getPath=getCoordinates,d.polygons.data=T,d.polygons._dataDiff=s.polygonFeatures&&(()=>s.polygonFeatures),d.polygons.getPolygon=getCoordinates,d.polygonsOutline.data=F,d.polygonsOutline._dataDiff=s.polygonOutlineFeatures&&(()=>s.polygonOutlineFeatures),d.polygonsOutline.getPath=getCoordinates,d}function createLayerPropsFromBinary(f,s){const d=createEmptyLayerProps(),{points:_,lines:S,polygons:T}=f,F=calculatePickingColors(f,s);return d.points.data={length:_.positions.value.length/_.positions.size,attributes:{..._.attributes,getPosition:_.positions,instancePickingColors:{size:3,value:F.points}},properties:_.properties,numericProps:_.numericProps,featureIds:_.featureIds},d.lines.data={length:S.pathIndices.value.length-1,startIndices:S.pathIndices.value,attributes:{...S.attributes,getPath:S.positions,instancePickingColors:{size:3,value:F.lines}},properties:S.properties,numericProps:S.numericProps,featureIds:S.featureIds},d.lines._pathType="open",d.polygons.data={length:T.polygonIndices.value.length-1,startIndices:T.polygonIndices.value,attributes:{...T.attributes,getPolygon:T.positions,pickingColors:{size:3,value:F.polygons}},properties:T.properties,numericProps:T.numericProps,featureIds:T.featureIds},d.polygons._normalize=!1,T.triangles&&(d.polygons.data.attributes.indices=T.triangles.value),d.polygonsOutline.data={length:T.primitivePolygonIndices.value.length-1,startIndices:T.primitivePolygonIndices.value,attributes:{...T.attributes,getPath:T.positions,instancePickingColors:{size:3,value:F.polygons}},properties:T.properties,numericProps:T.numericProps,featureIds:T.featureIds},d.polygonsOutline._pathType="open",d}const FEATURE_TYPES=["points","linestrings","polygons"],defaultProps$b={...getDefaultProps(POINT_LAYER.circle),...getDefaultProps(POINT_LAYER.icon),...getDefaultProps(POINT_LAYER.text),...getDefaultProps(LINE_LAYER),...getDefaultProps(POLYGON_LAYER),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:f=>f.properties.icon},getText:{type:"accessor",value:f=>f.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class GeoJsonLayer extends CompositeLayer{initializeState(){this.state={layerProps:{},features:{},featuresDiff:{}}}updateState({props:s,changeFlags:d}){if(!d.dataChanged)return;const{data:_}=this.props,S=_&&"points"in _&&"polygons"in _&&"lines"in _;this.setState({binary:S}),S?this._updateStateBinary({props:s,changeFlags:d}):this._updateStateJSON({props:s,changeFlags:d})}_updateStateBinary({props:s,changeFlags:d}){const _=createLayerPropsFromBinary(s.data,this.encodePickingColor);this.setState({layerProps:_})}_updateStateJSON({props:s,changeFlags:d}){const _=getGeojsonFeatures(s.data),S=this.getSubLayerRow.bind(this);let T={};const F={};if(Array.isArray(d.dataChanged)){const P=this.state.features;for(const H in P)T[H]=P[H].slice(),F[H]=[];for(const H of d.dataChanged){const J=separateGeojsonFeatures(_,S,H);for(const K in P)F[K].push(replaceInRange({data:T[K],getIndex:z=>z.__source.index,dataRange:H,replace:J[K]}))}}else T=separateGeojsonFeatures(_,S);const M=createLayerPropsFromFeatures(T,F);this.setState({features:T,featuresDiff:F,layerProps:M})}getPickingInfo(s){const d=super.getPickingInfo(s),{index:_,sourceLayer:S}=d;return d.featureType=FEATURE_TYPES.find(T=>S.id.startsWith(`${this.id}-${T}-`)),_>=0&&S.id.startsWith(`${this.id}-points-text`)&&this.state.binary&&(d.index=this.props.data.points.globalFeatureIds.value[_]),d}_updateAutoHighlight(s){const d=`${this.id}-points-`,_=s.featureType==="points";for(const S of this.getSubLayers())S.id.startsWith(d)===_&&S.updateAutoHighlight(s)}_renderPolygonLayer(){var F;const{extruded:s,wireframe:d}=this.props,{layerProps:_}=this.state,S="polygons-fill",T=this.shouldRenderSubLayer(S,(F=_.polygons)==null?void 0:F.data)&&this.getSubLayerClass(S,POLYGON_LAYER.type);if(T){const M=forwardProps(this,POLYGON_LAYER.props),P=s&&d;return P||delete M.getLineColor,M.updateTriggers.lineColors=P,new T(M,this.getSubLayerProps({id:S,updateTriggers:M.updateTriggers}),_.polygons)}return null}_renderLineLayers(){var P,H;const{extruded:s,stroked:d}=this.props,{layerProps:_}=this.state,S="polygons-stroke",T="linestrings",F=!s&&d&&this.shouldRenderSubLayer(S,(P=_.polygonsOutline)==null?void 0:P.data)&&this.getSubLayerClass(S,LINE_LAYER.type),M=this.shouldRenderSubLayer(T,(H=_.lines)==null?void 0:H.data)&&this.getSubLayerClass(T,LINE_LAYER.type);if(F||M){const J=forwardProps(this,LINE_LAYER.props);return[F&&new F(J,this.getSubLayerProps({id:S,updateTriggers:J.updateTriggers}),_.polygonsOutline),M&&new M(J,this.getSubLayerProps({id:T,updateTriggers:J.updateTriggers}),_.lines)]}return null}_renderPointLayers(){var M;const{pointType:s}=this.props,{layerProps:d,binary:_}=this.state;let{highlightedObjectIndex:S}=this.props;!_&&Number.isFinite(S)&&(S=d.points.data.findIndex(P=>P.__source.index===S));const T=new Set(s.split("+")),F=[];for(const P of T){const H=`points-${P}`,J=POINT_LAYER[P],K=J&&this.shouldRenderSubLayer(H,(M=d.points)==null?void 0:M.data)&&this.getSubLayerClass(H,J.type);if(K){const z=forwardProps(this,J.props);let oe=d.points;if(P==="text"&&_){const{instancePickingColors:se,...ae}=oe.data.attributes;oe={...oe,data:{...oe.data,attributes:ae}}}F.push(new K(z,this.getSubLayerProps({id:H,updateTriggers:z.updateTriggers,highlightedObjectIndex:S}),oe))}}return F}renderLayers(){const{extruded:s}=this.props,d=this._renderPolygonLayer(),_=this._renderLineLayers(),S=this._renderPointLayers();return[!s&&d,_,S,s&&d]}getSubLayerAccessor(s){const{binary:d}=this.state;return!d||typeof s!="function"?super.getSubLayerAccessor(s):(_,S)=>{const{data:T,index:F}=S,M=binaryToFeatureForAccesor(T,F);return s(M,S)}}}GeoJsonLayer.layerName="GeoJsonLayer";GeoJsonLayer.defaultProps=defaultProps$b;function clone$3(f){if(!f)throw new Error("geojson is required");switch(f.type){case"Feature":return cloneFeature$3(f);case"FeatureCollection":return cloneFeatureCollection$3(f);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return cloneGeometry$3(f);default:throw new Error("unknown GeoJSON type")}}function cloneFeature$3(f){var s={type:"Feature"};return Object.keys(f).forEach(function(d){switch(d){case"type":case"properties":case"geometry":return;default:s[d]=f[d]}}),s.properties=cloneProperties$3(f.properties),s.geometry=cloneGeometry$3(f.geometry),s}function cloneProperties$3(f){var s={};return f&&Object.keys(f).forEach(function(d){var _=f[d];typeof _=="object"?_===null?s[d]=null:_.length?s[d]=_.map(function(S){return S}):s[d]=cloneProperties$3(_):s[d]=_}),s}function cloneFeatureCollection$3(f){var s={type:"FeatureCollection"};return Object.keys(f).forEach(function(d){switch(d){case"type":case"features":return;default:s[d]=f[d]}}),s.features=f.features.map(function(d){return cloneFeature$3(d)}),s}function cloneGeometry$3(f){var s={type:f.type};return f.bbox&&(s.bbox=f.bbox),f.type==="GeometryCollection"?(s.geometries=f.geometries.map(function(d){return cloneGeometry$3(d)}),s):(s.coordinates=deepSlice$3(f.coordinates),s)}function deepSlice$3(f){return typeof f[0]!="object"?f.slice():f.map(function(s){return deepSlice$3(s)})}function feature$j(f,s,d){if(d=d||{},!isObject$7(d))throw new Error("options is invalid");var _=d.bbox,S=d.id;if(f===void 0)throw new Error("geometry is required");_&&validateBBox(_),S&&validateId(S);var T={type:"Feature"};return S&&(T.id=S),_&&(T.bbox=_),T.properties={},T.geometry=f,T}function point$b(f,s,d){if(!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$c(f[0])||!isNumber$c(f[1]))throw new Error("coordinates must contain numbers");return feature$j({type:"Point",coordinates:f},s,d)}function isNumber$c(f){return!isNaN(f)&&f!==null&&!Array.isArray(f)}function isObject$7(f){return!!f&&f.constructor===Object}function validateBBox(f){if(!f)throw new Error("bbox is required");if(!Array.isArray(f))throw new Error("bbox must be an Array");if(f.length!==4&&f.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");f.forEach(function(s){if(!isNumber$c(s))throw new Error("bbox must only contain numbers")})}function validateId(f){if(!f)throw new Error("id is required");if(["string","number"].indexOf(typeof f)===-1)throw new Error("id must be a number or a string")}class Tile2DHeader{constructor(s){this.index=s,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(s){this._bbox||(this._bbox=s,"west"in s?this.boundingBox=[[s.west,s.south],[s.east,s.north]]:this.boundingBox=[[s.left,s.top],[s.right,s.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return!!this._loader&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const s=this.content?this.content.byteLength:0;return Number.isFinite(s)||console.error("byteLength not defined in tile data"),s}async _loadData({getData:s,requestScheduler:d,onLoad:_,onError:S}){const{index:T,id:F,bbox:M,userData:P,zoom:H}=this,J=this._loaderId;this._abortController=new AbortController;const{signal:K}=this._abortController,z=await d.scheduleRequest(this,ae=>ae.isSelected?1:-1);if(!z){this._isCancelled=!0;return}if(this._isCancelled){z.done();return}let oe=null,se;try{oe=await s({index:T,id:F,bbox:M,userData:P,zoom:H,signal:K})}catch(ae){se=ae||!0}finally{z.done()}if(J===this._loaderId){if(this._loader=void 0,this.content=oe,this._isCancelled&&!oe){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,se?S(se,this):_(this)}}loadData(s){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(s),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var s;this.isLoaded||(this._isCancelled=!0,(s=this._abortController)==null||s.abort())}}const INTERSECTION={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},scratchVector$1=new Vector3,scratchNormal$1=new Vector3;class AxisAlignedBoundingBox{constructor(s=[0,0,0],d=[0,0,0],_){_=_||scratchVector$1.copy(s).add(d).scale(.5),this.center=new Vector3(_),this.halfDiagonal=new Vector3(d).subtract(this.center),this.minimum=new Vector3(s),this.maximum=new Vector3(d)}clone(){return new AxisAlignedBoundingBox(this.minimum,this.maximum,this.center)}equals(s){return this===s||!!s&&this.minimum.equals(s.minimum)&&this.maximum.equals(s.maximum)}transform(s){return this.center.transformAsPoint(s),this.halfDiagonal.transform(s),this.minimum.transform(s),this.maximum.transform(s),this}intersectPlane(s){const{halfDiagonal:d}=this,_=scratchNormal$1.from(s.normal),S=d.x*Math.abs(_.x)+d.y*Math.abs(_.y)+d.z*Math.abs(_.z),T=this.center.dot(_)+s.distance;return T-S>0?INTERSECTION.INSIDE:T+S<0?INTERSECTION.OUTSIDE:INTERSECTION.INTERSECTING}distanceTo(s){return Math.sqrt(this.distanceSquaredTo(s))}distanceSquaredTo(s){const d=scratchVector$1.from(s).subtract(this.center),{halfDiagonal:_}=this;let S=0,T;return T=Math.abs(d.x)-_.x,T>0&&(S+=T*T),T=Math.abs(d.y)-_.y,T>0&&(S+=T*T),T=Math.abs(d.z)-_.z,T>0&&(S+=T*T),S}}const scratchVector=new Vector3,scratchVector2$1=new Vector3;class BoundingSphere{constructor(s=[0,0,0],d=0){this.radius=-0,this.center=new Vector3,this.fromCenterRadius(s,d)}fromCenterRadius(s,d){return this.center.from(s),this.radius=d,this}fromCornerPoints(s,d){return d=scratchVector.from(d),this.center=new Vector3().from(s).add(d).scale(.5),this.radius=this.center.distance(d),this}equals(s){return this===s||!!s&&this.center.equals(s.center)&&this.radius===s.radius}clone(){return new BoundingSphere(this.center,this.radius)}union(s){const d=this.center,_=this.radius,S=s.center,T=s.radius,F=scratchVector.copy(S).subtract(d),M=F.magnitude();if(_>=M+T)return this.clone();if(T>=M+_)return s.clone();const P=(_+M+T)*.5;return scratchVector2$1.copy(F).scale((-_+P)/M).add(d),this.center.copy(scratchVector2$1),this.radius=P,this}expand(s){const _=scratchVector.from(s).subtract(this.center).magnitude();return _>this.radius&&(this.radius=_),this}transform(s){this.center.transform(s);const d=getScaling(scratchVector,s);return this.radius=Math.max(d[0],Math.max(d[1],d[2]))*this.radius,this}distanceSquaredTo(s){const d=this.distanceTo(s);return d*d}distanceTo(s){const _=scratchVector.from(s).subtract(this.center);return Math.max(0,_.len()-this.radius)}intersectPlane(s){const d=this.center,_=this.radius,T=s.normal.dot(d)+s.distance;return T<-_?INTERSECTION.OUTSIDE:T<_?INTERSECTION.INTERSECTING:INTERSECTION.INSIDE}}const scratchVector3$1=new Vector3,scratchOffset=new Vector3,scratchVectorU=new Vector3,scratchVectorV=new Vector3,scratchVectorW=new Vector3,scratchCorner=new Vector3,scratchToCenter=new Vector3,MATRIX3={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class OrientedBoundingBox{constructor(s=[0,0,0],d=[0,0,0,0,0,0,0,0,0]){this.center=new Vector3().from(s),this.halfAxes=new Matrix3(d)}get halfSize(){const s=this.halfAxes.getColumn(0),d=this.halfAxes.getColumn(1),_=this.halfAxes.getColumn(2);return[new Vector3(s).len(),new Vector3(d).len(),new Vector3(_).len()]}get quaternion(){const s=this.halfAxes.getColumn(0),d=this.halfAxes.getColumn(1),_=this.halfAxes.getColumn(2),S=new Vector3(s).normalize(),T=new Vector3(d).normalize(),F=new Vector3(_).normalize();return new Quaternion().fromMatrix3(new Matrix3([...S,...T,...F]))}fromCenterHalfSizeQuaternion(s,d,_){const S=new Quaternion(_),T=new Matrix3().fromQuaternion(S);return T[0]=T[0]*d[0],T[1]=T[1]*d[0],T[2]=T[2]*d[0],T[3]=T[3]*d[1],T[4]=T[4]*d[1],T[5]=T[5]*d[1],T[6]=T[6]*d[2],T[7]=T[7]*d[2],T[8]=T[8]*d[2],this.center=new Vector3().from(s),this.halfAxes=T,this}clone(){return new OrientedBoundingBox(this.center,this.halfAxes)}equals(s){return this===s||!!s&&this.center.equals(s.center)&&this.halfAxes.equals(s.halfAxes)}getBoundingSphere(s=new BoundingSphere){const d=this.halfAxes,_=d.getColumn(0,scratchVectorU),S=d.getColumn(1,scratchVectorV),T=d.getColumn(2,scratchVectorW),F=scratchVector3$1.copy(_).add(S).add(T);return s.center.copy(this.center),s.radius=F.magnitude(),s}intersectPlane(s){const d=this.center,_=s.normal,S=this.halfAxes,T=_.x,F=_.y,M=_.z,P=Math.abs(T*S[MATRIX3.COLUMN0ROW0]+F*S[MATRIX3.COLUMN0ROW1]+M*S[MATRIX3.COLUMN0ROW2])+Math.abs(T*S[MATRIX3.COLUMN1ROW0]+F*S[MATRIX3.COLUMN1ROW1]+M*S[MATRIX3.COLUMN1ROW2])+Math.abs(T*S[MATRIX3.COLUMN2ROW0]+F*S[MATRIX3.COLUMN2ROW1]+M*S[MATRIX3.COLUMN2ROW2]),H=_.dot(d)+s.distance;return H<=-P?INTERSECTION.OUTSIDE:H>=P?INTERSECTION.INSIDE:INTERSECTION.INTERSECTING}distanceTo(s){return Math.sqrt(this.distanceSquaredTo(s))}distanceSquaredTo(s){const d=scratchOffset.from(s).subtract(this.center),_=this.halfAxes,S=_.getColumn(0,scratchVectorU),T=_.getColumn(1,scratchVectorV),F=_.getColumn(2,scratchVectorW),M=S.magnitude(),P=T.magnitude(),H=F.magnitude();S.normalize(),T.normalize(),F.normalize();let J=0,K;return K=Math.abs(d.dot(S))-M,K>0&&(J+=K*K),K=Math.abs(d.dot(T))-P,K>0&&(J+=K*K),K=Math.abs(d.dot(F))-H,K>0&&(J+=K*K),J}computePlaneDistances(s,d,_=[-0,-0]){let S=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY;const F=this.center,M=this.halfAxes,P=M.getColumn(0,scratchVectorU),H=M.getColumn(1,scratchVectorV),J=M.getColumn(2,scratchVectorW),K=scratchCorner.copy(P).add(H).add(J).add(F),z=scratchToCenter.copy(K).subtract(s);let oe=d.dot(z);return S=Math.min(oe,S),T=Math.max(oe,T),K.copy(F).add(P).add(H).subtract(J),z.copy(K).subtract(s),oe=d.dot(z),S=Math.min(oe,S),T=Math.max(oe,T),K.copy(F).add(P).subtract(H).add(J),z.copy(K).subtract(s),oe=d.dot(z),S=Math.min(oe,S),T=Math.max(oe,T),K.copy(F).add(P).subtract(H).subtract(J),z.copy(K).subtract(s),oe=d.dot(z),S=Math.min(oe,S),T=Math.max(oe,T),F.copy(K).subtract(P).add(H).add(J),z.copy(K).subtract(s),oe=d.dot(z),S=Math.min(oe,S),T=Math.max(oe,T),F.copy(K).subtract(P).add(H).subtract(J),z.copy(K).subtract(s),oe=d.dot(z),S=Math.min(oe,S),T=Math.max(oe,T),F.copy(K).subtract(P).subtract(H).add(J),z.copy(K).subtract(s),oe=d.dot(z),S=Math.min(oe,S),T=Math.max(oe,T),F.copy(K).subtract(P).subtract(H).subtract(J),z.copy(K).subtract(s),oe=d.dot(z),S=Math.min(oe,S),T=Math.max(oe,T),_[0]=S,_[1]=T,_}transform(s){this.center.transformAsPoint(s);const d=this.halfAxes.getColumn(0,scratchVectorU);d.transformAsPoint(s);const _=this.halfAxes.getColumn(1,scratchVectorV);_.transformAsPoint(s);const S=this.halfAxes.getColumn(2,scratchVectorW);return S.transformAsPoint(s),this.halfAxes=new Matrix3([...d,..._,...S]),this}getTransform(){throw new Error("not implemented")}}const scratchPosition=new Vector3,scratchNormal=new Vector3;class Plane{constructor(s=[0,0,1],d=0){this.normal=new Vector3,this.distance=-0,this.fromNormalDistance(s,d)}fromNormalDistance(s,d){return assert$4(Number.isFinite(d)),this.normal.from(s).normalize(),this.distance=d,this}fromPointNormal(s,d){s=scratchPosition.from(s),this.normal.from(d).normalize();const _=-this.normal.dot(s);return this.distance=_,this}fromCoefficients(s,d,_,S){return this.normal.set(s,d,_),assert$4(equals$2(this.normal.len(),1)),this.distance=S,this}clone(){return new Plane(this.normal,this.distance)}equals(s){return equals$2(this.distance,s.distance)&&equals$2(this.normal,s.normal)}getPointDistance(s){return this.normal.dot(s)+this.distance}transform(s){const d=scratchNormal.copy(this.normal).transformAsVector(s).normalize(),_=this.normal.scale(-this.distance).transform(s);return this.fromPointNormal(_,d)}projectPointOntoPlane(s,d=[0,0,0]){const _=scratchPosition.from(s),S=this.getPointDistance(_),T=scratchNormal.copy(this.normal).scale(S);return _.subtract(T).to(d)}}const faces=[new Vector3([1,0,0]),new Vector3([0,1,0]),new Vector3([0,0,1])],scratchPlaneCenter=new Vector3,scratchPlaneNormal=new Vector3;class CullingVolume{constructor(s=[]){this.planes=s}fromBoundingSphere(s){this.planes.length=2*faces.length;const d=s.center,_=s.radius;let S=0;for(const T of faces){let F=this.planes[S],M=this.planes[S+1];F||(F=this.planes[S]=new Plane),M||(M=this.planes[S+1]=new Plane);const P=scratchPlaneCenter.copy(T).scale(-_).add(d);F.fromPointNormal(P,T);const H=scratchPlaneCenter.copy(T).scale(_).add(d),J=scratchPlaneNormal.copy(T).negate();M.fromPointNormal(H,J),S+=2}return this}computeVisibility(s){let d=INTERSECTION.INSIDE;for(const _ of this.planes)switch(s.intersectPlane(_)){case INTERSECTION.OUTSIDE:return INTERSECTION.OUTSIDE;case INTERSECTION.INTERSECTING:d=INTERSECTION.INTERSECTING;break}return d}computeVisibilityWithPlaneMask(s,d){if(assert$4(Number.isFinite(d),"parentPlaneMask is required."),d===CullingVolume.MASK_OUTSIDE||d===CullingVolume.MASK_INSIDE)return d;let _=CullingVolume.MASK_INSIDE;const S=this.planes;for(let T=0;T<this.planes.length;++T){const F=T<31?1<<T:0;if(T<31&&!(d&F))continue;const M=S[T],P=s.intersectPlane(M);if(P===INTERSECTION.OUTSIDE)return CullingVolume.MASK_OUTSIDE;P===INTERSECTION.INTERSECTING&&(_|=F)}return _}}CullingVolume.MASK_OUTSIDE=4294967295;CullingVolume.MASK_INSIDE=0;CullingVolume.MASK_INDETERMINATE=2147483647;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;const scratchMatrix=new Matrix3,scratchUnitary=new Matrix3,scratchDiagonal=new Matrix3,jMatrix=new Matrix3,jMatrixTranspose=new Matrix3;function computeEigenDecomposition(f,s={}){const d=EPSILON20,_=10;let S=0,T=0;const F=scratchUnitary,M=scratchDiagonal;F.identity(),M.copy(f);const P=d*computeFrobeniusNorm(M);for(;T<_&&offDiagonalFrobeniusNorm(M)>P;)shurDecomposition(M,jMatrix),jMatrixTranspose.copy(jMatrix).transpose(),M.multiplyRight(jMatrix),M.multiplyLeft(jMatrixTranspose),F.multiplyRight(jMatrix),++S>2&&(++T,S=0);return s.unitary=F.toTarget(s.unitary),s.diagonal=M.toTarget(s.diagonal),s}function computeFrobeniusNorm(f){let s=0;for(let d=0;d<9;++d){const _=f[d];s+=_*_}return Math.sqrt(s)}const rowVal=[1,0,0],colVal=[2,2,1];function offDiagonalFrobeniusNorm(f){let s=0;for(let d=0;d<3;++d){const _=f[scratchMatrix.getElementIndex(colVal[d],rowVal[d])];s+=2*_*_}return Math.sqrt(s)}function shurDecomposition(f,s){const d=EPSILON15;let _=0,S=1;for(let H=0;H<3;++H){const J=Math.abs(f[scratchMatrix.getElementIndex(colVal[H],rowVal[H])]);J>_&&(S=H,_=J)}const T=rowVal[S],F=colVal[S];let M=1,P=0;if(Math.abs(f[scratchMatrix.getElementIndex(F,T)])>d){const H=f[scratchMatrix.getElementIndex(F,F)],J=f[scratchMatrix.getElementIndex(T,T)],K=f[scratchMatrix.getElementIndex(F,T)],z=(H-J)/2/K;let oe;z<0?oe=-1/(-z+Math.sqrt(1+z*z)):oe=1/(z+Math.sqrt(1+z*z)),M=1/Math.sqrt(1+oe*oe),P=oe*M}return Matrix3.IDENTITY.to(s),s[scratchMatrix.getElementIndex(T,T)]=s[scratchMatrix.getElementIndex(F,F)]=M,s[scratchMatrix.getElementIndex(F,T)]=P,s[scratchMatrix.getElementIndex(T,F)]=-P,s}const scratchVector2=new Vector3,scratchVector3=new Vector3,scratchVector4=new Vector3,scratchVector5=new Vector3,scratchVector6=new Vector3,scratchCovarianceResult=new Matrix3,scratchEigenResult={diagonal:new Matrix3,unitary:new Matrix3};function makeOrientedBoundingBoxFromPoints(f,s=new OrientedBoundingBox){if(!f||f.length===0)return s.halfAxes=new Matrix3([0,0,0,0,0,0,0,0,0]),s.center=new Vector3,s;const d=f.length,_=new Vector3(0,0,0);for(const It of f)_.add(It);const S=1/d;_.multiplyByScalar(S);let T=0,F=0,M=0,P=0,H=0,J=0;for(const It of f){const St=scratchVector2.copy(It).subtract(_);T+=St.x*St.x,F+=St.x*St.y,M+=St.x*St.z,P+=St.y*St.y,H+=St.y*St.z,J+=St.z*St.z}T*=S,F*=S,M*=S,P*=S,H*=S,J*=S;const K=scratchCovarianceResult;K[0]=T,K[1]=F,K[2]=M,K[3]=F,K[4]=P,K[5]=H,K[6]=M,K[7]=H,K[8]=J;const{unitary:z}=computeEigenDecomposition(K,scratchEigenResult),oe=s.halfAxes.copy(z);let se=oe.getColumn(0,scratchVector4),ae=oe.getColumn(1,scratchVector5),ge=oe.getColumn(2,scratchVector6),pe=-Number.MAX_VALUE,he=-Number.MAX_VALUE,ve=-Number.MAX_VALUE,be=Number.MAX_VALUE,Re=Number.MAX_VALUE,Fe=Number.MAX_VALUE;for(const It of f)scratchVector2.copy(It),pe=Math.max(scratchVector2.dot(se),pe),he=Math.max(scratchVector2.dot(ae),he),ve=Math.max(scratchVector2.dot(ge),ve),be=Math.min(scratchVector2.dot(se),be),Re=Math.min(scratchVector2.dot(ae),Re),Fe=Math.min(scratchVector2.dot(ge),Fe);se=se.multiplyByScalar(.5*(be+pe)),ae=ae.multiplyByScalar(.5*(Re+he)),ge=ge.multiplyByScalar(.5*(Fe+ve)),s.center.copy(se).add(ae).add(ge);const ye=scratchVector3.set(pe-be,he-Re,ve-Fe).multiplyByScalar(.5),Ue=new Matrix3([ye[0],0,0,0,ye[1],0,0,0,ye[2]]);return s.halfAxes.multiplyRight(Ue),s}const TILE_SIZE$2=512,MAX_MAPS=3,REF_POINTS_5=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],REF_POINTS_9=REF_POINTS_5.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),REF_POINTS_11=REF_POINTS_9.concat([[.25,.5],[.75,.5]]);class OSMNode{constructor(s,d,_){this.x=s,this.y=d,this.z=_}get children(){if(!this._children){const s=this.x*2,d=this.y*2,_=this.z+1;this._children=[new OSMNode(s,d,_),new OSMNode(s,d+1,_),new OSMNode(s+1,d,_),new OSMNode(s+1,d+1,_)]}return this._children}update(s){const{viewport:d,cullingVolume:_,elevationBounds:S,minZ:T,maxZ:F,bounds:M,offset:P,project:H}=s,J=this.getBoundingVolume(S,P,H);if(M&&!this.insideBounds(M)||_.computeVisibility(J)<0)return!1;if(!this.childVisible){let{z}=this;if(z<F&&z>=T){const oe=J.distanceTo(d.cameraPosition)*d.scale/d.height;z+=Math.floor(Math.log2(oe))}if(z>=F)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const z of this.children)z.update(s);return!0}getSelected(s=[]){if(this.selected&&s.push(this),this._children)for(const d of this._children)d.getSelected(s);return s}insideBounds([s,d,_,S]){const T=Math.pow(2,this.z),F=TILE_SIZE$2/T;return this.x*F<_&&this.y*F<S&&(this.x+1)*F>s&&(this.y+1)*F>d}getBoundingVolume(s,d,_){if(_){const P=this.z<1?REF_POINTS_11:this.z<2?REF_POINTS_9:REF_POINTS_5,H=[];for(const J of P){const K=osmTile2lngLat(this.x+J[0],this.y+J[1],this.z);K[2]=s[0],H.push(_(K)),s[0]!==s[1]&&(K[2]=s[1],H.push(_(K)))}return makeOrientedBoundingBoxFromPoints(H)}const S=Math.pow(2,this.z),T=TILE_SIZE$2/S,F=this.x*T+d*TILE_SIZE$2,M=TILE_SIZE$2-(this.y+1)*T;return new AxisAlignedBoundingBox([F,M,s[0]],[F+T,M+T,s[1]])}}function getOSMTileIndices(f,s,d,_){const S=f instanceof GlobeViewport&&f.resolution?f.projectPosition:null,T=Object.values(f.getFrustumPlanes()).map(({normal:oe,distance:se})=>new Plane(oe.clone().negate(),se)),F=new CullingVolume(T),M=f.distanceScales.unitsPerMeter[2],P=d&&d[0]*M||0,H=d&&d[1]*M||0,J=f instanceof WebMercatorViewport$1&&f.pitch<=60?s:0;if(_){const[oe,se,ae,ge]=_,pe=lngLatToWorld$1([oe,ge]),he=lngLatToWorld$1([ae,se]);_=[pe[0],TILE_SIZE$2-pe[1],he[0],TILE_SIZE$2-he[1]]}const K=new OSMNode(0,0,0),z={viewport:f,project:S,cullingVolume:F,elevationBounds:[P,H],minZ:J,maxZ:s,bounds:_,offset:0};if(K.update(z),f instanceof WebMercatorViewport$1&&f.subViewports&&f.subViewports.length>1){for(z.offset=-1;K.update(z)&&!(--z.offset<-MAX_MAPS););for(z.offset=1;K.update(z)&&!(++z.offset>MAX_MAPS););}return K.getSelected()}const TILE_SIZE$1=512,DEFAULT_EXTENT=[-1/0,-1/0,1/0,1/0],urlType={type:"object",value:null,validate:(f,s)=>s.optional&&f===null||typeof f=="string"||Array.isArray(f)&&f.every(d=>typeof d=="string"),equal:(f,s)=>{if(f===s)return!0;if(!Array.isArray(f)||!Array.isArray(s))return!1;const d=f.length;if(d!==s.length)return!1;for(let _=0;_<d;_++)if(f[_]!==s[_])return!1;return!0}};function transformBox(f,s){const d=[s.transformAsPoint([f[0],f[1]]),s.transformAsPoint([f[2],f[1]]),s.transformAsPoint([f[0],f[3]]),s.transformAsPoint([f[2],f[3]])];return[Math.min(...d.map(S=>S[0])),Math.min(...d.map(S=>S[1])),Math.max(...d.map(S=>S[0])),Math.max(...d.map(S=>S[1]))]}function stringHash(f){return Math.abs(f.split("").reduce((s,d)=>(s<<5)-s+d.charCodeAt(0)|0,0))}function getURLFromTemplate(f,s){if(!f||!f.length)return null;const{index:d,id:_}=s;if(Array.isArray(f)){const T=stringHash(_)%f.length;f=f[T]}let S=f;for(const T of Object.keys(d)){const F=new RegExp(`{${T}}`,"g");S=S.replace(F,String(d[T]))}return Number.isInteger(d.y)&&Number.isInteger(d.z)&&(S=S.replace(/\{-y\}/g,String(Math.pow(2,d.z)-d.y-1))),S}function getBoundingBox(f,s,d){let _;return _=f.getBounds(),f.isGeospatial?[Math.max(_[0],d[0]),Math.max(_[1],d[1]),Math.min(_[2],d[2]),Math.min(_[3],d[3])]:[Math.max(Math.min(_[0],d[2]),d[0]),Math.max(Math.min(_[1],d[3]),d[1]),Math.min(Math.max(_[2],d[0]),d[2]),Math.min(Math.max(_[3],d[1]),d[3])]}function getCullBounds({viewport:f,z:s,cullRect:d}){return(f.subViewports||[f]).map(S=>getCullBoundsInViewport(S,s||0,d))}function getCullBoundsInViewport(f,s,d){if(!Array.isArray(s)){const T=d.x-f.x,F=d.y-f.y,{width:M,height:P}=d,H={targetZ:s},J=f.unproject([T,F],H),K=f.unproject([T+M,F],H),z=f.unproject([T,F+P],H),oe=f.unproject([T+M,F+P],H);return[Math.min(J[0],K[0],z[0],oe[0]),Math.min(J[1],K[1],z[1],oe[1]),Math.max(J[0],K[0],z[0],oe[0]),Math.max(J[1],K[1],z[1],oe[1])]}const _=getCullBoundsInViewport(f,s[0],d),S=getCullBoundsInViewport(f,s[1],d);return[Math.min(_[0],S[0]),Math.min(_[1],S[1]),Math.max(_[2],S[2]),Math.max(_[3],S[3])]}function getIndexingCoords(f,s,d){return d?transformBox(f,d).map(S=>S*s/TILE_SIZE$1):f.map(_=>_*s/TILE_SIZE$1)}function getScale(f,s){return Math.pow(2,f)*TILE_SIZE$1/s}function osmTile2lngLat(f,s,d){const _=getScale(d,TILE_SIZE$1),S=f/_*360-180,T=Math.PI-2*Math.PI*s/_,F=180/Math.PI*Math.atan(.5*(Math.exp(T)-Math.exp(-T)));return[S,F]}function tile2XY(f,s,d,_){const S=getScale(d,_);return[f/S*TILE_SIZE$1,s/S*TILE_SIZE$1]}function tileToBoundingBox(f,s,d,_,S=TILE_SIZE$1){if(f.isGeospatial){const[H,J]=osmTile2lngLat(s,d,_),[K,z]=osmTile2lngLat(s+1,d+1,_);return{west:H,north:J,east:K,south:z}}const[T,F]=tile2XY(s,d,_,S),[M,P]=tile2XY(s+1,d+1,_,S);return{left:T,top:F,right:M,bottom:P}}function getIdentityTileIndices(f,s,d,_,S){const T=getBoundingBox(f,null,_),F=getScale(s,d),[M,P,H,J]=getIndexingCoords(T,F,S),K=[];for(let z=Math.floor(M);z<H;z++)for(let oe=Math.floor(P);oe<J;oe++)K.push({x:z,y:oe,z:s});return K}function getTileIndices({viewport:f,maxZoom:s,minZoom:d,zRange:_,extent:S,tileSize:T=TILE_SIZE$1,modelMatrix:F,modelMatrixInverse:M,zoomOffset:P=0}){let H=f.isGeospatial?Math.round(f.zoom+Math.log2(TILE_SIZE$1/T))+P:Math.ceil(f.zoom)+P;if(typeof d=="number"&&Number.isFinite(d)&&H<d){if(!S)return[];H=d}typeof s=="number"&&Number.isFinite(s)&&H>s&&(H=s);let J=S;return F&&M&&S&&!f.isGeospatial&&(J=transformBox(S,F)),f.isGeospatial?getOSMTileIndices(f,H,_,S):getIdentityTileIndices(f,H,T,J||DEFAULT_EXTENT,M)}function memoize$1(f){let s={},d;return _=>{for(const S in _)if(!isEqual$1(_[S],s[S])){d=f(_),s=_;break}return d}}function isEqual$1(f,s){if(f===s)return!0;if(Array.isArray(f)){const d=f.length;if(!s||s.length!==d)return!1;for(let _=0;_<d;_++)if(f[_]!==s[_])return!1;return!0}return!1}const TILE_STATE_VISITED=1,TILE_STATE_VISIBLE=2,STRATEGY_NEVER="never",STRATEGY_REPLACE="no-overlap",STRATEGY_DEFAULT="best-available",DEFAULT_CACHE_SCALE=5,STRATEGIES={[STRATEGY_DEFAULT]:updateTileStateDefault,[STRATEGY_REPLACE]:updateTileStateReplace,[STRATEGY_NEVER]:()=>{}},DEFAULT_TILESET2D_PROPS={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};class Tileset2D{constructor(s){this._getCullBounds=memoize$1(getCullBounds),this.opts={...DEFAULT_TILESET2D_PROPS,...s},this.setOptions(this.opts),this.onTileLoad=d=>{var _,S;(S=(_=this.opts).onTileLoad)==null||S.call(_,d),this.opts.maxCacheByteSize!=null&&(this._cacheByteSize+=d.byteLength,this._resizeCache())},this._requestScheduler=new RequestScheduler({throttleRequests:this.opts.maxRequests>0||this.opts.debounceTime>0,maxRequests:this.opts.maxRequests,debounceTime:this.opts.debounceTime}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._zRange=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Matrix4,this._modelMatrixInverse=new Matrix4}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(s=>s.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(s=>s.needsReload)}setOptions(s){Object.assign(this.opts,s),Number.isFinite(s.maxZoom)&&(this._maxZoom=Math.floor(s.maxZoom)),Number.isFinite(s.minZoom)&&(this._minZoom=Math.ceil(s.minZoom))}finalize(){for(const s of this._cache.values())s.isLoading&&s.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const s of this._cache.keys()){const d=this._cache.get(s);!this._selectedTiles||!this._selectedTiles.includes(d)?this._cache.delete(s):d.setNeedsReload()}}update(s,{zRange:d,modelMatrix:_}={zRange:null,modelMatrix:null}){const S=_?new Matrix4(_):new Matrix4,T=!S.equals(this._modelMatrix);if(!this._viewport||!s.equals(this._viewport)||!equals$2(this._zRange,d)||T){T&&(this._modelMatrixInverse=S.clone().invert(),this._modelMatrix=S),this._viewport=s,this._zRange=d;const M=this.getTileIndices({viewport:s,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:d,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=M.map(P=>this._getTile(P,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(M=>this._getTile(M.index,!0)));const F=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),F&&this._frameNumber++,this._frameNumber}isTileVisible(s,d){if(!s.isVisible)return!1;if(d&&this._viewport){const _=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:d}),{bbox:S}=s;for(const[T,F,M,P]of _){let H;if("west"in S)H=S.west<M&&S.east>T&&S.south<P&&S.north>F;else{const J=Math.min(S.top,S.bottom),K=Math.max(S.top,S.bottom);H=S.left<M&&S.right>T&&J<P&&K>F}if(H)return!0}return!1}return!0}getTileIndices({viewport:s,maxZoom:d,minZoom:_,zRange:S,modelMatrix:T,modelMatrixInverse:F}){const{tileSize:M,extent:P,zoomOffset:H}=this.opts;return getTileIndices({viewport:s,maxZoom:d,minZoom:_,zRange:S,tileSize:M,extent:P,modelMatrix:T,modelMatrixInverse:F,zoomOffset:H})}getTileId(s){return`${s.x}-${s.y}-${s.z}`}getTileZoom(s){return s.z}getTileMetadata(s){const{tileSize:d}=this.opts;return{bbox:tileToBoundingBox(this._viewport,s.x,s.y,s.z,d)}}getParentIndex(s){const d=Math.floor(s.x/2),_=Math.floor(s.y/2),S=s.z-1;return{x:d,y:_,z:S}}updateTileStates(){const s=this.opts.refinementStrategy||STRATEGY_DEFAULT,d=new Array(this._cache.size);let _=0;for(const S of this._cache.values())d[_++]=S.isVisible,S.isSelected=!1,S.isVisible=!1;for(const S of this._selectedTiles)S.isSelected=!0,S.isVisible=!0;(typeof s=="function"?s:STRATEGIES[s])(Array.from(this._cache.values())),_=0;for(const S of this._cache.values())if(d[_++]!==S.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:s=0}=this.opts,d=[];let _=0;for(const S of this._cache.values())S.isLoading&&(_++,!S.isSelected&&!S.isVisible&&d.push(S));for(;s>0&&_>s&&d.length>0;)d.shift().abort(),_--}_rebuildTree(){const{_cache:s}=this;for(const d of s.values())d.parent=null,d.children&&(d.children.length=0);for(const d of s.values()){const _=this._getNearestAncestor(d);d.parent=_,_!=null&&_.children&&_.children.push(d)}}_resizeCache(){var F,M;const{_cache:s,opts:d}=this,_=d.maxCacheSize??(d.maxCacheByteSize!=null?1/0:DEFAULT_CACHE_SCALE*this.selectedTiles.length),S=d.maxCacheByteSize??1/0;if(s.size>_||this._cacheByteSize>S){for(const[P,H]of s)if(!H.isVisible&&!H.isSelected&&(this._cacheByteSize-=d.maxCacheByteSize!=null?H.byteLength:0,s.delete(P),(M=(F=this.opts).onTileUnload)==null||M.call(F,H)),s.size<=_&&this._cacheByteSize<=S)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((P,H)=>P.zoom-H.zoom),this._dirty=!1)}_getTile(s,d){const _=this.getTileId(s);let S=this._cache.get(_),T=!1;return!S&&d?(S=new Tile2DHeader(s),Object.assign(S,this.getTileMetadata(S.index)),Object.assign(S,{id:_,zoom:this.getTileZoom(S.index)}),T=!0,this._cache.set(_,S),this._dirty=!0):S&&S.needsReload&&(T=!0),S&&T&&S.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),S}_getNearestAncestor(s){const{_minZoom:d=0}=this;let _=s.index;for(;this.getTileZoom(_)>d;){_=this.getParentIndex(_);const S=this._getTile(_);if(S)return S}return null}}function updateTileStateDefault(f){for(const s of f)s.state=0;for(const s of f)s.isSelected&&!getPlaceholderInAncestors(s)&&getPlaceholderInChildren(s);for(const s of f)s.isVisible=!!(s.state&TILE_STATE_VISIBLE)}function updateTileStateReplace(f){for(const d of f)d.state=0;for(const d of f)d.isSelected&&getPlaceholderInAncestors(d);const s=Array.from(f).sort((d,_)=>d.zoom-_.zoom);for(const d of s)if(d.isVisible=!!(d.state&TILE_STATE_VISIBLE),d.children&&(d.isVisible||d.state&TILE_STATE_VISITED))for(const _ of d.children)_.state=TILE_STATE_VISITED;else d.isSelected&&getPlaceholderInChildren(d)}function getPlaceholderInAncestors(f){let s=f;for(;s;){if(s.isLoaded||s.content)return s.state|=TILE_STATE_VISIBLE,!0;s=s.parent}return!1}function getPlaceholderInChildren(f){for(const s of f.children)s.isLoaded||s.content?s.state|=TILE_STATE_VISIBLE:getPlaceholderInChildren(s)}const defaultProps$a={TilesetClass:Tileset2D,data:{type:"data",value:[]},dataComparator:urlType.equal,renderSubLayers:{type:"function",value:f=>new GeoJsonLayer(f)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:f=>{}},onTileUnload:{type:"function",value:f=>{}},onTileError:{type:"function",value:f=>console.error(f)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:STRATEGY_DEFAULT,zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0};class TileLayer extends CompositeLayer{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var s,d;(d=(s=this.state)==null?void 0:s.tileset)==null||d.finalize()}get isLoaded(){var s,d,_;return!!((_=(d=(s=this.state)==null?void 0:s.tileset)==null?void 0:d.selectedTiles)!=null&&_.every(S=>S.isLoaded&&S.layers&&S.layers.every(T=>T.isLoaded)))}shouldUpdateState({changeFlags:s}){return s.somethingChanged}updateState({changeFlags:s}){let{tileset:d}=this.state;const _=s.propsOrDataChanged||s.updateTriggersChanged,S=s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getTileData);d?_&&(d.setOptions(this._getTilesetOptions()),S?d.reloadAll():d.tiles.forEach(T=>{T.layers=null})):(d=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:d})),this._updateTileset()}_getTilesetOptions(){const{tileSize:s,maxCacheSize:d,maxCacheByteSize:_,refinementStrategy:S,extent:T,maxZoom:F,minZoom:M,maxRequests:P,debounceTime:H,zoomOffset:J}=this.props;return{maxCacheSize:d,maxCacheByteSize:_,maxZoom:F,minZoom:M,tileSize:s,refinementStrategy:S,extent:T,maxRequests:P,debounceTime:H,zoomOffset:J,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const s=this.state.tileset,{zRange:d,modelMatrix:_}=this.props,S=s.update(this.context.viewport,{zRange:d,modelMatrix:_}),{isLoaded:T}=s,F=this.state.isLoaded!==T,M=this.state.frameNumber!==S;T&&(F||M)&&this._onViewportLoad(),M&&this.setState({frameNumber:S}),this.state.isLoaded=T}_onViewportLoad(){const{tileset:s}=this.state,{onViewportLoad:d}=this.props;d&&d(s.selectedTiles)}_onTileLoad(s){this.props.onTileLoad(s),s.layers=null,this.setNeedsUpdate()}_onTileError(s,d){this.props.onTileError(s),d.layers=null,this.setNeedsUpdate()}_onTileUnload(s){this.props.onTileUnload(s)}getTileData(s){const{data:d,getTileData:_,fetch:S}=this.props,{signal:T}=s;return s.url=typeof d=="string"||Array.isArray(d)?getURLFromTemplate(d,s):null,_?_(s):S&&s.url?S(s.url,{propName:"data",layer:this,signal:T}):null}renderSubLayers(s){return this.props.renderSubLayers(s)}getSubLayerPropsByTile(s){return null}getPickingInfo(s){const d=s.sourceLayer,_=d.props.tile,S=s.info;return S.picked&&(S.tile=_),S.sourceTile=_,S.sourceTileSubLayer=d,S}_updateAutoHighlight(s){s.sourceTileSubLayer.updateAutoHighlight(s)}renderLayers(){return this.state.tileset.tiles.map(s=>{const d=this.getSubLayerPropsByTile(s);if(!(!s.isLoaded&&!s.content))if(s.layers)d&&s.layers[0]&&Object.keys(d).some(_=>s.layers[0].props[_]!==d[_])&&(s.layers=s.layers.map(_=>_.clone(d)));else{const _=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:s.id,updateTriggers:this.props.updateTriggers}),data:s.content,_offset:0,tile:s});s.layers=flatten$1(_,Boolean).map(S=>S.clone({tile:s,...d}))}return s.layers})}filterSubLayer({layer:s,cullRect:d}){const{tile:_}=s.props;return this.state.tileset.isTileVisible(_,d)}}TileLayer.defaultProps=defaultProps$a;TileLayer.layerName="TileLayer";function range$2(f){return[...Array(f).keys()]}function padWithDefault(f,s,d){for(let _=0;_<d;_+=1)f.push(s);return f}function getDtypeValues(f){const s=DTYPE_VALUES[f];if(!s){const d=Object.keys(DTYPE_VALUES);throw Error(`Dtype not supported, got ${f}. Must be one of ${d}.`)}return s}function padContrastLimits({contrastLimits:f=[],channelsVisible:s,domain:d,dtype:_}){const S=(d==null?void 0:d[1])||getDtypeValues(_).max,T=f.map((P,H)=>s[H]?P:[S,S]),F=MAX_CHANNELS-T.length;if(F<0)throw Error(`${T.lengths} channels passed in, but only 6 are allowed.`);return padWithDefault(T,[S,S],F).reduce((P,H)=>P.concat(H),[])}function getPhysicalSizeScalingMatrix$1(f){var S;const{x:s,y:d,z:_}=((S=f==null?void 0:f.meta)==null?void 0:S.physicalSizes)??{};if(s!=null&&s.size&&(d!=null&&d.size)&&(_!=null&&_.size)){const T=Math.min(_.size,s.size,d.size),F=[s.size/T,d.size/T,_.size/T];return new Matrix4().scale(F)}return new Matrix4().identity()}function makeBoundingBox(f){const s=new OrthographicView().makeViewport({viewState:f,height:f.height,width:f.width});return[s.unproject([0,0]),s.unproject([s.width,0]),s.unproject([s.width,s.height]),s.unproject([0,s.height])]}const TARGETS=[1,2,3,4,5,10,20,25,50,100,200,250,500,1e3],MIN_TARGET=TARGETS[0],MAX_TARGET=TARGETS[TARGETS.length-1],SI_PREFIXES=[{symbol:"Y",exponent:24},{symbol:"Z",exponent:21},{symbol:"E",exponent:18},{symbol:"P",exponent:15},{symbol:"T",exponent:12},{symbol:"G",exponent:9},{symbol:"M",exponent:6},{symbol:"k",exponent:3},{symbol:"h",exponent:2},{symbol:"da",exponent:1},{symbol:"",exponent:0},{symbol:"d",exponent:-1},{symbol:"c",exponent:-2},{symbol:"m",exponent:-3},{symbol:"",exponent:-6},{symbol:"n",exponent:-9},{symbol:"p",exponent:-12},{symbol:"f",exponent:-15},{symbol:"a",exponent:-18},{symbol:"z",exponent:-21},{symbol:"y",exponent:-24}];function sizeToMeters(f,s){if(!s||s==="m")return f;if(s.length>1){let d=s.substring(0,s.length-1);d==="u"&&(d="");const _=SI_PREFIXES.find(S=>S.symbol===d);if(_)return f*10**_.exponent}throw new Error("Received unknown unit")}function snapValue(f){let s=0;(f<MIN_TARGET||f>MAX_TARGET)&&(s=Math.floor(Math.log10(f)));let d=SI_PREFIXES.find(F=>F.exponent%3===0&&F.exponent<=s),_=f/10**d.exponent;_>500&&_<=1e3&&(d=SI_PREFIXES.find(F=>F.exponent%3===0&&F.exponent<=s+3),_=f/10**d.exponent);const S=TARGETS.find(F=>F>_);return[S*10**d.exponent,S,d.symbol]}function addAlpha(f){if(!(f instanceof Uint8Array))throw new Error("Expected Uint8Array");const s=new Uint8Array(f.length+f.length/3);for(let d=0;d<f.length/3;d+=1)s[d*4]=f[d*3],s[d*4+1]=f[d*3+1],s[d*4+2]=f[d*3+2],s[d*4+3]=255;return s}const PHOTOMETRIC_INTERPRETATIONS={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},defaultProps$8={...BitmapLayer$1.defaultProps,pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:COORDINATE_SYSTEM.CARTESIAN},getPhotometricInterpretationShader=(f,s)=>{const d=s?"true":"false",_=`vec3(${(s||[0,0,0]).map(S=>String(S/255)).join(",")})`;switch(f){case PHOTOMETRIC_INTERPRETATIONS.RGB:return`color[3] = (${d} && (color.rgb == ${_})) ? 0.0 : color.a;`;case PHOTOMETRIC_INTERPRETATIONS.WhiteIsZero:return`          float value = 1.0 - (color.r / 256.0);
          color = vec4(value, value, value, (${d} && vec3(value, value, value) == ${_}) ? 0.0 : color.a);
        `;case PHOTOMETRIC_INTERPRETATIONS.BlackIsZero:return`          float value = (color.r / 256.0);
          color = vec4(value, value, value, (${d} && vec3(value, value, value) == ${_}) ? 0.0 : color.a);
        `;case PHOTOMETRIC_INTERPRETATIONS.YCbCr:return`          float y = color[0];
          float cb = color[1];
          float cr = color[2];
          color[0] = (y + (1.40200 * (cr - .5)));
          color[1] = (y - (0.34414 * (cb - .5)) - (0.71414 * (cr - .5)));
          color[2] = (y + (1.77200 * (cb - .5)));
          color[3] = (${d} && distance(color.rgb, ${_}) < 0.01) ? 0.0 : color.a;
        `;default:return console.error("Unsupported photometric interpretation or none provided.  No transformation will be done to image data"),""}},getTransparentColor=f=>{switch(f){case PHOTOMETRIC_INTERPRETATIONS.RGB:return[0,0,0,0];case PHOTOMETRIC_INTERPRETATIONS.WhiteIsZero:return[255,255,255,0];case PHOTOMETRIC_INTERPRETATIONS.BlackIsZero:return[0,0,0,0];case PHOTOMETRIC_INTERPRETATIONS.YCbCr:return[16,128,128,0];default:return console.error("Unsupported photometric interpretation or none provided.  No transformation will be done to image data"),[0,0,0,0]}};class BitmapLayerWrapper extends BitmapLayer$1{_getModel(s){const{photometricInterpretation:d,transparentColorInHook:_}=this.props,S=getPhotometricInterpretationShader(d,_);return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),topology:"triangle-list",isInstanced:!1,inject:{"fs:DECKGL_FILTER_COLOR":S}})}}const BitmapLayer=class extends CompositeLayer{initializeState(f){const{device:s}=this.context;s.setParametersWebGL({[GLEnum.UNPACK_ALIGNMENT]:1,[GLEnum.PACK_ALIGNMENT]:1}),super.initializeState(f)}renderLayers(){const{photometricInterpretation:f,transparentColor:s}=this.props,d=getTransparentColor(f);return this.props.image.data=addAlpha(this.props.image.data),new BitmapLayerWrapper(this.props,{transparentColor:d,transparentColorInHook:s,id:`${this.props.id}-wrapped`})}};BitmapLayer.layerName="BitmapLayer";BitmapLayer.PHOTOMETRIC_INTERPRETATIONS=PHOTOMETRIC_INTERPRETATIONS;BitmapLayer.defaultProps={...defaultProps$8,image:{type:"object",value:{},compare:!0},transparentColor:{type:"array",value:[0,0,0],compare:!0},photometricInterpretation:{type:"number",value:2,compare:!0}};BitmapLayerWrapper.defaultProps=defaultProps$8;BitmapLayerWrapper.layerName="BitmapLayerWrapper";const fs$2=`float apply_contrast_limits(float intensity, vec2 contrastLimits) {
    return  max(0., (intensity - contrastLimits[0]) / max(0.0005, (contrastLimits[1] - contrastLimits[0])));
}
`,channels={name:"channel-intensity",defines:{SAMPLER_TYPE:"usampler2D",COLORMAP_FUNCTION:""},fs:fs$2},fs$1$1=`#version 300 es
#define SHADER_NAME xr-layer-fragment-shader

precision highp float;
precision highp int;
precision highp SAMPLER_TYPE;

// our texture
uniform SAMPLER_TYPE channel0;
uniform SAMPLER_TYPE channel1;
uniform SAMPLER_TYPE channel2;
uniform SAMPLER_TYPE channel3;
uniform SAMPLER_TYPE channel4;
uniform SAMPLER_TYPE channel5;

in vec2 vTexCoord;

// range
uniform vec2 contrastLimits[6];

out vec4 fragColor;

void main() {

  float intensity0 = float(texture(channel0, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity0, contrastLimits[0], 0);
  float intensity1 = float(texture(channel1, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity1, contrastLimits[1], 1);
  float intensity2 = float(texture(channel2, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity2, contrastLimits[2], 2);
  float intensity3 = float(texture(channel3, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity3, contrastLimits[3], 3);
  float intensity4 = float(texture(channel4, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity4, contrastLimits[4], 4);
  float intensity5 = float(texture(channel5, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity5, contrastLimits[5], 5);

  DECKGL_MUTATE_COLOR(fragColor, intensity0, intensity1, intensity2, intensity3, intensity4, intensity5, vTexCoord);


  geometry.uv = vTexCoord;
  DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,vs$1$1=`#version 300 es
#define SHADER_NAME xr-layer-vertex-shader

in vec2 texCoords;
in vec3 positions;
in vec3 positions64Low;
in vec3 instancePickingColors;
out vec2 vTexCoord;

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = instancePickingColors;
  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  vTexCoord = texCoords;
  vec4 color = vec4(0.);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,coreShaderModule={fs:fs$1$1,vs:vs$1$1};function getRenderingAttrs$1(f,s,d){const _=d==="linear",S=getDtypeValues(_?"Float32":f);return{shaderModule:coreShaderModule,filter:d,cast:_?T=>new Float32Array(T):T=>T,...S}}const defaultProps$7={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,channelData:{type:"object",value:{},compare:!0},bounds:{type:"array",value:[0,0,1,1],compare:!0},contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},dtype:{type:"string",value:"Uint16",compare:!0},interpolation:{type:"string",value:"nearest",compare:!0}},XRLayer=class extends Layer{getShaders(){const{dtype:f,interpolation:s}=this.props,{shaderModule:d,sampler:_}=getRenderingAttrs$1(f,this.context.device,s),S=this._isHookDefinedByExtensions("fs:DECKGL_PROCESS_INTENSITY"),T={...channels,inject:{}};return S||(T.inject["fs:DECKGL_PROCESS_INTENSITY"]=`
        intensity = apply_contrast_limits(intensity, contrastLimits);
      `),super.getShaders({...d,defines:{SAMPLER_TYPE:_},modules:[project32,picking,T]})}_isHookDefinedByExtensions(f){const{extensions:s}=this.props;return s==null?void 0:s.some(d=>{const _=d.getShaders(),{inject:S={},modules:T=[]}=_,F=S[f],M=T.some(P=>P==null?void 0:P.inject[f]);return F||M})}initializeState(){const{device:f}=this.context;f.setParametersWebGL({[GLEnum.UNPACK_ALIGNMENT]:1,[GLEnum.PACK_ALIGNMENT]:1}),this.getAttributeManager().add({positions:{size:3,type:"float64",fp64:this.use64bitPositions(),update:this.calculatePositions,noAlloc:!0}}),this.setState({numInstances:1,positions:new Float64Array(12)});const d=ShaderAssembler.getDefaultShaderAssembler(),_="fs:DECKGL_MUTATE_COLOR(inout vec4 rgba, float intensity0, float intensity1, float intensity2, float intensity3, float intensity4, float intensity5, vec2 vTexCoord)",S="fs:DECKGL_PROCESS_INTENSITY(inout float intensity, vec2 contrastLimits, int channelIndex)";d._hookFunctions.includes(_)||d.addShaderHook(_),d._hookFunctions.includes(S)||d.addShaderHook(S)}finalizeState(){super.finalizeState(),this.state.textures&&Object.values(this.state.textures).forEach(f=>f==null?void 0:f.delete())}updateState({props:f,oldProps:s,changeFlags:d,..._}){var T,F;if(super.updateState({props:f,oldProps:s,changeFlags:d,..._}),d.extensionsChanged||f.interpolation!==s.interpolation){const{device:M}=this.context;this.state.model&&this.state.model.destroy(),this.setState({model:this._getModel(M)}),this.getAttributeManager().invalidateAll()}(f.channelData!==s.channelData&&((T=f.channelData)==null?void 0:T.data)!==((F=s.channelData)==null?void 0:F.data)||f.interpolation!==s.interpolation)&&this.loadChannelTextures(f.channelData);const S=this.getAttributeManager();f.bounds!==s.bounds&&S.invalidate("positions")}_getModel(f){return f?new Model(f,{...this.getShaders(),id:this.props.id,geometry:new Geometry$1({topology:"triangle-list",vertexCount:6,indices:new Uint16Array([0,1,3,1,2,3]),attributes:{texCoords:{value:new Float32Array([0,1,0,0,1,0,1,1]),size:2}}}),bufferLayout:this.getAttributeManager().getBufferLayouts(),isInstanced:!1}):null}calculatePositions(f){const{positions:s}=this.state,{bounds:d}=this.props;s[0]=d[0],s[1]=d[1],s[2]=0,s[3]=d[0],s[4]=d[3],s[5]=0,s[6]=d[2],s[7]=d[3],s[8]=0,s[9]=d[2],s[10]=d[1],s[11]=0,f.value=s}draw(f){const{uniforms:s}=f,{textures:d,model:_}=this.state;if(d&&_){const{contrastLimits:S,domain:T,dtype:F,channelsVisible:M}=this.props,P=Object.values(d).filter(J=>J).length,H=padContrastLimits({contrastLimits:S.slice(0,P),channelsVisible:M.slice(0,P),domain:T,dtype:F});_.setUniforms({...s,contrastLimits:H},{disableWarnings:!1}),_.setBindings(d),_.draw(f)}}loadChannelTextures(f){const s={channel0:null,channel1:null,channel2:null,channel3:null,channel4:null,channel5:null};if(this.state.textures&&Object.values(this.state.textures).forEach(d=>d==null?void 0:d.delete()),f&&Object.keys(f).length>0&&f.data){f.data.forEach((d,_)=>{s[`channel${_}`]=this.dataToTexture(d,f.width,f.height)},this);for(const d in s){if(!s.channel0)throw new Error("Bad texture state!");s[d]||(s[d]=s.channel0)}this.setState({textures:s})}}dataToTexture(f,s,d){var T;const{interpolation:_}=this.props,S=getRenderingAttrs$1(this.props.dtype,this.context.device,_);return this.context.device.createTexture({width:s,height:d,dimension:"2d",data:((T=S.cast)==null?void 0:T.call(S,f))??f,mipmaps:!1,sampler:{minFilter:S.filter,magFilter:S.filter,addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},format:S.format})}};XRLayer.layerName="XRLayer";XRLayer.defaultProps=defaultProps$7;const defaultProps$6={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},selections:{type:"array",value:[],compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},loader:{type:"object",value:{getRaster:async()=>({data:[],height:0,width:0}),dtype:"Uint16",shape:[]},compare:!0},onClick:{type:"function",value:null,compare:!0},onViewportLoad:{type:"function",value:null,compare:!0},interpolation:{type:"number",value:"nearest",compare:!0},extensions:{type:"array",value:[new ColorPaletteExtension],compare:!0}},ImageLayer=class extends CompositeLayer{finalizeState(){this.state.abortController.abort()}updateState({props:f,oldProps:s}){const d=f.loader!==s.loader,_=f.selections!==s.selections;if(d||_){const{loader:S,selections:T=[],onViewportLoad:F}=this.props,M=new AbortController;this.setState({abortController:M});const{signal:P}=M,H=K=>S.getRaster({selection:K,signal:P}),J=T.map(H);Promise.all(J).then(K=>{var oe,se;const z={data:K.map(ae=>ae.data),width:(oe=K[0])==null?void 0:oe.width,height:(se=K[0])==null?void 0:se.height};isInterleaved$1(S.shape)&&(z.data=z.data[0],z.data.length===z.width*z.height*3&&(z.format="rgba8unorm")),F&&F(z),this.setState({...z})}).catch(K=>{if(K!==SIGNAL_ABORTED)throw K})}}getPickingInfo({info:f,sourceLayer:s}){return f.sourceLayer=s,f.tile=s.props.tile,f}renderLayers(){const{loader:f,id:s}=this.props,{dtype:d}=f,{width:_,height:S,data:T}=this.state;if(!(_&&S))return null;const F=[0,S,_,0];if(isInterleaved$1(f.shape)){const{photometricInterpretation:M=2}=f.meta;return new BitmapLayer(this.props,{image:this.state,photometricInterpretation:M,bounds:F,id:`image-sub-layer-${F}-${s}`,extensions:[]})}return new XRLayer(this.props,{channelData:{data:T,height:S,width:_},bounds:F,id:`image-sub-layer-${F}-${s}`,dtype:d})}};ImageLayer.layerName="ImageLayer";ImageLayer.defaultProps=defaultProps$6;function renderSubLayers(f){const{bbox:{left:s,top:d,right:_,bottom:S},index:{x:T,y:F,z:M}}=f.tile,{data:P,id:H,loader:J,maxZoom:K}=f;if([s,S,_,d].some(ge=>ge<0)||!P)return null;const z=J[0],{height:oe,width:se}=getImageSize(z),ae=[s,P.height<z.tileSize?oe:S,P.width<z.tileSize?se:_,d];if(isInterleaved$1(z.shape)){const{photometricInterpretation:ge=2}=z.meta;return new BitmapLayer(f,{image:P,photometricInterpretation:ge,bounds:ae,id:`tile-sub-layer-${ae}-${H}`,tileId:{x:T,y:F,z:M},extensions:[]})}return new XRLayer(f,{channelData:P,bounds:ae,id:`tile-sub-layer-${ae}-${H}`,tileId:{x:T,y:F,z:M},interpolation:M===K?"nearest":"linear"})}const defaultProps$5={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},renderSubLayers:{type:"function",value:renderSubLayers,compare:!1},dtype:{type:"string",value:"Uint16",compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},interpolation:{type:"number",value:null,compare:!0}};class MultiscaleImageLayerBase extends TileLayer{_updateTileset(){this.props.viewportId||super._updateTileset(),(this.props.viewportId&&this.context.viewport.id===this.props.viewportId||!this.state.tileset._viewport)&&super._updateTileset()}}MultiscaleImageLayerBase.layerName="MultiscaleImageLayerBase";MultiscaleImageLayerBase.defaultProps=defaultProps$5;const defaultProps$4={pickable:{type:"boolean",value:!0,compare:!0},onHover:{type:"function",value:null,compare:!1},contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},maxRequests:{type:"number",value:10,compare:!0},onClick:{type:"function",value:null,compare:!0},refinementStrategy:{type:"string",value:null,compare:!0},excludeBackground:{type:"boolean",value:!1,compare:!0},extensions:{type:"array",value:[new ColorPaletteExtension],compare:!0}},MultiscaleImageLayer=class extends CompositeLayer{renderLayers(){const{loader:f,selections:s,opacity:d,viewportId:_,onTileError:S,onHover:T,id:F,onClick:M,modelMatrix:P,excludeBackground:H,refinementStrategy:J}=this.props,{tileSize:K,dtype:z}=f[0],oe=async({index:{x:Fe,y:ye,z:Ue},signal:It})=>{if(!s||s.length===0)return null;const St=Math.round(-Ue),At=xt=>{const Ct={x:Fe,y:ye,selection:xt,signal:It};return f[St].getTile(Ct)};try{const xt=await Promise.all(s.map(At)),Ct={data:xt.map(Nt=>Nt.data),width:xt[0].width,height:xt[0].height};return isInterleaved$1(f[St].shape)&&(Ct.data=Ct.data[0],Ct.data.length===Ct.width*Ct.height*3&&(Ct.format="rgba8unorm")),Ct}catch(xt){if(xt===SIGNAL_ABORTED)return null;throw xt}},{height:se,width:ae}=getImageSize(f[0]),ge=new MultiscaleImageLayerBase(this.props,{id:`Tiled-Image-${F}`,getTileData:oe,dtype:z,tileSize:K,zoomOffset:Math.round(Math.log2(P?P.getScale()[0]:1)),extent:[0,0,ae,se],minZoom:Math.round(-(f.length-1)),maxZoom:0,refinementStrategy:J||(d===1?"best-available":"no-overlap"),updateTriggers:{getTileData:[f,s]},onTileError:S||f[0].onTileError}),pe=f[f.length-1],he=typeof pe.getRaster=="function",ve=P?P.clone():new Matrix4;return[he&&!H&&new ImageLayer(this.props,{id:`Background-Image-${F}`,loader:pe,modelMatrix:ve.scale(2**(f.length-1)),visible:!_||this.context.viewport.id===_,onHover:T,onClick:M,interpolation:"linear",onViewportLoad:null}),ge]}};MultiscaleImageLayer.layerName="MultiscaleImageLayer";MultiscaleImageLayer.defaultProps=defaultProps$4;const defaultProps$3$1={pickable:{type:"boolean",value:!0,compare:!0},loader:{type:"object",value:{getRaster:async()=>({data:[],height:0,width:0}),getRasterSize:()=>({height:0,width:0}),dtype:"<u2"},compare:!0},id:{type:"string",value:"",compare:!0},boundingBox:{type:"array",value:[[0,0],[0,1],[1,1],[1,0]],compare:!0},boundingBoxColor:{type:"array",value:[255,0,0],compare:!0},boundingBoxOutlineWidth:{type:"number",value:1,compare:!0},viewportOutlineColor:{type:"array",value:[255,190,0],compare:!0},viewportOutlineWidth:{type:"number",value:2,compare:!0},overviewScale:{type:"number",value:1,compare:!0},zoom:{type:"number",value:1,compare:!0},extensions:{type:"array",value:[new ColorPaletteExtension],compare:!0}},OverviewLayer=class extends CompositeLayer{renderLayers(){const{loader:f,id:s,zoom:d,boundingBox:_,boundingBoxColor:S,boundingBoxOutlineWidth:T,viewportOutlineColor:F,viewportOutlineWidth:M,overviewScale:P}=this.props,{width:H,height:J}=getImageSize(f[0]),K=f.length-1,z=f[K],oe=new ImageLayer(this.props,{id:`viewport-${s}`,modelMatrix:new Matrix4().scale(2**K*P),loader:z}),se=new PolygonLayer({id:`bounding-box-overview-${s}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[_],getPolygon:pe=>pe,filled:!1,stroked:!0,getLineColor:S,getLineWidth:T*2**d}),ae=new PolygonLayer({id:`viewport-outline-${s}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[[[0,0],[H*P,0],[H*P,J*P],[0,J*P]]],getPolygon:pe=>pe,filled:!1,stroked:!0,getLineColor:F,getLineWidth:M*2**d});return[oe,se,ae]}};OverviewLayer.layerName="OverviewLayer";OverviewLayer.defaultProps=defaultProps$3$1;function getPosition(f,s,d){const _=f[2][0]-f[0][0],S=f[2][1]-f[0][1];switch(s){case"bottom-right":{const T=f[2][1]-S*d,F=f[2][0]-_*d;return[T,F]}case"top-right":{const T=f[0][1]+S*d,F=f[2][0]-_*d;return[T,F]}case"top-left":{const T=f[0][1]+S*d,F=f[0][0]+_*d;return[T,F]}case"bottom-left":{const T=f[2][1]-S*d,F=f[0][0]+_*d;return[T,F]}default:throw new Error(`Position ${s} not found`)}}const defaultProps$2$1={pickable:{type:"boolean",value:!0,compare:!0},viewState:{type:"object",value:{zoom:0,target:[0,0,0],width:1,height:1},compare:!0},unit:{type:"string",value:"",compare:!0},size:{type:"number",value:1,compare:!0},position:{type:"string",value:"bottom-right",compare:!0},length:{type:"number",value:.085,compare:!0},snap:{type:"boolean",value:!1,compare:!0}},ScaleBarLayer=class extends CompositeLayer{renderLayers(){const{id:f,unit:s,size:d,position:_,viewState:S,length:T,snap:F}=this.props,M=makeBoundingBox(S),{zoom:P}=S,J=(M[2][0]-M[0][0])*.05,K=Math.max(2**(-P+1.5),(M[2][1]-M[0][1])*.007);let z=J,oe=(J*d).toPrecision(5),se=s;if(F){const ye=sizeToMeters(d,s),Ue=J*ye,[It,St,At]=snapValue(Ue);z=It/ye,oe=St,se=`${At}m`}const[ae,ge]=getPosition(M,_,T),pe=ge+J,he=_.endsWith("-left"),ve=new LineLayer({id:`scale-bar-length-${f}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[[[he?ge:pe-z,ae],[he?ge+z:pe,ae]]],getSourcePosition:ye=>ye[0],getTargetPosition:ye=>ye[1],getWidth:2,getColor:[220,220,220]}),be=new LineLayer({id:`scale-bar-height-left-${f}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[[[he?ge:pe-z,ae-K],[he?ge:pe-z,ae+K]]],getSourcePosition:ye=>ye[0],getTargetPosition:ye=>ye[1],getWidth:2,getColor:[220,220,220]}),Re=new LineLayer({id:`scale-bar-height-right-${f}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[[[he?ge+z:pe,ae-K],[he?ge+z:pe,ae+K]]],getSourcePosition:ye=>ye[0],getTargetPosition:ye=>ye[1],getWidth:2,getColor:[220,220,220]}),Fe=new TextLayer({id:`units-label-layer-${f}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[{text:`${oe}${se}`,position:[he?ge+J*.5:pe-J*.5,ae+K*4]}],getColor:[220,220,220,255],getSize:12,fontFamily:DEFAULT_FONT_FAMILY,sizeUnits:"meters",sizeScale:2**-P,characterSet:[...se.split(""),...range$2(10).map(ye=>String(ye)),".","e","+"]});return[ve,be,Re,Fe]}};ScaleBarLayer.layerName="ScaleBarLayer";ScaleBarLayer.defaultProps=defaultProps$2$1;const fs$3=`#version 300 es
precision highp int;
precision highp float;
precision highp SAMPLER_TYPE;

uniform highp SAMPLER_TYPE volume0;
uniform highp SAMPLER_TYPE volume1;
uniform highp SAMPLER_TYPE volume2;
uniform highp SAMPLER_TYPE volume3;
uniform highp SAMPLER_TYPE volume4;
uniform highp SAMPLER_TYPE volume5;

uniform vec3 scaledDimensions;

uniform mat4 scale;

uniform vec3 normals[NUM_PLANES];
uniform float distances[NUM_PLANES];

// color
uniform vec3 colors[6];

// slices
uniform vec2 xSlice;
uniform vec2 ySlice;
uniform vec2 zSlice;

// range
uniform vec2 contrastLimits[6];

in vec3 vray_dir;
flat in vec3 transformed_eye;
out vec4 color;

vec2 intersect_box(vec3 orig, vec3 dir) {
	vec3 box_min = vec3(xSlice[0], ySlice[0], zSlice[0]);
	vec3 box_max = vec3(xSlice[1], ySlice[1], zSlice[1]);
	vec3 inv_dir = 1. / dir;
	vec3 tmin_tmp = (box_min - orig) * inv_dir;
	vec3 tmax_tmp = (box_max - orig) * inv_dir;
	vec3 tmin = min(tmin_tmp, tmax_tmp);
	vec3 tmax = max(tmin_tmp, tmax_tmp);
	float t0 = max(tmin.x, max(tmin.y, tmin.z));
  float t1 = min(tmax.x, min(tmax.y, tmax.z));
  vec2 val = vec2(t0, t1);
	return val;
}

float linear_to_srgb(float x) {
	if (x <= 0.0031308f) {
		return 12.92f * x;
	}
	return 1.055f * pow(x, 1.f / 2.4f) - 0.055f;
}

// Pseudo-random number gen from
// http://www.reedbeta.com/blog/quick-and-easy-gpu-random-numbers-in-d3d11/
// with some tweaks for the range of values
float wang_hash(int seed) {
	seed = (seed ^ 61) ^ (seed >> 16);
	seed *= 9;
	seed = seed ^ (seed >> 4);
	seed *= 0x27d4eb2d;
	seed = seed ^ (seed >> 15);
	return float(seed % 2147483647) / float(2147483647);
}


void main(void) {
	// Step 1: Normalize the view ray
	vec3 ray_dir = normalize(vray_dir);

	// Step 2: Intersect the ray with the volume bounds to find the interval
	// along the ray overlapped by the volume.
	vec2 t_hit = intersect_box(transformed_eye, ray_dir);
	if (t_hit.x > t_hit.y) {
		discard;
	}
	// We don't want to sample voxels behind the eye if it's
	// inside the volume, so keep the starting point at or in front
	// of the eye
	t_hit.x = max(t_hit.x, 0.);

	// Step 3: Compute the step size to march through the volume grid
	vec3 dt_vec = 1. / (scale * vec4(abs(ray_dir), 1.)).xyz;
	float dt = 1. * min(dt_vec.x, min(dt_vec.y, dt_vec.z));

	float offset = wang_hash(int(gl_FragCoord.x + 640. * gl_FragCoord.y));

	// Step 4: Starting from the entry point, march the ray through the volume
	// and sample it
	vec3 p = transformed_eye + (t_hit.x + offset * dt) * ray_dir;

	// TODO: Probably want to stop this process at some point to improve performance when marching down the edges.
	_BEFORE_RENDER
	for (float t = t_hit.x; t < t_hit.y; t += dt) {
		// Check if this point is on the "positive" side or "negative" side of the plane - only show positive.
		float canShow = 1.;
		for (int i = 0; i < NUM_PLANES; i += 1) {
			canShow *= max(0., sign(dot(normals[i], p) + distances[i]));
		}
		// Do not show coordinates outside 0-1 box.
		// Something about the undefined behavior outside the box causes the additive blender to 
		// render some very odd artifacts.
		float canShowXCoordinate = max(p.x - 0., 0.) * max(1. - p.x , 0.);
		float canShowYCoordinate = max(p.y - 0., 0.) * max(1. - p.y , 0.);
		float canShowZCoordinate = max(p.z - 0., 0.) * max(1. - p.z , 0.);
		float canShowCoordinate = float(ceil(canShowXCoordinate * canShowYCoordinate * canShowZCoordinate));
		canShow = canShowCoordinate * canShow;
		float intensityValue0 = float(texture(volume0, p).r);
		DECKGL_PROCESS_INTENSITY(intensityValue0, contrastLimits[0], 0);
		intensityValue0 = canShow * intensityValue0;
		float intensityValue1 = float(texture(volume1, p).r);
		DECKGL_PROCESS_INTENSITY(intensityValue1, contrastLimits[1], 1);
		intensityValue1 = canShow * intensityValue1;
		float intensityValue2 = float(texture(volume2, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue2, contrastLimits[2], 2);
		intensityValue2 = canShow * intensityValue2;
		float intensityValue3 = float(texture(volume3, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue3, contrastLimits[3], 3);
		intensityValue3 = canShow * intensityValue3;
    	float intensityValue4 = float(texture(volume4, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue4, contrastLimits[4], 4);
		intensityValue4 = canShow * intensityValue4;
		float intensityValue5 = float(texture(volume5, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue5, contrastLimits[5], 5);
		intensityValue5 = canShow * intensityValue5;

		_RENDER

		p += ray_dir * dt;
	}
	_AFTER_RENDER
  color.r = linear_to_srgb(color.r);
  color.g = linear_to_srgb(color.g);
  color.b = linear_to_srgb(color.b);
}
`,vs$2=`#version 300 es
#define SHADER_NAME xr-layer-vertex-shader

// Unit-cube vertices
in vec3 positions;

// Eye position - last column of the inverted view matrix
uniform vec3 eye_pos;
// Projection matrix
uniform mat4 proj;
// Model Matrix
uniform mat4 model;
// View Matrix
uniform mat4 view;
// A matrix for scaling in the model space before any transformations.
// This projects the unit cube up to match the "pixel size" multiplied by the physical size ratio, if provided.
uniform mat4 scale;
uniform mat4 resolution;


out vec3 vray_dir;
flat out vec3 transformed_eye;

void main() {

  // Step 1: Standard MVP transformation (+ the scale matrix) to place the positions on your 2D screen ready for rasterization + fragment processing.
  gl_Position = proj * view * model * scale * resolution * vec4(positions, 1.);

  // Step 2: Invert the eye back from world space to the normalized 0-1 cube world space because ray casting on the fragment shader runs in 0-1 space.
  // Geometrically, the transformed_eye is a position relative to the 0-1 normalized vertices, which themselves are the inverse of the model + scale trasnformation.
  // See below for an example which does not involve a scale transformation, for simplicity, but motivates geometrically the needed transformation on eye_pos.
  /*
  This first diagram is a skewed volume (i.e a "shear" model matrix applied) top down with the eye marked as #, all in world space
       ^
    ___|__
    \\  |  \\
     \\ |   \\
      \\|____\\
       | 
       | 
       |
       #

  This next diagram shows the volume after the inverse model matrix has placed it back in model coordinates, but the eye still in world space. 
       ^
    ___|___
    |  |  |
    |  |  |
    |__|__|
       |
       |
       |
       #

  Finally, we apply the inverse model matrix transformation to the eye as well to bring it too into world space.
  Notice that the ray here matches the "voxels" through which the first ray also passes, as desired.
         ^
    ____/__
    |  /  |
    | /   |
    |/____|
    /
   /
  /
 #
  */
  transformed_eye = (inverse(resolution) * inverse(scale) * inverse(model) * (vec4(eye_pos, 1.))).xyz;

  // Step 3: Rays are from eye to vertices so that they get interpolated over the fragments.
  vray_dir = positions - transformed_eye;
}
`,channelsModule={name:"channel-intensity-module",fs:`    float apply_contrast_limits(float intensity, vec2 contrastLimits) {
      float contrastLimitsAppliedToIntensity = (intensity - contrastLimits[0]) / max(0.0005, (contrastLimits[1] - contrastLimits[0]));
      return max(0., contrastLimitsAppliedToIntensity);
    }
  `},CUBE_STRIP=[1,1,0,0,1,0,1,1,1,0,1,1,0,0,1,0,1,0,0,0,0,1,1,0,1,0,0,1,1,1,1,0,1,0,0,1,1,0,0,0,0,0],NUM_PLANES_DEFAULT=1,defaultProps$1$1={pickable:!1,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,channelData:{type:"object",value:{},compare:!0},contrastLimits:{type:"array",value:[],compare:!0},dtype:{type:"string",value:"Uint8",compare:!0},xSlice:{type:"array",value:null,compare:!0},ySlice:{type:"array",value:null,compare:!0},zSlice:{type:"array",value:null,compare:!0},clippingPlanes:{type:"array",value:[],compare:!0},resolutionMatrix:{type:"object",value:new Matrix4,compare:!0},channelsVisible:{type:"array",value:[],compare:!0},extensions:{type:"array",value:[new ColorPalette3DExtensions.AdditiveBlendExtension],compare:!0}};function getRenderingAttrs(){const f=getDtypeValues("Float32");return{...f,sampler:f.sampler.replace("2D","3D"),cast:s=>new Float32Array(s)}}function getRenderingFromExtensions(f){let s={};if(f.forEach(d=>{s=d.rendering}),!s._RENDER)throw new Error("XR3DLayer requires at least one extension to define opts.rendering as an object with _RENDER as a property at the minimum.");return s}const XR3DLayer=class extends Layer{initializeState(){const{device:f}=this.context;f.setParametersWebGL({[GLEnum.UNPACK_ALIGNMENT]:1,[GLEnum.PACK_ALIGNMENT]:1});const s=ShaderAssembler.getDefaultShaderAssembler(),d="fs:DECKGL_PROCESS_INTENSITY(inout float intensity, vec2 contrastLimits, int channelIndex)";s._hookFunctions.includes(d)||s.addShaderHook(d)}_isHookDefinedByExtensions(f){const{extensions:s}=this.props;return s==null?void 0:s.some(d=>{const _=d.getShaders();if(_){const{inject:S={},modules:T=[]}=_,F=S[f],M=T.some(P=>{var H;return(H=P==null?void 0:P.inject)==null?void 0:H[f]});return F||M}return!1})}getShaders(){const{clippingPlanes:f,extensions:s}=this.props,{sampler:d}=getRenderingAttrs(),{_BEFORE_RENDER:_,_RENDER:S,_AFTER_RENDER:T}=getRenderingFromExtensions(s),F=this._isHookDefinedByExtensions("fs:DECKGL_PROCESS_INTENSITY"),M={inject:{},...channelsModule};return F||(M.inject["fs:DECKGL_PROCESS_INTENSITY"]=`
        intensity = apply_contrast_limits(intensity, contrastLimits);
      `),super.getShaders({vs:vs$2,fs:fs$3.replace("_BEFORE_RENDER",_).replace("_RENDER",S).replace("_AFTER_RENDER",T),defines:{SAMPLER_TYPE:d,NUM_PLANES:String(f.length||NUM_PLANES_DEFAULT)},modules:[M]})}finalizeState(){super.finalizeState(),this.state.textures&&Object.values(this.state.textures).forEach(f=>f==null?void 0:f.delete())}updateState({props:f,oldProps:s,changeFlags:d}){var _,S;if(d.extensionsChanged||f.colormap!==s.colormap||f.renderingMode!==s.renderingMode||f.clippingPlanes.length!==s.clippingPlanes.length){const{device:T}=this.context;this.state.model&&this.state.model.destroy(),this.setState({model:this._getModel(T)})}f.channelData&&((_=f==null?void 0:f.channelData)==null?void 0:_.data)!==((S=s==null?void 0:s.channelData)==null?void 0:S.data)&&this.loadTexture(f.channelData)}_getModel(f){return f?new Model(f,{...this.getShaders(),geometry:new Geometry$1({topology:"triangle-strip",attributes:{positions:new Float32Array(CUBE_STRIP)}})}):null}draw(f){const{uniforms:s}=f,{textures:d,model:_,scaleMatrix:S}=this.state,{contrastLimits:T,xSlice:F,ySlice:M,zSlice:P,modelMatrix:H,channelsVisible:J,domain:K,dtype:z,clippingPlanes:oe,resolutionMatrix:se}=this.props,{viewMatrix:ae,viewMatrixInverse:ge,projectionMatrix:pe}=this.context.viewport;if(d&&_&&S){const he=padContrastLimits({contrastLimits:T,channelsVisible:J,domain:K,dtype:z}),ve=S.clone().invert(),be=se.clone().invert(),Re=padWithDefault(oe.map(Ue=>Ue.clone().transform(ve).transform(be)),new Plane([1,0,0]),oe.length||NUM_PLANES_DEFAULT),Fe=Re.flatMap(Ue=>Ue.normal),ye=Re.map(Ue=>Ue.distance);_.setUniforms({...s,contrastLimits:he,xSlice:new Float32Array(F?F.map(Ue=>Ue/S[0]/se[0]):[0,1]),ySlice:new Float32Array(M?M.map(Ue=>Ue/S[5]/se[5]):[0,1]),zSlice:new Float32Array(P?P.map(Ue=>Ue/S[10]/se[10]):[0,1]),eye_pos:new Float32Array([ge[12],ge[13],ge[14]]),view:ae,proj:pe,scale:S,resolution:se,model:H||new Matrix4,normals:Fe,distances:ye},{disableWanings:!1}),_.setBindings(d),_.draw(f)}}loadTexture(f){const s={volume0:null,volume1:null,volume2:null,volume3:null,volume4:null,volume5:null};if(this.state.textures&&Object.values(this.state.textures).forEach(d=>d==null?void 0:d.delete()),f&&Object.keys(f).length>0&&f.data){const{height:d,width:_,depth:S}=f;f.data.forEach((T,F)=>{s[`volume${F}`]=this.dataToTexture(T,_,d,S)},this);for(const T in s){if(!s.volume0)throw new Error("Bad texture state!");s[T]||(s[T]=s.volume0)}this.setState({textures:s,scaleMatrix:new Matrix4().scale(this.props.physicalSizeScalingMatrix.transformPoint([_,d,S]))})}}dataToTexture(f,s,d,_){var F;const S=getRenderingAttrs();return this.context.device.createTexture({width:s,height:d,depth:_,dimension:"3d",data:((F=S.cast)==null?void 0:F.call(S,f))??f,format:S.format,mipmaps:!1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge"}})}};XR3DLayer.layerName="XR3DLayer";XR3DLayer.defaultProps=defaultProps$1$1;async function getVolume({source:f,selection:s,onUpdate:d=()=>{},downsampleDepth:_=1,signal:S}){const{shape:T,labels:F,dtype:M}=f,{height:P,width:H}=getImageSize(f),J=T[F.indexOf("z")],K=Math.max(1,Math.floor(J/_)),z=P*H,oe=`${M}Array`,se=globalThis[oe],ae=new se(z*K);return await Promise.all(new Array(K).fill(0).map(async(ge,pe)=>{const he={...s,z:pe*_},{data:ve}=await f.getRaster({selection:he,signal:S});let be=0;for(d();be<z;){const Re=pe*z+(z-be-1),Fe=(H-be-1)%H+H*Math.floor(be/H);ae[Re]=ve[Fe],be+=1}d()})),{data:ae,height:P,width:H,depth:K}}const getTextLayer=(f,s,d)=>new TextLayer({id:`text-${d}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[{text:f,position:s.position}],getColor:[220,220,220,255],getSize:25,sizeUnits:"meters",sizeScale:2**-s.zoom,fontFamily:"Helvetica"}),defaultProps$9={pickable:!1,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},selections:{type:"array",value:[],compare:!0},resolution:{type:"number",value:0,compare:!0},domain:{type:"array",value:[],compare:!0},loader:{type:"object",value:[{getRaster:async()=>({data:[],height:0,width:0}),dtype:"Uint16",shape:[1],labels:["z"]}],compare:!0},xSlice:{type:"array",value:null,compare:!0},ySlice:{type:"array",value:null,compare:!0},zSlice:{type:"array",value:null,compare:!0},clippingPlanes:{type:"array",value:[],compare:!0},onUpdate:{type:"function",value:()=>{},compare:!0},useProgressIndicator:{type:"boolean",value:!0,compare:!0},extensions:{type:"array",value:[new ColorPalette3DExtensions.AdditiveBlendExtension],compare:!0}},VolumeLayer=class extends CompositeLayer{clearState(){this.setState({height:null,width:null,depth:null,data:null,physicalSizeScalingMatrix:null,resolutionMatrix:null,progress:0,abortController:null})}finalizeState(){this.state.abortController.abort()}updateState({oldProps:f,props:s}){const d=s.loader!==f.loader,_=s.resolution!==f.resolution,S=s.selections!==f.selections;if(_&&this.clearState(),d||S||_){const{loader:T,selections:F=[],resolution:M,onViewportLoad:P}=this.props,H=T[M];let J=0;const K=(H.shape[H.labels.indexOf("z")]>>M)*F.length,z=()=>{J+=.5/K,this.props.onUpdate&&this.props.onUpdate({progress:J}),this.setState({progress:J})},oe=new AbortController;this.setState({abortController:oe});const{signal:se}=oe,ae=F.map(pe=>getVolume({selection:pe,source:H,onUpdate:z,downsampleDepth:2**M,signal:se})),ge=getPhysicalSizeScalingMatrix$1(T[M]);Promise.all(ae).then(pe=>{var ve,be,Re;P&&P(pe);const he={data:pe.map(Fe=>Fe.data),width:(ve=pe[0])==null?void 0:ve.width,height:(be=pe[0])==null?void 0:be.height,depth:(Re=pe[0])==null?void 0:Re.depth};this.setState({...he,physicalSizeScalingMatrix:ge,resolutionMatrix:new Matrix4().scale(2**M)})})}}renderLayers(){const{loader:f,id:s,resolution:d,useProgressIndicator:_}=this.props,{dtype:S}=f[d],{data:T,width:F,height:M,depth:P,progress:H,physicalSizeScalingMatrix:J,resolutionMatrix:K}=this.state;if(!(F&&M)&&_){const{viewport:z}=this.context;return getTextLayer(`Loading Volume ${String((H||0)*100).slice(0,5)}%...`,z,s)}return new XR3DLayer(this.props,{channelData:{data:T,width:F,height:M,depth:P},id:`XR3DLayer-0-${M}-${F}-0-${d}-${s}`,physicalSizeScalingMatrix:J,parameters:{[GLEnum.CULL_FACE]:!0,[GLEnum.CULL_FACE_MODE]:GLEnum.FRONT,[GLEnum.DEPTH_TEST]:!1,blendFunc:[GLEnum.SRC_ALPHA,GLEnum.ONE],blend:!0},resolutionMatrix:K,dtype:S})}};VolumeLayer.layerName="VolumeLayer";VolumeLayer.defaultProps=defaultProps$9;const useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function inheritsFrom(f,s){for(;f;){if(f===s)return!0;f=Object.getPrototypeOf(f)}return!1}const MAP_STYLE={position:"absolute",zIndex:-1};function evaluateChildren(f,s){if(typeof f=="function")return f(s);if(Array.isArray(f))return f.map(d=>evaluateChildren(d,s));if(isComponent(f)){if(isReactMap(f))return s.style=MAP_STYLE,reactExports.cloneElement(f,s);if(needsDeckGLViewProps(f))return reactExports.cloneElement(f,s)}return f}function isComponent(f){return f&&typeof f=="object"&&"type"in f||!1}function isReactMap(f){var s;return(s=f.props)==null?void 0:s.mapStyle}function needsDeckGLViewProps(f){const s=f.type;return s&&s.deckGLViewProps}function wrapInView(f){if(typeof f=="function")return reactExports.createElement(View,{},f);if(Array.isArray(f))return f.map(wrapInView);if(isComponent(f)){if(f.type===reactExports.Fragment)return wrapInView(f.props.children);if(inheritsFrom(f.type,View))return f}return f}function extractJSXLayers({children:f,layers:s=[],views:d=null}){const _=[],S=[],T={};return reactExports.Children.forEach(wrapInView(f),F=>{if(isComponent(F)){const M=F.type;if(inheritsFrom(M,Layer)){const P=createLayer(M,F.props);S.push(P)}else _.push(F);if(inheritsFrom(M,View)&&M!==View&&F.props.id){const P=new M(F.props);T[P.id]=P}}else F&&_.push(F)}),Object.keys(T).length>0&&(Array.isArray(d)?d.forEach(F=>{T[F.id]=F}):d&&(T[d.id]=d),d=Object.values(T)),s=S.length>0?[...S,...s]:s,{layers:s,children:_,views:d}}function createLayer(f,s){const d={},_=f.defaultProps||{};for(const S in s)_[S]!==s[S]&&(d[S]=s[S]);return new f(d)}function positionChildrenUnderViews({children:f,deck:s,ContextProvider:d}){const{viewManager:_}=s||{};if(!_||!_.views.length)return[];const S={},T=_.views[0].id;for(const F of f){let M=T,P=F;isComponent(F)&&inheritsFrom(F.type,View)&&(M=F.props.id||T,P=F.props.children);const H=_.getViewport(M),J=_.getViewState(M);if(H){J.padding=H.padding;const{x:K,y:z,width:oe,height:se}=H;P=evaluateChildren(P,{x:K,y:z,width:oe,height:se,viewport:H,viewState:J}),S[M]||(S[M]={viewport:H,children:[]}),S[M].children.push(P)}}return Object.keys(S).map(F=>{const{viewport:M,children:P}=S[F],{x:H,y:J,width:K,height:z}=M,oe={position:"absolute",left:H,top:J,width:K,height:z},se=`view-${F}`,ae=reactExports.createElement("div",{key:se,id:se,style:oe},...P);if(d){const ge={viewport:M,container:s.canvas.offsetParent,eventManager:s.eventManager,onViewStateChange:pe=>{pe.viewId=F,s._onViewStateChange(pe)}};return reactExports.createElement(d,{key:se,value:ge},ae)}return ae})}const CANVAS_ONLY_STYLES={mixBlendMode:null};function extractStyles({width:f,height:s,style:d}){const _={position:"absolute",zIndex:0,left:0,top:0,width:f,height:s},S={left:0,top:0};if(d)for(const T in d)T in CANVAS_ONLY_STYLES?S[T]=d[T]:_[T]=d[T];return{containerStyle:_,canvasStyle:S}}function getRefHandles(f){return{get deck(){return f.deck},pickObject:s=>f.deck.pickObject(s),pickMultipleObjects:s=>f.deck.pickMultipleObjects(s),pickObjects:s=>f.deck.pickObjects(s)}}function redrawDeck(f){f.redrawReason&&(f.deck._drawLayers(f.redrawReason),f.redrawReason=null)}function createDeckInstance(f,s,d){const _=new s({...d,_customRender:S=>{f.redrawReason=S;const T=_.getViewports();f.lastRenderedViewports!==T?f.forceUpdate():redrawDeck(f)}});return _}function DeckGLWithRef(f,s){const[d,_]=reactExports.useState(0),T=reactExports.useRef({control:null,version:d,forceUpdate:()=>_(Re=>Re+1)}).current,F=reactExports.useRef(null),M=reactExports.useRef(null),P=reactExports.useMemo(()=>extractJSXLayers(f),[f.layers,f.views,f.children]);let H=!0;const J=Re=>{var Fe;return H&&f.viewState?(T.viewStateUpdateRequested=Re,null):(T.viewStateUpdateRequested=null,(Fe=f.onViewStateChange)==null?void 0:Fe.call(f,Re))},K=Re=>{var Fe;H?T.interactionStateUpdateRequested=Re:(T.interactionStateUpdateRequested=null,(Fe=f.onInteractionStateChange)==null||Fe.call(f,Re))},z=reactExports.useMemo(()=>{const Re={...f,style:null,width:"100%",height:"100%",parent:F.current,canvas:M.current,layers:P.layers,views:P.views,onViewStateChange:J,onInteractionStateChange:K};return delete Re._customRender,T.deck&&T.deck.setProps(Re),Re},[f]);reactExports.useEffect(()=>{const Re=f.Deck||Deck;return T.deck=createDeckInstance(T,Re,{...z,parent:F.current,canvas:M.current}),()=>{var Fe;return(Fe=T.deck)==null?void 0:Fe.finalize()}},[]),useIsomorphicLayoutEffect(()=>{redrawDeck(T);const{viewStateUpdateRequested:Re,interactionStateUpdateRequested:Fe}=T;Re&&J(Re),Fe&&K(Fe)}),reactExports.useImperativeHandle(s,()=>getRefHandles(T),[]);const oe=T.deck&&T.deck.isInitialized?T.deck.getViewports():void 0,{ContextProvider:se,width:ae="100%",height:ge="100%",id:pe,style:he}=f,{containerStyle:ve,canvasStyle:be}=reactExports.useMemo(()=>extractStyles({width:ae,height:ge,style:he}),[ae,ge,he]);if(!T.viewStateUpdateRequested&&T.lastRenderedViewports===oe||T.version!==d){T.lastRenderedViewports=oe,T.version=d;const Re=positionChildrenUnderViews({children:P.children,deck:T.deck,ContextProvider:se}),Fe=reactExports.createElement("canvas",{key:"canvas",id:pe||"deckgl-overlay",ref:M,style:be});T.control=reactExports.createElement("div",{id:`${pe||"deckgl"}-wrapper`,ref:F,style:ve},[Fe,Re])}return H=!1,T.control}const DeckGL=reactExports.forwardRef(DeckGLWithRef);class VivView{constructor({id:s,x:d=0,y:_=0,height:S,width:T}){this.width=T,this.height=S,this.id=s,this.x=d,this.y=_}getDeckGlView(){return new OrthographicView({controller:!0,id:this.id,height:this.height,width:this.width,x:this.x,y:this.y})}filterViewState({viewState:s}){const{id:d,height:_,width:S}=this;return s.id===d?{height:_,width:S,...s}:null}getLayers({viewStates:s,props:d}){}}function getVivId$1(f){return`-#${f}#`}function getDefaultInitialViewState(f,s,d=0,_=!1,S){const T=Array.isArray(f)?f[0]:f,{width:F,height:M}=getImageSize(T),P=(S||new Matrix4).getScale(),[H,J]=[P[0]*F,P[1]*M],K=T.shape[T.labels.indexOf("z")],z=Math.log2(Math.min(s.width/H,s.height/J))-d,oe=getPhysicalSizeScalingMatrix$1(T);return{target:(S||new Matrix4).transformPoint((_?oe:new Matrix4).transformPoint([F/2,M/2,_?K/2:0])),zoom:z}}function getImageLayer(f,s){var F,M;const{loader:d}=s,_=(M=(F=d[0])==null?void 0:F.constructor)==null?void 0:M.name,S=d.length>1?MultiscaleImageLayer:ImageLayer,T=d.length>1?d:d[0];return new S({...s,id:`${_}${getVivId$1(f)}`,viewportId:f,loader:T})}const OVERVIEW_VIEW_ID="overview",DETAIL_VIEW_ID="detail";class DetailView extends VivView{constructor({id:s,x:d=0,y:_=0,height:S,width:T,snapScaleBar:F=!1}){super({id:s,x:d,y:_,height:S,width:T}),this.snapScaleBar=F}getLayers({props:s,viewStates:d}){var H,J,K;const{loader:_}=s,{id:S,height:T,width:F}=this,M=d[S],P=[getImageLayer(S,s)];if((K=(J=(H=_[0])==null?void 0:H.meta)==null?void 0:J.physicalSizes)!=null&&K.x){const{size:z,unit:oe}=_[0].meta.physicalSizes.x;P.push(new ScaleBarLayer({id:getVivId$1(S),loader:_,unit:oe,size:z,snap:this.snapScaleBar,viewState:{...M,height:T,width:F}}))}return P}filterViewState({viewState:s,currentViewState:d}){if(s.id===OVERVIEW_VIEW_ID){const{target:_}=s;if(_)return{...d,target:_}}return super.filterViewState({viewState:s})}}class VolumeView extends VivView{constructor({target:s,useFixedAxis:d,..._}){super(_),this.target=s,this.useFixedAxis=d}getDeckGlView(){const{height:s,width:d,id:_,x:S,y:T}=this;return new OrbitView({id:_,controller:!0,height:s,width:d,x:S,y:T,orbitAxis:"Y"})}filterViewState({viewState:s}){const{id:d,target:_,useFixedAxis:S}=this;return s.id===d?{...s,target:S?_:s.target}:null}getLayers({props:s}){const{loader:d}=s,{id:_}=this;return[new VolumeLayer(s,{id:`${d.type}${getVivId$1(_)}`})]}}var fastDeepEqual=function f(s,d){if(s===d)return!0;if(s&&d&&typeof s=="object"&&typeof d=="object"){if(s.constructor!==d.constructor)return!1;var _,S,T;if(Array.isArray(s)){if(_=s.length,_!=d.length)return!1;for(S=_;S--!==0;)if(!f(s[S],d[S]))return!1;return!0}if(s.constructor===RegExp)return s.source===d.source&&s.flags===d.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===d.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===d.toString();if(T=Object.keys(s),_=T.length,_!==Object.keys(d).length)return!1;for(S=_;S--!==0;)if(!Object.prototype.hasOwnProperty.call(d,T[S]))return!1;for(S=_;S--!==0;){var F=T[S];if(!f(s[F],d[F]))return!1}return!0}return s!==s&&d!==d};const equal=getDefaultExportFromCjs(fastDeepEqual),capitalize=f=>f.charAt(0).toUpperCase()+f.slice(1);function generateToggles(f,s){const d={};return Object.entries(f).forEach(([_,S])=>{typeof S=="boolean"&&(d[`toggle${capitalize(_)}`]=()=>s(T=>({...T,[_]:!T[_]})))}),d}const DEFAUlT_CHANNEL_STATE={channelsVisible:[],contrastLimits:[],brightness:[],contrast:[],colors:[],domains:[],selections:[],ids:[],loader:[{labels:[],shape:[]}],image:0},DEFAUlT_CHANNEL_VALUES={channelsVisible:!0,contrastLimits:[0,65535],brightness:.5,contrast:.5,colors:[255,255,255],domains:[0,65535],selections:{z:0,c:0,t:0},ids:""},DEFAULT_IMAGE_STATE={lensSelection:0,colormap:"",renderingMode:RENDERING_MODES.MAX_INTENSITY_PROJECTION,resolution:0,lensEnabled:!1,zoomLock:!0,panLock:!0,isOverviewOn:!1,useFixedAxis:!0,xSlice:null,ySlice:null,zSlice:null,onViewportLoad:()=>{}},DEFAULT_VIEWER_STATE={isChannelLoading:[],isViewerLoading:!0,pixelValues:[],isOffsetsSnackbarOn:!1,loaderErrorSnackbar:{on:!1,message:null},isNoImageUrlSnackbarOn:!1,isVolumeRenderingWarningOn:!1,useLinkedView:!1,isControllerOn:!0,use3d:!1,useLens:!1,useColormap:!1,globalSelection:{z:0,t:0},channelOptions:[],metadata:null,viewState:null,source:null,pyramidResolution:0};function createVivStores(){const f=createStore(_=>({...DEFAUlT_CHANNEL_STATE,...generateToggles(DEFAUlT_CHANNEL_VALUES,_),toggleIsOn:S=>_(T=>{const F=[...T.channelsVisible];return F[S]=!F[S],{...T,channelsVisible:F}}),setPropertiesForChannel:(S,T)=>_(F=>{const M=Object.entries(T),P={};return M.forEach(([H,J])=>{P[H]=[...F[H]],P[H][S]=J}),{...F,...P}}),removeChannel:S=>_(T=>{const F={},M=Object.keys(DEFAUlT_CHANNEL_VALUES);return Object.keys(T).forEach(P=>{M.includes(P)&&(F[P]=T[P].filter((H,J)=>J!==S))}),{...T,...F}}),addChannel:S=>_(T=>{const F=Object.entries(S),M={...T};return F.forEach(([P,H])=>{M[P]=[...T[P],H]}),Object.entries(DEFAUlT_CHANNEL_VALUES).forEach(([P,H])=>{M[P].length<M[F[0][0]].length&&(M[P]=[...T[P],H])}),M})})),s=createStore(_=>({...DEFAULT_IMAGE_STATE,...generateToggles(DEFAULT_IMAGE_STATE,_)}));return{viewerStore:createStore(_=>({...DEFAULT_VIEWER_STATE,...generateToggles(DEFAULT_VIEWER_STATE,_),setIsChannelLoading:(S,T)=>_(F=>{const M=[...F.isChannelLoading];return M[S]=T,{...F,isChannelLoading:M}}),addIsChannelLoading:S=>_(T=>{const F=[...T.isChannelLoading,S];return{...T,isChannelLoading:F}}),removeIsChannelLoading:S=>_(T=>{const F=[...T.isChannelLoading];return F.splice(S,1),{...T,isChannelLoading:F}})})),channelsStore:f,imageSettingsStore:s}}const VivContext=reactExports.createContext(null),VivProvider=observer(({children:f,vivStores:s})=>jsxRuntimeExports.jsx(VivContext.Provider,{value:s,children:f}));function useStoreApi(f){const s=reactExports.useContext(VivContext);if(!s)throw"Viv state hooks must be used within a VivProvider";return s[f]}const useChannelsStoreApi=()=>useStoreApi("channelsStore"),useImageSettingsStoreApi=()=>useStoreApi("imageSettingsStore"),useViewerStoreApi=()=>useStoreApi("viewerStore");function useChannelsStore(f,s){const d=useChannelsStoreApi();return useStoreWithEqualityFn(d,f,s)}function useImageSettingsStore(f,s){const d=useImageSettingsStoreApi();return useStoreWithEqualityFn(d,f,s)}function useViewerStore(f,s){const d=useViewerStoreApi();return useStoreWithEqualityFn(d,f,s)}const useLoader=()=>{const[f,s]=useChannelsStore(d=>[d.loader,d.image]);return Array.isArray(f[0])?f[s]:f},useMetadata=()=>{const f=useChannelsStore(d=>d.image),s=useViewerStore(d=>d.metadata);return Array.isArray(s)?s[f]:s},applyDefaultChannelState=f=>{const s=f,d=6;s.channelsStore||(s.channelsStore={});for(const[_,S]of Object.entries(DEFAUlT_CHANNEL_VALUES))_!=="ids"&&(_!=="brightness"&&_!=="contrast"||s.channelsStore[_]===void 0&&(console.log(`adding default value ${S} for`,_),s.channelsStore[_]=new Array(d).fill(S)));return s};var regl$1={exports:{}};(function(f,s){(function(d,_){f.exports=_()})(commonjsGlobal,function(){var d=function(Ve){return Ve instanceof Uint8Array||Ve instanceof Uint16Array||Ve instanceof Uint32Array||Ve instanceof Int8Array||Ve instanceof Int16Array||Ve instanceof Int32Array||Ve instanceof Float32Array||Ve instanceof Float64Array||Ve instanceof Uint8ClampedArray},_=function(Ve,kt){for(var Hr=Object.keys(kt),ya=0;ya<Hr.length;++ya)Ve[Hr[ya]]=kt[Hr[ya]];return Ve},S=`
`;function T(Ve){return typeof atob<"u"?atob(Ve):"base64:"+Ve}function F(Ve){var kt=new Error("(regl) "+Ve);throw console.error(kt),kt}function M(Ve,kt){Ve||F(kt)}function P(Ve){return Ve?": "+Ve:""}function H(Ve,kt,Hr){Ve in kt||F("unknown parameter ("+Ve+")"+P(Hr)+". possible values: "+Object.keys(kt).join())}function J(Ve,kt){d(Ve)||F("invalid parameter type"+P(kt)+". must be a typed array")}function K(Ve,kt){switch(kt){case"number":return typeof Ve=="number";case"object":return typeof Ve=="object";case"string":return typeof Ve=="string";case"boolean":return typeof Ve=="boolean";case"function":return typeof Ve=="function";case"undefined":return typeof Ve>"u";case"symbol":return typeof Ve=="symbol"}}function z(Ve,kt,Hr){K(Ve,kt)||F("invalid parameter type"+P(Hr)+". expected "+kt+", got "+typeof Ve)}function oe(Ve,kt){Ve>=0&&(Ve|0)===Ve||F("invalid parameter type, ("+Ve+")"+P(kt)+". must be a nonnegative integer")}function se(Ve,kt,Hr){kt.indexOf(Ve)<0&&F("invalid value"+P(Hr)+". must be one of: "+kt)}var ae=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function ge(Ve){Object.keys(Ve).forEach(function(kt){ae.indexOf(kt)<0&&F('invalid regl constructor argument "'+kt+'". must be one of '+ae)})}function pe(Ve,kt){for(Ve=Ve+"";Ve.length<kt;)Ve=" "+Ve;return Ve}function he(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function ve(Ve,kt){this.number=Ve,this.line=kt,this.errors=[]}function be(Ve,kt,Hr){this.file=Ve,this.line=kt,this.message=Hr}function Re(){var Ve=new Error,kt=(Ve.stack||Ve).toString(),Hr=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(kt);if(Hr)return Hr[1];var ya=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(kt);return ya?ya[1]:"unknown"}function Fe(){var Ve=new Error,kt=(Ve.stack||Ve).toString(),Hr=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(kt);if(Hr)return Hr[1];var ya=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(kt);return ya?ya[1]:"unknown"}function ye(Ve,kt){var Hr=Ve.split(`
`),ya=1,CA=0,pa={unknown:new he,0:new he};pa.unknown.name=pa[0].name=kt||Re(),pa.unknown.lines.push(new ve(0,""));for(var aA=0;aA<Hr.length;++aA){var LA=Hr[aA],NA=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(LA);if(NA)switch(NA[1]){case"line":var $A=/(\d+)(\s+\d+)?/.exec(NA[2]);$A&&(ya=$A[1]|0,$A[2]&&(CA=$A[2]|0,CA in pa||(pa[CA]=new he)));break;case"define":var qA=/SHADER_NAME(_B64)?\s+(.*)$/.exec(NA[2]);qA&&(pa[CA].name=qA[1]?T(qA[2]):qA[2]);break}pa[CA].lines.push(new ve(ya++,LA))}return Object.keys(pa).forEach(function(HA){var zA=pa[HA];zA.lines.forEach(function(FA){zA.index[FA.number]=FA})}),pa}function Ue(Ve){var kt=[];return Ve.split(`
`).forEach(function(Hr){if(!(Hr.length<5)){var ya=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Hr);ya?kt.push(new be(ya[1]|0,ya[2]|0,ya[3].trim())):Hr.length>0&&kt.push(new be("unknown",0,Hr))}}),kt}function It(Ve,kt){kt.forEach(function(Hr){var ya=Ve[Hr.file];if(ya){var CA=ya.index[Hr.line];if(CA){CA.errors.push(Hr),ya.hasErrors=!0;return}}Ve.unknown.hasErrors=!0,Ve.unknown.lines[0].errors.push(Hr)})}function St(Ve,kt,Hr,ya,CA){if(!Ve.getShaderParameter(kt,Ve.COMPILE_STATUS)){var pa=Ve.getShaderInfoLog(kt),aA=ya===Ve.FRAGMENT_SHADER?"fragment":"vertex";qr(Hr,"string",aA+" shader source must be a string",CA);var LA=ye(Hr,CA),NA=Ue(pa);It(LA,NA),Object.keys(LA).forEach(function($A){var qA=LA[$A];if(!qA.hasErrors)return;var HA=[""],zA=[""];function FA(GA,ia){HA.push(GA),zA.push(ia||"")}FA("file number "+$A+": "+qA.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),qA.lines.forEach(function(GA){if(GA.errors.length>0){FA(pe(GA.number,4)+"|  ","background-color:yellow; font-weight:bold"),FA(GA.line+S,"color:red; background-color:yellow; font-weight:bold");var ia=0;GA.errors.forEach(function(oA){var OA=oA.message,uI=/^\s*'(.*)'\s*:\s*(.*)$/.exec(OA);if(uI){var xA=uI[1];switch(OA=uI[2],xA){case"assign":xA="=";break}ia=Math.max(GA.line.indexOf(xA,ia),0)}else ia=0;FA(pe("| ",6)),FA(pe("^^^",ia+3)+S,"font-weight:bold"),FA(pe("| ",6)),FA(OA+S,"font-weight:bold")}),FA(pe("| ",6)+S)}else FA(pe(GA.number,4)+"|  "),FA(GA.line+S,"color:red")}),typeof document<"u"&&!window.chrome?(zA[0]=HA.join("%c"),console.log.apply(console,zA)):console.log(HA.join(""))}),M.raise("Error compiling "+aA+" shader, "+LA[0].name)}}function At(Ve,kt,Hr,ya,CA){if(!Ve.getProgramParameter(kt,Ve.LINK_STATUS)){var pa=Ve.getProgramInfoLog(kt),aA=ye(Hr,CA),LA=ye(ya,CA),NA='Error linking program with vertex shader, "'+LA[0].name+'", and fragment shader "'+aA[0].name+'"';typeof document<"u"?console.log("%c"+NA+S+"%c"+pa,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(NA+S+pa),M.raise(NA)}}function xt(Ve){Ve._commandRef=Re()}function Ct(Ve,kt,Hr,ya){xt(Ve);function CA(NA){return NA?ya.id(NA):0}Ve._fragId=CA(Ve.static.frag),Ve._vertId=CA(Ve.static.vert);function pa(NA,$A){Object.keys($A).forEach(function(qA){NA[ya.id(qA)]=!0})}var aA=Ve._uniformSet={};pa(aA,kt.static),pa(aA,kt.dynamic);var LA=Ve._attributeSet={};pa(LA,Hr.static),pa(LA,Hr.dynamic),Ve._hasCount="count"in Ve.static||"count"in Ve.dynamic||"elements"in Ve.static||"elements"in Ve.dynamic}function Nt(Ve,kt){var Hr=Fe();F(Ve+" in command "+(kt||Re())+(Hr==="unknown"?"":" called from "+Hr))}function qt(Ve,kt,Hr){Ve||Nt(kt,Hr||Re())}function Jn(Ve,kt,Hr,ya){Ve in kt||Nt("unknown parameter ("+Ve+")"+P(Hr)+". possible values: "+Object.keys(kt).join(),ya||Re())}function qr(Ve,kt,Hr,ya){K(Ve,kt)||Nt("invalid parameter type"+P(Hr)+". expected "+kt+", got "+typeof Ve,ya||Re())}function na(Ve){Ve()}function qn(Ve,kt,Hr){Ve.texture?se(Ve.texture._texture.internalformat,kt,"unsupported texture format for attachment"):se(Ve.renderbuffer._renderbuffer.format,Hr,"unsupported renderbuffer format for attachment")}var vA=33071,TA=9728,VA=9984,mI=9985,jA=9986,aI=9987,WA=5120,KA=5121,rA=5122,ta=5123,fa=5124,yA=5125,_A=5126,la=32819,AA=32820,tA=33635,ba=34042,iA=36193,lA={};lA[WA]=lA[KA]=1,lA[rA]=lA[ta]=lA[iA]=lA[tA]=lA[la]=lA[AA]=2,lA[fa]=lA[yA]=lA[_A]=lA[ba]=4;function yI(Ve,kt){return Ve===AA||Ve===la||Ve===tA?2:Ve===ba?4:lA[Ve]*kt}function rI(Ve){return!(Ve&Ve-1)&&!!Ve}function BI(Ve,kt,Hr){var ya,CA=kt.width,pa=kt.height,aA=kt.channels;M(CA>0&&CA<=Hr.maxTextureSize&&pa>0&&pa<=Hr.maxTextureSize,"invalid texture shape"),(Ve.wrapS!==vA||Ve.wrapT!==vA)&&M(rI(CA)&&rI(pa),"incompatible wrap mode for texture, both width and height must be power of 2"),kt.mipmask===1?CA!==1&&pa!==1&&M(Ve.minFilter!==VA&&Ve.minFilter!==jA&&Ve.minFilter!==mI&&Ve.minFilter!==aI,"min filter requires mipmap"):(M(rI(CA)&&rI(pa),"texture must be a square power of 2 to support mipmapping"),M(kt.mipmask===(CA<<1)-1,"missing or incomplete mipmap data")),kt.type===_A&&(Hr.extensions.indexOf("oes_texture_float_linear")<0&&M(Ve.minFilter===TA&&Ve.magFilter===TA,"filter not supported, must enable oes_texture_float_linear"),M(!Ve.genMipmaps,"mipmap generation not supported with float textures"));var LA=kt.images;for(ya=0;ya<16;++ya)if(LA[ya]){var NA=CA>>ya,$A=pa>>ya;M(kt.mipmask&1<<ya,"missing mipmap data");var qA=LA[ya];if(M(qA.width===NA&&qA.height===$A,"invalid shape for mip images"),M(qA.format===kt.format&&qA.internalformat===kt.internalformat&&qA.type===kt.type,"incompatible type for mip image"),!qA.compressed)if(qA.data){var HA=Math.ceil(yI(qA.type,aA)*NA/qA.unpackAlignment)*qA.unpackAlignment;M(qA.data.byteLength===HA*$A,"invalid data for image, buffer size is inconsistent with image format")}else qA.element||qA.copy}else Ve.genMipmaps||M((kt.mipmask&1<<ya)===0,"extra mipmap data");kt.compressed&&M(!Ve.genMipmaps,"mipmap generation for compressed images not supported")}function NI(Ve,kt,Hr,ya){var CA=Ve.width,pa=Ve.height,aA=Ve.channels;M(CA>0&&CA<=ya.maxTextureSize&&pa>0&&pa<=ya.maxTextureSize,"invalid texture shape"),M(CA===pa,"cube map must be square"),M(kt.wrapS===vA&&kt.wrapT===vA,"wrap mode not supported by cube map");for(var LA=0;LA<Hr.length;++LA){var NA=Hr[LA];M(NA.width===CA&&NA.height===pa,"inconsistent cube map face shape"),kt.genMipmaps&&(M(!NA.compressed,"can not generate mipmap for compressed textures"),M(NA.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var $A=NA.images,qA=0;qA<16;++qA){var HA=$A[qA];if(HA){var zA=CA>>qA,FA=pa>>qA;M(NA.mipmask&1<<qA,"missing mipmap data"),M(HA.width===zA&&HA.height===FA,"invalid shape for mip images"),M(HA.format===Ve.format&&HA.internalformat===Ve.internalformat&&HA.type===Ve.type,"incompatible type for mip image"),HA.compressed||(HA.data?M(HA.data.byteLength===zA*FA*Math.max(yI(HA.type,aA),HA.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):HA.element||HA.copy)}}}}var Rt=_(M,{optional:na,raise:F,commandRaise:Nt,command:qt,parameter:H,commandParameter:Jn,constructor:ge,type:z,commandType:qr,isTypedArray:J,nni:oe,oneOf:se,shaderError:St,linkError:At,callSite:Fe,saveCommandRef:xt,saveDrawInfo:Ct,framebufferFormat:qn,guessCommand:Re,texture2D:BI,textureCube:NI}),QA=0,cA=0,gI=5,LI=6;function da(Ve,kt){this.id=QA++,this.type=Ve,this.data=kt}function dA(Ve){return Ve.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function RA(Ve){if(Ve.length===0)return[];var kt=Ve.charAt(0),Hr=Ve.charAt(Ve.length-1);if(Ve.length>1&&kt===Hr&&(kt==='"'||kt==="'"))return['"'+dA(Ve.substr(1,Ve.length-2))+'"'];var ya=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ve);if(ya)return RA(Ve.substr(0,ya.index)).concat(RA(ya[1])).concat(RA(Ve.substr(ya.index+ya[0].length)));var CA=Ve.split(".");if(CA.length===1)return['"'+dA(Ve)+'"'];for(var pa=[],aA=0;aA<CA.length;++aA)pa=pa.concat(RA(CA[aA]));return pa}function pI(Ve){return"["+RA(Ve).join("][")+"]"}function vI(Ve,kt){return new da(Ve,pI(kt+""))}function EI(Ve){return typeof Ve=="function"&&!Ve._reglType||Ve instanceof da}function zI(Ve,kt){if(typeof Ve=="function")return new da(cA,Ve);if(typeof Ve=="number"||typeof Ve=="boolean")return new da(gI,Ve);if(Array.isArray(Ve))return new da(LI,Ve.map(function(Hr,ya){return zI(Hr,kt+"["+ya+"]")}));if(Ve instanceof da)return Ve;Rt(!1,"invalid option type in uniform "+kt)}var FI={DynamicVariable:da,define:vI,isDynamic:EI,unbox:zI,accessor:pI},DI={next:typeof requestAnimationFrame=="function"?function(Ve){return requestAnimationFrame(Ve)}:function(Ve){return setTimeout(Ve,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ve){return cancelAnimationFrame(Ve)}:clearTimeout},ZI=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function IC(){var Ve={"":0},kt=[""];return{id:function(Hr){var ya=Ve[Hr];return ya||(ya=Ve[Hr]=kt.length,kt.push(Hr),ya)},str:function(Hr){return kt[Hr]}}}function mC(Ve,kt,Hr){var ya=document.createElement("canvas");_(ya.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Ve.appendChild(ya),Ve===document.body&&(ya.style.position="absolute",_(Ve.style,{margin:0,padding:0}));function CA(){var LA=window.innerWidth,NA=window.innerHeight;if(Ve!==document.body){var $A=ya.getBoundingClientRect();LA=$A.right-$A.left,NA=$A.bottom-$A.top}ya.width=Hr*LA,ya.height=Hr*NA}var pa;Ve!==document.body&&typeof ResizeObserver=="function"?(pa=new ResizeObserver(function(){setTimeout(CA)}),pa.observe(Ve)):window.addEventListener("resize",CA,!1);function aA(){pa?pa.disconnect():window.removeEventListener("resize",CA),Ve.removeChild(ya)}return CA(),{canvas:ya,onDestroy:aA}}function BC(Ve,kt){function Hr(ya){try{return Ve.getContext(ya,kt)}catch{return null}}return Hr("webgl")||Hr("experimental-webgl")||Hr("webgl-experimental")}function yC(Ve){return typeof Ve.nodeName=="string"&&typeof Ve.appendChild=="function"&&typeof Ve.getBoundingClientRect=="function"}function vC(Ve){return typeof Ve.drawArrays=="function"||typeof Ve.drawElements=="function"}function _C(Ve){return typeof Ve=="string"?Ve.split():(Rt(Array.isArray(Ve),"invalid extension array"),Ve)}function RC(Ve){return typeof Ve=="string"?(Rt(typeof document<"u","not supported outside of DOM"),document.querySelector(Ve)):Ve}function Xt(Ve){var kt=Ve||{},Hr,ya,CA,pa,aA={},LA=[],NA=[],$A=typeof window>"u"?1:window.devicePixelRatio,qA=!1,HA=function(GA){GA&&Rt.raise(GA)},zA=function(){};if(typeof kt=="string"?(Rt(typeof document<"u","selector queries only supported in DOM enviroments"),Hr=document.querySelector(kt),Rt(Hr,"invalid query string for element")):typeof kt=="object"?yC(kt)?Hr=kt:vC(kt)?(pa=kt,CA=pa.canvas):(Rt.constructor(kt),"gl"in kt?pa=kt.gl:"canvas"in kt?CA=RC(kt.canvas):"container"in kt&&(ya=RC(kt.container)),"attributes"in kt&&(aA=kt.attributes,Rt.type(aA,"object","invalid context attributes")),"extensions"in kt&&(LA=_C(kt.extensions)),"optionalExtensions"in kt&&(NA=_C(kt.optionalExtensions)),"onDone"in kt&&(Rt.type(kt.onDone,"function","invalid or missing onDone callback"),HA=kt.onDone),"profile"in kt&&(qA=!!kt.profile),"pixelRatio"in kt&&($A=+kt.pixelRatio,Rt($A>0,"invalid pixel ratio"))):Rt.raise("invalid arguments to regl"),Hr&&(Hr.nodeName.toLowerCase()==="canvas"?CA=Hr:ya=Hr),!pa){if(!CA){Rt(typeof document<"u","must manually specify webgl context outside of DOM environments");var FA=mC(ya||document.body,HA,$A);if(!FA)return null;CA=FA.canvas,zA=FA.onDestroy}aA.premultipliedAlpha===void 0&&(aA.premultipliedAlpha=!0),pa=BC(CA,aA)}return pa?{gl:pa,canvas:CA,container:ya,extensions:LA,optionalExtensions:NA,pixelRatio:$A,profile:qA,onDone:HA,onDestroy:zA}:(zA(),HA("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function zn(Ve,kt){var Hr={};function ya(aA){Rt.type(aA,"string","extension name must be string");var LA=aA.toLowerCase(),NA;try{NA=Hr[LA]=Ve.getExtension(LA)}catch{}return!!NA}for(var CA=0;CA<kt.extensions.length;++CA){var pa=kt.extensions[CA];if(!ya(pa))return kt.onDestroy(),kt.onDone('"'+pa+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return kt.optionalExtensions.forEach(ya),{extensions:Hr,restore:function(){Object.keys(Hr).forEach(function(aA){if(Hr[aA]&&!ya(aA))throw new Error("(regl): error restoring extension "+aA)})}}}function oa(Ve,kt){for(var Hr=Array(Ve),ya=0;ya<Ve;++ya)Hr[ya]=kt(ya);return Hr}var MA=5120,YA=5121,PA=5122,iI=5123,XA=5124,$I=5125,GI=5126;function sC(Ve){for(var kt=16;kt<=1<<28;kt*=16)if(Ve<=kt)return kt;return 0}function eC(Ve){var kt,Hr;return kt=(Ve>65535)<<4,Ve>>>=kt,Hr=(Ve>255)<<3,Ve>>>=Hr,kt|=Hr,Hr=(Ve>15)<<2,Ve>>>=Hr,kt|=Hr,Hr=(Ve>3)<<1,Ve>>>=Hr,kt|=Hr,kt|Ve>>1}function KI(){var Ve=oa(8,function(){return[]});function kt(pa){var aA=sC(pa),LA=Ve[eC(aA)>>2];return LA.length>0?LA.pop():new ArrayBuffer(aA)}function Hr(pa){Ve[eC(pa.byteLength)>>2].push(pa)}function ya(pa,aA){var LA=null;switch(pa){case MA:LA=new Int8Array(kt(aA),0,aA);break;case YA:LA=new Uint8Array(kt(aA),0,aA);break;case PA:LA=new Int16Array(kt(2*aA),0,aA);break;case iI:LA=new Uint16Array(kt(2*aA),0,aA);break;case XA:LA=new Int32Array(kt(4*aA),0,aA);break;case $I:LA=new Uint32Array(kt(4*aA),0,aA);break;case GI:LA=new Float32Array(kt(4*aA),0,aA);break;default:return null}return LA.length!==aA?LA.subarray(0,aA):LA}function CA(pa){Hr(pa.buffer)}return{alloc:kt,free:Hr,allocType:ya,freeType:CA}}var Yt=KI();Yt.zero=KI();var Dn=3408,Kn=3410,Ut=3411,Wt=3412,ua=3413,uA=3414,EA=3415,bA=33901,lI=33902,YI=3379,uC=3386,VC=34921,jC=36347,VI=36348,hE=35661,OC=35660,JC=34930,fE=36349,dE=34076,EE=34024,hm=7936,fm=7937,kE=7938,sE=35724,GC=34047,QE=36063,PE=34852,OE=3553,em=34067,GE=34069,mE=33984,_E=6408,VE=5126,tm=5121,rm=36160,AE=36053,Nm=36064,Mt=16384,Ot=function(Ve,kt){var Hr=1;kt.ext_texture_filter_anisotropic&&(Hr=Ve.getParameter(GC));var ya=1,CA=1;kt.webgl_draw_buffers&&(ya=Ve.getParameter(PE),CA=Ve.getParameter(QE));var pa=!!kt.oes_texture_float;if(pa){var aA=Ve.createTexture();Ve.bindTexture(OE,aA),Ve.texImage2D(OE,0,_E,1,1,0,_E,VE,null);var LA=Ve.createFramebuffer();if(Ve.bindFramebuffer(rm,LA),Ve.framebufferTexture2D(rm,Nm,OE,aA,0),Ve.bindTexture(OE,null),Ve.checkFramebufferStatus(rm)!==AE)pa=!1;else{Ve.viewport(0,0,1,1),Ve.clearColor(1,0,0,1),Ve.clear(Mt);var NA=Yt.allocType(VE,4);Ve.readPixels(0,0,1,1,_E,VE,NA),Ve.getError()?pa=!1:(Ve.deleteFramebuffer(LA),Ve.deleteTexture(aA),pa=NA[0]===1),Yt.freeType(NA)}}var $A=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),qA=!0;if(!$A){var HA=Ve.createTexture(),zA=Yt.allocType(tm,36);Ve.activeTexture(mE),Ve.bindTexture(em,HA),Ve.texImage2D(GE,0,_E,3,3,0,_E,tm,zA),Yt.freeType(zA),Ve.bindTexture(em,null),Ve.deleteTexture(HA),qA=!Ve.getError()}return{colorBits:[Ve.getParameter(Kn),Ve.getParameter(Ut),Ve.getParameter(Wt),Ve.getParameter(ua)],depthBits:Ve.getParameter(uA),stencilBits:Ve.getParameter(EA),subpixelBits:Ve.getParameter(Dn),extensions:Object.keys(kt).filter(function(FA){return!!kt[FA]}),maxAnisotropic:Hr,maxDrawbuffers:ya,maxColorAttachments:CA,pointSizeDims:Ve.getParameter(bA),lineWidthDims:Ve.getParameter(lI),maxViewportDims:Ve.getParameter(uC),maxCombinedTextureUnits:Ve.getParameter(hE),maxCubeMapSize:Ve.getParameter(dE),maxRenderbufferSize:Ve.getParameter(EE),maxTextureUnits:Ve.getParameter(JC),maxTextureSize:Ve.getParameter(YI),maxAttributes:Ve.getParameter(VC),maxVertexUniforms:Ve.getParameter(jC),maxVertexTextureUnits:Ve.getParameter(OC),maxVaryingVectors:Ve.getParameter(VI),maxFragmentUniforms:Ve.getParameter(fE),glsl:Ve.getParameter(sE),renderer:Ve.getParameter(fm),vendor:Ve.getParameter(hm),version:Ve.getParameter(kE),readFloat:pa,npotTextureCube:qA}};function Qn(Ve){return!!Ve&&typeof Ve=="object"&&Array.isArray(Ve.shape)&&Array.isArray(Ve.stride)&&typeof Ve.offset=="number"&&Ve.shape.length===Ve.stride.length&&(Array.isArray(Ve.data)||d(Ve.data))}var va=function(Ve){return Object.keys(Ve).map(function(kt){return Ve[kt]})},UA={shape:lE,flatten:UC};function wI(Ve,kt,Hr){for(var ya=0;ya<kt;++ya)Hr[ya]=Ve[ya]}function AC(Ve,kt,Hr,ya){for(var CA=0,pa=0;pa<kt;++pa)for(var aA=Ve[pa],LA=0;LA<Hr;++LA)ya[CA++]=aA[LA]}function xC(Ve,kt,Hr,ya,CA,pa){for(var aA=pa,LA=0;LA<kt;++LA)for(var NA=Ve[LA],$A=0;$A<Hr;++$A)for(var qA=NA[$A],HA=0;HA<ya;++HA)CA[aA++]=qA[HA]}function NC(Ve,kt,Hr,ya,CA){for(var pa=1,aA=Hr+1;aA<kt.length;++aA)pa*=kt[aA];var LA=kt[Hr];if(kt.length-Hr===4){var NA=kt[Hr+1],$A=kt[Hr+2],qA=kt[Hr+3];for(aA=0;aA<LA;++aA)xC(Ve[aA],NA,$A,qA,ya,CA),CA+=pa}else for(aA=0;aA<LA;++aA)NC(Ve[aA],kt,Hr+1,ya,CA),CA+=pa}function UC(Ve,kt,Hr,ya){var CA=1;if(kt.length)for(var pa=0;pa<kt.length;++pa)CA*=kt[pa];else CA=0;var aA=ya||Yt.allocType(Hr,CA);switch(kt.length){case 0:break;case 1:wI(Ve,kt[0],aA);break;case 2:AC(Ve,kt[0],kt[1],aA);break;case 3:xC(Ve,kt[0],kt[1],kt[2],aA,0);break;default:NC(Ve,kt,0,aA,0)}return aA}function lE(Ve){for(var kt=[],Hr=Ve;Hr.length;Hr=Hr[0])kt.push(Hr.length);return kt}var Lm={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Iy=5120,xB=5122,Cy=5124,Ey=5121,iB=5123,my=5125,By=5126,yy=5126,JE={int8:Iy,int16:xB,int32:Cy,uint8:Ey,uint16:iB,uint32:my,float:By,float32:yy},vy=35048,Qy=35040,Fm={dynamic:vy,stream:Qy,static:35044},Mm=UA.flatten,km=UA.shape,nB=35044,oB=35040,Pm=5121,Om=5126,SE=[];SE[5120]=1,SE[5122]=2,SE[5124]=4,SE[5121]=1,SE[5123]=2,SE[5125]=4,SE[5126]=4;function Gm(Ve){return Lm[Object.prototype.toString.call(Ve)]|0}function bB(Ve,kt){for(var Hr=0;Hr<kt.length;++Hr)Ve[Hr]=kt[Hr]}function DB(Ve,kt,Hr,ya,CA,pa,aA){for(var LA=0,NA=0;NA<Hr;++NA)for(var $A=0;$A<ya;++$A)Ve[LA++]=kt[CA*NA+pa*$A+aA]}function dm(Ve,kt,Hr,ya){var CA=0,pa={};function aA(ia){this.id=CA++,this.buffer=Ve.createBuffer(),this.type=ia,this.usage=nB,this.byteLength=0,this.dimension=1,this.dtype=Pm,this.persistentData=null,Hr.profile&&(this.stats={size:0})}aA.prototype.bind=function(){Ve.bindBuffer(this.type,this.buffer)},aA.prototype.destroy=function(){zA(this)};var LA=[];function NA(ia,oA){var OA=LA.pop();return OA||(OA=new aA(ia)),OA.bind(),HA(OA,oA,oB,0,1,!1),OA}function $A(ia){LA.push(ia)}function qA(ia,oA,OA){ia.byteLength=oA.byteLength,Ve.bufferData(ia.type,oA,OA)}function HA(ia,oA,OA,uI,xA,AI){var oI;if(ia.usage=OA,Array.isArray(oA)){if(ia.dtype=uI||Om,oA.length>0){var bI;if(Array.isArray(oA[0])){oI=km(oA);for(var mA=1,IA=1;IA<oI.length;++IA)mA*=oI[IA];ia.dimension=mA,bI=Mm(oA,oI,ia.dtype),qA(ia,bI,OA),AI?ia.persistentData=bI:Yt.freeType(bI)}else if(typeof oA[0]=="number"){ia.dimension=xA;var II=Yt.allocType(ia.dtype,oA.length);bB(II,oA),qA(ia,II,OA),AI?ia.persistentData=II:Yt.freeType(II)}else d(oA[0])?(ia.dimension=oA[0].length,ia.dtype=uI||Gm(oA[0])||Om,bI=Mm(oA,[oA.length,oA[0].length],ia.dtype),qA(ia,bI,OA),AI?ia.persistentData=bI:Yt.freeType(bI)):Rt.raise("invalid buffer data")}}else if(d(oA))ia.dtype=uI||Gm(oA),ia.dimension=xA,qA(ia,oA,OA),AI&&(ia.persistentData=new Uint8Array(new Uint8Array(oA.buffer)));else if(Qn(oA)){oI=oA.shape;var ZA=oA.stride,kA=oA.offset,eI=0,nI=0,HI=0,UI=0;oI.length===1?(eI=oI[0],nI=1,HI=ZA[0],UI=0):oI.length===2?(eI=oI[0],nI=oI[1],HI=ZA[0],UI=ZA[1]):Rt.raise("invalid shape"),ia.dtype=uI||Gm(oA.data)||Om,ia.dimension=nI;var sI=Yt.allocType(ia.dtype,eI*nI);DB(sI,oA.data,eI,nI,HI,UI,kA),qA(ia,sI,OA),AI?ia.persistentData=sI:Yt.freeType(sI)}else oA instanceof ArrayBuffer?(ia.dtype=Pm,ia.dimension=xA,qA(ia,oA,OA),AI&&(ia.persistentData=new Uint8Array(new Uint8Array(oA)))):Rt.raise("invalid buffer data")}function zA(ia){kt.bufferCount--,ya(ia);var oA=ia.buffer;Rt(oA,"buffer must not be deleted already"),Ve.deleteBuffer(oA),ia.buffer=null,delete pa[ia.id]}function FA(ia,oA,OA,uI){kt.bufferCount++;var xA=new aA(oA);pa[xA.id]=xA;function AI(mA){var IA=nB,II=null,ZA=0,kA=0,eI=1;return Array.isArray(mA)||d(mA)||Qn(mA)||mA instanceof ArrayBuffer?II=mA:typeof mA=="number"?ZA=mA|0:mA&&(Rt.type(mA,"object","buffer arguments must be an object, a number or an array"),"data"in mA&&(Rt(II===null||Array.isArray(II)||d(II)||Qn(II),"invalid data for buffer"),II=mA.data),"usage"in mA&&(Rt.parameter(mA.usage,Fm,"invalid buffer usage"),IA=Fm[mA.usage]),"type"in mA&&(Rt.parameter(mA.type,JE,"invalid buffer type"),kA=JE[mA.type]),"dimension"in mA&&(Rt.type(mA.dimension,"number","invalid dimension"),eI=mA.dimension|0),"length"in mA&&(Rt.nni(ZA,"buffer length must be a nonnegative integer"),ZA=mA.length|0)),xA.bind(),II?HA(xA,II,IA,kA,eI,uI):(ZA&&Ve.bufferData(xA.type,ZA,IA),xA.dtype=kA||Pm,xA.usage=IA,xA.dimension=eI,xA.byteLength=ZA),Hr.profile&&(xA.stats.size=xA.byteLength*SE[xA.dtype]),AI}function oI(mA,IA){Rt(IA+mA.byteLength<=xA.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+mA.byteLength+" starting from offset "+IA+" to a buffer of size "+xA.byteLength),Ve.bufferSubData(xA.type,IA,mA)}function bI(mA,IA){var II=(IA||0)|0,ZA;if(xA.bind(),d(mA)||mA instanceof ArrayBuffer)oI(mA,II);else if(Array.isArray(mA)){if(mA.length>0)if(typeof mA[0]=="number"){var kA=Yt.allocType(xA.dtype,mA.length);bB(kA,mA),oI(kA,II),Yt.freeType(kA)}else if(Array.isArray(mA[0])||d(mA[0])){ZA=km(mA);var eI=Mm(mA,ZA,xA.dtype);oI(eI,II),Yt.freeType(eI)}else Rt.raise("invalid buffer data")}else if(Qn(mA)){ZA=mA.shape;var nI=mA.stride,HI=0,UI=0,sI=0,cI=0;ZA.length===1?(HI=ZA[0],UI=1,sI=nI[0],cI=0):ZA.length===2?(HI=ZA[0],UI=ZA[1],sI=nI[0],cI=nI[1]):Rt.raise("invalid shape");var MI=Array.isArray(mA.data)?xA.dtype:Gm(mA.data),qI=Yt.allocType(MI,HI*UI);DB(qI,mA.data,HI,UI,sI,cI,mA.offset),oI(qI,II),Yt.freeType(qI)}else Rt.raise("invalid data for buffer subdata");return AI}return OA||AI(ia),AI._reglType="buffer",AI._buffer=xA,AI.subdata=bI,Hr.profile&&(AI.stats=xA.stats),AI.destroy=function(){zA(xA)},AI}function GA(){va(pa).forEach(function(ia){ia.buffer=Ve.createBuffer(),Ve.bindBuffer(ia.type,ia.buffer),Ve.bufferData(ia.type,ia.persistentData||ia.byteLength,ia.usage)})}return Hr.profile&&(kt.getTotalBufferSize=function(){var ia=0;return Object.keys(pa).forEach(function(oA){ia+=pa[oA].stats.size}),ia}),{create:FA,createStream:NA,destroyStream:$A,clear:function(){va(pa).forEach(zA),LA.forEach(zA)},getBuffer:function(ia){return ia&&ia._buffer instanceof aA?ia._buffer:null},restore:GA,_initBuffer:HA}}var RB=0,sB=0,_y=1,Sy=1,wy=4,Be=4,Le={points:RB,point:sB,lines:_y,line:Sy,triangles:wy,triangle:Be,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Me=0,Ge=1,Et=4,wt=5120,Lt=5121,Un=5122,Yr=5123,aa=5124,fA=5125,DA=34963,sA=35040,tI=35044;function tC(Ve,kt,Hr,ya){var CA={},pa=0,aA={uint8:Lt,uint16:Yr};kt.oes_element_index_uint&&(aA.uint32=fA);function LA(GA){this.id=pa++,CA[this.id]=this,this.buffer=GA,this.primType=Et,this.vertCount=0,this.type=0}LA.prototype.bind=function(){this.buffer.bind()};var NA=[];function $A(GA){var ia=NA.pop();return ia||(ia=new LA(Hr.create(null,DA,!0,!1)._buffer)),HA(ia,GA,sA,-1,-1,0,0),ia}function qA(GA){NA.push(GA)}function HA(GA,ia,oA,OA,uI,xA,AI){GA.buffer.bind();var oI;if(ia){var bI=AI;!AI&&(!d(ia)||Qn(ia)&&!d(ia.data))&&(bI=kt.oes_element_index_uint?fA:Yr),Hr._initBuffer(GA.buffer,ia,oA,bI,3)}else Ve.bufferData(DA,xA,oA),GA.buffer.dtype=oI||Lt,GA.buffer.usage=oA,GA.buffer.dimension=3,GA.buffer.byteLength=xA;if(oI=AI,!AI){switch(GA.buffer.dtype){case Lt:case wt:oI=Lt;break;case Yr:case Un:oI=Yr;break;case fA:case aa:oI=fA;break;default:Rt.raise("unsupported type for element array")}GA.buffer.dtype=oI}GA.type=oI,Rt(oI!==fA||!!kt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var mA=uI;mA<0&&(mA=GA.buffer.byteLength,oI===Yr?mA>>=1:oI===fA&&(mA>>=2)),GA.vertCount=mA;var IA=OA;if(OA<0){IA=Et;var II=GA.buffer.dimension;II===1&&(IA=Me),II===2&&(IA=Ge),II===3&&(IA=Et)}GA.primType=IA}function zA(GA){ya.elementsCount--,Rt(GA.buffer!==null,"must not double destroy elements"),delete CA[GA.id],GA.buffer.destroy(),GA.buffer=null}function FA(GA,ia){var oA=Hr.create(null,DA,!0),OA=new LA(oA._buffer);ya.elementsCount++;function uI(xA){if(!xA)oA(),OA.primType=Et,OA.vertCount=0,OA.type=Lt;else if(typeof xA=="number")oA(xA),OA.primType=Et,OA.vertCount=xA|0,OA.type=Lt;else{var AI=null,oI=tI,bI=-1,mA=-1,IA=0,II=0;Array.isArray(xA)||d(xA)||Qn(xA)?AI=xA:(Rt.type(xA,"object","invalid arguments for elements"),"data"in xA&&(AI=xA.data,Rt(Array.isArray(AI)||d(AI)||Qn(AI),"invalid data for element buffer")),"usage"in xA&&(Rt.parameter(xA.usage,Fm,"invalid element buffer usage"),oI=Fm[xA.usage]),"primitive"in xA&&(Rt.parameter(xA.primitive,Le,"invalid element buffer primitive"),bI=Le[xA.primitive]),"count"in xA&&(Rt(typeof xA.count=="number"&&xA.count>=0,"invalid vertex count for elements"),mA=xA.count|0),"type"in xA&&(Rt.parameter(xA.type,aA,"invalid buffer type"),II=aA[xA.type]),"length"in xA?IA=xA.length|0:(IA=mA,II===Yr||II===Un?IA*=2:(II===fA||II===aa)&&(IA*=4))),HA(OA,AI,oI,bI,mA,IA,II)}return uI}return uI(GA),uI._reglType="elements",uI._elements=OA,uI.subdata=function(xA,AI){return oA.subdata(xA,AI),uI},uI.destroy=function(){zA(OA)},uI}return{create:FA,createStream:$A,destroyStream:qA,getElements:function(GA){return typeof GA=="function"&&GA._elements instanceof LA?GA._elements:null},clear:function(){va(CA).forEach(zA)}}}var fC=new Float32Array(1),aC=new Uint32Array(fC.buffer),WC=5123;function MC(Ve){for(var kt=Yt.allocType(WC,Ve.length),Hr=0;Hr<Ve.length;++Hr)if(isNaN(Ve[Hr]))kt[Hr]=65535;else if(Ve[Hr]===1/0)kt[Hr]=31744;else if(Ve[Hr]===-1/0)kt[Hr]=64512;else{fC[0]=Ve[Hr];var ya=aC[0],CA=ya>>>31<<15,pa=(ya<<1>>>24)-127,aA=ya>>13&1023;if(pa<-24)kt[Hr]=CA;else if(pa<-14){var LA=-14-pa;kt[Hr]=CA+(aA+1024>>LA)}else pa>15?kt[Hr]=CA+31744:kt[Hr]=CA+(pa+15<<10)+aA}return kt}function dC(Ve){return Array.isArray(Ve)||d(Ve)}var BE=function(Ve){return!(Ve&Ve-1)&&!!Ve},hC=34467,ZC=3553,pC=34067,bC=34069,yE=6408,pm=6406,cE=6407,RE=6409,uE=6410,TE=32854,wE=32855,gE=36194,aB=32819,NE=32820,LE=33635,xy=34042,AB=6402,Um=34041,QC=35904,im=35906,eE=36193,UE=33776,lB=33777,cB=33778,$m=33779,$E=35986,Hm=35987,FE=34798,uB=35840,nm=35841,Im=35842,Cm=35843,qm=36196,om=5121,sm=5123,Em=5125,KE=5126,by=10242,gB=10243,TB=10497,zt=33071,ea=33648,nA=10240,hA=10241,wA=9728,fI=9729,_I=9984,RI=9985,SI=9986,lC=9987,jI=33170,WI=4352,gC=4353,JI=4354,SC=34046,aE=3317,tE=37440,pE=37441,xE=37443,zE=37444,$C=33984,DQ=[_I,SI,RI,lC],NB=[0,RE,uE,cE,yE],bE={};bE[RE]=bE[pm]=bE[AB]=1,bE[Um]=bE[uE]=2,bE[cE]=bE[QC]=3,bE[yE]=bE[im]=4;function Ym(Ve){return"[object "+Ve+"]"}var o0=Ym("HTMLCanvasElement"),s0=Ym("OffscreenCanvas"),a0=Ym("CanvasRenderingContext2D"),A0=Ym("ImageBitmap"),l0=Ym("HTMLImageElement"),c0=Ym("HTMLVideoElement"),RQ=Object.keys(Lm).concat([o0,s0,a0,A0,l0,c0]),Vm=[];Vm[om]=1,Vm[KE]=4,Vm[eE]=2,Vm[sm]=2,Vm[Em]=4;var rE=[];rE[TE]=2,rE[wE]=2,rE[gE]=2,rE[Um]=4,rE[UE]=.5,rE[lB]=.5,rE[cB]=1,rE[$m]=1,rE[$E]=.5,rE[Hm]=1,rE[FE]=1,rE[uB]=.5,rE[nm]=.25,rE[Im]=.5,rE[Cm]=.25,rE[qm]=.5;function u0(Ve){return Array.isArray(Ve)&&(Ve.length===0||typeof Ve[0]=="number")}function g0(Ve){if(!Array.isArray(Ve))return!1;var kt=Ve.length;return!(kt===0||!dC(Ve[0]))}function mm(Ve){return Object.prototype.toString.call(Ve)}function h0(Ve){return mm(Ve)===o0}function f0(Ve){return mm(Ve)===s0}function TQ(Ve){return mm(Ve)===a0}function NQ(Ve){return mm(Ve)===A0}function LQ(Ve){return mm(Ve)===l0}function FQ(Ve){return mm(Ve)===c0}function Dy(Ve){if(!Ve)return!1;var kt=mm(Ve);return RQ.indexOf(kt)>=0?!0:u0(Ve)||g0(Ve)||Qn(Ve)}function d0(Ve){return Lm[Object.prototype.toString.call(Ve)]|0}function MQ(Ve,kt){var Hr=kt.length;switch(Ve.type){case om:case sm:case Em:case KE:var ya=Yt.allocType(Ve.type,Hr);ya.set(kt),Ve.data=ya;break;case eE:Ve.data=MC(kt);break;default:Rt.raise("unsupported texture type, must specify a typed array")}}function p0(Ve,kt){return Yt.allocType(Ve.type===eE?KE:Ve.type,kt)}function I0(Ve,kt){Ve.type===eE?(Ve.data=MC(kt),Yt.freeType(kt)):Ve.data=kt}function kQ(Ve,kt,Hr,ya,CA,pa){for(var aA=Ve.width,LA=Ve.height,NA=Ve.channels,$A=aA*LA*NA,qA=p0(Ve,$A),HA=0,zA=0;zA<LA;++zA)for(var FA=0;FA<aA;++FA)for(var GA=0;GA<NA;++GA)qA[HA++]=kt[Hr*FA+ya*zA+CA*GA+pa];I0(Ve,qA)}function LB(Ve,kt,Hr,ya,CA,pa){var aA;if(typeof rE[Ve]<"u"?aA=rE[Ve]:aA=bE[Ve]*Vm[kt],pa&&(aA*=6),CA){for(var LA=0,NA=Hr;NA>=1;)LA+=aA*NA*NA,NA/=2;return LA}else return aA*Hr*ya}function PQ(Ve,kt,Hr,ya,CA,pa,aA){var LA={"don't care":WI,"dont care":WI,nice:JI,fast:gC},NA={repeat:TB,clamp:zt,mirror:ea},$A={nearest:wA,linear:fI},qA=_({mipmap:lC,"nearest mipmap nearest":_I,"linear mipmap nearest":RI,"nearest mipmap linear":SI,"linear mipmap linear":lC},$A),HA={none:0,browser:zE},zA={uint8:om,rgba4:aB,rgb565:LE,"rgb5 a1":NE},FA={alpha:pm,luminance:RE,"luminance alpha":uE,rgb:cE,rgba:yE,rgba4:TE,"rgb5 a1":wE,rgb565:gE},GA={};kt.ext_srgb&&(FA.srgb=QC,FA.srgba=im),kt.oes_texture_float&&(zA.float32=zA.float=KE),kt.oes_texture_half_float&&(zA.float16=zA["half float"]=eE),kt.webgl_depth_texture&&(_(FA,{depth:AB,"depth stencil":Um}),_(zA,{uint16:sm,uint32:Em,"depth stencil":xy})),kt.webgl_compressed_texture_s3tc&&_(GA,{"rgb s3tc dxt1":UE,"rgba s3tc dxt1":lB,"rgba s3tc dxt3":cB,"rgba s3tc dxt5":$m}),kt.webgl_compressed_texture_atc&&_(GA,{"rgb atc":$E,"rgba atc explicit alpha":Hm,"rgba atc interpolated alpha":FE}),kt.webgl_compressed_texture_pvrtc&&_(GA,{"rgb pvrtc 4bppv1":uB,"rgb pvrtc 2bppv1":nm,"rgba pvrtc 4bppv1":Im,"rgba pvrtc 2bppv1":Cm}),kt.webgl_compressed_texture_etc1&&(GA["rgb etc1"]=qm);var ia=Array.prototype.slice.call(Ve.getParameter(hC));Object.keys(GA).forEach(function(Kt){var eA=GA[Kt];ia.indexOf(eA)>=0&&(FA[Kt]=eA)});var oA=Object.keys(FA);Hr.textureFormats=oA;var OA=[];Object.keys(FA).forEach(function(Kt){var eA=FA[Kt];OA[eA]=Kt});var uI=[];Object.keys(zA).forEach(function(Kt){var eA=zA[Kt];uI[eA]=Kt});var xA=[];Object.keys($A).forEach(function(Kt){var eA=$A[Kt];xA[eA]=Kt});var AI=[];Object.keys(qA).forEach(function(Kt){var eA=qA[Kt];AI[eA]=Kt});var oI=[];Object.keys(NA).forEach(function(Kt){var eA=NA[Kt];oI[eA]=Kt});var bI=oA.reduce(function(Kt,eA){var ha=FA[eA];return ha===RE||ha===pm||ha===RE||ha===uE||ha===AB||ha===Um||kt.ext_srgb&&(ha===QC||ha===im)?Kt[ha]=ha:ha===wE||eA.indexOf("rgba")>=0?Kt[ha]=yE:Kt[ha]=cE,Kt},{});function mA(){this.internalformat=yE,this.format=yE,this.type=om,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=zE,this.width=0,this.height=0,this.channels=0}function IA(Kt,eA){Kt.internalformat=eA.internalformat,Kt.format=eA.format,Kt.type=eA.type,Kt.compressed=eA.compressed,Kt.premultiplyAlpha=eA.premultiplyAlpha,Kt.flipY=eA.flipY,Kt.unpackAlignment=eA.unpackAlignment,Kt.colorSpace=eA.colorSpace,Kt.width=eA.width,Kt.height=eA.height,Kt.channels=eA.channels}function II(Kt,eA){if(!(typeof eA!="object"||!eA)){if("premultiplyAlpha"in eA&&(Rt.type(eA.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Kt.premultiplyAlpha=eA.premultiplyAlpha),"flipY"in eA&&(Rt.type(eA.flipY,"boolean","invalid texture flip"),Kt.flipY=eA.flipY),"alignment"in eA&&(Rt.oneOf(eA.alignment,[1,2,4,8],"invalid texture unpack alignment"),Kt.unpackAlignment=eA.alignment),"colorSpace"in eA&&(Rt.parameter(eA.colorSpace,HA,"invalid colorSpace"),Kt.colorSpace=HA[eA.colorSpace]),"type"in eA){var ha=eA.type;Rt(kt.oes_texture_float||!(ha==="float"||ha==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Rt(kt.oes_texture_half_float||!(ha==="half float"||ha==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Rt(kt.webgl_depth_texture||!(ha==="uint16"||ha==="uint32"||ha==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Rt.parameter(ha,zA,"invalid texture type"),Kt.type=zA[ha]}var dI=Kt.width,rC=Kt.height,Pt=Kt.channels,Ft=!1;"shape"in eA?(Rt(Array.isArray(eA.shape)&&eA.shape.length>=2,"shape must be an array"),dI=eA.shape[0],rC=eA.shape[1],eA.shape.length===3&&(Pt=eA.shape[2],Rt(Pt>0&&Pt<=4,"invalid number of channels"),Ft=!0),Rt(dI>=0&&dI<=Hr.maxTextureSize,"invalid width"),Rt(rC>=0&&rC<=Hr.maxTextureSize,"invalid height")):("radius"in eA&&(dI=rC=eA.radius,Rt(dI>=0&&dI<=Hr.maxTextureSize,"invalid radius")),"width"in eA&&(dI=eA.width,Rt(dI>=0&&dI<=Hr.maxTextureSize,"invalid width")),"height"in eA&&(rC=eA.height,Rt(rC>=0&&rC<=Hr.maxTextureSize,"invalid height")),"channels"in eA&&(Pt=eA.channels,Rt(Pt>0&&Pt<=4,"invalid number of channels"),Ft=!0)),Kt.width=dI|0,Kt.height=rC|0,Kt.channels=Pt|0;var zr=!1;if("format"in eA){var ra=eA.format;Rt(kt.webgl_depth_texture||!(ra==="depth"||ra==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Rt.parameter(ra,FA,"invalid texture format");var sa=Kt.internalformat=FA[ra];Kt.format=bI[sa],ra in zA&&("type"in eA||(Kt.type=zA[ra])),ra in GA&&(Kt.compressed=!0),zr=!0}!Ft&&zr?Kt.channels=bE[Kt.format]:Ft&&!zr?Kt.channels!==NB[Kt.format]&&(Kt.format=Kt.internalformat=NB[Kt.channels]):zr&&Ft&&Rt(Kt.channels===bE[Kt.format],"number of channels inconsistent with specified format")}}function ZA(Kt){Ve.pixelStorei(tE,Kt.flipY),Ve.pixelStorei(pE,Kt.premultiplyAlpha),Ve.pixelStorei(xE,Kt.colorSpace),Ve.pixelStorei(aE,Kt.unpackAlignment)}function kA(){mA.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function eI(Kt,eA){var ha=null;if(Dy(eA)?ha=eA:eA&&(Rt.type(eA,"object","invalid pixel data type"),II(Kt,eA),"x"in eA&&(Kt.xOffset=eA.x|0),"y"in eA&&(Kt.yOffset=eA.y|0),Dy(eA.data)&&(ha=eA.data)),Rt(!Kt.compressed||ha instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),eA.copy){Rt(!ha,"can not specify copy and data field for the same texture");var dI=CA.viewportWidth,rC=CA.viewportHeight;Kt.width=Kt.width||dI-Kt.xOffset,Kt.height=Kt.height||rC-Kt.yOffset,Kt.needsCopy=!0,Rt(Kt.xOffset>=0&&Kt.xOffset<dI&&Kt.yOffset>=0&&Kt.yOffset<rC&&Kt.width>0&&Kt.width<=dI&&Kt.height>0&&Kt.height<=rC,"copy texture read out of bounds")}else if(!ha)Kt.width=Kt.width||1,Kt.height=Kt.height||1,Kt.channels=Kt.channels||4;else if(d(ha))Kt.channels=Kt.channels||4,Kt.data=ha,!("type"in eA)&&Kt.type===om&&(Kt.type=d0(ha));else if(u0(ha))Kt.channels=Kt.channels||4,MQ(Kt,ha),Kt.alignment=1,Kt.needsFree=!0;else if(Qn(ha)){var Pt=ha.data;!Array.isArray(Pt)&&Kt.type===om&&(Kt.type=d0(Pt));var Ft=ha.shape,zr=ha.stride,ra,sa,Hn,kn,Wn,Gt;Ft.length===3?(Hn=Ft[2],Gt=zr[2]):(Rt(Ft.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Hn=1,Gt=1),ra=Ft[0],sa=Ft[1],kn=zr[0],Wn=zr[1],Kt.alignment=1,Kt.width=ra,Kt.height=sa,Kt.channels=Hn,Kt.format=Kt.internalformat=NB[Hn],Kt.needsFree=!0,kQ(Kt,Pt,kn,Wn,Gt,ha.offset)}else if(h0(ha)||f0(ha)||TQ(ha))h0(ha)||f0(ha)?Kt.element=ha:Kt.element=ha.canvas,Kt.width=Kt.element.width,Kt.height=Kt.element.height,Kt.channels=4;else if(NQ(ha))Kt.element=ha,Kt.width=ha.width,Kt.height=ha.height,Kt.channels=4;else if(LQ(ha))Kt.element=ha,Kt.width=ha.naturalWidth,Kt.height=ha.naturalHeight,Kt.channels=4;else if(FQ(ha))Kt.element=ha,Kt.width=ha.videoWidth,Kt.height=ha.videoHeight,Kt.channels=4;else if(g0(ha)){var jt=Kt.width||ha[0].length,Vt=Kt.height||ha.length,ga=Kt.channels;dC(ha[0][0])?ga=ga||ha[0][0].length:ga=ga||1;for(var ca=UA.shape(ha),pA=1,BA=0;BA<ca.length;++BA)pA*=ca[BA];var JA=p0(Kt,pA);UA.flatten(ha,ca,"",JA),I0(Kt,JA),Kt.alignment=1,Kt.width=jt,Kt.height=Vt,Kt.channels=ga,Kt.format=Kt.internalformat=NB[ga],Kt.needsFree=!0}Kt.type===KE?Rt(Hr.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Kt.type===eE&&Rt(Hr.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function nI(Kt,eA,ha){var dI=Kt.element,rC=Kt.data,Pt=Kt.internalformat,Ft=Kt.format,zr=Kt.type,ra=Kt.width,sa=Kt.height;ZA(Kt),dI?Ve.texImage2D(eA,ha,Ft,Ft,zr,dI):Kt.compressed?Ve.compressedTexImage2D(eA,ha,Pt,ra,sa,0,rC):Kt.needsCopy?(ya(),Ve.copyTexImage2D(eA,ha,Ft,Kt.xOffset,Kt.yOffset,ra,sa,0)):Ve.texImage2D(eA,ha,Ft,ra,sa,0,Ft,zr,rC||null)}function HI(Kt,eA,ha,dI,rC){var Pt=Kt.element,Ft=Kt.data,zr=Kt.internalformat,ra=Kt.format,sa=Kt.type,Hn=Kt.width,kn=Kt.height;ZA(Kt),Pt?Ve.texSubImage2D(eA,rC,ha,dI,ra,sa,Pt):Kt.compressed?Ve.compressedTexSubImage2D(eA,rC,ha,dI,zr,Hn,kn,Ft):Kt.needsCopy?(ya(),Ve.copyTexSubImage2D(eA,rC,ha,dI,Kt.xOffset,Kt.yOffset,Hn,kn)):Ve.texSubImage2D(eA,rC,ha,dI,Hn,kn,ra,sa,Ft)}var UI=[];function sI(){return UI.pop()||new kA}function cI(Kt){Kt.needsFree&&Yt.freeType(Kt.data),kA.call(Kt),UI.push(Kt)}function MI(){mA.call(this),this.genMipmaps=!1,this.mipmapHint=WI,this.mipmask=0,this.images=Array(16)}function qI(Kt,eA,ha){var dI=Kt.images[0]=sI();Kt.mipmask=1,dI.width=Kt.width=eA,dI.height=Kt.height=ha,dI.channels=Kt.channels=4}function iC(Kt,eA){var ha=null;if(Dy(eA))ha=Kt.images[0]=sI(),IA(ha,Kt),eI(ha,eA),Kt.mipmask=1;else if(II(Kt,eA),Array.isArray(eA.mipmap))for(var dI=eA.mipmap,rC=0;rC<dI.length;++rC)ha=Kt.images[rC]=sI(),IA(ha,Kt),ha.width>>=rC,ha.height>>=rC,eI(ha,dI[rC]),Kt.mipmask|=1<<rC;else ha=Kt.images[0]=sI(),IA(ha,Kt),eI(ha,eA),Kt.mipmask=1;IA(Kt,Kt.images[0]),Kt.compressed&&(Kt.internalformat===UE||Kt.internalformat===lB||Kt.internalformat===cB||Kt.internalformat===$m)&&Rt(Kt.width%4===0&&Kt.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function DC(Kt,eA){for(var ha=Kt.images,dI=0;dI<ha.length;++dI){if(!ha[dI])return;nI(ha[dI],eA,dI)}}var TC=[];function oC(){var Kt=TC.pop()||new MI;mA.call(Kt),Kt.mipmask=0;for(var eA=0;eA<16;++eA)Kt.images[eA]=null;return Kt}function HC(Kt){for(var eA=Kt.images,ha=0;ha<eA.length;++ha)eA[ha]&&cI(eA[ha]),eA[ha]=null;TC.push(Kt)}function wC(){this.minFilter=wA,this.magFilter=wA,this.wrapS=zt,this.wrapT=zt,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=WI}function PC(Kt,eA){if("min"in eA){var ha=eA.min;Rt.parameter(ha,qA),Kt.minFilter=qA[ha],DQ.indexOf(Kt.minFilter)>=0&&!("faces"in eA)&&(Kt.genMipmaps=!0)}if("mag"in eA){var dI=eA.mag;Rt.parameter(dI,$A),Kt.magFilter=$A[dI]}var rC=Kt.wrapS,Pt=Kt.wrapT;if("wrap"in eA){var Ft=eA.wrap;typeof Ft=="string"?(Rt.parameter(Ft,NA),rC=Pt=NA[Ft]):Array.isArray(Ft)&&(Rt.parameter(Ft[0],NA),Rt.parameter(Ft[1],NA),rC=NA[Ft[0]],Pt=NA[Ft[1]])}else{if("wrapS"in eA){var zr=eA.wrapS;Rt.parameter(zr,NA),rC=NA[zr]}if("wrapT"in eA){var ra=eA.wrapT;Rt.parameter(ra,NA),Pt=NA[ra]}}if(Kt.wrapS=rC,Kt.wrapT=Pt,"anisotropic"in eA){var sa=eA.anisotropic;Rt(typeof sa=="number"&&sa>=1&&sa<=Hr.maxAnisotropic,"aniso samples must be between 1 and "),Kt.anisotropic=eA.anisotropic}if("mipmap"in eA){var Hn=!1;switch(typeof eA.mipmap){case"string":Rt.parameter(eA.mipmap,LA,"invalid mipmap hint"),Kt.mipmapHint=LA[eA.mipmap],Kt.genMipmaps=!0,Hn=!0;break;case"boolean":Hn=Kt.genMipmaps=eA.mipmap;break;case"object":Rt(Array.isArray(eA.mipmap),"invalid mipmap type"),Kt.genMipmaps=!1,Hn=!0;break;default:Rt.raise("invalid mipmap type")}Hn&&!("min"in eA)&&(Kt.minFilter=_I)}}function qC(Kt,eA){Ve.texParameteri(eA,hA,Kt.minFilter),Ve.texParameteri(eA,nA,Kt.magFilter),Ve.texParameteri(eA,by,Kt.wrapS),Ve.texParameteri(eA,gB,Kt.wrapT),kt.ext_texture_filter_anisotropic&&Ve.texParameteri(eA,SC,Kt.anisotropic),Kt.genMipmaps&&(Ve.hint(jI,Kt.mipmapHint),Ve.generateMipmap(eA))}var YC=0,XC={},iE=Hr.maxTextureUnits,LC=Array(iE).map(function(){return null});function XI(Kt){mA.call(this),this.mipmask=0,this.internalformat=yE,this.id=YC++,this.refCount=1,this.target=Kt,this.texture=Ve.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new wC,aA.profile&&(this.stats={size:0})}function nE(Kt){Ve.activeTexture($C),Ve.bindTexture(Kt.target,Kt.texture)}function CC(){var Kt=LC[0];Kt?Ve.bindTexture(Kt.target,Kt.texture):Ve.bindTexture(ZC,null)}function TI(Kt){var eA=Kt.texture;Rt(eA,"must not double destroy texture");var ha=Kt.unit,dI=Kt.target;ha>=0&&(Ve.activeTexture($C+ha),Ve.bindTexture(dI,null),LC[ha]=null),Ve.deleteTexture(eA),Kt.texture=null,Kt.params=null,Kt.pixels=null,Kt.refCount=0,delete XC[Kt.id],pa.textureCount--}_(XI.prototype,{bind:function(){var Kt=this;Kt.bindCount+=1;var eA=Kt.unit;if(eA<0){for(var ha=0;ha<iE;++ha){var dI=LC[ha];if(dI){if(dI.bindCount>0)continue;dI.unit=-1}LC[ha]=Kt,eA=ha;break}eA>=iE&&Rt.raise("insufficient number of texture units"),aA.profile&&pa.maxTextureUnits<eA+1&&(pa.maxTextureUnits=eA+1),Kt.unit=eA,Ve.activeTexture($C+eA),Ve.bindTexture(Kt.target,Kt.texture)}return eA},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&TI(this)}});function nC(Kt,eA){var ha=new XI(ZC);XC[ha.id]=ha,pa.textureCount++;function dI(Ft,zr){var ra=ha.texInfo;wC.call(ra);var sa=oC();return typeof Ft=="number"?typeof zr=="number"?qI(sa,Ft|0,zr|0):qI(sa,Ft|0,Ft|0):Ft?(Rt.type(Ft,"object","invalid arguments to regl.texture"),PC(ra,Ft),iC(sa,Ft)):qI(sa,1,1),ra.genMipmaps&&(sa.mipmask=(sa.width<<1)-1),ha.mipmask=sa.mipmask,IA(ha,sa),Rt.texture2D(ra,sa,Hr),ha.internalformat=sa.internalformat,dI.width=sa.width,dI.height=sa.height,nE(ha),DC(sa,ZC),qC(ra,ZC),CC(),HC(sa),aA.profile&&(ha.stats.size=LB(ha.internalformat,ha.type,sa.width,sa.height,ra.genMipmaps,!1)),dI.format=OA[ha.internalformat],dI.type=uI[ha.type],dI.mag=xA[ra.magFilter],dI.min=AI[ra.minFilter],dI.wrapS=oI[ra.wrapS],dI.wrapT=oI[ra.wrapT],dI}function rC(Ft,zr,ra,sa){Rt(!!Ft,"must specify image data");var Hn=zr|0,kn=ra|0,Wn=sa|0,Gt=sI();return IA(Gt,ha),Gt.width=0,Gt.height=0,eI(Gt,Ft),Gt.width=Gt.width||(ha.width>>Wn)-Hn,Gt.height=Gt.height||(ha.height>>Wn)-kn,Rt(ha.type===Gt.type&&ha.format===Gt.format&&ha.internalformat===Gt.internalformat,"incompatible format for texture.subimage"),Rt(Hn>=0&&kn>=0&&Hn+Gt.width<=ha.width&&kn+Gt.height<=ha.height,"texture.subimage write out of bounds"),Rt(ha.mipmask&1<<Wn,"missing mipmap data"),Rt(Gt.data||Gt.element||Gt.needsCopy,"missing image data"),nE(ha),HI(Gt,ZC,Hn,kn,Wn),CC(),cI(Gt),dI}function Pt(Ft,zr){var ra=Ft|0,sa=zr|0||ra;if(ra===ha.width&&sa===ha.height)return dI;dI.width=ha.width=ra,dI.height=ha.height=sa,nE(ha);for(var Hn=0;ha.mipmask>>Hn;++Hn){var kn=ra>>Hn,Wn=sa>>Hn;if(!kn||!Wn)break;Ve.texImage2D(ZC,Hn,ha.format,kn,Wn,0,ha.format,ha.type,null)}return CC(),aA.profile&&(ha.stats.size=LB(ha.internalformat,ha.type,ra,sa,!1,!1)),dI}return dI(Kt,eA),dI.subimage=rC,dI.resize=Pt,dI._reglType="texture2d",dI._texture=ha,aA.profile&&(dI.stats=ha.stats),dI.destroy=function(){ha.decRef()},dI}function cC(Kt,eA,ha,dI,rC,Pt){var Ft=new XI(pC);XC[Ft.id]=Ft,pa.cubeCount++;var zr=new Array(6);function ra(kn,Wn,Gt,jt,Vt,ga){var ca,pA=Ft.texInfo;for(wC.call(pA),ca=0;ca<6;++ca)zr[ca]=oC();if(typeof kn=="number"||!kn){var BA=kn|0||1;for(ca=0;ca<6;++ca)qI(zr[ca],BA,BA)}else if(typeof kn=="object")if(Wn)iC(zr[0],kn),iC(zr[1],Wn),iC(zr[2],Gt),iC(zr[3],jt),iC(zr[4],Vt),iC(zr[5],ga);else if(PC(pA,kn),II(Ft,kn),"faces"in kn){var JA=kn.faces;for(Rt(Array.isArray(JA)&&JA.length===6,"cube faces must be a length 6 array"),ca=0;ca<6;++ca)Rt(typeof JA[ca]=="object"&&!!JA[ca],"invalid input for cube map face"),IA(zr[ca],Ft),iC(zr[ca],JA[ca])}else for(ca=0;ca<6;++ca)iC(zr[ca],kn);else Rt.raise("invalid arguments to cube map");for(IA(Ft,zr[0]),Rt.optional(function(){Hr.npotTextureCube||Rt(BE(Ft.width)&&BE(Ft.height),"your browser does not support non power or two texture dimensions")}),pA.genMipmaps?Ft.mipmask=(zr[0].width<<1)-1:Ft.mipmask=zr[0].mipmask,Rt.textureCube(Ft,pA,zr,Hr),Ft.internalformat=zr[0].internalformat,ra.width=zr[0].width,ra.height=zr[0].height,nE(Ft),ca=0;ca<6;++ca)DC(zr[ca],bC+ca);for(qC(pA,pC),CC(),aA.profile&&(Ft.stats.size=LB(Ft.internalformat,Ft.type,ra.width,ra.height,pA.genMipmaps,!0)),ra.format=OA[Ft.internalformat],ra.type=uI[Ft.type],ra.mag=xA[pA.magFilter],ra.min=AI[pA.minFilter],ra.wrapS=oI[pA.wrapS],ra.wrapT=oI[pA.wrapT],ca=0;ca<6;++ca)HC(zr[ca]);return ra}function sa(kn,Wn,Gt,jt,Vt){Rt(!!Wn,"must specify image data"),Rt(typeof kn=="number"&&kn===(kn|0)&&kn>=0&&kn<6,"invalid face");var ga=Gt|0,ca=jt|0,pA=Vt|0,BA=sI();return IA(BA,Ft),BA.width=0,BA.height=0,eI(BA,Wn),BA.width=BA.width||(Ft.width>>pA)-ga,BA.height=BA.height||(Ft.height>>pA)-ca,Rt(Ft.type===BA.type&&Ft.format===BA.format&&Ft.internalformat===BA.internalformat,"incompatible format for texture.subimage"),Rt(ga>=0&&ca>=0&&ga+BA.width<=Ft.width&&ca+BA.height<=Ft.height,"texture.subimage write out of bounds"),Rt(Ft.mipmask&1<<pA,"missing mipmap data"),Rt(BA.data||BA.element||BA.needsCopy,"missing image data"),nE(Ft),HI(BA,bC+kn,ga,ca,pA),CC(),cI(BA),ra}function Hn(kn){var Wn=kn|0;if(Wn!==Ft.width){ra.width=Ft.width=Wn,ra.height=Ft.height=Wn,nE(Ft);for(var Gt=0;Gt<6;++Gt)for(var jt=0;Ft.mipmask>>jt;++jt)Ve.texImage2D(bC+Gt,jt,Ft.format,Wn>>jt,Wn>>jt,0,Ft.format,Ft.type,null);return CC(),aA.profile&&(Ft.stats.size=LB(Ft.internalformat,Ft.type,ra.width,ra.height,!1,!0)),ra}}return ra(Kt,eA,ha,dI,rC,Pt),ra.subimage=sa,ra.resize=Hn,ra._reglType="textureCube",ra._texture=Ft,aA.profile&&(ra.stats=Ft.stats),ra.destroy=function(){Ft.decRef()},ra}function FC(){for(var Kt=0;Kt<iE;++Kt)Ve.activeTexture($C+Kt),Ve.bindTexture(ZC,null),LC[Kt]=null;va(XC).forEach(TI),pa.cubeCount=0,pa.textureCount=0}aA.profile&&(pa.getTotalTextureSize=function(){var Kt=0;return Object.keys(XC).forEach(function(eA){Kt+=XC[eA].stats.size}),Kt});function qE(){for(var Kt=0;Kt<iE;++Kt){var eA=LC[Kt];eA&&(eA.bindCount=0,eA.unit=-1,LC[Kt]=null)}va(XC).forEach(function(ha){ha.texture=Ve.createTexture(),Ve.bindTexture(ha.target,ha.texture);for(var dI=0;dI<32;++dI)if(ha.mipmask&1<<dI)if(ha.target===ZC)Ve.texImage2D(ZC,dI,ha.internalformat,ha.width>>dI,ha.height>>dI,0,ha.internalformat,ha.type,null);else for(var rC=0;rC<6;++rC)Ve.texImage2D(bC+rC,dI,ha.internalformat,ha.width>>dI,ha.height>>dI,0,ha.internalformat,ha.type,null);qC(ha.texInfo,ha.target)})}function wm(){for(var Kt=0;Kt<iE;++Kt){var eA=LC[Kt];eA&&(eA.bindCount=0,eA.unit=-1,LC[Kt]=null),Ve.activeTexture($C+Kt),Ve.bindTexture(ZC,null),Ve.bindTexture(pC,null)}}return{create2D:nC,createCube:cC,clear:FC,getTexture:function(Kt){return null},restore:qE,refresh:wm}}var am=36161,FB=32854,C0=32855,E0=36194,m0=33189,B0=36168,v0=34041,Q0=35907,_0=34836,S0=34842,w0=34843,ME=[];ME[FB]=2,ME[C0]=2,ME[E0]=2,ME[m0]=2,ME[B0]=1,ME[v0]=4,ME[Q0]=4,ME[_0]=16,ME[S0]=8,ME[w0]=6;function b0(Ve,kt,Hr){return ME[Ve]*kt*Hr}var OQ=function(Ve,kt,Hr,ya,CA){var pa={rgba4:FB,rgb565:E0,"rgb5 a1":C0,depth:m0,stencil:B0,"depth stencil":v0};kt.ext_srgb&&(pa.srgba=Q0),kt.ext_color_buffer_half_float&&(pa.rgba16f=S0,pa.rgb16f=w0),kt.webgl_color_buffer_float&&(pa.rgba32f=_0);var aA=[];Object.keys(pa).forEach(function(FA){var GA=pa[FA];aA[GA]=FA});var LA=0,NA={};function $A(FA){this.id=LA++,this.refCount=1,this.renderbuffer=FA,this.format=FB,this.width=0,this.height=0,CA.profile&&(this.stats={size:0})}$A.prototype.decRef=function(){--this.refCount<=0&&qA(this)};function qA(FA){var GA=FA.renderbuffer;Rt(GA,"must not double destroy renderbuffer"),Ve.bindRenderbuffer(am,null),Ve.deleteRenderbuffer(GA),FA.renderbuffer=null,FA.refCount=0,delete NA[FA.id],ya.renderbufferCount--}function HA(FA,GA){var ia=new $A(Ve.createRenderbuffer());NA[ia.id]=ia,ya.renderbufferCount++;function oA(uI,xA){var AI=0,oI=0,bI=FB;if(typeof uI=="object"&&uI){var mA=uI;if("shape"in mA){var IA=mA.shape;Rt(Array.isArray(IA)&&IA.length>=2,"invalid renderbuffer shape"),AI=IA[0]|0,oI=IA[1]|0}else"radius"in mA&&(AI=oI=mA.radius|0),"width"in mA&&(AI=mA.width|0),"height"in mA&&(oI=mA.height|0);"format"in mA&&(Rt.parameter(mA.format,pa,"invalid renderbuffer format"),bI=pa[mA.format])}else typeof uI=="number"?(AI=uI|0,typeof xA=="number"?oI=xA|0:oI=AI):uI?Rt.raise("invalid arguments to renderbuffer constructor"):AI=oI=1;if(Rt(AI>0&&oI>0&&AI<=Hr.maxRenderbufferSize&&oI<=Hr.maxRenderbufferSize,"invalid renderbuffer size"),!(AI===ia.width&&oI===ia.height&&bI===ia.format))return oA.width=ia.width=AI,oA.height=ia.height=oI,ia.format=bI,Ve.bindRenderbuffer(am,ia.renderbuffer),Ve.renderbufferStorage(am,bI,AI,oI),Rt(Ve.getError()===0,"invalid render buffer format"),CA.profile&&(ia.stats.size=b0(ia.format,ia.width,ia.height)),oA.format=aA[ia.format],oA}function OA(uI,xA){var AI=uI|0,oI=xA|0||AI;return AI===ia.width&&oI===ia.height||(Rt(AI>0&&oI>0&&AI<=Hr.maxRenderbufferSize&&oI<=Hr.maxRenderbufferSize,"invalid renderbuffer size"),oA.width=ia.width=AI,oA.height=ia.height=oI,Ve.bindRenderbuffer(am,ia.renderbuffer),Ve.renderbufferStorage(am,ia.format,AI,oI),Rt(Ve.getError()===0,"invalid render buffer format"),CA.profile&&(ia.stats.size=b0(ia.format,ia.width,ia.height))),oA}return oA(FA,GA),oA.resize=OA,oA._reglType="renderbuffer",oA._renderbuffer=ia,CA.profile&&(oA.stats=ia.stats),oA.destroy=function(){ia.decRef()},oA}CA.profile&&(ya.getTotalRenderbufferSize=function(){var FA=0;return Object.keys(NA).forEach(function(GA){FA+=NA[GA].stats.size}),FA});function zA(){va(NA).forEach(function(FA){FA.renderbuffer=Ve.createRenderbuffer(),Ve.bindRenderbuffer(am,FA.renderbuffer),Ve.renderbufferStorage(am,FA.format,FA.width,FA.height)}),Ve.bindRenderbuffer(am,null)}return{create:HA,clear:function(){va(NA).forEach(qA)},restore:zA}},jE=36160,Ry=36161,Bm=3553,MB=34069,D0=36064,R0=36096,T0=36128,N0=33306,L0=36053,GQ=36054,UQ=36055,$Q=36057,HQ=36061,qQ=36193,YQ=5121,VQ=5126,F0=6407,M0=6408,JQ=6402,KQ=[F0,M0],Ty=[];Ty[M0]=4,Ty[F0]=3;var kB=[];kB[YQ]=1,kB[VQ]=4,kB[qQ]=2;var zQ=32854,jQ=32855,WQ=36194,XQ=33189,ZQ=36168,k0=34041,e_=35907,t_=34836,r_=34842,i_=34843,n_=[zQ,jQ,WQ,e_,r_,i_,t_],Jm={};Jm[L0]="complete",Jm[GQ]="incomplete attachment",Jm[$Q]="incomplete dimensions",Jm[UQ]="incomplete, missing attachment",Jm[HQ]="unsupported";function o_(Ve,kt,Hr,ya,CA,pa){var aA={cur:null,next:null,dirty:!1,setFBO:null},LA=["rgba"],NA=["rgba4","rgb565","rgb5 a1"];kt.ext_srgb&&NA.push("srgba"),kt.ext_color_buffer_half_float&&NA.push("rgba16f","rgb16f"),kt.webgl_color_buffer_float&&NA.push("rgba32f");var $A=["uint8"];kt.oes_texture_half_float&&$A.push("half float","float16"),kt.oes_texture_float&&$A.push("float","float32");function qA(kA,eI,nI){this.target=kA,this.texture=eI,this.renderbuffer=nI;var HI=0,UI=0;eI?(HI=eI.width,UI=eI.height):nI&&(HI=nI.width,UI=nI.height),this.width=HI,this.height=UI}function HA(kA){kA&&(kA.texture&&kA.texture._texture.decRef(),kA.renderbuffer&&kA.renderbuffer._renderbuffer.decRef())}function zA(kA,eI,nI){if(kA)if(kA.texture){var HI=kA.texture._texture,UI=Math.max(1,HI.width),sI=Math.max(1,HI.height);Rt(UI===eI&&sI===nI,"inconsistent width/height for supplied texture"),HI.refCount+=1}else{var cI=kA.renderbuffer._renderbuffer;Rt(cI.width===eI&&cI.height===nI,"inconsistent width/height for renderbuffer"),cI.refCount+=1}}function FA(kA,eI){eI&&(eI.texture?Ve.framebufferTexture2D(jE,kA,eI.target,eI.texture._texture.texture,0):Ve.framebufferRenderbuffer(jE,kA,Ry,eI.renderbuffer._renderbuffer.renderbuffer))}function GA(kA){var eI=Bm,nI=null,HI=null,UI=kA;typeof kA=="object"&&(UI=kA.data,"target"in kA&&(eI=kA.target|0)),Rt.type(UI,"function","invalid attachment data");var sI=UI._reglType;return sI==="texture2d"?(nI=UI,Rt(eI===Bm)):sI==="textureCube"?(nI=UI,Rt(eI>=MB&&eI<MB+6,"invalid cube map target")):sI==="renderbuffer"?(HI=UI,eI=Ry):Rt.raise("invalid regl object for attachment"),new qA(eI,nI,HI)}function ia(kA,eI,nI,HI,UI){if(nI){var sI=ya.create2D({width:kA,height:eI,format:HI,type:UI});return sI._texture.refCount=0,new qA(Bm,sI,null)}else{var cI=CA.create({width:kA,height:eI,format:HI});return cI._renderbuffer.refCount=0,new qA(Ry,null,cI)}}function oA(kA){return kA&&(kA.texture||kA.renderbuffer)}function OA(kA,eI,nI){kA&&(kA.texture?kA.texture.resize(eI,nI):kA.renderbuffer&&kA.renderbuffer.resize(eI,nI),kA.width=eI,kA.height=nI)}var uI=0,xA={};function AI(){this.id=uI++,xA[this.id]=this,this.framebuffer=Ve.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function oI(kA){kA.colorAttachments.forEach(HA),HA(kA.depthAttachment),HA(kA.stencilAttachment),HA(kA.depthStencilAttachment)}function bI(kA){var eI=kA.framebuffer;Rt(eI,"must not double destroy framebuffer"),Ve.deleteFramebuffer(eI),kA.framebuffer=null,pa.framebufferCount--,delete xA[kA.id]}function mA(kA){var eI;Ve.bindFramebuffer(jE,kA.framebuffer);var nI=kA.colorAttachments;for(eI=0;eI<nI.length;++eI)FA(D0+eI,nI[eI]);for(eI=nI.length;eI<Hr.maxColorAttachments;++eI)Ve.framebufferTexture2D(jE,D0+eI,Bm,null,0);Ve.framebufferTexture2D(jE,N0,Bm,null,0),Ve.framebufferTexture2D(jE,R0,Bm,null,0),Ve.framebufferTexture2D(jE,T0,Bm,null,0),FA(R0,kA.depthAttachment),FA(T0,kA.stencilAttachment),FA(N0,kA.depthStencilAttachment);var HI=Ve.checkFramebufferStatus(jE);!Ve.isContextLost()&&HI!==L0&&Rt.raise("framebuffer configuration not supported, status = "+Jm[HI]),Ve.bindFramebuffer(jE,aA.next?aA.next.framebuffer:null),aA.cur=aA.next,Ve.getError()}function IA(kA,eI){var nI=new AI;pa.framebufferCount++;function HI(sI,cI){var MI;Rt(aA.next!==nI,"can not update framebuffer which is currently in use");var qI=0,iC=0,DC=!0,TC=!0,oC=null,HC=!0,wC="rgba",PC="uint8",qC=1,YC=null,XC=null,iE=null,LC=!1;if(typeof sI=="number")qI=sI|0,iC=cI|0||qI;else if(!sI)qI=iC=1;else{Rt.type(sI,"object","invalid arguments for framebuffer");var XI=sI;if("shape"in XI){var nE=XI.shape;Rt(Array.isArray(nE)&&nE.length>=2,"invalid shape for framebuffer"),qI=nE[0],iC=nE[1]}else"radius"in XI&&(qI=iC=XI.radius),"width"in XI&&(qI=XI.width),"height"in XI&&(iC=XI.height);("color"in XI||"colors"in XI)&&(oC=XI.color||XI.colors,Array.isArray(oC)&&Rt(oC.length===1||kt.webgl_draw_buffers,"multiple render targets not supported")),oC||("colorCount"in XI&&(qC=XI.colorCount|0,Rt(qC>0,"invalid color buffer count")),"colorTexture"in XI&&(HC=!!XI.colorTexture,wC="rgba4"),"colorType"in XI&&(PC=XI.colorType,HC?(Rt(kt.oes_texture_float||!(PC==="float"||PC==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Rt(kt.oes_texture_half_float||!(PC==="half float"||PC==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):PC==="half float"||PC==="float16"?(Rt(kt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),wC="rgba16f"):(PC==="float"||PC==="float32")&&(Rt(kt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),wC="rgba32f"),Rt.oneOf(PC,$A,"invalid color type")),"colorFormat"in XI&&(wC=XI.colorFormat,LA.indexOf(wC)>=0?HC=!0:NA.indexOf(wC)>=0?HC=!1:Rt.optional(function(){HC?Rt.oneOf(XI.colorFormat,LA,"invalid color format for texture"):Rt.oneOf(XI.colorFormat,NA,"invalid color format for renderbuffer")}))),("depthTexture"in XI||"depthStencilTexture"in XI)&&(LC=!!(XI.depthTexture||XI.depthStencilTexture),Rt(!LC||kt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in XI&&(typeof XI.depth=="boolean"?DC=XI.depth:(YC=XI.depth,TC=!1)),"stencil"in XI&&(typeof XI.stencil=="boolean"?TC=XI.stencil:(XC=XI.stencil,DC=!1)),"depthStencil"in XI&&(typeof XI.depthStencil=="boolean"?DC=TC=XI.depthStencil:(iE=XI.depthStencil,DC=!1,TC=!1))}var CC=null,TI=null,nC=null,cC=null;if(Array.isArray(oC))CC=oC.map(GA);else if(oC)CC=[GA(oC)];else for(CC=new Array(qC),MI=0;MI<qC;++MI)CC[MI]=ia(qI,iC,HC,wC,PC);Rt(kt.webgl_draw_buffers||CC.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Rt(CC.length<=Hr.maxColorAttachments,"too many color attachments, not supported"),qI=qI||CC[0].width,iC=iC||CC[0].height,YC?TI=GA(YC):DC&&!TC&&(TI=ia(qI,iC,LC,"depth","uint32")),XC?nC=GA(XC):TC&&!DC&&(nC=ia(qI,iC,!1,"stencil","uint8")),iE?cC=GA(iE):!YC&&!XC&&TC&&DC&&(cC=ia(qI,iC,LC,"depth stencil","depth stencil")),Rt(!!YC+!!XC+!!iE<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var FC=null;for(MI=0;MI<CC.length;++MI)if(zA(CC[MI],qI,iC),Rt(!CC[MI]||CC[MI].texture&&KQ.indexOf(CC[MI].texture._texture.format)>=0||CC[MI].renderbuffer&&n_.indexOf(CC[MI].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+MI+" is invalid"),CC[MI]&&CC[MI].texture){var qE=Ty[CC[MI].texture._texture.format]*kB[CC[MI].texture._texture.type];FC===null?FC=qE:Rt(FC===qE,"all color attachments much have the same number of bits per pixel.")}return zA(TI,qI,iC),Rt(!TI||TI.texture&&TI.texture._texture.format===JQ||TI.renderbuffer&&TI.renderbuffer._renderbuffer.format===XQ,"invalid depth attachment for framebuffer object"),zA(nC,qI,iC),Rt(!nC||nC.renderbuffer&&nC.renderbuffer._renderbuffer.format===ZQ,"invalid stencil attachment for framebuffer object"),zA(cC,qI,iC),Rt(!cC||cC.texture&&cC.texture._texture.format===k0||cC.renderbuffer&&cC.renderbuffer._renderbuffer.format===k0,"invalid depth-stencil attachment for framebuffer object"),oI(nI),nI.width=qI,nI.height=iC,nI.colorAttachments=CC,nI.depthAttachment=TI,nI.stencilAttachment=nC,nI.depthStencilAttachment=cC,HI.color=CC.map(oA),HI.depth=oA(TI),HI.stencil=oA(nC),HI.depthStencil=oA(cC),HI.width=nI.width,HI.height=nI.height,mA(nI),HI}function UI(sI,cI){Rt(aA.next!==nI,"can not resize a framebuffer which is currently in use");var MI=Math.max(sI|0,1),qI=Math.max(cI|0||MI,1);if(MI===nI.width&&qI===nI.height)return HI;for(var iC=nI.colorAttachments,DC=0;DC<iC.length;++DC)OA(iC[DC],MI,qI);return OA(nI.depthAttachment,MI,qI),OA(nI.stencilAttachment,MI,qI),OA(nI.depthStencilAttachment,MI,qI),nI.width=HI.width=MI,nI.height=HI.height=qI,mA(nI),HI}return HI(kA,eI),_(HI,{resize:UI,_reglType:"framebuffer",_framebuffer:nI,destroy:function(){bI(nI),oI(nI)},use:function(sI){aA.setFBO({framebuffer:HI},sI)}})}function II(kA){var eI=Array(6);function nI(UI){var sI;Rt(eI.indexOf(aA.next)<0,"can not update framebuffer which is currently in use");var cI={color:null},MI=0,qI=null,iC="rgba",DC="uint8",TC=1;if(typeof UI=="number")MI=UI|0;else if(!UI)MI=1;else{Rt.type(UI,"object","invalid arguments for framebuffer");var oC=UI;if("shape"in oC){var HC=oC.shape;Rt(Array.isArray(HC)&&HC.length>=2,"invalid shape for framebuffer"),Rt(HC[0]===HC[1],"cube framebuffer must be square"),MI=HC[0]}else"radius"in oC&&(MI=oC.radius|0),"width"in oC?(MI=oC.width|0,"height"in oC&&Rt(oC.height===MI,"must be square")):"height"in oC&&(MI=oC.height|0);("color"in oC||"colors"in oC)&&(qI=oC.color||oC.colors,Array.isArray(qI)&&Rt(qI.length===1||kt.webgl_draw_buffers,"multiple render targets not supported")),qI||("colorCount"in oC&&(TC=oC.colorCount|0,Rt(TC>0,"invalid color buffer count")),"colorType"in oC&&(Rt.oneOf(oC.colorType,$A,"invalid color type"),DC=oC.colorType),"colorFormat"in oC&&(iC=oC.colorFormat,Rt.oneOf(oC.colorFormat,LA,"invalid color format for texture"))),"depth"in oC&&(cI.depth=oC.depth),"stencil"in oC&&(cI.stencil=oC.stencil),"depthStencil"in oC&&(cI.depthStencil=oC.depthStencil)}var wC;if(qI)if(Array.isArray(qI))for(wC=[],sI=0;sI<qI.length;++sI)wC[sI]=qI[sI];else wC=[qI];else{wC=Array(TC);var PC={radius:MI,format:iC,type:DC};for(sI=0;sI<TC;++sI)wC[sI]=ya.createCube(PC)}for(cI.color=Array(wC.length),sI=0;sI<wC.length;++sI){var qC=wC[sI];Rt(typeof qC=="function"&&qC._reglType==="textureCube","invalid cube map"),MI=MI||qC.width,Rt(qC.width===MI&&qC.height===MI,"invalid cube map shape"),cI.color[sI]={target:MB,data:wC[sI]}}for(sI=0;sI<6;++sI){for(var YC=0;YC<wC.length;++YC)cI.color[YC].target=MB+sI;sI>0&&(cI.depth=eI[0].depth,cI.stencil=eI[0].stencil,cI.depthStencil=eI[0].depthStencil),eI[sI]?eI[sI](cI):eI[sI]=IA(cI)}return _(nI,{width:MI,height:MI,color:wC})}function HI(UI){var sI,cI=UI|0;if(Rt(cI>0&&cI<=Hr.maxCubeMapSize,"invalid radius for cube fbo"),cI===nI.width)return nI;var MI=nI.color;for(sI=0;sI<MI.length;++sI)MI[sI].resize(cI);for(sI=0;sI<6;++sI)eI[sI].resize(cI);return nI.width=nI.height=cI,nI}return nI(kA),_(nI,{faces:eI,resize:HI,_reglType:"framebufferCube",destroy:function(){eI.forEach(function(UI){UI.destroy()})}})}function ZA(){aA.cur=null,aA.next=null,aA.dirty=!0,va(xA).forEach(function(kA){kA.framebuffer=Ve.createFramebuffer(),mA(kA)})}return _(aA,{getFramebuffer:function(kA){if(typeof kA=="function"&&kA._reglType==="framebuffer"){var eI=kA._framebuffer;if(eI instanceof AI)return eI}return null},create:IA,createCube:II,clear:function(){va(xA).forEach(bI)},restore:ZA})}var s_=5126,P0=34962,PB=34963,O0=["attributes","elements","offset","count","primitive","instances"];function Ny(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=s_,this.offset=0,this.stride=0,this.divisor=0}function a_(Ve,kt,Hr,ya,CA,pa,aA){for(var LA=Hr.maxAttributes,NA=new Array(LA),$A=0;$A<LA;++$A)NA[$A]=new Ny;var qA=0,HA={},zA={Record:Ny,scope:{},state:NA,currentVAO:null,targetVAO:null,restore:GA()?oI:function(){},createVAO:bI,getVAO:oA,destroyBuffer:FA,setVAO:GA()?OA:uI,clear:GA()?xA:function(){}};function FA(mA){for(var IA=0;IA<NA.length;++IA){var II=NA[IA];II.buffer===mA&&(Ve.disableVertexAttribArray(IA),II.buffer=null)}}function GA(){return kt.oes_vertex_array_object}function ia(){return kt.angle_instanced_arrays}function oA(mA){return typeof mA=="function"&&mA._vao?mA._vao:null}function OA(mA){if(mA!==zA.currentVAO){var IA=GA();mA?IA.bindVertexArrayOES(mA.vao):IA.bindVertexArrayOES(null),zA.currentVAO=mA}}function uI(mA){if(mA!==zA.currentVAO){if(mA)mA.bindAttrs();else{for(var IA=ia(),II=0;II<NA.length;++II){var ZA=NA[II];ZA.buffer?(Ve.enableVertexAttribArray(II),ZA.buffer.bind(),Ve.vertexAttribPointer(II,ZA.size,ZA.type,ZA.normalized,ZA.stride,ZA.offfset),IA&&ZA.divisor&&IA.vertexAttribDivisorANGLE(II,ZA.divisor)):(Ve.disableVertexAttribArray(II),Ve.vertexAttrib4f(II,ZA.x,ZA.y,ZA.z,ZA.w))}aA.elements?Ve.bindBuffer(PB,aA.elements.buffer.buffer):Ve.bindBuffer(PB,null)}zA.currentVAO=mA}}function xA(){va(HA).forEach(function(mA){mA.destroy()})}function AI(){this.id=++qA,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var mA=GA();mA?this.vao=mA.createVertexArrayOES():this.vao=null,HA[this.id]=this,this.buffers=[]}AI.prototype.bindAttrs=function(){for(var mA=ia(),IA=this.attributes,II=0;II<IA.length;++II){var ZA=IA[II];ZA.buffer?(Ve.enableVertexAttribArray(II),Ve.bindBuffer(P0,ZA.buffer.buffer),Ve.vertexAttribPointer(II,ZA.size,ZA.type,ZA.normalized,ZA.stride,ZA.offset),mA&&ZA.divisor&&mA.vertexAttribDivisorANGLE(II,ZA.divisor)):(Ve.disableVertexAttribArray(II),Ve.vertexAttrib4f(II,ZA.x,ZA.y,ZA.z,ZA.w))}for(var kA=IA.length;kA<LA;++kA)Ve.disableVertexAttribArray(kA);var eI=pa.getElements(this.elements);eI?Ve.bindBuffer(PB,eI.buffer.buffer):Ve.bindBuffer(PB,null)},AI.prototype.refresh=function(){var mA=GA();mA&&(mA.bindVertexArrayOES(this.vao),this.bindAttrs(),zA.currentVAO=null,mA.bindVertexArrayOES(null))},AI.prototype.destroy=function(){if(this.vao){var mA=GA();this===zA.currentVAO&&(zA.currentVAO=null,mA.bindVertexArrayOES(null)),mA.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),HA[this.id]&&(delete HA[this.id],ya.vaoCount-=1)};function oI(){var mA=GA();mA&&va(HA).forEach(function(IA){IA.refresh()})}function bI(mA){var IA=new AI;ya.vaoCount+=1;function II(ZA){var kA;if(Array.isArray(ZA))kA=ZA,IA.elements&&IA.ownsElements&&IA.elements.destroy(),IA.elements=null,IA.ownsElements=!1,IA.offset=0,IA.count=0,IA.instances=-1,IA.primitive=4;else{if(Rt(typeof ZA=="object","invalid arguments for create vao"),Rt("attributes"in ZA,"must specify attributes for vao"),ZA.elements){var eI=ZA.elements;IA.ownsElements?typeof eI=="function"&&eI._reglType==="elements"?(IA.elements.destroy(),IA.ownsElements=!1):(IA.elements(eI),IA.ownsElements=!1):pa.getElements(ZA.elements)?(IA.elements=ZA.elements,IA.ownsElements=!1):(IA.elements=pa.create(ZA.elements),IA.ownsElements=!0)}else IA.elements=null,IA.ownsElements=!1;kA=ZA.attributes,IA.offset=0,IA.count=-1,IA.instances=-1,IA.primitive=4,IA.elements&&(IA.count=IA.elements._elements.vertCount,IA.primitive=IA.elements._elements.primType),"offset"in ZA&&(IA.offset=ZA.offset|0),"count"in ZA&&(IA.count=ZA.count|0),"instances"in ZA&&(IA.instances=ZA.instances|0),"primitive"in ZA&&(Rt(ZA.primitive in Le,"bad primitive type: "+ZA.primitive),IA.primitive=Le[ZA.primitive]),Rt.optional(()=>{for(var DC=Object.keys(ZA),TC=0;TC<DC.length;++TC)Rt(O0.indexOf(DC[TC])>=0,'invalid option for vao: "'+DC[TC]+'" valid options are '+O0)}),Rt(Array.isArray(kA),"attributes must be an array")}Rt(kA.length<LA,"too many attributes"),Rt(kA.length>0,"must specify at least one attribute");var nI={},HI=IA.attributes;HI.length=kA.length;for(var UI=0;UI<kA.length;++UI){var sI=kA[UI],cI=HI[UI]=new Ny,MI=sI.data||sI;if(Array.isArray(MI)||d(MI)||Qn(MI)){var qI;IA.buffers[UI]&&(qI=IA.buffers[UI],d(MI)&&qI._buffer.byteLength>=MI.byteLength?qI.subdata(MI):(qI.destroy(),IA.buffers[UI]=null)),IA.buffers[UI]||(qI=IA.buffers[UI]=CA.create(sI,P0,!1,!0)),cI.buffer=CA.getBuffer(qI),cI.size=cI.buffer.dimension|0,cI.normalized=!1,cI.type=cI.buffer.dtype,cI.offset=0,cI.stride=0,cI.divisor=0,cI.state=1,nI[UI]=1}else CA.getBuffer(sI)?(cI.buffer=CA.getBuffer(sI),cI.size=cI.buffer.dimension|0,cI.normalized=!1,cI.type=cI.buffer.dtype,cI.offset=0,cI.stride=0,cI.divisor=0,cI.state=1):CA.getBuffer(sI.buffer)?(cI.buffer=CA.getBuffer(sI.buffer),cI.size=(+sI.size||cI.buffer.dimension)|0,cI.normalized=!!sI.normalized||!1,"type"in sI?(Rt.parameter(sI.type,JE,"invalid buffer type"),cI.type=JE[sI.type]):cI.type=cI.buffer.dtype,cI.offset=(sI.offset||0)|0,cI.stride=(sI.stride||0)|0,cI.divisor=(sI.divisor||0)|0,cI.state=1,Rt(cI.size>=1&&cI.size<=4,"size must be between 1 and 4"),Rt(cI.offset>=0,"invalid offset"),Rt(cI.stride>=0&&cI.stride<=255,"stride must be between 0 and 255"),Rt(cI.divisor>=0,"divisor must be positive"),Rt(!cI.divisor||!!kt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in sI?(Rt(UI>0,"first attribute must not be a constant"),cI.x=+sI.x||0,cI.y=+sI.y||0,cI.z=+sI.z||0,cI.w=+sI.w||0,cI.state=2):Rt(!1,"invalid attribute spec for location "+UI)}for(var iC=0;iC<IA.buffers.length;++iC)!nI[iC]&&IA.buffers[iC]&&(IA.buffers[iC].destroy(),IA.buffers[iC]=null);return IA.refresh(),II}return II.destroy=function(){for(var ZA=0;ZA<IA.buffers.length;++ZA)IA.buffers[ZA]&&IA.buffers[ZA].destroy();IA.buffers.length=0,IA.ownsElements&&(IA.elements.destroy(),IA.elements=null,IA.ownsElements=!1),IA.destroy()},II._vao=IA,II._reglType="vao",II(mA)}return zA}var G0=35632,A_=35633,l_=35718,c_=35721;function u_(Ve,kt,Hr,ya){var CA={},pa={};function aA(ia,oA,OA,uI){this.name=ia,this.id=oA,this.location=OA,this.info=uI}function LA(ia,oA){for(var OA=0;OA<ia.length;++OA)if(ia[OA].id===oA.id){ia[OA].location=oA.location;return}ia.push(oA)}function NA(ia,oA,OA){var uI=ia===G0?CA:pa,xA=uI[oA];if(!xA){var AI=kt.str(oA);xA=Ve.createShader(ia),Ve.shaderSource(xA,AI),Ve.compileShader(xA),Rt.shaderError(Ve,xA,AI,ia,OA),uI[oA]=xA}return xA}var $A={},qA=[],HA=0;function zA(ia,oA){this.id=HA++,this.fragId=ia,this.vertId=oA,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,ya.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function FA(ia,oA,OA){var uI,xA,AI=NA(G0,ia.fragId),oI=NA(A_,ia.vertId),bI=ia.program=Ve.createProgram();if(Ve.attachShader(bI,AI),Ve.attachShader(bI,oI),OA)for(uI=0;uI<OA.length;++uI){var mA=OA[uI];Ve.bindAttribLocation(bI,mA[0],mA[1])}Ve.linkProgram(bI),Rt.linkError(Ve,bI,kt.str(ia.fragId),kt.str(ia.vertId),oA);var IA=Ve.getProgramParameter(bI,l_);ya.profile&&(ia.stats.uniformsCount=IA);var II=ia.uniforms;for(uI=0;uI<IA;++uI)if(xA=Ve.getActiveUniform(bI,uI),xA){if(xA.size>1)for(var ZA=0;ZA<xA.size;++ZA){var kA=xA.name.replace("[0]","["+ZA+"]");LA(II,new aA(kA,kt.id(kA),Ve.getUniformLocation(bI,kA),xA))}var eI=xA.name;xA.size>1&&(eI=eI.replace("[0]","")),LA(II,new aA(eI,kt.id(eI),Ve.getUniformLocation(bI,eI),xA))}var nI=Ve.getProgramParameter(bI,c_);ya.profile&&(ia.stats.attributesCount=nI);var HI=ia.attributes;for(uI=0;uI<nI;++uI)xA=Ve.getActiveAttrib(bI,uI),xA&&LA(HI,new aA(xA.name,kt.id(xA.name),Ve.getAttribLocation(bI,xA.name),xA))}ya.profile&&(Hr.getMaxUniformsCount=function(){var ia=0;return qA.forEach(function(oA){oA.stats.uniformsCount>ia&&(ia=oA.stats.uniformsCount)}),ia},Hr.getMaxAttributesCount=function(){var ia=0;return qA.forEach(function(oA){oA.stats.attributesCount>ia&&(ia=oA.stats.attributesCount)}),ia});function GA(){CA={},pa={};for(var ia=0;ia<qA.length;++ia)FA(qA[ia],null,qA[ia].attributes.map(function(oA){return[oA.location,oA.name]}))}return{clear:function(){var ia=Ve.deleteShader.bind(Ve);va(CA).forEach(ia),CA={},va(pa).forEach(ia),pa={},qA.forEach(function(oA){Ve.deleteProgram(oA.program)}),qA.length=0,$A={},Hr.shaderCount=0},program:function(ia,oA,OA,uI){Rt.command(ia>=0,"missing vertex shader",OA),Rt.command(oA>=0,"missing fragment shader",OA);var xA=$A[oA];xA||(xA=$A[oA]={});var AI=xA[ia];if(AI&&(AI.refCount++,!uI))return AI;var oI=new zA(oA,ia);return Hr.shaderCount++,FA(oI,OA,uI),AI||(xA[ia]=oI),qA.push(oI),_(oI,{destroy:function(){if(oI.refCount--,oI.refCount<=0){Ve.deleteProgram(oI.program);var bI=qA.indexOf(oI);qA.splice(bI,1),Hr.shaderCount--}xA[oI.vertId].refCount<=0&&(Ve.deleteShader(pa[oI.vertId]),delete pa[oI.vertId],delete $A[oI.fragId][oI.vertId]),Object.keys($A[oI.fragId]).length||(Ve.deleteShader(CA[oI.fragId]),delete CA[oI.fragId],delete $A[oI.fragId])}})},restore:GA,shader:NA,frag:-1,vert:-1}}var g_=6408,hB=5121,h_=3333,OB=5126;function f_(Ve,kt,Hr,ya,CA,pa,aA){function LA(qA){var HA;kt.next===null?(Rt(CA.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),HA=hB):(Rt(kt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),HA=kt.next.colorAttachments[0].texture._texture.type,Rt.optional(function(){pa.oes_texture_float?(Rt(HA===hB||HA===OB,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),HA===OB&&Rt(aA.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Rt(HA===hB,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var zA=0,FA=0,GA=ya.framebufferWidth,ia=ya.framebufferHeight,oA=null;d(qA)?oA=qA:qA&&(Rt.type(qA,"object","invalid arguments to regl.read()"),zA=qA.x|0,FA=qA.y|0,Rt(zA>=0&&zA<ya.framebufferWidth,"invalid x offset for regl.read"),Rt(FA>=0&&FA<ya.framebufferHeight,"invalid y offset for regl.read"),GA=(qA.width||ya.framebufferWidth-zA)|0,ia=(qA.height||ya.framebufferHeight-FA)|0,oA=qA.data||null),oA&&(HA===hB?Rt(oA instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):HA===OB&&Rt(oA instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Rt(GA>0&&GA+zA<=ya.framebufferWidth,"invalid width for read pixels"),Rt(ia>0&&ia+FA<=ya.framebufferHeight,"invalid height for read pixels"),Hr();var OA=GA*ia*4;return oA||(HA===hB?oA=new Uint8Array(OA):HA===OB&&(oA=oA||new Float32Array(OA))),Rt.isTypedArray(oA,"data buffer for regl.read() must be a typedarray"),Rt(oA.byteLength>=OA,"data buffer for regl.read() too small"),Ve.pixelStorei(h_,4),Ve.readPixels(zA,FA,GA,ia,g_,HA,oA),oA}function NA(qA){var HA;return kt.setFBO({framebuffer:qA.framebuffer},function(){HA=LA(qA)}),HA}function $A(qA){return!qA||!("framebuffer"in qA)?LA(qA):NA(qA)}return $A}function Km(Ve){return Array.prototype.slice.call(Ve)}function zm(Ve){return Km(Ve).join("")}function d_(){var Ve=0,kt=[],Hr=[];function ya(HA){for(var zA=0;zA<Hr.length;++zA)if(Hr[zA]===HA)return kt[zA];var FA="g"+Ve++;return kt.push(FA),Hr.push(HA),FA}function CA(){var HA=[];function zA(){HA.push.apply(HA,Km(arguments))}var FA=[];function GA(){var ia="v"+Ve++;return FA.push(ia),arguments.length>0&&(HA.push(ia,"="),HA.push.apply(HA,Km(arguments)),HA.push(";")),ia}return _(zA,{def:GA,toString:function(){return zm([FA.length>0?"var "+FA.join(",")+";":"",zm(HA)])}})}function pa(){var HA=CA(),zA=CA(),FA=HA.toString,GA=zA.toString;function ia(oA,OA){zA(oA,OA,"=",HA.def(oA,OA),";")}return _(function(){HA.apply(HA,Km(arguments))},{def:HA.def,entry:HA,exit:zA,save:ia,set:function(oA,OA,uI){ia(oA,OA),HA(oA,OA,"=",uI,";")},toString:function(){return FA()+GA()}})}function aA(){var HA=zm(arguments),zA=pa(),FA=pa(),GA=zA.toString,ia=FA.toString;return _(zA,{then:function(){return zA.apply(zA,Km(arguments)),this},else:function(){return FA.apply(FA,Km(arguments)),this},toString:function(){var oA=ia();return oA&&(oA="else{"+oA+"}"),zm(["if(",HA,"){",GA(),"}",oA])}})}var LA=CA(),NA={};function $A(HA,zA){var FA=[];function GA(){var xA="a"+FA.length;return FA.push(xA),xA}zA=zA||0;for(var ia=0;ia<zA;++ia)GA();var oA=pa(),OA=oA.toString,uI=NA[HA]=_(oA,{arg:GA,toString:function(){return zm(["function(",FA.join(),"){",OA(),"}"])}});return uI}function qA(){var HA=['"use strict";',LA,"return {"];Object.keys(NA).forEach(function(GA){HA.push('"',GA,'":',NA[GA].toString(),",")}),HA.push("}");var zA=zm(HA).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),FA=Function.apply(null,kt.concat(zA));return FA.apply(null,Hr)}return{global:LA,link:ya,block:CA,proc:$A,scope:pa,cond:aA,compile:qA}}var jm="xyzw".split(""),U0=5121,Wm=1,Ly=2,Fy=0,My=1,ky=2,Py=3,GB=4,$0=5,H0=6,q0="dither",V0="blend.enable",J0="blend.color",Oy="blend.equation",Gy="blend.func",K0="depth.enable",z0="depth.func",j0="depth.range",W0="depth.mask",Uy="colorMask",eQ="cull.enable",tQ="cull.face",$y="frontFace",Hy="lineWidth",rQ="polygonOffset.enable",qy="polygonOffset.offset",iQ="sample.alpha",nQ="sample.enable",Yy="sample.coverage",oQ="stencil.enable",sQ="stencil.mask",Vy="stencil.func",Jy="stencil.opFront",fB="stencil.opBack",aQ="scissor.enable",UB="scissor.box",WE="viewport",dB="profile",ym="framebuffer",pB="vert",IB="frag",vm="elements",Qm="primitive",_m="count",$B="offset",HB="instances",CB="vao",Ky="Width",zy="Height",Xm=ym+Ky,Zm=ym+zy,p_=WE+Ky,I_=WE+zy,AQ="drawingBuffer",lQ=AQ+Ky,cQ=AQ+zy,C_=[Gy,Oy,Vy,Jy,fB,Yy,WE,UB,qy],eB=34962,jy=34963,E_=35632,m_=35633,uQ=3553,B_=34067,y_=2884,v_=3042,Q_=3024,__=2960,S_=2929,w_=3089,x_=32823,b_=32926,D_=32928,Wy=5126,qB=35664,YB=35665,VB=35666,Xy=5124,JB=35667,KB=35668,zB=35669,Zy=35670,jB=35671,WB=35672,XB=35673,EB=35674,mB=35675,BB=35676,yB=35678,vB=35680,e0=4,QB=1028,Sm=1029,gQ=2304,t0=2305,R_=32775,T_=32776,N_=519,Am=7680,hQ=0,fQ=1,dQ=32774,L_=513,pQ=36160,F_=36064,HE={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},IQ=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],tB={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},lm={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},CQ={frag:E_,vert:m_},r0={cw:gQ,ccw:t0};function ZB(Ve){return Array.isArray(Ve)||d(Ve)||Qn(Ve)}function EQ(Ve){return Ve.sort(function(kt,Hr){return kt===WE?-1:Hr===WE?1:kt<Hr?-1:1})}function KC(Ve,kt,Hr,ya){this.thisDep=Ve,this.contextDep=kt,this.propDep=Hr,this.append=ya}function cm(Ve){return Ve&&!(Ve.thisDep||Ve.contextDep||Ve.propDep)}function kC(Ve){return new KC(!1,!1,!1,Ve)}function IE(Ve,kt){var Hr=Ve.type;if(Hr===Fy){var ya=Ve.data.length;return new KC(!0,ya>=1,ya>=2,kt)}else if(Hr===GB){var CA=Ve.data;return new KC(CA.thisDep,CA.contextDep,CA.propDep,kt)}else{if(Hr===$0)return new KC(!1,!1,!1,kt);if(Hr===H0){for(var pa=!1,aA=!1,LA=!1,NA=0;NA<Ve.data.length;++NA){var $A=Ve.data[NA];if($A.type===My)LA=!0;else if($A.type===ky)aA=!0;else if($A.type===Py)pa=!0;else if($A.type===Fy){pa=!0;var qA=$A.data;qA>=1&&(aA=!0),qA>=2&&(LA=!0)}else $A.type===GB&&(pa=pa||$A.data.thisDep,aA=aA||$A.data.contextDep,LA=LA||$A.data.propDep)}return new KC(pa,aA,LA,kt)}else return new KC(Hr===Py,Hr===ky,Hr===My,kt)}}var mQ=new KC(!1,!1,!1,function(){});function M_(Ve,kt,Hr,ya,CA,pa,aA,LA,NA,$A,qA,HA,zA,FA,GA){var ia=$A.Record,oA={add:32774,subtract:32778,"reverse subtract":32779};Hr.ext_blend_minmax&&(oA.min=R_,oA.max=T_);var OA=Hr.angle_instanced_arrays,uI=Hr.webgl_draw_buffers,xA=Hr.oes_vertex_array_object,AI={dirty:!0,profile:GA.profile},oI={},bI=[],mA={},IA={};function II(Pt){return Pt.replace(".","_")}function ZA(Pt,Ft,zr){var ra=II(Pt);bI.push(Pt),oI[ra]=AI[ra]=!!zr,mA[ra]=Ft}function kA(Pt,Ft,zr){var ra=II(Pt);bI.push(Pt),Array.isArray(zr)?(AI[ra]=zr.slice(),oI[ra]=zr.slice()):AI[ra]=oI[ra]=zr,IA[ra]=Ft}ZA(q0,Q_),ZA(V0,v_),kA(J0,"blendColor",[0,0,0,0]),kA(Oy,"blendEquationSeparate",[dQ,dQ]),kA(Gy,"blendFuncSeparate",[fQ,hQ,fQ,hQ]),ZA(K0,S_,!0),kA(z0,"depthFunc",L_),kA(j0,"depthRange",[0,1]),kA(W0,"depthMask",!0),kA(Uy,Uy,[!0,!0,!0,!0]),ZA(eQ,y_),kA(tQ,"cullFace",Sm),kA($y,$y,t0),kA(Hy,Hy,1),ZA(rQ,x_),kA(qy,"polygonOffset",[0,0]),ZA(iQ,b_),ZA(nQ,D_),kA(Yy,"sampleCoverage",[1,!1]),ZA(oQ,__),kA(sQ,"stencilMask",-1),kA(Vy,"stencilFunc",[N_,0,-1]),kA(Jy,"stencilOpSeparate",[QB,Am,Am,Am]),kA(fB,"stencilOpSeparate",[Sm,Am,Am,Am]),ZA(aQ,w_),kA(UB,"scissor",[0,0,Ve.drawingBufferWidth,Ve.drawingBufferHeight]),kA(WE,WE,[0,0,Ve.drawingBufferWidth,Ve.drawingBufferHeight]);var eI={gl:Ve,context:zA,strings:kt,next:oI,current:AI,draw:HA,elements:pa,buffer:CA,shader:qA,attributes:$A.state,vao:$A,uniforms:NA,framebuffer:LA,extensions:Hr,timer:FA,isBufferArgs:ZB},nI={primTypes:Le,compareFuncs:tB,blendFuncs:HE,blendEquations:oA,stencilOps:lm,glTypes:JE,orientationType:r0};Rt.optional(function(){eI.isArrayLike=dC}),uI&&(nI.backBuffer=[Sm],nI.drawBuffer=oa(ya.maxDrawbuffers,function(Pt){return Pt===0?[0]:oa(Pt,function(Ft){return F_+Ft})}));var HI=0;function UI(){var Pt=d_(),Ft=Pt.link,zr=Pt.global;Pt.id=HI++,Pt.batchId="0";var ra=Ft(eI),sa=Pt.shared={props:"a0"};Object.keys(eI).forEach(function(jt){sa[jt]=zr.def(ra,".",jt)}),Rt.optional(function(){Pt.CHECK=Ft(Rt),Pt.commandStr=Rt.guessCommand(),Pt.command=Ft(Pt.commandStr),Pt.assert=function(jt,Vt,ga){jt("if(!(",Vt,"))",this.CHECK,".commandRaise(",Ft(ga),",",this.command,");")},nI.invalidBlendCombinations=IQ});var Hn=Pt.next={},kn=Pt.current={};Object.keys(IA).forEach(function(jt){Array.isArray(AI[jt])&&(Hn[jt]=zr.def(sa.next,".",jt),kn[jt]=zr.def(sa.current,".",jt))});var Wn=Pt.constants={};Object.keys(nI).forEach(function(jt){Wn[jt]=zr.def(JSON.stringify(nI[jt]))}),Pt.invoke=function(jt,Vt){switch(Vt.type){case Fy:var ga=["this",sa.context,sa.props,Pt.batchId];return jt.def(Ft(Vt.data),".call(",ga.slice(0,Math.max(Vt.data.length+1,4)),")");case My:return jt.def(sa.props,Vt.data);case ky:return jt.def(sa.context,Vt.data);case Py:return jt.def("this",Vt.data);case GB:return Vt.data.append(Pt,jt),Vt.data.ref;case $0:return Vt.data.toString();case H0:return Vt.data.map(function(ca){return Pt.invoke(jt,ca)})}},Pt.attribCache={};var Gt={};return Pt.scopeAttrib=function(jt){var Vt=kt.id(jt);if(Vt in Gt)return Gt[Vt];var ga=$A.scope[Vt];ga||(ga=$A.scope[Vt]=new ia);var ca=Gt[Vt]=Ft(ga);return ca},Pt}function sI(Pt){var Ft=Pt.static,zr=Pt.dynamic,ra;if(dB in Ft){var sa=!!Ft[dB];ra=kC(function(kn,Wn){return sa}),ra.enable=sa}else if(dB in zr){var Hn=zr[dB];ra=IE(Hn,function(kn,Wn){return kn.invoke(Wn,Hn)})}return ra}function cI(Pt,Ft){var zr=Pt.static,ra=Pt.dynamic;if(ym in zr){var sa=zr[ym];return sa?(sa=LA.getFramebuffer(sa),Rt.command(sa,"invalid framebuffer object"),kC(function(kn,Wn){var Gt=kn.link(sa),jt=kn.shared;Wn.set(jt.framebuffer,".next",Gt);var Vt=jt.context;return Wn.set(Vt,"."+Xm,Gt+".width"),Wn.set(Vt,"."+Zm,Gt+".height"),Gt})):kC(function(kn,Wn){var Gt=kn.shared;Wn.set(Gt.framebuffer,".next","null");var jt=Gt.context;return Wn.set(jt,"."+Xm,jt+"."+lQ),Wn.set(jt,"."+Zm,jt+"."+cQ),"null"})}else if(ym in ra){var Hn=ra[ym];return IE(Hn,function(kn,Wn){var Gt=kn.invoke(Wn,Hn),jt=kn.shared,Vt=jt.framebuffer,ga=Wn.def(Vt,".getFramebuffer(",Gt,")");Rt.optional(function(){kn.assert(Wn,"!"+Gt+"||"+ga,"invalid framebuffer object")}),Wn.set(Vt,".next",ga);var ca=jt.context;return Wn.set(ca,"."+Xm,ga+"?"+ga+".width:"+ca+"."+lQ),Wn.set(ca,"."+Zm,ga+"?"+ga+".height:"+ca+"."+cQ),ga})}else return null}function MI(Pt,Ft,zr){var ra=Pt.static,sa=Pt.dynamic;function Hn(Gt){if(Gt in ra){var jt=ra[Gt];Rt.commandType(jt,"object","invalid "+Gt,zr.commandStr);var Vt=!0,ga=jt.x|0,ca=jt.y|0,pA,BA;return"width"in jt?(pA=jt.width|0,Rt.command(pA>=0,"invalid "+Gt,zr.commandStr)):Vt=!1,"height"in jt?(BA=jt.height|0,Rt.command(BA>=0,"invalid "+Gt,zr.commandStr)):Vt=!1,new KC(!Vt&&Ft&&Ft.thisDep,!Vt&&Ft&&Ft.contextDep,!Vt&&Ft&&Ft.propDep,function(xI,hI){var SA=xI.shared.context,gA=pA;"width"in jt||(gA=hI.def(SA,".",Xm,"-",ga));var QI=BA;return"height"in jt||(QI=hI.def(SA,".",Zm,"-",ca)),[ga,ca,gA,QI]})}else if(Gt in sa){var JA=sa[Gt],OI=IE(JA,function(xI,hI){var SA=xI.invoke(hI,JA);Rt.optional(function(){xI.assert(hI,SA+"&&typeof "+SA+'==="object"',"invalid "+Gt)});var gA=xI.shared.context,QI=hI.def(SA,".x|0"),CI=hI.def(SA,".y|0"),kI=hI.def('"width" in ',SA,"?",SA,".width|0:","(",gA,".",Xm,"-",QI,")"),EC=hI.def('"height" in ',SA,"?",SA,".height|0:","(",gA,".",Zm,"-",CI,")");return Rt.optional(function(){xI.assert(hI,kI+">=0&&"+EC+">=0","invalid "+Gt)}),[QI,CI,kI,EC]});return Ft&&(OI.thisDep=OI.thisDep||Ft.thisDep,OI.contextDep=OI.contextDep||Ft.contextDep,OI.propDep=OI.propDep||Ft.propDep),OI}else return Ft?new KC(Ft.thisDep,Ft.contextDep,Ft.propDep,function(xI,hI){var SA=xI.shared.context;return[0,0,hI.def(SA,".",Xm),hI.def(SA,".",Zm)]}):null}var kn=Hn(WE);if(kn){var Wn=kn;kn=new KC(kn.thisDep,kn.contextDep,kn.propDep,function(Gt,jt){var Vt=Wn.append(Gt,jt),ga=Gt.shared.context;return jt.set(ga,"."+p_,Vt[2]),jt.set(ga,"."+I_,Vt[3]),Vt})}return{viewport:kn,scissor_box:Hn(UB)}}function qI(Pt,Ft){var zr=Pt.static,ra=typeof zr[IB]=="string"&&typeof zr[pB]=="string";if(ra){if(Object.keys(Ft.dynamic).length>0)return null;var sa=Ft.static,Hn=Object.keys(sa);if(Hn.length>0&&typeof sa[Hn[0]]=="number"){for(var kn=[],Wn=0;Wn<Hn.length;++Wn)Rt(typeof sa[Hn[Wn]]=="number","must specify all vertex attribute locations when using vaos"),kn.push([sa[Hn[Wn]]|0,Hn[Wn]]);return kn}}return null}function iC(Pt,Ft,zr){var ra=Pt.static,sa=Pt.dynamic;function Hn(Vt){if(Vt in ra){var ga=kt.id(ra[Vt]);Rt.optional(function(){qA.shader(CQ[Vt],ga,Rt.guessCommand())});var ca=kC(function(){return ga});return ca.id=ga,ca}else if(Vt in sa){var pA=sa[Vt];return IE(pA,function(BA,JA){var OI=BA.invoke(JA,pA),xI=JA.def(BA.shared.strings,".id(",OI,")");return Rt.optional(function(){JA(BA.shared.shader,".shader(",CQ[Vt],",",xI,",",BA.command,");")}),xI})}return null}var kn=Hn(IB),Wn=Hn(pB),Gt=null,jt;return cm(kn)&&cm(Wn)?(Gt=qA.program(Wn.id,kn.id,null,zr),jt=kC(function(Vt,ga){return Vt.link(Gt)})):jt=new KC(kn&&kn.thisDep||Wn&&Wn.thisDep,kn&&kn.contextDep||Wn&&Wn.contextDep,kn&&kn.propDep||Wn&&Wn.propDep,function(Vt,ga){var ca=Vt.shared.shader,pA;kn?pA=kn.append(Vt,ga):pA=ga.def(ca,".",IB);var BA;Wn?BA=Wn.append(Vt,ga):BA=ga.def(ca,".",pB);var JA=ca+".program("+BA+","+pA;return Rt.optional(function(){JA+=","+Vt.command}),ga.def(JA+")")}),{frag:kn,vert:Wn,progVar:jt,program:Gt}}function DC(Pt,Ft){var zr=Pt.static,ra=Pt.dynamic,sa={},Hn=!1;function kn(){if(CB in zr){var hI=zr[CB];return hI!==null&&$A.getVAO(hI)===null&&(hI=$A.createVAO(hI)),Hn=!0,sa.vao=hI,kC(function(gA){var QI=$A.getVAO(hI);return QI?gA.link(QI):"null"})}else if(CB in ra){Hn=!0;var SA=ra[CB];return IE(SA,function(gA,QI){var CI=gA.invoke(QI,SA);return QI.def(gA.shared.vao+".getVAO("+CI+")")})}return null}var Wn=kn(),Gt=!1;function jt(){if(vm in zr){var hI=zr[vm];if(sa.elements=hI,ZB(hI)){var SA=sa.elements=pa.create(hI,!0);hI=pa.getElements(SA),Gt=!0}else hI&&(hI=pa.getElements(hI),Gt=!0,Rt.command(hI,"invalid elements",Ft.commandStr));var gA=kC(function(CI,kI){if(hI){var EC=CI.link(hI);return CI.ELEMENTS=EC,EC}return CI.ELEMENTS=null,null});return gA.value=hI,gA}else if(vm in ra){Gt=!0;var QI=ra[vm];return IE(QI,function(CI,kI){var EC=CI.shared,oE=EC.isBufferArgs,xm=EC.elements,XE=CI.invoke(kI,QI),YE=kI.def("null"),um=kI.def(oE,"(",XE,")"),bm=CI.cond(um).then(YE,"=",xm,".createStream(",XE,");").else(YE,"=",xm,".getElements(",XE,");");return Rt.optional(function(){CI.assert(bm.else,"!"+XE+"||"+YE,"invalid elements")}),kI.entry(bm),kI.exit(CI.cond(um).then(xm,".destroyStream(",YE,");")),CI.ELEMENTS=YE,YE})}else if(Hn)return new KC(Wn.thisDep,Wn.contextDep,Wn.propDep,function(CI,kI){return kI.def(CI.shared.vao+".currentVAO?"+CI.shared.elements+".getElements("+CI.shared.vao+".currentVAO.elements):null")});return null}var Vt=jt();function ga(){if(Qm in zr){var hI=zr[Qm];return sa.primitive=hI,Rt.commandParameter(hI,Le,"invalid primitve",Ft.commandStr),kC(function(gA,QI){return Le[hI]})}else if(Qm in ra){var SA=ra[Qm];return IE(SA,function(gA,QI){var CI=gA.constants.primTypes,kI=gA.invoke(QI,SA);return Rt.optional(function(){gA.assert(QI,kI+" in "+CI,"invalid primitive, must be one of "+Object.keys(Le))}),QI.def(CI,"[",kI,"]")})}else{if(Gt)return cm(Vt)?Vt.value?kC(function(gA,QI){return QI.def(gA.ELEMENTS,".primType")}):kC(function(){return e0}):new KC(Vt.thisDep,Vt.contextDep,Vt.propDep,function(gA,QI){var CI=gA.ELEMENTS;return QI.def(CI,"?",CI,".primType:",e0)});if(Hn)return new KC(Wn.thisDep,Wn.contextDep,Wn.propDep,function(gA,QI){return QI.def(gA.shared.vao+".currentVAO?"+gA.shared.vao+".currentVAO.primitive:"+e0)})}return null}function ca(hI,SA){if(hI in zr){var gA=zr[hI]|0;return SA?sa.offset=gA:sa.instances=gA,Rt.command(!SA||gA>=0,"invalid "+hI,Ft.commandStr),kC(function(CI,kI){return SA&&(CI.OFFSET=gA),gA})}else if(hI in ra){var QI=ra[hI];return IE(QI,function(CI,kI){var EC=CI.invoke(kI,QI);return SA&&(CI.OFFSET=EC,Rt.optional(function(){CI.assert(kI,EC+">=0","invalid "+hI)})),EC})}else if(SA){if(Gt)return kC(function(CI,kI){return CI.OFFSET=0,0});if(Hn)return new KC(Wn.thisDep,Wn.contextDep,Wn.propDep,function(CI,kI){return kI.def(CI.shared.vao+".currentVAO?"+CI.shared.vao+".currentVAO.offset:0")})}else if(Hn)return new KC(Wn.thisDep,Wn.contextDep,Wn.propDep,function(CI,kI){return kI.def(CI.shared.vao+".currentVAO?"+CI.shared.vao+".currentVAO.instances:-1")});return null}var pA=ca($B,!0);function BA(){if(_m in zr){var hI=zr[_m]|0;return sa.count=hI,Rt.command(typeof hI=="number"&&hI>=0,"invalid vertex count",Ft.commandStr),kC(function(){return hI})}else if(_m in ra){var SA=ra[_m];return IE(SA,function(kI,EC){var oE=kI.invoke(EC,SA);return Rt.optional(function(){kI.assert(EC,"typeof "+oE+'==="number"&&'+oE+">=0&&"+oE+"===("+oE+"|0)","invalid vertex count")}),oE})}else if(Gt)if(cm(Vt)){if(Vt)return pA?new KC(pA.thisDep,pA.contextDep,pA.propDep,function(kI,EC){var oE=EC.def(kI.ELEMENTS,".vertCount-",kI.OFFSET);return Rt.optional(function(){kI.assert(EC,oE+">=0","invalid vertex offset/element buffer too small")}),oE}):kC(function(kI,EC){return EC.def(kI.ELEMENTS,".vertCount")});var gA=kC(function(){return-1});return Rt.optional(function(){gA.MISSING=!0}),gA}else{var QI=new KC(Vt.thisDep||pA.thisDep,Vt.contextDep||pA.contextDep,Vt.propDep||pA.propDep,function(kI,EC){var oE=kI.ELEMENTS;return kI.OFFSET?EC.def(oE,"?",oE,".vertCount-",kI.OFFSET,":-1"):EC.def(oE,"?",oE,".vertCount:-1")});return Rt.optional(function(){QI.DYNAMIC=!0}),QI}else if(Hn){var CI=new KC(Wn.thisDep,Wn.contextDep,Wn.propDep,function(kI,EC){return EC.def(kI.shared.vao,".currentVAO?",kI.shared.vao,".currentVAO.count:-1")});return CI}return null}var JA=ga(),OI=BA(),xI=ca(HB,!1);return{elements:Vt,primitive:JA,count:OI,instances:xI,offset:pA,vao:Wn,vaoActive:Hn,elementsActive:Gt,static:sa}}function TC(Pt,Ft){var zr=Pt.static,ra=Pt.dynamic,sa={};return bI.forEach(function(Hn){var kn=II(Hn);function Wn(Gt,jt){if(Hn in zr){var Vt=Gt(zr[Hn]);sa[kn]=kC(function(){return Vt})}else if(Hn in ra){var ga=ra[Hn];sa[kn]=IE(ga,function(ca,pA){return jt(ca,pA,ca.invoke(pA,ga))})}}switch(Hn){case eQ:case V0:case q0:case oQ:case K0:case aQ:case rQ:case iQ:case nQ:case W0:return Wn(function(Gt){return Rt.commandType(Gt,"boolean",Hn,Ft.commandStr),Gt},function(Gt,jt,Vt){return Rt.optional(function(){Gt.assert(jt,"typeof "+Vt+'==="boolean"',"invalid flag "+Hn,Gt.commandStr)}),Vt});case z0:return Wn(function(Gt){return Rt.commandParameter(Gt,tB,"invalid "+Hn,Ft.commandStr),tB[Gt]},function(Gt,jt,Vt){var ga=Gt.constants.compareFuncs;return Rt.optional(function(){Gt.assert(jt,Vt+" in "+ga,"invalid "+Hn+", must be one of "+Object.keys(tB))}),jt.def(ga,"[",Vt,"]")});case j0:return Wn(function(Gt){return Rt.command(dC(Gt)&&Gt.length===2&&typeof Gt[0]=="number"&&typeof Gt[1]=="number"&&Gt[0]<=Gt[1],"depth range is 2d array",Ft.commandStr),Gt},function(Gt,jt,Vt){Rt.optional(function(){Gt.assert(jt,Gt.shared.isArrayLike+"("+Vt+")&&"+Vt+".length===2&&typeof "+Vt+'[0]==="number"&&typeof '+Vt+'[1]==="number"&&'+Vt+"[0]<="+Vt+"[1]","depth range must be a 2d array")});var ga=jt.def("+",Vt,"[0]"),ca=jt.def("+",Vt,"[1]");return[ga,ca]});case Gy:return Wn(function(Gt){Rt.commandType(Gt,"object","blend.func",Ft.commandStr);var jt="srcRGB"in Gt?Gt.srcRGB:Gt.src,Vt="srcAlpha"in Gt?Gt.srcAlpha:Gt.src,ga="dstRGB"in Gt?Gt.dstRGB:Gt.dst,ca="dstAlpha"in Gt?Gt.dstAlpha:Gt.dst;return Rt.commandParameter(jt,HE,kn+".srcRGB",Ft.commandStr),Rt.commandParameter(Vt,HE,kn+".srcAlpha",Ft.commandStr),Rt.commandParameter(ga,HE,kn+".dstRGB",Ft.commandStr),Rt.commandParameter(ca,HE,kn+".dstAlpha",Ft.commandStr),Rt.command(IQ.indexOf(jt+", "+ga)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+jt+", "+ga+")",Ft.commandStr),[HE[jt],HE[ga],HE[Vt],HE[ca]]},function(Gt,jt,Vt){var ga=Gt.constants.blendFuncs;Rt.optional(function(){Gt.assert(jt,Vt+"&&typeof "+Vt+'==="object"',"invalid blend func, must be an object")});function ca(SA,gA){var QI=jt.def('"',SA,gA,'" in ',Vt,"?",Vt,".",SA,gA,":",Vt,".",SA);return Rt.optional(function(){Gt.assert(jt,QI+" in "+ga,"invalid "+Hn+"."+SA+gA+", must be one of "+Object.keys(HE))}),QI}var pA=ca("src","RGB"),BA=ca("dst","RGB");Rt.optional(function(){var SA=Gt.constants.invalidBlendCombinations;Gt.assert(jt,SA+".indexOf("+pA+'+", "+'+BA+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var JA=jt.def(ga,"[",pA,"]"),OI=jt.def(ga,"[",ca("src","Alpha"),"]"),xI=jt.def(ga,"[",BA,"]"),hI=jt.def(ga,"[",ca("dst","Alpha"),"]");return[JA,xI,OI,hI]});case Oy:return Wn(function(Gt){if(typeof Gt=="string")return Rt.commandParameter(Gt,oA,"invalid "+Hn,Ft.commandStr),[oA[Gt],oA[Gt]];if(typeof Gt=="object")return Rt.commandParameter(Gt.rgb,oA,Hn+".rgb",Ft.commandStr),Rt.commandParameter(Gt.alpha,oA,Hn+".alpha",Ft.commandStr),[oA[Gt.rgb],oA[Gt.alpha]];Rt.commandRaise("invalid blend.equation",Ft.commandStr)},function(Gt,jt,Vt){var ga=Gt.constants.blendEquations,ca=jt.def(),pA=jt.def(),BA=Gt.cond("typeof ",Vt,'==="string"');return Rt.optional(function(){function JA(OI,xI,hI){Gt.assert(OI,hI+" in "+ga,"invalid "+xI+", must be one of "+Object.keys(oA))}JA(BA.then,Hn,Vt),Gt.assert(BA.else,Vt+"&&typeof "+Vt+'==="object"',"invalid "+Hn),JA(BA.else,Hn+".rgb",Vt+".rgb"),JA(BA.else,Hn+".alpha",Vt+".alpha")}),BA.then(ca,"=",pA,"=",ga,"[",Vt,"];"),BA.else(ca,"=",ga,"[",Vt,".rgb];",pA,"=",ga,"[",Vt,".alpha];"),jt(BA),[ca,pA]});case J0:return Wn(function(Gt){return Rt.command(dC(Gt)&&Gt.length===4,"blend.color must be a 4d array",Ft.commandStr),oa(4,function(jt){return+Gt[jt]})},function(Gt,jt,Vt){return Rt.optional(function(){Gt.assert(jt,Gt.shared.isArrayLike+"("+Vt+")&&"+Vt+".length===4","blend.color must be a 4d array")}),oa(4,function(ga){return jt.def("+",Vt,"[",ga,"]")})});case sQ:return Wn(function(Gt){return Rt.commandType(Gt,"number",kn,Ft.commandStr),Gt|0},function(Gt,jt,Vt){return Rt.optional(function(){Gt.assert(jt,"typeof "+Vt+'==="number"',"invalid stencil.mask")}),jt.def(Vt,"|0")});case Vy:return Wn(function(Gt){Rt.commandType(Gt,"object",kn,Ft.commandStr);var jt=Gt.cmp||"keep",Vt=Gt.ref||0,ga="mask"in Gt?Gt.mask:-1;return Rt.commandParameter(jt,tB,Hn+".cmp",Ft.commandStr),Rt.commandType(Vt,"number",Hn+".ref",Ft.commandStr),Rt.commandType(ga,"number",Hn+".mask",Ft.commandStr),[tB[jt],Vt,ga]},function(Gt,jt,Vt){var ga=Gt.constants.compareFuncs;Rt.optional(function(){function JA(){Gt.assert(jt,Array.prototype.join.call(arguments,""),"invalid stencil.func")}JA(Vt+"&&typeof ",Vt,'==="object"'),JA('!("cmp" in ',Vt,")||(",Vt,".cmp in ",ga,")")});var ca=jt.def('"cmp" in ',Vt,"?",ga,"[",Vt,".cmp]",":",Am),pA=jt.def(Vt,".ref|0"),BA=jt.def('"mask" in ',Vt,"?",Vt,".mask|0:-1");return[ca,pA,BA]});case Jy:case fB:return Wn(function(Gt){Rt.commandType(Gt,"object",kn,Ft.commandStr);var jt=Gt.fail||"keep",Vt=Gt.zfail||"keep",ga=Gt.zpass||"keep";return Rt.commandParameter(jt,lm,Hn+".fail",Ft.commandStr),Rt.commandParameter(Vt,lm,Hn+".zfail",Ft.commandStr),Rt.commandParameter(ga,lm,Hn+".zpass",Ft.commandStr),[Hn===fB?Sm:QB,lm[jt],lm[Vt],lm[ga]]},function(Gt,jt,Vt){var ga=Gt.constants.stencilOps;Rt.optional(function(){Gt.assert(jt,Vt+"&&typeof "+Vt+'==="object"',"invalid "+Hn)});function ca(pA){return Rt.optional(function(){Gt.assert(jt,'!("'+pA+'" in '+Vt+")||("+Vt+"."+pA+" in "+ga+")","invalid "+Hn+"."+pA+", must be one of "+Object.keys(lm))}),jt.def('"',pA,'" in ',Vt,"?",ga,"[",Vt,".",pA,"]:",Am)}return[Hn===fB?Sm:QB,ca("fail"),ca("zfail"),ca("zpass")]});case qy:return Wn(function(Gt){Rt.commandType(Gt,"object",kn,Ft.commandStr);var jt=Gt.factor|0,Vt=Gt.units|0;return Rt.commandType(jt,"number",kn+".factor",Ft.commandStr),Rt.commandType(Vt,"number",kn+".units",Ft.commandStr),[jt,Vt]},function(Gt,jt,Vt){Rt.optional(function(){Gt.assert(jt,Vt+"&&typeof "+Vt+'==="object"',"invalid "+Hn)});var ga=jt.def(Vt,".factor|0"),ca=jt.def(Vt,".units|0");return[ga,ca]});case tQ:return Wn(function(Gt){var jt=0;return Gt==="front"?jt=QB:Gt==="back"&&(jt=Sm),Rt.command(!!jt,kn,Ft.commandStr),jt},function(Gt,jt,Vt){return Rt.optional(function(){Gt.assert(jt,Vt+'==="front"||'+Vt+'==="back"',"invalid cull.face")}),jt.def(Vt,'==="front"?',QB,":",Sm)});case Hy:return Wn(function(Gt){return Rt.command(typeof Gt=="number"&&Gt>=ya.lineWidthDims[0]&&Gt<=ya.lineWidthDims[1],"invalid line width, must be a positive number between "+ya.lineWidthDims[0]+" and "+ya.lineWidthDims[1],Ft.commandStr),Gt},function(Gt,jt,Vt){return Rt.optional(function(){Gt.assert(jt,"typeof "+Vt+'==="number"&&'+Vt+">="+ya.lineWidthDims[0]+"&&"+Vt+"<="+ya.lineWidthDims[1],"invalid line width")}),Vt});case $y:return Wn(function(Gt){return Rt.commandParameter(Gt,r0,kn,Ft.commandStr),r0[Gt]},function(Gt,jt,Vt){return Rt.optional(function(){Gt.assert(jt,Vt+'==="cw"||'+Vt+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),jt.def(Vt+'==="cw"?'+gQ+":"+t0)});case Uy:return Wn(function(Gt){return Rt.command(dC(Gt)&&Gt.length===4,"color.mask must be length 4 array",Ft.commandStr),Gt.map(function(jt){return!!jt})},function(Gt,jt,Vt){return Rt.optional(function(){Gt.assert(jt,Gt.shared.isArrayLike+"("+Vt+")&&"+Vt+".length===4","invalid color.mask")}),oa(4,function(ga){return"!!"+Vt+"["+ga+"]"})});case Yy:return Wn(function(Gt){Rt.command(typeof Gt=="object"&&Gt,kn,Ft.commandStr);var jt="value"in Gt?Gt.value:1,Vt=!!Gt.invert;return Rt.command(typeof jt=="number"&&jt>=0&&jt<=1,"sample.coverage.value must be a number between 0 and 1",Ft.commandStr),[jt,Vt]},function(Gt,jt,Vt){Rt.optional(function(){Gt.assert(jt,Vt+"&&typeof "+Vt+'==="object"',"invalid sample.coverage")});var ga=jt.def('"value" in ',Vt,"?+",Vt,".value:1"),ca=jt.def("!!",Vt,".invert");return[ga,ca]})}}),sa}function oC(Pt,Ft){var zr=Pt.static,ra=Pt.dynamic,sa={};return Object.keys(zr).forEach(function(Hn){var kn=zr[Hn],Wn;if(typeof kn=="number"||typeof kn=="boolean")Wn=kC(function(){return kn});else if(typeof kn=="function"){var Gt=kn._reglType;Gt==="texture2d"||Gt==="textureCube"?Wn=kC(function(jt){return jt.link(kn)}):Gt==="framebuffer"||Gt==="framebufferCube"?(Rt.command(kn.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Hn+'"',Ft.commandStr),Wn=kC(function(jt){return jt.link(kn.color[0])})):Rt.commandRaise('invalid data for uniform "'+Hn+'"',Ft.commandStr)}else dC(kn)?Wn=kC(function(jt){var Vt=jt.global.def("[",oa(kn.length,function(ga){return Rt.command(typeof kn[ga]=="number"||typeof kn[ga]=="boolean","invalid uniform "+Hn,jt.commandStr),kn[ga]}),"]");return Vt}):Rt.commandRaise('invalid or missing data for uniform "'+Hn+'"',Ft.commandStr);Wn.value=kn,sa[Hn]=Wn}),Object.keys(ra).forEach(function(Hn){var kn=ra[Hn];sa[Hn]=IE(kn,function(Wn,Gt){return Wn.invoke(Gt,kn)})}),sa}function HC(Pt,Ft){var zr=Pt.static,ra=Pt.dynamic,sa={};return Object.keys(zr).forEach(function(Hn){var kn=zr[Hn],Wn=kt.id(Hn),Gt=new ia;if(ZB(kn))Gt.state=Wm,Gt.buffer=CA.getBuffer(CA.create(kn,eB,!1,!0)),Gt.type=0;else{var jt=CA.getBuffer(kn);if(jt)Gt.state=Wm,Gt.buffer=jt,Gt.type=0;else if(Rt.command(typeof kn=="object"&&kn,"invalid data for attribute "+Hn,Ft.commandStr),"constant"in kn){var Vt=kn.constant;Gt.buffer="null",Gt.state=Ly,typeof Vt=="number"?Gt.x=Vt:(Rt.command(dC(Vt)&&Vt.length>0&&Vt.length<=4,"invalid constant for attribute "+Hn,Ft.commandStr),jm.forEach(function(xI,hI){hI<Vt.length&&(Gt[xI]=Vt[hI])}))}else{ZB(kn.buffer)?jt=CA.getBuffer(CA.create(kn.buffer,eB,!1,!0)):jt=CA.getBuffer(kn.buffer),Rt.command(!!jt,'missing buffer for attribute "'+Hn+'"',Ft.commandStr);var ga=kn.offset|0;Rt.command(ga>=0,'invalid offset for attribute "'+Hn+'"',Ft.commandStr);var ca=kn.stride|0;Rt.command(ca>=0&&ca<256,'invalid stride for attribute "'+Hn+'", must be integer betweeen [0, 255]',Ft.commandStr);var pA=kn.size|0;Rt.command(!("size"in kn)||pA>0&&pA<=4,'invalid size for attribute "'+Hn+'", must be 1,2,3,4',Ft.commandStr);var BA=!!kn.normalized,JA=0;"type"in kn&&(Rt.commandParameter(kn.type,JE,"invalid type for attribute "+Hn,Ft.commandStr),JA=JE[kn.type]);var OI=kn.divisor|0;Rt.optional(function(){"divisor"in kn&&(Rt.command(OI===0||OA,'cannot specify divisor for attribute "'+Hn+'", instancing not supported',Ft.commandStr),Rt.command(OI>=0,'invalid divisor for attribute "'+Hn+'"',Ft.commandStr));var xI=Ft.commandStr,hI=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(kn).forEach(function(SA){Rt.command(hI.indexOf(SA)>=0,'unknown parameter "'+SA+'" for attribute pointer "'+Hn+'" (valid parameters are '+hI+")",xI)})}),Gt.buffer=jt,Gt.state=Wm,Gt.size=pA,Gt.normalized=BA,Gt.type=JA||jt.dtype,Gt.offset=ga,Gt.stride=ca,Gt.divisor=OI}}sa[Hn]=kC(function(xI,hI){var SA=xI.attribCache;if(Wn in SA)return SA[Wn];var gA={isStream:!1};return Object.keys(Gt).forEach(function(QI){gA[QI]=Gt[QI]}),Gt.buffer&&(gA.buffer=xI.link(Gt.buffer),gA.type=gA.type||gA.buffer+".dtype"),SA[Wn]=gA,gA})}),Object.keys(ra).forEach(function(Hn){var kn=ra[Hn];function Wn(Gt,jt){var Vt=Gt.invoke(jt,kn),ga=Gt.shared,ca=Gt.constants,pA=ga.isBufferArgs,BA=ga.buffer;Rt.optional(function(){Gt.assert(jt,Vt+"&&(typeof "+Vt+'==="object"||typeof '+Vt+'==="function")&&('+pA+"("+Vt+")||"+BA+".getBuffer("+Vt+")||"+BA+".getBuffer("+Vt+".buffer)||"+pA+"("+Vt+'.buffer)||("constant" in '+Vt+"&&(typeof "+Vt+'.constant==="number"||'+ga.isArrayLike+"("+Vt+".constant))))",'invalid dynamic attribute "'+Hn+'"')});var JA={isStream:jt.def(!1)},OI=new ia;OI.state=Wm,Object.keys(OI).forEach(function(gA){JA[gA]=jt.def(""+OI[gA])});var xI=JA.buffer,hI=JA.type;jt("if(",pA,"(",Vt,")){",JA.isStream,"=true;",xI,"=",BA,".createStream(",eB,",",Vt,");",hI,"=",xI,".dtype;","}else{",xI,"=",BA,".getBuffer(",Vt,");","if(",xI,"){",hI,"=",xI,".dtype;",'}else if("constant" in ',Vt,"){",JA.state,"=",Ly,";","if(typeof "+Vt+'.constant === "number"){',JA[jm[0]],"=",Vt,".constant;",jm.slice(1).map(function(gA){return JA[gA]}).join("="),"=0;","}else{",jm.map(function(gA,QI){return JA[gA]+"="+Vt+".constant.length>"+QI+"?"+Vt+".constant["+QI+"]:0;"}).join(""),"}}else{","if(",pA,"(",Vt,".buffer)){",xI,"=",BA,".createStream(",eB,",",Vt,".buffer);","}else{",xI,"=",BA,".getBuffer(",Vt,".buffer);","}",hI,'="type" in ',Vt,"?",ca.glTypes,"[",Vt,".type]:",xI,".dtype;",JA.normalized,"=!!",Vt,".normalized;");function SA(gA){jt(JA[gA],"=",Vt,".",gA,"|0;")}return SA("size"),SA("offset"),SA("stride"),SA("divisor"),jt("}}"),jt.exit("if(",JA.isStream,"){",BA,".destroyStream(",xI,");","}"),JA}sa[Hn]=IE(kn,Wn)}),sa}function wC(Pt){var Ft=Pt.static,zr=Pt.dynamic,ra={};return Object.keys(Ft).forEach(function(sa){var Hn=Ft[sa];ra[sa]=kC(function(kn,Wn){return typeof Hn=="number"||typeof Hn=="boolean"?""+Hn:kn.link(Hn)})}),Object.keys(zr).forEach(function(sa){var Hn=zr[sa];ra[sa]=IE(Hn,function(kn,Wn){return kn.invoke(Wn,Hn)})}),ra}function PC(Pt,Ft,zr,ra,sa){var Hn=Pt.static,kn=Pt.dynamic;Rt.optional(function(){var SA=[ym,pB,IB,vm,Qm,$B,_m,HB,dB,CB].concat(bI);function gA(QI){Object.keys(QI).forEach(function(CI){Rt.command(SA.indexOf(CI)>=0,'unknown parameter "'+CI+'"',sa.commandStr)})}gA(Hn),gA(kn)});var Wn=qI(Pt,Ft),Gt=cI(Pt),jt=MI(Pt,Gt,sa),Vt=DC(Pt,sa),ga=TC(Pt,sa),ca=iC(Pt,sa,Wn);function pA(SA){var gA=jt[SA];gA&&(ga[SA]=gA)}pA(WE),pA(II(UB));var BA=Object.keys(ga).length>0,JA={framebuffer:Gt,draw:Vt,shader:ca,state:ga,dirty:BA,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(JA.profile=sI(Pt),JA.uniforms=oC(zr,sa),JA.drawVAO=JA.scopeVAO=Vt.vao,!JA.drawVAO&&ca.program&&!Wn&&Hr.angle_instanced_arrays&&Vt.static.elements){var OI=!0,xI=ca.program.attributes.map(function(SA){var gA=Ft.static[SA];return OI=OI&&!!gA,gA});if(OI&&xI.length>0){var hI=$A.getVAO($A.createVAO({attributes:xI,elements:Vt.static.elements}));JA.drawVAO=new KC(null,null,null,function(SA,gA){return SA.link(hI)}),JA.useVAO=!0}}return Wn?JA.useVAO=!0:JA.attributes=HC(Ft,sa),JA.context=wC(ra),JA}function qC(Pt,Ft,zr){var ra=Pt.shared,sa=ra.context,Hn=Pt.scope();Object.keys(zr).forEach(function(kn){Ft.save(sa,"."+kn);var Wn=zr[kn],Gt=Wn.append(Pt,Ft);Array.isArray(Gt)?Hn(sa,".",kn,"=[",Gt.join(),"];"):Hn(sa,".",kn,"=",Gt,";")}),Ft(Hn)}function YC(Pt,Ft,zr,ra){var sa=Pt.shared,Hn=sa.gl,kn=sa.framebuffer,Wn;uI&&(Wn=Ft.def(sa.extensions,".webgl_draw_buffers"));var Gt=Pt.constants,jt=Gt.drawBuffer,Vt=Gt.backBuffer,ga;zr?ga=zr.append(Pt,Ft):ga=Ft.def(kn,".next"),ra||Ft("if(",ga,"!==",kn,".cur){"),Ft("if(",ga,"){",Hn,".bindFramebuffer(",pQ,",",ga,".framebuffer);"),uI&&Ft(Wn,".drawBuffersWEBGL(",jt,"[",ga,".colorAttachments.length]);"),Ft("}else{",Hn,".bindFramebuffer(",pQ,",null);"),uI&&Ft(Wn,".drawBuffersWEBGL(",Vt,");"),Ft("}",kn,".cur=",ga,";"),ra||Ft("}")}function XC(Pt,Ft,zr){var ra=Pt.shared,sa=ra.gl,Hn=Pt.current,kn=Pt.next,Wn=ra.current,Gt=ra.next,jt=Pt.cond(Wn,".dirty");bI.forEach(function(Vt){var ga=II(Vt);if(!(ga in zr.state)){var ca,pA;if(ga in kn){ca=kn[ga],pA=Hn[ga];var BA=oa(AI[ga].length,function(OI){return jt.def(ca,"[",OI,"]")});jt(Pt.cond(BA.map(function(OI,xI){return OI+"!=="+pA+"["+xI+"]"}).join("||")).then(sa,".",IA[ga],"(",BA,");",BA.map(function(OI,xI){return pA+"["+xI+"]="+OI}).join(";"),";"))}else{ca=jt.def(Gt,".",ga);var JA=Pt.cond(ca,"!==",Wn,".",ga);jt(JA),ga in mA?JA(Pt.cond(ca).then(sa,".enable(",mA[ga],");").else(sa,".disable(",mA[ga],");"),Wn,".",ga,"=",ca,";"):JA(sa,".",IA[ga],"(",ca,");",Wn,".",ga,"=",ca,";")}}}),Object.keys(zr.state).length===0&&jt(Wn,".dirty=false;"),Ft(jt)}function iE(Pt,Ft,zr,ra){var sa=Pt.shared,Hn=Pt.current,kn=sa.current,Wn=sa.gl;EQ(Object.keys(zr)).forEach(function(Gt){var jt=zr[Gt];if(!(ra&&!ra(jt))){var Vt=jt.append(Pt,Ft);if(mA[Gt]){var ga=mA[Gt];cm(jt)?Vt?Ft(Wn,".enable(",ga,");"):Ft(Wn,".disable(",ga,");"):Ft(Pt.cond(Vt).then(Wn,".enable(",ga,");").else(Wn,".disable(",ga,");")),Ft(kn,".",Gt,"=",Vt,";")}else if(dC(Vt)){var ca=Hn[Gt];Ft(Wn,".",IA[Gt],"(",Vt,");",Vt.map(function(pA,BA){return ca+"["+BA+"]="+pA}).join(";"),";")}else Ft(Wn,".",IA[Gt],"(",Vt,");",kn,".",Gt,"=",Vt,";")}})}function LC(Pt,Ft){OA&&(Pt.instancing=Ft.def(Pt.shared.extensions,".angle_instanced_arrays"))}function XI(Pt,Ft,zr,ra,sa){var Hn=Pt.shared,kn=Pt.stats,Wn=Hn.current,Gt=Hn.timer,jt=zr.profile;function Vt(){return typeof performance>"u"?"Date.now()":"performance.now()"}var ga,ca;function pA(SA){ga=Ft.def(),SA(ga,"=",Vt(),";"),typeof sa=="string"?SA(kn,".count+=",sa,";"):SA(kn,".count++;"),FA&&(ra?(ca=Ft.def(),SA(ca,"=",Gt,".getNumPendingQueries();")):SA(Gt,".beginQuery(",kn,");"))}function BA(SA){SA(kn,".cpuTime+=",Vt(),"-",ga,";"),FA&&(ra?SA(Gt,".pushScopeStats(",ca,",",Gt,".getNumPendingQueries(),",kn,");"):SA(Gt,".endQuery();"))}function JA(SA){var gA=Ft.def(Wn,".profile");Ft(Wn,".profile=",SA,";"),Ft.exit(Wn,".profile=",gA,";")}var OI;if(jt){if(cm(jt)){jt.enable?(pA(Ft),BA(Ft.exit),JA("true")):JA("false");return}OI=jt.append(Pt,Ft),JA(OI)}else OI=Ft.def(Wn,".profile");var xI=Pt.block();pA(xI),Ft("if(",OI,"){",xI,"}");var hI=Pt.block();BA(hI),Ft.exit("if(",OI,"){",hI,"}")}function nE(Pt,Ft,zr,ra,sa){var Hn=Pt.shared;function kn(Gt){switch(Gt){case qB:case JB:case jB:return 2;case YB:case KB:case WB:return 3;case VB:case zB:case XB:return 4;default:return 1}}function Wn(Gt,jt,Vt){var ga=Hn.gl,ca=Ft.def(Gt,".location"),pA=Ft.def(Hn.attributes,"[",ca,"]"),BA=Vt.state,JA=Vt.buffer,OI=[Vt.x,Vt.y,Vt.z,Vt.w],xI=["buffer","normalized","offset","stride"];function hI(){Ft("if(!",pA,".buffer){",ga,".enableVertexAttribArray(",ca,");}");var gA=Vt.type,QI;if(Vt.size?QI=Ft.def(Vt.size,"||",jt):QI=jt,Ft("if(",pA,".type!==",gA,"||",pA,".size!==",QI,"||",xI.map(function(kI){return pA+"."+kI+"!=="+Vt[kI]}).join("||"),"){",ga,".bindBuffer(",eB,",",JA,".buffer);",ga,".vertexAttribPointer(",[ca,QI,gA,Vt.normalized,Vt.stride,Vt.offset],");",pA,".type=",gA,";",pA,".size=",QI,";",xI.map(function(kI){return pA+"."+kI+"="+Vt[kI]+";"}).join(""),"}"),OA){var CI=Vt.divisor;Ft("if(",pA,".divisor!==",CI,"){",Pt.instancing,".vertexAttribDivisorANGLE(",[ca,CI],");",pA,".divisor=",CI,";}")}}function SA(){Ft("if(",pA,".buffer){",ga,".disableVertexAttribArray(",ca,");",pA,".buffer=null;","}if(",jm.map(function(gA,QI){return pA+"."+gA+"!=="+OI[QI]}).join("||"),"){",ga,".vertexAttrib4f(",ca,",",OI,");",jm.map(function(gA,QI){return pA+"."+gA+"="+OI[QI]+";"}).join(""),"}")}BA===Wm?hI():BA===Ly?SA():(Ft("if(",BA,"===",Wm,"){"),hI(),Ft("}else{"),SA(),Ft("}"))}ra.forEach(function(Gt){var jt=Gt.name,Vt=zr.attributes[jt],ga;if(Vt){if(!sa(Vt))return;ga=Vt.append(Pt,Ft)}else{if(!sa(mQ))return;var ca=Pt.scopeAttrib(jt);Rt.optional(function(){Pt.assert(Ft,ca+".state","missing attribute "+jt)}),ga={},Object.keys(new ia).forEach(function(pA){ga[pA]=Ft.def(ca,".",pA)})}Wn(Pt.link(Gt),kn(Gt.info.type),ga)})}function CC(Pt,Ft,zr,ra,sa,Hn){for(var kn=Pt.shared,Wn=kn.gl,Gt={},jt,Vt=0;Vt<ra.length;++Vt){var ga=ra[Vt],ca=ga.name,pA=ga.info.type,BA=ga.info.size,JA=zr.uniforms[ca];if(BA>1){if(!JA)continue;var OI=ca.replace("[0]","");if(Gt[OI])continue;Gt[OI]=1}var xI=Pt.link(ga),hI=xI+".location",SA;if(JA){if(!sa(JA))continue;if(cm(JA)){var gA=JA.value;if(Rt.command(gA!==null&&typeof gA<"u",'missing uniform "'+ca+'"',Pt.commandStr),pA===yB||pA===vB){Rt.command(typeof gA=="function"&&(pA===yB&&(gA._reglType==="texture2d"||gA._reglType==="framebuffer")||pA===vB&&(gA._reglType==="textureCube"||gA._reglType==="framebufferCube")),"invalid texture for uniform "+ca,Pt.commandStr);var QI=Pt.link(gA._texture||gA.color[0]._texture);Ft(Wn,".uniform1i(",hI,",",QI+".bind());"),Ft.exit(QI,".unbind();")}else if(pA===EB||pA===mB||pA===BB){Rt.optional(function(){Rt.command(dC(gA),"invalid matrix for uniform "+ca,Pt.commandStr),Rt.command(pA===EB&&gA.length===4||pA===mB&&gA.length===9||pA===BB&&gA.length===16,"invalid length for matrix uniform "+ca,Pt.commandStr)});var CI=Pt.global.def("new Float32Array(["+Array.prototype.slice.call(gA)+"])"),kI=2;pA===mB?kI=3:pA===BB&&(kI=4),Ft(Wn,".uniformMatrix",kI,"fv(",hI,",false,",CI,");")}else{switch(pA){case Wy:BA===1?Rt.commandType(gA,"number","uniform "+ca,Pt.commandStr):Rt.command(dC(gA)&&gA.length===BA,"uniform "+ca,Pt.commandStr),jt="1f";break;case qB:Rt.command(dC(gA)&&gA.length&&gA.length%2===0&&gA.length<=BA*2,"uniform "+ca,Pt.commandStr),jt="2f";break;case YB:Rt.command(dC(gA)&&gA.length&&gA.length%3===0&&gA.length<=BA*3,"uniform "+ca,Pt.commandStr),jt="3f";break;case VB:Rt.command(dC(gA)&&gA.length&&gA.length%4===0&&gA.length<=BA*4,"uniform "+ca,Pt.commandStr),jt="4f";break;case Zy:BA===1?Rt.commandType(gA,"boolean","uniform "+ca,Pt.commandStr):Rt.command(dC(gA)&&gA.length===BA,"uniform "+ca,Pt.commandStr),jt="1i";break;case Xy:BA===1?Rt.commandType(gA,"number","uniform "+ca,Pt.commandStr):Rt.command(dC(gA)&&gA.length===BA,"uniform "+ca,Pt.commandStr),jt="1i";break;case jB:Rt.command(dC(gA)&&gA.length&&gA.length%2===0&&gA.length<=BA*2,"uniform "+ca,Pt.commandStr),jt="2i";break;case JB:Rt.command(dC(gA)&&gA.length&&gA.length%2===0&&gA.length<=BA*2,"uniform "+ca,Pt.commandStr),jt="2i";break;case WB:Rt.command(dC(gA)&&gA.length&&gA.length%3===0&&gA.length<=BA*3,"uniform "+ca,Pt.commandStr),jt="3i";break;case KB:Rt.command(dC(gA)&&gA.length&&gA.length%3===0&&gA.length<=BA*3,"uniform "+ca,Pt.commandStr),jt="3i";break;case XB:Rt.command(dC(gA)&&gA.length&&gA.length%4===0&&gA.length<=BA*4,"uniform "+ca,Pt.commandStr),jt="4i";break;case zB:Rt.command(dC(gA)&&gA.length&&gA.length%4===0&&gA.length<=BA*4,"uniform "+ca,Pt.commandStr),jt="4i";break}BA>1?(jt+="v",gA=Pt.global.def("["+Array.prototype.slice.call(gA)+"]")):gA=dC(gA)?Array.prototype.slice.call(gA):gA,Ft(Wn,".uniform",jt,"(",hI,",",gA,");")}continue}else SA=JA.append(Pt,Ft)}else{if(!sa(mQ))continue;SA=Ft.def(kn.uniforms,"[",kt.id(ca),"]")}pA===yB?(Rt(!Array.isArray(SA),"must specify a scalar prop for textures"),Ft("if(",SA,"&&",SA,'._reglType==="framebuffer"){',SA,"=",SA,".color[0];","}")):pA===vB&&(Rt(!Array.isArray(SA),"must specify a scalar prop for cube maps"),Ft("if(",SA,"&&",SA,'._reglType==="framebufferCube"){',SA,"=",SA,".color[0];","}")),Rt.optional(function(){function vE(CE,ey){Pt.assert(Ft,CE,'bad data or missing for uniform "'+ca+'".  '+ey)}function Dm(CE,ey){ey===1&&Rt(!Array.isArray(SA),"must not specify an array type for uniform"),vE("Array.isArray("+SA+") && typeof "+SA+'[0]===" '+CE+'" || typeof '+SA+'==="'+CE+'"',"invalid type, expected "+CE)}function DE(CE,ey,ty){Array.isArray(SA)?Rt(SA.length&&SA.length%CE===0&&SA.length<=CE*ty,"must have length of "+(ty===1?"":"n * ")+CE):vE(kn.isArrayLike+"("+SA+")&&"+SA+".length && "+SA+".length % "+CE+" === 0 && "+SA+".length<="+CE*ty,"invalid vector, should have length of "+(ty===1?"":"n * ")+CE,Pt.commandStr)}function wQ(CE){Rt(!Array.isArray(SA),"must not specify a value type"),vE("typeof "+SA+'==="function"&&'+SA+'._reglType==="texture'+(CE===uQ?"2d":"Cube")+'"',"invalid texture type",Pt.commandStr)}switch(pA){case Xy:Dm("number",BA);break;case JB:DE(2,"number",BA);break;case KB:DE(3,"number",BA);break;case zB:DE(4,"number",BA);break;case Wy:Dm("number",BA);break;case qB:DE(2,"number",BA);break;case YB:DE(3,"number",BA);break;case VB:DE(4,"number",BA);break;case Zy:Dm("boolean",BA);break;case jB:DE(2,"boolean",BA);break;case WB:DE(3,"boolean",BA);break;case XB:DE(4,"boolean",BA);break;case EB:DE(4,"number",BA);break;case mB:DE(9,"number",BA);break;case BB:DE(16,"number",BA);break;case yB:wQ(uQ);break;case vB:wQ(B_);break}});var EC=1;switch(pA){case yB:case vB:var oE=Ft.def(SA,"._texture");Ft(Wn,".uniform1i(",hI,",",oE,".bind());"),Ft.exit(oE,".unbind();");continue;case Xy:case Zy:jt="1i";break;case JB:case jB:jt="2i",EC=2;break;case KB:case WB:jt="3i",EC=3;break;case zB:case XB:jt="4i",EC=4;break;case Wy:jt="1f";break;case qB:jt="2f",EC=2;break;case YB:jt="3f",EC=3;break;case VB:jt="4f",EC=4;break;case EB:jt="Matrix2fv";break;case mB:jt="Matrix3fv";break;case BB:jt="Matrix4fv";break}if(jt.indexOf("Matrix")===-1&&BA>1&&(jt+="v",EC=1),jt.charAt(0)==="M"){Ft(Wn,".uniform",jt,"(",hI,",");var xm=Math.pow(pA-EB+2,2),XE=Pt.global.def("new Float32Array(",xm,")");Array.isArray(SA)?Ft("false,(",oa(xm,function(vE){return XE+"["+vE+"]="+SA[vE]}),",",XE,")"):Ft("false,(Array.isArray(",SA,")||",SA," instanceof Float32Array)?",SA,":(",oa(xm,function(vE){return XE+"["+vE+"]="+SA+"["+vE+"]"}),",",XE,")"),Ft(");")}else if(EC>1){for(var YE=[],um=[],bm=0;bm<EC;++bm)Array.isArray(SA)?um.push(SA[bm]):um.push(Ft.def(SA+"["+bm+"]")),Hn&&YE.push(Ft.def());Hn&&Ft("if(!",Pt.batchId,"||",YE.map(function(vE,Dm){return vE+"!=="+um[Dm]}).join("||"),"){",YE.map(function(vE,Dm){return vE+"="+um[Dm]+";"}).join("")),Ft(Wn,".uniform",jt,"(",hI,",",um.join(","),");"),Hn&&Ft("}")}else{if(Rt(!Array.isArray(SA),"uniform value must not be an array"),Hn){var SQ=Ft.def();Ft("if(!",Pt.batchId,"||",SQ,"!==",SA,"){",SQ,"=",SA,";")}Ft(Wn,".uniform",jt,"(",hI,",",SA,");"),Hn&&Ft("}")}}}function TI(Pt,Ft,zr,ra){var sa=Pt.shared,Hn=sa.gl,kn=sa.draw,Wn=ra.draw;function Gt(){var QI=Wn.elements,CI,kI=Ft;return QI?((QI.contextDep&&ra.contextDynamic||QI.propDep)&&(kI=zr),CI=QI.append(Pt,kI),Wn.elementsActive&&kI("if("+CI+")"+Hn+".bindBuffer("+jy+","+CI+".buffer.buffer);")):(CI=kI.def(),kI(CI,"=",kn,".",vm,";","if(",CI,"){",Hn,".bindBuffer(",jy,",",CI,".buffer.buffer);}","else if(",sa.vao,".currentVAO){",CI,"=",Pt.shared.elements+".getElements("+sa.vao,".currentVAO.elements);",xA?"":"if("+CI+")"+Hn+".bindBuffer("+jy+","+CI+".buffer.buffer);","}")),CI}function jt(){var QI=Wn.count,CI,kI=Ft;return QI?((QI.contextDep&&ra.contextDynamic||QI.propDep)&&(kI=zr),CI=QI.append(Pt,kI),Rt.optional(function(){QI.MISSING&&Pt.assert(Ft,"false","missing vertex count"),QI.DYNAMIC&&Pt.assert(kI,CI+">=0","missing vertex count")})):(CI=kI.def(kn,".",_m),Rt.optional(function(){Pt.assert(kI,CI+">=0","missing vertex count")})),CI}var Vt=Gt();function ga(QI){var CI=Wn[QI];return CI?CI.contextDep&&ra.contextDynamic||CI.propDep?CI.append(Pt,zr):CI.append(Pt,Ft):Ft.def(kn,".",QI)}var ca=ga(Qm),pA=ga($B),BA=jt();if(typeof BA=="number"){if(BA===0)return}else zr("if(",BA,"){"),zr.exit("}");var JA,OI;OA&&(JA=ga(HB),OI=Pt.instancing);var xI=Vt+".type",hI=Wn.elements&&cm(Wn.elements)&&!Wn.vaoActive;function SA(){function QI(){zr(OI,".drawElementsInstancedANGLE(",[ca,BA,xI,pA+"<<(("+xI+"-"+U0+")>>1)",JA],");")}function CI(){zr(OI,".drawArraysInstancedANGLE(",[ca,pA,BA,JA],");")}Vt&&Vt!=="null"?hI?QI():(zr("if(",Vt,"){"),QI(),zr("}else{"),CI(),zr("}")):CI()}function gA(){function QI(){zr(Hn+".drawElements("+[ca,BA,xI,pA+"<<(("+xI+"-"+U0+")>>1)"]+");")}function CI(){zr(Hn+".drawArrays("+[ca,pA,BA]+");")}Vt&&Vt!=="null"?hI?QI():(zr("if(",Vt,"){"),QI(),zr("}else{"),CI(),zr("}")):CI()}OA&&(typeof JA!="number"||JA>=0)?typeof JA=="string"?(zr("if(",JA,">0){"),SA(),zr("}else if(",JA,"<0){"),gA(),zr("}")):SA():gA()}function nC(Pt,Ft,zr,ra,sa){var Hn=UI(),kn=Hn.proc("body",sa);return Rt.optional(function(){Hn.commandStr=Ft.commandStr,Hn.command=Hn.link(Ft.commandStr)}),OA&&(Hn.instancing=kn.def(Hn.shared.extensions,".angle_instanced_arrays")),Pt(Hn,kn,zr,ra),Hn.compile().body}function cC(Pt,Ft,zr,ra){LC(Pt,Ft),zr.useVAO?zr.drawVAO?Ft(Pt.shared.vao,".setVAO(",zr.drawVAO.append(Pt,Ft),");"):Ft(Pt.shared.vao,".setVAO(",Pt.shared.vao,".targetVAO);"):(Ft(Pt.shared.vao,".setVAO(null);"),nE(Pt,Ft,zr,ra.attributes,function(){return!0})),CC(Pt,Ft,zr,ra.uniforms,function(){return!0},!1),TI(Pt,Ft,Ft,zr)}function FC(Pt,Ft){var zr=Pt.proc("draw",1);LC(Pt,zr),qC(Pt,zr,Ft.context),YC(Pt,zr,Ft.framebuffer),XC(Pt,zr,Ft),iE(Pt,zr,Ft.state),XI(Pt,zr,Ft,!1,!0);var ra=Ft.shader.progVar.append(Pt,zr);if(zr(Pt.shared.gl,".useProgram(",ra,".program);"),Ft.shader.program)cC(Pt,zr,Ft,Ft.shader.program);else{zr(Pt.shared.vao,".setVAO(null);");var sa=Pt.global.def("{}"),Hn=zr.def(ra,".id"),kn=zr.def(sa,"[",Hn,"]");zr(Pt.cond(kn).then(kn,".call(this,a0);").else(kn,"=",sa,"[",Hn,"]=",Pt.link(function(Wn){return nC(cC,Pt,Ft,Wn,1)}),"(",ra,");",kn,".call(this,a0);"))}Object.keys(Ft.state).length>0&&zr(Pt.shared.current,".dirty=true;"),Pt.shared.vao&&zr(Pt.shared.vao,".setVAO(null);")}function qE(Pt,Ft,zr,ra){Pt.batchId="a1",LC(Pt,Ft);function sa(){return!0}nE(Pt,Ft,zr,ra.attributes,sa),CC(Pt,Ft,zr,ra.uniforms,sa,!1),TI(Pt,Ft,Ft,zr)}function wm(Pt,Ft,zr,ra){LC(Pt,Ft);var sa=zr.contextDep,Hn=Ft.def(),kn="a0",Wn="a1",Gt=Ft.def();Pt.shared.props=Gt,Pt.batchId=Hn;var jt=Pt.scope(),Vt=Pt.scope();Ft(jt.entry,"for(",Hn,"=0;",Hn,"<",Wn,";++",Hn,"){",Gt,"=",kn,"[",Hn,"];",Vt,"}",jt.exit);function ga(xI){return xI.contextDep&&sa||xI.propDep}function ca(xI){return!ga(xI)}if(zr.needsContext&&qC(Pt,Vt,zr.context),zr.needsFramebuffer&&YC(Pt,Vt,zr.framebuffer),iE(Pt,Vt,zr.state,ga),zr.profile&&ga(zr.profile)&&XI(Pt,Vt,zr,!1,!0),ra)zr.useVAO?zr.drawVAO?ga(zr.drawVAO)?Vt(Pt.shared.vao,".setVAO(",zr.drawVAO.append(Pt,Vt),");"):jt(Pt.shared.vao,".setVAO(",zr.drawVAO.append(Pt,jt),");"):jt(Pt.shared.vao,".setVAO(",Pt.shared.vao,".targetVAO);"):(jt(Pt.shared.vao,".setVAO(null);"),nE(Pt,jt,zr,ra.attributes,ca),nE(Pt,Vt,zr,ra.attributes,ga)),CC(Pt,jt,zr,ra.uniforms,ca,!1),CC(Pt,Vt,zr,ra.uniforms,ga,!0),TI(Pt,jt,Vt,zr);else{var pA=Pt.global.def("{}"),BA=zr.shader.progVar.append(Pt,Vt),JA=Vt.def(BA,".id"),OI=Vt.def(pA,"[",JA,"]");Vt(Pt.shared.gl,".useProgram(",BA,".program);","if(!",OI,"){",OI,"=",pA,"[",JA,"]=",Pt.link(function(xI){return nC(qE,Pt,zr,xI,2)}),"(",BA,");}",OI,".call(this,a0[",Hn,"],",Hn,");")}}function Kt(Pt,Ft){var zr=Pt.proc("batch",2);Pt.batchId="0",LC(Pt,zr);var ra=!1,sa=!0;Object.keys(Ft.context).forEach(function(pA){ra=ra||Ft.context[pA].propDep}),ra||(qC(Pt,zr,Ft.context),sa=!1);var Hn=Ft.framebuffer,kn=!1;Hn?(Hn.propDep?ra=kn=!0:Hn.contextDep&&ra&&(kn=!0),kn||YC(Pt,zr,Hn)):YC(Pt,zr,null),Ft.state.viewport&&Ft.state.viewport.propDep&&(ra=!0);function Wn(pA){return pA.contextDep&&ra||pA.propDep}XC(Pt,zr,Ft),iE(Pt,zr,Ft.state,function(pA){return!Wn(pA)}),(!Ft.profile||!Wn(Ft.profile))&&XI(Pt,zr,Ft,!1,"a1"),Ft.contextDep=ra,Ft.needsContext=sa,Ft.needsFramebuffer=kn;var Gt=Ft.shader.progVar;if(Gt.contextDep&&ra||Gt.propDep)wm(Pt,zr,Ft,null);else{var jt=Gt.append(Pt,zr);if(zr(Pt.shared.gl,".useProgram(",jt,".program);"),Ft.shader.program)wm(Pt,zr,Ft,Ft.shader.program);else{zr(Pt.shared.vao,".setVAO(null);");var Vt=Pt.global.def("{}"),ga=zr.def(jt,".id"),ca=zr.def(Vt,"[",ga,"]");zr(Pt.cond(ca).then(ca,".call(this,a0,a1);").else(ca,"=",Vt,"[",ga,"]=",Pt.link(function(pA){return nC(wm,Pt,Ft,pA,2)}),"(",jt,");",ca,".call(this,a0,a1);"))}}Object.keys(Ft.state).length>0&&zr(Pt.shared.current,".dirty=true;"),Pt.shared.vao&&zr(Pt.shared.vao,".setVAO(null);")}function eA(Pt,Ft){var zr=Pt.proc("scope",3);Pt.batchId="a2";var ra=Pt.shared,sa=ra.current;qC(Pt,zr,Ft.context),Ft.framebuffer&&Ft.framebuffer.append(Pt,zr),EQ(Object.keys(Ft.state)).forEach(function(kn){var Wn=Ft.state[kn],Gt=Wn.append(Pt,zr);dC(Gt)?Gt.forEach(function(jt,Vt){zr.set(Pt.next[kn],"["+Vt+"]",jt)}):zr.set(ra.next,"."+kn,Gt)}),XI(Pt,zr,Ft,!0,!0),[vm,$B,_m,HB,Qm].forEach(function(kn){var Wn=Ft.draw[kn];Wn&&zr.set(ra.draw,"."+kn,""+Wn.append(Pt,zr))}),Object.keys(Ft.uniforms).forEach(function(kn){var Wn=Ft.uniforms[kn].append(Pt,zr);Array.isArray(Wn)&&(Wn="["+Wn.join()+"]"),zr.set(ra.uniforms,"["+kt.id(kn)+"]",Wn)}),Object.keys(Ft.attributes).forEach(function(kn){var Wn=Ft.attributes[kn].append(Pt,zr),Gt=Pt.scopeAttrib(kn);Object.keys(new ia).forEach(function(jt){zr.set(Gt,"."+jt,Wn[jt])})}),Ft.scopeVAO&&zr.set(ra.vao,".targetVAO",Ft.scopeVAO.append(Pt,zr));function Hn(kn){var Wn=Ft.shader[kn];Wn&&zr.set(ra.shader,"."+kn,Wn.append(Pt,zr))}Hn(pB),Hn(IB),Object.keys(Ft.state).length>0&&(zr(sa,".dirty=true;"),zr.exit(sa,".dirty=true;")),zr("a1(",Pt.shared.context,",a0,",Pt.batchId,");")}function ha(Pt){if(!(typeof Pt!="object"||dC(Pt))){for(var Ft=Object.keys(Pt),zr=0;zr<Ft.length;++zr)if(FI.isDynamic(Pt[Ft[zr]]))return!0;return!1}}function dI(Pt,Ft,zr){var ra=Ft.static[zr];if(!ra||!ha(ra))return;var sa=Pt.global,Hn=Object.keys(ra),kn=!1,Wn=!1,Gt=!1,jt=Pt.global.def("{}");Hn.forEach(function(ga){var ca=ra[ga];if(FI.isDynamic(ca)){typeof ca=="function"&&(ca=ra[ga]=FI.unbox(ca));var pA=IE(ca,null);kn=kn||pA.thisDep,Gt=Gt||pA.propDep,Wn=Wn||pA.contextDep}else{switch(sa(jt,".",ga,"="),typeof ca){case"number":sa(ca);break;case"string":sa('"',ca,'"');break;case"object":Array.isArray(ca)&&sa("[",ca.join(),"]");break;default:sa(Pt.link(ca));break}sa(";")}});function Vt(ga,ca){Hn.forEach(function(pA){var BA=ra[pA];if(FI.isDynamic(BA)){var JA=ga.invoke(ca,BA);ca(jt,".",pA,"=",JA,";")}})}Ft.dynamic[zr]=new FI.DynamicVariable(GB,{thisDep:kn,contextDep:Wn,propDep:Gt,ref:jt,append:Vt}),delete Ft.static[zr]}function rC(Pt,Ft,zr,ra,sa){var Hn=UI();Hn.stats=Hn.link(sa),Object.keys(Ft.static).forEach(function(Wn){dI(Hn,Ft,Wn)}),C_.forEach(function(Wn){dI(Hn,Pt,Wn)});var kn=PC(Pt,Ft,zr,ra,Hn);return FC(Hn,kn),eA(Hn,kn),Kt(Hn,kn),_(Hn.compile(),{destroy:function(){kn.shader.program.destroy()}})}return{next:oI,current:AI,procs:function(){var Pt=UI(),Ft=Pt.proc("poll"),zr=Pt.proc("refresh"),ra=Pt.block();Ft(ra),zr(ra);var sa=Pt.shared,Hn=sa.gl,kn=sa.next,Wn=sa.current;ra(Wn,".dirty=false;"),YC(Pt,Ft),YC(Pt,zr,null,!0);var Gt;OA&&(Gt=Pt.link(OA)),Hr.oes_vertex_array_object&&zr(Pt.link(Hr.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var jt=0;jt<ya.maxAttributes;++jt){var Vt=zr.def(sa.attributes,"[",jt,"]"),ga=Pt.cond(Vt,".buffer");ga.then(Hn,".enableVertexAttribArray(",jt,");",Hn,".bindBuffer(",eB,",",Vt,".buffer.buffer);",Hn,".vertexAttribPointer(",jt,",",Vt,".size,",Vt,".type,",Vt,".normalized,",Vt,".stride,",Vt,".offset);").else(Hn,".disableVertexAttribArray(",jt,");",Hn,".vertexAttrib4f(",jt,",",Vt,".x,",Vt,".y,",Vt,".z,",Vt,".w);",Vt,".buffer=null;"),zr(ga),OA&&zr(Gt,".vertexAttribDivisorANGLE(",jt,",",Vt,".divisor);")}return zr(Pt.shared.vao,".currentVAO=null;",Pt.shared.vao,".setVAO(",Pt.shared.vao,".targetVAO);"),Object.keys(mA).forEach(function(ca){var pA=mA[ca],BA=ra.def(kn,".",ca),JA=Pt.block();JA("if(",BA,"){",Hn,".enable(",pA,")}else{",Hn,".disable(",pA,")}",Wn,".",ca,"=",BA,";"),zr(JA),Ft("if(",BA,"!==",Wn,".",ca,"){",JA,"}")}),Object.keys(IA).forEach(function(ca){var pA=IA[ca],BA=AI[ca],JA,OI,xI=Pt.block();if(xI(Hn,".",pA,"("),dC(BA)){var hI=BA.length;JA=Pt.global.def(kn,".",ca),OI=Pt.global.def(Wn,".",ca),xI(oa(hI,function(SA){return JA+"["+SA+"]"}),");",oa(hI,function(SA){return OI+"["+SA+"]="+JA+"["+SA+"];"}).join("")),Ft("if(",oa(hI,function(SA){return JA+"["+SA+"]!=="+OI+"["+SA+"]"}).join("||"),"){",xI,"}")}else JA=ra.def(kn,".",ca),OI=ra.def(Wn,".",ca),xI(JA,");",Wn,".",ca,"=",JA,";"),Ft("if(",JA,"!==",OI,"){",xI,"}");zr(xI)}),Pt.compile()}(),compile:rC}}function k_(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var P_=34918,O_=34919,BQ=35007,G_=function(Ve,kt){if(!kt.ext_disjoint_timer_query)return null;var Hr=[];function ya(){return Hr.pop()||kt.ext_disjoint_timer_query.createQueryEXT()}function CA(OA){Hr.push(OA)}var pa=[];function aA(OA){var uI=ya();kt.ext_disjoint_timer_query.beginQueryEXT(BQ,uI),pa.push(uI),FA(pa.length-1,pa.length,OA)}function LA(){kt.ext_disjoint_timer_query.endQueryEXT(BQ)}function NA(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var $A=[];function qA(){return $A.pop()||new NA}function HA(OA){$A.push(OA)}var zA=[];function FA(OA,uI,xA){var AI=qA();AI.startQueryIndex=OA,AI.endQueryIndex=uI,AI.sum=0,AI.stats=xA,zA.push(AI)}var GA=[],ia=[];function oA(){var OA,uI,xA=pa.length;if(xA!==0){ia.length=Math.max(ia.length,xA+1),GA.length=Math.max(GA.length,xA+1),GA[0]=0,ia[0]=0;var AI=0;for(OA=0,uI=0;uI<pa.length;++uI){var oI=pa[uI];kt.ext_disjoint_timer_query.getQueryObjectEXT(oI,O_)?(AI+=kt.ext_disjoint_timer_query.getQueryObjectEXT(oI,P_),CA(oI)):pa[OA++]=oI,GA[uI+1]=AI,ia[uI+1]=OA}for(pa.length=OA,OA=0,uI=0;uI<zA.length;++uI){var bI=zA[uI],mA=bI.startQueryIndex,IA=bI.endQueryIndex;bI.sum+=GA[IA]-GA[mA];var II=ia[mA],ZA=ia[IA];ZA===II?(bI.stats.gpuTime+=bI.sum/1e6,HA(bI)):(bI.startQueryIndex=II,bI.endQueryIndex=ZA,zA[OA++]=bI)}zA.length=OA}}return{beginQuery:aA,endQuery:LA,pushScopeStats:FA,update:oA,getNumPendingQueries:function(){return pa.length},clear:function(){Hr.push.apply(Hr,pa);for(var OA=0;OA<Hr.length;OA++)kt.ext_disjoint_timer_query.deleteQueryEXT(Hr[OA]);pa.length=0,Hr.length=0},restore:function(){pa.length=0,Hr.length=0}}},U_=16384,$_=256,H_=1024,q_=34962,yQ="webglcontextlost",vQ="webglcontextrestored",QQ=1,Y_=2,V_=3;function _Q(Ve,kt){for(var Hr=0;Hr<Ve.length;++Hr)if(Ve[Hr]===kt)return Hr;return-1}function J_(Ve){var kt=Xt(Ve);if(!kt)return null;var Hr=kt.gl,ya=Hr.getContextAttributes(),CA=Hr.isContextLost(),pa=zn(Hr,kt);if(!pa)return null;var aA=IC(),LA=k_(),NA=pa.extensions,$A=G_(Hr,NA),qA=ZI(),HA=Hr.drawingBufferWidth,zA=Hr.drawingBufferHeight,FA={tick:0,time:0,viewportWidth:HA,viewportHeight:zA,framebufferWidth:HA,framebufferHeight:zA,drawingBufferWidth:HA,drawingBufferHeight:zA,pixelRatio:kt.pixelRatio},GA={},ia={elements:null,primitive:4,count:-1,offset:0,instances:-1},oA=Ot(Hr,NA),OA=dm(Hr,LA,kt,AI),uI=tC(Hr,NA,OA,LA),xA=a_(Hr,NA,oA,LA,OA,uI,ia);function AI(TI){return xA.destroyBuffer(TI)}var oI=u_(Hr,aA,LA,kt),bI=PQ(Hr,NA,oA,function(){II.procs.poll()},FA,LA,kt),mA=OQ(Hr,NA,oA,LA,kt),IA=o_(Hr,NA,oA,bI,mA,LA),II=M_(Hr,aA,NA,oA,OA,uI,bI,IA,GA,xA,oI,ia,FA,$A,kt),ZA=f_(Hr,IA,II.procs.poll,FA,ya,NA,oA),kA=II.next,eI=Hr.canvas,nI=[],HI=[],UI=[],sI=[kt.onDestroy],cI=null;function MI(){if(nI.length===0){$A&&$A.update(),cI=null;return}cI=DI.next(MI),iE();for(var TI=nI.length-1;TI>=0;--TI){var nC=nI[TI];nC&&nC(FA,null,0)}Hr.flush(),$A&&$A.update()}function qI(){!cI&&nI.length>0&&(cI=DI.next(MI))}function iC(){cI&&(DI.cancel(MI),cI=null)}function DC(TI){TI.preventDefault(),CA=!0,iC(),HI.forEach(function(nC){nC()})}function TC(TI){Hr.getError(),CA=!1,pa.restore(),oI.restore(),OA.restore(),bI.restore(),mA.restore(),IA.restore(),xA.restore(),$A&&$A.restore(),II.procs.refresh(),qI(),UI.forEach(function(nC){nC()})}eI&&(eI.addEventListener(yQ,DC,!1),eI.addEventListener(vQ,TC,!1));function oC(){nI.length=0,iC(),eI&&(eI.removeEventListener(yQ,DC),eI.removeEventListener(vQ,TC)),oI.clear(),IA.clear(),mA.clear(),xA.clear(),bI.clear(),uI.clear(),OA.clear(),$A&&$A.clear(),sI.forEach(function(TI){TI()})}function HC(TI){Rt(!!TI,"invalid args to regl({...})"),Rt.type(TI,"object","invalid args to regl({...})");function nC(sa){var Hn=_({},sa);delete Hn.uniforms,delete Hn.attributes,delete Hn.context,delete Hn.vao,"stencil"in Hn&&Hn.stencil.op&&(Hn.stencil.opBack=Hn.stencil.opFront=Hn.stencil.op,delete Hn.stencil.op);function kn(Wn){if(Wn in Hn){var Gt=Hn[Wn];delete Hn[Wn],Object.keys(Gt).forEach(function(jt){Hn[Wn+"."+jt]=Gt[jt]})}}return kn("blend"),kn("depth"),kn("cull"),kn("stencil"),kn("polygonOffset"),kn("scissor"),kn("sample"),"vao"in sa&&(Hn.vao=sa.vao),Hn}function cC(sa,Hn){var kn={},Wn={};return Object.keys(sa).forEach(function(Gt){var jt=sa[Gt];if(FI.isDynamic(jt)){Wn[Gt]=FI.unbox(jt,Gt);return}else if(Hn&&Array.isArray(jt)){for(var Vt=0;Vt<jt.length;++Vt)if(FI.isDynamic(jt[Vt])){Wn[Gt]=FI.unbox(jt,Gt);return}}kn[Gt]=jt}),{dynamic:Wn,static:kn}}var FC=cC(TI.context||{},!0),qE=cC(TI.uniforms||{},!0),wm=cC(TI.attributes||{},!1),Kt=cC(nC(TI),!1),eA={gpuTime:0,cpuTime:0,count:0},ha=II.compile(Kt,wm,qE,FC,eA),dI=ha.draw,rC=ha.batch,Pt=ha.scope,Ft=[];function zr(sa){for(;Ft.length<sa;)Ft.push(null);return Ft}function ra(sa,Hn){var kn;if(CA&&Rt.raise("context lost"),typeof sa=="function")return Pt.call(this,null,sa,0);if(typeof Hn=="function")if(typeof sa=="number")for(kn=0;kn<sa;++kn)Pt.call(this,null,Hn,kn);else if(Array.isArray(sa))for(kn=0;kn<sa.length;++kn)Pt.call(this,sa[kn],Hn,kn);else return Pt.call(this,sa,Hn,0);else if(typeof sa=="number"){if(sa>0)return rC.call(this,zr(sa|0),sa|0)}else if(Array.isArray(sa)){if(sa.length)return rC.call(this,sa,sa.length)}else return dI.call(this,sa)}return _(ra,{stats:eA,destroy:function(){ha.destroy()}})}var wC=IA.setFBO=HC({framebuffer:FI.define.call(null,QQ,"framebuffer")});function PC(TI,nC){var cC=0;II.procs.poll();var FC=nC.color;FC&&(Hr.clearColor(+FC[0]||0,+FC[1]||0,+FC[2]||0,+FC[3]||0),cC|=U_),"depth"in nC&&(Hr.clearDepth(+nC.depth),cC|=$_),"stencil"in nC&&(Hr.clearStencil(nC.stencil|0),cC|=H_),Rt(!!cC,"called regl.clear with no buffer specified"),Hr.clear(cC)}function qC(TI){if(Rt(typeof TI=="object"&&TI,"regl.clear() takes an object as input"),"framebuffer"in TI)if(TI.framebuffer&&TI.framebuffer_reglType==="framebufferCube")for(var nC=0;nC<6;++nC)wC(_({framebuffer:TI.framebuffer.faces[nC]},TI),PC);else wC(TI,PC);else PC(null,TI)}function YC(TI){Rt.type(TI,"function","regl.frame() callback must be a function"),nI.push(TI);function nC(){var cC=_Q(nI,TI);Rt(cC>=0,"cannot cancel a frame twice");function FC(){var qE=_Q(nI,FC);nI[qE]=nI[nI.length-1],nI.length-=1,nI.length<=0&&iC()}nI[cC]=FC}return qI(),{cancel:nC}}function XC(){var TI=kA.viewport,nC=kA.scissor_box;TI[0]=TI[1]=nC[0]=nC[1]=0,FA.viewportWidth=FA.framebufferWidth=FA.drawingBufferWidth=TI[2]=nC[2]=Hr.drawingBufferWidth,FA.viewportHeight=FA.framebufferHeight=FA.drawingBufferHeight=TI[3]=nC[3]=Hr.drawingBufferHeight}function iE(){FA.tick+=1,FA.time=XI(),XC(),II.procs.poll()}function LC(){bI.refresh(),XC(),II.procs.refresh(),$A&&$A.update()}function XI(){return(ZI()-qA)/1e3}LC();function nE(TI,nC){Rt.type(nC,"function","listener callback must be a function");var cC;switch(TI){case"frame":return YC(nC);case"lost":cC=HI;break;case"restore":cC=UI;break;case"destroy":cC=sI;break;default:Rt.raise("invalid event, must be one of frame,lost,restore,destroy")}return cC.push(nC),{cancel:function(){for(var FC=0;FC<cC.length;++FC)if(cC[FC]===nC){cC[FC]=cC[cC.length-1],cC.pop();return}}}}var CC=_(HC,{clear:qC,prop:FI.define.bind(null,QQ),context:FI.define.bind(null,Y_),this:FI.define.bind(null,V_),draw:HC({}),buffer:function(TI){return OA.create(TI,q_,!1,!1)},elements:function(TI){return uI.create(TI,!1)},texture:bI.create2D,cube:bI.createCube,renderbuffer:mA.create,framebuffer:IA.create,framebufferCube:IA.createCube,vao:xA.createVAO,attributes:ya,frame:YC,on:nE,limits:oA,hasExtension:function(TI){return oA.extensions.indexOf(TI.toLowerCase())>=0},read:ZA,destroy:oC,_gl:Hr,_refresh:LC,poll:function(){iE(),$A&&$A.update()},now:XI,stats:LA});return kt.onDone(null,CC),CC}return J_})})(regl$1);var reglExports=regl$1.exports;const regl=getDefaultExportFromCjs(reglExports);var EPSILON=1e-6,ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var f=0,s=arguments.length;s--;)f+=arguments[s]*arguments[s];return Math.sqrt(f)});function identity$7(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function invert(f,s){var d=s[0],_=s[1],S=s[2],T=s[3],F=s[4],M=s[5],P=s[6],H=s[7],J=s[8],K=s[9],z=s[10],oe=s[11],se=s[12],ae=s[13],ge=s[14],pe=s[15],he=d*M-_*F,ve=d*P-S*F,be=d*H-T*F,Re=_*P-S*M,Fe=_*H-T*M,ye=S*H-T*P,Ue=J*ae-K*se,It=J*ge-z*se,St=J*pe-oe*se,At=K*ge-z*ae,xt=K*pe-oe*ae,Ct=z*pe-oe*ge,Nt=he*Ct-ve*xt+be*At+Re*St-Fe*It+ye*Ue;return Nt?(Nt=1/Nt,f[0]=(M*Ct-P*xt+H*At)*Nt,f[1]=(S*xt-_*Ct-T*At)*Nt,f[2]=(ae*ye-ge*Fe+pe*Re)*Nt,f[3]=(z*Fe-K*ye-oe*Re)*Nt,f[4]=(P*St-F*Ct-H*It)*Nt,f[5]=(d*Ct-S*St+T*It)*Nt,f[6]=(ge*be-se*ye-pe*ve)*Nt,f[7]=(J*ye-z*be+oe*ve)*Nt,f[8]=(F*xt-M*St+H*Ue)*Nt,f[9]=(_*St-d*xt-T*Ue)*Nt,f[10]=(se*Fe-ae*be+pe*he)*Nt,f[11]=(K*be-J*Fe-oe*he)*Nt,f[12]=(M*It-F*At-P*Ue)*Nt,f[13]=(d*At-_*It+S*Ue)*Nt,f[14]=(ae*ve-se*Re-ge*he)*Nt,f[15]=(J*Re-K*ve+z*he)*Nt,f):null}function multiply$1(f,s,d){var _=s[0],S=s[1],T=s[2],F=s[3],M=s[4],P=s[5],H=s[6],J=s[7],K=s[8],z=s[9],oe=s[10],se=s[11],ae=s[12],ge=s[13],pe=s[14],he=s[15],ve=d[0],be=d[1],Re=d[2],Fe=d[3];return f[0]=ve*_+be*M+Re*K+Fe*ae,f[1]=ve*S+be*P+Re*z+Fe*ge,f[2]=ve*T+be*H+Re*oe+Fe*pe,f[3]=ve*F+be*J+Re*se+Fe*he,ve=d[4],be=d[5],Re=d[6],Fe=d[7],f[4]=ve*_+be*M+Re*K+Fe*ae,f[5]=ve*S+be*P+Re*z+Fe*ge,f[6]=ve*T+be*H+Re*oe+Fe*pe,f[7]=ve*F+be*J+Re*se+Fe*he,ve=d[8],be=d[9],Re=d[10],Fe=d[11],f[8]=ve*_+be*M+Re*K+Fe*ae,f[9]=ve*S+be*P+Re*z+Fe*ge,f[10]=ve*T+be*H+Re*oe+Fe*pe,f[11]=ve*F+be*J+Re*se+Fe*he,ve=d[12],be=d[13],Re=d[14],Fe=d[15],f[12]=ve*_+be*M+Re*K+Fe*ae,f[13]=ve*S+be*P+Re*z+Fe*ge,f[14]=ve*T+be*H+Re*oe+Fe*pe,f[15]=ve*F+be*J+Re*se+Fe*he,f}function translate$1(f,s,d){var _=d[0],S=d[1],T=d[2],F,M,P,H,J,K,z,oe,se,ae,ge,pe;return s===f?(f[12]=s[0]*_+s[4]*S+s[8]*T+s[12],f[13]=s[1]*_+s[5]*S+s[9]*T+s[13],f[14]=s[2]*_+s[6]*S+s[10]*T+s[14],f[15]=s[3]*_+s[7]*S+s[11]*T+s[15]):(F=s[0],M=s[1],P=s[2],H=s[3],J=s[4],K=s[5],z=s[6],oe=s[7],se=s[8],ae=s[9],ge=s[10],pe=s[11],f[0]=F,f[1]=M,f[2]=P,f[3]=H,f[4]=J,f[5]=K,f[6]=z,f[7]=oe,f[8]=se,f[9]=ae,f[10]=ge,f[11]=pe,f[12]=F*_+J*S+se*T+s[12],f[13]=M*_+K*S+ae*T+s[13],f[14]=P*_+z*S+ge*T+s[14],f[15]=H*_+oe*S+pe*T+s[15]),f}function scale$2(f,s,d){var _=d[0],S=d[1],T=d[2];return f[0]=s[0]*_,f[1]=s[1]*_,f[2]=s[2]*_,f[3]=s[3]*_,f[4]=s[4]*S,f[5]=s[5]*S,f[6]=s[6]*S,f[7]=s[7]*S,f[8]=s[8]*T,f[9]=s[9]*T,f[10]=s[10]*T,f[11]=s[11]*T,f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15],f}function rotateX(f,s,d){var _=Math.sin(d),S=Math.cos(d),T=s[4],F=s[5],M=s[6],P=s[7],H=s[8],J=s[9],K=s[10],z=s[11];return s!==f&&(f[0]=s[0],f[1]=s[1],f[2]=s[2],f[3]=s[3],f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15]),f[4]=T*S+H*_,f[5]=F*S+J*_,f[6]=M*S+K*_,f[7]=P*S+z*_,f[8]=H*S-T*_,f[9]=J*S-F*_,f[10]=K*S-M*_,f[11]=z*S-P*_,f}function rotateZ(f,s,d){var _=Math.sin(d),S=Math.cos(d),T=s[0],F=s[1],M=s[2],P=s[3],H=s[4],J=s[5],K=s[6],z=s[7];return s!==f&&(f[8]=s[8],f[9]=s[9],f[10]=s[10],f[11]=s[11],f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15]),f[0]=T*S+H*_,f[1]=F*S+J*_,f[2]=M*S+K*_,f[3]=P*S+z*_,f[4]=H*S-T*_,f[5]=J*S-F*_,f[6]=K*S-M*_,f[7]=z*S-P*_,f}function perspectiveNO(f,s,d,_,S){var T=1/Math.tan(s/2),F;return f[0]=T/d,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=T,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,S!=null&&S!==1/0?(F=1/(_-S),f[10]=(S+_)*F,f[14]=2*S*_*F):(f[10]=-1,f[14]=-2*_),f}var perspective=perspectiveNO;function lookAt(f,s,d,_){var S,T,F,M,P,H,J,K,z,oe,se=s[0],ae=s[1],ge=s[2],pe=_[0],he=_[1],ve=_[2],be=d[0],Re=d[1],Fe=d[2];return Math.abs(se-be)<EPSILON&&Math.abs(ae-Re)<EPSILON&&Math.abs(ge-Fe)<EPSILON?identity$7(f):(J=se-be,K=ae-Re,z=ge-Fe,oe=1/Math.hypot(J,K,z),J*=oe,K*=oe,z*=oe,S=he*z-ve*K,T=ve*J-pe*z,F=pe*K-he*J,oe=Math.hypot(S,T,F),oe?(oe=1/oe,S*=oe,T*=oe,F*=oe):(S=0,T=0,F=0),M=K*F-z*T,P=z*S-J*F,H=J*T-K*S,oe=Math.hypot(M,P,H),oe?(oe=1/oe,M*=oe,P*=oe,H*=oe):(M=0,P=0,H=0),f[0]=S,f[1]=M,f[2]=J,f[3]=0,f[4]=T,f[5]=P,f[6]=K,f[7]=0,f[8]=F,f[9]=H,f[10]=z,f[11]=0,f[12]=-(S*se+T*ae+F*ge),f[13]=-(M*se+P*ae+H*ge),f[14]=-(J*se+K*ae+z*ge),f[15]=1,f)}function equals(f,s){var d=f[0],_=f[1],S=f[2],T=f[3],F=f[4],M=f[5],P=f[6],H=f[7],J=f[8],K=f[9],z=f[10],oe=f[11],se=f[12],ae=f[13],ge=f[14],pe=f[15],he=s[0],ve=s[1],be=s[2],Re=s[3],Fe=s[4],ye=s[5],Ue=s[6],It=s[7],St=s[8],At=s[9],xt=s[10],Ct=s[11],Nt=s[12],qt=s[13],Jn=s[14],qr=s[15];return Math.abs(d-he)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(he))&&Math.abs(_-ve)<=EPSILON*Math.max(1,Math.abs(_),Math.abs(ve))&&Math.abs(S-be)<=EPSILON*Math.max(1,Math.abs(S),Math.abs(be))&&Math.abs(T-Re)<=EPSILON*Math.max(1,Math.abs(T),Math.abs(Re))&&Math.abs(F-Fe)<=EPSILON*Math.max(1,Math.abs(F),Math.abs(Fe))&&Math.abs(M-ye)<=EPSILON*Math.max(1,Math.abs(M),Math.abs(ye))&&Math.abs(P-Ue)<=EPSILON*Math.max(1,Math.abs(P),Math.abs(Ue))&&Math.abs(H-It)<=EPSILON*Math.max(1,Math.abs(H),Math.abs(It))&&Math.abs(J-St)<=EPSILON*Math.max(1,Math.abs(J),Math.abs(St))&&Math.abs(K-At)<=EPSILON*Math.max(1,Math.abs(K),Math.abs(At))&&Math.abs(z-xt)<=EPSILON*Math.max(1,Math.abs(z),Math.abs(xt))&&Math.abs(oe-Ct)<=EPSILON*Math.max(1,Math.abs(oe),Math.abs(Ct))&&Math.abs(se-Nt)<=EPSILON*Math.max(1,Math.abs(se),Math.abs(Nt))&&Math.abs(ae-qt)<=EPSILON*Math.max(1,Math.abs(ae),Math.abs(qt))&&Math.abs(ge-Jn)<=EPSILON*Math.max(1,Math.abs(ge),Math.abs(Jn))&&Math.abs(pe-qr)<=EPSILON*Math.max(1,Math.abs(pe),Math.abs(qr))}function create$3(){var f=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function add$3(f,s,d){return f[0]=s[0]+d[0],f[1]=s[1]+d[1],f[2]=s[2]+d[2],f}function multiply(f,s,d){return f[0]=s[0]*d[0],f[1]=s[1]*d[1],f[2]=s[2]*d[2],f}function negate$1(f,s){return f[0]=-s[0],f[1]=-s[1],f[2]=-s[2],f}var mul=multiply;(function(){var f=create$3();return function(s,d,_,S,T,F){var M,P;for(d||(d=3),_||(_=0),S?P=Math.min(S*d+_,s.length):P=s.length,M=_;M<P;M+=d)f[0]=s[M],f[1]=s[M+1],f[2]=s[M+2],T(f,f,F),s[M]=f[0],s[M+1]=f[1],s[M+2]=f[2];return s}})();function create$2(){var f=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0,f[3]=0),f}function scale$1(f,s,d){return f[0]=s[0]*d,f[1]=s[1]*d,f[2]=s[2]*d,f[3]=s[3]*d,f}function transformMat4(f,s,d){var _=s[0],S=s[1],T=s[2],F=s[3];return f[0]=d[0]*_+d[4]*S+d[8]*T+d[12]*F,f[1]=d[1]*_+d[5]*S+d[9]*T+d[13]*F,f[2]=d[2]*_+d[6]*S+d[10]*T+d[14]*F,f[3]=d[3]*_+d[7]*S+d[11]*T+d[15]*F,f}(function(){var f=create$2();return function(s,d,_,S,T,F){var M,P;for(d||(d=4),_||(_=0),S?P=Math.min(S*d+_,s.length):P=s.length,M=_;M<P;M+=d)f[0]=s[M],f[1]=s[M+1],f[2]=s[M+2],f[3]=s[M+3],T(f,f,F),s[M]=f[0],s[M+1]=f[1],s[M+2]=f[2],s[M+3]=f[3];return s}})();function create$1(){var f=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(f[0]=0,f[1]=0),f}function add$2(f,s,d){return f[0]=s[0]+d[0],f[1]=s[1]+d[1],f}function negate(f,s){return f[0]=-s[0],f[1]=-s[1],f}function lerp(f,s,d,_){var S=s[0],T=s[1];return f[0]=S+_*(d[0]-S),f[1]=T+_*(d[1]-T),f}(function(){var f=create$1();return function(s,d,_,S,T,F){var M,P;for(d||(d=2),_||(_=0),S?P=Math.min(S*d+_,s.length):P=s.length,M=_;M<P;M+=d)f[0]=s[M],f[1]=s[M+1],T(f,f,F),s[M]=f[0],s[M+1]=f[1];return s}})();function damp(f){const s=f*.9;return Math.abs(s)<.1?0:s}function clamp$1(f,s,d){return Math.min(Math.max(f,s),d)}class Camera{constructor(s={}){this.cameraState={view:identity$7(new Float32Array(16)),projection:identity$7(new Float32Array(16)),center:s.center||[0,0,0],theta:s.theta||0,phi:s.phi||0,distance:Math.log(s.distance||1e3),eye:new Float32Array(3),up:new Float32Array(s.up||[0,1,0])},this.right=new Float32Array([1,0,0]),this.front=new Float32Array([0,0,1]),this.minDistance=Math.log("minDistance"in s?s.minDistance:.5),this.maxDistance=Math.log("maxDistance"in s?s.maxDistance:1e14),this.dtheta=0,this.dphi=0,this.ddistance=0,this.updateCamera()}mouseChange(s,d){const _=Math.max(this.cameraState.distance,.5);this.dtheta+=_*s,this.dphi+=_*d,this.updateCamera()}getProjection(){return{projection:this.cameraState.projection,view:this.cameraState.view,distance:this.cameraState.distance,eye:this.cameraState.eye}}mouseWheel(s,d){this.ddistance+=d/window.innerHeight,this.updateCamera()}updateCamera(){const s=this.cameraState.center,d=this.cameraState.eye,_=this.cameraState.up;this.cameraState.theta+=this.dtheta,this.cameraState.phi=clamp$1(this.cameraState.phi+this.dphi,-Math.PI/2,Math.PI/2),this.cameraState.distance=clamp$1(this.cameraState.distance+this.ddistance,this.minDistance,this.maxDistance),this.dtheta=damp(this.dtheta),this.dphi=damp(this.dphi),this.ddistance=damp(this.ddistance);const S=this.cameraState.theta,T=this.cameraState.phi,F=Math.exp(this.cameraState.distance),M=F*Math.sin(S)*Math.cos(T),P=F*Math.cos(S)*Math.cos(T),H=F*Math.sin(T);for(let J=0;J<3;++J)d[J]=s[J]+M*this.front[J]+P*this.right[J]+H*_[J];lookAt(this.cameraState.view,d,s,_)}}class WGL2DI{constructor(s,d){d||(d={}),this.config=d,d.offset||(d.offset=[0,0,0,0]),this.mode=d.mode||"2d",this.movingImage=0,this.__doc__=document,this.config.brush=this.config.brush||"default",this.draw_options=d.draw_options?d.draw_options:{depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}},this.regl=null,this.pickbuffer=null,this.hideOnFilter=!0,this.pointOpacity=.8,this.pointRadius=10,this.isFiltered=!1,this.x_scale=1,this.y_scale=1,this.offset=[0,0],typeof s=="string"?this.div_container=document.getElementById(s):this.div_container=s,this._setUpDocument(d.width,d.height),this.handlers={object_clicked:{},object_over:{},object_out:{},brush_stopped:{},zoom_stopped:{},panning_stopped:{},pan_or_zoom:{}},this.draw_labels=!1,this.object_types=[],this.pointScale=0,this.circle_properties={x_pos:1,y_pos:1,color:1,pick_color:1,localFilter:1,globalFilter:1},this.circles={};for(const _ in this.circle_properties)this.circles[_]=[];this.circles.count=0,this.object_types.push({data:this.circles,properties:this.circle_properties,vertices:1,primitive:"points"}),this.line_properties={position:2,color:2,opacity:2},this.lines={};for(const _ in this.line_properties)this.lines[_]=[];this.lines.count=0,this.object_types.push({data:this.lines,properties:this.line_properties,vertices:2,primitive:"lines"}),this.image_properties={position:2,color:2,opacity:2},this.images={};for(const _ in this.image_properties)this.images[_]=[];this.images.count=0,this.images.props={x_y:[],w_h:[],text:[]},this.object_types.push({data:this.images,properties:this.image_properties,vertices:6,primitive:"triangles"}),this.mode==="3d"&&(this.circle_properties.z_pos=1,this.camera=new Camera({center:d.cameraCenter,distance:d.cameraDistance||500,theta:.75,phi:.5}),this.axisScales=[1,1,1]),this.square_properties={x_pos:1,y_pos:1,color:1,pick_color:1,localFilter:1,globalFilter:1},this.squares={};for(const _ in this.square_properties)this.squares[_]=[];this.squares.count=0,this.object_types.push({data:this.squares,properties:this.square_properties,vertices:1,primitive:"points"}),this.rectangle_properties={position:6,color:6,opacity:6},this.rects={};for(const _ in this.rectangle_properties)this.rects[_]=[];this.rects.count=0,this.object_types.push({data:this.rects,properties:this.rectangle_properties,vertices:6,primitive:"triangles"}),this.mouse_position=null,this.object_clicked=null,this.dragging=!1,this.object_mouse_over=null,this.zoom_amount=0,this.draw_order=this.mode==="3d"?[2,0,1,3,4]:[2,0,1,3,4],regl({onDone:(_,S)=>{this.regl=S,S._refresh(),this.pickbuffer=S.framebuffer({colorFormat:"rgba",height:this.height,width:this.width}),this._initDrawMethods(),this.mode==="3d"&&(this.object_types[0].method=this.__draw3DCircles,this.object_types[1].method=this.__draw3DLines),this._addHandlers()},canvas:this.canvas,attributes:{antialias:!1,preserveDrawingBuffer:!0,willReadFrequently:!0}})}setBackGroundColor(s){s=s||"",this.div_container.style.background=s}setCameraProperty(s,d){this.camera.cameraState[s]=d,this.camera.updateCamera()}_setUpDocument(s,d){if(this.config.brush&&(this.div_container.style.cursor="crosshair"),d)this.height=d,this.width=s,this.div_container.style.height=`${d}px`,this.div_container.style.width=`${s}px`;else{const S=this.div_container.getBoundingClientRect();this.height=d=Math.round(S.height),this.width=s=Math.round(S.width)}const _={height:d,width:s,styles:{position:"absolute",left:"0px",top:"0px"}};this.canvas=createEl("canvas",_),this.label_canvas=createEl("canvas",_),this.label_context=this.label_canvas.getContext("2d"),this.div_container.append(this.canvas),this.div_container.append(this.label_canvas)}colorPoints(s){const d=this.circles.count,_=this.circles.color;for(let S=0;S<d;S++){const T=s(S),F=S*3;_[F]=T[0],_[F+1]=T[1],_[F+2]=T[2]}if(this.highlightPoints){const S=this.highlightPoints;for(let T=0;T<S.length;T++){const F=S.indexes[T]*3,M=T*3;S.color[M]=this.circles.color[F],S.color[M+1]=this.circles.color[F+1],S.color[M+2]=this.circles.color[F+2]}}}remove(){this.pickbuffer.destroy(),this.regl.destroy(),this.canvas.remove(),this.label_canvas.remove()}setSize(s,d,_=null){if(this.height===d&&this.width===s)return;if(s=Math.round(s),d=Math.round(d),_){const T=_(s,d);this.x_scale=T[0]||this.x_scale,this.y_scale=T[1]||thisy_scale}else{const T=s/this.width,F=d/this.height;this.x_scale=this.x_scale*T,this.y_scale=this.y_scale*F}this.height=d,this.width=s,this.div_container.style.height=`${d}px`,this.div_container.style.width=`${s}px`,this.canvas.setAttribute("height",d),this.canvas.setAttribute("width",s),this.label_canvas.setAttribute("height",d),this.label_canvas.setAttribute("width",s);try{this.pickbuffer.destroy()}catch(T){console.error(`caught exception '${T}' when destroying buffer... suggest re-writing app in Rust.`)}this.pickbuffer=this.regl.framebuffer({colorFormat:"rgba",height:d,width:s});const S=this.regl.frame(()=>{});setTimeout(()=>{this.refresh(),S.cancel()},200)}_getMousePosition(s){const d=this.canvas.getBoundingClientRect();return[s.clientX-d.left,s.clientY-d.top]}_getActualPosition(s){const d=s[0]/this.x_scale-this.offset[0],_=s[1]/this.y_scale-this.offset[1];return[d,_]}_getCanvasCoords(s){const d=(s[0]+this.offset[0])*this.x_scale,_=(s[1]+this.offset[1])*this.y_scale;return[d,_]}getRange(){const s=this._getActualPosition([0,0]),d=this._getActualPosition([this.width,this.height]);return{x_range:[s[0],d[0]],y_range:[s[1],d[1]],offset:[this.offset[0],this.offset[1]],scale:[this.x_scale,this.y_scale]}}setHighlightPoints(s){if(s==null){this.highlightPoints=null;return}const d={x_pos:[],y_pos:[],color:[],length:s.length,indexes:s};this.mode==="3d"&&(d.z_pos=[]);for(const _ of s){d.x_pos.push(this.circles.x_pos[_]),d.y_pos.push(this.circles.y_pos[_]),this.mode==="3d"&&d.z_pos.push(this.circles.z_pos[_]);const S=_*3;d.color.push(this.circles.color[S]),d.color.push(this.circles.color[S+1]),d.color.push(this.circles.color[S+2])}this.highlightPoints=d}setPointRadius(s){(!s||Number.isNaN(s))&&(s=0),this.pointRadius=s}setFilter(s){this.isFiltered=s}setHideOnFilter(s){this.hideOnFilter=s}setPointOpacity(s){s=s>1?1:s,s=s<0?0:s,this.pointOpacity=s}getPointOpacity(){return this.pointOpacity}getPointRadius(){return this.pointRadius}addLine(s,d,_=[0,0,0],S=1){return this.lines.position=this.lines.position.concat(s,d),this.lines.color=this.lines.color.concat(_,_),this.lines.opacity=this.lines.opacity.concat([S,S]),this.lines.count++,this.lines.count-1}removeAllLines(){this.lines.position=[],this.lines.color=[],this.lines.opacity=[],this.lines.count=0}removeAllRectangles(){this.rects.position=[],this.rects.color=[],this.rects.opacity=[],this.rects.count=0}addRectangle(s,d,_,S=[0,0,0],T=1){this.rects.position.push(s),this.rects.position.push([s[0],s[1]+_]),this.rects.position.push([s[0]+d,s[1]+_]),this.rects.position.push([s[0]+d,s[1]+_]),this.rects.position.push([s[0]+d,s[1]]),this.rects.position.push([s[0],s[1]]);for(let M=0;M<6;M++)this.rects.opacity.push(T);const F=[S[0],S[1],S[2]];for(let M=0;M<6;M++)this.rects.color.push(F);return this.rects.count++,this.rects.count-1}changeImage(s,d,_){this.images.props.text[_]=this.regl.texture({data:s,min:"linear"}),this.resizeImage([d.width,d.height],_),this.setImagePosition(d.position[0],d.position[1],_)}changeImageOpacity(s,d){const _=s*6,S=_+6;for(let T=_;T<S;T++)this.images.opacity[T]=d}moveImage(s,d){const _=this.movingImage*6,S=_+6;for(let F=_;F<S;F++){const M=this.images.position[F];M[0]+=s,M[1]+=d}const T=this.images.props.x_y[this.movingImage];T[0]+=s,T[1]+=d}setImagePosition(s,d,_){const S=this.images.position,T=_*6,F=this.images.props.w_h[_][0],M=this.images.props.w_h[_][1];d=-d-M,this.images.props.x_y[_]=[s,d],S[T]=[s,d],S[T+1]=[s,d+M],S[T+2]=[s+F,d+M],S[T+3]=[s+F,d+M],S[T+4]=[s+F,d],S[T+5]=[s,d]}getImageDetails(s){const d=this.images.props.w_h[s],_=this.images.props.x_y[s];return{width:d[0],height:d[1],position:[_[0],_[1]],index:s}}resizeImage(s,d){const _=this.images.props.w_h[d],S=this.images.props.x_y[d];let T,F=null;Array.isArray(s)?(T=s[0],F=s[1],_[0]=T,_[1]=F):(T=_[0]*=s,F=_[1]*=s);const M=S[0],P=S[1];this.images.position[1]=[M,P+F],this.images.position[2]=[M+T,P+F],this.images.position[3]=[M+T,P+F],this.images.position[4]=[M+T,P]}addImage(s,d){const _=d,S=_.position[0];let T=-_.position[1];const F=_.height,M=_.width;T=T-F,this.images.position.length,this.images.position.push([S,T]),this.images.position.push([S,T+F]),this.images.position.push([S+M,T+F]),this.images.position.push([S+M,T+F]),this.images.position.push([S+M,T]),this.images.position.push([S,T]),this.image_position=[[-1,1],[-1,0],[0,0],[0,0],[0,1],[-1]];const P=_.opacity==null?1:_.opacity;for(let H=0;H<6;H++)this.images.color.push([1,1,1]),this.images.opacity.push(P);return this.images.count++,this.images.props.x_y.push([S,T]),this.images.props.w_h.push([M,F]),this.images.props.text.push(this.regl.texture({data:s,min:"linear"})),this.images.count-1}removeImages(){this.images.position=[],this.images.color=[],this.images.opacity=[],this.images.props.x_y=[],this.images.props.w_h=[],this.images.props.text=[],this.images.count=0}addSquares(s){this.squares.x_pos=s.x,this.squares.y_pos=s.y;const d=s.x.length;this.squares.localFilter=s.localFilter,this.squares.globalFilter=s.globalFilter,this.squares.pick_color=new Uint8Array(d*3),this.squares.color=s.colors;for(let _=0;_<d;_++){const S=_*3,T=this._getRGBFromIndex(_+1);this.squares.pick_color[S]=T[0],this.squares.pick_color[S+1]=T[1],this.squares.pick_color[S+2]=T[2]}this.squares.count=d}addCircles(s){this.circles.x_pos=s.x,this.circles.y_pos=s.y,this.mode==="3d"&&(this.circles.z_pos=s.z);const d=s.x.length;this.circles.localFilter=s.localFilter,this.circles.globalFilter=s.globalFilter,this.circles.pick_color=new Uint8Array(d*3),this.circles.color=new Uint8Array(d*3);for(let _=0;_<d;_++){const S=_*3,T=s.colorFunc(_)||[255,0,0];this.circles.color[S]=T[0],this.circles.color[S+1]=T[1],this.circles.color[S+2]=T[2];const F=this._getRGBFromIndex(_+1)||[255,0,0];this.circles.pick_color[S]=F[0],this.circles.pick_color[S+1]=F[1],this.circles.pick_color[S+2]=F[2]}this.circles.count=d}updateSize(s,d){this.circles.x_pos=d.x,this.circles.y_pos=d.y,this.mode==="3d"&&(this.circles.z_pos=d.z),this.circles.localFilter=d.localFilter,this.circles.globalFilter=d.globalFilter;const _=new Uint8Array(s*3),S=new Uint8Array(s*3);S.set(this.circles.color),_.set(this.circles.pick_color),this.circles.color=S,this.circles.pick_color=_;for(let T=this.circles.count;T<s;T++){const F=T*3,M=d.colorFunc(T);this.circles.color[F]=M[0],this.circles.color[F+1]=M[1],this.circles.color[F+2]=M[2];const P=this._getRGBFromIndex(T+1);this.circles.pick_color[F]=P[0],this.circles.pick_color[F+1]=P[1],this.circles.pick_color[F+2]=P[2]}this.circles.count=s}_getRGBFromIndex(s){const d=Math.floor(s/65536),_=s%65536,S=Math.floor(_/256);return[_%256,S,d]}_getIndexFromRGB(s){return s[2]*65536+s[1]*256+s[0]}_drawPickBuffer(){this.regl.clear({color:[0,0,0,0],depth:1,framebuffer:this.pickbuffer}),this._drawObjects(!0)}refresh(){this.regl.clear({color:[0,0,0,0],depth:1}),this._drawObjects(!1),this._drawPickBuffer(),this.label_context.font="30px Arial"}setCamera(s,d,_){if(this.mode!=="3d")return;const S=this.camera.cameraState;S.distance=Math.log(s),S.theta=d,S.phi=_,this.camera.updateCamera()}getCameraSettings(){if(this.mode!=="3d")return;const s=this.camera.cameraState;return{distance:Math.E**s.distance,theta:s.theta,phi:s.phi}}zoom(s){this.x_scale*=s,this.y_scale*=s,this._drawObjects(!1)}setFilterAction(s){s==="grey"?this.hideOnFilter=!1:this.hideOnFilter=!0}_drawObjects(s){let d=null;if(this.mode==="3d"){const _=this.camera.getProjection();d={cameraProjection:_.projection,cameraView:_.view,cameraDistance:_.distance,axisScales:this.axisScales,cameraEye:_.eye}}else d={x_scale:this.x_scale,y_scale:this.y_scale,offset:this.offset};d.point_scale=this.pointScale?(this.x_scale+this.y_scale)/2/this.pointScale:1,d.point_radius=this.pointRadius,d.is_filtered=this.isFiltered?1:0,d.point_opacity=this.pointOpacity,d.hide_on_filter=this.hideOnFilter?1:0;for(const _ of this.draw_order){const S=this.object_types[_];if(S.data.count){if(s){if(!S.properties.pick_color)continue;s=this.pickbuffer}else s=null;if(d.buffer=s,d.count=S.data.count*S.vertices,d.primitive=S.primitive,d.is_buffer=s?1:0,_===2){for(let T=0;T<S.data.count;T++){for(const F in S.properties)d[F]=S.data[F].slice(T*6,T*6+6);for(const F in this.images.props)d[F]=this.images.props[F][T];S.method(d)}continue}_===3&&(this.x_scale>=this.y_scale?(d.side_length=20*this.x_scale,d.bottom_clip=this.y_scale/this.x_scale,d.right_clip=1):(d.side_length=20*this.y_scale,d.right_clip=this.x_scale/this.y_scale,d.bottom_clip=1));for(const T in S.properties)if(s){if(T==="pick_color"){d.color=S.data[T];continue}if(T==="color")continue;d[T]=S.data[T]}else{if(T==="pick_color")continue;d[T]=S.data[T]}S.method(d)}}this.highlightPoints&&!s&&(d.x_pos=this.highlightPoints.x_pos,d.y_pos=this.highlightPoints.y_pos,d.color=this.highlightPoints.color,d.primitive="points",d.count=this.highlightPoints.length,this.mode==="3d"?(d.z_pos=this.highlightPoints.z_pos,this.__draw3DHighlights(d)):this.__drawHighlights(d))}getObjectsInRange(s,d,_,S){console.log(`${s},${d},${_},${S}`),s<0&&(_+=s,s=0),d<0&&(S+=d,d=0),s+_>this.width&&(_=this.width-s),d+S>this.height&&(S=this.height-d);const T=_*S*4,F=this.regl.read({x:s,y:this.height-d-S,width:_,height:S,framebuffer:this.pickbuffer}),M=new Set;for(let P=0;P<T;P+=4){const H=this._getIndexFromRGB([F[P],F[P+1],F[P+2]]);H!==null&&M.add(H-1)}return M}_getObjectAtPosition(s){if(!(s[1]<=0||s[0]<=0||s[0]>=this.width||s[1]>=this.height))try{const d=this.regl.read({x:s[0],y:this.height-s[1],width:1,height:1,framebuffer:this.pickbuffer});if(d[0]===0&&d[1]===0&&d[2]===0)return null;const _=this._getIndexFromRGB(d);return _>0?_-1:null}catch{return console.log(s),null}}addHandler(s,d,_){const S=this.handlers[s];if(!S)throw"Handler Not Supported";return _||(_=Object.keys(S).length),S[_]=d,_}removeHandler(s,d){const _=this.handlers[s];if(!_)throw"Handler Not Supported";_.name=void 0}_setUpBrush(s){const d=createEl("div",{classes:["wgl2di-brush"],styles:{top:`${s[1]}px`,left:`${s[0]}px`}},this.div_container);makeDraggable(d,{contain:!0,ondragstart:()=>this.brush_moving=!0,ondragend:()=>this._brushingStopped(),doc:this.__doc__}),this.brush={origin:s,div:d,resizing:!0}}_setUpPolyBrush(s){this.poly_brush={points:[s],active:!0};const d=this.label_context;d.strokeStyle=getComputedStyle(this.canvas).getPropertyValue("color"),d.beginPath(),d.moveTo(s[0],s[1])}_extendPolyBrush(s,d=15){var S;const _=this.label_context;if(this.poly_brush.points.length){const T=this.poly_brush.points[this.poly_brush.points.length-1],F=T[0]-s[0],M=T[1]-s[1];if(Math.sqrt(F**2+M**2)<d)return}_.lineTo(s[0],s[1]),_.stroke(),(S=this.poly_brush)==null||S.points.push(s)}_finishPolyBrush(){if(this.poly_brush.points.length<3){this.clearBrush();return}const s=this.label_context,d=this.poly_brush.points[0];s.lineTo(d[0],d[1]),s.stroke(),s.closePath(),s.fillStyle="lightgray",s.globalAlpha=.2,s.fill(),s.globalAlpha=1;const _=[];this.poly_brush.active=!1;for(const S of this.poly_brush.points)_.push(this._getActualPosition(S));for(const S in this.handlers.brush_stopped)setTimeout(()=>this.handlers.brush_stopped[S](_,!0),0)}clearBrush(){this.brush&&(this.brush.div.remove(),this.brush=null),this.poly_brush&&(this.label_context.clearRect(0,0,this.width,this.height),this.poly_brush=null)}_brushingStopped(){if(!this.brush)return;this.brush.resizing=!1;const s=this.brush.div,d=s.offsetTop,_=s.offsetLeft,S=s.offsetWidth,T=s.offsetHeight;if(S<2){this.clearBrush();return}if(this.mode==="3d"){const F=this.getObjectsInRange(_,d,S,T);for(const M in this.handlers.brush_stopped)this.handlers.brush_stopped[M](F)}else{const F=this._getActualPosition([_,d]),M=this._getActualPosition([_+S,d+T]),P={x_min:F[0],x_max:M[0],y_max:-F[1],y_min:-M[1]};for(const H in this.handlers.brush_stopped)this.handlers.brush_stopped[H](P)}}setGlobalFilter(s){this.circles.globalFilter=s}_finish(s){var d,_;if(this.config.brush&&(this.div_container.style.cursor="crosshair"),(d=this.brush)!=null&&d.resizing&&this._brushingStopped(),(_=this.poly_brush)!=null&&_.active&&this._finishPolyBrush(),this.object_clicked)this.object_clicked=null,this.refresh(!0);else{const S=this.getRange();this.loop&&(this.loop.cancel(),this.loop=null),S.imageMoved=this.imageMoved,this.imageMoved=null;for(const T in this.handlers.panning_stopped)this.handlers.panning_stopped[T](S)}this.dragging=!1,this.object_clicked=null,this.mouse_position=null}_addHandlers(){const s=_=>{var S;if(this.brush){if(this.brush.resizing){const T=this.brush.origin,F=this._getMousePosition(_),M=`${Math.round(T[0]<F[0]?T[0]:F[0])}px`,P=`${Math.round(T[1]<F[1]?T[1]:F[1])}px`,H=`${Math.abs(T[0]-F[0])}px`,J=`${Math.abs(T[1]-F[1])}px`;this.brush.div.style.top=P,this.brush.div.style.left=M,this.brush.div.style.width=H,this.brush.div.style.height=J;return}if(this.brush.moving){this.dragging=!1;return}}if((S=this.poly_brush)!=null&&S.active){const T=this._getMousePosition(_);this._extendPolyBrush(T)}if(this.mouse_position&&!this.dragging){const T=_.pageX-this.mouse_position[0],F=_.pageY-this.mouse_position[1];(Math.abs(T)>3||Math.abs(F)>3)&&(this.dragging=!0)}if(this.dragging){const T=_.pageX-this.mouse_position[0],F=_.pageY-this.mouse_position[1];if(this.mode==="3d")this.camera.mouseChange(T/this.width,F/this.height);else{const M=T/this.x_scale,P=F/this.y_scale;if(this.movingImage!=null&&_.ctrlKey&&this.images.count>0)this.moveImage(M,P),this.imageMoved=this.getImageDetails(this.movingImage);else if(this.offsets&&_.which===3)this.alterOffsets(M,P);else{this.config.lock_x_axis||(this.offset[0]+=M),this.offset[1]+=P;for(const H in this.handlers.pan_or_zoom)this.handlers.pan_or_zoom[H](this.offset,this.x_scale,this.y_scale)}}this.loop||(this.loop=this.regl.frame(()=>{this.regl.clear({color:[0,0,0,0],depth:1}),this._drawObjects(!1)})),this.mouse_position[1]=_.pageY,this.mouse_position[0]=_.pageX}};this.div_container.addEventListener("mousemove",_=>{if(this.dragging)return;const S=this._getMousePosition(_),T=this._getObjectAtPosition(S);if(T!=null&&this.object_mouse_over==null){for(const F in this.handlers.object_over)this.handlers.object_over[F](_,T);this.object_mouse_over=T}else if(T==null&&this.object_mouse_over){for(const F in this.handlers.object_out)this.handlers.object_out[F](_,this.object_mouse_over);this.object_mouse_over=null}else if(T!=null&&T!==this.object_mouse_over){for(const F in this.handlers.object_over)this.handlers.object_over[F](_,T);this.object_mouse_over=T}});const d=_=>{if(this.__doc__.removeEventListener("mousemove",s),this.__doc__.removeEventListener("mouseup",d),this._finish(_),!this.dragging&&!(this.brush||this.poly_brush)&&_.button===0){const S=this._getMousePosition(_),T=this._getObjectAtPosition(S),F=this._getActualPosition(S);if(T)for(const M in this.handlers.object_clicked)this.handlers.object_clicked[M](T,F)}};this.div_container.addEventListener("wheel",_=>{_.preventDefault();const S=this._getActualPosition(this._getMousePosition(_));let T=0;if(_.wheelDelta>0||_.detail<0?(this.zoom_amount+=.01,T=-30):(this.zoom_amount-=.01,T=30),this.mode==="3d")this.camera.mouseWheel(0,T);else if(this.movingImage!=null&&_.ctrlKey){this.resizeImage(1+this.zoom_amount,this.movingImage);const F=this._getActualPosition(this._getMousePosition(_));this.moveImage(F[0]-S[0],F[1]-S[1]),this.imageMoved=this.getImageDetails(this.movingImage)}else{this.config.lock_x_axis||(this.x_scale*=1+this.zoom_amount),this.config.lock_y_axis||(this.y_scale*=1+this.zoom_amount);const F=this._getActualPosition(this._getMousePosition(_));this.offset[0]+=F[0]-S[0],this.offset[1]+=F[1]-S[1];for(const M in this.handlers.pan_or_zoom)this.handlers.pan_or_zoom[M](this.offset,this.x_scale,this.y_scale)}this.loop||(this.label_context.clearRect(0,0,this.width,this.height),this.loop=this.regl.frame(()=>{this.regl.clear({color:[0,0,0,0],depth:1}),this._drawObjects(!1)})),clearTimeout(this._timer),this._timer=setTimeout(()=>{this.zoom_amount=0,this.loop.cancel(),this.loop=null,this._drawPickBuffer(!1),this.brush;const F=this.getRange();F.imageMoved=this.imageMoved,this.imageMoved=null;for(const M in this.handlers.zoom_stopped)this.handlers.zoom_stopped[M](F);this.refresh()},350)},{passive:!1}),this.div_container.addEventListener("mousedown",_=>{this.__doc__.addEventListener("mousemove",s),this.__doc__.addEventListener("mouseup",d),_.which;const S=_.shiftKey||_.ctrlKey||_.which===2||_.which===3;if(this.config.brush&&!S||!this.config.brush&&S){const T=this._getMousePosition(_);if(this.config.brush==="default"){if(_.target.classList.contains("wgl2di-brush"))return;this.brush&&this.clearBrush();const M=this._getMousePosition(_);this._setUpBrush(M);return}if(this.config.brush==="poly"){this.poly_brush&&this.clearBrush(),this._setUpPolyBrush(T);return}}_.otherKey&&(this.div_container.style.cursor="move"),this._getMousePosition(_),this.mouse_position=[_.pageX,_.pageY],this.clearBrush(),_.preventDefault()})}_initDrawMethods(){this.__drawCircles=this.regl({depth:this.draw_options.depth,blend:this.draw_options.blend,frag:`precision mediump float;
			varying vec3 fragColor;
			varying float op;
			varying float has_border;
			varying float grey_out;
			uniform float is_buffer;
			
			void main(){
			
				vec2 cxy = 2.0 * gl_PointCoord - 1.0;
                
				float r = dot(cxy, cxy);
				if (r > 1.0) {
					discard;
				}
				else{					
					if(r>0.60 && has_border==-1.0 && is_buffer==0.0 && grey_out==0.0){
					    gl_FragColor=vec4(0.1,0.1,0.1,1.0);
					}
					else{
						if (grey_out==1.0 && is_buffer==0.0){
							gl_FragColor = vec4(0.2,0.2,0.2,0.4);
						}
						else{
							gl_FragColor = vec4(fragColor,is_buffer==1.0?1.0:op);
						}
						
					}
				}
				
			}`,vert:`attribute float x_pos;
            attribute float y_pos;
			attribute vec3 color;
			attribute float lFilter;
			attribute float gFilter;
			varying vec3 fragColor;
			varying float op;
			varying float has_border;
			varying float grey_out;
			uniform float x_scale;
			uniform float y_scale;
			uniform vec2 offset;
			uniform float stage_height;
			uniform float stage_width;
			uniform float point_radius;
			uniform float is_filtered;
			uniform float point_opacity;
			uniform float hide_on_filter;
			uniform float point_scale;
			
			vec2 normalizeCoords(float posX, float posY){
				float x = (posX+offset[0])*x_scale;
				float y = (posY+offset[1])*y_scale;
				return vec2(2.0 * ((x / stage_width) - 0.5),-(2.0 * ((y / stage_height) - 0.5)));
			}
	
			void main() {
				float dd = 0.0;
				grey_out=0.0;
				if (lFilter==2.0){
					return;
				}
			    if (gFilter>0.0 && gFilter != lFilter) {
					if(hide_on_filter==1.0){
						return;
					}
					else{
						grey_out=1.0;
					}
				}
				
			
				float r=point_radius;
			
				gl_PointSize = r*point_scale;
				vec3 c = vec3(255.0,255.0,255.0);
				if (color==c){
					op=0.1;
					fragColor=vec3(0.1,0.1,0.1);
				}
				else{
					op=point_opacity;
					fragColor = color/255.0;
				}
			
				
				
				has_border=lFilter-is_filtered;
			
				
				vec2 real_position = normalizeCoords(x_pos,-y_pos);
				gl_Position = vec4(real_position, 0.0, 1.0);
			}
			`,attributes:{x_pos:this.regl.prop("x_pos"),y_pos:this.regl.prop("y_pos"),color:this.regl.prop("color"),lFilter:this.regl.prop("localFilter"),gFilter:this.regl.prop("globalFilter")},uniforms:{x_scale:this.regl.prop("x_scale"),y_scale:this.regl.prop("y_scale"),stage_width:this.regl.context("viewportWidth"),stage_height:this.regl.context("viewportHeight"),offset:this.regl.prop("offset"),point_radius:this.regl.prop("point_radius"),point_opacity:this.regl.prop("point_opacity"),is_filtered:this.regl.prop("is_filtered"),is_buffer:this.regl.prop("is_buffer"),hide_on_filter:this.regl.prop("hide_on_filter"),point_scale:this.regl.prop("point_scale")},count:this.regl.prop("count"),primitive:this.regl.prop("primitive"),framebuffer:this.regl.prop("buffer")}),this.__drawHighlights=this.regl({depth:this.draw_options.depth,blend:this.draw_options.blend,frag:`precision highp float;
			varying vec3 fragColor;
			
			void main(){

				vec2 cxy = 2.0 * gl_PointCoord - 1.0;
                
				float r = dot(cxy, cxy);
				if (r > 1.0) {
					discard;
				}
				else{					
					if(r>0.50) {
					    gl_FragColor=vec4(0.1,0.1,0.1,1.0);
					}
					else{
						gl_FragColor = vec4(fragColor,1);
					}
				}	
			}`,vert:`attribute float x_pos;
            attribute float y_pos;
			attribute vec3 color;
			uniform float point_radius;
			
			varying vec3 fragColor;
		
			uniform float x_scale;
			uniform float y_scale;
			uniform vec2 offset;
			uniform float stage_height;
			uniform float stage_width;
			uniform float point_scale;
			
			vec2 normalizeCoords(float posX, float posY){
				float x = (posX+offset[0])*x_scale;
				float y = (posY+offset[1])*y_scale;
				return vec2(2.0 * ((x / stage_width) - 0.5),-(2.0 * ((y / stage_height) - 0.5)));
			}
	
			void main() {
			
				float pr = point_radius*point_scale;
				pr = pr<10.0?10.0:pr;
				gl_PointSize = pr;
				fragColor = color/255.0;
					
				vec2 real_position = normalizeCoords(x_pos,-y_pos);
				gl_Position = vec4(real_position, 0.0, 1.0);
			}
			`,attributes:{x_pos:this.regl.prop("x_pos"),y_pos:this.regl.prop("y_pos"),color:this.regl.prop("color")},uniforms:{x_scale:this.regl.prop("x_scale"),y_scale:this.regl.prop("y_scale"),stage_width:this.regl.context("viewportWidth"),stage_height:this.regl.context("viewportHeight"),offset:this.regl.prop("offset"),point_radius:this.regl.prop("point_radius"),point_scale:this.regl.prop("point_scale")},count:this.regl.prop("count"),primitive:this.regl.prop("primitive")}),this.object_types[0].method=this.__drawCircles,this.__drawLines=this.regl({frag:`precision highp float;
						varying vec3 fragColor;
						void main () {
							 gl_FragColor = vec4(fragColor,1);
						}`,vert:`
						attribute vec2 position;
						attribute vec3 color;
						attribute float opacity;
						uniform float x_scale;
						uniform float y_scale;
						uniform vec2 offset;
						uniform float stage_height;
						uniform float stage_width;
						varying vec3 fragColor;
						//varying float op;
						vec2 normalizeCoords(vec2 position){	    
							float x = (position[0]+offset[0])*x_scale;
							float y = (position[1]+offset[1])*y_scale;
				            return vec2(2.0 * ((x / stage_width) - 0.5),-(2.0 * ((y / stage_height) - 0.5)));
						}
						void main () {
							if (opacity==0.0){
								return;
							}
							fragColor=color/255.0;
							vec2 norm_pos =normalizeCoords(position);
							gl_Position = vec4(norm_pos, 0.0, 1.0);
						}`,attributes:{position:this.regl.prop("position"),color:this.regl.prop("color"),opacity:this.regl.prop("opacity")},uniforms:{x_scale:this.regl.prop("x_scale"),y_scale:this.regl.prop("y_scale"),stage_height:this.regl.context("viewportHeight"),stage_width:this.regl.context("viewportWidth"),offset:this.regl.prop("offset")},primitive:this.regl.prop("primitive"),count:this.regl.prop("count")}),this.object_types[1].method=this.__drawLines,this.object_types[4].method=this.__drawLines,this.__drawImages=this.regl({frag:`
				precision mediump float;
				uniform sampler2D text;
				varying vec2 uv;
				varying vec3 fragColor;
				varying float op;
				void main () {
					gl_FragColor = vec4(fragColor,op)*texture2D(text, uv);							
				}`,vert:`
				precision mediump float;

				attribute vec2 position;
				attribute vec3 color;
				attribute float opacity;

				uniform vec2 x_y;
				uniform vec2 w_h;
				uniform float stage_height;
				uniform float stage_width;
				uniform float x_scale;
				uniform float y_scale;
				uniform vec2 offset;

				varying vec2 uv;
				varying vec3 fragColor;
				varying float op;
		
				
				vec2 normalizeCoords(vec2 pos){
					float x = (pos[0]+offset[0])*x_scale;
					float y = (pos[1]+offset[1])*y_scale;
					return vec2(2.0 * ((x / stage_width) - 0.5),-(2.0 * ((y / stage_height) - 0.5)));
				}

				void main () {
					if (opacity==0.0){
						return;
					}
					op=opacity;
					
					vec2 new_pos=normalizeCoords(position);
					fragColor = color;
				
					float x_factor = 1.0/(((w_h[0]*x_scale)/stage_width)*2.0);
					float y_factor = 1.0/(((w_h[1]*y_scale)/stage_height)*2.0);
					

					float x_offset=(((x_y[0]+offset[0])*x_scale)/stage_width)*2.0*x_factor;
					float y_offset=(((x_y[1]+offset[1])*y_scale)/stage_height)*2.0*y_factor;
					uv = vec2((new_pos[0]*x_factor)+x_factor-x_offset,-(new_pos[1]*y_factor)+y_factor-y_offset);
					gl_Position = vec4(new_pos, 0.0, 1.0);

				}`,attributes:{position:this.regl.prop("position"),color:this.regl.prop("color"),opacity:this.regl.prop("opacity")},uniforms:{stage_height:this.regl.context("viewportHeight"),stage_width:this.regl.context("viewportWidth"),w_h:this.regl.prop("w_h"),x_y:this.regl.prop("x_y"),text:this.regl.prop("text"),x_scale:this.regl.prop("x_scale"),y_scale:this.regl.prop("y_scale"),offset:this.regl.prop("offset")},count:this.regl.prop("count"),depth:this.draw_options.depth,blend:this.draw_options.blend}),this.object_types[2].method=this.__drawImages,this.__drawSquares=this.regl({frag:`
				precision highp float;
				varying vec3 fragColor;
				varying float r_clip;
				varying float b_clip;
				uniform int is_buffer;
				void main(){
					if (gl_PointCoord[1]<1.0-b_clip){
						discard;
					}
					if (gl_PointCoord[0]> r_clip){
						discard;
					}				
					gl_FragColor = vec4(fragColor,1);					
				}
				`,vert:` 
				attribute float x_pos;
				attribute float y_pos;			
				attribute vec3 color;
			
				varying float r_clip;
				varying float b_clip;
				varying vec3 fragColor;

				uniform float x_scale;
				uniform float y_scale;
				uniform vec2 offset;
				uniform float stage_height;
				uniform float stage_width;
				uniform float right_clip;
				uniform float bottom_clip;
				uniform float side_length;
				
				vec2 normalizeCoords(float posX,float posY){
					float x = (posX+offset[0])*x_scale;
					float y = (posY+offset[1])*y_scale;
					return vec2(2.0 * ((x / stage_width) - 0.5),-(2.0 * ((y / stage_height) - 0.5)));
				}
				void main() {
					gl_PointSize = side_length;
					fragColor = color/255.0;
					r_clip=right_clip;
					b_clip= bottom_clip;
					float y = y_pos;
					float x = x_pos;
					if (bottom_clip!=1.0){
						y-=10.0*(1.0/b_clip)-10.0;
					}
					if (r_clip!=1.0){
						x+=10.0*(1.0/r_clip)-10.0;
					}

					vec2 real_position = normalizeCoords(x,y);
				
					gl_Position = vec4(real_position, 0.0, 1.0);
				}
			`,attributes:{x_pos:this.regl.prop("x_pos"),y_pos:this.regl.prop("y_pos"),color:this.regl.prop("color")},uniforms:{x_scale:this.regl.prop("x_scale"),y_scale:this.regl.prop("y_scale"),stage_height:this.regl.context("viewportHeight"),stage_width:this.regl.context("viewportWidth"),offset:this.regl.prop("offset"),is_buffer:this.regl.prop("is_buffer"),right_clip:this.regl.prop("right_clip"),bottom_clip:this.regl.prop("bottom_clip"),side_length:this.regl.prop("side_length")},count:this.regl.prop("count"),primitive:this.regl.prop("primitive"),framebuffer:this.regl.prop("buffer")}),this.object_types[3].method=this.__drawSquares,this.__draw3DCircles=this.regl({frag:`
            precision highp float;
            varying vec3 fragColor;
			varying float op;
			varying float has_border;
			uniform float is_buffer;
			varying float grey_out;
            void main () {
			  float r = length(gl_PointCoord.xy - 0.4) ;
              if (r> 0.4) {
                discard;
              }
			  else{
				if(r>0.3 && has_border==-1.0 && is_buffer==0.0 && grey_out==0.0){
					gl_FragColor=vec4(0.1,0.1,0.1,1.0);
				}
				else{
					if (grey_out==1.0 && is_buffer==0.0){
						gl_FragColor = vec4(0.2,0.2,0.2,0.4);
					}
					else{
						gl_FragColor = vec4(fragColor,is_buffer==1.0?1.0:op);
					}
					
				}

			  }
             
            }
            `,vert:`
            precision highp float;

            attribute float x_pos;
            attribute float y_pos;
            attribute float z_pos;
            attribute vec3 color;
            attribute float lFilter;
            attribute float gFilter;
			
			uniform float time;
            uniform float cdistance;
            uniform mat4 view, projection;
			uniform vec3 eye;
			uniform float point_radius;
			uniform float point_opacity;
			uniform float is_buffer;
			uniform float is_filtered;
			uniform float hide_on_filter;
			uniform vec3 axis_scales;


            varying vec3 fragColor;
			varying float op;
			varying float has_border;
			varying float grey_out;

            void main () {
				grey_out=0.0; 
			    if (gFilter>0.0 && gFilter != lFilter) {
					if(hide_on_filter==1.0){
						return;
					}
					else{
						grey_out=1.0;
					}
				}
                vec3 position = vec3(-x_pos *axis_scales.x,y_pos*axis_scales.y,-z_pos*axis_scales.z);
                fragColor=color/255.0;
				op = is_buffer==1.0?1.0:point_opacity;
				has_border=lFilter-is_filtered;
               
				gl_PointSize = point_radius; //(distance(eye, position.xyz) /30.0);
                gl_Position = projection * view * vec4(2.0 * position, 1.0);
            }
            `,attributes:{x_pos:this.regl.prop("x_pos"),y_pos:this.regl.prop("y_pos"),z_pos:this.regl.prop("z_pos"),color:this.regl.prop("color"),lFilter:this.regl.prop("localFilter"),gFilter:this.regl.prop("globalFilter")},uniforms:{point_radius:this.regl.prop("point_radius"),point_opacity:this.regl.prop("point_opacity"),is_buffer:this.regl.prop("is_buffer"),view:this.regl.prop("cameraView"),cdistance:this.regl.prop("cameraDistance"),eye:this.regl.prop("cameraEye"),is_filtered:this.regl.prop("is_filtered"),hide_on_filter:this.regl.prop("hide_on_filter"),axis_scales:this.regl.prop("axisScales"),projection:(s,d)=>perspective(d.cameraProjection,Math.PI/4,s.viewportWidth/s.viewportHeight,1,1e5)},count:this.regl.prop("count"),framebuffer:this.regl.prop("buffer"),blend:this.draw_options.blend,primitive:"points"}),this.__draw3DHighlights=this.regl({frag:`
            precision mediump float;
            varying vec3 fragColor;
		
            void main () {
			  float r = length(gl_PointCoord.xy - 0.4) ;
              if (r> 0.4) {
                discard;
              }
			  else{
				if(r>0.3){
					gl_FragColor=vec4(0.1,0.1,0.1,1.0);
				}
				else{
					
						gl_FragColor = vec4(fragColor,1.0);
				}
					
			  }
             
            }
            `,vert:`
            precision mediump float;

            attribute float x_pos;
            attribute float y_pos;
            attribute float z_pos;
            attribute vec3 color;
			
			uniform float time;
    
            uniform mat4 view, projection;
			uniform vec3 eye;
			uniform float point_radius;
			uniform vec3 axis_scales;
		


            varying vec3 fragColor;
		

            void main () {
			
                vec3 position = vec3(-x_pos*axis_scales.x,y_pos*axis_scales.y,-z_pos*axis_scales.z);
                fragColor=color/255.0;
               
				gl_PointSize = point_radius*2.0; //(distance(eye, position.xyz) /30.0);
                gl_Position = projection * view * vec4(2.0 * position, 1.0);
            }
            `,attributes:{x_pos:this.regl.prop("x_pos"),y_pos:this.regl.prop("y_pos"),z_pos:this.regl.prop("z_pos"),color:this.regl.prop("color")},uniforms:{point_radius:this.regl.prop("point_radius"),view:this.regl.prop("cameraView"),cdistance:this.regl.prop("cameraDistance"),eye:this.regl.prop("cameraEye"),axis_scales:this.regl.prop("axisScales"),projection:(s,d)=>perspective(d.cameraProjection,Math.PI/4,s.viewportWidth/s.viewportHeight,1,1e5)},count:this.regl.prop("count"),blend:this.draw_options.blend,primitive:"points"}),this.__draw3DLines=this.regl({frag:` precision highp float;
                    varying vec3 fragColor;
                    void main () {
                         gl_FragColor = vec4(fragColor,1);
                    }
`,vert:`
                    attribute vec3 position;
                    attribute vec3 color;
                    uniform mat4 view, projection;
					uniform vec3 axis_scales;
    
                    varying vec3 fragColor;
                  
                    
                    void main () {
                     
                        fragColor=color;
                        gl_Position = projection * view * vec4(2.0 * position*axis_scales*vec3(-1.0,1.0,-1.0), 1.0);
                       
                       
                    }`,attributes:{position:this.regl.prop("position"),color:this.regl.prop("color")},uniforms:{view:this.regl.prop("cameraView"),axis_scales:this.regl.prop("axisScales"),projection:(s,d)=>perspective(d.cameraProjection,Math.PI/4,s.viewportWidth/s.viewportHeight,.01,1e5)},primitive:this.regl.prop("primitive"),framebuffer:this.regl.prop("buffer"),count:this.regl.prop("count"),depth:{enable:!1}})}}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(f){var s=f+="",d=s.indexOf(":");return d>=0&&(s=f.slice(0,d))!=="xmlns"&&(f=f.slice(d+1)),namespaces.hasOwnProperty(s)?{space:namespaces[s],local:f}:f}function creatorInherit(f){return function(){var s=this.ownerDocument,d=this.namespaceURI;return d===xhtml&&s.documentElement.namespaceURI===xhtml?s.createElement(f):s.createElementNS(d,f)}}function creatorFixed(f){return function(){return this.ownerDocument.createElementNS(f.space,f.local)}}function creator(f){var s=namespace(f);return(s.local?creatorFixed:creatorInherit)(s)}function none(){}function selector(f){return f==null?none:function(){return this.querySelector(f)}}function selection_select(f){typeof f!="function"&&(f=selector(f));for(var s=this._groups,d=s.length,_=new Array(d),S=0;S<d;++S)for(var T=s[S],F=T.length,M=_[S]=new Array(F),P,H,J=0;J<F;++J)(P=T[J])&&(H=f.call(P,P.__data__,J,T))&&("__data__"in P&&(H.__data__=P.__data__),M[J]=H);return new Selection$1(_,this._parents)}function array$1(f){return f==null?[]:Array.isArray(f)?f:Array.from(f)}function empty$1(){return[]}function selectorAll(f){return f==null?empty$1:function(){return this.querySelectorAll(f)}}function arrayAll(f){return function(){return array$1(f.apply(this,arguments))}}function selection_selectAll(f){typeof f=="function"?f=arrayAll(f):f=selectorAll(f);for(var s=this._groups,d=s.length,_=[],S=[],T=0;T<d;++T)for(var F=s[T],M=F.length,P,H=0;H<M;++H)(P=F[H])&&(_.push(f.call(P,P.__data__,H,F)),S.push(P));return new Selection$1(_,S)}function matcher(f){return function(){return this.matches(f)}}function childMatcher(f){return function(s){return s.matches(f)}}var find$2=Array.prototype.find;function childFind(f){return function(){return find$2.call(this.children,f)}}function childFirst(){return this.firstElementChild}function selection_selectChild(f){return this.select(f==null?childFirst:childFind(typeof f=="function"?f:childMatcher(f)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(f){return function(){return filter.call(this.children,f)}}function selection_selectChildren(f){return this.selectAll(f==null?children:childrenFilter(typeof f=="function"?f:childMatcher(f)))}function selection_filter(f){typeof f!="function"&&(f=matcher(f));for(var s=this._groups,d=s.length,_=new Array(d),S=0;S<d;++S)for(var T=s[S],F=T.length,M=_[S]=[],P,H=0;H<F;++H)(P=T[H])&&f.call(P,P.__data__,H,T)&&M.push(P);return new Selection$1(_,this._parents)}function sparse(f){return new Array(f.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(f,s){this.ownerDocument=f.ownerDocument,this.namespaceURI=f.namespaceURI,this._next=null,this._parent=f,this.__data__=s}EnterNode.prototype={constructor:EnterNode,appendChild:function(f){return this._parent.insertBefore(f,this._next)},insertBefore:function(f,s){return this._parent.insertBefore(f,s)},querySelector:function(f){return this._parent.querySelector(f)},querySelectorAll:function(f){return this._parent.querySelectorAll(f)}};function constant$7(f){return function(){return f}}function bindIndex(f,s,d,_,S,T){for(var F=0,M,P=s.length,H=T.length;F<H;++F)(M=s[F])?(M.__data__=T[F],_[F]=M):d[F]=new EnterNode(f,T[F]);for(;F<P;++F)(M=s[F])&&(S[F]=M)}function bindKey(f,s,d,_,S,T,F){var M,P,H=new Map,J=s.length,K=T.length,z=new Array(J),oe;for(M=0;M<J;++M)(P=s[M])&&(z[M]=oe=F.call(P,P.__data__,M,s)+"",H.has(oe)?S[M]=P:H.set(oe,P));for(M=0;M<K;++M)oe=F.call(f,T[M],M,T)+"",(P=H.get(oe))?(_[M]=P,P.__data__=T[M],H.delete(oe)):d[M]=new EnterNode(f,T[M]);for(M=0;M<J;++M)(P=s[M])&&H.get(z[M])===P&&(S[M]=P)}function datum(f){return f.__data__}function selection_data(f,s){if(!arguments.length)return Array.from(this,datum);var d=s?bindKey:bindIndex,_=this._parents,S=this._groups;typeof f!="function"&&(f=constant$7(f));for(var T=S.length,F=new Array(T),M=new Array(T),P=new Array(T),H=0;H<T;++H){var J=_[H],K=S[H],z=K.length,oe=arraylike(f.call(J,J&&J.__data__,H,_)),se=oe.length,ae=M[H]=new Array(se),ge=F[H]=new Array(se),pe=P[H]=new Array(z);d(J,K,ae,ge,pe,oe,s);for(var he=0,ve=0,be,Re;he<se;++he)if(be=ae[he]){for(he>=ve&&(ve=he+1);!(Re=ge[ve])&&++ve<se;);be._next=Re||null}}return F=new Selection$1(F,_),F._enter=M,F._exit=P,F}function arraylike(f){return typeof f=="object"&&"length"in f?f:Array.from(f)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(f,s,d){var _=this.enter(),S=this,T=this.exit();return typeof f=="function"?(_=f(_),_&&(_=_.selection())):_=_.append(f+""),s!=null&&(S=s(S),S&&(S=S.selection())),d==null?T.remove():d(T),_&&S?_.merge(S).order():S}function selection_merge(f){for(var s=f.selection?f.selection():f,d=this._groups,_=s._groups,S=d.length,T=_.length,F=Math.min(S,T),M=new Array(S),P=0;P<F;++P)for(var H=d[P],J=_[P],K=H.length,z=M[P]=new Array(K),oe,se=0;se<K;++se)(oe=H[se]||J[se])&&(z[se]=oe);for(;P<S;++P)M[P]=d[P];return new Selection$1(M,this._parents)}function selection_order(){for(var f=this._groups,s=-1,d=f.length;++s<d;)for(var _=f[s],S=_.length-1,T=_[S],F;--S>=0;)(F=_[S])&&(T&&F.compareDocumentPosition(T)^4&&T.parentNode.insertBefore(F,T),T=F);return this}function selection_sort(f){f||(f=ascending$2);function s(K,z){return K&&z?f(K.__data__,z.__data__):!K-!z}for(var d=this._groups,_=d.length,S=new Array(_),T=0;T<_;++T){for(var F=d[T],M=F.length,P=S[T]=new Array(M),H,J=0;J<M;++J)(H=F[J])&&(P[J]=H);P.sort(s)}return new Selection$1(S,this._parents).order()}function ascending$2(f,s){return f<s?-1:f>s?1:f>=s?0:NaN}function selection_call(){var f=arguments[0];return arguments[0]=this,f.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var f=this._groups,s=0,d=f.length;s<d;++s)for(var _=f[s],S=0,T=_.length;S<T;++S){var F=_[S];if(F)return F}return null}function selection_size(){let f=0;for(const s of this)++f;return f}function selection_empty(){return!this.node()}function selection_each(f){for(var s=this._groups,d=0,_=s.length;d<_;++d)for(var S=s[d],T=0,F=S.length,M;T<F;++T)(M=S[T])&&f.call(M,M.__data__,T,S);return this}function attrRemove$1(f){return function(){this.removeAttribute(f)}}function attrRemoveNS$1(f){return function(){this.removeAttributeNS(f.space,f.local)}}function attrConstant$1(f,s){return function(){this.setAttribute(f,s)}}function attrConstantNS$1(f,s){return function(){this.setAttributeNS(f.space,f.local,s)}}function attrFunction$1(f,s){return function(){var d=s.apply(this,arguments);d==null?this.removeAttribute(f):this.setAttribute(f,d)}}function attrFunctionNS$1(f,s){return function(){var d=s.apply(this,arguments);d==null?this.removeAttributeNS(f.space,f.local):this.setAttributeNS(f.space,f.local,d)}}function selection_attr(f,s){var d=namespace(f);if(arguments.length<2){var _=this.node();return d.local?_.getAttributeNS(d.space,d.local):_.getAttribute(d)}return this.each((s==null?d.local?attrRemoveNS$1:attrRemove$1:typeof s=="function"?d.local?attrFunctionNS$1:attrFunction$1:d.local?attrConstantNS$1:attrConstant$1)(d,s))}function defaultView(f){return f.ownerDocument&&f.ownerDocument.defaultView||f.document&&f||f.defaultView}function styleRemove$1(f){return function(){this.style.removeProperty(f)}}function styleConstant$1(f,s,d){return function(){this.style.setProperty(f,s,d)}}function styleFunction$1(f,s,d){return function(){var _=s.apply(this,arguments);_==null?this.style.removeProperty(f):this.style.setProperty(f,_,d)}}function selection_style(f,s,d){return arguments.length>1?this.each((s==null?styleRemove$1:typeof s=="function"?styleFunction$1:styleConstant$1)(f,s,d??"")):styleValue(this.node(),f)}function styleValue(f,s){return f.style.getPropertyValue(s)||defaultView(f).getComputedStyle(f,null).getPropertyValue(s)}function propertyRemove(f){return function(){delete this[f]}}function propertyConstant(f,s){return function(){this[f]=s}}function propertyFunction(f,s){return function(){var d=s.apply(this,arguments);d==null?delete this[f]:this[f]=d}}function selection_property(f,s){return arguments.length>1?this.each((s==null?propertyRemove:typeof s=="function"?propertyFunction:propertyConstant)(f,s)):this.node()[f]}function classArray(f){return f.trim().split(/^|\s+/)}function classList(f){return f.classList||new ClassList(f)}function ClassList(f){this._node=f,this._names=classArray(f.getAttribute("class")||"")}ClassList.prototype={add:function(f){var s=this._names.indexOf(f);s<0&&(this._names.push(f),this._node.setAttribute("class",this._names.join(" ")))},remove:function(f){var s=this._names.indexOf(f);s>=0&&(this._names.splice(s,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(f){return this._names.indexOf(f)>=0}};function classedAdd(f,s){for(var d=classList(f),_=-1,S=s.length;++_<S;)d.add(s[_])}function classedRemove(f,s){for(var d=classList(f),_=-1,S=s.length;++_<S;)d.remove(s[_])}function classedTrue(f){return function(){classedAdd(this,f)}}function classedFalse(f){return function(){classedRemove(this,f)}}function classedFunction(f,s){return function(){(s.apply(this,arguments)?classedAdd:classedRemove)(this,f)}}function selection_classed(f,s){var d=classArray(f+"");if(arguments.length<2){for(var _=classList(this.node()),S=-1,T=d.length;++S<T;)if(!_.contains(d[S]))return!1;return!0}return this.each((typeof s=="function"?classedFunction:s?classedTrue:classedFalse)(d,s))}function textRemove(){this.textContent=""}function textConstant$1(f){return function(){this.textContent=f}}function textFunction$1(f){return function(){var s=f.apply(this,arguments);this.textContent=s??""}}function selection_text(f){return arguments.length?this.each(f==null?textRemove:(typeof f=="function"?textFunction$1:textConstant$1)(f)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(f){return function(){this.innerHTML=f}}function htmlFunction(f){return function(){var s=f.apply(this,arguments);this.innerHTML=s??""}}function selection_html(f){return arguments.length?this.each(f==null?htmlRemove:(typeof f=="function"?htmlFunction:htmlConstant)(f)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(f){var s=typeof f=="function"?f:creator(f);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}function constantNull(){return null}function selection_insert(f,s){var d=typeof f=="function"?f:creator(f),_=s==null?constantNull:typeof s=="function"?s:selector(s);return this.select(function(){return this.insertBefore(d.apply(this,arguments),_.apply(this,arguments)||null)})}function remove(){var f=this.parentNode;f&&f.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var f=this.cloneNode(!1),s=this.parentNode;return s?s.insertBefore(f,this.nextSibling):f}function selection_cloneDeep(){var f=this.cloneNode(!0),s=this.parentNode;return s?s.insertBefore(f,this.nextSibling):f}function selection_clone(f){return this.select(f?selection_cloneDeep:selection_cloneShallow)}function selection_datum(f){return arguments.length?this.property("__data__",f):this.node().__data__}function contextListener(f){return function(s){f.call(this,s,this.__data__)}}function parseTypenames$1(f){return f.trim().split(/^|\s+/).map(function(s){var d="",_=s.indexOf(".");return _>=0&&(d=s.slice(_+1),s=s.slice(0,_)),{type:s,name:d}})}function onRemove(f){return function(){var s=this.__on;if(s){for(var d=0,_=-1,S=s.length,T;d<S;++d)T=s[d],(!f.type||T.type===f.type)&&T.name===f.name?this.removeEventListener(T.type,T.listener,T.options):s[++_]=T;++_?s.length=_:delete this.__on}}}function onAdd(f,s,d){return function(){var _=this.__on,S,T=contextListener(s);if(_){for(var F=0,M=_.length;F<M;++F)if((S=_[F]).type===f.type&&S.name===f.name){this.removeEventListener(S.type,S.listener,S.options),this.addEventListener(S.type,S.listener=T,S.options=d),S.value=s;return}}this.addEventListener(f.type,T,d),S={type:f.type,name:f.name,value:s,listener:T,options:d},_?_.push(S):this.__on=[S]}}function selection_on(f,s,d){var _=parseTypenames$1(f+""),S,T=_.length,F;if(arguments.length<2){var M=this.node().__on;if(M){for(var P=0,H=M.length,J;P<H;++P)for(S=0,J=M[P];S<T;++S)if((F=_[S]).type===J.type&&F.name===J.name)return J.value}return}for(M=s?onAdd:onRemove,S=0;S<T;++S)this.each(M(_[S],s,d));return this}function dispatchEvent(f,s,d){var _=defaultView(f),S=_.CustomEvent;typeof S=="function"?S=new S(s,d):(S=_.document.createEvent("Event"),d?(S.initEvent(s,d.bubbles,d.cancelable),S.detail=d.detail):S.initEvent(s,!1,!1)),f.dispatchEvent(S)}function dispatchConstant(f,s){return function(){return dispatchEvent(this,f,s)}}function dispatchFunction(f,s){return function(){return dispatchEvent(this,f,s.apply(this,arguments))}}function selection_dispatch(f,s){return this.each((typeof s=="function"?dispatchFunction:dispatchConstant)(f,s))}function*selection_iterator(){for(var f=this._groups,s=0,d=f.length;s<d;++s)for(var _=f[s],S=0,T=_.length,F;S<T;++S)(F=_[S])&&(yield F)}var root$2=[null];function Selection$1(f,s){this._groups=f,this._parents=s}function selection(){return new Selection$1([[document.documentElement]],root$2)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(f){return typeof f=="string"?new Selection$1([[document.querySelector(f)]],[document.documentElement]):new Selection$1([[f]],root$2)}function sourceEvent(f){let s;for(;s=f.sourceEvent;)f=s;return f}function pointer(f,s){if(f=sourceEvent(f),s===void 0&&(s=f.currentTarget),s){var d=s.ownerSVGElement||s;if(d.createSVGPoint){var _=d.createSVGPoint();return _.x=f.clientX,_.y=f.clientY,_=_.matrixTransform(s.getScreenCTM().inverse()),[_.x,_.y]}if(s.getBoundingClientRect){var S=s.getBoundingClientRect();return[f.clientX-S.left-s.clientLeft,f.clientY-S.top-s.clientTop]}}return[f.pageX,f.pageY]}function ascending$1(f,s){return f==null||s==null?NaN:f<s?-1:f>s?1:f>=s?0:NaN}function descending$1(f,s){return f==null||s==null?NaN:s<f?-1:s>f?1:s>=f?0:NaN}function bisector$1(f){let s,d,_;f.length!==2?(s=ascending$1,d=(M,P)=>ascending$1(f(M),P),_=(M,P)=>f(M)-P):(s=f===ascending$1||f===descending$1?f:zero$1,d=f,_=f);function S(M,P,H=0,J=M.length){if(H<J){if(s(P,P)!==0)return J;do{const K=H+J>>>1;d(M[K],P)<0?H=K+1:J=K}while(H<J)}return H}function T(M,P,H=0,J=M.length){if(H<J){if(s(P,P)!==0)return J;do{const K=H+J>>>1;d(M[K],P)<=0?H=K+1:J=K}while(H<J)}return H}function F(M,P,H=0,J=M.length){const K=S(M,P,H,J-1);return K>H&&_(M[K-1],P)>-_(M[K],P)?K-1:K}return{left:S,center:F,right:T}}function zero$1(){return 0}function number$2(f){return f===null?NaN:+f}const ascendingBisect=bisector$1(ascending$1),bisectRight=ascendingBisect.right;bisector$1(number$2).center;let Adder$1=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(s){const d=this._partials;let _=0;for(let S=0;S<this._n&&S<32;S++){const T=d[S],F=s+T,M=Math.abs(s)<Math.abs(T)?s-(F-T):T-(F-s);M&&(d[_++]=M),s=F}return d[_]=s,this._n=_+1,this}valueOf(){const s=this._partials;let d=this._n,_,S,T,F=0;if(d>0){for(F=s[--d];d>0&&(_=F,S=s[--d],F=_+S,T=S-(F-_),!T););d>0&&(T<0&&s[d-1]<0||T>0&&s[d-1]>0)&&(S=T*2,_=F+S,S==_-F&&(F=_))}return F}};class InternMap extends Map{constructor(s,d=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:d}}),s!=null)for(const[_,S]of s)this.set(_,S)}get(s){return super.get(intern_get(this,s))}has(s){return super.has(intern_get(this,s))}set(s,d){return super.set(intern_set(this,s),d)}delete(s){return super.delete(intern_delete(this,s))}}function intern_get({_intern:f,_key:s},d){const _=s(d);return f.has(_)?f.get(_):d}function intern_set({_intern:f,_key:s},d){const _=s(d);return f.has(_)?f.get(_):(f.set(_,d),d)}function intern_delete({_intern:f,_key:s},d){const _=s(d);return f.has(_)&&(d=f.get(_),f.delete(_)),d}function keyof(f){return f!==null&&typeof f=="object"?f.valueOf():f}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(f,s,d){const _=(s-f)/Math.max(0,d),S=Math.floor(Math.log10(_)),T=_/Math.pow(10,S),F=T>=e10?10:T>=e5?5:T>=e2?2:1;let M,P,H;return S<0?(H=Math.pow(10,-S)/F,M=Math.round(f*H),P=Math.round(s*H),M/H<f&&++M,P/H>s&&--P,H=-H):(H=Math.pow(10,S)*F,M=Math.round(f/H),P=Math.round(s/H),M*H<f&&++M,P*H>s&&--P),P<M&&.5<=d&&d<2?tickSpec(f,s,d*2):[M,P,H]}function ticks(f,s,d){if(s=+s,f=+f,d=+d,!(d>0))return[];if(f===s)return[f];const _=s<f,[S,T,F]=_?tickSpec(s,f,d):tickSpec(f,s,d);if(!(T>=S))return[];const M=T-S+1,P=new Array(M);if(_)if(F<0)for(let H=0;H<M;++H)P[H]=(T-H)/-F;else for(let H=0;H<M;++H)P[H]=(T-H)*F;else if(F<0)for(let H=0;H<M;++H)P[H]=(S+H)/-F;else for(let H=0;H<M;++H)P[H]=(S+H)*F;return P}function tickIncrement(f,s,d){return s=+s,f=+f,d=+d,tickSpec(f,s,d)[2]}function tickStep(f,s,d){s=+s,f=+f,d=+d;const _=s<f,S=_?tickIncrement(s,f,d):tickIncrement(f,s,d);return(_?-1:1)*(S<0?1/-S:S)}function max$3(f,s){let d;if(s===void 0)for(const _ of f)_!=null&&(d<_||d===void 0&&_>=_)&&(d=_);else{let _=-1;for(let S of f)(S=s(S,++_,f))!=null&&(d<S||d===void 0&&S>=S)&&(d=S)}return d}function quantileSorted(f,s,d=number$2){if(!(!(_=f.length)||isNaN(s=+s))){if(s<=0||_<2)return+d(f[0],0,f);if(s>=1)return+d(f[_-1],_-1,f);var _,S=(_-1)*s,T=Math.floor(S),F=+d(f[T],T,f),M=+d(f[T+1],T+1,f);return F+(M-F)*(S-T)}}function range$1(f,s,d){f=+f,s=+s,d=(S=arguments.length)<2?(s=f,f=0,1):S<3?1:+d;for(var _=-1,S=Math.max(0,Math.ceil((s-f)/d))|0,T=new Array(S);++_<S;)T[_]=f+_*d;return T}function initRange(f,s){switch(arguments.length){case 0:break;case 1:this.range(f);break;default:this.range(s).domain(f);break}return this}const implicit=Symbol("implicit");function ordinal(){var f=new InternMap,s=[],d=[],_=implicit;function S(T){let F=f.get(T);if(F===void 0){if(_!==implicit)return _;f.set(T,F=s.push(T)-1)}return d[F%d.length]}return S.domain=function(T){if(!arguments.length)return s.slice();s=[],f=new InternMap;for(const F of T)f.has(F)||f.set(F,s.push(F)-1);return S},S.range=function(T){return arguments.length?(d=Array.from(T),S):d.slice()},S.unknown=function(T){return arguments.length?(_=T,S):_},S.copy=function(){return ordinal(s,d).unknown(_)},initRange.apply(S,arguments),S}function band(){var f=ordinal().unknown(void 0),s=f.domain,d=f.range,_=0,S=1,T,F,M=!1,P=0,H=0,J=.5;delete f.unknown;function K(){var z=s().length,oe=S<_,se=oe?S:_,ae=oe?_:S;T=(ae-se)/Math.max(1,z-P+H*2),M&&(T=Math.floor(T)),se+=(ae-se-T*(z-P))*J,F=T*(1-P),M&&(se=Math.round(se),F=Math.round(F));var ge=range$1(z).map(function(pe){return se+T*pe});return d(oe?ge.reverse():ge)}return f.domain=function(z){return arguments.length?(s(z),K()):s()},f.range=function(z){return arguments.length?([_,S]=z,_=+_,S=+S,K()):[_,S]},f.rangeRound=function(z){return[_,S]=z,_=+_,S=+S,M=!0,K()},f.bandwidth=function(){return F},f.step=function(){return T},f.round=function(z){return arguments.length?(M=!!z,K()):M},f.padding=function(z){return arguments.length?(P=Math.min(1,H=+z),K()):P},f.paddingInner=function(z){return arguments.length?(P=Math.min(1,z),K()):P},f.paddingOuter=function(z){return arguments.length?(H=+z,K()):H},f.align=function(z){return arguments.length?(J=Math.max(0,Math.min(1,z)),K()):J},f.copy=function(){return band(s(),[_,S]).round(M).paddingInner(P).paddingOuter(H).align(J)},initRange.apply(K(),arguments)}function define(f,s,d){f.prototype=s.prototype=d,d.constructor=f}function extend$1(f,s){var d=Object.create(f.prototype);for(var _ in s)d[_]=s[_];return d}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(f){return Object.assign(new this.constructor,this,f)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(f){var s,d;return f=(f+"").trim().toLowerCase(),(s=reHex.exec(f))?(d=s[1].length,s=parseInt(s[1],16),d===6?rgbn(s):d===3?new Rgb(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):d===8?rgba(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):d===4?rgba(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=reRgbInteger.exec(f))?new Rgb(s[1],s[2],s[3],1):(s=reRgbPercent.exec(f))?new Rgb(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=reRgbaInteger.exec(f))?rgba(s[1],s[2],s[3],s[4]):(s=reRgbaPercent.exec(f))?rgba(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=reHslPercent.exec(f))?hsla(s[1],s[2]/100,s[3]/100,1):(s=reHslaPercent.exec(f))?hsla(s[1],s[2]/100,s[3]/100,s[4]):named.hasOwnProperty(f)?rgbn(named[f]):f==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(f){return new Rgb(f>>16&255,f>>8&255,f&255,1)}function rgba(f,s,d,_){return _<=0&&(f=s=d=NaN),new Rgb(f,s,d,_)}function rgbConvert(f){return f instanceof Color||(f=color(f)),f?(f=f.rgb(),new Rgb(f.r,f.g,f.b,f.opacity)):new Rgb}function rgb$1(f,s,d,_){return arguments.length===1?rgbConvert(f):new Rgb(f,s,d,_??1)}function Rgb(f,s,d,_){this.r=+f,this.g=+s,this.b=+d,this.opacity=+_}define(Rgb,rgb$1,extend$1(Color,{brighter(f){return f=f==null?brighter:Math.pow(brighter,f),new Rgb(this.r*f,this.g*f,this.b*f,this.opacity)},darker(f){return f=f==null?darker:Math.pow(darker,f),new Rgb(this.r*f,this.g*f,this.b*f,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const f=clampa(this.opacity);return`${f===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${f===1?")":`, ${f})`}`}function clampa(f){return isNaN(f)?1:Math.max(0,Math.min(1,f))}function clampi(f){return Math.max(0,Math.min(255,Math.round(f)||0))}function hex(f){return f=clampi(f),(f<16?"0":"")+f.toString(16)}function hsla(f,s,d,_){return _<=0?f=s=d=NaN:d<=0||d>=1?f=s=NaN:s<=0&&(f=NaN),new Hsl(f,s,d,_)}function hslConvert(f){if(f instanceof Hsl)return new Hsl(f.h,f.s,f.l,f.opacity);if(f instanceof Color||(f=color(f)),!f)return new Hsl;if(f instanceof Hsl)return f;f=f.rgb();var s=f.r/255,d=f.g/255,_=f.b/255,S=Math.min(s,d,_),T=Math.max(s,d,_),F=NaN,M=T-S,P=(T+S)/2;return M?(s===T?F=(d-_)/M+(d<_)*6:d===T?F=(_-s)/M+2:F=(s-d)/M+4,M/=P<.5?T+S:2-T-S,F*=60):M=P>0&&P<1?0:F,new Hsl(F,M,P,f.opacity)}function hsl(f,s,d,_){return arguments.length===1?hslConvert(f):new Hsl(f,s,d,_??1)}function Hsl(f,s,d,_){this.h=+f,this.s=+s,this.l=+d,this.opacity=+_}define(Hsl,hsl,extend$1(Color,{brighter(f){return f=f==null?brighter:Math.pow(brighter,f),new Hsl(this.h,this.s,this.l*f,this.opacity)},darker(f){return f=f==null?darker:Math.pow(darker,f),new Hsl(this.h,this.s,this.l*f,this.opacity)},rgb(){var f=this.h%360+(this.h<0)*360,s=isNaN(f)||isNaN(this.s)?0:this.s,d=this.l,_=d+(d<.5?d:1-d)*s,S=2*d-_;return new Rgb(hsl2rgb(f>=240?f-240:f+120,S,_),hsl2rgb(f,S,_),hsl2rgb(f<120?f+240:f-120,S,_),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const f=clampa(this.opacity);return`${f===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${f===1?")":`, ${f})`}`}}));function clamph(f){return f=(f||0)%360,f<0?f+360:f}function clampt(f){return Math.max(0,Math.min(1,f||0))}function hsl2rgb(f,s,d){return(f<60?s+(d-s)*f/60:f<180?d:f<240?s+(d-s)*(240-f)/60:s)*255}function basis(f,s,d,_,S){var T=f*f,F=T*f;return((1-3*f+3*T-F)*s+(4-6*T+3*F)*d+(1+3*f+3*T-3*F)*_+F*S)/6}function basis$1(f){var s=f.length-1;return function(d){var _=d<=0?d=0:d>=1?(d=1,s-1):Math.floor(d*s),S=f[_],T=f[_+1],F=_>0?f[_-1]:2*S-T,M=_<s-1?f[_+2]:2*T-S;return basis((d-_/s)*s,F,S,T,M)}}const constant$6=f=>()=>f;function linear$2(f,s){return function(d){return f+d*s}}function exponential(f,s,d){return f=Math.pow(f,d),s=Math.pow(s,d)-f,d=1/d,function(_){return Math.pow(f+_*s,d)}}function gamma(f){return(f=+f)==1?nogamma:function(s,d){return d-s?exponential(s,d,f):constant$6(isNaN(s)?d:s)}}function nogamma(f,s){var d=s-f;return d?linear$2(f,d):constant$6(isNaN(f)?s:f)}const interpolateRgb=function f(s){var d=gamma(s);function _(S,T){var F=d((S=rgb$1(S)).r,(T=rgb$1(T)).r),M=d(S.g,T.g),P=d(S.b,T.b),H=nogamma(S.opacity,T.opacity);return function(J){return S.r=F(J),S.g=M(J),S.b=P(J),S.opacity=H(J),S+""}}return _.gamma=f,_}(1);function rgbSpline(f){return function(s){var d=s.length,_=new Array(d),S=new Array(d),T=new Array(d),F,M;for(F=0;F<d;++F)M=rgb$1(s[F]),_[F]=M.r||0,S[F]=M.g||0,T[F]=M.b||0;return _=f(_),S=f(S),T=f(T),M.opacity=1,function(P){return M.r=_(P),M.g=S(P),M.b=T(P),M+""}}}var rgbBasis=rgbSpline(basis$1);function numberArray(f,s){s||(s=[]);var d=f?Math.min(s.length,f.length):0,_=s.slice(),S;return function(T){for(S=0;S<d;++S)_[S]=f[S]*(1-T)+s[S]*T;return _}}function isNumberArray(f){return ArrayBuffer.isView(f)&&!(f instanceof DataView)}function genericArray(f,s){var d=s?s.length:0,_=f?Math.min(d,f.length):0,S=new Array(_),T=new Array(d),F;for(F=0;F<_;++F)S[F]=interpolate$1(f[F],s[F]);for(;F<d;++F)T[F]=s[F];return function(M){for(F=0;F<_;++F)T[F]=S[F](M);return T}}function date(f,s){var d=new Date;return f=+f,s=+s,function(_){return d.setTime(f*(1-_)+s*_),d}}function interpolateNumber(f,s){return f=+f,s=+s,function(d){return f*(1-d)+s*d}}function object(f,s){var d={},_={},S;(f===null||typeof f!="object")&&(f={}),(s===null||typeof s!="object")&&(s={});for(S in s)S in f?d[S]=interpolate$1(f[S],s[S]):_[S]=s[S];return function(T){for(S in d)_[S]=d[S](T);return _}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(f){return function(){return f}}function one(f){return function(s){return f(s)+""}}function interpolateString(f,s){var d=reA.lastIndex=reB.lastIndex=0,_,S,T,F=-1,M=[],P=[];for(f=f+"",s=s+"";(_=reA.exec(f))&&(S=reB.exec(s));)(T=S.index)>d&&(T=s.slice(d,T),M[F]?M[F]+=T:M[++F]=T),(_=_[0])===(S=S[0])?M[F]?M[F]+=S:M[++F]=S:(M[++F]=null,P.push({i:F,x:interpolateNumber(_,S)})),d=reB.lastIndex;return d<s.length&&(T=s.slice(d),M[F]?M[F]+=T:M[++F]=T),M.length<2?P[0]?one(P[0].x):zero(s):(s=P.length,function(H){for(var J=0,K;J<s;++J)M[(K=P[J]).i]=K.x(H);return M.join("")})}function interpolate$1(f,s){var d=typeof s,_;return s==null||d==="boolean"?constant$6(s):(d==="number"?interpolateNumber:d==="string"?(_=color(s))?(s=_,interpolateRgb):interpolateString:s instanceof color?interpolateRgb:s instanceof Date?date:isNumberArray(s)?numberArray:Array.isArray(s)?genericArray:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?object:interpolateNumber)(f,s)}function interpolateRound(f,s){return f=+f,s=+s,function(d){return Math.round(f*(1-d)+s*d)}}var degrees$1=180/Math.PI,identity$6={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(f,s,d,_,S,T){var F,M,P;return(F=Math.sqrt(f*f+s*s))&&(f/=F,s/=F),(P=f*d+s*_)&&(d-=f*P,_-=s*P),(M=Math.sqrt(d*d+_*_))&&(d/=M,_/=M,P/=M),f*_<s*d&&(f=-f,s=-s,P=-P,F=-F),{translateX:S,translateY:T,rotate:Math.atan2(s,f)*degrees$1,skewX:Math.atan(P)*degrees$1,scaleX:F,scaleY:M}}var svgNode;function parseCss(f){const s=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(f+"");return s.isIdentity?identity$6:decompose(s.a,s.b,s.c,s.d,s.e,s.f)}function parseSvg(f){return f==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",f),!(f=svgNode.transform.baseVal.consolidate()))?identity$6:(f=f.matrix,decompose(f.a,f.b,f.c,f.d,f.e,f.f))}function interpolateTransform(f,s,d,_){function S(H){return H.length?H.pop()+" ":""}function T(H,J,K,z,oe,se){if(H!==K||J!==z){var ae=oe.push("translate(",null,s,null,d);se.push({i:ae-4,x:interpolateNumber(H,K)},{i:ae-2,x:interpolateNumber(J,z)})}else(K||z)&&oe.push("translate("+K+s+z+d)}function F(H,J,K,z){H!==J?(H-J>180?J+=360:J-H>180&&(H+=360),z.push({i:K.push(S(K)+"rotate(",null,_)-2,x:interpolateNumber(H,J)})):J&&K.push(S(K)+"rotate("+J+_)}function M(H,J,K,z){H!==J?z.push({i:K.push(S(K)+"skewX(",null,_)-2,x:interpolateNumber(H,J)}):J&&K.push(S(K)+"skewX("+J+_)}function P(H,J,K,z,oe,se){if(H!==K||J!==z){var ae=oe.push(S(oe)+"scale(",null,",",null,")");se.push({i:ae-4,x:interpolateNumber(H,K)},{i:ae-2,x:interpolateNumber(J,z)})}else(K!==1||z!==1)&&oe.push(S(oe)+"scale("+K+","+z+")")}return function(H,J){var K=[],z=[];return H=f(H),J=f(J),T(H.translateX,H.translateY,J.translateX,J.translateY,K,z),F(H.rotate,J.rotate,K,z),M(H.skewX,J.skewX,K,z),P(H.scaleX,H.scaleY,J.scaleX,J.scaleY,K,z),H=J=null,function(oe){for(var se=-1,ae=z.length,ge;++se<ae;)K[(ge=z[se]).i]=ge.x(oe);return K.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")");function constants(f){return function(){return f}}function number$1(f){return+f}var unit=[0,1];function identity$5(f){return f}function normalize$1(f,s){return(s-=f=+f)?function(d){return(d-f)/s}:constants(isNaN(s)?NaN:.5)}function clamper(f,s){var d;return f>s&&(d=f,f=s,s=d),function(_){return Math.max(f,Math.min(s,_))}}function bimap(f,s,d){var _=f[0],S=f[1],T=s[0],F=s[1];return S<_?(_=normalize$1(S,_),T=d(F,T)):(_=normalize$1(_,S),T=d(T,F)),function(M){return T(_(M))}}function polymap(f,s,d){var _=Math.min(f.length,s.length)-1,S=new Array(_),T=new Array(_),F=-1;for(f[_]<f[0]&&(f=f.slice().reverse(),s=s.slice().reverse());++F<_;)S[F]=normalize$1(f[F],f[F+1]),T[F]=d(s[F],s[F+1]);return function(M){var P=bisectRight(f,M,1,_)-1;return T[P](S[P](M))}}function copy(f,s){return s.domain(f.domain()).range(f.range()).interpolate(f.interpolate()).clamp(f.clamp()).unknown(f.unknown())}function transformer$1(){var f=unit,s=unit,d=interpolate$1,_,S,T,F=identity$5,M,P,H;function J(){var z=Math.min(f.length,s.length);return F!==identity$5&&(F=clamper(f[0],f[z-1])),M=z>2?polymap:bimap,P=H=null,K}function K(z){return z==null||isNaN(z=+z)?T:(P||(P=M(f.map(_),s,d)))(_(F(z)))}return K.invert=function(z){return F(S((H||(H=M(s,f.map(_),interpolateNumber)))(z)))},K.domain=function(z){return arguments.length?(f=Array.from(z,number$1),J()):f.slice()},K.range=function(z){return arguments.length?(s=Array.from(z),J()):s.slice()},K.rangeRound=function(z){return s=Array.from(z),d=interpolateRound,J()},K.clamp=function(z){return arguments.length?(F=z?!0:identity$5,J()):F!==identity$5},K.interpolate=function(z){return arguments.length?(d=z,J()):d},K.unknown=function(z){return arguments.length?(T=z,K):T},function(z,oe){return _=z,S=oe,J()}}function continuous(){return transformer$1()(identity$5,identity$5)}function formatDecimal(f){return Math.abs(f=Math.round(f))>=1e21?f.toLocaleString("en").replace(/,/g,""):f.toString(10)}function formatDecimalParts(f,s){if((d=(f=s?f.toExponential(s-1):f.toExponential()).indexOf("e"))<0)return null;var d,_=f.slice(0,d);return[_.length>1?_[0]+_.slice(2):_,+f.slice(d+1)]}function exponent(f){return f=formatDecimalParts(Math.abs(f)),f?f[1]:NaN}function formatGroup(f,s){return function(d,_){for(var S=d.length,T=[],F=0,M=f[0],P=0;S>0&&M>0&&(P+M+1>_&&(M=Math.max(1,_-P)),T.push(d.substring(S-=M,S+M)),!((P+=M+1)>_));)M=f[F=(F+1)%f.length];return T.reverse().join(s)}}function formatNumerals(f){return function(s){return s.replace(/[0-9]/g,function(d){return f[+d]})}}var re$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(f){if(!(s=re$1.exec(f)))throw new Error("invalid format: "+f);var s;return new FormatSpecifier({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(f){this.fill=f.fill===void 0?" ":f.fill+"",this.align=f.align===void 0?">":f.align+"",this.sign=f.sign===void 0?"-":f.sign+"",this.symbol=f.symbol===void 0?"":f.symbol+"",this.zero=!!f.zero,this.width=f.width===void 0?void 0:+f.width,this.comma=!!f.comma,this.precision=f.precision===void 0?void 0:+f.precision,this.trim=!!f.trim,this.type=f.type===void 0?"":f.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(f){e:for(var s=f.length,d=1,_=-1,S;d<s;++d)switch(f[d]){case".":_=S=d;break;case"0":_===0&&(_=d),S=d;break;default:if(!+f[d])break e;_>0&&(_=0);break}return _>0?f.slice(0,_)+f.slice(S+1):f}var prefixExponent;function formatPrefixAuto(f,s){var d=formatDecimalParts(f,s);if(!d)return f+"";var _=d[0],S=d[1],T=S-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(S/3)))*3)+1,F=_.length;return T===F?_:T>F?_+new Array(T-F+1).join("0"):T>0?_.slice(0,T)+"."+_.slice(T):"0."+new Array(1-T).join("0")+formatDecimalParts(f,Math.max(0,s+T-1))[0]}function formatRounded(f,s){var d=formatDecimalParts(f,s);if(!d)return f+"";var _=d[0],S=d[1];return S<0?"0."+new Array(-S).join("0")+_:_.length>S+1?_.slice(0,S+1)+"."+_.slice(S+1):_+new Array(S-_.length+2).join("0")}const formatTypes={"%":(f,s)=>(f*100).toFixed(s),b:f=>Math.round(f).toString(2),c:f=>f+"",d:formatDecimal,e:(f,s)=>f.toExponential(s),f:(f,s)=>f.toFixed(s),g:(f,s)=>f.toPrecision(s),o:f=>Math.round(f).toString(8),p:(f,s)=>formatRounded(f*100,s),r:formatRounded,s:formatPrefixAuto,X:f=>Math.round(f).toString(16).toUpperCase(),x:f=>Math.round(f).toString(16)};function identity$4(f){return f}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(f){var s=f.grouping===void 0||f.thousands===void 0?identity$4:formatGroup(map.call(f.grouping,Number),f.thousands+""),d=f.currency===void 0?"":f.currency[0]+"",_=f.currency===void 0?"":f.currency[1]+"",S=f.decimal===void 0?".":f.decimal+"",T=f.numerals===void 0?identity$4:formatNumerals(map.call(f.numerals,String)),F=f.percent===void 0?"%":f.percent+"",M=f.minus===void 0?"":f.minus+"",P=f.nan===void 0?"NaN":f.nan+"";function H(K){K=formatSpecifier(K);var z=K.fill,oe=K.align,se=K.sign,ae=K.symbol,ge=K.zero,pe=K.width,he=K.comma,ve=K.precision,be=K.trim,Re=K.type;Re==="n"?(he=!0,Re="g"):formatTypes[Re]||(ve===void 0&&(ve=12),be=!0,Re="g"),(ge||z==="0"&&oe==="=")&&(ge=!0,z="0",oe="=");var Fe=ae==="$"?d:ae==="#"&&/[boxX]/.test(Re)?"0"+Re.toLowerCase():"",ye=ae==="$"?_:/[%p]/.test(Re)?F:"",Ue=formatTypes[Re],It=/[defgprs%]/.test(Re);ve=ve===void 0?6:/[gprs]/.test(Re)?Math.max(1,Math.min(21,ve)):Math.max(0,Math.min(20,ve));function St(At){var xt=Fe,Ct=ye,Nt,qt,Jn;if(Re==="c")Ct=Ue(At)+Ct,At="";else{At=+At;var qr=At<0||1/At<0;if(At=isNaN(At)?P:Ue(Math.abs(At),ve),be&&(At=formatTrim(At)),qr&&+At==0&&se!=="+"&&(qr=!1),xt=(qr?se==="("?se:M:se==="-"||se==="("?"":se)+xt,Ct=(Re==="s"?prefixes[8+prefixExponent/3]:"")+Ct+(qr&&se==="("?")":""),It){for(Nt=-1,qt=At.length;++Nt<qt;)if(Jn=At.charCodeAt(Nt),48>Jn||Jn>57){Ct=(Jn===46?S+At.slice(Nt+1):At.slice(Nt))+Ct,At=At.slice(0,Nt);break}}}he&&!ge&&(At=s(At,1/0));var na=xt.length+At.length+Ct.length,qn=na<pe?new Array(pe-na+1).join(z):"";switch(he&&ge&&(At=s(qn+At,qn.length?pe-Ct.length:1/0),qn=""),oe){case"<":At=xt+At+Ct+qn;break;case"=":At=xt+qn+At+Ct;break;case"^":At=qn.slice(0,na=qn.length>>1)+xt+At+Ct+qn.slice(na);break;default:At=qn+xt+At+Ct;break}return T(At)}return St.toString=function(){return K+""},St}function J(K,z){var oe=H((K=formatSpecifier(K),K.type="f",K)),se=Math.max(-8,Math.min(8,Math.floor(exponent(z)/3)))*3,ae=Math.pow(10,-se),ge=prefixes[8+se/3];return function(pe){return oe(ae*pe)+ge}}return{format:H,formatPrefix:J}}var locale,format,formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(f){return locale=formatLocale(f),format=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(f){return Math.max(0,-exponent(Math.abs(f)))}function precisionPrefix(f,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(s)/3)))*3-exponent(Math.abs(f)))}function precisionRound(f,s){return f=Math.abs(f),s=Math.abs(s)-f,Math.max(0,exponent(s)-exponent(f))+1}function tickFormat(f,s,d,_){var S=tickStep(f,s,d),T;switch(_=formatSpecifier(_??",f"),_.type){case"s":{var F=Math.max(Math.abs(f),Math.abs(s));return _.precision==null&&!isNaN(T=precisionPrefix(S,F))&&(_.precision=T),formatPrefix(_,F)}case"":case"e":case"g":case"p":case"r":{_.precision==null&&!isNaN(T=precisionRound(S,Math.max(Math.abs(f),Math.abs(s))))&&(_.precision=T-(_.type==="e"));break}case"f":case"%":{_.precision==null&&!isNaN(T=precisionFixed(S))&&(_.precision=T-(_.type==="%")*2);break}}return format(_)}function linearish(f){var s=f.domain;return f.ticks=function(d){var _=s();return ticks(_[0],_[_.length-1],d??10)},f.tickFormat=function(d,_){var S=s();return tickFormat(S[0],S[S.length-1],d??10,_)},f.nice=function(d){d==null&&(d=10);var _=s(),S=0,T=_.length-1,F=_[S],M=_[T],P,H,J=10;for(M<F&&(H=F,F=M,M=H,H=S,S=T,T=H);J-- >0;){if(H=tickIncrement(F,M,d),H===P)return _[S]=F,_[T]=M,s(_);if(H>0)F=Math.floor(F/H)*H,M=Math.ceil(M/H)*H;else if(H<0)F=Math.ceil(F*H)/H,M=Math.floor(M*H)/H;else break;P=H}return f},f}function linear$1(){var f=continuous();return f.copy=function(){return copy(f,linear$1())},initRange.apply(f,arguments),linearish(f)}function transformSymlog(f){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/f))}}function transformSymexp(f){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*f}}function symlogish(f){var s=1,d=f(transformSymlog(s),transformSymexp(s));return d.constant=function(_){return arguments.length?f(transformSymlog(s=+_),transformSymexp(s)):s},linearish(d)}function symlog(){var f=symlogish(transformer$1());return f.copy=function(){return copy(f,symlog()).constant(f.constant())},initRange.apply(f,arguments)}function transformPow(f){return function(s){return s<0?-Math.pow(-s,f):Math.pow(s,f)}}function transformSqrt(f){return f<0?-Math.sqrt(-f):Math.sqrt(f)}function transformSquare(f){return f<0?-f*f:f*f}function powish(f){var s=f(identity$5,identity$5),d=1;function _(){return d===1?f(identity$5,identity$5):d===.5?f(transformSqrt,transformSquare):f(transformPow(d),transformPow(1/d))}return s.exponent=function(S){return arguments.length?(d=+S,_()):d},linearish(s)}function pow(){var f=powish(transformer$1());return f.copy=function(){return copy(f,pow()).exponent(f.exponent())},initRange.apply(f,arguments),f}function sqrt$3(){return pow.apply(null,arguments).exponent(.5)}var noop$4={value:()=>{}};function dispatch(){for(var f=0,s=arguments.length,d={},_;f<s;++f){if(!(_=arguments[f]+"")||_ in d||/[\s.]/.test(_))throw new Error("illegal type: "+_);d[_]=[]}return new Dispatch(d)}function Dispatch(f){this._=f}function parseTypenames(f,s){return f.trim().split(/^|\s+/).map(function(d){var _="",S=d.indexOf(".");if(S>=0&&(_=d.slice(S+1),d=d.slice(0,S)),d&&!s.hasOwnProperty(d))throw new Error("unknown type: "+d);return{type:d,name:_}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(f,s){var d=this._,_=parseTypenames(f+"",d),S,T=-1,F=_.length;if(arguments.length<2){for(;++T<F;)if((S=(f=_[T]).type)&&(S=get$1(d[S],f.name)))return S;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++T<F;)if(S=(f=_[T]).type)d[S]=set$1(d[S],f.name,s);else if(s==null)for(S in d)d[S]=set$1(d[S],f.name,null);return this},copy:function(){var f={},s=this._;for(var d in s)f[d]=s[d].slice();return new Dispatch(f)},call:function(f,s){if((S=arguments.length-2)>0)for(var d=new Array(S),_=0,S,T;_<S;++_)d[_]=arguments[_+2];if(!this._.hasOwnProperty(f))throw new Error("unknown type: "+f);for(T=this._[f],_=0,S=T.length;_<S;++_)T[_].value.apply(s,d)},apply:function(f,s,d){if(!this._.hasOwnProperty(f))throw new Error("unknown type: "+f);for(var _=this._[f],S=0,T=_.length;S<T;++S)_[S].value.apply(s,d)}};function get$1(f,s){for(var d=0,_=f.length,S;d<_;++d)if((S=f[d]).name===s)return S.value}function set$1(f,s,d){for(var _=0,S=f.length;_<S;++_)if(f[_].name===s){f[_]=noop$4,f=f.slice(0,_).concat(f.slice(_+1));break}return d!=null&&f.push({name:s,value:d}),f}var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now$1(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(f,s,d){if(typeof f!="function")throw new TypeError("callback is not a function");d=(d==null?now$1():+d)+(s==null?0:+s),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=f,this._time=d,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(f,s,d){var _=new Timer;return _.restart(f,s,d),_}function timerFlush(){now$1(),++frame;for(var f=taskHead,s;f;)(s=clockNow-f._time)>=0&&f._call.call(void 0,s),f=f._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var f=clock.now(),s=f-clockLast;s>pokeDelay&&(clockSkew-=s,clockLast=f)}function nap(){for(var f,s=taskHead,d,_=1/0;s;)s._call?(_>s._time&&(_=s._time),f=s,s=s._next):(d=s._next,s._next=null,s=f?f._next=d:taskHead=d);taskTail=f,sleep(_)}function sleep(f){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var s=f-clockNow;s>24?(f<1/0&&(timeout$1=setTimeout(wake,f-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(f,s,d){var _=new Timer;return s=s==null?0:+s,_.restart(S=>{_.stop(),f(S+s)},s,d),_}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(f,s,d,_,S,T){var F=f.__transition;if(!F)f.__transition={};else if(d in F)return;create(f,d,{name:s,index:_,group:S,on:emptyOn,tween:emptyTween,time:T.time,delay:T.delay,duration:T.duration,ease:T.ease,timer:null,state:CREATED})}function init(f,s){var d=get(f,s);if(d.state>CREATED)throw new Error("too late; already scheduled");return d}function set(f,s){var d=get(f,s);if(d.state>STARTED)throw new Error("too late; already running");return d}function get(f,s){var d=f.__transition;if(!d||!(d=d[s]))throw new Error("transition not found");return d}function create(f,s,d){var _=f.__transition,S;_[s]=d,d.timer=timer(T,0,d.time);function T(H){d.state=SCHEDULED,d.timer.restart(F,d.delay,d.time),d.delay<=H&&F(H-d.delay)}function F(H){var J,K,z,oe;if(d.state!==SCHEDULED)return P();for(J in _)if(oe=_[J],oe.name===d.name){if(oe.state===STARTED)return timeout(F);oe.state===RUNNING?(oe.state=ENDED,oe.timer.stop(),oe.on.call("interrupt",f,f.__data__,oe.index,oe.group),delete _[J]):+J<s&&(oe.state=ENDED,oe.timer.stop(),oe.on.call("cancel",f,f.__data__,oe.index,oe.group),delete _[J])}if(timeout(function(){d.state===STARTED&&(d.state=RUNNING,d.timer.restart(M,d.delay,d.time),M(H))}),d.state=STARTING,d.on.call("start",f,f.__data__,d.index,d.group),d.state===STARTING){for(d.state=STARTED,S=new Array(z=d.tween.length),J=0,K=-1;J<z;++J)(oe=d.tween[J].value.call(f,f.__data__,d.index,d.group))&&(S[++K]=oe);S.length=K+1}}function M(H){for(var J=H<d.duration?d.ease.call(null,H/d.duration):(d.timer.restart(P),d.state=ENDING,1),K=-1,z=S.length;++K<z;)S[K].call(f,J);d.state===ENDING&&(d.on.call("end",f,f.__data__,d.index,d.group),P())}function P(){d.state=ENDED,d.timer.stop(),delete _[s];for(var H in _)return;delete f.__transition}}function interrupt(f,s){var d=f.__transition,_,S,T=!0,F;if(d){s=s==null?null:s+"";for(F in d){if((_=d[F]).name!==s){T=!1;continue}S=_.state>STARTING&&_.state<ENDING,_.state=ENDED,_.timer.stop(),_.on.call(S?"interrupt":"cancel",f,f.__data__,_.index,_.group),delete d[F]}T&&delete f.__transition}}function selection_interrupt(f){return this.each(function(){interrupt(this,f)})}function tweenRemove(f,s){var d,_;return function(){var S=set(this,f),T=S.tween;if(T!==d){_=d=T;for(var F=0,M=_.length;F<M;++F)if(_[F].name===s){_=_.slice(),_.splice(F,1);break}}S.tween=_}}function tweenFunction(f,s,d){var _,S;if(typeof d!="function")throw new Error;return function(){var T=set(this,f),F=T.tween;if(F!==_){S=(_=F).slice();for(var M={name:s,value:d},P=0,H=S.length;P<H;++P)if(S[P].name===s){S[P]=M;break}P===H&&S.push(M)}T.tween=S}}function transition_tween(f,s){var d=this._id;if(f+="",arguments.length<2){for(var _=get(this.node(),d).tween,S=0,T=_.length,F;S<T;++S)if((F=_[S]).name===f)return F.value;return null}return this.each((s==null?tweenRemove:tweenFunction)(d,f,s))}function tweenValue(f,s,d){var _=f._id;return f.each(function(){var S=set(this,_);(S.value||(S.value={}))[s]=d.apply(this,arguments)}),function(S){return get(S,_).value[s]}}function interpolate(f,s){var d;return(typeof s=="number"?interpolateNumber:s instanceof color?interpolateRgb:(d=color(s))?(s=d,interpolateRgb):interpolateString)(f,s)}function attrRemove(f){return function(){this.removeAttribute(f)}}function attrRemoveNS(f){return function(){this.removeAttributeNS(f.space,f.local)}}function attrConstant(f,s,d){var _,S=d+"",T;return function(){var F=this.getAttribute(f);return F===S?null:F===_?T:T=s(_=F,d)}}function attrConstantNS(f,s,d){var _,S=d+"",T;return function(){var F=this.getAttributeNS(f.space,f.local);return F===S?null:F===_?T:T=s(_=F,d)}}function attrFunction(f,s,d){var _,S,T;return function(){var F,M=d(this),P;return M==null?void this.removeAttribute(f):(F=this.getAttribute(f),P=M+"",F===P?null:F===_&&P===S?T:(S=P,T=s(_=F,M)))}}function attrFunctionNS(f,s,d){var _,S,T;return function(){var F,M=d(this),P;return M==null?void this.removeAttributeNS(f.space,f.local):(F=this.getAttributeNS(f.space,f.local),P=M+"",F===P?null:F===_&&P===S?T:(S=P,T=s(_=F,M)))}}function transition_attr(f,s){var d=namespace(f),_=d==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(f,typeof s=="function"?(d.local?attrFunctionNS:attrFunction)(d,_,tweenValue(this,"attr."+f,s)):s==null?(d.local?attrRemoveNS:attrRemove)(d):(d.local?attrConstantNS:attrConstant)(d,_,s))}function attrInterpolate(f,s){return function(d){this.setAttribute(f,s.call(this,d))}}function attrInterpolateNS(f,s){return function(d){this.setAttributeNS(f.space,f.local,s.call(this,d))}}function attrTweenNS(f,s){var d,_;function S(){var T=s.apply(this,arguments);return T!==_&&(d=(_=T)&&attrInterpolateNS(f,T)),d}return S._value=s,S}function attrTween(f,s){var d,_;function S(){var T=s.apply(this,arguments);return T!==_&&(d=(_=T)&&attrInterpolate(f,T)),d}return S._value=s,S}function transition_attrTween(f,s){var d="attr."+f;if(arguments.length<2)return(d=this.tween(d))&&d._value;if(s==null)return this.tween(d,null);if(typeof s!="function")throw new Error;var _=namespace(f);return this.tween(d,(_.local?attrTweenNS:attrTween)(_,s))}function delayFunction(f,s){return function(){init(this,f).delay=+s.apply(this,arguments)}}function delayConstant(f,s){return s=+s,function(){init(this,f).delay=s}}function transition_delay(f){var s=this._id;return arguments.length?this.each((typeof f=="function"?delayFunction:delayConstant)(s,f)):get(this.node(),s).delay}function durationFunction(f,s){return function(){set(this,f).duration=+s.apply(this,arguments)}}function durationConstant(f,s){return s=+s,function(){set(this,f).duration=s}}function transition_duration(f){var s=this._id;return arguments.length?this.each((typeof f=="function"?durationFunction:durationConstant)(s,f)):get(this.node(),s).duration}function easeConstant(f,s){if(typeof s!="function")throw new Error;return function(){set(this,f).ease=s}}function transition_ease(f){var s=this._id;return arguments.length?this.each(easeConstant(s,f)):get(this.node(),s).ease}function easeVarying(f,s){return function(){var d=s.apply(this,arguments);if(typeof d!="function")throw new Error;set(this,f).ease=d}}function transition_easeVarying(f){if(typeof f!="function")throw new Error;return this.each(easeVarying(this._id,f))}function transition_filter(f){typeof f!="function"&&(f=matcher(f));for(var s=this._groups,d=s.length,_=new Array(d),S=0;S<d;++S)for(var T=s[S],F=T.length,M=_[S]=[],P,H=0;H<F;++H)(P=T[H])&&f.call(P,P.__data__,H,T)&&M.push(P);return new Transition(_,this._parents,this._name,this._id)}function transition_merge(f){if(f._id!==this._id)throw new Error;for(var s=this._groups,d=f._groups,_=s.length,S=d.length,T=Math.min(_,S),F=new Array(_),M=0;M<T;++M)for(var P=s[M],H=d[M],J=P.length,K=F[M]=new Array(J),z,oe=0;oe<J;++oe)(z=P[oe]||H[oe])&&(K[oe]=z);for(;M<_;++M)F[M]=s[M];return new Transition(F,this._parents,this._name,this._id)}function start(f){return(f+"").trim().split(/^|\s+/).every(function(s){var d=s.indexOf(".");return d>=0&&(s=s.slice(0,d)),!s||s==="start"})}function onFunction(f,s,d){var _,S,T=start(s)?init:set;return function(){var F=T(this,f),M=F.on;M!==_&&(S=(_=M).copy()).on(s,d),F.on=S}}function transition_on(f,s){var d=this._id;return arguments.length<2?get(this.node(),d).on.on(f):this.each(onFunction(d,f,s))}function removeFunction(f){return function(){var s=this.parentNode;for(var d in this.__transition)if(+d!==f)return;s&&s.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(f){var s=this._name,d=this._id;typeof f!="function"&&(f=selector(f));for(var _=this._groups,S=_.length,T=new Array(S),F=0;F<S;++F)for(var M=_[F],P=M.length,H=T[F]=new Array(P),J,K,z=0;z<P;++z)(J=M[z])&&(K=f.call(J,J.__data__,z,M))&&("__data__"in J&&(K.__data__=J.__data__),H[z]=K,schedule(H[z],s,d,z,H,get(J,d)));return new Transition(T,this._parents,s,d)}function transition_selectAll(f){var s=this._name,d=this._id;typeof f!="function"&&(f=selectorAll(f));for(var _=this._groups,S=_.length,T=[],F=[],M=0;M<S;++M)for(var P=_[M],H=P.length,J,K=0;K<H;++K)if(J=P[K]){for(var z=f.call(J,J.__data__,K,P),oe,se=get(J,d),ae=0,ge=z.length;ae<ge;++ae)(oe=z[ae])&&schedule(oe,s,d,ae,z,se);T.push(z),F.push(J)}return new Transition(T,F,s,d)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(f,s){var d,_,S;return function(){var T=styleValue(this,f),F=(this.style.removeProperty(f),styleValue(this,f));return T===F?null:T===d&&F===_?S:S=s(d=T,_=F)}}function styleRemove(f){return function(){this.style.removeProperty(f)}}function styleConstant(f,s,d){var _,S=d+"",T;return function(){var F=styleValue(this,f);return F===S?null:F===_?T:T=s(_=F,d)}}function styleFunction(f,s,d){var _,S,T;return function(){var F=styleValue(this,f),M=d(this),P=M+"";return M==null&&(P=M=(this.style.removeProperty(f),styleValue(this,f))),F===P?null:F===_&&P===S?T:(S=P,T=s(_=F,M))}}function styleMaybeRemove(f,s){var d,_,S,T="style."+s,F="end."+T,M;return function(){var P=set(this,f),H=P.on,J=P.value[T]==null?M||(M=styleRemove(s)):void 0;(H!==d||S!==J)&&(_=(d=H).copy()).on(F,S=J),P.on=_}}function transition_style(f,s,d){var _=(f+="")=="transform"?interpolateTransformCss:interpolate;return s==null?this.styleTween(f,styleNull(f,_)).on("end.style."+f,styleRemove(f)):typeof s=="function"?this.styleTween(f,styleFunction(f,_,tweenValue(this,"style."+f,s))).each(styleMaybeRemove(this._id,f)):this.styleTween(f,styleConstant(f,_,s),d).on("end.style."+f,null)}function styleInterpolate(f,s,d){return function(_){this.style.setProperty(f,s.call(this,_),d)}}function styleTween(f,s,d){var _,S;function T(){var F=s.apply(this,arguments);return F!==S&&(_=(S=F)&&styleInterpolate(f,F,d)),_}return T._value=s,T}function transition_styleTween(f,s,d){var _="style."+(f+="");if(arguments.length<2)return(_=this.tween(_))&&_._value;if(s==null)return this.tween(_,null);if(typeof s!="function")throw new Error;return this.tween(_,styleTween(f,s,d??""))}function textConstant(f){return function(){this.textContent=f}}function textFunction(f){return function(){var s=f(this);this.textContent=s??""}}function transition_text(f){return this.tween("text",typeof f=="function"?textFunction(tweenValue(this,"text",f)):textConstant(f==null?"":f+""))}function textInterpolate(f){return function(s){this.textContent=f.call(this,s)}}function textTween(f){var s,d;function _(){var S=f.apply(this,arguments);return S!==d&&(s=(d=S)&&textInterpolate(S)),s}return _._value=f,_}function transition_textTween(f){var s="text";if(arguments.length<1)return(s=this.tween(s))&&s._value;if(f==null)return this.tween(s,null);if(typeof f!="function")throw new Error;return this.tween(s,textTween(f))}function transition_transition(){for(var f=this._name,s=this._id,d=newId(),_=this._groups,S=_.length,T=0;T<S;++T)for(var F=_[T],M=F.length,P,H=0;H<M;++H)if(P=F[H]){var J=get(P,s);schedule(P,f,d,H,F,{time:J.time+J.delay+J.duration,delay:0,duration:J.duration,ease:J.ease})}return new Transition(_,this._parents,f,d)}function transition_end(){var f,s,d=this,_=d._id,S=d.size();return new Promise(function(T,F){var M={value:F},P={value:function(){--S===0&&T()}};d.each(function(){var H=set(this,_),J=H.on;J!==f&&(s=(f=J).copy(),s._.cancel.push(M),s._.interrupt.push(M),s._.end.push(P)),H.on=s}),S===0&&T()})}var id$1=0;function Transition(f,s,d,_){this._groups=f,this._parents=s,this._name=d,this._id=_}function newId(){return++id$1}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};const linear=f=>+f;function cubicInOut(f){return((f*=2)<=1?f*f*f:(f-=2)*f*f+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(f,s){for(var d;!(d=f.__transition)||!(d=d[s]);)if(!(f=f.parentNode))throw new Error(`transition ${s} not found`);return d}function selection_transition(f){var s,d;f instanceof Transition?(s=f._id,f=f._name):(s=newId(),(d=defaultTiming).time=now$1(),f=f==null?null:f+"");for(var _=this._groups,S=_.length,T=0;T<S;++T)for(var F=_[T],M=F.length,P,H=0;H<M;++H)(P=F[H])&&schedule(P,f,s,H,F,d||inherit(P,s));return new Transition(_,this._parents,f,s)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;function identity$3(f){return f}var top=1,right=2,bottom=3,left=4,epsilon$6=1e-6;function translateX(f){return"translate("+f+",0)"}function translateY(f){return"translate(0,"+f+")"}function number(f){return s=>+f(s)}function center$1(f,s){return s=Math.max(0,f.bandwidth()-s*2)/2,f.round()&&(s=Math.round(s)),d=>+f(d)+s}function entering(){return!this.__axis}function axis(f,s){var d=[],_=null,S=null,T=6,F=6,M=3,P=typeof window<"u"&&window.devicePixelRatio>1?0:.5,H=f===top||f===left?-1:1,J=f===left||f===right?"x":"y",K=f===top||f===bottom?translateX:translateY;function z(oe){var se=_??(s.ticks?s.ticks.apply(s,d):s.domain()),ae=S??(s.tickFormat?s.tickFormat.apply(s,d):identity$3),ge=Math.max(T,0)+M,pe=s.range(),he=+pe[0]+P,ve=+pe[pe.length-1]+P,be=(s.bandwidth?center$1:number)(s.copy(),P),Re=oe.selection?oe.selection():oe,Fe=Re.selectAll(".domain").data([null]),ye=Re.selectAll(".tick").data(se,s).order(),Ue=ye.exit(),It=ye.enter().append("g").attr("class","tick"),St=ye.select("line"),At=ye.select("text");Fe=Fe.merge(Fe.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),ye=ye.merge(It),St=St.merge(It.append("line").attr("stroke","currentColor").attr(J+"2",H*T)),At=At.merge(It.append("text").attr("fill","currentColor").attr(J,H*ge).attr("dy",f===top?"0em":f===bottom?"0.71em":"0.32em")),oe!==Re&&(Fe=Fe.transition(oe),ye=ye.transition(oe),St=St.transition(oe),At=At.transition(oe),Ue=Ue.transition(oe).attr("opacity",epsilon$6).attr("transform",function(xt){return isFinite(xt=be(xt))?K(xt+P):this.getAttribute("transform")}),It.attr("opacity",epsilon$6).attr("transform",function(xt){var Ct=this.parentNode.__axis;return K((Ct&&isFinite(Ct=Ct(xt))?Ct:be(xt))+P)})),Ue.remove(),Fe.attr("d",f===left||f===right?F?"M"+H*F+","+he+"H"+P+"V"+ve+"H"+H*F:"M"+P+","+he+"V"+ve:F?"M"+he+","+H*F+"V"+P+"H"+ve+"V"+H*F:"M"+he+","+P+"H"+ve),ye.attr("opacity",1).attr("transform",function(xt){return K(be(xt)+P)}),St.attr(J+"2",H*T),At.attr(J,H*ge).text(ae),Re.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",f===right?"start":f===left?"end":"middle"),Re.each(function(){this.__axis=be})}return z.scale=function(oe){return arguments.length?(s=oe,z):s},z.ticks=function(){return d=Array.from(arguments),z},z.tickArguments=function(oe){return arguments.length?(d=oe==null?[]:Array.from(oe),z):d.slice()},z.tickValues=function(oe){return arguments.length?(_=oe==null?null:Array.from(oe),z):_&&_.slice()},z.tickFormat=function(oe){return arguments.length?(S=oe,z):S},z.tickSize=function(oe){return arguments.length?(T=F=+oe,z):T},z.tickSizeInner=function(oe){return arguments.length?(T=+oe,z):T},z.tickSizeOuter=function(oe){return arguments.length?(F=+oe,z):F},z.tickPadding=function(oe){return arguments.length?(M=+oe,z):M},z.offset=function(oe){return arguments.length?(P=+oe,z):P},z}function axisBottom(f){return axis(bottom,f)}function axisLeft(f){return axis(left,f)}function defaultSeparation$1(f,s){return f.parent===s.parent?1:2}function meanX(f){return f.reduce(meanXReduce,0)/f.length}function meanXReduce(f,s){return f+s.x}function maxY(f){return 1+f.reduce(maxYReduce,0)}function maxYReduce(f,s){return Math.max(f,s.y)}function leafLeft(f){for(var s;s=f.children;)f=s[0];return f}function leafRight(f){for(var s;s=f.children;)f=s[s.length-1];return f}function cluster(){var f=defaultSeparation$1,s=1,d=1,_=!1;function S(T){var F,M=0;T.eachAfter(function(z){var oe=z.children;oe?(z.x=meanX(oe),z.y=maxY(oe)):(z.x=F?M+=f(z,F):0,z.y=0,F=z)});var P=leafLeft(T),H=leafRight(T),J=P.x-f(P,H)/2,K=H.x+f(H,P)/2;return T.eachAfter(_?function(z){z.x=(z.x-T.x)*s,z.y=(T.y-z.y)*d}:function(z){z.x=(z.x-J)/(K-J)*s,z.y=(1-(T.y?z.y/T.y:1))*d})}return S.separation=function(T){return arguments.length?(f=T,S):f},S.size=function(T){return arguments.length?(_=!1,s=+T[0],d=+T[1],S):_?null:[s,d]},S.nodeSize=function(T){return arguments.length?(_=!0,s=+T[0],d=+T[1],S):_?[s,d]:null},S}function count(f){var s=0,d=f.children,_=d&&d.length;if(!_)s=1;else for(;--_>=0;)s+=d[_].value;f.value=s}function node_count(){return this.eachAfter(count)}function node_each(f,s){let d=-1;for(const _ of this)f.call(s,_,++d,this);return this}function node_eachBefore(f,s){for(var d=this,_=[d],S,T,F=-1;d=_.pop();)if(f.call(s,d,++F,this),S=d.children)for(T=S.length-1;T>=0;--T)_.push(S[T]);return this}function node_eachAfter(f,s){for(var d=this,_=[d],S=[],T,F,M,P=-1;d=_.pop();)if(S.push(d),T=d.children)for(F=0,M=T.length;F<M;++F)_.push(T[F]);for(;d=S.pop();)f.call(s,d,++P,this);return this}function node_find(f,s){let d=-1;for(const _ of this)if(f.call(s,_,++d,this))return _}function node_sum(f){return this.eachAfter(function(s){for(var d=+f(s.data)||0,_=s.children,S=_&&_.length;--S>=0;)d+=_[S].value;s.value=d})}function node_sort(f){return this.eachBefore(function(s){s.children&&s.children.sort(f)})}function node_path(f){for(var s=this,d=leastCommonAncestor(s,f),_=[s];s!==d;)s=s.parent,_.push(s);for(var S=_.length;f!==d;)_.splice(S,0,f),f=f.parent;return _}function leastCommonAncestor(f,s){if(f===s)return f;var d=f.ancestors(),_=s.ancestors(),S=null;for(f=d.pop(),s=_.pop();f===s;)S=f,f=d.pop(),s=_.pop();return S}function node_ancestors(){for(var f=this,s=[f];f=f.parent;)s.push(f);return s}function node_descendants(){return Array.from(this)}function node_leaves(){var f=[];return this.eachBefore(function(s){s.children||f.push(s)}),f}function node_links(){var f=this,s=[];return f.each(function(d){d!==f&&s.push({source:d.parent,target:d})}),s}function*node_iterator(){var f=this,s,d=[f],_,S,T;do for(s=d.reverse(),d=[];f=s.pop();)if(yield f,_=f.children)for(S=0,T=_.length;S<T;++S)d.push(_[S]);while(d.length)}function hierarchy(f,s){f instanceof Map?(f=[void 0,f],s===void 0&&(s=mapChildren)):s===void 0&&(s=objectChildren);for(var d=new Node$2(f),_,S=[d],T,F,M,P;_=S.pop();)if((F=s(_.data))&&(P=(F=Array.from(F)).length))for(_.children=F,M=P-1;M>=0;--M)S.push(T=F[M]=new Node$2(F[M])),T.parent=_,T.depth=_.depth+1;return d.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function objectChildren(f){return f.children}function mapChildren(f){return Array.isArray(f)?f[1]:null}function copyData(f){f.data.value!==void 0&&(f.value=f.data.value),f.data=f.data.data}function computeHeight(f){var s=0;do f.height=s;while((f=f.parent)&&f.height<++s)}function Node$2(f){this.data=f,this.depth=this.height=0,this.parent=null}Node$2.prototype=hierarchy.prototype={constructor:Node$2,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,find:node_find,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy,[Symbol.iterator]:node_iterator};function optional(f){return f==null?null:required(f)}function required(f){if(typeof f!="function")throw new Error;return f}var preroot={depth:-1},ambiguous={},imputed={};function defaultId$1(f){return f.id}function defaultParentId(f){return f.parentId}function d3Stratify(){var f=defaultId$1,s=defaultParentId,d;function _(S){var T=Array.from(S),F=f,M=s,P,H,J,K,z,oe,se,ae,ge=new Map;if(d!=null){const pe=T.map((be,Re)=>normalize(d(be,Re,S))),he=pe.map(parentof),ve=new Set(pe).add("");for(const be of he)ve.has(be)||(ve.add(be),pe.push(be),he.push(parentof(be)),T.push(imputed));F=(be,Re)=>pe[Re],M=(be,Re)=>he[Re]}for(J=0,P=T.length;J<P;++J)H=T[J],oe=T[J]=new Node$2(H),(se=F(H,J,S))!=null&&(se+="")&&(ae=oe.id=se,ge.set(ae,ge.has(ae)?ambiguous:oe)),(se=M(H,J,S))!=null&&(se+="")&&(oe.parent=se);for(J=0;J<P;++J)if(oe=T[J],se=oe.parent){if(z=ge.get(se),!z)throw new Error("missing: "+se);if(z===ambiguous)throw new Error("ambiguous: "+se);z.children?z.children.push(oe):z.children=[oe],oe.parent=z}else{if(K)throw new Error("multiple roots");K=oe}if(!K)throw new Error("no root");if(d!=null){for(;K.data===imputed&&K.children.length===1;)K=K.children[0],--P;for(let pe=T.length-1;pe>=0&&(oe=T[pe],oe.data===imputed);--pe)oe.data=null}if(K.parent=preroot,K.eachBefore(function(pe){pe.depth=pe.parent.depth+1,--P}).eachBefore(computeHeight),K.parent=null,P>0)throw new Error("cycle");return K}return _.id=function(S){return arguments.length?(f=optional(S),_):f},_.parentId=function(S){return arguments.length?(s=optional(S),_):s},_.path=function(S){return arguments.length?(d=optional(S),_):d},_}function normalize(f){f=`${f}`;let s=f.length;return slash(f,s-1)&&!slash(f,s-2)&&(f=f.slice(0,-1)),f[0]==="/"?f:`/${f}`}function parentof(f){let s=f.length;if(s<2)return"";for(;--s>1&&!slash(f,s););return f.slice(0,s)}function slash(f,s){if(f[s]==="/"){let d=0;for(;s>0&&f[--s]==="\\";)++d;if(!(d&1))return!0}return!1}function defaultSeparation(f,s){return f.parent===s.parent?1:2}function nextLeft(f){var s=f.children;return s?s[0]:f.t}function nextRight(f){var s=f.children;return s?s[s.length-1]:f.t}function moveSubtree(f,s,d){var _=d/(s.i-f.i);s.c-=_,s.s+=d,f.c+=_,s.z+=d,s.m+=d}function executeShifts(f){for(var s=0,d=0,_=f.children,S=_.length,T;--S>=0;)T=_[S],T.z+=s,T.m+=s,s+=T.s+(d+=T.c)}function nextAncestor(f,s,d){return f.a.parent===s.parent?f.a:d}function TreeNode(f,s){this._=f,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=s}TreeNode.prototype=Object.create(Node$2.prototype);function treeRoot(f){for(var s=new TreeNode(f,0),d,_=[s],S,T,F,M;d=_.pop();)if(T=d._.children)for(d.children=new Array(M=T.length),F=M-1;F>=0;--F)_.push(S=d.children[F]=new TreeNode(T[F],F)),S.parent=d;return(s.parent=new TreeNode(null,0)).children=[s],s}function d3Tree(){var f=defaultSeparation,s=1,d=1,_=null;function S(H){var J=treeRoot(H);if(J.eachAfter(T),J.parent.m=-J.z,J.eachBefore(F),_)H.eachBefore(P);else{var K=H,z=H,oe=H;H.eachBefore(function(he){he.x<K.x&&(K=he),he.x>z.x&&(z=he),he.depth>oe.depth&&(oe=he)});var se=K===z?1:f(K,z)/2,ae=se-K.x,ge=s/(z.x+se+ae),pe=d/(oe.depth||1);H.eachBefore(function(he){he.x=(he.x+ae)*ge,he.y=he.depth*pe})}return H}function T(H){var J=H.children,K=H.parent.children,z=H.i?K[H.i-1]:null;if(J){executeShifts(H);var oe=(J[0].z+J[J.length-1].z)/2;z?(H.z=z.z+f(H._,z._),H.m=H.z-oe):H.z=oe}else z&&(H.z=z.z+f(H._,z._));H.parent.A=M(H,z,H.parent.A||K[0])}function F(H){H._.x=H.z+H.parent.m,H.m+=H.parent.m}function M(H,J,K){if(J){for(var z=H,oe=H,se=J,ae=z.parent.children[0],ge=z.m,pe=oe.m,he=se.m,ve=ae.m,be;se=nextRight(se),z=nextLeft(z),se&&z;)ae=nextLeft(ae),oe=nextRight(oe),oe.a=H,be=se.z+he-z.z-ge+f(se._,z._),be>0&&(moveSubtree(nextAncestor(se,H,K),H,be),ge+=be,pe+=be),he+=se.m,ge+=z.m,ve+=ae.m,pe+=oe.m;se&&!nextRight(oe)&&(oe.t=se,oe.m+=he-pe),z&&!nextLeft(ae)&&(ae.t=z,ae.m+=ge-ve,K=H)}return K}function P(H){H.x*=s,H.y=H.depth*d}return S.separation=function(H){return arguments.length?(f=H,S):f},S.size=function(H){return arguments.length?(_=!1,s=+H[0],d=+H[1],S):_?null:[s,d]},S.nodeSize=function(H){return arguments.length?(_=!0,s=+H[0],d=+H[1],S):_?[s,d]:null},S}class SVGChart extends BaseChart{constructor(s,d,_,S={}){super(s,d,_),this.svg=select(this.contentDiv).append("svg").attr("width",this.width).attr("height",this.height),this.config.axis=this.config.axis||{};const T=this.config.axis;function F(J,K,z){J[K]==null&&(J[K]=z)}for(const J of[["x",25],["y",40],["ry",25],["tx",25]]){const K=S[J[0]];if(K){T[J[0]]=T[J[0]]||{};const z=T[J[0]];F(z,"textSize",13),F(z,"label",""),F(z,"size",K.size||J[1]),F(z,"tickfont",10)}}this._setMargins(),this.graph_area=this.svg.append("g").attr("transform",`translate(${this.margins.left},${this.margins.top})`),this.ry_axis_svg=this.svg.append("g"),this.tx_axis_svg=this.svg.append("g"),this.x_axis_svg=this.svg.append("g"),this.y_axis_svg=this.svg.append("g");const M=S.x;M&&(M.custom||(this.x_scale=M.type==="band"?band():linear$1(),this.x_axis_call=axisBottom(this.x_scale)),this.x_axis_label=this.x_axis_svg.append("text").style("text-anchor","middle").style("fill","black").attr("alignment-baseline","auto"));const P=S.y;P&&(P.custom||(this.y_scale=P.type==="band"?band():linear$1(),this.y_axis_call=axisLeft(this.y_scale)),this.y_axis_label=this.y_axis_svg.append("text").attr("text-anchor","middle").style("fill","black").attr("alignment-baseline","auto"));const H=S.ry;H!=null&&H.label&&(this.ry_axis_label=this.ry_axis_svg.append("text").attr("text-anchor","middle").style("fill","black").attr("alignment-baseline","text-top"))}_setMargins(){const s=this.config.axis;this.margins={top:s.tx?s.tx.size:10,right:s.ry?s.ry.size:10,bottom:s.x?s.x.size:10,left:s.y?s.y.size:10}}_getContentDimensions(){return{top:this.margins.top,left:this.margins.left,height:this.height-this.margins.bottom-this.margins.top,width:this.width-this.margins.left-this.margins.right}}setAxisSize(s,d){switch(s){case"tx":this.margins.top=d;break;case"ry":this.config.axis.ry.size=d,this.margins.right=d;break;case"y":this.config.axis.y.size=d,this.margins.left=d;break;case"x":this.config.axis.x.size=d,this.margins.bottom=d}this.graph_area.attr("transform",`translate(${this.margins.left},${this.margins.top})`)}updateAxis(){const s=this._getContentDimensions(),d=this.config.axis;if(this.ry_axis_svg.attr("transform",`translate(${s.left+s.width},${s.top})`),this.tx_axis_svg.attr("transform",`translate(${s.left},0)`),this.x_axis_svg.attr("transform",`translate(${s.left},${this.height-this.margins.bottom})`),this.y_axis_svg.attr("transform",`translate(${s.left},${s.top})`),d.x&&(this.x_scale&&(this.x_scale.range([0,s.width]),this.x_axis_svg.selectAll(".tick text").attr("font-family","Helvetica"),this.x_axis_svg.transition().call(this.x_axis_call),d.x.rotate_labels?this.x_axis_svg.selectAll(".tick text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".10em").attr("transform","rotate(-45)"):this.x_axis_svg.selectAll(".tick text").style("text-anchor",null).attr("dx",null).attr("dy",".71em").attr("transform",null),this.x_axis_svg.selectAll(".tick text").attr("font-size",d.x.tickfont)),this.x_axis_label.attr("x",s.width/2).attr("y",this.margins.bottom-4).text(this.config.axis.x.label).attr("font-size",`${this.config.axis.x.textsize}px`).attr("font-family","Helvetica")),d.y){if(this.y_scale){if(this.y_scale.range([0,s.height]),s.height/this.y_scale.domain().length<8){const S=Math.round(this.y_scale.domain().length/(s.height/10));this.y_axis_call.tickFormat((T,F)=>F%S===0?T:"")}else this.y_axis_call.tickFormat(null);this.y_axis_svg.transition().call(this.y_axis_call),d.y.rotate_labels?this.y_axis_svg.selectAll(".tick text").style("text-anchor","end").attr("dy","1em").attr("transform","rotate(+45)"):this.y_axis_svg.selectAll(".tick text").style("text-anchor",null).attr("dx",null).attr("dy","0.32em").attr("transform",null),this.y_axis_svg.selectAll(".tick text").attr("font-size",d.y.tickfont).attr("font-family","Helvetica")}this.y_axis_label.attr("x",-s.height/2).attr("y",-s.left+10).attr("transform","rotate(-90)").text(this.config.axis.y.label).attr("font-size",`${this.config.axis.y.textsize}px`).attr("font-family","Helvetica")}this.ry_axis_label&&this.ry_axis_label.attr("x",s.height/2).attr("y",-this.margins.right+15).attr("transform","rotate(90)").text(this.config.axis.ry.label).attr("font-size",`${this.config.axis.ry.textsize}px`)}setSize(s,d){super.setSize(s,d),this.svg&&this.svg.attr("width",this.width).attr("height",this.height)}drawXTree(s,d,_,S){select(this.contentDiv).transition().duration(400).ease(linear);const T=this._getContentDimensions(),P=cluster().size([T.width,_])(s).descendants(),H=T.width/d;for(const J of P)J.children||(J.x=H/2+H*J.data.order);for(const J of P)if(!J.children){let K=J.parent;for(;K;)K.x=K.children[0].x+(K.children[1].x-K.children[0].x)/2,K=K.parent}this.tx_axis_svg.selectAll(".tree-link").data(P.slice(1)).join("path").attr("class","tree-link").style("stroke","currentColor").style("fill","none").style("stroke-width","1px").transition("trans").attr("d",J=>{let K=J.x;return J.children||(K=H/2+H*J.data.order),`M ${K} ${J.y+S} L${K} ${J.parent.y+S} L${J.parent.x} ${J.parent.y+S}`})}drawYTree(s,d){select(this.contentDiv).transition().duration(400).ease(linear);const _=this._getContentDimensions(),S=this.margins.right,M=cluster().size([_.height,S])(s).descendants(),P=_.height/d;for(const H of M)H.children||(H.x=P/2+P*H.data.order);for(const H of M)if(!H.children){let J=H.parent;for(;J;)J.x=J.children[0].x+(J.children[1].x-J.children[0].x)/2,J=J.parent}this.ry_axis_svg.selectAll(".tree-link").data(M.slice(1)).join("path").attr("class","tree-link").style("stroke","currentColor").style("fill","none").style("stroke-width","1px").transition("trans").attr("d",H=>{let J=H.x;return H.children||(J=P/2+P*H.data.order),`M ${S-H.y} ${J} L${S-H.parent.y} ${J} L${S-H.parent.y} ${H.parent.x}`})}getSettings(){const s=super.getSettings(),d=this.config;let _=[];return this.config.axis.y&&(_=_.concat([{type:"check",current_value:d.axis.y.rotate_labels,label:"Rotate Y axis labels",func:S=>{d.axis.y.rotate_labels=S,this.setSize()}},{type:"slider",max:20,min:4,step:1,doc:this.__doc__,current_value:d.axis.y.tickfont,label:"Y axis text size",func:S=>{d.axis.y.tickfont=S,this.setSize()}},{type:"slider",max:200,min:20,step:1,doc:this.__doc__,current_value:d.axis.y.size,label:"Y axis width",func:S=>{this.setAxisSize("y",S),this.setSize()}}])),this.config.axis.x&&(_=_.concat([{type:"check",current_value:d.axis.x.rotate_labels,label:"Rotate X axis labels",func:S=>{d.axis.x.rotate_labels=S,this.updateAxis()}},{type:"slider",max:20,min:4,step:1,doc:this.__doc__,current_value:d.axis.x.tickfont,label:"X axis text size",func:S=>{d.axis.x.tickfont=S,this.setSize()}},{type:"slider",max:200,min:20,step:1,doc:this.__doc__,current_value:d.axis.x.size,label:"X axis Height",func:S=>{this.setAxisSize("x",S),this.setSize()}}]),this.config.axis.ry&&(_=_.concat([{type:"slider",max:200,min:20,step:1,doc:this.__doc__,current_value:d.axis.x.size,label:"Right Y Axis size",func:S=>{this.setAxisSize("ry",S),this.setSize()}}]))),s.concat([{type:"folder",label:"Axis controls",current_value:_,func:S=>{}}])}_addLegendToSVG(s){const d=this[s];if(!d)return;const _=[d.offsetLeft,d.offsetTop];d._leg=d.querySelector("g"),d._leg_g=select(d._leg).attr("transform",`translate(${_[0]},${_[1]})`),this.svg.node().append(d._leg_g.node())}_removeLegendFromSVG(s){const d=this[s];d&&(d._leg_g.attr("transform","translate(0,0)"),this.legend.querySelector("svg").append(d._leg),this.legend._leg=void 0,this.legend._leg_g=void 0)}getImage(s,d){this.addToImage&&this.addToImage(),this._addLegendToSVG("legend"),this.extra_legends&&this.extra_legends.forEach(S=>this._addLegendToSVG(S));const _=new XMLSerializer().serializeToString(this.svg.node());d==="png"?this.getImageFromSVG(this.svg.node(),S=>{s(S),this.removeFromImage&&this.removeFromImage(),this._removeLegendFromSVG("legend"),this.extra_legends&&this.extra_legends.forEach(T=>this._removeLegendFromSVG(T))}):(s(_),this.removeFromImage&&this.removeFromImage(),this._removeLegendFromSVG("legend"),this.extra_legends&&this.extra_legends.forEach(S=>this._removeLegendFromSVG(S)))}}let Dimension$1=class{constructor(s){this.filterBuffer=new SharedArrayBuffer(s.size),this.parent=s,this.filterArray=new Uint8Array(this.filterBuffer),this.filterArguments=null,this.filterIndexes=null,this.filterMethod=null}filterPredicate(s,d){const _=this.parent.filterArray,S=this.parent,T=s.predicate,F=this.filterArray;for(let M=0;M<this.parent.size;M++)!T(M)?(F[M]===0&&++_[M]===1&&S.filterSize--,F[M]=1):(F[M]===1&&--_[M]===0&&S.filterSize++,F[M]=0)}removeFilter(s=!0){if(!this.filterMethod)return;const d=this.parent.filterArray,_=this.filterArray,S=this.parent,T=this.parent.size;this.filterArguments=void 0,this.filterColumns=void 0,this.filterMethod=void 0;for(let F=0;F<T;F++)_[F]===1&&(--d[F]===0&&S.filterSize++,_[F]=0);if(this.bgfArray)for(let F=0;F<T;F++)this.bgfArray[F]===0&&(--d[F]===0&&S.filterSize++,_[F]=2);s&&this.parent._callListeners("filtered",this)}getLocalFilter(){return this.filterArray}filterOnIndex(s){const d=this.parent.filterArray,_=this.parent.size,S=this.filterArray,T=this.parent;for(let F=0;F<_;F++)s.has(F)?(S[F]===1&&--d[F]===0&&T.filterSize++,S[F]=0):(S[F]===0&&++d[F]===1&&T.filterSize--,S[F]=1)}filter(s,d,_,S=!0){const T=performance.now();if(this.filterColumns=d,this.filterArguments=_,this.filterMethod=s,this[s](_,d),this.bgfArray){const F=this.parent.filterArray,M=this.parent.size,P=this.filterArray,H=this.parent;for(let J=0;J<M;J++)this.bgfArray[J]===0&&(++F[J]===1&&H.filterSize--,P[J]=2)}S&&this.parent._callListeners("filtered",this),performance.now()-T>100?console.warn(`method${s}: ${performance.now()-T}`):console.log(`method${s}: ${performance.now()-T}`)}async getValueSet(s){const d=this.parent.columnIndex[s],_=d.data,S=this.parent.filterArray,T=this.filterArray,F=this.parent.size,M=new Set;for(let P=0;P<F;P++)T[P]===0&&S[P]===0&&(d.values?M.add(d.values[_[P]]):M.add(_[P]));return M}reFilterOnDataChanged(s){if(this.filterMethod&&this.filterColumns){for(const d of this.filterColumns)if(typeof d=="string"&&s.indexOf(d)!==-1)return this.filter(this.filterMethod,this.filterColumns,this.filterArguments,!1),!0}return!1}updateSize(){const s=new SharedArrayBuffer(this.parent.size),d=new Uint8Array(s);d.set(this.filterArray),this.filterBuffer=s,this.filterArray=d,this.bgfArray&&(this.bgfData,this.setBackgroundFilter(b.column.b.cat)),this.filterMethod&&this.filter(this.filterMethod,this.filterColumns,this.filterArguments,!1)}setBackgroundFilter(s,d){const _=this.parent.columnIndex[s],S=_.values.indexOf(d),T=_.data;this.bgfData={column:s,cat:d},this.bgfArray=new Uint8Array(this.parent.size);for(let F=0;F<this.parent.size;F++)T[F]===S?this.bgfArray[F]=1:this.filterArray[F]=2}clearBackGroundFilter(){this.bgfArray=null,this.bgfData=null}destroy(s=!0){this.removeFilter(s),this.filterBuffer=null,this.localFilter=null,this.parent.dimensions.splice(this.parent.dimensions.indexOf(this),1)}};Dimension$1.types={base_dimension:Dimension$1};class CategoryDimension extends Dimension$1{constructor(s){super(s),this.worker=new Worker(new URL(""+new URL("../assets/catWorker-D5lhlpxE.js",import.meta.url).href,import.meta.url))}filterCategoriesPredicate(s,d){const _=s,S=this.parent.columnIndex[d[0]],T=S.data,F=S.values;if(typeof _=="string"){const J=F.indexOf(_);if(S.datatype==="multitext"){const z=S.stringLength,oe=se=>{const ae=se*z;for(let ge=ae;ge<ae+z;ge++)if(T[ge]===J)return!0;return!1};return this.filterPredicate({predicate:oe})}const K=z=>T[z]===J;return this.filterPredicate({predicate:K})}const M=new Set;for(const J of _)M.add(F.indexOf(J));if(S.datatype==="multitext"){const J=S.stringLength,K=_.operand==="and",z=_.map(ae=>F.indexOf(ae)),oe=M.size===1,se=ae=>{const ge=ae*J,pe=K?z.slice(0):M;for(let he=ge;he<ge+J;he++){if(T[he]===65535&&K&&oe&&pe.length<z.length)return!0;if(K){const ve=pe.indexOf(T[he]);if(ve!==-1&&(pe.splice(ve,1),pe.length===0))return!0}else if(pe.has(T[he]))return!0}return!1};return this.filterPredicate({predicate:se})}const P=Array.from(M);if(P.length===1){const J=P[0],K=z=>T[z]===J;return this.filterPredicate({predicate:K})}if(P.length===2){const J=P[0],K=P[1],z=oe=>T[oe]===J||T[oe]===K;return this.filterPredicate({predicate:z})}const H=J=>M.has(T[J]);return this.filterPredicate({predicate:H})}filterCategories(s,d){if(window.predicateTest)return this.filterCategoriesPredicate(s,d);const _=s,S=this.parent,T=S.columnIndex[d[0]],F=T.data,M=S.filterArray,P=this.filterArray,H=T.values,J=new Set,K=this.parent.size;if(typeof _=="string"){const z=H.indexOf(_);if(T.datatype==="multitext"){const oe=T.stringLength;for(let se=0;se<K;se++){const ae=se*oe;let ge=!1;for(let pe=ae;pe<ae+oe;pe++)if(F[pe]===z){ge=!0;break}ge?(P[se]===1&&--M[se]===0&&S.filterSize++,P[se]=0):(P[se]===0&&++M[se]===1&&S.filterSize--,P[se]=1)}}else for(let oe=0;oe<K;oe++)F[oe]===z?(P[oe]===1&&--M[oe]===0&&S.filterSize++,P[oe]=0):(P[oe]===0&&++M[oe]===1&&S.filterSize--,P[oe]=1)}else{for(const z of _)J.add(H.indexOf(z));if(T.datatype==="multitext"){const z=T.stringLength,oe=_.operand==="and",se=_.map(ge=>H.indexOf(ge)),ae=J.size===1;for(let ge=0;ge<K;ge++){const pe=ge*z;let he=!1;const ve=oe?se.slice(0):J;for(let be=pe;be<pe+z;be++){if(F[be]===65535){oe&&ae&&ve.length<se.length&&(he=!0);break}if(oe){const Re=ve.indexOf(F[be]);if(Re!==-1&&(ve.splice(Re,1),ve.length===0)){he=!0;break}}else if(ve.has(F[be])){he=!0;break}}he?(P[ge]===1&&--M[ge]===0&&S.filterSize++,P[ge]=0):(P[ge]===0&&++M[ge]===1&&S.filterSize--,P[ge]=1)}}else for(let z=0;z<K;z++)J.has(F[z])?(P[z]===1&&--M[z]===0&&S.filterSize++,P[z]=0):(P[z]===0&&++M[z]===1&&S.filterSize--,P[z]=1)}}filterMultipleCategories(s,d){const _=this.parent,S=[],T=[];for(let H=0;H<d.length;H++){const J=_.columnIndex[d[H]];S.push(J.data),T.push(J.values.indexOf(s[H]))}const F=_.filterArray,M=this.filterArray,P=_.size;for(let H=0;H<P;H++){let J=!0;for(let K=0;K<S.length;K++)if(S[K][H]!==T[K]){J=!1;break}J?(M[H]===1&&--F[H]===0&&_.filterSize++,M[H]=0):(M[H]===0&&++F[H]===1&&_.filterSize--,M[H]=1)}}getSankeyData(s,d,_={}){const S=this.parent.columnIndex[d[0]],T=this.parent.columnIndex[d[1]];_.values=S.values,_.values2=T.values,_.method=_.method||"sankey",_.method==="proportion"&&(_.cats=_.category==null?null:this.parent.columnIndex[d[2]].buffer);const F=performance.now(),M=P=>{console.log(`calc sankey ${S.name} ${T.name} : ${performance.now()-F}`),s(P.data),this.worker.removeEventListener("message",M)};this.worker.addEventListener("message",M),this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,S.buffer,_,T.buffer])}getCategories(s,d,_={}){const S=this.parent.columnIndex[d];_.values=S.values,_.datatype=S.datatype,_.stringLength=S.stringLength,performance.now();const T=F=>{s(F.data),this.worker.removeEventListener("message",T)};this.worker.addEventListener("message",T),this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,S.buffer,_])}filterUnique(s,d){const _=this.parent.columnIndex[d[0]],S=s.split(" "),T=F=>{const M=_.getValue(F);return S.every(P=>M.indexOf(P)!==-1)};return this.filterPredicate({predicate:T})}destroy(){super.destroy(),this.worker.terminate()}}Dimension$1.types.category_dimension=CategoryDimension;class RangeDimension extends Dimension$1{constructor(s){super(s),this.worker=new Worker(new URL(""+new URL("../assets/binWorker-DIC2QqPk.js",import.meta.url).href,import.meta.url))}filterSquare(s,d){let _=null;typeof d[0]!="string"?_=d[0]:_=this.parent.columnIndex[d[0]].data;const S=this.parent.columnIndex[d[1]].data,T=s.range1,F=s.range2,M=P=>{const H=_[P],J=S[P];return H>=T[0]&&H<=T[1]&&J>=F[0]&&J<=F[1]&&!Number.isFinite(H)&&!Number.isFinite(J)};return this.filterPredicate({predicate:M},d)}filterPoly(s,d){const _=s;let S=Number.MAX_VALUE,T=Number.MAX_VALUE,F=Number.MIN_VALUE,M=Number.MIN_VALUE;for(const z of _)S=Math.min(S,z[0]),F=Math.max(F,z[0]),T=Math.min(T,z[1]),M=Math.max(M,z[1]);let P=null;typeof d[0]!="string"?P=d[0]:P=this.parent.columnIndex[d[0]].data;const H=this.parent.columnIndex[d[1]].data,J=_,K=z=>{const oe=P[z],se=H[z];let ae=!1;if(oe<S||oe>F||se<T||se>M||!Number.isFinite(oe)||!Number.isFinite(se))return!1;for(let ge=0,pe=J.length-1;ge<J.length;pe=ge++){const he=J[ge][0],ve=J[ge][1],be=J[pe][0],Re=J[pe][1];ve>se!=Re>se&&oe<(be-he)*(se-ve)/(Re-ve)+he&&(ae=!ae)}return ae};return this.filterPredicate({predicate:K},d)}filterRange(s,d){const _=s.min,S=s.max,T=this.parent.columnIndex[d[0]].data,F=M=>{const P=T[M];return P>=_&&P<=S&&!Number.isNaN(P)};return this.filterPredicate({predicate:F},d)}getBins(s,d,_={}){const S=this.parent.columnIndex[d];_.bins=_.bins===void 0?10:_.bins,_.min=_.min===void 0?S.minMax[0]:_.min,_.max=_.max===void 0?S.minMax[1]:_.max;const T=performance.now(),F=M=>{console.log(`calculate bins ${S.name} : ${performance.now()-T}`),s(M.data)};this.worker.onmessage=F,this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,[S.buffer,S.datatype],_])}getBinsAsync(s,d={}){return new Promise(_=>{this.getBins(_,s,d)})}destroy(){super.destroy(),this.worker.terminate()}}Dimension$1.types.range_dimension=RangeDimension;class CatColDimension extends Dimension$1{constructor(s){super(s),this.worker=new Worker(new URL(""+new URL("../assets/catColWorker-BRK20MZB.js",import.meta.url).href,import.meta.url))}filterCatCol(s,d){const _=this.parent,S=_.filterArray,T=this.filterArray,F=_.columnIndex[d[0]],M=F.data,P=M.length,H=_.columnIndex[d[1]].data,J=s.threshold||0,K=F.values.indexOf(s.cat);for(let z=0;z<P;z++){const oe=H[z];M[z]===K&&!Number.isNaN(oe)&&oe>J?(T[z]===1&&--S[z]===0&&_.filterSize++,T[z]=0):(T[z]===0&&++S[z]===1&&_.filterSize--,T[z]=1)}}getAverages(s,d,_={}){_.method=_.method||"mean";const S=performance.now(),T=this.parent.columnIndex;this.worker.onmessage=M=>{console.log(`calc averages  ${performance.now()-S}`),s(M.data)},_.values=T[d[0]].values,_.columns=d.slice(1);const F=[];for(let M=1;M<d.length;M++)F.push([T[d[M]].buffer,T[d[M]].datatype]);this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,T[d[0]].buffer,F,_])}destroy(){super.destroy(),this.worker.terminate()}}Dimension$1.types.catcol_dimension=CatColDimension;class CatRangeDimension extends RangeDimension{constructor(s,d){super(s,d),this.worker.terminate(),this.worker=new Worker(new URL(""+new URL("../assets/boxPlotWorker-BvOiGWqU.js",import.meta.url).href,import.meta.url))}getKernalDensity(s,d,_={}){const S=performance.now(),T=this.parent.columnIndex[d[0]],F=this.parent.columnIndex[d[1]];this.parent.getMinMaxForColumn(d[1]),_.type="kernal_density",_.scaletrim&&(_.scaletrim=F.quantiles[_.scaletrim]),_.values=T.values;const M=P=>{console.log(`calculate violin ${T.name} : ${performance.now()-S}`),s(P.data)};this.worker.onmessage=M,this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,T.buffer,[F.buffer,F.datatype],_])}getMultiBoxPlotData(s,d,_={}){const S=this.parent.columnIndex,T=performance.now(),F=d.map(P=>[S[P].buffer,c.Index[P].datatype]);_.analysis="multi",_.cat=this.parent.getColumnValues(d[0]).indexOf(_.category);const M=P=>{console.log(`calculate multiboxplot cols:${d.length} time: ${performance.now()-T}`),s(P.data)};this.worker.onmessage=M,this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,F.slice(1),F[0],_])}getBoxPlotData(s,d,_={}){const S=performance.now(),T=this.parent.columnIndex[d[0]],F=this.parent.columnIndex[d[1]];_.analysis="boxplot",_.values=T.values;const M=P=>{console.log(`calculate boxplot ${T.name} : ${performance.now()-S}`),s(P.data)};this.worker.onmessage=M,this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,T.buffer,[F.buffer,F.datatype],_])}}Dimension$1.types.catrange_dimension=CatRangeDimension;class DensityDimension extends RangeDimension{constructor(s){super(s),this.worker.terminate(),this.worker=new Worker(new URL(""+new URL("../assets/densityWorker-CfexsIos.js",import.meta.url).href,import.meta.url),{type:"module"})}getDensityContours(s,d,_={}){const S=performance.now(),T=this.parent.columnIndex;this.worker.onmessage=F=>{console.log(`calc density contours  ${performance.now()-S}`),s(F.data)},this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,[T[d[0]].buffer,T[d[0]].datatype],[T[d[1]].buffer,T[d[1]].datatype],T[d[2]].buffer,_])}}Dimension$1.types.density_dimension=DensityDimension;class ValueSetDimension extends Dimension$1{filterValueset(s,d){if(s.size===0)return;const _=d[0],T=this.parent.columnIndex[_];if(T.values){const M=new Set;s.forEach(P=>{const H=T.values.indexOf(P);H!==-1&&M.add(H)}),s=M}const F=M=>s.has(T.data[M]);return this.filterPredicate({predicate:F},d)}}Dimension$1.types.valueset_dimension=ValueSetDimension;class SortableDimension extends Dimension$1{constructor(s){super(s),this.sortWorker=new Worker(new URL(""+new URL("../assets/sortWorker-ydVuDOCI.js",import.meta.url).href,import.meta.url)),this.orderBuffer=new SharedArrayBuffer(this.parent.size*4),this.order=new Uint32Array(this.orderBuffer);for(let d=0;d<this.parent.size;d++)this.order[d]=d}setSortOrder(s){this.order.set(s)}async sort(s){return await new Promise((d,_)=>{const S=this.orderBuffer,T=s.map(F=>{const M=this.parent.columnIndex[F.col];return{datatype:M.datatype,buffer:M.buffer,values:M.values,stringLength:M.stringLength,desc:F.desc}});this.sortWorker.onmessage=F=>{d(F.data)},this.sortWorker.postMessage({orderBuffer:S,columns:T})})}destroy(){super.destroy(),this.sortWorker.terminate()}}Dimension$1.types.sortable_dimension=SortableDimension;class DeepToolsDimension extends SortableDimension{constructor(s){super(s),this.deepToolsWorker=new Worker(new URL(""+new URL("../assets/deepToolsWorker-Id75ayJb.js",import.meta.url).href,import.meta.url))}setParameters({groups:s,columns:d,rows:_,length:S,displayData:T,data:F}){this.dimensions={groups:s,columns:d,rows:_,length:S},this.displayData=T,this.data=F}updateData(s,d=!1){return new Promise((_,S)=>{this.deepToolsWorker.onmessage=T=>{_(T.data)},this.deepToolsWorker.postMessage({displayData:this.displayData,data:this.data,filterBuffer:this.parent.filterBuffer,dimensions:this.dimensions,orderBuffer:this.orderBuffer,colorScale:s,colorOnly:d})})}destroy(){super.destroy(),this.deepToolsWorker.terminate()}}Dimension$1.types.deeptools_dimension=DeepToolsDimension;function getColorLegendCustom(f,s={}){const d=f.ticks(s.ticks||4),_=d.map(S=>f(S));return getColorLegend(_,d,s)}function getColorLegend(f,s,d={}){const _=f.length,S=d.type||"color",T=S==="circle"?20:12,F=_*T+(_+2)*2,M=createEl("div",{styles:{width:"120px",height:`${(F>215?215:F)+35}px`,position:"absolute",border:"0.5px solid black"},classes:["legend-container"]});createEl("div",{styles:{height:"20px",whiteSpace:"nowrap"},classes:["legend-title"],text:d.label},M);const P=createEl("div",{styles:{overflowY:"auto",overflowX:"hidden",height:"calc(100% - 10px)",width:"100%"},classes:["legend-body"]},M),H=createSVGEl("svg",{height:F,width:180,styles:{position:"relative"}},P),J=createSVGEl("g",{},H),K=S==="color"?14:S==="line"?20:30;for(let z=0;z<_;z++){S==="color"?createSVGEl("rect",{y:(z+1)*2+z*T,x:2,height:"10",width:"10",styles:{fill:f[z]}},J):S==="line"?createSVGEl("rect",{y:(z+1)*2+z*T,x:2,height:"10",width:f[z],styles:{fill:"gray"}},J):S==="circle"&&createSVGEl("circle",{cy:(z+1)*2+z*T+4,cx:15,r:f[z],styles:{fill:"gray"}},J);const oe=createSVGEl("text",{y:(z+1)*2+z*T+6+3,x:K,"alignment-baseline":"center",styles:{"font-size":"12px",fill:"currentcolor"},text:s[z]===""?"none":s[z]},J);select(oe).style("fill","currentcolor")}return makeDraggable(M,{handle:".legend-body"}),makeResizable(M),M}function getColorBar(f,s={}){const d=s,_=f.length,S=f.map((oe,se)=>[`${Math.floor(se/_*100)}%`,oe]),T=d.width||120,F=d.height||45,M=createSVGEl("svg",{height:F,width:T,styles:{position:"relative"}}),P=select(M).append("g"),H=getRandomString();d.label&&P.append("text").text(d.label).attr("x",10).style("fill","currentColor").attr("alignment-baseline","hanging").style("font-size","12px");const J=P.append("defs").append("linearGradient").attr("id",H).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");let K=F;if(d.label&&(K-=10),d.range&&(K-=25),P.append("rect").attr("x",d.range?10:0).attr("y",d.label?10:0).attr("width",d.range?T-20:20).attr("height",K).style("fill",`url(#${H})`),S.forEach(oe=>{J.append("stop").attr("offset",oe[0]).attr("stop-color",oe[1]).attr("stop-opacity",1)}),d.range){const oe=linear$1().domain([d.range[0],d.range[1]]).range([0,T-20]),se=axisBottom(oe).tickFormat((ae,ge)=>ae>=1e4?Number.parseFloat(ae).toPrecision(2):ae).ticks(Math.ceil(T/20));P.append("g").call(se).attr("transform",`translate(10,${F-25})`).selectAll("text").style("text-anchor","end").attr("dx","-.4em").attr("dy",".4em").attr("transform","rotate(-45)")}const z=createEl("div",{height:F,width:T,styles:{position:"absolute"},classes:["legend-container"]});return z.append(M),makeDraggable(z),z}class DataStore{constructor(s,d={},_=null){Bt(this,"_filteredIndicesPromise",null);Bt(this,"_filteredIndexWorker",new Worker(new URL(""+new URL("../assets/filteredIndexWorker-CEl1713S.js",import.meta.url).href,import.meta.url)));if(this.size=s,this.filterSize=s,this.columns=[],this.columnIndex={},this.listeners={},this.indexes={},this.filterBuffer=new SharedArrayBuffer(s),this.filterArray=new Uint8Array(this.filterBuffer),this.dimensions=[],this.name=d.name,this.avivator=d.avivator,this.textDecoder=new TextDecoder,this.columnGroups={},this.subtypeToGroup={},this.interactions=d.interactions,this.deeptools=d.deeptools,this.subgroups={},this.subgroupDataSources=new Set,this.accessOtherDataStore=[],this.syncColumnColors=[],this.linkColumns=[],this.regions=d.regions,makeObservable(this,{_filteredIndicesPromise:observable,_callListeners:action}),this.addListener("invalidateFilteredIndicesCache",action(()=>{this._filteredIndicesPromise=null})),d.row_data_loader&&(_!=null&&_.rowDataLoader?(this.rowDataLoader=_.rowDataLoader,this.rowData=new Map):console.warning(`datasource ${this.name} requires a row data loader but none has been supplied`)),d.binary_data_loader&&(_!=null&&_.binaryDataLoader?(this.binaryDataLoader=_.binaryDataLoader,this.binaryData=new Map):console.warning(`datasource ${this.name} requires a binary data loader but none has been supplied`)),this.columnsWithData=[],this.dirtyColumns={added:{},removed:{},data_changed:{},colors_changed:{}},this.dirtyMetadata=new Set,d.offsets&&(d.offsets.values=d.offsets.values||{},this.offsets=d.offsets),this.images=d.images,this.genome_browser=d.genome_browser,this.tree_diagram=d.tree_diagram,d.columns)for(const S of d.columns)this.addColumn(S,S.data);if(d.columnGroups)for(const S of d.columnGroups)this.addColumnGroup(S);if(d.large_images&&(this.large_images=d.large_images),d.links){this.links=d.links;for(const S in d.links){const T=d.links[S];if(T.rows_as_columns){const F=T.rows_as_columns.subgroups;this.subgroupDataSources.add(S);for(const M in F)this.subgroups[M]={subgroup:F[M],dataSource:S,name_column:T.rows_as_columns.name_column}}T.access_data&&this.accessOtherDataStore.push({dataSource:S,index:T.index}),T.sync_column_colors&&this.syncColumnColors.push({dataSource:S,columns:T.sync_column_colors}),T.columns&&this.linkColumns.push({dataSource:S,columns:T.columns})}}}isFiltered(){return this.filterSize!==this.size}addListener(s,d){this.listeners[s]=d}removeListener(s){delete this.listeners[s]}_callListeners(s,d){for(const _ in this.listeners)try{this.listeners[_](s,d)}catch(S){console.error(`Error calling listener '${_}' for event '${s}'`,S)}}removeAllFilters(){this.filterArray.fill(0);const s=[];for(const d of this.dimensions){if(d.noclear){s.push(d);continue}if(d.filterArray.fill(0),d.filterMethod=null,d.bgfArray)for(let _=0;_<this.size;_++)d.bgfArray[_]===0&&(d.filterArray[_]=2)}this.filterSize=this.size;for(const d of s){const _=d.filterArray;for(let S=0;S<_.length;S++)_[S]===1&&++this.filterArray[S]===1&&this.filterSize--}this._callListeners("filtered","all_removed")}dataChanged(s,d=!0){let _=!1;for(const S of this.dimensions)S.reFilterOnDataChanged(s)&&(_=!0);if(d)for(const S of s)this.setColumnIsDirty(S);_&&this._callListeners("filtered"),this._callListeners("data_changed",{columns:s,hasFiltered:_})}dataHighlighted(s,d){this.highightedData=s,this.loadRowData(s[0]).then(_=>this._callListeners("data_highlighted",{indexes:s,source:d,data:_}))}async loadRowData(s){if(!this.rowDataLoader)return null;if(this.rowData.has(s))return this.rowData.get(s);const d=await this.rowDataLoader(this.name,s);return this.rowData.set(s,d),d}async loadBinaryData(s){if(!this.binaryDataLoader)return null;if(this.binaryData.has(s))return this.binaryData.get(s);const d=await this.binaryDataLoader(this.name,s);return this.binaryData.set(s,d),d}getHighlightedData(){return this.highightedData}triggerFilter(){this._callListeners("filtered")}setColumnIsDirty(s){this.dirtyColumns.added[s]||(this.dirtyColumns.data_changed[s]=!0)}setAllColumnsClean(){this.dirtyColumns.added={},this.dirtyColumns.removed={},this.dirtyColumns.data_changed={},this.dirtyColumns.colors_changed={},this.dirtyMetadata.clear()}getFilter(){return this.filterArray}isRowFiltered(s){return this.filterArray[s]===0}_calculateCategories(s){const d=s.values,_=s.data;for(const S of d);for(let S=0;S<_.length;S++)d[_[S]]}addColumn(s,d=null,_=!1){const S={name:s.name,field:s.field,datatype:s.datatype,getValue:T=>this.getRowAsObject(T,[s.field])[s.field]};S.field||(S.field=s.name),s.colors&&(S.colors=s.colors),s.editable&&(S.editable=!0),s.is_url&&(S.is_url=!0),s.subgroup&&(S.subgroup=s.subgroup,S.sgindex=s.sgindex,S.sgtype=s.sgtype),isColumnText(s)?(S.stringLength=s.stringLength,s.delimiter&&(S.delimiter=s.delimiter),S.values=s.values||[""]):isColumnNumeric(s)?(S.colorLogScale=s.colorLogScale,S.minMax=s.minMax,S.quantiles=s.quantiles):S.stringLength=s.stringLength,this.columns.push(S),this.columnIndex[S.field]=S,d&&this.setColumnData(s.field,d),_&&(this.dirtyColumns.added[s.field]=!0)}getSuggestedValues(s,d,_=10){const S=this.columnIndex[d],T=s.toLowerCase(),F=s.toUpperCase(),M=[];if(S.datatype==="unique"){const P=new TextEncoder,H=P.encode(T),J=P.encode(F),K=s.length,z=S.data,oe=S.stringLength;for(let se=0;se<z.length-K;se++){let ae=!0;for(let ge=0;ge<K;ge++)if(H[ge]!==z[se+ge]&&J[ge]!==z[se+ge]){ae=!1;break}if(ae){const ge=Math.floor(se/oe),pe=this.textDecoder.decode(S.data.slice(ge*oe,ge*oe+oe)).replaceAll("\0","");if(M.push({value:pe,index:ge}),M.length>_)break}}}else if(S.datatype==="text"||S.datatype==="multitext"){const P=s.length;for(let H=0;H<S.values.length;H++){const J=S.values[H];let K=!0;for(let z=0;z<J.length-P;z++){K=!0;for(let oe=0;oe<P;oe++){if(J[oe+z]!==T[oe]&&J[oe+z]!==F[oe]){K=!1;break}console.log("match")}if(K)break;console.log(z)}if(K&&(M.push({value:J,index:H}),M.length>_))break}}return M}addColumnFromField(s){const d=s.split("|");if(d.length!==3)throw new Error(`field ${s} cannot be found in datasource ${this.name}`);let _=this.subtypeToGroup[d[0]],S=null;_?S=_.subgroups[d[0]]:(_=this.subgroups[d[0]],S=_.subgroup),this.columnIndex[s]||this.addColumn({name:d[1],field:s,datatype:"double",subgroup:S.name,sgindex:d[2],sgtype:S.type})}getColumnList(s=null,d=!1){const _=[],S={},T=Object.keys(this.subgroups).map(H=>(S[H]=[],H)),F=Array.isArray(s),M=T.length!==0;for(const H in this.columnIndex){const J=this.columnIndex[H];if(s){if(F){if(s.indexOf(J.datatype)===-1)continue}else if(s==="number"){if(!isColumnNumeric(J))continue}else if(s==="string"){if(!isColumnText(J))continue}else if(s!=="all"&&s!==J.datatype)continue}if(M){let K=!1;for(const z of T)if(J.field.startsWith(`${z}|`)){const oe=this.subgroups[z];S[z].push({name:J.name,field:J.field,datatype:J.datatype,subgroup:{dataSource:oe.dataSource,name_column:oe.name_column}}),K=!0;break}if(K)continue}_.push({name:J.name,field:J.field,datatype:J.datatype})}let P=_.sort((H,J)=>H.name.localeCompare(J.name));if(M)for(const H in S)S[H].sort((J,K)=>J.name.localeCompare(K.name)),P=P.concat(S[H]);return d&&P.push({name:"None",field:"__none__"}),P}getDimension(s){if(!Dimension$1.types[s])throw`Adding non existent Dimension: ${s}`;const d=new Dimension$1.types[s](this);return this.dimensions.push(d),d}getRowAsObject(s,d){d||(d=this.columnsWithData);const _={};for(const S of d){const T=this.columnIndex[S];let F=T.data[s];if(T.datatype==="text"||T.datatype==="text16")F=T.values[F];else if(T.datatype==="double"||T.datatype==="integer"||T.datatype==="int32")Number.isNaN(F)&&(F="missing");else if(T.datatype==="multitext"){const M=", ",P=T.data.slice(s*T.stringLength,s*T.stringLength+T.stringLength);F=Array.from(P.filter(H=>H!==65535)).map(H=>T.values[H]).join(M)}else F=this.textDecoder.decode(T.data.slice(s*T.stringLength,s*T.stringLength+T.stringLength)),F=F.replaceAll("\0","");_[S]=F}return _.__index__=s,_}getFirstFilteredIndex(){for(let s=0;s<this.size;s++)if(this.filterArray[s]===0)return s}async getFilteredIndices(){return this._filteredIndicesPromise?this._filteredIndicesPromise:(action(()=>this._filteredIndicesPromise=new Promise((s,d)=>{const _=this._filteredIndexWorker,S=this.filterSize*Uint32Array.BYTES_PER_ELEMENT,T=new SharedArrayBuffer(S);_.postMessage({filterBuffer:this.filterBuffer,outputBuffer:T}),_.onmessage=F=>{s(new Uint32Array(T))}}))(),this._filteredIndicesPromise)}getFilteredValues(s){const d=new Array(this.filterSize);let _=0;for(let S=0;S<this.size;S++)this.filterArray[S]===0&&(d[_]=this.getRowText(S,s),_++);return d}getRowText(s,d){return this.getRowAsObject(s,[d])[d]}setColumnOffset(s,d){if(!this.offsets)throw new Error("Attempting to set offsets but none are specified in config");s.filter=s.filter||"all";const _=this.offsets.values;let S=_[s.filter];S||(S={},_[s.filter]=S);let T=S[s.group];T||(T={offsets:[0,0],rotation:0},S[s.group]=T),this.updateColumnOffsets(s,s.rotation,d),this.dirtyMetadata.add("offsets")}_getRotationOrigin(s,d,_){const S=this.offsets,T=this.columnIndex[s],F=T.values.indexOf(d),M=T.data,P=this.columnIndex[S.param[0]],H=this.columnIndex[S.param[1]];let J=null,K=null;S.background_filter&&(K=this.columnIndex[S.background_filter],J=K.values.indexOf(_));const z=[Number.MAX_VALUE,Number.MIN_VALUE],oe=[Number.MAX_VALUE,Number.MIN_VALUE];for(let ae=0;ae<this.size;ae++)K&&K.data[ae]!==J||M[ae]===F&&(z[0]=Math.min(z[0],P.originalData[ae]),z[1]=Math.max(z[1],P.originalData[ae]),oe[0]=Math.min(oe[0],H.originalData[ae]),oe[1]=Math.max(oe[1],H.originalData[ae]));const se=ae=>ae[0]+(ae[1]-ae[0])/2;return[se(z),se(oe)]}initiateOffsets(){const s=this.offsets,d=this.columnIndex[s.param[0]],_=this.columnIndex[s.param[1]];d.originalData=new Float32Array(d.data),_.originalData=new Float32Array(_.data)}_getOffsetValues(s,d){const _=this.offsets;let S=null,T=null;if(_.background_filter){const P=this.columnIndex[_.background_filter];S=P.data,T=P.values}const F=this.columnIndex[_.groups],M=[];for(const P in _.values)if(!(s&&P!==s.filter))for(const H in _.values[P]){if(s&&H!==s.group)continue;const J=_.values[P][H],K={index:F.values.indexOf(H)};if(P!=="all"&&(K.filterData=S,K.filterValue=T.indexOf(P)),d&&(J.rotation_center||(J.rotation_center=this._getRotationOrigin(_.groups,H,P)),K.rotation_center=[J.rotation_center[0]+J.offsets[0],J.rotation_center[1]+J.offsets[1]]),s?d?(K.rotation=s.rotation,J.rotation+=s.rotation):(J.offsets[0]+=s.offsets[0],J.offsets[1]+=s.offsets[1],K.offsets=s.offsets):d?K.rotation=J.rotation:K.offsets=J.offsets,d){const z=Math.PI/180*K.rotation;K.cos=Math.cos(z),K.sin=Math.sin(z)}M.push(K)}return M}resetColumnOffsets(s,d,_){s=s||"all";const S=this.offsets;if(!S)throw new Error("Attempting to reset offsets but none are specified in config");delete this.offsets.values[s][d];let T=null,F=null;s!=="all"&&(T=this.columnIndex[this.offsets.background_filter],F=T.values.indexOf(s));const M=this.getColumnValues(S.groups).indexOf(d),P=this.columnIndex[S.groups].data,H=this.columnIndex[S.param[0]],J=this.columnIndex[S.param[1]];for(let K=0;K<this.size;K++)T&&T[K]!==F||P[K]===M&&(J.data[K]=J.originalData[K],H.data[K]=H.originalData[K]);_&&this.dataChanged([S.param[0],S.param[1]],!1),this.dirtyMetadata.add("offsets")}updateColumnOffsets(s,d=!1,_=!1){const S=this.offsets,F=this.columnIndex[S.groups].data,M=this.columnIndex[S.param[0]],P=this.columnIndex[S.param[1]],H=this._getOffsetValues(s,d);for(let J=0;J<this.size;J++)for(const K of H)if(!(K.filterData&&K.filterData[J]!==K.filterValue)&&F[J]===K.index)if(d){const z=K.rotation_center[0],oe=K.rotation_center[1],se=K.cos*(M.data[J]-z)+K.sin*(P.data[J]-oe)+z,ae=K.cos*(P.data[J]-oe)-K.sin*(M.data[J]-z)+oe;M.data[J]=se,P.data[J]=ae}else M.data[J]=M.data[J]+K.offsets[0],P.data[J]=P.data[J]+K.offsets[1];_&&this.dataChanged([S.param[0],S.param[1]],!1)}getColumnIndex(s){if(this.indexes[s])return this.indexes[s];const d=this.columnIndex[s],_={};if(d.datatype==="unique")for(let S=0;S<this.size;S++){let T=this.textDecoder.decode(d.data.slice(S*d.stringLength,S*d.stringLength+d.stringLength)).replaceAll("\0","");T.includes("#")&&(T=T.split("#")[1]),_[T]=S}else for(let S=0;S<this.size;S++)_[d.values[d.data[S]]]=S;return this.indexes[s]=_,_}getDataAsBlob(s,d="all",_="	",S=`
`){let T=null;typeof d!="string"&&(T=d);const F=[],M=["index"].concat(s),P=T?T.length:this.size;F.push(M.join(_));const H=1e4,J=[];for(let K=0;K<P;K++){let z=K;if(T)z=T[K];else if(d==="filtered"&&this.filterArray[K]===1)continue;const oe=this.getRowAsObject(z,s),se=[K].concat(s.map(ae=>oe[ae]));F.push(se.join(_)),F.length>=H&&(J.push(F.join(S)),F.length=0)}return F.length>0&&J.push(F.join(S)),new Blob([J.join(S)],{type:"text/plain"})}setColumnData(s,d){const _=this.columnIndex[s];if(!_)throw`column ${s} is not present in data store`;let S=null;if(Array.isArray(d)?S=this._convertColumn(_,d):S=d,_.buffer=S,_.datatype==="integer"||_.datatype==="double"||_.datatype==="int32"){const T=_.data=_.datatype==="int32"?new Int32Array(S):new Float32Array(S);if(!_.minMax){let F=Number.MAX_VALUE,M=Number.MIN_VALUE;for(let P=0;P<T.length;P++){const H=T[P];Number.isNaN(H)||(F=H<F?H:F,M=H>M?H:M)}_.minMax=[F,M]}if(!_.quantiles){const F=_.data.filter(M=>!Number.isNaN(M)).sort();_.quantiles={};for(const M of[.05,.01,.001])_.quantiles[M]=[quantileSorted(F,M),quantileSorted(F,1-M)]}}else _.datatype==="multitext"||_.datatype==="text16"?_.data=new Uint16Array(S):_.data=new Uint8Array(S);this.columnsWithData.push(s)}appendColumnData(s,d,_){const S=this.columnIndex[s];let T=Uint8Array,F=_;S.datatype==="integer"||S.datatype==="double"?(F=F*4,T=Float32Array):S.datatype==="int32"?(F=F*4,T=Int32Array):S.datatype==="unique"&&(F=F*S.stringLength);const M=new SharedArrayBuffer(F),P=new T(M);P.set(S.data),P.set(new T(d),S.data.length),S.data=P,S.buffer=M}addDataToStore(s,d){const _=d+this.size;for(const F of s)this.appendColumnData(F.column,F.data,_);const S=new SharedArrayBuffer(_),T=new Uint8Array(S);T.set(this.filterArray),this.filterBuffer=S,this.filterArray=T,this.size=_,this.filterSize+=d;for(const F of this.dimensions)F.updateSize();this._callListeners("data_added",this.size)}cleanColumnData(s){const d={},_=this.columnIndex[s];for(const F in _.values)d[F]=0;for(let F=0;F<this.size;F++)d[_.data[F]]++;const S=[],T={};for(let F=0;F<_.values.length;F++)d[F]!==0&&(S.push(_.values[F]),T[F]=S.length-1);for(let F=0;F<this.size;F++)_.data[F]=T[_.data[F]];_.values=S,this.setColumnIsDirty(s),this.dataChanged([s])}_convertColumn(s,d){const _=d.length;if(s.datatype==="text"||s.datatype==="text16"){const M=s.datatype==="text",P=new SharedArrayBuffer(M?this.size:this.size*2),H={};for(let oe=0;oe<_;oe++){const se=d[oe];H[se]===void 0?H[se]=1:H[se]++}const J=[];for(const oe in H)J.push([oe,H[oe]]);s.values=[];const K={};J.sort((oe,se)=>se[1]-oe[1]);for(let oe=0;oe<J.length;oe++)s.values.push(J[oe][0]),K[J[oe][0]]=oe;const z=M?new Uint8Array(P):new Uint16Array(P);for(let oe=0;oe<_;oe++)z[oe]=K[d[oe]];return P}if(s.datatype==="integer"||s.datatype==="double"||s.datatype==="int32"){const M=new SharedArrayBuffer(this.size*4),P=s.datatype==="int32"?new Int32Array(M):new Float32Array(M);for(let H=0;H<_;H++)P[H]=d[H];return M}if(s.datatype==="multitext"){s.delimiter;const M=new Set;let P=0;for(let se=0;se<_;se++){const ge=d[se].split(",");P=Math.max(P,ge.length),ge.forEach(pe=>M.add(pe.trim()))}M.delete("");const H=new SharedArrayBuffer(this.size*P*2),J=new Uint16Array(H);J.fill(65535);const K=new Array(M.size),z={};let oe=0;for(const se of M)z[se]=oe,K[oe]=se,oe++;for(let se=0;se<_;se++){const ae=se*P,ge=d[se];if(ge==="")continue;const pe=ge.split(",");pe.sort();for(let he=0;he<pe.length;he++)J[ae+he]=z[pe[he].trim()]}return s.values=K,s.stringLength=P,H}let S=0;for(let M=0;M<_;M++)S=Math.max(S,d[M].length);s.stringLength=S;const T=new TextEncoder,F=new SharedArrayBuffer(this.size*S);for(let M=0;M<_;M++){const P=T.encode(d[M].substring(0,S));new Uint8Array(F,M*S,S).set(P,0)}return F}getColorFunction(s,d={}){let _=this.columnIndex[s];s==null&&(_=s={datatype:d.datatype},d.useValue=!0);const S=_.data,T=d.overideValues||{},F=this.getColumnColors(s,d);function M(P){return Number.isNaN(P)||T.fallbackOnZero&&P===0}if(_.datatype==="text"||_.datatype==="text16"||_.datatype==="multitext")return P=>F[S[P]];if(_.datatype==="integer"||_.datatype==="double"||_.datatype==="int32"){const P=T.min==null?_.minMax[0]:T.min,H=T.max==null?_.minMax[1]:T.max,J=d.bins||100,K=(H-P)/J,z=d.asArray?[255,255,255]:"#ffffff";return d.useValue?oe=>{if(M(oe))return z;let se=Math.floor((oe-P)/K);return se<0?se=0:se>=F.length&&(se=F.length-1),F[se]}:oe=>{const se=S[oe];if(M(se))return z;let ae=Math.floor((se-P)/K);return ae<0?ae=0:ae>=F.length&&(ae=F.length-1),F[ae]}}}getColorForCategory(s,d){const S=this.columnIndex[s].values.indexOf(d);return this.getColumnColors(s)[S]}getColorLegend(s,d={}){const _=this.getColumnColors(s,d),S=this.columnIndex[s],T=d.name||S.name;if(S.datatype==="integer"||S.datatype==="double"||S.datatype==="int32"){let F=S.minMaX;if(d.overideValues){const M=d.overideValues;F=[M.min==null?S.minMax[0]:M.min,M.max==null?S.minMax[1]:M.max]}return getColorBar(_,{range:F,label:T})}if(isColumnText(S))return getColorLegend(_,S.values,{label:T})}getValueToColor(s){const d={},_=this.getColumnColors(s),S=this.getColumnValues(s);for(let T=0;T<S.length;T++)d[S[T]]=_[T];return d}getColumnQuantile(s,d){const _=this.columnIndex[s];if(d&&d!=="none"){if(_.quantiles&&_.quantiles!=="NA")return[_.quantiles[d][0],_.quantiles[d][1]]}else return _.minMax}setColumnColors(s,d,_=!1){const S=this.columnIndex[s];if(d.length!==S.values.length)throw new Error(`${s} being set with incorrect number of columns `);S.colors=d.slice(0),this.dirtyColumns.colors_changed[s]=!0,_&&this.dataChanged([s],!1)}getColumnColors(s,d={}){let _=s;typeof s=="string"&&(_=this.columnIndex[s]);const S=d.asArray;if(_.datatype==="double"||_.datatype==="integer"||_.datatype==="int32"){const T=d.overideValues||{},F=T.colors||_.colors||defaultIPalette,M=T.min===void 0?_.minMax[0]:T.min,P=T.max===void 0?_.minMax[1]:T.max,H=linspace(M,P,F.length),J=linear$1().domain(H).range(F).clamp(!0),K=T.bins||100,z=(P-M)/K;let oe=new Array(K+1);for(let ae=0;ae<K+1;ae++)oe[ae]=J(M+ae*z),S&&(oe[ae]=rgbToRGB(oe[ae]));let se=_.colorLogScale;if(T.colorLogScale!=null&&(se=T.colorLogScale),se){const ae=symlog().domain([M,P]).range([0,K]).clamp(!0),ge=new Array(K+1);for(let pe=0;pe<K+1;pe++)ge[pe]=oe[Math.floor(ae(M+pe*z))];oe=ge}return oe}if(_.datatype==="text"||_.datatype==="multitext"||_.datatype==="text16"){let T=_.colors;if(!T){const F=_.values.length,M=defaultPalette.length;if(F<M)T=defaultPalette.slice(0,F);else{T=[];const P=Math.floor(F/M);for(let H=0;H<P;H++)T=T.concat(defaultPalette);T=T.concat(defaultPalette.slice(0,F%M))}}return S&&(T=T.map(F=>hexToRGB(F))),T}}addColumnGroup(s){s.columns||(s.columns=[]),this.columnGroups[s.name]=s}getColumnGroup(s){const d=this.columnGroups[s];return d?d.columns:null}getRawColumn(s){return this.columnIndex[s].data}getMinMaxForColumn(s){return this.columnIndex[s].minMax}getColumnRange(s){const d=this.columnIndex[s];return d.minMax?d.minMax[1]-d.minMax[0]:(console.error(`unknown minMax for column ${s}`),[0,50])}getColumnInfo(s){const d=this.columnIndex[s];return{name:d.name,field:d.field,datatype:d.datatype,stringLength:d.stringLength,subgroup:d.subgroup,sgindex:d.sgindex,sgtype:d.sgtype}}getLoadedColumns(){return this.columns.filter(s=>s.data!=null).map(s=>s.field)}getAllColumns(){return this.columns.map(s=>s.field)}getColumnValues(s,d=null){const _=this.columnIndex[s].values;return d==="name_value"?Array.from(_,T=>({name:T,value:T})).sort((T,F)=>T.name.localeCompare(F.name)):_}getColumnName(s){const d=this.columnIndex[s];return d?d.name:null}removeColumn(s,d=!1,_=!1){const S=this.columnIndex[s];S.data=null,S.buffer=null,this.columns=this.columns.filter(F=>F.field!==s),delete this.columnIndex[s];const T=this.columnsWithData.indexOf(s);T!==-1&&this.columnsWithData.splice(T,1),d&&(this.dirtyColumns.added[s]?delete this.dirtyColumns.added[s]:this.dirtyColumns.removed[s]=!0),_&&this._callListeners("column_removed",s)}}function linspace(f,s,d){const _=[],S=(s-f)/(d-1);let T=0;for(;T<d-1;)_.push(f+T*S),T++;return _.push(s),_}function hexToRGB(f){f=f.replace("#","");const s=Number.parseInt(f,16),d=s>>16&255,_=s>>8&255,S=s&255;return[d,_,S]}function RGBToHex(f){return`#${f.map(s=>{const d=s.toString(16);return d.length===1?`0${d}`:d}).join("")}`}function rgbToRGB(f){return f?(f=f.substring(4,f.length-1).split(", "),f.map(s=>Number.parseInt(s))):[255,255,255]}const defaultPalette=["#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999","#1CE6FF","#FF34FF","#FF4A46","#008941","#676FA6","#A30059","#FFDBE5","#7A4900","#0000A6","#63FFAC","#B79762","#004D43","#8FB0FF","#997D87","#5A0007","#809693","#FEFFE6","#1B4400","#4FC601","#3B5DFF","#4A3B53","#FF2F80","#61615A","#BA0900","#6B7900","#00C2A0","#FFAA92","#FF90C9","#B903AA","#D16100","#DDEFFF","#000035","#7B4F4B","#A1C299","#300018","#0AA6D8","#013349","#00846F","#372101","#FFB500","#C2FFED","#A079BF","#CC0744","#C0B9B2","#C2FF99","#001E09","#00489C","#6F0062","#0CBD66","#EEC3FF","#456D75","#B77B68","#7A87A1","#788D66","#885578","#FAD09F","#FF8A9A","#D157A0","#BEC459","#456648","#0086ED","#886F4C","#34362D","#B4A8BD","#00A6AA","#452C2C","#636375","#A3C8C9","#FF913F","#938A81","#575329","#00FECF","#B05B6F","#8CD0FF","#3B9700","#04F757","#C8A1A1","#1E6E00","#7900D7","#A77500","#6367A9","#A05837","#6B002C","#772600","#D790FF","#9B9700","#549E79","#FFF69F","#201625","#72418F","#BC23FF","#99ADC0","#3A2465","#922329","#5B4534","#FDE8DC"],defaultIPalette=["#3288bd","#66c2a5","#abdda4","#e6f598","#fee08b","#fdae61","#f46d43","#d53e4f"];class WGLChart extends SVGChart{constructor(s,d,_,S){super(s,d,_,S);const T=this.config;T.tooltip||(T.tooltip={show:!1}),T.default_color=T.default_color||"#377eb8";const F=this._getContentDimensions();this.graphDiv=createEl("div",{styles:{position:"absolute",left:`${F.left}px`,top:`${F.top}px`,width:`${F.width}px`,height:`${F.height}px`}},this.contentDiv),this.tooltip=createEl("div",{styles:{position:"absolute",zIndex:100,display:"none","background-color":"lightgray"}},this.graphDiv)}onDataHighlighted(s){this.app.setHighlightPoints(s.indexes),this.app.refresh()}afterAppCreation(){const s=this.config;this.app.addHandler("object_over",(S,T)=>{s.tooltip.show&&this.showTooltip(S,T)}),this.app.addHandler("object_out",(S,T)=>{this.tooltip.style.display="none"}),s.default_color=s.default_color||"#377eb8",s.on_filter=s.on_filter==null?"hide":s.on_filter,this.app.setFilterAction(s.on_filter);const d=hexToRGB(s.default_color);let _=()=>d;if(s.color_by){const S={asArray:!0,overideValues:{colorLogScale:this.config.log_color_scale}};this._addTrimmedColor(s.color_by,S),_=this.dataStore.getColorFunction(s.color_by,S),s.color_legend||(s.color_legend={display:!0}),this.setColorLegend()}return this.app.addHandler("object_clicked",S=>{this.dataStore.dataHighlighted([S],this)}),_}setToolTipColumn(s){this.config.tooltip.column=s}showTooltip(s,d){const _=this.graphDiv.getBoundingClientRect(),S=this.dataStore.getRowAsObject(d),T=s.clientX-_.left,F=s.clientY-_.top;this.tooltip.style.display="block",this.tooltip.style.left=`${T}px`,this.tooltip.style.top=`${F}px`,this.tooltip.textContent=S[this.config.tooltip.column]}getSetupConfig(){const s=this.config,d=hexToRGB(s.default_color);let _=()=>d;return s.color_by&&(_=this.dataStore.getColorFunction(s.color_by,{asArray:!0})),{localFilter:this.dim.getLocalFilter(),globalFilter:this.dataStore.getFilter(),colorFunc:_}}setSize(s,d){super.setSize(s,d);const _=this._getContentDimensions();(_.width<1||_.height<1)&&(_.width=50,_.height=50,console.error("WGLChart: bad _getContentDimensions()")),this.app.setSize(_.width,_.height),this.graphDiv.style.left=`${_.left}px`,this.graphDiv.style.top=`${_.top}px`,this.updateAxis()}onDataFiltered(s){s==="all_removed"&&(this.app.clearBrush(),this.app.setFilter(!1),this.resetButton.style.display="none"),this.app.setHighlightPoints(null),this.app.refresh()}remove(s=!0){this.dim.destroy(s),this.app.remove(),super.remove()}removeFilter(){this.filter!==null&&(this.dim.removeFilter(),this.app.clearBrush(),this.app.setFilter(!1),this.app.refresh())}colorByColumn(s){this.config.color_by=s;const d=this.getColorFunction(s,!0),_=performance.now();this.app.colorPoints(d),console.log(`color time:${performance.now()-_}`),setTimeout(()=>{this.app.refresh()},50)}colorByDefault(){this.legend&&this.legend.remove();const s=hexToRGB(this.config.default_color);this.app.colorPoints(()=>s),setTimeout(()=>{this.app.refresh()},50)}changeBaseDocument(s){this.app.clearBrush(),this.app.__doc__=s,super.changeBaseDocument(s)}getColorOptions(){return{colorby:"all",has_default_color:!0}}pinChart(){this.isPinned=!0,this.pinnedFilter=this.dataStore.getFilter().slice(0),this.app.setGlobalFilter(this.pinnedFilter)}unpinChart(){this.isPinned=!1,this.pinnedFilter=null,this.app.setGlobalFilter(this.dataStore.getFilter()),this.app.refresh()}addToImage(){this.app.refresh();let s=this.app.canvas.toDataURL("image/png");s=s.replace(/^data:image\/png/,"data:application/octet-stream");const d=this._getContentDimensions();this.svg.append("image").attr("xlink:href",s).attr("width",d.width).attr("height",d.height).attr("x",d.left).attr("y",d.top)}removeFromImage(){this.svg.select("image").remove()}getSettings(s){const d=super.getSettings(),_=this.config,S=this.dataStore.getColumnList();return d.splice(2,0,{type:"slider",max:1,min:0,doc:this.__doc__,current_value:_.opacity,label:"Point Opacity",func:T=>{_.opacity=T,this.app.setPointOpacity(T),this.app.refresh()}},{type:"slider",max:10,min:0,doc:this.__doc__,current_value:_.radius,label:"Point Size",func:T=>{_.radius=T,this.app.setPointRadius(T),this.app.refresh(),console.log(T)}}),d.concat([{type:"check",label:"Show Tooltip",current_value:_.tooltip.show,func:T=>{_.tooltip.show=T;const F=_.tooltip.column||S[0].field;this.setToolTipColumn(F)}},{type:"dropdown",label:"Tooltip value",current_value:_.tooltip.column||S[0].field,values:[S,"name","field"],func:T=>{this.setToolTipColumn(T)}},{type:"button",label:"Centre Plot",func:T=>{this.centerGraph(),this.app.refresh()}},{type:"radiobuttons",label:"Action on Filter",choices:[["Hide Points","hide"],["Gray Out Points","grey"]],current_value:_.on_filter,func:T=>{_.on_filter=T,this.app.setFilterAction(T),this.app.refresh()}}])}}function processArrayBuffer(f,s,d){const _=[];let S=0;for(const T of s){let F=T.datatype==="int32"?Int32Array:Float32Array,M=d,P=4;if(T.datatype==="unique"||T.datatype==="text"?(F=Uint8Array,P=1,T.datatype==="unique"&&(P=T.stringLength,M=d*P)):T.datatype==="multitext"?(F=Uint16Array,T.stringLength?(P=T.stringLength*2,M=d*T.stringLength):(P=2,M=d)):T.datatype==="text16"&&(F=Uint16Array,P=2,M=d),T.sgtype==="sparse"){const H=new Uint32Array(f,S,1)[0];S+=4;const J=new Uint32Array(f,S,H);S+=H*4;const K=new Float32Array(f,S,H);S+=H*4;const z=new SharedArrayBuffer(d*4),oe=new Float32Array(z);oe.fill(Number.NaN);for(let se=0;se<J.length;se++)oe[J[se]]=K[se];_.push({data:z,field:T.field})}else{const H=d*P,J=new F(f,S,M),K=new SharedArrayBuffer(H);new F(K).set(J,0),_.push({data:K,field:T.field}),S+=H}}return _}function getArrayBufferDataLoader(f,s=!1){return async(d,_,S)=>{let F=await(await fetch(f,{method:"POST",body:JSON.stringify({columns:d,data_source:_}),headers:{"Content-Type":"application/json"}})).arrayBuffer();return F=s?await decompressData(F):F,processArrayBuffer(F,d,S)}}function getLocalCompressedBinaryDataLoader(f,s){const d={};for(const _ of f)d[_.name]=new CompressedBinaryDataLoader(`${s}/${_.name}.gz`,_.size);return async(_,S,T)=>await d[S].getColumnData(_,T)}class CompressedBinaryDataLoader{constructor(s,d){this.url=s,this.index=null,this.size=d}async getColumnData(s,d){const{default:_}=await __vitePreload(async()=>{const{default:S}=await import("../assets/index-CLZsWIdx.js").then(T=>T.i);return{default:S}},__vite__mapDeps([10,1]),import.meta.url);if(!this.index){const S=this.url.replace(".gz",".json"),T=await fetch(S);this.index=await T.json()}return await Promise.all(s.map(async S=>{let T=S.field;if(S.subgroup){const K=S.field.split("|");T=K[0]+K[2]}const F=this.index[T];let M=null;const P={headers:{responseType:"arraybuffer",range:`bytes=${F[0]}-${F[1]}`}};try{M=await fetch(this.url,P)}catch{M=await fetch(this.url,P)}const H=await M.arrayBuffer(),J=F[1]-F[0]+1;H.byteLength!==J&&console.warn(`Expected ${J} bytes but got ${H.byteLength} for ${S.field}... is the server correctly configured to Accept-Ranges?`);try{const K=_.inflate(H);if(S.sgtype==="sparse"){const se=K.buffer,ae=new Uint32Array(se,0,1)[0],ge=new Uint32Array(se,4,ae),pe=new Float32Array(se,ae*4+4,ae),he=new SharedArrayBuffer(d*4),ve=new Float32Array(he);ve.fill(Number.NaN);for(let be=0;be<ge.length;be++)ve[ge[be]]=pe[be];return{data:he,field:S.field}}const z=new SharedArrayBuffer(K.length);return new Uint8Array(z).set(K,0),{data:z,field:S.field}}catch(K){console.warn(`Error inflating ${S.field}: ${K}`)}}))}}async function decompressData(f){const{default:s}=await __vitePreload(async()=>{const{default:d}=await import("../assets/index-CLZsWIdx.js").then(_=>_.i);return{default:d}},__vite__mapDeps([10,1]),import.meta.url);return s.inflate(f).buffer}let projectRoot="";async function fetchJsonConfig(f,s){try{return await(await fetch(f)).json()}catch(d){return console.error(`Error fetching ${f}: ${d}`),{error:d}}}function setProjectRoot(f){projectRoot=f}function buildPath(...f){return f.map((s,d)=>d===0?s.trim().replace(/[\/]*$/g,""):s.trim().replace(/(^[\/]*|[\/]*$)/g,"")).filter(s=>s.length).join("/")}function getProjectURL(f,s=!0){if(f.startsWith(projectRoot))return f;const d=buildPath(projectRoot,f).replace("./","/")+(s?"/":"");return d.startsWith("/")?new URL(d,window.location.href).href:d}function getDataLoader(f,s,d,_){const S=_.endsWith("/")?_.substring(0,_.length-1):_;return f?{function:getLocalCompressedBinaryDataLoader(s,S),viewLoader:async M=>d[M],rowDataLoader:T,binaryDataLoader:F}:{function:getArrayBufferDataLoader(`${S}/get_data`),viewLoader:getView$1,rowDataLoader:loadRowData$1,binaryDataLoader:loadBinaryData$1};async function T(M,P){const H=await fetch(`${S}/rowdata/${M}/${P}.json`);return H.status!==200?null:await H.json()}async function F(M,P){return await(await fetch(`${S}/binarydata/${M}/${P}.b`)).arrayBuffer()}}async function loadRowData$1(f,s){return await getPostData(`${projectRoot}/get_row_data`,{datasource:f,index:s})}async function getView$1(f){if(f)try{return await getPostData(`${projectRoot}/get_view`,{view:f})}catch(s){const d=createEl("dialog",{title:"Error loading view"});d.innerText=s.message,d.addEventListener("click",()=>d.close()),document.body.appendChild(d),d.showModal(),console.error(s);return}}async function loadBinaryData$1(f,s){return await getPostData(`${projectRoot}/get_binary_data`,{datasource:f,name:s},"arraybuffer")}async function getPostData(f,s,d="json"){const _=await fetch(f,{method:"POST",body:JSON.stringify(s),headers:{Accept:"application/json,text/plain,*/*","Content-Type":"application/json"}});if(!_.ok)throw new Error(`Error fetching '${f}': ${_.statusText}`);return d==="json"?await _.json():await _.arrayBuffer()}async function loadColumn(f,s){return new Promise((d,_)=>{try{const S=window.mdv.chartManager.getDataSource(f),T=S.columnIndex[s];S.columnsWithData.includes(s)?d(T):window.mdv.chartManager.loadColumnSet([s],f,()=>d(T))}catch(S){_(S)}})}class OffsetDialog extends BaseDialog{constructor(s){super({title:"Alter Position",width:300,doc:s.__doc__},s)}init(s){this.plot=s,this.ds=this.plot.dataStore,createEl("div",{text:"Offset"},this.dialog),this.bdiv=createEl("div",{styles:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative",height:"60px"}},this.dialog);for(const F of[["top","up"],["bottom","down"],["right","right"],["left","left"]])this._addPButton(F);createEl("div",{text:"Rotation"},this.dialog),this.rDiv=createEl("div",{styles:{height:"30px",position:"relative"}},this.dialog);for(const F of["left","right"])this._addRButton(F);const d=createEl("div",{},this.dialog),_=this.ds.columnIndex[this.ds.offsets.groups].name;createEl("div",{text:_},d),this.groupSelect=createEl("select",{},d),createEl("button",{classes:["ciview-button-sm"],text:"Reset"},d).addEventListener("click",F=>{this.ds.resetColumnOffsets(this.filter,this.groupSelect.value,!0),this._showOffsets(this.groupSelect.value)});const T=this.ds.columnIndex[this.ds.offsets.groups].values;for(const F of T)createEl("option",{text:F,value:F},this.groupSelect);this.filter=this.plot.config.background_filter?this.plot.config.background_filter.category:null,this.groupSelect.addEventListener("change",()=>{this._showOffsets(this.groupSelect.value)}),this._addOffsetLabels(),this._showOffsets(T[0])}_alterOffset(s){const d=this.plot.dataStore;let _=0,S=0;const T=Number.parseFloat(this.offsetAm.value);if(Number.isNaN(T))return;_+=s==="right"?T:0,_-=s==="left"?T:0,S+=s==="up"?T:0,S-=s==="down"?T:0;const F=this.groupSelect.value;d.setColumnOffset({group:F,offsets:[_,S],filter:this.filter},!0),this._showOffsets(F)}_addOffsetLabels(){const s=createEl("div",{styles:{position:"absolute",top:"20px",left:"20px",display:"flex",justifyContent:"center",gap:"5px"}},this.bdiv);this.xoffset=createEl("span",{},s),this.yoffset=createEl("span",{},s),createEl("span",{text:"step:"},s),this.offsetAm=createEl("input",{styles:{width:"30px"},value:1},s);const d=createEl("div",{styles:{position:"absolute",top:"0px",justifyContent:"center",left:"25px",display:"flex",gap:"5px"}},this.rDiv);this.angle=createEl("span",{},d),createEl("span",{text:"step:"},d),this.offsetAn=createEl("input",{styles:{width:"30px"},value:1},d)}_showOffsets(s){let d=[0,0],_=0;const S=this.ds.offsets.values[this.filter||"all"];S!=null&&S[s]&&(d=S[s].offsets,_=S[s].rotation),this.xoffset.textContent=`x:${d[0].toFixed(1)}`,this.yoffset.textContent=`y:${d[1].toFixed(1)}`,this.angle.textContent=`angle:${_.toFixed(1)}`}_addPButton(s){const d={position:"absolute",textAlign:"center",cursor:"pointer"};d[s[0]]="0px",createEl("i",{classes:["fas",`fa-arrow-${s[1]}`],styles:d},this.bdiv).addEventListener("click",()=>{this._alterOffset(s[1])})}_addRButton(s){const d={position:"absolute",textAlign:"center"};d[s]="5px",createEl("i",{classes:["fas",`fa-angle-double-${s}`],styles:d,cursor:"pointer"},this.rDiv).addEventListener("click",S=>{const T=Number.parseFloat(this.offsetAn.value);if(Number.isNaN(T))return;const F=s==="left"?-T:T;this.plot.dataStore.setColumnOffset({group:this.groupSelect.value,rotation:F,filter:this.filter},!0),this._showOffsets(this.groupSelect.value)})}}class WGLScatterPlot extends WGLChart{constructor(s,d,_){const S=s.getColumnName(_.param[0]),T=s.getColumnName(_.param[1]);_.axis||(_.axis={x:{size:30,label:S,textsize:13},y:{size:45,label:T,textsize:13}}),_.title||(_.title=`${S} x ${T}`),super(s,d,_,{x:{},y:{}}),this.x=this.config.param[0],this.y=this.config.param[1],this.dim=this.getDimension();const F=_.background_filter;F&&this.dim.setBackgroundFilter(F.column,F.category),this.minMaxX=this.dataStore.getMinMaxForColumn(this.x),this.minMaxY=this.dataStore.getMinMaxForColumn(this.y),this.type="wgl_scatter_plot";const M=this.config;M.brush=M.brush||"poly";const P={brush:M.brush};this.app=new WGL2DI(this.graphDiv,P),this.app.addHandler("zoom_stopped",z=>this.handlePanZoom(z)),this.app.addHandler("panning_stopped",z=>this.handlePanZoom(z)),this.centerGraph();const H=this.afterAppCreation();this.app.setBackGroundColor(M.background_color),this.app.addHandler("brush_stopped",(z,oe)=>{this.resetButton.style.display="inline",this.app.setFilter(!0),oe?this._createPolyFilter(z):this._createFilter(z)}),M.background_image&&(M.image_opacity=M.image_opacity==null?1:M.image_opacity,this.addBackgroundImage(M.background_image));const J=this.dataStore.columnIndex[this.x],K=this.dataStore.columnIndex[this.y];this.app.addCircles({x:J.datatype==="int32"?new Float32Array(J.data):J.data,y:K.datatype==="int32"?new Float32Array(K.data):K.data,localFilter:this.dim.getLocalFilter(),globalFilter:this.dataStore.getFilter(),colorFunc:H}),this.defaultRadius=this._calculateRadius(),M.radius=M.radius||2,M.opacity=M.opacity==null?.8:M.opacity,this.app.setPointRadius(this.config.radius),this.app.setPointOpacity(this.config.opacity),this.onDataFiltered()}getDimension(){return this.dataStore.getDimension("range_dimension")}handlePanZoom(s){if(s.imageMoved){const d=s.imageMoved,_=this.config,S=_.background_image.name;if(d.position[1]=-(d.position[1]+d.height),_.background_image.height=d.height,_.background_image.width=d.width,_.background_image.position=d.position,_.image_choices){const T=_.image_choices.find(F=>F[0]===S);T[2]=d.width,T[3]=d.height,T[4]=d.position[0],T[5]=d.position[1]}if(this.dataStore.regions){const T=this.dataStore.regions.all_regions[_.region].images[_.background_image.name];T.position=d.position,T.height=d.height,T.width=d.width,this.dataStore.dirtyMetadata.add("regions")}}else this._updateScale(s),this.updateAxis()}onDataAdded(s){const d=this.getSetupConfig();d.x=this.dataStore.getRawColumn(this.x),d.y=this.dataStore.getRawColumn(this.y),this.app.updateSize(s,d),super.onDataAdded(s)}addBackgroundImage(s,d=!1){const _=new Image,S=this.config;S.image_opacity=S.image_opacity||1,_.src=s.url?s.url:getProjectURL(this.dataStore.regions.base_url)+s.file,_.onload=()=>{d?this.app.changeImage(_,s,0):(this.app.addImage(_,s),this.app.changeImageOpacity(0,S.image_opacity)),this.app.refresh()},_.onerror=()=>{this.config.background_image=void 0}}linkToOtherChart(s){this.app.addHandler("pan_or_zoom",(d,_,S)=>{s.app.offset=[d[0],d[1]],s.app.x_scale=_,s.app.y_scale=S,s.app.refresh(),s._updateScale(this.app.getRange()),s.updateAxis()},this.config.id)}highlightDataItem(s){this.app.highlightPoint(s)}getFilter(){if(!this.range||this.range===!0)return null;const s={};return s[this.config.param[0]]=[this.range.x_min,this.range.x_max],s[this.config.param[1]]=[this.range.y_min,this.range.y_max],s}_updateScale(s){this.x_scale.domain([s.x_range[0],s.x_range[1]]),this.y_scale.domain([-s.y_range[0],-s.y_range[1]])}_calculateRadius(){let s=this.config.max_x||this.config.max_x===0?this.config.max_x:this.minMaxX[1],d=this.config.min_x||this.config.min_x===0?this.config.min_x:this.minMaxX[0];this.config.axis.x_log_scale&&(s=this._getLogValue(s),d=this._getLogValue(d));const _=s-d;return _**1.5/(this.dataStore.size**.8+_)*5}_createFilter(s){if(this.range=s,s==null)this.dim.removeFilter();else{let d=s.y_max,_=s.y_min,S=s.x_max,T=s.x_min;this.config.axis.y_log_scale&&(d=this._getInverseLogValue(d),_=this._getInverseLogValue(_)),this.config.axis.x_log_scale&&(S=this._getInverseLogValue(S),T=this._getInverseLogValue(T)),this.filter=[[T,S],[_,d]],this.dim.filter("filterSquare",this.config.param,{range1:this.filter[0],range2:this.filter[1]})}}_createPolyFilter(s){this.range=!0;for(const d of s)d[1]=-d[1],this.config.axis.x_log_scale&&(d[0]=this._getInverseLogValue(d[0])),this.config.axis.y_log_scale&&(d[1]=this._getInverseLogValue(d[1]));this.filter=s,this.dim.filter("filterPoly",this.config.param,s)}centerGraph(){const s=this.config,d=s.roi||{};let _=d.max_x||this.minMaxX[1],S=d.max_y||this.minMaxY[1],T=d.min_x||this.minMaxX[0],F=d.min_y||this.minMaxY[0];if(s.center_using_quantiles){const z=this.dataStore.columnIndex[s.param[0]].quantiles,oe=this.dataStore.columnIndex[s.param[1]].quantiles;z[s.center_using_quantiles],oe[s.center_using_quantiles]}this.config.axis.y_log_scale&&(S=this._getLogValue(S),F=this._getLogValue(F)),this.config.axis.x_log_scale&&(_=this._getLogValue(_),T=this._getLogValue(T));const M=(_-T)/20,P=(S-F)/20,H=_-T+2*M,J=S-F+2*P,K=this._getContentDimensions();this.app.x_scale=K.width/H,this.app.y_scale=K.height/J,this.app.pointScale=(this.app.x_scale+this.app.y_scale)/2,this.app.offset[0]=-(T-M),this.app.offset[1]=S+P,this._updateScale(this.app.getRange()),this.updateAxis()}getContextMenu(){var S;const s=super.getContextMenu(),d=this.config,_=this.dataStore;if(_.offsets){const T=_.offsets,F=_.getColumnName(T.groups);T.param[0]===d.param[0]&&T.param[1]===d.param[1]&&(!T.background_filter||T.background_filter===((S=d==null?void 0:d.background_filter)==null?void 0:S.column))&&s.push({text:`Adjust ${F} position`,icon:"fas fa-arrows-alt",func:()=>{new OffsetDialog(this)}})}return s}_addSliderToSettings(s,d,_){s.splice(1,0,{type:"slider",current_value:d.opacity,min:0,max:1,func:S=>{d.opacity=S,this.app.changeImageOpacity(_,S),this.app.refresh()}})}getConfig(){const s=super.getConfig();return s.offsets&&(s.offsets.offsets=this.app.offsets.values.offsets),s}getSettings(){var S;const s=super.getSettings({pointMax:30,pointMin:0}),d=this.config;if(d.image_choices){const T=d.image_choices.slice(0);T.unshift(["None","__none__"]);let F="__none__";d.background_image&&(F=d.background_image.url),s.splice(1,0,{type:"dropdown",current_value:F,values:[T,0,1],label:"Change Image",func:M=>{if(M==="__none__"){d.background_image=void 0,this.app.removeImages(),this.app.refresh();return}let P=!0;d.background_image||(d.background_image={},P=!1),d.background_image.url=M;const H=d.title.split("-")[0],J=d.image_choices.find(K=>K[1]===M);d.background_image.name=J[0],J[2]&&(d.background_image.width=J[2],d.background_image.height=J[3],d.background_image.position=[J[4],J[5]]),this.setTitle(`${H}-${J[0]}`),this.addBackgroundImage(d.background_image,P)}})}const _=this.dataStore.regions;if(d.region&&_&&!d.viv){const T=_.all_regions[d.region].images,F=[["None","__none__"]];for(const P in T)F.push([P,P]);const M=((S=d.background_image)==null?void 0:S.name)||"__none__";s.splice(1,0,{type:"dropdown",current_value:M,values:[F,0,1],label:"Change Image",func:P=>{if(P==="__none__"){d.background_image=void 0,this.app.removeImages(),this.app.refresh();return}const H=!!d.background_image;d.background_image=T[P],this.setTitle(`${d.region}-${P}`),this.addBackgroundImage(d.background_image,H)}})}return d.background_image&&s.splice(2,0,{label:"Image Opacity",type:"slider",current_value:d.image_opacity,max:1,min:0,func:T=>{d.image_opacity=T,this.app.changeImageOpacity(0,T),this.app.refresh()}}),s.push({type:"radiobuttons",label:"Background Color",choices:[["none","none"],["white","white"],["light gray","lightgray"],["gray","gray"],["black","black"]],current_value:d.background_color||"none",func:T=>{T==="none"?d.background_color=void 0:d.background_color=T,this.app.setBackGroundColor(d.background_color)}}),s.concat([{type:"radiobuttons",label:"Brush Type",choices:[["Free Draw","poly"],["Rectangle","default"]],current_value:d.brush,func:T=>{this.app.clearBrush(),this.app.config.brush=T,d.brush=T}}])}}BaseChart.types.wgl_scatter_plot={name:"2D Scatter Plot",class:WGLScatterPlot,params:[{type:"number",name:"X axis"},{type:"number",name:"Y axis"}]};var pi$5=Math.PI,tau$4=pi$5*2,abs$3=Math.abs,sqrt$2=Math.sqrt;function noop$3(){}function streamGeometry$1(f,s){f&&streamGeometryType$1.hasOwnProperty(f.type)&&streamGeometryType$1[f.type](f,s)}var streamObjectType$1={Feature:function(f,s){streamGeometry$1(f.geometry,s)},FeatureCollection:function(f,s){for(var d=f.features,_=-1,S=d.length;++_<S;)streamGeometry$1(d[_].geometry,s)}},streamGeometryType$1={Sphere:function(f,s){s.sphere()},Point:function(f,s){f=f.coordinates,s.point(f[0],f[1],f[2])},MultiPoint:function(f,s){for(var d=f.coordinates,_=-1,S=d.length;++_<S;)f=d[_],s.point(f[0],f[1],f[2])},LineString:function(f,s){streamLine$1(f.coordinates,s,0)},MultiLineString:function(f,s){for(var d=f.coordinates,_=-1,S=d.length;++_<S;)streamLine$1(d[_],s,0)},Polygon:function(f,s){streamPolygon$1(f.coordinates,s)},MultiPolygon:function(f,s){for(var d=f.coordinates,_=-1,S=d.length;++_<S;)streamPolygon$1(d[_],s)},GeometryCollection:function(f,s){for(var d=f.geometries,_=-1,S=d.length;++_<S;)streamGeometry$1(d[_],s)}};function streamLine$1(f,s,d){var _=-1,S=f.length-d,T;for(s.lineStart();++_<S;)T=f[_],s.point(T[0],T[1],T[2]);s.lineEnd()}function streamPolygon$1(f,s){var d=-1,_=f.length;for(s.polygonStart();++d<_;)streamLine$1(f[d],s,1);s.polygonEnd()}function geoStream$1(f,s){f&&streamObjectType$1.hasOwnProperty(f.type)?streamObjectType$1[f.type](f,s):streamGeometry$1(f,s)}const identity$2=f=>f;var areaSum=new Adder$1,areaRingSum=new Adder$1,x00$2,y00$2,x0$4,y0$4,areaStream={point:noop$3,lineStart:noop$3,lineEnd:noop$3,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop$3,areaSum.add(abs$3(areaRingSum)),areaRingSum=new Adder$1},result:function(){var f=areaSum/2;return areaSum=new Adder$1,f}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(f,s){areaStream.point=areaPoint,x00$2=x0$4=f,y00$2=y0$4=s}function areaPoint(f,s){areaRingSum.add(y0$4*f-x0$4*s),x0$4=f,y0$4=s}function areaRingEnd(){areaPoint(x00$2,y00$2)}var x0$3=1/0,y0$3=x0$3,x1$1=-x0$3,y1$1=x1$1,boundsStream$1={point:boundsPoint$1,lineStart:noop$3,lineEnd:noop$3,polygonStart:noop$3,polygonEnd:noop$3,result:function(){var f=[[x0$3,y0$3],[x1$1,y1$1]];return x1$1=y1$1=-(y0$3=x0$3=1/0),f}};function boundsPoint$1(f,s){f<x0$3&&(x0$3=f),f>x1$1&&(x1$1=f),s<y0$3&&(y0$3=s),s>y1$1&&(y1$1=s)}var X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,x00$1,y00$1,x0$2,y0$2,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var f=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,f}};function centroidPoint(f,s){X0+=f,Y0+=s,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(f,s){centroidStream.point=centroidPointLine,centroidPoint(x0$2=f,y0$2=s)}function centroidPointLine(f,s){var d=f-x0$2,_=s-y0$2,S=sqrt$2(d*d+_*_);X1+=S*(x0$2+f)/2,Y1+=S*(y0$2+s)/2,Z1+=S,centroidPoint(x0$2=f,y0$2=s)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(f,s){centroidStream.point=centroidPointRing,centroidPoint(x00$1=x0$2=f,y00$1=y0$2=s)}function centroidPointRing(f,s){var d=f-x0$2,_=s-y0$2,S=sqrt$2(d*d+_*_);X1+=S*(x0$2+f)/2,Y1+=S*(y0$2+s)/2,Z1+=S,S=y0$2*f-x0$2*s,X2+=S*(x0$2+f),Y2+=S*(y0$2+s),Z2+=S*3,centroidPoint(x0$2=f,y0$2=s)}function PathContext(f){this._context=f}PathContext.prototype={_radius:4.5,pointRadius:function(f){return this._radius=f,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(f,s){switch(this._point){case 0:{this._context.moveTo(f,s),this._point=1;break}case 1:{this._context.lineTo(f,s);break}default:{this._context.moveTo(f+this._radius,s),this._context.arc(f,s,this._radius,0,tau$4);break}}},result:noop$3};var lengthSum=new Adder$1,lengthRing,x00,y00,x0$1,y0$1,lengthStream={point:noop$3,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop$3},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var f=+lengthSum;return lengthSum=new Adder$1,f}};function lengthPointFirst(f,s){lengthStream.point=lengthPoint,x00=x0$1=f,y00=y0$1=s}function lengthPoint(f,s){x0$1-=f,y0$1-=s,lengthSum.add(sqrt$2(x0$1*x0$1+y0$1*y0$1)),x0$1=f,y0$1=s}let cacheDigits,cacheAppend,cacheRadius,cacheCircle;class PathString{constructor(s){this._append=s==null?append$1:appendRound$1(s),this._radius=4.5,this._=""}pointRadius(s){return this._radius=+s,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(s,d){switch(this._point){case 0:{this._append`M${s},${d}`,this._point=1;break}case 1:{this._append`L${s},${d}`;break}default:{if(this._append`M${s},${d}`,this._radius!==cacheRadius||this._append!==cacheAppend){const _=this._radius,S=this._;this._="",this._append`m0,${_}a${_},${_} 0 1,1 0,${-2*_}a${_},${_} 0 1,1 0,${2*_}z`,cacheRadius=_,cacheAppend=this._append,cacheCircle=this._,this._=S}this._+=cacheCircle;break}}}result(){const s=this._;return this._="",s.length?s:null}}function append$1(f){let s=1;this._+=f[0];for(const d=f.length;s<d;++s)this._+=arguments[s]+f[s]}function appendRound$1(f){const s=Math.floor(f);if(!(s>=0))throw new RangeError(`invalid digits: ${f}`);if(s>15)return append$1;if(s!==cacheDigits){const d=10**s;cacheDigits=s,cacheAppend=function(S){let T=1;this._+=S[0];for(const F=S.length;T<F;++T)this._+=Math.round(arguments[T]*d)/d+S[T]}}return cacheAppend}function geoPath(f,s){let d=3,_=4.5,S,T;function F(M){return M&&(typeof _=="function"&&T.pointRadius(+_.apply(this,arguments)),geoStream$1(M,S(T))),T.result()}return F.area=function(M){return geoStream$1(M,S(areaStream)),areaStream.result()},F.measure=function(M){return geoStream$1(M,S(lengthStream)),lengthStream.result()},F.bounds=function(M){return geoStream$1(M,S(boundsStream$1)),boundsStream$1.result()},F.centroid=function(M){return geoStream$1(M,S(centroidStream)),centroidStream.result()},F.projection=function(M){return arguments.length?(S=M==null?(f=null,identity$2):(f=M).stream,F):f},F.context=function(M){return arguments.length?(T=M==null?(s=null,new PathString(d)):new PathContext(s=M),typeof _!="function"&&T.pointRadius(_),F):s},F.pointRadius=function(M){return arguments.length?(_=typeof M=="function"?M:(T.pointRadius(+M),+M),F):_},F.digits=function(M){if(!arguments.length)return d;if(M==null)d=null;else{const P=Math.floor(M);if(!(P>=0))throw new RangeError(`invalid digits: ${M}`);d=P}return s===null&&(T=new PathString(d)),F},F.projection(f).digits(d).context(s)}class DensityScatterPlot extends WGLScatterPlot{afterAppCreation(){this.contentDiv.prepend(this.app.div_container),this.svg.style("position","absolute").style("pointer-events","none");const s=this.config;s.contour_bandwidth=s.contour_bandwidth||5,s.contour_intensity=s.contour_intensity||.7,s.contour_opacity=s.contour_opacity||1;const d=s.param,_=this.dataStore.getMinMaxForColumn(d[0]),S=this.dataStore.getMinMaxForColumn(d[1]),T=_[1]-_[0],F=S[1]-S[0];return this.whRatio=T/F,this.catKeys=[-1,-1],this.data=[null,null],this.orig_y_scale=this.y_scale.domain(),this.orig_x_scale=this.x_scale.domain(),this.or_y_scale=[0,400/this.whRatio],this.or_x_scale=[0,400],this.app.addHandler("pan_or_zoom",(M,P,H)=>{this._updateScale(this.app.getRange()),this._rescaleSVG()},s.id),super.afterAppCreation()}getDimension(){return this.dataStore.getDimension("density_dimension")}onDataFiltered(s){const d=this.config,_=d.param;super.onDataFiltered(s);const S=this.dataStore.getColumnValues(d.param[2]);try{if(this.catKeys=[S.indexOf(d.category1),S.indexOf(d.category2)],this.catKeys[0]===-1&&this.catKeys[1]===-1){this.data=[null,null];return}}catch{this.data=[null,null];return}const T={categories:this.catKeys,yscale:[this.orig_y_scale,this.or_y_scale],xscale:[this.orig_x_scale,this.or_x_scale],bandwidth:this.config.contour_bandwidth};this.dim.getDensityContours(F=>{this.data=F,this.drawChart(),this._rescaleSVG()},_,T)}setSize(s,d){super.setSize(s,d),this._rescaleSVG()}_drawContours(s,d,_){const S=`dp-poly-${_}`,T=this.config;this.graph_area.selectAll(`.${S}`).data(this.data[_]).join("path").attr("class",S).attr("stroke",T.contour_fill?"none":s).style("opacity",T.contour_opacity).attr("stroke-linejoin","round").attr("d",geoPath()).attr("fill",F=>T.contour_fill?d(F.value):"none")}removeCategory(s){delete this.config[`category${s}`],this.data[s-1]=null,this.catKeys[s-1]=-1,this.graph_area.selectAll(`.dp-poly-${s-1}`).remove()}changeContourParameter(s){this.config.param[2]=s,this.removeCategory(1),this.removeCategory(2),this.drawChart()}drawChart(s=400){const d=this.config;for(const _ in this.catKeys){const S=this.catKeys[_];if(S===-1)this.graph_area.selectAll(`.dp-poly-${_}`).remove();else{const T=this.dataStore.getColumnColors(d.param[2])[S],F=linear$1([0,1-d.contour_intensity],["white",T]);this._drawContours(T,F,_)}}}getContextMenu(){const s=super.getContextMenu();return this.dataStore.regions&&!this.config.viv&&s.push({text:"Set as Default Image",icon:"fas fa-file-image",func:()=>{const d=this.config;d.background_image&&(this.dataStore.regions.all_regions[d.region].default_image=d.background_image.name,this.dataStore.dirtyMetadata.add("regions"))}}),s}_rescaleSVG(){const s=this.x_scale.domain(),d=s[1]-s[0],_=this.x_scale.range()[1]/this.or_x_scale[1],S=(this.orig_x_scale[1]-this.orig_x_scale[0])/d*_,T=linear$1().domain(s).range(this.or_x_scale),F=T(s[0])-T(this.orig_x_scale[0])*_,M=this.y_scale.domain(),P=M[0]-M[1],H=this.y_scale.range()[1]/this.or_y_scale[1],J=(this.orig_y_scale[0]-this.orig_y_scale[1])/P*H,K=linear$1().domain(M).range(this.or_y_scale),z=K(M[0])-K(this.orig_y_scale[0])*H,oe=this.margins.left,se=this.margins.top;this.graph_area.attr("transform",`translate(${oe-F},${se-z}) scale(${S},${J})  `)}getSettings(){const s=super.getSettings(),d=this.config,_=this.dataStore.getColumnList("text");let S=this.dataStore.getColumnValues(d.param[2])||[];return S=S.map(T=>({t:T})),S.push({t:"None"}),s.push({type:"dropdown",label:"Contour Parameter",current_value:this.dataStore.getColumnName(d.param[2]),values:[_,"name","field"],func:T=>{this.changeContourParameter(T)},onchange:(T,F)=>{const P=this.dataStore.getColumnValues(F).slice(0);P.push("None");for(const H of["Contour Category 1","Contour Category 2"]){T[H].innerHTML="";for(const J of P)createEl("option",{text:J,value:J},T[H]);T[H].value="None"}}},{type:"dropdown",label:"Contour Category 1",current_value:d.category1||"None",values:[S,"t","t"],func:T=>{T==="None"?this.removeCategory(1):d.category1=T,this.onDataFiltered()}},{type:"dropdown",label:"Contour Category 2",current_value:d.category2||"None",values:[S,"t","t"],func:T=>{T==="None"?this.removeCategory(2):d.category2=T,this.onDataFiltered()}},{type:"slider",max:25,min:1,doc:this.__doc__,current_value:d.contour_bandwidth,label:"KDE Bandwidth",continuous:!0,func:T=>{d.contour_bandwidth=T,this.onDataFiltered()}},{label:"Fill Contours",type:"check",current_value:d.contour_fill,func:T=>{d.contour_fill=T,this.drawChart()}},{type:"slider",max:1,min:0,doc:this.__doc__,current_value:d.contour_intensity,continuous:!0,label:"Fill Intensity",func:T=>{d.contour_intensity=T,this.drawChart()}},{type:"slider",max:1,min:0,doc:this.__doc__,current_value:d.contour_opacity,continuous:!0,label:"Contour opacity",func:T=>{d.contour_opacity=T,this.drawChart()}}),s}}BaseChart.types.density_scatter_plot={name:"Density Scatter Plot",class:DensityScatterPlot,params:[{type:"number",name:"X axis"},{type:"number",name:"Y axis"},{type:"text",name:"Category Column"}]};BaseChart.types.image_scatter_plot={name:"Centroid Plot",class:DensityScatterPlot,required:["regions"],extra_controls:f=>{const s=[];for(const d in f.regions.all_regions)s.push({name:d,value:d});return[{type:"dropdown",name:"region",label:f.getColumnName(f.regions.region_field),values:s}]},init:(f,s,d)=>{const _=s.regions,S=_.all_regions[d.region];f.color_by=_.default_color,f.param=_.position_fields.concat([_.default_color]),f.background_filter={column:_.region_field,category:d.region},f.color_legend={display:!1},f.region=d.region,f.roi=S.roi,f.json=S.json,f.background_image=S.images[S.default_image],f.title=d.region+(S.default_image?`-${S.default_image}`:"")}};var PipsMode;(function(f){f.Range="range",f.Steps="steps",f.Positions="positions",f.Count="count",f.Values="values"})(PipsMode||(PipsMode={}));var PipsType;(function(f){f[f.None=-1]="None",f[f.NoValue=0]="NoValue",f[f.LargeValue=1]="LargeValue",f[f.SmallValue=2]="SmallValue"})(PipsType||(PipsType={}));function isValidFormatter(f){return isValidPartialFormatter(f)&&typeof f.from=="function"}function isValidPartialFormatter(f){return typeof f=="object"&&typeof f.to=="function"}function removeElement(f){f.parentElement.removeChild(f)}function isSet(f){return f!=null}function preventDefault(f){f.preventDefault()}function unique(f){return f.filter(function(s){return this[s]?!1:this[s]=!0},{})}function closest(f,s){return Math.round(f/s)*s}function offset(f,s){var d=f.getBoundingClientRect(),_=f.ownerDocument,S=_.documentElement,T=getPageOffset(_);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(T.x=0),s?d.top+T.y-S.clientTop:d.left+T.x-S.clientLeft}function isNumeric(f){return typeof f=="number"&&!isNaN(f)&&isFinite(f)}function addClassFor(f,s,d){d>0&&(addClass(f,s),setTimeout(function(){removeClass(f,s)},d))}function limit(f){return Math.max(Math.min(f,100),0)}function asArray(f){return Array.isArray(f)?f:[f]}function countDecimals(f){f=String(f);var s=f.split(".");return s.length>1?s[1].length:0}function addClass(f,s){f.classList&&!/\s/.test(s)?f.classList.add(s):f.className+=" "+s}function removeClass(f,s){f.classList&&!/\s/.test(s)?f.classList.remove(s):f.className=f.className.replace(new RegExp("(^|\\b)"+s.split(" ").join("|")+"(\\b|$)","gi")," ")}function hasClass(f,s){return f.classList?f.classList.contains(s):new RegExp("\\b"+s+"\\b").test(f.className)}function getPageOffset(f){var s=window.pageXOffset!==void 0,d=(f.compatMode||"")==="CSS1Compat",_=s?window.pageXOffset:d?f.documentElement.scrollLeft:f.body.scrollLeft,S=s?window.pageYOffset:d?f.documentElement.scrollTop:f.body.scrollTop;return{x:_,y:S}}function getActions(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function getSupportsPassive(){var f=!1;try{var s=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("test",null,s)}catch{}return f}function getSupportsTouchActionNone(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function subRangeRatio(f,s){return 100/(s-f)}function fromPercentage(f,s,d){return s*100/(f[d+1]-f[d])}function toPercentage(f,s){return fromPercentage(f,f[0]<0?s+Math.abs(f[0]):s-f[0],0)}function isPercentage(f,s){return s*(f[1]-f[0])/100+f[0]}function getJ(f,s){for(var d=1;f>=s[d];)d+=1;return d}function toStepping(f,s,d){if(d>=f.slice(-1)[0])return 100;var _=getJ(d,f),S=f[_-1],T=f[_],F=s[_-1],M=s[_];return F+toPercentage([S,T],d)/subRangeRatio(F,M)}function fromStepping(f,s,d){if(d>=100)return f.slice(-1)[0];var _=getJ(d,s),S=f[_-1],T=f[_],F=s[_-1],M=s[_];return isPercentage([S,T],(d-F)*subRangeRatio(F,M))}function getStep(f,s,d,_){if(_===100)return _;var S=getJ(_,f),T=f[S-1],F=f[S];return d?_-T>(F-T)/2?F:T:s[S-1]?f[S-1]+closest(_-f[S-1],s[S-1]):_}var Spectrum=function(){function f(s,d,_){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[_||!1],this.xNumSteps=[!1],this.snap=d;var S,T=[];for(Object.keys(s).forEach(function(F){T.push([asArray(s[F]),F])}),T.sort(function(F,M){return F[0][0]-M[0][0]}),S=0;S<T.length;S++)this.handleEntryPoint(T[S][1],T[S][0]);for(this.xNumSteps=this.xSteps.slice(0),S=0;S<this.xNumSteps.length;S++)this.handleStepPoint(S,this.xNumSteps[S])}return f.prototype.getDistance=function(s){for(var d=[],_=0;_<this.xNumSteps.length-1;_++)d[_]=fromPercentage(this.xVal,s,_);return d},f.prototype.getAbsoluteDistance=function(s,d,_){var S=0;if(s<this.xPct[this.xPct.length-1])for(;s>this.xPct[S+1];)S++;else s===this.xPct[this.xPct.length-1]&&(S=this.xPct.length-2);!_&&s===this.xPct[S+1]&&S++,d===null&&(d=[]);var T,F=1,M=d[S],P=0,H=0,J=0,K=0;for(_?T=(s-this.xPct[S])/(this.xPct[S+1]-this.xPct[S]):T=(this.xPct[S+1]-s)/(this.xPct[S+1]-this.xPct[S]);M>0;)P=this.xPct[S+1+K]-this.xPct[S+K],d[S+K]*F+100-T*100>100?(H=P*T,F=(M-100*T)/d[S+K],T=1):(H=d[S+K]*P/100*F,F=0),_?(J=J-H,this.xPct.length+K>=1&&K--):(J=J+H,this.xPct.length-K>=1&&K++),M=d[S+K]*F;return s+J},f.prototype.toStepping=function(s){return s=toStepping(this.xVal,this.xPct,s),s},f.prototype.fromStepping=function(s){return fromStepping(this.xVal,this.xPct,s)},f.prototype.getStep=function(s){return s=getStep(this.xPct,this.xSteps,this.snap,s),s},f.prototype.getDefaultStep=function(s,d,_){var S=getJ(s,this.xPct);return(s===100||d&&s===this.xPct[S-1])&&(S=Math.max(S-1,1)),(this.xVal[S]-this.xVal[S-1])/_},f.prototype.getNearbySteps=function(s){var d=getJ(s,this.xPct);return{stepBefore:{startValue:this.xVal[d-2],step:this.xNumSteps[d-2],highestStep:this.xHighestCompleteStep[d-2]},thisStep:{startValue:this.xVal[d-1],step:this.xNumSteps[d-1],highestStep:this.xHighestCompleteStep[d-1]},stepAfter:{startValue:this.xVal[d],step:this.xNumSteps[d],highestStep:this.xHighestCompleteStep[d]}}},f.prototype.countStepDecimals=function(){var s=this.xNumSteps.map(countDecimals);return Math.max.apply(null,s)},f.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},f.prototype.convert=function(s){return this.getStep(this.toStepping(s))},f.prototype.handleEntryPoint=function(s,d){var _;if(s==="min"?_=0:s==="max"?_=100:_=parseFloat(s),!isNumeric(_)||!isNumeric(d[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(_),this.xVal.push(d[0]);var S=Number(d[1]);_?this.xSteps.push(isNaN(S)?!1:S):isNaN(S)||(this.xSteps[0]=S),this.xHighestCompleteStep.push(0)},f.prototype.handleStepPoint=function(s,d){if(d){if(this.xVal[s]===this.xVal[s+1]){this.xSteps[s]=this.xHighestCompleteStep[s]=this.xVal[s];return}this.xSteps[s]=fromPercentage([this.xVal[s],this.xVal[s+1]],d,0)/subRangeRatio(this.xPct[s],this.xPct[s+1]);var _=(this.xVal[s+1]-this.xVal[s])/this.xNumSteps[s],S=Math.ceil(Number(_.toFixed(3))-1),T=this.xVal[s]+this.xNumSteps[s]*S;this.xHighestCompleteStep[s]=T}},f}(),defaultFormatter={to:function(f){return f===void 0?"":f.toFixed(2)},from:Number},cssClasses={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},INTERNAL_EVENT_NS={tooltips:".__tooltips",aria:".__aria"};function testStep(f,s){if(!isNumeric(s))throw new Error("noUiSlider: 'step' is not numeric.");f.singleStep=s}function testKeyboardPageMultiplier(f,s){if(!isNumeric(s))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");f.keyboardPageMultiplier=s}function testKeyboardMultiplier(f,s){if(!isNumeric(s))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");f.keyboardMultiplier=s}function testKeyboardDefaultStep(f,s){if(!isNumeric(s))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");f.keyboardDefaultStep=s}function testRange(f,s){if(typeof s!="object"||Array.isArray(s))throw new Error("noUiSlider: 'range' is not an object.");if(s.min===void 0||s.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");f.spectrum=new Spectrum(s,f.snap||!1,f.singleStep)}function testStart(f,s){if(s=asArray(s),!Array.isArray(s)||!s.length)throw new Error("noUiSlider: 'start' option is incorrect.");f.handles=s.length,f.start=s}function testSnap(f,s){if(typeof s!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");f.snap=s}function testAnimate(f,s){if(typeof s!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");f.animate=s}function testAnimationDuration(f,s){if(typeof s!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");f.animationDuration=s}function testConnect(f,s){var d=[!1],_;if(s==="lower"?s=[!0,!1]:s==="upper"&&(s=[!1,!0]),s===!0||s===!1){for(_=1;_<f.handles;_++)d.push(s);d.push(!1)}else{if(!Array.isArray(s)||!s.length||s.length!==f.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");d=s}f.connect=d}function testOrientation(f,s){switch(s){case"horizontal":f.ort=0;break;case"vertical":f.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function testMargin(f,s){if(!isNumeric(s))throw new Error("noUiSlider: 'margin' option must be numeric.");s!==0&&(f.margin=f.spectrum.getDistance(s))}function testLimit(f,s){if(!isNumeric(s))throw new Error("noUiSlider: 'limit' option must be numeric.");if(f.limit=f.spectrum.getDistance(s),!f.limit||f.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function testPadding(f,s){var d;if(!isNumeric(s)&&!Array.isArray(s))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(s)&&!(s.length===2||isNumeric(s[0])||isNumeric(s[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(s!==0){for(Array.isArray(s)||(s=[s,s]),f.padding=[f.spectrum.getDistance(s[0]),f.spectrum.getDistance(s[1])],d=0;d<f.spectrum.xNumSteps.length-1;d++)if(f.padding[0][d]<0||f.padding[1][d]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var _=s[0]+s[1],S=f.spectrum.xVal[0],T=f.spectrum.xVal[f.spectrum.xVal.length-1];if(_/(T-S)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function testDirection(f,s){switch(s){case"ltr":f.dir=0;break;case"rtl":f.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function testBehaviour(f,s){if(typeof s!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var d=s.indexOf("tap")>=0,_=s.indexOf("drag")>=0,S=s.indexOf("fixed")>=0,T=s.indexOf("snap")>=0,F=s.indexOf("hover")>=0,M=s.indexOf("unconstrained")>=0,P=s.indexOf("invert-connects")>=0,H=s.indexOf("drag-all")>=0,J=s.indexOf("smooth-steps")>=0;if(S){if(f.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");testMargin(f,f.start[1]-f.start[0])}if(P&&f.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(M&&(f.margin||f.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");f.events={tap:d||T,drag:_,dragAll:H,smoothSteps:J,fixed:S,snap:T,hover:F,unconstrained:M,invertConnects:P}}function testTooltips(f,s){if(s!==!1)if(s===!0||isValidPartialFormatter(s)){f.tooltips=[];for(var d=0;d<f.handles;d++)f.tooltips.push(s)}else{if(s=asArray(s),s.length!==f.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");s.forEach(function(_){if(typeof _!="boolean"&&!isValidPartialFormatter(_))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),f.tooltips=s}}function testHandleAttributes(f,s){if(s.length!==f.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");f.handleAttributes=s}function testAriaFormat(f,s){if(!isValidPartialFormatter(s))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");f.ariaFormat=s}function testFormat(f,s){if(!isValidFormatter(s))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");f.format=s}function testKeyboardSupport(f,s){if(typeof s!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");f.keyboardSupport=s}function testDocumentElement(f,s){f.documentElement=s}function testCssPrefix(f,s){if(typeof s!="string"&&s!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");f.cssPrefix=s}function testCssClasses(f,s){if(typeof s!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof f.cssPrefix=="string"?(f.cssClasses={},Object.keys(s).forEach(function(d){f.cssClasses[d]=f.cssPrefix+s[d]})):f.cssClasses=s}function testOptions(f){var s={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:defaultFormatter,format:defaultFormatter},d={step:{r:!1,t:testStep},keyboardPageMultiplier:{r:!1,t:testKeyboardPageMultiplier},keyboardMultiplier:{r:!1,t:testKeyboardMultiplier},keyboardDefaultStep:{r:!1,t:testKeyboardDefaultStep},start:{r:!0,t:testStart},connect:{r:!0,t:testConnect},direction:{r:!0,t:testDirection},snap:{r:!1,t:testSnap},animate:{r:!1,t:testAnimate},animationDuration:{r:!1,t:testAnimationDuration},range:{r:!0,t:testRange},orientation:{r:!1,t:testOrientation},margin:{r:!1,t:testMargin},limit:{r:!1,t:testLimit},padding:{r:!1,t:testPadding},behaviour:{r:!0,t:testBehaviour},ariaFormat:{r:!1,t:testAriaFormat},format:{r:!1,t:testFormat},tooltips:{r:!1,t:testTooltips},keyboardSupport:{r:!0,t:testKeyboardSupport},documentElement:{r:!1,t:testDocumentElement},cssPrefix:{r:!0,t:testCssPrefix},cssClasses:{r:!0,t:testCssClasses},handleAttributes:{r:!1,t:testHandleAttributes}},_={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};f.format&&!f.ariaFormat&&(f.ariaFormat=f.format),Object.keys(d).forEach(function(P){if(!isSet(f[P])&&_[P]===void 0){if(d[P].r)throw new Error("noUiSlider: '"+P+"' is required.");return}d[P].t(s,isSet(f[P])?f[P]:_[P])}),s.pips=f.pips;var S=document.createElement("div"),T=S.style.msTransform!==void 0,F=S.style.transform!==void 0;s.transformRule=F?"transform":T?"msTransform":"webkitTransform";var M=[["left","top"],["right","bottom"]];return s.style=M[s.dir][s.ort],s}function scope(f,s,d){var _=getActions(),S=getSupportsTouchActionNone(),T=S&&getSupportsPassive(),F=f,M,P,H,J,K,z,oe=s.spectrum,se=[],ae=[],ge=[],pe=0,he={},ve=!1,be=f.ownerDocument,Re=s.documentElement||be.documentElement,Fe=be.body,ye=be.dir==="rtl"||s.ort===1?0:100;function Ue(Xt,zn){var oa=be.createElement("div");return zn&&addClass(oa,zn),Xt.appendChild(oa),oa}function It(Xt,zn){var oa=Ue(Xt,s.cssClasses.origin),MA=Ue(oa,s.cssClasses.handle);if(Ue(MA,s.cssClasses.touchArea),MA.setAttribute("data-handle",String(zn)),s.keyboardSupport&&(MA.setAttribute("tabindex","0"),MA.addEventListener("keydown",function(PA){return lA(PA,zn)})),s.handleAttributes!==void 0){var YA=s.handleAttributes[zn];Object.keys(YA).forEach(function(PA){MA.setAttribute(PA,YA[PA])})}return MA.setAttribute("role","slider"),MA.setAttribute("aria-orientation",s.ort?"vertical":"horizontal"),zn===0?addClass(MA,s.cssClasses.handleLower):zn===s.handles-1&&addClass(MA,s.cssClasses.handleUpper),oa.handle=MA,oa}function St(Xt,zn){return zn?Ue(Xt,s.cssClasses.connect):!1}function At(Xt,zn){P=Ue(zn,s.cssClasses.connects),H=[],J=[],J.push(St(P,Xt[0]));for(var oa=0;oa<s.handles;oa++)H.push(It(zn,oa)),ge[oa]=oa,J.push(St(P,Xt[oa+1]))}function xt(Xt){addClass(Xt,s.cssClasses.target),s.dir===0?addClass(Xt,s.cssClasses.ltr):addClass(Xt,s.cssClasses.rtl),s.ort===0?addClass(Xt,s.cssClasses.horizontal):addClass(Xt,s.cssClasses.vertical);var zn=getComputedStyle(Xt).direction;return zn==="rtl"?addClass(Xt,s.cssClasses.textDirectionRtl):addClass(Xt,s.cssClasses.textDirectionLtr),Ue(Xt,s.cssClasses.base)}function Ct(Xt,zn){return!s.tooltips||!s.tooltips[zn]?!1:Ue(Xt.firstChild,s.cssClasses.tooltip)}function Nt(){return F.hasAttribute("disabled")}function qt(Xt){var zn=H[Xt];return zn.hasAttribute("disabled")}function Jn(Xt){Xt!=null?(H[Xt].setAttribute("disabled",""),H[Xt].handle.removeAttribute("tabindex")):(F.setAttribute("disabled",""),H.forEach(function(zn){zn.handle.removeAttribute("tabindex")}))}function qr(Xt){Xt!=null?(H[Xt].removeAttribute("disabled"),H[Xt].handle.setAttribute("tabindex","0")):(F.removeAttribute("disabled"),H.forEach(function(zn){zn.removeAttribute("disabled"),zn.handle.setAttribute("tabindex","0")}))}function na(){z&&(NI("update"+INTERNAL_EVENT_NS.tooltips),z.forEach(function(Xt){Xt&&removeElement(Xt)}),z=null)}function qn(){na(),z=H.map(Ct),rI("update"+INTERNAL_EVENT_NS.tooltips,function(Xt,zn,oa){if(!(!z||!s.tooltips)&&z[zn]!==!1){var MA=Xt[zn];s.tooltips[zn]!==!0&&(MA=s.tooltips[zn].to(oa[zn])),z[zn].innerHTML=MA}})}function vA(){NI("update"+INTERNAL_EVENT_NS.aria),rI("update"+INTERNAL_EVENT_NS.aria,function(Xt,zn,oa,MA,YA){ge.forEach(function(PA){var iI=H[PA],XA=QA(ae,PA,0,!0,!0,!0),$I=QA(ae,PA,100,!0,!0,!0),GI=YA[PA],sC=String(s.ariaFormat.to(oa[PA]));XA=oe.fromStepping(XA).toFixed(1),$I=oe.fromStepping($I).toFixed(1),GI=oe.fromStepping(GI).toFixed(1),iI.children[0].setAttribute("aria-valuemin",XA),iI.children[0].setAttribute("aria-valuemax",$I),iI.children[0].setAttribute("aria-valuenow",GI),iI.children[0].setAttribute("aria-valuetext",sC)})})}function TA(Xt){if(Xt.mode===PipsMode.Range||Xt.mode===PipsMode.Steps)return oe.xVal;if(Xt.mode===PipsMode.Count){if(Xt.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var zn=Xt.values-1,oa=100/zn,MA=[];zn--;)MA[zn]=zn*oa;return MA.push(100),VA(MA,Xt.stepped)}return Xt.mode===PipsMode.Positions?VA(Xt.values,Xt.stepped):Xt.mode===PipsMode.Values?Xt.stepped?Xt.values.map(function(YA){return oe.fromStepping(oe.getStep(oe.toStepping(YA)))}):Xt.values:[]}function VA(Xt,zn){return Xt.map(function(oa){return oe.fromStepping(zn?oe.getStep(oa):oa)})}function mI(Xt){function zn(GI,sC){return Number((GI+sC).toFixed(7))}var oa=TA(Xt),MA={},YA=oe.xVal[0],PA=oe.xVal[oe.xVal.length-1],iI=!1,XA=!1,$I=0;return oa=unique(oa.slice().sort(function(GI,sC){return GI-sC})),oa[0]!==YA&&(oa.unshift(YA),iI=!0),oa[oa.length-1]!==PA&&(oa.push(PA),XA=!0),oa.forEach(function(GI,sC){var eC,KI,Yt,Dn=GI,Kn=oa[sC+1],Ut,Wt,ua,uA,EA,bA,lI,YI=Xt.mode===PipsMode.Steps;for(YI&&(eC=oe.xNumSteps[sC]),eC||(eC=Kn-Dn),Kn===void 0&&(Kn=Dn),eC=Math.max(eC,1e-7),KI=Dn;KI<=Kn;KI=zn(KI,eC)){for(Ut=oe.toStepping(KI),Wt=Ut-$I,EA=Wt/(Xt.density||1),bA=Math.round(EA),lI=Wt/bA,Yt=1;Yt<=bA;Yt+=1)ua=$I+Yt*lI,MA[ua.toFixed(5)]=[oe.fromStepping(ua),0];uA=oa.indexOf(KI)>-1?PipsType.LargeValue:YI?PipsType.SmallValue:PipsType.NoValue,!sC&&iI&&KI!==Kn&&(uA=0),KI===Kn&&XA||(MA[Ut.toFixed(5)]=[KI,uA]),$I=Ut}}),MA}function jA(Xt,zn,oa){var MA,YA,PA=be.createElement("div"),iI=(MA={},MA[PipsType.None]="",MA[PipsType.NoValue]=s.cssClasses.valueNormal,MA[PipsType.LargeValue]=s.cssClasses.valueLarge,MA[PipsType.SmallValue]=s.cssClasses.valueSub,MA),XA=(YA={},YA[PipsType.None]="",YA[PipsType.NoValue]=s.cssClasses.markerNormal,YA[PipsType.LargeValue]=s.cssClasses.markerLarge,YA[PipsType.SmallValue]=s.cssClasses.markerSub,YA),$I=[s.cssClasses.valueHorizontal,s.cssClasses.valueVertical],GI=[s.cssClasses.markerHorizontal,s.cssClasses.markerVertical];addClass(PA,s.cssClasses.pips),addClass(PA,s.ort===0?s.cssClasses.pipsHorizontal:s.cssClasses.pipsVertical);function sC(KI,Yt){var Dn=Yt===s.cssClasses.value,Kn=Dn?$I:GI,Ut=Dn?iI:XA;return Yt+" "+Kn[s.ort]+" "+Ut[KI]}function eC(KI,Yt,Dn){if(Dn=zn?zn(Yt,Dn):Dn,Dn!==PipsType.None){var Kn=Ue(PA,!1);Kn.className=sC(Dn,s.cssClasses.marker),Kn.style[s.style]=KI+"%",Dn>PipsType.NoValue&&(Kn=Ue(PA,!1),Kn.className=sC(Dn,s.cssClasses.value),Kn.setAttribute("data-value",String(Yt)),Kn.style[s.style]=KI+"%",Kn.innerHTML=String(oa.to(Yt)))}}return Object.keys(Xt).forEach(function(KI){eC(KI,Xt[KI][0],Xt[KI][1])}),PA}function aI(){K&&(removeElement(K),K=null)}function WA(Xt){aI();var zn=mI(Xt),oa=Xt.filter,MA=Xt.format||{to:function(YA){return String(Math.round(YA))}};return K=F.appendChild(jA(zn,oa,MA)),K}function KA(){var Xt=M.getBoundingClientRect(),zn="offset"+["Width","Height"][s.ort];return s.ort===0?Xt.width||M[zn]:Xt.height||M[zn]}function rA(Xt,zn,oa,MA){var YA=function(iI){var XA=ta(iI,MA.pageOffset,MA.target||zn);if(!XA||Nt()&&!MA.doNotReject||hasClass(F,s.cssClasses.tap)&&!MA.doNotReject||Xt===_.start&&XA.buttons!==void 0&&XA.buttons>1||MA.hover&&XA.buttons)return!1;T||XA.preventDefault(),XA.calcPoint=XA.points[s.ort],oa(XA,MA)},PA=[];return Xt.split(" ").forEach(function(iI){zn.addEventListener(iI,YA,T?{passive:!0}:!1),PA.push([iI,YA])}),PA}function ta(Xt,zn,oa){var MA=Xt.type.indexOf("touch")===0,YA=Xt.type.indexOf("mouse")===0,PA=Xt.type.indexOf("pointer")===0,iI=0,XA=0;if(Xt.type.indexOf("MSPointer")===0&&(PA=!0),Xt.type==="mousedown"&&!Xt.buttons&&!Xt.touches)return!1;if(MA){var $I=function(eC){var KI=eC.target;return KI===oa||oa.contains(KI)||Xt.composed&&Xt.composedPath().shift()===oa};if(Xt.type==="touchstart"){var GI=Array.prototype.filter.call(Xt.touches,$I);if(GI.length>1)return!1;iI=GI[0].pageX,XA=GI[0].pageY}else{var sC=Array.prototype.find.call(Xt.changedTouches,$I);if(!sC)return!1;iI=sC.pageX,XA=sC.pageY}}return zn=zn||getPageOffset(be),(YA||PA)&&(iI=Xt.clientX+zn.x,XA=Xt.clientY+zn.y),Xt.pageOffset=zn,Xt.points=[iI,XA],Xt.cursor=YA||PA,Xt}function fa(Xt){var zn=Xt-offset(M,s.ort),oa=zn*100/KA();return oa=limit(oa),s.dir?100-oa:oa}function yA(Xt){var zn=100,oa=!1;return H.forEach(function(MA,YA){if(!qt(YA)){var PA=ae[YA],iI=Math.abs(PA-Xt),XA=iI===100&&zn===100,$I=iI<zn,GI=iI<=zn&&Xt>PA;($I||GI||XA)&&(oa=YA,zn=iI)}}),oa}function _A(Xt,zn){Xt.type==="mouseout"&&Xt.target.nodeName==="HTML"&&Xt.relatedTarget===null&&AA(Xt,zn)}function la(Xt,zn){if(navigator.appVersion.indexOf("MSIE 9")===-1&&Xt.buttons===0&&zn.buttonsProperty!==0)return AA(Xt,zn);var oa=(s.dir?-1:1)*(Xt.calcPoint-zn.startCalcPoint),MA=oa*100/zn.baseSize;gI(oa>0,MA,zn.locations,zn.handleNumbers,zn.connect)}function AA(Xt,zn){zn.handle&&(removeClass(zn.handle,s.cssClasses.active),pe-=1),zn.listeners.forEach(function(oa){Re.removeEventListener(oa[0],oa[1])}),pe===0&&(removeClass(F,s.cssClasses.drag),dA(),Xt.cursor&&(Fe.style.cursor="",Fe.removeEventListener("selectstart",preventDefault))),s.events.smoothSteps&&(zn.handleNumbers.forEach(function(oa){RA(oa,ae[oa],!0,!0,!1,!1)}),zn.handleNumbers.forEach(function(oa){Rt("update",oa)})),zn.handleNumbers.forEach(function(oa){Rt("change",oa),Rt("set",oa),Rt("end",oa)})}function tA(Xt,zn){if(!zn.handleNumbers.some(qt)){var oa;if(zn.handleNumbers.length===1){var MA=H[zn.handleNumbers[0]];oa=MA.children[0],pe+=1,addClass(oa,s.cssClasses.active)}Xt.stopPropagation();var YA=[],PA=rA(_.move,Re,la,{target:Xt.target,handle:oa,connect:zn.connect,listeners:YA,startCalcPoint:Xt.calcPoint,baseSize:KA(),pageOffset:Xt.pageOffset,handleNumbers:zn.handleNumbers,buttonsProperty:Xt.buttons,locations:ae.slice()}),iI=rA(_.end,Re,AA,{target:Xt.target,handle:oa,listeners:YA,doNotReject:!0,handleNumbers:zn.handleNumbers}),XA=rA("mouseout",Re,_A,{target:Xt.target,handle:oa,listeners:YA,doNotReject:!0,handleNumbers:zn.handleNumbers});YA.push.apply(YA,PA.concat(iI,XA)),Xt.cursor&&(Fe.style.cursor=getComputedStyle(Xt.target).cursor,H.length>1&&addClass(F,s.cssClasses.drag),Fe.addEventListener("selectstart",preventDefault,!1)),zn.handleNumbers.forEach(function($I){Rt("start",$I)})}}function ba(Xt){Xt.stopPropagation();var zn=fa(Xt.calcPoint),oa=yA(zn);oa!==!1&&(s.events.snap||addClassFor(F,s.cssClasses.tap,s.animationDuration),RA(oa,zn,!0,!0),dA(),Rt("slide",oa,!0),Rt("update",oa,!0),s.events.snap?tA(Xt,{handleNumbers:[oa]}):(Rt("change",oa,!0),Rt("set",oa,!0)))}function iA(Xt){var zn=fa(Xt.calcPoint),oa=oe.getStep(zn),MA=oe.fromStepping(oa);Object.keys(he).forEach(function(YA){YA.split(".")[0]==="hover"&&he[YA].forEach(function(PA){PA.call(RC,MA)})})}function lA(Xt,zn){if(Nt()||qt(zn))return!1;var oa=["Left","Right"],MA=["Down","Up"],YA=["PageDown","PageUp"],PA=["Home","End"];s.dir&&!s.ort?oa.reverse():s.ort&&!s.dir&&(MA.reverse(),YA.reverse());var iI=Xt.key.replace("Arrow",""),XA=iI===YA[0],$I=iI===YA[1],GI=iI===MA[0]||iI===oa[0]||XA,sC=iI===MA[1]||iI===oa[1]||$I,eC=iI===PA[0],KI=iI===PA[1];if(!GI&&!sC&&!eC&&!KI)return!0;Xt.preventDefault();var Yt;if(sC||GI){var Dn=GI?0:1,Kn=IC(zn),Ut=Kn[Dn];if(Ut===null)return!1;Ut===!1&&(Ut=oe.getDefaultStep(ae[zn],GI,s.keyboardDefaultStep)),$I||XA?Ut*=s.keyboardPageMultiplier:Ut*=s.keyboardMultiplier,Ut=Math.max(Ut,1e-7),Ut=(GI?-1:1)*Ut,Yt=se[zn]+Ut}else KI?Yt=s.spectrum.xVal[s.spectrum.xVal.length-1]:Yt=s.spectrum.xVal[0];return RA(zn,oe.toStepping(Yt),!0,!0),Rt("slide",zn),Rt("update",zn),Rt("change",zn),Rt("set",zn),!1}function yI(Xt){Xt.fixed||H.forEach(function(zn,oa){rA(_.start,zn.children[0],tA,{handleNumbers:[oa]})}),Xt.tap&&rA(_.start,M,ba,{}),Xt.hover&&rA(_.move,M,iA,{hover:!0}),Xt.drag&&J.forEach(function(zn,oa){if(!(zn===!1||oa===0||oa===J.length-1)){var MA=H[oa-1],YA=H[oa],PA=[zn],iI=[MA,YA],XA=[oa-1,oa];addClass(zn,s.cssClasses.draggable),Xt.fixed&&(PA.push(MA.children[0]),PA.push(YA.children[0])),Xt.dragAll&&(iI=H,XA=ge),PA.forEach(function($I){rA(_.start,$I,tA,{handles:iI,handleNumbers:XA,connect:zn})})}})}function rI(Xt,zn){he[Xt]=he[Xt]||[],he[Xt].push(zn),Xt.split(".")[0]==="update"&&H.forEach(function(oa,MA){Rt("update",MA)})}function BI(Xt){return Xt===INTERNAL_EVENT_NS.aria||Xt===INTERNAL_EVENT_NS.tooltips}function NI(Xt){var zn=Xt&&Xt.split(".")[0],oa=zn?Xt.substring(zn.length):Xt;Object.keys(he).forEach(function(MA){var YA=MA.split(".")[0],PA=MA.substring(YA.length);(!zn||zn===YA)&&(!oa||oa===PA)&&(!BI(PA)||oa===PA)&&delete he[MA]})}function Rt(Xt,zn,oa){Object.keys(he).forEach(function(MA){var YA=MA.split(".")[0];Xt===YA&&he[MA].forEach(function(PA){PA.call(RC,se.map(s.format.to),zn,se.slice(),oa||!1,ae.slice(),RC)})})}function QA(Xt,zn,oa,MA,YA,PA,iI){var XA;return H.length>1&&!s.events.unconstrained&&(MA&&zn>0&&(XA=oe.getAbsoluteDistance(Xt[zn-1],s.margin,!1),oa=Math.max(oa,XA)),YA&&zn<H.length-1&&(XA=oe.getAbsoluteDistance(Xt[zn+1],s.margin,!0),oa=Math.min(oa,XA))),H.length>1&&s.limit&&(MA&&zn>0&&(XA=oe.getAbsoluteDistance(Xt[zn-1],s.limit,!1),oa=Math.min(oa,XA)),YA&&zn<H.length-1&&(XA=oe.getAbsoluteDistance(Xt[zn+1],s.limit,!0),oa=Math.max(oa,XA))),s.padding&&(zn===0&&(XA=oe.getAbsoluteDistance(0,s.padding[0],!1),oa=Math.max(oa,XA)),zn===H.length-1&&(XA=oe.getAbsoluteDistance(100,s.padding[1],!0),oa=Math.min(oa,XA))),iI||(oa=oe.getStep(oa)),oa=limit(oa),oa===Xt[zn]&&!PA?!1:oa}function cA(Xt,zn){var oa=s.ort;return(oa?zn:Xt)+", "+(oa?Xt:zn)}function gI(Xt,zn,oa,MA,YA){var PA=oa.slice(),iI=MA[0],XA=s.events.smoothSteps,$I=[!Xt,Xt],GI=[Xt,!Xt];MA=MA.slice(),Xt&&MA.reverse(),MA.length>1?MA.forEach(function(eC,KI){var Yt=QA(PA,eC,PA[eC]+zn,$I[KI],GI[KI],!1,XA);Yt===!1?zn=0:(zn=Yt-PA[eC],PA[eC]=Yt)}):$I=GI=[!0];var sC=!1;MA.forEach(function(eC,KI){sC=RA(eC,oa[eC]+zn,$I[KI],GI[KI],!1,XA)||sC}),sC&&(MA.forEach(function(eC){Rt("update",eC),Rt("slide",eC)}),YA!=null&&Rt("drag",iI))}function LI(Xt,zn){return s.dir?100-Xt-zn:Xt}function da(Xt,zn){ae[Xt]=zn,se[Xt]=oe.fromStepping(zn);var oa=LI(zn,0)-ye,MA="translate("+cA(oa+"%","0")+")";if(H[Xt].style[s.transformRule]=MA,s.events.invertConnects&&ae.length>1){var YA=ae.every(function(PA,iI,XA){return iI===0||PA>=XA[iI-1]});if(ve!==!YA){vC();return}}pI(Xt),pI(Xt+1),ve&&(pI(Xt-1),pI(Xt+2))}function dA(){ge.forEach(function(Xt){var zn=ae[Xt]>50?-1:1,oa=3+(H.length+zn*Xt);H[Xt].style.zIndex=String(oa)})}function RA(Xt,zn,oa,MA,YA,PA){return YA||(zn=QA(ae,Xt,zn,oa,MA,!1,PA)),zn===!1?!1:(da(Xt,zn),!0)}function pI(Xt){if(J[Xt]){var zn=ae.slice();ve&&zn.sort(function(XA,$I){return XA-$I});var oa=0,MA=100;Xt!==0&&(oa=zn[Xt-1]),Xt!==J.length-1&&(MA=zn[Xt]);var YA=MA-oa,PA="translate("+cA(LI(oa,YA)+"%","0")+")",iI="scale("+cA(YA/100,"1")+")";J[Xt].style[s.transformRule]=PA+" "+iI}}function vI(Xt,zn){return Xt===null||Xt===!1||Xt===void 0||(typeof Xt=="number"&&(Xt=String(Xt)),Xt=s.format.from(Xt),Xt!==!1&&(Xt=oe.toStepping(Xt)),Xt===!1||isNaN(Xt))?ae[zn]:Xt}function EI(Xt,zn,oa){var MA=asArray(Xt),YA=ae[0]===void 0;zn=zn===void 0?!0:zn,s.animate&&!YA&&addClassFor(F,s.cssClasses.tap,s.animationDuration),ge.forEach(function(XA){RA(XA,vI(MA[XA],XA),!0,!1,oa)});var PA=ge.length===1?0:1;if(YA&&oe.hasNoSize()&&(oa=!0,ae[0]=0,ge.length>1)){var iI=100/(ge.length-1);ge.forEach(function(XA){ae[XA]=XA*iI})}for(;PA<ge.length;++PA)ge.forEach(function(XA){RA(XA,ae[XA],!0,!0,oa)});dA(),ge.forEach(function(XA){Rt("update",XA),MA[XA]!==null&&zn&&Rt("set",XA)})}function zI(Xt){EI(s.start,Xt)}function FI(Xt,zn,oa,MA){if(Xt=Number(Xt),!(Xt>=0&&Xt<ge.length))throw new Error("noUiSlider: invalid handle number, got: "+Xt);RA(Xt,vI(zn,Xt),!0,!0,MA),Rt("update",Xt),oa&&Rt("set",Xt)}function DI(Xt){if(Xt===void 0&&(Xt=!1),Xt)return se.length===1?se[0]:se.slice(0);var zn=se.map(s.format.to);return zn.length===1?zn[0]:zn}function ZI(){for(NI(INTERNAL_EVENT_NS.aria),NI(INTERNAL_EVENT_NS.tooltips),Object.keys(s.cssClasses).forEach(function(Xt){removeClass(F,s.cssClasses[Xt])});F.firstChild;)F.removeChild(F.firstChild);delete F.noUiSlider}function IC(Xt){var zn=ae[Xt],oa=oe.getNearbySteps(zn),MA=se[Xt],YA=oa.thisStep.step,PA=null;if(s.snap)return[MA-oa.stepBefore.startValue||null,oa.stepAfter.startValue-MA||null];YA!==!1&&MA+YA>oa.stepAfter.startValue&&(YA=oa.stepAfter.startValue-MA),MA>oa.thisStep.startValue?PA=oa.thisStep.step:oa.stepBefore.step===!1?PA=!1:PA=MA-oa.stepBefore.highestStep,zn===100?YA=null:zn===0&&(PA=null);var iI=oe.countStepDecimals();return YA!==null&&YA!==!1&&(YA=Number(YA.toFixed(iI))),PA!==null&&PA!==!1&&(PA=Number(PA.toFixed(iI))),[PA,YA]}function mC(){return ge.map(IC)}function BC(Xt,zn){var oa=DI(),MA=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];MA.forEach(function(PA){Xt[PA]!==void 0&&(d[PA]=Xt[PA])});var YA=testOptions(d);MA.forEach(function(PA){Xt[PA]!==void 0&&(s[PA]=YA[PA])}),oe=YA.spectrum,s.margin=YA.margin,s.limit=YA.limit,s.padding=YA.padding,s.pips?WA(s.pips):aI(),s.tooltips?qn():na(),ae=[],EI(isSet(Xt.start)?Xt.start:oa,zn),Xt.connect&&yC()}function yC(){for(;P.firstChild;)P.removeChild(P.firstChild);for(var Xt=0;Xt<=s.handles;Xt++)J[Xt]=St(P,s.connect[Xt]),pI(Xt);yI({drag:s.events.drag,fixed:!0})}function vC(){ve=!ve,testConnect(s,s.connect.map(function(Xt){return!Xt})),yC()}function _C(){M=xt(F),At(s.connect,M),yI(s.events),EI(s.start),s.pips&&WA(s.pips),s.tooltips&&qn(),vA()}_C();var RC={destroy:ZI,steps:mC,on:rI,off:NI,get:DI,set:EI,setHandle:FI,reset:zI,disable:Jn,enable:qr,__moveHandles:function(Xt,zn,oa){gI(Xt,zn,ae,oa)},options:d,updateOptions:BC,target:F,removePips:aI,removeTooltips:na,getPositions:function(){return ae.slice()},getTooltips:function(){return z},getOrigins:function(){return H},pips:WA};return RC}function initialize(f,s){if(!f||!f.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+f);if(f.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var d=testOptions(s),_=scope(f,d,s);return f.noUiSlider=_,_}const noUiSlider={__spectrum:Spectrum,cssClasses,create:initialize};class ColorChannelDialog extends BaseDialog{constructor(s,d,_){const S={width:500,title:"Channels",doc:d||document};super(S,{viv:s,ds:_})}init(s){const d=this.viv=s.viv;this.mainDiv=createEl("div",{},this.dialog);const _=this.viv.getSelectedChannels();for(const P of _)this.addSlider(P);const S=createEl("div",{styles:{padding:"4px"}},this.dialog),T=createEl("select",{},S),F=d.getAllChannels();for(let P=0;P<F.length;P++)createEl("option",{text:F[P].Name??F[P].ID,value:P},T);const M=createEl("input",{styles:{width:"25px",height:"20px",padding:"0px",margin:"0px 4px"},type:"color",value:"#ff0000"},S);createEl("button",{classes:["ciview-button-sm"],text:"Add Channel"},S).addEventListener("click",()=>{this.viv.addChannel({index:Number.parseInt(T.value),color:M.value}).then(P=>this.addSlider(P))}),createEl("button",{classes:["ciview-button-sm"],text:"Set as Default"},S).addEventListener("click",()=>{s.ds.regions.avivator.default_channels=this.viv.getSelectedChannelsNice(),s.ds.dirtyMetadata.add("regions")})}addSlider(s){const d=createEl("div",{styles:{display:"flex",padding:"4px",alignItems:"center",width:"100%"}},this.mainDiv);createEl("span",{text:s.name||`channel ${s.index}`,classes:["mdv-flex-dynamic"],styles:{flexBasis:"30%"}},d);const _=createEl("div",{classes:["mdv-flex-dynamic"],styles:{margin:"0px 10px",flexBasis:"70%",overflow:"visible"}},d),S=s.domains;noUiSlider.create(_,{start:[s.contrastLimits[0],s.contrastLimits[1]],range:{min:S?S[0]:0,max:S?S[1]:300},document:this.config.doc,tooltips:!0},d),_.noUiSlider.on("update",P=>{s.contrastLimits=[Number.parseFloat(P[0]),Number.parseFloat(P[1])],this.viv.setChannel(s)});const T=createEl("input",{classes:["mdv-flex-fixed"],styles:{width:"25px",height:"20px",padding:"0px"},type:"color",value:s.color},d);T.addEventListener("input",()=>{s.color=T.value,this.viv.setChannel(s)});const F=createEl("input",{classes:["mdv-flex-fixed","mdv-checkbox"],type:"checkbox"},d);F.checked=s.channelsVisible,F.addEventListener("click",()=>{s.channelsVisible=F.checked,this.viv.setChannel(s)}),createEl("i",{classes:["mdv-flex-fixed","fas","fa-times"],styles:{width:"16px",margin:"0px 3px",cursor:"pointer"}},d).addEventListener("click",()=>{this.viv.removeChannel(s),d.remove()})}}class VivScatterPlot extends DensityScatterPlot{constructor(s,d,_){const S=s.getColumnName(_.param[0]),T=s.getColumnName(_.param[1]);_.axis||(_.axis={x:{size:30,label:S,textsize:13},y:{size:45,label:T,textsize:13}}),super(s,d,_,{x:{},y:{}}),_.viv&&this.addMenuIcon("fas fa-palette","Alter Channels").addEventListener("click",F=>new ColorChannelDialog(this.viv,this.__doc__,this.dataStore))}setSize(s,d){if(super.setSize(s,d),this.viv){const _=this._getContentDimensions();this.viv.setSize(_.width,_.height,this.app)}}remove(){this.viv.deck&&this.viv.deck.finalize(),super.remove()}centerGraph(){super.centerGraph(),this.viv&&this.viv.setPanZoom(this.app.offset,this.app.x_scale,this.app.y_scale)}getConfig(){const s=super.getConfig();return this.viv.layers[0].props,s.viv.channels=this.viv.getSelectedChannelsNice(),s}afterAppCreation(){const s=this.config;if(s.viv||(s.viv={url:"https://viv-demo.storage.googleapis.com/LuCa-7color_3x3component_data.ome.tif",image_properties:{contrastLimits:[[0,255]],colors:[[255,255,255]],channelsVisible:[!0],selections:[{c:0,t:0,z:0}]}}),s.viv){const d=this._getContentDimensions();this.vivCanvas=createEl("canvas",{height:d.height,width:d.width,styles:{position:"absolute"}}),this.graphDiv.prepend(this.vivCanvas),__vitePreload(async()=>{const{default:_}=await import("../assets/VivViewerMDV-SkLw12p-.js");return{default:_}},__vite__mapDeps([11,1]),import.meta.url).then(({default:_})=>{const S=this.dataStore.regions,T=Object.assign({},s.viv);if(S){const F=S.all_regions[s.region].viv_image;let M=F.url?F.url:getProjectURL(S.avivator.base_url)+F.file;if(!M){let P=S.avivator.base_url;P.startsWith("http")||(P.startsWith("/")?P=window.location.origin+P:(P.startsWith("./")&&(P=P.substring(2)),P=`${window.location.href.split("?")[0]}/${P}`)),M=P+F.file}T.url=M}this.viv=new _(this.vivCanvas,T,this.app),this.app.addHandler("pan_or_zoom",(F,M,P)=>{this.viv.setPanZoom(F,M,P)},`${s.id}_viv`)})}return super.afterAppCreation()}}BaseChart.types.viv_scatter_plot={name:"Viv Scatter Plot",required:f=>{var s;return(s=f.regions)==null?void 0:s.avivator},extra_controls:f=>{const s=[];for(const d in f.regions.all_regions)f.regions.all_regions[d].viv_image&&s.push({name:d,value:d});return[{type:"dropdown",name:"region",label:f.getColumnName(f.regions.region_field),values:s}]},init:(f,s,d)=>{BaseChart.types.image_scatter_plot.init(f,s,d),f.background_image=void 0,f.radius=.5,f.viv={channels:s.regions.avivator.default_channels}},class:VivScatterPlot};function shallow$1(f,s){if(Object.is(f,s))return!0;if(typeof f!="object"||f===null||typeof s!="object"||s===null)return!1;if(f instanceof Map&&s instanceof Map){if(f.size!==s.size)return!1;for(const[_,S]of f)if(!Object.is(S,s.get(_)))return!1;return!0}if(f instanceof Set&&s instanceof Set){if(f.size!==s.size)return!1;for(const _ of f)if(!s.has(_))return!1;return!0}const d=Object.keys(f);if(d.length!==Object.keys(s).length)return!1;for(const _ of d)if(!Object.prototype.hasOwnProperty.call(s,_)||!Object.is(f[_],s[_]))return!1;return!0}const COLOR_PALLETE=[[0,0,255],[0,255,0],[255,0,255],[255,255,0],[255,128,0],[0,255,255],[255,255,255],[255,0,0]],GLOBAL_SLIDER_DIMENSION_FIELDS=["z","t"],FILL_PIXEL_VALUE="----",MAX_CHANNELS_FOR_SNACKBAR_WARNING=40;function isOmeTiff(f){if(Array.isArray(f))return!1;const s=typeof f=="string"?f:f.name;return s.includes("ome.tiff")||s.includes("ome.tif")||s.includes(".companion.ome")}function getMultiTiffFilenames(f){return Array.isArray(f)?f.map(s=>s.name):f instanceof File?[f.name]:f.split(",")}function isMultiTiff(f){const s=getMultiTiffFilenames(f);for(const d of s){const _=d.toLowerCase();if(!(_.includes(".tiff")||_.includes(".tif")))return!1}return!0}async function generateMultiTiffFileArray(f){return Array.isArray(f)?f:f instanceof File?[f]:f.split(",")}async function getTiffImageCount(f){return(await(typeof f=="string"?fromUrl:fromBlob)(f)).getImageCount()}async function generateMultiTiffSources(f){const s=await generateMultiTiffFileArray(f),d=[];let _=0;for(const S of s){const T=[],F=await getTiffImageCount(S);for(let M=0;M<F;M++)T.push({c:_,z:0,t:0}),_+=1;d.push([T,S])}return d}class UnsupportedBrowserError extends Error{constructor(s){super(s),this.name="UnsupportedBrowserError"}}async function getTotalImageCount(f){var J;const s=f[0],_=await s.data[0]._indexer({c:0,z:0,t:0});if(!!((J=_==null?void 0:_.fileDirectory)!=null&&J.SubIFDs))return f.reduce((K,{metadata:z})=>{const{SizeC:oe,SizeT:se,SizeZ:ae}=z.Pixels;return oe*se*ae+K},1);const T=s.data.length,{SizeC:F,SizeT:M,SizeZ:P}=s.metadata.Pixels;return F*M*P*T}function isZodError(f){return f instanceof Error&&"issues"in f}async function fetchSingleFileOmeTiffOffsets(f){if(f.includes("companion.ome"))return;const s=f.replace(/ome\.tif(f?)/gi,"offsets.json");try{const d=await fetch(s);return d.status===200?await d.json():void 0}catch{console.warn(`Failed to fetch offsets for ${f}`);return}}async function createLoader(f,s,d){try{if(isOmeTiff(f)){if(f instanceof File)return await loadOmeTiff(f,{images:"all"});const S=await fetchSingleFileOmeTiffOffsets(f),T=await loadOmeTiff(f,{offsets:S,images:"all"}),F=await getTotalImageCount(T);return!S&&F>MAX_CHANNELS_FOR_SNACKBAR_WARNING&&s(!0),T}if(Array.isArray(f)&&typeof f[0].arrayBuffer!="function")throw new UnsupportedBrowserError("Cannot upload a local Zarr or flat TIFF files with this browser. Try using Chrome, Firefox, or Microsoft Edge.");if(isMultiTiff(f)){const S=await generateMultiTiffSources(f);return await loadMultiTiff(S,{})}let _;try{_=await loadBioformatsZarr(f)}catch(S){if(isZodError(S))throw S;const T=await loadOmeZarr(f,{type:"multiscales"}),F={Pixels:{Channels:T.metadata.omero.channels.map(M=>({Name:M.label,SamplesPerPixel:1}))}};_={data:T.data,metadata:F}}return _}catch(_){throw _ instanceof UnsupportedBrowserError?d(_.message):(console.error(_),d(null)),_}}function getDefaultGlobalSelection(f){const s=f.filter(_=>GLOBAL_SLIDER_DIMENSION_FIELDS.includes(_.name.toLowerCase())),d={};for(const _ of s)d[_.name]=Math.floor(_.size/2);return d}function isGlobalOrXYDimension(f){return f=f.toLowerCase(),f==="x"||f==="y"||GLOBAL_SLIDER_DIMENSION_FIELDS.includes(f)}function isInterleaved(f){const s=f[f.length-1];return s===3||s===4}function zip(f,s){if(f.length!==s.length)throw new Error("Array lengths must be equal");return f.map((d,_)=>[d,s[_]])}function buildDefaultSelection({labels:f,shape:s}){const d=[],_=zip(f,s).map(([F,M])=>({name:F,size:M})),S=getDefaultGlobalSelection(_),T=_.find(F=>!isGlobalOrXYDimension(F.name));if(!T)return[S];for(let F=0;F<Math.min(4,T.size);F+=1)d.push({[T.name]:F,...S});return isInterleaved(s)?[{...d[0],c:0}]:d}async function getSingleSelectionStats2D({loader:f,selection:s}){const _=await(Array.isArray(f)?f[f.length-1]:f).getRaster({selection:s}),S=getChannelStats(_.data),{domain:T,contrastLimits:F}=S;return F[0]===F[1]&&(F[0]=T[0],F[1]=T[1]),{domain:T,contrastLimits:F}}async function getSingleSelectionStats3D({loader:f,selection:s}){const d=f[f.length-1],{shape:_,labels:S}=d,T=_[S.indexOf("z")],F=await d.getRaster({selection:{...s,z:0}}),M=await d.getRaster({selection:{...s,z:Math.floor(T/2)}}),P=await d.getRaster({selection:{...s,z:Math.max(0,T-1)}}),H=getChannelStats(F.data),J=getChannelStats(M.data),K=getChannelStats(P.data);return{domain:[Math.min(H.domain[0],J.domain[0],K.domain[0]),Math.max(H.domain[1],J.domain[1],K.domain[1])],contrastLimits:[Math.min(H.contrastLimits[0],J.contrastLimits[0],K.contrastLimits[0]),Math.max(H.contrastLimits[1],J.contrastLimits[1],K.contrastLimits[1])]}}const getSingleSelectionStats=async({loader:f,selection:s,use3d:d})=>(d?getSingleSelectionStats3D:getSingleSelectionStats2D)({loader:f,selection:s}),getMultiSelectionStats=async({loader:f,selections:s,use3d:d})=>{const _=await Promise.all(s.map(F=>getSingleSelectionStats({loader:f,selection:F,use3d:d}))),S=_.map(F=>F.domain),T=_.map(F=>F.contrastLimits);return{domains:S,contrastLimits:T}};function guessRgb({Pixels:f}){const s=f.Channels.length,{SamplesPerPixel:d}=f.Channels[0],_=s===3&&f.Type==="uint8",S=f.SizeC===3&&s===1&&f.Interleaved;return d===3||_||S}function getPhysicalSizeScalingMatrix(f){var S;const{x:s,y:d,z:_}=((S=f==null?void 0:f.meta)==null?void 0:S.physicalSizes)??{};if(s!=null&&s.size&&(d!=null&&d.size)&&(_!=null&&_.size)){const T=Math.min(_.size,s.size,d.size),F=[s.size/T,d.size/T,_.size/T];return new Matrix4().scale(F)}return new Matrix4().identity()}function getBoundingCube(f){const s=Array.isArray(f)?f[0]:f,{shape:d,labels:_}=s,S=getPhysicalSizeScalingMatrix(s),T=[0,S[0]*d[_.indexOf("x")]],F=[0,S[5]*d[_.indexOf("y")]],M=[0,S[10]*d[_.indexOf("z")]];return[T,F,M]}const useSavedVivConfig=()=>{const f=useVivConfig(),{viewerStore:s,channelsStore:d,imageSettingsStore:_}=f,S=useViewerStoreApi(),T=useChannelsStoreApi(),F=useImageSettingsStoreApi();return reactExports.useCallback(()=>{S.setState(P=>({...P,...s})),T.setState(P=>({...P,...d})),F.setState(P=>({...P,..._}))},[s,d,_,T.setState,S.setState,F.setState])},useImage=(f,s)=>{const d=useSavedVivConfig(),[_,S,T]=useViewerStore(oe=>[oe.use3d,oe.toggleUse3d,oe.toggleIsOffsetsSnackbarOn],shallow$1),[F,M]=useImageSettingsStore(oe=>[oe.lensEnabled,oe.toggleLensEnabled],shallow$1),P=useLoader(),H=useMetadata(),J=useViewerStoreApi(),K=useChannelsStoreApi(),z=useImageSettingsStoreApi();reactExports.useEffect(()=>{async function oe(){J.setState({isChannelLoading:[!0]}),J.setState({isViewerLoading:!0}),_&&S();const{urlOrFile:se}=f,ae=await createLoader(se,T,he=>J.setState({loaderErrorSnackbar:{on:!0,message:he}}));let ge,pe;Array.isArray(ae)?ae.length>1?(ge=ae.map(he=>he.metadata),pe=ae.map(he=>he.data)):(ge=ae[0].metadata,pe=ae[0].data):(ge=ae.metadata,pe=ae.data),pe&&(console.info("Metadata (in JSON-like form) for current file being viewed: ",ge),reactDomExports.unstable_batchedUpdates(()=>{K.setState({loader:pe}),J.setState({metadata:ge})}),_&&S())}f&&oe().then(d)},[f,s]),reactExports.useEffect(()=>{H&&(async()=>{J.setState({isChannelLoading:[!0]}),J.setState({isViewerLoading:!0}),_&&S();const se=buildDefaultSelection(P[0]),{Channels:ae}=H.Pixels,ge=ae.map((Ue,It)=>Ue.Name??`Channel ${It}`);let pe=[],he=[],ve=[];if(guessRgb(H))isInterleaved(P[0].shape)?(pe=[[0,255]],he=[[0,255]],ve=[[255,0,0]]):(pe=[[0,255],[0,255],[0,255]],he=[[0,255],[0,255],[0,255]],ve=[[255,0,0],[0,255,0],[0,0,255]]),F&&M(),J.setState({useColormap:!1,useLens:!1});else{const Ue=await getMultiSelectionStats({loader:P,selections:se,use3d:!1});he=Ue.domains,pe=Ue.contrastLimits,ve=he.length===1?[[255,255,255]]:he.map((It,St)=>{var At,xt;return((xt=(At=ae[St])==null?void 0:At.Color)==null?void 0:xt.slice(0,-1))??COLOR_PALLETE[St]}),J.setState({useLens:ge.length!==1,useColormap:!0})}K.setState({ids:he.map(()=>String(Math.random())),selections:se,domains:he,contrastLimits:pe,colors:ve,channelsVisible:ve.map(()=>!0)}),J.setState({isChannelLoading:se.map(Ue=>!Ue),isViewerLoading:!1,pixelValues:new Array(se.length).fill(FILL_PIXEL_VALUE),globalSelection:se[0],channelOptions:ge});const[Re,Fe,ye]=getBoundingCube(P);z.setState({xSlice:Re,ySlice:Fe,zSlice:ye})})().then(d)},[P,H])};function getVivId(f){return`-#${f}#`}const areViewStatesEqual=(f,s)=>s===f||(f==null?void 0:f.zoom)===(s==null?void 0:s.zoom)&&(f==null?void 0:f.rotationX)===(s==null?void 0:s.rotationX)&&(f==null?void 0:f.rotationOrbit)===(s==null?void 0:s.rotationOrbit)&&equal(f==null?void 0:f.target,s==null?void 0:s.target);class MDVivViewerWrapper extends reactExports.PureComponent{constructor(s){console.log("using custom VivViewerWrapper via MDVivViewer - now necessary for fixing mouse events on popouts"),super(s),this.state={viewStates:{},deckRef:reactExports.createRef(),outerContainer:s.outerContainer};const{viewStates:d}=this.state,{views:_,viewStates:S}=this.props;_.forEach(T=>{d[T.id]=T.filterViewState({viewState:S.find(F=>F.id===T.id)})}),this._onViewStateChange=this._onViewStateChange.bind(this),this.layerFilter=this.layerFilter.bind(this),this.onHover=this.onHover.bind(this)}layerFilter({layer:s,viewport:d}){return s.id.includes(getVivId(d.id))}_onViewStateChange({viewId:s,viewState:d,interactionState:_,oldViewState:S}){const{views:T,onViewStateChange:F}=this.props;return d=(F==null?void 0:F({viewId:s,viewState:d,interactionState:_,oldViewState:S}))||d,this.setState(M=>{const P={};return T.forEach(H=>{const J=M.viewStates[H.id];P[H.id]=H.filterViewState({viewState:{...d,id:s},oldViewState:S,currentViewState:J})}),{viewStates:P}}),d}componentDidUpdate(s){const{props:d}=this,{views:_,outerContainer:S}=d;if(S!==this.state.outerContainer&&this.state.deckRef.current)try{const{eventManager:M}=this.state.deckRef.current.deck,{element:P}=M;M.setElement(P),this.setState({outerContainer:S})}catch(M){console.error("attempt to reset deck eventManager element failed",M)}const T={...this.state.viewStates};let F=!1;_.forEach(M=>{var z,oe;const P=(z=d.viewStates)==null?void 0:z.find(se=>se.id===M.id);if(!P)return;const H=(oe=s.viewStates)==null?void 0:oe.find(se=>se.id===M.id);if(areViewStatesEqual(P,H))return;F=!0;const{height:J,width:K}=M;T[M.id]=M.filterViewState({viewState:{...P,height:J,width:K,id:M.id}})}),F&&this.setState({viewStates:T})}static getDerivedStateFromProps(s,d){const{views:_,viewStates:S}=s;if(_.some(T=>!d.viewStates[T.id]||T.height!==d.viewStates[T.id].height||T.width!==d.viewStates[T.id].width)){const T={};return _.forEach(F=>{const{height:M,width:P}=F,H=d.viewStates[F.id];T[F.id]=F.filterViewState({viewState:{...H||S.find(J=>J.id===F.id),height:M,width:P,id:F.id}})}),{viewStates:T}}return d}onHover(s,d){const{tile:_,coordinate:S,sourceLayer:T}=s,{onHover:F,hoverHooks:M}=this.props;if(F&&F(s,d),!M||!S||!T)return null;const{handleValue:P=()=>{},handleCoordnate:H=()=>{}}=M;let J;if(T.id.includes("Tiled")){if(!(_!=null&&_.content))return null;const{content:K,bbox:z,index:{z:oe}}=_;if(!K.data||!z)return null;const{data:se,width:ae,height:ge}=K,{left:pe,right:he,top:ve,bottom:be}=z,Re=[pe,se.height<T.tileSize?ge:be,se.width<T.tileSize?ae:he,ve];if(!se)return null;const Fe=Math.max(1,2**Math.round(-oe)),ye=[Math.floor((S[0]-Re[0])/Fe),Math.floor((S[1]-Re[3])/Fe)],Ue=ye[1]*ae+ye[0];J=se.map(It=>It[Ue])}else{const{channelData:K}=T.props;if(!K)return null;const{data:z,width:oe,height:se}=K;if(!z||!oe||!se)return null;const ae=[0,se,oe,0],{zoom:ge}=T.context.viewport,pe=Math.max(1,2**Math.floor(-ge)),he=[Math.floor((S[0]-ae[0])/pe),Math.floor((S[1]-ae[3])/pe)],ve=he[1]*oe+he[0];J=z.map(be=>be[ve])}P(J),H(S)}_renderLayers(){const{onHover:s}=this,{viewStates:d}=this.state,{views:_,layerProps:S}=this.props;return _.map((T,F)=>T.getLayers({viewStates:d,props:{...S[F],onHover:s}}))}render(){const{views:s,randomize:d,useDevicePixels:_=!0,deckProps:S}=this.props,{viewStates:T}=this.state,F=s.map(K=>K.getDeckGlView());if(d){const K=Math.random(),z=F[0],oe=K*1.49,se=Math.round(oe*(s.length-1));F[0]=F[se],F[se]=z}const M=this._renderLayers()[0],P=M.find(K=>K instanceof ScaleBarLayer),H=M.filter(K=>K!==P),J=(S==null?void 0:S.layers)===void 0?[M]:[H,...S.layers,P];return jsxRuntimeExports.jsx(DeckGL,{ref:this.state.deckRef,...S??{},layerFilter:this.layerFilter,layers:J,onViewStateChange:this._onViewStateChange,views:F,viewState:T,useDevicePixels:_,getCursor:({isDragging:K})=>K?"grabbing":"crosshair"})}}const MDVivViewer=f=>jsxRuntimeExports.jsx(MDVivViewerWrapper,{...f}),heatmapPresentationFS=`#version 300 es
#define SHADER_NAME triangle-layer-fragment-contour-shader

precision highp float;
out vec4 fragColor;
uniform float opacity;
uniform sampler2D weightsTexture; //using name 'texture' caused indirect glsl compiler errors with version 300 es(?)
uniform sampler2D colorTexture;
uniform float aggregationMode;

in vec2 vTexCoords;
in float vIntensityMin;
in float vIntensityMax;

// todo more structured uniforms, array of structs...
uniform float contourOpacity;
// struct ContourProps {
//     vec2 increment;
//     float lineWidth;
//     vec3 color;
// };
// uniform ContourProps contourProps;

float smoothContour(float value) {
    // value = clamp(value * vIntensityMax, 0., 1.);
    float width = 1.5; //todo better control, more coherent maths
    float w = width * fwidth(value);
    float f = 0.5; // reciprocol bandwidth
    if (value < f) return 0.; //todo something better
    // if (value > 50. * f) return 1.; //metaballs
    float wa = smoothstep(0., (w * f), mod(value * f, 1.)-0.5); //nb -0.5 is to center the contour
    wa = 1. - max(smoothstep(1.-w, 1., wa), smoothstep(w, 0., wa));
    // return 0.0;
    return smoothstep(0., 1., wa*0.5);
    // return contour(value);
}


vec4 getLinearColor(float value) {
  float factor = clamp(value * vIntensityMax, 0., 1.);
  vec4 color = texture(colorTexture, vec2(factor, 0.5));
  color.a *= min(value * vIntensityMin, 1.0);
  return color;
}


void main(void) {
  vec4 weights = texture(weightsTexture, vTexCoords);
  float weight = weights.r;

  if (aggregationMode > 0.5) {
    weight /= max(1.0, weights.a);
  }
  // discard pixels with 0 weight.
  if (weight <= 0.) {
    discard;
  }

  vec4 linearColor = getLinearColor(weight);
  // todo allow for multiple contours, with different properties
  float c = smoothContour(weight) * contourOpacity;
  vec4 fullColor = texture(colorTexture, vec2(1.0, 0.5)); //should be a uniform
  //fullColor = vec4(1.);
  linearColor = mix(linearColor, fullColor, c);
  //   linearColor = c * vec4(1.);
  linearColor.a *= opacity;
  linearColor.a = max(linearColor.a, c*2.);
  fragColor = linearColor;
}`;log.level=0;const triangleVs=`#version 300 es
#define SHADER_NAME heatp-map-layer-vertex-shader
uniform sampler2D maxTexture;
uniform float intensity;
uniform vec2 colorDomain;
uniform float threshold;
uniform float aggregationMode;
in vec3 positions;
in vec2 texCoords;
out vec2 vTexCoords;
out float vIntensityMin;
out float vIntensityMax;
void main(void) {
    gl_Position = project_position_to_clipspace(positions, vec3(0.0), vec3(0.0));
    vTexCoords = texCoords;
    vec4 maxTexture = texture(maxTexture, vec2(0.5));
    float maxValue = aggregationMode < 0.5 ? maxTexture.r : maxTexture.g;
    float minValue = maxValue * threshold;
    if (colorDomain[1] > 0.) {
        maxValue = colorDomain[1];
        minValue = colorDomain[0];
    }
    vIntensityMax = intensity / maxValue;
    vIntensityMin = intensity / minValue;
}`;class TriangleLayerContours extends Layer{getShaders(){return{vs:triangleVs,fs:heatmapPresentationFS,modules:[project32]}}initializeState({device:s}){this.setState({model:this._getModel(s)})}_getModel(s){const{vertexCount:d,data:_,weightsTexture:S,maxTexture:T,colorTexture:F}=this.props;return new Model(s,{...this.getShaders(),id:this.props.id,bindings:{weightsTexture:S,maxTexture:T,colorTexture:F},attributes:_.attributes,bufferLayout:[{name:"positions",format:"float32x3"},{name:"texCoords",format:"float32x2"}],topology:"triangle-fan-webgl",vertexCount:d})}draw({uniforms:s}){const{model:d}=this.state,{intensity:_,threshold:S,aggregationMode:T,colorDomain:F,contourOpacity:M}=this.props;d.setUniforms({...s,intensity:_,threshold:S,aggregationMode:T,colorDomain:F,contourOpacity:M}),d.draw(this.context.renderPass)}}Bt(TriangleLayerContours,"layerName","TriangleLayerContours");const defaultColorRange=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]];function colorRangeToFlatArray(f,s=!1,d=Float32Array){let _;if(Number.isFinite(f[0]))_=new d(f);else{_=new d(f.length*4);let S=0;for(let T=0;T<f.length;T++){const F=f[T];_[S++]=F[0],_[S++]=F[1],_[S++]=F[2],_[S++]=Number.isFinite(F[3])?F[3]:255}}if(s)for(let S=0;S<_.length;S++)_[S]/=255;return _}function filterProps(f,s){const d={};for(const _ in f)s.includes(_)||(d[_]=f[_]);return d}class AggregationLayer extends CompositeLayer{initializeAggregationLayer(s){super.initializeState(this.context),this.setState({ignoreProps:filterProps(this.constructor._propTypes,s.data.props),dimensions:s})}updateState(s){super.updateState(s);const{changeFlags:d}=s;if(d.extensionsChanged){const _=this.getShaders({});_&&_.defines&&(_.defines.NON_INSTANCED_MODEL=1),this.updateShaders(_)}this._updateAttributes()}updateAttributes(s){this.setState({changedAttributes:s})}getAttributes(){return this.getAttributeManager().getAttributes()}getModuleSettings(){const{viewport:s,mousePosition:d,device:_}=this.context;return Object.assign(Object.create(this.props),{viewport:s,mousePosition:d,picking:{isActive:0},devicePixelRatio:_.canvasContext.cssToDeviceRatio()})}updateShaders(s){}isAggregationDirty(s,d={}){const{props:_,oldProps:S,changeFlags:T}=s,{compareAll:F=!1,dimension:M}=d,{ignoreProps:P}=this.state,{props:H,accessors:J=[]}=M,{updateTriggersChanged:K}=T;if(T.dataChanged)return!0;if(K){if(K.all)return!0;for(const z of J)if(K[z])return!0}if(F)return T.extensionsChanged?!0:compareProps({oldProps:S,newProps:_,ignoreProps:P,propTypes:this.constructor._propTypes});for(const z of H)if(_[z]!==S[z])return!0;return!1}isAttributeChanged(s){const{changedAttributes:d}=this.state;return s?d&&d[s]!==void 0:!isObjectEmpty(d)}_getAttributeManager(){return new AttributeManager(this.context.device,{id:this.props.id,stats:this.context.stats})}}AggregationLayer.layerName="AggregationLayer";function isObjectEmpty(f){let s=!0;for(const d in f){s=!1;break}return s}function getBounds$1(f){const s=f.map(M=>M[0]),d=f.map(M=>M[1]),_=Math.min.apply(null,s),S=Math.max.apply(null,s),T=Math.min.apply(null,d),F=Math.max.apply(null,d);return[_,T,S,F]}function boundsContain(f,s){return s[0]>=f[0]&&s[2]<=f[2]&&s[1]>=f[1]&&s[3]<=f[3]}const scratchArray=new Float32Array(12);function packVertices(f,s=2){let d=0;for(const _ of f)for(let S=0;S<s;S++)scratchArray[d++]=_[S]||0;return scratchArray}function scaleToAspectRatio(f,s,d){const[_,S,T,F]=f,M=T-_,P=F-S;let H=M,J=P;M/P<s/d?H=s/d*P:J=d/s*M,H<s&&(H=s,J=d);const K=(T+_)/2,z=(F+S)/2;return[K-H/2,z-J/2,K+H/2,z+J/2]}function getTextureCoordinates(f,s){const[d,_,S,T]=s;return[(f[0]-d)/(S-d),(f[1]-_)/(T-_)]}const vs$1=`#version 300 es
#define SHADER_NAME heatp-map-layer-vertex-shader
uniform sampler2D maxTexture;
uniform float intensity;
uniform vec2 colorDomain;
uniform float threshold;
uniform float aggregationMode;
in vec3 positions;
in vec2 texCoords;
out vec2 vTexCoords;
out float vIntensityMin;
out float vIntensityMax;
void main(void) {
gl_Position = project_position_to_clipspace(positions, vec3(0.0), vec3(0.0));
vTexCoords = texCoords;
vec4 maxTexture = texture(maxTexture, vec2(0.5));
float maxValue = aggregationMode < 0.5 ? maxTexture.r : maxTexture.g;
float minValue = maxValue * threshold;
if (colorDomain[1] > 0.) {
maxValue = colorDomain[1];
minValue = colorDomain[0];
}
vIntensityMax = intensity / maxValue;
vIntensityMin = intensity / minValue;
}
`,fs$1=`#version 300 es
#define SHADER_NAME triangle-layer-fragment-shader
precision highp float;
uniform float opacity;
uniform sampler2D weightsTexture;
uniform sampler2D colorTexture;
uniform float aggregationMode;
in vec2 vTexCoords;
in float vIntensityMin;
in float vIntensityMax;
out vec4 fragColor;
vec4 getLinearColor(float value) {
float factor = clamp(value * vIntensityMax, 0., 1.);
vec4 color = texture(colorTexture, vec2(factor, 0.5));
color.a *= min(value * vIntensityMin, 1.0);
return color;
}
void main(void) {
vec4 weights = texture(weightsTexture, vTexCoords);
float weight = weights.r;
if (aggregationMode > 0.5) {
weight /= max(1.0, weights.a);
}
if (weight <= 0.) {
discard;
}
vec4 linearColor = getLinearColor(weight);
linearColor.a *= opacity;
fragColor = linearColor;
}
`;class TriangleLayer extends Layer{getShaders(){return{vs:vs$1,fs:fs$1,modules:[project32]}}initializeState({device:s}){this.setState({model:this._getModel(s)})}_getModel(s){const{vertexCount:d,data:_,weightsTexture:S,maxTexture:T,colorTexture:F}=this.props;return new Model(s,{...this.getShaders(),id:this.props.id,bindings:{weightsTexture:S,maxTexture:T,colorTexture:F},attributes:_.attributes,bufferLayout:[{name:"positions",format:"float32x3"},{name:"texCoords",format:"float32x2"}],topology:"triangle-fan-webgl",vertexCount:d})}draw({uniforms:s}){const{model:d}=this.state,{intensity:_,threshold:S,aggregationMode:T,colorDomain:F}=this.props;d.setUniforms({...s,intensity:_,threshold:S,aggregationMode:T,colorDomain:F}),d.draw(this.context.renderPass)}}TriangleLayer.layerName="TriangleLayer";const weightsVs=`#version 300 es
in vec3 positions;
in vec3 positions64Low;
in float weights;
out vec4 weightsTexture;
uniform float radiusPixels;
uniform float textureWidth;
uniform vec4 commonBounds;
uniform float weightsScale;
void main()
{
weightsTexture = vec4(weights * weightsScale, 0., 0., 1.);
float radiusTexels = project_pixel_size(radiusPixels) * textureWidth / (commonBounds.z - commonBounds.x);
gl_PointSize = radiusTexels * 2.;
vec3 commonPosition = project_position(positions, positions64Low);
gl_Position.xy = (commonPosition.xy - commonBounds.xy) / (commonBounds.zw - commonBounds.xy) ;
gl_Position.xy = (gl_Position.xy * 2.) - (1.);
gl_Position.w = 1.0;
}
`,weightsFs=`#version 300 es
in vec4 weightsTexture;
out vec4 fragColor;
float gaussianKDE(float u){
return pow(2.71828, -u*u/0.05555)/(1.77245385*0.166666);
}
void main()
{
float dist = length(gl_PointCoord - vec2(0.5, 0.5));
if (dist > 0.5) {
discard;
}
fragColor = weightsTexture * gaussianKDE(2. * dist);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,maxVs=`#version 300 es
uniform sampler2D inTexture;
uniform float textureSize;
out vec4 outTexture;
void main()
{
int yIndex = gl_VertexID / int(textureSize);
int xIndex = gl_VertexID - (yIndex * int(textureSize));
vec2 uv = (0.5 + vec2(float(xIndex), float(yIndex))) / textureSize;
outTexture = texture(inTexture, uv);
gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
gl_PointSize = 1.0;
}
`,maxFs=`#version 300 es
in vec4 outTexture;
out vec4 fragColor;
void main() {
fragColor = outTexture;
fragColor.g = outTexture.r / max(1.0, outTexture.a);
}
`,RESOLUTION=2,TEXTURE_PROPS={format:"rgba8unorm",mipmaps:!1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},DEFAULT_COLOR_DOMAIN=[0,0],AGGREGATION_MODE={SUM:0,MEAN:1},defaultProps$3={getPosition:{type:"accessor",value:f=>f.position},getWeight:{type:"accessor",value:1},intensity:{type:"number",min:0,value:1},radiusPixels:{type:"number",min:1,max:100,value:50},colorRange:defaultColorRange,threshold:{type:"number",min:0,max:1,value:.05},colorDomain:{type:"array",value:null,optional:!0},aggregation:"SUM",weightsTextureSize:{type:"number",min:128,max:2048,value:2048},debounceTimeout:{type:"number",min:0,max:1e3,value:500}},FLOAT_TARGET_FEATURES=["float32-renderable-webgl","texture-blend-float-webgl"],DIMENSIONS={data:{props:["radiusPixels"]}};class HeatmapLayer extends AggregationLayer{initializeState(){super.initializeAggregationLayer(DIMENSIONS),this.setState({colorDomain:DEFAULT_COLOR_DOMAIN}),this._setupTextureParams(),this._setupAttributes(),this._setupResources()}shouldUpdateState({changeFlags:s}){return s.somethingChanged}updateState(s){super.updateState(s),this._updateHeatmapState(s)}_updateHeatmapState(s){const{props:d,oldProps:_}=s,S=this._getChangeFlags(s);(S.dataChanged||S.viewportChanged)&&(S.boundsChanged=this._updateBounds(S.dataChanged),this._updateTextureRenderingBounds()),S.dataChanged||S.boundsChanged?(clearTimeout(this.state.updateTimer),this.setState({isWeightMapDirty:!0})):S.viewportZoomChanged&&this._debouncedUpdateWeightmap(),d.colorRange!==_.colorRange&&this._updateColorTexture(s),this.state.isWeightMapDirty&&this._updateWeightmap(),this.setState({zoom:s.context.viewport.zoom})}renderLayers(){const{weightsTexture:s,triPositionBuffer:d,triTexCoordBuffer:_,maxWeightsTexture:S,colorTexture:T,colorDomain:F}=this.state,{updateTriggers:M,intensity:P,threshold:H,aggregation:J}=this.props,K=this.getSubLayerClass("triangle",TriangleLayer);return new K(this.getSubLayerProps({id:"triangle-layer",updateTriggers:M}),{coordinateSystem:COORDINATE_SYSTEM.DEFAULT,data:{attributes:{positions:d,texCoords:_}},vertexCount:4,maxTexture:S,colorTexture:T,aggregationMode:AGGREGATION_MODE[J]||0,weightsTexture:s,intensity:P,threshold:H,colorDomain:F})}finalizeState(s){super.finalizeState(s);const{weightsTransform:d,weightsTexture:_,maxWeightTransform:S,maxWeightsTexture:T,triPositionBuffer:F,triTexCoordBuffer:M,colorTexture:P,updateTimer:H}=this.state;d==null||d.destroy(),_==null||_.destroy(),S==null||S.destroy(),T==null||T.destroy(),F==null||F.destroy(),M==null||M.destroy(),P==null||P.destroy(),H&&clearTimeout(H)}_getAttributeManager(){return new AttributeManager(this.context.device,{id:this.props.id,stats:this.context.stats})}_getChangeFlags(s){const d={},{dimensions:_}=this.state;d.dataChanged=this.isAttributeChanged()&&"attribute changed"||this.isAggregationDirty(s,{compareAll:!0,dimension:_.data})&&"aggregation is dirty",d.viewportChanged=s.changeFlags.viewportChanged;const{zoom:S}=this.state;return(!s.context.viewport||s.context.viewport.zoom!==S)&&(d.viewportZoomChanged=!0),d}_createTextures(){const{textureSize:s,format:d}=this.state;this.setState({weightsTexture:this.context.device.createTexture({...TEXTURE_PROPS,width:s,height:s,format:d}),maxWeightsTexture:this.context.device.createTexture({...TEXTURE_PROPS,width:1,height:1,format:d})})}_setupAttributes(){this.getAttributeManager().add({positions:{size:3,type:"float64",accessor:"getPosition"},weights:{size:1,accessor:"getWeight"}}),this.setState({positionAttributeName:"positions"})}_setupTextureParams(){const{device:s}=this.context,{weightsTextureSize:d}=this.props,_=Math.min(d,s.limits.maxTextureDimension2D),S=FLOAT_TARGET_FEATURES.every(M=>s.features.has(M)),T=S?"rgba32float":"rgba8unorm",F=S?1:1/255;this.setState({textureSize:_,format:T,weightsScale:F}),S||defaultLogger.warn(`HeatmapLayer: ${this.id} rendering to float texture not supported, falling back to low precision format`)()}_createWeightsTransform(s){let{weightsTransform:d}=this.state;const{weightsTexture:_}=this.state,S=this.getAttributeManager();d==null||d.destroy(),d=new TextureTransform(this.context.device,{id:`${this.id}-weights-transform`,bufferLayout:S.getBufferLayouts(),vertexCount:1,targetTexture:_,parameters:{depthWriteEnabled:!1,blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"},topology:"point-list",...s}),this.setState({weightsTransform:d})}_setupResources(){this._createTextures();const{device:s}=this.context,{textureSize:d,weightsTexture:_,maxWeightsTexture:S}=this.state,T=this.getShaders({vs:weightsVs,fs:weightsFs});this._createWeightsTransform(T);const F=this.getShaders({vs:maxVs,fs:maxFs}),M=new TextureTransform(s,{id:`${this.id}-max-weights-transform`,bindings:{inTexture:_},uniforms:{textureSize:d},targetTexture:S,...F,vertexCount:d*d,topology:"point-list",parameters:{depthWriteEnabled:!1,blendColorOperation:"max",blendAlphaOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}});this.setState({weightsTexture:_,maxWeightsTexture:S,maxWeightTransform:M,zoom:null,triPositionBuffer:s.createBuffer({byteLength:48}),triTexCoordBuffer:s.createBuffer({byteLength:48})})}updateShaders(s){this._createWeightsTransform({vs:weightsVs,fs:weightsFs,...s})}_updateMaxWeightValue(){const{maxWeightTransform:s}=this.state;s.run({parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]})}_updateBounds(s=!1){const{viewport:d}=this.context,_=[d.unproject([0,0]),d.unproject([d.width,0]),d.unproject([d.width,d.height]),d.unproject([0,d.height])].map(M=>M.map(Math.fround)),S=getBounds$1(_),T={visibleWorldBounds:S,viewportCorners:_};let F=!1;if(s||!this.state.worldBounds||!boundsContain(this.state.worldBounds,S)){const M=this._worldToCommonBounds(S),P=this._commonToWorldBounds(M);this.props.coordinateSystem===COORDINATE_SYSTEM.LNGLAT&&(P[1]=Math.max(P[1],-85.051129),P[3]=Math.min(P[3],85.051129),P[0]=Math.max(P[0],-360),P[2]=Math.min(P[2],360));const H=this._worldToCommonBounds(P);T.worldBounds=P,T.normalizedCommonBounds=H,F=!0}return this.setState(T),F}_updateTextureRenderingBounds(){const{triPositionBuffer:s,triTexCoordBuffer:d,normalizedCommonBounds:_,viewportCorners:S}=this.state,{viewport:T}=this.context;s.write(packVertices(S,3));const F=S.map(M=>getTextureCoordinates(T.projectPosition(M),_));d.write(packVertices(F,2))}_updateColorTexture(s){const{colorRange:d}=s.props;let{colorTexture:_}=this.state;const S=colorRangeToFlatArray(d,!1,Uint8Array);_&&(_==null?void 0:_.width)===d.length?_.setSubImageData({data:S}):(_==null||_.destroy(),_=this.context.device.createTexture({...TEXTURE_PROPS,data:S,width:d.length,height:1})),this.setState({colorTexture:_})}_updateWeightmap(){const{radiusPixels:s,colorDomain:d,aggregation:_}=this.props,{worldBounds:S,textureSize:T,weightsScale:F}=this.state,M=this.state.weightsTransform;this.state.isWeightMapDirty=!1;const P=this._worldToCommonBounds(S,{useLayerCoordinateSystem:!0});if(d&&_==="SUM"){const{viewport:oe}=this.context,se=oe.distanceScales.metersPerUnit[2]*(P[2]-P[0])/T;this.state.colorDomain=d.map(ae=>ae*se*F)}else this.state.colorDomain=d||DEFAULT_COLOR_DOMAIN;const J=this.getAttributeManager().getAttributes(),K=this.getModuleSettings(),z={radiusPixels:s,commonBounds:P,textureWidth:T,weightsScale:F};this._setModelAttributes(M.model,J),M.model.setVertexCount(this.getNumInstances()),M.model.setUniforms(z),M.model.updateModuleSettings(K),M.run({parameters:{viewport:[0,0,T,T]},clearColor:[0,0,0,0]}),this._updateMaxWeightValue()}_debouncedUpdateWeightmap(s=!1){let{updateTimer:d}=this.state;const{debounceTimeout:_}=this.props;s?(d=null,this._updateBounds(!0),this._updateTextureRenderingBounds(),this.setState({isWeightMapDirty:!0})):(this.setState({isWeightMapDirty:!1}),clearTimeout(d),d=setTimeout(this._debouncedUpdateWeightmap.bind(this,!0),_)),this.setState({updateTimer:d})}_worldToCommonBounds(s,d={}){const{useLayerCoordinateSystem:_=!1}=d,[S,T,F,M]=s,{viewport:P}=this.context,{textureSize:H}=this.state,{coordinateSystem:J}=this.props,K=_&&(J===COORDINATE_SYSTEM.LNGLAT_OFFSETS||J===COORDINATE_SYSTEM.METER_OFFSETS),z=K?P.projectPosition(this.props.coordinateOrigin):[0,0],oe=H*RESOLUTION/P.scale;let se,ae;return _&&!K?(se=this.projectPosition([S,T,0]),ae=this.projectPosition([F,M,0])):(se=P.projectPosition([S,T,0]),ae=P.projectPosition([F,M,0])),scaleToAspectRatio([se[0]-z[0],se[1]-z[1],ae[0]-z[0],ae[1]-z[1]],oe,oe)}_commonToWorldBounds(s){const[d,_,S,T]=s,{viewport:F}=this.context,M=F.unprojectPosition([d,_]),P=F.unprojectPosition([S,T]);return M.slice(0,2).concat(P.slice(0,2))}}HeatmapLayer.layerName="HeatmapLayer";HeatmapLayer.defaultProps=defaultProps$3;class SpatialLayer extends CompositeLayer{constructor(s){super(s)}initializeState(s){super.initializeState(s)}renderLayers(){return[new ScatterplotLayer(this.getSubLayerProps({...this.props,data:this.props.data,id:"spatial.scatterplot"})),...this.props.contourLayers.filter(s=>s).map(s=>{const d=this.getSubLayerProps(s);return new HeatmapLayer({...d,_subLayerProps:{triangle:{type:TriangleLayerContours},"triangle-layer":{contourOpacity:d.contourOpacity}}})})]}}Bt(SpatialLayer,"layerName","SpatialLayer"),Bt(SpatialLayer,"defaultProps",ScatterplotLayer.defaultProps);class ScatterSquareExtension extends LayerExtension{static get componentName(){return"ScatterSquareExtension"}getShaders(){return{inject:{"vs:#decl":"out float _lineWidthPixels;","vs:#main-end":`
                //---- ScatterSquareExtension
                // _outerRadiusPixels = outerRadiusPixels; // we might want this as an 'out', not used for now
                outerRadiusPixels = 0.; // forces all fragments to be 'inCircle'
                _lineWidthPixels = lineWidthPixels;
                ////
                
                `,"fs:#decl":`uniform float opacity;
                in float _lineWidthPixels;
                uniform float lineWidthScale;
                `,"fs:#main-end":`
                //---- ScatterSquareExtension
                // a bit wasteful to keep the original shader for circle rendering above
                // we should arrange layers/extensions differently, but YOLO
                // (actually, this is really dodgy & it's embarassing not rendering quads correctly)
                if (stroked > 0.5) {
                    vec2 uv = abs(unitPosition);
                    float isLine = step(innerUnitRadius, max(uv.x, uv.y));
                    if (_lineWidthPixels <= 0.01) isLine = 0.;
                    fragColor = mix(vFillColor, vLineColor, isLine);
                }
                // make sure picking still works
                DECKGL_FILTER_COLOR(fragColor, geometry);
                //---- end ScatterSquareExtension
                `}}}}class ScatterDensityExension extends LayerExtension{static get componentName(){return"ScatterDensityExension"}getShaders(){return{inject:{"fs:#decl":"uniform float opacity;","fs:#main-end":`
                //---- ScatterDensityExension
                const float e = 2.718281828459045;
                float d = length(unitPosition);
                // kernalSigma relates to dst in px in muspan, but denom uniform should be pre-computed
                // kernel = np.exp(-( dst**2 / ( 2.0 * kernelSigma**2 ) ) )
                // denom = 2*c^2 where c is the standard deviation / kernelSigma
                // for muspan default kernelRadius=150, kernelSigma=50 => c = 1/3
                // 2*(1/3)**2 => 0.222...
                float _a = exp(-(d*d)/(0.222222222));
                // should have an instance attribute for weight
                fragColor.a = _a * opacity;
                //---- end ScatterDensityExension
                ////
                
                `}}}}function useHighlightedIndex(){const f=useChart(),[s,d]=reactExports.useState(-1);return reactExports.useEffect(()=>{console.log("useHighlightedIndex effect"),f.onDataHighlighted=({indexes:_})=>{d(_[0])}},[f]),s}function rgb(f,s,d,_=255){return[f,s,d,_]}Array.from({length:200},(f,s)=>{const d=s%20<=1?255:0;return rgb(d,d,d,d)});const viridis=[rgb(0,47,97),rgb(0,95,133),rgb(0,139,152),rgb(0,181,153),rgb(24,220,130),rgb(151,245,84),rgb(255,255,0)];function useColorRange(f,s){const d=useDataStore(),_=reactExports.useMemo(()=>d.getColumnColors(f.name,{asArray:!0,useValue:!0}),[d,f]),S=reactExports.useMemo(()=>!f||!f.values?-1:Array.isArray(s)?s.length>1?-1:f.values.indexOf(s[0]):f.values.indexOf(s),[f,s]);return reactExports.useMemo(()=>{if(S===-1)return viridis;const F=_[S];return console.log("color",F,s),new Array(viridis.length).fill(F)},[S,_,s])}function useContour(f){const{id:s,parameter:d,category:_,fill:S,bandwidth:T,intensity:F,opacity:M}=f,[P,H]=useParamColumns(),{column:J}=useNamedColumn(d),K=useCategoryFilterIndices(J,_),z=useColorRange(J,_),{zoom:oe}=useViewerStore(ae=>ae.viewState)??{zoom:0},[se]=o$1(oe,500);return reactExports.useMemo(()=>{if(!_)return;const ae=30*T*2**se;return{id:s,data:K,opacity:S?F:0,contourOpacity:M,getPosition:(ge,{target:pe})=>(pe[0]=P.data[ge],pe[1]=H.data[ge],pe[2]=0,pe),colorRange:z,radiusPixels:ae,debounce:1e3,weightsTextureSize:512,pickable:!1}},[s,K,_,F,P,H,z,se,T,S,M])}function useLegacyDualContour(){const f=useConfig(),s={parameter:f.contourParameter,fill:f.contour_fill,bandwidth:f.contour_bandwidth,intensity:f.contour_intensity,opacity:f.contour_opacity},d=useContour({...s,id:"contour1",category:f.category1}),_=useContour({...s,id:"contour2",category:f.category2});return reactExports.useMemo(()=>[d,_],[d,_])}function useRegionScale(){const f=useMetadata(),s=useChart(),d=s.dataStore.regions.scale,_=s.dataStore.regions.scale_unit;if(!f)return 1;const{Pixels:S}=f;return S.PhysicalSizeXUnit!==_&&console.warn(`physical size unit mismatch ${S.PhysicalSizeXUnit} !== ${_}`),S.PhysicalSizeX/d}function useZoomOnFilter(f){const s=useConfig(),d=useFilteredIndices(),[_,S]=useParamColumns(),[T,F]=useChartSize(),[M,P]=reactExports.useState(null);return reactExports.useEffect(()=>{if(!s.zoom_on_filter)return;if(d.length===0){P(null);return}let H=Number.POSITIVE_INFINITY,J=Number.NEGATIVE_INFINITY,K=Number.POSITIVE_INFINITY,z=Number.NEGATIVE_INFINITY;for(let Ue=0;Ue<d.length;Ue++){const It=d[Ue];try{const St=_.data[It],At=S.data[It];if(!Number.isFinite(St)||!Number.isFinite(At)){console.warn("undefined data in scatterplot");continue}St<H&&(H=St),St>J&&(J=St),At<K&&(K=At),At>z&&(z=At)}catch(St){console.error("error calculating bounding box",St);return}}[H,K]=f.transformAsPoint([H,K,0]),[J,z]=f.transformAsPoint([J,z,0]);const oe=(H+J)/2,se=(K+z)/2,{min:ae,log2:ge}=Math,pe=5,he=J-H,ve=z-K,be=ge(T/he),Re=ge(F/ve),ye=ae(pe,ae(be,Re)-.05);P({target:[oe,se,0],zoom:ye,maxZoom:pe,transitionDuration:400,transitionEasing:Ue=>-(Math.cos(Math.PI*Ue)-1)/2})},[d,_,S,F,T,s.zoom_on_filter,f.transformAsPoint]),M}function useScatterplotLayer(f){const s=useChartID(),d=useChart(),_=d.colorBy,S=useConfig(),{opacity:T,radius:F,course_radius:M}=S,P=F*M,H=useFilteredIndices(),[J,K,z]=useParamColumns(),oe=reactExports.useRef(null),se=useHighlightedIndex(),ae=reactExports.useCallback(Ct=>Ct===se?.2*P/be:0,[P,se]),ge=useLegacyDualContour(),pe=reactExports.useMemo(()=>{if(S.tooltip)return d.dataStore.columnIndex[S.tooltip.column]},[S.tooltip,S.tooltip.column,d.dataStore.columnIndex]),he=reactExports.useCallback(Ct=>pe.getValue(H[Ct]),[pe,H]),ve=reactExports.useCallback(({object:Ct})=>{if(!S.tooltip.show)return;const Nt=oe.current;return Nt&&Nt.index!==-1&&`${S.tooltip.column}: ${he(Nt.index)}`},[oe,he,S.tooltip.show]),be=useRegionScale(),Re=useZoomOnFilter(f),{point_shape:Fe}=S,ye=reactExports.useMemo(()=>Fe==="circle"?[]:Fe==="gaussian"?[new ScatterDensityExension]:[new ScatterSquareExtension],[Fe]),[Ue,It]=reactExports.useState(!1),St=reactExports.useMemo(()=>(It(!1),new SpatialLayer({id:`scatter_${getVivId(`${s}detail-react`)}`,data:H,opacity:T,radiusScale:P,getFillColor:_??[255,255,255],getRadius:1/be,getPosition:(Ct,{target:Nt})=>(Nt[0]=J.data[Ct],Nt[1]=K.data[Ct],Nt[2]=0,Nt),modelMatrix:f,updateTriggers:{getFillColor:_,getLineWidth:ae},pickable:!0,onHover:Ct=>{oe.current=Ct},stroked:H.length<1e3,getLineWidth:ae,getLineColor:[255,255,255],onClick:({index:Ct})=>{d.dataStore.dataHighlighted([H[Ct]],d)},transitions:{},contourLayers:ge,extensions:ye})),[s,H,T,P,_,J,K,be,f,ye,d,ae,ge]),At=reactExports.useCallback(Ct=>{if(!Ue||!St.internalState)throw new Error("scatterplotLayer not ready");Array.isArray(Ct)&&(Ct={clientX:Ct[0],clientY:Ct[1]});const Nt=d.contentDiv.getBoundingClientRect(),qt=Ct.clientX-Nt.left,Jn=Ct.clientY-Nt.top,qr=St.unproject([qt,Jn]),na=f.invert(),qn=na.transform(qr);return na.invert(),qn},[St,f,Ue,d.contentDiv.getBoundingClientRect]),xt=reactExports.useCallback(()=>It(!0),[]);return reactExports.useMemo(()=>({scatterplotLayer:St,getTooltip:ve,modelMatrix:f,viewState:Re,currentLayerHasRendered:Ue,onAfterRender:xt,unproject:At}),[St,ve,f,Re,Ue,xt,At])}function useConfig(){const{config:f}=useChart();return f}function useChartSize(){const s=useChart().contentDiv,[d,_]=reactExports.useState([s.clientWidth,s.clientHeight]);return reactExports.useLayoutEffect(()=>{const S=()=>{_([s.clientWidth,s.clientHeight])},T=new ResizeObserver(S);return T.observe(s),()=>T.unobserve(s)},[s]),d}function useChartID(){const f=useChart();return f.config.id||(console.assert(f.config.id,"chart.config.id should not be undefined"),action(()=>{f.config.id=getRandomString()})()),f.config.id}function useParamColumns(){const f=useChart(),{columnIndex:s}=f.dataStore;return reactExports.useMemo(()=>f.config.param?typeof f.config.param=="string"?[s[f.config.param]]:f.config.param.map(S=>s[S]):[],[f.config.param,s])}function useNamedColumn(f){const s=useChart(),{columnIndex:d}=s.dataStore,[_,S]=reactExports.useState(!1),T=d[f];return reactExports.useEffect(()=>{loadColumn(s.dataStore.name,f).then(()=>S(!0))},[f,s.dataStore]),{column:T,isLoaded:_}}function useParamColumnsExperimental(){const f=useChart(),{columnIndex:s}=f.dataStore,[d,_]=reactExports.useState([]);return reactExports.useEffect(()=>{const S=f.config.param;if(!S){_([]);return}const T=window.mdv.chartManager,F=f.dataStore.name;if(typeof f.config.param=="string"){const M=s[f.config.param];T.loadColumnSet([S],F,()=>{_([M])});return}T.loadColumnSet(S,F,()=>{_(S.map(M=>s[M]))})},[f.config.param,s,f.dataStore]),d}function useRegion(){const f=useConfig(),{regions:s}=useDataStore();return reactExports.useMemo(()=>{if(s)return s.all_regions[f.region]},[f.region,s])}function useFilteredIndices(){var T;const f=useConfig(),s=(T=f.background_filter)==null?void 0:T.column,d=useDataStore(),[_,S]=reactExports.useState(new Uint32Array);return reactExports.useState(new Uint32Array),reactExports.useEffect(()=>{var K;let F=!1;if(!s)return;const M=d.getFilteredIndices(),P=[f.background_filter,...f.category_filters.filter(z=>z.category!=="all")],H=P.map(z=>z.column),J=(K=window.mdv.chartManager)==null?void 0:K._getColumnsAsync(d.name,H);return Promise.all([M,J]).then(([z])=>{var oe;if(!F){if(s){const se=P.map(({column:ge})=>d.columnIndex[ge]);if((oe=f.background_filter)==null?void 0:oe.category){const ge=P.map(pe=>Array.isArray(pe.category)?pe.category.map(he=>d.columnIndex[pe.column].values.indexOf(he)):d.columnIndex[pe.column].values.indexOf(pe.category));try{const pe=z.filter(he=>P.every((ve,be)=>{const Re=ge[be];return typeof Re=="number"?Re===se[be].data[he]:Re.some(Fe=>se[be].data[he]===Fe)}));S(pe)}catch(pe){console.error("error filtering indices",pe);return}return}}S(z)}}),()=>{F=!0}},[d._filteredIndicesPromise,s,f.background_filter,f.category_filters]),_}function useCategoryFilterIndices(f,s){const d=useFilteredIndices(),_=reactExports.useMemo(()=>!f||!f.values?-1:Array.isArray(s)?s.map(T=>f.values.indexOf(T)):f.values.indexOf(s),[f,s]);return reactExports.useMemo(()=>_===-1?[]:Array.isArray(_)?d.filter(T=>_.includes(f.data[T])):d.filter(T=>f.data[T]===_),[d,_,f])}function useImgUrl(){const f=useRegion(),s=useDataStore().regions.avivator;return reactExports.useMemo(()=>{var T;const _=f.viv_image;return(T=s.base_url)!=null&&T.startsWith("http")?new URL(_.url||_.file,s.base_url).href:_.url?_.url:getProjectURL(s.base_url)+_.file},[f,s])}function useDimensionFilter(f){const s=useDataStore(),_=f.values!==void 0||f.datatype==="unique"?"category_dimension":"range_dimension",S=reactExports.useMemo(()=>s.getDimension(_),[s,_]);return reactExports.useEffect(()=>()=>S.destroy(),[S.destroy]),S}function useRangeDimension2D(){const f=useDataStore(),s=useRegionScale(),d=reactExports.useMemo(()=>f.getDimension("range_dimension"),[f]);reactExports.useEffect(()=>()=>d.destroy(),[d.destroy]);const{param:_}=useConfig(),S=reactExports.useMemo(()=>[_[0],_[1]],[_]),T=reactExports.useCallback(M=>{const P=s===1?M:M.map(H=>H.map(J=>J*s));d.filter("filterPoly",S,P)},[d,S,s]),F=reactExports.useCallback(()=>d.removeFilter(),[d]);return{filterPoly:T,removeFilter:F,rangeDimension:d}}var PanToolOutlined={},_interopRequireDefault$a=interopRequireDefaultExports;Object.defineProperty(PanToolOutlined,"__esModule",{value:!0});var default_1$a=PanToolOutlined.default=void 0,_createSvgIcon$a=_interopRequireDefault$a(requireCreateSvgIcon()),_jsxRuntime$a=jsxRuntimeExports;default_1$a=PanToolOutlined.default=(0,_createSvgIcon$a.default)((0,_jsxRuntime$a.jsx)("path",{d:"M18 24h-6.55c-1.08 0-2.14-.45-2.89-1.23l-7.3-7.61 2.07-1.83c.62-.55 1.53-.66 2.26-.27L8 14.34V4.79c0-1.38 1.12-2.5 2.5-2.5.17 0 .34.02.51.05.09-1.3 1.17-2.33 2.49-2.33.86 0 1.61.43 2.06 1.09.29-.12.61-.18.94-.18 1.38 0 2.5 1.12 2.5 2.5v.28c.16-.03.33-.05.5-.05 1.38 0 2.5 1.12 2.5 2.5V20c0 2.21-1.79 4-4 4M4.14 15.28l5.86 6.1c.38.39.9.62 1.44.62H18c1.1 0 2-.9 2-2V6.15c0-.28-.22-.5-.5-.5s-.5.22-.5.5V12h-2V3.42c0-.28-.22-.5-.5-.5s-.5.22-.5.5V12h-2V2.51c0-.28-.22-.5-.5-.5s-.5.22-.5.5V12h-2V4.79c0-.28-.22-.5-.5-.5s-.5.23-.5.5v12.87l-5.35-2.83z"}),"PanToolOutlined");var PhotoSizeSelectSmallOutlined={},_interopRequireDefault$9=interopRequireDefaultExports;Object.defineProperty(PhotoSizeSelectSmallOutlined,"__esModule",{value:!0});var default_1$9=PhotoSizeSelectSmallOutlined.default=void 0,_createSvgIcon$9=_interopRequireDefault$9(requireCreateSvgIcon()),_jsxRuntime$9=jsxRuntimeExports;default_1$9=PhotoSizeSelectSmallOutlined.default=(0,_createSvgIcon$9.default)((0,_jsxRuntime$9.jsx)("path",{d:"M23 15h-2v2h2zm0-4h-2v2h2zm0 8h-2v2c1 0 2-1 2-2M15 3h-2v2h2zm8 4h-2v2h2zm-2-4v2h2c0-1-1-2-2-2M3 21h8v-6H1v4c0 1.1.9 2 2 2M3 7H1v2h2zm12 12h-2v2h2zm4-16h-2v2h2zm0 16h-2v2h2zM3 3C2 3 1 4 1 5h2zm0 8H1v2h2zm8-8H9v2h2zM7 3H5v2h2z"}),"PhotoSizeSelectSmallOutlined");var PolylineOutlined={},_interopRequireDefault$8=interopRequireDefaultExports;Object.defineProperty(PolylineOutlined,"__esModule",{value:!0});var default_1$8=PolylineOutlined.default=void 0,_createSvgIcon$8=_interopRequireDefault$8(requireCreateSvgIcon()),_jsxRuntime$8=jsxRuntimeExports;default_1$8=PolylineOutlined.default=(0,_createSvgIcon$8.default)((0,_jsxRuntime$8.jsx)("path",{d:"M15 16v1.26l-6-3v-3.17L11.7 8H16V2h-6v4.9L7.3 10H3v6h5l7 3.5V22h6v-6zM12 4h2v2h-2zM7 14H5v-2h2zm12 6h-2v-2h2z"}),"PolylineOutlined");var EditOutlined={},_interopRequireDefault$7=interopRequireDefaultExports;Object.defineProperty(EditOutlined,"__esModule",{value:!0});var default_1$7=EditOutlined.default=void 0,_createSvgIcon$7=_interopRequireDefault$7(requireCreateSvgIcon()),_jsxRuntime$7=jsxRuntimeExports;default_1$7=EditOutlined.default=(0,_createSvgIcon$7.default)((0,_jsxRuntime$7.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined");var ControlCameraOutlined={},_interopRequireDefault$6=interopRequireDefaultExports;Object.defineProperty(ControlCameraOutlined,"__esModule",{value:!0});var default_1$6=ControlCameraOutlined.default=void 0,_createSvgIcon$6=_interopRequireDefault$6(requireCreateSvgIcon()),_jsxRuntime$6=jsxRuntimeExports;default_1$6=ControlCameraOutlined.default=(0,_createSvgIcon$6.default)([(0,_jsxRuntime$6.jsx)("path",{d:"M5.54 8.46 2 12l3.54 3.54 1.76-1.77L5.54 12l1.76-1.77zm6.46 10-1.77-1.76-1.77 1.76L12 22l3.54-3.54-1.77-1.76zm6.46-10-1.76 1.77L18.46 12l-1.76 1.77 1.76 1.77L22 12zm-10-2.92 1.77 1.76L12 5.54l1.77 1.76 1.77-1.76L12 2z"},"0"),(0,_jsxRuntime$6.jsx)("circle",{cx:"12",cy:"12",r:"3"},"1")],"ControlCameraOutlined");function feature$i(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function point$a(f,s,d){if(d===void 0&&(d={}),!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$b(f[0])||!isNumber$b(f[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:f};return feature$i(_,s,d)}function lineString$4(f,s,d){if(d===void 0&&(d={}),f.length<2)throw new Error("coordinates must be an array of two or more positions");var _={type:"LineString",coordinates:f};return feature$i(_,s,d)}function featureCollection$5(f,s){s===void 0&&(s={});var d={type:"FeatureCollection"};return s.id&&(d.id=s.id),s.bbox&&(d.bbox=s.bbox),d.features=f,d}function isNumber$b(f){return!isNaN(f)&&f!==null&&!Array.isArray(f)}function isObject$6(f){return!!f&&f.constructor===Object}function coordEach$6(f,s,d){if(f!==null)for(var _,S,T,F,M,P,H,J=0,K=0,z,oe=f.type,se=oe==="FeatureCollection",ae=oe==="Feature",ge=se?f.features.length:1,pe=0;pe<ge;pe++){H=se?f.features[pe].geometry:ae?f.geometry:f,z=H?H.type==="GeometryCollection":!1,M=z?H.geometries.length:1;for(var he=0;he<M;he++){var ve=0,be=0;if(F=z?H.geometries[he]:H,F!==null){P=F.coordinates;var Re=F.type;switch(J=0,Re){case null:break;case"Point":if(s(P,K,pe,ve,be)===!1)return!1;K++,ve++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,pe,ve,be)===!1)return!1;K++,Re==="MultiPoint"&&ve++}Re==="LineString"&&ve++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,pe,ve,be)===!1)return!1;K++}Re==="MultiLineString"&&ve++,Re==="Polygon"&&be++}Re==="Polygon"&&ve++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(be=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,pe,ve,be)===!1)return!1;K++}be++}ve++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach$6(F.geometries[_],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function bbox$1(f){var s=[1/0,1/0,-1/0,-1/0];return coordEach$6(f,function(d){s[0]>d[0]&&(s[0]=d[0]),s[1]>d[1]&&(s[1]=d[1]),s[2]<d[0]&&(s[2]=d[0]),s[3]<d[1]&&(s[3]=d[1])}),s}bbox$1.default=bbox$1;const es$1=Object.freeze(Object.defineProperty({__proto__:null,default:bbox$1},Symbol.toStringTag,{value:"Module"}));function feature$h(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function polygon$5(f,s,d){d===void 0&&(d={});for(var _=0,S=f;_<S.length;_++){var T=S[_];if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<T[T.length-1].length;F++)if(T[T.length-1][F]!==T[0][F])throw new Error("First and last Position are not equivalent.")}var M={type:"Polygon",coordinates:f};return feature$h(M,s,d)}function bboxPolygon(f,s){s===void 0&&(s={});var d=Number(f[0]),_=Number(f[1]),S=Number(f[2]),T=Number(f[3]);if(f.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var F=[d,_],M=[d,T],P=[S,T],H=[S,_];return polygon$5([[F,H,P,M,F]],s.properties,{bbox:f,id:s.id})}function feature$g(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function point$9(f,s,d){if(d===void 0&&(d={}),!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$a(f[0])||!isNumber$a(f[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:f};return feature$g(_,s,d)}function isNumber$a(f){return!isNaN(f)&&f!==null&&!Array.isArray(f)}function center(f,s){s===void 0&&(s={});var d=bbox$1(f),_=(d[0]+d[2])/2,S=(d[1]+d[3])/2;return point$9([_,S],s.properties,s)}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(s){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var d=Object(this),_=Math.max(Math.min(d.length,9007199254740991),0)||0,S=1 in arguments&&parseInt(Number(arguments[1]),10)||0;S=S<0?Math.max(_+S,0):Math.min(S,_);var T=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:_;for(T=T<0?Math.max(_+arguments[2],0):Math.min(T,_);S<T;)d[S]=s,++S;return d},writable:!0});Number.isFinite=Number.isFinite||function(f){return typeof f=="number"&&isFinite(f)};Number.isInteger=Number.isInteger||function(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(f){return f!==f};Math.trunc=Math.trunc||function(f){return f<0?Math.ceil(f):Math.floor(f)};var NumberUtil=function f(){};NumberUtil.prototype.interfaces_=function f(){return[]};NumberUtil.prototype.getClass=function f(){return NumberUtil};NumberUtil.prototype.equalsWithTolerance=function f(s,d,_){return Math.abs(s-d)<=_};var IllegalArgumentException=function(f){function s(d){f.call(this,d),this.name="IllegalArgumentException",this.message=d,this.stack=new f().stack}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s}(Error),Double=function f(){},staticAccessors$1={MAX_VALUE:{configurable:!0}};Double.isNaN=function f(s){return Number.isNaN(s)};Double.doubleToLongBits=function f(s){return s};Double.longBitsToDouble=function f(s){return s};Double.isInfinite=function f(s){return!Number.isFinite(s)};staticAccessors$1.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(Double,staticAccessors$1);var Comparable=function f(){},Clonable=function f(){},Comparator=function f(){};function Serializable(){}var Coordinate=function f(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=f.NULL_ORDINATE;else if(arguments.length===1){var s=arguments[0];this.x=s.x,this.y=s.y,this.z=s.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=f.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},staticAccessors={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Coordinate.prototype.setOrdinate=function f(s,d){switch(s){case Coordinate.X:this.x=d;break;case Coordinate.Y:this.y=d;break;case Coordinate.Z:this.z=d;break;default:throw new IllegalArgumentException("Invalid ordinate index: "+s)}};Coordinate.prototype.equals2D=function f(){if(arguments.length===1){var s=arguments[0];return!(this.x!==s.x||this.y!==s.y)}else if(arguments.length===2){var d=arguments[0],_=arguments[1];return!(!NumberUtil.equalsWithTolerance(this.x,d.x,_)||!NumberUtil.equalsWithTolerance(this.y,d.y,_))}};Coordinate.prototype.getOrdinate=function f(s){switch(s){case Coordinate.X:return this.x;case Coordinate.Y:return this.y;case Coordinate.Z:return this.z}throw new IllegalArgumentException("Invalid ordinate index: "+s)};Coordinate.prototype.equals3D=function f(s){return this.x===s.x&&this.y===s.y&&(this.z===s.z||Double.isNaN(this.z))&&Double.isNaN(s.z)};Coordinate.prototype.equals=function f(s){return s instanceof Coordinate?this.equals2D(s):!1};Coordinate.prototype.equalInZ=function f(s,d){return NumberUtil.equalsWithTolerance(this.z,s.z,d)};Coordinate.prototype.compareTo=function f(s){var d=s;return this.x<d.x?-1:this.x>d.x?1:this.y<d.y?-1:this.y>d.y?1:0};Coordinate.prototype.clone=function f(){};Coordinate.prototype.copy=function f(){return new Coordinate(this)};Coordinate.prototype.toString=function f(){return"("+this.x+", "+this.y+", "+this.z+")"};Coordinate.prototype.distance3D=function f(s){var d=this.x-s.x,_=this.y-s.y,S=this.z-s.z;return Math.sqrt(d*d+_*_+S*S)};Coordinate.prototype.distance=function f(s){var d=this.x-s.x,_=this.y-s.y;return Math.sqrt(d*d+_*_)};Coordinate.prototype.hashCode=function f(){var s=17;return s=37*s+Coordinate.hashCode(this.x),s=37*s+Coordinate.hashCode(this.y),s};Coordinate.prototype.setCoordinate=function f(s){this.x=s.x,this.y=s.y,this.z=s.z};Coordinate.prototype.interfaces_=function f(){return[Comparable,Clonable,Serializable]};Coordinate.prototype.getClass=function f(){return Coordinate};Coordinate.hashCode=function f(){if(arguments.length===1){var s=arguments[0],d=Double.doubleToLongBits(s);return Math.trunc((d^d)>>>32)}};staticAccessors.DimensionalComparator.get=function(){return DimensionalComparator};staticAccessors.serialVersionUID.get=function(){return 6683108902428367e3};staticAccessors.NULL_ORDINATE.get=function(){return Double.NaN};staticAccessors.X.get=function(){return 0};staticAccessors.Y.get=function(){return 1};staticAccessors.Z.get=function(){return 2};Object.defineProperties(Coordinate,staticAccessors);var DimensionalComparator=function f(s){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var d=arguments[0];if(d!==2&&d!==3)throw new IllegalArgumentException("only 2 or 3 dimensions may be specified");this._dimensionsToTest=d}}};DimensionalComparator.prototype.compare=function f(s,d){var _=s,S=d,T=DimensionalComparator.compare(_.x,S.x);if(T!==0)return T;var F=DimensionalComparator.compare(_.y,S.y);if(F!==0)return F;if(this._dimensionsToTest<=2)return 0;var M=DimensionalComparator.compare(_.z,S.z);return M};DimensionalComparator.prototype.interfaces_=function f(){return[Comparator]};DimensionalComparator.prototype.getClass=function f(){return DimensionalComparator};DimensionalComparator.compare=function f(s,d){return s<d?-1:s>d?1:Double.isNaN(s)?Double.isNaN(d)?0:-1:Double.isNaN(d)?1:0};var CoordinateSequenceFactory=function f(){};CoordinateSequenceFactory.prototype.create=function f(){};CoordinateSequenceFactory.prototype.interfaces_=function f(){return[]};CoordinateSequenceFactory.prototype.getClass=function f(){return CoordinateSequenceFactory};var Location=function f(){},staticAccessors$4={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Location.prototype.interfaces_=function f(){return[]};Location.prototype.getClass=function f(){return Location};Location.toLocationSymbol=function f(s){switch(s){case Location.EXTERIOR:return"e";case Location.BOUNDARY:return"b";case Location.INTERIOR:return"i";case Location.NONE:return"-"}throw new IllegalArgumentException("Unknown location value: "+s)};staticAccessors$4.INTERIOR.get=function(){return 0};staticAccessors$4.BOUNDARY.get=function(){return 1};staticAccessors$4.EXTERIOR.get=function(){return 2};staticAccessors$4.NONE.get=function(){return-1};Object.defineProperties(Location,staticAccessors$4);var hasInterface=function(f,s){return f.interfaces_&&f.interfaces_().indexOf(s)>-1},MathUtil=function f(){},staticAccessors$5={LOG_10:{configurable:!0}};MathUtil.prototype.interfaces_=function f(){return[]};MathUtil.prototype.getClass=function f(){return MathUtil};MathUtil.log10=function f(s){var d=Math.log(s);return Double.isInfinite(d)||Double.isNaN(d)?d:d/MathUtil.LOG_10};MathUtil.min=function f(s,d,_,S){var T=s;return d<T&&(T=d),_<T&&(T=_),S<T&&(T=S),T};MathUtil.clamp=function f(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],d=arguments[1],_=arguments[2];return s<d?d:s>_?_:s}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var S=arguments[0],T=arguments[1],F=arguments[2];return S<T?T:S>F?F:S}};MathUtil.wrap=function f(s,d){return s<0?d- -s%d:s%d};MathUtil.max=function f(){if(arguments.length===3){var s=arguments[0],d=arguments[1],_=arguments[2],S=s;return d>S&&(S=d),_>S&&(S=_),S}else if(arguments.length===4){var T=arguments[0],F=arguments[1],M=arguments[2],P=arguments[3],H=T;return F>H&&(H=F),M>H&&(H=M),P>H&&(H=P),H}};MathUtil.average=function f(s,d){return(s+d)/2};staticAccessors$5.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(MathUtil,staticAccessors$5);var StringBuffer=function f(s){this.str=s};StringBuffer.prototype.append=function f(s){this.str+=s};StringBuffer.prototype.setCharAt=function f(s,d){this.str=this.str.substr(0,s)+d+this.str.substr(s+1)};StringBuffer.prototype.toString=function f(s){return this.str};var Integer=function f(s){this.value=s};Integer.prototype.intValue=function f(){return this.value};Integer.prototype.compareTo=function f(s){return this.value<s?-1:this.value>s?1:0};Integer.isNaN=function f(s){return Number.isNaN(s)};var Character=function f(){};Character.isWhitespace=function f(s){return s<=32&&s>=0||s===127};Character.toUpperCase=function f(s){return s.toUpperCase()};var DD=function f(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var s=arguments[0];this.init(s)}else if(arguments[0]instanceof f){var d=arguments[0];this.init(d)}else if(typeof arguments[0]=="string"){var _=arguments[0];f.call(this,f.parse(_))}}else if(arguments.length===2){var S=arguments[0],T=arguments[1];this.init(S,T)}},staticAccessors$7={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};DD.prototype.le=function f(s){return(this._hi<s._hi||this._hi===s._hi)&&this._lo<=s._lo};DD.prototype.extractSignificantDigits=function f(s,d){var _=this.abs(),S=DD.magnitude(_._hi),T=DD.TEN.pow(S);_=_.divide(T),_.gt(DD.TEN)?(_=_.divide(DD.TEN),S+=1):_.lt(DD.ONE)&&(_=_.multiply(DD.TEN),S-=1);for(var F=S+1,M=new StringBuffer,P=DD.MAX_PRINT_DIGITS-1,H=0;H<=P;H++){s&&H===F&&M.append(".");var J=Math.trunc(_._hi);if(J<0)break;var K=!1,z=0;J>9?(K=!0,z="9"):z="0"+J,M.append(z),_=_.subtract(DD.valueOf(J)).multiply(DD.TEN),K&&_.selfAdd(DD.TEN);var oe=!0,se=DD.magnitude(_._hi);if(se<0&&Math.abs(se)>=P-H&&(oe=!1),!oe)break}return d[0]=S,M.toString()};DD.prototype.sqr=function f(){return this.multiply(this)};DD.prototype.doubleValue=function f(){return this._hi+this._lo};DD.prototype.subtract=function f(){if(arguments[0]instanceof DD){var s=arguments[0];return this.add(s.negate())}else if(typeof arguments[0]=="number"){var d=arguments[0];return this.add(-d)}};DD.prototype.equals=function f(){if(arguments.length===1){var s=arguments[0];return this._hi===s._hi&&this._lo===s._lo}};DD.prototype.isZero=function f(){return this._hi===0&&this._lo===0};DD.prototype.selfSubtract=function f(){if(arguments[0]instanceof DD){var s=arguments[0];return this.isNaN()?this:this.selfAdd(-s._hi,-s._lo)}else if(typeof arguments[0]=="number"){var d=arguments[0];return this.isNaN()?this:this.selfAdd(-d,0)}};DD.prototype.getSpecialNumberString=function f(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};DD.prototype.min=function f(s){return this.le(s)?this:s};DD.prototype.selfDivide=function f(){if(arguments.length===1){if(arguments[0]instanceof DD){var s=arguments[0];return this.selfDivide(s._hi,s._lo)}else if(typeof arguments[0]=="number"){var d=arguments[0];return this.selfDivide(d,0)}}else if(arguments.length===2){var _=arguments[0],S=arguments[1],T=null,F=null,M=null,P=null,H=null,J=null,K=null,z=null;return H=this._hi/_,J=DD.SPLIT*H,T=J-H,z=DD.SPLIT*_,T=J-T,F=H-T,M=z-_,K=H*_,M=z-M,P=_-M,z=T*M-K+T*P+F*M+F*P,J=(this._hi-K-z+this._lo-H*S)/_,z=H+J,this._hi=z,this._lo=H-z+J,this}};DD.prototype.dump=function f(){return"DD<"+this._hi+", "+this._lo+">"};DD.prototype.divide=function f(){if(arguments[0]instanceof DD){var s=arguments[0],d=null,_=null,S=null,T=null,F=null,M=null,P=null,H=null;F=this._hi/s._hi,M=DD.SPLIT*F,d=M-F,H=DD.SPLIT*s._hi,d=M-d,_=F-d,S=H-s._hi,P=F*s._hi,S=H-S,T=s._hi-S,H=d*S-P+d*T+_*S+_*T,M=(this._hi-P-H+this._lo-F*s._lo)/s._hi,H=F+M;var J=H,K=F-H+M;return new DD(J,K)}else if(typeof arguments[0]=="number"){var z=arguments[0];return Double.isNaN(z)?DD.createNaN():DD.copy(this).selfDivide(z,0)}};DD.prototype.ge=function f(s){return(this._hi>s._hi||this._hi===s._hi)&&this._lo>=s._lo};DD.prototype.pow=function f(s){if(s===0)return DD.valueOf(1);var d=new DD(this),_=DD.valueOf(1),S=Math.abs(s);if(S>1)for(;S>0;)S%2===1&&_.selfMultiply(d),S/=2,S>0&&(d=d.sqr());else _=d;return s<0?_.reciprocal():_};DD.prototype.ceil=function f(){if(this.isNaN())return DD.NaN;var s=Math.ceil(this._hi),d=0;return s===this._hi&&(d=Math.ceil(this._lo)),new DD(s,d)};DD.prototype.compareTo=function f(s){var d=s;return this._hi<d._hi?-1:this._hi>d._hi?1:this._lo<d._lo?-1:this._lo>d._lo?1:0};DD.prototype.rint=function f(){if(this.isNaN())return this;var s=this.add(.5);return s.floor()};DD.prototype.setValue=function f(){if(arguments[0]instanceof DD){var s=arguments[0];return this.init(s),this}else if(typeof arguments[0]=="number"){var d=arguments[0];return this.init(d),this}};DD.prototype.max=function f(s){return this.ge(s)?this:s};DD.prototype.sqrt=function f(){if(this.isZero())return DD.valueOf(0);if(this.isNegative())return DD.NaN;var s=1/Math.sqrt(this._hi),d=this._hi*s,_=DD.valueOf(d),S=this.subtract(_.sqr()),T=S._hi*(s*.5);return _.add(T)};DD.prototype.selfAdd=function f(){if(arguments.length===1){if(arguments[0]instanceof DD){var s=arguments[0];return this.selfAdd(s._hi,s._lo)}else if(typeof arguments[0]=="number"){var d=arguments[0],_=null,S=null,T=null,F=null,M=null,P=null;return T=this._hi+d,M=T-this._hi,F=T-M,F=d-M+(this._hi-F),P=F+this._lo,_=T+P,S=P+(T-_),this._hi=_+S,this._lo=S+(_-this._hi),this}}else if(arguments.length===2){var H=arguments[0],J=arguments[1],K=null,z=null,oe=null,se=null,ae=null,ge=null,pe=null,he=null;ae=this._hi+H,oe=this._lo+J,pe=ae-this._hi,he=oe-this._lo,ge=ae-pe,se=oe-he,ge=H-pe+(this._hi-ge),se=J-he+(this._lo-se),pe=ge+oe,K=ae+pe,z=pe+(ae-K),pe=se+z;var ve=K+pe,be=pe+(K-ve);return this._hi=ve,this._lo=be,this}};DD.prototype.selfMultiply=function f(){if(arguments.length===1){if(arguments[0]instanceof DD){var s=arguments[0];return this.selfMultiply(s._hi,s._lo)}else if(typeof arguments[0]=="number"){var d=arguments[0];return this.selfMultiply(d,0)}}else if(arguments.length===2){var _=arguments[0],S=arguments[1],T=null,F=null,M=null,P=null,H=null,J=null;H=DD.SPLIT*this._hi,T=H-this._hi,J=DD.SPLIT*_,T=H-T,F=this._hi-T,M=J-_,H=this._hi*_,M=J-M,P=_-M,J=T*M-H+T*P+F*M+F*P+(this._hi*S+this._lo*_);var K=H+J;T=H-K;var z=J+T;return this._hi=K,this._lo=z,this}};DD.prototype.selfSqr=function f(){return this.selfMultiply(this)};DD.prototype.floor=function f(){if(this.isNaN())return DD.NaN;var s=Math.floor(this._hi),d=0;return s===this._hi&&(d=Math.floor(this._lo)),new DD(s,d)};DD.prototype.negate=function f(){return this.isNaN()?this:new DD(-this._hi,-this._lo)};DD.prototype.clone=function f(){};DD.prototype.multiply=function f(){if(arguments[0]instanceof DD){var s=arguments[0];return s.isNaN()?DD.createNaN():DD.copy(this).selfMultiply(s)}else if(typeof arguments[0]=="number"){var d=arguments[0];return Double.isNaN(d)?DD.createNaN():DD.copy(this).selfMultiply(d,0)}};DD.prototype.isNaN=function f(){return Double.isNaN(this._hi)};DD.prototype.intValue=function f(){return Math.trunc(this._hi)};DD.prototype.toString=function f(){var s=DD.magnitude(this._hi);return s>=-3&&s<=20?this.toStandardNotation():this.toSciNotation()};DD.prototype.toStandardNotation=function f(){var s=this.getSpecialNumberString();if(s!==null)return s;var d=new Array(1).fill(null),_=this.extractSignificantDigits(!0,d),S=d[0]+1,T=_;if(_.charAt(0)===".")T="0"+_;else if(S<0)T="0."+DD.stringOfChar("0",-S)+_;else if(_.indexOf(".")===-1){var F=S-_.length,M=DD.stringOfChar("0",F);T=_+M+".0"}return this.isNegative()?"-"+T:T};DD.prototype.reciprocal=function f(){var s=null,d=null,_=null,S=null,T=null,F=null,M=null,P=null;T=1/this._hi,F=DD.SPLIT*T,s=F-T,P=DD.SPLIT*this._hi,s=F-s,d=T-s,_=P-this._hi,M=T*this._hi,_=P-_,S=this._hi-_,P=s*_-M+s*S+d*_+d*S,F=(1-M-P-T*this._lo)/this._hi;var H=T+F,J=T-H+F;return new DD(H,J)};DD.prototype.toSciNotation=function f(){if(this.isZero())return DD.SCI_NOT_ZERO;var s=this.getSpecialNumberString();if(s!==null)return s;var d=new Array(1).fill(null),_=this.extractSignificantDigits(!1,d),S=DD.SCI_NOT_EXPONENT_CHAR+d[0];if(_.charAt(0)==="0")throw new Error("Found leading zero: "+_);var T="";_.length>1&&(T=_.substring(1));var F=_.charAt(0)+"."+T;return this.isNegative()?"-"+F+S:F+S};DD.prototype.abs=function f(){return this.isNaN()?DD.NaN:this.isNegative()?this.negate():new DD(this)};DD.prototype.isPositive=function f(){return(this._hi>0||this._hi===0)&&this._lo>0};DD.prototype.lt=function f(s){return(this._hi<s._hi||this._hi===s._hi)&&this._lo<s._lo};DD.prototype.add=function f(){if(arguments[0]instanceof DD){var s=arguments[0];return DD.copy(this).selfAdd(s)}else if(typeof arguments[0]=="number"){var d=arguments[0];return DD.copy(this).selfAdd(d)}};DD.prototype.init=function f(){if(arguments.length===1){if(typeof arguments[0]=="number"){var s=arguments[0];this._hi=s,this._lo=0}else if(arguments[0]instanceof DD){var d=arguments[0];this._hi=d._hi,this._lo=d._lo}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this._hi=_,this._lo=S}};DD.prototype.gt=function f(s){return(this._hi>s._hi||this._hi===s._hi)&&this._lo>s._lo};DD.prototype.isNegative=function f(){return(this._hi<0||this._hi===0)&&this._lo<0};DD.prototype.trunc=function f(){return this.isNaN()?DD.NaN:this.isPositive()?this.floor():this.ceil()};DD.prototype.signum=function f(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};DD.prototype.interfaces_=function f(){return[Serializable,Comparable,Clonable]};DD.prototype.getClass=function f(){return DD};DD.sqr=function f(s){return DD.valueOf(s).selfMultiply(s)};DD.valueOf=function f(){if(typeof arguments[0]=="string"){var s=arguments[0];return DD.parse(s)}else if(typeof arguments[0]=="number"){var d=arguments[0];return new DD(d)}};DD.sqrt=function f(s){return DD.valueOf(s).sqrt()};DD.parse=function f(s){for(var d=0,_=s.length;Character.isWhitespace(s.charAt(d));)d++;var S=!1;if(d<_){var T=s.charAt(d);(T==="-"||T==="+")&&(d++,T==="-"&&(S=!0))}for(var F=new DD,M=0,P=0,H=0;!(d>=_);){var J=s.charAt(d);if(d++,Character.isDigit(J)){var K=J-"0";F.selfMultiply(DD.TEN),F.selfAdd(K),M++;continue}if(J==="."){P=M;continue}if(J==="e"||J==="E"){var z=s.substring(d);try{H=Integer.parseInt(z)}catch(pe){throw pe instanceof Error?new Error("Invalid exponent "+z+" in string "+s):pe}finally{}break}throw new Error("Unexpected character '"+J+"' at position "+d+" in string "+s)}var oe=F,se=M-P-H;if(se===0)oe=F;else if(se>0){var ae=DD.TEN.pow(se);oe=F.divide(ae)}else if(se<0){var ge=DD.TEN.pow(-se);oe=F.multiply(ge)}return S?oe.negate():oe};DD.createNaN=function f(){return new DD(Double.NaN,Double.NaN)};DD.copy=function f(s){return new DD(s)};DD.magnitude=function f(s){var d=Math.abs(s),_=Math.log(d)/Math.log(10),S=Math.trunc(Math.floor(_)),T=Math.pow(10,S);return T*10<=d&&(S+=1),S};DD.stringOfChar=function f(s,d){for(var _=new StringBuffer,S=0;S<d;S++)_.append(s);return _.toString()};staticAccessors$7.PI.get=function(){return new DD(3.141592653589793,12246467991473532e-32)};staticAccessors$7.TWO_PI.get=function(){return new DD(6.283185307179586,24492935982947064e-32)};staticAccessors$7.PI_2.get=function(){return new DD(1.5707963267948966,6123233995736766e-32)};staticAccessors$7.E.get=function(){return new DD(2.718281828459045,14456468917292502e-32)};staticAccessors$7.NaN.get=function(){return new DD(Double.NaN,Double.NaN)};staticAccessors$7.EPS.get=function(){return 123259516440783e-46};staticAccessors$7.SPLIT.get=function(){return 134217729};staticAccessors$7.MAX_PRINT_DIGITS.get=function(){return 32};staticAccessors$7.TEN.get=function(){return DD.valueOf(10)};staticAccessors$7.ONE.get=function(){return DD.valueOf(1)};staticAccessors$7.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};staticAccessors$7.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(DD,staticAccessors$7);var CGAlgorithmsDD=function f(){},staticAccessors$6={DP_SAFE_EPSILON:{configurable:!0}};CGAlgorithmsDD.prototype.interfaces_=function f(){return[]};CGAlgorithmsDD.prototype.getClass=function f(){return CGAlgorithmsDD};CGAlgorithmsDD.orientationIndex=function f(s,d,_){var S=CGAlgorithmsDD.orientationIndexFilter(s,d,_);if(S<=1)return S;var T=DD.valueOf(d.x).selfAdd(-s.x),F=DD.valueOf(d.y).selfAdd(-s.y),M=DD.valueOf(_.x).selfAdd(-d.x),P=DD.valueOf(_.y).selfAdd(-d.y);return T.selfMultiply(P).selfSubtract(F.selfMultiply(M)).signum()};CGAlgorithmsDD.signOfDet2x2=function f(s,d,_,S){var T=s.multiply(S).selfSubtract(d.multiply(_));return T.signum()};CGAlgorithmsDD.intersection=function f(s,d,_,S){var T=DD.valueOf(S.y).selfSubtract(_.y).selfMultiply(DD.valueOf(d.x).selfSubtract(s.x)),F=DD.valueOf(S.x).selfSubtract(_.x).selfMultiply(DD.valueOf(d.y).selfSubtract(s.y)),M=T.subtract(F),P=DD.valueOf(S.x).selfSubtract(_.x).selfMultiply(DD.valueOf(s.y).selfSubtract(_.y)),H=DD.valueOf(S.y).selfSubtract(_.y).selfMultiply(DD.valueOf(s.x).selfSubtract(_.x)),J=P.subtract(H),K=J.selfDivide(M).doubleValue(),z=DD.valueOf(s.x).selfAdd(DD.valueOf(d.x).selfSubtract(s.x).selfMultiply(K)).doubleValue(),oe=DD.valueOf(d.x).selfSubtract(s.x).selfMultiply(DD.valueOf(s.y).selfSubtract(_.y)),se=DD.valueOf(d.y).selfSubtract(s.y).selfMultiply(DD.valueOf(s.x).selfSubtract(_.x)),ae=oe.subtract(se),ge=ae.selfDivide(M).doubleValue(),pe=DD.valueOf(_.y).selfAdd(DD.valueOf(S.y).selfSubtract(_.y).selfMultiply(ge)).doubleValue();return new Coordinate(z,pe)};CGAlgorithmsDD.orientationIndexFilter=function f(s,d,_){var S=null,T=(s.x-_.x)*(d.y-_.y),F=(s.y-_.y)*(d.x-_.x),M=T-F;if(T>0){if(F<=0)return CGAlgorithmsDD.signum(M);S=T+F}else if(T<0){if(F>=0)return CGAlgorithmsDD.signum(M);S=-T-F}else return CGAlgorithmsDD.signum(M);var P=CGAlgorithmsDD.DP_SAFE_EPSILON*S;return M>=P||-M>=P?CGAlgorithmsDD.signum(M):2};CGAlgorithmsDD.signum=function f(s){return s>0?1:s<0?-1:0};staticAccessors$6.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(CGAlgorithmsDD,staticAccessors$6);var CoordinateSequence=function f(){},staticAccessors$8={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};staticAccessors$8.X.get=function(){return 0};staticAccessors$8.Y.get=function(){return 1};staticAccessors$8.Z.get=function(){return 2};staticAccessors$8.M.get=function(){return 3};CoordinateSequence.prototype.setOrdinate=function f(s,d,_){};CoordinateSequence.prototype.size=function f(){};CoordinateSequence.prototype.getOrdinate=function f(s,d){};CoordinateSequence.prototype.getCoordinate=function f(){};CoordinateSequence.prototype.getCoordinateCopy=function f(s){};CoordinateSequence.prototype.getDimension=function f(){};CoordinateSequence.prototype.getX=function f(s){};CoordinateSequence.prototype.clone=function f(){};CoordinateSequence.prototype.expandEnvelope=function f(s){};CoordinateSequence.prototype.copy=function f(){};CoordinateSequence.prototype.getY=function f(s){};CoordinateSequence.prototype.toCoordinateArray=function f(){};CoordinateSequence.prototype.interfaces_=function f(){return[Clonable]};CoordinateSequence.prototype.getClass=function f(){return CoordinateSequence};Object.defineProperties(CoordinateSequence,staticAccessors$8);var Exception=function f(){},NotRepresentableException=function(f){function s(){f.call(this,"Projective point not representable on the Cartesian plane.")}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(Exception),System=function f(){};System.arraycopy=function f(s,d,_,S,T){for(var F=0,M=d;M<d+T;M++)_[S+F]=s[M],F++};System.getProperty=function f(s){return{"line.separator":`
`}[s]};var HCoordinate=function f(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var s=arguments[0];this.x=s.x,this.y=s.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var d=arguments[0],_=arguments[1];this.x=d,this.y=_,this.w=1}else if(arguments[0]instanceof f&&arguments[1]instanceof f){var S=arguments[0],T=arguments[1];this.x=S.y*T.w-T.y*S.w,this.y=T.x*S.w-S.x*T.w,this.w=S.x*T.y-T.x*S.y}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Coordinate){var F=arguments[0],M=arguments[1];this.x=F.y-M.y,this.y=M.x-F.x,this.w=F.x*M.y-M.x*F.y}}else if(arguments.length===3){var P=arguments[0],H=arguments[1],J=arguments[2];this.x=P,this.y=H,this.w=J}else if(arguments.length===4){var K=arguments[0],z=arguments[1],oe=arguments[2],se=arguments[3],ae=K.y-z.y,ge=z.x-K.x,pe=K.x*z.y-z.x*K.y,he=oe.y-se.y,ve=se.x-oe.x,be=oe.x*se.y-se.x*oe.y;this.x=ge*be-ve*pe,this.y=he*pe-ae*be,this.w=ae*ve-he*ge}};HCoordinate.prototype.getY=function f(){var s=this.y/this.w;if(Double.isNaN(s)||Double.isInfinite(s))throw new NotRepresentableException;return s};HCoordinate.prototype.getX=function f(){var s=this.x/this.w;if(Double.isNaN(s)||Double.isInfinite(s))throw new NotRepresentableException;return s};HCoordinate.prototype.getCoordinate=function f(){var s=new Coordinate;return s.x=this.getX(),s.y=this.getY(),s};HCoordinate.prototype.interfaces_=function f(){return[]};HCoordinate.prototype.getClass=function f(){return HCoordinate};HCoordinate.intersection=function f(s,d,_,S){var T=s.y-d.y,F=d.x-s.x,M=s.x*d.y-d.x*s.y,P=_.y-S.y,H=S.x-_.x,J=_.x*S.y-S.x*_.y,K=F*J-H*M,z=P*M-T*J,oe=T*H-P*F,se=K/oe,ae=z/oe;if(Double.isNaN(se)||Double.isInfinite(se)||Double.isNaN(ae)||Double.isInfinite(ae))throw new NotRepresentableException;return new Coordinate(se,ae)};var Envelope=function f(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Coordinate){var s=arguments[0];this.init(s.x,s.x,s.y,s.y)}else if(arguments[0]instanceof f){var d=arguments[0];this.init(d)}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this.init(_.x,S.x,_.y,S.y)}else if(arguments.length===4){var T=arguments[0],F=arguments[1],M=arguments[2],P=arguments[3];this.init(T,F,M,P)}},staticAccessors$9={serialVersionUID:{configurable:!0}};Envelope.prototype.getArea=function f(){return this.getWidth()*this.getHeight()};Envelope.prototype.equals=function f(s){if(!(s instanceof Envelope))return!1;var d=s;return this.isNull()?d.isNull():this._maxx===d.getMaxX()&&this._maxy===d.getMaxY()&&this._minx===d.getMinX()&&this._miny===d.getMinY()};Envelope.prototype.intersection=function f(s){if(this.isNull()||s.isNull()||!this.intersects(s))return new Envelope;var d=this._minx>s._minx?this._minx:s._minx,_=this._miny>s._miny?this._miny:s._miny,S=this._maxx<s._maxx?this._maxx:s._maxx,T=this._maxy<s._maxy?this._maxy:s._maxy;return new Envelope(d,S,_,T)};Envelope.prototype.isNull=function f(){return this._maxx<this._minx};Envelope.prototype.getMaxX=function f(){return this._maxx};Envelope.prototype.covers=function f(){if(arguments.length===1){if(arguments[0]instanceof Coordinate){var s=arguments[0];return this.covers(s.x,s.y)}else if(arguments[0]instanceof Envelope){var d=arguments[0];return this.isNull()||d.isNull()?!1:d.getMinX()>=this._minx&&d.getMaxX()<=this._maxx&&d.getMinY()>=this._miny&&d.getMaxY()<=this._maxy}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];return this.isNull()?!1:_>=this._minx&&_<=this._maxx&&S>=this._miny&&S<=this._maxy}};Envelope.prototype.intersects=function f(){if(arguments.length===1){if(arguments[0]instanceof Envelope){var s=arguments[0];return this.isNull()||s.isNull()?!1:!(s._minx>this._maxx||s._maxx<this._minx||s._miny>this._maxy||s._maxy<this._miny)}else if(arguments[0]instanceof Coordinate){var d=arguments[0];return this.intersects(d.x,d.y)}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];return this.isNull()?!1:!(_>this._maxx||_<this._minx||S>this._maxy||S<this._miny)}};Envelope.prototype.getMinY=function f(){return this._miny};Envelope.prototype.getMinX=function f(){return this._minx};Envelope.prototype.expandToInclude=function f(){if(arguments.length===1){if(arguments[0]instanceof Coordinate){var s=arguments[0];this.expandToInclude(s.x,s.y)}else if(arguments[0]instanceof Envelope){var d=arguments[0];if(d.isNull())return null;this.isNull()?(this._minx=d.getMinX(),this._maxx=d.getMaxX(),this._miny=d.getMinY(),this._maxy=d.getMaxY()):(d._minx<this._minx&&(this._minx=d._minx),d._maxx>this._maxx&&(this._maxx=d._maxx),d._miny<this._miny&&(this._miny=d._miny),d._maxy>this._maxy&&(this._maxy=d._maxy))}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this.isNull()?(this._minx=_,this._maxx=_,this._miny=S,this._maxy=S):(_<this._minx&&(this._minx=_),_>this._maxx&&(this._maxx=_),S<this._miny&&(this._miny=S),S>this._maxy&&(this._maxy=S))}};Envelope.prototype.minExtent=function f(){if(this.isNull())return 0;var s=this.getWidth(),d=this.getHeight();return s<d?s:d};Envelope.prototype.getWidth=function f(){return this.isNull()?0:this._maxx-this._minx};Envelope.prototype.compareTo=function f(s){var d=s;return this.isNull()?d.isNull()?0:-1:d.isNull()?1:this._minx<d._minx?-1:this._minx>d._minx?1:this._miny<d._miny?-1:this._miny>d._miny?1:this._maxx<d._maxx?-1:this._maxx>d._maxx?1:this._maxy<d._maxy?-1:this._maxy>d._maxy?1:0};Envelope.prototype.translate=function f(s,d){if(this.isNull())return null;this.init(this.getMinX()+s,this.getMaxX()+s,this.getMinY()+d,this.getMaxY()+d)};Envelope.prototype.toString=function f(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};Envelope.prototype.setToNull=function f(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};Envelope.prototype.getHeight=function f(){return this.isNull()?0:this._maxy-this._miny};Envelope.prototype.maxExtent=function f(){if(this.isNull())return 0;var s=this.getWidth(),d=this.getHeight();return s>d?s:d};Envelope.prototype.expandBy=function f(){if(arguments.length===1){var s=arguments[0];this.expandBy(s,s)}else if(arguments.length===2){var d=arguments[0],_=arguments[1];if(this.isNull())return null;this._minx-=d,this._maxx+=d,this._miny-=_,this._maxy+=_,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};Envelope.prototype.contains=function f(){if(arguments.length===1){if(arguments[0]instanceof Envelope){var s=arguments[0];return this.covers(s)}else if(arguments[0]instanceof Coordinate){var d=arguments[0];return this.covers(d)}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];return this.covers(_,S)}};Envelope.prototype.centre=function f(){return this.isNull()?null:new Coordinate((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};Envelope.prototype.init=function f(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Coordinate){var s=arguments[0];this.init(s.x,s.x,s.y,s.y)}else if(arguments[0]instanceof Envelope){var d=arguments[0];this._minx=d._minx,this._maxx=d._maxx,this._miny=d._miny,this._maxy=d._maxy}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this.init(_.x,S.x,_.y,S.y)}else if(arguments.length===4){var T=arguments[0],F=arguments[1],M=arguments[2],P=arguments[3];T<F?(this._minx=T,this._maxx=F):(this._minx=F,this._maxx=T),M<P?(this._miny=M,this._maxy=P):(this._miny=P,this._maxy=M)}};Envelope.prototype.getMaxY=function f(){return this._maxy};Envelope.prototype.distance=function f(s){if(this.intersects(s))return 0;var d=0;this._maxx<s._minx?d=s._minx-this._maxx:this._minx>s._maxx&&(d=this._minx-s._maxx);var _=0;return this._maxy<s._miny?_=s._miny-this._maxy:this._miny>s._maxy&&(_=this._miny-s._maxy),d===0?_:_===0?d:Math.sqrt(d*d+_*_)};Envelope.prototype.hashCode=function f(){var s=17;return s=37*s+Coordinate.hashCode(this._minx),s=37*s+Coordinate.hashCode(this._maxx),s=37*s+Coordinate.hashCode(this._miny),s=37*s+Coordinate.hashCode(this._maxy),s};Envelope.prototype.interfaces_=function f(){return[Comparable,Serializable]};Envelope.prototype.getClass=function f(){return Envelope};Envelope.intersects=function f(){if(arguments.length===3){var s=arguments[0],d=arguments[1],_=arguments[2];return _.x>=(s.x<d.x?s.x:d.x)&&_.x<=(s.x>d.x?s.x:d.x)&&_.y>=(s.y<d.y?s.y:d.y)&&_.y<=(s.y>d.y?s.y:d.y)}else if(arguments.length===4){var S=arguments[0],T=arguments[1],F=arguments[2],M=arguments[3],P=Math.min(F.x,M.x),H=Math.max(F.x,M.x),J=Math.min(S.x,T.x),K=Math.max(S.x,T.x);return!(J>H||K<P||(P=Math.min(F.y,M.y),H=Math.max(F.y,M.y),J=Math.min(S.y,T.y),K=Math.max(S.y,T.y),J>H)||K<P)}};staticAccessors$9.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(Envelope,staticAccessors$9);var regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},WKTParser=function f(s){this.geometryFactory=s||new GeometryFactory};WKTParser.prototype.read=function f(s){var d,_,S;s=s.replace(/[\n\r]/g," ");var T=regExes.typeStr.exec(s);if(s.search("EMPTY")!==-1&&(T=regExes.emptyTypeStr.exec(s),T[2]=void 0),T&&(_=T[1].toLowerCase(),S=T[2],parse$1[_]&&(d=parse$1[_].apply(this,[S]))),d===void 0)throw new Error("Could not parse WKT "+s);return d};WKTParser.prototype.write=function f(s){return this.extractGeometry(s)};WKTParser.prototype.extractGeometry=function f(s){var d=s.getGeometryType().toLowerCase();if(!extract$1[d])return null;var _=d.toUpperCase(),S;return s.isEmpty()?S=_+" EMPTY":S=_+"("+extract$1[d].apply(this,[s])+")",S};var extract$1={coordinate:function f(s){return s.x+" "+s.y},point:function f(s){return extract$1.coordinate.call(this,s._coordinates._coordinates[0])},multipoint:function f(s){for(var d=this,_=[],S=0,T=s._geometries.length;S<T;++S)_.push("("+extract$1.point.apply(d,[s._geometries[S]])+")");return _.join(",")},linestring:function f(s){for(var d=this,_=[],S=0,T=s._points._coordinates.length;S<T;++S)_.push(extract$1.coordinate.apply(d,[s._points._coordinates[S]]));return _.join(",")},linearring:function f(s){for(var d=this,_=[],S=0,T=s._points._coordinates.length;S<T;++S)_.push(extract$1.coordinate.apply(d,[s._points._coordinates[S]]));return _.join(",")},multilinestring:function f(s){for(var d=this,_=[],S=0,T=s._geometries.length;S<T;++S)_.push("("+extract$1.linestring.apply(d,[s._geometries[S]])+")");return _.join(",")},polygon:function f(s){var d=this,_=[];_.push("("+extract$1.linestring.apply(this,[s._shell])+")");for(var S=0,T=s._holes.length;S<T;++S)_.push("("+extract$1.linestring.apply(d,[s._holes[S]])+")");return _.join(",")},multipolygon:function f(s){for(var d=this,_=[],S=0,T=s._geometries.length;S<T;++S)_.push("("+extract$1.polygon.apply(d,[s._geometries[S]])+")");return _.join(",")},geometrycollection:function f(s){for(var d=this,_=[],S=0,T=s._geometries.length;S<T;++S)_.push(d.extractGeometry(s._geometries[S]));return _.join(",")}},parse$1={point:function f(s){if(s===void 0)return this.geometryFactory.createPoint();var d=s.trim().split(regExes.spaces);return this.geometryFactory.createPoint(new Coordinate(Number.parseFloat(d[0]),Number.parseFloat(d[1])))},multipoint:function f(s){var d=this;if(s===void 0)return this.geometryFactory.createMultiPoint();for(var _,S=s.trim().split(","),T=[],F=0,M=S.length;F<M;++F)_=S[F].replace(regExes.trimParens,"$1"),T.push(parse$1.point.apply(d,[_]));return this.geometryFactory.createMultiPoint(T)},linestring:function f(s){if(s===void 0)return this.geometryFactory.createLineString();for(var d=s.trim().split(","),_=[],S,T=0,F=d.length;T<F;++T)S=d[T].trim().split(regExes.spaces),_.push(new Coordinate(Number.parseFloat(S[0]),Number.parseFloat(S[1])));return this.geometryFactory.createLineString(_)},linearring:function f(s){if(s===void 0)return this.geometryFactory.createLinearRing();for(var d=s.trim().split(","),_=[],S,T=0,F=d.length;T<F;++T)S=d[T].trim().split(regExes.spaces),_.push(new Coordinate(Number.parseFloat(S[0]),Number.parseFloat(S[1])));return this.geometryFactory.createLinearRing(_)},multilinestring:function f(s){var d=this;if(s===void 0)return this.geometryFactory.createMultiLineString();for(var _,S=s.trim().split(regExes.parenComma),T=[],F=0,M=S.length;F<M;++F)_=S[F].replace(regExes.trimParens,"$1"),T.push(parse$1.linestring.apply(d,[_]));return this.geometryFactory.createMultiLineString(T)},polygon:function f(s){var d=this;if(s===void 0)return this.geometryFactory.createPolygon();for(var _,S,T,F=s.trim().split(regExes.parenComma),M,P=[],H=0,J=F.length;H<J;++H)_=F[H].replace(regExes.trimParens,"$1"),S=parse$1.linestring.apply(d,[_]),T=d.geometryFactory.createLinearRing(S._points),H===0?M=T:P.push(T);return this.geometryFactory.createPolygon(M,P)},multipolygon:function f(s){var d=this;if(s===void 0)return this.geometryFactory.createMultiPolygon();for(var _,S=s.trim().split(regExes.doubleParenComma),T=[],F=0,M=S.length;F<M;++F)_=S[F].replace(regExes.trimParens,"$1"),T.push(parse$1.polygon.apply(d,[_]));return this.geometryFactory.createMultiPolygon(T)},geometrycollection:function f(s){var d=this;if(s===void 0)return this.geometryFactory.createGeometryCollection();s=s.replace(/,\s*([A-Za-z])/g,"|$1");for(var _=s.trim().split("|"),S=[],T=0,F=_.length;T<F;++T)S.push(d.read(_[T]));return this.geometryFactory.createGeometryCollection(S)}},WKTWriter=function f(s){this.parser=new WKTParser(s)};WKTWriter.prototype.write=function f(s){return this.parser.write(s)};WKTWriter.toLineString=function f(s,d){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+s.x+" "+s.y+", "+d.x+" "+d.y+" )"};var RuntimeException=function(f){function s(d){f.call(this,d),this.name="RuntimeException",this.message=d,this.stack=new f().stack}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s}(Error),AssertionFailedException=function(f){function s(){if(f.call(this),arguments.length===0)f.call(this);else if(arguments.length===1){var d=arguments[0];f.call(this,d)}}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(RuntimeException),Assert=function f(){};Assert.prototype.interfaces_=function f(){return[]};Assert.prototype.getClass=function f(){return Assert};Assert.shouldNeverReachHere=function f(){if(arguments.length===0)Assert.shouldNeverReachHere(null);else if(arguments.length===1){var s=arguments[0];throw new AssertionFailedException("Should never reach here"+(s!==null?": "+s:""))}};Assert.isTrue=function f(){var s,d;if(arguments.length===1)s=arguments[0],Assert.isTrue(s,null);else if(arguments.length===2&&(s=arguments[0],d=arguments[1],!s))throw d===null?new AssertionFailedException:new AssertionFailedException(d)};Assert.equals=function f(){var s,d,_;if(arguments.length===2)s=arguments[0],d=arguments[1],Assert.equals(s,d,null);else if(arguments.length===3&&(s=arguments[0],d=arguments[1],_=arguments[2],!d.equals(s)))throw new AssertionFailedException("Expected "+s+" but encountered "+d+(_!==null?": "+_:""))};var LineIntersector=function f(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Coordinate,this._intPt[1]=new Coordinate,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},staticAccessors$10={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};LineIntersector.prototype.getIndexAlongSegment=function f(s,d){return this.computeIntLineIndex(),this._intLineIndex[s][d]};LineIntersector.prototype.getTopologySummary=function f(){var s=new StringBuffer;return this.isEndPoint()&&s.append(" endpoint"),this._isProper&&s.append(" proper"),this.isCollinear()&&s.append(" collinear"),s.toString()};LineIntersector.prototype.computeIntersection=function f(s,d,_,S){this._inputLines[0][0]=s,this._inputLines[0][1]=d,this._inputLines[1][0]=_,this._inputLines[1][1]=S,this._result=this.computeIntersect(s,d,_,S)};LineIntersector.prototype.getIntersectionNum=function f(){return this._result};LineIntersector.prototype.computeIntLineIndex=function f(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var s=arguments[0],d=this.getEdgeDistance(s,0),_=this.getEdgeDistance(s,1);d>_?(this._intLineIndex[s][0]=0,this._intLineIndex[s][1]=1):(this._intLineIndex[s][0]=1,this._intLineIndex[s][1]=0)}};LineIntersector.prototype.isProper=function f(){return this.hasIntersection()&&this._isProper};LineIntersector.prototype.setPrecisionModel=function f(s){this._precisionModel=s};LineIntersector.prototype.isInteriorIntersection=function f(){var s=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var d=arguments[0],_=0;_<this._result;_++)if(!(s._intPt[_].equals2D(s._inputLines[d][0])||s._intPt[_].equals2D(s._inputLines[d][1])))return!0;return!1}};LineIntersector.prototype.getIntersection=function f(s){return this._intPt[s]};LineIntersector.prototype.isEndPoint=function f(){return this.hasIntersection()&&!this._isProper};LineIntersector.prototype.hasIntersection=function f(){return this._result!==LineIntersector.NO_INTERSECTION};LineIntersector.prototype.getEdgeDistance=function f(s,d){var _=LineIntersector.computeEdgeDistance(this._intPt[d],this._inputLines[s][0],this._inputLines[s][1]);return _};LineIntersector.prototype.isCollinear=function f(){return this._result===LineIntersector.COLLINEAR_INTERSECTION};LineIntersector.prototype.toString=function f(){return WKTWriter.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+WKTWriter.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};LineIntersector.prototype.getEndpoint=function f(s,d){return this._inputLines[s][d]};LineIntersector.prototype.isIntersection=function f(s){for(var d=this,_=0;_<this._result;_++)if(d._intPt[_].equals2D(s))return!0;return!1};LineIntersector.prototype.getIntersectionAlongSegment=function f(s,d){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[s][d]]};LineIntersector.prototype.interfaces_=function f(){return[]};LineIntersector.prototype.getClass=function f(){return LineIntersector};LineIntersector.computeEdgeDistance=function f(s,d,_){var S=Math.abs(_.x-d.x),T=Math.abs(_.y-d.y),F=-1;if(s.equals(d))F=0;else if(s.equals(_))S>T?F=S:F=T;else{var M=Math.abs(s.x-d.x),P=Math.abs(s.y-d.y);S>T?F=M:F=P,F===0&&!s.equals(d)&&(F=Math.max(M,P))}return Assert.isTrue(!(F===0&&!s.equals(d)),"Bad distance calculation"),F};LineIntersector.nonRobustComputeEdgeDistance=function f(s,d,_){var S=s.x-d.x,T=s.y-d.y,F=Math.sqrt(S*S+T*T);return Assert.isTrue(!(F===0&&!s.equals(d)),"Invalid distance calculation"),F};staticAccessors$10.DONT_INTERSECT.get=function(){return 0};staticAccessors$10.DO_INTERSECT.get=function(){return 1};staticAccessors$10.COLLINEAR.get=function(){return 2};staticAccessors$10.NO_INTERSECTION.get=function(){return 0};staticAccessors$10.POINT_INTERSECTION.get=function(){return 1};staticAccessors$10.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(LineIntersector,staticAccessors$10);var RobustLineIntersector=function(f){function s(){f.apply(this,arguments)}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.isInSegmentEnvelopes=function(_){var S=new Envelope(this._inputLines[0][0],this._inputLines[0][1]),T=new Envelope(this._inputLines[1][0],this._inputLines[1][1]);return S.contains(_)&&T.contains(_)},s.prototype.computeIntersection=function(){if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];if(this._isProper=!1,Envelope.intersects(S,T,_)&&CGAlgorithms.orientationIndex(S,T,_)===0&&CGAlgorithms.orientationIndex(T,S,_)===0)return this._isProper=!0,(_.equals(S)||_.equals(T))&&(this._isProper=!1),this._result=f.POINT_INTERSECTION,null;this._result=f.NO_INTERSECTION}else return f.prototype.computeIntersection.apply(this,arguments)},s.prototype.normalizeToMinimum=function(_,S,T,F,M){M.x=this.smallestInAbsValue(_.x,S.x,T.x,F.x),M.y=this.smallestInAbsValue(_.y,S.y,T.y,F.y),_.x-=M.x,_.y-=M.y,S.x-=M.x,S.y-=M.y,T.x-=M.x,T.y-=M.y,F.x-=M.x,F.y-=M.y},s.prototype.safeHCoordinateIntersection=function(_,S,T,F){var M=null;try{M=HCoordinate.intersection(_,S,T,F)}catch(P){if(P instanceof NotRepresentableException)M=s.nearestEndpoint(_,S,T,F);else throw P}finally{}return M},s.prototype.intersection=function(_,S,T,F){var M=this.intersectionWithNormalization(_,S,T,F);return this.isInSegmentEnvelopes(M)||(M=new Coordinate(s.nearestEndpoint(_,S,T,F))),this._precisionModel!==null&&this._precisionModel.makePrecise(M),M},s.prototype.smallestInAbsValue=function(_,S,T,F){var M=_,P=Math.abs(M);return Math.abs(S)<P&&(M=S,P=Math.abs(S)),Math.abs(T)<P&&(M=T,P=Math.abs(T)),Math.abs(F)<P&&(M=F),M},s.prototype.checkDD=function(_,S,T,F,M){var P=CGAlgorithmsDD.intersection(_,S,T,F),H=this.isInSegmentEnvelopes(P);System.out.println("DD in env = "+H+"  --------------------- "+P),M.distance(P)>1e-4&&System.out.println("Distance = "+M.distance(P))},s.prototype.intersectionWithNormalization=function(_,S,T,F){var M=new Coordinate(_),P=new Coordinate(S),H=new Coordinate(T),J=new Coordinate(F),K=new Coordinate;this.normalizeToEnvCentre(M,P,H,J,K);var z=this.safeHCoordinateIntersection(M,P,H,J);return z.x+=K.x,z.y+=K.y,z},s.prototype.computeCollinearIntersection=function(_,S,T,F){var M=Envelope.intersects(_,S,T),P=Envelope.intersects(_,S,F),H=Envelope.intersects(T,F,_),J=Envelope.intersects(T,F,S);return M&&P?(this._intPt[0]=T,this._intPt[1]=F,f.COLLINEAR_INTERSECTION):H&&J?(this._intPt[0]=_,this._intPt[1]=S,f.COLLINEAR_INTERSECTION):M&&H?(this._intPt[0]=T,this._intPt[1]=_,T.equals(_)&&!P&&!J?f.POINT_INTERSECTION:f.COLLINEAR_INTERSECTION):M&&J?(this._intPt[0]=T,this._intPt[1]=S,T.equals(S)&&!P&&!H?f.POINT_INTERSECTION:f.COLLINEAR_INTERSECTION):P&&H?(this._intPt[0]=F,this._intPt[1]=_,F.equals(_)&&!M&&!J?f.POINT_INTERSECTION:f.COLLINEAR_INTERSECTION):P&&J?(this._intPt[0]=F,this._intPt[1]=S,F.equals(S)&&!M&&!H?f.POINT_INTERSECTION:f.COLLINEAR_INTERSECTION):f.NO_INTERSECTION},s.prototype.normalizeToEnvCentre=function(_,S,T,F,M){var P=_.x<S.x?_.x:S.x,H=_.y<S.y?_.y:S.y,J=_.x>S.x?_.x:S.x,K=_.y>S.y?_.y:S.y,z=T.x<F.x?T.x:F.x,oe=T.y<F.y?T.y:F.y,se=T.x>F.x?T.x:F.x,ae=T.y>F.y?T.y:F.y,ge=P>z?P:z,pe=J<se?J:se,he=H>oe?H:oe,ve=K<ae?K:ae,be=(ge+pe)/2,Re=(he+ve)/2;M.x=be,M.y=Re,_.x-=M.x,_.y-=M.y,S.x-=M.x,S.y-=M.y,T.x-=M.x,T.y-=M.y,F.x-=M.x,F.y-=M.y},s.prototype.computeIntersect=function(_,S,T,F){if(this._isProper=!1,!Envelope.intersects(_,S,T,F))return f.NO_INTERSECTION;var M=CGAlgorithms.orientationIndex(_,S,T),P=CGAlgorithms.orientationIndex(_,S,F);if(M>0&&P>0||M<0&&P<0)return f.NO_INTERSECTION;var H=CGAlgorithms.orientationIndex(T,F,_),J=CGAlgorithms.orientationIndex(T,F,S);if(H>0&&J>0||H<0&&J<0)return f.NO_INTERSECTION;var K=M===0&&P===0&&H===0&&J===0;return K?this.computeCollinearIntersection(_,S,T,F):(M===0||P===0||H===0||J===0?(this._isProper=!1,_.equals2D(T)||_.equals2D(F)?this._intPt[0]=_:S.equals2D(T)||S.equals2D(F)?this._intPt[0]=S:M===0?this._intPt[0]=new Coordinate(T):P===0?this._intPt[0]=new Coordinate(F):H===0?this._intPt[0]=new Coordinate(_):J===0&&(this._intPt[0]=new Coordinate(S))):(this._isProper=!0,this._intPt[0]=this.intersection(_,S,T,F)),f.POINT_INTERSECTION)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.nearestEndpoint=function(_,S,T,F){var M=_,P=CGAlgorithms.distancePointLine(_,T,F),H=CGAlgorithms.distancePointLine(S,T,F);return H<P&&(P=H,M=S),H=CGAlgorithms.distancePointLine(T,_,S),H<P&&(P=H,M=T),H=CGAlgorithms.distancePointLine(F,_,S),H<P&&(P=H,M=F),M},s}(LineIntersector),RobustDeterminant=function f(){};RobustDeterminant.prototype.interfaces_=function f(){return[]};RobustDeterminant.prototype.getClass=function f(){return RobustDeterminant};RobustDeterminant.orientationIndex=function f(s,d,_){var S=d.x-s.x,T=d.y-s.y,F=_.x-d.x,M=_.y-d.y;return RobustDeterminant.signOfDet2x2(S,T,F,M)};RobustDeterminant.signOfDet2x2=function f(s,d,_,S){var T=null,F=null,M=null;if(T=1,s===0||S===0)return d===0||_===0?0:d>0?_>0?-T:T:_>0?T:-T;if(d===0||_===0)return S>0?s>0?T:-T:s>0?-T:T;if(d>0?S>0?d<=S||(T=-T,F=s,s=_,_=F,F=d,d=S,S=F):d<=-S?(T=-T,_=-_,S=-S):(F=s,s=-_,_=F,F=d,d=-S,S=F):S>0?-d<=S?(T=-T,s=-s,d=-d):(F=-s,s=_,_=F,F=-d,d=S,S=F):d>=S?(s=-s,d=-d,_=-_,S=-S):(T=-T,F=-s,s=-_,_=F,F=-d,d=-S,S=F),s>0)if(_>0){if(!(s<=_))return T}else return T;else{if(_>0)return-T;if(s>=_)T=-T,s=-s,_=-_;else return-T}for(;;){if(M=Math.floor(_/s),_=_-M*s,S=S-M*d,S<0)return-T;if(S>d)return T;if(s>_+_){if(d<S+S)return T}else{if(d>S+S)return-T;_=s-_,S=d-S,T=-T}if(S===0)return _===0?0:-T;if(_===0||(M=Math.floor(s/_),s=s-M*_,d=d-M*S,d<0))return T;if(d>S)return-T;if(_>s+s){if(S<d+d)return-T}else{if(S>d+d)return T;s=_-s,d=S-d,T=-T}if(d===0)return s===0?0:T;if(s===0)return-T}};var RayCrossingCounter=function f(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var s=arguments[0];this._p=s};RayCrossingCounter.prototype.countSegment=function f(s,d){if(s.x<this._p.x&&d.x<this._p.x)return null;if(this._p.x===d.x&&this._p.y===d.y)return this._isPointOnSegment=!0,null;if(s.y===this._p.y&&d.y===this._p.y){var _=s.x,S=d.x;return _>S&&(_=d.x,S=s.x),this._p.x>=_&&this._p.x<=S&&(this._isPointOnSegment=!0),null}if(s.y>this._p.y&&d.y<=this._p.y||d.y>this._p.y&&s.y<=this._p.y){var T=s.x-this._p.x,F=s.y-this._p.y,M=d.x-this._p.x,P=d.y-this._p.y,H=RobustDeterminant.signOfDet2x2(T,F,M,P);if(H===0)return this._isPointOnSegment=!0,null;P<F&&(H=-H),H>0&&this._crossingCount++}};RayCrossingCounter.prototype.isPointInPolygon=function f(){return this.getLocation()!==Location.EXTERIOR};RayCrossingCounter.prototype.getLocation=function f(){return this._isPointOnSegment?Location.BOUNDARY:this._crossingCount%2===1?Location.INTERIOR:Location.EXTERIOR};RayCrossingCounter.prototype.isOnSegment=function f(){return this._isPointOnSegment};RayCrossingCounter.prototype.interfaces_=function f(){return[]};RayCrossingCounter.prototype.getClass=function f(){return RayCrossingCounter};RayCrossingCounter.locatePointInRing=function f(){if(arguments[0]instanceof Coordinate&&hasInterface(arguments[1],CoordinateSequence)){for(var s=arguments[0],d=arguments[1],_=new RayCrossingCounter(s),S=new Coordinate,T=new Coordinate,F=1;F<d.size();F++)if(d.getCoordinate(F,S),d.getCoordinate(F-1,T),_.countSegment(S,T),_.isOnSegment())return _.getLocation();return _.getLocation()}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Array){for(var M=arguments[0],P=arguments[1],H=new RayCrossingCounter(M),J=1;J<P.length;J++){var K=P[J],z=P[J-1];if(H.countSegment(K,z),H.isOnSegment())return H.getLocation()}return H.getLocation()}};var CGAlgorithms=function f(){},staticAccessors$3={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};CGAlgorithms.prototype.interfaces_=function f(){return[]};CGAlgorithms.prototype.getClass=function f(){return CGAlgorithms};CGAlgorithms.orientationIndex=function f(s,d,_){return CGAlgorithmsDD.orientationIndex(s,d,_)};CGAlgorithms.signedArea=function f(){if(arguments[0]instanceof Array){var s=arguments[0];if(s.length<3)return 0;for(var d=0,_=s[0].x,S=1;S<s.length-1;S++){var T=s[S].x-_,F=s[S+1].y,M=s[S-1].y;d+=T*(M-F)}return d/2}else if(hasInterface(arguments[0],CoordinateSequence)){var P=arguments[0],H=P.size();if(H<3)return 0;var J=new Coordinate,K=new Coordinate,z=new Coordinate;P.getCoordinate(0,K),P.getCoordinate(1,z);var oe=K.x;z.x-=oe;for(var se=0,ae=1;ae<H-1;ae++)J.y=K.y,K.x=z.x,K.y=z.y,P.getCoordinate(ae+1,z),z.x-=oe,se+=K.x*(J.y-z.y);return se/2}};CGAlgorithms.distanceLineLine=function f(s,d,_,S){if(s.equals(d))return CGAlgorithms.distancePointLine(s,_,S);if(_.equals(S))return CGAlgorithms.distancePointLine(S,s,d);var T=!1;if(!Envelope.intersects(s,d,_,S))T=!0;else{var F=(d.x-s.x)*(S.y-_.y)-(d.y-s.y)*(S.x-_.x);if(F===0)T=!0;else{var M=(s.y-_.y)*(S.x-_.x)-(s.x-_.x)*(S.y-_.y),P=(s.y-_.y)*(d.x-s.x)-(s.x-_.x)*(d.y-s.y),H=P/F,J=M/F;(J<0||J>1||H<0||H>1)&&(T=!0)}}return T?MathUtil.min(CGAlgorithms.distancePointLine(s,_,S),CGAlgorithms.distancePointLine(d,_,S),CGAlgorithms.distancePointLine(_,s,d),CGAlgorithms.distancePointLine(S,s,d)):0};CGAlgorithms.isPointInRing=function f(s,d){return CGAlgorithms.locatePointInRing(s,d)!==Location.EXTERIOR};CGAlgorithms.computeLength=function f(s){var d=s.size();if(d<=1)return 0;var _=0,S=new Coordinate;s.getCoordinate(0,S);for(var T=S.x,F=S.y,M=1;M<d;M++){s.getCoordinate(M,S);var P=S.x,H=S.y,J=P-T,K=H-F;_+=Math.sqrt(J*J+K*K),T=P,F=H}return _};CGAlgorithms.isCCW=function f(s){var d=s.length-1;if(d<3)throw new IllegalArgumentException("Ring has fewer than 4 points, so orientation cannot be determined");for(var _=s[0],S=0,T=1;T<=d;T++){var F=s[T];F.y>_.y&&(_=F,S=T)}var M=S;do M=M-1,M<0&&(M=d);while(s[M].equals2D(_)&&M!==S);var P=S;do P=(P+1)%d;while(s[P].equals2D(_)&&P!==S);var H=s[M],J=s[P];if(H.equals2D(_)||J.equals2D(_)||H.equals2D(J))return!1;var K=CGAlgorithms.computeOrientation(H,_,J),z=!1;return K===0?z=H.x>J.x:z=K>0,z};CGAlgorithms.locatePointInRing=function f(s,d){return RayCrossingCounter.locatePointInRing(s,d)};CGAlgorithms.distancePointLinePerpendicular=function f(s,d,_){var S=(_.x-d.x)*(_.x-d.x)+(_.y-d.y)*(_.y-d.y),T=((d.y-s.y)*(_.x-d.x)-(d.x-s.x)*(_.y-d.y))/S;return Math.abs(T)*Math.sqrt(S)};CGAlgorithms.computeOrientation=function f(s,d,_){return CGAlgorithms.orientationIndex(s,d,_)};CGAlgorithms.distancePointLine=function f(){if(arguments.length===2){var s=arguments[0],d=arguments[1];if(d.length===0)throw new IllegalArgumentException("Line array must contain at least one vertex");for(var _=s.distance(d[0]),S=0;S<d.length-1;S++){var T=CGAlgorithms.distancePointLine(s,d[S],d[S+1]);T<_&&(_=T)}return _}else if(arguments.length===3){var F=arguments[0],M=arguments[1],P=arguments[2];if(M.x===P.x&&M.y===P.y)return F.distance(M);var H=(P.x-M.x)*(P.x-M.x)+(P.y-M.y)*(P.y-M.y),J=((F.x-M.x)*(P.x-M.x)+(F.y-M.y)*(P.y-M.y))/H;if(J<=0)return F.distance(M);if(J>=1)return F.distance(P);var K=((M.y-F.y)*(P.x-M.x)-(M.x-F.x)*(P.y-M.y))/H;return Math.abs(K)*Math.sqrt(H)}};CGAlgorithms.isOnLine=function f(s,d){for(var _=new RobustLineIntersector,S=1;S<d.length;S++){var T=d[S-1],F=d[S];if(_.computeIntersection(s,T,F),_.hasIntersection())return!0}return!1};staticAccessors$3.CLOCKWISE.get=function(){return-1};staticAccessors$3.RIGHT.get=function(){return CGAlgorithms.CLOCKWISE};staticAccessors$3.COUNTERCLOCKWISE.get=function(){return 1};staticAccessors$3.LEFT.get=function(){return CGAlgorithms.COUNTERCLOCKWISE};staticAccessors$3.COLLINEAR.get=function(){return 0};staticAccessors$3.STRAIGHT.get=function(){return CGAlgorithms.COLLINEAR};Object.defineProperties(CGAlgorithms,staticAccessors$3);var GeometryComponentFilter=function f(){};GeometryComponentFilter.prototype.filter=function f(s){};GeometryComponentFilter.prototype.interfaces_=function f(){return[]};GeometryComponentFilter.prototype.getClass=function f(){return GeometryComponentFilter};var Geometry=function f(){var s=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=s,this._SRID=s.getSRID()},staticAccessors$11={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Geometry.prototype.isGeometryCollection=function f(){return this.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION};Geometry.prototype.getFactory=function f(){return this._factory};Geometry.prototype.getGeometryN=function f(s){return this};Geometry.prototype.getArea=function f(){return 0};Geometry.prototype.isRectangle=function f(){return!1};Geometry.prototype.equals=function f(){if(arguments[0]instanceof Geometry){var s=arguments[0];return s===null?!1:this.equalsTopo(s)}else if(arguments[0]instanceof Object){var d=arguments[0];if(!(d instanceof Geometry))return!1;var _=d;return this.equalsExact(_)}};Geometry.prototype.equalsExact=function f(s){return this===s||this.equalsExact(s,0)};Geometry.prototype.geometryChanged=function f(){this.apply(Geometry.geometryChangedFilter)};Geometry.prototype.geometryChangedAction=function f(){this._envelope=null};Geometry.prototype.equalsNorm=function f(s){return s===null?!1:this.norm().equalsExact(s.norm())};Geometry.prototype.getLength=function f(){return 0};Geometry.prototype.getNumGeometries=function f(){return 1};Geometry.prototype.compareTo=function f(){if(arguments.length===1){var s=arguments[0],d=s;return this.getSortIndex()!==d.getSortIndex()?this.getSortIndex()-d.getSortIndex():this.isEmpty()&&d.isEmpty()?0:this.isEmpty()?-1:d.isEmpty()?1:this.compareToSameClass(s)}else if(arguments.length===2){var _=arguments[0],S=arguments[1];return this.getSortIndex()!==_.getSortIndex()?this.getSortIndex()-_.getSortIndex():this.isEmpty()&&_.isEmpty()?0:this.isEmpty()?-1:_.isEmpty()?1:this.compareToSameClass(_,S)}};Geometry.prototype.getUserData=function f(){return this._userData};Geometry.prototype.getSRID=function f(){return this._SRID};Geometry.prototype.getEnvelope=function f(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};Geometry.prototype.checkNotGeometryCollection=function f(s){if(s.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION)throw new IllegalArgumentException("This method does not support GeometryCollection arguments")};Geometry.prototype.equal=function f(s,d,_){return _===0?s.equals(d):s.distance(d)<=_};Geometry.prototype.norm=function f(){var s=this.copy();return s.normalize(),s};Geometry.prototype.getPrecisionModel=function f(){return this._factory.getPrecisionModel()};Geometry.prototype.getEnvelopeInternal=function f(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Envelope(this._envelope)};Geometry.prototype.setSRID=function f(s){this._SRID=s};Geometry.prototype.setUserData=function f(s){this._userData=s};Geometry.prototype.compare=function f(s,d){for(var _=s.iterator(),S=d.iterator();_.hasNext()&&S.hasNext();){var T=_.next(),F=S.next(),M=T.compareTo(F);if(M!==0)return M}return _.hasNext()?1:S.hasNext()?-1:0};Geometry.prototype.hashCode=function f(){return this.getEnvelopeInternal().hashCode()};Geometry.prototype.isGeometryCollectionOrDerived=function f(){return this.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Geometry.SORTINDEX_MULTIPOINT||this.getSortIndex()===Geometry.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Geometry.SORTINDEX_MULTIPOLYGON};Geometry.prototype.interfaces_=function f(){return[Clonable,Comparable,Serializable]};Geometry.prototype.getClass=function f(){return Geometry};Geometry.hasNonEmptyElements=function f(s){for(var d=0;d<s.length;d++)if(!s[d].isEmpty())return!0;return!1};Geometry.hasNullElements=function f(s){for(var d=0;d<s.length;d++)if(s[d]===null)return!0;return!1};staticAccessors$11.serialVersionUID.get=function(){return 8763622679187377e3};staticAccessors$11.SORTINDEX_POINT.get=function(){return 0};staticAccessors$11.SORTINDEX_MULTIPOINT.get=function(){return 1};staticAccessors$11.SORTINDEX_LINESTRING.get=function(){return 2};staticAccessors$11.SORTINDEX_LINEARRING.get=function(){return 3};staticAccessors$11.SORTINDEX_MULTILINESTRING.get=function(){return 4};staticAccessors$11.SORTINDEX_POLYGON.get=function(){return 5};staticAccessors$11.SORTINDEX_MULTIPOLYGON.get=function(){return 6};staticAccessors$11.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};staticAccessors$11.geometryChangedFilter.get=function(){return geometryChangedFilter};Object.defineProperties(Geometry,staticAccessors$11);var geometryChangedFilter=function f(){};geometryChangedFilter.interfaces_=function f(){return[GeometryComponentFilter]};geometryChangedFilter.filter=function f(s){s.geometryChangedAction()};var CoordinateFilter=function f(){};CoordinateFilter.prototype.filter=function f(s){};CoordinateFilter.prototype.interfaces_=function f(){return[]};CoordinateFilter.prototype.getClass=function f(){return CoordinateFilter};var BoundaryNodeRule=function f(){},staticAccessors$12={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};BoundaryNodeRule.prototype.isInBoundary=function f(s){};BoundaryNodeRule.prototype.interfaces_=function f(){return[]};BoundaryNodeRule.prototype.getClass=function f(){return BoundaryNodeRule};staticAccessors$12.Mod2BoundaryNodeRule.get=function(){return Mod2BoundaryNodeRule};staticAccessors$12.EndPointBoundaryNodeRule.get=function(){return EndPointBoundaryNodeRule};staticAccessors$12.MultiValentEndPointBoundaryNodeRule.get=function(){return MultiValentEndPointBoundaryNodeRule};staticAccessors$12.MonoValentEndPointBoundaryNodeRule.get=function(){return MonoValentEndPointBoundaryNodeRule};staticAccessors$12.MOD2_BOUNDARY_RULE.get=function(){return new Mod2BoundaryNodeRule};staticAccessors$12.ENDPOINT_BOUNDARY_RULE.get=function(){return new EndPointBoundaryNodeRule};staticAccessors$12.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new MultiValentEndPointBoundaryNodeRule};staticAccessors$12.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new MonoValentEndPointBoundaryNodeRule};staticAccessors$12.OGC_SFS_BOUNDARY_RULE.get=function(){return BoundaryNodeRule.MOD2_BOUNDARY_RULE};Object.defineProperties(BoundaryNodeRule,staticAccessors$12);var Mod2BoundaryNodeRule=function f(){};Mod2BoundaryNodeRule.prototype.isInBoundary=function f(s){return s%2===1};Mod2BoundaryNodeRule.prototype.interfaces_=function f(){return[BoundaryNodeRule]};Mod2BoundaryNodeRule.prototype.getClass=function f(){return Mod2BoundaryNodeRule};var EndPointBoundaryNodeRule=function f(){};EndPointBoundaryNodeRule.prototype.isInBoundary=function f(s){return s>0};EndPointBoundaryNodeRule.prototype.interfaces_=function f(){return[BoundaryNodeRule]};EndPointBoundaryNodeRule.prototype.getClass=function f(){return EndPointBoundaryNodeRule};var MultiValentEndPointBoundaryNodeRule=function f(){};MultiValentEndPointBoundaryNodeRule.prototype.isInBoundary=function f(s){return s>1};MultiValentEndPointBoundaryNodeRule.prototype.interfaces_=function f(){return[BoundaryNodeRule]};MultiValentEndPointBoundaryNodeRule.prototype.getClass=function f(){return MultiValentEndPointBoundaryNodeRule};var MonoValentEndPointBoundaryNodeRule=function f(){};MonoValentEndPointBoundaryNodeRule.prototype.isInBoundary=function f(s){return s===1};MonoValentEndPointBoundaryNodeRule.prototype.interfaces_=function f(){return[BoundaryNodeRule]};MonoValentEndPointBoundaryNodeRule.prototype.getClass=function f(){return MonoValentEndPointBoundaryNodeRule};var Collection=function f(){};Collection.prototype.add=function f(){};Collection.prototype.addAll=function f(){};Collection.prototype.isEmpty=function f(){};Collection.prototype.iterator=function f(){};Collection.prototype.size=function f(){};Collection.prototype.toArray=function f(){};Collection.prototype.remove=function f(){};function IndexOutOfBoundsException(f){this.message=f||""}IndexOutOfBoundsException.prototype=new Error;IndexOutOfBoundsException.prototype.name="IndexOutOfBoundsException";var Iterator$1=function f(){};Iterator$1.prototype.hasNext=function f(){};Iterator$1.prototype.next=function f(){};Iterator$1.prototype.remove=function f(){};var List=function(f){function s(){f.apply(this,arguments)}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.get=function(){},s.prototype.set=function(){},s.prototype.isEmpty=function(){},s}(Collection);function NoSuchElementException(f){this.message=f||""}NoSuchElementException.prototype=new Error;NoSuchElementException.prototype.name="NoSuchElementException";var ArrayList=function(f){function s(){f.call(this),this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.ensureCapacity=function(){},s.prototype.interfaces_=function(){return[f,Collection]},s.prototype.add=function(_){return arguments.length===1?this.array_.push(_):this.array_.splice(arguments[0],arguments[1]),!0},s.prototype.clear=function(){this.array_=[]},s.prototype.addAll=function(_){for(var S=this,T=_.iterator();T.hasNext();)S.add(T.next());return!0},s.prototype.set=function(_,S){var T=this.array_[_];return this.array_[_]=S,T},s.prototype.iterator=function(){return new Iterator_(this)},s.prototype.get=function(_){if(_<0||_>=this.size())throw new IndexOutOfBoundsException;return this.array_[_]},s.prototype.isEmpty=function(){return this.array_.length===0},s.prototype.size=function(){return this.array_.length},s.prototype.toArray=function(){for(var _=this,S=[],T=0,F=this.array_.length;T<F;T++)S.push(_.array_[T]);return S},s.prototype.remove=function(_){for(var S=this,T=!1,F=0,M=this.array_.length;F<M;F++)if(S.array_[F]===_){S.array_.splice(F,1),T=!0;break}return T},s}(List),Iterator_=function(f){function s(d){f.call(this),this.arrayList_=d,this.position_=0}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new NoSuchElementException;return this.arrayList_.get(this.position_++)},s.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},s.prototype.set=function(_){return this.arrayList_.set(this.position_-1,_)},s.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},s}(Iterator$1),CoordinateList=function(f){function s(){if(f.call(this),arguments.length!==0){if(arguments.length===1){var _=arguments[0];this.ensureCapacity(_.length),this.add(_,!0)}else if(arguments.length===2){var S=arguments[0],T=arguments[1];this.ensureCapacity(S.length),this.add(S,T)}}}f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s;var d={coordArrayType:{configurable:!0}};return d.coordArrayType.get=function(){return new Array(0).fill(null)},s.prototype.getCoordinate=function(S){return this.get(S)},s.prototype.addAll=function(){var S=this;if(arguments.length===2){for(var T=arguments[0],F=arguments[1],M=!1,P=T.iterator();P.hasNext();)S.add(P.next(),F),M=!0;return M}else return f.prototype.addAll.apply(this,arguments)},s.prototype.clone=function(){for(var S=this,T=f.prototype.clone.call(this),F=0;F<this.size();F++)T.add(F,S.get(F).copy());return T},s.prototype.toCoordinateArray=function(){return this.toArray(s.coordArrayType)},s.prototype.add=function(){var S=this;if(arguments.length===1){var T=arguments[0];f.prototype.add.call(this,T)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var F=arguments[0],M=arguments[1];return this.add(F,M,!0),!0}else if(arguments[0]instanceof Coordinate&&typeof arguments[1]=="boolean"){var P=arguments[0],H=arguments[1];if(!H&&this.size()>=1){var J=this.get(this.size()-1);if(J.equals2D(P))return null}f.prototype.add.call(this,P)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var K=arguments[0],z=arguments[1];return this.add(K,z),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var oe=arguments[0],se=arguments[1],ae=arguments[2];if(ae)for(var ge=0;ge<oe.length;ge++)S.add(oe[ge],se);else for(var pe=oe.length-1;pe>=0;pe--)S.add(oe[pe],se);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Coordinate){var he=arguments[0],ve=arguments[1],be=arguments[2];if(!be){var Re=this.size();if(Re>0){if(he>0){var Fe=this.get(he-1);if(Fe.equals2D(ve))return null}if(he<Re){var ye=this.get(he);if(ye.equals2D(ve))return null}}}f.prototype.add.call(this,he,ve)}}else if(arguments.length===4){var Ue=arguments[0],It=arguments[1],St=arguments[2],At=arguments[3],xt=1;St>At&&(xt=-1);for(var Ct=St;Ct!==At;Ct+=xt)S.add(Ue[Ct],It);return!0}},s.prototype.closeRing=function(){this.size()>0&&this.add(new Coordinate(this.get(0)),!1)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},Object.defineProperties(s,d),s}(ArrayList),CoordinateArrays=function f(){},staticAccessors$13={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};staticAccessors$13.ForwardComparator.get=function(){return ForwardComparator};staticAccessors$13.BidirectionalComparator.get=function(){return BidirectionalComparator};staticAccessors$13.coordArrayType.get=function(){return new Array(0).fill(null)};CoordinateArrays.prototype.interfaces_=function f(){return[]};CoordinateArrays.prototype.getClass=function f(){return CoordinateArrays};CoordinateArrays.isRing=function f(s){return!(s.length<4||!s[0].equals2D(s[s.length-1]))};CoordinateArrays.ptNotInList=function f(s,d){for(var _=0;_<s.length;_++){var S=s[_];if(CoordinateArrays.indexOf(S,d)<0)return S}return null};CoordinateArrays.scroll=function f(s,d){var _=CoordinateArrays.indexOf(d,s);if(_<0)return null;var S=new Array(s.length).fill(null);System.arraycopy(s,_,S,0,s.length-_),System.arraycopy(s,0,S,s.length-_,_),System.arraycopy(S,0,s,0,s.length)};CoordinateArrays.equals=function f(){if(arguments.length===2){var s=arguments[0],d=arguments[1];if(s===d)return!0;if(s===null||d===null||s.length!==d.length)return!1;for(var _=0;_<s.length;_++)if(!s[_].equals(d[_]))return!1;return!0}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2];if(S===T)return!0;if(S===null||T===null||S.length!==T.length)return!1;for(var M=0;M<S.length;M++)if(F.compare(S[M],T[M])!==0)return!1;return!0}};CoordinateArrays.intersection=function f(s,d){for(var _=new CoordinateList,S=0;S<s.length;S++)d.intersects(s[S])&&_.add(s[S],!0);return _.toCoordinateArray()};CoordinateArrays.hasRepeatedPoints=function f(s){for(var d=1;d<s.length;d++)if(s[d-1].equals(s[d]))return!0;return!1};CoordinateArrays.removeRepeatedPoints=function f(s){if(!CoordinateArrays.hasRepeatedPoints(s))return s;var d=new CoordinateList(s,!1);return d.toCoordinateArray()};CoordinateArrays.reverse=function f(s){for(var d=s.length-1,_=Math.trunc(d/2),S=0;S<=_;S++){var T=s[S];s[S]=s[d-S],s[d-S]=T}};CoordinateArrays.removeNull=function f(s){for(var d=0,_=0;_<s.length;_++)s[_]!==null&&d++;var S=new Array(d).fill(null);if(d===0)return S;for(var T=0,F=0;F<s.length;F++)s[F]!==null&&(S[T++]=s[F]);return S};CoordinateArrays.copyDeep=function f(){if(arguments.length===1){for(var s=arguments[0],d=new Array(s.length).fill(null),_=0;_<s.length;_++)d[_]=new Coordinate(s[_]);return d}else if(arguments.length===5)for(var S=arguments[0],T=arguments[1],F=arguments[2],M=arguments[3],P=arguments[4],H=0;H<P;H++)F[M+H]=new Coordinate(S[T+H])};CoordinateArrays.isEqualReversed=function f(s,d){for(var _=0;_<s.length;_++){var S=s[_],T=d[s.length-_-1];if(S.compareTo(T)!==0)return!1}return!0};CoordinateArrays.envelope=function f(s){for(var d=new Envelope,_=0;_<s.length;_++)d.expandToInclude(s[_]);return d};CoordinateArrays.toCoordinateArray=function f(s){return s.toArray(CoordinateArrays.coordArrayType)};CoordinateArrays.atLeastNCoordinatesOrNothing=function f(s,d){return d.length>=s?d:[]};CoordinateArrays.indexOf=function f(s,d){for(var _=0;_<d.length;_++)if(s.equals(d[_]))return _;return-1};CoordinateArrays.increasingDirection=function f(s){for(var d=0;d<Math.trunc(s.length/2);d++){var _=s.length-1-d,S=s[d].compareTo(s[_]);if(S!==0)return S}return 1};CoordinateArrays.compare=function f(s,d){for(var _=0;_<s.length&&_<d.length;){var S=s[_].compareTo(d[_]);if(S!==0)return S;_++}return _<d.length?-1:_<s.length?1:0};CoordinateArrays.minCoordinate=function f(s){for(var d=null,_=0;_<s.length;_++)(d===null||d.compareTo(s[_])>0)&&(d=s[_]);return d};CoordinateArrays.extract=function f(s,d,_){d=MathUtil.clamp(d,0,s.length),_=MathUtil.clamp(_,-1,s.length);var S=_-d+1;_<0&&(S=0),d>=s.length&&(S=0),_<d&&(S=0);var T=new Array(S).fill(null);if(S===0)return T;for(var F=0,M=d;M<=_;M++)T[F++]=s[M];return T};Object.defineProperties(CoordinateArrays,staticAccessors$13);var ForwardComparator=function f(){};ForwardComparator.prototype.compare=function f(s,d){var _=s,S=d;return CoordinateArrays.compare(_,S)};ForwardComparator.prototype.interfaces_=function f(){return[Comparator]};ForwardComparator.prototype.getClass=function f(){return ForwardComparator};var BidirectionalComparator=function f(){};BidirectionalComparator.prototype.compare=function f(s,d){var _=s,S=d;if(_.length<S.length)return-1;if(_.length>S.length)return 1;if(_.length===0)return 0;var T=CoordinateArrays.compare(_,S),F=CoordinateArrays.isEqualReversed(_,S);return F?0:T};BidirectionalComparator.prototype.OLDcompare=function f(s,d){var _=s,S=d;if(_.length<S.length)return-1;if(_.length>S.length)return 1;if(_.length===0)return 0;for(var T=CoordinateArrays.increasingDirection(_),F=CoordinateArrays.increasingDirection(S),M=T>0?0:_.length-1,P=F>0?0:_.length-1,H=0;H<_.length;H++){var J=_[M].compareTo(S[P]);if(J!==0)return J;M+=T,P+=F}return 0};BidirectionalComparator.prototype.interfaces_=function f(){return[Comparator]};BidirectionalComparator.prototype.getClass=function f(){return BidirectionalComparator};var Map$1$1=function f(){};Map$1$1.prototype.get=function f(){};Map$1$1.prototype.put=function f(){};Map$1$1.prototype.size=function f(){};Map$1$1.prototype.values=function f(){};Map$1$1.prototype.entrySet=function f(){};var SortedMap=function(f){function s(){f.apply(this,arguments)}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s}(Map$1$1);function OperationNotSupported(f){this.message=f||""}OperationNotSupported.prototype=new Error;OperationNotSupported.prototype.name="OperationNotSupported";function Set$1(){}Set$1.prototype=new Collection;Set$1.prototype.contains=function(){};var HashSet=function(f){function s(){f.call(this),this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.contains=function(_){for(var S=this,T=0,F=this.array_.length;T<F;T++){var M=S.array_[T];if(M===_)return!0}return!1},s.prototype.add=function(_){return this.contains(_)?!1:(this.array_.push(_),!0)},s.prototype.addAll=function(_){for(var S=this,T=_.iterator();T.hasNext();)S.add(T.next());return!0},s.prototype.remove=function(_){throw new Error},s.prototype.size=function(){return this.array_.length},s.prototype.isEmpty=function(){return this.array_.length===0},s.prototype.toArray=function(){for(var _=this,S=[],T=0,F=this.array_.length;T<F;T++)S.push(_.array_[T]);return S},s.prototype.iterator=function(){return new Iterator_$1(this)},s}(Set$1),Iterator_$1=function(f){function s(d){f.call(this),this.hashSet_=d,this.position_=0}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new NoSuchElementException;return this.hashSet_.array_[this.position_++]},s.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},s.prototype.remove=function(){throw new OperationNotSupported},s}(Iterator$1),BLACK=0,RED=1;function colorOf(f){return f===null?BLACK:f.color}function parentOf(f){return f===null?null:f.parent}function setColor(f,s){f!==null&&(f.color=s)}function leftOf(f){return f===null?null:f.left}function rightOf(f){return f===null?null:f.right}function TreeMap(){this.root_=null,this.size_=0}TreeMap.prototype=new SortedMap;TreeMap.prototype.get=function(f){for(var s=this.root_;s!==null;){var d=f.compareTo(s.key);if(d<0)s=s.left;else if(d>0)s=s.right;else return s.value}return null};TreeMap.prototype.put=function(f,s){if(this.root_===null)return this.root_={key:f,value:s,left:null,right:null,parent:null,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var d=this.root_,_,S;do if(_=d,S=f.compareTo(d.key),S<0)d=d.left;else if(S>0)d=d.right;else{var T=d.value;return d.value=s,T}while(d!==null);var F={key:f,left:null,right:null,value:s,parent:_,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}};return S<0?_.left=F:_.right=F,this.fixAfterInsertion(F),this.size_++,null};TreeMap.prototype.fixAfterInsertion=function(f){var s=this;for(f.color=RED;f!=null&&f!==this.root_&&f.parent.color===RED;)if(parentOf(f)===leftOf(parentOf(parentOf(f)))){var d=rightOf(parentOf(parentOf(f)));colorOf(d)===RED?(setColor(parentOf(f),BLACK),setColor(d,BLACK),setColor(parentOf(parentOf(f)),RED),f=parentOf(parentOf(f))):(f===rightOf(parentOf(f))&&(f=parentOf(f),s.rotateLeft(f)),setColor(parentOf(f),BLACK),setColor(parentOf(parentOf(f)),RED),s.rotateRight(parentOf(parentOf(f))))}else{var _=leftOf(parentOf(parentOf(f)));colorOf(_)===RED?(setColor(parentOf(f),BLACK),setColor(_,BLACK),setColor(parentOf(parentOf(f)),RED),f=parentOf(parentOf(f))):(f===leftOf(parentOf(f))&&(f=parentOf(f),s.rotateRight(f)),setColor(parentOf(f),BLACK),setColor(parentOf(parentOf(f)),RED),s.rotateLeft(parentOf(parentOf(f))))}this.root_.color=BLACK};TreeMap.prototype.values=function(){var f=new ArrayList,s=this.getFirstEntry();if(s!==null)for(f.add(s.value);(s=TreeMap.successor(s))!==null;)f.add(s.value);return f};TreeMap.prototype.entrySet=function(){var f=new HashSet,s=this.getFirstEntry();if(s!==null)for(f.add(s);(s=TreeMap.successor(s))!==null;)f.add(s);return f};TreeMap.prototype.rotateLeft=function(f){if(f!=null){var s=f.right;f.right=s.left,s.left!=null&&(s.left.parent=f),s.parent=f.parent,f.parent===null?this.root_=s:f.parent.left===f?f.parent.left=s:f.parent.right=s,s.left=f,f.parent=s}};TreeMap.prototype.rotateRight=function(f){if(f!=null){var s=f.left;f.left=s.right,s.right!=null&&(s.right.parent=f),s.parent=f.parent,f.parent===null?this.root_=s:f.parent.right===f?f.parent.right=s:f.parent.left=s,s.right=f,f.parent=s}};TreeMap.prototype.getFirstEntry=function(){var f=this.root_;if(f!=null)for(;f.left!=null;)f=f.left;return f};TreeMap.successor=function(f){if(f===null)return null;if(f.right!==null){for(var s=f.right;s.left!==null;)s=s.left;return s}else{for(var d=f.parent,_=f;d!==null&&_===d.right;)_=d,d=d.parent;return d}};TreeMap.prototype.size=function(){return this.size_};var Lineal=function f(){};Lineal.prototype.interfaces_=function f(){return[]};Lineal.prototype.getClass=function f(){return Lineal};function SortedSet(){}SortedSet.prototype=new Set$1;function TreeSet(){this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}TreeSet.prototype=new SortedSet;TreeSet.prototype.contains=function(f){for(var s=this,d=0,_=this.array_.length;d<_;d++){var S=s.array_[d];if(S.compareTo(f)===0)return!0}return!1};TreeSet.prototype.add=function(f){var s=this;if(this.contains(f))return!1;for(var d=0,_=this.array_.length;d<_;d++){var S=s.array_[d];if(S.compareTo(f)===1)return s.array_.splice(d,0,f),!0}return this.array_.push(f),!0};TreeSet.prototype.addAll=function(f){for(var s=this,d=f.iterator();d.hasNext();)s.add(d.next());return!0};TreeSet.prototype.remove=function(f){throw new OperationNotSupported};TreeSet.prototype.size=function(){return this.array_.length};TreeSet.prototype.isEmpty=function(){return this.array_.length===0};TreeSet.prototype.toArray=function(){for(var f=this,s=[],d=0,_=this.array_.length;d<_;d++)s.push(f.array_[d]);return s};TreeSet.prototype.iterator=function(){return new Iterator_$2(this)};var Iterator_$2=function(f){this.treeSet_=f,this.position_=0};Iterator_$2.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new NoSuchElementException;return this.treeSet_.array_[this.position_++]};Iterator_$2.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};Iterator_$2.prototype.remove=function(){throw new OperationNotSupported};var Arrays=function f(){};Arrays.sort=function f(){var s=arguments[0],d,_,S,T;if(arguments.length===1)T=function(M,P){return M.compareTo(P)},s.sort(T);else if(arguments.length===2)S=arguments[1],T=function(M,P){return S.compare(M,P)},s.sort(T);else if(arguments.length===3){_=s.slice(arguments[1],arguments[2]),_.sort();var F=s.slice(0,arguments[1]).concat(_,s.slice(arguments[2],s.length));for(s.splice(0,s.length),d=0;d<F.length;d++)s.push(F[d])}else if(arguments.length===4)for(_=s.slice(arguments[1],arguments[2]),S=arguments[3],T=function(M,P){return S.compare(M,P)},_.sort(T),F=s.slice(0,arguments[1]).concat(_,s.slice(arguments[2],s.length)),s.splice(0,s.length),d=0;d<F.length;d++)s.push(F[d])};Arrays.asList=function f(s){for(var d=new ArrayList,_=0,S=s.length;_<S;_++)d.add(s[_]);return d};var Dimension=function f(){},staticAccessors$14={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};staticAccessors$14.P.get=function(){return 0};staticAccessors$14.L.get=function(){return 1};staticAccessors$14.A.get=function(){return 2};staticAccessors$14.FALSE.get=function(){return-1};staticAccessors$14.TRUE.get=function(){return-2};staticAccessors$14.DONTCARE.get=function(){return-3};staticAccessors$14.SYM_FALSE.get=function(){return"F"};staticAccessors$14.SYM_TRUE.get=function(){return"T"};staticAccessors$14.SYM_DONTCARE.get=function(){return"*"};staticAccessors$14.SYM_P.get=function(){return"0"};staticAccessors$14.SYM_L.get=function(){return"1"};staticAccessors$14.SYM_A.get=function(){return"2"};Dimension.prototype.interfaces_=function f(){return[]};Dimension.prototype.getClass=function f(){return Dimension};Dimension.toDimensionSymbol=function f(s){switch(s){case Dimension.FALSE:return Dimension.SYM_FALSE;case Dimension.TRUE:return Dimension.SYM_TRUE;case Dimension.DONTCARE:return Dimension.SYM_DONTCARE;case Dimension.P:return Dimension.SYM_P;case Dimension.L:return Dimension.SYM_L;case Dimension.A:return Dimension.SYM_A}throw new IllegalArgumentException("Unknown dimension value: "+s)};Dimension.toDimensionValue=function f(s){switch(Character.toUpperCase(s)){case Dimension.SYM_FALSE:return Dimension.FALSE;case Dimension.SYM_TRUE:return Dimension.TRUE;case Dimension.SYM_DONTCARE:return Dimension.DONTCARE;case Dimension.SYM_P:return Dimension.P;case Dimension.SYM_L:return Dimension.L;case Dimension.SYM_A:return Dimension.A}throw new IllegalArgumentException("Unknown dimension symbol: "+s)};Object.defineProperties(Dimension,staticAccessors$14);var GeometryFilter=function f(){};GeometryFilter.prototype.filter=function f(s){};GeometryFilter.prototype.interfaces_=function f(){return[]};GeometryFilter.prototype.getClass=function f(){return GeometryFilter};var CoordinateSequenceFilter=function f(){};CoordinateSequenceFilter.prototype.filter=function f(s,d){};CoordinateSequenceFilter.prototype.isDone=function f(){};CoordinateSequenceFilter.prototype.isGeometryChanged=function f(){};CoordinateSequenceFilter.prototype.interfaces_=function f(){return[]};CoordinateSequenceFilter.prototype.getClass=function f(){return CoordinateSequenceFilter};var GeometryCollection=function(f){function s(_,S){if(f.call(this,S),this._geometries=_||[],f.hasNullElements(this._geometries))throw new IllegalArgumentException("geometries must not contain null elements")}f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s;var d={serialVersionUID:{configurable:!0}};return s.prototype.computeEnvelopeInternal=function(){for(var S=this,T=new Envelope,F=0;F<this._geometries.length;F++)T.expandToInclude(S._geometries[F].getEnvelopeInternal());return T},s.prototype.getGeometryN=function(S){return this._geometries[S]},s.prototype.getSortIndex=function(){return f.SORTINDEX_GEOMETRYCOLLECTION},s.prototype.getCoordinates=function(){for(var S=this,T=new Array(this.getNumPoints()).fill(null),F=-1,M=0;M<this._geometries.length;M++)for(var P=S._geometries[M].getCoordinates(),H=0;H<P.length;H++)F++,T[F]=P[H];return T},s.prototype.getArea=function(){for(var S=this,T=0,F=0;F<this._geometries.length;F++)T+=S._geometries[F].getArea();return T},s.prototype.equalsExact=function(){var S=this;if(arguments.length===2){var T=arguments[0],F=arguments[1];if(!this.isEquivalentClass(T))return!1;var M=T;if(this._geometries.length!==M._geometries.length)return!1;for(var P=0;P<this._geometries.length;P++)if(!S._geometries[P].equalsExact(M._geometries[P],F))return!1;return!0}else return f.prototype.equalsExact.apply(this,arguments)},s.prototype.normalize=function(){for(var S=this,T=0;T<this._geometries.length;T++)S._geometries[T].normalize();Arrays.sort(this._geometries)},s.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},s.prototype.getBoundaryDimension=function(){for(var S=this,T=Dimension.FALSE,F=0;F<this._geometries.length;F++)T=Math.max(T,S._geometries[F].getBoundaryDimension());return T},s.prototype.getDimension=function(){for(var S=this,T=Dimension.FALSE,F=0;F<this._geometries.length;F++)T=Math.max(T,S._geometries[F].getDimension());return T},s.prototype.getLength=function(){for(var S=this,T=0,F=0;F<this._geometries.length;F++)T+=S._geometries[F].getLength();return T},s.prototype.getNumPoints=function(){for(var S=this,T=0,F=0;F<this._geometries.length;F++)T+=S._geometries[F].getNumPoints();return T},s.prototype.getNumGeometries=function(){return this._geometries.length},s.prototype.reverse=function(){for(var S=this,T=this._geometries.length,F=new Array(T).fill(null),M=0;M<this._geometries.length;M++)F[M]=S._geometries[M].reverse();return this.getFactory().createGeometryCollection(F)},s.prototype.compareToSameClass=function(){var S=this;if(arguments.length===1){var T=arguments[0],F=new TreeSet(Arrays.asList(this._geometries)),M=new TreeSet(Arrays.asList(T._geometries));return this.compare(F,M)}else if(arguments.length===2){for(var P=arguments[0],H=arguments[1],J=P,K=this.getNumGeometries(),z=J.getNumGeometries(),oe=0;oe<K&&oe<z;){var se=S.getGeometryN(oe),ae=J.getGeometryN(oe),ge=se.compareToSameClass(ae,H);if(ge!==0)return ge;oe++}return oe<K?1:oe<z?-1:0}},s.prototype.apply=function(){var S=this;if(hasInterface(arguments[0],CoordinateFilter))for(var T=arguments[0],F=0;F<this._geometries.length;F++)S._geometries[F].apply(T);else if(hasInterface(arguments[0],CoordinateSequenceFilter)){var M=arguments[0];if(this._geometries.length===0)return null;for(var P=0;P<this._geometries.length&&(S._geometries[P].apply(M),!M.isDone());P++);M.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(arguments[0],GeometryFilter)){var H=arguments[0];H.filter(this);for(var J=0;J<this._geometries.length;J++)S._geometries[J].apply(H)}else if(hasInterface(arguments[0],GeometryComponentFilter)){var K=arguments[0];K.filter(this);for(var z=0;z<this._geometries.length;z++)S._geometries[z].apply(K)}},s.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Assert.shouldNeverReachHere(),null},s.prototype.clone=function(){var S=this,T=f.prototype.clone.call(this);T._geometries=new Array(this._geometries.length).fill(null);for(var F=0;F<this._geometries.length;F++)T._geometries[F]=S._geometries[F].clone();return T},s.prototype.getGeometryType=function(){return"GeometryCollection"},s.prototype.copy=function(){for(var S=this,T=new Array(this._geometries.length).fill(null),F=0;F<T.length;F++)T[F]=S._geometries[F].copy();return new s(T,this._factory)},s.prototype.isEmpty=function(){for(var S=this,T=0;T<this._geometries.length;T++)if(!S._geometries[T].isEmpty())return!1;return!0},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},d.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(s,d),s}(Geometry),MultiLineString=function(f){function s(){f.apply(this,arguments)}f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s;var d={serialVersionUID:{configurable:!0}};return s.prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTILINESTRING},s.prototype.equalsExact=function(){if(arguments.length===2){var S=arguments[0],T=arguments[1];return this.isEquivalentClass(S)?f.prototype.equalsExact.call(this,S,T):!1}else return f.prototype.equalsExact.apply(this,arguments)},s.prototype.getBoundaryDimension=function(){return this.isClosed()?Dimension.FALSE:0},s.prototype.isClosed=function(){var S=this;if(this.isEmpty())return!1;for(var T=0;T<this._geometries.length;T++)if(!S._geometries[T].isClosed())return!1;return!0},s.prototype.getDimension=function(){return 1},s.prototype.reverse=function(){for(var S=this,T=this._geometries.length,F=new Array(T).fill(null),M=0;M<this._geometries.length;M++)F[T-1-M]=S._geometries[M].reverse();return this.getFactory().createMultiLineString(F)},s.prototype.getBoundary=function(){return new BoundaryOp(this).getBoundary()},s.prototype.getGeometryType=function(){return"MultiLineString"},s.prototype.copy=function(){for(var S=this,T=new Array(this._geometries.length).fill(null),F=0;F<T.length;F++)T[F]=S._geometries[F].copy();return new s(T,this._factory)},s.prototype.interfaces_=function(){return[Lineal]},s.prototype.getClass=function(){return s},d.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(s,d),s}(GeometryCollection),BoundaryOp=function f(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var s=arguments[0],d=BoundaryNodeRule.MOD2_BOUNDARY_RULE;this._geom=s,this._geomFact=s.getFactory(),this._bnRule=d}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this._geom=_,this._geomFact=_.getFactory(),this._bnRule=S}};BoundaryOp.prototype.boundaryMultiLineString=function f(s){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var d=this.computeBoundaryCoordinates(s);return d.length===1?this._geomFact.createPoint(d[0]):this._geomFact.createMultiPointFromCoords(d)};BoundaryOp.prototype.getBoundary=function f(){return this._geom instanceof LineString?this.boundaryLineString(this._geom):this._geom instanceof MultiLineString?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};BoundaryOp.prototype.boundaryLineString=function f(s){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(s.isClosed()){var d=this._bnRule.isInBoundary(2);return d?s.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([s.getStartPoint(),s.getEndPoint()])};BoundaryOp.prototype.getEmptyMultiPoint=function f(){return this._geomFact.createMultiPoint()};BoundaryOp.prototype.computeBoundaryCoordinates=function f(s){var d=this,_=new ArrayList;this._endpointMap=new TreeMap;for(var S=0;S<s.getNumGeometries();S++){var T=s.getGeometryN(S);T.getNumPoints()!==0&&(d.addEndpoint(T.getCoordinateN(0)),d.addEndpoint(T.getCoordinateN(T.getNumPoints()-1)))}for(var F=this._endpointMap.entrySet().iterator();F.hasNext();){var M=F.next(),P=M.getValue(),H=P.count;d._bnRule.isInBoundary(H)&&_.add(M.getKey())}return CoordinateArrays.toCoordinateArray(_)};BoundaryOp.prototype.addEndpoint=function f(s){var d=this._endpointMap.get(s);d===null&&(d=new Counter,this._endpointMap.put(s,d)),d.count++};BoundaryOp.prototype.interfaces_=function f(){return[]};BoundaryOp.prototype.getClass=function f(){return BoundaryOp};BoundaryOp.getBoundary=function f(){if(arguments.length===1){var s=arguments[0],d=new BoundaryOp(s);return d.getBoundary()}else if(arguments.length===2){var _=arguments[0],S=arguments[1],T=new BoundaryOp(_,S);return T.getBoundary()}};var Counter=function f(){this.count=null};Counter.prototype.interfaces_=function f(){return[]};Counter.prototype.getClass=function f(){return Counter};function PrintStream(){}function StringReader(){}var DecimalFormat=function f(){};function ByteArrayOutputStream(){}function IOException(){}function LineNumberReader(){}var StringUtil=function f(){},staticAccessors$15={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};StringUtil.prototype.interfaces_=function f(){return[]};StringUtil.prototype.getClass=function f(){return StringUtil};StringUtil.chars=function f(s,d){for(var _=new Array(d).fill(null),S=0;S<d;S++)_[S]=s;return String(_)};StringUtil.getStackTrace=function f(){if(arguments.length===1){var s=arguments[0],d=new ByteArrayOutputStream,_=new PrintStream;return s.printStackTrace(_),d.toString()}else if(arguments.length===2){var S=arguments[0],T=arguments[1],F="";new StringReader(StringUtil.getStackTrace(S));for(var M=new LineNumberReader,P=0;P<T;P++)try{F+=M.readLine()+StringUtil.NEWLINE}catch(H){if(H instanceof IOException)Assert.shouldNeverReachHere();else throw H}finally{}return F}};StringUtil.split=function f(s,d){for(var _=d.length,S=new ArrayList,T=""+s,F=T.indexOf(d);F>=0;){var M=T.substring(0,F);S.add(M),T=T.substring(F+_),F=T.indexOf(d)}T.length>0&&S.add(T);for(var P=new Array(S.size()).fill(null),H=0;H<P.length;H++)P[H]=S.get(H);return P};StringUtil.toString=function f(){if(arguments.length===1){var s=arguments[0];return StringUtil.SIMPLE_ORDINATE_FORMAT.format(s)}};StringUtil.spaces=function f(s){return StringUtil.chars(" ",s)};staticAccessors$15.NEWLINE.get=function(){return System.getProperty("line.separator")};staticAccessors$15.SIMPLE_ORDINATE_FORMAT.get=function(){return new DecimalFormat};Object.defineProperties(StringUtil,staticAccessors$15);var CoordinateSequences=function f(){};CoordinateSequences.prototype.interfaces_=function f(){return[]};CoordinateSequences.prototype.getClass=function f(){return CoordinateSequences};CoordinateSequences.copyCoord=function f(s,d,_,S){for(var T=Math.min(s.getDimension(),_.getDimension()),F=0;F<T;F++)_.setOrdinate(S,F,s.getOrdinate(d,F))};CoordinateSequences.isRing=function f(s){var d=s.size();return d===0?!0:d<=3?!1:s.getOrdinate(0,CoordinateSequence.X)===s.getOrdinate(d-1,CoordinateSequence.X)&&s.getOrdinate(0,CoordinateSequence.Y)===s.getOrdinate(d-1,CoordinateSequence.Y)};CoordinateSequences.isEqual=function f(s,d){var _=s.size(),S=d.size();if(_!==S)return!1;for(var T=Math.min(s.getDimension(),d.getDimension()),F=0;F<_;F++)for(var M=0;M<T;M++){var P=s.getOrdinate(F,M),H=d.getOrdinate(F,M);if(s.getOrdinate(F,M)!==d.getOrdinate(F,M)&&!(Double.isNaN(P)&&Double.isNaN(H)))return!1}return!0};CoordinateSequences.extend=function f(s,d,_){var S=s.create(_,d.getDimension()),T=d.size();if(CoordinateSequences.copy(d,0,S,0,T),T>0)for(var F=T;F<_;F++)CoordinateSequences.copy(d,T-1,S,F,1);return S};CoordinateSequences.reverse=function f(s){for(var d=s.size()-1,_=Math.trunc(d/2),S=0;S<=_;S++)CoordinateSequences.swap(s,S,d-S)};CoordinateSequences.swap=function f(s,d,_){if(d===_)return null;for(var S=0;S<s.getDimension();S++){var T=s.getOrdinate(d,S);s.setOrdinate(d,S,s.getOrdinate(_,S)),s.setOrdinate(_,S,T)}};CoordinateSequences.copy=function f(s,d,_,S,T){for(var F=0;F<T;F++)CoordinateSequences.copyCoord(s,d+F,_,S+F)};CoordinateSequences.toString=function f(){if(arguments.length===1){var s=arguments[0],d=s.size();if(d===0)return"()";var _=s.getDimension(),S=new StringBuffer;S.append("(");for(var T=0;T<d;T++){T>0&&S.append(" ");for(var F=0;F<_;F++)F>0&&S.append(","),S.append(StringUtil.toString(s.getOrdinate(T,F)))}return S.append(")"),S.toString()}};CoordinateSequences.ensureValidRing=function f(s,d){var _=d.size();if(_===0)return d;if(_<=3)return CoordinateSequences.createClosedRing(s,d,4);var S=d.getOrdinate(0,CoordinateSequence.X)===d.getOrdinate(_-1,CoordinateSequence.X)&&d.getOrdinate(0,CoordinateSequence.Y)===d.getOrdinate(_-1,CoordinateSequence.Y);return S?d:CoordinateSequences.createClosedRing(s,d,_+1)};CoordinateSequences.createClosedRing=function f(s,d,_){var S=s.create(_,d.getDimension()),T=d.size();CoordinateSequences.copy(d,0,S,0,T);for(var F=T;F<_;F++)CoordinateSequences.copy(d,0,S,F,1);return S};var LineString=function(f){function s(_,S){f.call(this,S),this._points=null,this.init(_)}f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s;var d={serialVersionUID:{configurable:!0}};return s.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Envelope:this._points.expandEnvelope(new Envelope)},s.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},s.prototype.getSortIndex=function(){return f.SORTINDEX_LINESTRING},s.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},s.prototype.equalsExact=function(){var S=this;if(arguments.length===2){var T=arguments[0],F=arguments[1];if(!this.isEquivalentClass(T))return!1;var M=T;if(this._points.size()!==M._points.size())return!1;for(var P=0;P<this._points.size();P++)if(!S.equal(S._points.getCoordinate(P),M._points.getCoordinate(P),F))return!1;return!0}else return f.prototype.equalsExact.apply(this,arguments)},s.prototype.normalize=function(){for(var S=this,T=0;T<Math.trunc(this._points.size()/2);T++){var F=S._points.size()-1-T;if(!S._points.getCoordinate(T).equals(S._points.getCoordinate(F)))return S._points.getCoordinate(T).compareTo(S._points.getCoordinate(F))>0&&CoordinateSequences.reverse(S._points),null}},s.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},s.prototype.getBoundaryDimension=function(){return this.isClosed()?Dimension.FALSE:0},s.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},s.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},s.prototype.getDimension=function(){return 1},s.prototype.getLength=function(){return CGAlgorithms.computeLength(this._points)},s.prototype.getNumPoints=function(){return this._points.size()},s.prototype.reverse=function(){var S=this._points.copy();CoordinateSequences.reverse(S);var T=this.getFactory().createLineString(S);return T},s.prototype.compareToSameClass=function(){var S=this;if(arguments.length===1){for(var T=arguments[0],F=T,M=0,P=0;M<this._points.size()&&P<F._points.size();){var H=S._points.getCoordinate(M).compareTo(F._points.getCoordinate(P));if(H!==0)return H;M++,P++}return M<this._points.size()?1:P<F._points.size()?-1:0}else if(arguments.length===2){var J=arguments[0],K=arguments[1],z=J;return K.compare(this._points,z._points)}},s.prototype.apply=function(){var S=this;if(hasInterface(arguments[0],CoordinateFilter))for(var T=arguments[0],F=0;F<this._points.size();F++)T.filter(S._points.getCoordinate(F));else if(hasInterface(arguments[0],CoordinateSequenceFilter)){var M=arguments[0];if(this._points.size()===0)return null;for(var P=0;P<this._points.size()&&(M.filter(S._points,P),!M.isDone());P++);M.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(arguments[0],GeometryFilter)){var H=arguments[0];H.filter(this)}else if(hasInterface(arguments[0],GeometryComponentFilter)){var J=arguments[0];J.filter(this)}},s.prototype.getBoundary=function(){return new BoundaryOp(this).getBoundary()},s.prototype.isEquivalentClass=function(S){return S instanceof s},s.prototype.clone=function(){var S=f.prototype.clone.call(this);return S._points=this._points.clone(),S},s.prototype.getCoordinateN=function(S){return this._points.getCoordinate(S)},s.prototype.getGeometryType=function(){return"LineString"},s.prototype.copy=function(){return new s(this._points.copy(),this._factory)},s.prototype.getCoordinateSequence=function(){return this._points},s.prototype.isEmpty=function(){return this._points.size()===0},s.prototype.init=function(S){if(S===null&&(S=this.getFactory().getCoordinateSequenceFactory().create([])),S.size()===1)throw new IllegalArgumentException("Invalid number of points in LineString (found "+S.size()+" - must be 0 or >= 2)");this._points=S},s.prototype.isCoordinate=function(S){for(var T=this,F=0;F<this._points.size();F++)if(T._points.getCoordinate(F).equals(S))return!0;return!1},s.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},s.prototype.getPointN=function(S){return this.getFactory().createPoint(this._points.getCoordinate(S))},s.prototype.interfaces_=function(){return[Lineal]},s.prototype.getClass=function(){return s},d.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(s,d),s}(Geometry),Puntal=function f(){};Puntal.prototype.interfaces_=function f(){return[]};Puntal.prototype.getClass=function f(){return Puntal};var Point=function(f){function s(_,S){f.call(this,S),this._coordinates=_||null,this.init(this._coordinates)}f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s;var d={serialVersionUID:{configurable:!0}};return s.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Envelope;var S=new Envelope;return S.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),S},s.prototype.getSortIndex=function(){return f.SORTINDEX_POINT},s.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},s.prototype.equalsExact=function(){if(arguments.length===2){var S=arguments[0],T=arguments[1];return this.isEquivalentClass(S)?this.isEmpty()&&S.isEmpty()?!0:this.isEmpty()!==S.isEmpty()?!1:this.equal(S.getCoordinate(),this.getCoordinate(),T):!1}else return f.prototype.equalsExact.apply(this,arguments)},s.prototype.normalize=function(){},s.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},s.prototype.getBoundaryDimension=function(){return Dimension.FALSE},s.prototype.getDimension=function(){return 0},s.prototype.getNumPoints=function(){return this.isEmpty()?0:1},s.prototype.reverse=function(){return this.copy()},s.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},s.prototype.compareToSameClass=function(){if(arguments.length===1){var S=arguments[0],T=S;return this.getCoordinate().compareTo(T.getCoordinate())}else if(arguments.length===2){var F=arguments[0],M=arguments[1],P=F;return M.compare(this._coordinates,P._coordinates)}},s.prototype.apply=function(){if(hasInterface(arguments[0],CoordinateFilter)){var S=arguments[0];if(this.isEmpty())return null;S.filter(this.getCoordinate())}else if(hasInterface(arguments[0],CoordinateSequenceFilter)){var T=arguments[0];if(this.isEmpty())return null;T.filter(this._coordinates,0),T.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(arguments[0],GeometryFilter)){var F=arguments[0];F.filter(this)}else if(hasInterface(arguments[0],GeometryComponentFilter)){var M=arguments[0];M.filter(this)}},s.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},s.prototype.clone=function(){var S=f.prototype.clone.call(this);return S._coordinates=this._coordinates.clone(),S},s.prototype.getGeometryType=function(){return"Point"},s.prototype.copy=function(){return new s(this._coordinates.copy(),this._factory)},s.prototype.getCoordinateSequence=function(){return this._coordinates},s.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},s.prototype.isEmpty=function(){return this._coordinates.size()===0},s.prototype.init=function(S){S===null&&(S=this.getFactory().getCoordinateSequenceFactory().create([])),Assert.isTrue(S.size()<=1),this._coordinates=S},s.prototype.isSimple=function(){return!0},s.prototype.interfaces_=function(){return[Puntal]},s.prototype.getClass=function(){return s},d.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(s,d),s}(Geometry),Polygonal=function f(){};Polygonal.prototype.interfaces_=function f(){return[]};Polygonal.prototype.getClass=function f(){return Polygonal};var Polygon=function(f){function s(_,S,T){if(f.call(this,T),this._shell=null,this._holes=null,_===null&&(_=this.getFactory().createLinearRing()),S===null&&(S=[]),f.hasNullElements(S))throw new IllegalArgumentException("holes must not contain null elements");if(_.isEmpty()&&f.hasNonEmptyElements(S))throw new IllegalArgumentException("shell is empty but holes are not");this._shell=_,this._holes=S}f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s;var d={serialVersionUID:{configurable:!0}};return s.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},s.prototype.getSortIndex=function(){return f.SORTINDEX_POLYGON},s.prototype.getCoordinates=function(){var S=this;if(this.isEmpty())return[];for(var T=new Array(this.getNumPoints()).fill(null),F=-1,M=this._shell.getCoordinates(),P=0;P<M.length;P++)F++,T[F]=M[P];for(var H=0;H<this._holes.length;H++)for(var J=S._holes[H].getCoordinates(),K=0;K<J.length;K++)F++,T[F]=J[K];return T},s.prototype.getArea=function(){var S=this,T=0;T+=Math.abs(CGAlgorithms.signedArea(this._shell.getCoordinateSequence()));for(var F=0;F<this._holes.length;F++)T-=Math.abs(CGAlgorithms.signedArea(S._holes[F].getCoordinateSequence()));return T},s.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var S=this._shell.getCoordinateSequence(),T=this.getEnvelopeInternal(),F=0;F<5;F++){var M=S.getX(F);if(!(M===T.getMinX()||M===T.getMaxX()))return!1;var P=S.getY(F);if(!(P===T.getMinY()||P===T.getMaxY()))return!1}for(var H=S.getX(0),J=S.getY(0),K=1;K<=4;K++){var z=S.getX(K),oe=S.getY(K),se=z!==H,ae=oe!==J;if(se===ae)return!1;H=z,J=oe}return!0},s.prototype.equalsExact=function(){var S=this;if(arguments.length===2){var T=arguments[0],F=arguments[1];if(!this.isEquivalentClass(T))return!1;var M=T,P=this._shell,H=M._shell;if(!P.equalsExact(H,F)||this._holes.length!==M._holes.length)return!1;for(var J=0;J<this._holes.length;J++)if(!S._holes[J].equalsExact(M._holes[J],F))return!1;return!0}else return f.prototype.equalsExact.apply(this,arguments)},s.prototype.normalize=function(){var S=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var T=0;T<this._holes.length;T++)S.normalize(S._holes[T],!1);Arrays.sort(this._holes)}else if(arguments.length===2){var F=arguments[0],M=arguments[1];if(F.isEmpty())return null;var P=new Array(F.getCoordinates().length-1).fill(null);System.arraycopy(F.getCoordinates(),0,P,0,P.length);var H=CoordinateArrays.minCoordinate(F.getCoordinates());CoordinateArrays.scroll(P,H),System.arraycopy(P,0,F.getCoordinates(),0,P.length),F.getCoordinates()[P.length]=P[0],CGAlgorithms.isCCW(F.getCoordinates())===M&&CoordinateArrays.reverse(F.getCoordinates())}},s.prototype.getCoordinate=function(){return this._shell.getCoordinate()},s.prototype.getNumInteriorRing=function(){return this._holes.length},s.prototype.getBoundaryDimension=function(){return 1},s.prototype.getDimension=function(){return 2},s.prototype.getLength=function(){var S=this,T=0;T+=this._shell.getLength();for(var F=0;F<this._holes.length;F++)T+=S._holes[F].getLength();return T},s.prototype.getNumPoints=function(){for(var S=this,T=this._shell.getNumPoints(),F=0;F<this._holes.length;F++)T+=S._holes[F].getNumPoints();return T},s.prototype.reverse=function(){var S=this,T=this.copy();T._shell=this._shell.copy().reverse(),T._holes=new Array(this._holes.length).fill(null);for(var F=0;F<this._holes.length;F++)T._holes[F]=S._holes[F].copy().reverse();return T},s.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},s.prototype.compareToSameClass=function(){var S=this;if(arguments.length===1){var T=arguments[0],F=this._shell,M=T._shell;return F.compareToSameClass(M)}else if(arguments.length===2){var P=arguments[0],H=arguments[1],J=P,K=this._shell,z=J._shell,oe=K.compareToSameClass(z,H);if(oe!==0)return oe;for(var se=this.getNumInteriorRing(),ae=J.getNumInteriorRing(),ge=0;ge<se&&ge<ae;){var pe=S.getInteriorRingN(ge),he=J.getInteriorRingN(ge),ve=pe.compareToSameClass(he,H);if(ve!==0)return ve;ge++}return ge<se?1:ge<ae?-1:0}},s.prototype.apply=function(S){var T=this;if(hasInterface(S,CoordinateFilter)){this._shell.apply(S);for(var F=0;F<this._holes.length;F++)T._holes[F].apply(S)}else if(hasInterface(S,CoordinateSequenceFilter)){if(this._shell.apply(S),!S.isDone())for(var M=0;M<this._holes.length&&(T._holes[M].apply(S),!S.isDone());M++);S.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(S,GeometryFilter))S.filter(this);else if(hasInterface(S,GeometryComponentFilter)){S.filter(this),this._shell.apply(S);for(var P=0;P<this._holes.length;P++)T._holes[P].apply(S)}},s.prototype.getBoundary=function(){var S=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var T=new Array(this._holes.length+1).fill(null);T[0]=this._shell;for(var F=0;F<this._holes.length;F++)T[F+1]=S._holes[F];return T.length<=1?this.getFactory().createLinearRing(T[0].getCoordinateSequence()):this.getFactory().createMultiLineString(T)},s.prototype.clone=function(){var S=this,T=f.prototype.clone.call(this);T._shell=this._shell.clone(),T._holes=new Array(this._holes.length).fill(null);for(var F=0;F<this._holes.length;F++)T._holes[F]=S._holes[F].clone();return T},s.prototype.getGeometryType=function(){return"Polygon"},s.prototype.copy=function(){for(var S=this,T=this._shell.copy(),F=new Array(this._holes.length).fill(null),M=0;M<F.length;M++)F[M]=S._holes[M].copy();return new s(T,F,this._factory)},s.prototype.getExteriorRing=function(){return this._shell},s.prototype.isEmpty=function(){return this._shell.isEmpty()},s.prototype.getInteriorRingN=function(S){return this._holes[S]},s.prototype.interfaces_=function(){return[Polygonal]},s.prototype.getClass=function(){return s},d.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(s,d),s}(Geometry),MultiPoint=function(f){function s(){f.apply(this,arguments)}f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s;var d={serialVersionUID:{configurable:!0}};return s.prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTIPOINT},s.prototype.isValid=function(){return!0},s.prototype.equalsExact=function(){if(arguments.length===2){var S=arguments[0],T=arguments[1];return this.isEquivalentClass(S)?f.prototype.equalsExact.call(this,S,T):!1}else return f.prototype.equalsExact.apply(this,arguments)},s.prototype.getCoordinate=function(){if(arguments.length===1){var S=arguments[0];return this._geometries[S].getCoordinate()}else return f.prototype.getCoordinate.apply(this,arguments)},s.prototype.getBoundaryDimension=function(){return Dimension.FALSE},s.prototype.getDimension=function(){return 0},s.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},s.prototype.getGeometryType=function(){return"MultiPoint"},s.prototype.copy=function(){for(var S=this,T=new Array(this._geometries.length).fill(null),F=0;F<T.length;F++)T[F]=S._geometries[F].copy();return new s(T,this._factory)},s.prototype.interfaces_=function(){return[Puntal]},s.prototype.getClass=function(){return s},d.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(s,d),s}(GeometryCollection),LinearRing=function(f){function s(_,S){_ instanceof Coordinate&&S instanceof GeometryFactory&&(_=S.getCoordinateSequenceFactory().create(_)),f.call(this,_,S),this.validateConstruction()}f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s;var d={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return s.prototype.getSortIndex=function(){return Geometry.SORTINDEX_LINEARRING},s.prototype.getBoundaryDimension=function(){return Dimension.FALSE},s.prototype.isClosed=function(){return this.isEmpty()?!0:f.prototype.isClosed.call(this)},s.prototype.reverse=function(){var S=this._points.copy();CoordinateSequences.reverse(S);var T=this.getFactory().createLinearRing(S);return T},s.prototype.validateConstruction=function(){if(!this.isEmpty()&&!f.prototype.isClosed.call(this))throw new IllegalArgumentException("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<s.MINIMUM_VALID_SIZE)throw new IllegalArgumentException("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},s.prototype.getGeometryType=function(){return"LinearRing"},s.prototype.copy=function(){return new s(this._points.copy(),this._factory)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},d.MINIMUM_VALID_SIZE.get=function(){return 4},d.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(s,d),s}(LineString),MultiPolygon=function(f){function s(){f.apply(this,arguments)}f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s;var d={serialVersionUID:{configurable:!0}};return s.prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTIPOLYGON},s.prototype.equalsExact=function(){if(arguments.length===2){var S=arguments[0],T=arguments[1];return this.isEquivalentClass(S)?f.prototype.equalsExact.call(this,S,T):!1}else return f.prototype.equalsExact.apply(this,arguments)},s.prototype.getBoundaryDimension=function(){return 1},s.prototype.getDimension=function(){return 2},s.prototype.reverse=function(){for(var S=this,T=this._geometries.length,F=new Array(T).fill(null),M=0;M<this._geometries.length;M++)F[M]=S._geometries[M].reverse();return this.getFactory().createMultiPolygon(F)},s.prototype.getBoundary=function(){var S=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var T=new ArrayList,F=0;F<this._geometries.length;F++)for(var M=S._geometries[F],P=M.getBoundary(),H=0;H<P.getNumGeometries();H++)T.add(P.getGeometryN(H));var J=new Array(T.size()).fill(null);return this.getFactory().createMultiLineString(T.toArray(J))},s.prototype.getGeometryType=function(){return"MultiPolygon"},s.prototype.copy=function(){for(var S=this,T=new Array(this._geometries.length).fill(null),F=0;F<T.length;F++)T[F]=S._geometries[F].copy();return new s(T,this._factory)},s.prototype.interfaces_=function(){return[Polygonal]},s.prototype.getClass=function(){return s},d.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(s,d),s}(GeometryCollection),GeometryEditor=function f(s){this._factory=s||null,this._isUserDataCopied=!1},staticAccessors$16={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};GeometryEditor.prototype.setCopyUserData=function f(s){this._isUserDataCopied=s};GeometryEditor.prototype.edit=function f(s,d){if(s===null)return null;var _=this.editInternal(s,d);return this._isUserDataCopied&&_.setUserData(s.getUserData()),_};GeometryEditor.prototype.editInternal=function f(s,d){return this._factory===null&&(this._factory=s.getFactory()),s instanceof GeometryCollection?this.editGeometryCollection(s,d):s instanceof Polygon?this.editPolygon(s,d):s instanceof Point?d.edit(s,this._factory):s instanceof LineString?d.edit(s,this._factory):(Assert.shouldNeverReachHere("Unsupported Geometry class: "+s.getClass().getName()),null)};GeometryEditor.prototype.editGeometryCollection=function f(s,d){for(var _=this,S=d.edit(s,this._factory),T=new ArrayList,F=0;F<S.getNumGeometries();F++){var M=_.edit(S.getGeometryN(F),d);M===null||M.isEmpty()||T.add(M)}return S.getClass()===MultiPoint?this._factory.createMultiPoint(T.toArray([])):S.getClass()===MultiLineString?this._factory.createMultiLineString(T.toArray([])):S.getClass()===MultiPolygon?this._factory.createMultiPolygon(T.toArray([])):this._factory.createGeometryCollection(T.toArray([]))};GeometryEditor.prototype.editPolygon=function f(s,d){var _=this,S=d.edit(s,this._factory);if(S===null&&(S=this._factory.createPolygon(null)),S.isEmpty())return S;var T=this.edit(S.getExteriorRing(),d);if(T===null||T.isEmpty())return this._factory.createPolygon();for(var F=new ArrayList,M=0;M<S.getNumInteriorRing();M++){var P=_.edit(S.getInteriorRingN(M),d);P===null||P.isEmpty()||F.add(P)}return this._factory.createPolygon(T,F.toArray([]))};GeometryEditor.prototype.interfaces_=function f(){return[]};GeometryEditor.prototype.getClass=function f(){return GeometryEditor};GeometryEditor.GeometryEditorOperation=function f(){};staticAccessors$16.NoOpGeometryOperation.get=function(){return NoOpGeometryOperation};staticAccessors$16.CoordinateOperation.get=function(){return CoordinateOperation};staticAccessors$16.CoordinateSequenceOperation.get=function(){return CoordinateSequenceOperation};Object.defineProperties(GeometryEditor,staticAccessors$16);var NoOpGeometryOperation=function f(){};NoOpGeometryOperation.prototype.edit=function f(s,d){return s};NoOpGeometryOperation.prototype.interfaces_=function f(){return[GeometryEditor.GeometryEditorOperation]};NoOpGeometryOperation.prototype.getClass=function f(){return NoOpGeometryOperation};var CoordinateOperation=function f(){};CoordinateOperation.prototype.edit=function f(s,d){var _=this.editCoordinates(s.getCoordinates(),s);return _===null?s:s instanceof LinearRing?d.createLinearRing(_):s instanceof LineString?d.createLineString(_):s instanceof Point?_.length>0?d.createPoint(_[0]):d.createPoint():s};CoordinateOperation.prototype.interfaces_=function f(){return[GeometryEditor.GeometryEditorOperation]};CoordinateOperation.prototype.getClass=function f(){return CoordinateOperation};var CoordinateSequenceOperation=function f(){};CoordinateSequenceOperation.prototype.edit=function f(s,d){return s instanceof LinearRing?d.createLinearRing(this.edit(s.getCoordinateSequence(),s)):s instanceof LineString?d.createLineString(this.edit(s.getCoordinateSequence(),s)):s instanceof Point?d.createPoint(this.edit(s.getCoordinateSequence(),s)):s};CoordinateSequenceOperation.prototype.interfaces_=function f(){return[GeometryEditor.GeometryEditorOperation]};CoordinateSequenceOperation.prototype.getClass=function f(){return CoordinateSequenceOperation};var CoordinateArraySequence=function f(){var s=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var d=arguments[0];this._coordinates=new Array(d).fill(null);for(var _=0;_<d;_++)s._coordinates[_]=new Coordinate}else if(hasInterface(arguments[0],CoordinateSequence)){var S=arguments[0];if(S===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=S.getDimension(),this._coordinates=new Array(S.size()).fill(null);for(var T=0;T<this._coordinates.length;T++)s._coordinates[T]=S.getCoordinateCopy(T)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var F=arguments[0],M=arguments[1];this._coordinates=F,this._dimension=M,F===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var P=arguments[0],H=arguments[1];this._coordinates=new Array(P).fill(null),this._dimension=H;for(var J=0;J<P;J++)s._coordinates[J]=new Coordinate}}},staticAccessors$18={serialVersionUID:{configurable:!0}};CoordinateArraySequence.prototype.setOrdinate=function f(s,d,_){switch(d){case CoordinateSequence.X:this._coordinates[s].x=_;break;case CoordinateSequence.Y:this._coordinates[s].y=_;break;case CoordinateSequence.Z:this._coordinates[s].z=_;break;default:throw new IllegalArgumentException("invalid ordinateIndex")}};CoordinateArraySequence.prototype.size=function f(){return this._coordinates.length};CoordinateArraySequence.prototype.getOrdinate=function f(s,d){switch(d){case CoordinateSequence.X:return this._coordinates[s].x;case CoordinateSequence.Y:return this._coordinates[s].y;case CoordinateSequence.Z:return this._coordinates[s].z}return Double.NaN};CoordinateArraySequence.prototype.getCoordinate=function f(){if(arguments.length===1){var s=arguments[0];return this._coordinates[s]}else if(arguments.length===2){var d=arguments[0],_=arguments[1];_.x=this._coordinates[d].x,_.y=this._coordinates[d].y,_.z=this._coordinates[d].z}};CoordinateArraySequence.prototype.getCoordinateCopy=function f(s){return new Coordinate(this._coordinates[s])};CoordinateArraySequence.prototype.getDimension=function f(){return this._dimension};CoordinateArraySequence.prototype.getX=function f(s){return this._coordinates[s].x};CoordinateArraySequence.prototype.clone=function f(){for(var s=this,d=new Array(this.size()).fill(null),_=0;_<this._coordinates.length;_++)d[_]=s._coordinates[_].clone();return new CoordinateArraySequence(d,this._dimension)};CoordinateArraySequence.prototype.expandEnvelope=function f(s){for(var d=this,_=0;_<this._coordinates.length;_++)s.expandToInclude(d._coordinates[_]);return s};CoordinateArraySequence.prototype.copy=function f(){for(var s=this,d=new Array(this.size()).fill(null),_=0;_<this._coordinates.length;_++)d[_]=s._coordinates[_].copy();return new CoordinateArraySequence(d,this._dimension)};CoordinateArraySequence.prototype.toString=function f(){var s=this;if(this._coordinates.length>0){var d=new StringBuffer(17*this._coordinates.length);d.append("("),d.append(this._coordinates[0]);for(var _=1;_<this._coordinates.length;_++)d.append(", "),d.append(s._coordinates[_]);return d.append(")"),d.toString()}else return"()"};CoordinateArraySequence.prototype.getY=function f(s){return this._coordinates[s].y};CoordinateArraySequence.prototype.toCoordinateArray=function f(){return this._coordinates};CoordinateArraySequence.prototype.interfaces_=function f(){return[CoordinateSequence,Serializable]};CoordinateArraySequence.prototype.getClass=function f(){return CoordinateArraySequence};staticAccessors$18.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(CoordinateArraySequence,staticAccessors$18);var CoordinateArraySequenceFactory=function f(){},staticAccessors$17={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};CoordinateArraySequenceFactory.prototype.readResolve=function f(){return CoordinateArraySequenceFactory.instance()};CoordinateArraySequenceFactory.prototype.create=function f(){if(arguments.length===1){if(arguments[0]instanceof Array){var s=arguments[0];return new CoordinateArraySequence(s)}else if(hasInterface(arguments[0],CoordinateSequence)){var d=arguments[0];return new CoordinateArraySequence(d)}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];return S>3&&(S=3),S<2?new CoordinateArraySequence(_):new CoordinateArraySequence(_,S)}};CoordinateArraySequenceFactory.prototype.interfaces_=function f(){return[CoordinateSequenceFactory,Serializable]};CoordinateArraySequenceFactory.prototype.getClass=function f(){return CoordinateArraySequenceFactory};CoordinateArraySequenceFactory.instance=function f(){return CoordinateArraySequenceFactory.instanceObject};staticAccessors$17.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};staticAccessors$17.instanceObject.get=function(){return new CoordinateArraySequenceFactory};Object.defineProperties(CoordinateArraySequenceFactory,staticAccessors$17);var HashMap=function(f){function s(){f.call(this),this.map_=new Map}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.get=function(_){return this.map_.get(_)||null},s.prototype.put=function(_,S){return this.map_.set(_,S),S},s.prototype.values=function(){for(var _=new ArrayList,S=this.map_.values(),T=S.next();!T.done;)_.add(T.value),T=S.next();return _},s.prototype.entrySet=function(){var _=new HashSet;return this.map_.entries().forEach(function(S){return _.add(S)}),_},s.prototype.size=function(){return this.map_.size()},s}(Map$1$1),PrecisionModel=function f(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=f.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Type){var s=arguments[0];this._modelType=s,s===f.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var d=arguments[0];this._modelType=f.FIXED,this.setScale(d)}else if(arguments[0]instanceof f){var _=arguments[0];this._modelType=_._modelType,this._scale=_._scale}}},staticAccessors$19={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};PrecisionModel.prototype.equals=function f(s){if(!(s instanceof PrecisionModel))return!1;var d=s;return this._modelType===d._modelType&&this._scale===d._scale};PrecisionModel.prototype.compareTo=function f(s){var d=s,_=this.getMaximumSignificantDigits(),S=d.getMaximumSignificantDigits();return new Integer(_).compareTo(new Integer(S))};PrecisionModel.prototype.getScale=function f(){return this._scale};PrecisionModel.prototype.isFloating=function f(){return this._modelType===PrecisionModel.FLOATING||this._modelType===PrecisionModel.FLOATING_SINGLE};PrecisionModel.prototype.getType=function f(){return this._modelType};PrecisionModel.prototype.toString=function f(){var s="UNKNOWN";return this._modelType===PrecisionModel.FLOATING?s="Floating":this._modelType===PrecisionModel.FLOATING_SINGLE?s="Floating-Single":this._modelType===PrecisionModel.FIXED&&(s="Fixed (Scale="+this.getScale()+")"),s};PrecisionModel.prototype.makePrecise=function f(){if(typeof arguments[0]=="number"){var s=arguments[0];if(Double.isNaN(s))return s;if(this._modelType===PrecisionModel.FLOATING_SINGLE){var d=s;return d}return this._modelType===PrecisionModel.FIXED?Math.round(s*this._scale)/this._scale:s}else if(arguments[0]instanceof Coordinate){var _=arguments[0];if(this._modelType===PrecisionModel.FLOATING)return null;_.x=this.makePrecise(_.x),_.y=this.makePrecise(_.y)}};PrecisionModel.prototype.getMaximumSignificantDigits=function f(){var s=16;return this._modelType===PrecisionModel.FLOATING?s=16:this._modelType===PrecisionModel.FLOATING_SINGLE?s=6:this._modelType===PrecisionModel.FIXED&&(s=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),s};PrecisionModel.prototype.setScale=function f(s){this._scale=Math.abs(s)};PrecisionModel.prototype.interfaces_=function f(){return[Serializable,Comparable]};PrecisionModel.prototype.getClass=function f(){return PrecisionModel};PrecisionModel.mostPrecise=function f(s,d){return s.compareTo(d)>=0?s:d};staticAccessors$19.serialVersionUID.get=function(){return 7777263578777804e3};staticAccessors$19.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(PrecisionModel,staticAccessors$19);var Type=function f(s){this._name=s||null,f.nameToTypeMap.put(s,this)},staticAccessors$1$1={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Type.prototype.readResolve=function f(){return Type.nameToTypeMap.get(this._name)};Type.prototype.toString=function f(){return this._name};Type.prototype.interfaces_=function f(){return[Serializable]};Type.prototype.getClass=function f(){return Type};staticAccessors$1$1.serialVersionUID.get=function(){return-552860263173159e4};staticAccessors$1$1.nameToTypeMap.get=function(){return new HashMap};Object.defineProperties(Type,staticAccessors$1$1);PrecisionModel.Type=Type;PrecisionModel.FIXED=new Type("FIXED");PrecisionModel.FLOATING=new Type("FLOATING");PrecisionModel.FLOATING_SINGLE=new Type("FLOATING SINGLE");var GeometryFactory=function f(){this._precisionModel=new PrecisionModel,this._SRID=0,this._coordinateSequenceFactory=f.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?hasInterface(arguments[0],CoordinateSequenceFactory)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof PrecisionModel&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},staticAccessors$2={serialVersionUID:{configurable:!0}};GeometryFactory.prototype.toGeometry=function f(s){return s.isNull()?this.createPoint(null):s.getMinX()===s.getMaxX()&&s.getMinY()===s.getMaxY()?this.createPoint(new Coordinate(s.getMinX(),s.getMinY())):s.getMinX()===s.getMaxX()||s.getMinY()===s.getMaxY()?this.createLineString([new Coordinate(s.getMinX(),s.getMinY()),new Coordinate(s.getMaxX(),s.getMaxY())]):this.createPolygon(this.createLinearRing([new Coordinate(s.getMinX(),s.getMinY()),new Coordinate(s.getMinX(),s.getMaxY()),new Coordinate(s.getMaxX(),s.getMaxY()),new Coordinate(s.getMaxX(),s.getMinY()),new Coordinate(s.getMinX(),s.getMinY())]),null)};GeometryFactory.prototype.createLineString=function f(s){if(s){if(s instanceof Array)return new LineString(this.getCoordinateSequenceFactory().create(s),this);if(hasInterface(s,CoordinateSequence))return new LineString(s,this)}else return new LineString(this.getCoordinateSequenceFactory().create([]),this)};GeometryFactory.prototype.createMultiLineString=function f(){if(arguments.length===0)return new MultiLineString(null,this);if(arguments.length===1){var s=arguments[0];return new MultiLineString(s,this)}};GeometryFactory.prototype.buildGeometry=function f(s){for(var d=null,_=!1,S=!1,T=s.iterator();T.hasNext();){var F=T.next(),M=F.getClass();d===null&&(d=M),M!==d&&(_=!0),F.isGeometryCollectionOrDerived()&&(S=!0)}if(d===null)return this.createGeometryCollection();if(_||S)return this.createGeometryCollection(GeometryFactory.toGeometryArray(s));var P=s.iterator().next(),H=s.size()>1;if(H){if(P instanceof Polygon)return this.createMultiPolygon(GeometryFactory.toPolygonArray(s));if(P instanceof LineString)return this.createMultiLineString(GeometryFactory.toLineStringArray(s));if(P instanceof Point)return this.createMultiPoint(GeometryFactory.toPointArray(s));Assert.shouldNeverReachHere("Unhandled class: "+P.getClass().getName())}return P};GeometryFactory.prototype.createMultiPointFromCoords=function f(s){return this.createMultiPoint(s!==null?this.getCoordinateSequenceFactory().create(s):null)};GeometryFactory.prototype.createPoint=function f(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Coordinate){var s=arguments[0];return this.createPoint(s!==null?this.getCoordinateSequenceFactory().create([s]):null)}else if(hasInterface(arguments[0],CoordinateSequence)){var d=arguments[0];return new Point(d,this)}}};GeometryFactory.prototype.getCoordinateSequenceFactory=function f(){return this._coordinateSequenceFactory};GeometryFactory.prototype.createPolygon=function f(){if(arguments.length===0)return new Polygon(null,null,this);if(arguments.length===1){if(hasInterface(arguments[0],CoordinateSequence)){var s=arguments[0];return this.createPolygon(this.createLinearRing(s))}else if(arguments[0]instanceof Array){var d=arguments[0];return this.createPolygon(this.createLinearRing(d))}else if(arguments[0]instanceof LinearRing){var _=arguments[0];return this.createPolygon(_,null)}}else if(arguments.length===2){var S=arguments[0],T=arguments[1];return new Polygon(S,T,this)}};GeometryFactory.prototype.getSRID=function f(){return this._SRID};GeometryFactory.prototype.createGeometryCollection=function f(){if(arguments.length===0)return new GeometryCollection(null,this);if(arguments.length===1){var s=arguments[0];return new GeometryCollection(s,this)}};GeometryFactory.prototype.createGeometry=function f(s){var d=new GeometryEditor(this);return d.edit(s,{edit:function(){if(arguments.length===2){var _=arguments[0];return this._coordinateSequenceFactory.create(_)}}})};GeometryFactory.prototype.getPrecisionModel=function f(){return this._precisionModel};GeometryFactory.prototype.createLinearRing=function f(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var s=arguments[0];return this.createLinearRing(s!==null?this.getCoordinateSequenceFactory().create(s):null)}else if(hasInterface(arguments[0],CoordinateSequence)){var d=arguments[0];return new LinearRing(d,this)}}};GeometryFactory.prototype.createMultiPolygon=function f(){if(arguments.length===0)return new MultiPolygon(null,this);if(arguments.length===1){var s=arguments[0];return new MultiPolygon(s,this)}};GeometryFactory.prototype.createMultiPoint=function f(){var s=this;if(arguments.length===0)return new MultiPoint(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var d=arguments[0];return new MultiPoint(d,this)}else if(arguments[0]instanceof Array){var _=arguments[0];return this.createMultiPoint(_!==null?this.getCoordinateSequenceFactory().create(_):null)}else if(hasInterface(arguments[0],CoordinateSequence)){var S=arguments[0];if(S===null)return this.createMultiPoint(new Array(0).fill(null));for(var T=new Array(S.size()).fill(null),F=0;F<S.size();F++){var M=s.getCoordinateSequenceFactory().create(1,S.getDimension());CoordinateSequences.copy(S,F,M,0,1),T[F]=s.createPoint(M)}return this.createMultiPoint(T)}}};GeometryFactory.prototype.interfaces_=function f(){return[Serializable]};GeometryFactory.prototype.getClass=function f(){return GeometryFactory};GeometryFactory.toMultiPolygonArray=function f(s){var d=new Array(s.size()).fill(null);return s.toArray(d)};GeometryFactory.toGeometryArray=function f(s){if(s===null)return null;var d=new Array(s.size()).fill(null);return s.toArray(d)};GeometryFactory.getDefaultCoordinateSequenceFactory=function f(){return CoordinateArraySequenceFactory.instance()};GeometryFactory.toMultiLineStringArray=function f(s){var d=new Array(s.size()).fill(null);return s.toArray(d)};GeometryFactory.toLineStringArray=function f(s){var d=new Array(s.size()).fill(null);return s.toArray(d)};GeometryFactory.toMultiPointArray=function f(s){var d=new Array(s.size()).fill(null);return s.toArray(d)};GeometryFactory.toLinearRingArray=function f(s){var d=new Array(s.size()).fill(null);return s.toArray(d)};GeometryFactory.toPointArray=function f(s){var d=new Array(s.size()).fill(null);return s.toArray(d)};GeometryFactory.toPolygonArray=function f(s){var d=new Array(s.size()).fill(null);return s.toArray(d)};GeometryFactory.createPointFromInternalCoord=function f(s,d){return d.getPrecisionModel().makePrecise(s),d.getFactory().createPoint(s)};staticAccessors$2.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(GeometryFactory,staticAccessors$2);var geometryTypes=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],GeoJSONParser=function f(s){this.geometryFactory=s||new GeometryFactory};GeoJSONParser.prototype.read=function f(s){var d;typeof s=="string"?d=JSON.parse(s):d=s;var _=d.type;if(!parse[_])throw new Error("Unknown GeoJSON type: "+d.type);return geometryTypes.indexOf(_)!==-1?parse[_].apply(this,[d.coordinates]):_==="GeometryCollection"?parse[_].apply(this,[d.geometries]):parse[_].apply(this,[d])};GeoJSONParser.prototype.write=function f(s){var d=s.getGeometryType();if(!extract[d])throw new Error("Geometry is not supported");return extract[d].apply(this,[s])};var parse={Feature:function(f){var s={};for(var d in f)s[d]=f[d];if(f.geometry){var _=f.geometry.type;if(!parse[_])throw new Error("Unknown GeoJSON type: "+f.type);s.geometry=this.read(f.geometry)}return f.bbox&&(s.bbox=parse.bbox.apply(this,[f.bbox])),s},FeatureCollection:function(f){var s=this,d={};if(f.features){d.features=[];for(var _=0;_<f.features.length;++_)d.features.push(s.read(f.features[_]))}return f.bbox&&(d.bbox=this.parse.bbox.apply(this,[f.bbox])),d},coordinates:function(f){for(var s=[],d=0;d<f.length;++d){var _=f[d];s.push(new Coordinate(_[0],_[1]))}return s},bbox:function(f){return this.geometryFactory.createLinearRing([new Coordinate(f[0],f[1]),new Coordinate(f[2],f[1]),new Coordinate(f[2],f[3]),new Coordinate(f[0],f[3]),new Coordinate(f[0],f[1])])},Point:function(f){var s=new Coordinate(f[0],f[1]);return this.geometryFactory.createPoint(s)},MultiPoint:function(f){for(var s=this,d=[],_=0;_<f.length;++_)d.push(parse.Point.apply(s,[f[_]]));return this.geometryFactory.createMultiPoint(d)},LineString:function(f){var s=parse.coordinates.apply(this,[f]);return this.geometryFactory.createLineString(s)},MultiLineString:function(f){for(var s=this,d=[],_=0;_<f.length;++_)d.push(parse.LineString.apply(s,[f[_]]));return this.geometryFactory.createMultiLineString(d)},Polygon:function(f){for(var s=this,d=parse.coordinates.apply(this,[f[0]]),_=this.geometryFactory.createLinearRing(d),S=[],T=1;T<f.length;++T){var F=f[T],M=parse.coordinates.apply(s,[F]),P=s.geometryFactory.createLinearRing(M);S.push(P)}return this.geometryFactory.createPolygon(_,S)},MultiPolygon:function(f){for(var s=this,d=[],_=0;_<f.length;++_){var S=f[_];d.push(parse.Polygon.apply(s,[S]))}return this.geometryFactory.createMultiPolygon(d)},GeometryCollection:function(f){for(var s=this,d=[],_=0;_<f.length;++_){var S=f[_];d.push(s.read(S))}return this.geometryFactory.createGeometryCollection(d)}},extract={coordinate:function(f){return[f.x,f.y]},Point:function(f){var s=extract.coordinate.apply(this,[f.getCoordinate()]);return{type:"Point",coordinates:s}},MultiPoint:function(f){for(var s=this,d=[],_=0;_<f._geometries.length;++_){var S=f._geometries[_],T=extract.Point.apply(s,[S]);d.push(T.coordinates)}return{type:"MultiPoint",coordinates:d}},LineString:function(f){for(var s=this,d=[],_=f.getCoordinates(),S=0;S<_.length;++S){var T=_[S];d.push(extract.coordinate.apply(s,[T]))}return{type:"LineString",coordinates:d}},MultiLineString:function(f){for(var s=this,d=[],_=0;_<f._geometries.length;++_){var S=f._geometries[_],T=extract.LineString.apply(s,[S]);d.push(T.coordinates)}return{type:"MultiLineString",coordinates:d}},Polygon:function(f){var s=this,d=[],_=extract.LineString.apply(this,[f._shell]);d.push(_.coordinates);for(var S=0;S<f._holes.length;++S){var T=f._holes[S],F=extract.LineString.apply(s,[T]);d.push(F.coordinates)}return{type:"Polygon",coordinates:d}},MultiPolygon:function(f){for(var s=this,d=[],_=0;_<f._geometries.length;++_){var S=f._geometries[_],T=extract.Polygon.apply(s,[S]);d.push(T.coordinates)}return{type:"MultiPolygon",coordinates:d}},GeometryCollection:function(f){for(var s=this,d=[],_=0;_<f._geometries.length;++_){var S=f._geometries[_],T=S.getGeometryType();d.push(extract[T].apply(s,[S]))}return{type:"GeometryCollection",geometries:d}}},GeoJSONReader=function f(s){this.geometryFactory=s||new GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new GeoJSONParser(this.geometryFactory)};GeoJSONReader.prototype.read=function f(s){var d=this.parser.read(s);return this.precisionModel.getType()===PrecisionModel.FIXED&&this.reducePrecision(d),d};GeoJSONReader.prototype.reducePrecision=function f(s){var d=this,_,S;if(s.coordinate)this.precisionModel.makePrecise(s.coordinate);else if(s.points)for(_=0,S=s.points.length;_<S;_++)d.precisionModel.makePrecise(s.points[_]);else if(s.geometries)for(_=0,S=s.geometries.length;_<S;_++)d.reducePrecision(s.geometries[_])};var GeoJSONWriter=function f(){this.parser=new GeoJSONParser(this.geometryFactory)};GeoJSONWriter.prototype.write=function f(s){return this.parser.write(s)};var Position=function f(){},staticAccessors$20={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Position.prototype.interfaces_=function f(){return[]};Position.prototype.getClass=function f(){return Position};Position.opposite=function f(s){return s===Position.LEFT?Position.RIGHT:s===Position.RIGHT?Position.LEFT:s};staticAccessors$20.ON.get=function(){return 0};staticAccessors$20.LEFT.get=function(){return 1};staticAccessors$20.RIGHT.get=function(){return 2};Object.defineProperties(Position,staticAccessors$20);function EmptyStackException(f){this.message=f||""}EmptyStackException.prototype=new Error;EmptyStackException.prototype.name="EmptyStackException";function Stack(){this.array_=[]}Stack.prototype=new List;Stack.prototype.add=function(f){return this.array_.push(f),!0};Stack.prototype.get=function(f){if(f<0||f>=this.size())throw new Error;return this.array_[f]};Stack.prototype.push=function(f){return this.array_.push(f),f};Stack.prototype.pop=function(f){if(this.array_.length===0)throw new EmptyStackException;return this.array_.pop()};Stack.prototype.peek=function(){if(this.array_.length===0)throw new EmptyStackException;return this.array_[this.array_.length-1]};Stack.prototype.empty=function(){return this.array_.length===0};Stack.prototype.isEmpty=function(){return this.empty()};Stack.prototype.search=function(f){return this.array_.indexOf(f)};Stack.prototype.size=function(){return this.array_.length};Stack.prototype.toArray=function(){for(var f=this,s=[],d=0,_=this.array_.length;d<_;d++)s.push(f.array_[d]);return s};var RightmostEdgeFinder=function f(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};RightmostEdgeFinder.prototype.getCoordinate=function f(){return this._minCoord};RightmostEdgeFinder.prototype.getRightmostSide=function f(s,d){var _=this.getRightmostSideOfSegment(s,d);return _<0&&(_=this.getRightmostSideOfSegment(s,d-1)),_<0&&(this._minCoord=null,this.checkForRightmostCoordinate(s)),_};RightmostEdgeFinder.prototype.findRightmostEdgeAtVertex=function f(){var s=this._minDe.getEdge().getCoordinates();Assert.isTrue(this._minIndex>0&&this._minIndex<s.length,"rightmost point expected to be interior vertex of edge");var d=s[this._minIndex-1],_=s[this._minIndex+1],S=CGAlgorithms.computeOrientation(this._minCoord,_,d),T=!1;(d.y<this._minCoord.y&&_.y<this._minCoord.y&&S===CGAlgorithms.COUNTERCLOCKWISE||d.y>this._minCoord.y&&_.y>this._minCoord.y&&S===CGAlgorithms.CLOCKWISE)&&(T=!0),T&&(this._minIndex=this._minIndex-1)};RightmostEdgeFinder.prototype.getRightmostSideOfSegment=function f(s,d){var _=s.getEdge(),S=_.getCoordinates();if(d<0||d+1>=S.length||S[d].y===S[d+1].y)return-1;var T=Position.LEFT;return S[d].y<S[d+1].y&&(T=Position.RIGHT),T};RightmostEdgeFinder.prototype.getEdge=function f(){return this._orientedDe};RightmostEdgeFinder.prototype.checkForRightmostCoordinate=function f(s){for(var d=this,_=s.getEdge().getCoordinates(),S=0;S<_.length-1;S++)(d._minCoord===null||_[S].x>d._minCoord.x)&&(d._minDe=s,d._minIndex=S,d._minCoord=_[S])};RightmostEdgeFinder.prototype.findRightmostEdgeAtNode=function f(){var s=this._minDe.getNode(),d=s.getEdges();this._minDe=d.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};RightmostEdgeFinder.prototype.findEdge=function f(s){for(var d=this,_=s.iterator();_.hasNext();){var S=_.next();S.isForward()&&d.checkForRightmostCoordinate(S)}Assert.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var T=this.getRightmostSide(this._minDe,this._minIndex);T===Position.LEFT&&(this._orientedDe=this._minDe.getSym())};RightmostEdgeFinder.prototype.interfaces_=function f(){return[]};RightmostEdgeFinder.prototype.getClass=function f(){return RightmostEdgeFinder};var TopologyException=function(f){function s(d,_){f.call(this,s.msgWithCoord(d,_)),this.pt=_?new Coordinate(_):null,this.name="TopologyException"}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.getCoordinate=function(){return this.pt},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.msgWithCoord=function(_,S){return S?_:_+" [ "+S+" ]"},s}(RuntimeException),LinkedList=function f(){this.array_=[]};LinkedList.prototype.addLast=function f(s){this.array_.push(s)};LinkedList.prototype.removeFirst=function f(){return this.array_.shift()};LinkedList.prototype.isEmpty=function f(){return this.array_.length===0};var BufferSubgraph=function f(){this._finder=null,this._dirEdgeList=new ArrayList,this._nodes=new ArrayList,this._rightMostCoord=null,this._env=null,this._finder=new RightmostEdgeFinder};BufferSubgraph.prototype.clearVisitedEdges=function f(){for(var s=this._dirEdgeList.iterator();s.hasNext();){var d=s.next();d.setVisited(!1)}};BufferSubgraph.prototype.getRightmostCoordinate=function f(){return this._rightMostCoord};BufferSubgraph.prototype.computeNodeDepth=function f(s){for(var d=this,_=null,S=s.getEdges().iterator();S.hasNext();){var T=S.next();if(T.isVisited()||T.getSym().isVisited()){_=T;break}}if(_===null)throw new TopologyException("unable to find edge to compute depths at "+s.getCoordinate());s.getEdges().computeDepths(_);for(var F=s.getEdges().iterator();F.hasNext();){var M=F.next();M.setVisited(!0),d.copySymDepths(M)}};BufferSubgraph.prototype.computeDepth=function f(s){this.clearVisitedEdges();var d=this._finder.getEdge();d.setEdgeDepths(Position.RIGHT,s),this.copySymDepths(d),this.computeDepths(d)};BufferSubgraph.prototype.create=function f(s){this.addReachable(s),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};BufferSubgraph.prototype.findResultEdges=function f(){for(var s=this._dirEdgeList.iterator();s.hasNext();){var d=s.next();d.getDepth(Position.RIGHT)>=1&&d.getDepth(Position.LEFT)<=0&&!d.isInteriorAreaEdge()&&d.setInResult(!0)}};BufferSubgraph.prototype.computeDepths=function f(s){var d=this,_=new HashSet,S=new LinkedList,T=s.getNode();for(S.addLast(T),_.add(T),s.setVisited(!0);!S.isEmpty();){var F=S.removeFirst();_.add(F),d.computeNodeDepth(F);for(var M=F.getEdges().iterator();M.hasNext();){var P=M.next(),H=P.getSym();if(!H.isVisited()){var J=H.getNode();_.contains(J)||(S.addLast(J),_.add(J))}}}};BufferSubgraph.prototype.compareTo=function f(s){var d=s;return this._rightMostCoord.x<d._rightMostCoord.x?-1:this._rightMostCoord.x>d._rightMostCoord.x?1:0};BufferSubgraph.prototype.getEnvelope=function f(){if(this._env===null){for(var s=new Envelope,d=this._dirEdgeList.iterator();d.hasNext();)for(var _=d.next(),S=_.getEdge().getCoordinates(),T=0;T<S.length-1;T++)s.expandToInclude(S[T]);this._env=s}return this._env};BufferSubgraph.prototype.addReachable=function f(s){var d=this,_=new Stack;for(_.add(s);!_.empty();){var S=_.pop();d.add(S,_)}};BufferSubgraph.prototype.copySymDepths=function f(s){var d=s.getSym();d.setDepth(Position.LEFT,s.getDepth(Position.RIGHT)),d.setDepth(Position.RIGHT,s.getDepth(Position.LEFT))};BufferSubgraph.prototype.add=function f(s,d){var _=this;s.setVisited(!0),this._nodes.add(s);for(var S=s.getEdges().iterator();S.hasNext();){var T=S.next();_._dirEdgeList.add(T);var F=T.getSym(),M=F.getNode();M.isVisited()||d.push(M)}};BufferSubgraph.prototype.getNodes=function f(){return this._nodes};BufferSubgraph.prototype.getDirectedEdges=function f(){return this._dirEdgeList};BufferSubgraph.prototype.interfaces_=function f(){return[Comparable]};BufferSubgraph.prototype.getClass=function f(){return BufferSubgraph};var TopologyLocation=function f(){var s=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var d=arguments[0];this.init(d.length)}else if(Number.isInteger(arguments[0])){var _=arguments[0];this.init(1),this.location[Position.ON]=_}else if(arguments[0]instanceof f){var S=arguments[0];if(this.init(S.location.length),S!==null)for(var T=0;T<this.location.length;T++)s.location[T]=S.location[T]}}else if(arguments.length===3){var F=arguments[0],M=arguments[1],P=arguments[2];this.init(3),this.location[Position.ON]=F,this.location[Position.LEFT]=M,this.location[Position.RIGHT]=P}};TopologyLocation.prototype.setAllLocations=function f(s){for(var d=this,_=0;_<this.location.length;_++)d.location[_]=s};TopologyLocation.prototype.isNull=function f(){for(var s=this,d=0;d<this.location.length;d++)if(s.location[d]!==Location.NONE)return!1;return!0};TopologyLocation.prototype.setAllLocationsIfNull=function f(s){for(var d=this,_=0;_<this.location.length;_++)d.location[_]===Location.NONE&&(d.location[_]=s)};TopologyLocation.prototype.isLine=function f(){return this.location.length===1};TopologyLocation.prototype.merge=function f(s){var d=this;if(s.location.length>this.location.length){var _=new Array(3).fill(null);_[Position.ON]=this.location[Position.ON],_[Position.LEFT]=Location.NONE,_[Position.RIGHT]=Location.NONE,this.location=_}for(var S=0;S<this.location.length;S++)d.location[S]===Location.NONE&&S<s.location.length&&(d.location[S]=s.location[S])};TopologyLocation.prototype.getLocations=function f(){return this.location};TopologyLocation.prototype.flip=function f(){if(this.location.length<=1)return null;var s=this.location[Position.LEFT];this.location[Position.LEFT]=this.location[Position.RIGHT],this.location[Position.RIGHT]=s};TopologyLocation.prototype.toString=function f(){var s=new StringBuffer;return this.location.length>1&&s.append(Location.toLocationSymbol(this.location[Position.LEFT])),s.append(Location.toLocationSymbol(this.location[Position.ON])),this.location.length>1&&s.append(Location.toLocationSymbol(this.location[Position.RIGHT])),s.toString()};TopologyLocation.prototype.setLocations=function f(s,d,_){this.location[Position.ON]=s,this.location[Position.LEFT]=d,this.location[Position.RIGHT]=_};TopologyLocation.prototype.get=function f(s){return s<this.location.length?this.location[s]:Location.NONE};TopologyLocation.prototype.isArea=function f(){return this.location.length>1};TopologyLocation.prototype.isAnyNull=function f(){for(var s=this,d=0;d<this.location.length;d++)if(s.location[d]===Location.NONE)return!0;return!1};TopologyLocation.prototype.setLocation=function f(){if(arguments.length===1){var s=arguments[0];this.setLocation(Position.ON,s)}else if(arguments.length===2){var d=arguments[0],_=arguments[1];this.location[d]=_}};TopologyLocation.prototype.init=function f(s){this.location=new Array(s).fill(null),this.setAllLocations(Location.NONE)};TopologyLocation.prototype.isEqualOnSide=function f(s,d){return this.location[d]===s.location[d]};TopologyLocation.prototype.allPositionsEqual=function f(s){for(var d=this,_=0;_<this.location.length;_++)if(d.location[_]!==s)return!1;return!0};TopologyLocation.prototype.interfaces_=function f(){return[]};TopologyLocation.prototype.getClass=function f(){return TopologyLocation};var Label=function f(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var s=arguments[0];this.elt[0]=new TopologyLocation(s),this.elt[1]=new TopologyLocation(s)}else if(arguments[0]instanceof f){var d=arguments[0];this.elt[0]=new TopologyLocation(d.elt[0]),this.elt[1]=new TopologyLocation(d.elt[1])}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this.elt[0]=new TopologyLocation(Location.NONE),this.elt[1]=new TopologyLocation(Location.NONE),this.elt[_].setLocation(S)}else if(arguments.length===3){var T=arguments[0],F=arguments[1],M=arguments[2];this.elt[0]=new TopologyLocation(T,F,M),this.elt[1]=new TopologyLocation(T,F,M)}else if(arguments.length===4){var P=arguments[0],H=arguments[1],J=arguments[2],K=arguments[3];this.elt[0]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),this.elt[1]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),this.elt[P].setLocations(H,J,K)}};Label.prototype.getGeometryCount=function f(){var s=0;return this.elt[0].isNull()||s++,this.elt[1].isNull()||s++,s};Label.prototype.setAllLocations=function f(s,d){this.elt[s].setAllLocations(d)};Label.prototype.isNull=function f(s){return this.elt[s].isNull()};Label.prototype.setAllLocationsIfNull=function f(){if(arguments.length===1){var s=arguments[0];this.setAllLocationsIfNull(0,s),this.setAllLocationsIfNull(1,s)}else if(arguments.length===2){var d=arguments[0],_=arguments[1];this.elt[d].setAllLocationsIfNull(_)}};Label.prototype.isLine=function f(s){return this.elt[s].isLine()};Label.prototype.merge=function f(s){for(var d=this,_=0;_<2;_++)d.elt[_]===null&&s.elt[_]!==null?d.elt[_]=new TopologyLocation(s.elt[_]):d.elt[_].merge(s.elt[_])};Label.prototype.flip=function f(){this.elt[0].flip(),this.elt[1].flip()};Label.prototype.getLocation=function f(){if(arguments.length===1){var s=arguments[0];return this.elt[s].get(Position.ON)}else if(arguments.length===2){var d=arguments[0],_=arguments[1];return this.elt[d].get(_)}};Label.prototype.toString=function f(){var s=new StringBuffer;return this.elt[0]!==null&&(s.append("A:"),s.append(this.elt[0].toString())),this.elt[1]!==null&&(s.append(" B:"),s.append(this.elt[1].toString())),s.toString()};Label.prototype.isArea=function f(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var s=arguments[0];return this.elt[s].isArea()}};Label.prototype.isAnyNull=function f(s){return this.elt[s].isAnyNull()};Label.prototype.setLocation=function f(){if(arguments.length===2){var s=arguments[0],d=arguments[1];this.elt[s].setLocation(Position.ON,d)}else if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];this.elt[_].setLocation(S,T)}};Label.prototype.isEqualOnSide=function f(s,d){return this.elt[0].isEqualOnSide(s.elt[0],d)&&this.elt[1].isEqualOnSide(s.elt[1],d)};Label.prototype.allPositionsEqual=function f(s,d){return this.elt[s].allPositionsEqual(d)};Label.prototype.toLine=function f(s){this.elt[s].isArea()&&(this.elt[s]=new TopologyLocation(this.elt[s].location[0]))};Label.prototype.interfaces_=function f(){return[]};Label.prototype.getClass=function f(){return Label};Label.toLineLabel=function f(s){for(var d=new Label(Location.NONE),_=0;_<2;_++)d.setLocation(_,s.getLocation(_));return d};var EdgeRing=function f(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new ArrayList,this._pts=new ArrayList,this._label=new Label(Location.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ArrayList,this._geometryFactory=null;var s=arguments[0],d=arguments[1];this._geometryFactory=d,this.computePoints(s),this.computeRing()};EdgeRing.prototype.computeRing=function f(){var s=this;if(this._ring!==null)return null;for(var d=new Array(this._pts.size()).fill(null),_=0;_<this._pts.size();_++)d[_]=s._pts.get(_);this._ring=this._geometryFactory.createLinearRing(d),this._isHole=CGAlgorithms.isCCW(this._ring.getCoordinates())};EdgeRing.prototype.isIsolated=function f(){return this._label.getGeometryCount()===1};EdgeRing.prototype.computePoints=function f(s){var d=this;this._startDe=s;var _=s,S=!0;do{if(_===null)throw new TopologyException("Found null DirectedEdge");if(_.getEdgeRing()===d)throw new TopologyException("Directed Edge visited twice during ring-building at "+_.getCoordinate());d._edges.add(_);var T=_.getLabel();Assert.isTrue(T.isArea()),d.mergeLabel(T),d.addPoints(_.getEdge(),_.isForward(),S),S=!1,d.setEdgeRing(_,d),_=d.getNext(_)}while(_!==this._startDe)};EdgeRing.prototype.getLinearRing=function f(){return this._ring};EdgeRing.prototype.getCoordinate=function f(s){return this._pts.get(s)};EdgeRing.prototype.computeMaxNodeDegree=function f(){var s=this;this._maxNodeDegree=0;var d=this._startDe;do{var _=d.getNode(),S=_.getEdges().getOutgoingDegree(s);S>s._maxNodeDegree&&(s._maxNodeDegree=S),d=s.getNext(d)}while(d!==this._startDe);this._maxNodeDegree*=2};EdgeRing.prototype.addPoints=function f(s,d,_){var S=this,T=s.getCoordinates();if(d){var F=1;_&&(F=0);for(var M=F;M<T.length;M++)S._pts.add(T[M])}else{var P=T.length-2;_&&(P=T.length-1);for(var H=P;H>=0;H--)S._pts.add(T[H])}};EdgeRing.prototype.isHole=function f(){return this._isHole};EdgeRing.prototype.setInResult=function f(){var s=this._startDe;do s.getEdge().setInResult(!0),s=s.getNext();while(s!==this._startDe)};EdgeRing.prototype.containsPoint=function f(s){var d=this.getLinearRing(),_=d.getEnvelopeInternal();if(!_.contains(s)||!CGAlgorithms.isPointInRing(s,d.getCoordinates()))return!1;for(var S=this._holes.iterator();S.hasNext();){var T=S.next();if(T.containsPoint(s))return!1}return!0};EdgeRing.prototype.addHole=function f(s){this._holes.add(s)};EdgeRing.prototype.isShell=function f(){return this._shell===null};EdgeRing.prototype.getLabel=function f(){return this._label};EdgeRing.prototype.getEdges=function f(){return this._edges};EdgeRing.prototype.getMaxNodeDegree=function f(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};EdgeRing.prototype.getShell=function f(){return this._shell};EdgeRing.prototype.mergeLabel=function f(){if(arguments.length===1){var s=arguments[0];this.mergeLabel(s,0),this.mergeLabel(s,1)}else if(arguments.length===2){var d=arguments[0],_=arguments[1],S=d.getLocation(_,Position.RIGHT);if(S===Location.NONE)return null;if(this._label.getLocation(_)===Location.NONE)return this._label.setLocation(_,S),null}};EdgeRing.prototype.setShell=function f(s){this._shell=s,s!==null&&s.addHole(this)};EdgeRing.prototype.toPolygon=function f(s){for(var d=this,_=new Array(this._holes.size()).fill(null),S=0;S<this._holes.size();S++)_[S]=d._holes.get(S).getLinearRing();var T=s.createPolygon(this.getLinearRing(),_);return T};EdgeRing.prototype.interfaces_=function f(){return[]};EdgeRing.prototype.getClass=function f(){return EdgeRing};var MinimalEdgeRing=function(f){function s(){var d=arguments[0],_=arguments[1];f.call(this,d,_)}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.setEdgeRing=function(_,S){_.setMinEdgeRing(S)},s.prototype.getNext=function(_){return _.getNextMin()},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(EdgeRing),MaximalEdgeRing=function(f){function s(){var d=arguments[0],_=arguments[1];f.call(this,d,_)}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.buildMinimalRings=function(){var _=this,S=new ArrayList,T=this._startDe;do{if(T.getMinEdgeRing()===null){var F=new MinimalEdgeRing(T,_._geometryFactory);S.add(F)}T=T.getNext()}while(T!==this._startDe);return S},s.prototype.setEdgeRing=function(_,S){_.setEdgeRing(S)},s.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var _=this,S=this._startDe;do{var T=S.getNode();T.getEdges().linkMinimalDirectedEdges(_),S=S.getNext()}while(S!==this._startDe)},s.prototype.getNext=function(_){return _.getNext()},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(EdgeRing),GraphComponent=function f(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var s=arguments[0];this._label=s}}};GraphComponent.prototype.setVisited=function f(s){this._isVisited=s};GraphComponent.prototype.setInResult=function f(s){this._isInResult=s};GraphComponent.prototype.isCovered=function f(){return this._isCovered};GraphComponent.prototype.isCoveredSet=function f(){return this._isCoveredSet};GraphComponent.prototype.setLabel=function f(s){this._label=s};GraphComponent.prototype.getLabel=function f(){return this._label};GraphComponent.prototype.setCovered=function f(s){this._isCovered=s,this._isCoveredSet=!0};GraphComponent.prototype.updateIM=function f(s){Assert.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(s)};GraphComponent.prototype.isInResult=function f(){return this._isInResult};GraphComponent.prototype.isVisited=function f(){return this._isVisited};GraphComponent.prototype.interfaces_=function f(){return[]};GraphComponent.prototype.getClass=function f(){return GraphComponent};var Node$1=function(f){function s(){f.call(this),this._coord=null,this._edges=null;var d=arguments[0],_=arguments[1];this._coord=d,this._edges=_,this._label=new Label(0,Location.NONE)}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.isIncidentEdgeInResult=function(){for(var _=this.getEdges().getEdges().iterator();_.hasNext();){var S=_.next();if(S.getEdge().isInResult())return!0}return!1},s.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},s.prototype.getCoordinate=function(){return this._coord},s.prototype.print=function(_){_.println("node "+this._coord+" lbl: "+this._label)},s.prototype.computeIM=function(_){},s.prototype.computeMergedLocation=function(_,S){var T=Location.NONE;if(T=this._label.getLocation(S),!_.isNull(S)){var F=_.getLocation(S);T!==Location.BOUNDARY&&(T=F)}return T},s.prototype.setLabel=function(){if(arguments.length===2){var _=arguments[0],S=arguments[1];this._label===null?this._label=new Label(_,S):this._label.setLocation(_,S)}else return f.prototype.setLabel.apply(this,arguments)},s.prototype.getEdges=function(){return this._edges},s.prototype.mergeLabel=function(){var _=this;if(arguments[0]instanceof s){var S=arguments[0];this.mergeLabel(S._label)}else if(arguments[0]instanceof Label)for(var T=arguments[0],F=0;F<2;F++){var M=_.computeMergedLocation(T,F),P=_._label.getLocation(F);P===Location.NONE&&_._label.setLocation(F,M)}},s.prototype.add=function(_){this._edges.insert(_),_.setNode(this)},s.prototype.setLabelBoundary=function(_){if(this._label===null)return null;var S=Location.NONE;this._label!==null&&(S=this._label.getLocation(_));var T=null;switch(S){case Location.BOUNDARY:T=Location.INTERIOR;break;case Location.INTERIOR:T=Location.BOUNDARY;break;default:T=Location.BOUNDARY;break}this._label.setLocation(_,T)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(GraphComponent),NodeMap=function f(){this.nodeMap=new TreeMap,this.nodeFact=null;var s=arguments[0];this.nodeFact=s};NodeMap.prototype.find=function f(s){return this.nodeMap.get(s)};NodeMap.prototype.addNode=function f(){if(arguments[0]instanceof Coordinate){var s=arguments[0],d=this.nodeMap.get(s);return d===null&&(d=this.nodeFact.createNode(s),this.nodeMap.put(s,d)),d}else if(arguments[0]instanceof Node$1){var _=arguments[0],S=this.nodeMap.get(_.getCoordinate());return S===null?(this.nodeMap.put(_.getCoordinate(),_),_):(S.mergeLabel(_),S)}};NodeMap.prototype.print=function f(s){for(var d=this.iterator();d.hasNext();){var _=d.next();_.print(s)}};NodeMap.prototype.iterator=function f(){return this.nodeMap.values().iterator()};NodeMap.prototype.values=function f(){return this.nodeMap.values()};NodeMap.prototype.getBoundaryNodes=function f(s){for(var d=new ArrayList,_=this.iterator();_.hasNext();){var S=_.next();S.getLabel().getLocation(s)===Location.BOUNDARY&&d.add(S)}return d};NodeMap.prototype.add=function f(s){var d=s.getCoordinate(),_=this.addNode(d);_.add(s)};NodeMap.prototype.interfaces_=function f(){return[]};NodeMap.prototype.getClass=function f(){return NodeMap};var Quadrant=function f(){},staticAccessors$21={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Quadrant.prototype.interfaces_=function f(){return[]};Quadrant.prototype.getClass=function f(){return Quadrant};Quadrant.isNorthern=function f(s){return s===Quadrant.NE||s===Quadrant.NW};Quadrant.isOpposite=function f(s,d){if(s===d)return!1;var _=(s-d+4)%4;return _===2};Quadrant.commonHalfPlane=function f(s,d){if(s===d)return s;var _=(s-d+4)%4;if(_===2)return-1;var S=s<d?s:d,T=s>d?s:d;return S===0&&T===3?3:S};Quadrant.isInHalfPlane=function f(s,d){return d===Quadrant.SE?s===Quadrant.SE||s===Quadrant.SW:s===d||s===d+1};Quadrant.quadrant=function f(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],d=arguments[1];if(s===0&&d===0)throw new IllegalArgumentException("Cannot compute the quadrant for point ( "+s+", "+d+" )");return s>=0?d>=0?Quadrant.NE:Quadrant.SE:d>=0?Quadrant.NW:Quadrant.SW}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Coordinate){var _=arguments[0],S=arguments[1];if(S.x===_.x&&S.y===_.y)throw new IllegalArgumentException("Cannot compute the quadrant for two identical points "+_);return S.x>=_.x?S.y>=_.y?Quadrant.NE:Quadrant.SE:S.y>=_.y?Quadrant.NW:Quadrant.SW}};staticAccessors$21.NE.get=function(){return 0};staticAccessors$21.NW.get=function(){return 1};staticAccessors$21.SW.get=function(){return 2};staticAccessors$21.SE.get=function(){return 3};Object.defineProperties(Quadrant,staticAccessors$21);var EdgeEnd=function f(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var s=arguments[0];this._edge=s}else if(arguments.length===3){var d=arguments[0],_=arguments[1],S=arguments[2],T=null;this._edge=d,this.init(_,S),this._label=T}else if(arguments.length===4){var F=arguments[0],M=arguments[1],P=arguments[2],H=arguments[3];this._edge=F,this.init(M,P),this._label=H}};EdgeEnd.prototype.compareDirection=function f(s){return this._dx===s._dx&&this._dy===s._dy?0:this._quadrant>s._quadrant?1:this._quadrant<s._quadrant?-1:CGAlgorithms.computeOrientation(s._p0,s._p1,this._p1)};EdgeEnd.prototype.getDy=function f(){return this._dy};EdgeEnd.prototype.getCoordinate=function f(){return this._p0};EdgeEnd.prototype.setNode=function f(s){this._node=s};EdgeEnd.prototype.print=function f(s){var d=Math.atan2(this._dy,this._dx),_=this.getClass().getName(),S=_.lastIndexOf("."),T=_.substring(S+1);s.print("  "+T+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+d+"   "+this._label)};EdgeEnd.prototype.compareTo=function f(s){var d=s;return this.compareDirection(d)};EdgeEnd.prototype.getDirectedCoordinate=function f(){return this._p1};EdgeEnd.prototype.getDx=function f(){return this._dx};EdgeEnd.prototype.getLabel=function f(){return this._label};EdgeEnd.prototype.getEdge=function f(){return this._edge};EdgeEnd.prototype.getQuadrant=function f(){return this._quadrant};EdgeEnd.prototype.getNode=function f(){return this._node};EdgeEnd.prototype.toString=function f(){var s=Math.atan2(this._dy,this._dx),d=this.getClass().getName(),_=d.lastIndexOf("."),S=d.substring(_+1);return"  "+S+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+s+"   "+this._label};EdgeEnd.prototype.computeLabel=function f(s){};EdgeEnd.prototype.init=function f(s,d){this._p0=s,this._p1=d,this._dx=d.x-s.x,this._dy=d.y-s.y,this._quadrant=Quadrant.quadrant(this._dx,this._dy),Assert.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};EdgeEnd.prototype.interfaces_=function f(){return[Comparable]};EdgeEnd.prototype.getClass=function f(){return EdgeEnd};var DirectedEdge=function(f){function s(){var d=arguments[0],_=arguments[1];if(f.call(this,d),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=_,_)this.init(d.getCoordinate(0),d.getCoordinate(1));else{var S=d.getNumPoints()-1;this.init(d.getCoordinate(S),d.getCoordinate(S-1))}this.computeDirectedLabel()}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.getNextMin=function(){return this._nextMin},s.prototype.getDepth=function(_){return this._depth[_]},s.prototype.setVisited=function(_){this._isVisited=_},s.prototype.computeDirectedLabel=function(){this._label=new Label(this._edge.getLabel()),this._isForward||this._label.flip()},s.prototype.getNext=function(){return this._next},s.prototype.setDepth=function(_,S){if(this._depth[_]!==-999&&this._depth[_]!==S)throw new TopologyException("assigned depths do not match",this.getCoordinate());this._depth[_]=S},s.prototype.isInteriorAreaEdge=function(){for(var _=this,S=!0,T=0;T<2;T++)_._label.isArea(T)&&_._label.getLocation(T,Position.LEFT)===Location.INTERIOR&&_._label.getLocation(T,Position.RIGHT)===Location.INTERIOR||(S=!1);return S},s.prototype.setNextMin=function(_){this._nextMin=_},s.prototype.print=function(_){f.prototype.print.call(this,_),_.print(" "+this._depth[Position.LEFT]+"/"+this._depth[Position.RIGHT]),_.print(" ("+this.getDepthDelta()+")"),this._isInResult&&_.print(" inResult")},s.prototype.setMinEdgeRing=function(_){this._minEdgeRing=_},s.prototype.isLineEdge=function(){var _=this._label.isLine(0)||this._label.isLine(1),S=!this._label.isArea(0)||this._label.allPositionsEqual(0,Location.EXTERIOR),T=!this._label.isArea(1)||this._label.allPositionsEqual(1,Location.EXTERIOR);return _&&S&&T},s.prototype.setEdgeRing=function(_){this._edgeRing=_},s.prototype.getMinEdgeRing=function(){return this._minEdgeRing},s.prototype.getDepthDelta=function(){var _=this._edge.getDepthDelta();return this._isForward||(_=-_),_},s.prototype.setInResult=function(_){this._isInResult=_},s.prototype.getSym=function(){return this._sym},s.prototype.isForward=function(){return this._isForward},s.prototype.getEdge=function(){return this._edge},s.prototype.printEdge=function(_){this.print(_),_.print(" "),this._isForward?this._edge.print(_):this._edge.printReverse(_)},s.prototype.setSym=function(_){this._sym=_},s.prototype.setVisitedEdge=function(_){this.setVisited(_),this._sym.setVisited(_)},s.prototype.setEdgeDepths=function(_,S){var T=this.getEdge().getDepthDelta();this._isForward||(T=-T);var F=1;_===Position.LEFT&&(F=-1);var M=Position.opposite(_),P=T*F,H=S+P;this.setDepth(_,S),this.setDepth(M,H)},s.prototype.getEdgeRing=function(){return this._edgeRing},s.prototype.isInResult=function(){return this._isInResult},s.prototype.setNext=function(_){this._next=_},s.prototype.isVisited=function(){return this._isVisited},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.depthFactor=function(_,S){return _===Location.EXTERIOR&&S===Location.INTERIOR?1:_===Location.INTERIOR&&S===Location.EXTERIOR?-1:0},s}(EdgeEnd),NodeFactory=function f(){};NodeFactory.prototype.createNode=function f(s){return new Node$1(s,null)};NodeFactory.prototype.interfaces_=function f(){return[]};NodeFactory.prototype.getClass=function f(){return NodeFactory};var PlanarGraph=function f(){if(this._edges=new ArrayList,this._nodes=null,this._edgeEndList=new ArrayList,arguments.length===0)this._nodes=new NodeMap(new NodeFactory);else if(arguments.length===1){var s=arguments[0];this._nodes=new NodeMap(s)}};PlanarGraph.prototype.printEdges=function f(s){var d=this;s.println("Edges:");for(var _=0;_<this._edges.size();_++){s.println("edge "+_+":");var S=d._edges.get(_);S.print(s),S.eiList.print(s)}};PlanarGraph.prototype.find=function f(s){return this._nodes.find(s)};PlanarGraph.prototype.addNode=function f(){if(arguments[0]instanceof Node$1){var s=arguments[0];return this._nodes.addNode(s)}else if(arguments[0]instanceof Coordinate){var d=arguments[0];return this._nodes.addNode(d)}};PlanarGraph.prototype.getNodeIterator=function f(){return this._nodes.iterator()};PlanarGraph.prototype.linkResultDirectedEdges=function f(){for(var s=this._nodes.iterator();s.hasNext();){var d=s.next();d.getEdges().linkResultDirectedEdges()}};PlanarGraph.prototype.debugPrintln=function f(s){System.out.println(s)};PlanarGraph.prototype.isBoundaryNode=function f(s,d){var _=this._nodes.find(d);if(_===null)return!1;var S=_.getLabel();return S!==null&&S.getLocation(s)===Location.BOUNDARY};PlanarGraph.prototype.linkAllDirectedEdges=function f(){for(var s=this._nodes.iterator();s.hasNext();){var d=s.next();d.getEdges().linkAllDirectedEdges()}};PlanarGraph.prototype.matchInSameDirection=function f(s,d,_,S){return s.equals(_)?CGAlgorithms.computeOrientation(s,d,S)===CGAlgorithms.COLLINEAR&&Quadrant.quadrant(s,d)===Quadrant.quadrant(_,S):!1};PlanarGraph.prototype.getEdgeEnds=function f(){return this._edgeEndList};PlanarGraph.prototype.debugPrint=function f(s){System.out.print(s)};PlanarGraph.prototype.getEdgeIterator=function f(){return this._edges.iterator()};PlanarGraph.prototype.findEdgeInSameDirection=function f(s,d){for(var _=this,S=0;S<this._edges.size();S++){var T=_._edges.get(S),F=T.getCoordinates();if(_.matchInSameDirection(s,d,F[0],F[1])||_.matchInSameDirection(s,d,F[F.length-1],F[F.length-2]))return T}return null};PlanarGraph.prototype.insertEdge=function f(s){this._edges.add(s)};PlanarGraph.prototype.findEdgeEnd=function f(s){for(var d=this.getEdgeEnds().iterator();d.hasNext();){var _=d.next();if(_.getEdge()===s)return _}return null};PlanarGraph.prototype.addEdges=function f(s){for(var d=this,_=s.iterator();_.hasNext();){var S=_.next();d._edges.add(S);var T=new DirectedEdge(S,!0),F=new DirectedEdge(S,!1);T.setSym(F),F.setSym(T),d.add(T),d.add(F)}};PlanarGraph.prototype.add=function f(s){this._nodes.add(s),this._edgeEndList.add(s)};PlanarGraph.prototype.getNodes=function f(){return this._nodes.values()};PlanarGraph.prototype.findEdge=function f(s,d){for(var _=this,S=0;S<this._edges.size();S++){var T=_._edges.get(S),F=T.getCoordinates();if(s.equals(F[0])&&d.equals(F[1]))return T}return null};PlanarGraph.prototype.interfaces_=function f(){return[]};PlanarGraph.prototype.getClass=function f(){return PlanarGraph};PlanarGraph.linkResultDirectedEdges=function f(s){for(var d=s.iterator();d.hasNext();){var _=d.next();_.getEdges().linkResultDirectedEdges()}};var PolygonBuilder=function f(){this._geometryFactory=null,this._shellList=new ArrayList;var s=arguments[0];this._geometryFactory=s};PolygonBuilder.prototype.sortShellsAndHoles=function f(s,d,_){for(var S=s.iterator();S.hasNext();){var T=S.next();T.isHole()?_.add(T):d.add(T)}};PolygonBuilder.prototype.computePolygons=function f(s){for(var d=this,_=new ArrayList,S=s.iterator();S.hasNext();){var T=S.next(),F=T.toPolygon(d._geometryFactory);_.add(F)}return _};PolygonBuilder.prototype.placeFreeHoles=function f(s,d){for(var _=this,S=d.iterator();S.hasNext();){var T=S.next();if(T.getShell()===null){var F=_.findEdgeRingContaining(T,s);if(F===null)throw new TopologyException("unable to assign hole to a shell",T.getCoordinate(0));T.setShell(F)}}};PolygonBuilder.prototype.buildMinimalEdgeRings=function f(s,d,_){for(var S=this,T=new ArrayList,F=s.iterator();F.hasNext();){var M=F.next();if(M.getMaxNodeDegree()>2){M.linkDirectedEdgesForMinimalEdgeRings();var P=M.buildMinimalRings(),H=S.findShell(P);H!==null?(S.placePolygonHoles(H,P),d.add(H)):_.addAll(P)}else T.add(M)}return T};PolygonBuilder.prototype.containsPoint=function f(s){for(var d=this._shellList.iterator();d.hasNext();){var _=d.next();if(_.containsPoint(s))return!0}return!1};PolygonBuilder.prototype.buildMaximalEdgeRings=function f(s){for(var d=this,_=new ArrayList,S=s.iterator();S.hasNext();){var T=S.next();if(T.isInResult()&&T.getLabel().isArea()&&T.getEdgeRing()===null){var F=new MaximalEdgeRing(T,d._geometryFactory);_.add(F),F.setInResult()}}return _};PolygonBuilder.prototype.placePolygonHoles=function f(s,d){for(var _=d.iterator();_.hasNext();){var S=_.next();S.isHole()&&S.setShell(s)}};PolygonBuilder.prototype.getPolygons=function f(){var s=this.computePolygons(this._shellList);return s};PolygonBuilder.prototype.findEdgeRingContaining=function f(s,d){for(var _=s.getLinearRing(),S=_.getEnvelopeInternal(),T=_.getCoordinateN(0),F=null,M=null,P=d.iterator();P.hasNext();){var H=P.next(),J=H.getLinearRing(),K=J.getEnvelopeInternal();F!==null&&(M=F.getLinearRing().getEnvelopeInternal());var z=!1;K.contains(S)&&CGAlgorithms.isPointInRing(T,J.getCoordinates())&&(z=!0),z&&(F===null||M.contains(K))&&(F=H)}return F};PolygonBuilder.prototype.findShell=function f(s){for(var d=0,_=null,S=s.iterator();S.hasNext();){var T=S.next();T.isHole()||(_=T,d++)}return Assert.isTrue(d<=1,"found two shells in MinimalEdgeRing list"),_};PolygonBuilder.prototype.add=function f(){if(arguments.length===1){var s=arguments[0];this.add(s.getEdgeEnds(),s.getNodes())}else if(arguments.length===2){var d=arguments[0],_=arguments[1];PlanarGraph.linkResultDirectedEdges(_);var S=this.buildMaximalEdgeRings(d),T=new ArrayList,F=this.buildMinimalEdgeRings(S,this._shellList,T);this.sortShellsAndHoles(F,this._shellList,T),this.placeFreeHoles(this._shellList,T)}};PolygonBuilder.prototype.interfaces_=function f(){return[]};PolygonBuilder.prototype.getClass=function f(){return PolygonBuilder};var Boundable=function f(){};Boundable.prototype.getBounds=function f(){};Boundable.prototype.interfaces_=function f(){return[]};Boundable.prototype.getClass=function f(){return Boundable};var ItemBoundable=function f(){this._bounds=null,this._item=null;var s=arguments[0],d=arguments[1];this._bounds=s,this._item=d};ItemBoundable.prototype.getItem=function f(){return this._item};ItemBoundable.prototype.getBounds=function f(){return this._bounds};ItemBoundable.prototype.interfaces_=function f(){return[Boundable,Serializable]};ItemBoundable.prototype.getClass=function f(){return ItemBoundable};var PriorityQueue=function f(){this._size=null,this._items=null,this._size=0,this._items=new ArrayList,this._items.add(null)};PriorityQueue.prototype.poll=function f(){if(this.isEmpty())return null;var s=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),s};PriorityQueue.prototype.size=function f(){return this._size};PriorityQueue.prototype.reorder=function f(s){for(var d=this,_=null,S=this._items.get(s);s*2<=this._size&&(_=s*2,_!==d._size&&d._items.get(_+1).compareTo(d._items.get(_))<0&&_++,d._items.get(_).compareTo(S)<0);s=_)d._items.set(s,d._items.get(_));this._items.set(s,S)};PriorityQueue.prototype.clear=function f(){this._size=0,this._items.clear()};PriorityQueue.prototype.isEmpty=function f(){return this._size===0};PriorityQueue.prototype.add=function f(s){var d=this;this._items.add(null),this._size+=1;var _=this._size;for(this._items.set(0,s);s.compareTo(this._items.get(Math.trunc(_/2)))<0;_/=2)d._items.set(_,d._items.get(Math.trunc(_/2)));this._items.set(_,s)};PriorityQueue.prototype.interfaces_=function f(){return[]};PriorityQueue.prototype.getClass=function f(){return PriorityQueue};var ItemVisitor=function f(){};ItemVisitor.prototype.visitItem=function f(s){};ItemVisitor.prototype.interfaces_=function f(){return[]};ItemVisitor.prototype.getClass=function f(){return ItemVisitor};var SpatialIndex=function f(){};SpatialIndex.prototype.insert=function f(s,d){};SpatialIndex.prototype.remove=function f(s,d){};SpatialIndex.prototype.query=function f(){};SpatialIndex.prototype.interfaces_=function f(){return[]};SpatialIndex.prototype.getClass=function f(){return SpatialIndex};var AbstractNode=function f(){if(this._childBoundables=new ArrayList,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var s=arguments[0];this._level=s}}},staticAccessors$22={serialVersionUID:{configurable:!0}};AbstractNode.prototype.getLevel=function f(){return this._level};AbstractNode.prototype.size=function f(){return this._childBoundables.size()};AbstractNode.prototype.getChildBoundables=function f(){return this._childBoundables};AbstractNode.prototype.addChildBoundable=function f(s){Assert.isTrue(this._bounds===null),this._childBoundables.add(s)};AbstractNode.prototype.isEmpty=function f(){return this._childBoundables.isEmpty()};AbstractNode.prototype.getBounds=function f(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};AbstractNode.prototype.interfaces_=function f(){return[Boundable,Serializable]};AbstractNode.prototype.getClass=function f(){return AbstractNode};staticAccessors$22.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(AbstractNode,staticAccessors$22);var Collections=function f(){};Collections.reverseOrder=function f(){return{compare:function(d,_){return _.compareTo(d)}}};Collections.min=function f(s){return Collections.sort(s),s.get(0)};Collections.sort=function f(s,d){var _=s.toArray();d?Arrays.sort(_,d):Arrays.sort(_);for(var S=s.iterator(),T=0,F=_.length;T<F;T++)S.next(),S.set(_[T])};Collections.singletonList=function f(s){var d=new ArrayList;return d.add(s),d};var BoundablePair=function f(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var s=arguments[0],d=arguments[1],_=arguments[2];this._boundable1=s,this._boundable2=d,this._itemDistance=_,this._distance=this.distance()};BoundablePair.prototype.expandToQueue=function f(s,d){var _=BoundablePair.isComposite(this._boundable1),S=BoundablePair.isComposite(this._boundable2);if(_&&S)return BoundablePair.area(this._boundable1)>BoundablePair.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,s,d),null):(this.expand(this._boundable2,this._boundable1,s,d),null);if(_)return this.expand(this._boundable1,this._boundable2,s,d),null;if(S)return this.expand(this._boundable2,this._boundable1,s,d),null;throw new IllegalArgumentException("neither boundable is composite")};BoundablePair.prototype.isLeaves=function f(){return!(BoundablePair.isComposite(this._boundable1)||BoundablePair.isComposite(this._boundable2))};BoundablePair.prototype.compareTo=function f(s){var d=s;return this._distance<d._distance?-1:this._distance>d._distance?1:0};BoundablePair.prototype.expand=function f(s,d,_,S){for(var T=this,F=s.getChildBoundables(),M=F.iterator();M.hasNext();){var P=M.next(),H=new BoundablePair(P,d,T._itemDistance);H.getDistance()<S&&_.add(H)}};BoundablePair.prototype.getBoundable=function f(s){return s===0?this._boundable1:this._boundable2};BoundablePair.prototype.getDistance=function f(){return this._distance};BoundablePair.prototype.distance=function f(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};BoundablePair.prototype.interfaces_=function f(){return[Comparable]};BoundablePair.prototype.getClass=function f(){return BoundablePair};BoundablePair.area=function f(s){return s.getBounds().getArea()};BoundablePair.isComposite=function f(s){return s instanceof AbstractNode};var AbstractSTRtree=function f(){if(this._root=null,this._built=!1,this._itemBoundables=new ArrayList,this._nodeCapacity=null,arguments.length===0){var s=f.DEFAULT_NODE_CAPACITY;this._nodeCapacity=s}else if(arguments.length===1){var d=arguments[0];Assert.isTrue(d>1,"Node capacity must be greater than 1"),this._nodeCapacity=d}},staticAccessors$23={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};AbstractSTRtree.prototype.getNodeCapacity=function f(){return this._nodeCapacity};AbstractSTRtree.prototype.lastNode=function f(s){return s.get(s.size()-1)};AbstractSTRtree.prototype.size=function f(){var s=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var d=arguments[0],_=0,S=d.getChildBoundables().iterator();S.hasNext();){var T=S.next();T instanceof AbstractNode?_+=s.size(T):T instanceof ItemBoundable&&(_+=1)}return _}};AbstractSTRtree.prototype.removeItem=function f(s,d){for(var _=null,S=s.getChildBoundables().iterator();S.hasNext();){var T=S.next();T instanceof ItemBoundable&&T.getItem()===d&&(_=T)}return _!==null?(s.getChildBoundables().remove(_),!0):!1};AbstractSTRtree.prototype.itemsTree=function f(){var s=this;if(arguments.length===0){this.build();var d=this.itemsTree(this._root);return d===null?new ArrayList:d}else if(arguments.length===1){for(var _=arguments[0],S=new ArrayList,T=_.getChildBoundables().iterator();T.hasNext();){var F=T.next();if(F instanceof AbstractNode){var M=s.itemsTree(F);M!==null&&S.add(M)}else F instanceof ItemBoundable?S.add(F.getItem()):Assert.shouldNeverReachHere()}return S.size()<=0?null:S}};AbstractSTRtree.prototype.insert=function f(s,d){Assert.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new ItemBoundable(s,d))};AbstractSTRtree.prototype.boundablesAtLevel=function f(){var s=this;if(arguments.length===1){var d=arguments[0],_=new ArrayList;return this.boundablesAtLevel(d,this._root,_),_}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2];if(Assert.isTrue(S>-2),T.getLevel()===S)return F.add(T),null;for(var M=T.getChildBoundables().iterator();M.hasNext();){var P=M.next();P instanceof AbstractNode?s.boundablesAtLevel(S,P,F):(Assert.isTrue(P instanceof ItemBoundable),S===-1&&F.add(P))}return null}};AbstractSTRtree.prototype.query=function f(){var s=this;if(arguments.length===1){var d=arguments[0];this.build();var _=new ArrayList;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),d)&&this.query(d,this._root,_),_}else if(arguments.length===2){var S=arguments[0],T=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),S)&&this.query(S,this._root,T)}else if(arguments.length===3){if(hasInterface(arguments[2],ItemVisitor)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode)for(var F=arguments[0],M=arguments[1],P=arguments[2],H=M.getChildBoundables(),J=0;J<H.size();J++){var K=H.get(J);s.getIntersectsOp().intersects(K.getBounds(),F)&&(K instanceof AbstractNode?s.query(F,K,P):K instanceof ItemBoundable?P.visitItem(K.getItem()):Assert.shouldNeverReachHere())}else if(hasInterface(arguments[2],List)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode)for(var z=arguments[0],oe=arguments[1],se=arguments[2],ae=oe.getChildBoundables(),ge=0;ge<ae.size();ge++){var pe=ae.get(ge);s.getIntersectsOp().intersects(pe.getBounds(),z)&&(pe instanceof AbstractNode?s.query(z,pe,se):pe instanceof ItemBoundable?se.add(pe.getItem()):Assert.shouldNeverReachHere())}}};AbstractSTRtree.prototype.build=function f(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};AbstractSTRtree.prototype.getRoot=function f(){return this.build(),this._root};AbstractSTRtree.prototype.remove=function f(){var s=this;if(arguments.length===2){var d=arguments[0],_=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),d)?this.remove(d,this._root,_):!1}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2],M=this.removeItem(T,F);if(M)return!0;for(var P=null,H=T.getChildBoundables().iterator();H.hasNext();){var J=H.next();if(s.getIntersectsOp().intersects(J.getBounds(),S)&&J instanceof AbstractNode&&(M=s.remove(S,J,F),M)){P=J;break}}return P!==null&&P.getChildBoundables().isEmpty()&&T.getChildBoundables().remove(P),M}};AbstractSTRtree.prototype.createHigherLevels=function f(s,d){Assert.isTrue(!s.isEmpty());var _=this.createParentBoundables(s,d+1);return _.size()===1?_.get(0):this.createHigherLevels(_,d+1)};AbstractSTRtree.prototype.depth=function f(){var s=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var d=arguments[0],_=0,S=d.getChildBoundables().iterator();S.hasNext();){var T=S.next();if(T instanceof AbstractNode){var F=s.depth(T);F>_&&(_=F)}}return _+1}};AbstractSTRtree.prototype.createParentBoundables=function f(s,d){var _=this;Assert.isTrue(!s.isEmpty());var S=new ArrayList;S.add(this.createNode(d));var T=new ArrayList(s);Collections.sort(T,this.getComparator());for(var F=T.iterator();F.hasNext();){var M=F.next();_.lastNode(S).getChildBoundables().size()===_.getNodeCapacity()&&S.add(_.createNode(d)),_.lastNode(S).addChildBoundable(M)}return S};AbstractSTRtree.prototype.isEmpty=function f(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};AbstractSTRtree.prototype.interfaces_=function f(){return[Serializable]};AbstractSTRtree.prototype.getClass=function f(){return AbstractSTRtree};AbstractSTRtree.compareDoubles=function f(s,d){return s>d?1:s<d?-1:0};staticAccessors$23.IntersectsOp.get=function(){return IntersectsOp};staticAccessors$23.serialVersionUID.get=function(){return-3886435814360241e3};staticAccessors$23.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(AbstractSTRtree,staticAccessors$23);var IntersectsOp=function f(){},ItemDistance=function f(){};ItemDistance.prototype.distance=function f(s,d){};ItemDistance.prototype.interfaces_=function f(){return[]};ItemDistance.prototype.getClass=function f(){return ItemDistance};var STRtree=function(f){function s(_){_=_||s.DEFAULT_NODE_CAPACITY,f.call(this,_)}f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s;var d={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return s.prototype.createParentBoundablesFromVerticalSlices=function(S,T){var F=this;Assert.isTrue(S.length>0);for(var M=new ArrayList,P=0;P<S.length;P++)M.addAll(F.createParentBoundablesFromVerticalSlice(S[P],T));return M},s.prototype.createNode=function(S){return new STRtreeNode(S)},s.prototype.size=function(){return arguments.length===0?f.prototype.size.call(this):f.prototype.size.apply(this,arguments)},s.prototype.insert=function(){if(arguments.length===2){var S=arguments[0],T=arguments[1];if(S.isNull())return null;f.prototype.insert.call(this,S,T)}else return f.prototype.insert.apply(this,arguments)},s.prototype.getIntersectsOp=function(){return s.intersectsOp},s.prototype.verticalSlices=function(S,T){for(var F=Math.trunc(Math.ceil(S.size()/T)),M=new Array(T).fill(null),P=S.iterator(),H=0;H<T;H++){M[H]=new ArrayList;for(var J=0;P.hasNext()&&J<F;){var K=P.next();M[H].add(K),J++}}return M},s.prototype.query=function(){if(arguments.length===1){var S=arguments[0];return f.prototype.query.call(this,S)}else if(arguments.length===2){var T=arguments[0],F=arguments[1];f.prototype.query.call(this,T,F)}else if(arguments.length===3){if(hasInterface(arguments[2],ItemVisitor)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode){var M=arguments[0],P=arguments[1],H=arguments[2];f.prototype.query.call(this,M,P,H)}else if(hasInterface(arguments[2],List)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode){var J=arguments[0],K=arguments[1],z=arguments[2];f.prototype.query.call(this,J,K,z)}}},s.prototype.getComparator=function(){return s.yComparator},s.prototype.createParentBoundablesFromVerticalSlice=function(S,T){return f.prototype.createParentBoundables.call(this,S,T)},s.prototype.remove=function(){if(arguments.length===2){var S=arguments[0],T=arguments[1];return f.prototype.remove.call(this,S,T)}else return f.prototype.remove.apply(this,arguments)},s.prototype.depth=function(){return arguments.length===0?f.prototype.depth.call(this):f.prototype.depth.apply(this,arguments)},s.prototype.createParentBoundables=function(S,T){Assert.isTrue(!S.isEmpty());var F=Math.trunc(Math.ceil(S.size()/this.getNodeCapacity())),M=new ArrayList(S);Collections.sort(M,s.xComparator);var P=this.verticalSlices(M,Math.trunc(Math.ceil(Math.sqrt(F))));return this.createParentBoundablesFromVerticalSlices(P,T)},s.prototype.nearestNeighbour=function(){if(arguments.length===1){if(hasInterface(arguments[0],ItemDistance)){var S=arguments[0],T=new BoundablePair(this.getRoot(),this.getRoot(),S);return this.nearestNeighbour(T)}else if(arguments[0]instanceof BoundablePair){var F=arguments[0];return this.nearestNeighbour(F,Double.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof s&&hasInterface(arguments[1],ItemDistance)){var M=arguments[0],P=arguments[1],H=new BoundablePair(this.getRoot(),M.getRoot(),P);return this.nearestNeighbour(H)}else if(arguments[0]instanceof BoundablePair&&typeof arguments[1]=="number"){var J=arguments[0],K=arguments[1],z=K,oe=null,se=new PriorityQueue;for(se.add(J);!se.isEmpty()&&z>0;){var ae=se.poll(),ge=ae.getDistance();if(ge>=z)break;ae.isLeaves()?(z=ge,oe=ae):ae.expandToQueue(se,z)}return[oe.getBoundable(0).getItem(),oe.getBoundable(1).getItem()]}}else if(arguments.length===3){var pe=arguments[0],he=arguments[1],ve=arguments[2],be=new ItemBoundable(pe,he),Re=new BoundablePair(this.getRoot(),be,ve);return this.nearestNeighbour(Re)[0]}},s.prototype.interfaces_=function(){return[SpatialIndex,Serializable]},s.prototype.getClass=function(){return s},s.centreX=function(S){return s.avg(S.getMinX(),S.getMaxX())},s.avg=function(S,T){return(S+T)/2},s.centreY=function(S){return s.avg(S.getMinY(),S.getMaxY())},d.STRtreeNode.get=function(){return STRtreeNode},d.serialVersionUID.get=function(){return 0x39920f7d5f261e0},d.xComparator.get=function(){return{interfaces_:function(){return[Comparator]},compare:function(_,S){return f.compareDoubles(s.centreX(_.getBounds()),s.centreX(S.getBounds()))}}},d.yComparator.get=function(){return{interfaces_:function(){return[Comparator]},compare:function(_,S){return f.compareDoubles(s.centreY(_.getBounds()),s.centreY(S.getBounds()))}}},d.intersectsOp.get=function(){return{interfaces_:function(){return[f.IntersectsOp]},intersects:function(_,S){return _.intersects(S)}}},d.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(s,d),s}(AbstractSTRtree),STRtreeNode=function(f){function s(){var d=arguments[0];f.call(this,d)}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.computeBounds=function(){for(var _=null,S=this.getChildBoundables().iterator();S.hasNext();){var T=S.next();_===null?_=new Envelope(T.getBounds()):_.expandToInclude(T.getBounds())}return _},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(AbstractNode),SegmentPointComparator=function f(){};SegmentPointComparator.prototype.interfaces_=function f(){return[]};SegmentPointComparator.prototype.getClass=function f(){return SegmentPointComparator};SegmentPointComparator.relativeSign=function f(s,d){return s<d?-1:s>d?1:0};SegmentPointComparator.compare=function f(s,d,_){if(d.equals2D(_))return 0;var S=SegmentPointComparator.relativeSign(d.x,_.x),T=SegmentPointComparator.relativeSign(d.y,_.y);switch(s){case 0:return SegmentPointComparator.compareValue(S,T);case 1:return SegmentPointComparator.compareValue(T,S);case 2:return SegmentPointComparator.compareValue(T,-S);case 3:return SegmentPointComparator.compareValue(-S,T);case 4:return SegmentPointComparator.compareValue(-S,-T);case 5:return SegmentPointComparator.compareValue(-T,-S);case 6:return SegmentPointComparator.compareValue(-T,S);case 7:return SegmentPointComparator.compareValue(S,-T)}return Assert.shouldNeverReachHere("invalid octant value"),0};SegmentPointComparator.compareValue=function f(s,d){return s<0?-1:s>0?1:d<0?-1:d>0?1:0};var SegmentNode=function f(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var s=arguments[0],d=arguments[1],_=arguments[2],S=arguments[3];this._segString=s,this.coord=new Coordinate(d),this.segmentIndex=_,this._segmentOctant=S,this._isInterior=!d.equals2D(s.getCoordinate(_))};SegmentNode.prototype.getCoordinate=function f(){return this.coord};SegmentNode.prototype.print=function f(s){s.print(this.coord),s.print(" seg # = "+this.segmentIndex)};SegmentNode.prototype.compareTo=function f(s){var d=s;return this.segmentIndex<d.segmentIndex?-1:this.segmentIndex>d.segmentIndex?1:this.coord.equals2D(d.coord)?0:SegmentPointComparator.compare(this._segmentOctant,this.coord,d.coord)};SegmentNode.prototype.isEndPoint=function f(s){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===s};SegmentNode.prototype.isInterior=function f(){return this._isInterior};SegmentNode.prototype.interfaces_=function f(){return[Comparable]};SegmentNode.prototype.getClass=function f(){return SegmentNode};var SegmentNodeList=function f(){this._nodeMap=new TreeMap,this._edge=null;var s=arguments[0];this._edge=s};SegmentNodeList.prototype.getSplitCoordinates=function f(){var s=this,d=new CoordinateList;this.addEndpoints();for(var _=this.iterator(),S=_.next();_.hasNext();){var T=_.next();s.addEdgeCoordinates(S,T,d),S=T}return d.toCoordinateArray()};SegmentNodeList.prototype.addCollapsedNodes=function f(){var s=this,d=new ArrayList;this.findCollapsesFromInsertedNodes(d),this.findCollapsesFromExistingVertices(d);for(var _=d.iterator();_.hasNext();){var S=_.next().intValue();s.add(s._edge.getCoordinate(S),S)}};SegmentNodeList.prototype.print=function f(s){s.println("Intersections:");for(var d=this.iterator();d.hasNext();){var _=d.next();_.print(s)}};SegmentNodeList.prototype.findCollapsesFromExistingVertices=function f(s){for(var d=this,_=0;_<this._edge.size()-2;_++){var S=d._edge.getCoordinate(_),T=d._edge.getCoordinate(_+2);S.equals2D(T)&&s.add(new Integer(_+1))}};SegmentNodeList.prototype.addEdgeCoordinates=function f(s,d,_){var S=this,T=this._edge.getCoordinate(d.segmentIndex),F=d.isInterior()||!d.coord.equals2D(T);_.add(new Coordinate(s.coord),!1);for(var M=s.segmentIndex+1;M<=d.segmentIndex;M++)_.add(S._edge.getCoordinate(M));F&&_.add(new Coordinate(d.coord))};SegmentNodeList.prototype.iterator=function f(){return this._nodeMap.values().iterator()};SegmentNodeList.prototype.addSplitEdges=function f(s){var d=this;this.addEndpoints(),this.addCollapsedNodes();for(var _=this.iterator(),S=_.next();_.hasNext();){var T=_.next(),F=d.createSplitEdge(S,T);s.add(F),S=T}};SegmentNodeList.prototype.findCollapseIndex=function f(s,d,_){if(!s.coord.equals2D(d.coord))return!1;var S=d.segmentIndex-s.segmentIndex;return d.isInterior()||S--,S===1?(_[0]=s.segmentIndex+1,!0):!1};SegmentNodeList.prototype.findCollapsesFromInsertedNodes=function f(s){for(var d=this,_=new Array(1).fill(null),S=this.iterator(),T=S.next();S.hasNext();){var F=S.next(),M=d.findCollapseIndex(T,F,_);M&&s.add(new Integer(_[0])),T=F}};SegmentNodeList.prototype.getEdge=function f(){return this._edge};SegmentNodeList.prototype.addEndpoints=function f(){var s=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(s),s)};SegmentNodeList.prototype.createSplitEdge=function f(s,d){var _=this,S=d.segmentIndex-s.segmentIndex+2,T=this._edge.getCoordinate(d.segmentIndex),F=d.isInterior()||!d.coord.equals2D(T);F||S--;var M=new Array(S).fill(null),P=0;M[P++]=new Coordinate(s.coord);for(var H=s.segmentIndex+1;H<=d.segmentIndex;H++)M[P++]=_._edge.getCoordinate(H);return F&&(M[P]=new Coordinate(d.coord)),new NodedSegmentString(M,this._edge.getData())};SegmentNodeList.prototype.add=function f(s,d){var _=new SegmentNode(this._edge,s,d,this._edge.getSegmentOctant(d)),S=this._nodeMap.get(_);return S!==null?(Assert.isTrue(S.coord.equals2D(s),"Found equal nodes with different coordinates"),S):(this._nodeMap.put(_,_),_)};SegmentNodeList.prototype.checkSplitEdgesCorrectness=function f(s){var d=this._edge.getCoordinates(),_=s.get(0),S=_.getCoordinate(0);if(!S.equals2D(d[0]))throw new RuntimeException("bad split edge start point at "+S);var T=s.get(s.size()-1),F=T.getCoordinates(),M=F[F.length-1];if(!M.equals2D(d[d.length-1]))throw new RuntimeException("bad split edge end point at "+M)};SegmentNodeList.prototype.interfaces_=function f(){return[]};SegmentNodeList.prototype.getClass=function f(){return SegmentNodeList};var Octant=function f(){};Octant.prototype.interfaces_=function f(){return[]};Octant.prototype.getClass=function f(){return Octant};Octant.octant=function f(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],d=arguments[1];if(s===0&&d===0)throw new IllegalArgumentException("Cannot compute the octant for point ( "+s+", "+d+" )");var _=Math.abs(s),S=Math.abs(d);return s>=0?d>=0?_>=S?0:1:_>=S?7:6:d>=0?_>=S?3:2:_>=S?4:5}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Coordinate){var T=arguments[0],F=arguments[1],M=F.x-T.x,P=F.y-T.y;if(M===0&&P===0)throw new IllegalArgumentException("Cannot compute the octant for two identical points "+T);return Octant.octant(M,P)}};var SegmentString=function f(){};SegmentString.prototype.getCoordinates=function f(){};SegmentString.prototype.size=function f(){};SegmentString.prototype.getCoordinate=function f(s){};SegmentString.prototype.isClosed=function f(){};SegmentString.prototype.setData=function f(s){};SegmentString.prototype.getData=function f(){};SegmentString.prototype.interfaces_=function f(){return[]};SegmentString.prototype.getClass=function f(){return SegmentString};var NodableSegmentString=function f(){};NodableSegmentString.prototype.addIntersection=function f(s,d){};NodableSegmentString.prototype.interfaces_=function f(){return[SegmentString]};NodableSegmentString.prototype.getClass=function f(){return NodableSegmentString};var NodedSegmentString=function f(){this._nodeList=new SegmentNodeList(this),this._pts=null,this._data=null;var s=arguments[0],d=arguments[1];this._pts=s,this._data=d};NodedSegmentString.prototype.getCoordinates=function f(){return this._pts};NodedSegmentString.prototype.size=function f(){return this._pts.length};NodedSegmentString.prototype.getCoordinate=function f(s){return this._pts[s]};NodedSegmentString.prototype.isClosed=function f(){return this._pts[0].equals(this._pts[this._pts.length-1])};NodedSegmentString.prototype.getSegmentOctant=function f(s){return s===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(s),this.getCoordinate(s+1))};NodedSegmentString.prototype.setData=function f(s){this._data=s};NodedSegmentString.prototype.safeOctant=function f(s,d){return s.equals2D(d)?0:Octant.octant(s,d)};NodedSegmentString.prototype.getData=function f(){return this._data};NodedSegmentString.prototype.addIntersection=function f(){if(arguments.length===2){var s=arguments[0],d=arguments[1];this.addIntersectionNode(s,d)}else if(arguments.length===4){var _=arguments[0],S=arguments[1],T=arguments[3],F=new Coordinate(_.getIntersection(T));this.addIntersection(F,S)}};NodedSegmentString.prototype.toString=function f(){return WKTWriter.toLineString(new CoordinateArraySequence(this._pts))};NodedSegmentString.prototype.getNodeList=function f(){return this._nodeList};NodedSegmentString.prototype.addIntersectionNode=function f(s,d){var _=d,S=_+1;if(S<this._pts.length){var T=this._pts[S];s.equals2D(T)&&(_=S)}var F=this._nodeList.add(s,_);return F};NodedSegmentString.prototype.addIntersections=function f(s,d,_){for(var S=this,T=0;T<s.getIntersectionNum();T++)S.addIntersection(s,d,_,T)};NodedSegmentString.prototype.interfaces_=function f(){return[NodableSegmentString]};NodedSegmentString.prototype.getClass=function f(){return NodedSegmentString};NodedSegmentString.getNodedSubstrings=function f(){if(arguments.length===1){var s=arguments[0],d=new ArrayList;return NodedSegmentString.getNodedSubstrings(s,d),d}else if(arguments.length===2)for(var _=arguments[0],S=arguments[1],T=_.iterator();T.hasNext();){var F=T.next();F.getNodeList().addSplitEdges(S)}};var LineSegment=function f(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new Coordinate,this.p1=new Coordinate;else if(arguments.length===1){var s=arguments[0];this.p0=new Coordinate(s.p0),this.p1=new Coordinate(s.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var d=arguments[0],_=arguments[1],S=arguments[2],T=arguments[3];this.p0=new Coordinate(d,_),this.p1=new Coordinate(S,T)}},staticAccessors$24={serialVersionUID:{configurable:!0}};LineSegment.prototype.minX=function f(){return Math.min(this.p0.x,this.p1.x)};LineSegment.prototype.orientationIndex=function f(){if(arguments[0]instanceof LineSegment){var s=arguments[0],d=CGAlgorithms.orientationIndex(this.p0,this.p1,s.p0),_=CGAlgorithms.orientationIndex(this.p0,this.p1,s.p1);return d>=0&&_>=0||d<=0&&_<=0?Math.max(d,_):0}else if(arguments[0]instanceof Coordinate){var S=arguments[0];return CGAlgorithms.orientationIndex(this.p0,this.p1,S)}};LineSegment.prototype.toGeometry=function f(s){return s.createLineString([this.p0,this.p1])};LineSegment.prototype.isVertical=function f(){return this.p0.x===this.p1.x};LineSegment.prototype.equals=function f(s){if(!(s instanceof LineSegment))return!1;var d=s;return this.p0.equals(d.p0)&&this.p1.equals(d.p1)};LineSegment.prototype.intersection=function f(s){var d=new RobustLineIntersector;return d.computeIntersection(this.p0,this.p1,s.p0,s.p1),d.hasIntersection()?d.getIntersection(0):null};LineSegment.prototype.project=function f(){if(arguments[0]instanceof Coordinate){var s=arguments[0];if(s.equals(this.p0)||s.equals(this.p1))return new Coordinate(s);var d=this.projectionFactor(s),_=new Coordinate;return _.x=this.p0.x+d*(this.p1.x-this.p0.x),_.y=this.p0.y+d*(this.p1.y-this.p0.y),_}else if(arguments[0]instanceof LineSegment){var S=arguments[0],T=this.projectionFactor(S.p0),F=this.projectionFactor(S.p1);if(T>=1&&F>=1||T<=0&&F<=0)return null;var M=this.project(S.p0);T<0&&(M=this.p0),T>1&&(M=this.p1);var P=this.project(S.p1);return F<0&&(P=this.p0),F>1&&(P=this.p1),new LineSegment(M,P)}};LineSegment.prototype.normalize=function f(){this.p1.compareTo(this.p0)<0&&this.reverse()};LineSegment.prototype.angle=function f(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};LineSegment.prototype.getCoordinate=function f(s){return s===0?this.p0:this.p1};LineSegment.prototype.distancePerpendicular=function f(s){return CGAlgorithms.distancePointLinePerpendicular(s,this.p0,this.p1)};LineSegment.prototype.minY=function f(){return Math.min(this.p0.y,this.p1.y)};LineSegment.prototype.midPoint=function f(){return LineSegment.midPoint(this.p0,this.p1)};LineSegment.prototype.projectionFactor=function f(s){if(s.equals(this.p0))return 0;if(s.equals(this.p1))return 1;var d=this.p1.x-this.p0.x,_=this.p1.y-this.p0.y,S=d*d+_*_;if(S<=0)return Double.NaN;var T=((s.x-this.p0.x)*d+(s.y-this.p0.y)*_)/S;return T};LineSegment.prototype.closestPoints=function f(s){var d=this.intersection(s);if(d!==null)return[d,d];var _=new Array(2).fill(null),S=Double.MAX_VALUE,T=null,F=this.closestPoint(s.p0);S=F.distance(s.p0),_[0]=F,_[1]=s.p0;var M=this.closestPoint(s.p1);T=M.distance(s.p1),T<S&&(S=T,_[0]=M,_[1]=s.p1);var P=s.closestPoint(this.p0);T=P.distance(this.p0),T<S&&(S=T,_[0]=this.p0,_[1]=P);var H=s.closestPoint(this.p1);return T=H.distance(this.p1),T<S&&(S=T,_[0]=this.p1,_[1]=H),_};LineSegment.prototype.closestPoint=function f(s){var d=this.projectionFactor(s);if(d>0&&d<1)return this.project(s);var _=this.p0.distance(s),S=this.p1.distance(s);return _<S?this.p0:this.p1};LineSegment.prototype.maxX=function f(){return Math.max(this.p0.x,this.p1.x)};LineSegment.prototype.getLength=function f(){return this.p0.distance(this.p1)};LineSegment.prototype.compareTo=function f(s){var d=s,_=this.p0.compareTo(d.p0);return _!==0?_:this.p1.compareTo(d.p1)};LineSegment.prototype.reverse=function f(){var s=this.p0;this.p0=this.p1,this.p1=s};LineSegment.prototype.equalsTopo=function f(s){return this.p0.equals(s.p0)&&(this.p1.equals(s.p1)||this.p0.equals(s.p1))&&this.p1.equals(s.p0)};LineSegment.prototype.lineIntersection=function f(s){try{var d=HCoordinate.intersection(this.p0,this.p1,s.p0,s.p1);return d}catch(_){if(!(_ instanceof NotRepresentableException))throw _}finally{}return null};LineSegment.prototype.maxY=function f(){return Math.max(this.p0.y,this.p1.y)};LineSegment.prototype.pointAlongOffset=function f(s,d){var _=this.p0.x+s*(this.p1.x-this.p0.x),S=this.p0.y+s*(this.p1.y-this.p0.y),T=this.p1.x-this.p0.x,F=this.p1.y-this.p0.y,M=Math.sqrt(T*T+F*F),P=0,H=0;if(d!==0){if(M<=0)throw new Error("Cannot compute offset from zero-length line segment");P=d*T/M,H=d*F/M}var J=_-H,K=S+P,z=new Coordinate(J,K);return z};LineSegment.prototype.setCoordinates=function f(){if(arguments.length===1){var s=arguments[0];this.setCoordinates(s.p0,s.p1)}else if(arguments.length===2){var d=arguments[0],_=arguments[1];this.p0.x=d.x,this.p0.y=d.y,this.p1.x=_.x,this.p1.y=_.y}};LineSegment.prototype.segmentFraction=function f(s){var d=this.projectionFactor(s);return d<0?d=0:(d>1||Double.isNaN(d))&&(d=1),d};LineSegment.prototype.toString=function f(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};LineSegment.prototype.isHorizontal=function f(){return this.p0.y===this.p1.y};LineSegment.prototype.distance=function f(){if(arguments[0]instanceof LineSegment){var s=arguments[0];return CGAlgorithms.distanceLineLine(this.p0,this.p1,s.p0,s.p1)}else if(arguments[0]instanceof Coordinate){var d=arguments[0];return CGAlgorithms.distancePointLine(d,this.p0,this.p1)}};LineSegment.prototype.pointAlong=function f(s){var d=new Coordinate;return d.x=this.p0.x+s*(this.p1.x-this.p0.x),d.y=this.p0.y+s*(this.p1.y-this.p0.y),d};LineSegment.prototype.hashCode=function f(){var s=Double.doubleToLongBits(this.p0.x);s^=Double.doubleToLongBits(this.p0.y)*31;var d=Math.trunc(s)^Math.trunc(s>>32),_=Double.doubleToLongBits(this.p1.x);_^=Double.doubleToLongBits(this.p1.y)*31;var S=Math.trunc(_)^Math.trunc(_>>32);return d^S};LineSegment.prototype.interfaces_=function f(){return[Comparable,Serializable]};LineSegment.prototype.getClass=function f(){return LineSegment};LineSegment.midPoint=function f(s,d){return new Coordinate((s.x+d.x)/2,(s.y+d.y)/2)};staticAccessors$24.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(LineSegment,staticAccessors$24);var MonotoneChainOverlapAction=function f(){this.tempEnv1=new Envelope,this.tempEnv2=new Envelope,this._overlapSeg1=new LineSegment,this._overlapSeg2=new LineSegment};MonotoneChainOverlapAction.prototype.overlap=function f(){if(arguments.length!==2){if(arguments.length===4){var s=arguments[0],d=arguments[1],_=arguments[2],S=arguments[3];s.getLineSegment(d,this._overlapSeg1),_.getLineSegment(S,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}};MonotoneChainOverlapAction.prototype.interfaces_=function f(){return[]};MonotoneChainOverlapAction.prototype.getClass=function f(){return MonotoneChainOverlapAction};var MonotoneChain=function f(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var s=arguments[0],d=arguments[1],_=arguments[2],S=arguments[3];this._pts=s,this._start=d,this._end=_,this._context=S};MonotoneChain.prototype.getLineSegment=function f(s,d){d.p0=this._pts[s],d.p1=this._pts[s+1]};MonotoneChain.prototype.computeSelect=function f(s,d,_,S){var T=this._pts[d],F=this._pts[_];if(S.tempEnv1.init(T,F),_-d===1)return S.select(this,d),null;if(!s.intersects(S.tempEnv1))return null;var M=Math.trunc((d+_)/2);d<M&&this.computeSelect(s,d,M,S),M<_&&this.computeSelect(s,M,_,S)};MonotoneChain.prototype.getCoordinates=function f(){for(var s=this,d=new Array(this._end-this._start+1).fill(null),_=0,S=this._start;S<=this._end;S++)d[_++]=s._pts[S];return d};MonotoneChain.prototype.computeOverlaps=function f(s,d){this.computeOverlapsInternal(this._start,this._end,s,s._start,s._end,d)};MonotoneChain.prototype.setId=function f(s){this._id=s};MonotoneChain.prototype.select=function f(s,d){this.computeSelect(s,this._start,this._end,d)};MonotoneChain.prototype.getEnvelope=function f(){if(this._env===null){var s=this._pts[this._start],d=this._pts[this._end];this._env=new Envelope(s,d)}return this._env};MonotoneChain.prototype.getEndIndex=function f(){return this._end};MonotoneChain.prototype.getStartIndex=function f(){return this._start};MonotoneChain.prototype.getContext=function f(){return this._context};MonotoneChain.prototype.getId=function f(){return this._id};MonotoneChain.prototype.computeOverlapsInternal=function f(s,d,_,S,T,F){var M=this._pts[s],P=this._pts[d],H=_._pts[S],J=_._pts[T];if(d-s===1&&T-S===1)return F.overlap(this,s,_,S),null;if(F.tempEnv1.init(M,P),F.tempEnv2.init(H,J),!F.tempEnv1.intersects(F.tempEnv2))return null;var K=Math.trunc((s+d)/2),z=Math.trunc((S+T)/2);s<K&&(S<z&&this.computeOverlapsInternal(s,K,_,S,z,F),z<T&&this.computeOverlapsInternal(s,K,_,z,T,F)),K<d&&(S<z&&this.computeOverlapsInternal(K,d,_,S,z,F),z<T&&this.computeOverlapsInternal(K,d,_,z,T,F))};MonotoneChain.prototype.interfaces_=function f(){return[]};MonotoneChain.prototype.getClass=function f(){return MonotoneChain};var MonotoneChainBuilder=function f(){};MonotoneChainBuilder.prototype.interfaces_=function f(){return[]};MonotoneChainBuilder.prototype.getClass=function f(){return MonotoneChainBuilder};MonotoneChainBuilder.getChainStartIndices=function f(s){var d=0,_=new ArrayList;_.add(new Integer(d));do{var S=MonotoneChainBuilder.findChainEnd(s,d);_.add(new Integer(S)),d=S}while(d<s.length-1);var T=MonotoneChainBuilder.toIntArray(_);return T};MonotoneChainBuilder.findChainEnd=function f(s,d){for(var _=d;_<s.length-1&&s[_].equals2D(s[_+1]);)_++;if(_>=s.length-1)return s.length-1;for(var S=Quadrant.quadrant(s[_],s[_+1]),T=d+1;T<s.length;){if(!s[T-1].equals2D(s[T])){var F=Quadrant.quadrant(s[T-1],s[T]);if(F!==S)break}T++}return T-1};MonotoneChainBuilder.getChains=function f(){if(arguments.length===1){var s=arguments[0];return MonotoneChainBuilder.getChains(s,null)}else if(arguments.length===2){for(var d=arguments[0],_=arguments[1],S=new ArrayList,T=MonotoneChainBuilder.getChainStartIndices(d),F=0;F<T.length-1;F++){var M=new MonotoneChain(d,T[F],T[F+1],_);S.add(M)}return S}};MonotoneChainBuilder.toIntArray=function f(s){for(var d=new Array(s.size()).fill(null),_=0;_<d.length;_++)d[_]=s.get(_).intValue();return d};var Noder=function f(){};Noder.prototype.computeNodes=function f(s){};Noder.prototype.getNodedSubstrings=function f(){};Noder.prototype.interfaces_=function f(){return[]};Noder.prototype.getClass=function f(){return Noder};var SinglePassNoder=function f(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var s=arguments[0];this.setSegmentIntersector(s)}}};SinglePassNoder.prototype.setSegmentIntersector=function f(s){this._segInt=s};SinglePassNoder.prototype.interfaces_=function f(){return[Noder]};SinglePassNoder.prototype.getClass=function f(){return SinglePassNoder};var MCIndexNoder=function(f){function s(_){_?f.call(this,_):f.call(this),this._monoChains=new ArrayList,this._index=new STRtree,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s;var d={SegmentOverlapAction:{configurable:!0}};return s.prototype.getMonotoneChains=function(){return this._monoChains},s.prototype.getNodedSubstrings=function(){return NodedSegmentString.getNodedSubstrings(this._nodedSegStrings)},s.prototype.getIndex=function(){return this._index},s.prototype.add=function(S){for(var T=this,F=MonotoneChainBuilder.getChains(S.getCoordinates(),S),M=F.iterator();M.hasNext();){var P=M.next();P.setId(T._idCounter++),T._index.insert(P.getEnvelope(),P),T._monoChains.add(P)}},s.prototype.computeNodes=function(S){var T=this;this._nodedSegStrings=S;for(var F=S.iterator();F.hasNext();)T.add(F.next());this.intersectChains()},s.prototype.intersectChains=function(){for(var S=this,T=new SegmentOverlapAction(this._segInt),F=this._monoChains.iterator();F.hasNext();)for(var M=F.next(),P=S._index.query(M.getEnvelope()),H=P.iterator();H.hasNext();){var J=H.next();if(J.getId()>M.getId()&&(M.computeOverlaps(J,T),S._nOverlaps++),S._segInt.isDone())return null}},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},d.SegmentOverlapAction.get=function(){return SegmentOverlapAction},Object.defineProperties(s,d),s}(SinglePassNoder),SegmentOverlapAction=function(f){function s(){f.call(this),this._si=null;var d=arguments[0];this._si=d}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.overlap=function(){if(arguments.length===4){var _=arguments[0],S=arguments[1],T=arguments[2],F=arguments[3],M=_.getContext(),P=T.getContext();this._si.processIntersections(M,S,P,F)}else return f.prototype.overlap.apply(this,arguments)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(MonotoneChainOverlapAction),BufferParameters=function f(){if(this._quadrantSegments=f.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=f.CAP_ROUND,this._joinStyle=f.JOIN_ROUND,this._mitreLimit=f.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=f.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var s=arguments[0];this.setQuadrantSegments(s)}else if(arguments.length===2){var d=arguments[0],_=arguments[1];this.setQuadrantSegments(d),this.setEndCapStyle(_)}else if(arguments.length===4){var S=arguments[0],T=arguments[1],F=arguments[2],M=arguments[3];this.setQuadrantSegments(S),this.setEndCapStyle(T),this.setJoinStyle(F),this.setMitreLimit(M)}}},staticAccessors$25={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};BufferParameters.prototype.getEndCapStyle=function f(){return this._endCapStyle};BufferParameters.prototype.isSingleSided=function f(){return this._isSingleSided};BufferParameters.prototype.setQuadrantSegments=function f(s){this._quadrantSegments=s,this._quadrantSegments===0&&(this._joinStyle=BufferParameters.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=BufferParameters.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),s<=0&&(this._quadrantSegments=1),this._joinStyle!==BufferParameters.JOIN_ROUND&&(this._quadrantSegments=BufferParameters.DEFAULT_QUADRANT_SEGMENTS)};BufferParameters.prototype.getJoinStyle=function f(){return this._joinStyle};BufferParameters.prototype.setJoinStyle=function f(s){this._joinStyle=s};BufferParameters.prototype.setSimplifyFactor=function f(s){this._simplifyFactor=s<0?0:s};BufferParameters.prototype.getSimplifyFactor=function f(){return this._simplifyFactor};BufferParameters.prototype.getQuadrantSegments=function f(){return this._quadrantSegments};BufferParameters.prototype.setEndCapStyle=function f(s){this._endCapStyle=s};BufferParameters.prototype.getMitreLimit=function f(){return this._mitreLimit};BufferParameters.prototype.setMitreLimit=function f(s){this._mitreLimit=s};BufferParameters.prototype.setSingleSided=function f(s){this._isSingleSided=s};BufferParameters.prototype.interfaces_=function f(){return[]};BufferParameters.prototype.getClass=function f(){return BufferParameters};BufferParameters.bufferDistanceError=function f(s){var d=Math.PI/2/s;return 1-Math.cos(d/2)};staticAccessors$25.CAP_ROUND.get=function(){return 1};staticAccessors$25.CAP_FLAT.get=function(){return 2};staticAccessors$25.CAP_SQUARE.get=function(){return 3};staticAccessors$25.JOIN_ROUND.get=function(){return 1};staticAccessors$25.JOIN_MITRE.get=function(){return 2};staticAccessors$25.JOIN_BEVEL.get=function(){return 3};staticAccessors$25.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};staticAccessors$25.DEFAULT_MITRE_LIMIT.get=function(){return 5};staticAccessors$25.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(BufferParameters,staticAccessors$25);var BufferInputLineSimplifier=function f(s){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=CGAlgorithms.COUNTERCLOCKWISE,this._inputLine=s||null},staticAccessors$26={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};BufferInputLineSimplifier.prototype.isDeletable=function f(s,d,_,S){var T=this._inputLine[s],F=this._inputLine[d],M=this._inputLine[_];return!this.isConcave(T,F,M)||!this.isShallow(T,F,M,S)?!1:this.isShallowSampled(T,F,s,_,S)};BufferInputLineSimplifier.prototype.deleteShallowConcavities=function f(){for(var s=this,d=1,_=this.findNextNonDeletedIndex(d),S=this.findNextNonDeletedIndex(_),T=!1;S<this._inputLine.length;){var F=!1;s.isDeletable(d,_,S,s._distanceTol)&&(s._isDeleted[_]=BufferInputLineSimplifier.DELETE,F=!0,T=!0),F?d=S:d=_,_=s.findNextNonDeletedIndex(d),S=s.findNextNonDeletedIndex(_)}return T};BufferInputLineSimplifier.prototype.isShallowConcavity=function f(s,d,_,S){var T=CGAlgorithms.computeOrientation(s,d,_),F=T===this._angleOrientation;if(!F)return!1;var M=CGAlgorithms.distancePointLine(d,s,_);return M<S};BufferInputLineSimplifier.prototype.isShallowSampled=function f(s,d,_,S,T){var F=this,M=Math.trunc((S-_)/BufferInputLineSimplifier.NUM_PTS_TO_CHECK);M<=0&&(M=1);for(var P=_;P<S;P+=M)if(!F.isShallow(s,d,F._inputLine[P],T))return!1;return!0};BufferInputLineSimplifier.prototype.isConcave=function f(s,d,_){var S=CGAlgorithms.computeOrientation(s,d,_),T=S===this._angleOrientation;return T};BufferInputLineSimplifier.prototype.simplify=function f(s){var d=this;this._distanceTol=Math.abs(s),s<0&&(this._angleOrientation=CGAlgorithms.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var _=!1;do _=d.deleteShallowConcavities();while(_);return this.collapseLine()};BufferInputLineSimplifier.prototype.findNextNonDeletedIndex=function f(s){for(var d=s+1;d<this._inputLine.length&&this._isDeleted[d]===BufferInputLineSimplifier.DELETE;)d++;return d};BufferInputLineSimplifier.prototype.isShallow=function f(s,d,_,S){var T=CGAlgorithms.distancePointLine(d,s,_);return T<S};BufferInputLineSimplifier.prototype.collapseLine=function f(){for(var s=this,d=new CoordinateList,_=0;_<this._inputLine.length;_++)s._isDeleted[_]!==BufferInputLineSimplifier.DELETE&&d.add(s._inputLine[_]);return d.toCoordinateArray()};BufferInputLineSimplifier.prototype.interfaces_=function f(){return[]};BufferInputLineSimplifier.prototype.getClass=function f(){return BufferInputLineSimplifier};BufferInputLineSimplifier.simplify=function f(s,d){var _=new BufferInputLineSimplifier(s);return _.simplify(d)};staticAccessors$26.INIT.get=function(){return 0};staticAccessors$26.DELETE.get=function(){return 1};staticAccessors$26.KEEP.get=function(){return 1};staticAccessors$26.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(BufferInputLineSimplifier,staticAccessors$26);var OffsetSegmentString=function f(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ArrayList},staticAccessors$28={COORDINATE_ARRAY_TYPE:{configurable:!0}};OffsetSegmentString.prototype.getCoordinates=function f(){var s=this._ptList.toArray(OffsetSegmentString.COORDINATE_ARRAY_TYPE);return s};OffsetSegmentString.prototype.setPrecisionModel=function f(s){this._precisionModel=s};OffsetSegmentString.prototype.addPt=function f(s){var d=new Coordinate(s);if(this._precisionModel.makePrecise(d),this.isRedundant(d))return null;this._ptList.add(d)};OffsetSegmentString.prototype.revere=function f(){};OffsetSegmentString.prototype.addPts=function f(s,d){var _=this;if(d)for(var S=0;S<s.length;S++)_.addPt(s[S]);else for(var T=s.length-1;T>=0;T--)_.addPt(s[T])};OffsetSegmentString.prototype.isRedundant=function f(s){if(this._ptList.size()<1)return!1;var d=this._ptList.get(this._ptList.size()-1),_=s.distance(d);return _<this._minimimVertexDistance};OffsetSegmentString.prototype.toString=function f(){var s=new GeometryFactory,d=s.createLineString(this.getCoordinates());return d.toString()};OffsetSegmentString.prototype.closeRing=function f(){if(this._ptList.size()<1)return null;var s=new Coordinate(this._ptList.get(0)),d=this._ptList.get(this._ptList.size()-1);if(s.equals(d))return null;this._ptList.add(s)};OffsetSegmentString.prototype.setMinimumVertexDistance=function f(s){this._minimimVertexDistance=s};OffsetSegmentString.prototype.interfaces_=function f(){return[]};OffsetSegmentString.prototype.getClass=function f(){return OffsetSegmentString};staticAccessors$28.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(OffsetSegmentString,staticAccessors$28);var Angle=function f(){},staticAccessors$29={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Angle.prototype.interfaces_=function f(){return[]};Angle.prototype.getClass=function f(){return Angle};Angle.toDegrees=function f(s){return s*180/Math.PI};Angle.normalize=function f(s){for(;s>Math.PI;)s-=Angle.PI_TIMES_2;for(;s<=-Math.PI;)s+=Angle.PI_TIMES_2;return s};Angle.angle=function f(){if(arguments.length===1){var s=arguments[0];return Math.atan2(s.y,s.x)}else if(arguments.length===2){var d=arguments[0],_=arguments[1],S=_.x-d.x,T=_.y-d.y;return Math.atan2(T,S)}};Angle.isAcute=function f(s,d,_){var S=s.x-d.x,T=s.y-d.y,F=_.x-d.x,M=_.y-d.y,P=S*F+T*M;return P>0};Angle.isObtuse=function f(s,d,_){var S=s.x-d.x,T=s.y-d.y,F=_.x-d.x,M=_.y-d.y,P=S*F+T*M;return P<0};Angle.interiorAngle=function f(s,d,_){var S=Angle.angle(d,s),T=Angle.angle(d,_);return Math.abs(T-S)};Angle.normalizePositive=function f(s){if(s<0){for(;s<0;)s+=Angle.PI_TIMES_2;s>=Angle.PI_TIMES_2&&(s=0)}else{for(;s>=Angle.PI_TIMES_2;)s-=Angle.PI_TIMES_2;s<0&&(s=0)}return s};Angle.angleBetween=function f(s,d,_){var S=Angle.angle(d,s),T=Angle.angle(d,_);return Angle.diff(S,T)};Angle.diff=function f(s,d){var _=null;return s<d?_=d-s:_=s-d,_>Math.PI&&(_=2*Math.PI-_),_};Angle.toRadians=function f(s){return s*Math.PI/180};Angle.getTurn=function f(s,d){var _=Math.sin(d-s);return _>0?Angle.COUNTERCLOCKWISE:_<0?Angle.CLOCKWISE:Angle.NONE};Angle.angleBetweenOriented=function f(s,d,_){var S=Angle.angle(d,s),T=Angle.angle(d,_),F=T-S;return F<=-Math.PI?F+Angle.PI_TIMES_2:F>Math.PI?F-Angle.PI_TIMES_2:F};staticAccessors$29.PI_TIMES_2.get=function(){return 2*Math.PI};staticAccessors$29.PI_OVER_2.get=function(){return Math.PI/2};staticAccessors$29.PI_OVER_4.get=function(){return Math.PI/4};staticAccessors$29.COUNTERCLOCKWISE.get=function(){return CGAlgorithms.COUNTERCLOCKWISE};staticAccessors$29.CLOCKWISE.get=function(){return CGAlgorithms.CLOCKWISE};staticAccessors$29.NONE.get=function(){return CGAlgorithms.COLLINEAR};Object.defineProperties(Angle,staticAccessors$29);var OffsetSegmentGenerator=function f(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new LineSegment,this._seg1=new LineSegment,this._offset0=new LineSegment,this._offset1=new LineSegment,this._side=0,this._hasNarrowConcaveAngle=!1;var s=arguments[0],d=arguments[1],_=arguments[2];this._precisionModel=s,this._bufParams=d,this._li=new RobustLineIntersector,this._filletAngleQuantum=Math.PI/2/d.getQuadrantSegments(),d.getQuadrantSegments()>=8&&d.getJoinStyle()===BufferParameters.JOIN_ROUND&&(this._closingSegLengthFactor=f.MAX_CLOSING_SEG_LEN_FACTOR),this.init(_)},staticAccessors$27={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};OffsetSegmentGenerator.prototype.addNextSegment=function f(s,d){if(this._s0=this._s1,this._s1=this._s2,this._s2=s,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var _=CGAlgorithms.computeOrientation(this._s0,this._s1,this._s2),S=_===CGAlgorithms.CLOCKWISE&&this._side===Position.LEFT||_===CGAlgorithms.COUNTERCLOCKWISE&&this._side===Position.RIGHT;_===0?this.addCollinear(d):S?this.addOutsideTurn(_,d):this.addInsideTurn(_,d)};OffsetSegmentGenerator.prototype.addLineEndCap=function f(s,d){var _=new LineSegment(s,d),S=new LineSegment;this.computeOffsetSegment(_,Position.LEFT,this._distance,S);var T=new LineSegment;this.computeOffsetSegment(_,Position.RIGHT,this._distance,T);var F=d.x-s.x,M=d.y-s.y,P=Math.atan2(M,F);switch(this._bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:this._segList.addPt(S.p1),this.addFilletArc(d,P+Math.PI/2,P-Math.PI/2,CGAlgorithms.CLOCKWISE,this._distance),this._segList.addPt(T.p1);break;case BufferParameters.CAP_FLAT:this._segList.addPt(S.p1),this._segList.addPt(T.p1);break;case BufferParameters.CAP_SQUARE:var H=new Coordinate;H.x=Math.abs(this._distance)*Math.cos(P),H.y=Math.abs(this._distance)*Math.sin(P);var J=new Coordinate(S.p1.x+H.x,S.p1.y+H.y),K=new Coordinate(T.p1.x+H.x,T.p1.y+H.y);this._segList.addPt(J),this._segList.addPt(K);break}};OffsetSegmentGenerator.prototype.getCoordinates=function f(){var s=this._segList.getCoordinates();return s};OffsetSegmentGenerator.prototype.addMitreJoin=function f(s,d,_,S){var T=!0,F=null;try{F=HCoordinate.intersection(d.p0,d.p1,_.p0,_.p1);var M=S<=0?1:F.distance(s)/Math.abs(S);M>this._bufParams.getMitreLimit()&&(T=!1)}catch(P){if(P instanceof NotRepresentableException)F=new Coordinate(0,0),T=!1;else throw P}finally{}T?this._segList.addPt(F):this.addLimitedMitreJoin(d,_,S,this._bufParams.getMitreLimit())};OffsetSegmentGenerator.prototype.addFilletCorner=function f(s,d,_,S,T){var F=d.x-s.x,M=d.y-s.y,P=Math.atan2(M,F),H=_.x-s.x,J=_.y-s.y,K=Math.atan2(J,H);S===CGAlgorithms.CLOCKWISE?P<=K&&(P+=2*Math.PI):P>=K&&(P-=2*Math.PI),this._segList.addPt(d),this.addFilletArc(s,P,K,S,T),this._segList.addPt(_)};OffsetSegmentGenerator.prototype.addOutsideTurn=function f(s,d){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(d&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,s,this._distance),this._segList.addPt(this._offset1.p0))};OffsetSegmentGenerator.prototype.createSquare=function f(s){this._segList.addPt(new Coordinate(s.x+this._distance,s.y+this._distance)),this._segList.addPt(new Coordinate(s.x+this._distance,s.y-this._distance)),this._segList.addPt(new Coordinate(s.x-this._distance,s.y-this._distance)),this._segList.addPt(new Coordinate(s.x-this._distance,s.y+this._distance)),this._segList.closeRing()};OffsetSegmentGenerator.prototype.addSegments=function f(s,d){this._segList.addPts(s,d)};OffsetSegmentGenerator.prototype.addFirstSegment=function f(){this._segList.addPt(this._offset1.p0)};OffsetSegmentGenerator.prototype.addLastSegment=function f(){this._segList.addPt(this._offset1.p1)};OffsetSegmentGenerator.prototype.initSideSegments=function f(s,d,_){this._s1=s,this._s2=d,this._side=_,this._seg1.setCoordinates(s,d),this.computeOffsetSegment(this._seg1,_,this._distance,this._offset1)};OffsetSegmentGenerator.prototype.addLimitedMitreJoin=function f(s,d,_,S){var T=this._seg0.p1,F=Angle.angle(T,this._seg0.p0),M=Angle.angleBetweenOriented(this._seg0.p0,T,this._seg1.p1),P=M/2,H=Angle.normalize(F+P),J=Angle.normalize(H+Math.PI),K=S*_,z=K*Math.abs(Math.sin(P)),oe=_-z,se=T.x+K*Math.cos(J),ae=T.y+K*Math.sin(J),ge=new Coordinate(se,ae),pe=new LineSegment(T,ge),he=pe.pointAlongOffset(1,oe),ve=pe.pointAlongOffset(1,-oe);this._side===Position.LEFT?(this._segList.addPt(he),this._segList.addPt(ve)):(this._segList.addPt(ve),this._segList.addPt(he))};OffsetSegmentGenerator.prototype.computeOffsetSegment=function f(s,d,_,S){var T=d===Position.LEFT?1:-1,F=s.p1.x-s.p0.x,M=s.p1.y-s.p0.y,P=Math.sqrt(F*F+M*M),H=T*_*F/P,J=T*_*M/P;S.p0.x=s.p0.x-J,S.p0.y=s.p0.y+H,S.p1.x=s.p1.x-J,S.p1.y=s.p1.y+H};OffsetSegmentGenerator.prototype.addFilletArc=function f(s,d,_,S,T){var F=this,M=S===CGAlgorithms.CLOCKWISE?-1:1,P=Math.abs(d-_),H=Math.trunc(P/this._filletAngleQuantum+.5);if(H<1)return null;for(var J=0,K=P/H,z=J,oe=new Coordinate;z<P;){var se=d+M*z;oe.x=s.x+T*Math.cos(se),oe.y=s.y+T*Math.sin(se),F._segList.addPt(oe),z+=K}};OffsetSegmentGenerator.prototype.addInsideTurn=function f(s,d){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var _=new Coordinate((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(_);var S=new Coordinate((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(S)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};OffsetSegmentGenerator.prototype.createCircle=function f(s){var d=new Coordinate(s.x+this._distance,s.y);this._segList.addPt(d),this.addFilletArc(s,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};OffsetSegmentGenerator.prototype.addBevelJoin=function f(s,d){this._segList.addPt(s.p1),this._segList.addPt(d.p0)};OffsetSegmentGenerator.prototype.init=function f(s){this._distance=s,this._maxCurveSegmentError=s*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new OffsetSegmentString,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(s*OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};OffsetSegmentGenerator.prototype.addCollinear=function f(s){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var d=this._li.getIntersectionNum();d>=2&&(this._bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL||this._bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?(s&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,CGAlgorithms.CLOCKWISE,this._distance))};OffsetSegmentGenerator.prototype.closeRing=function f(){this._segList.closeRing()};OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=function f(){return this._hasNarrowConcaveAngle};OffsetSegmentGenerator.prototype.interfaces_=function f(){return[]};OffsetSegmentGenerator.prototype.getClass=function f(){return OffsetSegmentGenerator};staticAccessors$27.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};staticAccessors$27.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};staticAccessors$27.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};staticAccessors$27.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(OffsetSegmentGenerator,staticAccessors$27);var OffsetCurveBuilder=function f(){this._distance=0,this._precisionModel=null,this._bufParams=null;var s=arguments[0],d=arguments[1];this._precisionModel=s,this._bufParams=d};OffsetCurveBuilder.prototype.getOffsetCurve=function f(s,d){if(this._distance=d,d===0)return null;var _=d<0,S=Math.abs(d),T=this.getSegGen(S);s.length<=1?this.computePointCurve(s[0],T):this.computeOffsetCurve(s,_,T);var F=T.getCoordinates();return _&&CoordinateArrays.reverse(F),F};OffsetCurveBuilder.prototype.computeSingleSidedBufferCurve=function f(s,d,_){var S=this.simplifyTolerance(this._distance);if(d){_.addSegments(s,!0);var T=BufferInputLineSimplifier.simplify(s,-S),F=T.length-1;_.initSideSegments(T[F],T[F-1],Position.LEFT),_.addFirstSegment();for(var M=F-2;M>=0;M--)_.addNextSegment(T[M],!0)}else{_.addSegments(s,!1);var P=BufferInputLineSimplifier.simplify(s,S),H=P.length-1;_.initSideSegments(P[0],P[1],Position.LEFT),_.addFirstSegment();for(var J=2;J<=H;J++)_.addNextSegment(P[J],!0)}_.addLastSegment(),_.closeRing()};OffsetCurveBuilder.prototype.computeRingBufferCurve=function f(s,d,_){var S=this.simplifyTolerance(this._distance);d===Position.RIGHT&&(S=-S);var T=BufferInputLineSimplifier.simplify(s,S),F=T.length-1;_.initSideSegments(T[F-1],T[0],d);for(var M=1;M<=F;M++){var P=M!==1;_.addNextSegment(T[M],P)}_.closeRing()};OffsetCurveBuilder.prototype.computeLineBufferCurve=function f(s,d){var _=this.simplifyTolerance(this._distance),S=BufferInputLineSimplifier.simplify(s,_),T=S.length-1;d.initSideSegments(S[0],S[1],Position.LEFT);for(var F=2;F<=T;F++)d.addNextSegment(S[F],!0);d.addLastSegment(),d.addLineEndCap(S[T-1],S[T]);var M=BufferInputLineSimplifier.simplify(s,-_),P=M.length-1;d.initSideSegments(M[P],M[P-1],Position.LEFT);for(var H=P-2;H>=0;H--)d.addNextSegment(M[H],!0);d.addLastSegment(),d.addLineEndCap(M[1],M[0]),d.closeRing()};OffsetCurveBuilder.prototype.computePointCurve=function f(s,d){switch(this._bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:d.createCircle(s);break;case BufferParameters.CAP_SQUARE:d.createSquare(s);break}};OffsetCurveBuilder.prototype.getLineCurve=function f(s,d){if(this._distance=d,d<0&&!this._bufParams.isSingleSided()||d===0)return null;var _=Math.abs(d),S=this.getSegGen(_);if(s.length<=1)this.computePointCurve(s[0],S);else if(this._bufParams.isSingleSided()){var T=d<0;this.computeSingleSidedBufferCurve(s,T,S)}else this.computeLineBufferCurve(s,S);var F=S.getCoordinates();return F};OffsetCurveBuilder.prototype.getBufferParameters=function f(){return this._bufParams};OffsetCurveBuilder.prototype.simplifyTolerance=function f(s){return s*this._bufParams.getSimplifyFactor()};OffsetCurveBuilder.prototype.getRingCurve=function f(s,d,_){if(this._distance=_,s.length<=2)return this.getLineCurve(s,_);if(_===0)return OffsetCurveBuilder.copyCoordinates(s);var S=this.getSegGen(_);return this.computeRingBufferCurve(s,d,S),S.getCoordinates()};OffsetCurveBuilder.prototype.computeOffsetCurve=function f(s,d,_){var S=this.simplifyTolerance(this._distance);if(d){var T=BufferInputLineSimplifier.simplify(s,-S),F=T.length-1;_.initSideSegments(T[F],T[F-1],Position.LEFT),_.addFirstSegment();for(var M=F-2;M>=0;M--)_.addNextSegment(T[M],!0)}else{var P=BufferInputLineSimplifier.simplify(s,S),H=P.length-1;_.initSideSegments(P[0],P[1],Position.LEFT),_.addFirstSegment();for(var J=2;J<=H;J++)_.addNextSegment(P[J],!0)}_.addLastSegment()};OffsetCurveBuilder.prototype.getSegGen=function f(s){return new OffsetSegmentGenerator(this._precisionModel,this._bufParams,s)};OffsetCurveBuilder.prototype.interfaces_=function f(){return[]};OffsetCurveBuilder.prototype.getClass=function f(){return OffsetCurveBuilder};OffsetCurveBuilder.copyCoordinates=function f(s){for(var d=new Array(s.length).fill(null),_=0;_<d.length;_++)d[_]=new Coordinate(s[_]);return d};var SubgraphDepthLocater=function f(){this._subgraphs=null,this._seg=new LineSegment,this._cga=new CGAlgorithms;var s=arguments[0];this._subgraphs=s},staticAccessors$30={DepthSegment:{configurable:!0}};SubgraphDepthLocater.prototype.findStabbedSegments=function f(){var s=this;if(arguments.length===1){for(var d=arguments[0],_=new ArrayList,S=this._subgraphs.iterator();S.hasNext();){var T=S.next(),F=T.getEnvelope();d.y<F.getMinY()||d.y>F.getMaxY()||s.findStabbedSegments(d,T.getDirectedEdges(),_)}return _}else if(arguments.length===3){if(hasInterface(arguments[2],List)&&arguments[0]instanceof Coordinate&&arguments[1]instanceof DirectedEdge)for(var M=arguments[0],P=arguments[1],H=arguments[2],J=P.getEdge().getCoordinates(),K=0;K<J.length-1;K++){s._seg.p0=J[K],s._seg.p1=J[K+1],s._seg.p0.y>s._seg.p1.y&&s._seg.reverse();var z=Math.max(s._seg.p0.x,s._seg.p1.x);if(!(z<M.x)&&!s._seg.isHorizontal()&&!(M.y<s._seg.p0.y||M.y>s._seg.p1.y)&&CGAlgorithms.computeOrientation(s._seg.p0,s._seg.p1,M)!==CGAlgorithms.RIGHT){var oe=P.getDepth(Position.LEFT);s._seg.p0.equals(J[K])||(oe=P.getDepth(Position.RIGHT));var se=new DepthSegment(s._seg,oe);H.add(se)}}else if(hasInterface(arguments[2],List)&&arguments[0]instanceof Coordinate&&hasInterface(arguments[1],List))for(var ae=arguments[0],ge=arguments[1],pe=arguments[2],he=ge.iterator();he.hasNext();){var ve=he.next();ve.isForward()&&s.findStabbedSegments(ae,ve,pe)}}};SubgraphDepthLocater.prototype.getDepth=function f(s){var d=this.findStabbedSegments(s);if(d.size()===0)return 0;var _=Collections.min(d);return _._leftDepth};SubgraphDepthLocater.prototype.interfaces_=function f(){return[]};SubgraphDepthLocater.prototype.getClass=function f(){return SubgraphDepthLocater};staticAccessors$30.DepthSegment.get=function(){return DepthSegment};Object.defineProperties(SubgraphDepthLocater,staticAccessors$30);var DepthSegment=function f(){this._upwardSeg=null,this._leftDepth=null;var s=arguments[0],d=arguments[1];this._upwardSeg=new LineSegment(s),this._leftDepth=d};DepthSegment.prototype.compareTo=function f(s){var d=s;if(this._upwardSeg.minX()>=d._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=d._upwardSeg.minX())return-1;var _=this._upwardSeg.orientationIndex(d._upwardSeg);return _!==0||(_=-1*d._upwardSeg.orientationIndex(this._upwardSeg),_!==0)?_:this._upwardSeg.compareTo(d._upwardSeg)};DepthSegment.prototype.compareX=function f(s,d){var _=s.p0.compareTo(d.p0);return _!==0?_:s.p1.compareTo(d.p1)};DepthSegment.prototype.toString=function f(){return this._upwardSeg.toString()};DepthSegment.prototype.interfaces_=function f(){return[Comparable]};DepthSegment.prototype.getClass=function f(){return DepthSegment};var Triangle=function f(s,d,_){this.p0=s||null,this.p1=d||null,this.p2=_||null};Triangle.prototype.area=function f(){return Triangle.area(this.p0,this.p1,this.p2)};Triangle.prototype.signedArea=function f(){return Triangle.signedArea(this.p0,this.p1,this.p2)};Triangle.prototype.interpolateZ=function f(s){if(s===null)throw new IllegalArgumentException("Supplied point is null.");return Triangle.interpolateZ(s,this.p0,this.p1,this.p2)};Triangle.prototype.longestSideLength=function f(){return Triangle.longestSideLength(this.p0,this.p1,this.p2)};Triangle.prototype.isAcute=function f(){return Triangle.isAcute(this.p0,this.p1,this.p2)};Triangle.prototype.circumcentre=function f(){return Triangle.circumcentre(this.p0,this.p1,this.p2)};Triangle.prototype.area3D=function f(){return Triangle.area3D(this.p0,this.p1,this.p2)};Triangle.prototype.centroid=function f(){return Triangle.centroid(this.p0,this.p1,this.p2)};Triangle.prototype.inCentre=function f(){return Triangle.inCentre(this.p0,this.p1,this.p2)};Triangle.prototype.interfaces_=function f(){return[]};Triangle.prototype.getClass=function f(){return Triangle};Triangle.area=function f(s,d,_){return Math.abs(((_.x-s.x)*(d.y-s.y)-(d.x-s.x)*(_.y-s.y))/2)};Triangle.signedArea=function f(s,d,_){return((_.x-s.x)*(d.y-s.y)-(d.x-s.x)*(_.y-s.y))/2};Triangle.det=function f(s,d,_,S){return s*S-d*_};Triangle.interpolateZ=function f(s,d,_,S){var T=d.x,F=d.y,M=_.x-T,P=S.x-T,H=_.y-F,J=S.y-F,K=M*J-P*H,z=s.x-T,oe=s.y-F,se=(J*z-P*oe)/K,ae=(-H*z+M*oe)/K,ge=d.z+se*(_.z-d.z)+ae*(S.z-d.z);return ge};Triangle.longestSideLength=function f(s,d,_){var S=s.distance(d),T=d.distance(_),F=_.distance(s),M=S;return T>M&&(M=T),F>M&&(M=F),M};Triangle.isAcute=function f(s,d,_){return!(!Angle.isAcute(s,d,_)||!Angle.isAcute(d,_,s)||!Angle.isAcute(_,s,d))};Triangle.circumcentre=function f(s,d,_){var S=_.x,T=_.y,F=s.x-S,M=s.y-T,P=d.x-S,H=d.y-T,J=2*Triangle.det(F,M,P,H),K=Triangle.det(M,F*F+M*M,H,P*P+H*H),z=Triangle.det(F,F*F+M*M,P,P*P+H*H),oe=S-K/J,se=T+z/J;return new Coordinate(oe,se)};Triangle.perpendicularBisector=function f(s,d){var _=d.x-s.x,S=d.y-s.y,T=new HCoordinate(s.x+_/2,s.y+S/2,1),F=new HCoordinate(s.x-S+_/2,s.y+_+S/2,1);return new HCoordinate(T,F)};Triangle.angleBisector=function f(s,d,_){var S=d.distance(s),T=d.distance(_),F=S/(S+T),M=_.x-s.x,P=_.y-s.y,H=new Coordinate(s.x+F*M,s.y+F*P);return H};Triangle.area3D=function f(s,d,_){var S=d.x-s.x,T=d.y-s.y,F=d.z-s.z,M=_.x-s.x,P=_.y-s.y,H=_.z-s.z,J=T*H-F*P,K=F*M-S*H,z=S*P-T*M,oe=J*J+K*K+z*z,se=Math.sqrt(oe)/2;return se};Triangle.centroid=function f(s,d,_){var S=(s.x+d.x+_.x)/3,T=(s.y+d.y+_.y)/3;return new Coordinate(S,T)};Triangle.inCentre=function f(s,d,_){var S=d.distance(_),T=s.distance(_),F=s.distance(d),M=S+T+F,P=(S*s.x+T*d.x+F*_.x)/M,H=(S*s.y+T*d.y+F*_.y)/M;return new Coordinate(P,H)};var OffsetCurveSetBuilder=function f(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ArrayList;var s=arguments[0],d=arguments[1],_=arguments[2];this._inputGeom=s,this._distance=d,this._curveBuilder=_};OffsetCurveSetBuilder.prototype.addPoint=function f(s){if(this._distance<=0)return null;var d=s.getCoordinates(),_=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(_,Location.EXTERIOR,Location.INTERIOR)};OffsetCurveSetBuilder.prototype.addPolygon=function f(s){var d=this,_=this._distance,S=Position.LEFT;this._distance<0&&(_=-this._distance,S=Position.RIGHT);var T=s.getExteriorRing(),F=CoordinateArrays.removeRepeatedPoints(T.getCoordinates());if(this._distance<0&&this.isErodedCompletely(T,this._distance)||this._distance<=0&&F.length<3)return null;this.addPolygonRing(F,_,S,Location.EXTERIOR,Location.INTERIOR);for(var M=0;M<s.getNumInteriorRing();M++){var P=s.getInteriorRingN(M),H=CoordinateArrays.removeRepeatedPoints(P.getCoordinates());d._distance>0&&d.isErodedCompletely(P,-d._distance)||d.addPolygonRing(H,_,Position.opposite(S),Location.INTERIOR,Location.EXTERIOR)}};OffsetCurveSetBuilder.prototype.isTriangleErodedCompletely=function f(s,d){var _=new Triangle(s[0],s[1],s[2]),S=_.inCentre(),T=CGAlgorithms.distancePointLine(S,_.p0,_.p1);return T<Math.abs(d)};OffsetCurveSetBuilder.prototype.addLineString=function f(s){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var d=CoordinateArrays.removeRepeatedPoints(s.getCoordinates()),_=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(_,Location.EXTERIOR,Location.INTERIOR)};OffsetCurveSetBuilder.prototype.addCurve=function f(s,d,_){if(s===null||s.length<2)return null;var S=new NodedSegmentString(s,new Label(0,Location.BOUNDARY,d,_));this._curveList.add(S)};OffsetCurveSetBuilder.prototype.getCurves=function f(){return this.add(this._inputGeom),this._curveList};OffsetCurveSetBuilder.prototype.addPolygonRing=function f(s,d,_,S,T){if(d===0&&s.length<LinearRing.MINIMUM_VALID_SIZE)return null;var F=S,M=T;s.length>=LinearRing.MINIMUM_VALID_SIZE&&CGAlgorithms.isCCW(s)&&(F=T,M=S,_=Position.opposite(_));var P=this._curveBuilder.getRingCurve(s,_,d);this.addCurve(P,F,M)};OffsetCurveSetBuilder.prototype.add=function f(s){if(s.isEmpty())return null;s instanceof Polygon?this.addPolygon(s):s instanceof LineString?this.addLineString(s):s instanceof Point?this.addPoint(s):s instanceof MultiPoint?this.addCollection(s):s instanceof MultiLineString?this.addCollection(s):s instanceof MultiPolygon?this.addCollection(s):s instanceof GeometryCollection&&this.addCollection(s)};OffsetCurveSetBuilder.prototype.isErodedCompletely=function f(s,d){var _=s.getCoordinates();if(_.length<4)return d<0;if(_.length===4)return this.isTriangleErodedCompletely(_,d);var S=s.getEnvelopeInternal(),T=Math.min(S.getHeight(),S.getWidth());return d<0&&2*Math.abs(d)>T};OffsetCurveSetBuilder.prototype.addCollection=function f(s){for(var d=this,_=0;_<s.getNumGeometries();_++){var S=s.getGeometryN(_);d.add(S)}};OffsetCurveSetBuilder.prototype.interfaces_=function f(){return[]};OffsetCurveSetBuilder.prototype.getClass=function f(){return OffsetCurveSetBuilder};var PointOnGeometryLocator=function f(){};PointOnGeometryLocator.prototype.locate=function f(s){};PointOnGeometryLocator.prototype.interfaces_=function f(){return[]};PointOnGeometryLocator.prototype.getClass=function f(){return PointOnGeometryLocator};var GeometryCollectionIterator=function f(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var s=arguments[0];this._parent=s,this._atStart=!0,this._index=0,this._max=s.getNumGeometries()};GeometryCollectionIterator.prototype.next=function f(){if(this._atStart)return this._atStart=!1,GeometryCollectionIterator.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new NoSuchElementException;var s=this._parent.getGeometryN(this._index++);return s instanceof GeometryCollection?(this._subcollectionIterator=new GeometryCollectionIterator(s),this._subcollectionIterator.next()):s};GeometryCollectionIterator.prototype.remove=function f(){throw new Error(this.getClass().getName())};GeometryCollectionIterator.prototype.hasNext=function f(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};GeometryCollectionIterator.prototype.interfaces_=function f(){return[Iterator$1]};GeometryCollectionIterator.prototype.getClass=function f(){return GeometryCollectionIterator};GeometryCollectionIterator.isAtomic=function f(s){return!(s instanceof GeometryCollection)};var SimplePointInAreaLocator=function f(){this._geom=null;var s=arguments[0];this._geom=s};SimplePointInAreaLocator.prototype.locate=function f(s){return SimplePointInAreaLocator.locate(s,this._geom)};SimplePointInAreaLocator.prototype.interfaces_=function f(){return[PointOnGeometryLocator]};SimplePointInAreaLocator.prototype.getClass=function f(){return SimplePointInAreaLocator};SimplePointInAreaLocator.isPointInRing=function f(s,d){return d.getEnvelopeInternal().intersects(s)?CGAlgorithms.isPointInRing(s,d.getCoordinates()):!1};SimplePointInAreaLocator.containsPointInPolygon=function f(s,d){if(d.isEmpty())return!1;var _=d.getExteriorRing();if(!SimplePointInAreaLocator.isPointInRing(s,_))return!1;for(var S=0;S<d.getNumInteriorRing();S++){var T=d.getInteriorRingN(S);if(SimplePointInAreaLocator.isPointInRing(s,T))return!1}return!0};SimplePointInAreaLocator.containsPoint=function f(s,d){if(d instanceof Polygon)return SimplePointInAreaLocator.containsPointInPolygon(s,d);if(d instanceof GeometryCollection)for(var _=new GeometryCollectionIterator(d);_.hasNext();){var S=_.next();if(S!==d&&SimplePointInAreaLocator.containsPoint(s,S))return!0}return!1};SimplePointInAreaLocator.locate=function f(s,d){return d.isEmpty()?Location.EXTERIOR:SimplePointInAreaLocator.containsPoint(s,d)?Location.INTERIOR:Location.EXTERIOR};var EdgeEndStar=function f(){this._edgeMap=new TreeMap,this._edgeList=null,this._ptInAreaLocation=[Location.NONE,Location.NONE]};EdgeEndStar.prototype.getNextCW=function f(s){this.getEdges();var d=this._edgeList.indexOf(s),_=d-1;return d===0&&(_=this._edgeList.size()-1),this._edgeList.get(_)};EdgeEndStar.prototype.propagateSideLabels=function f(s){for(var d=Location.NONE,_=this.iterator();_.hasNext();){var S=_.next(),T=S.getLabel();T.isArea(s)&&T.getLocation(s,Position.LEFT)!==Location.NONE&&(d=T.getLocation(s,Position.LEFT))}if(d===Location.NONE)return null;for(var F=d,M=this.iterator();M.hasNext();){var P=M.next(),H=P.getLabel();if(H.getLocation(s,Position.ON)===Location.NONE&&H.setLocation(s,Position.ON,F),H.isArea(s)){var J=H.getLocation(s,Position.LEFT),K=H.getLocation(s,Position.RIGHT);if(K!==Location.NONE){if(K!==F)throw new TopologyException("side location conflict",P.getCoordinate());J===Location.NONE&&Assert.shouldNeverReachHere("found single null side (at "+P.getCoordinate()+")"),F=J}else Assert.isTrue(H.getLocation(s,Position.LEFT)===Location.NONE,"found single null side"),H.setLocation(s,Position.RIGHT,F),H.setLocation(s,Position.LEFT,F)}}};EdgeEndStar.prototype.getCoordinate=function f(){var s=this.iterator();if(!s.hasNext())return null;var d=s.next();return d.getCoordinate()};EdgeEndStar.prototype.print=function f(s){System.out.println("EdgeEndStar:   "+this.getCoordinate());for(var d=this.iterator();d.hasNext();){var _=d.next();_.print(s)}};EdgeEndStar.prototype.isAreaLabelsConsistent=function f(s){return this.computeEdgeEndLabels(s.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};EdgeEndStar.prototype.checkAreaLabelsConsistent=function f(s){var d=this.getEdges();if(d.size()<=0)return!0;var _=d.size()-1,S=d.get(_).getLabel(),T=S.getLocation(s,Position.LEFT);Assert.isTrue(T!==Location.NONE,"Found unlabelled area edge");for(var F=T,M=this.iterator();M.hasNext();){var P=M.next(),H=P.getLabel();Assert.isTrue(H.isArea(s),"Found non-area edge");var J=H.getLocation(s,Position.LEFT),K=H.getLocation(s,Position.RIGHT);if(J===K||K!==F)return!1;F=J}return!0};EdgeEndStar.prototype.findIndex=function f(s){var d=this;this.iterator();for(var _=0;_<this._edgeList.size();_++){var S=d._edgeList.get(_);if(S===s)return _}return-1};EdgeEndStar.prototype.iterator=function f(){return this.getEdges().iterator()};EdgeEndStar.prototype.getEdges=function f(){return this._edgeList===null&&(this._edgeList=new ArrayList(this._edgeMap.values())),this._edgeList};EdgeEndStar.prototype.getLocation=function f(s,d,_){return this._ptInAreaLocation[s]===Location.NONE&&(this._ptInAreaLocation[s]=SimplePointInAreaLocator.locate(d,_[s].getGeometry())),this._ptInAreaLocation[s]};EdgeEndStar.prototype.toString=function f(){var s=new StringBuffer;s.append("EdgeEndStar:   "+this.getCoordinate()),s.append(`
`);for(var d=this.iterator();d.hasNext();){var _=d.next();s.append(_),s.append(`
`)}return s.toString()};EdgeEndStar.prototype.computeEdgeEndLabels=function f(s){for(var d=this.iterator();d.hasNext();){var _=d.next();_.computeLabel(s)}};EdgeEndStar.prototype.computeLabelling=function f(s){var d=this;this.computeEdgeEndLabels(s[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var _=[!1,!1],S=this.iterator();S.hasNext();)for(var T=S.next(),F=T.getLabel(),M=0;M<2;M++)F.isLine(M)&&F.getLocation(M)===Location.BOUNDARY&&(_[M]=!0);for(var P=this.iterator();P.hasNext();)for(var H=P.next(),J=H.getLabel(),K=0;K<2;K++)if(J.isAnyNull(K)){var z=Location.NONE;if(_[K])z=Location.EXTERIOR;else{var oe=H.getCoordinate();z=d.getLocation(K,oe,s)}J.setAllLocationsIfNull(K,z)}};EdgeEndStar.prototype.getDegree=function f(){return this._edgeMap.size()};EdgeEndStar.prototype.insertEdgeEnd=function f(s,d){this._edgeMap.put(s,d),this._edgeList=null};EdgeEndStar.prototype.interfaces_=function f(){return[]};EdgeEndStar.prototype.getClass=function f(){return EdgeEndStar};var DirectedEdgeStar=function(f){function s(){f.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.linkResultDirectedEdges=function(){var _=this;this.getResultAreaEdges();for(var S=null,T=null,F=this._SCANNING_FOR_INCOMING,M=0;M<this._resultAreaEdgeList.size();M++){var P=_._resultAreaEdgeList.get(M),H=P.getSym();if(P.getLabel().isArea())switch(S===null&&P.isInResult()&&(S=P),F){case _._SCANNING_FOR_INCOMING:if(!H.isInResult())continue;T=H,F=_._LINKING_TO_OUTGOING;break;case _._LINKING_TO_OUTGOING:if(!P.isInResult())continue;T.setNext(P),F=_._SCANNING_FOR_INCOMING;break}}if(F===this._LINKING_TO_OUTGOING){if(S===null)throw new TopologyException("no outgoing dirEdge found",this.getCoordinate());Assert.isTrue(S.isInResult(),"unable to link last incoming dirEdge"),T.setNext(S)}},s.prototype.insert=function(_){var S=_;this.insertEdgeEnd(S,S)},s.prototype.getRightmostEdge=function(){var _=this.getEdges(),S=_.size();if(S<1)return null;var T=_.get(0);if(S===1)return T;var F=_.get(S-1),M=T.getQuadrant(),P=F.getQuadrant();return Quadrant.isNorthern(M)&&Quadrant.isNorthern(P)?T:!Quadrant.isNorthern(M)&&!Quadrant.isNorthern(P)?F:T.getDy()!==0?T:F.getDy()!==0?F:(Assert.shouldNeverReachHere("found two horizontal edges incident on node"),null)},s.prototype.print=function(_){System.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var S=this.iterator();S.hasNext();){var T=S.next();_.print("out "),T.print(_),_.println(),_.print("in "),T.getSym().print(_),_.println()}},s.prototype.getResultAreaEdges=function(){var _=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ArrayList;for(var S=this.iterator();S.hasNext();){var T=S.next();(T.isInResult()||T.getSym().isInResult())&&_._resultAreaEdgeList.add(T)}return this._resultAreaEdgeList},s.prototype.updateLabelling=function(_){for(var S=this.iterator();S.hasNext();){var T=S.next(),F=T.getLabel();F.setAllLocationsIfNull(0,_.getLocation(0)),F.setAllLocationsIfNull(1,_.getLocation(1))}},s.prototype.linkAllDirectedEdges=function(){var _=this;this.getEdges();for(var S=null,T=null,F=this._edgeList.size()-1;F>=0;F--){var M=_._edgeList.get(F),P=M.getSym();T===null&&(T=P),S!==null&&P.setNext(S),S=M}T.setNext(S)},s.prototype.computeDepths=function(){var _=this;if(arguments.length===1){var S=arguments[0],T=this.findIndex(S),F=S.getDepth(Position.LEFT),M=S.getDepth(Position.RIGHT),P=this.computeDepths(T+1,this._edgeList.size(),F),H=this.computeDepths(0,T,P);if(H!==M)throw new TopologyException("depth mismatch at "+S.getCoordinate())}else if(arguments.length===3){for(var J=arguments[0],K=arguments[1],z=arguments[2],oe=z,se=J;se<K;se++){var ae=_._edgeList.get(se);ae.setEdgeDepths(Position.RIGHT,oe),oe=ae.getDepth(Position.LEFT)}return oe}},s.prototype.mergeSymLabels=function(){for(var _=this.iterator();_.hasNext();){var S=_.next(),T=S.getLabel();T.merge(S.getSym().getLabel())}},s.prototype.linkMinimalDirectedEdges=function(_){for(var S=this,T=null,F=null,M=this._SCANNING_FOR_INCOMING,P=this._resultAreaEdgeList.size()-1;P>=0;P--){var H=S._resultAreaEdgeList.get(P),J=H.getSym();switch(T===null&&H.getEdgeRing()===_&&(T=H),M){case S._SCANNING_FOR_INCOMING:if(J.getEdgeRing()!==_)continue;F=J,M=S._LINKING_TO_OUTGOING;break;case S._LINKING_TO_OUTGOING:if(H.getEdgeRing()!==_)continue;F.setNextMin(H),M=S._SCANNING_FOR_INCOMING;break}}M===this._LINKING_TO_OUTGOING&&(Assert.isTrue(T!==null,"found null for first outgoing dirEdge"),Assert.isTrue(T.getEdgeRing()===_,"unable to link last incoming dirEdge"),F.setNextMin(T))},s.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var _=0,S=this.iterator();S.hasNext();){var T=S.next();T.isInResult()&&_++}return _}else if(arguments.length===1){for(var F=arguments[0],M=0,P=this.iterator();P.hasNext();){var H=P.next();H.getEdgeRing()===F&&M++}return M}},s.prototype.getLabel=function(){return this._label},s.prototype.findCoveredLineEdges=function(){for(var _=Location.NONE,S=this.iterator();S.hasNext();){var T=S.next(),F=T.getSym();if(!T.isLineEdge()){if(T.isInResult()){_=Location.INTERIOR;break}if(F.isInResult()){_=Location.EXTERIOR;break}}}if(_===Location.NONE)return null;for(var M=_,P=this.iterator();P.hasNext();){var H=P.next(),J=H.getSym();H.isLineEdge()?H.getEdge().setCovered(M===Location.INTERIOR):(H.isInResult()&&(M=Location.EXTERIOR),J.isInResult()&&(M=Location.INTERIOR))}},s.prototype.computeLabelling=function(_){var S=this;f.prototype.computeLabelling.call(this,_),this._label=new Label(Location.NONE);for(var T=this.iterator();T.hasNext();)for(var F=T.next(),M=F.getEdge(),P=M.getLabel(),H=0;H<2;H++){var J=P.getLocation(H);(J===Location.INTERIOR||J===Location.BOUNDARY)&&S._label.setLocation(H,Location.INTERIOR)}},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(EdgeEndStar),OverlayNodeFactory=function(f){function s(){f.apply(this,arguments)}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.createNode=function(_){return new Node$1(_,new DirectedEdgeStar)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(NodeFactory),OrientedCoordinateArray=function f(){this._pts=null,this._orientation=null;var s=arguments[0];this._pts=s,this._orientation=f.orientation(s)};OrientedCoordinateArray.prototype.compareTo=function f(s){var d=s,_=OrientedCoordinateArray.compareOriented(this._pts,this._orientation,d._pts,d._orientation);return _};OrientedCoordinateArray.prototype.interfaces_=function f(){return[Comparable]};OrientedCoordinateArray.prototype.getClass=function f(){return OrientedCoordinateArray};OrientedCoordinateArray.orientation=function f(s){return CoordinateArrays.increasingDirection(s)===1};OrientedCoordinateArray.compareOriented=function f(s,d,_,S){for(var T=d?1:-1,F=S?1:-1,M=d?s.length:-1,P=S?_.length:-1,H=d?0:s.length-1,J=S?0:_.length-1;;){var K=s[H].compareTo(_[J]);if(K!==0)return K;H+=T,J+=F;var z=H===M,oe=J===P;if(z&&!oe)return-1;if(!z&&oe)return 1;if(z&&oe)return 0}};var EdgeList=function f(){this._edges=new ArrayList,this._ocaMap=new TreeMap};EdgeList.prototype.print=function f(s){var d=this;s.print("MULTILINESTRING ( ");for(var _=0;_<this._edges.size();_++){var S=d._edges.get(_);_>0&&s.print(","),s.print("(");for(var T=S.getCoordinates(),F=0;F<T.length;F++)F>0&&s.print(","),s.print(T[F].x+" "+T[F].y);s.println(")")}s.print(")  ")};EdgeList.prototype.addAll=function f(s){for(var d=this,_=s.iterator();_.hasNext();)d.add(_.next())};EdgeList.prototype.findEdgeIndex=function f(s){for(var d=this,_=0;_<this._edges.size();_++)if(d._edges.get(_).equals(s))return _;return-1};EdgeList.prototype.iterator=function f(){return this._edges.iterator()};EdgeList.prototype.getEdges=function f(){return this._edges};EdgeList.prototype.get=function f(s){return this._edges.get(s)};EdgeList.prototype.findEqualEdge=function f(s){var d=new OrientedCoordinateArray(s.getCoordinates()),_=this._ocaMap.get(d);return _};EdgeList.prototype.add=function f(s){this._edges.add(s);var d=new OrientedCoordinateArray(s.getCoordinates());this._ocaMap.put(d,s)};EdgeList.prototype.interfaces_=function f(){return[]};EdgeList.prototype.getClass=function f(){return EdgeList};var SegmentIntersector=function f(){};SegmentIntersector.prototype.processIntersections=function f(s,d,_,S){};SegmentIntersector.prototype.isDone=function f(){};SegmentIntersector.prototype.interfaces_=function f(){return[]};SegmentIntersector.prototype.getClass=function f(){return SegmentIntersector};var IntersectionAdder=function f(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var s=arguments[0];this._li=s};IntersectionAdder.prototype.isTrivialIntersection=function f(s,d,_,S){if(s===_&&this._li.getIntersectionNum()===1){if(IntersectionAdder.isAdjacentSegments(d,S))return!0;if(s.isClosed()){var T=s.size()-1;if(d===0&&S===T||S===0&&d===T)return!0}}return!1};IntersectionAdder.prototype.getProperIntersectionPoint=function f(){return this._properIntersectionPoint};IntersectionAdder.prototype.hasProperInteriorIntersection=function f(){return this._hasProperInterior};IntersectionAdder.prototype.getLineIntersector=function f(){return this._li};IntersectionAdder.prototype.hasProperIntersection=function f(){return this._hasProper};IntersectionAdder.prototype.processIntersections=function f(s,d,_,S){if(s===_&&d===S)return null;this.numTests++;var T=s.getCoordinates()[d],F=s.getCoordinates()[d+1],M=_.getCoordinates()[S],P=_.getCoordinates()[S+1];this._li.computeIntersection(T,F,M,P),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(s,d,_,S)||(this._hasIntersection=!0,s.addIntersections(this._li,d,0),_.addIntersections(this._li,S,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};IntersectionAdder.prototype.hasIntersection=function f(){return this._hasIntersection};IntersectionAdder.prototype.isDone=function f(){return!1};IntersectionAdder.prototype.hasInteriorIntersection=function f(){return this._hasInterior};IntersectionAdder.prototype.interfaces_=function f(){return[SegmentIntersector]};IntersectionAdder.prototype.getClass=function f(){return IntersectionAdder};IntersectionAdder.isAdjacentSegments=function f(s,d){return Math.abs(s-d)===1};var EdgeIntersection=function f(){this.coord=null,this.segmentIndex=null,this.dist=null;var s=arguments[0],d=arguments[1],_=arguments[2];this.coord=new Coordinate(s),this.segmentIndex=d,this.dist=_};EdgeIntersection.prototype.getSegmentIndex=function f(){return this.segmentIndex};EdgeIntersection.prototype.getCoordinate=function f(){return this.coord};EdgeIntersection.prototype.print=function f(s){s.print(this.coord),s.print(" seg # = "+this.segmentIndex),s.println(" dist = "+this.dist)};EdgeIntersection.prototype.compareTo=function f(s){var d=s;return this.compare(d.segmentIndex,d.dist)};EdgeIntersection.prototype.isEndPoint=function f(s){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===s};EdgeIntersection.prototype.toString=function f(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};EdgeIntersection.prototype.getDistance=function f(){return this.dist};EdgeIntersection.prototype.compare=function f(s,d){return this.segmentIndex<s?-1:this.segmentIndex>s?1:this.dist<d?-1:this.dist>d?1:0};EdgeIntersection.prototype.interfaces_=function f(){return[Comparable]};EdgeIntersection.prototype.getClass=function f(){return EdgeIntersection};var EdgeIntersectionList=function f(){this._nodeMap=new TreeMap,this.edge=null;var s=arguments[0];this.edge=s};EdgeIntersectionList.prototype.print=function f(s){s.println("Intersections:");for(var d=this.iterator();d.hasNext();){var _=d.next();_.print(s)}};EdgeIntersectionList.prototype.iterator=function f(){return this._nodeMap.values().iterator()};EdgeIntersectionList.prototype.addSplitEdges=function f(s){var d=this;this.addEndpoints();for(var _=this.iterator(),S=_.next();_.hasNext();){var T=_.next(),F=d.createSplitEdge(S,T);s.add(F),S=T}};EdgeIntersectionList.prototype.addEndpoints=function f(){var s=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[s],s,0)};EdgeIntersectionList.prototype.createSplitEdge=function f(s,d){var _=this,S=d.segmentIndex-s.segmentIndex+2,T=this.edge.pts[d.segmentIndex],F=d.dist>0||!d.coord.equals2D(T);F||S--;var M=new Array(S).fill(null),P=0;M[P++]=new Coordinate(s.coord);for(var H=s.segmentIndex+1;H<=d.segmentIndex;H++)M[P++]=_.edge.pts[H];return F&&(M[P]=d.coord),new Edge(M,new Label(this.edge._label))};EdgeIntersectionList.prototype.add=function f(s,d,_){var S=new EdgeIntersection(s,d,_),T=this._nodeMap.get(S);return T!==null?T:(this._nodeMap.put(S,S),S)};EdgeIntersectionList.prototype.isIntersection=function f(s){for(var d=this.iterator();d.hasNext();){var _=d.next();if(_.coord.equals(s))return!0}return!1};EdgeIntersectionList.prototype.interfaces_=function f(){return[]};EdgeIntersectionList.prototype.getClass=function f(){return EdgeIntersectionList};var MonotoneChainIndexer=function f(){};MonotoneChainIndexer.prototype.getChainStartIndices=function f(s){var d=this,_=0,S=new ArrayList;S.add(new Integer(_));do{var T=d.findChainEnd(s,_);S.add(new Integer(T)),_=T}while(_<s.length-1);var F=MonotoneChainIndexer.toIntArray(S);return F};MonotoneChainIndexer.prototype.findChainEnd=function f(s,d){for(var _=Quadrant.quadrant(s[d],s[d+1]),S=d+1;S<s.length;){var T=Quadrant.quadrant(s[S-1],s[S]);if(T!==_)break;S++}return S-1};MonotoneChainIndexer.prototype.interfaces_=function f(){return[]};MonotoneChainIndexer.prototype.getClass=function f(){return MonotoneChainIndexer};MonotoneChainIndexer.toIntArray=function f(s){for(var d=new Array(s.size()).fill(null),_=0;_<d.length;_++)d[_]=s.get(_).intValue();return d};var MonotoneChainEdge=function f(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Envelope,this.env2=new Envelope;var s=arguments[0];this.e=s,this.pts=s.getCoordinates();var d=new MonotoneChainIndexer;this.startIndex=d.getChainStartIndices(this.pts)};MonotoneChainEdge.prototype.getCoordinates=function f(){return this.pts};MonotoneChainEdge.prototype.getMaxX=function f(s){var d=this.pts[this.startIndex[s]].x,_=this.pts[this.startIndex[s+1]].x;return d>_?d:_};MonotoneChainEdge.prototype.getMinX=function f(s){var d=this.pts[this.startIndex[s]].x,_=this.pts[this.startIndex[s+1]].x;return d<_?d:_};MonotoneChainEdge.prototype.computeIntersectsForChain=function f(){if(arguments.length===4){var s=arguments[0],d=arguments[1],_=arguments[2],S=arguments[3];this.computeIntersectsForChain(this.startIndex[s],this.startIndex[s+1],d,d.startIndex[_],d.startIndex[_+1],S)}else if(arguments.length===6){var T=arguments[0],F=arguments[1],M=arguments[2],P=arguments[3],H=arguments[4],J=arguments[5],K=this.pts[T],z=this.pts[F],oe=M.pts[P],se=M.pts[H];if(F-T===1&&H-P===1)return J.addIntersections(this.e,T,M.e,P),null;if(this.env1.init(K,z),this.env2.init(oe,se),!this.env1.intersects(this.env2))return null;var ae=Math.trunc((T+F)/2),ge=Math.trunc((P+H)/2);T<ae&&(P<ge&&this.computeIntersectsForChain(T,ae,M,P,ge,J),ge<H&&this.computeIntersectsForChain(T,ae,M,ge,H,J)),ae<F&&(P<ge&&this.computeIntersectsForChain(ae,F,M,P,ge,J),ge<H&&this.computeIntersectsForChain(ae,F,M,ge,H,J))}};MonotoneChainEdge.prototype.getStartIndexes=function f(){return this.startIndex};MonotoneChainEdge.prototype.computeIntersects=function f(s,d){for(var _=this,S=0;S<this.startIndex.length-1;S++)for(var T=0;T<s.startIndex.length-1;T++)_.computeIntersectsForChain(S,s,T,d)};MonotoneChainEdge.prototype.interfaces_=function f(){return[]};MonotoneChainEdge.prototype.getClass=function f(){return MonotoneChainEdge};var Depth=function f(){var s=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var d=0;d<2;d++)for(var _=0;_<3;_++)s._depth[d][_]=f.NULL_VALUE},staticAccessors$31={NULL_VALUE:{configurable:!0}};Depth.prototype.getDepth=function f(s,d){return this._depth[s][d]};Depth.prototype.setDepth=function f(s,d,_){this._depth[s][d]=_};Depth.prototype.isNull=function f(){var s=this;if(arguments.length===0){for(var d=0;d<2;d++)for(var _=0;_<3;_++)if(s._depth[d][_]!==Depth.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var S=arguments[0];return this._depth[S][1]===Depth.NULL_VALUE}else if(arguments.length===2){var T=arguments[0],F=arguments[1];return this._depth[T][F]===Depth.NULL_VALUE}};Depth.prototype.normalize=function f(){for(var s=this,d=0;d<2;d++)if(!s.isNull(d)){var _=s._depth[d][1];s._depth[d][2]<_&&(_=s._depth[d][2]),_<0&&(_=0);for(var S=1;S<3;S++){var T=0;s._depth[d][S]>_&&(T=1),s._depth[d][S]=T}}};Depth.prototype.getDelta=function f(s){return this._depth[s][Position.RIGHT]-this._depth[s][Position.LEFT]};Depth.prototype.getLocation=function f(s,d){return this._depth[s][d]<=0?Location.EXTERIOR:Location.INTERIOR};Depth.prototype.toString=function f(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};Depth.prototype.add=function f(){var s=this;if(arguments.length===1)for(var d=arguments[0],_=0;_<2;_++)for(var S=1;S<3;S++){var T=d.getLocation(_,S);(T===Location.EXTERIOR||T===Location.INTERIOR)&&(s.isNull(_,S)?s._depth[_][S]=Depth.depthAtLocation(T):s._depth[_][S]+=Depth.depthAtLocation(T))}else if(arguments.length===3){var F=arguments[0],M=arguments[1],P=arguments[2];P===Location.INTERIOR&&this._depth[F][M]++}};Depth.prototype.interfaces_=function f(){return[]};Depth.prototype.getClass=function f(){return Depth};Depth.depthAtLocation=function f(s){return s===Location.EXTERIOR?0:s===Location.INTERIOR?1:Depth.NULL_VALUE};staticAccessors$31.NULL_VALUE.get=function(){return-1};Object.defineProperties(Depth,staticAccessors$31);var Edge=function(f){function s(){if(f.call(this),this.pts=null,this._env=null,this.eiList=new EdgeIntersectionList(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Depth,this._depthDelta=0,arguments.length===1){var d=arguments[0];s.call(this,d,null)}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this.pts=_,this._label=S}}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.getDepth=function(){return this._depth},s.prototype.getCollapsedEdge=function(){var _=new Array(2).fill(null);_[0]=this.pts[0],_[1]=this.pts[1];var S=new s(_,Label.toLineLabel(this._label));return S},s.prototype.isIsolated=function(){return this._isIsolated},s.prototype.getCoordinates=function(){return this.pts},s.prototype.setIsolated=function(_){this._isIsolated=_},s.prototype.setName=function(_){this._name=_},s.prototype.equals=function(_){var S=this;if(!(_ instanceof s))return!1;var T=_;if(this.pts.length!==T.pts.length)return!1;for(var F=!0,M=!0,P=this.pts.length,H=0;H<this.pts.length;H++)if(S.pts[H].equals2D(T.pts[H])||(F=!1),S.pts[H].equals2D(T.pts[--P])||(M=!1),!F&&!M)return!1;return!0},s.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var _=arguments[0];return this.pts[_]}},s.prototype.print=function(_){var S=this;_.print("edge "+this._name+": "),_.print("LINESTRING (");for(var T=0;T<this.pts.length;T++)T>0&&_.print(","),_.print(S.pts[T].x+" "+S.pts[T].y);_.print(")  "+this._label+" "+this._depthDelta)},s.prototype.computeIM=function(_){s.updateIM(this._label,_)},s.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},s.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},s.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},s.prototype.getDepthDelta=function(){return this._depthDelta},s.prototype.getNumPoints=function(){return this.pts.length},s.prototype.printReverse=function(_){var S=this;_.print("edge "+this._name+": ");for(var T=this.pts.length-1;T>=0;T--)_.print(S.pts[T]+" ");_.println("")},s.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new MonotoneChainEdge(this)),this._mce},s.prototype.getEnvelope=function(){var _=this;if(this._env===null){this._env=new Envelope;for(var S=0;S<this.pts.length;S++)_._env.expandToInclude(_.pts[S])}return this._env},s.prototype.addIntersection=function(_,S,T,F){var M=new Coordinate(_.getIntersection(F)),P=S,H=_.getEdgeDistance(T,F),J=P+1;if(J<this.pts.length){var K=this.pts[J];M.equals2D(K)&&(P=J,H=0)}this.eiList.add(M,P,H)},s.prototype.toString=function(){var _=this,S=new StringBuffer;S.append("edge "+this._name+": "),S.append("LINESTRING (");for(var T=0;T<this.pts.length;T++)T>0&&S.append(","),S.append(_.pts[T].x+" "+_.pts[T].y);return S.append(")  "+this._label+" "+this._depthDelta),S.toString()},s.prototype.isPointwiseEqual=function(_){var S=this;if(this.pts.length!==_.pts.length)return!1;for(var T=0;T<this.pts.length;T++)if(!S.pts[T].equals2D(_.pts[T]))return!1;return!0},s.prototype.setDepthDelta=function(_){this._depthDelta=_},s.prototype.getEdgeIntersectionList=function(){return this.eiList},s.prototype.addIntersections=function(_,S,T){for(var F=this,M=0;M<_.getIntersectionNum();M++)F.addIntersection(_,S,T,M)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.updateIM=function(){if(arguments.length===2){var _=arguments[0],S=arguments[1];S.setAtLeastIfValid(_.getLocation(0,Position.ON),_.getLocation(1,Position.ON),1),_.isArea()&&(S.setAtLeastIfValid(_.getLocation(0,Position.LEFT),_.getLocation(1,Position.LEFT),2),S.setAtLeastIfValid(_.getLocation(0,Position.RIGHT),_.getLocation(1,Position.RIGHT),2))}else return f.prototype.updateIM.apply(this,arguments)},s}(GraphComponent),BufferBuilder=function f(s){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new EdgeList,this._bufParams=s||null};BufferBuilder.prototype.setWorkingPrecisionModel=function f(s){this._workingPrecisionModel=s};BufferBuilder.prototype.insertUniqueEdge=function f(s){var d=this._edgeList.findEqualEdge(s);if(d!==null){var _=d.getLabel(),S=s.getLabel();d.isPointwiseEqual(s)||(S=new Label(s.getLabel()),S.flip()),_.merge(S);var T=BufferBuilder.depthDelta(S),F=d.getDepthDelta(),M=F+T;d.setDepthDelta(M)}else this._edgeList.add(s),s.setDepthDelta(BufferBuilder.depthDelta(s.getLabel()))};BufferBuilder.prototype.buildSubgraphs=function f(s,d){for(var _=new ArrayList,S=s.iterator();S.hasNext();){var T=S.next(),F=T.getRightmostCoordinate(),M=new SubgraphDepthLocater(_),P=M.getDepth(F);T.computeDepth(P),T.findResultEdges(),_.add(T),d.add(T.getDirectedEdges(),T.getNodes())}};BufferBuilder.prototype.createSubgraphs=function f(s){for(var d=new ArrayList,_=s.getNodes().iterator();_.hasNext();){var S=_.next();if(!S.isVisited()){var T=new BufferSubgraph;T.create(S),d.add(T)}}return Collections.sort(d,Collections.reverseOrder()),d};BufferBuilder.prototype.createEmptyResultGeometry=function f(){var s=this._geomFact.createPolygon();return s};BufferBuilder.prototype.getNoder=function f(s){if(this._workingNoder!==null)return this._workingNoder;var d=new MCIndexNoder,_=new RobustLineIntersector;return _.setPrecisionModel(s),d.setSegmentIntersector(new IntersectionAdder(_)),d};BufferBuilder.prototype.buffer=function f(s,d){var _=this._workingPrecisionModel;_===null&&(_=s.getPrecisionModel()),this._geomFact=s.getFactory();var S=new OffsetCurveBuilder(_,this._bufParams),T=new OffsetCurveSetBuilder(s,d,S),F=T.getCurves();if(F.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(F,_),this._graph=new PlanarGraph(new OverlayNodeFactory),this._graph.addEdges(this._edgeList.getEdges());var M=this.createSubgraphs(this._graph),P=new PolygonBuilder(this._geomFact);this.buildSubgraphs(M,P);var H=P.getPolygons();if(H.size()<=0)return this.createEmptyResultGeometry();var J=this._geomFact.buildGeometry(H);return J};BufferBuilder.prototype.computeNodedEdges=function f(s,d){var _=this,S=this.getNoder(d);S.computeNodes(s);for(var T=S.getNodedSubstrings(),F=T.iterator();F.hasNext();){var M=F.next(),P=M.getCoordinates();if(!(P.length===2&&P[0].equals2D(P[1]))){var H=M.getData(),J=new Edge(M.getCoordinates(),new Label(H));_.insertUniqueEdge(J)}}};BufferBuilder.prototype.setNoder=function f(s){this._workingNoder=s};BufferBuilder.prototype.interfaces_=function f(){return[]};BufferBuilder.prototype.getClass=function f(){return BufferBuilder};BufferBuilder.depthDelta=function f(s){var d=s.getLocation(0,Position.LEFT),_=s.getLocation(0,Position.RIGHT);return d===Location.INTERIOR&&_===Location.EXTERIOR?1:d===Location.EXTERIOR&&_===Location.INTERIOR?-1:0};BufferBuilder.convertSegStrings=function f(s){for(var d=new GeometryFactory,_=new ArrayList;s.hasNext();){var S=s.next(),T=d.createLineString(S.getCoordinates());_.add(T)}return d.buildGeometry(_)};var ScaledNoder=function f(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var s=arguments[0],d=arguments[1];this._noder=s,this._scaleFactor=d,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var _=arguments[0],S=arguments[1],T=arguments[2],F=arguments[3];this._noder=_,this._scaleFactor=S,this._offsetX=T,this._offsetY=F,this._isScaled=!this.isIntegerPrecision()}};ScaledNoder.prototype.rescale=function f(){var s=this;if(hasInterface(arguments[0],Collection))for(var d=arguments[0],_=d.iterator();_.hasNext();){var S=_.next();s.rescale(S.getCoordinates())}else if(arguments[0]instanceof Array){for(var T=arguments[0],F=0;F<T.length;F++)T[F].x=T[F].x/s._scaleFactor+s._offsetX,T[F].y=T[F].y/s._scaleFactor+s._offsetY;T.length===2&&T[0].equals2D(T[1])&&System.out.println(T)}};ScaledNoder.prototype.scale=function f(){var s=this;if(hasInterface(arguments[0],Collection)){for(var d=arguments[0],_=new ArrayList,S=d.iterator();S.hasNext();){var T=S.next();_.add(new NodedSegmentString(s.scale(T.getCoordinates()),T.getData()))}return _}else if(arguments[0]instanceof Array){for(var F=arguments[0],M=new Array(F.length).fill(null),P=0;P<F.length;P++)M[P]=new Coordinate(Math.round((F[P].x-s._offsetX)*s._scaleFactor),Math.round((F[P].y-s._offsetY)*s._scaleFactor),F[P].z);var H=CoordinateArrays.removeRepeatedPoints(M);return H}};ScaledNoder.prototype.isIntegerPrecision=function f(){return this._scaleFactor===1};ScaledNoder.prototype.getNodedSubstrings=function f(){var s=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(s),s};ScaledNoder.prototype.computeNodes=function f(s){var d=s;this._isScaled&&(d=this.scale(s)),this._noder.computeNodes(d)};ScaledNoder.prototype.interfaces_=function f(){return[Noder]};ScaledNoder.prototype.getClass=function f(){return ScaledNoder};var NodingValidator=function f(){this._li=new RobustLineIntersector,this._segStrings=null;var s=arguments[0];this._segStrings=s},staticAccessors$33={fact:{configurable:!0}};NodingValidator.prototype.checkEndPtVertexIntersections=function f(){var s=this;if(arguments.length===0)for(var d=this._segStrings.iterator();d.hasNext();){var _=d.next(),S=_.getCoordinates();s.checkEndPtVertexIntersections(S[0],s._segStrings),s.checkEndPtVertexIntersections(S[S.length-1],s._segStrings)}else if(arguments.length===2){for(var T=arguments[0],F=arguments[1],M=F.iterator();M.hasNext();)for(var P=M.next(),H=P.getCoordinates(),J=1;J<H.length-1;J++)if(H[J].equals(T))throw new RuntimeException("found endpt/interior pt intersection at index "+J+" :pt "+T)}};NodingValidator.prototype.checkInteriorIntersections=function f(){var s=this;if(arguments.length===0)for(var d=this._segStrings.iterator();d.hasNext();)for(var _=d.next(),S=this._segStrings.iterator();S.hasNext();){var T=S.next();s.checkInteriorIntersections(_,T)}else if(arguments.length===2)for(var F=arguments[0],M=arguments[1],P=F.getCoordinates(),H=M.getCoordinates(),J=0;J<P.length-1;J++)for(var K=0;K<H.length-1;K++)s.checkInteriorIntersections(F,J,M,K);else if(arguments.length===4){var z=arguments[0],oe=arguments[1],se=arguments[2],ae=arguments[3];if(z===se&&oe===ae)return null;var ge=z.getCoordinates()[oe],pe=z.getCoordinates()[oe+1],he=se.getCoordinates()[ae],ve=se.getCoordinates()[ae+1];if(this._li.computeIntersection(ge,pe,he,ve),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,ge,pe)||this.hasInteriorIntersection(this._li,he,ve)))throw new RuntimeException("found non-noded intersection at "+ge+"-"+pe+" and "+he+"-"+ve)}};NodingValidator.prototype.checkValid=function f(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};NodingValidator.prototype.checkCollapses=function f(){var s=this;if(arguments.length===0)for(var d=this._segStrings.iterator();d.hasNext();){var _=d.next();s.checkCollapses(_)}else if(arguments.length===1)for(var S=arguments[0],T=S.getCoordinates(),F=0;F<T.length-2;F++)s.checkCollapse(T[F],T[F+1],T[F+2])};NodingValidator.prototype.hasInteriorIntersection=function f(s,d,_){for(var S=0;S<s.getIntersectionNum();S++){var T=s.getIntersection(S);if(!(T.equals(d)||T.equals(_)))return!0}return!1};NodingValidator.prototype.checkCollapse=function f(s,d,_){if(s.equals(_))throw new RuntimeException("found non-noded collapse at "+NodingValidator.fact.createLineString([s,d,_]))};NodingValidator.prototype.interfaces_=function f(){return[]};NodingValidator.prototype.getClass=function f(){return NodingValidator};staticAccessors$33.fact.get=function(){return new GeometryFactory};Object.defineProperties(NodingValidator,staticAccessors$33);var HotPixel=function f(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var s=arguments[0],d=arguments[1],_=arguments[2];if(this._originalPt=s,this._pt=s,this._scaleFactor=d,this._li=_,d<=0)throw new IllegalArgumentException("Scale factor must be non-zero");d!==1&&(this._pt=new Coordinate(this.scale(s.x),this.scale(s.y)),this._p0Scaled=new Coordinate,this._p1Scaled=new Coordinate),this.initCorners(this._pt)},staticAccessors$34={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};HotPixel.prototype.intersectsScaled=function f(s,d){var _=Math.min(s.x,d.x),S=Math.max(s.x,d.x),T=Math.min(s.y,d.y),F=Math.max(s.y,d.y),M=this._maxx<_||this._minx>S||this._maxy<T||this._miny>F;if(M)return!1;var P=this.intersectsToleranceSquare(s,d);return Assert.isTrue(!(M&&P),"Found bad envelope test"),P};HotPixel.prototype.initCorners=function f(s){var d=.5;this._minx=s.x-d,this._maxx=s.x+d,this._miny=s.y-d,this._maxy=s.y+d,this._corner[0]=new Coordinate(this._maxx,this._maxy),this._corner[1]=new Coordinate(this._minx,this._maxy),this._corner[2]=new Coordinate(this._minx,this._miny),this._corner[3]=new Coordinate(this._maxx,this._miny)};HotPixel.prototype.intersects=function f(s,d){return this._scaleFactor===1?this.intersectsScaled(s,d):(this.copyScaled(s,this._p0Scaled),this.copyScaled(d,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};HotPixel.prototype.scale=function f(s){return Math.round(s*this._scaleFactor)};HotPixel.prototype.getCoordinate=function f(){return this._originalPt};HotPixel.prototype.copyScaled=function f(s,d){d.x=this.scale(s.x),d.y=this.scale(s.y)};HotPixel.prototype.getSafeEnvelope=function f(){if(this._safeEnv===null){var s=HotPixel.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Envelope(this._originalPt.x-s,this._originalPt.x+s,this._originalPt.y-s,this._originalPt.y+s)}return this._safeEnv};HotPixel.prototype.intersectsPixelClosure=function f(s,d){return this._li.computeIntersection(s,d,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(s,d,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(s,d,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(s,d,this._corner[3],this._corner[0]),this._li.hasIntersection()))};HotPixel.prototype.intersectsToleranceSquare=function f(s,d){var _=!1,S=!1;return this._li.computeIntersection(s,d,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(s,d,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(_=!0),this._li.computeIntersection(s,d,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(S=!0),this._li.computeIntersection(s,d,this._corner[3],this._corner[0]),this._li.isProper())||_&&S||s.equals(this._pt)||d.equals(this._pt))};HotPixel.prototype.addSnappedNode=function f(s,d){var _=s.getCoordinate(d),S=s.getCoordinate(d+1);return this.intersects(_,S)?(s.addIntersection(this.getCoordinate(),d),!0):!1};HotPixel.prototype.interfaces_=function f(){return[]};HotPixel.prototype.getClass=function f(){return HotPixel};staticAccessors$34.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(HotPixel,staticAccessors$34);var MonotoneChainSelectAction=function f(){this.tempEnv1=new Envelope,this.selectedSegment=new LineSegment};MonotoneChainSelectAction.prototype.select=function f(){if(arguments.length!==1){if(arguments.length===2){var s=arguments[0],d=arguments[1];s.getLineSegment(d,this.selectedSegment),this.select(this.selectedSegment)}}};MonotoneChainSelectAction.prototype.interfaces_=function f(){return[]};MonotoneChainSelectAction.prototype.getClass=function f(){return MonotoneChainSelectAction};var MCIndexPointSnapper=function f(){this._index=null;var s=arguments[0];this._index=s},staticAccessors$35={HotPixelSnapAction:{configurable:!0}};MCIndexPointSnapper.prototype.snap=function f(){if(arguments.length===1){var s=arguments[0];return this.snap(s,null,-1)}else if(arguments.length===3){var d=arguments[0],_=arguments[1],S=arguments[2],T=d.getSafeEnvelope(),F=new HotPixelSnapAction(d,_,S);return this._index.query(T,{interfaces_:function(){return[ItemVisitor]},visitItem:function(M){var P=M;P.select(T,F)}}),F.isNodeAdded()}};MCIndexPointSnapper.prototype.interfaces_=function f(){return[]};MCIndexPointSnapper.prototype.getClass=function f(){return MCIndexPointSnapper};staticAccessors$35.HotPixelSnapAction.get=function(){return HotPixelSnapAction};Object.defineProperties(MCIndexPointSnapper,staticAccessors$35);var HotPixelSnapAction=function(f){function s(){f.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var d=arguments[0],_=arguments[1],S=arguments[2];this._hotPixel=d,this._parentEdge=_,this._hotPixelVertexIndex=S}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.isNodeAdded=function(){return this._isNodeAdded},s.prototype.select=function(){if(arguments.length===2){var _=arguments[0],S=arguments[1],T=_.getContext();if(this._parentEdge!==null&&T===this._parentEdge&&S===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(T,S)}else return f.prototype.select.apply(this,arguments)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(MonotoneChainSelectAction),InteriorIntersectionFinderAdder=function f(){this._li=null,this._interiorIntersections=null;var s=arguments[0];this._li=s,this._interiorIntersections=new ArrayList};InteriorIntersectionFinderAdder.prototype.processIntersections=function f(s,d,_,S){var T=this;if(s===_&&d===S)return null;var F=s.getCoordinates()[d],M=s.getCoordinates()[d+1],P=_.getCoordinates()[S],H=_.getCoordinates()[S+1];if(this._li.computeIntersection(F,M,P,H),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var J=0;J<this._li.getIntersectionNum();J++)T._interiorIntersections.add(T._li.getIntersection(J));s.addIntersections(this._li,d,0),_.addIntersections(this._li,S,1)}};InteriorIntersectionFinderAdder.prototype.isDone=function f(){return!1};InteriorIntersectionFinderAdder.prototype.getInteriorIntersections=function f(){return this._interiorIntersections};InteriorIntersectionFinderAdder.prototype.interfaces_=function f(){return[SegmentIntersector]};InteriorIntersectionFinderAdder.prototype.getClass=function f(){return InteriorIntersectionFinderAdder};var MCIndexSnapRounder=function f(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var s=arguments[0];this._pm=s,this._li=new RobustLineIntersector,this._li.setPrecisionModel(s),this._scaleFactor=s.getScale()};MCIndexSnapRounder.prototype.checkCorrectness=function f(s){var d=NodedSegmentString.getNodedSubstrings(s),_=new NodingValidator(d);try{_.checkValid()}catch(S){if(S instanceof Exception)S.printStackTrace();else throw S}finally{}};MCIndexSnapRounder.prototype.getNodedSubstrings=function f(){return NodedSegmentString.getNodedSubstrings(this._nodedSegStrings)};MCIndexSnapRounder.prototype.snapRound=function f(s,d){var _=this.findInteriorIntersections(s,d);this.computeIntersectionSnaps(_),this.computeVertexSnaps(s)};MCIndexSnapRounder.prototype.findInteriorIntersections=function f(s,d){var _=new InteriorIntersectionFinderAdder(d);return this._noder.setSegmentIntersector(_),this._noder.computeNodes(s),_.getInteriorIntersections()};MCIndexSnapRounder.prototype.computeVertexSnaps=function f(){var s=this;if(hasInterface(arguments[0],Collection))for(var d=arguments[0],_=d.iterator();_.hasNext();){var S=_.next();s.computeVertexSnaps(S)}else if(arguments[0]instanceof NodedSegmentString)for(var T=arguments[0],F=T.getCoordinates(),M=0;M<F.length;M++){var P=new HotPixel(F[M],s._scaleFactor,s._li),H=s._pointSnapper.snap(P,T,M);H&&T.addIntersection(F[M],M)}};MCIndexSnapRounder.prototype.computeNodes=function f(s){this._nodedSegStrings=s,this._noder=new MCIndexNoder,this._pointSnapper=new MCIndexPointSnapper(this._noder.getIndex()),this.snapRound(s,this._li)};MCIndexSnapRounder.prototype.computeIntersectionSnaps=function f(s){for(var d=this,_=s.iterator();_.hasNext();){var S=_.next(),T=new HotPixel(S,d._scaleFactor,d._li);d._pointSnapper.snap(T)}};MCIndexSnapRounder.prototype.interfaces_=function f(){return[Noder]};MCIndexSnapRounder.prototype.getClass=function f(){return MCIndexSnapRounder};var BufferOp=function f(){if(this._argGeom=null,this._distance=null,this._bufParams=new BufferParameters,this._resultGeometry=null,this._saveException=null,arguments.length===1){var s=arguments[0];this._argGeom=s}else if(arguments.length===2){var d=arguments[0],_=arguments[1];this._argGeom=d,this._bufParams=_}},staticAccessors$32={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};BufferOp.prototype.bufferFixedPrecision=function f(s){var d=new ScaledNoder(new MCIndexSnapRounder(new PrecisionModel(1)),s.getScale()),_=new BufferBuilder(this._bufParams);_.setWorkingPrecisionModel(s),_.setNoder(d),this._resultGeometry=_.buffer(this._argGeom,this._distance)};BufferOp.prototype.bufferReducedPrecision=function f(){var s=this;if(arguments.length===0){for(var d=BufferOp.MAX_PRECISION_DIGITS;d>=0;d--){try{s.bufferReducedPrecision(d)}catch(F){if(F instanceof TopologyException)s._saveException=F;else throw F}finally{}if(s._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var _=arguments[0],S=BufferOp.precisionScaleFactor(this._argGeom,this._distance,_),T=new PrecisionModel(S);this.bufferFixedPrecision(T)}};BufferOp.prototype.computeGeometry=function f(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var s=this._argGeom.getFactory().getPrecisionModel();s.getType()===PrecisionModel.FIXED?this.bufferFixedPrecision(s):this.bufferReducedPrecision()};BufferOp.prototype.setQuadrantSegments=function f(s){this._bufParams.setQuadrantSegments(s)};BufferOp.prototype.bufferOriginalPrecision=function f(){try{var s=new BufferBuilder(this._bufParams);this._resultGeometry=s.buffer(this._argGeom,this._distance)}catch(d){if(d instanceof RuntimeException)this._saveException=d;else throw d}finally{}};BufferOp.prototype.getResultGeometry=function f(s){return this._distance=s,this.computeGeometry(),this._resultGeometry};BufferOp.prototype.setEndCapStyle=function f(s){this._bufParams.setEndCapStyle(s)};BufferOp.prototype.interfaces_=function f(){return[]};BufferOp.prototype.getClass=function f(){return BufferOp};BufferOp.bufferOp=function f(){if(arguments.length===2){var s=arguments[0],d=arguments[1],_=new BufferOp(s),S=_.getResultGeometry(d);return S}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Geometry&&typeof arguments[1]=="number"){var T=arguments[0],F=arguments[1],M=arguments[2],P=new BufferOp(T);P.setQuadrantSegments(M);var H=P.getResultGeometry(F);return H}else if(arguments[2]instanceof BufferParameters&&arguments[0]instanceof Geometry&&typeof arguments[1]=="number"){var J=arguments[0],K=arguments[1],z=arguments[2],oe=new BufferOp(J,z),se=oe.getResultGeometry(K);return se}}else if(arguments.length===4){var ae=arguments[0],ge=arguments[1],pe=arguments[2],he=arguments[3],ve=new BufferOp(ae);ve.setQuadrantSegments(pe),ve.setEndCapStyle(he);var be=ve.getResultGeometry(ge);return be}};BufferOp.precisionScaleFactor=function f(s,d,_){var S=s.getEnvelopeInternal(),T=MathUtil.max(Math.abs(S.getMaxX()),Math.abs(S.getMaxY()),Math.abs(S.getMinX()),Math.abs(S.getMinY())),F=d>0?d:0,M=T+2*F,P=Math.trunc(Math.log(M)/Math.log(10)+1),H=_-P,J=Math.pow(10,H);return J};staticAccessors$32.CAP_ROUND.get=function(){return BufferParameters.CAP_ROUND};staticAccessors$32.CAP_BUTT.get=function(){return BufferParameters.CAP_FLAT};staticAccessors$32.CAP_FLAT.get=function(){return BufferParameters.CAP_FLAT};staticAccessors$32.CAP_SQUARE.get=function(){return BufferParameters.CAP_SQUARE};staticAccessors$32.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(BufferOp,staticAccessors$32);var PointPairDistance=function f(){this._pt=[new Coordinate,new Coordinate],this._distance=Double.NaN,this._isNull=!0};PointPairDistance.prototype.getCoordinates=function f(){return this._pt};PointPairDistance.prototype.getCoordinate=function f(s){return this._pt[s]};PointPairDistance.prototype.setMinimum=function f(){if(arguments.length===1){var s=arguments[0];this.setMinimum(s._pt[0],s._pt[1])}else if(arguments.length===2){var d=arguments[0],_=arguments[1];if(this._isNull)return this.initialize(d,_),null;var S=d.distance(_);S<this._distance&&this.initialize(d,_,S)}};PointPairDistance.prototype.initialize=function f(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var s=arguments[0],d=arguments[1];this._pt[0].setCoordinate(s),this._pt[1].setCoordinate(d),this._distance=s.distance(d),this._isNull=!1}else if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];this._pt[0].setCoordinate(_),this._pt[1].setCoordinate(S),this._distance=T,this._isNull=!1}};PointPairDistance.prototype.getDistance=function f(){return this._distance};PointPairDistance.prototype.setMaximum=function f(){if(arguments.length===1){var s=arguments[0];this.setMaximum(s._pt[0],s._pt[1])}else if(arguments.length===2){var d=arguments[0],_=arguments[1];if(this._isNull)return this.initialize(d,_),null;var S=d.distance(_);S>this._distance&&this.initialize(d,_,S)}};PointPairDistance.prototype.interfaces_=function f(){return[]};PointPairDistance.prototype.getClass=function f(){return PointPairDistance};var DistanceToPointFinder=function f(){};DistanceToPointFinder.prototype.interfaces_=function f(){return[]};DistanceToPointFinder.prototype.getClass=function f(){return DistanceToPointFinder};DistanceToPointFinder.computeDistance=function f(){if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof LineString&&arguments[1]instanceof Coordinate)for(var s=arguments[0],d=arguments[1],_=arguments[2],S=s.getCoordinates(),T=new LineSegment,F=0;F<S.length-1;F++){T.setCoordinates(S[F],S[F+1]);var M=T.closestPoint(d);_.setMinimum(M,d)}else if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof Polygon&&arguments[1]instanceof Coordinate){var P=arguments[0],H=arguments[1],J=arguments[2];DistanceToPointFinder.computeDistance(P.getExteriorRing(),H,J);for(var K=0;K<P.getNumInteriorRing();K++)DistanceToPointFinder.computeDistance(P.getInteriorRingN(K),H,J)}else if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof Geometry&&arguments[1]instanceof Coordinate){var z=arguments[0],oe=arguments[1],se=arguments[2];if(z instanceof LineString)DistanceToPointFinder.computeDistance(z,oe,se);else if(z instanceof Polygon)DistanceToPointFinder.computeDistance(z,oe,se);else if(z instanceof GeometryCollection)for(var ae=z,ge=0;ge<ae.getNumGeometries();ge++){var pe=ae.getGeometryN(ge);DistanceToPointFinder.computeDistance(pe,oe,se)}else se.setMinimum(z.getCoordinate(),oe)}else if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof LineSegment&&arguments[1]instanceof Coordinate){var he=arguments[0],ve=arguments[1],be=arguments[2],Re=he.closestPoint(ve);be.setMinimum(Re,ve)}};var BufferCurveMaximumDistanceFinder=function f(s){this._maxPtDist=new PointPairDistance,this._inputGeom=s||null},staticAccessors$36={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};BufferCurveMaximumDistanceFinder.prototype.computeMaxMidpointDistance=function f(s){var d=new MaxMidpointDistanceFilter(this._inputGeom);s.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())};BufferCurveMaximumDistanceFinder.prototype.computeMaxVertexDistance=function f(s){var d=new MaxPointDistanceFilter(this._inputGeom);s.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())};BufferCurveMaximumDistanceFinder.prototype.findDistance=function f(s){return this.computeMaxVertexDistance(s),this.computeMaxMidpointDistance(s),this._maxPtDist.getDistance()};BufferCurveMaximumDistanceFinder.prototype.getDistancePoints=function f(){return this._maxPtDist};BufferCurveMaximumDistanceFinder.prototype.interfaces_=function f(){return[]};BufferCurveMaximumDistanceFinder.prototype.getClass=function f(){return BufferCurveMaximumDistanceFinder};staticAccessors$36.MaxPointDistanceFilter.get=function(){return MaxPointDistanceFilter};staticAccessors$36.MaxMidpointDistanceFilter.get=function(){return MaxMidpointDistanceFilter};Object.defineProperties(BufferCurveMaximumDistanceFinder,staticAccessors$36);var MaxPointDistanceFilter=function f(s){this._maxPtDist=new PointPairDistance,this._minPtDist=new PointPairDistance,this._geom=s||null};MaxPointDistanceFilter.prototype.filter=function f(s){this._minPtDist.initialize(),DistanceToPointFinder.computeDistance(this._geom,s,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};MaxPointDistanceFilter.prototype.getMaxPointDistance=function f(){return this._maxPtDist};MaxPointDistanceFilter.prototype.interfaces_=function f(){return[CoordinateFilter]};MaxPointDistanceFilter.prototype.getClass=function f(){return MaxPointDistanceFilter};var MaxMidpointDistanceFilter=function f(s){this._maxPtDist=new PointPairDistance,this._minPtDist=new PointPairDistance,this._geom=s||null};MaxMidpointDistanceFilter.prototype.filter=function f(s,d){if(d===0)return null;var _=s.getCoordinate(d-1),S=s.getCoordinate(d),T=new Coordinate((_.x+S.x)/2,(_.y+S.y)/2);this._minPtDist.initialize(),DistanceToPointFinder.computeDistance(this._geom,T,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};MaxMidpointDistanceFilter.prototype.isDone=function f(){return!1};MaxMidpointDistanceFilter.prototype.isGeometryChanged=function f(){return!1};MaxMidpointDistanceFilter.prototype.getMaxPointDistance=function f(){return this._maxPtDist};MaxMidpointDistanceFilter.prototype.interfaces_=function f(){return[CoordinateSequenceFilter]};MaxMidpointDistanceFilter.prototype.getClass=function f(){return MaxMidpointDistanceFilter};var PolygonExtracter=function f(s){this._comps=s||null};PolygonExtracter.prototype.filter=function f(s){s instanceof Polygon&&this._comps.add(s)};PolygonExtracter.prototype.interfaces_=function f(){return[GeometryFilter]};PolygonExtracter.prototype.getClass=function f(){return PolygonExtracter};PolygonExtracter.getPolygons=function f(){if(arguments.length===1){var s=arguments[0];return PolygonExtracter.getPolygons(s,new ArrayList)}else if(arguments.length===2){var d=arguments[0],_=arguments[1];return d instanceof Polygon?_.add(d):d instanceof GeometryCollection&&d.apply(new PolygonExtracter(_)),_}};var LinearComponentExtracter=function f(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var s=arguments[0];this._lines=s}else if(arguments.length===2){var d=arguments[0],_=arguments[1];this._lines=d,this._isForcedToLineString=_}};LinearComponentExtracter.prototype.filter=function f(s){if(this._isForcedToLineString&&s instanceof LinearRing){var d=s.getFactory().createLineString(s.getCoordinateSequence());return this._lines.add(d),null}s instanceof LineString&&this._lines.add(s)};LinearComponentExtracter.prototype.setForceToLineString=function f(s){this._isForcedToLineString=s};LinearComponentExtracter.prototype.interfaces_=function f(){return[GeometryComponentFilter]};LinearComponentExtracter.prototype.getClass=function f(){return LinearComponentExtracter};LinearComponentExtracter.getGeometry=function f(){if(arguments.length===1){var s=arguments[0];return s.getFactory().buildGeometry(LinearComponentExtracter.getLines(s))}else if(arguments.length===2){var d=arguments[0],_=arguments[1];return d.getFactory().buildGeometry(LinearComponentExtracter.getLines(d,_))}};LinearComponentExtracter.getLines=function f(){if(arguments.length===1){var s=arguments[0];return LinearComponentExtracter.getLines(s,!1)}else if(arguments.length===2){if(hasInterface(arguments[0],Collection)&&hasInterface(arguments[1],Collection)){for(var d=arguments[0],_=arguments[1],S=d.iterator();S.hasNext();){var T=S.next();LinearComponentExtracter.getLines(T,_)}return _}else if(arguments[0]instanceof Geometry&&typeof arguments[1]=="boolean"){var F=arguments[0],M=arguments[1],P=new ArrayList;return F.apply(new LinearComponentExtracter(P,M)),P}else if(arguments[0]instanceof Geometry&&hasInterface(arguments[1],Collection)){var H=arguments[0],J=arguments[1];return H instanceof LineString?J.add(H):H.apply(new LinearComponentExtracter(J)),J}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&hasInterface(arguments[0],Collection)&&hasInterface(arguments[1],Collection)){for(var K=arguments[0],z=arguments[1],oe=arguments[2],se=K.iterator();se.hasNext();){var ae=se.next();LinearComponentExtracter.getLines(ae,z,oe)}return z}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Geometry&&hasInterface(arguments[1],Collection)){var ge=arguments[0],pe=arguments[1],he=arguments[2];return ge.apply(new LinearComponentExtracter(pe,he)),pe}}};var PointLocator=function f(){if(this._boundaryRule=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var s=arguments[0];if(s===null)throw new IllegalArgumentException("Rule must be non-null");this._boundaryRule=s}}};PointLocator.prototype.locateInternal=function f(){var s=this;if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Polygon){var d=arguments[0],_=arguments[1];if(_.isEmpty())return Location.EXTERIOR;var S=_.getExteriorRing(),T=this.locateInPolygonRing(d,S);if(T===Location.EXTERIOR)return Location.EXTERIOR;if(T===Location.BOUNDARY)return Location.BOUNDARY;for(var F=0;F<_.getNumInteriorRing();F++){var M=_.getInteriorRingN(F),P=s.locateInPolygonRing(d,M);if(P===Location.INTERIOR)return Location.EXTERIOR;if(P===Location.BOUNDARY)return Location.BOUNDARY}return Location.INTERIOR}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof LineString){var H=arguments[0],J=arguments[1];if(!J.getEnvelopeInternal().intersects(H))return Location.EXTERIOR;var K=J.getCoordinates();return!J.isClosed()&&(H.equals(K[0])||H.equals(K[K.length-1]))?Location.BOUNDARY:CGAlgorithms.isOnLine(H,K)?Location.INTERIOR:Location.EXTERIOR}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Point){var z=arguments[0],oe=arguments[1],se=oe.getCoordinate();return se.equals2D(z)?Location.INTERIOR:Location.EXTERIOR}};PointLocator.prototype.locateInPolygonRing=function f(s,d){return d.getEnvelopeInternal().intersects(s)?CGAlgorithms.locatePointInRing(s,d.getCoordinates()):Location.EXTERIOR};PointLocator.prototype.intersects=function f(s,d){return this.locate(s,d)!==Location.EXTERIOR};PointLocator.prototype.updateLocationInfo=function f(s){s===Location.INTERIOR&&(this._isIn=!0),s===Location.BOUNDARY&&this._numBoundaries++};PointLocator.prototype.computeLocation=function f(s,d){var _=this;if(d instanceof Point&&this.updateLocationInfo(this.locateInternal(s,d)),d instanceof LineString)this.updateLocationInfo(this.locateInternal(s,d));else if(d instanceof Polygon)this.updateLocationInfo(this.locateInternal(s,d));else if(d instanceof MultiLineString)for(var S=d,T=0;T<S.getNumGeometries();T++){var F=S.getGeometryN(T);_.updateLocationInfo(_.locateInternal(s,F))}else if(d instanceof MultiPolygon)for(var M=d,P=0;P<M.getNumGeometries();P++){var H=M.getGeometryN(P);_.updateLocationInfo(_.locateInternal(s,H))}else if(d instanceof GeometryCollection)for(var J=new GeometryCollectionIterator(d);J.hasNext();){var K=J.next();K!==d&&_.computeLocation(s,K)}};PointLocator.prototype.locate=function f(s,d){return d.isEmpty()?Location.EXTERIOR:d instanceof LineString?this.locateInternal(s,d):d instanceof Polygon?this.locateInternal(s,d):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(s,d),this._boundaryRule.isInBoundary(this._numBoundaries)?Location.BOUNDARY:this._numBoundaries>0||this._isIn?Location.INTERIOR:Location.EXTERIOR)};PointLocator.prototype.interfaces_=function f(){return[]};PointLocator.prototype.getClass=function f(){return PointLocator};var GeometryLocation=function f(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var s=arguments[0],d=arguments[1];f.call(this,s,f.INSIDE_AREA,d)}else if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];this._component=_,this._segIndex=S,this._pt=T}},staticAccessors$38={INSIDE_AREA:{configurable:!0}};GeometryLocation.prototype.isInsideArea=function f(){return this._segIndex===GeometryLocation.INSIDE_AREA};GeometryLocation.prototype.getCoordinate=function f(){return this._pt};GeometryLocation.prototype.getGeometryComponent=function f(){return this._component};GeometryLocation.prototype.getSegmentIndex=function f(){return this._segIndex};GeometryLocation.prototype.interfaces_=function f(){return[]};GeometryLocation.prototype.getClass=function f(){return GeometryLocation};staticAccessors$38.INSIDE_AREA.get=function(){return-1};Object.defineProperties(GeometryLocation,staticAccessors$38);var PointExtracter=function f(s){this._pts=s||null};PointExtracter.prototype.filter=function f(s){s instanceof Point&&this._pts.add(s)};PointExtracter.prototype.interfaces_=function f(){return[GeometryFilter]};PointExtracter.prototype.getClass=function f(){return PointExtracter};PointExtracter.getPoints=function f(){if(arguments.length===1){var s=arguments[0];return s instanceof Point?Collections.singletonList(s):PointExtracter.getPoints(s,new ArrayList)}else if(arguments.length===2){var d=arguments[0],_=arguments[1];return d instanceof Point?_.add(d):d instanceof GeometryCollection&&d.apply(new PointExtracter(_)),_}};var ConnectedElementLocationFilter=function f(){this._locations=null;var s=arguments[0];this._locations=s};ConnectedElementLocationFilter.prototype.filter=function f(s){(s instanceof Point||s instanceof LineString||s instanceof Polygon)&&this._locations.add(new GeometryLocation(s,0,s.getCoordinate()))};ConnectedElementLocationFilter.prototype.interfaces_=function f(){return[GeometryFilter]};ConnectedElementLocationFilter.prototype.getClass=function f(){return ConnectedElementLocationFilter};ConnectedElementLocationFilter.getLocations=function f(s){var d=new ArrayList;return s.apply(new ConnectedElementLocationFilter(d)),d};var DistanceOp=function f(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new PointLocator,this._minDistanceLocation=null,this._minDistance=Double.MAX_VALUE,arguments.length===2){var s=arguments[0],d=arguments[1];this._geom=[s,d],this._terminateDistance=0}else if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=_,this._geom[1]=S,this._terminateDistance=T}};DistanceOp.prototype.computeContainmentDistance=function f(){var s=this;if(arguments.length===0){var d=new Array(2).fill(null);if(this.computeContainmentDistance(0,d),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,d)}else if(arguments.length===2){var _=arguments[0],S=arguments[1],T=1-_,F=PolygonExtracter.getPolygons(this._geom[_]);if(F.size()>0){var M=ConnectedElementLocationFilter.getLocations(this._geom[T]);if(this.computeContainmentDistance(M,F,S),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[T]=S[0],this._minDistanceLocation[_]=S[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&hasInterface(arguments[0],List)&&hasInterface(arguments[1],List)){for(var P=arguments[0],H=arguments[1],J=arguments[2],K=0;K<P.size();K++)for(var z=P.get(K),oe=0;oe<H.size();oe++)if(s.computeContainmentDistance(z,H.get(oe),J),s._minDistance<=s._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof GeometryLocation&&arguments[1]instanceof Polygon){var se=arguments[0],ae=arguments[1],ge=arguments[2],pe=se.getCoordinate();if(Location.EXTERIOR!==this._ptLocator.locate(pe,ae))return this._minDistance=0,ge[0]=se,ge[1]=new GeometryLocation(ae,pe),null}}};DistanceOp.prototype.computeMinDistanceLinesPoints=function f(s,d,_){for(var S=this,T=0;T<s.size();T++)for(var F=s.get(T),M=0;M<d.size();M++){var P=d.get(M);if(S.computeMinDistance(F,P,_),S._minDistance<=S._terminateDistance)return null}};DistanceOp.prototype.computeFacetDistance=function f(){var s=new Array(2).fill(null),d=LinearComponentExtracter.getLines(this._geom[0]),_=LinearComponentExtracter.getLines(this._geom[1]),S=PointExtracter.getPoints(this._geom[0]),T=PointExtracter.getPoints(this._geom[1]);if(this.computeMinDistanceLines(d,_,s),this.updateMinDistance(s,!1),this._minDistance<=this._terminateDistance||(s[0]=null,s[1]=null,this.computeMinDistanceLinesPoints(d,T,s),this.updateMinDistance(s,!1),this._minDistance<=this._terminateDistance)||(s[0]=null,s[1]=null,this.computeMinDistanceLinesPoints(_,S,s),this.updateMinDistance(s,!0),this._minDistance<=this._terminateDistance))return null;s[0]=null,s[1]=null,this.computeMinDistancePoints(S,T,s),this.updateMinDistance(s,!1)};DistanceOp.prototype.nearestLocations=function f(){return this.computeMinDistance(),this._minDistanceLocation};DistanceOp.prototype.updateMinDistance=function f(s,d){if(s[0]===null)return null;d?(this._minDistanceLocation[0]=s[1],this._minDistanceLocation[1]=s[0]):(this._minDistanceLocation[0]=s[0],this._minDistanceLocation[1]=s[1])};DistanceOp.prototype.nearestPoints=function f(){this.computeMinDistance();var s=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return s};DistanceOp.prototype.computeMinDistance=function f(){var s=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof LineString&&arguments[1]instanceof Point){var d=arguments[0],_=arguments[1],S=arguments[2];if(d.getEnvelopeInternal().distance(_.getEnvelopeInternal())>this._minDistance)return null;for(var T=d.getCoordinates(),F=_.getCoordinate(),M=0;M<T.length-1;M++){var P=CGAlgorithms.distancePointLine(F,T[M],T[M+1]);if(P<s._minDistance){s._minDistance=P;var H=new LineSegment(T[M],T[M+1]),J=H.closestPoint(F);S[0]=new GeometryLocation(d,M,J),S[1]=new GeometryLocation(_,0,F)}if(s._minDistance<=s._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof LineString&&arguments[1]instanceof LineString){var K=arguments[0],z=arguments[1],oe=arguments[2];if(K.getEnvelopeInternal().distance(z.getEnvelopeInternal())>this._minDistance)return null;for(var se=K.getCoordinates(),ae=z.getCoordinates(),ge=0;ge<se.length-1;ge++)for(var pe=0;pe<ae.length-1;pe++){var he=CGAlgorithms.distanceLineLine(se[ge],se[ge+1],ae[pe],ae[pe+1]);if(he<s._minDistance){s._minDistance=he;var ve=new LineSegment(se[ge],se[ge+1]),be=new LineSegment(ae[pe],ae[pe+1]),Re=ve.closestPoints(be);oe[0]=new GeometryLocation(K,ge,Re[0]),oe[1]=new GeometryLocation(z,pe,Re[1])}if(s._minDistance<=s._terminateDistance)return null}}}};DistanceOp.prototype.computeMinDistancePoints=function f(s,d,_){for(var S=this,T=0;T<s.size();T++)for(var F=s.get(T),M=0;M<d.size();M++){var P=d.get(M),H=F.getCoordinate().distance(P.getCoordinate());if(H<S._minDistance&&(S._minDistance=H,_[0]=new GeometryLocation(F,0,F.getCoordinate()),_[1]=new GeometryLocation(P,0,P.getCoordinate())),S._minDistance<=S._terminateDistance)return null}};DistanceOp.prototype.distance=function f(){if(this._geom[0]===null||this._geom[1]===null)throw new IllegalArgumentException("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};DistanceOp.prototype.computeMinDistanceLines=function f(s,d,_){for(var S=this,T=0;T<s.size();T++)for(var F=s.get(T),M=0;M<d.size();M++){var P=d.get(M);if(S.computeMinDistance(F,P,_),S._minDistance<=S._terminateDistance)return null}};DistanceOp.prototype.interfaces_=function f(){return[]};DistanceOp.prototype.getClass=function f(){return DistanceOp};DistanceOp.distance=function f(s,d){var _=new DistanceOp(s,d);return _.distance()};DistanceOp.isWithinDistance=function f(s,d,_){var S=new DistanceOp(s,d,_);return S.distance()<=_};DistanceOp.nearestPoints=function f(s,d){var _=new DistanceOp(s,d);return _.nearestPoints()};var PointPairDistance$2=function f(){this._pt=[new Coordinate,new Coordinate],this._distance=Double.NaN,this._isNull=!0};PointPairDistance$2.prototype.getCoordinates=function f(){return this._pt};PointPairDistance$2.prototype.getCoordinate=function f(s){return this._pt[s]};PointPairDistance$2.prototype.setMinimum=function f(){if(arguments.length===1){var s=arguments[0];this.setMinimum(s._pt[0],s._pt[1])}else if(arguments.length===2){var d=arguments[0],_=arguments[1];if(this._isNull)return this.initialize(d,_),null;var S=d.distance(_);S<this._distance&&this.initialize(d,_,S)}};PointPairDistance$2.prototype.initialize=function f(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var s=arguments[0],d=arguments[1];this._pt[0].setCoordinate(s),this._pt[1].setCoordinate(d),this._distance=s.distance(d),this._isNull=!1}else if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];this._pt[0].setCoordinate(_),this._pt[1].setCoordinate(S),this._distance=T,this._isNull=!1}};PointPairDistance$2.prototype.toString=function f(){return WKTWriter.toLineString(this._pt[0],this._pt[1])};PointPairDistance$2.prototype.getDistance=function f(){return this._distance};PointPairDistance$2.prototype.setMaximum=function f(){if(arguments.length===1){var s=arguments[0];this.setMaximum(s._pt[0],s._pt[1])}else if(arguments.length===2){var d=arguments[0],_=arguments[1];if(this._isNull)return this.initialize(d,_),null;var S=d.distance(_);S>this._distance&&this.initialize(d,_,S)}};PointPairDistance$2.prototype.interfaces_=function f(){return[]};PointPairDistance$2.prototype.getClass=function f(){return PointPairDistance$2};var DistanceToPoint=function f(){};DistanceToPoint.prototype.interfaces_=function f(){return[]};DistanceToPoint.prototype.getClass=function f(){return DistanceToPoint};DistanceToPoint.computeDistance=function f(){if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof LineString&&arguments[1]instanceof Coordinate)for(var s=arguments[0],d=arguments[1],_=arguments[2],S=new LineSegment,T=s.getCoordinates(),F=0;F<T.length-1;F++){S.setCoordinates(T[F],T[F+1]);var M=S.closestPoint(d);_.setMinimum(M,d)}else if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof Polygon&&arguments[1]instanceof Coordinate){var P=arguments[0],H=arguments[1],J=arguments[2];DistanceToPoint.computeDistance(P.getExteriorRing(),H,J);for(var K=0;K<P.getNumInteriorRing();K++)DistanceToPoint.computeDistance(P.getInteriorRingN(K),H,J)}else if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof Geometry&&arguments[1]instanceof Coordinate){var z=arguments[0],oe=arguments[1],se=arguments[2];if(z instanceof LineString)DistanceToPoint.computeDistance(z,oe,se);else if(z instanceof Polygon)DistanceToPoint.computeDistance(z,oe,se);else if(z instanceof GeometryCollection)for(var ae=z,ge=0;ge<ae.getNumGeometries();ge++){var pe=ae.getGeometryN(ge);DistanceToPoint.computeDistance(pe,oe,se)}else se.setMinimum(z.getCoordinate(),oe)}else if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof LineSegment&&arguments[1]instanceof Coordinate){var he=arguments[0],ve=arguments[1],be=arguments[2],Re=he.closestPoint(ve);be.setMinimum(Re,ve)}};var DiscreteHausdorffDistance=function f(){this._g0=null,this._g1=null,this._ptDist=new PointPairDistance$2,this._densifyFrac=0;var s=arguments[0],d=arguments[1];this._g0=s,this._g1=d},staticAccessors$39={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};DiscreteHausdorffDistance.prototype.getCoordinates=function f(){return this._ptDist.getCoordinates()};DiscreteHausdorffDistance.prototype.setDensifyFraction=function f(s){if(s>1||s<=0)throw new IllegalArgumentException("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=s};DiscreteHausdorffDistance.prototype.compute=function f(s,d){this.computeOrientedDistance(s,d,this._ptDist),this.computeOrientedDistance(d,s,this._ptDist)};DiscreteHausdorffDistance.prototype.distance=function f(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};DiscreteHausdorffDistance.prototype.computeOrientedDistance=function f(s,d,_){var S=new MaxPointDistanceFilter$1(d);if(s.apply(S),_.setMaximum(S.getMaxPointDistance()),this._densifyFrac>0){var T=new MaxDensifiedByFractionDistanceFilter(d,this._densifyFrac);s.apply(T),_.setMaximum(T.getMaxPointDistance())}};DiscreteHausdorffDistance.prototype.orientedDistance=function f(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};DiscreteHausdorffDistance.prototype.interfaces_=function f(){return[]};DiscreteHausdorffDistance.prototype.getClass=function f(){return DiscreteHausdorffDistance};DiscreteHausdorffDistance.distance=function f(){if(arguments.length===2){var s=arguments[0],d=arguments[1],_=new DiscreteHausdorffDistance(s,d);return _.distance()}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2],M=new DiscreteHausdorffDistance(S,T);return M.setDensifyFraction(F),M.distance()}};staticAccessors$39.MaxPointDistanceFilter.get=function(){return MaxPointDistanceFilter$1};staticAccessors$39.MaxDensifiedByFractionDistanceFilter.get=function(){return MaxDensifiedByFractionDistanceFilter};Object.defineProperties(DiscreteHausdorffDistance,staticAccessors$39);var MaxPointDistanceFilter$1=function f(){this._maxPtDist=new PointPairDistance$2,this._minPtDist=new PointPairDistance$2,this._euclideanDist=new DistanceToPoint,this._geom=null;var s=arguments[0];this._geom=s};MaxPointDistanceFilter$1.prototype.filter=function f(s){this._minPtDist.initialize(),DistanceToPoint.computeDistance(this._geom,s,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};MaxPointDistanceFilter$1.prototype.getMaxPointDistance=function f(){return this._maxPtDist};MaxPointDistanceFilter$1.prototype.interfaces_=function f(){return[CoordinateFilter]};MaxPointDistanceFilter$1.prototype.getClass=function f(){return MaxPointDistanceFilter$1};var MaxDensifiedByFractionDistanceFilter=function f(){this._maxPtDist=new PointPairDistance$2,this._minPtDist=new PointPairDistance$2,this._geom=null,this._numSubSegs=0;var s=arguments[0],d=arguments[1];this._geom=s,this._numSubSegs=Math.trunc(Math.round(1/d))};MaxDensifiedByFractionDistanceFilter.prototype.filter=function f(s,d){var _=this;if(d===0)return null;for(var S=s.getCoordinate(d-1),T=s.getCoordinate(d),F=(T.x-S.x)/this._numSubSegs,M=(T.y-S.y)/this._numSubSegs,P=0;P<this._numSubSegs;P++){var H=S.x+P*F,J=S.y+P*M,K=new Coordinate(H,J);_._minPtDist.initialize(),DistanceToPoint.computeDistance(_._geom,K,_._minPtDist),_._maxPtDist.setMaximum(_._minPtDist)}};MaxDensifiedByFractionDistanceFilter.prototype.isDone=function f(){return!1};MaxDensifiedByFractionDistanceFilter.prototype.isGeometryChanged=function f(){return!1};MaxDensifiedByFractionDistanceFilter.prototype.getMaxPointDistance=function f(){return this._maxPtDist};MaxDensifiedByFractionDistanceFilter.prototype.interfaces_=function f(){return[CoordinateSequenceFilter]};MaxDensifiedByFractionDistanceFilter.prototype.getClass=function f(){return MaxDensifiedByFractionDistanceFilter};var BufferDistanceValidator=function f(s,d,_){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=s||null,this._bufDistance=d||null,this._result=_||null},staticAccessors$37={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};BufferDistanceValidator.prototype.checkMaximumDistance=function f(s,d,_){var S=new DiscreteHausdorffDistance(d,s);if(S.setDensifyFraction(.25),this._maxDistanceFound=S.orientedDistance(),this._maxDistanceFound>_){this._isValid=!1;var T=S.getCoordinates();this._errorLocation=T[1],this._errorIndicator=s.getFactory().createLineString(T),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+WKTWriter.toLineString(T[0],T[1])+")"}};BufferDistanceValidator.prototype.isValid=function f(){var s=Math.abs(this._bufDistance),d=BufferDistanceValidator.MAX_DISTANCE_DIFF_FRAC*s;return this._minValidDistance=s-d,this._maxValidDistance=s+d,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),BufferDistanceValidator.VERBOSE&&System.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};BufferDistanceValidator.prototype.checkNegativeValid=function f(){if(!(this._input instanceof Polygon||this._input instanceof MultiPolygon||this._input instanceof GeometryCollection))return null;var s=this.getPolygonLines(this._input);if(this.checkMinimumDistance(s,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(s,this._result,this._maxValidDistance)};BufferDistanceValidator.prototype.getErrorIndicator=function f(){return this._errorIndicator};BufferDistanceValidator.prototype.checkMinimumDistance=function f(s,d,_){var S=new DistanceOp(s,d,_);if(this._minDistanceFound=S.distance(),this._minDistanceFound<_){this._isValid=!1;var T=S.nearestPoints();this._errorLocation=S.nearestPoints()[1],this._errorIndicator=s.getFactory().createLineString(T),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+WKTWriter.toLineString(T[0],T[1])+" )"}};BufferDistanceValidator.prototype.checkPositiveValid=function f(){var s=this._result.getBoundary();if(this.checkMinimumDistance(this._input,s,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,s,this._maxValidDistance)};BufferDistanceValidator.prototype.getErrorLocation=function f(){return this._errorLocation};BufferDistanceValidator.prototype.getPolygonLines=function f(s){for(var d=new ArrayList,_=new LinearComponentExtracter(d),S=PolygonExtracter.getPolygons(s),T=S.iterator();T.hasNext();){var F=T.next();F.apply(_)}return s.getFactory().buildGeometry(d)};BufferDistanceValidator.prototype.getErrorMessage=function f(){return this._errMsg};BufferDistanceValidator.prototype.interfaces_=function f(){return[]};BufferDistanceValidator.prototype.getClass=function f(){return BufferDistanceValidator};staticAccessors$37.VERBOSE.get=function(){return!1};staticAccessors$37.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(BufferDistanceValidator,staticAccessors$37);var BufferResultValidator=function f(s,d,_){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=s||null,this._distance=d||null,this._result=_||null},staticAccessors$40={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};BufferResultValidator.prototype.isValid=function f(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};BufferResultValidator.prototype.checkEnvelope=function f(){if(this._distance<0)return null;var s=this._distance*BufferResultValidator.MAX_ENV_DIFF_FRAC;s===0&&(s=.001);var d=new Envelope(this._input.getEnvelopeInternal());d.expandBy(this._distance);var _=new Envelope(this._result.getEnvelopeInternal());_.expandBy(s),_.contains(d)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(_)),this.report("Envelope")};BufferResultValidator.prototype.checkDistance=function f(){var s=new BufferDistanceValidator(this._input,this._distance,this._result);s.isValid()||(this._isValid=!1,this._errorMsg=s.getErrorMessage(),this._errorLocation=s.getErrorLocation(),this._errorIndicator=s.getErrorIndicator()),this.report("Distance")};BufferResultValidator.prototype.checkArea=function f(){var s=this._input.getArea(),d=this._result.getArea();this._distance>0&&s>d&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&s<d&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};BufferResultValidator.prototype.checkPolygonal=function f(){this._result instanceof Polygon||this._result instanceof MultiPolygon||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};BufferResultValidator.prototype.getErrorIndicator=function f(){return this._errorIndicator};BufferResultValidator.prototype.getErrorLocation=function f(){return this._errorLocation};BufferResultValidator.prototype.checkExpectedEmpty=function f(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};BufferResultValidator.prototype.report=function f(s){if(!BufferResultValidator.VERBOSE)return null;System.out.println("Check "+s+": "+(this._isValid?"passed":"FAILED"))};BufferResultValidator.prototype.getErrorMessage=function f(){return this._errorMsg};BufferResultValidator.prototype.interfaces_=function f(){return[]};BufferResultValidator.prototype.getClass=function f(){return BufferResultValidator};BufferResultValidator.isValidMsg=function f(s,d,_){var S=new BufferResultValidator(s,d,_);return S.isValid()?null:S.getErrorMessage()};BufferResultValidator.isValid=function f(s,d,_){var S=new BufferResultValidator(s,d,_);return!!S.isValid()};staticAccessors$40.VERBOSE.get=function(){return!1};staticAccessors$40.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(BufferResultValidator,staticAccessors$40);var BasicSegmentString=function f(){this._pts=null,this._data=null;var s=arguments[0],d=arguments[1];this._pts=s,this._data=d};BasicSegmentString.prototype.getCoordinates=function f(){return this._pts};BasicSegmentString.prototype.size=function f(){return this._pts.length};BasicSegmentString.prototype.getCoordinate=function f(s){return this._pts[s]};BasicSegmentString.prototype.isClosed=function f(){return this._pts[0].equals(this._pts[this._pts.length-1])};BasicSegmentString.prototype.getSegmentOctant=function f(s){return s===this._pts.length-1?-1:Octant.octant(this.getCoordinate(s),this.getCoordinate(s+1))};BasicSegmentString.prototype.setData=function f(s){this._data=s};BasicSegmentString.prototype.getData=function f(){return this._data};BasicSegmentString.prototype.toString=function f(){return WKTWriter.toLineString(new CoordinateArraySequence(this._pts))};BasicSegmentString.prototype.interfaces_=function f(){return[SegmentString]};BasicSegmentString.prototype.getClass=function f(){return BasicSegmentString};var InteriorIntersectionFinder=function f(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new ArrayList,this._intersectionCount=0,this._keepIntersections=!0;var s=arguments[0];this._li=s,this._interiorIntersection=null};InteriorIntersectionFinder.prototype.getInteriorIntersection=function f(){return this._interiorIntersection};InteriorIntersectionFinder.prototype.setCheckEndSegmentsOnly=function f(s){this._isCheckEndSegmentsOnly=s};InteriorIntersectionFinder.prototype.getIntersectionSegments=function f(){return this._intSegments};InteriorIntersectionFinder.prototype.count=function f(){return this._intersectionCount};InteriorIntersectionFinder.prototype.getIntersections=function f(){return this._intersections};InteriorIntersectionFinder.prototype.setFindAllIntersections=function f(s){this._findAllIntersections=s};InteriorIntersectionFinder.prototype.setKeepIntersections=function f(s){this._keepIntersections=s};InteriorIntersectionFinder.prototype.processIntersections=function f(s,d,_,S){if(!this._findAllIntersections&&this.hasIntersection()||s===_&&d===S)return null;if(this._isCheckEndSegmentsOnly){var T=this.isEndSegment(s,d)||this.isEndSegment(_,S);if(!T)return null}var F=s.getCoordinates()[d],M=s.getCoordinates()[d+1],P=_.getCoordinates()[S],H=_.getCoordinates()[S+1];this._li.computeIntersection(F,M,P,H),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=F,this._intSegments[1]=M,this._intSegments[2]=P,this._intSegments[3]=H,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};InteriorIntersectionFinder.prototype.isEndSegment=function f(s,d){return d===0||d>=s.size()-2};InteriorIntersectionFinder.prototype.hasIntersection=function f(){return this._interiorIntersection!==null};InteriorIntersectionFinder.prototype.isDone=function f(){return this._findAllIntersections?!1:this._interiorIntersection!==null};InteriorIntersectionFinder.prototype.interfaces_=function f(){return[SegmentIntersector]};InteriorIntersectionFinder.prototype.getClass=function f(){return InteriorIntersectionFinder};InteriorIntersectionFinder.createAllIntersectionsFinder=function f(s){var d=new InteriorIntersectionFinder(s);return d.setFindAllIntersections(!0),d};InteriorIntersectionFinder.createAnyIntersectionFinder=function f(s){return new InteriorIntersectionFinder(s)};InteriorIntersectionFinder.createIntersectionCounter=function f(s){var d=new InteriorIntersectionFinder(s);return d.setFindAllIntersections(!0),d.setKeepIntersections(!1),d};var FastNodingValidator=function f(){this._li=new RobustLineIntersector,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var s=arguments[0];this._segStrings=s};FastNodingValidator.prototype.execute=function f(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};FastNodingValidator.prototype.getIntersections=function f(){return this._segInt.getIntersections()};FastNodingValidator.prototype.isValid=function f(){return this.execute(),this._isValid};FastNodingValidator.prototype.setFindAllIntersections=function f(s){this._findAllIntersections=s};FastNodingValidator.prototype.checkInteriorIntersections=function f(){this._isValid=!0,this._segInt=new InteriorIntersectionFinder(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var s=new MCIndexNoder;if(s.setSegmentIntersector(this._segInt),s.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};FastNodingValidator.prototype.checkValid=function f(){if(this.execute(),!this._isValid)throw new TopologyException(this.getErrorMessage(),this._segInt.getInteriorIntersection())};FastNodingValidator.prototype.getErrorMessage=function f(){if(this._isValid)return"no intersections found";var s=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+WKTWriter.toLineString(s[0],s[1])+" and "+WKTWriter.toLineString(s[2],s[3])};FastNodingValidator.prototype.interfaces_=function f(){return[]};FastNodingValidator.prototype.getClass=function f(){return FastNodingValidator};FastNodingValidator.computeIntersections=function f(s){var d=new FastNodingValidator(s);return d.setFindAllIntersections(!0),d.isValid(),d.getIntersections()};var EdgeNodingValidator=function f(){this._nv=null;var s=arguments[0];this._nv=new FastNodingValidator(f.toSegmentStrings(s))};EdgeNodingValidator.prototype.checkValid=function f(){this._nv.checkValid()};EdgeNodingValidator.prototype.interfaces_=function f(){return[]};EdgeNodingValidator.prototype.getClass=function f(){return EdgeNodingValidator};EdgeNodingValidator.toSegmentStrings=function f(s){for(var d=new ArrayList,_=s.iterator();_.hasNext();){var S=_.next();d.add(new BasicSegmentString(S.getCoordinates(),S))}return d};EdgeNodingValidator.checkValid=function f(s){var d=new EdgeNodingValidator(s);d.checkValid()};var GeometryCollectionMapper=function f(s){this._mapOp=s};GeometryCollectionMapper.prototype.map=function f(s){for(var d=this,_=new ArrayList,S=0;S<s.getNumGeometries();S++){var T=d._mapOp.map(s.getGeometryN(S));T.isEmpty()||_.add(T)}return s.getFactory().createGeometryCollection(GeometryFactory.toGeometryArray(_))};GeometryCollectionMapper.prototype.interfaces_=function f(){return[]};GeometryCollectionMapper.prototype.getClass=function f(){return GeometryCollectionMapper};GeometryCollectionMapper.map=function f(s,d){var _=new GeometryCollectionMapper(d);return _.map(s)};var LineBuilder=function f(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new ArrayList,this._resultLineList=new ArrayList;var s=arguments[0],d=arguments[1],_=arguments[2];this._op=s,this._geometryFactory=d,this._ptLocator=_};LineBuilder.prototype.collectLines=function f(s){for(var d=this,_=this._op.getGraph().getEdgeEnds().iterator();_.hasNext();){var S=_.next();d.collectLineEdge(S,s,d._lineEdgesList),d.collectBoundaryTouchEdge(S,s,d._lineEdgesList)}};LineBuilder.prototype.labelIsolatedLine=function f(s,d){var _=this._ptLocator.locate(s.getCoordinate(),this._op.getArgGeometry(d));s.getLabel().setLocation(d,_)};LineBuilder.prototype.build=function f(s){return this.findCoveredLineEdges(),this.collectLines(s),this.buildLines(s),this._resultLineList};LineBuilder.prototype.collectLineEdge=function f(s,d,_){var S=s.getLabel(),T=s.getEdge();s.isLineEdge()&&!s.isVisited()&&OverlayOp.isResultOfOp(S,d)&&!T.isCovered()&&(_.add(T),s.setVisitedEdge(!0))};LineBuilder.prototype.findCoveredLineEdges=function f(){for(var s=this,d=this._op.getGraph().getNodes().iterator();d.hasNext();){var _=d.next();_.getEdges().findCoveredLineEdges()}for(var S=this._op.getGraph().getEdgeEnds().iterator();S.hasNext();){var T=S.next(),F=T.getEdge();if(T.isLineEdge()&&!F.isCoveredSet()){var M=s._op.isCoveredByA(T.getCoordinate());F.setCovered(M)}}};LineBuilder.prototype.labelIsolatedLines=function f(s){for(var d=this,_=s.iterator();_.hasNext();){var S=_.next(),T=S.getLabel();S.isIsolated()&&(T.isNull(0)?d.labelIsolatedLine(S,0):d.labelIsolatedLine(S,1))}};LineBuilder.prototype.buildLines=function f(s){for(var d=this,_=this._lineEdgesList.iterator();_.hasNext();){var S=_.next(),T=d._geometryFactory.createLineString(S.getCoordinates());d._resultLineList.add(T),S.setInResult(!0)}};LineBuilder.prototype.collectBoundaryTouchEdge=function f(s,d,_){var S=s.getLabel();if(s.isLineEdge()||s.isVisited()||s.isInteriorAreaEdge()||s.getEdge().isInResult())return null;Assert.isTrue(!(s.isInResult()||s.getSym().isInResult())||!s.getEdge().isInResult()),OverlayOp.isResultOfOp(S,d)&&d===OverlayOp.INTERSECTION&&(_.add(s.getEdge()),s.setVisitedEdge(!0))};LineBuilder.prototype.interfaces_=function f(){return[]};LineBuilder.prototype.getClass=function f(){return LineBuilder};var PointBuilder=function f(){this._op=null,this._geometryFactory=null,this._resultPointList=new ArrayList;var s=arguments[0],d=arguments[1];this._op=s,this._geometryFactory=d};PointBuilder.prototype.filterCoveredNodeToPoint=function f(s){var d=s.getCoordinate();if(!this._op.isCoveredByLA(d)){var _=this._geometryFactory.createPoint(d);this._resultPointList.add(_)}};PointBuilder.prototype.extractNonCoveredResultNodes=function f(s){for(var d=this,_=this._op.getGraph().getNodes().iterator();_.hasNext();){var S=_.next();if(!S.isInResult()&&!S.isIncidentEdgeInResult()&&(S.getEdges().getDegree()===0||s===OverlayOp.INTERSECTION)){var T=S.getLabel();OverlayOp.isResultOfOp(T,s)&&d.filterCoveredNodeToPoint(S)}}};PointBuilder.prototype.build=function f(s){return this.extractNonCoveredResultNodes(s),this._resultPointList};PointBuilder.prototype.interfaces_=function f(){return[]};PointBuilder.prototype.getClass=function f(){return PointBuilder};var GeometryTransformer=function f(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};GeometryTransformer.prototype.transformPoint=function f(s,d){return this._factory.createPoint(this.transformCoordinates(s.getCoordinateSequence(),s))};GeometryTransformer.prototype.transformPolygon=function f(s,d){var _=this,S=!0,T=this.transformLinearRing(s.getExteriorRing(),s);(T===null||!(T instanceof LinearRing)||T.isEmpty())&&(S=!1);for(var F=new ArrayList,M=0;M<s.getNumInteriorRing();M++){var P=_.transformLinearRing(s.getInteriorRingN(M),s);P===null||P.isEmpty()||(P instanceof LinearRing||(S=!1),F.add(P))}if(S)return this._factory.createPolygon(T,F.toArray([]));var H=new ArrayList;return T!==null&&H.add(T),H.addAll(F),this._factory.buildGeometry(H)};GeometryTransformer.prototype.createCoordinateSequence=function f(s){return this._factory.getCoordinateSequenceFactory().create(s)};GeometryTransformer.prototype.getInputGeometry=function f(){return this._inputGeom};GeometryTransformer.prototype.transformMultiLineString=function f(s,d){for(var _=this,S=new ArrayList,T=0;T<s.getNumGeometries();T++){var F=_.transformLineString(s.getGeometryN(T),s);F!==null&&(F.isEmpty()||S.add(F))}return this._factory.buildGeometry(S)};GeometryTransformer.prototype.transformCoordinates=function f(s,d){return this.copy(s)};GeometryTransformer.prototype.transformLineString=function f(s,d){return this._factory.createLineString(this.transformCoordinates(s.getCoordinateSequence(),s))};GeometryTransformer.prototype.transformMultiPoint=function f(s,d){for(var _=this,S=new ArrayList,T=0;T<s.getNumGeometries();T++){var F=_.transformPoint(s.getGeometryN(T),s);F!==null&&(F.isEmpty()||S.add(F))}return this._factory.buildGeometry(S)};GeometryTransformer.prototype.transformMultiPolygon=function f(s,d){for(var _=this,S=new ArrayList,T=0;T<s.getNumGeometries();T++){var F=_.transformPolygon(s.getGeometryN(T),s);F!==null&&(F.isEmpty()||S.add(F))}return this._factory.buildGeometry(S)};GeometryTransformer.prototype.copy=function f(s){return s.copy()};GeometryTransformer.prototype.transformGeometryCollection=function f(s,d){for(var _=this,S=new ArrayList,T=0;T<s.getNumGeometries();T++){var F=_.transform(s.getGeometryN(T));F!==null&&(_._pruneEmptyGeometry&&F.isEmpty()||S.add(F))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(GeometryFactory.toGeometryArray(S)):this._factory.buildGeometry(S)};GeometryTransformer.prototype.transform=function f(s){if(this._inputGeom=s,this._factory=s.getFactory(),s instanceof Point)return this.transformPoint(s,null);if(s instanceof MultiPoint)return this.transformMultiPoint(s,null);if(s instanceof LinearRing)return this.transformLinearRing(s,null);if(s instanceof LineString)return this.transformLineString(s,null);if(s instanceof MultiLineString)return this.transformMultiLineString(s,null);if(s instanceof Polygon)return this.transformPolygon(s,null);if(s instanceof MultiPolygon)return this.transformMultiPolygon(s,null);if(s instanceof GeometryCollection)return this.transformGeometryCollection(s,null);throw new IllegalArgumentException("Unknown Geometry subtype: "+s.getClass().getName())};GeometryTransformer.prototype.transformLinearRing=function f(s,d){var _=this.transformCoordinates(s.getCoordinateSequence(),s);if(_===null)return this._factory.createLinearRing(null);var S=_.size();return S>0&&S<4&&!this._preserveType?this._factory.createLineString(_):this._factory.createLinearRing(_)};GeometryTransformer.prototype.interfaces_=function f(){return[]};GeometryTransformer.prototype.getClass=function f(){return GeometryTransformer};var LineStringSnapper=function f(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new LineSegment,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof LineString&&typeof arguments[1]=="number"){var s=arguments[0],d=arguments[1];f.call(this,s.getCoordinates(),d)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var _=arguments[0],S=arguments[1];this._srcPts=_,this._isClosed=f.isClosed(_),this._snapTolerance=S}};LineStringSnapper.prototype.snapVertices=function f(s,d){for(var _=this,S=this._isClosed?s.size()-1:s.size(),T=0;T<S;T++){var F=s.get(T),M=_.findSnapForVertex(F,d);M!==null&&(s.set(T,new Coordinate(M)),T===0&&_._isClosed&&s.set(s.size()-1,new Coordinate(M)))}};LineStringSnapper.prototype.findSnapForVertex=function f(s,d){for(var _=this,S=0;S<d.length;S++){if(s.equals2D(d[S]))return null;if(s.distance(d[S])<_._snapTolerance)return d[S]}return null};LineStringSnapper.prototype.snapTo=function f(s){var d=new CoordinateList(this._srcPts);this.snapVertices(d,s),this.snapSegments(d,s);var _=d.toCoordinateArray();return _};LineStringSnapper.prototype.snapSegments=function f(s,d){var _=this;if(d.length===0)return null;var S=d.length;d[0].equals2D(d[d.length-1])&&(S=d.length-1);for(var T=0;T<S;T++){var F=d[T],M=_.findSegmentIndexToSnap(F,s);M>=0&&s.add(M+1,new Coordinate(F),!1)}};LineStringSnapper.prototype.findSegmentIndexToSnap=function f(s,d){for(var _=this,S=Double.MAX_VALUE,T=-1,F=0;F<d.size()-1;F++){if(_._seg.p0=d.get(F),_._seg.p1=d.get(F+1),_._seg.p0.equals2D(s)||_._seg.p1.equals2D(s)){if(_._allowSnappingToSourceVertices)continue;return-1}var M=_._seg.distance(s);M<_._snapTolerance&&M<S&&(S=M,T=F)}return T};LineStringSnapper.prototype.setAllowSnappingToSourceVertices=function f(s){this._allowSnappingToSourceVertices=s};LineStringSnapper.prototype.interfaces_=function f(){return[]};LineStringSnapper.prototype.getClass=function f(){return LineStringSnapper};LineStringSnapper.isClosed=function f(s){return s.length<=1?!1:s[0].equals2D(s[s.length-1])};var GeometrySnapper=function f(s){this._srcGeom=s||null},staticAccessors$41={SNAP_PRECISION_FACTOR:{configurable:!0}};GeometrySnapper.prototype.snapTo=function f(s,d){var _=this.extractTargetCoordinates(s),S=new SnapTransformer(d,_);return S.transform(this._srcGeom)};GeometrySnapper.prototype.snapToSelf=function f(s,d){var _=this.extractTargetCoordinates(this._srcGeom),S=new SnapTransformer(s,_,!0),T=S.transform(this._srcGeom),F=T;return d&&hasInterface(F,Polygonal)&&(F=T.buffer(0)),F};GeometrySnapper.prototype.computeSnapTolerance=function f(s){var d=this.computeMinimumSegmentLength(s),_=d/10;return _};GeometrySnapper.prototype.extractTargetCoordinates=function f(s){for(var d=new TreeSet,_=s.getCoordinates(),S=0;S<_.length;S++)d.add(_[S]);return d.toArray(new Array(0).fill(null))};GeometrySnapper.prototype.computeMinimumSegmentLength=function f(s){for(var d=Double.MAX_VALUE,_=0;_<s.length-1;_++){var S=s[_].distance(s[_+1]);S<d&&(d=S)}return d};GeometrySnapper.prototype.interfaces_=function f(){return[]};GeometrySnapper.prototype.getClass=function f(){return GeometrySnapper};GeometrySnapper.snap=function f(s,d,_){var S=new Array(2).fill(null),T=new GeometrySnapper(s);S[0]=T.snapTo(d,_);var F=new GeometrySnapper(d);return S[1]=F.snapTo(S[0],_),S};GeometrySnapper.computeOverlaySnapTolerance=function f(){if(arguments.length===1){var s=arguments[0],d=GeometrySnapper.computeSizeBasedSnapTolerance(s),_=s.getPrecisionModel();if(_.getType()===PrecisionModel.FIXED){var S=1/_.getScale()*2/1.415;S>d&&(d=S)}return d}else if(arguments.length===2){var T=arguments[0],F=arguments[1];return Math.min(GeometrySnapper.computeOverlaySnapTolerance(T),GeometrySnapper.computeOverlaySnapTolerance(F))}};GeometrySnapper.computeSizeBasedSnapTolerance=function f(s){var d=s.getEnvelopeInternal(),_=Math.min(d.getHeight(),d.getWidth()),S=_*GeometrySnapper.SNAP_PRECISION_FACTOR;return S};GeometrySnapper.snapToSelf=function f(s,d,_){var S=new GeometrySnapper(s);return S.snapToSelf(d,_)};staticAccessors$41.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(GeometrySnapper,staticAccessors$41);var SnapTransformer=function(f){function s(d,_,S){f.call(this),this._snapTolerance=d||null,this._snapPts=_||null,this._isSelfSnap=S!==void 0?S:!1}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.snapLine=function(_,S){var T=new LineStringSnapper(_,this._snapTolerance);return T.setAllowSnappingToSourceVertices(this._isSelfSnap),T.snapTo(S)},s.prototype.transformCoordinates=function(_,S){var T=_.toCoordinateArray(),F=this.snapLine(T,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(F)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(GeometryTransformer),CommonBits=function f(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};CommonBits.prototype.getCommon=function f(){return Double.longBitsToDouble(this._commonBits)};CommonBits.prototype.add=function f(s){var d=Double.doubleToLongBits(s);if(this._isFirst)return this._commonBits=d,this._commonSignExp=CommonBits.signExpBits(this._commonBits),this._isFirst=!1,null;var _=CommonBits.signExpBits(d);if(_!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=CommonBits.numCommonMostSigMantissaBits(this._commonBits,d),this._commonBits=CommonBits.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};CommonBits.prototype.toString=function f(){if(arguments.length===1){var s=arguments[0],d=Double.longBitsToDouble(s),_=Double.toBinaryString(s),S="0000000000000000000000000000000000000000000000000000000000000000"+_,T=S.substring(S.length-64),F=T.substring(0,1)+"  "+T.substring(1,12)+"(exp) "+T.substring(12)+" [ "+d+" ]";return F}};CommonBits.prototype.interfaces_=function f(){return[]};CommonBits.prototype.getClass=function f(){return CommonBits};CommonBits.getBit=function f(s,d){var _=1<<d;return s&_?1:0};CommonBits.signExpBits=function f(s){return s>>52};CommonBits.zeroLowerBits=function f(s,d){var _=(1<<d)-1,S=~_,T=s&S;return T};CommonBits.numCommonMostSigMantissaBits=function f(s,d){for(var _=0,S=52;S>=0;S--){if(CommonBits.getBit(s,S)!==CommonBits.getBit(d,S))return _;_++}return 52};var CommonBitsRemover=function f(){this._commonCoord=null,this._ccFilter=new CommonCoordinateFilter},staticAccessors$42={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};CommonBitsRemover.prototype.addCommonBits=function f(s){var d=new Translater(this._commonCoord);s.apply(d),s.geometryChanged()};CommonBitsRemover.prototype.removeCommonBits=function f(s){if(this._commonCoord.x===0&&this._commonCoord.y===0)return s;var d=new Coordinate(this._commonCoord);d.x=-d.x,d.y=-d.y;var _=new Translater(d);return s.apply(_),s.geometryChanged(),s};CommonBitsRemover.prototype.getCommonCoordinate=function f(){return this._commonCoord};CommonBitsRemover.prototype.add=function f(s){s.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};CommonBitsRemover.prototype.interfaces_=function f(){return[]};CommonBitsRemover.prototype.getClass=function f(){return CommonBitsRemover};staticAccessors$42.CommonCoordinateFilter.get=function(){return CommonCoordinateFilter};staticAccessors$42.Translater.get=function(){return Translater};Object.defineProperties(CommonBitsRemover,staticAccessors$42);var CommonCoordinateFilter=function f(){this._commonBitsX=new CommonBits,this._commonBitsY=new CommonBits};CommonCoordinateFilter.prototype.filter=function f(s){this._commonBitsX.add(s.x),this._commonBitsY.add(s.y)};CommonCoordinateFilter.prototype.getCommonCoordinate=function f(){return new Coordinate(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};CommonCoordinateFilter.prototype.interfaces_=function f(){return[CoordinateFilter]};CommonCoordinateFilter.prototype.getClass=function f(){return CommonCoordinateFilter};var Translater=function f(){this.trans=null;var s=arguments[0];this.trans=s};Translater.prototype.filter=function f(s,d){var _=s.getOrdinate(d,0)+this.trans.x,S=s.getOrdinate(d,1)+this.trans.y;s.setOrdinate(d,0,_),s.setOrdinate(d,1,S)};Translater.prototype.isDone=function f(){return!1};Translater.prototype.isGeometryChanged=function f(){return!0};Translater.prototype.interfaces_=function f(){return[CoordinateSequenceFilter]};Translater.prototype.getClass=function f(){return Translater};var SnapOverlayOp=function f(s,d){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=s,this._geom[1]=d,this.computeSnapTolerance()};SnapOverlayOp.prototype.selfSnap=function f(s){var d=new GeometrySnapper(s),_=d.snapTo(s,this._snapTolerance);return _};SnapOverlayOp.prototype.removeCommonBits=function f(s){this._cbr=new CommonBitsRemover,this._cbr.add(s[0]),this._cbr.add(s[1]);var d=new Array(2).fill(null);return d[0]=this._cbr.removeCommonBits(s[0].copy()),d[1]=this._cbr.removeCommonBits(s[1].copy()),d};SnapOverlayOp.prototype.prepareResult=function f(s){return this._cbr.addCommonBits(s),s};SnapOverlayOp.prototype.getResultGeometry=function f(s){var d=this.snap(this._geom),_=OverlayOp.overlayOp(d[0],d[1],s);return this.prepareResult(_)};SnapOverlayOp.prototype.checkValid=function f(s){s.isValid()||System.out.println("Snapped geometry is invalid")};SnapOverlayOp.prototype.computeSnapTolerance=function f(){this._snapTolerance=GeometrySnapper.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};SnapOverlayOp.prototype.snap=function f(s){var d=this.removeCommonBits(s),_=GeometrySnapper.snap(d[0],d[1],this._snapTolerance);return _};SnapOverlayOp.prototype.interfaces_=function f(){return[]};SnapOverlayOp.prototype.getClass=function f(){return SnapOverlayOp};SnapOverlayOp.overlayOp=function f(s,d,_){var S=new SnapOverlayOp(s,d);return S.getResultGeometry(_)};SnapOverlayOp.union=function f(s,d){return SnapOverlayOp.overlayOp(s,d,OverlayOp.UNION)};SnapOverlayOp.intersection=function f(s,d){return SnapOverlayOp.overlayOp(s,d,OverlayOp.INTERSECTION)};SnapOverlayOp.symDifference=function f(s,d){return SnapOverlayOp.overlayOp(s,d,OverlayOp.SYMDIFFERENCE)};SnapOverlayOp.difference=function f(s,d){return SnapOverlayOp.overlayOp(s,d,OverlayOp.DIFFERENCE)};var SnapIfNeededOverlayOp=function f(s,d){this._geom=new Array(2).fill(null),this._geom[0]=s,this._geom[1]=d};SnapIfNeededOverlayOp.prototype.getResultGeometry=function f(s){var d=null,_=!1,S=null;try{d=OverlayOp.overlayOp(this._geom[0],this._geom[1],s);var T=!0;T&&(_=!0)}catch(F){if(F instanceof RuntimeException)S=F;else throw F}finally{}if(!_)try{d=SnapOverlayOp.overlayOp(this._geom[0],this._geom[1],s)}catch(F){throw F instanceof RuntimeException?S:F}finally{}return d};SnapIfNeededOverlayOp.prototype.interfaces_=function f(){return[]};SnapIfNeededOverlayOp.prototype.getClass=function f(){return SnapIfNeededOverlayOp};SnapIfNeededOverlayOp.overlayOp=function f(s,d,_){var S=new SnapIfNeededOverlayOp(s,d);return S.getResultGeometry(_)};SnapIfNeededOverlayOp.union=function f(s,d){return SnapIfNeededOverlayOp.overlayOp(s,d,OverlayOp.UNION)};SnapIfNeededOverlayOp.intersection=function f(s,d){return SnapIfNeededOverlayOp.overlayOp(s,d,OverlayOp.INTERSECTION)};SnapIfNeededOverlayOp.symDifference=function f(s,d){return SnapIfNeededOverlayOp.overlayOp(s,d,OverlayOp.SYMDIFFERENCE)};SnapIfNeededOverlayOp.difference=function f(s,d){return SnapIfNeededOverlayOp.overlayOp(s,d,OverlayOp.DIFFERENCE)};var MonotoneChain$2=function f(){this.mce=null,this.chainIndex=null;var s=arguments[0],d=arguments[1];this.mce=s,this.chainIndex=d};MonotoneChain$2.prototype.computeIntersections=function f(s,d){this.mce.computeIntersectsForChain(this.chainIndex,s.mce,s.chainIndex,d)};MonotoneChain$2.prototype.interfaces_=function f(){return[]};MonotoneChain$2.prototype.getClass=function f(){return MonotoneChain$2};var SweepLineEvent=function f(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var s=arguments[0],d=arguments[1];this._eventType=f.DELETE,this._xValue=s,this._insertEvent=d}else if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];this._eventType=f.INSERT,this._label=_,this._xValue=S,this._obj=T}},staticAccessors$43={INSERT:{configurable:!0},DELETE:{configurable:!0}};SweepLineEvent.prototype.isDelete=function f(){return this._eventType===SweepLineEvent.DELETE};SweepLineEvent.prototype.setDeleteEventIndex=function f(s){this._deleteEventIndex=s};SweepLineEvent.prototype.getObject=function f(){return this._obj};SweepLineEvent.prototype.compareTo=function f(s){var d=s;return this._xValue<d._xValue?-1:this._xValue>d._xValue?1:this._eventType<d._eventType?-1:this._eventType>d._eventType?1:0};SweepLineEvent.prototype.getInsertEvent=function f(){return this._insertEvent};SweepLineEvent.prototype.isInsert=function f(){return this._eventType===SweepLineEvent.INSERT};SweepLineEvent.prototype.isSameLabel=function f(s){return this._label===null?!1:this._label===s._label};SweepLineEvent.prototype.getDeleteEventIndex=function f(){return this._deleteEventIndex};SweepLineEvent.prototype.interfaces_=function f(){return[Comparable]};SweepLineEvent.prototype.getClass=function f(){return SweepLineEvent};staticAccessors$43.INSERT.get=function(){return 1};staticAccessors$43.DELETE.get=function(){return 2};Object.defineProperties(SweepLineEvent,staticAccessors$43);var EdgeSetIntersector=function f(){};EdgeSetIntersector.prototype.interfaces_=function f(){return[]};EdgeSetIntersector.prototype.getClass=function f(){return EdgeSetIntersector};var SegmentIntersector$2=function f(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var s=arguments[0],d=arguments[1],_=arguments[2];this._li=s,this._includeProper=d,this._recordIsolated=_};SegmentIntersector$2.prototype.isTrivialIntersection=function f(s,d,_,S){if(s===_&&this._li.getIntersectionNum()===1){if(SegmentIntersector$2.isAdjacentSegments(d,S))return!0;if(s.isClosed()){var T=s.getNumPoints()-1;if(d===0&&S===T||S===0&&d===T)return!0}}return!1};SegmentIntersector$2.prototype.getProperIntersectionPoint=function f(){return this._properIntersectionPoint};SegmentIntersector$2.prototype.setIsDoneIfProperInt=function f(s){this._isDoneWhenProperInt=s};SegmentIntersector$2.prototype.hasProperInteriorIntersection=function f(){return this._hasProperInterior};SegmentIntersector$2.prototype.isBoundaryPointInternal=function f(s,d){for(var _=d.iterator();_.hasNext();){var S=_.next(),T=S.getCoordinate();if(s.isIntersection(T))return!0}return!1};SegmentIntersector$2.prototype.hasProperIntersection=function f(){return this._hasProper};SegmentIntersector$2.prototype.hasIntersection=function f(){return this._hasIntersection};SegmentIntersector$2.prototype.isDone=function f(){return this._isDone};SegmentIntersector$2.prototype.isBoundaryPoint=function f(s,d){return d===null?!1:!!(this.isBoundaryPointInternal(s,d[0])||this.isBoundaryPointInternal(s,d[1]))};SegmentIntersector$2.prototype.setBoundaryNodes=function f(s,d){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=s,this._bdyNodes[1]=d};SegmentIntersector$2.prototype.addIntersections=function f(s,d,_,S){if(s===_&&d===S)return null;this.numTests++;var T=s.getCoordinates()[d],F=s.getCoordinates()[d+1],M=_.getCoordinates()[S],P=_.getCoordinates()[S+1];this._li.computeIntersection(T,F,M,P),this._li.hasIntersection()&&(this._recordIsolated&&(s.setIsolated(!1),_.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(s,d,_,S)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(s.addIntersections(this._li,d,0),_.addIntersections(this._li,S,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};SegmentIntersector$2.prototype.interfaces_=function f(){return[]};SegmentIntersector$2.prototype.getClass=function f(){return SegmentIntersector$2};SegmentIntersector$2.isAdjacentSegments=function f(s,d){return Math.abs(s-d)===1};var SimpleMCSweepLineIntersector=function(f){function s(){f.call(this),this.events=new ArrayList,this.nOverlaps=null}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.prepareEvents=function(){var _=this;Collections.sort(this.events);for(var S=0;S<this.events.size();S++){var T=_.events.get(S);T.isDelete()&&T.getInsertEvent().setDeleteEventIndex(S)}},s.prototype.computeIntersections=function(){var _=this;if(arguments.length===1){var S=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var T=0;T<this.events.size();T++){var F=_.events.get(T);if(F.isInsert()&&_.processOverlaps(T,F.getDeleteEventIndex(),F,S),S.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof SegmentIntersector$2&&hasInterface(arguments[0],List)&&hasInterface(arguments[1],List)){var M=arguments[0],P=arguments[1],H=arguments[2];this.addEdges(M,M),this.addEdges(P,P),this.computeIntersections(H)}else if(typeof arguments[2]=="boolean"&&hasInterface(arguments[0],List)&&arguments[1]instanceof SegmentIntersector$2){var J=arguments[0],K=arguments[1],z=arguments[2];z?this.addEdges(J,null):this.addEdges(J),this.computeIntersections(K)}}},s.prototype.addEdge=function(_,S){for(var T=this,F=_.getMonotoneChainEdge(),M=F.getStartIndexes(),P=0;P<M.length-1;P++){var H=new MonotoneChain$2(F,P),J=new SweepLineEvent(S,F.getMinX(P),H);T.events.add(J),T.events.add(new SweepLineEvent(F.getMaxX(P),J))}},s.prototype.processOverlaps=function(_,S,T,F){for(var M=this,P=T.getObject(),H=_;H<S;H++){var J=M.events.get(H);if(J.isInsert()){var K=J.getObject();T.isSameLabel(J)||(P.computeIntersections(K,F),M.nOverlaps++)}}},s.prototype.addEdges=function(){var _=this;if(arguments.length===1)for(var S=arguments[0],T=S.iterator();T.hasNext();){var F=T.next();_.addEdge(F,F)}else if(arguments.length===2)for(var M=arguments[0],P=arguments[1],H=M.iterator();H.hasNext();){var J=H.next();_.addEdge(J,P)}},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(EdgeSetIntersector),IntervalRTreeNode=function f(){this._min=Double.POSITIVE_INFINITY,this._max=Double.NEGATIVE_INFINITY},staticAccessors$45={NodeComparator:{configurable:!0}};IntervalRTreeNode.prototype.getMin=function f(){return this._min};IntervalRTreeNode.prototype.intersects=function f(s,d){return!(this._min>d||this._max<s)};IntervalRTreeNode.prototype.getMax=function f(){return this._max};IntervalRTreeNode.prototype.toString=function f(){return WKTWriter.toLineString(new Coordinate(this._min,0),new Coordinate(this._max,0))};IntervalRTreeNode.prototype.interfaces_=function f(){return[]};IntervalRTreeNode.prototype.getClass=function f(){return IntervalRTreeNode};staticAccessors$45.NodeComparator.get=function(){return NodeComparator};Object.defineProperties(IntervalRTreeNode,staticAccessors$45);var NodeComparator=function f(){};NodeComparator.prototype.compare=function f(s,d){var _=s,S=d,T=(_._min+_._max)/2,F=(S._min+S._max)/2;return T<F?-1:T>F?1:0};NodeComparator.prototype.interfaces_=function f(){return[Comparator]};NodeComparator.prototype.getClass=function f(){return NodeComparator};var IntervalRTreeLeafNode=function(f){function s(){f.call(this),this._item=null;var d=arguments[0],_=arguments[1],S=arguments[2];this._min=d,this._max=_,this._item=S}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.query=function(_,S,T){if(!this.intersects(_,S))return null;T.visitItem(this._item)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(IntervalRTreeNode),IntervalRTreeBranchNode=function(f){function s(){f.call(this),this._node1=null,this._node2=null;var d=arguments[0],_=arguments[1];this._node1=d,this._node2=_,this.buildExtent(this._node1,this._node2)}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.buildExtent=function(_,S){this._min=Math.min(_._min,S._min),this._max=Math.max(_._max,S._max)},s.prototype.query=function(_,S,T){if(!this.intersects(_,S))return null;this._node1!==null&&this._node1.query(_,S,T),this._node2!==null&&this._node2.query(_,S,T)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(IntervalRTreeNode),SortedPackedIntervalRTree=function f(){this._leaves=new ArrayList,this._root=null,this._level=0};SortedPackedIntervalRTree.prototype.buildTree=function f(){var s=this;Collections.sort(this._leaves,new IntervalRTreeNode.NodeComparator);for(var d=this._leaves,_=null,S=new ArrayList;;){if(s.buildLevel(d,S),S.size()===1)return S.get(0);_=d,d=S,S=_}};SortedPackedIntervalRTree.prototype.insert=function f(s,d,_){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new IntervalRTreeLeafNode(s,d,_))};SortedPackedIntervalRTree.prototype.query=function f(s,d,_){this.init(),this._root.query(s,d,_)};SortedPackedIntervalRTree.prototype.buildRoot=function f(){if(this._root!==null)return null;this._root=this.buildTree()};SortedPackedIntervalRTree.prototype.printNode=function f(s){System.out.println(WKTWriter.toLineString(new Coordinate(s._min,this._level),new Coordinate(s._max,this._level)))};SortedPackedIntervalRTree.prototype.init=function f(){if(this._root!==null)return null;this.buildRoot()};SortedPackedIntervalRTree.prototype.buildLevel=function f(s,d){this._level++,d.clear();for(var _=0;_<s.size();_+=2){var S=s.get(_),T=_+1<s.size()?s.get(_):null;if(T===null)d.add(S);else{var F=new IntervalRTreeBranchNode(s.get(_),s.get(_+1));d.add(F)}}};SortedPackedIntervalRTree.prototype.interfaces_=function f(){return[]};SortedPackedIntervalRTree.prototype.getClass=function f(){return SortedPackedIntervalRTree};var ArrayListVisitor=function f(){this._items=new ArrayList};ArrayListVisitor.prototype.visitItem=function f(s){this._items.add(s)};ArrayListVisitor.prototype.getItems=function f(){return this._items};ArrayListVisitor.prototype.interfaces_=function f(){return[ItemVisitor]};ArrayListVisitor.prototype.getClass=function f(){return ArrayListVisitor};var IndexedPointInAreaLocator=function f(){this._index=null;var s=arguments[0];if(!hasInterface(s,Polygonal))throw new IllegalArgumentException("Argument must be Polygonal");this._index=new IntervalIndexedGeometry(s)},staticAccessors$44={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};IndexedPointInAreaLocator.prototype.locate=function f(s){var d=new RayCrossingCounter(s),_=new SegmentVisitor(d);return this._index.query(s.y,s.y,_),d.getLocation()};IndexedPointInAreaLocator.prototype.interfaces_=function f(){return[PointOnGeometryLocator]};IndexedPointInAreaLocator.prototype.getClass=function f(){return IndexedPointInAreaLocator};staticAccessors$44.SegmentVisitor.get=function(){return SegmentVisitor};staticAccessors$44.IntervalIndexedGeometry.get=function(){return IntervalIndexedGeometry};Object.defineProperties(IndexedPointInAreaLocator,staticAccessors$44);var SegmentVisitor=function f(){this._counter=null;var s=arguments[0];this._counter=s};SegmentVisitor.prototype.visitItem=function f(s){var d=s;this._counter.countSegment(d.getCoordinate(0),d.getCoordinate(1))};SegmentVisitor.prototype.interfaces_=function f(){return[ItemVisitor]};SegmentVisitor.prototype.getClass=function f(){return SegmentVisitor};var IntervalIndexedGeometry=function f(){this._index=new SortedPackedIntervalRTree;var s=arguments[0];this.init(s)};IntervalIndexedGeometry.prototype.init=function f(s){for(var d=this,_=LinearComponentExtracter.getLines(s),S=_.iterator();S.hasNext();){var T=S.next(),F=T.getCoordinates();d.addLine(F)}};IntervalIndexedGeometry.prototype.addLine=function f(s){for(var d=this,_=1;_<s.length;_++){var S=new LineSegment(s[_-1],s[_]),T=Math.min(S.p0.y,S.p1.y),F=Math.max(S.p0.y,S.p1.y);d._index.insert(T,F,S)}};IntervalIndexedGeometry.prototype.query=function f(){if(arguments.length===2){var s=arguments[0],d=arguments[1],_=new ArrayListVisitor;return this._index.query(s,d,_),_.getItems()}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2];this._index.query(S,T,F)}};IntervalIndexedGeometry.prototype.interfaces_=function f(){return[]};IntervalIndexedGeometry.prototype.getClass=function f(){return IntervalIndexedGeometry};var GeometryGraph=function(f){function s(){if(f.call(this),this._parentGeom=null,this._lineEdgeMap=new HashMap,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new PointLocator,arguments.length===2){var d=arguments[0],_=arguments[1],S=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;this._argIndex=d,this._parentGeom=_,this._boundaryNodeRule=S,_!==null&&this.add(_)}else if(arguments.length===3){var T=arguments[0],F=arguments[1],M=arguments[2];this._argIndex=T,this._parentGeom=F,this._boundaryNodeRule=M,F!==null&&this.add(F)}}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.insertBoundaryPoint=function(_,S){var T=this._nodes.addNode(S),F=T.getLabel(),M=1,P=Location.NONE;P=F.getLocation(_,Position.ON),P===Location.BOUNDARY&&M++;var H=s.determineBoundary(this._boundaryNodeRule,M);F.setLocation(_,H)},s.prototype.computeSelfNodes=function(){if(arguments.length===2){var _=arguments[0],S=arguments[1];return this.computeSelfNodes(_,S,!1)}else if(arguments.length===3){var T=arguments[0],F=arguments[1],M=arguments[2],P=new SegmentIntersector$2(T,!0,!1);P.setIsDoneIfProperInt(M);var H=this.createEdgeSetIntersector(),J=this._parentGeom instanceof LinearRing||this._parentGeom instanceof Polygon||this._parentGeom instanceof MultiPolygon,K=F||!J;return H.computeIntersections(this._edges,P,K),this.addSelfIntersectionNodes(this._argIndex),P}},s.prototype.computeSplitEdges=function(_){for(var S=this._edges.iterator();S.hasNext();){var T=S.next();T.eiList.addSplitEdges(_)}},s.prototype.computeEdgeIntersections=function(_,S,T){var F=new SegmentIntersector$2(S,T,!0);F.setBoundaryNodes(this.getBoundaryNodes(),_.getBoundaryNodes());var M=this.createEdgeSetIntersector();return M.computeIntersections(this._edges,_._edges,F),F},s.prototype.getGeometry=function(){return this._parentGeom},s.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},s.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},s.prototype.addPoint=function(){if(arguments[0]instanceof Point){var _=arguments[0],S=_.getCoordinate();this.insertPoint(this._argIndex,S,Location.INTERIOR)}else if(arguments[0]instanceof Coordinate){var T=arguments[0];this.insertPoint(this._argIndex,T,Location.INTERIOR)}},s.prototype.addPolygon=function(_){var S=this;this.addPolygonRing(_.getExteriorRing(),Location.EXTERIOR,Location.INTERIOR);for(var T=0;T<_.getNumInteriorRing();T++){var F=_.getInteriorRingN(T);S.addPolygonRing(F,Location.INTERIOR,Location.EXTERIOR)}},s.prototype.addEdge=function(_){this.insertEdge(_);var S=_.getCoordinates();this.insertPoint(this._argIndex,S[0],Location.BOUNDARY),this.insertPoint(this._argIndex,S[S.length-1],Location.BOUNDARY)},s.prototype.addLineString=function(_){var S=CoordinateArrays.removeRepeatedPoints(_.getCoordinates());if(S.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=S[0],null;var T=new Edge(S,new Label(this._argIndex,Location.INTERIOR));this._lineEdgeMap.put(_,T),this.insertEdge(T),Assert.isTrue(S.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,S[0]),this.insertBoundaryPoint(this._argIndex,S[S.length-1])},s.prototype.getInvalidPoint=function(){return this._invalidPoint},s.prototype.getBoundaryPoints=function(){for(var _=this.getBoundaryNodes(),S=new Array(_.size()).fill(null),T=0,F=_.iterator();F.hasNext();){var M=F.next();S[T++]=M.getCoordinate().copy()}return S},s.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},s.prototype.addSelfIntersectionNode=function(_,S,T){if(this.isBoundaryNode(_,S))return null;T===Location.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(_,S):this.insertPoint(_,S,T)},s.prototype.addPolygonRing=function(_,S,T){if(_.isEmpty())return null;var F=CoordinateArrays.removeRepeatedPoints(_.getCoordinates());if(F.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=F[0],null;var M=S,P=T;CGAlgorithms.isCCW(F)&&(M=T,P=S);var H=new Edge(F,new Label(this._argIndex,Location.BOUNDARY,M,P));this._lineEdgeMap.put(_,H),this.insertEdge(H),this.insertPoint(this._argIndex,F[0],Location.BOUNDARY)},s.prototype.insertPoint=function(_,S,T){var F=this._nodes.addNode(S),M=F.getLabel();M===null?F._label=new Label(_,T):M.setLocation(_,T)},s.prototype.createEdgeSetIntersector=function(){return new SimpleMCSweepLineIntersector},s.prototype.addSelfIntersectionNodes=function(_){for(var S=this,T=this._edges.iterator();T.hasNext();)for(var F=T.next(),M=F.getLabel().getLocation(_),P=F.eiList.iterator();P.hasNext();){var H=P.next();S.addSelfIntersectionNode(_,H.coord,M)}},s.prototype.add=function(){if(arguments.length===1){var _=arguments[0];if(_.isEmpty())return null;if(_ instanceof MultiPolygon&&(this._useBoundaryDeterminationRule=!1),_ instanceof Polygon)this.addPolygon(_);else if(_ instanceof LineString)this.addLineString(_);else if(_ instanceof Point)this.addPoint(_);else if(_ instanceof MultiPoint)this.addCollection(_);else if(_ instanceof MultiLineString)this.addCollection(_);else if(_ instanceof MultiPolygon)this.addCollection(_);else if(_ instanceof GeometryCollection)this.addCollection(_);else throw new Error(_.getClass().getName())}else return f.prototype.add.apply(this,arguments)},s.prototype.addCollection=function(_){for(var S=this,T=0;T<_.getNumGeometries();T++){var F=_.getGeometryN(T);S.add(F)}},s.prototype.locate=function(_){return hasInterface(this._parentGeom,Polygonal)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new IndexedPointInAreaLocator(this._parentGeom)),this._areaPtLocator.locate(_)):this._ptLocator.locate(_,this._parentGeom)},s.prototype.findEdge=function(){if(arguments.length===1){var _=arguments[0];return this._lineEdgeMap.get(_)}else return f.prototype.findEdge.apply(this,arguments)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.determineBoundary=function(_,S){return _.isInBoundary(S)?Location.BOUNDARY:Location.INTERIOR},s}(PlanarGraph),GeometryGraphOp=function f(){if(this._li=new RobustLineIntersector,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var s=arguments[0];this.setComputationPrecision(s.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new GeometryGraph(0,s)}else if(arguments.length===2){var d=arguments[0],_=arguments[1],S=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;d.getPrecisionModel().compareTo(_.getPrecisionModel())>=0?this.setComputationPrecision(d.getPrecisionModel()):this.setComputationPrecision(_.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new GeometryGraph(0,d,S),this._arg[1]=new GeometryGraph(1,_,S)}else if(arguments.length===3){var T=arguments[0],F=arguments[1],M=arguments[2];T.getPrecisionModel().compareTo(F.getPrecisionModel())>=0?this.setComputationPrecision(T.getPrecisionModel()):this.setComputationPrecision(F.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new GeometryGraph(0,T,M),this._arg[1]=new GeometryGraph(1,F,M)}};GeometryGraphOp.prototype.getArgGeometry=function f(s){return this._arg[s].getGeometry()};GeometryGraphOp.prototype.setComputationPrecision=function f(s){this._resultPrecisionModel=s,this._li.setPrecisionModel(this._resultPrecisionModel)};GeometryGraphOp.prototype.interfaces_=function f(){return[]};GeometryGraphOp.prototype.getClass=function f(){return GeometryGraphOp};var GeometryMapper=function f(){};GeometryMapper.prototype.interfaces_=function f(){return[]};GeometryMapper.prototype.getClass=function f(){return GeometryMapper};GeometryMapper.map=function f(){if(arguments[0]instanceof Geometry&&hasInterface(arguments[1],GeometryMapper.MapOp)){for(var s=arguments[0],d=arguments[1],_=new ArrayList,S=0;S<s.getNumGeometries();S++){var T=d.map(s.getGeometryN(S));T!==null&&_.add(T)}return s.getFactory().buildGeometry(_)}else if(hasInterface(arguments[0],Collection)&&hasInterface(arguments[1],GeometryMapper.MapOp)){for(var F=arguments[0],M=arguments[1],P=new ArrayList,H=F.iterator();H.hasNext();){var J=H.next(),K=M.map(J);K!==null&&P.add(K)}return P}};GeometryMapper.MapOp=function f(){};var OverlayOp=function(f){function s(){var d=arguments[0],_=arguments[1];f.call(this,d,_),this._ptLocator=new PointLocator,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new EdgeList,this._resultPolyList=new ArrayList,this._resultLineList=new ArrayList,this._resultPointList=new ArrayList,this._graph=new PlanarGraph(new OverlayNodeFactory),this._geomFact=d.getFactory()}return f&&(s.__proto__=f),s.prototype=Object.create(f&&f.prototype),s.prototype.constructor=s,s.prototype.insertUniqueEdge=function(_){var S=this._edgeList.findEqualEdge(_);if(S!==null){var T=S.getLabel(),F=_.getLabel();S.isPointwiseEqual(_)||(F=new Label(_.getLabel()),F.flip());var M=S.getDepth();M.isNull()&&M.add(T),M.add(F),T.merge(F)}else this._edgeList.add(_)},s.prototype.getGraph=function(){return this._graph},s.prototype.cancelDuplicateResultEdges=function(){for(var _=this._graph.getEdgeEnds().iterator();_.hasNext();){var S=_.next(),T=S.getSym();S.isInResult()&&T.isInResult()&&(S.setInResult(!1),T.setInResult(!1))}},s.prototype.isCoveredByLA=function(_){return!!(this.isCovered(_,this._resultLineList)||this.isCovered(_,this._resultPolyList))},s.prototype.computeGeometry=function(_,S,T,F){var M=new ArrayList;return M.addAll(_),M.addAll(S),M.addAll(T),M.isEmpty()?s.createEmptyResult(F,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(M)},s.prototype.mergeSymLabels=function(){for(var _=this._graph.getNodes().iterator();_.hasNext();){var S=_.next();S.getEdges().mergeSymLabels()}},s.prototype.isCovered=function(_,S){for(var T=this,F=S.iterator();F.hasNext();){var M=F.next(),P=T._ptLocator.locate(_,M);if(P!==Location.EXTERIOR)return!0}return!1},s.prototype.replaceCollapsedEdges=function(){for(var _=new ArrayList,S=this._edgeList.iterator();S.hasNext();){var T=S.next();T.isCollapsed()&&(S.remove(),_.add(T.getCollapsedEdge()))}this._edgeList.addAll(_)},s.prototype.updateNodeLabelling=function(){for(var _=this._graph.getNodes().iterator();_.hasNext();){var S=_.next(),T=S.getEdges().getLabel();S.getLabel().merge(T)}},s.prototype.getResultGeometry=function(_){return this.computeOverlay(_),this._resultGeom},s.prototype.insertUniqueEdges=function(_){for(var S=this,T=_.iterator();T.hasNext();){var F=T.next();S.insertUniqueEdge(F)}},s.prototype.computeOverlay=function(_){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var S=new ArrayList;this._arg[0].computeSplitEdges(S),this._arg[1].computeSplitEdges(S),this.insertUniqueEdges(S),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),EdgeNodingValidator.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(_),this.cancelDuplicateResultEdges();var T=new PolygonBuilder(this._geomFact);T.add(this._graph),this._resultPolyList=T.getPolygons();var F=new LineBuilder(this,this._geomFact,this._ptLocator);this._resultLineList=F.build(_);var M=new PointBuilder(this,this._geomFact,this._ptLocator);this._resultPointList=M.build(_),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,_)},s.prototype.labelIncompleteNode=function(_,S){var T=this._ptLocator.locate(_.getCoordinate(),this._arg[S].getGeometry());_.getLabel().setLocation(S,T)},s.prototype.copyPoints=function(_){for(var S=this,T=this._arg[_].getNodeIterator();T.hasNext();){var F=T.next(),M=S._graph.addNode(F.getCoordinate());M.setLabel(_,F.getLabel().getLocation(_))}},s.prototype.findResultAreaEdges=function(_){for(var S=this._graph.getEdgeEnds().iterator();S.hasNext();){var T=S.next(),F=T.getLabel();F.isArea()&&!T.isInteriorAreaEdge()&&s.isResultOfOp(F.getLocation(0,Position.RIGHT),F.getLocation(1,Position.RIGHT),_)&&T.setInResult(!0)}},s.prototype.computeLabelsFromDepths=function(){for(var _=this._edgeList.iterator();_.hasNext();){var S=_.next(),T=S.getLabel(),F=S.getDepth();if(!F.isNull()){F.normalize();for(var M=0;M<2;M++)!T.isNull(M)&&T.isArea()&&!F.isNull(M)&&(F.getDelta(M)===0?T.toLine(M):(Assert.isTrue(!F.isNull(M,Position.LEFT),"depth of LEFT side has not been initialized"),T.setLocation(M,Position.LEFT,F.getLocation(M,Position.LEFT)),Assert.isTrue(!F.isNull(M,Position.RIGHT),"depth of RIGHT side has not been initialized"),T.setLocation(M,Position.RIGHT,F.getLocation(M,Position.RIGHT))))}}},s.prototype.computeLabelling=function(){for(var _=this,S=this._graph.getNodes().iterator();S.hasNext();){var T=S.next();T.getEdges().computeLabelling(_._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},s.prototype.labelIncompleteNodes=function(){for(var _=this,S=this._graph.getNodes().iterator();S.hasNext();){var T=S.next(),F=T.getLabel();T.isIsolated()&&(F.isNull(0)?_.labelIncompleteNode(T,0):_.labelIncompleteNode(T,1)),T.getEdges().updateLabelling(F)}},s.prototype.isCoveredByA=function(_){return!!this.isCovered(_,this._resultPolyList)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(GeometryGraphOp);OverlayOp.overlayOp=function(f,s,d){var _=new OverlayOp(f,s),S=_.getResultGeometry(d);return S};OverlayOp.intersection=function(f,s){if(f.isEmpty()||s.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.INTERSECTION,f,s,f.getFactory());if(f.isGeometryCollection()){var d=s;return GeometryCollectionMapper.map(f,{interfaces_:function(){return[GeometryMapper.MapOp]},map:function(_){return _.intersection(d)}})}return f.checkNotGeometryCollection(f),f.checkNotGeometryCollection(s),SnapIfNeededOverlayOp.overlayOp(f,s,OverlayOp.INTERSECTION)};OverlayOp.symDifference=function(f,s){if(f.isEmpty()||s.isEmpty()){if(f.isEmpty()&&s.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.SYMDIFFERENCE,f,s,f.getFactory());if(f.isEmpty())return s.copy();if(s.isEmpty())return f.copy()}return f.checkNotGeometryCollection(f),f.checkNotGeometryCollection(s),SnapIfNeededOverlayOp.overlayOp(f,s,OverlayOp.SYMDIFFERENCE)};OverlayOp.resultDimension=function(f,s,d){var _=s.getDimension(),S=d.getDimension(),T=-1;switch(f){case OverlayOp.INTERSECTION:T=Math.min(_,S);break;case OverlayOp.UNION:T=Math.max(_,S);break;case OverlayOp.DIFFERENCE:T=_;break;case OverlayOp.SYMDIFFERENCE:T=Math.max(_,S);break}return T};OverlayOp.createEmptyResult=function(f,s,d,_){var S=null;switch(OverlayOp.resultDimension(f,s,d)){case-1:S=_.createGeometryCollection(new Array(0).fill(null));break;case 0:S=_.createPoint();break;case 1:S=_.createLineString();break;case 2:S=_.createPolygon();break}return S};OverlayOp.difference=function(f,s){return f.isEmpty()?OverlayOp.createEmptyResult(OverlayOp.DIFFERENCE,f,s,f.getFactory()):s.isEmpty()?f.copy():(f.checkNotGeometryCollection(f),f.checkNotGeometryCollection(s),SnapIfNeededOverlayOp.overlayOp(f,s,OverlayOp.DIFFERENCE))};OverlayOp.isResultOfOp=function(){if(arguments.length===2){var f=arguments[0],s=arguments[1],d=f.getLocation(0),_=f.getLocation(1);return OverlayOp.isResultOfOp(d,_,s)}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2];switch(S===Location.BOUNDARY&&(S=Location.INTERIOR),T===Location.BOUNDARY&&(T=Location.INTERIOR),F){case OverlayOp.INTERSECTION:return S===Location.INTERIOR&&T===Location.INTERIOR;case OverlayOp.UNION:return S===Location.INTERIOR||T===Location.INTERIOR;case OverlayOp.DIFFERENCE:return S===Location.INTERIOR&&T!==Location.INTERIOR;case OverlayOp.SYMDIFFERENCE:return S===Location.INTERIOR&&T!==Location.INTERIOR||S!==Location.INTERIOR&&T===Location.INTERIOR}return!1}};OverlayOp.INTERSECTION=1;OverlayOp.UNION=2;OverlayOp.DIFFERENCE=3;OverlayOp.SYMDIFFERENCE=4;var FuzzyPointLocator=function f(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new PointLocator,this._seg=new LineSegment;var s=arguments[0],d=arguments[1];this._g=s,this._boundaryDistanceTolerance=d,this._linework=this.extractLinework(s)};FuzzyPointLocator.prototype.isWithinToleranceOfBoundary=function f(s){for(var d=this,_=0;_<this._linework.getNumGeometries();_++)for(var S=d._linework.getGeometryN(_),T=S.getCoordinateSequence(),F=0;F<T.size()-1;F++){T.getCoordinate(F,d._seg.p0),T.getCoordinate(F+1,d._seg.p1);var M=d._seg.distance(s);if(M<=d._boundaryDistanceTolerance)return!0}return!1};FuzzyPointLocator.prototype.getLocation=function f(s){return this.isWithinToleranceOfBoundary(s)?Location.BOUNDARY:this._ptLocator.locate(s,this._g)};FuzzyPointLocator.prototype.extractLinework=function f(s){var d=new PolygonalLineworkExtracter;s.apply(d);var _=d.getLinework(),S=GeometryFactory.toLineStringArray(_);return s.getFactory().createMultiLineString(S)};FuzzyPointLocator.prototype.interfaces_=function f(){return[]};FuzzyPointLocator.prototype.getClass=function f(){return FuzzyPointLocator};var PolygonalLineworkExtracter=function f(){this._linework=null,this._linework=new ArrayList};PolygonalLineworkExtracter.prototype.getLinework=function f(){return this._linework};PolygonalLineworkExtracter.prototype.filter=function f(s){var d=this;if(s instanceof Polygon){var _=s;this._linework.add(_.getExteriorRing());for(var S=0;S<_.getNumInteriorRing();S++)d._linework.add(_.getInteriorRingN(S))}};PolygonalLineworkExtracter.prototype.interfaces_=function f(){return[GeometryFilter]};PolygonalLineworkExtracter.prototype.getClass=function f(){return PolygonalLineworkExtracter};var OffsetPointGenerator=function f(){this._g=null,this._doLeft=!0,this._doRight=!0;var s=arguments[0];this._g=s};OffsetPointGenerator.prototype.extractPoints=function f(s,d,_){for(var S=this,T=s.getCoordinates(),F=0;F<T.length-1;F++)S.computeOffsetPoints(T[F],T[F+1],d,_)};OffsetPointGenerator.prototype.setSidesToGenerate=function f(s,d){this._doLeft=s,this._doRight=d};OffsetPointGenerator.prototype.getPoints=function f(s){for(var d=this,_=new ArrayList,S=LinearComponentExtracter.getLines(this._g),T=S.iterator();T.hasNext();){var F=T.next();d.extractPoints(F,s,_)}return _};OffsetPointGenerator.prototype.computeOffsetPoints=function f(s,d,_,S){var T=d.x-s.x,F=d.y-s.y,M=Math.sqrt(T*T+F*F),P=_*T/M,H=_*F/M,J=(d.x+s.x)/2,K=(d.y+s.y)/2;if(this._doLeft){var z=new Coordinate(J-H,K+P);S.add(z)}if(this._doRight){var oe=new Coordinate(J+H,K-P);S.add(oe)}};OffsetPointGenerator.prototype.interfaces_=function f(){return[]};OffsetPointGenerator.prototype.getClass=function f(){return OffsetPointGenerator};var OverlayResultValidator=function f(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=f.TOLERANCE,this._testCoords=new ArrayList;var s=arguments[0],d=arguments[1],_=arguments[2];this._boundaryDistanceTolerance=f.computeBoundaryDistanceTolerance(s,d),this._geom=[s,d,_],this._locFinder=[new FuzzyPointLocator(this._geom[0],this._boundaryDistanceTolerance),new FuzzyPointLocator(this._geom[1],this._boundaryDistanceTolerance),new FuzzyPointLocator(this._geom[2],this._boundaryDistanceTolerance)]},staticAccessors$46={TOLERANCE:{configurable:!0}};OverlayResultValidator.prototype.reportResult=function f(s,d,_){System.out.println("Overlay result invalid - A:"+Location.toLocationSymbol(d[0])+" B:"+Location.toLocationSymbol(d[1])+" expected:"+(_?"i":"e")+" actual:"+Location.toLocationSymbol(d[2]))};OverlayResultValidator.prototype.isValid=function f(s){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var d=this.checkValid(s);return d};OverlayResultValidator.prototype.checkValid=function f(){var s=this;if(arguments.length===1){for(var d=arguments[0],_=0;_<this._testCoords.size();_++){var S=s._testCoords.get(_);if(!s.checkValid(d,S))return s._invalidLocation=S,!1}return!0}else if(arguments.length===2){var T=arguments[0],F=arguments[1];return this._location[0]=this._locFinder[0].getLocation(F),this._location[1]=this._locFinder[1].getLocation(F),this._location[2]=this._locFinder[2].getLocation(F),OverlayResultValidator.hasLocation(this._location,Location.BOUNDARY)?!0:this.isValidResult(T,this._location)}};OverlayResultValidator.prototype.addTestPts=function f(s){var d=new OffsetPointGenerator(s);this._testCoords.addAll(d.getPoints(5*this._boundaryDistanceTolerance))};OverlayResultValidator.prototype.isValidResult=function f(s,d){var _=OverlayOp.isResultOfOp(d[0],d[1],s),S=d[2]===Location.INTERIOR,T=!(_^S);return T||this.reportResult(s,d,_),T};OverlayResultValidator.prototype.getInvalidLocation=function f(){return this._invalidLocation};OverlayResultValidator.prototype.interfaces_=function f(){return[]};OverlayResultValidator.prototype.getClass=function f(){return OverlayResultValidator};OverlayResultValidator.hasLocation=function f(s,d){for(var _=0;_<3;_++)if(s[_]===d)return!0;return!1};OverlayResultValidator.computeBoundaryDistanceTolerance=function f(s,d){return Math.min(GeometrySnapper.computeSizeBasedSnapTolerance(s),GeometrySnapper.computeSizeBasedSnapTolerance(d))};OverlayResultValidator.isValid=function f(s,d,_,S){var T=new OverlayResultValidator(s,d,S);return T.isValid(_)};staticAccessors$46.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(OverlayResultValidator,staticAccessors$46);var GeometryCombiner=function f(s){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=f.extractFactory(s),this._inputGeoms=s};GeometryCombiner.prototype.extractElements=function f(s,d){var _=this;if(s===null)return null;for(var S=0;S<s.getNumGeometries();S++){var T=s.getGeometryN(S);_._skipEmpty&&T.isEmpty()||d.add(T)}};GeometryCombiner.prototype.combine=function f(){for(var s=this,d=new ArrayList,_=this._inputGeoms.iterator();_.hasNext();){var S=_.next();s.extractElements(S,d)}return d.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(d)};GeometryCombiner.prototype.interfaces_=function f(){return[]};GeometryCombiner.prototype.getClass=function f(){return GeometryCombiner};GeometryCombiner.combine=function f(){if(arguments.length===1){var s=arguments[0],d=new GeometryCombiner(s);return d.combine()}else if(arguments.length===2){var _=arguments[0],S=arguments[1],T=new GeometryCombiner(GeometryCombiner.createList(_,S));return T.combine()}else if(arguments.length===3){var F=arguments[0],M=arguments[1],P=arguments[2],H=new GeometryCombiner(GeometryCombiner.createList(F,M,P));return H.combine()}};GeometryCombiner.extractFactory=function f(s){return s.isEmpty()?null:s.iterator().next().getFactory()};GeometryCombiner.createList=function f(){if(arguments.length===2){var s=arguments[0],d=arguments[1],_=new ArrayList;return _.add(s),_.add(d),_}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2],M=new ArrayList;return M.add(S),M.add(T),M.add(F),M}};var CascadedPolygonUnion=function f(){this._inputPolys=null,this._geomFactory=null;var s=arguments[0];this._inputPolys=s,this._inputPolys===null&&(this._inputPolys=new ArrayList)},staticAccessors$47={STRTREE_NODE_CAPACITY:{configurable:!0}};CascadedPolygonUnion.prototype.reduceToGeometries=function f(s){for(var d=this,_=new ArrayList,S=s.iterator();S.hasNext();){var T=S.next(),F=null;hasInterface(T,List)?F=d.unionTree(T):T instanceof Geometry&&(F=T),_.add(F)}return _};CascadedPolygonUnion.prototype.extractByEnvelope=function f(s,d,_){for(var S=new ArrayList,T=0;T<d.getNumGeometries();T++){var F=d.getGeometryN(T);F.getEnvelopeInternal().intersects(s)?S.add(F):_.add(F)}return this._geomFactory.buildGeometry(S)};CascadedPolygonUnion.prototype.unionOptimized=function f(s,d){var _=s.getEnvelopeInternal(),S=d.getEnvelopeInternal();if(!_.intersects(S)){var T=GeometryCombiner.combine(s,d);return T}if(s.getNumGeometries()<=1&&d.getNumGeometries()<=1)return this.unionActual(s,d);var F=_.intersection(S);return this.unionUsingEnvelopeIntersection(s,d,F)};CascadedPolygonUnion.prototype.union=function f(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var s=new STRtree(CascadedPolygonUnion.STRTREE_NODE_CAPACITY),d=this._inputPolys.iterator();d.hasNext();){var _=d.next();s.insert(_.getEnvelopeInternal(),_)}this._inputPolys=null;var S=s.itemsTree(),T=this.unionTree(S);return T};CascadedPolygonUnion.prototype.binaryUnion=function f(){if(arguments.length===1){var s=arguments[0];return this.binaryUnion(s,0,s.size())}else if(arguments.length===3){var d=arguments[0],_=arguments[1],S=arguments[2];if(S-_<=1){var T=CascadedPolygonUnion.getGeometry(d,_);return this.unionSafe(T,null)}else{if(S-_===2)return this.unionSafe(CascadedPolygonUnion.getGeometry(d,_),CascadedPolygonUnion.getGeometry(d,_+1));var F=Math.trunc((S+_)/2),M=this.binaryUnion(d,_,F),P=this.binaryUnion(d,F,S);return this.unionSafe(M,P)}}};CascadedPolygonUnion.prototype.repeatedUnion=function f(s){for(var d=null,_=s.iterator();_.hasNext();){var S=_.next();d===null?d=S.copy():d=d.union(S)}return d};CascadedPolygonUnion.prototype.unionSafe=function f(s,d){return s===null&&d===null?null:s===null?d.copy():d===null?s.copy():this.unionOptimized(s,d)};CascadedPolygonUnion.prototype.unionActual=function f(s,d){return CascadedPolygonUnion.restrictToPolygons(s.union(d))};CascadedPolygonUnion.prototype.unionTree=function f(s){var d=this.reduceToGeometries(s),_=this.binaryUnion(d);return _};CascadedPolygonUnion.prototype.unionUsingEnvelopeIntersection=function f(s,d,_){var S=new ArrayList,T=this.extractByEnvelope(_,s,S),F=this.extractByEnvelope(_,d,S),M=this.unionActual(T,F);S.add(M);var P=GeometryCombiner.combine(S);return P};CascadedPolygonUnion.prototype.bufferUnion=function f(){if(arguments.length===1){var s=arguments[0],d=s.get(0).getFactory(),_=d.buildGeometry(s),S=_.buffer(0);return S}else if(arguments.length===2){var T=arguments[0],F=arguments[1],M=T.getFactory(),P=M.createGeometryCollection([T,F]),H=P.buffer(0);return H}};CascadedPolygonUnion.prototype.interfaces_=function f(){return[]};CascadedPolygonUnion.prototype.getClass=function f(){return CascadedPolygonUnion};CascadedPolygonUnion.restrictToPolygons=function f(s){if(hasInterface(s,Polygonal))return s;var d=PolygonExtracter.getPolygons(s);return d.size()===1?d.get(0):s.getFactory().createMultiPolygon(GeometryFactory.toPolygonArray(d))};CascadedPolygonUnion.getGeometry=function f(s,d){return d>=s.size()?null:s.get(d)};CascadedPolygonUnion.union=function f(s){var d=new CascadedPolygonUnion(s);return d.union()};staticAccessors$47.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(CascadedPolygonUnion,staticAccessors$47);var UnionOp=function f(){};UnionOp.prototype.interfaces_=function f(){return[]};UnionOp.prototype.getClass=function f(){return UnionOp};UnionOp.union=function f(s,d){if(s.isEmpty()||d.isEmpty()){if(s.isEmpty()&&d.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.UNION,s,d,s.getFactory());if(s.isEmpty())return d.copy();if(d.isEmpty())return s.copy()}return s.checkNotGeometryCollection(s),s.checkNotGeometryCollection(d),SnapIfNeededOverlayOp.overlayOp(s,d,OverlayOp.UNION)};var earthRadius$5=63710088e-1,factors$5={centimeters:earthRadius$5*100,centimetres:earthRadius$5*100,degrees:earthRadius$5/111325,feet:earthRadius$5*3.28084,inches:earthRadius$5*39.37,kilometers:earthRadius$5/1e3,kilometres:earthRadius$5/1e3,meters:earthRadius$5,metres:earthRadius$5,miles:earthRadius$5/1609.344,millimeters:earthRadius$5*1e3,millimetres:earthRadius$5*1e3,nauticalmiles:earthRadius$5/1852,radians:1,yards:earthRadius$5*1.0936};function feature$f(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function featureCollection$4(f,s){s===void 0&&(s={});var d={type:"FeatureCollection"};return s.id&&(d.id=s.id),s.bbox&&(d.bbox=s.bbox),d.features=f,d}function radiansToLength$4(f,s){var d=factors$5[s];return f*d}function lengthToRadians$4(f,s){s===void 0&&(s="kilometers");var d=factors$5[s];if(!d)throw new Error(s+" units is invalid");return f/d}function featureEach$5(f,s){if(f.type==="Feature")s(f,0);else if(f.type==="FeatureCollection")for(var d=0;d<f.features.length&&s(f.features[d],d)!==!1;d++);}function geomEach$6(f,s){var d,_,S,T,F,M,P,H,J,K,z=0,oe=f.type==="FeatureCollection",se=f.type==="Feature",ae=oe?f.features.length:1;for(d=0;d<ae;d++){for(M=oe?f.features[d].geometry:se?f.geometry:f,H=oe?f.features[d].properties:se?f.properties:{},J=oe?f.features[d].bbox:se?f.bbox:void 0,K=oe?f.features[d].id:se?f.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,z,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,z,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],z,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}z++}}function adder(){return new Adder}function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(f){add$1(temp,f,this.t),add$1(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add$1(f,s,d){var _=f.s=s+d,S=_-s,T=_-S;f.t=s-T+(d-S)}var epsilon$5=1e-6,pi$4=Math.PI,halfPi$1=pi$4/2,quarterPi=pi$4/4,tau$3=pi$4*2,degrees=180/pi$4,radians=pi$4/180,abs$2=Math.abs,atan=Math.atan,atan2$1=Math.atan2,cos$1=Math.cos,sin$1=Math.sin,sqrt$1=Math.sqrt;function acos$1(f){return f>1?0:f<-1?pi$4:Math.acos(f)}function asin$1(f){return f>1?halfPi$1:f<-1?-halfPi$1:Math.asin(f)}function noop$2(){}function streamGeometry(f,s){f&&streamGeometryType.hasOwnProperty(f.type)&&streamGeometryType[f.type](f,s)}var streamObjectType={Feature:function(f,s){streamGeometry(f.geometry,s)},FeatureCollection:function(f,s){for(var d=f.features,_=-1,S=d.length;++_<S;)streamGeometry(d[_].geometry,s)}},streamGeometryType={Sphere:function(f,s){s.sphere()},Point:function(f,s){f=f.coordinates,s.point(f[0],f[1],f[2])},MultiPoint:function(f,s){for(var d=f.coordinates,_=-1,S=d.length;++_<S;)f=d[_],s.point(f[0],f[1],f[2])},LineString:function(f,s){streamLine(f.coordinates,s,0)},MultiLineString:function(f,s){for(var d=f.coordinates,_=-1,S=d.length;++_<S;)streamLine(d[_],s,0)},Polygon:function(f,s){streamPolygon(f.coordinates,s)},MultiPolygon:function(f,s){for(var d=f.coordinates,_=-1,S=d.length;++_<S;)streamPolygon(d[_],s)},GeometryCollection:function(f,s){for(var d=f.geometries,_=-1,S=d.length;++_<S;)streamGeometry(d[_],s)}};function streamLine(f,s,d){var _=-1,S=f.length-d,T;for(s.lineStart();++_<S;)T=f[_],s.point(T[0],T[1],T[2]);s.lineEnd()}function streamPolygon(f,s){var d=-1,_=f.length;for(s.polygonStart();++d<_;)streamLine(f[d],s,1);s.polygonEnd()}function geoStream(f,s){f&&streamObjectType.hasOwnProperty(f.type)?streamObjectType[f.type](f,s):streamGeometry(f,s)}adder();adder();function spherical(f){return[atan2$1(f[1],f[0]),asin$1(f[2])]}function cartesian(f){var s=f[0],d=f[1],_=cos$1(d);return[_*cos$1(s),_*sin$1(s),sin$1(d)]}function cartesianDot(f,s){return f[0]*s[0]+f[1]*s[1]+f[2]*s[2]}function cartesianCross(f,s){return[f[1]*s[2]-f[2]*s[1],f[2]*s[0]-f[0]*s[2],f[0]*s[1]-f[1]*s[0]]}function cartesianAddInPlace(f,s){f[0]+=s[0],f[1]+=s[1],f[2]+=s[2]}function cartesianScale(f,s){return[f[0]*s,f[1]*s,f[2]*s]}function cartesianNormalizeInPlace(f){var s=sqrt$1(f[0]*f[0]+f[1]*f[1]+f[2]*f[2]);f[0]/=s,f[1]/=s,f[2]/=s}adder();function compose(f,s){function d(_,S){return _=f(_,S),s(_[0],_[1])}return f.invert&&s.invert&&(d.invert=function(_,S){return _=s.invert(_,S),_&&f.invert(_[0],_[1])}),d}function rotationIdentity(f,s){return[f>pi$4?f-tau$3:f<-pi$4?f+tau$3:f,s]}rotationIdentity.invert=rotationIdentity;function rotateRadians(f,s,d){return(f%=tau$3)?s||d?compose(rotationLambda(f),rotationPhiGamma(s,d)):rotationLambda(f):s||d?rotationPhiGamma(s,d):rotationIdentity}function forwardRotationLambda(f){return function(s,d){return s+=f,[s>pi$4?s-tau$3:s<-pi$4?s+tau$3:s,d]}}function rotationLambda(f){var s=forwardRotationLambda(f);return s.invert=forwardRotationLambda(-f),s}function rotationPhiGamma(f,s){var d=cos$1(f),_=sin$1(f),S=cos$1(s),T=sin$1(s);function F(M,P){var H=cos$1(P),J=cos$1(M)*H,K=sin$1(M)*H,z=sin$1(P),oe=z*d+J*_;return[atan2$1(K*S-oe*T,J*d-z*_),asin$1(oe*S+K*T)]}return F.invert=function(M,P){var H=cos$1(P),J=cos$1(M)*H,K=sin$1(M)*H,z=sin$1(P),oe=z*S-K*T;return[atan2$1(K*S+z*T,J*d+oe*_),asin$1(oe*d-J*_)]},F}function circleStream(f,s,d,_,S,T){if(d){var F=cos$1(s),M=sin$1(s),P=_*d;S==null?(S=s+_*tau$3,T=s-P/2):(S=circleRadius(F,S),T=circleRadius(F,T),(_>0?S<T:S>T)&&(S+=_*tau$3));for(var H,J=S;_>0?J>T:J<T;J-=P)H=spherical([F,-M*cos$1(J),-M*sin$1(J)]),f.point(H[0],H[1])}}function circleRadius(f,s){s=cartesian(s),s[0]-=f,cartesianNormalizeInPlace(s);var d=acos$1(-s[1]);return((-s[2]<0?-d:d)+tau$3-epsilon$5)%tau$3}function clipBuffer(){var f=[],s;return{point:function(d,_){s.push([d,_])},lineStart:function(){f.push(s=[])},lineEnd:noop$2,rejoin:function(){f.length>1&&f.push(f.pop().concat(f.shift()))},result:function(){var d=f;return f=[],s=null,d}}}function clipLine(f,s,d,_,S,T){var F=f[0],M=f[1],P=s[0],H=s[1],J=0,K=1,z=P-F,oe=H-M,se;if(se=d-F,!(!z&&se>0)){if(se/=z,z<0){if(se<J)return;se<K&&(K=se)}else if(z>0){if(se>K)return;se>J&&(J=se)}if(se=S-F,!(!z&&se<0)){if(se/=z,z<0){if(se>K)return;se>J&&(J=se)}else if(z>0){if(se<J)return;se<K&&(K=se)}if(se=_-M,!(!oe&&se>0)){if(se/=oe,oe<0){if(se<J)return;se<K&&(K=se)}else if(oe>0){if(se>K)return;se>J&&(J=se)}if(se=T-M,!(!oe&&se<0)){if(se/=oe,oe<0){if(se>K)return;se>J&&(J=se)}else if(oe>0){if(se<J)return;se<K&&(K=se)}return J>0&&(f[0]=F+J*z,f[1]=M+J*oe),K<1&&(s[0]=F+K*z,s[1]=M+K*oe),!0}}}}}function pointEqual(f,s){return abs$2(f[0]-s[0])<epsilon$5&&abs$2(f[1]-s[1])<epsilon$5}function Intersection(f,s,d,_){this.x=f,this.z=s,this.o=d,this.e=_,this.v=!1,this.n=this.p=null}function clipPolygon(f,s,d,_,S){var T=[],F=[],M,P;if(f.forEach(function(se){if(!((ae=se.length-1)<=0)){var ae,ge=se[0],pe=se[ae],he;if(pointEqual(ge,pe)){for(S.lineStart(),M=0;M<ae;++M)S.point((ge=se[M])[0],ge[1]);S.lineEnd();return}T.push(he=new Intersection(ge,se,null,!0)),F.push(he.o=new Intersection(ge,null,he,!1)),T.push(he=new Intersection(pe,se,null,!1)),F.push(he.o=new Intersection(pe,null,he,!0))}}),!!T.length){for(F.sort(s),link$1(T),link$1(F),M=0,P=F.length;M<P;++M)F[M].e=d=!d;for(var H=T[0],J,K;;){for(var z=H,oe=!0;z.v;)if((z=z.n)===H)return;J=z.z,S.lineStart();do{if(z.v=z.o.v=!0,z.e){if(oe)for(M=0,P=J.length;M<P;++M)S.point((K=J[M])[0],K[1]);else _(z.x,z.n.x,1,S);z=z.n}else{if(oe)for(J=z.p.z,M=J.length-1;M>=0;--M)S.point((K=J[M])[0],K[1]);else _(z.x,z.p.x,-1,S);z=z.p}z=z.o,J=z.z,oe=!oe}while(!z.v);S.lineEnd()}}}function link$1(f){if(s=f.length){for(var s,d=0,_=f[0],S;++d<s;)_.n=S=f[d],S.p=_,_=S;_.n=S=f[0],S.p=_}}function ascending(f,s){return f<s?-1:f>s?1:f>=s?0:NaN}function bisector(f){return f.length===1&&(f=ascendingComparator(f)),{left:function(s,d,_,S){for(_==null&&(_=0),S==null&&(S=s.length);_<S;){var T=_+S>>>1;f(s[T],d)<0?_=T+1:S=T}return _},right:function(s,d,_,S){for(_==null&&(_=0),S==null&&(S=s.length);_<S;){var T=_+S>>>1;f(s[T],d)>0?S=T:_=T+1}return _}}}function ascendingComparator(f){return function(s,d){return ascending(f(s),d)}}bisector(ascending);function merge$2(f){for(var s=f.length,d,_=-1,S=0,T,F;++_<s;)S+=f[_].length;for(T=new Array(S);--s>=0;)for(F=f[s],d=F.length;--d>=0;)T[--S]=F[d];return T}var clipMax=1e9,clipMin=-clipMax;function clipExtent(f,s,d,_){function S(H,J){return f<=H&&H<=d&&s<=J&&J<=_}function T(H,J,K,z){var oe=0,se=0;if(H==null||(oe=F(H,K))!==(se=F(J,K))||P(H,J)<0^K>0)do z.point(oe===0||oe===3?f:d,oe>1?_:s);while((oe=(oe+K+4)%4)!==se);else z.point(J[0],J[1])}function F(H,J){return abs$2(H[0]-f)<epsilon$5?J>0?0:3:abs$2(H[0]-d)<epsilon$5?J>0?2:1:abs$2(H[1]-s)<epsilon$5?J>0?1:0:J>0?3:2}function M(H,J){return P(H.x,J.x)}function P(H,J){var K=F(H,1),z=F(J,1);return K!==z?K-z:K===0?J[1]-H[1]:K===1?H[0]-J[0]:K===2?H[1]-J[1]:J[0]-H[0]}return function(H){var J=H,K=clipBuffer(),z,oe,se,ae,ge,pe,he,ve,be,Re,Fe,ye={point:Ue,lineStart:xt,lineEnd:Ct,polygonStart:St,polygonEnd:At};function Ue(qt,Jn){S(qt,Jn)&&J.point(qt,Jn)}function It(){for(var qt=0,Jn=0,qr=oe.length;Jn<qr;++Jn)for(var na=oe[Jn],qn=1,vA=na.length,TA=na[0],VA,mI,jA=TA[0],aI=TA[1];qn<vA;++qn)VA=jA,mI=aI,TA=na[qn],jA=TA[0],aI=TA[1],mI<=_?aI>_&&(jA-VA)*(_-mI)>(aI-mI)*(f-VA)&&++qt:aI<=_&&(jA-VA)*(_-mI)<(aI-mI)*(f-VA)&&--qt;return qt}function St(){J=K,z=[],oe=[],Fe=!0}function At(){var qt=It(),Jn=Fe&&qt,qr=(z=merge$2(z)).length;(Jn||qr)&&(H.polygonStart(),Jn&&(H.lineStart(),T(null,null,1,H),H.lineEnd()),qr&&clipPolygon(z,M,qt,T,H),H.polygonEnd()),J=H,z=oe=se=null}function xt(){ye.point=Nt,oe&&oe.push(se=[]),Re=!0,be=!1,he=ve=NaN}function Ct(){z&&(Nt(ae,ge),pe&&be&&K.rejoin(),z.push(K.result())),ye.point=Ue,be&&J.lineEnd()}function Nt(qt,Jn){var qr=S(qt,Jn);if(oe&&se.push([qt,Jn]),Re)ae=qt,ge=Jn,pe=qr,Re=!1,qr&&(J.lineStart(),J.point(qt,Jn));else if(qr&&be)J.point(qt,Jn);else{var na=[he=Math.max(clipMin,Math.min(clipMax,he)),ve=Math.max(clipMin,Math.min(clipMax,ve))],qn=[qt=Math.max(clipMin,Math.min(clipMax,qt)),Jn=Math.max(clipMin,Math.min(clipMax,Jn))];clipLine(na,qn,f,s,d,_)?(be||(J.lineStart(),J.point(na[0],na[1])),J.point(qn[0],qn[1]),qr||J.lineEnd(),Fe=!1):qr&&(J.lineStart(),J.point(qt,Jn),Fe=!1)}he=qt,ve=Jn,be=qr}return ye}}var sum$2=adder();function polygonContains(f,s){var d=s[0],_=s[1],S=[sin$1(d),-cos$1(d),0],T=0,F=0;sum$2.reset();for(var M=0,P=f.length;M<P;++M)if(J=(H=f[M]).length)for(var H,J,K=H[J-1],z=K[0],oe=K[1]/2+quarterPi,se=sin$1(oe),ae=cos$1(oe),ge=0;ge<J;++ge,z=he,se=be,ae=Re,K=pe){var pe=H[ge],he=pe[0],ve=pe[1]/2+quarterPi,be=sin$1(ve),Re=cos$1(ve),Fe=he-z,ye=Fe>=0?1:-1,Ue=ye*Fe,It=Ue>pi$4,St=se*be;if(sum$2.add(atan2$1(St*ye*sin$1(Ue),ae*Re+St*cos$1(Ue))),T+=It?Fe+ye*tau$3:Fe,It^z>=d^he>=d){var At=cartesianCross(cartesian(K),cartesian(pe));cartesianNormalizeInPlace(At);var xt=cartesianCross(S,At);cartesianNormalizeInPlace(xt);var Ct=(It^Fe>=0?-1:1)*asin$1(xt[2]);(_>Ct||_===Ct&&(At[0]||At[1]))&&(F+=It^Fe>=0?1:-1)}}return(T<-epsilon$5||T<epsilon$5&&sum$2<-epsilon$5)^F&1}adder();function identity$1(f){return f}adder();adder();var x0=1/0,y0=x0,x1=-x0,y1=x1,boundsStream={point:boundsPoint,lineStart:noop$2,lineEnd:noop$2,polygonStart:noop$2,polygonEnd:noop$2,result:function(){var f=[[x0,y0],[x1,y1]];return x1=y1=-(y0=x0=1/0),f}};function boundsPoint(f,s){f<x0&&(x0=f),f>x1&&(x1=f),s<y0&&(y0=s),s>y1&&(y1=s)}adder();function clip(f,s,d,_){return function(S,T){var F=s(T),M=S.invert(_[0],_[1]),P=clipBuffer(),H=s(P),J=!1,K,z,oe,se={point:ae,lineStart:pe,lineEnd:he,polygonStart:function(){se.point=ve,se.lineStart=be,se.lineEnd=Re,z=[],K=[]},polygonEnd:function(){se.point=ae,se.lineStart=pe,se.lineEnd=he,z=merge$2(z);var Fe=polygonContains(K,M);z.length?(J||(T.polygonStart(),J=!0),clipPolygon(z,compareIntersection,Fe,d,T)):Fe&&(J||(T.polygonStart(),J=!0),T.lineStart(),d(null,null,1,T),T.lineEnd()),J&&(T.polygonEnd(),J=!1),z=K=null},sphere:function(){T.polygonStart(),T.lineStart(),d(null,null,1,T),T.lineEnd(),T.polygonEnd()}};function ae(Fe,ye){var Ue=S(Fe,ye);f(Fe=Ue[0],ye=Ue[1])&&T.point(Fe,ye)}function ge(Fe,ye){var Ue=S(Fe,ye);F.point(Ue[0],Ue[1])}function pe(){se.point=ge,F.lineStart()}function he(){se.point=ae,F.lineEnd()}function ve(Fe,ye){oe.push([Fe,ye]);var Ue=S(Fe,ye);H.point(Ue[0],Ue[1])}function be(){H.lineStart(),oe=[]}function Re(){ve(oe[0][0],oe[0][1]),H.lineEnd();var Fe=H.clean(),ye=P.result(),Ue,It=ye.length,St,At,xt;if(oe.pop(),K.push(oe),oe=null,!!It){if(Fe&1){if(At=ye[0],(St=At.length-1)>0){for(J||(T.polygonStart(),J=!0),T.lineStart(),Ue=0;Ue<St;++Ue)T.point((xt=At[Ue])[0],xt[1]);T.lineEnd()}return}It>1&&Fe&2&&ye.push(ye.pop().concat(ye.shift())),z.push(ye.filter(validSegment))}}return se}}function validSegment(f){return f.length>1}function compareIntersection(f,s){return((f=f.x)[0]<0?f[1]-halfPi$1-epsilon$5:halfPi$1-f[1])-((s=s.x)[0]<0?s[1]-halfPi$1-epsilon$5:halfPi$1-s[1])}const clipAntimeridian=clip(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi$4,-halfPi$1]);function clipAntimeridianLine(f){var s=NaN,d=NaN,_=NaN,S;return{lineStart:function(){f.lineStart(),S=1},point:function(T,F){var M=T>0?pi$4:-pi$4,P=abs$2(T-s);abs$2(P-pi$4)<epsilon$5?(f.point(s,d=(d+F)/2>0?halfPi$1:-halfPi$1),f.point(_,d),f.lineEnd(),f.lineStart(),f.point(M,d),f.point(T,d),S=0):_!==M&&P>=pi$4&&(abs$2(s-_)<epsilon$5&&(s-=_*epsilon$5),abs$2(T-M)<epsilon$5&&(T-=M*epsilon$5),d=clipAntimeridianIntersect(s,d,T,F),f.point(_,d),f.lineEnd(),f.lineStart(),f.point(M,d),S=0),f.point(s=T,d=F),_=M},lineEnd:function(){f.lineEnd(),s=d=NaN},clean:function(){return 2-S}}}function clipAntimeridianIntersect(f,s,d,_){var S,T,F=sin$1(f-d);return abs$2(F)>epsilon$5?atan((sin$1(s)*(T=cos$1(_))*sin$1(d)-sin$1(_)*(S=cos$1(s))*sin$1(f))/(S*T*F)):(s+_)/2}function clipAntimeridianInterpolate(f,s,d,_){var S;if(f==null)S=d*halfPi$1,_.point(-pi$4,S),_.point(0,S),_.point(pi$4,S),_.point(pi$4,0),_.point(pi$4,-S),_.point(0,-S),_.point(-pi$4,-S),_.point(-pi$4,0),_.point(-pi$4,S);else if(abs$2(f[0]-s[0])>epsilon$5){var T=f[0]<s[0]?pi$4:-pi$4;S=d*T/2,_.point(-T,S),_.point(0,S),_.point(T,S)}else _.point(s[0],s[1])}function clipCircle(f,s){var d=cos$1(f),_=d>0,S=abs$2(d)>epsilon$5;function T(J,K,z,oe){circleStream(oe,f,s,z,J,K)}function F(J,K){return cos$1(J)*cos$1(K)>d}function M(J){var K,z,oe,se,ae;return{lineStart:function(){se=oe=!1,ae=1},point:function(ge,pe){var he=[ge,pe],ve,be=F(ge,pe),Re=_?be?0:H(ge,pe):be?H(ge+(ge<0?pi$4:-pi$4),pe):0;if(!K&&(se=oe=be)&&J.lineStart(),be!==oe&&(ve=P(K,he),(!ve||pointEqual(K,ve)||pointEqual(he,ve))&&(he[0]+=epsilon$5,he[1]+=epsilon$5,be=F(he[0],he[1]))),be!==oe)ae=0,be?(J.lineStart(),ve=P(he,K),J.point(ve[0],ve[1])):(ve=P(K,he),J.point(ve[0],ve[1]),J.lineEnd()),K=ve;else if(S&&K&&_^be){var Fe;!(Re&z)&&(Fe=P(he,K,!0))&&(ae=0,_?(J.lineStart(),J.point(Fe[0][0],Fe[0][1]),J.point(Fe[1][0],Fe[1][1]),J.lineEnd()):(J.point(Fe[1][0],Fe[1][1]),J.lineEnd(),J.lineStart(),J.point(Fe[0][0],Fe[0][1])))}be&&(!K||!pointEqual(K,he))&&J.point(he[0],he[1]),K=he,oe=be,z=Re},lineEnd:function(){oe&&J.lineEnd(),K=null},clean:function(){return ae|(se&&oe)<<1}}}function P(J,K,z){var oe=cartesian(J),se=cartesian(K),ae=[1,0,0],ge=cartesianCross(oe,se),pe=cartesianDot(ge,ge),he=ge[0],ve=pe-he*he;if(!ve)return!z&&J;var be=d*pe/ve,Re=-d*he/ve,Fe=cartesianCross(ae,ge),ye=cartesianScale(ae,be),Ue=cartesianScale(ge,Re);cartesianAddInPlace(ye,Ue);var It=Fe,St=cartesianDot(ye,It),At=cartesianDot(It,It),xt=St*St-At*(cartesianDot(ye,ye)-1);if(!(xt<0)){var Ct=sqrt$1(xt),Nt=cartesianScale(It,(-St-Ct)/At);if(cartesianAddInPlace(Nt,ye),Nt=spherical(Nt),!z)return Nt;var qt=J[0],Jn=K[0],qr=J[1],na=K[1],qn;Jn<qt&&(qn=qt,qt=Jn,Jn=qn);var vA=Jn-qt,TA=abs$2(vA-pi$4)<epsilon$5,VA=TA||vA<epsilon$5;if(!TA&&na<qr&&(qn=qr,qr=na,na=qn),VA?TA?qr+na>0^Nt[1]<(abs$2(Nt[0]-qt)<epsilon$5?qr:na):qr<=Nt[1]&&Nt[1]<=na:vA>pi$4^(qt<=Nt[0]&&Nt[0]<=Jn)){var mI=cartesianScale(It,(-St+Ct)/At);return cartesianAddInPlace(mI,ye),[Nt,spherical(mI)]}}}function H(J,K){var z=_?f:pi$4-f,oe=0;return J<-z?oe|=1:J>z&&(oe|=2),K<-z?oe|=4:K>z&&(oe|=8),oe}return clip(F,M,T,_?[0,-f]:[-pi$4,f-pi$4])}function transformer(f){return function(s){var d=new TransformStream;for(var _ in f)d[_]=f[_];return d.stream=s,d}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(f,s){this.stream.point(f,s)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fitExtent(f,s,d){var _=s[1][0]-s[0][0],S=s[1][1]-s[0][1],T=f.clipExtent&&f.clipExtent();f.scale(150).translate([0,0]),T!=null&&f.clipExtent(null),geoStream(d,f.stream(boundsStream));var F=boundsStream.result(),M=Math.min(_/(F[1][0]-F[0][0]),S/(F[1][1]-F[0][1])),P=+s[0][0]+(_-M*(F[1][0]+F[0][0]))/2,H=+s[0][1]+(S-M*(F[1][1]+F[0][1]))/2;return T!=null&&f.clipExtent(T),f.scale(M*150).translate([P,H])}function fitSize(f,s,d){return fitExtent(f,[[0,0],s],d)}var maxDepth=16,cosMinDistance=cos$1(30*radians);function resample(f,s){return+s?resample$1(f,s):resampleNone(f)}function resampleNone(f){return transformer({point:function(s,d){s=f(s,d),this.stream.point(s[0],s[1])}})}function resample$1(f,s){function d(_,S,T,F,M,P,H,J,K,z,oe,se,ae,ge){var pe=H-_,he=J-S,ve=pe*pe+he*he;if(ve>4*s&&ae--){var be=F+z,Re=M+oe,Fe=P+se,ye=sqrt$1(be*be+Re*Re+Fe*Fe),Ue=asin$1(Fe/=ye),It=abs$2(abs$2(Fe)-1)<epsilon$5||abs$2(T-K)<epsilon$5?(T+K)/2:atan2$1(Re,be),St=f(It,Ue),At=St[0],xt=St[1],Ct=At-_,Nt=xt-S,qt=he*Ct-pe*Nt;(qt*qt/ve>s||abs$2((pe*Ct+he*Nt)/ve-.5)>.3||F*z+M*oe+P*se<cosMinDistance)&&(d(_,S,T,F,M,P,At,xt,It,be/=ye,Re/=ye,Fe,ae,ge),ge.point(At,xt),d(At,xt,It,be,Re,Fe,H,J,K,z,oe,se,ae,ge))}}return function(_){var S,T,F,M,P,H,J,K,z,oe,se,ae,ge={point:pe,lineStart:he,lineEnd:be,polygonStart:function(){_.polygonStart(),ge.lineStart=Re},polygonEnd:function(){_.polygonEnd(),ge.lineStart=he}};function pe(Ue,It){Ue=f(Ue,It),_.point(Ue[0],Ue[1])}function he(){K=NaN,ge.point=ve,_.lineStart()}function ve(Ue,It){var St=cartesian([Ue,It]),At=f(Ue,It);d(K,z,J,oe,se,ae,K=At[0],z=At[1],J=Ue,oe=St[0],se=St[1],ae=St[2],maxDepth,_),_.point(K,z)}function be(){ge.point=pe,_.lineEnd()}function Re(){he(),ge.point=Fe,ge.lineEnd=ye}function Fe(Ue,It){ve(S=Ue,It),T=K,F=z,M=oe,P=se,H=ae,ge.point=ve}function ye(){d(K,z,J,oe,se,ae,T,F,S,M,P,H,maxDepth,_),ge.lineEnd=be,be()}return ge}}var transformRadians=transformer({point:function(f,s){this.stream.point(f*radians,s*radians)}});function projection(f){return projectionMutator(function(){return f})()}function projectionMutator(f){var s,d=150,_=480,S=250,T,F,M=0,P=0,H=0,J=0,K=0,z,oe,se=null,ae=clipAntimeridian,ge=null,pe,he,ve,be=identity$1,Re=.5,Fe=resample(At,Re),ye,Ue;function It(Nt){return Nt=oe(Nt[0]*radians,Nt[1]*radians),[Nt[0]*d+T,F-Nt[1]*d]}function St(Nt){return Nt=oe.invert((Nt[0]-T)/d,(F-Nt[1])/d),Nt&&[Nt[0]*degrees,Nt[1]*degrees]}function At(Nt,qt){return Nt=s(Nt,qt),[Nt[0]*d+T,F-Nt[1]*d]}It.stream=function(Nt){return ye&&Ue===Nt?ye:ye=transformRadians(ae(z,Fe(be(Ue=Nt))))},It.clipAngle=function(Nt){return arguments.length?(ae=+Nt?clipCircle(se=Nt*radians,6*radians):(se=null,clipAntimeridian),Ct()):se*degrees},It.clipExtent=function(Nt){return arguments.length?(be=Nt==null?(ge=pe=he=ve=null,identity$1):clipExtent(ge=+Nt[0][0],pe=+Nt[0][1],he=+Nt[1][0],ve=+Nt[1][1]),Ct()):ge==null?null:[[ge,pe],[he,ve]]},It.scale=function(Nt){return arguments.length?(d=+Nt,xt()):d},It.translate=function(Nt){return arguments.length?(_=+Nt[0],S=+Nt[1],xt()):[_,S]},It.center=function(Nt){return arguments.length?(M=Nt[0]%360*radians,P=Nt[1]%360*radians,xt()):[M*degrees,P*degrees]},It.rotate=function(Nt){return arguments.length?(H=Nt[0]%360*radians,J=Nt[1]%360*radians,K=Nt.length>2?Nt[2]%360*radians:0,xt()):[H*degrees,J*degrees,K*degrees]},It.precision=function(Nt){return arguments.length?(Fe=resample(At,Re=Nt*Nt),Ct()):sqrt$1(Re)},It.fitExtent=function(Nt,qt){return fitExtent(It,Nt,qt)},It.fitSize=function(Nt,qt){return fitSize(It,Nt,qt)};function xt(){oe=compose(z=rotateRadians(H,J,K),s);var Nt=s(M,P);return T=_-Nt[0]*d,F=S+Nt[1]*d,Ct()}function Ct(){return ye=Ue=null,It}return function(){return s=f.apply(this,arguments),It.invert=s.invert&&St,xt()}}function azimuthalRaw(f){return function(s,d){var _=cos$1(s),S=cos$1(d),T=f(_*S);return[T*S*sin$1(s),T*sin$1(d)]}}function azimuthalInvert(f){return function(s,d){var _=sqrt$1(s*s+d*d),S=f(_),T=sin$1(S),F=cos$1(S);return[atan2$1(s*T,_*F),asin$1(_&&d*T/_)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(f){return sqrt$1(2/(1+f))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(f){return 2*asin$1(f/2)});var azimuthalEquidistantRaw=azimuthalRaw(function(f){return(f=acos$1(f))&&f/sin$1(f)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(f){return f});function geoAzimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-.001)}function equirectangularRaw(f,s){return[f,s]}equirectangularRaw.invert=equirectangularRaw;function buffer(f,s,d){d=d||{};var _=d.units||"kilometers",S=d.steps||8;if(!f)throw new Error("geojson is required");if(typeof d!="object")throw new Error("options must be an object");if(typeof S!="number")throw new Error("steps must be an number");if(s===void 0)throw new Error("radius is required");if(S<=0)throw new Error("steps must be greater than 0");var T=[];switch(f.type){case"GeometryCollection":return geomEach$6(f,function(F){var M=bufferFeature(F,s,_,S);M&&T.push(M)}),featureCollection$4(T);case"FeatureCollection":return featureEach$5(f,function(F){var M=bufferFeature(F,s,_,S);M&&featureEach$5(M,function(P){P&&T.push(P)})}),featureCollection$4(T)}return bufferFeature(f,s,_,S)}function bufferFeature(f,s,d,_){var S=f.properties||{},T=f.type==="Feature"?f.geometry:f;if(T.type==="GeometryCollection"){var F=[];return geomEach$6(f,function(ae){var ge=bufferFeature(ae,s,d,_);ge&&F.push(ge)}),featureCollection$4(F)}var M=defineProjection(T),P={type:T.type,coordinates:projectCoords(T.coordinates,M)},H=new GeoJSONReader,J=H.read(P),K=radiansToLength$4(lengthToRadians$4(s,d),"meters"),z=BufferOp.bufferOp(J,K,_),oe=new GeoJSONWriter;if(z=oe.write(z),!coordsIsNaN(z.coordinates)){var se={type:z.type,coordinates:unprojectCoords(z.coordinates,M)};return feature$f(se,S)}}function coordsIsNaN(f){return Array.isArray(f[0])?coordsIsNaN(f[0]):isNaN(f[0])}function projectCoords(f,s){return typeof f[0]!="object"?s(f):f.map(function(d){return projectCoords(d,s)})}function unprojectCoords(f,s){return typeof f[0]!="object"?s.invert(f):f.map(function(d){return unprojectCoords(d,s)})}function defineProjection(f){var s=center(f).geometry.coordinates,d=[-s[0],-s[1]];return geoAzimuthalEquidistant().rotate(d).scale(earthRadius$5)}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function __generator$1(f,s){var d={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},_,S,T,F;return F={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function M(H){return function(J){return P([H,J])}}function P(H){if(_)throw new TypeError("Generator is already executing.");for(;d;)try{if(_=1,S&&(T=H[0]&2?S.return:H[0]?S.throw||((T=S.return)&&T.call(S),0):S.next)&&!(T=T.call(S,H[1])).done)return T;switch(S=0,T&&(H=[H[0]&2,T.value]),H[0]){case 0:case 1:T=H;break;case 4:return d.label++,{value:H[1],done:!1};case 5:d.label++,S=H[1],H=[0];continue;case 7:H=d.ops.pop(),d.trys.pop();continue;default:if(T=d.trys,!(T=T.length>0&&T[T.length-1])&&(H[0]===6||H[0]===2)){d=0;continue}if(H[0]===3&&(!T||H[1]>T[0]&&H[1]<T[3])){d.label=H[1];break}if(H[0]===6&&d.label<T[1]){d.label=T[1],T=H;break}if(T&&d.label<T[2]){d.label=T[2],d.ops.push(H);break}T[2]&&d.ops.pop(),d.trys.pop();continue}H=s.call(f,d)}catch(J){H=[6,J],S=0}finally{_=T=0}if(H[0]&5)throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}}var Node=function(){function f(s,d){this.next=null,this.key=s,this.data=d,this.left=null,this.right=null}return f}();function DEFAULT_COMPARE(f,s){return f>s?1:f<s?-1:0}function splay(f,s,d){for(var _=new Node(null,null),S=_,T=_;;){var F=d(f,s.key);if(F<0){if(s.left===null)break;if(d(f,s.left.key)<0){var M=s.left;if(s.left=M.right,M.right=s,s=M,s.left===null)break}T.left=s,T=s,s=s.left}else if(F>0){if(s.right===null)break;if(d(f,s.right.key)>0){var M=s.right;if(s.right=M.left,M.left=s,s=M,s.right===null)break}S.right=s,S=s,s=s.right}else break}return S.right=s.left,T.left=s.right,s.left=_.right,s.right=_.left,s}function insert(f,s,d,_){var S=new Node(f,s);if(d===null)return S.left=S.right=null,S;d=splay(f,d,_);var T=_(f,d.key);return T<0?(S.left=d.left,S.right=d,d.left=null):T>=0&&(S.right=d.right,S.left=d,d.right=null),S}function split(f,s,d){var _=null,S=null;if(s){s=splay(f,s,d);var T=d(s.key,f);T===0?(_=s.left,S=s.right):T<0?(S=s.right,s.right=null,_=s):(_=s.left,s.left=null,S=s)}return{left:_,right:S}}function merge$1(f,s,d){return s===null?f:(f===null||(s=splay(f.key,s,d),s.left=f),s)}function printRow(f,s,d,_,S){if(f){_(""+s+(d?" ":" ")+S(f)+`
`);var T=s+(d?"    ":"   ");f.left&&printRow(f.left,T,!1,_,S),f.right&&printRow(f.right,T,!0,_,S)}}var Tree=function(){function f(s){s===void 0&&(s=DEFAULT_COMPARE),this._root=null,this._size=0,this._comparator=s}return f.prototype.insert=function(s,d){return this._size++,this._root=insert(s,d,this._root,this._comparator)},f.prototype.add=function(s,d){var _=new Node(s,d);this._root===null&&(_.left=_.right=null,this._size++,this._root=_);var S=this._comparator,T=splay(s,this._root,S),F=S(s,T.key);return F===0?this._root=T:(F<0?(_.left=T.left,_.right=T,T.left=null):F>0&&(_.right=T.right,_.left=T,T.right=null),this._size++,this._root=_),this._root},f.prototype.remove=function(s){this._root=this._remove(s,this._root,this._comparator)},f.prototype._remove=function(s,d,_){var S;if(d===null)return null;d=splay(s,d,_);var T=_(s,d.key);return T===0?(d.left===null?S=d.right:(S=splay(s,d.left,_),S.right=d.right),this._size--,S):d},f.prototype.pop=function(){var s=this._root;if(s){for(;s.left;)s=s.left;return this._root=splay(s.key,this._root,this._comparator),this._root=this._remove(s.key,this._root,this._comparator),{key:s.key,data:s.data}}return null},f.prototype.findStatic=function(s){for(var d=this._root,_=this._comparator;d;){var S=_(s,d.key);if(S===0)return d;S<0?d=d.left:d=d.right}return null},f.prototype.find=function(s){return this._root&&(this._root=splay(s,this._root,this._comparator),this._comparator(s,this._root.key)!==0)?null:this._root},f.prototype.contains=function(s){for(var d=this._root,_=this._comparator;d;){var S=_(s,d.key);if(S===0)return!0;S<0?d=d.left:d=d.right}return!1},f.prototype.forEach=function(s,d){for(var _=this._root,S=[],T=!1;!T;)_!==null?(S.push(_),_=_.left):S.length!==0?(_=S.pop(),s.call(d,_),_=_.right):T=!0;return this},f.prototype.range=function(s,d,_,S){for(var T=[],F=this._comparator,M=this._root,P;T.length!==0||M;)if(M)T.push(M),M=M.left;else{if(M=T.pop(),P=F(M.key,d),P>0)break;if(F(M.key,s)>=0&&_.call(S,M))return this;M=M.right}return this},f.prototype.keys=function(){var s=[];return this.forEach(function(d){var _=d.key;return s.push(_)}),s},f.prototype.values=function(){var s=[];return this.forEach(function(d){var _=d.data;return s.push(_)}),s},f.prototype.min=function(){return this._root?this.minNode(this._root).key:null},f.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},f.prototype.minNode=function(s){if(s===void 0&&(s=this._root),s)for(;s.left;)s=s.left;return s},f.prototype.maxNode=function(s){if(s===void 0&&(s=this._root),s)for(;s.right;)s=s.right;return s},f.prototype.at=function(s){for(var d=this._root,_=!1,S=0,T=[];!_;)if(d)T.push(d),d=d.left;else if(T.length>0){if(d=T.pop(),S===s)return d;S++,d=d.right}else _=!0;return null},f.prototype.next=function(s){var d=this._root,_=null;if(s.right){for(_=s.right;_.left;)_=_.left;return _}for(var S=this._comparator;d;){var T=S(s.key,d.key);if(T===0)break;T<0?(_=d,d=d.left):d=d.right}return _},f.prototype.prev=function(s){var d=this._root,_=null;if(s.left!==null){for(_=s.left;_.right;)_=_.right;return _}for(var S=this._comparator;d;){var T=S(s.key,d.key);if(T===0)break;T<0?d=d.left:(_=d,d=d.right)}return _},f.prototype.clear=function(){return this._root=null,this._size=0,this},f.prototype.toList=function(){return toList(this._root)},f.prototype.load=function(s,d,_){d===void 0&&(d=[]),_===void 0&&(_=!1);var S=s.length,T=this._comparator;if(_&&sort(s,d,0,S-1,T),this._root===null)this._root=loadRecursive(s,d,0,S),this._size=S;else{var F=mergeLists(this.toList(),createList(s,d),T);S=this._size+S,this._root=sortedListToBST({head:F},0,S)}return this},f.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(f.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),f.prototype.toString=function(s){s===void 0&&(s=function(_){return String(_.key)});var d=[];return printRow(this._root,"",!0,function(_){return d.push(_)},s),d.join("")},f.prototype.update=function(s,d,_){var S=this._comparator,T=split(s,this._root,S),F=T.left,M=T.right;S(s,d)<0?M=insert(d,_,M,S):F=insert(d,_,F,S),this._root=merge$1(F,M,S)},f.prototype.split=function(s){return split(s,this._root,this._comparator)},f.prototype[Symbol.iterator]=function(){var s,d,_;return __generator$1(this,function(S){switch(S.label){case 0:s=this._root,d=[],_=!1,S.label=1;case 1:return _?[3,6]:s===null?[3,2]:(d.push(s),s=s.left,[3,5]);case 2:return d.length===0?[3,4]:(s=d.pop(),[4,s]);case 3:return S.sent(),s=s.right,[3,5];case 4:_=!0,S.label=5;case 5:return[3,1];case 6:return[2]}})},f}();function loadRecursive(f,s,d,_){var S=_-d;if(S>0){var T=d+Math.floor(S/2),F=f[T],M=s[T],P=new Node(F,M);return P.left=loadRecursive(f,s,d,T),P.right=loadRecursive(f,s,T+1,_),P}return null}function createList(f,s){for(var d=new Node(null,null),_=d,S=0;S<f.length;S++)_=_.next=new Node(f[S],s[S]);return _.next=null,d.next}function toList(f){for(var s=f,d=[],_=!1,S=new Node(null,null),T=S;!_;)s?(d.push(s),s=s.left):d.length>0?(s=T=T.next=d.pop(),s=s.right):_=!0;return T.next=null,S.next}function sortedListToBST(f,s,d){var _=d-s;if(_>0){var S=s+Math.floor(_/2),T=sortedListToBST(f,s,S),F=f.head;return F.left=T,f.head=f.head.next,F.right=sortedListToBST(f,S+1,d),F}return null}function mergeLists(f,s,d){for(var _=new Node(null,null),S=_,T=f,F=s;T!==null&&F!==null;)d(T.key,F.key)<0?(S.next=T,T=T.next):(S.next=F,F=F.next),S=S.next;return T!==null?S.next=T:F!==null&&(S.next=F),_.next}function sort(f,s,d,_,S){if(!(d>=_)){for(var T=f[d+_>>1],F=d-1,M=_+1;;){do F++;while(S(f[F],T)<0);do M--;while(S(f[M],T)>0);if(F>=M)break;var P=f[F];f[F]=f[M],f[M]=P,P=s[F],s[F]=s[M],s[M]=P}sort(f,s,d,M,S),sort(f,s,M+1,_,S)}}const epsilon$4=11102230246251565e-32,splitter=134217729,resulterrbound=(3+8*epsilon$4)*epsilon$4;function sum$1(f,s,d,_,S){let T,F,M,P,H=s[0],J=_[0],K=0,z=0;J>H==J>-H?(T=H,H=s[++K]):(T=J,J=_[++z]);let oe=0;if(K<f&&z<d)for(J>H==J>-H?(F=H+T,M=T-(F-H),H=s[++K]):(F=J+T,M=T-(F-J),J=_[++z]),T=F,M!==0&&(S[oe++]=M);K<f&&z<d;)J>H==J>-H?(F=T+H,P=F-T,M=T-(F-P)+(H-P),H=s[++K]):(F=T+J,P=F-T,M=T-(F-P)+(J-P),J=_[++z]),T=F,M!==0&&(S[oe++]=M);for(;K<f;)F=T+H,P=F-T,M=T-(F-P)+(H-P),H=s[++K],T=F,M!==0&&(S[oe++]=M);for(;z<d;)F=T+J,P=F-T,M=T-(F-P)+(J-P),J=_[++z],T=F,M!==0&&(S[oe++]=M);return(T!==0||oe===0)&&(S[oe++]=T),oe}function estimate(f,s){let d=s[0];for(let _=1;_<f;_++)d+=s[_];return d}function vec(f){return new Float64Array(f)}const ccwerrboundA=(3+16*epsilon$4)*epsilon$4,ccwerrboundB=(2+12*epsilon$4)*epsilon$4,ccwerrboundC=(9+64*epsilon$4)*epsilon$4*epsilon$4,B=vec(4),C1=vec(8),C2=vec(12),D$1=vec(16),u=vec(4);function orient2dadapt(f,s,d,_,S,T,F){let M,P,H,J,K,z,oe,se,ae,ge,pe,he,ve,be,Re,Fe,ye,Ue;const It=f-S,St=d-S,At=s-T,xt=_-T;be=It*xt,z=splitter*It,oe=z-(z-It),se=It-oe,z=splitter*xt,ae=z-(z-xt),ge=xt-ae,Re=se*ge-(be-oe*ae-se*ae-oe*ge),Fe=At*St,z=splitter*At,oe=z-(z-At),se=At-oe,z=splitter*St,ae=z-(z-St),ge=St-ae,ye=se*ge-(Fe-oe*ae-se*ae-oe*ge),pe=Re-ye,K=Re-pe,B[0]=Re-(pe+K)+(K-ye),he=be+pe,K=he-be,ve=be-(he-K)+(pe-K),pe=ve-Fe,K=ve-pe,B[1]=ve-(pe+K)+(K-Fe),Ue=he+pe,K=Ue-he,B[2]=he-(Ue-K)+(pe-K),B[3]=Ue;let Ct=estimate(4,B),Nt=ccwerrboundB*F;if(Ct>=Nt||-Ct>=Nt||(K=f-It,M=f-(It+K)+(K-S),K=d-St,H=d-(St+K)+(K-S),K=s-At,P=s-(At+K)+(K-T),K=_-xt,J=_-(xt+K)+(K-T),M===0&&P===0&&H===0&&J===0)||(Nt=ccwerrboundC*F+resulterrbound*Math.abs(Ct),Ct+=It*J+xt*M-(At*H+St*P),Ct>=Nt||-Ct>=Nt))return Ct;be=M*xt,z=splitter*M,oe=z-(z-M),se=M-oe,z=splitter*xt,ae=z-(z-xt),ge=xt-ae,Re=se*ge-(be-oe*ae-se*ae-oe*ge),Fe=P*St,z=splitter*P,oe=z-(z-P),se=P-oe,z=splitter*St,ae=z-(z-St),ge=St-ae,ye=se*ge-(Fe-oe*ae-se*ae-oe*ge),pe=Re-ye,K=Re-pe,u[0]=Re-(pe+K)+(K-ye),he=be+pe,K=he-be,ve=be-(he-K)+(pe-K),pe=ve-Fe,K=ve-pe,u[1]=ve-(pe+K)+(K-Fe),Ue=he+pe,K=Ue-he,u[2]=he-(Ue-K)+(pe-K),u[3]=Ue;const qt=sum$1(4,B,4,u,C1);be=It*J,z=splitter*It,oe=z-(z-It),se=It-oe,z=splitter*J,ae=z-(z-J),ge=J-ae,Re=se*ge-(be-oe*ae-se*ae-oe*ge),Fe=At*H,z=splitter*At,oe=z-(z-At),se=At-oe,z=splitter*H,ae=z-(z-H),ge=H-ae,ye=se*ge-(Fe-oe*ae-se*ae-oe*ge),pe=Re-ye,K=Re-pe,u[0]=Re-(pe+K)+(K-ye),he=be+pe,K=he-be,ve=be-(he-K)+(pe-K),pe=ve-Fe,K=ve-pe,u[1]=ve-(pe+K)+(K-Fe),Ue=he+pe,K=Ue-he,u[2]=he-(Ue-K)+(pe-K),u[3]=Ue;const Jn=sum$1(qt,C1,4,u,C2);be=M*J,z=splitter*M,oe=z-(z-M),se=M-oe,z=splitter*J,ae=z-(z-J),ge=J-ae,Re=se*ge-(be-oe*ae-se*ae-oe*ge),Fe=P*H,z=splitter*P,oe=z-(z-P),se=P-oe,z=splitter*H,ae=z-(z-H),ge=H-ae,ye=se*ge-(Fe-oe*ae-se*ae-oe*ge),pe=Re-ye,K=Re-pe,u[0]=Re-(pe+K)+(K-ye),he=be+pe,K=he-be,ve=be-(he-K)+(pe-K),pe=ve-Fe,K=ve-pe,u[1]=ve-(pe+K)+(K-Fe),Ue=he+pe,K=Ue-he,u[2]=he-(Ue-K)+(pe-K),u[3]=Ue;const qr=sum$1(Jn,C2,4,u,D$1);return D$1[qr-1]}function orient2d(f,s,d,_,S,T){const F=(s-T)*(d-S),M=(f-S)*(_-T),P=F-M,H=Math.abs(F+M);return Math.abs(P)>=ccwerrboundA*H?P:-orient2dadapt(f,s,d,_,S,T,H)}var define_process_env_default={};const isInBbox=(f,s)=>f.ll.x<=s.x&&s.x<=f.ur.x&&f.ll.y<=s.y&&s.y<=f.ur.y,getBboxOverlap=(f,s)=>{if(s.ur.x<f.ll.x||f.ur.x<s.ll.x||s.ur.y<f.ll.y||f.ur.y<s.ll.y)return null;const d=f.ll.x<s.ll.x?s.ll.x:f.ll.x,_=f.ur.x<s.ur.x?f.ur.x:s.ur.x,S=f.ll.y<s.ll.y?s.ll.y:f.ll.y,T=f.ur.y<s.ur.y?f.ur.y:s.ur.y;return{ll:{x:d,y:S},ur:{x:_,y:T}}};let epsilon$3=Number.EPSILON;epsilon$3===void 0&&(epsilon$3=Math.pow(2,-52));const EPSILON_SQ=epsilon$3*epsilon$3,cmp=(f,s)=>{if(-epsilon$3<f&&f<epsilon$3&&-epsilon$3<s&&s<epsilon$3)return 0;const d=f-s;return d*d<EPSILON_SQ*f*s?0:f<s?-1:1};class PtRounder{constructor(){this.reset()}reset(){this.xRounder=new CoordRounder,this.yRounder=new CoordRounder}round(s,d){return{x:this.xRounder.round(s),y:this.yRounder.round(d)}}}class CoordRounder{constructor(){this.tree=new Tree,this.round(0)}round(s){const d=this.tree.add(s),_=this.tree.prev(d);if(_!==null&&cmp(d.key,_.key)===0)return this.tree.remove(s),_.key;const S=this.tree.next(d);return S!==null&&cmp(d.key,S.key)===0?(this.tree.remove(s),S.key):s}}const rounder=new PtRounder,crossProduct=(f,s)=>f.x*s.y-f.y*s.x,dotProduct=(f,s)=>f.x*s.x+f.y*s.y,compareVectorAngles=(f,s,d)=>{const _=orient2d(f.x,f.y,s.x,s.y,d.x,d.y);return _>0?-1:_<0?1:0},length=f=>Math.sqrt(dotProduct(f,f)),sineOfAngle=(f,s,d)=>{const _={x:s.x-f.x,y:s.y-f.y},S={x:d.x-f.x,y:d.y-f.y};return crossProduct(S,_)/length(S)/length(_)},cosineOfAngle=(f,s,d)=>{const _={x:s.x-f.x,y:s.y-f.y},S={x:d.x-f.x,y:d.y-f.y};return dotProduct(S,_)/length(S)/length(_)},horizontalIntersection=(f,s,d)=>s.y===0?null:{x:f.x+s.x/s.y*(d-f.y),y:d},verticalIntersection=(f,s,d)=>s.x===0?null:{x:d,y:f.y+s.y/s.x*(d-f.x)},intersection$1=(f,s,d,_)=>{if(s.x===0)return verticalIntersection(d,_,f.x);if(_.x===0)return verticalIntersection(f,s,d.x);if(s.y===0)return horizontalIntersection(d,_,f.y);if(_.y===0)return horizontalIntersection(f,s,d.y);const S=crossProduct(s,_);if(S==0)return null;const T={x:d.x-f.x,y:d.y-f.y},F=crossProduct(T,s)/S,M=crossProduct(T,_)/S,P=f.x+M*s.x,H=d.x+F*_.x,J=f.y+M*s.y,K=d.y+F*_.y,z=(P+H)/2,oe=(J+K)/2;return{x:z,y:oe}};class SweepEvent{static compare(s,d){const _=SweepEvent.comparePoints(s.point,d.point);return _!==0?_:(s.point!==d.point&&s.link(d),s.isLeft!==d.isLeft?s.isLeft?1:-1:Segment.compare(s.segment,d.segment))}static comparePoints(s,d){return s.x<d.x?-1:s.x>d.x?1:s.y<d.y?-1:s.y>d.y?1:0}constructor(s,d){s.events===void 0?s.events=[this]:s.events.push(this),this.point=s,this.isLeft=d}link(s){if(s.point===this.point)throw new Error("Tried to link already linked events");const d=s.point.events;for(let _=0,S=d.length;_<S;_++){const T=d[_];this.point.events.push(T),T.point=this.point}this.checkForConsuming()}checkForConsuming(){const s=this.point.events.length;for(let d=0;d<s;d++){const _=this.point.events[d];if(_.segment.consumedBy===void 0)for(let S=d+1;S<s;S++){const T=this.point.events[S];T.consumedBy===void 0&&_.otherSE.point.events===T.otherSE.point.events&&_.segment.consume(T.segment)}}}getAvailableLinkedEvents(){const s=[];for(let d=0,_=this.point.events.length;d<_;d++){const S=this.point.events[d];S!==this&&!S.segment.ringOut&&S.segment.isInResult()&&s.push(S)}return s}getLeftmostComparator(s){const d=new Map,_=S=>{const T=S.otherSE;d.set(S,{sine:sineOfAngle(this.point,s.point,T.point),cosine:cosineOfAngle(this.point,s.point,T.point)})};return(S,T)=>{d.has(S)||_(S),d.has(T)||_(T);const{sine:F,cosine:M}=d.get(S),{sine:P,cosine:H}=d.get(T);return F>=0&&P>=0?M<H?1:M>H?-1:0:F<0&&P<0?M<H?-1:M>H?1:0:P<F?-1:P>F?1:0}}}let segmentId=0;class Segment{static compare(s,d){const _=s.leftSE.point.x,S=d.leftSE.point.x,T=s.rightSE.point.x,F=d.rightSE.point.x;if(F<_)return 1;if(T<S)return-1;const M=s.leftSE.point.y,P=d.leftSE.point.y,H=s.rightSE.point.y,J=d.rightSE.point.y;if(_<S){if(P<M&&P<H)return 1;if(P>M&&P>H)return-1;const K=s.comparePoint(d.leftSE.point);if(K<0)return 1;if(K>0)return-1;const z=d.comparePoint(s.rightSE.point);return z!==0?z:-1}if(_>S){if(M<P&&M<J)return-1;if(M>P&&M>J)return 1;const K=d.comparePoint(s.leftSE.point);if(K!==0)return K;const z=s.comparePoint(d.rightSE.point);return z<0?1:z>0?-1:1}if(M<P)return-1;if(M>P)return 1;if(T<F){const K=d.comparePoint(s.rightSE.point);if(K!==0)return K}if(T>F){const K=s.comparePoint(d.rightSE.point);if(K<0)return 1;if(K>0)return-1}if(T!==F){const K=H-M,z=T-_,oe=J-P,se=F-S;if(K>z&&oe<se)return 1;if(K<z&&oe>se)return-1}return T>F?1:T<F||H<J?-1:H>J?1:s.id<d.id?-1:s.id>d.id?1:0}constructor(s,d,_,S){this.id=++segmentId,this.leftSE=s,s.segment=this,s.otherSE=d,this.rightSE=d,d.segment=this,d.otherSE=s,this.rings=_,this.windings=S}static fromRing(s,d,_){let S,T,F;const M=SweepEvent.comparePoints(s,d);if(M<0)S=s,T=d,F=1;else if(M>0)S=d,T=s,F=-1;else throw new Error(`Tried to create degenerate segment at [${s.x}, ${s.y}]`);const P=new SweepEvent(S,!0),H=new SweepEvent(T,!1);return new Segment(P,H,[_],[F])}replaceRightSE(s){this.rightSE=s,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const s=this.leftSE.point.y,d=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:s<d?s:d},ur:{x:this.rightSE.point.x,y:s>d?s:d}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(s){return s.x===this.leftSE.point.x&&s.y===this.leftSE.point.y||s.x===this.rightSE.point.x&&s.y===this.rightSE.point.y}comparePoint(s){if(this.isAnEndpoint(s))return 0;const d=this.leftSE.point,_=this.rightSE.point,S=this.vector();if(d.x===_.x)return s.x===d.x?0:s.x<d.x?1:-1;const T=(s.y-d.y)/S.y,F=d.x+T*S.x;if(s.x===F)return 0;const M=(s.x-d.x)/S.x,P=d.y+M*S.y;return s.y===P?0:s.y<P?-1:1}getIntersection(s){const d=this.bbox(),_=s.bbox(),S=getBboxOverlap(d,_);if(S===null)return null;const T=this.leftSE.point,F=this.rightSE.point,M=s.leftSE.point,P=s.rightSE.point,H=isInBbox(d,M)&&this.comparePoint(M)===0,J=isInBbox(_,T)&&s.comparePoint(T)===0,K=isInBbox(d,P)&&this.comparePoint(P)===0,z=isInBbox(_,F)&&s.comparePoint(F)===0;if(J&&H)return z&&!K?F:!z&&K?P:null;if(J)return K&&T.x===P.x&&T.y===P.y?null:T;if(H)return z&&F.x===M.x&&F.y===M.y?null:M;if(z&&K)return null;if(z)return F;if(K)return P;const oe=intersection$1(T,this.vector(),M,s.vector());return oe===null||!isInBbox(S,oe)?null:rounder.round(oe.x,oe.y)}split(s){const d=[],_=s.events!==void 0,S=new SweepEvent(s,!0),T=new SweepEvent(s,!1),F=this.rightSE;this.replaceRightSE(T),d.push(T),d.push(S);const M=new Segment(S,F,this.rings.slice(),this.windings.slice());return SweepEvent.comparePoints(M.leftSE.point,M.rightSE.point)>0&&M.swapEvents(),SweepEvent.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),_&&(S.checkForConsuming(),T.checkForConsuming()),d}swapEvents(){const s=this.rightSE;this.rightSE=this.leftSE,this.leftSE=s,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let d=0,_=this.windings.length;d<_;d++)this.windings[d]*=-1}consume(s){let d=this,_=s;for(;d.consumedBy;)d=d.consumedBy;for(;_.consumedBy;)_=_.consumedBy;const S=Segment.compare(d,_);if(S!==0){if(S>0){const T=d;d=_,_=T}if(d.prev===_){const T=d;d=_,_=T}for(let T=0,F=_.rings.length;T<F;T++){const M=_.rings[T],P=_.windings[T],H=d.rings.indexOf(M);H===-1?(d.rings.push(M),d.windings.push(P)):d.windings[H]+=P}_.rings=null,_.windings=null,_.consumedBy=d,_.leftSE.consumedBy=d.leftSE,_.rightSE.consumedBy=d.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const s=this.prev.consumedBy||this.prev;this._beforeState=s.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const s=this.beforeState();this._afterState={rings:s.rings.slice(0),windings:s.windings.slice(0),multiPolys:[]};const d=this._afterState.rings,_=this._afterState.windings,S=this._afterState.multiPolys;for(let M=0,P=this.rings.length;M<P;M++){const H=this.rings[M],J=this.windings[M],K=d.indexOf(H);K===-1?(d.push(H),_.push(J)):_[K]+=J}const T=[],F=[];for(let M=0,P=d.length;M<P;M++){if(_[M]===0)continue;const H=d[M],J=H.poly;if(F.indexOf(J)===-1)if(H.isExterior)T.push(J);else{F.indexOf(J)===-1&&F.push(J);const K=T.indexOf(H.poly);K!==-1&&T.splice(K,1)}}for(let M=0,P=T.length;M<P;M++){const H=T[M].multiPoly;S.indexOf(H)===-1&&S.push(H)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const s=this.beforeState().multiPolys,d=this.afterState().multiPolys;switch(operation.type){case"union":{const _=s.length===0,S=d.length===0;this._isInResult=_!==S;break}case"intersection":{let _,S;s.length<d.length?(_=s.length,S=d.length):(_=d.length,S=s.length),this._isInResult=S===operation.numMultiPolys&&_<S;break}case"xor":{const _=Math.abs(s.length-d.length);this._isInResult=_%2===1;break}case"difference":{const _=S=>S.length===1&&S[0].isSubject;this._isInResult=_(s)!==_(d);break}default:throw new Error(`Unrecognized operation type found ${operation.type}`)}return this._isInResult}}class RingIn{constructor(s,d,_){if(!Array.isArray(s)||s.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=d,this.isExterior=_,this.segments=[],typeof s[0][0]!="number"||typeof s[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const S=rounder.round(s[0][0],s[0][1]);this.bbox={ll:{x:S.x,y:S.y},ur:{x:S.x,y:S.y}};let T=S;for(let F=1,M=s.length;F<M;F++){if(typeof s[F][0]!="number"||typeof s[F][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let P=rounder.round(s[F][0],s[F][1]);P.x===T.x&&P.y===T.y||(this.segments.push(Segment.fromRing(T,P,this)),P.x<this.bbox.ll.x&&(this.bbox.ll.x=P.x),P.y<this.bbox.ll.y&&(this.bbox.ll.y=P.y),P.x>this.bbox.ur.x&&(this.bbox.ur.x=P.x),P.y>this.bbox.ur.y&&(this.bbox.ur.y=P.y),T=P)}(S.x!==T.x||S.y!==T.y)&&this.segments.push(Segment.fromRing(T,S,this))}getSweepEvents(){const s=[];for(let d=0,_=this.segments.length;d<_;d++){const S=this.segments[d];s.push(S.leftSE),s.push(S.rightSE)}return s}}class PolyIn{constructor(s,d){if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new RingIn(s[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,S=s.length;_<S;_++){const T=new RingIn(s[_],this,!1);T.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=T.bbox.ll.x),T.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=T.bbox.ll.y),T.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=T.bbox.ur.x),T.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=T.bbox.ur.y),this.interiorRings.push(T)}this.multiPoly=d}getSweepEvents(){const s=this.exteriorRing.getSweepEvents();for(let d=0,_=this.interiorRings.length;d<_;d++){const S=this.interiorRings[d].getSweepEvents();for(let T=0,F=S.length;T<F;T++)s.push(S[T])}return s}}class MultiPolyIn{constructor(s,d){if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof s[0][0][0]=="number"&&(s=[s])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let _=0,S=s.length;_<S;_++){const T=new PolyIn(s[_],this);T.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=T.bbox.ll.x),T.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=T.bbox.ll.y),T.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=T.bbox.ur.x),T.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=T.bbox.ur.y),this.polys.push(T)}this.isSubject=d}getSweepEvents(){const s=[];for(let d=0,_=this.polys.length;d<_;d++){const S=this.polys[d].getSweepEvents();for(let T=0,F=S.length;T<F;T++)s.push(S[T])}return s}}class RingOut{static factory(s){const d=[];for(let _=0,S=s.length;_<S;_++){const T=s[_];if(!T.isInResult()||T.ringOut)continue;let F=null,M=T.leftSE,P=T.rightSE;const H=[M],J=M.point,K=[];for(;F=M,M=P,H.push(M),M.point!==J;)for(;;){const z=M.getAvailableLinkedEvents();if(z.length===0){const ae=H[0].point,ge=H[H.length-1].point;throw new Error(`Unable to complete output ring starting at [${ae.x}, ${ae.y}]. Last matching segment found ends at [${ge.x}, ${ge.y}].`)}if(z.length===1){P=z[0].otherSE;break}let oe=null;for(let ae=0,ge=K.length;ae<ge;ae++)if(K[ae].point===M.point){oe=ae;break}if(oe!==null){const ae=K.splice(oe)[0],ge=H.splice(ae.index);ge.unshift(ge[0].otherSE),d.push(new RingOut(ge.reverse()));continue}K.push({index:H.length,point:M.point});const se=M.getLeftmostComparator(F);P=z.sort(se)[0].otherSE;break}d.push(new RingOut(H))}return d}constructor(s){this.events=s;for(let d=0,_=s.length;d<_;d++)s[d].segment.ringOut=this;this.poly=null}getGeom(){let s=this.events[0].point;const d=[s];for(let H=1,J=this.events.length-1;H<J;H++){const K=this.events[H].point,z=this.events[H+1].point;compareVectorAngles(K,s,z)!==0&&(d.push(K),s=K)}if(d.length===1)return null;const _=d[0],S=d[1];compareVectorAngles(_,s,S)===0&&d.shift(),d.push(d[0]);const T=this.isExteriorRing()?1:-1,F=this.isExteriorRing()?0:d.length-1,M=this.isExteriorRing()?d.length:-1,P=[];for(let H=F;H!=M;H+=T)P.push([d[H].x,d[H].y]);return P}isExteriorRing(){if(this._isExteriorRing===void 0){const s=this.enclosingRing();this._isExteriorRing=s?!s.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let s=this.events[0];for(let S=1,T=this.events.length;S<T;S++){const F=this.events[S];SweepEvent.compare(s,F)>0&&(s=F)}let d=s.segment.prevInResult(),_=d?d.prevInResult():null;for(;;){if(!d)return null;if(!_)return d.ringOut;if(_.ringOut!==d.ringOut)return _.ringOut.enclosingRing()!==d.ringOut?d.ringOut:d.ringOut.enclosingRing();d=_.prevInResult(),_=d?d.prevInResult():null}}}class PolyOut{constructor(s){this.exteriorRing=s,s.poly=this,this.interiorRings=[]}addInterior(s){this.interiorRings.push(s),s.poly=this}getGeom(){const s=[this.exteriorRing.getGeom()];if(s[0]===null)return null;for(let d=0,_=this.interiorRings.length;d<_;d++){const S=this.interiorRings[d].getGeom();S!==null&&s.push(S)}return s}}class MultiPolyOut{constructor(s){this.rings=s,this.polys=this._composePolys(s)}getGeom(){const s=[];for(let d=0,_=this.polys.length;d<_;d++){const S=this.polys[d].getGeom();S!==null&&s.push(S)}return s}_composePolys(s){const d=[];for(let _=0,S=s.length;_<S;_++){const T=s[_];if(!T.poly)if(T.isExteriorRing())d.push(new PolyOut(T));else{const F=T.enclosingRing();F.poly||d.push(new PolyOut(F)),F.poly.addInterior(T)}}return d}}class SweepLine{constructor(s){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Segment.compare;this.queue=s,this.tree=new Tree(d),this.segments=[]}process(s){const d=s.segment,_=[];if(s.consumedBy)return s.isLeft?this.queue.remove(s.otherSE):this.tree.remove(d),_;const S=s.isLeft?this.tree.add(d):this.tree.find(d);if(!S)throw new Error(`Unable to find segment #${d.id} [${d.leftSE.point.x}, ${d.leftSE.point.y}] -> [${d.rightSE.point.x}, ${d.rightSE.point.y}] in SweepLine tree.`);let T=S,F=S,M,P;for(;M===void 0;)T=this.tree.prev(T),T===null?M=null:T.key.consumedBy===void 0&&(M=T.key);for(;P===void 0;)F=this.tree.next(F),F===null?P=null:F.key.consumedBy===void 0&&(P=F.key);if(s.isLeft){let H=null;if(M){const K=M.getIntersection(d);if(K!==null&&(d.isAnEndpoint(K)||(H=K),!M.isAnEndpoint(K))){const z=this._splitSafely(M,K);for(let oe=0,se=z.length;oe<se;oe++)_.push(z[oe])}}let J=null;if(P){const K=P.getIntersection(d);if(K!==null&&(d.isAnEndpoint(K)||(J=K),!P.isAnEndpoint(K))){const z=this._splitSafely(P,K);for(let oe=0,se=z.length;oe<se;oe++)_.push(z[oe])}}if(H!==null||J!==null){let K=null;H===null?K=J:J===null?K=H:K=SweepEvent.comparePoints(H,J)<=0?H:J,this.queue.remove(d.rightSE),_.push(d.rightSE);const z=d.split(K);for(let oe=0,se=z.length;oe<se;oe++)_.push(z[oe])}_.length>0?(this.tree.remove(d),_.push(s)):(this.segments.push(d),d.prev=M)}else{if(M&&P){const H=M.getIntersection(P);if(H!==null){if(!M.isAnEndpoint(H)){const J=this._splitSafely(M,H);for(let K=0,z=J.length;K<z;K++)_.push(J[K])}if(!P.isAnEndpoint(H)){const J=this._splitSafely(P,H);for(let K=0,z=J.length;K<z;K++)_.push(J[K])}}}this.tree.remove(d)}return _}_splitSafely(s,d){this.tree.remove(s);const _=s.rightSE;this.queue.remove(_);const S=s.split(d);return S.push(_),s.consumedBy===void 0&&this.tree.add(s),S}}const POLYGON_CLIPPING_MAX_QUEUE_SIZE=typeof process<"u"&&define_process_env_default.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS=typeof process<"u"&&define_process_env_default.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Operation{run(s,d,_){operation.type=s,rounder.reset();const S=[new MultiPolyIn(d,!0)];for(let K=0,z=_.length;K<z;K++)S.push(new MultiPolyIn(_[K],!1));if(operation.numMultiPolys=S.length,operation.type==="difference"){const K=S[0];let z=1;for(;z<S.length;)getBboxOverlap(S[z].bbox,K.bbox)!==null?z++:S.splice(z,1)}if(operation.type==="intersection")for(let K=0,z=S.length;K<z;K++){const oe=S[K];for(let se=K+1,ae=S.length;se<ae;se++)if(getBboxOverlap(oe.bbox,S[se].bbox)===null)return[]}const T=new Tree(SweepEvent.compare);for(let K=0,z=S.length;K<z;K++){const oe=S[K].getSweepEvents();for(let se=0,ae=oe.length;se<ae;se++)if(T.insert(oe[se]),T.size>POLYGON_CLIPPING_MAX_QUEUE_SIZE)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const F=new SweepLine(T);let M=T.size,P=T.pop();for(;P;){const K=P.key;if(T.size===M){const oe=K.segment;throw new Error(`Unable to pop() ${K.isLeft?"left":"right"} SweepEvent [${K.point.x}, ${K.point.y}] from segment #${oe.id} [${oe.leftSE.point.x}, ${oe.leftSE.point.y}] -> [${oe.rightSE.point.x}, ${oe.rightSE.point.y}] from queue.`)}if(T.size>POLYGON_CLIPPING_MAX_QUEUE_SIZE)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(F.segments.length>POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const z=F.process(K);for(let oe=0,se=z.length;oe<se;oe++){const ae=z[oe];ae.consumedBy===void 0&&T.insert(ae)}M=T.size,P=T.pop()}rounder.reset();const H=RingOut.factory(F.segments);return new MultiPolyOut(H).getGeom()}}const operation=new Operation,union$1=function(f){for(var s=arguments.length,d=new Array(s>1?s-1:0),_=1;_<s;_++)d[_-1]=arguments[_];return operation.run("union",f,d)},intersection=function(f){for(var s=arguments.length,d=new Array(s>1?s-1:0),_=1;_<s;_++)d[_-1]=arguments[_];return operation.run("intersection",f,d)},xor=function(f){for(var s=arguments.length,d=new Array(s>1?s-1:0),_=1;_<s;_++)d[_-1]=arguments[_];return operation.run("xor",f,d)},difference$1=function(f){for(var s=arguments.length,d=new Array(s>1?s-1:0),_=1;_<s;_++)d[_-1]=arguments[_];return operation.run("difference",f,d)};var index$1={union:union$1,intersection,xor,difference:difference$1};function feature$e(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function polygon$4(f,s,d){d===void 0&&(d={});for(var _=0,S=f;_<S.length;_++){var T=S[_];if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<T[T.length-1].length;F++)if(T[T.length-1][F]!==T[0][F])throw new Error("First and last Position are not equivalent.")}var M={type:"Polygon",coordinates:f};return feature$e(M,s,d)}function multiPolygon$2(f,s,d){d===void 0&&(d={});var _={type:"MultiPolygon",coordinates:f};return feature$e(_,s,d)}function getGeom$6(f){return f.type==="Feature"?f.geometry:f}function difference(f,s){var d=getGeom$6(f),_=getGeom$6(s),S=f.properties||{},T=index$1.difference(d.coordinates,_.coordinates);return T.length===0?null:T.length===1?polygon$4(T[0],S):multiPolygon$2(T,S)}var earthRadius$4=63710088e-1,factors$4={centimeters:earthRadius$4*100,centimetres:earthRadius$4*100,degrees:earthRadius$4/111325,feet:earthRadius$4*3.28084,inches:earthRadius$4*39.37,kilometers:earthRadius$4/1e3,kilometres:earthRadius$4/1e3,meters:earthRadius$4,metres:earthRadius$4,miles:earthRadius$4/1609.344,millimeters:earthRadius$4*1e3,millimetres:earthRadius$4*1e3,nauticalmiles:earthRadius$4/1852,radians:1,yards:earthRadius$4*1.0936};function radiansToLength$3(f,s){s===void 0&&(s="kilometers");var d=factors$4[s];if(!d)throw new Error(s+" units is invalid");return f*d}function degreesToRadians$5(f){var s=f%360;return s*Math.PI/180}function getCoord$9(f){if(!f)throw new Error("coord is required");if(!Array.isArray(f)){if(f.type==="Feature"&&f.geometry!==null&&f.geometry.type==="Point")return f.geometry.coordinates;if(f.type==="Point")return f.coordinates}if(Array.isArray(f)&&f.length>=2&&!Array.isArray(f[0])&&!Array.isArray(f[1]))return f;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function distance(f,s,d){d===void 0&&(d={});var _=getCoord$9(f),S=getCoord$9(s),T=degreesToRadians$5(S[1]-_[1]),F=degreesToRadians$5(S[0]-_[0]),M=degreesToRadians$5(_[1]),P=degreesToRadians$5(S[1]),H=Math.pow(Math.sin(T/2),2)+Math.pow(Math.sin(F/2),2)*Math.cos(M)*Math.cos(P);return radiansToLength$3(2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H)),d.units)}var eventemitter3={exports:{}};(function(f){var s=Object.prototype.hasOwnProperty,d="~";function _(){}Object.create&&(_.prototype=Object.create(null),new _().__proto__||(d=!1));function S(P,H,J){this.fn=P,this.context=H,this.once=J||!1}function T(P,H,J,K,z){if(typeof J!="function")throw new TypeError("The listener must be a function");var oe=new S(J,K||P,z),se=d?d+H:H;return P._events[se]?P._events[se].fn?P._events[se]=[P._events[se],oe]:P._events[se].push(oe):(P._events[se]=oe,P._eventsCount++),P}function F(P,H){--P._eventsCount===0?P._events=new _:delete P._events[H]}function M(){this._events=new _,this._eventsCount=0}M.prototype.eventNames=function(){var H=[],J,K;if(this._eventsCount===0)return H;for(K in J=this._events)s.call(J,K)&&H.push(d?K.slice(1):K);return Object.getOwnPropertySymbols?H.concat(Object.getOwnPropertySymbols(J)):H},M.prototype.listeners=function(H){var J=d?d+H:H,K=this._events[J];if(!K)return[];if(K.fn)return[K.fn];for(var z=0,oe=K.length,se=new Array(oe);z<oe;z++)se[z]=K[z].fn;return se},M.prototype.listenerCount=function(H){var J=d?d+H:H,K=this._events[J];return K?K.fn?1:K.length:0},M.prototype.emit=function(H,J,K,z,oe,se){var ae=d?d+H:H;if(!this._events[ae])return!1;var ge=this._events[ae],pe=arguments.length,he,ve;if(ge.fn){switch(ge.once&&this.removeListener(H,ge.fn,void 0,!0),pe){case 1:return ge.fn.call(ge.context),!0;case 2:return ge.fn.call(ge.context,J),!0;case 3:return ge.fn.call(ge.context,J,K),!0;case 4:return ge.fn.call(ge.context,J,K,z),!0;case 5:return ge.fn.call(ge.context,J,K,z,oe),!0;case 6:return ge.fn.call(ge.context,J,K,z,oe,se),!0}for(ve=1,he=new Array(pe-1);ve<pe;ve++)he[ve-1]=arguments[ve];ge.fn.apply(ge.context,he)}else{var be=ge.length,Re;for(ve=0;ve<be;ve++)switch(ge[ve].once&&this.removeListener(H,ge[ve].fn,void 0,!0),pe){case 1:ge[ve].fn.call(ge[ve].context);break;case 2:ge[ve].fn.call(ge[ve].context,J);break;case 3:ge[ve].fn.call(ge[ve].context,J,K);break;case 4:ge[ve].fn.call(ge[ve].context,J,K,z);break;default:if(!he)for(Re=1,he=new Array(pe-1);Re<pe;Re++)he[Re-1]=arguments[Re];ge[ve].fn.apply(ge[ve].context,he)}}return!0},M.prototype.on=function(H,J,K){return T(this,H,J,K,!1)},M.prototype.once=function(H,J,K){return T(this,H,J,K,!0)},M.prototype.removeListener=function(H,J,K,z){var oe=d?d+H:H;if(!this._events[oe])return this;if(!J)return F(this,oe),this;var se=this._events[oe];if(se.fn)se.fn===J&&(!z||se.once)&&(!K||se.context===K)&&F(this,oe);else{for(var ae=0,ge=[],pe=se.length;ae<pe;ae++)(se[ae].fn!==J||z&&!se[ae].once||K&&se[ae].context!==K)&&ge.push(se[ae]);ge.length?this._events[oe]=ge.length===1?ge[0]:ge:F(this,oe)}return this},M.prototype.removeAllListeners=function(H){var J;return H?(J=d?d+H:H,this._events[J]&&F(this,J)):(this._events=new _,this._eventsCount=0),this},M.prototype.off=M.prototype.removeListener,M.prototype.addListener=M.prototype.on,M.prefixed=d,M.EventEmitter=M,f.exports=M})(eventemitter3);var earthRadius$3=63710088e-1,factors$3={centimeters:earthRadius$3*100,centimetres:earthRadius$3*100,degrees:earthRadius$3/111325,feet:earthRadius$3*3.28084,inches:earthRadius$3*39.37,kilometers:earthRadius$3/1e3,kilometres:earthRadius$3/1e3,meters:earthRadius$3,metres:earthRadius$3,miles:earthRadius$3/1609.344,millimeters:earthRadius$3*1e3,millimetres:earthRadius$3*1e3,nauticalmiles:earthRadius$3/1852,radians:1,yards:earthRadius$3*1.0936};function feature$d(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function point$8(f,s,d){if(d===void 0&&(d={}),!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$9(f[0])||!isNumber$9(f[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:f};return feature$d(_,s,d)}function lengthToRadians$3(f,s){s===void 0&&(s="kilometers");var d=factors$3[s];if(!d)throw new Error(s+" units is invalid");return f/d}function radiansToDegrees$2(f){var s=f%(2*Math.PI);return s*180/Math.PI}function degreesToRadians$4(f){var s=f%360;return s*Math.PI/180}function isNumber$9(f){return!isNaN(f)&&f!==null&&!Array.isArray(f)}function getCoord$8(f){if(!f)throw new Error("coord is required");if(!Array.isArray(f)){if(f.type==="Feature"&&f.geometry!==null&&f.geometry.type==="Point")return f.geometry.coordinates;if(f.type==="Point")return f.coordinates}if(Array.isArray(f)&&f.length>=2&&!Array.isArray(f[0])&&!Array.isArray(f[1]))return f;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function destination(f,s,d,_){_===void 0&&(_={});var S=getCoord$8(f),T=degreesToRadians$4(S[0]),F=degreesToRadians$4(S[1]),M=degreesToRadians$4(d),P=lengthToRadians$3(s,_.units),H=Math.asin(Math.sin(F)*Math.cos(P)+Math.cos(F)*Math.sin(P)*Math.cos(M)),J=T+Math.atan2(Math.sin(M)*Math.sin(P)*Math.cos(F),Math.cos(P)-Math.sin(F)*Math.sin(H)),K=radiansToDegrees$2(J),z=radiansToDegrees$2(H);return point$8([K,z],_.properties)}function radiansToDegrees$1(f){var s=f%(2*Math.PI);return s*180/Math.PI}function degreesToRadians$3(f){var s=f%360;return s*Math.PI/180}function getCoord$7(f){if(!f)throw new Error("coord is required");if(!Array.isArray(f)){if(f.type==="Feature"&&f.geometry!==null&&f.geometry.type==="Point")return f.geometry.coordinates;if(f.type==="Point")return f.coordinates}if(Array.isArray(f)&&f.length>=2&&!Array.isArray(f[0])&&!Array.isArray(f[1]))return f;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function bearing(f,s,d){if(d===void 0&&(d={}),d.final===!0)return calculateFinalBearing(f,s);var _=getCoord$7(f),S=getCoord$7(s),T=degreesToRadians$3(_[0]),F=degreesToRadians$3(S[0]),M=degreesToRadians$3(_[1]),P=degreesToRadians$3(S[1]),H=Math.sin(F-T)*Math.cos(P),J=Math.cos(M)*Math.sin(P)-Math.sin(M)*Math.cos(P)*Math.cos(F-T);return radiansToDegrees$1(Math.atan2(H,J))}function calculateFinalBearing(f,s){var d=bearing(s,f);return d=(d+180)%360,d}var earthRadius$2=63710088e-1,factors$2={centimeters:earthRadius$2*100,centimetres:earthRadius$2*100,degrees:earthRadius$2/111325,feet:earthRadius$2*3.28084,inches:earthRadius$2*39.37,kilometers:earthRadius$2/1e3,kilometres:earthRadius$2/1e3,meters:earthRadius$2,metres:earthRadius$2,miles:earthRadius$2/1609.344,millimeters:earthRadius$2*1e3,millimetres:earthRadius$2*1e3,nauticalmiles:earthRadius$2/1852,radians:1,yards:earthRadius$2*1.0936};function feature$c(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function point$7(f,s,d){if(d===void 0&&(d={}),!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$8(f[0])||!isNumber$8(f[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:f};return feature$c(_,s,d)}function lineString$3(f,s,d){if(d===void 0&&(d={}),f.length<2)throw new Error("coordinates must be an array of two or more positions");var _={type:"LineString",coordinates:f};return feature$c(_,s,d)}function radiansToLength$2(f,s){s===void 0&&(s="kilometers");var d=factors$2[s];if(!d)throw new Error(s+" units is invalid");return f*d}function lengthToRadians$2(f,s){var d=factors$2[s];return f/d}function convertLength$2(f,s,d){if(d===void 0&&(d="kilometers"),!(f>=0))throw new Error("length must be a positive number");return radiansToLength$2(lengthToRadians$2(f,s),d)}function isNumber$8(f){return!isNaN(f)&&f!==null&&!Array.isArray(f)}function featureOf(f,s,d){if(!f)throw new Error("No feature passed");if(!d)throw new Error(".featureOf() requires a name");if(!f||f.type!=="Feature"||!f.geometry)throw new Error("Invalid input to "+d+", Feature with geometry required");if(!f.geometry||f.geometry.type!==s)throw new Error("Invalid input to "+d+": must be a "+s+", given "+f.geometry.type)}function coordEach$5(f,s,d){if(f!==null)for(var _,S,T,F,M,P,H,J=0,K=0,z,oe=f.type,se=oe==="FeatureCollection",ae=oe==="Feature",ge=se?f.features.length:1,pe=0;pe<ge;pe++){H=se?f.features[pe].geometry:ae?f.geometry:f,z=H?H.type==="GeometryCollection":!1,M=z?H.geometries.length:1;for(var he=0;he<M;he++){var ve=0,be=0;if(F=z?H.geometries[he]:H,F!==null){P=F.coordinates;var Re=F.type;switch(J=0,Re){case null:break;case"Point":if(s(P,K,pe,ve,be)===!1)return!1;K++,ve++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,pe,ve,be)===!1)return!1;K++,Re==="MultiPoint"&&ve++}Re==="LineString"&&ve++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,pe,ve,be)===!1)return!1;K++}Re==="MultiLineString"&&ve++,Re==="Polygon"&&be++}Re==="Polygon"&&ve++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(be=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,pe,ve,be)===!1)return!1;K++}be++}ve++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach$5(F.geometries[_],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function geomEach$5(f,s){var d,_,S,T,F,M,P,H,J,K,z=0,oe=f.type==="FeatureCollection",se=f.type==="Feature",ae=oe?f.features.length:1;for(d=0;d<ae;d++){for(M=oe?f.features[d].geometry:se?f.geometry:f,H=oe?f.features[d].properties:se?f.properties:{},J=oe?f.features[d].bbox:se?f.bbox:void 0,K=oe?f.features[d].id:se?f.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,z,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,z,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],z,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}z++}}function flattenEach$4(f,s){geomEach$5(f,function(d,_,S,T,F){var M=d===null?null:d.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return s(feature$c(d,S,{bbox:T,id:F}),_,0)===!1?!1:void 0}var P;switch(M){case"MultiPoint":P="Point";break;case"MultiLineString":P="LineString";break;case"MultiPolygon":P="Polygon";break}for(var H=0;H<d.coordinates.length;H++){var J=d.coordinates[H],K={type:P,coordinates:J};if(s(feature$c(K,S),_,H)===!1)return!1}})}function segmentEach$1(f,s){flattenEach$4(f,function(d,_,S){var T=0;if(d.geometry){var F=d.geometry.type;if(!(F==="Point"||F==="MultiPoint")){var M,P=0,H=0,J=0;if(coordEach$5(d,function(K,z,oe,se,ae){if(M===void 0||_>P||se>H||ae>J){M=K,P=_,H=se,J=ae,T=0;return}var ge=lineString$3([M,K],d.properties);if(s(ge,_,S,ae,T)===!1)return!1;T++,M=K})===!1)return!1}}})}var earthRadius$1=63710088e-1,factors$1={centimeters:earthRadius$1*100,centimetres:earthRadius$1*100,degrees:earthRadius$1/111325,feet:earthRadius$1*3.28084,inches:earthRadius$1*39.37,kilometers:earthRadius$1/1e3,kilometres:earthRadius$1/1e3,meters:earthRadius$1,metres:earthRadius$1,miles:earthRadius$1/1609.344,millimeters:earthRadius$1*1e3,millimetres:earthRadius$1*1e3,nauticalmiles:earthRadius$1/1852,radians:1,yards:earthRadius$1*1.0936};function radiansToLength$1(f,s){s===void 0&&(s="kilometers");var d=factors$1[s];if(!d)throw new Error(s+" units is invalid");return f*d}function lengthToRadians$1(f,s){var d=factors$1[s];return f/d}function convertLength$1(f,s,d){if(d===void 0&&(d="kilometers"),!(f>=0))throw new Error("length must be a positive number");return radiansToLength$1(lengthToRadians$1(f,s),d)}function getCoord$6(f){if(!f)throw new Error("coord is required");if(!Array.isArray(f)){if(f.type==="Feature"&&f.geometry!==null&&f.geometry.type==="Point")return f.geometry.coordinates;if(f.type==="Point")return f.coordinates}if(Array.isArray(f)&&f.length>=2&&!Array.isArray(f[0])&&!Array.isArray(f[1]))return f;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function rhumbDistance(f,s,d){d===void 0&&(d={});var _=getCoord$6(f),S=getCoord$6(s);S[0]+=S[0]-_[0]>180?-360:_[0]-S[0]>180?360:0;var T=calculateRhumbDistance(_,S),F=convertLength$1(T,"meters",d.units);return F}function calculateRhumbDistance(f,s,d){d=d===void 0?earthRadius$1:Number(d);var _=d,S=f[1]*Math.PI/180,T=s[1]*Math.PI/180,F=T-S,M=Math.abs(s[0]-f[0])*Math.PI/180;M>Math.PI&&(M-=2*Math.PI);var P=Math.log(Math.tan(T/2+Math.PI/4)/Math.tan(S/2+Math.PI/4)),H=Math.abs(P)>1e-11?F/P:Math.cos(S),J=Math.sqrt(F*F+H*H*M*M),K=J*_;return K}function pointToLineDistance(f,s,d){if(d===void 0&&(d={}),d.method||(d.method="geodesic"),d.units||(d.units="kilometers"),!f)throw new Error("pt is required");if(Array.isArray(f)?f=point$7(f):f.type==="Point"?f=feature$c(f):featureOf(f,"Point","point"),!s)throw new Error("line is required");Array.isArray(s)?s=lineString$3(s):s.type==="LineString"?s=feature$c(s):featureOf(s,"LineString","line");var _=1/0,S=f.geometry.coordinates;return segmentEach$1(s,function(T){var F=T.geometry.coordinates[0],M=T.geometry.coordinates[1],P=distanceToSegment(S,F,M,d);P<_&&(_=P)}),convertLength$2(_,"degrees",d.units)}function distanceToSegment(f,s,d,_){var S=[d[0]-s[0],d[1]-s[1]],T=[f[0]-s[0],f[1]-s[1]],F=dot(T,S);if(F<=0)return calcDistance(f,s,{method:_.method,units:"degrees"});var M=dot(S,S);if(M<=F)return calcDistance(f,d,{method:_.method,units:"degrees"});var P=F/M,H=[s[0]+P*S[0],s[1]+P*S[1]];return calcDistance(f,H,{method:_.method,units:"degrees"})}function dot(f,s){return f[0]*s[0]+f[1]*s[1]}function calcDistance(f,s,d){return d.method==="planar"?rhumbDistance(f,s,d):distance(f,s,d)}function _defineProperty$2(f,s,d){return(s=toPropertyKey(s))in f?Object.defineProperty(f,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):f[s]=d,f}function createMat4(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function transformVector(f,s){const d=transformMat4([],s,f);return scale$1(d,d,1/d[3]),d}function clamp(f,s,d){return f<s?s:f>d?d:f}function ieLog2(f){return Math.log(f)*Math.LOG2E}const log2=Math.log2||ieLog2;function assert(f,s){if(!f)throw new Error(s||"@math.gl/web-mercator: assertion failed.")}const PI=Math.PI,PI_4=PI/4,DEGREES_TO_RADIANS$1=PI/180,RADIANS_TO_DEGREES=180/PI,TILE_SIZE=512,EARTH_CIRCUMFERENCE=4003e4,MAX_LATITUDE=85.051129,DEFAULT_ALTITUDE=1.5;function zoomToScale(f){return Math.pow(2,f)}function lngLatToWorld(f){const[s,d]=f;assert(Number.isFinite(s)),assert(Number.isFinite(d)&&d>=-90&&d<=90,"invalid latitude");const _=s*DEGREES_TO_RADIANS$1,S=d*DEGREES_TO_RADIANS$1,T=TILE_SIZE*(_+PI)/(2*PI),F=TILE_SIZE*(PI+Math.log(Math.tan(PI_4+S*.5)))/(2*PI);return[T,F]}function worldToLngLat(f){const[s,d]=f,_=s/TILE_SIZE*(2*PI)-PI,S=2*(Math.atan(Math.exp(d/TILE_SIZE*(2*PI)-PI))-PI_4);return[_*RADIANS_TO_DEGREES,S*RADIANS_TO_DEGREES]}function getDistanceScales(f){const{latitude:s,longitude:d,highPrecision:_=!1}=f;assert(Number.isFinite(s)&&Number.isFinite(d));const S=TILE_SIZE,T=Math.cos(s*DEGREES_TO_RADIANS$1),F=S/360,M=F/T,P=S/EARTH_CIRCUMFERENCE/T,H={unitsPerMeter:[P,P,P],metersPerUnit:[1/P,1/P,1/P],unitsPerDegree:[F,M,P],degreesPerUnit:[1/F,1/M,1/P]};if(_){const J=DEGREES_TO_RADIANS$1*Math.tan(s*DEGREES_TO_RADIANS$1)/T,K=F*J/2,z=S/EARTH_CIRCUMFERENCE*J,oe=z/M*P;H.unitsPerDegree2=[0,K,z],H.unitsPerMeter2=[oe,0,oe]}return H}function getViewMatrix(f){const{height:s,pitch:d,bearing:_,altitude:S,scale:T,center:F}=f,M=createMat4();translate$1(M,M,[0,0,-S]),rotateX(M,M,-d*DEGREES_TO_RADIANS$1),rotateZ(M,M,_*DEGREES_TO_RADIANS$1);const P=T/s;return scale$2(M,M,[P,P,P]),F&&translate$1(M,M,negate$1([],F)),M}function getProjectionParameters(f){const{width:s,height:d,altitude:_,pitch:S=0,offset:T,center:F,scale:M,nearZMultiplier:P=1,farZMultiplier:H=1}=f;let{fovy:J=altitudeToFovy(DEFAULT_ALTITUDE)}=f;_!==void 0&&(J=altitudeToFovy(_));const K=J*DEGREES_TO_RADIANS$1,z=S*DEGREES_TO_RADIANS$1,oe=fovyToAltitude(J);let se=oe;F&&(se+=F[2]*M/Math.cos(z)/d);const ae=K*(.5+(T?T[1]:0)/d),ge=Math.sin(ae)*se/Math.sin(clamp(Math.PI/2-z-ae,.01,Math.PI-.01)),pe=Math.sin(z)*ge+se,he=se*10,ve=Math.min(pe*H,he);return{fov:K,aspect:s/d,focalDistance:oe,near:P,far:ve}}function getProjectionMatrix(f){const{fov:s,aspect:d,near:_,far:S}=getProjectionParameters(f);return perspective([],s,d,_,S)}function altitudeToFovy(f){return 2*Math.atan(.5/f)*RADIANS_TO_DEGREES}function fovyToAltitude(f){return .5/Math.tan(.5*f*DEGREES_TO_RADIANS$1)}function worldToPixels(f,s){const[d,_,S=0]=f;return assert(Number.isFinite(d)&&Number.isFinite(_)&&Number.isFinite(S)),transformVector(s,[d,_,S,1])}function pixelsToWorld(f,s,d=0){const[_,S,T]=f;if(assert(Number.isFinite(_)&&Number.isFinite(S),"invalid pixel coordinate"),Number.isFinite(T))return transformVector(s,[_,S,T,1]);const F=transformVector(s,[_,S,0,1]),M=transformVector(s,[_,S,1,1]),P=F[2],H=M[2],J=P===H?0:((d||0)-P)/(H-P);return lerp([],F,M,J)}function fitBounds(f){const{width:s,height:d,bounds:_,minExtent:S=0,maxZoom:T=24,offset:F=[0,0]}=f,[[M,P],[H,J]]=_,K=getPaddingObject(f.padding),z=lngLatToWorld([M,clamp(J,-MAX_LATITUDE,MAX_LATITUDE)]),oe=lngLatToWorld([H,clamp(P,-MAX_LATITUDE,MAX_LATITUDE)]),se=[Math.max(Math.abs(oe[0]-z[0]),S),Math.max(Math.abs(oe[1]-z[1]),S)],ae=[s-K.left-K.right-Math.abs(F[0])*2,d-K.top-K.bottom-Math.abs(F[1])*2];assert(ae[0]>0&&ae[1]>0);const ge=ae[0]/se[0],pe=ae[1]/se[1],he=(K.right-K.left)/2/ge,ve=(K.top-K.bottom)/2/pe,be=[(oe[0]+z[0])/2+he,(oe[1]+z[1])/2+ve],Re=worldToLngLat(be),Fe=Math.min(T,log2(Math.abs(Math.min(ge,pe))));return assert(Number.isFinite(Fe)),{longitude:Re[0],latitude:Re[1],zoom:Fe}}function getPaddingObject(f=0){return typeof f=="number"?{top:f,bottom:f,left:f,right:f}:(assert(Number.isFinite(f.top)&&Number.isFinite(f.bottom)&&Number.isFinite(f.left)&&Number.isFinite(f.right)),f)}const DEGREES_TO_RADIANS=Math.PI/180;function getBounds(f,s=0){const{width:d,height:_,unproject:S}=f,T={targetZ:s},F=S([0,_],T),M=S([d,_],T);let P,H;const J=f.fovy?.5*f.fovy*DEGREES_TO_RADIANS:Math.atan(.5/f.altitude),K=(90-f.pitch)*DEGREES_TO_RADIANS;return J>K-.01?(P=unprojectOnFarPlane(f,0,s),H=unprojectOnFarPlane(f,d,s)):(P=S([0,0],T),H=S([d,0],T)),[F,M,H,P]}function unprojectOnFarPlane(f,s,d){const{pixelUnprojectionMatrix:_}=f,S=transformVector(_,[s,0,1,1]),T=transformVector(_,[s,f.height,1,1]),M=(d*f.distanceScales.unitsPerMeter[2]-S[2])/(T[2]-S[2]),P=lerp([],S,T,M),H=worldToLngLat(P);return H.push(d),H}class WebMercatorViewport{constructor(s={width:1,height:1}){_defineProperty$2(this,"latitude",void 0),_defineProperty$2(this,"longitude",void 0),_defineProperty$2(this,"zoom",void 0),_defineProperty$2(this,"pitch",void 0),_defineProperty$2(this,"bearing",void 0),_defineProperty$2(this,"altitude",void 0),_defineProperty$2(this,"fovy",void 0),_defineProperty$2(this,"meterOffset",void 0),_defineProperty$2(this,"center",void 0),_defineProperty$2(this,"width",void 0),_defineProperty$2(this,"height",void 0),_defineProperty$2(this,"scale",void 0),_defineProperty$2(this,"distanceScales",void 0),_defineProperty$2(this,"viewMatrix",void 0),_defineProperty$2(this,"projectionMatrix",void 0),_defineProperty$2(this,"viewProjectionMatrix",void 0),_defineProperty$2(this,"pixelProjectionMatrix",void 0),_defineProperty$2(this,"pixelUnprojectionMatrix",void 0),_defineProperty$2(this,"equals",pe=>pe instanceof WebMercatorViewport?pe.width===this.width&&pe.height===this.height&&equals(pe.projectionMatrix,this.projectionMatrix)&&equals(pe.viewMatrix,this.viewMatrix):!1),_defineProperty$2(this,"project",(pe,he={})=>{const{topLeft:ve=!0}=he,be=this.projectPosition(pe),Re=worldToPixels(be,this.pixelProjectionMatrix),[Fe,ye]=Re,Ue=ve?ye:this.height-ye;return pe.length===2?[Fe,Ue]:[Fe,Ue,Re[2]]}),_defineProperty$2(this,"unproject",(pe,he={})=>{const{topLeft:ve=!0,targetZ:be=void 0}=he,[Re,Fe,ye]=pe,Ue=ve?Fe:this.height-Fe,It=be&&be*this.distanceScales.unitsPerMeter[2],St=pixelsToWorld([Re,Ue,ye],this.pixelUnprojectionMatrix,It),[At,xt,Ct]=this.unprojectPosition(St);return Number.isFinite(ye)?[At,xt,Ct]:Number.isFinite(be)?[At,xt,be]:[At,xt]}),_defineProperty$2(this,"projectPosition",pe=>{const[he,ve]=lngLatToWorld(pe),be=(pe[2]||0)*this.distanceScales.unitsPerMeter[2];return[he,ve,be]}),_defineProperty$2(this,"unprojectPosition",pe=>{const[he,ve]=worldToLngLat(pe),be=(pe[2]||0)*this.distanceScales.metersPerUnit[2];return[he,ve,be]});let{width:d,height:_,altitude:S=null,fovy:T=null}=s;const{latitude:F=0,longitude:M=0,zoom:P=0,pitch:H=0,bearing:J=0,position:K=null,nearZMultiplier:z=.02,farZMultiplier:oe=1.01}=s;d=d||1,_=_||1,T===null&&S===null?(S=DEFAULT_ALTITUDE,T=altitudeToFovy(S)):T===null?T=altitudeToFovy(S):S===null&&(S=fovyToAltitude(T));const se=zoomToScale(P);S=Math.max(.75,S);const ae=getDistanceScales({longitude:M,latitude:F}),ge=lngLatToWorld([M,F]);ge.push(0),K&&add$3(ge,ge,mul([],K,ae.unitsPerMeter)),this.projectionMatrix=getProjectionMatrix({width:d,height:_,scale:se,center:ge,pitch:H,fovy:T,nearZMultiplier:z,farZMultiplier:oe}),this.viewMatrix=getViewMatrix({height:_,scale:se,center:ge,pitch:H,bearing:J,altitude:S}),this.width=d,this.height=_,this.scale=se,this.latitude=F,this.longitude=M,this.zoom=P,this.pitch=H,this.bearing=J,this.altitude=S,this.fovy=T,this.center=ge,this.meterOffset=K||[0,0,0],this.distanceScales=ae,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:s,height:d,projectionMatrix:_,viewMatrix:S}=this,T=createMat4();multiply$1(T,T,_),multiply$1(T,T,S),this.viewProjectionMatrix=T;const F=createMat4();scale$2(F,F,[s/2,-d/2,1]),translate$1(F,F,[1,-1,0]),multiply$1(F,F,T);const M=invert(createMat4(),F);if(!M)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=F,this.pixelUnprojectionMatrix=M}projectFlat(s){return lngLatToWorld(s)}unprojectFlat(s){return worldToLngLat(s)}getMapCenterByLngLatPosition({lngLat:s,pos:d}){const _=pixelsToWorld(d,this.pixelUnprojectionMatrix),S=lngLatToWorld(s),T=add$2([],S,negate([],_)),F=add$2([],this.center,T);return worldToLngLat(F)}fitBounds(s,d={}){const{width:_,height:S}=this,{longitude:T,latitude:F,zoom:M}=fitBounds(Object.assign({width:_,height:S,bounds:s},d));return new WebMercatorViewport({width:_,height:S,longitude:T,latitude:F,zoom:M})}getBounds(s){const d=this.getBoundingRegion(s),_=Math.min(...d.map(M=>M[0])),S=Math.max(...d.map(M=>M[0])),T=Math.min(...d.map(M=>M[1])),F=Math.max(...d.map(M=>M[1]));return[[_,T],[S,F]]}getBoundingRegion(s={}){return getBounds(this,s.z||0)}getLocationAtPoint({lngLat:s,pos:d}){return this.getMapCenterByLngLatPosition({lngLat:s,pos:d})}}function insertBefore(f,s,d){const _=f.indexOf(s);return _<0?f:f.slice(0,_)+d+f.slice(_)}class JunctionScatterplotLayer extends CompositeLayer{renderLayers(){const{id:s,getFillColor:d,getStrokeColor:_,getInnerRadius:S,updateTriggers:T}=this.props;return[new ScatterplotLayer({...this.props,id:`${s}-full`,data:this.props.data,getLineColor:_,updateTriggers:{...T,getStrokeColor:T.getStrokeColor}}),new ScatterplotLayer({...this.props,id:`${s}-inner`,data:this.props.data,getFillColor:d,getRadius:S,pickable:!1,updateTriggers:{...T,getFillColor:T.getFillColor,getRadius:T.getInnerRadius}})]}}Bt(JunctionScatterplotLayer,"layerName","JunctionScatterplotLayer"),Bt(JunctionScatterplotLayer,"defaultProps",{...ScatterplotLayer.defaultProps,getFillColor:s=>[0,0,0,255],getStrokeColor:s=>[255,255,255,255],getInnerRadius:s=>1});function feature$b(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function polygon$3(f,s,d){d===void 0&&(d={});for(var _=0,S=f;_<S.length;_++){var T=S[_];if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<T[T.length-1].length;F++)if(T[T.length-1][F]!==T[0][F])throw new Error("First and last Position are not equivalent.")}var M={type:"Polygon",coordinates:f};return feature$b(M,s,d)}function multiPolygon$1(f,s,d){d===void 0&&(d={});var _={type:"MultiPolygon",coordinates:f};return feature$b(_,s,d)}function getGeom$5(f){return f.type==="Feature"?f.geometry:f}function union(f,s,d){d===void 0&&(d={});var _=getGeom$5(f),S=getGeom$5(s),T=index$1.union(_.coordinates,S.coordinates);return T.length===0?null:T.length===1?polygon$3(T[0],d.properties):multiPolygon$1(T,d.properties)}function feature$a(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function polygon$2(f,s,d){d===void 0&&(d={});for(var _=0,S=f;_<S.length;_++){var T=S[_];if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<T[T.length-1].length;F++)if(T[T.length-1][F]!==T[0][F])throw new Error("First and last Position are not equivalent.")}var M={type:"Polygon",coordinates:f};return feature$a(M,s,d)}function multiPolygon(f,s,d){d===void 0&&(d={});var _={type:"MultiPolygon",coordinates:f};return feature$a(_,s,d)}function getGeom$4(f){return f.type==="Feature"?f.geometry:f}function intersect$1(f,s,d){d===void 0&&(d={});var _=getGeom$4(f),S=getGeom$4(s),T=index$1.intersection(_.coordinates,S.coordinates);return T.length===0?null:T.length===1?polygon$2(T[0],d.properties):multiPolygon(T,d.properties)}function clone$2(f){if(!f)throw new Error("geojson is required");switch(f.type){case"Feature":return cloneFeature$2(f);case"FeatureCollection":return cloneFeatureCollection$2(f);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return cloneGeometry$2(f);default:throw new Error("unknown GeoJSON type")}}function cloneFeature$2(f){var s={type:"Feature"};return Object.keys(f).forEach(function(d){switch(d){case"type":case"properties":case"geometry":return;default:s[d]=f[d]}}),s.properties=cloneProperties$2(f.properties),s.geometry=cloneGeometry$2(f.geometry),s}function cloneProperties$2(f){var s={};return f&&Object.keys(f).forEach(function(d){var _=f[d];typeof _=="object"?_===null?s[d]=null:Array.isArray(_)?s[d]=_.map(function(S){return S}):s[d]=cloneProperties$2(_):s[d]=_}),s}function cloneFeatureCollection$2(f){var s={type:"FeatureCollection"};return Object.keys(f).forEach(function(d){switch(d){case"type":case"features":return;default:s[d]=f[d]}}),s.features=f.features.map(function(d){return cloneFeature$2(d)}),s}function cloneGeometry$2(f){var s={type:f.type};return f.bbox&&(s.bbox=f.bbox),f.type==="GeometryCollection"?(s.geometries=f.geometries.map(function(d){return cloneGeometry$2(d)}),s):(s.coordinates=deepSlice$2(f.coordinates),s)}function deepSlice$2(f){var s=f;return typeof s[0]!="object"?s.slice():s.map(function(d){return deepSlice$2(d)})}function getCoord$5(f){if(!f)throw new Error("coord is required");if(!Array.isArray(f)){if(f.type==="Feature"&&f.geometry!==null&&f.geometry.type==="Point")return f.geometry.coordinates;if(f.type==="Point")return f.coordinates}if(Array.isArray(f)&&f.length>=2&&!Array.isArray(f[0])&&!Array.isArray(f[1]))return f;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function getCoords$5(f){if(Array.isArray(f))return f;if(f.type==="Feature"){if(f.geometry!==null)return f.geometry.coordinates}else if(f.coordinates)return f.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function getGeom$3(f){return f.type==="Feature"?f.geometry:f}function booleanClockwise(f){for(var s=getCoords$5(f),d=0,_=1,S,T;_<s.length;)S=T||s[0],T=s[_],d+=(T[0]-S[0])*(T[1]+S[1]),_++;return d>0}function coordEach$4(f,s,d){if(f!==null)for(var _,S,T,F,M,P,H,J=0,K=0,z,oe=f.type,se=oe==="FeatureCollection",ae=oe==="Feature",ge=se?f.features.length:1,pe=0;pe<ge;pe++){H=se?f.features[pe].geometry:ae?f.geometry:f,z=H?H.type==="GeometryCollection":!1,M=z?H.geometries.length:1;for(var he=0;he<M;he++){var ve=0,be=0;if(F=z?H.geometries[he]:H,F!==null){P=F.coordinates;var Re=F.type;switch(J=0,Re){case null:break;case"Point":if(s(P,K,pe,ve,be)===!1)return!1;K++,ve++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,pe,ve,be)===!1)return!1;K++,Re==="MultiPoint"&&ve++}Re==="LineString"&&ve++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,pe,ve,be)===!1)return!1;K++}Re==="MultiLineString"&&ve++,Re==="Polygon"&&be++}Re==="Polygon"&&ve++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(be=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,pe,ve,be)===!1)return!1;K++}be++}ve++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach$4(F.geometries[_],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function featureEach$4(f,s){if(f.type==="Feature")s(f,0);else if(f.type==="FeatureCollection")for(var d=0;d<f.features.length&&s(f.features[d],d)!==!1;d++);}function geomEach$4(f,s){var d,_,S,T,F,M,P,H,J,K,z=0,oe=f.type==="FeatureCollection",se=f.type==="Feature",ae=oe?f.features.length:1;for(d=0;d<ae;d++){for(M=oe?f.features[d].geometry:se?f.geometry:f,H=oe?f.features[d].properties:se?f.properties:{},J=oe?f.features[d].bbox:se?f.bbox:void 0,K=oe?f.features[d].id:se?f.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,z,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,z,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],z,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}z++}}function flattenEach$3(f,s){geomEach$4(f,function(d,_,S,T,F){var M=d===null?null:d.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return s(feature$i(d,S,{bbox:T,id:F}),_,0)===!1?!1:void 0}var P;switch(M){case"MultiPoint":P="Point";break;case"MultiLineString":P="LineString";break;case"MultiPolygon":P="Polygon";break}for(var H=0;H<d.coordinates.length;H++){var J=d.coordinates[H],K={type:P,coordinates:J};if(s(feature$i(K,S),_,H)===!1)return!1}})}function rewind(f,s){if(s=s||{},!isObject$6(s))throw new Error("options is invalid");var d=s.reverse||!1,_=s.mutate||!1;if(!f)throw new Error("<geojson> is required");if(typeof d!="boolean")throw new Error("<reverse> must be a boolean");if(typeof _!="boolean")throw new Error("<mutate> must be a boolean");_===!1&&(f=clone$2(f));var S=[];switch(f.type){case"GeometryCollection":return geomEach$4(f,function(T){rewindFeature(T,d)}),f;case"FeatureCollection":return featureEach$4(f,function(T){featureEach$4(rewindFeature(T,d),function(F){S.push(F)})}),featureCollection$5(S)}return rewindFeature(f,d)}function rewindFeature(f,s){var d=f.type==="Feature"?f.geometry.type:f.type;switch(d){case"GeometryCollection":return geomEach$4(f,function(_){rewindFeature(_,s)}),f;case"LineString":return rewindLineString(getCoords$5(f),s),f;case"Polygon":return rewindPolygon(getCoords$5(f),s),f;case"MultiLineString":return getCoords$5(f).forEach(function(_){rewindLineString(_,s)}),f;case"MultiPolygon":return getCoords$5(f).forEach(function(_){rewindPolygon(_,s)}),f;case"Point":case"MultiPoint":return f}}function rewindLineString(f,s){booleanClockwise(f)===s&&f.reverse()}function rewindPolygon(f,s){booleanClockwise(f[0])!==s&&f[0].reverse();for(var d=1;d<f.length;d++)booleanClockwise(f[d])===s&&f[d].reverse()}function recursivelyTraverseNestedArrays(f,s,d){if(!Array.isArray(f[0]))return!0;for(let _=0;_<f.length;_++)if(recursivelyTraverseNestedArrays(f[_],[...s,_],d)){d(f,s);break}return!1}function generatePointsParallelToLinePoints(f,s,d){const _={type:"LineString",coordinates:[f,s]},S=point$a(d),T=pointToLineDistance(S,_),F=bearing(f,s),P=(d[0]-f[0])*(s[1]-f[1])-(d[1]-f[1])*(s[0]-f[0])<0?F-90:F-270,H=destination(s,T,P),J=destination(f,T,P);return[H.geometry.coordinates,J.geometry.coordinates]}function distance2d(f,s,d,_){const S=f-d,T=s-_;return Math.sqrt(S*S+T*T)}function mix(f,s,d){return s*d+f*(1-d)}function nearestPointOnProjectedLine(f,s,d){const _=new WebMercatorViewport(d),T=f.geometry.coordinates.map(([ye,Ue,It=0])=>_.project([ye,Ue,It])),[F,M]=_.project(s.geometry.coordinates);let P=1/0,H={};T.forEach(([ye,Ue],It)=>{if(It===0)return;const[St,At]=T[It-1],xt=At-Ue,Ct=ye-St,Nt=St*Ue-ye*At,qt=xt*xt+Ct*Ct,Jn=Math.abs(xt*F+Ct*M+Nt)/Math.sqrt(qt);Jn<P&&(P=Jn,H={index:It,x0:(Ct*(Ct*F-xt*M)-xt*Nt)/qt,y0:(xt*(-Ct*F+xt*M)-Ct*Nt)/qt})});const{index:J,x0:K,y0:z}=H,[oe,se,ae=0]=T[J-1],[ge,pe,he=0]=T[J],ve=distance2d(oe,se,ge,pe),Re=distance2d(oe,se,K,z)/ve,Fe=mix(ae,he,Re);return{type:"Feature",geometry:{type:"Point",coordinates:_.unproject([K,z,Fe])},properties:{dist:P,index:J-1}}}function nearestPointOnLine$1(f,s,d){var T,F;let _;d&&(_=new WebMercatorViewport(d));let S=point$a([1/0,1/0],{dist:1/0});return!((T=f.geometry)!=null&&T.coordinates.length)||((F=f.geometry)==null?void 0:F.coordinates.length)<2||flattenEach$3(f,M=>{const P=getCoords$5(M),H=getCoords$5(s);let J,K,z,oe,se,ae,ge;if(P.length>1&&H.length){let he,ve;_?(he=P.map(Fe=>_.project(Fe)),ve=_.project(H)):(he=P,ve=H);for(let Fe=1;Fe<he.length;Fe++){if(he[Fe][0]!==he[Fe-1][0]){const xt=(he[Fe][1]-he[Fe-1][1])/(he[Fe][0]-he[Fe-1][0]),Ct=he[Fe][1]-xt*he[Fe][0];ge=Math.abs(xt*ve[0]+Ct-ve[1])/Math.sqrt(xt*xt+1)}else ge=Math.abs(ve[0]-he[Fe][0]);const ye=Math.pow(he[Fe][1]-he[Fe-1][1],2)+Math.pow(he[Fe][0]-he[Fe-1][0],2),Ue=Math.pow(he[Fe][1]-ve[1],2)+Math.pow(he[Fe][0]-ve[0],2),It=Math.pow(he[Fe-1][1]-ve[1],2)+Math.pow(he[Fe-1][0]-ve[0],2),St=Math.pow(ge,2),At=Ue-St+It-St;At>ye&&(ge=Math.sqrt(Math.min(Ue,It))),(J==null||J>ge)&&(At>ye?It<Ue?(K=0,z=1):(z=0,K=1):(K=Math.sqrt(It-St)/Math.sqrt(ye),z=Math.sqrt(Ue-St)/Math.sqrt(ye)),J=ge,ae=Fe)}const be=he[ae-1][0]-he[ae][0],Re=he[ae-1][1]-he[ae][1];oe=he[ae-1][0]-be*K,se=he[ae-1][1]-Re*K}let pe={x:oe,y:se,idx:ae-1,to:K,from:z};if(_){const he=_.unproject([pe.x,pe.y]);pe={x:he[0],y:he[1],idx:ae-1,to:K,from:z}}S=point$a([pe.x,pe.y],{dist:Math.abs(pe.from-pe.to),index:pe.idx})}),S}function getPickedEditHandle(f){const s=getPickedEditHandles(f);return s.length?s[0]:null}function getPickedSnapSourceEditHandle(f){return getPickedEditHandles(f).find(d=>d.properties.editHandleType==="snap-source")}function getNonGuidePicks(f){return f&&f.filter(s=>!s.isGuide)}function getPickedExistingEditHandle(f){return getPickedEditHandles(f).find(({properties:d})=>d.featureIndex>=0&&d.editHandleType==="existing")}function getPickedIntermediateEditHandle(f){return getPickedEditHandles(f).find(({properties:d})=>d.featureIndex>=0&&d.editHandleType==="intermediate")}function getPickedEditHandles(f){return f&&f.filter(d=>d.isGuide&&d.object.properties.guideType==="editHandle").map(d=>d.object)||[]}function getEditHandlesForGeometry(f,s,d="existing"){let _=[];switch(f.type){case"Point":_=[{type:"Feature",properties:{guideType:"editHandle",editHandleType:d,positionIndexes:[],featureIndex:s},geometry:{type:"Point",coordinates:f.coordinates}}];break;case"MultiPoint":case"LineString":_=_.concat(getEditHandlesForCoordinates(f.coordinates,[],s,d));break;case"Polygon":case"MultiLineString":for(let S=0;S<f.coordinates.length;S++)_=_.concat(getEditHandlesForCoordinates(f.coordinates[S],[S],s,d)),f.type==="Polygon"&&(_=_.slice(0,-1));break;case"MultiPolygon":for(let S=0;S<f.coordinates.length;S++)for(let T=0;T<f.coordinates[S].length;T++)_=_.concat(getEditHandlesForCoordinates(f.coordinates[S][T],[S,T],s,d)),_=_.slice(0,-1);break;default:throw Error(`Unhandled geometry type: ${f.type}`)}return _}function getEditHandlesForCoordinates(f,s,d,_="existing"){const S=[];for(let T=0;T<f.length;T++){const F=f[T];S.push({type:"Feature",properties:{guideType:"editHandle",positionIndexes:[...s,T],featureIndex:d,editHandleType:_},geometry:{type:"Point",coordinates:F}})}return S}function updateRectanglePosition(f,s,d){const _=f.geometry.coordinates;if(!_)return null;const S=_[0].slice(0,4);S[s%4]=d;const T=S[(s+2)%4],F=S[s%4];return S[(s+1)%4]=[F[0],T[1]],S[(s+3)%4]=[T[0],F[1]],[[...S,S[0]]]}function mapCoords$1(f,s){return typeof f[0]=="number"?!isNaN(f[0])&&isFinite(f[0])?s(f):f:f.map(d=>mapCoords$1(d,s)).filter(Boolean)}class ImmutableFeatureCollection{constructor(s){Bt(this,"featureCollection");this.featureCollection=s}getObject(){return this.featureCollection}replacePosition(s,d,_){const S=this.featureCollection.features[s].geometry,T=S.type==="Polygon"||S.type==="MultiPolygon",F={...S,coordinates:immutablyReplacePosition(S.coordinates,d,_,T)};return this.replaceGeometry(s,F)}removePosition(s,d){const _=this.featureCollection.features[s].geometry;if(_.type==="Point")throw Error("Can't remove a position from a Point or there'd be nothing left");if(_.type==="MultiPoint"&&_.coordinates.length<2)throw Error("Can't remove the last point of a MultiPoint or there'd be nothing left");if(_.type==="LineString"&&_.coordinates.length<3)throw Error("Can't remove position. LineString must have at least two positions");if(_.type==="Polygon"&&_.coordinates[0].length<5&&Array.isArray(d)&&d[0]===0)throw Error("Can't remove position. Polygon's outer ring must have at least four positions");if(_.type==="MultiLineString"&&_.coordinates.length===1&&_.coordinates[0].length<3)throw Error("Can't remove position. MultiLineString must have at least two positions");if(_.type==="MultiPolygon"&&_.coordinates.length===1&&_.coordinates[0][0].length<5&&Array.isArray(d)&&d[0]===0&&d[1]===0)throw Error("Can't remove position. MultiPolygon's outer ring must have at least four positions");const S=_.type==="Polygon"||_.type==="MultiPolygon",T={..._,coordinates:immutablyRemovePosition(_.coordinates,d,S)};return pruneGeometryIfNecessary(T),this.replaceGeometry(s,T)}addPosition(s,d,_){const S=this.featureCollection.features[s].geometry;if(S.type==="Point")throw new Error("Unable to add a position to a Point feature");S.type==="Polygon"||S.type;const T={...S,coordinates:immutablyAddPosition(S.coordinates,d,_)};return this.replaceGeometry(s,T)}replaceGeometry(s,d){const _={...this.featureCollection.features[s],geometry:d},S={...this.featureCollection,features:[...this.featureCollection.features.slice(0,s),_,...this.featureCollection.features.slice(s+1)]};return new ImmutableFeatureCollection(S)}addFeature(s){return this.addFeatures([s])}addFeatures(s){const d={...this.featureCollection,features:[...this.featureCollection.features,...s]};return new ImmutableFeatureCollection(d)}deleteFeature(s){return this.deleteFeatures([s])}deleteFeatures(s){const d=[...this.featureCollection.features];s.sort();for(let S=s.length-1;S>=0;S--){const T=s[S];T>=0&&T<d.length&&d.splice(T,1)}const _={...this.featureCollection,features:d};return new ImmutableFeatureCollection(_)}}function getUpdatedPosition(f,s){if(f.length===2&&s.length===3){const d=s[2];return[f[0],f[1],d]}return f}function immutablyReplacePosition(f,s,d,_){if(!s)return f;if(s.length===0)return getUpdatedPosition(d,f);if(s.length===1){const S=[...f.slice(0,s[0]),getUpdatedPosition(d,f[s[0]]),...f.slice(s[0]+1)];return _&&(s[0]===0||s[0]===f.length-1)&&(S[0]=getUpdatedPosition(d,f[0]),S[f.length-1]=getUpdatedPosition(d,f[0])),S}return[...f.slice(0,s[0]),immutablyReplacePosition(f[s[0]],s.slice(1,s.length),d,_),...f.slice(s[0]+1)]}function immutablyRemovePosition(f,s,d){if(!s)return f;if(s.length===0)throw Error("Must specify the index of the position to remove");if(s.length===1){const _=[...f.slice(0,s[0]),...f.slice(s[0]+1)];return d&&(s[0]===0||s[0]===f.length-1)&&(s[0]===0?_[_.length-1]=_[0]:s[0]===f.length-1&&(_[0]=_[_.length-1])),_}return[...f.slice(0,s[0]),immutablyRemovePosition(f[s[0]],s.slice(1,s.length),d),...f.slice(s[0]+1)]}function immutablyAddPosition(f,s,d,_){if(!s)return f;if(s.length===0)throw Error("Must specify the index of the position to remove");return s.length===1?[...f.slice(0,s[0]),d,...f.slice(s[0])]:[...f.slice(0,s[0]),immutablyAddPosition(f[s[0]],s.slice(1,s.length),d),...f.slice(s[0]+1)]}function pruneGeometryIfNecessary(f){switch(f.type){case"Polygon":prunePolygonIfNecessary(f);break;case"MultiLineString":pruneMultiLineStringIfNecessary(f);break;case"MultiPolygon":pruneMultiPolygonIfNecessary(f);break}}function prunePolygonIfNecessary(f){const s=f.coordinates;for(let d=1;d<s.length;d++)removeHoleIfNecessary(s,d)&&d--}function pruneMultiLineStringIfNecessary(f){for(let s=0;s<f.coordinates.length;s++)f.coordinates[s].length===1&&(f.coordinates.splice(s,1),s--)}function pruneMultiPolygonIfNecessary(f){for(let s=0;s<f.coordinates.length;s++){const d=f.coordinates[s];d[0].length<=3&&(f.coordinates.splice(s,1),s--);for(let S=1;S<d.length;S++)removeHoleIfNecessary(d,S)&&S--}}function removeHoleIfNecessary(f,s){return f[s].length<=3?(f.splice(s,1),!0):!1}const DEFAULT_GUIDES={type:"FeatureCollection",features:[]},DEFAULT_TOOLTIPS=[];class GeoJsonEditMode{constructor(){Bt(this,"_clickSequence",[])}getGuides(s){return DEFAULT_GUIDES}getTooltips(s){return DEFAULT_TOOLTIPS}getSelectedFeature(s){return s.selectedIndexes.length===1?s.data.features[s.selectedIndexes[0]]:null}getSelectedGeometry(s){const d=this.getSelectedFeature(s);return d?d.geometry:null}getSelectedFeaturesAsFeatureCollection(s){const{features:d}=s.data;return{type:"FeatureCollection",features:s.selectedIndexes.map(S=>d[S])}}getClickSequence(){return this._clickSequence}addClickSequence({mapCoords:s}){this._clickSequence.push(s)}resetClickSequence(){this._clickSequence=[]}getTentativeGuide(s){return this.getGuides(s).features.find(_=>_.properties&&_.properties.guideType==="tentative")}isSelectionPicked(s,d){if(!s.length)return!1;const _=getNonGuidePicks(s).map(({index:F})=>F),S=getPickedEditHandles(s).map(({properties:F})=>F.featureIndex),T=new Set([..._,...S]);return d.selectedIndexes.some(F=>T.has(F))}rewindPolygon(s){const{geometry:d}=s;return d.type==="Polygon"||d.type==="MultiPolygon"?rewind(s):s}getAddFeatureAction(s,d){const _=s,S=_.type==="Feature"?_:{type:"Feature",properties:{},geometry:_},T=this.rewindPolygon(S),F=new ImmutableFeatureCollection(d).addFeature(T).getObject();return{updatedData:F,editType:"addFeature",editContext:{featureIndexes:[F.features.length-1]}}}getAddManyFeaturesAction({features:s},d){let _=new ImmutableFeatureCollection(d);const S=_.getObject().features.length,T=[];for(const F of s){const{properties:M,geometry:P}=F,H=P;_=_.addFeature({type:"Feature",properties:M,geometry:H}),T.push(S+T.length)}return{updatedData:_.getObject(),editType:"addFeature",editContext:{featureIndexes:T}}}getAddFeatureOrBooleanPolygonAction(s,d){const _=s,S=this.getSelectedFeature(d),{modeConfig:T}=d;if(T&&T.booleanOperation){if(!S||S.geometry.type!=="Polygon"&&S.geometry.type!=="MultiPolygon")return console.warn("booleanOperation only supported for single Polygon or MultiPolygon selection"),null;const F=_.type==="Feature"?_:{type:"Feature",geometry:_};let M;if(T.booleanOperation==="union")M=union(S,F);else if(T.booleanOperation==="difference")M=difference(S,F);else if(T.booleanOperation==="intersection")M=intersect$1(S,F);else return console.warn(`Invalid booleanOperation ${T.booleanOperation}`),null;if(!M)return console.warn("Canceling edit. Boolean operation erased entire polygon."),null;const P=d.selectedIndexes[0];return{updatedData:new ImmutableFeatureCollection(d.data).replaceGeometry(P,M.geometry).getObject(),editType:"unionGeometry",editContext:{featureIndexes:[P]}}}return this.getAddFeatureAction(s,d.data)}createTentativeFeature(s){return null}handleClick(s,d){}handlePointerMove(s,d){const _=this.createTentativeFeature(d);_&&d.onEdit({updatedData:d.data,editType:"updateTentativeFeature",editContext:{feature:_}})}handleStartDragging(s,d){}handleStopDragging(s,d){}handleDragging(s,d){}handleKeyUp(s,d){s.key==="Escape"&&(this.resetClickSequence(),d.onEdit({updatedData:d.data,editType:"cancelFeature",editContext:{}}))}}function getIntermediatePosition(f,s){return[(f[0]+s[0])/2,(f[1]+s[1])/2]}class ViewMode extends GeoJsonEditMode{}function radiansToDegrees(f){var s=f%(2*Math.PI);return s*180/Math.PI}function degreesToRadians$2(f){var s=f%360;return s*Math.PI/180}function getCoord$4(f){if(!f)throw new Error("coord is required");if(!Array.isArray(f)){if(f.type==="Feature"&&f.geometry!==null&&f.geometry.type==="Point")return f.geometry.coordinates;if(f.type==="Point")return f.coordinates}if(Array.isArray(f)&&f.length>=2&&!Array.isArray(f[0])&&!Array.isArray(f[1]))return f;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function rhumbBearing(f,s,d){d===void 0&&(d={});var _;d.final?_=calculateRhumbBearing(getCoord$4(s),getCoord$4(f)):_=calculateRhumbBearing(getCoord$4(f),getCoord$4(s));var S=_>180?-(360-_):_;return S}function calculateRhumbBearing(f,s){var d=degreesToRadians$2(f[1]),_=degreesToRadians$2(s[1]),S=degreesToRadians$2(s[0]-f[0]);S>Math.PI&&(S-=2*Math.PI),S<-Math.PI&&(S+=2*Math.PI);var T=Math.log(Math.tan(_/2+Math.PI/4)/Math.tan(d/2+Math.PI/4)),F=Math.atan2(S,T);return(radiansToDegrees(F)+360)%360}var earthRadius=63710088e-1,factors={centimeters:earthRadius*100,centimetres:earthRadius*100,degrees:earthRadius/111325,feet:earthRadius*3.28084,inches:earthRadius*39.37,kilometers:earthRadius/1e3,kilometres:earthRadius/1e3,meters:earthRadius,metres:earthRadius,miles:earthRadius/1609.344,millimeters:earthRadius*1e3,millimetres:earthRadius*1e3,nauticalmiles:earthRadius/1852,radians:1,yards:earthRadius*1.0936};function feature$9(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function point$6(f,s,d){if(d===void 0&&(d={}),!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$7(f[0])||!isNumber$7(f[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:f};return feature$9(_,s,d)}function radiansToLength(f,s){var d=factors[s];return f*d}function lengthToRadians(f,s){s===void 0&&(s="kilometers");var d=factors[s];if(!d)throw new Error(s+" units is invalid");return f/d}function degreesToRadians$1(f){var s=f%360;return s*Math.PI/180}function convertLength(f,s,d){if(s===void 0&&(s="kilometers"),!(f>=0))throw new Error("length must be a positive number");return radiansToLength(lengthToRadians(f,s),d)}function isNumber$7(f){return!isNaN(f)&&f!==null&&!Array.isArray(f)}function getCoord$3(f){if(!f)throw new Error("coord is required");if(!Array.isArray(f)){if(f.type==="Feature"&&f.geometry!==null&&f.geometry.type==="Point")return f.geometry.coordinates;if(f.type==="Point")return f.coordinates}if(Array.isArray(f)&&f.length>=2&&!Array.isArray(f[0])&&!Array.isArray(f[1]))return f;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function rhumbDestination(f,s,d,_){_===void 0&&(_={});var S=s<0,T=convertLength(Math.abs(s),_.units,"meters");S&&(T=-Math.abs(T));var F=getCoord$3(f),M=calculateRhumbDestination(F,T,d);return M[0]+=M[0]-F[0]>180?-360:F[0]-M[0]>180?360:0,point$6(M,_.properties)}function calculateRhumbDestination(f,s,d,_){_=_===void 0?earthRadius:Number(_);var S=s/_,T=f[0]*Math.PI/180,F=degreesToRadians$1(f[1]),M=degreesToRadians$1(d),P=S*Math.cos(M),H=F+P;Math.abs(H)>Math.PI/2&&(H=H>0?Math.PI-H:-Math.PI-H);var J=Math.log(Math.tan(H/2+Math.PI/4)/Math.tan(F/2+Math.PI/4)),K=Math.abs(J)>1e-11?P/J:Math.cos(F),z=S*Math.sin(M)/K,oe=T+z;return[(oe*180/Math.PI+540)%360-180,H*180/Math.PI]}function translateFromCenter(f,s,d){const _=center(f),S=rhumbDestination(_,s,d),T=mapCoords$1(f.geometry.coordinates,F=>{const M=rhumbDistance(_.geometry.coordinates,F),P=rhumbBearing(_.geometry.coordinates,F);return rhumbDestination(S.geometry.coordinates,M,P).geometry.coordinates});return f.geometry.coordinates=T,f}class TranslateMode extends GeoJsonEditMode{constructor(){super(...arguments);Bt(this,"_geometryBeforeTranslate");Bt(this,"_isTranslatable")}handleDragging(d,_){if(this._isTranslatable){if(this._geometryBeforeTranslate){const S=this.getTranslateAction(d.pointerDownMapCoords,d.mapCoords,"translating",_);S&&_.onEdit(S)}d.cancelPan()}}handlePointerMove(d,_){this._isTranslatable=this.isSelectionPicked(d.pointerDownPicks||d.picks,_),this.updateCursor(_)}handleStartDragging(d,_){this._isTranslatable&&(this._geometryBeforeTranslate=this.getSelectedFeaturesAsFeatureCollection(_))}handleStopDragging(d,_){if(this._geometryBeforeTranslate){const S=this.getTranslateAction(d.pointerDownMapCoords,d.mapCoords,"translated",_);S&&_.onEdit(S),this._geometryBeforeTranslate=null}}updateCursor(d){this._isTranslatable?d.onUpdateCursor("move"):d.onUpdateCursor(null)}getTranslateAction(d,_,S,T){if(!this._geometryBeforeTranslate)return null;let F=new ImmutableFeatureCollection(T.data);const M=T.selectedIndexes,{viewport:P,screenSpace:H}=T.modeConfig||{};if(P&&H){const J=P.project?P:new WebMercatorViewport(P),K=J.project(d),z=J.project(_),oe=z[0]-K[0],se=z[1]-K[1];for(let ae=0;ae<M.length;ae++){const ge=M[ae],pe=this._geometryBeforeTranslate.features[ae];let he=pe.geometry.coordinates;he&&(he=mapCoords$1(he,ve=>{const be=J.project(ve);return be?(be[0]+=oe,be[1]+=se,J.unproject(be)):null}),F=F.replaceGeometry(ge,{type:pe.geometry.type,coordinates:he}))}}else{const J=point$a(d),K=point$a(_),z=distance(J,K),oe=bearing(J,K),se=this._geometryBeforeTranslate.features.map(ae=>translateFromCenter(clone$2(ae),z,oe));for(let ae=0;ae<M.length;ae++){const ge=M[ae],pe=se[ae];F=F.replaceGeometry(ge,pe.geometry)}}return{updatedData:F.getObject(),editType:S,editContext:{featureIndexes:M}}}}class ModifyMode extends GeoJsonEditMode{getGuides(s){var P;const d=[],{data:_,lastPointerMoveEvent:S}=s,{features:T}=_,F=S&&S.picks,M=S&&S.mapCoords;for(const H of s.selectedIndexes)if(H<T.length){const{geometry:J}=T[H];d.push(...getEditHandlesForGeometry(J,H))}else console.warn(`selectedFeatureIndexes out of range ${H}`);if(F&&F.length&&M){const J=!getPickedExistingEditHandle(F)&&F.find(K=>!K.isGuide);if(J&&!J.object.geometry.type.includes("Point")&&!((P=s.modeConfig)!=null&&P.lockRectangles&&J.object.properties.shape==="Rectangle")&&s.selectedIndexes.includes(J.index)){let K=null,z=[];const oe=point$a(M);if(recursivelyTraverseNestedArrays(J.object.geometry.coordinates,[],(se,ae)=>{const ge=lineString$4(se),pe=this.getNearestPoint(ge,oe,s.modeConfig&&s.modeConfig.viewport);(!K||pe.properties.dist<K.properties.dist)&&(K=pe,z=ae)}),K){const{geometry:{coordinates:se},properties:{index:ae}}=K;d.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:J.index,positionIndexes:[...z,ae+1]},geometry:{type:"Point",coordinates:se}})}}}return{type:"FeatureCollection",features:d}}getNearestPoint(s,d,_){const{coordinates:S}=s.geometry;if(S.some(T=>T.length>2)){if(_)return nearestPointOnProjectedLine(s,d,_);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return nearestPointOnLine$1(s,d,_)}handleClick(s,d){var T;const _=getPickedExistingEditHandle(s.picks),S=getPickedIntermediateEditHandle(s.picks);if(_){const{featureIndex:F,positionIndexes:M}=_.properties;let P;try{P=new ImmutableFeatureCollection(d.data).removePosition(F,M).getObject()}catch{}P&&d.onEdit({updatedData:P,editType:"removePosition",editContext:{featureIndexes:[F],positionIndexes:M,position:_.geometry.coordinates}})}else if(S){const{featureIndex:F,positionIndexes:M}=S.properties,P=d.data.features[F];if(!((T=d.modeConfig)!=null&&T.lockRectangles&&(P==null?void 0:P.properties.shape)==="Rectangle")){const J=new ImmutableFeatureCollection(d.data).addPosition(F,M,S.geometry.coordinates).getObject();J&&d.onEdit({updatedData:J,editType:"addPosition",editContext:{featureIndexes:[F],positionIndexes:M,position:S.geometry.coordinates}})}}}handleDragging(s,d){const _=getPickedEditHandle(s.pointerDownPicks);_&&(s.cancelPan(),this._dragEditHandle("movePosition",d,_,s))}_dragEditHandle(s,d,_,S){var P;const T=_.properties,F=d.data.features[T.featureIndex];let M;if((P=d.modeConfig)!=null&&P.lockRectangles&&F.properties.shape==="Rectangle"){const H=updateRectanglePosition(F,T.positionIndexes[1],S.mapCoords);M=new ImmutableFeatureCollection(d.data).replaceGeometry(T.featureIndex,{coordinates:H,type:"Polygon"}).getObject()}else M=new ImmutableFeatureCollection(d.data).replacePosition(T.featureIndex,T.positionIndexes,S.mapCoords).getObject();d.onEdit({updatedData:M,editType:s,editContext:{featureIndexes:[T.featureIndex],positionIndexes:T.positionIndexes,position:S.mapCoords}})}handlePointerMove(s,d){const _=this.getCursor(s);d.onUpdateCursor(_)}handleStartDragging(s,d){const _=d.selectedIndexes,S=getPickedIntermediateEditHandle(s.picks);if(_.length&&S){const T=S.properties,F=new ImmutableFeatureCollection(d.data).addPosition(T.featureIndex,T.positionIndexes,s.mapCoords).getObject();d.onEdit({updatedData:F,editType:"addPosition",editContext:{featureIndexes:[T.featureIndex],positionIndexes:T.positionIndexes,position:s.mapCoords}})}}handleStopDragging(s,d){const _=d.selectedIndexes,S=getPickedEditHandle(s.picks);_.length&&S&&this._dragEditHandle("finishMovePosition",d,S,s)}getCursor(s){const d=s&&s.picks||[];return getPickedEditHandles(d).length?"cell":null}}function feature$8(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function point$5(f,s,d){if(d===void 0&&(d={}),!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$6(f[0])||!isNumber$6(f[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:f};return feature$8(_,s,d)}function isNumber$6(f){return!isNaN(f)&&f!==null&&!Array.isArray(f)}function coordEach$3(f,s,d){if(f!==null)for(var _,S,T,F,M,P,H,J=0,K=0,z,oe=f.type,se=oe==="FeatureCollection",ae=oe==="Feature",ge=se?f.features.length:1,pe=0;pe<ge;pe++){H=se?f.features[pe].geometry:ae?f.geometry:f,z=H?H.type==="GeometryCollection":!1,M=z?H.geometries.length:1;for(var he=0;he<M;he++){var ve=0,be=0;if(F=z?H.geometries[he]:H,F!==null){P=F.coordinates;var Re=F.type;switch(J=Re==="Polygon"||Re==="MultiPolygon"?1:0,Re){case null:break;case"Point":if(s(P,K,pe,ve,be)===!1)return!1;K++,ve++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,pe,ve,be)===!1)return!1;K++,Re==="MultiPoint"&&ve++}Re==="LineString"&&ve++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,pe,ve,be)===!1)return!1;K++}Re==="MultiLineString"&&ve++,Re==="Polygon"&&be++}Re==="Polygon"&&ve++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(be=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,pe,ve,be)===!1)return!1;K++}be++}ve++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach$3(F.geometries[_],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function centroid(f,s){s===void 0&&(s={});var d=0,_=0,S=0;return coordEach$3(f,function(T){d+=T[0],_+=T[1],S++}),point$5([d/S,_/S],s.properties)}function feature$7(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function lineString$2(f,s,d){if(d===void 0&&(d={}),f.length<2)throw new Error("coordinates must be an array of two or more positions");var _={type:"LineString",coordinates:f};return feature$7(_,s,d)}function featureCollection$3(f,s){s===void 0&&(s={});var d={type:"FeatureCollection"};return s.id&&(d.id=s.id),s.bbox&&(d.bbox=s.bbox),d.features=f,d}function multiLineString(f,s,d){d===void 0&&(d={});var _={type:"MultiLineString",coordinates:f};return feature$7(_,s,d)}function getGeom$2(f){return f.type==="Feature"?f.geometry:f}function turfPolygonToLine(f,s){s===void 0&&(s={});var d=getGeom$2(f);switch(!s.properties&&f.type==="Feature"&&(s.properties=f.properties),d.type){case"Polygon":return polygonToLine(d,s);case"MultiPolygon":return multiPolygonToLine(d,s);default:throw new Error("invalid poly")}}function polygonToLine(f,s){s===void 0&&(s={});var d=getGeom$2(f),_=d.coordinates,S=s.properties?s.properties:f.type==="Feature"?f.properties:{};return coordsToLine(_,S)}function multiPolygonToLine(f,s){s===void 0&&(s={});var d=getGeom$2(f),_=d.coordinates,S=s.properties?s.properties:f.type==="Feature"?f.properties:{},T=[];return _.forEach(function(F){T.push(coordsToLine(F,S))}),featureCollection$3(T)}function coordsToLine(f,s){return f.length>1?multiLineString(f,s):lineString$2(f[0],s)}function clone$1(f){if(!f)throw new Error("geojson is required");switch(f.type){case"Feature":return cloneFeature$1(f);case"FeatureCollection":return cloneFeatureCollection$1(f);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return cloneGeometry$1(f);default:throw new Error("unknown GeoJSON type")}}function cloneFeature$1(f){var s={type:"Feature"};return Object.keys(f).forEach(function(d){switch(d){case"type":case"properties":case"geometry":return;default:s[d]=f[d]}}),s.properties=cloneProperties$1(f.properties),s.geometry=cloneGeometry$1(f.geometry),s}function cloneProperties$1(f){var s={};return f&&Object.keys(f).forEach(function(d){var _=f[d];typeof _=="object"?_===null?s[d]=null:Array.isArray(_)?s[d]=_.map(function(S){return S}):s[d]=cloneProperties$1(_):s[d]=_}),s}function cloneFeatureCollection$1(f){var s={type:"FeatureCollection"};return Object.keys(f).forEach(function(d){switch(d){case"type":case"features":return;default:s[d]=f[d]}}),s.features=f.features.map(function(d){return cloneFeature$1(d)}),s}function cloneGeometry$1(f){var s={type:f.type};return f.bbox&&(s.bbox=f.bbox),f.type==="GeometryCollection"?(s.geometries=f.geometries.map(function(d){return cloneGeometry$1(d)}),s):(s.coordinates=deepSlice$1(f.coordinates),s)}function deepSlice$1(f){var s=f;return typeof s[0]!="object"?s.slice():s.map(function(d){return deepSlice$1(d)})}function feature$6(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties={},_.geometry=f,_}function point$4(f,s,d){if(d===void 0&&(d={}),!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$5(f[0])||!isNumber$5(f[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:f};return feature$6(_,s,d)}function isNumber$5(f){return!isNaN(f)&&f!==null&&!Array.isArray(f)}function isObject$5(f){return!!f&&f.constructor===Object}function coordEach$2(f,s,d){if(f!==null)for(var _,S,T,F,M,P,H,J=0,K=0,z,oe=f.type,se=oe==="FeatureCollection",ae=oe==="Feature",ge=se?f.features.length:1,pe=0;pe<ge;pe++){H=se?f.features[pe].geometry:ae?f.geometry:f,z=H?H.type==="GeometryCollection":!1,M=z?H.geometries.length:1;for(var he=0;he<M;he++){var ve=0,be=0;if(F=z?H.geometries[he]:H,F!==null){P=F.coordinates;var Re=F.type;switch(J=0,Re){case null:break;case"Point":if(s(P,K,pe,ve,be)===!1)return!1;K++,ve++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,pe,ve,be)===!1)return!1;K++,Re==="MultiPoint"&&ve++}Re==="LineString"&&ve++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,pe,ve,be)===!1)return!1;K++}Re==="MultiLineString"&&ve++,Re==="Polygon"&&be++}Re==="Polygon"&&ve++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(be=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,pe,ve,be)===!1)return!1;K++}be++}ve++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach$2(F.geometries[_],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function featureEach$3(f,s){if(f.type==="Feature")s(f,0);else if(f.type==="FeatureCollection")for(var d=0;d<f.features.length&&s(f.features[d],d)!==!1;d++);}function getCoord$2(f){if(!f)throw new Error("coord is required");if(!Array.isArray(f)){if(f.type==="Feature"&&f.geometry!==null&&f.geometry.type==="Point")return f.geometry.coordinates;if(f.type==="Point")return f.coordinates}if(Array.isArray(f)&&f.length>=2&&!Array.isArray(f[0])&&!Array.isArray(f[1]))return f;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function getCoords$4(f){if(Array.isArray(f))return f;if(f.type==="Feature"){if(f.geometry!==null)return f.geometry.coordinates}else if(f.coordinates)return f.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function getType(f,s){return f.type==="FeatureCollection"?"FeatureCollection":f.type==="GeometryCollection"?"GeometryCollection":f.type==="Feature"&&f.geometry!==null?f.geometry.type:f.type}function transformScale(f,s,d){if(d=d||{},!isObject$5(d))throw new Error("options is invalid");var _=d.origin,S=d.mutate;if(!f)throw new Error("geojson required");if(typeof s!="number"||s===0)throw new Error("invalid factor");var T=Array.isArray(_)||typeof _=="object";return S!==!0&&(f=clone$1(f)),f.type==="FeatureCollection"&&!T?(featureEach$3(f,function(F,M){f.features[M]=scale(F,s,_)}),f):scale(f,s,_)}function scale(f,s,d){var _=getType(f)==="Point";return d=defineOrigin(f,d),s===1||_||coordEach$2(f,function(S){var T=rhumbDistance(d,S),F=rhumbBearing(d,S),M=T*s,P=getCoords$4(rhumbDestination(d,M,F));S[0]=P[0],S[1]=P[1],S.length===3&&(S[2]*=s)}),f}function defineOrigin(f,s){if(s==null&&(s="centroid"),Array.isArray(s)||typeof s=="object")return getCoord$2(s);var d=f.bbox?f.bbox:bbox$1(f),_=d[0],S=d[1],T=d[2],F=d[3];switch(s){case"sw":case"southwest":case"westsouth":case"bottomleft":return point$4([_,S]);case"se":case"southeast":case"eastsouth":case"bottomright":return point$4([T,S]);case"nw":case"northwest":case"westnorth":case"topleft":return point$4([_,F]);case"ne":case"northeast":case"eastnorth":case"topright":return point$4([T,F]);case"center":return center(f);case void 0:case null:case"centroid":return centroid(f);default:throw new Error("invalid origin")}}class ScaleMode extends GeoJsonEditMode{constructor(){super(...arguments);Bt(this,"_geometryBeingScaled");Bt(this,"_selectedEditHandle");Bt(this,"_cornerGuidePoints",[]);Bt(this,"_cursor");Bt(this,"_isScaling",!1);Bt(this,"_isSinglePointGeometrySelected",d=>{const{features:_}=d||{};if(Array.isArray(_)&&_.length===1){const{type:S}=getGeom$3(_[0]);return S==="Point"}return!1});Bt(this,"_getOppositeScaleHandle",d=>{const _=d&&d.properties&&Array.isArray(d.properties.positionIndexes)&&d.properties.positionIndexes[0];if(typeof _!="number")return null;const S=this._cornerGuidePoints.length,T=(_+S/2)%S;return this._cornerGuidePoints.find(F=>Array.isArray(F.properties.positionIndexes)?F.properties.positionIndexes[0]===T:!1)||null});Bt(this,"_getUpdatedData",(d,_)=>{let S=new ImmutableFeatureCollection(d.data);const T=d.selectedIndexes;for(let F=0;F<T.length;F++){const M=T[F],P=_.features[F];S=S.replaceGeometry(M,P.geometry)}return S.getObject()});Bt(this,"isEditHandleSelected",()=>!!this._selectedEditHandle);Bt(this,"getScaleAction",(d,_,S,T)=>{if(!this._selectedEditHandle)return null;const F=this._getOppositeScaleHandle(this._selectedEditHandle),M=getCoord$5(F),P=getScaleFactor(M,d,_),H=transformScale(this._geometryBeingScaled,P,{origin:M});return{updatedData:this._getUpdatedData(T,H),editType:S,editContext:{featureIndexes:T.selectedIndexes}}});Bt(this,"updateCursor",d=>{if(this._selectedEditHandle){this._cursor&&d.onUpdateCursor(this._cursor);const _=this.getSelectedFeaturesAsFeatureCollection(d),S=centroid(_),T=bearing(S,this._selectedEditHandle),F=T<0?T+180:T;F>=0&&F<=90||F>=180&&F<=270?(this._cursor="nesw-resize",d.onUpdateCursor("nesw-resize")):(this._cursor="nwse-resize",d.onUpdateCursor("nwse-resize"))}else d.onUpdateCursor(null),this._cursor=null})}handlePointerMove(d,_){if(!this._isScaling){const S=getPickedEditHandle(d.picks);this._selectedEditHandle=S&&S.properties.editHandleType==="scale"?S:null,this.updateCursor(_)}}handleStartDragging(d,_){this._selectedEditHandle&&(this._isScaling=!0,this._geometryBeingScaled=this.getSelectedFeaturesAsFeatureCollection(_))}handleDragging(d,_){if(!this._isScaling)return;_.onUpdateCursor(this._cursor);const S=this.getScaleAction(d.pointerDownMapCoords,d.mapCoords,"scaling",_);S&&_.onEdit(S),d.cancelPan()}handleStopDragging(d,_){if(this._isScaling){const S=this.getScaleAction(d.pointerDownMapCoords,d.mapCoords,"scaled",_);S&&_.onEdit(S),_.onUpdateCursor(null),this._geometryBeingScaled=null,this._selectedEditHandle=null,this._cursor=null,this._isScaling=!1}}getGuides(d){this._cornerGuidePoints=[];const _=this.getSelectedFeaturesAsFeatureCollection(d);if(this._isSinglePointGeometrySelected(_))return{type:"FeatureCollection",features:[]};const S=bboxPolygon(bbox$1(_));S.properties.mode="scale";const T=[];return coordEach$4(S,(F,M)=>{if(M<4){const P=point$a(F,{guideType:"editHandle",editHandleType:"scale",positionIndexes:[M]});T.push(P)}}),this._cornerGuidePoints=T,featureCollection$5([turfPolygonToLine(S),...this._cornerGuidePoints])}}function getScaleFactor(f,s,d){const _=distance(f,s);return distance(f,d)/_}function clone(f){if(!f)throw new Error("geojson is required");switch(f.type){case"Feature":return cloneFeature(f);case"FeatureCollection":return cloneFeatureCollection(f);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return cloneGeometry(f);default:throw new Error("unknown GeoJSON type")}}function cloneFeature(f){var s={type:"Feature"};return Object.keys(f).forEach(function(d){switch(d){case"type":case"properties":case"geometry":return;default:s[d]=f[d]}}),s.properties=cloneProperties(f.properties),s.geometry=cloneGeometry(f.geometry),s}function cloneProperties(f){var s={};return f&&Object.keys(f).forEach(function(d){var _=f[d];typeof _=="object"?_===null?s[d]=null:Array.isArray(_)?s[d]=_.map(function(S){return S}):s[d]=cloneProperties(_):s[d]=_}),s}function cloneFeatureCollection(f){var s={type:"FeatureCollection"};return Object.keys(f).forEach(function(d){switch(d){case"type":case"features":return;default:s[d]=f[d]}}),s.features=f.features.map(function(d){return cloneFeature(d)}),s}function cloneGeometry(f){var s={type:f.type};return f.bbox&&(s.bbox=f.bbox),f.type==="GeometryCollection"?(s.geometries=f.geometries.map(function(d){return cloneGeometry(d)}),s):(s.coordinates=deepSlice(f.coordinates),s)}function deepSlice(f){var s=f;return typeof s[0]!="object"?s.slice():s.map(function(d){return deepSlice(d)})}function isObject$4(f){return!!f&&f.constructor===Object}function coordEach$1(f,s,d){if(f!==null)for(var _,S,T,F,M,P,H,J=0,K=0,z,oe=f.type,se=oe==="FeatureCollection",ae=oe==="Feature",ge=se?f.features.length:1,pe=0;pe<ge;pe++){H=se?f.features[pe].geometry:ae?f.geometry:f,z=H?H.type==="GeometryCollection":!1,M=z?H.geometries.length:1;for(var he=0;he<M;he++){var ve=0,be=0;if(F=z?H.geometries[he]:H,F!==null){P=F.coordinates;var Re=F.type;switch(J=0,Re){case null:break;case"Point":if(s(P,K,pe,ve,be)===!1)return!1;K++,ve++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,pe,ve,be)===!1)return!1;K++,Re==="MultiPoint"&&ve++}Re==="LineString"&&ve++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,pe,ve,be)===!1)return!1;K++}Re==="MultiLineString"&&ve++,Re==="Polygon"&&be++}Re==="Polygon"&&ve++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(be=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,pe,ve,be)===!1)return!1;K++}be++}ve++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach$1(F.geometries[_],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function getCoords$3(f){if(Array.isArray(f))return f;if(f.type==="Feature"){if(f.geometry!==null)return f.geometry.coordinates}else if(f.coordinates)return f.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function transformRotate(f,s,d){if(d=d||{},!isObject$4(d))throw new Error("options is invalid");var _=d.pivot,S=d.mutate;if(!f)throw new Error("geojson is required");if(s==null||isNaN(s))throw new Error("angle is required");return s===0||(_||(_=centroid(f)),(S===!1||S===void 0)&&(f=clone(f)),coordEach$1(f,function(T){var F=rhumbBearing(_,T),M=F+s,P=rhumbDistance(_,T),H=getCoords$3(rhumbDestination(_,P,M));T[0]=H[0],T[1]=H[1]})),f}class RotateMode extends GeoJsonEditMode{constructor(){super(...arguments);Bt(this,"_selectedEditHandle");Bt(this,"_geometryBeingRotated");Bt(this,"_isRotating",!1);Bt(this,"_isSinglePointGeometrySelected",d=>{const{features:_}=d||{};if(Array.isArray(_)&&_.length===1){const{type:S}=getGeom$3(_[0]);return S==="Point"}return!1});Bt(this,"getIsRotating",()=>this._isRotating)}getGuides(d){const _=this._geometryBeingRotated||this.getSelectedFeaturesAsFeatureCollection(d);if(this._isSinglePointGeometrySelected(_))return{type:"FeatureCollection",features:[]};if(this._isRotating)return featureCollection$5([centroid(_)]);const S=bboxPolygon(bbox$1(_));let T=null,F=null,M=0;coordEach$4(S,z=>{if(T){const oe=getIntermediatePosition(z,T);(!F||oe[1]>F[1])&&(F=oe);const se=distance(z,T);M=Math.max(M,se)}T=z});const P=F&&[F[0],F[1]+M/1e3],H=lineString$4([F,P]),J=point$a(P,{guideType:"editHandle",editHandleType:"rotate"}),K=[turfPolygonToLine(S),J,H];return featureCollection$5(K)}handleDragging(d,_){if(!this._isRotating)return;const S=this.getRotateAction(d.pointerDownMapCoords,d.mapCoords,"rotating",_);S&&_.onEdit(S),d.cancelPan()}handlePointerMove(d,_){if(!this._isRotating){const S=getPickedEditHandle(d.picks);this._selectedEditHandle=S&&S.properties.editHandleType==="rotate"?S:null}this.updateCursor(_)}handleStartDragging(d,_){this._selectedEditHandle&&(this._isRotating=!0,this._geometryBeingRotated=this.getSelectedFeaturesAsFeatureCollection(_))}handleStopDragging(d,_){if(this._isRotating){const S=this.getRotateAction(d.pointerDownMapCoords,d.mapCoords,"rotated",_);S&&_.onEdit(S),this._geometryBeingRotated=null,this._selectedEditHandle=null,this._isRotating=!1}}updateCursor(d){this._selectedEditHandle?d.onUpdateCursor("crosshair"):d.onUpdateCursor(null)}getRotateAction(d,_,S,T){if(!this._geometryBeingRotated)return null;const F=centroid(this._geometryBeingRotated),M=getRotationAngle(F,d,_),P=transformRotate(this._geometryBeingRotated,M,{pivot:F});let H=new ImmutableFeatureCollection(T.data);const J=T.selectedIndexes;for(let K=0;K<J.length;K++){const z=J[K],oe=P.features[K];H=H.replaceGeometry(z,oe.geometry)}return{updatedData:H.getObject(),editType:S,editContext:{featureIndexes:J}}}}function getRotationAngle(f,s,d){const _=bearing(f,s);return bearing(f,d)-_}class DuplicateMode extends TranslateMode{handleStartDragging(s,d){super.handleStartDragging(s,d),this._geometryBeforeTranslate&&d.onEdit(this.getAddManyFeaturesAction(this._geometryBeforeTranslate,d.data))}updateCursor(s){this._isTranslatable?s.onUpdateCursor("copy"):s.onUpdateCursor(null)}}function getCoord$1(f){if(!f)throw new Error("coord is required");if(!Array.isArray(f)){if(f.type==="Feature"&&f.geometry!==null&&f.geometry.type==="Point")return f.geometry.coordinates;if(f.type==="Point")return f.coordinates}if(Array.isArray(f)&&f.length>=2&&!Array.isArray(f[0])&&!Array.isArray(f[1]))return f;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function getGeom$1(f){return f.type==="Feature"?f.geometry:f}function booleanPointInPolygon(f,s,d){if(d===void 0&&(d={}),!f)throw new Error("point is required");if(!s)throw new Error("polygon is required");var _=getCoord$1(f),S=getGeom$1(s),T=S.type,F=s.bbox,M=S.coordinates;if(F&&inBBox(_,F)===!1)return!1;T==="Polygon"&&(M=[M]);for(var P=!1,H=0;H<M.length&&!P;H++)if(inRing(_,M[H][0],d.ignoreBoundary)){for(var J=!1,K=1;K<M[H].length&&!J;)inRing(_,M[H][K],!d.ignoreBoundary)&&(J=!0),K++;J||(P=!0)}return P}function inRing(f,s,d){var _=!1;s[0][0]===s[s.length-1][0]&&s[0][1]===s[s.length-1][1]&&(s=s.slice(0,s.length-1));for(var S=0,T=s.length-1;S<s.length;T=S++){var F=s[S][0],M=s[S][1],P=s[T][0],H=s[T][1],J=f[1]*(F-P)+M*(P-f[0])+H*(f[0]-F)===0&&(F-f[0])*(P-f[0])<=0&&(M-f[1])*(H-f[1])<=0;if(J)return!d;var K=M>f[1]!=H>f[1]&&f[0]<(P-F)*(f[1]-M)/(H-M)+F;K&&(_=!_)}return _}function inBBox(f,s){return s[0]<=f[0]&&s[1]<=f[1]&&s[2]>=f[0]&&s[3]>=f[1]}function feature$5(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties={},_.geometry=f,_}function point$3(f,s,d){if(d===void 0&&(d={}),!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$4(f[0])||!isNumber$4(f[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:f};return feature$5(_,s,d)}function featureCollection$2(f,s){s===void 0&&(s={});var d={type:"FeatureCollection"};return s.id&&(d.id=s.id),s.bbox&&(d.bbox=s.bbox),d.features=f,d}function isNumber$4(f){return!isNaN(f)&&f!==null&&!Array.isArray(f)}function getCoords$2(f){if(Array.isArray(f))return f;if(f.type==="Feature"){if(f.geometry!==null)return f.geometry.coordinates}else if(f.coordinates)return f.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function feature$4(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function lineString$1(f,s,d){if(d===void 0&&(d={}),f.length<2)throw new Error("coordinates must be an array of two or more positions");var _={type:"LineString",coordinates:f};return feature$4(_,s,d)}function featureCollection$1(f,s){s===void 0&&(s={});var d={type:"FeatureCollection"};return s.id&&(d.id=s.id),s.bbox&&(d.bbox=s.bbox),d.features=f,d}function getCoords$1(f){if(Array.isArray(f))return f;if(f.type==="Feature"){if(f.geometry!==null)return f.geometry.coordinates}else if(f.coordinates)return f.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function geomEach$3(f,s){var d,_,S,T,F,M,P,H,J,K,z=0,oe=f.type==="FeatureCollection",se=f.type==="Feature",ae=oe?f.features.length:1;for(d=0;d<ae;d++){for(M=oe?f.features[d].geometry:se?f.geometry:f,H=oe?f.features[d].properties:se?f.properties:{},J=oe?f.features[d].bbox:se?f.bbox:void 0,K=oe?f.features[d].id:se?f.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,z,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,z,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],z,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}z++}}function flattenEach$2(f,s){geomEach$3(f,function(d,_,S,T,F){var M=d===null?null:d.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return s(feature$4(d,S,{bbox:T,id:F}),_,0)===!1?!1:void 0}var P;switch(M){case"MultiPoint":P="Point";break;case"MultiLineString":P="LineString";break;case"MultiPolygon":P="Polygon";break}for(var H=0;H<d.coordinates.length;H++){var J=d.coordinates[H],K={type:P,coordinates:J};if(s(feature$4(K,S),_,H)===!1)return!1}})}function lineSegment(f){if(!f)throw new Error("geojson is required");var s=[];return flattenEach$2(f,function(d){lineSegmentFeature(d,s)}),featureCollection$1(s)}function lineSegmentFeature(f,s){var d=[],_=f.geometry;if(_!==null){switch(_.type){case"Polygon":d=getCoords$1(_);break;case"LineString":d=[getCoords$1(_)]}d.forEach(function(S){var T=createSegments(S,f.properties);T.forEach(function(F){F.id=s.length,s.push(F)})})}}function createSegments(f,s){var d=[];return f.reduce(function(_,S){var T=lineString$1([_,S],s);return T.bbox=bbox(_,S),d.push(T),S}),d}function bbox(f,s){var d=f[0],_=f[1],S=s[0],T=s[1],F=d<S?d:S,M=_<T?_:T,P=d>S?d:S,H=_>T?_:T;return[F,M,P,H]}function featureEach$2(f,s){if(f.type==="Feature")s(f,0);else if(f.type==="FeatureCollection")for(var d=0;d<f.features.length&&s(f.features[d],d)!==!1;d++);}var geojsonRbush$1={exports:{}},rbush_min={exports:{}};(function(f,s){(function(d,_){f.exports=_()})(commonjsGlobal,function(){function d(he,ve,be,Re,Fe){(function ye(Ue,It,St,At,xt){for(;At>St;){if(At-St>600){var Ct=At-St+1,Nt=It-St+1,qt=Math.log(Ct),Jn=.5*Math.exp(2*qt/3),qr=.5*Math.sqrt(qt*Jn*(Ct-Jn)/Ct)*(Nt-Ct/2<0?-1:1),na=Math.max(St,Math.floor(It-Nt*Jn/Ct+qr)),qn=Math.min(At,Math.floor(It+(Ct-Nt)*Jn/Ct+qr));ye(Ue,It,na,qn,xt)}var vA=Ue[It],TA=St,VA=At;for(_(Ue,St,It),xt(Ue[At],vA)>0&&_(Ue,St,At);TA<VA;){for(_(Ue,TA,VA),TA++,VA--;xt(Ue[TA],vA)<0;)TA++;for(;xt(Ue[VA],vA)>0;)VA--}xt(Ue[St],vA)===0?_(Ue,St,VA):_(Ue,++VA,At),VA<=It&&(St=VA+1),It<=VA&&(At=VA-1)}})(he,ve,be||0,Re||he.length-1,Fe||S)}function _(he,ve,be){var Re=he[ve];he[ve]=he[be],he[be]=Re}function S(he,ve){return he<ve?-1:he>ve?1:0}var T=function(he){he===void 0&&(he=9),this._maxEntries=Math.max(4,he),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function F(he,ve,be){if(!be)return ve.indexOf(he);for(var Re=0;Re<ve.length;Re++)if(be(he,ve[Re]))return Re;return-1}function M(he,ve){P(he,0,he.children.length,ve,he)}function P(he,ve,be,Re,Fe){Fe||(Fe=ge(null)),Fe.minX=1/0,Fe.minY=1/0,Fe.maxX=-1/0,Fe.maxY=-1/0;for(var ye=ve;ye<be;ye++){var Ue=he.children[ye];H(Fe,he.leaf?Re(Ue):Ue)}return Fe}function H(he,ve){return he.minX=Math.min(he.minX,ve.minX),he.minY=Math.min(he.minY,ve.minY),he.maxX=Math.max(he.maxX,ve.maxX),he.maxY=Math.max(he.maxY,ve.maxY),he}function J(he,ve){return he.minX-ve.minX}function K(he,ve){return he.minY-ve.minY}function z(he){return(he.maxX-he.minX)*(he.maxY-he.minY)}function oe(he){return he.maxX-he.minX+(he.maxY-he.minY)}function se(he,ve){return he.minX<=ve.minX&&he.minY<=ve.minY&&ve.maxX<=he.maxX&&ve.maxY<=he.maxY}function ae(he,ve){return ve.minX<=he.maxX&&ve.minY<=he.maxY&&ve.maxX>=he.minX&&ve.maxY>=he.minY}function ge(he){return{children:he,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function pe(he,ve,be,Re,Fe){for(var ye=[ve,be];ye.length;)if(!((be=ye.pop())-(ve=ye.pop())<=Re)){var Ue=ve+Math.ceil((be-ve)/Re/2)*Re;d(he,Ue,ve,be,Fe),ye.push(ve,Ue,Ue,be)}}return T.prototype.all=function(){return this._all(this.data,[])},T.prototype.search=function(he){var ve=this.data,be=[];if(!ae(he,ve))return be;for(var Re=this.toBBox,Fe=[];ve;){for(var ye=0;ye<ve.children.length;ye++){var Ue=ve.children[ye],It=ve.leaf?Re(Ue):Ue;ae(he,It)&&(ve.leaf?be.push(Ue):se(he,It)?this._all(Ue,be):Fe.push(Ue))}ve=Fe.pop()}return be},T.prototype.collides=function(he){var ve=this.data;if(!ae(he,ve))return!1;for(var be=[];ve;){for(var Re=0;Re<ve.children.length;Re++){var Fe=ve.children[Re],ye=ve.leaf?this.toBBox(Fe):Fe;if(ae(he,ye)){if(ve.leaf||se(he,ye))return!0;be.push(Fe)}}ve=be.pop()}return!1},T.prototype.load=function(he){if(!he||!he.length)return this;if(he.length<this._minEntries){for(var ve=0;ve<he.length;ve++)this.insert(he[ve]);return this}var be=this._build(he.slice(),0,he.length-1,0);if(this.data.children.length)if(this.data.height===be.height)this._splitRoot(this.data,be);else{if(this.data.height<be.height){var Re=this.data;this.data=be,be=Re}this._insert(be,this.data.height-be.height-1,!0)}else this.data=be;return this},T.prototype.insert=function(he){return he&&this._insert(he,this.data.height-1),this},T.prototype.clear=function(){return this.data=ge([]),this},T.prototype.remove=function(he,ve){if(!he)return this;for(var be,Re,Fe,ye=this.data,Ue=this.toBBox(he),It=[],St=[];ye||It.length;){if(ye||(ye=It.pop(),Re=It[It.length-1],be=St.pop(),Fe=!0),ye.leaf){var At=F(he,ye.children,ve);if(At!==-1)return ye.children.splice(At,1),It.push(ye),this._condense(It),this}Fe||ye.leaf||!se(ye,Ue)?Re?(be++,ye=Re.children[be],Fe=!1):ye=null:(It.push(ye),St.push(be),be=0,Re=ye,ye=ye.children[0])}return this},T.prototype.toBBox=function(he){return he},T.prototype.compareMinX=function(he,ve){return he.minX-ve.minX},T.prototype.compareMinY=function(he,ve){return he.minY-ve.minY},T.prototype.toJSON=function(){return this.data},T.prototype.fromJSON=function(he){return this.data=he,this},T.prototype._all=function(he,ve){for(var be=[];he;)he.leaf?ve.push.apply(ve,he.children):be.push.apply(be,he.children),he=be.pop();return ve},T.prototype._build=function(he,ve,be,Re){var Fe,ye=be-ve+1,Ue=this._maxEntries;if(ye<=Ue)return M(Fe=ge(he.slice(ve,be+1)),this.toBBox),Fe;Re||(Re=Math.ceil(Math.log(ye)/Math.log(Ue)),Ue=Math.ceil(ye/Math.pow(Ue,Re-1))),(Fe=ge([])).leaf=!1,Fe.height=Re;var It=Math.ceil(ye/Ue),St=It*Math.ceil(Math.sqrt(Ue));pe(he,ve,be,St,this.compareMinX);for(var At=ve;At<=be;At+=St){var xt=Math.min(At+St-1,be);pe(he,At,xt,It,this.compareMinY);for(var Ct=At;Ct<=xt;Ct+=It){var Nt=Math.min(Ct+It-1,xt);Fe.children.push(this._build(he,Ct,Nt,Re-1))}}return M(Fe,this.toBBox),Fe},T.prototype._chooseSubtree=function(he,ve,be,Re){for(;Re.push(ve),!ve.leaf&&Re.length-1!==be;){for(var Fe=1/0,ye=1/0,Ue=void 0,It=0;It<ve.children.length;It++){var St=ve.children[It],At=z(St),xt=(Ct=he,Nt=St,(Math.max(Nt.maxX,Ct.maxX)-Math.min(Nt.minX,Ct.minX))*(Math.max(Nt.maxY,Ct.maxY)-Math.min(Nt.minY,Ct.minY))-At);xt<ye?(ye=xt,Fe=At<Fe?At:Fe,Ue=St):xt===ye&&At<Fe&&(Fe=At,Ue=St)}ve=Ue||ve.children[0]}var Ct,Nt;return ve},T.prototype._insert=function(he,ve,be){var Re=be?he:this.toBBox(he),Fe=[],ye=this._chooseSubtree(Re,this.data,ve,Fe);for(ye.children.push(he),H(ye,Re);ve>=0&&Fe[ve].children.length>this._maxEntries;)this._split(Fe,ve),ve--;this._adjustParentBBoxes(Re,Fe,ve)},T.prototype._split=function(he,ve){var be=he[ve],Re=be.children.length,Fe=this._minEntries;this._chooseSplitAxis(be,Fe,Re);var ye=this._chooseSplitIndex(be,Fe,Re),Ue=ge(be.children.splice(ye,be.children.length-ye));Ue.height=be.height,Ue.leaf=be.leaf,M(be,this.toBBox),M(Ue,this.toBBox),ve?he[ve-1].children.push(Ue):this._splitRoot(be,Ue)},T.prototype._splitRoot=function(he,ve){this.data=ge([he,ve]),this.data.height=he.height+1,this.data.leaf=!1,M(this.data,this.toBBox)},T.prototype._chooseSplitIndex=function(he,ve,be){for(var Re,Fe,ye,Ue,It,St,At,xt=1/0,Ct=1/0,Nt=ve;Nt<=be-ve;Nt++){var qt=P(he,0,Nt,this.toBBox),Jn=P(he,Nt,be,this.toBBox),qr=(Fe=qt,ye=Jn,Ue=void 0,It=void 0,St=void 0,At=void 0,Ue=Math.max(Fe.minX,ye.minX),It=Math.max(Fe.minY,ye.minY),St=Math.min(Fe.maxX,ye.maxX),At=Math.min(Fe.maxY,ye.maxY),Math.max(0,St-Ue)*Math.max(0,At-It)),na=z(qt)+z(Jn);qr<xt?(xt=qr,Re=Nt,Ct=na<Ct?na:Ct):qr===xt&&na<Ct&&(Ct=na,Re=Nt)}return Re||be-ve},T.prototype._chooseSplitAxis=function(he,ve,be){var Re=he.leaf?this.compareMinX:J,Fe=he.leaf?this.compareMinY:K;this._allDistMargin(he,ve,be,Re)<this._allDistMargin(he,ve,be,Fe)&&he.children.sort(Re)},T.prototype._allDistMargin=function(he,ve,be,Re){he.children.sort(Re);for(var Fe=this.toBBox,ye=P(he,0,ve,Fe),Ue=P(he,be-ve,be,Fe),It=oe(ye)+oe(Ue),St=ve;St<be-ve;St++){var At=he.children[St];H(ye,he.leaf?Fe(At):At),It+=oe(ye)}for(var xt=be-ve-1;xt>=ve;xt--){var Ct=he.children[xt];H(Ue,he.leaf?Fe(Ct):Ct),It+=oe(Ue)}return It},T.prototype._adjustParentBBoxes=function(he,ve,be){for(var Re=be;Re>=0;Re--)H(ve[Re],he)},T.prototype._condense=function(he){for(var ve=he.length-1,be=void 0;ve>=0;ve--)he[ve].children.length===0?ve>0?(be=he[ve-1].children).splice(be.indexOf(he[ve]),1):this.clear():M(he[ve],this.toBBox)},T})})(rbush_min);var rbush_minExports=rbush_min.exports,js$2={};(function(f){Object.defineProperty(f,"__esModule",{value:!0}),f.earthRadius=63710088e-1,f.factors={centimeters:f.earthRadius*100,centimetres:f.earthRadius*100,degrees:f.earthRadius/111325,feet:f.earthRadius*3.28084,inches:f.earthRadius*39.37,kilometers:f.earthRadius/1e3,kilometres:f.earthRadius/1e3,meters:f.earthRadius,metres:f.earthRadius,miles:f.earthRadius/1609.344,millimeters:f.earthRadius*1e3,millimetres:f.earthRadius*1e3,nauticalmiles:f.earthRadius/1852,radians:1,yards:f.earthRadius*1.0936},f.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/f.earthRadius,yards:1.0936133},f.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(At,xt,Ct){Ct===void 0&&(Ct={});var Nt={type:"Feature"};return(Ct.id===0||Ct.id)&&(Nt.id=Ct.id),Ct.bbox&&(Nt.bbox=Ct.bbox),Nt.properties=xt||{},Nt.geometry=At,Nt}f.feature=s;function d(At,xt,Ct){switch(At){case"Point":return _(xt).geometry;case"LineString":return M(xt).geometry;case"Polygon":return T(xt).geometry;case"MultiPoint":return K(xt).geometry;case"MultiLineString":return J(xt).geometry;case"MultiPolygon":return z(xt).geometry;default:throw new Error(At+" is invalid")}}f.geometry=d;function _(At,xt,Ct){if(Ct===void 0&&(Ct={}),!At)throw new Error("coordinates is required");if(!Array.isArray(At))throw new Error("coordinates must be an Array");if(At.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ye(At[0])||!ye(At[1]))throw new Error("coordinates must contain numbers");var Nt={type:"Point",coordinates:At};return s(Nt,xt,Ct)}f.point=_;function S(At,xt,Ct){return Ct===void 0&&(Ct={}),H(At.map(function(Nt){return _(Nt,xt)}),Ct)}f.points=S;function T(At,xt,Ct){Ct===void 0&&(Ct={});for(var Nt=0,qt=At;Nt<qt.length;Nt++){var Jn=qt[Nt];if(Jn.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var qr=0;qr<Jn[Jn.length-1].length;qr++)if(Jn[Jn.length-1][qr]!==Jn[0][qr])throw new Error("First and last Position are not equivalent.")}var na={type:"Polygon",coordinates:At};return s(na,xt,Ct)}f.polygon=T;function F(At,xt,Ct){return Ct===void 0&&(Ct={}),H(At.map(function(Nt){return T(Nt,xt)}),Ct)}f.polygons=F;function M(At,xt,Ct){if(Ct===void 0&&(Ct={}),At.length<2)throw new Error("coordinates must be an array of two or more positions");var Nt={type:"LineString",coordinates:At};return s(Nt,xt,Ct)}f.lineString=M;function P(At,xt,Ct){return Ct===void 0&&(Ct={}),H(At.map(function(Nt){return M(Nt,xt)}),Ct)}f.lineStrings=P;function H(At,xt){xt===void 0&&(xt={});var Ct={type:"FeatureCollection"};return xt.id&&(Ct.id=xt.id),xt.bbox&&(Ct.bbox=xt.bbox),Ct.features=At,Ct}f.featureCollection=H;function J(At,xt,Ct){Ct===void 0&&(Ct={});var Nt={type:"MultiLineString",coordinates:At};return s(Nt,xt,Ct)}f.multiLineString=J;function K(At,xt,Ct){Ct===void 0&&(Ct={});var Nt={type:"MultiPoint",coordinates:At};return s(Nt,xt,Ct)}f.multiPoint=K;function z(At,xt,Ct){Ct===void 0&&(Ct={});var Nt={type:"MultiPolygon",coordinates:At};return s(Nt,xt,Ct)}f.multiPolygon=z;function oe(At,xt,Ct){Ct===void 0&&(Ct={});var Nt={type:"GeometryCollection",geometries:At};return s(Nt,xt,Ct)}f.geometryCollection=oe;function se(At,xt){if(xt===void 0&&(xt=0),xt&&!(xt>=0))throw new Error("precision must be a positive number");var Ct=Math.pow(10,xt||0);return Math.round(At*Ct)/Ct}f.round=se;function ae(At,xt){xt===void 0&&(xt="kilometers");var Ct=f.factors[xt];if(!Ct)throw new Error(xt+" units is invalid");return At*Ct}f.radiansToLength=ae;function ge(At,xt){xt===void 0&&(xt="kilometers");var Ct=f.factors[xt];if(!Ct)throw new Error(xt+" units is invalid");return At/Ct}f.lengthToRadians=ge;function pe(At,xt){return ve(ge(At,xt))}f.lengthToDegrees=pe;function he(At){var xt=At%360;return xt<0&&(xt+=360),xt}f.bearingToAzimuth=he;function ve(At){var xt=At%(2*Math.PI);return xt*180/Math.PI}f.radiansToDegrees=ve;function be(At){var xt=At%360;return xt*Math.PI/180}f.degreesToRadians=be;function Re(At,xt,Ct){if(xt===void 0&&(xt="kilometers"),Ct===void 0&&(Ct="kilometers"),!(At>=0))throw new Error("length must be a positive number");return ae(ge(At,xt),Ct)}f.convertLength=Re;function Fe(At,xt,Ct){if(xt===void 0&&(xt="meters"),Ct===void 0&&(Ct="kilometers"),!(At>=0))throw new Error("area must be a positive number");var Nt=f.areaFactors[xt];if(!Nt)throw new Error("invalid original units");var qt=f.areaFactors[Ct];if(!qt)throw new Error("invalid final units");return At/Nt*qt}f.convertArea=Fe;function ye(At){return!isNaN(At)&&At!==null&&!Array.isArray(At)}f.isNumber=ye;function Ue(At){return!!At&&At.constructor===Object}f.isObject=Ue;function It(At){if(!At)throw new Error("bbox is required");if(!Array.isArray(At))throw new Error("bbox must be an Array");if(At.length!==4&&At.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");At.forEach(function(xt){if(!ye(xt))throw new Error("bbox must only contain numbers")})}f.validateBBox=It;function St(At){if(!At)throw new Error("id is required");if(["string","number"].indexOf(typeof At)===-1)throw new Error("id must be a number or a string")}f.validateId=St})(js$2);var js$1={};Object.defineProperty(js$1,"__esModule",{value:!0});var helpers$1=js$2;function coordEach(f,s,d){if(f!==null)for(var _,S,T,F,M,P,H,J=0,K=0,z,oe=f.type,se=oe==="FeatureCollection",ae=oe==="Feature",ge=se?f.features.length:1,pe=0;pe<ge;pe++){H=se?f.features[pe].geometry:ae?f.geometry:f,z=H?H.type==="GeometryCollection":!1,M=z?H.geometries.length:1;for(var he=0;he<M;he++){var ve=0,be=0;if(F=z?H.geometries[he]:H,F!==null){P=F.coordinates;var Re=F.type;switch(J=d&&(Re==="Polygon"||Re==="MultiPolygon")?1:0,Re){case null:break;case"Point":if(s(P,K,pe,ve,be)===!1)return!1;K++,ve++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,pe,ve,be)===!1)return!1;K++,Re==="MultiPoint"&&ve++}Re==="LineString"&&ve++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,pe,ve,be)===!1)return!1;K++}Re==="MultiLineString"&&ve++,Re==="Polygon"&&be++}Re==="Polygon"&&ve++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(be=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,pe,ve,be)===!1)return!1;K++}be++}ve++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach(F.geometries[_],s,d)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function coordReduce(f,s,d,_){var S=d;return coordEach(f,function(T,F,M,P,H){F===0&&d===void 0?S=T:S=s(S,T,F,M,P,H)},_),S}function propEach(f,s){var d;switch(f.type){case"FeatureCollection":for(d=0;d<f.features.length&&s(f.features[d].properties,d)!==!1;d++);break;case"Feature":s(f.properties,0);break}}function propReduce(f,s,d){var _=d;return propEach(f,function(S,T){T===0&&d===void 0?_=S:_=s(_,S,T)}),_}function featureEach$1(f,s){if(f.type==="Feature")s(f,0);else if(f.type==="FeatureCollection")for(var d=0;d<f.features.length&&s(f.features[d],d)!==!1;d++);}function featureReduce(f,s,d){var _=d;return featureEach$1(f,function(S,T){T===0&&d===void 0?_=S:_=s(_,S,T)}),_}function coordAll(f){var s=[];return coordEach(f,function(d){s.push(d)}),s}function geomEach$2(f,s){var d,_,S,T,F,M,P,H,J,K,z=0,oe=f.type==="FeatureCollection",se=f.type==="Feature",ae=oe?f.features.length:1;for(d=0;d<ae;d++){for(M=oe?f.features[d].geometry:se?f.geometry:f,H=oe?f.features[d].properties:se?f.properties:{},J=oe?f.features[d].bbox:se?f.bbox:void 0,K=oe?f.features[d].id:se?f.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,z,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,z,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],z,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}z++}}function geomReduce$1(f,s,d){var _=d;return geomEach$2(f,function(S,T,F,M,P){T===0&&d===void 0?_=S:_=s(_,S,T,F,M,P)}),_}function flattenEach$1(f,s){geomEach$2(f,function(d,_,S,T,F){var M=d===null?null:d.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return s(helpers$1.feature(d,S,{bbox:T,id:F}),_,0)===!1?!1:void 0}var P;switch(M){case"MultiPoint":P="Point";break;case"MultiLineString":P="LineString";break;case"MultiPolygon":P="Polygon";break}for(var H=0;H<d.coordinates.length;H++){var J=d.coordinates[H],K={type:P,coordinates:J};if(s(helpers$1.feature(K,S),_,H)===!1)return!1}})}function flattenReduce(f,s,d){var _=d;return flattenEach$1(f,function(S,T,F){T===0&&F===0&&d===void 0?_=S:_=s(_,S,T,F)}),_}function segmentEach(f,s){flattenEach$1(f,function(d,_,S){var T=0;if(d.geometry){var F=d.geometry.type;if(!(F==="Point"||F==="MultiPoint")){var M,P=0,H=0,J=0;if(coordEach(d,function(K,z,oe,se,ae){if(M===void 0||_>P||se>H||ae>J){M=K,P=_,H=se,J=ae,T=0;return}var ge=helpers$1.lineString([M,K],d.properties);if(s(ge,_,S,ae,T)===!1)return!1;T++,M=K})===!1)return!1}}})}function segmentReduce(f,s,d){var _=d,S=!1;return segmentEach(f,function(T,F,M,P,H){S===!1&&d===void 0?_=T:_=s(_,T,F,M,P,H),S=!0}),_}function lineEach(f,s){if(!f)throw new Error("geojson is required");flattenEach$1(f,function(d,_,S){if(d.geometry!==null){var T=d.geometry.type,F=d.geometry.coordinates;switch(T){case"LineString":if(s(d,_,S,0,0)===!1)return!1;break;case"Polygon":for(var M=0;M<F.length;M++)if(s(helpers$1.lineString(F[M],d.properties),_,S,M)===!1)return!1;break}}})}function lineReduce(f,s,d){var _=d;return lineEach(f,function(S,T,F,M){T===0&&d===void 0?_=S:_=s(_,S,T,F,M)}),_}function findSegment(f,s){if(s=s||{},!helpers$1.isObject(s))throw new Error("options is invalid");var d=s.featureIndex||0,_=s.multiFeatureIndex||0,S=s.geometryIndex||0,T=s.segmentIndex||0,F=s.properties,M;switch(f.type){case"FeatureCollection":d<0&&(d=f.features.length+d),F=F||f.features[d].properties,M=f.features[d].geometry;break;case"Feature":F=F||f.properties,M=f.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=f;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var P=M.coordinates;switch(M.type){case"Point":case"MultiPoint":return null;case"LineString":return T<0&&(T=P.length+T-1),helpers$1.lineString([P[T],P[T+1]],F,s);case"Polygon":return S<0&&(S=P.length+S),T<0&&(T=P[S].length+T-1),helpers$1.lineString([P[S][T],P[S][T+1]],F,s);case"MultiLineString":return _<0&&(_=P.length+_),T<0&&(T=P[_].length+T-1),helpers$1.lineString([P[_][T],P[_][T+1]],F,s);case"MultiPolygon":return _<0&&(_=P.length+_),S<0&&(S=P[_].length+S),T<0&&(T=P[_][S].length-T-1),helpers$1.lineString([P[_][S][T],P[_][S][T+1]],F,s)}throw new Error("geojson is invalid")}function findPoint(f,s){if(s=s||{},!helpers$1.isObject(s))throw new Error("options is invalid");var d=s.featureIndex||0,_=s.multiFeatureIndex||0,S=s.geometryIndex||0,T=s.coordIndex||0,F=s.properties,M;switch(f.type){case"FeatureCollection":d<0&&(d=f.features.length+d),F=F||f.features[d].properties,M=f.features[d].geometry;break;case"Feature":F=F||f.properties,M=f.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=f;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var P=M.coordinates;switch(M.type){case"Point":return helpers$1.point(P,F,s);case"MultiPoint":return _<0&&(_=P.length+_),helpers$1.point(P[_],F,s);case"LineString":return T<0&&(T=P.length+T),helpers$1.point(P[T],F,s);case"Polygon":return S<0&&(S=P.length+S),T<0&&(T=P[S].length+T),helpers$1.point(P[S][T],F,s);case"MultiLineString":return _<0&&(_=P.length+_),T<0&&(T=P[_].length+T),helpers$1.point(P[_][T],F,s);case"MultiPolygon":return _<0&&(_=P.length+_),S<0&&(S=P[_].length+S),T<0&&(T=P[_][S].length-T),helpers$1.point(P[_][S][T],F,s)}throw new Error("geojson is invalid")}js$1.coordAll=coordAll;js$1.coordEach=coordEach;js$1.coordReduce=coordReduce;js$1.featureEach=featureEach$1;js$1.featureReduce=featureReduce;js$1.findPoint=findPoint;js$1.findSegment=findSegment;js$1.flattenEach=flattenEach$1;js$1.flattenReduce=flattenReduce;js$1.geomEach=geomEach$2;js$1.geomReduce=geomReduce$1;js$1.lineEach=lineEach;js$1.lineReduce=lineReduce;js$1.propEach=propEach;js$1.propReduce=propReduce;js$1.segmentEach=segmentEach;js$1.segmentReduce=segmentReduce;const require$$3=getAugmentedNamespace(es$1);var rbush=rbush_minExports,helpers=js$2,meta=js$1,turfBBox=require$$3.default,featureEach=meta.featureEach;meta.coordEach;helpers.polygon;var featureCollection=helpers.featureCollection;function geojsonRbush(f){var s=new rbush(f);return s.insert=function(d){if(d.type!=="Feature")throw new Error("invalid feature");return d.bbox=d.bbox?d.bbox:turfBBox(d),rbush.prototype.insert.call(this,d)},s.load=function(d){var _=[];return Array.isArray(d)?d.forEach(function(S){if(S.type!=="Feature")throw new Error("invalid features");S.bbox=S.bbox?S.bbox:turfBBox(S),_.push(S)}):featureEach(d,function(S){if(S.type!=="Feature")throw new Error("invalid features");S.bbox=S.bbox?S.bbox:turfBBox(S),_.push(S)}),rbush.prototype.load.call(this,_)},s.remove=function(d,_){if(d.type!=="Feature")throw new Error("invalid feature");return d.bbox=d.bbox?d.bbox:turfBBox(d),rbush.prototype.remove.call(this,d,_)},s.clear=function(){return rbush.prototype.clear.call(this)},s.search=function(d){var _=rbush.prototype.search.call(this,this.toBBox(d));return featureCollection(_)},s.collides=function(d){return rbush.prototype.collides.call(this,this.toBBox(d))},s.all=function(){var d=rbush.prototype.all.call(this);return featureCollection(d)},s.toJSON=function(){return rbush.prototype.toJSON.call(this)},s.fromJSON=function(d){return rbush.prototype.fromJSON.call(this,d)},s.toBBox=function(d){var _;if(d.bbox)_=d.bbox;else if(Array.isArray(d)&&d.length===4)_=d;else if(Array.isArray(d)&&d.length===6)_=[d[0],d[1],d[3],d[4]];else if(d.type==="Feature")_=turfBBox(d);else if(d.type==="FeatureCollection")_=turfBBox(d);else throw new Error("invalid geojson");return{minX:_[0],minY:_[1],maxX:_[2],maxY:_[3]}},s}geojsonRbush$1.exports=geojsonRbush;geojsonRbush$1.exports.default=geojsonRbush;var geojsonRbushExports=geojsonRbush$1.exports;const rbush$1=getDefaultExportFromCjs(geojsonRbushExports);function lineIntersect(f,s){var d={},_=[];if(f.type==="LineString"&&(f=feature$5(f)),s.type==="LineString"&&(s=feature$5(s)),f.type==="Feature"&&s.type==="Feature"&&f.geometry!==null&&s.geometry!==null&&f.geometry.type==="LineString"&&s.geometry.type==="LineString"&&f.geometry.coordinates.length===2&&s.geometry.coordinates.length===2){var S=intersects(f,s);return S&&_.push(S),featureCollection$2(_)}var T=rbush$1();return T.load(lineSegment(s)),featureEach$2(lineSegment(f),function(F){featureEach$2(T.search(F),function(M){var P=intersects(F,M);if(P){var H=getCoords$2(P).join(",");d[H]||(d[H]=!0,_.push(P))}})}),featureCollection$2(_)}function intersects(f,s){var d=getCoords$2(f),_=getCoords$2(s);if(d.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(_.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var S=d[0][0],T=d[0][1],F=d[1][0],M=d[1][1],P=_[0][0],H=_[0][1],J=_[1][0],K=_[1][1],z=(K-H)*(F-S)-(J-P)*(M-T),oe=(J-P)*(T-H)-(K-H)*(S-P),se=(F-S)*(T-H)-(M-T)*(S-P);if(z===0)return null;var ae=oe/z,ge=se/z;if(ae>=0&&ae<=1&&ge>=0&&ge<=1){var pe=S+ae*(F-S),he=T+ae*(M-T);return point$3([pe,he])}return null}function feature$3(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function point$2(f,s,d){if(d===void 0&&(d={}),!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$3(f[0])||!isNumber$3(f[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:f};return feature$3(_,s,d)}function lineString(f,s,d){if(d===void 0&&(d={}),f.length<2)throw new Error("coordinates must be an array of two or more positions");var _={type:"LineString",coordinates:f};return feature$3(_,s,d)}function isNumber$3(f){return!isNaN(f)&&f!==null&&!Array.isArray(f)}function geomEach$1(f,s){var d,_,S,T,F,M,P,H,J,K,z=0,oe=f.type==="FeatureCollection",se=f.type==="Feature",ae=oe?f.features.length:1;for(d=0;d<ae;d++){for(M=oe?f.features[d].geometry:se?f.geometry:f,H=oe?f.features[d].properties:se?f.properties:{},J=oe?f.features[d].bbox:se?f.bbox:void 0,K=oe?f.features[d].id:se?f.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,z,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,z,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],z,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}z++}}function flattenEach(f,s){geomEach$1(f,function(d,_,S,T,F){var M=d===null?null:d.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return s(feature$3(d,S,{bbox:T,id:F}),_,0)===!1?!1:void 0}var P;switch(M){case"MultiPoint":P="Point";break;case"MultiLineString":P="LineString";break;case"MultiPolygon":P="Polygon";break}for(var H=0;H<d.coordinates.length;H++){var J=d.coordinates[H],K={type:P,coordinates:J};if(s(feature$3(K,S),_,H)===!1)return!1}})}function getCoords(f){if(Array.isArray(f))return f;if(f.type==="Feature"){if(f.geometry!==null)return f.geometry.coordinates}else if(f.coordinates)return f.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function nearestPointOnLine(f,s,d){d===void 0&&(d={});var _=point$2([1/0,1/0],{dist:1/0}),S=0;return flattenEach(f,function(T){for(var F=getCoords(T),M=0;M<F.length-1;M++){var P=point$2(F[M]);P.properties.dist=distance(s,P,d);var H=point$2(F[M+1]);H.properties.dist=distance(s,H,d);var J=distance(P,H,d),K=Math.max(P.properties.dist,H.properties.dist),z=bearing(P,H),oe=destination(s,K,z+90,d),se=destination(s,K,z-90,d),ae=lineIntersect(lineString([oe.geometry.coordinates,se.geometry.coordinates]),lineString([P.geometry.coordinates,H.geometry.coordinates])),ge=null;ae.features.length>0&&(ge=ae.features[0],ge.properties.dist=distance(s,ge,d),ge.properties.location=S+distance(P,ge,d)),P.properties.dist<_.properties.dist&&(_=P,_.properties.index=M,_.properties.location=S),H.properties.dist<_.properties.dist&&(_=H,_.properties.index=M+1,_.properties.location=S+J),ge&&ge.properties.dist<_.properties.dist&&(_=ge,_.properties.index=M),S+=J}}),_}class SplitPolygonMode extends GeoJsonEditMode{calculateMapCoords(s,d,_){const S=_.modeConfig;if(!S||!S.lock90Degree||!s.length)return d;if(s.length===1){const P=s[0],H=this.getSelectedGeometry(_),J=turfPolygonToLine(H),K=J.type==="FeatureCollection"?J.features:[J];let z=Number.MAX_SAFE_INTEGER,oe=null;if(K.forEach(se=>{const ae=nearestPointOnLine(se,P),ge=distance(ae,P);z>ge&&(z=ge,oe=ae)}),oe){const se=bearing(P,oe),ae=distance(P,d,{units:"meters"});return destination(P,ae,se,{units:"meters"}).geometry.coordinates}return d}const T=s[s.length-1],[F]=generatePointsParallelToLinePoints(s[s.length-2],T,d);return nearestPointOnLine(lineString$4([T,F]),d).geometry.coordinates}getGuides(s){const d=this.getClickSequence(),_={type:"FeatureCollection",features:[]};if(d.length===0||!s.lastPointerMoveEvent)return _;const{mapCoords:S}=s.lastPointerMoveEvent;return _.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[...d,this.calculateMapCoords(d,S,s)]}}),_}handleClick(s,d){const _=this.getTentativeGuide(d),S=this.getSelectedGeometry(d);if(!S){console.warn("A polygon must be selected for splitting");return}const T=this.getClickSequence();_&&_.geometry.type==="LineString"?T.push(_.geometry.coordinates[_.geometry.coordinates.length-1]):this.addClickSequence(s);const F={type:"Point",coordinates:T[T.length-1]},M=booleanPointInPolygon(F,S);if(T.length>1&&_&&!M){if(this.resetClickSequence(),lineIntersect(_,S).features.length===0)return;const H=this.splitPolygon(_,d);H&&d.onEdit(H)}}handlePointerMove(s,d){d.onUpdateCursor("cell")}splitPolygon(s,d){const _=this.getSelectedGeometry(d),S=d.selectedIndexes[0],T=d.modeConfig||{};let{gap:F=.1,units:M="centimeters"}=T;F===0&&(F=.1,M="centimeters");const P=buffer(s,F,{units:M}),H=difference(_,P);if(!H)return console.warn("Canceling edit. Split Polygon erased"),null;const{type:J,coordinates:K}=H.geometry;let z=[];return J==="Polygon"?z=K.map(ae=>[ae]):z=K.reduce((ae,ge)=>(ge.forEach(pe=>{ae.push([pe])}),ae),[]),{updatedData:new ImmutableFeatureCollection(d.data).replaceGeometry(S,{type:"MultiPolygon",coordinates:z}).getObject(),editType:"split",editContext:{featureIndexes:[S]}}}}class ExtrudeMode extends ModifyMode{constructor(){super(...arguments);Bt(this,"isPointAdded",!1)}handleDragging(d,_){const S=getPickedEditHandle(d.pointerDownPicks);if(S){const{featureIndex:T}=S.properties;let{positionIndexes:F}=S.properties;const M=this.coordinatesSize(F,T,_.data);F=this.isPointAdded?this.nextPositionIndexes(F,M):F;const P=this.getPointForPositionIndexes(this.prevPositionIndexes(F,M),T,_.data),H=this.getPointForPositionIndexes(F,T,_.data);if(P&&H){const[J,K]=generatePointsParallelToLinePoints(P,H,d.mapCoords),z=new ImmutableFeatureCollection(_.data).replacePosition(T,this.prevPositionIndexes(F,M),K).replacePosition(T,F,J).getObject();_.onEdit({updatedData:z,editType:"extruding",editContext:{featureIndexes:[T],positionIndexes:this.nextPositionIndexes(F,M),position:J}}),d.cancelPan()}}}handleStartDragging(d,_){const S=_.selectedIndexes,T=getPickedIntermediateEditHandle(d.picks);if(S.length&&T){const{positionIndexes:F,featureIndex:M}=T.properties,P=this.coordinatesSize(F,M,_.data),H=this.getPointForPositionIndexes(this.prevPositionIndexes(F,P),M,_.data),J=this.getPointForPositionIndexes(F,M,_.data);if(H&&J){let K=new ImmutableFeatureCollection(_.data);this.isOrthogonal(F,M,P,_.data)||(K=K.addPosition(M,F,J)),this.isOrthogonal(this.prevPositionIndexes(F,P),M,P,_.data)||(K=K.addPosition(M,F,H),this.isPointAdded=!0),_.onEdit({updatedData:K.getObject(),editType:"startExtruding",editContext:{featureIndexes:[M],positionIndexes:F,position:H}})}}}handleStopDragging(d,_){const S=_.selectedIndexes,T=getPickedEditHandle(d.pointerDownPicks);if(S.length&&T){const{featureIndex:F}=T.properties;let{positionIndexes:M}=T.properties;const P=this.coordinatesSize(M,F,_.data);M=this.isPointAdded?this.nextPositionIndexes(M,P):M;const H=this.getPointForPositionIndexes(this.prevPositionIndexes(M,P),F,_.data),J=this.getPointForPositionIndexes(M,F,_.data);if(H&&J){const[K,z]=generatePointsParallelToLinePoints(H,J,d.mapCoords),oe=new ImmutableFeatureCollection(_.data).replacePosition(F,this.prevPositionIndexes(M,P),z).replacePosition(F,M,K).getObject();_.onEdit({updatedData:oe,editType:"extruded",editContext:{featureIndexes:[F],positionIndexes:M,position:K}})}}this.isPointAdded=!1}coordinatesSize(d,_,{features:S}){let T=0;if(Array.isArray(d)){const M=S[_].geometry.coordinates;if(d.length===3){const[P,H]=d;M.length&&M[P].length&&(T=M[P][H].length)}else{const[P]=d;M.length&&M[P].length&&(T=M[P].length)}}return T}getBearing(d,_){const S=bearing(d,_);return S<0?Math.floor(360+S):Math.floor(S)}isOrthogonal(d,_,S,T){if(!Array.isArray(d))return!1;d[d.length-1]===S-1&&(d[d.length-1]=0);const F=this.getPointForPositionIndexes(this.prevPositionIndexes(d,S),_,T),M=this.getPointForPositionIndexes(this.nextPositionIndexes(d,S),_,T),P=this.getPointForPositionIndexes(d,_,T),H=this.getBearing(P,F),J=this.getBearing(P,M);return[89,90,91,269,270,271].includes(Math.abs(H-J))}nextPositionIndexes(d,_){if(!Array.isArray(d))return[];const S=[...d];return S.length&&(S[S.length-1]=S[S.length-1]===_-1?0:S[S.length-1]+1),S}prevPositionIndexes(d,_){if(!Array.isArray(d))return[];const S=[...d];return S.length&&(S[S.length-1]=S[S.length-1]===0?_-2:S[S.length-1]-1),S}getPointForPositionIndexes(d,_,{features:S}){let T;if(Array.isArray(d)){const M=S[_].geometry.coordinates;if(d.length===3){const[P,H,J]=d;M.length&&M[P].length&&(T=M[P][H][J])}else{const[P,H]=d;M.length&&M[P].length&&(T=M[P][H])}}return T}}function defaultCalculateElevationChange({pointerDownScreenCoords:f,screenCoords:s}){return 10*(f[1]-s[1])}class ElevationMode extends ModifyMode{makeElevatedEvent(s,d,_){const{minElevation:S=0,maxElevation:T=2e4,calculateElevationChange:F=defaultCalculateElevationChange}=_.modeConfig||{};if(!s.pointerDownScreenCoords)return s;let M=d.length===3?d[2]:0;return M+=F({pointerDownScreenCoords:s.pointerDownScreenCoords,screenCoords:s.screenCoords}),M=Math.min(M,T),M=Math.max(M,S),Object.assign({},s,{mapCoords:[d[0],d[1],M]})}handlePointerMove(s,d){const _=getPickedEditHandle(s.pointerDownPicks),S=_?_.geometry.coordinates:s.mapCoords;super.handlePointerMove(this.makeElevatedEvent(s,S,d),d)}handleStopDragging(s,d){const _=getPickedEditHandle(s.picks),S=_?_.geometry.coordinates:s.mapCoords;super.handleStopDragging(this.makeElevatedEvent(s,S,d),d)}getCursor(s){let d=super.getCursor(s);return d==="cell"&&(d="ns-resize"),d}static calculateElevationChangeWithViewport(s,{pointerDownScreenCoords:d,screenCoords:_}){return 156543.03392*Math.cos(s.latitude*Math.PI/180)/Math.pow(2,s.zoom)*(d[1]-_[1])/2}}class DrawPointMode extends GeoJsonEditMode{createTentativeFeature(s){const{lastPointerMoveEvent:d}=s,_=d?[d.mapCoords]:[];return{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Point",coordinates:_[0]}}}handleClick({mapCoords:s},d){const _={type:"Point",coordinates:s};d.onEdit(this.getAddFeatureAction(_,d.data))}handlePointerMove(s,d){d.onUpdateCursor("cell"),super.handlePointerMove(s,d)}}function isEqual(f,s){if(f===s)return!0;if(Array.isArray(f)){const d=f.length;if(!s||s.length!==d)return!1;for(let _=0;_<d;_++)if(f[_]!==s[_])return!1;return!0}return!1}function memoize(f){let s={},d;return _=>{for(const S in _)if(!isEqual(_[S],s[S])){d=f(_),s=_;break}return d}}class DrawLineStringMode extends GeoJsonEditMode{constructor(){super(...arguments);Bt(this,"dist",0);Bt(this,"position",null);Bt(this,"elems",[]);Bt(this,"_getTooltips",memoize(({modeConfig:d,dist:_})=>{let S=[];const{formatTooltip:T}=d||{};let F;return _&&(T?F=T(_):F=`Distance: ${parseFloat(_).toFixed(2)} kilometers`,S=[{position:this.position,text:F}]),S}))}handleClick(d,_){const{picks:S}=d,T=getPickedEditHandle(S);let F=!1;T||(this.addClickSequence(d),F=!0);const M=this.getClickSequence();if(T||this.calculateInfoDraw(M),M.length>1&&T&&Array.isArray(T.properties.positionIndexes)&&T.properties.positionIndexes[0]===M.length-1){this.dist=0;const P={type:"LineString",coordinates:[...M]};this.resetClickSequence();const H=this.getAddFeatureAction(P,_.data);H&&_.onEdit(H)}else F&&_.onEdit({updatedData:_.data,editType:"addTentativePosition",editContext:{position:d.mapCoords}})}handleKeyUp(d,_){const{key:S}=d;if(S==="Enter"){const T=this.getClickSequence();if(T.length>1){const F={type:"LineString",coordinates:[...T]};this.resetClickSequence();const M=this.getAddFeatureAction(F,_.data);M&&_.onEdit(M)}}else S==="Escape"&&(this.resetClickSequence(),_.onEdit({updatedData:_.data,editType:"cancelFeature",editContext:{}}))}getGuides(d){const{lastPointerMoveEvent:_}=d,S=this.getClickSequence(),T=_?[_.mapCoords]:[],F={type:"FeatureCollection",features:[]};let M;S.length>0&&(M={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[...S,...T]}}),M&&F.features.push(M);const P=S.map((H,J)=>({type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[J]},geometry:{type:"Point",coordinates:H}}));return F.features.push(...P),F}handlePointerMove(d,_){_.onUpdateCursor("cell")}getTooltips(d){return this._getTooltips({modeConfig:d.modeConfig,dist:this.dist})}calculateInfoDraw(d){d.length>1&&(this.position=d[d.length-1],this.dist+=distance(d[d.length-2],d[d.length-1]))}}class DrawPolygonMode extends GeoJsonEditMode{createTentativeFeature(s){const{lastPointerMoveEvent:d}=s,_=this.getClickSequence(),S=d?[d.mapCoords]:[];let T;return _.length===1||_.length===2?T={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[..._,...S]}}:_.length>2&&(T={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[..._,...S,_[0]]]}}),T}getGuides(s){const d=this.getClickSequence(),_={type:"FeatureCollection",features:[]},S=this.createTentativeFeature(s);S&&_.features.push(S);const T=d.map((F,M)=>({type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[M]},geometry:{type:"Point",coordinates:F}}));return _.features.push(...T),_}handleClick(s,d){const{picks:_}=s,S=getPickedEditHandle(_),T=this.getClickSequence();let F=!1;if(T.length>2&&d.modeConfig&&d.modeConfig.preventOverlappingLines){const P=lineString$4([T[T.length-1],s.mapCoords]),H=lineString$4([...T.slice(0,T.length-1)]);lineIntersect(P,H).features.length>0&&(F=!0)}let M=!1;if(!S&&!F&&(this.addClickSequence(s),M=!0),T.length>2&&S&&Array.isArray(S.properties.positionIndexes)&&(S.properties.positionIndexes[0]===0||S.properties.positionIndexes[0]===T.length-1)){const P={type:"Polygon",coordinates:[[...T,T[0]]]};this.resetClickSequence();const H=this.getAddFeatureOrBooleanPolygonAction(P,d);H&&d.onEdit(H)}else M&&d.onEdit({updatedData:d.data,editType:"addTentativePosition",editContext:{position:s.mapCoords}})}handleKeyUp(s,d){if(s.key==="Enter"){const _=this.getClickSequence();if(_.length>2){const S={type:"Polygon",coordinates:[[..._,_[0]]]};this.resetClickSequence();const T=this.getAddFeatureOrBooleanPolygonAction(S,d);T&&d.onEdit(T)}}else s.key==="Escape"&&(this.resetClickSequence(),d.onEdit({updatedData:d.data,editType:"cancelFeature",editContext:{}}))}handlePointerMove(s,d){d.onUpdateCursor("cell"),super.handlePointerMove(s,d)}}class TwoClickPolygonMode extends GeoJsonEditMode{handleClick(s,d){d.modeConfig&&d.modeConfig.dragToDraw||(this.addClickSequence(s),this.checkAndFinishPolygon(d))}handleStartDragging(s,d){!d.modeConfig||!d.modeConfig.dragToDraw||(this.addClickSequence(s),s.cancelPan())}handleStopDragging(s,d){!d.modeConfig||!d.modeConfig.dragToDraw||(this.addClickSequence(s),this.checkAndFinishPolygon(d))}checkAndFinishPolygon(s){const d=this.getClickSequence(),_=this.getTentativeGuide(s);if(d.length>1&&_&&_.geometry.type==="Polygon"){const S={type:"Feature",properties:{shape:_.properties.shape},geometry:{type:"Polygon",coordinates:_.geometry.coordinates}},T=this.getAddFeatureOrBooleanPolygonAction(S,s);this.resetClickSequence(),T&&s.onEdit(T)}}getGuides(s){const{lastPointerMoveEvent:d,modeConfig:_}=s,S=this.getClickSequence(),T={type:"FeatureCollection",features:[]};if(S.length===0||!d)return T;const F=S[0],M=d.mapCoords,P=this.getTwoClickPolygon(F,M,_);return P&&T.features.push({type:"Feature",properties:{shape:P.properties&&P.properties.shape,guideType:"tentative"},geometry:P.geometry}),T}getTwoClickPolygon(s,d,_){return null}handlePointerMove(s,d){d.onUpdateCursor("cell"),super.handlePointerMove(s,d)}createTentativeFeature(s){const{lastPointerMoveEvent:d}=s,_=this.getClickSequence(),S=d?[d.mapCoords]:[];let T;return _.length===1&&(T=this.getTwoClickPolygon(_[0],S[0],s.modeConfig)),T}}class DrawRectangleMode extends TwoClickPolygonMode{getTwoClickPolygon(s,d,_){const S=bboxPolygon([s[0],s[1],d[0],d[1]]);return S.properties=S.properties||{},S.properties.shape="Rectangle",S}}function feature$2(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties={},_.geometry=f,_}function point$1(f,s,d){if(d===void 0&&(d={}),!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$2(f[0])||!isNumber$2(f[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:f};return feature$2(_,s,d)}function isNumber$2(f){return!isNaN(f)&&f!==null&&!Array.isArray(f)}function getGeom(f){return f.type==="Feature"?f.geometry:f}function along(f,s,d){d===void 0&&(d={});for(var _=getGeom(f),S=_.coordinates,T=0,F=0;F<S.length&&!(s>=T&&F===S.length-1);F++)if(T>=s){var M=s-T;if(M){var P=bearing(S[F],S[F-1])-180,H=destination(S[F],M,P,d);return H}else return point$1(S[F])}else T+=distance(S[F],S[F+1],d);return point$1(S[S.length-1])}class DrawSquareMode extends TwoClickPolygonMode{getTwoClickPolygon(s,d,_){const S=[d[0],s[1]],T=[s[0],d[1]],F=distance(point$a(S),point$a(s)),M=distance(point$a(T),point$a(s)),P=F<=M?F:M,H=F<=M?S:T,J=lineString$4([H,d]),z=along(J,P).geometry.coordinates,oe=bboxPolygon([s[0],s[1],z[0],z[1]]);return oe.properties=oe.properties||{},oe.properties.shape="Square",oe}}class DrawRectangleFromCenterMode extends TwoClickPolygonMode{getTwoClickPolygon(s,d,_){const S=s[0]>d[0]?s[0]+Math.abs(s[0]-d[0]):s[0]-Math.abs(s[0]-d[0]),T=s[1]>d[1]?s[1]+Math.abs(s[1]-d[1]):s[1]-Math.abs(s[1]-d[1]),F=bboxPolygon([S,T,d[0],d[1]]);return F.properties=F.properties||{},F.properties.shape="Rectangle",F}}class DrawSquareFromCenterMode extends TwoClickPolygonMode{getTwoClickPolygon(s,d,_){const S=[d[0],s[1]],T=[s[0],d[1]],F=distance(point$a(S),point$a(s)),M=distance(point$a(T),point$a(s)),P=F<=M?F:M,H=F<=M?S:T,J=lineString$4([H,d]),z=along(J,P).geometry.coordinates,oe=s[0]>z[0]?s[0]+Math.abs(s[0]-z[0]):s[0]-Math.abs(s[0]-z[0]),se=s[1]>z[1]?s[1]+Math.abs(s[1]-z[1]):s[1]-Math.abs(s[1]-z[1]),ae=bboxPolygon([oe,se,z[0],z[1]]);return ae.properties=ae.properties||{},ae.properties.shape="Square",ae}}function feature$1(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function polygon$1(f,s,d){d===void 0&&(d={});for(var _=0,S=f;_<S.length;_++){var T=S[_];if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<T[T.length-1].length;F++)if(T[T.length-1][F]!==T[0][F])throw new Error("First and last Position are not equivalent.")}var M={type:"Polygon",coordinates:f};return feature$1(M,s,d)}function circle(f,s,d){d===void 0&&(d={});for(var _=d.steps||64,S=d.properties?d.properties:!Array.isArray(f)&&f.type==="Feature"&&f.properties?f.properties:{},T=[],F=0;F<_;F++)T.push(destination(f,s,F*-360/_,d).geometry.coordinates);return T.push(T[0]),polygon$1([T],S)}function geomEach(f,s){var d,_,S,T,F,M,P,H,J,K,z=0,oe=f.type==="FeatureCollection",se=f.type==="Feature",ae=oe?f.features.length:1;for(d=0;d<ae;d++){for(M=oe?f.features[d].geometry:se?f.geometry:f,H=oe?f.features[d].properties:se?f.properties:{},J=oe?f.features[d].bbox:se?f.bbox:void 0,K=oe?f.features[d].id:se?f.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,z,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,z,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],z,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}z++}}function geomReduce(f,s,d){var _=d;return geomEach(f,function(S,T,F,M,P){T===0&&d===void 0?_=S:_=s(_,S,T,F,M,P)}),_}var RADIUS=6378137;function area$1(f){return geomReduce(f,function(s,d){return s+calculateArea(d)},0)}function calculateArea(f){var s=0,d;switch(f.type){case"Polygon":return polygonArea(f.coordinates);case"MultiPolygon":for(d=0;d<f.coordinates.length;d++)s+=polygonArea(f.coordinates[d]);return s;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function polygonArea(f){var s=0;if(f&&f.length>0){s+=Math.abs(ringArea(f[0]));for(var d=1;d<f.length;d++)s-=Math.abs(ringArea(f[d]))}return s}function ringArea(f){var s,d,_,S,T,F,M,P=0,H=f.length;if(H>2){for(M=0;M<H;M++)M===H-2?(S=H-2,T=H-1,F=0):M===H-1?(S=H-1,T=0,F=1):(S=M,T=M+1,F=M+2),s=f[S],d=f[T],_=f[F],P+=(rad(_[0])-rad(s[0]))*Math.sin(rad(d[1]));P=P*RADIUS*RADIUS/2}return P}function rad(f){return f*Math.PI/180}class DrawCircleFromCenterMode extends TwoClickPolygonMode{constructor(){super(...arguments);Bt(this,"radius",null);Bt(this,"position",null);Bt(this,"areaCircle",null);Bt(this,"_getTooltips",memoize(({modeConfig:d,radius:_,areaCircle:S})=>{let T=[];const{formatTooltip:F}=d||{};let M;return _&&S&&(F?M=F(_):M=`Radius: ${parseFloat(_).toFixed(2)} kilometers
      
 Area: ${parseFloat(S).toFixed(2)}`,T=[{position:this.position,text:M}]),T}))}getTwoClickPolygon(d,_,S){const{steps:T=64}=S||{},F={steps:T};this.position=_,T<4&&(console.warn("Minimum steps to draw a circle is 4 "),F.steps=4),this.radius=Math.max(distance(d,_),.001);const M=circle(d,this.radius,F);return M.properties=M.properties||{},M.properties.shape="Circle",this.areaCircle=area$1(M),M}getTooltips(d){return this._getTooltips({modeConfig:d==null?void 0:d.modeConfig,radius:this.radius,areaCircle:this.areaCircle})}}class DrawCircleByDiameterMode extends TwoClickPolygonMode{constructor(){super(...arguments);Bt(this,"radius",null);Bt(this,"position",null);Bt(this,"areaCircle",null);Bt(this,"diameter",null);Bt(this,"_getTooltips",memoize(({modeConfig:d,radius:_,areaCircle:S,diameter:T})=>{let F=[];const{formatTooltip:M}=d||{};let P;return _&&S&&(M?P=M(_):P=`Radius: ${parseFloat(_).toFixed(2)} kilometers
      
 Area: ${parseFloat(S).toFixed(2)}
      
 Diameter: ${parseFloat(T).toFixed(2)} kilometers`,F=[{position:this.position,text:P}]),F}))}getTwoClickPolygon(d,_,S){const{steps:T=64}=S||{},F={steps:T};T<4&&(console.warn("Minimum steps to draw a circle is 4 "),F.steps=4);const M=getIntermediatePosition(d,_);this.radius=Math.max(distance(d,M),.001),this.diameter=Math.max(distance(d,_),.001),this.position=M;const P=circle(M,this.radius,F);return P.properties=P.properties||{},P.properties.shape="Circle",this.areaCircle=area$1(P),P}getTooltips(d){return this._getTooltips({modeConfig:d.modeConfig,radius:this.radius,areaCircle:this.areaCircle,diameter:this.diameter})}}function feature(f,s,d){d===void 0&&(d={});var _={type:"Feature"};return(d.id===0||d.id)&&(_.id=d.id),d.bbox&&(_.bbox=d.bbox),_.properties=s||{},_.geometry=f,_}function polygon(f,s,d){d===void 0&&(d={});for(var _=0,S=f;_<S.length;_++){var T=S[_];if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<T[T.length-1].length;F++)if(T[T.length-1][F]!==T[0][F])throw new Error("First and last Position are not equivalent.")}var M={type:"Polygon",coordinates:f};return feature(M,s,d)}function degreesToRadians(f){var s=f%360;return s*Math.PI/180}function isNumber$1(f){return!isNaN(f)&&f!==null&&!Array.isArray(f)}function isObject$3(f){return!!f&&f.constructor===Object}function getCoord(f){if(!f)throw new Error("coord is required");if(!Array.isArray(f)){if(f.type==="Feature"&&f.geometry!==null&&f.geometry.type==="Point")return f.geometry.coordinates;if(f.type==="Point")return f.coordinates}if(Array.isArray(f)&&f.length>=2&&!Array.isArray(f[0])&&!Array.isArray(f[1]))return f;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ellipse(f,s,d,_){_=_||{};var S=_.steps||64,T=_.units||"kilometers",F=_.angle||0,M=_.pivot||f,P=_.properties||f.properties||{};if(!f)throw new Error("center is required");if(!s)throw new Error("xSemiAxis is required");if(!d)throw new Error("ySemiAxis is required");if(!isObject$3(_))throw new Error("options must be an object");if(!isNumber$1(S))throw new Error("steps must be a number");if(!isNumber$1(F))throw new Error("angle must be a number");var H=getCoord(f);if(T==="degrees")var J=degreesToRadians(F);else s=rhumbDestination(f,s,90,{units:T}),d=rhumbDestination(f,d,0,{units:T}),s=getCoord(s)[0]-H[0],d=getCoord(d)[1]-H[1];for(var K=[],z=0;z<S;z+=1){var oe=z*-360/S,se=s*d/Math.sqrt(Math.pow(d,2)+Math.pow(s,2)*Math.pow(getTanDeg(oe),2)),ae=s*d/Math.sqrt(Math.pow(s,2)+Math.pow(d,2)/Math.pow(getTanDeg(oe),2));if(oe<-90&&oe>=-270&&(se=-se),oe<-180&&oe>=-360&&(ae=-ae),T==="degrees"){var ge=se*Math.cos(J)+ae*Math.sin(J),pe=ae*Math.cos(J)-se*Math.sin(J);se=ge,ae=pe}K.push([se+H[0],ae+H[1]])}return K.push(K[0]),T==="degrees"?polygon([K],P):transformRotate(polygon([K],P),F,{pivot:M})}function getTanDeg(f){var s=f*Math.PI/180;return Math.tan(s)}class DrawEllipseByBoundingBoxMode extends TwoClickPolygonMode{getTwoClickPolygon(s,d,_){const S=Math.min(s[0],d[0]),T=Math.min(s[1],d[1]),F=Math.max(s[0],d[0]),M=Math.max(s[1],d[1]),P=bboxPolygon([S,T,F,M]).geometry.coordinates[0],H=getIntermediatePosition(s,d),J=Math.max(distance(point$a(P[0]),point$a(P[1])),.001),K=Math.max(distance(point$a(P[0]),point$a(P[3])),.001);return ellipse(H,J,K)}}class ThreeClickPolygonMode extends GeoJsonEditMode{handleClick(s,d){this.addClickSequence(s);const _=this.getClickSequence(),S=this.getTentativeGuide(d);if(_.length>2&&S&&S.geometry.type==="Polygon"){const T=this.getAddFeatureOrBooleanPolygonAction(S.geometry,d);this.resetClickSequence(),T&&d.onEdit(T)}}getGuides(s){const{lastPointerMoveEvent:d,modeConfig:_}=s,S=this.getClickSequence(),T={type:"FeatureCollection",features:[]};if(S.length===0)return T;const F=d.mapCoords;if(S.length===1)T.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[S[0],F]}});else{const M=this.getThreeClickPolygon(S[0],S[1],F,_);M&&T.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:M.geometry})}return T}getThreeClickPolygon(s,d,_,S){return null}handlePointerMove(s,d){d.onUpdateCursor("cell"),super.handlePointerMove(s,d)}createTentativeFeature(s){const{lastPointerMoveEvent:d}=s,_=this.getClickSequence(),S=d?[d.mapCoords]:[];let T;return _.length===2&&(T=this.getThreeClickPolygon(_[0],_[1],S[0],s.modeConfig)),T}}class DrawRectangleUsingThreePointsMode extends ThreeClickPolygonMode{getThreeClickPolygon(s,d,_,S){const[T,F]=generatePointsParallelToLinePoints(s,d,_);return{type:"Feature",properties:{shape:"Rectangle"},geometry:{type:"Polygon",coordinates:[[s,d,T,F,s]]}}}}class DrawEllipseUsingThreePointsMode extends ThreeClickPolygonMode{getThreeClickPolygon(s,d,_,S){const T=getIntermediatePosition(s,d),F=Math.max(distance(T,point$a(_)),.001),M=Math.max(distance(s,d),.001)/2,P={angle:bearing(s,d)};return ellipse(T,F,M,P)}}class Draw90DegreePolygonMode extends GeoJsonEditMode{createTentativeFeature(s){const d=this.getClickSequence(),{mapCoords:_}=s.lastPointerMoveEvent;let S;if(d.length<=1)S=_;else{const F=d[d.length-2],M=d[d.length-1];[S]=generatePointsParallelToLinePoints(F,M,_)}let T;return d.length<3?T={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[...d,S]}}:T={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[...d,S,d[0]]]}},T}getGuides(s){const d={type:"FeatureCollection",features:[]};if(this.getClickSequence().length===0||!s.lastPointerMoveEvent)return d;const S=this.createTentativeFeature(s);return d.features.push(S),d.features=d.features.concat(getEditHandlesForGeometry(S.geometry,-1)),d.features=d.features.slice(0,-1),d}handlePointerMove(s,d){d.onUpdateCursor("cell"),super.handlePointerMove(s,d)}handleClick(s,d){const{picks:_}=s,S=this.getTentativeGuide(d);this.addClickSequence(s);const T=this.getClickSequence();if(S)if(T.length===3&&S.geometry.type==="LineString"){const F=S.geometry;T[T.length-1]=F.coordinates[F.coordinates.length-1]}else if(T.length>3&&S.geometry.type==="Polygon"){const F=S.geometry;T[T.length-1]=F.coordinates[0][F.coordinates[0].length-2];const M=getPickedEditHandle(_);if(M&&Array.isArray(M.properties.positionIndexes)&&(M.properties.positionIndexes[1]===0||M.properties.positionIndexes[1]===F.coordinates[0].length-3)){const P={type:"Polygon",coordinates:this.finalizedCoordinates([...F.coordinates[0]])};this.resetClickSequence();const H=this.getAddFeatureOrBooleanPolygonAction(P,d);H&&d.onEdit(H)}}else{const F={screenCoords:[-1,-1],mapCoords:s.mapCoords,picks:[],pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,cancelPan:()=>{},sourceEvent:null};this.handlePointerMove(F,d)}}finalizedCoordinates(s){let d=[[...s.slice(0,-2),s[0]]],_=this.getIntermediatePoint([...s]);if(_)d=[[...s.slice(0,-2),_,s[0]]];else{const S=[...s];S.splice(-3,1),_=this.getIntermediatePoint([...S]),_&&(d=[[...s.slice(0,-3),_,s[0]]])}return d}getIntermediatePoint(s){let d=null;if(s.length>4){const[_,S]=[...s],T=bearing(_,S),F=s[s.length-3],M=s[s.length-4],P=bearing(F,M),H={first:[],second:[]};[1,2,3].forEach(K=>{const z=T+K*90;H.first.push(z>180?z-360:z);const oe=P+K*90;H.second.push(oe>180?oe-360:oe)});const J=distance(point$a(_),point$a(F));[0,1,2].forEach(K=>{const z=lineString$4([_,destination(_,J,H.first[K]).geometry.coordinates]);[0,1,2].forEach(oe=>{const se=lineString$4([F,destination(F,J,H.second[oe]).geometry.coordinates]),ae=lineIntersect(z,se);ae&&ae.features.length&&(d=ae.features[0].geometry.coordinates)})})}return d}}var FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root$1.Date.now()};function debounce(f,s,d){var _,S,T,F,M,P,H=0,J=!1,K=!1,z=!0;if(typeof f!="function")throw new TypeError(FUNC_ERROR_TEXT);s=toNumber(s)||0,isObject$2(d)&&(J=!!d.leading,K="maxWait"in d,T=K?nativeMax(toNumber(d.maxWait)||0,s):T,z="trailing"in d?!!d.trailing:z);function oe(Fe){var ye=_,Ue=S;return _=S=void 0,H=Fe,F=f.apply(Ue,ye),F}function se(Fe){return H=Fe,M=setTimeout(pe,s),J?oe(Fe):F}function ae(Fe){var ye=Fe-P,Ue=Fe-H,It=s-ye;return K?nativeMin(It,T-Ue):It}function ge(Fe){var ye=Fe-P,Ue=Fe-H;return P===void 0||ye>=s||ye<0||K&&Ue>=T}function pe(){var Fe=now();if(ge(Fe))return he(Fe);M=setTimeout(pe,ae(Fe))}function he(Fe){return M=void 0,z&&_?oe(Fe):(_=S=void 0,F)}function ve(){M!==void 0&&clearTimeout(M),H=0,_=P=S=M=void 0}function be(){return M===void 0?F:he(now())}function Re(){var Fe=now(),ye=ge(Fe);if(_=arguments,S=this,P=Fe,ye){if(M===void 0)return se(P);if(K)return M=setTimeout(pe,s),oe(P)}return M===void 0&&(M=setTimeout(pe,s)),F}return Re.cancel=ve,Re.flush=be,Re}function throttle$1(f,s,d){var _=!0,S=!0;if(typeof f!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$2(d)&&(_="leading"in d?!!d.leading:_,S="trailing"in d?!!d.trailing:S),debounce(f,s,{leading:_,maxWait:s,trailing:S})}function isObject$2(f){var s=typeof f;return!!f&&(s=="object"||s=="function")}function isObjectLike(f){return!!f&&typeof f=="object"}function isSymbol(f){return typeof f=="symbol"||isObjectLike(f)&&objectToString.call(f)==symbolTag}function toNumber(f){if(typeof f=="number")return f;if(isSymbol(f))return NAN;if(isObject$2(f)){var s=typeof f.valueOf=="function"?f.valueOf():f;f=isObject$2(s)?s+"":s}if(typeof f!="string")return f===0?f:+f;f=f.replace(reTrim,"");var d=reIsBinary.test(f);return d||reIsOctal.test(f)?freeParseInt(f.slice(2),d?2:8):reIsBadHex.test(f)?NAN:+f}var lodash_throttle=throttle$1;const throttle$2=getDefaultExportFromCjs(lodash_throttle);class DrawPolygonByDraggingMode extends DrawPolygonMode{constructor(){super(...arguments);Bt(this,"handleDraggingThrottled",null)}handleClick(d,_){}handleStartDragging(d,_){d.cancelPan(),_.modeConfig&&_.modeConfig.throttleMs?this.handleDraggingThrottled=throttle$2(this.handleDraggingAux,_.modeConfig.throttleMs):this.handleDraggingThrottled=this.handleDraggingAux}handleStopDragging(d,_){this.addClickSequence(d);const S=this.getClickSequence();if(this.handleDraggingThrottled&&this.handleDraggingThrottled.cancel&&this.handleDraggingThrottled.cancel(),S.length>2){const T={type:"Polygon",coordinates:[[...S,S[0]]]},F=this.getAddFeatureOrBooleanPolygonAction(T,_);F&&_.onEdit(F)}this.resetClickSequence()}handleDraggingAux(d,_){const{picks:S}=d;getPickedEditHandle(S)||(this.addClickSequence(d),_.onEdit({updatedData:_.data,editType:"addTentativePosition",editContext:{position:d.mapCoords}}))}handleDragging(d,_){this.handleDraggingThrottled&&this.handleDraggingThrottled(d,_)}handleKeyUp(d,_){if(d.key==="Enter"){const S=this.getClickSequence();if(S.length>2){const T={type:"Polygon",coordinates:[[...S,S[0]]]};this.resetClickSequence();const F=this.getAddFeatureOrBooleanPolygonAction(T,_);F&&_.onEdit(F)}}else d.key==="Escape"&&(this.resetClickSequence(),this.handleDraggingThrottled&&(this.handleDraggingThrottled=null),_.onEdit({updatedData:_.data,editType:"cancelFeature",editContext:{}}))}}class SnappableMode extends GeoJsonEditMode{constructor(d){super();Bt(this,"_handler");this._handler=d}_getSnappedMouseEvent(d,_,S){return Object.assign(d,{mapCoords:S.geometry.coordinates,pointerDownMapCoords:_&&_.geometry.coordinates})}_getPickedSnapTarget(d){return getPickedEditHandles(d).find(_=>_.properties.editHandleType==="snap-target")}_getPickedSnapSource(d){return getPickedSnapSourceEditHandle(d)}_getUpdatedSnapSourceHandle(d,_){const{featureIndex:S,positionIndexes:T}=d.properties;if(!Array.isArray(T))return d;const F=_.features[S],M=T.reduce((P,H)=>P[H],F.geometry.coordinates);return{...d,geometry:{type:"Point",coordinates:M}}}_getSnapTargets(d){let{additionalSnapTargets:_}=d.modeConfig||{};return _=_||[],[...d.data.features,..._]}_getSnapTargetHandles(d){const _=[],S=this._getSnapTargets(d);for(let T=0;T<S.length;T++)if(!d.selectedIndexes.includes(T)){const{geometry:M}=S[T];_.push(...getEditHandlesForGeometry(M,T,"snap-target"))}return _}getGuides(d){const{modeConfig:_,lastPointerMoveEvent:S}=d,{enableSnapping:T}=_||{},F={type:"FeatureCollection",features:[...this._handler.getGuides(d).features]};if(!T)return F;const M=S&&this._getPickedSnapSource(S.pointerDownPicks);if(M)return F.features.push(...this._getSnapTargetHandles(d),this._getUpdatedSnapSourceHandle(M,d.data)),F;const{features:P}=d.data;for(const H of d.selectedIndexes)if(H<P.length){const{geometry:J}=P[H];F.features.push(...getEditHandlesForGeometry(J,H,"snap-source"))}return F}_getSnapAwareEvent(d,_){const S=this._getPickedSnapSource(_.lastPointerMoveEvent.pointerDownPicks),T=this._getPickedSnapTarget(d.picks);return S&&T?this._getSnappedMouseEvent(d,S,T):d}handleStartDragging(d,_){this._handler.handleStartDragging(d,_)}handleStopDragging(d,_){this._handler.handleStopDragging(this._getSnapAwareEvent(d,_),_)}handleDragging(d,_){this._handler.handleDragging(this._getSnapAwareEvent(d,_),_)}handlePointerMove(d,_){this._handler.handlePointerMove(this._getSnapAwareEvent(d,_),_)}}class CompositeMode extends GeoJsonEditMode{constructor(d){super();Bt(this,"_modes");this._modes=d}_coalesce(d,_=null){let S=null;for(let T=0;T<this._modes.length&&(S=d(this._modes[T]),!(_?_(S):S));T++);return S}handleClick(d,_){this._coalesce(S=>S.handleClick(d,_))}handlePointerMove(d,_){return this._coalesce(S=>S.handlePointerMove(d,_))}handleStartDragging(d,_){return this._coalesce(S=>S.handleStartDragging(d,_))}handleStopDragging(d,_){return this._coalesce(S=>S.handleStopDragging(d,_))}handleDragging(d,_){return this._coalesce(S=>S.handleDragging(d,_))}getGuides(d){const _=[];for(const S of this._modes)_.push(...S.getGuides(d).features);return{type:"FeatureCollection",features:_}}}class TransformMode extends CompositeMode{constructor(){super([new TranslateMode,new ScaleMode,new RotateMode])}handlePointerMove(s,d){let _=null;super.handlePointerMove(s,{...d,onUpdateCursor:S=>{_=S||_}}),d.onUpdateCursor(_)}handleStartDragging(s,d){let _=null,S=null;const T=[];this._modes.forEach(F=>{F instanceof TranslateMode?S=F:(F instanceof ScaleMode&&(_=F),T.push(F))}),_ instanceof ScaleMode&&!_.isEditHandleSelected()&&T.push(S),T.filter(Boolean).forEach(F=>F.handleStartDragging(s,d))}getGuides(s){let d=super.getGuides(s);const _=(this._modes||[]).find(S=>S instanceof RotateMode);if(_ instanceof RotateMode){const S=d.features.filter(T=>{const{editHandleType:F,mode:M}=T.properties||{},P=[M];return _.getIsRotating()&&P.push(F),!P.includes("scale")});d=featureCollection$5(S)}return d}}const PROJECTED_PIXEL_SIZE_MULTIPLIER=2/3,EVENT_TYPES=["anyclick","pointermove","panstart","panmove","panend","keyup"];class EditableLayer extends CompositeLayer{constructor(){super(...arguments);Bt(this,"state")}onLayerClick(d){}onStartDragging(d){}onStopDragging(d){}onDragging(d){}onPointerMove(d){}onLayerKeyUp(d){}initializeState(){this.setState({_editableLayerState:{pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,eventHandler:this._forwardEventToCurrentLayer.bind(this)}}),this._addEventHandlers()}finalizeState(){this._removeEventHandlers()}_addEventHandlers(){const{eventManager:d}=this.context.deck,{eventHandler:_}=this.state._editableLayerState;for(const S of EVENT_TYPES)d.on(S,_,{priority:100})}_removeEventHandlers(){const{eventManager:d}=this.context.deck,{eventHandler:_}=this.state._editableLayerState;for(const S of EVENT_TYPES)d.off(S,_)}_forwardEventToCurrentLayer(d){const _=this.getCurrentLayer(),S=_[`_on${d.type}`].bind(_);if(!S){console.warn(`no handler for mjolnir.js event ${d.type}`);return}S(d)}_onanyclick({srcEvent:d}){const _=this.getScreenCoords(d),S=this.getMapCoords(_),T=this.getPicks(_);this.onLayerClick({mapCoords:S,screenCoords:_,picks:T,sourceEvent:d})}_onkeyup({srcEvent:d}){this.onLayerKeyUp(d)}_onpanstart(d){const _=this.getScreenCoords(d.srcEvent),S=this.getMapCoords(_),T=this.getPicks(_);this.setState({_editableLayerState:{...this.state._editableLayerState,pointerDownScreenCoords:_,pointerDownMapCoords:S,pointerDownPicks:T}}),this.onStartDragging({picks:T,screenCoords:_,mapCoords:S,pointerDownScreenCoords:_,pointerDownMapCoords:S,cancelPan:d.stopImmediatePropagation,sourceEvent:d.srcEvent})}_onpanmove(d){const{srcEvent:_}=d,S=this.getScreenCoords(_),T=this.getMapCoords(S),{pointerDownPicks:F,pointerDownScreenCoords:M,pointerDownMapCoords:P}=this.state._editableLayerState,H=this.getPicks(S);this.onDragging({screenCoords:S,mapCoords:T,picks:H,pointerDownPicks:F,pointerDownScreenCoords:M,pointerDownMapCoords:P,sourceEvent:_,cancelPan:d.stopImmediatePropagation})}_onpanend({srcEvent:d}){const _=this.getScreenCoords(d),S=this.getMapCoords(_),{pointerDownPicks:T,pointerDownScreenCoords:F,pointerDownMapCoords:M}=this.state._editableLayerState,P=this.getPicks(_);this.onStopDragging({picks:P,screenCoords:_,mapCoords:S,pointerDownPicks:T,pointerDownScreenCoords:F,pointerDownMapCoords:M,sourceEvent:d}),this.setState({_editableLayerState:{...this.state._editableLayerState,pointerDownScreenCoords:null,pointerDownMapCoords:null,pointerDownPicks:null}})}_onpointermove(d){const{srcEvent:_}=d,S=this.getScreenCoords(_),T=this.getMapCoords(S),{pointerDownPicks:F,pointerDownScreenCoords:M,pointerDownMapCoords:P}=this.state._editableLayerState,H=this.getPicks(S);this.onPointerMove({screenCoords:S,mapCoords:T,picks:H,pointerDownPicks:F,pointerDownScreenCoords:M,pointerDownMapCoords:P,sourceEvent:_,cancelPan:d.stopImmediatePropagation})}getPicks(d){return this.context.deck.pickMultipleObjects({x:d[0],y:d[1],layerIds:[this.props.id],radius:this.props.pickingRadius,depth:this.props.pickingDepth})}getScreenCoords(d){return[d.clientX-this.context.gl.canvas.getBoundingClientRect().left,d.clientY-this.context.gl.canvas.getBoundingClientRect().top]}getMapCoords(d){return this.context.viewport.unproject([d[0],d[1]])}}Bt(EditableLayer,"layerName","EditableLayer");const defaultProps$2={...PathLayer.defaultProps,pickingLineWidthExtraPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER}};class EditablePathLayer extends PathLayer{getShaders(){var d;const s=super.getShaders();return s.vs=insertBefore(s.vs,"vec3 width;",`
       if(bool(picking.isActive)){
        widthPixels.xy += pickingLineWidthExtraPixels;
       }
      `),{...s,inject:{...s.inject||{},"vs:#decl":(((d=s.inject)==null?void 0:d["vs:#decl"])||"").concat("uniform float pickingLineWidthExtraPixels;")}}}draw(s){super.draw({...s,uniforms:{...s.uniforms,pickingLineWidthExtraPixels:this.props.pickingLineWidthExtraPixels}})}}EditablePathLayer.defaultProps=defaultProps$2;EditablePathLayer.layerName="EditablePathLayer";const DEFAULT_LINE_COLOR=[0,0,0,153],DEFAULT_FILL_COLOR=[0,0,0,144],DEFAULT_SELECTED_LINE_COLOR=[0,0,0,255],DEFAULT_SELECTED_FILL_COLOR=[0,0,144,144],DEFAULT_TENTATIVE_LINE_COLOR=[144,144,144,255],DEFAULT_TENTATIVE_FILL_COLOR=[144,144,144,144],DEFAULT_EDITING_EXISTING_POINT_COLOR=[192,0,0,255],DEFAULT_EDITING_INTERMEDIATE_POINT_COLOR=[0,0,0,128],DEFAULT_EDITING_SNAP_POINT_COLOR=[124,0,192,255],DEFAULT_EDITING_POINT_OUTLINE_COLOR=[255,255,255,255],DEFAULT_EDITING_EXISTING_POINT_RADIUS=5,DEFAULT_EDITING_INTERMEDIATE_POINT_RADIUS=3,DEFAULT_EDITING_SNAP_POINT_RADIUS=7,DEFAULT_TOOLTIP_FONT_SIZE=32*PROJECTED_PIXEL_SIZE_MULTIPLIER,DEFAULT_EDIT_MODE=DrawPolygonMode;function guideAccessor(f){return!f||typeof f!="function"?f:s=>f(unwrapGuide(s))}function unwrapGuide(f){return f.__source?f.__source.object:f.sourceFeature?f.sourceFeature.feature:f}function getEditHandleColor(f){switch(f.properties.editHandleType){case"existing":return DEFAULT_EDITING_EXISTING_POINT_COLOR;case"snap-source":return DEFAULT_EDITING_SNAP_POINT_COLOR;case"intermediate":default:return DEFAULT_EDITING_INTERMEDIATE_POINT_COLOR}}function getEditHandleOutlineColor(f){return DEFAULT_EDITING_POINT_OUTLINE_COLOR}function getEditHandleRadius(f){switch(f.properties.editHandleType){case"existing":return DEFAULT_EDITING_EXISTING_POINT_RADIUS;case"snap":return DEFAULT_EDITING_SNAP_POINT_RADIUS;case"intermediate":default:return DEFAULT_EDITING_INTERMEDIATE_POINT_RADIUS}}const defaultProps$1={mode:DEFAULT_EDIT_MODE,onEdit:()=>{},pickable:!0,pickingRadius:10,pickingDepth:5,fp64:!1,filled:!0,stroked:!0,lineWidthScale:PROJECTED_PIXEL_SIZE_MULTIPLIER,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,pickingLineWidthExtraPixels:0,lineWidthUnits:"pixels",lineJointRounded:!1,lineCapRounded:!1,lineMiterLimit:4,pointRadiusScale:1,pointRadiusMinPixels:2,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:(f,s,d)=>s?DEFAULT_SELECTED_LINE_COLOR:DEFAULT_LINE_COLOR,getFillColor:(f,s,d)=>s?DEFAULT_SELECTED_FILL_COLOR:DEFAULT_FILL_COLOR,getRadius:f=>f&&f.properties&&f.properties.radius||f&&f.properties&&f.properties.size||1,getLineWidth:f=>f&&f.properties&&f.properties.lineWidth||3,getTentativeLineColor:f=>DEFAULT_TENTATIVE_LINE_COLOR,getTentativeFillColor:f=>DEFAULT_TENTATIVE_FILL_COLOR,getTentativeLineWidth:f=>f&&f.properties&&f.properties.lineWidth||3,editHandleType:"point",editHandlePointRadiusScale:1,editHandlePointOutline:!0,editHandlePointStrokeWidth:2,editHandlePointRadiusUnits:"pixels",editHandlePointRadiusMinPixels:4,editHandlePointRadiusMaxPixels:8,getEditHandlePointColor:getEditHandleColor,getEditHandlePointOutlineColor:getEditHandleOutlineColor,getEditHandlePointRadius:getEditHandleRadius,editHandleIconAtlas:null,editHandleIconMapping:null,editHandleIconSizeScale:1,editHandleIconSizeUnits:"pixels",getEditHandleIcon:f=>f.properties.editHandleType,getEditHandleIconSize:10,getEditHandleIconColor:getEditHandleColor,getEditHandleIconAngle:0,billboard:!0},modeNameMapping={view:ViewMode,modify:ModifyMode,translate:new SnappableMode(new TranslateMode),transform:new SnappableMode(new TransformMode),scale:ScaleMode,rotate:RotateMode,duplicate:DuplicateMode,split:SplitPolygonMode,extrude:ExtrudeMode,elevation:ElevationMode,drawPoint:DrawPointMode,drawLineString:DrawLineStringMode,drawPolygon:DrawPolygonMode,drawRectangle:DrawRectangleMode,drawSquare:DrawSquareMode,drawRectangleFromCenter:DrawRectangleFromCenterMode,drawSquareFromCenter:DrawSquareFromCenterMode,drawCircleFromCenter:DrawCircleFromCenterMode,drawCircleByBoundingBox:DrawCircleByDiameterMode,drawEllipseByBoundingBox:DrawEllipseByBoundingBoxMode,drawRectangleUsing3Points:DrawRectangleUsingThreePointsMode,drawEllipseUsing3Points:DrawEllipseUsingThreePointsMode,draw90DegreePolygon:Draw90DegreePolygonMode,drawPolygonByDragging:DrawPolygonByDraggingMode};class EditableGeoJsonLayer extends EditableLayer{constructor(){super(...arguments);Bt(this,"state")}renderLayers(){const d=this.getSubLayerProps({id:"geojson",data:this.props.data,fp64:this.props.fp64,filled:this.props.filled,stroked:this.props.stroked,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineCapRounded:this.props.lineCapRounded,lineMiterLimit:this.props.lineMiterLimit,pointRadiusScale:this.props.pointRadiusScale,pointRadiusMinPixels:this.props.pointRadiusMinPixels,pointRadiusMaxPixels:this.props.pointRadiusMaxPixels,getLineColor:this.selectionAwareAccessor(this.props.getLineColor),getFillColor:this.selectionAwareAccessor(this.props.getFillColor),getPointRadius:this.selectionAwareAccessor(this.props.getRadius),getLineWidth:this.selectionAwareAccessor(this.props.getLineWidth),_subLayerProps:{linestrings:{billboard:this.props.billboard,updateTriggers:{all:[this.props.selectedFeatureIndexes,this.props.mode]}},"polygons-stroke":{billboard:this.props.billboard,pickingLineWidthExtraPixels:this.props.pickingLineWidthExtraPixels,type:EditablePathLayer,updateTriggers:{all:[this.props.selectedFeatureIndexes,this.props.mode]}}},updateTriggers:{getLineColor:[this.props.selectedFeatureIndexes,this.props.mode],getFillColor:[this.props.selectedFeatureIndexes,this.props.mode],getPointRadius:[this.props.selectedFeatureIndexes,this.props.mode],getLineWidth:[this.props.selectedFeatureIndexes,this.props.mode]}});let _=[new GeoJsonLayer(d)];return _=_.concat(this.createGuidesLayers(),this.createTooltipsLayers()),_}initializeState(){super.initializeState(),this.setState({selectedFeatures:[],editHandles:[]})}shouldUpdateState(d){return super.shouldUpdateState(d)||d.changeFlags.stateChanged}updateState({props:d,oldProps:_,changeFlags:S,context:T}){if(super.updateState({oldProps:_,props:d,changeFlags:S,context:T}),S.propsOrDataChanged&&(Object.keys(_).length===0||d.mode!==_.mode)){let P;if(typeof d.mode=="function"){const H=d.mode;P=new H}else typeof d.mode=="string"?(P=modeNameMapping[d.mode],console.warn("Deprecated use of passing `mode` as a string. Pass the mode's class constructor instead.")):P=d.mode;P||(console.warn(`No mode configured for ${String(d.mode)}`),P=new DEFAULT_EDIT_MODE),P!==this.state.mode&&this.setState({mode:P,cursor:null})}let F=[];if(Array.isArray(d.selectedFeatureIndexes)&&typeof d.data=="object"&&"features"in d.data){const M=d.data;F=d.selectedFeatureIndexes.map(P=>M.features[P])}this.setState({selectedFeatures:F})}getModeProps(d){return{modeConfig:d.modeConfig,data:d.data,selectedIndexes:d.selectedFeatureIndexes,lastPointerMoveEvent:this.state.lastPointerMoveEvent,cursor:this.state.cursor,onEdit:_=>{this.setNeedsUpdate(),d.onEdit(_)},onUpdateCursor:_=>{this.setState({cursor:_})}}}selectionAwareAccessor(d){return typeof d!="function"?d:_=>d(_,this.isFeatureSelected(_),this.props.mode)}isFeatureSelected(d){return!this.props.data||!this.props.selectedFeatureIndexes||!this.props.selectedFeatureIndexes.length?!1:this.state.selectedFeatures.includes(d)}getPickingInfo({info:d,sourceLayer:_}){return _.id.endsWith("guides")&&(d.isGuide=!0),d}_updateAutoHighlight(d){if(d!=null&&d.sourceLayer)if(d.isGuide)for(const _ of d.sourceLayer.getSubLayers())_.updateAutoHighlight(d);else d.sourceLayer.updateAutoHighlight(d)}createGuidesLayers(){const _=this.getActiveMode().getGuides(this.getModeProps(this.props));if(!_||!_.features.length)return[];const S={linestrings:{billboard:this.props.billboard,autoHighlight:!1},"polygons-fill":{autoHighlight:!1},"polygons-stroke":{billboard:this.props.billboard}};return this.props.editHandleType==="icon"?S["points-icon"]={type:IconLayer,iconAtlas:this.props.editHandleIconAtlas,iconMapping:this.props.editHandleIconMapping,sizeUnits:this.props.editHandleIconSizeUnits,sizeScale:this.props.editHandleIconSizeScale,getIcon:guideAccessor(this.props.getEditHandleIcon),getSize:guideAccessor(this.props.getEditHandleIconSize),getColor:guideAccessor(this.props.getEditHandleIconColor),getAngle:guideAccessor(this.props.getEditHandleIconAngle),billboard:this.props.billboard}:S["points-circle"]={type:ScatterplotLayer,radiusScale:this.props.editHandlePointRadiusScale,stroked:this.props.editHandlePointOutline,getLineWidth:this.props.editHandlePointStrokeWidth,radiusUnits:this.props.editHandlePointRadiusUnits,radiusMinPixels:this.props.editHandlePointRadiusMinPixels,radiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:guideAccessor(this.props.getEditHandlePointRadius),getFillColor:guideAccessor(this.props.getEditHandlePointColor),getLineColor:guideAccessor(this.props.getEditHandlePointOutlineColor),billboard:this.props.billboard},[new GeoJsonLayer(this.getSubLayerProps({id:"guides",data:_,fp64:this.props.fp64,_subLayerProps:S,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineCapRounded:this.props.lineCapRounded,lineMiterLimit:this.props.lineMiterLimit,getLineColor:guideAccessor(this.props.getTentativeLineColor),getLineWidth:guideAccessor(this.props.getTentativeLineWidth),getFillColor:guideAccessor(this.props.getTentativeFillColor),pointType:this.props.editHandleType==="icon"?"icon":"circle",iconAtlas:this.props.editHandleIconAtlas}))]}createTooltipsLayers(){const _=this.getActiveMode().getTooltips(this.getModeProps(this.props));return[new TextLayer({getSize:DEFAULT_TOOLTIP_FONT_SIZE,...this.getSubLayerProps({id:"tooltips",data:_})})]}onLayerClick(d){this.getActiveMode().handleClick(d,this.getModeProps(this.props))}onLayerKeyUp(d){this.getActiveMode().handleKeyUp(d,this.getModeProps(this.props))}onStartDragging(d){this.getActiveMode().handleStartDragging(d,this.getModeProps(this.props))}onDragging(d){this.getActiveMode().handleDragging(d,this.getModeProps(this.props))}onStopDragging(d){this.getActiveMode().handleStopDragging(d,this.getModeProps(this.props))}onPointerMove(d){this.setState({lastPointerMoveEvent:d}),this.getActiveMode().handlePointerMove(d,this.getModeProps(this.props))}getCursor({isDragging:d}){if(this.state===null||this.state===void 0)return null;let{cursor:_}=this.state;return _||(_=d?"grabbing":"grab"),_}getActiveMode(){return this.state.mode}}Bt(EditableGeoJsonLayer,"layerName","EditableGeoJsonLayer"),Bt(EditableGeoJsonLayer,"defaultProps",defaultProps$1);const SpatialAnnotationState=reactExports.createContext(void 0),getEmptyFeatureCollection=()=>({type:"FeatureCollection",features:[]});function useSelectionCoords(f){const s=f.features[0];return reactExports.useMemo(()=>s?s.geometry.coordinates[0]:[],[s])}function useScatterModelMatrix(){const s=1/useRegionScale(),[d,_]=reactExports.useState(new Matrix4().scale(s));return reactExports.useEffect(()=>{const S=new Matrix4().scale(s);_(S)},[s]),{modelMatrix:d,setModelMatrix:_}}function useCreateRange(f){const s=useChartID(),{modelMatrix:d}=useScatterModelMatrix(),[_,S]=reactExports.useState(getEmptyFeatureCollection()),[T,F]=reactExports.useState(new CompositeMode([])),{filterPoly:M,removeFilter:P,rangeDimension:H}=useRangeDimension2D(),J=useSelectionCoords(_);reactExports.useEffect(()=>{console.log("pending different way of managing resetButton?"),f.removeFilter=()=>{S(getEmptyFeatureCollection())}}),reactExports.useEffect(()=>{if(J.length===0){f.resetButton.style.display="none",P();return}f.resetButton.style.display="inline",M(J)},[J,M,P,f]);const[K,z]=reactExports.useState([]);return{editableLayer:reactExports.useMemo(()=>new EditableGeoJsonLayer({id:`selection_${getVivId(`${s}detail-react`)}`,data:_,mode:T,getFillColor:[140,140,140,50],getLineColor:[255,255,255,200],getLineWidth:1,getEditHandlePointRadius:2,editHandlePointStrokeWidth:1,editHandleIconSizeScale:1,editHandlePointRadiusMaxPixels:5,getEditHandlePointColor:se=>[0,0,se.properties.editHandleType==="intermediate"?200:0,255],lineWidthMinPixels:1,selectedFeatureIndexes:K,onEdit:({updatedData:se})=>{const ae=se.features.pop();se.features=[ae],S(se)},onHover(se,ae){se.featureType!=="points"&&z(se.index!==-1?[se.index]:[])}}),[_,T,s,K]),rangeDimension:H,selectionFeatureCollection:_,selectionMode:T,setSelectionMode:F,modelMatrix:d}}function useCreateMeasure(){const[f,s]=reactExports.useState([0,0]),[d,_]=reactExports.useState([0,0]);return{startPixels:f,setStart:s,endPixels:d,setEnd:_}}function useCreateSpatialAnnotationState(f){const s=useCreateRange(f),d=useCreateMeasure();return{rectRange:s,measure:d}}function SpatialAnnotationProvider({chart:f,children:s}){const d=useCreateSpatialAnnotationState(f);return jsxRuntimeExports.jsx(SpatialAnnotationState.Provider,{value:d,children:s})}function useSpatialLayers(){const{rectRange:f}=reactExports.useContext(SpatialAnnotationState),s=useScatterplotLayer(f.modelMatrix),{getTooltip:d}=s;return{getTooltip:d,scatterProps:s,selectionLayer:f.editableLayer,selectionProps:f}}function mapCoords(f,s){return typeof f[0]=="number"?!Number.isNaN(f[0])&&Number.isFinite(f[0])?s(f):f:f.map(d=>mapCoords(d,s)).filter(Boolean)}function translate(f,s){const d=mapCoords(f.geometry.coordinates,_=>[_[0]-s[0],_[1]-s[1]]);return f.geometry.coordinates=d,f}class TranslateModeEx extends TranslateMode{getTranslateAction(s,d,_,S){if(!this._geometryBeforeTranslate)return null;let T=new ImmutableFeatureCollection(S.data);const F=S.selectedIndexes,{viewport:M,screenSpace:P}=S.modeConfig||{};if(M&&P)return super.getTranslateAction(s,d,_,S);const H=point$b(s),J=point$b(d),K=H.geometry.coordinates,z=J.geometry.coordinates,oe=[K[0]-z[0],K[1]-z[1]],se=this._geometryBeforeTranslate.features.map(ae=>translate(clone$3(ae),oe));for(let ae=0;ae<F.length;ae++){const ge=F[ae],pe=se[ae];T=T.replaceGeometry(ge,pe.geometry)}return{updatedData:T.getObject(),editType:_,editContext:{featureIndexes:F}}}}class DrawRectangleByDraggingMode extends DrawPolygonByDraggingMode{handleStopDragging(s,d){d.data.features[d.data.features.length-1].properties={},d.onEdit({updatedData:d.data,editType:"finishDrawingRectangle",editContext:{position:s.mapCoords}})}handleDraggingAux(s,d){var se;const _=s.pointerDownMapCoords,S=s.mapCoords,T=Math.min(_[0],S[0]),F=Math.min(_[1],S[1]),M=Math.max(_[0],S[0]),P=Math.max(_[1],S[1]),H=[T,F],J=[M,P],K={type:"Feature",properties:{tentativeRectangle:!0},geometry:{type:"Polygon",coordinates:[[H,[J[0],H[1]],J,[H[0],J[1]],H]]}},z=[...d.data.features];z.length>0&&((se=z[z.length-1].properties)!=null&&se.tentativeRectangle)?z[z.length-1]=K:z.push(K);const oe={...d.data,features:z};d.onEdit({updatedData:oe,editType:"setTentativeRectangle",editContext:{position:s.mapCoords}})}}class EditMode extends CompositeMode{constructor(){super([new TranslateModeEx,new ModifyMode])}}class RectangleMode extends CompositeMode{constructor(){super([new DrawRectangleByDraggingMode,new TranslateModeEx])}}class PolygonMode extends CompositeMode{constructor(){super([new DrawPolygonMode,new TranslateModeEx])}}const Tools={pan:{name:"Pan",ToolIcon:default_1$a,mode:TranslateModeEx},rectangle:{name:"Rectangle",ToolIcon:default_1$9,mode:RectangleMode},polygon:{name:"Polygon",ToolIcon:default_1$8,mode:PolygonMode},freehand:{name:"Freehand",ToolIcon:default_1$7,mode:DrawPolygonByDraggingMode},transform:{name:"Modify",ToolIcon:default_1$6,mode:EditMode}},ToolArray=Object.values(Tools),ToolButton=({name:f,ToolIcon:s,selectedTool:d,setSelectedTool:_})=>{const S=reactExports.useMemo(()=>({backgroundColor:d===f?"rgba(255,255,255,0.2)":"transparent",borderRadius:10,zIndex:2}),[d,f]);return jsxRuntimeExports.jsx(Tooltip$1,{title:f,children:jsxRuntimeExports.jsx(IconButton,{style:S,onClick:()=>_(f),"aria-label":f,children:jsxRuntimeExports.jsx(s,{})})})},SelectionOverlay=observer(function f(){const{selectionProps:s}=useSpatialLayers(),{setSelectionMode:d}=s,[_,S]=reactExports.useState("Pan"),T=reactExports.useCallback(M=>{var H;const P=(H=Object.values(Tools).find(J=>J.name===M))==null?void 0:H.mode;if(!P){console.error("no mode found for tool",M);return}d(new P),S(M)},[d]),F=reactExports.useMemo(()=>ToolArray.map(({name:M,ToolIcon:P,mode:H})=>jsxRuntimeExports.jsx(ToolButton,{name:M,ToolIcon:P,selectedTool:_,setSelectedTool:T},M)),[_]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(ButtonGroup,{variant:"contained","aria-label":"choose tool for manipulating view or selection",className:"z-[2] p-2",children:F})})}),useViewStateLink=()=>{const f=useViewerStoreApi(),s=useChartID(),d=useMetadata();reactExports.useEffect(()=>{var P;if(!((P=window.mdv.chartManager)!=null&&P.viewData))return;const _=window.mdv.chartManager,{viewData:S}=_,T=_.getChart(s);if(!S.links)return;const F=S.links.filter(H=>H.type==="view_state"&&H.linked_charts.includes(s));return F.length===0?void 0:(console.log("found view state link(s)",F),f.subscribe(({viewState:H})=>{T.ignoreStateUpdate=!0;const J=H.zoom,K=d.Pixels.PhysicalSizeX,z=d.Pixels.PhysicalSizeXUnit;F.forEach(oe=>{oe.linked_charts.filter(ae=>ae!==s).map(ae=>_.getChart(ae)).forEach(ae=>{var ye,Ue;if(!ae||ae.ignoreStateUpdate)return;const ge=(ye=ae.vivStores)==null?void 0:ye.viewerStore.getState().metadata;if(!ge)return;const pe=ge.Pixels.PhysicalSizeX;if(ge.Pixels.PhysicalSizeXUnit!==z)throw"physical size units do not match";const ve=K/pe,be=J*ve,Re=H.target.map((It,St)=>It*ve),Fe={...H,zoom:be,target:Re};(Ue=ae.viewerStore)==null||Ue.setState({viewState:Fe})})}),T.ignoreStateUpdate=!1}))},[f,s,d.Pixels.PhysicalSizeX,d.Pixels.PhysicalSizeXUnit])};class VivContrastExtension extends LayerExtension{static get componentName(){return"VivContrastExtension"}getShaders(s){return{inject:{"fs:#decl":`///----- VivContrastExtension decl
                uniform float contrast[6];
                uniform float brightness[6];

                //https://cis700-procedural-graphics.github.io/files/toolbox_functions.pdf
                float bias(float b, float t) {
                    return pow(t, log(b) / log(0.5));
                }
                float gain(float g, float t) {
                    if (t < 0.5) {
                        return bias(1. - g, 2. * t) / 2.;
                    } else {
                        return 1. - bias(1. - g, 2. - 2. * t) / 2.;
                    }
                }
                float applyBrightnessContrast(float intensity, int channelIndex) {
                    float c = contrast[channelIndex];
                    float b = brightness[channelIndex];
                    return bias(b, gain(c, intensity));
                }
                ///---- end VivContrastExtension
                `,"fs:DECKGL_PROCESS_INTENSITY":`///----- VivContrastExtension DECKGL_PROCESS_INTENSITY
                intensity = apply_contrast_limits(intensity, contrastLimits);
                intensity = clamp(intensity, 0., 1.);
                intensity = applyBrightnessContrast(intensity, channelIndex);
                ///---- end VivContrastExtension
                `}}}updateState(s,d){const{props:_}=s,{contrast:S,brightness:T}=_;if(S.length!==6||T.length!==6){const F=Array(6),M=Array(6);for(let P=0;P<6;P++)F[P]=S[P]??1,M[P]=T[P]??0;for(const P of this.getModels())P.setUniforms({contrast:F,brightness:M});return}for(const F of this.getModels())F.setUniforms({contrast:S,brightness:T})}}const VivScatter=()=>{const f=useChart();return jsxRuntimeExports.jsx(SpatialAnnotationProvider,{chart:f,children:jsxRuntimeExports.jsx(Main,{})})},useJsonLayer=()=>{const f=useChartID(),{root:s}=useProject(),{showJson:d}=useConfig(),{json:_}=useRegion(),S=`json_${getVivId(`${f}detail-react`)}`;return reactExports.useMemo(()=>_?new GeoJsonLayer({id:S,data:`${s}/${_}`,opacity:.25,filled:!0,getFillColor:F=>[255,255,255,150],getLineColor:F=>[F.properties.DN,255,255,150],getLineWidth:2,lineWidthMinPixels:1,pickable:!0,autoHighlight:!0,getText:F=>F.properties.DN,getTextColor:[255,255,255,255],getTextSize:12,textBackground:!0,visible:d}):null,[_,d,S,s])},Main=observer(()=>{const f=useLoader(),s=useViewerStoreApi(),[d,_]=useChartSize(),S=useChartID(),T=`${S}detail-react`,F=useOuterContainer(),{scatterProps:M,selectionLayer:P}=useSpatialLayers(),{scatterplotLayer:H,getTooltip:J}=M,K=useJsonLayer(),{colors:z,contrastLimits:oe,channelsVisible:se,selections:ae,brightness:ge,contrast:pe}=useChannelsStore(({colors:It,contrastLimits:St,channelsVisible:At,selections:xt,brightness:Ct,contrast:Nt})=>({colors:It,contrastLimits:St,channelsVisible:At,selections:xt,brightness:Ct,contrast:Nt}),shallow$1),he=useViewerStore(It=>It.viewState);useViewStateLink();const ve=reactExports.useRef(),be=reactExports.useRef(null);reactExports.useEffect(()=>{f&&(he||s.setState({viewState:getDefaultInitialViewState(f,{width:d,height:_})}))},[f,d,_,he,s.setState]);const Re=reactExports.useMemo(()=>[new ColorPaletteExtension,new VivContrastExtension],[]),Fe=reactExports.useMemo(()=>new DetailView({id:T,snapScaleBar:!0,width:d,height:_}),[T,d,_]);reactExports.useEffect(()=>{M.viewState&&(s.setState({viewState:M.viewState}),ve.current=M.viewState)},[M.viewState,s.setState]);const ye=reactExports.useMemo(()=>({loader:f,selections:ae,contrastLimits:oe,extensions:Re,colors:z,channelsVisible:se,brightness:ge,contrast:pe}),[f,ae,oe,Re,z,se,ge,pe]),Ue=reactExports.useMemo(()=>({getTooltip:J,style:{zIndex:"-1"},layers:[K,H,P],id:`${S}deck`,onAfterRender:()=>{M.onAfterRender()},glOptions:{preserveDrawingBuffer:!0},controller:{doubleClickZoom:!1}}),[H,P,K,S,J,M.onAfterRender]);return he?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectionOverlay,{}),jsxRuntimeExports.jsx(MDVivViewer,{outerContainer:F,views:[Fe],layerProps:[ye],viewStates:[{...he,id:T}],onViewStateChange:It=>{s.setState({viewState:{...It.viewState,id:T}}),be.current&&(be.current.innerText=JSON.stringify(It.viewState,null,2))},deckProps:Ue})]}):jsxRuntimeExports.jsx("div",{children:"Loading..."})}),PopoverPicker=({color:f,onChange:s})=>{const[d,_,S]=f||[255,255,255],T=f?`#${d.toString(16).padStart(2,"0")}${_.toString(16).padStart(2,"0")}${S.toString(16).padStart(2,"0")}`:"#000000",F=reactExports.useMemo(()=>({border:"none",cursor:"pointer",width:"100%",backgroundColor:T}),[T]);return jsxRuntimeExports.jsx("input",{type:"color",className:"color-picker-no-border",style:F,value:T,onChange:M=>{const P=M.target.value,[H,J,K]=[P.slice(1,3),P.slice(3,5),P.slice(5,7)].map(z=>Number.parseInt(z,16));s([H,J,K])}})};function MainVivColorDialog({vivStores:f}){return jsxRuntimeExports.jsx(VivProvider,{vivStores:f,children:jsxRuntimeExports.jsx(Test,{})})}const ChannelChooser=({index:f})=>{const s=useMetadata().Pixels.Channels.map(H=>H.Name),{selections:d,setPropertiesForChannel:_}=useChannelsStore(({selections:H,setPropertiesForChannel:J})=>({selections:H,setPropertiesForChannel:J}),shallow$1),S=useLoader(),{setIsChannelLoading:T,isChannelLoading:F,removeIsChannelLoading:M,use3d:P}=useViewerStore(({setIsChannelLoading:H,isChannelLoading:J,removeIsChannelLoading:K,use3d:z})=>({setIsChannelLoading:H,isChannelLoading:J,removeIsChannelLoading:K,use3d:z}),shallow$1);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("select",{disabled:F[f],value:d[f].c,className:"w-full p-1",onChange:async H=>{try{const J={...d[f],c:Number.parseInt(H.target.value)};T(f,!0);const{domain:K,contrastLimits:z}=await getSingleSelectionStats({loader:S,selection:J,use3d:P});_(f,{domains:K,contrastLimits:z}),T(f,!1),_(f,{selections:J})}catch(J){console.error("failed to load channel"),console.error(J),M(f)}},children:s.map((H,J)=>jsxRuntimeExports.jsx("option",{value:J,children:H},`${J}_${H}`))})})},BrightnessContrast=({index:f})=>{const{contrast:s,brightness:d}=useChannelsStore(({contrast:T,brightness:F})=>({contrast:T,brightness:F})),_=useChannelsStoreApi(),S=useViewerStore(T=>T.isChannelLoading);return jsxRuntimeExports.jsxs("div",{className:"col-span-5 pl-2 pr-2 flex items-center gap-4",children:["contrast:",jsxRuntimeExports.jsx(Slider,{size:"small",disabled:S[f],value:s[f],min:.1,max:.9,step:.01,onChange:(T,F)=>{s[f]=F;const M=[...s];_.setState({contrast:M})},onClick:T=>{if(T.detail===2){s[f]=.5;const F=[...s];_.setState({contrast:F})}}}),"brightness:",jsxRuntimeExports.jsx(Slider,{size:"small",disabled:S[f],value:d[f],min:.01,max:.99,step:.01,onChange:(T,F)=>{d[f]=F;const M=[...d];_.setState({brightness:M})},onClick:T=>{if(T.detail===2){d[f]=.5;const F=[...d];_.setState({brightness:F})}}})]})},ChannelController=({index:f})=>{const s=useChannelsStore(({contrastLimits:se})=>se),{colors:d,domains:_,channelsVisible:S,removeChannel:T}=useChannelsStore(({colors:se,domains:ae,channelsVisible:ge,removeChannel:pe})=>({colors:se,domains:ae,channelsVisible:ge,removeChannel:pe})),F=useViewerStore(se=>se.isChannelLoading),M=useMetadata(),P=useChannelsStoreApi();if(!M)throw"no metadata";const H=S[f],J=d[f],K=`rgb(${J[0]}, ${J[1]}, ${J[2]})`,z=reactExports.useMemo(()=>({gridTemplateColumns:"0.4fr 0.1fr 0.1fr 1fr 0.1fr"}),[]),oe=reactExports.useMemo(()=>({color:K,marginLeft:"10px"}),[K]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"grid justify-start items-center p-1",style:z,children:[jsxRuntimeExports.jsx(ChannelChooser,{index:f}),jsxRuntimeExports.jsx(Checkbox,{checked:H,disabled:F[f],onChange:()=>{S[f]=!H;const se=[...S];P.setState({channelsVisible:se})}}),jsxRuntimeExports.jsx(PopoverPicker,{color:J,onChange:se=>{d[f]=se;const ae=[...d];P.setState({colors:ae})}}),jsxRuntimeExports.jsx(Slider,{size:"small",disabled:F[f],style:oe,value:s[f],min:_[f][0],max:_[f][1],valueLabelDisplay:"auto",onChange:(se,ae)=>{s[f]=ae;const ge=[...s];P.setState({contrastLimits:ge})}}),jsxRuntimeExports.jsx("button",{type:"button",className:"pl-4",onClick:()=>{T(f)},children:jsxRuntimeExports.jsx(X$2,{})}),jsxRuntimeExports.jsx(BrightnessContrast,{index:f})]})})},AddChannel=()=>{const f=useLoader(),{selections:s,setPropertiesForChannel:d}=useChannelsStore(({selections:M,setPropertiesForChannel:P})=>({selections:M,setPropertiesForChannel:P})),_=s.length<6,S=useChannelsStore(M=>M.addChannel),{use3d:T,setIsChannelLoading:F}=useViewerStore(({use3d:M,setIsChannelLoading:P})=>({use3d:M,setIsChannelLoading:P}),shallow$1);return jsxRuntimeExports.jsx("button",{type:"button",className:"p-2 rounded-lg bg-slate-400",disabled:!_,onClick:async()=>{const M=s.length;F(M,!0);const P={c:0,z:0,t:0};S({selections:P,ids:String(Math.random()),channelsVisible:!0});const{domain:H,contrastLimits:J}=await getSingleSelectionStats({loader:f,selection:P,use3d:T});d(M,{domains:H,contrastLimits:J}),F(M,!1)},children:"Add channel"})},Test=()=>{const f=useChannelsStore(({ids:s})=>s);return jsxRuntimeExports.jsxs("div",{className:"bg-[hsl(var(--input))] w-full",children:[f.map((s,d)=>jsxRuntimeExports.jsx(ChannelController,{index:d},s)),jsxRuntimeExports.jsx(AddChannel,{})]})},ColorChannelDialogReact=observer(function f({vivStores:s}){return jsxRuntimeExports.jsx(MainVivColorDialog,{vivStores:s})});class ColorDialogReactWrapper extends BaseDialog{constructor(d){d.__doc__!==document&&console.warn("ColorDialogReactWrapper may have styling issues in popouts...");const _={width:500,title:`Color Channels (${d.config.title})`,doc:d.__doc__||document,onclose:()=>{d.colorDialog=null,d.dialogs.splice(d.dialogs.indexOf(this),1)}};super(_,d);Bt(this,"_root")}get root(){return this._root}set root(d){this._root=d}init(d){const _=createEl("div",{},this.dialog);this.root=createMdvPortal(jsxRuntimeExports.jsx(ChartProvider,{chart:d,children:jsxRuntimeExports.jsx(ColorChannelDialogReact,{vivStores:d.vivStores})}),_,this)}close(){super.close(),this.root?this.root.unmount():console.warn("not unmounting react root for dialog because of weirdness")}}BaseDialog.experiment.ColorDialogReact=ColorDialogReactWrapper;function VivScatterChartRoot(){const{vivStores:f}=useChart();return jsxRuntimeExports.jsx(VivProvider,{vivStores:f,children:jsxRuntimeExports.jsx(MainChart,{})})}const MainChart=observer(()=>{const f=useImgUrl(),s=useViewerStore(S=>S.isViewerLoading),d=useViewerStoreApi();reactExports.useEffect(()=>{if(!f)throw"no image url";const S={urlOrFile:f,description:"test"};d.setState({source:S})},[f,d.setState]);const _=useViewerStore(S=>S.source);return useImage(_),!s&&jsxRuntimeExports.jsx(VivScatter,{})}),scatterDefaults={course_radius:1,radius:10,opacity:1,color_by:null,color_legend:{display:!1},tooltip:{show:!1},category_filters:[],zoom_on_filter:!1,point_shape:"circle",contour_fill:!1,contour_bandwidth:.1,contour_intensity:1,contour_opacity:.5};function adaptConfig(f){const s={...scatterDefaults,...f};return s.channel||(s.channel=0),s.contourParameter||(s.contourParameter=s.param[2]),s.viv=applyDefaultChannelState(s.viv),s}class VivMdvReact extends BaseReactChart{constructor(d,_,S){const T=adaptConfig(S);super(d,_,T,VivScatterChartRoot);Bt(this,"colorDialog");Bt(this,"vivStores");Bt(this,"ignoreStateUpdate",!1);Bt(this,"colorBy");this.colorByColumn(T.color_by),makeObservable(this,{colorBy:observable,colorByColumn:action,colorByDefault:action}),this.addMenuIcon("fas fa-palette","Alter Channels").addEventListener("click",()=>{this.colorDialog||(this.colorDialog=new ColorDialogReactWrapper(this),this.dialogs.push(this.colorDialog))}),this.vivStores=createVivStores()}get viewerStore(){var d;return(d=this.vivStores)==null?void 0:d.viewerStore}colorByColumn(d){if(!d)return this.colorByDefault();this.config.color_by=d,this.colorBy=this.getColorFunction(d,!0)}colorByDefault(){this.config.color_by=null,this.colorBy=null}getColorOptions(){return{colorby:"all"}}getSettings(){const d=this.config,{tooltip:_}=d,S=this.dataStore.getColumnList(),T=S.filter(oe=>oe.datatype.match(/text/i)),F=super.getSettings();let M=this.dataStore.getColumnValues(d.param[2])||[];M=M.map(oe=>({t:oe})),M.push({t:"None"});const P=observable.array([M,"t","t"]),H=d.category_filters.map(oe=>{const se=this.dataStore.columnIndex[oe.column].values.slice();return se.unshift("all"),{type:"multidropdown",label:`'${oe.column}' filter`,current_value:oe.category,values:[se],func:ae=>{oe.category=ae,d.category_filters=d.category_filters.slice()}}}),J=this.dataStore,z=Object.keys(J.regions.all_regions).filter(oe=>J.regions.all_regions[oe].viv_image).map(oe=>({name:oe,value:oe}));return F.concat([{type:"dropdown",label:`Image (${J.getColumnName(J.regions.region_field)})`,current_value:d.region,values:[z,"name","value"],func:oe=>{console.log("setting image region:",oe),d.title===d.region&&(d.title=oe),d.region=oe,d.background_filter.category=oe}},{type:"check",label:"Show Tooltip",current_value:_.show,func:async oe=>{if(_.show=oe,!_.column){const se=S[0].field;console.log("No tooltip column set, using first column:",se),await loadColumn(this.dataStore.name,S[0].field),_.column=S[0].field}}},{type:"dropdown",label:"Tooltip value",current_value:d.tooltip.column||S[0].field,values:[S,"name","field"],func:async oe=>{await loadColumn(this.dataStore.name,oe),_.column=oe}},{type:"dropdown",label:"Shape",current_value:d.point_shape,values:[["circle","square","gaussian"]],func:oe=>{d.point_shape=oe}},{type:"radiobuttons",label:"course radius",current_value:d.course_radius||1,choices:[[.1,.1],[1,1],[10,10],[100,100]],func:oe=>{d.course_radius=oe}},{type:"slider",label:"radius",current_value:d.radius||5,min:0,max:20,continuous:!0,func:oe=>{d.radius=oe}},{type:"slider",label:"opacity",current_value:Math.sqrt(d.opacity||scatterDefaults.opacity),min:0,max:1,continuous:!0,func:oe=>{d.opacity=oe*oe}},{type:"check",label:"zoom on filter",current_value:d.zoom_on_filter||!1,func:oe=>{d.zoom_on_filter=oe}},{type:"check",label:"show json layer",current_value:d.showJson||!1,func:oe=>{d.showJson=oe}},{type:"folder",label:"Density Visualisation",current_value:[{type:"folder",label:"Category selection",current_value:[{type:"dropdown",label:"Contour parameter",current_value:d.contourParameter||d.param[2],values:[T,"name","field"],func:oe=>{if(oe===d.contourParameter)return;d.contourParameter=d.param[2]=oe;const se=(this.dataStore.getColumnValues(oe)||[]).map(ae=>({t:ae}));se.push({t:"None"}),P[0]=se}},{type:"multidropdown",label:"Contour Category 1",current_value:d.category1||"None",values:P,func:oe=>{oe==="None"&&(oe=null),d.category1=oe}},{type:"multidropdown",label:"Contour Category 2",current_value:d.category2||"None",values:P,func:oe=>{oe==="None"&&(oe=null),d.category2=oe}}],func:oe=>{}},{type:"slider",max:25,min:1,current_value:d.contour_bandwidth,label:"KDE Bandwidth",continuous:!0,func:oe=>{d.contour_bandwidth=oe}},{label:"Fill Contours",type:"check",current_value:d.contour_fill,func:oe=>{d.contour_fill=oe}},{type:"slider",max:1,min:0,current_value:d.contour_intensity,continuous:!0,label:"Fill Intensity",func:oe=>{d.contour_intensity=oe}},{type:"slider",max:1,min:0,doc:this.__doc__,current_value:d.contour_opacity,continuous:!1,label:"Contour opacity",func:oe=>{d.contour_opacity=oe**3}}],func:oe=>{}},{type:"folder",label:"Category Filters",current_value:H,func:oe=>{}}])}getConfig(){const d=super.getConfig();if(this.vivStores){const{viewerStore:_,channelsStore:S,imageSettingsStore:T}=this.vivStores,F=S.getState(),M=_.getState(),H={viewerStore:{viewState:{target:M.viewState.target,zoom:M.viewState.zoom}},channelsStore:{channelsVisible:F.channelsVisible,colors:F.colors,contrastLimits:F.contrastLimits,brightness:F.brightness,contrast:F.contrast,domains:F.domains,selections:F.selections},imageSettingsStore:{}};console.table(H),d.viv={...d.viv,...H}}return d}}BaseChart.types.VivMdvRegionReact={...BaseChart.types.viv_scatter_plot,init:(f,s,d)=>{BaseChart.types.viv_scatter_plot.init(f,s,d),f.radius=scatterDefaults.radius},class:VivMdvReact,name:"Viv Scatter Plot (react)"};const vSideEffect=42;async function getExportCsvStream(f,s="	",d=`
`){const _=f.columns,S=f.dataStore;f.updateModel();const T=f.data,F=T.length,M=new TextEncoder;return new ReadableStream({async start(H){try{const J=["index",..._].join(s)+d;H.enqueue(M.encode(J));for(let K=0;K<F;K++){const z=T[K],oe=S.getRowAsObject(z,_),se=[K].concat(_.map(ae=>oe[ae])).join(s)+d;H.enqueue(M.encode(se)),K%1e5===0&&await new Promise(ae=>setTimeout(ae,0))}H.close(),alert("Export complete")}catch(J){console.error("Stream writing failed:",J),H.error(J)}}})}class DataModel{constructor(s,d={}){this.dataStore=s,this.data=new Int32Array(0);const _=0;for(let S=0;S<_;S++)this.data[S]=S;this.size=_,this.listeners={},(d.autoupdate==null||d.autoupdate===!0)&&s.addListener("sss",S=>{S==="filtered"&&this.updateModel()})}getLength(){return this.size}addListener(s,d){this.listeners[s]=d}setColumns(s){this.columns=s}sort(s,d){if(s==="__index__"){this.data.sort(),d==="desc"&&this.data.reverse();return}const _=this.dataStore.getRawColumn(s),S=this.dataStore.columnIndex[s];if(S.datatype==="unique"){const T={},F=new TextDecoder,M=S.stringLength,P=d==="desc"?1:-1;for(let H=0;H<this.data.length;H++){const J=this.data[H];T[J]=F.decode(_.slice(J*M,J*M+M))}this.data.sort((H,J)=>T[H].localeCompare(T[J])*P)}else d==="desc"?this.data.sort((T,F)=>{let M=_[T],P=_[F];return M=Number.isNaN(M)?Number.MAX_VALUE:M,P=Number.isNaN(P)?Number.MAX_VALUE:P,M-P}):this.data.sort((T,F)=>{let M=_[T],P=_[F];return M=Number.isNaN(M)?Number.MIN_VALUE:M,P=Number.isNaN(P)?Number.MIN_VALUE:P,P-M})}createColumn(s,d){const _={name:s,field:s,datatype:"text",values:[""]},S=new SharedArrayBuffer(this.dataStore.size);if(d){const T=this.dataStore.getRawColumn(d);new Uint8Array(S).set(T),_.values=this.dataStore.getColumnValues(d).slice(0)}this.dataStore.addColumn(_,S,!0)}removeColumn(s){this.dataStore.removeColumn(s,!0,!0)}async getDataAsBlob(s="	",d=`
`){const _=await getExportCsvStream(this,s,d);return await new Response(_).blob()}getValueSuggestion(s,d){const _=this.dataStore.getColumnValues(d);for(const S of _)if(S===s||S.startsWith(s))return S;return null}_getValueIndex(s,d){let _=d.values.indexOf(s);if(_===-1){if(d.values.push(s),d.values.length>256)throw new Error(`text column '${d.name}' exceeded 256 values when adding '${s}'`);_=d.values.length-1}return _}updateValue(s,d,_,S=!0){const T=this.dataStore.columnIndex[_],F=this._getValueIndex(s,T);T.data[d]=F,S&&this.dataStore.dataChanged([_])}updateRange(s,d,_,S){const T=this.dataStore.getRawColumn(s),F=S==="+"?T[this.data[d]]:T[this.data[_]];let M=S==="+"?d:_;const P=S==="+"?1:-1,H=S==="+"?_+1:d-1;for(;M!==H;M+=P)T[this.data[M]]=F;this.dataStore.dataChanged([s])}replaceValues(s,d,_,S=!0){const T=this.dataStore.columnIndex[_],F=this._getValueIndex(s,T);if(d==="_all_")for(let M=0;M<this.data.length;M++)T.data[this.data[M]]=F;else if(d==="_blank_"){const M=T.values.indexOf(s);if(M===-1)return;for(let P=0;P<this.data.length;P++){const H=this.data[P];T.data[H]===M&&(T.data[this.data[P]]=F)}}else if(d==="_delete_"){this.dataStore.cleanColumnData(_);return}else{const M=this._getValueIndex(d,T);for(let P=0;P<this.data.length;P++){const H=this.data[P];T.data[H]===F&&(T.data[this.data[P]]=M)}}S&&this.dataStore.dataChanged([_])}updateModel(){const s=this.dataStore.filterArray;this.data=new Int32Array(this.dataStore.filterSize);const d=this.data,_=this.dataStore.size;let S=0;for(let T=0;T<_;T++)s[T]===0&&(d[S++]=T);this.size=this.dataStore.filterSize;for(const T in this.listeners)this.listeners[T]()}getId(s){return this.data[s]}getItemField(s,d){return this.dataStore.getRowAsObject(this.data[s],[d])[d]}getItem(s){return this.dataStore.getRowAsObject(this.data[s],this.columns)}}const COL_TYPE="multitext",SEP=/\W*\;\W*/,JOIN="; ",splitTags=f=>f.split(SEP).filter(s=>s);function getTagValueIndices(f,s){if(f.match(SEP))throw new Error("getTagValueIndices: tag must not contain separator (should be handled before calling this function)");return s.values.map((d,_)=>d.split(SEP).includes(f)?_:-1).filter(d=>d!==-1)}class TagModel{constructor(s,d="__tags"){Bt(this,"tagColumn");Bt(this,"dataStore");Bt(this,"dataModel");Bt(this,"isReady",!1);Bt(this,"listeners",[]);if(this.dataStore=s,this.dataModel=new DataModel(s,{autoupdate:!0}),this.dataModel.updateModel(),this.dataModel.addListener("tag",()=>{this.callListeners()}),s.columnIndex[d])loadColumn(s.name,d).then(S=>{this.isReady=!0,this.callListeners()});else{const S={name:d,datatype:"multitext",editable:!0,separator:";",field:d},T=new SharedArrayBuffer(s.size*2);s.addColumn(S,T),this.isReady=!0}const _=s.columnIndex[d];if(_.datatype!==COL_TYPE)throw new Error(`column '${d}' is not of type '${COL_TYPE}'`);this.tagColumn=_}callListeners(){this.listeners.map(s=>s())}addListener(s){return this.listeners.push(s),s}removeListener(s){const d=this.listeners.indexOf(s);d!==-1&&this.listeners.splice(d,1)}setTag(s,d=!0){setTag({tag:s,...this},d),this.dataModel.updateModel(),this.callListeners()}getTags(){return getTags(this.tagColumn)}entireSelectionHasTag(s){const d=this.tagColumn;if(s.match(SEP))return s.split(SEP).every(S=>this.entireSelectionHasTag(S));const _=getTagValueIndices(s,d);return!this.dataModel.data.some(S=>!_.includes(d.data[S]))}getTagsInSelection(){const{dataModel:s,tagColumn:d}=this,_=new Set;for(const T of s.data)_.add(d.data[T]);const S=[..._].map(T=>d.values[T]);return new Set(S.flatMap(splitTags))}}function getValueIndex(f,s){let d=s.values.indexOf(f);if(d===-1){if(s.values.push(f),s.values.length>256)throw new Error(`text column '${s.name}' exceeded 256 values when adding '${f}'`);d=s.values.length-1}return d}function setTag(f,s=!0){const{tag:d,tagColumn:_,dataModel:S}=f;setTagOnAllSelectedValues(d,_,S,!0,s)}function setTagOnAllSelectedValues(f,s,d,_=!0,S=!0){if(sanitizeTags(s),f.match(SEP)){const H=f.split(SEP).map(J=>setTagOnAllSelectedValues(J,s,d,!1,S)).reduce((J,K)=>J||K,!1);_&&H&&d.dataStore.dataChanged([s.name]);return}const T=getTagValueIndices(f,s),F=new Map;S?s.values.filter((H,J)=>!T.includes(J)).forEach((H,J)=>{const z=[f,...splitTags(H)].sort().join(JOIN);F.set(J,s.values.indexOf(z))}):s.values.filter((H,J)=>T.includes(J)).forEach((H,J)=>{const z=splitTags(H).filter(oe=>oe!==f).sort().join(JOIN);F.set(J,s.values.indexOf(z))});const{data:M}=d;let P=0;for(let H=0;H<M.length;H++){const J=s.data[M[H]];if(S===T.includes(J))continue;P++;const K=J;let z=F.get(K);if(z===void 0||z===-1){const oe=s.values[K],se=splitTags(oe),ge=(S?[f,...se]:se.filter(pe=>pe!==f)).sort().join(JOIN);z=getValueIndex(ge,s),F.set(K,z)}s.data[M[H]]=z}return _&&P&&d.dataStore.dataChanged([s.name]),P!==0}function sanitizeTags(f,s=!1){const d=f.values.map((P,H)=>{const J=[...new Set(splitTags(P))].sort().join(JOIN);return{i:H,unsorted:P,sorted:J}}),_=d.filter(P=>P.sorted===P.unsorted);if(_.length===d.length)return;console.log("sanitizing tags...");const S=_.map(P=>P.sorted);if(S.length>256)throw new Error(`text column '${f.name}' exceeded 256 values when sanitizing tags`);f.values=S;const T=new Map;for(const P of d){const{i:H,sorted:J}=P;T.set(H,getValueIndex(J,f))}const F=new Set;for(const P in f.data){const H=T.get(f.data[P]);f.data[P]=H,F.add(H)}const M=d.length-F.size;M&&console.warn(`sanitizeTags left ${M} unused values...`),s&&console.warn("sanitizeTags notify ignored")}function getTags(f){return new Set(f.values.flatMap(splitTags))}const icon$1=jsxRuntimeExports.jsx(default_1$c,{fontSize:"small"}),checkedIcon$1=jsxRuntimeExports.jsx(default_1$b,{fontSize:"small"});function TagView({dataStore:f,columnName:s}){const d=reactExports.useMemo(()=>new TagModel(f,s),[f,s]);reactExports.useEffect(()=>{const M=d.addListener(()=>{console.log("tagModel changed"),S(d.getTags()),F(d.getTagsInSelection()),console.log("tagList",d.getTags()),console.log("tagsInSelection",d.getTagsInSelection())});return()=>{d.removeListener(M)}},[d]);const[_,S]=reactExports.useState(d.isReady?d.getTags():new Set),[T,F]=reactExports.useState(d.isReady?d.getTagsInSelection():new Set);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("h3",{children:["Annotations (on ",d.dataModel.getLength()," selected rows):"]}),jsxRuntimeExports.jsx(Autocomplete,{freeSolo:!0,multiple:!0,options:[..._],value:[...T],onChange:(M,P)=>{const H=P.filter(K=>!T.has(K));for(const K of H)console.log("main Autocomplete onChange adding",K),d.setTag(K,!0);const J=[...T].filter(K=>!P.includes(K));for(const K of J)console.log("main Autocomplete onChange removing",K),d.setTag(K,!1)},renderInput:M=>{const{key:P,...H}=M;return jsxRuntimeExports.jsx(TextField,{...H,label:`add tags to '${s}'...`,onKeyDown:J=>{if(J.key==="Enter"){const{target:K}=J;K instanceof HTMLInputElement&&d.setTag(K.value,!0)}}},P)},renderOption:(M,P,{selected:H})=>{const{key:J,...K}=M,z=!d.entireSelectionHasTag(P)&&T.has(P);return jsxRuntimeExports.jsxs("li",{...K,onClick:()=>{z?d.setTag(P,!0):d.setTag(P,!H)},children:[jsxRuntimeExports.jsx(Checkbox,{icon:icon$1,checkedIcon:checkedIcon$1,style:{marginRight:8},checked:d.entireSelectionHasTag(P),indeterminate:z}),P]},J)},renderTags:(M,P)=>M.map((H,J)=>{const{key:K,...z}=P({index:J});return jsxRuntimeExports.jsx(Chip,{...z,label:H},K)})})]})}const AnnotationDialogComponent=observer(({dataStore:f})=>{const s=reactExports.useMemo(()=>f.columns.filter(M=>M.datatype==="multitext").map(M=>M.name),[f]),[d,_]=reactExports.useState(),[S,T]=reactExports.useState("empty"),F=M=>{if(M.trim()==="")return T("empty"),!1;const P=f.columnIndex[M];return P&&P.datatype!=="multitext"?(T("clash"),!1):(T("ok"),!0)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Autocomplete,{freeSolo:!0,options:s,onChange:(M,P)=>{F(P)&&_(P)},onInputChange:({currentTarget:M})=>{if(M instanceof HTMLInputElement){const{value:P}=M;F(P)}},renderInput:M=>{const{key:P,...H}=M;return jsxRuntimeExports.jsx(TextField,{...H,color:S?void 0:"warning",label:"Annotation column",placeholder:"Annotation column name"},P)},renderOption:(M,P)=>{const{key:H,...J}=M;return jsxRuntimeExports.jsx("li",{...J,children:P},H)}}),S==="clash"&&jsxRuntimeExports.jsx("p",{children:"Incompatible column with that name already exists..."}),d&&jsxRuntimeExports.jsx(TagView,{dataStore:f,columnName:d}),!d&&jsxRuntimeExports.jsx("h2",{children:"Select or add a column above to use for annotations."})]})});class AnnotationDialogReact extends BaseDialog{constructor(d){super({title:`Annotate '${d.name}'`,width:400,height:300},null);Bt(this,"root");this.root=createMdvPortal(jsxRuntimeExports.jsx(AnnotationDialogComponent,{dataStore:d}),this.dialog,this)}close(){super.close(),this.root.unmount()}}BaseDialog.experiment.AnnotationDialogReact=AnnotationDialogReact;const SideEffect="AnnotationDialogReact loaded";function ReactTest(){const f=useChart(),{dataStore:s}=f,d=useChartID(),[_,S]=reactExports.useState(s.filterSize),[T]=reactExports.useState(s.getDimension("catcol_dimension")),[F,M]=reactExports.useState(["hello","world"]),[P,H]=reactExports.useState(f.config.text);return reactExports.useEffect(()=>{console.warn("WordCloudChart effect liable to be buggy"),s.addListener(d,()=>S(s.filterSize)),f.addListener("text",(se,ae)=>H(`${ae} ${f.config.wordSize}`));const J=f.config.param[0],K=f.config.param[1],z=s.getColumnValues(J),oe=s.getColumnValues(K);return s.columnIndex[J],s.columnIndex[K],s.getRowAsObject(),M(z),console.log(oe),T!=null&&T.getAverages?T.getAverages(se=>{console.log(se)},[K],{}):console.log("no averages"),()=>{s.removeListener(d),f.removeListener("text")}},[s,T,P]),jsxRuntimeExports.jsxs("div",{style:{padding:"0.3em",overflow:"auto",color:"white"},children:[jsxRuntimeExports.jsx("h2",{children:"Words:"}),"This component served as an earlier test for React charts, and is not currently used... it might make sense to develop it a bit further, as a way to test out the new architecture. But there are higher priorities.",jsxRuntimeExports.jsx("pre",{children:JSON.stringify(F,null,2)})]})}class ReactWordCloudChart extends BaseReactChart{constructor(s,d,_){super(s,d,_,ReactTest)}getSettings(){const s=this.config;return super.getSettings().concat([{type:"slider",label:"Word Size",current_value:s.wordSize||100,min:10,max:100,func:_=>{s.wordSize=_}}])}remove(){super.remove()}}BaseChart.types.WordCloud2={class:ReactWordCloudChart,name:"WordCloud (React)",params:[{type:["text","multitext"],name:"text"},{type:["text","multitext"],name:"word size"}],init:(f,s,d)=>{f.wordSize=20}};const wc$1=42;function useColumnData(f,s=100){const d=useDataStore(),[_,S]=reactExports.useState(null),[T,F]=reactExports.useState(null),[M,P]=reactExports.useState(null);return reactExports.useEffect(()=>{if(!window.mdv.chartManager)return;const H=window.mdv.chartManager,J=d.getFilteredIndices(),K=H._getColumnsAsync(d.name,[f]);P(null),S(null),F(null);let z=!1;return console.log("useColumnData effect"),Promise.all([J,K]).then(([oe])=>{if(console.log("useColumnData promise resolved"),z)return;const se=d.columnIndex[f];P(se);const ae=new Float32Array(oe.length);for(let pe=0;pe<oe.length;pe++){const he=oe[pe],ve=ae[pe]=se.data[he];Number.isNaN(ve)&&(ae[pe]=Number.NEGATIVE_INFINITY)}const ge=oe.sort((pe,he)=>se.data[he]-se.data[pe]);F(ge.slice(0,s)),S(ae.sort((pe,he)=>he-pe).slice(0,s))}),()=>{z=!0}},[f,d._filteredIndicesPromise,d.name,d.columnIndex,s,d.getFilteredIndices]),{columnData:_,indices:T,column:M}}function useMarkdownText(f){const[s,d]=reactExports.useState(null),[_,S]=reactExports.useState("");return reactExports.useEffect(()=>{__vitePreload(async()=>{const{default:T}=await import("../assets/MarkdownText-Bkm5FGkF.js");return{default:T}},[],import.meta.url).then(({default:T})=>{d(()=>T)})},[]),reactExports.useEffect(()=>{if(!f)return S("");if(s){const T=s(f);S(T)}},[f,s]),_}const HighlightedFeatureComponent=observer(()=>{const f=useChart(),s=useMarkdownText(f.config.text),{columnData:d,indices:_,column:S}=useColumnData(f.config.param[0],8),T=useHighlightedIndex(),F=_&&T>=0&&_.includes(T),M=S==null?void 0:S.data[T];return jsxRuntimeExports.jsxs("div",{style:{fontSize:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:s}}),jsxRuntimeExports.jsxs("em",{children:['"',f.config.param[0],'"']}),jsxRuntimeExports.jsx("br",{}),F?`Highlighted value (one of the top values): ${M}`:`Highlighted value ${M} not in top ${d==null?void 0:d.length} values.`,d&&[...d].map((P,H)=>jsxRuntimeExports.jsx("div",{style:{cursor:"pointer",border:`1px ${T===_[H]?"solid":"dashed"} #ccc`,padding:"0.5em",margin:"0.5em",borderRadius:"0.5em"},onClick:()=>{f.dataStore.dataHighlighted([_[H]],f)},children:P},_[H]))]})});class HighlightedFeatureChartWrapper extends BaseReactChart{constructor(s,d,_){_.text||(_.text=""),super(s,d,_,HighlightedFeatureComponent)}getSettings(){const s=this.config;return[...super.getSettings(),{type:"dropdown",name:"Column",label:"Column",current_value:this.config.param[0],values:[this.dataSource.dataStore.columns.map(d=>d.name)],func:action(d=>{this.config.param[0]=d})},{label:"Markdown Text",name:"text",type:"textbox",current_value:s.text||"",func:action(d=>{s.text=d})}]}}BaseChart.types.highlightedFeature={class:HighlightedFeatureChartWrapper,name:"Highlighted Feature",params:[{type:"_multi_column:all",name:"Columns to include in server query"}],extra_controls:()=>[{type:"textbox",name:"text",label:"Markdown Text:"}],init:(f,s,d)=>{f.text=d.text||""}};const hfc=42;var ArrowDropDown={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(ArrowDropDown,"__esModule",{value:!0});var default_1$5=ArrowDropDown.default=void 0,_createSvgIcon$5=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$5=jsxRuntimeExports;default_1$5=ArrowDropDown.default=(0,_createSvgIcon$5.default)((0,_jsxRuntime$5.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");var DoneAll={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(DoneAll,"__esModule",{value:!0});var default_1$4=DoneAll.default=void 0,_createSvgIcon$4=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$4=jsxRuntimeExports;default_1$4=DoneAll.default=(0,_createSvgIcon$4.default)((0,_jsxRuntime$4.jsx)("path",{d:"m18 7-1.41-1.41-6.34 6.34 1.41 1.41zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12zM.41 13.41 6 19l1.41-1.41L1.83 12z"}),"DoneAll");var Cached={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(Cached,"__esModule",{value:!0});var default_1$3=Cached.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$3=Cached.default=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"m19 8-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4z"}),"Cached");var SwapHoriz={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(SwapHoriz,"__esModule",{value:!0});var default_1$2=SwapHoriz.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$2=SwapHoriz.default=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99zM21 9l-3.99-4v3H10v2h7.01v3z"}),"SwapHoriz");var HighlightOff={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(HighlightOff,"__esModule",{value:!0});var default_1$1=HighlightOff.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;default_1$1=HighlightOff.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOff");const ColumnSelectionComponent=observer(f=>{const{setSelectedColumn:s,placeholder:d}=f,_=useDataStore(),S=reactExports.useMemo(()=>_.columns.filter(T=>{var F;return!((F=f.exclude)!=null&&F.includes(T.name))}).map(T=>T.name),[_,f.exclude]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Autocomplete,{options:S,onChange:(T,F)=>{s(F)},renderInput:T=>{const{key:F,...M}=T;return jsxRuntimeExports.jsx(TextField,{...M,placeholder:d},F)},renderOption:(T,F)=>{const{key:M,...P}=T,{datatype:H}=_.columnIndex[F];return jsxRuntimeExports.jsxs("li",{...P,children:[F,jsxRuntimeExports.jsxs("em",{className:"opacity-40 ml-2",children:["(",H,")"]})]},M)}})})}),icon=jsxRuntimeExports.jsx(default_1$c,{fontSize:"small"}),checkedIcon=jsxRuntimeExports.jsx(default_1$b,{fontSize:"small"});function useFilterConfig(f){const{datatype:s,field:d}=f;return useConfig().filters[d]}const TextFieldExtended=f=>{const{InputProps:s,customEndAdornment:d,..._}=f,S={...s,endAdornment:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[d," ",s.endAdornment]})};return jsxRuntimeExports.jsx(TextField,{..._,InputProps:S})},filterOptions=createFilterOptions({limit:100}),TextComponent=observer(({column:f})=>{const s=useDimensionFilter(f),d=useConfig().filters,{values:_}=f,S=useFilterConfig(f),T=(S==null?void 0:S.category)||[],F=reactExports.useCallback(z=>{const oe=S||{category:[]};action(()=>{oe.category=z,d[f.field]=oe})()},[d,f.field,S]);reactExports.useEffect(()=>{if(!S||S.category.length===0){s.removeFilter();return}s.filter("filterCategories",[f.field],T,!0)},[s,f.field,T,S]);const[M,P]=reactExports.useState(!1),H=reactExports.useCallback(z=>{if(T.includes(z)){F(T.filter(oe=>oe!==z));return}F([...T,z])},[F,T]),J=reactExports.useCallback(()=>{F([..._])},[_,F]),K=reactExports.useCallback(()=>{const z=_.filter(oe=>!T.includes(oe));F(z)},[_,T,F]);return jsxRuntimeExports.jsx(Autocomplete,{multiple:!0,size:"small",options:_,value:T,filterOptions,onChange:(z,oe)=>F(oe),onFocus:()=>P(!0),onBlur:()=>P(!1),renderInput:z=>{const{key:oe,...se}=z;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(TextFieldExtended,{...se,customEndAdornment:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(IconButton,{size:"small","aria-label":"toggle selection",onClick:K,children:jsxRuntimeExports.jsx(default_1$2,{fontSize:"inherit"})}),jsxRuntimeExports.jsx(IconButton,{size:"small","aria-label":"select all",onClick:J,children:jsxRuntimeExports.jsx(default_1$4,{fontSize:"inherit"})})]})},oe)})},renderOption:(z,oe)=>{const{key:se,...ae}=z;return jsxRuntimeExports.jsxs("li",{...ae,onClick:()=>H(oe),children:[jsxRuntimeExports.jsx(Checkbox,{icon,checkedIcon,style:{marginRight:8},checked:T.includes(oe),onClick:()=>H(oe)}),oe]},se)},renderTags:(z,oe)=>{const se=z.map((ae,ge)=>{const{key:pe,...he}=oe({index:ge});return jsxRuntimeExports.jsx(Chip,{...he,label:ae},pe)});return se.length>8?jsxRuntimeExports.jsxs("div",{children:[se.length," selected"]}):jsxRuntimeExports.jsx("div",{className:"max-h-32 overflow-auto",children:se})}})}),MultiTextComponent=observer(({column:f})=>(console.log("multitext selection dialog has missing features for 'operand' and other logic"),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(TextComponent,{column:f})}))),UniqueComponent=observer(({column:f})=>{const s=useDimensionFilter(f),d=useConfig().filters,_=useFilterConfig(f),[S]=reactExports.useState(_);reactExports.useEffect(()=>{if(_===null){s.removeFilter();return}s.filter("filterUnique",[f.field],_,!0)},[s,f.field,_]);const[T,F]=reactExports.useState(_||"");return jsxRuntimeExports.jsx(TextField,{size:"small",defaultValue:S,onChange:M=>F(M.target.value),onKeyDown:M=>{M.key==="Enter"&&action(()=>d[f.field]=T)()}})});function useRangeFilter(f){const s=useDimensionFilter(f),_=useConfig().filters[f.field]||f.minMax,T=f.datatype.match(/int/)?1:.01;reactExports.useEffect(()=>{if(_[0]===f.minMax[0]&&_[1]===f.minMax[1]){s.removeFilter();return}const[ae,ge]=_;s.filter("filterRange",[f.name],{min:ae,max:ge},!0)},[f,s,_]);const[F,M]=reactExports.useState([]),P=reactExports.useCallback(async()=>{const ae=new Worker(new URL(""+new URL("../assets/rawHistogramWorker-CYPeI1fE.js",import.meta.url).href,import.meta.url));ae.onmessage=ve=>{M(ve.data),ae.terminate()};const ge=f.datatype==="int32",pe=f.data,he=new SharedArrayBuffer(pe.length*4);new Float32Array(he).set(pe),ae.postMessage({data:he,min:f.minMax[0],max:f.minMax[1],bins:100,isFloat:ge})},[f]),[H,J]=_,[K,z]=f.minMax,oe=(H-K)/(z-K),se=(J-K)/(z-K);return{value:_,step:T,histogram:F,lowFraction:oe,highFraction:se,queryHistogram:P}}const Histogram=observer(({histogram:f,lowFraction:s,highFraction:d,queryHistogram:_})=>{const S=window.mdv.chartManager.theme==="dark",T=100,F=20,M=S?"#fff":"#000",P=Math.max(...f),H=2,J=1,K=(F-2*H)/P,z=s*T,oe=d*T;reactExports.useEffect(()=>{_()},[_]);const se=f.map((ae,ge)=>{const pe=ge*J,he=F-H-ae*K;return`${pe},${he}`}).join(" ");return jsxRuntimeExports.jsxs("svg",{width:"100%",height:F,viewBox:`0 0 ${T} ${F}`,preserveAspectRatio:"none",onClick:_,children:[jsxRuntimeExports.jsx("polyline",{points:se,fill:"none",stroke:M,strokeWidth:"1.5",vectorEffect:"non-scaling-stroke"}),jsxRuntimeExports.jsx("rect",{x:0,y:0,width:z,height:F,fill:S?"#333":"#888",fillOpacity:"0.8"}),jsxRuntimeExports.jsx("rect",{x:oe,y:0,width:T-oe,height:F,fill:S?"#333":"#888",fillOpacity:"0.8"})]})}),NumberComponent=observer(({column:f})=>{const s=useConfig().filters,d=useRangeFilter(f),{value:_,step:S}=d,T=reactExports.useCallback(F=>{action(()=>s[f.field]=F)()},[s,f.field]);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Histogram,{...d}),jsxRuntimeExports.jsx(Slider,{size:"small",value:_,min:f.minMax[0],max:f.minMax[1],step:S,onChange:(F,M)=>T(M)}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TextField,{size:"small",className:"max-w-20",type:"number",value:_[0],onChange:F=>T([Number(F.target.value),_[1]])}),jsxRuntimeExports.jsx(TextField,{size:"small",className:"max-w-20 float-right",type:"number",value:_[1],onChange:F=>T([_[0],Number(F.target.value)])})]})]})}),Components={integer:NumberComponent,double:NumberComponent,int32:NumberComponent,text:TextComponent,text16:TextComponent,multitext:MultiTextComponent,unique:UniqueComponent},AbstractComponent=observer(function f({column:s}){const d=Components[s.datatype],_=useConfig(),{filters:S}=_,F=S[s.field]!==null,[M]=reactExports.useState(F),[P,H]=reactExports.useState(!1),J=reactExports.useCallback(action(z=>{z.stopPropagation(),S[s.field]=null}),[]),K=reactExports.useCallback(z=>{z.stopPropagation(),runInAction(()=>{delete S[s.field],_.param=_.param.filter(oe=>oe!==s.field)}),console.log("Delete item")},[S,s.field,_]);return jsxRuntimeExports.jsxs(Accordion,{defaultExpanded:M,onMouseEnter:()=>H(!0),onMouseLeave:()=>H(!1),children:[jsxRuntimeExports.jsxs(AccordionSummary,{expandIcon:jsxRuntimeExports.jsx(default_1$5,{}),children:[jsxRuntimeExports.jsx(IconButton,{onClick:K,"aria-label":"delete",sx:{position:"absolute",right:"-16px",top:"-16px",opacity:P?1:0,visibility:P?"visible":"hidden",transition:"opacity 0.3s, visibility 0.3s","&:focus":{visibility:"visible",opacity:1}},children:jsxRuntimeExports.jsx(default_1$1,{})}),jsxRuntimeExports.jsx("div",{className:"flex items-center h-4",children:jsxRuntimeExports.jsxs(Typography,{variant:"subtitle1",children:[s.name,F&&jsxRuntimeExports.jsx(IconButton,{onClick:J,children:jsxRuntimeExports.jsx(default_1$3,{fontSize:"small"})}),jsxRuntimeExports.jsxs("em",{className:"opacity-40 ml-1",children:["(",s.datatype,")"]})]})})]}),jsxRuntimeExports.jsx(AccordionDetails,{children:jsxRuntimeExports.jsx(d,{column:s})})]})}),AddRowComponent=observer(()=>{const f=useConfig(),{filters:s,param:d}=useConfig(),_=reactExports.useCallback(S=>{S&&(d.includes(S)||runInAction(()=>{f.param=[...d,S],s[S]=null}))},[s,d,f]);return jsxRuntimeExports.jsx("div",{className:"p-5",children:jsxRuntimeExports.jsx(ColumnSelectionComponent,{setSelectedColumn:_,placeholder:"Add a filter column",exclude:d})})});function useResetButton(){const f=useChart(),s=useConfig().filters,d=Object.values(s).some(_=>_!==null);reactExports.useEffect(()=>{console.log("hasFilter changed (in hook): ",d),f.resetButton.style.display=d?"inline":"none"},[d,f.resetButton])}function SelectionDialogComponent(){const f=useParamColumnsExperimental();return useResetButton(),jsxRuntimeExports.jsxs("div",{className:"p-3 absolute w-[100%] h-[100%] overflow-auto",children:[f.map(s=>jsxRuntimeExports.jsx(AbstractComponent,{column:s},s.field)),jsxRuntimeExports.jsx(AddRowComponent,{})]})}class SelectionDialogReact extends BaseReactChart{constructor(s,d,_){if(!_.filters){_.filters={};for(const S of _.param)_.filters[S]=null}for(const S of _.param)_.filters[S]||(_.filters[S]=null);super(s,d,_,observer(SelectionDialogComponent))}removeFilter(){action(()=>{for(const s in this.config.filters)this.config.filters[s]=null})()}}BaseChart.types.selection_dialog={name:"Selection Dialog",class:SelectionDialogReact,params:[{type:"_multi_column:all",name:"Columns To filter"}]};const arr=[];arr.push(vSideEffect);arr.push(SideEffect);arr.push(wc$1);arr.push(hfc);function DoImportSideEffects(){console.log(`DoImportSideEffects: ${arr.length} modules imported`)}class CustomDialog extends BaseDialog{constructor(s){s.buttons&&(s.footer=!0,s._buttons=s.buttons,s.buttons=void 0),s.width=s.width||300,super(s,s)}init(s){if(this.controlValues={},this.controls={},s._buttons)for(const d of s._buttons)this.addButton(d);if(s.text){const d=createEl("div",{},this.dialog);d.innerHTML=s.text}if(s.controls)for(const d of s.controls){d.id||(d.id=d.label);const _=createEl("div",{styles:{padding:"5px"}},this.dialog);if(d.type!=="button"){const S=d.type==="checkbox"?"inline":"block";createEl("label",{text:d.label,styles:{fontWeight:"bold",display:S,marginBottom:"3px"}},_)}this[d.type](d,_),d.description&&createEl("div",{text:d.description,styles:{fontSize:"12px"}},_)}}radiobuttons(s,d){const _=createEl("div",{},d);this.controlValues[s.id]=s.current_value;for(const S of s.choices){createEl("span",{text:S[0]},_);const T=createEl("input",{type:"radio",name:s.label,value:S[1]},_);T.checked=s.current_value===S[1],T.addEventListener("click",F=>{const M=F.currentTarget.value;this.controlValues[s.id]=M,s.func&&s.func(M,this)})}}slider(s,d){const _=createEl("div",{},d);noUiSlider.create(_,{start:[s.current_value],range:{min:[s.min],max:[s.max]},step:s.step||null,tooltips:!0,documentElement:s.doc||document}),this.controlValues[s.id]=s.current_value,_.noUiSlider.on("end",S=>{const T=Number.parseFloat(S[0]);this.controlValues[s.id]=T,s.func&&s.func(T)})}changeDropDownContent(s,d){const _=this.controls[s];for(;_.length!==0;)_.remove(0);for(const S of d)createEl("option",{text:S.text,value:S.value},_);this.controlValues[s]=_.value}dropdown(s,d){const _=createEl("select",{styles:{maxWidth:"200px"}});for(const S of s.items)createEl("option",{text:S.text,value:S.value},_);d.append(_),s.current_value&&(_.value=s.current_value),this.controlValues[s.id]=_.value,_.addEventListener("change",S=>{this.controlValues[s.id]=_.value,s.func&&s.func(_.value,this)}),this.controls[s.id]=_}checkboxgroup(s,d){const _=this,S=createEl("div",{},d);function T(M,P){createEl("button",{text:M,classes:["ciview-button-sm"]},S).addEventListener("click",()=>{for(const J of s.checkboxes)_.controls[J.id].checked=P,_.controlValues[J.id]=P})}T("Check All",!0),T("Uncheck All",!1);const F=createEl("div",{},d);for(const M of s.checkboxes){const P=createEl("div",{styles:{display:"inline-block",padding:"3px"}},F);createEl("span",{styles:{fontSize:"13px"},text:M.label},P),M.id=`${s.id}_${M.id}`,this.checkbox(M,P)}}checkbox(s,d){const _=s.current_value,S=createEl("input",{type:"checkbox",classes:["mdv-checkbox"]},d);S.checked=s.current_value,this.controlValues[s.id]=_,S.addEventListener("click",T=>{this.controlValues[s.id]=S.checked,s.func&&s.func(S.checked)}),this.controls[s.id]=S}text(s,d){const _=s.defaultValue||"",S=createEl("input",{value:_},d);this.controlValues[s.id]=_,S.addEventListener("keyup",()=>{this.controlValues[s.id]=S.value}),this.controls[s.id]=S}buttonClicked(s){s.method(this.controlValues,this.controls)!=="noclose"&&this.close()}addButton(s){createEl("button",{text:s.text,classes:["ciview-button"]},this.footer).addEventListener("click",()=>this.buttonClicked(s))}}var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(f){return new Function("d","return {"+f.map(function(s,d){return JSON.stringify(s)+": d["+d+'] || ""'}).join(",")+"}")}function customConverter(f,s){var d=objectConverter(f);return function(_,S){return s(d(_),S,f)}}function inferColumns(f){var s=Object.create(null),d=[];return f.forEach(function(_){for(var S in _)S in s||d.push(s[S]=S)}),d}function pad(f,s){var d=f+"",_=d.length;return _<s?new Array(s-_+1).join(0)+d:d}function formatYear(f){return f<0?"-"+pad(-f,6):f>9999?"+"+pad(f,6):pad(f,4)}function formatDate(f){var s=f.getUTCHours(),d=f.getUTCMinutes(),_=f.getUTCSeconds(),S=f.getUTCMilliseconds();return isNaN(f)?"Invalid Date":formatYear(f.getUTCFullYear())+"-"+pad(f.getUTCMonth()+1,2)+"-"+pad(f.getUTCDate(),2)+(S?"T"+pad(s,2)+":"+pad(d,2)+":"+pad(_,2)+"."+pad(S,3)+"Z":_?"T"+pad(s,2)+":"+pad(d,2)+":"+pad(_,2)+"Z":d||s?"T"+pad(s,2)+":"+pad(d,2)+"Z":"")}function dsvFormat(f){var s=new RegExp('["'+f+`
\r]`),d=f.charCodeAt(0);function _(K,z){var oe,se,ae=S(K,function(ge,pe){if(oe)return oe(ge,pe-1);se=ge,oe=z?customConverter(ge,z):objectConverter(ge)});return ae.columns=se||[],ae}function S(K,z){var oe=[],se=K.length,ae=0,ge=0,pe,he=se<=0,ve=!1;K.charCodeAt(se-1)===NEWLINE&&--se,K.charCodeAt(se-1)===RETURN&&--se;function be(){if(he)return EOF;if(ve)return ve=!1,EOL;var Fe,ye=ae,Ue;if(K.charCodeAt(ye)===QUOTE){for(;ae++<se&&K.charCodeAt(ae)!==QUOTE||K.charCodeAt(++ae)===QUOTE;);return(Fe=ae)>=se?he=!0:(Ue=K.charCodeAt(ae++))===NEWLINE?ve=!0:Ue===RETURN&&(ve=!0,K.charCodeAt(ae)===NEWLINE&&++ae),K.slice(ye+1,Fe-1).replace(/""/g,'"')}for(;ae<se;){if((Ue=K.charCodeAt(Fe=ae++))===NEWLINE)ve=!0;else if(Ue===RETURN)ve=!0,K.charCodeAt(ae)===NEWLINE&&++ae;else if(Ue!==d)continue;return K.slice(ye,Fe)}return he=!0,K.slice(ye,se)}for(;(pe=be())!==EOF;){for(var Re=[];pe!==EOL&&pe!==EOF;)Re.push(pe),pe=be();z&&(Re=z(Re,ge++))==null||oe.push(Re)}return oe}function T(K,z){return K.map(function(oe){return z.map(function(se){return J(oe[se])}).join(f)})}function F(K,z){return z==null&&(z=inferColumns(K)),[z.map(J).join(f)].concat(T(K,z)).join(`
`)}function M(K,z){return z==null&&(z=inferColumns(K)),T(K,z).join(`
`)}function P(K){return K.map(H).join(`
`)}function H(K){return K.map(J).join(f)}function J(K){return K==null?"":K instanceof Date?formatDate(K):s.test(K+="")?'"'+K.replace(/"/g,'""')+'"':K}return{parse:_,parseRows:S,format:F,formatBody:M,formatRows:P,formatRow:H,formatValue:J}}var csv$1=dsvFormat(","),csvParse=csv$1.parse,tsv$1=dsvFormat("	"),tsvParse=tsv$1.parse;function responseText(f){if(!f.ok)throw new Error(f.status+" "+f.statusText);return f.text()}function text(f,s){return fetch(f,s).then(responseText)}function dsvParse(f){return function(s,d,_){return arguments.length===2&&typeof d=="function"&&(_=d,d=void 0),text(s,d).then(function(S){return f(S,_)})}}var csv=dsvParse(csvParse),tsv=dsvParse(tsvParse);function responseJson(f){if(!f.ok)throw new Error(f.status+" "+f.statusText);if(!(f.status===204||f.status===205))return f.json()}function json(f,s){return fetch(f,s).then(responseJson)}class AutoComplete{constructor(s,d,_={}){this.__doc__=_.doc||document,this.input=s,this.listeners=[],_.minLength=_.minLength||2,this.input.addEventListener("input",S=>{this.input.value.length<_.minLength||(this.text=this.input.value,d(this.text).then(T=>{this.list=T,this.createDropDown()}))}),this.dli=S=>{S.target.parentElement!==this.listHolder&&this.listHolder&&(this.listHolder.remove(),this.listHolder=null)},this.__doc__.addEventListener("mousedown",this.dli)}getSelectedItem(){return this.selectedItem}addListener(s){this.listeners.push(s)}destroy(){this.listholder&&this.listholder.remove(),this.__doc__.removeEventListener("click",this.dli)}setSelectedItem(s,d=!0){this.selectedItem=s,this.input.value=s.value,d&&this.listeners.map(_=>_("item_chose",s))}addItemEventListener(s,d){s.addEventListener("click",_=>{this.listHolder.remove(),this.listHolder=null,this.setSelectedItem(d)})}createDropDown(){if(this.listHolder&&this.listHolder.remove(),!this.text)return;const s=getElDim(this.input);this.listHolder=createEl("div",{classes:["autocomplete-items"],styles:{top:`${s.top+s.height}px`,left:`${s.left}px`,width:`${s.width}px`,zIndex:1200}},this.__doc__.body);for(let d=0;d<this.list.length;d++){const _=this.list[d].value,S=createEl("div",{text:_},this.listHolder);this.addItemEventListener(S,this.list[d])}}}const max_genes=500;class AddColumnsFromRowsDialog extends BaseDialog{constructor(s,d,_,S){const T={title:`Add ${_.name}`,footer:!0,columns:2,width:380};super(T,{ds:s,ds_to:d,link:_,cm:S})}init(s){this.ds=s.ds,this.ds_to=s.ds_to,this.link=s.link,this.cm=s.cm,this.cm._getColumnsThen(this.ds_to.name,[this.link.name_column],()=>{const d=createEl("div",{classes:["mdv-section"]},this.columns[0]),_=createEl("input",{},d);this.ac=new AutoComplete(_,async P=>this.ds_to.dataStore.getSuggestedValues(P,this.link.name_column,8)),this.ac.addListener((P,H)=>this.addColumn(H)),this.rn=getRandomString();for(const P in this.link.subgroups)createEl("label",{text:this.link.subgroups[P].label},this.footer),createEl("input",{type:"radio",name:this.rn,value:P,checked:!0},this.footer);this._addOptionsSection(),createEl("button",{classes:["ciview-button-sm"],styles:[],text:"Apply"},this.columns[0]).addEventListener("click",()=>{this.addColumn(this.ac.getSelectedItem())}),this.ta=createEl("textarea",{rows:10},this.columns[1]),this.errorDiv=createEl("div",{classes:["mdv-section"]},this.columns[1]);let T=createEl("div",{classes:["mdv-section"]},this.columns[1]);this.addHeatMapCheck=createEl("input",{type:"checkbox"},T),createEl("span",{text:"Create Heat Map:",styles:{marginRight:"4px"}},T),this.addDotPlotCheck=createEl("input",{type:"checkbox"},T),createEl("span",{text:"Create DotPlot:",styles:{marginRight:"4px"}},T),T=createEl("div",{classes:["mdv-section"]},this.columns[1]),createEl("span",{text:"Categories:",styles:{marginRight:"4px"}},T),this.heatMapSel=createEl("select",{styles:{maxWidth:"150px"}},T),this.ds.dataStore.getColumnList("text").forEach(P=>createEl("option",{value:P.field,text:P.name},this.heatMapSel)),createEl("button",{classes:["ciview-button-sm"],text:"Add All"},this.columns[1]).addEventListener("click",P=>{this.parseNames()}),this.cm.addListener(this.rn,(P,H,J)=>{switch(P){case"chart_added":this._addColorChartOption(J);break;case"chart_removed":this._addColorChartOption(J,!0);break;case"filtered":console.log("ss");break;case"view_laoded":this.close()}}),this.itemList=[];const M=this.ds_to.dataStore;M.addListener(this.rn,(P,H)=>{if(P==="data_highlighted"){const J=H.indexes.length;if(J===1){const K=H.indexes[0],z=M.getRowText(K,this.link.name_column);this.ac.setSelectedItem({value:z,index:K})}else J<200?this.ta.value=H.indexes.map(K=>M.getRowText(K,this.link.name_column)).join(`
`):this.ta.value="Too many items selected"}else P==="filtered"&&(M.filterSize<max_genes&&M.isFiltered()?this.ta.value=M.getFilteredValues(this.link.name_column).join(`
`):this.ta.value="Too many items selected")})})}addFilteredItems(){const s=this.ds_to.dataStore;for(let d=0;d<s.size;d++)s.filterArray[d]===0&&(this.itemList.push(d),createEl("div",{text:s.getRowText(d,this.link.name_column)},this.columns[1]))}close(){this.cm.removeListener(this.rn),this.ds_to.dataStore.removeListener(this.rn),this.ac.destroy(),super.close()}_addColorChartOption(s,d=!1){const _=s.config;if(!(s.dataStore!==this.ds.dataStore||!s.getColorOptions().colorby)){if(d){const S=this.colorChartSelect.querySelector(`[value='${_.id}']`);S&&S.remove(),this.colorChartSelect.children.length===0&&this.colorDiv.classList.add("mdv-disabled");return}createEl("option",{value:_.id,text:_.title},this.colorChartSelect),this.colorDiv.classList.remove("mdv-disabled")}}_addOptionsSection(){this.colorDiv=createEl("div",{classes:["mdv-section","mdv-disabled"]},this.columns[0]),this.colorCheck=createEl("input",{type:"checkbox"},this.colorDiv),createEl("span",{text:"Color Chart:",styles:{marginRight:"4px"}},this.colorDiv),createEl("br",{},this.colorDiv),this.colorChartSelect=createEl("select",{styles:{maxWidth:"150px"}},this.colorDiv);for(const d in this.cm.charts)this._addColorChartOption(this.cm.charts[d].chart);const s=createEl("div",{classes:["mdv-section"]},this.columns[0]);this.histoCheck=createEl("input",{type:"checkbox"},s),createEl("span",{text:"Create Histogram:",styles:{marginRight:"4px"}},s)}parseNames(){let s=this.ta.value.replaceAll('"',"").split(/[,\s]+/);s=s.filter(T=>T!=="");const d=this.ds_to.dataStore.getColumnIndex(this.link.name_column);let _=!1;const S=new Array(s.length);for(let T=0;T<s.length;T++){const F=d[s[T]];F!==void 0?S[T]={value:s[T],index:F}:(_=!0,s[T]=`${s[T]}??`)}_?(this.errorDiv.textContent="Some Entries were unrecognised",this.ta.value="",this.ta.value=s.join(`
`)):(this.errorDiv.textContent="",this.addColumn(S))}addColumn(s){const _=document.querySelector(`input[name='${this.rn}']:checked`).value,S=Array.isArray(s),T=S?s:[s],F=[];for(const M of T){const P=`${_}|${M.value}(${_})|${M.index}`;if(this.ds.dataStore.addColumnFromField(P),F.push(P),!S){if(this.colorCheck.checked){const H=this.colorChartSelect.value;H&&this.cm.getChart(H).colorByColumn(P)}this.histoCheck.checked&&this.cm.addChart(this.ds.name,{type:"bar_chart",param:P});return}}this.addHeatMapCheck.checked&&this.cm.addChart(this.ds.name,{type:"heat_map",param:[this.heatMapSel.value].concat(F)}),this.addDotPlotCheck.checked&&this.cm.addChart(this.ds.name,{type:"dot_plot",param:[this.heatMapSel.value].concat(F)})}}class ColorChooser extends BaseDialog{constructor(s,d){const _={footer:!0,width:500,maxHeight:500,title:`Field Colors For ${d.name}`,columns:2,buttons:[{text:"Apply",method:"applyColor"}]};super(_,{cm:s,ds:d})}init(s){this.cm=s.cm,this.ds=s.ds;const d=this.columns[1];this.columns[0].style.overflowY="auto";const _={whiteSpace:"nowrap",padding:"2px"};createEl("div",{styles:_},d);const S={width:"70px",display:"inline-block"},T=createEl("div",{styles:_},d);createEl("label",{text:"Field:",styles:S},T),this.columnSelect=createEl("select",{classes:["mdv-select"],styles:{maxWidth:"150px"}},T);const F=createEl("div",{styles:_},d);createEl("div",{text:"Color Scheme",styles:{fontWeight:"bold"}},F),createEl("span",{classes:["mdv-info-text"],text:"Paste list of colors (hex)"},F);const M=createEl("div",{styles:{display:"flex",alignItems:"flex-start",marginTop:"2px"}},d);this.colorList=createEl("textarea",{classes:["mdv-select"],styles:{width:"100px",padding:"2px",height:"150px"}},M),this.setDataSource(this.ds.dataStore.name),createEl("button",{classes:["ciview-button-sm"],text:"Use Scheme"},M).addEventListener("click",()=>{this.parseColors(this.colorList.value)})}parseColors(s){const d=/^#[0-9A-F]{6}$/i;let _=s.replaceAll('"',"").split(/[,\s]+/);_=_.filter(F=>F.match(d));const S=_.join(`
`);this.colorList.value=S;let T=0;if(S.length>0)for(let F=0;F<this.colorChoosers.length;F++)this.colorChoosers[F].value=_[T],T++,T===_.length&&(T=0)}setDataSource(s){this.columnSelect.innerHTML="";const d=this.cm.getDataSource(s);this.dataSource=d,this.dsName=s;const _=d.getColumnList("string");for(const S of _)createEl("option",{text:S.name,value:S.field},this.columnSelect);this.columnSelect.addEventListener("change",()=>{this.setColumn(this.columnSelect.value)}),this.setColumn(_[0].field)}applyColor(){const s=new Array(this.colorChoosers.length);this.colorChoosers.forEach(d=>s[d.__index]=d.value),this.dataSource.setColumnColors(this.column,s),this.dataSource.dataChanged([this.column],!1,!1);for(const d of this.cm.dataSources){const _=d.dataStore,S=_.syncColumnColors.find(F=>F.dataSource===this.dataSource.name);if(S){const F=S.columns.find(M=>M.link_to===this.column);F&&(this.cm._sync_colors([F],this.dataSource,_),_.dataChanged([F.col],!1,!1))}const T=_.linkColumns.find(F=>F.dataSource===this.dataSource.name);T&&T.columns.indexOf(this.column)!==-1&&(_.setColumnColors(this.column,s),_.dataChanged([this.column],!1,!1))}}setColumn(s){const d=this.columns[0];this.column=s,d.innerHTML="";const _=this.dataSource.getColumnValues(s),S=_.slice(0).sort(),T=this.dataSource.getColumnColors(s),F=T.map((M,P)=>{const H=_.indexOf(S[P]);return{index:H,color:T[H]}});this.colorChoosers=[];for(let M=0;M<S.length;M++){const P=createEl("div",{styles:{display:"flex",flexWrap:"nowrap"}},d);createEl("span",{styles:{display:"inline-block",fontSize:"0.8erm"},classes:["mdv-flex-dynamic"],text:S[M]},P);const H=createEl("input",{classes:["mdv-flex-fixed"],styles:{width:"25px",height:"20px",padding:"0px"},type:"color",value:F[M].color},P);H.__index=F[M].index,this.colorChoosers.push(H)}}}var gridstack={},gridstackEngine={},utils$2={};Object.defineProperty(utils$2,"__esModule",{value:!0});utils$2.Utils=utils$2.obsoleteAttr=utils$2.obsoleteOptsDel=utils$2.obsoleteOpts=utils$2.obsolete=void 0;function obsolete(f,s,d,_,S){let T=(...F)=>(console.warn("gridstack.js: Function `"+d+"` is deprecated in "+S+" and has been replaced with `"+_+"`. It will be **removed** in a future release"),s.apply(f,F));return T.prototype=s.prototype,T}utils$2.obsolete=obsolete;function obsoleteOpts(f,s,d,_){f[s]!==void 0&&(f[d]=f[s],console.warn("gridstack.js: Option `"+s+"` is deprecated in "+_+" and has been replaced with `"+d+"`. It will be **removed** in a future release"))}utils$2.obsoleteOpts=obsoleteOpts;function obsoleteOptsDel(f,s,d,_){f[s]!==void 0&&console.warn("gridstack.js: Option `"+s+"` is deprecated in "+d+_)}utils$2.obsoleteOptsDel=obsoleteOptsDel;function obsoleteAttr(f,s,d,_){let S=f.getAttribute(s);S!==null&&(f.setAttribute(d,S),console.warn("gridstack.js: attribute `"+s+"`="+S+" is deprecated on this object in "+_+" and has been replaced with `"+d+"`. It will be **removed** in a future release"))}utils$2.obsoleteAttr=obsoleteAttr;class Utils{static getElements(s){if(typeof s=="string"){let d=document.querySelectorAll(s);return!d.length&&s[0]!=="."&&s[0]!=="#"&&(d=document.querySelectorAll("."+s),d.length||(d=document.querySelectorAll("#"+s))),Array.from(d)}return[s]}static getElement(s){if(typeof s=="string"){if(!s.length)return null;if(s[0]==="#")return document.getElementById(s.substring(1));if(s[0]==="."||s[0]==="[")return document.querySelector(s);if(!isNaN(+s[0]))return document.getElementById(s);let d=document.querySelector(s);return d||(d=document.getElementById(s)),d||(d=document.querySelector("."+s)),d}return s}static isIntercepted(s,d){return!(s.y>=d.y+d.h||s.y+s.h<=d.y||s.x+s.w<=d.x||s.x>=d.x+d.w)}static isTouching(s,d){return Utils.isIntercepted(s,{x:d.x-.5,y:d.y-.5,w:d.w+1,h:d.h+1})}static areaIntercept(s,d){let _=s.x>d.x?s.x:d.x,S=s.x+s.w<d.x+d.w?s.x+s.w:d.x+d.w;if(S<=_)return 0;let T=s.y>d.y?s.y:d.y,F=s.y+s.h<d.y+d.h?s.y+s.h:d.y+d.h;return F<=T?0:(S-_)*(F-T)}static area(s){return s.w*s.h}static sort(s,d,_){return _=_||s.reduce((S,T)=>Math.max(T.x+T.w,S),0)||12,d===-1?s.sort((S,T)=>T.x+T.y*_-(S.x+S.y*_)):s.sort((S,T)=>S.x+S.y*_-(T.x+T.y*_))}static createStylesheet(s,d,_){let S=document.createElement("style");const T=_==null?void 0:_.nonce;return T&&(S.nonce=T),S.setAttribute("type","text/css"),S.setAttribute("gs-style-id",s),S.styleSheet?S.styleSheet.cssText="":S.appendChild(document.createTextNode("")),d?d.insertBefore(S,d.firstChild):(d=document.getElementsByTagName("head")[0],d.appendChild(S)),S.sheet}static removeStylesheet(s){let d=document.querySelector("STYLE[gs-style-id="+s+"]");d&&d.parentNode&&d.remove()}static addCSSRule(s,d,_){typeof s.addRule=="function"?s.addRule(d,_):typeof s.insertRule=="function"&&s.insertRule(`${d}{${_}}`)}static toBool(s){return typeof s=="boolean"?s:typeof s=="string"?(s=s.toLowerCase(),!(s===""||s==="no"||s==="false"||s==="0")):!!s}static toNumber(s){return s===null||s.length===0?void 0:Number(s)}static parseHeight(s){let d,_="px";if(typeof s=="string"){let S=s.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%)?$/);if(!S)throw new Error("Invalid height");_=S[2]||"px",d=parseFloat(S[1])}else d=s;return{h:d,unit:_}}static defaults(s,...d){return d.forEach(_=>{for(const S in _){if(!_.hasOwnProperty(S))return;s[S]===null||s[S]===void 0?s[S]=_[S]:typeof _[S]=="object"&&typeof s[S]=="object"&&this.defaults(s[S],_[S])}}),s}static same(s,d){if(typeof s!="object")return s==d;if(typeof s!=typeof d||Object.keys(s).length!==Object.keys(d).length)return!1;for(const _ in s)if(s[_]!==d[_])return!1;return!0}static copyPos(s,d,_=!1){return s.x=d.x,s.y=d.y,s.w=d.w,s.h=d.h,_&&(d.minW&&(s.minW=d.minW),d.minH&&(s.minH=d.minH),d.maxW&&(s.maxW=d.maxW),d.maxH&&(s.maxH=d.maxH)),s}static samePos(s,d){return s&&d&&s.x===d.x&&s.y===d.y&&s.w===d.w&&s.h===d.h}static removeInternalAndSame(s,d){if(!(typeof s!="object"||typeof d!="object"))for(let _ in s){let S=s[_];if(_[0]==="_"||S===d[_])delete s[_];else if(S&&typeof S=="object"&&d[_]!==void 0){for(let T in S)(S[T]===d[_][T]||T[0]==="_")&&delete S[T];Object.keys(S).length||delete s[_]}}}static removeInternalForSave(s,d=!0){for(let _ in s)(_[0]==="_"||s[_]===null||s[_]===void 0)&&delete s[_];delete s.grid,d&&delete s.el,s.autoPosition||delete s.autoPosition,s.noResize||delete s.noResize,s.noMove||delete s.noMove,s.locked||delete s.locked,(s.w===1||s.w===s.minW)&&delete s.w,(s.h===1||s.h===s.minH)&&delete s.h}static closestUpByClass(s,d){for(;s;){if(s.classList.contains(d))return s;s=s.parentElement}return null}static throttle(s,d){let _=!1;return(...S)=>{_||(_=!0,setTimeout(()=>{s(...S),_=!1},d))}}static removePositioningStyles(s){let d=s.style;d.position&&d.removeProperty("position"),d.left&&d.removeProperty("left"),d.top&&d.removeProperty("top"),d.width&&d.removeProperty("width"),d.height&&d.removeProperty("height")}static getScrollElement(s){if(!s)return document.scrollingElement||document.documentElement;const d=getComputedStyle(s);return/(auto|scroll)/.test(d.overflow+d.overflowY)?s:this.getScrollElement(s.parentElement)}static updateScrollPosition(s,d,_){let S=s.getBoundingClientRect(),T=window.innerHeight||document.documentElement.clientHeight;if(S.top<0||S.bottom>T){let F=S.bottom-T,M=S.top,P=this.getScrollElement(s);if(P!==null){let H=P.scrollTop;S.top<0&&_<0?s.offsetHeight>T?P.scrollTop+=_:P.scrollTop+=Math.abs(M)>Math.abs(_)?_:M:_>0&&(s.offsetHeight>T?P.scrollTop+=_:P.scrollTop+=F>_?_:F),d.top+=P.scrollTop-H}}}static updateScrollResize(s,d,_){const S=this.getScrollElement(d),T=S.clientHeight,F=S===this.getScrollElement()?0:S.getBoundingClientRect().top,M=s.clientY-F,P=M<_,H=M>T-_;P?S.scrollBy({behavior:"smooth",top:M-_}):H&&S.scrollBy({behavior:"smooth",top:_-(T-M)})}static clone(s){return s==null||typeof s!="object"?s:s instanceof Array?[...s]:Object.assign({},s)}static cloneDeep(s){const d=["parentGrid","el","grid","subGrid","engine"],_=Utils.clone(s);for(const S in _)_.hasOwnProperty(S)&&typeof _[S]=="object"&&S.substring(0,2)!=="__"&&!d.find(T=>T===S)&&(_[S]=Utils.cloneDeep(s[S]));return _}static cloneNode(s){const d=s.cloneNode(!0);return d.removeAttribute("id"),d}static appendTo(s,d){let _;typeof d=="string"?_=document.querySelector(d):_=d,_&&_.appendChild(s)}static addElStyles(s,d){if(d instanceof Object)for(const _ in d)d.hasOwnProperty(_)&&(Array.isArray(d[_])?d[_].forEach(S=>{s.style[_]=S}):s.style[_]=d[_])}static initEvent(s,d){const _={type:d.type},S={button:0,which:0,buttons:1,bubbles:!0,cancelable:!0,target:d.target?d.target:s.target};return s.dataTransfer&&(_.dataTransfer=s.dataTransfer),["altKey","ctrlKey","metaKey","shiftKey"].forEach(T=>_[T]=s[T]),["pageX","pageY","clientX","clientY","screenX","screenY"].forEach(T=>_[T]=s[T]),Object.assign(Object.assign({},_),S)}static simulateMouseEvent(s,d,_){const S=document.createEvent("MouseEvents");S.initMouseEvent(d,!0,!0,window,1,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,0,s.target),(_||s.target).dispatchEvent(S)}}utils$2.Utils=Utils;Object.defineProperty(gridstackEngine,"__esModule",{value:!0});gridstackEngine.GridStackEngine=void 0;const utils_1$4=utils$2;class GridStackEngine{constructor(s={}){this.addedNodes=[],this.removedNodes=[],this.column=s.column||12,this.maxRow=s.maxRow,this._float=s.float,this.nodes=s.nodes||[],this.onChange=s.onChange}batchUpdate(s=!0){return!!this.batchMode===s?this:(this.batchMode=s,s?(this._prevFloat=this._float,this._float=!0,this.saveInitial()):(this._float=this._prevFloat,delete this._prevFloat,this._packNodes()._notify()),this)}_useEntireRowArea(s,d){return(!this.float||this.batchMode&&!this._prevFloat)&&!this._hasLocked&&(!s._moving||s._skipDown||d.y<=s.y)}_fixCollisions(s,d=s,_,S={}){if(this.sortNodes(-1),_=_||this.collide(s,d),!_)return!1;if(s._moving&&!S.nested&&!this.float&&this.swap(s,_))return!0;let T=d;this._useEntireRowArea(s,d)&&(T={x:0,w:this.column,y:d.y,h:d.h},_=this.collide(s,T,S.skip));let F=!1,M={nested:!0,pack:!1};for(;_=_||this.collide(s,T,S.skip);){let P;if(_.locked||s._moving&&!s._skipDown&&d.y>s.y&&!this.float&&(!this.collide(_,Object.assign(Object.assign({},_),{y:s.y}),s)||!this.collide(_,Object.assign(Object.assign({},_),{y:d.y-_.h}),s))?(s._skipDown=s._skipDown||d.y>s.y,P=this.moveNode(s,Object.assign(Object.assign(Object.assign({},d),{y:_.y+_.h}),M)),_.locked&&P?utils_1$4.Utils.copyPos(d,s):!_.locked&&P&&S.pack&&(this._packNodes(),d.y=_.y+_.h,utils_1$4.Utils.copyPos(s,d)),F=F||P):P=this.moveNode(_,Object.assign(Object.assign(Object.assign({},_),{y:d.y+d.h,skip:s}),M)),!P)return F;_=void 0}return F}collide(s,d=s,_){return this.nodes.find(S=>S!==s&&S!==_&&utils_1$4.Utils.isIntercepted(S,d))}collideAll(s,d=s,_){return this.nodes.filter(S=>S!==s&&S!==_&&utils_1$4.Utils.isIntercepted(S,d))}directionCollideCoverage(s,d,_){if(!d.rect||!s._rect)return;let S=s._rect,T=Object.assign({},d.rect);T.y>S.y?(T.h+=T.y-S.y,T.y=S.y):T.h+=S.y-T.y,T.x>S.x?(T.w+=T.x-S.x,T.x=S.x):T.w+=S.x-T.x;let F;return _.forEach(M=>{if(M.locked||!M._rect)return;let P=M._rect,H=Number.MAX_VALUE,J=Number.MAX_VALUE,K=.5;S.y<P.y?H=(T.y+T.h-P.y)/P.h:S.y+S.h>P.y+P.h&&(H=(P.y+P.h-T.y)/P.h),S.x<P.x?J=(T.x+T.w-P.x)/P.w:S.x+S.w>P.x+P.w&&(J=(P.x+P.w-T.x)/P.w);let z=Math.min(J,H);z>K&&(K=z,F=M)}),d.collide=F,F}cacheRects(s,d,_,S,T,F){return this.nodes.forEach(M=>M._rect={y:M.y*d+_,x:M.x*s+F,w:M.w*s-F-S,h:M.h*d-_-T}),this}swap(s,d){if(!d||d.locked||!s||s.locked)return!1;function _(){let T=d.x,F=d.y;return d.x=s.x,d.y=s.y,s.h!=d.h?(s.x=T,s.y=d.y+d.h):s.w!=d.w?(s.x=d.x+d.w,s.y=F):(s.x=T,s.y=F),s._dirty=d._dirty=!0,!0}let S;if(s.w===d.w&&s.h===d.h&&(s.x===d.x||s.y===d.y)&&(S=utils_1$4.Utils.isTouching(s,d)))return _();if(S!==!1){if(s.w===d.w&&s.x===d.x&&(S||(S=utils_1$4.Utils.isTouching(s,d)))){if(d.y<s.y){let T=s;s=d,d=T}return _()}if(S!==!1){if(s.h===d.h&&s.y===d.y&&(S||(S=utils_1$4.Utils.isTouching(s,d)))){if(d.x<s.x){let T=s;s=d,d=T}return _()}return!1}}}isAreaEmpty(s,d,_,S){let T={x:s||0,y:d||0,w:_||1,h:S||1};return!this.collide(T)}compact(){if(this.nodes.length===0)return this;this.batchUpdate().sortNodes();let s=this.nodes;return this.nodes=[],s.forEach(d=>{d.locked||(d.autoPosition=!0),this.addNode(d,!1),d._dirty=!0}),this.batchUpdate(!1)}set float(s){this._float!==s&&(this._float=s||!1,s||this._packNodes()._notify())}get float(){return this._float||!1}sortNodes(s){return this.nodes=utils_1$4.Utils.sort(this.nodes,s,this.column),this}_packNodes(){return this.batchMode?this:(this.sortNodes(),this.float?this.nodes.forEach(s=>{if(s._updating||s._orig===void 0||s.y===s._orig.y)return;let d=s.y;for(;d>s._orig.y;)--d,this.collide(s,{x:s.x,y:d,w:s.w,h:s.h})||(s._dirty=!0,s.y=d)}):this.nodes.forEach((s,d)=>{if(!s.locked)for(;s.y>0;){let _=d===0?0:s.y-1;if(!(d===0||!this.collide(s,{x:s.x,y:_,w:s.w,h:s.h})))break;s._dirty=s.y!==_,s.y=_}}),this)}prepareNode(s,d){s=s||{},s._id=s._id||GridStackEngine._idSeq++,(s.x===void 0||s.y===void 0||s.x===null||s.y===null)&&(s.autoPosition=!0);let _={x:0,y:0,w:1,h:1};return utils_1$4.Utils.defaults(s,_),s.autoPosition||delete s.autoPosition,s.noResize||delete s.noResize,s.noMove||delete s.noMove,typeof s.x=="string"&&(s.x=Number(s.x)),typeof s.y=="string"&&(s.y=Number(s.y)),typeof s.w=="string"&&(s.w=Number(s.w)),typeof s.h=="string"&&(s.h=Number(s.h)),isNaN(s.x)&&(s.x=_.x,s.autoPosition=!0),isNaN(s.y)&&(s.y=_.y,s.autoPosition=!0),isNaN(s.w)&&(s.w=_.w),isNaN(s.h)&&(s.h=_.h),this.nodeBoundFix(s,d)}nodeBoundFix(s,d){let _=s._orig||utils_1$4.Utils.copyPos({},s);if(s.maxW&&(s.w=Math.min(s.w,s.maxW)),s.maxH&&(s.h=Math.min(s.h,s.maxH)),s.minW&&s.minW<=this.column&&(s.w=Math.max(s.w,s.minW)),s.minH&&(s.h=Math.max(s.h,s.minH)),(this.column===1||s.x+s.w>this.column)&&this.column<12&&!this._inColumnResize&&s._id&&this.findCacheLayout(s,12)===-1){let T=Object.assign({},s);T.autoPosition?(delete T.x,delete T.y):T.x=Math.min(11,T.x),T.w=Math.min(12,T.w),this.cacheOneLayout(T,12)}return s.w>this.column?s.w=this.column:s.w<1&&(s.w=1),this.maxRow&&s.h>this.maxRow?s.h=this.maxRow:s.h<1&&(s.h=1),s.x<0&&(s.x=0),s.y<0&&(s.y=0),s.x+s.w>this.column&&(d?s.w=this.column-s.x:s.x=this.column-s.w),this.maxRow&&s.y+s.h>this.maxRow&&(d?s.h=this.maxRow-s.y:s.y=this.maxRow-s.h),utils_1$4.Utils.samePos(s,_)||(s._dirty=!0),s}getDirtyNodes(s){return s?this.nodes.filter(d=>d._dirty&&!utils_1$4.Utils.samePos(d,d._orig)):this.nodes.filter(d=>d._dirty)}_notify(s){if(this.batchMode||!this.onChange)return this;let d=(s||[]).concat(this.getDirtyNodes());return this.onChange(d),this}cleanNodes(){return this.batchMode?this:(this.nodes.forEach(s=>{delete s._dirty,delete s._lastTried}),this)}saveInitial(){return this.nodes.forEach(s=>{s._orig=utils_1$4.Utils.copyPos({},s),delete s._dirty}),this._hasLocked=this.nodes.some(s=>s.locked),this}restoreInitial(){return this.nodes.forEach(s=>{utils_1$4.Utils.samePos(s,s._orig)||(utils_1$4.Utils.copyPos(s,s._orig),s._dirty=!0)}),this._notify(),this}findEmptyPosition(s,d=this.nodes,_=this.column){d=utils_1$4.Utils.sort(d,-1,_);let S=!1;for(let T=0;!S;++T){let F=T%_,M=Math.floor(T/_);if(F+s.w>_)continue;let P={x:F,y:M,w:s.w,h:s.h};d.find(H=>utils_1$4.Utils.isIntercepted(P,H))||(s.x=F,s.y=M,delete s.autoPosition,S=!0)}return S}addNode(s,d=!1){let _=this.nodes.find(S=>S._id===s._id);return _||(s=this._inColumnResize?this.nodeBoundFix(s):this.prepareNode(s),delete s._temporaryRemoved,delete s._removeDOM,s.autoPosition&&this.findEmptyPosition(s)&&delete s.autoPosition,this.nodes.push(s),d&&this.addedNodes.push(s),this._fixCollisions(s),this.batchMode||this._packNodes()._notify(),s)}removeNode(s,d=!0,_=!1){return this.nodes.find(S=>S===s)?(_&&this.removedNodes.push(s),d&&(s._removeDOM=!0),this.nodes=this.nodes.filter(S=>S!==s),this._packNodes()._notify([s])):this}removeAll(s=!0){return delete this._layouts,this.nodes.length===0?this:(s&&this.nodes.forEach(d=>d._removeDOM=!0),this.removedNodes=this.nodes,this.nodes=[],this._notify(this.removedNodes))}moveNodeCheck(s,d){if(!this.changedPosConstrain(s,d))return!1;if(d.pack=!0,!this.maxRow)return this.moveNode(s,d);let _,S=new GridStackEngine({column:this.column,float:this.float,nodes:this.nodes.map(F=>F===s?(_=Object.assign({},F),_):Object.assign({},F))});if(!_)return!1;let T=S.moveNode(_,d)&&S.getRow()<=this.maxRow;if(!T&&!d.resizing&&d.collide){let F=d.collide.el.gridstackNode;if(this.swap(s,F))return this._notify(),!0}return T?(S.nodes.filter(F=>F._dirty).forEach(F=>{let M=this.nodes.find(P=>P._id===F._id);M&&(utils_1$4.Utils.copyPos(M,F),M._dirty=!0)}),this._notify(),!0):!1}willItFit(s){if(delete s._willFitPos,!this.maxRow)return!0;let d=new GridStackEngine({column:this.column,float:this.float,nodes:this.nodes.map(S=>Object.assign({},S))}),_=Object.assign({},s);return this.cleanupNode(_),delete _.el,delete _._id,delete _.content,delete _.grid,d.addNode(_),d.getRow()<=this.maxRow?(s._willFitPos=utils_1$4.Utils.copyPos({},_),!0):!1}changedPosConstrain(s,d){return d.w=d.w||s.w,d.h=d.h||s.h,s.x!==d.x||s.y!==d.y?!0:(s.maxW&&(d.w=Math.min(d.w,s.maxW)),s.maxH&&(d.h=Math.min(d.h,s.maxH)),s.minW&&(d.w=Math.max(d.w,s.minW)),s.minH&&(d.h=Math.max(d.h,s.minH)),s.w!==d.w||s.h!==d.h)}moveNode(s,d){var _,S;if(!s||!d)return!1;let T;d.pack===void 0&&(T=d.pack=!0),typeof d.x!="number"&&(d.x=s.x),typeof d.y!="number"&&(d.y=s.y),typeof d.w!="number"&&(d.w=s.w),typeof d.h!="number"&&(d.h=s.h);let F=s.w!==d.w||s.h!==d.h,M=utils_1$4.Utils.copyPos({},s,!0);if(utils_1$4.Utils.copyPos(M,d),M=this.nodeBoundFix(M,F),utils_1$4.Utils.copyPos(d,M),utils_1$4.Utils.samePos(s,d))return!1;let P=utils_1$4.Utils.copyPos({},s),H=this.collideAll(s,M,d.skip),J=!0;if(H.length){let K=s._moving&&!d.nested,z=K?this.directionCollideCoverage(s,d,H):H[0];if(K&&z&&(!((S=(_=s.grid)===null||_===void 0?void 0:_.opts)===null||S===void 0)&&S.subGridDynamic)&&!s.grid._isTemp){let oe=utils_1$4.Utils.areaIntercept(d.rect,z._rect),se=utils_1$4.Utils.area(d.rect),ae=utils_1$4.Utils.area(z._rect);oe/(se<ae?se:ae)>.8&&(z.grid.makeSubGrid(z.el,void 0,s),z=void 0)}z?J=!this._fixCollisions(s,M,z,d):(J=!1,T&&delete d.pack)}return J&&(s._dirty=!0,utils_1$4.Utils.copyPos(s,M)),d.pack&&this._packNodes()._notify(),!utils_1$4.Utils.samePos(s,P)}getRow(){return this.nodes.reduce((s,d)=>Math.max(s,d.y+d.h),0)}beginUpdate(s){return s._updating||(s._updating=!0,delete s._skipDown,this.batchMode||this.saveInitial()),this}endUpdate(){let s=this.nodes.find(d=>d._updating);return s&&(delete s._updating,delete s._skipDown),this}save(s=!0){var d;let _=(d=this._layouts)===null||d===void 0?void 0:d.length,S=_&&this.column!==_-1?this._layouts[_-1]:null,T=[];return this.sortNodes(),this.nodes.forEach(F=>{let M=S==null?void 0:S.find(H=>H._id===F._id),P=Object.assign({},F);M&&(P.x=M.x,P.y=M.y,P.w=M.w),utils_1$4.Utils.removeInternalForSave(P,!s),T.push(P)}),T}layoutsNodesChange(s){return!this._layouts||this._inColumnResize?this:(this._layouts.forEach((d,_)=>{if(!d||_===this.column)return this;if(_<this.column)this._layouts[_]=void 0;else{let S=_/this.column;s.forEach(T=>{if(!T._orig)return;let F=d.find(M=>M._id===T._id);F&&(T.y!==T._orig.y&&(F.y+=T.y-T._orig.y),T.x!==T._orig.x&&(F.x=Math.round(T.x*S)),T.w!==T._orig.w&&(F.w=Math.round(T.w*S)))})}}),this)}updateNodeWidths(s,d,_,S="moveScale"){var T;if(!this.nodes.length||!d||s===d)return this;this.cacheLayout(this.nodes,s),this.batchUpdate();let F=[],M=!1;if(d===1&&(_!=null&&_.length)){M=!0;let H=0;_.forEach(J=>{J.x=0,J.w=1,J.y=Math.max(J.y,H),H=J.y+J.h}),F=_,_=[]}else _=utils_1$4.Utils.sort(this.nodes,-1,s);let P=[];if(d>s){P=this._layouts[d]||[];let H=this._layouts.length-1;!P.length&&s!==H&&(!((T=this._layouts[H])===null||T===void 0)&&T.length)&&(s=H,this._layouts[H].forEach(J=>{let K=_.find(z=>z._id===J._id);K&&(K.x=J.x,K.y=J.y,K.w=J.w)}))}if(P.forEach(H=>{let J=_.findIndex(K=>K._id===H._id);J!==-1&&((H.autoPosition||isNaN(H.x)||isNaN(H.y))&&this.findEmptyPosition(H,F),H.autoPosition||(_[J].x=H.x,_[J].y=H.y,_[J].w=H.w,F.push(_[J])),_.splice(J,1))}),_.length){if(typeof S=="function")S(d,s,F,_);else if(!M){let H=d/s,J=S==="move"||S==="moveScale",K=S==="scale"||S==="moveScale";_.forEach(z=>{z.x=d===1?0:J?Math.round(z.x*H):Math.min(z.x,d-1),z.w=d===1||s===1?1:K?Math.round(z.w*H)||1:Math.min(z.w,d),F.push(z)}),_=[]}}return M||(F=utils_1$4.Utils.sort(F,-1,d)),this._inColumnResize=!0,this.nodes=[],F.forEach(H=>{this.addNode(H,!1),delete H._orig}),this.batchUpdate(!1),delete this._inColumnResize,this}cacheLayout(s,d,_=!1){let S=[];return s.forEach((T,F)=>{T._id=T._id||GridStackEngine._idSeq++,S[F]={x:T.x,y:T.y,w:T.w,_id:T._id}}),this._layouts=_?[]:this._layouts||[],this._layouts[d]=S,this}cacheOneLayout(s,d){s._id=s._id||GridStackEngine._idSeq++;let _={x:s.x,y:s.y,w:s.w,_id:s._id};s.autoPosition&&(delete _.x,delete _.y,_.autoPosition=!0),this._layouts=this._layouts||[],this._layouts[d]=this._layouts[d]||[];let S=this.findCacheLayout(s,d);return S===-1?this._layouts[d].push(_):this._layouts[d][S]=_,this}findCacheLayout(s,d){var _,S,T;return(T=(S=(_=this._layouts)===null||_===void 0?void 0:_[d])===null||S===void 0?void 0:S.findIndex(F=>F._id===s._id))!==null&&T!==void 0?T:-1}cleanupNode(s){for(let d in s)d[0]==="_"&&d!=="_id"&&delete s[d];return this}}gridstackEngine.GridStackEngine=GridStackEngine;GridStackEngine._idSeq=1;var types={};Object.defineProperty(types,"__esModule",{value:!0});types.dragInDefaultOptions=types.gridDefaults=void 0;types.gridDefaults={alwaysShowResizeHandle:"mobile",animate:!0,auto:!0,cellHeight:"auto",cellHeightThrottle:100,cellHeightUnit:"px",column:12,draggable:{handle:".grid-stack-item-content",appendTo:"body",scroll:!0},handle:".grid-stack-item-content",itemClass:"grid-stack-item",margin:10,marginUnit:"px",maxRow:0,minRow:0,oneColumnSize:768,placeholderClass:"grid-stack-placeholder",placeholderText:"",removableOptions:{accept:".grid-stack-item"},resizable:{handles:"se"},rtl:"auto"};types.dragInDefaultOptions={handle:".grid-stack-item-content",appendTo:"body"};var ddGridstack={},ddManager={};Object.defineProperty(ddManager,"__esModule",{value:!0});ddManager.DDManager=void 0;class DDManager{}ddManager.DDManager=DDManager;var ddElement={},ddResizable={},ddResizableHandle={},ddTouch={};Object.defineProperty(ddTouch,"__esModule",{value:!0});ddTouch.pointerleave=ddTouch.pointerenter=ddTouch.pointerdown=ddTouch.touchend=ddTouch.touchmove=ddTouch.touchstart=ddTouch.isTouch=void 0;const dd_manager_1$4=ddManager;ddTouch.isTouch=typeof window<"u"&&typeof document<"u"&&("ontouchstart"in document||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);class DDTouch{}function simulateMouseEvent(f,s){if(f.touches.length>1)return;f.cancelable&&f.preventDefault();const d=f.changedTouches[0],_=document.createEvent("MouseEvents");_.initMouseEvent(s,!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),f.target.dispatchEvent(_)}function simulatePointerMouseEvent(f,s){f.cancelable&&f.preventDefault();const d=document.createEvent("MouseEvents");d.initMouseEvent(s,!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null),f.target.dispatchEvent(d)}function touchstart(f){DDTouch.touchHandled||(DDTouch.touchHandled=!0,simulateMouseEvent(f,"mousedown"))}ddTouch.touchstart=touchstart;function touchmove(f){DDTouch.touchHandled&&simulateMouseEvent(f,"mousemove")}ddTouch.touchmove=touchmove;function touchend(f){if(!DDTouch.touchHandled)return;DDTouch.pointerLeaveTimeout&&(window.clearTimeout(DDTouch.pointerLeaveTimeout),delete DDTouch.pointerLeaveTimeout);const s=!!dd_manager_1$4.DDManager.dragElement;simulateMouseEvent(f,"mouseup"),s||simulateMouseEvent(f,"click"),DDTouch.touchHandled=!1}ddTouch.touchend=touchend;function pointerdown(f){f.target.releasePointerCapture(f.pointerId)}ddTouch.pointerdown=pointerdown;function pointerenter(f){dd_manager_1$4.DDManager.dragElement&&simulatePointerMouseEvent(f,"mouseenter")}ddTouch.pointerenter=pointerenter;function pointerleave(f){dd_manager_1$4.DDManager.dragElement&&(DDTouch.pointerLeaveTimeout=window.setTimeout(()=>{delete DDTouch.pointerLeaveTimeout,simulatePointerMouseEvent(f,"mouseleave")},10))}ddTouch.pointerleave=pointerleave;Object.defineProperty(ddResizableHandle,"__esModule",{value:!0});ddResizableHandle.DDResizableHandle=void 0;const dd_touch_1$2=ddTouch;class DDResizableHandle{constructor(s,d,_){this.moving=!1,this.host=s,this.dir=d,this.option=_,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._init()}_init(){const s=document.createElement("div");return s.classList.add("ui-resizable-handle"),s.classList.add(`${DDResizableHandle.prefix}${this.dir}`),s.style.zIndex="100",s.style.userSelect="none",this.el=s,this.host.appendChild(this.el),this.el.addEventListener("mousedown",this._mouseDown),dd_touch_1$2.isTouch&&(this.el.addEventListener("touchstart",dd_touch_1$2.touchstart),this.el.addEventListener("pointerdown",dd_touch_1$2.pointerdown)),this}destroy(){return this.moving&&this._mouseUp(this.mouseDownEvent),this.el.removeEventListener("mousedown",this._mouseDown),dd_touch_1$2.isTouch&&(this.el.removeEventListener("touchstart",dd_touch_1$2.touchstart),this.el.removeEventListener("pointerdown",dd_touch_1$2.pointerdown)),this.host.removeChild(this.el),delete this.el,delete this.host,this}_mouseDown(s){this.mouseDownEvent=s,document.addEventListener("mousemove",this._mouseMove,!0),document.addEventListener("mouseup",this._mouseUp,!0),dd_touch_1$2.isTouch&&(this.el.addEventListener("touchmove",dd_touch_1$2.touchmove),this.el.addEventListener("touchend",dd_touch_1$2.touchend)),s.stopPropagation(),s.preventDefault()}_mouseMove(s){let d=this.mouseDownEvent;this.moving?this._triggerEvent("move",s):Math.abs(s.x-d.x)+Math.abs(s.y-d.y)>2&&(this.moving=!0,this._triggerEvent("start",this.mouseDownEvent),this._triggerEvent("move",s)),s.stopPropagation(),s.preventDefault()}_mouseUp(s){this.moving&&this._triggerEvent("stop",s),document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),dd_touch_1$2.isTouch&&(this.el.removeEventListener("touchmove",dd_touch_1$2.touchmove),this.el.removeEventListener("touchend",dd_touch_1$2.touchend)),delete this.moving,delete this.mouseDownEvent,s.stopPropagation(),s.preventDefault()}_triggerEvent(s,d){return this.option[s]&&this.option[s](d),this}}ddResizableHandle.DDResizableHandle=DDResizableHandle;DDResizableHandle.prefix="ui-resizable-";var ddBaseImpl={};Object.defineProperty(ddBaseImpl,"__esModule",{value:!0});ddBaseImpl.DDBaseImplement=void 0;class DDBaseImplement{constructor(){this._eventRegister={}}get disabled(){return this._disabled}on(s,d){this._eventRegister[s]=d}off(s){delete this._eventRegister[s]}enable(){this._disabled=!1}disable(){this._disabled=!0}destroy(){delete this._eventRegister}triggerEvent(s,d){if(!this.disabled&&this._eventRegister&&this._eventRegister[s])return this._eventRegister[s](d)}}ddBaseImpl.DDBaseImplement=DDBaseImplement;Object.defineProperty(ddResizable,"__esModule",{value:!0});ddResizable.DDResizable=void 0;const dd_resizable_handle_1=ddResizableHandle,dd_base_impl_1$2=ddBaseImpl,utils_1$3=utils$2,dd_manager_1$3=ddManager;class DDResizable extends dd_base_impl_1$2.DDBaseImplement{constructor(s,d={}){super(),this._ui=()=>{const S=this.el.parentElement.getBoundingClientRect(),T={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},F=this.temporalRect||T;return{position:{left:F.left-S.left,top:F.top-S.top},size:{width:F.width,height:F.height}}},this.el=s,this.option=d,this._mouseOver=this._mouseOver.bind(this),this._mouseOut=this._mouseOut.bind(this),this.enable(),this._setupAutoHide(this.option.autoHide),this._setupHandlers()}on(s,d){super.on(s,d)}off(s){super.off(s)}enable(){super.enable(),this.el.classList.add("ui-resizable"),this.el.classList.remove("ui-resizable-disabled"),this._setupAutoHide(this.option.autoHide)}disable(){super.disable(),this.el.classList.add("ui-resizable-disabled"),this.el.classList.remove("ui-resizable"),this._setupAutoHide(!1)}destroy(){this._removeHandlers(),this._setupAutoHide(!1),this.el.classList.remove("ui-resizable"),delete this.el,super.destroy()}updateOption(s){let d=s.handles&&s.handles!==this.option.handles,_=s.autoHide&&s.autoHide!==this.option.autoHide;return Object.keys(s).forEach(S=>this.option[S]=s[S]),d&&(this._removeHandlers(),this._setupHandlers()),_&&this._setupAutoHide(this.option.autoHide),this}_setupAutoHide(s){return s?(this.el.classList.add("ui-resizable-autohide"),this.el.addEventListener("mouseover",this._mouseOver),this.el.addEventListener("mouseout",this._mouseOut)):(this.el.classList.remove("ui-resizable-autohide"),this.el.removeEventListener("mouseover",this._mouseOver),this.el.removeEventListener("mouseout",this._mouseOut),dd_manager_1$3.DDManager.overResizeElement===this&&delete dd_manager_1$3.DDManager.overResizeElement),this}_mouseOver(s){dd_manager_1$3.DDManager.overResizeElement||dd_manager_1$3.DDManager.dragElement||(dd_manager_1$3.DDManager.overResizeElement=this,this.el.classList.remove("ui-resizable-autohide"))}_mouseOut(s){dd_manager_1$3.DDManager.overResizeElement===this&&(delete dd_manager_1$3.DDManager.overResizeElement,this.el.classList.add("ui-resizable-autohide"))}_setupHandlers(){let s=this.option.handles||"e,s,se";return s==="all"&&(s="n,e,s,w,se,sw,ne,nw"),this.handlers=s.split(",").map(d=>d.trim()).map(d=>new dd_resizable_handle_1.DDResizableHandle(this.el,d,{start:_=>{this._resizeStart(_)},stop:_=>{this._resizeStop(_)},move:_=>{this._resizing(_,d)}})),this}_resizeStart(s){this.originalRect=this.el.getBoundingClientRect(),this.scrollEl=utils_1$3.Utils.getScrollElement(this.el),this.scrollY=this.scrollEl.scrollTop,this.scrolled=0,this.startEvent=s,this._setupHelper(),this._applyChange();const d=utils_1$3.Utils.initEvent(s,{type:"resizestart",target:this.el});return this.option.start&&this.option.start(d,this._ui()),this.el.classList.add("ui-resizable-resizing"),this.triggerEvent("resizestart",d),this}_resizing(s,d){this.scrolled=this.scrollEl.scrollTop-this.scrollY,this.temporalRect=this._getChange(s,d),this._applyChange();const _=utils_1$3.Utils.initEvent(s,{type:"resize",target:this.el});return this.option.resize&&this.option.resize(_,this._ui()),this.triggerEvent("resize",_),this}_resizeStop(s){const d=utils_1$3.Utils.initEvent(s,{type:"resizestop",target:this.el});return this.option.stop&&this.option.stop(d),this.el.classList.remove("ui-resizable-resizing"),this.triggerEvent("resizestop",d),this._cleanHelper(),delete this.startEvent,delete this.originalRect,delete this.temporalRect,delete this.scrollY,delete this.scrolled,this}_setupHelper(){return this.elOriginStyleVal=DDResizable._originStyleProp.map(s=>this.el.style[s]),this.parentOriginStylePosition=this.el.parentElement.style.position,window.getComputedStyle(this.el.parentElement).position.match(/static/)&&(this.el.parentElement.style.position="relative"),this.el.style.position="absolute",this.el.style.opacity="0.8",this}_cleanHelper(){return DDResizable._originStyleProp.forEach((s,d)=>{this.el.style[s]=this.elOriginStyleVal[d]||null}),this.el.parentElement.style.position=this.parentOriginStylePosition||null,this}_getChange(s,d){const _=this.startEvent,S={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},T=s.clientX-_.clientX,F=s.clientY-_.clientY;d.indexOf("e")>-1?S.width+=T:d.indexOf("w")>-1&&(S.width-=T,S.left+=T),d.indexOf("s")>-1?S.height+=F:d.indexOf("n")>-1&&(S.height-=F,S.top+=F);const M=this._constrainSize(S.width,S.height);return Math.round(S.width)!==Math.round(M.width)&&(d.indexOf("w")>-1&&(S.left+=S.width-M.width),S.width=M.width),Math.round(S.height)!==Math.round(M.height)&&(d.indexOf("n")>-1&&(S.top+=S.height-M.height),S.height=M.height),S}_constrainSize(s,d){const _=this.option.maxWidth||Number.MAX_SAFE_INTEGER,S=this.option.minWidth||s,T=this.option.maxHeight||Number.MAX_SAFE_INTEGER,F=this.option.minHeight||d,M=Math.min(_,Math.max(S,s)),P=Math.min(T,Math.max(F,d));return{width:M,height:P}}_applyChange(){let s={left:0,top:0,width:0,height:0};if(this.el.style.position==="absolute"){const d=this.el.parentElement,{left:_,top:S}=d.getBoundingClientRect();s={left:_,top:S,width:0,height:0}}return this.temporalRect?(Object.keys(this.temporalRect).forEach(d=>{const _=this.temporalRect[d];this.el.style[d]=_-s[d]+"px"}),this):this}_removeHandlers(){return this.handlers.forEach(s=>s.destroy()),delete this.handlers,this}}ddResizable.DDResizable=DDResizable;DDResizable._originStyleProp=["width","height","position","left","top","opacity","zIndex"];var ddDraggable={};Object.defineProperty(ddDraggable,"__esModule",{value:!0});ddDraggable.DDDraggable=void 0;const dd_manager_1$2=ddManager,utils_1$2=utils$2,dd_base_impl_1$1=ddBaseImpl,dd_touch_1$1=ddTouch;class DDDraggable extends dd_base_impl_1$1.DDBaseImplement{constructor(s,d={}){super(),this.el=s,this.option=d;let _=d.handle.substring(1);this.dragEl=s.classList.contains(_)?s:s.querySelector(d.handle)||s,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this.enable()}on(s,d){super.on(s,d)}off(s){super.off(s)}enable(){this.disabled!==!1&&(super.enable(),this.dragEl.addEventListener("mousedown",this._mouseDown),dd_touch_1$1.isTouch&&(this.dragEl.addEventListener("touchstart",dd_touch_1$1.touchstart),this.dragEl.addEventListener("pointerdown",dd_touch_1$1.pointerdown)),this.el.classList.remove("ui-draggable-disabled"),this.el.classList.add("ui-draggable"))}disable(s=!1){this.disabled!==!0&&(super.disable(),this.dragEl.removeEventListener("mousedown",this._mouseDown),dd_touch_1$1.isTouch&&(this.dragEl.removeEventListener("touchstart",dd_touch_1$1.touchstart),this.dragEl.removeEventListener("pointerdown",dd_touch_1$1.pointerdown)),this.el.classList.remove("ui-draggable"),s||this.el.classList.add("ui-draggable-disabled"))}destroy(){this.dragTimeout&&window.clearTimeout(this.dragTimeout),delete this.dragTimeout,this.dragging&&this._mouseUp(this.mouseDownEvent),this.disable(!0),delete this.el,delete this.helper,delete this.option,super.destroy()}updateOption(s){return Object.keys(s).forEach(d=>this.option[d]=s[d]),this}_mouseDown(s){if(dd_manager_1$2.DDManager.mouseHandled)return;if(s.button!==0)return!0;const d=["input","textarea","button","select","option"],_=s.target.nodeName.toLowerCase();return d.find(S=>S===_)||s.target.closest('[contenteditable="true"]')||(this.mouseDownEvent=s,delete this.dragging,delete dd_manager_1$2.DDManager.dragElement,delete dd_manager_1$2.DDManager.dropElement,document.addEventListener("mousemove",this._mouseMove,!0),document.addEventListener("mouseup",this._mouseUp,!0),dd_touch_1$1.isTouch&&(this.dragEl.addEventListener("touchmove",dd_touch_1$1.touchmove),this.dragEl.addEventListener("touchend",dd_touch_1$1.touchend)),s.preventDefault(),document.activeElement&&document.activeElement.blur(),dd_manager_1$2.DDManager.mouseHandled=!0),!0}_callDrag(s){if(!this.dragging)return;const d=utils_1$2.Utils.initEvent(s,{target:this.el,type:"drag"});this.option.drag&&this.option.drag(d,this.ui()),this.triggerEvent("drag",d)}_mouseMove(s){var d;let _=this.mouseDownEvent;if(this.dragging)if(this._dragFollow(s),dd_manager_1$2.DDManager.pauseDrag){const S=Number.isInteger(dd_manager_1$2.DDManager.pauseDrag)?dd_manager_1$2.DDManager.pauseDrag:100;this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>this._callDrag(s),S)}else this._callDrag(s);else if(Math.abs(s.x-_.x)+Math.abs(s.y-_.y)>3){this.dragging=!0,dd_manager_1$2.DDManager.dragElement=this;let S=(d=this.el.gridstackNode)===null||d===void 0?void 0:d.grid;S?dd_manager_1$2.DDManager.dropElement=S.el.ddElement.ddDroppable:delete dd_manager_1$2.DDManager.dropElement,this.helper=this._createHelper(s),this._setupHelperContainmentStyle(),this.dragOffset=this._getDragOffset(s,this.el,this.helperContainment);const T=utils_1$2.Utils.initEvent(s,{target:this.el,type:"dragstart"});this._setupHelperStyle(s),this.option.start&&this.option.start(T,this.ui()),this.triggerEvent("dragstart",T)}return s.preventDefault(),!0}_mouseUp(s){var d;if(document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),dd_touch_1$1.isTouch&&(this.dragEl.removeEventListener("touchmove",dd_touch_1$1.touchmove,!0),this.dragEl.removeEventListener("touchend",dd_touch_1$1.touchend,!0)),this.dragging){delete this.dragging,((d=dd_manager_1$2.DDManager.dropElement)===null||d===void 0?void 0:d.el)===this.el.parentElement&&delete dd_manager_1$2.DDManager.dropElement,this.helperContainment.style.position=this.parentOriginStylePosition||null,this.helper===this.el?this._removeHelperStyle():this.helper.remove();const _=utils_1$2.Utils.initEvent(s,{target:this.el,type:"dragstop"});this.option.stop&&this.option.stop(_),this.triggerEvent("dragstop",_),dd_manager_1$2.DDManager.dropElement&&dd_manager_1$2.DDManager.dropElement.drop(s)}delete this.helper,delete this.mouseDownEvent,delete dd_manager_1$2.DDManager.dragElement,delete dd_manager_1$2.DDManager.dropElement,delete dd_manager_1$2.DDManager.mouseHandled,s.preventDefault()}_createHelper(s){let d=this.el;return typeof this.option.helper=="function"?d=this.option.helper(s):this.option.helper==="clone"&&(d=utils_1$2.Utils.cloneNode(this.el)),document.body.contains(d)||utils_1$2.Utils.appendTo(d,this.option.appendTo==="parent"?this.el.parentNode:this.option.appendTo),d===this.el&&(this.dragElementOriginStyle=DDDraggable.originStyleProp.map(_=>this.el.style[_])),d}_setupHelperStyle(s){this.helper.classList.add("ui-draggable-dragging");const d=this.helper.style;return d.pointerEvents="none",d["min-width"]=0,d.width=this.dragOffset.width+"px",d.height=this.dragOffset.height+"px",d.willChange="left, top",d.position="fixed",this._dragFollow(s),d.transition="none",setTimeout(()=>{this.helper&&(d.transition=null)},0),this}_removeHelperStyle(){var s;this.helper.classList.remove("ui-draggable-dragging");let d=(s=this.helper)===null||s===void 0?void 0:s.gridstackNode;if(!(d!=null&&d._isAboutToRemove)&&this.dragElementOriginStyle){let _=this.helper,S=this.dragElementOriginStyle.transition||null;_.style.transition=this.dragElementOriginStyle.transition="none",DDDraggable.originStyleProp.forEach(T=>_.style[T]=this.dragElementOriginStyle[T]||null),setTimeout(()=>_.style.transition=S,50)}return delete this.dragElementOriginStyle,this}_dragFollow(s){let d={left:0,top:0};const _=this.helper.style,S=this.dragOffset;_.left=s.clientX+S.offsetLeft-d.left+"px",_.top=s.clientY+S.offsetTop-d.top+"px"}_setupHelperContainmentStyle(){return this.helperContainment=this.helper.parentElement,this.helper.style.position!=="fixed"&&(this.parentOriginStylePosition=this.helperContainment.style.position,window.getComputedStyle(this.helperContainment).position.match(/static/)&&(this.helperContainment.style.position="relative")),this}_getDragOffset(s,d,_){let S=0,T=0;if(_){const M=document.createElement("div");utils_1$2.Utils.addElStyles(M,{opacity:"0",position:"fixed",top:"0px",left:"0px",width:"1px",height:"1px",zIndex:"-999999"}),_.appendChild(M);const P=M.getBoundingClientRect();_.removeChild(M),S=P.left,T=P.top}const F=d.getBoundingClientRect();return{left:F.left,top:F.top,offsetLeft:-s.clientX+F.left-S,offsetTop:-s.clientY+F.top-T,width:F.width,height:F.height}}ui(){const d=this.el.parentElement.getBoundingClientRect(),_=this.helper.getBoundingClientRect();return{position:{top:_.top-d.top,left:_.left-d.left}}}}ddDraggable.DDDraggable=DDDraggable;DDDraggable.originStyleProp=["transition","pointerEvents","position","left","top","minWidth","willChange"];var ddDroppable={};Object.defineProperty(ddDroppable,"__esModule",{value:!0});ddDroppable.DDDroppable=void 0;const dd_manager_1$1=ddManager,dd_base_impl_1=ddBaseImpl,utils_1$1=utils$2,dd_touch_1=ddTouch;class DDDroppable extends dd_base_impl_1.DDBaseImplement{constructor(s,d={}){super(),this.el=s,this.option=d,this._mouseEnter=this._mouseEnter.bind(this),this._mouseLeave=this._mouseLeave.bind(this),this.enable(),this._setupAccept()}on(s,d){super.on(s,d)}off(s){super.off(s)}enable(){this.disabled!==!1&&(super.enable(),this.el.classList.add("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),this.el.addEventListener("mouseenter",this._mouseEnter),this.el.addEventListener("mouseleave",this._mouseLeave),dd_touch_1.isTouch&&(this.el.addEventListener("pointerenter",dd_touch_1.pointerenter),this.el.addEventListener("pointerleave",dd_touch_1.pointerleave)))}disable(s=!1){this.disabled!==!0&&(super.disable(),this.el.classList.remove("ui-droppable"),s||this.el.classList.add("ui-droppable-disabled"),this.el.removeEventListener("mouseenter",this._mouseEnter),this.el.removeEventListener("mouseleave",this._mouseLeave),dd_touch_1.isTouch&&(this.el.removeEventListener("pointerenter",dd_touch_1.pointerenter),this.el.removeEventListener("pointerleave",dd_touch_1.pointerleave)))}destroy(){this.disable(!0),this.el.classList.remove("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),super.destroy()}updateOption(s){return Object.keys(s).forEach(d=>this.option[d]=s[d]),this._setupAccept(),this}_mouseEnter(s){if(!dd_manager_1$1.DDManager.dragElement||!this._canDrop(dd_manager_1$1.DDManager.dragElement.el))return;s.preventDefault(),s.stopPropagation(),dd_manager_1$1.DDManager.dropElement&&dd_manager_1$1.DDManager.dropElement!==this&&dd_manager_1$1.DDManager.dropElement._mouseLeave(s),dd_manager_1$1.DDManager.dropElement=this;const d=utils_1$1.Utils.initEvent(s,{target:this.el,type:"dropover"});this.option.over&&this.option.over(d,this._ui(dd_manager_1$1.DDManager.dragElement)),this.triggerEvent("dropover",d),this.el.classList.add("ui-droppable-over")}_mouseLeave(s){var d;if(!dd_manager_1$1.DDManager.dragElement||dd_manager_1$1.DDManager.dropElement!==this)return;s.preventDefault(),s.stopPropagation();const _=utils_1$1.Utils.initEvent(s,{target:this.el,type:"dropout"});if(this.option.out&&this.option.out(_,this._ui(dd_manager_1$1.DDManager.dragElement)),this.triggerEvent("dropout",_),dd_manager_1$1.DDManager.dropElement===this){delete dd_manager_1$1.DDManager.dropElement;let S,T=this.el.parentElement;for(;!S&&T;)S=(d=T.ddElement)===null||d===void 0?void 0:d.ddDroppable,T=T.parentElement;S&&S._mouseEnter(s)}}drop(s){s.preventDefault();const d=utils_1$1.Utils.initEvent(s,{target:this.el,type:"drop"});this.option.drop&&this.option.drop(d,this._ui(dd_manager_1$1.DDManager.dragElement)),this.triggerEvent("drop",d)}_canDrop(s){return s&&(!this.accept||this.accept(s))}_setupAccept(){return this.option.accept?(typeof this.option.accept=="string"?this.accept=s=>s.matches(this.option.accept):this.accept=this.option.accept,this):this}_ui(s){return Object.assign({draggable:s.el},s.ui())}}ddDroppable.DDDroppable=DDDroppable;Object.defineProperty(ddElement,"__esModule",{value:!0});ddElement.DDElement=void 0;const dd_resizable_1=ddResizable,dd_draggable_1=ddDraggable,dd_droppable_1=ddDroppable;class DDElement{constructor(s){this.el=s}static init(s){return s.ddElement||(s.ddElement=new DDElement(s)),s.ddElement}on(s,d){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(s)>-1?this.ddDraggable.on(s,d):this.ddDroppable&&["drop","dropover","dropout"].indexOf(s)>-1?this.ddDroppable.on(s,d):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(s)>-1&&this.ddResizable.on(s,d),this}off(s){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(s)>-1?this.ddDraggable.off(s):this.ddDroppable&&["drop","dropover","dropout"].indexOf(s)>-1?this.ddDroppable.off(s):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(s)>-1&&this.ddResizable.off(s),this}setupDraggable(s){return this.ddDraggable?this.ddDraggable.updateOption(s):this.ddDraggable=new dd_draggable_1.DDDraggable(this.el,s),this}cleanDraggable(){return this.ddDraggable&&(this.ddDraggable.destroy(),delete this.ddDraggable),this}setupResizable(s){return this.ddResizable?this.ddResizable.updateOption(s):this.ddResizable=new dd_resizable_1.DDResizable(this.el,s),this}cleanResizable(){return this.ddResizable&&(this.ddResizable.destroy(),delete this.ddResizable),this}setupDroppable(s){return this.ddDroppable?this.ddDroppable.updateOption(s):this.ddDroppable=new dd_droppable_1.DDDroppable(this.el,s),this}cleanDroppable(){return this.ddDroppable&&(this.ddDroppable.destroy(),delete this.ddDroppable),this}}ddElement.DDElement=DDElement;Object.defineProperty(ddGridstack,"__esModule",{value:!0});ddGridstack.DDGridStack=void 0;const utils_1=utils$2,dd_manager_1=ddManager,dd_element_1=ddElement;class DDGridStack{resizable(s,d,_,S){return this._getDDElements(s).forEach(T=>{if(d==="disable"||d==="enable")T.ddResizable&&T.ddResizable[d]();else if(d==="destroy")T.ddResizable&&T.cleanResizable();else if(d==="option")T.setupResizable({[_]:S});else{const F=T.el.gridstackNode.grid;let M=T.el.getAttribute("gs-resize-handles")?T.el.getAttribute("gs-resize-handles"):F.opts.resizable.handles,P=!F.opts.alwaysShowResizeHandle;T.setupResizable(Object.assign(Object.assign(Object.assign({},F.opts.resizable),{handles:M,autoHide:P}),{start:d.start,stop:d.stop,resize:d.resize}))}}),this}draggable(s,d,_,S){return this._getDDElements(s).forEach(T=>{if(d==="disable"||d==="enable")T.ddDraggable&&T.ddDraggable[d]();else if(d==="destroy")T.ddDraggable&&T.cleanDraggable();else if(d==="option")T.setupDraggable({[_]:S});else{const F=T.el.gridstackNode.grid;T.setupDraggable(Object.assign(Object.assign({},F.opts.draggable),{start:d.start,stop:d.stop,drag:d.drag}))}}),this}dragIn(s,d){return this._getDDElements(s).forEach(_=>_.setupDraggable(d)),this}droppable(s,d,_,S){return typeof d.accept=="function"&&!d._accept&&(d._accept=d.accept,d.accept=T=>d._accept(T)),this._getDDElements(s).forEach(T=>{d==="disable"||d==="enable"?T.ddDroppable&&T.ddDroppable[d]():d==="destroy"?T.ddDroppable&&T.cleanDroppable():d==="option"?T.setupDroppable({[_]:S}):T.setupDroppable(d)}),this}isDroppable(s){return!!(s&&s.ddElement&&s.ddElement.ddDroppable&&!s.ddElement.ddDroppable.disabled)}isDraggable(s){return!!(s&&s.ddElement&&s.ddElement.ddDraggable&&!s.ddElement.ddDraggable.disabled)}isResizable(s){return!!(s&&s.ddElement&&s.ddElement.ddResizable&&!s.ddElement.ddResizable.disabled)}on(s,d,_){return this._getDDElements(s).forEach(S=>S.on(d,T=>{_(T,dd_manager_1.DDManager.dragElement?dd_manager_1.DDManager.dragElement.el:T.target,dd_manager_1.DDManager.dragElement?dd_manager_1.DDManager.dragElement.helper:null)})),this}off(s,d){return this._getDDElements(s).forEach(_=>_.off(d)),this}_getDDElements(s,d=!0){let _=utils_1.Utils.getElements(s);if(!_.length)return[];let S=_.map(T=>T.ddElement||(d?dd_element_1.DDElement.init(T):null));return d||S.filter(T=>T),S}}ddGridstack.DDGridStack=DDGridStack;(function(f){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(K,z,oe,se){se===void 0&&(se=oe),Object.defineProperty(K,se,{enumerable:!0,get:function(){return z[oe]}})}:function(K,z,oe,se){se===void 0&&(se=oe),K[se]=z[oe]}),d=commonjsGlobal&&commonjsGlobal.__exportStar||function(K,z){for(var oe in K)oe!=="default"&&!z.hasOwnProperty(oe)&&s(z,K,oe)};Object.defineProperty(f,"__esModule",{value:!0}),f.GridStack=void 0;/*!
 * GridStack 7.3.0
 * https://gridstackjs.com/
 *
 * Copyright (c) 2021-2022 Alain Dumesny
 * see root license https://github.com/gridstack/gridstack.js/tree/master/LICENSE
 */const _=gridstackEngine,S=utils$2,T=types,F=ddGridstack,M=ddTouch,P=ddManager,H=new F.DDGridStack;d(types,f),d(utils$2,f),d(gridstackEngine,f),d(ddGridstack,f);class J{constructor(z,oe={}){var se,ae;this._gsEventHandler={},this._extraDragRow=0,this.el=z,oe=oe||{},z.classList.contains("grid-stack")||this.el.classList.add("grid-stack"),oe.row&&(oe.minRow=oe.maxRow=oe.row,delete oe.row);let ge=S.Utils.toNumber(z.getAttribute("gs-row"));oe.column==="auto"&&delete oe.column;let pe=oe;pe.minWidth!==void 0&&(oe.oneColumnSize=oe.oneColumnSize||pe.minWidth,delete pe.minWidth),oe.alwaysShowResizeHandle!==void 0&&(oe._alwaysShowResizeHandle=oe.alwaysShowResizeHandle);let he=Object.assign(Object.assign({},S.Utils.cloneDeep(T.gridDefaults)),{column:S.Utils.toNumber(z.getAttribute("gs-column"))||T.gridDefaults.column,minRow:ge||S.Utils.toNumber(z.getAttribute("gs-min-row"))||T.gridDefaults.minRow,maxRow:ge||S.Utils.toNumber(z.getAttribute("gs-max-row"))||T.gridDefaults.maxRow,staticGrid:S.Utils.toBool(z.getAttribute("gs-static"))||T.gridDefaults.staticGrid,draggable:{handle:(oe.handleClass?"."+oe.handleClass:oe.handle?oe.handle:"")||T.gridDefaults.draggable.handle},removableOptions:{accept:oe.itemClass?"."+oe.itemClass:T.gridDefaults.removableOptions.accept}});z.getAttribute("gs-animate")&&(he.animate=S.Utils.toBool(z.getAttribute("gs-animate"))),this.opts=S.Utils.defaults(oe,he),oe=null,this._initMargin(),this.opts.column!==1&&!this.opts.disableOneColumnMode&&this._widthOrContainer()<=this.opts.oneColumnSize&&(this._prevColumn=this.getColumn(),this.opts.column=1),this.opts.rtl==="auto"&&(this.opts.rtl=z.style.direction==="rtl"),this.opts.rtl&&this.el.classList.add("grid-stack-rtl");let ve=(se=S.Utils.closestUpByClass(this.el,T.gridDefaults.itemClass))===null||se===void 0?void 0:se.gridstackNode;ve&&(ve.subGrid=this,this.parentGridItem=ve,this.el.classList.add("grid-stack-nested"),ve.el.classList.add("grid-stack-sub-grid")),this._isAutoCellHeight=this.opts.cellHeight==="auto",this._isAutoCellHeight||this.opts.cellHeight==="initial"?this.cellHeight(void 0,!1):(typeof this.opts.cellHeight=="number"&&this.opts.cellHeightUnit&&this.opts.cellHeightUnit!==T.gridDefaults.cellHeightUnit&&(this.opts.cellHeight=this.opts.cellHeight+this.opts.cellHeightUnit,delete this.opts.cellHeightUnit),this.cellHeight(this.opts.cellHeight,!1)),this.opts.alwaysShowResizeHandle==="mobile"&&(this.opts.alwaysShowResizeHandle=M.isTouch),this._styleSheetClass="grid-stack-instance-"+_.GridStackEngine._idSeq++,this.el.classList.add(this._styleSheetClass),this._setStaticClass();let be=this.opts.engineClass||J.engineClass||_.GridStackEngine;if(this.engine=new be({column:this.getColumn(),float:this.opts.float,maxRow:this.opts.maxRow,onChange:Re=>{let Fe=0;this.engine.nodes.forEach(ye=>{Fe=Math.max(Fe,ye.y+ye.h)}),Re.forEach(ye=>{let Ue=ye.el;Ue&&(ye._removeDOM?(Ue&&Ue.remove(),delete ye._removeDOM):this._writePosAttr(Ue,ye))}),this._updateStyles(!1,Fe)}}),this.opts.auto&&(this.batchUpdate(),this.getGridItems().forEach(Re=>this._prepareElement(Re)),this.batchUpdate(!1)),this.opts.children){let Re=this.opts.children;delete this.opts.children,Re.length&&this.load(Re)}this.setAnimation(this.opts.animate),this._updateStyles(),this.opts.column!=12&&this.el.classList.add("grid-stack-"+this.opts.column),this.opts.dragIn&&J.setupDragIn(this.opts.dragIn,this.opts.dragInOptions),delete this.opts.dragIn,delete this.opts.dragInOptions,this.opts.subGridDynamic&&!P.DDManager.pauseDrag&&(P.DDManager.pauseDrag=!0),((ae=this.opts.draggable)===null||ae===void 0?void 0:ae.pause)!==void 0&&(P.DDManager.pauseDrag=this.opts.draggable.pause),this._setupRemoveDrop(),this._setupAcceptWidget(),this._updateWindowResizeEvent()}static init(z={},oe=".grid-stack"){let se=J.getGridElement(oe);return se?(se.gridstack||(se.gridstack=new J(se,S.Utils.cloneDeep(z))),se.gridstack):(console.error(typeof oe=="string"?'GridStack.initAll() no grid was found with selector "'+oe+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`:"GridStack.init() no grid element was passed."),null)}static initAll(z={},oe=".grid-stack"){let se=[];return J.getGridElements(oe).forEach(ae=>{ae.gridstack||(ae.gridstack=new J(ae,S.Utils.cloneDeep(z)),delete z.dragIn,delete z.dragInOptions),se.push(ae.gridstack)}),se.length===0&&console.error('GridStack.initAll() no grid was found with selector "'+oe+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`),se}static addGrid(z,oe={}){if(!z)return null;let se=z;if(!z.classList.contains("grid-stack")||oe.addRemoveCB)if(oe.addRemoveCB)se=oe.addRemoveCB(z,oe,!0,!0);else{let pe=document.implementation.createHTMLDocument("");pe.body.innerHTML=`<div class="grid-stack ${oe.class||""}"></div>`,se=pe.body.children[0],z.appendChild(se)}return J.init(oe,se)}static registerEngine(z){J.engineClass=z}get placeholder(){if(!this._placeholder){let z=document.createElement("div");z.className="placeholder-content",this.opts.placeholderText&&(z.innerHTML=this.opts.placeholderText),this._placeholder=document.createElement("div"),this._placeholder.classList.add(this.opts.placeholderClass,T.gridDefaults.itemClass,this.opts.itemClass),this.placeholder.appendChild(z)}return this._placeholder}addWidget(z,oe){function se(he){return he.el!==void 0||he.x!==void 0||he.y!==void 0||he.w!==void 0||he.h!==void 0||he.content!==void 0}let ae,ge;if(typeof z=="string"){let he=document.implementation.createHTMLDocument("");he.body.innerHTML=z,ae=he.body.children[0]}else if(arguments.length===0||arguments.length===1&&se(z))if(ge=oe=z,ge!=null&&ge.el)ae=ge.el;else if(this.opts.addRemoveCB)ae=this.opts.addRemoveCB(this.el,oe,!0,!1);else{let he=(oe==null?void 0:oe.content)||"",ve=document.implementation.createHTMLDocument("");ve.body.innerHTML=`<div class="grid-stack-item ${this.opts.itemClass||""}"><div class="grid-stack-item-content">${he}</div></div>`,ae=ve.body.children[0]}else ae=z;if(!ae)return;let pe=this._readAttr(ae);return oe=S.Utils.cloneDeep(oe)||{},S.Utils.defaults(oe,pe),ge=this.engine.prepareNode(oe),this._writeAttr(ae,oe),this._insertNotAppend?this.el.prepend(ae):this.el.appendChild(ae),this._prepareElement(ae,!0,oe),this._updateContainerHeight(),ge.subGrid&&this.makeSubGrid(ge.el,void 0,void 0,!1),this._prevColumn&&this.opts.column===1&&(this._ignoreLayoutsNodeChange=!0),this._triggerAddEvent(),this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,ae}makeSubGrid(z,oe,se,ae=!0){var ge,pe,he;let ve=z.gridstackNode;if(ve||(ve=this.makeWidget(z).gridstackNode),!((ge=ve.subGrid)===null||ge===void 0)&&ge.el)return ve.subGrid;let be,Re=this;for(;Re&&!be;)be=(pe=Re.opts)===null||pe===void 0?void 0:pe.subGrid,Re=(he=Re.parentGridItem)===null||he===void 0?void 0:he.grid;oe=S.Utils.cloneDeep(Object.assign(Object.assign(Object.assign({},be||{}),{children:void 0}),oe||ve.subGrid)),ve.subGrid=oe;let Fe;oe.column==="auto"&&(Fe=!0,oe.column=Math.max(ve.w||1,(se==null?void 0:se.w)||1),oe.disableOneColumnMode=!0);let ye=ve.el.querySelector(".grid-stack-item-content"),Ue,It;if(ae){if(this._removeDD(ve.el),It=Object.assign(Object.assign({},ve),{x:0,y:0}),S.Utils.removeInternalForSave(It),delete It.subGrid,ve.content&&(It.content=ve.content,delete ve.content),this.opts.addRemoveCB)Ue=this.opts.addRemoveCB(this.el,It,!0,!1);else{let At=document.implementation.createHTMLDocument("");At.body.innerHTML='<div class="grid-stack-item"></div>',Ue=At.body.children[0],Ue.appendChild(ye),At.body.innerHTML='<div class="grid-stack-item-content"></div>',ye=At.body.children[0],ve.el.appendChild(ye)}this._prepareDragDropByNode(ve)}if(se){let At=Fe?oe.column:ve.w,xt=ve.h+se.h,Ct=ve.el.style;Ct.transition="none",this.update(ve.el,{w:At,h:xt}),setTimeout(()=>Ct.transition=null)}this.opts.addRemoveCB&&(oe.addRemoveCB=oe.addRemoveCB||this.opts.addRemoveCB);let St=ve.subGrid=J.addGrid(ye,oe);return se!=null&&se._moving&&(St._isTemp=!0),Fe&&(St._autoColumn=!0),ae&&St.addWidget(Ue,It),se&&(se._moving?window.setTimeout(()=>S.Utils.simulateMouseEvent(se._event,"mouseenter",St.el),0):St.addWidget(ve.el,ve)),St}removeAsSubGrid(z){var oe;let se=(oe=this.parentGridItem)===null||oe===void 0?void 0:oe.grid;se&&(se.batchUpdate(),se.removeWidget(this.parentGridItem.el,!0,!0),this.engine.nodes.forEach(ae=>{ae.x+=this.parentGridItem.x,ae.y+=this.parentGridItem.y,se.addWidget(ae.el,ae)}),se.batchUpdate(!1),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,z&&window.setTimeout(()=>S.Utils.simulateMouseEvent(z._event,"mouseenter",se.el),0))}save(z=!0,oe=!1){let se=this.engine.save(z);if(se.forEach(ae=>{var ge;if(z&&ae.el&&!ae.subGrid){let pe=ae.el.querySelector(".grid-stack-item-content");ae.content=pe?pe.innerHTML:void 0,ae.content||delete ae.content}else if(z||delete ae.content,!((ge=ae.subGrid)===null||ge===void 0)&&ge.el){const pe=ae.subGrid.save(z,oe);ae.subGrid=oe?pe:{children:pe}}delete ae.el}),oe){let ae=S.Utils.cloneDeep(this.opts);ae.marginBottom===ae.marginTop&&ae.marginRight===ae.marginLeft&&ae.marginTop===ae.marginRight&&(ae.margin=ae.marginTop,delete ae.marginTop,delete ae.marginRight,delete ae.marginBottom,delete ae.marginLeft),ae.rtl===(this.el.style.direction==="rtl")&&(ae.rtl="auto"),this._isAutoCellHeight&&(ae.cellHeight="auto"),this._autoColumn&&(ae.column="auto",delete ae.disableOneColumnMode);const ge=ae._alwaysShowResizeHandle;return delete ae._alwaysShowResizeHandle,ge!==void 0?ae.alwaysShowResizeHandle=ge:delete ae.alwaysShowResizeHandle,S.Utils.removeInternalAndSame(ae,T.gridDefaults),ae.children=se,ae}return se}load(z,oe=this.opts.addRemoveCB||!0){let se=J.Utils.sort([...z],-1,this._prevColumn||this.getColumn());this._insertNotAppend=!0,this._prevColumn&&this._prevColumn!==this.opts.column&&se.some(pe=>pe.x+pe.w>this.opts.column)&&(this._ignoreLayoutsNodeChange=!0,this.engine.cacheLayout(se,this._prevColumn,!0));const ae=this.opts.addRemoveCB;typeof oe=="function"&&(this.opts.addRemoveCB=oe);let ge=[];return this.batchUpdate(),oe&&[...this.engine.nodes].forEach(he=>{se.find(be=>he.id===be.id)||(this.opts.addRemoveCB&&this.opts.addRemoveCB(this.el,he,!1,!1),ge.push(he),this.removeWidget(he.el,!0,!1))}),se.forEach(pe=>{let he=pe.id||pe.id===0?this.engine.nodes.find(ve=>ve.id===pe.id):void 0;if(he){if(this.update(he.el,pe),pe.subGrid&&pe.subGrid.children){let ve=he.el.querySelector(".grid-stack");ve&&ve.gridstack&&(ve.gridstack.load(pe.subGrid.children),this._insertNotAppend=!0)}}else oe&&this.addWidget(pe)}),this.engine.removedNodes=ge,this.batchUpdate(!1),delete this._ignoreLayoutsNodeChange,delete this._insertNotAppend,ae?this.opts.addRemoveCB=ae:delete this.opts.addRemoveCB,this}batchUpdate(z=!0){return this.engine.batchUpdate(z),z||(this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent()),this}getCellHeight(z=!1){if(this.opts.cellHeight&&this.opts.cellHeight!=="auto"&&(!z||!this.opts.cellHeightUnit||this.opts.cellHeightUnit==="px"))return this.opts.cellHeight;let oe=this.el.querySelector("."+this.opts.itemClass);if(oe){let ae=S.Utils.toNumber(oe.getAttribute("gs-h"));return Math.round(oe.offsetHeight/ae)}let se=parseInt(this.el.getAttribute("gs-current-row"));return se?Math.round(this.el.getBoundingClientRect().height/se):this.opts.cellHeight}cellHeight(z,oe=!0){if(oe&&z!==void 0&&this._isAutoCellHeight!==(z==="auto")&&(this._isAutoCellHeight=z==="auto",this._updateWindowResizeEvent()),(z==="initial"||z==="auto")&&(z=void 0),z===void 0){let ae=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;z=this.cellWidth()+ae}let se=S.Utils.parseHeight(z);return this.opts.cellHeightUnit===se.unit&&this.opts.cellHeight===se.h?this:(this.opts.cellHeightUnit=se.unit,this.opts.cellHeight=se.h,oe&&this._updateStyles(!0),this)}cellWidth(){return this._widthOrContainer()/this.getColumn()}_widthOrContainer(){return this.el.clientWidth||this.el.parentElement.clientWidth||window.innerWidth}compact(){return this.engine.compact(),this._triggerChangeEvent(),this}column(z,oe="moveScale"){if(z<1||this.opts.column===z)return this;let se=this.getColumn();z===1?this._prevColumn=se:delete this._prevColumn,this.el.classList.remove("grid-stack-"+se),this.el.classList.add("grid-stack-"+z),this.opts.column=this.engine.column=z;let ae;return z===1&&this.opts.oneColumnModeDomSort&&(ae=[],this.getGridItems().forEach(ge=>{ge.gridstackNode&&ae.push(ge.gridstackNode)}),ae.length||(ae=void 0)),this.engine.updateNodeWidths(se,z,ae,oe),this._isAutoCellHeight&&this.cellHeight(),this._ignoreLayoutsNodeChange=!0,this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,this}getColumn(){return this.opts.column}getGridItems(){return Array.from(this.el.children).filter(z=>z.matches("."+this.opts.itemClass)&&!z.matches("."+this.opts.placeholderClass))}destroy(z=!0){if(this.el)return this._updateWindowResizeEvent(!0),this.setStatic(!0,!1),this.setAnimation(!1),z?this.el.parentNode.removeChild(this.el):(this.removeAll(z),this.el.classList.remove(this._styleSheetClass)),this._removeStylesheet(),this.el.removeAttribute("gs-current-row"),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,delete this.opts,delete this._placeholder,delete this.engine,delete this.el.gridstack,delete this.el,this}float(z){return this.opts.float!==z&&(this.opts.float=this.engine.float=z,this._triggerChangeEvent()),this}getFloat(){return this.engine.float}getCellFromPixel(z,oe=!1){let se=this.el.getBoundingClientRect(),ae;oe?ae={top:se.top+document.documentElement.scrollTop,left:se.left}:ae={top:this.el.offsetTop,left:this.el.offsetLeft};let ge=z.left-ae.left,pe=z.top-ae.top,he=se.width/this.getColumn(),ve=se.height/parseInt(this.el.getAttribute("gs-current-row"));return{x:Math.floor(ge/he),y:Math.floor(pe/ve)}}getRow(){return Math.max(this.engine.getRow(),this.opts.minRow)}isAreaEmpty(z,oe,se,ae){return this.engine.isAreaEmpty(z,oe,se,ae)}makeWidget(z){let oe=J.getElement(z);return this._prepareElement(oe,!0),this._updateContainerHeight(),this._triggerAddEvent(),this._triggerChangeEvent(),oe}on(z,oe){return z.indexOf(" ")!==-1?(z.split(" ").forEach(ae=>this.on(ae,oe)),this):(z==="change"||z==="added"||z==="removed"||z==="enable"||z==="disable"?(z==="enable"||z==="disable"?this._gsEventHandler[z]=ae=>oe(ae):this._gsEventHandler[z]=ae=>oe(ae,ae.detail),this.el.addEventListener(z,this._gsEventHandler[z])):z==="drag"||z==="dragstart"||z==="dragstop"||z==="resizestart"||z==="resize"||z==="resizestop"||z==="dropped"?this._gsEventHandler[z]=oe:console.log("GridStack.on("+z+') event not supported, but you can still use $(".grid-stack").on(...) while jquery-ui is still used internally.'),this)}off(z){return z.indexOf(" ")!==-1?(z.split(" ").forEach(se=>this.off(se)),this):((z==="change"||z==="added"||z==="removed"||z==="enable"||z==="disable")&&this._gsEventHandler[z]&&this.el.removeEventListener(z,this._gsEventHandler[z]),delete this._gsEventHandler[z],this)}removeWidget(z,oe=!0,se=!0){return J.getElements(z).forEach(ae=>{if(ae.parentElement&&ae.parentElement!==this.el)return;let ge=ae.gridstackNode;ge||(ge=this.engine.nodes.find(pe=>ae===pe.el)),ge&&(delete ae.gridstackNode,this._removeDD(ae),this.engine.removeNode(ge,oe,se),oe&&ae.parentElement&&ae.remove())}),se&&(this._triggerRemoveEvent(),this._triggerChangeEvent()),this}removeAll(z=!0){return this.engine.nodes.forEach(oe=>{delete oe.el.gridstackNode,this._removeDD(oe.el)}),this.engine.removeAll(z),this._triggerRemoveEvent(),this}setAnimation(z){return z?this.el.classList.add("grid-stack-animate"):this.el.classList.remove("grid-stack-animate"),this}setStatic(z,oe=!0,se=!0){return this.opts.staticGrid===z?this:(this.opts.staticGrid=z,this._setupRemoveDrop(),this._setupAcceptWidget(),this.engine.nodes.forEach(ae=>{this._prepareDragDropByNode(ae),ae.subGrid&&se&&ae.subGrid.setStatic(z,oe,se)}),oe&&this._setStaticClass(),this)}update(z,oe){if(arguments.length>2){console.warn("gridstack.ts: `update(el, x, y, w, h)` is deprecated. Use `update(el, {x, w, content, ...})`. It will be removed soon");let se=arguments,ae=1;return oe={x:se[ae++],y:se[ae++],w:se[ae++],h:se[ae++]},this.update(z,oe)}return J.getElements(z).forEach(se=>{if(!se||!se.gridstackNode)return;let ae=se.gridstackNode,ge=S.Utils.cloneDeep(oe);delete ge.autoPosition;let pe=["x","y","w","h"],he;if(pe.some(Re=>ge[Re]!==void 0&&ge[Re]!==ae[Re])&&(he={},pe.forEach(Re=>{he[Re]=ge[Re]!==void 0?ge[Re]:ae[Re],delete ge[Re]})),!he&&(ge.minW||ge.minH||ge.maxW||ge.maxH)&&(he={}),ge.content){let Re=se.querySelector(".grid-stack-item-content");Re&&Re.innerHTML!==ge.content&&(Re.innerHTML=ge.content),delete ge.content}let ve=!1,be=!1;for(const Re in ge)Re[0]!=="_"&&ae[Re]!==ge[Re]&&(ae[Re]=ge[Re],ve=!0,be=be||!this.opts.staticGrid&&(Re==="noResize"||Re==="noMove"||Re==="locked"));he&&(this.engine.cleanNodes().beginUpdate(ae).moveNode(ae,he),this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate()),ve&&this._writeAttr(se,ae),be&&this._prepareDragDropByNode(ae)}),this}margin(z){if(!(typeof z=="string"&&z.split(" ").length>1)){let se=S.Utils.parseHeight(z);if(this.opts.marginUnit===se.unit&&this.opts.margin===se.h)return}return this.opts.margin=z,this.opts.marginTop=this.opts.marginBottom=this.opts.marginLeft=this.opts.marginRight=void 0,this._initMargin(),this._updateStyles(!0),this}getMargin(){return this.opts.margin}willItFit(z){if(arguments.length>1){console.warn("gridstack.ts: `willItFit(x,y,w,h,autoPosition)` is deprecated. Use `willItFit({x, y,...})`. It will be removed soon");let oe=arguments,se=0,ae={x:oe[se++],y:oe[se++],w:oe[se++],h:oe[se++],autoPosition:oe[se++]};return this.willItFit(ae)}return this.engine.willItFit(z)}_triggerChangeEvent(){if(this.engine.batchMode)return this;let z=this.engine.getDirtyNodes(!0);return z&&z.length&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(z),this._triggerEvent("change",z)),this.engine.saveInitial(),this}_triggerAddEvent(){return this.engine.batchMode?this:(this.engine.addedNodes&&this.engine.addedNodes.length>0&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(this.engine.addedNodes),this.engine.addedNodes.forEach(z=>{delete z._dirty}),this._triggerEvent("added",this.engine.addedNodes),this.engine.addedNodes=[]),this)}_triggerRemoveEvent(){return this.engine.batchMode?this:(this.engine.removedNodes&&this.engine.removedNodes.length>0&&(this._triggerEvent("removed",this.engine.removedNodes),this.engine.removedNodes=[]),this)}_triggerEvent(z,oe){let se=oe?new CustomEvent(z,{bubbles:!1,detail:oe}):new Event(z);return this.el.dispatchEvent(se),this}_removeStylesheet(){return this._styles&&(S.Utils.removeStylesheet(this._styleSheetClass),delete this._styles),this}_updateStyles(z=!1,oe){if(z&&this._removeStylesheet(),oe||(oe=this.getRow()),this._updateContainerHeight(),this.opts.cellHeight===0)return this;let se=this.opts.cellHeight,ae=this.opts.cellHeightUnit,ge=`.${this._styleSheetClass} > .${this.opts.itemClass}`;if(!this._styles){let pe=this.opts.styleInHead?void 0:this.el.parentNode;if(this._styles=S.Utils.createStylesheet(this._styleSheetClass,pe,{nonce:this.opts.nonce}),!this._styles)return this;this._styles._max=0,S.Utils.addCSSRule(this._styles,ge,`min-height: ${se}${ae}`);let he=this.opts.marginTop+this.opts.marginUnit,ve=this.opts.marginBottom+this.opts.marginUnit,be=this.opts.marginRight+this.opts.marginUnit,Re=this.opts.marginLeft+this.opts.marginUnit,Fe=`${ge} > .grid-stack-item-content`,ye=`.${this._styleSheetClass} > .grid-stack-placeholder > .placeholder-content`;S.Utils.addCSSRule(this._styles,Fe,`top: ${he}; right: ${be}; bottom: ${ve}; left: ${Re};`),S.Utils.addCSSRule(this._styles,ye,`top: ${he}; right: ${be}; bottom: ${ve}; left: ${Re};`),S.Utils.addCSSRule(this._styles,`${ge} > .ui-resizable-ne`,`right: ${be}`),S.Utils.addCSSRule(this._styles,`${ge} > .ui-resizable-e`,`right: ${be}`),S.Utils.addCSSRule(this._styles,`${ge} > .ui-resizable-se`,`right: ${be}; bottom: ${ve}`),S.Utils.addCSSRule(this._styles,`${ge} > .ui-resizable-nw`,`left: ${Re}`),S.Utils.addCSSRule(this._styles,`${ge} > .ui-resizable-w`,`left: ${Re}`),S.Utils.addCSSRule(this._styles,`${ge} > .ui-resizable-sw`,`left: ${Re}; bottom: ${ve}`)}if(oe=oe||this._styles._max,oe>this._styles._max){let pe=he=>se*he+ae;for(let he=this._styles._max+1;he<=oe;he++){let ve=pe(he);S.Utils.addCSSRule(this._styles,`${ge}[gs-y="${he-1}"]`,`top: ${pe(he-1)}`),S.Utils.addCSSRule(this._styles,`${ge}[gs-h="${he}"]`,`height: ${ve}`),S.Utils.addCSSRule(this._styles,`${ge}[gs-min-h="${he}"]`,`min-height: ${ve}`),S.Utils.addCSSRule(this._styles,`${ge}[gs-max-h="${he}"]`,`max-height: ${ve}`)}this._styles._max=oe}return this}_updateContainerHeight(){if(!this.engine||this.engine.batchMode)return this;let z=this.getRow()+this._extraDragRow;if(this.el.setAttribute("gs-current-row",String(z)),z===0)return this.el.style.removeProperty("min-height"),this;let oe=this.opts.cellHeight,se=this.opts.cellHeightUnit;return oe?(this.el.style.minHeight=z*oe+se,this):this}_prepareElement(z,oe=!1,se){z.classList.add(this.opts.itemClass),se=se||this._readAttr(z),z.gridstackNode=se,se.el=z,se.grid=this;let ae=Object.assign({},se);return se=this.engine.addNode(se,oe),S.Utils.same(se,ae)||this._writeAttr(z,se),this._prepareDragDropByNode(se),this}_writePosAttr(z,oe){return oe.x!==void 0&&oe.x!==null&&z.setAttribute("gs-x",String(oe.x)),oe.y!==void 0&&oe.y!==null&&z.setAttribute("gs-y",String(oe.y)),oe.w&&z.setAttribute("gs-w",String(oe.w)),oe.h&&z.setAttribute("gs-h",String(oe.h)),this}_writeAttr(z,oe){if(!oe)return this;this._writePosAttr(z,oe);let se={autoPosition:"gs-auto-position",minW:"gs-min-w",minH:"gs-min-h",maxW:"gs-max-w",maxH:"gs-max-h",noResize:"gs-no-resize",noMove:"gs-no-move",locked:"gs-locked",id:"gs-id"};for(const ae in se)oe[ae]?z.setAttribute(se[ae],String(oe[ae])):z.removeAttribute(se[ae]);return this}_readAttr(z){let oe={};oe.x=S.Utils.toNumber(z.getAttribute("gs-x")),oe.y=S.Utils.toNumber(z.getAttribute("gs-y")),oe.w=S.Utils.toNumber(z.getAttribute("gs-w")),oe.h=S.Utils.toNumber(z.getAttribute("gs-h")),oe.maxW=S.Utils.toNumber(z.getAttribute("gs-max-w")),oe.minW=S.Utils.toNumber(z.getAttribute("gs-min-w")),oe.maxH=S.Utils.toNumber(z.getAttribute("gs-max-h")),oe.minH=S.Utils.toNumber(z.getAttribute("gs-min-h")),oe.autoPosition=S.Utils.toBool(z.getAttribute("gs-auto-position")),oe.noResize=S.Utils.toBool(z.getAttribute("gs-no-resize")),oe.noMove=S.Utils.toBool(z.getAttribute("gs-no-move")),oe.locked=S.Utils.toBool(z.getAttribute("gs-locked")),oe.id=z.getAttribute("gs-id");for(const se in oe){if(!oe.hasOwnProperty(se))return;!oe[se]&&oe[se]!==0&&delete oe[se]}return oe}_setStaticClass(){let z=["grid-stack-static"];return this.opts.staticGrid?(this.el.classList.add(...z),this.el.setAttribute("gs-static","true")):(this.el.classList.remove(...z),this.el.removeAttribute("gs-static")),this}onParentResize(){if(!this.el||!this.el.clientWidth)return;let z=!1;if(this._autoColumn&&this.parentGridItem)this.opts.column!==this.parentGridItem.w&&(z=!0,this.column(this.parentGridItem.w,"none"));else{let oe=!this.opts.disableOneColumnMode&&this.el.clientWidth<=this.opts.oneColumnSize;this.opts.column===1!==oe&&(z=!0,this.opts.animate&&this.setAnimation(!1),this.column(oe?1:this._prevColumn),this.opts.animate&&this.setAnimation(!0))}return this._isAutoCellHeight&&(!z&&this.opts.cellHeightThrottle?(this._cellHeightThrottle||(this._cellHeightThrottle=S.Utils.throttle(()=>this.cellHeight(),this.opts.cellHeightThrottle)),this._cellHeightThrottle()):this.cellHeight()),this.engine.nodes.forEach(oe=>{oe.subGrid&&oe.subGrid.onParentResize()}),this}_updateWindowResizeEvent(z=!1){const oe=(this._isAutoCellHeight||!this.opts.disableOneColumnMode)&&!this.parentGridItem;return!z&&oe&&!this._windowResizeBind?(this._windowResizeBind=this.onParentResize.bind(this),window.addEventListener("resize",this._windowResizeBind)):(z||!oe)&&this._windowResizeBind&&(window.removeEventListener("resize",this._windowResizeBind),delete this._windowResizeBind),this}static getElement(z=".grid-stack-item"){return S.Utils.getElement(z)}static getElements(z=".grid-stack-item"){return S.Utils.getElements(z)}static getGridElement(z){return J.getElement(z)}static getGridElements(z){return S.Utils.getElements(z)}_initMargin(){let z,oe=0,se=[];return typeof this.opts.margin=="string"&&(se=this.opts.margin.split(" ")),se.length===2?(this.opts.marginTop=this.opts.marginBottom=se[0],this.opts.marginLeft=this.opts.marginRight=se[1]):se.length===4?(this.opts.marginTop=se[0],this.opts.marginRight=se[1],this.opts.marginBottom=se[2],this.opts.marginLeft=se[3]):(z=S.Utils.parseHeight(this.opts.margin),this.opts.marginUnit=z.unit,oe=this.opts.margin=z.h),this.opts.marginTop===void 0?this.opts.marginTop=oe:(z=S.Utils.parseHeight(this.opts.marginTop),this.opts.marginTop=z.h,delete this.opts.margin),this.opts.marginBottom===void 0?this.opts.marginBottom=oe:(z=S.Utils.parseHeight(this.opts.marginBottom),this.opts.marginBottom=z.h,delete this.opts.margin),this.opts.marginRight===void 0?this.opts.marginRight=oe:(z=S.Utils.parseHeight(this.opts.marginRight),this.opts.marginRight=z.h,delete this.opts.margin),this.opts.marginLeft===void 0?this.opts.marginLeft=oe:(z=S.Utils.parseHeight(this.opts.marginLeft),this.opts.marginLeft=z.h,delete this.opts.margin),this.opts.marginUnit=z.unit,this.opts.marginTop===this.opts.marginBottom&&this.opts.marginLeft===this.opts.marginRight&&this.opts.marginTop===this.opts.marginRight&&(this.opts.margin=this.opts.marginTop),this}static getDD(){return H}static setupDragIn(z,oe){(oe==null?void 0:oe.pause)!==void 0&&(P.DDManager.pauseDrag=oe.pause),typeof z=="string"&&(oe=Object.assign(Object.assign({},T.dragInDefaultOptions),oe||{}),S.Utils.getElements(z).forEach(se=>{H.isDraggable(se)||H.dragIn(se,oe)}))}movable(z,oe){return this.opts.staticGrid?this:(J.getElements(z).forEach(se=>{let ae=se.gridstackNode;ae&&(oe?delete ae.noMove:ae.noMove=!0,this._prepareDragDropByNode(ae))}),this)}resizable(z,oe){return this.opts.staticGrid?this:(J.getElements(z).forEach(se=>{let ae=se.gridstackNode;ae&&(oe?delete ae.noResize:ae.noResize=!0,this._prepareDragDropByNode(ae))}),this)}disable(z=!0){if(!this.opts.staticGrid)return this.enableMove(!1,z),this.enableResize(!1,z),this._triggerEvent("disable"),this}enable(z=!0){if(!this.opts.staticGrid)return this.enableMove(!0,z),this.enableResize(!0,z),this._triggerEvent("enable"),this}enableMove(z,oe=!0){return this.opts.staticGrid?this:(this.opts.disableDrag=!z,this.engine.nodes.forEach(se=>{this.movable(se.el,z),se.subGrid&&oe&&se.subGrid.enableMove(z,oe)}),this)}enableResize(z,oe=!0){return this.opts.staticGrid?this:(this.opts.disableResize=!z,this.engine.nodes.forEach(se=>{this.resizable(se.el,z),se.subGrid&&oe&&se.subGrid.enableResize(z,oe)}),this)}_removeDD(z){return H.draggable(z,"destroy").resizable(z,"destroy"),z.gridstackNode&&delete z.gridstackNode._initDD,delete z.ddElement,this}_setupAcceptWidget(){if(this.opts.staticGrid||!this.opts.acceptWidgets&&!this.opts.removable)return H.droppable(this.el,"destroy"),this;let z,oe,se=(ae,ge,pe)=>{let he=ge.gridstackNode;if(!he)return;pe=pe||ge;let ve=this.el.getBoundingClientRect(),{top:be,left:Re}=pe.getBoundingClientRect();Re-=ve.left,be-=ve.top;let Fe={position:{top:be,left:Re}};if(he._temporaryRemoved){if(he.x=Math.max(0,Math.round(Re/oe)),he.y=Math.max(0,Math.round(be/z)),delete he.autoPosition,this.engine.nodeBoundFix(he),!this.engine.willItFit(he)){if(he.autoPosition=!0,!this.engine.willItFit(he)){H.off(ge,"drag");return}he._willFitPos&&(S.Utils.copyPos(he,he._willFitPos),delete he._willFitPos)}this._onStartMoving(pe,ae,Fe,he,oe,z)}else this._dragOrResize(pe,ae,Fe,he,oe,z)};return H.droppable(this.el,{accept:ae=>{let ge=ae.gridstackNode;if((ge==null?void 0:ge.grid)===this)return!0;if(!this.opts.acceptWidgets)return!1;let pe=!0;if(typeof this.opts.acceptWidgets=="function")pe=this.opts.acceptWidgets(ae);else{let he=this.opts.acceptWidgets===!0?".grid-stack-item":this.opts.acceptWidgets;pe=ae.matches(he)}if(pe&&ge&&this.opts.maxRow){let he={w:ge.w,h:ge.h,minW:ge.minW,minH:ge.minH};pe=this.engine.willItFit(he)}return pe}}).on(this.el,"dropover",(ae,ge,pe)=>{let he=ge.gridstackNode;if((he==null?void 0:he.grid)===this&&!he._temporaryRemoved)return!1;he!=null&&he.grid&&he.grid!==this&&!he._temporaryRemoved&&he.grid._leave(ge,pe),oe=this.cellWidth(),z=this.getCellHeight(!0),he||(he=this._readAttr(ge)),he.grid||(he._isExternal=!0,ge.gridstackNode=he),pe=pe||ge;let ve=he.w||Math.round(pe.offsetWidth/oe)||1,be=he.h||Math.round(pe.offsetHeight/z)||1;return he.grid&&he.grid!==this?(ge._gridstackNodeOrig||(ge._gridstackNodeOrig=he),ge.gridstackNode=he=Object.assign(Object.assign({},he),{w:ve,h:be,grid:this}),this.engine.cleanupNode(he).nodeBoundFix(he),he._initDD=he._isExternal=he._temporaryRemoved=!0):(he.w=ve,he.h=be,he._temporaryRemoved=!0),this._itemRemoving(he.el,!1),H.on(ge,"drag",se),se(ae,ge,pe),!1}).on(this.el,"dropout",(ae,ge,pe)=>{let he=ge.gridstackNode;return he&&(!he.grid||he.grid===this)&&(this._leave(ge,pe),this._isTemp&&this.removeAsSubGrid(he)),!1}).on(this.el,"drop",(ae,ge,pe)=>{var he,ve;let be=ge.gridstackNode;if((be==null?void 0:be.grid)===this&&!be._isExternal)return!1;let Re=!!this.placeholder.parentElement;this.placeholder.remove();let Fe=ge._gridstackNodeOrig;if(delete ge._gridstackNodeOrig,Re&&(Fe!=null&&Fe.grid)&&Fe.grid!==this){let Ue=Fe.grid;Ue.engine.removedNodes.push(Fe),Ue._triggerRemoveEvent()._triggerChangeEvent(),Ue.parentGridItem&&!Ue.engine.nodes.length&&Ue.opts.subGridDynamic&&Ue.removeAsSubGrid()}if(!be||(Re&&(this.engine.cleanupNode(be),be.grid=this),H.off(ge,"drag"),pe!==ge?(pe.remove(),ge.gridstackNode=Fe,Re&&(ge=ge.cloneNode(!0))):(ge.remove(),this._removeDD(ge)),!Re))return!1;ge.gridstackNode=be,be.el=ge;let ye=(ve=(he=be.subGrid)===null||he===void 0?void 0:he.el)===null||ve===void 0?void 0:ve.gridstack;return S.Utils.copyPos(be,this._readAttr(this.placeholder)),S.Utils.removePositioningStyles(ge),this._writeAttr(ge,be),ge.classList.add(T.gridDefaults.itemClass,this.opts.itemClass),this.el.appendChild(ge),ye&&(ye.parentGridItem=be,ye.opts.styleInHead||ye._updateStyles(!0)),this._updateContainerHeight(),this.engine.addedNodes.push(be),this._triggerAddEvent(),this._triggerChangeEvent(),this.engine.endUpdate(),this._gsEventHandler.dropped&&this._gsEventHandler.dropped(Object.assign(Object.assign({},ae),{type:"dropped"}),Fe&&Fe.grid?Fe:void 0,be),window.setTimeout(()=>{be.el&&be.el.parentElement?this._prepareDragDropByNode(be):this.engine.removeNode(be),delete be.grid._isTemp}),!1}),this}_itemRemoving(z,oe){let se=z?z.gridstackNode:void 0;!se||!se.grid||(oe?se._isAboutToRemove=!0:delete se._isAboutToRemove,oe?z.classList.add("grid-stack-item-removing"):z.classList.remove("grid-stack-item-removing"))}_setupRemoveDrop(){if(!this.opts.staticGrid&&typeof this.opts.removable=="string"){let z=document.querySelector(this.opts.removable);if(!z)return this;H.isDroppable(z)||H.droppable(z,this.opts.removableOptions).on(z,"dropover",(oe,se)=>this._itemRemoving(se,!0)).on(z,"dropout",(oe,se)=>this._itemRemoving(se,!1))}return this}_prepareDragDropByNode(z){let oe=z.el;const se=z.noMove||this.opts.disableDrag,ae=z.noResize||this.opts.disableResize;if(this.opts.staticGrid||se&&ae)return z._initDD&&(this._removeDD(oe),delete z._initDD),oe.classList.add("ui-draggable-disabled","ui-resizable-disabled"),this;if(!z._initDD){let ge,pe,he=(Re,Fe)=>{this._gsEventHandler[Re.type]&&this._gsEventHandler[Re.type](Re,Re.target),ge=this.cellWidth(),pe=this.getCellHeight(!0),this._onStartMoving(oe,Re,Fe,z,ge,pe)},ve=(Re,Fe)=>{this._dragOrResize(oe,Re,Fe,z,ge,pe)},be=Re=>{this.placeholder.remove(),delete z._moving,delete z._event,delete z._lastTried;let Fe=Re.target;if(!(!Fe.gridstackNode||Fe.gridstackNode.grid!==this)){if(z.el=Fe,z._isAboutToRemove){let ye=oe.gridstackNode.grid;ye._gsEventHandler[Re.type]&&ye._gsEventHandler[Re.type](Re,Fe),this._removeDD(oe),ye.engine.removedNodes.push(z),ye._triggerRemoveEvent(),delete oe.gridstackNode,delete z.el,oe.remove()}else S.Utils.removePositioningStyles(Fe),z._temporaryRemoved?(S.Utils.copyPos(z,z._orig),this._writePosAttr(Fe,z),this.engine.addNode(z)):this._writePosAttr(Fe,z),this._gsEventHandler[Re.type]&&this._gsEventHandler[Re.type](Re,Fe);this._extraDragRow=0,this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate()}};H.draggable(oe,{start:he,stop:be,drag:ve}).resizable(oe,{start:he,stop:be,resize:ve}),z._initDD=!0}return H.draggable(oe,se?"disable":"enable").resizable(oe,ae?"disable":"enable"),this}_onStartMoving(z,oe,se,ae,ge,pe){this.engine.cleanNodes().beginUpdate(ae),this._writePosAttr(this.placeholder,ae),this.el.appendChild(this.placeholder),ae.el=this.placeholder,ae._lastUiPosition=se.position,ae._prevYPix=se.position.top,ae._moving=oe.type==="dragstart",delete ae._lastTried,oe.type==="dropover"&&ae._temporaryRemoved&&(this.engine.addNode(ae),ae._moving=!0),this.engine.cacheRects(ge,pe,this.opts.marginTop,this.opts.marginRight,this.opts.marginBottom,this.opts.marginLeft),oe.type==="resizestart"&&(H.resizable(z,"option","minWidth",ge*(ae.minW||1)).resizable(z,"option","minHeight",pe*(ae.minH||1)),ae.maxW&&H.resizable(z,"option","maxWidth",ge*ae.maxW),ae.maxH&&H.resizable(z,"option","maxHeight",pe*ae.maxH))}_dragOrResize(z,oe,se,ae,ge,pe){let he=Object.assign({},ae._orig),ve,be=this.opts.marginLeft,Re=this.opts.marginRight,Fe=this.opts.marginTop,ye=this.opts.marginBottom,Ue=Math.round(pe*.1),It=Math.round(ge*.1);if(be=Math.min(be,It),Re=Math.min(Re,It),Fe=Math.min(Fe,Ue),ye=Math.min(ye,Ue),oe.type==="drag"){if(ae._temporaryRemoved)return;let At=se.position.top-ae._prevYPix;ae._prevYPix=se.position.top,this.opts.draggable.scroll!==!1&&S.Utils.updateScrollPosition(z,se.position,At);let xt=se.position.left+(se.position.left>ae._lastUiPosition.left?-Re:be),Ct=se.position.top+(se.position.top>ae._lastUiPosition.top?-ye:Fe);he.x=Math.round(xt/ge),he.y=Math.round(Ct/pe);let Nt=this._extraDragRow;if(this.engine.collide(ae,he)){let qt=this.getRow(),Jn=Math.max(0,he.y+ae.h-qt);this.opts.maxRow&&qt+Jn>this.opts.maxRow&&(Jn=Math.max(0,this.opts.maxRow-qt)),this._extraDragRow=Jn}else this._extraDragRow=0;if(this._extraDragRow!==Nt&&this._updateContainerHeight(),ae.x===he.x&&ae.y===he.y)return}else if(oe.type==="resize"){if(he.x<0||(S.Utils.updateScrollResize(oe,z,pe),he.w=Math.round((se.size.width-be)/ge),he.h=Math.round((se.size.height-Fe)/pe),ae.w===he.w&&ae.h===he.h)||ae._lastTried&&ae._lastTried.w===he.w&&ae._lastTried.h===he.h)return;let At=se.position.left+be,xt=se.position.top+Fe;he.x=Math.round(At/ge),he.y=Math.round(xt/pe),ve=!0}ae._event=oe,ae._lastTried=he;let St={x:se.position.left+be,y:se.position.top+Fe,w:(se.size?se.size.width:ae.w*ge)-be-Re,h:(se.size?se.size.height:ae.h*pe)-Fe-ye};if(this.engine.moveNodeCheck(ae,Object.assign(Object.assign({},he),{cellWidth:ge,cellHeight:pe,rect:St,resizing:ve}))){ae._lastUiPosition=se.position,this.engine.cacheRects(ge,pe,Fe,Re,ye,be),delete ae._skipDown,ve&&ae.subGrid&&ae.subGrid.onParentResize(),this._extraDragRow=0,this._updateContainerHeight();let At=oe.target;this._writePosAttr(At,ae),this._gsEventHandler[oe.type]&&this._gsEventHandler[oe.type](oe,At)}}_leave(z,oe){let se=z.gridstackNode;se&&(H.off(z,"drag"),!se._temporaryRemoved&&(se._temporaryRemoved=!0,this.engine.removeNode(se),se.el=se._isExternal&&oe?oe:z,this.opts.removable===!0&&this._itemRemoving(z,!0),z._gridstackNodeOrig?(z.gridstackNode=z._gridstackNodeOrig,delete z._gridstackNodeOrig):se._isExternal&&(delete se.el,delete z.gridstackNode,this.engine.restoreInitial())))}commit(){return S.obsolete(this,this.batchUpdate(!1),"commit","batchUpdate","5.2"),this}}f.GridStack=J,J.Utils=S.Utils,J.Engine=_.GridStackEngine,J.GDRev="7.3.0"})(gridstack);function clearPosition(f){f.style.position="",f.style.left="",f.style.right="",f.style.top="",f.style.bottom="",f.style.width="",f.style.height=""}class GridStackManager{constructor(s){Bt(this,"cellHeight",150);Bt(this,"cellApproxWidth",300);Bt(this,"grids");Bt(this,"dragHandle",".ciview-chart-title");Bt(this,"chartManager");this.grids=new Map,this.chartManager=s}getGrid(s){if(!this.grids.has(s)){const d=s.contentDiv;d.classList.add("grid-stack");const _=d.getBoundingClientRect(),S=Math.round(_.width/this.cellApproxWidth);console.log(S);const T=Math.round(_.height/this.cellHeight);this.cellHeight=_.height/T,console.log("gridstack cellHeight",this.cellHeight);const F=gridstack.GridStack.init({cellHeight:this.cellHeight,handle:this.dragHandle,float:!0,oneColumnSize:400},d);F.on("resizestop",(P,H)=>{H instanceof HTMLElement&&(H.style.filter="")}),F.on("resizestart",(P,H)=>{H instanceof HTMLElement&&(H.style.filter="blur(1px) opacity(0.5)")});const M=this.chartManager.addMenuIcon(s.name,"fas fa-compress-arrows-alt","compact layout",()=>F.compact());this.grids.set(s,{grid:F,charts:new Set,icon:M})}return this.grids.get(s)}destroy(s){if(!this.grids.has(s)){console.error(`destroying non-existent gridstack - ${s.name}`);return}const d=this.grids.get(s),_=s.contentDiv,S=new Map;for(const T of d.charts){const F=T.getDiv();S.set(F,[F.offsetWidth,F.offsetHeight,F.offsetLeft,F.offsetTop]),T.removeLayout(),T.config.gssize=void 0,T.config.gsposition=void 0}d.grid.destroy(!1);for(const T of d.charts){const F=T.getDiv(),M=S.get(F);F.style.position="absolute",F.style.width=`${M[0]-5}px`,F.style.height=`${M[1]-5}px`,F.style.left=`${M[2]}px`,F.style.top=`${M[3]}px`,T.config.size=[M[0]-5,M[1]-5],T.config.position=[M[2],M[3]],F.classList.remove("grid-stack-item")}_.classList.remove("grid-stack"),d.icon.remove(),this.grids.delete(s)}getCellDimensions(s){return[this.getGrid(s).grid.cellWidth(),this.cellHeight]}manageChart(s,d,_){const S=this.getGrid(d),T=S.grid;S.charts.add(s);const F=s.getDiv(),M=F.getBoundingClientRect();let P=Math.round(M.width/T.cellWidth()),H=Math.round(M.height/this.cellHeight),J=Math.round(F.offsetLeft/T.cellWidth());J=J>11?11:J;let K=Math.floor(F.offsetTop/this.cellHeight);s.config.gsposition&&([J,K]=s.config.gsposition,[P,H]=s.config.gssize,_=!1),clearPosition(F),F.style.transition="filter 0.5s ease";const z=new ResizeObserver(debounce$2(()=>{try{s.setSize()}catch{}},20));z.observe(F),T.makeWidget(F),_?T.update(F,{w:P,h:H}):(console.log("gridstack:",s.config.type,{w:P,h:H,x:J,y:K}),T.update(F,{w:P,h:H,x:J,y:K}));const oe=he(),se=ge(),ae=pe();function ge(){let be=!1;const Re=s.addMenuIcon("fas fa-unlock","lock position"),Fe=Re.children[0];return Re.addEventListener("click",()=>{be=!be,Fe.classList.toggle("fa-lock",be),Fe.classList.toggle("fa-unlock",!be),T.update(F,{locked:be}),F.classList.toggle("gridLock",be)}),Re}function pe(){const{remove:be}=s;return s.remove=()=>{T.removeWidget(F,!0),S.charts.delete(s),be.apply(s)},be}function he(){const{changeBaseDocument:be}=s;return F.gridstackPopoutCallback=()=>{T.removeWidget(F,!0)},s.changeBaseDocument=Re=>{be.apply(s,[Re]),Re===document&&console.error("changeBaseDocument should be restored to normal by the time we get here..."),ve()},be}function ve(){T.removeWidget(F,!0),s.remove=ae,s.changeBaseDocument=oe}s.removeLayout=()=>{T.removeWidget(F,!1),se.remove(),F.gridstackPopoutCallback=void 0,s.remove=ae,s.changeBaseDocument=oe,z.disconnect()}}}function getVisibleChartBounds(f){return Object.entries(window.mdv.chartManager.charts).filter(d=>d[1].dataSource===f).map(d=>d[1].chart.getDiv().getBoundingClientRect())}function getGridInfo(f){const[s,d]=window.mdv.chartManager.gridStack.getCellDimensions(f),_=f.contentDiv.getBoundingClientRect(),S=Math.floor(_.height/d)*2,T=Math.floor(_.width/s);return{cellW:s,cellH:d/2,rows:S,cols:T}}function findFreeSpace(f){const s=getVisibleChartBounds(f),{cellW:d,cellH:_,rows:S,cols:T}=getGridInfo(f),F=f.contentDiv.getBoundingClientRect(),M=2,P=1,H=new Array(S);for(let J=0;J<S;J++)H[J]=new Array(T).fill(!1);for(const J of s){const K=Math.floor((J.left-F.left)/d),z=Math.floor((J.top-F.top)/_),oe=Math.min(T,Math.ceil((J.right-F.left)/d)),se=Math.min(S,Math.ceil((J.bottom-F.top)/_));for(let ae=z;ae<se;ae++)for(let ge=K;ge<oe;ge++)H[ae][ge]=!0}for(let J=0;J<=S-P;J++)for(let K=0;K<=T-M;K++){let z=!0;for(let oe=0;oe<P&&z;oe++)for(let se=0;se<M&&z;se++)H[J+oe][K+se]&&(z=!1);if(z)return{left:K*d,top:J*_}}return{left:10,top:10}}function positionChart(f,s){let d=300,_=300,S=10,T=10;s.size&&(d=s.size[0],_=s.size[1]);const{chartManager:F}=window.mdv;if(s.position)S=s.position[0],T=s.position[1];else try{const M=findFreeSpace(f);S=M.left,T=M.top}catch(M){console.error(M)}if(F.viewData.dataSources[f.name].layout==="gridstack"&&s.gssize){const M=F.gridStack.getCellDimensions(f);d=Math.round(s.gssize[0]*M[0]),_=Math.round(s.gssize[1]*M[1]),S=Math.round(s.gsposition[0]*(M[0]+5)),T=Math.floor(s.gsposition[1]*(M[1]+5))}return{width:d,height:_,left:S,top:T}}function __awaiter(f,s,d,_){function S(T){return T instanceof d?T:new d(function(F){F(T)})}return new(d||(d=Promise))(function(T,F){function M(J){try{H(_.next(J))}catch(K){F(K)}}function P(J){try{H(_.throw(J))}catch(K){F(K)}}function H(J){J.done?T(J.value):S(J.value).then(M,P)}H((_=_.apply(f,s||[])).next())})}function __generator(f,s){var d={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},_,S,T,F=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return F.next=M(0),F.throw=M(1),F.return=M(2),typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function M(H){return function(J){return P([H,J])}}function P(H){if(_)throw new TypeError("Generator is already executing.");for(;F&&(F=0,H[0]&&(d=0)),d;)try{if(_=1,S&&(T=H[0]&2?S.return:H[0]?S.throw||((T=S.return)&&T.call(S),0):S.next)&&!(T=T.call(S,H[1])).done)return T;switch(S=0,T&&(H=[H[0]&2,T.value]),H[0]){case 0:case 1:T=H;break;case 4:return d.label++,{value:H[1],done:!1};case 5:d.label++,S=H[1],H=[0];continue;case 7:H=d.ops.pop(),d.trys.pop();continue;default:if(T=d.trys,!(T=T.length>0&&T[T.length-1])&&(H[0]===6||H[0]===2)){d=0;continue}if(H[0]===3&&(!T||H[1]>T[0]&&H[1]<T[3])){d.label=H[1];break}if(H[0]===6&&d.label<T[1]){d.label=T[1],T=H;break}if(T&&d.label<T[2]){d.label=T[2],d.ops.push(H);break}T[2]&&d.ops.pop(),d.trys.pop();continue}H=s.call(f,d)}catch(J){H=[6,J],S=0}finally{_=T=0}if(H[0]&5)throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}}function __read(f,s){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var _=d.call(f),S,T=[],F;try{for(;(s===void 0||s-- >0)&&!(S=_.next()).done;)T.push(S.value)}catch(M){F={error:M}}finally{try{S&&!S.done&&(d=_.return)&&d.call(_)}finally{if(F)throw F.error}}return T}function __spreadArray(f,s,d){if(d||arguments.length===2)for(var _=0,S=s.length,T;_<S;_++)(T||!(_ in s))&&(T||(T=Array.prototype.slice.call(s,0,_)),T[_]=s[_]);return f.concat(T||Array.prototype.slice.call(s))}typeof SuppressedError=="function"&&SuppressedError;var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(f,s){var d=withMimeType(f);if(typeof d.path!="string"){var _=f.webkitRelativePath;Object.defineProperty(d,"path",{value:typeof s=="string"?s:typeof _=="string"&&_.length>0?_:f.name,writable:!1,configurable:!1,enumerable:!0})}return d}function withMimeType(f){var s=f.name,d=s&&s.lastIndexOf(".")!==-1;if(d&&!f.type){var _=s.split(".").pop().toLowerCase(),S=COMMON_MIME_TYPES.get(_);S&&Object.defineProperty(f,"type",{value:S,writable:!1,configurable:!1,enumerable:!0})}return f}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(f){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(s){return isObject$1(f)&&isDataTransfer(f.dataTransfer)?[2,getDataTransferFiles(f.dataTransfer,f.type)]:isChangeEvt(f)?[2,getInputFiles(f)]:Array.isArray(f)&&f.every(function(d){return"getFile"in d&&typeof d.getFile=="function"})?[2,getFsHandleFiles(f)]:[2,[]]})})}function isDataTransfer(f){return isObject$1(f)}function isChangeEvt(f){return isObject$1(f)&&isObject$1(f.target)}function isObject$1(f){return typeof f=="object"&&f!==null}function getInputFiles(f){return fromList(f.target.files).map(function(s){return toFileWithPath(s)})}function getFsHandleFiles(f){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(d){switch(d.label){case 0:return[4,Promise.all(f.map(function(_){return _.getFile()}))];case 1:return s=d.sent(),[2,s.map(function(_){return toFileWithPath(_)})]}})})}function getDataTransferFiles(f,s){return __awaiter(this,void 0,void 0,function(){var d,_;return __generator(this,function(S){switch(S.label){case 0:return f.items?(d=fromList(f.items).filter(function(T){return T.kind==="file"}),s!=="drop"?[2,d]:[4,Promise.all(d.map(toFilePromises))]):[3,2];case 1:return _=S.sent(),[2,noIgnoredFiles(flatten(_))];case 2:return[2,noIgnoredFiles(fromList(f.files).map(function(T){return toFileWithPath(T)}))]}})})}function noIgnoredFiles(f){return f.filter(function(s){return FILES_TO_IGNORE.indexOf(s.name)===-1})}function fromList(f){if(f===null)return[];for(var s=[],d=0;d<f.length;d++){var _=f[d];s.push(_)}return s}function toFilePromises(f){if(typeof f.webkitGetAsEntry!="function")return fromDataTransferItem(f);var s=f.webkitGetAsEntry();return s&&s.isDirectory?fromDirEntry(s):fromDataTransferItem(f)}function flatten(f){return f.reduce(function(s,d){return __spreadArray(__spreadArray([],__read(s),!1),__read(Array.isArray(d)?flatten(d):[d]),!1)},[])}function fromDataTransferItem(f){var s=f.getAsFile();if(!s)return Promise.reject("".concat(f," is not a File"));var d=toFileWithPath(s);return Promise.resolve(d)}function fromEntry(f){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(s){return[2,f.isDirectory?fromDirEntry(f):fromFileEntry(f)]})})}function fromDirEntry(f){var s=f.createReader();return new Promise(function(d,_){var S=[];function T(){var F=this;s.readEntries(function(M){return __awaiter(F,void 0,void 0,function(){var P,H,J;return __generator(this,function(K){switch(K.label){case 0:if(M.length)return[3,5];K.label=1;case 1:return K.trys.push([1,3,,4]),[4,Promise.all(S)];case 2:return P=K.sent(),d(P),[3,4];case 3:return H=K.sent(),_(H),[3,4];case 4:return[3,6];case 5:J=Promise.all(M.map(fromEntry)),S.push(J),T(),K.label=6;case 6:return[2]}})})},function(M){_(M)})}T()})}function fromFileEntry(f){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(s){return[2,new Promise(function(d,_){f.file(function(S){var T=toFileWithPath(S,f.fullPath);d(T)},function(S){_(S)})})]})})}var _default=function(f,s){if(f&&s){var d=Array.isArray(s)?s:s.split(",");if(d.length===0)return!0;var _=f.name||"",S=(f.type||"").toLowerCase(),T=S.replace(/\/.*$/,"");return d.some(function(F){var M=F.trim().toLowerCase();return M.charAt(0)==="."?_.toLowerCase().endsWith(M):M.endsWith("/*")?T===M.replace(/\/.*$/,""):S===M})}return!0};function _toConsumableArray$1(f){return _arrayWithoutHoles$1(f)||_iterableToArray$1(f)||_unsupportedIterableToArray$1(f)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}function _arrayWithoutHoles$1(f){if(Array.isArray(f))return _arrayLikeToArray$1(f)}function ownKeys$1(f,s){var d=Object.keys(f);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(f);s&&(_=_.filter(function(S){return Object.getOwnPropertyDescriptor(f,S).enumerable})),d.push.apply(d,_)}return d}function _objectSpread$1(f){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$1(Object(d),!0).forEach(function(_){_defineProperty$1(f,_,d[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(d)):ownKeys$1(Object(d)).forEach(function(_){Object.defineProperty(f,_,Object.getOwnPropertyDescriptor(d,_))})}return f}function _defineProperty$1(f,s,d){return s in f?Object.defineProperty(f,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):f[s]=d,f}function _slicedToArray$1(f,s){return _arrayWithHoles$1(f)||_iterableToArrayLimit$1(f,s)||_unsupportedIterableToArray$1(f,s)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(f,s){if(f){if(typeof f=="string")return _arrayLikeToArray$1(f,s);var d=Object.prototype.toString.call(f).slice(8,-1);if(d==="Object"&&f.constructor&&(d=f.constructor.name),d==="Map"||d==="Set")return Array.from(f);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return _arrayLikeToArray$1(f,s)}}function _arrayLikeToArray$1(f,s){(s==null||s>f.length)&&(s=f.length);for(var d=0,_=new Array(s);d<s;d++)_[d]=f[d];return _}function _iterableToArrayLimit$1(f,s){var d=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(d!=null){var _=[],S=!0,T=!1,F,M;try{for(d=d.call(f);!(S=(F=d.next()).done)&&(_.push(F.value),!(s&&_.length===s));S=!0);}catch(P){T=!0,M=P}finally{try{!S&&d.return!=null&&d.return()}finally{if(T)throw M}}return _}}function _arrayWithHoles$1(f){if(Array.isArray(f))return f}var accepts=typeof _default=="function"?_default:_default.default,FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function f(s){s=Array.isArray(s)&&s.length===1?s[0]:s;var d=Array.isArray(s)?"one of ".concat(s.join(", ")):s;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(d)}},getTooLargeRejectionErr=function f(s){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(s," ").concat(s===1?"byte":"bytes")}},getTooSmallRejectionErr=function f(s){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(s," ").concat(s===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(f,s){var d=f.type==="application/x-moz-file"||accepts(f,s);return[d,d?null:getInvalidTypeRejectionErr(s)]}function fileMatchSize(f,s,d){if(isDefined(f.size))if(isDefined(s)&&isDefined(d)){if(f.size>d)return[!1,getTooLargeRejectionErr(d)];if(f.size<s)return[!1,getTooSmallRejectionErr(s)]}else{if(isDefined(s)&&f.size<s)return[!1,getTooSmallRejectionErr(s)];if(isDefined(d)&&f.size>d)return[!1,getTooLargeRejectionErr(d)]}return[!0,null]}function isDefined(f){return f!=null}function allFilesAccepted(f){var s=f.files,d=f.accept,_=f.minSize,S=f.maxSize,T=f.multiple,F=f.maxFiles,M=f.validator;return!T&&s.length>1||T&&F>=1&&s.length>F?!1:s.every(function(P){var H=fileAccepted(P,d),J=_slicedToArray$1(H,1),K=J[0],z=fileMatchSize(P,_,S),oe=_slicedToArray$1(z,1),se=oe[0],ae=M?M(P):null;return K&&se&&!ae})}function isPropagationStopped(f){return typeof f.isPropagationStopped=="function"?f.isPropagationStopped():typeof f.cancelBubble<"u"?f.cancelBubble:!1}function isEvtWithFiles(f){return f.dataTransfer?Array.prototype.some.call(f.dataTransfer.types,function(s){return s==="Files"||s==="application/x-moz-file"}):!!f.target&&!!f.target.files}function onDocumentDragOver(f){f.preventDefault()}function isIe(f){return f.indexOf("MSIE")!==-1||f.indexOf("Trident/")!==-1}function isEdge(f){return f.indexOf("Edge/")!==-1}function isIeOrEdge(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(f)||isEdge(f)}function composeEventHandlers(){for(var f=arguments.length,s=new Array(f),d=0;d<f;d++)s[d]=arguments[d];return function(_){for(var S=arguments.length,T=new Array(S>1?S-1:0),F=1;F<S;F++)T[F-1]=arguments[F];return s.some(function(M){return!isPropagationStopped(_)&&M&&M.apply(void 0,[_].concat(T)),isPropagationStopped(_)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(f){if(isDefined(f)){var s=Object.entries(f).filter(function(d){var _=_slicedToArray$1(d,2),S=_[0],T=_[1],F=!0;return isMIMEType(S)||(console.warn('Skipped "'.concat(S,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),F=!1),(!Array.isArray(T)||!T.every(isExt))&&(console.warn('Skipped "'.concat(S,'" because an invalid file extension was provided.')),F=!1),F}).reduce(function(d,_){var S=_slicedToArray$1(_,2),T=S[0],F=S[1];return _objectSpread$1(_objectSpread$1({},d),{},_defineProperty$1({},T,F))},{});return[{description:"Files",accept:s}]}return f}function acceptPropAsAcceptAttr(f){if(isDefined(f))return Object.entries(f).reduce(function(s,d){var _=_slicedToArray$1(d,2),S=_[0],T=_[1];return[].concat(_toConsumableArray$1(s),[S],_toConsumableArray$1(T))},[]).filter(function(s){return isMIMEType(s)||isExt(s)}).join(",")}function isAbort(f){return f instanceof DOMException&&(f.name==="AbortError"||f.code===f.ABORT_ERR)}function isSecurityError(f){return f instanceof DOMException&&(f.name==="SecurityError"||f.code===f.SECURITY_ERR)}function isMIMEType(f){return f==="audio/*"||f==="video/*"||f==="image/*"||f==="text/*"||/\w+\/[-+.\w]+/g.test(f)}function isExt(f){return/^.*\.[\w]+$/.test(f)}var _excluded=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(f){return _arrayWithoutHoles(f)||_iterableToArray(f)||_unsupportedIterableToArray(f)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}function _arrayWithoutHoles(f){if(Array.isArray(f))return _arrayLikeToArray(f)}function _slicedToArray(f,s){return _arrayWithHoles(f)||_iterableToArrayLimit(f,s)||_unsupportedIterableToArray(f,s)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(f,s){if(f){if(typeof f=="string")return _arrayLikeToArray(f,s);var d=Object.prototype.toString.call(f).slice(8,-1);if(d==="Object"&&f.constructor&&(d=f.constructor.name),d==="Map"||d==="Set")return Array.from(f);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return _arrayLikeToArray(f,s)}}function _arrayLikeToArray(f,s){(s==null||s>f.length)&&(s=f.length);for(var d=0,_=new Array(s);d<s;d++)_[d]=f[d];return _}function _iterableToArrayLimit(f,s){var d=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(d!=null){var _=[],S=!0,T=!1,F,M;try{for(d=d.call(f);!(S=(F=d.next()).done)&&(_.push(F.value),!(s&&_.length===s));S=!0);}catch(P){T=!0,M=P}finally{try{!S&&d.return!=null&&d.return()}finally{if(T)throw M}}return _}}function _arrayWithHoles(f){if(Array.isArray(f))return f}function ownKeys(f,s){var d=Object.keys(f);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(f);s&&(_=_.filter(function(S){return Object.getOwnPropertyDescriptor(f,S).enumerable})),d.push.apply(d,_)}return d}function _objectSpread(f){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?ownKeys(Object(d),!0).forEach(function(_){_defineProperty(f,_,d[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(d)):ownKeys(Object(d)).forEach(function(_){Object.defineProperty(f,_,Object.getOwnPropertyDescriptor(d,_))})}return f}function _defineProperty(f,s,d){return s in f?Object.defineProperty(f,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):f[s]=d,f}function _objectWithoutProperties(f,s){if(f==null)return{};var d=_objectWithoutPropertiesLoose(f,s),_,S;if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(f);for(S=0;S<T.length;S++)_=T[S],!(s.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(f,_)&&(d[_]=f[_])}return d}function _objectWithoutPropertiesLoose(f,s){if(f==null)return{};var d={},_=Object.keys(f),S,T;for(T=0;T<_.length;T++)S=_[T],!(s.indexOf(S)>=0)&&(d[S]=f[S]);return d}var Dropzone=reactExports.forwardRef(function(f,s){var d=f.children,_=_objectWithoutProperties(f,_excluded),S=useDropzone(_),T=S.open,F=_objectWithoutProperties(S,_excluded2);return reactExports.useImperativeHandle(s,function(){return{open:T}},[T]),React$1.createElement(reactExports.Fragment,null,d(_objectSpread(_objectSpread({},F),{},{open:T})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=_objectSpread(_objectSpread({},defaultProps),f),d=s.accept,_=s.disabled,S=s.getFilesFromEvent,T=s.maxSize,F=s.minSize,M=s.multiple,P=s.maxFiles,H=s.onDragEnter,J=s.onDragLeave,K=s.onDragOver,z=s.onDrop,oe=s.onDropAccepted,se=s.onDropRejected,ae=s.onFileDialogCancel,ge=s.onFileDialogOpen,pe=s.useFsAccessApi,he=s.autoFocus,ve=s.preventDropOnDocument,be=s.noClick,Re=s.noKeyboard,Fe=s.noDrag,ye=s.noDragEventsBubbling,Ue=s.onError,It=s.validator,St=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(d)},[d]),At=reactExports.useMemo(function(){return pickerOptionsFromAccept(d)},[d]),xt=reactExports.useMemo(function(){return typeof ge=="function"?ge:noop$1},[ge]),Ct=reactExports.useMemo(function(){return typeof ae=="function"?ae:noop$1},[ae]),Nt=reactExports.useRef(null),qt=reactExports.useRef(null),Jn=reactExports.useReducer(reducer$1,initialState),qr=_slicedToArray(Jn,2),na=qr[0],qn=qr[1],vA=na.isFocused,TA=na.isFileDialogActive,VA=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&pe&&canUseFileSystemAccessAPI()),mI=function(){!VA.current&&TA&&setTimeout(function(){if(qt.current){var cA=qt.current.files;cA.length||(qn({type:"closeDialog"}),Ct())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",mI,!1),function(){window.removeEventListener("focus",mI,!1)}},[qt,TA,Ct,VA]);var jA=reactExports.useRef([]),aI=function(cA){Nt.current&&Nt.current.contains(cA.target)||(cA.preventDefault(),jA.current=[])};reactExports.useEffect(function(){return ve&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",aI,!1)),function(){ve&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",aI))}},[Nt,ve]),reactExports.useEffect(function(){return!_&&he&&Nt.current&&Nt.current.focus(),function(){}},[Nt,he,_]);var WA=reactExports.useCallback(function(QA){Ue?Ue(QA):console.error(QA)},[Ue]),KA=reactExports.useCallback(function(QA){QA.preventDefault(),QA.persist(),rI(QA),jA.current=[].concat(_toConsumableArray(jA.current),[QA.target]),isEvtWithFiles(QA)&&Promise.resolve(S(QA)).then(function(cA){if(!(isPropagationStopped(QA)&&!ye)){var gI=cA.length,LI=gI>0&&allFilesAccepted({files:cA,accept:St,minSize:F,maxSize:T,multiple:M,maxFiles:P,validator:It}),da=gI>0&&!LI;qn({isDragAccept:LI,isDragReject:da,isDragActive:!0,type:"setDraggedFiles"}),H&&H(QA)}}).catch(function(cA){return WA(cA)})},[S,H,WA,ye,St,F,T,M,P,It]),rA=reactExports.useCallback(function(QA){QA.preventDefault(),QA.persist(),rI(QA);var cA=isEvtWithFiles(QA);if(cA&&QA.dataTransfer)try{QA.dataTransfer.dropEffect="copy"}catch{}return cA&&K&&K(QA),!1},[K,ye]),ta=reactExports.useCallback(function(QA){QA.preventDefault(),QA.persist(),rI(QA);var cA=jA.current.filter(function(LI){return Nt.current&&Nt.current.contains(LI)}),gI=cA.indexOf(QA.target);gI!==-1&&cA.splice(gI,1),jA.current=cA,!(cA.length>0)&&(qn({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(QA)&&J&&J(QA))},[Nt,J,ye]),fa=reactExports.useCallback(function(QA,cA){var gI=[],LI=[];QA.forEach(function(da){var dA=fileAccepted(da,St),RA=_slicedToArray(dA,2),pI=RA[0],vI=RA[1],EI=fileMatchSize(da,F,T),zI=_slicedToArray(EI,2),FI=zI[0],DI=zI[1],ZI=It?It(da):null;if(pI&&FI&&!ZI)gI.push(da);else{var IC=[vI,DI];ZI&&(IC=IC.concat(ZI)),LI.push({file:da,errors:IC.filter(function(mC){return mC})})}}),(!M&&gI.length>1||M&&P>=1&&gI.length>P)&&(gI.forEach(function(da){LI.push({file:da,errors:[TOO_MANY_FILES_REJECTION]})}),gI.splice(0)),qn({acceptedFiles:gI,fileRejections:LI,type:"setFiles"}),z&&z(gI,LI,cA),LI.length>0&&se&&se(LI,cA),gI.length>0&&oe&&oe(gI,cA)},[qn,M,St,F,T,P,z,oe,se,It]),yA=reactExports.useCallback(function(QA){QA.preventDefault(),QA.persist(),rI(QA),jA.current=[],isEvtWithFiles(QA)&&Promise.resolve(S(QA)).then(function(cA){isPropagationStopped(QA)&&!ye||fa(cA,QA)}).catch(function(cA){return WA(cA)}),qn({type:"reset"})},[S,fa,WA,ye]),_A=reactExports.useCallback(function(){if(VA.current){qn({type:"openDialog"}),xt();var QA={multiple:M,types:At};window.showOpenFilePicker(QA).then(function(cA){return S(cA)}).then(function(cA){fa(cA,null),qn({type:"closeDialog"})}).catch(function(cA){isAbort(cA)?(Ct(cA),qn({type:"closeDialog"})):isSecurityError(cA)?(VA.current=!1,qt.current?(qt.current.value=null,qt.current.click()):WA(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):WA(cA)});return}qt.current&&(qn({type:"openDialog"}),xt(),qt.current.value=null,qt.current.click())},[qn,xt,Ct,pe,fa,WA,At,M]),la=reactExports.useCallback(function(QA){!Nt.current||!Nt.current.isEqualNode(QA.target)||(QA.key===" "||QA.key==="Enter"||QA.keyCode===32||QA.keyCode===13)&&(QA.preventDefault(),_A())},[Nt,_A]),AA=reactExports.useCallback(function(){qn({type:"focus"})},[]),tA=reactExports.useCallback(function(){qn({type:"blur"})},[]),ba=reactExports.useCallback(function(){be||(isIeOrEdge()?setTimeout(_A,0):_A())},[be,_A]),iA=function(cA){return _?null:cA},lA=function(cA){return Re?null:iA(cA)},yI=function(cA){return Fe?null:iA(cA)},rI=function(cA){ye&&cA.stopPropagation()},BI=reactExports.useMemo(function(){return function(){var QA=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},cA=QA.refKey,gI=cA===void 0?"ref":cA,LI=QA.role,da=QA.onKeyDown,dA=QA.onFocus,RA=QA.onBlur,pI=QA.onClick,vI=QA.onDragEnter,EI=QA.onDragOver,zI=QA.onDragLeave,FI=QA.onDrop,DI=_objectWithoutProperties(QA,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:lA(composeEventHandlers(da,la)),onFocus:lA(composeEventHandlers(dA,AA)),onBlur:lA(composeEventHandlers(RA,tA)),onClick:iA(composeEventHandlers(pI,ba)),onDragEnter:yI(composeEventHandlers(vI,KA)),onDragOver:yI(composeEventHandlers(EI,rA)),onDragLeave:yI(composeEventHandlers(zI,ta)),onDrop:yI(composeEventHandlers(FI,yA)),role:typeof LI=="string"&&LI!==""?LI:"presentation"},gI,Nt),!_&&!Re?{tabIndex:0}:{}),DI)}},[Nt,la,AA,tA,ba,KA,rA,ta,yA,Re,Fe,_]),NI=reactExports.useCallback(function(QA){QA.stopPropagation()},[]),Rt=reactExports.useMemo(function(){return function(){var QA=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},cA=QA.refKey,gI=cA===void 0?"ref":cA,LI=QA.onChange,da=QA.onClick,dA=_objectWithoutProperties(QA,_excluded4),RA=_defineProperty({accept:St,multiple:M,type:"file",style:{display:"none"},onChange:iA(composeEventHandlers(LI,yA)),onClick:iA(composeEventHandlers(da,NI)),tabIndex:-1},gI,qt);return _objectSpread(_objectSpread({},RA),dA)}},[qt,d,M,yA,_]);return _objectSpread(_objectSpread({},na),{},{isFocused:vA&&!_,getRootProps:BI,getInputProps:Rt,rootRef:Nt,inputRef:qt,open:iA(_A)})}function reducer$1(f,s){switch(s.type){case"focus":return _objectSpread(_objectSpread({},f),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},f),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},f),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},f),{},{isDragActive:s.isDragActive,isDragAccept:s.isDragAccept,isDragReject:s.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},f),{},{acceptedFiles:s.acceptedFiles,fileRejections:s.fileRejections});case"reset":return _objectSpread({},initialState);default:return f}}function noop$1(){}function bind(f,s){return function(){return f.apply(s,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(f=>s=>{const d=toString.call(s);return f[d]||(f[d]=d.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=f=>(f=f.toLowerCase(),s=>kindOf(s)===f),typeOfTest=f=>s=>typeof s===f,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(f){return f!==null&&!isUndefined(f)&&f.constructor!==null&&!isUndefined(f.constructor)&&isFunction(f.constructor.isBuffer)&&f.constructor.isBuffer(f)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(f){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(f):s=f&&f.buffer&&isArrayBuffer(f.buffer),s}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=f=>f!==null&&typeof f=="object",isBoolean=f=>f===!0||f===!1,isPlainObject=f=>{if(kindOf(f)!=="object")return!1;const s=getPrototypeOf(f);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in f)&&!(Symbol.iterator in f)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=f=>isObject(f)&&isFunction(f.pipe),isFormData=f=>{let s;return f&&(typeof FormData=="function"&&f instanceof FormData||isFunction(f.append)&&((s=kindOf(f))==="formdata"||s==="object"&&isFunction(f.toString)&&f.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=f=>f.trim?f.trim():f.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(f,s,{allOwnKeys:d=!1}={}){if(f===null||typeof f>"u")return;let _,S;if(typeof f!="object"&&(f=[f]),isArray(f))for(_=0,S=f.length;_<S;_++)s.call(null,f[_],_,f);else{const T=d?Object.getOwnPropertyNames(f):Object.keys(f),F=T.length;let M;for(_=0;_<F;_++)M=T[_],s.call(null,f[M],M,f)}}function findKey(f,s){s=s.toLowerCase();const d=Object.keys(f);let _=d.length,S;for(;_-- >0;)if(S=d[_],s===S.toLowerCase())return S;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=f=>!isUndefined(f)&&f!==_global;function merge(){const{caseless:f}=isContextDefined(this)&&this||{},s={},d=(_,S)=>{const T=f&&findKey(s,S)||S;isPlainObject(s[T])&&isPlainObject(_)?s[T]=merge(s[T],_):isPlainObject(_)?s[T]=merge({},_):isArray(_)?s[T]=_.slice():s[T]=_};for(let _=0,S=arguments.length;_<S;_++)arguments[_]&&forEach(arguments[_],d);return s}const extend=(f,s,d,{allOwnKeys:_}={})=>(forEach(s,(S,T)=>{d&&isFunction(S)?f[T]=bind(S,d):f[T]=S},{allOwnKeys:_}),f),stripBOM=f=>(f.charCodeAt(0)===65279&&(f=f.slice(1)),f),inherits=(f,s,d,_)=>{f.prototype=Object.create(s.prototype,_),f.prototype.constructor=f,Object.defineProperty(f,"super",{value:s.prototype}),d&&Object.assign(f.prototype,d)},toFlatObject=(f,s,d,_)=>{let S,T,F;const M={};if(s=s||{},f==null)return s;do{for(S=Object.getOwnPropertyNames(f),T=S.length;T-- >0;)F=S[T],(!_||_(F,f,s))&&!M[F]&&(s[F]=f[F],M[F]=!0);f=d!==!1&&getPrototypeOf(f)}while(f&&(!d||d(f,s))&&f!==Object.prototype);return s},endsWith=(f,s,d)=>{f=String(f),(d===void 0||d>f.length)&&(d=f.length),d-=s.length;const _=f.indexOf(s,d);return _!==-1&&_===d},toArray=f=>{if(!f)return null;if(isArray(f))return f;let s=f.length;if(!isNumber(s))return null;const d=new Array(s);for(;s-- >0;)d[s]=f[s];return d},isTypedArray=(f=>s=>f&&s instanceof f)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(f,s)=>{const _=(f&&f[Symbol.iterator]).call(f);let S;for(;(S=_.next())&&!S.done;){const T=S.value;s.call(f,T[0],T[1])}},matchAll=(f,s)=>{let d;const _=[];for(;(d=f.exec(s))!==null;)_.push(d);return _},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=f=>f.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(d,_,S){return _.toUpperCase()+S}),hasOwnProperty=(({hasOwnProperty:f})=>(s,d)=>f.call(s,d))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(f,s)=>{const d=Object.getOwnPropertyDescriptors(f),_={};forEach(d,(S,T)=>{let F;(F=s(S,T,f))!==!1&&(_[T]=F||S)}),Object.defineProperties(f,_)},freezeMethods=f=>{reduceDescriptors(f,(s,d)=>{if(isFunction(f)&&["arguments","caller","callee"].indexOf(d)!==-1)return!1;const _=f[d];if(isFunction(_)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+d+"'")})}})},toObjectSet=(f,s)=>{const d={},_=S=>{S.forEach(T=>{d[T]=!0})};return isArray(f)?_(f):_(String(f).split(s)),d},noop=()=>{},toFiniteNumber=(f,s)=>f!=null&&Number.isFinite(f=+f)?f:s,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(f=16,s=ALPHABET.ALPHA_DIGIT)=>{let d="";const{length:_}=s;for(;f--;)d+=s[Math.random()*_|0];return d};function isSpecCompliantForm(f){return!!(f&&isFunction(f.append)&&f[Symbol.toStringTag]==="FormData"&&f[Symbol.iterator])}const toJSONObject=f=>{const s=new Array(10),d=(_,S)=>{if(isObject(_)){if(s.indexOf(_)>=0)return;if(!("toJSON"in _)){s[S]=_;const T=isArray(_)?[]:{};return forEach(_,(F,M)=>{const P=d(F,S+1);!isUndefined(P)&&(T[M]=P)}),s[S]=void 0,T}}return _};return d(f,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=f=>f&&(isObject(f)||isFunction(f))&&isFunction(f.then)&&isFunction(f.catch),_setImmediate=((f,s)=>f?setImmediate:s?((d,_)=>(_global.addEventListener("message",({source:S,data:T})=>{S===_global&&T===d&&_.length&&_.shift()()},!1),S=>{_.push(S),_global.postMessage(d,"*")}))(`axios@${Math.random()}`,[]):d=>setTimeout(d))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(f,s,d,_,S){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=f,this.name="AxiosError",s&&(this.code=s),d&&(this.config=d),_&&(this.request=_),S&&(this.response=S,this.status=S.status?S.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function f(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(f=>{descriptors[f]={value:f}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(f,s,d,_,S,T)=>{const F=Object.create(prototype$1);return utils$1.toFlatObject(f,F,function(P){return P!==Error.prototype},M=>M!=="isAxiosError"),AxiosError.call(F,f.message,s,d,_,S),F.cause=f,F.name=f.name,T&&Object.assign(F,T),F};const httpAdapter=null;function isVisitable(f){return utils$1.isPlainObject(f)||utils$1.isArray(f)}function removeBrackets(f){return utils$1.endsWith(f,"[]")?f.slice(0,-2):f}function renderKey(f,s,d){return f?f.concat(s).map(function(S,T){return S=removeBrackets(S),!d&&T?"["+S+"]":S}).join(d?".":""):s}function isFlatArray(f){return utils$1.isArray(f)&&!f.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function f(s){return/^is[A-Z]/.test(s)});function toFormData(f,s,d){if(!utils$1.isObject(f))throw new TypeError("target must be an object");s=s||new FormData,d=utils$1.toFlatObject(d,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ae,ge){return!utils$1.isUndefined(ge[ae])});const _=d.metaTokens,S=d.visitor||J,T=d.dots,F=d.indexes,P=(d.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(s);if(!utils$1.isFunction(S))throw new TypeError("visitor must be a function");function H(se){if(se===null)return"";if(utils$1.isDate(se))return se.toISOString();if(!P&&utils$1.isBlob(se))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(se)||utils$1.isTypedArray(se)?P&&typeof Blob=="function"?new Blob([se]):Buffer.from(se):se}function J(se,ae,ge){let pe=se;if(se&&!ge&&typeof se=="object"){if(utils$1.endsWith(ae,"{}"))ae=_?ae:ae.slice(0,-2),se=JSON.stringify(se);else if(utils$1.isArray(se)&&isFlatArray(se)||(utils$1.isFileList(se)||utils$1.endsWith(ae,"[]"))&&(pe=utils$1.toArray(se)))return ae=removeBrackets(ae),pe.forEach(function(ve,be){!(utils$1.isUndefined(ve)||ve===null)&&s.append(F===!0?renderKey([ae],be,T):F===null?ae:ae+"[]",H(ve))}),!1}return isVisitable(se)?!0:(s.append(renderKey(ge,ae,T),H(se)),!1)}const K=[],z=Object.assign(predicates,{defaultVisitor:J,convertValue:H,isVisitable});function oe(se,ae){if(!utils$1.isUndefined(se)){if(K.indexOf(se)!==-1)throw Error("Circular reference detected in "+ae.join("."));K.push(se),utils$1.forEach(se,function(pe,he){(!(utils$1.isUndefined(pe)||pe===null)&&S.call(s,pe,utils$1.isString(he)?he.trim():he,ae,z))===!0&&oe(pe,ae?ae.concat(he):[he])}),K.pop()}}if(!utils$1.isObject(f))throw new TypeError("data must be an object");return oe(f),s}function encode$1(f){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(f).replace(/[!'()~]|%20|%00/g,function(_){return s[_]})}function AxiosURLSearchParams(f,s){this._pairs=[],f&&toFormData(f,this,s)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function f(s,d){this._pairs.push([s,d])};prototype.toString=function f(s){const d=s?function(_){return s.call(this,_,encode$1)}:encode$1;return this._pairs.map(function(S){return d(S[0])+"="+d(S[1])},"").join("&")};function encode(f){return encodeURIComponent(f).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(f,s,d){if(!s)return f;const _=d&&d.encode||encode,S=d&&d.serialize;let T;if(S?T=S(s,d):T=utils$1.isURLSearchParams(s)?s.toString():new AxiosURLSearchParams(s,d).toString(_),T){const F=f.indexOf("#");F!==-1&&(f=f.slice(0,F)),f+=(f.indexOf("?")===-1?"?":"&")+T}return f}class InterceptorManager{constructor(){this.handlers=[]}use(s,d,_){return this.handlers.push({fulfilled:s,rejected:d,synchronous:_?_.synchronous:!1,runWhen:_?_.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){utils$1.forEach(this.handlers,function(_){_!==null&&s(_)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin$1=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin:origin$1},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(f,s){return toFormData(f,new platform.classes.URLSearchParams,Object.assign({visitor:function(d,_,S,T){return platform.isNode&&utils$1.isBuffer(d)?(this.append(_,d.toString("base64")),!1):T.defaultVisitor.apply(this,arguments)}},s))}function parsePropPath(f){return utils$1.matchAll(/\w+|\[(\w*)]/g,f).map(s=>s[0]==="[]"?"":s[1]||s[0])}function arrayToObject(f){const s={},d=Object.keys(f);let _;const S=d.length;let T;for(_=0;_<S;_++)T=d[_],s[T]=f[T];return s}function formDataToJSON(f){function s(d,_,S,T){let F=d[T++];if(F==="__proto__")return!0;const M=Number.isFinite(+F),P=T>=d.length;return F=!F&&utils$1.isArray(S)?S.length:F,P?(utils$1.hasOwnProp(S,F)?S[F]=[S[F],_]:S[F]=_,!M):((!S[F]||!utils$1.isObject(S[F]))&&(S[F]=[]),s(d,_,S[F],T)&&utils$1.isArray(S[F])&&(S[F]=arrayToObject(S[F])),!M)}if(utils$1.isFormData(f)&&utils$1.isFunction(f.entries)){const d={};return utils$1.forEachEntry(f,(_,S)=>{s(parsePropPath(_),S,d,0)}),d}return null}function stringifySafely(f,s,d){if(utils$1.isString(f))try{return(s||JSON.parse)(f),utils$1.trim(f)}catch(_){if(_.name!=="SyntaxError")throw _}return(0,JSON.stringify)(f)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function f(s,d){const _=d.getContentType()||"",S=_.indexOf("application/json")>-1,T=utils$1.isObject(s);if(T&&utils$1.isHTMLForm(s)&&(s=new FormData(s)),utils$1.isFormData(s))return S?JSON.stringify(formDataToJSON(s)):s;if(utils$1.isArrayBuffer(s)||utils$1.isBuffer(s)||utils$1.isStream(s)||utils$1.isFile(s)||utils$1.isBlob(s)||utils$1.isReadableStream(s))return s;if(utils$1.isArrayBufferView(s))return s.buffer;if(utils$1.isURLSearchParams(s))return d.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let M;if(T){if(_.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(s,this.formSerializer).toString();if((M=utils$1.isFileList(s))||_.indexOf("multipart/form-data")>-1){const P=this.env&&this.env.FormData;return toFormData(M?{"files[]":s}:s,P&&new P,this.formSerializer)}}return T||S?(d.setContentType("application/json",!1),stringifySafely(s)):s}],transformResponse:[function f(s){const d=this.transitional||defaults.transitional,_=d&&d.forcedJSONParsing,S=this.responseType==="json";if(utils$1.isResponse(s)||utils$1.isReadableStream(s))return s;if(s&&utils$1.isString(s)&&(_&&!this.responseType||S)){const F=!(d&&d.silentJSONParsing)&&S;try{return JSON.parse(s)}catch(M){if(F)throw M.name==="SyntaxError"?AxiosError.from(M,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):M}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function f(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],f=>{defaults.headers[f]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=f=>{const s={};let d,_,S;return f&&f.split(`
`).forEach(function(F){S=F.indexOf(":"),d=F.substring(0,S).trim().toLowerCase(),_=F.substring(S+1).trim(),!(!d||s[d]&&ignoreDuplicateOf[d])&&(d==="set-cookie"?s[d]?s[d].push(_):s[d]=[_]:s[d]=s[d]?s[d]+", "+_:_)}),s},$internals=Symbol("internals");function normalizeHeader(f){return f&&String(f).trim().toLowerCase()}function normalizeValue(f){return f===!1||f==null?f:utils$1.isArray(f)?f.map(normalizeValue):String(f)}function parseTokens(f){const s=Object.create(null),d=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let _;for(;_=d.exec(f);)s[_[1]]=_[2];return s}const isValidHeaderName=f=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(f.trim());function matchHeaderValue(f,s,d,_,S){if(utils$1.isFunction(_))return _.call(this,s,d);if(S&&(s=d),!!utils$1.isString(s)){if(utils$1.isString(_))return s.indexOf(_)!==-1;if(utils$1.isRegExp(_))return _.test(s)}}function formatHeader(f){return f.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,d,_)=>d.toUpperCase()+_)}function buildAccessors(f,s){const d=utils$1.toCamelCase(" "+s);["get","set","has"].forEach(_=>{Object.defineProperty(f,_+d,{value:function(S,T,F){return this[_].call(this,s,S,T,F)},configurable:!0})})}class AxiosHeaders{constructor(s){s&&this.set(s)}set(s,d,_){const S=this;function T(M,P,H){const J=normalizeHeader(P);if(!J)throw new Error("header name must be a non-empty string");const K=utils$1.findKey(S,J);(!K||S[K]===void 0||H===!0||H===void 0&&S[K]!==!1)&&(S[K||P]=normalizeValue(M))}const F=(M,P)=>utils$1.forEach(M,(H,J)=>T(H,J,P));if(utils$1.isPlainObject(s)||s instanceof this.constructor)F(s,d);else if(utils$1.isString(s)&&(s=s.trim())&&!isValidHeaderName(s))F(parseHeaders(s),d);else if(utils$1.isHeaders(s))for(const[M,P]of s.entries())T(P,M,_);else s!=null&&T(d,s,_);return this}get(s,d){if(s=normalizeHeader(s),s){const _=utils$1.findKey(this,s);if(_){const S=this[_];if(!d)return S;if(d===!0)return parseTokens(S);if(utils$1.isFunction(d))return d.call(this,S,_);if(utils$1.isRegExp(d))return d.exec(S);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,d){if(s=normalizeHeader(s),s){const _=utils$1.findKey(this,s);return!!(_&&this[_]!==void 0&&(!d||matchHeaderValue(this,this[_],_,d)))}return!1}delete(s,d){const _=this;let S=!1;function T(F){if(F=normalizeHeader(F),F){const M=utils$1.findKey(_,F);M&&(!d||matchHeaderValue(_,_[M],M,d))&&(delete _[M],S=!0)}}return utils$1.isArray(s)?s.forEach(T):T(s),S}clear(s){const d=Object.keys(this);let _=d.length,S=!1;for(;_--;){const T=d[_];(!s||matchHeaderValue(this,this[T],T,s,!0))&&(delete this[T],S=!0)}return S}normalize(s){const d=this,_={};return utils$1.forEach(this,(S,T)=>{const F=utils$1.findKey(_,T);if(F){d[F]=normalizeValue(S),delete d[T];return}const M=s?formatHeader(T):String(T).trim();M!==T&&delete d[T],d[M]=normalizeValue(S),_[M]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const d=Object.create(null);return utils$1.forEach(this,(_,S)=>{_!=null&&_!==!1&&(d[S]=s&&utils$1.isArray(_)?_.join(", "):_)}),d}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,d])=>s+": "+d).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...d){const _=new this(s);return d.forEach(S=>_.set(S)),_}static accessor(s){const _=(this[$internals]=this[$internals]={accessors:{}}).accessors,S=this.prototype;function T(F){const M=normalizeHeader(F);_[M]||(buildAccessors(S,F),_[M]=!0)}return utils$1.isArray(s)?s.forEach(T):T(s),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:f},s)=>{let d=s[0].toUpperCase()+s.slice(1);return{get:()=>f,set(_){this[d]=_}}});utils$1.freezeMethods(AxiosHeaders);function transformData(f,s){const d=this||defaults,_=s||d,S=AxiosHeaders.from(_.headers);let T=_.data;return utils$1.forEach(f,function(M){T=M.call(d,T,S.normalize(),s?s.status:void 0)}),S.normalize(),T}function isCancel(f){return!!(f&&f.__CANCEL__)}function CanceledError(f,s,d){AxiosError.call(this,f??"canceled",AxiosError.ERR_CANCELED,s,d),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(f,s,d){const _=d.config.validateStatus;!d.status||!_||_(d.status)?f(d):s(new AxiosError("Request failed with status code "+d.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(d.status/100)-4],d.config,d.request,d))}function parseProtocol(f){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(f);return s&&s[1]||""}function speedometer(f,s){f=f||10;const d=new Array(f),_=new Array(f);let S=0,T=0,F;return s=s!==void 0?s:1e3,function(P){const H=Date.now(),J=_[T];F||(F=H),d[S]=P,_[S]=H;let K=T,z=0;for(;K!==S;)z+=d[K++],K=K%f;if(S=(S+1)%f,S===T&&(T=(T+1)%f),H-F<s)return;const oe=J&&H-J;return oe?Math.round(z*1e3/oe):void 0}}function throttle(f,s){let d=0,_=1e3/s,S,T;const F=(H,J=Date.now())=>{d=J,S=null,T&&(clearTimeout(T),T=null),f.apply(null,H)};return[(...H)=>{const J=Date.now(),K=J-d;K>=_?F(H,J):(S=H,T||(T=setTimeout(()=>{T=null,F(S)},_-K)))},()=>S&&F(S)]}const progressEventReducer=(f,s,d=3)=>{let _=0;const S=speedometer(50,250);return throttle(T=>{const F=T.loaded,M=T.lengthComputable?T.total:void 0,P=F-_,H=S(P),J=F<=M;_=F;const K={loaded:F,total:M,progress:M?F/M:void 0,bytes:P,rate:H||void 0,estimated:H&&M&&J?(M-F)/H:void 0,event:T,lengthComputable:M!=null,[s?"download":"upload"]:!0};f(K)},d)},progressEventDecorator=(f,s)=>{const d=f!=null;return[_=>s[0]({lengthComputable:d,total:f,loaded:_}),s[1]]},asyncDecorator=f=>(...s)=>utils$1.asap(()=>f(...s)),isURLSameOrigin=platform.hasStandardBrowserEnv?function f(){const s=platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent),d=document.createElement("a");let _;function S(T){let F=T;return s&&(d.setAttribute("href",F),F=d.href),d.setAttribute("href",F),{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:d.pathname.charAt(0)==="/"?d.pathname:"/"+d.pathname}}return _=S(window.location.href),function(F){const M=utils$1.isString(F)?S(F):F;return M.protocol===_.protocol&&M.host===_.host}}():function f(){return function(){return!0}}(),cookies=platform.hasStandardBrowserEnv?{write(f,s,d,_,S,T){const F=[f+"="+encodeURIComponent(s)];utils$1.isNumber(d)&&F.push("expires="+new Date(d).toGMTString()),utils$1.isString(_)&&F.push("path="+_),utils$1.isString(S)&&F.push("domain="+S),T===!0&&F.push("secure"),document.cookie=F.join("; ")},read(f){const s=document.cookie.match(new RegExp("(^|;\\s*)("+f+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(f){this.write(f,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(f){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(f)}function combineURLs(f,s){return s?f.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):f}function buildFullPath(f,s){return f&&!isAbsoluteURL(s)?combineURLs(f,s):s}const headersToObject=f=>f instanceof AxiosHeaders?{...f}:f;function mergeConfig(f,s){s=s||{};const d={};function _(H,J,K){return utils$1.isPlainObject(H)&&utils$1.isPlainObject(J)?utils$1.merge.call({caseless:K},H,J):utils$1.isPlainObject(J)?utils$1.merge({},J):utils$1.isArray(J)?J.slice():J}function S(H,J,K){if(utils$1.isUndefined(J)){if(!utils$1.isUndefined(H))return _(void 0,H,K)}else return _(H,J,K)}function T(H,J){if(!utils$1.isUndefined(J))return _(void 0,J)}function F(H,J){if(utils$1.isUndefined(J)){if(!utils$1.isUndefined(H))return _(void 0,H)}else return _(void 0,J)}function M(H,J,K){if(K in s)return _(H,J);if(K in f)return _(void 0,H)}const P={url:T,method:T,data:T,baseURL:F,transformRequest:F,transformResponse:F,paramsSerializer:F,timeout:F,timeoutMessage:F,withCredentials:F,withXSRFToken:F,adapter:F,responseType:F,xsrfCookieName:F,xsrfHeaderName:F,onUploadProgress:F,onDownloadProgress:F,decompress:F,maxContentLength:F,maxBodyLength:F,beforeRedirect:F,transport:F,httpAgent:F,httpsAgent:F,cancelToken:F,socketPath:F,responseEncoding:F,validateStatus:M,headers:(H,J)=>S(headersToObject(H),headersToObject(J),!0)};return utils$1.forEach(Object.keys(Object.assign({},f,s)),function(J){const K=P[J]||S,z=K(f[J],s[J],J);utils$1.isUndefined(z)&&K!==M||(d[J]=z)}),d}const resolveConfig=f=>{const s=mergeConfig({},f);let{data:d,withXSRFToken:_,xsrfHeaderName:S,xsrfCookieName:T,headers:F,auth:M}=s;s.headers=F=AxiosHeaders.from(F),s.url=buildURL(buildFullPath(s.baseURL,s.url),f.params,f.paramsSerializer),M&&F.set("Authorization","Basic "+btoa((M.username||"")+":"+(M.password?unescape(encodeURIComponent(M.password)):"")));let P;if(utils$1.isFormData(d)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)F.setContentType(void 0);else if((P=F.getContentType())!==!1){const[H,...J]=P?P.split(";").map(K=>K.trim()).filter(Boolean):[];F.setContentType([H||"multipart/form-data",...J].join("; "))}}if(platform.hasStandardBrowserEnv&&(_&&utils$1.isFunction(_)&&(_=_(s)),_||_!==!1&&isURLSameOrigin(s.url))){const H=S&&T&&cookies.read(T);H&&F.set(S,H)}return s},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(f){return new Promise(function(d,_){const S=resolveConfig(f);let T=S.data;const F=AxiosHeaders.from(S.headers).normalize();let{responseType:M,onUploadProgress:P,onDownloadProgress:H}=S,J,K,z,oe,se;function ae(){oe&&oe(),se&&se(),S.cancelToken&&S.cancelToken.unsubscribe(J),S.signal&&S.signal.removeEventListener("abort",J)}let ge=new XMLHttpRequest;ge.open(S.method.toUpperCase(),S.url,!0),ge.timeout=S.timeout;function pe(){if(!ge)return;const ve=AxiosHeaders.from("getAllResponseHeaders"in ge&&ge.getAllResponseHeaders()),Re={data:!M||M==="text"||M==="json"?ge.responseText:ge.response,status:ge.status,statusText:ge.statusText,headers:ve,config:f,request:ge};settle(function(ye){d(ye),ae()},function(ye){_(ye),ae()},Re),ge=null}"onloadend"in ge?ge.onloadend=pe:ge.onreadystatechange=function(){!ge||ge.readyState!==4||ge.status===0&&!(ge.responseURL&&ge.responseURL.indexOf("file:")===0)||setTimeout(pe)},ge.onabort=function(){ge&&(_(new AxiosError("Request aborted",AxiosError.ECONNABORTED,f,ge)),ge=null)},ge.onerror=function(){_(new AxiosError("Network Error",AxiosError.ERR_NETWORK,f,ge)),ge=null},ge.ontimeout=function(){let be=S.timeout?"timeout of "+S.timeout+"ms exceeded":"timeout exceeded";const Re=S.transitional||transitionalDefaults;S.timeoutErrorMessage&&(be=S.timeoutErrorMessage),_(new AxiosError(be,Re.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,f,ge)),ge=null},T===void 0&&F.setContentType(null),"setRequestHeader"in ge&&utils$1.forEach(F.toJSON(),function(be,Re){ge.setRequestHeader(Re,be)}),utils$1.isUndefined(S.withCredentials)||(ge.withCredentials=!!S.withCredentials),M&&M!=="json"&&(ge.responseType=S.responseType),H&&([z,se]=progressEventReducer(H,!0),ge.addEventListener("progress",z)),P&&ge.upload&&([K,oe]=progressEventReducer(P),ge.upload.addEventListener("progress",K),ge.upload.addEventListener("loadend",oe)),(S.cancelToken||S.signal)&&(J=ve=>{ge&&(_(!ve||ve.type?new CanceledError(null,f,ge):ve),ge.abort(),ge=null)},S.cancelToken&&S.cancelToken.subscribe(J),S.signal&&(S.signal.aborted?J():S.signal.addEventListener("abort",J)));const he=parseProtocol(S.url);if(he&&platform.protocols.indexOf(he)===-1){_(new AxiosError("Unsupported protocol "+he+":",AxiosError.ERR_BAD_REQUEST,f));return}ge.send(T||null)})},composeSignals=(f,s)=>{const{length:d}=f=f?f.filter(Boolean):[];if(s||d){let _=new AbortController,S;const T=function(H){if(!S){S=!0,M();const J=H instanceof Error?H:this.reason;_.abort(J instanceof AxiosError?J:new CanceledError(J instanceof Error?J.message:J))}};let F=s&&setTimeout(()=>{F=null,T(new AxiosError(`timeout ${s} of ms exceeded`,AxiosError.ETIMEDOUT))},s);const M=()=>{f&&(F&&clearTimeout(F),F=null,f.forEach(H=>{H.unsubscribe?H.unsubscribe(T):H.removeEventListener("abort",T)}),f=null)};f.forEach(H=>H.addEventListener("abort",T));const{signal:P}=_;return P.unsubscribe=()=>utils$1.asap(M),P}},streamChunk=function*(f,s){let d=f.byteLength;if(d<s){yield f;return}let _=0,S;for(;_<d;)S=_+s,yield f.slice(_,S),_=S},readBytes=async function*(f,s){for await(const d of readStream(f))yield*streamChunk(d,s)},readStream=async function*(f){if(f[Symbol.asyncIterator]){yield*f;return}const s=f.getReader();try{for(;;){const{done:d,value:_}=await s.read();if(d)break;yield _}}finally{await s.cancel()}},trackStream=(f,s,d,_)=>{const S=readBytes(f,s);let T=0,F,M=P=>{F||(F=!0,_&&_(P))};return new ReadableStream({async pull(P){try{const{done:H,value:J}=await S.next();if(H){M(),P.close();return}let K=J.byteLength;if(d){let z=T+=K;d(z)}P.enqueue(new Uint8Array(J))}catch(H){throw M(H),H}},cancel(P){return M(P),S.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(f=>s=>f.encode(s))(new TextEncoder):async f=>new Uint8Array(await new Response(f).arrayBuffer())),test=(f,...s)=>{try{return!!f(...s)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let f=!1;const s=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!s}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(f=>f.body)};isFetchSupported&&(f=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!resolvers[s]&&(resolvers[s]=utils$1.isFunction(f[s])?d=>d[s]():(d,_)=>{throw new AxiosError(`Response type '${s}' is not supported`,AxiosError.ERR_NOT_SUPPORT,_)})})})(new Response);const getBodyLength=async f=>{if(f==null)return 0;if(utils$1.isBlob(f))return f.size;if(utils$1.isSpecCompliantForm(f))return(await new Request(platform.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(f)||utils$1.isArrayBuffer(f))return f.byteLength;if(utils$1.isURLSearchParams(f)&&(f=f+""),utils$1.isString(f))return(await encodeText(f)).byteLength},resolveBodyLength=async(f,s)=>{const d=utils$1.toFiniteNumber(f.getContentLength());return d??getBodyLength(s)},fetchAdapter=isFetchSupported&&(async f=>{let{url:s,method:d,data:_,signal:S,cancelToken:T,timeout:F,onDownloadProgress:M,onUploadProgress:P,responseType:H,headers:J,withCredentials:K="same-origin",fetchOptions:z}=resolveConfig(f);H=H?(H+"").toLowerCase():"text";let oe=composeSignals([S,T&&T.toAbortSignal()],F),se;const ae=oe&&oe.unsubscribe&&(()=>{oe.unsubscribe()});let ge;try{if(P&&supportsRequestStream&&d!=="get"&&d!=="head"&&(ge=await resolveBodyLength(J,_))!==0){let Re=new Request(s,{method:"POST",body:_,duplex:"half"}),Fe;if(utils$1.isFormData(_)&&(Fe=Re.headers.get("content-type"))&&J.setContentType(Fe),Re.body){const[ye,Ue]=progressEventDecorator(ge,progressEventReducer(asyncDecorator(P)));_=trackStream(Re.body,DEFAULT_CHUNK_SIZE,ye,Ue)}}utils$1.isString(K)||(K=K?"include":"omit");const pe="credentials"in Request.prototype;se=new Request(s,{...z,signal:oe,method:d.toUpperCase(),headers:J.normalize().toJSON(),body:_,duplex:"half",credentials:pe?K:void 0});let he=await fetch(se);const ve=supportsResponseStream&&(H==="stream"||H==="response");if(supportsResponseStream&&(M||ve&&ae)){const Re={};["status","statusText","headers"].forEach(It=>{Re[It]=he[It]});const Fe=utils$1.toFiniteNumber(he.headers.get("content-length")),[ye,Ue]=M&&progressEventDecorator(Fe,progressEventReducer(asyncDecorator(M),!0))||[];he=new Response(trackStream(he.body,DEFAULT_CHUNK_SIZE,ye,()=>{Ue&&Ue(),ae&&ae()}),Re)}H=H||"text";let be=await resolvers[utils$1.findKey(resolvers,H)||"text"](he,f);return!ve&&ae&&ae(),await new Promise((Re,Fe)=>{settle(Re,Fe,{data:be,headers:AxiosHeaders.from(he.headers),status:he.status,statusText:he.statusText,config:f,request:se})})}catch(pe){throw ae&&ae(),pe&&pe.name==="TypeError"&&/fetch/i.test(pe.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,f,se),{cause:pe.cause||pe}):AxiosError.from(pe,pe&&pe.code,f,se)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(f,s)=>{if(f){try{Object.defineProperty(f,"name",{value:s})}catch{}Object.defineProperty(f,"adapterName",{value:s})}});const renderReason=f=>`- ${f}`,isResolvedHandle=f=>utils$1.isFunction(f)||f===null||f===!1,adapters={getAdapter:f=>{f=utils$1.isArray(f)?f:[f];const{length:s}=f;let d,_;const S={};for(let T=0;T<s;T++){d=f[T];let F;if(_=d,!isResolvedHandle(d)&&(_=knownAdapters[(F=String(d)).toLowerCase()],_===void 0))throw new AxiosError(`Unknown adapter '${F}'`);if(_)break;S[F||"#"+T]=_}if(!_){const T=Object.entries(S).map(([M,P])=>`adapter ${M} `+(P===!1?"is not supported by the environment":"is not available in the build"));let F=s?T.length>1?`since :
`+T.map(renderReason).join(`
`):" "+renderReason(T[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+F,"ERR_NOT_SUPPORT")}return _},adapters:knownAdapters};function throwIfCancellationRequested(f){if(f.cancelToken&&f.cancelToken.throwIfRequested(),f.signal&&f.signal.aborted)throw new CanceledError(null,f)}function dispatchRequest(f){return throwIfCancellationRequested(f),f.headers=AxiosHeaders.from(f.headers),f.data=transformData.call(f,f.transformRequest),["post","put","patch"].indexOf(f.method)!==-1&&f.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(f.adapter||defaults.adapter)(f).then(function(_){return throwIfCancellationRequested(f),_.data=transformData.call(f,f.transformResponse,_),_.headers=AxiosHeaders.from(_.headers),_},function(_){return isCancel(_)||(throwIfCancellationRequested(f),_&&_.response&&(_.response.data=transformData.call(f,f.transformResponse,_.response),_.response.headers=AxiosHeaders.from(_.response.headers))),Promise.reject(_)})}const VERSION="1.7.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((f,s)=>{validators$1[f]=function(_){return typeof _===f||"a"+(s<1?"n ":" ")+f}});const deprecatedWarnings={};validators$1.transitional=function f(s,d,_){function S(T,F){return"[Axios v"+VERSION+"] Transitional option '"+T+"'"+F+(_?". "+_:"")}return(T,F,M)=>{if(s===!1)throw new AxiosError(S(F," has been removed"+(d?" in "+d:"")),AxiosError.ERR_DEPRECATED);return d&&!deprecatedWarnings[F]&&(deprecatedWarnings[F]=!0,console.warn(S(F," has been deprecated since v"+d+" and will be removed in the near future"))),s?s(T,F,M):!0}};function assertOptions(f,s,d){if(typeof f!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const _=Object.keys(f);let S=_.length;for(;S-- >0;){const T=_[S],F=s[T];if(F){const M=f[T],P=M===void 0||F(M,T,f);if(P!==!0)throw new AxiosError("option "+T+" must be "+P,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(d!==!0)throw new AxiosError("Unknown option "+T,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(s){this.defaults=s,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(s,d){try{return await this._request(s,d)}catch(_){if(_ instanceof Error){let S;Error.captureStackTrace?Error.captureStackTrace(S={}):S=new Error;const T=S.stack?S.stack.replace(/^.+\n/,""):"";try{_.stack?T&&!String(_.stack).endsWith(T.replace(/^.+\n.+\n/,""))&&(_.stack+=`
`+T):_.stack=T}catch{}}throw _}}_request(s,d){typeof s=="string"?(d=d||{},d.url=s):d=s||{},d=mergeConfig(this.defaults,d);const{transitional:_,paramsSerializer:S,headers:T}=d;_!==void 0&&validator.assertOptions(_,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),S!=null&&(utils$1.isFunction(S)?d.paramsSerializer={serialize:S}:validator.assertOptions(S,{encode:validators.function,serialize:validators.function},!0)),d.method=(d.method||this.defaults.method||"get").toLowerCase();let F=T&&utils$1.merge(T.common,T[d.method]);T&&utils$1.forEach(["delete","get","head","post","put","patch","common"],se=>{delete T[se]}),d.headers=AxiosHeaders.concat(F,T);const M=[];let P=!0;this.interceptors.request.forEach(function(ae){typeof ae.runWhen=="function"&&ae.runWhen(d)===!1||(P=P&&ae.synchronous,M.unshift(ae.fulfilled,ae.rejected))});const H=[];this.interceptors.response.forEach(function(ae){H.push(ae.fulfilled,ae.rejected)});let J,K=0,z;if(!P){const se=[dispatchRequest.bind(this),void 0];for(se.unshift.apply(se,M),se.push.apply(se,H),z=se.length,J=Promise.resolve(d);K<z;)J=J.then(se[K++],se[K++]);return J}z=M.length;let oe=d;for(K=0;K<z;){const se=M[K++],ae=M[K++];try{oe=se(oe)}catch(ge){ae.call(this,ge);break}}try{J=dispatchRequest.call(this,oe)}catch(se){return Promise.reject(se)}for(K=0,z=H.length;K<z;)J=J.then(H[K++],H[K++]);return J}getUri(s){s=mergeConfig(this.defaults,s);const d=buildFullPath(s.baseURL,s.url);return buildURL(d,s.params,s.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function f(s){Axios.prototype[s]=function(d,_){return this.request(mergeConfig(_||{},{method:s,url:d,data:(_||{}).data}))}});utils$1.forEach(["post","put","patch"],function f(s){function d(_){return function(T,F,M){return this.request(mergeConfig(M||{},{method:s,headers:_?{"Content-Type":"multipart/form-data"}:{},url:T,data:F}))}}Axios.prototype[s]=d(),Axios.prototype[s+"Form"]=d(!0)});class CancelToken{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let d;this.promise=new Promise(function(T){d=T});const _=this;this.promise.then(S=>{if(!_._listeners)return;let T=_._listeners.length;for(;T-- >0;)_._listeners[T](S);_._listeners=null}),this.promise.then=S=>{let T;const F=new Promise(M=>{_.subscribe(M),T=M}).then(S);return F.cancel=function(){_.unsubscribe(T)},F},s(function(T,F,M){_.reason||(_.reason=new CanceledError(T,F,M),d(_.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const d=this._listeners.indexOf(s);d!==-1&&this._listeners.splice(d,1)}toAbortSignal(){const s=new AbortController,d=_=>{s.abort(_)};return this.subscribe(d),s.signal.unsubscribe=()=>this.unsubscribe(d),s.signal}static source(){let s;return{token:new CancelToken(function(S){s=S}),cancel:s}}}function spread(f){return function(d){return f.apply(null,d)}}function isAxiosError(f){return utils$1.isObject(f)&&f.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([f,s])=>{HttpStatusCode[s]=f});function createInstance(f){const s=new Axios(f),d=bind(Axios.prototype.request,s);return utils$1.extend(d,Axios.prototype,s,{allOwnKeys:!0}),utils$1.extend(d,s,null,{allOwnKeys:!0}),d.create=function(S){return createInstance(mergeConfig(f,S))},d}const axios=createInstance(defaults);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function f(s){return Promise.all(s)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders;axios.formToJSON=f=>formDataToJSON(utils$1.isHTMLForm(f)?new FormData(f):f);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode;axios.default=axios;const ColumnPreview=({columnNames:f,columnTypes:s,secondRowValues:d})=>{const[_,S]=reactExports.useState(""),T=f.map((F,M)=>({name:F,type:s[M],value:d[M]})).filter(F=>F.name.toLowerCase().includes(_.toLowerCase()));return jsxRuntimeExports.jsxs("div",{className:"border border-gray-300 rounded-lg shadow-md dark:border-gray-700 w-full mx-10",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-gray-100 dark:bg-gray-900",children:jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded dark:border-gray-700 dark:bg-gray-800 dark:text-white",placeholder:"Search column names...",value:_,onChange:F=>S(F.target.value)})}),jsxRuntimeExports.jsx("div",{className:"overflow-y-auto h-80 w-full",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0 z-10",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Column Name"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Column Type"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Second Row Value"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:T.length>0?T.map((F,M)=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 select-text",children:F.name}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 select-text",children:F.type}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 select-text",children:F.value})]},M)):jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No columns match your search."})})})]})})]})};var $e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function et(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var We={exports:{}},ie={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ht;function $a(){if(Ht)return ie;Ht=1;var f=React$1,s=Symbol.for("react.element"),d=Symbol.for("react.fragment"),_=Object.prototype.hasOwnProperty,S=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,T={key:!0,ref:!0,__self:!0,__source:!0};function F(M,P,H){var J,K={},z=null,oe=null;H!==void 0&&(z=""+H),P.key!==void 0&&(z=""+P.key),P.ref!==void 0&&(oe=P.ref);for(J in P)_.call(P,J)&&!T.hasOwnProperty(J)&&(K[J]=P[J]);if(M&&M.defaultProps)for(J in P=M.defaultProps,P)K[J]===void 0&&(K[J]=P[J]);return{$$typeof:s,type:M,key:z,ref:oe,props:K,_owner:S.current}}return ie.Fragment=d,ie.jsx=F,ie.jsxs=F,ie}We.exports=$a();var b$1=We.exports;const Jt=":@",Ee="#text",tt="#comment",rt="#cdata",Jr="DECLARATION_TAG",Ta="TAG",Ye={tagColor:"#d43900",textColor:"#333",attributeKeyColor:"#2a7ab0",attributeValueColor:"#008000",separatorColor:"#333",commentColor:"#aaa",cdataColor:"#1d781d",fontFamily:"monospace"},ma={theme:Ye,collapsible:!1,indentSize:2},Zr=reactExports.createContext(ma),G=()=>reactExports.useContext(Zr);var nt={},we={};(function(f){const s=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",d=s+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",_="["+s+"]["+d+"]*",S=new RegExp("^"+_+"$"),T=function(M,P){const H=[];let J=P.exec(M);for(;J;){const K=[];K.startIndex=P.lastIndex-J[0].length;const z=J.length;for(let oe=0;oe<z;oe++)K.push(J[oe]);H.push(K),J=P.exec(M)}return H},F=function(M){const P=S.exec(M);return!(P===null||typeof P>"u")};f.isExist=function(M){return typeof M<"u"},f.isEmptyObject=function(M){return Object.keys(M).length===0},f.merge=function(M,P,H){if(P){const J=Object.keys(P),K=J.length;for(let z=0;z<K;z++)H==="strict"?M[J[z]]=[P[J[z]]]:M[J[z]]=P[J[z]]}},f.getValue=function(M){return f.isExist(M)?M:""},f.isName=F,f.getAllMatches=T,f.nameRegexp=_})(we);const at=we,Ea={allowBooleanAttributes:!1,unpairedTags:[]};nt.validate=function(f,s){s=Object.assign({},Ea,s);const d=[];let _=!1,S=!1;f[0]==="\uFEFF"&&(f=f.substr(1));for(let T=0;T<f.length;T++)if(f[T]==="<"&&f[T+1]==="?"){if(T+=2,T=Qt(f,T),T.err)return T}else if(f[T]==="<"){let F=T;if(T++,f[T]==="!"){T=Dt(f,T);continue}else{let M=!1;f[T]==="/"&&(M=!0,T++);let P="";for(;T<f.length&&f[T]!==">"&&f[T]!==" "&&f[T]!=="	"&&f[T]!==`
`&&f[T]!=="\r";T++)P+=f[T];if(P=P.trim(),P[P.length-1]==="/"&&(P=P.substring(0,P.length-1),T--),!xa(P)){let K;return P.trim().length===0?K="Invalid space after '<'.":K="Tag '"+P+"' is an invalid name.",j("InvalidTag",K,R(f,T))}const H=Ca(f,T);if(H===!1)return j("InvalidAttr","Attributes for '"+P+"' have open quote.",R(f,T));let J=H.value;if(T=H.index,J[J.length-1]==="/"){const K=T-J.length;J=J.substring(0,J.length-1);const z=er(J,s);if(z===!0)_=!0;else return j(z.err.code,z.err.msg,R(f,K+z.err.line))}else if(M)if(H.tagClosed){if(J.trim().length>0)return j("InvalidTag","Closing tag '"+P+"' can't have attributes or invalid starting.",R(f,F));{const K=d.pop();if(P!==K.tagName){let z=R(f,K.tagStartPos);return j("InvalidTag","Expected closing tag '"+K.tagName+"' (opened in line "+z.line+", col "+z.col+") instead of closing tag '"+P+"'.",R(f,F))}d.length==0&&(S=!0)}}else return j("InvalidTag","Closing tag '"+P+"' doesn't have proper closing.",R(f,T));else{const K=er(J,s);if(K!==!0)return j(K.err.code,K.err.msg,R(f,T-J.length+K.err.line));if(S===!0)return j("InvalidXml","Multiple possible root nodes found.",R(f,T));s.unpairedTags.indexOf(P)!==-1||d.push({tagName:P,tagStartPos:F}),_=!0}for(T++;T<f.length;T++)if(f[T]==="<")if(f[T+1]==="!"){T++,T=Dt(f,T);continue}else if(f[T+1]==="?"){if(T=Qt(f,++T),T.err)return T}else break;else if(f[T]==="&"){const K=Pa(f,T);if(K==-1)return j("InvalidChar","char '&' is not expected.",R(f,T));T=K}else if(S===!0&&!Zt(f[T]))return j("InvalidXml","Extra text at the end",R(f,T));f[T]==="<"&&T--}}else{if(Zt(f[T]))continue;return j("InvalidChar","char '"+f[T]+"' is not expected.",R(f,T))}if(_){if(d.length==1)return j("InvalidTag","Unclosed tag '"+d[0].tagName+"'.",R(f,d[0].tagStartPos));if(d.length>0)return j("InvalidXml","Invalid '"+JSON.stringify(d.map(T=>T.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return j("InvalidXml","Start tag expected.",1);return!0};function Zt(f){return f===" "||f==="	"||f===`
`||f==="\r"}function Qt(f,s){const d=s;for(;s<f.length;s++)if(f[s]=="?"||f[s]==" "){const _=f.substr(d,s-d);if(s>5&&_==="xml")return j("InvalidXml","XML declaration allowed only at the start of the document.",R(f,s));if(f[s]=="?"&&f[s+1]==">"){s++;break}else continue}return s}function Dt(f,s){if(f.length>s+5&&f[s+1]==="-"&&f[s+2]==="-"){for(s+=3;s<f.length;s++)if(f[s]==="-"&&f[s+1]==="-"&&f[s+2]===">"){s+=2;break}}else if(f.length>s+8&&f[s+1]==="D"&&f[s+2]==="O"&&f[s+3]==="C"&&f[s+4]==="T"&&f[s+5]==="Y"&&f[s+6]==="P"&&f[s+7]==="E"){let d=1;for(s+=8;s<f.length;s++)if(f[s]==="<")d++;else if(f[s]===">"&&(d--,d===0))break}else if(f.length>s+9&&f[s+1]==="["&&f[s+2]==="C"&&f[s+3]==="D"&&f[s+4]==="A"&&f[s+5]==="T"&&f[s+6]==="A"&&f[s+7]==="["){for(s+=8;s<f.length;s++)if(f[s]==="]"&&f[s+1]==="]"&&f[s+2]===">"){s+=2;break}}return s}const Aa='"',Oa="'";function Ca(f,s){let d="",_="",S=!1;for(;s<f.length;s++){if(f[s]===Aa||f[s]===Oa)_===""?_=f[s]:_!==f[s]||(_="");else if(f[s]===">"&&_===""){S=!0;break}d+=f[s]}return _!==""?!1:{value:d,index:s,tagClosed:S}}const Na=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function er(f,s){const d=at.getAllMatches(f,Na),_={};for(let S=0;S<d.length;S++){if(d[S][1].length===0)return j("InvalidAttr","Attribute '"+d[S][2]+"' has no space in starting.",ue(d[S]));if(d[S][3]!==void 0&&d[S][4]===void 0)return j("InvalidAttr","Attribute '"+d[S][2]+"' is without value.",ue(d[S]));if(d[S][3]===void 0&&!s.allowBooleanAttributes)return j("InvalidAttr","boolean attribute '"+d[S][2]+"' is not allowed.",ue(d[S]));const T=d[S][2];if(!Sa(T))return j("InvalidAttr","Attribute '"+T+"' is an invalid name.",ue(d[S]));if(!_.hasOwnProperty(T))_[T]=1;else return j("InvalidAttr","Attribute '"+T+"' is repeated.",ue(d[S]))}return!0}function wa(f,s){let d=/\d/;for(f[s]==="x"&&(s++,d=/[\da-fA-F]/);s<f.length;s++){if(f[s]===";")return s;if(!f[s].match(d))break}return-1}function Pa(f,s){if(s++,f[s]===";")return-1;if(f[s]==="#")return s++,wa(f,s);let d=0;for(;s<f.length;s++,d++)if(!(f[s].match(/\w/)&&d<20)){if(f[s]===";")break;return-1}return s}function j(f,s,d){return{err:{code:f,msg:s,line:d.line||d,col:d.col}}}function Sa(f){return at.isName(f)}function xa(f){return at.isName(f)}function R(f,s){const d=f.substring(0,s).split(/\r?\n/);return{line:d.length,col:d[d.length-1].length+1}}function ue(f){return f.startIndex+f[1].length}var st={};const Qr={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(f,s){return s},attributeValueProcessor:function(f,s){return s},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(f,s,d){return f}},ja=function(f){return Object.assign({},Qr,f)};st.buildOptions=ja;st.defaultOptions=Qr;class Ia{constructor(s){this.tagname=s,this.child=[],this[":@"]={}}add(s,d){s==="__proto__"&&(s="#__proto__"),this.child.push({[s]:d})}addChild(s){s.tagname==="__proto__"&&(s.tagname="#__proto__"),s[":@"]&&Object.keys(s[":@"]).length>0?this.child.push({[s.tagname]:s.child,":@":s[":@"]}):this.child.push({[s.tagname]:s.child})}}var Ra=Ia;const Fa=we;function La(f,s){const d={};if(f[s+3]==="O"&&f[s+4]==="C"&&f[s+5]==="T"&&f[s+6]==="Y"&&f[s+7]==="P"&&f[s+8]==="E"){s=s+9;let _=1,S=!1,T=!1,F="";for(;s<f.length;s++)if(f[s]==="<"&&!T){if(S&&Ga(f,s))s+=7,[entityName,val,s]=Ma(f,s+1),val.indexOf("&")===-1&&(d[Ka(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(S&&Va(f,s))s+=8;else if(S&&Ua(f,s))s+=8;else if(S&&ka(f,s))s+=9;else if(Ba)T=!0;else throw new Error("Invalid DOCTYPE");_++,F=""}else if(f[s]===">"){if(T?f[s-1]==="-"&&f[s-2]==="-"&&(T=!1,_--):_--,_===0)break}else f[s]==="["?S=!0:F+=f[s];if(_!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:d,i:s}}function Ma(f,s){let d="";for(;s<f.length&&f[s]!=="'"&&f[s]!=='"';s++)d+=f[s];if(d=d.trim(),d.indexOf(" ")!==-1)throw new Error("External entites are not supported");const _=f[s++];let S="";for(;s<f.length&&f[s]!==_;s++)S+=f[s];return[d,S,s]}function Ba(f,s){return f[s+1]==="!"&&f[s+2]==="-"&&f[s+3]==="-"}function Ga(f,s){return f[s+1]==="!"&&f[s+2]==="E"&&f[s+3]==="N"&&f[s+4]==="T"&&f[s+5]==="I"&&f[s+6]==="T"&&f[s+7]==="Y"}function Va(f,s){return f[s+1]==="!"&&f[s+2]==="E"&&f[s+3]==="L"&&f[s+4]==="E"&&f[s+5]==="M"&&f[s+6]==="E"&&f[s+7]==="N"&&f[s+8]==="T"}function Ua(f,s){return f[s+1]==="!"&&f[s+2]==="A"&&f[s+3]==="T"&&f[s+4]==="T"&&f[s+5]==="L"&&f[s+6]==="I"&&f[s+7]==="S"&&f[s+8]==="T"}function ka(f,s){return f[s+1]==="!"&&f[s+2]==="N"&&f[s+3]==="O"&&f[s+4]==="T"&&f[s+5]==="A"&&f[s+6]==="T"&&f[s+7]==="I"&&f[s+8]==="O"&&f[s+9]==="N"}function Ka(f){if(Fa.isName(f))return f;throw new Error(`Invalid entity name ${f}`)}var Xa=La;const Wa=/^[-+]?0x[a-fA-F0-9]+$/,Ya=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const qa={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Ha(f,s={}){if(s=Object.assign({},qa,s),!f||typeof f!="string")return f;let d=f.trim();if(s.skipLike!==void 0&&s.skipLike.test(d))return f;if(s.hex&&Wa.test(d))return Number.parseInt(d,16);{const _=Ya.exec(d);if(_){const S=_[1],T=_[2];let F=za(_[3]);const M=_[4]||_[6];if(!s.leadingZeros&&T.length>0&&S&&d[2]!=="."||!s.leadingZeros&&T.length>0&&!S&&d[1]!==".")return f;{const P=Number(d),H=""+P;return H.search(/[eE]/)!==-1||M?s.eNotation?P:f:d.indexOf(".")!==-1?H==="0"&&F===""||H===F||S&&H==="-"+F?P:f:T?F===H||S+F===H?P:f:d===H||d===S+H?P:f}}else return f}}function za(f){return f&&f.indexOf(".")!==-1&&(f=f.replace(/0+$/,""),f==="."?f="0":f[0]==="."?f="0"+f:f[f.length-1]==="."&&(f=f.substr(0,f.length-1))),f}var Ja=Ha;const it=we,le=Ra,Za=Xa,Qa=Ja;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,it.nameRegexp);let Da=class{constructor(f){this.options=f,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=es,this.parseXml=ss,this.parseTextData=ts,this.resolveNameSpace=rs,this.buildAttributesMap=as,this.isItStopNode=ls,this.replaceEntitiesValue=os,this.readStopNodeData=fs,this.saveTextToParentTag=us,this.addChild=is}};function es(f){const s=Object.keys(f);for(let d=0;d<s.length;d++){const _=s[d];this.lastEntities[_]={regex:new RegExp("&"+_+";","g"),val:f[_]}}}function ts(f,s,d,_,S,T,F){if(f!==void 0&&(this.options.trimValues&&!_&&(f=f.trim()),f.length>0)){F||(f=this.replaceEntitiesValue(f));const M=this.options.tagValueProcessor(s,f,d,S,T);return M==null?f:typeof M!=typeof f||M!==f?M:this.options.trimValues?He(f,this.options.parseTagValue,this.options.numberParseOptions):f.trim()===f?He(f,this.options.parseTagValue,this.options.numberParseOptions):f}}function rs(f){if(this.options.removeNSPrefix){const s=f.split(":"),d=f.charAt(0)==="/"?"/":"";if(s[0]==="xmlns")return"";s.length===2&&(f=d+s[1])}return f}const ns=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function as(f,s,d){if(!this.options.ignoreAttributes&&typeof f=="string"){const _=it.getAllMatches(f,ns),S=_.length,T={};for(let F=0;F<S;F++){const M=this.resolveNameSpace(_[F][1]);let P=_[F][4],H=this.options.attributeNamePrefix+M;if(M.length)if(this.options.transformAttributeName&&(H=this.options.transformAttributeName(H)),H==="__proto__"&&(H="#__proto__"),P!==void 0){this.options.trimValues&&(P=P.trim()),P=this.replaceEntitiesValue(P);const J=this.options.attributeValueProcessor(M,P,s);J==null?T[H]=P:typeof J!=typeof P||J!==P?T[H]=J:T[H]=He(P,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(T[H]=!0)}if(!Object.keys(T).length)return;if(this.options.attributesGroupName){const F={};return F[this.options.attributesGroupName]=T,F}return T}}const ss=function(f){f=f.replace(/\r\n?/g,`
`);const s=new le("!xml");let d=s,_="",S="";for(let T=0;T<f.length;T++)if(f[T]==="<")if(f[T+1]==="/"){const F=W(f,">",T,"Closing Tag is not closed.");let M=f.substring(T+2,F).trim();if(this.options.removeNSPrefix){const J=M.indexOf(":");J!==-1&&(M=M.substr(J+1))}this.options.transformTagName&&(M=this.options.transformTagName(M)),d&&(_=this.saveTextToParentTag(_,d,S));const P=S.substring(S.lastIndexOf(".")+1);if(M&&this.options.unpairedTags.indexOf(M)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${M}>`);let H=0;P&&this.options.unpairedTags.indexOf(P)!==-1?(H=S.lastIndexOf(".",S.lastIndexOf(".")-1),this.tagsNodeStack.pop()):H=S.lastIndexOf("."),S=S.substring(0,H),d=this.tagsNodeStack.pop(),_="",T=F}else if(f[T+1]==="?"){let F=qe(f,T,!1,"?>");if(!F)throw new Error("Pi Tag is not closed.");if(_=this.saveTextToParentTag(_,d,S),!(this.options.ignoreDeclaration&&F.tagName==="?xml"||this.options.ignorePiTags)){const M=new le(F.tagName);M.add(this.options.textNodeName,""),F.tagName!==F.tagExp&&F.attrExpPresent&&(M[":@"]=this.buildAttributesMap(F.tagExp,S,F.tagName)),this.addChild(d,M,S)}T=F.closeIndex+1}else if(f.substr(T+1,3)==="!--"){const F=W(f,"-->",T+4,"Comment is not closed.");if(this.options.commentPropName){const M=f.substring(T+4,F-2);_=this.saveTextToParentTag(_,d,S),d.add(this.options.commentPropName,[{[this.options.textNodeName]:M}])}T=F}else if(f.substr(T+1,2)==="!D"){const F=Za(f,T);this.docTypeEntities=F.entities,T=F.i}else if(f.substr(T+1,2)==="!["){const F=W(f,"]]>",T,"CDATA is not closed.")-2,M=f.substring(T+9,F);if(_=this.saveTextToParentTag(_,d,S),this.options.cdataPropName)d.add(this.options.cdataPropName,[{[this.options.textNodeName]:M}]);else{let P=this.parseTextData(M,d.tagname,S,!0,!1,!0);P==null&&(P=""),d.add(this.options.textNodeName,P)}T=F+2}else{let F=qe(f,T,this.options.removeNSPrefix),M=F.tagName,P=F.tagExp,H=F.attrExpPresent,J=F.closeIndex;this.options.transformTagName&&(M=this.options.transformTagName(M)),d&&_&&d.tagname!=="!xml"&&(_=this.saveTextToParentTag(_,d,S,!1));const K=d;if(K&&this.options.unpairedTags.indexOf(K.tagname)!==-1&&(d=this.tagsNodeStack.pop(),S=S.substring(0,S.lastIndexOf("."))),M!==s.tagname&&(S+=S?"."+M:M),this.isItStopNode(this.options.stopNodes,S,M)){let z="";if(P.length>0&&P.lastIndexOf("/")===P.length-1)T=F.closeIndex;else if(this.options.unpairedTags.indexOf(M)!==-1)T=F.closeIndex;else{const se=this.readStopNodeData(f,M,J+1);if(!se)throw new Error(`Unexpected end of ${M}`);T=se.i,z=se.tagContent}const oe=new le(M);M!==P&&H&&(oe[":@"]=this.buildAttributesMap(P,S,M)),z&&(z=this.parseTextData(z,M,S,!0,H,!0,!0)),S=S.substr(0,S.lastIndexOf(".")),oe.add(this.options.textNodeName,z),this.addChild(d,oe,S)}else{if(P.length>0&&P.lastIndexOf("/")===P.length-1){M[M.length-1]==="/"?(M=M.substr(0,M.length-1),P=M):P=P.substr(0,P.length-1),this.options.transformTagName&&(M=this.options.transformTagName(M));const z=new le(M);M!==P&&H&&(z[":@"]=this.buildAttributesMap(P,S,M)),this.addChild(d,z,S),S=S.substr(0,S.lastIndexOf("."))}else{const z=new le(M);this.tagsNodeStack.push(d),M!==P&&H&&(z[":@"]=this.buildAttributesMap(P,S,M)),this.addChild(d,z,S),d=z}_="",T=J}}else _+=f[T];return s.child};function is(f,s,d){const _=this.options.updateTag(s.tagname,d,s[":@"]);_===!1||(typeof _=="string"&&(s.tagname=_),f.addChild(s))}const os=function(f){if(this.options.processEntities){for(let s in this.docTypeEntities){const d=this.docTypeEntities[s];f=f.replace(d.regx,d.val)}for(let s in this.lastEntities){const d=this.lastEntities[s];f=f.replace(d.regex,d.val)}if(this.options.htmlEntities)for(let s in this.htmlEntities){const d=this.htmlEntities[s];f=f.replace(d.regex,d.val)}f=f.replace(this.ampEntity.regex,this.ampEntity.val)}return f};function us(f,s,d,_){return f&&(_===void 0&&(_=Object.keys(s.child).length===0),f=this.parseTextData(f,s.tagname,d,!1,s[":@"]?Object.keys(s[":@"]).length!==0:!1,_),f!==void 0&&f!==""&&s.add(this.options.textNodeName,f),f=""),f}function ls(f,s,d){const _="*."+d;for(const S in f){const T=f[S];if(_===T||s===T)return!0}return!1}function cs(f,s,d=">"){let _,S="";for(let T=s;T<f.length;T++){let F=f[T];if(_)F===_&&(_="");else if(F==='"'||F==="'")_=F;else if(F===d[0])if(d[1]){if(f[T+1]===d[1])return{data:S,index:T}}else return{data:S,index:T};else F==="	"&&(F=" ");S+=F}}function W(f,s,d,_){const S=f.indexOf(s,d);if(S===-1)throw new Error(_);return S+s.length-1}function qe(f,s,d,_=">"){const S=cs(f,s+1,_);if(!S)return;let T=S.data;const F=S.index,M=T.search(/\s/);let P=T,H=!0;if(M!==-1&&(P=T.substr(0,M).replace(/\s\s*$/,""),T=T.substr(M+1)),d){const J=P.indexOf(":");J!==-1&&(P=P.substr(J+1),H=P!==S.data.substr(J+1))}return{tagName:P,tagExp:T,closeIndex:F,attrExpPresent:H}}function fs(f,s,d){const _=d;let S=1;for(;d<f.length;d++)if(f[d]==="<")if(f[d+1]==="/"){const T=W(f,">",d,`${s} is not closed`);if(f.substring(d+2,T).trim()===s&&(S--,S===0))return{tagContent:f.substring(_,d),i:T};d=T}else if(f[d+1]==="?")d=W(f,"?>",d+1,"StopNode is not closed.");else if(f.substr(d+1,3)==="!--")d=W(f,"-->",d+3,"StopNode is not closed.");else if(f.substr(d+1,2)==="![")d=W(f,"]]>",d,"StopNode is not closed.")-2;else{const T=qe(f,d,">");T&&((T&&T.tagName)===s&&T.tagExp[T.tagExp.length-1]!=="/"&&S++,d=T.closeIndex)}}function He(f,s,d){if(s&&typeof f=="string"){const _=f.trim();return _==="true"?!0:_==="false"?!1:Qa(f,d)}else return it.isExist(f)?f:""}var ds=Da,Dr={};function ps(f,s){return en(f,s)}function en(f,s,d){let _;const S={};for(let T=0;T<f.length;T++){const F=f[T],M=gs(F);let P="";if(d===void 0?P=M:P=d+"."+M,M===s.textNodeName)_===void 0?_=F[M]:_+=""+F[M];else{if(M===void 0)continue;if(F[M]){let H=en(F[M],s,P);const J=vs(H,s);F[":@"]?hs(H,F[":@"],P,s):Object.keys(H).length===1&&H[s.textNodeName]!==void 0&&!s.alwaysCreateTextNode?H=H[s.textNodeName]:Object.keys(H).length===0&&(s.alwaysCreateTextNode?H[s.textNodeName]="":H=""),S[M]!==void 0&&S.hasOwnProperty(M)?(Array.isArray(S[M])||(S[M]=[S[M]]),S[M].push(H)):s.isArray(M,P,J)?S[M]=[H]:S[M]=H}}}return typeof _=="string"?_.length>0&&(S[s.textNodeName]=_):_!==void 0&&(S[s.textNodeName]=_),S}function gs(f){const s=Object.keys(f);for(let d=0;d<s.length;d++){const _=s[d];if(_!==":@")return _}}function hs(f,s,d,_){if(s){const S=Object.keys(s),T=S.length;for(let F=0;F<T;F++){const M=S[F];_.isArray(M,d+"."+M,!0,!0)?f[M]=[s[M]]:f[M]=s[M]}}}function vs(f,s){const{textNodeName:d}=s,_=Object.keys(f).length;return!!(_===0||_===1&&(f[d]||typeof f[d]=="boolean"||f[d]===0))}Dr.prettify=ps;const{buildOptions:bs}=st,ys=ds,{prettify:$s}=Dr,_s=nt;let Ts=class{constructor(f){this.externalEntities={},this.options=bs(f)}parse(f,s){if(typeof f!="string")if(f.toString)f=f.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(s){s===!0&&(s={});const S=_s.validate(f,s);if(S!==!0)throw Error(`${S.err.msg}:${S.err.line}:${S.err.col}`)}const d=new ys(this.options);d.addExternalEntities(this.externalEntities);const _=d.parseXml(f);return this.options.preserveOrder||_===void 0?_:$s(_,this.options)}addEntity(f,s){if(s.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(f.indexOf("&")!==-1||f.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(s==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[f]=s}};var ms=Ts;const Es=`
`;function As(f,s){let d="";return s.format&&s.indentBy.length>0&&(d=Es),tn(f,s,"",d)}function tn(f,s,d,_){let S="",T=!1;for(let F=0;F<f.length;F++){const M=f[F],P=Os(M);let H="";if(d.length===0?H=P:H=`${d}.${P}`,P===s.textNodeName){let se=M[P];Cs(H,s)||(se=s.tagValueProcessor(P,se),se=rn(se,s)),T&&(S+=_),S+=se,T=!1;continue}else if(P===s.cdataPropName){T&&(S+=_),S+=`<![CDATA[${M[P][0][s.textNodeName]}]]>`,T=!1;continue}else if(P===s.commentPropName){S+=_+`<!--${M[P][0][s.textNodeName]}-->`,T=!0;continue}else if(P[0]==="?"){const se=tr(M[":@"],s),ae=P==="?xml"?"":_;let ge=M[P][0][s.textNodeName];ge=ge.length!==0?" "+ge:"",S+=ae+`<${P}${ge}${se}?>`,T=!0;continue}let J=_;J!==""&&(J+=s.indentBy);const K=tr(M[":@"],s),z=_+`<${P}${K}`,oe=tn(M[P],s,H,J);s.unpairedTags.indexOf(P)!==-1?s.suppressUnpairedNode?S+=z+">":S+=z+"/>":(!oe||oe.length===0)&&s.suppressEmptyNode?S+=z+"/>":oe&&oe.endsWith(">")?S+=z+`>${oe}${_}</${P}>`:(S+=z+">",oe&&_!==""&&(oe.includes("/>")||oe.includes("</"))?S+=_+s.indentBy+oe+_:S+=oe,S+=`</${P}>`),T=!0}return S}function Os(f){const s=Object.keys(f);for(let d=0;d<s.length;d++){const _=s[d];if(_!==":@")return _}}function tr(f,s){let d="";if(f&&!s.ignoreAttributes)for(let _ in f){let S=s.attributeValueProcessor(_,f[_]);S=rn(S,s),S===!0&&s.suppressBooleanAttributes?d+=` ${_.substr(s.attributeNamePrefix.length)}`:d+=` ${_.substr(s.attributeNamePrefix.length)}="${S}"`}return d}function Cs(f,s){f=f.substr(0,f.length-s.textNodeName.length-1);let d=f.substr(f.lastIndexOf(".")+1);for(let _ in s.stopNodes)if(s.stopNodes[_]===f||s.stopNodes[_]==="*."+d)return!0;return!1}function rn(f,s){if(f&&f.length>0&&s.processEntities)for(let d=0;d<s.entities.length;d++){const _=s.entities[d];f=f.replace(_.regex,_.val)}return f}var Ns=As;const ws=Ns,Ps={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(f,s){return s},attributeValueProcessor:function(f,s){return s},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function V(f){this.options=Object.assign({},Ps,f),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=js),this.processTextOrObjNode=Ss,this.options.format?(this.indentate=xs,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}V.prototype.build=function(f){return this.options.preserveOrder?ws(f,this.options):(Array.isArray(f)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(f={[this.options.arrayNodeName]:f}),this.j2x(f,0).val)};V.prototype.j2x=function(f,s){let d="",_="";for(let S in f)if(!(typeof f[S]>"u"))if(f[S]===null)S[0]==="?"?_+=this.indentate(s)+"<"+S+"?"+this.tagEndChar:_+=this.indentate(s)+"<"+S+"/"+this.tagEndChar;else if(f[S]instanceof Date)_+=this.buildTextValNode(f[S],S,"",s);else if(typeof f[S]!="object"){const T=this.isAttribute(S);if(T)d+=this.buildAttrPairStr(T,""+f[S]);else if(S===this.options.textNodeName){let F=this.options.tagValueProcessor(S,""+f[S]);_+=this.replaceEntitiesValue(F)}else _+=this.buildTextValNode(f[S],S,"",s)}else if(Array.isArray(f[S])){const T=f[S].length;let F="";for(let M=0;M<T;M++){const P=f[S][M];typeof P>"u"||(P===null?S[0]==="?"?_+=this.indentate(s)+"<"+S+"?"+this.tagEndChar:_+=this.indentate(s)+"<"+S+"/"+this.tagEndChar:typeof P=="object"?this.options.oneListGroup?F+=this.j2x(P,s+1).val:F+=this.processTextOrObjNode(P,S,s):F+=this.buildTextValNode(P,S,"",s))}this.options.oneListGroup&&(F=this.buildObjectNode(F,S,"",s)),_+=F}else if(this.options.attributesGroupName&&S===this.options.attributesGroupName){const T=Object.keys(f[S]),F=T.length;for(let M=0;M<F;M++)d+=this.buildAttrPairStr(T[M],""+f[S][T[M]])}else _+=this.processTextOrObjNode(f[S],S,s);return{attrStr:d,val:_}};V.prototype.buildAttrPairStr=function(f,s){return s=this.options.attributeValueProcessor(f,""+s),s=this.replaceEntitiesValue(s),this.options.suppressBooleanAttributes&&s==="true"?" "+f:" "+f+'="'+s+'"'};function Ss(f,s,d){const _=this.j2x(f,d+1);return f[this.options.textNodeName]!==void 0&&Object.keys(f).length===1?this.buildTextValNode(f[this.options.textNodeName],s,_.attrStr,d):this.buildObjectNode(_.val,s,_.attrStr,d)}V.prototype.buildObjectNode=function(f,s,d,_){if(f==="")return s[0]==="?"?this.indentate(_)+"<"+s+d+"?"+this.tagEndChar:this.indentate(_)+"<"+s+d+this.closeTag(s)+this.tagEndChar;{let S="</"+s+this.tagEndChar,T="";return s[0]==="?"&&(T="?",S=""),d&&f.indexOf("<")===-1?this.indentate(_)+"<"+s+d+T+">"+f+S:this.options.commentPropName!==!1&&s===this.options.commentPropName&&T.length===0?this.indentate(_)+`<!--${f}-->`+this.newLine:this.indentate(_)+"<"+s+d+T+this.tagEndChar+f+this.indentate(_)+S}};V.prototype.closeTag=function(f){let s="";return this.options.unpairedTags.indexOf(f)!==-1?this.options.suppressUnpairedNode||(s="/"):this.options.suppressEmptyNode?s="/":s=`></${f}`,s};V.prototype.buildTextValNode=function(f,s,d,_){if(this.options.cdataPropName!==!1&&s===this.options.cdataPropName)return this.indentate(_)+`<![CDATA[${f}]]>`+this.newLine;if(this.options.commentPropName!==!1&&s===this.options.commentPropName)return this.indentate(_)+`<!--${f}-->`+this.newLine;if(s[0]==="?")return this.indentate(_)+"<"+s+d+"?"+this.tagEndChar;{let S=this.options.tagValueProcessor(s,f);return S=this.replaceEntitiesValue(S),S===""?this.indentate(_)+"<"+s+d+this.closeTag(s)+this.tagEndChar:this.indentate(_)+"<"+s+d+">"+S+"</"+s+this.tagEndChar}};V.prototype.replaceEntitiesValue=function(f){if(f&&f.length>0&&this.options.processEntities)for(let s=0;s<this.options.entities.length;s++){const d=this.options.entities[s];f=f.replace(d.regex,d.val)}return f};function xs(f){return this.options.indentBy.repeat(f)}function js(f){return f.startsWith(this.options.attributeNamePrefix)?f.substr(this.attrPrefixLen):!1}var Is=V;const Rs=nt,Fs=ms,Ls=Is;var Ms={XMLParser:Fs,XMLValidator:Rs,XMLBuilder:Ls};const Bs=new Ms.XMLParser({preserveOrder:!0,ignoreAttributes:!1,attributeNamePrefix:"",allowBooleanAttributes:!0,commentPropName:tt,cdataPropName:rt,parseTagValue:!1});function Gs(f){return reactExports.useMemo(()=>{try{return{json:Bs.parse(f),valid:!0}}catch(s){return{json:null,valid:!1,errorMessage:`Fail to parse: ${s.message}`}}},[f])}function Vs(){this.__data__=[],this.size=0}var Us=Vs;function ks(f,s){return f===s||f!==f&&s!==s}var ot=ks,Ks=ot;function Xs(f,s){for(var d=f.length;d--;)if(Ks(f[d][0],s))return d;return-1}var Pe=Xs,Ws=Pe,Ys=Array.prototype,qs=Ys.splice;function Hs(f){var s=this.__data__,d=Ws(s,f);if(d<0)return!1;var _=s.length-1;return d==_?s.pop():qs.call(s,d,1),--this.size,!0}var zs=Hs,Js=Pe;function Zs(f){var s=this.__data__,d=Js(s,f);return d<0?void 0:s[d][1]}var Qs=Zs,Ds=Pe;function ei(f){return Ds(this.__data__,f)>-1}var ti=ei,ri=Pe;function ni(f,s){var d=this.__data__,_=ri(d,f);return _<0?(++this.size,d.push([f,s])):d[_][1]=s,this}var ai=ni,si=Us,ii=zs,oi=Qs,ui=ti,li=ai;function Z(f){var s=-1,d=f==null?0:f.length;for(this.clear();++s<d;){var _=f[s];this.set(_[0],_[1])}}Z.prototype.clear=si;Z.prototype.delete=ii;Z.prototype.get=oi;Z.prototype.has=ui;Z.prototype.set=li;var Se=Z,ci=Se;function fi(){this.__data__=new ci,this.size=0}var di=fi;function pi$3(f){var s=this.__data__,d=s.delete(f);return this.size=s.size,d}var gi=pi$3;function hi(f){return this.__data__.get(f)}var vi=hi;function bi(f){return this.__data__.has(f)}var yi=bi,$i=typeof $e=="object"&&$e&&$e.Object===Object&&$e,nn=$i,_i=nn,Ti=typeof self=="object"&&self&&self.Object===Object&&self,mi=_i||Ti||Function("return this")(),L=mi,Ei=L,Ai=Ei.Symbol,Q=Ai,rr=Q,an=Object.prototype,Oi=an.hasOwnProperty,Ci=an.toString,ce=rr?rr.toStringTag:void 0;function Ni(f){var s=Oi.call(f,ce),d=f[ce];try{f[ce]=void 0;var _=!0}catch{}var S=Ci.call(f);return _&&(s?f[ce]=d:delete f[ce]),S}var wi=Ni,Pi=Object.prototype,Si=Pi.toString;function xi(f){return Si.call(f)}var ji=xi,nr=Q,Ii=wi,Ri=ji,Fi="[object Null]",Li="[object Undefined]",ar=nr?nr.toStringTag:void 0;function Mi(f){return f==null?f===void 0?Li:Fi:ar&&ar in Object(f)?Ii(f):Ri(f)}var D=Mi;function Bi(f){var s=typeof f;return f!=null&&(s=="object"||s=="function")}var fe=Bi,Gi=D,Vi=fe,Ui="[object AsyncFunction]",ki="[object Function]",Ki="[object GeneratorFunction]",Xi="[object Proxy]";function Wi(f){if(!Vi(f))return!1;var s=Gi(f);return s==ki||s==Ki||s==Ui||s==Xi}var sn=Wi,Yi=L,qi=Yi["__core-js_shared__"],Hi=qi,ke=Hi,sr=function(){var f=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}();function zi(f){return!!sr&&sr in f}var Ji=zi,Zi=Function.prototype,Qi=Zi.toString;function Di(f){if(f!=null){try{return Qi.call(f)}catch{}try{return f+""}catch{}}return""}var on=Di,eo=sn,to=Ji,ro=fe,no=on,ao=/[\\^$.*+?()[\]{}|]/g,so=/^\[object .+?Constructor\]$/,io=Function.prototype,oo=Object.prototype,uo=io.toString,lo=oo.hasOwnProperty,co=RegExp("^"+uo.call(lo).replace(ao,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fo(f){if(!ro(f)||to(f))return!1;var s=eo(f)?co:so;return s.test(no(f))}var po=fo;function go(f,s){return f==null?void 0:f[s]}var ho=go,vo=po,bo=ho;function yo(f,s){var d=bo(f,s);return vo(d)?d:void 0}var Y$1=yo,$o=Y$1,_o=L,To=$o(_o,"Map"),ut=To,mo=Y$1,Eo=mo(Object,"create"),xe=Eo,ir=xe;function Ao(){this.__data__=ir?ir(null):{},this.size=0}var Oo=Ao;function Co(f){var s=this.has(f)&&delete this.__data__[f];return this.size-=s?1:0,s}var No=Co,wo=xe,Po="__lodash_hash_undefined__",So=Object.prototype,xo=So.hasOwnProperty;function jo(f){var s=this.__data__;if(wo){var d=s[f];return d===Po?void 0:d}return xo.call(s,f)?s[f]:void 0}var Io=jo,Ro=xe,Fo=Object.prototype,Lo=Fo.hasOwnProperty;function Mo(f){var s=this.__data__;return Ro?s[f]!==void 0:Lo.call(s,f)}var Bo=Mo,Go=xe,Vo="__lodash_hash_undefined__";function Uo(f,s){var d=this.__data__;return this.size+=this.has(f)?0:1,d[f]=Go&&s===void 0?Vo:s,this}var ko=Uo,Ko=Oo,Xo=No,Wo=Io,Yo=Bo,qo=ko;function ee(f){var s=-1,d=f==null?0:f.length;for(this.clear();++s<d;){var _=f[s];this.set(_[0],_[1])}}ee.prototype.clear=Ko;ee.prototype.delete=Xo;ee.prototype.get=Wo;ee.prototype.has=Yo;ee.prototype.set=qo;var Ho=ee,or=Ho,zo=Se,Jo=ut;function Zo(){this.size=0,this.__data__={hash:new or,map:new(Jo||zo),string:new or}}var Qo=Zo;function Do(f){var s=typeof f;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?f!=="__proto__":f===null}var eu=Do,tu=eu;function ru(f,s){var d=f.__data__;return tu(s)?d[typeof s=="string"?"string":"hash"]:d.map}var je=ru,nu=je;function au(f){var s=nu(this,f).delete(f);return this.size-=s?1:0,s}var su=au,iu=je;function ou(f){return iu(this,f).get(f)}var uu=ou,lu=je;function cu(f){return lu(this,f).has(f)}var fu=cu,du=je;function pu(f,s){var d=du(this,f),_=d.size;return d.set(f,s),this.size+=d.size==_?0:1,this}var gu=pu,hu=Qo,vu=su,bu=uu,yu=fu,$u=gu;function te(f){var s=-1,d=f==null?0:f.length;for(this.clear();++s<d;){var _=f[s];this.set(_[0],_[1])}}te.prototype.clear=hu;te.prototype.delete=vu;te.prototype.get=bu;te.prototype.has=yu;te.prototype.set=$u;var lt=te,_u=Se,Tu=ut,mu=lt,Eu=200;function Au(f,s){var d=this.__data__;if(d instanceof _u){var _=d.__data__;if(!Tu||_.length<Eu-1)return _.push([f,s]),this.size=++d.size,this;d=this.__data__=new mu(_)}return d.set(f,s),this.size=d.size,this}var Ou=Au,Cu=Se,Nu=di,wu=gi,Pu=vi,Su=yi,xu=Ou;function re(f){var s=this.__data__=new Cu(f);this.size=s.size}re.prototype.clear=Nu;re.prototype.delete=wu;re.prototype.get=Pu;re.prototype.has=Su;re.prototype.set=xu;var un=re,ju="__lodash_hash_undefined__";function Iu(f){return this.__data__.set(f,ju),this}var Ru=Iu;function Fu(f){return this.__data__.has(f)}var Lu=Fu,Mu=lt,Bu=Ru,Gu=Lu;function Ae(f){var s=-1,d=f==null?0:f.length;for(this.__data__=new Mu;++s<d;)this.add(f[s])}Ae.prototype.add=Ae.prototype.push=Bu;Ae.prototype.has=Gu;var Vu=Ae;function Uu(f,s){for(var d=-1,_=f==null?0:f.length;++d<_;)if(s(f[d],d,f))return!0;return!1}var ku=Uu;function Ku(f,s){return f.has(s)}var Xu=Ku,Wu=Vu,Yu=ku,qu=Xu,Hu=1,zu=2;function Ju(f,s,d,_,S,T){var F=d&Hu,M=f.length,P=s.length;if(M!=P&&!(F&&P>M))return!1;var H=T.get(f),J=T.get(s);if(H&&J)return H==s&&J==f;var K=-1,z=!0,oe=d&zu?new Wu:void 0;for(T.set(f,s),T.set(s,f);++K<M;){var se=f[K],ae=s[K];if(_)var ge=F?_(ae,se,K,s,f,T):_(se,ae,K,f,s,T);if(ge!==void 0){if(ge)continue;z=!1;break}if(oe){if(!Yu(s,function(pe,he){if(!qu(oe,he)&&(se===pe||S(se,pe,d,_,T)))return oe.push(he)})){z=!1;break}}else if(!(se===ae||S(se,ae,d,_,T))){z=!1;break}}return T.delete(f),T.delete(s),z}var ln=Ju,Zu=L,Qu=Zu.Uint8Array,cn=Qu;function Du(f){var s=-1,d=Array(f.size);return f.forEach(function(_,S){d[++s]=[S,_]}),d}var el=Du;function tl(f){var s=-1,d=Array(f.size);return f.forEach(function(_){d[++s]=_}),d}var rl=tl,ur=Q,lr=cn,nl=ot,al=ln,sl=el,il=rl,ol=1,ul=2,ll="[object Boolean]",cl="[object Date]",fl="[object Error]",dl="[object Map]",pl="[object Number]",gl="[object RegExp]",hl="[object Set]",vl="[object String]",bl="[object Symbol]",yl="[object ArrayBuffer]",$l="[object DataView]",cr=ur?ur.prototype:void 0,Ke=cr?cr.valueOf:void 0;function _l(f,s,d,_,S,T,F){switch(d){case $l:if(f.byteLength!=s.byteLength||f.byteOffset!=s.byteOffset)return!1;f=f.buffer,s=s.buffer;case yl:return!(f.byteLength!=s.byteLength||!T(new lr(f),new lr(s)));case ll:case cl:case pl:return nl(+f,+s);case fl:return f.name==s.name&&f.message==s.message;case gl:case vl:return f==s+"";case dl:var M=sl;case hl:var P=_&ol;if(M||(M=il),f.size!=s.size&&!P)return!1;var H=F.get(f);if(H)return H==s;_|=ul,F.set(f,s);var J=al(M(f),M(s),_,S,T,F);return F.delete(f),J;case bl:if(Ke)return Ke.call(f)==Ke.call(s)}return!1}var Tl=_l;function ml(f,s){for(var d=-1,_=s.length,S=f.length;++d<_;)f[S+d]=s[d];return f}var ct=ml,El=Array.isArray,U=El,Al=ct,Ol=U;function Cl(f,s,d){var _=s(f);return Ol(f)?_:Al(_,d(f))}var fn=Cl;function Nl(f,s){for(var d=-1,_=f==null?0:f.length,S=0,T=[];++d<_;){var F=f[d];s(F,d,f)&&(T[S++]=F)}return T}var wl=Nl;function Pl(){return[]}var dn=Pl,Sl=wl,xl=dn,jl=Object.prototype,Il=jl.propertyIsEnumerable,fr=Object.getOwnPropertySymbols,Rl=fr?function(f){return f==null?[]:(f=Object(f),Sl(fr(f),function(s){return Il.call(f,s)}))}:xl,ft=Rl;function Fl(f,s){for(var d=-1,_=Array(f);++d<f;)_[d]=s(d);return _}var Ll=Fl;function Ml(f){return f!=null&&typeof f=="object"}var k=Ml,Bl=D,Gl=k,Vl="[object Arguments]";function Ul(f){return Gl(f)&&Bl(f)==Vl}var kl=Ul,dr=kl,Kl=k,pn=Object.prototype,Xl=pn.hasOwnProperty,Wl=pn.propertyIsEnumerable,Yl=dr(function(){return arguments}())?dr:function(f){return Kl(f)&&Xl.call(f,"callee")&&!Wl.call(f,"callee")},gn=Yl,Oe={exports:{}};function ql(){return!1}var Hl=ql;Oe.exports;(function(f,s){var d=L,_=Hl,S=s&&!s.nodeType&&s,T=S&&!0&&f&&!f.nodeType&&f,F=T&&T.exports===S,M=F?d.Buffer:void 0,P=M?M.isBuffer:void 0,H=P||_;f.exports=H})(Oe,Oe.exports);var dt=Oe.exports,zl=9007199254740991,Jl=/^(?:0|[1-9]\d*)$/;function Zl(f,s){var d=typeof f;return s=s??zl,!!s&&(d=="number"||d!="symbol"&&Jl.test(f))&&f>-1&&f%1==0&&f<s}var Ql=Zl,Dl=9007199254740991;function ec(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=Dl}var hn=ec,tc=D,rc=hn,nc=k,ac="[object Arguments]",sc="[object Array]",ic="[object Boolean]",oc="[object Date]",uc="[object Error]",lc="[object Function]",cc="[object Map]",fc="[object Number]",dc="[object Object]",pc="[object RegExp]",gc="[object Set]",hc="[object String]",vc="[object WeakMap]",bc="[object ArrayBuffer]",yc="[object DataView]",$c="[object Float32Array]",_c="[object Float64Array]",Tc="[object Int8Array]",mc="[object Int16Array]",Ec="[object Int32Array]",Ac="[object Uint8Array]",Oc="[object Uint8ClampedArray]",Cc="[object Uint16Array]",Nc="[object Uint32Array]",O={};O[$c]=O[_c]=O[Tc]=O[mc]=O[Ec]=O[Ac]=O[Oc]=O[Cc]=O[Nc]=!0;O[ac]=O[sc]=O[bc]=O[ic]=O[yc]=O[oc]=O[uc]=O[lc]=O[cc]=O[fc]=O[dc]=O[pc]=O[gc]=O[hc]=O[vc]=!1;function wc(f){return nc(f)&&rc(f.length)&&!!O[tc(f)]}var Pc=wc;function Sc(f){return function(s){return f(s)}}var pt=Sc,Ce={exports:{}};Ce.exports;(function(f,s){var d=nn,_=s&&!s.nodeType&&s,S=_&&!0&&f&&!f.nodeType&&f,T=S&&S.exports===_,F=T&&d.process,M=function(){try{var P=S&&S.require&&S.require("util").types;return P||F&&F.binding&&F.binding("util")}catch{}}();f.exports=M})(Ce,Ce.exports);var gt=Ce.exports,xc=Pc,jc=pt,pr=gt,gr=pr&&pr.isTypedArray,Ic=gr?jc(gr):xc,vn=Ic,Rc=Ll,Fc=gn,Lc=U,Mc=dt,Bc=Ql,Gc=vn,Vc=Object.prototype,Uc=Vc.hasOwnProperty;function kc(f,s){var d=Lc(f),_=!d&&Fc(f),S=!d&&!_&&Mc(f),T=!d&&!_&&!S&&Gc(f),F=d||_||S||T,M=F?Rc(f.length,String):[],P=M.length;for(var H in f)(s||Uc.call(f,H))&&!(F&&(H=="length"||S&&(H=="offset"||H=="parent")||T&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||Bc(H,P)))&&M.push(H);return M}var bn=kc,Kc=Object.prototype;function Xc(f){var s=f&&f.constructor,d=typeof s=="function"&&s.prototype||Kc;return f===d}var ht=Xc;function Wc(f,s){return function(d){return f(s(d))}}var yn=Wc,Yc=yn,qc=Yc(Object.keys,Object),Hc=qc,zc=ht,Jc=Hc,Zc=Object.prototype,Qc=Zc.hasOwnProperty;function Dc(f){if(!zc(f))return Jc(f);var s=[];for(var d in Object(f))Qc.call(f,d)&&d!="constructor"&&s.push(d);return s}var ef=Dc,tf=sn,rf=hn;function nf(f){return f!=null&&rf(f.length)&&!tf(f)}var $n=nf,af=bn,sf=ef,of=$n;function uf(f){return of(f)?af(f):sf(f)}var vt=uf,lf=fn,cf=ft,ff=vt;function df(f){return lf(f,ff,cf)}var _n=df,hr=_n,pf=1,gf=Object.prototype,hf=gf.hasOwnProperty;function vf(f,s,d,_,S,T){var F=d&pf,M=hr(f),P=M.length,H=hr(s),J=H.length;if(P!=J&&!F)return!1;for(var K=P;K--;){var z=M[K];if(!(F?z in s:hf.call(s,z)))return!1}var oe=T.get(f),se=T.get(s);if(oe&&se)return oe==s&&se==f;var ae=!0;T.set(f,s),T.set(s,f);for(var ge=F;++K<P;){z=M[K];var pe=f[z],he=s[z];if(_)var ve=F?_(he,pe,z,s,f,T):_(pe,he,z,f,s,T);if(!(ve===void 0?pe===he||S(pe,he,d,_,T):ve)){ae=!1;break}ge||(ge=z=="constructor")}if(ae&&!ge){var be=f.constructor,Re=s.constructor;be!=Re&&"constructor"in f&&"constructor"in s&&!(typeof be=="function"&&be instanceof be&&typeof Re=="function"&&Re instanceof Re)&&(ae=!1)}return T.delete(f),T.delete(s),ae}var bf=vf,yf=Y$1,$f=L,_f=yf($f,"DataView"),Tf=_f,mf=Y$1,Ef=L,Af=mf(Ef,"Promise"),Of=Af,Cf=Y$1,Nf=L,wf=Cf(Nf,"Set"),Pf=wf,Sf=Y$1,xf=L,jf=Sf(xf,"WeakMap"),If=jf,ze=Tf,Je=ut,Ze=Of,Qe=Pf,De=If,Tn=D,ne=on,vr="[object Map]",Rf="[object Object]",br="[object Promise]",yr="[object Set]",$r="[object WeakMap]",_r="[object DataView]",Ff=ne(ze),Lf=ne(Je),Mf=ne(Ze),Bf=ne(Qe),Gf=ne(De),X$1=Tn;(ze&&X$1(new ze(new ArrayBuffer(1)))!=_r||Je&&X$1(new Je)!=vr||Ze&&X$1(Ze.resolve())!=br||Qe&&X$1(new Qe)!=yr||De&&X$1(new De)!=$r)&&(X$1=function(f){var s=Tn(f),d=s==Rf?f.constructor:void 0,_=d?ne(d):"";if(_)switch(_){case Ff:return _r;case Lf:return vr;case Mf:return br;case Bf:return yr;case Gf:return $r}return s});var Ie=X$1,Xe=un,Vf=ln,Uf=Tl,kf=bf,Tr=Ie,mr=U,Er=dt,Kf=vn,Xf=1,Ar="[object Arguments]",Or="[object Array]",_e="[object Object]",Wf=Object.prototype,Cr=Wf.hasOwnProperty;function Yf(f,s,d,_,S,T){var F=mr(f),M=mr(s),P=F?Or:Tr(f),H=M?Or:Tr(s);P=P==Ar?_e:P,H=H==Ar?_e:H;var J=P==_e,K=H==_e,z=P==H;if(z&&Er(f)){if(!Er(s))return!1;F=!0,J=!1}if(z&&!J)return T||(T=new Xe),F||Kf(f)?Vf(f,s,d,_,S,T):Uf(f,s,P,d,_,S,T);if(!(d&Xf)){var oe=J&&Cr.call(f,"__wrapped__"),se=K&&Cr.call(s,"__wrapped__");if(oe||se){var ae=oe?f.value():f,ge=se?s.value():s;return T||(T=new Xe),S(ae,ge,d,_,T)}}return z?(T||(T=new Xe),kf(f,s,d,_,S,T)):!1}var qf=Yf,Hf=qf,Nr=k;function mn(f,s,d,_,S){return f===s?!0:f==null||s==null||!Nr(f)&&!Nr(s)?f!==f&&s!==s:Hf(f,s,d,_,mn,S)}var zf=mn,Jf=zf;function Zf(f,s){return Jf(f,s)}var Qf=Zf;const Df=et(Qf);function ed(f){const{indentation:s,children:d,isInline:_}=f,{theme:S}=G();return b$1.jsxs("div",{style:{color:S.cdataColor},children:[b$1.jsx("span",{children:`${s}<![CDATA[`}),d,b$1.jsx("span",{children:`${_?"":s}]]>`})]})}const td=f=>reactExports.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...f},reactExports.createElement("path",{d:"M9 17.898C9 18.972 10.2649 19.546 11.0731 18.8388L17.3838 13.3169C18.1806 12.6197 18.1806 11.3801 17.3838 10.6829L11.0731 5.16108C10.2649 4.45388 9 5.02785 9 6.1018V17.898Z"}));function En(f){const{collapsible:s,theme:d}=G(),{collapsed:_}=f;return s?b$1.jsx("span",{style:{position:"relative"},children:b$1.jsx("span",{style:{position:"absolute",right:"0",border:0,padding:0,background:"none"},children:b$1.jsx(td,{fill:d.separatorColor,style:{transform:`rotate(${_?0:90}deg)`,transition:"transform 0.2s"}})})}):null}function rd(f){return f==null}var nd=rd;const wr=et(nd);function An(f){const{collapsible:s,initalCollapsedDepth:d}=G(),[_,S]=reactExports.useState(()=>wr(d)||!s?!1:f>=d),T=()=>S(F=>!F);return reactExports.useEffect(()=>{S(wr(d)||!s?!1:f>=d)},[d,f,s]),{collapsed:_,buttonProps:s?{onClick:T,role:"button",style:{cursor:"pointer"}}:{}}}function ad(f){const{indentation:s,children:d,isInline:_,level:S}=f,{theme:T}=G(),{collapsed:F,buttonProps:M}=An(S);return b$1.jsxs("div",{style:{color:T.commentColor},children:[b$1.jsxs("span",{...M,children:[b$1.jsx("span",{children:s}),b$1.jsx(En,{collapsed:F}),b$1.jsx("span",{children:"<!-- "})]}),!F&&d,F&&"...",b$1.jsx("span",{children:`${_||F?" ":s}-->`})]})}function On(f){const{attributes:s}=f,{theme:d}=G();return s?b$1.jsx("span",{children:Object.entries(s).map(([_,S])=>b$1.jsxs("span",{children:[b$1.jsx("span",{style:{color:d.attributeKeyColor},children:` ${_}`}),b$1.jsx("span",{style:{color:d.separatorColor},children:"="}),b$1.jsx("span",{style:{color:d.attributeValueColor},children:`"${S}"`})]},`attribute-${_}`))}):null}function sd(f){const{indentation:s,tagKey:d,attributes:_}=f,{theme:S}=G();return b$1.jsxs("div",{children:[b$1.jsx("span",{style:{color:S.separatorColor},children:`${s}<?`}),b$1.jsx("span",{style:{color:S.tagColor},children:`${d.slice(1)}`}),b$1.jsx(On,{attributes:_}),b$1.jsx("span",{style:{color:S.separatorColor},children:"?>"})]})}function id(f,s){for(var d=-1,_=f==null?0:f.length,S=Array(_);++d<_;)S[d]=s(f[d],d,f);return S}var Cn=id;function od(f,s){for(var d=-1,_=f==null?0:f.length;++d<_&&s(f[d],d,f)!==!1;);return f}var ud=od,ld=Y$1,cd=function(){try{var f=ld(Object,"defineProperty");return f({},"",{}),f}catch{}}(),Nn=cd,Pr=Nn;function fd(f,s,d){s=="__proto__"&&Pr?Pr(f,s,{configurable:!0,enumerable:!0,value:d,writable:!0}):f[s]=d}var wn=fd,dd=wn,pd=ot,gd=Object.prototype,hd=gd.hasOwnProperty;function vd(f,s,d){var _=f[s];(!(hd.call(f,s)&&pd(_,d))||d===void 0&&!(s in f))&&dd(f,s,d)}var Pn=vd,bd=Pn,yd=wn;function $d(f,s,d,_){var S=!d;d||(d={});for(var T=-1,F=s.length;++T<F;){var M=s[T],P=_?_(d[M],f[M],M,d,f):void 0;P===void 0&&(P=f[M]),S?yd(d,M,P):bd(d,M,P)}return d}var de=$d,_d=de,Td=vt;function md(f,s){return f&&_d(s,Td(s),f)}var Ed=md;function Ad(f){var s=[];if(f!=null)for(var d in Object(f))s.push(d);return s}var Od=Ad,Cd=fe,Nd=ht,wd=Od,Pd=Object.prototype,Sd=Pd.hasOwnProperty;function xd(f){if(!Cd(f))return wd(f);var s=Nd(f),d=[];for(var _ in f)_=="constructor"&&(s||!Sd.call(f,_))||d.push(_);return d}var jd=xd,Id=bn,Rd=jd,Fd=$n;function Ld(f){return Fd(f)?Id(f,!0):Rd(f)}var bt=Ld,Md=de,Bd=bt;function Gd(f,s){return f&&Md(s,Bd(s),f)}var Vd=Gd,Ne={exports:{}};Ne.exports;(function(f,s){var d=L,_=s&&!s.nodeType&&s,S=_&&!0&&f&&!f.nodeType&&f,T=S&&S.exports===_,F=T?d.Buffer:void 0,M=F?F.allocUnsafe:void 0;function P(H,J){if(J)return H.slice();var K=H.length,z=M?M(K):new H.constructor(K);return H.copy(z),z}f.exports=P})(Ne,Ne.exports);var Ud=Ne.exports;function kd(f,s){var d=-1,_=f.length;for(s||(s=Array(_));++d<_;)s[d]=f[d];return s}var Kd=kd,Xd=de,Wd=ft;function Yd(f,s){return Xd(f,Wd(f),s)}var qd=Yd,Hd=yn,zd=Hd(Object.getPrototypeOf,Object),yt=zd,Jd=ct,Zd=yt,Qd=ft,Dd=dn,ep=Object.getOwnPropertySymbols,tp=ep?function(f){for(var s=[];f;)Jd(s,Qd(f)),f=Zd(f);return s}:Dd,Sn=tp,rp=de,np=Sn;function ap(f,s){return rp(f,np(f),s)}var sp=ap,ip=fn,op=Sn,up=bt;function lp(f){return ip(f,up,op)}var xn=lp,cp=Object.prototype,fp=cp.hasOwnProperty;function dp(f){var s=f.length,d=new f.constructor(s);return s&&typeof f[0]=="string"&&fp.call(f,"index")&&(d.index=f.index,d.input=f.input),d}var pp=dp,Sr=cn;function gp(f){var s=new f.constructor(f.byteLength);return new Sr(s).set(new Sr(f)),s}var $t=gp,hp=$t;function vp(f,s){var d=s?hp(f.buffer):f.buffer;return new f.constructor(d,f.byteOffset,f.byteLength)}var bp=vp,yp=/\w*$/;function $p(f){var s=new f.constructor(f.source,yp.exec(f));return s.lastIndex=f.lastIndex,s}var _p=$p,xr=Q,jr=xr?xr.prototype:void 0,Ir=jr?jr.valueOf:void 0;function Tp(f){return Ir?Object(Ir.call(f)):{}}var mp=Tp,Ep=$t;function Ap(f,s){var d=s?Ep(f.buffer):f.buffer;return new f.constructor(d,f.byteOffset,f.length)}var Op=Ap,Cp=$t,Np=bp,wp=_p,Pp=mp,Sp=Op,xp="[object Boolean]",jp="[object Date]",Ip="[object Map]",Rp="[object Number]",Fp="[object RegExp]",Lp="[object Set]",Mp="[object String]",Bp="[object Symbol]",Gp="[object ArrayBuffer]",Vp="[object DataView]",Up="[object Float32Array]",kp="[object Float64Array]",Kp="[object Int8Array]",Xp="[object Int16Array]",Wp="[object Int32Array]",Yp="[object Uint8Array]",qp="[object Uint8ClampedArray]",Hp="[object Uint16Array]",zp="[object Uint32Array]";function Jp(f,s,d){var _=f.constructor;switch(s){case Gp:return Cp(f);case xp:case jp:return new _(+f);case Vp:return Np(f,d);case Up:case kp:case Kp:case Xp:case Wp:case Yp:case qp:case Hp:case zp:return Sp(f,d);case Ip:return new _;case Rp:case Mp:return new _(f);case Fp:return wp(f);case Lp:return new _;case Bp:return Pp(f)}}var Zp=Jp,Qp=fe,Rr=Object.create,Dp=function(){function f(){}return function(s){if(!Qp(s))return{};if(Rr)return Rr(s);f.prototype=s;var d=new f;return f.prototype=void 0,d}}(),eg=Dp,tg=eg,rg=yt,ng=ht;function ag(f){return typeof f.constructor=="function"&&!ng(f)?tg(rg(f)):{}}var sg=ag,ig=Ie,og=k,ug="[object Map]";function lg(f){return og(f)&&ig(f)==ug}var cg=lg,fg=cg,dg=pt,Fr=gt,Lr=Fr&&Fr.isMap,pg=Lr?dg(Lr):fg,gg=pg,hg=Ie,vg=k,bg="[object Set]";function yg(f){return vg(f)&&hg(f)==bg}var $g=yg,_g=$g,Tg=pt,Mr=gt,Br=Mr&&Mr.isSet,mg=Br?Tg(Br):_g,Eg=mg,Ag=un,Og=ud,Cg=Pn,Ng=Ed,wg=Vd,Pg=Ud,Sg=Kd,xg=qd,jg=sp,Ig=_n,Rg=xn,Fg=Ie,Lg=pp,Mg=Zp,Bg=sg,Gg=U,Vg=dt,Ug=gg,kg=fe,Kg=Eg,Xg=vt,Wg=bt,Yg=1,qg=2,Hg=4,jn="[object Arguments]",zg="[object Array]",Jg="[object Boolean]",Zg="[object Date]",Qg="[object Error]",In="[object Function]",Dg="[object GeneratorFunction]",eh="[object Map]",th="[object Number]",Rn="[object Object]",rh="[object RegExp]",nh="[object Set]",ah="[object String]",sh="[object Symbol]",ih="[object WeakMap]",oh="[object ArrayBuffer]",uh="[object DataView]",lh="[object Float32Array]",ch="[object Float64Array]",fh="[object Int8Array]",dh="[object Int16Array]",ph="[object Int32Array]",gh="[object Uint8Array]",hh="[object Uint8ClampedArray]",vh="[object Uint16Array]",bh="[object Uint32Array]",A={};A[jn]=A[zg]=A[oh]=A[uh]=A[Jg]=A[Zg]=A[lh]=A[ch]=A[fh]=A[dh]=A[ph]=A[eh]=A[th]=A[Rn]=A[rh]=A[nh]=A[ah]=A[sh]=A[gh]=A[hh]=A[vh]=A[bh]=!0;A[Qg]=A[In]=A[ih]=!1;function Te(f,s,d,_,S,T){var F,M=s&Yg,P=s&qg,H=s&Hg;if(d&&(F=S?d(f,_,S,T):d(f)),F!==void 0)return F;if(!kg(f))return f;var J=Gg(f);if(J){if(F=Lg(f),!M)return Sg(f,F)}else{var K=Fg(f),z=K==In||K==Dg;if(Vg(f))return Pg(f,M);if(K==Rn||K==jn||z&&!S){if(F=P||z?{}:Bg(f),!M)return P?jg(f,wg(F,f)):xg(f,Ng(F,f))}else{if(!A[K])return S?f:{};F=Mg(f,K,M)}}T||(T=new Ag);var oe=T.get(f);if(oe)return oe;T.set(f,F),Kg(f)?f.forEach(function(ge){F.add(Te(ge,s,d,ge,f,T))}):Ug(f)&&f.forEach(function(ge,pe){F.set(pe,Te(ge,s,d,pe,f,T))});var se=H?P?Rg:Ig:P?Wg:Xg,ae=J?void 0:se(f);return Og(ae||f,function(ge,pe){ae&&(pe=ge,ge=f[pe]),Cg(F,pe,Te(ge,s,d,pe,f,T))}),F}var yh=Te,$h=D,_h=k,Th="[object Symbol]";function mh(f){return typeof f=="symbol"||_h(f)&&$h(f)==Th}var _t=mh,Eh=U,Ah=_t,Oh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ch=/^\w*$/;function Nh(f,s){if(Eh(f))return!1;var d=typeof f;return d=="number"||d=="symbol"||d=="boolean"||f==null||Ah(f)?!0:Ch.test(f)||!Oh.test(f)||s!=null&&f in Object(s)}var wh=Nh,Fn=lt,Ph="Expected a function";function Tt(f,s){if(typeof f!="function"||s!=null&&typeof s!="function")throw new TypeError(Ph);var d=function(){var _=arguments,S=s?s.apply(this,_):_[0],T=d.cache;if(T.has(S))return T.get(S);var F=f.apply(this,_);return d.cache=T.set(S,F)||T,F};return d.cache=new(Tt.Cache||Fn),d}Tt.Cache=Fn;var Sh=Tt,xh=Sh,jh=500;function Ih(f){var s=xh(f,function(_){return d.size===jh&&d.clear(),_}),d=s.cache;return s}var Rh=Ih,Fh=Rh,Lh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mh=/\\(\\)?/g,Bh=Fh(function(f){var s=[];return f.charCodeAt(0)===46&&s.push(""),f.replace(Lh,function(d,_,S,T){s.push(S?T.replace(Mh,"$1"):_||d)}),s}),Gh=Bh,Gr=Q,Vh=Cn,Uh=U,kh=_t,Kh=1/0,Vr=Gr?Gr.prototype:void 0,Ur=Vr?Vr.toString:void 0;function Ln(f){if(typeof f=="string")return f;if(Uh(f))return Vh(f,Ln)+"";if(kh(f))return Ur?Ur.call(f):"";var s=f+"";return s=="0"&&1/f==-Kh?"-0":s}var Xh=Ln,Wh=Xh;function Yh(f){return f==null?"":Wh(f)}var qh=Yh,Hh=U,zh=wh,Jh=Gh,Zh=qh;function Qh(f,s){return Hh(f)?f:zh(f,s)?[f]:Jh(Zh(f))}var mt=Qh;function Dh(f){var s=f==null?0:f.length;return s?f[s-1]:void 0}var ev=Dh,tv=_t,rv=1/0;function nv(f){if(typeof f=="string"||tv(f))return f;var s=f+"";return s=="0"&&1/f==-rv?"-0":s}var Mn=nv,av=mt,sv=Mn;function iv(f,s){s=av(s,f);for(var d=0,_=s.length;f!=null&&d<_;)f=f[sv(s[d++])];return d&&d==_?f:void 0}var ov=iv;function uv(f,s,d){var _=-1,S=f.length;s<0&&(s=-s>S?0:S+s),d=d>S?S:d,d<0&&(d+=S),S=s>d?0:d-s>>>0,s>>>=0;for(var T=Array(S);++_<S;)T[_]=f[_+s];return T}var lv=uv,cv=ov,fv=lv;function dv(f,s){return s.length<2?f:cv(f,fv(s,0,-1))}var pv=dv,gv=mt,hv=ev,vv=pv,bv=Mn;function yv(f,s){return s=gv(s,f),f=vv(f,s),f==null||delete f[bv(hv(s))]}var $v=yv,_v=D,Tv=yt,mv=k,Ev="[object Object]",Av=Function.prototype,Ov=Object.prototype,Bn=Av.toString,Cv=Ov.hasOwnProperty,Nv=Bn.call(Object);function wv(f){if(!mv(f)||_v(f)!=Ev)return!1;var s=Tv(f);if(s===null)return!0;var d=Cv.call(s,"constructor")&&s.constructor;return typeof d=="function"&&d instanceof d&&Bn.call(d)==Nv}var Pv=wv,Sv=Pv;function xv(f){return Sv(f)?void 0:f}var jv=xv,kr=Q,Iv=gn,Rv=U,Kr=kr?kr.isConcatSpreadable:void 0;function Fv(f){return Rv(f)||Iv(f)||!!(Kr&&f&&f[Kr])}var Lv=Fv,Mv=ct,Bv=Lv;function Gn(f,s,d,_,S){var T=-1,F=f.length;for(d||(d=Bv),S||(S=[]);++T<F;){var M=f[T];s>0&&d(M)?s>1?Gn(M,s-1,d,_,S):Mv(S,M):_||(S[S.length]=M)}return S}var Gv=Gn,Vv=Gv;function Uv(f){var s=f==null?0:f.length;return s?Vv(f,1):[]}var kv=Uv;function Kv(f,s,d){switch(d.length){case 0:return f.call(s);case 1:return f.call(s,d[0]);case 2:return f.call(s,d[0],d[1]);case 3:return f.call(s,d[0],d[1],d[2])}return f.apply(s,d)}var Xv=Kv,Wv=Xv,Xr=Math.max;function Yv(f,s,d){return s=Xr(s===void 0?f.length-1:s,0),function(){for(var _=arguments,S=-1,T=Xr(_.length-s,0),F=Array(T);++S<T;)F[S]=_[s+S];S=-1;for(var M=Array(s+1);++S<s;)M[S]=_[S];return M[s]=d(F),Wv(f,this,M)}}var qv=Yv;function Hv(f){return function(){return f}}var zv=Hv;function Jv(f){return f}var Zv=Jv,Qv=zv,Wr=Nn,Dv=Zv,eb=Wr?function(f,s){return Wr(f,"toString",{configurable:!0,enumerable:!1,value:Qv(s),writable:!0})}:Dv,tb=eb,rb=800,nb=16,ab=Date.now;function sb(f){var s=0,d=0;return function(){var _=ab(),S=nb-(_-d);if(d=_,S>0){if(++s>=rb)return arguments[0]}else s=0;return f.apply(void 0,arguments)}}var ib=sb,ob=tb,ub=ib,lb=ub(ob),cb=lb,fb=kv,db=qv,pb=cb;function gb(f){return pb(db(f,void 0,fb),f+"")}var hb=gb,vb=Cn,bb=yh,yb=$v,$b=mt,_b=de,Tb=jv,mb=hb,Eb=xn,Ab=1,Ob=2,Cb=4,Nb=mb(function(f,s){var d={};if(f==null)return d;var _=!1;s=vb(s,function(T){return T=$b(T,f),_||(_=T.length>1),T}),_b(f,Eb(f),d),_&&(d=bb(d,Ab|Ob|Cb,Tb));for(var S=s.length;S--;)yb(d,s[S]);return d}),wb=Nb;const Pb=et(wb);function Sb(f,s){return new Array(s*f+1).join(" ")}function Vn(f){return typeof f=="string"&&f.includes(`
`)}function xb(f){return typeof f=="string"?!1:f.length===1&&Ee in f[0]&&!Vn(f[0][Ee])}function jb(f){switch(f){case Ee:case rt:case tt:return f;default:return f.startsWith("?")?Jr:Ta}}function Ib(f){const s=f[Jt],d=Pb(f,Jt),[[_,S]]=Object.entries(d),T=jb(_);return{attributes:s,tagKey:_,subElements:S,type:T}}function Rb(f){return f?Object.keys(f).length>0:!1}function Fb(f){const{indentation:s,tagKey:d,attributes:_,children:S,isInline:T,hasChildren:F,level:M}=f,{collapsed:P,buttonProps:H}=An(M),{theme:J}=G();return b$1.jsxs("div",{children:[b$1.jsxs("span",{...H,children:[b$1.jsx("span",{children:s}),b$1.jsx(En,{collapsed:P}),b$1.jsx("span",{style:{color:J.separatorColor},children:"<"}),b$1.jsx("span",{style:{color:J.tagColor},children:`${d}`}),!P&&b$1.jsx(On,{attributes:_}),P&&Rb(_)&&" ...",b$1.jsx("span",{style:{color:J.separatorColor},children:F?">":" />"})]}),F&&b$1.jsxs(b$1.Fragment,{children:[!P&&S,P&&"...",b$1.jsx("span",{style:{color:J.separatorColor},children:`${T||P?"":s}</`}),b$1.jsx("span",{style:{color:J.tagColor},children:`${d}`}),b$1.jsx("span",{style:{color:J.separatorColor},children:">"})]})]})}function Lb(f){const{hasSiblings:s,text:d,indentation:_,isText:S}=f,{theme:T}=G(),F=S?{color:T.textColor}:void 0;return Vn(d)||s?b$1.jsx("div",{style:F,children:d.split(`
`).filter(M=>!!M.trim()).map((M,P)=>b$1.jsx("div",{children:`${_}${M.trim()}`},`${P}`))}):b$1.jsx("span",{style:F,children:d})}function me(f){const{elements:s,level:d=0,isText:_=!0}=f,{indentSize:S}=G();return!Array.isArray(s)||s.length===0?null:b$1.jsx(b$1.Fragment,{children:s.map((T,F)=>{const{tagKey:M,attributes:P,subElements:H,type:J}=Ib(T),K=s.length>1,z=Sb(S,d),oe=`${d}-${F}`,se=xb(H);switch(J){case Ee:return b$1.jsx(Lb,{text:H,indentation:z,hasSiblings:K,isText:_},oe);case tt:return b$1.jsx(ad,{isInline:se,indentation:z,level:d,children:b$1.jsx(me,{elements:H,level:d+1,isText:!1})},oe);case rt:return b$1.jsx(ed,{indentation:z,isInline:se,children:b$1.jsx(me,{elements:H,level:d+1,isText:!1})},oe);case Jr:return b$1.jsx(sd,{indentation:z,tagKey:M,attributes:P},oe);default:return b$1.jsx(Fb,{indentation:z,tagKey:M,attributes:P,isInline:se,hasChildren:H.length>0,level:d,children:b$1.jsx(me,{elements:H,level:d+1})},oe)}})})}function Mb(){return b$1.jsx("div",{children:"Invalid XML!"})}function Ub(f){const{theme:s,xml:d,collapsible:_=!1,indentSize:S=2,invalidXml:T,initalCollapsedDepth:F}=f,[M,P]=reactExports.useState(()=>({...Ye,...s})),{json:H,valid:J}=Gs(d),K=reactExports.useMemo(()=>({theme:M,collapsible:_,indentSize:S,initalCollapsedDepth:F}),[M,_,S,F]);return reactExports.useEffect(()=>{P(z=>{const oe={...Ye,...s};return Df(oe,z)?z:oe})},[s]),J?b$1.jsx(Zr.Provider,{value:K,children:b$1.jsx("div",{className:"rxv-container",style:{whiteSpace:"pre-wrap",fontFamily:M.fontFamily,overflowWrap:"break-word"},children:b$1.jsx(me,{elements:H})})}):T||b$1.jsx(Mb,{})}const jsonToXml=(f,s="root")=>{const d=(_,S)=>typeof _=="object"&&_!==null?Array.isArray(_)?_.map(T=>d(T,S)).join(""):`<${S}>${Object.keys(_).map(T=>d(_[T],T)).join("")}</${S}>`:`<${S}>${_}</${S}>`;return`<?xml version="1.0" encoding="UTF-8"?>${d(f,s)}`},TiffPreview=({metadata:f})=>{const s=jsonToXml(f,"TiffMetadata");return jsxRuntimeExports.jsx("div",{className:"border border-gray-300 rounded-lg shadow-md dark:border-gray-700 w-full mx-10",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-100 shadow-md rounded-lg p-4 max-w-2xl w-full ",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-4",children:"TIFF Metadata Viewer"}),jsxRuntimeExports.jsx("div",{className:"bg-white max-h-96 overflow-auto border border-gray-300 rounded-lg p-4",children:jsxRuntimeExports.jsx(Ub,{xml:s,initalCollapsedDepth:2,collapsible:!0})})]})})},flattenObject=(f,s=[])=>Object.keys(f).reduce((d,_)=>{if(_==="format")return d;const S=[...s,_];if(typeof f[_]=="object"&&f[_]!==null)Array.isArray(f[_])&&f[_].every(T=>typeof T=="object")?f[_].forEach((T,F)=>{Object.keys(T).forEach(M=>{M!=="format"&&d.push({element:S[0]||"",attribute:S[1]||"",tag:`${M} (${F})`,value:String(T[M]||"")})})}):d.push(...flattenObject(f[_],S));else{const[T,F]=S;d.push({element:T||"",attribute:F||"",tag:S.slice(2).join(".")||"",value:String(f[_]||"")})}return d},[]),TiffMetadataTable=({metadata:f})=>{const[s,d]=reactExports.useState(""),S=reactExports.useMemo(()=>flattenObject(f),[f]).filter(T=>(T.element||"").toLowerCase().includes(s.toLowerCase())||(T.attribute||"").toLowerCase().includes(s.toLowerCase())||(T.tag||"").toLowerCase().includes(s.toLowerCase())||(T.value||"").toLowerCase().includes(s.toLowerCase()));return jsxRuntimeExports.jsxs("div",{className:"border border-gray-300 rounded-lg shadow-md dark:border-gray-700 w-full mx-10",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-900",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-4",children:"TIFF Metadata Viewer"}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded dark:border-gray-700 dark:bg-gray-800 dark:text-white",placeholder:"Search metadata...",value:s,onChange:T=>d(T.target.value)})]}),jsxRuntimeExports.jsx("div",{className:"overflow-y-auto h-80 w-full",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0 z-10",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 w-1/4",children:"Element"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 w-1/4",children:"Attribute"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 w-1/4",children:"Tag"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 w-1/4",children:"Value"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:S.length>0?S.map((T,F)=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 select-text w-1/4",children:T.element||"N/A"}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 select-text w-1/4",children:T.attribute||"N/A"}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 select-text w-1/4",children:T.tag||"N/A"}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 select-text w-1/4",children:T.value||"N/A"})]},F)):jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No metadata matches your search."})})})]})})]})},SimpleTiffViewer=observer(({width:f,height:s,isFullscreen:d})=>{const _=useLoader(),{colors:S,contrastLimits:T,channelsVisible:F,selections:M,brightness:P,contrast:H}=useChannelsStore(({colors:he,contrastLimits:ve,channelsVisible:be,selections:Re,brightness:Fe,contrast:ye})=>({colors:he,contrastLimits:ve,channelsVisible:be,selections:Re,brightness:Fe,contrast:ye}),shallow$1),J=useViewerStore(he=>he.viewState),K=useOuterContainer(),z=d?K.clientWidth:f,oe=d?K.clientHeight:s;reactExports.useEffect(()=>{console.log("Loader:",_),console.log("ViewState:",J)},[_,J]);const se=reactExports.useMemo(()=>[new ColorPaletteExtension],[]),ae=reactExports.useMemo(()=>{const he={loader:_,selections:M,contrastLimits:T,colors:S,channelsVisible:F,brightness:P,contrast:H,extensions:se};return console.log("Layer Config:",he),he},[_,M,T,S,F,P,H,se]),ge=useViewerStoreApi();reactExports.useEffect(()=>{if(_&&!J){const he=getDefaultInitialViewState(_,{width:z,height:oe});ge.setState({viewState:he})}},[_,J,z,oe,ge]);const pe=reactExports.useMemo(()=>new DetailView({id:"detail-view",snapScaleBar:!0,width:z,height:oe}),[z,oe]);return _?J?jsxRuntimeExports.jsx(MDVivViewer,{views:[pe],layerProps:[ae],viewStates:[{...J,id:"detail-view"}],onViewStateChange:he=>{console.log("View State Change:",he.viewState),ge.setState({viewState:{...he.viewState,id:"detail-view"}})},deckProps:{glOptions:{preserveDrawingBuffer:!0},style:{height:`${oe}px`,width:`${z}px`,position:"relative"},onError:he=>{console.error("MDVivViewer Error:",he)}}}):jsxRuntimeExports.jsx("div",{children:"No view state available"}):jsxRuntimeExports.jsx("div",{children:"No loader available"})}),TiffChartWrapper=observer(({metadata:f,file:s,config:d,children:_,onFullscreenChange:S})=>{const[T,F]=reactExports.useState(!1),[M,P]=reactExports.useState(null),H=reactExports.useRef(null);reactExports.useEffect(()=>{const se=()=>{const ae=!!document.fullscreenElement;F(ae),S(ae),!ae&&M&&(J(M[0],M[1]),P(null))};return document.addEventListener("fullscreenchange",se),()=>{document.removeEventListener("fullscreenchange",se)}},[M,S]);const J=(se,ae)=>{H.current&&(H.current.style.width=`${se}px`,H.current.style.height=`${ae}px`)},K=async()=>{var se,ae,ge;if(T)await document.exitFullscreen();else{const pe=((se=H.current)==null?void 0:se.offsetWidth)||0,he=((ae=H.current)==null?void 0:ae.offsetHeight)||0;P([pe,he]),await((ge=H.current)==null?void 0:ge.requestFullscreen())}},z=reactExports.useCallback((se,ae,ge={})=>jsxRuntimeExports.jsx("span",{"aria-label":ae,"data-microtip-color":"red",role:"tooltip","data-microtip-size":ge.size||"small","data-microtip-position":ge.position||"bottom-left",className:"mx-px cursor-pointer",onClick:ge.func,children:jsxRuntimeExports.jsx("i",{className:`ciview-chart-icon ${se}`})}),[]),oe={boxShadow:"none",overflow:"hidden",boxSizing:"border-box",border:"4px solid var(--background_color)",width:"100%",height:"100%"};return jsxRuntimeExports.jsxs("div",{className:"w-full h-full",style:oe,children:[jsxRuntimeExports.jsx("div",{className:"ciview-chart-menuspace flex",children:z("fas fa-expand",T?"exit fullscreen":"fullscreen",{func:K})}),jsxRuntimeExports.jsx("div",{ref:H,className:"ciview-chart-content flex-grow overflow-auto",children:_})]})}),TiffVisualization=observer(({metadata:f,file:s})=>{const[d,_]=reactExports.useState(null),[S,T]=reactExports.useState(!0),[F,M]=reactExports.useState(!1),P=useViewerStoreApi();reactExports.useEffect(()=>{if(s){const z=URL.createObjectURL(s);return _(z),()=>{URL.revokeObjectURL(z)}}},[s]),reactExports.useEffect(()=>{if(d){T(!0);const z={urlOrFile:d,description:s.name};P.setState({source:z}),setTimeout(()=>{T(!1)},1e3)}},[d,s.name,P]);const H=useViewerStore(z=>z.source);useImage(H);const J=z=>{M(z)};if(S)return jsxRuntimeExports.jsx("div",{children:"Loading TIFF data..."});const K={title:s.name,legend:"TIFF Visualization"};return jsxRuntimeExports.jsx(TiffChartWrapper,{metadata:f,file:s,config:K,onFullscreenChange:J,children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx(SimpleTiffViewer,{width:200,height:200,isFullscreen:F})})})}),DatasourceDropdown=({options:f,onSelect:s})=>{const[d,_]=reactExports.useState(null);reactExports.useEffect(()=>{f.length>0&&d!==f[0]&&(_(f[0]),s(f[0]))},[f,d,s]);const S=T=>{const F=T.target.value;_(F),s(F)};return jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-700 dark:text-white my-1",children:jsxRuntimeExports.jsx("strong",{children:"Select Datasource:"})}),jsxRuntimeExports.jsxs("select",{value:d||"",onChange:S,className:"block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"-- Select an option --"}),f.map((T,F)=>jsxRuntimeExports.jsx("option",{value:T,children:T},F))]})]})};var CloudUpload={},_interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(CloudUpload,"__esModule",{value:!0});var default_1=CloudUpload.default=void 0,_createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;default_1=CloudUpload.default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");const CsvWorker=new Worker(new URL(""+new URL("../assets/csvWorker-e8cMUEqV.js",import.meta.url).href,import.meta.url),{type:"module"}),Container=({children:f})=>jsxRuntimeExports.jsx("div",{className:"flex flex-col content-center items-center h-max dark:bg-black-800 dark:text-white",children:f}),StatusContainer=({children:f})=>jsxRuntimeExports.jsx("div",{className:"flex flex-col justify-center items-center w-full h-150 dark:bg-#333",children:f}),SuccessContainer=({children:f})=>jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center bg-[#f0f8ff] shadow-md border border-[#e0e0e0] m-4 dark:bg-black dark:border-gray-600",children:f}),SuccessHeading=({children:f})=>jsxRuntimeExports.jsx("h1",{className:"text-[#333] mb-1 dark:text-white",children:f}),SuccessText=({children:f})=>jsxRuntimeExports.jsx("p",{className:"text-2xl text-[#555] mb-3 text-center dark:text-gray-300",children:f}),DropzoneContainer=reactExports.forwardRef(({isDragOver:f,children:s,...d},_)=>jsxRuntimeExports.jsx("div",{...d,ref:_,className:`p-4 mt-2 z-50 text-center border-2 border-dashed rounded-lg ${f?"bg-gray-300 dark:bg-slate-800":"bg-white dark:bg-black"} min-w-[90%]`,children:s})),FileInputLabel=({children:f,...s})=>jsxRuntimeExports.jsx("label",{...s,className:"mt-8 px-5 py-2.5 border bg-stone-200 hover:bg-stone-300 rounded cursor-pointer inline-block my-2.5 dark:bg-stone-600 dark:hover:bg-stone-500",children:f}),Spinner=()=>jsxRuntimeExports.jsx("div",{className:"w-16 h-16 border-8 mt-10 border-blue-500 border-dashed rounded-full animate-spin",style:{borderColor:"blue transparent blue transparent"}}),colorStyles={blue:{bgColor:"bg-blue-600",hoverColor:"hover:bg-blue-700",darkBgColor:"dark:bg-blue-800",darkHoverColor:"dark:bg-blue-900"},red:{bgColor:"bg-red-600",hoverColor:"hover:bg-red-700",darkBgColor:"dark:bg-red-800",darkHoverColor:"dark:bg-red-900"},green:{bgColor:"bg-green-600",hoverColor:"hover:bg-green-700",darkBgColor:"dark:bg-green-800",darkHoverColor:"dark:bg-green-900"},gray:{bgColor:"bg-gray-600",hoverColor:"hover:bg-gray-700",darkBgColor:"dark:bg-gray-800",darkHoverColor:"dark:bg-gray-900"}},Button=({onClick:f,color:s="blue",disabled:d=!1,size:_="px-5 py-2.5",marginTop:S="mt-2.5",children:T})=>{const{bgColor:F,hoverColor:M,darkBgColor:P,darkHoverColor:H}=colorStyles[s]||colorStyles.blue;return jsxRuntimeExports.jsx("button",{type:"button",onClick:f,className:`${_} ${S} ${F} ${M} ${P} ${H} text-white rounded self-center cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-500 disabled:opacity-70`,disabled:d,children:T})},ProgressBar=({value:f,max:s})=>jsxRuntimeExports.jsx("progress",{className:"w-full h-8 mb-5 mt-10 bg-gray-200 dark:bg-white-200 border border-gray-300 rounded",value:f,max:s}),Message=({children:f})=>jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-[#333] dark:text-white text-center",children:f}),FileSummary=({children:f})=>jsxRuntimeExports.jsx("div",{className:"max-w-[800px] w-[100%] text-center mb-5",children:f}),FileSummaryHeading=({children:f})=>jsxRuntimeExports.jsx("h1",{className:"text-gray-800 dark:text-white mb-3",children:f}),FileSummaryText=({children:f})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:typeof f=="string"?jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-700 dark:text-white my-1",children:f}):jsxRuntimeExports.jsx("div",{className:"text-lg text-gray-700 dark:text-white my-1",children:f})}),ErrorContainer=({children:f})=>jsxRuntimeExports.jsx("div",{className:"bg-[#fff0f0] text-[#d8000c] border border-[#ffbaba] p-5 my-5 rounded shadow-sm text-left w-[90%] max-w-[600px]",children:f}),DynamicText=({text:f,className:s=""})=>jsxRuntimeExports.jsx("div",{className:"w-96 h-20 overflow-hidden flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:`text-center m-0 font-bold text-sm sm:text-lg md:text-m ${s}`,children:f})}),ErrorHeading=({children:f})=>jsxRuntimeExports.jsx("h4",{className:"mt-0 text-lg font-bold",children:f}),DatasourceNameInput=({value:f,onChange:s,isDisabled:d})=>jsxRuntimeExports.jsxs("div",{className:"flex-left items-center space-x-2 pr-4",children:[jsxRuntimeExports.jsx("label",{className:"text-lg text-gray-700 dark:text-white my-1",children:jsxRuntimeExports.jsx("strong",{children:"Datasouce Name:"})}),jsxRuntimeExports.jsx("input",{id:"datasourceName",type:"text",value:f,onChange:s,className:"p-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:text-gray-300 dark:bg-gray-800 flex-grow",placeholder:"Enter datasource name",disabled:d})]}),reducer=(f,s)=>{switch(s.type){case"SET_SELECTED_FILES":return{...f,selectedFiles:s.payload};case"SET_IS_UPLOADING":return{...f,isUploading:s.payload};case"SET_IS_INSERTING":return{...f,isInserting:s.payload};case"SET_SUCCESS":return{...f,success:s.payload};case"SET_ERROR":return{...f,error:s.payload};case"SET_IS_VALIDATING":return{...f,isValidating:s.payload};case"SET_VALIDATION_RESULT":return{...f,validationResult:s.payload};case"SET_FILE_TYPE":return{...f,fileType:s.payload};case"SET_TIFF_METADATA":return{...f,tiffMetadata:s.payload};default:return f}},UPLOAD_INTERVAL=30,UPLOAD_DURATION=3e3,UPLOAD_STEP=100/(UPLOAD_DURATION/UPLOAD_INTERVAL),useFileUploadProgress=()=>{const[f,s]=reactExports.useState(0),d=reactExports.useCallback(()=>{s(0);const S=setInterval(()=>{s(T=>{const F=T+UPLOAD_STEP;return F>=100?(clearInterval(S),100):F})},UPLOAD_INTERVAL)},[]),_=reactExports.useCallback(()=>{s(0)},[]);return{progress:f,setProgress:s,startProgress:d,resetProgress:_}},FileUploadDialogComponent=({onClose:f,onResize:s})=>{const{root:d,projectName:_,chartManager:S}=useProject(),[T,F]=reactExports.useState(null),[M,P]=reactExports.useState([]),H=ta=>{F(ta),K(ta),console.log("Selected:",ta)},[J,K]=reactExports.useState(""),[z,oe]=reactExports.useState(!0),se=()=>{oe(ta=>!ta)},[ae,ge]=reactExports.useState({datasourceName:"",fileName:"",fileSize:"",rowCount:0,columnCount:0}),[pe,he]=reactExports.useState({fileName:"",fileSize:""}),[ve,be]=reactExports.useState([]),[Re,Fe]=reactExports.useState([]),[ye,Ue]=reactExports.useState([]),It=useChannelsStoreApi(),[St,At]=reactExports.useReducer(reducer,{selectedFiles:[],isUploading:!1,isInserting:!1,isValidating:!1,validationResult:null,success:!1,error:null,fileType:null,tiffMetadata:null}),xt=useViewerStoreApi(),{progress:Ct,resetProgress:Nt,setProgress:qt}=useFileUploadProgress(),Jn=reactExports.useCallback(ta=>{var fa;if(ta.length>0){const yA=ta[0];At({type:"SET_SELECTED_FILES",payload:ta});const _A=yA.name.split(".").pop().toLowerCase();if(_A==="csv"){const la=yA.name;K(la),ge({...ae,datasourceName:la,fileName:yA.name,fileSize:(yA.size/(1024*1024)).toFixed(2)}),At({type:"SET_FILE_TYPE",payload:"csv"})}else if(_A==="tiff"||_A==="tif"){const AA=(((fa=window.mdv.chartManager)==null?void 0:fa.dataSources)??[]).map(tA=>tA.name);P([...AA,"new datasource"]),he({...pe,fileName:yA.name,fileSize:(yA.size/(1024*1024)).toFixed(2)}),At({type:"SET_FILE_TYPE",payload:"tiff"}),qr(ta)}At({type:"SET_IS_VALIDATING",payload:!0}),_A==="csv"?(CsvWorker.postMessage(yA),CsvWorker.onmessage=la=>{const{columnNames:AA,columnTypes:tA,secondRowValues:ba,rowCount:iA,columnCount:lA,error:yI}=la.data;if(yI)At({type:"SET_ERROR",payload:{message:"Validation failed.",traceback:yI}}),At({type:"SET_IS_VALIDATING",payload:!1});else{be(AA),Fe(tA),Ue(ba),ge(BI=>({...BI,rowCount:iA,columnCount:lA}));const rI=WA(AA,tA,ba);s(rI,745),At({type:"SET_IS_VALIDATING",payload:!1}),At({type:"SET_VALIDATION_RESULT",payload:{columnNames:AA,columnTypes:tA}})}}):_A==="tiff"&&(s(1032,580),At({type:"SET_IS_VALIDATING",payload:!1}),At({type:"SET_VALIDATION_RESULT",payload:{columnNames:ve,columnTypes:Re}}))}},[ae,pe]),qr=reactExports.useCallback(async ta=>{let fa;ta.length===1?fa={urlOrFile:ta[0],description:ta[0].name}:fa={urlOrFile:ta,description:"data.zarr"},xt.setState({isChannelLoading:[!0]}),xt.setState({isViewerLoading:!0});try{const yA=await createLoader(fa.urlOrFile,()=>{},AA=>xt.setState({loaderErrorSnackbar:{on:!0,message:AA}}));let _A,la;Array.isArray(yA)?yA.length>1?(_A=yA.map(AA=>AA.metadata),la=yA.map(AA=>AA.data)):(_A=yA[0].metadata,la=yA[0].data):(_A=yA.metadata,la=yA.data),la&&(console.log("Metadata (in JSON-like form) for current file being viewed: ",_A),reactDomExports.unstable_batchedUpdates(()=>{It.setState({loader:la}),xt.setState({metadata:_A})}),At({type:"SET_TIFF_METADATA",payload:_A}))}catch(yA){console.error("Error loading file:",yA),At({type:"SET_ERROR",payload:{message:"Error loading TIFF file.",traceback:yA.message}})}finally{xt.setState({isChannelLoading:[!1]}),xt.setState({isViewerLoading:!1})}},[xt,It]),na=ta=>{const{value:fa}=ta.target;K(fa),ge(yA=>({...yA,datasourceName:fa}))},{getRootProps:qn,getInputProps:vA,isDragActive:TA,fileRejections:VA}=useDropzone({onDrop:Jn,accept:{"text/csv":[".csv"],"image/tiff":[".tiff",".tif"]}}),mI=VA.length>0?"Only CSV and TIFF files can be selected":"Drag and drop files here or click the button below to upload",jA=VA.length>0?"text-red-500":"",aI=(ta,fa,yA)=>(fa.font=getComputedStyle(document.body).fontSize+" Arial",fa.measureText(yA).width),WA=(ta,fa,yA)=>{const _A=document.createElement("canvas"),la=_A.getContext("2d");let AA=0,tA=0,ba=0;AA=Math.max(...ta.map(lA=>aI(_A,la,lA))),tA=Math.max(...fa.map(lA=>aI(_A,la,lA))),ba=Math.max(...yA.map(lA=>aI(_A,la,lA)));const iA=AA+tA+ba+32;return _A.remove(),Math.max(800,iA)},KA=async()=>{var yA,_A,la,AA,tA;if(console.log("Uploading file..."),!St.selectedFiles.length){At({type:"SET_ERROR",payload:{message:"No files selected. Please select a file before uploading.",status:400}});return}const ta=(yA=St.selectedFiles[0].name.split(".").pop())==null?void 0:yA.toLowerCase();At({type:"SET_IS_UPLOADING",payload:!0}),Nt();const fa={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:ba=>{const iA=Math.round(ba.loaded*100/ba.total);qt(iA)}};try{let ba;if(ta==="tiff"){const iA=new FormData;iA.append("file",St.selectedFiles[0]),iA.append("datasourceName",J);try{iA.append("tiffMetadata",JSON.stringify(St.tiffMetadata))}catch(lA){console.error("Invalid JSON format for tiffMetadata:",lA),At({type:"SET_ERROR",payload:{message:"Invalid JSON format in tiffMetadata. Please check the data.",status:400,traceback:lA.message}}),At({type:"SET_IS_UPLOADING",payload:!1});return}ba=await axios.post(`${d}/add_or_update_image_datasource`,iA,fa)}else{const iA=new FormData;iA.append("file",St.selectedFiles[0]),iA.append("name",J),iA.append("replace",""),ba=await axios.post(`${d}/add_datasource`,iA,fa)}console.log("File uploaded successfully",ba.data),ba.status===200?(At({type:"SET_IS_UPLOADING",payload:!1}),At({type:"SET_SUCCESS",payload:!0}),ta==="tiff"&&S.saveState()):(console.error(`Failed to confirm: Server responded with status ${ba.status}`),At({type:"SET_IS_UPLOADING",payload:!1}),At({type:"SET_ERROR",payload:{message:`File upload completed, but confirmation failed with status: ${ba.status}`,status:ba.status,traceback:"Server responded with non-200 status"}}))}catch(ba){console.error("Error uploading file:",ba),axios.isAxiosError(ba)?((_A=ba.response)==null?void 0:_A.status)===400?At({type:"SET_ERROR",payload:{message:"Bad Request: The server could not process the uploaded file.",status:400,traceback:ba.message}}):((la=ba.response)==null?void 0:la.status)===500?At({type:"SET_ERROR",payload:{message:"Server Error: An error occurred while processing the upload.",status:500,traceback:ba.message}}):At({type:"SET_ERROR",payload:{message:`Upload failed with status: ${((AA=ba.response)==null?void 0:AA.status)||"unknown"}`,status:((tA=ba.response)==null?void 0:tA.status)||500,traceback:ba.message}}):At({type:"SET_ERROR",payload:{message:"Upload failed due to a network error or unknown issue.",status:500,traceback:ba.message}}),At({type:"SET_IS_UPLOADING",payload:!1}),console.log("Attempting to clean up partially uploaded files...")}},rA=async()=>{At({type:"SET_FILE_SUMMARY",payload:null}),s(450,320),f()};return jsxRuntimeExports.jsx(Container,{children:St.isUploading?jsxRuntimeExports.jsxs(StatusContainer,{children:[jsxRuntimeExports.jsx(Message,{children:"Your file is being uploaded, please wait..."}),jsxRuntimeExports.jsx(ProgressBar,{value:Ct,max:"100"})]}):St.isInserting?jsxRuntimeExports.jsxs(StatusContainer,{children:[jsxRuntimeExports.jsx(Message,{children:"Your file is being processed, please wait..."}),jsxRuntimeExports.jsx(Spinner,{})]}):St.success?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(SuccessContainer,{children:[jsxRuntimeExports.jsx(SuccessHeading,{children:"Success!"}),jsxRuntimeExports.jsx(SuccessText,{children:"The file was uploaded successfully to the database."})]}),jsxRuntimeExports.jsx(Button,{color:"green",onClick:()=>window.location.reload(),children:"Refresh Page"})]}):St.error?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(ErrorContainer,{children:[jsxRuntimeExports.jsx(ErrorHeading,{children:"An error occurred while uploading the file:"}),jsxRuntimeExports.jsx("p",{children:St.error.message}),St.error.traceback&&jsxRuntimeExports.jsx("pre",{children:St.error.traceback})]})}):St.isValidating?jsxRuntimeExports.jsxs(StatusContainer,{children:[jsxRuntimeExports.jsx(Message,{children:"Validating data, please wait..."}),jsxRuntimeExports.jsx(Spinner,{})]}):St.validationResult?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[St.fileType==="csv"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(FileSummary,{children:[jsxRuntimeExports.jsx(FileSummaryHeading,{children:"Uploaded File Summary"}),jsxRuntimeExports.jsx(FileSummaryText,{children:jsxRuntimeExports.jsx(DatasourceNameInput,{value:J,onChange:na,isDisabled:St.selectedFiles.length===0})}),jsxRuntimeExports.jsxs(FileSummaryText,{children:[jsxRuntimeExports.jsx("strong",{children:"File name"})," ",ae.fileName]}),jsxRuntimeExports.jsxs(FileSummaryText,{children:[jsxRuntimeExports.jsx("strong",{children:"Number of rows"})," ",ae.rowCount]}),jsxRuntimeExports.jsxs(FileSummaryText,{children:[jsxRuntimeExports.jsx("strong",{children:"Number of columns"})," ",ae.columnCount]}),jsxRuntimeExports.jsxs(FileSummaryText,{children:[jsxRuntimeExports.jsx("strong",{children:"File size"})," ",ae.fileSize," MB"]})]}),jsxRuntimeExports.jsx(ColumnPreview,{columnNames:ve,columnTypes:Re,secondRowValues:ye}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-6 mt-4",children:[jsxRuntimeExports.jsx(Button,{marginTop:"mt-1",onClick:KA,children:"Upload"}),jsxRuntimeExports.jsx(Button,{color:"red",size:"px-6 py-2.5",marginTop:"mt-1",onClick:rA,children:"Cancel"})]})]}),St.fileType==="tiff"&&St.tiffMetadata&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"h-full w-full flex",children:[jsxRuntimeExports.jsxs("div",{className:"w-1/3 flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"flex items-start justify-start pt-5 pl-4",children:jsxRuntimeExports.jsxs(FileSummary,{children:[jsxRuntimeExports.jsx(FileSummaryHeading,{children:"Uploaded File Summary"}),jsxRuntimeExports.jsxs(FileSummaryText,{children:[jsxRuntimeExports.jsx("strong",{children:"File name:"})," ",pe.fileName]}),jsxRuntimeExports.jsxs(FileSummaryText,{children:[jsxRuntimeExports.jsx("strong",{children:"File size:"})," ",pe.fileSize," MB"]}),jsxRuntimeExports.jsx(DatasourceDropdown,{options:M,onSelect:H})]})})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center ",children:[jsxRuntimeExports.jsx(FileSummaryText,{children:jsxRuntimeExports.jsx("strong",{children:"Image Preview:"})}),jsxRuntimeExports.jsx(TiffVisualization,{metadata:St.tiffMetadata,file:St.selectedFiles[0]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"w-2/3",children:[jsxRuntimeExports.jsx("div",{className:"flex items-start justify-start h-[70%] min-h-[420px]",children:z?jsxRuntimeExports.jsx(TiffMetadataTable,{metadata:St.tiffMetadata}):jsxRuntimeExports.jsx(TiffPreview,{metadata:St.tiffMetadata})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center ml-4 mr-2 mt-12",children:[jsxRuntimeExports.jsx(Button,{color:"gray",size:"px-6 py-2.5",marginTop:"mt-1",onClick:se,children:z?"View Metadata as XML":"View Metadata as Table"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-4 ml-auto",children:[jsxRuntimeExports.jsx(Button,{marginTop:"mt-6",onClick:KA,children:"Upload"}),jsxRuntimeExports.jsx(Button,{color:"red",size:"px-6 py-2.5",marginTop:"mt-6",onClick:rA,children:"Cancel"})]})]})]})]})})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(DropzoneContainer,{...qn(),isDragOver:TA,"aria-label":"dropzoneLabel",children:[jsxRuntimeExports.jsx("input",{...vA()}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center space-y-0",children:[jsxRuntimeExports.jsx(default_1,{className:"text-gray-400",style:{fontSize:"5rem"}}),TA?jsxRuntimeExports.jsx(DynamicText,{text:"Drop files here...",className:"text-sm"}):jsxRuntimeExports.jsx(DynamicText,{text:St.selectedFiles.length>0?`Selected file: ${St.selectedFiles[0].name}`:mI,className:`${jA} text-sm`}),jsxRuntimeExports.jsx(FileInputLabel,{htmlFor:"fileInput",className:"text-sm",children:"Choose File"})]})]})})})},FileUploadDialogComponent$1=observer(FileUploadDialogComponent);class FileUploadDialogReact extends BaseDialog{constructor(){super({title:"File Upload",width:455,height:300},null);Bt(this,"root");if(this.outer.classList.add("fileUploadDialog"),this.dialog){const d=createVivStores();this.root=createMdvPortal(jsxRuntimeExports.jsx(VivProvider,{vivStores:d,children:jsxRuntimeExports.jsx(FileUploadDialogComponent$1,{onClose:()=>this.close(),onResize:(_,S)=>this.resizeDialog(_,S)})}),this.dialog)}else console.error("Dialog element not found")}resizeDialog(d,_){this.outer&&(this.outer.style.width=`${d}px`,this.outer.style.height=`${_}px`)}close(){super.close(),this.root&&this.root.unmount()}}BaseDialog.experiment.FileUploadDialogReact=FileUploadDialogReact;const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$1(f){f.stopImmediatePropagation()}function noevent$1(f){f.preventDefault(),f.stopImmediatePropagation()}function dragDisable(f){var s=f.document.documentElement,d=select(f).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in s?d.on("selectstart.drag",noevent$1,nonpassivecapture):(s.__noselect=s.style.MozUserSelect,s.style.MozUserSelect="none")}function yesdrag(f,s){var d=f.document.documentElement,_=select(f).on("dragstart.drag",null);s&&(_.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){_.on("click.drag",null)},0)),"onselectstart"in d?_.on("selectstart.drag",null):(d.style.MozUserSelect=d.__noselect,delete d.__noselect)}const constant$5=f=>()=>f;function DragEvent(f,{sourceEvent:s,subject:d,target:_,identifier:S,active:T,x:F,y:M,dx:P,dy:H,dispatch:J}){Object.defineProperties(this,{type:{value:f,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},subject:{value:d,enumerable:!0,configurable:!0},target:{value:_,enumerable:!0,configurable:!0},identifier:{value:S,enumerable:!0,configurable:!0},active:{value:T,enumerable:!0,configurable:!0},x:{value:F,enumerable:!0,configurable:!0},y:{value:M,enumerable:!0,configurable:!0},dx:{value:P,enumerable:!0,configurable:!0},dy:{value:H,enumerable:!0,configurable:!0},_:{value:J}})}DragEvent.prototype.on=function(){var f=this._.on.apply(this._,arguments);return f===this._?this:f};function defaultFilter$1(f){return!f.ctrlKey&&!f.button}function defaultContainer(){return this.parentNode}function defaultSubject(f,s){return s??{x:f.x,y:f.y}}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var f=defaultFilter$1,s=defaultContainer,d=defaultSubject,_=defaultTouchable$1,S={},T=dispatch("start","drag","end"),F=0,M,P,H,J,K=0;function z(be){be.on("mousedown.drag",oe).filter(_).on("touchstart.drag",ge).on("touchmove.drag",pe,nonpassive).on("touchend.drag touchcancel.drag",he).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function oe(be,Re){if(!(J||!f.call(this,be,Re))){var Fe=ve(this,s.call(this,be,Re),be,Re,"mouse");Fe&&(select(be.view).on("mousemove.drag",se,nonpassivecapture).on("mouseup.drag",ae,nonpassivecapture),dragDisable(be.view),nopropagation$1(be),H=!1,M=be.clientX,P=be.clientY,Fe("start",be))}}function se(be){if(noevent$1(be),!H){var Re=be.clientX-M,Fe=be.clientY-P;H=Re*Re+Fe*Fe>K}S.mouse("drag",be)}function ae(be){select(be.view).on("mousemove.drag mouseup.drag",null),yesdrag(be.view,H),noevent$1(be),S.mouse("end",be)}function ge(be,Re){if(f.call(this,be,Re)){var Fe=be.changedTouches,ye=s.call(this,be,Re),Ue=Fe.length,It,St;for(It=0;It<Ue;++It)(St=ve(this,ye,be,Re,Fe[It].identifier,Fe[It]))&&(nopropagation$1(be),St("start",be,Fe[It]))}}function pe(be){var Re=be.changedTouches,Fe=Re.length,ye,Ue;for(ye=0;ye<Fe;++ye)(Ue=S[Re[ye].identifier])&&(noevent$1(be),Ue("drag",be,Re[ye]))}function he(be){var Re=be.changedTouches,Fe=Re.length,ye,Ue;for(J&&clearTimeout(J),J=setTimeout(function(){J=null},500),ye=0;ye<Fe;++ye)(Ue=S[Re[ye].identifier])&&(nopropagation$1(be),Ue("end",be,Re[ye]))}function ve(be,Re,Fe,ye,Ue,It){var St=T.copy(),At=pointer(It||Fe,Re),xt,Ct,Nt;if((Nt=d.call(be,new DragEvent("beforestart",{sourceEvent:Fe,target:z,identifier:Ue,active:F,x:At[0],y:At[1],dx:0,dy:0,dispatch:St}),ye))!=null)return xt=Nt.x-At[0]||0,Ct=Nt.y-At[1]||0,function qt(Jn,qr,na){var qn=At,vA;switch(Jn){case"start":S[Ue]=qt,vA=F++;break;case"end":delete S[Ue],--F;case"drag":At=pointer(na||qr,Re),vA=F;break}St.call(Jn,be,new DragEvent(Jn,{sourceEvent:qr,subject:Nt,target:z,identifier:Ue,active:vA,x:At[0]+xt,y:At[1]+Ct,dx:At[0]-qn[0],dy:At[1]-qn[1],dispatch:St}),ye)}}return z.filter=function(be){return arguments.length?(f=typeof be=="function"?be:constant$5(!!be),z):f},z.container=function(be){return arguments.length?(s=typeof be=="function"?be:constant$5(be),z):s},z.subject=function(be){return arguments.length?(d=typeof be=="function"?be:constant$5(be),z):d},z.touchable=function(be){return arguments.length?(_=typeof be=="function"?be:constant$5(!!be),z):_},z.on=function(){var be=T.on.apply(T,arguments);return be===T?z:be},z.clickDistance=function(be){return arguments.length?(K=(be=+be)*be,z):Math.sqrt(K)},z}const constant$4=f=>()=>f;function BrushEvent(f,{sourceEvent:s,target:d,selection:_,mode:S,dispatch:T}){Object.defineProperties(this,{type:{value:f,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},target:{value:d,enumerable:!0,configurable:!0},selection:{value:_,enumerable:!0,configurable:!0},mode:{value:S,enumerable:!0,configurable:!0},_:{value:T}})}function nopropagation(f){f.stopImmediatePropagation()}function noevent(f){f.preventDefault(),f.stopImmediatePropagation()}var MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"};const{abs:abs$1,max:max$2,min:min$2}=Math;function number1(f){return[+f[0],+f[1]]}function number2(f){return[number1(f[0]),number1(f[1])]}var X={name:"x",handles:["w","e"].map(type),input:function(f,s){return f==null?null:[[+f[0],s[0][1]],[+f[1],s[1][1]]]},output:function(f){return f&&[f[0][0],f[1][0]]}},Y={name:"y",handles:["n","s"].map(type),input:function(f,s){return f==null?null:[[s[0][0],+f[0]],[s[1][0],+f[1]]]},output:function(f){return f&&[f[0][1],f[1][1]]}},cursors={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},signsX={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},signsY={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function type(f){return{type:f}}function defaultFilter(f){return!f.ctrlKey&&!f.button}function defaultExtent(){var f=this.ownerSVGElement||this;return f.hasAttribute("viewBox")?(f=f.viewBox.baseVal,[[f.x,f.y],[f.x+f.width,f.y+f.height]]):[[0,0],[f.width.baseVal.value,f.height.baseVal.value]]}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function local(f){for(;!f.__brush;)if(!(f=f.parentNode))return;return f.__brush}function empty(f){return f[0][0]===f[1][0]||f[0][1]===f[1][1]}function brushX(){return brush(X)}function brush(f){var s=defaultExtent,d=defaultFilter,_=defaultTouchable,S=!0,T=dispatch("start","brush","end"),F=6,M;function P(ge){var pe=ge.property("__brush",ae).selectAll(".overlay").data([type("overlay")]);pe.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(pe).each(function(){var ve=local(this).extent;select(this).attr("x",ve[0][0]).attr("y",ve[0][1]).attr("width",ve[1][0]-ve[0][0]).attr("height",ve[1][1]-ve[0][1])}),ge.selectAll(".selection").data([type("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var he=ge.selectAll(".handle").data(f.handles,function(ve){return ve.type});he.exit().remove(),he.enter().append("rect").attr("class",function(ve){return"handle handle--"+ve.type}).attr("cursor",function(ve){return cursors[ve.type]}),ge.each(H).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",z).filter(_).on("touchstart.brush",z).on("touchmove.brush",oe).on("touchend.brush touchcancel.brush",se).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}P.move=function(ge,pe,he){ge.tween?ge.on("start.brush",function(ve){J(this,arguments).beforestart().start(ve)}).on("interrupt.brush end.brush",function(ve){J(this,arguments).end(ve)}).tween("brush",function(){var ve=this,be=ve.__brush,Re=J(ve,arguments),Fe=be.selection,ye=f.input(typeof pe=="function"?pe.apply(this,arguments):pe,be.extent),Ue=interpolate$1(Fe,ye);function It(St){be.selection=St===1&&ye===null?null:Ue(St),H.call(ve),Re.brush()}return Fe!==null&&ye!==null?It:It(1)}):ge.each(function(){var ve=this,be=arguments,Re=ve.__brush,Fe=f.input(typeof pe=="function"?pe.apply(ve,be):pe,Re.extent),ye=J(ve,be).beforestart();interrupt(ve),Re.selection=Fe===null?null:Fe,H.call(ve),ye.start(he).brush(he).end(he)})},P.clear=function(ge,pe){P.move(ge,null,pe)};function H(){var ge=select(this),pe=local(this).selection;pe?(ge.selectAll(".selection").style("display",null).attr("x",pe[0][0]).attr("y",pe[0][1]).attr("width",pe[1][0]-pe[0][0]).attr("height",pe[1][1]-pe[0][1]),ge.selectAll(".handle").style("display",null).attr("x",function(he){return he.type[he.type.length-1]==="e"?pe[1][0]-F/2:pe[0][0]-F/2}).attr("y",function(he){return he.type[0]==="s"?pe[1][1]-F/2:pe[0][1]-F/2}).attr("width",function(he){return he.type==="n"||he.type==="s"?pe[1][0]-pe[0][0]+F:F}).attr("height",function(he){return he.type==="e"||he.type==="w"?pe[1][1]-pe[0][1]+F:F})):ge.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function J(ge,pe,he){var ve=ge.__brush.emitter;return ve&&(!he||!ve.clean)?ve:new K(ge,pe,he)}function K(ge,pe,he){this.that=ge,this.args=pe,this.state=ge.__brush,this.active=0,this.clean=he}K.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(ge,pe){return this.starting?(this.starting=!1,this.emit("start",ge,pe)):this.emit("brush",ge),this},brush:function(ge,pe){return this.emit("brush",ge,pe),this},end:function(ge,pe){return--this.active===0&&(delete this.state.emitter,this.emit("end",ge,pe)),this},emit:function(ge,pe,he){var ve=select(this.that).datum();T.call(ge,this.that,new BrushEvent(ge,{sourceEvent:pe,target:P,selection:f.output(this.state.selection),mode:he,dispatch:T}),ve)}};function z(ge){if(M&&!ge.touches||!d.apply(this,arguments))return;var pe=this,he=ge.target.__data__.type,ve=(S&&ge.metaKey?he="overlay":he)==="selection"?MODE_DRAG:S&&ge.altKey?MODE_CENTER:MODE_HANDLE,be=f===Y?null:signsX[he],Re=f===X?null:signsY[he],Fe=local(pe),ye=Fe.extent,Ue=Fe.selection,It=ye[0][0],St,At,xt=ye[0][1],Ct,Nt,qt=ye[1][0],Jn,qr,na=ye[1][1],qn,vA,TA=0,VA=0,mI,jA=be&&Re&&S&&ge.shiftKey,aI,WA,KA=Array.from(ge.touches||[ge],iA=>{const lA=iA.identifier;return iA=pointer(iA,pe),iA.point0=iA.slice(),iA.identifier=lA,iA});interrupt(pe);var rA=J(pe,arguments,!0).beforestart();if(he==="overlay"){Ue&&(mI=!0);const iA=[KA[0],KA[1]||KA[0]];Fe.selection=Ue=[[St=f===Y?It:min$2(iA[0][0],iA[1][0]),Ct=f===X?xt:min$2(iA[0][1],iA[1][1])],[Jn=f===Y?qt:max$2(iA[0][0],iA[1][0]),qn=f===X?na:max$2(iA[0][1],iA[1][1])]],KA.length>1&&la(ge)}else St=Ue[0][0],Ct=Ue[0][1],Jn=Ue[1][0],qn=Ue[1][1];At=St,Nt=Ct,qr=Jn,vA=qn;var ta=select(pe).attr("pointer-events","none"),fa=ta.selectAll(".overlay").attr("cursor",cursors[he]);if(ge.touches)rA.moved=_A,rA.ended=AA;else{var yA=select(ge.view).on("mousemove.brush",_A,!0).on("mouseup.brush",AA,!0);S&&yA.on("keydown.brush",tA,!0).on("keyup.brush",ba,!0),dragDisable(ge.view)}H.call(pe),rA.start(ge,ve.name);function _A(iA){for(const lA of iA.changedTouches||[iA])for(const yI of KA)yI.identifier===lA.identifier&&(yI.cur=pointer(lA,pe));if(jA&&!aI&&!WA&&KA.length===1){const lA=KA[0];abs$1(lA.cur[0]-lA[0])>abs$1(lA.cur[1]-lA[1])?WA=!0:aI=!0}for(const lA of KA)lA.cur&&(lA[0]=lA.cur[0],lA[1]=lA.cur[1]);mI=!0,noevent(iA),la(iA)}function la(iA){const lA=KA[0],yI=lA.point0;var rI;switch(TA=lA[0]-yI[0],VA=lA[1]-yI[1],ve){case MODE_SPACE:case MODE_DRAG:{be&&(TA=max$2(It-St,min$2(qt-Jn,TA)),At=St+TA,qr=Jn+TA),Re&&(VA=max$2(xt-Ct,min$2(na-qn,VA)),Nt=Ct+VA,vA=qn+VA);break}case MODE_HANDLE:{KA[1]?(be&&(At=max$2(It,min$2(qt,KA[0][0])),qr=max$2(It,min$2(qt,KA[1][0])),be=1),Re&&(Nt=max$2(xt,min$2(na,KA[0][1])),vA=max$2(xt,min$2(na,KA[1][1])),Re=1)):(be<0?(TA=max$2(It-St,min$2(qt-St,TA)),At=St+TA,qr=Jn):be>0&&(TA=max$2(It-Jn,min$2(qt-Jn,TA)),At=St,qr=Jn+TA),Re<0?(VA=max$2(xt-Ct,min$2(na-Ct,VA)),Nt=Ct+VA,vA=qn):Re>0&&(VA=max$2(xt-qn,min$2(na-qn,VA)),Nt=Ct,vA=qn+VA));break}case MODE_CENTER:{be&&(At=max$2(It,min$2(qt,St-TA*be)),qr=max$2(It,min$2(qt,Jn+TA*be))),Re&&(Nt=max$2(xt,min$2(na,Ct-VA*Re)),vA=max$2(xt,min$2(na,qn+VA*Re)));break}}qr<At&&(be*=-1,rI=St,St=Jn,Jn=rI,rI=At,At=qr,qr=rI,he in flipX&&fa.attr("cursor",cursors[he=flipX[he]])),vA<Nt&&(Re*=-1,rI=Ct,Ct=qn,qn=rI,rI=Nt,Nt=vA,vA=rI,he in flipY&&fa.attr("cursor",cursors[he=flipY[he]])),Fe.selection&&(Ue=Fe.selection),aI&&(At=Ue[0][0],qr=Ue[1][0]),WA&&(Nt=Ue[0][1],vA=Ue[1][1]),(Ue[0][0]!==At||Ue[0][1]!==Nt||Ue[1][0]!==qr||Ue[1][1]!==vA)&&(Fe.selection=[[At,Nt],[qr,vA]],H.call(pe),rA.brush(iA,ve.name))}function AA(iA){if(nopropagation(iA),iA.touches){if(iA.touches.length)return;M&&clearTimeout(M),M=setTimeout(function(){M=null},500)}else yesdrag(iA.view,mI),yA.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ta.attr("pointer-events","all"),fa.attr("cursor",cursors.overlay),Fe.selection&&(Ue=Fe.selection),empty(Ue)&&(Fe.selection=null,H.call(pe)),rA.end(iA,ve.name)}function tA(iA){switch(iA.keyCode){case 16:{jA=be&&Re;break}case 18:{ve===MODE_HANDLE&&(be&&(Jn=qr-TA*be,St=At+TA*be),Re&&(qn=vA-VA*Re,Ct=Nt+VA*Re),ve=MODE_CENTER,la(iA));break}case 32:{(ve===MODE_HANDLE||ve===MODE_CENTER)&&(be<0?Jn=qr-TA:be>0&&(St=At-TA),Re<0?qn=vA-VA:Re>0&&(Ct=Nt-VA),ve=MODE_SPACE,fa.attr("cursor",cursors.selection),la(iA));break}default:return}noevent(iA)}function ba(iA){switch(iA.keyCode){case 16:{jA&&(aI=WA=jA=!1,la(iA));break}case 18:{ve===MODE_CENTER&&(be<0?Jn=qr:be>0&&(St=At),Re<0?qn=vA:Re>0&&(Ct=Nt),ve=MODE_HANDLE,la(iA));break}case 32:{ve===MODE_SPACE&&(iA.altKey?(be&&(Jn=qr-TA*be,St=At+TA*be),Re&&(qn=vA-VA*Re,Ct=Nt+VA*Re),ve=MODE_CENTER):(be<0?Jn=qr:be>0&&(St=At),Re<0?qn=vA:Re>0&&(Ct=Nt),ve=MODE_HANDLE),fa.attr("cursor",cursors[he]),la(iA));break}default:return}noevent(iA)}}function oe(ge){J(this,arguments).moved(ge)}function se(ge){J(this,arguments).ended(ge)}function ae(){var ge=this.__brush||{selection:null};return ge.extent=number2(s.apply(this,arguments)),ge.dim=f,ge}return P.extent=function(ge){return arguments.length?(s=typeof ge=="function"?ge:constant$4(number2(ge)),P):s},P.filter=function(ge){return arguments.length?(d=typeof ge=="function"?ge:constant$4(!!ge),P):d},P.touchable=function(ge){return arguments.length?(_=typeof ge=="function"?ge:constant$4(!!ge),P):_},P.handleSize=function(ge){return arguments.length?(F=+ge,P):F},P.keyModifiers=function(ge){return arguments.length?(S=!!ge,P):S},P.on=function(){var ge=T.on.apply(T,arguments);return ge===T?P:ge},P}class HistogramChart extends SVGChart{constructor(s,d,_){Array.isArray(_.param)&&(_.param=_.param[0]);const S=s.getColumnName(_.param);_.axis||(_.axis={x:{size:30,label:S,textsize:13},y:{size:45,label:"frequency",textsize:13}}),_.title||(_.title=S),super(s,d,_,{x:{},y:{}});const T=this.config;T.type="bar_chart";const F=this.dataStore.getMinMaxForColumn(_.param);this._setConfigValue(T,"display_max",F[1]),this._setConfigValue(T,"display_min",F[0]),this._setConfigValue(T,"bin_number",10),this.brush=brushX().on("end",M=>{const P=M.selection;if(P==null)return;const H=this.margins.left;this.setRange(this.x_scale.invert(P[0]-H),this.x_scale.invert(P[1]-H))}),this._setBrushExtent(),this.dim=this.dataStore.getDimension("range_dimension"),this.filter=null,this.binFiltered=new Array(this.config.bin_number).fill(!1),this.onDataFiltered(null,!0)}_setBrushExtent(){this.brush.extent([[this.margins.left,0],[this.width-this.margins.right,this.height-this.margins.bottom]]),this.svg.call(this.brush)}setSize(s,d){super.setSize(s,d),this._setBrushExtent(),this.drawChart(),this.svg.call(this.brush.move,null)}remove(s=!0){this.dim.destroy(s),super.remove()}removeFilter(){this.dim.removeFilter(),this.filter=null,this.binFiltered=new Array(this.config.bin_number).fill(!1),this.drawChart(),this.svg.call(this.brush.move,null)}_calculateFilterBins(){const s=this.config,d=s.bin_number;if(this.binFiltered=new Array(d).fill(!1),!this.filter)return;const _=(s.display_max-s.display_min)/s.bin_number,S=s.display_min;for(let T=0;T<s.bin_number;T++){const F=S+T*_;(F<=this.filter[0]||F>this.filter[1])&&(this.binFiltered[T]=!0)}}setRange(s,d){this.filter=[s,d],this._calculateFilterBins(),this.dim.filter("filterRange",[this.config.param],{min:s,max:d}),this.drawChart(),this.resetButton.style.display="inline"}getFilter(){if(!this.filter)return null;const s={};return s[this.config.param]=this.filter.slice(0),s}onDataFiltered(s){if(this.dim===s||this.isPinned)return;const d=this.config.bin_number,_={bins:this.config.bin_number,max:this.config.display_max,min:this.config.display_min};s==="all_removed"&&(this.filter=null,this.binFiltered.fill(!1),this.svg.call(this.brush.move,null),this.resetButton.style.display="none"),this.dim.getBins(S=>{this.originalBinData=S,this.binData=S.slice(0,d),this.binData[d-1]+=S[d],this.drawChart()},this.config.param,_)}drawChart(){const s=select(this.contentDiv).transition().duration(400).ease(linear),d=this._getContentDimensions(),_=this.config.bin_number,S=(d.width-(_+1)*3)/_;let T=Math.max(...this.binData);T=T||1,this.x_scale.domain([this.config.display_min,this.config.display_max]),this.y_scale.domain([T,0]),this.updateAxis();const F=d.height/T;this.graph_area.selectAll(".bar").data(this.binData).join("rect").transition(s).style("fill",(M,P)=>this.binFiltered[P]?"gray":"blue").attr("class","bar").attr("x",(M,P)=>(P+1)*3+P*S).attr("width",S).attr("y",M=>d.height-M*F).attr("height",M=>M*F)}pinChart(){this.isPinned=!0}unpinChart(){this.isPinned=!1,this.onDataFiltered()}getSettings(){const s=super.getSettings(),d=this.config,_=this.dataStore.getMinMaxForColumn(d.param);return s.concat([{type:"doubleslider",min:_[0],max:_[1],doc:this.__doc__||document,current_value:[d.display_min,d.display_max],label:"max min values",info:{text:`Sometimes outliers can skew the histogram to one side.
                     Setting a min/max value will add all counts less/greater than the 
                     value specified to the first/last bin.`,position:"left"},func:(S,T)=>{d.display_min=S,d.display_max=T,this._calculateFilterBins(),this.onDataFiltered()}},{type:"spinner",max:100,min:2,current_value:d.bin_number,label:"Number of bins",func:S=>{d.bin_number=S,this._calculateFilterBins(),this.onDataFiltered()}}])}}BaseChart.types.bar_chart={name:"Histogram",class:HistogramChart,params:[{type:"number",name:"Frequency Data"}]};class CategoryChart extends SVGChart{constructor(s,d,_,S){Array.isArray(_.param)&&(_.param=_.param[0]),_.title=_.title||s.getColumnName(_.param),super(s,d,_,S),this.dim=this.dataStore.getDimension("category_dimension"),this.colors=this.dataStore.getColumnColors(_.param),this.filter=[]}remove(s=!0){this.dim.destroy(s),super.remove()}setSize(s,d){super.setSize(s,d),this.drawChart()}removeFilter(){this.dim.removeFilter(),this.filter=[],this.drawChart()}filterCategories(s,d){if(d)if(this.filter.indexOf(s)!==-1)this.filter=this.filter.filter(_=>_!==s);else if(this.filter.length===0){const _=this.dataStore.getColumnValues(this.config.param);this.filter=_.filter(S=>S!==s)}else this.filter.push(s);else this.filter=[s];this.resetButton.style.display="inline",this.drawChart(100),this.dim.filter("filterCategories",[this.config.param],this.filter)}getFilter(){const s={};return!this.filter||this.filter.length===0?null:(s[this.config.param]=this.filter.slice(0),s)}pinChart(){this.isPinned=!0}unpinChart(){this.isPinned=!1,this.onDataFiltered()}updateData(){const s=this.config;if(this.rowData=this.data.slice(0),s.filter_zeros&&(this.rowData=this.rowData.filter(d=>d[0]!==0)),s.sort==="size"&&this.rowData.sort((d,_)=>_[0]-d[0]),s.sort==="name"){const d=this.dataStore.getColumnValues(s.param);this.rowData.sort((_,S)=>d[_[1]].localeCompare(d[S[1]]))}this.rowData.length>40&&!s.show_limit&&(s.show_limit=40),s.show_limit&&s.show_limit<this.rowData.length&&this.rowData.splice(s.show_limit)}onDataFiltered(s){if(this.dim===s||this.isPinned)return;s==="all_removed"&&(this.filter=[],this.resetButton.style.display="none");const d={};this.dim.getCategories(_=>{this.data=new Array(_.length),this.maxCount=1,this.config;for(let S=0;S<_.length;S++)this.data[S]=[_[S],S],this.maxCount=Math.max(_[S],this.maxCount);this.updateData(),this.drawChart()},this.config.param,d)}}var wordcloud2={exports:{}};/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2019 Tim Guan-tin Chien and contributors.
 * Released under the MIT license
 */(function(f){window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var _=[void 0],S="zero-timeout-message",T=function(M){var P=_.length;return _.push(M),window.postMessage(S+P.toString(36),"*"),P};return window.addEventListener("message",function(M){if(!(typeof M.data!="string"||M.data.substr(0,S.length)!==S)){M.stopImmediatePropagation();var P=parseInt(M.data.substr(S.length),36);_[P]&&(_[P](),_[P]=void 0)}},!0),window.clearImmediate=function(M){_[M]&&(_[M]=void 0)},T}()||function(_){window.setTimeout(_,0)}}()),window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(_){window.clearTimeout(_)}}()),function(s){var d=function(){var H=document.createElement("canvas");if(!H||!H.getContext)return!1;var J=H.getContext("2d");return!(!J||!J.getImageData||!J.fillText||!Array.prototype.some||!Array.prototype.push)}(),_=function(){if(d){for(var H=document.createElement("canvas").getContext("2d"),J=20,K,z;J;){if(H.font=J.toString(10)+"px sans-serif",H.measureText("").width===K&&H.measureText("m").width===z)return J+1;K=H.measureText("").width,z=H.measureText("m").width,J--}return 0}}(),S=function(P){if(Array.isArray(P)){var H=P.slice();return H.splice(0,2),H}else return[]},T=function(H){for(var J,K,z=H.length;z;)J=Math.floor(Math.random()*z),K=H[--z],H[z]=H[J],H[J]=K;return H},F={},M=function(H,J){if(!d)return;var K=Math.floor(Math.random()*Date.now());Array.isArray(H)||(H=[H]),H.forEach(function(_A,la){if(typeof _A=="string"){if(H[la]=document.getElementById(_A),!H[la])throw new Error("The element id specified is not found.")}else if(!_A.tagName&&!_A.appendChild)throw new Error("You must pass valid HTML elements, or ID of the element.")});var z={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,shrinkToFit:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationSteps:0,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(J)for(var oe in J)oe in z&&(z[oe]=J[oe]);if(typeof z.weightFactor!="function"){var se=z.weightFactor;z.weightFactor=function(la){return la*se}}if(typeof z.shape!="function")switch(z.shape){case"circle":default:z.shape="circle";break;case"cardioid":z.shape=function(la){return 1-Math.sin(la)};break;case"diamond":z.shape=function(la){var AA=la%(2*Math.PI/4);return 1/(Math.cos(AA)+Math.sin(AA))};break;case"square":z.shape=function(la){return Math.min(1/Math.abs(Math.cos(la)),1/Math.abs(Math.sin(la)))};break;case"triangle-forward":z.shape=function(la){var AA=la%(2*Math.PI/3);return 1/(Math.cos(AA)+Math.sqrt(3)*Math.sin(AA))};break;case"triangle":case"triangle-upright":z.shape=function(la){var AA=(la+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(AA)+Math.sqrt(3)*Math.sin(AA))};break;case"pentagon":z.shape=function(la){var AA=(la+.955)%(2*Math.PI/5);return 1/(Math.cos(AA)+.726543*Math.sin(AA))};break;case"star":z.shape=function(la){var AA=(la+.955)%(2*Math.PI/10);return(la+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-AA)+3.07768*Math.sin(2*Math.PI/10-AA)):1/(Math.cos(AA)+3.07768*Math.sin(AA))};break}z.gridSize=Math.max(Math.floor(z.gridSize),4);var ae=z.gridSize,ge=ae-z.maskGapWidth,pe=Math.abs(z.maxRotation-z.minRotation),he=Math.abs(Math.floor(z.rotationSteps)),ve=Math.min(z.maxRotation,z.minRotation),be,Re,Fe,ye,Ue,It,St;function At(_A,la){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(la-_A)+_A).toFixed()+"%)"}switch(z.color){case"random-dark":St=function(){return At(10,50)};break;case"random-light":St=function(){return At(50,90)};break;default:typeof z.color=="function"&&(St=z.color);break}var xt;typeof z.fontWeight=="function"&&(xt=z.fontWeight);var Ct=null;typeof z.classes=="function"&&(Ct=z.classes);var Nt=!1,qt=[],Jn,qr=function(la){var AA=la.currentTarget,tA=AA.getBoundingClientRect(),ba,iA;la.touches?(ba=la.touches[0].clientX,iA=la.touches[0].clientY):(ba=la.clientX,iA=la.clientY);var lA=ba-tA.left,yI=iA-tA.top,rI=Math.floor(lA*(AA.width/tA.width||1)/ae),BI=Math.floor(yI*(AA.height/tA.height||1)/ae);return qt[rI][BI]},na=function(la){var AA=qr(la);if(Jn!==AA){if(Jn=AA,!AA){z.hover(void 0,void 0,la);return}z.hover(AA.item,AA.dimension,la)}},qn=function(la){var AA=qr(la);AA&&(z.click(AA.item,AA.dimension,la),la.preventDefault())},vA=[],TA=function(la){if(vA[la])return vA[la];var AA=la*8,tA=AA,ba=[];for(la===0&&ba.push([ye[0],ye[1],0]);tA--;){var iA=1;z.shape!=="circle"&&(iA=z.shape(tA/AA*2*Math.PI)),ba.push([ye[0]+la*iA*Math.cos(-tA/AA*2*Math.PI),ye[1]+la*iA*Math.sin(-tA/AA*2*Math.PI)*z.ellipticity,tA/AA*2*Math.PI])}return vA[la]=ba,ba},VA=function(){return z.abortThreshold>0&&new Date().getTime()-It>z.abortThreshold},mI=function(){return z.rotateRatio===0||Math.random()>z.rotateRatio?0:pe===0?ve:he>0?ve+Math.floor(Math.random()*he)*pe/(he-1):ve+Math.random()*pe},jA=function(la,AA,tA,ba){var iA=z.weightFactor(AA);if(iA<=z.minSize)return!1;var lA=1;iA<_&&(lA=function(){for(var vC=2;vC*iA<_;)vC+=2;return vC}());var yI;xt?yI=xt(la,AA,iA,ba):yI=z.fontWeight;var rI=document.createElement("canvas"),BI=rI.getContext("2d",{willReadFrequently:!0});BI.font=yI+" "+(iA*lA).toString(10)+"px "+z.fontFamily;var NI=BI.measureText(la).width/lA,Rt=Math.max(iA*lA,BI.measureText("m").width,BI.measureText("").width)/lA,QA=NI+Rt*2,cA=Rt*3,gI=Math.ceil(QA/ae),LI=Math.ceil(cA/ae);QA=gI*ae,cA=LI*ae;var da=-NI/2,dA=-Rt*.4,RA=Math.ceil((QA*Math.abs(Math.sin(tA))+cA*Math.abs(Math.cos(tA)))/ae),pI=Math.ceil((QA*Math.abs(Math.cos(tA))+cA*Math.abs(Math.sin(tA)))/ae),vI=pI*ae,EI=RA*ae;rI.setAttribute("width",vI),rI.setAttribute("height",EI),BI.scale(1/lA,1/lA),BI.translate(vI*lA/2,EI*lA/2),BI.rotate(-tA),BI.font=yI+" "+(iA*lA).toString(10)+"px "+z.fontFamily,BI.fillStyle="#000",BI.textBaseline="middle",BI.fillText(la,da*lA,(dA+iA*.5)*lA);var zI=BI.getImageData(0,0,vI,EI).data;if(VA())return!1;for(var FI=[],DI=pI,ZI,IC,mC,BC=[RA/2,pI/2,RA/2,pI/2];DI--;)for(ZI=RA;ZI--;){mC=ae;e:for(;mC--;)for(IC=ae;IC--;)if(zI[((ZI*ae+mC)*vI+(DI*ae+IC))*4+3]){FI.push([DI,ZI]),DI<BC[3]&&(BC[3]=DI),DI>BC[1]&&(BC[1]=DI),ZI<BC[0]&&(BC[0]=ZI),ZI>BC[2]&&(BC[2]=ZI);break e}}return{mu:lA,occupied:FI,bounds:BC,gw:pI,gh:RA,fillTextOffsetX:da,fillTextOffsetY:dA,fillTextWidth:NI,fillTextHeight:Rt,fontSize:iA}},aI=function(la,AA,tA,ba,iA){for(var lA=iA.length;lA--;){var yI=la+iA[lA][0],rI=AA+iA[lA][1];if(yI>=Re||rI>=Fe||yI<0||rI<0){if(!z.drawOutOfBound)return!1;continue}if(!be[yI][rI])return!1}return!0},WA=function(la,AA,tA,ba,iA,lA,yI,rI,BI,NI){var Rt=tA.fontSize,QA;St?QA=St(ba,iA,Rt,lA,yI,NI):QA=z.color;var cA;xt?cA=xt(ba,iA,Rt,NI):cA=z.fontWeight;var gI;Ct?gI=Ct(ba,iA,Rt,NI):gI=z.classes,H.forEach(function(LI){if(LI.getContext){var da=LI.getContext("2d"),dA=tA.mu;da.save(),da.scale(1/dA,1/dA),da.font=cA+" "+(Rt*dA).toString(10)+"px "+z.fontFamily,da.fillStyle=QA,da.translate((la+tA.gw/2)*ae*dA,(AA+tA.gh/2)*ae*dA),rI!==0&&da.rotate(-rI),da.textBaseline="middle",da.fillText(ba,tA.fillTextOffsetX*dA,(tA.fillTextOffsetY+Rt*.5)*dA),da.restore()}else{var RA=document.createElement("span"),pI="";pI="rotate("+-rI/Math.PI*180+"deg) ",tA.mu!==1&&(pI+="translateX(-"+tA.fillTextWidth/4+"px) scale("+1/tA.mu+")");var vI={position:"absolute",display:"block",font:cA+" "+Rt*tA.mu+"px "+z.fontFamily,left:(la+tA.gw/2)*ae+tA.fillTextOffsetX+"px",top:(AA+tA.gh/2)*ae+tA.fillTextOffsetY+"px",width:tA.fillTextWidth+"px",height:tA.fillTextHeight+"px",lineHeight:Rt+"px",whiteSpace:"nowrap",transform:pI,webkitTransform:pI,msTransform:pI,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};QA&&(vI.color=QA),RA.textContent=ba;for(var EI in vI)RA.style[EI]=vI[EI];if(BI)for(var zI in BI)RA.setAttribute(zI,BI[zI]);gI&&(RA.className+=gI),LI.appendChild(RA)}})},KA=function(la,AA,tA,ba,iA){if(!(la>=Re||AA>=Fe||la<0||AA<0)){if(be[la][AA]=!1,tA){var lA=H[0].getContext("2d");lA.fillRect(la*ae,AA*ae,ge,ge)}Nt&&(qt[la][AA]={item:iA,dimension:ba})}},rA=function(la,AA,tA,ba,iA,lA){var yI=iA.occupied,rI=z.drawMask,BI;rI&&(BI=H[0].getContext("2d"),BI.save(),BI.fillStyle=z.maskColor);var NI;if(Nt){var Rt=iA.bounds;NI={x:(la+Rt[3])*ae,y:(AA+Rt[0])*ae,w:(Rt[1]-Rt[3]+1)*ae,h:(Rt[2]-Rt[0]+1)*ae}}for(var QA=yI.length;QA--;){var cA=la+yI[QA][0],gI=AA+yI[QA][1];cA>=Re||gI>=Fe||cA<0||gI<0||KA(cA,gI,rI,NI,lA)}rI&&BI.restore()},ta=function _A(la){var AA,tA,ba;Array.isArray(la)?(AA=la[0],tA=la[1]):(AA=la.word,tA=la.weight,ba=la.attributes);var iA=mI(),lA=S(la),yI=jA(AA,tA,iA,lA);if(!yI||VA())return!1;if(!z.drawOutOfBound&&!z.shrinkToFit){var rI=yI.bounds;if(rI[1]-rI[3]+1>Re||rI[2]-rI[0]+1>Fe)return!1}for(var BI=Ue+1,NI=function(cA){var gI=Math.floor(cA[0]-yI.gw/2),LI=Math.floor(cA[1]-yI.gh/2),da=yI.gw,dA=yI.gh;return aI(gI,LI,da,dA,yI.occupied)?(WA(gI,LI,yI,AA,tA,Ue-BI,cA[2],iA,ba,lA),rA(gI,LI,da,dA,yI,la),!0):!1};BI--;){var Rt=TA(Ue-BI);z.shuffle&&(Rt=[].concat(Rt),T(Rt));var QA=Rt.some(NI);if(QA)return!0}return z.shrinkToFit?(Array.isArray(la)?la[1]=la[1]*3/4:la.weight=la.weight*3/4,_A(la)):!1},fa=function(la,AA,tA){if(AA)return!H.some(function(ba){var iA=new CustomEvent(la,{detail:tA||{}});return!ba.dispatchEvent(iA)},this);H.forEach(function(ba){var iA=new CustomEvent(la,{detail:tA||{}});ba.dispatchEvent(iA)},this)},yA=function(){var la=H[0];if(la.getContext)Re=Math.ceil(la.width/ae),Fe=Math.ceil(la.height/ae);else{var AA=la.getBoundingClientRect();Re=Math.ceil(AA.width/ae),Fe=Math.ceil(AA.height/ae)}if(fa("wordcloudstart",!0)){ye=z.origin?[z.origin[0]/ae,z.origin[1]/ae]:[Re/2,Fe/2],Ue=Math.floor(Math.sqrt(Re*Re+Fe*Fe)),be=[];var tA,ba,iA;if(!la.getContext||z.clearCanvas)for(H.forEach(function(da){if(da.getContext){var dA=da.getContext("2d");dA.fillStyle=z.backgroundColor,dA.clearRect(0,0,Re*(ae+1),Fe*(ae+1)),dA.fillRect(0,0,Re*(ae+1),Fe*(ae+1))}else da.textContent="",da.style.backgroundColor=z.backgroundColor,da.style.position="relative"}),tA=Re;tA--;)for(be[tA]=[],ba=Fe;ba--;)be[tA][ba]=!0;else{var lA=document.createElement("canvas").getContext("2d");lA.fillStyle=z.backgroundColor,lA.fillRect(0,0,1,1);var yI=lA.getImageData(0,0,1,1).data,rI=la.getContext("2d").getImageData(0,0,Re*ae,Fe*ae).data;tA=Re;for(var BI,NI;tA--;)for(be[tA]=[],ba=Fe;ba--;){NI=ae;e:for(;NI--;)for(BI=ae;BI--;)for(iA=4;iA--;)if(rI[((ba*ae+NI)*Re*ae+(tA*ae+BI))*4+iA]!==yI[iA]){be[tA][ba]=!1;break e}be[tA][ba]!==!1&&(be[tA][ba]=!0)}rI=lA=yI=void 0}if(z.hover||z.click){for(Nt=!0,tA=Re+1;tA--;)qt[tA]=[];z.hover&&la.addEventListener("mousemove",na),z.click&&(la.addEventListener("click",qn),la.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),la.addEventListener("wordcloudstart",function da(){la.removeEventListener("wordcloudstart",da),la.removeEventListener("mousemove",na),la.removeEventListener("click",qn),Jn=void 0})}iA=0;var Rt,QA;z.wait!==0?(Rt=window.setTimeout,QA=window.clearTimeout):(Rt=window.setImmediate,QA=window.clearImmediate);var cA=function(dA,RA){H.forEach(function(pI){pI.addEventListener(dA,RA)},this)},gI=function(dA,RA){H.forEach(function(pI){pI.removeEventListener(dA,RA)},this)},LI=function da(){gI("wordcloudstart",da),QA(F[K])};cA("wordcloudstart",LI),F[K]=Rt(function da(){if(iA>=z.list.length){QA(F[K]),fa("wordcloudstop",!1),gI("wordcloudstart",LI),delete F[K];return}It=new Date().getTime();var dA=ta(z.list[iA]),RA=!fa("wordclouddrawn",!0,{item:z.list[iA],drawn:dA});if(VA()||RA){QA(F[K]),z.abort(),fa("wordcloudabort",!1),fa("wordcloudstop",!1),gI("wordcloudstart",LI),delete F[K];return}iA++,F[K]=Rt(da,z.wait)},z.wait)}};yA()};M.isSupported=d,M.minFontSize=_,M.stop=function(){if(F)for(var H in F)window.clearImmediate(F[H])},f.exports?f.exports=M:s.WordCloud=M}(commonjsGlobal)})(wordcloud2);var wordcloud2Exports=wordcloud2.exports;const WordCloud=getDefaultExportFromCjs(wordcloud2Exports);class RowChart extends CategoryChart{constructor(s,d,_){super(s,d,_,{x:{}}),this.config.type="row_chart",this.onDataFiltered(null),this.labelg=this.graph_area.append("g"),this.wordcloudCanvas=createEl("canvas",{styles:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%"}},this.contentDiv)}drawWordCloud(s){const d=this.dataStore.getColumnValues(this.config.param),_=this.dataStore.getColumnColors(this.config.param),S=oe=>this.filter.length>0&&this.filter.indexOf(oe)===-1?"lightgray":_[d.indexOf(oe)],T=(oe,se,ae)=>this.filterCategories(oe[0],ae.shiftKey),F=s.map(oe=>[d[oe[1]],Math.log(oe[0])]),M=Math.max(...F.map(oe=>oe[1])),P=this.wordcloudCanvas;P.width=this.contentDiv.clientWidth,P.height=this.contentDiv.clientHeight;const H=(this.config.wordSize||20)/M,J=Math.PI/2;P.style.display="block",this.graph_area.style.display="none";const K=getComputedStyle(P).getPropertyValue("--main_panel_color"),z={list:F,color:S,click:T,weightFactor:H,backgroundColor:K,minRotation:-J,maxRotation:J,rotationSteps:2};console.log("wordcloud options",z),WordCloud(P,z)}drawChart(s=400){const d=this.config,_=select(this.contentDiv).transition().duration(s).ease(linear),S=this.width-this.margins.left-this.margins.right,T=this.height-this.margins.bottom-this.margins.top,F=this.dataStore.getColumnColors(this.config.param),M=this.dataStore.getColumnValues(this.config.param),P=S/this.maxCount;let H=this.rowData;if(H||console.error(">>> No data for row chart - probably a bug, needs tracking..."),this.maxCount,d.exclude_categories){const oe=new Set;for(const se of d.exclude_categories)oe.add(M.indexOf(se));H=this.rowData.filter((se,ae)=>!oe.has(ae)),H.reduce((se,ae)=>Math.max(se[0],ae[0]))}if(this.config.wordcloud){this.drawWordCloud(H);return}this.wordcloudCanvas.style.display="none",this.graph_area.style.display="block";const J=H.length,K=(T-(J+1)*3)/J;let z=Math.round(K);z=z>20?20:z,this.x_scale.domain([0,this.maxCount]),this.updateAxis(),this.labelg.selectAll(".row-bar").data(H,oe=>oe[1]).join("rect").attr("class","row-bar").on("click",(oe,se)=>{this.filterCategories(M[se[1]],oe.shiftKey)}).on("mouseover",(oe,se)=>{d.show_tooltip&&this.showToolTip(oe,`${M[se[1]]}: ${se[0]}`)}).on("mouseout",()=>this.hideToolTip()).transition(_).style("fill",oe=>{const se=oe[1];return this.filter.length>0&&this.filter.indexOf(M[se])===-1?"lightgray":F[se]}).attr("class","row-bar").attr("x",0).attr("width",oe=>oe[0]*P).attr("y",(oe,se)=>(se+1)*3+se*K).attr("height",K),this.graph_area.selectAll(".row-text").data(H,oe=>oe[1]).join("text").on("click",(oe,se)=>{this.filterCategories(M[se[1]],oe.shiftKey)}).on("mouseover",(oe,se)=>{d.show_tooltip&&this.showToolTip(oe,`${M[se[1]]}: ${se[0]}`)}).on("mouseout",()=>this.hideToolTip()).attr("class","row-text").transition(_).text(oe=>M[oe[1]]===""?"none":M[oe[1]]).attr("font-size",`${z}px`).attr("x",5).style("fill","currentColor").attr("y",(oe,se)=>(se+1)*3+se*K+K/2).attr("dominant-baseline","central")}getSettings(){const s=super.getSettings(),d=this.config;if(d.wordcloud)return this.getWordCloudSettings();const _=Math.max(this.data.length||60);return s.concat([{type:"spinner",label:"Max Rows",current_value:d.show_limit||_,max:_,func:S=>{d.show_limit=S,this.updateData(),this.drawChart()}},{type:"check",label:"Hide zero values",current_value:d.filter_zeros,func:S=>{d.filter_zeros=S,this.updateData(),this.drawChart()}},{type:"radiobuttons",label:"Sort Order",current_value:d.sort||"default",choices:[["Default","default"],["Size","size"],["Name","name"]],func:S=>{d.sort=S,this.updateData(),this.drawChart()}},{type:"check",label:"Display as WordCloud",current_value:d.wordcloud,func:S=>{d.wordcloud=S,this.drawChart()}},{type:"check",label:"Show tooltip",current_value:d.show_tooltip,func:S=>{d.show_tooltip=S}}])}getWordCloudSettings(){super.getSettings();const s=this.config;return[{type:"slider",label:"Word Size",current_value:s.wordSize||100,min:10,max:100,func:d=>{s.wordSize=d,this.drawChart()}}]}}BaseChart.types.row_chart={class:RowChart,name:"Row Chart",params:[{type:["text","multitext","text16"],name:"Category"}]};BaseChart.types.wordcloud={class:RowChart,name:"Word Cloud",params:[{type:["text","multitext"],name:"Category"}],init:(f,s)=>{f.wordcloud=!0,f.wordSize=20}};function EventData(){let f=!1,s=!1;this.stopPropagation=()=>{f=!0},this.isPropagationStopped=()=>f,this.stopImmediatePropagation=()=>{s=!0},this.isImmediatePropagationStopped=()=>s}function Event$1(){const f=[];this.subscribe=s=>{f.push(s)},this.unsubscribe=s=>{for(let d=f.length-1;d>=0;d--)f[d]===s&&f.splice(d,1)},this.notify=function(s,d,_){d=d||new EventData,_=_||this;let S;for(let T=0;T<f.length&&!(d.isPropagationStopped()||d.isImmediatePropagationStopped());T++)S=f[T].call(_,d,s);return S}}function EventHandler(){let f=[];this.subscribe=function(s,d){return f.push({event:s,handler:d}),s.subscribe(d),this},this.unsubscribe=function(s,d){let _=f.length;for(;_--;)if(f[_].event===s&&f[_].handler===d){f.splice(_,1),s.unsubscribe(d);return}return this},this.unsubscribeAll=function(){let s=f.length;for(;s--;)f[s].event.unsubscribe(f[s].handler);return f=[],this}}function Range(f,s,d,_){d===void 0&&_===void 0&&(d=f,_=s),this.fromRow=Math.min(f,d),this.fromCell=Math.min(s,_),this.toRow=Math.max(f,d),this.toCell=Math.max(s,_),this.isSingleRow=function(){return this.fromRow===this.toRow},this.isSingleCell=function(){return this.fromRow===this.toRow&&this.fromCell===this.toCell},this.contains=function(S,T){return S>=this.fromRow&&S<=this.toRow&&T>=this.fromCell&&T<=this.toCell},this.toString=function(){return this.isSingleCell()?`(${this.fromRow}:${this.fromCell})`:`(${this.fromRow}:${this.fromCell} - ${this.toRow}:${this.toCell})`}}function NonDataItem(){this.__nonDataRow=!0}function Group(){this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.selectChecked=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}Group.prototype=new NonDataItem;Group.prototype.equals=function(f){return this.value===f.value&&this.count===f.count&&this.collapsed===f.collapsed&&this.title===f.title};function GroupTotals(){this.__groupTotals=!0,this.group=null,this.initialized=!1}GroupTotals.prototype=new NonDataItem;function EditorLock(){let f=null;this.isActive=s=>s?f===s:f!==null,this.activate=s=>{if(s!==f){if(f!==null)throw new Error("SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController");if(!s.commitCurrentEdit)throw new Error("SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()");if(!s.cancelCurrentEdit)throw new Error("SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()");f=s}},this.deactivate=s=>{if(f){if(f!==s)throw new Error("SlickGrid.EditorLock.deactivate: specified editController is not the currently active one");f=null}},this.commitCurrentEdit=()=>f?f.commitCurrentEdit():!0,this.cancelCurrentEdit=function(){return f?f.cancelCurrentEdit():!0}}function TreeColumns(f){const s={};function d(){_(f)}function _(K){K.forEach(z=>{s[z.id]=z,z.columns&&_(z.columns)})}function S(K,z){return K.filter(oe=>{const se=z.call(oe);return se&&oe.columns&&(oe.columns=S(oe.columns,z)),se&&(!oe.columns||oe.columns.length)})}function T(K,z){K.sort((oe,se)=>{const ae=F(z.getColumnIndex(oe.id)),ge=F(z.getColumnIndex(se.id));return ae-ge}).forEach(oe=>{oe.columns&&T(oe.columns,z)})}function F(K){return typeof K>"u"?-1:K}function M(K){if(K.length)for(const z in K)return M(K[z]);else return K.columns?1+M(K.columns):1}function P(K,z,oe){let se=[];if(oe=oe||0,z===oe)return K.length&&K.forEach(ae=>{ae.columns&&(ae.extractColumns=()=>H(ae))}),K;for(const ae in K)K[ae].columns&&(se=se.concat(P(K[ae].columns,z,oe+1)));return se}function H(K){let z=[];if(K.hasOwnProperty("length"))for(let oe=0;oe<K.length;oe++)z=z.concat(H(K[oe]));else if(K.hasOwnProperty("columns"))z=z.concat(H(K.columns));else return K;return z}function J(){return JSON.parse(JSON.stringify(nodesArray))}d(),this.hasDepth=()=>{for(const K in f)if(f[K].hasOwnProperty("columns"))return!0;return!1},this.getTreeColumns=()=>f,this.extractColumns=function(){return this.hasDepth()?H(f):f},this.getDepth=()=>M(f),this.getColumnsInDepth=K=>P(f,K),this.getColumnsInGroup=K=>H(K),this.visibleColumns=()=>S(J(),function(){return this.visible}),this.filter=K=>S(J(),K),this.reOrder=K=>T(f,K),this.getById=K=>s[K],this.getInIds=K=>K.map(z=>s[z])}const Map$1="Map"in window?window.Map:function f(){const s={};this.get=d=>s[d],this.set=(d,_)=>{s[d]=_},this.has=d=>d in s,this.delete=d=>{delete s[d]}},Slick={Event:Event$1,EventData,EventHandler,Range,Map:Map$1,NonDataRow:NonDataItem,Group,GroupTotals,EditorLock,GlobalEditorLock:new EditorLock,TreeColumns,keyCode:{SPACE:8,BACKSPACE:8,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,TAB:9,UP:38,A:65},preClickClassName:"slick-edit-preclick",GridAutosizeColsMode:{None:"NOA",LegacyOff:"LOF",LegacyForceFit:"LFF",IgnoreViewport:"IGV",FitColsToViewport:"FCV",FitViewportToCols:"FVC"},ColAutosizeMode:{Locked:"LCK",Guide:"GUI",Content:"CON",ContentIntelligent:"CTI"},RowSelectionMode:{FirstRow:"FS1",FirstNRows:"FSN",AllRows:"ALL",LastRow:"LS1"},ValueFilterMode:{None:"NONE",DeDuplicate:"DEDP",GetGreatestAndSub:"GR8T",GetLongestTextAndSub:"LNSB",GetLongestText:"LNSC"},WidthEvalMode:{CanvasTextSize:"CANV",HTML:"HTML"}};var jquery={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(f){(function(s,d){f.exports=s.document?d(s,!0):function(_){if(!_.document)throw new Error("jQuery requires a window with a document");return d(_)}})(typeof window<"u"?window:commonjsGlobal,function(s,d){var _=[],S=Object.getPrototypeOf,T=_.slice,F=_.flat?function(Be){return _.flat.call(Be)}:function(Be){return _.concat.apply([],Be)},M=_.push,P=_.indexOf,H={},J=H.toString,K=H.hasOwnProperty,z=K.toString,oe=z.call(Object),se={},ae=function(Le){return typeof Le=="function"&&typeof Le.nodeType!="number"&&typeof Le.item!="function"},ge=function(Le){return Le!=null&&Le===Le.window},pe=s.document,he={type:!0,src:!0,nonce:!0,noModule:!0};function ve(Be,Le,Me){Me=Me||pe;var Ge,Et,wt=Me.createElement("script");if(wt.text=Be,Le)for(Ge in he)Et=Le[Ge]||Le.getAttribute&&Le.getAttribute(Ge),Et&&wt.setAttribute(Ge,Et);Me.head.appendChild(wt).parentNode.removeChild(wt)}function be(Be){return Be==null?Be+"":typeof Be=="object"||typeof Be=="function"?H[J.call(Be)]||"object":typeof Be}var Re="3.7.1",Fe=/HTML$/i,ye=function(Be,Le){return new ye.fn.init(Be,Le)};ye.fn=ye.prototype={jquery:Re,constructor:ye,length:0,toArray:function(){return T.call(this)},get:function(Be){return Be==null?T.call(this):Be<0?this[Be+this.length]:this[Be]},pushStack:function(Be){var Le=ye.merge(this.constructor(),Be);return Le.prevObject=this,Le},each:function(Be){return ye.each(this,Be)},map:function(Be){return this.pushStack(ye.map(this,function(Le,Me){return Be.call(Le,Me,Le)}))},slice:function(){return this.pushStack(T.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ye.grep(this,function(Be,Le){return(Le+1)%2}))},odd:function(){return this.pushStack(ye.grep(this,function(Be,Le){return Le%2}))},eq:function(Be){var Le=this.length,Me=+Be+(Be<0?Le:0);return this.pushStack(Me>=0&&Me<Le?[this[Me]]:[])},end:function(){return this.prevObject||this.constructor()},push:M,sort:_.sort,splice:_.splice},ye.extend=ye.fn.extend=function(){var Be,Le,Me,Ge,Et,wt,Lt=arguments[0]||{},Un=1,Yr=arguments.length,aa=!1;for(typeof Lt=="boolean"&&(aa=Lt,Lt=arguments[Un]||{},Un++),typeof Lt!="object"&&!ae(Lt)&&(Lt={}),Un===Yr&&(Lt=this,Un--);Un<Yr;Un++)if((Be=arguments[Un])!=null)for(Le in Be)Ge=Be[Le],!(Le==="__proto__"||Lt===Ge)&&(aa&&Ge&&(ye.isPlainObject(Ge)||(Et=Array.isArray(Ge)))?(Me=Lt[Le],Et&&!Array.isArray(Me)?wt=[]:!Et&&!ye.isPlainObject(Me)?wt={}:wt=Me,Et=!1,Lt[Le]=ye.extend(aa,wt,Ge)):Ge!==void 0&&(Lt[Le]=Ge));return Lt},ye.extend({expando:"jQuery"+(Re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(Be){throw new Error(Be)},noop:function(){},isPlainObject:function(Be){var Le,Me;return!Be||J.call(Be)!=="[object Object]"?!1:(Le=S(Be),Le?(Me=K.call(Le,"constructor")&&Le.constructor,typeof Me=="function"&&z.call(Me)===oe):!0)},isEmptyObject:function(Be){var Le;for(Le in Be)return!1;return!0},globalEval:function(Be,Le,Me){ve(Be,{nonce:Le&&Le.nonce},Me)},each:function(Be,Le){var Me,Ge=0;if(Ue(Be))for(Me=Be.length;Ge<Me&&Le.call(Be[Ge],Ge,Be[Ge])!==!1;Ge++);else for(Ge in Be)if(Le.call(Be[Ge],Ge,Be[Ge])===!1)break;return Be},text:function(Be){var Le,Me="",Ge=0,Et=Be.nodeType;if(!Et)for(;Le=Be[Ge++];)Me+=ye.text(Le);return Et===1||Et===11?Be.textContent:Et===9?Be.documentElement.textContent:Et===3||Et===4?Be.nodeValue:Me},makeArray:function(Be,Le){var Me=Le||[];return Be!=null&&(Ue(Object(Be))?ye.merge(Me,typeof Be=="string"?[Be]:Be):M.call(Me,Be)),Me},inArray:function(Be,Le,Me){return Le==null?-1:P.call(Le,Be,Me)},isXMLDoc:function(Be){var Le=Be&&Be.namespaceURI,Me=Be&&(Be.ownerDocument||Be).documentElement;return!Fe.test(Le||Me&&Me.nodeName||"HTML")},merge:function(Be,Le){for(var Me=+Le.length,Ge=0,Et=Be.length;Ge<Me;Ge++)Be[Et++]=Le[Ge];return Be.length=Et,Be},grep:function(Be,Le,Me){for(var Ge,Et=[],wt=0,Lt=Be.length,Un=!Me;wt<Lt;wt++)Ge=!Le(Be[wt],wt),Ge!==Un&&Et.push(Be[wt]);return Et},map:function(Be,Le,Me){var Ge,Et,wt=0,Lt=[];if(Ue(Be))for(Ge=Be.length;wt<Ge;wt++)Et=Le(Be[wt],wt,Me),Et!=null&&Lt.push(Et);else for(wt in Be)Et=Le(Be[wt],wt,Me),Et!=null&&Lt.push(Et);return F(Lt)},guid:1,support:se}),typeof Symbol=="function"&&(ye.fn[Symbol.iterator]=_[Symbol.iterator]),ye.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(Be,Le){H["[object "+Le+"]"]=Le.toLowerCase()});function Ue(Be){var Le=!!Be&&"length"in Be&&Be.length,Me=be(Be);return ae(Be)||ge(Be)?!1:Me==="array"||Le===0||typeof Le=="number"&&Le>0&&Le-1 in Be}function It(Be,Le){return Be.nodeName&&Be.nodeName.toLowerCase()===Le.toLowerCase()}var St=_.pop,At=_.sort,xt=_.splice,Ct="[\\x20\\t\\r\\n\\f]",Nt=new RegExp("^"+Ct+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ct+"+$","g");ye.contains=function(Be,Le){var Me=Le&&Le.parentNode;return Be===Me||!!(Me&&Me.nodeType===1&&(Be.contains?Be.contains(Me):Be.compareDocumentPosition&&Be.compareDocumentPosition(Me)&16))};var qt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Jn(Be,Le){return Le?Be==="\0"?"":Be.slice(0,-1)+"\\"+Be.charCodeAt(Be.length-1).toString(16)+" ":"\\"+Be}ye.escapeSelector=function(Be){return(Be+"").replace(qt,Jn)};var qr=pe,na=M;(function(){var Be,Le,Me,Ge,Et,wt=na,Lt,Un,Yr,aa,fA,DA=ye.expando,sA=0,tI=0,tC=im(),fC=im(),aC=im(),WC=im(),MC=function(zt,ea){return zt===ea&&(Et=!0),0},dC="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",BE="(?:\\\\[\\da-fA-F]{1,6}"+Ct+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",hC="\\["+Ct+"*("+BE+")(?:"+Ct+"*([*^$|!~]?=)"+Ct+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+BE+"))|)"+Ct+"*\\]",ZC=":("+BE+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+hC+")*)|.*)\\)|)",pC=new RegExp(Ct+"+","g"),bC=new RegExp("^"+Ct+"*,"+Ct+"*"),yE=new RegExp("^"+Ct+"*([>+~]|"+Ct+")"+Ct+"*"),pm=new RegExp(Ct+"|>"),cE=new RegExp(ZC),RE=new RegExp("^"+BE+"$"),uE={ID:new RegExp("^#("+BE+")"),CLASS:new RegExp("^\\.("+BE+")"),TAG:new RegExp("^("+BE+"|[*])"),ATTR:new RegExp("^"+hC),PSEUDO:new RegExp("^"+ZC),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ct+"*(even|odd|(([+-]|)(\\d*)n|)"+Ct+"*(?:([+-]|)"+Ct+"*(\\d+)|))"+Ct+"*\\)|)","i"),bool:new RegExp("^(?:"+dC+")$","i"),needsContext:new RegExp("^"+Ct+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ct+"*((?:-\\d)?\\d*)"+Ct+"*\\)|)(?=[^-]|$)","i")},TE=/^(?:input|select|textarea|button)$/i,wE=/^h\d$/i,gE=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aB=/[+~]/,NE=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ct+"?|\\\\([^\\r\\n\\f])","g"),LE=function(zt,ea){var nA="0x"+zt.slice(1)-65536;return ea||(nA<0?String.fromCharCode(nA+65536):String.fromCharCode(nA>>10|55296,nA&1023|56320))},xy=function(){FE()},AB=Cm(function(zt){return zt.disabled===!0&&It(zt,"fieldset")},{dir:"parentNode",next:"legend"});function Um(){try{return Lt.activeElement}catch{}}try{wt.apply(_=T.call(qr.childNodes),qr.childNodes),_[qr.childNodes.length].nodeType}catch{wt={apply:function(ea,nA){na.apply(ea,T.call(nA))},call:function(ea){na.apply(ea,T.call(arguments,1))}}}function QC(zt,ea,nA,hA){var wA,fI,_I,RI,SI,lC,jI,WI=ea&&ea.ownerDocument,gC=ea?ea.nodeType:9;if(nA=nA||[],typeof zt!="string"||!zt||gC!==1&&gC!==9&&gC!==11)return nA;if(!hA&&(FE(ea),ea=ea||Lt,Yr)){if(gC!==11&&(SI=gE.exec(zt)))if(wA=SI[1]){if(gC===9)if(_I=ea.getElementById(wA)){if(_I.id===wA)return wt.call(nA,_I),nA}else return nA;else if(WI&&(_I=WI.getElementById(wA))&&QC.contains(ea,_I)&&_I.id===wA)return wt.call(nA,_I),nA}else{if(SI[2])return wt.apply(nA,ea.getElementsByTagName(zt)),nA;if((wA=SI[3])&&ea.getElementsByClassName)return wt.apply(nA,ea.getElementsByClassName(wA)),nA}if(!WC[zt+" "]&&(!aa||!aa.test(zt))){if(jI=zt,WI=ea,gC===1&&(pm.test(zt)||yE.test(zt))){for(WI=aB.test(zt)&&Hm(ea.parentNode)||ea,(WI!=ea||!se.scope)&&((RI=ea.getAttribute("id"))?RI=ye.escapeSelector(RI):ea.setAttribute("id",RI=DA)),lC=nm(zt),fI=lC.length;fI--;)lC[fI]=(RI?"#"+RI:":scope")+" "+Im(lC[fI]);jI=lC.join(",")}try{return wt.apply(nA,WI.querySelectorAll(jI)),nA}catch{WC(zt,!0)}finally{RI===DA&&ea.removeAttribute("id")}}}return TB(zt.replace(Nt,"$1"),ea,nA,hA)}function im(){var zt=[];function ea(nA,hA){return zt.push(nA+" ")>Le.cacheLength&&delete ea[zt.shift()],ea[nA+" "]=hA}return ea}function eE(zt){return zt[DA]=!0,zt}function UE(zt){var ea=Lt.createElement("fieldset");try{return!!zt(ea)}catch{return!1}finally{ea.parentNode&&ea.parentNode.removeChild(ea),ea=null}}function lB(zt){return function(ea){return It(ea,"input")&&ea.type===zt}}function cB(zt){return function(ea){return(It(ea,"input")||It(ea,"button"))&&ea.type===zt}}function $m(zt){return function(ea){return"form"in ea?ea.parentNode&&ea.disabled===!1?"label"in ea?"label"in ea.parentNode?ea.parentNode.disabled===zt:ea.disabled===zt:ea.isDisabled===zt||ea.isDisabled!==!zt&&AB(ea)===zt:ea.disabled===zt:"label"in ea?ea.disabled===zt:!1}}function $E(zt){return eE(function(ea){return ea=+ea,eE(function(nA,hA){for(var wA,fI=zt([],nA.length,ea),_I=fI.length;_I--;)nA[wA=fI[_I]]&&(nA[wA]=!(hA[wA]=nA[wA]))})})}function Hm(zt){return zt&&typeof zt.getElementsByTagName<"u"&&zt}function FE(zt){var ea,nA=zt?zt.ownerDocument||zt:qr;return nA==Lt||nA.nodeType!==9||!nA.documentElement||(Lt=nA,Un=Lt.documentElement,Yr=!ye.isXMLDoc(Lt),fA=Un.matches||Un.webkitMatchesSelector||Un.msMatchesSelector,Un.msMatchesSelector&&qr!=Lt&&(ea=Lt.defaultView)&&ea.top!==ea&&ea.addEventListener("unload",xy),se.getById=UE(function(hA){return Un.appendChild(hA).id=ye.expando,!Lt.getElementsByName||!Lt.getElementsByName(ye.expando).length}),se.disconnectedMatch=UE(function(hA){return fA.call(hA,"*")}),se.scope=UE(function(){return Lt.querySelectorAll(":scope")}),se.cssHas=UE(function(){try{return Lt.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),se.getById?(Le.filter.ID=function(hA){var wA=hA.replace(NE,LE);return function(fI){return fI.getAttribute("id")===wA}},Le.find.ID=function(hA,wA){if(typeof wA.getElementById<"u"&&Yr){var fI=wA.getElementById(hA);return fI?[fI]:[]}}):(Le.filter.ID=function(hA){var wA=hA.replace(NE,LE);return function(fI){var _I=typeof fI.getAttributeNode<"u"&&fI.getAttributeNode("id");return _I&&_I.value===wA}},Le.find.ID=function(hA,wA){if(typeof wA.getElementById<"u"&&Yr){var fI,_I,RI,SI=wA.getElementById(hA);if(SI){if(fI=SI.getAttributeNode("id"),fI&&fI.value===hA)return[SI];for(RI=wA.getElementsByName(hA),_I=0;SI=RI[_I++];)if(fI=SI.getAttributeNode("id"),fI&&fI.value===hA)return[SI]}return[]}}),Le.find.TAG=function(hA,wA){return typeof wA.getElementsByTagName<"u"?wA.getElementsByTagName(hA):wA.querySelectorAll(hA)},Le.find.CLASS=function(hA,wA){if(typeof wA.getElementsByClassName<"u"&&Yr)return wA.getElementsByClassName(hA)},aa=[],UE(function(hA){var wA;Un.appendChild(hA).innerHTML="<a id='"+DA+"' href='' disabled='disabled'></a><select id='"+DA+"-\r\\' disabled='disabled'><option selected=''></option></select>",hA.querySelectorAll("[selected]").length||aa.push("\\["+Ct+"*(?:value|"+dC+")"),hA.querySelectorAll("[id~="+DA+"-]").length||aa.push("~="),hA.querySelectorAll("a#"+DA+"+*").length||aa.push(".#.+[+~]"),hA.querySelectorAll(":checked").length||aa.push(":checked"),wA=Lt.createElement("input"),wA.setAttribute("type","hidden"),hA.appendChild(wA).setAttribute("name","D"),Un.appendChild(hA).disabled=!0,hA.querySelectorAll(":disabled").length!==2&&aa.push(":enabled",":disabled"),wA=Lt.createElement("input"),wA.setAttribute("name",""),hA.appendChild(wA),hA.querySelectorAll("[name='']").length||aa.push("\\["+Ct+"*name"+Ct+"*="+Ct+`*(?:''|"")`)}),se.cssHas||aa.push(":has"),aa=aa.length&&new RegExp(aa.join("|")),MC=function(hA,wA){if(hA===wA)return Et=!0,0;var fI=!hA.compareDocumentPosition-!wA.compareDocumentPosition;return fI||(fI=(hA.ownerDocument||hA)==(wA.ownerDocument||wA)?hA.compareDocumentPosition(wA):1,fI&1||!se.sortDetached&&wA.compareDocumentPosition(hA)===fI?hA===Lt||hA.ownerDocument==qr&&QC.contains(qr,hA)?-1:wA===Lt||wA.ownerDocument==qr&&QC.contains(qr,wA)?1:Ge?P.call(Ge,hA)-P.call(Ge,wA):0:fI&4?-1:1)}),Lt}QC.matches=function(zt,ea){return QC(zt,null,null,ea)},QC.matchesSelector=function(zt,ea){if(FE(zt),Yr&&!WC[ea+" "]&&(!aa||!aa.test(ea)))try{var nA=fA.call(zt,ea);if(nA||se.disconnectedMatch||zt.document&&zt.document.nodeType!==11)return nA}catch{WC(ea,!0)}return QC(ea,Lt,null,[zt]).length>0},QC.contains=function(zt,ea){return(zt.ownerDocument||zt)!=Lt&&FE(zt),ye.contains(zt,ea)},QC.attr=function(zt,ea){(zt.ownerDocument||zt)!=Lt&&FE(zt);var nA=Le.attrHandle[ea.toLowerCase()],hA=nA&&K.call(Le.attrHandle,ea.toLowerCase())?nA(zt,ea,!Yr):void 0;return hA!==void 0?hA:zt.getAttribute(ea)},QC.error=function(zt){throw new Error("Syntax error, unrecognized expression: "+zt)},ye.uniqueSort=function(zt){var ea,nA=[],hA=0,wA=0;if(Et=!se.sortStable,Ge=!se.sortStable&&T.call(zt,0),At.call(zt,MC),Et){for(;ea=zt[wA++];)ea===zt[wA]&&(hA=nA.push(wA));for(;hA--;)xt.call(zt,nA[hA],1)}return Ge=null,zt},ye.fn.uniqueSort=function(){return this.pushStack(ye.uniqueSort(T.apply(this)))},Le=ye.expr={cacheLength:50,createPseudo:eE,match:uE,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(zt){return zt[1]=zt[1].replace(NE,LE),zt[3]=(zt[3]||zt[4]||zt[5]||"").replace(NE,LE),zt[2]==="~="&&(zt[3]=" "+zt[3]+" "),zt.slice(0,4)},CHILD:function(zt){return zt[1]=zt[1].toLowerCase(),zt[1].slice(0,3)==="nth"?(zt[3]||QC.error(zt[0]),zt[4]=+(zt[4]?zt[5]+(zt[6]||1):2*(zt[3]==="even"||zt[3]==="odd")),zt[5]=+(zt[7]+zt[8]||zt[3]==="odd")):zt[3]&&QC.error(zt[0]),zt},PSEUDO:function(zt){var ea,nA=!zt[6]&&zt[2];return uE.CHILD.test(zt[0])?null:(zt[3]?zt[2]=zt[4]||zt[5]||"":nA&&cE.test(nA)&&(ea=nm(nA,!0))&&(ea=nA.indexOf(")",nA.length-ea)-nA.length)&&(zt[0]=zt[0].slice(0,ea),zt[2]=nA.slice(0,ea)),zt.slice(0,3))}},filter:{TAG:function(zt){var ea=zt.replace(NE,LE).toLowerCase();return zt==="*"?function(){return!0}:function(nA){return It(nA,ea)}},CLASS:function(zt){var ea=tC[zt+" "];return ea||(ea=new RegExp("(^|"+Ct+")"+zt+"("+Ct+"|$)"))&&tC(zt,function(nA){return ea.test(typeof nA.className=="string"&&nA.className||typeof nA.getAttribute<"u"&&nA.getAttribute("class")||"")})},ATTR:function(zt,ea,nA){return function(hA){var wA=QC.attr(hA,zt);return wA==null?ea==="!=":ea?(wA+="",ea==="="?wA===nA:ea==="!="?wA!==nA:ea==="^="?nA&&wA.indexOf(nA)===0:ea==="*="?nA&&wA.indexOf(nA)>-1:ea==="$="?nA&&wA.slice(-nA.length)===nA:ea==="~="?(" "+wA.replace(pC," ")+" ").indexOf(nA)>-1:ea==="|="?wA===nA||wA.slice(0,nA.length+1)===nA+"-":!1):!0}},CHILD:function(zt,ea,nA,hA,wA){var fI=zt.slice(0,3)!=="nth",_I=zt.slice(-4)!=="last",RI=ea==="of-type";return hA===1&&wA===0?function(SI){return!!SI.parentNode}:function(SI,lC,jI){var WI,gC,JI,SC,aE,tE=fI!==_I?"nextSibling":"previousSibling",pE=SI.parentNode,xE=RI&&SI.nodeName.toLowerCase(),zE=!jI&&!RI,$C=!1;if(pE){if(fI){for(;tE;){for(JI=SI;JI=JI[tE];)if(RI?It(JI,xE):JI.nodeType===1)return!1;aE=tE=zt==="only"&&!aE&&"nextSibling"}return!0}if(aE=[_I?pE.firstChild:pE.lastChild],_I&&zE){for(gC=pE[DA]||(pE[DA]={}),WI=gC[zt]||[],SC=WI[0]===sA&&WI[1],$C=SC&&WI[2],JI=SC&&pE.childNodes[SC];JI=++SC&&JI&&JI[tE]||($C=SC=0)||aE.pop();)if(JI.nodeType===1&&++$C&&JI===SI){gC[zt]=[sA,SC,$C];break}}else if(zE&&(gC=SI[DA]||(SI[DA]={}),WI=gC[zt]||[],SC=WI[0]===sA&&WI[1],$C=SC),$C===!1)for(;(JI=++SC&&JI&&JI[tE]||($C=SC=0)||aE.pop())&&!((RI?It(JI,xE):JI.nodeType===1)&&++$C&&(zE&&(gC=JI[DA]||(JI[DA]={}),gC[zt]=[sA,$C]),JI===SI)););return $C-=wA,$C===hA||$C%hA===0&&$C/hA>=0}}},PSEUDO:function(zt,ea){var nA,hA=Le.pseudos[zt]||Le.setFilters[zt.toLowerCase()]||QC.error("unsupported pseudo: "+zt);return hA[DA]?hA(ea):hA.length>1?(nA=[zt,zt,"",ea],Le.setFilters.hasOwnProperty(zt.toLowerCase())?eE(function(wA,fI){for(var _I,RI=hA(wA,ea),SI=RI.length;SI--;)_I=P.call(wA,RI[SI]),wA[_I]=!(fI[_I]=RI[SI])}):function(wA){return hA(wA,0,nA)}):hA}},pseudos:{not:eE(function(zt){var ea=[],nA=[],hA=gB(zt.replace(Nt,"$1"));return hA[DA]?eE(function(wA,fI,_I,RI){for(var SI,lC=hA(wA,null,RI,[]),jI=wA.length;jI--;)(SI=lC[jI])&&(wA[jI]=!(fI[jI]=SI))}):function(wA,fI,_I){return ea[0]=wA,hA(ea,null,_I,nA),ea[0]=null,!nA.pop()}}),has:eE(function(zt){return function(ea){return QC(zt,ea).length>0}}),contains:eE(function(zt){return zt=zt.replace(NE,LE),function(ea){return(ea.textContent||ye.text(ea)).indexOf(zt)>-1}}),lang:eE(function(zt){return RE.test(zt||"")||QC.error("unsupported lang: "+zt),zt=zt.replace(NE,LE).toLowerCase(),function(ea){var nA;do if(nA=Yr?ea.lang:ea.getAttribute("xml:lang")||ea.getAttribute("lang"))return nA=nA.toLowerCase(),nA===zt||nA.indexOf(zt+"-")===0;while((ea=ea.parentNode)&&ea.nodeType===1);return!1}}),target:function(zt){var ea=s.location&&s.location.hash;return ea&&ea.slice(1)===zt.id},root:function(zt){return zt===Un},focus:function(zt){return zt===Um()&&Lt.hasFocus()&&!!(zt.type||zt.href||~zt.tabIndex)},enabled:$m(!1),disabled:$m(!0),checked:function(zt){return It(zt,"input")&&!!zt.checked||It(zt,"option")&&!!zt.selected},selected:function(zt){return zt.parentNode&&zt.parentNode.selectedIndex,zt.selected===!0},empty:function(zt){for(zt=zt.firstChild;zt;zt=zt.nextSibling)if(zt.nodeType<6)return!1;return!0},parent:function(zt){return!Le.pseudos.empty(zt)},header:function(zt){return wE.test(zt.nodeName)},input:function(zt){return TE.test(zt.nodeName)},button:function(zt){return It(zt,"input")&&zt.type==="button"||It(zt,"button")},text:function(zt){var ea;return It(zt,"input")&&zt.type==="text"&&((ea=zt.getAttribute("type"))==null||ea.toLowerCase()==="text")},first:$E(function(){return[0]}),last:$E(function(zt,ea){return[ea-1]}),eq:$E(function(zt,ea,nA){return[nA<0?nA+ea:nA]}),even:$E(function(zt,ea){for(var nA=0;nA<ea;nA+=2)zt.push(nA);return zt}),odd:$E(function(zt,ea){for(var nA=1;nA<ea;nA+=2)zt.push(nA);return zt}),lt:$E(function(zt,ea,nA){var hA;for(nA<0?hA=nA+ea:nA>ea?hA=ea:hA=nA;--hA>=0;)zt.push(hA);return zt}),gt:$E(function(zt,ea,nA){for(var hA=nA<0?nA+ea:nA;++hA<ea;)zt.push(hA);return zt})}},Le.pseudos.nth=Le.pseudos.eq;for(Be in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Le.pseudos[Be]=lB(Be);for(Be in{submit:!0,reset:!0})Le.pseudos[Be]=cB(Be);function uB(){}uB.prototype=Le.filters=Le.pseudos,Le.setFilters=new uB;function nm(zt,ea){var nA,hA,wA,fI,_I,RI,SI,lC=fC[zt+" "];if(lC)return ea?0:lC.slice(0);for(_I=zt,RI=[],SI=Le.preFilter;_I;){(!nA||(hA=bC.exec(_I)))&&(hA&&(_I=_I.slice(hA[0].length)||_I),RI.push(wA=[])),nA=!1,(hA=yE.exec(_I))&&(nA=hA.shift(),wA.push({value:nA,type:hA[0].replace(Nt," ")}),_I=_I.slice(nA.length));for(fI in Le.filter)(hA=uE[fI].exec(_I))&&(!SI[fI]||(hA=SI[fI](hA)))&&(nA=hA.shift(),wA.push({value:nA,type:fI,matches:hA}),_I=_I.slice(nA.length));if(!nA)break}return ea?_I.length:_I?QC.error(zt):fC(zt,RI).slice(0)}function Im(zt){for(var ea=0,nA=zt.length,hA="";ea<nA;ea++)hA+=zt[ea].value;return hA}function Cm(zt,ea,nA){var hA=ea.dir,wA=ea.next,fI=wA||hA,_I=nA&&fI==="parentNode",RI=tI++;return ea.first?function(SI,lC,jI){for(;SI=SI[hA];)if(SI.nodeType===1||_I)return zt(SI,lC,jI);return!1}:function(SI,lC,jI){var WI,gC,JI=[sA,RI];if(jI){for(;SI=SI[hA];)if((SI.nodeType===1||_I)&&zt(SI,lC,jI))return!0}else for(;SI=SI[hA];)if(SI.nodeType===1||_I)if(gC=SI[DA]||(SI[DA]={}),wA&&It(SI,wA))SI=SI[hA]||SI;else{if((WI=gC[fI])&&WI[0]===sA&&WI[1]===RI)return JI[2]=WI[2];if(gC[fI]=JI,JI[2]=zt(SI,lC,jI))return!0}return!1}}function qm(zt){return zt.length>1?function(ea,nA,hA){for(var wA=zt.length;wA--;)if(!zt[wA](ea,nA,hA))return!1;return!0}:zt[0]}function om(zt,ea,nA){for(var hA=0,wA=ea.length;hA<wA;hA++)QC(zt,ea[hA],nA);return nA}function sm(zt,ea,nA,hA,wA){for(var fI,_I=[],RI=0,SI=zt.length,lC=ea!=null;RI<SI;RI++)(fI=zt[RI])&&(!nA||nA(fI,hA,wA))&&(_I.push(fI),lC&&ea.push(RI));return _I}function Em(zt,ea,nA,hA,wA,fI){return hA&&!hA[DA]&&(hA=Em(hA)),wA&&!wA[DA]&&(wA=Em(wA,fI)),eE(function(_I,RI,SI,lC){var jI,WI,gC,JI,SC=[],aE=[],tE=RI.length,pE=_I||om(ea||"*",SI.nodeType?[SI]:SI,[]),xE=zt&&(_I||!ea)?sm(pE,SC,zt,SI,lC):pE;if(nA?(JI=wA||(_I?zt:tE||hA)?[]:RI,nA(xE,JI,SI,lC)):JI=xE,hA)for(jI=sm(JI,aE),hA(jI,[],SI,lC),WI=jI.length;WI--;)(gC=jI[WI])&&(JI[aE[WI]]=!(xE[aE[WI]]=gC));if(_I){if(wA||zt){if(wA){for(jI=[],WI=JI.length;WI--;)(gC=JI[WI])&&jI.push(xE[WI]=gC);wA(null,JI=[],jI,lC)}for(WI=JI.length;WI--;)(gC=JI[WI])&&(jI=wA?P.call(_I,gC):SC[WI])>-1&&(_I[jI]=!(RI[jI]=gC))}}else JI=sm(JI===RI?JI.splice(tE,JI.length):JI),wA?wA(null,RI,JI,lC):wt.apply(RI,JI)})}function KE(zt){for(var ea,nA,hA,wA=zt.length,fI=Le.relative[zt[0].type],_I=fI||Le.relative[" "],RI=fI?1:0,SI=Cm(function(WI){return WI===ea},_I,!0),lC=Cm(function(WI){return P.call(ea,WI)>-1},_I,!0),jI=[function(WI,gC,JI){var SC=!fI&&(JI||gC!=Me)||((ea=gC).nodeType?SI(WI,gC,JI):lC(WI,gC,JI));return ea=null,SC}];RI<wA;RI++)if(nA=Le.relative[zt[RI].type])jI=[Cm(qm(jI),nA)];else{if(nA=Le.filter[zt[RI].type].apply(null,zt[RI].matches),nA[DA]){for(hA=++RI;hA<wA&&!Le.relative[zt[hA].type];hA++);return Em(RI>1&&qm(jI),RI>1&&Im(zt.slice(0,RI-1).concat({value:zt[RI-2].type===" "?"*":""})).replace(Nt,"$1"),nA,RI<hA&&KE(zt.slice(RI,hA)),hA<wA&&KE(zt=zt.slice(hA)),hA<wA&&Im(zt))}jI.push(nA)}return qm(jI)}function by(zt,ea){var nA=ea.length>0,hA=zt.length>0,wA=function(fI,_I,RI,SI,lC){var jI,WI,gC,JI=0,SC="0",aE=fI&&[],tE=[],pE=Me,xE=fI||hA&&Le.find.TAG("*",lC),zE=sA+=pE==null?1:Math.random()||.1,$C=xE.length;for(lC&&(Me=_I==Lt||_I||lC);SC!==$C&&(jI=xE[SC])!=null;SC++){if(hA&&jI){for(WI=0,!_I&&jI.ownerDocument!=Lt&&(FE(jI),RI=!Yr);gC=zt[WI++];)if(gC(jI,_I||Lt,RI)){wt.call(SI,jI);break}lC&&(sA=zE)}nA&&((jI=!gC&&jI)&&JI--,fI&&aE.push(jI))}if(JI+=SC,nA&&SC!==JI){for(WI=0;gC=ea[WI++];)gC(aE,tE,_I,RI);if(fI){if(JI>0)for(;SC--;)aE[SC]||tE[SC]||(tE[SC]=St.call(SI));tE=sm(tE)}wt.apply(SI,tE),lC&&!fI&&tE.length>0&&JI+ea.length>1&&ye.uniqueSort(SI)}return lC&&(sA=zE,Me=pE),aE};return nA?eE(wA):wA}function gB(zt,ea){var nA,hA=[],wA=[],fI=aC[zt+" "];if(!fI){for(ea||(ea=nm(zt)),nA=ea.length;nA--;)fI=KE(ea[nA]),fI[DA]?hA.push(fI):wA.push(fI);fI=aC(zt,by(wA,hA)),fI.selector=zt}return fI}function TB(zt,ea,nA,hA){var wA,fI,_I,RI,SI,lC=typeof zt=="function"&&zt,jI=!hA&&nm(zt=lC.selector||zt);if(nA=nA||[],jI.length===1){if(fI=jI[0]=jI[0].slice(0),fI.length>2&&(_I=fI[0]).type==="ID"&&ea.nodeType===9&&Yr&&Le.relative[fI[1].type]){if(ea=(Le.find.ID(_I.matches[0].replace(NE,LE),ea)||[])[0],ea)lC&&(ea=ea.parentNode);else return nA;zt=zt.slice(fI.shift().value.length)}for(wA=uE.needsContext.test(zt)?0:fI.length;wA--&&(_I=fI[wA],!Le.relative[RI=_I.type]);)if((SI=Le.find[RI])&&(hA=SI(_I.matches[0].replace(NE,LE),aB.test(fI[0].type)&&Hm(ea.parentNode)||ea))){if(fI.splice(wA,1),zt=hA.length&&Im(fI),!zt)return wt.apply(nA,hA),nA;break}}return(lC||gB(zt,jI))(hA,ea,!Yr,nA,!ea||aB.test(zt)&&Hm(ea.parentNode)||ea),nA}se.sortStable=DA.split("").sort(MC).join("")===DA,FE(),se.sortDetached=UE(function(zt){return zt.compareDocumentPosition(Lt.createElement("fieldset"))&1}),ye.find=QC,ye.expr[":"]=ye.expr.pseudos,ye.unique=ye.uniqueSort,QC.compile=gB,QC.select=TB,QC.setDocument=FE,QC.tokenize=nm,QC.escape=ye.escapeSelector,QC.getText=ye.text,QC.isXML=ye.isXMLDoc,QC.selectors=ye.expr,QC.support=ye.support,QC.uniqueSort=ye.uniqueSort})();var qn=function(Be,Le,Me){for(var Ge=[],Et=Me!==void 0;(Be=Be[Le])&&Be.nodeType!==9;)if(Be.nodeType===1){if(Et&&ye(Be).is(Me))break;Ge.push(Be)}return Ge},vA=function(Be,Le){for(var Me=[];Be;Be=Be.nextSibling)Be.nodeType===1&&Be!==Le&&Me.push(Be);return Me},TA=ye.expr.match.needsContext,VA=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function mI(Be,Le,Me){return ae(Le)?ye.grep(Be,function(Ge,Et){return!!Le.call(Ge,Et,Ge)!==Me}):Le.nodeType?ye.grep(Be,function(Ge){return Ge===Le!==Me}):typeof Le!="string"?ye.grep(Be,function(Ge){return P.call(Le,Ge)>-1!==Me}):ye.filter(Le,Be,Me)}ye.filter=function(Be,Le,Me){var Ge=Le[0];return Me&&(Be=":not("+Be+")"),Le.length===1&&Ge.nodeType===1?ye.find.matchesSelector(Ge,Be)?[Ge]:[]:ye.find.matches(Be,ye.grep(Le,function(Et){return Et.nodeType===1}))},ye.fn.extend({find:function(Be){var Le,Me,Ge=this.length,Et=this;if(typeof Be!="string")return this.pushStack(ye(Be).filter(function(){for(Le=0;Le<Ge;Le++)if(ye.contains(Et[Le],this))return!0}));for(Me=this.pushStack([]),Le=0;Le<Ge;Le++)ye.find(Be,Et[Le],Me);return Ge>1?ye.uniqueSort(Me):Me},filter:function(Be){return this.pushStack(mI(this,Be||[],!1))},not:function(Be){return this.pushStack(mI(this,Be||[],!0))},is:function(Be){return!!mI(this,typeof Be=="string"&&TA.test(Be)?ye(Be):Be||[],!1).length}});var jA,aI=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,WA=ye.fn.init=function(Be,Le,Me){var Ge,Et;if(!Be)return this;if(Me=Me||jA,typeof Be=="string")if(Be[0]==="<"&&Be[Be.length-1]===">"&&Be.length>=3?Ge=[null,Be,null]:Ge=aI.exec(Be),Ge&&(Ge[1]||!Le))if(Ge[1]){if(Le=Le instanceof ye?Le[0]:Le,ye.merge(this,ye.parseHTML(Ge[1],Le&&Le.nodeType?Le.ownerDocument||Le:pe,!0)),VA.test(Ge[1])&&ye.isPlainObject(Le))for(Ge in Le)ae(this[Ge])?this[Ge](Le[Ge]):this.attr(Ge,Le[Ge]);return this}else return Et=pe.getElementById(Ge[2]),Et&&(this[0]=Et,this.length=1),this;else return!Le||Le.jquery?(Le||Me).find(Be):this.constructor(Le).find(Be);else{if(Be.nodeType)return this[0]=Be,this.length=1,this;if(ae(Be))return Me.ready!==void 0?Me.ready(Be):Be(ye)}return ye.makeArray(Be,this)};WA.prototype=ye.fn,jA=ye(pe);var KA=/^(?:parents|prev(?:Until|All))/,rA={children:!0,contents:!0,next:!0,prev:!0};ye.fn.extend({has:function(Be){var Le=ye(Be,this),Me=Le.length;return this.filter(function(){for(var Ge=0;Ge<Me;Ge++)if(ye.contains(this,Le[Ge]))return!0})},closest:function(Be,Le){var Me,Ge=0,Et=this.length,wt=[],Lt=typeof Be!="string"&&ye(Be);if(!TA.test(Be)){for(;Ge<Et;Ge++)for(Me=this[Ge];Me&&Me!==Le;Me=Me.parentNode)if(Me.nodeType<11&&(Lt?Lt.index(Me)>-1:Me.nodeType===1&&ye.find.matchesSelector(Me,Be))){wt.push(Me);break}}return this.pushStack(wt.length>1?ye.uniqueSort(wt):wt)},index:function(Be){return Be?typeof Be=="string"?P.call(ye(Be),this[0]):P.call(this,Be.jquery?Be[0]:Be):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(Be,Le){return this.pushStack(ye.uniqueSort(ye.merge(this.get(),ye(Be,Le))))},addBack:function(Be){return this.add(Be==null?this.prevObject:this.prevObject.filter(Be))}});function ta(Be,Le){for(;(Be=Be[Le])&&Be.nodeType!==1;);return Be}ye.each({parent:function(Be){var Le=Be.parentNode;return Le&&Le.nodeType!==11?Le:null},parents:function(Be){return qn(Be,"parentNode")},parentsUntil:function(Be,Le,Me){return qn(Be,"parentNode",Me)},next:function(Be){return ta(Be,"nextSibling")},prev:function(Be){return ta(Be,"previousSibling")},nextAll:function(Be){return qn(Be,"nextSibling")},prevAll:function(Be){return qn(Be,"previousSibling")},nextUntil:function(Be,Le,Me){return qn(Be,"nextSibling",Me)},prevUntil:function(Be,Le,Me){return qn(Be,"previousSibling",Me)},siblings:function(Be){return vA((Be.parentNode||{}).firstChild,Be)},children:function(Be){return vA(Be.firstChild)},contents:function(Be){return Be.contentDocument!=null&&S(Be.contentDocument)?Be.contentDocument:(It(Be,"template")&&(Be=Be.content||Be),ye.merge([],Be.childNodes))}},function(Be,Le){ye.fn[Be]=function(Me,Ge){var Et=ye.map(this,Le,Me);return Be.slice(-5)!=="Until"&&(Ge=Me),Ge&&typeof Ge=="string"&&(Et=ye.filter(Ge,Et)),this.length>1&&(rA[Be]||ye.uniqueSort(Et),KA.test(Be)&&Et.reverse()),this.pushStack(Et)}});var fa=/[^\x20\t\r\n\f]+/g;function yA(Be){var Le={};return ye.each(Be.match(fa)||[],function(Me,Ge){Le[Ge]=!0}),Le}ye.Callbacks=function(Be){Be=typeof Be=="string"?yA(Be):ye.extend({},Be);var Le,Me,Ge,Et,wt=[],Lt=[],Un=-1,Yr=function(){for(Et=Et||Be.once,Ge=Le=!0;Lt.length;Un=-1)for(Me=Lt.shift();++Un<wt.length;)wt[Un].apply(Me[0],Me[1])===!1&&Be.stopOnFalse&&(Un=wt.length,Me=!1);Be.memory||(Me=!1),Le=!1,Et&&(Me?wt=[]:wt="")},aa={add:function(){return wt&&(Me&&!Le&&(Un=wt.length-1,Lt.push(Me)),function fA(DA){ye.each(DA,function(sA,tI){ae(tI)?(!Be.unique||!aa.has(tI))&&wt.push(tI):tI&&tI.length&&be(tI)!=="string"&&fA(tI)})}(arguments),Me&&!Le&&Yr()),this},remove:function(){return ye.each(arguments,function(fA,DA){for(var sA;(sA=ye.inArray(DA,wt,sA))>-1;)wt.splice(sA,1),sA<=Un&&Un--}),this},has:function(fA){return fA?ye.inArray(fA,wt)>-1:wt.length>0},empty:function(){return wt&&(wt=[]),this},disable:function(){return Et=Lt=[],wt=Me="",this},disabled:function(){return!wt},lock:function(){return Et=Lt=[],!Me&&!Le&&(wt=Me=""),this},locked:function(){return!!Et},fireWith:function(fA,DA){return Et||(DA=DA||[],DA=[fA,DA.slice?DA.slice():DA],Lt.push(DA),Le||Yr()),this},fire:function(){return aa.fireWith(this,arguments),this},fired:function(){return!!Ge}};return aa};function _A(Be){return Be}function la(Be){throw Be}function AA(Be,Le,Me,Ge){var Et;try{Be&&ae(Et=Be.promise)?Et.call(Be).done(Le).fail(Me):Be&&ae(Et=Be.then)?Et.call(Be,Le,Me):Le.apply(void 0,[Be].slice(Ge))}catch(wt){Me.apply(void 0,[wt])}}ye.extend({Deferred:function(Be){var Le=[["notify","progress",ye.Callbacks("memory"),ye.Callbacks("memory"),2],["resolve","done",ye.Callbacks("once memory"),ye.Callbacks("once memory"),0,"resolved"],["reject","fail",ye.Callbacks("once memory"),ye.Callbacks("once memory"),1,"rejected"]],Me="pending",Ge={state:function(){return Me},always:function(){return Et.done(arguments).fail(arguments),this},catch:function(wt){return Ge.then(null,wt)},pipe:function(){var wt=arguments;return ye.Deferred(function(Lt){ye.each(Le,function(Un,Yr){var aa=ae(wt[Yr[4]])&&wt[Yr[4]];Et[Yr[1]](function(){var fA=aa&&aa.apply(this,arguments);fA&&ae(fA.promise)?fA.promise().progress(Lt.notify).done(Lt.resolve).fail(Lt.reject):Lt[Yr[0]+"With"](this,aa?[fA]:arguments)})}),wt=null}).promise()},then:function(wt,Lt,Un){var Yr=0;function aa(fA,DA,sA,tI){return function(){var tC=this,fC=arguments,aC=function(){var MC,dC;if(!(fA<Yr)){if(MC=sA.apply(tC,fC),MC===DA.promise())throw new TypeError("Thenable self-resolution");dC=MC&&(typeof MC=="object"||typeof MC=="function")&&MC.then,ae(dC)?tI?dC.call(MC,aa(Yr,DA,_A,tI),aa(Yr,DA,la,tI)):(Yr++,dC.call(MC,aa(Yr,DA,_A,tI),aa(Yr,DA,la,tI),aa(Yr,DA,_A,DA.notifyWith))):(sA!==_A&&(tC=void 0,fC=[MC]),(tI||DA.resolveWith)(tC,fC))}},WC=tI?aC:function(){try{aC()}catch(MC){ye.Deferred.exceptionHook&&ye.Deferred.exceptionHook(MC,WC.error),fA+1>=Yr&&(sA!==la&&(tC=void 0,fC=[MC]),DA.rejectWith(tC,fC))}};fA?WC():(ye.Deferred.getErrorHook?WC.error=ye.Deferred.getErrorHook():ye.Deferred.getStackHook&&(WC.error=ye.Deferred.getStackHook()),s.setTimeout(WC))}}return ye.Deferred(function(fA){Le[0][3].add(aa(0,fA,ae(Un)?Un:_A,fA.notifyWith)),Le[1][3].add(aa(0,fA,ae(wt)?wt:_A)),Le[2][3].add(aa(0,fA,ae(Lt)?Lt:la))}).promise()},promise:function(wt){return wt!=null?ye.extend(wt,Ge):Ge}},Et={};return ye.each(Le,function(wt,Lt){var Un=Lt[2],Yr=Lt[5];Ge[Lt[1]]=Un.add,Yr&&Un.add(function(){Me=Yr},Le[3-wt][2].disable,Le[3-wt][3].disable,Le[0][2].lock,Le[0][3].lock),Un.add(Lt[3].fire),Et[Lt[0]]=function(){return Et[Lt[0]+"With"](this===Et?void 0:this,arguments),this},Et[Lt[0]+"With"]=Un.fireWith}),Ge.promise(Et),Be&&Be.call(Et,Et),Et},when:function(Be){var Le=arguments.length,Me=Le,Ge=Array(Me),Et=T.call(arguments),wt=ye.Deferred(),Lt=function(Un){return function(Yr){Ge[Un]=this,Et[Un]=arguments.length>1?T.call(arguments):Yr,--Le||wt.resolveWith(Ge,Et)}};if(Le<=1&&(AA(Be,wt.done(Lt(Me)).resolve,wt.reject,!Le),wt.state()==="pending"||ae(Et[Me]&&Et[Me].then)))return wt.then();for(;Me--;)AA(Et[Me],Lt(Me),wt.reject);return wt.promise()}});var tA=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ye.Deferred.exceptionHook=function(Be,Le){s.console&&s.console.warn&&Be&&tA.test(Be.name)&&s.console.warn("jQuery.Deferred exception: "+Be.message,Be.stack,Le)},ye.readyException=function(Be){s.setTimeout(function(){throw Be})};var ba=ye.Deferred();ye.fn.ready=function(Be){return ba.then(Be).catch(function(Le){ye.readyException(Le)}),this},ye.extend({isReady:!1,readyWait:1,ready:function(Be){(Be===!0?--ye.readyWait:ye.isReady)||(ye.isReady=!0,!(Be!==!0&&--ye.readyWait>0)&&ba.resolveWith(pe,[ye]))}}),ye.ready.then=ba.then;function iA(){pe.removeEventListener("DOMContentLoaded",iA),s.removeEventListener("load",iA),ye.ready()}pe.readyState==="complete"||pe.readyState!=="loading"&&!pe.documentElement.doScroll?s.setTimeout(ye.ready):(pe.addEventListener("DOMContentLoaded",iA),s.addEventListener("load",iA));var lA=function(Be,Le,Me,Ge,Et,wt,Lt){var Un=0,Yr=Be.length,aa=Me==null;if(be(Me)==="object"){Et=!0;for(Un in Me)lA(Be,Le,Un,Me[Un],!0,wt,Lt)}else if(Ge!==void 0&&(Et=!0,ae(Ge)||(Lt=!0),aa&&(Lt?(Le.call(Be,Ge),Le=null):(aa=Le,Le=function(fA,DA,sA){return aa.call(ye(fA),sA)})),Le))for(;Un<Yr;Un++)Le(Be[Un],Me,Lt?Ge:Ge.call(Be[Un],Un,Le(Be[Un],Me)));return Et?Be:aa?Le.call(Be):Yr?Le(Be[0],Me):wt},yI=/^-ms-/,rI=/-([a-z])/g;function BI(Be,Le){return Le.toUpperCase()}function NI(Be){return Be.replace(yI,"ms-").replace(rI,BI)}var Rt=function(Be){return Be.nodeType===1||Be.nodeType===9||!+Be.nodeType};function QA(){this.expando=ye.expando+QA.uid++}QA.uid=1,QA.prototype={cache:function(Be){var Le=Be[this.expando];return Le||(Le={},Rt(Be)&&(Be.nodeType?Be[this.expando]=Le:Object.defineProperty(Be,this.expando,{value:Le,configurable:!0}))),Le},set:function(Be,Le,Me){var Ge,Et=this.cache(Be);if(typeof Le=="string")Et[NI(Le)]=Me;else for(Ge in Le)Et[NI(Ge)]=Le[Ge];return Et},get:function(Be,Le){return Le===void 0?this.cache(Be):Be[this.expando]&&Be[this.expando][NI(Le)]},access:function(Be,Le,Me){return Le===void 0||Le&&typeof Le=="string"&&Me===void 0?this.get(Be,Le):(this.set(Be,Le,Me),Me!==void 0?Me:Le)},remove:function(Be,Le){var Me,Ge=Be[this.expando];if(Ge!==void 0){if(Le!==void 0)for(Array.isArray(Le)?Le=Le.map(NI):(Le=NI(Le),Le=Le in Ge?[Le]:Le.match(fa)||[]),Me=Le.length;Me--;)delete Ge[Le[Me]];(Le===void 0||ye.isEmptyObject(Ge))&&(Be.nodeType?Be[this.expando]=void 0:delete Be[this.expando])}},hasData:function(Be){var Le=Be[this.expando];return Le!==void 0&&!ye.isEmptyObject(Le)}};var cA=new QA,gI=new QA,LI=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,da=/[A-Z]/g;function dA(Be){return Be==="true"?!0:Be==="false"?!1:Be==="null"?null:Be===+Be+""?+Be:LI.test(Be)?JSON.parse(Be):Be}function RA(Be,Le,Me){var Ge;if(Me===void 0&&Be.nodeType===1)if(Ge="data-"+Le.replace(da,"-$&").toLowerCase(),Me=Be.getAttribute(Ge),typeof Me=="string"){try{Me=dA(Me)}catch{}gI.set(Be,Le,Me)}else Me=void 0;return Me}ye.extend({hasData:function(Be){return gI.hasData(Be)||cA.hasData(Be)},data:function(Be,Le,Me){return gI.access(Be,Le,Me)},removeData:function(Be,Le){gI.remove(Be,Le)},_data:function(Be,Le,Me){return cA.access(Be,Le,Me)},_removeData:function(Be,Le){cA.remove(Be,Le)}}),ye.fn.extend({data:function(Be,Le){var Me,Ge,Et,wt=this[0],Lt=wt&&wt.attributes;if(Be===void 0){if(this.length&&(Et=gI.get(wt),wt.nodeType===1&&!cA.get(wt,"hasDataAttrs"))){for(Me=Lt.length;Me--;)Lt[Me]&&(Ge=Lt[Me].name,Ge.indexOf("data-")===0&&(Ge=NI(Ge.slice(5)),RA(wt,Ge,Et[Ge])));cA.set(wt,"hasDataAttrs",!0)}return Et}return typeof Be=="object"?this.each(function(){gI.set(this,Be)}):lA(this,function(Un){var Yr;if(wt&&Un===void 0)return Yr=gI.get(wt,Be),Yr!==void 0||(Yr=RA(wt,Be),Yr!==void 0)?Yr:void 0;this.each(function(){gI.set(this,Be,Un)})},null,Le,arguments.length>1,null,!0)},removeData:function(Be){return this.each(function(){gI.remove(this,Be)})}}),ye.extend({queue:function(Be,Le,Me){var Ge;if(Be)return Le=(Le||"fx")+"queue",Ge=cA.get(Be,Le),Me&&(!Ge||Array.isArray(Me)?Ge=cA.access(Be,Le,ye.makeArray(Me)):Ge.push(Me)),Ge||[]},dequeue:function(Be,Le){Le=Le||"fx";var Me=ye.queue(Be,Le),Ge=Me.length,Et=Me.shift(),wt=ye._queueHooks(Be,Le),Lt=function(){ye.dequeue(Be,Le)};Et==="inprogress"&&(Et=Me.shift(),Ge--),Et&&(Le==="fx"&&Me.unshift("inprogress"),delete wt.stop,Et.call(Be,Lt,wt)),!Ge&&wt&&wt.empty.fire()},_queueHooks:function(Be,Le){var Me=Le+"queueHooks";return cA.get(Be,Me)||cA.access(Be,Me,{empty:ye.Callbacks("once memory").add(function(){cA.remove(Be,[Le+"queue",Me])})})}}),ye.fn.extend({queue:function(Be,Le){var Me=2;return typeof Be!="string"&&(Le=Be,Be="fx",Me--),arguments.length<Me?ye.queue(this[0],Be):Le===void 0?this:this.each(function(){var Ge=ye.queue(this,Be,Le);ye._queueHooks(this,Be),Be==="fx"&&Ge[0]!=="inprogress"&&ye.dequeue(this,Be)})},dequeue:function(Be){return this.each(function(){ye.dequeue(this,Be)})},clearQueue:function(Be){return this.queue(Be||"fx",[])},promise:function(Be,Le){var Me,Ge=1,Et=ye.Deferred(),wt=this,Lt=this.length,Un=function(){--Ge||Et.resolveWith(wt,[wt])};for(typeof Be!="string"&&(Le=Be,Be=void 0),Be=Be||"fx";Lt--;)Me=cA.get(wt[Lt],Be+"queueHooks"),Me&&Me.empty&&(Ge++,Me.empty.add(Un));return Un(),Et.promise(Le)}});var pI=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,vI=new RegExp("^(?:([+-])=|)("+pI+")([a-z%]*)$","i"),EI=["Top","Right","Bottom","Left"],zI=pe.documentElement,FI=function(Be){return ye.contains(Be.ownerDocument,Be)},DI={composed:!0};zI.getRootNode&&(FI=function(Be){return ye.contains(Be.ownerDocument,Be)||Be.getRootNode(DI)===Be.ownerDocument});var ZI=function(Be,Le){return Be=Le||Be,Be.style.display==="none"||Be.style.display===""&&FI(Be)&&ye.css(Be,"display")==="none"};function IC(Be,Le,Me,Ge){var Et,wt,Lt=20,Un=Ge?function(){return Ge.cur()}:function(){return ye.css(Be,Le,"")},Yr=Un(),aa=Me&&Me[3]||(ye.cssNumber[Le]?"":"px"),fA=Be.nodeType&&(ye.cssNumber[Le]||aa!=="px"&&+Yr)&&vI.exec(ye.css(Be,Le));if(fA&&fA[3]!==aa){for(Yr=Yr/2,aa=aa||fA[3],fA=+Yr||1;Lt--;)ye.style(Be,Le,fA+aa),(1-wt)*(1-(wt=Un()/Yr||.5))<=0&&(Lt=0),fA=fA/wt;fA=fA*2,ye.style(Be,Le,fA+aa),Me=Me||[]}return Me&&(fA=+fA||+Yr||0,Et=Me[1]?fA+(Me[1]+1)*Me[2]:+Me[2],Ge&&(Ge.unit=aa,Ge.start=fA,Ge.end=Et)),Et}var mC={};function BC(Be){var Le,Me=Be.ownerDocument,Ge=Be.nodeName,Et=mC[Ge];return Et||(Le=Me.body.appendChild(Me.createElement(Ge)),Et=ye.css(Le,"display"),Le.parentNode.removeChild(Le),Et==="none"&&(Et="block"),mC[Ge]=Et,Et)}function yC(Be,Le){for(var Me,Ge,Et=[],wt=0,Lt=Be.length;wt<Lt;wt++)Ge=Be[wt],Ge.style&&(Me=Ge.style.display,Le?(Me==="none"&&(Et[wt]=cA.get(Ge,"display")||null,Et[wt]||(Ge.style.display="")),Ge.style.display===""&&ZI(Ge)&&(Et[wt]=BC(Ge))):Me!=="none"&&(Et[wt]="none",cA.set(Ge,"display",Me)));for(wt=0;wt<Lt;wt++)Et[wt]!=null&&(Be[wt].style.display=Et[wt]);return Be}ye.fn.extend({show:function(){return yC(this,!0)},hide:function(){return yC(this)},toggle:function(Be){return typeof Be=="boolean"?Be?this.show():this.hide():this.each(function(){ZI(this)?ye(this).show():ye(this).hide()})}});var vC=/^(?:checkbox|radio)$/i,_C=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,RC=/^$|^module$|\/(?:java|ecma)script/i;(function(){var Be=pe.createDocumentFragment(),Le=Be.appendChild(pe.createElement("div")),Me=pe.createElement("input");Me.setAttribute("type","radio"),Me.setAttribute("checked","checked"),Me.setAttribute("name","t"),Le.appendChild(Me),se.checkClone=Le.cloneNode(!0).cloneNode(!0).lastChild.checked,Le.innerHTML="<textarea>x</textarea>",se.noCloneChecked=!!Le.cloneNode(!0).lastChild.defaultValue,Le.innerHTML="<option></option>",se.option=!!Le.lastChild})();var Xt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td,se.option||(Xt.optgroup=Xt.option=[1,"<select multiple='multiple'>","</select>"]);function zn(Be,Le){var Me;return typeof Be.getElementsByTagName<"u"?Me=Be.getElementsByTagName(Le||"*"):typeof Be.querySelectorAll<"u"?Me=Be.querySelectorAll(Le||"*"):Me=[],Le===void 0||Le&&It(Be,Le)?ye.merge([Be],Me):Me}function oa(Be,Le){for(var Me=0,Ge=Be.length;Me<Ge;Me++)cA.set(Be[Me],"globalEval",!Le||cA.get(Le[Me],"globalEval"))}var MA=/<|&#?\w+;/;function YA(Be,Le,Me,Ge,Et){for(var wt,Lt,Un,Yr,aa,fA,DA=Le.createDocumentFragment(),sA=[],tI=0,tC=Be.length;tI<tC;tI++)if(wt=Be[tI],wt||wt===0)if(be(wt)==="object")ye.merge(sA,wt.nodeType?[wt]:wt);else if(!MA.test(wt))sA.push(Le.createTextNode(wt));else{for(Lt=Lt||DA.appendChild(Le.createElement("div")),Un=(_C.exec(wt)||["",""])[1].toLowerCase(),Yr=Xt[Un]||Xt._default,Lt.innerHTML=Yr[1]+ye.htmlPrefilter(wt)+Yr[2],fA=Yr[0];fA--;)Lt=Lt.lastChild;ye.merge(sA,Lt.childNodes),Lt=DA.firstChild,Lt.textContent=""}for(DA.textContent="",tI=0;wt=sA[tI++];){if(Ge&&ye.inArray(wt,Ge)>-1){Et&&Et.push(wt);continue}if(aa=FI(wt),Lt=zn(DA.appendChild(wt),"script"),aa&&oa(Lt),Me)for(fA=0;wt=Lt[fA++];)RC.test(wt.type||"")&&Me.push(wt)}return DA}var PA=/^([^.]*)(?:\.(.+)|)/;function iI(){return!0}function XA(){return!1}function $I(Be,Le,Me,Ge,Et,wt){var Lt,Un;if(typeof Le=="object"){typeof Me!="string"&&(Ge=Ge||Me,Me=void 0);for(Un in Le)$I(Be,Un,Me,Ge,Le[Un],wt);return Be}if(Ge==null&&Et==null?(Et=Me,Ge=Me=void 0):Et==null&&(typeof Me=="string"?(Et=Ge,Ge=void 0):(Et=Ge,Ge=Me,Me=void 0)),Et===!1)Et=XA;else if(!Et)return Be;return wt===1&&(Lt=Et,Et=function(Yr){return ye().off(Yr),Lt.apply(this,arguments)},Et.guid=Lt.guid||(Lt.guid=ye.guid++)),Be.each(function(){ye.event.add(this,Le,Et,Ge,Me)})}ye.event={global:{},add:function(Be,Le,Me,Ge,Et){var wt,Lt,Un,Yr,aa,fA,DA,sA,tI,tC,fC,aC=cA.get(Be);if(Rt(Be))for(Me.handler&&(wt=Me,Me=wt.handler,Et=wt.selector),Et&&ye.find.matchesSelector(zI,Et),Me.guid||(Me.guid=ye.guid++),(Yr=aC.events)||(Yr=aC.events=Object.create(null)),(Lt=aC.handle)||(Lt=aC.handle=function(WC){return typeof ye<"u"&&ye.event.triggered!==WC.type?ye.event.dispatch.apply(Be,arguments):void 0}),Le=(Le||"").match(fa)||[""],aa=Le.length;aa--;)Un=PA.exec(Le[aa])||[],tI=fC=Un[1],tC=(Un[2]||"").split(".").sort(),tI&&(DA=ye.event.special[tI]||{},tI=(Et?DA.delegateType:DA.bindType)||tI,DA=ye.event.special[tI]||{},fA=ye.extend({type:tI,origType:fC,data:Ge,handler:Me,guid:Me.guid,selector:Et,needsContext:Et&&ye.expr.match.needsContext.test(Et),namespace:tC.join(".")},wt),(sA=Yr[tI])||(sA=Yr[tI]=[],sA.delegateCount=0,(!DA.setup||DA.setup.call(Be,Ge,tC,Lt)===!1)&&Be.addEventListener&&Be.addEventListener(tI,Lt)),DA.add&&(DA.add.call(Be,fA),fA.handler.guid||(fA.handler.guid=Me.guid)),Et?sA.splice(sA.delegateCount++,0,fA):sA.push(fA),ye.event.global[tI]=!0)},remove:function(Be,Le,Me,Ge,Et){var wt,Lt,Un,Yr,aa,fA,DA,sA,tI,tC,fC,aC=cA.hasData(Be)&&cA.get(Be);if(!(!aC||!(Yr=aC.events))){for(Le=(Le||"").match(fa)||[""],aa=Le.length;aa--;){if(Un=PA.exec(Le[aa])||[],tI=fC=Un[1],tC=(Un[2]||"").split(".").sort(),!tI){for(tI in Yr)ye.event.remove(Be,tI+Le[aa],Me,Ge,!0);continue}for(DA=ye.event.special[tI]||{},tI=(Ge?DA.delegateType:DA.bindType)||tI,sA=Yr[tI]||[],Un=Un[2]&&new RegExp("(^|\\.)"+tC.join("\\.(?:.*\\.|)")+"(\\.|$)"),Lt=wt=sA.length;wt--;)fA=sA[wt],(Et||fC===fA.origType)&&(!Me||Me.guid===fA.guid)&&(!Un||Un.test(fA.namespace))&&(!Ge||Ge===fA.selector||Ge==="**"&&fA.selector)&&(sA.splice(wt,1),fA.selector&&sA.delegateCount--,DA.remove&&DA.remove.call(Be,fA));Lt&&!sA.length&&((!DA.teardown||DA.teardown.call(Be,tC,aC.handle)===!1)&&ye.removeEvent(Be,tI,aC.handle),delete Yr[tI])}ye.isEmptyObject(Yr)&&cA.remove(Be,"handle events")}},dispatch:function(Be){var Le,Me,Ge,Et,wt,Lt,Un=new Array(arguments.length),Yr=ye.event.fix(Be),aa=(cA.get(this,"events")||Object.create(null))[Yr.type]||[],fA=ye.event.special[Yr.type]||{};for(Un[0]=Yr,Le=1;Le<arguments.length;Le++)Un[Le]=arguments[Le];if(Yr.delegateTarget=this,!(fA.preDispatch&&fA.preDispatch.call(this,Yr)===!1)){for(Lt=ye.event.handlers.call(this,Yr,aa),Le=0;(Et=Lt[Le++])&&!Yr.isPropagationStopped();)for(Yr.currentTarget=Et.elem,Me=0;(wt=Et.handlers[Me++])&&!Yr.isImmediatePropagationStopped();)(!Yr.rnamespace||wt.namespace===!1||Yr.rnamespace.test(wt.namespace))&&(Yr.handleObj=wt,Yr.data=wt.data,Ge=((ye.event.special[wt.origType]||{}).handle||wt.handler).apply(Et.elem,Un),Ge!==void 0&&(Yr.result=Ge)===!1&&(Yr.preventDefault(),Yr.stopPropagation()));return fA.postDispatch&&fA.postDispatch.call(this,Yr),Yr.result}},handlers:function(Be,Le){var Me,Ge,Et,wt,Lt,Un=[],Yr=Le.delegateCount,aa=Be.target;if(Yr&&aa.nodeType&&!(Be.type==="click"&&Be.button>=1)){for(;aa!==this;aa=aa.parentNode||this)if(aa.nodeType===1&&!(Be.type==="click"&&aa.disabled===!0)){for(wt=[],Lt={},Me=0;Me<Yr;Me++)Ge=Le[Me],Et=Ge.selector+" ",Lt[Et]===void 0&&(Lt[Et]=Ge.needsContext?ye(Et,this).index(aa)>-1:ye.find(Et,this,null,[aa]).length),Lt[Et]&&wt.push(Ge);wt.length&&Un.push({elem:aa,handlers:wt})}}return aa=this,Yr<Le.length&&Un.push({elem:aa,handlers:Le.slice(Yr)}),Un},addProp:function(Be,Le){Object.defineProperty(ye.Event.prototype,Be,{enumerable:!0,configurable:!0,get:ae(Le)?function(){if(this.originalEvent)return Le(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[Be]},set:function(Me){Object.defineProperty(this,Be,{enumerable:!0,configurable:!0,writable:!0,value:Me})}})},fix:function(Be){return Be[ye.expando]?Be:new ye.Event(Be)},special:{load:{noBubble:!0},click:{setup:function(Be){var Le=this||Be;return vC.test(Le.type)&&Le.click&&It(Le,"input")&&GI(Le,"click",!0),!1},trigger:function(Be){var Le=this||Be;return vC.test(Le.type)&&Le.click&&It(Le,"input")&&GI(Le,"click"),!0},_default:function(Be){var Le=Be.target;return vC.test(Le.type)&&Le.click&&It(Le,"input")&&cA.get(Le,"click")||It(Le,"a")}},beforeunload:{postDispatch:function(Be){Be.result!==void 0&&Be.originalEvent&&(Be.originalEvent.returnValue=Be.result)}}}};function GI(Be,Le,Me){if(!Me){cA.get(Be,Le)===void 0&&ye.event.add(Be,Le,iI);return}cA.set(Be,Le,!1),ye.event.add(Be,Le,{namespace:!1,handler:function(Ge){var Et,wt=cA.get(this,Le);if(Ge.isTrigger&1&&this[Le]){if(wt)(ye.event.special[Le]||{}).delegateType&&Ge.stopPropagation();else if(wt=T.call(arguments),cA.set(this,Le,wt),this[Le](),Et=cA.get(this,Le),cA.set(this,Le,!1),wt!==Et)return Ge.stopImmediatePropagation(),Ge.preventDefault(),Et}else wt&&(cA.set(this,Le,ye.event.trigger(wt[0],wt.slice(1),this)),Ge.stopPropagation(),Ge.isImmediatePropagationStopped=iI)}})}ye.removeEvent=function(Be,Le,Me){Be.removeEventListener&&Be.removeEventListener(Le,Me)},ye.Event=function(Be,Le){if(!(this instanceof ye.Event))return new ye.Event(Be,Le);Be&&Be.type?(this.originalEvent=Be,this.type=Be.type,this.isDefaultPrevented=Be.defaultPrevented||Be.defaultPrevented===void 0&&Be.returnValue===!1?iI:XA,this.target=Be.target&&Be.target.nodeType===3?Be.target.parentNode:Be.target,this.currentTarget=Be.currentTarget,this.relatedTarget=Be.relatedTarget):this.type=Be,Le&&ye.extend(this,Le),this.timeStamp=Be&&Be.timeStamp||Date.now(),this[ye.expando]=!0},ye.Event.prototype={constructor:ye.Event,isDefaultPrevented:XA,isPropagationStopped:XA,isImmediatePropagationStopped:XA,isSimulated:!1,preventDefault:function(){var Be=this.originalEvent;this.isDefaultPrevented=iI,Be&&!this.isSimulated&&Be.preventDefault()},stopPropagation:function(){var Be=this.originalEvent;this.isPropagationStopped=iI,Be&&!this.isSimulated&&Be.stopPropagation()},stopImmediatePropagation:function(){var Be=this.originalEvent;this.isImmediatePropagationStopped=iI,Be&&!this.isSimulated&&Be.stopImmediatePropagation(),this.stopPropagation()}},ye.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ye.event.addProp),ye.each({focus:"focusin",blur:"focusout"},function(Be,Le){function Me(Ge){if(pe.documentMode){var Et=cA.get(this,"handle"),wt=ye.event.fix(Ge);wt.type=Ge.type==="focusin"?"focus":"blur",wt.isSimulated=!0,Et(Ge),wt.target===wt.currentTarget&&Et(wt)}else ye.event.simulate(Le,Ge.target,ye.event.fix(Ge))}ye.event.special[Be]={setup:function(){var Ge;if(GI(this,Be,!0),pe.documentMode)Ge=cA.get(this,Le),Ge||this.addEventListener(Le,Me),cA.set(this,Le,(Ge||0)+1);else return!1},trigger:function(){return GI(this,Be),!0},teardown:function(){var Ge;if(pe.documentMode)Ge=cA.get(this,Le)-1,Ge?cA.set(this,Le,Ge):(this.removeEventListener(Le,Me),cA.remove(this,Le));else return!1},_default:function(Ge){return cA.get(Ge.target,Be)},delegateType:Le},ye.event.special[Le]={setup:function(){var Ge=this.ownerDocument||this.document||this,Et=pe.documentMode?this:Ge,wt=cA.get(Et,Le);wt||(pe.documentMode?this.addEventListener(Le,Me):Ge.addEventListener(Be,Me,!0)),cA.set(Et,Le,(wt||0)+1)},teardown:function(){var Ge=this.ownerDocument||this.document||this,Et=pe.documentMode?this:Ge,wt=cA.get(Et,Le)-1;wt?cA.set(Et,Le,wt):(pe.documentMode?this.removeEventListener(Le,Me):Ge.removeEventListener(Be,Me,!0),cA.remove(Et,Le))}}}),ye.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(Be,Le){ye.event.special[Be]={delegateType:Le,bindType:Le,handle:function(Me){var Ge,Et=this,wt=Me.relatedTarget,Lt=Me.handleObj;return(!wt||wt!==Et&&!ye.contains(Et,wt))&&(Me.type=Lt.origType,Ge=Lt.handler.apply(this,arguments),Me.type=Le),Ge}}}),ye.fn.extend({on:function(Be,Le,Me,Ge){return $I(this,Be,Le,Me,Ge)},one:function(Be,Le,Me,Ge){return $I(this,Be,Le,Me,Ge,1)},off:function(Be,Le,Me){var Ge,Et;if(Be&&Be.preventDefault&&Be.handleObj)return Ge=Be.handleObj,ye(Be.delegateTarget).off(Ge.namespace?Ge.origType+"."+Ge.namespace:Ge.origType,Ge.selector,Ge.handler),this;if(typeof Be=="object"){for(Et in Be)this.off(Et,Le,Be[Et]);return this}return(Le===!1||typeof Le=="function")&&(Me=Le,Le=void 0),Me===!1&&(Me=XA),this.each(function(){ye.event.remove(this,Be,Me,Le)})}});var sC=/<script|<style|<link/i,eC=/checked\s*(?:[^=]|=\s*.checked.)/i,KI=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Yt(Be,Le){return It(Be,"table")&&It(Le.nodeType!==11?Le:Le.firstChild,"tr")&&ye(Be).children("tbody")[0]||Be}function Dn(Be){return Be.type=(Be.getAttribute("type")!==null)+"/"+Be.type,Be}function Kn(Be){return(Be.type||"").slice(0,5)==="true/"?Be.type=Be.type.slice(5):Be.removeAttribute("type"),Be}function Ut(Be,Le){var Me,Ge,Et,wt,Lt,Un,Yr;if(Le.nodeType===1){if(cA.hasData(Be)&&(wt=cA.get(Be),Yr=wt.events,Yr)){cA.remove(Le,"handle events");for(Et in Yr)for(Me=0,Ge=Yr[Et].length;Me<Ge;Me++)ye.event.add(Le,Et,Yr[Et][Me])}gI.hasData(Be)&&(Lt=gI.access(Be),Un=ye.extend({},Lt),gI.set(Le,Un))}}function Wt(Be,Le){var Me=Le.nodeName.toLowerCase();Me==="input"&&vC.test(Be.type)?Le.checked=Be.checked:(Me==="input"||Me==="textarea")&&(Le.defaultValue=Be.defaultValue)}function ua(Be,Le,Me,Ge){Le=F(Le);var Et,wt,Lt,Un,Yr,aa,fA=0,DA=Be.length,sA=DA-1,tI=Le[0],tC=ae(tI);if(tC||DA>1&&typeof tI=="string"&&!se.checkClone&&eC.test(tI))return Be.each(function(fC){var aC=Be.eq(fC);tC&&(Le[0]=tI.call(this,fC,aC.html())),ua(aC,Le,Me,Ge)});if(DA&&(Et=YA(Le,Be[0].ownerDocument,!1,Be,Ge),wt=Et.firstChild,Et.childNodes.length===1&&(Et=wt),wt||Ge)){for(Lt=ye.map(zn(Et,"script"),Dn),Un=Lt.length;fA<DA;fA++)Yr=Et,fA!==sA&&(Yr=ye.clone(Yr,!0,!0),Un&&ye.merge(Lt,zn(Yr,"script"))),Me.call(Be[fA],Yr,fA);if(Un)for(aa=Lt[Lt.length-1].ownerDocument,ye.map(Lt,Kn),fA=0;fA<Un;fA++)Yr=Lt[fA],RC.test(Yr.type||"")&&!cA.access(Yr,"globalEval")&&ye.contains(aa,Yr)&&(Yr.src&&(Yr.type||"").toLowerCase()!=="module"?ye._evalUrl&&!Yr.noModule&&ye._evalUrl(Yr.src,{nonce:Yr.nonce||Yr.getAttribute("nonce")},aa):ve(Yr.textContent.replace(KI,""),Yr,aa))}return Be}function uA(Be,Le,Me){for(var Ge,Et=Le?ye.filter(Le,Be):Be,wt=0;(Ge=Et[wt])!=null;wt++)!Me&&Ge.nodeType===1&&ye.cleanData(zn(Ge)),Ge.parentNode&&(Me&&FI(Ge)&&oa(zn(Ge,"script")),Ge.parentNode.removeChild(Ge));return Be}ye.extend({htmlPrefilter:function(Be){return Be},clone:function(Be,Le,Me){var Ge,Et,wt,Lt,Un=Be.cloneNode(!0),Yr=FI(Be);if(!se.noCloneChecked&&(Be.nodeType===1||Be.nodeType===11)&&!ye.isXMLDoc(Be))for(Lt=zn(Un),wt=zn(Be),Ge=0,Et=wt.length;Ge<Et;Ge++)Wt(wt[Ge],Lt[Ge]);if(Le)if(Me)for(wt=wt||zn(Be),Lt=Lt||zn(Un),Ge=0,Et=wt.length;Ge<Et;Ge++)Ut(wt[Ge],Lt[Ge]);else Ut(Be,Un);return Lt=zn(Un,"script"),Lt.length>0&&oa(Lt,!Yr&&zn(Be,"script")),Un},cleanData:function(Be){for(var Le,Me,Ge,Et=ye.event.special,wt=0;(Me=Be[wt])!==void 0;wt++)if(Rt(Me)){if(Le=Me[cA.expando]){if(Le.events)for(Ge in Le.events)Et[Ge]?ye.event.remove(Me,Ge):ye.removeEvent(Me,Ge,Le.handle);Me[cA.expando]=void 0}Me[gI.expando]&&(Me[gI.expando]=void 0)}}}),ye.fn.extend({detach:function(Be){return uA(this,Be,!0)},remove:function(Be){return uA(this,Be)},text:function(Be){return lA(this,function(Le){return Le===void 0?ye.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=Le)})},null,Be,arguments.length)},append:function(){return ua(this,arguments,function(Be){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var Le=Yt(this,Be);Le.appendChild(Be)}})},prepend:function(){return ua(this,arguments,function(Be){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var Le=Yt(this,Be);Le.insertBefore(Be,Le.firstChild)}})},before:function(){return ua(this,arguments,function(Be){this.parentNode&&this.parentNode.insertBefore(Be,this)})},after:function(){return ua(this,arguments,function(Be){this.parentNode&&this.parentNode.insertBefore(Be,this.nextSibling)})},empty:function(){for(var Be,Le=0;(Be=this[Le])!=null;Le++)Be.nodeType===1&&(ye.cleanData(zn(Be,!1)),Be.textContent="");return this},clone:function(Be,Le){return Be=Be??!1,Le=Le??Be,this.map(function(){return ye.clone(this,Be,Le)})},html:function(Be){return lA(this,function(Le){var Me=this[0]||{},Ge=0,Et=this.length;if(Le===void 0&&Me.nodeType===1)return Me.innerHTML;if(typeof Le=="string"&&!sC.test(Le)&&!Xt[(_C.exec(Le)||["",""])[1].toLowerCase()]){Le=ye.htmlPrefilter(Le);try{for(;Ge<Et;Ge++)Me=this[Ge]||{},Me.nodeType===1&&(ye.cleanData(zn(Me,!1)),Me.innerHTML=Le);Me=0}catch{}}Me&&this.empty().append(Le)},null,Be,arguments.length)},replaceWith:function(){var Be=[];return ua(this,arguments,function(Le){var Me=this.parentNode;ye.inArray(this,Be)<0&&(ye.cleanData(zn(this)),Me&&Me.replaceChild(Le,this))},Be)}}),ye.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(Be,Le){ye.fn[Be]=function(Me){for(var Ge,Et=[],wt=ye(Me),Lt=wt.length-1,Un=0;Un<=Lt;Un++)Ge=Un===Lt?this:this.clone(!0),ye(wt[Un])[Le](Ge),M.apply(Et,Ge.get());return this.pushStack(Et)}});var EA=new RegExp("^("+pI+")(?!px)[a-z%]+$","i"),bA=/^--/,lI=function(Be){var Le=Be.ownerDocument.defaultView;return(!Le||!Le.opener)&&(Le=s),Le.getComputedStyle(Be)},YI=function(Be,Le,Me){var Ge,Et,wt={};for(Et in Le)wt[Et]=Be.style[Et],Be.style[Et]=Le[Et];Ge=Me.call(Be);for(Et in Le)Be.style[Et]=wt[Et];return Ge},uC=new RegExp(EI.join("|"),"i");(function(){function Be(){if(aa){Yr.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",aa.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",zI.appendChild(Yr).appendChild(aa);var fA=s.getComputedStyle(aa);Me=fA.top!=="1%",Un=Le(fA.marginLeft)===12,aa.style.right="60%",wt=Le(fA.right)===36,Ge=Le(fA.width)===36,aa.style.position="absolute",Et=Le(aa.offsetWidth/3)===12,zI.removeChild(Yr),aa=null}}function Le(fA){return Math.round(parseFloat(fA))}var Me,Ge,Et,wt,Lt,Un,Yr=pe.createElement("div"),aa=pe.createElement("div");aa.style&&(aa.style.backgroundClip="content-box",aa.cloneNode(!0).style.backgroundClip="",se.clearCloneStyle=aa.style.backgroundClip==="content-box",ye.extend(se,{boxSizingReliable:function(){return Be(),Ge},pixelBoxStyles:function(){return Be(),wt},pixelPosition:function(){return Be(),Me},reliableMarginLeft:function(){return Be(),Un},scrollboxSize:function(){return Be(),Et},reliableTrDimensions:function(){var fA,DA,sA,tI;return Lt==null&&(fA=pe.createElement("table"),DA=pe.createElement("tr"),sA=pe.createElement("div"),fA.style.cssText="position:absolute;left:-11111px;border-collapse:separate",DA.style.cssText="box-sizing:content-box;border:1px solid",DA.style.height="1px",sA.style.height="9px",sA.style.display="block",zI.appendChild(fA).appendChild(DA).appendChild(sA),tI=s.getComputedStyle(DA),Lt=parseInt(tI.height,10)+parseInt(tI.borderTopWidth,10)+parseInt(tI.borderBottomWidth,10)===DA.offsetHeight,zI.removeChild(fA)),Lt}}))})();function VC(Be,Le,Me){var Ge,Et,wt,Lt,Un=bA.test(Le),Yr=Be.style;return Me=Me||lI(Be),Me&&(Lt=Me.getPropertyValue(Le)||Me[Le],Un&&Lt&&(Lt=Lt.replace(Nt,"$1")||void 0),Lt===""&&!FI(Be)&&(Lt=ye.style(Be,Le)),!se.pixelBoxStyles()&&EA.test(Lt)&&uC.test(Le)&&(Ge=Yr.width,Et=Yr.minWidth,wt=Yr.maxWidth,Yr.minWidth=Yr.maxWidth=Yr.width=Lt,Lt=Me.width,Yr.width=Ge,Yr.minWidth=Et,Yr.maxWidth=wt)),Lt!==void 0?Lt+"":Lt}function jC(Be,Le){return{get:function(){if(Be()){delete this.get;return}return(this.get=Le).apply(this,arguments)}}}var VI=["Webkit","Moz","ms"],hE=pe.createElement("div").style,OC={};function JC(Be){for(var Le=Be[0].toUpperCase()+Be.slice(1),Me=VI.length;Me--;)if(Be=VI[Me]+Le,Be in hE)return Be}function fE(Be){var Le=ye.cssProps[Be]||OC[Be];return Le||(Be in hE?Be:OC[Be]=JC(Be)||Be)}var dE=/^(none|table(?!-c[ea]).+)/,EE={position:"absolute",visibility:"hidden",display:"block"},hm={letterSpacing:"0",fontWeight:"400"};function fm(Be,Le,Me){var Ge=vI.exec(Le);return Ge?Math.max(0,Ge[2]-(Me||0))+(Ge[3]||"px"):Le}function kE(Be,Le,Me,Ge,Et,wt){var Lt=Le==="width"?1:0,Un=0,Yr=0,aa=0;if(Me===(Ge?"border":"content"))return 0;for(;Lt<4;Lt+=2)Me==="margin"&&(aa+=ye.css(Be,Me+EI[Lt],!0,Et)),Ge?(Me==="content"&&(Yr-=ye.css(Be,"padding"+EI[Lt],!0,Et)),Me!=="margin"&&(Yr-=ye.css(Be,"border"+EI[Lt]+"Width",!0,Et))):(Yr+=ye.css(Be,"padding"+EI[Lt],!0,Et),Me!=="padding"?Yr+=ye.css(Be,"border"+EI[Lt]+"Width",!0,Et):Un+=ye.css(Be,"border"+EI[Lt]+"Width",!0,Et));return!Ge&&wt>=0&&(Yr+=Math.max(0,Math.ceil(Be["offset"+Le[0].toUpperCase()+Le.slice(1)]-wt-Yr-Un-.5))||0),Yr+aa}function sE(Be,Le,Me){var Ge=lI(Be),Et=!se.boxSizingReliable()||Me,wt=Et&&ye.css(Be,"boxSizing",!1,Ge)==="border-box",Lt=wt,Un=VC(Be,Le,Ge),Yr="offset"+Le[0].toUpperCase()+Le.slice(1);if(EA.test(Un)){if(!Me)return Un;Un="auto"}return(!se.boxSizingReliable()&&wt||!se.reliableTrDimensions()&&It(Be,"tr")||Un==="auto"||!parseFloat(Un)&&ye.css(Be,"display",!1,Ge)==="inline")&&Be.getClientRects().length&&(wt=ye.css(Be,"boxSizing",!1,Ge)==="border-box",Lt=Yr in Be,Lt&&(Un=Be[Yr])),Un=parseFloat(Un)||0,Un+kE(Be,Le,Me||(wt?"border":"content"),Lt,Ge,Un)+"px"}ye.extend({cssHooks:{opacity:{get:function(Be,Le){if(Le){var Me=VC(Be,"opacity");return Me===""?"1":Me}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(Be,Le,Me,Ge){if(!(!Be||Be.nodeType===3||Be.nodeType===8||!Be.style)){var Et,wt,Lt,Un=NI(Le),Yr=bA.test(Le),aa=Be.style;if(Yr||(Le=fE(Un)),Lt=ye.cssHooks[Le]||ye.cssHooks[Un],Me!==void 0){if(wt=typeof Me,wt==="string"&&(Et=vI.exec(Me))&&Et[1]&&(Me=IC(Be,Le,Et),wt="number"),Me==null||Me!==Me)return;wt==="number"&&!Yr&&(Me+=Et&&Et[3]||(ye.cssNumber[Un]?"":"px")),!se.clearCloneStyle&&Me===""&&Le.indexOf("background")===0&&(aa[Le]="inherit"),(!Lt||!("set"in Lt)||(Me=Lt.set(Be,Me,Ge))!==void 0)&&(Yr?aa.setProperty(Le,Me):aa[Le]=Me)}else return Lt&&"get"in Lt&&(Et=Lt.get(Be,!1,Ge))!==void 0?Et:aa[Le]}},css:function(Be,Le,Me,Ge){var Et,wt,Lt,Un=NI(Le),Yr=bA.test(Le);return Yr||(Le=fE(Un)),Lt=ye.cssHooks[Le]||ye.cssHooks[Un],Lt&&"get"in Lt&&(Et=Lt.get(Be,!0,Me)),Et===void 0&&(Et=VC(Be,Le,Ge)),Et==="normal"&&Le in hm&&(Et=hm[Le]),Me===""||Me?(wt=parseFloat(Et),Me===!0||isFinite(wt)?wt||0:Et):Et}}),ye.each(["height","width"],function(Be,Le){ye.cssHooks[Le]={get:function(Me,Ge,Et){if(Ge)return dE.test(ye.css(Me,"display"))&&(!Me.getClientRects().length||!Me.getBoundingClientRect().width)?YI(Me,EE,function(){return sE(Me,Le,Et)}):sE(Me,Le,Et)},set:function(Me,Ge,Et){var wt,Lt=lI(Me),Un=!se.scrollboxSize()&&Lt.position==="absolute",Yr=Un||Et,aa=Yr&&ye.css(Me,"boxSizing",!1,Lt)==="border-box",fA=Et?kE(Me,Le,Et,aa,Lt):0;return aa&&Un&&(fA-=Math.ceil(Me["offset"+Le[0].toUpperCase()+Le.slice(1)]-parseFloat(Lt[Le])-kE(Me,Le,"border",!1,Lt)-.5)),fA&&(wt=vI.exec(Ge))&&(wt[3]||"px")!=="px"&&(Me.style[Le]=Ge,Ge=ye.css(Me,Le)),fm(Me,Ge,fA)}}}),ye.cssHooks.marginLeft=jC(se.reliableMarginLeft,function(Be,Le){if(Le)return(parseFloat(VC(Be,"marginLeft"))||Be.getBoundingClientRect().left-YI(Be,{marginLeft:0},function(){return Be.getBoundingClientRect().left}))+"px"}),ye.each({margin:"",padding:"",border:"Width"},function(Be,Le){ye.cssHooks[Be+Le]={expand:function(Me){for(var Ge=0,Et={},wt=typeof Me=="string"?Me.split(" "):[Me];Ge<4;Ge++)Et[Be+EI[Ge]+Le]=wt[Ge]||wt[Ge-2]||wt[0];return Et}},Be!=="margin"&&(ye.cssHooks[Be+Le].set=fm)}),ye.fn.extend({css:function(Be,Le){return lA(this,function(Me,Ge,Et){var wt,Lt,Un={},Yr=0;if(Array.isArray(Ge)){for(wt=lI(Me),Lt=Ge.length;Yr<Lt;Yr++)Un[Ge[Yr]]=ye.css(Me,Ge[Yr],!1,wt);return Un}return Et!==void 0?ye.style(Me,Ge,Et):ye.css(Me,Ge)},Be,Le,arguments.length>1)}});function GC(Be,Le,Me,Ge,Et){return new GC.prototype.init(Be,Le,Me,Ge,Et)}ye.Tween=GC,GC.prototype={constructor:GC,init:function(Be,Le,Me,Ge,Et,wt){this.elem=Be,this.prop=Me,this.easing=Et||ye.easing._default,this.options=Le,this.start=this.now=this.cur(),this.end=Ge,this.unit=wt||(ye.cssNumber[Me]?"":"px")},cur:function(){var Be=GC.propHooks[this.prop];return Be&&Be.get?Be.get(this):GC.propHooks._default.get(this)},run:function(Be){var Le,Me=GC.propHooks[this.prop];return this.options.duration?this.pos=Le=ye.easing[this.easing](Be,this.options.duration*Be,0,1,this.options.duration):this.pos=Le=Be,this.now=(this.end-this.start)*Le+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),Me&&Me.set?Me.set(this):GC.propHooks._default.set(this),this}},GC.prototype.init.prototype=GC.prototype,GC.propHooks={_default:{get:function(Be){var Le;return Be.elem.nodeType!==1||Be.elem[Be.prop]!=null&&Be.elem.style[Be.prop]==null?Be.elem[Be.prop]:(Le=ye.css(Be.elem,Be.prop,""),!Le||Le==="auto"?0:Le)},set:function(Be){ye.fx.step[Be.prop]?ye.fx.step[Be.prop](Be):Be.elem.nodeType===1&&(ye.cssHooks[Be.prop]||Be.elem.style[fE(Be.prop)]!=null)?ye.style(Be.elem,Be.prop,Be.now+Be.unit):Be.elem[Be.prop]=Be.now}}},GC.propHooks.scrollTop=GC.propHooks.scrollLeft={set:function(Be){Be.elem.nodeType&&Be.elem.parentNode&&(Be.elem[Be.prop]=Be.now)}},ye.easing={linear:function(Be){return Be},swing:function(Be){return .5-Math.cos(Be*Math.PI)/2},_default:"swing"},ye.fx=GC.prototype.init,ye.fx.step={};var QE,PE,OE=/^(?:toggle|show|hide)$/,em=/queueHooks$/;function GE(){PE&&(pe.hidden===!1&&s.requestAnimationFrame?s.requestAnimationFrame(GE):s.setTimeout(GE,ye.fx.interval),ye.fx.tick())}function mE(){return s.setTimeout(function(){QE=void 0}),QE=Date.now()}function _E(Be,Le){var Me,Ge=0,Et={height:Be};for(Le=Le?1:0;Ge<4;Ge+=2-Le)Me=EI[Ge],Et["margin"+Me]=Et["padding"+Me]=Be;return Le&&(Et.opacity=Et.width=Be),Et}function VE(Be,Le,Me){for(var Ge,Et=(AE.tweeners[Le]||[]).concat(AE.tweeners["*"]),wt=0,Lt=Et.length;wt<Lt;wt++)if(Ge=Et[wt].call(Me,Le,Be))return Ge}function tm(Be,Le,Me){var Ge,Et,wt,Lt,Un,Yr,aa,fA,DA="width"in Le||"height"in Le,sA=this,tI={},tC=Be.style,fC=Be.nodeType&&ZI(Be),aC=cA.get(Be,"fxshow");Me.queue||(Lt=ye._queueHooks(Be,"fx"),Lt.unqueued==null&&(Lt.unqueued=0,Un=Lt.empty.fire,Lt.empty.fire=function(){Lt.unqueued||Un()}),Lt.unqueued++,sA.always(function(){sA.always(function(){Lt.unqueued--,ye.queue(Be,"fx").length||Lt.empty.fire()})}));for(Ge in Le)if(Et=Le[Ge],OE.test(Et)){if(delete Le[Ge],wt=wt||Et==="toggle",Et===(fC?"hide":"show"))if(Et==="show"&&aC&&aC[Ge]!==void 0)fC=!0;else continue;tI[Ge]=aC&&aC[Ge]||ye.style(Be,Ge)}if(Yr=!ye.isEmptyObject(Le),!(!Yr&&ye.isEmptyObject(tI))){DA&&Be.nodeType===1&&(Me.overflow=[tC.overflow,tC.overflowX,tC.overflowY],aa=aC&&aC.display,aa==null&&(aa=cA.get(Be,"display")),fA=ye.css(Be,"display"),fA==="none"&&(aa?fA=aa:(yC([Be],!0),aa=Be.style.display||aa,fA=ye.css(Be,"display"),yC([Be]))),(fA==="inline"||fA==="inline-block"&&aa!=null)&&ye.css(Be,"float")==="none"&&(Yr||(sA.done(function(){tC.display=aa}),aa==null&&(fA=tC.display,aa=fA==="none"?"":fA)),tC.display="inline-block")),Me.overflow&&(tC.overflow="hidden",sA.always(function(){tC.overflow=Me.overflow[0],tC.overflowX=Me.overflow[1],tC.overflowY=Me.overflow[2]})),Yr=!1;for(Ge in tI)Yr||(aC?"hidden"in aC&&(fC=aC.hidden):aC=cA.access(Be,"fxshow",{display:aa}),wt&&(aC.hidden=!fC),fC&&yC([Be],!0),sA.done(function(){fC||yC([Be]),cA.remove(Be,"fxshow");for(Ge in tI)ye.style(Be,Ge,tI[Ge])})),Yr=VE(fC?aC[Ge]:0,Ge,sA),Ge in aC||(aC[Ge]=Yr.start,fC&&(Yr.end=Yr.start,Yr.start=0))}}function rm(Be,Le){var Me,Ge,Et,wt,Lt;for(Me in Be)if(Ge=NI(Me),Et=Le[Ge],wt=Be[Me],Array.isArray(wt)&&(Et=wt[1],wt=Be[Me]=wt[0]),Me!==Ge&&(Be[Ge]=wt,delete Be[Me]),Lt=ye.cssHooks[Ge],Lt&&"expand"in Lt){wt=Lt.expand(wt),delete Be[Ge];for(Me in wt)Me in Be||(Be[Me]=wt[Me],Le[Me]=Et)}else Le[Ge]=Et}function AE(Be,Le,Me){var Ge,Et,wt=0,Lt=AE.prefilters.length,Un=ye.Deferred().always(function(){delete Yr.elem}),Yr=function(){if(Et)return!1;for(var DA=QE||mE(),sA=Math.max(0,aa.startTime+aa.duration-DA),tI=sA/aa.duration||0,tC=1-tI,fC=0,aC=aa.tweens.length;fC<aC;fC++)aa.tweens[fC].run(tC);return Un.notifyWith(Be,[aa,tC,sA]),tC<1&&aC?sA:(aC||Un.notifyWith(Be,[aa,1,0]),Un.resolveWith(Be,[aa]),!1)},aa=Un.promise({elem:Be,props:ye.extend({},Le),opts:ye.extend(!0,{specialEasing:{},easing:ye.easing._default},Me),originalProperties:Le,originalOptions:Me,startTime:QE||mE(),duration:Me.duration,tweens:[],createTween:function(DA,sA){var tI=ye.Tween(Be,aa.opts,DA,sA,aa.opts.specialEasing[DA]||aa.opts.easing);return aa.tweens.push(tI),tI},stop:function(DA){var sA=0,tI=DA?aa.tweens.length:0;if(Et)return this;for(Et=!0;sA<tI;sA++)aa.tweens[sA].run(1);return DA?(Un.notifyWith(Be,[aa,1,0]),Un.resolveWith(Be,[aa,DA])):Un.rejectWith(Be,[aa,DA]),this}}),fA=aa.props;for(rm(fA,aa.opts.specialEasing);wt<Lt;wt++)if(Ge=AE.prefilters[wt].call(aa,Be,fA,aa.opts),Ge)return ae(Ge.stop)&&(ye._queueHooks(aa.elem,aa.opts.queue).stop=Ge.stop.bind(Ge)),Ge;return ye.map(fA,VE,aa),ae(aa.opts.start)&&aa.opts.start.call(Be,aa),aa.progress(aa.opts.progress).done(aa.opts.done,aa.opts.complete).fail(aa.opts.fail).always(aa.opts.always),ye.fx.timer(ye.extend(Yr,{elem:Be,anim:aa,queue:aa.opts.queue})),aa}ye.Animation=ye.extend(AE,{tweeners:{"*":[function(Be,Le){var Me=this.createTween(Be,Le);return IC(Me.elem,Be,vI.exec(Le),Me),Me}]},tweener:function(Be,Le){ae(Be)?(Le=Be,Be=["*"]):Be=Be.match(fa);for(var Me,Ge=0,Et=Be.length;Ge<Et;Ge++)Me=Be[Ge],AE.tweeners[Me]=AE.tweeners[Me]||[],AE.tweeners[Me].unshift(Le)},prefilters:[tm],prefilter:function(Be,Le){Le?AE.prefilters.unshift(Be):AE.prefilters.push(Be)}}),ye.speed=function(Be,Le,Me){var Ge=Be&&typeof Be=="object"?ye.extend({},Be):{complete:Me||!Me&&Le||ae(Be)&&Be,duration:Be,easing:Me&&Le||Le&&!ae(Le)&&Le};return ye.fx.off?Ge.duration=0:typeof Ge.duration!="number"&&(Ge.duration in ye.fx.speeds?Ge.duration=ye.fx.speeds[Ge.duration]:Ge.duration=ye.fx.speeds._default),(Ge.queue==null||Ge.queue===!0)&&(Ge.queue="fx"),Ge.old=Ge.complete,Ge.complete=function(){ae(Ge.old)&&Ge.old.call(this),Ge.queue&&ye.dequeue(this,Ge.queue)},Ge},ye.fn.extend({fadeTo:function(Be,Le,Me,Ge){return this.filter(ZI).css("opacity",0).show().end().animate({opacity:Le},Be,Me,Ge)},animate:function(Be,Le,Me,Ge){var Et=ye.isEmptyObject(Be),wt=ye.speed(Le,Me,Ge),Lt=function(){var Un=AE(this,ye.extend({},Be),wt);(Et||cA.get(this,"finish"))&&Un.stop(!0)};return Lt.finish=Lt,Et||wt.queue===!1?this.each(Lt):this.queue(wt.queue,Lt)},stop:function(Be,Le,Me){var Ge=function(Et){var wt=Et.stop;delete Et.stop,wt(Me)};return typeof Be!="string"&&(Me=Le,Le=Be,Be=void 0),Le&&this.queue(Be||"fx",[]),this.each(function(){var Et=!0,wt=Be!=null&&Be+"queueHooks",Lt=ye.timers,Un=cA.get(this);if(wt)Un[wt]&&Un[wt].stop&&Ge(Un[wt]);else for(wt in Un)Un[wt]&&Un[wt].stop&&em.test(wt)&&Ge(Un[wt]);for(wt=Lt.length;wt--;)Lt[wt].elem===this&&(Be==null||Lt[wt].queue===Be)&&(Lt[wt].anim.stop(Me),Et=!1,Lt.splice(wt,1));(Et||!Me)&&ye.dequeue(this,Be)})},finish:function(Be){return Be!==!1&&(Be=Be||"fx"),this.each(function(){var Le,Me=cA.get(this),Ge=Me[Be+"queue"],Et=Me[Be+"queueHooks"],wt=ye.timers,Lt=Ge?Ge.length:0;for(Me.finish=!0,ye.queue(this,Be,[]),Et&&Et.stop&&Et.stop.call(this,!0),Le=wt.length;Le--;)wt[Le].elem===this&&wt[Le].queue===Be&&(wt[Le].anim.stop(!0),wt.splice(Le,1));for(Le=0;Le<Lt;Le++)Ge[Le]&&Ge[Le].finish&&Ge[Le].finish.call(this);delete Me.finish})}}),ye.each(["toggle","show","hide"],function(Be,Le){var Me=ye.fn[Le];ye.fn[Le]=function(Ge,Et,wt){return Ge==null||typeof Ge=="boolean"?Me.apply(this,arguments):this.animate(_E(Le,!0),Ge,Et,wt)}}),ye.each({slideDown:_E("show"),slideUp:_E("hide"),slideToggle:_E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(Be,Le){ye.fn[Be]=function(Me,Ge,Et){return this.animate(Le,Me,Ge,Et)}}),ye.timers=[],ye.fx.tick=function(){var Be,Le=0,Me=ye.timers;for(QE=Date.now();Le<Me.length;Le++)Be=Me[Le],!Be()&&Me[Le]===Be&&Me.splice(Le--,1);Me.length||ye.fx.stop(),QE=void 0},ye.fx.timer=function(Be){ye.timers.push(Be),ye.fx.start()},ye.fx.interval=13,ye.fx.start=function(){PE||(PE=!0,GE())},ye.fx.stop=function(){PE=null},ye.fx.speeds={slow:600,fast:200,_default:400},ye.fn.delay=function(Be,Le){return Be=ye.fx&&ye.fx.speeds[Be]||Be,Le=Le||"fx",this.queue(Le,function(Me,Ge){var Et=s.setTimeout(Me,Be);Ge.stop=function(){s.clearTimeout(Et)}})},function(){var Be=pe.createElement("input"),Le=pe.createElement("select"),Me=Le.appendChild(pe.createElement("option"));Be.type="checkbox",se.checkOn=Be.value!=="",se.optSelected=Me.selected,Be=pe.createElement("input"),Be.value="t",Be.type="radio",se.radioValue=Be.value==="t"}();var Nm,Mt=ye.expr.attrHandle;ye.fn.extend({attr:function(Be,Le){return lA(this,ye.attr,Be,Le,arguments.length>1)},removeAttr:function(Be){return this.each(function(){ye.removeAttr(this,Be)})}}),ye.extend({attr:function(Be,Le,Me){var Ge,Et,wt=Be.nodeType;if(!(wt===3||wt===8||wt===2)){if(typeof Be.getAttribute>"u")return ye.prop(Be,Le,Me);if((wt!==1||!ye.isXMLDoc(Be))&&(Et=ye.attrHooks[Le.toLowerCase()]||(ye.expr.match.bool.test(Le)?Nm:void 0)),Me!==void 0){if(Me===null){ye.removeAttr(Be,Le);return}return Et&&"set"in Et&&(Ge=Et.set(Be,Me,Le))!==void 0?Ge:(Be.setAttribute(Le,Me+""),Me)}return Et&&"get"in Et&&(Ge=Et.get(Be,Le))!==null?Ge:(Ge=ye.find.attr(Be,Le),Ge??void 0)}},attrHooks:{type:{set:function(Be,Le){if(!se.radioValue&&Le==="radio"&&It(Be,"input")){var Me=Be.value;return Be.setAttribute("type",Le),Me&&(Be.value=Me),Le}}}},removeAttr:function(Be,Le){var Me,Ge=0,Et=Le&&Le.match(fa);if(Et&&Be.nodeType===1)for(;Me=Et[Ge++];)Be.removeAttribute(Me)}}),Nm={set:function(Be,Le,Me){return Le===!1?ye.removeAttr(Be,Me):Be.setAttribute(Me,Me),Me}},ye.each(ye.expr.match.bool.source.match(/\w+/g),function(Be,Le){var Me=Mt[Le]||ye.find.attr;Mt[Le]=function(Ge,Et,wt){var Lt,Un,Yr=Et.toLowerCase();return wt||(Un=Mt[Yr],Mt[Yr]=Lt,Lt=Me(Ge,Et,wt)!=null?Yr:null,Mt[Yr]=Un),Lt}});var Ot=/^(?:input|select|textarea|button)$/i,Qn=/^(?:a|area)$/i;ye.fn.extend({prop:function(Be,Le){return lA(this,ye.prop,Be,Le,arguments.length>1)},removeProp:function(Be){return this.each(function(){delete this[ye.propFix[Be]||Be]})}}),ye.extend({prop:function(Be,Le,Me){var Ge,Et,wt=Be.nodeType;if(!(wt===3||wt===8||wt===2))return(wt!==1||!ye.isXMLDoc(Be))&&(Le=ye.propFix[Le]||Le,Et=ye.propHooks[Le]),Me!==void 0?Et&&"set"in Et&&(Ge=Et.set(Be,Me,Le))!==void 0?Ge:Be[Le]=Me:Et&&"get"in Et&&(Ge=Et.get(Be,Le))!==null?Ge:Be[Le]},propHooks:{tabIndex:{get:function(Be){var Le=ye.find.attr(Be,"tabindex");return Le?parseInt(Le,10):Ot.test(Be.nodeName)||Qn.test(Be.nodeName)&&Be.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),se.optSelected||(ye.propHooks.selected={get:function(Be){var Le=Be.parentNode;return Le&&Le.parentNode&&Le.parentNode.selectedIndex,null},set:function(Be){var Le=Be.parentNode;Le&&(Le.selectedIndex,Le.parentNode&&Le.parentNode.selectedIndex)}}),ye.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ye.propFix[this.toLowerCase()]=this});function va(Be){var Le=Be.match(fa)||[];return Le.join(" ")}function UA(Be){return Be.getAttribute&&Be.getAttribute("class")||""}function wI(Be){return Array.isArray(Be)?Be:typeof Be=="string"?Be.match(fa)||[]:[]}ye.fn.extend({addClass:function(Be){var Le,Me,Ge,Et,wt,Lt;return ae(Be)?this.each(function(Un){ye(this).addClass(Be.call(this,Un,UA(this)))}):(Le=wI(Be),Le.length?this.each(function(){if(Ge=UA(this),Me=this.nodeType===1&&" "+va(Ge)+" ",Me){for(wt=0;wt<Le.length;wt++)Et=Le[wt],Me.indexOf(" "+Et+" ")<0&&(Me+=Et+" ");Lt=va(Me),Ge!==Lt&&this.setAttribute("class",Lt)}}):this)},removeClass:function(Be){var Le,Me,Ge,Et,wt,Lt;return ae(Be)?this.each(function(Un){ye(this).removeClass(Be.call(this,Un,UA(this)))}):arguments.length?(Le=wI(Be),Le.length?this.each(function(){if(Ge=UA(this),Me=this.nodeType===1&&" "+va(Ge)+" ",Me){for(wt=0;wt<Le.length;wt++)for(Et=Le[wt];Me.indexOf(" "+Et+" ")>-1;)Me=Me.replace(" "+Et+" "," ");Lt=va(Me),Ge!==Lt&&this.setAttribute("class",Lt)}}):this):this.attr("class","")},toggleClass:function(Be,Le){var Me,Ge,Et,wt,Lt=typeof Be,Un=Lt==="string"||Array.isArray(Be);return ae(Be)?this.each(function(Yr){ye(this).toggleClass(Be.call(this,Yr,UA(this),Le),Le)}):typeof Le=="boolean"&&Un?Le?this.addClass(Be):this.removeClass(Be):(Me=wI(Be),this.each(function(){if(Un)for(wt=ye(this),Et=0;Et<Me.length;Et++)Ge=Me[Et],wt.hasClass(Ge)?wt.removeClass(Ge):wt.addClass(Ge);else(Be===void 0||Lt==="boolean")&&(Ge=UA(this),Ge&&cA.set(this,"__className__",Ge),this.setAttribute&&this.setAttribute("class",Ge||Be===!1?"":cA.get(this,"__className__")||""))}))},hasClass:function(Be){var Le,Me,Ge=0;for(Le=" "+Be+" ";Me=this[Ge++];)if(Me.nodeType===1&&(" "+va(UA(Me))+" ").indexOf(Le)>-1)return!0;return!1}});var AC=/\r/g;ye.fn.extend({val:function(Be){var Le,Me,Ge,Et=this[0];return arguments.length?(Ge=ae(Be),this.each(function(wt){var Lt;this.nodeType===1&&(Ge?Lt=Be.call(this,wt,ye(this).val()):Lt=Be,Lt==null?Lt="":typeof Lt=="number"?Lt+="":Array.isArray(Lt)&&(Lt=ye.map(Lt,function(Un){return Un==null?"":Un+""})),Le=ye.valHooks[this.type]||ye.valHooks[this.nodeName.toLowerCase()],(!Le||!("set"in Le)||Le.set(this,Lt,"value")===void 0)&&(this.value=Lt))})):Et?(Le=ye.valHooks[Et.type]||ye.valHooks[Et.nodeName.toLowerCase()],Le&&"get"in Le&&(Me=Le.get(Et,"value"))!==void 0?Me:(Me=Et.value,typeof Me=="string"?Me.replace(AC,""):Me??"")):void 0}}),ye.extend({valHooks:{option:{get:function(Be){var Le=ye.find.attr(Be,"value");return Le??va(ye.text(Be))}},select:{get:function(Be){var Le,Me,Ge,Et=Be.options,wt=Be.selectedIndex,Lt=Be.type==="select-one",Un=Lt?null:[],Yr=Lt?wt+1:Et.length;for(wt<0?Ge=Yr:Ge=Lt?wt:0;Ge<Yr;Ge++)if(Me=Et[Ge],(Me.selected||Ge===wt)&&!Me.disabled&&(!Me.parentNode.disabled||!It(Me.parentNode,"optgroup"))){if(Le=ye(Me).val(),Lt)return Le;Un.push(Le)}return Un},set:function(Be,Le){for(var Me,Ge,Et=Be.options,wt=ye.makeArray(Le),Lt=Et.length;Lt--;)Ge=Et[Lt],(Ge.selected=ye.inArray(ye.valHooks.option.get(Ge),wt)>-1)&&(Me=!0);return Me||(Be.selectedIndex=-1),wt}}}}),ye.each(["radio","checkbox"],function(){ye.valHooks[this]={set:function(Be,Le){if(Array.isArray(Le))return Be.checked=ye.inArray(ye(Be).val(),Le)>-1}},se.checkOn||(ye.valHooks[this].get=function(Be){return Be.getAttribute("value")===null?"on":Be.value})});var xC=s.location,NC={guid:Date.now()},UC=/\?/;ye.parseXML=function(Be){var Le,Me;if(!Be||typeof Be!="string")return null;try{Le=new s.DOMParser().parseFromString(Be,"text/xml")}catch{}return Me=Le&&Le.getElementsByTagName("parsererror")[0],(!Le||Me)&&ye.error("Invalid XML: "+(Me?ye.map(Me.childNodes,function(Ge){return Ge.textContent}).join(`
`):Be)),Le};var lE=/^(?:focusinfocus|focusoutblur)$/,Lm=function(Be){Be.stopPropagation()};ye.extend(ye.event,{trigger:function(Be,Le,Me,Ge){var Et,wt,Lt,Un,Yr,aa,fA,DA,sA=[Me||pe],tI=K.call(Be,"type")?Be.type:Be,tC=K.call(Be,"namespace")?Be.namespace.split("."):[];if(wt=DA=Lt=Me=Me||pe,!(Me.nodeType===3||Me.nodeType===8)&&!lE.test(tI+ye.event.triggered)&&(tI.indexOf(".")>-1&&(tC=tI.split("."),tI=tC.shift(),tC.sort()),Yr=tI.indexOf(":")<0&&"on"+tI,Be=Be[ye.expando]?Be:new ye.Event(tI,typeof Be=="object"&&Be),Be.isTrigger=Ge?2:3,Be.namespace=tC.join("."),Be.rnamespace=Be.namespace?new RegExp("(^|\\.)"+tC.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,Be.result=void 0,Be.target||(Be.target=Me),Le=Le==null?[Be]:ye.makeArray(Le,[Be]),fA=ye.event.special[tI]||{},!(!Ge&&fA.trigger&&fA.trigger.apply(Me,Le)===!1))){if(!Ge&&!fA.noBubble&&!ge(Me)){for(Un=fA.delegateType||tI,lE.test(Un+tI)||(wt=wt.parentNode);wt;wt=wt.parentNode)sA.push(wt),Lt=wt;Lt===(Me.ownerDocument||pe)&&sA.push(Lt.defaultView||Lt.parentWindow||s)}for(Et=0;(wt=sA[Et++])&&!Be.isPropagationStopped();)DA=wt,Be.type=Et>1?Un:fA.bindType||tI,aa=(cA.get(wt,"events")||Object.create(null))[Be.type]&&cA.get(wt,"handle"),aa&&aa.apply(wt,Le),aa=Yr&&wt[Yr],aa&&aa.apply&&Rt(wt)&&(Be.result=aa.apply(wt,Le),Be.result===!1&&Be.preventDefault());return Be.type=tI,!Ge&&!Be.isDefaultPrevented()&&(!fA._default||fA._default.apply(sA.pop(),Le)===!1)&&Rt(Me)&&Yr&&ae(Me[tI])&&!ge(Me)&&(Lt=Me[Yr],Lt&&(Me[Yr]=null),ye.event.triggered=tI,Be.isPropagationStopped()&&DA.addEventListener(tI,Lm),Me[tI](),Be.isPropagationStopped()&&DA.removeEventListener(tI,Lm),ye.event.triggered=void 0,Lt&&(Me[Yr]=Lt)),Be.result}},simulate:function(Be,Le,Me){var Ge=ye.extend(new ye.Event,Me,{type:Be,isSimulated:!0});ye.event.trigger(Ge,null,Le)}}),ye.fn.extend({trigger:function(Be,Le){return this.each(function(){ye.event.trigger(Be,Le,this)})},triggerHandler:function(Be,Le){var Me=this[0];if(Me)return ye.event.trigger(Be,Le,Me,!0)}});var Iy=/\[\]$/,xB=/\r?\n/g,Cy=/^(?:submit|button|image|reset|file)$/i,Ey=/^(?:input|select|textarea|keygen)/i;function iB(Be,Le,Me,Ge){var Et;if(Array.isArray(Le))ye.each(Le,function(wt,Lt){Me||Iy.test(Be)?Ge(Be,Lt):iB(Be+"["+(typeof Lt=="object"&&Lt!=null?wt:"")+"]",Lt,Me,Ge)});else if(!Me&&be(Le)==="object")for(Et in Le)iB(Be+"["+Et+"]",Le[Et],Me,Ge);else Ge(Be,Le)}ye.param=function(Be,Le){var Me,Ge=[],Et=function(wt,Lt){var Un=ae(Lt)?Lt():Lt;Ge[Ge.length]=encodeURIComponent(wt)+"="+encodeURIComponent(Un??"")};if(Be==null)return"";if(Array.isArray(Be)||Be.jquery&&!ye.isPlainObject(Be))ye.each(Be,function(){Et(this.name,this.value)});else for(Me in Be)iB(Me,Be[Me],Le,Et);return Ge.join("&")},ye.fn.extend({serialize:function(){return ye.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var Be=ye.prop(this,"elements");return Be?ye.makeArray(Be):this}).filter(function(){var Be=this.type;return this.name&&!ye(this).is(":disabled")&&Ey.test(this.nodeName)&&!Cy.test(Be)&&(this.checked||!vC.test(Be))}).map(function(Be,Le){var Me=ye(this).val();return Me==null?null:Array.isArray(Me)?ye.map(Me,function(Ge){return{name:Le.name,value:Ge.replace(xB,`\r
`)}}):{name:Le.name,value:Me.replace(xB,`\r
`)}}).get()}});var my=/%20/g,By=/#.*$/,yy=/([?&])_=[^&]*/,JE=/^(.*?):[ \t]*([^\r\n]*)$/mg,vy=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Qy=/^(?:GET|HEAD)$/,Fm=/^\/\//,Mm={},km={},nB="*/".concat("*"),oB=pe.createElement("a");oB.href=xC.href;function Pm(Be){return function(Le,Me){typeof Le!="string"&&(Me=Le,Le="*");var Ge,Et=0,wt=Le.toLowerCase().match(fa)||[];if(ae(Me))for(;Ge=wt[Et++];)Ge[0]==="+"?(Ge=Ge.slice(1)||"*",(Be[Ge]=Be[Ge]||[]).unshift(Me)):(Be[Ge]=Be[Ge]||[]).push(Me)}}function Om(Be,Le,Me,Ge){var Et={},wt=Be===km;function Lt(Un){var Yr;return Et[Un]=!0,ye.each(Be[Un]||[],function(aa,fA){var DA=fA(Le,Me,Ge);if(typeof DA=="string"&&!wt&&!Et[DA])return Le.dataTypes.unshift(DA),Lt(DA),!1;if(wt)return!(Yr=DA)}),Yr}return Lt(Le.dataTypes[0])||!Et["*"]&&Lt("*")}function SE(Be,Le){var Me,Ge,Et=ye.ajaxSettings.flatOptions||{};for(Me in Le)Le[Me]!==void 0&&((Et[Me]?Be:Ge||(Ge={}))[Me]=Le[Me]);return Ge&&ye.extend(!0,Be,Ge),Be}function Gm(Be,Le,Me){for(var Ge,Et,wt,Lt,Un=Be.contents,Yr=Be.dataTypes;Yr[0]==="*";)Yr.shift(),Ge===void 0&&(Ge=Be.mimeType||Le.getResponseHeader("Content-Type"));if(Ge){for(Et in Un)if(Un[Et]&&Un[Et].test(Ge)){Yr.unshift(Et);break}}if(Yr[0]in Me)wt=Yr[0];else{for(Et in Me){if(!Yr[0]||Be.converters[Et+" "+Yr[0]]){wt=Et;break}Lt||(Lt=Et)}wt=wt||Lt}if(wt)return wt!==Yr[0]&&Yr.unshift(wt),Me[wt]}function bB(Be,Le,Me,Ge){var Et,wt,Lt,Un,Yr,aa={},fA=Be.dataTypes.slice();if(fA[1])for(Lt in Be.converters)aa[Lt.toLowerCase()]=Be.converters[Lt];for(wt=fA.shift();wt;)if(Be.responseFields[wt]&&(Me[Be.responseFields[wt]]=Le),!Yr&&Ge&&Be.dataFilter&&(Le=Be.dataFilter(Le,Be.dataType)),Yr=wt,wt=fA.shift(),wt){if(wt==="*")wt=Yr;else if(Yr!=="*"&&Yr!==wt){if(Lt=aa[Yr+" "+wt]||aa["* "+wt],!Lt){for(Et in aa)if(Un=Et.split(" "),Un[1]===wt&&(Lt=aa[Yr+" "+Un[0]]||aa["* "+Un[0]],Lt)){Lt===!0?Lt=aa[Et]:aa[Et]!==!0&&(wt=Un[0],fA.unshift(Un[1]));break}}if(Lt!==!0)if(Lt&&Be.throws)Le=Lt(Le);else try{Le=Lt(Le)}catch(DA){return{state:"parsererror",error:Lt?DA:"No conversion from "+Yr+" to "+wt}}}}return{state:"success",data:Le}}ye.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xC.href,type:"GET",isLocal:vy.test(xC.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nB,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ye.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(Be,Le){return Le?SE(SE(Be,ye.ajaxSettings),Le):SE(ye.ajaxSettings,Be)},ajaxPrefilter:Pm(Mm),ajaxTransport:Pm(km),ajax:function(Be,Le){typeof Be=="object"&&(Le=Be,Be=void 0),Le=Le||{};var Me,Ge,Et,wt,Lt,Un,Yr,aa,fA,DA,sA=ye.ajaxSetup({},Le),tI=sA.context||sA,tC=sA.context&&(tI.nodeType||tI.jquery)?ye(tI):ye.event,fC=ye.Deferred(),aC=ye.Callbacks("once memory"),WC=sA.statusCode||{},MC={},dC={},BE="canceled",hC={readyState:0,getResponseHeader:function(pC){var bC;if(Yr){if(!wt)for(wt={};bC=JE.exec(Et);)wt[bC[1].toLowerCase()+" "]=(wt[bC[1].toLowerCase()+" "]||[]).concat(bC[2]);bC=wt[pC.toLowerCase()+" "]}return bC==null?null:bC.join(", ")},getAllResponseHeaders:function(){return Yr?Et:null},setRequestHeader:function(pC,bC){return Yr==null&&(pC=dC[pC.toLowerCase()]=dC[pC.toLowerCase()]||pC,MC[pC]=bC),this},overrideMimeType:function(pC){return Yr==null&&(sA.mimeType=pC),this},statusCode:function(pC){var bC;if(pC)if(Yr)hC.always(pC[hC.status]);else for(bC in pC)WC[bC]=[WC[bC],pC[bC]];return this},abort:function(pC){var bC=pC||BE;return Me&&Me.abort(bC),ZC(0,bC),this}};if(fC.promise(hC),sA.url=((Be||sA.url||xC.href)+"").replace(Fm,xC.protocol+"//"),sA.type=Le.method||Le.type||sA.method||sA.type,sA.dataTypes=(sA.dataType||"*").toLowerCase().match(fa)||[""],sA.crossDomain==null){Un=pe.createElement("a");try{Un.href=sA.url,Un.href=Un.href,sA.crossDomain=oB.protocol+"//"+oB.host!=Un.protocol+"//"+Un.host}catch{sA.crossDomain=!0}}if(sA.data&&sA.processData&&typeof sA.data!="string"&&(sA.data=ye.param(sA.data,sA.traditional)),Om(Mm,sA,Le,hC),Yr)return hC;aa=ye.event&&sA.global,aa&&ye.active++===0&&ye.event.trigger("ajaxStart"),sA.type=sA.type.toUpperCase(),sA.hasContent=!Qy.test(sA.type),Ge=sA.url.replace(By,""),sA.hasContent?sA.data&&sA.processData&&(sA.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(sA.data=sA.data.replace(my,"+")):(DA=sA.url.slice(Ge.length),sA.data&&(sA.processData||typeof sA.data=="string")&&(Ge+=(UC.test(Ge)?"&":"?")+sA.data,delete sA.data),sA.cache===!1&&(Ge=Ge.replace(yy,"$1"),DA=(UC.test(Ge)?"&":"?")+"_="+NC.guid+++DA),sA.url=Ge+DA),sA.ifModified&&(ye.lastModified[Ge]&&hC.setRequestHeader("If-Modified-Since",ye.lastModified[Ge]),ye.etag[Ge]&&hC.setRequestHeader("If-None-Match",ye.etag[Ge])),(sA.data&&sA.hasContent&&sA.contentType!==!1||Le.contentType)&&hC.setRequestHeader("Content-Type",sA.contentType),hC.setRequestHeader("Accept",sA.dataTypes[0]&&sA.accepts[sA.dataTypes[0]]?sA.accepts[sA.dataTypes[0]]+(sA.dataTypes[0]!=="*"?", "+nB+"; q=0.01":""):sA.accepts["*"]);for(fA in sA.headers)hC.setRequestHeader(fA,sA.headers[fA]);if(sA.beforeSend&&(sA.beforeSend.call(tI,hC,sA)===!1||Yr))return hC.abort();if(BE="abort",aC.add(sA.complete),hC.done(sA.success),hC.fail(sA.error),Me=Om(km,sA,Le,hC),!Me)ZC(-1,"No Transport");else{if(hC.readyState=1,aa&&tC.trigger("ajaxSend",[hC,sA]),Yr)return hC;sA.async&&sA.timeout>0&&(Lt=s.setTimeout(function(){hC.abort("timeout")},sA.timeout));try{Yr=!1,Me.send(MC,ZC)}catch(pC){if(Yr)throw pC;ZC(-1,pC)}}function ZC(pC,bC,yE,pm){var cE,RE,uE,TE,wE,gE=bC;Yr||(Yr=!0,Lt&&s.clearTimeout(Lt),Me=void 0,Et=pm||"",hC.readyState=pC>0?4:0,cE=pC>=200&&pC<300||pC===304,yE&&(TE=Gm(sA,hC,yE)),!cE&&ye.inArray("script",sA.dataTypes)>-1&&ye.inArray("json",sA.dataTypes)<0&&(sA.converters["text script"]=function(){}),TE=bB(sA,TE,hC,cE),cE?(sA.ifModified&&(wE=hC.getResponseHeader("Last-Modified"),wE&&(ye.lastModified[Ge]=wE),wE=hC.getResponseHeader("etag"),wE&&(ye.etag[Ge]=wE)),pC===204||sA.type==="HEAD"?gE="nocontent":pC===304?gE="notmodified":(gE=TE.state,RE=TE.data,uE=TE.error,cE=!uE)):(uE=gE,(pC||!gE)&&(gE="error",pC<0&&(pC=0))),hC.status=pC,hC.statusText=(bC||gE)+"",cE?fC.resolveWith(tI,[RE,gE,hC]):fC.rejectWith(tI,[hC,gE,uE]),hC.statusCode(WC),WC=void 0,aa&&tC.trigger(cE?"ajaxSuccess":"ajaxError",[hC,sA,cE?RE:uE]),aC.fireWith(tI,[hC,gE]),aa&&(tC.trigger("ajaxComplete",[hC,sA]),--ye.active||ye.event.trigger("ajaxStop")))}return hC},getJSON:function(Be,Le,Me){return ye.get(Be,Le,Me,"json")},getScript:function(Be,Le){return ye.get(Be,void 0,Le,"script")}}),ye.each(["get","post"],function(Be,Le){ye[Le]=function(Me,Ge,Et,wt){return ae(Ge)&&(wt=wt||Et,Et=Ge,Ge=void 0),ye.ajax(ye.extend({url:Me,type:Le,dataType:wt,data:Ge,success:Et},ye.isPlainObject(Me)&&Me))}}),ye.ajaxPrefilter(function(Be){var Le;for(Le in Be.headers)Le.toLowerCase()==="content-type"&&(Be.contentType=Be.headers[Le]||"")}),ye._evalUrl=function(Be,Le,Me){return ye.ajax({url:Be,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(Ge){ye.globalEval(Ge,Le,Me)}})},ye.fn.extend({wrapAll:function(Be){var Le;return this[0]&&(ae(Be)&&(Be=Be.call(this[0])),Le=ye(Be,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&Le.insertBefore(this[0]),Le.map(function(){for(var Me=this;Me.firstElementChild;)Me=Me.firstElementChild;return Me}).append(this)),this},wrapInner:function(Be){return ae(Be)?this.each(function(Le){ye(this).wrapInner(Be.call(this,Le))}):this.each(function(){var Le=ye(this),Me=Le.contents();Me.length?Me.wrapAll(Be):Le.append(Be)})},wrap:function(Be){var Le=ae(Be);return this.each(function(Me){ye(this).wrapAll(Le?Be.call(this,Me):Be)})},unwrap:function(Be){return this.parent(Be).not("body").each(function(){ye(this).replaceWith(this.childNodes)}),this}}),ye.expr.pseudos.hidden=function(Be){return!ye.expr.pseudos.visible(Be)},ye.expr.pseudos.visible=function(Be){return!!(Be.offsetWidth||Be.offsetHeight||Be.getClientRects().length)},ye.ajaxSettings.xhr=function(){try{return new s.XMLHttpRequest}catch{}};var DB={0:200,1223:204},dm=ye.ajaxSettings.xhr();se.cors=!!dm&&"withCredentials"in dm,se.ajax=dm=!!dm,ye.ajaxTransport(function(Be){var Le,Me;if(se.cors||dm&&!Be.crossDomain)return{send:function(Ge,Et){var wt,Lt=Be.xhr();if(Lt.open(Be.type,Be.url,Be.async,Be.username,Be.password),Be.xhrFields)for(wt in Be.xhrFields)Lt[wt]=Be.xhrFields[wt];Be.mimeType&&Lt.overrideMimeType&&Lt.overrideMimeType(Be.mimeType),!Be.crossDomain&&!Ge["X-Requested-With"]&&(Ge["X-Requested-With"]="XMLHttpRequest");for(wt in Ge)Lt.setRequestHeader(wt,Ge[wt]);Le=function(Un){return function(){Le&&(Le=Me=Lt.onload=Lt.onerror=Lt.onabort=Lt.ontimeout=Lt.onreadystatechange=null,Un==="abort"?Lt.abort():Un==="error"?typeof Lt.status!="number"?Et(0,"error"):Et(Lt.status,Lt.statusText):Et(DB[Lt.status]||Lt.status,Lt.statusText,(Lt.responseType||"text")!=="text"||typeof Lt.responseText!="string"?{binary:Lt.response}:{text:Lt.responseText},Lt.getAllResponseHeaders()))}},Lt.onload=Le(),Me=Lt.onerror=Lt.ontimeout=Le("error"),Lt.onabort!==void 0?Lt.onabort=Me:Lt.onreadystatechange=function(){Lt.readyState===4&&s.setTimeout(function(){Le&&Me()})},Le=Le("abort");try{Lt.send(Be.hasContent&&Be.data||null)}catch(Un){if(Le)throw Un}},abort:function(){Le&&Le()}}}),ye.ajaxPrefilter(function(Be){Be.crossDomain&&(Be.contents.script=!1)}),ye.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(Be){return ye.globalEval(Be),Be}}}),ye.ajaxPrefilter("script",function(Be){Be.cache===void 0&&(Be.cache=!1),Be.crossDomain&&(Be.type="GET")}),ye.ajaxTransport("script",function(Be){if(Be.crossDomain||Be.scriptAttrs){var Le,Me;return{send:function(Ge,Et){Le=ye("<script>").attr(Be.scriptAttrs||{}).prop({charset:Be.scriptCharset,src:Be.url}).on("load error",Me=function(wt){Le.remove(),Me=null,wt&&Et(wt.type==="error"?404:200,wt.type)}),pe.head.appendChild(Le[0])},abort:function(){Me&&Me()}}}});var RB=[],sB=/(=)\?(?=&|$)|\?\?/;ye.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var Be=RB.pop()||ye.expando+"_"+NC.guid++;return this[Be]=!0,Be}}),ye.ajaxPrefilter("json jsonp",function(Be,Le,Me){var Ge,Et,wt,Lt=Be.jsonp!==!1&&(sB.test(Be.url)?"url":typeof Be.data=="string"&&(Be.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&sB.test(Be.data)&&"data");if(Lt||Be.dataTypes[0]==="jsonp")return Ge=Be.jsonpCallback=ae(Be.jsonpCallback)?Be.jsonpCallback():Be.jsonpCallback,Lt?Be[Lt]=Be[Lt].replace(sB,"$1"+Ge):Be.jsonp!==!1&&(Be.url+=(UC.test(Be.url)?"&":"?")+Be.jsonp+"="+Ge),Be.converters["script json"]=function(){return wt||ye.error(Ge+" was not called"),wt[0]},Be.dataTypes[0]="json",Et=s[Ge],s[Ge]=function(){wt=arguments},Me.always(function(){Et===void 0?ye(s).removeProp(Ge):s[Ge]=Et,Be[Ge]&&(Be.jsonpCallback=Le.jsonpCallback,RB.push(Ge)),wt&&ae(Et)&&Et(wt[0]),wt=Et=void 0}),"script"}),se.createHTMLDocument=function(){var Be=pe.implementation.createHTMLDocument("").body;return Be.innerHTML="<form></form><form></form>",Be.childNodes.length===2}(),ye.parseHTML=function(Be,Le,Me){if(typeof Be!="string")return[];typeof Le=="boolean"&&(Me=Le,Le=!1);var Ge,Et,wt;return Le||(se.createHTMLDocument?(Le=pe.implementation.createHTMLDocument(""),Ge=Le.createElement("base"),Ge.href=pe.location.href,Le.head.appendChild(Ge)):Le=pe),Et=VA.exec(Be),wt=!Me&&[],Et?[Le.createElement(Et[1])]:(Et=YA([Be],Le,wt),wt&&wt.length&&ye(wt).remove(),ye.merge([],Et.childNodes))},ye.fn.load=function(Be,Le,Me){var Ge,Et,wt,Lt=this,Un=Be.indexOf(" ");return Un>-1&&(Ge=va(Be.slice(Un)),Be=Be.slice(0,Un)),ae(Le)?(Me=Le,Le=void 0):Le&&typeof Le=="object"&&(Et="POST"),Lt.length>0&&ye.ajax({url:Be,type:Et||"GET",dataType:"html",data:Le}).done(function(Yr){wt=arguments,Lt.html(Ge?ye("<div>").append(ye.parseHTML(Yr)).find(Ge):Yr)}).always(Me&&function(Yr,aa){Lt.each(function(){Me.apply(this,wt||[Yr.responseText,aa,Yr])})}),this},ye.expr.pseudos.animated=function(Be){return ye.grep(ye.timers,function(Le){return Be===Le.elem}).length},ye.offset={setOffset:function(Be,Le,Me){var Ge,Et,wt,Lt,Un,Yr,aa,fA=ye.css(Be,"position"),DA=ye(Be),sA={};fA==="static"&&(Be.style.position="relative"),Un=DA.offset(),wt=ye.css(Be,"top"),Yr=ye.css(Be,"left"),aa=(fA==="absolute"||fA==="fixed")&&(wt+Yr).indexOf("auto")>-1,aa?(Ge=DA.position(),Lt=Ge.top,Et=Ge.left):(Lt=parseFloat(wt)||0,Et=parseFloat(Yr)||0),ae(Le)&&(Le=Le.call(Be,Me,ye.extend({},Un))),Le.top!=null&&(sA.top=Le.top-Un.top+Lt),Le.left!=null&&(sA.left=Le.left-Un.left+Et),"using"in Le?Le.using.call(Be,sA):DA.css(sA)}},ye.fn.extend({offset:function(Be){if(arguments.length)return Be===void 0?this:this.each(function(Et){ye.offset.setOffset(this,Be,Et)});var Le,Me,Ge=this[0];if(Ge)return Ge.getClientRects().length?(Le=Ge.getBoundingClientRect(),Me=Ge.ownerDocument.defaultView,{top:Le.top+Me.pageYOffset,left:Le.left+Me.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var Be,Le,Me,Ge=this[0],Et={top:0,left:0};if(ye.css(Ge,"position")==="fixed")Le=Ge.getBoundingClientRect();else{for(Le=this.offset(),Me=Ge.ownerDocument,Be=Ge.offsetParent||Me.documentElement;Be&&(Be===Me.body||Be===Me.documentElement)&&ye.css(Be,"position")==="static";)Be=Be.parentNode;Be&&Be!==Ge&&Be.nodeType===1&&(Et=ye(Be).offset(),Et.top+=ye.css(Be,"borderTopWidth",!0),Et.left+=ye.css(Be,"borderLeftWidth",!0))}return{top:Le.top-Et.top-ye.css(Ge,"marginTop",!0),left:Le.left-Et.left-ye.css(Ge,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var Be=this.offsetParent;Be&&ye.css(Be,"position")==="static";)Be=Be.offsetParent;return Be||zI})}}),ye.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(Be,Le){var Me=Le==="pageYOffset";ye.fn[Be]=function(Ge){return lA(this,function(Et,wt,Lt){var Un;if(ge(Et)?Un=Et:Et.nodeType===9&&(Un=Et.defaultView),Lt===void 0)return Un?Un[Le]:Et[wt];Un?Un.scrollTo(Me?Un.pageXOffset:Lt,Me?Lt:Un.pageYOffset):Et[wt]=Lt},Be,Ge,arguments.length)}}),ye.each(["top","left"],function(Be,Le){ye.cssHooks[Le]=jC(se.pixelPosition,function(Me,Ge){if(Ge)return Ge=VC(Me,Le),EA.test(Ge)?ye(Me).position()[Le]+"px":Ge})}),ye.each({Height:"height",Width:"width"},function(Be,Le){ye.each({padding:"inner"+Be,content:Le,"":"outer"+Be},function(Me,Ge){ye.fn[Ge]=function(Et,wt){var Lt=arguments.length&&(Me||typeof Et!="boolean"),Un=Me||(Et===!0||wt===!0?"margin":"border");return lA(this,function(Yr,aa,fA){var DA;return ge(Yr)?Ge.indexOf("outer")===0?Yr["inner"+Be]:Yr.document.documentElement["client"+Be]:Yr.nodeType===9?(DA=Yr.documentElement,Math.max(Yr.body["scroll"+Be],DA["scroll"+Be],Yr.body["offset"+Be],DA["offset"+Be],DA["client"+Be])):fA===void 0?ye.css(Yr,aa,Un):ye.style(Yr,aa,fA,Un)},Le,Lt?Et:void 0,Lt)}})}),ye.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(Be,Le){ye.fn[Le]=function(Me){return this.on(Le,Me)}}),ye.fn.extend({bind:function(Be,Le,Me){return this.on(Be,null,Le,Me)},unbind:function(Be,Le){return this.off(Be,null,Le)},delegate:function(Be,Le,Me,Ge){return this.on(Le,Be,Me,Ge)},undelegate:function(Be,Le,Me){return arguments.length===1?this.off(Be,"**"):this.off(Le,Be||"**",Me)},hover:function(Be,Le){return this.on("mouseenter",Be).on("mouseleave",Le||Be)}}),ye.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(Be,Le){ye.fn[Le]=function(Me,Ge){return arguments.length>0?this.on(Le,null,Me,Ge):this.trigger(Le)}});var _y=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;ye.proxy=function(Be,Le){var Me,Ge,Et;if(typeof Le=="string"&&(Me=Be[Le],Le=Be,Be=Me),!!ae(Be))return Ge=T.call(arguments,2),Et=function(){return Be.apply(Le||this,Ge.concat(T.call(arguments)))},Et.guid=Be.guid=Be.guid||ye.guid++,Et},ye.holdReady=function(Be){Be?ye.readyWait++:ye.ready(!0)},ye.isArray=Array.isArray,ye.parseJSON=JSON.parse,ye.nodeName=It,ye.isFunction=ae,ye.isWindow=ge,ye.camelCase=NI,ye.type=be,ye.now=Date.now,ye.isNumeric=function(Be){var Le=ye.type(Be);return(Le==="number"||Le==="string")&&!isNaN(Be-parseFloat(Be))},ye.trim=function(Be){return Be==null?"":(Be+"").replace(_y,"$1")};var Sy=s.jQuery,wy=s.$;return ye.noConflict=function(Be){return s.$===ye&&(s.$=wy),Be&&s.jQuery===ye&&(s.jQuery=Sy),ye},typeof d>"u"&&(s.jQuery=s.$=ye),ye})})(jquery);var jqueryExports=jquery.exports;const $=getDefaultExportFromCjs(jqueryExports);/**
 * @license
 * (c) 2009-2016 Michael Leibman
 * michael{dot}leibman{at}gmail{dot}com
 * http://github.com/mleibman/slickgrid
 *
 * Distributed under MIT license.
 * All rights reserved.
 *
 * SlickGrid v2.4
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 */const jQuery=$;(function(f){f.fn.drag=function(T,F,M){var P=typeof T=="string"?T:"",H=f.isFunction(T)?T:f.isFunction(F)?F:null;return P.indexOf("drag")!==0&&(P="drag"+P),M=(T==H?F:M)||{},H?this.on(P,M,H):this.trigger(P)};var s=f.event,d=s.special,_=d.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(T){var F=f.data(this,_.datakey),M=T.data||{};F.related+=1,f.each(_.defaults,function(P,H){M[P]!==void 0&&(F[P]=M[P])})},remove:function(){f.data(this,_.datakey).related-=1},setup:function(){if(!f.data(this,_.datakey)){var T=f.extend({related:0},_.defaults);f.data(this,_.datakey,T),s.add(this,"touchstart mousedown",_.init,T),this.attachEvent&&this.attachEvent("ondragstart",_.dontstart)}},teardown:function(){var T=f.data(this,_.datakey)||{};T.related||(f.removeData(this,_.datakey),s.remove(this,"touchstart mousedown",_.init),_.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",_.dontstart))},init:function(T,F){if(_.touched)return;var M=T.data,P;if(T.which!=0&&M.which>0&&T.which!=M.which||f(T.target).is(M.not)||M.handle&&!f(T.target).closest(M.handle,T.currentTarget).length||(_.touched=T.type=="touchstart"?this:null,M.propagates=1,M.mousedown=this,M.interactions=[_.interaction(this,M)],M.target=T.target,M.pageX=T.pageX,M.pageY=T.pageY,M.dragging=null,P=_.hijack(T,"draginit",M),!M.propagates))return;P=_.flatten(P),P&&P.length&&(M.interactions=[],f.each(P,function(){M.interactions.push(_.interaction(this,M))})),M.propagates=M.interactions.length,M.drop!==!1&&d.drop&&d.drop.handler(T,M),_.textselect(!1);let H=f(T.currentTarget).data("__doc__")||document;if(_.touched?s.add(_.touched,"touchmove touchend",_.handler,M):s.add(H,"mousemove mouseup",_.handler,M),!_.touched||M.live)return!1},interaction:function(T,F){var M=T&&T.ownerDocument?f(T)[F.relative?"position":"offset"]()||{top:0,left:0}:{top:0,left:0};return{drag:T,callback:new _.callback,droppable:[],offset:M}},handler:function(T){var F=T.data;switch(T.type){case(!F.dragging&&"touchmove"):T.preventDefault();case(!F.dragging&&"mousemove"):if(Math.pow(T.pageX-F.pageX,2)+Math.pow(T.pageY-F.pageY,2)<Math.pow(F.distance,2))break;T.target=F.target,_.hijack(T,"dragstart",F),F.propagates&&(F.dragging=!0);case"touchmove":T.preventDefault();case"mousemove":if(F.dragging){if(_.hijack(T,"drag",F),F.propagates){F.drop!==!1&&d.drop&&d.drop.handler(T,F);break}T.type="mouseup"}case"touchend":case"mouseup":default:let M=f(F.target).data("__doc__")||T.currentTarget||document;_.touched?s.remove(_.touched,"touchmove touchend",_.handler):s.remove(M,"mousemove mouseup",_.handler),F.dragging&&(F.drop!==!1&&d.drop&&d.drop.handler(T,F),_.hijack(T,"dragend",F)),_.textselect(!0),F.click===!1&&F.dragging&&f.data(F.mousedown,"suppress.click",new Date().getTime()+5),F.dragging=_.touched=!1;break}},hijack:function(T,F,M,P,H){if(M){var J={event:T.originalEvent,type:T.type},K=F.indexOf("drop")?"drag":"drop",z,oe=P||0,se,ae,ge=isNaN(P)?M.interactions.length:P;T.type=F;var pe=function(){};T.originalEvent=new jQuery.Event(J.event,{preventDefault:pe,stopPropagation:pe,stopImmediatePropagation:pe}),M.results=[];do if(se=M.interactions[oe]){if(F!=="dragend"&&se.cancelled)continue;ae=_.properties(T,M,se),se.results=[],f(H||se[K]||M.droppable).each(function(he,ve){if(ae.target=ve,T.isPropagationStopped=function(){return!1},z=ve?s.dispatch.call(ve,T,ae):null,z===!1?(K=="drag"&&(se.cancelled=!0,M.propagates-=1),F=="drop"&&(se[K][he]=null)):F=="dropinit"&&se.droppable.push(_.element(z)||ve),F=="dragstart"&&(se.proxy=f(_.element(z)||se.drag)[0]),se.results.push(z),delete T.result,F!=="dropinit")return z}),M.results[oe]=_.flatten(se.results),F=="dropinit"&&(se.droppable=_.flatten(se.droppable)),F=="dragstart"&&!se.cancelled&&ae.update()}while(++oe<ge);return T.type=J.type,T.originalEvent=J.event,_.flatten(M.results)}},properties:function(T,F,M){var P=M.callback;return P.drag=M.drag,P.proxy=M.proxy||M.drag,P.startX=F.pageX,P.startY=F.pageY,P.deltaX=T.pageX-F.pageX,P.deltaY=T.pageY-F.pageY,P.originalX=M.offset.left,P.originalY=M.offset.top,P.offsetX=P.originalX+P.deltaX,P.offsetY=P.originalY+P.deltaY,P.drop=_.flatten((M.drop||[]).slice()),P.available=_.flatten((M.droppable||[]).slice()),P},element:function(T){if(T&&(T.jquery||T.nodeType==1))return T},flatten:function(T){return f.map(T,function(F){return F&&F.jquery?f.makeArray(F):F&&F.length?_.flatten(F):F})},textselect:function(T){f(document)[T?"off":"on"]("selectstart",_.dontstart).css("MozUserSelect",T?"":"none"),document.unselectable=T?"off":"on"},dontstart:function(){return!1},callback:function(){}};_.callback.prototype={update:function(){d.drop&&this.available.length&&f.each(this.available,function(T){d.drop.locate(this,T)})}};var S=s.dispatch;s.dispatch=function(T){if(f.data(this,"suppress."+T.type)-new Date().getTime()>0){f.removeData(this,"suppress."+T.type);return}return S.apply(this,arguments)},d.draginit=d.dragstart=d.dragend=_})($);var scrollbarDimensions,maxSupportedCssHeight;function SlickGrid(container,data,columns,options){var defaults={alwaysShowVerticalScroll:!1,alwaysAllowHorizontalScroll:!1,explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,suppressActiveCellChangeOnEdit:!1,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,enableAsyncPostRenderCleanup:!1,asyncPostRenderCleanupDelay:40,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showColumnHeader:!0,showHeaderRow:!1,headerRowHeight:25,createFooterRow:!1,showFooterRow:!1,footerRowHeight:25,createPreHeaderPanel:!1,showPreHeaderPanel:!1,preHeaderPanelHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,frozenBottom:!1,frozenColumn:-1,frozenRow:-1,frozenRightViewportMinWidth:100,fullWidthRows:!1,multiColumnSort:!1,numberedMultiColumnSort:!1,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!1,defaultFormatter,forceSyncScrolling:!1,addNewRowCssClass:"new-row",preserveCopiedSelectionOnPaste:!1,showCellSelection:!0,viewportClass:null,minRowBuffer:3,emulatePagingWhenScrolling:!0,editorCellNavOnLRKeys:!1,enableMouseWheelScrollHandler:!0,doPaging:!0,autosizeColsMode:Slick.GridAutosizeColsMode.LegacyOff,autosizeColPaddingPx:4,autosizeTextAvgToMWidthRatio:.75,viewportSwitchToScrollModeWidthPercent:void 0,viewportMinWidthPx:void 0,viewportMaxWidthPx:void 0,suppressCssChangesOnHiddenInit:!1},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,maxWidth:void 0,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0},columnAutosizeDefaults={ignoreHeaderText:!1,colValueArray:void 0,allowAddlPercent:void 0,formatterOverride:void 0,autosizeMode:Slick.ColAutosizeMode.ContentIntelligent,rowSelectionModeOnInit:void 0,rowSelectionMode:Slick.RowSelectionMode.FirstNRows,rowSelectionCount:100,valueFilterMode:Slick.ValueFilterMode.None,widthEvalMode:Slick.WidthEvalMode.CanvasTextSize,sizeToRemaining:void 0,widthPx:void 0,colDataTypeOf:void 0},th,h,ph,n,cj,page=0,offset=0,vScrollDir=1,initialized=!1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$focusSink,$focusSink2;$();var $headerScroller,$headers,$headerRow,$headerRowScroller,$headerRowSpacerL,$headerRowSpacerR,$footerRow,$footerRowScroller,$footerRowSpacerL,$footerRowSpacerR,$preHeaderPanel,$preHeaderPanelScroller,$preHeaderPanelSpacer,$preHeaderPanelR,$preHeaderPanelScrollerR,$topPanelScroller,$topPanel,$viewport,$canvas,$style,$boundAncestors,treeColumns,stylesheet,columnCssRulesL,columnCssRulesR,viewportH,viewportW,canvasWidth,canvasWidthL,canvasWidthR,headersWidth,headersWidthL,headersWidthR,viewportHasHScroll,viewportHasVScroll,headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,jQueryNewWidthBehaviour=!1,absoluteColumnMinWidth,hasFrozenRows=!1,frozenRowsHeight=0,actualFrozenRow=-1,paneTopH=0,paneBottomH=0,viewportTopH=0,topPanelH=0,headerRowH=0,footerRowH=0,tabbingDirection=1,$activeCanvasNode,$activeViewportNode,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows=0,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,lastRenderedScrollLeft=0,prevScrollLeft=0,scrollLeft=0,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumns=[],columnPosLeft=[],columnPosRight=[],pagingActive=!1,pagingIsLastPage=!1,scrollThrottle=ActionThrottle(render,50),h_editorLoader=null,h_postrender=null,h_postrenderCleanup=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,postProcessedCleanupQueue=[],counter_rows_rendered=0,counter_rows_removed=0,rowNodeFromLastMouseWheelEvent,zombieRowNodeFromLastMouseWheelEvent,$paneHeaderL,$paneHeaderR,$paneTopL,$paneTopR,$paneBottomL,$paneBottomR,$headerScrollerL,$headerScrollerR,$headerL,$headerR,$groupHeadersL,$groupHeadersR,$headerRowScrollerL,$headerRowScrollerR,$footerRowScrollerL,$footerRowScrollerR,$headerRowL,$headerRowR,$footerRowL,$footerRowR,$topPanelScrollerL,$topPanelScrollerR,$topPanelL,$topPanelR,$viewportTopL,$viewportTopR,$viewportBottomL,$viewportBottomR,$canvasTopL,$canvasTopR,$canvasBottomL,$canvasBottomR,$viewportScrollContainerX,$viewportScrollContainerY,$headerScrollContainer,$headerRowScrollContainer,$footerRowScrollContainer,cssShow={position:"absolute",visibility:"hidden",display:"block"},$hiddenParents,oldProps=[],columnResizeDragging=!1,__doc__=document;function init(){if(container instanceof $?$container=container:$container=$(container),$container.length<1)throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");if(options.suppressCssChangesOnHiddenInit||cacheCssForHiddenInit(),maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight(),options=$.extend({},defaults,options),validateAndEnforceOptions(),columnDefaults.width=options.defaultColumnWidth,treeColumns=new Slick.TreeColumns(columns),columns=treeColumns.extractColumns(),updateColumnProps(),options.enableColumnReorder&&!$.fn.sortable)throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");if(editController={commitCurrentEdit,cancelCurrentEdit},$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container),$paneHeaderL=$("<div class='slick-pane slick-pane-header slick-pane-left' tabIndex='0' />").appendTo($container),$paneHeaderR=$("<div class='slick-pane slick-pane-header slick-pane-right' tabIndex='0' />").appendTo($container),$paneTopL=$("<div class='slick-pane slick-pane-top slick-pane-left' tabIndex='0' />").appendTo($container),$paneTopR=$("<div class='slick-pane slick-pane-top slick-pane-right' tabIndex='0' />").appendTo($container),$paneBottomL=$("<div class='slick-pane slick-pane-bottom slick-pane-left' tabIndex='0' />").appendTo($container),$paneBottomR=$("<div class='slick-pane slick-pane-bottom slick-pane-right' tabIndex='0' />").appendTo($container),options.createPreHeaderPanel&&($preHeaderPanelScroller=$("<div class='slick-preheader-panel ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($paneHeaderL),$preHeaderPanel=$("<div />").appendTo($preHeaderPanelScroller),$preHeaderPanelSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($preHeaderPanelScroller),$preHeaderPanelScrollerR=$("<div class='slick-preheader-panel ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($paneHeaderR),$preHeaderPanelR=$("<div />").appendTo($preHeaderPanelScrollerR),$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($preHeaderPanelScrollerR),options.showPreHeaderPanel||($preHeaderPanelScroller.hide(),$preHeaderPanelScrollerR.hide())),$headerScrollerL=$("<div class='slick-header ui-state-default slick-header-left' />").appendTo($paneHeaderL),$headerScrollerR=$("<div class='slick-header ui-state-default slick-header-right' />").appendTo($paneHeaderR),$headerScroller=$().add($headerScrollerL).add($headerScrollerR),treeColumns.hasDepth()){$groupHeadersL=[],$groupHeadersR=[];for(var f=0;f<treeColumns.getDepth()-1;f++)$groupHeadersL[f]=$("<div class='slick-group-header-columns slick-group-header-columns-left' style='left:-1000px' />").appendTo($headerScrollerL),$groupHeadersR[f]=$("<div class='slick-group-header-columns slick-group-header-columns-right' style='left:-1000px' />").appendTo($headerScrollerR);$().add($groupHeadersL).add($groupHeadersR)}$headerL=$("<div class='slick-header-columns slick-header-columns-left' style='left:-1000px' />").data("__doc__",__doc__).appendTo($headerScrollerL),$headerR=$("<div class='slick-header-columns slick-header-columns-right' style='left:-1000px' />").appendTo($headerScrollerR),$headers=$().add($headerL).add($headerR),$headerRowScrollerL=$("<div class='slick-headerrow ui-state-default' />").appendTo($paneTopL),$headerRowScrollerR=$("<div class='slick-headerrow ui-state-default' />").appendTo($paneTopR),$headerRowScroller=$().add($headerRowScrollerL).add($headerRowScrollerR),$headerRowSpacerL=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($headerRowScrollerL),$headerRowSpacerR=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($headerRowScrollerR),$headerRowL=$("<div class='slick-headerrow-columns slick-headerrow-columns-left' />").appendTo($headerRowScrollerL),$headerRowR=$("<div class='slick-headerrow-columns slick-headerrow-columns-right' />").appendTo($headerRowScrollerR),$headerRow=$().add($headerRowL).add($headerRowR),$topPanelScrollerL=$("<div class='slick-top-panel-scroller ui-state-default' />").appendTo($paneTopL),$topPanelScrollerR=$("<div class='slick-top-panel-scroller ui-state-default' />").appendTo($paneTopR),$topPanelScroller=$().add($topPanelScrollerL).add($topPanelScrollerR),$topPanelL=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScrollerL),$topPanelR=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScrollerR),$topPanel=$().add($topPanelL).add($topPanelR),options.showColumnHeader||$headerScroller.hide(),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),$viewportTopL=$("<div class='slick-viewport slick-viewport-top slick-viewport-left' tabIndex='0' hideFocus />").appendTo($paneTopL),$viewportTopR=$("<div class='slick-viewport slick-viewport-top slick-viewport-right' tabIndex='0' hideFocus />").appendTo($paneTopR),$viewportBottomL=$("<div class='slick-viewport slick-viewport-bottom slick-viewport-left' tabIndex='0' hideFocus />").appendTo($paneBottomL),$viewportBottomR=$("<div class='slick-viewport slick-viewport-bottom slick-viewport-right' tabIndex='0' hideFocus />").appendTo($paneBottomR),$viewport=$().add($viewportTopL).add($viewportTopR).add($viewportBottomL).add($viewportBottomR),$activeViewportNode=$viewportTopL,$canvasTopL=$("<div class='grid-canvas grid-canvas-top grid-canvas-left' tabIndex='0' hideFocus />").appendTo($viewportTopL),$canvasTopR=$("<div class='grid-canvas grid-canvas-top grid-canvas-right' tabIndex='0' hideFocus />").appendTo($viewportTopR),$canvasBottomL=$("<div class='grid-canvas grid-canvas-bottom grid-canvas-left' tabIndex='0' hideFocus />").appendTo($viewportBottomL),$canvasBottomR=$("<div class='grid-canvas grid-canvas-bottom grid-canvas-right' tabIndex='0' hideFocus />").appendTo($viewportBottomR),options.viewportClass&&$viewport.toggleClass(options.viewportClass,!0),$canvas=$().add($canvasTopL).add($canvasTopR).add($canvasBottomL).add($canvasBottomR),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),$activeCanvasNode=$canvasTopL,$preHeaderPanelSpacer&&$preHeaderPanelSpacer.css("width",getCanvasWidth()+scrollbarDimensions.width+"px"),$headers.width(getHeadersWidth()),$headerRowSpacerL.css("width",getCanvasWidth()+scrollbarDimensions.width+"px"),$headerRowSpacerR.css("width",getCanvasWidth()+scrollbarDimensions.width+"px"),options.createFooterRow&&($footerRowScrollerR=$("<div class='slick-footerrow ui-state-default' />").appendTo($paneTopR),$footerRowScrollerL=$("<div class='slick-footerrow ui-state-default' />").appendTo($paneTopL),$footerRowScroller=$().add($footerRowScrollerL).add($footerRowScrollerR),$footerRowSpacerL=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($footerRowScrollerL),$footerRowSpacerR=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($footerRowScrollerR),$footerRowL=$("<div class='slick-footerrow-columns slick-footerrow-columns-left' />").appendTo($footerRowScrollerL),$footerRowR=$("<div class='slick-footerrow-columns slick-footerrow-columns-right' />").appendTo($footerRowScrollerR),$footerRow=$().add($footerRowL).add($footerRowR),options.showFooterRow||$footerRowScroller.hide()),$focusSink2=$focusSink.clone().appendTo($container),options.explicitInitialization||finishInitialization()}function finishInitialization(){initialized||(initialized=!0,getViewportWidth(),getViewportHeight(),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.on("selectstart.ui",function(f){return $(f.target).is("input,textarea")}),setFrozenOptions(),setPaneVisibility(),setScroller(),setOverflow(),updateColumnCaches(),createColumnHeaders(),createColumnGroupHeaders(),createColumnFooter(),setupColumnSort(),createCssRules(),resizeCanvas(),bindAncestorScrollEvents(),$container.on("resize.slickgrid",resizeCanvas),$viewport.on("scroll",handleScroll),jQuery.fn.mousewheel&&options.enableMouseWheelScrollHandler&&$viewport.on("mousewheel",handleMouseWheel),$headerScroller.on("contextmenu",handleHeaderContextMenu).on("click",handleHeaderClick).on("mouseenter",".slick-header-column",handleHeaderMouseEnter).on("mouseleave",".slick-header-column",handleHeaderMouseLeave),$headerRowScroller.on("scroll",handleHeaderRowScroll),options.createFooterRow&&($footerRow.on("contextmenu",handleFooterContextMenu).on("click",handleFooterClick),$footerRowScroller.on("scroll",handleFooterRowScroll)),options.createPreHeaderPanel&&$preHeaderPanelScroller.on("scroll",handlePreHeaderPanelScroll),$focusSink.add($focusSink2).on("keydown",handleKeyDown),$canvas.on("keydown",handleKeyDown).on("click",handleClick).on("dblclick",handleDblClick).on("contextmenu",handleContextMenu).on("draginit",handleDragInit).on("dragstart",{distance:3},handleDragStart).on("drag",handleDrag).on("dragend",handleDragEnd).on("mouseenter",".slick-cell",handleMouseEnter).on("mouseleave",".slick-cell",handleMouseLeave),options.suppressCssChangesOnHiddenInit||restoreCssFromHiddenInit())}function cacheCssForHiddenInit(){$hiddenParents=$container.parents().addBack().not(":visible"),$hiddenParents.each(function(){var f={};for(var s in cssShow)f[s]=this.style[s],this.style[s]=cssShow[s];oldProps.push(f)})}function restoreCssFromHiddenInit(){$hiddenParents.each(function(f){var s=oldProps[f];for(var d in cssShow)this.style[d]=s[d]})}function hasFrozenColumns(){return options.frozenColumn>-1}function registerPlugin(f){plugins.unshift(f),f.init(self)}function unregisterPlugin(f){for(var s=plugins.length;s>=0;s--)if(plugins[s]===f){plugins[s].destroy&&plugins[s].destroy(),plugins.splice(s,1);break}}function getPluginByName(f){for(var s=plugins.length-1;s>=0;s--)if(plugins[s].pluginName===f)return plugins[s]}function setSelectionModel(f){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),selectionModel=f,selectionModel&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(f,s){return _getContainerElement(getCanvases(),f,s)}function getActiveCanvasNode(f){return setActiveCanvasNode(f),$activeCanvasNode[0]}function getCanvases(){return $canvas}function setActiveCanvasNode(f){f&&($activeCanvasNode=$(f.target).closest(".grid-canvas"))}function getViewportNode(f,s){return _getContainerElement(getViewports(),f,s)}function getViewports(){return $viewport}function getActiveViewportNode(f){return setActiveViewportNode(f),$activeViewportNode[0]}function setActiveViewportNode(f){f&&($activeViewportNode=$(f.target).closest(".slick-viewport"))}function _getContainerElement(f,s,d){if(f){s||(s=0),d||(d=0);var _=typeof s=="number"?s:getColumnIndex(s),S=hasFrozenRows&&d>=actualFrozenRow+(options.frozenBottom?0:1),T=hasFrozenColumns()&&_>options.frozenColumn;return f[(S?2:0)+(T?1:0)]}}function measureScrollbar(){var f=$('<div class="'+$viewport.className+'" style="position:absolute; top:-10000px; left:-10000px; overflow:auto; width:100px; height:100px;"></div>').appendTo("body"),s=$('<div style="width:200px; height:200px; overflow:auto;"></div>').appendTo(f),d={width:f[0].offsetWidth-f[0].clientWidth,height:f[0].offsetHeight-f[0].clientHeight};return s.remove(),f.remove(),d}function getHeadersWidth(){headersWidth=headersWidthL=headersWidthR=0;for(var f=!options.autoHeight,s=0,d=columns.length;s<d;s++){var _=columns[s].width;options.frozenColumn>-1&&s>options.frozenColumn?headersWidthR+=_:headersWidthL+=_}return f&&(options.frozenColumn>-1&&s>options.frozenColumn?headersWidthR+=scrollbarDimensions.width:headersWidthL+=scrollbarDimensions.width),hasFrozenColumns()?(headersWidthL=headersWidthL+1e3,headersWidthR=Math.max(headersWidthR,viewportW)+headersWidthL,headersWidthR+=scrollbarDimensions.width):(headersWidthL+=scrollbarDimensions.width,headersWidthL=Math.max(headersWidthL,viewportW)+1e3),headersWidth=headersWidthL+headersWidthR,Math.max(headersWidth,viewportW)+1e3}function getHeadersWidthL(){return headersWidthL=0,columns.forEach(function(f,s){options.frozenColumn>-1&&s>options.frozenColumn||(headersWidthL+=f.width)}),hasFrozenColumns()?headersWidthL+=1e3:(headersWidthL+=scrollbarDimensions.width,headersWidthL=Math.max(headersWidthL,viewportW)+1e3),headersWidthL}function getHeadersWidthR(){return headersWidthR=0,columns.forEach(function(f,s){options.frozenColumn>-1&&s>options.frozenColumn&&(headersWidthR+=f.width)}),hasFrozenColumns()&&(headersWidthR=Math.max(headersWidthR,viewportW)+getHeadersWidthL(),headersWidthR+=scrollbarDimensions.width),headersWidthR}function getCanvasWidth(){var f=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,s=columns.length;for(canvasWidthL=canvasWidthR=0;s--;)hasFrozenColumns()&&s>options.frozenColumn?canvasWidthR+=columns[s].width:canvasWidthL+=columns[s].width;var d=canvasWidthL+canvasWidthR;return options.fullWidthRows?Math.max(d,f):d}function updateCanvasWidth(f){var s=canvasWidth,d=canvasWidthL,_=canvasWidthR,S;canvasWidth=getCanvasWidth(),S=canvasWidth!==s||canvasWidthL!==d||canvasWidthR!==_,(S||hasFrozenColumns()||hasFrozenRows)&&($canvasTopL.width(canvasWidthL),getHeadersWidth(),$headerL.width(headersWidthL),$headerR.width(headersWidthR),hasFrozenColumns()?($canvasTopR.width(canvasWidthR),$paneHeaderL.width(canvasWidthL),$paneHeaderR.css("left",canvasWidthL),$paneHeaderR.css("width",viewportW-canvasWidthL),$paneTopL.width(canvasWidthL),$paneTopR.css("left",canvasWidthL),$paneTopR.css("width",viewportW-canvasWidthL),$headerRowScrollerL.width(canvasWidthL),$headerRowScrollerR.width(viewportW-canvasWidthL),$headerRowL.width(canvasWidthL),$headerRowR.width(canvasWidthR),options.createFooterRow&&($footerRowScrollerL.width(canvasWidthL),$footerRowScrollerR.width(viewportW-canvasWidthL),$footerRowL.width(canvasWidthL),$footerRowR.width(canvasWidthR)),options.createPreHeaderPanel&&$preHeaderPanel.width(canvasWidth),$viewportTopL.width(canvasWidthL),$viewportTopR.width(viewportW-canvasWidthL),hasFrozenRows&&($paneBottomL.width(canvasWidthL),$paneBottomR.css("left",canvasWidthL),$viewportBottomL.width(canvasWidthL),$viewportBottomR.width(viewportW-canvasWidthL),$canvasBottomL.width(canvasWidthL),$canvasBottomR.width(canvasWidthR))):($paneHeaderL.width("100%"),$paneTopL.width("100%"),$headerRowScrollerL.width("100%"),$headerRowL.width(canvasWidth),options.createFooterRow&&($footerRowScrollerL.width("100%"),$footerRowL.width(canvasWidth)),options.createPreHeaderPanel&&($preHeaderPanel.width("100%"),$preHeaderPanel.width(canvasWidth)),$viewportTopL.width("100%"),hasFrozenRows&&($viewportBottomL.width("100%"),$canvasBottomL.width(canvasWidthL))),viewportHasHScroll=canvasWidth>=viewportW-scrollbarDimensions.width),$headerRowSpacerL.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),$headerRowSpacerR.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),options.createFooterRow&&($footerRowSpacerL.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),$footerRowSpacerR.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0))),(S||f)&&applyColumnWidths()}function disableSelection(f){f&&f.jquery&&f.attr("unselectable","on").css("MozUserSelect","none").on("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){for(var f=1e6,s=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,d=$("<div style='display:none' />").appendTo(__doc__.body);;){var _=f*2;if(d.css("height",_),_>s||d.height()!==_)break;f=_}return d.remove(),f}function getUID(){return uid}function getHeaderColumnWidthDiff(){return headerColumnWidthDiff}function getScrollbarDimensions(){return scrollbarDimensions}function bindAncestorScrollEvents(){for(var f=hasFrozenRows&&!options.frozenBottom?$canvasBottomL[0]:$canvasTopL[0];(f=f.parentNode)!=__doc__.body&&f!=null;)if(f==$viewportTopL[0]||f.scrollWidth!=f.clientWidth||f.scrollHeight!=f.clientHeight){var s=$(f);$boundAncestors?$boundAncestors=$boundAncestors.add(s):$boundAncestors=s,s.on("scroll."+uid,handleActiveCellPositionChange)}}function unbindAncestorScrollEvents(){$boundAncestors&&($boundAncestors.off("scroll."+uid),$boundAncestors=null)}function updateColumnHeader(f,s,d){if(initialized){var _=getColumnIndex(f);if(_!=null){var S=columns[_],T=$headers.children().eq(_);T&&(s!==void 0&&(columns[_].name=s),d!==void 0&&(columns[_].toolTip=d),trigger(self.onBeforeHeaderCellDestroy,{node:T[0],column:S,grid:self}),T.attr("title",d||"").children().eq(0).html(s),trigger(self.onHeaderCellRendered,{node:T[0],column:S,grid:self}))}}}function getHeader(f){if(!f)return hasFrozenColumns()?$headers:$headerL;var s=getColumnIndex(f.id);return hasFrozenColumns()?s<=options.frozenColumn?$headerL:$headerR:$headerL}function getHeaderColumn(f){var s=typeof f=="number"?f:getColumnIndex(f),d=hasFrozenColumns()?s<=options.frozenColumn?$headerL:$headerR:$headerL,_=hasFrozenColumns()?s<=options.frozenColumn?s:s-options.frozenColumn-1:s,S=d.children().eq(_);return S&&S[0]}function getHeaderRow(){return hasFrozenColumns()?$headerRow:$headerRow[0]}function getFooterRow(){return hasFrozenColumns()?$footerRow:$footerRow[0]}function getPreHeaderPanel(){return $preHeaderPanel[0]}function getPreHeaderPanelRight(){return $preHeaderPanelR[0]}function getHeaderRowColumn(f){var s=typeof f=="number"?f:getColumnIndex(f),d;hasFrozenColumns()?s<=options.frozenColumn?d=$headerRowL:(d=$headerRowR,s-=options.frozenColumn+1):d=$headerRowL;var _=d.children().eq(s);return _&&_[0]}function getFooterRowColumn(f){var s=typeof f=="number"?f:getColumnIndex(f),d;hasFrozenColumns()?s<=options.frozenColumn?d=$footerRowL:(d=$footerRowR,s-=options.frozenColumn+1):d=$footerRowL;var _=d&&d.children().eq(s);return _&&_[0]}function createColumnFooter(){if(options.createFooterRow){$footerRow.find(".slick-footerrow-column").each(function(){var _=$(this).data("column");_&&trigger(self.onBeforeFooterRowCellDestroy,{node:this,column:_,grid:self})}),$footerRowL.empty(),$footerRowR.empty();for(var f=0;f<columns.length;f++){var s=columns[f],d=$("<div class='ui-state-default slick-footerrow-column l"+f+" r"+f+"'></div>").data("column",s).addClass(hasFrozenColumns()&&f<=options.frozenColumn?"frozen":"").appendTo(hasFrozenColumns()&&f>options.frozenColumn?$footerRowR:$footerRowL);trigger(self.onFooterRowCellRendered,{node:d[0],column:s,grid:self})}}}function createColumnGroupHeaders(){var f=0,s=!1;if(treeColumns.hasDepth()){for(var d=0;d<$groupHeadersL.length;d++){$groupHeadersL[d].empty(),$groupHeadersR[d].empty();var _=treeColumns.getColumnsInDepth(d);for(var S in _){var T=_[S];f+=T.extractColumns().length,hasFrozenColumns()&&d===0&&f-1===options.frozenColumn&&(s=!0),$("<div class='ui-state-default slick-group-header-column' />").html("<span class='slick-column-name'>"+T.name+"</span>").attr("id",""+uid+T.id).attr("title",T.toolTip||"").data("column",T).addClass(T.headerCssClass||"").addClass(hasFrozenColumns()&&f-1>options.frozenColumn?"frozen":"").appendTo(hasFrozenColumns()&&f-1>options.frozenColumn?$groupHeadersR[d]:$groupHeadersL[d])}if(hasFrozenColumns()&&d===0&&!s){$groupHeadersL[d].empty(),$groupHeadersR[d].empty(),alert("All columns of group should to be grouped!");break}}applyColumnGroupHeaderWidths()}}function createColumnHeaders(){function f(){$(this).addClass("ui-state-hover")}function s(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var J=$(this).data("column");J&&trigger(self.onBeforeHeaderCellDestroy,{node:this,column:J,grid:self})}),$headerL.empty(),$headerR.empty(),getHeadersWidth(),$headerL.width(headersWidthL),$headerR.width(headersWidthR),$headerRow.find(".slick-headerrow-column").each(function(){var J=$(this).data("column");J&&trigger(self.onBeforeHeaderRowCellDestroy,{node:this,column:J,grid:self})}),$headerRowL.empty(),$headerRowR.empty(),options.createFooterRow&&($footerRowL.find(".slick-footerrow-column").each(function(){var J=$(this).data("column");J&&trigger(self.onBeforeFooterRowCellDestroy,{node:this,column:J,grid:self})}),$footerRowL.empty(),hasFrozenColumns()&&($footerRowR.find(".slick-footerrow-column").each(function(){var J=$(this).data("column");J&&trigger(self.onBeforeFooterRowCellDestroy,{node:this,column:J,grid:self})}),$footerRowR.empty()));for(var d=0;d<columns.length;d++){var _=columns[d],S=hasFrozenColumns()?d<=options.frozenColumn?$headerL:$headerR:$headerL,T=hasFrozenColumns()?d<=options.frozenColumn?$headerRowL:$headerRowR:$headerRowL,F=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+_.name+"</span>").width(_.width-headerColumnWidthDiff).attr("id",""+uid+_.id).attr("title",_.toolTip||"").data("column",_).data("__doc__",__doc__).addClass(_.headerCssClass||"").addClass(hasFrozenColumns()&&d<=options.frozenColumn?"frozen":"").appendTo(S);if((options.enableColumnReorder||_.sortable)&&F.on("mouseenter",f).on("mouseleave",s),F.on("dragstart",(J,K)=>{K.target.style.zIndex=1,K.target.style.opacity=.6}).on("drag",(J,K)=>{K.target.style.left=1e3+(K.offsetX-K.originalX)+"px"}).on("dragend",(J,K)=>{if(Math.abs(K.deltaX)<5){K.target.style.opacity=1,K.target.style.zIndex="";return}const z=$(K.target).data("column");let oe=0;const se=[];let ae=0;for(let he of columns)se.push(ae),he===z&&(oe=ae),ae+=he.width;se.push(ae+1e3);const ge=[];let pe=oe+K.deltaX;pe<0&&ge.push(z);for(let he=0;he<columns.length;he++)columns[he]!==z&&ge.push(columns[he]),pe>se[he]&&pe<se[he+1]&&(ge.push(z),pe=-1e3);columns=ge,setColumns(columns)}),_.hasOwnProperty("headerCellAttrs")&&_.headerCellAttrs instanceof Object)for(var M in _.headerCellAttrs)_.headerCellAttrs.hasOwnProperty(M)&&F.attr(M,_.headerCellAttrs[M]);if(_.sortable&&(F.addClass("slick-header-sortable"),F.append("<span class='slick-sort-indicator"+(options.numberedMultiColumnSort&&!options.sortColNumberInSeparateSpan?" slick-sort-indicator-numbered":"")+"' />"),options.numberedMultiColumnSort&&options.sortColNumberInSeparateSpan&&F.append("<span class='slick-sort-indicator-numbered' />")),trigger(self.onHeaderCellRendered,{node:F[0],column:_,grid:self}),options.showHeaderRow){var P=$("<div class='ui-state-default slick-headerrow-column l"+d+" r"+d+"'></div>").data("column",_).addClass(hasFrozenColumns()&&d<=options.frozenColumn?"frozen":"").appendTo(T);trigger(self.onHeaderRowCellRendered,{node:P[0],column:_,grid:self})}if(options.createFooterRow&&options.showFooterRow){var H=$("<div class='ui-state-default slick-footerrow-column l"+d+" r"+d+"'></div>").data("column",_).appendTo($footerRow);trigger(self.onFooterRowCellRendered,{node:H[0],column:_,grid:self})}}setSortColumns(sortColumns),setupColumnResize(),options.enableColumnReorder&&(typeof options.enableColumnReorder=="function"?options.enableColumnReorder(self,$headers,headerColumnWidthDiff,setColumns,setupColumnResize,columns,getColumnIndex,uid,trigger):setupColumnReorder())}function setupColumnSort(){$headers.click(function(f){if(!columnResizeDragging&&(f.metaKey=f.metaKey||f.ctrlKey,!$(f.target).hasClass("slick-resizable-handle"))){var s=$(f.target).closest(".slick-header-column");if(s.length){var d=s.data("column");if(d.sortable){if(!getEditorLock().commitCurrentEdit())return;for(var _=null,S=0;S<sortColumns.length;S++)if(sortColumns[S].columnId==d.id){_=sortColumns[S],_.sortAsc=!_.sortAsc;break}var T=!!_;options.tristateMultiColumnSort?(_||(_={columnId:d.id,sortAsc:d.defaultSortAsc}),T&&_.sortAsc&&(sortColumns.splice(S,1),_=null),options.multiColumnSort||(sortColumns=[]),_&&(!T||!options.multiColumnSort)&&sortColumns.push(_)):f.metaKey&&options.multiColumnSort?_&&sortColumns.splice(S,1):((!f.shiftKey&&!f.metaKey||!options.multiColumnSort)&&(sortColumns=[]),_?sortColumns.length===0&&sortColumns.push(_):(_={columnId:d.id,sortAsc:d.defaultSortAsc},sortColumns.push(_))),setSortColumns(sortColumns),options.multiColumnSort?trigger(self.onSort,{multiColumnSort:!0,sortCols:$.map(sortColumns,function(F){return{columnId:columns[getColumnIndex(F.columnId)].id,sortCol:columns[getColumnIndex(F.columnId)],sortAsc:F.sortAsc}})},f):trigger(self.onSort,{multiColumnSort:!1,columnId:sortColumns.length>0?d.id:null,sortCol:sortColumns.length>0?d:null,sortAsc:sortColumns.length>0?sortColumns[0].sortAsc:!0},f)}}}})}function currentPositionInHeader(f){var s=0;return $headers.find(".slick-header-column").each(function(d){if(this.id==f)return s=d,!1}),s}function limitPositionInGroup(f){var s,d=0,_=0;return treeColumns.getColumnsInDepth($groupHeadersL.length-1).some(function(S){return d=_,_+=S.columns.length,S.columns.some(function(T){return T.id===f&&(s=S),s}),s}),_--,{start:d,end:_,group:s}}function columnPositionValidInGroup(f){var s=currentPositionInHeader(f[0].id),d=limitPositionInGroup(f.data("column").id),_=d.start<=s&&s<=d.end;return{limit:d,valid:_,message:_?"":'Column "'.concat(f.text(),'" can be reordered only within the "',d.group.name,'" group!')}}function setupColumnReorder(){$headers.filter(":ui-sortable").sortable("destroy");var f=null;function s(){$viewportScrollContainerX[0].scrollLeft=$viewportScrollContainerX[0].scrollLeft+10}function d(){$viewportScrollContainerX[0].scrollLeft=$viewportScrollContainerX[0].scrollLeft-10}var _;$headers.sortable({containment:"parent",distance:3,axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",start:function(S,T){T.placeholder.width(T.helper.outerWidth()-headerColumnWidthDiff),_=!hasFrozenColumns()||T.placeholder.offset().left+T.placeholder.width()>$viewportScrollContainerX.offset().left,$(T.helper).addClass("slick-header-column-active")},beforeStop:function(S,T){$(T.helper).removeClass("slick-header-column-active")},sort:function(S,T){_&&S.originalEvent.pageX>$container[0].clientWidth?f||(f=setInterval(s,100)):_&&S.originalEvent.pageX<$viewportScrollContainerX.offset().left?f||(f=setInterval(d,100)):(clearInterval(f),f=null)},stop:function(S,T){var F=!1;clearInterval(f),f=null;var M=null;if(treeColumns.hasDepth()){var P=columnPositionValidInGroup(T.item);M=P.limit,F=!P.valid,F&&alert(P.message)}if(F||!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return}var H=$headerL.sortable("toArray");H=H.concat($headerR.sortable("toArray"));for(var J=[],K=0;K<H.length;K++)J.push(columns[getColumnIndex(H[K].replace(uid,""))]);setColumns(J),trigger(self.onColumnsReordered,{impactedColumns:getImpactedColumns(M)}),S.stopPropagation(),setupColumnResize()}})}function getImpactedColumns(f){var s=[];if(f)for(var d=f.start;d<=f.end;d++)s.push(columns[d]);else s=columns;return s}function setupColumnResize(){var f,s,d,_,S,T,F,M,P,H=0;S=$headers.children(),S.find(".slick-resizable-handle").remove(),S.each(function(J,K){J>=columns.length||columns[J].resizable&&(M===void 0&&(M=J),P=J)}),M!==void 0&&S.each(function(J,K){J>=columns.length||J<M||options.forceFitColumns&&J>=P||($(K),$("<div class='slick-resizable-handle' />").data("__doc__",__doc__).appendTo(K).on("dragstart",function(z,oe){if(!getEditorLock().commitCurrentEdit())return!1;_=z.pageX,H=0,$(this).parent().addClass("slick-header-column-active");var se=null,ae=null;if(S.each(function(he,ve){he>=columns.length||(columns[he].previousWidth=$(ve).outerWidth())}),options.forceFitColumns)for(se=0,ae=0,f=J+1;f<columns.length;f++)d=columns[f],d.resizable&&(ae!==null&&(d.maxWidth?ae+=d.maxWidth-d.previousWidth:ae=null),se+=d.previousWidth-Math.max(d.minWidth||0,absoluteColumnMinWidth));var ge=0,pe=0;for(f=0;f<=J;f++)d=columns[f],d.resizable&&(pe!==null&&(d.maxWidth?pe+=d.maxWidth-d.previousWidth:pe=null),ge+=d.previousWidth-Math.max(d.minWidth||0,absoluteColumnMinWidth));se===null&&(se=1e5),ge===null&&(ge=1e5),ae===null&&(ae=1e5),pe===null&&(pe=1e5),F=_+Math.min(se,pe),T=_-Math.min(ge,ae)}).on("drag",function(z,oe){columnResizeDragging=!0;var se,ae=Math.min(F,Math.max(T,z.pageX))-_,ge,pe=0,he=0,ve=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;if(ae<0){for(ge=ae,f=J;f>=0;f--)d=columns[f],d.resizable&&(se=Math.max(d.minWidth||0,absoluteColumnMinWidth),ge&&d.previousWidth+ge<se?(ge+=d.previousWidth-se,d.width=se):(d.width=d.previousWidth+ge,ge=0));for(s=0;s<=J;s++)d=columns[s],hasFrozenColumns()&&s>options.frozenColumn?he+=d.width:pe+=d.width;if(options.forceFitColumns)for(ge=-ae,f=J+1;f<columns.length;f++)d=columns[f],d.resizable&&(ge&&d.maxWidth&&d.maxWidth-d.previousWidth<ge?(ge-=d.maxWidth-d.previousWidth,d.width=d.maxWidth):(d.width=d.previousWidth+ge,ge=0),hasFrozenColumns()&&f>options.frozenColumn?he+=d.width:pe+=d.width);else for(f=J+1;f<columns.length;f++)d=columns[f],hasFrozenColumns()&&f>options.frozenColumn?he+=d.width:pe+=d.width;if(options.forceFitColumns)for(ge=-ae,f=J+1;f<columns.length;f++)d=columns[f],d.resizable&&(ge&&d.maxWidth&&d.maxWidth-d.previousWidth<ge?(ge-=d.maxWidth-d.previousWidth,d.width=d.maxWidth):(d.width=d.previousWidth+ge,ge=0))}else{for(ge=ae,pe=0,he=0,f=J;f>=0;f--)if(d=columns[f],d.resizable)if(ge&&d.maxWidth&&d.maxWidth-d.previousWidth<ge)ge-=d.maxWidth-d.previousWidth,d.width=d.maxWidth;else{var be=d.previousWidth+ge,Re=canvasWidthL+ge;hasFrozenColumns()&&f<=options.frozenColumn?(be>H&&Re<ve-options.frozenRightViewportMinWidth&&(H=be),d.width=Re+options.frozenRightViewportMinWidth>ve?H:be):d.width=be,ge=0}for(s=0;s<=J;s++)d=columns[s],hasFrozenColumns()&&s>options.frozenColumn?he+=d.width:pe+=d.width;if(options.forceFitColumns)for(ge=-ae,f=J+1;f<columns.length;f++)d=columns[f],d.resizable&&(se=Math.max(d.minWidth||0,absoluteColumnMinWidth),ge&&d.previousWidth+ge<se?(ge+=d.previousWidth-se,d.width=se):(d.width=d.previousWidth+ge,ge=0),hasFrozenColumns()&&f>options.frozenColumn?he+=d.width:pe+=d.width);else for(f=J+1;f<columns.length;f++)d=columns[f],hasFrozenColumns()&&f>options.frozenColumn?he+=d.width:pe+=d.width}hasFrozenColumns()&&pe!=canvasWidthL&&($headerL.width(pe+1e3),$paneHeaderR.css("left",pe)),applyColumnHeaderWidths(),applyColumnGroupHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths(),trigger(self.onColumnsDrag,{triggeredByColumn:$(this).parent().attr("id").replace(uid,""),resizeHandle:$(this)})}).on("dragend",function(z,oe){$(this).parent().removeClass("slick-header-column-active");var se=$(this).parent().attr("id").replace(uid,"");trigger(self.onBeforeColumnsResize,{triggeredByColumn:se})===!0&&(applyColumnHeaderWidths(),applyColumnGroupHeaderWidths());var ae;for(f=0;f<columns.length;f++)d=columns[f],ae=$(S[f]).outerWidth(),d.previousWidth!==ae&&d.rerenderOnResize&&invalidateAllRows();updateCanvasWidth(!0),render(),trigger(self.onColumnsResized,{triggeredByColumn:se}),setTimeout(function(){columnResizeDragging=!1},300)}).on("dblclick",function(){var z=$(this).parent().attr("id").replace(uid,"");trigger(self.onColumnsResizeDblClick,{triggeredByColumn:z})}))})}function getVBoxDelta(f){var s=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=0;return f&&typeof f.css=="function"&&$.each(s,function(_,S){d+=parseFloat(f.css(S))||0}),d}function setFrozenOptions(){options.frozenColumn=options.frozenColumn>=0&&options.frozenColumn<columns.length?parseInt(options.frozenColumn):-1,options.frozenRow>-1?(hasFrozenRows=!0,frozenRowsHeight=options.frozenRow*options.rowHeight,getDataLength(),actualFrozenRow=options.frozenBottom?dataLength-options.frozenRow:options.frozenRow):hasFrozenRows=!1}function setPaneVisibility(){hasFrozenColumns()?($paneHeaderR.show(),$paneTopR.show(),hasFrozenRows?($paneBottomL.show(),$paneBottomR.show()):($paneBottomR.hide(),$paneBottomL.hide())):($paneHeaderR.hide(),$paneTopR.hide(),$paneBottomR.hide(),hasFrozenRows?$paneBottomL.show():($paneBottomR.hide(),$paneBottomL.hide()))}function setOverflow(){$viewportTopL.css({"overflow-x":hasFrozenColumns()?hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"hidden":"scroll":hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"hidden":"auto","overflow-y":!hasFrozenColumns()&&options.alwaysShowVerticalScroll?"scroll":hasFrozenColumns()?"hidden":hasFrozenRows?"scroll":"auto"}),$viewportTopR.css({"overflow-x":hasFrozenColumns()?hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"hidden":"scroll":hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"hidden":"auto","overflow-y":options.alwaysShowVerticalScroll?"scroll":(hasFrozenColumns(),hasFrozenRows?"scroll":"auto")}),$viewportBottomL.css({"overflow-x":hasFrozenColumns()?hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"scroll":"auto":(hasFrozenRows&&!options.alwaysAllowHorizontalScroll,"auto"),"overflow-y":!hasFrozenColumns()&&options.alwaysShowVerticalScroll?"scroll":hasFrozenColumns()?"hidden":hasFrozenRows?"scroll":"auto"}),$viewportBottomR.css({"overflow-x":hasFrozenColumns()?hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"scroll":"auto":(hasFrozenRows&&!options.alwaysAllowHorizontalScroll,"auto"),"overflow-y":options.alwaysShowVerticalScroll?"scroll":(hasFrozenColumns(),"auto")}),options.viewportClass&&($viewportTopL.toggleClass(options.viewportClass,!0),$viewportTopR.toggleClass(options.viewportClass,!0),$viewportBottomL.toggleClass(options.viewportClass,!0),$viewportBottomR.toggleClass(options.viewportClass,!0))}function setScroller(){hasFrozenColumns()?($headerScrollContainer=$headerScrollerR,$headerRowScrollContainer=$headerRowScrollerR,$footerRowScrollContainer=$footerRowScrollerR,hasFrozenRows?options.frozenBottom?($viewportScrollContainerX=$viewportBottomR,$viewportScrollContainerY=$viewportTopR):$viewportScrollContainerX=$viewportScrollContainerY=$viewportBottomR:$viewportScrollContainerX=$viewportScrollContainerY=$viewportTopR):($headerScrollContainer=$headerScrollerL,$headerRowScrollContainer=$headerRowScrollerL,$footerRowScrollContainer=$footerRowScrollerL,hasFrozenRows?options.frozenBottom?($viewportScrollContainerX=$viewportBottomL,$viewportScrollContainerY=$viewportTopL):$viewportScrollContainerX=$viewportScrollContainerY=$viewportBottomL:$viewportScrollContainerX=$viewportScrollContainerY=$viewportTopL)}function measureCellPaddingAndBorder(){var f,s=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],_=$.fn.jquery.split(".");jQueryNewWidthBehaviour=_[0]==1&&_[1]>=8||_[0]>=2,f=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,f.css("box-sizing")!="border-box"&&f.css("-moz-box-sizing")!="border-box"&&f.css("-webkit-box-sizing")!="border-box"&&($.each(s,function(T,F){headerColumnWidthDiff+=parseFloat(f.css(F))||0}),$.each(d,function(T,F){headerColumnHeightDiff+=parseFloat(f.css(F))||0})),f.remove();var S=$("<div class='slick-row' />").appendTo($canvas);f=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(S),cellWidthDiff=cellHeightDiff=0,f.css("box-sizing")!="border-box"&&f.css("-moz-box-sizing")!="border-box"&&f.css("-webkit-box-sizing")!="border-box"&&($.each(s,function(T,F){cellWidthDiff+=parseFloat(f.css(F))||0}),$.each(d,function(T,F){cellHeightDiff+=parseFloat(f.css(F))||0})),S.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet'/>").appendTo(__doc__.head);for(var f=options.rowHeight-cellHeightDiff,s=["."+uid+" .slick-group-header-column { left: 1000px; }","."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-preheader-panel { height:"+options.preHeaderPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-footerrow-columns { height:"+options.footerRowHeight+"px; }","."+uid+" .slick-cell { height:"+f+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"],d=0;d<columns.length;d++)s.push("."+uid+" .l"+d+" { }"),s.push("."+uid+" .r"+d+" { }");$style[0].styleSheet?$style[0].styleSheet.cssText=s.join(" "):$style[0].appendChild(__doc__.createTextNode(s.join(" ")))}function getColumnCssRules(f){var s;if(!stylesheet){var d=__doc__.styleSheets;for(let M=0;M<d.length;M++){if((d[M].ownerNode||d[M].owningElement)==$style[0]){stylesheet=d[M];break}if(d[M].cssRules[0]&&d[M].cssRules[0].selectorText&&d[M].cssRules[0].selectorText.includes(uid)){stylesheet=d[M];break}}if(!stylesheet)throw new Error("SlickGrid Cannot find stylesheet.");columnCssRulesL=[],columnCssRulesR=[];var _=stylesheet.cssRules||stylesheet.rules,S,T;for(s=0;s<_.length;s++){var F=_[s].selectorText;(S=/\.l\d+/.exec(F))?(T=parseInt(S[0].substr(2,S[0].length-2),10),columnCssRulesL[T]=_[s]):(S=/\.r\d+/.exec(F))&&(T=parseInt(S[0].substr(2,S[0].length-2),10),columnCssRulesR[T]=_[s])}}return{left:columnCssRulesL[f],right:columnCssRulesR[f]}}function removeCssRules(){$style.remove(),stylesheet=null}function destroy(f){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{});for(var s=plugins.length;s--;)unregisterPlugin(plugins[s]);options.enableColumnReorder&&$headers.filter(":ui-sortable").sortable("destroy"),unbindAncestorScrollEvents(),$container.off(".slickgrid"),removeCssRules(),$canvas.off(),$viewport.off(),$headerScroller.off(),$headerRowScroller.off(),$footerRow&&$footerRow.off(),$footerRowScroller&&$footerRowScroller.off(),$preHeaderPanelScroller&&$preHeaderPanelScroller.off(),$focusSink.off(),$(".slick-resizable-handle").off(),$(".slick-header-column").off(),$container.empty().removeClass(uid),f&&destroyAllElements()}function destroyAllElements(){$activeCanvasNode=null,$activeViewportNode=null,$boundAncestors=null,$canvas=null,$canvasTopL=null,$canvasTopR=null,$canvasBottomL=null,$canvasBottomR=null,$container=null,$focusSink=null,$focusSink2=null,$groupHeadersL=null,$groupHeadersR=null,$headerL=null,$headerR=null,$headers=null,$headerRow=null,$headerRowL=null,$headerRowR=null,$headerRowSpacerL=null,$headerRowSpacerR=null,$headerRowScrollContainer=null,$headerRowScroller=null,$headerRowScrollerL=null,$headerRowScrollerR=null,$headerScrollContainer=null,$headerScroller=null,$headerScrollerL=null,$headerScrollerR=null,$hiddenParents=null,$footerRow=null,$footerRowL=null,$footerRowR=null,$footerRowSpacerL=null,$footerRowSpacerR=null,$footerRowScroller=null,$footerRowScrollerL=null,$footerRowScrollerR=null,$footerRowScrollContainer=null,$preHeaderPanel=null,$preHeaderPanelR=null,$preHeaderPanelScroller=null,$preHeaderPanelScrollerR=null,$preHeaderPanelSpacer=null,$topPanel=null,$topPanelScroller=null,$style=null,$topPanelScrollerL=null,$topPanelScrollerR=null,$topPanelL=null,$topPanelR=null,$paneHeaderL=null,$paneHeaderR=null,$paneTopL=null,$paneTopR=null,$paneBottomL=null,$paneBottomR=null,$viewport=null,$viewportTopL=null,$viewportTopR=null,$viewportBottomL=null,$viewportBottomR=null,$viewportScrollContainerX=null,$viewportScrollContainerY=null}var canvas=null,canvas_context=null;function autosizeColumn(f,s){var d=f;if(typeof f=="number")d=columns[f];else if(typeof f=="string")for(var _=0;_<columns.length;_++)columns[_].Id===f&&(d=columns[_]);var S=$(getCanvasNode(0,0));getColAutosizeWidth(d,S,s)}function autosizeColumns(f,s){if(f=f||options.autosizeColsMode,f===Slick.GridAutosizeColsMode.LegacyForceFit||f===Slick.GridAutosizeColsMode.LegacyOff){legacyAutosizeColumns();return}if(f!==Slick.GridAutosizeColsMode.None){canvas=__doc__.createElement("canvas"),canvas&&canvas.getContext&&(canvas_context=canvas.getContext("2d"));var d=$(getCanvasNode(0,0)),_=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,S,T,F,M,P=0,H=0,J=0,K=0,z=0;for(S=0;S<columns.length;S++)T=columns[S],getColAutosizeWidth(T,d,s),z+=T.autoSize.autosizeMode===Slick.ColAutosizeMode.Locked?T.width:0,K+=T.autoSize.autosizeMode===Slick.ColAutosizeMode.Locked?T.width:T.minWidth,P+=T.autoSize.widthPx,H+=T.autoSize.sizeToRemaining?0:T.autoSize.widthPx,J+=T.autoSize.sizeToRemaining&&T.minWidth||0;var oe=P-H;if(f===Slick.GridAutosizeColsMode.FitViewportToCols){var se=P+scrollbarDimensions.width;f=Slick.GridAutosizeColsMode.IgnoreViewport,options.viewportMaxWidthPx&&se>options.viewportMaxWidthPx?(se=options.viewportMaxWidthPx,f=Slick.GridAutosizeColsMode.FitColsToViewport):options.viewportMinWidthPx&&se<options.viewportMinWidthPx&&(se=options.viewportMinWidthPx,f=Slick.GridAutosizeColsMode.FitColsToViewport),$container.width(se)}if(f===Slick.GridAutosizeColsMode.FitColsToViewport)if(oe>0&&H<_-J)for(S=0;S<columns.length;S++){T=columns[S];var ae=_-H;T.autoSize.sizeToRemaining?F=ae*T.autoSize.widthPx/oe:F=T.autoSize.widthPx,T.rerenderOnResize&&T.width!=F&&(M=!0),T.width=F}else if(options.viewportSwitchToScrollModeWidthPercent&&H+J>_*options.viewportSwitchToScrollModeWidthPercent/100||K>_)f=Slick.GridAutosizeColsMode.IgnoreViewport;else{var ge=H-z,pe=_-z-J;for(S=0;S<columns.length;S++)T=columns[S],F=T.width,T.autoSize.autosizeMode!==Slick.ColAutosizeMode.Locked&&(T.autoSize.sizeToRemaining?F=T.minWidth:(F=pe/ge*T.autoSize.widthPx,F<T.minWidth&&(F=T.minWidth),ge-=T.autoSize.widthPx,pe-=F)),T.rerenderOnResize&&T.width!=F&&(M=!0),T.width=F}if(f===Slick.GridAutosizeColsMode.IgnoreViewport)for(S=0;S<columns.length;S++)F=columns[S].autoSize.widthPx,columns[S].rerenderOnResize&&columns[S].width!=F&&(M=!0),columns[S].width=F;reRenderColumns(M)}}function getColAutosizeWidth(f,s,d){var _=f.autoSize;if(_.widthPx=f.width,!(_.autosizeMode===Slick.ColAutosizeMode.Locked||_.autosizeMode===Slick.ColAutosizeMode.Guide)){var S=getDataLength();if(_.autosizeMode===Slick.ColAutosizeMode.ContentIntelligent){var T=_.colDataTypeOf,F;if(S>0){var M=getDataItem(0);M&&(F=M[f.field],T=typeof F,T==="object"&&(F instanceof Date&&(T="date"),typeof moment<"u"&&F instanceof moment&&(T="moment")))}T==="boolean"&&(_.colValueArray=[!0,!1]),T==="number"&&(_.valueFilterMode=Slick.ValueFilterMode.GetGreatestAndSub,_.rowSelectionMode=Slick.RowSelectionMode.AllRows),T==="string"&&(_.valueFilterMode=Slick.ValueFilterMode.GetLongestText,_.rowSelectionMode=Slick.RowSelectionMode.AllRows,_.allowAddlPercent=5),T==="date"&&(_.colValueArray=[new Date(2009,8,30,12,20,20)]),T==="moment"&&typeof moment<"u"&&(_.colValueArray=[moment([2009,8,30,12,20,20])])}var P=getColContentSize(f,s,d),H=_.allowAddlPercent?1+_.allowAddlPercent/100:1;P=P*H+options.autosizeColPaddingPx,f.minWidth&&P<f.minWidth&&(P=f.minWidth),f.maxWidth&&P>f.maxWidth&&(P=f.maxWidth),_.widthPx=P}}function getColContentSize(f,s,d){var _=f.autoSize,S=1,T,F,M=0,P=0;if(_.ignoreHeaderText||(P=getColHeaderWidth(f)),_.colValueArray)return M=getColWidth(f,s,_.colValueArray),Math.max(P,M);var H=getData();H.getItems&&(H=H.getItems());var J=(d?_.rowSelectionModeOnInit:void 0)||_.rowSelectionMode;if(J===Slick.RowSelectionMode.FirstRow&&(H=H.slice(0,1)),J===Slick.RowSelectionMode.LastRow&&(H=H.slice(H.length-1,H.length)),J===Slick.RowSelectionMode.FirstNRows&&(H=H.slice(0,_.rowSelectionCount)),_.valueFilterMode===Slick.ValueFilterMode.DeDuplicate){var K={};for(T=0,F=H.length;T<F;T++)K[H[T][f.field]]=!0;if(Object.keys)H=Object.keys(K);else{H=[];for(var T in K)H.push(T)}}if(_.valueFilterMode===Slick.ValueFilterMode.GetGreatestAndSub){var z,oe,se=0;for(T=0,F=H.length;T<F;T++)z=H[T][f.field],Math.abs(z)>se&&(oe=z,se=Math.abs(z));oe=""+oe,oe=Array(oe.length+1).join("9"),oe=+oe,H=[oe]}if(_.valueFilterMode===Slick.ValueFilterMode.GetLongestTextAndSub){var z,ae=0;for(T=0,F=H.length;T<F;T++)z=H[T][f.field],(z||"").length>ae&&(ae=z.length);z=Array(ae+1).join("m"),S=options.autosizeTextAvgToMWidthRatio,H=[z]}if(_.valueFilterMode===Slick.ValueFilterMode.GetLongestText){var z,ae=0,ge=0;for(T=0,F=H.length;T<F;T++)z=H[T][f.field],(z||"").length>ae&&(ae=z.length,ge=T);z=H[ge][f.field],H=[z]}return M=getColWidth(f,s,H)*S,Math.max(P,M)}function getColWidth(f,s,d){var _=getColumnIndex(f.id),S=$('<div class="slick-row ui-widget-content"></div>'),T=$('<div class="slick-cell"></div>');T.css({position:"absolute",visibility:"hidden","text-overflow":"initial","white-space":"nowrap"}),S.append(T),s.append(S);var F,M=0,P,H,J,K;return canvas_context&&f.autoSize.widthEvalMode===Slick.WidthEvalMode.CanvasTextSize?(canvas_context.font=T.css("font-size")+" "+T.css("font-family"),$(d).each(function(z,oe){K=Array.isArray(oe)?oe[f.field]:oe,P=""+K,F=P?canvas_context.measureText(P).width:0,F>M&&(M=F,H=P)}),T.html(H),F=T.outerWidth(),S.remove(),T=null,F):($(d).each(function(z,oe){K=Array.isArray(oe)?oe[f.field]:oe,f.formatterOverride?J=f.formatterOverride(z,_,K,f,oe,self):f.formatter?J=f.formatter(z,_,K,f,oe,self):J=""+K,applyFormatResultToCellNode(J,T[0]),F=T.outerWidth(),F>M&&(M=F)}),S.remove(),T=null,M)}function getColHeaderWidth(f){var s=0,d=getUID()+f.id,_=__doc__.getElementById(d),S=d+"_";if(_){var T=_.cloneNode(!0);T.id=S,T.style.cssText="position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;",_.parentNode.insertBefore(T,_),s=T.offsetWidth,T.parentNode.removeChild(T)}else{var F=getHeader(f);_=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+f.name+"</span>").attr("id",S).css({position:"absolute",visibility:"hidden",right:"auto","text-overflow:":"initial","white-space":"nowrap"}).addClass(f.headerCssClass||"").appendTo(F),s=_[0].offsetWidth,F[0].removeChild(_[0])}return s}function legacyAutosizeColumns(){var f,s,d=[],_=0,S=0,T,F=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(f=0;f<columns.length;f++)s=columns[f],d.push(s.width),S+=s.width,s.resizable&&(_+=s.width-Math.max(s.minWidth,absoluteColumnMinWidth));for(T=S;S>F&&_;){var M=(S-F)/_;for(f=0;f<columns.length&&S>F;f++){s=columns[f];var P=d[f];if(!(!s.resizable||P<=s.minWidth||P<=absoluteColumnMinWidth)){var H=Math.max(s.minWidth,absoluteColumnMinWidth),J=Math.floor(M*(P-H))||1;J=Math.min(J,P-H),S-=J,_-=J,d[f]-=J}}if(T<=S)break;T=S}for(T=S;S<F;){var K=F/S;for(f=0;f<columns.length&&S<F;f++){s=columns[f];var z=d[f],oe;!s.resizable||s.maxWidth<=z?oe=0:oe=Math.min(Math.floor(K*z)-z,s.maxWidth-z||1e6)||1,S+=oe,d[f]+=S<=F?oe:0}if(T>=S)break;T=S}var se=!1;for(f=0;f<columns.length;f++)columns[f].rerenderOnResize&&columns[f].width!=d[f]&&(se=!0),columns[f].width=d[f];reRenderColumns(se)}function reRenderColumns(f){applyColumnHeaderWidths(),applyColumnGroupHeaderWidths(),updateCanvasWidth(!0),trigger(self.onAutosizeColumns,{columns}),f&&(invalidateAllRows(),render())}function trigger(f,s,d){return d=d||new Slick.EventData,s=s||{},s.grid=self,f.notify(s,d,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(f){return columnsById[f]}function applyColumnGroupHeaderWidths(){if(treeColumns.hasDepth())for(var f=$groupHeadersL.length-1;f>=0;f--)treeColumns.getColumnsInDepth(f),$().add($groupHeadersL[f]).add($groupHeadersR[f]).each(function(s){var d=$(this),_=0;d.width(s===0?getHeadersWidthL():getHeadersWidthR()),d.children().each(function(){var S=$(this),T=$(this).data("column");T.width=0,T.columns.forEach(function(){var F=d.next().children(":eq("+_+++")");T.width+=F.outerWidth()}),S.width(T.width-headerColumnWidthDiff)})})}function applyColumnHeaderWidths(){if(initialized){for(var f,s=0,d=$headers.children(),_=columns.length;s<_;s++)f=$(d[s]),jQueryNewWidthBehaviour?f.outerWidth()!==columns[s].width&&f.outerWidth(columns[s].width):f.width()!==columns[s].width-headerColumnWidthDiff&&f.width(columns[s].width-headerColumnWidthDiff);updateColumnCaches()}}function applyColumnWidths(){for(var f=0,s,d,_=0;_<columns.length;_++)s=columns[_].width,d=getColumnCssRules(_),d.left.style.left=f+"px",d.right.style.right=(options.frozenColumn!=-1&&_>options.frozenColumn?canvasWidthR:canvasWidthL)-f-s+"px",options.frozenColumn==_?f=0:f+=columns[_].width}function setSortColumn(f,s){setSortColumns([{columnId:f,sortAsc:s}])}function setSortColumns(f){sortColumns=f;var s=options.numberedMultiColumnSort&&sortColumns.length>1,d=$headers.children();d.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),d.find(".slick-sort-indicator-numbered").text(""),$.each(sortColumns,function(_,S){S.sortAsc==null&&(S.sortAsc=!0);var T=getColumnIndex(S.columnId);T!=null&&(d.eq(T).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(S.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc"),s&&d.eq(T).find(".slick-sort-indicator-numbered").text(_+1))})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(f,s){var d=selectedRows.slice(0);selectedRows=[];for(var _={},S=0;S<s.length;S++)for(var T=s[S].fromRow;T<=s[S].toRow;T++){_[T]||(selectedRows.push(T),_[T]={});for(var F=s[S].fromCell;F<=s[S].toCell;F++)canCellBeSelected(T,F)&&(_[T][columns[F].id]=options.selectedCellCssClass)}setCellCssStyles(options.selectedCellCssClass,_),simpleArrayEquals(d,selectedRows)&&trigger(self.onSelectedRowsChanged,{rows:getSelectedRows(),previousSelectedRows:d},f)}function simpleArrayEquals(f,s){return Array.isArray(f)&&Array.isArray(s)&&s.sort().toString()!==f.sort().toString()}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[],columnPosRight=[];for(var f=0,s=0,d=columns.length;s<d;s++)columnPosLeft[s]=f,columnPosRight[s]=f+columns[s].width,options.frozenColumn==s?f=0:f+=columns[s].width}function updateColumnProps(){columnsById={};for(var f=0;f<columns.length;f++){columns[f].width&&(columns[f].widthRequest=columns[f].width);var s=columns[f]=$.extend({},columnDefaults,columns[f]);s.autoSize=$.extend({},columnAutosizeDefaults,s.autoSize),columnsById[s.id]=f,s.minWidth&&s.width<s.minWidth&&(s.width=s.minWidth),s.maxWidth&&s.width>s.maxWidth&&(s.width=s.maxWidth),s.resizable}}function setColumns(f){var s=new Slick.TreeColumns(f);s.hasDepth()?(treeColumns=s,columns=treeColumns.extractColumns()):columns=f,updateColumnProps(),updateColumnCaches(),initialized&&(setPaneVisibility(),setOverflow(),invalidateAllRows(),createColumnHeaders(),createColumnGroupHeaders(),createColumnFooter(),removeCssRules(),createCssRules(),resizeCanvas(),updateCanvasWidth(),applyColumnHeaderWidths(),applyColumnWidths(),handleScroll())}function getOptions(){return options}function setOptions(f,s,d,_){if(getEditorLock().commitCurrentEdit()){makeActiveCellNormal(),f.showColumnHeader!==void 0&&setColumnHeaderVisibility(f.showColumnHeader),options.enableAddRow!==f.enableAddRow&&invalidateRow(getDataLength());var S=$.extend(!0,{},options);if(options=$.extend(options,f),trigger(self.onSetOptions,{optionsBefore:S,optionsAfter:options}),validateAndEnforceOptions(),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),s||render(),setFrozenOptions(),setScroller(),_||setOverflow(),zombieRowNodeFromLastMouseWheelEvent=null,d||setColumns(treeColumns.extractColumns()),options.enableMouseWheelScrollHandler&&$viewport&&jQuery.fn.mousewheel){var T=$._data($viewport[0],"events");(!T||!T.mousewheel)&&$viewport.on("mousewheel",handleMouseWheel)}else options.enableMouseWheelScrollHandler===!1&&$viewport.off("mousewheel")}}function validateAndEnforceOptions(){options.autoHeight&&(options.leaveSpaceForNewRows=!1),options.forceFitColumns&&(options.autosizeColsMode=Slick.GridAutosizeColsMode.LegacyForceFit,console.log("forceFitColumns option is deprecated - use autosizeColsMode"))}function setData(f,s){data=f,invalidateAllRows(),updateRowCount(),s&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data&&data.length||0}function getDataLengthIncludingAddNew(){return getDataLength()+(options.enableAddRow&&(!pagingActive||pagingIsLastPage)?1:0)}function getDataItem(f){return data.getItem?data.getItem(f):data[f]}function getTopPanel(){return $topPanel[0]}function setTopPanelVisibility(f,s){var d=s!==!1;options.showTopPanel!=f&&(options.showTopPanel=f,f?d?$topPanelScroller.slideDown("fast",resizeCanvas):($topPanelScroller.show(),resizeCanvas()):d?$topPanelScroller.slideUp("fast",resizeCanvas):($topPanelScroller.hide(),resizeCanvas()))}function setHeaderRowVisibility(f,s){var d=s!==!1;options.showHeaderRow!=f&&(options.showHeaderRow=f,f?d?$headerRowScroller.slideDown("fast",resizeCanvas):($headerRowScroller.show(),resizeCanvas()):d?$headerRowScroller.slideUp("fast",resizeCanvas):($headerRowScroller.hide(),resizeCanvas()))}function setColumnHeaderVisibility(f,s){options.showColumnHeader!=f&&(options.showColumnHeader=f,f?s?$headerScroller.slideDown("fast",resizeCanvas):($headerScroller.show(),resizeCanvas()):s?$headerScroller.slideUp("fast",resizeCanvas):($headerScroller.hide(),resizeCanvas()))}function setFooterRowVisibility(f,s){var d=s!==!1;options.showFooterRow!=f&&(options.showFooterRow=f,f?d?$footerRowScroller.slideDown("fast",resizeCanvas):($footerRowScroller.show(),resizeCanvas()):d?$footerRowScroller.slideUp("fast",resizeCanvas):($footerRowScroller.hide(),resizeCanvas()))}function setPreHeaderPanelVisibility(f,s){var d=s!==!1;options.showPreHeaderPanel!=f&&(options.showPreHeaderPanel=f,f?d?($preHeaderPanelScroller.slideDown("fast",resizeCanvas),$preHeaderPanelScrollerR.slideDown("fast",resizeCanvas)):($preHeaderPanelScroller.show(),$preHeaderPanelScrollerR.show(),resizeCanvas()):d?($preHeaderPanelScroller.slideUp("fast",resizeCanvas),$preHeaderPanelScrollerR.slideUp("fast",resizeCanvas)):($preHeaderPanelScroller.hide(),$preHeaderPanelScrollerR.hide(),resizeCanvas()))}function getContainerNode(){return $container.get(0)}function getRowTop(f){return options.rowHeight*f-offset}function getRowFromPosition(f){return Math.floor((f+offset)/options.rowHeight)}function scrollTo(f){f=Math.max(f,0),f=Math.min(f,th-$viewportScrollContainerY.height()+(viewportHasHScroll||hasFrozenColumns()?scrollbarDimensions.height:0));var s=offset;page=Math.min(n-1,Math.floor(f/ph)),offset=Math.round(page*cj);var d=f-offset;if(offset!=s){var _=getVisibleRange(d);cleanupRows(_),updateRowPositions()}prevScrollTop!=d&&(vScrollDir=prevScrollTop+s<d+offset?1:-1,lastRenderedScrollTop=scrollTop=prevScrollTop=d,hasFrozenColumns()&&($viewportTopL[0].scrollTop=d),hasFrozenRows&&($viewportBottomL[0].scrollTop=$viewportBottomR[0].scrollTop=d),$viewportScrollContainerY[0].scrollTop=d,trigger(self.onViewportChanged,{}))}function defaultFormatter(f,s,d,_,S,T){return d==null?"":(d+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getFormatter(f,s){var d=data.getItemMetadata&&data.getItemMetadata(f),_=d&&d.columns&&(d.columns[s.id]||d.columns[getColumnIndex(s.id)]);return _&&_.formatter||d&&d.formatter||s.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(s)||options.defaultFormatter}function getEditor(f,s){var d=columns[s],_=data.getItemMetadata&&data.getItemMetadata(f),S=_&&_.columns;return S&&S[d.id]&&S[d.id].editor!==void 0?S[d.id].editor:S&&S[s]&&S[s].editor!==void 0?S[s].editor:d.editor||options.editorFactory&&options.editorFactory.getEditor(d)}function getDataItemValueForColumn(f,s){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(f,s):f[s.field]}function appendRowHtml(f,s,d,_,S){var T=getDataItem(d),F=d<S&&!T,M="slick-row"+(hasFrozenRows&&d<=options.frozenRow?" frozen":"")+(F?" loading":"")+(d===activeRow&&options.showCellSelection?" active":"")+(d%2==1?" odd":" even");T||(M+=" "+options.addNewRowCssClass);var P=data.getItemMetadata&&data.getItemMetadata(d);P&&P.cssClasses&&(M+=" "+P.cssClasses);var H=getFrozenRowOffset(d),J="<div class='ui-widget-content "+M+"' style='top:"+(getRowTop(d)-H)+"px'>";f.push(J),hasFrozenColumns()&&s.push(J);for(var K,z,oe=0,se=columns.length;oe<se;oe++){if(z=columns[oe],K=1,P&&P.columns){var ae=P.columns[z.id]||P.columns[oe];K=ae&&ae.colspan||1,K==="*"&&(K=se-oe)}if(columnPosRight[Math.min(se-1,oe+K-1)]>_.leftPx){if(!z.alwaysRenderColumn&&columnPosLeft[oe]>_.rightPx)break;hasFrozenColumns()&&oe>options.frozenColumn?appendCellHtml(s,d,oe,K,T):appendCellHtml(f,d,oe,K,T)}else(z.alwaysRenderColumn||hasFrozenColumns()&&oe<=options.frozenColumn)&&appendCellHtml(f,d,oe,K,T);K>1&&(oe+=K-1)}f.push("</div>"),hasFrozenColumns()&&s.push("</div>")}function appendCellHtml(f,s,d,_,S){var T=columns[d],F="slick-cell l"+d+" r"+Math.min(columns.length-1,d+_-1)+(T.cssClass?" "+T.cssClass:"");hasFrozenColumns()&&d<=options.frozenColumn&&(F+=" frozen"),s===activeRow&&d===activeCell&&options.showCellSelection&&(F+=" active");for(var M in cellCssClasses)cellCssClasses[M][s]&&cellCssClasses[M][s][T.id]&&(F+=" "+cellCssClasses[M][s][T.id]);var P=null,H="";S&&(P=getDataItemValueForColumn(S,T),H=getFormatter(s,T)(s,d,P,T,S,self),H==null&&(H=""));var J=trigger(self.onBeforeAppendCell,{row:s,cell:d,value:P,dataContext:S})||"";J+=H&&H.addClasses?(J?" ":"")+H.addClasses:"";var K=H&&H.toolTip?"title='"+H.toolTip+"'":"",z="";if(T.hasOwnProperty("cellAttrs")&&T.cellAttrs instanceof Object)for(var M in T.cellAttrs)T.cellAttrs.hasOwnProperty(M)&&(z+=" "+M+'="'+T.cellAttrs[M]+'" ');f.push("<div class='"+F+(J?" "+J:"")+"' "+K+z+">"),S&&f.push(Object.prototype.toString.call(H)!=="[object Object]"?H:H.text),f.push("</div>"),rowsCache[s].cellRenderQueue.push(d),rowsCache[s].cellColSpans[d]=_}function cleanupRows(f){for(var s in rowsCache){var d=!0;hasFrozenRows&&(options.frozenBottom&&s>=actualFrozenRow||!options.frozenBottom&&s<=actualFrozenRow)&&(d=!1),(s=parseInt(s,10))!==activeRow&&(s<f.top||s>f.bottom)&&d&&removeRowFromCache(s)}options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){currentEditor&&makeActiveCellNormal();for(var f in rowsCache)removeRowFromCache(f);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}function removeRowFromCache(f){var s=rowsCache[f];s&&(rowNodeFromLastMouseWheelEvent==s.rowNode[0]||hasFrozenColumns()&&rowNodeFromLastMouseWheelEvent==s.rowNode[1]?(s.rowNode.hide(),zombieRowNodeFromLastMouseWheelEvent=s.rowNode):s.rowNode.each(function(){this.parentElement.removeChild(this)}),delete rowsCache[f],delete postProcessedRows[f],renderedRows--,counter_rows_removed++)}function invalidateRows(f){var s,d;if(!(!f||!f.length)){for(vScrollDir=0,d=f.length,s=0;s<d;s++)currentEditor&&activeRow===f[s]&&makeActiveCellNormal(),rowsCache[f[s]]&&removeRowFromCache(f[s]);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}}function invalidateRow(f){!f&&f!==0||invalidateRows([f])}function applyFormatResultToCellNode(f,s,d){if(f==null&&(f=""),Object.prototype.toString.call(f)!=="[object Object]"){s.innerHTML=f;return}s.innerHTML=f.text,f.removeClasses&&!d&&$(s).removeClass(f.removeClasses),f.addClasses&&$(s).addClass(f.addClasses),f.toolTip&&$(s).attr("title",f.toolTip)}function updateCell(f,s){var d=getCellNode(f,s);if(d){var _=columns[s],S=getDataItem(f);if(currentEditor&&activeRow===f&&activeCell===s)currentEditor.loadValue(S);else{var T=S?getFormatter(f,_)(f,s,getDataItemValueForColumn(S,_),_,S,self):"";applyFormatResultToCellNode(T,d),invalidatePostProcessingResults(f)}}}function updateRow(f){var s=rowsCache[f];if(s){ensureCellNodesInRowsCache(f);var d,_=getDataItem(f);for(var S in s.cellNodesByColumnIdx)if(s.cellNodesByColumnIdx.hasOwnProperty(S)){S=S|0;var T=columns[S],F=s.cellNodesByColumnIdx[S][0];f===activeRow&&S===activeCell&&currentEditor?currentEditor.loadValue(_):_?(d=getFormatter(f,T)(f,S,getDataItemValueForColumn(_,T),T,_,self),applyFormatResultToCellNode(d,F)):F.innerHTML=""}invalidatePostProcessingResults(f)}}function getViewportHeight(){if((!options.autoHeight||options.frozenColumn!=-1)&&(topPanelH=options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0,headerRowH=options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0,footerRowH=options.showFooterRow?options.footerRowHeight+getVBoxDelta($footerRowScroller):0),options.autoHeight){var f=$paneHeaderL.outerHeight();f+=options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0,f+=options.showFooterRow?options.footerRowHeight+getVBoxDelta($footerRowScroller):0,f+=getCanvasWidth()>viewportW?scrollbarDimensions.height:0,viewportH=options.rowHeight*getDataLengthIncludingAddNew()+(options.frozenColumn==-1?f:0)}else{var s=options.showColumnHeader?parseFloat($.css($headerScroller[0],"height"))+getVBoxDelta($headerScroller):0,d=options.createPreHeaderPanel&&options.showPreHeaderPanel?options.preHeaderPanelHeight+getVBoxDelta($preHeaderPanelScroller):0;viewportH=parseFloat($.css($container[0],"height",!0))-parseFloat($.css($container[0],"paddingTop",!0))-parseFloat($.css($container[0],"paddingBottom",!0))-s-topPanelH-headerRowH-footerRowH-d}return numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportH}function getViewportWidth(){viewportW=parseFloat($container.width())}function resizeCanvas(){if(initialized){paneTopH=0,paneBottomH=0,viewportTopH=0,getViewportWidth(),getViewportHeight(),hasFrozenRows?options.frozenBottom?(paneTopH=viewportH-frozenRowsHeight-scrollbarDimensions.height,paneBottomH=frozenRowsHeight+scrollbarDimensions.height):(paneTopH=frozenRowsHeight,paneBottomH=viewportH-frozenRowsHeight):paneTopH=viewportH,paneTopH+=topPanelH+headerRowH+footerRowH,hasFrozenColumns()&&options.autoHeight&&(paneTopH+=scrollbarDimensions.height),viewportTopH=paneTopH-topPanelH-headerRowH-footerRowH,options.autoHeight&&(hasFrozenColumns()&&$container.height(paneTopH+parseFloat($.css($headerScrollerL[0],"height"))),$paneTopL.css("position","relative")),$paneTopL.css({top:$paneHeaderL.height()||(options.showHeaderRow?options.headerRowHeight:0)+(options.showPreHeaderPanel?options.preHeaderPanelHeight:0),height:paneTopH});var f=$paneTopL.position().top+paneTopH;options.autoHeight||$viewportTopL.height(viewportTopH),hasFrozenColumns()?($paneTopR.css({top:$paneHeaderL.height(),height:paneTopH}),$viewportTopR.height(viewportTopH),hasFrozenRows&&($paneBottomL.css({top:f,height:paneBottomH}),$paneBottomR.css({top:f,height:paneBottomH}),$viewportBottomR.height(paneBottomH))):hasFrozenRows&&($paneBottomL.css({width:"100%",height:paneBottomH}),$paneBottomL.css("top",f)),hasFrozenRows?($viewportBottomL.height(paneBottomH),options.frozenBottom?($canvasBottomL.height(frozenRowsHeight),hasFrozenColumns()&&$canvasBottomR.height(frozenRowsHeight)):($canvasTopL.height(frozenRowsHeight),hasFrozenColumns()&&$canvasTopR.height(frozenRowsHeight))):$viewportTopR.height(viewportTopH),(!scrollbarDimensions||!scrollbarDimensions.width)&&(scrollbarDimensions=measureScrollbar()),options.autosizeColsMode===Slick.GridAutosizeColsMode.LegacyForceFit&&autosizeColumns(),updateRowCount(),handleScroll(),lastRenderedScrollLeft=-1,render()}}function updatePagingStatusFromView(f){pagingActive=f.pageSize!==0,pagingIsLastPage=f.pageNum==f.totalPages-1}function updateRowCount(){if(initialized){var f=getDataLength(),s=getDataLengthIncludingAddNew(),d=0,M=hasFrozenRows&&!options.frozenBottom?$canvasBottomL.height():$canvasTopL.height();if(hasFrozenRows)var d=getDataLength()-options.frozenRow;else var d=s+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var _=$viewportScrollContainerY.height(),S=viewportHasVScroll;viewportHasVScroll=options.alwaysShowVerticalScroll||!options.autoHeight&&d*options.rowHeight>_,makeActiveCellNormal();var T=f-1;for(var F in rowsCache)F>T&&removeRowFromCache(F);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup(),activeCellNode&&activeRow>T&&resetActiveCell();var M=h;options.autoHeight?h=options.rowHeight*d:(th=Math.max(options.rowHeight*d,_-scrollbarDimensions.height),th<maxSupportedCssHeight?(h=ph=th,n=1,cj=0):(h=maxSupportedCssHeight,ph=h/100,n=Math.floor(th/ph),cj=(th-h)/(n-1))),h!==M&&(hasFrozenRows&&!options.frozenBottom?($canvasBottomL.css("height",h),hasFrozenColumns()&&$canvasBottomR.css("height",h)):($canvasTopL.css("height",h),$canvasTopR.css("height",h)),scrollTop=$viewportScrollContainerY[0].scrollTop);var P=scrollTop+offset<=th-_;th==0||scrollTop==0?page=offset=0:scrollTo(P?scrollTop+offset:th-_),h!=M&&options.autoHeight&&resizeCanvas(),options.autosizeColsMode===Slick.GridAutosizeColsMode.LegacyForceFit&&S!=viewportHasVScroll&&autosizeColumns(),updateCanvasWidth(!1)}}function getVisibleRange(f,s){return f==null&&(f=scrollTop),s==null&&(s=scrollLeft),{top:getRowFromPosition(f),bottom:getRowFromPosition(f+viewportH)+1,leftPx:s,rightPx:s+viewportW}}function getRenderedRange(f,s){var d=getVisibleRange(f,s),_=Math.round(viewportH/options.rowHeight),S=options.minRowBuffer;return vScrollDir==-1?(d.top-=_,d.bottom+=S):vScrollDir==1?(d.top-=S,d.bottom+=_):(d.top-=S,d.bottom+=S),d.top=Math.max(0,d.top),d.bottom=Math.min(getDataLengthIncludingAddNew()-1,d.bottom),d.leftPx-=viewportW,d.rightPx+=viewportW,d.leftPx=Math.max(0,d.leftPx),d.rightPx=Math.min(canvasWidth,d.rightPx),d}function ensureCellNodesInRowsCache(f){var s=rowsCache[f];if(s&&s.cellRenderQueue.length)for(var d=s.rowNode.children().last();s.cellRenderQueue.length;){var _=s.cellRenderQueue.pop();s.cellNodesByColumnIdx[_]=d,d=d.prev(),d.length===0&&(d=$(s.rowNode[0]).children().last())}}function cleanUpCells(f,s){if(!(hasFrozenRows&&(options.frozenBottom&&s>actualFrozenRow||s<=actualFrozenRow))){var d=rowsCache[s],_=[];for(var S in d.cellNodesByColumnIdx)if(d.cellNodesByColumnIdx.hasOwnProperty(S)&&(S=S|0,!(S<=options.frozenColumn)&&!(Array.isArray(columns)&&columns[S]&&columns[S].alwaysRenderColumn))){var T=d.cellColSpans[S];(columnPosLeft[S]>f.rightPx||columnPosRight[Math.min(columns.length-1,S+T-1)]<f.leftPx)&&(s==activeRow&&S==activeCell||_.push(S))}for(var F;(F=_.pop())!=null;)d.cellNodesByColumnIdx[F][0].parentElement.removeChild(d.cellNodesByColumnIdx[F][0]),delete d.cellColSpans[F],delete d.cellNodesByColumnIdx[F],postProcessedRows[s]&&delete postProcessedRows[s][F]}}function cleanUpAndRenderCells(f){for(var s,d=[],_=[],S,T,F=f.top,M=f.bottom;F<=M;F++)if(s=rowsCache[F],!!s){ensureCellNodesInRowsCache(F),cleanUpCells(f,F),S=0;var P=data.getItemMetadata&&data.getItemMetadata(F);P=P&&P.columns;for(var H=getDataItem(F),J=0,K=columns.length;J<K&&!(columnPosLeft[J]>f.rightPx);J++){if((T=s.cellColSpans[J])!=null){J+=T>1?T-1:0;continue}if(T=1,P){var z=P[columns[J].id]||P[J];T=z&&z.colspan||1,T==="*"&&(T=K-J)}columnPosRight[Math.min(K-1,J+T-1)]>f.leftPx&&(appendCellHtml(d,F,J,T,H),S++),J+=T>1?T-1:0}S&&_.push(F)}if(d.length){var oe=__doc__.createElement("div");oe.innerHTML=d.join("");for(var se,ae;(se=_.pop())!=null;){s=rowsCache[se];for(var ge;(ge=s.cellRenderQueue.pop())!=null;)ae=oe.lastChild,hasFrozenColumns()&&ge>options.frozenColumn?s.rowNode[1].appendChild(ae):s.rowNode[0].appendChild(ae),s.cellNodesByColumnIdx[ge]=$(ae)}}}function renderRows(f){for(var s=[],d=[],_=[],S=!1,T=getDataLength(),F=f.top,M=f.bottom;F<=M;F++)rowsCache[F]||hasFrozenRows&&options.frozenBottom&&F==getDataLength()||(renderedRows++,_.push(F),rowsCache[F]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},appendRowHtml(s,d,F,f,T),activeCellNode&&activeRow===F&&(S=!0),counter_rows_rendered++);if(_.length){var P=__doc__.createElement("div"),H=__doc__.createElement("div");P.innerHTML=s.join(""),H.innerHTML=d.join("");for(var F=0,M=_.length;F<M;F++)hasFrozenRows&&_[F]>=actualFrozenRow?hasFrozenColumns()?rowsCache[_[F]].rowNode=$().add($(P.firstChild).appendTo($canvasBottomL)).add($(H.firstChild).appendTo($canvasBottomR)):rowsCache[_[F]].rowNode=$().add($(P.firstChild).appendTo($canvasBottomL)):hasFrozenColumns()?rowsCache[_[F]].rowNode=$().add($(P.firstChild).appendTo($canvasTopL)).add($(H.firstChild).appendTo($canvasTopR)):rowsCache[_[F]].rowNode=$().add($(P.firstChild).appendTo($canvasTopL));S&&(activeCellNode=getCellNode(activeRow,activeCell))}}function startPostProcessing(){options.enableAsyncPostRender&&(clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}function startPostProcessingCleanup(){options.enableAsyncPostRenderCleanup&&(clearTimeout(h_postrenderCleanup),h_postrenderCleanup=setTimeout(asyncPostProcessCleanupRows,options.asyncPostRenderCleanupDelay))}function invalidatePostProcessingResults(f){for(var s in postProcessedRows[f])postProcessedRows[f].hasOwnProperty(s)&&(postProcessedRows[f][s]="C");postProcessFromRow=Math.min(postProcessFromRow,f),postProcessToRow=Math.max(postProcessToRow,f),startPostProcessing()}function updateRowPositions(){for(var f in rowsCache){var s=f?parseInt(f):0;rowsCache[s].rowNode[0].style.top=getRowTop(s)+"px"}}function render(){if(initialized){scrollThrottle.dequeue();var f=getVisibleRange(),s=getRenderedRange();if(cleanupRows(s),lastRenderedScrollLeft!=scrollLeft){if(hasFrozenRows){var d=jQuery.extend(!0,{},s);options.frozenBottom?(d.top=actualFrozenRow,d.bottom=getDataLength()):(d.top=0,d.bottom=options.frozenRow),cleanUpAndRenderCells(d)}cleanUpAndRenderCells(s)}renderRows(s),hasFrozenRows&&(options.frozenBottom?renderRows({top:actualFrozenRow,bottom:getDataLength()-1,leftPx:s.leftPx,rightPx:s.rightPx}):renderRows({top:0,bottom:options.frozenRow-1,leftPx:s.leftPx,rightPx:s.rightPx})),postProcessFromRow=f.top,postProcessToRow=Math.min(getDataLengthIncludingAddNew()-1,f.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,lastRenderedScrollLeft=scrollLeft,trigger(self.onRendered,{startRow:f.top,endRow:f.bottom,grid:self})}}function handleHeaderRowScroll(){var f=$headerRowScrollContainer[0].scrollLeft;f!=$viewportScrollContainerX[0].scrollLeft&&($viewportScrollContainerX[0].scrollLeft=f)}function handleFooterRowScroll(){var f=$footerRowScrollContainer[0].scrollLeft;f!=$viewportScrollContainerX[0].scrollLeft&&($viewportScrollContainerX[0].scrollLeft=f)}function handlePreHeaderPanelScroll(){handleElementScroll($preHeaderPanelScroller[0])}function handleElementScroll(f){var s=f.scrollLeft;s!=$viewportScrollContainerX[0].scrollLeft&&($viewportScrollContainerX[0].scrollLeft=s)}function handleScroll(){return scrollTop=$viewportScrollContainerY[0].scrollTop,scrollLeft=$viewportScrollContainerX[0].scrollLeft,_handleScroll(!1)}function _handleScroll(f){var s=$viewportScrollContainerY[0].scrollHeight-$viewportScrollContainerY[0].clientHeight,d=$viewportScrollContainerY[0].scrollWidth-$viewportScrollContainerY[0].clientWidth;s=Math.max(0,s),d=Math.max(0,d),scrollTop>s&&(scrollTop=s),scrollLeft>d&&(scrollLeft=d);var _=Math.abs(scrollTop-prevScrollTop),S=Math.abs(scrollLeft-prevScrollLeft);if(S&&(prevScrollLeft=scrollLeft,$viewportScrollContainerX[0].scrollLeft=scrollLeft,$headerScrollContainer[0].scrollLeft=scrollLeft,$topPanelScroller[0].scrollLeft=scrollLeft,$headerRowScrollContainer[0].scrollLeft=scrollLeft,options.createFooterRow&&($footerRowScrollContainer[0].scrollLeft=scrollLeft),options.createPreHeaderPanel&&(hasFrozenColumns()?$preHeaderPanelScrollerR[0].scrollLeft=scrollLeft:$preHeaderPanelScroller[0].scrollLeft=scrollLeft),hasFrozenColumns()?hasFrozenRows&&($viewportTopR[0].scrollLeft=scrollLeft):hasFrozenRows&&($viewportTopL[0].scrollLeft=scrollLeft)),_)if(vScrollDir=prevScrollTop<scrollTop?1:-1,prevScrollTop=scrollTop,f&&($viewportScrollContainerY[0].scrollTop=scrollTop),hasFrozenColumns()&&(hasFrozenRows&&!options.frozenBottom?$viewportBottomL[0].scrollTop=scrollTop:$viewportTopL[0].scrollTop=scrollTop),_<viewportH)scrollTo(scrollTop+offset);else{var T=offset;h==viewportH?page=0:page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),offset=Math.round(page*cj),T!=offset&&invalidateAllRows()}if(S||_){var F=Math.abs(lastRenderedScrollLeft-scrollLeft),M=Math.abs(lastRenderedScrollTop-scrollTop);(F>20||M>20)&&(options.forceSyncScrolling||M<viewportH&&F<viewportW?render():scrollThrottle.enqueue(),trigger(self.onViewportChanged,{}))}return trigger(self.onScroll,{scrollLeft,scrollTop}),!!(S||_)}function ActionThrottle(f,s){var d=!1,_=!1;function S(){d?_=!0:F()}function T(){_=!1}function F(){d=!0,setTimeout(M,s),f()}function M(){_?(T(),F()):d=!1}return{enqueue:S,dequeue:T}}function asyncPostProcessRows(){for(var f=getDataLength();postProcessFromRow<=postProcessToRow;){var s=vScrollDir>=0?postProcessFromRow++:postProcessToRow--,d=rowsCache[s];if(!(!d||s>=f)){postProcessedRows[s]||(postProcessedRows[s]={}),ensureCellNodesInRowsCache(s);for(var _ in d.cellNodesByColumnIdx)if(d.cellNodesByColumnIdx.hasOwnProperty(_)){_=_|0;var S=columns[_],T=postProcessedRows[s][_];if(S.asyncPostRender&&T!=="R"){var F=d.cellNodesByColumnIdx[_];F&&S.asyncPostRender(F,s,getDataItem(s),S,T==="C"),postProcessedRows[s][_]="R"}}h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return}}}function asyncPostProcessCleanupRows(){if(postProcessedCleanupQueue.length>0){for(var f=postProcessedCleanupQueue[0].groupId;postProcessedCleanupQueue.length>0&&postProcessedCleanupQueue[0].groupId==f;){var s=postProcessedCleanupQueue.shift();if(s.actionType=="R"&&$(s.node).remove(),s.actionType=="C"){var d=columns[s.columnIdx];d.asyncPostRenderCleanup&&s.node&&d.asyncPostRenderCleanup(s.node,s.rowIdx,d)}}h_postrenderCleanup=setTimeout(asyncPostProcessCleanupRows,options.asyncPostRenderCleanupDelay)}}function updateCellCssStylesOnRenderedRows(f,s){var d,_,S,T;for(var F in rowsCache){if(T=s&&s[F],S=f&&f[F],T)for(_ in T)(!S||T[_]!=S[_])&&(d=getCellNode(F,getColumnIndex(_)),d&&$(d).removeClass(T[_]));if(S)for(_ in S)(!T||T[_]!=S[_])&&(d=getCellNode(F,getColumnIndex(_)),d&&$(d).addClass(S[_]))}}function addCellCssStyles(f,s){if(cellCssClasses[f])throw new Error("SlickGrid addCellCssStyles: cell CSS hash with key '"+f+"' already exists.");cellCssClasses[f]=s,updateCellCssStylesOnRenderedRows(s,null),trigger(self.onCellCssStylesChanged,{key:f,hash:s,grid:self})}function removeCellCssStyles(f){cellCssClasses[f]&&(updateCellCssStylesOnRenderedRows(null,cellCssClasses[f]),delete cellCssClasses[f],trigger(self.onCellCssStylesChanged,{key:f,hash:null,grid:self}))}function setCellCssStyles(f,s){var d=cellCssClasses[f];cellCssClasses[f]=s,updateCellCssStylesOnRenderedRows(s,d),trigger(self.onCellCssStylesChanged,{key:f,hash:s,grid:self})}function getCellCssStyles(f){return cellCssClasses[f]}function flashCell(f,s,d){d=d||100;function _(T,F){F&&setTimeout(function(){T.queue(function(){T.toggleClass(options.cellFlashingCssClass).dequeue(),_(T,F-1)})},d)}if(rowsCache[f]){var S=$(getCellNode(f,s));_(S,4)}}function handleMouseWheel(f,s,d,_){var S=$(f.target).closest(".slick-row"),T=S[0];if(T!=rowNodeFromLastMouseWheelEvent){var F=S.parents(".grid-canvas"),M=F.hasClass("grid-canvas-left");if(zombieRowNodeFromLastMouseWheelEvent&&zombieRowNodeFromLastMouseWheelEvent[M?0:1]!=T){var P=zombieRowNodeFromLastMouseWheelEvent[M||zombieRowNodeFromLastMouseWheelEvent.length==1?0:1];P.parentElement.removeChild(P),zombieRowNodeFromLastMouseWheelEvent=null}rowNodeFromLastMouseWheelEvent=T}scrollTop=Math.max(0,$viewportScrollContainerY[0].scrollTop-_*options.rowHeight),scrollLeft=$viewportScrollContainerX[0].scrollLeft+d*10;var H=_handleScroll(!0);H&&f.preventDefault()}function handleDragInit(f,s){var d=getCellFromEvent(f);if(!d||!cellExists(d.row,d.cell))return!1;var _=trigger(self.onDragInit,s,f);return f.isImmediatePropagationStopped()?_:!1}function handleDragStart(f,s){var d=getCellFromEvent(f);if(!d||!cellExists(d.row,d.cell))return!1;var _=trigger(self.onDragStart,s,f);return f.isImmediatePropagationStopped()?_:!1}function handleDrag(f,s){return trigger(self.onDrag,s,f)}function handleDragEnd(f,s){trigger(self.onDragEnd,s,f)}function handleKeyDown(f){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},f);var s=f.isImmediatePropagationStopped(),d=Slick.keyCode;if(!s&&!f.shiftKey&&!f.altKey){if(options.editable&&currentEditor&&currentEditor.keyCaptureList&&currentEditor.keyCaptureList.indexOf(f.which)>-1)return;f.which==d.HOME?s=f.ctrlKey?navigateTop():navigateRowStart():f.which==d.END&&(s=f.ctrlKey?navigateBottom():navigateRowEnd())}if(!s)if(!f.shiftKey&&!f.altKey&&!f.ctrlKey){if(options.editable&&currentEditor&&currentEditor.keyCaptureList&&currentEditor.keyCaptureList.indexOf(f.which)>-1)return;if(f.which==d.ESCAPE){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else f.which==d.PAGE_DOWN?(navigatePageDown(),s=!0):f.which==d.PAGE_UP?(navigatePageUp(),s=!0):f.which==d.LEFT?s=navigateLeft():f.which==d.RIGHT?s=navigateRight():f.which==d.UP?s=navigateUp():f.which==d.DOWN?s=navigateDown():f.which==d.TAB?s=navigateNext():f.which==d.ENTER&&(options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable(void 0,void 0,f)),s=!0)}else f.which==d.TAB&&f.shiftKey&&!f.ctrlKey&&!f.altKey&&(s=navigatePrev());if(s){f.stopPropagation(),f.preventDefault();try{f.originalEvent.keyCode=0}catch{}}}function handleClick(f){currentEditor||(f.target!=__doc__.activeElement||$(f.target).hasClass("slick-cell"))&&setFocus();var s=getCellFromEvent(f);if(!(!s||currentEditor!==null&&activeRow==s.row&&activeCell==s.cell)&&(trigger(self.onClick,{row:s.row,cell:s.cell},f),!f.isImmediatePropagationStopped()&&canCellBeActive(s.row,s.cell)&&(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()))){scrollRowIntoView(s.row,!1);var d=f.target&&f.target.className===Slick.preClickClassName,_=columns[s.cell],S=!!(options.editable&&_&&_.editor&&options.suppressActiveCellChangeOnEdit);setActiveCellInternal(getCellNode(s.row,s.cell),null,d,S,f)}}function handleContextMenu(f){var s=$(f.target).closest(".slick-cell",$canvas);s.length!==0&&(activeCellNode===s[0]&&currentEditor!==null||trigger(self.onContextMenu,{},f))}function handleDblClick(f){var s=getCellFromEvent(f);!s||currentEditor!==null&&activeRow==s.row&&activeCell==s.cell||(trigger(self.onDblClick,{row:s.row,cell:s.cell},f),!f.isImmediatePropagationStopped()&&options.editable&&gotoCell(s.row,s.cell,!0,f))}function handleHeaderMouseEnter(f){trigger(self.onHeaderMouseEnter,{column:$(this).data("column"),grid:self},f)}function handleHeaderMouseLeave(f){trigger(self.onHeaderMouseLeave,{column:$(this).data("column"),grid:self},f)}function handleHeaderContextMenu(f){var s=$(f.target).closest(".slick-header-column",".slick-header-columns"),d=s&&s.data("column");trigger(self.onHeaderContextMenu,{column:d},f)}function handleHeaderClick(f){if(!columnResizeDragging){var s=$(f.target).closest(".slick-header-column",".slick-header-columns"),d=s&&s.data("column");d&&trigger(self.onHeaderClick,{column:d},f)}}function handleFooterContextMenu(f){var s=$(f.target).closest(".slick-footerrow-column",".slick-footerrow-columns"),d=s&&s.data("column");trigger(self.onFooterContextMenu,{column:d},f)}function handleFooterClick(f){var s=$(f.target).closest(".slick-footerrow-column",".slick-footerrow-columns"),d=s&&s.data("column");trigger(self.onFooterClick,{column:d},f)}function handleMouseEnter(f){trigger(self.onMouseEnter,{},f)}function handleMouseLeave(f){trigger(self.onMouseLeave,{},f)}function cellExists(f,s){return!(f<0||f>=getDataLength()||s<0||s>=columns.length)}function getCellFromPoint(f,s){for(var d=getRowFromPosition(s),_=0,S=0,T=0;T<columns.length&&S<f;T++)S+=columns[T].width,_++;return _<0&&(_=0),{row:d,cell:_-1}}function getCellFromNode(f){var s=/l\d+/.exec(f.className);if(!s)throw new Error("SlickGrid getCellFromNode: cannot get cell - "+f.className);return parseInt(s[0].substr(1,s[0].length-1),10)}function getRowFromNode(f){for(var s in rowsCache)for(var d in rowsCache[s].rowNode)if(rowsCache[s].rowNode[d]===f)return s?parseInt(s):0;return null}function getFrozenRowOffset(f){var s=hasFrozenRows?options.frozenBottom?f>=actualFrozenRow?h<viewportTopH?actualFrozenRow*options.rowHeight:h:0:f>=actualFrozenRow?frozenRowsHeight:0:0;return s}function getCellFromEvent(f){var s,d,_=$(f.target).closest(".slick-cell",$canvas);if(!_.length)return null;if(s=getRowFromNode(_[0].parentNode),hasFrozenRows){var S=_.parents(".grid-canvas").offset(),T=0,F=_.parents(".grid-canvas-bottom").length;F&&(T=options.frozenBottom?$canvasTopL.height():frozenRowsHeight),s=getCellFromPoint(f.clientX-S.left,f.clientY-S.top+T+$(__doc__).scrollTop()).row}return d=getCellFromNode(_[0]),s==null||d==null?null:{row:s,cell:d}}function getCellNodeBox(f,s){if(!cellExists(f,s))return null;for(var d=getFrozenRowOffset(f),_=getRowTop(f)-d,S=_+options.rowHeight-1,T=0,F=0;F<s;F++)T+=columns[F].width,options.frozenColumn==F&&(T=0);var M=T+columns[s].width;return{top:_,left:T,bottom:S,right:M}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){tabbingDirection==-1?$focusSink[0].focus():$focusSink2[0].focus()}function scrollCellIntoView(f,s,d){if(scrollRowIntoView(f,d),!(s<=options.frozenColumn)){var _=getColspan(f,s);internalScrollColumnIntoView(columnPosLeft[s],columnPosRight[s+(_>1?_-1:0)])}}function internalScrollColumnIntoView(f,s){var d=scrollLeft+$viewportScrollContainerX.width();f<scrollLeft?($viewportScrollContainerX.scrollLeft(f),handleScroll(),render()):s>d&&($viewportScrollContainerX.scrollLeft(Math.min(f,s-$viewportScrollContainerX[0].clientWidth)),handleScroll(),render())}function scrollColumnIntoView(f){internalScrollColumnIntoView(columnPosLeft[f],columnPosRight[f])}function setActiveCellInternal(f,s,d,_,S){if(activeCellNode!==null&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"),rowsCache[activeRow]&&$(rowsCache[activeRow].rowNode).removeClass("active")),activeCellNode=f,activeCellNode!=null){var T=$(activeCellNode),F=T.offset(),M=Math.floor(T.parents(".grid-canvas").offset().top),P=T.parents(".grid-canvas-bottom").length;hasFrozenRows&&P&&(M-=options.frozenBottom?$canvasTopL.height():frozenRowsHeight);var H=getCellFromPoint(F.left,Math.ceil(F.top)-M);activeRow=H.row,activeCell=activePosX=activeCell=activePosX=getCellFromNode(activeCellNode),s==null&&(s=activeRow==getDataLength()||options.autoEdit),options.showCellSelection&&(T.addClass("active"),rowsCache[activeRow]&&$(rowsCache[activeRow].rowNode).addClass("active")),options.editable&&s&&isCellPotentiallyEditable(activeRow,activeCell)&&(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable(void 0,d,S)},options.asyncEditorLoadDelay):makeActiveCellEditable(void 0,d,S))}else activeRow=activeCell=null;_||trigger(self.onActiveCellChanged,getActiveCell())}function clearTextSelection(){if(__doc__.selection&&__doc__.selection.empty)try{__doc__.selection.empty()}catch{}else if(window.getSelection){var f=window.getSelection();f&&f.removeAllRanges&&f.removeAllRanges()}}function isCellPotentiallyEditable(f,s){var d=getDataLength();return!(f<d&&!getDataItem(f)||columns[s].cannotTriggerInsert&&f>=d||!getEditor(f,s))}function makeActiveCellNormal(){if(currentEditor){if(trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor}),currentEditor.destroy(),currentEditor=null,activeCellNode){var f=getDataItem(activeRow);if($(activeCellNode).removeClass("editable invalid"),f){var s=columns[activeCell],d=getFormatter(activeRow,s),_=d(activeRow,activeCell,getDataItemValueForColumn(f,s),s,f,self);applyFormatResultToCellNode(_,activeCellNode),invalidatePostProcessingResults(activeRow)}}navigator.userAgent.toLowerCase().match(/msie/)&&clearTextSelection(),getEditorLock().deactivate(editController)}}function makeActiveCellEditable(f,s,d){if(activeCellNode){if(!options.editable)throw new Error("SlickGrid makeActiveCellEditable : should never get called when options.editable is false");if(clearTimeout(h_editorLoader),!!isCellPotentiallyEditable(activeRow,activeCell)){var _=columns[activeCell],S=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:S,column:_,target:"grid"})===!1){setFocus();return}getEditorLock().activate(editController),$(activeCellNode).addClass("editable");var T=f||getEditor(activeRow,activeCell);!f&&!T.suppressClearOnEdit&&(activeCellNode.innerHTML="");var F=data.getItemMetadata&&data.getItemMetadata(activeRow);F=F&&F.columns;var M=F&&(F[_.id]||F[activeCell]);currentEditor=new T({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:_,columnMetaData:M,item:S||{},event:d,commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),S&&(currentEditor.loadValue(S),s&&currentEditor.preClick&&currentEditor.preClick()),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()}}}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(f){var s={top:f.offsetTop,left:f.offsetLeft,bottom:0,right:0,width:$(f).outerWidth(),height:$(f).outerHeight(),visible:!0};s.bottom=s.top+s.height,s.right=s.left+s.width;for(var d=f.offsetParent;(f=f.parentNode)!=__doc__.body&&f!=null;)s.visible&&f.scrollHeight!=f.offsetHeight&&$(f).css("overflowY")!="visible"&&(s.visible=s.bottom>f.scrollTop&&s.top<f.scrollTop+f.clientHeight),s.visible&&f.scrollWidth!=f.offsetWidth&&$(f).css("overflowX")!="visible"&&(s.visible=s.right>f.scrollLeft&&s.left<f.scrollLeft+f.clientWidth),s.left-=f.scrollLeft,s.top-=f.scrollTop,f===d&&(s.left+=f.offsetLeft,s.top+=f.offsetTop,d=f.offsetParent),s.bottom=s.top+s.height,s.right=s.left+s.width;return s}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(activeCellNode&&(trigger(self.onActiveCellPositionChanged,{}),currentEditor)){var f=getActiveCellPosition();currentEditor.show&&currentEditor.hide&&(f.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(f)}}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell}:null}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(f,s){if(!hasFrozenRows||!options.frozenBottom&&f>actualFrozenRow-1||options.frozenBottom&&f<actualFrozenRow-1){var d=$viewportScrollContainerY.height(),_=hasFrozenRows&&!options.frozenBottom?f-options.frozenRow:f,S=_*options.rowHeight,T=(_+1)*options.rowHeight-d+(viewportHasHScroll?scrollbarDimensions.height:0);(_+1)*options.rowHeight>scrollTop+d+offset?(scrollTo(s?S:T),render()):_*options.rowHeight<scrollTop+offset&&(scrollTo(s?T:S),render())}}function scrollRowToTop(f){scrollTo(f*options.rowHeight),render()}function scrollPage(f){var s=f*numVisibleRows,d=scrollTop+options.rowHeight-1;if(scrollTo((getRowFromPosition(d)+s)*options.rowHeight),render(),options.enableCellNavigation&&activeRow!=null){var _=activeRow+s,S=getDataLengthIncludingAddNew();_>=S&&(_=S-1),_<0&&(_=0);for(var T=0,F=null,M=activePosX;T<=activePosX;)canCellBeActive(_,T)&&(F=T),T+=getColspan(_,T);F!==null?(setActiveCellInternal(getCellNode(_,F)),activePosX=M):resetActiveCell()}}function navigatePageDown(){scrollPage(1)}function navigatePageUp(){scrollPage(-1)}function navigateTop(){navigateToRow(0)}function navigateBottom(){navigateToRow(getDataLength()-1)}function navigateToRow(f){var s=getDataLength();if(!s)return!0;if(f<0?f=0:f>=s&&(f=s-1),scrollCellIntoView(f,0,!0),options.enableCellNavigation&&activeRow!=null){for(var d=0,_=null,S=activePosX;d<=activePosX;)canCellBeActive(f,d)&&(_=d),d+=getColspan(f,d);_!==null?(setActiveCellInternal(getCellNode(f,_)),activePosX=S):resetActiveCell()}return!0}function getColspan(f,s){var d=data.getItemMetadata&&data.getItemMetadata(f);if(!d||!d.columns)return 1;var _=d.columns[columns[s].id]||d.columns[s],S=_&&_.colspan;return S==="*"?S=columns.length-s:S=S||1,S}function findFirstFocusableCell(f){for(var s=0;s<columns.length;){if(canCellBeActive(f,s))return s;s+=getColspan(f,s)}return null}function findLastFocusableCell(f){for(var s=0,d=null;s<columns.length;)canCellBeActive(f,s)&&(d=s),s+=getColspan(f,s);return d}function gotoRight(f,s,d){if(s>=columns.length)return null;do s+=getColspan(f,s);while(s<columns.length&&!canCellBeActive(f,s));return s<columns.length?{row:f,cell:s,posX:s}:null}function gotoLeft(f,s,d){if(s<=0)return null;var _=findFirstFocusableCell(f);if(_===null||_>=s)return null;for(var S={row:f,cell:_,posX:_},T;;){if(T=gotoRight(S.row,S.cell,S.posX),!T)return null;if(T.cell>=s)return S;S=T}}function gotoDown(f,s,d){for(var _,S=getDataLengthIncludingAddNew();;){if(++f>=S)return null;for(_=s=0;s<=d;)_=s,s+=getColspan(f,s);if(canCellBeActive(f,_))return{row:f,cell:_,posX:d}}}function gotoUp(f,s,d){for(var _;;){if(--f<0)return null;for(_=s=0;s<=d;)_=s,s+=getColspan(f,s);if(canCellBeActive(f,_))return{row:f,cell:_,posX:d}}}function gotoNext(f,s,d){if(f==null&&s==null&&(f=s=0,canCellBeActive(f,s)))return{row:f,cell:s,posX:s};var _=gotoRight(f,s);if(_)return _;var S=null,T=getDataLengthIncludingAddNew();for(f===T-1&&f--;++f<T;)if(S=findFirstFocusableCell(f),S!==null)return{row:f,cell:S,posX:S};return null}function gotoPrev(f,s,d){if(f==null&&s==null&&(f=getDataLengthIncludingAddNew()-1,s=columns.length-1,canCellBeActive(f,s)))return{row:f,cell:s,posX:s};for(var _,S;!_&&(_=gotoLeft(f,s),!_);){if(--f<0)return null;s=0,S=findLastFocusableCell(f),S!==null&&(_={row:f,cell:S,posX:S})}return _}function gotoRowStart(f,s,d){var _=findFirstFocusableCell(f);return _===null?null:{row:f,cell:_,posX:_}}function gotoRowEnd(f,s,d){var _=findLastFocusableCell(f);return _===null?null:{row:f,cell:_,posX:_}}function navigateRight(){return navigate("right")}function navigateLeft(){return navigate("left")}function navigateDown(){return navigate("down")}function navigateUp(){return navigate("up")}function navigateNext(){return navigate("next")}function navigatePrev(){return navigate("prev")}function navigateRowStart(){return navigate("home")}function navigateRowEnd(){return navigate("end")}function navigate(f){if(!options.enableCellNavigation||!activeCellNode&&f!="prev"&&f!="next")return!1;if(!getEditorLock().commitCurrentEdit())return!0;setFocus();var s={up:-1,down:1,left:-1,right:1,prev:-1,next:1,home:-1,end:1};tabbingDirection=s[f];var d={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext,home:gotoRowStart,end:gotoRowEnd},_=d[f],S=_(activeRow,activeCell,activePosX);if(S){if(hasFrozenRows&&options.frozenBottom&S.row==getDataLength())return;var T=S.row==getDataLength();return(!options.frozenBottom&&S.row>=actualFrozenRow||options.frozenBottom&&S.row<actualFrozenRow)&&scrollCellIntoView(S.row,S.cell,!T&&options.emulatePagingWhenScrolling),setActiveCellInternal(getCellNode(S.row,S.cell)),activePosX=S.posX,!0}else return setActiveCellInternal(getCellNode(activeRow,activeCell)),!1}function getCellNode(f,s){if(rowsCache[f]){ensureCellNodesInRowsCache(f);try{return rowsCache[f].cellNodesByColumnIdx.length>s?rowsCache[f].cellNodesByColumnIdx[s][0]:null}catch{return rowsCache[f].cellNodesByColumnIdx[s]}}return null}function setActiveCell(f,s,d,_,S){initialized&&(f>getDataLength()||f<0||s>=columns.length||s<0||options.enableCellNavigation&&(scrollCellIntoView(f,s,!1),setActiveCellInternal(getCellNode(f,s),d,_,S)))}function setActiveRow(f,s,d){initialized&&(f>getDataLength()||f<0||s>=columns.length||s<0||(activeRow=f,d||scrollCellIntoView(f,s||0,!1)))}function canCellBeActive(f,s){if(!options.enableCellNavigation||f>=getDataLengthIncludingAddNew()||f<0||s>=columns.length||s<0)return!1;var d=data.getItemMetadata&&data.getItemMetadata(f);if(d&&typeof d.focusable<"u")return!!d.focusable;var _=d&&d.columns;return _&&_[columns[s].id]&&typeof _[columns[s].id].focusable<"u"?!!_[columns[s].id].focusable:_&&_[s]&&typeof _[s].focusable<"u"?!!_[s].focusable:!!columns[s].focusable}function canCellBeSelected(f,s){if(f>=getDataLength()||f<0||s>=columns.length||s<0)return!1;var d=data.getItemMetadata&&data.getItemMetadata(f);if(d&&typeof d.selectable<"u")return!!d.selectable;var _=d&&d.columns&&(d.columns[columns[s].id]||d.columns[s]);return _&&typeof _.selectable<"u"?!!_.selectable:!!columns[s].selectable}function gotoCell(f,s,d,_){if(initialized&&canCellBeActive(f,s)&&getEditorLock().commitCurrentEdit()){scrollCellIntoView(f,s,!1);var S=getCellNode(f,s),T=columns[s],F=!!(options.editable&&T&&T.editor&&options.suppressActiveCellChangeOnEdit);setActiveCellInternal(S,d||f===getDataLength()||options.autoEdit,null,F,_),currentEditor||setFocus()}}function commitCurrentEdit(){var f=getDataItem(activeRow),s=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var d=currentEditor.validate();if(d.valid){if(activeRow<getDataLength()){var _={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(f,this.serializedValue),updateRow(this.row),trigger(self.onCellChange,{row:this.row,cell:this.cell,item:f,column:s})},undo:function(){this.editor.applyValue(f,this.prevSerializedValue),updateRow(this.row),trigger(self.onCellChange,{row:this.row,cell:this.cell,item:f,column:s})}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(f,s,_)):(_.execute(),makeActiveCellNormal())}else{var S={};currentEditor.applyValue(S,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:S,column:s})}return!getEditorLock().isActive()}else return $(activeCellNode).removeClass("invalid"),$(activeCellNode).width(),$(activeCellNode).addClass("invalid"),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:d,row:activeRow,cell:activeCell,column:s}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(f){for(var s=[],d=columns.length-1,_=0;_<f.length;_++)s.push(new Slick.Range(f[_],0,f[_],d));return s}function getSelectedRows(){if(!selectionModel)throw new Error("SlickGrid Selection model is not set");return selectedRows.slice(0)}function setSelectedRows(f){if(!selectionModel)throw new Error("SlickGrid Selection model is not set");self&&self.getEditorLock&&!self.getEditorLock().isActive()&&selectionModel.setSelectedRanges(rowsToRanges(f))}function getBaseDocument(){return __doc__}function setBaseDocument(f){__doc__=f,stylesheet=null;var s=__doc__.styleSheets;for(let d=0;d<s.length;d++)if(s[d].cssRules[0].selectorText&&s[d].cssRules[0].selectorText.includes(uid)){stylesheet=s[d];break}$style=$(stylesheet.ownerNode),removeCssRules(),createCssRules(),setColumns(columns)}this.debug=function(){var f="";f+=`
counter_rows_rendered:  `+counter_rows_rendered,f+=`
counter_rows_removed:  `+counter_rows_removed,f+=`
renderedRows:  `+renderedRows,f+=`
numVisibleRows:  `+numVisibleRows,f+=`
maxSupportedCssHeight:  `+maxSupportedCssHeight,f+=`
n(umber of pages):  `+n,f+=`
(current) page:  `+page,f+=`
page height (ph):  `+ph,f+=`
vScrollDir:  `+vScrollDir,alert(f)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.4.38",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onFooterRowCellRendered:new Slick.Event,onFooterContextMenu:new Slick.Event,onFooterClick:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onBeforeFooterRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onBeforeAppendCell:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsDrag:new Slick.Event,onColumnsResized:new Slick.Event,onColumnsResizeDblClick:new Slick.Event,onBeforeColumnsResize:new Slick.Event,onCellChange:new Slick.Event,onCompositeEditorChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,onAutosizeColumns:new Slick.Event,onRendered:new Slick.Event,onSetOptions:new Slick.Event,registerPlugin,unregisterPlugin,getPluginByName,getColumns,setColumns,getColumnIndex,updateColumnHeader,setSortColumn,setSortColumns,getSortColumns,autosizeColumns,autosizeColumn,getOptions,setOptions,getData,getDataLength,getDataItem,setData,getSelectionModel,setSelectionModel,getSelectedRows,setSelectedRows,getContainerNode,updatePagingStatusFromView,applyFormatResultToCellNode,render,reRenderColumns,invalidate,invalidateRow,invalidateRows,invalidateAllRows,updateCell,updateRow,getViewport:getVisibleRange,getRenderedRange,resizeCanvas,updateRowCount,scrollRowIntoView,scrollRowToTop,scrollCellIntoView,scrollColumnIntoView,getCanvasNode,getUID,getHeaderColumnWidthDiff,getScrollbarDimensions,getHeadersWidth,getCanvasWidth,getCanvases,getActiveCanvasNode,setActiveCanvasNode,getViewportNode,getViewports,getActiveViewportNode,setActiveViewportNode,focus:setFocus,scrollTo,cacheCssForHiddenInit,restoreCssFromHiddenInit,getCellFromPoint,getCellFromEvent,getActiveCell,setActiveCell,setActiveRow,getActiveCellNode,getActiveCellPosition,resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor,getCellNode,getCellNodeBox,canCellBeSelected,canCellBeActive,navigatePrev,navigateNext,navigateUp,navigateDown,navigateLeft,navigateRight,navigatePageUp,navigatePageDown,navigateTop,navigateBottom,navigateRowStart,navigateRowEnd,gotoCell,getTopPanel,setTopPanelVisibility,getPreHeaderPanel,getPreHeaderPanelLeft:getPreHeaderPanel,getPreHeaderPanelRight,setPreHeaderPanelVisibility,getHeader,getHeaderColumn,setHeaderRowVisibility,getHeaderRow,getHeaderRowColumn,setFooterRowVisibility,getFooterRow,getFooterRowColumn,getGridPosition,flashCell,addCellCssStyles,setCellCssStyles,removeCellCssStyles,getCellCssStyles,getFrozenRowOffset,setColumnHeaderVisibility,init:finishInitialization,destroy,getEditorLock,getEditController,applyColumnWidths,setBaseDocument,getBaseDocument}),init()}function TextEditor(f){var s,d;this.init=function(){s=$("<INPUT type=text class='editor-text' />").appendTo(f.container).on("keyup",_=>{const S=_.which;if(S===37||S===39||S===8){_.stopImmediatePropagation();return}this.autoCorrect(s.val())})},this.autoCorrect=function(_){const T=f.grid.getData().getValueSuggestion(_,f.column.field);T&&s.val(T)},this.destroy=function(){s.remove()},this.focus=function(){s.focus()},this.getValue=function(){return s.val()},this.setValue=function(_){s.val(_)},this.loadValue=function(_){d=_[f.column.field]||"",s.val(d),s[0].defaultValue=d,s.select()},this.serializeValue=function(){return s.val()},this.applyValue=function(_,S,T=!0){f.grid.getData().updateValue(S,_.__index__,f.column.field,T)},this.isValueChanged=function(){return!(s.val()==""&&d==null)&&s.val()!=d},this.validate=function(){if(f.column.validator){var _=f.column.validator(s.val());if(!_.valid)return _}return{valid:!0,msg:null}},this.init()}function Overlays(f){var s,d,_,S,T=this,F=new Slick.EventHandler,M,P={buttonCssClass:null,buttonImage:"../images/down.gif",decoratorWidth:2};function H(Re){f=$.extend(!0,{},P,f),S=Re,M=new be(S),s=K(),F.subscribe(S.onActiveCellChanged,z).subscribe(S.onColumnsResized,oe).subscribe(S.onScroll,se)}function J(){F.unsubscribeAll(),s.$handle.unbind("dragstart",ge).unbind("drag",pe).unbind("dragend",he),s.remove()}function K(){var Re=S.getCanvasNode(),Fe=new ve(Re);return Fe.$handle.bind("dragstart",ge).bind("drag",pe).bind("dragend",he),Fe}function z(Re,Fe){M.hide(),ae()}function oe(Re,Fe){ae()}function se(Re,Fe){ae()}function ae(Re,Fe){var ye=S.getActiveCell();if(!ye){s.toggle(!1);return}var Ue=S.getColumns()[ye.cell];s.toggle(!0),s.$handle.toggle(typeof Ue.editor<"u");var It=S.getCellNodeBox(ye.row,ye.cell);It.height=It.bottom-It.top,It.width=It.right-It.left,s.$left.css({left:It.left-2,top:It.top,width:2,height:It.height}),s.$right.css({left:It.left+It.width-1,top:It.top,width:2,height:It.height}),s.$top.css({left:It.left-2,top:It.top-2,width:It.width+3,height:2}),s.$bottom.css({left:It.left-2,top:It.top+It.height-1,width:It.width+3,height:2}),s.$handle.css({left:It.left+It.width-4,top:It.top+It.height-4,width:1,height:1})}function ge(Re,Fe){var ye=S.getActiveCell();if(S.canCellBeSelected(ye.row,ye.cell)&&(_=!0,Re.stopImmediatePropagation()),!_)return null;const Ue=S.getCellEditor();return Ue&&Ue.applyValue(S.getDataItem(ye.row),Ue.getValue(),!1),S.focus(),d=ye.row,Fe.range={start:ye,end:{}},$(this).css({"background-color":"transparent","border-color":"transparent"}),M.show(new Slick.Range(ye.row,ye.cell))}function pe(Re,Fe){if(!_)return;var ye=S.getCanvasNode();Re.stopImmediatePropagation();var Ue=S.getCellFromPoint(Re.pageX-$(ye).offset().left,Re.pageY-$(ye).offset().top);if(!S.canCellBeSelected(Ue.row,Ue.cell))return;Fe.range.end=Ue,M.show(new Slick.Range(Fe.range.start.row,Fe.range.start.cell,Ue.row,Fe.range.start.cell));const It=S.getViewport();It.bottom===Ue.row&&S.scrollRowIntoView(Ue.row+7),It.top===Ue.row&&S.scrollRowIntoView(It.top-7)}function he(Re,Fe){if(!_)return;_=!1,$(this).css({"background-color":"","border-color":""}),M.hideHandle();const ye=M.getSelectedRange(),Ue=d<ye.toRow?"+":"-";T.onFillUpDown.notify({dir:Ue,grid:S,range:ye},Re,T),M.hide(),Re.preventDefault(),Re.stopPropagation()}function ve(Re,Fe){var ye=(Fe||"")+"cell-overlay";this.$left=$("<div>").addClass(ye).addClass("left").appendTo(Re),this.$right=$("<div>").addClass(ye).addClass("right").appendTo(Re),this.$top=$("<div>").addClass(ye).addClass("top").appendTo(Re),this.$bottom=$("<div>").addClass(ye).addClass("bottom").appendTo(Re),this.$handle=$("<div>").addClass("handle-overlay").data("__doc__",S.getBaseDocument()).appendTo(Re),this.toggle=function(Ue){this.$left.toggle(Ue),this.$right.toggle(Ue),this.$top.toggle(Ue),this.$bottom.toggle(Ue),this.$handle.toggle(Ue)},this.remove=function(){this.$left.remove(),this.$right.remove(),this.$top.remove(),this.$bottom.remove(),this.$handle.remove()}}function be(Re){var Fe,ye;function Ue(xt){ye=xt,Fe||(Fe=new ve(S.getCanvasNode(),"selection-"));var Ct=Re.getCellNodeBox(xt.fromRow,xt.fromCell),Nt=Re.getCellNodeBox(xt.toRow,xt.toCell);return Fe.$left.css({top:Ct.top-2,left:Ct.left-2,height:Nt.bottom-Ct.top+2,width:f.decoratorWidth}),Fe.$right.css({top:Ct.top-2,left:Nt.right-1,height:Nt.bottom-Ct.top+2,width:f.decoratorWidth}),Fe.$top.css({top:Ct.top-2,left:Nt.left-1,height:f.decoratorWidth,width:Nt.right-Ct.left+2}),Fe.$bottom.css({top:Nt.bottom-1,left:Ct.left-2,height:f.decoratorWidth,width:Nt.right-Ct.left+3}),Fe.$handle.css({top:Nt.bottom-3,left:Ct.right-4,height:1,width:1}),Fe}function It(){return ye}function St(){Fe&&(Fe.toggle(!1),Fe=null)}function At(){Fe.$handle.hide()}return{hide:St,hideHandle:At,show:Ue,getSelectedRange:It}}$.extend(this,{init:H,destroy:J,onFillUpDown:new Slick.Event})}function RowSelectionModel(f){let s,d=[];const _=this,S=new Slick.EventHandler;let T,F;const M={selectActiveRow:!0};function P(Re){F=Object.assign(M,f),s=Re,S.subscribe(s.onActiveCellChanged,J(he)),S.subscribe(s.onKeyDown,J(ve)),S.subscribe(s.onClick,J(be))}function H(){S.unsubscribeAll()}function J(Re){return function(){T||(T=!0,Re.apply(this,arguments),T=!1)}}function K(Re){const Fe=[];for(let ye=0;ye<Re.length;ye++)for(let Ue=Re[ye].fromRow;Ue<=Re[ye].toRow;Ue++)Fe.push(Ue);return Fe}function z(Re){const Fe=[],ye=s.getColumns().length-1;for(let Ue=0;Ue<Re.length;Ue++)Fe.push(new Slick.Range(Re[Ue],0,Re[Ue],ye));return Fe}function oe(Re,Fe){let ye;const Ue=[];for(ye=Re;ye<=Fe;ye++)Ue.push(ye);for(ye=Fe;ye<Re;ye++)Ue.push(ye);return Ue}function se(){return K(d)}function ae(Re){ge(z(Re))}function ge(Re){(!d||d.length===0)&&(!Re||Re.length===0)||(d=Re,_.onSelectedRangesChanged.notify(d))}function pe(){return d}function he(Re,Fe){F.selectActiveRow&&Fe.row!=null&&ge([new Slick.Range(Fe.row,0,Fe.row,s.getColumns().length-1)])}function ve(Re){const Fe=s.getActiveCell();if(s.getOptions().multiSelect&&Fe&&Re.shiftKey&&!Re.ctrlKey&&!Re.altKey&&!Re.metaKey&&(Re.which===Slick.keyCode.UP||Re.which===Slick.keyCode.DOWN)){let ye=se();ye.sort((At,xt)=>At-xt),ye.length||(ye=[Fe.row]);let Ue=ye[0],It=ye[ye.length-1],St;if(Re.which===Slick.keyCode.DOWN?St=Fe.row<It||Ue===It?++It:++Ue:St=Fe.row<It?--It:--Ue,St>=0&&St<s.getDataLength()){s.scrollRowIntoView(St);const At=z(oe(Ue,It));ge(At)}Re.preventDefault(),Re.stopPropagation()}}function be(Re){const Fe=s.getCellFromEvent(Re);if(!Fe||!s.canCellBeActive(Fe.row,Fe.cell)||!s.getOptions().multiSelect||!Re.ctrlKey&&!Re.shiftKey&&!Re.metaKey)return!1;let ye=K(d);const Ue=ye.indexOf(Fe.row);if(Ue===-1&&(Re.ctrlKey||Re.metaKey))ye.push(Fe.row),s.setActiveCell(Fe.row,Fe.cell);else if(Ue!==-1&&(Re.ctrlKey||Re.metaKey))ye=ye.filter((St,At)=>St!==Fe.row),s.setActiveCell(Fe.row,Fe.cell);else if(ye.length&&Re.shiftKey){const St=ye.pop(),At=Math.min(Fe.row,St),xt=Math.max(Fe.row,St);ye=[];for(let Ct=At;Ct<=xt;Ct++)Ct!==St&&ye.push(Ct);ye.push(St),s.setActiveCell(Fe.row,Fe.cell)}const It=z(ye);return ge(It),Re.stopImmediatePropagation(),!0}Object.assign(this,{getSelectedRows:se,setSelectedRows:ae,getSelectedRanges:pe,setSelectedRanges:ge,init:P,destroy:H,pluginName:"RowSelectionModel",onSelectedRangesChanged:new Slick.Event})}class TableChart extends BaseChart{constructor(s,d,_){super(s,d,_),this.config.type="table_chart";let S=[];_.include_index!==!1&&(S=[{field:"__index__",id:"__index__",name:"index",datatype:"integer",sortable:!0,width:100}]);const T=_.column_widths||{};for(const F of this.config.param){const M=s.columnIndex[F],P={id:M.field,field:M.field,name:M.name,datatype:M.datatype,sortable:!0,width:T[F]?T[F]:100};M.datatype==="multitext"&&(P.datatype="text"),M.editable&&(P.editor=TextEditor),M.is_url&&(P.formatter=(H,J,K,z,oe)=>`<a href="${K}" target="_blank">${K}</a>`),S.push(P)}this.options={enableCellNavigation:!0,enableColumnReorder:!1,editable:!1,autoEdit:!0,enableAsyncPostRender:!0,frozenColumn:null},this.dataModel=new DataModel(s,{autoupdate:!1}),this.dataModel.setColumns(this.config.param),this.grid=new SlickGrid(this.contentDiv,this.dataModel,S,this.options),this.grid.onHeaderCellRendered.subscribe((F,M)=>{const P=M.column;if(P.editor&&this.mode==="edit"){const H=createEl("i",{classes:["far","fa-edit"],style:{cursor:"pointer"}});M.node.prepend(H),H.addEventListener("click",J=>{J.stopImmediatePropagation(),new EditColumnDialog(this,P.field,P.name,this.__doc__)})}}),this.dataModel.addListener(this.config.id,()=>{this.grid.invalidate()}),this.grid.setColumns(this.grid.getColumns()),this.mode="select",this.grid.setSelectionModel(new RowSelectionModel),this.grid.init(),this.grid.onSort.subscribe((F,M)=>{this._sort(M)}),this.grid.onSelectedRowsChanged.subscribe((F,M)=>{this.mode==="select"&&this._rowsSelected(M)}),this.editIcon=this.addMenuIcon("fas fa-edit","Change To Edit Mode",{func:()=>{this.editIcon.firstElementChild.remove(),this.mode=this.mode==="select"?"edit":"select";const F=this.mode==="select"?["fas","fa-edit"]:["fas","fa-table"];createEl("i",{classes:F},this.editIcon),this.editIcon.setAttribute("aria-label",this.mode==="edit"?"Change To Selection Mode":"Change To Edit Mode"),this._changeMode()}}),this.addMenuIcon("fas fa-download","Download data",{func:()=>{this.downloadData()}}),this.filter=[],this.themeChanged(),this.onDataFiltered(),this.config.sort&&this._sort(this.config.sort)}_sort({columnId:s,sortAsc:d}){this.dataModel.sort(s,d?"asc":"desc"),this.grid.invalidateAllRows(),this.grid.render(),this.config.sort={columnId:s,sortAsc:d}}onDataHighlighted(s){if(s.source===this)return;const d=this.dataModel.data.indexOf(s.indexes[0]);d!==-1&&(this.grid.scrollRowIntoView(d),this.tempMode=this.mode,this.mode="",this.grid.setSelectedRows([d]),this.mode=this.tempMode)}onColumnRemoved(s){if(this.config.param.indexOf(s)===-1)return!1;const d=this.grid.getCellEditor();d&&d.destroy(),this.grid.setActiveCell(null);let _=this.grid.getColumns();return _=_.filter(S=>S.field!==s),this.config.param=this.config.param.filter(S=>S!==s),this.dataModel.setColumns(this.config.param),this.grid.setColumns(_),!1}getConfig(){const s=super.getConfig(),d=this.grid.getColumns();s.param=d.filter(_=>_.field!=="__index__").map(_=>_.field),s.column_widths={};for(const _ of d)_.width!==100&&(s.column_widths[_.field]=_.width);return s}async downloadData(){const s=await this.dataModel.getDataAsBlob(),d=createEl("a",{download:this.dataStore.name,target:"_blank",href:window.URL.createObjectURL(s)},this.__doc__.body);d.click(),d.remove()}_changeMode(){this.mode==="select"?(this.addColumnIcon&&(this.addColumnIcon.remove(),this.addColumnIcon=null),this.selectionModel=new RowSelectionModel,this.grid.setSelectionModel(this.selectionModel),this.overlay&&(this.grid.unregisterPlugin(this.overlay),this.overlay=null),this.grid.setOptions({editable:!1},!0,!0),this.grid.setColumns(this.grid.getColumns())):(this.grid.setSelectedRows([]),this.selectionModel&&(this.grid.setSelectionModel(null),this.selectionModel=null),this.grid.setOptions({editable:!0},!0,!0),this.grid.setColumns(this.grid.getColumns()),this.addColumnIcon=this.addMenuIcon("fas fa-plus","Add Column",{func:s=>{new AddColumnDialog(this)}}),this.overlay=new Overlays({}),this.overlay.onFillUpDown.subscribe((s,d)=>this._updateOverlay(d)),this.grid.registerPlugin(this.overlay))}onDataChanged(s){this.grid.invalidate()}getColumnInfo(){return this.grid.getColumns().filter(s=>s.datatype==="text").map(s=>({name:s.name,field:s.field})).sort((s,d)=>s.name.localeCompare(d.name))}createColumn(s,d=null,_=2){this.dataModel.createColumn(s,d);const S=this.grid.getColumns();_-=1,_<0||_>=S.length&&(_=S.length-1),S.splice(_,0,{name:s,field:s,id:s,datatype:"text",editor:TextEditor,sortable:!0}),this.config.param.push(s),this.grid.setColumns(S),this.grid.invalidate()}_removeColumn(s){this.dataModel.removeColumn(s,!0,!0)}_updateOverlay(s){const d=this.grid.getColumns()[s.range.fromCell];d.editor&&(this.dataModel.updateRange(d.field,s.range.fromRow,s.range.toRow,s.dir),this.grid.invalidate())}_rowsSelected(s){const d=[];for(const _ of s.rows)d.push(this.dataModel.data[_]);this.dataStore.dataHighlighted(d,this)}themeChanged(){}changeBaseDocument(s){super.changeBaseDocument(s),this.grid.setBaseDocument(s),this.mode==="edit"&&(this.grid.unregisterPlugin(this.overlay),this.grid.registerPlugin(this.overlay))}setSize(s,d){super.setSize(s,d),this.grid.resizeCanvas(),this.grid.invalidate()}pinChart(){this.isPinned=!0}unpinChart(){this.isPinned=!1,this.onDataFiltered()}addColumns(){}remove(){this.grid.destroy(),super.remove()}onDataFiltered(){this.isPinned||(this.dataModel.updateModel(),this.config.sort&&this._sort(this.config.sort))}}class EditColumnDialog extends BaseDialog{constructor(s,d,_,S){const T={doc:S,columns:2,width:380,maxHeight:500,title:`Bulk Edit ${_}`};super(T,{table:s,column:d})}init(s){this.col=s.column,this.dataModel=s.table.dataModel,this.table=s.table;const d=createEl("div",{},this.columns[0]);createEl("label",{text:"Value:"},d),this.valInput=createEl("input",{},d),this.valInput.addEventListener("keyup",S=>{const T=S.which;if(T===37||T===39||T===8){S.stopImmediatePropagation();return}const F=this.dataModel.getValueSuggestion(this.valInput.value,this.col);F&&(this.valInput.value=F)});const _=createEl("div",{},this.columns[0]);createEl("label",{text:"Replace With:"},_),this.replaceInput=createEl("input",{},_),this._createButton("Fill All Cells","_all_"),this._createButton("Fill Empty Cells","_blank_"),this._createButton("Replace Value",null),this._createButton("Delete Unused Values","_delete_"),this._createButton("Remove Column","_delete_column_")}_createButton(s,d){const _=createEl("div",{style:{padding:"5px 10px"}},this.columns[1]);createEl("button",{classes:["ciview-button"],text:s},_).addEventListener("click",()=>{const S=d||this.replaceInput.value;S==="_delete_column_"?(this.table._removeColumn(this.col),this.close()):this.dataModel.replaceValues(this.valInput.value,S,this.col)})}}class AddColumnDialog extends BaseDialog{constructor(s,d){const _={doc:d,footer:!0,buttons:[{text:"Add",method:"addColumn"}],width:300,maxHeight:500,title:"Add Column"};super(_,s)}init(s){const d={padding:"5px"};this.table=s;const _=createEl("div",{style:d},this.dialog);createEl("label",{text:"Column Name"},_),this.name=createEl("input",{},_),this.name.addEventListener("keydown",P=>{P.key==="Enter"&&this.addColumn()});const S=createEl("div",{style:d},this.dialog),T=createEl("label",{style:{display:"flex"}},S);this.cloneCheck=createEl("input",{type:"checkbox"},T),createEl("div",{text:"Copy Existing Column"},T);const F=s.getColumnInfo();this.cloneCol=createEl("select",{},S);for(const P of F)createEl("option",{text:P.name,value:P.field},this.cloneCol);const M=createEl("div",{style:d},this.dialog);createEl("label",{text:"Position"},M),this.position=createEl("input",{style:{width:"100px"},value:2},M),setTimeout(()=>this.name.focus(),100)}addColumn(){if(!this.name.value){this.name.focus();return}const s=this.cloneCheck.checked?this.cloneCol.value:null;let d=Number.parseInt(this.position.value);d=Number.isNaN(d)?null:d,this.table.createColumn(this.name.value,s,d),this.close()}}BaseChart.types.table_chart={class:TableChart,name:"Table",params:[{type:"_multi_column:all",name:"Columns To Display"}],extra_controls:()=>[{type:"checkbox",name:"include_index",label:"Include Index"}],init:(f,s,d)=>{f.include_index=d.include_index}};class WGL3DScatterPlot extends WGLChart{constructor(s,d,_){_.title||(_.title=`${s.getColumnName(_.param[0])} x ${s.getColumnName(_.param[1])} x ${s.getColumnName(_.param[2])}`),super(s,d,_,{});const S=this.config;S.axis_scales=S.axis_scales||[1,1,1];const T=S.param;this.dim=this.dataStore.getDimension("range_dimension",T);const F=T.map(z=>this.dataStore.getColumnRange(z)),M=Math.max(...F);this.defaultCDistance=M*4,S.brush=S.brush||"default",S.center=S.center||this._calculateCenter(),this.app=new WGL2DI(this.graphDiv,{mode:"3d",brush:S.brush,cameraDistance:this.defaultCDistance,cameraCenter:[-S.center[0]*2,S.center[1]*2,-S.center[2]*2]}),this.app.addHandler("brush_stopped",(z,oe)=>{this.resetButton.style.display="inline",this.app.setFilter(!0),oe?this._createPolyFilter(range):this._createFilter(z)});const P=this.afterAppCreation(),H=this.dataStore.columnIndex[T[0]],J=this.dataStore.columnIndex[T[1]],K=this.dataStore.columnIndex[T[2]];this.app.addCircles({x:H.datatype==="int32"?new Float32Array(H.data):H.data,y:J.datatype==="int32"?new Float32Array(J.data):J.data,z:K.datatype==="int32"?new Float32Array(K.data):K.data,localFilter:this.dim.getLocalFilter(),globalFilter:s.getFilter(),colorFunc:P}),S.radius=S.radius||5,S.opacity=S.opacity||.8,this.app.setPointRadius(S.radius),this.app.setPointOpacity(S.opacity),S.axis_scales=S.axis_scales||[1,1,1],this.app.axisScales=S.axis_scales,this.addAxis(),this.centerGraph(S.camera),this.app.refresh()}setAxisScales(s,d){const _=this.config;this.config.axis_scales[s]=d,_.center=this._calculateCenter(),this.app.setCameraProperty("center",[-_.center[0]*2,_.center[1]*2,-_.center[2]*2]),this.app.refresh()}getSettings(){let s=super.getSettings({pointMax:30,pointMin:1});const d=this.config;return s=s.concat([{type:"slider",max:3,min:.5,doc:this.__doc__,current_value:d.axis_scales[0],label:"X Axis Scale",func:_=>{this.setAxisScales(0,_)}},{type:"slider",max:3,min:.5,doc:this.__doc__,current_value:d.axis_scales[1],label:"Y Axis Scale",func:_=>{this.setAxisScales(1,_)}},{type:"slider",max:3,min:.5,doc:this.__doc__,current_value:d.axis_scales[2],label:"Z Axis Scale",func:_=>{this.setAxisScales(2,_)}}]),s}centerGraph(s){if(s)this.app.setCamera(s.distance,s.theta,s.phi);else{const d=this.config;d.center=this._calculateCenter(),this.app.setCameraProperty("center",[-d.center[0]*2,d.center[1]*2,-d.center[2]*2]),this.app.setCamera(this.defaultCDistance,-1.038,.261),this.app.removeAllLines(),this.addAxis()}}_calculateCenter(){const s=this.config.param.map(T=>this.dataStore.getMinMaxForColumn(T)),d=this.config.axis_scales;return s.map((T,F)=>[T[0]*1,T[1]*1]).map((T,F)=>T[0]+(T[1]-T[0])/2).map((T,F)=>T*d[F])}getConfig(){const s=super.getConfig();return s.camera=this.app.getCameraSettings(),s}_createFilter(s){this.dim.filter("filterOnIndex",[],s)}onDataAdded(s){const d=this.config.param,_=this.getSetupConfig();_.x=this.dataStore.getRawColumn(d[0]),_.y=this.dataStore.getRawColumn(d[1]),_.z=this.dataStore.getRawColumn(d[2]),this.app.updateSize(s,_),super.onDataAdded(s)}addAxis(){const s=this.config.center,d=this.config.axis_scales;for(let _=0;_<3;_++){const S=this.dataStore.getMinMaxForColumn(this.config.param[_]),T=[0,0,0];T[_]=255;const F=s.map((P,H)=>H===_?S[0]:P/d[H]),M=s.map((P,H)=>H===_?S[1]:P/d[H]);this.app.addLine(F,M,T)}}}BaseChart.types.wgl_3d_scatter_plot={name:"3D Scatter Plot",class:WGL3DScatterPlot,params:[{type:"number",name:"X axis"},{type:"number",name:"Y axis"},{type:"number",name:"Z axis"}]};function constant$3(f){return function(){return f}}const abs=Math.abs,atan2=Math.atan2,cos=Math.cos,max$1=Math.max,min$1=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon$2=1e-12,pi$2=Math.PI,halfPi=pi$2/2,tau$2=2*pi$2;function acos(f){return f>1?0:f<-1?pi$2:Math.acos(f)}function asin(f){return f>=1?halfPi:f<=-1?-halfPi:Math.asin(f)}const pi$1=Math.PI,tau$1=2*pi$1,epsilon$1=1e-6,tauEpsilon$1=tau$1-epsilon$1;function append(f){this._+=f[0];for(let s=1,d=f.length;s<d;++s)this._+=arguments[s]+f[s]}function appendRound(f){let s=Math.floor(f);if(!(s>=0))throw new Error(`invalid digits: ${f}`);if(s>15)return append;const d=10**s;return function(_){this._+=_[0];for(let S=1,T=_.length;S<T;++S)this._+=Math.round(arguments[S]*d)/d+_[S]}}let Path$1=class{constructor(s){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=s==null?append:appendRound(s)}moveTo(s,d){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+d}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(s,d){this._append`L${this._x1=+s},${this._y1=+d}`}quadraticCurveTo(s,d,_,S){this._append`Q${+s},${+d},${this._x1=+_},${this._y1=+S}`}bezierCurveTo(s,d,_,S,T,F){this._append`C${+s},${+d},${+_},${+S},${this._x1=+T},${this._y1=+F}`}arcTo(s,d,_,S,T){if(s=+s,d=+d,_=+_,S=+S,T=+T,T<0)throw new Error(`negative radius: ${T}`);let F=this._x1,M=this._y1,P=_-s,H=S-d,J=F-s,K=M-d,z=J*J+K*K;if(this._x1===null)this._append`M${this._x1=s},${this._y1=d}`;else if(z>epsilon$1)if(!(Math.abs(K*P-H*J)>epsilon$1)||!T)this._append`L${this._x1=s},${this._y1=d}`;else{let oe=_-F,se=S-M,ae=P*P+H*H,ge=oe*oe+se*se,pe=Math.sqrt(ae),he=Math.sqrt(z),ve=T*Math.tan((pi$1-Math.acos((ae+z-ge)/(2*pe*he)))/2),be=ve/he,Re=ve/pe;Math.abs(be-1)>epsilon$1&&this._append`L${s+be*J},${d+be*K}`,this._append`A${T},${T},0,0,${+(K*oe>J*se)},${this._x1=s+Re*P},${this._y1=d+Re*H}`}}arc(s,d,_,S,T,F){if(s=+s,d=+d,_=+_,F=!!F,_<0)throw new Error(`negative radius: ${_}`);let M=_*Math.cos(S),P=_*Math.sin(S),H=s+M,J=d+P,K=1^F,z=F?S-T:T-S;this._x1===null?this._append`M${H},${J}`:(Math.abs(this._x1-H)>epsilon$1||Math.abs(this._y1-J)>epsilon$1)&&this._append`L${H},${J}`,_&&(z<0&&(z=z%tau$1+tau$1),z>tauEpsilon$1?this._append`A${_},${_},0,1,${K},${s-M},${d-P}A${_},${_},0,1,${K},${this._x1=H},${this._y1=J}`:z>epsilon$1&&this._append`A${_},${_},0,${+(z>=pi$1)},${K},${this._x1=s+_*Math.cos(T)},${this._y1=d+_*Math.sin(T)}`)}rect(s,d,_,S){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+d}h${_=+_}v${+S}h${-_}Z`}toString(){return this._}};function withPath(f){let s=3;return f.digits=function(d){if(!arguments.length)return s;if(d==null)s=null;else{const _=Math.floor(d);if(!(_>=0))throw new RangeError(`invalid digits: ${d}`);s=_}return f},()=>new Path$1(s)}function arcInnerRadius(f){return f.innerRadius}function arcOuterRadius(f){return f.outerRadius}function arcStartAngle(f){return f.startAngle}function arcEndAngle(f){return f.endAngle}function arcPadAngle(f){return f&&f.padAngle}function intersect(f,s,d,_,S,T,F,M){var P=d-f,H=_-s,J=F-S,K=M-T,z=K*P-J*H;if(!(z*z<epsilon$2))return z=(J*(s-T)-K*(f-S))/z,[f+z*P,s+z*H]}function cornerTangents(f,s,d,_,S,T,F){var M=f-d,P=s-_,H=(F?T:-T)/sqrt(M*M+P*P),J=H*P,K=-H*M,z=f+J,oe=s+K,se=d+J,ae=_+K,ge=(z+se)/2,pe=(oe+ae)/2,he=se-z,ve=ae-oe,be=he*he+ve*ve,Re=S-T,Fe=z*ae-se*oe,ye=(ve<0?-1:1)*sqrt(max$1(0,Re*Re*be-Fe*Fe)),Ue=(Fe*ve-he*ye)/be,It=(-Fe*he-ve*ye)/be,St=(Fe*ve+he*ye)/be,At=(-Fe*he+ve*ye)/be,xt=Ue-ge,Ct=It-pe,Nt=St-ge,qt=At-pe;return xt*xt+Ct*Ct>Nt*Nt+qt*qt&&(Ue=St,It=At),{cx:Ue,cy:It,x01:-J,y01:-K,x11:Ue*(S/Re-1),y11:It*(S/Re-1)}}function arc(){var f=arcInnerRadius,s=arcOuterRadius,d=constant$3(0),_=null,S=arcStartAngle,T=arcEndAngle,F=arcPadAngle,M=null,P=withPath(H);function H(){var J,K,z=+f.apply(this,arguments),oe=+s.apply(this,arguments),se=S.apply(this,arguments)-halfPi,ae=T.apply(this,arguments)-halfPi,ge=abs(ae-se),pe=ae>se;if(M||(M=J=P()),oe<z&&(K=oe,oe=z,z=K),!(oe>epsilon$2))M.moveTo(0,0);else if(ge>tau$2-epsilon$2)M.moveTo(oe*cos(se),oe*sin(se)),M.arc(0,0,oe,se,ae,!pe),z>epsilon$2&&(M.moveTo(z*cos(ae),z*sin(ae)),M.arc(0,0,z,ae,se,pe));else{var he=se,ve=ae,be=se,Re=ae,Fe=ge,ye=ge,Ue=F.apply(this,arguments)/2,It=Ue>epsilon$2&&(_?+_.apply(this,arguments):sqrt(z*z+oe*oe)),St=min$1(abs(oe-z)/2,+d.apply(this,arguments)),At=St,xt=St,Ct,Nt;if(It>epsilon$2){var qt=asin(It/z*sin(Ue)),Jn=asin(It/oe*sin(Ue));(Fe-=qt*2)>epsilon$2?(qt*=pe?1:-1,be+=qt,Re-=qt):(Fe=0,be=Re=(se+ae)/2),(ye-=Jn*2)>epsilon$2?(Jn*=pe?1:-1,he+=Jn,ve-=Jn):(ye=0,he=ve=(se+ae)/2)}var qr=oe*cos(he),na=oe*sin(he),qn=z*cos(Re),vA=z*sin(Re);if(St>epsilon$2){var TA=oe*cos(ve),VA=oe*sin(ve),mI=z*cos(be),jA=z*sin(be),aI;if(ge<pi$2)if(aI=intersect(qr,na,mI,jA,TA,VA,qn,vA)){var WA=qr-aI[0],KA=na-aI[1],rA=TA-aI[0],ta=VA-aI[1],fa=1/sin(acos((WA*rA+KA*ta)/(sqrt(WA*WA+KA*KA)*sqrt(rA*rA+ta*ta)))/2),yA=sqrt(aI[0]*aI[0]+aI[1]*aI[1]);At=min$1(St,(z-yA)/(fa-1)),xt=min$1(St,(oe-yA)/(fa+1))}else At=xt=0}ye>epsilon$2?xt>epsilon$2?(Ct=cornerTangents(mI,jA,qr,na,oe,xt,pe),Nt=cornerTangents(TA,VA,qn,vA,oe,xt,pe),M.moveTo(Ct.cx+Ct.x01,Ct.cy+Ct.y01),xt<St?M.arc(Ct.cx,Ct.cy,xt,atan2(Ct.y01,Ct.x01),atan2(Nt.y01,Nt.x01),!pe):(M.arc(Ct.cx,Ct.cy,xt,atan2(Ct.y01,Ct.x01),atan2(Ct.y11,Ct.x11),!pe),M.arc(0,0,oe,atan2(Ct.cy+Ct.y11,Ct.cx+Ct.x11),atan2(Nt.cy+Nt.y11,Nt.cx+Nt.x11),!pe),M.arc(Nt.cx,Nt.cy,xt,atan2(Nt.y11,Nt.x11),atan2(Nt.y01,Nt.x01),!pe))):(M.moveTo(qr,na),M.arc(0,0,oe,he,ve,!pe)):M.moveTo(qr,na),!(z>epsilon$2)||!(Fe>epsilon$2)?M.lineTo(qn,vA):At>epsilon$2?(Ct=cornerTangents(qn,vA,TA,VA,z,-At,pe),Nt=cornerTangents(qr,na,mI,jA,z,-At,pe),M.lineTo(Ct.cx+Ct.x01,Ct.cy+Ct.y01),At<St?M.arc(Ct.cx,Ct.cy,At,atan2(Ct.y01,Ct.x01),atan2(Nt.y01,Nt.x01),!pe):(M.arc(Ct.cx,Ct.cy,At,atan2(Ct.y01,Ct.x01),atan2(Ct.y11,Ct.x11),!pe),M.arc(0,0,z,atan2(Ct.cy+Ct.y11,Ct.cx+Ct.x11),atan2(Nt.cy+Nt.y11,Nt.cx+Nt.x11),pe),M.arc(Nt.cx,Nt.cy,At,atan2(Nt.y11,Nt.x11),atan2(Nt.y01,Nt.x01),!pe))):M.arc(0,0,z,Re,be,pe)}if(M.closePath(),J)return M=null,J+""||null}return H.centroid=function(){var J=(+f.apply(this,arguments)+ +s.apply(this,arguments))/2,K=(+S.apply(this,arguments)+ +T.apply(this,arguments))/2-pi$2/2;return[cos(K)*J,sin(K)*J]},H.innerRadius=function(J){return arguments.length?(f=typeof J=="function"?J:constant$3(+J),H):f},H.outerRadius=function(J){return arguments.length?(s=typeof J=="function"?J:constant$3(+J),H):s},H.cornerRadius=function(J){return arguments.length?(d=typeof J=="function"?J:constant$3(+J),H):d},H.padRadius=function(J){return arguments.length?(_=J==null?null:typeof J=="function"?J:constant$3(+J),H):_},H.startAngle=function(J){return arguments.length?(S=typeof J=="function"?J:constant$3(+J),H):S},H.endAngle=function(J){return arguments.length?(T=typeof J=="function"?J:constant$3(+J),H):T},H.padAngle=function(J){return arguments.length?(F=typeof J=="function"?J:constant$3(+J),H):F},H.context=function(J){return arguments.length?(M=J??null,H):M},H}function array(f){return typeof f=="object"&&"length"in f?f:Array.from(f)}function Linear(f){this._context=f}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(f,s){switch(f=+f,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(f,s):this._context.moveTo(f,s);break;case 1:this._point=2;default:this._context.lineTo(f,s);break}}};function curveLinear(f){return new Linear(f)}function x$2(f){return f[0]}function y$2(f){return f[1]}function line(f,s){var d=constant$3(!0),_=null,S=curveLinear,T=null,F=withPath(M);f=typeof f=="function"?f:f===void 0?x$2:constant$3(f),s=typeof s=="function"?s:s===void 0?y$2:constant$3(s);function M(P){var H,J=(P=array(P)).length,K,z=!1,oe;for(_==null&&(T=S(oe=F())),H=0;H<=J;++H)!(H<J&&d(K=P[H],H,P))===z&&((z=!z)?T.lineStart():T.lineEnd()),z&&T.point(+f(K,H,P),+s(K,H,P));if(oe)return T=null,oe+""||null}return M.x=function(P){return arguments.length?(f=typeof P=="function"?P:constant$3(+P),M):f},M.y=function(P){return arguments.length?(s=typeof P=="function"?P:constant$3(+P),M):s},M.defined=function(P){return arguments.length?(d=typeof P=="function"?P:constant$3(!!P),M):d},M.curve=function(P){return arguments.length?(S=P,_!=null&&(T=S(_)),M):S},M.context=function(P){return arguments.length?(P==null?_=T=null:T=S(_=P),M):_},M}function area(f,s,d){var _=null,S=constant$3(!0),T=null,F=curveLinear,M=null,P=withPath(H);f=typeof f=="function"?f:f===void 0?x$2:constant$3(+f),s=typeof s=="function"?s:constant$3(s===void 0?0:+s),d=typeof d=="function"?d:d===void 0?y$2:constant$3(+d);function H(K){var z,oe,se,ae=(K=array(K)).length,ge,pe=!1,he,ve=new Array(ae),be=new Array(ae);for(T==null&&(M=F(he=P())),z=0;z<=ae;++z){if(!(z<ae&&S(ge=K[z],z,K))===pe)if(pe=!pe)oe=z,M.areaStart(),M.lineStart();else{for(M.lineEnd(),M.lineStart(),se=z-1;se>=oe;--se)M.point(ve[se],be[se]);M.lineEnd(),M.areaEnd()}pe&&(ve[z]=+f(ge,z,K),be[z]=+s(ge,z,K),M.point(_?+_(ge,z,K):ve[z],d?+d(ge,z,K):be[z]))}if(he)return M=null,he+""||null}function J(){return line().defined(S).curve(F).context(T)}return H.x=function(K){return arguments.length?(f=typeof K=="function"?K:constant$3(+K),_=null,H):f},H.x0=function(K){return arguments.length?(f=typeof K=="function"?K:constant$3(+K),H):f},H.x1=function(K){return arguments.length?(_=K==null?null:typeof K=="function"?K:constant$3(+K),H):_},H.y=function(K){return arguments.length?(s=typeof K=="function"?K:constant$3(+K),d=null,H):s},H.y0=function(K){return arguments.length?(s=typeof K=="function"?K:constant$3(+K),H):s},H.y1=function(K){return arguments.length?(d=K==null?null:typeof K=="function"?K:constant$3(+K),H):d},H.lineX0=H.lineY0=function(){return J().x(f).y(s)},H.lineY1=function(){return J().x(f).y(d)},H.lineX1=function(){return J().x(_).y(s)},H.defined=function(K){return arguments.length?(S=typeof K=="function"?K:constant$3(!!K),H):S},H.curve=function(K){return arguments.length?(F=K,T!=null&&(M=F(T)),H):F},H.context=function(K){return arguments.length?(K==null?T=M=null:M=F(T=K),H):T},H}function descending(f,s){return s<f?-1:s>f?1:s>=f?0:NaN}function identity(f){return f}function pie(){var f=identity,s=descending,d=null,_=constant$3(0),S=constant$3(tau$2),T=constant$3(0);function F(M){var P,H=(M=array(M)).length,J,K,z=0,oe=new Array(H),se=new Array(H),ae=+_.apply(this,arguments),ge=Math.min(tau$2,Math.max(-tau$2,S.apply(this,arguments)-ae)),pe,he=Math.min(Math.abs(ge)/H,T.apply(this,arguments)),ve=he*(ge<0?-1:1),be;for(P=0;P<H;++P)(be=se[oe[P]=P]=+f(M[P],P,M))>0&&(z+=be);for(s!=null?oe.sort(function(Re,Fe){return s(se[Re],se[Fe])}):d!=null&&oe.sort(function(Re,Fe){return d(M[Re],M[Fe])}),P=0,K=z?(ge-H*ve)/z:0;P<H;++P,ae=pe)J=oe[P],be=se[J],pe=ae+(be>0?be*K:0)+ve,se[J]={data:M[J],index:P,value:be,startAngle:ae,endAngle:pe,padAngle:he};return se}return F.value=function(M){return arguments.length?(f=typeof M=="function"?M:constant$3(+M),F):f},F.sortValues=function(M){return arguments.length?(s=M,d=null,F):s},F.sort=function(M){return arguments.length?(d=M,s=null,F):d},F.startAngle=function(M){return arguments.length?(_=typeof M=="function"?M:constant$3(+M),F):_},F.endAngle=function(M){return arguments.length?(S=typeof M=="function"?M:constant$3(+M),F):S},F.padAngle=function(M){return arguments.length?(T=typeof M=="function"?M:constant$3(+M),F):T},F}function point(f,s,d){f._context.bezierCurveTo((2*f._x0+f._x1)/3,(2*f._y0+f._y1)/3,(f._x0+2*f._x1)/3,(f._y0+2*f._y1)/3,(f._x0+4*f._x1+s)/6,(f._y0+4*f._y1+d)/6)}function Basis(f){this._context=f}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(f,s){switch(f=+f,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(f,s):this._context.moveTo(f,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point(this,f,s);break}this._x0=this._x1,this._x1=f,this._y0=this._y1,this._y1=s}};function curveBasis(f){return new Basis(f)}class RingChart extends CategoryChart{constructor(s,d,_){super(s,d,_,{x:{}}),this.config.type="ring_chart",this.pie=pie().sort(null).value(S=>S[0]),this.arc=arc(),this.onDataFiltered(null)}drawChart(s=1e3){select(this.contentDiv).transition().duration(s).ease(linear);const d=this._getContentDimensions(),_=Math.min(d.width,d.height)/2,S=d.left+d.width/2,T=d.top+d.height/2;this.graph_area.attr("transform",`translate(${S},${T})`),this.arc.innerRadius(_*.5).outerRadius(_*.9);const F=Math.floor(_/8),M=this.dataStore.getColumnValues(this.config.param),P=this.dataStore.getColumnColors(this.config.param),H=this.pie(this.rowData.filter(J=>J[0]!==0));this.graph_area.selectAll(".pie-arc").data(H,(J,K)=>{J.data[1]}).join("path").on("click",(J,K)=>{this.filterCategories(M[K.data[1]],J.shiftKey)}).style("fill",(J,K)=>this.filter.length>0&&this.filter.indexOf(M[J.data[1]])===-1?"lightgray":P[J.data[1]]).attr("class","pie-arc").attr("stroke","white").attr("d",this.arc).style("stroke-width","2px"),this.graph_area.selectAll(".pie-text").data(H,(J,K)=>{J.data[1]}).join("text").on("click",(J,K)=>{this.filterCategories(M[K.data[1]],J.shiftKey)}).attr("class","pie-text").text((J,K)=>J.endAngle-J.startAngle>.4?M[J.data[1]]:"").attr("x",J=>this.arc.centroid(J)[0]).attr("font-size",`${F}px`).attr("y",J=>this.arc.centroid(J)[1]).attr("text-anchor","middle").attr("dominant-baseline","central")}}BaseChart.types.ring_chart={class:RingChart,name:"Pie Chart",params:[{type:"text",name:"Category"}]};class TextBoxChart extends BaseChart{constructor(s,d,_){super(s,d,_);const S=this.config;S.text=S.text||"",this.para=createEl("div",{styles:{padding:"5px",overflowY:"auto",maxHeight:"100%"}},this.contentDiv),__vitePreload(async()=>{const{default:T}=await import("../assets/MarkdownText-Bkm5FGkF.js");return{default:T}},[],import.meta.url).then(({default:T})=>{this.render=T,this.para.innerHTML=this.render(S.text)})}getSettings(){const s=super.getSettings(),d=this.config;return s.push({label:"Markdown Text",type:"textbox",current_value:d.text,func:_=>{d.text=_,this.para.innerHTML=this.render(_)}}),s}}BaseChart.types.text_box_chart={class:TextBoxChart,name:"Text Box",params:[],extra_controls:()=>[{type:"textbox",name:"text",label:"Markdown Text:"}],init:(f,s,d)=>{f.text=d.text}};const distances={euclidean:(f,s)=>{let d=0;for(let _=0;_<f.length;_++)d+=(Number.isNaN(s[_])?0:s[_]-f[_])**2;return Math.sqrt(d)},manhattan:(f,s)=>{let d=0;for(let _=0;_<f.length;_++)d+=Math.abs(s[_]-f[_]);return d},max:(f,s)=>{let d=0;for(let _=0;_<f.length;_++)d=Math.max(d,Math.abs(s[_]-f[_]));return d}};class HierarchicalClustering{constructor(s,d,_){this.distance=distances[s],this.distance||(this.distance=distances.euclidean),this.linkage=d||"average",this.threshold=_===void 0?Number.POSITIVE_INFINITY:_}cluster(s,d,_){this.clusters=[],this.dists=[],this.mins=[],this.index=[];for(let F=0;F<s.length;F++){const M={value:s[F],key:F,index:F,size:1};this.clusters[F]=M,this.index[F]=M,this.dists[F]=[],this.mins[F]=0}for(let F=0;F<this.clusters.length;F++)for(let M=0;M<=F;M++){const P=F===M?Number.POSITIVE_INFINITY:this.distance(this.clusters[F].value,this.clusters[M].value);this.dists[F][M]=P,this.dists[M][F]=P,P<this.dists[F][this.mins[F]]&&(this.mins[F]=M)}let S=this.mergeClosest(),T=0;for(;S;)_&&T++%d===0&&_(this.clusters),S=this.mergeClosest();return this.clusters.forEach(F=>{F.key=void 0,F.index=void 0}),this.node_order=[],this.order=0,this.orderClusters(this.clusters[0]),this.clusters}mergeClosest(){let s=0,d=Number.POSITIVE_INFINITY;for(let F=0;F<this.clusters.length;F++){const M=this.clusters[F].key,P=this.dists[M][this.mins[M]];P<d&&(s=M,d=P)}if(d>=this.threshold)return!1;const _=this.index[s],S=this.index[this.mins[s]],T={children:[_,S],key:_.key,size:_.size+S.size};this.clusters[_.index]=T,this.clusters.splice(S.index,1),this.index[_.key]=T;for(let F=0;F<this.clusters.length;F++){const M=this.clusters[F];let P;_.key===M.key?P=Number.POSITIVE_INFINITY:this.linkage==="single"?(P=this.dists[_.key][M.key],this.dists[_.key][M.key]>this.dists[S.key][M.key]&&(P=this.dists[S.key][M.key])):this.linkage==="complete"?(P=this.dists[_.key][M.key],this.dists[_.key][M.key]<this.dists[S.key][M.key]&&(P=this.dists[S.key][M.key])):this.linkage==="average"?P=(this.dists[_.key][M.key]*_.size+this.dists[S.key][M.key]*S.size)/(_.size+S.size):P=this.distance(M.value,_.value),this.dists[_.key][M.key]=this.dists[M.key][_.key]=P}for(let F=0;F<this.clusters.length;F++){const M=this.clusters[F].key;if(this.mins[M]===_.key||this.mins[M]===S.key){let P=M;for(let H=0;H<this.clusters.length;H++){const J=this.clusters[H].key;this.dists[M][J]<this.dists[M][P]&&(P=J)}this.mins[M]=P}this.clusters[F].index=F}return _.key=void 0,S.key=void 0,_.index=void 0,S.index=void 0,!0}orderClusters(s){for(const d in s)d==="children"&&(this.orderClusters(s[d][0]),this.orderClusters(s[d][1])),d==="value"&&(s[d]._order=this.order++,this.node_order.push(s[d]._id))}}function getHierarchicalNodes(f,s={}){const d=new HierarchicalClustering(s.distance,s.linkage,s.threshold);d.cluster(f);try{const _=hierarchy(d.clusters[0]);for(const S of _.descendants()){const T=S.data;T.size=void 0,T.value&&(T.id=T.value._id,T.order=T.value._order,T.value=void 0)}return{nodes:_,order:d.node_order}}catch(_){return console.error(_),{nodes:{children:[],data:{children:[]},depth:0,height:0,parent:null},order:[]}}}function parseNewick(f){let s=0;const d=/([^:;,()\s]*)(?:\s*:\s*([\d.]+)\s*)?([,);])|(\S)/g,_=`${f};`,S=function T(F=-1){const M=[];let P,H,J,K,z,oe=s++;if([z,P,H,J,K]=d.exec(_),K==="("){for(;"(,".includes(K);)[node,K]=T(oe),M.push(node);[z,P,H,J,K]=d.exec(_)}return[{id:oe,name:P,length:+H,parentid:F,children:M},J]}()[0];return hierarchy(S)}function forceCenter(f,s){var d,_=1;f==null&&(f=0),s==null&&(s=0);function S(){var T,F=d.length,M,P=0,H=0;for(T=0;T<F;++T)M=d[T],P+=M.x,H+=M.y;for(P=(P/F-f)*_,H=(H/F-s)*_,T=0;T<F;++T)M=d[T],M.x-=P,M.y-=H}return S.initialize=function(T){d=T},S.x=function(T){return arguments.length?(f=+T,S):f},S.y=function(T){return arguments.length?(s=+T,S):s},S.strength=function(T){return arguments.length?(_=+T,S):_},S}function tree_add(f){const s=+this._x.call(null,f),d=+this._y.call(null,f);return add(this.cover(s,d),s,d,f)}function add(f,s,d,_){if(isNaN(s)||isNaN(d))return f;var S,T=f._root,F={data:_},M=f._x0,P=f._y0,H=f._x1,J=f._y1,K,z,oe,se,ae,ge,pe,he;if(!T)return f._root=F,f;for(;T.length;)if((ae=s>=(K=(M+H)/2))?M=K:H=K,(ge=d>=(z=(P+J)/2))?P=z:J=z,S=T,!(T=T[pe=ge<<1|ae]))return S[pe]=F,f;if(oe=+f._x.call(null,T.data),se=+f._y.call(null,T.data),s===oe&&d===se)return F.next=T,S?S[pe]=F:f._root=F,f;do S=S?S[pe]=new Array(4):f._root=new Array(4),(ae=s>=(K=(M+H)/2))?M=K:H=K,(ge=d>=(z=(P+J)/2))?P=z:J=z;while((pe=ge<<1|ae)===(he=(se>=z)<<1|oe>=K));return S[he]=T,S[pe]=F,f}function addAll(f){var s,d,_=f.length,S,T,F=new Array(_),M=new Array(_),P=1/0,H=1/0,J=-1/0,K=-1/0;for(d=0;d<_;++d)isNaN(S=+this._x.call(null,s=f[d]))||isNaN(T=+this._y.call(null,s))||(F[d]=S,M[d]=T,S<P&&(P=S),S>J&&(J=S),T<H&&(H=T),T>K&&(K=T));if(P>J||H>K)return this;for(this.cover(P,H).cover(J,K),d=0;d<_;++d)add(this,F[d],M[d],f[d]);return this}function tree_cover(f,s){if(isNaN(f=+f)||isNaN(s=+s))return this;var d=this._x0,_=this._y0,S=this._x1,T=this._y1;if(isNaN(d))S=(d=Math.floor(f))+1,T=(_=Math.floor(s))+1;else{for(var F=S-d||1,M=this._root,P,H;d>f||f>=S||_>s||s>=T;)switch(H=(s<_)<<1|f<d,P=new Array(4),P[H]=M,M=P,F*=2,H){case 0:S=d+F,T=_+F;break;case 1:d=S-F,T=_+F;break;case 2:S=d+F,_=T-F;break;case 3:d=S-F,_=T-F;break}this._root&&this._root.length&&(this._root=M)}return this._x0=d,this._y0=_,this._x1=S,this._y1=T,this}function tree_data(){var f=[];return this.visit(function(s){if(!s.length)do f.push(s.data);while(s=s.next)}),f}function tree_extent(f){return arguments.length?this.cover(+f[0][0],+f[0][1]).cover(+f[1][0],+f[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(f,s,d,_,S){this.node=f,this.x0=s,this.y0=d,this.x1=_,this.y1=S}function tree_find(f,s,d){var _,S=this._x0,T=this._y0,F,M,P,H,J=this._x1,K=this._y1,z=[],oe=this._root,se,ae;for(oe&&z.push(new Quad(oe,S,T,J,K)),d==null?d=1/0:(S=f-d,T=s-d,J=f+d,K=s+d,d*=d);se=z.pop();)if(!(!(oe=se.node)||(F=se.x0)>J||(M=se.y0)>K||(P=se.x1)<S||(H=se.y1)<T))if(oe.length){var ge=(F+P)/2,pe=(M+H)/2;z.push(new Quad(oe[3],ge,pe,P,H),new Quad(oe[2],F,pe,ge,H),new Quad(oe[1],ge,M,P,pe),new Quad(oe[0],F,M,ge,pe)),(ae=(s>=pe)<<1|f>=ge)&&(se=z[z.length-1],z[z.length-1]=z[z.length-1-ae],z[z.length-1-ae]=se)}else{var he=f-+this._x.call(null,oe.data),ve=s-+this._y.call(null,oe.data),be=he*he+ve*ve;if(be<d){var Re=Math.sqrt(d=be);S=f-Re,T=s-Re,J=f+Re,K=s+Re,_=oe.data}}return _}function tree_remove(f){if(isNaN(J=+this._x.call(null,f))||isNaN(K=+this._y.call(null,f)))return this;var s,d=this._root,_,S,T,F=this._x0,M=this._y0,P=this._x1,H=this._y1,J,K,z,oe,se,ae,ge,pe;if(!d)return this;if(d.length)for(;;){if((se=J>=(z=(F+P)/2))?F=z:P=z,(ae=K>=(oe=(M+H)/2))?M=oe:H=oe,s=d,!(d=d[ge=ae<<1|se]))return this;if(!d.length)break;(s[ge+1&3]||s[ge+2&3]||s[ge+3&3])&&(_=s,pe=ge)}for(;d.data!==f;)if(S=d,!(d=d.next))return this;return(T=d.next)&&delete d.next,S?(T?S.next=T:delete S.next,this):s?(T?s[ge]=T:delete s[ge],(d=s[0]||s[1]||s[2]||s[3])&&d===(s[3]||s[2]||s[1]||s[0])&&!d.length&&(_?_[pe]=d:this._root=d),this):(this._root=T,this)}function removeAll(f){for(var s=0,d=f.length;s<d;++s)this.remove(f[s]);return this}function tree_root(){return this._root}function tree_size(){var f=0;return this.visit(function(s){if(!s.length)do++f;while(s=s.next)}),f}function tree_visit(f){var s=[],d,_=this._root,S,T,F,M,P;for(_&&s.push(new Quad(_,this._x0,this._y0,this._x1,this._y1));d=s.pop();)if(!f(_=d.node,T=d.x0,F=d.y0,M=d.x1,P=d.y1)&&_.length){var H=(T+M)/2,J=(F+P)/2;(S=_[3])&&s.push(new Quad(S,H,J,M,P)),(S=_[2])&&s.push(new Quad(S,T,J,H,P)),(S=_[1])&&s.push(new Quad(S,H,F,M,J)),(S=_[0])&&s.push(new Quad(S,T,F,H,J))}return this}function tree_visitAfter(f){var s=[],d=[],_;for(this._root&&s.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));_=s.pop();){var S=_.node;if(S.length){var T,F=_.x0,M=_.y0,P=_.x1,H=_.y1,J=(F+P)/2,K=(M+H)/2;(T=S[0])&&s.push(new Quad(T,F,M,J,K)),(T=S[1])&&s.push(new Quad(T,J,M,P,K)),(T=S[2])&&s.push(new Quad(T,F,K,J,H)),(T=S[3])&&s.push(new Quad(T,J,K,P,H))}d.push(_)}for(;_=d.pop();)f(_.node,_.x0,_.y0,_.x1,_.y1);return this}function defaultX(f){return f[0]}function tree_x(f){return arguments.length?(this._x=f,this):this._x}function defaultY(f){return f[1]}function tree_y(f){return arguments.length?(this._y=f,this):this._y}function quadtree(f,s,d){var _=new Quadtree(s??defaultX,d??defaultY,NaN,NaN,NaN,NaN);return f==null?_:_.addAll(f)}function Quadtree(f,s,d,_,S,T){this._x=f,this._y=s,this._x0=d,this._y0=_,this._x1=S,this._y1=T,this._root=void 0}function leaf_copy(f){for(var s={data:f.data},d=s;f=f.next;)d=d.next={data:f.data};return s}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var f=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),s=this._root,d,_;if(!s)return f;if(!s.length)return f._root=leaf_copy(s),f;for(d=[{source:s,target:f._root=new Array(4)}];s=d.pop();)for(var S=0;S<4;++S)(_=s.source[S])&&(_.length?d.push({source:_,target:s.target[S]=new Array(4)}):s.target[S]=leaf_copy(_));return f};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function constant$2(f){return function(){return f}}function jiggle(f){return(f()-.5)*1e-6}function index(f){return f.index}function find$1(f,s){var d=f.get(s);if(!d)throw new Error("node not found: "+s);return d}function forceLink(f){var s=index,d=K,_,S=constant$2(30),T,F,M,P,H,J=1;f==null&&(f=[]);function K(ge){return 1/Math.min(M[ge.source.index],M[ge.target.index])}function z(ge){for(var pe=0,he=f.length;pe<J;++pe)for(var ve=0,be,Re,Fe,ye,Ue,It,St;ve<he;++ve)be=f[ve],Re=be.source,Fe=be.target,ye=Fe.x+Fe.vx-Re.x-Re.vx||jiggle(H),Ue=Fe.y+Fe.vy-Re.y-Re.vy||jiggle(H),It=Math.sqrt(ye*ye+Ue*Ue),It=(It-T[ve])/It*ge*_[ve],ye*=It,Ue*=It,Fe.vx-=ye*(St=P[ve]),Fe.vy-=Ue*St,Re.vx+=ye*(St=1-St),Re.vy+=Ue*St}function oe(){if(F){var ge,pe=F.length,he=f.length,ve=new Map(F.map((Re,Fe)=>[s(Re,Fe,F),Re])),be;for(ge=0,M=new Array(pe);ge<he;++ge)be=f[ge],be.index=ge,typeof be.source!="object"&&(be.source=find$1(ve,be.source)),typeof be.target!="object"&&(be.target=find$1(ve,be.target)),M[be.source.index]=(M[be.source.index]||0)+1,M[be.target.index]=(M[be.target.index]||0)+1;for(ge=0,P=new Array(he);ge<he;++ge)be=f[ge],P[ge]=M[be.source.index]/(M[be.source.index]+M[be.target.index]);_=new Array(he),se(),T=new Array(he),ae()}}function se(){if(F)for(var ge=0,pe=f.length;ge<pe;++ge)_[ge]=+d(f[ge],ge,f)}function ae(){if(F)for(var ge=0,pe=f.length;ge<pe;++ge)T[ge]=+S(f[ge],ge,f)}return z.initialize=function(ge,pe){F=ge,H=pe,oe()},z.links=function(ge){return arguments.length?(f=ge,oe(),z):f},z.id=function(ge){return arguments.length?(s=ge,z):s},z.iterations=function(ge){return arguments.length?(J=+ge,z):J},z.strength=function(ge){return arguments.length?(d=typeof ge=="function"?ge:constant$2(+ge),se(),z):d},z.distance=function(ge){return arguments.length?(S=typeof ge=="function"?ge:constant$2(+ge),ae(),z):S},z}const a=1664525,c$1=1013904223,m=4294967296;function lcg(){let f=1;return()=>(f=(a*f+c$1)%m)/m}function x$1(f){return f.x}function y$1(f){return f.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function forceSimulation(f){var s,d=1,_=.001,S=1-Math.pow(_,1/300),T=0,F=.6,M=new Map,P=timer(K),H=dispatch("tick","end"),J=lcg();f==null&&(f=[]);function K(){z(),H.call("tick",s),d<_&&(P.stop(),H.call("end",s))}function z(ae){var ge,pe=f.length,he;ae===void 0&&(ae=1);for(var ve=0;ve<ae;++ve)for(d+=(T-d)*S,M.forEach(function(be){be(d)}),ge=0;ge<pe;++ge)he=f[ge],he.fx==null?he.x+=he.vx*=F:(he.x=he.fx,he.vx=0),he.fy==null?he.y+=he.vy*=F:(he.y=he.fy,he.vy=0);return s}function oe(){for(var ae=0,ge=f.length,pe;ae<ge;++ae){if(pe=f[ae],pe.index=ae,pe.fx!=null&&(pe.x=pe.fx),pe.fy!=null&&(pe.y=pe.fy),isNaN(pe.x)||isNaN(pe.y)){var he=initialRadius*Math.sqrt(.5+ae),ve=ae*initialAngle;pe.x=he*Math.cos(ve),pe.y=he*Math.sin(ve)}(isNaN(pe.vx)||isNaN(pe.vy))&&(pe.vx=pe.vy=0)}}function se(ae){return ae.initialize&&ae.initialize(f,J),ae}return oe(),s={tick:z,restart:function(){return P.restart(K),s},stop:function(){return P.stop(),s},nodes:function(ae){return arguments.length?(f=ae,oe(),M.forEach(se),s):f},alpha:function(ae){return arguments.length?(d=+ae,s):d},alphaMin:function(ae){return arguments.length?(_=+ae,s):_},alphaDecay:function(ae){return arguments.length?(S=+ae,s):+S},alphaTarget:function(ae){return arguments.length?(T=+ae,s):T},velocityDecay:function(ae){return arguments.length?(F=1-ae,s):1-F},randomSource:function(ae){return arguments.length?(J=ae,M.forEach(se),s):J},force:function(ae,ge){return arguments.length>1?(ge==null?M.delete(ae):M.set(ae,se(ge)),s):M.get(ae)},find:function(ae,ge,pe){var he=0,ve=f.length,be,Re,Fe,ye,Ue;for(pe==null?pe=1/0:pe*=pe,he=0;he<ve;++he)ye=f[he],be=ae-ye.x,Re=ge-ye.y,Fe=be*be+Re*Re,Fe<pe&&(Ue=ye,pe=Fe);return Ue},on:function(ae,ge){return arguments.length>1?(H.on(ae,ge),s):H.on(ae)}}}function forceManyBody(){var f,s,d,_,S=constant$2(-30),T,F=1,M=1/0,P=.81;function H(oe){var se,ae=f.length,ge=quadtree(f,x$1,y$1).visitAfter(K);for(_=oe,se=0;se<ae;++se)s=f[se],ge.visit(z)}function J(){if(f){var oe,se=f.length,ae;for(T=new Array(se),oe=0;oe<se;++oe)ae=f[oe],T[ae.index]=+S(ae,oe,f)}}function K(oe){var se=0,ae,ge,pe=0,he,ve,be;if(oe.length){for(he=ve=be=0;be<4;++be)(ae=oe[be])&&(ge=Math.abs(ae.value))&&(se+=ae.value,pe+=ge,he+=ge*ae.x,ve+=ge*ae.y);oe.x=he/pe,oe.y=ve/pe}else{ae=oe,ae.x=ae.data.x,ae.y=ae.data.y;do se+=T[ae.data.index];while(ae=ae.next)}oe.value=se}function z(oe,se,ae,ge){if(!oe.value)return!0;var pe=oe.x-s.x,he=oe.y-s.y,ve=ge-se,be=pe*pe+he*he;if(ve*ve/P<be)return be<M&&(pe===0&&(pe=jiggle(d),be+=pe*pe),he===0&&(he=jiggle(d),be+=he*he),be<F&&(be=Math.sqrt(F*be)),s.vx+=pe*oe.value*_/be,s.vy+=he*oe.value*_/be),!0;if(oe.length||be>=M)return;(oe.data!==s||oe.next)&&(pe===0&&(pe=jiggle(d),be+=pe*pe),he===0&&(he=jiggle(d),be+=he*he),be<F&&(be=Math.sqrt(F*be)));do oe.data!==s&&(ve=T[oe.data.index]*_/be,s.vx+=pe*ve,s.vy+=he*ve);while(oe=oe.next)}return H.initialize=function(oe,se){f=oe,d=se,J()},H.strength=function(oe){return arguments.length?(S=typeof oe=="function"?oe:constant$2(+oe),J(),H):S},H.distanceMin=function(oe){return arguments.length?(F=oe*oe,H):Math.sqrt(F)},H.distanceMax=function(oe){return arguments.length?(M=oe*oe,H):Math.sqrt(M)},H.theta=function(oe){return arguments.length?(P=oe*oe,H):Math.sqrt(P)},H}function colors(f){for(var s=f.length/6|0,d=new Array(s),_=0;_<s;)d[_]="#"+f.slice(_*6,++_*6);return d}const ramp=f=>rgbBasis(f[f.length-1]);var scheme=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors);ramp(scheme);function Transform(f,s,d){this.k=f,this.x=s,this.y=d}Transform.prototype={constructor:Transform,scale:function(f){return f===1?this:new Transform(this.k*f,this.x,this.y)},translate:function(f,s){return f===0&s===0?this:new Transform(this.k,this.x+this.k*f,this.y+this.k*s)},apply:function(f){return[f[0]*this.k+this.x,f[1]*this.k+this.y]},applyX:function(f){return f*this.k+this.x},applyY:function(f){return f*this.k+this.y},invert:function(f){return[(f[0]-this.x)/this.k,(f[1]-this.y)/this.k]},invertX:function(f){return(f-this.x)/this.k},invertY:function(f){return(f-this.y)/this.k},rescaleX:function(f){return f.copy().domain(f.range().map(this.invertX,this).map(f.invert,f))},rescaleY:function(f){return f.copy().domain(f.range().map(this.invertY,this).map(f.invert,f))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform.prototype;class HeatMap extends SVGChart{constructor(s,d,_){_.title=_.title||s.getColumnName(_.param[0]),super(s,d,_,{x:{type:"band"},y:{type:"band"},tx:{custom:!0,size:45}});const S=this.config.param,T=this.dataStore.getColumnValues(S[0]);this.x_scale.domain(T.slice(0));const F=[],M=this.config;M.method=M.method||"mean",M.color_scale=M.color_scale||{log:!1},M.color_legend||(M.color_legend={display:!0}),this.setColorFunction();for(let P=1;P<S.length;P++)F.push(this.dataStore.getColumnName(S[P]));this.cat_scale=linear$1().range([0,40]),this.cat_axis_svg=this.svg.append("g"),this.cat_axis_call=axisLeft(this.cat_scale).ticks(3),this.y_scale.domain(F),this.dim=this.dataStore.getDimension("catcol_dimension"),M.cluster_rows&&(this.margins.right=70),this.addToolTip(),this.onDataFiltered()}remove(s=!0){this.dim.destroy(s),super.remove()}getChartData(){const s=this.data.transpose,d=new Array(s.length+1),_=this.dataStore.getColumnName(this.config.param[0]),S=this.config.param.slice(1).map(F=>this.dataStore.getColumnName(F));d[0]=[_].concat(S).join("	");const T=this.dataStore.getColumnValues(this.config.param[0]);for(let F=0;F<s.length;F++)d[F+1]=[T[s[F]._id]].concat(s[F]).join("	");return new Blob([d.join(`
`)],{type:"text/plain"})}setColorFunction(){const s=this.config.param,d={useValue:!0,overideValues:{colorLogScale:this.config.color_scale.log,colors:["#313695","#4575B4","#74ADD1","#ABD9E9","#E0F3F8","#E0F3F8","#FFFFBF","#FEE090","#FDAE61","#F46D43","#D73027","#A50026"],max:1,min:0}};this.colorFunction=this.dataStore.getColorFunction(s[1],d),this.setColorLegend()}getColorLegend(){const d={overideValues:{max:1,min:0,colorLogScale:this.config.color_scale.log,colors:["#313695","#4575B4","#74ADD1","#ABD9E9","#E0F3F8","#E0F3F8","#FFFFBF","#FEE090","#FDAE61","#F46D43","#D73027","#A50026"]},name:"Scale"};return this.dataStore.getColorLegend(this.config.param[1],d)}onDataFiltered(s){if(this.dim===s||this.isPinned)return;s==="all_removed"&&(this.filter=[],this.resetButton.style.display="none");const d={method:this.config.method,scaleVals:[]},_=this.config.param,S=this.config.color_scale.trim==="none"?null:this.config.color_scale.trim;for(let T=1;T<_.length;T++){const F=this.dataStore.columnIndex[_[T]];d.scaleVals.push([S?F.quantiles[S][0]:F.minMax[0],S?F.quantiles[S][1]:F.minMax[1]])}this.dim.getAverages(T=>{this.data=T;try{this.clusterRows(),this.clusterColumns(),this.drawChart()}catch(F){console.error("Error drawing heatmap:",F)}},this.config.param,d)}clusterRows(){this.config.cluster_rows?(this.rowClusterNodes=getHierarchicalNodes(this.data.averages),this.data.averages.sort((s,d)=>s._order-d._order),this.margins.right=70,this.y_scale.domain(this.rowClusterNodes.order.map(s=>this.dataStore.getColumnName(this.config.param[s+1])))):(this.rowClusterNodes=void 0,this.y_scale.domain(this.config.param.slice(1).map(s=>this.dataStore.getColumnName(s))),this.margins.right=10,this.data.averages.sort((s,d)=>s._id-d._id),this.ry_axis_svg.selectAll("*").remove())}clusterColumns(){const s=this.dataStore.getColumnValues(this.config.param[0]);this.config.cluster_columns?(this.columnClusterNodes=getHierarchicalNodes(this.data.transpose),this.data.transpose.sort((d,_)=>d._order-_._order),this.x_scale.domain(this.columnClusterNodes.order.map(d=>s[d])),this.setAxisSize("tx",85)):(this.columnClusterNodes=void 0,this.x_scale.domain(this.data.transpose.map(d=>s[d._id])),this.setAxisSize("tx",45),this.data.transpose.sort((d,_)=>d._id-_._id),this.x_scale.domain(this.data.transpose.map(d=>s[d._id])),this.tx_axis_svg.selectAll("path").remove())}drawChart(s=400){const d=select(this.contentDiv).transition().duration(s).ease(linear),_=this.dataStore.getColumnValues(this.config.param[0]),S=this.dataStore.getColumnColors(this.config.param[0]),T=this._getContentDimensions(),F=T.width/this.data.transpose.length,M=F/2,P=Math.max(...this.data.catTotals),H=40;this.cat_scale.domain([P,0]);const J=P===0?0:40/P,K=this.data.transpose.map(se=>[this.data.catTotals[se._id],se._id]),z=T.height/(this.config.param.length-1);this.graph_area.selectAll(".heatmap-row").data(this.data.averages).join("g").attr("transform",(se,ae)=>`translate(0,${ae*z})`).attr("class","heatmap-row").selectAll(".heatmap-rect").data(se=>se.map((ae,ge)=>{const pe=se._id,he=this.data.transpose[ge]._id;return{av:this.data.transpose[ge][pe],row_id:pe,col_id:he,miss:!1}})).join("rect").attr("class","heatmap-rect").attr("x",(se,ae)=>ae*F).attr("height",z).attr("width",F).on("click",(se,ae)=>{const ge=this.config.param[ae.row_id+1];this._callListeners("cell_clicked",{row:ge,col:_[ae.col_id],val:ae.av})}).on("mouseover pointermove",(se,ae)=>{const ge=this.dataStore.columnIndex[this.config.param[ae.row_id+1]].name;this.showToolTip(se,`${_[ae.col_id]}<br>${ge}<br>${ae.av.toPrecision(2)}`)}).on("mouseleave",()=>{this.hideToolTip()}).transition(d).attr("fill",(se,ae)=>se.miss?"#DCDCDC":this.colorFunction(se.av));const oe=select(this.contentDiv).transition().duration(s).ease(linear);this.tx_axis_svg.selectAll(".heatmap-catsize").data(K,(se,ae)=>se[1]).join(se=>se.append("rect").attr("class","heatmap-catsize").attr("height",0).attr("y",45).attr("x",(ae,ge)=>M/2+ge*F).attr("width",M),se=>se,se=>se.call(ae=>ae.transition(oe).attr("height",0).attr("y",45).remove())).transition(oe).attr("y",se=>H-se[0]*J+5).attr("height",se=>se[0]*J).attr("fill",(se,ae)=>S[se[1]]).attr("width",M).attr("x",(se,ae)=>M/2+ae*F),this.cat_axis_svg.attr("transform",`translate(${T.left},5)`),this.cat_axis_svg.transition().call(this.cat_axis_call),this.updateAxis(),this.rowClusterNodes&&this.drawYTree(this.rowClusterNodes.nodes,this.config.param.length-1),this.columnClusterNodes&&this.drawXTree(this.columnClusterNodes.nodes,this.data.transpose.length,40,45)}setSize(s,d){super.setSize(s,d),this.drawChart()}getSettings(){const s=this.config;return super.getSettings().concat([{type:"check",label:"Cluster Rows",current_value:s.cluster_rows,func:_=>{s.cluster_rows=_,this.clusterRows(),this.drawChart()}},{type:"check",label:"Cluster Columns",current_value:s.cluster_columns,func:_=>{s.cluster_columns=_,this.clusterColumns(),this.drawChart()}},{type:"radiobuttons",label:"Averaging Method",current_value:s.method,choices:[["Mean","mean"],["Median","median"]],func:_=>{s.method=_,this.onDataFiltered()}},{type:"radiobuttons",label:"Trim to Percentile",current_value:s.color_scale.trim||"none",choices:[["No Trim","none"],["0.001","0.001"],["0.01","0.01"],["0.05","0.05"]],func:_=>{s.color_scale.trim=_,this.onDataFiltered()}},{label:"Show Color Legend",type:"check",current_value:s.color_legend?s.color_legend.display:!0,func:_=>{s.color_legend.display=_,this.setColorLegend()}},{type:"check",label:"Log Color Scale",current_value:s.color_scale.log,func:_=>{s.color_scale.log=_,this.setColorFunction(),this.drawChart()}}])}}BaseChart.types.heat_map={name:"Heat Map",class:HeatMap,params:[{type:"text",name:"Categories on x-axis"},{type:"_multi_column:number",name:"Fields on y axis"}]};class ViolinPlot extends WGLChart{constructor(s,d,_){const S=s.getColumnName(_.param[0]),T=s.getColumnName(_.param[1]);_.axis||(_.axis={x:{size:30,label:S,textsize:13},y:{size:45,label:T,textsize:13}}),_.title||(_.title=`${S} x ${T}`),super(s,d,_,{x:{type:"band"},y:{}}),this.config.type="violin_plot";const F=this.config;F.brush=F.brush||"poly";const M={brush:F.brush};this.app=new WGL2DI(this.graphDiv,M);const P=this.afterAppCreation(),H=this.dataStore.size;this.xPosBuff=new SharedArrayBuffer(H*4),this.xPos=new Float32Array(this.xPosBuff),this.values=this.dataStore.getColumnValues(F.param[0]);const J=this.dataStore.getRawColumn(F.param[0]);for(let oe=0;oe<H;oe++)this.xPos[oe]=J[oe]*50+4+Math.random()*42;const K=this.dataStore.getMinMaxForColumn(F.param[1]);this.defaultBandWidth=(K[1]-K[0])/100,F.band_width=F.band_width||this.defaultBandWidth,F.intervals=F.intervals||20,this.dim=this.dataStore.getDimension("catrange_dimension"),this.x_scale.domain(this.values);const z=this.dataStore.columnIndex[F.param[1]];this.app.addCircles({x:this.xPos,y:z.datatype==="int32"?new Float32Array(z.data):z.data,localFilter:this.dim.getLocalFilter(),globalFilter:this.dataStore.getFilter(),colorFunc:P}),this.app.addHandler("brush_stopped",(oe,se)=>{this.resetButton.style.display="inline",this.app.setFilter(!0),se?this._createPolyFilter(oe):this._createFilter(oe)}),F.radius=F.radius||5,F.opacity=F.opacity||.8,this.app.setPointRadius(this.config.radius),this.app.setPointOpacity(this.config.opacity),this.data=[],this.centerGraph(),this.onDataFiltered()}_createFilter(s){if(this.range=s,s==null)this.dim.removeFilter();else{const d=s.y_max,_=s.y_min,S=s.x_max,T=s.x_min;this.filter=[[T,S],[_,d]],this.dim("filterSquare",[this.xPos,this.config.param[1]],{range1:this.filter[0],range2:this.filter[1]},[this.xPos,1]),this.app.refresh()}}onDataFiltered(s){if(!this.isPinned&&s!==this.dim){s==="all_removed"&&(this.app.clearBrush(),this.app.setFilter(!1),this.resetButton.style.display="none");const d=this.config;this.ticks=this.y_scale.ticks(d.intervals),this.dim.getKernalDensity(_=>{this.data=_,this.drawChart()},d.param,{ticks:this.ticks,bandwidth:d.band_width,intervals:d.intervals,xPos:this.xPosBuff})}}drawChart(){const s=select(this.contentDiv).transition().duration(400).ease(linear),d=[],_=this.data.length,S=this._getContentDimensions(),T=S.width/_,F=[];for(let K=0;K<this.data.length;K++)d.push(T/(2*this.data[K].max)*.9),F.push(this.values[this.data[K].id]);this.x_scale.domain(F),this.centerGraph();const M=this.ticks.map(K=>this.y_scale(K)),P=[];for(let K=0;K<this.data.length;K++){const z=K*T+.5*T,oe=[];let se=!0;for(let ae=0;ae<this.data[K].length;ae++){const ge=this.data[K][ae];if(ge===0||Number.isNaN(ge)){if(!se){if(oe[oe.length-1][2]===0)continue;oe.push([M[ae],z,0])}continue}if(oe.length===0){if(ae===0){oe.push([0,z,0]);continue}oe.push([M[ae-1],z,0]),se=!1}oe.push([M[ae],z,d[K]*ge])}oe.length===0?(oe.push([0,z,0]),oe.push([0,z,0])):oe[oe.length-1][2]!==0&&oe.push([S.height,z,0]),P.push(oe),oe.id=this.data[K].id}const H=this.dataStore.getColumnColors(this.config.param[0]);this.graph_area.selectAll(".violin-curve").data(P,K=>`A${K.id}`).join("path").attr("class","violin-curve").transition(s).attr("fill","none").attr("stroke",(K,z)=>H[K.id]).attr("stroke-width",2).attr("stroke-linejoin","round").attr("d",line().curve(curveBasis).x((K,z)=>K[1]+K[2]).y((K,z)=>K[0])),this.graph_area.selectAll(".violin-curve1").data(P,K=>`B${K.id}`).join("path").attr("class","violin-curve1").transition(s).attr("fill","none").attr("stroke",(K,z)=>H[K.id]).attr("stroke-width",2).attr("stroke-linejoin","round").attr("d",line().curve(curveBasis).x((K,z)=>K[1]-K[2]).y((K,z)=>K[0])),this.app.refresh()}unpinChart(){super.unpinChart(),this.onDataFiltered()}onDataAdded(s){const d=this.config.param,_=this.getSetupConfig(),S=new Float32Array(s);S.set(this.xPos),this.values=this.dataStore.getColumnValues(d[0]);const T=this.dataStore.getRawColumn(d[0]);for(let F=this.xPos.length;F<s;F++)S[F]=T[F]*50+4+Math.random()*42;this.xPos=S,_.x=S,_.y=this.dataStore.getRawColumn(d[1]),this.dim.filterColumns&&(this.dimFilterColumns[0]=S),this.app.updateSize(s,_),super.onDataAdded(s)}setSize(s,d){super.setSize(s,d),this.drawChart()}centerGraph(){const s=this.dataStore.getMinMaxForColumn(this.config.param[1]),d=this.data.length*50,_=s[1],S=0,T=s[0],F=(_-T)/20,M=d-S,P=_-T+2*F,H=this._getContentDimensions();this.app.x_scale=H.width/M,this.app.y_scale=H.height/P,this.app.offset[0]=-S,this.app.offset[1]=_+F,this._updateScale(this.app.getRange()),this.updateAxis()}_updateScale(s){this.y_scale.domain([-s.y_range[0],-s.y_range[1]])}getSettings(){const s=super.getSettings(),d=this.config,_=this.dataStore.getMinMaxForColumn(d.param[1]);return s.splice(1,0,{type:"slider",max:_[1]/10,min:_[0]<0?0:_[0],doc:this.__doc__,current_value:d.band_width,label:"Band Width",func:S=>{d.band_width=S,this.onDataFiltered()}},{type:"slider",max:100,min:10,step:1,doc:this.__doc__,current_value:d.intervals,label:"Intervals",func:S=>{d.intervals=S,this.onDataFiltered()}}),s}_createPolyFilter(s){this.range=!0;for(const d of s)d[1]=-d[1],this.config.axis.x_log_scale&&(d[0]=this._getInverseLogValue(d[0])),this.config.axis.y_log_scale&&(d[1]=this._getInverseLogValue(d[1]));this.filter=s,this.dim.filter("filterPoly",[this.xPos,this.config.param[1]],s),this.app.refresh()}}BaseChart.types.violin_plot={class:ViolinPlot,name:"Violin Plot",params:[{type:"text",name:"Category (X axis)"},{type:"number",name:"Value (Y axis)"}]};class BoxPlot extends ViolinPlot{constructor(s,d,_){super(s,d,_),this.config.type="box_plot"}onDataFiltered(s){this.isPinned||s!==this.dim&&(s==="all_removed"&&(this.app.clearBrush(),this.app.setFilter(!1),this.resetButton.style.display="none"),this.ticks=this.y_scale.ticks(20),this.dim.getBoxPlotData(d=>{this.data=d,this.drawChart()},this.config.param,{xPos:this.xPosBuff}))}drawChart(){const s=select(this.contentDiv).transition().duration(400).ease(linear),d=this.data.length,_=this.y_scale,S=[];for(const P of this.data)S.push(this.values[P.id]);this.x_scale.domain(S),this.centerGraph();const F=this._getContentDimensions().width/d,M=this.dataStore.getColumnColors(this.config.param[0]);this.graph_area.selectAll(".boxplot-rect").data(this.data,P=>P.id).join("rect").attr("class","boxplot-rect").transition(s).attr("x",(P,H)=>H*(F-3)+(H+1)*3).attr("y",P=>_(P.Q3)).attr("width",F-6).attr("height",P=>{const H=_(P.Q1)-_(P.Q3);return Number.isNaN(H)?0:H}).attr("fill","none").attr("stroke",(P,H)=>M[P.id]).attr("stroke-width",3),this.graph_area.selectAll(".boxplot-whisker").data(this.data,P=>P.id).join("path").attr("class","boxplot-whisker").transition(s).attr("stroke",(P,H)=>M[P.id]).attr("fill","none").attr("stroke-width",3).attr("d",(P,H)=>{if(Number.isNaN(P.med))return"";const J=H*(F-6)+(H+1)*6,K=H*(F-3)+(H+1)*3,z=H*F+.5*F,oe=_(P.max),se=_(P.min);return oe==null||se==null?"":`
             M${J} ${oe} L${J+F-12} ${oe}
             M${z} ${oe} L${z} ${_(P.Q3)}
             M${K} ${_(P.med)} L${K+F-6} ${_(P.med)}
             M${z} ${se} L${z} ${_(P.Q1)}
             M${J} ${se} L${J+F-12} ${se}`}),this.app.refresh()}}BaseChart.types.box_plot={class:BoxPlot,name:"Box Plot",params:[{type:"text",name:"Category (X axis)"},{type:"number",name:"Value (Y axis)"}]};function max(f,s){let d;if(s===void 0)for(const _ of f)_!=null&&(d<_||d===void 0&&_>=_)&&(d=_);else{let _=-1;for(let S of f)(S=s(S,++_,f))!=null&&(d<S||d===void 0&&S>=S)&&(d=S)}return d}function min(f,s){let d;if(s===void 0)for(const _ of f)_!=null&&(d>_||d===void 0&&_>=_)&&(d=_);else{let _=-1;for(let S of f)(S=s(S,++_,f))!=null&&(d>S||d===void 0&&S>=S)&&(d=S)}return d}function sum(f,s){let d=0;if(s===void 0)for(let _ of f)(_=+_)&&(d+=_);else{let _=-1;for(let S of f)(S=+s(S,++_,f))&&(d+=S)}return d}function justify(f,s){return f.sourceLinks.length?f.depth:s-1}function constant$1(f){return function(){return f}}function ascendingSourceBreadth(f,s){return ascendingBreadth(f.source,s.source)||f.index-s.index}function ascendingTargetBreadth(f,s){return ascendingBreadth(f.target,s.target)||f.index-s.index}function ascendingBreadth(f,s){return f.y0-s.y0}function value(f){return f.value}function defaultId(f){return f.index}function defaultNodes(f){return f.nodes}function defaultLinks(f){return f.links}function find(f,s){const d=f.get(s);if(!d)throw new Error("missing: "+s);return d}function computeLinkBreadths({nodes:f}){for(const s of f){let d=s.y0,_=d;for(const S of s.sourceLinks)S.y0=d+S.width/2,d+=S.width;for(const S of s.targetLinks)S.y1=_+S.width/2,_+=S.width}}function Sankey(){let f=0,s=0,d=1,_=1,S=24,T=8,F,M=defaultId,P=justify,H,J,K=defaultNodes,z=defaultLinks,oe=6;function se(){const qt={nodes:K.apply(null,arguments),links:z.apply(null,arguments)};return ae(qt),ge(qt),pe(qt),he(qt),Re(qt),computeLinkBreadths(qt),qt}se.update=function(qt){return computeLinkBreadths(qt),qt},se.nodeId=function(qt){return arguments.length?(M=typeof qt=="function"?qt:constant$1(qt),se):M},se.nodeAlign=function(qt){return arguments.length?(P=typeof qt=="function"?qt:constant$1(qt),se):P},se.nodeSort=function(qt){return arguments.length?(H=qt,se):H},se.nodeWidth=function(qt){return arguments.length?(S=+qt,se):S},se.nodePadding=function(qt){return arguments.length?(T=F=+qt,se):T},se.nodes=function(qt){return arguments.length?(K=typeof qt=="function"?qt:constant$1(qt),se):K},se.links=function(qt){return arguments.length?(z=typeof qt=="function"?qt:constant$1(qt),se):z},se.linkSort=function(qt){return arguments.length?(J=qt,se):J},se.size=function(qt){return arguments.length?(f=s=0,d=+qt[0],_=+qt[1],se):[d-f,_-s]},se.extent=function(qt){return arguments.length?(f=+qt[0][0],d=+qt[1][0],s=+qt[0][1],_=+qt[1][1],se):[[f,s],[d,_]]},se.iterations=function(qt){return arguments.length?(oe=+qt,se):oe};function ae({nodes:qt,links:Jn}){for(const[na,qn]of qt.entries())qn.index=na,qn.sourceLinks=[],qn.targetLinks=[];const qr=new Map(qt.map((na,qn)=>[M(na,qn,qt),na]));for(const[na,qn]of Jn.entries()){qn.index=na;let{source:vA,target:TA}=qn;typeof vA!="object"&&(vA=qn.source=find(qr,vA)),typeof TA!="object"&&(TA=qn.target=find(qr,TA)),vA.sourceLinks.push(qn),TA.targetLinks.push(qn)}if(J!=null)for(const{sourceLinks:na,targetLinks:qn}of qt)na.sort(J),qn.sort(J)}function ge({nodes:qt}){for(const Jn of qt)Jn.value=Jn.fixedValue===void 0?Math.max(sum(Jn.sourceLinks,value),sum(Jn.targetLinks,value)):Jn.fixedValue}function pe({nodes:qt}){const Jn=qt.length;let qr=new Set(qt),na=new Set,qn=0;for(;qr.size;){for(const vA of qr){vA.depth=qn;for(const{target:TA}of vA.sourceLinks)na.add(TA)}if(++qn>Jn)throw new Error("circular link");qr=na,na=new Set}}function he({nodes:qt}){const Jn=qt.length;let qr=new Set(qt),na=new Set,qn=0;for(;qr.size;){for(const vA of qr){vA.height=qn;for(const{source:TA}of vA.targetLinks)na.add(TA)}if(++qn>Jn)throw new Error("circular link");qr=na,na=new Set}}function ve({nodes:qt}){const Jn=max(qt,qn=>qn.depth)+1,qr=(d-f-S)/(Jn-1),na=new Array(Jn);for(const qn of qt){const vA=Math.max(0,Math.min(Jn-1,Math.floor(P.call(null,qn,Jn))));qn.layer=vA,qn.x0=f+vA*qr,qn.x1=qn.x0+S,na[vA]?na[vA].push(qn):na[vA]=[qn]}if(H)for(const qn of na)qn.sort(H);return na}function be(qt){const Jn=min(qt,qr=>(_-s-(qr.length-1)*F)/sum(qr,value));for(const qr of qt){let na=s;for(const qn of qr){qn.y0=na,qn.y1=na+qn.value*Jn,na=qn.y1+F;for(const vA of qn.sourceLinks)vA.width=vA.value*Jn}na=(_-na+F)/(qr.length+1);for(let qn=0;qn<qr.length;++qn){const vA=qr[qn];vA.y0+=na*(qn+1),vA.y1+=na*(qn+1)}xt(qr)}}function Re(qt){const Jn=ve(qt);F=Math.min(T,(_-s)/(max(Jn,qr=>qr.length)-1)),be(Jn);for(let qr=0;qr<oe;++qr){const na=Math.pow(.99,qr),qn=Math.max(1-na,(qr+1)/oe);ye(Jn,na,qn),Fe(Jn,na,qn)}}function Fe(qt,Jn,qr){for(let na=1,qn=qt.length;na<qn;++na){const vA=qt[na];for(const TA of vA){let VA=0,mI=0;for(const{source:aI,value:WA}of TA.targetLinks){let KA=WA*(TA.layer-aI.layer);VA+=Ct(aI,TA)*KA,mI+=KA}if(!(mI>0))continue;let jA=(VA/mI-TA.y0)*Jn;TA.y0+=jA,TA.y1+=jA,At(TA)}H===void 0&&vA.sort(ascendingBreadth),Ue(vA,qr)}}function ye(qt,Jn,qr){for(let na=qt.length,qn=na-2;qn>=0;--qn){const vA=qt[qn];for(const TA of vA){let VA=0,mI=0;for(const{target:aI,value:WA}of TA.sourceLinks){let KA=WA*(aI.layer-TA.layer);VA+=Nt(TA,aI)*KA,mI+=KA}if(!(mI>0))continue;let jA=(VA/mI-TA.y0)*Jn;TA.y0+=jA,TA.y1+=jA,At(TA)}H===void 0&&vA.sort(ascendingBreadth),Ue(vA,qr)}}function Ue(qt,Jn){const qr=qt.length>>1,na=qt[qr];St(qt,na.y0-F,qr-1,Jn),It(qt,na.y1+F,qr+1,Jn),St(qt,_,qt.length-1,Jn),It(qt,s,0,Jn)}function It(qt,Jn,qr,na){for(;qr<qt.length;++qr){const qn=qt[qr],vA=(Jn-qn.y0)*na;vA>1e-6&&(qn.y0+=vA,qn.y1+=vA),Jn=qn.y1+F}}function St(qt,Jn,qr,na){for(;qr>=0;--qr){const qn=qt[qr],vA=(qn.y1-Jn)*na;vA>1e-6&&(qn.y0-=vA,qn.y1-=vA),Jn=qn.y0-F}}function At({sourceLinks:qt,targetLinks:Jn}){if(J===void 0){for(const{source:{sourceLinks:qr}}of Jn)qr.sort(ascendingTargetBreadth);for(const{target:{targetLinks:qr}}of qt)qr.sort(ascendingSourceBreadth)}}function xt(qt){if(J===void 0)for(const{sourceLinks:Jn,targetLinks:qr}of qt)Jn.sort(ascendingTargetBreadth),qr.sort(ascendingSourceBreadth)}function Ct(qt,Jn){let qr=qt.y0-(qt.sourceLinks.length-1)*F/2;for(const{target:na,width:qn}of qt.sourceLinks){if(na===Jn)break;qr+=qn+F}for(const{source:na,width:qn}of Jn.targetLinks){if(na===qt)break;qr-=qn}return qr}function Nt(qt,Jn){let qr=Jn.y0-(Jn.targetLinks.length-1)*F/2;for(const{source:na,width:qn}of Jn.targetLinks){if(na===qt)break;qr+=qn+F}for(const{target:na,width:qn}of qt.sourceLinks){if(na===Jn)break;qr-=qn}return qr}return se}var pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}Path.prototype=path.prototype={constructor:Path,moveTo:function(f,s){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+s)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(f,s){this._+="L"+(this._x1=+f)+","+(this._y1=+s)},quadraticCurveTo:function(f,s,d,_){this._+="Q"+ +f+","+ +s+","+(this._x1=+d)+","+(this._y1=+_)},bezierCurveTo:function(f,s,d,_,S,T){this._+="C"+ +f+","+ +s+","+ +d+","+ +_+","+(this._x1=+S)+","+(this._y1=+T)},arcTo:function(f,s,d,_,S){f=+f,s=+s,d=+d,_=+_,S=+S;var T=this._x1,F=this._y1,M=d-f,P=_-s,H=T-f,J=F-s,K=H*H+J*J;if(S<0)throw new Error("negative radius: "+S);if(this._x1===null)this._+="M"+(this._x1=f)+","+(this._y1=s);else if(K>epsilon)if(!(Math.abs(J*M-P*H)>epsilon)||!S)this._+="L"+(this._x1=f)+","+(this._y1=s);else{var z=d-T,oe=_-F,se=M*M+P*P,ae=z*z+oe*oe,ge=Math.sqrt(se),pe=Math.sqrt(K),he=S*Math.tan((pi-Math.acos((se+K-ae)/(2*ge*pe)))/2),ve=he/pe,be=he/ge;Math.abs(ve-1)>epsilon&&(this._+="L"+(f+ve*H)+","+(s+ve*J)),this._+="A"+S+","+S+",0,0,"+ +(J*z>H*oe)+","+(this._x1=f+be*M)+","+(this._y1=s+be*P)}},arc:function(f,s,d,_,S,T){f=+f,s=+s,d=+d,T=!!T;var F=d*Math.cos(_),M=d*Math.sin(_),P=f+F,H=s+M,J=1^T,K=T?_-S:S-_;if(d<0)throw new Error("negative radius: "+d);this._x1===null?this._+="M"+P+","+H:(Math.abs(this._x1-P)>epsilon||Math.abs(this._y1-H)>epsilon)&&(this._+="L"+P+","+H),d&&(K<0&&(K=K%tau+tau),K>tauEpsilon?this._+="A"+d+","+d+",0,1,"+J+","+(f-F)+","+(s-M)+"A"+d+","+d+",0,1,"+J+","+(this._x1=P)+","+(this._y1=H):K>epsilon&&(this._+="A"+d+","+d+",0,"+ +(K>=pi)+","+J+","+(this._x1=f+d*Math.cos(S))+","+(this._y1=s+d*Math.sin(S))))},rect:function(f,s,d,_){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+s)+"h"+ +d+"v"+ +_+"h"+-d+"Z"},toString:function(){return this._}};function constant(f){return function(){return f}}function x(f){return f[0]}function y(f){return f[1]}var slice=Array.prototype.slice;function linkSource(f){return f.source}function linkTarget(f){return f.target}function link(f){var s=linkSource,d=linkTarget,_=x,S=y,T=null;function F(){var M,P=slice.call(arguments),H=s.apply(this,P),J=d.apply(this,P);if(T||(T=M=path()),f(T,+_.apply(this,(P[0]=H,P)),+S.apply(this,P),+_.apply(this,(P[0]=J,P)),+S.apply(this,P)),M)return T=null,M+""||null}return F.source=function(M){return arguments.length?(s=M,F):s},F.target=function(M){return arguments.length?(d=M,F):d},F.x=function(M){return arguments.length?(_=typeof M=="function"?M:constant(+M),F):_},F.y=function(M){return arguments.length?(S=typeof M=="function"?M:constant(+M),F):S},F.context=function(M){return arguments.length?(T=M??null,F):T},F}function curveHorizontal(f,s,d,_,S){f.moveTo(s,d),f.bezierCurveTo(s=(s+_)/2,d,s,S,_,S)}function linkHorizontal(){return link(curveHorizontal)}function horizontalSource(f){return[f.source.x1,f.y0]}function horizontalTarget(f){return[f.target.x0,f.y1]}function sankeyLinkHorizontal(){return linkHorizontal().source(horizontalSource).target(horizontalTarget)}class SankeyChart extends SVGChart{constructor(s,d,_){const S={y:{custom:!0},ry:{label:!0}},T=s.getColumnName(_.param[0]),F=s.getColumnName(_.param[1]);_.label||(_.label=`${T} vs. ${F}`),_.axis||(_.axis={}),_.axis.y||(_.axis.y={size:25,textSize:15,label:T}),_.axis.ry||(_.axis.ry={size:25,textSize:15,label:F}),super(s,d,_,S);const M=this.config;M.type="sankey_chart",this.dim=this.dataStore.getDimension("category_dimension"),this.filter=[],this.addToolTip(),this.onDataFiltered()}setSize(s,d){super.setSize(s,d),this.drawChart()}remove(s=!0){this.dim.destroy(s),super.remove()}removeFilter(){this.dim.removeFilter(),this.filter=[],this.nodeFilter=null,this.linkFilter=null,this.drawChart()}onDataFiltered(s){this.dim===s||this.isPinned||(s==="all_removed"&&(this.filter=[],this.nodeFilter=null,this.linkFilter=null,this.resetButton.style.display="none"),this.dim.getSankeyData(d=>{this.sankeyData=d,this.drawChart()},this.config.param))}drawChart(){this.updateAxis();const s=select(this.contentDiv).transition().duration(400).ease(linear),d=this._getContentDimensions(),_=this.config.param,S=[this.dataStore.getColumnColors(_[0]),this.dataStore.getColumnColors(_[1])];let T=20-this.sankeyData.minNodes;T=T<1?1:T>10?10:T;const M=Sankey().size([d.width,d.height]).nodeId(P=>P.id).nodeWidth(20).nodePadding(T).nodeAlign(justify)(this.sankeyData);this.graph_area.selectAll(".s-links").data(M.links).join("path").on("click",(P,H)=>{this.filterMultipleCategories(H)}).on("mouseover pointermove",(P,H)=>{const J=H.source,K=this.dataStore.getColumnValues(this.config.param[J.param])[J.ind],z=H.target,oe=this.dataStore.getColumnValues(this.config.param[z.param])[z.ind];this.showToolTip(P,`${K}<br>${oe}<br>${H.trueValue}`)}).on("mouseleave",()=>{this.hideToolTip()}).transition(s).attr("class","s-links").attr("d",sankeyLinkHorizontal()).attr("fill","none").attr("stroke","currentColor").attr("stroke-width",P=>P.width).attr("stoke-opacity",.5).attr("opacity",P=>this.linkFilter?P.source.id===this.linkFilter[0]&&P.target.id===this.linkFilter[1]?.8:.2:this.nodeFilter?P.source.id===this.nodeFilter||P.target.id===this.nodeFilter?.8:.2:.5),this.graph_area.selectAll(".s-nodes").data(M.nodes).join("rect").on("click",(P,H)=>{const J=_[H.param];this.nodeFilter=(H.param===0?"A":"B")+H.ind,this.linkFilter=null;const K=this.dataStore.getColumnValues(J);this.filterCategories(J,K[H.ind])}).on("mouseover pointermove",(P,H)=>{const J=this.dataStore.getColumnValues(this.config.param[H.param])[H.ind];this.showToolTip(P,J)}).on("mouseleave",()=>{this.hideToolTip()}).attr("class","s-nodes").attr("x",P=>P.x0).attr("y",P=>P.y0).attr("width",P=>P.x1-P.x0).attr("height",P=>P.y1-P.y0).attr("fill",P=>S[P.param][P.ind])}getFilter(){const s=this.config.param;if(this.linkFilter){const d={};let _=Number.parseInt(this.linkFilter[0].substring(1));return d[s[0]]=[this.dataStore.getColumnValues(s[0])[_]],_=Number.parseInt(this.linkFilter[1].substring(1)),d[s[1]]=[this.dataStore.getColumnValues(s[1])[_]],d}if(this.nodeFilter){const d={},_=this.nodeFilter.startsWith("A")?0:1,S=Number.parseInt(this.nodeFilter.substring(1));return d[s[_]]=[this.dataStore.getColumnValues(s[_])[S]],d}return null}filterMultipleCategories(s){const d=this.config.param,_=d[s.source.param],S=this.dataStore.getColumnValues(_)[s.source.ind],T=d[s.target.param],F=this.dataStore.getColumnValues(T)[s.target.ind];this.linkFilter=[`A${s.source.ind}`,`B${s.target.ind}`],this.resetButton.style.display="inline",this.drawChart(),this.dim.filter("filterMultipleCategories",[_,T],[S,F])}filterCategories(s,d,_){_?this.filter.push(d):this.filter=[d],this.resetButton.style.display="inline",this.drawChart(),this.dim.filter("filterCategories",[s],this.filter)}pinChart(){this.isPinned=!0}unpinChart(){this.isPinned=!1,this.onDataFiltered()}getSettings(){const s=super.getSettings();return this.config,s}}BaseChart.types.sankey_chart={name:"Sankey Diagram",class:SankeyChart,params:[{type:"text",name:"First Group"},{type:"text",name:"Second Group"}]};class MultiLineChart extends SVGChart{constructor(s,d,_){const S=s.getColumnName(_.param[0]);_.axis||(_.axis={x:{size:30,label:S,textsize:13},y:{size:45,label:"density",textsize:13}}),_.title||(_.title=S),_.scaletrim&&!_.band_width&&(_.band_width=.1),super(s,d,_,{x:{},y:{type:_.stacked?"band":"linear"}}),this.config.type="multi_line_chart";const T=this.config;T.color_legend||(T.color_legend={display:!T.stacked});const F=this.dataStore.getMinMaxForColumn(T.param[0]);let M=F.slice(0);_.scaletrim&&(M=[0,1]),this.x_scale.domain(M),this.defaultBandWidth=(F[1]-F[0])/100,T.band_width=T.band_width||this.defaultBandWidth,T.intervals=T.intervals||40,this.dim=this.dataStore.getDimension("catrange_dimension"),this.data=[],this.addToolTip(),this.setColorLegend(),this.stackLines(T.stacked),this.scaleTrim(T.scaletrim),this.onDataFiltered()}stackLines(s){this.config.stacked=s,s?(this.y_scale=band(),this.y_axis_call=axisLeft(this.y_scale),this.config.color_legend.display=!1,this.setColorLegend(),this.y_scale.domain(this.dataStore.getColumnValues(this.config.param[1]))):(this.y_scale=linear$1(),this.y_axis_call=axisLeft(this.y_scale),this.y_scale.domain([1,0]))}changeCategories(s,d,_){this.config.param[1]=s,this.onDataFiltered()}scaleTrim(s){const d=this.config;if(!s||s==="none"){d.scaletrim=void 0;const _=this.dataStore.getMinMaxForColumn(d.param[0]);this.x_scale.domain(_)}else d.scaletrim=`${s}`,this.x_scale.domain([0,1]),d.band_width=.1}getColorLegend(){return this.dataStore.getColorLegend(this.config.param[1])}onDataFiltered(s){if(!this.isPinned&&s!==this.dim){s==="all_removed"&&(this.resetButton.style.display="none");const d=this.config;this.ticks=this.x_scale.ticks(d.intervals),this.dim.getKernalDensity(_=>{this.data=_,this.drawChart()},[d.param[1],d.param[0]],{ticks:this.ticks,bandwidth:d.band_width,intervals:d.intervals,scaletrim:d.scaletrim})}}remove(s=!0){this.dim.destroy(s),super.remove()}drawChart(){const s=this.config,d=this.dataStore.getColumnValues(s.param[1]),_=select(this.contentDiv).transition().duration(400).ease(linear),S=this._getContentDimensions(),T=[],F=S.height/this.data.length,M=[];for(let K=0;K<this.data.length;K++){const z=s.stacked?F/this.data[K].max:S.height/this.data[K].max,oe=s.stacked?this.data[K].map(se=>F*K+F-se*z):this.data[K].map(se=>S.height-se*z);oe.id=this.data[K].id,M.push(d[oe.id]),T.push(oe)}this.y_scale.domain(M),this.updateAxis();const P=this.ticks.map(K=>this.x_scale(K)),H=this.dataStore.getColumnColors(this.config.param[1]);this.graph_area.selectAll(".chart-line").data(T).join("path").attr("class","chart-line").on("mouseover pointermove",(K,z)=>{const oe=d[z.id];this.showToolTip(K,oe)}).on("mouseout",()=>{this.hideToolTip()}).transition(_).attr("fill","none").attr("stroke",(K,z)=>H[K.id]).attr("stroke-width",2).attr("stroke-linejoin","round").attr("d",line().x((K,z)=>P[z]).y((K,z)=>K)),s.fill?(area().x((K,z)=>P[z]).y0((K,z)=>K).y1((K,z)=>{s.stacked?F*K.id+F:S.height}),this.graph_area.selectAll(".chart-area").data(T).join("path").attr("class","chart-area").transition(_).attr("fill",K=>H[K.id]).style("opacity",.5).attr("d",(K,z)=>area().x((oe,se)=>P[se]).y0(oe=>oe).y1(oe=>s.stacked?F*z+F:S.height)(K))):this.graph_area.selectAll(".chart-area").remove()}unpinChart(){super.unpinChart(),this.onDataFiltered()}setSize(s,d){super.setSize(s,d),this.drawChart()}getSettings(){const s=super.getSettings(),d=this.config,_=this.dataStore.getMinMaxForColumn(d.param[0]),S=this.dataStore.getColumnList("text");return s.splice(1,0,{type:"dropdown",current_value:d.param[1],label:"Change Cetegories (y axis)",values:[S,"name","field"],func:T=>{this.changeCategories(T,"val1","val2")}},{type:"check",current_value:d.stacked,label:"Stack Lines",func:T=>{this.stackLines(T),this.drawChart()}},{type:"check",current_value:d.fill,label:"Fill Lines",func:T=>{d.fill=T,this.drawChart()}},{type:"radiobuttons",label:"Scale/Trim to Percentile",current_value:d.scaletrim||"none",choices:[["No Trim","none"],["0.001","0.001"],["0.01","0.01"],["0.05","0.05"]],func:T=>{this.scaleTrim(T),this.onDataFiltered()}},{type:"slider",max:_[1]/10,min:_[0]<0?0:_[0],doc:this.__doc__,current_value:d.band_width,label:"Band Width",func:T=>{d.band_width=T,this.onDataFiltered()}},{type:"slider",max:100,min:10,step:1,doc:this.__doc__,current_value:d.intervals,label:"Intervals",func:T=>{d.intervals=T,this.onDataFiltered()}},{label:"Show Color Legend",type:"check",current_value:d.color_legend?d.color_legend.display:!0,func:T=>{d.color_legend.display=T,this.setColorLegend()}}),s}}BaseChart.types.multi_line_chart={class:MultiLineChart,name:"Multi Line Chart",methodsUsingColumns:["changeCategories"],params:[{type:"number",name:"Value (X axis)"},{type:"text",name:"Categories to show"}]};class StackedRowChart extends SVGChart{constructor(s,d,_){const S={x:{type:"linear"},y:{type:"band"},ry:{}};_.color_legend||(_.color_legend={display:!1}),super(s,d,_,S),this.config.type="stacked_row_chart",this.dim=this.dataStore.getDimension("category_dimension"),this.addToolTip(),this.onDataFiltered(null)}onDataFiltered(s){this.dim===s||this.isPinned||this.dim.getSankeyData(d=>{this.data=d,this.sortData(),this.drawChart()},this.config.param,{method:"stacked"})}setSize(s,d){super.setSize(s,d),this.drawChart()}sortData(){this.sortedData=this.data.slice(0);const s=this.config.sort;if(s==="size"||s===null)this.sortedData.sort((d,_)=>d.total-_.total);else if(s==="name"){const d=this.dataStore.getColumnValues(this.config.param[0]);this.sortedData.sort((_,S)=>d[_.id].localeCompare(d[S.id]))}else if(s==="composition"){const d=this.data.map(S=>{const T=S.values.map(F=>F.per);return T._id=S.id,T}),_=getHierarchicalNodes(d);this.sortedData=_.order.map(S=>this.data[S])}}getColorLegend(){return this.dataStore.getColorLegend(this.config.param[1])}getSettings(){const s=super.getSettings(),d=this.config;return s.concat([{label:"Show Color Legend",type:"check",current_value:d.color_legend?d.color_legend.display:!0,func:_=>{d.color_legend.display=_,this.setColorLegend()}},{type:"radiobuttons",label:"Sort Order",current_value:d.sort||"default",choices:[["Default","default"],["Size","size"],["Name","name"],["Composition","composition"]],func:_=>{d.sort=_,this.sortData(),this.drawChart()}}])}drawChart(s=500){const d=this._getContentDimensions(),_=this.config,S=4,T=this.sortedData.length,F=(d.height-S*(T+1))/T,M=this.dataStore.getColumnColors(_.param[1]),P=this.dataStore.getColumnValues(_.param[0]),H=this.dataStore.getColumnValues(_.param[1]),J=select(this.contentDiv).transition().duration(s).ease(linear);this.x_scale.domain([0,1]),this.y_scale.domain(this.sortedData.map(K=>P[K.id])),this.updateAxis(),this.graph_area.selectAll(".stacked-row").data(this.sortedData,K=>K.id).join(K=>K.append("g").attr("transform",(z,oe)=>`translate(0,${S*(oe+1)+F*oe})`).attr("class","stacked-row"),K=>K.transition(J).attr("transform",(z,oe)=>`translate(0,${S*(oe+1)+F*oe})`)).selectAll("rect").data(K=>K.values,K=>K.id).join(K=>K.append("rect").attr("x",z=>z.perpos*d.width).attr("y",0).attr("width",z=>z.per*d.width).attr("height",F).attr("fill",z=>M[z.id]).on("mouseover pointermove",(z,oe)=>{const se=(oe.per*100).toFixed(0),ae=this.config.param[1];this.showToolTip(z,`${ae}: ${H[oe.id]}<br>count: <em>${oe.count}</em><br>percentage: <em>${se}%</em>`)}).on("mouseleave",()=>{this.hideToolTip()}),K=>K.transition(J).attr("x",z=>z.perpos*d.width).attr("width",z=>z.per*d.width).attr("height",F).attr("fill",z=>M[z.id]))}}BaseChart.types.stacked_row_chart={class:StackedRowChart,name:"Stacked Row Chart",params:[{type:"text",name:"Category y axis"},{type:"text",name:"Category x axis"}]};class TreeDiagram extends SVGChart{constructor(s,d,_){super(s,d,_,{});const S=this.dataStore.getHighlightedData();S&&this.onDataHighlighted({data:this.dataStore.rowData.get(S[0])})}setBranchLength(s,d,_){s.y=(d+=s.data.length)*_,s.children&&s.children.forEach(S=>this.setBranchLength(S,d,_))}drawChart(){if(!this.treeData)return;const s=select(this.contentDiv).transition().duration(500).ease(linear),d=this._getContentDimensions(),S=cluster().size([d.height,d.width-50]).separation((M,P)=>1)(this.treeData);function T(M){return M.data.length+(M.children?max$3(M.children,T):0)}console.warn("setBranchLength needs to be reviewed / tested"),this.setBranchLength(this.treeData,0,(d.width-50)/T(this.treeData));const F=S.descendants();max$3(F,M=>M.data.length),this.graph_area.selectAll(".tree-link").data(F.slice(1)).join("path").attr("class","tree-link").style("stroke","currentColor").style("fill","none").style("stroke-width","1px").transition(s).attr("d",M=>`M ${M.y} ${M.x} L${M.parent.y} ${M.x} L${M.parent.y} ${M.parent.x}`),this.graph_area.selectAll("text").data(this.treeData.leaves()).join("text").text(M=>M.data.name.replace(/_/g," ")).attr("font-size","9px").attr("alignment-baseline","middle").style("stroke","currentColor").transition(s).attr("x",M=>M.y+2).attr("y",M=>M.x)}setSize(s,d){super.setSize(s,d),this.drawChart()}onDataHighlighted(s){var _;const d=(_=s.data)==null?void 0:_.nwk_data;d&&(this.treeData=parseNewick(d),this.drawChart())}getSettings(){return super.getSettings()}}BaseChart.types.row_summary_box={class:TreeDiagram,name:"Tree Diagram",required:["tree_diagram"],params:[]};const color_schemes={"blue yellow":["#115f9a","#1984c5","#22a7f0","#48b5c4","#76c68f","#a6d75b","#c9e52f","#d0ee11","#d0f400"],red:scheme[8].slice(1),"blue yellow red":["blue","yellow","red"]};class CellNetworkChart extends SVGChart{constructor(s,d,_){_.title||(_.title=_.category),_.link_strength=_.link_strength||1,_.node_repulsion=_.node_repulsion||-500,super(s,d,_,{});const S=this.config;if(this.linkThicknessScale=linear$1(),S.scales={},S.link_thickness)this._changeLinkThicknessScale();else{S.link_thickness={show_legend:!0,legend_position:[20,80]};const J=this.dataStore.getColumnQuantile(S.param[4],.01);this._changeLinkThicknessScale(J,[1,10])}this.cell_sizes={},this.cell_types={};const T=this.dataStore.getColumnValues(S.param[1]),F=this.dataStore.columnIndex,M=F[S.param[1]].data,P=F[S.param[6]].data,H=S.param[7]?F[S.param[7]].data:null;for(let J=0;J<this.dataStore.size;J++)this.cell_sizes[T[M[J]]]=P[J],H&&(this.cell_types[T[M[J]]]=H[J]);if(this.linkLengthScale=linear$1(),this.forceLink=forceLink().id(J=>J.id),S.link_length)this._changeLinkLengthScale();else{S.link_length={};const J=this.dataStore.getColumnQuantile(S.param[3],.01);this._changeLinkLengthScale(J,[1,100])}if(this.nodeScale=sqrt$3(),S.node_size)this._changeNodeSizeScale();else{S.node_size={show_legend:!0,legend_position:[20,180]};const J=this.dataStore.getMinMaxForColumn(S.param[6]);this._changeNodeSizeScale(J,[1,15])}if(S.link_color)this._changeLinkColorScale();else{S.link_color={};const J=this.dataStore.getColumnQuantile(S.param[5],.01);this._changeLinkColorScale("red",J)}S.color_legend||(S.color_legend={display:!0}),S.node_color=S.node_color||"cells",S.levels=S.levels||1,S.label_size=S.label_size||13,this.extra_legends=["linkThicknessLegend","nodeColorLegend"],this.forceManyBody=forceManyBody().distanceMax(150),this.simulation=forceSimulation().force("link",this.forceLink.strength(this.config.link_strength)).force("charge",this.forceManyBody.strength(_.node_repulsion)).force("center",forceCenter(this.width/2,this.height/2)),this.setColorLegend(),this.reCalculate()}remove(){this.simulation.on("tick",null),super.remove()}drawChart(){const s=this.config;this.svg.selectAll("*").remove();const d=this.dataStore.getColumnColors(s.param[1]),_=this.dataStore.getColorForCategory(s.param[0],s.category),S=s.node_color==="type"?this.dataStore.getColumnColors(s.param[7]):null,T=s.link_color.colors!=="none",F=this.dataStore.getRawColumn(s.param[4]),M=this.svg.append("g").attr("class","links").selectAll("line").data(this.linkData).enter();this.link=M.append("line").attr("stroke-width",P=>this.linkThicknessScale(F[P.d_index])).style("stroke",P=>this.linkColorScale&&T?this.linkColorScale(P.d_index):"currentcolor").style("opacity",T?.6:1).on("click",(P,H)=>{this.dataStore.dataHighlighted([H.d_index],this)}),this.arrows=M.append("path").attr("stroke-width",3).attr("fill","none").style("opacity",s.show_directionality?1:0).attr("stroke",P=>this.linkColorScale&&T?this.linkColorScale(P.d_index):"currentcolor"),this.node=this.svg.append("g").attr("class","nodes").selectAll("g").data(this.nodeData).enter().append("g"),this.circles=this.node.append("circle").attr("r",P=>this.nodeScale(P.node_size)).style("stroke","currentColor").style("stroke-width",2).attr("fill",P=>S?S[P.type]:s.node_color==="cells"?d[P.d_index]:_).call(this.setUpDrag()),this.lables=this.node.append("text").text(P=>P.id).style("fill","currentcolor").style("font-size",`${this.config.label_size}px`).attr("x",6).attr("y",3),this.simulation.nodes(this.nodeData).on("tick",()=>this.ticked()),this.simulation.force("link").links(this.linkData)}_changeLabelSize(s){const d=this.config;d.label_size=s,this.lables.style("font-size",`${s}px`)}_changeNodeSizeScale(s,d,_){const S=this.config;d&&(S.node_size.range=d),s&&(S.node_size.domain=s),this.nodeScale=sqrt$3().domain(S.node_size.domain).range(S.node_size.range).clamp(!0);const T=this.nodeColorLegend;if(T&&(S.node_size.legend_position=[T.offsetLeft,T.offsetTop],T.remove()),!S.node_size.show_legend){this.nodeColorLegend=void 0;return}const F=this.dataStore.columnIndex[S.param[6]].name,M=S.node_size.legend_position;this.nodeColorLegend=getColorLegendCustom(this.nodeScale,{label:F,type:"circle"}),this.contentDiv.append(this.nodeColorLegend),this.nodeColorLegend.style.top=`${M[1]}px`,this.nodeColorLegend.style.left=`${M[0]}px`,_&&this.circles.attr("r",P=>this.nodeScale(P.node_size))}changeLinkThicknessParameter(s,d){this._changeLinkThicknessScale(d,null,!0)}changeLinkLengthParameter(s,d){this._changeLinkLengthScale(d,null,!0)}changeLinkColorParameter(s,d){this._changeLinkColorScale(null,[d[0],d[1]],!0)}_changeLinkThicknessScale(s,d,_){const S=this.config;if(d&&(S.link_thickness.range=d),s&&(S.link_thickness.domain=s),this.linkThicknessScale.domain(S.link_thickness.domain).range(S.link_thickness.range).clamp(!0),_){const P=this.dataStore.getRawColumn(S.param[4]);this.link.attr("stroke-width",H=>this.linkThicknessScale(P[H.d_index]))}const T=this.linkThicknessLegend;if(T&&(S.link_thickness.legend_position=[T.offsetLeft,T.offsetTop],T.remove()),!S.link_thickness.show_legend){this.linkThicknessLegend=void 0;return}const F=S.link_thickness.legend_position,M=this.dataStore.columnIndex[S.param[4]].name;this.linkThicknessLegend=getColorLegendCustom(this.linkThicknessScale,{label:M,type:"line"}),this.contentDiv.append(this.linkThicknessLegend),this.linkThicknessLegend.style.top=`${F[1]}px`,this.linkThicknessLegend.style.left=`${F[0]}px`}_changeLinkLengthScale(s,d,_){const S=this.config;d&&(S.link_length.range=d),s&&(S.link_length.domain=s);const T=[S.link_length.range[0],S.link_length.range[1]];this.linkLengthScale.domain([...S.link_length.domain].reverse()).range(T).clamp(!0);const F=this.dataStore.getRawColumn(S.param[3]),M=this.linkLengthScale.range()[1];this.forceLink.distance(P=>{const H=F[P.d_index];return Number.isNaN(H)?M:this.linkLengthScale(H)}),_&&(this.simulation.alphaTarget(.2).restart(),setTimeout(()=>{this.simulation.alphaTarget(0)},1e3))}_changeNodeColor(s){const d=this.config;d.node_color=s;const _=this.dataStore.getColumnColors(d.param[1]),S=this.dataStore.getColorForCategory(d.param[0],d.category),T=s==="type"?this.dataStore.getColumnColors(d.param[7]):null;this.circles.attr("fill",F=>T?T[F.type]:d.node_color==="cells"?_[F.d_index]:S)}getConfig(){const s=super.getConfig(),d=this.linkThicknessLegend;d&&(s.link_thickness.legend_position=[d.offsetLeft,d.offsetTop]);const _=this.nodeColorLegend;return _&&(s.node_size.legend_position=[_.offsetLeft,_.offsetTop]),s}_changeLinkColorScale(s,d,_){if(d&&(this.config.link_color.domain=d),s&&(this.config.link_color.colors=s),s!=="none"){const S=this.config.link_color.domain;this.linkColorScale=this.dataStore.getColorFunction(this.config.param[5],{overideValues:{min:S[0],max:S[1],colors:color_schemes[this.config.link_color.colors]}})}_&&(this.link.style("stroke",S=>s!=="none"&&this.linkColorScale?this.linkColorScale(S.d_index):"currentColor").style("opacity",s!=="none"?.6:1),this.setColorLegend(),this.arrows.attr("stroke",S=>this.linkColorScale&&s!=="none"?this.linkColorScale(S.d_index):"currentColor"))}onDataFiltered(s){this.reCalculate()}getColorLegend(){const s=this.config,d=s.link_color.domain;return this.dataStore.getColorLegend(s.param[5],{overideValues:{min:d[0],max:d[1],colors:color_schemes[s.link_color.colors]}})}colorByDefault(){this.config.color_by=void 0,this.legend&&this.legend.remove(),this.linkColorScale=null,this._changeLinkColor()}ticked(){this.lables.attr("text-anchor",s=>s.x>this.width*2/3?"end":"start").attr("x",s=>s.x>this.width*2/3?-6:6),this.node.attr("transform",s=>(s.x=Math.min(s.x,this.width-20),s.x=Math.max(s.x,15),s.y=Math.min(s.y,this.height-20),s.y=Math.max(s.y,15),`translate(${s.x},${s.y})`)),this.link.attr("x1",s=>s.source.x).attr("y1",s=>s.source.y).attr("x2",s=>s.target.x).attr("y2",s=>s.target.y),this.arrows.attr("d",s=>{let d=Math.sqrt((s.source.y-s.target.y)**2+(s.target.x-s.source.x)**2);d=d===0?.1:d;const _=(d/2-5)/d,S=(s.target.x-s.source.x)/2+s.source.x,T=(s.target.y-s.source.y)/2+s.source.y,F=(s.target.x-s.source.x)*_+s.source.x,M=(s.target.y-s.source.y)*_+s.source.y,P=5/d*(s.source.y-s.target.y),H=F+P,J=F-P,K=5/d*(s.target.x-s.source.x),z=M+K,oe=M-K;return`M ${H} ${z} ${S} ${T} ${J} ${oe}`})}setUpDrag(){const s=S=>{S.active||this.simulation.alphaTarget(.3).restart(),S.subject.fx=S.subject.x,S.subject.fy=S.subject.y},d=S=>{S.subject.fx=S.x,S.subject.fy=S.y},_=S=>{S.active||this.simulation.alphaTarget(0),S.subject.fx=null,S.subject.fy=null};return drag().on("start",s).on("drag",d).on("end",_)}reCalculate(){this.config.base_cell?this.getLinks2():this.getLinks(),this.drawChart(),this.simulation.alphaTarget(.2).restart(),setTimeout(()=>{this.simulation.alphaTarget(0)},1e3)}changeParameter(){const s=this.config;this.forceLink.strength(s.link_strength),this.forceManyBody.strength(s.node_repulsion),this.simulation.alphaTarget(.2).restart(),setTimeout(()=>{this.simulation.alphaTarget(0)},1e3)}getLinks2(){const s=this.config.param,d=this.dataStore.getColumnValues(s[1]),_=this.dataStore.getColumnValues(s[2]),S=this.dataStore.getColumnValues(s[0]).indexOf(this.config.category),T=this.dataStore.columnIndex,F=T[s[0]].data,M=T[s[1]].data,P=T[s[2]].data,H=T[s[6]].data;this.nodeData=[];const J=new Set,K=d.indexOf(this.config.base_cell);J.add(K);const z=new Set;let oe=new Set;const se=this.config.specific_only;if(se)oe=new Set(se[0].map(he=>d.indexOf(he)));else for(let he=0;he<d.length;he++)oe.add(he);const ae=this.dataStore.filterArray;for(let he=0;he<this.dataStore.size;he++)ae[he]>0||F[he]===S&&M[he]===K&&oe.has(P[he])&&M[he]!==P[he]&&(z.add(`${M[he]}|${P[he]}`),J.add(P[he]));const ge=new Set(J);if(this.config.levels===2){for(let he=0;he<this.dataStore.size;he++)if(!(ae[he]>0)&&F[he]===S&&J.has(M[he])&&oe.has(P[he])&&M[he]!==P[he]){if(P[he]===K)continue;z.has(`${P[he]}|${M[he]}`)||(z.add(`${M[he]}|${P[he]}`),ge.add(P[he]))}}for(let he=0;he<d.length;he++)for(let ve=0;ve<_.length;ve++)ge&&(!ge.has(he)||!ge.has(ve))||z.add(`${he}|${ve}`);this.linkData=[];const pe={};for(let he=0;he<this.dataStore.size;he++){if(ae[he]>0)continue;pe[d[M[he]]]=H[he];const ve=`${M[he]}|${P[he]}`;F[he]===S&&z.has(ve)&&(z.delete(`${P[he]}|${M[he]}`),this.linkData.push({source:d[M[he]],target:_[P[he]],d_index:he}))}for(let he=0;he<d.length;he++)ge&&!ge.has(he)||this.nodeData.push({id:d[he],d_index:he,node_size:pe[d[he]],type:this.cell_types[d[he]]})}getLinks(){const s=this.config.param,d=this.dataStore.getColumnValues(s[1]),_=this.dataStore.getColumnValues(s[2]);this.nodeData=[];const S=this.dataStore.getColumnValues(s[0]).indexOf(this.config.category),T=this.dataStore.columnIndex,F=T[s[0]].data,M=T[s[1]].data,P=T[s[2]].data,H=T[s[3]].data;this.linkData=[];const J={},K={},z=this.dataStore.filterArray;for(let oe=0;oe<this.dataStore.size;oe++)if(!(z[oe]>0)&&F[oe]===S){const se=d[M[oe]],ae=_[P[oe]];if(se===ae)continue;const ge=J[`${P[oe]}|${M[oe]}`];if(ge!=null){const pe=this.linkData[ge];H[oe]>H[pe.d_index]&&(pe.source=se,pe.target=ae,pe.d_index=oe);continue}K[se]=!0,K[ae]=!0,this.linkData.push({source:se,target:ae,d_index:oe}),J[`${M[oe]}|${P[oe]}`]=this.linkData.length-1}for(let oe=0;oe<d.length;oe++){const se=d[oe];K[se]&&this.nodeData.push({id:se,d_index:oe,node_size:this.cell_sizes[se],type:this.cell_types[se]})}}setSize(s,d){super.setSize(s,d),this.simulation.force("center",forceCenter(this.width/2,this.height/2)),this._changeLinkLengthScale(null,null,!0)}getSettings(){const s=super.getSettings(),d=this.config,_=this.dataStore.getColumnValues(d.param[0]),S=this.dataStore.getColumnValues(d.param[1]).map(H=>({t:H}));S.unshift({t:"None"}),_.map(H=>({t:H,v:H})),s.push({type:"slider",max:20,min:5,doc:this.__doc__,current_value:d.label_size,label:"Label Size",func:H=>{this._changeLabelSize(H)}}),s.push({type:"dropdown",current_value:d.base_cell||"None",values:[S,"t","t"],label:"Center Cell",func:H=>{H==="None"?d.base_cell=void 0:d.base_cell=H,this.reCalculate()}}),s.push({type:"radiobuttons",label:"Number of Levels",current_value:d.levels,choices:[["1",1],["2",2]],func:H=>{d.levels=Number.parseInt(H),d.base_cell&&this.reCalculate()}});const T=this.dataStore.getColumnList("number");let F=this.dataStore.getColumnQuantile(d.param[5],.01);s.push({label:"Link Color",type:"dropdown",values:[T,"name","field"],current_value:d.param[5],func:H=>{d.param[5]=H},onchange:(H,J)=>{d.param[5]=J;const K=H["Link Color Domain"].noUiSlider,z=this.dataStore.getColumnQuantile(J,.01);K.updateOptions({range:{max:z[1],min:z[0]}}),K.set(z),this.changeLinkColorParameter(J,z)}});const M=[];for(const H in color_schemes)M.push([H,H]);M.push(["none","none"]),s.push({type:"radiobuttons",label:"Link Color",current_value:d.link_color.colors,choices:M,func:H=>{this._changeLinkColorScale(H,null,!0)}}),s.push({type:"doubleslider",max:F[1],min:F[0],doc:this.__doc__,current_value:this.config.link_color.domain,label:"Link Color Domain",func:(H,J)=>{this._changeLinkColorScale(null,[H,J],!0)}}),F=this.dataStore.getColumnQuantile(d.param[4],.01),s.push({label:"Link Thickness",type:"dropdown",values:[T,"name","field"],current_value:d.param[4],func:H=>{d.param[4]=H},onchange:(H,J)=>{d.param[4]=J;const K=H["Link Thickness Domain"].noUiSlider,z=this.dataStore.getColumnQuantile(J,.01);K.updateOptions({range:{max:z[1],min:z[0]}}),K.set(z),this.changeLinkThicknessParameter(J,z)}}),s.push({type:"doubleslider",max:20,min:1,doc:this.__doc__,current_value:this.config.link_thickness.range,label:"Link Thickness Range",func:(H,J)=>{this._changeLinkThicknessScale(null,[H,J],!0)}}),s.push({type:"doubleslider",max:F[1],min:F[0],doc:this.__doc__,current_value:this.config.link_thickness.domain,label:"Link Thickness Domain",func:(H,J)=>{this._changeLinkThicknessScale([H,J],null,!0)}}),s.push({type:"check",current_value:d.link_thickness.show_legend,label:"Show Link Thickness Legend",func:H=>{d.link_thickness.show_legend=H,this._changeLinkThicknessScale()}}),F=this.dataStore.getColumnQuantile(d.param[3],.01),s.push({label:"Link Length",type:"dropdown",values:[T,"name","field"],current_value:d.param[3],func:H=>{d.param[3]=H},onchange:(H,J)=>{d.param[3]=J;const K=H["Link Length Domain"].noUiSlider,z=this.dataStore.getColumnQuantile(J,.01);K.updateOptions({range:{max:z[1],min:z[0]}}),K.set(z),this.changeLinkLengthParameter(J,z)}}),s.push({type:"doubleslider",max:200,min:1,doc:this.__doc__,current_value:this.config.link_length.range,label:"Link Length Range",func:(H,J)=>{this._changeLinkLengthScale(null,[H,J],!0)}}),s.push({type:"doubleslider",max:F[1],min:F[0],doc:this.__doc__,current_value:this.config.link_length.domain,label:"Link Length Domain",func:(H,J)=>{this._changeLinkLengthScale([H,J],null,!0)}}),s.push({type:"check",current_value:d.show_directionality,label:"Show Directionality",func:H=>{d.show_directionality=H,this.arrows.style("opacity",H?1:0)}});const P=[["Cells","cells"],["State","state"]];return d.param[7]&&P.push(["Type","type"]),s.push({type:"radiobuttons",label:"Node Color",current_value:d.node_color,choices:P,func:H=>{this._changeNodeColor(H)}}),F=this.dataStore.getMinMaxForColumn(d.param[6]),s.push({type:"doubleslider",max:50,min:1,doc:this.__doc__,current_value:this.config.node_size.range,label:"Node Size Range",func:(H,J)=>{this._changeNodeSizeScale(null,[H,J],!0)}}),s.push({type:"doubleslider",max:F[1],min:F[0],doc:this.__doc__,current_value:this.config.node_size.domain,label:"Node Size Domain",func:(H,J)=>{this._changeNodeSizeScale([H,J],null,!0)}}),s.push({type:"check",current_value:d.node_size.show_legend,label:"Show Node Size Legend",func:H=>{d.node_size.show_legend=H,this._changeNodeSizeScale()}}),s.push({type:"slider",max:2,min:0,doc:this.__doc__,current_value:d.link_strength,label:"Link Strength",func:H=>{d.link_strength=H,this.changeParameter()}}),s.push({type:"slider",max:0,min:-1e3,doc:this.__doc__,current_value:d.node_repulsion,label:"Node Repulsion",func:H=>{d.node_repulsion=H,this.changeParameter()}}),s}}BaseChart.types.cell_network_chart={name:"Spatial Connectivity Map",required:["interactions"],methodsUsingColumns:["changeLinkThicknessParameter","changeLinkLengthParameter","changeLinkColorParameter"],class:CellNetworkChart,init:(f,s,d)=>{const _=s.interactions,S=s.interactions.spatial_connectivity_map;f.param=[_.pivot_column,_.interaction_columns[0],_.interaction_columns[1],S.link_length,S.link_thickness,S.link_color,S.node_size],S.cell_type&&f.param.push(S.cell_type),f.category=d.pivot},extra_controls:f=>{const s=f.interactions.pivot_column;return[{type:"dropdown",name:"pivot",label:f.getColumnName(s),values:f.getColumnValues(s).map(d=>({name:d,value:d}))}]}};class SingleHeatMap extends SVGChart{constructor(s,d,_){super(s,d,_,{x:{type:"band"},y:{type:"band"}}),_.title||this._setTitle();const S=this.config.param;let T=this.dataStore.getColumnValues(S[0]);this.y_scale.domain(T.slice(0)),T=this.dataStore.getColumnValues(S[1]),this.x_scale.domain(T.slice(0));const F=this.config;F.color_scale=F.color_scale||{log:!1,min_max:s.getColumnQuantile(S[2],.01)},F.color_legend||(F.color_legend={display:!0}),this.setColorFunction(),this.initialSetUp(),this.addToolTip(),this.drawChart()}remove(s=!0){super.remove()}onDataHighlighted(s){const d=s.indexes[0],_=this.graph_area.selectAll("rect");_.attr("stroke","white").style("stroke-width","0px"),_.filter(S=>!!(S&&S[3]===d)).attr("stroke","black").style("stroke-width","4px"),this.highlight=d}_setTitle(){const s=this.config.category,d=this.dataStore.getColumnName(this.config.param[2]);this.setTitle(`${s}-${d}`)}changeCategory(s){this.config.category=s,this.initialSetUp(),this.drawChart(),this._setTitle()}onDataFiltered(s){this.initialSetUp(),this.drawChart()}changeValues(s){this.config.param[2]=s,this.setColorFunction(),this.initialSetUp(),this.drawChart(),this._setTitle()}initialSetUp(){const s=this.config,d=s.param,_=this.dataStore.columnIndex[d[0]],S=_.data,T=this.dataStore.columnIndex[d[1]],F=T.data;let M=null,P=null,H=_.values.length,J=T.values.length;this.y_scale.domain(_.values.slice(0)),this.x_scale.domain(T.values.slice(0));for(const ve of this.dataStore.dimensions)if(ve.filterColumns&&ve.noclear){if(ve.filterColumns[0]===d[0]){const be=ve.filterArguments;M=be.map(Re=>_.values.indexOf(Re)),H=be.length,this.y_scale.domain(be.slice(0))}if(ve.filterColumns[0]===d[1]){const be=ve.filterArguments;P=be.map(Re=>T.values.indexOf(Re)),J=be.length,this.x_scale.domain(be.slice(0))}}const K=this.dataStore.columnIndex,z=K[d[3]].data,oe=K[d[2]].data,se=this.dataStore.size,ae=new Array;for(let ve=0;ve<H;ve++)ae[ve]=new Array(J);const ge=this.dataStore.columnIndex[d[3]].values.indexOf(s.category);let pe=null,he=null;s.show_group_interactions&&(pe=this.dataStore.getRawColumn(d[4]),he=this.dataStore.getRawColumn(d[5]));for(let ve=0;ve<se;ve++)if(z[ve]===ge){let be=S[ve],Re=F[ve];if(be=M?M.indexOf(be):be,Re=P?P.indexOf(Re):Re,Re===-1||be===-1)continue;const Fe=ae[be][Re];Fe?(Fe[2]+=oe[ve],Fe[4]++):(ae[be][Re]=[S[ve],F[ve],oe[ve],ve,1],pe&&ae[be][Re].push(`${pe[ve]}-${he[ve]}`))}for(let ve=0;ve<H;ve++)for(let be=0;be<J;be++){const Re=ae[ve][be];Re[2]/=Re[4]}this.data=ae}drawChart(s=300){this.updateAxis();const d=select(this.contentDiv).transition().duration(s).ease(linear),S=this.config.param,T=this.dataStore.getColumnValues(this.config.param[0]),F=this.dataStore.getColumnValues(this.config.param[1]),M=this.y_scale.domain().length,P=this.x_scale.domain().length,H=this._getContentDimensions(),J=H.width/P,K=H.height/M,z=this.dataStore.filterArray,oe="#E0E0E0";let se=null,ae=null,ge=null;if(S.length===6){const pe=this.dataStore.getColumnValues(S[4]),he=this.dataStore.getColumnValues(S[5]);ae=this.dataStore.getRawColumn(S[4]),ge=this.dataStore.getRawColumn(S[5]),se=new Array(pe.length);for(let ve=0;ve<se.length;ve++){const be=new Array(he.length);be.fill(0),se[ve]=be}}if(this.graph_area.selectAll(".heatmap-row").data(this.data).join("g").attr("transform",(pe,he)=>`translate(0,${he*K})`).attr("class","heatmap-row").selectAll(".heatmap-rect").data(pe=>pe).join("rect").attr("class","heatmap-rect").attr("x",(pe,he)=>he*J+1).attr("height",K-2).attr("width",J-2).on("click",(pe,he)=>{this.dataStore.dataHighlighted([he[3]],this)}).on("mouseover pointermove",(pe,he)=>{const ve=F[he[0]],be=T[he[1]];this.showToolTip(pe,`${ve}<br>${be}<br>${he[2].toPrecision(3)}`)}).on("mouseleave",()=>{this.hideToolTip()}).transition(d).attr("fill",(pe,he)=>!pe||Number.isNaN(pe[2])||z[pe[3]]>0?oe:(se&&se[ae[pe[3]]][ge[pe[1]]]++,this.colorFunction(pe[2]))),se){const pe=this.dataStore.getColumnValues(S[4]),he=this.dataStore.getColumnValues(S[5]),ve=[];for(let be=0;be<pe.length;be++)for(let Re=0;Re<he.length;Re++)ve.push(`${pe[be]}-${he[Re]}:${se[be][Re]}`);this.legendIcon.setAttribute("aria-label",ve.join(", "))}this.updateAxis()}setSize(s,d){super.setSize(s,d),this.drawChart()}getColorLegend(){const d={overideValues:{colorLogScale:this.config.color_scale.log,colors:["#313695","#4575B4","#74ADD1","#ABD9E9","#E0F3F8","#E0F3F8","#FFFFBF","#FEE090","#FDAE61","#F46D43","#D73027","#A50026"]},name:"Scale"},_=this.config.color_scale.min_max;return _&&(d.overideValues.min=_[0],d.overideValues.max=_[1]),this.dataStore.getColorLegend(this.config.param[2],d)}getSettings(){const s=super.getSettings(),d=this.config,S=this.dataStore.getColumnValues(d.param[3]).map(M=>({t:M,v:M})),T=this.dataStore.getColumnQuantile(d.param[2],.01);s.push({type:"doubleslider",max:T[1],min:T[0],doc:this.__doc__,current_value:d.color_scale.min_max,label:"Color Scale",func:(M,P)=>{d.color_scale.min_max=[M,P],this.setColorFunction(),this.drawChart()}}),s.push({label:"Change Category",type:"dropdown",values:[S,"t","v"],current_value:d.category,func:M=>{this.changeCategory(M)}});const F=this.dataStore.getColumnList("number");return s.push({label:"Change Values",type:"dropdown",values:[F,"name","field"],current_value:d.param[2],func:(M,P)=>{const H=this.dataStore.getColumnQuantile(M,.01);d.color_scale.min_max=H;const J=P["Color Scale"].noUiSlider;J.updateOptions({range:{max:H[1],min:H[0]}}),J.set(H),this.changeValues(M)}}),s}setColorFunction(){const s=this.config.param,d={useValue:!0,overideValues:{colorLogScale:this.config.color_scale.log,colors:["#313695","#4575B4","#74ADD1","#ABD9E9","#E0F3F8","#E0F3F8","#FFFFBF","#FEE090","#FDAE61","#F46D43","#D73027","#A50026"]}},_=this.config.color_scale.min_max;_&&(d.overideValues.min=_[0],d.overideValues.max=_[1]),this.colorFunction=this.dataStore.getColorFunction(s[2],d),this.setColorLegend()}}BaseChart.types.single_heat_map={name:"Interaction Matrix",required:["interactions"],methodsUsingColumns:["changeValues"],init:(f,s,d)=>{var S;const _=s.interactions;f.param=[_.interaction_columns[0],_.interaction_columns[1],d.value,_.pivot_column],(S=_.interaction_matrix)!=null&&S.groups&&(f.param=f.param.concat(_.interaction_matrix.groups)),f.category=d.pivot},extra_controls:f=>{const s=f.interactions.pivot_column,d=f.getColumnList("number");return[{type:"dropdown",name:"pivot",label:f.getColumnName(s),values:f.getColumnValues(s).map(_=>({name:_,value:_}))},{type:"dropdown",name:"value",label:"Value To Display",values:d.map(_=>({name:_.name,value:_.field}))}]},class:SingleHeatMap};class DotPlot extends SVGChart{constructor(s,d,_){_.title=_.title||s.getColumnName(_.param[0]),super(s,d,_,{x:{type:"band"},y:{type:"band"},ry:{}});const S=this.config.param,T=[],F=this.config;F.color_scale=F.color_scale||{log:!1},F.color_legend||(F.color_legend={display:!0}),F.fraction_legend||(F.fraction_legend={display:!0}),this.fractionScale=sqrt$3().domain([0,100]);for(let M=1;M<S.length;M++)T.push(this.dataStore.getColumnName(S[M]));this.x_scale.domain(T),this.dim=this.dataStore.getDimension("catcol_dimension"),this.addToolTip(),this.onDataFiltered(),this.colorScheme=scheme[8]}remove(s=!0){this.dim.destroy(s),super.remove()}removeFilter(){this.dim.removeFilter(),this.filter=[],this.drawChart()}setColorFunction(){const s=this.config.param,d=this.data.mean_range,_={useValue:!0,overideValues:{colorLogScale:this.config.color_scale.log,colors:this.colorScheme,max:d[1],min:d[0]}};this.colorFunction=this.dataStore.getColorFunction(s[1],_),this.setColorLegend()}getColorLegend(){const s=this.config.color_scale,d=this.data.mean_range,_={overideValues:{max:d[1],min:d[0],colorLogScale:s.log,colors:this.colorScheme},name:"Mean Expression"};return this.dataStore.getColorLegend(this.config.param[1],_)}showFractionLegend(){const s=this.fractionLegend,d=this.config;if(s&&(d.fraction_legend.position=[s.offsetLeft,s.offsetTop],s.remove()),!d.fraction_legend.display){this.nodeFractionLegend=void 0;return}const _=d.fraction_legend.position||[0,0];this.fractionLegend=getColorLegendCustom(this.fractionScale,{label:"fraction",type:"circle"}),this.contentDiv.append(this.fractionLegend),this.fractionLegend.style.top=`${_[1]}px`,this.fractionLegend.style.left=`${_[0]}px`}getConfig(){const s=super.getConfig(),d=this.linkThicknessLegend;return d&&(s.fraction_legend.position=[d.offsetLeft,d.offsetTop]),s}onDataFiltered(s){if(this.dim===s||this.isPinned)return;s==="all_removed"&&(this.dim.removeFilter(),this.resetButton.style.display="none");const d={method:"averages_simple",threshold:this.config.threshold_value};this.dim.getAverages(_=>{this.data=_,this.setColorFunction(),this.drawChart()},this.config.param,d)}filterCategories(s,d){this.dim.filter("filterCatCol",[this.config.param[0],d],{threshold:this.config.threshold_value,cat:s}),this.drawChart(),this.resetButton.style.display="inline"}drawChart(s=400){const d=select(this.contentDiv).transition().duration(s).ease(linear),_=this._getContentDimensions(),S=_.width/(this.config.param.length-1),T=this.dim.filterMethod;this.setColorFunction();const F=this.dataStore.getColumnValues(this.config.param[0]),M=this.data.data.filter(K=>K.count!==0);this.y_scale.domain(M.map(K=>F[K.id])),this.updateAxis();const P=_.height/M.length;let H=(S>P?P:S)/2;H=H>25?25:H,this.fractionScale.range([0,H]),this.showFractionLegend();const J=P/2;this.graph_area.selectAll(".dotplot-row").data(M,K=>K.id).join(K=>K.append("g").attr("class","dotplot-row").attr("transform",(z,oe)=>`translate(${-_.width},${oe*P})`),null,K=>K.transition(d).attr("transform",(z,oe)=>`translate(${_.width},${oe*P})`).remove()).call(K=>K.transition(d).attr("transform",(z,oe)=>`translate(0,${oe*P})`)).selectAll(".dotplot-circle").data(K=>K.values,K=>K.id).join(K=>K.append("circle").attr("class","dotplot-circle").attr("stroke","black").on("click",(z,oe)=>{this.filterCategories(F[oe.cat_id],oe.id)}).on("mouseover pointermove",(z,oe)=>{this.showToolTip(z,`(<em>${oe.id}, ${F[oe.cat_id]}</em>)<br>fraction: ${oe.frac}`)}).on("mouseout",()=>{this.hideToolTip()})).attr("stroke-width",K=>T&&this.dim.filterArguments.cat===F[K.cat_id]&&this.dim.filterColumns[1]===K.id?4:1).transition(d).attr("cx",(K,z)=>z*S+.5*S).attr("cy",J).attr("r",K=>this.fractionScale(K.frac)).attr("fill",(K,z)=>this.colorFunction(K.mean))}setSize(s,d){super.setSize(s,d),this.drawChart()}getSettings(){const s=this.config;return super.getSettings().concat([{type:"check",label:"Cluster Rows",current_value:s.cluster_rows,func:_=>{s.cluster_rows=_,this.clusterRows(),this.drawChart()}},{type:"check",label:"Cluster Columns",current_value:s.cluster_columns,func:_=>{s.cluster_columns=_,this.clusterColumns(),this.drawChart()}},{type:"radiobuttons",label:"Averaging Method",current_value:s.method,choices:[["Mean","mean"],["Median","median"]],func:_=>{s.method=_,this.onDataFiltered()}},{type:"radiobuttons",label:"Trim to Percentile",current_value:s.color_scale.trim||"none",choices:[["No Trim","none"],["0.001","0.001"],["0.01","0.01"],["0.05","0.05"]],func:_=>{s.color_scale.trim=_,this.onDataFiltered()}},{label:"Show Color Legend",type:"check",current_value:s.color_legend?s.color_legend.display:!0,func:_=>{s.color_legend.display=_,this.setColorLegend()}},{type:"check",label:"Log Color Scale",current_value:s.color_scale.log,func:_=>{s.color_scale.log=_,this.setColorFunction(),this.drawChart()}}])}}BaseChart.types.dot_plot={name:"Dot Plot",class:DotPlot,params:[{type:"text",name:"Categories on x-axis"},{type:"_multi_column:number",name:"Fields on y axis"}]};class ImageTable{constructor(s,d,_){typeof s=="string"&&(s=document.getElementById(`#${s}`)),_||(_={}),this.domId=this._getRandomString(),this.row_first=0,this.row_last=139,this.tile_height=205,this.tile_width=205,this.__doc__=document,this.display_columns=[],this.selection_mode=!0,this.imageFunc=_.imageFunc,this.base_url=getProjectURL(_.base_url),this.parent=s,this.selected_tiles={},this.cache_size=5;const S=this.parent.getBoundingClientRect();this.config=_,_.background_color,this.view_port=createEl("div",{styles:{height:`${S.height}px`,width:`${S.width}px`,overflow:"auto"}},this.parent),this.canvas=createEl("div",{styles:{position:"relative"}},this.view_port),this.canvas.addEventListener("click",H=>{this.imageClicked(H,H.srcElement)}),this.canvas.addEventListener("mouseover",H=>{this.mouseOver(H,H.srcElement)}),this.canvas.addEventListener("keydown",H=>{this.keyPressed(H)}),this.data_view=d,this._setCanvasHeight(),this.view_port.addEventListener("scroll",H=>this._hasScrolled(H)),this.parent.append(this.view_port),this.resize_timeout=null,this.resize_timeout_length=50,this.listeners={image_clicked:new Map,image_over:new Map,image_out:new Map,data_changed:new Map,image_selected:new Map},this.highlightcolors=null,this.tag_color_palletes={},this.image_suffix=_.image_suffix?_.image_suffix:".png",_.columns&&this.setColumns(_.columns);const T=new Image;T.crossOrigin="anonymous",T.onload=H=>{this.originalDimensions=[T.width,T.height],this.preferred_width=this.img_width=T.width,this.preferred_height=this.img_height=T.height,_.initial_image_width&&(this.preferred_width=_.initial_image_width,this.preferred_height=Math.round(this.preferred_width/this.img_width*this.img_height)),this._resize()};const F=getProjectURL(this.config.base_url),M=this.config.image_type,P=this.data_view.getItemField(1,this.config.image_key);T.src=`${F}${P}.${M}`}mouseOver(s,d){if(d.id){const _=d.id.split("-"),S=Number.parseInt(_[1]),T=this.data_view.getItem(S);if(!T)return;if(this.image_over){if(T.id===this.image_over.id)return;this.listeners.image_out.forEach(F=>{F(s,this.image_over[0],self.image_over[1])})}this.listeners.image_over.forEach(F=>{F(s,T,d)}),this.image_over=d}else this.image_over&&this.listeners.image_out.forEach(_=>{_(s,self.image_over[0],self.image_over[1])}),this.image_over=null}imageClicked(s,d){let _=d.id;if(_||(_=d.parentElement.id),!_)return;const S=_.split("-");if(S[0]==="mlvtile"){let T=null;const F=Number.parseInt(S[2]);if(s.shiftKey&&self.last_img_clicked!=null){const P=this.last_img_clicked.index;range=[],T=[];const H=F-P<0?-1:1;let J=P+1,K=F+1;H===-1&&(J=F,K=P);for(let z=J;z<K;z++){const oe=this.data_view.getId(z);T.push(oe)}T.push(this.data_view.getId(P))}const M=this.data_view.getId(F);this.listeners.image_clicked.forEach(P=>{P(s,M,d)}),this.last_index_clicked=F,this.selection_mode&&this.setSelectedTiles([F],s.ctrlKey,!0)}}keyPressed(s){if(s.which===39||s.which===40){if(this.last_index_clicked===this.data_view.getFilteredItems().length-1)return;(this.last_index_clicked||this.last_index_clicked===0)&&(this.last_index_clicked++,this.setSelectedTiles([this.data_view.getItem(this.last_index_clicked).id],!1,!0),this.last_index_clicked>this.getLastTileInView()&&this.show(this.last_index_clicked))}else if(s.which===37||s.which===38){if(this.last_index_clicked===0)return;this.last_index_clicked&&(this.last_index_clicked--,this.setSelectedTiles([this.data_view.getItem(this.last_index_clicked).id],!1,!0),this.last_index_clicked<this.getFirstTileInView()&&this.show(this.last_index_clicked))}}addListener(s,d,_){const S=this.listeners[s];return S?(_||(_=this._getRandomString()),S.set(_,d),_):null}removeListener(s,d){const _=this.listeners[s];return _?_.delete(d):!1}setImageWidth(s,d){this.setImageDimensions([s,Math.round(s/this.img_width*this.img_height)],d)}setImageLabel(s){this.config.image_label=s;const d=this.getFirstTileInView();this.setImageDimensions(),this.show(d)}setImageTitle(s){this.config.image_title=s;const d=this.getFirstTileInView();this.show(d)}setImageDimensions(s,d){this.lrm=this.config.margins.left_right,this.tbm=this.config.margins.top_bottom;const _=this.getFirstTileInView();s?(this.preferred_width=s[0],this.preferred_height=s[1]):s=[this.preferred_width,this.preferred_height],this.width<this.preferred_width+this.lrm*2&&this.width!==0?(s[0]=this.width-this.lrm*3,this.num_per_row=1):(this.num_per_row=Math.ceil((this.width-this.lrm)/(this.preferred_width+this.lrm)),s[0]=Math.floor((this.width-2*this.lrm)/this.num_per_row)-this.lrm),s[1]=Math.round(s[0]/this.preferred_width*this.preferred_height),this.config.image_label&&(this.label_size=Math.round(s[1]/12),this.label_size=Math.max(this.label_size,12),this.tbm=this.tbm<this.label_size+4?this.label_size+4:this.tbm),this.tile_width=Number.parseInt(s[0])+this.lrm,this.tile_height=Number.parseInt(s[1])+this.tbm,this.t_width=Number.parseInt(s[0]),this.t_height=Number.parseInt(s[1]);const S=Math.floor((this.height+this.cache_size*this.tile_height)/this.tile_height);this.max_difference=S+this.cache_size,d&&this.show(_)}setPixelated(s){this.view_port.style.imageRendering=s?"pixelated":"auto"}resize(){clearTimeout(this.resize_timeout),this.resize_timeout=setTimeout(()=>{this._resize()},this.resize_timeout_length)}getFirstTileInView(){const s=this.view_port.scrollTop;return Math.floor(s/this.tile_height)*this.num_per_row}getLastTileInView(){const s=this.view_port.scrollTop+this.view_port.height();return Math.floor(s/this.tile_height)*this.num_per_row}setColumns(s){this.columns=s}setColorBy(s,d){this.color_by=s,this.color_overlay=d}_setCanvasHeight(){const s=Math.ceil(this.data_view.getLength()/this.num_per_row)*this.tile_height+this.tbm;this.canvas.style.height=`${s}px`}_hasScrolled(){clearTimeout(this.scroll_timeout);const s=this.view_port.scrollTop;let d=Math.floor((s-this.cache_size*this.tile_height)/this.tile_height);const _=Math.floor((s+this.height+this.cache_size*this.tile_height)/this.tile_height);d<0&&(d=0);let S=10;Math.abs(d-this.row_displayed_first)>this.max_difference&&(S=50),this.scroll_timeout=setTimeout(()=>{Math.abs(d-this.row_displayed_first)>this.max_difference?this.render(d,_,!0):this.render(d,_)},S)}_removeByClass(s){document.querySelectorAll(s).forEach(d=>d.remove())}render(s,d,_){if(_){this.canvas.innerHTML="";for(let S=s;S<d;S++)this._addRow(S)}else{if(s===this.row_displayed_first&&s!==0)return;if(s<this.row_displayed_first){for(let S=s;S<this.row_displayed_first;S++)this._addRow(S);for(let S=d;S<this.row_displayed_last;S++)this._removeByClass(`.mlv-tile-${this.domId}-${S}`)}else{for(let S=this.row_displayed_last;S<d;S++)this._addRow(S);for(let S=this.row_displayed_first;S<s;S++)this._removeByClass(`.mlv-tile-${this.domId}-${S}`)}if(s===0)for(let S=d;S<this.row_displayed_last;S++)this._removeByClass(`.mlv-tile-${this.domId}-${S}`)}this.row_displayed_first=s,this.row_displayed_last=d}_resize(s){s||(s=this.getFirstTileInView());const d=this.parent.getBoundingClientRect();this.width=Math.round(d.width),this.height=Math.round(d.height),this.view_port.style.height=`${this.height}px`,this.view_port.style.width=`${this.width}px`,this.setImageDimensions(),this.show(s)}_calculateTopBottomRow(s){s||(s=0);let d=0;s||s===0?d=Math.floor(s/this.num_per_row)*this.tile_height:d=this.view_port.scrollTop;const S=this.view_port.getBoundingClientRect().height;let T=Math.floor((d-this.cache_size*this.tile_height)/this.tile_height);const F=Math.floor((d+S+this.cache_size*this.tile_height)/this.tile_height);return T<0&&(T=0),{top:T,bottom:F,scroll_top:d}}setSelectedTiles(s,d,_){if(!d){for(const S in this.selected_tiles){const T=this.__doc__.getElementById(`mlvtile-${this.domId}-${S}`);T&&(T.style.border=this.selected_tiles[S])}this.selected_tiles={}}for(const S of s){const T=this.__doc__.getElementById(`mlvtile-${this.domId}-${S}`);T&&(this.selected_tiles[S]=T.style.border,T.style.border="4px solid goldenrod",console.log(T.style.border))}_&&this.listeners.image_selected.forEach(S=>{S(s)})}scrollToTile(s,d){const _=this.data_view.data.indexOf(s),S=this._calculateTopBottomRow(_);Math.abs(S.top-this.row_displayed_first)>this.max_difference?this.render(S.top,S.bottom,!0):this.render(S.top,S.bottom),this.view_port.scrollTop=S.scroll_top,d&&this.setSelectedTiles([_])}_getRandomString(s,d){s||(s=6),d=d==null?void 0:d.toLowerCase();let _="",S=0;const T=d==="a"?10:0,F=d==="n"?10:62;for(;S++<s;){let M=Math.random()*(F-T)+T<<0;_+=String.fromCharCode(M+=M>9?M<36?55:61:48)}return _}show(s){s||(s=this.getFirstTileInView()),this._setCanvasHeight();const d=this._calculateTopBottomRow(s);this.render(d.top,d.bottom,!0),this.view_port.scrollTop=d.scroll_top}_addRow(s){const d=this.config.image_label,_=s*this.num_per_row,S=_+this.num_per_row,T=s*this.tile_height+this.tbm;let F=0;const M=`${this.t_width}px`,P=`${this.t_height}px`,H=getProjectURL(this.config.base_url),J=this.config.image_type,K=this.config.image_title||"Gene",z=this.data_view.dataStore.columnIndex[K]!==void 0;for(let oe=_;oe<S;oe++){const se=this.data_view.getId(oe);if(se==null)return;const ae=this.data_view.getItemField(oe,this.config.image_key),ge=z?`${K} '${this.data_view.getItemField(oe,K)}'`:ae,pe=ae==="missing",he=F*this.tile_width+this.lrm;F++;let ve="";if(this.color_by){const Re=this.color_by(se);ve=`4px solid ${Re}`,this.color_overlay&&createEl("div",{styles:{height:P,width:M,left:`${he}px`,top:`${T}px`,zIndex:1,pointerEvents:"none",backgroundColor:Re,opacity:this.color_overlay},classes:["mlv-tile",`mlv-tile-overlay-${this.domId}`,`mlv-tile-${this.domId}-${s}`]},this.canvas)}const be=[];this.selected_tiles[se]&&(ve="4px solid goldenrod"),pe&&be.push("mlv-tile-missing"),createEl("img",{src:`${H}${ae}.${J}`,id:`mlvtile-${this.domId}-${oe}`,styles:{border:ve,height:P,width:M,left:`${he}px`,top:`${T}px`},alt:ge,title:ge,crossorigin:"",classes:["mlv-tile",`mlv-tile-${this.domId}`,`mlv-tile-${this.domId}-${s}`].concat(be)},this.canvas),d&&createEl("div",{text:this.data_view.getItemField(oe,d),classes:["mdv-image-label"],styles:{width:M,fontSize:`${this.label_size}px`,top:`${T-this.label_size}px`,left:`${he}px`}},this.canvas)}}}class ImageTableChart extends BaseChart{constructor(s,d,_){super(s,d,_),this.dataModel=new DataModel(s,{autoupdate:!1}),this.dataModel.setColumns(this.config.param),this.dataModel.updateModel();const S=this.config;S.margins=S.margins||{top_bottom:10,left_right:10};let T=this.dataStore.images;T&&(T=T[S.image_set]),this.grid=new ImageTable(this.contentDiv,this.dataModel,{base_url:T?T.base_url:S.images.base_url,image_type:T?T.type:S.images.type,image_key:S.param[0],initial_image_width:S.image_width,image_label:S.image_label,margins:S.margins}),this.grid.addListener("image_clicked",(F,M)=>{this.dataStore.dataHighlighted([M],this)},S.id),S.sortBy&&this.sortBy(S.sortBy,S.sortOrder),S.color_by&&this.colorByColumn(S.color_by),S.pixelated&&this.setPixelated(S.pixelated)}setSize(s,d){super.setSize(s,d),this.grid.resize()}onDataFiltered(){this.dataModel.updateModel(),this.grid.show()}getColorOptions(){return{colorby:"all",color_overlay:0}}onDataHighlighted(s){if(s.source===this)return;const d=s.indexes[0];this.grid.scrollToTile(d,!0)}setImageLabel(s){this.config.image_label=s,this.grid.setImageLabel(s)}colorByColumn(s){this.grid.setColorBy(this.getColorFunction(s,!1),this.config.color_overlay);const d=this.grid.getFirstTileInView();this.grid.show(d)}colorByDefault(){this.grid.setColorBy(null);const s=this.grid.getFirstTileInView();this.grid.show(s)}sortBy(s,d=!0){this.config.sortBy=s,this.config.sortOrder=d,this.dataModel.sort(s,d?"asc":"desc");const _=this.grid.getFirstTileInView();this.grid.show(_)}setPixelated(s){this.config.pixelated=s,this.grid.setPixelated(s)}setImageTitle(s){this.config.image_title=s,this.grid.setImageTitle(s)}getSettings(){const s=this.grid.originalDimensions,d=this.config,_=super.getSettings(),S=this.dataStore.getColumnList("all",!0);return _.concat([{type:"slider",max:Math.max(128,s[1]*4),min:10,doc:this.__doc__,label:"Image Size",current_value:d.image_width||s[0],func:T=>{d.image_width=T,this.grid.setImageWidth(T,!0)}},{label:"Pixelated?",type:"check",current_value:d.pixelated||!1,func:T=>{this.setPixelated(T)}},{label:"Label",type:"dropdown",values:[S,"name","field"],current_value:d.image_label||"__none__",func:T=>{this.setImageLabel(T==="__none__"?null:T)}},{label:"Tooltip",type:"dropdown",values:[S,"name","field"],current_value:d.image_title||"__none__",func:T=>{this.setImageTitle(T==="__none__"?void 0:T)}},{label:"Sort By",type:"dropdown",values:[S,"name","field"],current_value:d.sortBy||"__none__",func:T=>{this.sortBy(T==="__none__"?null:T)}},{label:"Sort Ascending?",type:"check",current_value:d.sortOrder||!0,func:T=>{this.sortBy(d.sortBy,T)}}])}changeBaseDocument(s){super.changeBaseDocument(s),this.grid.__doc__=s}}BaseChart.types.image_table_chart={class:ImageTableChart,name:"Image Table",required:["images"],methodsUsingColumns:["setImageLabel","sortBy","setImageTitle"],configEntriesUsingColumns:["image_label","sortBy","image_title"],init:(f,s,d)=>{const _=s.images[d.image_set];f.param=[_.key_column],f.images={image_set:d.image_set},f.sortBy=d.sort_by==="__none__"?null:d.sort_by,f.image_title=d.image_title==="__none__"?null:d.image_title},extra_controls:f=>{const s=[];for(const _ in f.images)s.push({name:_,value:_});const d=f.getColumnList().map(_=>({name:_.name,value:_.field}));return d.unshift({name:"None",value:"__none__"}),[{type:"dropdown",name:"image_set",label:"Image Set",values:s},{type:"dropdown",name:"image_title",label:"Tooltip",values:d},{type:"dropdown",name:"sort_by",label:"Sort By",values:d}]}};class CellRadialChart extends SVGChart{constructor(s,d,_){super(s,d,_,{});const S=this.config;if(S.label_size=S.label_size||12,this.stratify=d3Stratify().id(T=>T[0]).parentId(T=>T[1]),this.linkThicknessScale=linear$1(),S.scales={},!S.link_thickness){S.link_thickness={type:"constant",width:3};const T=this.dataStore.getColumnQuantile(S.param[4],.01);this._changeLinkThicknessScale(T,[1,10])}S.state_legend=S.state_legend||{show:!0,position:[10,20]},S.outer_cell_color=S.outer_cell_color||"state",this.extra_legends=["state_legend"],S.node_size=S.node_size||{inner:5,outer:5},S.center_cells=S.center_cells||this.dataStore.getColumnValues(S.param[1]).slice(0,2),S.states=S.states||this.dataStore.getColumnValues(S.param[0]).slice(0,2),S.label_size=S.label_size||13,this.makeHierarchy(),this.drawTree(),this.setStateLegend()}onDataFiltered(){this.makeHierarchy(),this.drawTree(),this.setStateLegend()}getConfig(){const s=super.getConfig(),d=this.state_legend;return d&&(s.state_legend.position=[d.offsetLeft,d.offsetTop]),s}setStateLegend(){const s=this.config,d=this.config.state_legend;if(this.state_legend&&this.state_legend.remove(),!d.show)return;const _=this.dataStore.columnIndex[s.param[0]];let S=_.values,T=this.dataStore.getColumnColors(s.param[0]);s.states&&(T=T.filter((F,M)=>s.states.indexOf(S[M])!==-1),S=S.filter(F=>s.states.indexOf(F)!==-1)),this.state_legend=getColorLegend(T,S,{label:_.name}),this.contentDiv.append(this.state_legend),this.state_legend.style.top=`${d.position[1]}px`,this.state_legend.style.left=`${d.position[0]}px`}_changeNodeSize(){const s=this.config;this.nodes.attr("r",d=>{if(d.depth===1)return s.node_size.inner;if(d.depth===3)return s.node_size.outer})}_changeLinkThicknessScale(s,d,_){const S=this.config,T=this.dataStore.getRawColumn(S.param[4]);d&&(S.link_thickness.range=d),s&&(S.link_thickness.domain=s),this.linkThicknessScale.domain(S.link_thickness.domain).range(S.link_thickness.range).clamp(!0);const F=S.link_thickness.type==="constant",M=`${S.link_thickness.width}px`;_&&this.links.attr("stroke-width",P=>P.depth===3?F?M:this.linkThicknessScale(T[P.id]):M)}setLinkThicknessColumn(s){this.config.param[4]=s;const d=this.dataStore.getColumnQuantile(s,.01);this._changeLinkThicknessScale(d,null,!0)}getSettings(){const s=super.getSettings(),d=this.config,_=this.dataStore.getColumnValues(d.param[1]),S=this.dataStore.getColumnValues(d.param[0]),T=this.dataStore.getColumnList("number"),F=this.dataStore.getColumnQuantile(d.param[4],.01);return s.concat([{type:"slider",max:20,min:5,doc:this.__doc__,current_value:d.label_size,label:"Label Size",func:P=>{d.label_size=P,this.graph_area.selectAll("text").attr("font-size",P)}},{type:"multidropdown",current_value:d.center_cells,values:[_.map(P=>[P]),0,0],label:"Central Cells",func:P=>{d.center_cells=P,this.makeHierarchy(),this.drawTree()}},{type:"multidropdown",current_value:d.states,values:[S.map(P=>[P]),0,0],label:"Cell states",func:P=>{d.states=P,this.makeHierarchy(),this.drawTree(),this.setStateLegend()}},{type:"slider",label:"Inner Node Size",max:20,min:1,doc:this.__doc__,current_value:d.node_size.inner,func:P=>{d.node_size.inner=P,this.drawTree()}},{type:"check",label:"Show Inner Links",current_value:d.central_links,func:P=>{d.central_links=P,this.drawTree()}},{type:"slider",label:"Outer Node Size",max:20,min:1,doc:this.__doc__,current_value:d.node_size.outer,func:P=>{d.node_size.outer=P,this.drawTree()}},{type:"radiobuttons",label:"Outer Node Color",current_value:d.outer_cell_color,choices:[["state","state"],["Cell color","cell_color"]],func:P=>{d.outer_cell_color=P,this.drawTree()}},{type:"radiobuttons",label:"Link Thickness Type",current_value:d.link_thickness.type,choices:[["constant","constant"],["based on column","column"]],func:P=>{d.link_thickness.type=P,this._changeLinkThicknessScale(null,null,!0)}},{type:"slider",label:"Link Thickness",max:10,min:1,doc:this.__doc__,current_value:this.config.link_thickness.width,func:P=>{d.link_thickness.width=P,this._changeLinkThicknessScale(null,null,!0)}},{label:"Link Thickness Column",type:"dropdown",values:[T,"name","field"],current_value:d.param[4],func:(P,H)=>{const J=H["Link Thickness Domain"].noUiSlider,K=this.dataStore.getColumnQuantile(P,.01);J.updateOptions({range:{max:K[1],min:K[0]}}),J.set(K),this.setLinkThicknessColumn(P)}},{type:"doubleslider",max:20,min:1,doc:this.__doc__,current_value:this.config.link_thickness.range,label:"Link Thickness Range",func:(P,H)=>{this._changeLinkThicknessScale(null,[P,H],!0)}},{type:"doubleslider",max:F[1],min:F[0],doc:this.__doc__,current_value:this.config.link_thickness.domain,label:"Link Thickness Domain",func:(P,H)=>{this._changeLinkThicknessScale([P,H],null,!0)}}])}drawTree(){const s=this._getContentDimensions(),d=this.config,_=this.dataStore.getRawColumn(this.config.param[4]),T=Math.min(s.width,s.height)/2.8;this.graph_area.attr("transform",`translate(${s.left+s.width/2},${s.top+s.height/2})`);const F=this.dataStore.getColumnColors(d.param[0]),M=this.dataStore.getColumnColors(d.param[1]),P=this.dataStore.getColumnColors(d.param[2]),H=this.dataStore.getRawColumn(d.param[0]),K=d3Tree().size([360,T]).separation((ye,Ue)=>(ye.parent===Ue.parent?1:2)/ye.depth)(this.root);this.graph_area.selectAll(".link").remove(),this.graph_area.selectAll(".node").remove(),this.graph_area.selectAll(".wedge").remove(),this.graph_area.selectAll(".ring").remove();const z={},oe=K.descendants().slice(1),se=T/10;oe.forEach(ye=>{ye.depth===1&&(ye.y+=se)});const ae={};for(const ye of oe){if(ye.depth!==3)continue;const Ue=ye.data[1];ae[Ue]?(ae[Ue][0]=Math.min(ae[Ue][0],ye.x),ae[Ue][1]=Math.max(ae[Ue][1],ye.x)):ae[Ue]=[ye.x,ye.x,ye.data[3]]}const ge=[];for(const ye in ae){const Ue=ae[ye],It=ye.split("|");ge.push({startAngle:(Ue[0]-2)*Math.PI/180,endAngle:(Ue[1]+2)*Math.PI/180,cell:It[0],state:It[1],sid:Ue[2]})}const pe=arc().innerRadius(T*(2/3)).outerRadius(T+5);this.graph_area.selectAll(".wedge").data(ge).enter().append("path").attr("class","wedge").attr("d",pe).attr("opacity",.8).attr("fill",ye=>F[ye.sid]).attr("stroke","gray").attr("stroke-width",1);const he=arc().startAngle(0).endAngle(2*Math.PI),ve=[{outerRadius:T+5,innerRadius:T-5,color:"blue"},{outerRadius:T*1/3+se+5,innerRadius:T*1/3+se-5,color:"green"}];this.graph_area.selectAll(".ring").data(ve).enter().append("path").attr("class","ring").attr("d",he).attr("opacity",.4).attr("fill",ye=>ye.color).attr("stroke","gray").attr("stroke-width",1);const be=d.link_thickness.type==="constant";this.links=this.graph_area.selectAll(".link").data(oe).enter().filter(ye=>d.central_links?!0:ye.depth>1).append("path").attr("class","link").attr("fill","none").attr("stroke","currentColor").attr("stroke-width",ye=>ye.depth===3?be?d.link_thickness.type:this.linkThicknessScale(_[ye.id]):d.link_thickness.type).attr("d",ye=>(z[ye.depth]=ye.y,ye.depth>1?"M"+project(ye.x,ye.y)+"C"+project(ye.x,(ye.y+ye.parent.y)/2)+" "+project(ye.parent.x,(ye.y+ye.parent.y)/2)+" "+project(ye.parent.x,ye.parent.y):`M${project(ye.x,ye.y)}L${project(ye.parent.x,ye.parent.y)}`));const Re=this.graph_area.selectAll(".node").data(oe).enter().append("g").attr("class",ye=>`node${ye.children?" node--internal":" node--leaf"}`).attr("transform",ye=>`translate(${project(ye.x,ye.y)})`).on("click",ye=>{this.nodeClicked(ye)});this.nodes=Re.filter(ye=>ye.depth!==2).append("circle").style("pointer-events","visible").attr("fill",ye=>ye.depth===1?M[ye.data[3]]:d.outer_cell_color==="state"?F[H[ye.data[0]]]:P[ye.data[4]]).attr("stroke","black").attr("stroke-width",1).attr("r",ye=>{if(ye.depth===1)return d.node_size.inner;if(ye.depth===3)return d.node_size.outer});const Fe=`${this.config.label_size}px`;Re.append("text").attr("dy",".31em").attr("font-size",Fe).style("fill","currentColor").attr("font-family","Helvetica").attr("x",ye=>{const Ue=ye.depth===1?d.node_size.inner+1:d.node_size.outer+1;return ye.x<180==!ye.children?Ue:-Ue}).attr("alignment-baseline",ye=>ye.depth===1&&d.central_links?"hanging":"baseline").style("text-anchor",ye=>ye.children?ye.x>180?"start":"end":ye.x<180?"start":"end").attr("transform",ye=>ye.depth===1&&!d.central_links?"rotate(0)":`rotate(${ye.x<180?ye.x-90:ye.x+90})`).text(ye=>ye.depth===2?"":ye.data[2])}setSize(s,d){super.setSize(s,d),this.drawTree()}makeHierarchy(){const s=this.config,d=s.param,_=this.dataStore.columnIndex[d[1]],S=this.dataStore.columnIndex[d[2]],T=this.dataStore.columnIndex[d[0]];let F=s.center_cells.map(z=>[z,"root",z,_.values.indexOf(z)]);F.unshift(["root",null]);const M=new Set;for(const z of s.states)for(const oe of s.center_cells){const se=`${z}|${oe}`;F.push([se,oe,z]),M.add(se)}const P=s.center_cells.length+1,H=P+M.size,J=new Set,K=this.dataStore.filterArray;for(let z=0;z<this.dataStore.size;z++){if(K[z]>0)continue;const oe=_.values[_.data[z]],se=S.values[S.data[z]],ge=`${T.values[T.data[z]]}|${oe}`;let pe=!1;if(s.exclude_interactions){for(const he of s.exclude_interactions)if(he.indexOf(oe)!==-1&&he.indexOf(se)!==-1){pe=!0;break}}pe||M.has(ge)&&(J.add(ge),F.push([z,ge,se,T.data[z],S.data[z]]))}F=F.filter((z,oe)=>oe<P||oe>=H?!0:J.has(z[0])),this.root=this.stratify(F)}}function project(f,s){const d=(f-90)/180*Math.PI,_=s;return[_*Math.cos(d),_*Math.sin(d)]}BaseChart.types.cell_radial_chart={name:"Radial Connectivty Map",required:["interactions"],methodsUsingColumns:["setLinkThicknessColumn"],init:(f,s,d)=>{const _=s.interactions,S=s.interactions.cell_radial_chart;f.param=[_.pivot_column,_.interaction_columns[0],_.interaction_columns[1],_.pivot_column,S.link_thickness],Object.assign(f,S.default_parameters)},class:CellRadialChart};class ImagePanZoom{constructor(s,d,_={}){this.container=s,this.img=new Image,this.img.style.position="absolute",this.img.onload=S=>{this.orig_dim=[this.img.naturalWidth,this.img.naturalHeight,this.img.naturalWidth/this.img.naturalHeight],this.container.append(this.img),this.fit()},makeDraggable(this.img),this.container.style.overflow="hidden",this.container.addEventListener("wheel",S=>{S.preventDefault(),this.zoom(Math.sign(S.deltaY)>0?-1:1,S)}),this.setImage(d)}setImage(s){this.img.src=s}fit(){const s=this.container.getBoundingClientRect();this.img.height=s.height,this.img.width=this.img.height*this.orig_dim[2],this.img.width>s.width?(this.img.width=s.width,this.img.height=this.img.width/this.orig_dim[2],this.img.style.top=`${(s.height-this.img.height)/2}px`,this.img.style.left="0px"):(this.img.style.top="0px",this.img.style.left=`${(s.width-this.img.width)/2}px`)}zoom(s,d){s=s>0?1.1:.9;const _=this.container.getBoundingClientRect(),S=this.img.getBoundingClientRect(),T=(d.clientX-_.left-this.img.offsetLeft)*(s-1),F=(d.clientY-_.top-this.img.offsetTop)*(s-1);this.img.width=S.width*s,this.img.height=S.height*s,this.img.style.left=`${this.img.offsetLeft-T}px`,this.img.style.top=`${this.img.offsetTop-F}px`}}class RowSummaryBox extends BaseChart{constructor(s,d,_){if(super(s,d,_),_.image){const T=createEl("div",{classes:["mdv-image-holder"],style:{height:`${Number.parseInt(this.width*.7)}px`}},this.contentDiv);this.imViewer=new ImagePanZoom(T,this._getImage(0))}this.paramHolders={};const S=createEl("div",{},this.contentDiv);for(const T of this.config.param){if(T===this.img_param)continue;const F=this.dataStore.columnIndex[T],M=createEl("div",{classes:["mdv-section"]},S);M.__mcol__=F.field,createEl("div",{text:F.name,classes:["mdv-section-header"]},M);let P=createEl("div",{classes:["mdv-section-value"]},M);F.is_url&&(P=createEl("a",{target:"_blank"},P)),this.paramHolders[F.field]=P}makeSortable(S,{handle:"mdv-section-header",sortEnded:T=>{const F=this.config;let M=[];F.image&&(M=[F.param[F.image.param]],F.image.param=0),F.param=M.concat(T.map(P=>P.__mcol__))}}),this.setParam(0),this.contentDiv.style.overflowY="auto"}setParam(s){for(const d in this.paramHolders){const _=this.dataStore.getRowText(s,d);this.paramHolders[d].textContent=_,this.paramHolders[d].nodeName==="A"&&(this.paramHolders[d].href=_)}}_getImage(s){const d=this.config,_=d.param[d.image.param];this.img_param=_;const S=this.dataStore.getRowText(s,_);return getProjectURL(`${d.image.base_url}${S}.${d.image.type}`)}setSize(s,d){super.setSize(s,d),this.imViewer&&(this.imViewer.container.style.height=`${Math.round(this.width*.7)}px`,this.imViewer.fit())}onDataHighlighted(s){const d=s.indexes[0];this.imViewer&&this.imViewer.setImage(this._getImage(d)),this.setParam(d)}onDataFiltered(){}changeBaseDocument(s){super.changeBaseDocument(s),this.imViewer.img.__doc__=s}getSettings(){return super.getSettings()}}BaseChart.types.row_summary_box={class:RowSummaryBox,name:"Row Summary Box",init:(f,s,d)=>{const _=d.image_set;if(_&&_!=="__none__"){const S=s.large_images[_];f.param=f.param||[],f.param.push(S.key_column),f.image={base_url:getProjectURL(S.base_url),type:S.type,param:f.param.length-1}}},extra_controls:f=>{const s=f.large_images;if(s){let d=[];for(const _ in s)d.push({name:_,value:_});return d=[{name:"none",value:"__none__"}].concat(d),[{type:"dropdown",name:"image_set",label:"Image Set",values:d}]}return[]},params:[{type:"_multi_column:all",name:"Values To Display"}]};class ImageArray{constructor(s,d,_,S){Bt(this,"textures");Bt(this,"texturesByIndex");Bt(this,"texture");Bt(this,"gl");Bt(this,"logEl");Bt(this,"dataView");Bt(this,"lumaTexture");Bt(this,"onProgress");this.textures=new Map,this.texturesByIndex=new Map,this.dataView=_;const T=d.getContext("webgl2");this.gl=T,this.texture=T.createTexture(),this.logEl=createEl("div",{},d.parentElement),this.logEl.style.color="white",this.loadImageColumn(s,T,S)}wrapLumaTexture(s){this.lumaTexture||(console.warn("wrapping ImageArray texture as luma texture - todo: refactor in future"),this.lumaTexture=s.createTexture({dimension:"2d-array"}),this.lumaTexture.handle=this.texture)}getImageAspect(s){return this.texturesByIndex.get(s).aspectRatio}getImageIndex(s){return this.texturesByIndex.get(s).zIndex}drawProgress(s=0){var d;(d=this.onProgress)==null||d.call(this,s)}loadImageColumn(s,d,_){var he;const{image_type:S,image_key:T,width:F,height:M}=_,P=getProjectURL(_.base_url),H=s.columnIndex[T],J=this.texture;d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D_ARRAY,J);const K=Math.floor(Math.log2(F));d.texParameteri(d.TEXTURE_2D_ARRAY,d.TEXTURE_MIN_FILTER,d.LINEAR_MIPMAP_LINEAR),d.texParameteri(d.TEXTURE_2D_ARRAY,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D_ARRAY,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D_ARRAY,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);const z=H.datatype==="unique",oe=z?H.data.length/H.stringLength:((he=H.values)==null?void 0:he.length)||H.data.length;d.texStorage3D(d.TEXTURE_2D_ARRAY,K,d.RGBA8,F,M,oe);const se=F*M*4*oe/1024/1024;console.log(`Allocated ${se.toFixed(2)}MB for image array (not accounting for mipmaps)`);let ae=0;function ge(){if(!z)return H.values===void 0?H.data:[...H.data].map(Re=>H.values[Re]);const ve=new TextDecoder,be=new Array(oe);for(let Re=0;Re<oe;Re++){const Fe=Re*H.stringLength,ye=Fe+H.stringLength;be[Re]=ve.decode(H.data.slice(Fe,ye))}return be}ge().forEach((ve,be)=>{const Re=ve;if(this.textures.has(Re)){this.texturesByIndex.set(be,this.textures.get(Re)),ae++;return}const Fe=`${P}/${Re}.${S}`,ye=be,Ue=new Image,It={zIndex:ye,aspectRatio:1,url:Fe};this.textures.set(Re,It),this.texturesByIndex.set(be,It),Ue.src=Fe,Ue.crossOrigin="anonymous",Ue.onload=()=>{if(_.cancel)return;d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D_ARRAY,J),It.aspectRatio=Ue.width/Ue.height;const St=resizeImage(Ue,F,M);d.texSubImage3D(d.TEXTURE_2D_ARRAY,0,0,0,ye,F,M,1,d.RGBA,d.UNSIGNED_BYTE,St);const At=d.getError();At!==d.NO_ERROR&&console.error(`glError ${At} loading image #${ye} '${Fe}'`),d.generateMipmap(d.TEXTURE_2D_ARRAY),this.drawProgress(ae++/oe)},Ue.onerror=()=>{console.error(`Error loading image #${ye} '${Fe}'`)}})}}function resizeImage(f,s,d,_){const S=document.createElement("canvas");return S.width=s,S.height=d,S.getContext("2d").drawImage(f,0,0,s,d),S}class ImageArrayDeckExtension extends LayerExtension{static get componentName(){return"ImageArrayExtension"}getShaders(){return{inject:{"vs:#decl":`
        //---- ImageArrayExtension
        in float imageIndex;
        in float imageAspect;
        out float vImageIndex;
        out float vImageAspect;
        ////
        `,"vs:#main-start":`
        //---- ImageArrayExtension
        vImageIndex = imageIndex;
        vImageAspect = imageAspect;
        ////
        
        `,"vs:#main-end":`
        //---- ImageArrayExtension
        outerRadiusPixels = 1e-3;//HACKACK to make everything 'inCircle' for now
        // - but it breaks opacity, and generally we can do better...
        // it would be good to have border lines back, too
        ////
        
        `,"fs:#decl":`
        //---- ImageArrayExtension
        uniform mediump sampler2DArray imageArray;
        in float vImageIndex;
        in float vImageAspect;
        uniform float opacity;
        uniform float saturation;

        vec3 rgb2hsv(vec3 c){
            vec4 K = vec4(0., -1./3., 2./3., -1.);
            vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
            vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));
            float d = q.x - min(q.w, q.y);
            float e = 1.0e-10;
            return vec3(abs(q.z + (q.w - q.y) / (6. * d + e)), d / (q.x + e), q.x);
        }
        vec3 hsv2rgb(vec3 c){
            vec4 K = vec4(1., 2./3., 1./3., 3.);
            vec3 p = abs(fract(c.xxx + K.xyz) * 6. - K.www);
            return c.z * mix(K.xxx, clamp(p - K.xxx, 0., 1.), c.y);
        }
        
        `,"fs:DECKGL_FILTER_COLOR":`
        //---- ImageArrayExtension
        vec2 uv = 0.5 * (geometry.uv + 1.0);
        uv.y = 1. - uv.y; // flip y
        // todo fix aspect ratio in vertex shader
        uv.x /= min(1., vImageAspect);
        uv.y *= max(1., vImageAspect);
        if (uv.y > 1. || uv.x > 1.) discard;
        vec3 uvw = vec3(uv, vImageIndex);
        vec4 t = texture(imageArray, uvw);
        vec3 c = rgb2hsv(t.rgb);
        c.y *= saturation;
        t.rgb = hsv2rgb(c);
        color *= t;
        ///--- opacity may well not be correct gamma etc
        color.a = t.a * opacity; //HACK so broken inCircle doesn't break opacity
        // color.r = vImageAspect - 0.5;
        // vec3 s = vec3(textureSize(imageArray, 0));
        // uvw.z /= s.z;
        // color.rgb = uvw;
        // color.r = vImageIndex / s.z;
        ////

        `}}}initializeState(s,d){var _;(_=this.getAttributeManager())==null||_.addInstanced({imageIndex:{size:1,accessor:"getImageIndex",defaultValue:0},imageAspect:{size:1,accessor:"getImageAspect",defaultValue:1}}),this.props.saturation}updateState(s){const{saturation:d}=s.props;for(const _ of this.getModels()){const S=_.device;if(S.type!=="webgl")throw new Error("non-webgl device not implemented");s.props.imageArray.wrapLumaTexture(S);const{lumaTexture:T}=s.props.imageArray;_.setUniforms({saturation:d}),_.setBindings({imageArray:T})}}}let nextID=0;class ImageScatterChart extends BaseChart{constructor(d,_,S){super(d,_,S);Bt(this,"canvas");Bt(this,"imageArray");Bt(this,"deck");Bt(this,"dataModel");Bt(this,"progress",0);Bt(this,"billboard",!0);Bt(this,"size",13);Bt(this,"opacity",255);Bt(this,"saturation",1);Bt(this,"spaceX",600);Bt(this,"spaceY",392);Bt(this,"colorBy");Bt(this,"id");this.id=nextID++;const T=this.canvas=createEl("canvas",{},this.contentDiv),{base_url:F,image_key:M,texture_size:P}=S.images;this.dataModel=new DataModel(d,{autoupdate:!1}),this.dataModel.setColumns([...S.param,M,S.image_title]),this.dataModel.updateModel();const H=Number.parseInt(P);this.imageArray=new ImageArray(d,T,this.dataModel,{base_url:F,image_type:S.images.type,image_key:M,width:H,height:H}),this.imageArray.onProgress=z=>{this.progress=z,this.updateDeck()};const J=this.updateDeck(),K=new OrthographicView({});this.deck=new Deck({canvas:T,layers:J,views:K,controller:!0,initialViewState:{target:[0,0,0],zoom:0},getTooltip:z=>{try{const{index:oe,picked:se}=z,{param:ae}=this.config,{columnIndex:ge}=this.dataStore,pe=ge[ae[0]],he=ge[ae[1]],ve=this.config.image_title,be=this.dataModel.getItemField(oe,ve);return se&&{html:`
                    <div>${ve}: '${be}'</div>
                    <div>x: '${ae[0]}' = '${pe.data[oe]}'</div>
                    <div>y: '${ae[1]}' = '${he.data[oe]}'</div>
                    `}}catch(oe){return console.error(oe),`error: ${oe}`}}})}updateDeck(){const{param:d}=this.config,{columnIndex:_}=this.dataStore,S=_[d[0]],T=_[d[1]];function F(K,z,oe){const{minMax:se}=K;return oe*(K.data[z]-se[0])/(se[1]-se[0])-oe/2}const{data:M}=this.dataModel,{imageArray:P,billboard:H}=this,J=new ScatterplotLayer({id:`scatter-${this.id}`,data:M,billboard:H,pickable:!0,getImageIndex:K=>P.getImageIndex(K),getImageAspect:K=>P.getImageAspect(K),getPosition:(K,{target:z})=>(z[0]=F(S,K,this.spaceX),z[1]=F(T,K,this.spaceY),z[2]=0,z),getRadius:1,radiusScale:this.size,opacity:this.opacity/255,saturation:this.saturation,getFillColor:this.colorBy?K=>this.colorBy(K):[255,255,255],imageArray:P,updateTriggers:{getImageAspect:this.progress,getPosition:[this.spaceX,this.spaceY],getFillColor:[this.colorBy,this.opacity]},extensions:[new ImageArrayDeckExtension]});return this.deck&&this.deck.setProps({layers:[J]}),[J]}onDataFiltered(d){this.dataModel.updateModel(),this.updateDeck()}colorByColumn(d){this.colorBy=this.getColorFunction(d,!0),this.updateDeck()}colorByDefault(){this.colorBy=null,this.updateDeck()}getColorOptions(){return{colorby:"all"}}getSettings(){return[...super.getSettings(),{name:"billboard",label:"Billboard",type:"check",current_value:this.billboard,func:d=>{this.billboard=d,this.updateDeck()}},{type:"slider",name:"size",label:"Size",current_value:this.size,min:1,max:20,step:1,continuous:!0,func:d=>{this.size=d,this.updateDeck()}},{type:"slider",name:"opacity",label:"Opacity",current_value:this.opacity,min:0,max:255,step:1,continuous:!0,func:d=>{this.opacity=d,this.updateDeck()}},{type:"slider",name:"spaceX",label:"spaceX",current_value:this.spaceX,min:1,max:800,step:1,continuous:!0,func:d=>{this.spaceX=d,this.updateDeck()}},{type:"slider",name:"spaceY",label:"spaceY",current_value:this.spaceY,min:1,max:800,step:1,continuous:!0,func:d=>{this.spaceY=d,this.updateDeck()}},{type:"slider",name:"saturation",label:"saturation",current_value:this.saturation,min:0,max:1,continuous:!0,func:d=>{this.saturation=d,this.updateDeck()}}]}}BaseChart.types.ImageScatterChart={class:ImageScatterChart,name:"Image Scatter Plot",required:["images"],configEntriesUsingColumns:["image_key","image_title"],init:(f,s,d)=>{const _=s.images[d.image_set];console.log("ImageScatterChart param",f.param),f.images={base_url:_.base_url,type:_.type,image_key:_.key_column,texture_size:d.texture_size},f.image_key=_.key_column},extra_controls:f=>{const s=[];for(const S in f.images)s.push({name:S,value:S});console.log("imageSets",s);const d=f.getLoadedColumns().map(S=>({name:S,value:S})),_=[32,64,128,256,512,1024].map(S=>`${S}`).map(S=>({name:S,value:S}));return[{type:"dropdown",name:"image_set",label:"Image Set",values:s},{type:"dropdown",name:"image_title",label:"Tooltip",values:d},{type:"dropdown",name:"texture_size",label:"Texture Size",values:_,defaultVal:"256"}]},params:[{type:"number",name:"X axis"},{type:"number",name:"Y axis"}]};function getYLabel(f){return f.denominators?`${f.category} per ${f.denom_unit}`:`% abundance ${f.category}`}class CustomBoxPlot extends SVGChart{constructor(s,d,_){_.category||(_.category=s.getColumnValues(_.param[2])[0]),_.axis||(_.axis={y:{label:getYLabel(_)},x:{size:60,rotate_labels:!0}}),_.title=_.title||_.category,super(s,d,_,{x:{type:"band"},y:{}});const S=this.config.param,T=this.dataStore.getColumnValues(S[0]);this.x_scale.domain(T.slice(0)),this.addToolTip(),this.dim=this.dataStore.getDimension("category_dimension"),this.addDenominators(),this.onDataFiltered()}onDataFiltered(){const s=this.config.param;let d=null;s.length===3&&(d=this.dataStore.getColumnValues(this.config.param[2]).indexOf(this.config.category)),this.dim.getSankeyData(_=>{this.data=_,this.drawChart()},s,{method:"proportion",category:d,denominators:this.denom})}remove(s=!0){this.dim.destroy(s),super.remove()}setSize(s,d){super.setSize(s,d),this.drawChart()}addDenominators(){const s=this.config.denominators;if(this.denom=null,s){this.denom=[];const d=this.dataStore.getColumnValues(this.config.param[1]);for(let _=0;_<d.length;_++)this.denom.push(s[d[_]]||100)}}getSettings(){const s=this.config,_=[{values:[this.dataStore.getColumnValues(s.param[2]).map(S=>({t:S})),"t","t"],current_value:s.category,label:"Category",type:"dropdown",func:S=>{s.category=S,s.axis.y.label=getYLabel(s),this.setTitle(S),this.onDataFiltered()}}];return super.getSettings().concat(_)}drawChart(){const s=select(this.contentDiv).transition().duration(200).ease(linear),d=this.config.param;this.y_scale.domain([this.data.max+this.data.max/10,0]),this.updateAxis();const _=this.dataStore.getColumnColors(d[0]),S=this.dataStore.getColumnValues(d[0]),T=this.dataStore.getColumnValues(d[1]),M=this._getContentDimensions().width/S.length,P=M/5,H=M/10,J=5,K=M/4,z=M/5;this.graph_area.selectAll(".cbp-col").data(this.data).join("g").attr("transform",(oe,se)=>`translate(${se*M},0)`).attr("class","cbp-col").selectAll(".cbp-circle").data(oe=>oe).join("circle").attr("class","cbp-circle").on("mouseover pointermove",(oe,se)=>{const ae=`${S[se[1]]}<br>${T[se[2]]}`;this.showToolTip(oe,ae)}).on("mouseleave",()=>{this.hideToolTip()}).transition(s).attr("cy",(oe,se)=>this.y_scale(oe[0])).attr("fill",(oe,se)=>_[oe[1]]).attr("r",J).attr("cx",oe=>P+H*oe[3]),this.graph_area.selectAll(".cbp-rect").data(this.data).join("path").attr("d",(oe,se)=>{const ae=se*M+M/2,ge=this.y_scale(oe.av);let pe=oe.av+oe.std;pe=this.y_scale(pe>oe.max?oe.max:pe);let he=oe.av-oe.std;return he=this.y_scale(he<oe.min?oe.min:he),`M${ae} ${pe} L${ae} ${he}
                    M${ae-K} ${ge} L${ae+K} ${ge} 
                    M${ae-z} ${pe} L${ae+z} ${pe}     
                    M${ae-z} ${he} L${ae+z} ${he}      `}).style("fill","none").style("stroke","currentColor").attr("stroke-width",1).attr("class","cbp-rect")}}BaseChart.types.custom_box_plot={name:"Abundance Box Plot",params:[{type:"text",name:"Sample Group"},{type:"text",name:"Sample"},{type:"text",name:"Categories"}],class:CustomBoxPlot};BaseChart.types.density_box_plot={name:"Density Box Plot",class:CustomBoxPlot,required:["regions"],extra_controls:f=>{const s=f.getColumnList("text").map(d=>({name:d.name,value:d.field}));return[{type:"dropdown",name:"group",label:"Group",values:s},{type:"dropdown",name:"cat",label:"Category",values:s}]},init:(f,s,d)=>{f.denominators={},f.denom_unit=`${s.regions.scale_unit}`,f.param=[d.group,s.regions.region_field,d.cat];for(const _ in s.regions.all_regions){const S=s.regions.all_regions[_],T=(S.roi.max_x-S.roi.min_x)*(S.roi.max_x-S.roi.min_x);f.denominators[_]=T*(s.regions.scale*s.regions.scale)}}};class SingleSeriesChart extends SVGChart{constructor(s,d,_){_.axis||(_.axis={x:{label:s.getColumnName(_.param[4])},y:{label:s.getColumnName(_.param[0])}}),super(s,d,_,{x:{type:"band"},y:{}}),_.title||this._setTitle();const S=this.config.param;this.config;const T=this.dataStore.getColumnValues(S[0]);this.x_scale.domain(T.slice(0)),this.config.scale=this.config.scale||this.dataStore.getColumnQuantile(S[4],"0.001"),this.initialSetUp(),this.drawChart(),this.addToolTip()}remove(s=!0){super.remove()}onDataHighlighted(s){const d=s.indexes[0],_=this.graph_area.selectAll("rect");_.attr("stroke","white").style("stroke-width","0px"),_.filter(S=>!!(S&&S[3]===d)).attr("stroke","black").style("stroke-width","4px"),this.highlight=d}_setTitle(){const s=this.config.categories,d=this.dataStore.getColumnName(this.config.param[4]);this.setTitle(`${d} ${s[0]} x ${s[1]}`)}initialSetUp(){const s=this.config.param,d=this.dataStore.columnIndex[s[1]].data,_=this.dataStore.columnIndex[s[2]].data,S=this.dataStore.columnIndex[s[0]].data,T=this.dataStore.columnIndex[s[3]].data,M=this.dataStore.columnIndex[s[0]].values.map(ge=>({values:[],totals:0})),P=this.dataStore.columnIndex[s[4]].data,H=this.dataStore.size,J=[],K=this.dataStore.columnIndex[s[1]].values.indexOf(this.config.categories[0]),z=this.dataStore.columnIndex[s[2]].values.indexOf(this.config.categories[1]);let oe=null,se=null;for(let ge=0;ge<H;ge++)if(d[ge]===K&&_[ge]===z){if(Number.isNaN(P[ge]))continue;se=se===null?P[ge]:Math.max(P[ge],se),oe=oe==null?P[ge]:Math.min(P[ge],oe),J.push([P[ge],S[ge],T[ge],ge,Math.floor(Math.random()*6)+1]);const pe=M[S[ge]];pe.values.push(P[ge]),pe.totals+=P[ge]}for(const ge of M){ge.mean=ge.totals/ge.values.length;let pe=ge.values.length-1;pe=pe===0?1:pe,ge.std=ge.values.reduce((he,ve)=>he+(ve-ge.mean)**2,0),ge.std=Math.sqrt(ge.std/pe),ge.values=void 0}this.errorBars=M;const ae=(se-oe)/10;this.config.scale=[oe-ae,se+ae],this.data=J}getSettings(){const s=this.config,d=this.dataStore.getColumnQuantile(s.param[4],"0.001"),_=[{type:"doubleslider",max:d[1],min:d[0],doc:this.__doc__,current_value:s.scale,label:"Scale",func:(S,T)=>{s.scale=[S,T],this.drawChart()}},{label:this.dataStore.getColumnName(s.param[1]),type:"dropdown",values:[this.dataStore.getColumnValues(s.param[1],"name_value"),"name","value"],current_value:s.categories[0],func:S=>{s.categories[0]=S,this.initialSetUp(),this.drawChart()}},{label:this.dataStore.getColumnName(s.param[2]),type:"dropdown",values:[this.dataStore.getColumnValues(s.param[2],"name_value"),"name","value"],current_value:s.categories[1],func:S=>{s.categories[1]=S,this.initialSetUp(),this.drawChart()}}];return super.getSettings().concat(_)}drawChart(s=300){const d=this.config.param;this.y_scale.domain([this.config.scale[1],this.config.scale[0]]).clamp(!0),this.updateAxis();const _=select(this.contentDiv).transition().duration(s).ease(linear),S=this.dataStore.getColumnValues(d[0]),T=this.dataStore.getColumnValues(d[3]),M=this._getContentDimensions().width/S.length,P=this.dataStore.getColumnColors(d[0]),H=M/4,J=M/5;this.graph_area.selectAll("circle").data(this.data).join("circle").on("mouseover mousemove",(K,z)=>{const oe=S[z[1]],se=T[z[2]];this.showToolTip(K,`${oe}<br>${se}<br>${z[0]}`)}).on("mouseleave",()=>{this.hideToolTip()}).on("click",(K,z)=>{this.dataStore.dataHighlighted([z[3]],this)}).transition(_).attr("cx",K=>M/8+M*(K[4]/8)+K[1]*M).attr("cy",K=>this.y_scale(K[0])).attr("r",5).attr("fill",K=>P[K[1]]),this.graph_area.selectAll(".cbp-rect").data(this.errorBars).join("path").attr("d",(K,z)=>{const oe=z*M+M/2,se=this.y_scale(K.mean),ae=this.y_scale(K.mean+K.std),ge=this.y_scale(K.mean-K.std);return`M${oe} ${ae} L${oe} ${ge}
                        M${oe-H} ${se} L${oe+H} ${se} 
                        M${oe-J} ${ae} L${oe+J} ${ae}     
                        M${oe-J} ${ge} L${oe+J} ${ge}`}).style("fill","none").style("stroke","black").attr("stroke-width",1).attr("class","cbp-rect")}setSize(s,d){super.setSize(s,d),this.drawChart()}}BaseChart.types.single_series_chart={name:"Single Interaction Chart",required:f=>{var s;return(s=f.interactions)==null?void 0:s.is_single_region},class:SingleSeriesChart,extra_controls:f=>{const s=f.interactions,d=s.interaction_columns[0],_=s.interaction_columns[1],S=new Set([d,_,s.pivot_column]),T=f.getColumnList("text").filter(F=>!S.has(F.field));return[{type:"dropdown",name:"c1",label:f.getColumnName(d),values:f.getColumnValues(d).map(F=>({name:F,value:F}))},{type:"dropdown",name:"c2",label:f.getColumnName(_),values:f.getColumnValues(_).map(F=>({name:F,value:F}))},{type:"dropdown",name:"data",label:"Data to display",values:f.getColumnList("number").map(F=>({name:F.name,value:F.field}))},{type:"dropdown",name:"group",label:"Grouping",values:T.map(F=>({name:F.name,value:F.field}))}]},init:(f,s,d)=>{const _=s.interactions;s.interactions.cell_radial_chart,f.param=[d.group,_.interaction_columns[0],_.interaction_columns[1],_.pivot_column,d.data],f.categories=[d.c1,d.c2]}};class GenomeBrowser extends BaseChart{constructor(s,d,_){super(s,d,_);const S=this.config;S.view_margins=S.view_margins||{type:"percentage",value:20},this.contentDiv.style.width="100%",this.contentDiv.style.height="100%",S.type="genome_browser";const T=!S.tracks.find(F=>F.format==="ruler");__vitePreload(async()=>{const{default:F}=await import("../assets/panel.js_v0-Cg5IgG0c.js");return{default:F}},__vite__mapDeps([12,1]),import.meta.url).then(({default:F})=>{if(this.browser=new F(this.contentDiv,{allow_user_interactions:!0,show_scale:!0,ruler_track:T},S.tracks),this.bamscatrack=this.browser.getTrack("_atac_bam_track"),this.baseTrack=this.browser.getTrack("_base_track"),this.baseTrack.dataStore=this.dataStore,this.addMenuIcon("fa fa-eye-slash",_.legend||"Show/Hide Tracks",{func:M=>this.showHideDialog()}),this.locText=createEl("input",{styles:{fontSize:"11px"}},this.menuSpace),this.locText.addEventListener("keypress",M=>{if(M.key==="Enter"){const P=this._calculatePosition(this.locText.value);this.browser.update(P.chr,P.start,P.end)}}),this.browser.addListener(this.config.id,(M,P,H)=>this.onBrowserAction(M,P,H)),S.feature_label&&this.setLabelFunction(S.feature_label),S.color_by&&this.colorByColumn(S.color_by,!1),S.color_wig_tracks_by){const M=S.color_wig_tracks_by,P=this.dataStore.getValueToColor(M);for(const H in P){const J=this.browser.tracks[`${M}|${H}`];J&&(J.config.color=P[H])}}if(!this.bamscatrack){const M=this.config.genome_location;M?this.browser.update(M.chr,Math.round(M.start),Math.round(M.end),!0):this.onDataHighlighted({indexes:[0]})}})}onBrowserAction(s,d,_){switch(s){case"featureclick":if(d.track.config.track_id==="_base_track"){const S=d.feature.data[0];this.dataStore.dataHighlighted([Number.parseInt(S)],this)}d.track.config.track_id==="_bam"&&console.log(d.feature);break;case"range_selected":if(!_.ctrlKey)this.browser.update(d.chr,d.start,d.end);else if(this.bamscatrack){const S=this.bamscatrack.getIdsInRange(d);this.cellDim.filter("filterOnIndex",[],S),this.browser.setHighlightedRegion(d,"_filter","blue"),this.resetButton.style.display="inline",this.browser.update()}break;case"view_changed":this.locText.value=`${d.chr}:${d.start}-${d.end}`}}setupLinks(s,d,_){if(this.browser||setTimeout(()=>this.setupLinks(s,d,_),100),this.dataLink={dataStore:s,index:d,getDataFunction:_},!this.bamscatrack)return;const S=this.config.cluster_reads;s.addListener(`gb_${this.config.id}`,(T,F)=>{if(T==="filtered")this.filterReads(F);else if(T==="data_changed"){const M=this.config.cluster_reads;F.columns.indexOf(M)!==-1&&this.changeClusters(M,!0)}}),_([S],()=>{const T=s.getColumnIndex(d),F=s.getColumnColors(S),M=s.columnIndex[S];this.bamscatrack.setCategories(S,M.data,M.values,F),this.cellDim=s.getDimension("base_dimension"),this.bamscatrack.addIndex(T),this.config.color_by&&this.colorByColumn(this.config.color_by);const P=this.config.genome_location;P?this.browser.update(P.chr,P.start,P.end,!0):this.onDataHighlighted({indexes:[0]})})}changeClusters(s,d=!1){this.config.cluster_reads=s;const _=this.dataLink.dataStore;this.dataLink.getDataFunction([s],()=>{const S=_.getColumnColors(s),T=_.columnIndex[s];this.bamscatrack.setCategories(s,T.data,T.values,S,!0,d),this.browser.update()})}themeChanged(){this.browser.repaint(!0,!0)}showHideDialog(){const s=this.browser,d=s.track_order.map(_=>{const S=s.tracks[_].config;return{type:"checkbox",id:S.track_id,label:S.short_label,current_value:!S.hide}});new CustomDialog({title:"Show/Hide Tracks",controls:d,doc:this.__doc__,buttons:[{text:"Update",method:_=>{for(const S in _)s.tracks[S].config.hide=!_[S];s.update()}}]})}getConfig(){const s=super.getConfig(),d=this.browser;return s.tracks=this.browser.getAllTrackConfigs(),s.genome_location={chr:d.chr,start:d.start,end:d.end},s}filterReads(s){s!==this.cellDim&&(s==="all_removed"?(this.bamscatrack.filterReads(null,null),this.resetButton.style.display="none",this.browser.removeHighlightedRegion("_filter")):this.bamscatrack.filterReads(this.dataLink.dataStore.filterArray,this.cellDim.filterArray),this.browser.update())}createColumnLinks(s,d,_){this.dataLink={dataStore:s,columns:d,getDataFunction:_};const S=d[0].col,T=this.dataStore.getValueToColor(S);for(const F in T){const M=this.browser.tracks[`${S}|${F}`];M&&(M.config.color=T[F])}}_setPhasedSNPs(s,d){if(s){const _=s.split(",").map(S=>S.split(":"));for(const S of _){const T=Number.parseInt(S[1]);this.browser.setHighlightedRegion({chr:S[0],start:T,end:T+1},S[0]+S[1],d)}}}onDataHighlighted(s){if(s.source===this)return;const d=this.config.param,_=this.config.view_margins,S=this.dataStore.getRowAsObject(s.indexes[0],d),T=S[d[2]]>S[d[1]]?S[d[1]]:S[d[2]];let F=S[d[2]]>S[d[1]]?S[d[2]]:S[d[1]];const M=s.data,P=[],H=[];if(M!=null&&M.phase_data){this.browser.removeAllHighlightedRegions(),this._setPhasedSNPs(M.more_peak_haplotype,"blue"),this._setPhasedSNPs(M.less_peak_haplotype,"red");for(const ae of this.browser.track_order){const ge=M.phase_data[ae];ae.startsWith("Don")&&(ge?(ge.ratio[0]===0&&ge.ratio[1]===0?this.browser.setTrackAttribute(ae,"phase_data",null):this.browser.setTrackAttribute(ae,"phase_data",{ratio:ge.ratio[0]/(ge.ratio[0]+ge.ratio[1]),st:T,en:F}),P.push(ae)):(this.browser.setTrackAttribute(ae,"phase_data",null),H.push(ae)))}const z=P.concat(H),oe=[];let se=0;for(const ae of this.browser.track_order)ae.startsWith("Don")?(oe.push(z[se]),se++):oe.push(ae)}const J=this.config.feature_present_column;if(J){const z=this.dataStore.getRowText(s.indexes[0],J).split(", ");for(const pe of z)this.browser.setTrackAttribute(pe,"color","#35de26");const oe=this.dataStore.getColumnValues(J).slice(0).filter(pe=>z.indexOf(pe)===-1);for(const pe of oe)this.browser.setTrackAttribute(pe,"color","#939c92");const se=z.concat(oe),ae=[];let ge=0;for(const pe of this.browser.track_order)se.indexOf(pe)!==-1?(ae.push(se[ge]),ge++):ae.push(pe)}let K=1e3;if(_.type==="percentage"?(F=T===F?T+1:F,K=Math.round(F-T)*(_.value/100)):K=_.value,_.type==="fixed_length"){const z=Math.round((F-T)/2)+T;K=Math.round(K/2),this.browser.update(S[d[0]],z-K,z+K)}else this.browser.update(S[d[0]],T-K,F+K)}getImage(s,d){d==="svg"?this.browser.repaint(!0,!1,s):s(this.browser.canvas)}configure_tracks(){this.dataSrore}getColorOptions(){return{colorby:"all",has_default_color:!0}}_calculatePosition(s){s=s.replace(/,/g,"");const d=s.split(":");let _=null,S=null;d.length===1?(_=this.browser.getPosition().chr,S=d[0]):(_=d[0],S=d[1]);const T=S.split("-");return{chr:_,start:Number.parseInt(T[0]),end:Number.parseInt(T[1])}}colorByColumn(s,d=!0){const _=this.getColorFunction(s);this.browser.setTrackColorFunction("_base_track",S=>_(S.data[0])),d&&this.browser.update()}setLabelFunction(s){s?(this.config.feature_label=s,this.browser.setTrackLabelFunction("_base_track",d=>this.dataStore.getRowText(d.data[0],s))):(this.browser.setTrackLabelFunction("_base_track",null),this.config.feature_label=void 0)}onDataFiltered(s){if(!this.browser){setTimeout(()=>this.onDataFiltered(s),100);return}this.dataStore.isFiltered()?this.browser.setTrackFeatureFilter("_base_track",d=>this.dataStore.filterArray[d.data[0]]===0):this.browser.setTrackFeatureFilter("_base_track",null),this.browser.update()}removeFilter(){this.cellDim.removeFilter(),this.browser.removeHighlightedRegion("_filter"),this.browser.update()}changeBaseDocument(s){this.browser.closeAllDialogs(),super.changeBaseDocument(s),this.browser.changeBaseDocument(s)}setSize(s,d){super.setSize(s,d),this.browser.setSize(),this.browser.update()}remove(s=!0){this.cellDim&&(this.cellDim.destroy(s),this.dataLink.dataStore.removeListener(`gb_${this.config.id}`)),super.remove()}getSettings(){const s=super.getSettings(),d=this.dataStore.getColumnList(),_=this.config;if(d.push({name:"None",field:"_none"}),this.bamscatrack){const S=this.dataLink.dataStore.getColumnList("text");s.push({label:"Group By",type:"dropdown",values:[S,"name","field"],current_value:_.cluster_reads,func:T=>{this.changeClusters(T)}})}return s.push({label:"Feature Label",type:"dropdown",values:[d,"name","field"],current_value:_.feature_label||"_none",func:S=>{S=S==="_none"?null:S,this.setLabelFunction(S),this.browser.update()}}),s.push({label:"View margin type",type:"radiobuttons",choices:[["% of feature length","percentage"],["absolute (bp)","absolute"],["Fixed Length (bp)","fixed_length"]],current_value:_.view_margins.type,func:S=>{_.view_margins.type=S;const T=this.dataStore.getHighlightedData();T&&this.onDataHighlighted({indexes:[T]})}}),s.push({label:"View margin length",type:"text",current_value:_.view_margins.value,only_update_on_enter:!0,func:S=>{S=Number.parseInt(S),S=Number.isNaN(S)?_.view_margins.type==="percentage"?20:1e3:S,_.view_margins.value=S;const T=this.dataStore.getHighlightedData();T&&this.onDataHighlighted({indexes:[T]})}}),s}}BaseChart.types.genome_browser={class:GenomeBrowser,name:"Genome Browser",methodsUsingColumns:["setLabelFunction"],configEntriesUsingColumns:["feature_label","color_wig_tracks_by","feature_present_column"],params:[],required:["genome_browser"],init:(f,s)=>{const d=s.genome_browser;f.param=d.location_fields.slice(0),d.feature_label&&(f.feature_label=d.feature_label),d.default_parameters&&Object.assign(f,d.default_parameters);const _={short_label:d.default_track.label,url:d.default_track.url,track_id:"_base_track",decode_function:"generic",displayMode:"EXPANDED"};if(d.default_track.type&&(_.type=d.default_track.type),f.tracks=[_],d.default_track_parameters&&Object.assign(_,d.default_track_parameters),d.atac_bam_track&&(f.cluster_reads=d.atac_bam_track.cluster_reads,f.tracks.push({short_label:"Coverage",height:400,track_id:"_atac_bam_track",url:d.atac_bam_track.url,type:"bam_sca_track"})),f.default_track=d.default_track.url,d.default_tracks)for(const S of d.default_tracks)f.tracks.push(JSON.parse(JSON.stringify(S)))}};const color_scheme=["#313695","#4575B4","#74ADD1","#ABD9E9","#E0F3F8","#E0F3F8","#FFFFBF","#FEE090","#FDAE61","#F46D43","#D73027","#A50026"].reverse();class DeepToolsHeatMap extends SVGChart{constructor(s,d,_){super(s,d,_,{x:{type:"band"},y:{custom:!0}}),this.dim=this.dataStore.getDimension("deeptools_dimension");const S=this._getContentDimensions();this.graphDiv=createEl("div",{styles:{position:"absolute",left:`${S.left}px`,top:`${S.top}px`,width:`${S.width}px`,height:`${S.height}px`}},this.contentDiv);const T=this.config;T.color_scale||(T.color_scale={range:[0,255],log:!1}),this.app=new WGL2DI(this.graphDiv,{lock_x_axis:!0}),this.app.addHandler("object_clicked",(F,M)=>{const P=Math.floor(M[1]/20),H=this.reverse_map[P];this.dataStore.dataHighlighted([H],this)}),this.hm_config=this.dataStore.deeptools.maps[T.heatmap],this.x_scale.domain(this.hm_config.groups.slice(0)),this.dataStore.loadBinaryData(this.hm_config.data).then(F=>{const M=this.hm_config.rows,P=this.hm_config.cols;this.map_index=new Uint32Array(F,0,M);const H=new Uint8Array(F,M*4,M*P),J=H.length;this.dataLength=0;for(let z=0;z<H.length;z++)H[z]!==0&&this.dataLength++;this.data=new SharedArrayBuffer(this.dataLength*5),this.rowPositions=new Uint16Array(this.data,0,this.dataLength),this.colPositions=new Uint16Array(this.data,this.dataLength*2,this.dataLength),this.values=new Uint8Array(this.data,this.dataLength*4,this.dataLength),this.displayData=new SharedArrayBuffer(this.dataLength*11),this.x=new Float32Array(this.displayData,0,this.dataLength),this.y=new Float32Array(this.displayData,this.dataLength*4,this.dataLength),this.colors=new Uint8Array(this.displayData,this.dataLength*8,this.dataLength*3);let K=0;for(let z=0;z<J;z++){if(H[z]===0)continue;const oe=z%P,se=Math.floor(z/P);this.rowPositions[K]=this.map_index[se],this.colPositions[K]=oe,this.values[K]=H[z],K++}this.app.addSquares({x:this.x,y:this.y,colors:this.colors}),this.dim.setParameters({displayData:this.displayData,data:this.data,columns:P,rows:M,groups:this.hm_config.groups.length,length:K}),this.sortBy(P.sortBy)})}updateMap(s=!1){const d=this.hm_config.cols,_=this.getColorScale();this.dim.updateData(_,s).then(S=>{this.total=S.total,this.app.squares.count=this.total,this.reverse_map=S.reverse_map,this.currentRows=S.currentRows;const T=this.dataStore.filterSize,F=this._getContentDimensions();s||(this.app.x_scale=F.width/(d*20+(this.hm_config.groups.length-1)*200),this.app.y_scale=F.height/(T*20),this.app.offset=[0,0]);const M=this.hm_config.groups.length,P=d/M*20;let H=0;const J=_.colors[0];this.app.removeAllRectangles();for(let K=0;K<M;K++)this.app.addRectangle([H,0],P,T*20,J),H+=P+200;this.app.refresh(),this.updateAxis()})}sortBy(s){if(s){const d=[{col:s,desc:!1}];this.dim.sort(d).then(()=>{this.updateMap()})}else this.dim.setSortOrder(this.map_index),this.updateMap()}setSize(s,d){super.setSize(s,d);const _=this._getContentDimensions();this.app.setSize(_.width,_.height),this.graphDiv.style.left=`${_.left}px`,this.graphDiv.style.top=`${_.top}px`,this.updateAxis()}onDataFiltered(){this.updateMap()}onDataHighlighted(s){this.app.removeAllLines();const d=this.currentRows[s.indexes[0]],_=this.hm_config.cols;d&&(this.app.addLine([0,d*20],[_*20+600,d*20],[255,255,0]),this.app.addLine([0,d*20+20],[_*20+600,d*20+20],[255,255,0])),this.app.refresh()}getColorScale(){const s=this.config.color_scale.range,d={datatype:"integer",asArray:!0,overideValues:{colorLogScale:this.config.color_scale.log,colors:color_scheme,min:s[0],max:s[1],bins:200}};return{colors:this.dataStore.getColumnColors({datatype:"integer"},d),bins:200,min:s[0],max:s[1]}}remove(s=!0){this.dim.destroy(s),super.remove()}getSettings(){let s=super.getSettings();const d=this.config,_=d.color_scale,S=this.dataStore.getColumnList();return S.push({name:"Default",field:"__default__"}),s=s.concat([{type:"doubleslider",max:255,min:0,doc:this.__doc__,current_value:_.range,label:"Color Scale",func:(T,F)=>{_.range=[T,F],this.updateMap(!0)}},{type:"dropdown",label:"SortBy",current_value:d.sortBy||"__default__",values:[S,"name","field"],func:T=>{T==="__default__"?(d.sortBy=void 0,this.sortBy()):(d.sortBy=T,this.sortBy(T))}}]),s}}BaseChart.types.deeptools_heatmap={class:DeepToolsHeatMap,required:["deeptools"],name:"DeepTools HeatMap",methodsUsingColumns:["sortBy"],configEntriesUsingColumns:["sortBy"],extra_controls:f=>[{type:"dropdown",name:"map",label:"Map",values:Object.keys(f.deeptools.maps).map(d=>({name:d,value:d}))}],init:(f,s,d)=>{f.heatmap=d.map}};async function connectIPC(f){new URLSearchParams(window.location.search).get("socket");let d=!1;f.addListener("ipc",(M,P,H)=>{M==="view_loaded"&&(console.log("view_loaded",H,Object.keys(P.charts)),d||(F(),d=!0))});function _(M){window.vuplex&&window.vuplex.postMessage(M)}const S=f._popOutChart;f._popOutChart=M=>{S.apply(f,[M]),_({type:"popout",chartID:M.config.id})};function T(M){const P=f.charts[M];P?f._popOutChart(P.chart):(console.error(`Chart ${M} not found`),console.log("current chart keys: ",Object.keys(f.charts).join(", ")),_({type:"error",message:`Popout failed: chart ${M} not found... trying again...`}),setTimeout(()=>T(M),100))}for(const M of f.dataSources){const P=new DataModel(M.dataStore);P.addListener("IPC",()=>{_({type:"filter",dataSource:M.name,indices:P.data})})}function F(){console.log("setupVuplex...");function M(){window.vuplex.postMessage({type:"vuplex_ready"}),window.vuplex.addEventListener("message",P=>{let H=P.data;typeof H=="string"&&(H=JSON.parse(H)),console.log("vuplex message",JSON.stringify(H,null,2));try{const J=H;J.type==="popout"&&(console.log("chartID: ",J.chartID),T(J.chartID))}catch(J){console.error("Error parsing vuplex message",J),_({type:"error",message:`Error parsing vuplex message: ${J}`})}})}window.vuplex?(console.log("vuplex already exists, adding listener"),M()):(console.log("vuplex doesn't exist (yet?), waiting for vuplexready"),window.addEventListener("vuplexready",()=>{console.log("vuplexready event received"),M()}))}}function addChartLink(f,s){const d=s.charts[f.source_chart];if(!d){console.error(`Chart ${f.source_chart} not found`);return}const _=d.dataSource.dataStore,S=_.columnIndex[f.column];S||console.log(`"chart_columnval_link" link column "${f.column}" not found in dataStore "${_.name}"`);async function T(F){await s._getColumnsAsync(_.name,[f.column]);for(const M of f.target_charts){const P=s.getChart(M);f.set_color&&P.colorByColumn(F),f.set_title&&P.setTitle(F),f.set_tooltip&&(P.setToolTipColumn?P.setToolTipColumn(f.column):P.config.tooltip&&runInAction(()=>P.config.tooltip.column=F)),f.set_param&&runInAction(()=>{P.config.param[f.param_index]=F,P.config.type})}}d.chart.addListener(f.id,async(F,M)=>{if(F==="cell_clicked"&&T(M.row),F==="data_highlighted"&&S){const P=S.values[S.data[M.indexes[0]]];T(P)}})}function popoutChart(f){const{chartManager:s}=window.mdv,d=window,_=f.getDiv(),S=_.parentElement,T=window.screenTop?window.screenTop:window.screenY,F=window.screenLeft?window.screenLeft:window.screenX,{width:M,height:P,left:H,top:J}=_.getBoundingClientRect(),K=Math.floor(Math.max(100,M)),z=Math.floor(Math.max(100,P)),oe=Math.floor(H+F),se=Math.floor(J+T);_.gridstackPopoutCallback&&_.gridstackPopoutCallback(),removeResizable(_),removeDraggable(_);const ae=window.open("",f.config.title,`width=${K},height=${z},left=${oe},top=${se}`);ae.document.body.style.overflow="hidden";const ge=be=>{if(be instanceof HTMLLinkElement){const Re=ae.document.createElement("link");Re.rel="stylesheet",Re.href=be.href,ae.document.head.appendChild(Re)}else if(be instanceof HTMLStyleElement){const Re=ae.document.createElement("style");Re.innerHTML=be.innerHTML,ae.document.head.appendChild(Re)}};Array.from(document.querySelectorAll('link[rel="stylesheet"], style')).forEach(be=>{ge(be)});const pe=new MutationObserver(be=>{be.forEach(Re=>{Re.type==="childList"&&Re.addedNodes.length>0&&Re.addedNodes.forEach(Fe=>{(Fe instanceof HTMLLinkElement||Fe instanceof HTMLStyleElement)&&ge(Fe)})})});pe.observe(document.head,{childList:!0,subtree:!0}),ae.document.body.append(_),f.changeBaseDocument(ae.document);const he=pushSetStyles(f),ve=ae.document.body;return ae.addEventListener("resize",()=>{f.setSize(ve.clientWidth,ve.clientHeight)}),s.charts[f.config.id].win=ae,ae.addEventListener("beforeunload",()=>{he(),S.appendChild(_),s._makeChartRD(f),s.charts[f.config.id].win=d,f.changeBaseDocument(document),pe.disconnect()}),d.addEventListener("unload",()=>{ae.close()}),ae}function pushSetStyles(f){const s=f.getDiv(),d={height:s.style.height,width:s.style.width,top:s.style.top,left:s.style.left};return s.style.height="100vh",s.style.width="100vw",s.style.top="0",s.style.left="0",()=>{s.style.height=d.height,s.style.width=d.width,s.style.top=d.top,s.style.left=d.left,f.setSize()}}class ChooseColumnDialog extends BaseDialog{constructor(s,d,_="all"){const S={footer:!0,width:250,maxHeight:500,title:"Select Columns",buttons:[{text:"OK",method:"getColumns"}]};super(S,{dataStore:s,callback:d,filter:_})}init(s){this.ds=s.dataStore;const d=createEl("div",{styles:{padding:"8px"}}),_=getRandomString();createEl("div",{text:"Groups"},this.dialog);const S=Object.keys(this.ds.columnGroups);S.unshift("All");for(const P of S){const H=createEl("span",{styles:{display:"inline-block",whiteSpace:"nowrap",marginRight:"5px"}},d);createEl("span",{text:P},H),createEl("input",{type:"radio",value:P,name:_},H).addEventListener("click",J=>{this.checkAllInGroup(J.target.value)})}this.dialog.append(d),createEl("div",{text:"Select Individual Columns"},this.dialog);const T=createEl("div",{style:{padding:"8px"}}),F=this.ds.getColumnList(s.filter);this.checks=[],this.callback=s.callback,createEl("input",{placeholder:"Search columns",type:"text"},T).addEventListener("input",P=>{const H=P.target.value.toLowerCase().split(" ");for(const J of this.checks){const K=H.some(z=>!J[1].toLowerCase().includes(z));J[0].parentElement.style.display=K?"none":""}});for(const P of F){const H=createEl("div",{styles:{whiteSpace:"nowrap"}},T),J=createEl("input",{type:"checkbox"},H);this.checks.push([J,P.field]),createEl("span",{text:P.name},H)}this.dialog.append(T)}checkAllInGroup(s){if(s==="All")for(const d of this.checks)d[0].checked=!0;else{const d=this.ds.columnGroups[s].columns;for(const _ of this.checks)_[0].checked=d.indexOf(_[1])!==-1}}getColumns(){const s=[];for(const d of this.checks)d[0].checked&&s.push(d[1]);this.callback(s),this.close()}}class AddChartDialog extends BaseDialog{constructor(s,d){const _={title:"Add Chart",columns:2,footer:!0,width:380};super(_,{dataSource:s,callback:d})}init(s){this.extraControls={};const d=[];this.dataSource=s.dataSource,this.dataStore=s.dataSource.dataStore;for(const _ in BaseChart.types){const S=BaseChart.types[_];if(S.required)if(typeof S.required=="function"){if(!S.required(this.dataStore))continue}else{let T=!0;for(const F of S.required)this.dataStore[F]||(T=!1);if(!T)continue}S.allow_user_add!==!1&&d.push({name:S.name,type:_})}d.sort((_,S)=>_.name.localeCompare(S.name)),this.defaultType=d[0].type,createEl("div",{text:"Chart Type",classes:["ciview-title-div"]},this.columns[0]),this.chartType=createEl("select",{styles:{maxWidth:"200px"}},this.columns[0]);for(const _ of d)createEl("option",{text:_.name,value:_.type},this.chartType);this.chartType.addEventListener("change",_=>{this.setParamDiv(this.chartType.value,s.dataStore)}),createEl("div",{text:"Title",classes:["ciview-title-div"]},this.columns[0]),this.chartName=createEl("input",{},this.columns[0]),createEl("div",{text:"Description",classes:["ciview-title-div"]},this.columns[0]),this.chartDescription=createEl("textarea",{styles:{height:"100px"}},this.columns[0]),this.columnsHeading=createEl("div",{text:"Columns",classes:["ciview-title-div"]},this.columns[1]),this.paramDiv=createEl("div",{},this.columns[1]),this.setParamDiv(d[0].type,s.dataStore),createEl("button",{text:"Add",classes:["ciview-button"]},this.footer).addEventListener("click",()=>this.submit(s.callback))}submit(s){const d={title:this.chartName.value,legend:this.chartDescription.value,type:this.chartType.value,param:this.paramSelects.map(T=>T.value)},_={};for(const T in this.extraControls){const F=this.extraControls[T];_[T]=F.type==="checkbox"?F.checked:F.value,d[T]=_[T]}this.multiColumns&&(d.param=d.param.concat(this.multiColumns)),console.log("config from add chart dialog",d);const S=BaseChart.types[this.chartType.value];S.init&&S.init(d,this.dataSource.dataStore,_),s(d),this.chartName.value="",this.chartDescription.value="",this.close()}_addMultiColumnSelect(s,d){const _=this.dataStore.getColumnList(d);let S="";_.length>1&&(S=`${_[0].name},... (1)`,this.multiColumns=[_[0].field]);const T=createEl("span",{text:S},s);createEl("i",{classes:["fas","fa-plus"]},s),s.style.cursor="pointer",s.addEventListener("click",()=>{new ChooseColumnDialog(this.dataStore,F=>{this.multiColumns=F;let M="";if(F.length>0){const P=F.length<3?F.length:3,H=[];for(let J=0;J<P;J++)H.push(this.dataStore.getColumnName(F[J]));M=H.join(","),F.length>3&&(M+=",...."),M+=`(${F.length})`,T.textContent=M}},d)})}setParamDiv(s){this.paramDiv.innerHTML="";const d=BaseChart.types[s].params;if(this.paramSelects=[],this.columnsHeading.style.display=d!=null&&d.length?"":"none",d)for(const S of d){const T=createEl("div",{styles:{padding:"4px"}},this.paramDiv);createEl("div",{text:`${S.name}:`},T);const F=createEl("div",{},this.paramDiv);if(!Array.isArray(S.type)&&S.type.startsWith("_multi"))this._addMultiColumnSelect(F,S.type.split(":")[1]);else{this.multiColumns=null;const M=createEl("select",{styles:{maxWidth:"200px"}},F),P=this.dataStore.getColumnList(S.type),H={};for(const J of this.dataStore.subgroupDataSources)H[J]=createEl("optgroup",{label:J});for(const J of P){const K=J.subgroup?H[J.subgroup.dataSource]:M;createEl("option",{text:J.name,value:J.field},K)}for(const J of this.dataStore.subgroupDataSources)M.append(H[J]);createFilterElement(M,F),this.paramSelects.push(M)}}const _=BaseChart.types[this.chartType.value];if(this.extraControls={},_.extra_controls){const S=_.extra_controls(this.dataSource.dataStore),T=this.paramDiv;for(const F of S)if(createEl("div",{text:F.label,classes:["ciview-title-div"]},T),F.type==="dropdown"){const M=createEl("select",{styles:{maxWidth:"200px"}},T);createFilterElement(M,T);for(const P of F.values){const H=createEl("option",{text:P.name,value:P.value},M);P.value===F.defaultVal&&(H.selected=!0)}this.extraControls[F.name]=M}else if(F.type==="string"){const M=createEl("input",{value:F.defaultVal},T);this.extraControls[F.name]=M}else if(F.type==="textbox"){const M=createEl("textarea",{value:F.defaultVal,styles:{height:"300px"}},T);this.extraControls[F.name]=M}else if(F.type==="checkbox"||F.type==="check"){const M=createEl("input",{type:"checkbox"},T);M.checked=F.defaultVal,this.extraControls[F.name]=M}}}}const column_orders={double:0,integer:0,int32:0,multitext:1,text16:1,text:2,unique:2},themes={dark:{title_bar_color:"#222",main_panel_color:"black",text_color:"white",background_color:"#333"},light:{title_bar_color:"white",main_panel_color:"#f1f1f1",text_color:"black",background_color:"#bababa"}};function getPreferredColorScheme(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function listenPreferredColorScheme(f){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>f(getPreferredColorScheme()))}class ChartManager{constructor(s,d,_,S={},T=null){if(!window.isSecureContext)throw alert("This application requires a secure context (https / localhost)"),new Error("This application requires a secure context (https / localhost)");window.mdv||(window.mdv={}),window.mdv.chartManager&&console.warn("Making another ChartManager... had believed this to be a singleton"),window.mdv.chartManager=this,this.listeners={},this.infoAlerts={},this.progressBars={},this.setTheme(getPreferredColorScheme()),listenPreferredColorScheme(H=>this.setTheme(H)),this.dataSources=[],this.dsIndex={},this.columnsLoading={};for(const H of d){const J={name:H.name,dataStore:new DataStore(H.size,H,_),link_to:H.link_to,index_link_to:H.index_link_to,color:H.color||themes[this.theme].background_color,column_link_to:H.column_link_to,links:H.links,custom:H.custom||{}};this.dataSources.push(J),this.dsIndex[H.name]=J,this._addDSListeners(J),this.columnsLoading[H.name]={}}T&&this.addListener("_default",T),makeObservable(this,{theme:observable,setTheme:action}),connectIPC(this),this.transactions={},this.containerDiv=typeof s=="string"?document.getElementById(s):s,this.containerDiv.style.display="flex",this.containerDiv.style.flexDirection="column",this.menuBar=createEl("div",{classes:["ciview-main-menu-bar"]},this.containerDiv),this.leftMenuBar=createEl("span",{},this.menuBar),this.rightMenuBar=createEl("span",{styles:{float:"right"}},this.menuBar),createEl("span",{classes:["mdv-divider"]},this.menuBar);const F=createMenuIcon("fas fa-home",{tooltip:{text:"Back to Catalog",position:"bottom-right"},func:()=>{const H=this.getState();this._callListeners("state_saved",H),window.location.href=`${window.location.origin}/catalog_dev`}},this.menuBar);if(F.style.marginRight="20px",S.all_views){this.viewSelect=createEl("select",{style:{maxWidth:"50em"}},this.menuBar);for(const H of S.all_views)createEl("option",{text:H,value:H},this.viewSelect);createFilterElement(this.viewSelect,this.menuBar),this.viewSelect.addEventListener("change",H=>{this.config.show_save_view_dialog&&S.permission==="edit"?this.showSaveViewDialog(()=>this.changeView(this.viewSelect.value)):this.changeView(this.viewSelect.value)})}S.permission==="edit"&&createMenuIcon("fas fa-save",{tooltip:{text:"Save View",position:"bottom-right"},func:()=>{const H=this.getState();this._callListeners("state_saved",H)}},this.menuBar),S.permission==="edit"&&S.all_views&&(createMenuIcon("fas fa-plus",{tooltip:{text:"Create New View",position:"bottom-right"},func:()=>{this.showSaveViewDialog(()=>this.showAddViewDialog())}},this.menuBar),createMenuIcon("fas fa-minus",{tooltip:{text:"Delete Current View",position:"bottom-right"},func:()=>{this.showDeleteViewDialog()}},this.menuBar));const M=createMenuIcon("fas fa-adjust",{tooltip:{text:"Change Theme",position:"bottom-left"},func:H=>{this.themeMenu.show(H)}},this.rightMenuBar);if(M.style.margin="3px",S.permission==="edit"){const H=createMenuIcon("fas fa-upload",{tooltip:{text:"Add datasource",position:"bottom-left"},func:J=>{new FileUploadDialogReact}},this.menuBar);H.style.margin="3px"}this._setupThemeContextMenu(),this.contentDiv=createEl("div",{styles:{flex:"1 1 auto",position:"relative"}},this.containerDiv),this.contentDiv.classList.add("ciview-contentDiv"),this.gridStack=new GridStackManager(this),this.charts={},this.config=S;const P=this.config;if(P.chart_color=P.chart_color||"white",this.dataLoader=_.function,this.viewLoader=_.viewLoader,this.layoutMenus={},_.files){this.filesToLoad=_.files.length;for(const H of _.files)this.loadFile(H,()=>{this.filesToLoad--,this.filesToLoad===0&&this._loadView(S,_,!0)})}else this._loadView(S,_,!0);for(const H of this.dataSources){const J=H.dataStore.links;if(J)for(const K in J){const z=this.dsIndex[K].dataStore;if(!z){console.warn(`datasource ${H.name} has link to non-existent datasource ${K}`);return}J[K].interactions&&this._addInteractionLinks(H.dataStore,z,J[K].interactions),J[K].valueset&&this._addValuesetLink(H.dataStore,z,J[K].valueset),J[K].column_pointer&&console.warn("experimental column_pointer links not currently supported")}}}_addValuesetLink(s,d,_){const S=d.getDimension("valueset_dimension"),T=s.columnIndex[_.source_column],F=d.columnIndex[_.dest_column],M=T.values&&F.values;Promise.all([this._getColumnsAsync(s.name,[_.source_column]),this._getColumnsAsync(d.name,[_.dest_column])]).then(()=>{s.addListener(`${s.name}-${d.name}_valueset`,async(P,H)=>{if(this.viewData.dataSources[d.name]){if(P==="filtered"){if(!H||typeof H=="string"||!H.filterArray){S.removeFilter();return}await this._getColumnsAsync(s.name,[_.source_column]);const J=await H.getValueSet(_.source_column);await this._getColumnsAsync(d.name,[_.dest_column]),S.filter("filterValueset",[_.dest_column],J)}else if(P==="data_highlighted"){await this._getColumnsAsync(s.name,[_.source_column]),await this._getColumnsAsync(d.name,[_.dest_column]);const{indexes:J}=H;if(M){const K=new Set(J.map(z=>T.values[T.data[z]]));S.filter("filterValueset",[_.dest_column],K)}else S.filter("filterValueset",[_.dest_column],new Set(J))}}})})}_addColumnPointerLink(s,d,_){const S=s.columnIndex[_.source_column];if(!S.values)throw new Error("Only text-like columns are supported for column pointer links");s.addListener(`${s.name}-${d.name}_column_pointer`,async(F,M)=>{var P;if(F==="data_highlighted"){const H=(P=this.charts[_.target_chart])==null?void 0:P.chart;if(!H){console.log(`No chart with id ${_.target_chart} found - bypassing column pointer link`);return}await this._getColumnsAsync(s.name,[_.source_column]);const{indexes:J}=M,K=S.values[S.data[J[0]]];H.config[_.target_property]=K,H.setTitle(K),_.target_property==="color_by"&&H.colorByColumn(K)}})}_addInteractionLinks(s,d,_){const S=d.getDimension("category_dimension"),T=_.interaction_columns,F=T[0],M=T[1],P=_.pivot_column;s.syncColumnColors.push({dataSource:d.name,columns:[{link_to:T[2],col:T[0]},{link_to:T[2],col:T[1]},{link_to:P,col:P}]}),s.addListener(`${s.name}-${d.name}_interaction`,async(H,J)=>{if(H==="data_highlighted"){await this._getColumnsAsync(s.name,[F,M,P]);const K=s.getRowAsObject(J.indexes[0],[F,M,P]);await this._getColumnsAsync(d.name,[T[2]]);const z=[K[F],K[M]];if(z.operand="and",S.filter("filterCategories",[T[2]],z),_.is_single_region&&d.regions&&this.dsPanes[d.name]&&!this.getAllCharts(d.name).find(oe=>oe.config.region===K[P])){const oe={type:"image_scatter_plot"};BaseChart.types.image_scatter_plot.init(oe,d,{region:K[P]}),this.addChart(d.name,oe)}}})}_setUpChangeLayoutMenu(s){this.layoutMenus[s.name]=new ContextMenu(()=>{const d=this.viewData.dataSources[s.name].layout||"absolute";return[{text:"Absolute",ghosted:d==="absolute",func:()=>this.changeLayout("absolute",s)},{text:"Grid Stack",ghosted:d==="gridstack",func:()=>this.changeLayout("gridstack",s)}]})}changeLayout(s,d){const _=this.viewData.dataSources[d.name],S=_.layout||"absolute";s!==S&&(S==="gridstack"?this.gridStack.destroy(d):S==="absolute"&&this.getAllCharts(d.name).forEach(T=>{const F=T.getDiv();removeResizable(F),removeDraggable(F)}),_.layout=s,s==="absolute"?this.getAllCharts(d.name).forEach(T=>this._makeChartRD(T,d)):s==="gridstack"&&this.getAllCharts(d.name).forEach(T=>{this.gridStack.manageChart(T,d,this._inInit)}))}_setupThemeContextMenu(){this.themeMenu=new ContextMenu(()=>{const s=[];for(const d in themes)s.push(this.__getMenuItem(d));return s})}__getMenuItem(s){return{text:s,ghosted:this.theme===s,func:()=>this.setTheme(s)}}setTheme(s){if(this.theme=s,document.getElementsByTagName("html")[0].className=s,!!this.charts)for(const d in this.charts){const _=this.charts[d];_.chart.themeChanged&&_.chart.themeChanged()}}_sync_colors(s,d,_){for(const S of s){const T=d.columnIndex[S.link_to],F=_.columnIndex[S.col],M=new Array(F.values),P=d.getColumnColors(S.link_to);if(!T.values||!F.values){console.error(`failed to _sync_colors '${S.link_to}', '${S.col}' - expected 'text' or similar columns`);continue}for(let H=0;H<T.values.length;H++){const J=T.values[H],K=F.values.indexOf(J);K!==-1&&(M[K]=P[H])}F.colors=M}}_initiateOffsets(s){const d=s.dataStore,_=d.offsets,S=_.param,T=[S[0],S[1],_.groups];_.background_filter&&T.push(_.background_filter),this._getColumnsThen(s.name,T,()=>{d.initiateOffsets(),d.updateColumnOffsets(),d.updateColumnOffsets(null,!0,!0)})}_loadView(s,d,_=!1){s.all_views?(this.currentView=s.initial_view||s.all_views[0],this.viewSelect.value=this.currentView,d.viewLoader(this.currentView).then(S=>{this._init(S,_)})):this._init(s.only_view,_)}getDataSource(s){return this.dsIndex[s].dataStore}async _init(s,d=!1){if(s){if(!s.dataSources){s.dataSources={};for(const P in s.initialCharts)s.dataSources[P]={}}this.viewData=s}else{const P={};for(const H in this.dsIndex)P[H]={layout:"gridstack"};this.viewData={dataSources:P,initialCharts:{}}}for(const P of this.dataSources)P.contentDiv=void 0,P.menuBar=void 0;const _=Object.keys(this.viewData.dataSources);let S=[];for(const P of _){const H=this.viewData.dataSources[P].panelWidth;if(!H){S=null;break}S.push(H)}this.dsPanes={};const T=splitPane(this.contentDiv,{number:_.length,sizes:S});for(let P=0;P<_.length;P++){const H=T[P];H.style.display="flex",H.style.flexDirection="column";const J=this.dsIndex[_[P]];this.dsPanes[J.name]=H,this.columnsLoading[J.name]={},J.charts=[],J.menuBar=createEl("div",{classes:["ciview-menu-bar"]},H);const K=createEl("div",{styles:{flex:"1 1 auto",position:"relative",overflow:"auto",height:"100px"}},H);this._setUpMenu(J),J.contentDiv=createEl("div",{styles:{position:"relative",height:"100%"}},K),J.contentDiv.classList.add("ciview-contentDiv"),this._setUpChangeLayoutMenu(J)}if(d)for(const P of this.dataSources){const H=P.dataStore;H.offsets&&this._initiateOffsets(P),P.column_link_to&&this._sync_colors(P.column_link_to.columns,this.dsIndex[P.column_link_to.dataSource].dataStore,H);for(const J of H.syncColumnColors)try{this._sync_colors(J.columns,this.dsIndex[J.dataSource].dataStore,H)}catch{console.warn(`error syncing colors for '${H.name}' and '${J.dataSource}'`)}}const F=s?s.initialCharts||{}:{};this._toLoadCharts=new Set;for(const P in F)for(const H of F[P])this._toLoadCharts.add(H);this._toLoadCharts.size===0&&(this._toLoadCharts=void 0,this.currentView===void 0?this.dataSources.length===0?new FileUploadDialogReact:this.showAddViewDialog():this._callListeners("view_loaded",this.currentView)),this._inInit=!0;const M=[];for(const P in F)for(const H of F[P])M.push(this.addChart(P,H));await Promise.all(M),this._inInit=!1}_addDSListeners(s){s.dataStore.addListener("l1",(d,_)=>{if(d==="column_removed")this._columnRemoved(s,_);else if(d==="data_highlighted")_.dataStore=s.dataStore,this._callListeners(d,_);else if(d==="filtered"){if(!this.progressBars[s.name])return;s.dataStore.size;const S=s.dataStore.filterSize;this.progressBars[s.name].setValue(S),this.progressBars[s.name].setText(S),this._callListeners(d,_)}})}showAddViewDialog(){const s=[{type:"checkbox",id:"clone-view",label:"Clone current view"},{type:"text",id:"name",label:"name"}];if(this.dataSources.length>1)for(const d of this.dataSources)s.push({type:"checkbox",id:d.name,label:`Include ${d.name}`});new CustomDialog({title:"Add New View",controls:s,buttons:[{text:"Create New View",method:d=>{if(createEl("option",{text:d.name,value:d.name},this.viewSelect),this.viewSelect.value=d.name,this.currentView=d.name,d["clone-view"]){const _=this.getState();this._callListeners("state_saved",_)}else{for(const S in this.viewData.dataSources)this.viewData.dataSources[S].layout==="gridstack"&&this.gridStack.destroy(this.dsIndex[S]);this.removeAllCharts(),this.viewData.links=[];const _=this.getState();if(_.view.initialCharts={},_.view.dataSources={},this.dataSources.length===1)_.view.initialCharts[this.dataSources[0].name]=[],_.view.dataSources[this.dataSources[0].name]={};else for(const S in this.dsIndex)d[S]&&(_.view.initialCharts[S]=[],_.view.dataSources[S]={});this._callListeners("state_saved",_),this.contentDiv.innerHTML="",this._init(_.view)}}}]})}showSaveViewDialog(s){new CustomDialog({title:"Save View",text:"Do you want to save the current view",buttons:[{text:"YES",method:()=>{const d=this.getState();this._callListeners("state_saved",d),s()}},{text:"NO",method:()=>{s()}}]})}showDeleteViewDialog(){new CustomDialog({title:"Delete View",text:"Do you want to delete the current view?",buttons:[{text:"YES",method:()=>{this.deleteCurrentView()}},{text:"NO",method:()=>{}}]})}changeView(s){for(const d in this.viewData.dataSources)this.viewData.dataSources[d].layout==="gridstack"&&this.gridStack.destroy(this.dsIndex[d]);this.removeAllCharts(),this.contentDiv.innerHTML="",this.currentView=s,this.viewLoader(s).then(d=>{this._init(d)})}deleteCurrentView(){this.viewSelect.querySelector(`option[value='${this.viewSelect.value}']`).remove();const d=this.getState();d.view=null,this._callListeners("state_saved",d),this.currentView=this.viewSelect.value,this.changeView(this.viewSelect.value)}_columnRemoved(s,d){const _=[];for(const S in this.charts){const T=this.charts[S];if(T.dataSource===s){const F=T.chart,M=F.getDiv();F.onColumnRemoved(d)&&(M.remove(!1),_.push(S),this._removeLinks(F),this._callListeners("chart_removed",F))}}_.length>0&&s.dataStore._callListeners("filtered");for(const S of _)delete this.charts[S]}_getColumnsRequiredForChart(s){const d=new Set,_=s.param;if(_)if(typeof _=="string")d.add(_);else for(const T of _)d.add(T);s.color_by&&(s.color_by.column?d.add(s.color_by.column.field):d.add(s.color_by)),s.tooltip&&s.tooltip.column&&d.add(s.tooltip.column),s.background_filter&&d.add(s.background_filter.column);const S=BaseChart.types[s.type];return S.configEntriesUsingColumns&&S.configEntriesUsingColumns.forEach(T=>{let F=s[T];if(F){F=Array.isArray(F)?F:[F];for(const M of F)d.add(M)}}),[...d]}loadFile(s,d){const _={csv,json,tsv},S=this.createInfoAlert("loading file",{spinner:!0});_[s.type](s.url).then(T=>{const F={},M=s.dataSource,P=this.dsIndex[M].dataStore,H=P.getAllColumns();for(const K of T.columns)P.columnIndex[K]&&(F[K]=[]);for(let K=0;K<T.length;K++){const z=T[K];K+1%100===0&&this.updateInfoAlert(S,`processed ${K}/${T.length} rows`);for(const oe in F)F[oe].push(z[oe])}let J=0;for(const K in F)P.setColumnData(K,F[K]),J++,this.updateInfoAlert(S,`processed ${J}/${H.length} columns`);this.updateInfoAlert(S,"complete",{duration:2e3}),d&&d()})}_getUpdatedColumns(s){const d=s.dirtyColumns,_={columns:[],added:[],removed:[],colors_changed:[]};for(const T in d.added){const F=S(T);_.columns.push(F),_.added.push(T)}for(const T in d.removed)_.removed.push(T);for(const T in d.data_changed)if(!_.columns[T]){const F=S(T);_.columns.push(F)}for(const T in d.colors_changed)_.colors_changed.push({column:T,colors:s.columnIndex[T].colors});return _;function S(T){const F=s.columnIndex[T],M={values:F.values,datatype:F.datatype,name:F.name,editable:!0,field:F.field},P=new Array(F.data.length);for(let H=0;H<F.data.length;H++)P[H]=F.data[H];return{metadata:M,data:P}}}saveState(){const s=this.getState();this._callListeners("state_saved",s)}getState(){const s={},d={},_={};this.contentDiv.offsetWidth;for(const F of this.dataSources){if(F.contentDiv){s[F.name]=[];const P=this.dsPanes[F.name].style.width,H=/calc\((.+)\%.+/;this.viewData.dataSources[F.name].panelWidth=Number.parseFloat(P.match(H)[1])}d[F.name]=this._getUpdatedColumns(F.dataStore);const M=F.dataStore;if(M.dirtyMetadata.size!==0){_[F.name]={};for(const P of M.dirtyMetadata)_[F.name][P]=M[P]}}for(const F in this.charts){const M=this.charts[F],P=M.chart,H=P.getConfig(),J=P.getDiv();this.viewData.dataSources[M.dataSource.name].layout==="gridstack"?(H.gsposition=[Number.parseInt(J.getAttribute("gs-x")),Number.parseInt(J.getAttribute("gs-y"))],H.gssize=[Number.parseInt(J.getAttribute("gs-w")),Number.parseInt(J.getAttribute("gs-h"))]):H.position=[J.offsetLeft,J.offsetTop],s[M.dataSource.name].push(H)}const S=JSON.parse(JSON.stringify(this.viewData));S.initialCharts=s;const T=this.viewSelect?Array.from(this.viewSelect.children,F=>F.value):null;return{view:S,currentView:this.currentView,all_views:T,updatedColumns:d,metadata:_}}setAllColumnsClean(){for(const s of this.dataSources)s.dataStore.setAllColumnsClean()}showCustomDialog(s){new CustomDialog(s)}addMenuIcon(s,d,_,S){const T=s==="_main"?"bottom-right":"bottom",F=s==="_main"?this.leftMenuBar:this.dsIndex[s].menuBar;return createMenuIcon(d,{tooltip:{text:_,position:T},func:S},F)}createInfoAlert(s,d={}){const _=getRandomString(),S=Object.keys(this.infoAlerts).length;d.type=d.type||"info";const T=createEl("div",{classes:["ciview-info-alert",`ciview-alert-${d.type}`],styles:{right:"10px",top:`${50+S*40}px`}},this.containerDiv);let F=null;const M=createEl("span",{text:s},T);return d.spinner&&(F=createEl("i",{classes:["fas","fa-spinner","fa-spin","ciview-info-alert-spin"]},T)),this.infoAlerts[_]={div:T,text:M,spinner:F,type:d.type},d.duration&&this.removeInfoAlert(_,d.duration),_}updateInfoAlert(s,d,_={}){const S=this.infoAlerts[s];_.type&&S.type!==_.type&&(S.div.classList.remove(`ciview-alert-${S.type}`),S.div.classList.add(`ciview-alert-${_.type}`),S.type=_.type),S.text.textContent=d,_.duration&&this.removeInfoAlert(s,_.duration)}removeInfoAlert(s,d=2e3){const _=this.infoAlerts[s].spinner;_&&_.remove(),setTimeout(()=>{if(!this.infoAlerts[s])return;this.infoAlerts[s].div.remove(),delete this.infoAlerts[s];let S=50;for(const T in this.infoAlerts)this.infoAlerts[T].div.style.top=`${S}px`,S+=40},d)}clearInfoAlerts(){for(const s in this.infoAlerts)this.infoAlerts[s].div.remove();this.infoAlerts={}}loadColumnSet(s,d,_,S=10,T=2){const F=getRandomString(),M=this.config.dataloading||{};S=M.split||10,T=M.threads||2,this.transactions[F]={callback:_,columns:[],totalColumns:s.length,failedColumns:[],nextColumn:0,columnsLoaded:0,id:F};let P=[];const H=this.transactions[F];for(const K of s)this.columnsLoading[d][K]=!0,P.push(K),P.length===S&&(H.columns.push(P),P=[]);P.length!==0&&(H.columns.push(P),P=[]),H.alertID=this.createInfoAlert(`Loading Columns:0/${s.length}`,{spinner:!0});const J=Math.min(H.columns.length,T);for(let K=0;K<J;K++)this._loadColumnData(H,d)}_loadColumnData(s,d){const _=this.dsIndex[d].dataStore,S=s.columns[s.nextColumn++],T=[];for(const F of S)T.push(_.getColumnInfo(F));T.sort((F,M)=>column_orders[F.datatype]-column_orders[M.datatype]),this.dataLoader(T,d,_.size).then(F=>{for(const M of F)_.setColumnData(M.field,M.data);s.columnsLoaded++}).catch(F=>{console.log(F),s.columnsLoaded++,s.failedColumns.push(T)}).finally(()=>{const F=s.columns.length,M=s.columnsLoaded;let P=M*S.length;for(const H of S)delete this.columnsLoading[d][H];P=P>s.totalColumns?s.totalColumns:P,this.updateInfoAlert(s.alertID,`Loading Columns:${P}/${s.totalColumns}`),M>=F&&(this.updateInfoAlert(s.alertID,`Loaded ${F} column${F===1?"":"s"}`,{duration:2e3}),s.callback(s.failedColumns),delete this.transactions[s.id]),s.nextColumn<F&&this._loadColumnData(s,d)})}_addLinkIcon(s,d,_){createMenuIcon("fas fa-plus-square",{tooltip:{text:`Add ${_.name}`,position:"bottom-right"},func:()=>{new AddColumnsFromRowsDialog(s,d,_,this)}},s.menuBar)}_setUpMenu(s){const d=s.dataStore;if(createMenuIcon("fas fa-chart-bar",{tooltip:{text:"Add Chart",position:"bottom-right"},func:()=>{new AddChartDialog(s,M=>this.addChart(s.name,M,!0))}},s.menuBar),createMenuIcon("fas fa-sync-alt",{tooltip:{text:"Reset All Filters",position:"bottom-right"},func:()=>{d.removeAllFilters()}},s.menuBar),createMenuIcon("fas fa-palette",{tooltip:{text:"Change Color Scheme",position:"bottom-right"},func:()=>{try{new ColorChooser(this,s)}catch(M){console.error("error making ColorChooser",M),this.createInfoAlert("Error making color chooser",{type:"warning",duration:2e3})}}},s.menuBar),createMenuIcon("fas fa-th",{tooltip:{text:"Change layout",position:"bottom-right"},func:M=>{this.layoutMenus[s.name].show(M)}},s.menuBar),this.addMenuIcon(s.name,"fas fa-tags","Tag Annotation",()=>{new BaseDialog.experiment.AnnotationDialogReact(s.dataStore)}),d.links)for(const M in d.links){const P=d.links[M];P.rows_as_columns&&this._addLinkIcon(s,this.dsIndex[M],P.rows_as_columns)}const _=createEl("div",{styles:{float:"right",lineHeight:"1.0"}},s.menuBar);createEl("span",{text:s.name,styles:{verticalAlign:"top",fontSize:"16px",marginRight:"4px"}},_);const S=s.dataStore.size;s.filterBar=createEl("progress",{value:S},s.menBar);const T=createEl("div",{styles:{width:"100px",display:"inline-block",marginTop:"2px"}},_),F={max:S,value:S,text:`${S}`};this.progressBars[s.name]=new MDVProgress(T,F),this._addFullscreenIcon(s)}_addFullscreenIcon(s){createMenuIcon("fas fa-expand",{tooltip:{text:"Full Screen",position:"bottom-right"},func:()=>{s.menuBar.parentElement.requestFullscreen()}},s.menuBar)}addListener(s,d){this.listeners[s]=d}removeListener(s){delete this.listeners[s]}_callListeners(s,d){for(const _ in this.listeners)this.listeners[_](s,this,d)}async addChart(s,d,_=!1){if(!BaseChart.types[d.type])throw this.createInfoAlert(`Tried to add unknown chart type '${d.type}'`,{type:"danger",duration:2e3}),`Unknown chart type ${d.type}`;const S=this._getColumnsRequiredForChart(d);if(d.location){const z=d.location,oe=5;d.size=[z.width*90+z.width*oe-oe,z.height*40+z.height*oe-oe],d.position=[(z.x+1)*oe+z.x*90,(z.y+1)*oe+z.y*40]}const T=this.dsIndex[s],{width:F,height:M,left:P,top:H}=positionChart(T,d),J=themes[this.theme],K=createEl("div",{styles:{position:"absolute",width:`${F}px`,height:`${M}px`,left:`${P}px`,top:`${H}px`,background:J.main_panel_color,zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},T.contentDiv);createEl("i",{classes:["fas","fa-circle-notch","fa-spin"],styles:{fontSize:"30px",color:J.text_color}},K),createEl("div",{styles:{position:"absolute",overflow:"hide",textAlign:"center",top:"3px",color:J.text_color,textOverflow:"ellipsis",wordBreak:"break-all",fontSize:"16px"},text:d.title},K);try{await this._getColumnsAsync(s,S),this._addChart(s,d,K,_)}catch(z){this.clearInfoAlerts();const oe=this.createInfoAlert(`Error creating chart with columns [${S.join(", ")}]: '${z}'`,{type:"warning"});console.error(z);const se=this.infoAlerts[oe].div;se.onclick=()=>se.remove();const ae=createEl("div",{styles:{position:"absolute",backdropFilter:"blur(10px)"}},K.lastChild);ae.innerHTML=`<div><h2>Error creating chart</h2><pre>${z.stack}</pre></div>`,ae.onclick=()=>ae.remove()}}_getColumnsFromOtherSource(s,d,_,S,T){this._getColumnsThen(d,_.concat(S),()=>{const F=this.dsIndex[s].dataStore,M=this.dsIndex[d].dataStore,P=M.getColumnIndex(S),H=F.columnIndex[S],J=H.values.map(z=>P[z]),K=_.map(z=>{const oe=F.columnIndex[z],se=M.columnIndex[z];se.values&&(oe.values=se.values),se.minMax&&(oe.minMax=se.minMax),se.quantiles&&(oe.quantiles=se.quantiles);const ae=new SharedArrayBuffer(F.size*(oe.datatype==="text"?1:4)),ge=oe.datatype==="text"?Uint8Array:Float32Array;return{col:z,data:ae,arr:new ge(ae),odata:se.data}});for(let z=0;z<F.size;z++){const oe=J[H.data[z]];for(const se of K)se.arr[z]=se.odata[oe]}for(const z of K)F.setColumnData(z.col,z.data);T()})}async _getColumnsAsync(s,d){return await new Promise(S=>{this._getColumnsThen(s,d,S)})}_getColumnsThen(s,d,_){const T=this.dsIndex[s].dataStore;if(T.links)for(const M in T.links){const P=T.links[M];if(P.columns){const H=[],J=[];for(const K of d)P.columns.indexOf(K)===-1?J.push(K):T.columnIndex[K].data||H.push(K);if(H.length>0){this._getColumnsThen(s,[P.index],()=>{this._getColumnsFromOtherSource(s,M,H,P.index,()=>{this._getColumnsThen(s,J,_)})});return}}}const F=d.filter(M=>{if(this.columnsLoading[s][M])return!1;const P=T.columnIndex[M];return P?!P.data:(T.addColumnFromField(M),!0)});F.length===0?this._haveColumnsLoaded(d,s,_):this.loadColumnSet(F,s,()=>{this._haveColumnsLoaded(d,s,_)})}_decorateColumnMethod(s,d,_){const S=`_${s}`;d[S]=d[s],d[s]=T=>{this._getColumnsThen(_,[T],()=>d[S](T))}}__decorateColumnMethod(s,d,_){const S=`_${s}`;d[S]=d[s],d[s]=()=>{if(arguments[0]==null)d[S](...arguments);else{const T=Array.isArray(arguments[0])?arguments[0]:[arguments[0]];this._getColumnsThen(_,T,()=>d[S](...arguments))}}}_haveColumnsLoaded(s,d,_){for(const S of s)if(this.columnsLoading[d][S]){setTimeout(()=>{this._haveColumnsLoaded(s,d,_)},500);return}_()}_addChart(s,d,_,S=!1){const T=this.dsIndex[s];_.innerHTML="",_.style.display="",_.style.alignItems="",_.style.justifyContent="";const F=BaseChart.types[d.type],M=new F.class(T.dataStore,_,d);if(this.charts[M.config.id]={chart:M,dataSource:T},this._makeChartRD(M,T),M.popoutIcon=M.addMenuIcon("fas fa-external-link-alt","popout",{func:()=>{this._popOutChart(M)}}),M.addMenuIcon("fas fa-times","remove chart").addEventListener("click",()=>{M.remove(),_.remove(),delete this.charts[M.config.id],this._removeLinks(M),this._callListeners("chart_removed",M)}),M.colorByColumn&&this._decorateColumnMethod("colorByColumn",M,s),M.setToolTipColumn&&this._decorateColumnMethod("setToolTipColumn",M,s),M.setBackgroundFilter&&this._decorateColumnMethod("setBackgroundFilter",M,s),M.changeContourParameter&&this._decorateColumnMethod("changeContourParameter",M,s),F.methodsUsingColumns)for(const H of F.methodsUsingColumns)this.__decorateColumnMethod(H,M,s);if(M.setupLinks){T.index_link_to&&this._giveChartAccess(M,this.dsIndex[T.index_link_to.dataSource].dataStore,T.index_link_to.index);for(const H of T.dataStore.accessOtherDataStore)this._giveChartAccess(M,this.dsIndex[H.dataSource].dataStore,H.index)}const P=T.column_link_to;if(P&&M.createColumnLinks){const H=(J,K)=>{this._getColumnsThen(P.dataSource,J,K)};M.createColumnLinks(this.dsIndex[P.dataSource].dataStore,P.columns,H)}if(S&&this._callListeners("chart_added",M),this._toLoadCharts&&(this._toLoadCharts.delete(d),this._toLoadCharts.size===0)){if(this._toLoadCharts=void 0,this.viewData.links)for(const H of this.viewData.links)this._setUpLink(H);this._callListeners("view_loaded",this.currentView)}return M}_giveChartAccess(s,d,_){const S=async(T,F)=>{T.push(_),await this._getColumnsAsync(d.name,T),F()};s.setupLinks(d,_,S)}_setUpLink(s){switch(s.id||(s.id=getRandomString()),s.type){case"color_by_column":s.set_color=!0,console.warn("legacy color_by_column link type - use chart_columnval_link with set_color=true instead"),addChartLink(s,this);break;case"chart_columnval_link":addChartLink(s,this);break}}_removeLinks(s){const d=[],_=s.config.id,S=this.viewData.links;if(S){for(let T=0;T<S.length;T++){const F=S[T];F.source_chart===_&&d.push(T);try{const M=F.target_charts||F.linked_charts,P=M.indexOf(_);P!==-1&&(M.splice(P,1),M.length===0&&d.push(T))}catch(M){console.error(`Error removing links for chart '${_}'`,M,F)}}for(const T of d)this.removeLink(T)}}removeLink(s){const d=this.viewData.links[s];switch(d.type){case"color_by_column":case"chart_columnval_link":this.charts[d.source_chart].chart.removeListener(d.id)}this.viewData.links.splice(s,1)}removeAllCharts(s){const d=[];for(const _ in this.charts){const S=this.charts[_];s&&s.indexOf(S.dataSource.name)===-1||d.push([S.chart,S.window])}for(const _ of d)_[1]&&_[1].close(),_[0].remove(),_[0].div.remove();this.charts={}}getAllFilters(s){const d=this.getAllCharts(s),_=[];for(const S of d){const T=S.getFilter();T&&_.push(T)}return _}getChart(s){const d=this.charts[s];return d?d.chart:null}getAllCharts(s){const d=[];for(const _ in this.charts){const S=this.charts[_];S.dataSource.name===s&&d.push(S.chart)}return d}setChartsAsGrid(s=5,d=[300,300],_=10){let S=_,T=_,F=0;for(const M in this.charts){const H=this.charts[M].chart.getDiv();H.style.left=`${T}px`,H.style.top=`${S}px`,T+=d[0]+_,F++,F===s&&(F=0,T=_,S+=d[1]+_)}}addButton(s,d,_){createEl("button",{classes:["ciview-button"],text:s,styles:{position:"fixed",bottom:"40px",right:"40px",fontSize:"18px",zIndex:100}},this.contentDiv).addEventListener("click",()=>d())}_popOutChart(s){popoutChart(s)}_sendAllChartsToBack(s){for(const d in this.charts){const _=this.charts[d];s===_.dataSource&&(_.chart.div.style.zIndex="")}}_makeChartRD(s,d){if(d&&this.gridStack&&this.viewData.dataSources[d.name].layout==="gridstack"){this.gridStack.manageChart(s,d,this._inInit);return}const _=s.getDiv();makeDraggable(_,{handle:".ciview-chart-title",contain:"topleft",ondragstart:S=>{this._sendAllChartsToBack(d),_.style.zIndex=2}}),makeResizable(_,{onResizeStart:()=>{this._sendAllChartsToBack(d),_.style.zIndex=2},onresizeend:(S,T)=>s.setSize(S,T)})}}let route="";function _mdvInit(f){const s=f===void 0;if(!s&&(route=f,route&&!route.startsWith("/project/")))throw new Error("routeFromTemplate must be undefined, the empty string, or in the form of '/project/<project_id>'");setProjectRoot(route),getConfigs(s).then(d=>{const _=d.state,T=new URLSearchParams(window.location.search).get("view");_.all_views&&T&&_.all_views.indexOf(T)!==-1&&(_.initial_view=T);const F={function:s?getLocalCompressedBinaryDataLoader(d.datasources,"."):getArrayBufferDataLoader(`${route}/get_data`),viewLoader:s?async P=>d.views[P]:getView,rowDataLoader:s?loadRowDataStatic:loadRowData,binaryDataLoader:s?loadBinaryDataStatic:loadBinaryData},M=(P,H,J)=>{switch(P){case"state_saved":getData(`${route}/save_state`,J).then(K=>{K.success?(H.createInfoAlert("Data Saved",{duration:2e3}),H.setAllColumnsClean()):H.createInfoAlert("UnableToSaveData",{duration:3e3,type:"danger"})});break;case"view_loaded":changeURLParam("view",H.currentView);break}};console.log(_),new ChartManager("holder",d.datasources,F,_,M)})}window._mdvInit=_mdvInit;async function loadRowData(f,s){return await getData(`${route}/get_row_data`,{datasource:f,index:s})}async function loadRowDataStatic(f,s){const d=await fetch(`${route}/rowdata/${f}/${s}.json`);return d.status!==200?null:await d.json()}async function getView(f){return await getData(`${route}/get_view`,{view:f})}async function loadBinaryDataStatic(f,s){const _=await(await fetch(`${route}/binarydata/${f}/${s}.gz, {responseType: "arraybuffer"}`)).arrayBuffer();return await decompressData(_)}async function loadBinaryData(f,s){const d=await getData(`${route}/get_binary_data`,{datasource:f,name:s},"arraybuffer");return await decompressData(d)}async function getConfigs(f){let s={};const d=async _=>fetchJsonConfig(_);if(f){let _=await d(`${route}/datasources.json`);s.datasources=await _.json(),_=await d(`${route}/state.json`),s.state=await _.json(),_=await d(`${route}/views.json`),s.views=await _.json()}else s=await getData(`${route}/get_configs`);return s}async function getData(f,s,d="json"){const _=await fetch(f,{method:"POST",body:JSON.stringify(s),headers:{Accept:"application/json,text/plain,*/*","Content-Type":"application/json"}});if(d==="json"){console.log("returning json, rewriting base_url first...");const S=await _.json();return console.log("original",S),S}return await _.arrayBuffer()}function changeURLParam(f,s){const d=new URL(window.location);d.searchParams.has(f)?d.searchParams.set(f,s):d.searchParams.append(f,s),d.search=d.searchParams,history.pushState({},null,d)}DoImportSideEffects();window.mdv={ChartManager,chartTypes:BaseChart.types};document.addEventListener("DOMContentLoaded",async()=>{try{await loadData()}catch(f){document.head.title="MDV - Error loading data",document.body.style.textAlign="center",document.body.innerHTML=`<h1>Error loading data</h1><p>${f}</p>`}});const{origin,pathname}=window.location,flaskURL=origin+pathname,urlParams=new URLSearchParams(window.location.search),isPopout=urlParams.get("popout")==="true",dir=urlParams.get("dir")||(isPopout?"":flaskURL);function getRoot(f){return f.endsWith("/")?f.substring(0,f.length-1):f}const root=getRoot(dir),staticFolder=urlParams.get("static")!==null;//!dir.startsWith("/project") && !(window.location.port === "5050") && !dir.endsWith("5050");
const project_name=dir.split("/").pop();document.title=`MDV - ${project_name}`;isPopout&&(document.title="MDV popout");async function loadData(){if(isPopout)return;setProjectRoot(root);const f=await fetchJsonConfig(`${root}/datasources.json`),s=await fetchJsonConfig(`${root}/state.json`);s.popouturl=void 0;const d=await fetchJsonConfig(`${root}/views.json`),_=urlParams.get("view");s.all_views&&_&&s.all_views.indexOf(_)!==-1&&(s.initial_view=_);const S=getDataLoader(staticFolder,f,d,dir),T=async(J,K,z)=>{J==="state_saved"&&!staticFolder&&((await getPostData(`${root}/save_state`,z)).success?(K.createInfoAlert("State saved",{duration:2e3}),K.setAllColumnsClean()):K.createInfoAlert("State save failed",{duration:3e3,type:"danger"})),J==="view_loaded"&&changeURLParam("view",K.currentView)},F=new ChartManager("holder",f,S,s,T),P=F.addMenuIcon("_main","fas fa-bug","View datasource metadata",async()=>{const J=await fetchJsonConfig(`${root}/datasources.json`),K=await fetchJsonConfig(`${root}/views.json`),z=await fetchJsonConfig(`${root}/state.json`);new DebugChartReactWrapper({datasources:J,views:K,state:z})});P.style.float="right",P.setAttribute("data-microtip-position","bottom-left");function H(J){const K=f[J].name;setTimeout(()=>{F.addMenuIcon(K,"fas fa-spinner","Pre-Load Data",async()=>{const z=f[J].columns.map(oe=>oe.name);F.loadColumnSet(z,K,()=>{console.log("done loadColumnSet")})})},100)}f.forEach((J,K)=>H(K))}export{BaseDialog as B,ColorPaletteExtension as C,DetailView as D,LercParameters as L,Matrix4 as M,RGBToHex as R,ScatterplotLayer as S,VolumeView as V,DETAIL_VIEW_ID as a,getRandomString as b,ColorPalette3DExtensions as c,Deck as d,getProjectURL as e,createEl as f,getChannelStats as g,hexToRGB as h,action as i,createFilterElement as j,BaseDecoder as k,loadOmeTiff as l,LercAddCompression as m,noUiSlider as n};
//# sourceMappingURL=mdv.js.map
