const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../assets/whyDidYouRender-kUrVZlwU.js","../assets/createSvgIcon-C71gzcHQ.js","../assets/raw-2kFnxBIP.js","../assets/lzw-DnRp0l5R.js","../assets/jpeg-B28hJXyV.js","../assets/deflate-B8DPtbGp.js","../assets/pako.esm-CPws4d4z.js","../assets/packbits-Hh4QBnsN.js","../assets/lerc-DD2M6mLq.js","../assets/webimage-BvFWweWT.js","../assets/index-2IKiSScx.js","../assets/VivViewerMDV-Cu_nAK-Z.js","../assets/panel.js_v0-dv7dIoz-.js"])))=>i.map(i=>d[i]);
var j_=Object.defineProperty;var z_=(d,s,f)=>s in d?j_(d,s,{enumerable:!0,configurable:!0,writable:!0,value:f}):d[s]=f;var Bt=(d,s,f)=>z_(d,typeof s!="symbol"?s+"":s,f);import{R as React,r as reactExports,a as reactDomExports,g as getDefaultExportFromCjs,c as createTheme,s as styled,_ as _extends$a,h as handleBreakpoints,b as resolveBreakpointValues,d as createUnarySpacing,e as deepmerge,m as mergeBreakpointsInOrder,f as extendSxProp,i as _objectWithoutPropertiesLoose$1,j as jsxRuntimeExports,k as clsx,u as useThemeProps,l as getValue$1,n as composeClasses,o as generateUtilityClass,p as generateUtilityClasses,q as styled$1,t as useDefaultProps,v as duration,T as Transition$2,w as useTheme,x as useTimeout,y as useForkRef,z as getTransitionProps,P as Paper,A as useControlled,B as useSlot,C as ButtonBase,D as createSvgIcon,E as useId$1,F as useEventCallback,G as setRef$1,H as capitalize$1,I as alpha_1,J as inputClasses,K as inputBaseClasses,L as outlinedInputClasses,M as filledInputClasses,N as IconButton,O as Popper,Q as ArrowDropDownIcon,S as ButtonGroupContext,U as ButtonGroupButtonContext,V as rootShouldForwardProp,W as useFormControl,X as formControlState,Y as Typography,Z as createChainedFunction,$ as clamp$4,a0 as useIsFocusVisible,a1 as useEnhancedEffect,a2 as ownerDocument,a3 as extractEventHandlers,a4 as isHostComponent,a5 as lighten_1,a6 as darken_1,a7 as slotShouldForwardProp,a8 as useRtl,a9 as useSlotProps,aa as createTheme$1,ab as ThemeProvider,ac as CssBaseline,ad as createRoot,ae as React$1,af as requireCreateSvgIcon,ag as interopRequireDefaultExports,ah as TextField,ai as Dialog,aj as Button$1,ak as FormControl,al as commonjsGlobal,am as getAugmentedNamespace,an as Tooltip$1,ao as Grid,ap as AppBar}from"../assets/createSvgIcon-C71gzcHQ.js";function _mergeNamespaces(d,s){for(var f=0;f<s.length;f++){const _=s[f];if(typeof _!="string"&&!Array.isArray(_)){for(const S in _)if(S!=="default"&&!(S in d)){const T=Object.getOwnPropertyDescriptor(_,S);T&&Object.defineProperty(d,S,T.get?T:{enumerable:!0,get:()=>_[S]})}}}return Object.freeze(Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}))}const scriptRel="modulepreload",assetsURL=function(d,s){return new URL(d,s).href},seen={},__vitePreload=function(s,f,_){let S=Promise.resolve();if(f&&f.length>0){const F=document.getElementsByTagName("link"),M=document.querySelector("meta[property=csp-nonce]"),P=(M==null?void 0:M.nonce)||(M==null?void 0:M.getAttribute("nonce"));S=Promise.allSettled(f.map(H=>{if(H=assetsURL(H,_),H in seen)return;seen[H]=!0;const J=H.endsWith(".css"),K=J?'[rel="stylesheet"]':"";if(!!_)for(let ae=F.length-1;ae>=0;ae--){const ge=F[ae];if(ge.href===H&&(!J||ge.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${H}"]${K}`))return;const se=document.createElement("link");if(se.rel=J?"stylesheet":scriptRel,J||(se.as="script"),se.crossOrigin="",se.href=H,P&&se.setAttribute("nonce",P),document.head.appendChild(se),J)return new Promise((ae,ge)=>{se.addEventListener("load",ae),se.addEventListener("error",()=>ge(new Error(`Unable to preload CSS for ${H}`)))})}))}function T(F){const M=new Event("vite:preloadError",{cancelable:!0});if(M.payload=F,window.dispatchEvent(M),!M.defaultPrevented)throw F}return S.then(F=>{for(const M of F||[])M.status==="rejected"&&T(M.reason);return s().catch(T)})};async function loadWdyr(){console.log("Development mode...");const{default:d}=await __vitePreload(async()=>{const{default:s}=await import("../assets/whyDidYouRender-kUrVZlwU.js").then(f=>f.w);return{default:s}},__vite__mapDeps([0,1]),import.meta.url);console.log("Enabling whyDidYouRender..."),d(React,{trackAllPureComponents:!0,trackHooks:!0,logOnDifferentValues:!0,logOwnerReasons:!0,include:[/.*/]})}const urlParams$1=new URLSearchParams(window.location.search);urlParams$1.get("wdyr")&&loadWdyr();function getRandomString(d,s){d||(d=6),s=s==null?void 0:s.toLowerCase();let f="",_=0;const S=s==="a"?10:0,T=s==="n"?10:62;for(;_++<d;){let F=Math.random()*(T-S)+S<<0;f+=String.fromCharCode(F+=F>9?F<36?55:61:48)}return f}function debounce$1(d,s){let f;return(..._)=>{clearTimeout(f),f=setTimeout(()=>{d.apply(this,_)},s)}}function isColumnNumeric(d){const s=d.datatype;return s==="double"||s==="int32"||s==="integer"}function isColumnText(d){const s=d.datatype;return s==="text"||s==="multitext"||s==="text16"}class ContextMenu{constructor(s){this.setItemFunction=s,this.menus=[]}show(s,f){this.menus.length>0&&this.remove();const _=this.setItemFunction(f);this._addMenu(_,s.pageX,s.pageY),console.log(s.clientY),s.stopPropagation(),this.removeFunc=()=>{this.remove()},this._getDocument().body.addEventListener("click",this.removeFunc)}remove(){for(const s of this.menus)s.remove();this.menus=[],this.removeFunc&&this._getDocument().body.removeEventListener("click",this.removeFunc)}_addMenu(s,f,_){const S=document.createElement("div"),T=this._getDocument(),F=this.menus.length;S.classList.add("ciview-ctm-main");for(const P of s)this._addItem(S,P,F);T.body.append(S);const M=S.getBoundingClientRect();f+M.width>T.body.clientWidth&&(f=T.body.clientWidth-M.width-3),S.style.left=`${f}px`,S.style.top=`${_}px`,this.menus.push(S)}_getDocument(){return this.__doc__?this.__doc__:document}_showSubmenu(s,f,_){for(let T=_+1;T<this.menus.length;T++)this.menus[T].remove();this.menus=this.menus.slice(0,_+1);const S=s.getBoundingClientRect();this._addMenu(f,S.left+S.width+1,S.top)}_addItem(s,f,_){const S=document.createElement("div");if(S.classList.add("ciview-ctm-item"),f.ghosted?S.classList.add("ciview-ctm-ghosted"):S.classList.add("ciview-ctm-active"),f.icon){const F=document.createElement("i");for(const M of f.icon.split(" "))F.classList.add(M);F.classList.add("ciview-ctm-left-icon"),S.appendChild(F)}const T=document.createElement("span");if(T.appendChild(document.createTextNode(f.text)),S.append(T),f.subitems){const F=document.createElement("i");F.classList.add("fas","fa-caret-right","ciview-ctm-right-icon"),S.appendChild(F)}S.addEventListener("click",F=>{if(f.func&&!f.ghosted&&f.func(F),f.subitems){this._showSubmenu(S,f.subitems,_);for(const M of s.children)M.classList.remove("ciview-ctm-selected");S.classList.add("ciview-ctm-selected")}else this.remove();F.stopPropagation()}),s.append(S)}}var global$1=typeof window<"u"?window:null,ssr=global$1===null,document$1=ssr?void 0:global$1.document,addEventListener="addEventListener",removeEventListener="removeEventListener",getBoundingClientRect="getBoundingClientRect",gutterStartDragging="_a",aGutterSize="_b",bGutterSize="_c",HORIZONTAL="horizontal",NOOP$1=function(){return!1},calc=ssr?"calc":["","-webkit-","-moz-","-o-"].filter(function(d){var s=document$1.createElement("div");return s.style.cssText="width:"+d+"calc(9px)",!!s.style.length}).shift()+"calc",isString$1=function(d){return typeof d=="string"||d instanceof String},elementOrSelector=function(d){if(isString$1(d)){var s=document$1.querySelector(d);if(!s)throw new Error("Selector "+d+" did not match a DOM element");return s}return d},getOption=function(d,s,f){var _=d[s];return _!==void 0?_:f},getGutterSize=function(d,s,f,_){if(s){if(_==="end")return 0;if(_==="center")return d/2}else if(f){if(_==="start")return 0;if(_==="center")return d/2}return d},defaultGutterFn=function(d,s){var f=document$1.createElement("div");return f.className="gutter gutter-"+s,f},defaultElementStyleFn=function(d,s,f){var _={};return isString$1(s)?_[d]=s:_[d]=calc+"("+s+"% - "+f+"px)",_},defaultGutterStyleFn=function(d,s){var f;return f={},f[d]=s+"px",f},Split=function(d,s){if(s===void 0&&(s={}),ssr)return{};var f=d,_,S,T,F,M,P;Array.from&&(f=Array.from(f));var H=elementOrSelector(f[0]),J=H.parentNode,K=getComputedStyle?getComputedStyle(J):null,oe=K?K.flexDirection:null,se=getOption(s,"sizes")||f.map(function(){return 100/f.length}),ae=getOption(s,"minSize",100),ge=Array.isArray(ae)?ae:f.map(function(){return ae}),he=getOption(s,"maxSize",1/0),Be=Array.isArray(he)?he:f.map(function(){return he}),pe=getOption(s,"expandToMin",!1),be=getOption(s,"gutterSize",10),Re=getOption(s,"gutterAlign","center"),Fe=getOption(s,"snapOffset",30),Me=Array.isArray(Fe)?Fe:f.map(function(){return Fe}),ve=getOption(s,"dragInterval",1),At=getOption(s,"direction",HORIZONTAL),Ct=getOption(s,"cursor",At===HORIZONTAL?"col-resize":"row-resize"),Rt=getOption(s,"gutter",defaultGutterFn),It=getOption(s,"elementStyle",defaultElementStyleFn),xt=getOption(s,"gutterStyle",defaultGutterStyleFn);At===HORIZONTAL?(_="width",S="clientX",T="left",F="right",M="clientWidth"):At==="vertical"&&(_="height",S="clientY",T="top",F="bottom",M="clientHeight");function wt(uA,aa,eA,DA){var xA=It(_,aa,eA,DA);Object.keys(xA).forEach(function(ua){uA.style[ua]=xA[ua]})}function Ft(uA,aa,eA){var DA=xt(_,aa,eA);Object.keys(DA).forEach(function(xA){uA.style[xA]=DA[xA]})}function jt(){return P.map(function(uA){return uA.size})}function ta(uA){return"touches"in uA?uA.touches[0][S]:uA[S]}function Qn(uA){var aa=P[this.a],eA=P[this.b],DA=aa.size+eA.size;aa.size=uA/this.size*DA,eA.size=DA-uA/this.size*DA,wt(aa.element,aa.size,this[aGutterSize],aa.i),wt(eA.element,eA.size,this[bGutterSize],eA.i)}function ca(uA){var aa,eA=P[this.a],DA=P[this.b];this.dragging&&(aa=ta(uA)-this.start+(this[aGutterSize]-this.dragOffset),ve>1&&(aa=Math.round(aa/ve)*ve),aa<=eA.minSize+eA.snapOffset+this[aGutterSize]?aa=eA.minSize+this[aGutterSize]:aa>=this.size-(DA.minSize+DA.snapOffset+this[bGutterSize])&&(aa=this.size-(DA.minSize+this[bGutterSize])),aa>=eA.maxSize-eA.snapOffset+this[aGutterSize]?aa=eA.maxSize+this[aGutterSize]:aa<=this.size-(DA.maxSize-DA.snapOffset+this[bGutterSize])&&(aa=this.size-(DA.maxSize+this[bGutterSize])),Qn.call(this,aa),getOption(s,"onDrag",NOOP$1)(jt()))}function Jn(){var uA=P[this.a].element,aa=P[this.b].element,eA=uA[getBoundingClientRect](),DA=aa[getBoundingClientRect]();this.size=eA[_]+DA[_]+this[aGutterSize]+this[bGutterSize],this.start=eA[T],this.end=eA[F]}function wA(uA){if(!getComputedStyle)return null;var aa=getComputedStyle(uA);if(!aa)return null;var eA=uA[M];return eA===0?null:(At===HORIZONTAL?eA-=parseFloat(aa.paddingLeft)+parseFloat(aa.paddingRight):eA-=parseFloat(aa.paddingTop)+parseFloat(aa.paddingBottom),eA)}function LA(uA){var aa=wA(J);if(aa===null||ge.reduce(function(ua,sA){return ua+sA},0)>aa)return uA;var eA=0,DA=[],xA=uA.map(function(ua,sA){var oA=aa*ua/100,fA=getGutterSize(be,sA===0,sA===uA.length-1,Re),lA=ge[sA]+fA;return oA<lA?(eA+=lA-oA,DA.push(0),lA):(DA.push(oA-lA),oA)});return eA===0?uA:xA.map(function(ua,sA){var oA=ua;if(eA>0&&DA[sA]-eA>0){var fA=Math.min(eA,DA[sA]-eA);eA-=fA,oA=ua-fA}return oA/aa*100})}function ZA(){var uA=this,aa=P[uA.a].element,eA=P[uA.b].element;uA.dragging&&getOption(s,"onDragEnd",NOOP$1)(jt()),uA.dragging=!1,global$1[removeEventListener]("mouseup",uA.stop),global$1[removeEventListener]("touchend",uA.stop),global$1[removeEventListener]("touchcancel",uA.stop),global$1[removeEventListener]("mousemove",uA.move),global$1[removeEventListener]("touchmove",uA.move),uA.stop=null,uA.move=null,aa[removeEventListener]("selectstart",NOOP$1),aa[removeEventListener]("dragstart",NOOP$1),eA[removeEventListener]("selectstart",NOOP$1),eA[removeEventListener]("dragstart",NOOP$1),aa.style.userSelect="",aa.style.webkitUserSelect="",aa.style.MozUserSelect="",aa.style.pointerEvents="",eA.style.userSelect="",eA.style.webkitUserSelect="",eA.style.MozUserSelect="",eA.style.pointerEvents="",uA.gutter.style.cursor="",uA.parent.style.cursor="",document$1.body.style.cursor=""}function xI(uA){if(!("button"in uA&&uA.button!==0)){var aa=this,eA=P[aa.a].element,DA=P[aa.b].element;aa.dragging||getOption(s,"onDragStart",NOOP$1)(jt()),uA.preventDefault(),aa.dragging=!0,aa.move=ca.bind(aa),aa.stop=ZA.bind(aa),global$1[addEventListener]("mouseup",aa.stop),global$1[addEventListener]("touchend",aa.stop),global$1[addEventListener]("touchcancel",aa.stop),global$1[addEventListener]("mousemove",aa.move),global$1[addEventListener]("touchmove",aa.move),eA[addEventListener]("selectstart",NOOP$1),eA[addEventListener]("dragstart",NOOP$1),DA[addEventListener]("selectstart",NOOP$1),DA[addEventListener]("dragstart",NOOP$1),eA.style.userSelect="none",eA.style.webkitUserSelect="none",eA.style.MozUserSelect="none",eA.style.pointerEvents="none",DA.style.userSelect="none",DA.style.webkitUserSelect="none",DA.style.MozUserSelect="none",DA.style.pointerEvents="none",aa.gutter.style.cursor=Ct,aa.parent.style.cursor=Ct,document$1.body.style.cursor=Ct,Jn.call(aa),aa.dragOffset=ta(uA)-aa.end}}se=LA(se);var cI=[];P=f.map(function(uA,aa){var eA={element:elementOrSelector(uA),size:se[aa],minSize:ge[aa],maxSize:Be[aa],snapOffset:Me[aa],i:aa},DA;if(aa>0&&(DA={a:aa-1,b:aa,dragging:!1,direction:At,parent:J},DA[aGutterSize]=getGutterSize(be,aa-1===0,!1,Re),DA[bGutterSize]=getGutterSize(be,!1,aa===f.length-1,Re),oe==="row-reverse"||oe==="column-reverse")){var xA=DA.a;DA.a=DA.b,DA.b=xA}if(aa>0){var ua=Rt(aa,At,eA.element);Ft(ua,be,aa),DA[gutterStartDragging]=xI.bind(DA),ua[addEventListener]("mousedown",DA[gutterStartDragging]),ua[addEventListener]("touchstart",DA[gutterStartDragging]),J.insertBefore(ua,eA.element),DA.gutter=ua}return wt(eA.element,eA.size,getGutterSize(be,aa===0,aa===f.length-1,Re),aa),aa>0&&cI.push(DA),eA});function pI(uA){var aa=uA.i===cI.length,eA=aa?cI[uA.i-1]:cI[uA.i];Jn.call(eA);var DA=aa?eA.size-uA.minSize-eA[bGutterSize]:uA.minSize+eA[aGutterSize];Qn.call(eA,DA)}P.forEach(function(uA){var aa=uA.element[getBoundingClientRect]()[_];aa<uA.minSize&&(pe?pI(uA):uA.minSize=aa)});function aI(uA){var aa=LA(uA);aa.forEach(function(eA,DA){if(DA>0){var xA=cI[DA-1],ua=P[xA.a],sA=P[xA.b];ua.size=aa[DA-1],sA.size=eA,wt(ua.element,ua.size,xA[aGutterSize],ua.i),wt(sA.element,sA.size,xA[bGutterSize],sA.i)}})}function nI(uA,aa){cI.forEach(function(eA){if(aa!==!0?eA.parent.removeChild(eA.gutter):(eA.gutter[removeEventListener]("mousedown",eA[gutterStartDragging]),eA.gutter[removeEventListener]("touchstart",eA[gutterStartDragging])),uA!==!0){var DA=It(_,eA.a.size,eA[aGutterSize]);Object.keys(DA).forEach(function(xA){P[eA.a].element.style[xA]="",P[eA.b].element.style[xA]=""})}})}return{setSizes:aI,getSizes:jt,collapse:function(aa){pI(P[aa])},destroy:nI,parent:J,pairs:cI}};function createEl(d,s,f){const _=document.createElement(d);return s&&addElProps(_,s),f&&f.append(_),_}function createSVGEl(d,s,f){const _=document.createElementNS("http://www.w3.org/2000/svg",d);if(s)for(const S in s)if((S==="styles"||S==="style")&&typeof s[S]=="object")for(const T in s[S])_.style[T]=s[S][T];else if(S==="text")_.textContent=s[S];else if(S==="classes")for(const T of s[S])_.classList.add(T);else _.setAttributeNS(null,S,s[S]);return f&&f.append(_),_}function splitPane(d,s={}){const f=s.direction||"horizontal",_=s.number||2,S=[],T=f==="horizontal"?["split-horizontal"]:["split-vertical"];for(let F=0;F<_;F++)S.push(createEl("div",{classes:T},d));return Split(S,{direction:f,gutterSize:5,cursor:"pointer",sizes:s.sizes,onDragEnd:()=>window.dispatchEvent(new Event("resize"))}),S}function createMenuIcon(d,s,f){const _={role:"tooltip"},S=s.tooltip;S&&Object.assign(_,{"aria-label":S.text,"data-microtip-size":S.size||"small","data-microtip-position":S.position||"bottom-left"});const T=createEl("span",_);return createEl("i",{classes:["ciview-menu-icon"].concat(d.split(" ")),styles:{fontSize:s.size||"18px"}},T),s.func&&T.addEventListener("click",F=>s.func(F)),f&&f.append(T),T}function addElProps(d,s){for(const f in s)if((f==="styles"||f==="style")&&typeof s[f]=="object")for(const _ in s[f])d.style[_]=s[f][_];else if(f==="text")d.textContent=s[f];else if(f==="classes")for(const _ of s[f])d.classList.add(_);else d.setAttribute(f,s[f])}function createFilterElement(d,s){const f=createEl("input",{placeholder:"Filter",type:"text",styles:{width:"4em",margin:"0.2em"}},s);return f.oninput=()=>{const _=f.value.toLowerCase().split(" ");for(const S of d.options)_.some(F=>S.text.toLowerCase().indexOf(F)===-1)?S.style.display="none":S.style.display="block"},f}function makeSortable(d,s={}){let f=null,_=!1;function S(H){return this.after(f),H.preventDefault(),!1}function T(H){_=!1,f.classList.remove("mdv-element-dragged"),s.sortEnded&&s.sortEnded(Array.from(d.children).slice(1))}function F(H){s.handle?H.target.classList.contains(s.handle)?_=!0:_=!1:_=!0}function M(H){if(!_)return H.preventDefault(),!1;f=this,this.classList.add("mdv-element-dragged"),H.dataTransfer.setDragImage(createEl("div",{}),0,0)}const P=createEl("div",{styles:{height:"5px"}});d.prepend(P),P.addEventListener("dragover",S);for(let H=0;H<d.children.length;H++){const J=d.children[H];J.draggable=!0,J.addEventListener("dragover",S),J.addEventListener("dragstart",M),J.addEventListener("dragend",T),J.addEventListener("mousedown",F)}}function makeResizable(d,s={}){if(d.__resizeinfo__)return;const f={resize:d.style.resize,overflow:d.style.overflow};d.__doc__=s.doc||document,d.style.overflow="hidden",s.onresizeend&&(f.onresize=addResizeListener(d,(M,P)=>{s.onresizeend(M,P)},s.onResizeStart)),createEl("div",{classes:["resizer-both"]},d).addEventListener("mousedown",S,!1);function S(M){f.startX=M.clientX,f.startY=M.clientY,f.startWidth=Number.parseInt(document.defaultView.getComputedStyle(d).width,10),f.startHeight=Number.parseInt(document.defaultView.getComputedStyle(d).height,10),d.__doc__.documentElement.addEventListener("mousemove",T,!1),d.__doc__.documentElement.addEventListener("mouseup",F,!1)}function T(M){d.style.width=`${f.startWidth+M.clientX-f.startX}px`,d.style.height=`${f.startHeight+M.clientY-f.startY}px`}function F(M){d.__doc__.documentElement.removeEventListener("mousemove",T,!1),d.__doc__.documentElement.removeEventListener("mouseup",F,!1)}d.__resizeinfo__=f}function removeResizable(d){if(!d.__resizeinfo__)return;const s=d.__resizeinfo__;d.style.resize=s.resize,d.style.overflow=s.overflow,s.onresize&&d.removeEventListener("mouseup",s.onresize),d.__resizeinfo__=void 0}function removeDraggable(d){const s=d.__draginfo__;s&&(s.handle.style.cursor=s.cursor,d.style.position=s.position,s.handle.onmousedown=null,d.__draginfo__=void 0)}class MDVProgress{constructor(s,f){this.el=s,this.max=f.max||100,s.classList.add("mdv-progress-outer"),this.bar=createEl("div",{classes:["mdv-progress-inner"]},s),this.text=createEl("div",{classes:["mdv-progress-text"]},s),this.setText(f.text||""),this.setValue(f.value||0)}setText(s){this.text.textContent=s}setValue(s){this.bar.style.width=`${Math.round(s/this.max*100)}%`}}function makeDraggable(d,s={}){s.doc||(s.doc=document);let f=0,_=0,S=0,T=0;const F=s.handle?d.querySelector(s.handle):d;let M=null;s.contain&&(M={dir:s.contain}),F.onmousedown=P,d.__draginfo__={handle:F,cursor:F.style.cursor,position:d.style.position},F.style.cursor="move",d.style.position="absolute",d.style.margin="0px 0px 0px 0px",d.__doc__=s.doc;function P(K){K=K||window.event,K.preventDefault(),S=K.clientX,T=K.clientY,s.ondragstart&&s.ondragstart(d),M&&(M.p_bb=d.parentElement.getBoundingClientRect(),M.c_bb=d.getBoundingClientRect()),d.__doc__.onmouseup=J,d.__doc__.onmousemove=H}function H(K){K=K||window.event,K.preventDefault(),K.stopPropagation(),f=S-K.clientX,_=T-K.clientY,S=K.clientX,T=K.clientY;const oe=d.offsetTop-_,se=d.offsetLeft-f;M&&(oe<0||oe+M.c_bb.height>M.p_bb.height&&M.dir!=="topleft"||se<0||se+M.c_bb.width>M.p_bb.width&&M.dir!=="topleft")||(s.y_axis||(d.style.top=`${oe}px`),d.style.left=`${se}px`)}function J(){s.ondragend&&s.ondragend(),d.__doc__.onmouseup=null,d.__doc__.onmousemove=null}}function addResizeListener(d,s,f){const _=d.getBoundingClientRect();let S=_.width,T=_.height;const F=M=>{const P=d.getBoundingClientRect();(P.width!==S||P.height!==T)&&s(P.width,P.height),S=P.width,T=P.height};return f&&d.addEventListener("mousedown",f),d.addEventListener("mouseup",F),F}function getElDim(d){const s=d.getBoundingClientRect(),f=window.pageXOffset||document.documentElement.scrollLeft,_=window.pageYOffset||document.documentElement.scrollTop;return{top:s.top+_,left:s.left+f,height:s.height,width:s.width}}const chartTypes={};function die(d){for(var s=arguments.length,f=new Array(s>1?s-1:0),_=1;_<s;_++)f[_-1]=arguments[_];throw new Error(typeof d=="number"?"[MobX] minified error nr: "+d+(f.length?" "+f.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+d)}var mockGlobal={};function getGlobal(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:mockGlobal}var assign$1=Object.assign,getDescriptor=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY$3=[];Object.freeze(EMPTY_ARRAY$3);var EMPTY_OBJECT$1={};Object.freeze(EMPTY_OBJECT$1);var hasProxy=typeof Proxy<"u",plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(d){var s=!1;return function(){if(!s)return s=!0,d.apply(this,arguments)}}var noop$a=function(){};function isFunction$2(d){return typeof d=="function"}function isStringish(d){var s=typeof d;switch(s){case"string":case"symbol":case"number":return!0}return!1}function isObject$b(d){return d!==null&&typeof d=="object"}function isPlainObject$2(d){if(!isObject$b(d))return!1;var s=Object.getPrototypeOf(d);if(s==null)return!0;var f=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return typeof f=="function"&&f.toString()===plainObjectString}function isGenerator(d){var s=d==null?void 0:d.constructor;return s?s.name==="GeneratorFunction"||s.displayName==="GeneratorFunction":!1}function addHiddenProp(d,s,f){defineProperty(d,s,{enumerable:!1,writable:!0,configurable:!0,value:f})}function addHiddenFinalProp(d,s,f){defineProperty(d,s,{enumerable:!1,writable:!1,configurable:!0,value:f})}function createInstanceofPredicate(d,s){var f="isMobX"+d;return s.prototype[f]=!0,function(_){return isObject$b(_)&&_[f]===!0}}function isES6Map(d){return d!=null&&Object.prototype.toString.call(d)==="[object Map]"}function isPlainES6Map(d){var s=Object.getPrototypeOf(d),f=Object.getPrototypeOf(s),_=Object.getPrototypeOf(f);return _===null}function isES6Set(d){return d!=null&&Object.prototype.toString.call(d)==="[object Set]"}var hasGetOwnPropertySymbols=typeof Object.getOwnPropertySymbols<"u";function getPlainObjectKeys(d){var s=Object.keys(d);if(!hasGetOwnPropertySymbols)return s;var f=Object.getOwnPropertySymbols(d);return f.length?[].concat(s,f.filter(function(_){return objectPrototype.propertyIsEnumerable.call(d,_)})):s}var ownKeys$2=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:Object.getOwnPropertyNames;function toPrimitive$1(d){return d===null?null:typeof d=="object"?""+d:d}function hasProp(d,s){return objectPrototype.hasOwnProperty.call(d,s)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function(s){var f={};return ownKeys$2(s).forEach(function(_){f[_]=getDescriptor(s,_)}),f};function getFlag(d,s){return!!(d&s)}function setFlag(d,s,f){return f?d|=s:d&=~s,d}function _arrayLikeToArray$2(d,s){(s==null||s>d.length)&&(s=d.length);for(var f=0,_=Array(s);f<s;f++)_[f]=d[f];return _}function _defineProperties(d,s){for(var f=0;f<s.length;f++){var _=s[f];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(d,_toPropertyKey(_.key),_)}}function _createClass(d,s,f){return s&&_defineProperties(d.prototype,s),Object.defineProperty(d,"prototype",{writable:!1}),d}function _createForOfIteratorHelperLoose(d,s){var f=typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(f)return(f=f.call(d)).next.bind(f);if(Array.isArray(d)||(f=_unsupportedIterableToArray$2(d))||s){f&&(d=f);var _=0;return function(){return _>=d.length?{done:!0}:{done:!1,value:d[_++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(d){for(var s=1;s<arguments.length;s++){var f=arguments[s];for(var _ in f)({}).hasOwnProperty.call(f,_)&&(d[_]=f[_])}return d},_extends$9.apply(null,arguments)}function _inheritsLoose(d,s){d.prototype=Object.create(s.prototype),d.prototype.constructor=d,_setPrototypeOf(d,s)}function _setPrototypeOf(d,s){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,_){return f.__proto__=_,f},_setPrototypeOf(d,s)}function _toPrimitive(d,s){if(typeof d!="object"||!d)return d;var f=d[Symbol.toPrimitive];if(f!==void 0){var _=f.call(d,s);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(d)}function _toPropertyKey(d){var s=_toPrimitive(d,"string");return typeof s=="symbol"?s:s+""}function _unsupportedIterableToArray$2(d,s){if(d){if(typeof d=="string")return _arrayLikeToArray$2(d,s);var f={}.toString.call(d).slice(8,-1);return f==="Object"&&d.constructor&&(f=d.constructor.name),f==="Map"||f==="Set"?Array.from(d):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?_arrayLikeToArray$2(d,s):void 0}}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(d){function s(f,_){if(is20223Decorator(_))return d.decorate_20223_(f,_);storeAnnotation(f,_,d)}return Object.assign(s,d)}function storeAnnotation(d,s,f){hasProp(d,storedAnnotationsSymbol)||addHiddenProp(d,storedAnnotationsSymbol,_extends$9({},d[storedAnnotationsSymbol])),isOverride(f)||(d[storedAnnotationsSymbol][s]=f)}function collectStoredAnnotations(d){return hasProp(d,storedAnnotationsSymbol)||addHiddenProp(d,storedAnnotationsSymbol,_extends$9({},d[storedAnnotationsSymbol])),d[storedAnnotationsSymbol]}function is20223Decorator(d){return typeof d=="object"&&typeof d.kind=="string"}var $mobx=Symbol("mobx administration"),Atom=function(){function d(f){f===void 0&&(f="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=f}var s=d.prototype;return s.onBO=function(){this.onBOL&&this.onBOL.forEach(function(_){return _()})},s.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(_){return _()})},s.reportObserved=function(){return reportObserved(this)},s.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},s.toString=function(){return this.name_},_createClass(d,[{key:"isBeingObserved",get:function(){return getFlag(this.flags_,d.isBeingObservedMask_)},set:function(_){this.flags_=setFlag(this.flags_,d.isBeingObservedMask_,_)}},{key:"isPendingUnobservation",get:function(){return getFlag(this.flags_,d.isPendingUnobservationMask_)},set:function(_){this.flags_=setFlag(this.flags_,d.isPendingUnobservationMask_,_)}},{key:"diffValue",get:function(){return getFlag(this.flags_,d.diffValueMask_)?1:0},set:function(_){this.flags_=setFlag(this.flags_,d.diffValueMask_,_===1)}}])}();Atom.isBeingObservedMask_=1;Atom.isPendingUnobservationMask_=2;Atom.diffValueMask_=4;var isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(d,s,f){s===void 0&&(s=noop$a),f===void 0&&(f=noop$a);var _=new Atom(d);return s!==noop$a&&onBecomeObserved(_,s),f!==noop$a&&onBecomeUnobserved(_,f),_}function identityComparer(d,s){return d===s}function structuralComparer(d,s){return deepEqual$2(d,s)}function shallowComparer(d,s){return deepEqual$2(d,s,1)}function defaultComparer(d,s){return Object.is?Object.is(d,s):d===s?d!==0||1/d===1/s:d!==d&&s!==s}var comparer={identity:identityComparer,structural:structuralComparer,default:defaultComparer,shallow:shallowComparer};function deepEnhancer(d,s,f){return isObservable(d)?d:Array.isArray(d)?observable.array(d,{name:f}):isPlainObject$2(d)?observable.object(d,void 0,{name:f}):isES6Map(d)?observable.map(d,{name:f}):isES6Set(d)?observable.set(d,{name:f}):typeof d=="function"&&!isAction(d)&&!isFlow(d)?isGenerator(d)?flow(d):autoAction(f,d):d}function shallowEnhancer(d,s,f){if(d==null||isObservableObject(d)||isObservableArray(d)||isObservableMap(d)||isObservableSet(d))return d;if(Array.isArray(d))return observable.array(d,{name:f,deep:!1});if(isPlainObject$2(d))return observable.object(d,void 0,{name:f,deep:!1});if(isES6Map(d))return observable.map(d,{name:f,deep:!1});if(isES6Set(d))return observable.set(d,{name:f,deep:!1})}function referenceEnhancer(d){return d}function refStructEnhancer(d,s){return deepEqual$2(d,s)?s:d}var OVERRIDE="override";function isOverride(d){return d.annotationType_===OVERRIDE}function createActionAnnotation(d,s){return{annotationType_:d,options_:s,make_:make_$1,extend_:extend_$1,decorate_20223_:decorate_20223_$1}}function make_$1(d,s,f,_){var S;if((S=this.options_)!=null&&S.bound)return this.extend_(d,s,f,!1)===null?0:1;if(_===d.target_)return this.extend_(d,s,f,!1)===null?0:2;if(isAction(f.value))return 1;var T=createActionDescriptor(d,this,s,f,!1);return defineProperty(_,s,T),2}function extend_$1(d,s,f,_){var S=createActionDescriptor(d,this,s,f);return d.defineProperty_(s,S,_)}function decorate_20223_$1(d,s){var f=s.kind,_=s.name,S=s.addInitializer,T=this,F=function(H){var J,K,oe,se;return createAction((J=(K=T.options_)==null?void 0:K.name)!=null?J:_.toString(),H,(oe=(se=T.options_)==null?void 0:se.autoAction)!=null?oe:!1)};if(f=="field")return function(P){var H,J=P;return isAction(J)||(J=F(J)),(H=T.options_)!=null&&H.bound&&(J=J.bind(this),J.isMobxAction=!0),J};if(f=="method"){var M;return isAction(d)||(d=F(d)),(M=this.options_)!=null&&M.bound&&S(function(){var P=this,H=P[_].bind(P);H.isMobxAction=!0,P[_]=H}),d}die("Cannot apply '"+T.annotationType_+"' to '"+String(_)+"' (kind: "+f+"):"+(`
'`+T.annotationType_+"' can only be used on properties with a function value."))}function assertActionDescriptor(d,s,f,_){s.annotationType_,_.value}function createActionDescriptor(d,s,f,_,S){var T,F,M,P,H,J,K;S===void 0&&(S=globalState.safeDescriptors),assertActionDescriptor(d,s,f,_);var oe=_.value;if((T=s.options_)!=null&&T.bound){var se;oe=oe.bind((se=d.proxy_)!=null?se:d.target_)}return{value:createAction((F=(M=s.options_)==null?void 0:M.name)!=null?F:f.toString(),oe,(P=(H=s.options_)==null?void 0:H.autoAction)!=null?P:!1,(J=s.options_)!=null&&J.bound?(K=d.proxy_)!=null?K:d.target_:void 0),configurable:S?d.isPlainObject_:!0,enumerable:!1,writable:!S}}function createFlowAnnotation(d,s){return{annotationType_:d,options_:s,make_:make_$2,extend_:extend_$2,decorate_20223_:decorate_20223_$2}}function make_$2(d,s,f,_){var S;if(_===d.target_)return this.extend_(d,s,f,!1)===null?0:2;if((S=this.options_)!=null&&S.bound&&(!hasProp(d.target_,s)||!isFlow(d.target_[s]))&&this.extend_(d,s,f,!1)===null)return 0;if(isFlow(f.value))return 1;var T=createFlowDescriptor(d,this,s,f,!1,!1);return defineProperty(_,s,T),2}function extend_$2(d,s,f,_){var S,T=createFlowDescriptor(d,this,s,f,(S=this.options_)==null?void 0:S.bound);return d.defineProperty_(s,T,_)}function decorate_20223_$2(d,s){var f,_=s.name,S=s.addInitializer;return isFlow(d)||(d=flow(d)),(f=this.options_)!=null&&f.bound&&S(function(){var T=this,F=T[_].bind(T);F.isMobXFlow=!0,T[_]=F}),d}function assertFlowDescriptor(d,s,f,_){s.annotationType_,_.value}function createFlowDescriptor(d,s,f,_,S,T){T===void 0&&(T=globalState.safeDescriptors),assertFlowDescriptor(d,s,f,_);var F=_.value;if(isFlow(F)||(F=flow(F)),S){var M;F=F.bind((M=d.proxy_)!=null?M:d.target_),F.isMobXFlow=!0}return{value:F,configurable:T?d.isPlainObject_:!0,enumerable:!1,writable:!T}}function createComputedAnnotation(d,s){return{annotationType_:d,options_:s,make_:make_$3,extend_:extend_$3,decorate_20223_:decorate_20223_$3}}function make_$3(d,s,f){return this.extend_(d,s,f,!1)===null?0:1}function extend_$3(d,s,f,_){return assertComputedDescriptor(d,this,s,f),d.defineComputedProperty_(s,_extends$9({},this.options_,{get:f.get,set:f.set}),_)}function decorate_20223_$3(d,s){var f=this,_=s.name,S=s.addInitializer;return S(function(){var T=asObservableObject(this)[$mobx],F=_extends$9({},f.options_,{get:d,context:this});F.name||(F.name="ObservableObject."+_.toString()),T.values_.set(_,new ComputedValue(F))}),function(){return this[$mobx].getObservablePropValue_(_)}}function assertComputedDescriptor(d,s,f,_){s.annotationType_,_.get}function createObservableAnnotation(d,s){return{annotationType_:d,options_:s,make_:make_$4,extend_:extend_$4,decorate_20223_:decorate_20223_$4}}function make_$4(d,s,f){return this.extend_(d,s,f,!1)===null?0:1}function extend_$4(d,s,f,_){var S,T;return assertObservableDescriptor(d,this),d.defineObservableProperty_(s,f.value,(S=(T=this.options_)==null?void 0:T.enhancer)!=null?S:deepEnhancer,_)}function decorate_20223_$4(d,s){var f=this,_=s.kind,S=s.name,T=new WeakSet;function F(M,P){var H,J,K=asObservableObject(M)[$mobx],oe=new ObservableValue(P,(H=(J=f.options_)==null?void 0:J.enhancer)!=null?H:deepEnhancer,"ObservableObject."+S.toString(),!1);K.values_.set(S,oe),T.add(M)}if(_=="accessor")return{get:function(){return T.has(this)||F(this,d.get.call(this)),this[$mobx].getObservablePropValue_(S)},set:function(P){return T.has(this)||F(this,P),this[$mobx].setObservablePropValue_(S,P)},init:function(P){return T.has(this)||F(this,P),P}}}function assertObservableDescriptor(d,s,f,_){s.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(d){return{annotationType_:AUTO,options_:d,make_:make_$5,extend_:extend_$5,decorate_20223_:decorate_20223_$5}}function make_$5(d,s,f,_){var S,T;if(f.get)return computed.make_(d,s,f,_);if(f.set){var F=createAction(s.toString(),f.set);return _===d.target_?d.defineProperty_(s,{configurable:globalState.safeDescriptors?d.isPlainObject_:!0,set:F})===null?0:2:(defineProperty(_,s,{configurable:!0,set:F}),2)}if(_!==d.target_&&typeof f.value=="function"){var M;if(isGenerator(f.value)){var P,H=(P=this.options_)!=null&&P.autoBind?flow.bound:flow;return H.make_(d,s,f,_)}var J=(M=this.options_)!=null&&M.autoBind?autoAction.bound:autoAction;return J.make_(d,s,f,_)}var K=((S=this.options_)==null?void 0:S.deep)===!1?observable.ref:observable;if(typeof f.value=="function"&&(T=this.options_)!=null&&T.autoBind){var oe;f.value=f.value.bind((oe=d.proxy_)!=null?oe:d.target_)}return K.make_(d,s,f,_)}function extend_$5(d,s,f,_){var S,T;if(f.get)return computed.extend_(d,s,f,_);if(f.set)return d.defineProperty_(s,{configurable:globalState.safeDescriptors?d.isPlainObject_:!0,set:createAction(s.toString(),f.set)},_);if(typeof f.value=="function"&&(S=this.options_)!=null&&S.autoBind){var F;f.value=f.value.bind((F=d.proxy_)!=null?F:d.target_)}var M=((T=this.options_)==null?void 0:T.deep)===!1?observable.ref:observable;return M.extend_(d,s,f,_)}function decorate_20223_$5(d,s){die("'"+this.annotationType_+"' cannot be used as a decorator")}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(defaultCreateObservableOptions);function asCreateObservableOptions(d){return d||defaultCreateObservableOptions}var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(d){return d.deep===!0?deepEnhancer:d.deep===!1?referenceEnhancer:getEnhancerFromAnnotation(d.defaultDecorator)}function getAnnotationFromOptions(d){var s;return d?(s=d.defaultDecorator)!=null?s:createAutoAnnotation(d):void 0}function getEnhancerFromAnnotation(d){var s,f;return d&&(s=(f=d.options_)==null?void 0:f.enhancer)!=null?s:deepEnhancer}function createObservable(d,s,f){if(is20223Decorator(s))return observableAnnotation.decorate_20223_(d,s);if(isStringish(s)){storeAnnotation(d,s,observableAnnotation);return}return isObservable(d)?d:isPlainObject$2(d)?observable.object(d,s,f):Array.isArray(d)?observable.array(d,s):isES6Map(d)?observable.map(d,s):isES6Set(d)?observable.set(d,s):typeof d=="object"&&d!==null?d:observable.box(d,s)}assign$1(createObservable,observableDecoratorAnnotation);var observableFactories={box:function(s,f){var _=asCreateObservableOptions(f);return new ObservableValue(s,getEnhancerFromOptions(_),_.name,!0,_.equals)},array:function(s,f){var _=asCreateObservableOptions(f);return(globalState.useProxies===!1||_.proxy===!1?createLegacyArray:createObservableArray)(s,getEnhancerFromOptions(_),_.name)},map:function(s,f){var _=asCreateObservableOptions(f);return new ObservableMap(s,getEnhancerFromOptions(_),_.name)},set:function(s,f){var _=asCreateObservableOptions(f);return new ObservableSet(s,getEnhancerFromOptions(_),_.name)},object:function(s,f,_){return initObservable(function(){return extendObservable(globalState.useProxies===!1||(_==null?void 0:_.proxy)===!1?asObservableObject({},_):asDynamicObservableObject({},_),s,f)})},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=assign$1(createObservable,observableFactories),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function(s,f){if(is20223Decorator(f))return computedAnnotation.decorate_20223_(s,f);if(isStringish(f))return storeAnnotation(s,f,computedAnnotation);if(isPlainObject$2(s))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,s));var _=isPlainObject$2(f)?f:{};return _.get=s,_.name||(_.name=s.name||""),new ComputedValue(_)};Object.assign(computed,computedAnnotation);computed.struct=createDecoratorAnnotation(computedStructAnnotation);var _getDescriptor$config,_getDescriptor,currentActionId=0,nextActionId=1,isFunctionNameConfigurable$1=(_getDescriptor$config=(_getDescriptor=getDescriptor(function(){},"name"))==null?void 0:_getDescriptor.configurable)!=null?_getDescriptor$config:!1,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(d,s,f,_){f===void 0&&(f=!1);function S(){return executeAction(d,f,s,_||this,arguments)}return S.isMobxAction=!0,S.toString=function(){return s.toString()},isFunctionNameConfigurable$1&&(tmpNameDescriptor.value=d,defineProperty(S,"name",tmpNameDescriptor)),S}function executeAction(d,s,f,_,S){var T=_startAction(d,s);try{return f.apply(_,S)}catch(F){throw T.error_=F,F}finally{_endAction(T)}}function _startAction(d,s,f,_){var S=!1,T=0,F=globalState.trackingDerivation,M=!s||!F;startBatch();var P=globalState.allowStateChanges;M&&(untrackedStart(),P=allowStateChangesStart(!0));var H=allowStateReadsStart(!0),J={runAsAction_:M,prevDerivation_:F,prevAllowStateChanges_:P,prevAllowStateReads_:H,notifySpy_:S,startTime_:T,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=J.actionId_,J}function _endAction(d){currentActionId!==d.actionId_&&die(30),currentActionId=d.parentActionId_,d.error_!==void 0&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(d.prevAllowStateChanges_),allowStateReadsEnd(d.prevAllowStateReads_),endBatch(),d.runAsAction_&&untrackedEnd(d.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChanges(d,s){var f=allowStateChangesStart(d);try{return s()}finally{allowStateChangesEnd(f)}}function allowStateChangesStart(d){var s=globalState.allowStateChanges;return globalState.allowStateChanges=d,s}function allowStateChangesEnd(d){globalState.allowStateChanges=d}var ObservableValue=function(d){function s(_,S,T,F,M){var P;return T===void 0&&(T="ObservableValue"),M===void 0&&(M=comparer.default),P=d.call(this,T)||this,P.enhancer=void 0,P.name_=void 0,P.equals=void 0,P.hasUnreportedChange_=!1,P.interceptors_=void 0,P.changeListeners_=void 0,P.value_=void 0,P.dehancer=void 0,P.enhancer=S,P.name_=T,P.equals=M,P.value_=S(_,void 0,T),P}_inheritsLoose(s,d);var f=s.prototype;return f.dehanceValue=function(S){return this.dehancer!==void 0?this.dehancer(S):S},f.set=function(S){this.value_,S=this.prepareNewValue_(S),S!==globalState.UNCHANGED&&this.setNewValue_(S)},f.prepareNewValue_=function(S){if(hasInterceptors(this)){var T=interceptChange(this,{object:this,type:UPDATE,newValue:S});if(!T)return globalState.UNCHANGED;S=T.newValue}return S=this.enhancer(S,this.value_,this.name_),this.equals(this.value_,S)?globalState.UNCHANGED:S},f.setNewValue_=function(S){var T=this.value_;this.value_=S,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:S,oldValue:T})},f.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},f.intercept_=function(S){return registerInterceptor(this,S)},f.observe_=function(S,T){return T&&S({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,S)},f.raw=function(){return this.value_},f.toJSON=function(){return this.get()},f.toString=function(){return this.name_+"["+this.value_+"]"},f.valueOf=function(){return toPrimitive$1(this.get())},f[Symbol.toPrimitive]=function(){return this.valueOf()},s}(Atom),isObservableValue=createInstanceofPredicate("ObservableValue",ObservableValue),ComputedValue=function(){function d(f){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,f.get||die(31),this.derivation=f.get,this.name_=f.name||"ComputedValue",f.set&&(this.setter_=createAction("ComputedValue-setter",f.set)),this.equals_=f.equals||(f.compareStructural||f.struct?comparer.structural:comparer.default),this.scope_=f.context,this.requiresReaction_=f.requiresReaction,this.keepAlive_=!!f.keepAlive}var s=d.prototype;return s.onBecomeStale_=function(){propagateMaybeChanged(this)},s.onBO=function(){this.onBOL&&this.onBOL.forEach(function(_){return _()})},s.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(_){return _()})},s.get=function(){if(this.isComputing&&die(32,this.name_,this.derivation),globalState.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());else if(reportObserved(this),shouldCompute(this)){var _=globalState.trackingContext;this.keepAlive_&&!_&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=_}var S=this.value_;if(isCaughtException(S))throw S.cause;return S},s.set=function(_){if(this.setter_){this.isRunningSetter&&die(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,_)}finally{this.isRunningSetter=!1}}else die(34,this.name_)},s.trackAndCompute=function(){var _=this.value_,S=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,T=this.computeValue_(!0),F=S||isCaughtException(_)||isCaughtException(T)||!this.equals_(_,T);return F&&(this.value_=T),F},s.computeValue_=function(_){this.isComputing=!0;var S=allowStateChangesStart(!1),T;if(_)T=trackDerivedFunction(this,this.derivation,this.scope_);else if(globalState.disableErrorBoundaries===!0)T=this.derivation.call(this.scope_);else try{T=this.derivation.call(this.scope_)}catch(F){T=new CaughtException(F)}return allowStateChangesEnd(S),this.isComputing=!1,T},s.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},s.observe_=function(_,S){var T=this,F=!0,M=void 0;return autorun(function(){var P=T.get();if(!F||S){var H=untrackedStart();_({observableKind:"computed",debugObjectName:T.name_,type:UPDATE,object:T,newValue:P,oldValue:M}),untrackedEnd(H)}F=!1,M=P})},s.warnAboutUntrackedRead_=function(){},s.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},s.valueOf=function(){return toPrimitive$1(this.get())},s[Symbol.toPrimitive]=function(){return this.valueOf()},_createClass(d,[{key:"isComputing",get:function(){return getFlag(this.flags_,d.isComputingMask_)},set:function(_){this.flags_=setFlag(this.flags_,d.isComputingMask_,_)}},{key:"isRunningSetter",get:function(){return getFlag(this.flags_,d.isRunningSetterMask_)},set:function(_){this.flags_=setFlag(this.flags_,d.isRunningSetterMask_,_)}},{key:"isBeingObserved",get:function(){return getFlag(this.flags_,d.isBeingObservedMask_)},set:function(_){this.flags_=setFlag(this.flags_,d.isBeingObservedMask_,_)}},{key:"isPendingUnobservation",get:function(){return getFlag(this.flags_,d.isPendingUnobservationMask_)},set:function(_){this.flags_=setFlag(this.flags_,d.isPendingUnobservationMask_,_)}},{key:"diffValue",get:function(){return getFlag(this.flags_,d.diffValueMask_)?1:0},set:function(_){this.flags_=setFlag(this.flags_,d.diffValueMask_,_===1)}}])}();ComputedValue.isComputingMask_=1;ComputedValue.isRunningSetterMask_=2;ComputedValue.isBeingObservedMask_=4;ComputedValue.isPendingUnobservationMask_=8;ComputedValue.diffValueMask_=16;var isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_;(function(d){d[d.NOT_TRACKING_=-1]="NOT_TRACKING_",d[d.UP_TO_DATE_=0]="UP_TO_DATE_",d[d.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",d[d.STALE_=2]="STALE_"})(IDerivationState_||(IDerivationState_={}));var TraceMode;(function(d){d[d.NONE=0]="NONE",d[d.LOG=1]="LOG",d[d.BREAK=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function(s){this.cause=void 0,this.cause=s};function isCaughtException(d){return d instanceof CaughtException}function shouldCompute(d){switch(d.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:{for(var s=allowStateReadsStart(!0),f=untrackedStart(),_=d.observing_,S=_.length,T=0;T<S;T++){var F=_[T];if(isComputedValue(F)){if(globalState.disableErrorBoundaries)F.get();else try{F.get()}catch{return untrackedEnd(f),allowStateReadsEnd(s),!0}if(d.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(f),allowStateReadsEnd(s),!0}}return changeDependenciesStateTo0(d),untrackedEnd(f),allowStateReadsEnd(s),!1}}}function checkIfStateModificationsAreAllowed(d){}function trackDerivedFunction(d,s,f){var _=allowStateReadsStart(!0);changeDependenciesStateTo0(d),d.newObserving_=new Array(d.runId_===0?100:d.observing_.length),d.unboundDepsCount_=0,d.runId_=++globalState.runId;var S=globalState.trackingDerivation;globalState.trackingDerivation=d,globalState.inBatch++;var T;if(globalState.disableErrorBoundaries===!0)T=s.call(f);else try{T=s.call(f)}catch(F){T=new CaughtException(F)}return globalState.inBatch--,globalState.trackingDerivation=S,bindDependencies(d),allowStateReadsEnd(_),T}function bindDependencies(d){for(var s=d.observing_,f=d.observing_=d.newObserving_,_=IDerivationState_.UP_TO_DATE_,S=0,T=d.unboundDepsCount_,F=0;F<T;F++){var M=f[F];M.diffValue===0&&(M.diffValue=1,S!==F&&(f[S]=M),S++),M.dependenciesState_>_&&(_=M.dependenciesState_)}for(f.length=S,d.newObserving_=null,T=s.length;T--;){var P=s[T];P.diffValue===0&&removeObserver(P,d),P.diffValue=0}for(;S--;){var H=f[S];H.diffValue===1&&(H.diffValue=0,addObserver(H,d))}_!==IDerivationState_.UP_TO_DATE_&&(d.dependenciesState_=_,d.onBecomeStale_())}function clearObserving(d){var s=d.observing_;d.observing_=[];for(var f=s.length;f--;)removeObserver(s[f],d);d.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(d){var s=untrackedStart();try{return d()}finally{untrackedEnd(s)}}function untrackedStart(){var d=globalState.trackingDerivation;return globalState.trackingDerivation=null,d}function untrackedEnd(d){globalState.trackingDerivation=d}function allowStateReadsStart(d){var s=globalState.allowStateReads;return globalState.allowStateReads=d,s}function allowStateReadsEnd(d){globalState.allowStateReads=d}function changeDependenciesStateTo0(d){if(d.dependenciesState_!==IDerivationState_.UP_TO_DATE_){d.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var s=d.observing_,f=s.length;f--;)s[f].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var MobXGlobals=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=function(){var d=getGlobal();return d.__mobxInstanceCount>0&&!d.__mobxGlobals&&(canMergeGlobalState=!1),d.__mobxGlobals&&d.__mobxGlobals.version!==new MobXGlobals().version&&(canMergeGlobalState=!1),canMergeGlobalState?d.__mobxGlobals?(d.__mobxInstanceCount+=1,d.__mobxGlobals.UNCHANGED||(d.__mobxGlobals.UNCHANGED={}),d.__mobxGlobals):(d.__mobxInstanceCount=1,d.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||die(35)},1),new MobXGlobals)}();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var d=getGlobal();--d.__mobxInstanceCount===0&&(d.__mobxGlobals=void 0),globalState=new MobXGlobals}}function addObserver(d,s){d.observers_.add(s),d.lowestObserverState_>s.dependenciesState_&&(d.lowestObserverState_=s.dependenciesState_)}function removeObserver(d,s){d.observers_.delete(s),d.observers_.size===0&&queueForUnobservation(d)}function queueForUnobservation(d){d.isPendingUnobservation===!1&&(d.isPendingUnobservation=!0,globalState.pendingUnobservations.push(d))}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch===0){runReactions();for(var d=globalState.pendingUnobservations,s=0;s<d.length;s++){var f=d[s];f.isPendingUnobservation=!1,f.observers_.size===0&&(f.isBeingObserved&&(f.isBeingObserved=!1,f.onBUO()),f instanceof ComputedValue&&f.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(d){var s=globalState.trackingDerivation;return s!==null?(s.runId_!==d.lastAccessedBy_&&(d.lastAccessedBy_=s.runId_,s.newObserving_[s.unboundDepsCount_++]=d,!d.isBeingObserved&&globalState.trackingContext&&(d.isBeingObserved=!0,d.onBO())),d.isBeingObserved):(d.observers_.size===0&&globalState.inBatch>0&&queueForUnobservation(d),!1)}function propagateChanged(d){d.lowestObserverState_!==IDerivationState_.STALE_&&(d.lowestObserverState_=IDerivationState_.STALE_,d.observers_.forEach(function(s){s.dependenciesState_===IDerivationState_.UP_TO_DATE_&&s.onBecomeStale_(),s.dependenciesState_=IDerivationState_.STALE_}))}function propagateChangeConfirmed(d){d.lowestObserverState_!==IDerivationState_.STALE_&&(d.lowestObserverState_=IDerivationState_.STALE_,d.observers_.forEach(function(s){s.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?s.dependenciesState_=IDerivationState_.STALE_:s.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(d.lowestObserverState_=IDerivationState_.UP_TO_DATE_)}))}function propagateMaybeChanged(d){d.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(d.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,d.observers_.forEach(function(s){s.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(s.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,s.onBecomeStale_())}))}var Reaction=function(){function d(f,_,S,T){f===void 0&&(f="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=TraceMode.NONE,this.name_=f,this.onInvalidate_=_,this.errorHandler_=S,this.requiresObservable_=T}var s=d.prototype;return s.onBecomeStale_=function(){this.schedule_()},s.schedule_=function(){this.isScheduled||(this.isScheduled=!0,globalState.pendingReactions.push(this),runReactions())},s.runReaction_=function(){if(!this.isDisposed){startBatch(),this.isScheduled=!1;var _=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(S){this.reportExceptionInDerivation_(S)}}globalState.trackingContext=_,endBatch()}},s.track=function(_){if(!this.isDisposed){startBatch(),this.isRunning=!0;var S=globalState.trackingContext;globalState.trackingContext=this;var T=trackDerivedFunction(this,_,void 0);globalState.trackingContext=S,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&clearObserving(this),isCaughtException(T)&&this.reportExceptionInDerivation_(T.cause),endBatch()}},s.reportExceptionInDerivation_=function(_){var S=this;if(this.errorHandler_){this.errorHandler_(_,this);return}if(globalState.disableErrorBoundaries)throw _;var T="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(T,_),globalState.globalReactionErrorHandlers.forEach(function(F){return F(_,S)})},s.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(startBatch(),clearObserving(this),endBatch()))},s.getDisposer_=function(_){var S=this,T=function F(){S.dispose(),_==null||_.removeEventListener==null||_.removeEventListener("abort",F)};return _==null||_.addEventListener==null||_.addEventListener("abort",T),T[$mobx]=this,T},s.toString=function(){return"Reaction["+this.name_+"]"},s.trace=function(_){},_createClass(d,[{key:"isDisposed",get:function(){return getFlag(this.flags_,d.isDisposedMask_)},set:function(_){this.flags_=setFlag(this.flags_,d.isDisposedMask_,_)}},{key:"isScheduled",get:function(){return getFlag(this.flags_,d.isScheduledMask_)},set:function(_){this.flags_=setFlag(this.flags_,d.isScheduledMask_,_)}},{key:"isTrackPending",get:function(){return getFlag(this.flags_,d.isTrackPendingMask_)},set:function(_){this.flags_=setFlag(this.flags_,d.isTrackPendingMask_,_)}},{key:"isRunning",get:function(){return getFlag(this.flags_,d.isRunningMask_)},set:function(_){this.flags_=setFlag(this.flags_,d.isRunningMask_,_)}},{key:"diffValue",get:function(){return getFlag(this.flags_,d.diffValueMask_)?1:0},set:function(_){this.flags_=setFlag(this.flags_,d.diffValueMask_,_===1)}}])}();Reaction.isDisposedMask_=1;Reaction.isScheduledMask_=2;Reaction.isTrackPendingMask_=4;Reaction.isRunningMask_=8;Reaction.diffValueMask_=16;var MAX_REACTION_ITERATIONS=100,reactionScheduler=function(s){return s()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var d=globalState.pendingReactions,s=0;d.length>0;){++s===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+d[0]),d.splice(0));for(var f=d.splice(0),_=0,S=f.length;_<S;_++)f[_].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(d){var s=reactionScheduler;reactionScheduler=function(_){return d(function(){return s(_)})}}function isSpyEnabled(){return!1}function spyReport(d){}function spyReportStart(d){}function spyReportEnd(d){}function spy(d){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(d){var s=function(_,S){if(isFunction$2(_))return createAction(_.name||DEFAULT_ACTION_NAME,_,d);if(isFunction$2(S))return createAction(_,S,d);if(is20223Decorator(S))return(d?autoActionAnnotation:actionAnnotation).decorate_20223_(_,S);if(isStringish(S))return storeAnnotation(_,S,d?autoActionAnnotation:actionAnnotation);if(isStringish(_))return createDecoratorAnnotation(createActionAnnotation(d?AUTOACTION:ACTION,{name:_,autoAction:d}))};return s}var action=createActionFactory(!1);Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);Object.assign(autoAction,autoActionAnnotation);action.bound=createDecoratorAnnotation(actionBoundAnnotation);autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);function runInAction(d){return executeAction(d.name||DEFAULT_ACTION_NAME,!1,d,this,void 0)}function isAction(d){return isFunction$2(d)&&d.isMobxAction===!0}function autorun(d,s){var f,_,S,T;s===void 0&&(s=EMPTY_OBJECT$1);var F=(f=(_=s)==null?void 0:_.name)!=null?f:"Autorun",M=!s.scheduler&&!s.delay,P;if(M)P=new Reaction(F,function(){this.track(K)},s.onError,s.requiresObservable);else{var H=createSchedulerFromOptions(s),J=!1;P=new Reaction(F,function(){J||(J=!0,H(function(){J=!1,P.isDisposed||P.track(K)}))},s.onError,s.requiresObservable)}function K(){d(P)}return(S=s)!=null&&(S=S.signal)!=null&&S.aborted||P.schedule_(),P.getDisposer_((T=s)==null?void 0:T.signal)}var run=function(s){return s()};function createSchedulerFromOptions(d){return d.scheduler?d.scheduler:d.delay?function(s){return setTimeout(s,d.delay)}:run}function reaction(d,s,f){var _,S,T;f===void 0&&(f=EMPTY_OBJECT$1);var F=(_=f.name)!=null?_:"Reaction",M=action(F,f.onError?wrapErrorHandler(f.onError,s):s),P=!f.scheduler&&!f.delay,H=createSchedulerFromOptions(f),J=!0,K=!1,oe,se=f.compareStructural?comparer.structural:f.equals||comparer.default,ae=new Reaction(F,function(){J||P?ge():K||(K=!0,H(ge))},f.onError,f.requiresObservable);function ge(){if(K=!1,!ae.isDisposed){var he=!1,Be=oe;ae.track(function(){var pe=allowStateChanges(!1,function(){return d(ae)});he=J||!se(oe,pe),oe=pe}),(J&&f.fireImmediately||!J&&he)&&M(oe,Be,ae),J=!1}}return(S=f)!=null&&(S=S.signal)!=null&&S.aborted||ae.schedule_(),ae.getDisposer_((T=f)==null?void 0:T.signal)}function wrapErrorHandler(d,s){return function(){try{return s.apply(this,arguments)}catch(f){d.call(this,f)}}}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(d,s,f){return interceptHook(ON_BECOME_OBSERVED,d,s,f)}function onBecomeUnobserved(d,s,f){return interceptHook(ON_BECOME_UNOBSERVED,d,s,f)}function interceptHook(d,s,f,_){var S=getAtom(s),T=isFunction$2(_)?_:f,F=d+"L";return S[F]?S[F].add(T):S[F]=new Set([T]),function(){var M=S[F];M&&(M.delete(T),M.size===0&&delete S[F])}}var NEVER$1="never",ALWAYS="always",OBSERVED="observed";function configure(d){d.isolateGlobalState===!0&&isolateGlobalState();var s=d.useProxies,f=d.enforceActions;if(s!==void 0&&(globalState.useProxies=s===ALWAYS?!0:s===NEVER$1?!1:typeof Proxy<"u"),s==="ifavailable"&&(globalState.verifyProxies=!0),f!==void 0){var _=f===ALWAYS?ALWAYS:f===OBSERVED;globalState.enforceActions=_,globalState.allowStateChanges=!(_===!0||_===ALWAYS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(S){S in d&&(globalState[S]=!!d[S])}),globalState.allowStateReads=!globalState.observableRequiresReaction,d.reactionScheduler&&setReactionScheduler(d.reactionScheduler)}function extendObservable(d,s,f,_){var S=getOwnPropertyDescriptors(s);return initObservable(function(){var T=asObservableObject(d,_)[$mobx];ownKeys$2(S).forEach(function(F){T.extend_(F,S[F],f&&F in f?f[F]:!0)})}),d}function getDependencyTree(d,s){return nodeToDependencyTree(getAtom(d,s))}function nodeToDependencyTree(d){var s={name:d.name_};return d.observing_&&d.observing_.length>0&&(s.dependencies=unique$1(d.observing_).map(nodeToDependencyTree)),s}function unique$1(d){return Array.from(new Set(d))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign(function(s,f){if(is20223Decorator(f))return flowAnnotation.decorate_20223_(s,f);if(isStringish(f))return storeAnnotation(s,f,flowAnnotation);var _=s,S=_.name||"<unnamed flow>",T=function(){var M=this,P=arguments,H=++generatorId,J=action(S+" - runid: "+H+" - init",_).apply(M,P),K,oe=void 0,se=new Promise(function(ae,ge){var he=0;K=ge;function Be(Re){oe=void 0;var Fe;try{Fe=action(S+" - runid: "+H+" - yield "+he++,J.next).call(J,Re)}catch(Me){return ge(Me)}be(Fe)}function pe(Re){oe=void 0;var Fe;try{Fe=action(S+" - runid: "+H+" - yield "+he++,J.throw).call(J,Re)}catch(Me){return ge(Me)}be(Fe)}function be(Re){if(isFunction$2(Re==null?void 0:Re.then)){Re.then(be,ge);return}return Re.done?ae(Re.value):(oe=Promise.resolve(Re.value),oe.then(Be,pe))}Be(void 0)});return se.cancel=action(S+" - runid: "+H+" - cancel",function(){try{oe&&cancelPromise(oe);var ae=J.return(void 0),ge=Promise.resolve(ae.value);ge.then(noop$a,noop$a),cancelPromise(ge),K(new FlowCancellationError)}catch(he){K(he)}}),se};return T.isMobXFlow=!0,T},flowAnnotation);flow.bound=createDecoratorAnnotation(flowBoundAnnotation);function cancelPromise(d){isFunction$2(d.cancel)&&d.cancel()}function isFlow(d){return(d==null?void 0:d.isMobXFlow)===!0}function _isObservable(d,s){return d?isObservableObject(d)||!!d[$mobx]||isAtom(d)||isReaction(d)||isComputedValue(d):!1}function isObservable(d){return _isObservable(d)}function apiOwnKeys(d){if(isObservableObject(d))return d[$mobx].ownKeys_();die(38)}function cache$2(d,s,f){return d.set(s,f),f}function toJSHelper(d,s){if(d==null||typeof d!="object"||d instanceof Date||!isObservable(d))return d;if(isObservableValue(d)||isComputedValue(d))return toJSHelper(d.get(),s);if(s.has(d))return s.get(d);if(isObservableArray(d)){var f=cache$2(s,d,new Array(d.length));return d.forEach(function(F,M){f[M]=toJSHelper(F,s)}),f}if(isObservableSet(d)){var _=cache$2(s,d,new Set);return d.forEach(function(F){_.add(toJSHelper(F,s))}),_}if(isObservableMap(d)){var S=cache$2(s,d,new Map);return d.forEach(function(F,M){S.set(M,toJSHelper(F,s))}),S}else{var T=cache$2(s,d,{});return apiOwnKeys(d).forEach(function(F){objectPrototype.propertyIsEnumerable.call(d,F)&&(T[F]=toJSHelper(d[F],s))}),T}}function toJS(d,s){return toJSHelper(d,new Map)}function transaction(d,s){s===void 0&&(s=void 0),startBatch();try{return d.apply(s)}finally{endBatch()}}function getAdm(d){return d[$mobx]}var objectProxyTraps={has:function(s,f){return getAdm(s).has_(f)},get:function(s,f){return getAdm(s).get_(f)},set:function(s,f,_){var S;return isStringish(f)?(S=getAdm(s).set_(f,_,!0))!=null?S:!0:!1},deleteProperty:function(s,f){var _;return isStringish(f)?(_=getAdm(s).delete_(f,!0))!=null?_:!0:!1},defineProperty:function(s,f,_){var S;return(S=getAdm(s).defineProperty_(f,_))!=null?S:!0},ownKeys:function(s){return getAdm(s).ownKeys_()},preventExtensions:function(s){die(13)}};function asDynamicObservableObject(d,s){var f,_;return assertProxies(),d=asObservableObject(d,s),(_=(f=d[$mobx]).proxy_)!=null?_:f.proxy_=new Proxy(d,objectProxyTraps)}function hasInterceptors(d){return d.interceptors_!==void 0&&d.interceptors_.length>0}function registerInterceptor(d,s){var f=d.interceptors_||(d.interceptors_=[]);return f.push(s),once(function(){var _=f.indexOf(s);_!==-1&&f.splice(_,1)})}function interceptChange(d,s){var f=untrackedStart();try{for(var _=[].concat(d.interceptors_||[]),S=0,T=_.length;S<T&&(s=_[S](s),s&&!s.type&&die(14),!!s);S++);return s}finally{untrackedEnd(f)}}function hasListeners(d){return d.changeListeners_!==void 0&&d.changeListeners_.length>0}function registerListener(d,s){var f=d.changeListeners_||(d.changeListeners_=[]);return f.push(s),once(function(){var _=f.indexOf(s);_!==-1&&f.splice(_,1)})}function notifyListeners(d,s){var f=untrackedStart(),_=d.changeListeners_;if(_){_=_.slice();for(var S=0,T=_.length;S<T;S++)_[S](s);untrackedEnd(f)}}function makeObservable(d,s,f){return initObservable(function(){var _,S=asObservableObject(d,f)[$mobx];(_=s)!=null||(s=collectStoredAnnotations(d)),ownKeys$2(s).forEach(function(T){return S.make_(T,s[T])})}),d}var keysSymbol=Symbol("mobx-keys");function makeAutoObservable(d,s,f){return isPlainObject$2(d)?extendObservable(d,d,s,f):(initObservable(function(){var _=asObservableObject(d,f)[$mobx];if(!d[keysSymbol]){var S=Object.getPrototypeOf(d),T=new Set([].concat(ownKeys$2(d),ownKeys$2(S)));T.delete("constructor"),T.delete($mobx),addHiddenProp(S,keysSymbol,T)}d[keysSymbol].forEach(function(F){return _.make_(F,s&&F in s?s[F]:!0)})}),d)}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function(s,f){var _=s[$mobx];return f===$mobx?_:f==="length"?_.getArrayLength_():typeof f=="string"&&!isNaN(f)?_.get_(parseInt(f)):hasProp(arrayExtensions,f)?arrayExtensions[f]:s[f]},set:function(s,f,_){var S=s[$mobx];return f==="length"&&S.setArrayLength_(_),typeof f=="symbol"||isNaN(f)?s[f]=_:S.set_(parseInt(f),_),!0},preventExtensions:function(){die(15)}},ObservableArrayAdministration=function(){function d(f,_,S,T){f===void 0&&(f="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=S,this.legacyMode_=T,this.atom_=new Atom(f),this.enhancer_=function(F,M){return _(F,M,"ObservableArray[..]")}}var s=d.prototype;return s.dehanceValue_=function(_){return this.dehancer!==void 0?this.dehancer(_):_},s.dehanceValues_=function(_){return this.dehancer!==void 0&&_.length>0?_.map(this.dehancer):_},s.intercept_=function(_){return registerInterceptor(this,_)},s.observe_=function(_,S){return S===void 0&&(S=!1),S&&_({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,_)},s.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},s.setArrayLength_=function(_){(typeof _!="number"||isNaN(_)||_<0)&&die("Out of range: "+_);var S=this.values_.length;if(_!==S)if(_>S){for(var T=new Array(_-S),F=0;F<_-S;F++)T[F]=void 0;this.spliceWithArray_(S,0,T)}else this.spliceWithArray_(_,S-_)},s.updateArrayLength_=function(_,S){_!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=S,this.legacyMode_&&S>0&&reserveArrayBuffer(_+S+1)},s.spliceWithArray_=function(_,S,T){var F=this;this.atom_;var M=this.values_.length;if(_===void 0?_=0:_>M?_=M:_<0&&(_=Math.max(0,M+_)),arguments.length===1?S=M-_:S==null?S=0:S=Math.max(0,Math.min(S,M-_)),T===void 0&&(T=EMPTY_ARRAY$3),hasInterceptors(this)){var P=interceptChange(this,{object:this.proxy_,type:SPLICE,index:_,removedCount:S,added:T});if(!P)return EMPTY_ARRAY$3;S=P.removedCount,T=P.added}if(T=T.length===0?T:T.map(function(K){return F.enhancer_(K,void 0)}),this.legacyMode_){var H=T.length-S;this.updateArrayLength_(M,H)}var J=this.spliceItemsIntoValues_(_,S,T);return(S!==0||T.length!==0)&&this.notifyArraySplice_(_,T,J),this.dehanceValues_(J)},s.spliceItemsIntoValues_=function(_,S,T){if(T.length<MAX_SPLICE_SIZE){var F;return(F=this.values_).splice.apply(F,[_,S].concat(T))}else{var M=this.values_.slice(_,_+S),P=this.values_.slice(_+S);this.values_.length+=T.length-S;for(var H=0;H<T.length;H++)this.values_[_+H]=T[H];for(var J=0;J<P.length;J++)this.values_[_+T.length+J]=P[J];return M}},s.notifyArrayChildUpdate_=function(_,S,T){var F=!this.owned_&&isSpyEnabled(),M=hasListeners(this),P=M||F?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:_,newValue:S,oldValue:T}:null;this.atom_.reportChanged(),M&&notifyListeners(this,P)},s.notifyArraySplice_=function(_,S,T){var F=!this.owned_&&isSpyEnabled(),M=hasListeners(this),P=M||F?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:_,removed:T,added:S,removedCount:T.length,addedCount:S.length}:null;this.atom_.reportChanged(),M&&notifyListeners(this,P)},s.get_=function(_){if(this.legacyMode_&&_>=this.values_.length){console.warn("[mobx] Out of bounds read: "+_);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[_])},s.set_=function(_,S){var T=this.values_;if(this.legacyMode_&&_>T.length&&die(17,_,T.length),_<T.length){this.atom_;var F=T[_];if(hasInterceptors(this)){var M=interceptChange(this,{type:UPDATE,object:this.proxy_,index:_,newValue:S});if(!M)return;S=M.newValue}S=this.enhancer_(S,F);var P=S!==F;P&&(T[_]=S,this.notifyArrayChildUpdate_(_,S,F))}else{for(var H=new Array(_+1-T.length),J=0;J<H.length-1;J++)H[J]=void 0;H[H.length-1]=S,this.spliceWithArray_(T.length,0,H)}},d}();function createObservableArray(d,s,f,_){return f===void 0&&(f="ObservableArray"),_===void 0&&(_=!1),assertProxies(),initObservable(function(){var S=new ObservableArrayAdministration(f,s,_,!1);addHiddenFinalProp(S.values_,$mobx,S);var T=new Proxy(S.values_,arrayTraps);return S.proxy_=T,d&&d.length&&S.spliceWithArray_(0,0,d),T})}var arrayExtensions={clear:function(){return this.splice(0)},replace:function(s){var f=this[$mobx];return f.spliceWithArray_(0,f.values_.length,s)},toJSON:function(){return this.slice()},splice:function(s,f){for(var _=arguments.length,S=new Array(_>2?_-2:0),T=2;T<_;T++)S[T-2]=arguments[T];var F=this[$mobx];switch(arguments.length){case 0:return[];case 1:return F.spliceWithArray_(s);case 2:return F.spliceWithArray_(s,f)}return F.spliceWithArray_(s,f,S)},spliceWithArray:function(s,f,_){return this[$mobx].spliceWithArray_(s,f,_)},push:function(){for(var s=this[$mobx],f=arguments.length,_=new Array(f),S=0;S<f;S++)_[S]=arguments[S];return s.spliceWithArray_(s.values_.length,0,_),s.values_.length},pop:function(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var s=this[$mobx],f=arguments.length,_=new Array(f),S=0;S<f;S++)_[S]=arguments[S];return s.spliceWithArray_(0,0,_),s.values_.length},reverse:function(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){globalState.trackingDerivation&&die(37,"sort");var s=this.slice();return s.sort.apply(s,arguments),this.replace(s),this},remove:function(s){var f=this[$mobx],_=f.dehanceValues_(f.values_).indexOf(s);return _>-1?(this.splice(_,1),!0):!1}};addArrayExtension("at",simpleFunc);addArrayExtension("concat",simpleFunc);addArrayExtension("flat",simpleFunc);addArrayExtension("includes",simpleFunc);addArrayExtension("indexOf",simpleFunc);addArrayExtension("join",simpleFunc);addArrayExtension("lastIndexOf",simpleFunc);addArrayExtension("slice",simpleFunc);addArrayExtension("toString",simpleFunc);addArrayExtension("toLocaleString",simpleFunc);addArrayExtension("toSorted",simpleFunc);addArrayExtension("toSpliced",simpleFunc);addArrayExtension("with",simpleFunc);addArrayExtension("every",mapLikeFunc);addArrayExtension("filter",mapLikeFunc);addArrayExtension("find",mapLikeFunc);addArrayExtension("findIndex",mapLikeFunc);addArrayExtension("findLast",mapLikeFunc);addArrayExtension("findLastIndex",mapLikeFunc);addArrayExtension("flatMap",mapLikeFunc);addArrayExtension("forEach",mapLikeFunc);addArrayExtension("map",mapLikeFunc);addArrayExtension("some",mapLikeFunc);addArrayExtension("toReversed",mapLikeFunc);addArrayExtension("reduce",reduceLikeFunc);addArrayExtension("reduceRight",reduceLikeFunc);function addArrayExtension(d,s){typeof Array.prototype[d]=="function"&&(arrayExtensions[d]=s(d))}function simpleFunc(d){return function(){var s=this[$mobx];s.atom_.reportObserved();var f=s.dehanceValues_(s.values_);return f[d].apply(f,arguments)}}function mapLikeFunc(d){return function(s,f){var _=this,S=this[$mobx];S.atom_.reportObserved();var T=S.dehanceValues_(S.values_);return T[d](function(F,M){return s.call(f,F,M,_)})}}function reduceLikeFunc(d){return function(){var s=this,f=this[$mobx];f.atom_.reportObserved();var _=f.dehanceValues_(f.values_),S=arguments[0];return arguments[0]=function(T,F,M){return S(T,F,M,s)},_[d].apply(_,arguments)}}var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(d){return isObject$b(d)&&isObservableArrayAdministration(d[$mobx])}var ObservableMapMarker={},ADD="add",DELETE="delete",ObservableMap=function(){function d(f,_,S){var T=this;_===void 0&&(_=deepEnhancer),S===void 0&&(S="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=_,this.name_=S,isFunction$2(Map)||die(18),initObservable(function(){T.keysAtom_=createAtom("ObservableMap.keys()"),T.data_=new Map,T.hasMap_=new Map,f&&T.merge(f)})}var s=d.prototype;return s.has_=function(_){return this.data_.has(_)},s.has=function(_){var S=this;if(!globalState.trackingDerivation)return this.has_(_);var T=this.hasMap_.get(_);if(!T){var F=T=new ObservableValue(this.has_(_),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(_,F),onBecomeUnobserved(F,function(){return S.hasMap_.delete(_)})}return T.get()},s.set=function(_,S){var T=this.has_(_);if(hasInterceptors(this)){var F=interceptChange(this,{type:T?UPDATE:ADD,object:this,newValue:S,name:_});if(!F)return this;S=F.newValue}return T?this.updateValue_(_,S):this.addValue_(_,S),this},s.delete=function(_){var S=this;if(this.keysAtom_,hasInterceptors(this)){var T=interceptChange(this,{type:DELETE,object:this,name:_});if(!T)return!1}if(this.has_(_)){var F=isSpyEnabled(),M=hasListeners(this),P=M||F?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(_).value_,name:_}:null;return transaction(function(){var H;S.keysAtom_.reportChanged(),(H=S.hasMap_.get(_))==null||H.setNewValue_(!1);var J=S.data_.get(_);J.setNewValue_(void 0),S.data_.delete(_)}),M&&notifyListeners(this,P),!0}return!1},s.updateValue_=function(_,S){var T=this.data_.get(_);if(S=T.prepareNewValue_(S),S!==globalState.UNCHANGED){var F=isSpyEnabled(),M=hasListeners(this),P=M||F?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:T.value_,name:_,newValue:S}:null;T.setNewValue_(S),M&&notifyListeners(this,P)}},s.addValue_=function(_,S){var T=this;this.keysAtom_,transaction(function(){var H,J=new ObservableValue(S,T.enhancer_,"ObservableMap.key",!1);T.data_.set(_,J),S=J.value_,(H=T.hasMap_.get(_))==null||H.setNewValue_(!0),T.keysAtom_.reportChanged()});var F=isSpyEnabled(),M=hasListeners(this),P=M||F?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:_,newValue:S}:null;M&&notifyListeners(this,P)},s.get=function(_){return this.has(_)?this.dehanceValue_(this.data_.get(_).get()):this.dehanceValue_(void 0)},s.dehanceValue_=function(_){return this.dehancer!==void 0?this.dehancer(_):_},s.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},s.values=function(){var _=this,S=this.keys();return makeIterable({next:function(){var F=S.next(),M=F.done,P=F.value;return{done:M,value:M?void 0:_.get(P)}}})},s.entries=function(){var _=this,S=this.keys();return makeIterable({next:function(){var F=S.next(),M=F.done,P=F.value;return{done:M,value:M?void 0:[P,_.get(P)]}}})},s[Symbol.iterator]=function(){return this.entries()},s.forEach=function(_,S){for(var T=_createForOfIteratorHelperLoose(this),F;!(F=T()).done;){var M=F.value,P=M[0],H=M[1];_.call(S,H,P,this)}},s.merge=function(_){var S=this;return isObservableMap(_)&&(_=new Map(_)),transaction(function(){isPlainObject$2(_)?getPlainObjectKeys(_).forEach(function(T){return S.set(T,_[T])}):Array.isArray(_)?_.forEach(function(T){var F=T[0],M=T[1];return S.set(F,M)}):isES6Map(_)?(isPlainES6Map(_)||die(19,_),_.forEach(function(T,F){return S.set(F,T)})):_!=null&&die(20,_)}),this},s.clear=function(){var _=this;transaction(function(){untracked(function(){for(var S=_createForOfIteratorHelperLoose(_.keys()),T;!(T=S()).done;){var F=T.value;_.delete(F)}})})},s.replace=function(_){var S=this;return transaction(function(){for(var T=convertToMap(_),F=new Map,M=!1,P=_createForOfIteratorHelperLoose(S.data_.keys()),H;!(H=P()).done;){var J=H.value;if(!T.has(J)){var K=S.delete(J);if(K)M=!0;else{var oe=S.data_.get(J);F.set(J,oe)}}}for(var se=_createForOfIteratorHelperLoose(T.entries()),ae;!(ae=se()).done;){var ge=ae.value,he=ge[0],Be=ge[1],pe=S.data_.has(he);if(S.set(he,Be),S.data_.has(he)){var be=S.data_.get(he);F.set(he,be),pe||(M=!0)}}if(!M)if(S.data_.size!==F.size)S.keysAtom_.reportChanged();else for(var Re=S.data_.keys(),Fe=F.keys(),Me=Re.next(),ve=Fe.next();!Me.done;){if(Me.value!==ve.value){S.keysAtom_.reportChanged();break}Me=Re.next(),ve=Fe.next()}S.data_=F}),this},s.toString=function(){return"[object ObservableMap]"},s.toJSON=function(){return Array.from(this)},s.observe_=function(_,S){return registerListener(this,_)},s.intercept_=function(_){return registerInterceptor(this,_)},_createClass(d,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function convertToMap(d){if(isES6Map(d)||isObservableMap(d))return d;if(Array.isArray(d))return new Map(d);if(isPlainObject$2(d)){var s=new Map;for(var f in d)s.set(f,d[f]);return s}else return die(21,d)}var ObservableSetMarker={},ObservableSet=function(){function d(f,_,S){var T=this;_===void 0&&(_=deepEnhancer),S===void 0&&(S="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=S,isFunction$2(Set)||die(22),this.enhancer_=function(F,M){return _(F,M,S)},initObservable(function(){T.atom_=createAtom(T.name_),f&&T.replace(f)})}var s=d.prototype;return s.dehanceValue_=function(_){return this.dehancer!==void 0?this.dehancer(_):_},s.clear=function(){var _=this;transaction(function(){untracked(function(){for(var S=_createForOfIteratorHelperLoose(_.data_.values()),T;!(T=S()).done;){var F=T.value;_.delete(F)}})})},s.forEach=function(_,S){for(var T=_createForOfIteratorHelperLoose(this),F;!(F=T()).done;){var M=F.value;_.call(S,M,M,this)}},s.add=function(_){var S=this;if(this.atom_,hasInterceptors(this)){var T=interceptChange(this,{type:ADD,object:this,newValue:_});if(!T)return this}if(!this.has(_)){transaction(function(){S.data_.add(S.enhancer_(_,void 0)),S.atom_.reportChanged()});var F=!1,M=hasListeners(this),P=M||F?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:_}:null;M&&notifyListeners(this,P)}return this},s.delete=function(_){var S=this;if(hasInterceptors(this)){var T=interceptChange(this,{type:DELETE,object:this,oldValue:_});if(!T)return!1}if(this.has(_)){var F=!1,M=hasListeners(this),P=M||F?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:_}:null;return transaction(function(){S.atom_.reportChanged(),S.data_.delete(_)}),M&&notifyListeners(this,P),!0}return!1},s.has=function(_){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(_))},s.entries=function(){var _=0,S=Array.from(this.keys()),T=Array.from(this.values());return makeIterable({next:function(){var M=_;return _+=1,M<T.length?{value:[S[M],T[M]],done:!1}:{done:!0}}})},s.keys=function(){return this.values()},s.values=function(){this.atom_.reportObserved();var _=this,S=0,T=Array.from(this.data_.values());return makeIterable({next:function(){return S<T.length?{value:_.dehanceValue_(T[S++]),done:!1}:{done:!0}}})},s.intersection=function(_){if(isES6Set(_)&&!isObservableSet(_))return _.intersection(this);var S=new Set(this);return S.intersection(_)},s.union=function(_){if(isES6Set(_)&&!isObservableSet(_))return _.union(this);var S=new Set(this);return S.union(_)},s.difference=function(_){return new Set(this).difference(_)},s.symmetricDifference=function(_){if(isES6Set(_)&&!isObservableSet(_))return _.symmetricDifference(this);var S=new Set(this);return S.symmetricDifference(_)},s.isSubsetOf=function(_){return new Set(this).isSubsetOf(_)},s.isSupersetOf=function(_){return new Set(this).isSupersetOf(_)},s.isDisjointFrom=function(_){if(isES6Set(_)&&!isObservableSet(_))return _.isDisjointFrom(this);var S=new Set(this);return S.isDisjointFrom(_)},s.replace=function(_){var S=this;return isObservableSet(_)&&(_=new Set(_)),transaction(function(){Array.isArray(_)?(S.clear(),_.forEach(function(T){return S.add(T)})):isES6Set(_)?(S.clear(),_.forEach(function(T){return S.add(T)})):_!=null&&die("Cannot initialize set from "+_)}),this},s.observe_=function(_,S){return registerListener(this,_)},s.intercept_=function(_){return registerInterceptor(this,_)},s.toJSON=function(){return Array.from(this)},s.toString=function(){return"[object ObservableSet]"},s[Symbol.iterator]=function(){return this.values()},_createClass(d,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet),descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=function(){function d(f,_,S,T){_===void 0&&(_=new Map),T===void 0&&(T=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=f,this.values_=_,this.name_=S,this.defaultAnnotation_=T,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject$2(this.target_)}var s=d.prototype;return s.getObservablePropValue_=function(_){return this.values_.get(_).get()},s.setObservablePropValue_=function(_,S){var T=this.values_.get(_);if(T instanceof ComputedValue)return T.set(S),!0;if(hasInterceptors(this)){var F=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:_,newValue:S});if(!F)return null;S=F.newValue}if(S=T.prepareNewValue_(S),S!==globalState.UNCHANGED){var M=hasListeners(this),P=!1,H=M||P?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:T.value_,name:_,newValue:S}:null;T.setNewValue_(S),M&&notifyListeners(this,H)}return!0},s.get_=function(_){return globalState.trackingDerivation&&!hasProp(this.target_,_)&&this.has_(_),this.target_[_]},s.set_=function(_,S,T){return T===void 0&&(T=!1),hasProp(this.target_,_)?this.values_.has(_)?this.setObservablePropValue_(_,S):T?Reflect.set(this.target_,_,S):(this.target_[_]=S,!0):this.extend_(_,{value:S,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,T)},s.has_=function(_){if(!globalState.trackingDerivation)return _ in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var S=this.pendingKeys_.get(_);return S||(S=new ObservableValue(_ in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(_,S)),S.get()},s.make_=function(_,S){if(S===!0&&(S=this.defaultAnnotation_),S!==!1){if(!(_ in this.target_)){var T;if((T=this.target_[storedAnnotationsSymbol])!=null&&T[_])return;die(1,S.annotationType_,this.name_+"."+_.toString())}for(var F=this.target_;F&&F!==objectPrototype;){var M=getDescriptor(F,_);if(M){var P=S.make_(this,_,M,F);if(P===0)return;if(P===1)break}F=Object.getPrototypeOf(F)}recordAnnotationApplied(this,S,_)}},s.extend_=function(_,S,T,F){if(F===void 0&&(F=!1),T===!0&&(T=this.defaultAnnotation_),T===!1)return this.defineProperty_(_,S,F);var M=T.extend_(this,_,S,F);return M&&recordAnnotationApplied(this,T,_),M},s.defineProperty_=function(_,S,T){T===void 0&&(T=!1),this.keysAtom_;try{startBatch();var F=this.delete_(_);if(!F)return F;if(hasInterceptors(this)){var M=interceptChange(this,{object:this.proxy_||this.target_,name:_,type:ADD,newValue:S.value});if(!M)return null;var P=M.newValue;S.value!==P&&(S=_extends$9({},S,{value:P}))}if(T){if(!Reflect.defineProperty(this.target_,_,S))return!1}else defineProperty(this.target_,_,S);this.notifyPropertyAddition_(_,S.value)}finally{endBatch()}return!0},s.defineObservableProperty_=function(_,S,T,F){F===void 0&&(F=!1),this.keysAtom_;try{startBatch();var M=this.delete_(_);if(!M)return M;if(hasInterceptors(this)){var P=interceptChange(this,{object:this.proxy_||this.target_,name:_,type:ADD,newValue:S});if(!P)return null;S=P.newValue}var H=getCachedObservablePropDescriptor(_),J={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:H.get,set:H.set};if(F){if(!Reflect.defineProperty(this.target_,_,J))return!1}else defineProperty(this.target_,_,J);var K=new ObservableValue(S,T,"ObservableObject.key",!1);this.values_.set(_,K),this.notifyPropertyAddition_(_,K.value_)}finally{endBatch()}return!0},s.defineComputedProperty_=function(_,S,T){T===void 0&&(T=!1),this.keysAtom_;try{startBatch();var F=this.delete_(_);if(!F)return F;if(hasInterceptors(this)){var M=interceptChange(this,{object:this.proxy_||this.target_,name:_,type:ADD,newValue:void 0});if(!M)return null}S.name||(S.name="ObservableObject.key"),S.context=this.proxy_||this.target_;var P=getCachedObservablePropDescriptor(_),H={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:P.get,set:P.set};if(T){if(!Reflect.defineProperty(this.target_,_,H))return!1}else defineProperty(this.target_,_,H);this.values_.set(_,new ComputedValue(S)),this.notifyPropertyAddition_(_,void 0)}finally{endBatch()}return!0},s.delete_=function(_,S){if(S===void 0&&(S=!1),this.keysAtom_,!hasProp(this.target_,_))return!0;if(hasInterceptors(this)){var T=interceptChange(this,{object:this.proxy_||this.target_,name:_,type:REMOVE});if(!T)return null}try{var F;startBatch();var M=hasListeners(this),P=!1,H=this.values_.get(_),J=void 0;if(!H&&(M||P)){var K;J=(K=getDescriptor(this.target_,_))==null?void 0:K.value}if(S){if(!Reflect.deleteProperty(this.target_,_))return!1}else delete this.target_[_];if(H&&(this.values_.delete(_),H instanceof ObservableValue&&(J=H.value_),propagateChanged(H)),this.keysAtom_.reportChanged(),(F=this.pendingKeys_)==null||(F=F.get(_))==null||F.set(_ in this.target_),M||P){var oe={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:J,name:_};M&&notifyListeners(this,oe)}}finally{endBatch()}return!0},s.observe_=function(_,S){return registerListener(this,_)},s.intercept_=function(_){return registerInterceptor(this,_)},s.notifyPropertyAddition_=function(_,S){var T,F=hasListeners(this),M=!1;if(F||M){var P=F||M?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:_,newValue:S}:null;F&&notifyListeners(this,P)}(T=this.pendingKeys_)==null||(T=T.get(_))==null||T.set(!0),this.keysAtom_.reportChanged()},s.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys$2(this.target_)},s.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},d}();function asObservableObject(d,s){var f;if(hasProp(d,$mobx))return d;var _=(f=s==null?void 0:s.name)!=null?f:"ObservableObject",S=new ObservableObjectAdministration(d,new Map,String(_),getAnnotationFromOptions(s));return addHiddenProp(d,$mobx,S),d}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(d){return descriptorCache[d]||(descriptorCache[d]={get:function(){return this[$mobx].getObservablePropValue_(d)},set:function(f){return this[$mobx].setObservablePropValue_(d,f)}})}function isObservableObject(d){return isObject$b(d)?isObservableObjectAdministration(d[$mobx]):!1}function recordAnnotationApplied(d,s,f){var _;(_=d.target_[storedAnnotationsSymbol])==null||delete _[f]}var ENTRY_0=createArrayEntryDescriptor(0),safariPrototypeSetterInheritanceBug=function(){var d=!1,s={};return Object.defineProperty(s,"0",{set:function(){d=!0}}),Object.create(s)[0]=1,d===!1}(),OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function(){};function inherit$1(d,s){Object.setPrototypeOf?Object.setPrototypeOf(d.prototype,s):d.prototype.__proto__!==void 0?d.prototype.__proto__=s:d.prototype=s}inherit$1(StubArray,Array.prototype);var LegacyObservableArray=function(d){function s(_,S,T,F){var M;return T===void 0&&(T="ObservableArray"),F===void 0&&(F=!1),M=d.call(this)||this,initObservable(function(){var P=new ObservableArrayAdministration(T,S,F,!0);P.proxy_=M,addHiddenFinalProp(M,$mobx,P),_&&_.length&&M.spliceWithArray(0,0,_),safariPrototypeSetterInheritanceBug&&Object.defineProperty(M,"0",ENTRY_0)}),M}_inheritsLoose(s,d);var f=s.prototype;return f.concat=function(){this[$mobx].atom_.reportObserved();for(var S=arguments.length,T=new Array(S),F=0;F<S;F++)T[F]=arguments[F];return Array.prototype.concat.apply(this.slice(),T.map(function(M){return isObservableArray(M)?M.slice():M}))},f[Symbol.iterator]=function(){var _=this,S=0;return makeIterable({next:function(){return S<_.length?{value:_[S++],done:!1}:{done:!0,value:void 0}}})},_createClass(s,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(S){this[$mobx].setArrayLength_(S)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(StubArray);Object.entries(arrayExtensions).forEach(function(d){var s=d[0],f=d[1];s!=="concat"&&addHiddenProp(LegacyObservableArray.prototype,s,f)});function createArrayEntryDescriptor(d){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(d)},set:function(f){this[$mobx].set_(d,f)}}}function createArrayBufferItem(d){defineProperty(LegacyObservableArray.prototype,""+d,createArrayEntryDescriptor(d))}function reserveArrayBuffer(d){if(d>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var s=OBSERVABLE_ARRAY_BUFFER_SIZE;s<d+100;s++)createArrayBufferItem(s);OBSERVABLE_ARRAY_BUFFER_SIZE=d}}reserveArrayBuffer(1e3);function createLegacyArray(d,s,f){return new LegacyObservableArray(d,s,f)}function getAtom(d,s){if(typeof d=="object"&&d!==null){if(isObservableArray(d))return s!==void 0&&die(23),d[$mobx].atom_;if(isObservableSet(d))return d.atom_;if(isObservableMap(d)){if(s===void 0)return d.keysAtom_;var f=d.data_.get(s)||d.hasMap_.get(s);return f||die(25,s,getDebugName(d)),f}if(isObservableObject(d)){if(!s)return die(26);var _=d[$mobx].values_.get(s);return _||die(27,s,getDebugName(d)),_}if(isAtom(d)||isComputedValue(d)||isReaction(d))return d}else if(isFunction$2(d)&&isReaction(d[$mobx]))return d[$mobx];die(28)}function getAdministration(d,s){if(d||die(29),isAtom(d)||isComputedValue(d)||isReaction(d)||isObservableMap(d)||isObservableSet(d))return d;if(d[$mobx])return d[$mobx];die(24,d)}function getDebugName(d,s){var f;if(s!==void 0)f=getAtom(d,s);else{if(isAction(d))return d.name;isObservableObject(d)||isObservableMap(d)||isObservableSet(d)?f=getAdministration(d):f=getAtom(d)}return f.name_}function initObservable(d){var s=untrackedStart(),f=allowStateChangesStart(!0);startBatch();try{return d()}finally{endBatch(),allowStateChangesEnd(f),untrackedEnd(s)}}var toString$2=objectPrototype.toString;function deepEqual$2(d,s,f){return f===void 0&&(f=-1),eq(d,s,f)}function eq(d,s,f,_,S){if(d===s)return d!==0||1/d===1/s;if(d==null||s==null)return!1;if(d!==d)return s!==s;var T=typeof d;if(T!=="function"&&T!=="object"&&typeof s!="object")return!1;var F=toString$2.call(d);if(F!==toString$2.call(s))return!1;switch(F){case"[object RegExp]":case"[object String]":return""+d==""+s;case"[object Number]":return+d!=+d?+s!=+s:+d==0?1/+d===1/s:+d==+s;case"[object Date]":case"[object Boolean]":return+d==+s;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(d)===Symbol.valueOf.call(s);case"[object Map]":case"[object Set]":f>=0&&f++;break}d=unwrap(d),s=unwrap(s);var M=F==="[object Array]";if(!M){if(typeof d!="object"||typeof s!="object")return!1;var P=d.constructor,H=s.constructor;if(P!==H&&!(isFunction$2(P)&&P instanceof P&&isFunction$2(H)&&H instanceof H)&&"constructor"in d&&"constructor"in s)return!1}if(f===0)return!1;f<0&&(f=-1),_=_||[],S=S||[];for(var J=_.length;J--;)if(_[J]===d)return S[J]===s;if(_.push(d),S.push(s),M){if(J=d.length,J!==s.length)return!1;for(;J--;)if(!eq(d[J],s[J],f-1,_,S))return!1}else{var K=Object.keys(d),oe;if(J=K.length,Object.keys(s).length!==J)return!1;for(;J--;)if(oe=K[J],!(hasProp(s,oe)&&eq(d[oe],s[oe],f-1,_,S)))return!1}return _.pop(),S.pop(),!0}function unwrap(d){return isObservableArray(d)?d.slice():isES6Map(d)||isObservableMap(d)||isES6Set(d)||isObservableSet(d)?Array.from(d.entries()):d}function makeIterable(d){return d[Symbol.iterator]=getSelf,d}function getSelf(){return this}["Symbol","Map","Set"].forEach(function(d){var s=getGlobal();typeof s[d]>"u"&&die("MobX requires global '"+d+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy,extras:{getDebugName},$mobx});if(!reactExports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(d){d()}function observerBatching(d){d||(d=defaultNoopBatch),configure({reactionScheduler:d})}function printDebugValue(d){return getDependencyTree(d)}var REGISTRY_FINALIZE_AFTER=1e4,REGISTRY_SWEEP_INTERVAL=1e4,TimerBasedFinalizationRegistry=function(){function d(s){var f=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(_){_===void 0&&(_=REGISTRY_FINALIZE_AFTER),clearTimeout(f.sweepTimeout),f.sweepTimeout=void 0;var S=Date.now();f.registrations.forEach(function(T,F){S-T.registeredAt>=_&&(f.finalize(T.value),f.registrations.delete(F))}),f.registrations.size>0&&f.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){f.sweep(0)}})}return Object.defineProperty(d.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(s,f,_){this.registrations.set(_,{value:f,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(d.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(s){this.registrations.delete(s)}}),Object.defineProperty(d.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,REGISTRY_SWEEP_INTERVAL))}}),d}(),UniversalFinalizationRegistry=typeof FinalizationRegistry<"u"?FinalizationRegistry:TimerBasedFinalizationRegistry,observerFinalizationRegistry=new UniversalFinalizationRegistry(function(d){var s;(s=d.reaction)===null||s===void 0||s.dispose(),d.reaction=null}),shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=reactExports;function h$1(d,s){return d===s&&(d!==0||1/d===1/s)||d!==d&&s!==s}var k$1=typeof Object.is=="function"?Object.is:h$1,l=e.useState,m$1=e.useEffect,n$1=e.useLayoutEffect,p$1=e.useDebugValue;function q$1(d,s){var f=s(),_=l({inst:{value:f,getSnapshot:s}}),S=_[0].inst,T=_[1];return n$1(function(){S.value=f,S.getSnapshot=s,r$1(S)&&T({inst:S})},[d,f,s]),m$1(function(){return r$1(S)&&T({inst:S}),d(function(){r$1(S)&&T({inst:S})})},[d]),p$1(f),f}function r$1(d){var s=d.getSnapshot;d=d.value;try{var f=s();return!k$1(d,f)}catch{return!0}}function t$1(d,s){return s()}var u$2=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$1:q$1;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u$2;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;function createReaction(d){d.reaction=new Reaction("observer".concat(d.name),function(){var s;d.stateVersion=Symbol(),(s=d.onStoreChange)===null||s===void 0||s.call(d)})}function useObserver(d,s){s===void 0&&(s="observed");var f=React.useRef(null);if(!f.current){var _={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:s,subscribe:function(M){return observerFinalizationRegistry.unregister(_),_.onStoreChange=M,_.reaction||(createReaction(_),_.stateVersion=Symbol()),function(){var P;_.onStoreChange=null,(P=_.reaction)===null||P===void 0||P.dispose(),_.reaction=null}},getSnapshot:function(){return _.stateVersion}};f.current=_}var S=f.current;S.reaction||(createReaction(S),observerFinalizationRegistry.register(f,S,S)),React.useDebugValue(S.reaction,printDebugValue),shimExports.useSyncExternalStore(S.subscribe,S.getSnapshot,S.getSnapshot);var T,F;if(S.reaction.track(function(){try{T=d()}catch(M){F=M}}),F)throw F;return T}var _a$5,_b$1,hasSymbol=typeof Symbol=="function"&&Symbol.for,isFunctionNameConfigurable=(_b$1=(_a$5=Object.getOwnPropertyDescriptor(function(){},"name"))===null||_a$5===void 0?void 0:_a$5.configurable)!==null&&_b$1!==void 0?_b$1:!1,ReactForwardRefSymbol=hasSymbol?Symbol.for("react.forward_ref"):typeof reactExports.forwardRef=="function"&&reactExports.forwardRef(function(d){return null}).$$typeof,ReactMemoSymbol=hasSymbol?Symbol.for("react.memo"):typeof reactExports.memo=="function"&&reactExports.memo(function(d){return null}).$$typeof;function observer(d,s){var f;if(ReactMemoSymbol&&d.$$typeof===ReactMemoSymbol)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var _=(f=void 0)!==null&&f!==void 0?f:!1,S=d,T=d.displayName||d.name;if(ReactForwardRefSymbol&&d.$$typeof===ReactForwardRefSymbol&&(_=!0,S=d.render,typeof S!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var F=function(M,P){return useObserver(function(){return S(M,P)},T)};return F.displayName=d.displayName,isFunctionNameConfigurable&&Object.defineProperty(F,"name",{value:d.name,writable:!0,configurable:!0}),d.contextTypes&&(F.contextTypes=d.contextTypes),_&&(F=reactExports.forwardRef(F)),F=reactExports.memo(F),copyStaticProperties(d,F),F}var hoistBlackList={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function copyStaticProperties(d,s){Object.keys(d).forEach(function(f){hoistBlackList[f]||Object.defineProperty(s,f,Object.getOwnPropertyDescriptor(d,f))})}var _a$4;observerBatching(reactDomExports.unstable_batchedUpdates);_a$4=observerFinalizationRegistry.finalizeAllImmediately;class BaseDialog{constructor(s,f){Bt(this,"_closed",!1);s.doc=s.doc||document,this.config=s,this.buttons={};const _=s.width?`${s.width}px`:"",S=s.height?`${s.height}px`:"";if(this.outer=createEl("div",{classes:["ciview-dlg-outer"],styles:{width:_,height:S}}),this.header=createEl("div",{classes:["ciview-dlg-header"]},this.outer),createEl("span",{classes:["ciview-dlg-header-text"],text:s.title},this.header),createEl("i",{classes:["fas","fa-times","ciview-dlg-close-icon"]},this.header).addEventListener("click",()=>{this.close()}),this.dialog=createEl("div",{classes:["ciview-dlg-content"]},this.outer),makeResizable(this.outer,{doc:s.doc,onresizeend:(P,H)=>{this.onResize(P,H)}}),makeDraggable(this.outer,{doc:s.doc,handle:".ciview-dlg-header"}),s.columns&&this._createColumns(s.columns),s.footer&&this._addFooter(),s.buttons){this.footer||this._addFooter();for(const P of s.buttons)this._addButton(P)}this.init(f),s.doc.body.append(this.outer);const T=s.doc.body.getBoundingClientRect(),F=this.outer.getBoundingClientRect();s.maxHeight&&F.height>s.maxHeight&&(F.height=s.maxHeight,this.outer.style.height=`${s.maxHeight}px`);let M=this.config.position;if(M||(M=[T.width/2-F.width/2,T.height/2-F.height/2]),M[0]+F.width>T.width){const P=T.width-F.width;M[0]=P<0?0:P}if(M[1]+F.height>T.height){const P=T.height-F.height;M[1]=P<0?0:P}this.outer.style.left=`${M[0]}px`,this.outer.style.top=`${M[1]}px`,this.observable=makeAutoObservable({container:s.doc.body})}setParent(s){action(()=>this.observable.container=s||document.body)(),removeResizable(this.outer),removeDraggable(this.outer),s?(s.append(this.outer),makeResizable(this.outer,{doc:s.ownerDocument,onresizeend:(f,_)=>{this.onResize(f,_)}}),makeDraggable(this.outer,{doc:s.ownerDocument,handle:".ciview-dlg-header"})):(this.config.doc.body.append(this.outer),makeResizable(this.outer,{doc:this.config.doc,onresizeend:(f,_)=>{this.onResize(f,_)}}),makeDraggable(this.outer,{doc:this.config.doc,handle:".ciview-dlg-header"}))}_addFooter(){this.footer=createEl("div",{styles:{flex:"0 0 auto",padding:"5px",justifyContent:"center",display:"flex",gap:"1em"}},this.outer)}_addButton(s){const f=createEl("button",{text:s.text,classes:["ciview-button"]},this.footer);f.addEventListener("click",()=>this[s.method]()),s.id&&(this.buttons[s.id]=f)}disableButton(s,f){f?this.buttons[s].classList.add("ciview-disabled"):this.buttons[s].classList.remove("ciview-disabled")}_createColumns(s){this.dialog.style.display="flex",this.dialog.style.flexDirection="row",this.columns=[];for(let f=0;f<s;f++)this.columns.push(createEl("div",{styles:{height:"100%",flexBasis:"0",flexGrow:"1",padding:"0px 4px",flexDirection:"column",alignItems:"stretch"}},this.dialog))}close(){this._closed||(this._closed=!0,this.config.onclose&&this.config.onclose(),this.outer.remove())}init(s){}onResize(s,f){this.outer&&(this.outer.style.width=`${s}px`,this.outer.style.height=`${f}px`)}}BaseDialog.experiment={};var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function d(_,S,T,F,M,P){if(P!==ReactPropTypesSecret){var H=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw H.name="Invariant Violation",H}}d.isRequired=d;function s(){return d}var f={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:s,element:d,elementType:d,instanceOf:s,node:d,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return f.PropTypes=f,f};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports),usePreviousProps=d=>{const s=reactExports.useRef({});return reactExports.useEffect(()=>{s.current=d}),s.current};function getValidReactChildren(d){return reactExports.Children.toArray(d).filter(s=>reactExports.isValidElement(s))}const visuallyHidden={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function _typeof(d){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof(d)}function toPrimitive(d,s){if(_typeof(d)!="object"||!d)return d;var f=d[Symbol.toPrimitive];if(f!==void 0){var _=f.call(d,s||"default");if(_typeof(_)!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(d)}function toPropertyKey(d){var s=toPrimitive(d,"string");return _typeof(s)=="symbol"?s:s+""}const _excluded$g=["component","direction","spacing","divider","children","className","useFlexGap"],defaultTheme=createTheme(),defaultCreateStyledComponent=styled("div",{name:"MuiStack",slot:"Root",overridesResolver:(d,s)=>s.root});function useThemePropsDefault(d){return useThemeProps({props:d,name:"MuiStack",defaultTheme})}function joinChildren(d,s){const f=reactExports.Children.toArray(d).filter(Boolean);return f.reduce((_,S,T)=>(_.push(S),T<f.length-1&&_.push(reactExports.cloneElement(s,{key:`separator-${T}`})),_),[])}const getSideFromDirection=d=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[d],style=({ownerState:d,theme:s})=>{let f=_extends$a({display:"flex",flexDirection:"column"},handleBreakpoints({theme:s},resolveBreakpointValues({values:d.direction,breakpoints:s.breakpoints.values}),_=>({flexDirection:_})));if(d.spacing){const _=createUnarySpacing(s),S=Object.keys(s.breakpoints.values).reduce((P,H)=>((typeof d.spacing=="object"&&d.spacing[H]!=null||typeof d.direction=="object"&&d.direction[H]!=null)&&(P[H]=!0),P),{}),T=resolveBreakpointValues({values:d.direction,base:S}),F=resolveBreakpointValues({values:d.spacing,base:S});typeof T=="object"&&Object.keys(T).forEach((P,H,J)=>{if(!T[P]){const oe=H>0?T[J[H-1]]:"column";T[P]=oe}}),f=deepmerge(f,handleBreakpoints({theme:s},F,(P,H)=>d.useFlexGap?{gap:getValue$1(_,P)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(H?T[H]:d.direction)}`]:getValue$1(_,P)}}))}return f=mergeBreakpointsInOrder(s.breakpoints,f),f};function createStack(d={}){const{createStyledComponent:s=defaultCreateStyledComponent,useThemeProps:f=useThemePropsDefault,componentName:_="MuiStack"}=d,S=()=>composeClasses({root:["root"]},P=>generateUtilityClass(_,P),{}),T=s(style);return reactExports.forwardRef(function(P,H){const J=f(P),K=extendSxProp(J),{component:oe="div",direction:se="column",spacing:ae=0,divider:ge,children:he,className:Be,useFlexGap:pe=!1}=K,be=_objectWithoutPropertiesLoose$1(K,_excluded$g),Re={direction:se,spacing:ae,useFlexGap:pe},Fe=S();return jsxRuntimeExports.jsx(T,_extends$a({as:oe,ownerState:Re,ref:H,className:clsx(Fe.root,Be)},be,{children:ge?joinChildren(he,ge):he}))})}const ProjectContext=reactExports.createContext(null),ProjectProvider=({children:d})=>{const{origin:s,pathname:f}=window.location,_=s+f,S=new URLSearchParams(window.location.search),T=S.get("dir")||_,M=(se=>se.endsWith("/")?se.substring(0,se.length-1):se)(T),P=S.get("static")!==null,H=T.split("/").pop(),{chartManager:J}=window.mdv,[K,oe]=reactExports.useState({flaskURL:_,dir:T,root:M,staticFolder:P,projectName:H,chartManager:J});return jsxRuntimeExports.jsx(ProjectContext.Provider,{value:{...K},children:d})},useProject=()=>reactExports.useContext(ProjectContext),OuterContainerContext=reactExports.createContext(null),OuterContainerProvider=observer(({children:d,parent:s})=>{var f;return jsxRuntimeExports.jsx(OuterContainerContext.Provider,{value:((f=s==null?void 0:s.observable)==null?void 0:f.container)||document.body,children:d})}),useOuterContainer=()=>reactExports.useContext(OuterContainerContext)||document.body;function getCollapseUtilityClass(d){return generateUtilityClass("MuiCollapse",d)}generateUtilityClasses("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const _excluded$f=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],useUtilityClasses$e=d=>{const{orientation:s,classes:f}=d,_={root:["root",`${s}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${s}`],wrapperInner:["wrapperInner",`${s}`]};return composeClasses(_,getCollapseUtilityClass,f)},CollapseRoot=styled$1("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(d,s)=>{const{ownerState:f}=d;return[s.root,s[f.orientation],f.state==="entered"&&s.entered,f.state==="exited"&&!f.in&&f.collapsedSize==="0px"&&s.hidden]}})(({theme:d,ownerState:s})=>_extends$a({height:0,overflow:"hidden",transition:d.transitions.create("height")},s.orientation==="horizontal"&&{height:"auto",width:0,transition:d.transitions.create("width")},s.state==="entered"&&_extends$a({height:"auto",overflow:"visible"},s.orientation==="horizontal"&&{width:"auto"}),s.state==="exited"&&!s.in&&s.collapsedSize==="0px"&&{visibility:"hidden"})),CollapseWrapper=styled$1("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(d,s)=>s.wrapper})(({ownerState:d})=>_extends$a({display:"flex",width:"100%"},d.orientation==="horizontal"&&{width:"auto",height:"100%"})),CollapseWrapperInner=styled$1("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(d,s)=>s.wrapperInner})(({ownerState:d})=>_extends$a({width:"100%"},d.orientation==="horizontal"&&{width:"auto",height:"100%"})),Collapse=reactExports.forwardRef(function(s,f){const _=useDefaultProps({props:s,name:"MuiCollapse"}),{addEndListener:S,children:T,className:F,collapsedSize:M="0px",component:P,easing:H,in:J,onEnter:K,onEntered:oe,onEntering:se,onExit:ae,onExited:ge,onExiting:he,orientation:Be="vertical",style:pe,timeout:be=duration.standard,TransitionComponent:Re=Transition$2}=_,Fe=_objectWithoutPropertiesLoose$1(_,_excluded$f),Me=_extends$a({},_,{orientation:Be,collapsedSize:M}),ve=useUtilityClasses$e(Me),At=useTheme(),Ct=useTimeout(),Rt=reactExports.useRef(null),It=reactExports.useRef(),xt=typeof M=="number"?`${M}px`:M,wt=Be==="horizontal",Ft=wt?"width":"height",jt=reactExports.useRef(null),ta=useForkRef(f,jt),Qn=aI=>nI=>{if(aI){const uA=jt.current;nI===void 0?aI(uA):aI(uA,nI)}},ca=()=>Rt.current?Rt.current[wt?"clientWidth":"clientHeight"]:0,Jn=Qn((aI,nI)=>{Rt.current&&wt&&(Rt.current.style.position="absolute"),aI.style[Ft]=xt,K&&K(aI,nI)}),wA=Qn((aI,nI)=>{const uA=ca();Rt.current&&wt&&(Rt.current.style.position="");const{duration:aa,easing:eA}=getTransitionProps({style:pe,timeout:be,easing:H},{mode:"enter"});if(be==="auto"){const DA=At.transitions.getAutoHeightDuration(uA);aI.style.transitionDuration=`${DA}ms`,It.current=DA}else aI.style.transitionDuration=typeof aa=="string"?aa:`${aa}ms`;aI.style[Ft]=`${uA}px`,aI.style.transitionTimingFunction=eA,se&&se(aI,nI)}),LA=Qn((aI,nI)=>{aI.style[Ft]="auto",oe&&oe(aI,nI)}),ZA=Qn(aI=>{aI.style[Ft]=`${ca()}px`,ae&&ae(aI)}),xI=Qn(ge),cI=Qn(aI=>{const nI=ca(),{duration:uA,easing:aa}=getTransitionProps({style:pe,timeout:be,easing:H},{mode:"exit"});if(be==="auto"){const eA=At.transitions.getAutoHeightDuration(nI);aI.style.transitionDuration=`${eA}ms`,It.current=eA}else aI.style.transitionDuration=typeof uA=="string"?uA:`${uA}ms`;aI.style[Ft]=xt,aI.style.transitionTimingFunction=aa,he&&he(aI)}),pI=aI=>{be==="auto"&&Ct.start(It.current||0,aI),S&&S(jt.current,aI)};return jsxRuntimeExports.jsx(Re,_extends$a({in:J,onEnter:Jn,onEntered:LA,onEntering:wA,onExit:ZA,onExited:xI,onExiting:cI,addEndListener:pI,nodeRef:jt,timeout:be==="auto"?null:be},Fe,{children:(aI,nI)=>jsxRuntimeExports.jsx(CollapseRoot,_extends$a({as:P,className:clsx(ve.root,F,{entered:ve.entered,exited:!J&&xt==="0px"&&ve.hidden}[aI]),style:_extends$a({[wt?"minWidth":"minHeight"]:xt},pe),ref:ta},nI,{ownerState:_extends$a({},Me,{state:aI}),children:jsxRuntimeExports.jsx(CollapseWrapper,{ownerState:_extends$a({},Me,{state:aI}),className:ve.wrapper,ref:Rt,children:jsxRuntimeExports.jsx(CollapseWrapperInner,{ownerState:_extends$a({},Me,{state:aI}),className:ve.wrapperInner,children:T})})}))}))});Collapse.muiSupportAuto=!0;const AccordionContext=reactExports.createContext({});function getAccordionUtilityClass(d){return generateUtilityClass("MuiAccordion",d)}const accordionClasses=generateUtilityClasses("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),_excluded$e=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],useUtilityClasses$d=d=>{const{classes:s,square:f,expanded:_,disabled:S,disableGutters:T}=d;return composeClasses({root:["root",!f&&"rounded",_&&"expanded",S&&"disabled",!T&&"gutters"],region:["region"]},getAccordionUtilityClass,s)},AccordionRoot=styled$1(Paper,{name:"MuiAccordion",slot:"Root",overridesResolver:(d,s)=>{const{ownerState:f}=d;return[{[`& .${accordionClasses.region}`]:s.region},s.root,!f.square&&s.rounded,!f.disableGutters&&s.gutters]}})(({theme:d})=>{const s={duration:d.transitions.duration.shortest};return{position:"relative",transition:d.transitions.create(["margin"],s),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(d.vars||d).palette.divider,transition:d.transitions.create(["opacity","background-color"],s)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${accordionClasses.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${accordionClasses.disabled}`]:{backgroundColor:(d.vars||d).palette.action.disabledBackground}}},({theme:d})=>({variants:[{props:s=>!s.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(d.vars||d).shape.borderRadius,borderTopRightRadius:(d.vars||d).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(d.vars||d).shape.borderRadius,borderBottomRightRadius:(d.vars||d).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:s=>!s.disableGutters,style:{[`&.${accordionClasses.expanded}`]:{margin:"16px 0"}}}]})),Accordion$2=reactExports.forwardRef(function(s,f){const _=useDefaultProps({props:s,name:"MuiAccordion"}),{children:S,className:T,defaultExpanded:F=!1,disabled:M=!1,disableGutters:P=!1,expanded:H,onChange:J,square:K=!1,slots:oe={},slotProps:se={},TransitionComponent:ae,TransitionProps:ge}=_,he=_objectWithoutPropertiesLoose$1(_,_excluded$e),[Be,pe]=useControlled({controlled:H,default:F,name:"Accordion",state:"expanded"}),be=reactExports.useCallback(wt=>{pe(!Be),J&&J(wt,!Be)},[Be,J,pe]),[Re,...Fe]=reactExports.Children.toArray(S),Me=reactExports.useMemo(()=>({expanded:Be,disabled:M,disableGutters:P,toggle:be}),[Be,M,P,be]),ve=_extends$a({},_,{square:K,disabled:M,disableGutters:P,expanded:Be}),At=useUtilityClasses$d(ve),Ct=_extends$a({transition:ae},oe),Rt=_extends$a({transition:ge},se),[It,xt]=useSlot("transition",{elementType:Collapse,externalForwardedProps:{slots:Ct,slotProps:Rt},ownerState:ve});return jsxRuntimeExports.jsxs(AccordionRoot,_extends$a({className:clsx(At.root,T),ref:f,ownerState:ve,square:K},he,{children:[jsxRuntimeExports.jsx(AccordionContext.Provider,{value:Me,children:Re}),jsxRuntimeExports.jsx(It,_extends$a({in:Be,timeout:"auto"},xt,{children:jsxRuntimeExports.jsx("div",{"aria-labelledby":Re.props.id,id:Re.props["aria-controls"],role:"region",className:At.region,children:Fe})}))]}))});function getAccordionDetailsUtilityClass(d){return generateUtilityClass("MuiAccordionDetails",d)}generateUtilityClasses("MuiAccordionDetails",["root"]);const _excluded$d=["className"],useUtilityClasses$c=d=>{const{classes:s}=d;return composeClasses({root:["root"]},getAccordionDetailsUtilityClass,s)},AccordionDetailsRoot=styled$1("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(d,s)=>s.root})(({theme:d})=>({padding:d.spacing(1,2,2)})),AccordionDetails=reactExports.forwardRef(function(s,f){const _=useDefaultProps({props:s,name:"MuiAccordionDetails"}),{className:S}=_,T=_objectWithoutPropertiesLoose$1(_,_excluded$d),F=_,M=useUtilityClasses$c(F);return jsxRuntimeExports.jsx(AccordionDetailsRoot,_extends$a({className:clsx(M.root,S),ref:f,ownerState:F},T))});function getAccordionSummaryUtilityClass(d){return generateUtilityClass("MuiAccordionSummary",d)}const accordionSummaryClasses=generateUtilityClasses("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),_excluded$c=["children","className","expandIcon","focusVisibleClassName","onClick"],useUtilityClasses$b=d=>{const{classes:s,expanded:f,disabled:_,disableGutters:S}=d;return composeClasses({root:["root",f&&"expanded",_&&"disabled",!S&&"gutters"],focusVisible:["focusVisible"],content:["content",f&&"expanded",!S&&"contentGutters"],expandIconWrapper:["expandIconWrapper",f&&"expanded"]},getAccordionSummaryUtilityClass,s)},AccordionSummaryRoot=styled$1(ButtonBase,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(d,s)=>s.root})(({theme:d})=>{const s={duration:d.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:d.spacing(0,2),transition:d.transitions.create(["min-height","background-color"],s),[`&.${accordionSummaryClasses.focusVisible}`]:{backgroundColor:(d.vars||d).palette.action.focus},[`&.${accordionSummaryClasses.disabled}`]:{opacity:(d.vars||d).palette.action.disabledOpacity},[`&:hover:not(.${accordionSummaryClasses.disabled})`]:{cursor:"pointer"},variants:[{props:f=>!f.disableGutters,style:{[`&.${accordionSummaryClasses.expanded}`]:{minHeight:64}}}]}}),AccordionSummaryContent=styled$1("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(d,s)=>s.content})(({theme:d})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:s=>!s.disableGutters,style:{transition:d.transitions.create(["margin"],{duration:d.transitions.duration.shortest}),[`&.${accordionSummaryClasses.expanded}`]:{margin:"20px 0"}}}]})),AccordionSummaryExpandIconWrapper=styled$1("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(d,s)=>s.expandIconWrapper})(({theme:d})=>({display:"flex",color:(d.vars||d).palette.action.active,transform:"rotate(0deg)",transition:d.transitions.create("transform",{duration:d.transitions.duration.shortest}),[`&.${accordionSummaryClasses.expanded}`]:{transform:"rotate(180deg)"}})),AccordionSummary=reactExports.forwardRef(function(s,f){const _=useDefaultProps({props:s,name:"MuiAccordionSummary"}),{children:S,className:T,expandIcon:F,focusVisibleClassName:M,onClick:P}=_,H=_objectWithoutPropertiesLoose$1(_,_excluded$c),{disabled:J=!1,disableGutters:K,expanded:oe,toggle:se}=reactExports.useContext(AccordionContext),ae=Be=>{se&&se(Be),P&&P(Be)},ge=_extends$a({},_,{expanded:oe,disabled:J,disableGutters:K}),he=useUtilityClasses$b(ge);return jsxRuntimeExports.jsxs(AccordionSummaryRoot,_extends$a({focusRipple:!1,disableRipple:!0,disabled:J,component:"div","aria-expanded":oe,className:clsx(he.root,T),focusVisibleClassName:clsx(he.focusVisible,M),onClick:ae,ref:f,ownerState:ge},H,{children:[jsxRuntimeExports.jsx(AccordionSummaryContent,{className:he.content,ownerState:ge,children:S}),F&&jsxRuntimeExports.jsx(AccordionSummaryExpandIconWrapper,{className:he.expandIconWrapper,ownerState:ge,children:F})]}))}),ClearIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function stripDiacritics(d){return typeof d.normalize<"u"?d.normalize("NFD").replace(/[\u0300-\u036f]/g,""):d}function createFilterOptions(d={}){const{ignoreAccents:s=!0,ignoreCase:f=!0,limit:_,matchFrom:S="any",stringify:T,trim:F=!1}=d;return(M,{inputValue:P,getOptionLabel:H})=>{let J=F?P.trim():P;f&&(J=J.toLowerCase()),s&&(J=stripDiacritics(J));const K=J?M.filter(oe=>{let se=(T||H)(oe);return f&&(se=se.toLowerCase()),s&&(se=stripDiacritics(se)),S==="start"?se.indexOf(J)===0:se.indexOf(J)>-1}):M;return typeof _=="number"?K.slice(0,_):K}}function findIndex(d,s){for(let f=0;f<d.length;f+=1)if(s(d[f]))return f;return-1}const defaultFilterOptions=createFilterOptions(),pageSize=5,defaultIsActiveElementInListbox=d=>{var s;return d.current!==null&&((s=d.current.parentElement)==null?void 0:s.contains(document.activeElement))};function useAutocomplete(d){const{unstable_isActiveElementInListbox:s=defaultIsActiveElementInListbox,unstable_classNamePrefix:f="Mui",autoComplete:_=!1,autoHighlight:S=!1,autoSelect:T=!1,blurOnSelect:F=!1,clearOnBlur:M=!d.freeSolo,clearOnEscape:P=!1,componentName:H="useAutocomplete",defaultValue:J=d.multiple?[]:null,disableClearable:K=!1,disableCloseOnSelect:oe=!1,disabled:se,disabledItemsFocusable:ae=!1,disableListWrap:ge=!1,filterOptions:he=defaultFilterOptions,filterSelectedOptions:Be=!1,freeSolo:pe=!1,getOptionDisabled:be,getOptionKey:Re,getOptionLabel:Fe=qt=>{var Xt;return(Xt=qt.label)!=null?Xt:qt},groupBy:Me,handleHomeEndKeys:ve=!d.freeSolo,id:At,includeInputInList:Ct=!1,inputValue:Rt,isOptionEqualToValue:It=(qt,Xt)=>qt===Xt,multiple:xt=!1,onChange:wt,onClose:Ft,onHighlightChange:jt,onInputChange:ta,onOpen:Qn,open:ca,openOnFocus:Jn=!1,options:wA,readOnly:LA=!1,selectOnFocus:ZA=!d.freeSolo,value:xI}=d,cI=useId$1(At);let pI=Fe;pI=qt=>{const Xt=Fe(qt);return typeof Xt!="string"?String(Xt):Xt};const aI=reactExports.useRef(!1),nI=reactExports.useRef(!0),uA=reactExports.useRef(null),aa=reactExports.useRef(null),[eA,DA]=reactExports.useState(null),[xA,ua]=reactExports.useState(-1),sA=S?0:-1,oA=reactExports.useRef(sA),[fA,lA]=useControlled({controlled:xI,default:J,name:H}),[gA,WA]=useControlled({controlled:Rt,default:"",name:H,state:"inputValue"}),[JA,_I]=reactExports.useState(!1),HI=reactExports.useCallback((qt,Xt)=>{if(!(xt?fA.length<Xt.length:Xt!==null)&&!M)return;let aA;if(xt)aA="";else if(Xt==null)aA="";else{const BA=pI(Xt);aA=typeof BA=="string"?BA:""}gA!==aA&&(WA(aA),ta&&ta(qt,aA,"reset"))},[pI,gA,xt,ta,WA,M,fA]),[Nt,bA]=useControlled({controlled:ca,default:!1,name:H,state:"open"}),[hA,II]=reactExports.useState(!0),OI=!xt&&fA!=null&&gA===pI(fA),ba=Nt&&!LA,IA=ba?he(wA.filter(qt=>!(Be&&(xt?fA:[fA]).some(Xt=>Xt!==null&&It(qt,Xt)))),{inputValue:OI&&hA?"":gA,getOptionLabel:pI}):[],MA=usePreviousProps({filteredOptions:IA,value:fA,inputValue:gA});reactExports.useEffect(()=>{const qt=fA!==MA.value;JA&&!qt||pe&&!qt||HI(null,fA)},[fA,HI,JA,MA.value,pe]);const EI=Nt&&IA.length>0&&!LA,wI=useEventCallback(qt=>{qt===-1?uA.current.focus():eA.querySelector(`[data-tag-index="${qt}"]`).focus()});reactExports.useEffect(()=>{xt&&xA>fA.length-1&&(ua(-1),wI(-1))},[fA,xt,xA,wI]);function vI(qt,Xt){if(!aa.current||qt<0||qt>=IA.length)return-1;let ga=qt;for(;;){const aA=aa.current.querySelector(`[data-option-index="${ga}"]`),BA=ae?!1:!aA||aA.disabled||aA.getAttribute("aria-disabled")==="true";if(aA&&aA.hasAttribute("tabindex")&&!BA)return ga;if(Xt==="next"?ga=(ga+1)%IA.length:ga=(ga-1+IA.length)%IA.length,ga===qt)return-1}}const WI=useEventCallback(({event:qt,index:Xt,reason:ga="auto"})=>{if(oA.current=Xt,Xt===-1?uA.current.removeAttribute("aria-activedescendant"):uA.current.setAttribute("aria-activedescendant",`${cI}-option-${Xt}`),jt&&jt(qt,Xt===-1?null:IA[Xt],ga),!aa.current)return;const aA=aa.current.querySelector(`[role="option"].${f}-focused`);aA&&(aA.classList.remove(`${f}-focused`),aA.classList.remove(`${f}-focusVisible`));let BA=aa.current;if(aa.current.getAttribute("role")!=="listbox"&&(BA=aa.current.parentElement.querySelector('[role="listbox"]')),!BA)return;if(Xt===-1){BA.scrollTop=0;return}const uI=aa.current.querySelector(`[data-option-index="${Xt}"]`);if(uI&&(uI.classList.add(`${f}-focused`),ga==="keyboard"&&uI.classList.add(`${f}-focusVisible`),BA.scrollHeight>BA.clientHeight&&ga!=="mouse"&&ga!=="touch")){const mI=uI,qI=BA.clientHeight+BA.scrollTop,gC=mI.offsetTop+mI.offsetHeight;gC>qI?BA.scrollTop=gC-BA.clientHeight:mI.offsetTop-mI.offsetHeight*(Me?1.3:0)<BA.scrollTop&&(BA.scrollTop=mI.offsetTop-mI.offsetHeight*(Me?1.3:0))}}),GI=useEventCallback(({event:qt,diff:Xt,direction:ga="next",reason:aA="auto"})=>{if(!ba)return;const uI=vI((()=>{const mI=IA.length-1;if(Xt==="reset")return sA;if(Xt==="start")return 0;if(Xt==="end")return mI;const qI=oA.current+Xt;return qI<0?qI===-1&&Ct?-1:ge&&oA.current!==-1||Math.abs(Xt)>1?0:mI:qI>mI?qI===mI+1&&Ct?-1:ge||Math.abs(Xt)>1?mI:0:qI})(),ga);if(WI({index:uI,reason:aA,event:qt}),_&&Xt!=="reset")if(uI===-1)uA.current.value=gA;else{const mI=pI(IA[uI]);uA.current.value=mI,mI.toLowerCase().indexOf(gA.toLowerCase())===0&&gA.length>0&&uA.current.setSelectionRange(gA.length,mI.length)}}),NI=()=>{const qt=(Xt,ga)=>{const aA=Xt?pI(Xt):"",BA=ga?pI(ga):"";return aA===BA};if(oA.current!==-1&&MA.filteredOptions&&MA.filteredOptions.length!==IA.length&&MA.inputValue===gA&&(xt?fA.length===MA.value.length&&MA.value.every((Xt,ga)=>pI(fA[ga])===pI(Xt)):qt(MA.value,fA))){const Xt=MA.filteredOptions[oA.current];if(Xt)return findIndex(IA,ga=>pI(ga)===pI(Xt))}return-1},tC=reactExports.useCallback(()=>{if(!ba)return;const qt=NI();if(qt!==-1){oA.current=qt;return}const Xt=xt?fA[0]:fA;if(IA.length===0||Xt==null){GI({diff:"reset"});return}if(aa.current){if(Xt!=null){const ga=IA[oA.current];if(xt&&ga&&findIndex(fA,BA=>It(ga,BA))!==-1)return;const aA=findIndex(IA,BA=>It(BA,Xt));aA===-1?GI({diff:"reset"}):WI({index:aA});return}if(oA.current>=IA.length-1){WI({index:IA.length-1});return}WI({index:oA.current})}},[IA.length,xt?!1:fA,Be,GI,WI,ba,gA,xt]),mC=useEventCallback(qt=>{setRef$1(aa,qt),qt&&tC()});reactExports.useEffect(()=>{tC()},[tC]);const yC=qt=>{Nt||(bA(!0),II(!0),Qn&&Qn(qt))},QC=(qt,Xt)=>{Nt&&(bA(!1),Ft&&Ft(qt,Xt))},_C=(qt,Xt,ga,aA)=>{if(xt){if(fA.length===Xt.length&&fA.every((BA,uI)=>BA===Xt[uI]))return}else if(fA===Xt)return;wt&&wt(qt,Xt,ga,aA),lA(Xt)},vC=reactExports.useRef(!1),RC=(qt,Xt,ga="selectOption",aA="options")=>{let BA=ga,uI=Xt;if(xt){uI=Array.isArray(fA)?fA.slice():[];const mI=findIndex(uI,qI=>It(Xt,qI));mI===-1?uI.push(Xt):aA!=="freeSolo"&&(uI.splice(mI,1),BA="removeOption")}HI(qt,uI),_C(qt,uI,BA,{option:Xt}),!oe&&(!qt||!qt.ctrlKey&&!qt.metaKey)&&QC(qt,BA),(F===!0||F==="touch"&&vC.current||F==="mouse"&&!vC.current)&&uA.current.blur()};function MC(qt,Xt){if(qt===-1)return-1;let ga=qt;for(;;){if(Xt==="next"&&ga===fA.length||Xt==="previous"&&ga===-1)return-1;const aA=eA.querySelector(`[data-tag-index="${ga}"]`);if(!aA||!aA.hasAttribute("tabindex")||aA.disabled||aA.getAttribute("aria-disabled")==="true")ga+=Xt==="next"?1:-1;else return ga}}const Hr=(qt,Xt)=>{if(!xt)return;gA===""&&QC(qt,"toggleInput");let ga=xA;xA===-1?gA===""&&Xt==="previous"&&(ga=fA.length-1):(ga+=Xt==="next"?1:-1,ga<0&&(ga=0),ga===fA.length&&(ga=-1)),ga=MC(ga,Xt),ua(ga),wI(ga)},zn=qt=>{aI.current=!0,WA(""),ta&&ta(qt,"","clear"),_C(qt,xt?[]:null,"clear")},na=qt=>Xt=>{if(qt.onKeyDown&&qt.onKeyDown(Xt),!Xt.defaultMuiPrevented&&(xA!==-1&&["ArrowLeft","ArrowRight"].indexOf(Xt.key)===-1&&(ua(-1),wI(-1)),Xt.which!==229))switch(Xt.key){case"Home":ba&&ve&&(Xt.preventDefault(),GI({diff:"start",direction:"next",reason:"keyboard",event:Xt}));break;case"End":ba&&ve&&(Xt.preventDefault(),GI({diff:"end",direction:"previous",reason:"keyboard",event:Xt}));break;case"PageUp":Xt.preventDefault(),GI({diff:-pageSize,direction:"previous",reason:"keyboard",event:Xt}),yC(Xt);break;case"PageDown":Xt.preventDefault(),GI({diff:pageSize,direction:"next",reason:"keyboard",event:Xt}),yC(Xt);break;case"ArrowDown":Xt.preventDefault(),GI({diff:1,direction:"next",reason:"keyboard",event:Xt}),yC(Xt);break;case"ArrowUp":Xt.preventDefault(),GI({diff:-1,direction:"previous",reason:"keyboard",event:Xt}),yC(Xt);break;case"ArrowLeft":Hr(Xt,"previous");break;case"ArrowRight":Hr(Xt,"next");break;case"Enter":if(oA.current!==-1&&ba){const ga=IA[oA.current],aA=be?be(ga):!1;if(Xt.preventDefault(),aA)return;RC(Xt,ga,"selectOption"),_&&uA.current.setSelectionRange(uA.current.value.length,uA.current.value.length)}else pe&&gA!==""&&OI===!1&&(xt&&Xt.preventDefault(),RC(Xt,gA,"createOption","freeSolo"));break;case"Escape":ba?(Xt.preventDefault(),Xt.stopPropagation(),QC(Xt,"escape")):P&&(gA!==""||xt&&fA.length>0)&&(Xt.preventDefault(),Xt.stopPropagation(),zn(Xt));break;case"Backspace":if(xt&&!LA&&gA===""&&fA.length>0){const ga=xA===-1?fA.length-1:xA,aA=fA.slice();aA.splice(ga,1),_C(Xt,aA,"removeOption",{option:fA[ga]})}break;case"Delete":if(xt&&!LA&&gA===""&&fA.length>0&&xA!==-1){const ga=xA,aA=fA.slice();aA.splice(ga,1),_C(Xt,aA,"removeOption",{option:fA[ga]})}break}},PA=qt=>{_I(!0),Jn&&!aI.current&&yC(qt)},YA=qt=>{if(s(aa)){uA.current.focus();return}_I(!1),nI.current=!0,aI.current=!1,T&&oA.current!==-1&&ba?RC(qt,IA[oA.current],"blur"):T&&pe&&gA!==""?RC(qt,gA,"blur","freeSolo"):M&&HI(qt,fA),QC(qt,"blur")},GA=qt=>{const Xt=qt.target.value;gA!==Xt&&(WA(Xt),II(!1),ta&&ta(qt,Xt,"input")),Xt===""?!K&&!xt&&_C(qt,null,"clear"):yC(qt)},AI=qt=>{const Xt=Number(qt.currentTarget.getAttribute("data-option-index"));oA.current!==Xt&&WI({event:qt,index:Xt,reason:"mouse"})},tI=qt=>{WI({event:qt,index:Number(qt.currentTarget.getAttribute("data-option-index")),reason:"touch"}),vC.current=!0},rC=qt=>{const Xt=Number(qt.currentTarget.getAttribute("data-option-index"));RC(qt,IA[Xt],"selectOption"),vC.current=!1},JI=qt=>Xt=>{const ga=fA.slice();ga.splice(qt,1),_C(Xt,ga,"removeOption",{option:fA[qt]})},cC=qt=>{Nt?QC(qt,"toggleInput"):yC(qt)},sC=qt=>{qt.currentTarget.contains(qt.target)&&qt.target.getAttribute("id")!==cI&&qt.preventDefault()},XI=qt=>{qt.currentTarget.contains(qt.target)&&(uA.current.focus(),ZA&&nI.current&&uA.current.selectionEnd-uA.current.selectionStart===0&&uA.current.select(),nI.current=!1)},Vt=qt=>{!se&&(gA===""||!Nt)&&cC(qt)};let Un=pe&&gA.length>0;Un=Un||(xt?fA.length>0:fA!==null);let Kn=IA;return Me&&(Kn=IA.reduce((qt,Xt,ga)=>{const aA=Me(Xt);return qt.length>0&&qt[qt.length-1].group===aA?qt[qt.length-1].options.push(Xt):qt.push({key:ga,index:ga,group:aA,options:[Xt]}),qt},[])),se&&JA&&YA(),{getRootProps:(qt={})=>_extends$a({"aria-owns":EI?`${cI}-listbox`:null},qt,{onKeyDown:na(qt),onMouseDown:sC,onClick:XI}),getInputLabelProps:()=>({id:`${cI}-label`,htmlFor:cI}),getInputProps:()=>({id:cI,value:gA,onBlur:YA,onFocus:PA,onChange:GA,onMouseDown:Vt,"aria-activedescendant":ba?"":null,"aria-autocomplete":_?"both":"list","aria-controls":EI?`${cI}-listbox`:void 0,"aria-expanded":EI,autoComplete:"off",ref:uA,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:se}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:zn}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:cC}),getTagProps:({index:qt})=>_extends$a({key:qt,"data-tag-index":qt,tabIndex:-1},!LA&&{onDelete:JI(qt)}),getListboxProps:()=>({role:"listbox",id:`${cI}-listbox`,"aria-labelledby":`${cI}-label`,ref:mC,onMouseDown:qt=>{qt.preventDefault()}}),getOptionProps:({index:qt,option:Xt})=>{var ga;const aA=(xt?fA:[fA]).some(uI=>uI!=null&&It(Xt,uI)),BA=be?be(Xt):!1;return{key:(ga=Re==null?void 0:Re(Xt))!=null?ga:pI(Xt),tabIndex:-1,role:"option",id:`${cI}-option-${qt}`,onMouseMove:AI,onClick:rC,onTouchStart:tI,"data-option-index":qt,"aria-disabled":BA,"aria-selected":aA}},id:cI,inputValue:gA,value:fA,dirty:Un,expanded:ba&&eA,popupOpen:ba,focused:JA||xA!==-1,anchorEl:eA,setAnchorEl:DA,focusedTag:xA,groupedOptions:Kn}}function getListSubheaderUtilityClass(d){return generateUtilityClass("MuiListSubheader",d)}generateUtilityClasses("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const _excluded$b=["className","color","component","disableGutters","disableSticky","inset"],useUtilityClasses$a=d=>{const{classes:s,color:f,disableGutters:_,inset:S,disableSticky:T}=d,F={root:["root",f!=="default"&&`color${capitalize$1(f)}`,!_&&"gutters",S&&"inset",!T&&"sticky"]};return composeClasses(F,getListSubheaderUtilityClass,s)},ListSubheaderRoot=styled$1("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(d,s)=>{const{ownerState:f}=d;return[s.root,f.color!=="default"&&s[`color${capitalize$1(f.color)}`],!f.disableGutters&&s.gutters,f.inset&&s.inset,!f.disableSticky&&s.sticky]}})(({theme:d,ownerState:s})=>_extends$a({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(d.vars||d).palette.text.secondary,fontFamily:d.typography.fontFamily,fontWeight:d.typography.fontWeightMedium,fontSize:d.typography.pxToRem(14)},s.color==="primary"&&{color:(d.vars||d).palette.primary.main},s.color==="inherit"&&{color:"inherit"},!s.disableGutters&&{paddingLeft:16,paddingRight:16},s.inset&&{paddingLeft:72},!s.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(d.vars||d).palette.background.paper})),ListSubheader=reactExports.forwardRef(function(s,f){const _=useDefaultProps({props:s,name:"MuiListSubheader"}),{className:S,color:T="default",component:F="li",disableGutters:M=!1,disableSticky:P=!1,inset:H=!1}=_,J=_objectWithoutPropertiesLoose$1(_,_excluded$b),K=_extends$a({},_,{color:T,component:F,disableGutters:M,disableSticky:P,inset:H}),oe=useUtilityClasses$a(K);return jsxRuntimeExports.jsx(ListSubheaderRoot,_extends$a({as:F,className:clsx(oe.root,S),ref:f,ownerState:K},J))});ListSubheader.muiSkipListHighlight=!0;const CancelIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function getChipUtilityClass(d){return generateUtilityClass("MuiChip",d)}const chipClasses=generateUtilityClasses("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),_excluded$a=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],useUtilityClasses$9=d=>{const{classes:s,disabled:f,size:_,color:S,iconColor:T,onDelete:F,clickable:M,variant:P}=d,H={root:["root",P,f&&"disabled",`size${capitalize$1(_)}`,`color${capitalize$1(S)}`,M&&"clickable",M&&`clickableColor${capitalize$1(S)}`,F&&"deletable",F&&`deletableColor${capitalize$1(S)}`,`${P}${capitalize$1(S)}`],label:["label",`label${capitalize$1(_)}`],avatar:["avatar",`avatar${capitalize$1(_)}`,`avatarColor${capitalize$1(S)}`],icon:["icon",`icon${capitalize$1(_)}`,`iconColor${capitalize$1(T)}`],deleteIcon:["deleteIcon",`deleteIcon${capitalize$1(_)}`,`deleteIconColor${capitalize$1(S)}`,`deleteIcon${capitalize$1(P)}Color${capitalize$1(S)}`]};return composeClasses(H,getChipUtilityClass,s)},ChipRoot=styled$1("div",{name:"MuiChip",slot:"Root",overridesResolver:(d,s)=>{const{ownerState:f}=d,{color:_,iconColor:S,clickable:T,onDelete:F,size:M,variant:P}=f;return[{[`& .${chipClasses.avatar}`]:s.avatar},{[`& .${chipClasses.avatar}`]:s[`avatar${capitalize$1(M)}`]},{[`& .${chipClasses.avatar}`]:s[`avatarColor${capitalize$1(_)}`]},{[`& .${chipClasses.icon}`]:s.icon},{[`& .${chipClasses.icon}`]:s[`icon${capitalize$1(M)}`]},{[`& .${chipClasses.icon}`]:s[`iconColor${capitalize$1(S)}`]},{[`& .${chipClasses.deleteIcon}`]:s.deleteIcon},{[`& .${chipClasses.deleteIcon}`]:s[`deleteIcon${capitalize$1(M)}`]},{[`& .${chipClasses.deleteIcon}`]:s[`deleteIconColor${capitalize$1(_)}`]},{[`& .${chipClasses.deleteIcon}`]:s[`deleteIcon${capitalize$1(P)}Color${capitalize$1(_)}`]},s.root,s[`size${capitalize$1(M)}`],s[`color${capitalize$1(_)}`],T&&s.clickable,T&&_!=="default"&&s[`clickableColor${capitalize$1(_)})`],F&&s.deletable,F&&_!=="default"&&s[`deletableColor${capitalize$1(_)}`],s[P],s[`${P}${capitalize$1(_)}`]]}})(({theme:d,ownerState:s})=>{const f=d.palette.mode==="light"?d.palette.grey[700]:d.palette.grey[300];return _extends$a({maxWidth:"100%",fontFamily:d.typography.fontFamily,fontSize:d.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(d.vars||d).palette.text.primary,backgroundColor:(d.vars||d).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:d.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${chipClasses.disabled}`]:{opacity:(d.vars||d).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${chipClasses.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:d.vars?d.vars.palette.Chip.defaultAvatarColor:f,fontSize:d.typography.pxToRem(12)},[`& .${chipClasses.avatarColorPrimary}`]:{color:(d.vars||d).palette.primary.contrastText,backgroundColor:(d.vars||d).palette.primary.dark},[`& .${chipClasses.avatarColorSecondary}`]:{color:(d.vars||d).palette.secondary.contrastText,backgroundColor:(d.vars||d).palette.secondary.dark},[`& .${chipClasses.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:d.typography.pxToRem(10)},[`& .${chipClasses.icon}`]:_extends$a({marginLeft:5,marginRight:-6},s.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},s.iconColor===s.color&&_extends$a({color:d.vars?d.vars.palette.Chip.defaultIconColor:f},s.color!=="default"&&{color:"inherit"})),[`& .${chipClasses.deleteIcon}`]:_extends$a({WebkitTapHighlightColor:"transparent",color:d.vars?`rgba(${d.vars.palette.text.primaryChannel} / 0.26)`:alpha_1(d.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:d.vars?`rgba(${d.vars.palette.text.primaryChannel} / 0.4)`:alpha_1(d.palette.text.primary,.4)}},s.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},s.color!=="default"&&{color:d.vars?`rgba(${d.vars.palette[s.color].contrastTextChannel} / 0.7)`:alpha_1(d.palette[s.color].contrastText,.7),"&:hover, &:active":{color:(d.vars||d).palette[s.color].contrastText}})},s.size==="small"&&{height:24},s.color!=="default"&&{backgroundColor:(d.vars||d).palette[s.color].main,color:(d.vars||d).palette[s.color].contrastText},s.onDelete&&{[`&.${chipClasses.focusVisible}`]:{backgroundColor:d.vars?`rgba(${d.vars.palette.action.selectedChannel} / calc(${d.vars.palette.action.selectedOpacity} + ${d.vars.palette.action.focusOpacity}))`:alpha_1(d.palette.action.selected,d.palette.action.selectedOpacity+d.palette.action.focusOpacity)}},s.onDelete&&s.color!=="default"&&{[`&.${chipClasses.focusVisible}`]:{backgroundColor:(d.vars||d).palette[s.color].dark}})},({theme:d,ownerState:s})=>_extends$a({},s.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:d.vars?`rgba(${d.vars.palette.action.selectedChannel} / calc(${d.vars.palette.action.selectedOpacity} + ${d.vars.palette.action.hoverOpacity}))`:alpha_1(d.palette.action.selected,d.palette.action.selectedOpacity+d.palette.action.hoverOpacity)},[`&.${chipClasses.focusVisible}`]:{backgroundColor:d.vars?`rgba(${d.vars.palette.action.selectedChannel} / calc(${d.vars.palette.action.selectedOpacity} + ${d.vars.palette.action.focusOpacity}))`:alpha_1(d.palette.action.selected,d.palette.action.selectedOpacity+d.palette.action.focusOpacity)},"&:active":{boxShadow:(d.vars||d).shadows[1]}},s.clickable&&s.color!=="default"&&{[`&:hover, &.${chipClasses.focusVisible}`]:{backgroundColor:(d.vars||d).palette[s.color].dark}}),({theme:d,ownerState:s})=>_extends$a({},s.variant==="outlined"&&{backgroundColor:"transparent",border:d.vars?`1px solid ${d.vars.palette.Chip.defaultBorder}`:`1px solid ${d.palette.mode==="light"?d.palette.grey[400]:d.palette.grey[700]}`,[`&.${chipClasses.clickable}:hover`]:{backgroundColor:(d.vars||d).palette.action.hover},[`&.${chipClasses.focusVisible}`]:{backgroundColor:(d.vars||d).palette.action.focus},[`& .${chipClasses.avatar}`]:{marginLeft:4},[`& .${chipClasses.avatarSmall}`]:{marginLeft:2},[`& .${chipClasses.icon}`]:{marginLeft:4},[`& .${chipClasses.iconSmall}`]:{marginLeft:2},[`& .${chipClasses.deleteIcon}`]:{marginRight:5},[`& .${chipClasses.deleteIconSmall}`]:{marginRight:3}},s.variant==="outlined"&&s.color!=="default"&&{color:(d.vars||d).palette[s.color].main,border:`1px solid ${d.vars?`rgba(${d.vars.palette[s.color].mainChannel} / 0.7)`:alpha_1(d.palette[s.color].main,.7)}`,[`&.${chipClasses.clickable}:hover`]:{backgroundColor:d.vars?`rgba(${d.vars.palette[s.color].mainChannel} / ${d.vars.palette.action.hoverOpacity})`:alpha_1(d.palette[s.color].main,d.palette.action.hoverOpacity)},[`&.${chipClasses.focusVisible}`]:{backgroundColor:d.vars?`rgba(${d.vars.palette[s.color].mainChannel} / ${d.vars.palette.action.focusOpacity})`:alpha_1(d.palette[s.color].main,d.palette.action.focusOpacity)},[`& .${chipClasses.deleteIcon}`]:{color:d.vars?`rgba(${d.vars.palette[s.color].mainChannel} / 0.7)`:alpha_1(d.palette[s.color].main,.7),"&:hover, &:active":{color:(d.vars||d).palette[s.color].main}}})),ChipLabel=styled$1("span",{name:"MuiChip",slot:"Label",overridesResolver:(d,s)=>{const{ownerState:f}=d,{size:_}=f;return[s.label,s[`label${capitalize$1(_)}`]]}})(({ownerState:d})=>_extends$a({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},d.variant==="outlined"&&{paddingLeft:11,paddingRight:11},d.size==="small"&&{paddingLeft:8,paddingRight:8},d.size==="small"&&d.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function isDeleteKeyboardEvent(d){return d.key==="Backspace"||d.key==="Delete"}const Chip=reactExports.forwardRef(function(s,f){const _=useDefaultProps({props:s,name:"MuiChip"}),{avatar:S,className:T,clickable:F,color:M="default",component:P,deleteIcon:H,disabled:J=!1,icon:K,label:oe,onClick:se,onDelete:ae,onKeyDown:ge,onKeyUp:he,size:Be="medium",variant:pe="filled",tabIndex:be,skipFocusWhenDisabled:Re=!1}=_,Fe=_objectWithoutPropertiesLoose$1(_,_excluded$a),Me=reactExports.useRef(null),ve=useForkRef(Me,f),At=Jn=>{Jn.stopPropagation(),ae&&ae(Jn)},Ct=Jn=>{Jn.currentTarget===Jn.target&&isDeleteKeyboardEvent(Jn)&&Jn.preventDefault(),ge&&ge(Jn)},Rt=Jn=>{Jn.currentTarget===Jn.target&&(ae&&isDeleteKeyboardEvent(Jn)?ae(Jn):Jn.key==="Escape"&&Me.current&&Me.current.blur()),he&&he(Jn)},It=F!==!1&&se?!0:F,xt=It||ae?ButtonBase:P||"div",wt=_extends$a({},_,{component:xt,disabled:J,size:Be,color:M,iconColor:reactExports.isValidElement(K)&&K.props.color||M,onDelete:!!ae,clickable:It,variant:pe}),Ft=useUtilityClasses$9(wt),jt=xt===ButtonBase?_extends$a({component:P||"div",focusVisibleClassName:Ft.focusVisible},ae&&{disableRipple:!0}):{};let ta=null;ae&&(ta=H&&reactExports.isValidElement(H)?reactExports.cloneElement(H,{className:clsx(H.props.className,Ft.deleteIcon),onClick:At}):jsxRuntimeExports.jsx(CancelIcon,{className:clsx(Ft.deleteIcon),onClick:At}));let Qn=null;S&&reactExports.isValidElement(S)&&(Qn=reactExports.cloneElement(S,{className:clsx(Ft.avatar,S.props.className)}));let ca=null;return K&&reactExports.isValidElement(K)&&(ca=reactExports.cloneElement(K,{className:clsx(Ft.icon,K.props.className)})),jsxRuntimeExports.jsxs(ChipRoot,_extends$a({as:xt,className:clsx(Ft.root,T),disabled:It&&J?!0:void 0,onClick:se,onKeyDown:Ct,onKeyUp:Rt,ref:ve,tabIndex:Re&&J?-1:be,ownerState:wt},jt,Fe,{children:[Qn||ca,jsxRuntimeExports.jsx(ChipLabel,{className:clsx(Ft.label),ownerState:wt,children:oe}),ta]}))});function getAutocompleteUtilityClass(d){return generateUtilityClass("MuiAutocomplete",d)}const autocompleteClasses=generateUtilityClasses("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var _ClearIcon,_ArrowDropDownIcon;const _excluded$9=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],_excluded2$1=["ref"],_excluded3$1=["key"],_excluded4$1=["key"],useUtilityClasses$8=d=>{const{classes:s,disablePortal:f,expanded:_,focused:S,fullWidth:T,hasClearIcon:F,hasPopupIcon:M,inputFocused:P,popupOpen:H,size:J}=d,K={root:["root",_&&"expanded",S&&"focused",T&&"fullWidth",F&&"hasClearIcon",M&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",P&&"inputFocused"],tag:["tag",`tagSize${capitalize$1(J)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",H&&"popupIndicatorOpen"],popper:["popper",f&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return composeClasses(K,getAutocompleteUtilityClass,s)},AutocompleteRoot=styled$1("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(d,s)=>{const{ownerState:f}=d,{fullWidth:_,hasClearIcon:S,hasPopupIcon:T,inputFocused:F,size:M}=f;return[{[`& .${autocompleteClasses.tag}`]:s.tag},{[`& .${autocompleteClasses.tag}`]:s[`tagSize${capitalize$1(M)}`]},{[`& .${autocompleteClasses.inputRoot}`]:s.inputRoot},{[`& .${autocompleteClasses.input}`]:s.input},{[`& .${autocompleteClasses.input}`]:F&&s.inputFocused},s.root,_&&s.fullWidth,T&&s.hasPopupIcon,S&&s.hasClearIcon]}})({[`&.${autocompleteClasses.focused} .${autocompleteClasses.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${autocompleteClasses.clearIndicator}`]:{visibility:"visible"}},[`& .${autocompleteClasses.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${autocompleteClasses.inputRoot}`]:{[`.${autocompleteClasses.hasPopupIcon}&, .${autocompleteClasses.hasClearIcon}&`]:{paddingRight:30},[`.${autocompleteClasses.hasPopupIcon}.${autocompleteClasses.hasClearIcon}&`]:{paddingRight:56},[`& .${autocompleteClasses.input}`]:{width:0,minWidth:30}},[`& .${inputClasses.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${inputClasses.root}.${inputBaseClasses.sizeSmall}`]:{[`& .${inputClasses.input}`]:{padding:"2px 4px 3px 0"}},[`& .${outlinedInputClasses.root}`]:{padding:9,[`.${autocompleteClasses.hasPopupIcon}&, .${autocompleteClasses.hasClearIcon}&`]:{paddingRight:39},[`.${autocompleteClasses.hasPopupIcon}.${autocompleteClasses.hasClearIcon}&`]:{paddingRight:65},[`& .${autocompleteClasses.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${autocompleteClasses.endAdornment}`]:{right:9}},[`& .${outlinedInputClasses.root}.${inputBaseClasses.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${autocompleteClasses.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${filledInputClasses.root}`]:{paddingTop:19,paddingLeft:8,[`.${autocompleteClasses.hasPopupIcon}&, .${autocompleteClasses.hasClearIcon}&`]:{paddingRight:39},[`.${autocompleteClasses.hasPopupIcon}.${autocompleteClasses.hasClearIcon}&`]:{paddingRight:65},[`& .${filledInputClasses.input}`]:{padding:"7px 4px"},[`& .${autocompleteClasses.endAdornment}`]:{right:9}},[`& .${filledInputClasses.root}.${inputBaseClasses.sizeSmall}`]:{paddingBottom:1,[`& .${filledInputClasses.input}`]:{padding:"2.5px 4px"}},[`& .${inputBaseClasses.hiddenLabel}`]:{paddingTop:8},[`& .${filledInputClasses.root}.${inputBaseClasses.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${autocompleteClasses.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${filledInputClasses.root}.${inputBaseClasses.hiddenLabel}.${inputBaseClasses.sizeSmall}`]:{[`& .${autocompleteClasses.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${autocompleteClasses.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${autocompleteClasses.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${autocompleteClasses.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${autocompleteClasses.inputRoot}`]:{flexWrap:"wrap"}}}]}),AutocompleteEndAdornment=styled$1("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(d,s)=>s.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),AutocompleteClearIndicator=styled$1(IconButton,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(d,s)=>s.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),AutocompletePopupIndicator=styled$1(IconButton,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:d},s)=>_extends$a({},s.popupIndicator,d.popupOpen&&s.popupIndicatorOpen)})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),AutocompletePopper=styled$1(Popper,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(d,s)=>{const{ownerState:f}=d;return[{[`& .${autocompleteClasses.option}`]:s.option},s.popper,f.disablePortal&&s.popperDisablePortal]}})(({theme:d})=>({zIndex:(d.vars||d).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]})),AutocompletePaper=styled$1(Paper,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(d,s)=>s.paper})(({theme:d})=>_extends$a({},d.typography.body1,{overflow:"auto"})),AutocompleteLoading=styled$1("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(d,s)=>s.loading})(({theme:d})=>({color:(d.vars||d).palette.text.secondary,padding:"14px 16px"})),AutocompleteNoOptions=styled$1("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(d,s)=>s.noOptions})(({theme:d})=>({color:(d.vars||d).palette.text.secondary,padding:"14px 16px"})),AutocompleteListbox=styled$1("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(d,s)=>s.listbox})(({theme:d})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${autocompleteClasses.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[d.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${autocompleteClasses.focused}`]:{backgroundColor:(d.vars||d).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(d.vars||d).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${autocompleteClasses.focusVisible}`]:{backgroundColor:(d.vars||d).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:d.vars?`rgba(${d.vars.palette.primary.mainChannel} / ${d.vars.palette.action.selectedOpacity})`:alpha_1(d.palette.primary.main,d.palette.action.selectedOpacity),[`&.${autocompleteClasses.focused}`]:{backgroundColor:d.vars?`rgba(${d.vars.palette.primary.mainChannel} / calc(${d.vars.palette.action.selectedOpacity} + ${d.vars.palette.action.hoverOpacity}))`:alpha_1(d.palette.primary.main,d.palette.action.selectedOpacity+d.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(d.vars||d).palette.action.selected}},[`&.${autocompleteClasses.focusVisible}`]:{backgroundColor:d.vars?`rgba(${d.vars.palette.primary.mainChannel} / calc(${d.vars.palette.action.selectedOpacity} + ${d.vars.palette.action.focusOpacity}))`:alpha_1(d.palette.primary.main,d.palette.action.selectedOpacity+d.palette.action.focusOpacity)}}}})),AutocompleteGroupLabel=styled$1(ListSubheader,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(d,s)=>s.groupLabel})(({theme:d})=>({backgroundColor:(d.vars||d).palette.background.paper,top:-8})),AutocompleteGroupUl=styled$1("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(d,s)=>s.groupUl})({padding:0,[`& .${autocompleteClasses.option}`]:{paddingLeft:24}}),Autocomplete=reactExports.forwardRef(function(s,f){var _,S,T,F;const M=useDefaultProps({props:s,name:"MuiAutocomplete"}),{autoComplete:P=!1,autoHighlight:H=!1,autoSelect:J=!1,blurOnSelect:K=!1,ChipProps:oe,className:se,clearIcon:ae=_ClearIcon||(_ClearIcon=jsxRuntimeExports.jsx(ClearIcon,{fontSize:"small"})),clearOnBlur:ge=!M.freeSolo,clearOnEscape:he=!1,clearText:Be="Clear",closeText:pe="Close",componentsProps:be={},defaultValue:Re=M.multiple?[]:null,disableClearable:Fe=!1,disableCloseOnSelect:Me=!1,disabled:ve=!1,disabledItemsFocusable:At=!1,disableListWrap:Ct=!1,disablePortal:Rt=!1,filterSelectedOptions:It=!1,forcePopupIcon:xt="auto",freeSolo:wt=!1,fullWidth:Ft=!1,getLimitTagsText:jt=aA=>`+${aA}`,getOptionLabel:ta,groupBy:Qn,handleHomeEndKeys:ca=!M.freeSolo,includeInputInList:Jn=!1,limitTags:wA=-1,ListboxComponent:LA="ul",ListboxProps:ZA,loading:xI=!1,loadingText:cI="Loading",multiple:pI=!1,noOptionsText:aI="No options",openOnFocus:nI=!1,openText:uA="Open",PaperComponent:aa=Paper,PopperComponent:eA=Popper,popupIcon:DA=_ArrowDropDownIcon||(_ArrowDropDownIcon=jsxRuntimeExports.jsx(ArrowDropDownIcon,{})),readOnly:xA=!1,renderGroup:ua,renderInput:sA,renderOption:oA,renderTags:fA,selectOnFocus:lA=!M.freeSolo,size:gA="medium",slotProps:WA={}}=M,JA=_objectWithoutPropertiesLoose$1(M,_excluded$9),{getRootProps:_I,getInputProps:HI,getInputLabelProps:Nt,getPopupIndicatorProps:bA,getClearProps:hA,getTagProps:II,getListboxProps:OI,getOptionProps:ba,value:IA,dirty:MA,expanded:EI,id:wI,popupOpen:vI,focused:WI,focusedTag:GI,anchorEl:NI,setAnchorEl:tC,inputValue:mC,groupedOptions:yC}=useAutocomplete(_extends$a({},M,{componentName:"Autocomplete"})),QC=!Fe&&!ve&&MA&&!xA,_C=(!wt||xt===!0)&&xt!==!1,{onMouseDown:vC}=HI(),{ref:RC}=ZA??{},MC=OI(),{ref:Hr}=MC,zn=_objectWithoutPropertiesLoose$1(MC,_excluded2$1),na=useForkRef(Hr,RC),YA=ta||(aA=>{var BA;return(BA=aA.label)!=null?BA:aA}),GA=_extends$a({},M,{disablePortal:Rt,expanded:EI,focused:WI,fullWidth:Ft,getOptionLabel:YA,hasClearIcon:QC,hasPopupIcon:_C,inputFocused:GI===-1,popupOpen:vI,size:gA}),AI=useUtilityClasses$8(GA);let tI;if(pI&&IA.length>0){const aA=BA=>_extends$a({className:AI.tag,disabled:ve},II(BA));fA?tI=fA(IA,aA,GA):tI=IA.map((BA,uI)=>{const mI=aA({index:uI}),{key:qI}=mI,gC=_objectWithoutPropertiesLoose$1(mI,_excluded3$1);return jsxRuntimeExports.jsx(Chip,_extends$a({label:YA(BA),size:gA},gC,oe),qI)})}if(wA>-1&&Array.isArray(tI)){const aA=tI.length-wA;!WI&&aA>0&&(tI=tI.splice(0,wA),tI.push(jsxRuntimeExports.jsx("span",{className:AI.tag,children:jt(aA)},tI.length)))}const JI=ua||(aA=>jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(AutocompleteGroupLabel,{className:AI.groupLabel,ownerState:GA,component:"div",children:aA.group}),jsxRuntimeExports.jsx(AutocompleteGroupUl,{className:AI.groupUl,ownerState:GA,children:aA.children})]},aA.key)),sC=oA||((aA,BA)=>{const{key:uI}=aA,mI=_objectWithoutPropertiesLoose$1(aA,_excluded4$1);return jsxRuntimeExports.jsx("li",_extends$a({},mI,{children:YA(BA)}),uI)}),XI=(aA,BA)=>{const uI=ba({option:aA,index:BA});return sC(_extends$a({},uI,{className:AI.option}),aA,{selected:uI["aria-selected"],index:BA,inputValue:mC},GA)},Vt=(_=WA.clearIndicator)!=null?_:be.clearIndicator,Un=(S=WA.paper)!=null?S:be.paper,Kn=(T=WA.popper)!=null?T:be.popper,qt=(F=WA.popupIndicator)!=null?F:be.popupIndicator,Xt=aA=>jsxRuntimeExports.jsx(AutocompletePopper,_extends$a({as:eA,disablePortal:Rt,style:{width:NI?NI.clientWidth:null},ownerState:GA,role:"presentation",anchorEl:NI,open:vI},Kn,{className:clsx(AI.popper,Kn==null?void 0:Kn.className),children:jsxRuntimeExports.jsx(AutocompletePaper,_extends$a({ownerState:GA,as:aa},Un,{className:clsx(AI.paper,Un==null?void 0:Un.className),children:aA}))}));let ga=null;return yC.length>0?ga=Xt(jsxRuntimeExports.jsx(AutocompleteListbox,_extends$a({as:LA,className:AI.listbox,ownerState:GA},zn,ZA,{ref:na,children:yC.map((aA,BA)=>Qn?JI({key:aA.key,group:aA.group,children:aA.options.map((uI,mI)=>XI(uI,aA.index+mI))}):XI(aA,BA))}))):xI&&yC.length===0?ga=Xt(jsxRuntimeExports.jsx(AutocompleteLoading,{className:AI.loading,ownerState:GA,children:cI})):yC.length===0&&!wt&&!xI&&(ga=Xt(jsxRuntimeExports.jsx(AutocompleteNoOptions,{className:AI.noOptions,ownerState:GA,role:"presentation",onMouseDown:aA=>{aA.preventDefault()},children:aI}))),jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(AutocompleteRoot,_extends$a({ref:f,className:clsx(AI.root,se),ownerState:GA},_I(JA),{children:sA({id:wI,disabled:ve,fullWidth:!0,size:gA==="small"?"small":void 0,InputLabelProps:Nt(),InputProps:_extends$a({ref:tC,className:AI.inputRoot,startAdornment:tI,onClick:aA=>{aA.target===aA.currentTarget&&vC(aA)}},(QC||_C)&&{endAdornment:jsxRuntimeExports.jsxs(AutocompleteEndAdornment,{className:AI.endAdornment,ownerState:GA,children:[QC?jsxRuntimeExports.jsx(AutocompleteClearIndicator,_extends$a({},hA(),{"aria-label":Be,title:Be,ownerState:GA},Vt,{className:clsx(AI.clearIndicator,Vt==null?void 0:Vt.className),children:ae})):null,_C?jsxRuntimeExports.jsx(AutocompletePopupIndicator,_extends$a({},bA(),{disabled:ve,"aria-label":vI?pe:uA,title:vI?pe:uA,ownerState:GA},qt,{className:clsx(AI.popupIndicator,qt==null?void 0:qt.className),children:DA})):null]})}),inputProps:_extends$a({className:AI.input,disabled:ve,readOnly:xA},HI())})})),NI?ga:null]})});function getButtonGroupUtilityClass(d){return generateUtilityClass("MuiButtonGroup",d)}const buttonGroupClasses=generateUtilityClasses("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),_excluded$8=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],overridesResolver=(d,s)=>{const{ownerState:f}=d;return[{[`& .${buttonGroupClasses.grouped}`]:s.grouped},{[`& .${buttonGroupClasses.grouped}`]:s[`grouped${capitalize$1(f.orientation)}`]},{[`& .${buttonGroupClasses.grouped}`]:s[`grouped${capitalize$1(f.variant)}`]},{[`& .${buttonGroupClasses.grouped}`]:s[`grouped${capitalize$1(f.variant)}${capitalize$1(f.orientation)}`]},{[`& .${buttonGroupClasses.grouped}`]:s[`grouped${capitalize$1(f.variant)}${capitalize$1(f.color)}`]},{[`& .${buttonGroupClasses.firstButton}`]:s.firstButton},{[`& .${buttonGroupClasses.lastButton}`]:s.lastButton},{[`& .${buttonGroupClasses.middleButton}`]:s.middleButton},s.root,s[f.variant],f.disableElevation===!0&&s.disableElevation,f.fullWidth&&s.fullWidth,f.orientation==="vertical"&&s.vertical]},useUtilityClasses$7=d=>{const{classes:s,color:f,disabled:_,disableElevation:S,fullWidth:T,orientation:F,variant:M}=d,P={root:["root",M,F==="vertical"&&"vertical",T&&"fullWidth",S&&"disableElevation"],grouped:["grouped",`grouped${capitalize$1(F)}`,`grouped${capitalize$1(M)}`,`grouped${capitalize$1(M)}${capitalize$1(F)}`,`grouped${capitalize$1(M)}${capitalize$1(f)}`,_&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return composeClasses(P,getButtonGroupUtilityClass,s)},ButtonGroupRoot=styled$1("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver})(({theme:d,ownerState:s})=>_extends$a({display:"inline-flex",borderRadius:(d.vars||d).shape.borderRadius},s.variant==="contained"&&{boxShadow:(d.vars||d).shadows[2]},s.disableElevation&&{boxShadow:"none"},s.fullWidth&&{width:"100%"},s.orientation==="vertical"&&{flexDirection:"column"},{[`& .${buttonGroupClasses.grouped}`]:_extends$a({minWidth:40,"&:hover":_extends$a({},s.variant==="contained"&&{boxShadow:"none"})},s.variant==="contained"&&{boxShadow:"none"}),[`& .${buttonGroupClasses.firstButton},& .${buttonGroupClasses.middleButton}`]:_extends$a({},s.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},s.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},s.variant==="text"&&s.orientation==="horizontal"&&{borderRight:d.vars?`1px solid rgba(${d.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${d.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${buttonGroupClasses.disabled}`]:{borderRight:`1px solid ${(d.vars||d).palette.action.disabled}`}},s.variant==="text"&&s.orientation==="vertical"&&{borderBottom:d.vars?`1px solid rgba(${d.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${d.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${buttonGroupClasses.disabled}`]:{borderBottom:`1px solid ${(d.vars||d).palette.action.disabled}`}},s.variant==="text"&&s.color!=="inherit"&&{borderColor:d.vars?`rgba(${d.vars.palette[s.color].mainChannel} / 0.5)`:alpha_1(d.palette[s.color].main,.5)},s.variant==="outlined"&&s.orientation==="horizontal"&&{borderRightColor:"transparent"},s.variant==="outlined"&&s.orientation==="vertical"&&{borderBottomColor:"transparent"},s.variant==="contained"&&s.orientation==="horizontal"&&{borderRight:`1px solid ${(d.vars||d).palette.grey[400]}`,[`&.${buttonGroupClasses.disabled}`]:{borderRight:`1px solid ${(d.vars||d).palette.action.disabled}`}},s.variant==="contained"&&s.orientation==="vertical"&&{borderBottom:`1px solid ${(d.vars||d).palette.grey[400]}`,[`&.${buttonGroupClasses.disabled}`]:{borderBottom:`1px solid ${(d.vars||d).palette.action.disabled}`}},s.variant==="contained"&&s.color!=="inherit"&&{borderColor:(d.vars||d).palette[s.color].dark},{"&:hover":_extends$a({},s.variant==="outlined"&&s.orientation==="horizontal"&&{borderRightColor:"currentColor"},s.variant==="outlined"&&s.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${buttonGroupClasses.lastButton},& .${buttonGroupClasses.middleButton}`]:_extends$a({},s.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},s.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},s.variant==="outlined"&&s.orientation==="horizontal"&&{marginLeft:-1},s.variant==="outlined"&&s.orientation==="vertical"&&{marginTop:-1})})),ButtonGroup=reactExports.forwardRef(function(s,f){const _=useDefaultProps({props:s,name:"MuiButtonGroup"}),{children:S,className:T,color:F="primary",component:M="div",disabled:P=!1,disableElevation:H=!1,disableFocusRipple:J=!1,disableRipple:K=!1,fullWidth:oe=!1,orientation:se="horizontal",size:ae="medium",variant:ge="outlined"}=_,he=_objectWithoutPropertiesLoose$1(_,_excluded$8),Be=_extends$a({},_,{color:F,component:M,disabled:P,disableElevation:H,disableFocusRipple:J,disableRipple:K,fullWidth:oe,orientation:se,size:ae,variant:ge}),pe=useUtilityClasses$7(Be),be=reactExports.useMemo(()=>({className:pe.grouped,color:F,disabled:P,disableElevation:H,disableFocusRipple:J,disableRipple:K,fullWidth:oe,size:ae,variant:ge}),[F,P,H,J,K,oe,ae,ge,pe.grouped]),Re=getValidReactChildren(S),Fe=Re.length,Me=ve=>{const At=ve===0,Ct=ve===Fe-1;return At&&Ct?"":At?pe.firstButton:Ct?pe.lastButton:pe.middleButton};return jsxRuntimeExports.jsx(ButtonGroupRoot,_extends$a({as:M,role:"group",className:clsx(pe.root,T),ref:f,ownerState:Be},he,{children:jsxRuntimeExports.jsx(ButtonGroupContext.Provider,{value:be,children:Re.map((ve,At)=>jsxRuntimeExports.jsx(ButtonGroupButtonContext.Provider,{value:Me(At),children:ve},At))})}))});function getSwitchBaseUtilityClass(d){return generateUtilityClass("PrivateSwitchBase",d)}generateUtilityClasses("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const _excluded$7=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],useUtilityClasses$6=d=>{const{classes:s,checked:f,disabled:_,edge:S}=d,T={root:["root",f&&"checked",_&&"disabled",S&&`edge${capitalize$1(S)}`],input:["input"]};return composeClasses(T,getSwitchBaseUtilityClass,s)},SwitchBaseRoot=styled$1(ButtonBase)(({ownerState:d})=>_extends$a({padding:9,borderRadius:"50%"},d.edge==="start"&&{marginLeft:d.size==="small"?-3:-12},d.edge==="end"&&{marginRight:d.size==="small"?-3:-12})),SwitchBaseInput=styled$1("input",{shouldForwardProp:rootShouldForwardProp})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),SwitchBase=reactExports.forwardRef(function(s,f){const{autoFocus:_,checked:S,checkedIcon:T,className:F,defaultChecked:M,disabled:P,disableFocusRipple:H=!1,edge:J=!1,icon:K,id:oe,inputProps:se,inputRef:ae,name:ge,onBlur:he,onChange:Be,onFocus:pe,readOnly:be,required:Re=!1,tabIndex:Fe,type:Me,value:ve}=s,At=_objectWithoutPropertiesLoose$1(s,_excluded$7),[Ct,Rt]=useControlled({controlled:S,default:!!M,name:"SwitchBase",state:"checked"}),It=useFormControl(),xt=Jn=>{pe&&pe(Jn),It&&It.onFocus&&It.onFocus(Jn)},wt=Jn=>{he&&he(Jn),It&&It.onBlur&&It.onBlur(Jn)},Ft=Jn=>{if(Jn.nativeEvent.defaultPrevented)return;const wA=Jn.target.checked;Rt(wA),Be&&Be(Jn,wA)};let jt=P;It&&typeof jt>"u"&&(jt=It.disabled);const ta=Me==="checkbox"||Me==="radio",Qn=_extends$a({},s,{checked:Ct,disabled:jt,disableFocusRipple:H,edge:J}),ca=useUtilityClasses$6(Qn);return jsxRuntimeExports.jsxs(SwitchBaseRoot,_extends$a({component:"span",className:clsx(ca.root,F),centerRipple:!0,focusRipple:!H,disabled:jt,tabIndex:null,role:void 0,onFocus:xt,onBlur:wt,ownerState:Qn,ref:f},At,{children:[jsxRuntimeExports.jsx(SwitchBaseInput,_extends$a({autoFocus:_,checked:S,defaultChecked:M,className:ca.input,disabled:jt,id:ta?oe:void 0,name:ge,onChange:Ft,readOnly:be,ref:ae,required:Re,ownerState:Qn,tabIndex:Fe,type:Me},Me==="checkbox"&&ve===void 0?{}:{value:ve},se)),Ct?T:K]}))}),CheckBoxOutlineBlankIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),CheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),IndeterminateCheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function getCheckboxUtilityClass(d){return generateUtilityClass("MuiCheckbox",d)}const checkboxClasses=generateUtilityClasses("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),_excluded$6=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],useUtilityClasses$5=d=>{const{classes:s,indeterminate:f,color:_,size:S}=d,T={root:["root",f&&"indeterminate",`color${capitalize$1(_)}`,`size${capitalize$1(S)}`]},F=composeClasses(T,getCheckboxUtilityClass,s);return _extends$a({},s,F)},CheckboxRoot=styled$1(SwitchBase,{shouldForwardProp:d=>rootShouldForwardProp(d)||d==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(d,s)=>{const{ownerState:f}=d;return[s.root,f.indeterminate&&s.indeterminate,s[`size${capitalize$1(f.size)}`],f.color!=="default"&&s[`color${capitalize$1(f.color)}`]]}})(({theme:d,ownerState:s})=>_extends$a({color:(d.vars||d).palette.text.secondary},!s.disableRipple&&{"&:hover":{backgroundColor:d.vars?`rgba(${s.color==="default"?d.vars.palette.action.activeChannel:d.vars.palette[s.color].mainChannel} / ${d.vars.palette.action.hoverOpacity})`:alpha_1(s.color==="default"?d.palette.action.active:d.palette[s.color].main,d.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},s.color!=="default"&&{[`&.${checkboxClasses.checked}, &.${checkboxClasses.indeterminate}`]:{color:(d.vars||d).palette[s.color].main},[`&.${checkboxClasses.disabled}`]:{color:(d.vars||d).palette.action.disabled}})),defaultCheckedIcon$1=jsxRuntimeExports.jsx(CheckBoxIcon,{}),defaultIcon$1=jsxRuntimeExports.jsx(CheckBoxOutlineBlankIcon,{}),defaultIndeterminateIcon=jsxRuntimeExports.jsx(IndeterminateCheckBoxIcon,{}),Checkbox=reactExports.forwardRef(function(s,f){var _,S;const T=useDefaultProps({props:s,name:"MuiCheckbox"}),{checkedIcon:F=defaultCheckedIcon$1,color:M="primary",icon:P=defaultIcon$1,indeterminate:H=!1,indeterminateIcon:J=defaultIndeterminateIcon,inputProps:K,size:oe="medium",className:se}=T,ae=_objectWithoutPropertiesLoose$1(T,_excluded$6),ge=H?J:P,he=H?J:F,Be=_extends$a({},T,{color:M,indeterminate:H,size:oe}),pe=useUtilityClasses$5(Be);return jsxRuntimeExports.jsx(CheckboxRoot,_extends$a({type:"checkbox",inputProps:_extends$a({"data-indeterminate":H},K),icon:reactExports.cloneElement(ge,{fontSize:(_=ge.props.fontSize)!=null?_:oe}),checkedIcon:reactExports.cloneElement(he,{fontSize:(S=he.props.fontSize)!=null?S:oe}),ownerState:Be,ref:f,className:clsx(pe.root,se)},ae,{classes:pe}))}),Stack$1=createStack({createStyledComponent:styled$1("div",{name:"MuiStack",slot:"Root",overridesResolver:(d,s)=>s.root}),useThemeProps:d=>useDefaultProps({props:d,name:"MuiStack"})});function getFormControlLabelUtilityClasses(d){return generateUtilityClass("MuiFormControlLabel",d)}const formControlLabelClasses=generateUtilityClasses("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),_excluded$5=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],useUtilityClasses$4=d=>{const{classes:s,disabled:f,labelPlacement:_,error:S,required:T}=d,F={root:["root",f&&"disabled",`labelPlacement${capitalize$1(_)}`,S&&"error",T&&"required"],label:["label",f&&"disabled"],asterisk:["asterisk",S&&"error"]};return composeClasses(F,getFormControlLabelUtilityClasses,s)},FormControlLabelRoot=styled$1("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(d,s)=>{const{ownerState:f}=d;return[{[`& .${formControlLabelClasses.label}`]:s.label},s.root,s[`labelPlacement${capitalize$1(f.labelPlacement)}`]]}})(({theme:d,ownerState:s})=>_extends$a({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${formControlLabelClasses.disabled}`]:{cursor:"default"}},s.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},s.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},s.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${formControlLabelClasses.label}`]:{[`&.${formControlLabelClasses.disabled}`]:{color:(d.vars||d).palette.text.disabled}}})),AsteriskComponent=styled$1("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(d,s)=>s.asterisk})(({theme:d})=>({[`&.${formControlLabelClasses.error}`]:{color:(d.vars||d).palette.error.main}})),FormControlLabel=reactExports.forwardRef(function(s,f){var _,S;const T=useDefaultProps({props:s,name:"MuiFormControlLabel"}),{className:F,componentsProps:M={},control:P,disabled:H,disableTypography:J,label:K,labelPlacement:oe="end",required:se,slotProps:ae={}}=T,ge=_objectWithoutPropertiesLoose$1(T,_excluded$5),he=useFormControl(),Be=(_=H??P.props.disabled)!=null?_:he==null?void 0:he.disabled,pe=se??P.props.required,be={disabled:Be,required:pe};["checked","name","onChange","value","inputRef"].forEach(Ct=>{typeof P.props[Ct]>"u"&&typeof T[Ct]<"u"&&(be[Ct]=T[Ct])});const Re=formControlState({props:T,muiFormControl:he,states:["error"]}),Fe=_extends$a({},T,{disabled:Be,labelPlacement:oe,required:pe,error:Re.error}),Me=useUtilityClasses$4(Fe),ve=(S=ae.typography)!=null?S:M.typography;let At=K;return At!=null&&At.type!==Typography&&!J&&(At=jsxRuntimeExports.jsx(Typography,_extends$a({component:"span"},ve,{className:clsx(Me.label,ve==null?void 0:ve.className),children:At}))),jsxRuntimeExports.jsxs(FormControlLabelRoot,_extends$a({className:clsx(Me.root,F),ownerState:Fe,ref:f},ge,{children:[reactExports.cloneElement(P,be),pe?jsxRuntimeExports.jsxs(Stack$1,{display:"block",children:[At,jsxRuntimeExports.jsxs(AsteriskComponent,{ownerState:Fe,"aria-hidden":!0,className:Me.asterisk,children:["","*"]})]}):At]}))});function getFormGroupUtilityClass(d){return generateUtilityClass("MuiFormGroup",d)}generateUtilityClasses("MuiFormGroup",["root","row","error"]);const _excluded$4=["className","row"],useUtilityClasses$3=d=>{const{classes:s,row:f,error:_}=d;return composeClasses({root:["root",f&&"row",_&&"error"]},getFormGroupUtilityClass,s)},FormGroupRoot=styled$1("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(d,s)=>{const{ownerState:f}=d;return[s.root,f.row&&s.row]}})(({ownerState:d})=>_extends$a({display:"flex",flexDirection:"column",flexWrap:"wrap"},d.row&&{flexDirection:"row"})),FormGroup=reactExports.forwardRef(function(s,f){const _=useDefaultProps({props:s,name:"MuiFormGroup"}),{className:S,row:T=!1}=_,F=_objectWithoutPropertiesLoose$1(_,_excluded$4),M=useFormControl(),P=formControlState({props:_,muiFormControl:M,states:["error"]}),H=_extends$a({},_,{row:T,error:P.error}),J=useUtilityClasses$3(H);return jsxRuntimeExports.jsx(FormGroupRoot,_extends$a({className:clsx(J.root,S),ownerState:H,ref:f},F))}),RadioButtonUncheckedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),RadioButtonCheckedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),RadioButtonIconRoot=styled$1("span",{shouldForwardProp:rootShouldForwardProp})({position:"relative",display:"flex"}),RadioButtonIconBackground=styled$1(RadioButtonUncheckedIcon)({transform:"scale(1)"}),RadioButtonIconDot=styled$1(RadioButtonCheckedIcon)(({theme:d,ownerState:s})=>_extends$a({left:0,position:"absolute",transform:"scale(0)",transition:d.transitions.create("transform",{easing:d.transitions.easing.easeIn,duration:d.transitions.duration.shortest})},s.checked&&{transform:"scale(1)",transition:d.transitions.create("transform",{easing:d.transitions.easing.easeOut,duration:d.transitions.duration.shortest})}));function RadioButtonIcon(d){const{checked:s=!1,classes:f={},fontSize:_}=d,S=_extends$a({},d,{checked:s});return jsxRuntimeExports.jsxs(RadioButtonIconRoot,{className:f.root,ownerState:S,children:[jsxRuntimeExports.jsx(RadioButtonIconBackground,{fontSize:_,className:f.background,ownerState:S}),jsxRuntimeExports.jsx(RadioButtonIconDot,{fontSize:_,className:f.dot,ownerState:S})]})}const RadioGroupContext=reactExports.createContext(void 0);function useRadioGroup(){return reactExports.useContext(RadioGroupContext)}function getRadioUtilityClass(d){return generateUtilityClass("MuiRadio",d)}const radioClasses=generateUtilityClasses("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),_excluded$3=["checked","checkedIcon","color","icon","name","onChange","size","className"],useUtilityClasses$2=d=>{const{classes:s,color:f,size:_}=d,S={root:["root",`color${capitalize$1(f)}`,_!=="medium"&&`size${capitalize$1(_)}`]};return _extends$a({},s,composeClasses(S,getRadioUtilityClass,s))},RadioRoot=styled$1(SwitchBase,{shouldForwardProp:d=>rootShouldForwardProp(d)||d==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(d,s)=>{const{ownerState:f}=d;return[s.root,f.size!=="medium"&&s[`size${capitalize$1(f.size)}`],s[`color${capitalize$1(f.color)}`]]}})(({theme:d,ownerState:s})=>_extends$a({color:(d.vars||d).palette.text.secondary},!s.disableRipple&&{"&:hover":{backgroundColor:d.vars?`rgba(${s.color==="default"?d.vars.palette.action.activeChannel:d.vars.palette[s.color].mainChannel} / ${d.vars.palette.action.hoverOpacity})`:alpha_1(s.color==="default"?d.palette.action.active:d.palette[s.color].main,d.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},s.color!=="default"&&{[`&.${radioClasses.checked}`]:{color:(d.vars||d).palette[s.color].main}},{[`&.${radioClasses.disabled}`]:{color:(d.vars||d).palette.action.disabled}}));function areEqualValues(d,s){return typeof s=="object"&&s!==null?d===s:String(d)===String(s)}const defaultCheckedIcon=jsxRuntimeExports.jsx(RadioButtonIcon,{checked:!0}),defaultIcon=jsxRuntimeExports.jsx(RadioButtonIcon,{}),Radio=reactExports.forwardRef(function(s,f){var _,S;const T=useDefaultProps({props:s,name:"MuiRadio"}),{checked:F,checkedIcon:M=defaultCheckedIcon,color:P="primary",icon:H=defaultIcon,name:J,onChange:K,size:oe="medium",className:se}=T,ae=_objectWithoutPropertiesLoose$1(T,_excluded$3),ge=_extends$a({},T,{color:P,size:oe}),he=useUtilityClasses$2(ge),Be=useRadioGroup();let pe=F;const be=createChainedFunction(K,Be&&Be.onChange);let Re=J;return Be&&(typeof pe>"u"&&(pe=areEqualValues(Be.value,T.value)),typeof Re>"u"&&(Re=Be.name)),jsxRuntimeExports.jsx(RadioRoot,_extends$a({type:"radio",icon:reactExports.cloneElement(H,{fontSize:(_=defaultIcon.props.fontSize)!=null?_:oe}),checkedIcon:reactExports.cloneElement(M,{fontSize:(S=defaultCheckedIcon.props.fontSize)!=null?S:oe}),ownerState:ge,classes:he,name:Re,checked:pe,onChange:be,ref:f,className:clsx(he.root,se)},ae))});function getRadioGroupUtilityClass(d){return generateUtilityClass("MuiRadioGroup",d)}generateUtilityClasses("MuiRadioGroup",["root","row","error"]);const _excluded$2=["actions","children","className","defaultValue","name","onChange","value"],useUtilityClasses$1=d=>{const{classes:s,row:f,error:_}=d;return composeClasses({root:["root",f&&"row",_&&"error"]},getRadioGroupUtilityClass,s)},RadioGroup=reactExports.forwardRef(function(s,f){const{actions:_,children:S,className:T,defaultValue:F,name:M,onChange:P,value:H}=s,J=_objectWithoutPropertiesLoose$1(s,_excluded$2),K=reactExports.useRef(null),oe=useUtilityClasses$1(s),[se,ae]=useControlled({controlled:H,default:F,name:"RadioGroup"});reactExports.useImperativeHandle(_,()=>({focus:()=>{let pe=K.current.querySelector("input:not(:disabled):checked");pe||(pe=K.current.querySelector("input:not(:disabled)")),pe&&pe.focus()}}),[]);const ge=useForkRef(f,K),he=useId$1(M),Be=reactExports.useMemo(()=>({name:he,onChange(pe){ae(pe.target.value),P&&P(pe,pe.target.value)},value:se}),[he,P,ae,se]);return jsxRuntimeExports.jsx(RadioGroupContext.Provider,{value:Be,children:jsxRuntimeExports.jsx(FormGroup,_extends$a({role:"radiogroup",ref:ge,className:clsx(oe.root,T)},J,{children:S}))})});function areArraysEqual(d,s,f=(_,S)=>_===S){return d.length===s.length&&d.every((_,S)=>f(_,s[S]))}const INTENTIONAL_DRAG_COUNT_THRESHOLD=2;function asc(d,s){return d-s}function findClosest(d,s){var f;const{index:_}=(f=d.reduce((S,T,F)=>{const M=Math.abs(s-T);return S===null||M<S.distance||M===S.distance?{distance:M,index:F}:S},null))!=null?f:{};return _}function trackFinger(d,s){if(s.current!==void 0&&d.changedTouches){const f=d;for(let _=0;_<f.changedTouches.length;_+=1){const S=f.changedTouches[_];if(S.identifier===s.current)return{x:S.clientX,y:S.clientY}}return!1}return{x:d.clientX,y:d.clientY}}function valueToPercent(d,s,f){return(d-s)*100/(f-s)}function percentToValue(d,s,f){return(f-s)*d+s}function getDecimalPrecision(d){if(Math.abs(d)<1){const f=d.toExponential().split("e-"),_=f[0].split(".")[1];return(_?_.length:0)+parseInt(f[1],10)}const s=d.toString().split(".")[1];return s?s.length:0}function roundValueToStep(d,s,f){const _=Math.round((d-f)/s)*s+f;return Number(_.toFixed(getDecimalPrecision(s)))}function setValueIndex({values:d,newValue:s,index:f}){const _=d.slice();return _[f]=s,_.sort(asc)}function focusThumb({sliderRef:d,activeIndex:s,setActive:f}){var _,S;const T=ownerDocument(d.current);if(!((_=d.current)!=null&&_.contains(T.activeElement))||Number(T==null||(S=T.activeElement)==null?void 0:S.getAttribute("data-index"))!==s){var F;(F=d.current)==null||F.querySelector(`[type="range"][data-index="${s}"]`).focus()}f&&f(s)}function areValuesEqual(d,s){return typeof d=="number"&&typeof s=="number"?d===s:typeof d=="object"&&typeof s=="object"?areArraysEqual(d,s):!1}const axisProps={horizontal:{offset:d=>({left:`${d}%`}),leap:d=>({width:`${d}%`})},"horizontal-reverse":{offset:d=>({right:`${d}%`}),leap:d=>({width:`${d}%`})},vertical:{offset:d=>({bottom:`${d}%`}),leap:d=>({height:`${d}%`})}},Identity$1=d=>d;let cachedSupportsTouchActionNone;function doesSupportTouchActionNone(){return cachedSupportsTouchActionNone===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?cachedSupportsTouchActionNone=CSS.supports("touch-action","none"):cachedSupportsTouchActionNone=!0),cachedSupportsTouchActionNone}function useSlider(d){const{"aria-labelledby":s,defaultValue:f,disabled:_=!1,disableSwap:S=!1,isRtl:T=!1,marks:F=!1,max:M=100,min:P=0,name:H,onChange:J,onChangeCommitted:K,orientation:oe="horizontal",rootRef:se,scale:ae=Identity$1,step:ge=1,shiftStep:he=10,tabIndex:Be,value:pe}=d,be=reactExports.useRef(),[Re,Fe]=reactExports.useState(-1),[Me,ve]=reactExports.useState(-1),[At,Ct]=reactExports.useState(!1),Rt=reactExports.useRef(0),[It,xt]=useControlled({controlled:pe,default:f??P,name:"Slider"}),wt=J&&((ba,IA,MA)=>{const EI=ba.nativeEvent||ba,wI=new EI.constructor(EI.type,EI);Object.defineProperty(wI,"target",{writable:!0,value:{value:IA,name:H}}),J(wI,IA,MA)}),Ft=Array.isArray(It);let jt=Ft?It.slice().sort(asc):[It];jt=jt.map(ba=>ba==null?P:clamp$4(ba,P,M));const ta=F===!0&&ge!==null?[...Array(Math.floor((M-P)/ge)+1)].map((ba,IA)=>({value:P+ge*IA})):F||[],Qn=ta.map(ba=>ba.value),{isFocusVisibleRef:ca,onBlur:Jn,onFocus:wA,ref:LA}=useIsFocusVisible(),[ZA,xI]=reactExports.useState(-1),cI=reactExports.useRef(),pI=useForkRef(LA,cI),aI=useForkRef(se,pI),nI=ba=>IA=>{var MA;const EI=Number(IA.currentTarget.getAttribute("data-index"));wA(IA),ca.current===!0&&xI(EI),ve(EI),ba==null||(MA=ba.onFocus)==null||MA.call(ba,IA)},uA=ba=>IA=>{var MA;Jn(IA),ca.current===!1&&xI(-1),ve(-1),ba==null||(MA=ba.onBlur)==null||MA.call(ba,IA)},aa=(ba,IA)=>{const MA=Number(ba.currentTarget.getAttribute("data-index")),EI=jt[MA],wI=Qn.indexOf(EI);let vI=IA;if(ta&&ge==null){const WI=Qn[Qn.length-1];vI>WI?vI=WI:vI<Qn[0]?vI=Qn[0]:vI=vI<EI?Qn[wI-1]:Qn[wI+1]}if(vI=clamp$4(vI,P,M),Ft){S&&(vI=clamp$4(vI,jt[MA-1]||-1/0,jt[MA+1]||1/0));const WI=vI;vI=setValueIndex({values:jt,newValue:vI,index:MA});let GI=MA;S||(GI=vI.indexOf(WI)),focusThumb({sliderRef:cI,activeIndex:GI})}xt(vI),xI(MA),wt&&!areValuesEqual(vI,It)&&wt(ba,vI,MA),K&&K(ba,vI)},eA=ba=>IA=>{var MA;if(ge!==null){const EI=Number(IA.currentTarget.getAttribute("data-index")),wI=jt[EI];let vI=null;(IA.key==="ArrowLeft"||IA.key==="ArrowDown")&&IA.shiftKey||IA.key==="PageDown"?vI=Math.max(wI-he,P):((IA.key==="ArrowRight"||IA.key==="ArrowUp")&&IA.shiftKey||IA.key==="PageUp")&&(vI=Math.min(wI+he,M)),vI!==null&&(aa(IA,vI),IA.preventDefault())}ba==null||(MA=ba.onKeyDown)==null||MA.call(ba,IA)};useEnhancedEffect(()=>{if(_&&cI.current.contains(document.activeElement)){var ba;(ba=document.activeElement)==null||ba.blur()}},[_]),_&&Re!==-1&&Fe(-1),_&&ZA!==-1&&xI(-1);const DA=ba=>IA=>{var MA;(MA=ba.onChange)==null||MA.call(ba,IA),aa(IA,IA.target.valueAsNumber)},xA=reactExports.useRef();let ua=oe;T&&oe==="horizontal"&&(ua+="-reverse");const sA=({finger:ba,move:IA=!1})=>{const{current:MA}=cI,{width:EI,height:wI,bottom:vI,left:WI}=MA.getBoundingClientRect();let GI;ua.indexOf("vertical")===0?GI=(vI-ba.y)/wI:GI=(ba.x-WI)/EI,ua.indexOf("-reverse")!==-1&&(GI=1-GI);let NI;if(NI=percentToValue(GI,P,M),ge)NI=roundValueToStep(NI,ge,P);else{const mC=findClosest(Qn,NI);NI=Qn[mC]}NI=clamp$4(NI,P,M);let tC=0;if(Ft){IA?tC=xA.current:tC=findClosest(jt,NI),S&&(NI=clamp$4(NI,jt[tC-1]||-1/0,jt[tC+1]||1/0));const mC=NI;NI=setValueIndex({values:jt,newValue:NI,index:tC}),S&&IA||(tC=NI.indexOf(mC),xA.current=tC)}return{newValue:NI,activeIndex:tC}},oA=useEventCallback(ba=>{const IA=trackFinger(ba,be);if(!IA)return;if(Rt.current+=1,ba.type==="mousemove"&&ba.buttons===0){fA(ba);return}const{newValue:MA,activeIndex:EI}=sA({finger:IA,move:!0});focusThumb({sliderRef:cI,activeIndex:EI,setActive:Fe}),xt(MA),!At&&Rt.current>INTENTIONAL_DRAG_COUNT_THRESHOLD&&Ct(!0),wt&&!areValuesEqual(MA,It)&&wt(ba,MA,EI)}),fA=useEventCallback(ba=>{const IA=trackFinger(ba,be);if(Ct(!1),!IA)return;const{newValue:MA}=sA({finger:IA,move:!0});Fe(-1),ba.type==="touchend"&&ve(-1),K&&K(ba,MA),be.current=void 0,gA()}),lA=useEventCallback(ba=>{if(_)return;doesSupportTouchActionNone()||ba.preventDefault();const IA=ba.changedTouches[0];IA!=null&&(be.current=IA.identifier);const MA=trackFinger(ba,be);if(MA!==!1){const{newValue:wI,activeIndex:vI}=sA({finger:MA});focusThumb({sliderRef:cI,activeIndex:vI,setActive:Fe}),xt(wI),wt&&!areValuesEqual(wI,It)&&wt(ba,wI,vI)}Rt.current=0;const EI=ownerDocument(cI.current);EI.addEventListener("touchmove",oA,{passive:!0}),EI.addEventListener("touchend",fA,{passive:!0})}),gA=reactExports.useCallback(()=>{const ba=ownerDocument(cI.current);ba.removeEventListener("mousemove",oA),ba.removeEventListener("mouseup",fA),ba.removeEventListener("touchmove",oA),ba.removeEventListener("touchend",fA)},[fA,oA]);reactExports.useEffect(()=>{const{current:ba}=cI;return ba.addEventListener("touchstart",lA,{passive:doesSupportTouchActionNone()}),()=>{ba.removeEventListener("touchstart",lA),gA()}},[gA,lA]),reactExports.useEffect(()=>{_&&gA()},[_,gA]);const WA=ba=>IA=>{var MA;if((MA=ba.onMouseDown)==null||MA.call(ba,IA),_||IA.defaultPrevented||IA.button!==0)return;IA.preventDefault();const EI=trackFinger(IA,be);if(EI!==!1){const{newValue:vI,activeIndex:WI}=sA({finger:EI});focusThumb({sliderRef:cI,activeIndex:WI,setActive:Fe}),xt(vI),wt&&!areValuesEqual(vI,It)&&wt(IA,vI,WI)}Rt.current=0;const wI=ownerDocument(cI.current);wI.addEventListener("mousemove",oA,{passive:!0}),wI.addEventListener("mouseup",fA)},JA=valueToPercent(Ft?jt[0]:P,P,M),_I=valueToPercent(jt[jt.length-1],P,M)-JA,HI=(ba={})=>{const IA=extractEventHandlers(ba),MA={onMouseDown:WA(IA||{})},EI=_extends$a({},IA,MA);return _extends$a({},ba,{ref:aI},EI)},Nt=ba=>IA=>{var MA;(MA=ba.onMouseOver)==null||MA.call(ba,IA);const EI=Number(IA.currentTarget.getAttribute("data-index"));ve(EI)},bA=ba=>IA=>{var MA;(MA=ba.onMouseLeave)==null||MA.call(ba,IA),ve(-1)};return{active:Re,axis:ua,axisProps,dragging:At,focusedThumbIndex:ZA,getHiddenInputProps:(ba={})=>{var IA;const MA=extractEventHandlers(ba),EI={onChange:DA(MA||{}),onFocus:nI(MA||{}),onBlur:uA(MA||{}),onKeyDown:eA(MA||{})},wI=_extends$a({},MA,EI);return _extends$a({tabIndex:Be,"aria-labelledby":s,"aria-orientation":oe,"aria-valuemax":ae(M),"aria-valuemin":ae(P),name:H,type:"range",min:d.min,max:d.max,step:d.step===null&&d.marks?"any":(IA=d.step)!=null?IA:void 0,disabled:_},ba,wI,{style:_extends$a({},visuallyHidden,{direction:T?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:HI,getThumbProps:(ba={})=>{const IA=extractEventHandlers(ba),MA={onMouseOver:Nt(IA||{}),onMouseLeave:bA(IA||{})};return _extends$a({},ba,IA,MA)},marks:ta,open:Me,range:Ft,rootRef:aI,trackLeap:_I,trackOffset:JA,values:jt,getThumbStyle:ba=>({pointerEvents:Re!==-1&&Re!==ba?"none":void 0})}}const shouldSpreadAdditionalProps=d=>!d||!isHostComponent(d);function getSliderUtilityClass(d){return generateUtilityClass("MuiSlider",d)}const sliderClasses=generateUtilityClasses("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),useValueLabelClasses=d=>{const{open:s}=d;return{offset:clsx(s&&sliderClasses.valueLabelOpen),circle:sliderClasses.valueLabelCircle,label:sliderClasses.valueLabelLabel}};function SliderValueLabel$1(d){const{children:s,className:f,value:_}=d,S=useValueLabelClasses(d);return s?reactExports.cloneElement(s,{className:clsx(s.props.className)},jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[s.props.children,jsxRuntimeExports.jsx("span",{className:clsx(S.offset,f),"aria-hidden":!0,children:jsxRuntimeExports.jsx("span",{className:S.circle,children:jsxRuntimeExports.jsx("span",{className:S.label,children:_})})})]})):null}const _excluded$1=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function Identity(d){return d}const SliderRoot=styled$1("span",{name:"MuiSlider",slot:"Root",overridesResolver:(d,s)=>{const{ownerState:f}=d;return[s.root,s[`color${capitalize$1(f.color)}`],f.size!=="medium"&&s[`size${capitalize$1(f.size)}`],f.marked&&s.marked,f.orientation==="vertical"&&s.vertical,f.track==="inverted"&&s.trackInverted,f.track===!1&&s.trackFalse]}})(({theme:d})=>{var s;return{borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${sliderClasses.disabled}`]:{pointerEvents:"none",cursor:"default",color:(d.vars||d).palette.grey[400]},[`&.${sliderClasses.dragging}`]:{[`& .${sliderClasses.thumb}, & .${sliderClasses.track}`]:{transition:"none"}},variants:[...Object.keys(((s=d.vars)!=null?s:d).palette).filter(f=>{var _;return((_=d.vars)!=null?_:d).palette[f].main}).map(f=>({props:{color:f},style:{color:(d.vars||d).palette[f].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}}),SliderRail=styled$1("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(d,s)=>s.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),SliderTrack=styled$1("span",{name:"MuiSlider",slot:"Track",overridesResolver:(d,s)=>s.track})(({theme:d})=>{var s;return{display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:d.transitions.create(["left","width","bottom","height"],{duration:d.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.keys(((s=d.vars)!=null?s:d).palette).filter(f=>{var _;return((_=d.vars)!=null?_:d).palette[f].main}).map(f=>({props:{color:f,track:"inverted"},style:_extends$a({},d.vars?{backgroundColor:d.vars.palette.Slider[`${f}Track`],borderColor:d.vars.palette.Slider[`${f}Track`]}:_extends$a({backgroundColor:lighten_1(d.palette[f].main,.62),borderColor:lighten_1(d.palette[f].main,.62)},d.applyStyles("dark",{backgroundColor:darken_1(d.palette[f].main,.5)}),d.applyStyles("dark",{borderColor:darken_1(d.palette[f].main,.5)})))}))]}}),SliderThumb=styled$1("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(d,s)=>{const{ownerState:f}=d;return[s.thumb,s[`thumbColor${capitalize$1(f.color)}`],f.size!=="medium"&&s[`thumbSize${capitalize$1(f.size)}`]]}})(({theme:d})=>{var s;return{position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:d.transitions.create(["box-shadow","left","bottom"],{duration:d.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(d.vars||d).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${sliderClasses.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.keys(((s=d.vars)!=null?s:d).palette).filter(f=>{var _;return((_=d.vars)!=null?_:d).palette[f].main}).map(f=>({props:{color:f},style:{[`&:hover, &.${sliderClasses.focusVisible}`]:_extends$a({},d.vars?{boxShadow:`0px 0px 0px 8px rgba(${d.vars.palette[f].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${alpha_1(d.palette[f].main,.16)}`},{"@media (hover: none)":{boxShadow:"none"}}),[`&.${sliderClasses.active}`]:_extends$a({},d.vars?{boxShadow:`0px 0px 0px 14px rgba(${d.vars.palette[f].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${alpha_1(d.palette[f].main,.16)}`})}}))]}}),SliderValueLabel=styled$1(SliderValueLabel$1,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(d,s)=>s.valueLabel})(({theme:d})=>_extends$a({zIndex:1,whiteSpace:"nowrap"},d.typography.body2,{fontWeight:500,transition:d.transitions.create(["transform"],{duration:d.transitions.duration.shortest}),position:"absolute",backgroundColor:(d.vars||d).palette.grey[600],borderRadius:2,color:(d.vars||d).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${sliderClasses.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${sliderClasses.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:d.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]})),SliderMark=styled$1("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:d=>slotShouldForwardProp(d)&&d!=="markActive",overridesResolver:(d,s)=>{const{markActive:f}=d;return[s.mark,f&&s.markActive]}})(({theme:d})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(d.vars||d).palette.background.paper,opacity:.8}}]})),SliderMarkLabel=styled$1("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:d=>slotShouldForwardProp(d)&&d!=="markLabelActive",overridesResolver:(d,s)=>s.markLabel})(({theme:d})=>_extends$a({},d.typography.body2,{color:(d.vars||d).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(d.vars||d).palette.text.primary}}]})),useUtilityClasses=d=>{const{disabled:s,dragging:f,marked:_,orientation:S,track:T,classes:F,color:M,size:P}=d,H={root:["root",s&&"disabled",f&&"dragging",_&&"marked",S==="vertical"&&"vertical",T==="inverted"&&"trackInverted",T===!1&&"trackFalse",M&&`color${capitalize$1(M)}`,P&&`size${capitalize$1(P)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",s&&"disabled",P&&`thumbSize${capitalize$1(P)}`,M&&`thumbColor${capitalize$1(M)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return composeClasses(H,getSliderUtilityClass,F)},Forward=({children:d})=>d,Slider=reactExports.forwardRef(function(s,f){var _,S,T,F,M,P,H,J,K,oe,se,ae,ge,he,Be,pe,be,Re,Fe,Me,ve,At,Ct,Rt;const It=useDefaultProps({props:s,name:"MuiSlider"}),xt=useRtl(),{"aria-label":wt,"aria-valuetext":Ft,"aria-labelledby":jt,component:ta="span",components:Qn={},componentsProps:ca={},color:Jn="primary",classes:wA,className:LA,disableSwap:ZA=!1,disabled:xI=!1,getAriaLabel:cI,getAriaValueText:pI,marks:aI=!1,max:nI=100,min:uA=0,orientation:aa="horizontal",shiftStep:eA=10,size:DA="medium",step:xA=1,scale:ua=Identity,slotProps:sA,slots:oA,track:fA="normal",valueLabelDisplay:lA="off",valueLabelFormat:gA=Identity}=It,WA=_objectWithoutPropertiesLoose$1(It,_excluded$1),JA=_extends$a({},It,{isRtl:xt,max:nI,min:uA,classes:wA,disabled:xI,disableSwap:ZA,orientation:aa,marks:aI,color:Jn,size:DA,step:xA,shiftStep:eA,scale:ua,track:fA,valueLabelDisplay:lA,valueLabelFormat:gA}),{axisProps:_I,getRootProps:HI,getHiddenInputProps:Nt,getThumbProps:bA,open:hA,active:II,axis:OI,focusedThumbIndex:ba,range:IA,dragging:MA,marks:EI,values:wI,trackOffset:vI,trackLeap:WI,getThumbStyle:GI}=useSlider(_extends$a({},JA,{rootRef:f}));JA.marked=EI.length>0&&EI.some(qt=>qt.label),JA.dragging=MA,JA.focusedThumbIndex=ba;const NI=useUtilityClasses(JA),tC=(_=(S=oA==null?void 0:oA.root)!=null?S:Qn.Root)!=null?_:SliderRoot,mC=(T=(F=oA==null?void 0:oA.rail)!=null?F:Qn.Rail)!=null?T:SliderRail,yC=(M=(P=oA==null?void 0:oA.track)!=null?P:Qn.Track)!=null?M:SliderTrack,QC=(H=(J=oA==null?void 0:oA.thumb)!=null?J:Qn.Thumb)!=null?H:SliderThumb,_C=(K=(oe=oA==null?void 0:oA.valueLabel)!=null?oe:Qn.ValueLabel)!=null?K:SliderValueLabel,vC=(se=(ae=oA==null?void 0:oA.mark)!=null?ae:Qn.Mark)!=null?se:SliderMark,RC=(ge=(he=oA==null?void 0:oA.markLabel)!=null?he:Qn.MarkLabel)!=null?ge:SliderMarkLabel,MC=(Be=(pe=oA==null?void 0:oA.input)!=null?pe:Qn.Input)!=null?Be:"input",Hr=(be=sA==null?void 0:sA.root)!=null?be:ca.root,zn=(Re=sA==null?void 0:sA.rail)!=null?Re:ca.rail,na=(Fe=sA==null?void 0:sA.track)!=null?Fe:ca.track,PA=(Me=sA==null?void 0:sA.thumb)!=null?Me:ca.thumb,YA=(ve=sA==null?void 0:sA.valueLabel)!=null?ve:ca.valueLabel,GA=(At=sA==null?void 0:sA.mark)!=null?At:ca.mark,AI=(Ct=sA==null?void 0:sA.markLabel)!=null?Ct:ca.markLabel,tI=(Rt=sA==null?void 0:sA.input)!=null?Rt:ca.input,rC=useSlotProps({elementType:tC,getSlotProps:HI,externalSlotProps:Hr,externalForwardedProps:WA,additionalProps:_extends$a({},shouldSpreadAdditionalProps(tC)&&{as:ta}),ownerState:_extends$a({},JA,Hr==null?void 0:Hr.ownerState),className:[NI.root,LA]}),JI=useSlotProps({elementType:mC,externalSlotProps:zn,ownerState:JA,className:NI.rail}),cC=useSlotProps({elementType:yC,externalSlotProps:na,additionalProps:{style:_extends$a({},_I[OI].offset(vI),_I[OI].leap(WI))},ownerState:_extends$a({},JA,na==null?void 0:na.ownerState),className:NI.track}),sC=useSlotProps({elementType:QC,getSlotProps:bA,externalSlotProps:PA,ownerState:_extends$a({},JA,PA==null?void 0:PA.ownerState),className:NI.thumb}),XI=useSlotProps({elementType:_C,externalSlotProps:YA,ownerState:_extends$a({},JA,YA==null?void 0:YA.ownerState),className:NI.valueLabel}),Vt=useSlotProps({elementType:vC,externalSlotProps:GA,ownerState:JA,className:NI.mark}),Un=useSlotProps({elementType:RC,externalSlotProps:AI,ownerState:JA,className:NI.markLabel}),Kn=useSlotProps({elementType:MC,getSlotProps:Nt,externalSlotProps:tI,ownerState:JA});return jsxRuntimeExports.jsxs(tC,_extends$a({},rC,{children:[jsxRuntimeExports.jsx(mC,_extends$a({},JI)),jsxRuntimeExports.jsx(yC,_extends$a({},cC)),EI.filter(qt=>qt.value>=uA&&qt.value<=nI).map((qt,Xt)=>{const ga=valueToPercent(qt.value,uA,nI),aA=_I[OI].offset(ga);let BA;return fA===!1?BA=wI.indexOf(qt.value)!==-1:BA=fA==="normal"&&(IA?qt.value>=wI[0]&&qt.value<=wI[wI.length-1]:qt.value<=wI[0])||fA==="inverted"&&(IA?qt.value<=wI[0]||qt.value>=wI[wI.length-1]:qt.value>=wI[0]),jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(vC,_extends$a({"data-index":Xt},Vt,!isHostComponent(vC)&&{markActive:BA},{style:_extends$a({},aA,Vt.style),className:clsx(Vt.className,BA&&NI.markActive)})),qt.label!=null?jsxRuntimeExports.jsx(RC,_extends$a({"aria-hidden":!0,"data-index":Xt},Un,!isHostComponent(RC)&&{markLabelActive:BA},{style:_extends$a({},aA,Un.style),className:clsx(NI.markLabel,Un.className,BA&&NI.markLabelActive),children:qt.label})):null]},Xt)}),wI.map((qt,Xt)=>{const ga=valueToPercent(qt,uA,nI),aA=_I[OI].offset(ga),BA=lA==="off"?Forward:_C;return jsxRuntimeExports.jsx(BA,_extends$a({},!isHostComponent(BA)&&{valueLabelFormat:gA,valueLabelDisplay:lA,value:typeof gA=="function"?gA(ua(qt),Xt):gA,index:Xt,open:hA===Xt||II===Xt||lA==="on",disabled:xI},XI,{children:jsxRuntimeExports.jsx(QC,_extends$a({"data-index":Xt},sC,{className:clsx(NI.thumb,sC.className,II===Xt&&NI.active,ba===Xt&&NI.focusVisible),style:_extends$a({},aA,GI(Xt),sC.style),children:jsxRuntimeExports.jsx(MC,_extends$a({"data-index":Xt,"aria-label":cI?cI(Xt):wt,"aria-valuenow":ua(qt),"aria-labelledby":jt,"aria-valuetext":pI?pI(ua(qt),Xt):Ft,value:wI[Xt]},Kn))}))}),Xt)})]}))}),filterOptions$1=createFilterOptions({limit:256}),MaterialWrapper=observer(function({children:s}){const f=window.mdv.chartManager.theme==="dark",_=useOuterContainer(),S=reactExports.useMemo(()=>({container:_}),[_]),T=reactExports.useMemo(()=>createTheme$1({palette:{mode:f?"dark":"light"},components:{MuiPopper:{defaultProps:S},MuiPopover:{defaultProps:S},MuiDialog:{defaultProps:S},MuiAutocomplete:{defaultProps:{filterOptions:filterOptions$1}},MuiTextField:{defaultProps:{size:"small"}},MuiRadio:{styleOverrides:{root:{padding:"5px"}}}},typography:{fontFamily:["Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(","),fontSize:12}}),[f,S]);return jsxRuntimeExports.jsx(ThemeProvider,{theme:T,children:jsxRuntimeExports.jsx(CssBaseline,{enableColorScheme:!0,children:s})})}),createMdvPortal=(d,s,f)=>{const _=createRoot(s);return _.render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(OuterContainerProvider,{parent:f,children:jsxRuntimeExports.jsx(MaterialWrapper,{children:jsxRuntimeExports.jsx(ProjectProvider,{children:d})})})})),_};function isObject$a(d){return Object.prototype.toString.call(d)==="[object Object]"}function objectSize(d){return Array.isArray(d)?d.length:isObject$a(d)?Object.keys(d).length:0}function stringifyForCopying(d,s){if(typeof d=="string")return d;try{return JSON.stringify(d,(f,_)=>{switch(typeof _){case"bigint":return String(_)+"n";case"number":case"boolean":case"object":case"string":return _;default:return String(_)}},s)}catch(f){return`${f.name}: ${f.message}`||"JSON.stringify failed"}}function isCollapsed(d,s,f,_,S,T){if(T&&T.collapsed!==void 0)return!!T.collapsed;if(typeof _=="boolean")return _;if(typeof _=="number"&&s>_)return!0;const F=objectSize(d);if(typeof _=="function"){const M=safeCall(_,[{node:d,depth:s,indexOrName:f,size:F}]);if(typeof M=="boolean")return M}return!!(Array.isArray(d)&&F>S||isObject$a(d)&&F>S)}function isCollapsed_largeArray(d,s,f,_,S,T){if(T&&T.collapsed!==void 0)return!!T.collapsed;if(typeof _=="boolean")return _;if(typeof _=="number"&&s>_)return!0;const F=Math.ceil(d.length/100);if(typeof _=="function"){const M=safeCall(_,[{node:d,depth:s,indexOrName:f,size:F}]);if(typeof M=="boolean")return M}return!!(Array.isArray(d)&&F>S||isObject$a(d)&&F>S)}function ifDisplay(d,s,f){return typeof d=="boolean"?d:!!(typeof d=="number"&&s>d||d==="collapsed"&&f||d==="expanded"&&!f)}function safeCall(d,s){try{return d(...s)}catch(f){reportError(f)}}function editableAdd(d){if(d===!0||isObject$a(d)&&d.add===!0)return!0}function editableEdit(d){if(d===!0||isObject$a(d)&&d.edit===!0)return!0}function editableDelete(d){if(d===!0||isObject$a(d)&&d.delete===!0)return!0}function isReactComponent(d){return typeof d=="function"}function customAdd(d){return!d||d.add===void 0||!!d.add}function customEdit(d){return!d||d.edit===void 0||!!d.edit}function customDelete(d){return!d||d.delete===void 0||!!d.delete}function customCopy(d){return!d||d.enableClipboard===void 0||!!d.enableClipboard}function customMatchesURL(d){return!d||d.matchesURL===void 0||!!d.matchesURL}function resolveEvalFailedNewValue(d,s){return d==="string"?s.trim().replace(/^\"([\s\S]+?)\"$/,"$1"):s}var _path$8;function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(d){for(var s=1;s<arguments.length;s++){var f=arguments[s];for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(d[_]=f[_])}return d},_extends$8.apply(this,arguments)}var SvgAngleDown=function(s){return reactExports.createElement("svg",_extends$8({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},s),_path$8||(_path$8=reactExports.createElement("path",{fill:"currentColor",d:"M12.473 5.806a.666.666 0 0 0-.946 0L8.473 8.86a.667.667 0 0 1-.946 0L4.473 5.806a.667.667 0 1 0-.946.94l3.06 3.06a2 2 0 0 0 2.826 0l3.06-3.06a.667.667 0 0 0 0-.94Z"})))},_path$7;function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(d){for(var s=1;s<arguments.length;s++){var f=arguments[s];for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(d[_]=f[_])}return d},_extends$7.apply(this,arguments)}var SvgCopy=function(s){return reactExports.createElement("svg",_extends$7({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$7||(_path$7=reactExports.createElement("path",{fill:"currentColor",d:"M17.542 2.5h-4.75a3.963 3.963 0 0 0-3.959 3.958v4.75a3.963 3.963 0 0 0 3.959 3.959h4.75a3.963 3.963 0 0 0 3.958-3.959v-4.75A3.963 3.963 0 0 0 17.542 2.5Zm2.375 8.708a2.378 2.378 0 0 1-2.375 2.375h-4.75a2.378 2.378 0 0 1-2.375-2.375v-4.75a2.378 2.378 0 0 1 2.375-2.375h4.75a2.378 2.378 0 0 1 2.375 2.375v4.75Zm-4.75 6.334a3.963 3.963 0 0 1-3.959 3.958h-4.75A3.963 3.963 0 0 1 2.5 17.542v-4.75a3.963 3.963 0 0 1 3.958-3.959.791.791 0 1 1 0 1.584 2.378 2.378 0 0 0-2.375 2.375v4.75a2.378 2.378 0 0 0 2.375 2.375h4.75a2.378 2.378 0 0 0 2.375-2.375.792.792 0 1 1 1.584 0Z"})))},_path$6,_path2$5;function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(d){for(var s=1;s<arguments.length;s++){var f=arguments[s];for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(d[_]=f[_])}return d},_extends$6.apply(this,arguments)}var SvgCopied=function(s){return reactExports.createElement("svg",_extends$6({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$6||(_path$6=reactExports.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.755 3.755 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.755 3.755 0 0 0 17.25 3Zm2.25 14.25a2.25 2.25 0 0 1-2.25 2.25H6.75a2.25 2.25 0 0 1-2.25-2.25V6.75A2.25 2.25 0 0 1 6.75 4.5h10.5a2.25 2.25 0 0 1 2.25 2.25v10.5Z"})),_path2$5||(_path2$5=reactExports.createElement("path",{fill:"#14C786",d:"M10.312 14.45 7.83 11.906a.625.625 0 0 0-.896 0 .659.659 0 0 0 0 .918l2.481 2.546a1.264 1.264 0 0 0 .896.381 1.237 1.237 0 0 0 .895-.38l5.858-6.011a.658.658 0 0 0 0-.919.625.625 0 0 0-.896 0l-5.857 6.01Z"})))};function CopyButton({node:d}){const{customizeCopy:s}=reactExports.useContext(JsonViewContext),[f,_]=reactExports.useState(!1);return f?jsxRuntimeExports.jsx(SvgCopied,{className:"json-view--copy",style:{display:"inline-block"}}):jsxRuntimeExports.jsx(SvgCopy,{onClick:S=>{S.stopPropagation();const T=s(d);typeof T=="string"&&T&&navigator.clipboard.writeText(T),_(!0),setTimeout(()=>_(!1),3e3)},className:"json-view--copy"})}function NameValue({indexOrName:d,value:s,depth:f,parent:_,deleteHandle:S,editHandle:T}){return jsxRuntimeExports.jsxs("div",Object.assign({className:"json-view--pair"},{children:[jsxRuntimeExports.jsx("span",Object.assign({className:typeof d=="number"?"json-view--index":"json-view--property"},{children:d})),":"," ",jsxRuntimeExports.jsx(JsonNode,{node:s,depth:f+1,deleteHandle:S,editHandle:T,parent:_,indexOrName:d})]}))}var _path$5,_path2$4;function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(d){for(var s=1;s<arguments.length;s++){var f=arguments[s];for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(d[_]=f[_])}return d},_extends$5.apply(this,arguments)}var SvgTrash=function(s){return reactExports.createElement("svg",_extends$5({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$5||(_path$5=reactExports.createElement("path",{fill:"currentColor",d:"M18.75 6h-2.325a3.757 3.757 0 0 0-3.675-3h-1.5a3.757 3.757 0 0 0-3.675 3H5.25a.75.75 0 0 0 0 1.5H6v9.75A3.754 3.754 0 0 0 9.75 21h4.5A3.754 3.754 0 0 0 18 17.25V7.5h.75a.75.75 0 1 0 0-1.5Zm-7.5-1.5h1.5A2.255 2.255 0 0 1 14.872 6H9.128a2.255 2.255 0 0 1 2.122-1.5Zm5.25 12.75a2.25 2.25 0 0 1-2.25 2.25h-4.5a2.25 2.25 0 0 1-2.25-2.25V7.5h9v9.75Z"})),_path2$4||(_path2$4=reactExports.createElement("path",{fill:"#DA0000",d:"M10.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75ZM13.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75Z"})))},_path$4,_path2$3;function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(d){for(var s=1;s<arguments.length;s++){var f=arguments[s];for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(d[_]=f[_])}return d},_extends$4.apply(this,arguments)}var SvgAddSquare=function(s){return reactExports.createElement("svg",_extends$4({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$4||(_path$4=reactExports.createElement("path",{fill:"currentColor",d:"M21 6.75v10.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3h10.5A3.754 3.754 0 0 1 21 6.75Zm-1.5 0c0-1.24-1.01-2.25-2.25-2.25H6.75C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25V6.75Z"})),_path2$3||(_path2$3=reactExports.createElement("path",{fill:"#14C786",d:"M15 12.75a.75.75 0 1 0 0-1.5h-2.25V9a.75.75 0 1 0-1.5 0v2.25H9a.75.75 0 1 0 0 1.5h2.25V15a.75.75 0 1 0 1.5 0v-2.25H15Z"})))},_path$3,_path2$2;function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(d){for(var s=1;s<arguments.length;s++){var f=arguments[s];for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(d[_]=f[_])}return d},_extends$3.apply(this,arguments)}var SvgDone=function(s){return reactExports.createElement("svg",_extends$3({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$3||(_path$3=reactExports.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})),_path2$2||(_path2$2=reactExports.createElement("path",{fill:"#14C786",d:"m10.85 13.96-1.986-2.036a.5.5 0 0 0-.716 0 .527.527 0 0 0 0 .735l1.985 2.036a1.01 1.01 0 0 0 .717.305.99.99 0 0 0 .716-.305l4.686-4.808a.526.526 0 0 0 0-.735.5.5 0 0 0-.716 0l-4.687 4.809Z"})))},_path$2,_path2$1;function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(d){for(var s=1;s<arguments.length;s++){var f=arguments[s];for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(d[_]=f[_])}return d},_extends$2.apply(this,arguments)}var SvgCancel=function(s){return reactExports.createElement("svg",_extends$2({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$2||(_path$2=reactExports.createElement("path",{fill:"#DA0000",d:"M15 9a.75.75 0 0 0-1.06 0L12 10.94 10.06 9A.75.75 0 0 0 9 10.06L10.94 12 9 13.94A.75.75 0 0 0 10.06 15L12 13.06 13.94 15A.75.75 0 0 0 15 13.94L13.06 12 15 10.06A.75.75 0 0 0 15 9Z"})),_path2$1||(_path2$1=reactExports.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})))};function LargeArrayNode({originNode:d,node:s,depth:f,index:_,deleteHandle:S,customOptions:T,startIndex:F}){const{enableClipboard:M,src:P,onEdit:H,onChange:J,forceUpdate:K,displaySize:oe}=reactExports.useContext(JsonViewContext),[se,ae]=reactExports.useState(!0),ge=reactExports.useCallback((pe,be,Re)=>{d[pe]=be,H&&H({newValue:be,oldValue:Re,depth:f,src:P,indexOrName:pe,parentType:"array"}),J&&J({type:"edit",depth:f,src:P,indexOrName:pe,parentType:"array"}),K()},[s,H,J,K]),he=pe=>{d.splice(pe,1),K()},Be=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!se&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>ae(!0),className:"jv-size-chevron"},{children:[ifDisplay(oe,f,se)&&jsxRuntimeExports.jsxs("span",Object.assign({className:"jv-size"},{children:[objectSize(s)," Items"]})),jsxRuntimeExports.jsx(SvgAngleDown,{className:"jv-chevron"})]})),!se&&M&&customCopy(T)&&jsxRuntimeExports.jsx(CopyButton,{node:s})]});return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{children:"["}),Be,se?jsxRuntimeExports.jsxs("button",Object.assign({onClick:()=>ae(!1),className:"jv-button"},{children:[F," ... ",F+s.length-1]})):jsxRuntimeExports.jsx("div",Object.assign({className:"jv-indent"},{children:s.map((pe,be)=>jsxRuntimeExports.jsx(NameValue,{indexOrName:be+F,value:pe,depth:f,parent:s,deleteHandle:he,editHandle:ge},String(_)+String(be)))})),jsxRuntimeExports.jsx("span",{children:"]"})]})}function LargeArray({node:d,depth:s,deleteHandle:f,indexOrName:_,customOptions:S}){const T=[];for(let xt=0;xt<d.length;xt+=100)T.push(d.slice(xt,xt+100));const{collapsed:F,enableClipboard:M,collapseObjectsAfterLength:P,editable:H,onDelete:J,src:K,onAdd:oe,onEdit:se,onChange:ae,forceUpdate:ge,displaySize:he}=reactExports.useContext(JsonViewContext),[Be,pe]=reactExports.useState(isCollapsed_largeArray(d,s,_,F,P,S));reactExports.useEffect(()=>{pe(isCollapsed_largeArray(d,s,_,F,P,S))},[F,P]);const[be,Re]=reactExports.useState(!1),Fe=()=>{Re(!1),f&&f(_),J&&J({value:d,depth:s,src:K,indexOrName:_,parentType:"array"}),ae&&ae({type:"delete",depth:s,src:K,indexOrName:_,parentType:"array"})},[Me,ve]=reactExports.useState(!1),At=()=>{const xt=d;xt.push(null),oe&&oe({indexOrName:xt.length-1,depth:s,src:K,parentType:"array"}),ae&&ae({type:"add",indexOrName:xt.length-1,depth:s,src:K,parentType:"array"}),ge()},Ct=be||Me,Rt=()=>{Re(!1),ve(!1)},It=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!Be&&!Ct&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>pe(!0),className:"jv-size-chevron"},{children:[ifDisplay(he,s,Be)&&jsxRuntimeExports.jsxs("span",Object.assign({className:"jv-size"},{children:[d.length," Items"]})),jsxRuntimeExports.jsx(SvgAngleDown,{className:"jv-chevron"})]})),Ct&&jsxRuntimeExports.jsx(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:Me?At:Fe}),Ct&&jsxRuntimeExports.jsx(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:Rt}),!Be&&!Ct&&M&&customCopy(S)&&jsxRuntimeExports.jsx(CopyButton,{node:d}),!Be&&!Ct&&editableAdd(H)&&customAdd(S)&&jsxRuntimeExports.jsx(SvgAddSquare,{className:"json-view--edit",onClick:()=>{At()}}),!Be&&!Ct&&editableDelete(H)&&customDelete(S)&&f&&jsxRuntimeExports.jsx(SvgTrash,{className:"json-view--edit",onClick:()=>Re(!0)})]});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"["}),It,Be?jsxRuntimeExports.jsx("button",Object.assign({onClick:()=>pe(!1),className:"jv-button"},{children:"..."})):jsxRuntimeExports.jsx("div",Object.assign({className:"jv-indent"},{children:T.map((xt,wt)=>jsxRuntimeExports.jsx(LargeArrayNode,{originNode:d,node:xt,depth:s,index:wt,startIndex:wt*100},String(_)+String(wt)))})),jsxRuntimeExports.jsx("span",{children:"]"}),Be&&ifDisplay(he,s,Be)&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>pe(!1),className:"jv-size"},{children:[d.length," Items"]}))]})}function ObjectNode({node:d,depth:s,indexOrName:f,deleteHandle:_,customOptions:S}){const{collapsed:T,enableClipboard:F,ignoreLargeArray:M,collapseObjectsAfterLength:P,editable:H,onDelete:J,src:K,onAdd:oe,onEdit:se,onChange:ae,forceUpdate:ge,displaySize:he}=reactExports.useContext(JsonViewContext);if(!M&&Array.isArray(d)&&d.length>100)return jsxRuntimeExports.jsx(LargeArray,{node:d,depth:s,indexOrName:f,deleteHandle:_,customOptions:S});const Be=isObject$a(d),[pe,be]=reactExports.useState(isCollapsed(d,s,f,T,P,S));reactExports.useEffect(()=>{be(isCollapsed(d,s,f,T,P,S))},[T,P]);const Re=reactExports.useCallback((Qn,ca,Jn)=>{Array.isArray(d)?d[+Qn]=ca:d&&(d[Qn]=ca),se&&se({newValue:ca,oldValue:Jn,depth:s,src:K,indexOrName:Qn,parentType:Be?"object":"array"}),ae&&ae({type:"edit",depth:s,src:K,indexOrName:Qn,parentType:Be?"object":"array"}),ge()},[d,se,ae,ge]),Fe=Qn=>{Array.isArray(d)?d.splice(+Qn,1):d&&delete d[Qn],ge()},[Me,ve]=reactExports.useState(!1),At=()=>{ve(!1),_&&_(f),J&&J({value:d,depth:s,src:K,indexOrName:f,parentType:Be?"object":"array"}),ae&&ae({type:"delete",depth:s,src:K,indexOrName:f,parentType:Be?"object":"array"})},[Ct,Rt]=reactExports.useState(!1),It=reactExports.useRef(null),xt=()=>{var Qn;if(Be){const ca=(Qn=It.current)===null||Qn===void 0?void 0:Qn.value;ca&&(d[ca]=null,It.current&&(It.current.value=""),Rt(!1),oe&&oe({indexOrName:ca,depth:s,src:K,parentType:"object"}),ae&&ae({type:"add",indexOrName:ca,depth:s,src:K,parentType:"object"}))}else if(Array.isArray(d)){const ca=d;ca.push(null),oe&&oe({indexOrName:ca.length-1,depth:s,src:K,parentType:"array"}),ae&&ae({type:"add",indexOrName:ca.length-1,depth:s,src:K,parentType:"array"})}ge()},wt=Qn=>{Qn.key==="Enter"?(Qn.preventDefault(),xt()):Qn.key==="Escape"&&jt()},Ft=Me||Ct,jt=()=>{ve(!1),Rt(!1)},ta=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!pe&&!Ft&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>be(!0),className:"jv-size-chevron"},{children:[ifDisplay(he,s,pe)&&jsxRuntimeExports.jsxs("span",Object.assign({className:"jv-size"},{children:[objectSize(d)," Items"]})),jsxRuntimeExports.jsx(SvgAngleDown,{className:"jv-chevron"})]})),Ct&&Be&&jsxRuntimeExports.jsx("input",{className:"json-view--input",placeholder:"property",ref:It,onKeyDown:wt}),Ft&&jsxRuntimeExports.jsx(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:Ct?xt:At}),Ft&&jsxRuntimeExports.jsx(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:jt}),!pe&&!Ft&&F&&customCopy(S)&&jsxRuntimeExports.jsx(CopyButton,{node:d}),!pe&&!Ft&&editableAdd(H)&&customAdd(S)&&jsxRuntimeExports.jsx(SvgAddSquare,{className:"json-view--edit",onClick:()=>{Be?(Rt(!0),setTimeout(()=>{var Qn;return(Qn=It.current)===null||Qn===void 0?void 0:Qn.focus()})):xt()}}),!pe&&!Ft&&editableDelete(H)&&customDelete(S)&&_&&jsxRuntimeExports.jsx(SvgTrash,{className:"json-view--edit",onClick:()=>ve(!0)})]});return Array.isArray(d)?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"["}),ta,pe?jsxRuntimeExports.jsx("button",Object.assign({onClick:()=>be(!1),className:"jv-button"},{children:"..."})):jsxRuntimeExports.jsx("div",Object.assign({className:"jv-indent"},{children:d.map((Qn,ca)=>jsxRuntimeExports.jsx(NameValue,{indexOrName:ca,value:Qn,depth:s,parent:d,deleteHandle:Fe,editHandle:Re},String(f)+String(ca)))})),jsxRuntimeExports.jsx("span",{children:"]"}),pe&&ifDisplay(he,s,pe)&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>be(!1),className:"jv-size"},{children:[objectSize(d)," Items"]}))]}):Be?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"{"}),ta,pe?jsxRuntimeExports.jsx("button",Object.assign({onClick:()=>be(!1),className:"jv-button"},{children:"..."})):jsxRuntimeExports.jsx("div",Object.assign({className:"jv-indent"},{children:Object.entries(d).map(([Qn,ca])=>jsxRuntimeExports.jsx(NameValue,{indexOrName:Qn,value:ca,depth:s,parent:d,deleteHandle:Fe,editHandle:Re},String(f)+String(Qn)))})),jsxRuntimeExports.jsx("span",{children:"}"}),pe&&ifDisplay(he,s,pe)&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>be(!1),className:"jv-size"},{children:[objectSize(d)," Items"]}))]}):null}const LongString=React.forwardRef(({str:d,className:s,ctrlClick:f},_)=>{let{collapseStringMode:S,collapseStringsAfterLength:T,customizeCollapseStringUI:F}=reactExports.useContext(JsonViewContext);const[M,P]=reactExports.useState(!0),H=reactExports.useRef(null);T=T>0?T:0;const J=d.replace(/\s+/g," "),K=typeof F=="function"?F(J,M):typeof F=="string"?F:"...",oe=se=>{var ae;if((se.ctrlKey||se.metaKey)&&f)f(se);else{const ge=window.getSelection();if(ge&&ge.anchorOffset!==ge.focusOffset&&((ae=ge.anchorNode)===null||ae===void 0?void 0:ae.parentElement)===H.current)return;P(!M)}};if(d.length<=T)return jsxRuntimeExports.jsxs("span",Object.assign({ref:H,className:s,onClick:f},{children:['"',d,'"']}));if(S==="address")return d.length<=10?jsxRuntimeExports.jsxs("span",Object.assign({ref:H,className:s,onClick:f},{children:['"',d,'"']})):jsxRuntimeExports.jsxs("span",Object.assign({ref:H,onClick:oe,className:s+" cursor-pointer"},{children:['"',M?[J.slice(0,6),K,J.slice(-4)]:d,'"']}));if(S==="directly")return jsxRuntimeExports.jsxs("span",Object.assign({ref:H,onClick:oe,className:s+" cursor-pointer"},{children:['"',M?[J.slice(0,T),K]:d,'"']}));if(S==="word"){let se=T,ae=T+1,ge=J,he=1;for(;;){if(/\W/.test(d[se])){ge=d.slice(0,se);break}if(/\W/.test(d[ae])){ge=d.slice(0,ae);break}if(he===6){ge=d.slice(0,T);break}he++,se--,ae++}return jsxRuntimeExports.jsxs("span",Object.assign({ref:H,onClick:oe,className:s+" cursor-pointer"},{children:['"',M?[ge,K]:d,'"']}))}return jsxRuntimeExports.jsxs("span",Object.assign({ref:H,className:s},{children:['"',d,'"']}))});var _path$1;function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(d){for(var s=1;s<arguments.length;s++){var f=arguments[s];for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(d[_]=f[_])}return d},_extends$1.apply(this,arguments)}var SvgEdit=function(s){return reactExports.createElement("svg",_extends$1({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path$1||(_path$1=reactExports.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.754 3.754 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.754 3.754 0 0 0 17.25 3Zm2.25 14.25c0 1.24-1.01 2.25-2.25 2.25H6.75c-1.24 0-2.25-1.01-2.25-2.25V6.75c0-1.24 1.01-2.25 2.25-2.25h10.5c1.24 0 2.25 1.01 2.25 2.25v10.5Zm-6.09-9.466-5.031 5.03a2.981 2.981 0 0 0-.879 2.121v1.19c0 .415.336.75.75.75h1.19c.8 0 1.554-.312 2.12-.879l5.03-5.03a2.252 2.252 0 0 0 0-3.182c-.85-.85-2.331-.85-3.18 0Zm-2.91 7.151c-.28.28-.666.44-1.06.44H9v-.44c0-.4.156-.777.44-1.06l3.187-3.188 1.06 1.061-3.187 3.188Zm5.03-5.03-.782.783-1.06-1.061.782-.782a.766.766 0 0 1 1.06 0 .75.75 0 0 1 0 1.06Z"})))},_path,_path2;function _extends(){return _extends=Object.assign?Object.assign.bind():function(d){for(var s=1;s<arguments.length;s++){var f=arguments[s];for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(d[_]=f[_])}return d},_extends.apply(this,arguments)}var SvgLink=function(s){return reactExports.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},s),_path||(_path=reactExports.createElement("path",{fill:"currentColor",d:"M6.75 3h5.5v1.5h-5.5C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25v-5.5H21v5.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3Z"})),_path2||(_path2=reactExports.createElement("path",{fill:"currentColor",d:"M20.013 3h-3.946a.987.987 0 0 0 0 1.973h1.564l-6.342 6.342a1.004 1.004 0 0 0 0 1.396 1.004 1.004 0 0 0 1.396 0l6.342-6.342v1.564a.987.987 0 0 0 1.973 0V3.987A.987.987 0 0 0 20.013 3Z"})))};function JsonNode({node,depth,deleteHandle:_deleteHandle,indexOrName,parent,editHandle}){const{collapseStringsAfterLength,enableClipboard,editable,src,onDelete,onChange,customizeNode,matchesURL,urlRegExp}=reactExports.useContext(JsonViewContext);let customReturn;if(typeof customizeNode=="function"&&(customReturn=safeCall(customizeNode,[{node,depth,indexOrName}])),customReturn){if(reactExports.isValidElement(customReturn))return customReturn;if(isReactComponent(customReturn)){const d=customReturn;return jsxRuntimeExports.jsx(d,{node,depth,indexOrName})}}if(Array.isArray(node)||isObject$a(node))return jsxRuntimeExports.jsx(ObjectNode,{node,depth,indexOrName,deleteHandle:_deleteHandle,customOptions:typeof customReturn=="object"?customReturn:void 0});{const type=typeof node,[editing,setEditing]=reactExports.useState(!1),[deleting,setDeleting]=reactExports.useState(!1),valueRef=reactExports.useRef(null),edit=()=>{setEditing(!0),setTimeout(()=>{var d,s;(d=window.getSelection())===null||d===void 0||d.selectAllChildren(valueRef.current),(s=valueRef.current)===null||s===void 0||s.focus()})},done=reactExports.useCallback(()=>{let newValue=valueRef.current.innerText;try{(newValue==="{}"||newValue==="[]")&&(newValue=`(${newValue})`);const evalValue=eval(newValue);editHandle&&editHandle(indexOrName,evalValue,node)}catch(d){const s=resolveEvalFailedNewValue(type,newValue);editHandle&&editHandle(indexOrName,s,node)}setEditing(!1)},[editHandle]),cancel=()=>{setEditing(!1),setDeleting(!1)},deleteHandle=()=>{setDeleting(!1),_deleteHandle&&_deleteHandle(indexOrName),onDelete&&onDelete({value:node,depth,src,indexOrName,parentType:Array.isArray(parent)?"array":"object"}),onChange&&onChange({depth,src,indexOrName,parentType:Array.isArray(parent)?"array":"object",type:"delete"})},handleKeyDown=reactExports.useCallback(d=>{d.key==="Enter"?(d.preventDefault(),done()):d.key==="Escape"&&cancel()},[done]),isEditing=editing||deleting,ctrlClick=!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle?d=>{(d.ctrlKey||d.metaKey)&&edit()}:void 0,Icons=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[isEditing&&jsxRuntimeExports.jsx(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:deleting?deleteHandle:done}),isEditing&&jsxRuntimeExports.jsx(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:cancel}),!isEditing&&enableClipboard&&customCopy(customReturn)&&jsxRuntimeExports.jsx(CopyButton,{node}),!isEditing&&matchesURL&&type==="string"&&urlRegExp.test(node)&&customMatchesURL(customReturn)&&jsxRuntimeExports.jsx("a",Object.assign({href:node,target:"_blank",className:"json-view--link"},{children:jsxRuntimeExports.jsx(SvgLink,{})})),!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle&&jsxRuntimeExports.jsx(SvgEdit,{className:"json-view--edit",onClick:edit}),!isEditing&&editableDelete(editable)&&customDelete(customReturn)&&_deleteHandle&&jsxRuntimeExports.jsx(SvgTrash,{className:"json-view--edit",onClick:()=>setDeleting(!0)})]});let className="json-view--string";switch(typeof(customReturn==null?void 0:customReturn.className)=="string"&&(className+=" "+customReturn.className),type){case"number":case"bigint":className="json-view--number";break;case"boolean":className="json-view--boolean";break;case"object":className="json-view--null";break}deleting&&(className+=" json-view--deleting");let displayValue=String(node);type==="bigint"&&(displayValue+="n");const EditingElement=reactExports.useMemo(()=>jsxRuntimeExports.jsx("span",{contentEditable:!0,className,dangerouslySetInnerHTML:{__html:type==="string"?`"${displayValue}"`:displayValue},ref:valueRef,onKeyDown:handleKeyDown}),[displayValue,type,handleKeyDown]);return type==="string"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[editing?EditingElement:node.length>collapseStringsAfterLength?jsxRuntimeExports.jsx(LongString,{str:node,ref:valueRef,className,ctrlClick}):jsxRuntimeExports.jsxs("span",Object.assign({className,onClick:ctrlClick},{children:['"',displayValue,'"']})),Icons]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[editing?EditingElement:jsxRuntimeExports.jsx("span",Object.assign({className,onClick:ctrlClick},{children:displayValue})),Icons]})}}const defaultURLRegExp=/^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/,JsonViewContext=reactExports.createContext({src:void 0,collapseStringsAfterLength:99,collapseStringMode:"directly",customizeCollapseStringUI:void 0,collapseObjectsAfterLength:20,collapsed:!1,enableClipboard:!0,editable:!1,onEdit:void 0,onDelete:void 0,onAdd:void 0,onChange:void 0,forceUpdate:()=>{},customizeNode:void 0,customizeCopy:()=>{},displaySize:void 0,matchesURL:!1,urlRegExp:defaultURLRegExp,ignoreLargeArray:!1});function JsonView({src:d,collapseStringsAfterLength:s=99,collapseStringMode:f="directly",customizeCollapseStringUI:_,collapseObjectsAfterLength:S=99,collapsed:T,enableClipboard:F=!0,editable:M=!1,onEdit:P,onDelete:H,onAdd:J,onChange:K,dark:oe=!1,theme:se="default",customizeNode:ae,customizeCopy:ge=stringifyForCopying,displaySize:he,style:Be,className:pe,matchesURL:be=!1,urlRegExp:Re=defaultURLRegExp,ignoreLargeArray:Fe=!1}){const[Me,ve]=reactExports.useState(0),At=reactExports.useCallback(()=>ve(It=>++It),[]),[Ct,Rt]=reactExports.useState(d);return reactExports.useEffect(()=>Rt(d),[d]),jsxRuntimeExports.jsx(JsonViewContext.Provider,Object.assign({value:{src:Ct,collapseStringsAfterLength:s,collapseStringMode:f,customizeCollapseStringUI:_,collapseObjectsAfterLength:S,collapsed:T,enableClipboard:F,editable:M,onEdit:P,onDelete:H,onAdd:J,onChange:K,forceUpdate:At,customizeNode:ae,customizeCopy:ge,displaySize:he,matchesURL:be,urlRegExp:Re,ignoreLargeArray:Fe}},{children:jsxRuntimeExports.jsx("code",Object.assign({className:"json-view"+(oe?" dark":"")+(se&&se!=="default"?" json-view_"+se:"")+(pe?" "+pe:""),style:Be},{children:jsxRuntimeExports.jsx(JsonNode,{node:Ct,depth:1,editHandle:(It,xt,wt)=>{Rt(xt),P&&P({newValue:xt,oldValue:wt,depth:1,src:Ct,indexOrName:It,parentType:null}),K&&K({type:"edit",depth:1,src:Ct,indexOrName:It,parentType:null})},deleteHandle:()=>{Rt(void 0),H&&H({value:Ct,depth:1,src:Ct,indexOrName:"",parentType:null}),K&&K({depth:1,src:Ct,indexOrName:"",parentType:null,type:"delete"})}})}))}))}function c$2(d,s,f){var _=this,S=reactExports.useRef(null),T=reactExports.useRef(0),F=reactExports.useRef(null),M=reactExports.useRef([]),P=reactExports.useRef(),H=reactExports.useRef(),J=reactExports.useRef(d),K=reactExports.useRef(!0);J.current=d;var oe=typeof window<"u",se=!s&&s!==0&&oe;if(typeof d!="function")throw new TypeError("Expected a function");s=+s||0;var ae=!!(f=f||{}).leading,ge=!("trailing"in f)||!!f.trailing,he="maxWait"in f,Be="debounceOnServer"in f&&!!f.debounceOnServer,pe=he?Math.max(+f.maxWait||0,s):null;reactExports.useEffect(function(){return K.current=!0,function(){K.current=!1}},[]);var be=reactExports.useMemo(function(){var Re=function(Rt){var It=M.current,xt=P.current;return M.current=P.current=null,T.current=Rt,H.current=J.current.apply(xt,It)},Fe=function(Rt,It){se&&cancelAnimationFrame(F.current),F.current=se?requestAnimationFrame(Rt):setTimeout(Rt,It)},Me=function(Rt){if(!K.current)return!1;var It=Rt-S.current;return!S.current||It>=s||It<0||he&&Rt-T.current>=pe},ve=function(Rt){return F.current=null,ge&&M.current?Re(Rt):(M.current=P.current=null,H.current)},At=function Rt(){var It=Date.now();if(Me(It))return ve(It);if(K.current){var xt=s-(It-S.current),wt=he?Math.min(xt,pe-(It-T.current)):xt;Fe(Rt,wt)}},Ct=function(){if(oe||Be){var Rt=Date.now(),It=Me(Rt);if(M.current=[].slice.call(arguments),P.current=_,S.current=Rt,It){if(!F.current&&K.current)return T.current=S.current,Fe(At,s),ae?Re(S.current):H.current;if(he)return Fe(At,s),Re(S.current)}return F.current||Fe(At,s),H.current}};return Ct.cancel=function(){F.current&&(se?cancelAnimationFrame(F.current):clearTimeout(F.current)),T.current=0,M.current=S.current=P.current=F.current=null},Ct.isPending=function(){return!!F.current},Ct.flush=function(){return F.current?ve(Date.now()):H.current},Ct},[ae,he,s,pe,ge,se,oe,Be]);return be}function i$2(d,s){return d===s}function a$1(d,s){return s}function o$1(d,s,f){var _=i$2,S=reactExports.useReducer(a$1,d),T=S[0],F=S[1],M=c$2(reactExports.useCallback(function(H){return F(H)},[F]),s,f),P=reactExports.useRef(d);return _(P.current,d)||(M(d),P.current=d),_(T,d)&&M.cancel(),[T,M]}function filterJSON(d,s){if(!s)return d;const f=s.toLowerCase().split(" ");function _(T,F){const M=F.concat(T).join(" ").toLowerCase();return f.every(P=>M.includes(P))}function S(T,F){if(_("",F))return T;if(typeof T=="string")return _(T,F)?T:null;if(typeof T=="object"&&T!==null){const M={};let P=!1;for(const H in T){const J=S(T[H],F.concat(H));J!==null&&(M[H]=J,P=!0)}if(P||_("",F))return M}return null}return S(d,[])||{}}function Gui$1({json:d,header:s}){const[f,_]=reactExports.useState(""),[S]=o$1(f,300),T=reactExports.useMemo(()=>filterJSON(d,S),[d,S]);return jsxRuntimeExports.jsxs("div",{className:"max-h-[90vh] overflow-auto",children:[s&&jsxRuntimeExports.jsx("h2",{children:s}),jsxRuntimeExports.jsx("input",{type:"text",value:f,onChange:F=>_(F.target.value),placeholder:"Filter..."}),jsxRuntimeExports.jsx(JsonView,{src:T})]})}const DebugChart=observer(({chart:d,header:s})=>jsxRuntimeExports.jsx(Gui$1,{json:d,header:s}));class DebugChartReactWrapper extends BaseDialog{constructor(f,_){const S=_?_.config.title||`${_.config.type} ${_.config.id}`:"",T=_?_.__doc__:document,F={width:500,title:`Debug ${S}`,doc:T,onclose:()=>{_==null||_.dialogs.splice(_.dialogs.indexOf(this),1)}};super(F,f);Bt(this,"_root")}get root(){return this._root}set root(f){this._root=f}init(f){const _=createEl("div",{},this.dialog);this.root=createMdvPortal(jsxRuntimeExports.jsx(DebugChart,{chart:f}),_,this)}close(){super.close(),this.root?this.root.unmount():console.warn("not unmounting react root for dialog because of weirdness")}}const ErrorBoundaryContext=reactExports.createContext(null),initialState$1={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(s){super(s),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState$1}static getDerivedStateFromError(s){return{didCatch:!0,error:s}}resetErrorBoundary(){const{error:s}=this.state;if(s!==null){for(var f,_,S=arguments.length,T=new Array(S),F=0;F<S;F++)T[F]=arguments[F];(f=(_=this.props).onReset)===null||f===void 0||f.call(_,{args:T,reason:"imperative-api"}),this.setState(initialState$1)}}componentDidCatch(s,f){var _,S;(_=(S=this.props).onError)===null||_===void 0||_.call(S,s,f)}componentDidUpdate(s,f){const{didCatch:_}=this.state,{resetKeys:S}=this.props;if(_&&f.error!==null&&hasArrayChanged(s.resetKeys,S)){var T,F;(T=(F=this.props).onReset)===null||T===void 0||T.call(F,{next:S,prev:s.resetKeys,reason:"keys"}),this.setState(initialState$1)}}render(){const{children:s,fallbackRender:f,FallbackComponent:_,fallback:S}=this.props,{didCatch:T,error:F}=this.state;let M=s;if(T){const P={error:F,resetErrorBoundary:this.resetErrorBoundary};if(typeof f=="function")M=f(P);else if(_)M=reactExports.createElement(_,P);else if(S===null||reactExports.isValidElement(S))M=S;else throw F}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:T,error:F,resetErrorBoundary:this.resetErrorBoundary}},M)}}function hasArrayChanged(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return d.length!==s.length||d.some((f,_)=>!Object.is(f,s[_]))}function createContextScope$1(d,s=[]){let f=[];function _(T,F){const M=reactExports.createContext(F),P=f.length;f=[...f,F];const H=K=>{var Be;const{scope:oe,children:se,...ae}=K,ge=((Be=oe==null?void 0:oe[d])==null?void 0:Be[P])||M,he=reactExports.useMemo(()=>ae,Object.values(ae));return jsxRuntimeExports.jsx(ge.Provider,{value:he,children:se})};H.displayName=T+"Provider";function J(K,oe){var ge;const se=((ge=oe==null?void 0:oe[d])==null?void 0:ge[P])||M,ae=reactExports.useContext(se);if(ae)return ae;if(F!==void 0)return F;throw new Error(`\`${K}\` must be used within \`${T}\``)}return[H,J]}const S=()=>{const T=f.map(F=>reactExports.createContext(F));return function(M){const P=(M==null?void 0:M[d])||T;return reactExports.useMemo(()=>({[`__scope${d}`]:{...M,[d]:P}}),[M,P])}};return S.scopeName=d,[_,composeContextScopes$1(S,...s)]}function composeContextScopes$1(...d){const s=d[0];if(d.length===1)return s;const f=()=>{const _=d.map(S=>({useScope:S(),scopeName:S.scopeName}));return function(T){const F=_.reduce((M,{useScope:P,scopeName:H})=>{const K=P(T)[`__scope${H}`];return{...M,...K}},{});return reactExports.useMemo(()=>({[`__scope${s.scopeName}`]:F}),[F])}};return f.scopeName=s.scopeName,f}function createContextScope(d,s=[]){let f=[];function _(T,F){const M=reactExports.createContext(F),P=f.length;f=[...f,F];function H(K){const{scope:oe,children:se,...ae}=K,ge=(oe==null?void 0:oe[d][P])||M,he=reactExports.useMemo(()=>ae,Object.values(ae));return jsxRuntimeExports.jsx(ge.Provider,{value:he,children:se})}function J(K,oe){const se=(oe==null?void 0:oe[d][P])||M,ae=reactExports.useContext(se);if(ae)return ae;if(F!==void 0)return F;throw new Error(`\`${K}\` must be used within \`${T}\``)}return H.displayName=T+"Provider",[H,J]}const S=()=>{const T=f.map(F=>reactExports.createContext(F));return function(M){const P=(M==null?void 0:M[d])||T;return reactExports.useMemo(()=>({[`__scope${d}`]:{...M,[d]:P}}),[M,P])}};return S.scopeName=d,[_,composeContextScopes(S,...s)]}function composeContextScopes(...d){const s=d[0];if(d.length===1)return s;const f=()=>{const _=d.map(S=>({useScope:S(),scopeName:S.scopeName}));return function(T){const F=_.reduce((M,{useScope:P,scopeName:H})=>{const K=P(T)[`__scope${H}`];return{...M,...K}},{});return reactExports.useMemo(()=>({[`__scope${s.scopeName}`]:F}),[F])}};return f.scopeName=s.scopeName,f}function setRef(d,s){typeof d=="function"?d(s):d!=null&&(d.current=s)}function composeRefs(...d){return s=>d.forEach(f=>setRef(f,s))}function useComposedRefs(...d){return reactExports.useCallback(composeRefs(...d),d)}var Slot=reactExports.forwardRef((d,s)=>{const{children:f,..._}=d,S=reactExports.Children.toArray(f),T=S.find(isSlottable);if(T){const F=T.props.children,M=S.map(P=>P===T?reactExports.Children.count(F)>1?reactExports.Children.only(null):reactExports.isValidElement(F)?F.props.children:null:P);return jsxRuntimeExports.jsx(SlotClone,{..._,ref:s,children:reactExports.isValidElement(F)?reactExports.cloneElement(F,void 0,M):null})}return jsxRuntimeExports.jsx(SlotClone,{..._,ref:s,children:f})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((d,s)=>{const{children:f,..._}=d;if(reactExports.isValidElement(f)){const S=getElementRef$1(f);return reactExports.cloneElement(f,{...mergeProps(_,f.props),ref:s?composeRefs(s,S):S})}return reactExports.Children.count(f)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:d})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:d});function isSlottable(d){return reactExports.isValidElement(d)&&d.type===Slottable}function mergeProps(d,s){const f={...s};for(const _ in s){const S=d[_],T=s[_];/^on[A-Z]/.test(_)?S&&T?f[_]=(...M)=>{T(...M),S(...M)}:S&&(f[_]=S):_==="style"?f[_]={...S,...T}:_==="className"&&(f[_]=[S,T].filter(Boolean).join(" "))}return{...d,...f}}function getElementRef$1(d){var _,S;let s=(_=Object.getOwnPropertyDescriptor(d.props,"ref"))==null?void 0:_.get,f=s&&"isReactWarning"in s&&s.isReactWarning;return f?d.ref:(s=(S=Object.getOwnPropertyDescriptor(d,"ref"))==null?void 0:S.get,f=s&&"isReactWarning"in s&&s.isReactWarning,f?d.props.ref:d.props.ref||d.ref)}function createCollection(d){const s=d+"CollectionProvider",[f,_]=createContextScope(s),[S,T]=f(s,{collectionRef:{current:null},itemMap:new Map}),F=se=>{const{scope:ae,children:ge}=se,he=React.useRef(null),Be=React.useRef(new Map).current;return jsxRuntimeExports.jsx(S,{scope:ae,itemMap:Be,collectionRef:he,children:ge})};F.displayName=s;const M=d+"CollectionSlot",P=React.forwardRef((se,ae)=>{const{scope:ge,children:he}=se,Be=T(M,ge),pe=useComposedRefs(ae,Be.collectionRef);return jsxRuntimeExports.jsx(Slot,{ref:pe,children:he})});P.displayName=M;const H=d+"CollectionItemSlot",J="data-radix-collection-item",K=React.forwardRef((se,ae)=>{const{scope:ge,children:he,...Be}=se,pe=React.useRef(null),be=useComposedRefs(ae,pe),Re=T(H,ge);return React.useEffect(()=>(Re.itemMap.set(pe,{ref:pe,...Be}),()=>void Re.itemMap.delete(pe))),jsxRuntimeExports.jsx(Slot,{[J]:"",ref:be,children:he})});K.displayName=H;function oe(se){const ae=T(d+"CollectionConsumer",se);return React.useCallback(()=>{const he=ae.collectionRef.current;if(!he)return[];const Be=Array.from(he.querySelectorAll(`[${J}]`));return Array.from(ae.itemMap.values()).sort((Re,Fe)=>Be.indexOf(Re.ref.current)-Be.indexOf(Fe.ref.current))},[ae.collectionRef,ae.itemMap])}return[{Provider:F,Slot:P,ItemSlot:K},oe,_]}function composeEventHandlers$1(d,s,{checkForDefaultPrevented:f=!0}={}){return function(S){if(d==null||d(S),f===!1||!S.defaultPrevented)return s==null?void 0:s(S)}}function useCallbackRef(d){const s=reactExports.useRef(d);return reactExports.useEffect(()=>{s.current=d}),reactExports.useMemo(()=>(...f)=>{var _;return(_=s.current)==null?void 0:_.call(s,...f)},[])}function useControllableState({prop:d,defaultProp:s,onChange:f=()=>{}}){const[_,S]=useUncontrolledState({defaultProp:s,onChange:f}),T=d!==void 0,F=T?d:_,M=useCallbackRef(f),P=reactExports.useCallback(H=>{if(T){const K=typeof H=="function"?H(d):H;K!==d&&M(K)}else S(H)},[T,d,S,M]);return[F,P]}function useUncontrolledState({defaultProp:d,onChange:s}){const f=reactExports.useState(d),[_]=f,S=reactExports.useRef(_),T=useCallbackRef(s);return reactExports.useEffect(()=>{S.current!==_&&(T(_),S.current=_)},[_,S,T]),f}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((d,s)=>{const f=reactExports.forwardRef((_,S)=>{const{asChild:T,...F}=_,M=T?Slot:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(M,{...F,ref:S})});return f.displayName=`Primitive.${s}`,{...d,[s]:f}},{}),useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};function useStateMachine(d,s){return reactExports.useReducer((f,_)=>s[f][_]??f,d)}var Presence=d=>{const{present:s,children:f}=d,_=usePresence(s),S=typeof f=="function"?f({present:_.isPresent}):reactExports.Children.only(f),T=useComposedRefs(_.ref,getElementRef(S));return typeof f=="function"||_.isPresent?reactExports.cloneElement(S,{ref:T}):null};Presence.displayName="Presence";function usePresence(d){const[s,f]=reactExports.useState(),_=reactExports.useRef({}),S=reactExports.useRef(d),T=reactExports.useRef("none"),F=d?"mounted":"unmounted",[M,P]=useStateMachine(F,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const H=getAnimationName(_.current);T.current=M==="mounted"?H:"none"},[M]),useLayoutEffect2(()=>{const H=_.current,J=S.current;if(J!==d){const oe=T.current,se=getAnimationName(H);d?P("MOUNT"):se==="none"||(H==null?void 0:H.display)==="none"?P("UNMOUNT"):P(J&&oe!==se?"ANIMATION_OUT":"UNMOUNT"),S.current=d}},[d,P]),useLayoutEffect2(()=>{if(s){let H;const J=s.ownerDocument.defaultView??window,K=se=>{const ge=getAnimationName(_.current).includes(se.animationName);if(se.target===s&&ge&&(P("ANIMATION_END"),!S.current)){const he=s.style.animationFillMode;s.style.animationFillMode="forwards",H=J.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=he)})}},oe=se=>{se.target===s&&(T.current=getAnimationName(_.current))};return s.addEventListener("animationstart",oe),s.addEventListener("animationcancel",K),s.addEventListener("animationend",K),()=>{J.clearTimeout(H),s.removeEventListener("animationstart",oe),s.removeEventListener("animationcancel",K),s.removeEventListener("animationend",K)}}else P("ANIMATION_END")},[s,P]),{isPresent:["mounted","unmountSuspended"].includes(M),ref:reactExports.useCallback(H=>{H&&(_.current=getComputedStyle(H)),f(H)},[])}}function getAnimationName(d){return(d==null?void 0:d.animationName)||"none"}function getElementRef(d){var _,S;let s=(_=Object.getOwnPropertyDescriptor(d.props,"ref"))==null?void 0:_.get,f=s&&"isReactWarning"in s&&s.isReactWarning;return f?d.ref:(s=(S=Object.getOwnPropertyDescriptor(d,"ref"))==null?void 0:S.get,f=s&&"isReactWarning"in s&&s.isReactWarning,f?d.props.ref:d.props.ref||d.ref)}var useReactId=React$1.useId||(()=>{}),count$2=0;function useId(d){const[s,f]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{f(_=>_??String(count$2++))},[d]),s?`radix-${s}`:""}var COLLAPSIBLE_NAME="Collapsible",[createCollapsibleContext,createCollapsibleScope]=createContextScope$1(COLLAPSIBLE_NAME),[CollapsibleProvider,useCollapsibleContext]=createCollapsibleContext(COLLAPSIBLE_NAME),Collapsible=reactExports.forwardRef((d,s)=>{const{__scopeCollapsible:f,open:_,defaultOpen:S,disabled:T,onOpenChange:F,...M}=d,[P=!1,H]=useControllableState({prop:_,defaultProp:S,onChange:F});return jsxRuntimeExports.jsx(CollapsibleProvider,{scope:f,disabled:T,contentId:useId(),open:P,onOpenToggle:reactExports.useCallback(()=>H(J=>!J),[H]),children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$1(P),"data-disabled":T?"":void 0,...M,ref:s})})});Collapsible.displayName=COLLAPSIBLE_NAME;var TRIGGER_NAME$1="CollapsibleTrigger",CollapsibleTrigger=reactExports.forwardRef((d,s)=>{const{__scopeCollapsible:f,..._}=d,S=useCollapsibleContext(TRIGGER_NAME$1,f);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-controls":S.contentId,"aria-expanded":S.open||!1,"data-state":getState$1(S.open),"data-disabled":S.disabled?"":void 0,disabled:S.disabled,..._,ref:s,onClick:composeEventHandlers$1(d.onClick,S.onOpenToggle)})});CollapsibleTrigger.displayName=TRIGGER_NAME$1;var CONTENT_NAME$1="CollapsibleContent",CollapsibleContent=reactExports.forwardRef((d,s)=>{const{forceMount:f,..._}=d,S=useCollapsibleContext(CONTENT_NAME$1,d.__scopeCollapsible);return jsxRuntimeExports.jsx(Presence,{present:f||S.open,children:({present:T})=>jsxRuntimeExports.jsx(CollapsibleContentImpl,{..._,ref:s,present:T})})});CollapsibleContent.displayName=CONTENT_NAME$1;var CollapsibleContentImpl=reactExports.forwardRef((d,s)=>{const{__scopeCollapsible:f,present:_,children:S,...T}=d,F=useCollapsibleContext(CONTENT_NAME$1,f),[M,P]=reactExports.useState(_),H=reactExports.useRef(null),J=useComposedRefs(s,H),K=reactExports.useRef(0),oe=K.current,se=reactExports.useRef(0),ae=se.current,ge=F.open||M,he=reactExports.useRef(ge),Be=reactExports.useRef();return reactExports.useEffect(()=>{const pe=requestAnimationFrame(()=>he.current=!1);return()=>cancelAnimationFrame(pe)},[]),useLayoutEffect2(()=>{const pe=H.current;if(pe){Be.current=Be.current||{transitionDuration:pe.style.transitionDuration,animationName:pe.style.animationName},pe.style.transitionDuration="0s",pe.style.animationName="none";const be=pe.getBoundingClientRect();K.current=be.height,se.current=be.width,he.current||(pe.style.transitionDuration=Be.current.transitionDuration,pe.style.animationName=Be.current.animationName),P(_)}},[F.open,_]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$1(F.open),"data-disabled":F.disabled?"":void 0,id:F.contentId,hidden:!ge,...T,ref:J,style:{"--radix-collapsible-content-height":oe?`${oe}px`:void 0,"--radix-collapsible-content-width":ae?`${ae}px`:void 0,...d.style},children:ge&&S})});function getState$1(d){return d?"open":"closed"}var Root=Collapsible,Trigger=CollapsibleTrigger,Content=CollapsibleContent,DirectionContext=reactExports.createContext(void 0);function useDirection(d){const s=reactExports.useContext(DirectionContext);return d||s||"ltr"}var ACCORDION_NAME="Accordion",ACCORDION_KEYS=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Collection$1,useCollection,createCollectionScope]=createCollection(ACCORDION_NAME),[createAccordionContext,createAccordionScope]=createContextScope$1(ACCORDION_NAME,[createCollectionScope,createCollapsibleScope]),useCollapsibleScope=createCollapsibleScope(),Accordion$1=React.forwardRef((d,s)=>{const{type:f,..._}=d,S=_,T=_;return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:d.__scopeAccordion,children:f==="multiple"?jsxRuntimeExports.jsx(AccordionImplMultiple,{...T,ref:s}):jsxRuntimeExports.jsx(AccordionImplSingle,{...S,ref:s})})});Accordion$1.displayName=ACCORDION_NAME;var[AccordionValueProvider,useAccordionValueContext]=createAccordionContext(ACCORDION_NAME),[AccordionCollapsibleProvider,useAccordionCollapsibleContext]=createAccordionContext(ACCORDION_NAME,{collapsible:!1}),AccordionImplSingle=React.forwardRef((d,s)=>{const{value:f,defaultValue:_,onValueChange:S=()=>{},collapsible:T=!1,...F}=d,[M,P]=useControllableState({prop:f,defaultProp:_,onChange:S});return jsxRuntimeExports.jsx(AccordionValueProvider,{scope:d.__scopeAccordion,value:M?[M]:[],onItemOpen:P,onItemClose:React.useCallback(()=>T&&P(""),[T,P]),children:jsxRuntimeExports.jsx(AccordionCollapsibleProvider,{scope:d.__scopeAccordion,collapsible:T,children:jsxRuntimeExports.jsx(AccordionImpl,{...F,ref:s})})})}),AccordionImplMultiple=React.forwardRef((d,s)=>{const{value:f,defaultValue:_,onValueChange:S=()=>{},...T}=d,[F=[],M]=useControllableState({prop:f,defaultProp:_,onChange:S}),P=React.useCallback(J=>M((K=[])=>[...K,J]),[M]),H=React.useCallback(J=>M((K=[])=>K.filter(oe=>oe!==J)),[M]);return jsxRuntimeExports.jsx(AccordionValueProvider,{scope:d.__scopeAccordion,value:F,onItemOpen:P,onItemClose:H,children:jsxRuntimeExports.jsx(AccordionCollapsibleProvider,{scope:d.__scopeAccordion,collapsible:!0,children:jsxRuntimeExports.jsx(AccordionImpl,{...T,ref:s})})})}),[AccordionImplProvider,useAccordionContext]=createAccordionContext(ACCORDION_NAME),AccordionImpl=React.forwardRef((d,s)=>{const{__scopeAccordion:f,disabled:_,dir:S,orientation:T="vertical",...F}=d,M=React.useRef(null),P=useComposedRefs(M,s),H=useCollection(f),K=useDirection(S)==="ltr",oe=composeEventHandlers$1(d.onKeyDown,se=>{var At;if(!ACCORDION_KEYS.includes(se.key))return;const ae=se.target,ge=H().filter(Ct=>{var Rt;return!((Rt=Ct.ref.current)!=null&&Rt.disabled)}),he=ge.findIndex(Ct=>Ct.ref.current===ae),Be=ge.length;if(he===-1)return;se.preventDefault();let pe=he;const be=0,Re=Be-1,Fe=()=>{pe=he+1,pe>Re&&(pe=be)},Me=()=>{pe=he-1,pe<be&&(pe=Re)};switch(se.key){case"Home":pe=be;break;case"End":pe=Re;break;case"ArrowRight":T==="horizontal"&&(K?Fe():Me());break;case"ArrowDown":T==="vertical"&&Fe();break;case"ArrowLeft":T==="horizontal"&&(K?Me():Fe());break;case"ArrowUp":T==="vertical"&&Me();break}const ve=pe%Be;(At=ge[ve].ref.current)==null||At.focus()});return jsxRuntimeExports.jsx(AccordionImplProvider,{scope:f,disabled:_,direction:S,orientation:T,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:f,children:jsxRuntimeExports.jsx(Primitive.div,{...F,"data-orientation":T,ref:P,onKeyDown:_?void 0:oe})})})}),ITEM_NAME="AccordionItem",[AccordionItemProvider,useAccordionItemContext]=createAccordionContext(ITEM_NAME),AccordionItem$1=React.forwardRef((d,s)=>{const{__scopeAccordion:f,value:_,...S}=d,T=useAccordionContext(ITEM_NAME,f),F=useAccordionValueContext(ITEM_NAME,f),M=useCollapsibleScope(f),P=useId(),H=_&&F.value.includes(_)||!1,J=T.disabled||d.disabled;return jsxRuntimeExports.jsx(AccordionItemProvider,{scope:f,open:H,disabled:J,triggerId:P,children:jsxRuntimeExports.jsx(Root,{"data-orientation":T.orientation,"data-state":getState(H),...M,...S,ref:s,disabled:J,open:H,onOpenChange:K=>{K?F.onItemOpen(_):F.onItemClose(_)}})})});AccordionItem$1.displayName=ITEM_NAME;var HEADER_NAME="AccordionHeader",AccordionHeader=React.forwardRef((d,s)=>{const{__scopeAccordion:f,..._}=d,S=useAccordionContext(ACCORDION_NAME,f),T=useAccordionItemContext(HEADER_NAME,f);return jsxRuntimeExports.jsx(Primitive.h3,{"data-orientation":S.orientation,"data-state":getState(T.open),"data-disabled":T.disabled?"":void 0,..._,ref:s})});AccordionHeader.displayName=HEADER_NAME;var TRIGGER_NAME="AccordionTrigger",AccordionTrigger$1=React.forwardRef((d,s)=>{const{__scopeAccordion:f,..._}=d,S=useAccordionContext(ACCORDION_NAME,f),T=useAccordionItemContext(TRIGGER_NAME,f),F=useAccordionCollapsibleContext(TRIGGER_NAME,f),M=useCollapsibleScope(f);return jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:f,children:jsxRuntimeExports.jsx(Trigger,{"aria-disabled":T.open&&!F.collapsible||void 0,"data-orientation":S.orientation,id:T.triggerId,...M,..._,ref:s})})});AccordionTrigger$1.displayName=TRIGGER_NAME;var CONTENT_NAME="AccordionContent",AccordionContent$1=React.forwardRef((d,s)=>{const{__scopeAccordion:f,..._}=d,S=useAccordionContext(ACCORDION_NAME,f),T=useAccordionItemContext(CONTENT_NAME,f),F=useCollapsibleScope(f);return jsxRuntimeExports.jsx(Content,{role:"region","aria-labelledby":T.triggerId,"data-orientation":S.orientation,...F,..._,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...d.style}})});AccordionContent$1.displayName=CONTENT_NAME;function getState(d){return d?"open":"closed"}var Root2=Accordion$1,Item=AccordionItem$1,Header=AccordionHeader,Trigger2=AccordionTrigger$1,Content2=AccordionContent$1;/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=d=>d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(d,s)=>{const f=reactExports.forwardRef(({color:_="currentColor",size:S=24,strokeWidth:T=2,absoluteStrokeWidth:F,className:M="",children:P,...H},J)=>reactExports.createElement("svg",{ref:J,...defaultAttributes,width:S,height:S,stroke:_,strokeWidth:F?Number(T)*24/Number(S):T,className:["lucide",`lucide-${toKebabCase(d)}`,M].join(" "),...H},[...s.map(([K,oe])=>reactExports.createElement(K,oe)),...Array.isArray(P)?P:[P]]));return f.displayName=`${d}`,f};/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$2=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),CLASS_PART_SEPARATOR="-",createClassGroupUtils=d=>{const s=createClassMap(d),{conflictingClassGroups:f,conflictingClassGroupModifiers:_}=d;return{getClassGroupId:F=>{const M=F.split(CLASS_PART_SEPARATOR);return M[0]===""&&M.length!==1&&M.shift(),getGroupRecursive(M,s)||getGroupIdForArbitraryProperty(F)},getConflictingClassGroupIds:(F,M)=>{const P=f[F]||[];return M&&_[F]?[...P,..._[F]]:P}}},getGroupRecursive=(d,s)=>{var F;if(d.length===0)return s.classGroupId;const f=d[0],_=s.nextPart.get(f),S=_?getGroupRecursive(d.slice(1),_):void 0;if(S)return S;if(s.validators.length===0)return;const T=d.join(CLASS_PART_SEPARATOR);return(F=s.validators.find(({validator:M})=>M(T)))==null?void 0:F.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=d=>{if(arbitraryPropertyRegex.test(d)){const s=arbitraryPropertyRegex.exec(d)[1],f=s==null?void 0:s.substring(0,s.indexOf(":"));if(f)return"arbitrary.."+f}},createClassMap=d=>{const{theme:s,prefix:f}=d,_={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(d.classGroups),f).forEach(([T,F])=>{processClassesRecursively(F,_,T,s)}),_},processClassesRecursively=(d,s,f,_)=>{d.forEach(S=>{if(typeof S=="string"){const T=S===""?s:getPart(s,S);T.classGroupId=f;return}if(typeof S=="function"){if(isThemeGetter(S)){processClassesRecursively(S(_),s,f,_);return}s.validators.push({validator:S,classGroupId:f});return}Object.entries(S).forEach(([T,F])=>{processClassesRecursively(F,getPart(s,T),f,_)})})},getPart=(d,s)=>{let f=d;return s.split(CLASS_PART_SEPARATOR).forEach(_=>{f.nextPart.has(_)||f.nextPart.set(_,{nextPart:new Map,validators:[]}),f=f.nextPart.get(_)}),f},isThemeGetter=d=>d.isThemeGetter,getPrefixedClassGroupEntries=(d,s)=>s?d.map(([f,_])=>{const S=_.map(T=>typeof T=="string"?s+T:typeof T=="object"?Object.fromEntries(Object.entries(T).map(([F,M])=>[s+F,M])):T);return[f,S]}):d,createLruCache=d=>{if(d<1)return{get:()=>{},set:()=>{}};let s=0,f=new Map,_=new Map;const S=(T,F)=>{f.set(T,F),s++,s>d&&(s=0,_=f,f=new Map)};return{get(T){let F=f.get(T);if(F!==void 0)return F;if((F=_.get(T))!==void 0)return S(T,F),F},set(T,F){f.has(T)?f.set(T,F):S(T,F)}}},IMPORTANT_MODIFIER="!",createParseClassName=d=>{const{separator:s,experimentalParseClassName:f}=d,_=s.length===1,S=s[0],T=s.length,F=M=>{const P=[];let H=0,J=0,K;for(let he=0;he<M.length;he++){let Be=M[he];if(H===0){if(Be===S&&(_||M.slice(he,he+T)===s)){P.push(M.slice(J,he)),J=he+T;continue}if(Be==="/"){K=he;continue}}Be==="["?H++:Be==="]"&&H--}const oe=P.length===0?M:M.substring(J),se=oe.startsWith(IMPORTANT_MODIFIER),ae=se?oe.substring(1):oe,ge=K&&K>J?K-J:void 0;return{modifiers:P,hasImportantModifier:se,baseClassName:ae,maybePostfixModifierPosition:ge}};return f?M=>f({className:M,parseClassName:F}):F},sortModifiers=d=>{if(d.length<=1)return d;const s=[];let f=[];return d.forEach(_=>{_[0]==="["?(s.push(...f.sort(),_),f=[]):f.push(_)}),s.push(...f.sort()),s},createConfigUtils=d=>({cache:createLruCache(d.cacheSize),parseClassName:createParseClassName(d),...createClassGroupUtils(d)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(d,s)=>{const{parseClassName:f,getClassGroupId:_,getConflictingClassGroupIds:S}=s,T=[],F=d.trim().split(SPLIT_CLASSES_REGEX);let M="";for(let P=F.length-1;P>=0;P-=1){const H=F[P],{modifiers:J,hasImportantModifier:K,baseClassName:oe,maybePostfixModifierPosition:se}=f(H);let ae=!!se,ge=_(ae?oe.substring(0,se):oe);if(!ge){if(!ae){M=H+(M.length>0?" "+M:M);continue}if(ge=_(oe),!ge){M=H+(M.length>0?" "+M:M);continue}ae=!1}const he=sortModifiers(J).join(":"),Be=K?he+IMPORTANT_MODIFIER:he,pe=Be+ge;if(T.includes(pe))continue;T.push(pe);const be=S(ge,ae);for(let Re=0;Re<be.length;++Re){const Fe=be[Re];T.push(Be+Fe)}M=H+(M.length>0?" "+M:M)}return M};function twJoin(){let d=0,s,f,_="";for(;d<arguments.length;)(s=arguments[d++])&&(f=toValue(s))&&(_&&(_+=" "),_+=f);return _}const toValue=d=>{if(typeof d=="string")return d;let s,f="";for(let _=0;_<d.length;_++)d[_]&&(s=toValue(d[_]))&&(f&&(f+=" "),f+=s);return f};function createTailwindMerge(d,...s){let f,_,S,T=F;function F(P){const H=s.reduce((J,K)=>K(J),d());return f=createConfigUtils(H),_=f.cache.get,S=f.cache.set,T=M,M(P)}function M(P){const H=_(P);if(H)return H;const J=mergeClassList(P,f);return S(P,J),J}return function(){return T(twJoin.apply(null,arguments))}}const fromTheme=d=>{const s=f=>f[d]||[];return s.isThemeGetter=!0,s},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength=d=>isNumber$d(d)||stringLengths.has(d)||fractionRegex.test(d),isArbitraryLength=d=>getIsArbitraryValue(d,"length",isLengthOnly),isNumber$d=d=>!!d&&!Number.isNaN(Number(d)),isArbitraryNumber=d=>getIsArbitraryValue(d,"number",isNumber$d),isInteger$1=d=>!!d&&Number.isInteger(Number(d)),isPercent=d=>d.endsWith("%")&&isNumber$d(d.slice(0,-1)),isArbitraryValue=d=>arbitraryValueRegex.test(d),isTshirtSize=d=>tshirtUnitRegex.test(d),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=d=>getIsArbitraryValue(d,sizeLabels,isNever),isArbitraryPosition=d=>getIsArbitraryValue(d,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=d=>getIsArbitraryValue(d,imageLabels,isImage),isArbitraryShadow=d=>getIsArbitraryValue(d,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(d,s,f)=>{const _=arbitraryValueRegex.exec(d);return _?_[1]?typeof s=="string"?_[1]===s:s.has(_[1]):f(_[2]):!1},isLengthOnly=d=>lengthUnitRegex.test(d)&&!colorFunctionRegex.test(d),isNever=()=>!1,isShadow=d=>shadowRegex.test(d),isImage=d=>imageRegex.test(d),getDefaultConfig=()=>{const d=fromTheme("colors"),s=fromTheme("spacing"),f=fromTheme("blur"),_=fromTheme("brightness"),S=fromTheme("borderColor"),T=fromTheme("borderRadius"),F=fromTheme("borderSpacing"),M=fromTheme("borderWidth"),P=fromTheme("contrast"),H=fromTheme("grayscale"),J=fromTheme("hueRotate"),K=fromTheme("invert"),oe=fromTheme("gap"),se=fromTheme("gradientColorStops"),ae=fromTheme("gradientColorStopPositions"),ge=fromTheme("inset"),he=fromTheme("margin"),Be=fromTheme("opacity"),pe=fromTheme("padding"),be=fromTheme("saturate"),Re=fromTheme("scale"),Fe=fromTheme("sepia"),Me=fromTheme("skew"),ve=fromTheme("space"),At=fromTheme("translate"),Ct=()=>["auto","contain","none"],Rt=()=>["auto","hidden","clip","visible","scroll"],It=()=>["auto",isArbitraryValue,s],xt=()=>[isArbitraryValue,s],wt=()=>["",isLength,isArbitraryLength],Ft=()=>["auto",isNumber$d,isArbitraryValue],jt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ta=()=>["solid","dashed","dotted","double","none"],Qn=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ca=()=>["start","end","center","between","around","evenly","stretch"],Jn=()=>["","0",isArbitraryValue],wA=()=>["auto","avoid","all","avoid-page","page","left","right","column"],LA=()=>[isNumber$d,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:LA(),borderColor:[d],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:xt(),borderWidth:wt(),contrast:LA(),grayscale:Jn(),hueRotate:LA(),invert:Jn(),gap:xt(),gradientColorStops:[d],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:It(),margin:It(),opacity:LA(),padding:xt(),saturate:LA(),scale:LA(),sepia:Jn(),skew:LA(),space:xt(),translate:xt()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":wA()}],"break-before":[{"break-before":wA()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...jt(),isArbitraryValue]}],overflow:[{overflow:Rt()}],"overflow-x":[{"overflow-x":Rt()}],"overflow-y":[{"overflow-y":Rt()}],overscroll:[{overscroll:Ct()}],"overscroll-x":[{"overscroll-x":Ct()}],"overscroll-y":[{"overscroll-y":Ct()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[ge]}],"inset-x":[{"inset-x":[ge]}],"inset-y":[{"inset-y":[ge]}],start:[{start:[ge]}],end:[{end:[ge]}],top:[{top:[ge]}],right:[{right:[ge]}],bottom:[{bottom:[ge]}],left:[{left:[ge]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger$1,isArbitraryValue]}],basis:[{basis:It()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:Jn()}],shrink:[{shrink:Jn()}],order:[{order:["first","last","none",isInteger$1,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger$1,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":Ft()}],"col-end":[{"col-end":Ft()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger$1,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":Ft()}],"row-end":[{"row-end":Ft()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[oe]}],"gap-x":[{"gap-x":[oe]}],"gap-y":[{"gap-y":[oe]}],"justify-content":[{justify:["normal",...ca()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ca(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ca(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[pe]}],px:[{px:[pe]}],py:[{py:[pe]}],ps:[{ps:[pe]}],pe:[{pe:[pe]}],pt:[{pt:[pe]}],pr:[{pr:[pe]}],pb:[{pb:[pe]}],pl:[{pl:[pe]}],m:[{m:[he]}],mx:[{mx:[he]}],my:[{my:[he]}],ms:[{ms:[he]}],me:[{me:[he]}],mt:[{mt:[he]}],mr:[{mr:[he]}],mb:[{mb:[he]}],ml:[{ml:[he]}],"space-x":[{"space-x":[ve]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[ve]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,s]}],"min-w":[{"min-w":[isArbitraryValue,s,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,s,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,s,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$d,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[d]}],"placeholder-opacity":[{"placeholder-opacity":[Be]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[d]}],"text-opacity":[{"text-opacity":[Be]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ta(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[d]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:xt()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Be]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...jt(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[d]}],"gradient-from-pos":[{from:[ae]}],"gradient-via-pos":[{via:[ae]}],"gradient-to-pos":[{to:[ae]}],"gradient-from":[{from:[se]}],"gradient-via":[{via:[se]}],"gradient-to":[{to:[se]}],rounded:[{rounded:[T]}],"rounded-s":[{"rounded-s":[T]}],"rounded-e":[{"rounded-e":[T]}],"rounded-t":[{"rounded-t":[T]}],"rounded-r":[{"rounded-r":[T]}],"rounded-b":[{"rounded-b":[T]}],"rounded-l":[{"rounded-l":[T]}],"rounded-ss":[{"rounded-ss":[T]}],"rounded-se":[{"rounded-se":[T]}],"rounded-ee":[{"rounded-ee":[T]}],"rounded-es":[{"rounded-es":[T]}],"rounded-tl":[{"rounded-tl":[T]}],"rounded-tr":[{"rounded-tr":[T]}],"rounded-br":[{"rounded-br":[T]}],"rounded-bl":[{"rounded-bl":[T]}],"border-w":[{border:[M]}],"border-w-x":[{"border-x":[M]}],"border-w-y":[{"border-y":[M]}],"border-w-s":[{"border-s":[M]}],"border-w-e":[{"border-e":[M]}],"border-w-t":[{"border-t":[M]}],"border-w-r":[{"border-r":[M]}],"border-w-b":[{"border-b":[M]}],"border-w-l":[{"border-l":[M]}],"border-opacity":[{"border-opacity":[Be]}],"border-style":[{border:[...ta(),"hidden"]}],"divide-x":[{"divide-x":[M]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[M]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Be]}],"divide-style":[{divide:ta()}],"border-color":[{border:[S]}],"border-color-x":[{"border-x":[S]}],"border-color-y":[{"border-y":[S]}],"border-color-s":[{"border-s":[S]}],"border-color-e":[{"border-e":[S]}],"border-color-t":[{"border-t":[S]}],"border-color-r":[{"border-r":[S]}],"border-color-b":[{"border-b":[S]}],"border-color-l":[{"border-l":[S]}],"divide-color":[{divide:[S]}],"outline-style":[{outline:["",...ta()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[d]}],"ring-w":[{ring:wt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[d]}],"ring-opacity":[{"ring-opacity":[Be]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[d]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[Be]}],"mix-blend":[{"mix-blend":[...Qn(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Qn()}],filter:[{filter:["","none"]}],blur:[{blur:[f]}],brightness:[{brightness:[_]}],contrast:[{contrast:[P]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[H]}],"hue-rotate":[{"hue-rotate":[J]}],invert:[{invert:[K]}],saturate:[{saturate:[be]}],sepia:[{sepia:[Fe]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[f]}],"backdrop-brightness":[{"backdrop-brightness":[_]}],"backdrop-contrast":[{"backdrop-contrast":[P]}],"backdrop-grayscale":[{"backdrop-grayscale":[H]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[J]}],"backdrop-invert":[{"backdrop-invert":[K]}],"backdrop-opacity":[{"backdrop-opacity":[Be]}],"backdrop-saturate":[{"backdrop-saturate":[be]}],"backdrop-sepia":[{"backdrop-sepia":[Fe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[F]}],"border-spacing-x":[{"border-spacing-x":[F]}],"border-spacing-y":[{"border-spacing-y":[F]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:LA()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:LA()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[Re]}],"scale-x":[{"scale-x":[Re]}],"scale-y":[{"scale-y":[Re]}],rotate:[{rotate:[isInteger$1,isArbitraryValue]}],"translate-x":[{"translate-x":[At]}],"translate-y":[{"translate-y":[At]}],"skew-x":[{"skew-x":[Me]}],"skew-y":[{"skew-y":[Me]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",d]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[d]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":xt()}],"scroll-mx":[{"scroll-mx":xt()}],"scroll-my":[{"scroll-my":xt()}],"scroll-ms":[{"scroll-ms":xt()}],"scroll-me":[{"scroll-me":xt()}],"scroll-mt":[{"scroll-mt":xt()}],"scroll-mr":[{"scroll-mr":xt()}],"scroll-mb":[{"scroll-mb":xt()}],"scroll-ml":[{"scroll-ml":xt()}],"scroll-p":[{"scroll-p":xt()}],"scroll-px":[{"scroll-px":xt()}],"scroll-py":[{"scroll-py":xt()}],"scroll-ps":[{"scroll-ps":xt()}],"scroll-pe":[{"scroll-pe":xt()}],"scroll-pt":[{"scroll-pt":xt()}],"scroll-pr":[{"scroll-pr":xt()}],"scroll-pb":[{"scroll-pb":xt()}],"scroll-pl":[{"scroll-pl":xt()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[d,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[d,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn$1(...d){return twMerge(clsx(d))}function columnMatchesType(d,s){if(s===void 0)return!0;if(Array.isArray(s))return s.some(_=>columnMatchesType(d,_));if(s==="_multi_column:all")return!0;const f=!!d.datatype.match(/double|float|int/);return s==="_multi_column:number"?f:s==="number"&&f?!0:d.datatype===s}const Accordion=Root2,AccordionItem=reactExports.forwardRef(({className:d,...s},f)=>jsxRuntimeExports.jsx(Item,{ref:f,className:cn$1("border-b",d),...s}));AccordionItem.displayName="AccordionItem";const AccordionTrigger=reactExports.forwardRef(({className:d,children:s,...f},_)=>jsxRuntimeExports.jsx(Header,{className:"flex",children:jsxRuntimeExports.jsxs(Trigger2,{ref:_,className:cn$1("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",d),...f,children:[s,jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));AccordionTrigger.displayName=Trigger2.displayName;const AccordionContent=reactExports.forwardRef(({className:d,children:s,...f},_)=>jsxRuntimeExports.jsx(Content2,{ref:_,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...f,children:jsxRuntimeExports.jsx("div",{className:cn$1("pb-4 pt-0",d),children:s})}));AccordionContent.displayName=Content2.displayName;var byteToHex=[];for(var i$1=0;i$1<256;++i$1)byteToHex.push((i$1+256).toString(16).slice(1));function unsafeStringify(d,s=0){return(byteToHex[d[s+0]]+byteToHex[d[s+1]]+byteToHex[d[s+2]]+byteToHex[d[s+3]]+"-"+byteToHex[d[s+4]]+byteToHex[d[s+5]]+"-"+byteToHex[d[s+6]]+byteToHex[d[s+7]]+"-"+byteToHex[d[s+8]]+byteToHex[d[s+9]]+"-"+byteToHex[d[s+10]]+byteToHex[d[s+11]]+byteToHex[d[s+12]]+byteToHex[d[s+13]]+byteToHex[d[s+14]]+byteToHex[d[s+15]]).toLowerCase()}var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const native={randomUUID};function v4(d,s,f){if(native.randomUUID&&!s&&!d)return native.randomUUID();d=d||{};var _=d.random||(d.rng||rng)();return _[6]=_[6]&15|64,_[8]=_[8]&63|128,unsafeStringify(_)}var CheckBoxOutlineBlank={},_interopRequireDefault$c=interopRequireDefaultExports;Object.defineProperty(CheckBoxOutlineBlank,"__esModule",{value:!0});var default_1$c=CheckBoxOutlineBlank.default=void 0,_createSvgIcon$c=_interopRequireDefault$c(requireCreateSvgIcon()),_jsxRuntime$c=jsxRuntimeExports;default_1$c=CheckBoxOutlineBlank.default=(0,_createSvgIcon$c.default)((0,_jsxRuntime$c.jsx)("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"CheckBoxOutlineBlank");var CheckBox={},_interopRequireDefault$b=interopRequireDefaultExports;Object.defineProperty(CheckBox,"__esModule",{value:!0});var default_1$b=CheckBox.default=void 0,_createSvgIcon$b=_interopRequireDefault$b(requireCreateSvgIcon()),_jsxRuntime$b=jsxRuntimeExports;default_1$b=CheckBox.default=(0,_createSvgIcon$b.default)((0,_jsxRuntime$b.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckBox");const ChartContext=reactExports.createContext(void 0),DataStoreContext=reactExports.createContext(void 0);function ChartProvider({chart:d,children:s}){return jsxRuntimeExports.jsx(ChartContext.Provider,{value:d,children:jsxRuntimeExports.jsx(DataStoreContext.Provider,{value:d.dataStore,children:s})})}function useChart(){const d=reactExports.useContext(ChartContext);if(!d)throw new Error("no chart context");return d}function useDataStore(d){const s=reactExports.useContext(DataStoreContext);if(d)return d;if(!s)throw new Error("no data store context");return s}function useVivConfig(){const d=reactExports.useContext(ChartContext);return d?d.config.viv:{viewerStore:{},channelsStore:{},imageSettingsStore:{}}}const ColumnSelectionComponent=observer(d=>{const{setSelectedColumn:s,placeholder:f,type:_}=d,S=_==="_multi_column:number"||_==="_multi_column:all",T=d.multiple||S,F=useDataStore(d.dataStore),M=reactExports.useMemo(()=>F.columns.filter(P=>{var H;return!((H=d.exclude)!=null&&H.includes(P.name))}).filter(P=>columnMatchesType(P,_)),[F,d.exclude,_]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Autocomplete,{className:"w-full",options:M,multiple:T,onChange:(P,H)=>{Array.isArray(H)?s(H[0].field):s(H.field)},getOptionLabel:P=>P.name,renderInput:P=>{const{key:H,...J}=P;return jsxRuntimeExports.jsx(TextField,{...J,placeholder:f},H)},renderOption:(P,H)=>{const{key:J,...K}=P,{datatype:oe}=H;return jsxRuntimeExports.jsxs("li",{...K,children:[H.name,jsxRuntimeExports.jsxs("em",{className:"opacity-40 ml-2",children:["(",oe,")"]})]},J)}})})}),MLabel=observer(({props:d,htmlFor:s})=>jsxRuntimeExports.jsx(Typography,{fontSize:"small",sx:{alignSelf:"center",justifySelf:"end",paddingRight:2},children:d.label})),TextComponent$1=({props:d})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MLabel,{props:d}),jsxRuntimeExports.jsx(TextField,{value:d.current_value,onChange:action(s=>{d.current_value=s.target.value,d.func&&d.func(s.target.value)}),className:"w-full"})]}),TextBoxComponent=({props:d})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MLabel,{props:d}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("textarea",{value:d.current_value,onChange:action(s=>{d.current_value=s.target.value,d.func&&d.func(s.target.value)}),className:"w-full col-span-2"})]}),SliderComponent=({props:d})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MLabel,{props:d}),jsxRuntimeExports.jsx(Slider,{value:d.current_value,min:d.min||0,max:d.max||1,step:d.step||.01,onChange:action((s,f)=>{if(Array.isArray(f))throw"slider callback should have multiple values";d.current_value=f,d.func&&d.func(f)}),size:"small"})]}),SpinnerComponent=({props:d})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MLabel,{props:d}),jsxRuntimeExports.jsx("input",{type:"number",value:d.current_value,min:d.min||0,max:d.max||null,step:d.step||1,onChange:action(s=>{const f=d.current_value=Number.parseInt(s.target.value);d.func&&d.func(f)})})]}),ColumnSelectionSettingGui=observer(({props:d})=>{const s=reactExports.useCallback(action(_=>{var S;d.current_value=_,(S=d.func)==null||S.call(d,_)}),[]),f=reactExports.useMemo(()=>({setSelectedColumn:s,multiple:!1}),[s]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MLabel,{props:d}),jsxRuntimeExports.jsx(ColumnSelectionComponent,{...f})]})}),icon$2=jsxRuntimeExports.jsx(default_1$c,{fontSize:"small"}),checkedIcon$2=jsxRuntimeExports.jsx(default_1$b,{fontSize:"small"}),DropdownAutocompleteComponent=observer(({props:d})=>{const s=reactExports.useId(),f=d.type==="multidropdown";if(!d.values)throw"DropdownAutocompleteComponent requires props.values";const _=d.values.length===3,[S,T,F]=_?d.values:["X","X","X"];if(!T||!F)throw"DropdownAutocompleteComponent requires labelKey and valueKey for useObjectKeys";const M=reactExports.useCallback(be=>{const Re=_?be[T]:be,Fe=_?be[F]:be;return{label:Re,value:Fe,original:be}},[_,T,F]),P=reactExports.useMemo(()=>d.values[0].map(M),[d.values,M]),J=reactExports.useCallback(be=>(Array.isArray(be)&&be.length>1&&console.warn("ideally we shouldn't have to deal with arrays at all here, but we only expect one value when we do"),Array.isArray(be)?be[0]:be),[]),K=reactExports.useCallback(be=>J(be).label,[J]),oe=reactExports.useCallback(be=>J(be).value,[J]),se=reactExports.useMemo(()=>f&&!Array.isArray(d.current_value)?[d.current_value]:d.current_value,[d.current_value,f]);if(f!==Array.isArray(se))throw"logical inconsistency - 'multidropdown' value should be coerced to array by now";const ae=reactExports.useCallback(be=>P.some(Re=>Re.value===be),[P]),ge=Array.isArray(se),Be=(ge?se.every(ae):ae(se))?se:ge?se.filter(ae):null,pe=Array.isArray(Be)?Be.map(be=>P.find(Re=>Re.value===be)):[P.find(be=>be.value===se)];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MLabel,{htmlFor:s,props:d}),jsxRuntimeExports.jsx(Autocomplete,{className:"w-full",multiple:f,size:"small",id:s,options:P,disableCloseOnSelect:f,getOptionLabel:K,value:pe,onChange:action((be,Re)=>{if(Re!==null){if(Array.isArray(Re)){const Fe=Array.from(Re).map(Me=>Me.value);d.current_value=Fe,d.func&&d.func(Fe);return}d.current_value=Re.value,d.func&&d.func(Re.value)}}),isOptionEqualToValue:(be,Re)=>J(be).original===J(Re).original,renderOption:(be,Re,{selected:Fe})=>{const{key:Me,...ve}=be;return f?jsxRuntimeExports.jsxs("li",{...ve,children:[jsxRuntimeExports.jsx(Checkbox,{icon:icon$2,checkedIcon:checkedIcon$2,style:{marginRight:8},checked:Fe}),K(Re)]},Me):jsxRuntimeExports.jsx("li",{...ve,children:K(Re)},Me)},renderTags:(be,Re)=>be.map((Fe,Me)=>reactExports.createElement(Chip,{...Re({index:Me}),key:oe(Fe),label:K(Fe)})),renderInput:be=>jsxRuntimeExports.jsx(TextField,{...be})})]})}),CheckboxComponent=({props:d})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MLabel,{props:d}),jsxRuntimeExports.jsx(Checkbox,{checked:d.current_value||!1,onChange:action(s=>{d.current_value=s.target.checked,d.func&&d.func(s.target.checked)}),size:"small",sx:{padding:0}})]}),RadioButtonComponent=({props:d})=>{const s=reactExports.useMemo(()=>d.choices.map(f=>({v:f,id:v4()})),[d.choices]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MLabel,{props:d}),jsxRuntimeExports.jsx(FormControl,{margin:"dense",children:jsxRuntimeExports.jsx(RadioGroup,{row:!0,value:d.current_value,onChange:action(f=>{d.current_value=f.target.value,d.func&&d.func(f.target.value)}),children:s.map(({v:f,id:_})=>{const S=`${_}-${f[0]}`;return jsxRuntimeExports.jsx(FormControlLabel,{control:jsxRuntimeExports.jsx(Radio,{size:"small"}),label:f[0],value:f[1],style:{minWidth:"unset"}},S)})})}),jsxRuntimeExports.jsx("div",{className:"ciview-radio-group",style:{display:"none"},children:s.map(({v:f,id:_})=>jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("span",{className:"m-1",children:f[0]}),jsxRuntimeExports.jsx("input",{type:"radio",value:f[1],checked:f[1]==d.current_value,onChange:action(S=>{d.current_value=S.currentTarget.value,d.func&&d.func(S.currentTarget.value)})})]},_))})]})},DoubleSliderComponent=({props:d})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MLabel,{props:d}),jsxRuntimeExports.jsx(Slider,{value:d.current_value,min:d.min||0,max:d.max||1,onChange:action((s,f)=>{if(!Array.isArray(f))throw"doubleslider callback should have multiple values";d.current_value=f,d.func&&d.func(f)}),size:"small"})]}),ButtonComponent=({props:d})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MLabel,{props:d}),jsxRuntimeExports.jsx(Button$1,{variant:"contained",onClick:()=>{d.func&&d.func(void 0)},children:d.label})]}),FolderComponent=({props:d})=>{const s=reactExports.useMemo(()=>d.current_value.map(f=>({setting:f,id:v4()})),[d.current_value]);return s.length===0?null:jsxRuntimeExports.jsx(Accordion,{type:"single",collapsible:!0,className:"w-full col-span-2",defaultValue:d.label,children:jsxRuntimeExports.jsxs(AccordionItem,{value:d.label,children:[jsxRuntimeExports.jsx(AccordionTrigger,{children:d.label}),jsxRuntimeExports.jsx(AccordionContent,{children:s.map(({setting:f,id:_})=>jsxRuntimeExports.jsx(AbstractComponent$1,{props:f},_))})]})})},Components$1={text:observer(TextComponent$1),textbox:observer(TextBoxComponent),slider:observer(SliderComponent),spinner:observer(SpinnerComponent),dropdown:DropdownAutocompleteComponent,multidropdown:DropdownAutocompleteComponent,check:observer(CheckboxComponent),radiobuttons:observer(RadioButtonComponent),doubleslider:observer(DoubleSliderComponent),button:observer(ButtonComponent),folder:observer(FolderComponent),column:ColumnSelectionSettingGui,multicolumn:ColumnSelectionSettingGui},ErrorComponent=observer(({props:d,label:s})=>{const[f,_]=reactExports.useState(!0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Dialog,{open:f,className:"border-red-500 border-2 border-solid",children:[jsxRuntimeExports.jsx("h2",{children:"Settings Dialog Error..."}),jsxRuntimeExports.jsx(JsonView,{src:d,collapsed:1}),jsxRuntimeExports.jsx(Button$1,{onClick:()=>_(!f),children:"ok"})]}),jsxRuntimeExports.jsx("label",{className:"text-red-500",children:"Error in component:"}),jsxRuntimeExports.jsx("label",{className:"text-red-500",children:s})]})}),AbstractComponent$1=observer(({props:d})=>{const s=Components$1[d.type];if(!(d.type in Components$1)){console.error(`Unknown component type: '${d.type}'`);const f={props:d,error:`Unknown component type: ${d.type}`};return jsxRuntimeExports.jsx(ErrorComponent,{props:f,label:d.label})}return jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 p-1 justify-items-start",children:jsxRuntimeExports.jsx(ErrorBoundary,{fallback:jsxRuntimeExports.jsx(ErrorComponent,{props:d,label:d.label}),children:jsxRuntimeExports.jsx(s,{props:d})})})}),Gui=observer(({chart:d})=>{const s=reactExports.useMemo(()=>{const _={settings:d.getSettings().map(S=>({setting:S,id:v4()}))};return makeAutoObservable(_),_.settings},[d]);return jsxRuntimeExports.jsx(ChartProvider,{chart:d,children:jsxRuntimeExports.jsx("div",{className:"w-full max-h-[80vh]",children:s.map(({setting:f,id:_})=>jsxRuntimeExports.jsx(AbstractComponent$1,{props:f},_))})})}),SettingsDialog=observer(({chart:d})=>jsxRuntimeExports.jsx(Gui,{chart:d}));class SettingsDialogReactWrapper extends BaseDialog{constructor(f,_){const T={width:500,title:`Settings (${f.config.title||`${f.config.type} ${f.config.id}`})`,doc:f.__doc__||document,position:_,onclose:()=>{f.dialogs.splice(f.dialogs.indexOf(this),1),f.settingsDialog===this&&(f.settingsDialog=null)}};super(T,f);Bt(this,"_root")}get root(){return this._root}set root(f){this._root=f}init(f){const _=createEl("div",{},this.dialog);this.root=createMdvPortal(jsxRuntimeExports.jsx(SettingsDialog,{chart:f}),_,this)}close(){super.close(),this.root?this.root.unmount():console.warn("not unmounting react root for dialog because of weirdness")}}const SettingsDialogReactWrapper$1=Object.freeze(Object.defineProperty({__proto__:null,default:SettingsDialogReactWrapper},Symbol.toStringTag,{value:"Module"}));class BaseChart{constructor(s,f,_){Bt(this,"dialogs",[]);Bt(this,"getQunatile");_.color_by&&_.color_by.column&&(_.color_by=_.color_by.column.field),this.config=JSON.parse(JSON.stringify(_)),this.config.id||(this.config.id=getRandomString()),this.__doc__=document,this.dataStore=s,this.listeners={},this.div=typeof f=="string"?document.getElementById(f):f,this.div.classList.add("ciview-chart-panel"),this.titleBar=createEl("div",{classes:["ciview-chart-titlebar"]}),this.title=createEl("div",{classes:["ciview-chart-title"],text:_.title},this.titleBar),this.menuSpace=createEl("div",{classes:["ciview-chart-menuspace"]},this.titleBar),this.contentDiv=createEl("div",{classes:["ciview-chart-content"]}),_.title_color&&(this.titleBar.style.backgroundColor=_.title_color),this.resetButton=this.addMenuIcon("fas fa-sync","remove filter"),this.resetButton.style.display="none",this.resetButton.addEventListener("click",()=>{this.removeFilter(),this.resetButton.style.display="none"}),this.dataStore.addListener(this.config.id,(T,F)=>{T==="filtered"?this.onDataFiltered(F):T==="data_changed"?this.onDataChanged(F):T==="data_added"?this.onDataAdded(F):T==="data_highlighted"&&(F.source===this&&this._callListeners("data_highlighted",F),this.onDataHighlighted&&this.onDataHighlighted(F))}),this.contextMenu=new ContextMenu(T=>{const F=this.getContextMenu(T);return F.push({text:"debug chart",icon:"fas fa-bug",func:()=>{window.mdv.debugChart=this,this.dialogs.push(new DebugChartReactWrapper(this.config,this))}}),F.push({text:"copy config JSON to clipboard",icon:"fas fa-copy",func:()=>navigator.clipboard.writeText(JSON.stringify(this.config,null,2))}),F}),this.addMenuIcon("fas fa-bars","more").addEventListener("click",T=>this.contextMenu.show(T)),this.addMenuIcon("fas fa-cog","settings").addEventListener("click",T=>this._openSettingsDialog(T)),this.addMenuIcon("fas fa-copy","duplicate chart").addEventListener("click",()=>{const T=JSON.parse(JSON.stringify(this.getConfig()));T.id=getRandomString(),T.title=`${T.title} copy`,window.mdv.chartManager.addChart(this.dataStore.name,T)}),this.legendIcon=this.addMenuIcon("fas fa-info",_.legend||"No description",{size:"medium"});let S=_.size;this.contentDiv.addEventListener("fullscreenchange",action(()=>{if(document.fullscreenElement){this.contentDiv!==document.fullscreenElement&&console.error("unexpected fullscreen element"),this.observable.container=this.contentDiv;const T=window.screen;this.setSize(T.width,T.height);for(const F of this.dialogs)F.setParent(this.contentDiv)}else{this.observable.container=this.__doc__.body,this.setSize(...S);for(const T of this.dialogs)T.setParent(null)}})),this.addMenuIcon("fas fa-expand","fullscreen",{func:async()=>{S=this.config.size,await this.contentDiv.requestFullscreen()}}),this.div.append(this.titleBar),this.div.append(this.contentDiv),this.listeners={},this._setDimensions(),this.observable=makeAutoObservable({container:this.__doc__.body})}_getContentDimensions(){return{top:5,left:5,height:this.height,width:this.width-5}}get dataSource(){return window.mdv.chartManager.charts[this.config.id].dataSource}getFilter(){}setFilter(){}addListener(s,f){this.listeners[s]=f}removeListener(s){delete this.listeners[s]}_callListeners(s,f){for(const _ in this.listeners)this.listeners[_](s,f)}addMenuIcon(s,f,_={}){const S=createEl("span",{"aria-label":f,"data-microtip-color":"red",role:"tooltip","data-microtip-size":_.size||"small","data-microtip-position":_.position||"bottom-left",styles:{margin:"0px 1px"}},this.menuSpace);return createEl("i",{classes:["ciview-chart-icon"].concat(s.split(" "))},S),_.func&&S.addEventListener("click",T=>_.func(T)),S}removeFilter(){}onDataFiltered(s){}onDataChanged(s){const f=s.columns;if(!s.hasFiltered){let _=this.config.param,S=!1;typeof this.config.param=="string"&&(_=[this.config.param]);for(const T of _)if(f.indexOf(T)!==-1){S=!0;break}S&&this.onDataFiltered()}f.indexOf(this.config.color_by)!==-1&&this.colorByColumn(this.config.color_by)}getColorLegend(){const s={overideValues:{colorLogScale:this.config.log_color_scale}};return this._addTrimmedColor(this.config.color_by,s),this.dataStore.getColorLegend(this.config.color_by,s)}_addTrimmedColor(s,f){const _=this.config.trim_color_scale,S=this.dataStore.columnIndex[s];_&&_!=="none"&&S.quantiles&&S.quantiles!=="NA"&&(f.overideValues.min=S.quantiles[_][0],f.overideValues.max=S.quantiles[_][1])}setColorLegend(){if(!this.config.color_legend.display){this.legend&&(this.config.color_legend.pos=[this.legend.offsetLeft,this.legend.offsetTop],this.legend.remove(),this.legend=void 0);return}const s=this._getContentDimensions();let f=0,_=0;if(this.legend)_=this.legend.style.left,f=this.legend.style.top,this.legend.remove();else{const S=this.config.color_legend;S.pos||(S.pos=[s.left,s.top]),_=`${S.pos[0]}px`,f=`${S.pos[1]}px`}if(this.legend=this.getColorLegend(),!this.legend){console.warn("no color legend");return}this.contentDiv.append(this.legend),this.legend.style.left=_,this.legend.style.top=f,this.legend.__doc__=this.__doc__}getColorFunction(s,f){this.config.color_by=s;const _={asArray:f,overideValues:{colorLogScale:this.config.log_color_scale,fallbackOnZero:this.config.fallbackOnZero}};this._addTrimmedColor(s,_);const S=this.dataStore.getColorFunction(s,_);return this.config.color_legend||(this.config.color_legend={display:!0}),this.setColorLegend(),S}onColumnRemoved(s){let f=this.config.param,_=!1;typeof this.config.param=="string"&&(f=[this.config.param]);for(const S of f)if(s===S){_=!0;break}return _?(this.remove(!1),!0):(this.colorByColumn&&this.config.color_by===s&&(this.config.color_by=void 0,this.colorByDefault()),!1)}onDataAdded(s){this.onDataFiltered()}onDataHighlighted(s){}addToolTip(){this._tooltip=createEl("div",{classes:["ciview-tooltip"],stlyles:{display:"none",position:"absolute"}},this.__doc__.body)}showToolTip(s,f){this._tooltip||this.addToolTip(),this._tooltip.innerHTML=f,this._tooltip.style.display="inline-block",this._tooltip.style.left=`${3+s.clientX}px`,this._tooltip.style.top=`${3+s.clientY}px`}hideToolTip(){this._tooltip&&(this._tooltip.style.display="none")}remove(){this.titleBar.remove(),this.contentDiv.remove(),this.dataStore.removeListener(this.config.id),this._tooltip&&this._tooltip.remove();for(const s of this.dialogs)s.close()}getSettings(){const s=this.config,f=[{type:"text",label:"Chart Name",current_value:s.title,func:S=>{this.setTitle(S)}}],_=this.getColorOptions();if(_.colorby){_.colorby==="all"||_.colorby;const S=[];f.push({type:"folder",label:"Color Settings",current_value:S}),S.push({label:"Color By",type:"column",current_value:s.color_by,func:T=>{T==="_none"?(s.color_by=void 0,this.colorByDefault()):(s.color_by=T,this.colorByColumn(T))}}),_.color_overlay!==void 0&&S.push({label:"Color Overlay",type:"slider",current_value:s.color_overlay,func:T=>{s.color_overlay=T,this.colorByColumn(s.color_by)}}),S.push({label:"Show Color Legend",type:"check",current_value:s.color_legend?s.color_legend.display:!0,func:T=>{s.color_by&&(s.color_legend.display=T,this.setColorLegend())}}),S.push({label:"SymLog Color Scale",type:"check",current_value:s.log_color_scale,func:T=>{s.log_color_scale=T,s.color_by&&this.colorByColumn(s.color_by)}}),S.push({label:"Treat zero as missing",type:"check",current_value:s.fallbackOnZero,func:T=>{s.fallbackOnZero=T,s.color_by&&this.colorByColumn(s.color_by)}}),S.push({type:"radiobuttons",label:"Trim Color Scale to Percentile",current_value:s.trim_color_scale||"none",choices:[["No Trim","none"],["0.001","0.001"],["0.01","0.01"],["0.05","0.05"]],func:T=>{s.trim_color_scale=T,s.color_by&&this.colorByColumn(s.color_by)}})}return f}_addUnpinIcon(){this.unpinIcon=this.addMenuIcon("fas fa-thumbtack","unpin chart"),this.unpinIcon.addEventListener("click",s=>{this.unpinIcon.remove(),this.unpinChart()})}_openSettingsDialog(s){this.settingsDialog||(this.settingsDialog=new SettingsDialogReactWrapper(this,[s.pageX,s.pageY]),this.dialogs.push(this.settingsDialog))}getContextMenu(s){let f=[];return this.getImage&&(f=f.concat([{text:"create svg image",icon:"far fa-image",func:()=>this.downloadImage("svg")},{text:"create png image",icon:"far fa-image",func:()=>this.downloadImage("png")}])),this.pinChart&&!this.isPinned&&f.push({text:"pin chart",icon:"fas fa-thumbtack",func:()=>{this.pinChart(),this._addUnpinIcon()}}),this.getChartData&&f.push({text:"download data",icon:"fas fa-download",func:()=>this.downloadData()}),this.addToContextMenu&&(f=f.concat(this.addToContextMenu())),f.push({text:"experimental settings dialog",icon:"fas fa-cog",func:async()=>{const S=(await __vitePreload(()=>Promise.resolve().then(()=>SettingsDialogReactWrapper$1),void 0,import.meta.url)).default;this.dialogs.push(new S(this))}}),f}getDiv(){return this.div}changeBaseDocument(s){this.contextMenu.__doc__=s,action(()=>this.observable.container=s.body)(),this.__doc__=s;for(const f of this.dialogs)f.setParent(s.body);if(this.legend&&(this.legend.__doc__=s),this._tooltip&&(this._tooltip.remove(),this.addToolTip()),this.extra_legends)for(const f of this.extra_legends)this[f]&&(this[f].__doc__=s)}_setConfigValue(s,f,_){return s[f]===void 0&&(s[f]=_),s[f]}drawChart(){}getConfig(){return this.legend&&(this.config.color_legend={display:!0,pos:[this.legend.offsetLeft,this.legend.offsetTop]}),JSON.parse(JSON.stringify(this.config))}getColorOptions(){return{}}setSize(s,f){s&&(this.div.style.height=`${f}px`,this.div.style.width=`${s}px`),this._setDimensions()}_setDimensions(){const s=this.div.getBoundingClientRect(),f=Math.round(s.height),_=Math.round(s.width);this.config.size=[_,f];const S=this.contentDiv.getBoundingClientRect();this.height=Math.round(S.height),this.width=_}downloadImage(s){const f=this.contentDiv.style.color;this.contentDiv.style.color="black",this.getImage(_=>{const S=document.createElement("a"),T=this.config.title||"image";if(S.download=`${T}.${s}`,s==="svg")S.href=`data:image/svg+xml,${encodeURIComponent(_)}`;else{let F=_.toDataURL("image/png");F=F.replace(/^data:image\/png/,"data:application/octet-stream"),S.href=F}S.click(),S.remove(),this.contentDiv.style.color=f},s)}downloadData(){const s=this.getChartData(),f=createEl("a",{download:this.config.title,target:"_blank",href:window.URL.createObjectURL(s)},this.__doc__.body);f.click(),f.remove()}setTitle(s){this.title.textContent=s,this.config.title!==s&&(this.config.title=s)}getImageFromSVG(s,f){const _=s.cloneNode(!0);copyStylesInline(_,s);const S=document.createElement("canvas");_.style.top="0px",S.width=s.width.baseVal.value,S.height=s.height.baseVal.value;const T=S.getContext("2d");T.clearRect(0,0,S.width,S.height);const F=new XMLSerializer().serializeToString(_),M=window.URL||window.webkitURL||window,P=new Image,H=new Blob([F],{type:"image/svg+xml;charset=utf-8"}),J=M.createObjectURL(H);P.src=J,P.onload=()=>{T.drawImage(P,0,0),f(S,T)}}}BaseChart.types=chartTypes;function copyStylesInline(d,s){const f=["svg","g"];for(let _=0;_<d.childNodes.length;_++){const S=d.childNodes[_];if(f.indexOf(S.tagName)!==-1){copyStylesInline(S,s.childNodes[_]);continue}const T=s.childNodes[_].currentStyle||window.getComputedStyle(s.childNodes[_]);if(!(T==="undefined"||T==null))for(let F=0;F<T.length;F++)S.style.setProperty(T[F],T.getPropertyValue(T[F]))}}function Fallback(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{children:"BaseReactChart"}),jsxRuntimeExports.jsx("p",{children:"BaseReactChart is a base class for charts that use React."}),jsxRuntimeExports.jsx("p",{children:"As of this writing, in order to implement a new React-based chart, make a class that extends BaseReactChart, and make it call the super constructor with an argument for the (mobx observable) function that does the react rendering."}),jsxRuntimeExports.jsx("p",{children:"See `react.md` for more detail..."})]})}class BaseReactChart extends BaseChart{constructor(f,_,S,T=Fallback){super(f,_,S);Bt(this,"useMobx",!0);Bt(this,"root");Bt(this,"reactEl");Bt(this,"ComponentFn");Bt(this,"reactionDisposers",[]);S=this.config,makeAutoObservable(S),Object.defineProperty(this,"config",{get:()=>S,set:F=>{S=F,makeAutoObservable(S)}}),this.mobxAutorun(()=>{this.setTitle(S.title)}),this.reactEl=createEl("div",{className:"react-chart"},this.contentDiv),this.ComponentFn=T,this.mountReact()}mobxAutorun(f,_){this.reactionDisposers.push(autorun(f,_))}mountReact(){const f=this.ComponentFn;this.root=createMdvPortal(jsxRuntimeExports.jsx(ChartProvider,{chart:this,children:jsxRuntimeExports.jsx(f,{})}),this.reactEl,this)}remove(){this.root.unmount(),super.remove();for(const f of this.reactionDisposers)f()}}const __vite_import_meta_env__={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},createStoreImpl=d=>{let s;const f=new Set,_=(J,K)=>{const oe=typeof J=="function"?J(s):J;if(!Object.is(oe,s)){const se=s;s=K??(typeof oe!="object"||oe===null)?oe:Object.assign({},s,oe),f.forEach(ae=>ae(s,se))}},S=()=>s,P={setState:_,getState:S,getInitialState:()=>H,subscribe:J=>(f.add(J),()=>f.delete(J)),destroy:()=>{(__vite_import_meta_env__?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),f.clear()}},H=s=d(_,S,P);return P},createStore=d=>d?createStoreImpl(d):createStoreImpl;var withSelector={exports:{}},withSelector_production_min={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h=reactExports,n=shimExports;function p(d,s){return d===s&&(d!==0||1/d===1/s)||d!==d&&s!==s}var q=typeof Object.is=="function"?Object.is:p,r=n.useSyncExternalStore,t=h.useRef,u$1=h.useEffect,v=h.useMemo,w$1=h.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(d,s,f,_,S){var T=t(null);if(T.current===null){var F={hasValue:!1,value:null};T.current=F}else F=T.current;T=v(function(){function P(se){if(!H){if(H=!0,J=se,se=_(se),S!==void 0&&F.hasValue){var ae=F.value;if(S(ae,se))return K=ae}return K=se}if(ae=K,q(J,se))return ae;var ge=_(se);return S!==void 0&&S(ae,ge)?ae:(J=se,K=ge)}var H=!1,J,K,oe=f===void 0?null:f;return[function(){return P(s())},oe===null?void 0:function(){return P(oe())}]},[s,f,_,S]);var M=r(d,T[0],T[1]);return u$1(function(){F.hasValue=!0,F.value=M},[M]),w$1(M),M};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),{useDebugValue}=React,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity$a=d=>d;function useStoreWithEqualityFn(d,s=identity$a,f){const _=useSyncExternalStoreWithSelector(d.subscribe,d.getState,d.getServerState||d.getInitialState,s,f);return useDebugValue(_),_}function assert$9(d,s){if(!d)throw new Error(s||"loader assertion failed.")}const isBrowser$2=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),matches$1=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);matches$1&&parseFloat(matches$1[1]);const window_$1=globalThis,process_=globalThis.process||{},navigator_=globalThis.navigator||{};function isElectron(d){var _,S;if(typeof window<"u"&&((_=window.process)==null?void 0:_.type)==="renderer"||typeof process<"u"&&((S=process.versions)!=null&&S.electron))return!0;const f=typeof navigator<"u"&&navigator.userAgent;return!!(f&&f.indexOf("Electron")>=0)}function isBrowser$1(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||isElectron()}function getBrowser(d){return isBrowser$1()?isElectron()?"Electron":(navigator_.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node"}const VERSION$5="4.0.7";function getStorage(d){try{const s=window[d],f="__storage_test__";return s.setItem(f,f),s.removeItem(f),s}catch{return null}}class LocalStorage{constructor(s,f,_="sessionStorage"){this.storage=getStorage(_),this.id=s,this.config=f,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(s){if(Object.assign(this.config,s),this.storage){const f=JSON.stringify(this.config);this.storage.setItem(this.id,f)}}_loadConfiguration(){let s={};if(this.storage){const f=this.storage.getItem(this.id);s=f?JSON.parse(f):{}}return Object.assign(this.config,s),this}}function formatTime(d){let s;return d<10?s=`${d.toFixed(2)}ms`:d<100?s=`${d.toFixed(1)}ms`:d<1e3?s=`${d.toFixed(0)}ms`:s=`${(d/1e3).toFixed(2)}s`,s}function leftPad(d,s=8){const f=Math.max(s-d.length,0);return`${" ".repeat(f)}${d}`}var COLOR;(function(d){d[d.BLACK=30]="BLACK",d[d.RED=31]="RED",d[d.GREEN=32]="GREEN",d[d.YELLOW=33]="YELLOW",d[d.BLUE=34]="BLUE",d[d.MAGENTA=35]="MAGENTA",d[d.CYAN=36]="CYAN",d[d.WHITE=37]="WHITE",d[d.BRIGHT_BLACK=90]="BRIGHT_BLACK",d[d.BRIGHT_RED=91]="BRIGHT_RED",d[d.BRIGHT_GREEN=92]="BRIGHT_GREEN",d[d.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",d[d.BRIGHT_BLUE=94]="BRIGHT_BLUE",d[d.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",d[d.BRIGHT_CYAN=96]="BRIGHT_CYAN",d[d.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(COLOR||(COLOR={}));const BACKGROUND_INCREMENT=10;function getColor(d){return typeof d!="string"?d:(d=d.toUpperCase(),COLOR[d]||COLOR.WHITE)}function addColor(d,s,f){return!isBrowser$1&&typeof d=="string"&&(s&&(d=`\x1B[${getColor(s)}m${d}\x1B[39m`),f&&(d=`\x1B[${getColor(f)+BACKGROUND_INCREMENT}m${d}\x1B[49m`)),d}function autobind(d,s=["constructor"]){const f=Object.getPrototypeOf(d),_=Object.getOwnPropertyNames(f),S=d;for(const T of _){const F=S[T];typeof F=="function"&&(s.find(M=>T===M)||(S[T]=F.bind(d)))}}function assert$8(d,s){if(!d)throw new Error("Assertion failed")}function getHiResTimestamp$1(){var s,f,_;let d;if(isBrowser$1()&&window_$1.performance)d=(f=(s=window_$1==null?void 0:window_$1.performance)==null?void 0:s.now)==null?void 0:f.call(s);else if("hrtime"in process_){const S=(_=process_==null?void 0:process_.hrtime)==null?void 0:_.call(process_);d=S[0]*1e3+S[1]/1e6}else d=Date.now();return d}const originalConsole={debug:isBrowser$1()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},DEFAULT_LOG_CONFIGURATION={enabled:!0,level:0};function noop$9(){}const cache$1={},ONCE={once:!0};class Log{constructor({id:s}={id:""}){this.VERSION=VERSION$5,this._startTs=getHiResTimestamp$1(),this._deltaTs=getHiResTimestamp$1(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=s,this.userData={},this._storage=new LocalStorage(`__probe-${this.id}__`,DEFAULT_LOG_CONFIGURATION),this.timeStamp(`${this.id} started`),autobind(this),Object.seal(this)}set level(s){this.setLevel(s)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((getHiResTimestamp$1()-this._startTs).toPrecision(10))}getDelta(){return Number((getHiResTimestamp$1()-this._deltaTs).toPrecision(10))}set priority(s){this.level=s}get priority(){return this.level}getPriority(){return this.level}enable(s=!0){return this._storage.setConfiguration({enabled:s}),this}setLevel(s){return this._storage.setConfiguration({level:s}),this}get(s){return this._storage.config[s]}set(s,f){this._storage.setConfiguration({[s]:f})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(s,f){if(!s)throw new Error(f||"Assertion failed")}warn(s){return this._getLogFunction(0,s,originalConsole.warn,arguments,ONCE)}error(s){return this._getLogFunction(0,s,originalConsole.error,arguments)}deprecated(s,f){return this.warn(`\`${s}\` is deprecated and will be removed in a later version. Use \`${f}\` instead`)}removed(s,f){return this.error(`\`${s}\` has been removed. Use \`${f}\` instead`)}probe(s,f){return this._getLogFunction(s,f,originalConsole.log,arguments,{time:!0,once:!0})}log(s,f){return this._getLogFunction(s,f,originalConsole.debug,arguments)}info(s,f){return this._getLogFunction(s,f,console.info,arguments)}once(s,f){return this._getLogFunction(s,f,originalConsole.debug||originalConsole.info,arguments,ONCE)}table(s,f,_){return f?this._getLogFunction(s,f,console.table||noop$9,_&&[_],{tag:getTableHeader(f)}):noop$9}time(s,f){return this._getLogFunction(s,f,console.time?console.time:console.info)}timeEnd(s,f){return this._getLogFunction(s,f,console.timeEnd?console.timeEnd:console.info)}timeStamp(s,f){return this._getLogFunction(s,f,console.timeStamp||noop$9)}group(s,f,_={collapsed:!1}){const S=normalizeArguments({logLevel:s,message:f,opts:_}),{collapsed:T}=_;return S.method=(T?console.groupCollapsed:console.group)||console.info,this._getLogFunction(S)}groupCollapsed(s,f,_={}){return this.group(s,f,Object.assign({},_,{collapsed:!0}))}groupEnd(s){return this._getLogFunction(s,"",console.groupEnd||noop$9)}withGroup(s,f,_){this.group(s,f)();try{_()}finally{this.groupEnd(s)()}}trace(){console.trace&&console.trace()}_shouldLog(s){return this.isEnabled()&&this.getLevel()>=normalizeLogLevel(s)}_getLogFunction(s,f,_,S,T){if(this._shouldLog(s)){T=normalizeArguments({logLevel:s,message:f,args:S,opts:T}),_=_||T.method,assert$8(_),T.total=this.getTotal(),T.delta=this.getDelta(),this._deltaTs=getHiResTimestamp$1();const F=T.tag||T.message;if(T.once&&F)if(!cache$1[F])cache$1[F]=getHiResTimestamp$1();else return noop$9;return f=decorateMessage(this.id,T.message,T),_.bind(console,f,...T.args)}return noop$9}}Log.VERSION=VERSION$5;function normalizeLogLevel(d){if(!d)return 0;let s;switch(typeof d){case"number":s=d;break;case"object":s=d.logLevel||d.priority||0;break;default:return 0}return assert$8(Number.isFinite(s)&&s>=0),s}function normalizeArguments(d){const{logLevel:s,message:f}=d;d.logLevel=normalizeLogLevel(s);const _=d.args?Array.from(d.args):[];for(;_.length&&_.shift()!==f;);switch(typeof s){case"string":case"function":f!==void 0&&_.unshift(f),d.message=s;break;case"object":Object.assign(d,s);break}typeof d.message=="function"&&(d.message=d.message());const S=typeof d.message;return assert$8(S==="string"||S==="object"),Object.assign(d,{args:_},d.opts)}function decorateMessage(d,s,f){if(typeof s=="string"){const _=f.time?leftPad(formatTime(f.total)):"";s=f.time?`${d}: ${_}  ${s}`:`${d}: ${s}`,s=addColor(s,f.color,f.background)}return s}function getTableHeader(d){for(const s in d)for(const f in d[s])return f||"untitled";return"empty"}function mergeLoaderOptions(d,s){return mergeOptionsRecursively(d||{},s)}function mergeOptionsRecursively(d,s,f=0){if(f>3)return s;const _={...d};for(const[S,T]of Object.entries(s))T&&typeof T=="object"&&!Array.isArray(T)?_[S]=mergeOptionsRecursively(_[S]||{},s[S],f+1):_[S]=s[S];return _}const NPM_TAG="latest";function getVersion(){var d;return(d=globalThis._loadersgl_)!=null&&d.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.4"),globalThis._loadersgl_.version}const VERSION$4=getVersion();function assert$7(d,s){if(!d)throw new Error(s||"loaders.gl assertion failed.")}const isBrowser=typeof process!="object"||String(process)!=="[object process]"||process.browser,isMobile=typeof window<"u"&&typeof window.orientation<"u",matches=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);matches&&parseFloat(matches[1]);class WorkerJob{constructor(s,f){Bt(this,"name");Bt(this,"workerThread");Bt(this,"isRunning",!0);Bt(this,"result");Bt(this,"_resolve",()=>{});Bt(this,"_reject",()=>{});this.name=s,this.workerThread=f,this.result=new Promise((_,S)=>{this._resolve=_,this._reject=S})}postMessage(s,f){this.workerThread.postMessage({source:"loaders.gl",type:s,payload:f})}done(s){assert$7(this.isRunning),this.isRunning=!1,this._resolve(s)}error(s){assert$7(this.isRunning),this.isRunning=!1,this._reject(s)}}class NodeWorker{terminate(){}}const workerURLCache=new Map;function getLoadableWorkerURL(d){assert$7(d.source&&!d.url||!d.source&&d.url);let s=workerURLCache.get(d.source||d.url);return s||(d.url&&(s=getLoadableWorkerURLFromURL(d.url),workerURLCache.set(d.url,s)),d.source&&(s=getLoadableWorkerURLFromSource(d.source),workerURLCache.set(d.source,s))),assert$7(s),s}function getLoadableWorkerURLFromURL(d){if(!d.startsWith("http"))return d;const s=buildScriptSource(d);return getLoadableWorkerURLFromSource(s)}function getLoadableWorkerURLFromSource(d){const s=new Blob([d],{type:"application/javascript"});return URL.createObjectURL(s)}function buildScriptSource(d){return`try {
  importScripts('${d}');
} catch (error) {
  console.error(error);
  throw error;
}`}function getTransferList(d,s=!0,f){const _=f||new Set;if(d){if(isTransferable(d))_.add(d);else if(isTransferable(d.buffer))_.add(d.buffer);else if(!ArrayBuffer.isView(d)){if(s&&typeof d=="object")for(const S in d)getTransferList(d[S],s,_)}}return f===void 0?Array.from(_):[]}function isTransferable(d){return d?d instanceof ArrayBuffer||typeof MessagePort<"u"&&d instanceof MessagePort||typeof ImageBitmap<"u"&&d instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&d instanceof OffscreenCanvas:!1}const NOOP=()=>{};class WorkerThread{constructor(s){Bt(this,"name");Bt(this,"source");Bt(this,"url");Bt(this,"terminated",!1);Bt(this,"worker");Bt(this,"onMessage");Bt(this,"onError");Bt(this,"_loadableURL","");const{name:f,source:_,url:S}=s;assert$7(_||S),this.name=f,this.source=_,this.url=S,this.onMessage=NOOP,this.onError=T=>console.log(T),this.worker=isBrowser?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&isBrowser||typeof NodeWorker<"u"&&!isBrowser}destroy(){this.onMessage=NOOP,this.onError=NOOP,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(s,f){f=f||getTransferList(s),this.worker.postMessage(s,f)}_getErrorFromErrorEvent(s){let f="Failed to load ";return f+=`worker ${this.name} from ${this.url}. `,s.message&&(f+=`${s.message} in `),s.lineno&&(f+=`:${s.lineno}:${s.colno}`),new Error(f)}_createBrowserWorker(){this._loadableURL=getLoadableWorkerURL({source:this.source,url:this.url});const s=new Worker(this._loadableURL,{name:this.name});return s.onmessage=f=>{f.data?this.onMessage(f.data):this.onError(new Error("No data received"))},s.onerror=f=>{this.onError(this._getErrorFromErrorEvent(f)),this.terminated=!0},s.onmessageerror=f=>console.error(f),s}_createNodeWorker(){let s;if(this.url){const _=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;s=new NodeWorker(_,{eval:!1})}else if(this.source)s=new NodeWorker(this.source,{eval:!0});else throw new Error("no worker");return s.on("message",f=>{this.onMessage(f)}),s.on("error",f=>{this.onError(f)}),s.on("exit",f=>{}),s}}class WorkerPool{constructor(s){Bt(this,"name","unnamed");Bt(this,"source");Bt(this,"url");Bt(this,"maxConcurrency",1);Bt(this,"maxMobileConcurrency",1);Bt(this,"onDebug",()=>{});Bt(this,"reuseWorkers",!0);Bt(this,"props",{});Bt(this,"jobQueue",[]);Bt(this,"idleQueue",[]);Bt(this,"count",0);Bt(this,"isDestroyed",!1);this.source=s.source,this.url=s.url,this.setProps(s)}static isSupported(){return WorkerThread.isSupported()}destroy(){this.idleQueue.forEach(s=>s.destroy()),this.isDestroyed=!0}setProps(s){this.props={...this.props,...s},s.name!==void 0&&(this.name=s.name),s.maxConcurrency!==void 0&&(this.maxConcurrency=s.maxConcurrency),s.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=s.maxMobileConcurrency),s.reuseWorkers!==void 0&&(this.reuseWorkers=s.reuseWorkers),s.onDebug!==void 0&&(this.onDebug=s.onDebug)}async startJob(s,f=(S,T,F)=>S.done(F),_=(S,T)=>S.error(T)){const S=new Promise(T=>(this.jobQueue.push({name:s,onMessage:f,onError:_,onStart:T}),this));return this._startQueuedJob(),await S}async _startQueuedJob(){if(!this.jobQueue.length)return;const s=this._getAvailableWorker();if(!s)return;const f=this.jobQueue.shift();if(f){this.onDebug({message:"Starting job",name:f.name,workerThread:s,backlog:this.jobQueue.length});const _=new WorkerJob(f.name,s);s.onMessage=S=>f.onMessage(_,S.type,S.payload),s.onError=S=>f.onError(_,S),f.onStart(_);try{await _.result}catch(S){console.error(`Worker exception: ${S}`)}finally{this.returnWorkerToQueue(s)}}}returnWorkerToQueue(s){!isBrowser||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(s.destroy(),this.count--):this.idleQueue.push(s),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const s=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new WorkerThread({name:s,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return isMobile?this.maxMobileConcurrency:this.maxConcurrency}}const DEFAULT_PROPS$2={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},hm=class hm{constructor(s){Bt(this,"props");Bt(this,"workerPools",new Map);this.props={...DEFAULT_PROPS$2},this.setProps(s),this.workerPools=new Map}static isSupported(){return WorkerThread.isSupported()}static getWorkerFarm(s={}){return hm._workerFarm=hm._workerFarm||new hm({}),hm._workerFarm.setProps(s),hm._workerFarm}destroy(){for(const s of this.workerPools.values())s.destroy();this.workerPools=new Map}setProps(s){this.props={...this.props,...s};for(const f of this.workerPools.values())f.setProps(this._getWorkerPoolProps())}getWorkerPool(s){const{name:f,source:_,url:S}=s;let T=this.workerPools.get(f);return T||(T=new WorkerPool({name:f,source:_,url:S}),T.setProps(this._getWorkerPoolProps()),this.workerPools.set(f,T)),T}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};Bt(hm,"_workerFarm");let WorkerFarm=hm;function getWorkerURL(d,s={}){const f=s[d.id]||{},_=isBrowser?`${d.id}-worker.js`:`${d.id}-worker-node.js`;let S=f.workerUrl;if(!S&&d.id==="compression"&&(S=s.workerUrl),s._workerType==="test"&&(isBrowser?S=`modules/${d.module}/dist/${_}`:S=`modules/${d.module}/src/workers/${d.id}-worker-node.ts`),!S){let T=d.version;T==="latest"&&(T=NPM_TAG);const F=T?`@${T}`:"";S=`https://unpkg.com/@loaders.gl/${d.module}${F}/dist/${_}`}return assert$7(S),S}function validateWorkerVersion(d,s=VERSION$4){assert$7(d,"no worker provided");const f=d.version;return!(!s||!f)}const zlib={};function canParseWithWorker(d,s){return!WorkerFarm.isSupported()||!isBrowser&&!(s!=null&&s._nodeWorkers)?!1:d.worker&&(s==null?void 0:s.worker)}async function parseWithWorker(d,s,f,_,S){const T=d.id,F=getWorkerURL(d,f),P=WorkerFarm.getWorkerFarm(f).getWorkerPool({name:T,url:F});f=JSON.parse(JSON.stringify(f)),_=JSON.parse(JSON.stringify(_||{}));const H=await P.startJob("process-on-worker",onMessage.bind(null,S));return H.postMessage("process",{input:s,options:f,context:_}),await(await H.result).result}async function onMessage(d,s,f,_){switch(f){case"done":s.done(_);break;case"error":s.error(new Error(_.error));break;case"process":const{id:S,input:T,options:F}=_;try{const M=await d(T,F);s.postMessage("done",{id:S,result:M})}catch(M){const P=M instanceof Error?M.message:"unknown error";s.postMessage("error",{id:S,error:P})}break;default:console.warn(`parse-with-worker unknown message ${f}`)}}function compareArrayBuffers(d,s,f){if(f=f||d.byteLength,d.byteLength<f||s.byteLength<f)return!1;const _=new Uint8Array(d),S=new Uint8Array(s);for(let T=0;T<_.length;++T)if(_[T]!==S[T])return!1;return!0}function concatenateArrayBuffers(...d){return concatenateArrayBuffersFromArray(d)}function concatenateArrayBuffersFromArray(d){const s=d.map(T=>T instanceof ArrayBuffer?new Uint8Array(T):T),f=s.reduce((T,F)=>T+F.byteLength,0),_=new Uint8Array(f);let S=0;for(const T of s)_.set(T,S),S+=T.byteLength;return _.buffer}async function concatenateArrayBuffersAsync(d){const s=[];for await(const f of d)s.push(f);return concatenateArrayBuffers(...s)}function getHiResTimestamp(){let d;if(typeof window<"u"&&window.performance)d=window.performance.now();else if(typeof process<"u"&&process.hrtime){const s=process.hrtime();d=s[0]*1e3+s[1]/1e6}else d=Date.now();return d}class Stat{constructor(s,f){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=s,this.type=f,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(s){return this.sampleSize=s,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(s){return this._count+=s,this._samples++,this._checkSampling(),this}subtractCount(s){return this._count-=s,this._samples++,this._checkSampling(),this}addTime(s){return this._time+=s,this.lastTiming=s,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=getHiResTimestamp(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(getHiResTimestamp()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Stats{constructor(s){this.stats={},this.id=s.id,this.stats={},this._initializeStats(s.stats),Object.seal(this)}get(s,f="count"){return this._getOrCreate({name:s,type:f})}get size(){return Object.keys(this.stats).length}reset(){for(const s of Object.values(this.stats))s.reset();return this}forEach(s){for(const f of Object.values(this.stats))s(f)}getTable(){const s={};return this.forEach(f=>{s[f.name]={time:f.time||0,count:f.count||0,average:f.getAverageTime()||0,hz:f.getHz()||0}}),s}_initializeStats(s=[]){s.forEach(f=>this._getOrCreate(f))}_getOrCreate(s){const{name:f,type:_}=s;let S=this.stats[f];return S||(s instanceof Stat?S=s:S=new Stat(f,_),this.stats[f]=S),S}}const STAT_QUEUED_REQUESTS="Queued Requests",STAT_ACTIVE_REQUESTS="Active Requests",STAT_CANCELLED_REQUESTS="Cancelled Requests",STAT_QUEUED_REQUESTS_EVER="Queued Requests Ever",STAT_ACTIVE_REQUESTS_EVER="Active Requests Ever",DEFAULT_PROPS$1={id:"request-scheduler",throttleRequests:!0,maxRequests:6,debounceTime:0};class RequestScheduler{constructor(s={}){Bt(this,"props");Bt(this,"stats");Bt(this,"activeRequestCount",0);Bt(this,"requestQueue",[]);Bt(this,"requestMap",new Map);Bt(this,"updateTimer",null);this.props={...DEFAULT_PROPS$1,...s},this.stats=new Stats({id:this.props.id}),this.stats.get(STAT_QUEUED_REQUESTS),this.stats.get(STAT_ACTIVE_REQUESTS),this.stats.get(STAT_CANCELLED_REQUESTS),this.stats.get(STAT_QUEUED_REQUESTS_EVER),this.stats.get(STAT_ACTIVE_REQUESTS_EVER)}scheduleRequest(s,f=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(s))return this.requestMap.get(s);const _={handle:s,priority:0,getPriority:f},S=new Promise(T=>(_.resolve=T,_));return this.requestQueue.push(_),this.requestMap.set(s,S),this._issueNewRequests(),S}_issueRequest(s){const{handle:f,resolve:_}=s;let S=!1;const T=()=>{S||(S=!0,this.requestMap.delete(f),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,_?_({done:T}):Promise.resolve({done:T})}_issueNewRequests(){this.updateTimer!==null&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>this._issueNewRequestsAsync(),this.props.debounceTime)}_issueNewRequestsAsync(){this.updateTimer!==null&&clearTimeout(this.updateTimer),this.updateTimer=null;const s=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(s!==0){this._updateAllRequests();for(let f=0;f<s;++f){const _=this.requestQueue.shift();_&&this._issueRequest(_)}}}_updateAllRequests(){const s=this.requestQueue;for(let f=0;f<s.length;++f){const _=s[f];this._updateRequest(_)||(s.splice(f,1),this.requestMap.delete(_.handle),f--)}s.sort((f,_)=>f.priority-_.priority)}_updateRequest(s){return s.priority=s.getPriority(s.handle),s.priority<0?(s.resolve(null),!1):!0}}let pathPrefix$1="";const fileAliases={};function resolvePath(d){for(const s in fileAliases)if(d.startsWith(s)){const f=fileAliases[s];d=d.replace(s,f)}return!d.startsWith("http://")&&!d.startsWith("https://")&&(d=`${pathPrefix$1}${d}`),d}function toArrayBuffer$1(d){return d}function isBuffer$2(d){return d&&typeof d=="object"&&d.isBuffer}function toArrayBuffer(d){if(isBuffer$2(d))return d;if(d instanceof ArrayBuffer)return d;if(ArrayBuffer.isView(d))return d.byteOffset===0&&d.byteLength===d.buffer.byteLength?d.buffer:d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength);if(typeof d=="string"){const s=d;return new TextEncoder().encode(s).buffer}if(d&&typeof d=="object"&&d._toArrayBuffer)return d._toArrayBuffer();throw new Error("toArrayBuffer")}function filename(d){const s=d?d.lastIndexOf("/"):-1;return s>=0?d.substr(s+1):""}function dirname(d){const s=d?d.lastIndexOf("/"):-1;return s>=0?d.substr(0,s):""}const isBoolean$1=d=>typeof d=="boolean",isFunction$1=d=>typeof d=="function",isObject$9=d=>d!==null&&typeof d=="object",isPureObject=d=>isObject$9(d)&&d.constructor==={}.constructor,isIterable=d=>!!d&&typeof d[Symbol.iterator]=="function",isAsyncIterable$1=d=>d&&typeof d[Symbol.asyncIterator]=="function",isResponse$1=d=>typeof Response<"u"&&d instanceof Response||d&&d.arrayBuffer&&d.text&&d.json,isBlob$1=d=>typeof Blob<"u"&&d instanceof Blob,isBuffer$1=d=>d&&typeof d=="object"&&d.isBuffer,isReadableDOMStream=d=>typeof ReadableStream<"u"&&d instanceof ReadableStream||isObject$9(d)&&isFunction$1(d.tee)&&isFunction$1(d.cancel)&&isFunction$1(d.getReader),isReadableNodeStream=d=>isObject$9(d)&&isFunction$1(d.read)&&isFunction$1(d.pipe)&&isBoolean$1(d.readable),isReadableStream$1=d=>isReadableDOMStream(d)||isReadableNodeStream(d);class FetchError extends Error{constructor(f,_){super(f);Bt(this,"reason");Bt(this,"url");Bt(this,"response");this.reason=_.reason,this.url=_.url,this.response=_.response}}const DATA_URL_PATTERN=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,MIME_TYPE_PATTERN=/^([-\w.]+\/[-\w.+]+)/;function compareMIMETypes(d,s){return d.toLowerCase()===s.toLowerCase()}function parseMIMEType(d){const s=MIME_TYPE_PATTERN.exec(d);return s?s[1]:d}function parseMIMETypeFromURL(d){const s=DATA_URL_PATTERN.exec(d);return s?s[1]:""}const QUERY_STRING_PATTERN=/\?.*/;function extractQueryString(d){const s=d.match(QUERY_STRING_PATTERN);return s&&s[0]}function stripQueryString(d){return d.replace(QUERY_STRING_PATTERN,"")}function shortenUrlForDisplay(d){if(d.length<50)return d;const s=d.slice(d.length-15);return`${d.substr(0,32)}...${s}`}function getResourceUrl(d){return isResponse$1(d)?d.url:isBlob$1(d)?d.name||"":typeof d=="string"?d:""}function getResourceMIMEType(d){if(isResponse$1(d)){const s=d,f=s.headers.get("content-type")||"",_=stripQueryString(s.url);return parseMIMEType(f)||parseMIMETypeFromURL(_)}return isBlob$1(d)?d.type||"":typeof d=="string"?parseMIMETypeFromURL(d):""}function getResourceContentLength(d){return isResponse$1(d)?d.headers["content-length"]||-1:isBlob$1(d)?d.size:typeof d=="string"?d.length:d instanceof ArrayBuffer||ArrayBuffer.isView(d)?d.byteLength:-1}async function makeResponse(d){if(isResponse$1(d))return d;const s={},f=getResourceContentLength(d);f>=0&&(s["content-length"]=String(f));const _=getResourceUrl(d),S=getResourceMIMEType(d);S&&(s["content-type"]=S);const T=await getInitialDataUrl(d);T&&(s["x-first-bytes"]=T),typeof d=="string"&&(d=new TextEncoder().encode(d));const F=new Response(d,{headers:s});return Object.defineProperty(F,"url",{value:_}),F}async function checkResponse(d){if(!d.ok)throw await getResponseError(d)}async function getResponseError(d){const s=shortenUrlForDisplay(d.url);let f=`Failed to fetch resource (${d.status}) ${d.statusText}: ${s}`;f=f.length>100?`${f.slice(0,100)}...`:f;const _={reason:d.statusText,url:d.url,response:d};try{const S=d.headers.get("Content-Type");_.reason=S!=null&&S.includes("application/json")?await d.json():d.text()}catch{}return new FetchError(f,_)}async function getInitialDataUrl(d){if(typeof d=="string")return`data:,${d.slice(0,5)}`;if(d instanceof Blob){const f=d.slice(0,5);return await new Promise(_=>{const S=new FileReader;S.onload=T=>{var F;return _((F=T==null?void 0:T.target)==null?void 0:F.result)},S.readAsDataURL(f)})}if(d instanceof ArrayBuffer){const f=d.slice(0,5);return`data:base64,${arrayBufferToBase64(f)}`}return null}function arrayBufferToBase64(d){let s="";const f=new Uint8Array(d);for(let _=0;_<f.byteLength;_++)s+=String.fromCharCode(f[_]);return btoa(s)}function isNodePath(d){return!isRequestURL(d)&&!isDataURL(d)}function isRequestURL(d){return d.startsWith("http:")||d.startsWith("https:")}function isDataURL(d){return d.startsWith("data:")}async function fetchFile(d,s){var f,_;if(typeof d=="string"){const S=resolvePath(d);return isNodePath(S)&&(f=globalThis.loaders)!=null&&f.fetchNode?(_=globalThis.loaders)==null?void 0:_.fetchNode(S,s):await fetch(S,s)}return await makeResponse(d)}const probeLog=new Log({id:"loaders.gl"});class NullLog{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class ConsoleLog{constructor(){Bt(this,"console");this.console=console}log(...s){return this.console.log.bind(this.console,...s)}info(...s){return this.console.info.bind(this.console,...s)}warn(...s){return this.console.warn.bind(this.console,...s)}error(...s){return this.console.error.bind(this.console,...s)}}const DEFAULT_LOADER_OPTIONS={fetch:null,mimeType:void 0,nothrow:!1,log:new ConsoleLog,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:isBrowser$2,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},REMOVED_LOADER_OPTIONS={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function getGlobalLoaderState(){globalThis.loaders=globalThis.loaders||{};const{loaders:d}=globalThis;return d._state||(d._state={}),d._state}function getGlobalLoaderOptions(){const d=getGlobalLoaderState();return d.globalOptions=d.globalOptions||{...DEFAULT_LOADER_OPTIONS},d.globalOptions}function normalizeOptions(d,s,f,_){return f=f||[],f=Array.isArray(f)?f:[f],validateOptions(d,f),normalizeOptionsInternal(s,d,_)}function validateOptions(d,s){validateOptionsObject(d,null,DEFAULT_LOADER_OPTIONS,REMOVED_LOADER_OPTIONS,s);for(const f of s){const _=d&&d[f.id]||{},S=f.options&&f.options[f.id]||{},T=f.deprecatedOptions&&f.deprecatedOptions[f.id]||{};validateOptionsObject(_,f.id,S,T,s)}}function validateOptionsObject(d,s,f,_,S){const T=s||"Top level",F=s?`${s}.`:"";for(const M in d){const P=!s&&isObject$9(d[M]),H=M==="baseUri"&&!s,J=M==="workerUrl"&&s;if(!(M in f)&&!H&&!J){if(M in _)probeLog.warn(`${T} loader option '${F}${M}' no longer supported, use '${_[M]}'`)();else if(!P){const K=findSimilarOption(M,S);probeLog.warn(`${T} loader option '${F}${M}' not recognized. ${K}`)()}}}}function findSimilarOption(d,s){const f=d.toLowerCase();let _="";for(const S of s)for(const T in S.options){if(d===T)return`Did you mean '${S.id}.${T}'?`;const F=T.toLowerCase();(f.startsWith(F)||F.startsWith(f))&&(_=_||`Did you mean '${S.id}.${T}'?`)}return _}function normalizeOptionsInternal(d,s,f){const S={...d.options||{}};return addUrlOptions(S,f),S.log===null&&(S.log=new NullLog),mergeNestedFields(S,getGlobalLoaderOptions()),mergeNestedFields(S,s),S}function mergeNestedFields(d,s){for(const f in s)if(f in s){const _=s[f];isPureObject(_)&&isPureObject(d[f])?d[f]={...d[f],...s[f]}:d[f]=s[f]}}function addUrlOptions(d,s){s&&!("baseUri"in d)&&(d.baseUri=s)}function isLoaderObject(d){return d?(Array.isArray(d)&&(d=d[0]),Array.isArray(d==null?void 0:d.extensions)):!1}function normalizeLoader(d){assert$9(d,"null loader"),assert$9(isLoaderObject(d),"invalid loader");let s;return Array.isArray(d)&&(s=d[1],d=d[0],d={...d,options:{...d.options,...s}}),(d!=null&&d.parseTextSync||d!=null&&d.parseText)&&(d.text=!0),d.text||(d.binary=!0),d}const getGlobalLoaderRegistry=()=>{const d=getGlobalLoaderState();return d.loaderRegistry=d.loaderRegistry||[],d.loaderRegistry};function registerLoaders(d){const s=getGlobalLoaderRegistry();d=Array.isArray(d)?d:[d];for(const f of d){const _=normalizeLoader(f);s.find(S=>_===S)||s.unshift(_)}}function getRegisteredLoaders(){return getGlobalLoaderRegistry()}const log$1=new Log({id:"loaders.gl"}),EXT_PATTERN=/\.([^.]+)$/;async function selectLoader(d,s=[],f,_){if(!validHTTPResponse(d))return null;let S=selectLoaderSync(d,s,{...f,nothrow:!0},_);if(S)return S;if(isBlob$1(d)&&(d=await d.slice(0,10).arrayBuffer(),S=selectLoaderSync(d,s,f,_)),!S&&!(f!=null&&f.nothrow))throw new Error(getNoValidLoaderMessage(d));return S}function selectLoaderSync(d,s=[],f,_){if(!validHTTPResponse(d))return null;if(s&&!Array.isArray(s))return normalizeLoader(s);let S=[];s&&(S=S.concat(s)),f!=null&&f.ignoreRegisteredLoaders||S.push(...getRegisteredLoaders()),normalizeLoaders(S);const T=selectLoaderInternal(d,S,f,_);if(!T&&!(f!=null&&f.nothrow))throw new Error(getNoValidLoaderMessage(d));return T}function selectLoaderInternal(d,s,f,_){const S=getResourceUrl(d),T=getResourceMIMEType(d),F=stripQueryString(S)||(_==null?void 0:_.url);let M=null,P="";return f!=null&&f.mimeType&&(M=findLoaderByMIMEType(s,f==null?void 0:f.mimeType),P=`match forced by supplied MIME type ${f==null?void 0:f.mimeType}`),M=M||findLoaderByUrl(s,F),P=P||(M?`matched url ${F}`:""),M=M||findLoaderByMIMEType(s,T),P=P||(M?`matched MIME type ${T}`:""),M=M||findLoaderByInitialBytes(s,d),P=P||(M?`matched initial data ${getFirstCharacters(d)}`:""),f!=null&&f.fallbackMimeType&&(M=M||findLoaderByMIMEType(s,f==null?void 0:f.fallbackMimeType),P=P||(M?`matched fallback MIME type ${T}`:"")),P&&log$1.log(1,`selectLoader selected ${M==null?void 0:M.name}: ${P}.`),M}function validHTTPResponse(d){return!(d instanceof Response&&d.status===204)}function getNoValidLoaderMessage(d){const s=getResourceUrl(d),f=getResourceMIMEType(d);let _="No valid loader found (";_+=s?`${filename(s)}, `:"no url provided, ",_+=`MIME type: ${f?`"${f}"`:"not provided"}, `;const S=d?getFirstCharacters(d):"";return _+=S?` first bytes: "${S}"`:"first bytes: not available",_+=")",_}function normalizeLoaders(d){for(const s of d)normalizeLoader(s)}function findLoaderByUrl(d,s){const f=s&&EXT_PATTERN.exec(s),_=f&&f[1];return _?findLoaderByExtension(d,_):null}function findLoaderByExtension(d,s){s=s.toLowerCase();for(const f of d)for(const _ of f.extensions)if(_.toLowerCase()===s)return f;return null}function findLoaderByMIMEType(d,s){var f;for(const _ of d)if((f=_.mimeTypes)!=null&&f.some(S=>compareMIMETypes(s,S))||compareMIMETypes(s,`application/x.${_.id}`))return _;return null}function findLoaderByInitialBytes(d,s){if(!s)return null;for(const f of d)if(typeof s=="string"){if(testDataAgainstText(s,f))return f}else if(ArrayBuffer.isView(s)){if(testDataAgainstBinary(s.buffer,s.byteOffset,f))return f}else if(s instanceof ArrayBuffer&&testDataAgainstBinary(s,0,f))return f;return null}function testDataAgainstText(d,s){return s.testText?s.testText(d):(Array.isArray(s.tests)?s.tests:[s.tests]).some(_=>d.startsWith(_))}function testDataAgainstBinary(d,s,f){return(Array.isArray(f.tests)?f.tests:[f.tests]).some(S=>testBinary(d,s,f,S))}function testBinary(d,s,f,_){if(_ instanceof ArrayBuffer)return compareArrayBuffers(_,d,_.byteLength);switch(typeof _){case"function":return _(d);case"string":const S=getMagicString(d,s,_.length);return _===S;default:return!1}}function getFirstCharacters(d,s=5){return typeof d=="string"?d.slice(0,s):ArrayBuffer.isView(d)?getMagicString(d.buffer,d.byteOffset,s):d instanceof ArrayBuffer?getMagicString(d,0,s):""}function getMagicString(d,s,f){if(d.byteLength<s+f)return"";const _=new DataView(d);let S="";for(let T=0;T<f;T++)S+=String.fromCharCode(_.getUint8(s+T));return S}const DEFAULT_CHUNK_SIZE$3=256*1024;function*makeStringIterator(d,s){const f=(s==null?void 0:s.chunkSize)||DEFAULT_CHUNK_SIZE$3;let _=0;const S=new TextEncoder;for(;_<d.length;){const T=Math.min(d.length-_,f),F=d.slice(_,_+T);_+=T,yield S.encode(F)}}const DEFAULT_CHUNK_SIZE$2=256*1024;function*makeArrayBufferIterator(d,s={}){const{chunkSize:f=DEFAULT_CHUNK_SIZE$2}=s;let _=0;for(;_<d.byteLength;){const S=Math.min(d.byteLength-_,f),T=new ArrayBuffer(S),F=new Uint8Array(d,_,S);new Uint8Array(T).set(F),_+=S,yield T}}const DEFAULT_CHUNK_SIZE$1=1024*1024;async function*makeBlobIterator(d,s){const f=(s==null?void 0:s.chunkSize)||DEFAULT_CHUNK_SIZE$1;let _=0;for(;_<d.size;){const S=_+f,T=await d.slice(_,S).arrayBuffer();_=S,yield T}}function makeStreamIterator(d,s){return isBrowser$2?makeBrowserStreamIterator(d,s):makeNodeStreamIterator(d)}async function*makeBrowserStreamIterator(d,s){const f=d.getReader();let _;try{for(;;){const S=_||f.read();s!=null&&s._streamReadAhead&&(_=f.read());const{done:T,value:F}=await S;if(T)return;yield toArrayBuffer(F)}}catch{f.releaseLock()}}async function*makeNodeStreamIterator(d,s){for await(const f of d)yield toArrayBuffer(f)}function makeIterator(d,s){if(typeof d=="string")return makeStringIterator(d,s);if(d instanceof ArrayBuffer)return makeArrayBufferIterator(d,s);if(isBlob$1(d))return makeBlobIterator(d,s);if(isReadableStream$1(d))return makeStreamIterator(d,s);if(isResponse$1(d))return makeStreamIterator(d.body,s);throw new Error("makeIterator")}const ERR_DATA="Cannot convert supplied data type";function getArrayBufferOrStringFromDataSync(d,s,f){if(s.text&&typeof d=="string")return d;if(isBuffer$1(d)&&(d=d.buffer),d instanceof ArrayBuffer){const _=d;return s.text&&!s.binary?new TextDecoder("utf8").decode(_):_}if(ArrayBuffer.isView(d)){if(s.text&&!s.binary)return new TextDecoder("utf8").decode(d);let _=d.buffer;const S=d.byteLength||d.length;return(d.byteOffset!==0||S!==_.byteLength)&&(_=_.slice(d.byteOffset,d.byteOffset+S)),_}throw new Error(ERR_DATA)}async function getArrayBufferOrStringFromData(d,s,f){const _=d instanceof ArrayBuffer||ArrayBuffer.isView(d);if(typeof d=="string"||_)return getArrayBufferOrStringFromDataSync(d,s);if(isBlob$1(d)&&(d=await makeResponse(d)),isResponse$1(d)){const S=d;return await checkResponse(S),s.binary?await S.arrayBuffer():await S.text()}if(isReadableStream$1(d)&&(d=makeIterator(d,f)),isIterable(d)||isAsyncIterable$1(d))return concatenateArrayBuffersAsync(d);throw new Error(ERR_DATA)}function getFetchFunction(d,s){const f=getGlobalLoaderOptions(),_=d||f;return typeof _.fetch=="function"?_.fetch:isObject$9(_.fetch)?S=>fetchFile(S,_.fetch):s!=null&&s.fetch?s==null?void 0:s.fetch:fetchFile}function getLoaderContext(d,s,f){if(f)return f;const _={fetch:getFetchFunction(s,d),...d};if(_.url){const S=stripQueryString(_.url);_.baseUrl=S,_.queryString=extractQueryString(_.url),_.filename=filename(S),_.baseUrl=dirname(S)}return Array.isArray(_.loaders)||(_.loaders=null),_}function getLoadersFromContext(d,s){if(d&&!Array.isArray(d))return d;let f;if(d&&(f=Array.isArray(d)?d:[d]),s&&s.loaders){const _=Array.isArray(s.loaders)?s.loaders:[s.loaders];f=f?[...f,..._]:_}return f&&f.length?f:void 0}async function parse$2(d,s,f,_){s&&!Array.isArray(s)&&!isLoaderObject(s)&&(_=void 0,f=s,s=void 0),d=await d,f=f||{};const S=getResourceUrl(d),F=getLoadersFromContext(s,_),M=await selectLoader(d,F,f);return M?(f=normalizeOptions(f,M,F,S),_=getLoaderContext({url:S,_parse:parse$2,loaders:F},f,_||null),await parseWithLoader(M,d,f,_)):null}async function parseWithLoader(d,s,f,_){if(validateWorkerVersion(d),f=mergeLoaderOptions(d.options,f),isResponse$1(s)){const T=s,{ok:F,redirected:M,status:P,statusText:H,type:J,url:K}=T,oe=Object.fromEntries(T.headers.entries());_.response={headers:oe,ok:F,redirected:M,status:P,statusText:H,type:J,url:K}}s=await getArrayBufferOrStringFromData(s,d,f);const S=d;if(S.parseTextSync&&typeof s=="string")return S.parseTextSync(s,f,_);if(canParseWithWorker(d,f))return await parseWithWorker(d,s,f,_,parse$2);if(S.parseText&&typeof s=="string")return await S.parseText(s,f,_);if(S.parse)return await S.parse(s,f,_);throw assert$7(!S.parseSync),new Error(`${d.id} loader - no parser found and worker is disabled`)}async function load$3(d,s,f,_){let S,T;!Array.isArray(s)&&!isLoaderObject(s)?(S=[],T=s):(S=s,T=f);const F=getFetchFunction(T);let M=d;return typeof d=="string"&&(M=await F(d)),isBlob$1(d)&&(M=await F(d)),Array.isArray(S)?await parse$2(M,S,T):await parse$2(M,S,T)}const VERSION$3="4.2.4";var bQ;const parseImageNode=(bQ=globalThis.loaders)==null?void 0:bQ.parseImageNode,IMAGE_SUPPORTED=typeof Image<"u",IMAGE_BITMAP_SUPPORTED=typeof ImageBitmap<"u",NODE_IMAGE_SUPPORTED=!!parseImageNode,DATA_SUPPORTED=isBrowser$2?!0:NODE_IMAGE_SUPPORTED;function isImageTypeSupported(d){switch(d){case"auto":return IMAGE_BITMAP_SUPPORTED||IMAGE_SUPPORTED||DATA_SUPPORTED;case"imagebitmap":return IMAGE_BITMAP_SUPPORTED;case"image":return IMAGE_SUPPORTED;case"data":return DATA_SUPPORTED;default:throw new Error(`@loaders.gl/images: image ${d} not supported in this environment`)}}function getDefaultImageType(){if(IMAGE_BITMAP_SUPPORTED)return"imagebitmap";if(IMAGE_SUPPORTED)return"image";if(DATA_SUPPORTED)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function getImageType(d){const s=getImageTypeOrNull(d);if(!s)throw new Error("Not an image");return s}function getImageData(d){switch(getImageType(d)){case"data":return d;case"image":case"imagebitmap":const s=document.createElement("canvas"),f=s.getContext("2d");if(!f)throw new Error("getImageData");return s.width=d.width,s.height=d.height,f.drawImage(d,0,0),f.getImageData(0,0,d.width,d.height);default:throw new Error("getImageData")}}function getImageTypeOrNull(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&d instanceof Image?"image":d&&typeof d=="object"&&d.data&&d.width&&d.height?"data":null}const SVG_DATA_URL_PATTERN=/^data:image\/svg\+xml/,SVG_URL_PATTERN=/\.svg((\?|#).*)?$/;function isSVG(d){return d&&(SVG_DATA_URL_PATTERN.test(d)||SVG_URL_PATTERN.test(d))}function getBlobOrSVGDataUrl(d,s){if(isSVG(s)){let _=new TextDecoder().decode(d);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(_=unescape(encodeURIComponent(_)))}catch(T){throw new Error(T.message)}return`data:image/svg+xml;base64,${btoa(_)}`}return getBlob(d,s)}function getBlob(d,s){if(isSVG(s))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(d)])}async function parseToImage(d,s,f){const _=getBlobOrSVGDataUrl(d,f),S=self.URL||self.webkitURL,T=typeof _!="string"&&S.createObjectURL(_);try{return await loadToImage(T||_,s)}finally{T&&S.revokeObjectURL(T)}}async function loadToImage(d,s){const f=new Image;return f.src=d,s.image&&s.image.decode&&f.decode?(await f.decode(),f):await new Promise((_,S)=>{try{f.onload=()=>_(f),f.onerror=T=>{const F=T instanceof Error?T.message:"error";S(new Error(F))}}catch(T){S(T)}})}const EMPTY_OBJECT={};let imagebitmapOptionsSupported=!0;async function parseToImageBitmap(d,s,f){let _;isSVG(f)?_=await parseToImage(d,s,f):_=getBlob(d,f);const S=s&&s.imagebitmap;return await safeCreateImageBitmap(_,S)}async function safeCreateImageBitmap(d,s=null){if((isEmptyObject(s)||!imagebitmapOptionsSupported)&&(s=null),s)try{return await createImageBitmap(d,s)}catch(f){console.warn(f),imagebitmapOptionsSupported=!1}return await createImageBitmap(d)}function isEmptyObject(d){for(const s in d||EMPTY_OBJECT)return!1;return!0}function getISOBMFFMediaType(d){return!checkString(d,"ftyp",4)||!(d[8]&96)?null:decodeMajorBrand(d)}function decodeMajorBrand(d){switch(getUTF8String(d,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function getUTF8String(d,s,f){return String.fromCharCode(...d.slice(s,f))}function stringToBytes(d){return[...d].map(s=>s.charCodeAt(0))}function checkString(d,s,f=0){const _=stringToBytes(s);for(let S=0;S<_.length;++S)if(_[S]!==d[S+f])return!1;return!0}const BIG_ENDIAN=!1,LITTLE_ENDIAN=!0;function getBinaryImageMetadata(d){const s=toDataView(d);return getPngMetadata(s)||getJpegMetadata(s)||getGifMetadata(s)||getBmpMetadata(s)||getISOBMFFMetadata(s)}function getISOBMFFMetadata(d){const s=new Uint8Array(d instanceof DataView?d.buffer:d),f=getISOBMFFMediaType(s);return f?{mimeType:f.mimeType,width:0,height:0}:null}function getPngMetadata(d){const s=toDataView(d);return s.byteLength>=24&&s.getUint32(0,BIG_ENDIAN)===2303741511?{mimeType:"image/png",width:s.getUint32(16,BIG_ENDIAN),height:s.getUint32(20,BIG_ENDIAN)}:null}function getGifMetadata(d){const s=toDataView(d);return s.byteLength>=10&&s.getUint32(0,BIG_ENDIAN)===1195984440?{mimeType:"image/gif",width:s.getUint16(6,LITTLE_ENDIAN),height:s.getUint16(8,LITTLE_ENDIAN)}:null}function getBmpMetadata(d){const s=toDataView(d);return s.byteLength>=14&&s.getUint16(0,BIG_ENDIAN)===16973&&s.getUint32(2,LITTLE_ENDIAN)===s.byteLength?{mimeType:"image/bmp",width:s.getUint32(18,LITTLE_ENDIAN),height:s.getUint32(22,LITTLE_ENDIAN)}:null}function getJpegMetadata(d){const s=toDataView(d);if(!(s.byteLength>=3&&s.getUint16(0,BIG_ENDIAN)===65496&&s.getUint8(2)===255))return null;const{tableMarkers:_,sofMarkers:S}=getJpegMarkers();let T=2;for(;T+9<s.byteLength;){const F=s.getUint16(T,BIG_ENDIAN);if(S.has(F))return{mimeType:"image/jpeg",height:s.getUint16(T+5,BIG_ENDIAN),width:s.getUint16(T+7,BIG_ENDIAN)};if(!_.has(F))return null;T+=2,T+=s.getUint16(T,BIG_ENDIAN)}return null}function getJpegMarkers(){const d=new Set([65499,65476,65484,65501,65534]);for(let f=65504;f<65520;++f)d.add(f);return{tableMarkers:d,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function toDataView(d){if(d instanceof DataView)return d;if(ArrayBuffer.isView(d))return new DataView(d.buffer);if(d instanceof ArrayBuffer)return new DataView(d);throw new Error("toDataView")}async function parseToNodeImage(d,s){var S;const{mimeType:f}=getBinaryImageMetadata(d)||{},_=(S=globalThis.loaders)==null?void 0:S.parseImageNode;return assert$9(_),await _(d,f)}async function parseImage(d,s,f){s=s||{};const S=(s.image||{}).type||"auto",{url:T}=f||{},F=getLoadableImageType(S);let M;switch(F){case"imagebitmap":M=await parseToImageBitmap(d,s,T);break;case"image":M=await parseToImage(d,s,T);break;case"data":M=await parseToNodeImage(d);break;default:assert$9(!1)}return S==="data"&&(M=getImageData(M)),M}function getLoadableImageType(d){switch(d){case"auto":case"data":return getDefaultImageType();default:return isImageTypeSupported(d),d}}const EXTENSIONS=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],MIME_TYPES=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],DEFAULT_IMAGE_LOADER_OPTIONS={image:{type:"auto",decode:!0}},ImageLoader={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:VERSION$3,mimeTypes:MIME_TYPES,extensions:EXTENSIONS,parse:parseImage,tests:[d=>!!getBinaryImageMetadata(new DataView(d))],options:DEFAULT_IMAGE_LOADER_OPTIONS},defaultLogger=new Log({id:"deck"});let loggers={};function register(d){loggers=d}function debug(d,s,f,_){defaultLogger.level>0&&loggers[d]&&loggers[d].call(null,s,f,_)}function isJSON(d){const s=d[0],f=d[d.length-1];return s==="{"&&f==="}"||s==="["&&f==="]"}const jsonLoader={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:isJSON,parseTextSync:JSON.parse};function checkVersion(){const d="9.0.33",s=globalThis.deck&&globalThis.deck.VERSION;if(s&&s!==d)throw new Error(`deck.gl - multiple versions detected: ${s} vs ${d}`);return s||(defaultLogger.log(1,`deck.gl ${d}`)(),globalThis.deck={...globalThis.deck,VERSION:d,version:d,log:defaultLogger,_registerLoggers:register},registerLoaders([jsonLoader,[ImageLoader,{imagebitmap:{premultiplyAlpha:"none"}}]])),d}const VERSION$2=checkVersion();function assert$6(d,s){if(!d)throw new Error(s||"shadertools: assertion failed.")}const DEFAULT_PROP_VALIDATORS={number:{type:"number",validate(d,s){return Number.isFinite(d)&&typeof s=="object"&&(s.max===void 0||d<=s.max)&&(s.min===void 0||d>=s.min)}},array:{type:"array",validate(d,s){return Array.isArray(d)||ArrayBuffer.isView(d)}}};function makePropValidators(d){const s={};for(const[f,_]of Object.entries(d))s[f]=makePropValidator(_);return s}function getValidatedProperties(d,s,f){const _={};for(const[S,T]of Object.entries(s))d&&S in d&&!T.private?(T.validate&&assert$6(T.validate(d[S],T),`${f}: invalid ${S}`),_[S]=d[S]):_[S]=T.value;return _}function makePropValidator(d){let s=getTypeOf$1(d);if(s!=="object")return{value:d,...DEFAULT_PROP_VALIDATORS[s],type:s};if(typeof d=="object")return d?d.type!==void 0?{...d,...DEFAULT_PROP_VALIDATORS[d.type],type:d.type}:d.value===void 0?{type:"object",value:d}:(s=getTypeOf$1(d.value),{...d,...DEFAULT_PROP_VALIDATORS[s],type:s}):{type:"object",value:null};throw new Error("props")}function getTypeOf$1(d){return Array.isArray(d)||ArrayBuffer.isView(d)?"array":typeof d}const MODULE_INJECTORS_VS=`#ifdef MODULE_LOGDEPTH
logdepth_adjustPosition(gl_Position);
#endif
`,MODULE_INJECTORS_FS=`#ifdef MODULE_MATERIAL
gl_FragColor = material_filterColor(gl_FragColor);
#endif
#ifdef MODULE_LIGHTING
gl_FragColor = lighting_filterColor(gl_FragColor);
#endif
#ifdef MODULE_FOG
gl_FragColor = fog_filterColor(gl_FragColor);
#endif
#ifdef MODULE_PICKING
gl_FragColor = picking_filterHighlightColor(gl_FragColor);
gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif
#ifdef MODULE_LOGDEPTH
logdepth_setFragDepth();
#endif
`,MODULE_INJECTORS={vertex:MODULE_INJECTORS_VS,fragment:MODULE_INJECTORS_FS},REGEX_START_OF_MAIN=/void\s+main\s*\([^)]*\)\s*\{\n?/,REGEX_END_OF_MAIN=/}\n?[^{}]*$/,fragments=[],DECLARATION_INJECT_MARKER="__LUMA_INJECT_DECLARATIONS__";function normalizeInjections(d){const s={vertex:{},fragment:{}};for(const f in d){let _=d[f];const S=getHookStage(f);typeof _=="string"&&(_={order:0,injection:_}),s[S][f]=_}return s}function getHookStage(d){const s=d.slice(0,2);switch(s){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(s)}}function injectShader(d,s,f,_=!1){const S=s==="vertex";for(const T in f){const F=f[T];F.sort((P,H)=>P.order-H.order),fragments.length=F.length;for(let P=0,H=F.length;P<H;++P)fragments[P]=F[P].injection;const M=`${fragments.join(`
`)}
`;switch(T){case"vs:#decl":S&&(d=d.replace(DECLARATION_INJECT_MARKER,M));break;case"vs:#main-start":S&&(d=d.replace(REGEX_START_OF_MAIN,P=>P+M));break;case"vs:#main-end":S&&(d=d.replace(REGEX_END_OF_MAIN,P=>M+P));break;case"fs:#decl":S||(d=d.replace(DECLARATION_INJECT_MARKER,M));break;case"fs:#main-start":S||(d=d.replace(REGEX_START_OF_MAIN,P=>P+M));break;case"fs:#main-end":S||(d=d.replace(REGEX_END_OF_MAIN,P=>M+P));break;default:d=d.replace(T,P=>P+M)}}return d=d.replace(DECLARATION_INJECT_MARKER,""),_&&(d=d.replace(/\}\s*$/,T=>T+MODULE_INJECTORS[s])),d}let index$2=1;class ShaderModuleInstance{constructor(s){Bt(this,"name");Bt(this,"vs");Bt(this,"fs");Bt(this,"getModuleUniforms");Bt(this,"dependencies");Bt(this,"deprecations");Bt(this,"defines");Bt(this,"injections");Bt(this,"uniforms",{});Bt(this,"uniformTypes",{});const{name:f,vs:_,fs:S,dependencies:T=[],uniformTypes:F={},uniformPropTypes:M={},getUniforms:P,deprecations:H=[],defines:J={},inject:K={}}=s;assert$6(typeof f=="string"),this.name=f,this.vs=_,this.fs=S,this.getModuleUniforms=P,this.dependencies=ShaderModuleInstance.instantiateModules(T),this.deprecations=this._parseDeprecationDefinitions(H),this.defines=J,this.injections=normalizeInjections(K),this.uniformTypes=F,M&&(this.uniforms=makePropValidators(M))}static instantiateModules(s){return s.map(f=>{if(f instanceof ShaderModuleInstance)return f;assert$6(typeof f!="string",`Shader module use by name is deprecated. Import shader module '${JSON.stringify(f)}' and use it directly.`),f.name||(console.warn("shader module has no name"),f.name=`shader-module-${index$2++}`);const _=new ShaderModuleInstance(f);return _.dependencies=ShaderModuleInstance.instantiateModules(f.dependencies||[]),_})}getModuleSource(s){let f;switch(s){case"vertex":f=this.vs||"";break;case"fragment":f=this.fs||"";break;default:assert$6(!1)}const _=this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");return`// ----- MODULE ${this.name} ---------------

#define MODULE_${_}
${f}

`}getUniforms(s,f){return this.getModuleUniforms?this.getModuleUniforms(s,f):getValidatedProperties(s,this.uniforms,this.name)}getDefines(){return this.defines}checkDeprecations(s,f){this.deprecations.forEach(_=>{var S;(S=_.regex)!=null&&S.test(s)&&(_.deprecated?f.deprecated(_.old,_.new)():f.removed(_.old,_.new)())})}_parseDeprecationDefinitions(s){return s.forEach(f=>{switch(f.type){case"function":f.regex=new RegExp(`\\b${f.old}\\(`);break;default:f.regex=new RegExp(`${f.type} ${f.old};`)}}),s}_defaultGetUniforms(s={}){const f={},_=this.uniforms;for(const S in _){const T=_[S];S in s&&!T.private?(T.validate&&assert$6(T.validate(s[S],T),`${this.name}: invalid ${S}`),f[S]=s[S]):f[S]=T.value}return f}}function selectShaders(d){if(d.source&&d.platformInfo.type==="webgpu")return{...d,vs:void 0,fs:void 0};if(!d.vs)throw new Error("no vertex shader");const s=getShaderSource(d.platformInfo,d.vs);let f;return d.fs&&(f=getShaderSource(d.platformInfo,d.fs)),{...d,vs:s,fs:f}}function getShaderSource(d,s){if(typeof s=="string")return s;switch(d.type){case"webgpu":if(s!=null&&s.wgsl)return s.wgsl;throw new Error("WebGPU does not support GLSL shaders");default:if(s!=null&&s.glsl)return s.glsl;throw new Error("WebGL does not support WGSL shaders")}}function resolveModules(d){const s=ShaderModuleInstance.instantiateModules(d);return getShaderDependencies(s)}function getShaderDependencies(d){const s={},f={};return getDependencyGraph({modules:d,level:0,moduleMap:s,moduleDepth:f}),Object.keys(f).sort((_,S)=>f[S]-f[_]).map(_=>s[_])}function getDependencyGraph(d){const{modules:s,level:f,moduleMap:_,moduleDepth:S}=d;if(f>=5)throw new Error("Possible loop in shader dependency graph");for(const T of s)_[T.name]=T,(S[T.name]===void 0||S[T.name]<f)&&(S[T.name]=f);for(const T of s)T.dependencies&&getDependencyGraph({modules:T.dependencies,level:f+1,moduleMap:_,moduleDepth:S})}function getPlatformShaderDefines(d){switch(d==null?void 0:d.gpu.toLowerCase()){case"apple":return`#define APPLE_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"nvidia":return`#define NVIDIA_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function transpileGLSLShader(d,s){var _;if(Number(((_=d.match(/^#version[ \t]+(\d+)/m))==null?void 0:_[1])||100)!==300)throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(s){case"vertex":return d=convertShader(d,ES300_VERTEX_REPLACEMENTS),d;case"fragment":return d=convertShader(d,ES300_FRAGMENT_REPLACEMENTS),d;default:throw new Error(s)}}const ES300_REPLACEMENTS=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],ES300_VERTEX_REPLACEMENTS=[...ES300_REPLACEMENTS,[makeVariableTextRegExp("attribute"),"in $1"],[makeVariableTextRegExp("varying"),"out $1"]],ES300_FRAGMENT_REPLACEMENTS=[...ES300_REPLACEMENTS,[makeVariableTextRegExp("varying"),"in $1"]];function convertShader(d,s){for(const[f,_]of s)d=d.replace(f,_);return d}function makeVariableTextRegExp(d){return new RegExp(`\\b${d}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function getShaderHooks(d,s){let f="";for(const _ in d){const S=d[_];if(f+=`void ${S.signature} {
`,S.header&&(f+=`  ${S.header}`),s[_]){const T=s[_];T.sort((F,M)=>F.order-M.order);for(const F of T)f+=`  ${F.injection}
`}S.footer&&(f+=`  ${S.footer}`),f+=`}
`}return f}function normalizeShaderHooks(d){const s={vertex:{},fragment:{}};for(const f of d){let _,S;typeof f!="string"?(_=f,S=_.hook):(_={},S=f),S=S.trim();const[T,F]=S.split(":"),M=S.replace(/\(.+/,""),P=Object.assign(_,{signature:F});switch(T){case"vs":s.vertex[M]=P;break;case"fs":s.fragment[M]=P;break;default:throw new Error(T)}}return s}function getShaderInfo$1(d,s){return{name:getShaderName$1(d,s),language:"glsl",version:getShaderVersion$1(d)}}function getShaderName$1(d,s="unnamed"){const _=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(d);return _?_[1]:s}function getShaderVersion$1(d){let s=100;const f=d.match(/[^\s]+/g);if(f&&f.length>=2&&f[0]==="#version"){const _=parseInt(f[1],10);Number.isFinite(_)&&(s=_)}if(s!==100&&s!==300)throw new Error(`Invalid GLSL version ${s}`);return s}const INJECT_SHADER_DECLARATIONS=`

${DECLARATION_INJECT_MARKER}
`,FRAGMENT_SHADER_PROLOGUE=`precision highp float;
`;function assembleShaderWGSL(d){const s=resolveModules(d.modules||[]);return{source:assembleWGSLShader(d.platformInfo,{...d,source:d.source,stage:"vertex",modules:s}),getUniforms:assembleGetUniforms(s)}}function assembleShaderPairWGSL(d){const s=resolveModules(d.modules||[]);return{vs:assembleWGSLShader(d.platformInfo,{...d,source:d.vs,stage:"vertex",modules:s}),fs:assembleWGSLShader(d.platformInfo,{...d,source:d.fs,stage:"fragment",modules:s}),getUniforms:assembleGetUniforms(s)}}function assembleShaderPairGLSL(d){const{vs:s,fs:f}=d,_=resolveModules(d.modules||[]);return{vs:assembleGLSLShader(d.platformInfo,{...d,source:s,stage:"vertex",modules:_}),fs:assembleGLSLShader(d.platformInfo,{...d,source:f,stage:"fragment",modules:_}),getUniforms:assembleGetUniforms(_)}}function assembleWGSLShader(d,s){const{source:f,stage:_,modules:S,hookFunctions:T=[],inject:F={},log:M}=s;assert$6(typeof f=="string","shader source must be a string");const P=f;let H="";const J=normalizeShaderHooks(T),K={},oe={},se={};for(const ge in F){const he=typeof F[ge]=="string"?{injection:F[ge],order:0}:F[ge],Be=/^(v|f)s:(#)?([\w-]+)$/.exec(ge);if(Be){const pe=Be[2],be=Be[3];pe?be==="decl"?oe[ge]=[he]:se[ge]=[he]:K[ge]=[he]}else se[ge]=[he]}const ae=d.type!=="webgpu"?S:[];for(const ge of ae){M&&ge.checkDeprecations(P,M);const he=ge.getModuleSource(_,"wgsl");H+=he;const Be=ge.injections[_];for(const pe in Be){const be=/^(v|f)s:#([\w-]+)$/.exec(pe);if(be){const Fe=be[2]==="decl"?oe:se;Fe[pe]=Fe[pe]||[],Fe[pe].push(Be[pe])}else K[pe]=K[pe]||[],K[pe].push(Be[pe])}}return H+=INJECT_SHADER_DECLARATIONS,H=injectShader(H,_,oe),H+=getShaderHooks(J[_],K),H+=P,H=injectShader(H,_,se),H}function assembleGLSLShader(d,s){const{id:f,source:_,stage:S,language:T="glsl",modules:F,defines:M={},hookFunctions:P=[],inject:H={},prologue:J=!0,log:K}=s;assert$6(typeof _=="string","shader source must be a string");const oe=T==="glsl"?getShaderInfo$1(_).version:-1,se=d.shaderLanguageVersion,ae=oe===100?"#version 100":"#version 300 es",he=_.split(`
`).slice(1).join(`
`),Be={};F.forEach(ve=>{Object.assign(Be,ve.getDefines())}),Object.assign(Be,M);let pe="";switch(T){case"wgsl":break;case"glsl":pe=J?`${ae}

// ----- PROLOGUE -------------------------
${getShaderNameDefine({id:f,source:_,stage:S})}
${`#define SHADER_TYPE_${S.toUpperCase()}`}
${getPlatformShaderDefines(d)}
${S==="fragment"?FRAGMENT_SHADER_PROLOGUE:""}

// ----- APPLICATION DEFINES -------------------------

${getApplicationDefines(Be)}

`:`${ae}
`;break}const be=normalizeShaderHooks(P),Re={},Fe={},Me={};for(const ve in H){const At=typeof H[ve]=="string"?{injection:H[ve],order:0}:H[ve],Ct=/^(v|f)s:(#)?([\w-]+)$/.exec(ve);if(Ct){const Rt=Ct[2],It=Ct[3];Rt?It==="decl"?Fe[ve]=[At]:Me[ve]=[At]:Re[ve]=[At]}else Me[ve]=[At]}for(const ve of F){K&&ve.checkDeprecations(he,K);const At=ve.getModuleSource(S);pe+=At;const Ct=ve.injections[S];for(const Rt in Ct){const It=/^(v|f)s:#([\w-]+)$/.exec(Rt);if(It){const wt=It[2]==="decl"?Fe:Me;wt[Rt]=wt[Rt]||[],wt[Rt].push(Ct[Rt])}else Re[Rt]=Re[Rt]||[],Re[Rt].push(Ct[Rt])}}return pe+="// ----- MAIN SHADER SOURCE -------------------------",pe+=INJECT_SHADER_DECLARATIONS,pe=injectShader(pe,S,Fe),pe+=getShaderHooks(be[S],Re),pe+=he,pe=injectShader(pe,S,Me),T==="glsl"&&oe!==se&&(pe=transpileGLSLShader(pe,S)),pe.trim()}function assembleGetUniforms(d){return function(f){const _={};for(const S of d){const T=S.getUniforms(f,_);Object.assign(_,T)}return _}}function getShaderNameDefine(d){const{id:s,source:f,stage:_}=d;return s&&f.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${s}_${_}

`:""}function getApplicationDefines(d={}){let s="";for(const f in d){const _=d[f];(_||Number.isFinite(_))&&(s+=`#define ${f.toUpperCase()} ${d[f]}
`)}return s}const Tm=class Tm{constructor(){Bt(this,"_hookFunctions",[]);Bt(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return Tm.defaultShaderAssembler=Tm.defaultShaderAssembler||new Tm,Tm.defaultShaderAssembler}addDefaultModule(s){this._defaultModules.find(f=>f.name===(typeof s=="string"?s:s.name))||this._defaultModules.push(s)}removeDefaultModule(s){const f=typeof s=="string"?s:s.name;this._defaultModules=this._defaultModules.filter(_=>_.name!==f)}addShaderHook(s,f){f&&(s=Object.assign(f,{hook:s})),this._hookFunctions.push(s)}assembleShader(s){const f=this._getModuleList(s.modules),_=this._hookFunctions,S=selectShaders(s);return{...assembleShaderWGSL({platformInfo:s.platformInfo,...S,modules:f,hookFunctions:_}),modules:f}}assembleShaderPair(s){const f=selectShaders(s),_=this._getModuleList(s.modules),S=this._hookFunctions,{platformInfo:T}=s;return{...s.platformInfo.shaderLanguage==="wgsl"?assembleShaderPairWGSL({platformInfo:T,...f,modules:_,hookFunctions:S}):assembleShaderPairGLSL({platformInfo:T,...f,modules:_,hookFunctions:S}),modules:_}}_getModuleList(s=[]){const f=new Array(this._defaultModules.length+s.length),_={};let S=0;for(let T=0,F=this._defaultModules.length;T<F;++T){const M=this._defaultModules[T],P=M.name;f[S++]=M,_[P]=!0}for(let T=0,F=s.length;T<F;++T){const M=s[T],P=M.name;_[P]||(f[S++]=M,_[P]=!0)}return f.length=S,ShaderModuleInstance.instantiateModules(f)}};Bt(Tm,"defaultShaderAssembler");let ShaderAssembler=Tm;const FS_GLES=`out vec4 transform_output;
void main() {
transform_output = vec4(0);
}`,FS300=`#version 300 es
${FS_GLES}`;function getPassthroughFS(d){const{input:s,inputChannels:f,output:_}=d||{};if(!s)return FS300;if(!f)throw new Error("inputChannels");const S=channelCountToType(f),T=convertToVec4(s,f);return`#version 300 es
in ${S} ${s};
out vec4 ${_};
void main() {
  ${_} = ${T};
}`}function channelCountToType(d){switch(d){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${d}`)}}function convertToVec4(d,s){switch(s){case 1:return`vec4(${d}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${d}, 0.0, 1.0)`;case 3:return`vec4(${d}, 1.0)`;case 4:return d;default:throw new Error(`invalid channels: ${s}`)}}const log=new Log({id:"luma.gl"});class StatsManager{constructor(){Bt(this,"stats",new Map)}getStats(s){return this.get(s)}get(s){return this.stats.has(s)||this.stats.set(s,new Stats({id:s})),this.stats.get(s)}}const lumaStats=new StatsManager;function initializeLuma(){const d="9.0.27",s="set luma.log.level=1 (or higher) to trace rendering";if(globalThis.luma&&globalThis.luma.VERSION!==d)throw new Error(`luma.gl - multiple VERSIONs detected: ${globalThis.luma.VERSION} vs ${d}`);return globalThis.luma||(isBrowser$1()&&log.log(1,`${d} - ${s}`)(),globalThis.luma=globalThis.luma||{VERSION:d,version:d,log,stats:lumaStats}),d}const VERSION$1=initializeLuma();function isTypedArray$1(d){return ArrayBuffer.isView(d)&&!(d instanceof DataView)?d:null}function isNumberArray$1(d){return Array.isArray(d)?d.length===0||typeof d[0]=="number"?d:null:isTypedArray$1(d)}const uidCounters={};function uid(d="id"){uidCounters[d]=uidCounters[d]||1;const s=uidCounters[d]++;return`${d}-${s}`}function isObjectEmpty$3(d){let s=!0;for(const f in d){s=!1;break}return s}var n0;let Resource$1=(n0=class{constructor(s,f,_){Bt(this,"id");Bt(this,"props");Bt(this,"userData",{});Bt(this,"_device");Bt(this,"destroyed",!1);Bt(this,"allocatedBytes",0);Bt(this,"_attachedResources",new Set);if(!s)throw new Error("no device");this._device=s,this.props=selectivelyMerge(f,_);const S=this.props.id!=="undefined"?this.props.id:uid(this[Symbol.toStringTag]);this.props.id=S,this.id=S,this.userData=this.props.userData||{},this.addStats()}destroy(){this.destroyResource()}delete(){return this.destroy(),this}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}(${this.id})`}getProps(){return this.props}attachResource(s){this._attachedResources.add(s)}detachResource(s){this._attachedResources.delete(s)}destroyAttachedResource(s){this._attachedResources.delete(s)&&s.destroy()}destroyAttachedResources(){for(const s of Object.values(this._attachedResources))s.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const s=this._device.statsManager.getStats("Resource Counts"),f=this[Symbol.toStringTag];s.get(`${f}s Active`).decrementCount()}trackAllocatedMemory(s,f=this[Symbol.toStringTag]){const _=this._device.statsManager.getStats("Resource Counts");_.get("GPU Memory").addCount(s),_.get(`${f} Memory`).addCount(s),this.allocatedBytes=s}trackDeallocatedMemory(s=this[Symbol.toStringTag]){const f=this._device.statsManager.getStats("Resource Counts");f.get("GPU Memory").subtractCount(this.allocatedBytes),f.get(`${s} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const s=this._device.statsManager.getStats("Resource Counts"),f=this[Symbol.toStringTag];s.get("Resources Created").incrementCount(),s.get(`${f}s Created`).incrementCount(),s.get(`${f}s Active`).incrementCount()}},Bt(n0,"defaultProps",{id:"undefined",handle:void 0,userData:void 0}),n0);function selectivelyMerge(d,s){const f={...s};for(const _ in d)d[_]!==void 0&&(f[_]=d[_]);return f}var zC;let Buffer$1=(zC=class extends Resource$1{constructor(f,_){const S={..._};(_.usage||0)&zC.INDEX&&!_.indexType&&(_.data instanceof Uint32Array?S.indexType="uint32":_.data instanceof Uint16Array&&(S.indexType="uint16"));super(f,S,zC.defaultProps);Bt(this,"usage");Bt(this,"indexType");Bt(this,"updateTimestamp");Bt(this,"debugData",new ArrayBuffer(0));this.usage=_.usage||0,this.indexType=S.indexType,this.updateTimestamp=f.incrementTimestamp()}get[Symbol.toStringTag](){return"Buffer"}readSyncWebGL(f,_){throw new Error("not implemented")}_setDebugData(f,_,S){const T=ArrayBuffer.isView(f)?f.buffer:f,F=Math.min(f?f.byteLength:S,zC.DEBUG_DATA_MAX_LENGTH);f===null?this.debugData=new ArrayBuffer(F):_===0&&S===f.byteLength?this.debugData=T.slice(0,F):this.debugData=T.slice(_,_+F)}},Bt(zC,"defaultProps",{...Resource$1.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1}),Bt(zC,"MAP_READ",1),Bt(zC,"MAP_WRITE",2),Bt(zC,"COPY_SRC",4),Bt(zC,"COPY_DST",8),Bt(zC,"INDEX",16),Bt(zC,"VERTEX",32),Bt(zC,"UNIFORM",64),Bt(zC,"STORAGE",128),Bt(zC,"INDIRECT",256),Bt(zC,"QUERY_RESOLVE",512),Bt(zC,"DEBUG_DATA_MAX_LENGTH",32),zC);function decodeVertexType(d){const s=TYPE_MAP[d],f=getDataTypeBytes(s),_=d.includes("norm"),S=!_&&!d.startsWith("float"),T=d.startsWith("s");return{dataType:TYPE_MAP[d],byteLength:f,integer:S,signed:T,normalized:_}}function getDataTypeBytes(d){return TYPE_SIZES$2[d]}const TYPE_MAP={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},TYPE_SIZES$2={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4},COMPRESSED_TEXTURE_FORMAT_PREFIXES=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],REGEX=/^(rg?b?a?)([0-9]*)([a-z]*)(-srgb)?(-webgl|-unsized)?$/;function isTextureFormatCompressed(d){return COMPRESSED_TEXTURE_FORMAT_PREFIXES.some(s=>d.startsWith(s))}function decodeTextureFormat(d){const s=REGEX.exec(d);if(s){const[,f,_,S,T,F]=s;if(f){const M=`${S}${_}`,P=decodeVertexType(M);return{format:f,components:f.length,srgb:T==="-srgb",unsized:F==="-unsized",webgl:F==="-webgl",...P}}}return decodeNonStandardFormat(d)}const EXCEPTIONS={"rgba4unorm-webgl":{format:"rgba",bpp:2},"rgb565unorm-webgl":{format:"rgb",bpp:2},"rgb5a1unorm-webgl":{format:"rgba",bbp:2},rgb9e5ufloat:{format:"rgb",bbp:4},rg11b10ufloat:{format:"rgb",bbp:4},rgb10a2unorm:{format:"rgba",bbp:4},"rgb10a2uint-webgl":{format:"rgba",bbp:4},stencil8:{components:1,bpp:1,a:"stencil"},depth16unorm:{components:1,bpp:2,a:"depth"},depth24plus:{components:1,bpp:3,a:"depth"},depth32float:{components:1,bpp:4,a:"depth"},"depth24plus-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth24unorm-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth32float-stencil8":{components:2,bpp:4,a:"depth-stencil"}};function decodeNonStandardFormat(d){var f;const s=EXCEPTIONS[d];if(!s)throw new Error(`Unknown format ${d}`);return{format:s.format||"",components:s.components||((f=s.format)==null?void 0:f.length)||1,byteLength:s.bpp||1,srgb:!1,unsized:!1}}class DeviceLimits{}class DeviceFeatures{constructor(s=[],f){Bt(this,"features");Bt(this,"disabledFeatures");this.features=new Set(s),this.disabledFeatures=f||{}}*[Symbol.iterator](){yield*this.features}has(s){return!this.disabledFeatures[s]&&this.features.has(s)}}const wB=class wB{constructor(s){Bt(this,"id");Bt(this,"props");Bt(this,"userData",{});Bt(this,"statsManager",lumaStats);Bt(this,"_lumaData",{});Bt(this,"timestamp",0);this.props={...wB.defaultProps,...s},this.id=this.props.id||uid(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return"Device"}isTextureFormatCompressed(s){return isTextureFormatCompressed(s)}loseDevice(){return!1}getCanvasContext(){if(!this.canvasContext)throw new Error("Device has no CanvasContext");return this.canvasContext}createTexture(s){return(s instanceof Promise||typeof s=="string")&&(s={data:s}),this._createTexture(s)}createCommandEncoder(s={}){throw new Error("not implemented")}readPixelsToArrayWebGL(s,f){throw new Error("not implemented")}readPixelsToBufferWebGL(s,f){throw new Error("not implemented")}setParametersWebGL(s){throw new Error("not implemented")}getParametersWebGL(s){throw new Error("not implemented")}withParametersWebGL(s,f){throw new Error("not implemented")}clearWebGL(s){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(s){this.props.onError(s)}_getBufferProps(s){(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const f={...s};return(s.usage||0)&Buffer$1.INDEX&&!s.indexType&&(s.data instanceof Uint32Array?f.indexType="uint32":s.data instanceof Uint16Array?f.indexType="uint16":log.warn("indices buffer content must be of integer type")()),f}};Bt(wB,"defaultProps",{id:null,canvas:null,container:null,manageState:!0,width:800,height:600,requestMaxLimits:!0,debug:!!log.get("debug"),spector:!!(log.get("spector")||log.get("spectorjs")),break:[],initalizeFeatures:!0,disabledFeatures:{"compilation-status-async-webgl":!0},gl:null,onError:s=>log.error(s.message)}),Bt(wB,"VERSION",VERSION$1);let Device=wB;function assert$5(d,s){if(!d)throw new Error(s||"luma.gl: assertion failed.")}const deviceMap=new Map,iB=class iB{static registerDevices(s){for(const f of s)assert$5(f.type&&f.isSupported&&f.create),deviceMap.set(f.type,f)}static getAvailableDevices(){return Array.from(deviceMap).map(s=>s.type)}static getSupportedDevices(){return Array.from(deviceMap).filter(s=>s.isSupported()).map(s=>s.type)}static setDefaultDeviceProps(s){Object.assign(Device.defaultProps,s)}static async attachDevice(s){const f=getDeviceMap(s.devices)||deviceMap;if(s.handle instanceof WebGL2RenderingContext){const _=f.get("webgl");if(_)return await _.attach(s.handle)}if(s.handle===null){const _=f.get("unknown");if(_)return await _.attach(null)}throw new Error("Failed to attach device. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static async createDevice(s={}){var T,F;s={...iB.defaultProps,...s},s.gl&&(s.type="webgl");const f=getDeviceMap(s.devices)||deviceMap;let _,S;switch(s.type){case"webgpu":if(_=f.get("webgpu"),_)return await _.create(s);break;case"webgl":if(S=f.get("webgl"),S)return await S.create(s);break;case"unknown":const M=f.get("unknown");if(M)return await M.create(s);break;case"best-available":if(_=f.get("webgpu"),(T=_==null?void 0:_.isSupported)!=null&&T.call(_))return await _.create(s);if(S=f.get("webgl"),(F=S==null?void 0:S.isSupported)!=null&&F.call(S))return await S.create(s);break}throw new Error("No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static enforceWebGL2(s=!0){const f=HTMLCanvasElement.prototype;if(!s&&f.originalGetContext){f.getContext=f.originalGetContext,f.originalGetContext=void 0;return}f.originalGetContext=f.getContext,f.getContext=function(_,S){return _==="webgl"||_==="experimental-webgl"?this.originalGetContext("webgl2",S):this.originalGetContext(_,S)}}};Bt(iB,"defaultProps",{...Device.defaultProps,type:"best-available",devices:void 0}),Bt(iB,"stats",lumaStats),Bt(iB,"log",log);let luma=iB;function getDeviceMap(d){if(!d||(d==null?void 0:d.length)===0)return null;const s=new Map;for(const f of d)s.set(f.type,f);return s}const isPage=isBrowser$1()&&typeof document<"u",isPageLoaded=()=>isPage&&document.readyState==="complete",DEFAULT_CANVAS_CONTEXT_PROPS={canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,colorSpace:"srgb",alphaMode:"opaque"};class CanvasContext{constructor(s){Bt(this,"id");Bt(this,"props");Bt(this,"canvas");Bt(this,"htmlCanvas");Bt(this,"offscreenCanvas");Bt(this,"type");Bt(this,"width",1);Bt(this,"height",1);Bt(this,"resizeObserver");Bt(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});if(this.props={...DEFAULT_CANVAS_CONTEXT_PROPS,...s},s=this.props,!isBrowser$1()){this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,this.canvas=null;return}if(s.canvas)typeof s.canvas=="string"?this.canvas=getCanvasFromDOM(s.canvas):this.canvas=s.canvas;else{const f=createCanvas(s),_=getContainer((s==null?void 0:s.container)||null);_.insertBefore(f,_.firstChild),this.canvas=f,s!=null&&s.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&s.autoResize&&(this.resizeObserver=new ResizeObserver(f=>{for(const _ of f)_.target===this.canvas&&this.update()}),this.resizeObserver.observe(this.canvas))}static get isPageLoaded(){return isPageLoaded()}getDevicePixelRatio(s){return typeof OffscreenCanvas<"u"&&this.canvas instanceof OffscreenCanvas||(s=s===void 0?this.props.useDevicePixels:s,!s||s<=0)?1:s===!0?typeof window<"u"&&window.devicePixelRatio||1:s}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const s=this.getDevicePixelRatio(),f=this.canvas;return f.parentElement?[f.clientWidth*s,f.clientHeight*s]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[s,f]=this.getPixelSize();return s/f}cssToDeviceRatio(){try{const[s]=this.getDrawingBufferSize(),{clientWidth:f}=this._canvasSizeInfo;return f?s/f:1}catch{return 1}}cssToDevicePixels(s,f=!0){const _=this.cssToDeviceRatio(),[S,T]=this.getDrawingBufferSize();return scalePixels(s,_,S,T,f)}setDevicePixelRatio(s,f={}){if(!this.htmlCanvas)return;let _="width"in f?f.width:this.htmlCanvas.clientWidth,S="height"in f?f.height:this.htmlCanvas.clientHeight;(!_||!S)&&(log.log(1,"Canvas clientWidth/clientHeight is 0")(),s=1,_=this.htmlCanvas.width||1,S=this.htmlCanvas.height||1);const T=this._canvasSizeInfo;if(T.clientWidth!==_||T.clientHeight!==S||T.devicePixelRatio!==s){let F=s;const M=Math.floor(_*F),P=Math.floor(S*F);this.htmlCanvas.width=M,this.htmlCanvas.height=P;const[H,J]=this.getDrawingBufferSize();(H!==M||J!==P)&&(F=Math.min(H/_,J/S),this.htmlCanvas.width=Math.floor(_*F),this.htmlCanvas.height=Math.floor(S*F),log.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=_,this._canvasSizeInfo.clientHeight=S,this._canvasSizeInfo.devicePixelRatio=s}}getDrawingBufferSize(){const s=this.device.gl;if(!s)throw new Error("canvas size");return[s.drawingBufferWidth,s.drawingBufferHeight]}_setAutoCreatedCanvasId(s){var f;((f=this.htmlCanvas)==null?void 0:f.id)==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=s)}}Bt(CanvasContext,"pageLoaded",getPageLoadPromise());function getPageLoadPromise(){return isPageLoaded()||typeof window>"u"?Promise.resolve():new Promise(d=>{window.addEventListener("load",()=>d())})}function getContainer(d){if(typeof d=="string"){const s=document.getElementById(d);if(!s&&!isPageLoaded())throw new Error(`Accessing '${d}' before page was loaded`);if(!s)throw new Error(`${d} is not an HTML element`);return s}else if(d)return d;return document.body}function getCanvasFromDOM(d){const s=document.getElementById(d);if(!s&&!isPageLoaded())throw new Error(`Accessing '${d}' before page was loaded`);if(!(s instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return s}function createCanvas(d){const{width:s,height:f}=d,_=document.createElement("canvas");return _.id="lumagl-auto-created-canvas",_.width=s||1,_.height=f||1,_.style.width=Number.isFinite(s)?`${s}px`:"100%",_.style.height=Number.isFinite(f)?`${f}px`:"100%",_}function scalePixels(d,s,f,_,S){const T=d,F=scaleX(T[0],s,f);let M=scaleY(T[1],s,_,S),P=scaleX(T[0]+1,s,f);const H=P===f-1?P:P-1;P=scaleY(T[1]+1,s,_,S);let J;return S?(P=P===0?P:P+1,J=M,M=P):J=P===_-1?P:P-1,{x:F,y:M,width:Math.max(H-F+1,1),height:Math.max(J-M+1,1)}}function scaleX(d,s,f){return Math.min(Math.round(d*s),f-1)}function scaleY(d,s,f,_){return _?Math.max(0,f-1-Math.round(d*s)):Math.min(Math.round(d*s),f-1)}const em=class em extends Resource$1{constructor(f,_,S=em.defaultProps){super(f,_,S);Bt(this,"dimension");Bt(this,"format");Bt(this,"width");Bt(this,"height");Bt(this,"depth");Bt(this,"updateTimestamp");this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.updateTimestamp=f.incrementTimestamp()}get[Symbol.toStringTag](){return"Texture"}};Bt(em,"defaultProps",{...Resource$1.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!0,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,type:void 0,sampler:{},view:void 0}),Bt(em,"COPY_SRC",1),Bt(em,"COPY_DST",2),Bt(em,"TEXTURE_BINDING",4),Bt(em,"STORAGE_BINDING",8),Bt(em,"RENDER_ATTACHMENT",16);let Texture=em;const iy=class iy extends Resource$1{get[Symbol.toStringTag](){return"TextureView"}constructor(s,f){super(s,f,iy.defaultProps)}};Bt(iy,"defaultProps",{...Resource$1.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});let TextureView=iy;function formatCompilerLog(d,s,f){let _="";const S=s.split(/\r?\n/),T=d.slice().sort((F,M)=>F.lineNum-M.lineNum);switch((f==null?void 0:f.showSourceCode)||"no"){case"all":let F=0;for(let M=1;M<=S.length;M++)for(_+=getNumberedLine(S[M-1],M,f);T.length>F&&T[F].lineNum===M;){const P=T[F++];_+=formatCompilerMessage(P,S,P.lineNum,{...f,inlineSource:!1})}return _;case"issues":case"no":for(const M of d)_+=formatCompilerMessage(M,S,M.lineNum,{inlineSource:(f==null?void 0:f.showSourceCode)!=="no"});return _}}function formatCompilerMessage(d,s,f,_){if(_!=null&&_.inlineSource){const S=getNumberedLines(s,f),T=d.linePos>0?`${" ".repeat(d.linePos+5)}^^^
`:"";return`
${S}${T}${d.type.toUpperCase()}: ${d.message}

`}return _!=null&&_.html?`<div class='luma-compiler-log-error' style="color:red;"><b> ${d.type.toUpperCase()}: ${d.message}</b></div>`:`${d.type.toUpperCase()}: ${d.message}`}function getNumberedLines(d,s,f){let _="";for(let S=s-2;S<=s;S++){const T=d[S-1];T!==void 0&&(_+=getNumberedLine(T,s,f))}return _}function getNumberedLine(d,s,f){const _=f!=null&&f.html?escapeHTML(d):d;return`${padLeft(String(s),4)}: ${_}${f!=null&&f.html?"<br/>":`
`}`}function padLeft(d,s){let f="";for(let _=d.length;_<s;++_)f+=" ";return f+d}function escapeHTML(d){return d.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function getShaderInfo(d,s){return{name:getShaderName(d,s),language:"glsl",version:getShaderVersion(d)}}function getShaderName(d,s="unnamed"){const _=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(d);return _?_[1]:s}function getShaderVersion(d){let s=100;const f=d.match(/[^\s]+/g);if(f&&f.length>=2&&f[0]==="#version"){const _=parseInt(f[1],10);Number.isFinite(_)&&(s=_)}return s}const ny=class ny extends Resource$1{constructor(f,_){super(f,{id:getShaderIdFromProps(_),..._},ny.defaultProps);Bt(this,"stage");Bt(this,"source");Bt(this,"compilationStatus","pending");this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return"Shader"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(f=this.props.debug){switch(f){case"never":return;case"errors":if(this.compilationStatus==="success")return;break}const _=await this.getCompilationInfo();this.props.debug==="warnings"&&(_==null?void 0:_.length)===0||this._displayShaderLog(_)}_displayShaderLog(f){var H;if(typeof document>"u"||!(document!=null&&document.createElement))return;const _=getShaderInfo(this.source).name,S=`${this.stage} ${_}`;let T=formatCompilerLog(f,this.source,{showSourceCode:"all",html:!0});const F=this.getTranslatedSource();F&&(T+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${F}</pre></code>`);const M=document.createElement("Button");M.innerHTML=`
<h1>Shader Compilation Error in ${S}</h1><br /><br />
<code style="user-select:text;"><pre>
${T}
</pre></code>`,M.style.top="10px",M.style.left="10px",M.style.position="absolute",M.style.zIndex="9999",M.style.width="100%",M.style.textAlign="left",document.body.appendChild(M);const P=document.getElementsByClassName("luma-compiler-log-error");(H=P[0])!=null&&H.scrollIntoView&&P[0].scrollIntoView(),M.onclick=()=>{const J=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(J)}}};Bt(ny,"defaultProps",{...Resource$1.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debug:"errors"});let Shader=ny;function getShaderIdFromProps(d){return getShaderInfo(d.source).name||d.id||uid(`unnamed ${d.stage}-shader`)}const oy=class oy extends Resource$1{get[Symbol.toStringTag](){return"Sampler"}constructor(s,f){super(s,f,oy.defaultProps)}};Bt(oy,"defaultProps",{...Resource$1.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});let Sampler=oy;const sy=class sy extends Resource$1{constructor(f,_={}){super(f,_,sy.defaultProps);Bt(this,"width");Bt(this,"height");Bt(this,"colorAttachments",[]);Bt(this,"depthStencilAttachment",null);this.width=this.props.width,this.height=this.props.height}get[Symbol.toStringTag](){return"Framebuffer"}resize(f){let _=!f;if(f){const[S,T]=Array.isArray(f)?f:[f.width,f.height];_=_||T!==this.height||S!==this.width,this.width=S,this.height=T}_&&(log.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map(_=>{if(typeof _=="string"){const S=this.createColorTexture(_);return this.attachResource(S),S.view}return _ instanceof Texture?_.view:_});const f=this.props.depthStencilAttachment;if(f)if(typeof f=="string"){const _=this.createDepthStencilTexture(f);this.attachResource(_),this.depthStencilAttachment=_.view}else f instanceof Texture?this.depthStencilAttachment=f.view:this.depthStencilAttachment=f}createColorTexture(f){return this.device.createTexture({id:"color-attachment",usage:Texture.RENDER_ATTACHMENT,format:f,width:this.width,height:this.height})}createDepthStencilTexture(f){return this.device.createTexture({id:"depth-stencil-attachment",usage:Texture.RENDER_ATTACHMENT,format:f,width:this.width,height:this.height})}resizeAttachments(f,_){for(let S=0;S<this.colorAttachments.length;++S)if(this.colorAttachments[S]){const T=this.device._createTexture({...this.colorAttachments[S].props,width:f,height:_});this.destroyAttachedResource(this.colorAttachments[S]),this.colorAttachments[S]=T.view,this.attachResource(T.view)}if(this.depthStencilAttachment){const S=this.device._createTexture({...this.depthStencilAttachment.props,width:f,height:_});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=S.view,this.attachResource(S)}}};Bt(sy,"defaultProps",{...Resource$1.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});let Framebuffer=sy;const ay=class ay extends Resource$1{constructor(f,_){super(f,_,ay.defaultProps);Bt(this,"shaderLayout");Bt(this,"bufferLayout");Bt(this,"linkStatus","pending");Bt(this,"hash","");this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return"RenderPipeline"}setUniformsWebGL(f){throw new Error("Use uniform blocks")}};Bt(ay,"defaultProps",{...Resource$1.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}});let RenderPipeline=ay;const Ay=class Ay extends Resource$1{get[Symbol.toStringTag](){return"RenderPass"}constructor(s,f){super(s,f,Ay.defaultProps)}};Bt(Ay,"defaultProps",{...Resource$1.defaultProps,framebuffer:null,parameters:void 0,clearColor:[0,0,0,0],clearDepth:1,clearStencil:0,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});let RenderPass=Ay;const ly=class ly extends Resource$1{constructor(f,_){super(f,_,ly.defaultProps);Bt(this,"hash","")}get[Symbol.toStringTag](){return"ComputePipeline"}};Bt(ly,"defaultProps",{...Resource$1.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});let ComputePipeline=ly;const cy=class cy extends Resource$1{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(s,f){super(s,f,cy.defaultProps)}};Bt(cy,"defaultProps",{...Resource$1.defaultProps,measureExecutionTime:void 0});let CommandEncoder=cy;const uy=class uy extends Resource$1{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(s,f){super(s,f,uy.defaultProps)}};Bt(uy,"defaultProps",{...Resource$1.defaultProps});let CommandBuffer=uy;function decodeShaderAttributeType(d){const[s,f]=TYPE_INFO[d],_=s==="i32"||s==="u32",S=s!=="u32",T=TYPE_SIZES$1[s]*f,F=getCompatibleVertexFormat(s,f);return{dataType:s,components:f,defaultVertexFormat:F,byteLength:T,integer:_,signed:S}}function getCompatibleVertexFormat(d,s){let f;switch(d){case"f32":f="float32";break;case"i32":f="sint32";break;case"u32":f="uint32";break;case"f16":return s<=2?"float16x2":"float16x4"}return s===1?f:`${f}x${s}`}const TYPE_INFO={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},TYPE_SIZES$1={f32:4,f16:2,i32:4,u32:4};function decodeVertexFormat(d){let s;d.endsWith("-webgl")&&(d.replace("-webgl",""),s=!0);const[f,_]=d.split("x"),S=f,T=_?parseInt(_):1,F=decodeVertexType(S),M={type:S,components:T,byteLength:F.byteLength*T,integer:F.integer,signed:F.signed,normalized:F.normalized};return s&&(M.webglOnly=!0),M}function getAttributeInfosFromLayouts(d,s){const f={};for(const _ of d.attributes)f[_.name]=getAttributeInfoFromLayouts(d,s,_.name);return f}function getAttributeInfosByLocation(d,s,f=16){const _=getAttributeInfosFromLayouts(d,s),S=new Array(f).fill(null);for(const T of Object.values(_))S[T.location]=T;return S}function getAttributeInfoFromLayouts(d,s,f){const _=getAttributeFromShaderLayout(d,f),S=getAttributeFromBufferLayout(s,f);if(!_)return null;const T=decodeShaderAttributeType(_.type),F=(S==null?void 0:S.vertexFormat)||T.defaultVertexFormat,M=decodeVertexFormat(F);return{attributeName:(S==null?void 0:S.attributeName)||_.name,bufferName:(S==null?void 0:S.bufferName)||_.name,location:_.location,shaderType:_.type,shaderDataType:T.dataType,shaderComponents:T.components,vertexFormat:F,bufferDataType:M.type,bufferComponents:M.components,normalized:M.normalized,integer:T.integer,stepMode:(S==null?void 0:S.stepMode)||_.stepMode,byteOffset:(S==null?void 0:S.byteOffset)||0,byteStride:(S==null?void 0:S.byteStride)||0}}function getAttributeFromShaderLayout(d,s){const f=d.attributes.find(_=>_.name===s);return f||log.warn(`shader layout attribute "${s}" not present in shader`),f||null}function getAttributeFromBufferLayout(d,s){checkBufferLayouts(d);let f=getAttributeFromShortHand(d,s);return f||(f=getAttributeFromAttributesList(d,s),f)?f:(log.warn(`layout for attribute "${s}" not present in buffer layout`),null)}function checkBufferLayouts(d){for(const s of d)(s.attributes&&s.format||!s.attributes&&!s.format)&&log.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function getAttributeFromShortHand(d,s){for(const f of d)if(f.format&&f.name===s)return{attributeName:f.name,bufferName:s,stepMode:f.stepMode,vertexFormat:f.format,byteOffset:0,byteStride:f.byteStride||0};return null}function getAttributeFromAttributesList(d,s){var f;for(const _ of d){let S=_.byteStride;if(typeof _.byteStride!="number")for(const F of _.attributes||[]){const M=decodeVertexFormat(F.format);S+=M.byteLength}const T=(f=_.attributes)==null?void 0:f.find(F=>F.attribute===s);if(T)return{attributeName:T.attribute,bufferName:_.name,stepMode:_.stepMode,vertexFormat:T.format,byteOffset:T.byteOffset,byteStride:S}}return null}function mergeShaderLayout(d,s){const f={...d,attributes:d.attributes.map(_=>({..._}))};for(const _ of(s==null?void 0:s.attributes)||[]){const S=f.attributes.find(T=>T.name===_.name);S?(S.type=_.type||S.type,S.stepMode=_.stepMode||S.stepMode):log.warn(`shader layout attribute ${_.name} not present in shader`)}return f}const gy=class gy extends Resource$1{constructor(f,_){super(f,_,gy.defaultProps);Bt(this,"maxVertexAttributes");Bt(this,"attributeInfos");Bt(this,"indexBuffer",null);Bt(this,"attributes");this.maxVertexAttributes=f.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null),this.attributeInfos=getAttributeInfosByLocation(_.renderPipeline.shaderLayout,_.renderPipeline.bufferLayout,this.maxVertexAttributes)}get[Symbol.toStringTag](){return"VertexArray"}setConstantWebGL(f,_){throw new Error("constant attributes not supported")}};Bt(gy,"defaultProps",{...Resource$1.defaultProps,renderPipeline:null});let VertexArray=gy;const hy=class hy extends Resource$1{get[Symbol.toStringTag](){return"TransformFeedback"}constructor(s,f){super(s,f,hy.defaultProps)}};Bt(hy,"defaultProps",{...Resource$1.defaultProps,layout:void 0,buffers:{}});let TransformFeedback=hy;const dy=class dy extends Resource$1{get[Symbol.toStringTag](){return"QuerySet"}constructor(s,f){super(s,f,dy.defaultProps)}};Bt(dy,"defaultProps",{...Resource$1.defaultProps,type:void 0,count:void 0});let QuerySet=dy;const UNIFORM_FORMATS={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function decodeShaderUniformType(d){const s=UNIFORM_FORMATS[d];return assert$5(d),s}function alignTo(d,s){switch(s){case 1:return d;case 2:return d+d%2;default:return d+(4-d%4)%4}}let arrayBuffer;function getScratchArrayBuffer(d){return(!arrayBuffer||arrayBuffer.byteLength<d)&&(arrayBuffer=new ArrayBuffer(d)),arrayBuffer}function getScratchArray(d,s){const f=getScratchArrayBuffer(d.BYTES_PER_ELEMENT*s);return new d(f,0,s)}function fillArray$1(d){const{target:s,source:f,start:_=0,count:S=1}=d,T=f.length,F=S*T;let M=0;for(let P=_;M<T;M++)s[P++]=f[M];for(;M<F;)M<F-M?(s.copyWithin(_+M,_,_+M),M*=2):(s.copyWithin(_+M,_,_+F-M),M=F);return d.target}const minBufferSize=1024;class UniformBufferLayout{constructor(s){Bt(this,"layout",{});Bt(this,"byteLength");let f=0;for(const[S,T]of Object.entries(s)){const F=decodeShaderUniformType(T),{type:M,components:P}=F;f=alignTo(f,P);const H=f;f+=P,this.layout[S]={type:M,size:P,offset:H}}f+=(4-f%4)%4;const _=f*4;this.byteLength=Math.max(_,minBufferSize)}getData(s){const f=Math.max(this.byteLength,minBufferSize),_=getScratchArrayBuffer(f),S={i32:new Int32Array(_),u32:new Uint32Array(_),f32:new Float32Array(_),f16:new Uint16Array(_)};for(const[T,F]of Object.entries(s)){const M=this.layout[T];if(!M){log.warn(`Supplied uniform value ${T} not present in uniform block layout`)();continue}const{type:P,size:H,offset:J}=M,K=S[P];if(H===1){if(typeof F!="number"&&typeof F!="boolean"){log.warn(`Supplied value for single component uniform ${T} is not a number: ${F}`)();continue}K[J]=Number(F)}else{const oe=isNumberArray$1(F);if(!oe){log.warn(`Supplied value for multi component / array uniform ${T} is not a numeric array: ${F}`)();continue}K.set(oe,J)}}return new Uint8Array(_)}has(s){return!!this.layout[s]}get(s){return this.layout[s]}}function arrayEqual(d,s,f=16){if(d!==s)return!1;const _=isNumberArray$1(d);if(!_)return!1;const S=isNumberArray$1(s);if(S&&_.length===S.length){for(let T=0;T<_.length;++T)if(S[T]!==_[T])return!1}return!0}function arrayCopy(d){const s=isNumberArray$1(d);return s?s.slice():d}class UniformBlock{constructor(s){Bt(this,"name");Bt(this,"uniforms",{});Bt(this,"modifiedUniforms",{});Bt(this,"modified",!0);Bt(this,"bindingLayout",{});Bt(this,"needsRedraw","initialized");var f;if(this.name=s==null?void 0:s.name,s!=null&&s.name&&(s!=null&&s.shaderLayout)){const _=(f=s==null?void 0:s.shaderLayout.bindings)==null?void 0:f.find(T=>T.type==="uniform"&&T.name===(s==null?void 0:s.name));if(!_)throw new Error(s==null?void 0:s.name);const S=_;for(const T of S.uniforms||[])this.bindingLayout[T.name]=T}}setUniforms(s){for(const[f,_]of Object.entries(s))this._setUniform(f,_),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${f}=${_}`)}setNeedsRedraw(s){this.needsRedraw=this.needsRedraw||s}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(s,f){arrayEqual(this.uniforms[s],f)||(this.uniforms[s]=arrayCopy(f),this.modifiedUniforms[s]=!0,this.modified=!0)}}class UniformStore{constructor(s){Bt(this,"uniformBlocks",new Map);Bt(this,"uniformBufferLayouts",new Map);Bt(this,"uniformBuffers",new Map);for(const[f,_]of Object.entries(s)){const S=f,T=new UniformBufferLayout(_.uniformTypes||{});this.uniformBufferLayouts.set(S,T);const F=new UniformBlock({name:f});F.setUniforms(_.defaultUniforms||{}),this.uniformBlocks.set(S,F)}}destroy(){for(const s of this.uniformBuffers.values())s.destroy()}setUniforms(s){for(const[f,_]of Object.entries(s))this.uniformBlocks.get(f).setUniforms(_);this.updateUniformBuffers()}getUniformBufferByteLength(s){return this.uniformBufferLayouts.get(s).byteLength}getUniformBufferData(s){const f=this.uniformBlocks.get(s).getAllUniforms();return this.uniformBufferLayouts.get(s).getData(f)}createUniformBuffer(s,f,_){_&&this.setUniforms(_);const S=this.getUniformBufferByteLength(f),T=s.createBuffer({usage:Buffer$1.UNIFORM|Buffer$1.COPY_DST,byteLength:S}),F=this.getUniformBufferData(f);return T.write(F),T}getManagedUniformBuffer(s,f){if(!this.uniformBuffers.get(f)){const _=this.getUniformBufferByteLength(f),S=s.createBuffer({usage:Buffer$1.UNIFORM|Buffer$1.COPY_DST,byteLength:_});this.uniformBuffers.set(f,S)}return this.uniformBuffers.get(f)}updateUniformBuffers(){let s=!1;for(const f of this.uniformBlocks.keys()){const _=this.updateUniformBuffer(f);s||(s=_)}return s&&log.log(3,`UniformStore.updateUniformBuffers(): ${s}`)(),s}updateUniformBuffer(s){const f=this.uniformBlocks.get(s),_=this.uniformBuffers.get(s);let S=!1;if(_&&f.needsRedraw){S||(S=f.needsRedraw);const T=this.getUniformBufferData(s);this.uniformBuffers.get(s).write(T);const M=this.uniformBlocks.get(s).getAllUniforms();log.log(4,`Writing to uniform buffer ${String(s)}`,T,M)()}return S}}function getDataTypeFromTypedArray(d){const s=ArrayBuffer.isView(d)?d.constructor:d;switch(s){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(s.constructor.name)}}function getTypedArrayFromDataType(d){switch(d){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(d)}}function getVertexFormatFromAttribute(d,s,f){if(!s||s>4)throw new Error(`size ${s}`);const _=s;let S=getDataTypeFromTypedArray(d);if(S==="uint8"&&f&&_===1)return"unorm8-webgl";if(S==="uint8"&&f&&_===3)return"unorm8x3-webgl";if(S==="uint8"||S==="sint8"){if(_===1||_===3)throw new Error(`size: ${s}`);return f&&(S=S.replace("int","norm")),`${S}x${_}`}if(S==="uint16"||S==="sint16"){if(_===1||_===3)throw new Error(`size: ${s}`);return f&&(S=S.replace("int","norm")),`${S}x${_}`}return _===1?S:`${S}x${_}`}function cast$1(d){return d}function isUniformValue(d){return isNumberArray$1(d)!==null||typeof d=="number"||typeof d=="boolean"}function splitUniformsAndBindings(d){const s={bindings:{},uniforms:{}};return Object.keys(d).forEach(f=>{const _=d[f];isUniformValue(_)?s.uniforms[f]=_:s.bindings[f]=_}),s}function checkProps(d,s,f){const{removedProps:_={},deprecatedProps:S={},replacedProps:T={}}=f;for(const M in _)if(M in s){const H=_[M]?`${d}.${_[M]}`:"N/A";log.removed(`${d}.${M}`,H)()}for(const M in S)if(M in s){const P=S[M];log.deprecated(`${d}.${M}`,`${d}.${P}`)()}let F=null;for(const[M,P]of Object.entries(T))M in s&&(log.deprecated(`${d}.${M}`,`${d}.${P}`)(),F=F||Object.assign({},s),F[P]=s[M],delete F[M]);return F||s}let pathPrefix="";async function loadImage(d,s){return await new Promise((f,_)=>{try{const S=new Image;S.onload=()=>f(S),S.onerror=()=>_(new Error(`Could not load image ${d}.`)),S.crossOrigin=(s==null?void 0:s.crossOrigin)||"anonymous",S.src=d.startsWith("http")?d:pathPrefix+d}catch(S){_(S)}})}async function loadScript(d,s){const f=document.getElementsByTagName("head")[0];if(!f)throw new Error("loadScript");const _=document.createElement("script");return _.setAttribute("type","text/javascript"),_.setAttribute("src",d),new Promise((S,T)=>{_.onload=S,_.onerror=F=>T(new Error(`Unable to load script '${d}': ${F}`)),f.appendChild(_)})}function deepEqual$1(d,s,f){if(d===s)return!0;if(!f||!d||!s)return!1;if(Array.isArray(d)){if(!Array.isArray(s)||d.length!==s.length)return!1;for(let _=0;_<d.length;_++)if(!deepEqual$1(d[_],s[_],f-1))return!1;return!0}if(Array.isArray(s))return!1;if(typeof d=="object"&&typeof s=="object"){const _=Object.keys(d),S=Object.keys(s);if(_.length!==S.length)return!1;for(const T of _)if(!s.hasOwnProperty(T)||!deepEqual$1(d[T],s[T],f-1))return!1;return!0}return!1}function requestAnimationFrame$1(d){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(d):setTimeout(d,1e3/60)}function cancelAnimationFrame$1(d){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(d):clearTimeout(d)}class ParseContext{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}let Node$4=class{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(s){throw new Error("Cannot evaluate node")}evaluateString(s){return this.evaluate(s).toString()}search(s){}searchBlock(s,f){if(s){f(_BlockStart.instance);for(const _ of s)_ instanceof Array?this.searchBlock(_,f):_.search(f);f(_BlockEnd.instance)}}};class _BlockStart extends Node$4{}_BlockStart.instance=new _BlockStart;class _BlockEnd extends Node$4{}_BlockEnd.instance=new _BlockEnd;class Statement extends Node$4{constructor(){super()}}let Function$1=class extends Statement{constructor(s,f,_,S,T,F){super(),this.calls=new Set,this.name=s,this.args=f,this.returnType=_,this.body=S,this.startLine=T,this.endLine=F}get astNodeType(){return"function"}search(s){this.searchBlock(this.body,s)}};class StaticAssert extends Statement{constructor(s){super(),this.expression=s}get astNodeType(){return"staticAssert"}search(s){this.expression.search(s)}}class While extends Statement{constructor(s,f){super(),this.condition=s,this.body=f}get astNodeType(){return"while"}search(s){this.condition.search(s),this.searchBlock(this.body,s)}}class Continuing extends Statement{constructor(s){super(),this.body=s}get astNodeType(){return"continuing"}search(s){this.searchBlock(this.body,s)}}class For extends Statement{constructor(s,f,_,S){super(),this.init=s,this.condition=f,this.increment=_,this.body=S}get astNodeType(){return"for"}search(s){var f,_,S;(f=this.init)===null||f===void 0||f.search(s),(_=this.condition)===null||_===void 0||_.search(s),(S=this.increment)===null||S===void 0||S.search(s),this.searchBlock(this.body,s)}}class Var extends Statement{constructor(s,f,_,S,T){super(),this.name=s,this.type=f,this.storage=_,this.access=S,this.value=T}get astNodeType(){return"var"}search(s){var f;s(this),(f=this.value)===null||f===void 0||f.search(s)}}class Override extends Statement{constructor(s,f,_){super(),this.name=s,this.type=f,this.value=_}get astNodeType(){return"override"}search(s){var f;(f=this.value)===null||f===void 0||f.search(s)}}class Let extends Statement{constructor(s,f,_,S,T){super(),this.name=s,this.type=f,this.storage=_,this.access=S,this.value=T}get astNodeType(){return"let"}search(s){var f;s(this),(f=this.value)===null||f===void 0||f.search(s)}}class Const extends Statement{constructor(s,f,_,S,T){super(),this.name=s,this.type=f,this.storage=_,this.access=S,this.value=T}get astNodeType(){return"const"}evaluate(s){return this.value.evaluate(s)}search(s){var f;s(this),(f=this.value)===null||f===void 0||f.search(s)}}var IncrementOperator;(function(d){d.increment="++",d.decrement="--"})(IncrementOperator||(IncrementOperator={}));(function(d){function s(f){const _=f;if(_=="parse")throw new Error("Invalid value for IncrementOperator");return d[_]}d.parse=s})(IncrementOperator||(IncrementOperator={}));class Increment extends Statement{constructor(s,f){super(),this.operator=s,this.variable=f}get astNodeType(){return"increment"}search(s){this.variable.search(s)}}var AssignOperator;(function(d){d.assign="=",d.addAssign="+=",d.subtractAssin="-=",d.multiplyAssign="*=",d.divideAssign="/=",d.moduloAssign="%=",d.andAssign="&=",d.orAssign="|=",d.xorAssign="^=",d.shiftLeftAssign="<<=",d.shiftRightAssign=">>="})(AssignOperator||(AssignOperator={}));(function(d){function s(f){const _=f;if(_=="parse")throw new Error("Invalid value for AssignOperator");return _}d.parse=s})(AssignOperator||(AssignOperator={}));class Assign extends Statement{constructor(s,f,_){super(),this.operator=s,this.variable=f,this.value=_}get astNodeType(){return"assign"}search(s){this.variable.search(s),this.value.search(s)}}class Call extends Statement{constructor(s,f){super(),this.name=s,this.args=f}get astNodeType(){return"call"}search(s){for(const f of this.args)f.search(s);s(this)}}class Loop extends Statement{constructor(s,f){super(),this.body=s,this.continuing=f}get astNodeType(){return"loop"}}class Switch extends Statement{constructor(s,f){super(),this.condition=s,this.body=f}get astNodeType(){return"body"}}let If$1=class extends Statement{constructor(s,f,_,S){super(),this.condition=s,this.body=f,this.elseif=_,this.else=S}get astNodeType(){return"if"}search(s){this.condition.search(s),this.searchBlock(this.body,s),this.searchBlock(this.elseif,s),this.searchBlock(this.else,s)}};class Return extends Statement{constructor(s){super(),this.value=s}get astNodeType(){return"return"}search(s){var f;(f=this.value)===null||f===void 0||f.search(s)}}class Enable extends Statement{constructor(s){super(),this.name=s}get astNodeType(){return"enable"}}class Requires extends Statement{constructor(s){super(),this.extensions=s}get astNodeType(){return"requires"}}class Diagnostic extends Statement{constructor(s,f){super(),this.severity=s,this.rule=f}get astNodeType(){return"diagnostic"}}class Alias extends Statement{constructor(s,f){super(),this.name=s,this.type=f}get astNodeType(){return"alias"}}class Discard extends Statement{constructor(){super()}get astNodeType(){return"discard"}}class Break extends Statement{constructor(){super()}get astNodeType(){return"break"}}class Continue extends Statement{constructor(){super()}get astNodeType(){return"continue"}}let Type$1=class extends Statement{constructor(s){super(),this.name=s}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}};class Struct extends Type$1{constructor(s,f,_,S){super(s),this.members=f,this.startLine=_,this.endLine=S}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(s){for(let f=0;f<this.members.length;f++)if(this.members[f].name==s)return f;return-1}}class TemplateType extends Type$1{constructor(s,f,_){super(s),this.format=f,this.access=_}get astNodeType(){return"template"}}class PointerType extends Type$1{constructor(s,f,_,S){super(s),this.storage=f,this.type=_,this.access=S}get astNodeType(){return"pointer"}}class ArrayType extends Type$1{constructor(s,f,_,S){super(s),this.attributes=f,this.format=_,this.count=S}get astNodeType(){return"array"}get isArray(){return!0}}class SamplerType extends Type$1{constructor(s,f,_){super(s),this.format=f,this.access=_}get astNodeType(){return"sampler"}}class Expression extends Node$4{constructor(){super()}}class StringExpr extends Expression{constructor(s){super(),this.value=s}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class CreateExpr extends Expression{constructor(s,f){super(),this.type=s,this.args=f}get astNodeType(){return"createExpr"}search(s){if(s(this),this.args)for(const f of this.args)f.search(s)}evaluate(s){return this.args[0].evaluate(s)}}class CallExpr extends Expression{constructor(s,f){super(),this.name=s,this.args=f}get astNodeType(){return"callExpr"}evaluate(s){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(s));case"acos":return Math.acos(this.args[0].evaluate(s));case"acosh":return Math.acosh(this.args[0].evaluate(s));case"asin":return Math.asin(this.args[0].evaluate(s));case"asinh":return Math.asinh(this.args[0].evaluate(s));case"atan":return Math.atan(this.args[0].evaluate(s));case"atan2":return Math.atan2(this.args[0].evaluate(s),this.args[1].evaluate(s));case"atanh":return Math.atanh(this.args[0].evaluate(s));case"ceil":return Math.ceil(this.args[0].evaluate(s));case"clamp":return Math.min(Math.max(this.args[0].evaluate(s),this.args[1].evaluate(s)),this.args[2].evaluate(s));case"cos":return Math.cos(this.args[0].evaluate(s));case"degrees":return this.args[0].evaluate(s)*180/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(s)-this.args[1].evaluate(s),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(s));case"exp2":return Math.pow(2,this.args[0].evaluate(s));case"floor":return Math.floor(this.args[0].evaluate(s));case"fma":return this.args[0].evaluate(s)*this.args[1].evaluate(s)+this.args[2].evaluate(s);case"fract":return this.args[0].evaluate(s)-Math.floor(this.args[0].evaluate(s));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(s));case"log":return Math.log(this.args[0].evaluate(s));case"log2":return Math.log2(this.args[0].evaluate(s));case"max":return Math.max(this.args[0].evaluate(s),this.args[1].evaluate(s));case"min":return Math.min(this.args[0].evaluate(s),this.args[1].evaluate(s));case"mix":return this.args[0].evaluate(s)*(1-this.args[2].evaluate(s))+this.args[1].evaluate(s)*this.args[2].evaluate(s);case"modf":return this.args[0].evaluate(s)-Math.floor(this.args[0].evaluate(s));case"pow":return Math.pow(this.args[0].evaluate(s),this.args[1].evaluate(s));case"radians":return this.args[0].evaluate(s)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(s));case"sign":return Math.sign(this.args[0].evaluate(s));case"sin":return Math.sin(this.args[0].evaluate(s));case"sinh":return Math.sinh(this.args[0].evaluate(s));case"saturate":return Math.min(Math.max(this.args[0].evaluate(s),0),1);case"smoothstep":return this.args[0].evaluate(s)*this.args[0].evaluate(s)*(3-2*this.args[0].evaluate(s));case"sqrt":return Math.sqrt(this.args[0].evaluate(s));case"step":return this.args[0].evaluate(s)<this.args[1].evaluate(s)?0:1;case"tan":return Math.tan(this.args[0].evaluate(s));case"tanh":return Math.tanh(this.args[0].evaluate(s));case"trunc":return Math.trunc(this.args[0].evaluate(s));default:throw new Error("Non const function: "+this.name)}}search(s){for(const f of this.args)f.search(s);s(this)}}class VariableExpr extends Expression{constructor(s){super(),this.name=s}get astNodeType(){return"varExpr"}search(s){s(this),this.postfix&&this.postfix.search(s)}evaluate(s){const f=s.constants.get(this.name);if(!f)throw new Error("Cannot evaluate node");return f.evaluate(s)}}class ConstExpr extends Expression{constructor(s,f){super(),this.name=s,this.initializer=f}get astNodeType(){return"constExpr"}evaluate(s){var f,_;if(this.initializer instanceof CreateExpr){const S=(f=this.postfix)===null||f===void 0?void 0:f.evaluateString(s),T=(_=this.initializer.type)===null||_===void 0?void 0:_.name,F=s.structs.get(T),M=F==null?void 0:F.getMemberIndex(S);return M!==void 0&&M!=-1?this.initializer.args[M].evaluate(s):this.initializer.evaluate(s)}return this.initializer.evaluate(s)}search(s){this.initializer.search(s)}}class LiteralExpr extends Expression{constructor(s){super(),this.value=s}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class BitcastExpr extends Expression{constructor(s,f){super(),this.type=s,this.value=f}get astNodeType(){return"bitcastExpr"}search(s){this.value.search(s)}}class GroupingExpr extends Expression{constructor(s){super(),this.contents=s}get astNodeType(){return"groupExpr"}evaluate(s){return this.contents[0].evaluate(s)}search(s){this.searchBlock(this.contents,s)}}class ArrayIndex extends Expression{constructor(s){super(),this.index=s}search(s){this.index.search(s)}}class Operator extends Expression{constructor(){super()}}class UnaryOperator extends Operator{constructor(s,f){super(),this.operator=s,this.right=f}get astNodeType(){return"unaryOp"}evaluate(s){switch(this.operator){case"+":return this.right.evaluate(s);case"-":return-this.right.evaluate(s);case"!":return this.right.evaluate(s)?0:1;case"~":return~this.right.evaluate(s);default:throw new Error("Unknown unary operator: "+this.operator)}}search(s){this.right.search(s)}}class BinaryOperator extends Operator{constructor(s,f,_){super(),this.operator=s,this.left=f,this.right=_}get astNodeType(){return"binaryOp"}evaluate(s){switch(this.operator){case"+":return this.left.evaluate(s)+this.right.evaluate(s);case"-":return this.left.evaluate(s)-this.right.evaluate(s);case"*":return this.left.evaluate(s)*this.right.evaluate(s);case"/":return this.left.evaluate(s)/this.right.evaluate(s);case"%":return this.left.evaluate(s)%this.right.evaluate(s);case"==":return this.left.evaluate(s)==this.right.evaluate(s)?1:0;case"!=":return this.left.evaluate(s)!=this.right.evaluate(s)?1:0;case"<":return this.left.evaluate(s)<this.right.evaluate(s)?1:0;case">":return this.left.evaluate(s)>this.right.evaluate(s)?1:0;case"<=":return this.left.evaluate(s)<=this.right.evaluate(s)?1:0;case">=":return this.left.evaluate(s)>=this.right.evaluate(s)?1:0;case"&&":return this.left.evaluate(s)&&this.right.evaluate(s)?1:0;case"||":return this.left.evaluate(s)||this.right.evaluate(s)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}search(s){this.left.search(s),this.right.search(s)}}class SwitchCase extends Node$4{constructor(){super()}}class Case extends SwitchCase{constructor(s,f){super(),this.selector=s,this.body=f}get astNodeType(){return"case"}search(s){this.searchBlock(this.body,s)}}class Default extends SwitchCase{constructor(s){super(),this.body=s}get astNodeType(){return"default"}search(s){this.searchBlock(this.body,s)}}class Argument extends Node$4{constructor(s,f,_){super(),this.name=s,this.type=f,this.attributes=_}get astNodeType(){return"argument"}}class ElseIf extends Node$4{constructor(s,f){super(),this.condition=s,this.body=f}get astNodeType(){return"elseif"}search(s){this.condition.search(s),this.searchBlock(this.body,s)}}class Member extends Node$4{constructor(s,f,_){super(),this.name=s,this.type=f,this.attributes=_}get astNodeType(){return"member"}}let Attribute$1=class extends Node$4{constructor(s,f){super(),this.name=s,this.value=f}get astNodeType(){return"attribute"}};var _a$3,TokenClass;(function(d){d[d.token=0]="token",d[d.keyword=1]="keyword",d[d.reserved=2]="reserved"})(TokenClass||(TokenClass={}));class TokenType{constructor(s,f,_){this.name=s,this.type=f,this.rule=_}toString(){return this.name}}class TokenTypes{}_a$3=TokenTypes;TokenTypes.none=new TokenType("",TokenClass.reserved,"");TokenTypes.eof=new TokenType("EOF",TokenClass.token,"");TokenTypes.reserved={asm:new TokenType("asm",TokenClass.reserved,"asm"),bf16:new TokenType("bf16",TokenClass.reserved,"bf16"),do:new TokenType("do",TokenClass.reserved,"do"),enum:new TokenType("enum",TokenClass.reserved,"enum"),f16:new TokenType("f16",TokenClass.reserved,"f16"),f64:new TokenType("f64",TokenClass.reserved,"f64"),handle:new TokenType("handle",TokenClass.reserved,"handle"),i8:new TokenType("i8",TokenClass.reserved,"i8"),i16:new TokenType("i16",TokenClass.reserved,"i16"),i64:new TokenType("i64",TokenClass.reserved,"i64"),mat:new TokenType("mat",TokenClass.reserved,"mat"),premerge:new TokenType("premerge",TokenClass.reserved,"premerge"),regardless:new TokenType("regardless",TokenClass.reserved,"regardless"),typedef:new TokenType("typedef",TokenClass.reserved,"typedef"),u8:new TokenType("u8",TokenClass.reserved,"u8"),u16:new TokenType("u16",TokenClass.reserved,"u16"),u64:new TokenType("u64",TokenClass.reserved,"u64"),unless:new TokenType("unless",TokenClass.reserved,"unless"),using:new TokenType("using",TokenClass.reserved,"using"),vec:new TokenType("vec",TokenClass.reserved,"vec"),void:new TokenType("void",TokenClass.reserved,"void")};TokenTypes.keywords={array:new TokenType("array",TokenClass.keyword,"array"),atomic:new TokenType("atomic",TokenClass.keyword,"atomic"),bool:new TokenType("bool",TokenClass.keyword,"bool"),f32:new TokenType("f32",TokenClass.keyword,"f32"),i32:new TokenType("i32",TokenClass.keyword,"i32"),mat2x2:new TokenType("mat2x2",TokenClass.keyword,"mat2x2"),mat2x3:new TokenType("mat2x3",TokenClass.keyword,"mat2x3"),mat2x4:new TokenType("mat2x4",TokenClass.keyword,"mat2x4"),mat3x2:new TokenType("mat3x2",TokenClass.keyword,"mat3x2"),mat3x3:new TokenType("mat3x3",TokenClass.keyword,"mat3x3"),mat3x4:new TokenType("mat3x4",TokenClass.keyword,"mat3x4"),mat4x2:new TokenType("mat4x2",TokenClass.keyword,"mat4x2"),mat4x3:new TokenType("mat4x3",TokenClass.keyword,"mat4x3"),mat4x4:new TokenType("mat4x4",TokenClass.keyword,"mat4x4"),ptr:new TokenType("ptr",TokenClass.keyword,"ptr"),sampler:new TokenType("sampler",TokenClass.keyword,"sampler"),sampler_comparison:new TokenType("sampler_comparison",TokenClass.keyword,"sampler_comparison"),struct:new TokenType("struct",TokenClass.keyword,"struct"),texture_1d:new TokenType("texture_1d",TokenClass.keyword,"texture_1d"),texture_2d:new TokenType("texture_2d",TokenClass.keyword,"texture_2d"),texture_2d_array:new TokenType("texture_2d_array",TokenClass.keyword,"texture_2d_array"),texture_3d:new TokenType("texture_3d",TokenClass.keyword,"texture_3d"),texture_cube:new TokenType("texture_cube",TokenClass.keyword,"texture_cube"),texture_cube_array:new TokenType("texture_cube_array",TokenClass.keyword,"texture_cube_array"),texture_multisampled_2d:new TokenType("texture_multisampled_2d",TokenClass.keyword,"texture_multisampled_2d"),texture_storage_1d:new TokenType("texture_storage_1d",TokenClass.keyword,"texture_storage_1d"),texture_storage_2d:new TokenType("texture_storage_2d",TokenClass.keyword,"texture_storage_2d"),texture_storage_2d_array:new TokenType("texture_storage_2d_array",TokenClass.keyword,"texture_storage_2d_array"),texture_storage_3d:new TokenType("texture_storage_3d",TokenClass.keyword,"texture_storage_3d"),texture_depth_2d:new TokenType("texture_depth_2d",TokenClass.keyword,"texture_depth_2d"),texture_depth_2d_array:new TokenType("texture_depth_2d_array",TokenClass.keyword,"texture_depth_2d_array"),texture_depth_cube:new TokenType("texture_depth_cube",TokenClass.keyword,"texture_depth_cube"),texture_depth_cube_array:new TokenType("texture_depth_cube_array",TokenClass.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new TokenType("texture_depth_multisampled_2d",TokenClass.keyword,"texture_depth_multisampled_2d"),texture_external:new TokenType("texture_external",TokenClass.keyword,"texture_external"),u32:new TokenType("u32",TokenClass.keyword,"u32"),vec2:new TokenType("vec2",TokenClass.keyword,"vec2"),vec3:new TokenType("vec3",TokenClass.keyword,"vec3"),vec4:new TokenType("vec4",TokenClass.keyword,"vec4"),bitcast:new TokenType("bitcast",TokenClass.keyword,"bitcast"),block:new TokenType("block",TokenClass.keyword,"block"),break:new TokenType("break",TokenClass.keyword,"break"),case:new TokenType("case",TokenClass.keyword,"case"),continue:new TokenType("continue",TokenClass.keyword,"continue"),continuing:new TokenType("continuing",TokenClass.keyword,"continuing"),default:new TokenType("default",TokenClass.keyword,"default"),diagnostic:new TokenType("diagnostic",TokenClass.keyword,"diagnostic"),discard:new TokenType("discard",TokenClass.keyword,"discard"),else:new TokenType("else",TokenClass.keyword,"else"),enable:new TokenType("enable",TokenClass.keyword,"enable"),fallthrough:new TokenType("fallthrough",TokenClass.keyword,"fallthrough"),false:new TokenType("false",TokenClass.keyword,"false"),fn:new TokenType("fn",TokenClass.keyword,"fn"),for:new TokenType("for",TokenClass.keyword,"for"),function:new TokenType("function",TokenClass.keyword,"function"),if:new TokenType("if",TokenClass.keyword,"if"),let:new TokenType("let",TokenClass.keyword,"let"),const:new TokenType("const",TokenClass.keyword,"const"),loop:new TokenType("loop",TokenClass.keyword,"loop"),while:new TokenType("while",TokenClass.keyword,"while"),private:new TokenType("private",TokenClass.keyword,"private"),read:new TokenType("read",TokenClass.keyword,"read"),read_write:new TokenType("read_write",TokenClass.keyword,"read_write"),return:new TokenType("return",TokenClass.keyword,"return"),requires:new TokenType("requires",TokenClass.keyword,"requires"),storage:new TokenType("storage",TokenClass.keyword,"storage"),switch:new TokenType("switch",TokenClass.keyword,"switch"),true:new TokenType("true",TokenClass.keyword,"true"),alias:new TokenType("alias",TokenClass.keyword,"alias"),type:new TokenType("type",TokenClass.keyword,"type"),uniform:new TokenType("uniform",TokenClass.keyword,"uniform"),var:new TokenType("var",TokenClass.keyword,"var"),override:new TokenType("override",TokenClass.keyword,"override"),workgroup:new TokenType("workgroup",TokenClass.keyword,"workgroup"),write:new TokenType("write",TokenClass.keyword,"write"),r8unorm:new TokenType("r8unorm",TokenClass.keyword,"r8unorm"),r8snorm:new TokenType("r8snorm",TokenClass.keyword,"r8snorm"),r8uint:new TokenType("r8uint",TokenClass.keyword,"r8uint"),r8sint:new TokenType("r8sint",TokenClass.keyword,"r8sint"),r16uint:new TokenType("r16uint",TokenClass.keyword,"r16uint"),r16sint:new TokenType("r16sint",TokenClass.keyword,"r16sint"),r16float:new TokenType("r16float",TokenClass.keyword,"r16float"),rg8unorm:new TokenType("rg8unorm",TokenClass.keyword,"rg8unorm"),rg8snorm:new TokenType("rg8snorm",TokenClass.keyword,"rg8snorm"),rg8uint:new TokenType("rg8uint",TokenClass.keyword,"rg8uint"),rg8sint:new TokenType("rg8sint",TokenClass.keyword,"rg8sint"),r32uint:new TokenType("r32uint",TokenClass.keyword,"r32uint"),r32sint:new TokenType("r32sint",TokenClass.keyword,"r32sint"),r32float:new TokenType("r32float",TokenClass.keyword,"r32float"),rg16uint:new TokenType("rg16uint",TokenClass.keyword,"rg16uint"),rg16sint:new TokenType("rg16sint",TokenClass.keyword,"rg16sint"),rg16float:new TokenType("rg16float",TokenClass.keyword,"rg16float"),rgba8unorm:new TokenType("rgba8unorm",TokenClass.keyword,"rgba8unorm"),rgba8unorm_srgb:new TokenType("rgba8unorm_srgb",TokenClass.keyword,"rgba8unorm_srgb"),rgba8snorm:new TokenType("rgba8snorm",TokenClass.keyword,"rgba8snorm"),rgba8uint:new TokenType("rgba8uint",TokenClass.keyword,"rgba8uint"),rgba8sint:new TokenType("rgba8sint",TokenClass.keyword,"rgba8sint"),bgra8unorm:new TokenType("bgra8unorm",TokenClass.keyword,"bgra8unorm"),bgra8unorm_srgb:new TokenType("bgra8unorm_srgb",TokenClass.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new TokenType("rgb10a2unorm",TokenClass.keyword,"rgb10a2unorm"),rg11b10float:new TokenType("rg11b10float",TokenClass.keyword,"rg11b10float"),rg32uint:new TokenType("rg32uint",TokenClass.keyword,"rg32uint"),rg32sint:new TokenType("rg32sint",TokenClass.keyword,"rg32sint"),rg32float:new TokenType("rg32float",TokenClass.keyword,"rg32float"),rgba16uint:new TokenType("rgba16uint",TokenClass.keyword,"rgba16uint"),rgba16sint:new TokenType("rgba16sint",TokenClass.keyword,"rgba16sint"),rgba16float:new TokenType("rgba16float",TokenClass.keyword,"rgba16float"),rgba32uint:new TokenType("rgba32uint",TokenClass.keyword,"rgba32uint"),rgba32sint:new TokenType("rgba32sint",TokenClass.keyword,"rgba32sint"),rgba32float:new TokenType("rgba32float",TokenClass.keyword,"rgba32float"),static_assert:new TokenType("static_assert",TokenClass.keyword,"static_assert")};TokenTypes.tokens={decimal_float_literal:new TokenType("decimal_float_literal",TokenClass.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new TokenType("hex_float_literal",TokenClass.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new TokenType("int_literal",TokenClass.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new TokenType("uint_literal",TokenClass.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new TokenType("ident",TokenClass.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new TokenType("and",TokenClass.token,"&"),and_and:new TokenType("and_and",TokenClass.token,"&&"),arrow:new TokenType("arrow ",TokenClass.token,"->"),attr:new TokenType("attr",TokenClass.token,"@"),forward_slash:new TokenType("forward_slash",TokenClass.token,"/"),bang:new TokenType("bang",TokenClass.token,"!"),bracket_left:new TokenType("bracket_left",TokenClass.token,"["),bracket_right:new TokenType("bracket_right",TokenClass.token,"]"),brace_left:new TokenType("brace_left",TokenClass.token,"{"),brace_right:new TokenType("brace_right",TokenClass.token,"}"),colon:new TokenType("colon",TokenClass.token,":"),comma:new TokenType("comma",TokenClass.token,","),equal:new TokenType("equal",TokenClass.token,"="),equal_equal:new TokenType("equal_equal",TokenClass.token,"=="),not_equal:new TokenType("not_equal",TokenClass.token,"!="),greater_than:new TokenType("greater_than",TokenClass.token,">"),greater_than_equal:new TokenType("greater_than_equal",TokenClass.token,">="),shift_right:new TokenType("shift_right",TokenClass.token,">>"),less_than:new TokenType("less_than",TokenClass.token,"<"),less_than_equal:new TokenType("less_than_equal",TokenClass.token,"<="),shift_left:new TokenType("shift_left",TokenClass.token,"<<"),modulo:new TokenType("modulo",TokenClass.token,"%"),minus:new TokenType("minus",TokenClass.token,"-"),minus_minus:new TokenType("minus_minus",TokenClass.token,"--"),period:new TokenType("period",TokenClass.token,"."),plus:new TokenType("plus",TokenClass.token,"+"),plus_plus:new TokenType("plus_plus",TokenClass.token,"++"),or:new TokenType("or",TokenClass.token,"|"),or_or:new TokenType("or_or",TokenClass.token,"||"),paren_left:new TokenType("paren_left",TokenClass.token,"("),paren_right:new TokenType("paren_right",TokenClass.token,")"),semicolon:new TokenType("semicolon",TokenClass.token,";"),star:new TokenType("star",TokenClass.token,"*"),tilde:new TokenType("tilde",TokenClass.token,"~"),underscore:new TokenType("underscore",TokenClass.token,"_"),xor:new TokenType("xor",TokenClass.token,"^"),plus_equal:new TokenType("plus_equal",TokenClass.token,"+="),minus_equal:new TokenType("minus_equal",TokenClass.token,"-="),times_equal:new TokenType("times_equal",TokenClass.token,"*="),division_equal:new TokenType("division_equal",TokenClass.token,"/="),modulo_equal:new TokenType("modulo_equal",TokenClass.token,"%="),and_equal:new TokenType("and_equal",TokenClass.token,"&="),or_equal:new TokenType("or_equal",TokenClass.token,"|="),xor_equal:new TokenType("xor_equal",TokenClass.token,"^="),shift_right_equal:new TokenType("shift_right_equal",TokenClass.token,">>="),shift_left_equal:new TokenType("shift_left_equal",TokenClass.token,"<<=")};TokenTypes.simpleTokens={"@":_a$3.tokens.attr,"{":_a$3.tokens.brace_left,"}":_a$3.tokens.brace_right,":":_a$3.tokens.colon,",":_a$3.tokens.comma,"(":_a$3.tokens.paren_left,")":_a$3.tokens.paren_right,";":_a$3.tokens.semicolon};TokenTypes.literalTokens={"&":_a$3.tokens.and,"&&":_a$3.tokens.and_and,"->":_a$3.tokens.arrow,"/":_a$3.tokens.forward_slash,"!":_a$3.tokens.bang,"[":_a$3.tokens.bracket_left,"]":_a$3.tokens.bracket_right,"=":_a$3.tokens.equal,"==":_a$3.tokens.equal_equal,"!=":_a$3.tokens.not_equal,">":_a$3.tokens.greater_than,">=":_a$3.tokens.greater_than_equal,">>":_a$3.tokens.shift_right,"<":_a$3.tokens.less_than,"<=":_a$3.tokens.less_than_equal,"<<":_a$3.tokens.shift_left,"%":_a$3.tokens.modulo,"-":_a$3.tokens.minus,"--":_a$3.tokens.minus_minus,".":_a$3.tokens.period,"+":_a$3.tokens.plus,"++":_a$3.tokens.plus_plus,"|":_a$3.tokens.or,"||":_a$3.tokens.or_or,"*":_a$3.tokens.star,"~":_a$3.tokens.tilde,_:_a$3.tokens.underscore,"^":_a$3.tokens.xor,"+=":_a$3.tokens.plus_equal,"-=":_a$3.tokens.minus_equal,"*=":_a$3.tokens.times_equal,"/=":_a$3.tokens.division_equal,"%=":_a$3.tokens.modulo_equal,"&=":_a$3.tokens.and_equal,"|=":_a$3.tokens.or_equal,"^=":_a$3.tokens.xor_equal,">>=":_a$3.tokens.shift_right_equal,"<<=":_a$3.tokens.shift_left_equal};TokenTypes.regexTokens={decimal_float_literal:_a$3.tokens.decimal_float_literal,hex_float_literal:_a$3.tokens.hex_float_literal,int_literal:_a$3.tokens.int_literal,uint_literal:_a$3.tokens.uint_literal,ident:_a$3.tokens.ident};TokenTypes.storage_class=[_a$3.keywords.function,_a$3.keywords.private,_a$3.keywords.workgroup,_a$3.keywords.uniform,_a$3.keywords.storage];TokenTypes.access_mode=[_a$3.keywords.read,_a$3.keywords.write,_a$3.keywords.read_write];TokenTypes.sampler_type=[_a$3.keywords.sampler,_a$3.keywords.sampler_comparison];TokenTypes.sampled_texture_type=[_a$3.keywords.texture_1d,_a$3.keywords.texture_2d,_a$3.keywords.texture_2d_array,_a$3.keywords.texture_3d,_a$3.keywords.texture_cube,_a$3.keywords.texture_cube_array];TokenTypes.multisampled_texture_type=[_a$3.keywords.texture_multisampled_2d];TokenTypes.storage_texture_type=[_a$3.keywords.texture_storage_1d,_a$3.keywords.texture_storage_2d,_a$3.keywords.texture_storage_2d_array,_a$3.keywords.texture_storage_3d];TokenTypes.depth_texture_type=[_a$3.keywords.texture_depth_2d,_a$3.keywords.texture_depth_2d_array,_a$3.keywords.texture_depth_cube,_a$3.keywords.texture_depth_cube_array,_a$3.keywords.texture_depth_multisampled_2d];TokenTypes.texture_external_type=[_a$3.keywords.texture_external];TokenTypes.any_texture_type=[..._a$3.sampled_texture_type,..._a$3.multisampled_texture_type,..._a$3.storage_texture_type,..._a$3.depth_texture_type,..._a$3.texture_external_type];TokenTypes.texel_format=[_a$3.keywords.r8unorm,_a$3.keywords.r8snorm,_a$3.keywords.r8uint,_a$3.keywords.r8sint,_a$3.keywords.r16uint,_a$3.keywords.r16sint,_a$3.keywords.r16float,_a$3.keywords.rg8unorm,_a$3.keywords.rg8snorm,_a$3.keywords.rg8uint,_a$3.keywords.rg8sint,_a$3.keywords.r32uint,_a$3.keywords.r32sint,_a$3.keywords.r32float,_a$3.keywords.rg16uint,_a$3.keywords.rg16sint,_a$3.keywords.rg16float,_a$3.keywords.rgba8unorm,_a$3.keywords.rgba8unorm_srgb,_a$3.keywords.rgba8snorm,_a$3.keywords.rgba8uint,_a$3.keywords.rgba8sint,_a$3.keywords.bgra8unorm,_a$3.keywords.bgra8unorm_srgb,_a$3.keywords.rgb10a2unorm,_a$3.keywords.rg11b10float,_a$3.keywords.rg32uint,_a$3.keywords.rg32sint,_a$3.keywords.rg32float,_a$3.keywords.rgba16uint,_a$3.keywords.rgba16sint,_a$3.keywords.rgba16float,_a$3.keywords.rgba32uint,_a$3.keywords.rgba32sint,_a$3.keywords.rgba32float];TokenTypes.const_literal=[_a$3.tokens.int_literal,_a$3.tokens.uint_literal,_a$3.tokens.decimal_float_literal,_a$3.tokens.hex_float_literal,_a$3.keywords.true,_a$3.keywords.false];TokenTypes.literal_or_ident=[_a$3.tokens.ident,_a$3.tokens.int_literal,_a$3.tokens.uint_literal,_a$3.tokens.decimal_float_literal,_a$3.tokens.hex_float_literal];TokenTypes.element_count_expression=[_a$3.tokens.int_literal,_a$3.tokens.uint_literal,_a$3.tokens.ident];TokenTypes.template_types=[_a$3.keywords.vec2,_a$3.keywords.vec3,_a$3.keywords.vec4,_a$3.keywords.mat2x2,_a$3.keywords.mat2x3,_a$3.keywords.mat2x4,_a$3.keywords.mat3x2,_a$3.keywords.mat3x3,_a$3.keywords.mat3x4,_a$3.keywords.mat4x2,_a$3.keywords.mat4x3,_a$3.keywords.mat4x4,_a$3.keywords.atomic,_a$3.keywords.bitcast,..._a$3.any_texture_type];TokenTypes.attribute_name=[_a$3.tokens.ident,_a$3.keywords.block,_a$3.keywords.diagnostic];TokenTypes.assignment_operators=[_a$3.tokens.equal,_a$3.tokens.plus_equal,_a$3.tokens.minus_equal,_a$3.tokens.times_equal,_a$3.tokens.division_equal,_a$3.tokens.modulo_equal,_a$3.tokens.and_equal,_a$3.tokens.or_equal,_a$3.tokens.xor_equal,_a$3.tokens.shift_right_equal,_a$3.tokens.shift_left_equal];TokenTypes.increment_operators=[_a$3.tokens.plus_plus,_a$3.tokens.minus_minus];class Token{constructor(s,f,_){this.type=s,this.lexeme=f,this.line=_}toString(){return this.lexeme}isTemplateType(){return TokenTypes.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==TokenTypes.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class WgslScanner{constructor(s){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=s??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new Token(TokenTypes.eof,"",this._line)),this._tokens}scanToken(){let s=this._advance();if(s==`
`)return this._line++,!0;if(this._isWhitespace(s))return!0;if(s=="/"){if(this._peekAhead()=="/"){for(;s!=`
`;){if(this._isAtEnd())return!0;s=this._advance()}return this._line++,!0}else if(this._peekAhead()=="*"){this._advance();let F=1;for(;F>0;){if(this._isAtEnd())return!0;if(s=this._advance(),s==`
`)this._line++;else if(s=="*"){if(this._peekAhead()=="/"&&(this._advance(),F--,F==0))return!0}else s=="/"&&this._peekAhead()=="*"&&(this._advance(),F++)}return!0}}const f=TokenTypes.simpleTokens[s];if(f)return this._addToken(f),!0;let _=TokenTypes.none;const S=this._isAlpha(s),T=s==="_";if(this._isAlphaNumeric(s)){let F=this._peekAhead();for(;this._isAlphaNumeric(F);)s+=this._advance(),F=this._peekAhead()}if(S){const F=TokenTypes.keywords[s];if(F)return this._addToken(F),!0}if(S||T)return this._addToken(TokenTypes.tokens.ident),!0;for(;;){let F=this._findType(s);const M=this._peekAhead();if(s=="-"&&this._tokens.length>0){if(M=="=")return this._current++,s+=M,this._addToken(TokenTypes.tokens.minus_equal),!0;if(M=="-")return this._current++,s+=M,this._addToken(TokenTypes.tokens.minus_minus),!0;const P=this._tokens.length-1;if((TokenTypes.literal_or_ident.indexOf(this._tokens[P].type)!=-1||this._tokens[P].type==TokenTypes.tokens.paren_right)&&M!=">")return this._addToken(F),!0}if(s==">"&&(M==">"||M=="=")){let P=!1,H=this._tokens.length-1;for(let J=0;J<5&&H>=0&&TokenTypes.assignment_operators.indexOf(this._tokens[H].type)===-1;++J,--H)if(this._tokens[H].type===TokenTypes.tokens.less_than){H>0&&this._tokens[H-1].isArrayOrTemplateType()&&(P=!0);break}if(P)return this._addToken(F),!0}if(F===TokenTypes.none){let P=s,H=0;const J=2;for(let K=0;K<J;++K)if(P+=this._peekAhead(K),F=this._findType(P),F!==TokenTypes.none){H=K;break}if(F===TokenTypes.none)return _===TokenTypes.none?!1:(this._current--,this._addToken(_),!0);s=P,this._current+=H+1}if(_=F,this._isAtEnd())break;s+=this._advance()}return _===TokenTypes.none?!1:(this._addToken(_),!0)}_findType(s){for(const _ in TokenTypes.regexTokens){const S=TokenTypes.regexTokens[_];if(this._match(s,S.rule))return S}const f=TokenTypes.literalTokens[s];return f||TokenTypes.none}_match(s,f){const _=f.exec(s);return _&&_.index==0&&_[0]==s}_isAtEnd(){return this._current>=this._source.length}_isAlpha(s){return s>="a"&&s<="z"||s>="A"&&s<="Z"}_isAlphaNumeric(s){return s>="a"&&s<="z"||s>="A"&&s<="Z"||s=="_"||s>="0"&&s<="9"}_isWhitespace(s){return s==" "||s=="	"||s=="\r"}_advance(s=0){let f=this._source[this._current];return s=s||0,s++,this._current+=s,f}_peekAhead(s=0){return s=s||0,this._current+s>=this._source.length?"\0":this._source[this._current+s]}_addToken(s){const f=this._source.substring(this._start,this._current);this._tokens.push(new Token(s,f,this._line))}}class WgslParser{constructor(){this._tokens=[],this._current=0,this._currentLine=0,this._context=new ParseContext,this._deferArrayCountEval=[]}parse(s){this._initialize(s),this._deferArrayCountEval.length=0;const f=[];for(;!this._isAtEnd();){const _=this._global_decl_or_directive();if(!_)break;f.push(_)}if(this._deferArrayCountEval.length>0){for(const _ of this._deferArrayCountEval){const S=_.arrayType,T=_.countNode;if(T instanceof VariableExpr){const M=T.name,P=this._context.constants.get(M);if(P)try{const H=P.evaluate(this._context);S.count=H}catch{}}}this._deferArrayCountEval.length=0}return f}_initialize(s){if(s)if(typeof s=="string"){const f=new WgslScanner(s);this._tokens=f.scanTokens()}else this._tokens=s;else this._tokens=[];this._current=0}_error(s,f){return{token:s,message:f,toString:function(){return`${f}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==TokenTypes.eof}_match(s){if(s instanceof TokenType)return this._check(s)?(this._advance(),!0):!1;for(let f=0,_=s.length;f<_;++f){const S=s[f];if(this._check(S))return this._advance(),!0}return!1}_consume(s,f){if(this._check(s))return this._advance();throw this._error(this._peek(),f)}_check(s){if(this._isAtEnd())return!1;const f=this._peek();if(s instanceof Array){const _=f.type;return s.indexOf(_)!=-1}return f.type==s}_advance(){var s,f;return this._currentLine=(f=(s=this._peek())===null||s===void 0?void 0:s.line)!==null&&f!==void 0?f:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(TokenTypes.tokens.semicolon)&&!this._isAtEnd(););if(this._match(TokenTypes.keywords.alias)){const f=this._type_alias();return this._consume(TokenTypes.tokens.semicolon,"Expected ';'"),f}if(this._match(TokenTypes.keywords.diagnostic)){const f=this._diagnostic();return this._consume(TokenTypes.tokens.semicolon,"Expected ';'"),f}if(this._match(TokenTypes.keywords.requires)){const f=this._requires_directive();return this._consume(TokenTypes.tokens.semicolon,"Expected ';'"),f}if(this._match(TokenTypes.keywords.enable)){const f=this._enable_directive();return this._consume(TokenTypes.tokens.semicolon,"Expected ';'"),f}const s=this._attribute();if(this._check(TokenTypes.keywords.var)){const f=this._global_variable_decl();return f!=null&&(f.attributes=s),this._consume(TokenTypes.tokens.semicolon,"Expected ';'."),f}if(this._check(TokenTypes.keywords.override)){const f=this._override_variable_decl();return f!=null&&(f.attributes=s),this._consume(TokenTypes.tokens.semicolon,"Expected ';'."),f}if(this._check(TokenTypes.keywords.let)){const f=this._global_let_decl();return f!=null&&(f.attributes=s),this._consume(TokenTypes.tokens.semicolon,"Expected ';'."),f}if(this._check(TokenTypes.keywords.const)){const f=this._global_const_decl();return f!=null&&(f.attributes=s),this._consume(TokenTypes.tokens.semicolon,"Expected ';'."),f}if(this._check(TokenTypes.keywords.struct)){const f=this._struct_decl();return f!=null&&(f.attributes=s),f}if(this._check(TokenTypes.keywords.fn)){const f=this._function_decl();return f!=null&&(f.attributes=s),f}return null}_function_decl(){if(!this._match(TokenTypes.keywords.fn))return null;const s=this._currentLine,f=this._consume(TokenTypes.tokens.ident,"Expected function name.").toString();this._consume(TokenTypes.tokens.paren_left,"Expected '(' for function arguments.");const _=[];if(!this._check(TokenTypes.tokens.paren_right))do{if(this._check(TokenTypes.tokens.paren_right))break;const M=this._attribute(),P=this._consume(TokenTypes.tokens.ident,"Expected argument name.").toString();this._consume(TokenTypes.tokens.colon,"Expected ':' for argument type.");const H=this._attribute(),J=this._type_decl();J!=null&&(J.attributes=H,_.push(new Argument(P,J,M)))}while(this._match(TokenTypes.tokens.comma));this._consume(TokenTypes.tokens.paren_right,"Expected ')' after function arguments.");let S=null;if(this._match(TokenTypes.tokens.arrow)){const M=this._attribute();S=this._type_decl(),S!=null&&(S.attributes=M)}const T=this._compound_statement(),F=this._currentLine;return new Function$1(f,_,S,T,s,F)}_compound_statement(){const s=[];for(this._consume(TokenTypes.tokens.brace_left,"Expected '{' for block.");!this._check(TokenTypes.tokens.brace_right);){const f=this._statement();f!==null&&s.push(f)}return this._consume(TokenTypes.tokens.brace_right,"Expected '}' for block."),s}_statement(){for(;this._match(TokenTypes.tokens.semicolon)&&!this._isAtEnd(););if(this._check(TokenTypes.tokens.attr)&&this._attribute(),this._check(TokenTypes.keywords.if))return this._if_statement();if(this._check(TokenTypes.keywords.switch))return this._switch_statement();if(this._check(TokenTypes.keywords.loop))return this._loop_statement();if(this._check(TokenTypes.keywords.for))return this._for_statement();if(this._check(TokenTypes.keywords.while))return this._while_statement();if(this._check(TokenTypes.keywords.continuing))return this._continuing_statement();if(this._check(TokenTypes.keywords.static_assert))return this._static_assert_statement();if(this._check(TokenTypes.tokens.brace_left))return this._compound_statement();let s=null;return this._check(TokenTypes.keywords.return)?s=this._return_statement():this._check([TokenTypes.keywords.var,TokenTypes.keywords.let,TokenTypes.keywords.const])?s=this._variable_statement():this._match(TokenTypes.keywords.discard)?s=new Discard:this._match(TokenTypes.keywords.break)?s=new Break:this._match(TokenTypes.keywords.continue)?s=new Continue:s=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),s!=null&&this._consume(TokenTypes.tokens.semicolon,"Expected ';' after statement."),s}_static_assert_statement(){if(!this._match(TokenTypes.keywords.static_assert))return null;const s=this._optional_paren_expression();return new StaticAssert(s)}_while_statement(){if(!this._match(TokenTypes.keywords.while))return null;const s=this._optional_paren_expression();this._check(TokenTypes.tokens.attr)&&this._attribute();const f=this._compound_statement();return new While(s,f)}_continuing_statement(){if(!this._match(TokenTypes.keywords.continuing))return null;const s=this._compound_statement();return new Continuing(s)}_for_statement(){if(!this._match(TokenTypes.keywords.for))return null;this._consume(TokenTypes.tokens.paren_left,"Expected '('.");const s=this._check(TokenTypes.tokens.semicolon)?null:this._for_init();this._consume(TokenTypes.tokens.semicolon,"Expected ';'.");const f=this._check(TokenTypes.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(TokenTypes.tokens.semicolon,"Expected ';'.");const _=this._check(TokenTypes.tokens.paren_right)?null:this._for_increment();this._consume(TokenTypes.tokens.paren_right,"Expected ')'."),this._check(TokenTypes.tokens.attr)&&this._attribute();const S=this._compound_statement();return new For(s,f,_,S)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(TokenTypes.keywords.var)){const s=this._variable_decl();if(s===null)throw this._error(this._peek(),"Variable declaration expected.");let f=null;return this._match(TokenTypes.tokens.equal)&&(f=this._short_circuit_or_expression()),new Var(s.name,s.type,s.storage,s.access,f)}if(this._match(TokenTypes.keywords.let)){const s=this._consume(TokenTypes.tokens.ident,"Expected name for let.").toString();let f=null;if(this._match(TokenTypes.tokens.colon)){const S=this._attribute();f=this._type_decl(),f!=null&&(f.attributes=S)}this._consume(TokenTypes.tokens.equal,"Expected '=' for let.");const _=this._short_circuit_or_expression();return new Let(s,f,null,null,_)}if(this._match(TokenTypes.keywords.const)){const s=this._consume(TokenTypes.tokens.ident,"Expected name for const.").toString();let f=null;if(this._match(TokenTypes.tokens.colon)){const S=this._attribute();f=this._type_decl(),f!=null&&(f.attributes=S)}this._consume(TokenTypes.tokens.equal,"Expected '=' for const.");const _=this._short_circuit_or_expression();return new Const(s,f,null,null,_)}return null}_increment_decrement_statement(){const s=this._current,f=this._unary_expression();if(f==null)return null;if(!this._check(TokenTypes.increment_operators))return this._current=s,null;const _=this._consume(TokenTypes.increment_operators,"Expected increment operator");return new Increment(_.type===TokenTypes.tokens.plus_plus?IncrementOperator.increment:IncrementOperator.decrement,f)}_assignment_statement(){let s=null;if(this._check(TokenTypes.tokens.brace_right))return null;let f=this._match(TokenTypes.tokens.underscore);if(f||(s=this._unary_expression()),!f&&s==null)return null;const _=this._consume(TokenTypes.assignment_operators,"Expected assignment operator."),S=this._short_circuit_or_expression();return new Assign(AssignOperator.parse(_.lexeme),s,S)}_func_call_statement(){if(!this._check(TokenTypes.tokens.ident))return null;const s=this._current,f=this._consume(TokenTypes.tokens.ident,"Expected function name."),_=this._argument_expression_list();return _===null?(this._current=s,null):new Call(f.lexeme,_)}_loop_statement(){if(!this._match(TokenTypes.keywords.loop))return null;this._check(TokenTypes.tokens.attr)&&this._attribute(),this._consume(TokenTypes.tokens.brace_left,"Expected '{' for loop.");const s=[];let f=this._statement();for(;f!==null;){if(Array.isArray(f))for(let S of f)s.push(S);else s.push(f);f=this._statement()}let _=null;return this._match(TokenTypes.keywords.continuing)&&(_=this._compound_statement()),this._consume(TokenTypes.tokens.brace_right,"Expected '}' for loop."),new Loop(s,_)}_switch_statement(){if(!this._match(TokenTypes.keywords.switch))return null;const s=this._optional_paren_expression();this._check(TokenTypes.tokens.attr)&&this._attribute(),this._consume(TokenTypes.tokens.brace_left,"Expected '{' for switch.");const f=this._switch_body();if(f==null||f.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(TokenTypes.tokens.brace_right,"Expected '}' for switch."),new Switch(s,f)}_switch_body(){const s=[];if(this._match(TokenTypes.keywords.case)){const f=this._case_selectors();this._match(TokenTypes.tokens.colon),this._check(TokenTypes.tokens.attr)&&this._attribute(),this._consume(TokenTypes.tokens.brace_left,"Exected '{' for switch case.");const _=this._case_body();this._consume(TokenTypes.tokens.brace_right,"Exected '}' for switch case."),s.push(new Case(f,_))}if(this._match(TokenTypes.keywords.default)){this._match(TokenTypes.tokens.colon),this._check(TokenTypes.tokens.attr)&&this._attribute(),this._consume(TokenTypes.tokens.brace_left,"Exected '{' for switch default.");const f=this._case_body();this._consume(TokenTypes.tokens.brace_right,"Exected '}' for switch default."),s.push(new Default(f))}if(this._check([TokenTypes.keywords.default,TokenTypes.keywords.case])){const f=this._switch_body();s.push(f[0])}return s}_case_selectors(){const s=[this._shift_expression()];for(;this._match(TokenTypes.tokens.comma);)s.push(this._shift_expression());return s}_case_body(){if(this._match(TokenTypes.keywords.fallthrough))return this._consume(TokenTypes.tokens.semicolon,"Expected ';'"),[];let s=this._statement();if(s==null)return[];s instanceof Array||(s=[s]);const f=this._case_body();return f.length==0?s:[...s,f[0]]}_if_statement(){if(!this._match(TokenTypes.keywords.if))return null;const s=this._optional_paren_expression();this._check(TokenTypes.tokens.attr)&&this._attribute();const f=this._compound_statement();let _=[];this._match_elseif()&&(this._check(TokenTypes.tokens.attr)&&this._attribute(),_=this._elseif_statement(_));let S=null;return this._match(TokenTypes.keywords.else)&&(this._check(TokenTypes.tokens.attr)&&this._attribute(),S=this._compound_statement()),new If$1(s,f,_,S)}_match_elseif(){return this._tokens[this._current].type===TokenTypes.keywords.else&&this._tokens[this._current+1].type===TokenTypes.keywords.if?(this._advance(),this._advance(),!0):!1}_elseif_statement(s=[]){const f=this._optional_paren_expression(),_=this._compound_statement();return s.push(new ElseIf(f,_)),this._match_elseif()&&(this._check(TokenTypes.tokens.attr)&&this._attribute(),this._elseif_statement(s)),s}_return_statement(){if(!this._match(TokenTypes.keywords.return))return null;const s=this._short_circuit_or_expression();return new Return(s)}_short_circuit_or_expression(){let s=this._short_circuit_and_expr();for(;this._match(TokenTypes.tokens.or_or);)s=new BinaryOperator(this._previous().toString(),s,this._short_circuit_and_expr());return s}_short_circuit_and_expr(){let s=this._inclusive_or_expression();for(;this._match(TokenTypes.tokens.and_and);)s=new BinaryOperator(this._previous().toString(),s,this._inclusive_or_expression());return s}_inclusive_or_expression(){let s=this._exclusive_or_expression();for(;this._match(TokenTypes.tokens.or);)s=new BinaryOperator(this._previous().toString(),s,this._exclusive_or_expression());return s}_exclusive_or_expression(){let s=this._and_expression();for(;this._match(TokenTypes.tokens.xor);)s=new BinaryOperator(this._previous().toString(),s,this._and_expression());return s}_and_expression(){let s=this._equality_expression();for(;this._match(TokenTypes.tokens.and);)s=new BinaryOperator(this._previous().toString(),s,this._equality_expression());return s}_equality_expression(){const s=this._relational_expression();return this._match([TokenTypes.tokens.equal_equal,TokenTypes.tokens.not_equal])?new BinaryOperator(this._previous().toString(),s,this._relational_expression()):s}_relational_expression(){let s=this._shift_expression();for(;this._match([TokenTypes.tokens.less_than,TokenTypes.tokens.greater_than,TokenTypes.tokens.less_than_equal,TokenTypes.tokens.greater_than_equal]);)s=new BinaryOperator(this._previous().toString(),s,this._shift_expression());return s}_shift_expression(){let s=this._additive_expression();for(;this._match([TokenTypes.tokens.shift_left,TokenTypes.tokens.shift_right]);)s=new BinaryOperator(this._previous().toString(),s,this._additive_expression());return s}_additive_expression(){let s=this._multiplicative_expression();for(;this._match([TokenTypes.tokens.plus,TokenTypes.tokens.minus]);)s=new BinaryOperator(this._previous().toString(),s,this._multiplicative_expression());return s}_multiplicative_expression(){let s=this._unary_expression();for(;this._match([TokenTypes.tokens.star,TokenTypes.tokens.forward_slash,TokenTypes.tokens.modulo]);)s=new BinaryOperator(this._previous().toString(),s,this._unary_expression());return s}_unary_expression(){return this._match([TokenTypes.tokens.minus,TokenTypes.tokens.bang,TokenTypes.tokens.tilde,TokenTypes.tokens.star,TokenTypes.tokens.and])?new UnaryOperator(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const s=this._primary_expression(),f=this._postfix_expression();return f&&(s.postfix=f),s}_postfix_expression(){if(this._match(TokenTypes.tokens.bracket_left)){const s=this._short_circuit_or_expression();this._consume(TokenTypes.tokens.bracket_right,"Expected ']'.");const f=new ArrayIndex(s),_=this._postfix_expression();return _&&(f.postfix=_),f}if(this._match(TokenTypes.tokens.period)){const s=this._consume(TokenTypes.tokens.ident,"Expected member name."),f=this._postfix_expression(),_=new StringExpr(s.lexeme);return f&&(_.postfix=f),_}return null}_getStruct(s){return this._context.aliases.has(s)?this._context.aliases.get(s).type:this._context.structs.has(s)?this._context.structs.get(s):null}_primary_expression(){if(this._match(TokenTypes.tokens.ident)){const _=this._previous().toString();if(this._check(TokenTypes.tokens.paren_left)){const S=this._argument_expression_list(),T=this._getStruct(_);return T!=null?new CreateExpr(T,S):new CallExpr(_,S)}if(this._context.constants.has(_)){const S=this._context.constants.get(_);return new ConstExpr(_,S.value)}return new VariableExpr(_)}if(this._match(TokenTypes.const_literal))return new LiteralExpr(parseFloat(this._previous().toString()));if(this._check(TokenTypes.tokens.paren_left))return this._paren_expression();if(this._match(TokenTypes.keywords.bitcast)){this._consume(TokenTypes.tokens.less_than,"Expected '<'.");const _=this._type_decl();this._consume(TokenTypes.tokens.greater_than,"Expected '>'.");const S=this._paren_expression();return new BitcastExpr(_,S)}const s=this._type_decl(),f=this._argument_expression_list();return new CreateExpr(s,f)}_argument_expression_list(){if(!this._match(TokenTypes.tokens.paren_left))return null;const s=[];do{if(this._check(TokenTypes.tokens.paren_right))break;const f=this._short_circuit_or_expression();s.push(f)}while(this._match(TokenTypes.tokens.comma));return this._consume(TokenTypes.tokens.paren_right,"Expected ')' for agument list"),s}_optional_paren_expression(){this._match(TokenTypes.tokens.paren_left);const s=this._short_circuit_or_expression();return this._match(TokenTypes.tokens.paren_right),new GroupingExpr([s])}_paren_expression(){this._consume(TokenTypes.tokens.paren_left,"Expected '('.");const s=this._short_circuit_or_expression();return this._consume(TokenTypes.tokens.paren_right,"Expected ')'."),new GroupingExpr([s])}_struct_decl(){if(!this._match(TokenTypes.keywords.struct))return null;const s=this._currentLine,f=this._consume(TokenTypes.tokens.ident,"Expected name for struct.").toString();this._consume(TokenTypes.tokens.brace_left,"Expected '{' for struct body.");const _=[];for(;!this._check(TokenTypes.tokens.brace_right);){const F=this._attribute(),M=this._consume(TokenTypes.tokens.ident,"Expected variable name.").toString();this._consume(TokenTypes.tokens.colon,"Expected ':' for struct member type.");const P=this._attribute(),H=this._type_decl();H!=null&&(H.attributes=P),this._check(TokenTypes.tokens.brace_right)?this._match(TokenTypes.tokens.comma):this._consume(TokenTypes.tokens.comma,"Expected ',' for struct member."),_.push(new Member(M,H,F))}this._consume(TokenTypes.tokens.brace_right,"Expected '}' after struct body.");const S=this._currentLine,T=new Struct(f,_,s,S);return this._context.structs.set(f,T),T}_global_variable_decl(){const s=this._variable_decl();return s&&this._match(TokenTypes.tokens.equal)&&(s.value=this._const_expression()),s}_override_variable_decl(){const s=this._override_decl();return s&&this._match(TokenTypes.tokens.equal)&&(s.value=this._const_expression()),s}_global_const_decl(){if(!this._match(TokenTypes.keywords.const))return null;const s=this._consume(TokenTypes.tokens.ident,"Expected variable name");let f=null;if(this._match(TokenTypes.tokens.colon)){const T=this._attribute();f=this._type_decl(),f!=null&&(f.attributes=T)}let _=null;if(this._match(TokenTypes.tokens.equal)){const T=this._short_circuit_or_expression();if(T instanceof CreateExpr)_=T;else if(T instanceof ConstExpr&&T.initializer instanceof CreateExpr)_=T.initializer;else try{const F=T.evaluate(this._context);_=new LiteralExpr(F)}catch{_=T}}const S=new Const(s.toString(),f,"","",_);return this._context.constants.set(S.name,S),S}_global_let_decl(){if(!this._match(TokenTypes.keywords.let))return null;const s=this._consume(TokenTypes.tokens.ident,"Expected variable name");let f=null;if(this._match(TokenTypes.tokens.colon)){const S=this._attribute();f=this._type_decl(),f!=null&&(f.attributes=S)}let _=null;return this._match(TokenTypes.tokens.equal)&&(_=this._const_expression()),new Let(s.toString(),f,"","",_)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(TokenTypes.keywords.var))return null;let s="",f="";this._match(TokenTypes.tokens.less_than)&&(s=this._consume(TokenTypes.storage_class,"Expected storage_class.").toString(),this._match(TokenTypes.tokens.comma)&&(f=this._consume(TokenTypes.access_mode,"Expected access_mode.").toString()),this._consume(TokenTypes.tokens.greater_than,"Expected '>'."));const _=this._consume(TokenTypes.tokens.ident,"Expected variable name");let S=null;if(this._match(TokenTypes.tokens.colon)){const T=this._attribute();S=this._type_decl(),S!=null&&(S.attributes=T)}return new Var(_.toString(),S,s,f,null)}_override_decl(){if(!this._match(TokenTypes.keywords.override))return null;const s=this._consume(TokenTypes.tokens.ident,"Expected variable name");let f=null;if(this._match(TokenTypes.tokens.colon)){const _=this._attribute();f=this._type_decl(),f!=null&&(f.attributes=_)}return new Override(s.toString(),f,null)}_diagnostic(){this._consume(TokenTypes.tokens.paren_left,"Expected '('");const s=this._consume(TokenTypes.tokens.ident,"Expected severity control name.");this._consume(TokenTypes.tokens.comma,"Expected ','");const f=this._consume(TokenTypes.tokens.ident,"Expected diagnostic rule name.");return this._consume(TokenTypes.tokens.paren_right,"Expected ')'"),new Diagnostic(s.toString(),f.toString())}_enable_directive(){const s=this._consume(TokenTypes.tokens.ident,"identity expected.");return new Enable(s.toString())}_requires_directive(){const s=[this._consume(TokenTypes.tokens.ident,"identity expected.").toString()];for(;this._match(TokenTypes.tokens.comma);){const f=this._consume(TokenTypes.tokens.ident,"identity expected.");s.push(f.toString())}return new Requires(s)}_type_alias(){const s=this._consume(TokenTypes.tokens.ident,"identity expected.");this._consume(TokenTypes.tokens.equal,"Expected '=' for type alias.");let f=this._type_decl();if(f===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(f.name)&&(f=this._context.aliases.get(f.name).type);const _=new Alias(s.toString(),f);return this._context.aliases.set(_.name,_),_}_type_decl(){if(this._check([TokenTypes.tokens.ident,...TokenTypes.texel_format,TokenTypes.keywords.bool,TokenTypes.keywords.f32,TokenTypes.keywords.i32,TokenTypes.keywords.u32])){const _=this._advance(),S=_.toString();return this._context.structs.has(S)?this._context.structs.get(S):this._context.aliases.has(S)?this._context.aliases.get(S).type:new Type$1(_.toString())}let s=this._texture_sampler_types();if(s)return s;if(this._check(TokenTypes.template_types)){let _=this._advance().toString(),S=null,T=null;return this._match(TokenTypes.tokens.less_than)&&(S=this._type_decl(),T=null,this._match(TokenTypes.tokens.comma)&&(T=this._consume(TokenTypes.access_mode,"Expected access_mode for pointer").toString()),this._consume(TokenTypes.tokens.greater_than,"Expected '>' for type.")),new TemplateType(_,S,T)}if(this._match(TokenTypes.keywords.ptr)){let _=this._previous().toString();this._consume(TokenTypes.tokens.less_than,"Expected '<' for pointer.");const S=this._consume(TokenTypes.storage_class,"Expected storage_class for pointer");this._consume(TokenTypes.tokens.comma,"Expected ',' for pointer.");const T=this._type_decl();let F=null;return this._match(TokenTypes.tokens.comma)&&(F=this._consume(TokenTypes.access_mode,"Expected access_mode for pointer").toString()),this._consume(TokenTypes.tokens.greater_than,"Expected '>' for pointer."),new PointerType(_,S.toString(),T,F)}const f=this._attribute();if(this._match(TokenTypes.keywords.array)){let _=null,S=-1;const T=this._previous();let F=null;if(this._match(TokenTypes.tokens.less_than)){_=this._type_decl(),this._context.aliases.has(_.name)&&(_=this._context.aliases.get(_.name).type);let P="";if(this._match(TokenTypes.tokens.comma)){F=this._shift_expression();try{P=F.evaluate(this._context).toString(),F=null}catch{P="1"}}this._consume(TokenTypes.tokens.greater_than,"Expected '>' for array."),S=P?parseInt(P):0}const M=new ArrayType(T.toString(),f,_,S);return F&&this._deferArrayCountEval.push({arrayType:M,countNode:F}),M}return null}_texture_sampler_types(){if(this._match(TokenTypes.sampler_type))return new SamplerType(this._previous().toString(),null,null);if(this._match(TokenTypes.depth_texture_type))return new SamplerType(this._previous().toString(),null,null);if(this._match(TokenTypes.sampled_texture_type)||this._match(TokenTypes.multisampled_texture_type)){const s=this._previous();this._consume(TokenTypes.tokens.less_than,"Expected '<' for sampler type.");const f=this._type_decl();return this._consume(TokenTypes.tokens.greater_than,"Expected '>' for sampler type."),new SamplerType(s.toString(),f,null)}if(this._match(TokenTypes.storage_texture_type)){const s=this._previous();this._consume(TokenTypes.tokens.less_than,"Expected '<' for sampler type.");const f=this._consume(TokenTypes.texel_format,"Invalid texel format.").toString();this._consume(TokenTypes.tokens.comma,"Expected ',' after texel format.");const _=this._consume(TokenTypes.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(TokenTypes.tokens.greater_than,"Expected '>' for sampler type."),new SamplerType(s.toString(),f,_)}return null}_attribute(){let s=[];for(;this._match(TokenTypes.tokens.attr);){const f=this._consume(TokenTypes.attribute_name,"Expected attribute name"),_=new Attribute$1(f.toString(),null);if(this._match(TokenTypes.tokens.paren_left)){if(_.value=this._consume(TokenTypes.literal_or_ident,"Expected attribute value").toString(),this._check(TokenTypes.tokens.comma)){this._advance();do{const S=this._consume(TokenTypes.literal_or_ident,"Expected attribute value").toString();_.value instanceof Array||(_.value=[_.value]),_.value.push(S)}while(this._match(TokenTypes.tokens.comma))}this._consume(TokenTypes.tokens.paren_right,"Expected ')'")}s.push(_)}return s.length==0?null:s}}class TypeInfo{constructor(s,f){this.name=s,this.attributes=f,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class MemberInfo{constructor(s,f,_){this.name=s,this.type=f,this.attributes=_,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class StructInfo extends TypeInfo{constructor(s,f){super(s,f),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class ArrayInfo extends TypeInfo{constructor(s,f){super(s,f),this.count=0,this.stride=0}get isArray(){return!0}}class TemplateInfo extends TypeInfo{constructor(s,f,_,S){super(s,_),this.format=f,this.access=S}get isTemplate(){return!0}}var ResourceType;(function(d){d[d.Uniform=0]="Uniform",d[d.Storage=1]="Storage",d[d.Texture=2]="Texture",d[d.Sampler=3]="Sampler",d[d.StorageTexture=4]="StorageTexture"})(ResourceType||(ResourceType={}));class VariableInfo{constructor(s,f,_,S,T,F,M){this.name=s,this.type=f,this.group=_,this.binding=S,this.attributes=T,this.resourceType=F,this.access=M}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class AliasInfo{constructor(s,f){this.name=s,this.type=f}}class _TypeSize{constructor(s,f){this.align=s,this.size=f}}class InputInfo{constructor(s,f,_,S){this.name=s,this.type=f,this.locationType=_,this.location=S,this.interpolation=null}}class OutputInfo{constructor(s,f,_,S){this.name=s,this.type=f,this.locationType=_,this.location=S}}class OverrideInfo{constructor(s,f,_,S){this.name=s,this.type=f,this.attributes=_,this.id=S}}class FunctionInfo{constructor(s,f=null){this.stage=null,this.inputs=[],this.outputs=[],this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=s,this.stage=f}}class EntryFunctions{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class _FunctionResources{constructor(s){this.resources=null,this.inUse=!1,this.info=null,this.node=s}}class WgslReflect{constructor(s){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new EntryFunctions,this.functions=[],this._types=new Map,this._functions=new Map,s&&this.update(s)}_isStorageTexture(s){return s.name=="texture_storage_1d"||s.name=="texture_storage_2d"||s.name=="texture_storage_2d_array"||s.name=="texture_storage_3d"}update(s){const _=new WgslParser().parse(s);for(const S of _)S instanceof Function$1&&this._functions.set(S.name,new _FunctionResources(S));for(const S of _)if(S instanceof Struct){const T=this._getTypeInfo(S,null);T instanceof StructInfo&&this.structs.push(T)}for(const S of _){if(S instanceof Alias){this.aliases.push(this._getAliasInfo(S));continue}if(S instanceof Override){const T=S,F=this._getAttributeNum(T.attributes,"id",0),M=T.type!=null?this._getTypeInfo(T.type,T.attributes):null;this.overrides.push(new OverrideInfo(T.name,M,T.attributes,F));continue}if(this._isUniformVar(S)){const T=S,F=this._getAttributeNum(T.attributes,"group",0),M=this._getAttributeNum(T.attributes,"binding",0),P=this._getTypeInfo(T.type,T.attributes),H=new VariableInfo(T.name,P,F,M,T.attributes,ResourceType.Uniform,T.access);this.uniforms.push(H);continue}if(this._isStorageVar(S)){const T=S,F=this._getAttributeNum(T.attributes,"group",0),M=this._getAttributeNum(T.attributes,"binding",0),P=this._getTypeInfo(T.type,T.attributes),H=this._isStorageTexture(P),J=new VariableInfo(T.name,P,F,M,T.attributes,H?ResourceType.StorageTexture:ResourceType.Storage,T.access);this.storage.push(J);continue}if(this._isTextureVar(S)){const T=S,F=this._getAttributeNum(T.attributes,"group",0),M=this._getAttributeNum(T.attributes,"binding",0),P=this._getTypeInfo(T.type,T.attributes),H=this._isStorageTexture(P),J=new VariableInfo(T.name,P,F,M,T.attributes,H?ResourceType.StorageTexture:ResourceType.Texture,T.access);H?this.storage.push(J):this.textures.push(J);continue}if(this._isSamplerVar(S)){const T=S,F=this._getAttributeNum(T.attributes,"group",0),M=this._getAttributeNum(T.attributes,"binding",0),P=this._getTypeInfo(T.type,T.attributes),H=new VariableInfo(T.name,P,F,M,T.attributes,ResourceType.Sampler,T.access);this.samplers.push(H);continue}if(S instanceof Function$1){const T=this._getAttribute(S,"vertex"),F=this._getAttribute(S,"fragment"),M=this._getAttribute(S,"compute"),P=T||F||M,H=new FunctionInfo(S.name,P==null?void 0:P.name);H.startLine=S.startLine,H.endLine=S.endLine,this.functions.push(H),this._functions.get(S.name).info=H,P&&(this._functions.get(S.name).inUse=!0,H.inUse=!0,H.resources=this._findResources(S,!!P),H.inputs=this._getInputs(S.args),H.outputs=this._getOutputs(S.returnType),this.entry[P.name].push(H));continue}}for(const S of this._functions.values())S.info&&(S.info.inUse=S.inUse,this._addCalls(S.node,S.info.calls));for(const S of this._functions.values())S.node.search(T=>{var F;if(T.astNodeType==="varExpr"){const M=T;for(const P of this.overrides)M.name==P.name&&((F=S.info)===null||F===void 0||F.overrides.push(P))}});for(const S of this.uniforms)this._markStructsInUse(S.type);for(const S of this.storage)this._markStructsInUse(S.type)}_markStructsInUse(s){if(s)if(s.isStruct){if(s.inUse=!0,s.members)for(const f of s.members)this._markStructsInUse(f.type)}else if(s.isArray)this._markStructsInUse(s.format);else if(s.isTemplate)s.format&&this._markStructsInUse(s.format);else{const f=this._getAlias(s.name);f&&this._markStructsInUse(f)}}_addCalls(s,f){var _;for(const S of s.calls){const T=(_=this._functions.get(S.name))===null||_===void 0?void 0:_.info;T&&f.add(T)}}findResource(s,f){for(const _ of this.uniforms)if(_.group==s&&_.binding==f)return _;for(const _ of this.storage)if(_.group==s&&_.binding==f)return _;for(const _ of this.textures)if(_.group==s&&_.binding==f)return _;for(const _ of this.samplers)if(_.group==s&&_.binding==f)return _;return null}_findResource(s){for(const f of this.uniforms)if(f.name==s)return f;for(const f of this.storage)if(f.name==s)return f;for(const f of this.textures)if(f.name==s)return f;for(const f of this.samplers)if(f.name==s)return f;return null}_markStructsFromAST(s){const f=this._getTypeInfo(s,null);this._markStructsInUse(f)}_findResources(s,f){const _=[],S=this,T=[];return s.search(F=>{if(F instanceof _BlockStart)T.push({});else if(F instanceof _BlockEnd)T.pop();else if(F instanceof Var){const M=F;f&&M.type!==null&&this._markStructsFromAST(M.type),T.length>0&&(T[T.length-1][M.name]=M)}else if(F instanceof CreateExpr){const M=F;f&&M.type!==null&&this._markStructsFromAST(M.type)}else if(F instanceof Let){const M=F;f&&M.type!==null&&this._markStructsFromAST(M.type),T.length>0&&(T[T.length-1][M.name]=M)}else if(F instanceof VariableExpr){const M=F;if(T.length>0&&T[T.length-1][M.name])return;const P=S._findResource(M.name);P&&_.push(P)}else if(F instanceof CallExpr){const M=F,P=S._functions.get(M.name);P&&(f&&(P.inUse=!0),s.calls.add(P.node),P.resources===null&&(P.resources=S._findResources(P.node,f)),_.push(...P.resources))}else if(F instanceof Call){const M=F,P=S._functions.get(M.name);P&&(f&&(P.inUse=!0),s.calls.add(P.node),P.resources===null&&(P.resources=S._findResources(P.node,f)),_.push(...P.resources))}}),[...new Map(_.map(F=>[F.name,F])).values()]}getBindGroups(){const s=[];function f(_,S){_>=s.length&&(s.length=_+1),s[_]===void 0&&(s[_]=[]),S>=s[_].length&&(s[_].length=S+1)}for(const _ of this.uniforms){f(_.group,_.binding);const S=s[_.group];S[_.binding]=_}for(const _ of this.storage){f(_.group,_.binding);const S=s[_.group];S[_.binding]=_}for(const _ of this.textures){f(_.group,_.binding);const S=s[_.group];S[_.binding]=_}for(const _ of this.samplers){f(_.group,_.binding);const S=s[_.group];S[_.binding]=_}return s}_getOutputs(s,f=void 0){if(f===void 0&&(f=[]),s instanceof Struct)this._getStructOutputs(s,f);else{const _=this._getOutputInfo(s);_!==null&&f.push(_)}return f}_getStructOutputs(s,f){for(const _ of s.members)if(_.type instanceof Struct)this._getStructOutputs(_.type,f);else{const S=this._getAttribute(_,"location")||this._getAttribute(_,"builtin");if(S!==null){const T=this._getTypeInfo(_.type,_.type.attributes),F=this._parseInt(S.value),M=new OutputInfo(_.name,T,S.name,F);f.push(M)}}}_getOutputInfo(s){const f=this._getAttribute(s,"location")||this._getAttribute(s,"builtin");if(f!==null){const _=this._getTypeInfo(s,s.attributes),S=this._parseInt(f.value);return new OutputInfo("",_,f.name,S)}return null}_getInputs(s,f=void 0){f===void 0&&(f=[]);for(const _ of s)if(_.type instanceof Struct)this._getStructInputs(_.type,f);else{const S=this._getInputInfo(_);S!==null&&f.push(S)}return f}_getStructInputs(s,f){for(const _ of s.members)if(_.type instanceof Struct)this._getStructInputs(_.type,f);else{const S=this._getInputInfo(_);S!==null&&f.push(S)}}_getInputInfo(s){const f=this._getAttribute(s,"location")||this._getAttribute(s,"builtin");if(f!==null){const _=this._getAttribute(s,"interpolation"),S=this._getTypeInfo(s.type,s.attributes),T=this._parseInt(f.value),F=new InputInfo(s.name,S,f.name,T);return _!==null&&(F.interpolation=this._parseString(_.value)),F}return null}_parseString(s){return s instanceof Array&&(s=s[0]),s}_parseInt(s){s instanceof Array&&(s=s[0]);const f=parseInt(s);return isNaN(f)?s:f}_getAlias(s){for(const f of this.aliases)if(f.name==s)return f.type;return null}_getAliasInfo(s){return new AliasInfo(s.name,this._getTypeInfo(s.type,null))}_getTypeInfo(s,f){if(this._types.has(s))return this._types.get(s);if(s instanceof ArrayType){const S=s,T=this._getTypeInfo(S.format,S.attributes),F=new ArrayInfo(S.name,f);return F.format=T,F.count=S.count,this._types.set(s,F),this._updateTypeInfo(F),F}if(s instanceof Struct){const S=s,T=new StructInfo(S.name,f);T.startLine=S.startLine,T.endLine=S.endLine;for(const F of S.members){const M=this._getTypeInfo(F.type,F.attributes);T.members.push(new MemberInfo(F.name,M,F.attributes))}return this._types.set(s,T),this._updateTypeInfo(T),T}if(s instanceof SamplerType){const S=s,T=S.format instanceof Type$1,F=S.format?T?this._getTypeInfo(S.format,null):new TypeInfo(S.format,null):null,M=new TemplateInfo(S.name,F,f,S.access);return this._types.set(s,M),this._updateTypeInfo(M),M}if(s instanceof TemplateType){const S=s,T=S.format?this._getTypeInfo(S.format,null):null,F=new TemplateInfo(S.name,T,f,S.access);return this._types.set(s,F),this._updateTypeInfo(F),F}const _=new TypeInfo(s.name,f);return this._types.set(s,_),this._updateTypeInfo(_),_}_updateTypeInfo(s){var f,_;const S=this._getTypeSize(s);if(s.size=(f=S==null?void 0:S.size)!==null&&f!==void 0?f:0,s instanceof ArrayInfo){const T=this._getTypeSize(s.format);s.stride=(_=T==null?void 0:T.size)!==null&&_!==void 0?_:0,this._updateTypeInfo(s.format)}s instanceof StructInfo&&this._updateStructInfo(s)}_updateStructInfo(s){var f;let _=0,S=0,T=0,F=0;for(let M=0,P=s.members.length;M<P;++M){const H=s.members[M],J=this._getTypeSize(H);if(!J)continue;(f=this._getAlias(H.type.name))!==null&&f!==void 0||H.type;const K=J.align,oe=J.size;_=this._roundUp(K,_+S),S=oe,T=_,F=Math.max(F,K),H.offset=_,H.size=oe,this._updateTypeInfo(H.type)}s.size=this._roundUp(F,T+S),s.align=F}_getTypeSize(s){var f,_;if(s==null)return null;const S=this._getAttributeNum(s.attributes,"size",0),T=this._getAttributeNum(s.attributes,"align",0);if(s instanceof MemberInfo&&(s=s.type),s instanceof TypeInfo){const F=this._getAlias(s.name);F!==null&&(s=F)}{const F=WgslReflect._typeInfo[s.name];if(F!==void 0){const M=((f=s.format)===null||f===void 0?void 0:f.name)==="f16"?2:1;return new _TypeSize(Math.max(T,F.align/M),Math.max(S,F.size/M))}}{const F=WgslReflect._typeInfo[s.name.substring(0,s.name.length-1)];if(F){const M=s.name[s.name.length-1]==="h"?2:1;return new _TypeSize(Math.max(T,F.align/M),Math.max(S,F.size/M))}}if(s instanceof ArrayInfo){let F=s,M=8,P=8;const H=this._getTypeSize(F.format);H!==null&&(P=H.size,M=H.align);const J=F.count,K=this._getAttributeNum((_=s==null?void 0:s.attributes)!==null&&_!==void 0?_:null,"stride",this._roundUp(M,P));return P=J*K,S&&(P=S),new _TypeSize(Math.max(T,M),Math.max(S,P))}if(s instanceof StructInfo){let F=0,M=0,P=0,H=0,J=0;for(const K of s.members){const oe=this._getTypeSize(K.type);oe!==null&&(F=Math.max(oe.align,F),P=this._roundUp(oe.align,P+H),H=oe.size,J=P)}return M=this._roundUp(F,J+H),new _TypeSize(Math.max(T,F),Math.max(S,M))}return null}_isUniformVar(s){return s instanceof Var&&s.storage=="uniform"}_isStorageVar(s){return s instanceof Var&&s.storage=="storage"}_isTextureVar(s){return s instanceof Var&&s.type!==null&&WgslReflect._textureTypes.indexOf(s.type.name)!=-1}_isSamplerVar(s){return s instanceof Var&&s.type!==null&&WgslReflect._samplerTypes.indexOf(s.type.name)!=-1}_getAttribute(s,f){const _=s;if(!_||!_.attributes)return null;const S=_.attributes;for(let T of S)if(T.name==f)return T;return null}_getAttributeNum(s,f,_){if(s===null)return _;for(let S of s)if(S.name==f){let T=S!==null&&S.value!==null?S.value:_;return T instanceof Array&&(T=T[0]),typeof T=="number"?T:typeof T=="string"?parseInt(T):_}return _}_roundUp(s,f){return Math.ceil(f/s)*s}}WgslReflect._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}};WgslReflect._textureTypes=TokenTypes.any_texture_type.map(d=>d.name);WgslReflect._samplerTypes=TokenTypes.sampler_type.map(d=>d.name);function getShaderLayoutFromWGSL(d){var T;const s={attributes:[],bindings:[]};let f;try{f=parseWGSL(d)}catch(F){return log.error(F.message)(),s}for(const F of f.uniforms){const M=[];for(const P of((T=F.type)==null?void 0:T.members)||[])M.push({name:P.name,type:getType$1(P.type)});s.bindings.push({type:"uniform",name:F.name,location:F.binding,group:F.group,members:M})}const _=f.entry.vertex[0],S=(_==null?void 0:_.inputs.length)||0;for(let F=0;F<S;F++){const M=_.inputs[F];if(M.locationType==="location"){const P=getType$1(M.type);s.attributes.push({name:M.name,location:Number(M.location),type:P})}}return s}function getType$1(d){return d.format?`${d.name}<${d.format.name}>`:d.name}function parseWGSL(d){try{return new WgslReflect(d)}catch(s){if(s instanceof Error)throw s;let f="WGSL parse error";throw typeof s=="object"&&(s!=null&&s.message)&&(f+=`: ${s.message} `),typeof s=="object"&&(s!=null&&s.token)&&(f+=s.token.line||""),new Error(f,{cause:s})}}const fp32shader=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;
const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;
const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;
const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;
float sin_taylor_fp32(float a) {
float r, s, t, x;
if (a == 0.0) {
return 0.0;
}
x = -a * a;
s = a;
r = a;
r = r * x;
t = r * INVERSE_FACTORIAL_3;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_5;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_7;
s = s + t;
r = r * x;
t = r * INVERSE_FACTORIAL_9;
s = s + t;
return s;
}
void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
if (a == 0.0) {
sin_t = 0.0;
cos_t = 1.0;
}
sin_t = sin_taylor_fp32(a);
cos_t = sqrt(1.0 - sin_t * sin_t);
}
float tan_taylor_fp32(float a) {
float sin_a;
float cos_a;
if (a == 0.0) {
return 0.0;
}
float z = floor(a / TWO_PI);
float r = a - TWO_PI * z;
float t;
float q = floor(r / PI_2 + 0.5);
int j = int(q);
if (j < -2 || j > 2) {
return 1.0 / 0.0;
}
t = r - PI_2 * q;
q = floor(t / PI_16 + 0.5);
int k = int(q);
int abs_k = int(abs(float(k)));
if (abs_k > 4) {
return 1.0 / 0.0;
} else {
t = t - PI_16 * q;
}
float u = 0.0;
float v = 0.0;
float sin_t, cos_t;
float s, c;
sincos_taylor_fp32(t, sin_t, cos_t);
if (k == 0) {
s = sin_t;
c = cos_t;
} else {
if (abs(float(abs_k) - 1.0) < 0.5) {
u = COS_TABLE_0;
v = SIN_TABLE_0;
} else if (abs(float(abs_k) - 2.0) < 0.5) {
u = COS_TABLE_1;
v = SIN_TABLE_1;
} else if (abs(float(abs_k) - 3.0) < 0.5) {
u = COS_TABLE_2;
v = SIN_TABLE_2;
} else if (abs(float(abs_k) - 4.0) < 0.5) {
u = COS_TABLE_3;
v = SIN_TABLE_3;
}
if (k > 0) {
s = u * sin_t + v * cos_t;
c = u * cos_t - v * sin_t;
} else {
s = u * sin_t - v * cos_t;
c = u * cos_t + v * sin_t;
}
}
if (j == 0) {
sin_a = s;
cos_a = c;
} else if (j == 1) {
sin_a = c;
cos_a = -s;
} else if (j == -1) {
sin_a = -c;
cos_a = s;
} else {
sin_a = -s;
cos_a = -c;
}
return sin_a / cos_a;
}
#endif
float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
return tan_taylor_fp32(a);
#else
return tan(a);
#endif
}
`,fp32={name:"fp32",vs:fp32shader},DEFAULT_HIGHLIGHT_COLOR=[0,1,1,1],vs$e=`uniform pickingUniforms {
float isActive;
float isAttribute;
float isHighlightActive;
float useFloatColors;
vec3 highlightedObjectColor;
vec4 highlightColor;
} picking;
out vec4 picking_vRGBcolor_Avalid;
vec3 picking_normalizeColor(vec3 color) {
return picking.useFloatColors > 0.5 ? color : color / 255.0;
}
vec4 picking_normalizeColor(vec4 color) {
return picking.useFloatColors > 0.5 ? color : color / 255.0;
}
bool picking_isColorZero(vec3 color) {
return dot(color, vec3(1.0)) < 0.00001;
}
bool picking_isColorValid(vec3 color) {
return dot(color, vec3(1.0)) > 0.00001;
}
bool isVertexHighlighted(vec3 vertexColor) {
vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);
return
bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));
}
void picking_setPickingColor(vec3 pickingColor) {
pickingColor = picking_normalizeColor(pickingColor);
if (bool(picking.isActive)) {
picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));
if (!bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rgb = pickingColor;
}
} else {
picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));
}
}
void picking_setPickingAttribute(float value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.r = value;
}
}
void picking_setPickingAttribute(vec2 value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rg = value;
}
}
void picking_setPickingAttribute(vec3 value) {
if (bool(picking.isAttribute)) {
picking_vRGBcolor_Avalid.rgb = value;
}
}
`,fs$g=`uniform pickingUniforms {
float isActive;
float isAttribute;
float isHighlightActive;
float useFloatColors;
vec3 highlightedObjectColor;
vec4 highlightColor;
} picking;
in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
if (picking.isActive > 0.5) {
return color;
}
bool selected = bool(picking_vRGBcolor_Avalid.a);
if (selected) {
float highLightAlpha = picking.highlightColor.a;
float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
float highLightRatio = highLightAlpha / blendedAlpha;
vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);
return vec4(blendedRGB, blendedAlpha);
} else {
return color;
}
}
vec4 picking_filterPickingColor(vec4 color) {
if (bool(picking.isActive)) {
if (picking_vRGBcolor_Avalid.a == 0.0) {
discard;
}
return picking_vRGBcolor_Avalid;
}
return color;
}
vec4 picking_filterColor(vec4 color) {
vec4 highlightColor = picking_filterHighlightColor(color);
return picking_filterPickingColor(highlightColor);
}
`,picking$1={name:"picking",vs:vs$e,fs:fs$g,uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:DEFAULT_HIGHLIGHT_COLOR},getUniforms:getUniforms$4};function getUniforms$4(d={},s){const f={};if(d.highlightedObjectColor!==void 0)if(d.highlightedObjectColor===null)f.isHighlightActive=!1;else{f.isHighlightActive=!0;const _=d.highlightedObjectColor.slice(0,3);f.highlightedObjectColor=_}if(d.highlightColor){const _=Array.from(d.highlightColor,S=>S/255);Number.isFinite(_[3])||(_[3]=1),f.highlightColor=_}return d.isActive!==void 0&&(f.isActive=!!d.isActive,f.isAttribute=!!d.isAttribute),d.useFloatColors!==void 0&&(f.useFloatColors=!!d.useFloatColors),f}function fp64ify(d,s=[],f=0){const _=Math.fround(d),S=d-_;return s[f]=_,s[f+1]=S,s}function fp64LowPart$1(d){return d-Math.fround(d)}function fp64ifyMatrix4(d){const s=new Float32Array(32);for(let f=0;f<4;++f)for(let _=0;_<4;++_){const S=f*4+_;fp64ify(d[_*4+f],s,S*2)}return s}const fp64arithmeticShader=`uniform float ONE;
vec2 split(float a) {
const float SPLIT = 4097.0;
float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float a_hi = t * ONE - (t - a);
float a_lo = a * ONE - a_hi;
#else
float a_hi = t - (t - a);
float a_lo = a - a_hi;
#endif
return vec2(a_hi, a_lo);
}
vec2 split2(vec2 a) {
vec2 b = split(a.x);
b.y += a.y;
return b;
}
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float sum = (a + b) * ONE;
float err = b - (sum - a) * ONE;
#else
float sum = a + b;
float err = b - (sum - a);
#endif
return vec2(sum, err);
}
vec2 twoSum(float a, float b) {
float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float v = (s * ONE - a) * ONE;
float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);
#else
float v = s - a;
float err = (a - (s - v)) + (b - v);
#endif
return vec2(s, err);
}
vec2 twoSub(float a, float b) {
float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float v = (s * ONE - a) * ONE;
float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);
#else
float v = s - a;
float err = (a - (s - v)) - (b + v);
#endif
return vec2(s, err);
}
vec2 twoSqr(float a) {
float prod = a * a;
vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *
a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;
#else
float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
return vec2(prod, err);
}
vec2 twoProd(float a, float b) {
float prod = a * b;
vec2 a_fp64 = split(a);
vec2 b_fp64 = split(b);
float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
return vec2(prod, err);
}
vec2 sum_fp64(vec2 a, vec2 b) {
vec2 s, t;
s = twoSum(a.x, b.x);
t = twoSum(a.y, b.y);
s.y += t.x;
s = quickTwoSum(s.x, s.y);
s.y += t.y;
s = quickTwoSum(s.x, s.y);
return s;
}
vec2 sub_fp64(vec2 a, vec2 b) {
vec2 s, t;
s = twoSub(a.x, b.x);
t = twoSub(a.y, b.y);
s.y += t.x;
s = quickTwoSum(s.x, s.y);
s.y += t.y;
s = quickTwoSum(s.x, s.y);
return s;
}
vec2 mul_fp64(vec2 a, vec2 b) {
vec2 prod = twoProd(a.x, b.x);
prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
prod = split2(prod);
#endif
prod = quickTwoSum(prod.x, prod.y);
prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
prod = split2(prod);
#endif
prod = quickTwoSum(prod.x, prod.y);
return prod;
}
vec2 div_fp64(vec2 a, vec2 b) {
float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
vec2 yn = a * xn;
#endif
float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
vec2 prod = twoProd(xn, diff);
return sum_fp64(yn, prod);
}
vec2 sqrt_fp64(vec2 a) {
if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);
float x = 1.0 / sqrt(a.x);
float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
vec2 yn_sqr = twoSqr(yn) * ONE;
#else
vec2 yn_sqr = twoSqr(yn);
#endif
float diff = sub_fp64(a, yn_sqr).x;
vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
return sum_fp64(split(yn), prod);
#else
return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`,CONST_UNIFORMS={ONE:1};function getUniforms$3(){return CONST_UNIFORMS}const fp64arithmetic={name:"fp64-arithmetic",vs:fp64arithmeticShader,getUniforms:getUniforms$3,fp64ify,fp64LowPart:fp64LowPart$1,fp64ifyMatrix4},DEFAULT_CONFIG={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...DEFAULT_CONFIG}};const config=globalThis.mathgl.config;function formatValue(d,{precision:s=config.precision}={}){return d=round(d),`${parseFloat(d.toPrecision(s))}`}function isArray$3(d){return Array.isArray(d)||ArrayBuffer.isView(d)&&!(d instanceof DataView)}function clamp$3(d,s,f){return map$2(d,_=>Math.max(s,Math.min(f,_)))}function lerp$6(d,s,f){return isArray$3(d)?d.map((_,S)=>lerp$6(_,s[S],f)):f*s+(1-f)*d}function equals$2(d,s,f){const _=config.EPSILON;try{if(d===s)return!0;if(isArray$3(d)&&isArray$3(s)){if(d.length!==s.length)return!1;for(let S=0;S<d.length;++S)if(!equals$2(d[S],s[S]))return!1;return!0}return d&&d.equals?d.equals(s):s&&s.equals?s.equals(d):typeof d=="number"&&typeof s=="number"?Math.abs(d-s)<=config.EPSILON*Math.max(1,Math.abs(d),Math.abs(s)):!1}finally{config.EPSILON=_}}function round(d){return Math.round(d/config.EPSILON)*config.EPSILON}function duplicateArray(d){return d.clone?d.clone():new Array(d.length)}function map$2(d,s,f){if(isArray$3(d)){const _=d;f=f||duplicateArray(_);for(let S=0;S<f.length&&S<_.length;++S){const T=typeof d=="number"?d:d[S];f[S]=s(T,S,f)}return f}return s(d)}class MathArray extends Array{clone(){return new this.constructor().copy(this)}fromArray(s,f=0){for(let _=0;_<this.ELEMENTS;++_)this[_]=s[_+f];return this.check()}toArray(s=[],f=0){for(let _=0;_<this.ELEMENTS;++_)s[f+_]=this[_];return s}toObject(s){return s}from(s){return Array.isArray(s)?this.copy(s):this.fromObject(s)}to(s){return s===this?this:isArray$3(s)?this.toArray(s):this.toObject(s)}toTarget(s){return s?this.to(s):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(config)}formatString(s){let f="";for(let _=0;_<this.ELEMENTS;++_)f+=(_>0?", ":"")+formatValue(this[_],s);return`${s.printTypes?this.constructor.name:""}[${f}]`}equals(s){if(!s||this.length!==s.length)return!1;for(let f=0;f<this.ELEMENTS;++f)if(!equals$2(this[f],s[f]))return!1;return!0}exactEquals(s){if(!s||this.length!==s.length)return!1;for(let f=0;f<this.ELEMENTS;++f)if(this[f]!==s[f])return!1;return!0}negate(){for(let s=0;s<this.ELEMENTS;++s)this[s]=-this[s];return this.check()}lerp(s,f,_){if(_===void 0)return this.lerp(this,s,f);for(let S=0;S<this.ELEMENTS;++S){const T=s[S],F=typeof f=="number"?f:f[S];this[S]=T+_*(F-T)}return this.check()}min(s){for(let f=0;f<this.ELEMENTS;++f)this[f]=Math.min(s[f],this[f]);return this.check()}max(s){for(let f=0;f<this.ELEMENTS;++f)this[f]=Math.max(s[f],this[f]);return this.check()}clamp(s,f){for(let _=0;_<this.ELEMENTS;++_)this[_]=Math.min(Math.max(this[_],s[_]),f[_]);return this.check()}add(...s){for(const f of s)for(let _=0;_<this.ELEMENTS;++_)this[_]+=f[_];return this.check()}subtract(...s){for(const f of s)for(let _=0;_<this.ELEMENTS;++_)this[_]-=f[_];return this.check()}scale(s){if(typeof s=="number")for(let f=0;f<this.ELEMENTS;++f)this[f]*=s;else for(let f=0;f<this.ELEMENTS&&f<s.length;++f)this[f]*=s[f];return this.check()}multiplyByScalar(s){for(let f=0;f<this.ELEMENTS;++f)this[f]*=s;return this.check()}check(){if(config.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let s=this.length===this.ELEMENTS;for(let f=0;f<this.ELEMENTS;++f)s=s&&Number.isFinite(this[f]);return s}sub(s){return this.subtract(s)}setScalar(s){for(let f=0;f<this.ELEMENTS;++f)this[f]=s;return this.check()}addScalar(s){for(let f=0;f<this.ELEMENTS;++f)this[f]+=s;return this.check()}subScalar(s){return this.addScalar(-s)}multiplyScalar(s){for(let f=0;f<this.ELEMENTS;++f)this[f]*=s;return this.check()}divideScalar(s){return this.multiplyByScalar(1/s)}clampScalar(s,f){for(let _=0;_<this.ELEMENTS;++_)this[_]=Math.min(Math.max(this[_],s),f);return this.check()}get elements(){return this}}function validateVector(d,s){if(d.length!==s)return!1;for(let f=0;f<d.length;++f)if(!Number.isFinite(d[f]))return!1;return!0}function checkNumber(d){if(!Number.isFinite(d))throw new Error(`Invalid number ${JSON.stringify(d)}`);return d}function checkVector(d,s,f=""){if(config.debug&&!validateVector(d,s))throw new Error(`math.gl: ${f} some fields set to invalid numbers'`);return d}function assert$4(d,s){if(!d)throw new Error(`math.gl assertion ${s}`)}class Vector extends MathArray{get x(){return this[0]}set x(s){this[0]=checkNumber(s)}get y(){return this[1]}set y(s){this[1]=checkNumber(s)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let s=0;for(let f=0;f<this.ELEMENTS;++f)s+=this[f]*this[f];return s}magnitudeSquared(){return this.lengthSquared()}distance(s){return Math.sqrt(this.distanceSquared(s))}distanceSquared(s){let f=0;for(let _=0;_<this.ELEMENTS;++_){const S=this[_]-s[_];f+=S*S}return checkNumber(f)}dot(s){let f=0;for(let _=0;_<this.ELEMENTS;++_)f+=this[_]*s[_];return checkNumber(f)}normalize(){const s=this.magnitude();if(s!==0)for(let f=0;f<this.ELEMENTS;++f)this[f]/=s;return this.check()}multiply(...s){for(const f of s)for(let _=0;_<this.ELEMENTS;++_)this[_]*=f[_];return this.check()}divide(...s){for(const f of s)for(let _=0;_<this.ELEMENTS;++_)this[_]/=f[_];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(s){return this.distance(s)}distanceToSquared(s){return this.distanceSquared(s)}getComponent(s){return assert$4(s>=0&&s<this.ELEMENTS,"index is out of range"),checkNumber(this[s])}setComponent(s,f){return assert$4(s>=0&&s<this.ELEMENTS,"index is out of range"),this[s]=f,this.check()}addVectors(s,f){return this.copy(s).add(f)}subVectors(s,f){return this.copy(s).subtract(f)}multiplyVectors(s,f){return this.copy(s).multiply(f)}addScaledVector(s,f){return this.add(new this.constructor(s).multiplyScalar(f))}}const EPSILON$2=1e-6;let ARRAY_TYPE$1=typeof Float32Array<"u"?Float32Array:Array;function create$9(){const d=new ARRAY_TYPE$1(2);return ARRAY_TYPE$1!=Float32Array&&(d[0]=0,d[1]=0),d}function add$7(d,s,f){return d[0]=s[0]+f[0],d[1]=s[1]+f[1],d}function negate$3(d,s){return d[0]=-s[0],d[1]=-s[1],d}function lerp$5(d,s,f,_){const S=s[0],T=s[1];return d[0]=S+_*(f[0]-S),d[1]=T+_*(f[1]-T),d}function transformMat3$1(d,s,f){const _=s[0],S=s[1];return d[0]=f[0]*_+f[3]*S+f[6],d[1]=f[1]*_+f[4]*S+f[7],d}function transformMat4$3(d,s,f){const _=s[0],S=s[1];return d[0]=f[0]*_+f[4]*S+f[12],d[1]=f[1]*_+f[5]*S+f[13],d}(function(){const d=create$9();return function(s,f,_,S,T,F){let M,P;for(f||(f=2),_||(_=0),S?P=Math.min(S*f+_,s.length):P=s.length,M=_;M<P;M+=f)d[0]=s[M],d[1]=s[M+1],T(d,d,F),s[M]=d[0],s[M+1]=d[1];return s}})();function vec2_transformMat4AsVector(d,s,f){const _=s[0],S=s[1],T=f[3]*_+f[7]*S||1;return d[0]=(f[0]*_+f[4]*S)/T,d[1]=(f[1]*_+f[5]*S)/T,d}function vec3_transformMat4AsVector(d,s,f){const _=s[0],S=s[1],T=s[2],F=f[3]*_+f[7]*S+f[11]*T||1;return d[0]=(f[0]*_+f[4]*S+f[8]*T)/F,d[1]=(f[1]*_+f[5]*S+f[9]*T)/F,d[2]=(f[2]*_+f[6]*S+f[10]*T)/F,d}function vec3_transformMat2(d,s,f){const _=s[0],S=s[1];return d[0]=f[0]*_+f[2]*S,d[1]=f[1]*_+f[3]*S,d[2]=s[2],d}function vec4_transformMat2(d,s,f){const _=s[0],S=s[1];return d[0]=f[0]*_+f[2]*S,d[1]=f[1]*_+f[3]*S,d[2]=s[2],d[3]=s[3],d}function vec4_transformMat3(d,s,f){const _=s[0],S=s[1],T=s[2];return d[0]=f[0]*_+f[3]*S+f[6]*T,d[1]=f[1]*_+f[4]*S+f[7]*T,d[2]=f[2]*_+f[5]*S+f[8]*T,d[3]=s[3],d}function create$8(){const d=new ARRAY_TYPE$1(3);return ARRAY_TYPE$1!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d}function length$3(d){const s=d[0],f=d[1],_=d[2];return Math.sqrt(s*s+f*f+_*_)}function fromValues(d,s,f){const _=new ARRAY_TYPE$1(3);return _[0]=d,_[1]=s,_[2]=f,_}function subtract(d,s,f){return d[0]=s[0]-f[0],d[1]=s[1]-f[1],d[2]=s[2]-f[2],d}function squaredLength$2(d){const s=d[0],f=d[1],_=d[2];return s*s+f*f+_*_}function negate$2(d,s){return d[0]=-s[0],d[1]=-s[1],d[2]=-s[2],d}function normalize$5(d,s){const f=s[0],_=s[1],S=s[2];let T=f*f+_*_+S*S;return T>0&&(T=1/Math.sqrt(T)),d[0]=s[0]*T,d[1]=s[1]*T,d[2]=s[2]*T,d}function dot$3(d,s){return d[0]*s[0]+d[1]*s[1]+d[2]*s[2]}function cross(d,s,f){const _=s[0],S=s[1],T=s[2],F=f[0],M=f[1],P=f[2];return d[0]=S*P-T*M,d[1]=T*F-_*P,d[2]=_*M-S*F,d}function lerp$4(d,s,f,_){const S=s[0],T=s[1],F=s[2];return d[0]=S+_*(f[0]-S),d[1]=T+_*(f[1]-T),d[2]=F+_*(f[2]-F),d}function transformMat4$2(d,s,f){const _=s[0],S=s[1],T=s[2];let F=f[3]*_+f[7]*S+f[11]*T+f[15];return F=F||1,d[0]=(f[0]*_+f[4]*S+f[8]*T+f[12])/F,d[1]=(f[1]*_+f[5]*S+f[9]*T+f[13])/F,d[2]=(f[2]*_+f[6]*S+f[10]*T+f[14])/F,d}function transformMat3(d,s,f){const _=s[0],S=s[1],T=s[2];return d[0]=_*f[0]+S*f[3]+T*f[6],d[1]=_*f[1]+S*f[4]+T*f[7],d[2]=_*f[2]+S*f[5]+T*f[8],d}function transformQuat$1(d,s,f){const _=f[0],S=f[1],T=f[2],F=f[3],M=s[0],P=s[1],H=s[2];let J=S*H-T*P,K=T*M-_*H,oe=_*P-S*M,se=S*oe-T*K,ae=T*J-_*oe,ge=_*K-S*J;const he=F*2;return J*=he,K*=he,oe*=he,se*=2,ae*=2,ge*=2,d[0]=M+J+se,d[1]=P+K+ae,d[2]=H+oe+ge,d}function rotateX$3(d,s,f,_){const S=[],T=[];return S[0]=s[0]-f[0],S[1]=s[1]-f[1],S[2]=s[2]-f[2],T[0]=S[0],T[1]=S[1]*Math.cos(_)-S[2]*Math.sin(_),T[2]=S[1]*Math.sin(_)+S[2]*Math.cos(_),d[0]=T[0]+f[0],d[1]=T[1]+f[1],d[2]=T[2]+f[2],d}function rotateY$2(d,s,f,_){const S=[],T=[];return S[0]=s[0]-f[0],S[1]=s[1]-f[1],S[2]=s[2]-f[2],T[0]=S[2]*Math.sin(_)+S[0]*Math.cos(_),T[1]=S[1],T[2]=S[2]*Math.cos(_)-S[0]*Math.sin(_),d[0]=T[0]+f[0],d[1]=T[1]+f[1],d[2]=T[2]+f[2],d}function rotateZ$3(d,s,f,_){const S=[],T=[];return S[0]=s[0]-f[0],S[1]=s[1]-f[1],S[2]=s[2]-f[2],T[0]=S[0]*Math.cos(_)-S[1]*Math.sin(_),T[1]=S[0]*Math.sin(_)+S[1]*Math.cos(_),T[2]=S[2],d[0]=T[0]+f[0],d[1]=T[1]+f[1],d[2]=T[2]+f[2],d}function angle(d,s){const f=d[0],_=d[1],S=d[2],T=s[0],F=s[1],M=s[2],P=Math.sqrt((f*f+_*_+S*S)*(T*T+F*F+M*M)),H=P&&dot$3(d,s)/P;return Math.acos(Math.min(Math.max(H,-1),1))}const sub=subtract,len=length$3,sqrLen=squaredLength$2;(function(){const d=create$8();return function(s,f,_,S,T,F){let M,P;for(f||(f=3),_||(_=0),S?P=Math.min(S*f+_,s.length):P=s.length,M=_;M<P;M+=f)d[0]=s[M],d[1]=s[M+1],d[2]=s[M+2],T(d,d,F),s[M]=d[0],s[M+1]=d[1],s[M+2]=d[2];return s}})();const ORIGIN=[0,0,0];let ZERO$2;class Vector3 extends Vector{static get ZERO(){return ZERO$2||(ZERO$2=new Vector3(0,0,0),Object.freeze(ZERO$2)),ZERO$2}constructor(s=0,f=0,_=0){super(-0,-0,-0),arguments.length===1&&isArray$3(s)?this.copy(s):(config.debug&&(checkNumber(s),checkNumber(f),checkNumber(_)),this[0]=s,this[1]=f,this[2]=_)}set(s,f,_){return this[0]=s,this[1]=f,this[2]=_,this.check()}copy(s){return this[0]=s[0],this[1]=s[1],this[2]=s[2],this.check()}fromObject(s){return config.debug&&(checkNumber(s.x),checkNumber(s.y),checkNumber(s.z)),this[0]=s.x,this[1]=s.y,this[2]=s.z,this.check()}toObject(s){return s.x=this[0],s.y=this[1],s.z=this[2],s}get ELEMENTS(){return 3}get z(){return this[2]}set z(s){this[2]=checkNumber(s)}angle(s){return angle(this,s)}cross(s){return cross(this,this,s),this.check()}rotateX({radians:s,origin:f=ORIGIN}){return rotateX$3(this,this,f,s),this.check()}rotateY({radians:s,origin:f=ORIGIN}){return rotateY$2(this,this,f,s),this.check()}rotateZ({radians:s,origin:f=ORIGIN}){return rotateZ$3(this,this,f,s),this.check()}transform(s){return this.transformAsPoint(s)}transformAsPoint(s){return transformMat4$2(this,this,s),this.check()}transformAsVector(s){return vec3_transformMat4AsVector(this,this,s),this.check()}transformByMatrix3(s){return transformMat3(this,this,s),this.check()}transformByMatrix2(s){return vec3_transformMat2(this,this,s),this.check()}transformByQuaternion(s){return transformQuat$1(this,this,s),this.check()}}let ZERO$1;class Vector4 extends Vector{static get ZERO(){return ZERO$1||(ZERO$1=new Vector4(0,0,0,0),Object.freeze(ZERO$1)),ZERO$1}constructor(s=0,f=0,_=0,S=0){super(-0,-0,-0,-0),isArray$3(s)&&arguments.length===1?this.copy(s):(config.debug&&(checkNumber(s),checkNumber(f),checkNumber(_),checkNumber(S)),this[0]=s,this[1]=f,this[2]=_,this[3]=S)}set(s,f,_,S){return this[0]=s,this[1]=f,this[2]=_,this[3]=S,this.check()}copy(s){return this[0]=s[0],this[1]=s[1],this[2]=s[2],this[3]=s[3],this.check()}fromObject(s){return config.debug&&(checkNumber(s.x),checkNumber(s.y),checkNumber(s.z),checkNumber(s.w)),this[0]=s.x,this[1]=s.y,this[2]=s.z,this[3]=s.w,this}toObject(s){return s.x=this[0],s.y=this[1],s.z=this[2],s.w=this[3],s}get ELEMENTS(){return 4}get z(){return this[2]}set z(s){this[2]=checkNumber(s)}get w(){return this[3]}set w(s){this[3]=checkNumber(s)}transform(s){return transformMat4$2(this,this,s),this.check()}transformByMatrix3(s){return vec4_transformMat3(this,this,s),this.check()}transformByMatrix2(s){return vec4_transformMat2(this,this,s),this.check()}transformByQuaternion(s){return transformQuat$1(this,this,s),this.check()}applyMatrix4(s){return s.transform(this,this),this}}class Matrix extends MathArray{toString(){let s="[";if(config.printRowMajor){s+="row-major:";for(let f=0;f<this.RANK;++f)for(let _=0;_<this.RANK;++_)s+=` ${this[_*this.RANK+f]}`}else{s+="column-major:";for(let f=0;f<this.ELEMENTS;++f)s+=` ${this[f]}`}return s+="]",s}getElementIndex(s,f){return f*this.RANK+s}getElement(s,f){return this[f*this.RANK+s]}setElement(s,f,_){return this[f*this.RANK+s]=checkNumber(_),this}getColumn(s,f=new Array(this.RANK).fill(-0)){const _=s*this.RANK;for(let S=0;S<this.RANK;++S)f[S]=this[_+S];return f}setColumn(s,f){const _=s*this.RANK;for(let S=0;S<this.RANK;++S)this[_+S]=f[S];return this}}function create$7(){const d=new ARRAY_TYPE$1(9);return ARRAY_TYPE$1!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d}function transpose$1(d,s){if(d===s){const f=s[1],_=s[2],S=s[5];d[1]=s[3],d[2]=s[6],d[3]=f,d[5]=s[7],d[6]=_,d[7]=S}else d[0]=s[0],d[1]=s[3],d[2]=s[6],d[3]=s[1],d[4]=s[4],d[5]=s[7],d[6]=s[2],d[7]=s[5],d[8]=s[8];return d}function invert$3(d,s){const f=s[0],_=s[1],S=s[2],T=s[3],F=s[4],M=s[5],P=s[6],H=s[7],J=s[8],K=J*F-M*H,oe=-J*T+M*P,se=H*T-F*P;let ae=f*K+_*oe+S*se;return ae?(ae=1/ae,d[0]=K*ae,d[1]=(-J*_+S*H)*ae,d[2]=(M*_-S*F)*ae,d[3]=oe*ae,d[4]=(J*f-S*P)*ae,d[5]=(-M*f+S*T)*ae,d[6]=se*ae,d[7]=(-H*f+_*P)*ae,d[8]=(F*f-_*T)*ae,d):null}function determinant$1(d){const s=d[0],f=d[1],_=d[2],S=d[3],T=d[4],F=d[5],M=d[6],P=d[7],H=d[8];return s*(H*T-F*P)+f*(-H*S+F*M)+_*(P*S-T*M)}function multiply$4(d,s,f){const _=s[0],S=s[1],T=s[2],F=s[3],M=s[4],P=s[5],H=s[6],J=s[7],K=s[8],oe=f[0],se=f[1],ae=f[2],ge=f[3],he=f[4],Be=f[5],pe=f[6],be=f[7],Re=f[8];return d[0]=oe*_+se*F+ae*H,d[1]=oe*S+se*M+ae*J,d[2]=oe*T+se*P+ae*K,d[3]=ge*_+he*F+Be*H,d[4]=ge*S+he*M+Be*J,d[5]=ge*T+he*P+Be*K,d[6]=pe*_+be*F+Re*H,d[7]=pe*S+be*M+Re*J,d[8]=pe*T+be*P+Re*K,d}function translate$3(d,s,f){const _=s[0],S=s[1],T=s[2],F=s[3],M=s[4],P=s[5],H=s[6],J=s[7],K=s[8],oe=f[0],se=f[1];return d[0]=_,d[1]=S,d[2]=T,d[3]=F,d[4]=M,d[5]=P,d[6]=oe*_+se*F+H,d[7]=oe*S+se*M+J,d[8]=oe*T+se*P+K,d}function rotate$1(d,s,f){const _=s[0],S=s[1],T=s[2],F=s[3],M=s[4],P=s[5],H=s[6],J=s[7],K=s[8],oe=Math.sin(f),se=Math.cos(f);return d[0]=se*_+oe*F,d[1]=se*S+oe*M,d[2]=se*T+oe*P,d[3]=se*F-oe*_,d[4]=se*M-oe*S,d[5]=se*P-oe*T,d[6]=H,d[7]=J,d[8]=K,d}function scale$6(d,s,f){const _=f[0],S=f[1];return d[0]=_*s[0],d[1]=_*s[1],d[2]=_*s[2],d[3]=S*s[3],d[4]=S*s[4],d[5]=S*s[5],d[6]=s[6],d[7]=s[7],d[8]=s[8],d}function fromQuat$1(d,s){const f=s[0],_=s[1],S=s[2],T=s[3],F=f+f,M=_+_,P=S+S,H=f*F,J=_*F,K=_*M,oe=S*F,se=S*M,ae=S*P,ge=T*F,he=T*M,Be=T*P;return d[0]=1-K-ae,d[3]=J-Be,d[6]=oe+he,d[1]=J+Be,d[4]=1-H-ae,d[7]=se-ge,d[2]=oe-he,d[5]=se+ge,d[8]=1-H-K,d}var INDICES$1;(function(d){d[d.COL0ROW0=0]="COL0ROW0",d[d.COL0ROW1=1]="COL0ROW1",d[d.COL0ROW2=2]="COL0ROW2",d[d.COL1ROW0=3]="COL1ROW0",d[d.COL1ROW1=4]="COL1ROW1",d[d.COL1ROW2=5]="COL1ROW2",d[d.COL2ROW0=6]="COL2ROW0",d[d.COL2ROW1=7]="COL2ROW1",d[d.COL2ROW2=8]="COL2ROW2"})(INDICES$1||(INDICES$1={}));const IDENTITY_MATRIX$2=Object.freeze([1,0,0,0,1,0,0,0,1]);class Matrix3 extends Matrix{static get IDENTITY(){return getIdentityMatrix$1()}static get ZERO(){return getZeroMatrix$1()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return INDICES$1}constructor(s,...f){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(s)?this.copy(s):f.length>0?this.copy([s,...f]):this.identity()}copy(s){return this[0]=s[0],this[1]=s[1],this[2]=s[2],this[3]=s[3],this[4]=s[4],this[5]=s[5],this[6]=s[6],this[7]=s[7],this[8]=s[8],this.check()}identity(){return this.copy(IDENTITY_MATRIX$2)}fromObject(s){return this.check()}fromQuaternion(s){return fromQuat$1(this,s),this.check()}set(s,f,_,S,T,F,M,P,H){return this[0]=s,this[1]=f,this[2]=_,this[3]=S,this[4]=T,this[5]=F,this[6]=M,this[7]=P,this[8]=H,this.check()}setRowMajor(s,f,_,S,T,F,M,P,H){return this[0]=s,this[1]=S,this[2]=M,this[3]=f,this[4]=T,this[5]=P,this[6]=_,this[7]=F,this[8]=H,this.check()}determinant(){return determinant$1(this)}transpose(){return transpose$1(this,this),this.check()}invert(){return invert$3(this,this),this.check()}multiplyLeft(s){return multiply$4(this,s,this),this.check()}multiplyRight(s){return multiply$4(this,this,s),this.check()}rotate(s){return rotate$1(this,this,s),this.check()}scale(s){return Array.isArray(s)?scale$6(this,this,s):scale$6(this,this,[s,s]),this.check()}translate(s){return translate$3(this,this,s),this.check()}transform(s,f){let _;switch(s.length){case 2:_=transformMat3$1(f||[-0,-0],s,this);break;case 3:_=transformMat3(f||[-0,-0,-0],s,this);break;case 4:_=vec4_transformMat3(f||[-0,-0,-0,-0],s,this);break;default:throw new Error("Illegal vector")}return checkVector(_,s.length),_}transformVector(s,f){return this.transform(s,f)}transformVector2(s,f){return this.transform(s,f)}transformVector3(s,f){return this.transform(s,f)}}let ZERO_MATRIX3,IDENTITY_MATRIX3=null;function getZeroMatrix$1(){return ZERO_MATRIX3||(ZERO_MATRIX3=new Matrix3([0,0,0,0,0,0,0,0,0]),Object.freeze(ZERO_MATRIX3)),ZERO_MATRIX3}function getIdentityMatrix$1(){return IDENTITY_MATRIX3||(IDENTITY_MATRIX3=new Matrix3,Object.freeze(IDENTITY_MATRIX3)),IDENTITY_MATRIX3}function identity$9(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function transpose(d,s){if(d===s){const f=s[1],_=s[2],S=s[3],T=s[6],F=s[7],M=s[11];d[1]=s[4],d[2]=s[8],d[3]=s[12],d[4]=f,d[6]=s[9],d[7]=s[13],d[8]=_,d[9]=T,d[11]=s[14],d[12]=S,d[13]=F,d[14]=M}else d[0]=s[0],d[1]=s[4],d[2]=s[8],d[3]=s[12],d[4]=s[1],d[5]=s[5],d[6]=s[9],d[7]=s[13],d[8]=s[2],d[9]=s[6],d[10]=s[10],d[11]=s[14],d[12]=s[3],d[13]=s[7],d[14]=s[11],d[15]=s[15];return d}function invert$2(d,s){const f=s[0],_=s[1],S=s[2],T=s[3],F=s[4],M=s[5],P=s[6],H=s[7],J=s[8],K=s[9],oe=s[10],se=s[11],ae=s[12],ge=s[13],he=s[14],Be=s[15],pe=f*M-_*F,be=f*P-S*F,Re=f*H-T*F,Fe=_*P-S*M,Me=_*H-T*M,ve=S*H-T*P,At=J*ge-K*ae,Ct=J*he-oe*ae,Rt=J*Be-se*ae,It=K*he-oe*ge,xt=K*Be-se*ge,wt=oe*Be-se*he;let Ft=pe*wt-be*xt+Re*It+Fe*Rt-Me*Ct+ve*At;return Ft?(Ft=1/Ft,d[0]=(M*wt-P*xt+H*It)*Ft,d[1]=(S*xt-_*wt-T*It)*Ft,d[2]=(ge*ve-he*Me+Be*Fe)*Ft,d[3]=(oe*Me-K*ve-se*Fe)*Ft,d[4]=(P*Rt-F*wt-H*Ct)*Ft,d[5]=(f*wt-S*Rt+T*Ct)*Ft,d[6]=(he*Re-ae*ve-Be*be)*Ft,d[7]=(J*ve-oe*Re+se*be)*Ft,d[8]=(F*xt-M*Rt+H*At)*Ft,d[9]=(_*Rt-f*xt-T*At)*Ft,d[10]=(ae*Me-ge*Re+Be*pe)*Ft,d[11]=(K*Re-J*Me-se*pe)*Ft,d[12]=(M*Ct-F*It-P*At)*Ft,d[13]=(f*It-_*Ct+S*At)*Ft,d[14]=(ge*be-ae*Fe-he*pe)*Ft,d[15]=(J*Fe-K*be+oe*pe)*Ft,d):null}function determinant(d){const s=d[0],f=d[1],_=d[2],S=d[3],T=d[4],F=d[5],M=d[6],P=d[7],H=d[8],J=d[9],K=d[10],oe=d[11],se=d[12],ae=d[13],ge=d[14],he=d[15],Be=s*F-f*T,pe=s*M-_*T,be=f*M-_*F,Re=H*ae-J*se,Fe=H*ge-K*se,Me=J*ge-K*ae,ve=s*Me-f*Fe+_*Re,At=T*Me-F*Fe+M*Re,Ct=H*be-J*pe+K*Be,Rt=se*be-ae*pe+ge*Be;return P*ve-S*At+he*Ct-oe*Rt}function multiply$3(d,s,f){const _=s[0],S=s[1],T=s[2],F=s[3],M=s[4],P=s[5],H=s[6],J=s[7],K=s[8],oe=s[9],se=s[10],ae=s[11],ge=s[12],he=s[13],Be=s[14],pe=s[15];let be=f[0],Re=f[1],Fe=f[2],Me=f[3];return d[0]=be*_+Re*M+Fe*K+Me*ge,d[1]=be*S+Re*P+Fe*oe+Me*he,d[2]=be*T+Re*H+Fe*se+Me*Be,d[3]=be*F+Re*J+Fe*ae+Me*pe,be=f[4],Re=f[5],Fe=f[6],Me=f[7],d[4]=be*_+Re*M+Fe*K+Me*ge,d[5]=be*S+Re*P+Fe*oe+Me*he,d[6]=be*T+Re*H+Fe*se+Me*Be,d[7]=be*F+Re*J+Fe*ae+Me*pe,be=f[8],Re=f[9],Fe=f[10],Me=f[11],d[8]=be*_+Re*M+Fe*K+Me*ge,d[9]=be*S+Re*P+Fe*oe+Me*he,d[10]=be*T+Re*H+Fe*se+Me*Be,d[11]=be*F+Re*J+Fe*ae+Me*pe,be=f[12],Re=f[13],Fe=f[14],Me=f[15],d[12]=be*_+Re*M+Fe*K+Me*ge,d[13]=be*S+Re*P+Fe*oe+Me*he,d[14]=be*T+Re*H+Fe*se+Me*Be,d[15]=be*F+Re*J+Fe*ae+Me*pe,d}function translate$2(d,s,f){const _=f[0],S=f[1],T=f[2];let F,M,P,H,J,K,oe,se,ae,ge,he,Be;return s===d?(d[12]=s[0]*_+s[4]*S+s[8]*T+s[12],d[13]=s[1]*_+s[5]*S+s[9]*T+s[13],d[14]=s[2]*_+s[6]*S+s[10]*T+s[14],d[15]=s[3]*_+s[7]*S+s[11]*T+s[15]):(F=s[0],M=s[1],P=s[2],H=s[3],J=s[4],K=s[5],oe=s[6],se=s[7],ae=s[8],ge=s[9],he=s[10],Be=s[11],d[0]=F,d[1]=M,d[2]=P,d[3]=H,d[4]=J,d[5]=K,d[6]=oe,d[7]=se,d[8]=ae,d[9]=ge,d[10]=he,d[11]=Be,d[12]=F*_+J*S+ae*T+s[12],d[13]=M*_+K*S+ge*T+s[13],d[14]=P*_+oe*S+he*T+s[14],d[15]=H*_+se*S+Be*T+s[15]),d}function scale$5(d,s,f){const _=f[0],S=f[1],T=f[2];return d[0]=s[0]*_,d[1]=s[1]*_,d[2]=s[2]*_,d[3]=s[3]*_,d[4]=s[4]*S,d[5]=s[5]*S,d[6]=s[6]*S,d[7]=s[7]*S,d[8]=s[8]*T,d[9]=s[9]*T,d[10]=s[10]*T,d[11]=s[11]*T,d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15],d}function rotate(d,s,f,_){let S=_[0],T=_[1],F=_[2],M=Math.sqrt(S*S+T*T+F*F),P,H,J,K,oe,se,ae,ge,he,Be,pe,be,Re,Fe,Me,ve,At,Ct,Rt,It,xt,wt,Ft,jt;return M<EPSILON$2?null:(M=1/M,S*=M,T*=M,F*=M,H=Math.sin(f),P=Math.cos(f),J=1-P,K=s[0],oe=s[1],se=s[2],ae=s[3],ge=s[4],he=s[5],Be=s[6],pe=s[7],be=s[8],Re=s[9],Fe=s[10],Me=s[11],ve=S*S*J+P,At=T*S*J+F*H,Ct=F*S*J-T*H,Rt=S*T*J-F*H,It=T*T*J+P,xt=F*T*J+S*H,wt=S*F*J+T*H,Ft=T*F*J-S*H,jt=F*F*J+P,d[0]=K*ve+ge*At+be*Ct,d[1]=oe*ve+he*At+Re*Ct,d[2]=se*ve+Be*At+Fe*Ct,d[3]=ae*ve+pe*At+Me*Ct,d[4]=K*Rt+ge*It+be*xt,d[5]=oe*Rt+he*It+Re*xt,d[6]=se*Rt+Be*It+Fe*xt,d[7]=ae*Rt+pe*It+Me*xt,d[8]=K*wt+ge*Ft+be*jt,d[9]=oe*wt+he*Ft+Re*jt,d[10]=se*wt+Be*Ft+Fe*jt,d[11]=ae*wt+pe*Ft+Me*jt,s!==d&&(d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15]),d)}function rotateX$2(d,s,f){const _=Math.sin(f),S=Math.cos(f),T=s[4],F=s[5],M=s[6],P=s[7],H=s[8],J=s[9],K=s[10],oe=s[11];return s!==d&&(d[0]=s[0],d[1]=s[1],d[2]=s[2],d[3]=s[3],d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15]),d[4]=T*S+H*_,d[5]=F*S+J*_,d[6]=M*S+K*_,d[7]=P*S+oe*_,d[8]=H*S-T*_,d[9]=J*S-F*_,d[10]=K*S-M*_,d[11]=oe*S-P*_,d}function rotateY$1(d,s,f){const _=Math.sin(f),S=Math.cos(f),T=s[0],F=s[1],M=s[2],P=s[3],H=s[8],J=s[9],K=s[10],oe=s[11];return s!==d&&(d[4]=s[4],d[5]=s[5],d[6]=s[6],d[7]=s[7],d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15]),d[0]=T*S-H*_,d[1]=F*S-J*_,d[2]=M*S-K*_,d[3]=P*S-oe*_,d[8]=T*_+H*S,d[9]=F*_+J*S,d[10]=M*_+K*S,d[11]=P*_+oe*S,d}function rotateZ$2(d,s,f){const _=Math.sin(f),S=Math.cos(f),T=s[0],F=s[1],M=s[2],P=s[3],H=s[4],J=s[5],K=s[6],oe=s[7];return s!==d&&(d[8]=s[8],d[9]=s[9],d[10]=s[10],d[11]=s[11],d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15]),d[0]=T*S+H*_,d[1]=F*S+J*_,d[2]=M*S+K*_,d[3]=P*S+oe*_,d[4]=H*S-T*_,d[5]=J*S-F*_,d[6]=K*S-M*_,d[7]=oe*S-P*_,d}function getScaling(d,s){const f=s[0],_=s[1],S=s[2],T=s[4],F=s[5],M=s[6],P=s[8],H=s[9],J=s[10];return d[0]=Math.sqrt(f*f+_*_+S*S),d[1]=Math.sqrt(T*T+F*F+M*M),d[2]=Math.sqrt(P*P+H*H+J*J),d}function fromQuat(d,s){const f=s[0],_=s[1],S=s[2],T=s[3],F=f+f,M=_+_,P=S+S,H=f*F,J=_*F,K=_*M,oe=S*F,se=S*M,ae=S*P,ge=T*F,he=T*M,Be=T*P;return d[0]=1-K-ae,d[1]=J+Be,d[2]=oe-he,d[3]=0,d[4]=J-Be,d[5]=1-H-ae,d[6]=se+ge,d[7]=0,d[8]=oe+he,d[9]=se-ge,d[10]=1-H-K,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function frustum(d,s,f,_,S,T,F){const M=1/(f-s),P=1/(S-_),H=1/(T-F);return d[0]=T*2*M,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=T*2*P,d[6]=0,d[7]=0,d[8]=(f+s)*M,d[9]=(S+_)*P,d[10]=(F+T)*H,d[11]=-1,d[12]=0,d[13]=0,d[14]=F*T*2*H,d[15]=0,d}function perspectiveNO$1(d,s,f,_,S){const T=1/Math.tan(s/2);if(d[0]=T/f,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=T,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,S!=null&&S!==1/0){const F=1/(_-S);d[10]=(S+_)*F,d[14]=2*S*_*F}else d[10]=-1,d[14]=-2*_;return d}const perspective$1=perspectiveNO$1;function orthoNO(d,s,f,_,S,T,F){const M=1/(s-f),P=1/(_-S),H=1/(T-F);return d[0]=-2*M,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*P,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*H,d[11]=0,d[12]=(s+f)*M,d[13]=(S+_)*P,d[14]=(F+T)*H,d[15]=1,d}const ortho=orthoNO;function lookAt$1(d,s,f,_){let S,T,F,M,P,H,J,K,oe,se;const ae=s[0],ge=s[1],he=s[2],Be=_[0],pe=_[1],be=_[2],Re=f[0],Fe=f[1],Me=f[2];return Math.abs(ae-Re)<EPSILON$2&&Math.abs(ge-Fe)<EPSILON$2&&Math.abs(he-Me)<EPSILON$2?identity$9(d):(K=ae-Re,oe=ge-Fe,se=he-Me,S=1/Math.sqrt(K*K+oe*oe+se*se),K*=S,oe*=S,se*=S,T=pe*se-be*oe,F=be*K-Be*se,M=Be*oe-pe*K,S=Math.sqrt(T*T+F*F+M*M),S?(S=1/S,T*=S,F*=S,M*=S):(T=0,F=0,M=0),P=oe*M-se*F,H=se*T-K*M,J=K*F-oe*T,S=Math.sqrt(P*P+H*H+J*J),S?(S=1/S,P*=S,H*=S,J*=S):(P=0,H=0,J=0),d[0]=T,d[1]=P,d[2]=K,d[3]=0,d[4]=F,d[5]=H,d[6]=oe,d[7]=0,d[8]=M,d[9]=J,d[10]=se,d[11]=0,d[12]=-(T*ae+F*ge+M*he),d[13]=-(P*ae+H*ge+J*he),d[14]=-(K*ae+oe*ge+se*he),d[15]=1,d)}function create$6(){const d=new ARRAY_TYPE$1(4);return ARRAY_TYPE$1!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0),d}function add$6(d,s,f){return d[0]=s[0]+f[0],d[1]=s[1]+f[1],d[2]=s[2]+f[2],d[3]=s[3]+f[3],d}function scale$4(d,s,f){return d[0]=s[0]*f,d[1]=s[1]*f,d[2]=s[2]*f,d[3]=s[3]*f,d}function length$2(d){const s=d[0],f=d[1],_=d[2],S=d[3];return Math.sqrt(s*s+f*f+_*_+S*S)}function squaredLength$1(d){const s=d[0],f=d[1],_=d[2],S=d[3];return s*s+f*f+_*_+S*S}function normalize$4(d,s){const f=s[0],_=s[1],S=s[2],T=s[3];let F=f*f+_*_+S*S+T*T;return F>0&&(F=1/Math.sqrt(F)),d[0]=f*F,d[1]=_*F,d[2]=S*F,d[3]=T*F,d}function dot$2(d,s){return d[0]*s[0]+d[1]*s[1]+d[2]*s[2]+d[3]*s[3]}function lerp$3(d,s,f,_){const S=s[0],T=s[1],F=s[2],M=s[3];return d[0]=S+_*(f[0]-S),d[1]=T+_*(f[1]-T),d[2]=F+_*(f[2]-F),d[3]=M+_*(f[3]-M),d}function transformMat4$1(d,s,f){const _=s[0],S=s[1],T=s[2],F=s[3];return d[0]=f[0]*_+f[4]*S+f[8]*T+f[12]*F,d[1]=f[1]*_+f[5]*S+f[9]*T+f[13]*F,d[2]=f[2]*_+f[6]*S+f[10]*T+f[14]*F,d[3]=f[3]*_+f[7]*S+f[11]*T+f[15]*F,d}function transformQuat(d,s,f){const _=s[0],S=s[1],T=s[2],F=f[0],M=f[1],P=f[2],H=f[3],J=H*_+M*T-P*S,K=H*S+P*_-F*T,oe=H*T+F*S-M*_,se=-F*_-M*S-P*T;return d[0]=J*H+se*-F+K*-P-oe*-M,d[1]=K*H+se*-M+oe*-F-J*-P,d[2]=oe*H+se*-P+J*-M-K*-F,d[3]=s[3],d}(function(){const d=create$6();return function(s,f,_,S,T,F){let M,P;for(f||(f=4),_||(_=0),S?P=Math.min(S*f+_,s.length):P=s.length,M=_;M<P;M+=f)d[0]=s[M],d[1]=s[M+1],d[2]=s[M+2],d[3]=s[M+3],T(d,d,F),s[M]=d[0],s[M+1]=d[1],s[M+2]=d[2],s[M+3]=d[3];return s}})();var INDICES;(function(d){d[d.COL0ROW0=0]="COL0ROW0",d[d.COL0ROW1=1]="COL0ROW1",d[d.COL0ROW2=2]="COL0ROW2",d[d.COL0ROW3=3]="COL0ROW3",d[d.COL1ROW0=4]="COL1ROW0",d[d.COL1ROW1=5]="COL1ROW1",d[d.COL1ROW2=6]="COL1ROW2",d[d.COL1ROW3=7]="COL1ROW3",d[d.COL2ROW0=8]="COL2ROW0",d[d.COL2ROW1=9]="COL2ROW1",d[d.COL2ROW2=10]="COL2ROW2",d[d.COL2ROW3=11]="COL2ROW3",d[d.COL3ROW0=12]="COL3ROW0",d[d.COL3ROW1=13]="COL3ROW1",d[d.COL3ROW2=14]="COL3ROW2",d[d.COL3ROW3=15]="COL3ROW3"})(INDICES||(INDICES={}));const DEFAULT_FOVY=45*Math.PI/180,DEFAULT_ASPECT=1,DEFAULT_NEAR=.1,DEFAULT_FAR=500,IDENTITY_MATRIX$1=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Matrix4 extends Matrix{static get IDENTITY(){return getIdentityMatrix()}static get ZERO(){return getZeroMatrix()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return INDICES}constructor(s){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(s)?this.copy(s):this.identity()}copy(s){return this[0]=s[0],this[1]=s[1],this[2]=s[2],this[3]=s[3],this[4]=s[4],this[5]=s[5],this[6]=s[6],this[7]=s[7],this[8]=s[8],this[9]=s[9],this[10]=s[10],this[11]=s[11],this[12]=s[12],this[13]=s[13],this[14]=s[14],this[15]=s[15],this.check()}set(s,f,_,S,T,F,M,P,H,J,K,oe,se,ae,ge,he){return this[0]=s,this[1]=f,this[2]=_,this[3]=S,this[4]=T,this[5]=F,this[6]=M,this[7]=P,this[8]=H,this[9]=J,this[10]=K,this[11]=oe,this[12]=se,this[13]=ae,this[14]=ge,this[15]=he,this.check()}setRowMajor(s,f,_,S,T,F,M,P,H,J,K,oe,se,ae,ge,he){return this[0]=s,this[1]=T,this[2]=H,this[3]=se,this[4]=f,this[5]=F,this[6]=J,this[7]=ae,this[8]=_,this[9]=M,this[10]=K,this[11]=ge,this[12]=S,this[13]=P,this[14]=oe,this[15]=he,this.check()}toRowMajor(s){return s[0]=this[0],s[1]=this[4],s[2]=this[8],s[3]=this[12],s[4]=this[1],s[5]=this[5],s[6]=this[9],s[7]=this[13],s[8]=this[2],s[9]=this[6],s[10]=this[10],s[11]=this[14],s[12]=this[3],s[13]=this[7],s[14]=this[11],s[15]=this[15],s}identity(){return this.copy(IDENTITY_MATRIX$1)}fromObject(s){return this.check()}fromQuaternion(s){return fromQuat(this,s),this.check()}frustum(s){const{left:f,right:_,bottom:S,top:T,near:F=DEFAULT_NEAR,far:M=DEFAULT_FAR}=s;return M===1/0?computeInfinitePerspectiveOffCenter(this,f,_,S,T,F):frustum(this,f,_,S,T,F,M),this.check()}lookAt(s){const{eye:f,center:_=[0,0,0],up:S=[0,1,0]}=s;return lookAt$1(this,f,_,S),this.check()}ortho(s){const{left:f,right:_,bottom:S,top:T,near:F=DEFAULT_NEAR,far:M=DEFAULT_FAR}=s;return ortho(this,f,_,S,T,F,M),this.check()}orthographic(s){const{fovy:f=DEFAULT_FOVY,aspect:_=DEFAULT_ASPECT,focalDistance:S=1,near:T=DEFAULT_NEAR,far:F=DEFAULT_FAR}=s;checkRadians(f);const M=f/2,P=S*Math.tan(M),H=P*_;return this.ortho({left:-H,right:H,bottom:-P,top:P,near:T,far:F})}perspective(s){const{fovy:f=45*Math.PI/180,aspect:_=1,near:S=.1,far:T=500}=s;return checkRadians(f),perspective$1(this,f,_,S,T),this.check()}determinant(){return determinant(this)}getScale(s=[-0,-0,-0]){return s[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),s[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),s[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),s}getTranslation(s=[-0,-0,-0]){return s[0]=this[12],s[1]=this[13],s[2]=this[14],s}getRotation(s,f){s=s||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],f=f||[-0,-0,-0];const _=this.getScale(f),S=1/_[0],T=1/_[1],F=1/_[2];return s[0]=this[0]*S,s[1]=this[1]*T,s[2]=this[2]*F,s[3]=0,s[4]=this[4]*S,s[5]=this[5]*T,s[6]=this[6]*F,s[7]=0,s[8]=this[8]*S,s[9]=this[9]*T,s[10]=this[10]*F,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}getRotationMatrix3(s,f){s=s||[-0,-0,-0,-0,-0,-0,-0,-0,-0],f=f||[-0,-0,-0];const _=this.getScale(f),S=1/_[0],T=1/_[1],F=1/_[2];return s[0]=this[0]*S,s[1]=this[1]*T,s[2]=this[2]*F,s[3]=this[4]*S,s[4]=this[5]*T,s[5]=this[6]*F,s[6]=this[8]*S,s[7]=this[9]*T,s[8]=this[10]*F,s}transpose(){return transpose(this,this),this.check()}invert(){return invert$2(this,this),this.check()}multiplyLeft(s){return multiply$3(this,s,this),this.check()}multiplyRight(s){return multiply$3(this,this,s),this.check()}rotateX(s){return rotateX$2(this,this,s),this.check()}rotateY(s){return rotateY$1(this,this,s),this.check()}rotateZ(s){return rotateZ$2(this,this,s),this.check()}rotateXYZ(s){return this.rotateX(s[0]).rotateY(s[1]).rotateZ(s[2])}rotateAxis(s,f){return rotate(this,this,s,f),this.check()}scale(s){return scale$5(this,this,Array.isArray(s)?s:[s,s,s]),this.check()}translate(s){return translate$2(this,this,s),this.check()}transform(s,f){return s.length===4?(f=transformMat4$1(f||[-0,-0,-0,-0],s,this),checkVector(f,4),f):this.transformAsPoint(s,f)}transformAsPoint(s,f){const{length:_}=s;let S;switch(_){case 2:S=transformMat4$3(f||[-0,-0],s,this);break;case 3:S=transformMat4$2(f||[-0,-0,-0],s,this);break;default:throw new Error("Illegal vector")}return checkVector(S,s.length),S}transformAsVector(s,f){let _;switch(s.length){case 2:_=vec2_transformMat4AsVector(f||[-0,-0],s,this);break;case 3:_=vec3_transformMat4AsVector(f||[-0,-0,-0],s,this);break;default:throw new Error("Illegal vector")}return checkVector(_,s.length),_}transformPoint(s,f){return this.transformAsPoint(s,f)}transformVector(s,f){return this.transformAsPoint(s,f)}transformDirection(s,f){return this.transformAsVector(s,f)}makeRotationX(s){return this.identity().rotateX(s)}makeTranslation(s,f,_){return this.identity().translate([s,f,_])}}let ZERO,IDENTITY$1;function getZeroMatrix(){return ZERO||(ZERO=new Matrix4([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(ZERO)),ZERO}function getIdentityMatrix(){return IDENTITY$1||(IDENTITY$1=new Matrix4,Object.freeze(IDENTITY$1)),IDENTITY$1}function checkRadians(d){if(d>Math.PI*2)throw Error("expected radians")}function computeInfinitePerspectiveOffCenter(d,s,f,_,S,T){const F=2*T/(f-s),M=2*T/(S-_),P=(f+s)/(f-s),H=(S+_)/(S-_),J=-1,K=-1,oe=-2*T;return d[0]=F,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=M,d[6]=0,d[7]=0,d[8]=P,d[9]=H,d[10]=J,d[11]=K,d[12]=0,d[13]=0,d[14]=oe,d[15]=0,d}function create$5(){const d=new ARRAY_TYPE$1(4);return ARRAY_TYPE$1!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function identity$8(d){return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d}function setAxisAngle(d,s,f){f=f*.5;const _=Math.sin(f);return d[0]=_*s[0],d[1]=_*s[1],d[2]=_*s[2],d[3]=Math.cos(f),d}function multiply$2(d,s,f){const _=s[0],S=s[1],T=s[2],F=s[3],M=f[0],P=f[1],H=f[2],J=f[3];return d[0]=_*J+F*M+S*H-T*P,d[1]=S*J+F*P+T*M-_*H,d[2]=T*J+F*H+_*P-S*M,d[3]=F*J-_*M-S*P-T*H,d}function rotateX$1(d,s,f){f*=.5;const _=s[0],S=s[1],T=s[2],F=s[3],M=Math.sin(f),P=Math.cos(f);return d[0]=_*P+F*M,d[1]=S*P+T*M,d[2]=T*P-S*M,d[3]=F*P-_*M,d}function rotateY(d,s,f){f*=.5;const _=s[0],S=s[1],T=s[2],F=s[3],M=Math.sin(f),P=Math.cos(f);return d[0]=_*P-T*M,d[1]=S*P+F*M,d[2]=T*P+_*M,d[3]=F*P-S*M,d}function rotateZ$1(d,s,f){f*=.5;const _=s[0],S=s[1],T=s[2],F=s[3],M=Math.sin(f),P=Math.cos(f);return d[0]=_*P+S*M,d[1]=S*P-_*M,d[2]=T*P+F*M,d[3]=F*P-T*M,d}function calculateW(d,s){const f=s[0],_=s[1],S=s[2];return d[0]=f,d[1]=_,d[2]=S,d[3]=Math.sqrt(Math.abs(1-f*f-_*_-S*S)),d}function slerp(d,s,f,_){const S=s[0],T=s[1],F=s[2],M=s[3];let P=f[0],H=f[1],J=f[2],K=f[3],oe,se,ae,ge,he;return oe=S*P+T*H+F*J+M*K,oe<0&&(oe=-oe,P=-P,H=-H,J=-J,K=-K),1-oe>EPSILON$2?(se=Math.acos(oe),he=Math.sin(se),ae=Math.sin((1-_)*se)/he,ge=Math.sin(_*se)/he):(ae=1-_,ge=_),d[0]=ae*S+ge*P,d[1]=ae*T+ge*H,d[2]=ae*F+ge*J,d[3]=ae*M+ge*K,d}function invert$1(d,s){const f=s[0],_=s[1],S=s[2],T=s[3],F=f*f+_*_+S*S+T*T,M=F?1/F:0;return d[0]=-f*M,d[1]=-_*M,d[2]=-S*M,d[3]=T*M,d}function conjugate(d,s){return d[0]=-s[0],d[1]=-s[1],d[2]=-s[2],d[3]=s[3],d}function fromMat3(d,s){const f=s[0]+s[4]+s[8];let _;if(f>0)_=Math.sqrt(f+1),d[3]=.5*_,_=.5/_,d[0]=(s[5]-s[7])*_,d[1]=(s[6]-s[2])*_,d[2]=(s[1]-s[3])*_;else{let S=0;s[4]>s[0]&&(S=1),s[8]>s[S*3+S]&&(S=2);const T=(S+1)%3,F=(S+2)%3;_=Math.sqrt(s[S*3+S]-s[T*3+T]-s[F*3+F]+1),d[S]=.5*_,_=.5/_,d[3]=(s[T*3+F]-s[F*3+T])*_,d[T]=(s[T*3+S]+s[S*3+T])*_,d[F]=(s[F*3+S]+s[S*3+F])*_}return d}const add$5=add$6,scale$3=scale$4,dot$1=dot$2,lerp$2=lerp$3,length$1=length$2,squaredLength=squaredLength$1,normalize$3=normalize$4,rotationTo=function(){const d=create$8(),s=fromValues(1,0,0),f=fromValues(0,1,0);return function(_,S,T){const F=dot$3(S,T);return F<-.999999?(cross(d,s,S),len(d)<1e-6&&cross(d,f,S),normalize$5(d,d),setAxisAngle(_,d,Math.PI),_):F>.999999?(_[0]=0,_[1]=0,_[2]=0,_[3]=1,_):(cross(d,S,T),_[0]=d[0],_[1]=d[1],_[2]=d[2],_[3]=1+F,normalize$3(_,_))}}();(function(){const d=create$5(),s=create$5();return function(f,_,S,T,F,M){return slerp(d,_,F,M),slerp(s,S,T,M),slerp(f,d,s,2*M*(1-M)),f}})();(function(){const d=create$7();return function(s,f,_,S){return d[0]=_[0],d[3]=_[1],d[6]=_[2],d[1]=S[0],d[4]=S[1],d[7]=S[2],d[2]=-f[0],d[5]=-f[1],d[8]=-f[2],normalize$3(s,fromMat3(s,d))}})();const IDENTITY_QUATERNION=[0,0,0,1];class Quaternion extends MathArray{constructor(s=0,f=0,_=0,S=1){super(-0,-0,-0,-0),Array.isArray(s)&&arguments.length===1?this.copy(s):this.set(s,f,_,S)}copy(s){return this[0]=s[0],this[1]=s[1],this[2]=s[2],this[3]=s[3],this.check()}set(s,f,_,S){return this[0]=s,this[1]=f,this[2]=_,this[3]=S,this.check()}fromObject(s){return this[0]=s.x,this[1]=s.y,this[2]=s.z,this[3]=s.w,this.check()}fromMatrix3(s){return fromMat3(this,s),this.check()}fromAxisRotation(s,f){return setAxisAngle(this,s,f),this.check()}identity(){return identity$8(this),this.check()}setAxisAngle(s,f){return this.fromAxisRotation(s,f)}get ELEMENTS(){return 4}get x(){return this[0]}set x(s){this[0]=checkNumber(s)}get y(){return this[1]}set y(s){this[1]=checkNumber(s)}get z(){return this[2]}set z(s){this[2]=checkNumber(s)}get w(){return this[3]}set w(s){this[3]=checkNumber(s)}len(){return length$1(this)}lengthSquared(){return squaredLength(this)}dot(s){return dot$1(this,s)}rotationTo(s,f){return rotationTo(this,s,f),this.check()}add(s){return add$5(this,this,s),this.check()}calculateW(){return calculateW(this,this),this.check()}conjugate(){return conjugate(this,this),this.check()}invert(){return invert$1(this,this),this.check()}lerp(s,f,_){return _===void 0?this.lerp(this,s,f):(lerp$2(this,s,f,_),this.check())}multiplyRight(s){return multiply$2(this,this,s),this.check()}multiplyLeft(s){return multiply$2(this,s,this),this.check()}normalize(){const s=this.len(),f=s>0?1/s:0;return this[0]=this[0]*f,this[1]=this[1]*f,this[2]=this[2]*f,this[3]=this[3]*f,s===0&&(this[3]=1),this.check()}rotateX(s){return rotateX$1(this,this,s),this.check()}rotateY(s){return rotateY(this,this,s),this.check()}rotateZ(s){return rotateZ$1(this,this,s),this.check()}scale(s){return scale$3(this,this,s),this.check()}slerp(s,f,_){let S,T,F;switch(arguments.length){case 1:({start:S=IDENTITY_QUATERNION,target:T,ratio:F}=s);break;case 2:S=this,T=s,F=f;break;default:S=s,T=f,F=_}return slerp(this,S,T,F),this.check()}transformVector4(s,f=new Vector4){return transformQuat(f,s,this),checkVector(f,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(s,f){return this.setAxisAngle(s,f)}premultiply(s){return this.multiplyLeft(s)}multiply(s){return this.multiplyRight(s)}}const EPSILON15=1e-15,EPSILON20=1e-20,lightingShader$1=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))
struct AmbientLight {
vec3 color;
};
struct PointLight {
vec3 color;
vec3 position;
vec3 attenuation;
};
struct DirectionalLight {
vec3 color;
vec3 direction;
};
uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;
uniform bool lighting_uEnabled;
float getPointLightAttenuation(PointLight pointLight, float distance) {
return pointLight.attenuation.x
+ pointLight.attenuation.y * distance
+ pointLight.attenuation.z * distance * distance;
}
#endif
`,INITIAL_MODULE_OPTIONS$2={lightSources:{}};function convertColor(d={}){const{color:s=[0,0,0],intensity:f=1}=d;return s.map(_=>_*f/255)}function getLightSourceUniforms({ambientLight:d,pointLights:s=[],directionalLights:f=[]}){const _={};return d?_["lighting_uAmbientLight.color"]=convertColor(d):_["lighting_uAmbientLight.color"]=[0,0,0],s.forEach((S,T)=>{_[`lighting_uPointLight[${T}].color`]=convertColor(S),_[`lighting_uPointLight[${T}].position`]=S.position,_[`lighting_uPointLight[${T}].attenuation`]=S.attenuation||[1,0,0]}),_.lighting_uPointLightCount=s.length,f.forEach((S,T)=>{_[`lighting_uDirectionalLight[${T}].color`]=convertColor(S),_[`lighting_uDirectionalLight[${T}].direction`]=S.direction}),_.lighting_uDirectionalLightCount=f.length,_}function getUniforms$2(d=INITIAL_MODULE_OPTIONS$2){var s,f;if("lightSources"in d){const{ambientLight:_,pointLights:S,directionalLights:T}=d.lightSources||{};return _||S&&S.length>0||T&&T.length>0?Object.assign({},getLightSourceUniforms({ambientLight:_,pointLights:S,directionalLights:T}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in d){const _={pointLights:[],directionalLights:[]};for(const S of d.lights||[])switch(S.type){case"ambient":_.ambientLight=S;break;case"directional":(s=_.directionalLights)==null||s.push(S);break;case"point":(f=_.pointLights)==null||f.push(S);break}return getUniforms$2({lightSources:_})}return{}}const lights={name:"lights",vs:lightingShader$1,fs:lightingShader$1,getUniforms:getUniforms$2,defines:{MAX_LIGHTS:3}},lightingShader=`uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;
vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
vec3 halfway_direction = normalize(light_direction + view_direction);
float lambertian = dot(light_direction, normal_worldspace);
float specular = 0.0;
if (lambertian > 0.0) {
float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
specular = pow(specular_angle, lighting_uShininess);
}
lambertian = max(lambertian, 0.0);
return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}
vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
vec3 lightColor = surfaceColor;
if (lighting_uEnabled) {
vec3 view_direction = normalize(cameraPosition - position_worldspace);
lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uPointLightCount) {
break;
}
PointLight pointLight = lighting_uPointLight[i];
vec3 light_position_worldspace = pointLight.position;
vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
}
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uDirectionalLightCount) {
break;
}
DirectionalLight directionalLight = lighting_uDirectionalLight[i];
lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
}
}
return lightColor;
}
vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
vec3 lightColor = vec3(0, 0, 0);
vec3 surfaceColor = vec3(0, 0, 0);
if (lighting_uEnabled) {
vec3 view_direction = normalize(cameraPosition - position_worldspace);
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uPointLightCount) {
break;
}
PointLight pointLight = lighting_uPointLight[i];
vec3 light_position_worldspace = pointLight.position;
vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
}
for (int i = 0; i < MAX_LIGHTS; i++) {
if (i >= lighting_uDirectionalLightCount) {
break;
}
DirectionalLight directionalLight = lighting_uDirectionalLight[i];
lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
}
}
return lightColor;
}
`,INITIAL_MODULE_OPTIONS$1={};function getMaterialUniforms(d){const{ambient:s=.35,diffuse:f=.6,shininess:_=32,specularColor:S=[30,30,30]}=d;return{lighting_uAmbient:s,lighting_uDiffuse:f,lighting_uShininess:_,lighting_uSpecularColor:S.map(T=>T/255)}}function getUniforms$1(d=INITIAL_MODULE_OPTIONS$1){if(!("material"in d))return{};const{material:s}=d;return s?getMaterialUniforms(s):{lighting_uEnabled:!1}}const gouraudLighting={name:"gouraud-lighting",dependencies:[lights],vs:lightingShader,defines:{LIGHTING_VERTEX:1},getUniforms:getUniforms$1},defines="#define SMOOTH_EDGE_RADIUS 0.5",vs$d=`
${defines}

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,fs$f=`
${defines}

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,geometry={name:"geometry",vs:vs$d,fs:fs$f},COORDINATE_SYSTEM={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(COORDINATE_SYSTEM,"IDENTITY",{get:()=>(defaultLogger.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const PROJECTION_MODE={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},UNIT={common:0,meters:1,pixels:2},EVENTS={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},COORDINATE_SYSTEM_GLSL_CONSTANTS=Object.keys(COORDINATE_SYSTEM).map(d=>`const int COORDINATE_SYSTEM_${d} = ${COORDINATE_SYSTEM[d]};`).join(""),PROJECTION_MODE_GLSL_CONSTANTS=Object.keys(PROJECTION_MODE).map(d=>`const int PROJECTION_MODE_${d} = ${PROJECTION_MODE[d]};`).join(""),UNIT_GLSL_CONSTANTS=Object.keys(UNIT).map(d=>`const int UNIT_${d.toUpperCase()} = ${UNIT[d]};`).join(""),projectShader=`${COORDINATE_SYSTEM_GLSL_CONSTANTS}
${PROJECTION_MODE_GLSL_CONSTANTS}
${UNIT_GLSL_CONSTANTS}
uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
float y = clamp(lat, -89.9, 89.9);
return 1.0 / cos(radians(y));
}
float project_size() {
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
project_uPseudoMeters == false) {
if (geometry.position.w == 0.0) {
return project_size_at_latitude(geometry.worldPosition.y);
}
float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
float y2 = y * y;
float y4 = y2 * y2;
float y6 = y4 * y2;
return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
}
return 1.0;
}
float project_size_at_latitude(float meters, float lat) {
return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
return meters * project_uCommonUnitsPerMeter.z * project_size();
}
vec2 project_size(vec2 meters) {
return meters * project_uCommonUnitsPerMeter.xy * project_size();
}
vec3 project_size(vec3 meters) {
return meters * project_uCommonUnitsPerMeter * project_size();
}
vec4 project_size(vec4 meters) {
return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
vec3 uz = normalize(up);
vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
vec3 uy = cross(uz, ux);
return mat3(ux, uy, uz);
}
bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
transform = project_get_orientation_matrix(commonPosition);
return true;
}
return false;
}
vec3 project_normal(vec3 vector) {
vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
mat3 rotation;
if (project_needs_rotation(geometry.position.xyz, rotation)) {
n = rotation * n;
}
return n;
}
vec4 project_offset_(vec4 offset) {
float dy = offset.y;
vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
float x = lnglat.x;
if (project_uWrapLongitude) {
x = mod(x + 180., 360.0) - 180.;
}
float y = clamp(lnglat.y, -89.9, 89.9);
return vec2(
radians(x) + PI,
PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
) * WORLD_SCALE;
}
vec3 project_globe_(vec3 lnglatz) {
float lambda = radians(lnglatz.x);
float phi = radians(lnglatz.y);
float cosPhi = cos(phi);
float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
return vec3(
sin(lambda) * cosPhi,
-cos(lambda) * cosPhi,
sin(phi)
) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
vec4 position_world = project_uModelMatrix * position;
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_mercator_(position_world.xy),
project_size_at_latitude(position_world.z, position_world.y),
position_world.w
);
}
if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
position_world.xyz += project_uCoordinateOrigin;
}
}
if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_globe_(position_world.xyz),
position_world.w
);
}
}
if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
return vec4(
project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
project_size(position_world.z),
position_world.w
);
}
}
}
if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
(project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
(project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
position_world.xyz -= project_uCoordinateOrigin;
}
return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));
}
vec4 project_position(vec4 position) {
return project_position(position, ZERO_64_LOW);
}
vec3 project_position(vec3 position, vec3 position64Low) {
vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
return projected_position.xyz;
}
vec3 project_position(vec3 position) {
vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
return projected_position.xyz;
}
vec2 project_position(vec2 position) {
vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
return projected_position.xy;
}
vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
return offset * project_uFocalDistance;
}
float project_size_to_pixel(float meters) {
return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
if (unit == UNIT_METERS) return project_size_to_pixel(size);
if (unit == UNIT_COMMON) return size * project_uScale;
return size;
}
float project_pixel_size(float pixels) {
return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
return pixels / project_uScale;
}
`;function isEqual$2(d,s){if(d===s)return!0;if(Array.isArray(d)){const f=d.length;if(!s||s.length!==f)return!1;for(let _=0;_<f;_++)if(d[_]!==s[_])return!1;return!0}return!1}function memoize$2(d){let s={},f;return _=>{for(const S in _)if(!isEqual$2(_[S],s[S])){f=d(_),s=_;break}return f}}const ZERO_VECTOR$1=[0,0,0,0],VECTOR_TO_POINT_MATRIX$1=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],IDENTITY_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],DEFAULT_PIXELS_PER_UNIT2=[0,0,0],DEFAULT_COORDINATE_ORIGIN$1=[0,0,0],getMemoizedViewportUniforms=memoize$2(calculateViewportUniforms);function getOffsetOrigin(d,s,f=DEFAULT_COORDINATE_ORIGIN$1){f.length<3&&(f=[f[0],f[1],0]);let _=f,S,T=!0;switch(s===COORDINATE_SYSTEM.LNGLAT_OFFSETS||s===COORDINATE_SYSTEM.METER_OFFSETS?S=f:S=d.isGeospatial?[Math.fround(d.longitude),Math.fround(d.latitude),0]:null,d.projectionMode){case PROJECTION_MODE.WEB_MERCATOR:(s===COORDINATE_SYSTEM.LNGLAT||s===COORDINATE_SYSTEM.CARTESIAN)&&(S=[0,0,0],T=!1);break;case PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:s===COORDINATE_SYSTEM.LNGLAT?_=S:s===COORDINATE_SYSTEM.CARTESIAN&&(_=[Math.fround(d.center[0]),Math.fround(d.center[1]),0],S=d.unprojectPosition(_),_[0]-=f[0],_[1]-=f[1],_[2]-=f[2]);break;case PROJECTION_MODE.IDENTITY:_=d.position.map(Math.fround),_[2]=_[2]||0;break;case PROJECTION_MODE.GLOBE:T=!1,S=null;break;default:T=!1}return{geospatialOrigin:S,shaderCoordinateOrigin:_,offsetMode:T}}function calculateMatrixAndOffset(d,s,f){const{viewMatrixUncentered:_,projectionMatrix:S}=d;let{viewMatrix:T,viewProjectionMatrix:F}=d,M=ZERO_VECTOR$1,P=ZERO_VECTOR$1,H=d.cameraPosition;const{geospatialOrigin:J,shaderCoordinateOrigin:K,offsetMode:oe}=getOffsetOrigin(d,s,f);return oe&&(P=d.projectPosition(J||K),H=[H[0]-P[0],H[1]-P[1],H[2]-P[2]],P[3]=1,M=transformMat4$1([],P,F),T=_||T,F=multiply$3([],S,T),F=multiply$3([],F,VECTOR_TO_POINT_MATRIX$1)),{viewMatrix:T,viewProjectionMatrix:F,projectionCenter:M,originCommon:P,cameraPosCommon:H,shaderCoordinateOrigin:K,geospatialOrigin:J}}function getUniformsFromViewport({viewport:d,devicePixelRatio:s=1,modelMatrix:f=null,coordinateSystem:_=COORDINATE_SYSTEM.DEFAULT,coordinateOrigin:S=DEFAULT_COORDINATE_ORIGIN$1,autoWrapLongitude:T=!1}){_===COORDINATE_SYSTEM.DEFAULT&&(_=d.isGeospatial?COORDINATE_SYSTEM.LNGLAT:COORDINATE_SYSTEM.CARTESIAN);const F=getMemoizedViewportUniforms({viewport:d,devicePixelRatio:s,coordinateSystem:_,coordinateOrigin:S});return F.project_uWrapLongitude=T,F.project_uModelMatrix=f||IDENTITY_MATRIX,F}function calculateViewportUniforms({viewport:d,devicePixelRatio:s,coordinateSystem:f,coordinateOrigin:_}){const{projectionCenter:S,viewProjectionMatrix:T,originCommon:F,cameraPosCommon:M,shaderCoordinateOrigin:P,geospatialOrigin:H}=calculateMatrixAndOffset(d,f,_),J=d.getDistanceScales(),K=[d.width*s,d.height*s],oe=transformMat4$1([],[0,0,-d.focalDistance,1],d.projectionMatrix)[3]||1,se={project_uCoordinateSystem:f,project_uProjectionMode:d.projectionMode,project_uCoordinateOrigin:P,project_uCommonOrigin:F.slice(0,3),project_uCenter:S,project_uPseudoMeters:!!d._pseudoMeters,project_uViewportSize:K,project_uDevicePixelRatio:s,project_uFocalDistance:oe,project_uCommonUnitsPerMeter:J.unitsPerMeter,project_uCommonUnitsPerWorldUnit:J.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:DEFAULT_PIXELS_PER_UNIT2,project_uScale:d.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:T,project_uModelMatrix:IDENTITY_MATRIX,project_uCameraPosition:M};if(H){const ae=d.getDistanceScales(H);switch(f){case COORDINATE_SYSTEM.METER_OFFSETS:se.project_uCommonUnitsPerWorldUnit=ae.unitsPerMeter,se.project_uCommonUnitsPerWorldUnit2=ae.unitsPerMeter2;break;case COORDINATE_SYSTEM.LNGLAT:case COORDINATE_SYSTEM.LNGLAT_OFFSETS:d._pseudoMeters||(se.project_uCommonUnitsPerMeter=ae.unitsPerMeter),se.project_uCommonUnitsPerWorldUnit=ae.unitsPerDegree,se.project_uCommonUnitsPerWorldUnit2=ae.unitsPerDegree2;break;case COORDINATE_SYSTEM.CARTESIAN:se.project_uCommonUnitsPerWorldUnit=[1,1,ae.unitsPerMeter[2]],se.project_uCommonUnitsPerWorldUnit2=[0,0,ae.unitsPerMeter2[2]];break}}return se}const INITIAL_MODULE_OPTIONS={};function getUniforms(d=INITIAL_MODULE_OPTIONS){return"viewport"in d?getUniformsFromViewport(d):{}}const project$1={name:"project",dependencies:[fp32,geometry],vs:projectShader,getUniforms},vs$c=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,project32={name:"project32",dependencies:[project$1],vs:vs$c};function createMat4$2(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function transformVector$2(d,s){const f=transformMat4$1([],s,d);return scale$4(f,f,1/f[3]),f}function mod$1(d,s){const f=d%s;return f<0?s+f:f}function clamp$2(d,s,f){return d<s?s:d>f?f:d}function ieLog2$1(d){return Math.log(d)*Math.LOG2E}const log2$1=Math.log2||ieLog2$1;function assert$3(d,s){if(!d)throw new Error(s||"@math.gl/web-mercator: assertion failed.")}const PI$1=Math.PI,PI_4$1=PI$1/4,DEGREES_TO_RADIANS$6=PI$1/180,RADIANS_TO_DEGREES$2=180/PI$1,TILE_SIZE$4=512,EARTH_CIRCUMFERENCE$1=4003e4,MAX_LATITUDE$1=85.051129,DEFAULT_ALTITUDE$1=1.5;function scaleToZoom(d){return log2$1(d)}function lngLatToWorld$1(d){const[s,f]=d;assert$3(Number.isFinite(s)),assert$3(Number.isFinite(f)&&f>=-90&&f<=90,"invalid latitude");const _=s*DEGREES_TO_RADIANS$6,S=f*DEGREES_TO_RADIANS$6,T=TILE_SIZE$4*(_+PI$1)/(2*PI$1),F=TILE_SIZE$4*(PI$1+Math.log(Math.tan(PI_4$1+S*.5)))/(2*PI$1);return[T,F]}function worldToLngLat$1(d){const[s,f]=d,_=s/TILE_SIZE$4*(2*PI$1)-PI$1,S=2*(Math.atan(Math.exp(f/TILE_SIZE$4*(2*PI$1)-PI$1))-PI_4$1);return[_*RADIANS_TO_DEGREES$2,S*RADIANS_TO_DEGREES$2]}function getMeterZoom(d){const{latitude:s}=d;assert$3(Number.isFinite(s));const f=Math.cos(s*DEGREES_TO_RADIANS$6);return scaleToZoom(EARTH_CIRCUMFERENCE$1*f)-9}function unitsPerMeter(d){const s=Math.cos(d*DEGREES_TO_RADIANS$6);return TILE_SIZE$4/EARTH_CIRCUMFERENCE$1/s}function getDistanceScales$2(d){const{latitude:s,longitude:f,highPrecision:_=!1}=d;assert$3(Number.isFinite(s)&&Number.isFinite(f));const S=TILE_SIZE$4,T=Math.cos(s*DEGREES_TO_RADIANS$6),F=S/360,M=F/T,P=S/EARTH_CIRCUMFERENCE$1/T,H={unitsPerMeter:[P,P,P],metersPerUnit:[1/P,1/P,1/P],unitsPerDegree:[F,M,P],degreesPerUnit:[1/F,1/M,1/P]};if(_){const J=DEGREES_TO_RADIANS$6*Math.tan(s*DEGREES_TO_RADIANS$6)/T,K=F*J/2,oe=S/EARTH_CIRCUMFERENCE$1*J,se=oe/M*P;H.unitsPerDegree2=[0,K,oe],H.unitsPerMeter2=[se,0,se]}return H}function addMetersToLngLat(d,s){const[f,_,S]=d,[T,F,M]=s,{unitsPerMeter:P,unitsPerMeter2:H}=getDistanceScales$2({longitude:f,latitude:_,highPrecision:!0}),J=lngLatToWorld$1(d);J[0]+=T*(P[0]+H[0]*F),J[1]+=F*(P[1]+H[1]*F);const K=worldToLngLat$1(J),oe=(S||0)+(M||0);return Number.isFinite(S)||Number.isFinite(M)?[K[0],K[1],oe]:K}function getViewMatrix$2(d){const{height:s,pitch:f,bearing:_,altitude:S,scale:T,center:F}=d,M=createMat4$2();translate$2(M,M,[0,0,-S]),rotateX$2(M,M,-f*DEGREES_TO_RADIANS$6),rotateZ$2(M,M,_*DEGREES_TO_RADIANS$6);const P=T/s;return scale$5(M,M,[P,P,P]),F&&translate$2(M,M,negate$2([],F)),M}function getProjectionParameters$1(d){const{width:s,height:f,altitude:_,pitch:S=0,offset:T,center:F,scale:M,nearZMultiplier:P=1,farZMultiplier:H=1}=d;let{fovy:J=altitudeToFovy$1(DEFAULT_ALTITUDE$1)}=d;_!==void 0&&(J=altitudeToFovy$1(_));const K=J*DEGREES_TO_RADIANS$6,oe=S*DEGREES_TO_RADIANS$6,se=fovyToAltitude$1(J);let ae=se;F&&(ae+=F[2]*M/Math.cos(oe)/f);const ge=K*(.5+(T?T[1]:0)/f),he=Math.sin(ge)*ae/Math.sin(clamp$2(Math.PI/2-oe-ge,.01,Math.PI-.01)),Be=Math.sin(oe)*he+ae,pe=ae*10,be=Math.min(Be*H,pe);return{fov:K,aspect:s/f,focalDistance:se,near:P,far:be}}function altitudeToFovy$1(d){return 2*Math.atan(.5/d)*RADIANS_TO_DEGREES$2}function fovyToAltitude$1(d){return .5/Math.tan(.5*d*DEGREES_TO_RADIANS$6)}function worldToPixels$1(d,s){const[f,_,S=0]=d;return assert$3(Number.isFinite(f)&&Number.isFinite(_)&&Number.isFinite(S)),transformVector$2(s,[f,_,S,1])}function pixelsToWorld$1(d,s,f=0){const[_,S,T]=d;if(assert$3(Number.isFinite(_)&&Number.isFinite(S),"invalid pixel coordinate"),Number.isFinite(T))return transformVector$2(s,[_,S,T,1]);const F=transformVector$2(s,[_,S,0,1]),M=transformVector$2(s,[_,S,1,1]),P=F[2],H=M[2],J=P===H?0:((f||0)-P)/(H-P);return lerp$5([],F,M,J)}function fitBounds$1(d){const{width:s,height:f,bounds:_,minExtent:S=0,maxZoom:T=24,offset:F=[0,0]}=d,[[M,P],[H,J]]=_,K=getPaddingObject$1(d.padding),oe=lngLatToWorld$1([M,clamp$2(J,-MAX_LATITUDE$1,MAX_LATITUDE$1)]),se=lngLatToWorld$1([H,clamp$2(P,-MAX_LATITUDE$1,MAX_LATITUDE$1)]),ae=[Math.max(Math.abs(se[0]-oe[0]),S),Math.max(Math.abs(se[1]-oe[1]),S)],ge=[s-K.left-K.right-Math.abs(F[0])*2,f-K.top-K.bottom-Math.abs(F[1])*2];assert$3(ge[0]>0&&ge[1]>0);const he=ge[0]/ae[0],Be=ge[1]/ae[1],pe=(K.right-K.left)/2/he,be=(K.top-K.bottom)/2/Be,Re=[(se[0]+oe[0])/2+pe,(se[1]+oe[1])/2+be],Fe=worldToLngLat$1(Re),Me=Math.min(T,log2$1(Math.abs(Math.min(he,Be))));return assert$3(Number.isFinite(Me)),{longitude:Fe[0],latitude:Fe[1],zoom:Me}}function getPaddingObject$1(d=0){return typeof d=="number"?{top:d,bottom:d,left:d,right:d}:(assert$3(Number.isFinite(d.top)&&Number.isFinite(d.bottom)&&Number.isFinite(d.left)&&Number.isFinite(d.right)),d)}const DEGREES_TO_RADIANS$5=Math.PI/180;function getBounds$2(d,s=0){const{width:f,height:_,unproject:S}=d,T={targetZ:s},F=S([0,_],T),M=S([f,_],T);let P,H;const J=d.fovy?.5*d.fovy*DEGREES_TO_RADIANS$5:Math.atan(.5/d.altitude),K=(90-d.pitch)*DEGREES_TO_RADIANS$5;return J>K-.01?(P=unprojectOnFarPlane$1(d,0,s),H=unprojectOnFarPlane$1(d,f,s)):(P=S([0,0],T),H=S([f,0],T)),[F,M,H,P]}function unprojectOnFarPlane$1(d,s,f){const{pixelUnprojectionMatrix:_}=d,S=transformVector$2(_,[s,0,1,1]),T=transformVector$2(_,[s,d.height,1,1]),M=(f*d.distanceScales.unitsPerMeter[2]-S[2])/(T[2]-S[2]),P=lerp$5([],S,T,M),H=worldToLngLat$1(P);return H.push(f),H}const TILE_SIZE$3=512;function normalizeViewportProps(d){const{width:s,height:f,pitch:_=0}=d;let{longitude:S,latitude:T,zoom:F,bearing:M=0}=d;(S<-180||S>180)&&(S=mod$1(S+180,360)-180),(M<-180||M>180)&&(M=mod$1(M+180,360)-180);const P=log2$1(f/TILE_SIZE$3);if(F<=P)F=P,T=0;else{const H=f/2/Math.pow(2,F),J=worldToLngLat$1([0,H])[1];if(T<J)T=J;else{const K=worldToLngLat$1([0,TILE_SIZE$3-H])[1];T>K&&(T=K)}}return{width:s,height:f,longitude:S,latitude:T,zoom:F,pitch:_,bearing:M}}const vs$b=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,fs$e=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,getMemoizedViewportCenterPosition=memoize$2(getViewportCenterPosition),getMemoizedViewProjectionMatrices=memoize$2(getViewProjectionMatrices),DEFAULT_SHADOW_COLOR$1=[0,0,0,1],VECTOR_TO_POINT_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function screenToCommonSpace(d,s){const[f,_,S]=d,T=pixelsToWorld$1([f,_,S],s);return Number.isFinite(S)?T:[T[0],T[1],0]}function getViewportCenterPosition({viewport:d,center:s}){return new Matrix4(d.viewProjectionMatrix).invert().transform(s)}function getViewProjectionMatrices({viewport:d,shadowMatrices:s}){const f=[],_=d.pixelUnprojectionMatrix,S=d.isGeospatial?void 0:1,T=[[0,0,S],[d.width,0,S],[0,d.height,S],[d.width,d.height,S],[0,0,-1],[d.width,0,-1],[0,d.height,-1],[d.width,d.height,-1]].map(F=>screenToCommonSpace(F,_));for(const F of s){const M=F.clone().translate(new Vector3(d.center).negate()),P=T.map(J=>M.transform(J)),H=new Matrix4().ortho({left:Math.min(...P.map(J=>J[0])),right:Math.max(...P.map(J=>J[0])),bottom:Math.min(...P.map(J=>J[1])),top:Math.max(...P.map(J=>J[1])),near:Math.min(...P.map(J=>-J[2])),far:Math.max(...P.map(J=>-J[2]))});f.push(H.multiplyRight(F))}return f}function createShadowUniforms(d,s){const{shadowEnabled:f=!0}=d;if(!f||!d.shadowMatrices||!d.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1,shadow_uShadowMap0:d.dummyShadowMap,shadow_uShadowMap1:d.dummyShadowMap};const _={shadow_uDrawShadowMap:!!d.drawToShadowMap,shadow_uUseShadowMap:d.shadowMaps?d.shadowMaps.length>0:!1,shadow_uColor:d.shadowColor||DEFAULT_SHADOW_COLOR$1,shadow_uLightId:d.shadowLightId||0,shadow_uLightCount:d.shadowMatrices.length},S=getMemoizedViewportCenterPosition({viewport:d.viewport,center:s.project_uCenter}),T=[],F=getMemoizedViewProjectionMatrices({shadowMatrices:d.shadowMatrices,viewport:d.viewport}).slice();for(let M=0;M<d.shadowMatrices.length;M++){const P=F[M],H=P.clone().translate(new Vector3(d.viewport.center).negate());s.project_uCoordinateSystem===COORDINATE_SYSTEM.LNGLAT&&s.project_uProjectionMode===PROJECTION_MODE.WEB_MERCATOR?(F[M]=H,T[M]=S):(F[M]=P.clone().multiplyRight(VECTOR_TO_POINT_MATRIX),T[M]=H.transform(S))}for(let M=0;M<F.length;M++)_[`shadow_uViewProjectionMatrices[${M}]`]=F[M],_[`shadow_uProjectCenters[${M}]`]=T[M];for(let M=0;M<2;M++)_[`shadow_uShadowMap${M}`]=d.shadowMaps&&d.shadowMaps[M]||d.dummyShadowMap;return _}const shadow={name:"shadow",dependencies:[project$1],vs:vs$b,fs:fs$e,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(d={},s={})=>"viewport"in d&&(d.drawToShadowMap||d.shadowMaps&&d.shadowMaps.length>0)?createShadowUniforms(d,s):{}},picking={...picking$1,defaultUniforms:{...picking$1.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},DEFAULT_MODULES=[project$1],SHADER_HOOKS=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function getShaderAssembler(){const d=ShaderAssembler.getDefaultShaderAssembler();for(const s of DEFAULT_MODULES)d.addDefaultModule(s);for(const s of SHADER_HOOKS)d.addShaderHook(s);return d}const DEFAULT_LIGHT_COLOR$1=[255,255,255],DEFAULT_LIGHT_INTENSITY$1=1;let idCount$1=0;class AmbientLight{constructor(s={}){this.type="ambient";const{color:f=DEFAULT_LIGHT_COLOR$1}=s,{intensity:_=DEFAULT_LIGHT_INTENSITY$1}=s;this.id=s.id||`ambient-${idCount$1++}`,this.color=f,this.intensity=_}}const DEFAULT_LIGHT_COLOR=[255,255,255],DEFAULT_LIGHT_INTENSITY=1,DEFAULT_LIGHT_DIRECTION=[0,0,-1];let idCount=0;class DirectionalLight{constructor(s={}){this.type="directional";const{color:f=DEFAULT_LIGHT_COLOR}=s,{intensity:_=DEFAULT_LIGHT_INTENSITY}=s,{direction:S=DEFAULT_LIGHT_DIRECTION}=s,{_shadow:T=!1}=s;this.id=s.id||`directional-${idCount++}`,this.color=f,this.intensity=_,this.type="directional",this.direction=new Vector3(S).normalize().toArray(),this.shadow=T}getProjectedLight(s){return this}}class Pass{constructor(s,f={id:"pass"}){const{id:_}=f;this.id=_,this.device=s,this.props={...f}}setProps(s){Object.assign(this.props,s)}render(s){}cleanup(){}}class LayersPass extends Pass{constructor(){super(...arguments),this._lastRenderIndex=-1}render(s){const[f,_]=this.device.canvasContext.getDrawingBufferSize(),S=s.clearCanvas??!0,T=s.clearColor??(S?[0,0,0,0]:!1),F=S?1:!1,M=S?0:!1,P=s.colorMask??15,H={viewport:[0,0,f,_]};s.colorMask&&(H.colorMask=P),s.scissorRect&&(H.scissorRect=s.scissorRect);const J=this.device.beginRenderPass({framebuffer:s.target,parameters:H,clearColor:T,clearDepth:F,clearStencil:M});try{return this._drawLayers(J,s)}finally{J.end()}}_drawLayers(s,f){const{target:_,moduleParameters:S,viewports:T,views:F,onViewportActive:M,clearStack:P=!0}=f;f.pass=f.pass||"unknown",P&&(this._lastRenderIndex=-1);const H=[];for(const J of T){const K=F&&F[J.id];M==null||M(J);const oe=this._getDrawLayerParams(J,f),se=J.subViewports||[J];for(const ae of se){const ge=this._drawLayersInViewport(s,{target:_,moduleParameters:S,viewport:ae,view:K,pass:f.pass,layers:f.layers},oe);H.push(ge)}}return H}_getDrawLayerParams(s,{layers:f,pass:_,isPicking:S=!1,layerFilter:T,cullRect:F,effects:M,moduleParameters:P},H=!1){var ae;const J=[],K=layerIndexResolver(this._lastRenderIndex+1),oe={layer:f[0],viewport:s,isPicking:S,renderPass:_,cullRect:F},se={};for(let ge=0;ge<f.length;ge++){const he=f[ge],Be=this._shouldDrawLayer(he,oe,T,se),pe={shouldDrawLayer:Be};Be&&!H&&(pe.layerRenderIndex=K(he,Be),pe.moduleParameters=this._getModuleParameters(he,M,_,P),pe.layerParameters={...(ae=he.context.deck)==null?void 0:ae.props.parameters,...this.getLayerParameters(he,ge,s)}),J[ge]=pe}return J}_drawLayersInViewport(s,{layers:f,moduleParameters:_,pass:S,target:T,viewport:F,view:M},P){const H=getGLViewport(this.device,{moduleParameters:_,target:T,viewport:F});if(M&&M.props.clear){const K=M.props.clear===!0?{color:!0,depth:!0}:M.props.clear;this.device.withParametersWebGL({scissorTest:!0,scissor:H},()=>this.device.clearWebGL(K))}const J={totalCount:f.length,visibleCount:0,compositeCount:0,pickableCount:0};s.setParameters({viewport:H});for(let K=0;K<f.length;K++){const oe=f[K],{shouldDrawLayer:se,layerRenderIndex:ae,moduleParameters:ge,layerParameters:he}=P[K];if(se&&oe.props.pickable&&J.pickableCount++,oe.isComposite)J.compositeCount++;else if(se){J.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,ae),ge.viewport=F,oe.context.renderPass=s;try{oe._drawLayer({renderPass:s,moduleParameters:ge,uniforms:{layerIndex:ae},parameters:he})}catch(Be){oe.raiseError(Be,`drawing ${oe} to ${S}`)}}}return J}shouldDrawLayer(s){return!0}getModuleParameters(s,f){return null}getLayerParameters(s,f,_){return s.props.parameters}_shouldDrawLayer(s,f,_,S){if(!(s.props.visible&&this.shouldDrawLayer(s)))return!1;f.layer=s;let F=s.parent;for(;F;){if(!F.props.visible||!F.filterSubLayer(f))return!1;f.layer=F,F=F.parent}if(_){const M=f.layer.id;if(M in S||(S[M]=_(f)),!S[M])return!1}return s.activateViewport(f.viewport),!0}_getModuleParameters(s,f,_,S){var M,P;const T=this.device.canvasContext.cssToDeviceRatio(),F=Object.assign(Object.create(((M=s.internalState)==null?void 0:M.propsInTransition)||s.props),{autoWrapLongitude:s.wrapLongitude,viewport:s.context.viewport,mousePosition:s.context.mousePosition,picking:{isActive:0},devicePixelRatio:T});if(f)for(const H of f)Object.assign(F,(P=H.getModuleParameters)==null?void 0:P.call(H,s));return Object.assign(F,this.getModuleParameters(s,f),S)}}function layerIndexResolver(d=0,s={}){const f={},_=(S,T)=>{const F=S.props._offset,M=S.id,P=S.parent&&S.parent.id;let H;if(P&&!(P in s)&&_(S.parent,!1),P in f){const J=f[P]=f[P]||layerIndexResolver(s[P],s);H=J(S,T),f[M]=J}else Number.isFinite(F)?(H=F+(s[P]||0),f[M]=null):H=d;return T&&H>=d&&(d=H+1),s[M]=H,H};return _}function getGLViewport(d,{moduleParameters:s,target:f,viewport:_}){const S=s&&s.devicePixelRatio||d.canvasContext.cssToDeviceRatio(),[,T]=d.canvasContext.getDrawingBufferSize(),F=f?f.height:T,M=_;return[M.x*S,F-(M.y+M.height)*S,M.width*S,M.height*S]}class ShadowPass extends LayersPass{constructor(s,f){super(s,f),this.shadowMap=s.createTexture({width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}}),this.depthBuffer=s.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1,dataFormat:6402,type:5125}),this.fbo=s.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[this.shadowMap],depthStencilAttachment:this.depthBuffer})}render(s){const f=this.fbo,_=this.device.canvasContext.cssToDeviceRatio(),S=s.viewports[0],T=S.width*_,F=S.height*_,M=[1,1,1,1];(T!==f.width||F!==f.height)&&f.resize({width:T,height:F}),super.render({...s,clearColor:M,target:f,pass:"shadow"})}getLayerParameters(s,f,_){return{...s.props.parameters,blend:!1,depthRange:[0,1],depthTest:!0}}shouldDrawLayer(s){return s.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null),this.shadowMap&&(this.shadowMap.destroy(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.destroy(),this.depthBuffer=null)}}const DEFAULT_AMBIENT_LIGHT_PROPS={color:[255,255,255],intensity:1},DEFAULT_DIRECTIONAL_LIGHT_PROPS=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],DEFAULT_SHADOW_COLOR=[0,0,0,200/255];class LightingEffect{constructor(s={}){this.id="lighting-effect",this.shadowColor=DEFAULT_SHADOW_COLOR,this.shadow=!1,this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.setProps(s)}setup(s){this.context=s;const{device:f,deck:_}=s;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(f),_._addDefaultShaderModule(shadow),this.dummyShadowMap=f.createTexture({width:1,height:1}))}setProps(s){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const f in s){const _=s[f];switch(_.type){case"ambient":this.ambientLight=_;break;case"directional":this.directionalLights.push(_);break;case"point":this.pointLights.push(_);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(f=>f.shadow),this.context&&this.setup(this.context),this.props=s}preRender({layers:s,layerFilter:f,viewports:_,onViewportActive:S,views:T}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let F=0;F<this.shadowPasses.length;F++)this.shadowPasses[F].render({layers:s,layerFilter:f,viewports:_,onViewportActive:S,views:T,moduleParameters:{shadowLightId:F,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(s){const f=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return f.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(_=>_.getProjectedLight({layer:s})),pointLights:this.pointLights.map(_=>_.getProjectedLight({layer:s}))},f}cleanup(s){for(const f of this.shadowPasses)f.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,s.deck._removeDefaultShaderModule(shadow))}_calculateMatrices(){const s=[];for(const f of this.directionalLights){const _=new Matrix4().lookAt({eye:new Vector3(f.direction).negate()});s.push(_)}return s}_createShadowPasses(s){for(let f=0;f<this.directionalLights.length;f++){const _=new ShadowPass(s);this.shadowPasses[f]=_,this.shadowMaps[f]=_.shadowMap}}_applyDefaultLights(){const{ambientLight:s,pointLights:f,directionalLights:_}=this;!s&&f.length===0&&_.length===0&&(this.ambientLight=new AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS),this.directionalLights.push(new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]),new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1])))}}class TypedArrayManager{constructor(s={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(s)}setOptions(s){Object.assign(this.opts,s)}allocate(s,f,{size:_=1,type:S,padding:T=0,copy:F=!1,initialize:M=!1,maxCount:P}){const H=S||s&&s.constructor||Float32Array,J=f*_+T;if(ArrayBuffer.isView(s)){if(J<=s.length)return s;if(J*s.BYTES_PER_ELEMENT<=s.buffer.byteLength)return new H(s.buffer,0,J)}let K=1/0;P&&(K=P*_+T);const oe=this._allocate(H,J,M,K);return s&&F?oe.set(s):M||oe.fill(0,0,4),this._release(s),oe}release(s){this._release(s)}_allocate(s,f,_,S){let T=Math.max(Math.ceil(f*this.opts.overAlloc),1);T>S&&(T=S);const F=this._pool,M=s.BYTES_PER_ELEMENT*T,P=F.findIndex(H=>H.byteLength>=M);if(P>=0){const H=new s(F.splice(P,1)[0],0,T);return _&&H.fill(0),H}return new s(T)}_release(s){if(!ArrayBuffer.isView(s))return;const f=this._pool,{buffer:_}=s,{byteLength:S}=_,T=f.findIndex(F=>F.byteLength>=S);T<0?f.push(_):(T>0||f.length<this.opts.poolSize)&&f.splice(T,0,_),f.length>this.opts.poolSize&&f.shift()}}const defaultTypedArrayManager=new TypedArrayManager;function createMat4$1(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function mod(d,s){const f=d%s;return f<0?s+f:f}function getCameraPosition(d){return[d[12],d[13],d[14]]}function getFrustumPlanes(d){return{left:getFrustumPlane(d[3]+d[0],d[7]+d[4],d[11]+d[8],d[15]+d[12]),right:getFrustumPlane(d[3]-d[0],d[7]-d[4],d[11]-d[8],d[15]-d[12]),bottom:getFrustumPlane(d[3]+d[1],d[7]+d[5],d[11]+d[9],d[15]+d[13]),top:getFrustumPlane(d[3]-d[1],d[7]-d[5],d[11]-d[9],d[15]-d[13]),near:getFrustumPlane(d[3]+d[2],d[7]+d[6],d[11]+d[10],d[15]+d[14]),far:getFrustumPlane(d[3]-d[2],d[7]-d[6],d[11]-d[10],d[15]-d[14])}}const scratchVector$2=new Vector3;function getFrustumPlane(d,s,f,_){scratchVector$2.set(d,s,f);const S=scratchVector$2.len();return{distance:_/S,normal:new Vector3(-d/S,-s/S,-f/S)}}function fp64LowPart(d){return d-Math.fround(d)}let scratchArray$1;function toDoublePrecisionArray(d,s){const{size:f=1,startIndex:_=0}=s,S=s.endIndex!==void 0?s.endIndex:d.length,T=(S-_)/f;scratchArray$1=defaultTypedArrayManager.allocate(scratchArray$1,T,{type:Float32Array,size:f*2});let F=_,M=0;for(;F<S;){for(let P=0;P<f;P++){const H=d[F++];scratchArray$1[M+P]=H,scratchArray$1[M+P+f]=fp64LowPart(H)}M+=f*2}return scratchArray$1.subarray(0,T*f*2)}function mergeBounds(d){let s=null,f=!1;for(const _ of d)_&&(s?(f||(s=[[s[0][0],s[0][1]],[s[1][0],s[1][1]]],f=!0),s[0][0]=Math.min(s[0][0],_[0][0]),s[0][1]=Math.min(s[0][1],_[0][1]),s[1][0]=Math.max(s[1][0],_[1][0]),s[1][1]=Math.max(s[1][1],_[1][1])):s=_);return s}const DEGREES_TO_RADIANS$4=Math.PI/180,IDENTITY=createMat4$1(),ZERO_VECTOR=[0,0,0],DEFAULT_DISTANCE_SCALES={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function createProjectionMatrix({width:d,height:s,orthographic:f,fovyRadians:_,focalDistance:S,padding:T,near:F,far:M}){const P=d/s,H=f?new Matrix4().orthographic({fovy:_,aspect:P,focalDistance:S,near:F,far:M}):new Matrix4().perspective({fovy:_,aspect:P,near:F,far:M});if(T){const{left:J=0,right:K=0,top:oe=0,bottom:se=0}=T,ae=clamp$3((J+d-K)/2,0,d)-d/2,ge=clamp$3((oe+s-se)/2,0,s)-s/2;H[8]-=ae*2/d,H[9]+=ge*2/s}return H}class Viewport{constructor(s={}){this._frustumPlanes={},this.id=s.id||this.constructor.displayName||"viewport",this.x=s.x||0,this.y=s.y||0,this.width=s.width||1,this.height=s.height||1,this.zoom=s.zoom||0,this.padding=s.padding,this.distanceScales=s.distanceScales||DEFAULT_DISTANCE_SCALES,this.focalDistance=s.focalDistance||1,this.position=s.position||ZERO_VECTOR,this.modelMatrix=s.modelMatrix||null;const{longitude:f,latitude:_}=s;this.isGeospatial=Number.isFinite(_)&&Number.isFinite(f),this._initProps(s),this._initMatrices(s),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?PROJECTION_MODE.WEB_MERCATOR:PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:PROJECTION_MODE.IDENTITY}equals(s){return s instanceof Viewport?this===s?!0:s.width===this.width&&s.height===this.height&&s.scale===this.scale&&equals$2(s.projectionMatrix,this.projectionMatrix)&&equals$2(s.viewMatrix,this.viewMatrix):!1}project(s,{topLeft:f=!0}={}){const _=this.projectPosition(s),S=worldToPixels$1(_,this.pixelProjectionMatrix),[T,F]=S,M=f?F:this.height-F;return s.length===2?[T,M]:[T,M,S[2]]}unproject(s,{topLeft:f=!0,targetZ:_}={}){const[S,T,F]=s,M=f?T:this.height-T,P=_&&_*this.distanceScales.unitsPerMeter[2],H=pixelsToWorld$1([S,M,F],this.pixelUnprojectionMatrix,P),[J,K,oe]=this.unprojectPosition(H);return Number.isFinite(F)?[J,K,oe]:Number.isFinite(_)?[J,K,_]:[J,K]}projectPosition(s){const[f,_]=this.projectFlat(s),S=(s[2]||0)*this.distanceScales.unitsPerMeter[2];return[f,_,S]}unprojectPosition(s){const[f,_]=this.unprojectFlat(s),S=(s[2]||0)*this.distanceScales.metersPerUnit[2];return[f,_,S]}projectFlat(s){if(this.isGeospatial){const f=lngLatToWorld$1(s);return f[1]=clamp$3(f[1],-318,830),f}return s}unprojectFlat(s){return this.isGeospatial?worldToLngLat$1(s):s}getBounds(s={}){const f={targetZ:s.z||0},_=this.unproject([0,0],f),S=this.unproject([this.width,0],f),T=this.unproject([0,this.height],f),F=this.unproject([this.width,this.height],f);return[Math.min(_[0],S[0],T[0],F[0]),Math.min(_[1],S[1],T[1],F[1]),Math.max(_[0],S[0],T[0],F[0]),Math.max(_[1],S[1],T[1],F[1])]}getDistanceScales(s){return s?getDistanceScales$2({longitude:s[0],latitude:s[1],highPrecision:!0}):this.distanceScales}containsPixel({x:s,y:f,width:_=1,height:S=1}){return s<this.x+this.width&&this.x<s+_&&f<this.y+this.height&&this.y<f+S}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,getFrustumPlanes(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(s,f){return null}_initProps(s){const f=s.longitude,_=s.latitude;this.isGeospatial&&(Number.isFinite(s.zoom)||(this.zoom=getMeterZoom({latitude:_})+Math.log2(this.focalDistance)),this.distanceScales=s.distanceScales||getDistanceScales$2({latitude:_,longitude:f}));const S=Math.pow(2,this.zoom);this.scale=S;const{position:T,modelMatrix:F}=s;let M=ZERO_VECTOR;if(T&&(M=F?new Matrix4(F).transformAsVector(T,[]):T),this.isGeospatial){const P=this.projectPosition([f,_,0]);this.center=new Vector3(M).scale(this.distanceScales.unitsPerMeter).add(P)}else this.center=this.projectPosition(M)}_initMatrices(s){const{viewMatrix:f=IDENTITY,projectionMatrix:_=null,orthographic:S=!1,fovyRadians:T,fovy:F=75,near:M=.1,far:P=1e3,padding:H=null,focalDistance:J=1}=s;this.viewMatrixUncentered=f,this.viewMatrix=new Matrix4().multiplyRight(f).translate(new Vector3(this.center).negate()),this.projectionMatrix=_||createProjectionMatrix({width:this.width,height:this.height,orthographic:S,fovyRadians:T||F*DEGREES_TO_RADIANS$4,focalDistance:J,padding:H,near:M,far:P});const K=createMat4$1();multiply$3(K,K,this.projectionMatrix),multiply$3(K,K,this.viewMatrix),this.viewProjectionMatrix=K,this.viewMatrixInverse=invert$2([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=getCameraPosition(this.viewMatrixInverse);const oe=createMat4$1(),se=createMat4$1();scale$5(oe,oe,[this.width/2,-this.height/2,1]),translate$2(oe,oe,[1,-1,0]),multiply$3(se,oe,this.viewProjectionMatrix),this.pixelProjectionMatrix=se,this.pixelUnprojectionMatrix=invert$2(createMat4$1(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||defaultLogger.warn("Pixel project matrix not invertible")()}}Viewport.displayName="Viewport";let WebMercatorViewport$1=class o0 extends Viewport{constructor(s={}){const{latitude:f=0,longitude:_=0,zoom:S=0,pitch:T=0,bearing:F=0,nearZMultiplier:M=.1,farZMultiplier:P=1.01,nearZ:H,farZ:J,orthographic:K=!1,projectionMatrix:oe,repeat:se=!1,worldOffset:ae=0,position:ge,padding:he,legacyMeterSizes:Be=!1}=s;let{width:pe,height:be,altitude:Re=1.5}=s;const Fe=Math.pow(2,S);pe=pe||1,be=be||1;let Me,ve=null;if(oe)Re=oe[5]/2,Me=altitudeToFovy$1(Re);else{s.fovy?(Me=s.fovy,Re=fovyToAltitude$1(Me)):Me=altitudeToFovy$1(Re);let Ct;if(he){const{top:Rt=0,bottom:It=0}=he;Ct=[0,clamp$3((Rt+be-It)/2,0,be)-be/2]}ve=getProjectionParameters$1({width:pe,height:be,scale:Fe,center:ge&&[0,0,ge[2]*unitsPerMeter(f)],offset:Ct,pitch:T,fovy:Me,nearZMultiplier:M,farZMultiplier:P}),Number.isFinite(H)&&(ve.near=H),Number.isFinite(J)&&(ve.far=J)}let At=getViewMatrix$2({height:be,pitch:T,bearing:F,scale:Fe,altitude:Re});ae&&(At=new Matrix4().translate([512*ae,0,0]).multiplyLeft(At)),super({...s,width:pe,height:be,viewMatrix:At,longitude:_,latitude:f,zoom:S,...ve,fovy:Me,focalDistance:Re}),this.latitude=f,this.longitude=_,this.zoom=S,this.pitch=T,this.bearing=F,this.altitude=Re,this.fovy=Me,this.orthographic=K,this._subViewports=se?[]:null,this._pseudoMeters=Be,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const s=this.getBounds(),f=Math.floor((s[0]+180)/360),_=Math.ceil((s[2]-180)/360);for(let S=f;S<=_;S++){const T=S?new o0({...this,worldOffset:S}):this;this._subViewports.push(T)}}return this._subViewports}projectPosition(s){if(this._pseudoMeters)return super.projectPosition(s);const[f,_]=this.projectFlat(s),S=(s[2]||0)*unitsPerMeter(s[1]);return[f,_,S]}unprojectPosition(s){if(this._pseudoMeters)return super.unprojectPosition(s);const[f,_]=this.unprojectFlat(s),S=(s[2]||0)/unitsPerMeter(_);return[f,_,S]}addMetersToLngLat(s,f){return addMetersToLngLat(s,f)}panByPosition(s,f){const _=pixelsToWorld$1(f,this.pixelUnprojectionMatrix),S=this.projectFlat(s),T=add$7([],S,negate$3([],_)),F=add$7([],this.center,T),[M,P]=this.unprojectFlat(F);return{longitude:M,latitude:P}}getBounds(s={}){const f=getBounds$2(this,s.z||0);return[Math.min(f[0][0],f[1][0],f[2][0],f[3][0]),Math.min(f[0][1],f[1][1],f[2][1],f[3][1]),Math.max(f[0][0],f[1][0],f[2][0],f[3][0]),Math.max(f[0][1],f[1][1],f[2][1],f[3][1])]}fitBounds(s,f={}){const{width:_,height:S}=this,{longitude:T,latitude:F,zoom:M}=fitBounds$1({width:_,height:S,bounds:s,...f});return new o0({width:_,height:S,longitude:T,latitude:F,zoom:M})}};WebMercatorViewport$1.displayName="WebMercatorViewport";const DEFAULT_COORDINATE_ORIGIN=[0,0,0];function lngLatZToWorldPosition(d,s,f=!1){const _=s.projectPosition(d);if(f&&s instanceof WebMercatorViewport$1){const[S,T,F=0]=d,M=s.getDistanceScales([S,T]);_[2]=F*M.unitsPerMeter[2]}return _}function normalizeParameters(d){const{viewport:s,modelMatrix:f,coordinateOrigin:_}=d;let{coordinateSystem:S,fromCoordinateSystem:T,fromCoordinateOrigin:F}=d;return S===COORDINATE_SYSTEM.DEFAULT&&(S=s.isGeospatial?COORDINATE_SYSTEM.LNGLAT:COORDINATE_SYSTEM.CARTESIAN),T===void 0&&(T=S),F===void 0&&(F=_),{viewport:s,coordinateSystem:S,coordinateOrigin:_,modelMatrix:f,fromCoordinateSystem:T,fromCoordinateOrigin:F}}function getWorldPosition(d,{viewport:s,modelMatrix:f,coordinateSystem:_,coordinateOrigin:S,offsetMode:T}){let[F,M,P=0]=d;switch(f&&([F,M,P]=transformMat4$1([],[F,M,P,1],f)),_){case COORDINATE_SYSTEM.LNGLAT:return lngLatZToWorldPosition([F,M,P],s,T);case COORDINATE_SYSTEM.LNGLAT_OFFSETS:return lngLatZToWorldPosition([F+S[0],M+S[1],P+(S[2]||0)],s,T);case COORDINATE_SYSTEM.METER_OFFSETS:return lngLatZToWorldPosition(addMetersToLngLat(S,[F,M,P]),s,T);case COORDINATE_SYSTEM.CARTESIAN:default:return s.isGeospatial?[F+S[0],M+S[1],P+S[2]]:s.projectPosition([F,M,P])}}function projectPosition(d,s){const{viewport:f,coordinateSystem:_,coordinateOrigin:S,modelMatrix:T,fromCoordinateSystem:F,fromCoordinateOrigin:M}=normalizeParameters(s),{autoOffset:P=!0}=s,{geospatialOrigin:H=DEFAULT_COORDINATE_ORIGIN,shaderCoordinateOrigin:J=DEFAULT_COORDINATE_ORIGIN,offsetMode:K=!1}=P?getOffsetOrigin(f,_,S):{},oe=getWorldPosition(d,{viewport:f,modelMatrix:T,coordinateSystem:F,coordinateOrigin:M,offsetMode:K});if(K){const se=f.projectPosition(H||J);sub(oe,oe,se)}return oe}let channelHandles=1,animationHandles=1;class Timeline{constructor(){Bt(this,"time",0);Bt(this,"channels",new Map);Bt(this,"animations",new Map);Bt(this,"playing",!1);Bt(this,"lastEngineTime",-1)}addChannel(s){const{delay:f=0,duration:_=Number.POSITIVE_INFINITY,rate:S=1,repeat:T=1}=s,F=channelHandles++,M={time:0,delay:f,duration:_,rate:S,repeat:T};return this._setChannelTime(M,this.time),this.channels.set(F,M),F}removeChannel(s){this.channels.delete(s);for(const[f,_]of this.animations)_.channel===s&&this.detachAnimation(f)}isFinished(s){const f=this.channels.get(s);return f===void 0?!1:this.time>=f.delay+f.duration*f.repeat}getTime(s){if(s===void 0)return this.time;const f=this.channels.get(s);return f===void 0?-1:f.time}setTime(s){this.time=Math.max(0,s);const f=this.channels.values();for(const S of f)this._setChannelTime(S,this.time);const _=this.animations.values();for(const S of _){const{animation:T,channel:F}=S;T.setTime(this.getTime(F))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(s,f){const _=animationHandles++;return this.animations.set(_,{animation:s,channel:f}),s.setTime(this.getTime(f)),_}detachAnimation(s){this.animations.delete(s)}update(s){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=s),this.setTime(this.time+(s-this.lastEngineTime)),this.lastEngineTime=s)}_setChannelTime(s,f){const _=f-s.delay,S=s.duration*s.repeat;_>=S?s.time=s.duration*s.rate:(s.time=Math.max(0,_)%s.duration,s.time*=s.rate)}}let statIdCounter=0;const DEFAULT_ANIMATION_LOOP_PROPS={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:d=>console.error(d),stats:luma.stats.get(`animation-loop-${statIdCounter++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class AnimationLoop{constructor(s){Bt(this,"device",null);Bt(this,"canvas",null);Bt(this,"props");Bt(this,"animationProps",null);Bt(this,"timeline",null);Bt(this,"stats");Bt(this,"cpuTime");Bt(this,"gpuTime");Bt(this,"frameRate");Bt(this,"display");Bt(this,"needsRedraw","initialized");Bt(this,"_initialized",!1);Bt(this,"_running",!1);Bt(this,"_animationFrameId",null);Bt(this,"_nextFramePromise",null);Bt(this,"_resolveNextFrame",null);Bt(this,"_cpuStartTime",0);if(this.props={...DEFAULT_ANIMATION_LOOP_PROPS,...s},s=this.props,!s.device)throw new Error("No device provided");const{useDevicePixels:f=!0}=this.props;this.stats=s.stats||new Stats({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:s.autoResizeViewport,autoResizeDrawingBuffer:s.autoResizeDrawingBuffer,useDevicePixels:f}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setNeedsRedraw(s){return this.needsRedraw=this.needsRedraw||s,this}setProps(s){return"autoResizeViewport"in s&&(this.props.autoResizeViewport=s.autoResizeViewport||!1),"autoResizeDrawingBuffer"in s&&(this.props.autoResizeDrawingBuffer=s.autoResizeDrawingBuffer||!1),"useDevicePixels"in s&&(this.props.useDevicePixels=s.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let s;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(s!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(s){const f=s instanceof Error?s:new Error("Unknown error");throw this.props.onError(f),f}}stop(){return this._running&&(this.animationProps&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var s;return(s=this.device)!=null&&s.isLost?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(s){return this.timeline=s,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(s=>{this._resolveNextFrame=s})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(s){this.display&&(this.display.destroy(),this.display.animationLoop=null),s&&(s.animationLoop=this),this.display=s}_requestAnimationFrame(){this._running&&(this._animationFrameId=requestAnimationFrame$1(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(cancelAnimationFrame$1(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(s){if(this.display){this.display._renderFrame(s);return}this.props.onRender(this._getAnimationProps()),this.device.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){var s,f;if(!this.device)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:(f=(s=this.device)==null?void 0:s.canvasContext)==null?void 0:f.canvas,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:s,height:f,aspect:_}=this._getSizeAndAspect();(s!==this.animationProps.width||f!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),_!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=s,this.animationProps.height=f,this.animationProps.aspect=_,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){var s;if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=((s=this.device.canvasContext)==null?void 0:s.canvas)||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const s=document.createElement("div");document.body.appendChild(s),s.style.position="relative";const f=document.createElement("div");f.style.position="absolute",f.style.left="10px",f.style.bottom="10px",f.style.width="300px",f.style.background="white",this.canvas instanceof HTMLCanvasElement&&s.appendChild(this.canvas),s.appendChild(f);const _=this.props.onAddHTML(f);_&&(f.innerHTML=_)}}_getSizeAndAspect(){var T,F,M,P;if(!this.device)return{width:1,height:1,aspect:1};const[s,f]=((F=(T=this.device)==null?void 0:T.canvasContext)==null?void 0:F.getPixelSize())||[1,1];let _=1;const S=(P=(M=this.device)==null?void 0:M.canvasContext)==null?void 0:P.canvas;return S&&S.clientHeight?_=S.clientWidth/S.clientHeight:s>0&&f>0&&(_=s/f),{width:s,height:f,aspect:_}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){var s,f;this.props.autoResizeDrawingBuffer&&((f=(s=this.device)==null?void 0:s.canvasContext)==null||f.resize({useDevicePixels:this.props.useDevicePixels}))}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(s){s instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[s.offsetX,s.offsetY])}_onMouseleave(s){this._getAnimationProps()._mousePosition=null}}class GPUGeometry{constructor(s){Bt(this,"id");Bt(this,"userData",{});Bt(this,"topology");Bt(this,"bufferLayout",[]);Bt(this,"vertexCount");Bt(this,"indices");Bt(this,"attributes");this.id=s.id||uid("geometry"),this.topology=s.topology,this.indices=s.indices||null,this.attributes=s.attributes,this.vertexCount=s.vertexCount,this.bufferLayout=s.bufferLayout||[],this.indices&&assert$5(this.indices.usage===Buffer$1.INDEX)}destroy(){var s;(s=this.indices)==null||s.destroy();for(const f of Object.values(this.attributes))f.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices}_calculateVertexCount(s){return s.byteLength/12}}function makeGPUGeometry(d,s){if(s instanceof GPUGeometry)return s;const f=getIndexBufferFromGeometry(d,s),{attributes:_,bufferLayout:S}=getAttributeBuffersFromGeometry(d,s);return new GPUGeometry({topology:s.topology||"triangle-list",bufferLayout:S,vertexCount:s.vertexCount,indices:f,attributes:_})}function getIndexBufferFromGeometry(d,s){if(!s.indices)return;const f=s.indices.value;return d.createBuffer({usage:Buffer$1.INDEX,data:f})}function getAttributeBuffersFromGeometry(d,s){const f=[],_={};for(const[T,F]of Object.entries(s.attributes)){let M=T;switch(T){case"POSITION":M="positions";break;case"NORMAL":M="normals";break;case"TEXCOORD_0":M="texCoords";break;case"COLOR_0":M="colors";break}_[M]=d.createBuffer({data:F.value,id:`${T}-buffer`});const{value:P,size:H,normalized:J}=F;f.push({name:M,format:getVertexFormatFromAttribute(P,H,J)})}const S=s._calculateVertexCount(s.attributes,s.indices);return{attributes:_,bufferLayout:f,vertexCount:S}}class ShaderInputs{constructor(s){Bt(this,"modules");Bt(this,"moduleUniforms");Bt(this,"moduleBindings");Bt(this,"moduleUniformsChanged");const f=resolveModules(Object.values(s).filter(_=>_.dependencies));for(const _ of f)s[_.name]=_;log.log(1,"Creating ShaderInputs with modules",Object.keys(s))(),this.modules=s,this.moduleUniforms={},this.moduleBindings={};for(const[_,S]of Object.entries(s)){const T=_;this.moduleUniforms[T]=S.defaultUniforms||{},this.moduleBindings[T]={}}}destroy(){}setProps(s){var f;for(const _ of Object.keys(s)){const S=_,T=s[S],F=this.modules[S];if(!F){log.warn(`Module ${_} not found`)();continue}const M=this.moduleUniforms[S],P=this.moduleBindings[S],H=((f=F.getUniforms)==null?void 0:f.call(F,T,M))||T,{uniforms:J,bindings:K}=splitUniformsAndBindings(H);this.moduleUniforms[S]={...M,...J},this.moduleBindings[S]={...P,...K}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindings(){const s={};for(const f of Object.values(this.moduleBindings))Object.assign(s,f);return s}getDebugTable(){var f;const s={};for(const[_,S]of Object.entries(this.moduleUniforms))for(const[T,F]of Object.entries(S))s[`${_}.${T}`]={type:(f=this.modules[_].uniformTypes)==null?void 0:f[T],value:String(F)};return s}}const fy=class fy{constructor(s){Bt(this,"device");Bt(this,"_hashCounter",0);Bt(this,"_hashes",{});Bt(this,"_renderPipelineCache",{});Bt(this,"_computePipelineCache",{});this.device=s}static getDefaultPipelineFactory(s){return s._lumaData.defaultPipelineFactory=s._lumaData.defaultPipelineFactory||new fy(s),s._lumaData.defaultPipelineFactory}createRenderPipeline(s){const f={...RenderPipeline.defaultProps,...s},_=this._hashRenderPipeline(f);if(!this._renderPipelineCache[_]){const S=this.device.createRenderPipeline({...f,id:f.id?`${f.id}-cached`:void 0});S.hash=_,this._renderPipelineCache[_]={pipeline:S,useCount:0}}return this._renderPipelineCache[_].useCount++,this._renderPipelineCache[_].pipeline}createComputePipeline(s){const f={...ComputePipeline.defaultProps,...s},_=this._hashComputePipeline(f);if(!this._computePipelineCache[_]){const S=this.device.createComputePipeline({...f,id:f.id?`${f.id}-cached`:void 0});S.hash=_,this._computePipelineCache[_]={pipeline:S,useCount:0}}return this._computePipelineCache[_].useCount++,this._computePipelineCache[_].pipeline}release(s){const f=s.hash,_=s instanceof ComputePipeline?this._computePipelineCache:this._renderPipelineCache;_[f].useCount--,_[f].useCount===0&&(_[f].pipeline.destroy(),delete _[f])}_hashComputePipeline(s){return`${this._getHash(s.shader.source)}`}_hashRenderPipeline(s){const f=this._getHash(s.vs.source),_=s.fs?this._getHash(s.fs.source):0,S="-",T=this._getHash(JSON.stringify(s.bufferLayout));switch(this.device.type){case"webgl":return`${f}/${_}V${S}BL${T}`;default:const F=this._getHash(JSON.stringify(s.parameters));return`${f}/${_}V${S}T${s.topology}P${F}BL${T}`}}_getHash(s){return this._hashes[s]===void 0&&(this._hashes[s]=this._hashCounter++),this._hashes[s]}};Bt(fy,"defaultProps",{...RenderPipeline.defaultProps});let PipelineFactory=fy;const py=class py{constructor(s){Bt(this,"device");Bt(this,"_cache",{});this.device=s}static getDefaultShaderFactory(s){var f;return(f=s._lumaData).defaultShaderFactory||(f.defaultShaderFactory=new py(s)),s._lumaData.defaultShaderFactory}createShader(s){const f=this._hashShader(s);let _=this._cache[f];if(!_){const S=this.device.createShader({...s,id:s.id?`${s.id}-cached`:void 0});this._cache[f]=_={shader:S,useCount:0}}return _.useCount++,_.shader}release(s){const f=this._hashShader(s),_=this._cache[f];_&&(_.useCount--,_.useCount===0&&(delete this._cache[f],_.shader.destroy()))}_hashShader(s){return`${s.stage}:${s.source}`}};Bt(py,"defaultProps",{...Shader.defaultProps});let ShaderFactory=py;function getDebugTableForShaderLayout(d,s){var S;const f={},_="Values";if(d.attributes.length===0&&!((S=d.varyings)!=null&&S.length))return{"No attributes or varyings":{[_]:"N/A"}};for(const T of d.attributes)if(T){const F=`${T.location} ${T.name}: ${T.type}`;f[`in ${F}`]={[_]:T.stepMode||"vertex"}}for(const T of d.varyings||[]){const F=`${T.location} ${T.name}`;f[`out ${F}`]={[_]:JSON.stringify(T.accessor)}}return f}let canvas=null,ctx=null;function debugFramebuffer(d,{id:s,minimap:f,opaque:_,top:S="0",left:T="0",rgbaScale:F=1}){canvas||(canvas=document.createElement("canvas"),canvas.id=s,canvas.title=s,canvas.style.zIndex="100",canvas.style.position="absolute",canvas.style.top=S,canvas.style.left=T,canvas.style.border="blue 1px solid",canvas.style.transform="scaleY(-1)",document.body.appendChild(canvas),ctx=canvas.getContext("2d")),(canvas.width!==d.width||canvas.height!==d.height)&&(canvas.width=d.width/2,canvas.height=d.height/2,canvas.style.width="400px",canvas.style.height="400px");const M=d.device.readPixelsToArrayWebGL(d),P=ctx.createImageData(d.width,d.height),H=0;for(let J=0;J<M.length;J+=4)P.data[H+J+0]=M[J+0]*F,P.data[H+J+1]=M[J+1]*F,P.data[H+J+2]=M[J+2]*F,P.data[H+J+3]=_?255:M[J+3]*F;ctx.putImageData(P,0,0)}const LOG_DRAW_PRIORITY=2,LOG_DRAW_TIMEOUT=1e4,Iy=class Iy{constructor(s,f){Bt(this,"device");Bt(this,"id");Bt(this,"source");Bt(this,"vs");Bt(this,"fs");Bt(this,"pipelineFactory");Bt(this,"shaderFactory");Bt(this,"userData",{});Bt(this,"parameters");Bt(this,"topology");Bt(this,"bufferLayout");Bt(this,"isInstanced");Bt(this,"instanceCount",0);Bt(this,"vertexCount");Bt(this,"indexBuffer",null);Bt(this,"bufferAttributes",{});Bt(this,"constantAttributes",{});Bt(this,"bindings",{});Bt(this,"uniforms",{});Bt(this,"vertexArray");Bt(this,"transformFeedback",null);Bt(this,"pipeline");Bt(this,"shaderInputs");Bt(this,"_uniformStore");Bt(this,"_attributeInfos",{});Bt(this,"_gpuGeometry",null);Bt(this,"_getModuleUniforms");Bt(this,"props");Bt(this,"_pipelineNeedsUpdate","newly created");Bt(this,"_needsRedraw","initializing");Bt(this,"_destroyed",!1);Bt(this,"_lastDrawTimestamp",-1);Bt(this,"_lastLogTime",0);Bt(this,"_logOpen",!1);Bt(this,"_drawCount",0);var M,P,H,J;this.props={...Iy.defaultProps,...f},f=this.props,this.id=f.id||uid("model"),this.device=s,Object.assign(this.userData,f.userData);const _=Object.fromEntries(((M=this.props.modules)==null?void 0:M.map(K=>[K.name,K]))||[]);this.setShaderInputs(f.shaderInputs||new ShaderInputs(_));const S=getPlatformInfo(s),T=(((P=this.props.modules)==null?void 0:P.length)>0?this.props.modules:(H=this.shaderInputs)==null?void 0:H.getModules())||[];if(this.device.type==="webgpu"&&this.props.source){(J=this.props).shaderLayout||(J.shaderLayout=getShaderLayoutFromWGSL(this.props.source));const{source:K,getUniforms:oe}=this.props.shaderAssembler.assembleShader({platformInfo:S,...this.props,modules:T});this.source=K,this._getModuleUniforms=oe}else{const{vs:K,fs:oe,getUniforms:se}=this.props.shaderAssembler.assembleShaderPair({platformInfo:S,...this.props,modules:T});this.vs=K,this.fs=oe,this._getModuleUniforms=se}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,f.geometry&&this.setGeometry(f.geometry),this.pipelineFactory=f.pipelineFactory||PipelineFactory.getDefaultPipelineFactory(this.device),this.shaderFactory=f.shaderFactory||ShaderFactory.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=s.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in f&&(this.isInstanced=f.isInstanced),f.instanceCount&&this.setInstanceCount(f.instanceCount),f.vertexCount&&this.setVertexCount(f.vertexCount),f.indexBuffer&&this.setIndexBuffer(f.indexBuffer),f.attributes&&this.setAttributes(f.attributes),f.constantAttributes&&this.setConstantAttributes(f.constantAttributes),f.bindings&&this.setBindings(f.bindings),f.uniforms&&this.setUniforms(f.uniforms),f.moduleSettings&&this.updateModuleSettings(f.moduleSettings),f.transformFeedback&&(this.transformFeedback=f.transformFeedback),Object.seal(this)}destroy(){var s;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),(s=this._gpuGeometry)==null||s.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const s=this._needsRedraw;return this._needsRedraw=!1,s}setNeedsRedraw(s){this._needsRedraw||(this._needsRedraw=s)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(s){this.predraw();let f;try{this._logDrawCallStart(),this.pipeline=this._updatePipeline(),this.pipeline.setBindings(this.bindings,{disableWarnings:this.props.disableWarnings}),isObjectEmpty$3(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:_}=this.vertexArray,S=_?_.byteLength/(_.indexType==="uint32"?4:2):void 0;f=this.pipeline.draw({renderPass:s,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:S,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{this._logDrawCallEnd()}return this._logFramebuffer(s),f?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",f}setGeometry(s){var _;(_=this._gpuGeometry)==null||_.destroy();const f=s&&makeGPUGeometry(this.device,s);f&&(this.setTopology(f.topology||"triangle-list"),this.bufferLayout=mergeBufferLayouts(f.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(f)),this._gpuGeometry=f}setTopology(s){s!==this.topology&&(this.topology=s,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(s){this.bufferLayout=this._gpuGeometry?mergeBufferLayouts(s,this._gpuGeometry.bufferLayout):s,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(s){deepEqual$1(s,this.parameters,2)||(this.parameters=s,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(s){this.instanceCount=s,this.isInstanced===void 0&&s>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(s){this.vertexCount=s,this.setNeedsRedraw("vertexCount")}setShaderInputs(s){this.shaderInputs=s,this._uniformStore=new UniformStore(this.shaderInputs.modules);for(const f of Object.keys(this.shaderInputs.modules)){const _=this._uniformStore.getManagedUniformBuffer(this.device,f);this.bindings[`${f}Uniforms`]=_}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindings()),this.setNeedsRedraw("shaderInputs")}setBindings(s){Object.assign(this.bindings,s),this.setNeedsRedraw("bindings")}setTransformFeedback(s){this.transformFeedback=s,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(s){this.vertexArray.setIndexBuffer(s),this.setNeedsRedraw("indexBuffer")}setAttributes(s,f){s.indices&&log.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)();for(const[_,S]of Object.entries(s)){const T=this.bufferLayout.find(P=>getAttributeNames(P).includes(_));if(!T){log.warn(`Model(${this.id}): Missing layout for buffer "${_}".`)();continue}const F=getAttributeNames(T);let M=!1;for(const P of F){const H=this._attributeInfos[P];H&&(this.vertexArray.setBuffer(H.location,S),M=!0)}!M&&!((f==null?void 0:f.disableWarnings)??this.props.disableWarnings)&&log.warn(`Model(${this.id}): Ignoring buffer "${S.id}" for unknown attribute "${_}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(s,f){for(const[_,S]of Object.entries(s)){const T=this._attributeInfos[_];T?this.vertexArray.setConstantWebGL(T.location,S):((f==null?void 0:f.disableWarnings)??this.props.disableWarnings)||log.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${_}"`)()}this.setNeedsRedraw("constants")}setUniforms(s){isObjectEmpty$3(s)||(this.pipeline.setUniformsWebGL(s),Object.assign(this.uniforms,s)),this.setNeedsRedraw("uniforms")}updateModuleSettings(s){const{bindings:f,uniforms:_}=splitUniformsAndBindings(this._getModuleUniforms(s));Object.assign(this.bindings,f),Object.assign(this.uniforms,_),this.setNeedsRedraw("moduleSettings")}_getBindingsUpdateTimestamp(){let s=0;for(const f of Object.values(this.bindings))f instanceof TextureView?s=Math.max(s,f.texture.updateTimestamp):f instanceof Buffer$1||f instanceof Texture?s=Math.max(s,f.updateTimestamp):f instanceof Sampler||(s=Math.max(s,f.buffer.updateTimestamp));return s}_setGeometryAttributes(s){const f={...s.attributes};for(const[_]of Object.entries(f))!this.pipeline.shaderLayout.attributes.find(S=>S.name===_)&&_!=="positions"&&delete f[_];this.vertexCount=s.vertexCount,this.setIndexBuffer(s.indices||null),this.setAttributes(s.attributes,{disableWarnings:!0}),this.setAttributes(f,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(s){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=s),this.setNeedsRedraw(s)}_updatePipeline(){if(this._pipelineNeedsUpdate){let s=null,f=null;this.pipeline&&(log.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),s=this.pipeline.vs,f=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const _=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debug:this.props.debugShaders});let S=null;this.source?S=_:this.fs&&(S=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debug:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,vs:_,fs:S}),this._attributeInfos=getAttributeInfosFromLayouts(this.pipeline.shaderLayout,this.bufferLayout),s&&this.shaderFactory.release(s),f&&this.shaderFactory.release(f)}return this.pipeline}_logDrawCallStart(){const s=log.level>3?0:LOG_DRAW_TIMEOUT;log.level<2||Date.now()-this._lastLogTime<s||(this._lastLogTime=Date.now(),this._logOpen=!0,log.group(LOG_DRAW_PRIORITY,`>>> DRAWING MODEL ${this.id}`,{collapsed:log.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const s=getDebugTableForShaderLayout(this.pipeline.shaderLayout,this.id);log.table(LOG_DRAW_PRIORITY,s)();const f=this.shaderInputs.getDebugTable();for(const[S,T]of Object.entries(this.uniforms))f[S]={value:T};log.table(LOG_DRAW_PRIORITY,f)();const _=this._getAttributeDebugTable();log.table(LOG_DRAW_PRIORITY,this._attributeInfos)(),log.table(LOG_DRAW_PRIORITY,_)(),log.groupEnd(LOG_DRAW_PRIORITY)(),this._logOpen=!1}}_logFramebuffer(s){const f=log.get("framebuffer");if(this._drawCount++,!f||this._drawCount++>3&&this._drawCount%60)return;const _=s.props.framebuffer;_&&debugFramebuffer(_,{id:_.id,minimap:!0})}_getAttributeDebugTable(){const s={};for(const[f,_]of Object.entries(this._attributeInfos))s[_.location]={name:f,type:_.shaderType,values:this._getBufferOrConstantValues(this.vertexArray.attributes[_.location],_.bufferDataType)};if(this.vertexArray.indexBuffer){const{indexBuffer:f}=this.vertexArray,_=f.indexType==="uint32"?new Uint32Array(f.debugData):new Uint16Array(f.debugData);s.indices={name:"indices",type:f.indexType,values:_.toString()}}return s}_getBufferOrConstantValues(s,f){const _=getTypedArrayFromDataType(f);return(s instanceof Buffer$1?new _(s.debugData):s).toString()}};Bt(Iy,"defaultProps",{...RenderPipeline.defaultProps,source:null,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:ShaderAssembler.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});let Model=Iy;function mergeBufferLayouts(d,s){const f=[...d];for(const _ of s){const S=f.findIndex(T=>T.name===_.name);S<0?f.push(_):f[S]=_}return f}function getPlatformInfo(d){return{type:d.type,shaderLanguage:d.info.shadingLanguage,shaderLanguageVersion:d.info.shadingLanguageVersion,gpu:d.info.gpu,features:d.features}}function getAttributeNames(d){var s;return d.attributes?(s=d.attributes)==null?void 0:s.map(f=>f.attribute):[d.name]}class BufferTransform{constructor(s,f=Model.defaultProps){Bt(this,"device");Bt(this,"model");Bt(this,"transformFeedback");assert$5(BufferTransform.isSupported(s),"BufferTransform not yet implemented on WebGPU"),this.device=s,this.model=new Model(this.device,{id:f.id||"buffer-transform-model",fs:f.fs||getPassthroughFS(),topology:f.topology||"point-list",...f}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:f.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}static isSupported(s){var f;return((f=s==null?void 0:s.info)==null?void 0:f.type)==="webgl"}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(s){const f=this.device.beginRenderPass(s);this.model.draw(f),f.end()}update(...s){console.warn("TextureTransform#update() not implemented")}getBuffer(s){return this.transformFeedback.getBuffer(s)}readAsync(s){const f=this.getBuffer(s);if(f instanceof Buffer$1)return f.readAsync();const{buffer:_,byteOffset:S=0,byteLength:T=_.byteLength}=f;return _.readAsync(S,T)}}const FS_OUTPUT_VARIABLE="transform_output";class TextureTransform{constructor(s,f){Bt(this,"device");Bt(this,"model");Bt(this,"sampler");Bt(this,"currentIndex",0);Bt(this,"samplerTextureMap",null);Bt(this,"bindings",[]);Bt(this,"resources",{});this.device=s,this.sampler=s.createSampler({addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",minFilter:"nearest",magFilter:"nearest",mipmapFilter:"nearest"}),this.model=new Model(this.device,{id:f.id||"texture-transform-model",fs:f.fs||getPassthroughFS({input:f.targetTextureVarying,inputChannels:f.targetTextureChannels,output:FS_OUTPUT_VARIABLE}),vertexCount:f.vertexCount,...f}),this._initialize(f),Object.seal(this)}destroy(){}delete(){this.destroy()}run(s){const{framebuffer:f}=this.bindings[this.currentIndex],_=this.device.beginRenderPass({framebuffer:f,...s});this.model.draw(_),_.end()}update(...s){console.warn("TextureTransform#update() not implemented")}getData({packed:s=!1}={}){throw new Error("getData() not implemented")}getTargetTexture(){const{targetTexture:s}=this.bindings[this.currentIndex];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}_initialize(s){this._updateBindings(s)}_updateBindings(s){this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],s)}_updateBinding(s,{sourceBuffers:f,sourceTextures:_,targetTexture:S}){if(s||(s={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(s.sourceTextures,_),Object.assign(s.sourceBuffers,f),S){s.targetTexture=S;const{width:T,height:F}=S;s.framebuffer&&s.framebuffer.destroy(),s.framebuffer=this.device.createFramebuffer({id:"transform-framebuffer",width:T,height:F,colorAttachments:[S]}),s.framebuffer.resize({width:T,height:F})}return s}_setSourceTextureParameters(){const s=this.currentIndex,{sourceTextures:f}=this.bindings[s];for(const _ in f)f[_].sampler=this.sampler}}let Geometry$1=class{constructor(s){Bt(this,"id");Bt(this,"topology");Bt(this,"vertexCount");Bt(this,"indices");Bt(this,"attributes");Bt(this,"userData",{});const{attributes:f={},indices:_=null,vertexCount:S=null}=s;this.id=s.id||uid("geometry"),this.topology=s.topology,_&&(this.indices=ArrayBuffer.isView(_)?{value:_,size:1}:_),this.attributes={};for(const[T,F]of Object.entries(f)){const M=ArrayBuffer.isView(F)?{value:F}:F;assert$5(ArrayBuffer.isView(M.value),`${this._print(T)}: must be typed array or object with value as typed array`),(T==="POSITION"||T==="positions")&&!M.size&&(M.size=3),T==="indices"?(assert$5(!this.indices),this.indices=M):this.attributes[T]=M}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=S||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(s){return`Geometry ${this.id} attribute ${s}`}_setAttributes(s,f){return this}_calculateVertexCount(s,f){if(f)return f.value.length;let _=1/0;for(const S of Object.values(s)){const{value:T,size:F,constant:M}=S;!M&&T&&F>=1&&(_=Math.min(_,T.length/F))}return assert$5(Number.isFinite(_)),_}};const PICKING_BLENDING={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class PickLayersPass extends LayersPass{constructor(){super(...arguments),this._colorEncoderState=null}render(s){return"pickingFBO"in s?this._drawPickingBuffer(s):super.render(s)}_drawPickingBuffer({layers:s,layerFilter:f,views:_,viewports:S,onViewportActive:T,pickingFBO:F,deviceRect:{x:M,y:P,width:H,height:J},cullRect:K,effects:oe,pass:se="picking",pickZ:ae,moduleParameters:ge}){this.pickZ=ae;const he=this._resetColorEncoder(ae),Be=[M,P,H,J],pe=super.render({target:F,layers:s,layerFilter:f,views:_,viewports:S,onViewportActive:T,cullRect:K,effects:oe==null?void 0:oe.filter(Re=>Re.useInPicking),pass:se,isPicking:!0,moduleParameters:ge,clearColor:[0,0,0,0],colorMask:15,scissorRect:Be});return this._colorEncoderState=null,{decodePickingColor:he&&decodeColor.bind(null,he),stats:pe}}shouldDrawLayer(s){const{pickable:f,operation:_}=s.props;return f&&_.includes("draw")||_.includes("terrain")||_.includes("mask")}getModuleParameters(){return{picking:{isActive:1,isAttribute:this.pickZ},lightSources:{}}}getLayerParameters(s,f,_){const S={depthMask:!0,depthTest:!0,depthRange:[0,1],...s.props.parameters},{pickable:T,operation:F}=s.props;return!this._colorEncoderState||F.includes("terrain")?S.blend=!1:T&&F.includes("draw")&&(Object.assign(S,PICKING_BLENDING),S.blend=!0,S.blendColor=encodeColor(this._colorEncoderState,s,_)),S}_resetColorEncoder(s){return this._colorEncoderState=s?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function encodeColor(d,s,f){const{byLayer:_,byAlpha:S}=d;let T,F=_.get(s);return F?(F.viewports.push(f),T=F.a):(T=_.size+1,T<=255?(F={a:T,layer:s,viewports:[f]},_.set(s,F),S[T]=F):(defaultLogger.warn("Too many pickable layers, only picking the first 255")(),T=0)),[0,0,0,T/255]}function decodeColor(d,s){const f=d.byAlpha[s[3]];return f&&{pickedLayer:f.layer,pickedViewports:f.viewports,pickedObjectIndex:f.layer.decodePickingColor(s)}}const LIFECYCLE={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},COMPONENT_SYMBOL=Symbol.for("component"),PROP_TYPES_SYMBOL=Symbol.for("propTypes"),DEPRECATED_PROPS_SYMBOL=Symbol.for("deprecatedProps"),ASYNC_DEFAULTS_SYMBOL=Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL_SYMBOL=Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED_SYMBOL=Symbol.for("asyncPropResolved");function flatten$1(d,s=()=>!0){return Array.isArray(d)?flattenArray(d,s,[]):s(d)?[d]:[]}function flattenArray(d,s,f){let _=-1;for(;++_<d.length;){const S=d[_];Array.isArray(S)?flattenArray(S,s,f):s(S)&&f.push(S)}return f}function fillArray({target:d,source:s,start:f=0,count:_=1}){const S=s.length,T=_*S;let F=0;for(let M=f;F<S;F++)d[M++]=s[F];for(;F<T;)F<T-F?(d.copyWithin(f+F,f,f+F),F*=2):(d.copyWithin(f+F,f,f+T-F),F=T);return d}class Resource{constructor(s,f,_){this._loadCount=0,this._subscribers=new Set,this.id=s,this.context=_,this.setData(f)}subscribe(s){this._subscribers.add(s)}unsubscribe(s){this._subscribers.delete(s)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(s,f){if(s===this._data&&!f)return;this._data=s;const _=++this._loadCount;let S=s;typeof s=="string"&&(S=load$3(s)),S instanceof Promise?(this.isLoaded=!1,this._loader=S.then(T=>{this._loadCount===_&&(this.isLoaded=!0,this._error=void 0,this._content=T)}).catch(T=>{this._loadCount===_&&(this.isLoaded=!0,this._error=T||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=s);for(const T of this._subscribers)T.onChange(this.getData())}}class ResourceManager{constructor(s){var f;this.protocol=s.protocol||"resource://",this._context={device:s.device,gl:(f=s.device)==null?void 0:f.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(s){return s.startsWith(this.protocol)?!0:s in this._resources}add({resourceId:s,data:f,forceUpdate:_=!1,persistent:S=!0}){let T=this._resources[s];T?T.setData(f,_):(T=new Resource(s,f,this._context),this._resources[s]=T),T.persistent=S}remove(s){const f=this._resources[s];f&&(f.delete(),delete this._resources[s])}unsubscribe({consumerId:s}){const f=this._consumers[s];if(f){for(const _ in f){const S=f[_],T=this._resources[S.resourceId];T&&T.unsubscribe(S)}delete this._consumers[s],this.prune()}}subscribe({resourceId:s,onChange:f,consumerId:_,requestId:S="default"}){const{_resources:T,protocol:F}=this;s.startsWith(F)&&(s=s.replace(F,""),T[s]||this.add({resourceId:s,data:null,persistent:!1}));const M=T[s];if(this._track(_,S,M,f),M)return M.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const s in this._resources)this._resources[s].delete()}_track(s,f,_,S){const T=this._consumers,F=T[s]=T[s]||{};let M=F[f];const P=M&&M.resourceId&&this._resources[M.resourceId];P&&(P.unsubscribe(M),this.prune()),_&&(M?(M.onChange=S,M.resourceId=_.id):M={onChange:S,resourceId:_.id},F[f]=M,_.subscribe(M))}_prune(){this._pruneRequest=null;for(const s of Object.keys(this._resources)){const f=this._resources[s];!f.persistent&&!f.inUse()&&(f.delete(),delete this._resources[s])}}}const TRACE_SET_LAYERS="layerManager.setLayers",TRACE_ACTIVATE_VIEWPORT="layerManager.activateViewport";class LayerManager{constructor(s,f){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=M=>{debug(TRACE_ACTIVATE_VIEWPORT,this,M),M&&(this.context.viewport=M)};const{deck:_,stats:S,viewport:T,timeline:F}=f||{};this.layers=[],this.resourceManager=new ResourceManager({device:s,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:s,gl:s==null?void 0:s.gl,deck:_,shaderAssembler:getShaderAssembler(),defaultShaderModules:[],renderPass:void 0,stats:S||new Stats({id:"deck.gl"}),viewport:T||new Viewport({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:F||new Timeline,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const s of this.layers)this._finalizeLayer(s)}needsRedraw(s={clearRedrawFlags:!1}){let f=this._needsRedraw;s.clearRedrawFlags&&(this._needsRedraw=!1);for(const _ of this.layers){const S=_.getNeedsRedraw(s);f=f||S}return f}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(s){this._needsRedraw=this._needsRedraw||s}setNeedsUpdate(s){this._needsUpdate=this._needsUpdate||s}getLayers({layerIds:s}={}){return s?this.layers.filter(f=>s.find(_=>f.id.indexOf(_)===0)):this.layers}setProps(s){"debug"in s&&(this._debug=s.debug),"userData"in s&&(this.context.userData=s.userData),"layers"in s&&(this._nextLayers=s.layers),"onError"in s&&(this.context.onError=s.onError)}setLayers(s,f){debug(TRACE_SET_LAYERS,this,f,s),this._lastRenderedLayers=s;const _=flatten$1(s,Boolean);for(const S of _)S.context=this.context;this._updateLayers(this.layers,_)}updateLayers(){const s=this.needsUpdate();s&&(this.setNeedsRedraw(`updating layers: ${s}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,s)),this._nextLayers=null}addDefaultShaderModule(s){const{defaultShaderModules:f}=this.context;f.find(_=>_.name===s.name)||(f.push(s),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(s){const{defaultShaderModules:f}=this.context,_=f.findIndex(S=>S.name===s.name);_>=0&&(f.splice(_,1),this._defaultShaderModulesChanged=!0)}_handleError(s,f,_){_.raiseError(f,`${s} of ${_}`)}_updateLayers(s,f){const _={};for(const F of s)_[F.id]?defaultLogger.warn(`Multiple old layers with same id ${F.id}`)():_[F.id]=F;if(this._defaultShaderModulesChanged){for(const F of s)F.setNeedsUpdate(),F.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const S=[];this._updateSublayersRecursively(f,_,S),this._finalizeOldLayers(_);let T=!1;for(const F of S)if(F.hasUniformTransition()){T=`Uniform transition in ${F}`;break}this._needsUpdate=T,this.layers=S}_updateSublayersRecursively(s,f,_){for(const S of s){S.context=this.context;const T=f[S.id];T===null&&defaultLogger.warn(`Multiple new layers with same id ${S.id}`)(),f[S.id]=null;let F=null;try{this._debug&&T!==S&&S.validateProps(),T?(this._transferLayerState(T,S),this._updateLayer(S)):this._initializeLayer(S),_.push(S),F=S.isComposite?S.getSubLayers():null}catch(M){this._handleError("matching",M,S)}F&&this._updateSublayersRecursively(F,f,_)}}_finalizeOldLayers(s){for(const f in s){const _=s[f];_&&this._finalizeLayer(_)}}_initializeLayer(s){try{s._initialize(),s.lifecycle=LIFECYCLE.INITIALIZED}catch(f){this._handleError("initialization",f,s)}}_transferLayerState(s,f){f._transferState(s),f.lifecycle=LIFECYCLE.MATCHED,f!==s&&(s.lifecycle=LIFECYCLE.AWAITING_GC)}_updateLayer(s){try{s._update()}catch(f){this._handleError("update",f,s)}}_finalizeLayer(s){this._needsRedraw=this._needsRedraw||`finalized ${s}`,s.lifecycle=LIFECYCLE.AWAITING_FINALIZATION;try{s._finalize(),s.lifecycle=LIFECYCLE.FINALIZED}catch(f){this._handleError("finalization",f,s)}}}function deepEqual(d,s,f){if(d===s)return!0;if(!f||!d||!s)return!1;if(Array.isArray(d)){if(!Array.isArray(s)||d.length!==s.length)return!1;for(let _=0;_<d.length;_++)if(!deepEqual(d[_],s[_],f-1))return!1;return!0}if(Array.isArray(s))return!1;if(typeof d=="object"&&typeof s=="object"){const _=Object.keys(d),S=Object.keys(s);if(_.length!==S.length)return!1;for(const T of _)if(!s.hasOwnProperty(T)||!deepEqual(d[T],s[T],f-1))return!1;return!0}return!1}class ViewManager{constructor(s){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=s.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=s.eventManager,this._eventCallbacks={onViewStateChange:s.onViewStateChange,onInteractionStateChange:s.onInteractionStateChange},Object.seal(this),this.setProps(s)}finalize(){for(const s in this.controllers){const f=this.controllers[s];f&&f.finalize()}this.controllers={}}needsRedraw(s={clearRedrawFlags:!1}){const f=this._needsRedraw;return s.clearRedrawFlags&&(this._needsRedraw=!1),f}setNeedsUpdate(s){this._needsUpdate=this._needsUpdate||s,this._needsRedraw=this._needsRedraw||s}updateViewStates(){for(const s in this.controllers){const f=this.controllers[s];f&&f.updateTransition()}}getViewports(s){return s?this._viewports.filter(f=>f.containsPixel(s)):this._viewports}getViews(){const s={};return this.views.forEach(f=>{s[f.id]=f}),s}getView(s){return this.views.find(f=>f.id===s)}getViewState(s){const f=typeof s=="string"?this.getView(s):s,_=f&&this.viewState[f.getViewStateId()]||this.viewState;return f?f.filterViewState(_):_}getViewport(s){return this._viewportMap[s]}unproject(s,f){const _=this.getViewports(),S={x:s[0],y:s[1]};for(let T=_.length-1;T>=0;--T){const F=_[T];if(F.containsPixel(S)){const M=s.slice();return M[0]-=F.x,M[1]-=F.y,F.unproject(M,f)}}return null}setProps(s){s.views&&this._setViews(s.views),s.viewState&&this._setViewState(s.viewState),("width"in s||"height"in s)&&this._setSize(s.width,s.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(s,f){(s!==this.width||f!==this.height)&&(this.width=s,this.height=f,this.setNeedsUpdate("Size changed"))}_setViews(s){s=flatten$1(s,Boolean),this._diffViews(s,this.views)&&this.setNeedsUpdate("views changed"),this.views=s}_setViewState(s){s?(!deepEqual(s,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=s):defaultLogger.warn("missing `viewState` or `initialViewState`")()}_createController(s,f){const _=f.type;return new _({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:T=>{var F;return(F=this.getView(s.id))==null?void 0:F.makeViewport({viewState:T,width:this.width,height:this.height})}})}_updateController(s,f,_,S){const T=s.controller;if(T&&_){const F={...f,...T,id:s.id,x:_.x,y:_.y,width:_.width,height:_.height};return(!S||S.constructor!==T.type)&&(S=this._createController(s,F)),S&&S.setProps(F),S}return null}_rebuildViewports(){const{views:s}=this,f=this.controllers;this._viewports=[],this.controllers={};let _=!1;for(let S=s.length;S--;){const T=s[S],F=this.getViewState(T),M=T.makeViewport({viewState:F,width:this.width,height:this.height});let P=f[T.id];const H=!!T.controller;H&&!P&&(_=!0),(_||!H)&&P&&(P.finalize(),P=null),this.controllers[T.id]=this._updateController(T,F,M,P),M&&this._viewports.unshift(M)}for(const S in f){const T=f[S];T&&!this.controllers[S]&&T.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(s=>{s.id&&(this._viewportMap[s.id]=this._viewportMap[s.id]||s)})}_diffViews(s,f){return s.length!==f.length?!0:s.some((_,S)=>!s[S].equals(f[S]))}}const PERCENT_OR_PIXELS_REGEX=/([0-9]+\.?[0-9]*)(%|px)/;function parsePosition(d){switch(typeof d){case"number":return{position:d,relative:!1};case"string":const s=PERCENT_OR_PIXELS_REGEX.exec(d);if(s&&s.length>=3){const f=s[2]==="%",_=parseFloat(s[1]);return{position:f?_/100:_,relative:f}}default:throw new Error(`Could not parse position string ${d}`)}}function getPosition$1(d,s){return d.relative?Math.round(d.position*s):d.position}class View{constructor(s){const{id:f,x:_=0,y:S=0,width:T="100%",height:F="100%",padding:M=null}=s;this.id=f||this.constructor.displayName||"view",this.props={...s,id:this.id},this._x=parsePosition(_),this._y=parsePosition(S),this._width=parsePosition(T),this._height=parsePosition(F),this._padding=M&&{left:parsePosition(M.left||0),right:parsePosition(M.right||0),top:parsePosition(M.top||0),bottom:parsePosition(M.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(s){return this===s?!0:this.ViewportType===s.ViewportType&&deepEqual(this.props,s.props,2)}makeViewport({width:s,height:f,viewState:_}){_=this.filterViewState(_);const S=this.getDimensions({width:s,height:f});return!S.height||!S.width?null:new this.ViewportType({..._,...this.props,...S})}getViewStateId(){const{viewState:s}=this.props;return typeof s=="string"?s:(s==null?void 0:s.id)||this.id}filterViewState(s){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const f={...s};for(const _ in this.props.viewState)_!=="id"&&(f[_]=this.props.viewState[_]);return f}return s}getDimensions({width:s,height:f}){const _={x:getPosition$1(this._x,s),y:getPosition$1(this._y,f),width:getPosition$1(this._width,s),height:getPosition$1(this._height,f)};return this._padding&&(_.padding={left:getPosition$1(this._padding.left,s),top:getPosition$1(this._padding.top,f),right:getPosition$1(this._padding.right,s),bottom:getPosition$1(this._padding.bottom,f)}),_}get controller(){const s=this.props.controller;return s?s===!0?{type:this.ControllerType}:typeof s=="function"?{type:s}:{type:this.ControllerType,...s}:null}}let Transition$1=class{constructor(s){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=s}get inProgress(){return this._inProgress}start(s){var f,_;this.cancel(),this.settings=s,this._inProgress=!0,(_=(f=this.settings).onStart)==null||_.call(f,this)}end(){var s,f;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(f=(s=this.settings).onEnd)==null||f.call(s,this))}cancel(){var s,f;this._inProgress&&((f=(s=this.settings).onInterrupt)==null||f.call(s,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var s,f;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:_,settings:S}=this;this._handle=_.addChannel({delay:_.getTime(),duration:S.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(f=(s=this.settings).onUpdate)==null||f.call(s,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}};const noop$8=()=>{},TRANSITION_EVENTS={BREAK:1,SNAP_TO_END:2,IGNORE:3},DEFAULT_EASING=d=>d,DEFAULT_INTERRUPTION=TRANSITION_EVENTS.BREAK;class TransitionManager{constructor(s){this._onTransitionUpdate=f=>{const{time:_,settings:{interpolator:S,startProps:T,endProps:F,duration:M,easing:P}}=f,H=P(_/M),J=S.interpolateProps(T,F,H);this.propsInTransition=this.getControllerState({...this.props,...J}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=s.getControllerState,this.propsInTransition=null,this.transition=new Transition$1(s.timeline),this.onViewStateChange=s.onViewStateChange||noop$8,this.onStateChange=s.onStateChange||noop$8}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(s){let f=!1;const _=this.props;if(this.props=s,!_||this._shouldIgnoreViewportChange(_,s))return!1;if(this._isTransitionEnabled(s)){let S=_;if(this.transition.inProgress){const{interruption:T,endProps:F}=this.transition.settings;S={..._,...T===TRANSITION_EVENTS.SNAP_TO_END?F:this.propsInTransition||_}}this._triggerTransition(S,s),f=!0}else this.transition.cancel();return f}updateTransition(){this.transition.update()}_isTransitionEnabled(s){const{transitionDuration:f,transitionInterpolator:_}=s;return(f>0||f==="auto")&&!!_}_isUpdateDueToCurrentTransition(s){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(s,this.propsInTransition):!1}_shouldIgnoreViewportChange(s,f){return this.transition.inProgress?this.transition.settings.interruption===TRANSITION_EVENTS.IGNORE||this._isUpdateDueToCurrentTransition(f):this._isTransitionEnabled(f)?f.transitionInterpolator.arePropsEqual(s,f):!0}_triggerTransition(s,f){const _=this.getControllerState(s),S=this.getControllerState(f).shortestPathFrom(_),T=f.transitionInterpolator,F=T.getDuration?T.getDuration(s,f):f.transitionDuration;if(F===0)return;const M=T.initializeProps(s,S);this.propsInTransition={};const P={duration:F,easing:f.transitionEasing||DEFAULT_EASING,interpolator:T,interruption:f.transitionInterruption||DEFAULT_INTERRUPTION,startProps:M.start,endProps:M.end,onStart:f.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(f.onTransitionInterrupt),onEnd:this._onTransitionEnd(f.onTransitionEnd)};this.transition.start(P),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(s){return f=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),s==null||s(f)}}}function assert$2(d,s){if(!d)throw new Error(s||"deck.gl: assertion failed.")}class TransitionInterpolator{constructor(s){const{compare:f,extract:_,required:S}=s;this._propsToCompare=f,this._propsToExtract=_||f,this._requiredProps=S}arePropsEqual(s,f){for(const _ of this._propsToCompare)if(!(_ in s)||!(_ in f)||!equals$2(s[_],f[_]))return!1;return!0}initializeProps(s,f){const _={},S={};for(const T of this._propsToExtract)(T in s||T in f)&&(_[T]=s[T],S[T]=f[T]);return this._checkRequiredProps(_),this._checkRequiredProps(S),{start:_,end:S}}getDuration(s,f){return f.transitionDuration}_checkRequiredProps(s){this._requiredProps&&this._requiredProps.forEach(f=>{const _=s[f];assert$2(Number.isFinite(_)||Array.isArray(_),`${f} is required for transition`)})}}const DEFAULT_PROPS=["longitude","latitude","zoom","bearing","pitch"],DEFAULT_REQUIRED_PROPS=["longitude","latitude","zoom"];class LinearInterpolator extends TransitionInterpolator{constructor(s={}){const f=Array.isArray(s)?s:s.transitionProps,_=Array.isArray(s)?{}:s;_.transitionProps=Array.isArray(f)?{compare:f,required:f}:f||{compare:DEFAULT_PROPS,required:DEFAULT_REQUIRED_PROPS},super(_.transitionProps),this.opts=_}initializeProps(s,f){const _=super.initializeProps(s,f),{makeViewport:S,around:T}=this.opts;if(S&&T){const F=S(s),M=S(f),P=F.unproject(T);_.start.around=T,Object.assign(_.end,{around:M.project(P),aroundPosition:P,width:f.width,height:f.height})}return _}interpolateProps(s,f,_){const S={};for(const T of this._propsToExtract)S[T]=lerp$6(s[T]||0,f[T]||0,_);if(f.aroundPosition&&this.opts.makeViewport){const T=this.opts.makeViewport({...f,...S});Object.assign(S,T.panByPosition(f.aroundPosition,lerp$6(s.around,f.around,_)))}return S}}const NO_TRANSITION_PROPS={transitionDuration:0},DEFAULT_INERTIA=300,INERTIA_EASING=d=>1-(1-d)*(1-d),EVENT_TYPES$1={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},pinchEventWorkaround={};class Controller{constructor(s){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new TransitionManager({...s,getControllerState:f=>new this.ControllerState(f),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=s.eventManager,this.onViewStateChange=s.onViewStateChange||(()=>{}),this.onStateChange=s.onStateChange||(()=>{}),this.makeViewport=s.makeViewport}set events(s){this.toggleEvents(this._customEvents,!1),this.toggleEvents(s,!0),this._customEvents=s,this.props&&this.setProps(this.props)}finalize(){var s;for(const f in this._events)this._events[f]&&((s=this.eventManager)==null||s.off(f,this.handleEvent));this.transitionManager.finalize()}handleEvent(s){this._controllerState=void 0;const f=this._eventStartBlocked;switch(s.type){case"panstart":return f?!1:this._onPanStart(s);case"panmove":return this._onPan(s);case"panend":return this._onPanEnd(s);case"pinchstart":return f?!1:this._onPinchStart(s);case"pinchmove":return this._onPinch(s);case"pinchend":return this._onPinchEnd(s);case"tripanstart":return f?!1:this._onTriplePanStart(s);case"tripanmove":return this._onTriplePan(s);case"tripanend":return this._onTriplePanEnd(s);case"doubletap":return this._onDoubleTap(s);case"wheel":return this._onWheel(s);case"keydown":return this._onKeyDown(s);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(s){const{x:f,y:_}=this.props,{offsetCenter:S}=s;return[S.x-f,S.y-_]}isPointInBounds(s,f){const{width:_,height:S}=this.props;if(f&&f.handled)return!1;const T=s[0]>=0&&s[0]<=_&&s[1]>=0&&s[1]<=S;return T&&f&&f.stopPropagation(),T}isFunctionKeyPressed(s){const{srcEvent:f}=s;return!!(f.metaKey||f.altKey||f.ctrlKey||f.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(s){const f=setTimeout(()=>{this._eventStartBlocked===f&&(this._eventStartBlocked=null)},s);this._eventStartBlocked=f}setProps(s){s.dragMode&&(this.dragMode=s.dragMode),this.props=s,"transitionInterpolator"in s||(s.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(s);const{inertia:f}=s;this.inertia=Number.isFinite(f)?f:f===!0?DEFAULT_INERTIA:0;const{scrollZoom:_=!0,dragPan:S=!0,dragRotate:T=!0,doubleClickZoom:F=!0,touchZoom:M=!0,touchRotate:P=!1,keyboard:H=!0}=s,J=!!this.onViewStateChange;this.toggleEvents(EVENT_TYPES$1.WHEEL,J&&_),this.toggleEvents(EVENT_TYPES$1.PAN,J),this.toggleEvents(EVENT_TYPES$1.PINCH,J&&(M||P)),this.toggleEvents(EVENT_TYPES$1.TRIPLE_PAN,J&&P),this.toggleEvents(EVENT_TYPES$1.DOUBLE_TAP,J&&F),this.toggleEvents(EVENT_TYPES$1.KEYBOARD,J&&H),this.scrollZoom=_,this.dragPan=S,this.dragRotate=T,this.doubleClickZoom=F,this.touchZoom=M,this.touchRotate=P,this.keyboard=H}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(s,f){this.eventManager&&s.forEach(_=>{this._events[_]!==f&&(this._events[_]=f,f?this.eventManager.on(_,this.handleEvent):this.eventManager.off(_,this.handleEvent))})}updateViewport(s,f=null,_={}){const S={...s.getViewportProps(),...f},T=this.controllerState!==s;if(this.state=s.getState(),this._setInteractionState(_),T){const F=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:S,interactionState:this._interactionState,oldViewState:F,viewId:this.props.id})}}_onTransition(s){this.onViewStateChange({...s,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(s){Object.assign(this._interactionState,s),this.onStateChange(this._interactionState)}_onPanStart(s){const f=this.getCenter(s);if(!this.isPointInBounds(f,s))return!1;let _=this.isFunctionKeyPressed(s)||s.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(_=!_);const S=this.controllerState[_?"panStart":"rotateStart"]({pos:f});return this._panMove=_,this.updateViewport(S,NO_TRANSITION_PROPS,{isDragging:!0}),!0}_onPan(s){return this.isDragging()?this._panMove?this._onPanMove(s):this._onPanRotate(s):!1}_onPanEnd(s){return this.isDragging()?this._panMove?this._onPanMoveEnd(s):this._onPanRotateEnd(s):!1}_onPanMove(s){if(!this.dragPan)return!1;const f=this.getCenter(s),_=this.controllerState.pan({pos:f});return this.updateViewport(_,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(s){const{inertia:f}=this;if(this.dragPan&&f&&s.velocity){const _=this.getCenter(s),S=[_[0]+s.velocityX*f/2,_[1]+s.velocityY*f/2],T=this.controllerState.pan({pos:S}).panEnd();this.updateViewport(T,{...this._getTransitionProps(),transitionDuration:f,transitionEasing:INERTIA_EASING},{isDragging:!1,isPanning:!0})}else{const _=this.controllerState.panEnd();this.updateViewport(_,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(s){if(!this.dragRotate)return!1;const f=this.getCenter(s),_=this.controllerState.rotate({pos:f});return this.updateViewport(_,NO_TRANSITION_PROPS,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(s){const{inertia:f}=this;if(this.dragRotate&&f&&s.velocity){const _=this.getCenter(s),S=[_[0]+s.velocityX*f/2,_[1]+s.velocityY*f/2],T=this.controllerState.rotate({pos:S}).rotateEnd();this.updateViewport(T,{...this._getTransitionProps(),transitionDuration:f,transitionEasing:INERTIA_EASING},{isDragging:!1,isRotating:!0})}else{const _=this.controllerState.rotateEnd();this.updateViewport(_,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(s){if(!this.scrollZoom)return!1;const f=this.getCenter(s);if(!this.isPointInBounds(f,s))return!1;s.srcEvent.preventDefault();const{speed:_=.01,smooth:S=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:T}=s;let F=2/(1+Math.exp(-Math.abs(T*_)));T<0&&F!==0&&(F=1/F);const M=this.controllerState.zoom({pos:f,scale:F});return this.updateViewport(M,{...this._getTransitionProps({around:f}),transitionDuration:S?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(s){const f=this.getCenter(s);if(!this.isPointInBounds(f,s))return!1;const _=this.controllerState.rotateStart({pos:f});return this.updateViewport(_,NO_TRANSITION_PROPS,{isDragging:!0}),!0}_onTriplePan(s){if(!this.touchRotate||!this.isDragging())return!1;const f=this.getCenter(s);f[0]-=s.deltaX;const _=this.controllerState.rotate({pos:f});return this.updateViewport(_,NO_TRANSITION_PROPS,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(s){if(!this.isDragging())return!1;const{inertia:f}=this;if(this.touchRotate&&f&&s.velocityY){const _=this.getCenter(s),S=[_[0],_[1]+=s.velocityY*f/2],T=this.controllerState.rotate({pos:S});this.updateViewport(T,{...this._getTransitionProps(),transitionDuration:f,transitionEasing:INERTIA_EASING},{isDragging:!1,isRotating:!0}),this.blockEvents(f)}else{const _=this.controllerState.rotateEnd();this.updateViewport(_,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(s){const f=this.getCenter(s);if(!this.isPointInBounds(f,s))return!1;const _=this.controllerState.zoomStart({pos:f}).rotateStart({pos:f});return pinchEventWorkaround._startPinchRotation=s.rotation,pinchEventWorkaround._lastPinchEvent=s,this.updateViewport(_,NO_TRANSITION_PROPS,{isDragging:!0}),!0}_onPinch(s){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let f=this.controllerState;if(this.touchZoom){const{scale:_}=s,S=this.getCenter(s);f=f.zoom({pos:S,scale:_})}if(this.touchRotate){const{rotation:_}=s;f=f.rotate({deltaAngleX:pinchEventWorkaround._startPinchRotation-_})}return this.updateViewport(f,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),pinchEventWorkaround._lastPinchEvent=s,!0}_onPinchEnd(s){if(!this.isDragging())return!1;const{inertia:f}=this,{_lastPinchEvent:_}=pinchEventWorkaround;if(this.touchZoom&&f&&_&&s.scale!==_.scale){const S=this.getCenter(s);let T=this.controllerState.rotateEnd();const F=Math.log2(s.scale),M=(F-Math.log2(_.scale))/(s.deltaTime-_.deltaTime),P=Math.pow(2,F+M*f/2);T=T.zoom({pos:S,scale:P}).zoomEnd(),this.updateViewport(T,{...this._getTransitionProps({around:S}),transitionDuration:f,transitionEasing:INERTIA_EASING},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(f)}else{const S=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(S,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return pinchEventWorkaround._startPinchRotation=null,pinchEventWorkaround._lastPinchEvent=null,!0}_onDoubleTap(s){if(!this.doubleClickZoom)return!1;const f=this.getCenter(s);if(!this.isPointInBounds(f,s))return!1;const _=this.isFunctionKeyPressed(s),S=this.controllerState.zoom({pos:f,scale:_?.5:2});return this.updateViewport(S,this._getTransitionProps({around:f}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(s){if(!this.keyboard)return!1;const f=this.isFunctionKeyPressed(s),{zoomSpeed:_,moveSpeed:S,rotateSpeedX:T,rotateSpeedY:F}=this.keyboard===!0?{}:this.keyboard,{controllerState:M}=this;let P;const H={};switch(s.srcEvent.code){case"Minus":P=f?M.zoomOut(_).zoomOut(_):M.zoomOut(_),H.isZooming=!0;break;case"Equal":P=f?M.zoomIn(_).zoomIn(_):M.zoomIn(_),H.isZooming=!0;break;case"ArrowLeft":f?(P=M.rotateLeft(T),H.isRotating=!0):(P=M.moveLeft(S),H.isPanning=!0);break;case"ArrowRight":f?(P=M.rotateRight(T),H.isRotating=!0):(P=M.moveRight(S),H.isPanning=!0);break;case"ArrowUp":f?(P=M.rotateUp(F),H.isRotating=!0):(P=M.moveUp(S),H.isPanning=!0);break;case"ArrowDown":f?(P=M.rotateDown(F),H.isRotating=!0):(P=M.moveDown(S),H.isPanning=!0);break;default:return!1}return this.updateViewport(P,this._getTransitionProps(),H),!0}_getTransitionProps(s){const{transition:f}=this;return!f||!f.transitionInterpolator?NO_TRANSITION_PROPS:s?{...f,transitionInterpolator:new LinearInterpolator({...s,...f.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:f}}class ViewState{constructor(s,f){this._viewportProps=this.applyConstraints(s),this._state=f}getViewportProps(){return this._viewportProps}getState(){return this._state}}const PITCH_MOUSE_THRESHOLD=5,PITCH_ACCEL=1.2;class MapState extends ViewState{constructor(s){const{width:f,height:_,latitude:S,longitude:T,zoom:F,bearing:M=0,pitch:P=0,altitude:H=1.5,position:J=[0,0,0],maxZoom:K=20,minZoom:oe=0,maxPitch:se=60,minPitch:ae=0,startPanLngLat:ge,startZoomLngLat:he,startRotatePos:Be,startBearing:pe,startPitch:be,startZoom:Re,normalize:Fe=!0}=s;assert$2(Number.isFinite(T)),assert$2(Number.isFinite(S)),assert$2(Number.isFinite(F)),super({width:f,height:_,latitude:S,longitude:T,zoom:F,bearing:M,pitch:P,altitude:H,maxZoom:K,minZoom:oe,maxPitch:se,minPitch:ae,normalize:Fe,position:J},{startPanLngLat:ge,startZoomLngLat:he,startRotatePos:Be,startBearing:pe,startPitch:be,startZoom:Re}),this.makeViewport=s.makeViewport}panStart({pos:s}){return this._getUpdatedState({startPanLngLat:this._unproject(s)})}pan({pos:s,startPos:f}){const _=this.getState().startPanLngLat||this._unproject(f);if(!_)return this;const T=this.makeViewport(this.getViewportProps()).panByPosition(_,s);return this._getUpdatedState(T)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:s}){return this._getUpdatedState({startRotatePos:s,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:s,deltaAngleX:f=0,deltaAngleY:_=0}){const{startRotatePos:S,startBearing:T,startPitch:F}=this.getState();if(!S||T===void 0||F===void 0)return this;let M;return s?M=this._getNewRotation(s,S,F,T):M={bearing:T+f,pitch:F+_},this._getUpdatedState(M)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:s}){return this._getUpdatedState({startZoomLngLat:this._unproject(s),startZoom:this.getViewportProps().zoom})}zoom({pos:s,startPos:f,scale:_}){let{startZoom:S,startZoomLngLat:T}=this.getState();if(T||(S=this.getViewportProps().zoom,T=this._unproject(f)||this._unproject(s)),!T)return this;const{maxZoom:F,minZoom:M}=this.getViewportProps();let P=S+Math.log2(_);P=clamp$3(P,M,F);const H=this.makeViewport({...this.getViewportProps(),zoom:P});return this._getUpdatedState({zoom:P,...H.panByPosition(T,s)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(s=2){return this._zoomFromCenter(s)}zoomOut(s=2){return this._zoomFromCenter(1/s)}moveLeft(s=100){return this._panFromCenter([s,0])}moveRight(s=100){return this._panFromCenter([-s,0])}moveUp(s=100){return this._panFromCenter([0,s])}moveDown(s=100){return this._panFromCenter([0,-s])}rotateLeft(s=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-s})}rotateRight(s=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+s})}rotateUp(s=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+s})}rotateDown(s=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-s})}shortestPathFrom(s){const f=s.getViewportProps(),_={...this.getViewportProps()},{bearing:S,longitude:T}=_;return Math.abs(S-f.bearing)>180&&(_.bearing=S<0?S+360:S-360),Math.abs(T-f.longitude)>180&&(_.longitude=T<0?T+360:T-360),_}applyConstraints(s){const{maxZoom:f,minZoom:_,zoom:S}=s;s.zoom=clamp$3(S,_,f);const{maxPitch:T,minPitch:F,pitch:M}=s;s.pitch=clamp$3(M,F,T);const{normalize:P=!0}=s;return P&&Object.assign(s,normalizeViewportProps(s)),s}_zoomFromCenter(s){const{width:f,height:_}=this.getViewportProps();return this.zoom({pos:[f/2,_/2],scale:s})}_panFromCenter(s){const{width:f,height:_}=this.getViewportProps();return this.pan({startPos:[f/2,_/2],pos:[f/2+s[0],_/2+s[1]]})}_getUpdatedState(s){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...s})}_unproject(s){const f=this.makeViewport(this.getViewportProps());return s&&f.unproject(s)}_getNewRotation(s,f,_,S){const T=s[0]-f[0],F=s[1]-f[1],M=s[1],P=f[1],{width:H,height:J}=this.getViewportProps(),K=T/H;let oe=0;F>0?Math.abs(J-P)>PITCH_MOUSE_THRESHOLD&&(oe=F/(P-J)*PITCH_ACCEL):F<0&&P>PITCH_MOUSE_THRESHOLD&&(oe=1-M/P),oe=clamp$3(oe,-1,1);const{minPitch:se,maxPitch:ae}=this.getViewportProps(),ge=S+180*K;let he=_;return oe>0?he=_+oe*(ae-_):oe<0&&(he=_-oe*(se-_)),{pitch:he,bearing:ge}}}class MapController extends Controller{constructor(){super(...arguments),this.ControllerState=MapState,this.transition={transitionDuration:300,transitionInterpolator:new LinearInterpolator({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(s){s.position=s.position||[0,0,0];const f=this.props;super.setProps(s),(!f||f.height!==s.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...s,...this.state}))}}class MapView extends View{constructor(s={}){super(s)}get ViewportType(){return WebMercatorViewport$1}get ControllerType(){return MapController}}MapView.displayName="MapView";const DEFAULT_LIGHTING_EFFECT=new LightingEffect;function compareEffects(d,s){const f=d.order??1/0,_=s.order??1/0;return f-_}class EffectManager{constructor(s){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=s,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(s){const f=this._defaultEffects;if(!f.find(_=>_.id===s.id)){const _=f.findIndex(S=>compareEffects(S,s)>0);_<0?f.push(s):f.splice(_,0,s),s.setup(this._context),this._setEffects(this.effects)}}setProps(s){"effects"in s&&(deepEqual(s.effects,this.effects,1)||this._setEffects(s.effects))}needsRedraw(s={clearRedrawFlags:!1}){const f=this._needsRedraw;return s.clearRedrawFlags&&(this._needsRedraw=!1),f}getEffects(){return this._resolvedEffects}_setEffects(s){const f={};for(const S of this.effects)f[S.id]=S;const _=[];for(const S of s){const T=f[S.id];let F=S;T&&T!==S?T.setProps?(T.setProps(S.props),F=T):T.cleanup(this._context):T||S.setup(this._context),_.push(F),delete f[S.id]}for(const S in f)f[S].cleanup(this._context);this.effects=_,this._resolvedEffects=_.concat(this._defaultEffects),s.some(S=>S instanceof LightingEffect)||this._resolvedEffects.push(DEFAULT_LIGHTING_EFFECT),this._needsRedraw="effects changed"}finalize(){for(const s of this._resolvedEffects)s.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class DrawLayersPass extends LayersPass{shouldDrawLayer(s){const{operation:f}=s.props;return f.includes("draw")||f.includes("terrain")}}const TRACE_RENDER_LAYERS$1="deckRenderer.renderLayers";class DeckRenderer{constructor(s){this.device=s,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new DrawLayersPass(s),this.pickLayersPass=new PickLayersPass(s),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(s){this.layerFilter!==s.layerFilter&&(this.layerFilter=s.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==s.drawPickingColors&&(this.drawPickingColors=s.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(s){if(!s.viewports.length)return;const f=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,_={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...s};_.effects&&this._preRender(_.effects,_);const S=this.lastPostProcessEffect?this.renderBuffers[0]:_.target;this.lastPostProcessEffect&&(_.clearColor=[0,0,0,0],_.clearCanvas=!0);const T=f.render({..._,target:S});_.effects&&this._postRender(_.effects,_),this.renderCount++,debug(TRACE_RENDER_LAYERS$1,this,T,s)}needsRedraw(s={clearRedrawFlags:!1}){const f=this._needsRedraw;return s.clearRedrawFlags&&(this._needsRedraw=!1),f}finalize(){const{renderBuffers:s}=this;for(const f of s)f.delete();s.length=0}_preRender(s,f){this.lastPostProcessEffect=null,f.preRenderStats=f.preRenderStats||{};for(const _ of s)f.preRenderStats[_.id]=_.preRender(f),_.postRender&&(this.lastPostProcessEffect=_.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:s}=this,f=this.device.canvasContext.getDrawingBufferSize();s.length===0&&[0,1].map(_=>{const S=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});s.push(this.device.createFramebuffer({id:`deck-renderbuffer-${_}`,colorAttachments:[S]}))});for(const _ of s)_.resize(f)}_postRender(s,f){const{renderBuffers:_}=this,S={...f,inputBuffer:_[0],swapBuffer:_[1]};for(const T of s)if(T.postRender){S.target=T.id===this.lastPostProcessEffect?f.target:void 0;const F=T.postRender(S);S.inputBuffer=F,S.swapBuffer=F===_[0]?_[1]:_[0]}}}const NO_PICKED_OBJECT={pickedColor:null,pickedObjectIndex:-1};function getClosestObject({pickedColors:d,decodePickingColor:s,deviceX:f,deviceY:_,deviceRadius:S,deviceRect:T}){const{x:F,y:M,width:P,height:H}=T;let J=S*S,K=-1,oe=0;for(let se=0;se<H;se++){const ae=se+M-_,ge=ae*ae;if(ge>J)oe+=4*P;else for(let he=0;he<P;he++){if(d[oe+3]-1>=0){const pe=he+F-f,be=pe*pe+ge;be<=J&&(J=be,K=oe)}oe+=4}}if(K>=0){const se=d.slice(K,K+4),ae=s(se);if(ae){const ge=Math.floor(K/4/P),he=K/4-ge*P;return{...ae,pickedColor:se,pickedX:F+he,pickedY:M+ge}}defaultLogger.error("Picked non-existent layer. Is picking buffer corrupt?")()}return NO_PICKED_OBJECT}function getUniqueObjects({pickedColors:d,decodePickingColor:s}){const f=new Map;if(d){for(let _=0;_<d.length;_+=4)if(d[_+3]-1>=0){const T=d.slice(_,_+4),F=T.join(",");if(!f.has(F)){const M=s(T);M?f.set(F,{...M,color:T}):defaultLogger.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(f.values())}function getEmptyPickingInfo({pickInfo:d,viewports:s,pixelRatio:f,x:_,y:S,z:T}){let F=s[0];s.length>1&&(F=getViewportFromCoordinates((d==null?void 0:d.pickedViewports)||s,{x:_,y:S}));let M;if(F){const P=[_-F.x,S-F.y];T!==void 0&&(P[2]=T),M=F.unproject(P)}return{color:null,layer:null,viewport:F,index:-1,picked:!1,x:_,y:S,pixel:[_,S],coordinate:M,devicePixel:d&&"pickedX"in d?[d.pickedX,d.pickedY]:void 0,pixelRatio:f}}function processPickInfo(d){const{pickInfo:s,lastPickedInfo:f,mode:_,layers:S}=d,{pickedColor:T,pickedLayer:F,pickedObjectIndex:M}=s,P=F?[F]:[];if(_==="hover"){const K=f.index,oe=f.layerId,se=F?F.props.id:null;if(se!==oe||M!==K){if(se!==oe){const ae=S.find(ge=>ge.props.id===oe);ae&&P.unshift(ae)}f.layerId=se,f.index=M,f.info=null}}const H=getEmptyPickingInfo(d),J=new Map;return J.set(null,H),P.forEach(K=>{let oe={...H};K===F&&(oe.color=T,oe.index=M,oe.picked=!0),oe=getLayerPickingInfo({layer:K,info:oe,mode:_});const se=oe.layer;K===F&&_==="hover"&&(f.info=oe),J.set(se.id,oe),_==="hover"&&se.updateAutoHighlight(oe)}),J}function getLayerPickingInfo({layer:d,info:s,mode:f}){for(;d&&s;){const _=s.layer||null;s.sourceLayer=_,s.layer=d,s=d.getPickingInfo({info:s,mode:f,sourceLayer:_}),d=d.parent}return s}function getViewportFromCoordinates(d,s){for(let f=d.length-1;f>=0;f--){const _=d[f];if(_.containsPixel(s))return _}return d[0]}class DeckPicker{constructor(s){this._pickable=!0,this.device=s,this.pickLayersPass=new PickLayersPass(s),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(s){"layerFilter"in s&&(this.layerFilter=s.layerFilter),"_pickable"in s&&(this._pickable=s._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(s){return this._pickClosestObject(s)}pickObjects(s){return this._pickVisibleObjects(s)}getLastPickedObject({x:s,y:f,layers:_,viewports:S},T=this.lastPickedInfo.info){const F=T&&T.layer&&T.layer.id,M=T&&T.viewport&&T.viewport.id,P=F?_.find(oe=>oe.id===F):null,H=M&&S.find(oe=>oe.id===M)||S[0],J=H&&H.unproject([s-H.x,f-H.y]);return{...T,...{x:s,y:f,viewport:H,coordinate:J,layer:P}}}_resizeBuffer(){var f,_;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const S=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=S}const{canvas:s}=this.device.getCanvasContext();(f=this.pickingFBO)==null||f.resize({width:s.width,height:s.height}),(_=this.depthFBO)==null||_.resize({width:s.width,height:s.height})}_getPickable(s){if(this._pickable===!1)return null;const f=s.filter(_=>this.pickLayersPass.shouldDrawLayer(_)&&!_.isComposite);return f.length?f:null}_pickClosestObject({layers:s,views:f,viewports:_,x:S,y:T,radius:F=0,depth:M=1,mode:P="query",unproject3D:H,onViewportActive:J,effects:K}){const oe=this.device.canvasContext.cssToDeviceRatio(),se=this._getPickable(s);if(!se||_.length===0)return{result:[],emptyInfo:getEmptyPickingInfo({viewports:_,x:S,y:T,pixelRatio:oe})};this._resizeBuffer();const ae=this.device.canvasContext.cssToDevicePixels([S,T],!0),ge=[ae.x+Math.floor(ae.width/2),ae.y+Math.floor(ae.height/2)],he=Math.round(F*oe),{width:Be,height:pe}=this.pickingFBO,be=this._getPickingRect({deviceX:ge[0],deviceY:ge[1],deviceRadius:he,deviceWidth:Be,deviceHeight:pe}),Re={x:S-F,y:T-F,width:F*2+1,height:F*2+1};let Fe;const Me=[],ve=new Set;for(let At=0;At<M;At++){let Ct;if(be){const It=this._drawAndSample({layers:se,views:f,viewports:_,onViewportActive:J,deviceRect:be,cullRect:Re,effects:K,pass:`picking:${P}`});Ct=getClosestObject({...It,deviceX:ge[0],deviceY:ge[1],deviceRadius:he,deviceRect:be})}else Ct={pickedColor:null,pickedObjectIndex:-1};let Rt;if(Ct.pickedLayer&&H&&this.depthFBO){const{pickedColors:It}=this._drawAndSample({layers:[Ct.pickedLayer],views:f,viewports:_,onViewportActive:J,deviceRect:{x:Ct.pickedX,y:Ct.pickedY,width:1,height:1},cullRect:Re,effects:K,pass:`picking:${P}:z`},!0);It[3]&&(Rt=It[0])}Ct.pickedLayer&&At+1<M&&(ve.add(Ct.pickedLayer),Ct.pickedLayer.disablePickingIndex(Ct.pickedObjectIndex)),Fe=processPickInfo({pickInfo:Ct,lastPickedInfo:this.lastPickedInfo,mode:P,layers:se,viewports:_,x:S,y:T,z:Rt,pixelRatio:oe});for(const It of Fe.values())It.layer&&Me.push(It);if(!Ct.pickedColor)break}for(const At of ve)At.restorePickingColors();return{result:Me,emptyInfo:Fe.get(null)}}_pickVisibleObjects({layers:s,views:f,viewports:_,x:S,y:T,width:F=1,height:M=1,mode:P="query",maxObjects:H=null,onViewportActive:J,effects:K}){const oe=this._getPickable(s);if(!oe||_.length===0)return[];this._resizeBuffer();const se=this.device.canvasContext.cssToDeviceRatio(),ae=this.device.canvasContext.cssToDevicePixels([S,T],!0),ge=ae.x,he=ae.y+ae.height,Be=this.device.canvasContext.cssToDevicePixels([S+F,T+M],!0),pe=Be.x+Be.width,be=Be.y,Re={x:ge,y:be,width:pe-ge,height:he-be},Fe=this._drawAndSample({layers:oe,views:f,viewports:_,onViewportActive:J,deviceRect:Re,cullRect:{x:S,y:T,width:F,height:M},effects:K,pass:`picking:${P}`}),Me=getUniqueObjects(Fe),ve=new Map,At=[],Ct=Number.isFinite(H);for(let Rt=0;Rt<Me.length&&!(Ct&&At.length>=H);Rt++){const It=Me[Rt];let xt={color:It.pickedColor,layer:null,index:It.pickedObjectIndex,picked:!0,x:S,y:T,pixelRatio:se};xt=getLayerPickingInfo({layer:It.pickedLayer,info:xt,mode:P});const wt=xt.layer.id;ve.has(wt)||ve.set(wt,new Set);const Ft=ve.get(wt),jt=xt.object??xt.index;Ft.has(jt)||(Ft.add(jt),At.push(xt))}return At}_drawAndSample({layers:s,views:f,viewports:_,onViewportActive:S,deviceRect:T,cullRect:F,effects:M,pass:P},H=!1){const J=H?this.depthFBO:this.pickingFBO,K={layers:s,layerFilter:this.layerFilter,views:f,viewports:_,onViewportActive:S,pickingFBO:J,deviceRect:T,cullRect:F,effects:M,pass:P,pickZ:H,preRenderStats:{}};for(const pe of M)pe.useInPicking&&(K.preRenderStats[pe.id]=pe.preRender(K));const{decodePickingColor:oe}=this.pickLayersPass.render(K),{x:se,y:ae,width:ge,height:he}=T,Be=new(H?Float32Array:Uint8Array)(ge*he*4);return this.device.readPixelsToArrayWebGL(J,{sourceX:se,sourceY:ae,sourceWidth:ge,sourceHeight:he,target:Be}),{pickedColors:Be,decodePickingColor:oe}}_getPickingRect({deviceX:s,deviceY:f,deviceRadius:_,deviceWidth:S,deviceHeight:T}){const F=Math.max(0,s-_),M=Math.max(0,f-_),P=Math.min(S,s+_+1)-F,H=Math.min(T,f+_+1)-M;return P<=0||H<=0?null:{x:F,y:M,width:P,height:H}}}const PLACEMENTS={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},DEFAULT_PLACEMENT="top-left",ROOT_CONTAINER_ID="__root";class WidgetManager{constructor({deck:s,parentElement:f}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=s,this.parentElement=f}getWidgets(){return this.resolvedWidgets}setProps(s){s.widgets&&!deepEqual(s.widgets,this.widgets,1)&&this._setWidgets(s.widgets)}finalize(){for(const s of this.getWidgets())this._remove(s);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const s in this.containers)this.containers[s].remove()}addDefault(s){this.defaultWidgets.find(f=>f.id===s.id)||(this._add(s),this.defaultWidgets.push(s),this._setWidgets(this.widgets))}_setWidgets(s){const f={};for(const _ of this.resolvedWidgets)f[_.id]=_;this.resolvedWidgets.length=0;for(const _ of this.defaultWidgets)f[_.id]=null,this.resolvedWidgets.push(_);for(let _ of s){const S=f[_.id];S?S.viewId!==_.viewId||S.placement!==_.placement?(this._remove(S),this._add(_)):_!==S&&(S.setProps(_.props),_=S):this._add(_),f[_.id]=null,this.resolvedWidgets.push(_)}for(const _ in f){const S=f[_];S&&this._remove(S)}this.widgets=s}_add(s){const{viewId:f=null,placement:_=DEFAULT_PLACEMENT}=s,S=s.onAdd({deck:this.deck,viewId:f});S&&this._getContainer(f,_).append(S),s._element=S}_remove(s){s.onRemove(),s._element&&s._element.remove(),s._element=void 0}_getContainer(s,f){var F;const _=s||ROOT_CONTAINER_ID;let S=this.containers[_];S||(S=document.createElement("div"),S.style.pointerEvents="none",S.style.position="absolute",S.style.overflow="hidden",(F=this.parentElement)==null||F.append(S),this.containers[_]=S);let T=S.querySelector(`.${f}`);return T||(T=document.createElement("div"),T.className=f,T.style.position="absolute",T.style.zIndex="2",Object.assign(T.style,PLACEMENTS[f]),S.append(T)),T}_updateContainers(){const s=this.deck.width,f=this.deck.height;for(const _ in this.containers){const S=this.lastViewports[_]||null,T=_===ROOT_CONTAINER_ID||S,F=this.containers[_];T?(F.style.display="block",F.style.left=`${S?S.x:0}px`,F.style.top=`${S?S.y:0}px`,F.style.width=`${S?S.width:s}px`,F.style.height=`${S?S.height:f}px`):F.style.display="none"}}onRedraw({viewports:s,layers:f}){var T,F;const _=s.reduce((M,P)=>(M[P.id]=P,M),{}),{lastViewports:S}=this;for(const M of this.getWidgets()){const{viewId:P}=M;if(P){const H=_[P];H&&(M.onViewportChange&&!H.equals(S[P])&&M.onViewportChange(H),(T=M.onRedraw)==null||T.call(M,{viewports:[H],layers:f}))}else{if(M.onViewportChange)for(const H of s)H.equals(S[H.id])||M.onViewportChange(H);(F=M.onRedraw)==null||F.call(M,{viewports:s,layers:f})}}this.lastViewports=_,this._updateContainers()}onHover(s,f){var _,S;for(const T of this.getWidgets()){const{viewId:F}=T;(!F||F===((_=s.viewport)==null?void 0:_.id))&&((S=T.onHover)==null||S.call(T,s,f))}}onEvent(s,f){var S,T;const _=EVENTS[f.type];if(_)for(const F of this.getWidgets()){const{viewId:M}=F;(!M||M===((S=s.viewport)==null?void 0:S.id))&&((T=F[_.handler])==null||T.call(F,s,f))}}}const defaultStyle={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Tooltip{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:s}){const f=document.createElement("div");return f.className="deck-tooltip",Object.assign(f.style,defaultStyle),this.deck=s,this.element=f,f}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(s){var f;this.isVisible&&s.id===((f=this.lastViewport)==null?void 0:f.id)&&s!==this.lastViewport&&this.setTooltip(null)}onHover(s){const{deck:f}=this,_=f&&f.props.getTooltip;if(!_)return;const S=_(s);this.lastViewport=s.viewport,this.setTooltip(S,s.x,s.y)}setTooltip(s,f,_){const S=this.element;if(S){if(typeof s=="string")S.innerText=s;else if(s)s.text&&(S.innerText=s.text),s.html&&(S.innerHTML=s.html),s.className&&(S.className=s.className);else{this.isVisible=!1,S.style.display="none";return}this.isVisible=!0,S.style.display="block",S.style.transform=`translate(${f}px, ${_}px)`,s&&typeof s=="object"&&"style"in s&&Object.assign(S.style,s.style)}}}var GLEnum;(function(d){d[d.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",d[d.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",d[d.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",d[d.POINTS=0]="POINTS",d[d.LINES=1]="LINES",d[d.LINE_LOOP=2]="LINE_LOOP",d[d.LINE_STRIP=3]="LINE_STRIP",d[d.TRIANGLES=4]="TRIANGLES",d[d.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",d[d.TRIANGLE_FAN=6]="TRIANGLE_FAN",d[d.ZERO=0]="ZERO",d[d.ONE=1]="ONE",d[d.SRC_COLOR=768]="SRC_COLOR",d[d.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",d[d.SRC_ALPHA=770]="SRC_ALPHA",d[d.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",d[d.DST_ALPHA=772]="DST_ALPHA",d[d.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",d[d.DST_COLOR=774]="DST_COLOR",d[d.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",d[d.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",d[d.CONSTANT_COLOR=32769]="CONSTANT_COLOR",d[d.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",d[d.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",d[d.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",d[d.FUNC_ADD=32774]="FUNC_ADD",d[d.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",d[d.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",d[d.BLEND_EQUATION=32777]="BLEND_EQUATION",d[d.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",d[d.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",d[d.BLEND_DST_RGB=32968]="BLEND_DST_RGB",d[d.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",d[d.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",d[d.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",d[d.BLEND_COLOR=32773]="BLEND_COLOR",d[d.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",d[d.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",d[d.LINE_WIDTH=2849]="LINE_WIDTH",d[d.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",d[d.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",d[d.CULL_FACE_MODE=2885]="CULL_FACE_MODE",d[d.FRONT_FACE=2886]="FRONT_FACE",d[d.DEPTH_RANGE=2928]="DEPTH_RANGE",d[d.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",d[d.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",d[d.DEPTH_FUNC=2932]="DEPTH_FUNC",d[d.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",d[d.STENCIL_FUNC=2962]="STENCIL_FUNC",d[d.STENCIL_FAIL=2964]="STENCIL_FAIL",d[d.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",d[d.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",d[d.STENCIL_REF=2967]="STENCIL_REF",d[d.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",d[d.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",d[d.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",d[d.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",d[d.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",d[d.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",d[d.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",d[d.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",d[d.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",d[d.VIEWPORT=2978]="VIEWPORT",d[d.SCISSOR_BOX=3088]="SCISSOR_BOX",d[d.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",d[d.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",d[d.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",d[d.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",d[d.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",d[d.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",d[d.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",d[d.RED_BITS=3410]="RED_BITS",d[d.GREEN_BITS=3411]="GREEN_BITS",d[d.BLUE_BITS=3412]="BLUE_BITS",d[d.ALPHA_BITS=3413]="ALPHA_BITS",d[d.DEPTH_BITS=3414]="DEPTH_BITS",d[d.STENCIL_BITS=3415]="STENCIL_BITS",d[d.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",d[d.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",d[d.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",d[d.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",d[d.SAMPLES=32937]="SAMPLES",d[d.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",d[d.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",d[d.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",d[d.VENDOR=7936]="VENDOR",d[d.RENDERER=7937]="RENDERER",d[d.VERSION=7938]="VERSION",d[d.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",d[d.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",d[d.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",d[d.STATIC_DRAW=35044]="STATIC_DRAW",d[d.STREAM_DRAW=35040]="STREAM_DRAW",d[d.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",d[d.ARRAY_BUFFER=34962]="ARRAY_BUFFER",d[d.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",d[d.BUFFER_SIZE=34660]="BUFFER_SIZE",d[d.BUFFER_USAGE=34661]="BUFFER_USAGE",d[d.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",d[d.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",d[d.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",d[d.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",d[d.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",d[d.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",d[d.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",d[d.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",d[d.CULL_FACE=2884]="CULL_FACE",d[d.FRONT=1028]="FRONT",d[d.BACK=1029]="BACK",d[d.FRONT_AND_BACK=1032]="FRONT_AND_BACK",d[d.BLEND=3042]="BLEND",d[d.DEPTH_TEST=2929]="DEPTH_TEST",d[d.DITHER=3024]="DITHER",d[d.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",d[d.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",d[d.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",d[d.SCISSOR_TEST=3089]="SCISSOR_TEST",d[d.STENCIL_TEST=2960]="STENCIL_TEST",d[d.NO_ERROR=0]="NO_ERROR",d[d.INVALID_ENUM=1280]="INVALID_ENUM",d[d.INVALID_VALUE=1281]="INVALID_VALUE",d[d.INVALID_OPERATION=1282]="INVALID_OPERATION",d[d.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",d[d.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",d[d.CW=2304]="CW",d[d.CCW=2305]="CCW",d[d.DONT_CARE=4352]="DONT_CARE",d[d.FASTEST=4353]="FASTEST",d[d.NICEST=4354]="NICEST",d[d.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",d[d.BYTE=5120]="BYTE",d[d.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",d[d.SHORT=5122]="SHORT",d[d.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",d[d.INT=5124]="INT",d[d.UNSIGNED_INT=5125]="UNSIGNED_INT",d[d.FLOAT=5126]="FLOAT",d[d.DOUBLE=5130]="DOUBLE",d[d.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",d[d.ALPHA=6406]="ALPHA",d[d.RGB=6407]="RGB",d[d.RGBA=6408]="RGBA",d[d.LUMINANCE=6409]="LUMINANCE",d[d.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",d[d.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",d[d.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",d[d.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",d[d.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",d[d.VERTEX_SHADER=35633]="VERTEX_SHADER",d[d.COMPILE_STATUS=35713]="COMPILE_STATUS",d[d.DELETE_STATUS=35712]="DELETE_STATUS",d[d.LINK_STATUS=35714]="LINK_STATUS",d[d.VALIDATE_STATUS=35715]="VALIDATE_STATUS",d[d.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",d[d.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",d[d.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",d[d.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",d[d.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",d[d.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",d[d.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",d[d.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",d[d.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",d[d.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",d[d.SHADER_TYPE=35663]="SHADER_TYPE",d[d.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",d[d.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",d[d.NEVER=512]="NEVER",d[d.LESS=513]="LESS",d[d.EQUAL=514]="EQUAL",d[d.LEQUAL=515]="LEQUAL",d[d.GREATER=516]="GREATER",d[d.NOTEQUAL=517]="NOTEQUAL",d[d.GEQUAL=518]="GEQUAL",d[d.ALWAYS=519]="ALWAYS",d[d.KEEP=7680]="KEEP",d[d.REPLACE=7681]="REPLACE",d[d.INCR=7682]="INCR",d[d.DECR=7683]="DECR",d[d.INVERT=5386]="INVERT",d[d.INCR_WRAP=34055]="INCR_WRAP",d[d.DECR_WRAP=34056]="DECR_WRAP",d[d.NEAREST=9728]="NEAREST",d[d.LINEAR=9729]="LINEAR",d[d.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",d[d.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",d[d.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",d[d.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",d[d.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",d[d.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",d[d.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",d[d.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",d[d.TEXTURE_2D=3553]="TEXTURE_2D",d[d.TEXTURE=5890]="TEXTURE",d[d.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",d[d.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",d[d.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",d[d.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",d[d.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",d[d.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",d[d.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",d[d.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",d[d.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",d[d.TEXTURE0=33984]="TEXTURE0",d[d.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",d[d.REPEAT=10497]="REPEAT",d[d.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",d[d.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",d[d.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",d[d.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",d[d.FLOAT_VEC2=35664]="FLOAT_VEC2",d[d.FLOAT_VEC3=35665]="FLOAT_VEC3",d[d.FLOAT_VEC4=35666]="FLOAT_VEC4",d[d.INT_VEC2=35667]="INT_VEC2",d[d.INT_VEC3=35668]="INT_VEC3",d[d.INT_VEC4=35669]="INT_VEC4",d[d.BOOL=35670]="BOOL",d[d.BOOL_VEC2=35671]="BOOL_VEC2",d[d.BOOL_VEC3=35672]="BOOL_VEC3",d[d.BOOL_VEC4=35673]="BOOL_VEC4",d[d.FLOAT_MAT2=35674]="FLOAT_MAT2",d[d.FLOAT_MAT3=35675]="FLOAT_MAT3",d[d.FLOAT_MAT4=35676]="FLOAT_MAT4",d[d.SAMPLER_2D=35678]="SAMPLER_2D",d[d.SAMPLER_CUBE=35680]="SAMPLER_CUBE",d[d.LOW_FLOAT=36336]="LOW_FLOAT",d[d.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",d[d.HIGH_FLOAT=36338]="HIGH_FLOAT",d[d.LOW_INT=36339]="LOW_INT",d[d.MEDIUM_INT=36340]="MEDIUM_INT",d[d.HIGH_INT=36341]="HIGH_INT",d[d.FRAMEBUFFER=36160]="FRAMEBUFFER",d[d.RENDERBUFFER=36161]="RENDERBUFFER",d[d.RGBA4=32854]="RGBA4",d[d.RGB5_A1=32855]="RGB5_A1",d[d.RGB565=36194]="RGB565",d[d.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",d[d.STENCIL_INDEX=6401]="STENCIL_INDEX",d[d.STENCIL_INDEX8=36168]="STENCIL_INDEX8",d[d.DEPTH_STENCIL=34041]="DEPTH_STENCIL",d[d.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",d[d.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",d[d.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",d[d.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",d[d.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",d[d.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",d[d.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",d[d.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",d[d.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",d[d.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",d[d.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",d[d.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",d[d.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",d[d.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",d[d.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",d[d.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",d[d.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",d[d.NONE=0]="NONE",d[d.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",d[d.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",d[d.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",d[d.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",d[d.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",d[d.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",d[d.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",d[d.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",d[d.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",d[d.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",d[d.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",d[d.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",d[d.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",d[d.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",d[d.READ_BUFFER=3074]="READ_BUFFER",d[d.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",d[d.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",d[d.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",d[d.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",d[d.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",d[d.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",d[d.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",d[d.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",d[d.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",d[d.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",d[d.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",d[d.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",d[d.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",d[d.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",d[d.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",d[d.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",d[d.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",d[d.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",d[d.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",d[d.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",d[d.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",d[d.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",d[d.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",d[d.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",d[d.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",d[d.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",d[d.RED=6403]="RED",d[d.RGB8=32849]="RGB8",d[d.RGBA8=32856]="RGBA8",d[d.RGB10_A2=32857]="RGB10_A2",d[d.TEXTURE_3D=32879]="TEXTURE_3D",d[d.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",d[d.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",d[d.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",d[d.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",d[d.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",d[d.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",d[d.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",d[d.SRGB=35904]="SRGB",d[d.SRGB8=35905]="SRGB8",d[d.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",d[d.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",d[d.RGBA32F=34836]="RGBA32F",d[d.RGB32F=34837]="RGB32F",d[d.RGBA16F=34842]="RGBA16F",d[d.RGB16F=34843]="RGB16F",d[d.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",d[d.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",d[d.R11F_G11F_B10F=35898]="R11F_G11F_B10F",d[d.RGB9_E5=35901]="RGB9_E5",d[d.RGBA32UI=36208]="RGBA32UI",d[d.RGB32UI=36209]="RGB32UI",d[d.RGBA16UI=36214]="RGBA16UI",d[d.RGB16UI=36215]="RGB16UI",d[d.RGBA8UI=36220]="RGBA8UI",d[d.RGB8UI=36221]="RGB8UI",d[d.RGBA32I=36226]="RGBA32I",d[d.RGB32I=36227]="RGB32I",d[d.RGBA16I=36232]="RGBA16I",d[d.RGB16I=36233]="RGB16I",d[d.RGBA8I=36238]="RGBA8I",d[d.RGB8I=36239]="RGB8I",d[d.RED_INTEGER=36244]="RED_INTEGER",d[d.RGB_INTEGER=36248]="RGB_INTEGER",d[d.RGBA_INTEGER=36249]="RGBA_INTEGER",d[d.R8=33321]="R8",d[d.RG8=33323]="RG8",d[d.R16F=33325]="R16F",d[d.R32F=33326]="R32F",d[d.RG16F=33327]="RG16F",d[d.RG32F=33328]="RG32F",d[d.R8I=33329]="R8I",d[d.R8UI=33330]="R8UI",d[d.R16I=33331]="R16I",d[d.R16UI=33332]="R16UI",d[d.R32I=33333]="R32I",d[d.R32UI=33334]="R32UI",d[d.RG8I=33335]="RG8I",d[d.RG8UI=33336]="RG8UI",d[d.RG16I=33337]="RG16I",d[d.RG16UI=33338]="RG16UI",d[d.RG32I=33339]="RG32I",d[d.RG32UI=33340]="RG32UI",d[d.R8_SNORM=36756]="R8_SNORM",d[d.RG8_SNORM=36757]="RG8_SNORM",d[d.RGB8_SNORM=36758]="RGB8_SNORM",d[d.RGBA8_SNORM=36759]="RGBA8_SNORM",d[d.RGB10_A2UI=36975]="RGB10_A2UI",d[d.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",d[d.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",d[d.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",d[d.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",d[d.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",d[d.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",d[d.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",d[d.HALF_FLOAT=5131]="HALF_FLOAT",d[d.RG=33319]="RG",d[d.RG_INTEGER=33320]="RG_INTEGER",d[d.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",d[d.CURRENT_QUERY=34917]="CURRENT_QUERY",d[d.QUERY_RESULT=34918]="QUERY_RESULT",d[d.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",d[d.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",d[d.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",d[d.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",d[d.DRAW_BUFFER0=34853]="DRAW_BUFFER0",d[d.DRAW_BUFFER1=34854]="DRAW_BUFFER1",d[d.DRAW_BUFFER2=34855]="DRAW_BUFFER2",d[d.DRAW_BUFFER3=34856]="DRAW_BUFFER3",d[d.DRAW_BUFFER4=34857]="DRAW_BUFFER4",d[d.DRAW_BUFFER5=34858]="DRAW_BUFFER5",d[d.DRAW_BUFFER6=34859]="DRAW_BUFFER6",d[d.DRAW_BUFFER7=34860]="DRAW_BUFFER7",d[d.DRAW_BUFFER8=34861]="DRAW_BUFFER8",d[d.DRAW_BUFFER9=34862]="DRAW_BUFFER9",d[d.DRAW_BUFFER10=34863]="DRAW_BUFFER10",d[d.DRAW_BUFFER11=34864]="DRAW_BUFFER11",d[d.DRAW_BUFFER12=34865]="DRAW_BUFFER12",d[d.DRAW_BUFFER13=34866]="DRAW_BUFFER13",d[d.DRAW_BUFFER14=34867]="DRAW_BUFFER14",d[d.DRAW_BUFFER15=34868]="DRAW_BUFFER15",d[d.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",d[d.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",d[d.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",d[d.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",d[d.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",d[d.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",d[d.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",d[d.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",d[d.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",d[d.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",d[d.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",d[d.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",d[d.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",d[d.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",d[d.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",d[d.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",d[d.SAMPLER_3D=35679]="SAMPLER_3D",d[d.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",d[d.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",d[d.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",d[d.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",d[d.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",d[d.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",d[d.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",d[d.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",d[d.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",d[d.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",d[d.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",d[d.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",d[d.MAX_SAMPLES=36183]="MAX_SAMPLES",d[d.SAMPLER_BINDING=35097]="SAMPLER_BINDING",d[d.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",d[d.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",d[d.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",d[d.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",d[d.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",d[d.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",d[d.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",d[d.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",d[d.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",d[d.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",d[d.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",d[d.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",d[d.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",d[d.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",d[d.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",d[d.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",d[d.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",d[d.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",d[d.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",d[d.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",d[d.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",d[d.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",d[d.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",d[d.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",d[d.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",d[d.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",d[d.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",d[d.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",d[d.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",d[d.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",d[d.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",d[d.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",d[d.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",d[d.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",d[d.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",d[d.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",d[d.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",d[d.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",d[d.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",d[d.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",d[d.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",d[d.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",d[d.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",d[d.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",d[d.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",d[d.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",d[d.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",d[d.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",d[d.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",d[d.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",d[d.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",d[d.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",d[d.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",d[d.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",d[d.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",d[d.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",d[d.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",d[d.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",d[d.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",d[d.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",d[d.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",d[d.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",d[d.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",d[d.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",d[d.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",d[d.UNIFORM_TYPE=35383]="UNIFORM_TYPE",d[d.UNIFORM_SIZE=35384]="UNIFORM_SIZE",d[d.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",d[d.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",d[d.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",d[d.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",d[d.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",d[d.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",d[d.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",d[d.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",d[d.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",d[d.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",d[d.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",d[d.OBJECT_TYPE=37138]="OBJECT_TYPE",d[d.SYNC_CONDITION=37139]="SYNC_CONDITION",d[d.SYNC_STATUS=37140]="SYNC_STATUS",d[d.SYNC_FLAGS=37141]="SYNC_FLAGS",d[d.SYNC_FENCE=37142]="SYNC_FENCE",d[d.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",d[d.UNSIGNALED=37144]="UNSIGNALED",d[d.SIGNALED=37145]="SIGNALED",d[d.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",d[d.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",d[d.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",d[d.WAIT_FAILED=37149]="WAIT_FAILED",d[d.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",d[d.COLOR=6144]="COLOR",d[d.DEPTH=6145]="DEPTH",d[d.STENCIL=6146]="STENCIL",d[d.MIN=32775]="MIN",d[d.MAX=32776]="MAX",d[d.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",d[d.STREAM_READ=35041]="STREAM_READ",d[d.STREAM_COPY=35042]="STREAM_COPY",d[d.STATIC_READ=35045]="STATIC_READ",d[d.STATIC_COPY=35046]="STATIC_COPY",d[d.DYNAMIC_READ=35049]="DYNAMIC_READ",d[d.DYNAMIC_COPY=35050]="DYNAMIC_COPY",d[d.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",d[d.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",d[d.INVALID_INDEX=4294967295]="INVALID_INDEX",d[d.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",d[d.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",d[d.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",d[d.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",d[d.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",d[d.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",d[d.R16_EXT=33322]="R16_EXT",d[d.RG16_EXT=33324]="RG16_EXT",d[d.RGB16_EXT=32852]="RGB16_EXT",d[d.RGBA16_EXT=32859]="RGBA16_EXT",d[d.R16_SNORM_EXT=36760]="R16_SNORM_EXT",d[d.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",d[d.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",d[d.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",d[d.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",d[d.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",d[d.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",d[d.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",d[d.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",d[d.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",d[d.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",d[d.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",d[d.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",d[d.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",d[d.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",d[d.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",d[d.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",d[d.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",d[d.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",d[d.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",d[d.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",d[d.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",d[d.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",d[d.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",d[d.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",d[d.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",d[d.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",d[d.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",d[d.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",d[d.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",d[d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",d[d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",d[d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",d[d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",d[d.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",d[d.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",d[d.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",d[d.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",d[d.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",d[d.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",d[d.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",d[d.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",d[d.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",d[d.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",d[d.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",d[d.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",d[d.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",d[d.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",d[d.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",d[d.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",d[d.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",d[d.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",d[d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",d[d.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",d[d.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",d[d.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",d[d.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",d[d.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",d[d.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",d[d.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",d[d.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",d[d.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",d[d.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",d[d.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",d[d.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",d[d.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",d[d.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",d[d.LINE_WEBGL=6913]="LINE_WEBGL",d[d.FILL_WEBGL=6914]="FILL_WEBGL",d[d.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",d[d.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",d[d.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",d[d.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",d[d.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",d[d.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",d[d.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",d[d.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",d[d.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",d[d.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",d[d.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",d[d.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",d[d.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",d[d.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",d[d.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",d[d.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",d[d.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",d[d.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",d[d.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",d[d.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",d[d.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",d[d.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",d[d.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",d[d.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"})(GLEnum||(GLEnum={}));const GL_PARAMETER_DEFAULTS={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},enable=(d,s,f)=>s?d.enable(f):d.disable(f),hint=(d,s,f)=>d.hint(f,s),pixelStorei=(d,s,f)=>d.pixelStorei(f,s),bindFramebuffer=(d,s,f)=>{const _=f===36006?36009:36008;return d.bindFramebuffer(_,s)},bindBuffer=(d,s,f)=>{const S={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[f];d.bindBuffer(S,s)};function isArray$2(d){return Array.isArray(d)||ArrayBuffer.isView(d)&&!(d instanceof DataView)}const GL_PARAMETER_SETTERS={3042:enable,32773:(d,s)=>d.blendColor(...s),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(d,s)=>d.clearColor(...s),3107:(d,s)=>d.colorMask(...s),2884:enable,2885:(d,s)=>d.cullFace(s),2929:enable,2931:(d,s)=>d.clearDepth(s),2932:(d,s)=>d.depthFunc(s),2928:(d,s)=>d.depthRange(...s),2930:(d,s)=>d.depthMask(s),3024:enable,35723:hint,35725:(d,s)=>d.useProgram(s),36007:(d,s)=>d.bindRenderbuffer(36161,s),36389:(d,s)=>{var f;return(f=d.bindTransformFeedback)==null?void 0:f.call(d,36386,s)},34229:(d,s)=>d.bindVertexArray(s),36006:bindFramebuffer,36010:bindFramebuffer,34964:bindBuffer,36662:bindBuffer,36663:bindBuffer,35053:bindBuffer,35055:bindBuffer,2886:(d,s)=>d.frontFace(s),33170:hint,2849:(d,s)=>d.lineWidth(s),32823:enable,32824:"polygonOffset",10752:"polygonOffset",35977:enable,32926:enable,32928:enable,32938:"sampleCoverage",32939:"sampleCoverage",3089:enable,3088:(d,s)=>d.scissor(...s),2960:enable,2961:(d,s)=>d.clearStencil(s),2968:(d,s)=>d.stencilMaskSeparate(1028,s),36005:(d,s)=>d.stencilMaskSeparate(1029,s),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(d,s)=>d.viewport(...s),34383:enable,10754:enable,12288:enable,12289:enable,12290:enable,12291:enable,12292:enable,12293:enable,12294:enable,12295:enable,3333:pixelStorei,3317:pixelStorei,37440:pixelStorei,37441:pixelStorei,37443:pixelStorei,3330:pixelStorei,3332:pixelStorei,3331:pixelStorei,3314:pixelStorei,32878:pixelStorei,3316:pixelStorei,3315:pixelStorei,32877:pixelStorei,framebuffer:(d,s)=>{const f=s&&"handle"in s?s.handle:s;return d.bindFramebuffer(36160,f)},blend:(d,s)=>s?d.enable(3042):d.disable(3042),blendColor:(d,s)=>d.blendColor(...s),blendEquation:(d,s)=>{const f=typeof s=="number"?[s,s]:s;d.blendEquationSeparate(...f)},blendFunc:(d,s)=>{const f=(s==null?void 0:s.length)===2?[...s,...s]:s;d.blendFuncSeparate(...f)},clearColor:(d,s)=>d.clearColor(...s),clearDepth:(d,s)=>d.clearDepth(s),clearStencil:(d,s)=>d.clearStencil(s),colorMask:(d,s)=>d.colorMask(...s),cull:(d,s)=>s?d.enable(2884):d.disable(2884),cullFace:(d,s)=>d.cullFace(s),depthTest:(d,s)=>s?d.enable(2929):d.disable(2929),depthFunc:(d,s)=>d.depthFunc(s),depthMask:(d,s)=>d.depthMask(s),depthRange:(d,s)=>d.depthRange(...s),dither:(d,s)=>s?d.enable(3024):d.disable(3024),derivativeHint:(d,s)=>{d.hint(35723,s)},frontFace:(d,s)=>d.frontFace(s),mipmapHint:(d,s)=>d.hint(33170,s),lineWidth:(d,s)=>d.lineWidth(s),polygonOffsetFill:(d,s)=>s?d.enable(32823):d.disable(32823),polygonOffset:(d,s)=>d.polygonOffset(...s),sampleCoverage:(d,s)=>d.sampleCoverage(...s),scissorTest:(d,s)=>s?d.enable(3089):d.disable(3089),scissor:(d,s)=>d.scissor(...s),stencilTest:(d,s)=>s?d.enable(2960):d.disable(2960),stencilMask:(d,s)=>{s=isArray$2(s)?s:[s,s];const[f,_]=s;d.stencilMaskSeparate(1028,f),d.stencilMaskSeparate(1029,_)},stencilFunc:(d,s)=>{s=isArray$2(s)&&s.length===3?[...s,...s]:s;const[f,_,S,T,F,M]=s;d.stencilFuncSeparate(1028,f,_,S),d.stencilFuncSeparate(1029,T,F,M)},stencilOp:(d,s)=>{s=isArray$2(s)&&s.length===3?[...s,...s]:s;const[f,_,S,T,F,M]=s;d.stencilOpSeparate(1028,f,_,S),d.stencilOpSeparate(1029,T,F,M)},viewport:(d,s)=>d.viewport(...s)};function getValue(d,s,f){return s[d]!==void 0?s[d]:f[d]}const GL_COMPOSITE_PARAMETER_SETTERS={blendEquation:(d,s,f)=>d.blendEquationSeparate(getValue(32777,s,f),getValue(34877,s,f)),blendFunc:(d,s,f)=>d.blendFuncSeparate(getValue(32969,s,f),getValue(32968,s,f),getValue(32971,s,f),getValue(32970,s,f)),polygonOffset:(d,s,f)=>d.polygonOffset(getValue(32824,s,f),getValue(10752,s,f)),sampleCoverage:(d,s,f)=>d.sampleCoverage(getValue(32938,s,f),getValue(32939,s,f)),stencilFuncFront:(d,s,f)=>d.stencilFuncSeparate(1028,getValue(2962,s,f),getValue(2967,s,f),getValue(2963,s,f)),stencilFuncBack:(d,s,f)=>d.stencilFuncSeparate(1029,getValue(34816,s,f),getValue(36003,s,f),getValue(36004,s,f)),stencilOpFront:(d,s,f)=>d.stencilOpSeparate(1028,getValue(2964,s,f),getValue(2965,s,f),getValue(2966,s,f)),stencilOpBack:(d,s,f)=>d.stencilOpSeparate(1029,getValue(34817,s,f),getValue(34818,s,f),getValue(34819,s,f))},GL_HOOKED_SETTERS={enable:(d,s)=>d({[s]:!0}),disable:(d,s)=>d({[s]:!1}),pixelStorei:(d,s,f)=>d({[s]:f}),hint:(d,s,f)=>d({[s]:f}),useProgram:(d,s)=>d({35725:s}),bindRenderbuffer:(d,s,f)=>d({36007:f}),bindTransformFeedback:(d,s,f)=>d({36389:f}),bindVertexArray:(d,s)=>d({34229:s}),bindFramebuffer:(d,s,f)=>{switch(s){case 36160:return d({36006:f,36010:f});case 36009:return d({36006:f});case 36008:return d({36010:f});default:return null}},bindBuffer:(d,s,f)=>{const _={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[s];return _?d({[_]:f}):{valueChanged:!0}},blendColor:(d,s,f,_,S)=>d({32773:new Float32Array([s,f,_,S])}),blendEquation:(d,s)=>d({32777:s,34877:s}),blendEquationSeparate:(d,s,f)=>d({32777:s,34877:f}),blendFunc:(d,s,f)=>d({32969:s,32968:f,32971:s,32970:f}),blendFuncSeparate:(d,s,f,_,S)=>d({32969:s,32968:f,32971:_,32970:S}),clearColor:(d,s,f,_,S)=>d({3106:new Float32Array([s,f,_,S])}),clearDepth:(d,s)=>d({2931:s}),clearStencil:(d,s)=>d({2961:s}),colorMask:(d,s,f,_,S)=>d({3107:[s,f,_,S]}),cullFace:(d,s)=>d({2885:s}),depthFunc:(d,s)=>d({2932:s}),depthRange:(d,s,f)=>d({2928:new Float32Array([s,f])}),depthMask:(d,s)=>d({2930:s}),frontFace:(d,s)=>d({2886:s}),lineWidth:(d,s)=>d({2849:s}),polygonOffset:(d,s,f)=>d({32824:s,10752:f}),sampleCoverage:(d,s,f)=>d({32938:s,32939:f}),scissor:(d,s,f,_,S)=>d({3088:new Int32Array([s,f,_,S])}),stencilMask:(d,s)=>d({2968:s,36005:s}),stencilMaskSeparate:(d,s,f)=>d({[s===1028?2968:36005]:f}),stencilFunc:(d,s,f,_)=>d({2962:s,2967:f,2963:_,34816:s,36003:f,36004:_}),stencilFuncSeparate:(d,s,f,_,S)=>d({[s===1028?2962:34816]:f,[s===1028?2967:36003]:_,[s===1028?2963:36004]:S}),stencilOp:(d,s,f,_)=>d({2964:s,2965:f,2966:_,34817:s,34818:f,34819:_}),stencilOpSeparate:(d,s,f,_,S)=>d({[s===1028?2964:34817]:f,[s===1028?2965:34818]:_,[s===1028?2966:34819]:S}),viewport:(d,s,f,_,S)=>d({2978:[s,f,_,S]})},isEnabled=(d,s)=>d.isEnabled(s),GL_PARAMETER_GETTERS={3042:isEnabled,2884:isEnabled,2929:isEnabled,3024:isEnabled,32823:isEnabled,32926:isEnabled,32928:isEnabled,3089:isEnabled,2960:isEnabled,35977:isEnabled},NON_CACHE_PARAMETERS=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function setGLParameters(d,s){if(isObjectEmpty$2(s))return;const f={};for(const S in s){const T=Number(S),F=GL_PARAMETER_SETTERS[S];F&&(typeof F=="string"?f[F]=!0:F(d,s[S],T))}const _=d.state&&d.state.cache;if(_)for(const S in f){const T=GL_COMPOSITE_PARAMETER_SETTERS[S];T(d,s,_)}}function getGLParameters(d,s=GL_PARAMETER_DEFAULTS){if(typeof s=="number"){const S=s,T=GL_PARAMETER_GETTERS[S];return T?T(d,S):d.getParameter(S)}const f=Array.isArray(s)?s:Object.keys(s),_={};for(const S of f){const T=GL_PARAMETER_GETTERS[S];_[S]=T?T(d,Number(S)):d.getParameter(Number(S))}return _}function resetGLParameters(d){setGLParameters(d,GL_PARAMETER_DEFAULTS)}function isObjectEmpty$2(d){for(const s in d)return!1;return!0}function deepArrayEqual(d,s){if(d===s)return!0;const f=Array.isArray(d)||ArrayBuffer.isView(d),_=Array.isArray(s)||ArrayBuffer.isView(s);if(f&&_&&d.length===s.length){for(let S=0;S<d.length;++S)if(d[S]!==s[S])return!1;return!0}return!1}class GLState{constructor(s,{copyState:f=!1,log:_=()=>{}}={}){Bt(this,"gl");Bt(this,"program",null);Bt(this,"stateStack",[]);Bt(this,"enable",!0);Bt(this,"cache");Bt(this,"log");this.gl=s,this.cache=f?getGLParameters(s):Object.assign({},GL_PARAMETER_DEFAULTS),this.log=_,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(s={}){this.stateStack.push({})}pop(){assert$5(this.stateStack.length>0);const s=this.stateStack[this.stateStack.length-1];setGLParameters(this.gl,s),this.stateStack.pop()}_updateCache(s){let f=!1,_;const S=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const T in s){assert$5(T!==void 0);const F=s[T],M=this.cache[T];deepArrayEqual(F,M)||(f=!0,_=M,S&&!(T in S)&&(S[T]=M),this.cache[T]=F)}return{valueChanged:f,oldValue:_}}}function getContextState(d){return d.state}function trackContextState(d,s){const{enable:f=!0,copyState:_}=s;if(assert$5(_!==void 0),!d.state){d.state=new GLState(d,{copyState:_}),installProgramSpy(d);for(const T in GL_HOOKED_SETTERS){const F=GL_HOOKED_SETTERS[T];installSetterSpy(d,T,F)}installGetterOverride(d,"getParameter"),installGetterOverride(d,"isEnabled")}const S=getContextState(d);return S.enable=f,d}function pushContextState(d){let s=getContextState(d);s||(trackContextState(d,{copyState:!1}),s=getContextState(d)),s.push()}function popContextState(d){const s=getContextState(d);assert$5(s),s.pop()}function installGetterOverride(d,s){const f=d[s].bind(d);d[s]=function(S){if(S===void 0||NON_CACHE_PARAMETERS.has(S))return f(S);const T=getContextState(d);return S in T.cache||(T.cache[S]=f(S)),T.enable?T.cache[S]:f(S)},Object.defineProperty(d[s],"name",{value:`${s}-from-cache`,configurable:!1})}function installSetterSpy(d,s,f){if(!d[s])return;const _=d[s].bind(d);d[s]=function(...T){const F=getContextState(d),{valueChanged:M,oldValue:P}=f(F._updateCache,...T);return M&&_(...T),P},Object.defineProperty(d[s],"name",{value:`${s}-to-cache`,configurable:!1})}function installProgramSpy(d){const s=d.useProgram.bind(d);d.useProgram=function(_){const S=getContextState(d);S.program!==_&&(s(_),S.program=_)}}const DEFAULT_CONTEXT_PROPS={powerPreference:"high-performance",onContextLost:()=>console.error("WebGL context lost"),onContextRestored:()=>console.info("WebGL context restored")};function createBrowserContext(d,s){s={...DEFAULT_CONTEXT_PROPS,...s};let f=null;const _=T=>f=T.statusMessage||f;d.addEventListener("webglcontextcreationerror",_,!1);let S=null;if(S||(S=d.getContext("webgl2",s)),d.removeEventListener("webglcontextcreationerror",_,!1),!S)throw new Error(`Failed to create WebGL context: ${f||"Unknown error"}`);if(s.onContextLost){const{onContextLost:T}=s;d.addEventListener("webglcontextlost",F=>T(F),!1)}if(s.onContextRestored){const{onContextRestored:T}=s;d.addEventListener("webglcontextrestored",F=>T(F),!1)}return S}function getWebGLExtension(d,s,f){return f[s]===void 0&&(f[s]=d.getExtension(s)||null),f[s]}function getDeviceInfo(d,s){const f=d.getParameter(7936),_=d.getParameter(7937);getWebGLExtension(d,"WEBGL_debug_renderer_info",s);const S=s.WEBGL_debug_renderer_info,T=d.getParameter(S?S.UNMASKED_VENDOR_WEBGL:7936),F=d.getParameter(S?S.UNMASKED_RENDERER_WEBGL:7937),M=T||f,P=F||_,H=d.getParameter(7938),J=identifyGPUVendor(M,P),K=identifyGPUBackend(M,P),oe=identifyGPUType(M,P);return{type:"webgl",gpu:J,gpuType:oe,gpuBackend:K,vendor:M,renderer:P,version:H,shadingLanguage:"glsl",shadingLanguageVersion:300}}function identifyGPUVendor(d,s){return/NVIDIA/i.exec(d)||/NVIDIA/i.exec(s)?"nvidia":/INTEL/i.exec(d)||/INTEL/i.exec(s)?"intel":/Apple/i.exec(d)||/Apple/i.exec(s)?"apple":/AMD/i.exec(d)||/AMD/i.exec(s)||/ATI/i.exec(d)||/ATI/i.exec(s)?"amd":/SwiftShader/i.exec(d)||/SwiftShader/i.exec(s)?"software":"unknown"}function identifyGPUBackend(d,s){return/Metal/i.exec(d)||/Metal/i.exec(s)?"metal":/ANGLE/i.exec(d)||/ANGLE/i.exec(s)?"opengl":"unknown"}function identifyGPUType(d,s){if(/SwiftShader/i.exec(d)||/SwiftShader/i.exec(s))return"cpu";switch(identifyGPUVendor(d,s)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}function getGLFromVertexType(d){switch(d){case"uint8":return 5121;case"sint8":return 5120;case"unorm8":return 5121;case"snorm8":return 5120;case"uint16":return 5123;case"sint16":return 5122;case"unorm16":return 5123;case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(d))}const texture_compression_bc="texture-compression-bc",texture_compression_astc="texture-compression-astc",texture_compression_etc2="texture-compression-etc2",texture_compression_etc1_webgl="texture-compression-etc1-webgl",texture_compression_pvrtc_webgl="texture-compression-pvrtc-webgl",texture_compression_atc_webgl="texture-compression-atc-webgl",float32_renderable="float32-renderable-webgl",float16_renderable="float16-renderable-webgl",rgb9e5ufloat_renderable="rgb9e5ufloat_renderable-webgl",snorm8_renderable="snorm8-renderable-webgl",norm16_renderable="norm16-renderable-webgl",snorm16_renderable="snorm16-renderable-webgl",float32_filterable="float32-filterable",float16_filterable="float16-filterable-webgl",X_S3TC="WEBGL_compressed_texture_s3tc",X_S3TC_SRGB="WEBGL_compressed_texture_s3tc_srgb",X_RGTC="EXT_texture_compression_rgtc",X_BPTC="EXT_texture_compression_bptc",X_ETC2="WEBGL_compressed_texture_etc",X_ASTC="WEBGL_compressed_texture_astc",X_ETC1="WEBGL_compressed_texture_etc1",X_PVRTC="WEBGL_compressed_texture_pvrtc",X_ATC="WEBGL_compressed_texture_atc",EXT_texture_norm16="EXT_texture_norm16",EXT_render_snorm="EXT_render_snorm",EXT_color_buffer_float="EXT_color_buffer_float",TEXTURE_FEATURES={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat_renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[EXT_render_snorm],"norm16-renderable-webgl":[EXT_texture_norm16],"snorm16-renderable-webgl":[EXT_texture_norm16,EXT_render_snorm],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[X_S3TC,X_S3TC_SRGB,X_RGTC,X_BPTC],"texture-compression-bc5-webgl":[X_RGTC],"texture-compression-bc7-webgl":[X_BPTC],"texture-compression-etc2":[X_ETC2],"texture-compression-astc":[X_ASTC],"texture-compression-etc1-webgl":[X_ETC1],"texture-compression-pvrtc-webgl":[X_PVRTC],"texture-compression-atc-webgl":[X_ATC]};function isTextureFeature(d){return d in TEXTURE_FEATURES}function checkTextureFeature(d,s,f){return(TEXTURE_FEATURES[s]||[]).every(S=>getWebGLExtension(d,S,f))}const TEXTURE_FORMATS={"rgb8unorm-unsized":{gl:6407,b:4,c:2,bpp:4,dataFormat:6407,types:[5121,33635]},"rgba8unorm-unsized":{gl:6408,b:4,c:2,bpp:4,dataFormat:6408,types:[5121,32819,32820]},r8unorm:{gl:33321,b:1,c:1,rb:!0},r8snorm:{gl:36756,b:1,c:1,render:snorm8_renderable},r8uint:{gl:33330,b:1,c:1,rb:!0},r8sint:{gl:33329,b:1,c:1,rb:!0},rg8unorm:{gl:33323,b:2,c:2,rb:!0},rg8snorm:{gl:36757,b:2,c:2,render:snorm8_renderable},rg8uint:{gl:33336,b:2,c:2,rb:!0},rg8sint:{gl:33335,b:2,c:2,rb:!0},r16uint:{gl:33332,b:2,c:1,rb:!0},r16sint:{gl:33331,b:2,c:1,rb:!0},r16float:{gl:33325,b:2,c:1,render:float16_renderable,filter:"float16-filterable-webgl",rb:!0},"r16unorm-webgl":{gl:33322,b:2,c:1,f:norm16_renderable,rb:!0},"r16snorm-webgl":{gl:36760,b:2,c:1,f:snorm16_renderable},"rgba4unorm-webgl":{gl:32854,b:2,c:4,wgpu:!1,rb:!0},"rgb565unorm-webgl":{gl:36194,b:2,c:4,wgpu:!1,rb:!0},"rgb5a1unorm-webgl":{gl:32855,b:2,c:4,wgpu:!1,rb:!0},"rgb8unorm-webgl":{gl:32849,b:3,c:3,wgpu:!1},"rgb8snorm-webgl":{gl:36758,b:3,c:3,wgpu:!1},rgba8unorm:{gl:32856,b:4,c:2,bpp:4},"rgba8unorm-srgb":{gl:35907,b:4,c:4,bpp:4},rgba8snorm:{gl:36759,b:4,c:4,render:snorm8_renderable},rgba8uint:{gl:36220,b:4,c:4,bpp:4},rgba8sint:{gl:36238,b:4,c:4,bpp:4},bgra8unorm:{b:4,c:4},"bgra8unorm-srgb":{b:4,c:4},rg16uint:{gl:33338,b:4,c:1,bpp:4},rg16sint:{gl:33337,b:4,c:2,bpp:4},rg16float:{gl:33327,bpp:4,b:4,c:2,render:float16_renderable,filter:float16_filterable,rb:!0},"rg16unorm-webgl":{gl:33324,b:2,c:2,render:norm16_renderable},"rg16snorm-webgl":{gl:36761,b:2,c:2,render:snorm16_renderable},r32uint:{gl:33334,b:4,c:1,bpp:4,rb:!0},r32sint:{gl:33333,b:4,c:1,bpp:4,rb:!0},r32float:{gl:33326,bpp:4,b:4,c:1,render:float32_renderable,filter:float32_filterable},rgb9e5ufloat:{gl:35901,b:4,c:3,p:1,render:rgb9e5ufloat_renderable},rg11b10ufloat:{gl:35898,b:4,c:3,p:1,render:float32_renderable,rb:!0},rgb10a2unorm:{gl:32857,b:4,c:4,p:1,rb:!0},"rgb10a2uint-webgl":{b:4,c:4,gl:36975,p:1,wgpu:!1,bpp:4,rb:!0},"rgb16unorm-webgl":{gl:32852,b:2,c:3,f:norm16_renderable},"rgb16snorm-webgl":{gl:36762,b:2,c:3,f:norm16_renderable},rg32uint:{gl:33340,b:8,c:2,rb:!0},rg32sint:{gl:33339,b:8,c:2,rb:!0},rg32float:{gl:33328,b:8,c:2,render:float32_renderable,filter:float32_filterable,rb:!0},rgba16uint:{gl:36214,b:8,c:4,rb:!0},rgba16sint:{gl:36232,b:8,c:4,rb:!0},rgba16float:{gl:34842,b:8,c:4,render:float16_renderable,filter:float16_filterable},"rgba16unorm-webgl":{gl:32859,b:2,c:4,render:norm16_renderable,rb:!0},"rgba16snorm-webgl":{gl:36763,b:2,c:4,render:snorm16_renderable},"rgb32float-webgl":{gl:34837,render:float32_renderable,filter:float32_filterable,gl2ext:EXT_color_buffer_float,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,b:16,c:4,rb:!0},rgba32sint:{gl:36226,b:16,c:4,rb:!0},rgba32float:{gl:34836,b:16,c:4,render:float32_renderable,filter:float32_filterable,rb:!0},stencil8:{gl:36168,b:1,c:1,attachment:36128,rb:!0},depth16unorm:{gl:33189,b:2,c:1,attachment:36096,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,b:3,c:1,attachment:36096,dataFormat:6402,types:[5125]},depth32float:{gl:36012,b:4,c:1,attachment:36096,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth24unorm-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,dataFormat:34041,types:[34042],rb:!0},"depth32float-stencil8":{gl:36013,b:5,c:2,p:1,attachment:33306,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:X_S3TC,f:texture_compression_bc},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:X_S3TC_SRGB,f:texture_compression_bc},"bc1-rgba-unorm":{gl:33777,x:X_S3TC,f:texture_compression_bc},"bc1-rgba-unorm-srgb":{gl:35916,x:X_S3TC_SRGB,f:texture_compression_bc},"bc2-rgba-unorm":{gl:33778,x:X_S3TC,f:texture_compression_bc},"bc2-rgba-unorm-srgb":{gl:35918,x:X_S3TC_SRGB,f:texture_compression_bc},"bc3-rgba-unorm":{gl:33779,x:X_S3TC,f:texture_compression_bc},"bc3-rgba-unorm-srgb":{gl:35919,x:X_S3TC_SRGB,f:texture_compression_bc},"bc4-r-unorm":{gl:36283,x:X_RGTC,f:texture_compression_bc},"bc4-r-snorm":{gl:36284,x:X_RGTC,f:texture_compression_bc},"bc5-rg-unorm":{gl:36285,x:X_RGTC,f:texture_compression_bc},"bc5-rg-snorm":{gl:36286,x:X_RGTC,f:texture_compression_bc},"bc6h-rgb-ufloat":{gl:36495,x:X_BPTC,f:texture_compression_bc},"bc6h-rgb-float":{gl:36494,x:X_BPTC,f:texture_compression_bc},"bc7-rgba-unorm":{gl:36492,x:X_BPTC,f:texture_compression_bc},"bc7-rgba-unorm-srgb":{gl:36493,x:X_BPTC,f:texture_compression_bc},"etc2-rgb8unorm":{gl:37492,f:texture_compression_etc2},"etc2-rgb8unorm-srgb":{gl:37494,f:texture_compression_etc2},"etc2-rgb8a1unorm":{gl:37496,f:texture_compression_etc2},"etc2-rgb8a1unorm-srgb":{gl:37497,f:texture_compression_etc2},"etc2-rgba8unorm":{gl:37493,f:texture_compression_etc2},"etc2-rgba8unorm-srgb":{gl:37495,f:texture_compression_etc2},"eac-r11unorm":{gl:37488,f:texture_compression_etc2},"eac-r11snorm":{gl:37489,f:texture_compression_etc2},"eac-rg11unorm":{gl:37490,f:texture_compression_etc2},"eac-rg11snorm":{gl:37491,f:texture_compression_etc2},"astc-4x4-unorm":{gl:37808,f:texture_compression_astc},"astc-4x4-unorm-srgb":{gl:37840,f:texture_compression_astc},"astc-5x4-unorm":{gl:37809,f:texture_compression_astc},"astc-5x4-unorm-srgb":{gl:37841,f:texture_compression_astc},"astc-5x5-unorm":{gl:37810,f:texture_compression_astc},"astc-5x5-unorm-srgb":{gl:37842,f:texture_compression_astc},"astc-6x5-unorm":{gl:37811,f:texture_compression_astc},"astc-6x5-unorm-srgb":{gl:37843,f:texture_compression_astc},"astc-6x6-unorm":{gl:37812,f:texture_compression_astc},"astc-6x6-unorm-srgb":{gl:37844,f:texture_compression_astc},"astc-8x5-unorm":{gl:37813,f:texture_compression_astc},"astc-8x5-unorm-srgb":{gl:37845,f:texture_compression_astc},"astc-8x6-unorm":{gl:37814,f:texture_compression_astc},"astc-8x6-unorm-srgb":{gl:37846,f:texture_compression_astc},"astc-8x8-unorm":{gl:37815,f:texture_compression_astc},"astc-8x8-unorm-srgb":{gl:37847,f:texture_compression_astc},"astc-10x5-unorm":{gl:37819,f:texture_compression_astc},"astc-10x5-unorm-srgb":{gl:37851,f:texture_compression_astc},"astc-10x6-unorm":{gl:37817,f:texture_compression_astc},"astc-10x6-unorm-srgb":{gl:37849,f:texture_compression_astc},"astc-10x8-unorm":{gl:37818,f:texture_compression_astc},"astc-10x8-unorm-srgb":{gl:37850,f:texture_compression_astc},"astc-10x10-unorm":{gl:37819,f:texture_compression_astc},"astc-10x10-unorm-srgb":{gl:37851,f:texture_compression_astc},"astc-12x10-unorm":{gl:37820,f:texture_compression_astc},"astc-12x10-unorm-srgb":{gl:37852,f:texture_compression_astc},"astc-12x12-unorm":{gl:37821,f:texture_compression_astc},"astc-12x12-unorm-srgb":{gl:37853,f:texture_compression_astc},"pvrtc-rgb4unorm-webgl":{gl:35840,f:texture_compression_pvrtc_webgl},"pvrtc-rgba4unorm-webgl":{gl:35842,f:texture_compression_pvrtc_webgl},"pvrtc-rbg2unorm-webgl":{gl:35841,f:texture_compression_pvrtc_webgl},"pvrtc-rgba2unorm-webgl":{gl:35843,f:texture_compression_pvrtc_webgl},"etc1-rbg-unorm-webgl":{gl:36196,f:texture_compression_etc1_webgl},"atc-rgb-unorm-webgl":{gl:35986,f:texture_compression_atc_webgl},"atc-rgba-unorm-webgl":{gl:35986,f:texture_compression_atc_webgl},"atc-rgbai-unorm-webgl":{gl:34798,f:texture_compression_atc_webgl}},DATA_FORMAT_CHANNELS={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},TYPE_SIZES={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function isTextureFormatSupported(d,s,f){const _=TEXTURE_FORMATS[s];if(!_||_.gl===void 0)return!1;const S=_.x||_.gl2ext;return S?!!getWebGLExtension(d,S,f):!0}function convertTextureFormatToGL(d){const s=TEXTURE_FORMATS[d],f=s==null?void 0:s.gl;if(f===void 0)throw new Error(`Unsupported texture format ${d}`);return f}function isTextureFormatFilterable(d,s,f){if(!isTextureFormatSupported(d,s,f)||s.startsWith("depth")||s.startsWith("stencil"))return!1;try{if(decodeTextureFormat(s).signed)return!1}catch{return!1}return s.endsWith("32float")?!!getWebGLExtension(d,"OES_texture_float_linear, extensions",f):s.endsWith("16float")?!!getWebGLExtension(d,"OES_texture_half_float_linear, extensions",f):!0}function isTextureFormatRenderable(d,s,f){return!(!isTextureFormatSupported(d,s,f)||typeof s=="number")}function getWebGLTextureParameters(d){var S;const s=TEXTURE_FORMATS[d],f=convertTextureFormatToGL(d),_=decodeTextureFormat(d);return{format:f,dataFormat:(s==null?void 0:s.dataFormat)||getWebGLPixelDataFormat(_.format,_.integer,_.normalized,f),type:_.dataType?getGLFromVertexType(_.dataType):((S=s==null?void 0:s.types)==null?void 0:S[0])||5121,compressed:_.compressed}}function getDepthStencilAttachmentWebGL(d){const s=TEXTURE_FORMATS[d];if(!(s!=null&&s.attachment))throw new Error(`${d} is not a depth stencil format`);return s.attachment}function getTextureFormatBytesPerPixel(d){const s=getWebGLTextureParameters(d),f=DATA_FORMAT_CHANNELS[s.dataFormat]||4,_=TYPE_SIZES[s.type]||1;return f*_}function getWebGLPixelDataFormat(d,s,f,_){if(_===6408||_===6407)return _;switch(d){case"r":return s&&!f?36244:6403;case"rg":return s&&!f?33320:33319;case"rgb":return s&&!f?36248:6407;case"rgba":return s&&!f?36249:6408;default:return 6408}}const WEBGL_FEATURES={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class WebGLDeviceFeatures extends DeviceFeatures{constructor(f,_,S){super([],S);Bt(this,"gl");Bt(this,"extensions");Bt(this,"testedFeatures",new Set);this.gl=f,this.extensions=_,getWebGLExtension(f,"EXT_color_buffer_float",_)}*[Symbol.iterator](){const f=this.getFeatures();for(const _ of f)this.has(_)&&(yield _);return[]}has(f){return this.disabledFeatures[f]?!1:(this.testedFeatures.has(f)||(this.testedFeatures.add(f),isTextureFeature(f)&&checkTextureFeature(this.gl,f,this.extensions)&&this.features.add(f),this.getWebGLFeature(f)&&this.features.add(f)),this.features.has(f))}initializeFeatures(){const f=this.getFeatures().filter(_=>_!=="polygon-mode-webgl");for(const _ of f)this.has(_)}getFeatures(){return[...Object.keys(WEBGL_FEATURES),...Object.keys(TEXTURE_FEATURES)]}getWebGLFeature(f){const _=WEBGL_FEATURES[f];return typeof _=="string"?!!getWebGLExtension(this.gl,_,this.extensions):!!_}}class WebGLDeviceLimits extends DeviceLimits{constructor(f){super();Bt(this,"gl");Bt(this,"limits",{});this.gl=f}get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}getParameter(f){return this.limits[f]===void 0&&(this.limits[f]=this.gl.getParameter(f)),this.limits[f]}}function withGLParameters(d,s,f){if(isObjectEmpty$1(s))return f(d);const{nocatch:_=!0}=s;pushContextState(d),setGLParameters(d,s);let S;if(_)S=f(d),popContextState(d);else try{S=f(d)}finally{popContextState(d)}return S}function isObjectEmpty$1(d){for(const s in d)return!1;return!0}function withDeviceAndGLParameters(d,s,f,_){if(isObjectEmpty$3(s))return _(d);const S=d;pushContextState(S.gl);try{return setDeviceParameters(d,s),setGLParameters(S.gl,f),_(d)}finally{popContextState(S.gl)}}function setDeviceParameters(d,s){const f=d,{gl:_}=f;if(s.cullMode)switch(s.cullMode){case"none":_.disable(2884);break;case"front":_.enable(2884),_.cullFace(1028);break;case"back":_.enable(2884),_.cullFace(1029);break}if(s.frontFace&&_.frontFace(map$1("frontFace",s.frontFace,{ccw:2305,cw:2304})),s.unclippedDepth&&d.features.has("depth-clip-control")&&_.enable(34383),s.depthBias!==void 0&&(_.enable(32823),_.polygonOffset(s.depthBias,s.depthBiasSlopeScale||0)),s.provokingVertex&&d.features.has("provoking-vertex-webgl")){const T=f.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,F=map$1("provokingVertex",s.provokingVertex,{first:36429,last:36430});T==null||T.provokingVertexWEBGL(F)}if((s.polygonMode||s.polygonOffsetLine)&&d.features.has("polygon-mode-webgl")){if(s.polygonMode){const T=f.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,F=map$1("polygonMode",s.polygonMode,{fill:6914,line:6913});T==null||T.polygonModeWEBGL(1028,F),T==null||T.polygonModeWEBGL(1029,F)}s.polygonOffsetLine&&_.enable(10754)}if(d.features.has("shader-clip-cull-distance-webgl")&&(s.clipDistance0&&_.enable(12288),s.clipDistance1&&_.enable(12289),s.clipDistance2&&_.enable(12290),s.clipDistance3&&_.enable(12291),s.clipDistance4&&_.enable(12292),s.clipDistance5&&_.enable(12293),s.clipDistance6&&_.enable(12294),s.clipDistance7&&_.enable(12295)),s.depthWriteEnabled!==void 0&&_.depthMask(mapBoolean("depthWriteEnabled",s.depthWriteEnabled)),s.depthCompare&&(s.depthCompare!=="always"?_.enable(2929):_.disable(2929),_.depthFunc(convertCompareFunction("depthCompare",s.depthCompare))),s.stencilWriteMask){const S=s.stencilWriteMask;_.stencilMaskSeparate(1028,S),_.stencilMaskSeparate(1029,S)}if(s.stencilReadMask&&log.warn("stencilReadMask not supported under WebGL"),s.stencilCompare){const S=s.stencilReadMask||4294967295,T=convertCompareFunction("depthCompare",s.stencilCompare);s.stencilCompare!=="always"?_.enable(2960):_.disable(2960),_.stencilFuncSeparate(1028,T,0,S),_.stencilFuncSeparate(1029,T,0,S)}if(s.stencilPassOperation&&s.stencilFailOperation&&s.stencilDepthFailOperation){const S=convertStencilOperation("stencilPassOperation",s.stencilPassOperation),T=convertStencilOperation("stencilFailOperation",s.stencilFailOperation),F=convertStencilOperation("stencilDepthFailOperation",s.stencilDepthFailOperation);_.stencilOpSeparate(1028,T,F,S),_.stencilOpSeparate(1029,T,F,S)}if(s.blendColorOperation||s.blendAlphaOperation){_.enable(3042);const S=convertBlendOperationToEquation("blendColorOperation",s.blendColorOperation||"add"),T=convertBlendOperationToEquation("blendAlphaOperation",s.blendAlphaOperation||"add");_.blendEquationSeparate(S,T);const F=convertBlendFactorToFunction("blendColorSrcFactor",s.blendColorSrcFactor||"one"),M=convertBlendFactorToFunction("blendColorDstFactor",s.blendColorDstFactor||"zero"),P=convertBlendFactorToFunction("blendAlphaSrcFactor",s.blendAlphaSrcFactor||"one"),H=convertBlendFactorToFunction("blendAlphaDstFactor",s.blendAlphaDstFactor||"zero");_.blendFuncSeparate(F,M,P,H)}}function convertCompareFunction(d,s){return map$1(d,s,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function convertStencilOperation(d,s){return map$1(d,s,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function convertBlendOperationToEquation(d,s){return map$1(d,s,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function convertBlendFactorToFunction(d,s){return map$1(d,s,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function message(d,s){return`Illegal parameter ${s} for ${d}`}function map$1(d,s,f){if(!(s in f))throw new Error(message(d,s));return f[s]}function mapBoolean(d,s){return s}function convertSamplerParametersToWebGL(d){const s={};return d.addressModeU&&(s[10242]=convertAddressMode(d.addressModeU)),d.addressModeV&&(s[10243]=convertAddressMode(d.addressModeV)),d.addressModeW&&(s[32882]=convertAddressMode(d.addressModeW)),d.magFilter&&(s[10240]=convertMaxFilterMode(d.magFilter)),(d.minFilter||d.mipmapFilter)&&(s[10241]=convertMinFilterMode(d.minFilter||"linear",d.mipmapFilter)),d.lodMinClamp!==void 0&&(s[33082]=d.lodMinClamp),d.lodMaxClamp!==void 0&&(s[33083]=d.lodMaxClamp),d.type==="comparison-sampler"&&(s[34892]=34894),d.compare&&(s[34893]=convertCompareFunction("compare",d.compare)),d.maxAnisotropy&&(s[34046]=d.maxAnisotropy),s}function convertAddressMode(d){switch(d){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function convertMaxFilterMode(d){switch(d){case"nearest":return 9728;case"linear":return 9729}}function convertMinFilterMode(d,s){if(!s)return convertMaxFilterMode(d);switch(d){case"nearest":return s==="nearest"?9984:9986;case"linear":return s==="nearest"?9985:9987}}class WEBGLBuffer extends Buffer$1{constructor(f,_={}){super(f,_);Bt(this,"device");Bt(this,"gl");Bt(this,"handle");Bt(this,"glTarget");Bt(this,"glUsage");Bt(this,"glIndexType",5123);Bt(this,"byteLength");Bt(this,"bytesUsed");this.device=f,this.gl=this.device.gl;const S=typeof _=="object"?_.handle:void 0;this.handle=S||this.gl.createBuffer(),f.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=getWebGLTarget(this.props.usage),this.glUsage=getWebGLUsage(this.props.usage),this.glIndexType=this.props.indexType==="uint32"?5125:5123,_.data?this._initWithData(_.data,_.byteOffset,_.byteLength):this._initWithByteLength(_.byteLength||0)}_initWithData(f,_=0,S=f.byteLength+_){const T=this.glTarget;this.gl.bindBuffer(T,this.handle),this.gl.bufferData(T,S,this.glUsage),this.gl.bufferSubData(T,_,f),this.gl.bindBuffer(T,null),this.bytesUsed=S,this.byteLength=S,this._setDebugData(f,_,S),this.trackAllocatedMemory(S)}_initWithByteLength(f){assert$5(f>=0);let _=f;f===0&&(_=new Float32Array(0));const S=this.glTarget;return this.gl.bindBuffer(S,this.handle),this.gl.bufferData(S,_,this.glUsage),this.gl.bindBuffer(S,null),this.bytesUsed=f,this.byteLength=f,this._setDebugData(null,0,f),this.trackAllocatedMemory(f),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(f,_=0){this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,_,f),this.gl.bindBuffer(36663,null),this._setDebugData(f,_,f.byteLength)}async readAsync(f=0,_){return this.readSyncWebGL(f,_)}readSyncWebGL(f=0,_){_=_??this.byteLength-f;const S=new Uint8Array(_),T=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,f,S,T,_),this.gl.bindBuffer(36662,null),this._setDebugData(S,f,_),S}}function getWebGLTarget(d){return d&Buffer$1.INDEX?34963:d&Buffer$1.VERTEX?34962:d&Buffer$1.UNIFORM?35345:34962}function getWebGLUsage(d){return d&Buffer$1.INDEX||d&Buffer$1.VERTEX?35044:d&Buffer$1.UNIFORM?35048:35044}class WEBGLSampler extends Sampler{constructor(f,_){super(f,_);Bt(this,"device");Bt(this,"handle");Bt(this,"parameters");this.device=f,this.parameters=convertSamplerParametersToWebGL(_),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(f){for(const[_,S]of Object.entries(f)){const T=Number(_);switch(T){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,T,S);break;default:this.device.gl.samplerParameteri(this.handle,T,S);break}}}}class WEBGLTextureView extends TextureView{constructor(f,_){super(f,{...Texture.defaultProps,..._});Bt(this,"device");Bt(this,"gl");Bt(this,"handle");Bt(this,"texture");this.device=f,this.gl=this.device.gl,this.handle=null,this.texture=_.texture}}const DEFAULT_WEBGL_TEXTURE_PROPS={parameters:{},pixelStore:{},pixels:null,border:0,dataFormat:void 0,textureUnit:void 0,target:void 0},xB=class xB extends Texture{constructor(f,_){var S;super(f,{...DEFAULT_WEBGL_TEXTURE_PROPS,format:"rgba8unorm",..._});Bt(this,"MAX_ATTRIBUTES");Bt(this,"device");Bt(this,"gl");Bt(this,"handle");Bt(this,"sampler");Bt(this,"view");Bt(this,"glFormat");Bt(this,"type");Bt(this,"dataFormat");Bt(this,"mipmaps");Bt(this,"target");Bt(this,"textureUnit");Bt(this,"loaded",!1);Bt(this,"_video");this.device=f,this.gl=this.device.gl,this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glFormat=6408,this.target=getWebGLTextureTarget(this.props),this.loaded=!1,typeof((S=this.props)==null?void 0:S.data)=="string"&&Object.assign(this.props,{data:loadImage(this.props.data)}),this.initialize(this.props),Object.seal(this)}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}toString(){return`Texture(${this.id},${this.width}x${this.height})`}createView(f){return new WEBGLTextureView(this.device,{...f,texture:this})}initialize(f={}){if(this.props.dimension==="cube")return this.initializeCube(f);let _=f.data;if(_ instanceof Promise)return _.then(Be=>this.initialize(Object.assign({},f,{pixels:Be,data:Be}))),this;const S=typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement;if(S&&_.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,_.addEventListener("loadeddata",()=>this.initialize(f)),this;const{parameters:T={}}=f,{pixels:F=null,pixelStore:M={},textureUnit:P=void 0,mipmaps:H=!0}=f;_||(_=F);let{width:J,height:K,dataFormat:oe,type:se,compressed:ae=!1}=f;const{depth:ge=0}=f,he=convertTextureFormatToGL(f.format);return{width:J,height:K,compressed:ae,dataFormat:oe,type:se}=this._deduceParameters({format:f.format,type:se,dataFormat:oe,compressed:ae,data:_,width:J,height:K}),this.width=J,this.height=K,this.glFormat=he,this.type=se,this.dataFormat=oe,this.textureUnit=P,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),this.mipmaps=H,this.setImageData({data:_,width:J,height:K,depth:ge,format:f.format,type:se,dataFormat:oe,parameters:M,compressed:ae}),this.setSampler(f.sampler),this._setSamplerParameters(T),this.view=this.createView({...this.props,mipLevelCount:1,arrayLayerCount:1}),H&&this.device.isTextureFormatFilterable(f.format)&&this.generateMipmap(),S&&(this._video={video:_,parameters:T,lastTime:_.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?_.currentTime:-1}),this}initializeCube(f){const{mipmaps:_=!0,parameters:S={}}=f;return this.setCubeMapImageData(f).then(()=>{this.loaded=!0,_&&this.generateMipmap(f),this.setSampler(f.sampler),this._setSamplerParameters(S)}),this}setSampler(f={}){let _;f instanceof WEBGLSampler?(this.sampler=f,_=f.props):(this.sampler=new WEBGLSampler(this.device,f),_=f);const S=convertSamplerParametersToWebGL(_);return this._setSamplerParameters(S),this}resize(f){const{height:_,width:S,mipmaps:T=!1}=f;return S!==this.width||_!==this.height?this.initialize({width:S,height:_,format:this.format,type:this.type,dataFormat:this.dataFormat,mipmaps:T}):this}update(){if(this._video){const{video:f,parameters:_,lastTime:S}=this._video;if(S===f.currentTime||f.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:f,parameters:_}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=f.currentTime}}generateMipmap(f={}){return this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),withGLParameters(this.gl,f,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this}setImageData(f){if(this.props.dimension==="3d"||this.props.dimension==="2d-array")return this.setImageData3D(f);this.trackDeallocatedMemory("Texture");const{target:_=this.target,pixels:S=null,level:T=0,glFormat:F=this.glFormat,offset:M=0,parameters:P={}}=f;let{data:H=null,type:J=this.type,width:K=this.width,height:oe=this.height,dataFormat:se=this.dataFormat,compressed:ae=!1}=f;H||(H=S),{type:J,dataFormat:se,compressed:ae,width:K,height:oe}=this._deduceParameters({format:this.props.format,type:J,dataFormat:se,compressed:ae,data:H,width:K,height:oe});const{gl:ge}=this;ge.bindTexture(this.target,this.handle);let he=null;if({data:H,dataType:he}=this._getDataType({data:H,compressed:ae}),withGLParameters(this.gl,P,()=>{switch(he){case"null":ge.texImage2D(_,T,F,K,oe,0,se,J,H);break;case"typed-array":ge.texImage2D(_,T,F,K,oe,0,se,J,H,M);break;case"buffer":this.device.gl.bindBuffer(35052,H.handle||H),this.device.gl.texImage2D(_,T,F,K,oe,0,se,J,M),this.device.gl.bindBuffer(35052,null);break;case"browser-object":ge.texImage2D(_,T,F,K,oe,0,se,J,H);break;case"compressed":for(const[Be,pe]of H.entries())ge.compressedTexImage2D(_,Be,pe.format,pe.width,pe.height,0,pe.data);break;default:assert$5(!1,"Unknown image data type")}}),H&&H.byteLength)this.trackAllocatedMemory(H.byteLength,"Texture");else{const Be=getTextureFormatBytesPerPixel(this.props.format);this.trackAllocatedMemory(this.width*this.height*Be,"Texture")}return this.loaded=!0,this}setSubImageData({target:f=this.target,pixels:_=null,data:S=null,x:T=0,y:F=0,width:M=this.width,height:P=this.height,level:H=0,glFormat:J=this.glFormat,type:K=this.type,dataFormat:oe=this.dataFormat,compressed:se=!1,offset:ae=0,parameters:ge={}}){if({type:K,dataFormat:oe,compressed:se,width:M,height:P}=this._deduceParameters({format:this.props.format,type:K,dataFormat:oe,compressed:se,data:S,width:M,height:P}),assert$5(this.depth===1,"texSubImage not supported for 3D textures"),S||(S=_),S&&S.data){const he=S;S=he.data,M=he.shape[0],P=he.shape[1]}S instanceof WEBGLBuffer&&(S=S.handle),this.gl.bindTexture(this.target,this.handle),withGLParameters(this.gl,ge,()=>{se?this.gl.compressedTexSubImage2D(f,H,T,F,M,P,J,S):S===null?this.gl.texSubImage2D(f,H,T,F,M,P,oe,K,null):ArrayBuffer.isView(S)?this.gl.texSubImage2D(f,H,T,F,M,P,oe,K,S,ae):typeof WebGLBuffer<"u"&&S instanceof WebGLBuffer?(this.device.gl.bindBuffer(35052,S),this.device.gl.texSubImage2D(f,H,T,F,M,P,oe,K,ae),this.device.gl.bindBuffer(35052,null)):this.device.gl.texSubImage2D(f,H,T,F,M,P,oe,K,S)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(f={}){return log.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(f=this.textureUnit){const{gl:_}=this;return f!==void 0&&(this.textureUnit=f,_.activeTexture(33984+f)),_.bindTexture(this.target,this.handle),f}unbind(f=this.textureUnit){const{gl:_}=this;return f!==void 0&&(this.textureUnit=f,_.activeTexture(33984+f)),_.bindTexture(this.target,null),f}_getDataType({data:f,compressed:_=!1}){return _?{data:f,dataType:"compressed"}:f===null?{data:f,dataType:"null"}:ArrayBuffer.isView(f)?{data:f,dataType:"typed-array"}:f instanceof WEBGLBuffer?{data:f.handle,dataType:"buffer"}:typeof WebGLBuffer<"u"&&f instanceof WebGLBuffer?{data:f,dataType:"buffer"}:{data:f,dataType:"browser-object"}}_deduceParameters(f){const{format:_,data:S}=f;let{width:T,height:F,dataFormat:M,type:P,compressed:H}=f;const J=getWebGLTextureParameters(_);return M=M||J.dataFormat,P=P||J.type,H=H||J.compressed,{width:T,height:F}=this._deduceImageSize(S,T,F),{dataFormat:M,type:P,compressed:H,width:T,height:F,format:_,data:S}}_deduceImageSize(f,_,S){let T;return typeof ImageData<"u"&&f instanceof ImageData?T={width:f.width,height:f.height}:typeof HTMLImageElement<"u"&&f instanceof HTMLImageElement?T={width:f.naturalWidth,height:f.naturalHeight}:typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement?T={width:f.width,height:f.height}:typeof ImageBitmap<"u"&&f instanceof ImageBitmap?T={width:f.width,height:f.height}:typeof HTMLVideoElement<"u"&&f instanceof HTMLVideoElement?T={width:f.videoWidth,height:f.videoHeight}:f?T={width:_,height:S}:T={width:_>=0?_:1,height:S>=0?S:1},assert$5(T,"Could not deduced texture size"),assert$5(_===void 0||T.width===_,"Deduced texture width does not match supplied width"),assert$5(S===void 0||T.height===S,"Deduced texture height does not match supplied height"),T}async setCubeMapImageData(f){const{gl:_}=this,{width:S,height:T,pixels:F,data:M,format:P=6408,type:H=5121}=f,J=F||M,K=await Promise.all(xB.FACES.map(oe=>{const se=J[oe];return Promise.all(Array.isArray(se)?se:[se])}));this.bind(),xB.FACES.forEach((oe,se)=>{K[se].length>1&&this.props.mipmaps!==!1&&log.warn(`${this.id} has mipmap and multiple LODs.`)(),K[se].forEach((ae,ge)=>{S&&T?_.texImage2D(oe,ge,P,S,T,0,P,H,ae):_.texImage2D(oe,ge,P,P,H,ae)})}),this.unbind()}setImageDataForFace(f){const{face:_,width:S,height:T,pixels:F,data:M,format:P=6408,type:H=5121}=f,{gl:J}=this,K=F||M;return this.bind(),K instanceof Promise?K.then(oe=>this.setImageDataForFace(Object.assign({},f,{face:_,data:oe,pixels:oe}))):this.width||this.height?J.texImage2D(_,0,P,S,T,0,P,H,K):J.texImage2D(_,0,P,P,H,K),this}setImageData3D(f){const{level:_=0,dataFormat:S,format:T,type:F,width:M,height:P,depth:H=1,offset:J=0,data:K,parameters:oe={}}=f;this.trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle);const se=getWebGLTextureParameters(T);if(withGLParameters(this.gl,oe,()=>{ArrayBuffer.isView(K)&&this.gl.texImage3D(this.target,_,se.format,M,P,H,0,se.dataFormat,se.type,K),K instanceof WEBGLBuffer&&(this.gl.bindBuffer(35052,K.handle),this.gl.texImage3D(this.target,_,S,M,P,H,0,T,F,J))}),K&&K.byteLength)this.trackAllocatedMemory(K.byteLength,"Texture");else{const ae=getTextureFormatBytesPerPixel(this.props.format);this.trackAllocatedMemory(this.width*this.height*this.depth*ae,"Texture")}return this.loaded=!0,this}_setSamplerParameters(f){if(!isObjectEmpty$3(f)){logParameters(f),this.gl.bindTexture(this.target,this.handle);for(const[_,S]of Object.entries(f)){const T=Number(_),F=S;switch(T){case 33082:case 33083:this.gl.texParameterf(this.target,T,F);break;default:this.gl.texParameteri(this.target,T,F);break}}this.gl.bindTexture(this.target,null)}}};Bt(xB,"FACES",[34069,34070,34071,34072,34073,34074]);let WEBGLTexture=xB;function getWebGLTextureTarget(d){switch(d.dimension){case"2d":return 3553;case"cube":return 34067;case"2d-array":return 35866;case"3d":return 32879;case"1d":case"cube-array":default:throw new Error(d.dimension)}}function logParameters(d){log.log(1,"texture sampler parameters",d)()}class WEBGLFramebuffer extends Framebuffer{constructor(f,_){super(f,_);Bt(this,"device");Bt(this,"gl");Bt(this,"handle");const S=_.handle===null;if(this.device=f,this.gl=f.gl,this.handle=this.props.handle||S?this.props.handle:this.gl.createFramebuffer(),!S){f.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures();const T=this.gl.bindFramebuffer(36160,this.handle);for(let F=0;F<this.colorAttachments.length;++F){const M=this.colorAttachments[F],P=36064+F;M&&this._attachOne(P,M)}if(this.depthStencilAttachment&&this._attachOne(getDepthStencilAttachmentWebGL(this.depthStencilAttachment.props.format),this.depthStencilAttachment),_.check!==!1){const F=this.gl.checkFramebufferStatus(36160);if(F!==36053)throw new Error(`Framebuffer ${_getFrameBufferStatus(F)}`)}this.gl.bindFramebuffer(36160,T)}}get texture(){return this.colorAttachments[0]}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}createDepthStencilTexture(f){return new WEBGLTexture(this.device,{id:`${this.id}-depth-stencil`,format:f,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(f,_){if(this.handle===null)return this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;f===void 0&&(f=this.gl.drawingBufferWidth),_===void 0&&(_=this.gl.drawingBufferHeight);for(const S of this.colorAttachments)S.texture.resize({width:f,height:_});return this.depthStencilAttachment&&this.depthStencilAttachment.texture.resize({width:f,height:_}),this}_attachOne(f,_){if(Array.isArray(_)){const[S,T=0,F=0]=_;return this._attachTexture(f,S,T,F),S}if(_ instanceof WEBGLTexture)return this._attachTexture(f,_,0,0),_;if(_ instanceof WEBGLTextureView){const S=_;return this._attachTexture(f,S.texture,S.props.baseMipLevel,S.props.baseArrayLayer),_.texture}throw new Error("attach")}_attachTexture(f,_,S,T){const{gl:F}=this.device;switch(F.bindTexture(_.target,_.handle),_.target){case 35866:case 32879:F.framebufferTextureLayer(36160,f,_.target,T,S);break;case 34067:const M=mapIndexToCubeMapFace(S);F.framebufferTexture2D(36160,f,M,_.handle,T);break;case 3553:F.framebufferTexture2D(36160,f,3553,_.handle,T);break;default:assert$5(!1,"Illegal texture type")}F.bindTexture(_.target,null)}}function mapIndexToCubeMapFace(d){return d<34069?d+34069:d}function _getFrameBufferStatus(d){switch(d){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${d}`}}class WebGLCanvasContext extends CanvasContext{constructor(f,_){super(_);Bt(this,"device");Bt(this,"presentationSize");Bt(this,"_framebuffer",null);this.device=f,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new WEBGLFramebuffer(this.device,{handle:null}),this._framebuffer}update(){const f=this.getPixelSize();(f[0]!==this.presentationSize[0]||f[1]!==this.presentationSize[1])&&(this.presentationSize=f,this.resize())}resize(f){if(this.device.gl&&this.canvas){const _=this.getDevicePixelRatio(f==null?void 0:f.useDevicePixels);this.setDevicePixelRatio(_,f);return}}commit(){}}const DEFAULT_SPECTOR_PROPS={spector:log.get("spector")||log.get("spectorjs")},SPECTOR_CDN_URL="https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",LOG_LEVEL$1=1;let spector=null,initialized=!1;async function loadSpectorJS(d){if(!globalThis.SPECTOR)try{await loadScript(SPECTOR_CDN_URL)}catch(s){log.warn(String(s))}}function initializeSpectorJS(d){if(d={...DEFAULT_SPECTOR_PROPS,...d},!(d!=null&&d.spector)||(!spector&&globalThis.SPECTOR&&(log.probe(LOG_LEVEL$1,"SPECTOR found and initialized")(),spector=new globalThis.SPECTOR.Spector,globalThis.luma&&(globalThis.luma.spector=spector)),!spector))return null;if(initialized||(initialized=!0,spector.spyCanvases(),spector==null||spector.onCaptureStarted.add(s=>log.info("Spector capture started:",s)()),spector==null||spector.onCapture.add(s=>{log.info("Spector capture complete:",s)(),spector==null||spector.getResultUI(),spector==null||spector.resultView.display(),spector==null||spector.resultView.addCapture(s)})),d!=null&&d.canvas){if(typeof d.spector=="string"&&d.spector!==d.canvas.id)return spector;spector==null||spector.startCapture(d==null?void 0:d.canvas,500),new Promise(s=>setTimeout(s,2e3)).then(s=>{log.info("Spector capture stopped after 2 seconds")(),spector==null||spector.stopCapture()})}return spector}const WEBGL_DEBUG_CDN_URL="https://unpkg.com/webgl-debug@2.0.1/index.js";function getWebGLContextData(d){return d.luma=d.luma||{},d.luma}async function loadWebGLDeveloperTools(){isBrowser$1()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await loadScript(WEBGL_DEBUG_CDN_URL))}function makeDebugContext(d,s={}){return d?s.debug?getDebugContext(d,s):getRealContext(d):null}function getRealContext(d){const s=getWebGLContextData(d);return s.realContext?s.realContext:d}function getDebugContext(d,s){if(!globalThis.WebGLDebugUtils)return log.warn("webgl-debug not loaded")(),d;const f=getWebGLContextData(d);if(f.debugContext)return f.debugContext;globalThis.WebGLDebugUtils.init({...GLEnum,...d});const _=globalThis.WebGLDebugUtils.makeDebugContext(d,onGLError.bind(null,s),onValidateGLFunc.bind(null,s));for(const F in GLEnum)!(F in _)&&typeof GLEnum[F]=="number"&&(_[F]=GLEnum[F]);class S{}Object.setPrototypeOf(_,Object.getPrototypeOf(d)),Object.setPrototypeOf(S,_);const T=Object.create(S);return f.realContext=d,f.debugContext=T,T.debug=!0,T}function getFunctionString(d,s){s=Array.from(s).map(_=>_===void 0?"undefined":_);let f=globalThis.WebGLDebugUtils.glFunctionArgsToString(d,s);return f=`${f.slice(0,100)}${f.length>100?"...":""}`,`gl.${d}(${f})`}function onGLError(d,s,f,_){_=Array.from(_).map(M=>M===void 0?"undefined":M);const S=globalThis.WebGLDebugUtils.glEnumToString(s),T=globalThis.WebGLDebugUtils.glFunctionArgsToString(f,_),F=`${S} in gl.${f}(${T})`;log.error(F)();debugger;if(d.throwOnError)throw new Error(F)}function onValidateGLFunc(d,s,f){let _="";if(log.level>=1&&(_=getFunctionString(s,f),log.log(1,_)()),d.break&&d.break.length>0&&(_=_||getFunctionString(s,f),d.break.every(T=>_.indexOf(T)!==-1)))debugger;for(const S of f)if(S===void 0){if(_=_||getFunctionString(s,f),d.throwOnError)throw new Error(`Undefined argument: ${_}`);log.error(`Undefined argument: ${_}`)();debugger}}function parseShaderCompilerLog(d){const s=d.split(/\r?\n/),f=[];for(const _ of s){if(_.length<=1)continue;const S=_.split(":");if(S.length===2){const[K,oe]=S;f.push({message:oe.trim(),type:getMessageType(K),lineNum:0,linePos:0});continue}const[T,F,M,...P]=S;let H=parseInt(M,10);isNaN(H)&&(H=0);let J=parseInt(F,10);isNaN(J)&&(J=0),f.push({message:P.join(":").trim(),type:getMessageType(T),lineNum:H,linePos:J})}return f}function getMessageType(d){const s=["warning","error","info"],f=d.toLowerCase();return s.includes(f)?f:"info"}class WEBGLShader extends Shader{constructor(f,_){super(f,_);Bt(this,"device");Bt(this,"handle");switch(this.device=f,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const f=this.device.gl.getShaderInfoLog(this.handle);return parseShaderCompilerLog(f)}getTranslatedSource(){const _=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return _==null?void 0:_.getTranslatedShaderSource(this.handle)}async _compile(f){f=(T=>T.startsWith("#version ")?T:`#version 100
${T}`)(f);const{gl:S}=this.device;if(S.shaderSource(this.handle,f),S.compileShader(this.handle),log.level===0){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus==="error")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}log.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),log.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){const f=async T=>await new Promise(F=>setTimeout(F,T));if(!this.device.features.has("compilation-status-async-webgl")){await f(10);return}const{gl:S}=this.device;for(;;){if(S.getShaderParameter(this.handle,37297))return;await f(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}const GL_DEPTH_BUFFER_BIT$1=256,GL_STENCIL_BUFFER_BIT$1=1024,GL_COLOR_BUFFER_BIT$1=16384,GL_COLOR=6144,COLOR_CHANNELS=[1,2,4,8];class WEBGLRenderPass extends RenderPass{constructor(f,_){super(f,_);Bt(this,"device");Bt(this,"glParameters");this.device=f,pushContextState(this.device.gl),this.setParameters(this.props.parameters),this.clear()}end(){popContextState(this.device.gl)}pushDebugGroup(f){}popDebugGroup(){}insertDebugMarker(f){}setParameters(f={}){const _={...this.glParameters};this.props.framebuffer&&(_.framebuffer=this.props.framebuffer),this.props.depthReadOnly&&(_.depthMask=!this.props.depthReadOnly),_.stencilMask=this.props.stencilReadOnly?0:1,_[35977]=this.props.discard,f.viewport&&(f.viewport.length>=6?(_.viewport=f.viewport.slice(0,4),_.depthRange=[f.viewport[4],f.viewport[5]]):_.viewport=f.viewport),f.scissorRect&&(_.scissorTest=!0,_.scissor=f.scissorRect),f.blendConstant&&(_.blendColor=f.blendConstant),f.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),f[2967]=f.stencilReference),f.colorMask&&(_.colorMask=COLOR_CHANNELS.map(S=>!!(S&f.colorMask))),this.glParameters=_,setGLParameters(this.device.gl,_)}beginOcclusionQuery(f){const _=this.props.occlusionQuerySet;_==null||_.beginOcclusionQuery()}endOcclusionQuery(){const f=this.props.occlusionQuerySet;f==null||f.endOcclusionQuery()}clear(){const f={...this.glParameters};let _=0;this.props.clearColor!==!1&&(_|=GL_COLOR_BUFFER_BIT$1,f.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(_|=GL_DEPTH_BUFFER_BIT$1,f.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(_|=GL_STENCIL_BUFFER_BIT$1,f.clearStencil=this.props.clearStencil),_!==0&&withGLParameters(this.device.gl,f,()=>{this.device.gl.clear(_)})}clearColorBuffer(f=0,_=[0,0,0,0]){withGLParameters(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(_.constructor){case Int32Array:this.device.gl.clearBufferiv(GL_COLOR,f,_);break;case Uint32Array:this.device.gl.clearBufferuiv(GL_COLOR,f,_);break;case Float32Array:default:this.device.gl.clearBufferfv(GL_COLOR,f,_);break}})}}const ERR_TYPE_DEDUCTION="Failed to deduce GL constant from typed array";function getGLTypeFromTypedArray(d){switch(ArrayBuffer.isView(d)?d.constructor:d){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(ERR_TYPE_DEDUCTION)}}function getTypedArrayFromGLType(d,s){const{clamped:f=!0}=s||{};switch(d){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return f?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}const DEFAULT_ACCESSOR_VALUES={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},PROP_CHECKS={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Accessor{constructor(...s){Bt(this,"offset");Bt(this,"stride");Bt(this,"type");Bt(this,"size");Bt(this,"divisor");Bt(this,"normalized");Bt(this,"integer");Bt(this,"buffer");Bt(this,"index");s.forEach(f=>this._assign(f)),Object.freeze(this)}static getBytesPerElement(s){return getTypedArrayFromGLType(s.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(s){return assert$5(s.size),getTypedArrayFromGLType(s.type||5126).BYTES_PER_ELEMENT*s.size}static resolve(...s){return new Accessor(DEFAULT_ACCESSOR_VALUES,...s)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Accessor.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Accessor.getBytesPerVertex(this)}_assign(s={}){return s=checkProps("Accessor",s,PROP_CHECKS),s.type!==void 0&&(this.type=s.type,(s.type===5124||s.type===5125)&&(this.integer=!0)),s.size!==void 0&&(this.size=s.size),s.offset!==void 0&&(this.offset=s.offset),s.stride!==void 0&&(this.stride=s.stride),s.normalize!==void 0&&(this.normalized=s.normalize),s.normalized!==void 0&&(this.normalized=s.normalized),s.integer!==void 0&&(this.integer=s.integer),s.divisor!==void 0&&(this.divisor=s.divisor),s.buffer!==void 0&&(this.buffer=s.buffer),s.index!==void 0&&(typeof s.index=="boolean"?this.index=s.index?1:0:this.index=s.index),s.instanced!==void 0&&(this.divisor=s.instanced?1:0),s.isInstanced!==void 0&&(this.divisor=s.isInstanced?1:0),this.offset===void 0&&delete this.offset,this.stride===void 0&&delete this.stride,this.type===void 0&&delete this.type,this.size===void 0&&delete this.size,this.divisor===void 0&&delete this.divisor,this.normalized===void 0&&delete this.normalized,this.integer===void 0&&delete this.integer,this.buffer===void 0&&delete this.buffer,this.index===void 0&&delete this.index,this}}function isSamplerUniform(d){return SAMPLER_TYPES.includes(d)}const SAMPLER_TYPES=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],COMPOSITE_GL_TYPES={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function decodeGLUniformType(d){const s=COMPOSITE_GL_TYPES[d];if(!s)throw new Error("uniform");const[f,_,,S]=s;return{format:S,components:_,glType:f}}function decodeGLAttributeType(d){const s=COMPOSITE_GL_TYPES[d];if(!s)throw new Error("attribute");const[,f,,_,S]=s;return{attributeType:_,vertexFormat:S,components:f}}function getShaderLayout(d,s){const f={attributes:[],bindings:[]};f.attributes=readAttributeDeclarations(d,s);const _=readUniformBlocks(d,s);for(const M of _){const P=M.uniforms.map(H=>({name:H.name,format:H.format,byteOffset:H.byteOffset,byteStride:H.byteStride,arrayLength:H.arrayLength}));f.bindings.push({type:"uniform",name:M.name,location:M.location,visibility:(M.vertex?1:0)&(M.fragment?2:0),minBindingSize:M.byteLength,uniforms:P})}const S=readUniformBindings(d,s);let T=0;for(const M of S)if(isSamplerUniform(M.type)){const{viewDimension:P,sampleType:H}=getSamplerInfo(M.type);f.bindings.push({type:"texture",name:M.name,location:T,viewDimension:P,sampleType:H}),M.textureUnit=T,T+=1}S.length&&(f.uniforms=S);const F=readVaryings(d,s);return F!=null&&F.length&&(f.varyings=F),f}function readAttributeDeclarations(d,s){const f=[],_=d.getProgramParameter(s,35721);for(let S=0;S<_;S++){const T=d.getActiveAttrib(s,S);if(!T)throw new Error("activeInfo");const{name:F,type:M}=T,P=d.getAttribLocation(s,F);if(P>=0){const{attributeType:H}=decodeGLAttributeType(M),J=/instance/i.test(F)?"instance":"vertex";f.push({name:F,location:P,stepMode:J,type:H})}}return f.sort((S,T)=>S.location-T.location),f}function readVaryings(d,s){const f=[],_=d.getProgramParameter(s,35971);for(let S=0;S<_;S++){const T=d.getTransformFeedbackVarying(s,S);if(!T)throw new Error("activeInfo");const{name:F,type:M,size:P}=T,{glType:H,components:J}=decodeGLUniformType(M),K=new Accessor({type:H,size:P*J}),oe={location:S,name:F,accessor:K};f.push(oe)}return f.sort((S,T)=>S.location-T.location),f}function readUniformBindings(d,s){const f=[],_=d.getProgramParameter(s,35718);for(let S=0;S<_;S++){const T=d.getActiveUniform(s,S);if(!T)throw new Error("activeInfo");const{name:F,size:M,type:P}=T,{name:H,isArray:J}=parseUniformName(F);let K=d.getUniformLocation(s,H);const oe={location:K,name:H,size:M,type:P,isArray:J};if(f.push(oe),oe.size>1)for(let se=0;se<oe.size;se++){const ae=`${H}[${se}]`;K=d.getUniformLocation(s,ae);const ge={...oe,name:ae,location:K};f.push(ge)}}return f}function readUniformBlocks(d,s){const f=(T,F)=>d.getActiveUniformBlockParameter(s,T,F),_=[],S=d.getProgramParameter(s,35382);for(let T=0;T<S;T++){const F={name:d.getActiveUniformBlockName(s,T)||"",location:f(T,35391),byteLength:f(T,35392),vertex:f(T,35396),fragment:f(T,35398),uniformCount:f(T,35394),uniforms:[]},M=f(T,35395)||[],P=d.getActiveUniforms(s,M,35383),H=d.getActiveUniforms(s,M,35384),J=d.getActiveUniforms(s,M,35387),K=d.getActiveUniforms(s,M,35388);for(let oe=0;oe<F.uniformCount;++oe){const se=d.getActiveUniform(s,M[oe]);if(!se)throw new Error("activeInfo");F.uniforms.push({name:se.name,format:decodeGLUniformType(P[oe]).format,type:P[oe],arrayLength:H[oe],byteOffset:J[oe],byteStride:K[oe]})}_.push(F)}return _.sort((T,F)=>T.location-F.location),_}const SAMPLER_UNIFORMS_GL_TO_GPU={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function getSamplerInfo(d){const s=SAMPLER_UNIFORMS_GL_TO_GPU[d];if(!s)throw new Error("sampler");const[f,_]=s;return{viewDimension:f,sampleType:_}}function parseUniformName(d){if(d[d.length-1]!=="]")return{name:d,length:1,isArray:!1};const f=/([^[]*)(\[[0-9]+\])?/.exec(d);if(!f||f.length<2)throw new Error(`Failed to parse GLSL uniform name ${d}`);return{name:f[1],length:f[2]?1:0,isArray:!!f[2]}}function setUniform(d,s,f,_){const S=d;let T=_;T===!0&&(T=1),T===!1&&(T=0);const F=typeof T=="number"?[T]:T;switch(f){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof _!="number")throw new Error("samplers must be set to integers");return d.uniform1i(s,_);case 5126:return d.uniform1fv(s,F);case 35664:return d.uniform2fv(s,F);case 35665:return d.uniform3fv(s,F);case 35666:return d.uniform4fv(s,F);case 5124:return d.uniform1iv(s,F);case 35667:return d.uniform2iv(s,F);case 35668:return d.uniform3iv(s,F);case 35669:return d.uniform4iv(s,F);case 35670:return d.uniform1iv(s,F);case 35671:return d.uniform2iv(s,F);case 35672:return d.uniform3iv(s,F);case 35673:return d.uniform4iv(s,F);case 5125:return S.uniform1uiv(s,F,1);case 36294:return S.uniform2uiv(s,F,2);case 36295:return S.uniform3uiv(s,F,3);case 36296:return S.uniform4uiv(s,F,4);case 35674:return d.uniformMatrix2fv(s,!1,F);case 35675:return d.uniformMatrix3fv(s,!1,F);case 35676:return d.uniformMatrix4fv(s,!1,F);case 35685:return S.uniformMatrix2x3fv(s,!1,F);case 35686:return S.uniformMatrix2x4fv(s,!1,F);case 35687:return S.uniformMatrix3x2fv(s,!1,F);case 35688:return S.uniformMatrix3x4fv(s,!1,F);case 35689:return S.uniformMatrix4x2fv(s,!1,F);case 35690:return S.uniformMatrix4x3fv(s,!1,F)}throw new Error("Illegal uniform")}function getGLDrawMode(d){switch(d){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"line-loop-webgl":return 2;case"triangle-list":return 4;case"triangle-strip":return 5;case"triangle-fan-webgl":return 6;default:throw new Error(d)}}function getGLPrimitive(d){switch(d){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 1;case"line-loop-webgl":return 1;case"triangle-list":return 4;case"triangle-strip":return 4;case"triangle-fan-webgl":return 4;default:throw new Error(d)}}const LOG_PROGRAM_PERF_PRIORITY=4;class WEBGLRenderPipeline extends RenderPipeline{constructor(f,_){super(f,_);Bt(this,"device");Bt(this,"handle");Bt(this,"vs");Bt(this,"fs");Bt(this,"introspectedLayout");Bt(this,"uniforms",{});Bt(this,"bindings",{});Bt(this,"varyings",null);Bt(this,"_uniformCount",0);Bt(this,"_uniformSetters",{});this.device=f,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=_.vs,this.fs=_.fs;const{varyings:S,bufferMode:T=35981}=_;switch(S&&S.length>0&&(this.varyings=S,this.device.gl.transformFeedbackVaryings(this.handle,S,T)),this._linkShaders(),log.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=getShaderLayout(this.device.gl,this.handle),log.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=mergeShaderLayout(this.introspectedLayout,_.shaderLayout),this.props.topology){case"triangle-fan-webgl":case"line-loop-webgl":log.warn(`Primitive topology ${this.props.topology} is deprecated and will be removed in v9.1`);break}}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(f,_){for(const[S,T]of Object.entries(f)){const F=this.shaderLayout.bindings.find(M=>M.name===S)||this.shaderLayout.bindings.find(M=>M.name===`${S}Uniforms`);if(!F){const M=this.shaderLayout.bindings.map(P=>`"${P.name}"`).join(", ");_!=null&&_.disableWarnings||log.warn(`Unknown binding "${S}" in render pipeline "${this.id}", expected one of ${M}`)();continue}switch(T||log.warn(`Unsetting binding "${S}" in render pipeline "${this.id}"`)(),F.type){case"uniform":if(!(T instanceof WEBGLBuffer)&&!(T.buffer instanceof WEBGLBuffer))throw new Error("buffer value");break;case"texture":if(!(T instanceof WEBGLTextureView||T instanceof WEBGLTexture||T instanceof WEBGLFramebuffer))throw new Error("texture value");break;case"sampler":log.warn(`Ignoring sampler ${S}`)();break;default:throw new Error(F.type)}this.bindings[S]=T}}draw(f){var he;const{renderPass:_,parameters:S=this.props.parameters,topology:T=this.props.topology,vertexArray:F,vertexCount:M,instanceCount:P,isInstanced:H=!1,firstVertex:J=0,transformFeedback:K}=f,oe=getGLDrawMode(T),se=!!F.indexBuffer,ae=(he=F.indexBuffer)==null?void 0:he.glIndexType;if(this.linkStatus!=="success")return log.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable()||M===0)return log.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;if(M===0)return log.info(2,`RenderPipeline:${this.id}.draw() aborted - no vertices to draw`)(),!0;this.device.gl.useProgram(this.handle),F.bindBeforeRender(_),K&&K.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const ge=_;return withDeviceAndGLParameters(this.device,S,ge.glParameters,()=>{se&&H?this.device.gl.drawElementsInstanced(oe,M||0,ae,J,P||0):se?this.device.gl.drawElements(oe,M||0,ae,J):H?this.device.gl.drawArraysInstanced(oe,J,M||0,P||0):this.device.gl.drawArrays(oe,J,M||0),K&&K.end()}),F.unbindAfterRender(_),!0}setUniformsWebGL(f){const{bindings:_}=splitUniformsAndBindings(f);Object.keys(_).forEach(S=>{log.warn(`Unsupported value "${JSON.stringify(_[S])}" used in setUniforms() for key ${S}. Use setBindings() instead?`)()}),Object.assign(this.uniforms,f)}async _linkShaders(){const{gl:f}=this.device;if(f.attachShader(this.handle,this.vs.handle),f.attachShader(this.handle,this.fs.handle),log.time(LOG_PROGRAM_PERF_PRIORITY,`linkProgram for ${this.id}`)(),f.linkProgram(this.handle),log.timeEnd(LOG_PROGRAM_PERF_PRIORITY,`linkProgram for ${this.id}`)(),log.level,!this.device.features.has("compilation-status-async-webgl")){const S=this._getLinkStatus();this._reportLinkStatus(S);return}log.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),log.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const _=this._getLinkStatus();this._reportLinkStatus(_)}_reportLinkStatus(f){var _;switch(f){case"success":return;default:throw this.vs.compilationStatus==="error"?(this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`)):((_=this.fs)==null?void 0:_.compilationStatus)==="error"?(this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`)):new Error(`Error during ${f}: ${this.device.gl.getProgramInfoLog(this.handle)}`)}}_getLinkStatus(){const{gl:f}=this.device;return f.getProgramParameter(this.handle,35714)?(f.validateProgram(this.handle),f.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")):(this.linkStatus="error","linking")}async _waitForLinkComplete(){const f=async T=>await new Promise(F=>setTimeout(F,T));if(!this.device.features.has("compilation-status-async-webgl")){await f(10);return}const{gl:S}=this.device;for(;;){if(S.getProgramParameter(this.handle,37297))return;await f(10)}}_areTexturesRenderable(){let f=!0;for(const[,_]of Object.entries(this.bindings))_ instanceof WEBGLTexture&&(_.update(),f=f&&_.loaded);return f}_applyBindings(){if(this.linkStatus!=="success")return;const{gl:f}=this.device;f.useProgram(this.handle);let _=0,S=0;for(const T of this.shaderLayout.bindings){const F=this.bindings[T.name]||this.bindings[T.name.replace(/Uniforms$/,"")];if(!F)throw new Error(`No value for binding ${T.name} in ${this.id}`);switch(T.type){case"uniform":const{name:M}=T,P=f.getUniformBlockIndex(this.handle,M);if(P===4294967295)throw new Error(`Invalid uniform block name ${M}`);f.uniformBlockBinding(this.handle,S,P),F instanceof WEBGLBuffer?f.bindBufferBase(35345,S,F.handle):f.bindBufferRange(35345,S,F.buffer.handle,F.offset||0,F.size||F.buffer.byteLength-F.offset),S+=1;break;case"texture":if(!(F instanceof WEBGLTextureView||F instanceof WEBGLTexture||F instanceof WEBGLFramebuffer))throw new Error("texture");let H;if(F instanceof WEBGLTextureView)H=F.texture;else if(F instanceof WEBGLTexture)H=F;else if(F instanceof WEBGLFramebuffer&&F.colorAttachments[0]instanceof WEBGLTextureView)log.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),H=F.colorAttachments[0].texture;else throw new Error("No texture");f.activeTexture(33984+_),f.bindTexture(H.target,H.handle),_+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${T.type}' not supported in WebGL`)}}}_applyUniforms(){for(const f of this.shaderLayout.uniforms||[]){const{name:_,location:S,type:T,textureUnit:F}=f,M=this.uniforms[_]??F;M!==void 0&&setUniform(this.device.gl,S,T,M)}}}function cast(d){return d}class WEBGLCommandBuffer extends CommandBuffer{constructor(f){super(f,{});Bt(this,"device");Bt(this,"commands",[]);this.device=f}submitCommands(f=this.commands){for(const _ of f)switch(_.name){case"copy-buffer-to-buffer":_copyBufferToBuffer(this.device,_.options);break;case"copy-buffer-to-texture":_copyBufferToTexture(this.device,_.options);break;case"copy-texture-to-buffer":_copyTextureToBuffer(this.device,_.options);break;case"copy-texture-to-texture":_copyTextureToTexture(this.device,_.options);break}}}function _copyBufferToBuffer(d,s){const f=s.source,_=s.destination;d.gl.bindBuffer(36662,f.handle),d.gl.bindBuffer(36663,_.handle),d.gl.copyBufferSubData(36662,36663,s.sourceOffset??0,s.destinationOffset??0,s.size),d.gl.bindBuffer(36662,null),d.gl.bindBuffer(36663,null)}function _copyBufferToTexture(d,s){throw new Error("Not implemented")}function _copyTextureToBuffer(d,s){const{source:f,mipLevel:_=0,aspect:S="all",width:T=s.source.width,height:F=s.source.height,depthOrArrayLayers:M=0,origin:P=[0,0],destination:H,byteOffset:J=0,bytesPerRow:K,rowsPerImage:oe}=s;if(S!=="all")throw new Error("not supported");if(_!==0||M!==0||K||oe)throw new Error("not implemented");const{framebuffer:se,destroyFramebuffer:ae}=getFramebuffer$2(f);let ge;try{const he=H,Be=T||se.width,pe=F||se.height,be=getWebGLTextureParameters(se.texture.props.format),Re=be.dataFormat,Fe=be.type;d.gl.bindBuffer(35051,he.handle),ge=d.gl.bindFramebuffer(36160,se.handle),d.gl.readPixels(P[0],P[1],Be,pe,Re,Fe,J)}finally{d.gl.bindBuffer(35051,null),ge!==void 0&&d.gl.bindFramebuffer(36160,ge),ae&&se.destroy()}}function _copyTextureToTexture(d,s){const{source:f,destinationMipLevel:_=0,origin:S=[0,0],destinationOrigin:T=[0,0],destination:F}=s;let{width:M=s.destination.width,height:P=s.destination.height}=s;const{framebuffer:H,destroyFramebuffer:J}=getFramebuffer$2(f),[K,oe]=S,[se,ae,ge]=T,he=d.gl.bindFramebuffer(36160,H.handle);let Be=null,pe;if(F instanceof WEBGLTexture)Be=F,M=Number.isFinite(M)?M:Be.width,P=Number.isFinite(P)?P:Be.height,Be.bind(0),pe=Be.target;else throw new Error("invalid destination");switch(pe){case 3553:case 34067:d.gl.copyTexSubImage2D(pe,_,se,ae,K,oe,M,P);break;case 35866:case 32879:d.gl.copyTexSubImage3D(pe,_,se,ae,ge,K,oe,M,P);break}Be&&Be.unbind(),d.gl.bindFramebuffer(36160,he),J&&H.destroy()}function getFramebuffer$2(d){if(d instanceof Texture){const{width:s,height:f,id:_}=d;return{framebuffer:d.device.createFramebuffer({id:`framebuffer-for-${_}`,width:s,height:f,colorAttachments:[d]}),destroyFramebuffer:!0}}return{framebuffer:d,destroyFramebuffer:!1}}class WEBGLCommandEncoder extends CommandEncoder{constructor(f,_){super(f,_);Bt(this,"device");Bt(this,"commandBuffer");this.device=f,this.commandBuffer=new WEBGLCommandBuffer(f)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(f){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:f})}copyBufferToTexture(f){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:f})}copyTextureToBuffer(f){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:f})}copyTextureToTexture(f){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:f})}pushDebugGroup(f){}popDebugGroup(){}insertDebugMarker(f){}resolveQuerySet(f,_,S){}}class WEBGLVertexArray extends VertexArray{constructor(f,_){super(f,_);Bt(this,"device");Bt(this,"handle");Bt(this,"buffer",null);Bt(this,"bufferValue",null);this.device=f,this.handle=this.device.gl.createVertexArray()}get[Symbol.toStringTag](){return"VertexArray"}static isConstantAttributeZeroSupported(f){return getBrowser()==="Chrome"}destroy(){var f;super.destroy(),this.buffer&&((f=this.buffer)==null||f.destroy()),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(f){const _=f;if(_&&_.glTarget!==34963)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,_?_.handle:null),this.indexBuffer=_,this.device.gl.bindVertexArray(null)}setBuffer(f,_){const S=_;if(S.glTarget===34963)throw new Error("Use .setIndexBuffer()");const{size:T,type:F,stride:M,offset:P,normalized:H,integer:J,divisor:K}=this._getAccessor(f);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,S.handle),J?this.device.gl.vertexAttribIPointer(f,T,F,M,P):this.device.gl.vertexAttribPointer(f,T,F,H,M,P),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(f),this.device.gl.vertexAttribDivisor(f,K||0),this.attributes[f]=S,this.device.gl.bindVertexArray(null)}setConstantWebGL(f,_){this._enable(f,!1),this.attributes[f]=_}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let f=0;f<this.maxVertexAttributes;++f){const _=this.attributes[f];ArrayBuffer.isView(_)&&this.device.setConstantAttributeWebGL(f,_)}}_getAccessor(f){const _=this.attributeInfos[f];if(!_)throw new Error(`Unknown attribute location ${f}`);const S=getGLFromVertexType(_.bufferDataType);return{size:_.bufferComponents,type:S,stride:_.byteStride,offset:_.byteOffset,normalized:_.normalized,integer:_.integer,divisor:_.stepMode==="instance"?1:0}}_enable(f,_=!0){const T=WEBGLVertexArray.isConstantAttributeZeroSupported(this.device)||f!==0;(_||T)&&(f=Number(f),this.device.gl.bindVertexArray(this.handle),_?this.device.gl.enableVertexAttribArray(f):this.device.gl.disableVertexAttribArray(f),this.device.gl.bindVertexArray(null))}getConstantBuffer(f,_){const S=normalizeConstantArrayValue(_),T=S.byteLength*f,F=S.length*f;if(this.buffer&&T!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${T} !== ${this.buffer.byteLength}.`);let M=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:T}),M=M||!compareConstantArrayValues$1(S,this.bufferValue),M){const P=getScratchArray(_.constructor,F);fillArray$1({target:P,source:S,start:0,count:F}),this.buffer.write(P),this.bufferValue=_}return this.buffer}}function normalizeConstantArrayValue(d){return Array.isArray(d)?new Float32Array(d):d}function compareConstantArrayValues$1(d,s){if(!d||!s||d.length!==s.length||d.constructor!==s.constructor)return!1;for(let f=0;f<d.length;++f)if(d[f]!==s[f])return!1;return!0}class WEBGLTransformFeedback extends TransformFeedback{constructor(f,_){super(f,_);Bt(this,"device");Bt(this,"gl");Bt(this,"handle");Bt(this,"layout");Bt(this,"buffers",{});Bt(this,"unusedBuffers",{});Bt(this,"bindOnUse",!0);Bt(this,"_bound",!1);this.device=f,this.gl=f.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,_.buffers&&this.setBuffers(_.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(f="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(getGLPrimitive(f))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(f){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(const _ in f)this.setBuffer(_,f[_])})}setBuffer(f,_){const S=this._getVaryingIndex(f),{buffer:T,byteLength:F,byteOffset:M}=this._getBufferRange(_);if(S<0){this.unusedBuffers[f]=T,log.warn(`${this.id} unusedBuffers varying buffer ${f}`)();return}this.buffers[S]={buffer:T,byteLength:F,byteOffset:M},this.bindOnUse||this._bindBuffer(S,T,M,F)}getBuffer(f){if(isIndex(f))return this.buffers[f]||null;const _=this._getVaryingIndex(f);return _>=0?this.buffers[_]:null}bind(f=this.handle){if(typeof f!="function")return this.gl.bindTransformFeedback(36386,f),this;let _;return this._bound?_=f():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,_=f(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),_}unbind(){this.bind(null)}_getBufferRange(f){if(f instanceof WEBGLBuffer)return{buffer:f,byteOffset:0,byteLength:f.byteLength};const{buffer:_,byteOffset:S=0,byteLength:T=f.buffer.byteLength}=f;return{buffer:_,byteOffset:S,byteLength:T}}_getVaryingIndex(f){if(isIndex(f))return Number(f);for(const _ of this.layout.varyings)if(f===_.name)return _.location;return-1}_bindBuffers(){for(const f in this.buffers){const{buffer:_,byteLength:S,byteOffset:T}=this._getBufferRange(this.buffers[f]);this._bindBuffer(Number(f),_,T,S)}}_unbindBuffers(){for(const f in this.buffers)this.gl.bindBufferBase(35982,Number(f),null)}_bindBuffer(f,_,S=0,T){const F=_&&_.handle;!F||T===void 0?this.gl.bindBufferBase(35982,f,F):this.gl.bindBufferRange(35982,f,F,S,T)}}function isIndex(d){return typeof d=="number"?Number.isInteger(d):/^\d+$/.test(d)}class WEBGLQuerySet extends QuerySet{constructor(f,_){super(f,_);Bt(this,"device");Bt(this,"handle");Bt(this,"target",null);Bt(this,"_queryPending",!1);Bt(this,"_pollingPromise",null);if(this.device=f,_.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}get[Symbol.toStringTag](){return"Query"}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(f){return this._begin(f!=null&&f.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(f){this._queryPending||(this.target=f,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const f=this.device.gl.getQueryParameter(this.handle,34919);return f&&(this._queryPending=!1),f}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(f=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let _=0;return this._pollingPromise=new Promise((S,T)=>{const F=()=>{this.isResultAvailable()?(S(this.getResult()),this._pollingPromise=null):_++>f?(T("Timed out"),this._pollingPromise=null):requestAnimationFrame(F)};requestAnimationFrame(F)}),this._pollingPromise}}function glFormatToComponents(d){switch(d){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return assert$5(!1),0}}function glTypeToBytes(d){switch(d){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return assert$5(!1),0}}function readPixelsToArray(d,s){var he,Be;const{sourceX:f=0,sourceY:_=0,sourceFormat:S=6408,sourceAttachment:T=36064}=s||{};let{target:F=null,sourceWidth:M,sourceHeight:P,sourceType:H}=s||{};const{framebuffer:J,deleteFramebuffer:K}=getFramebuffer$1(d);assert$5(J);const{gl:oe,handle:se}=J;M=M||J.width,P=P||J.height;const ae=T-36064;H=H||((Be=(he=J.colorAttachments[ae])==null?void 0:he.texture)==null?void 0:Be.type)||5121,F=getPixelArray(F,H,S,M,P),H=H||getGLTypeFromTypedArray(F);const ge=oe.bindFramebuffer(36160,se);return oe.readPixels(f,_,M,P,S,H,F),oe.bindFramebuffer(36160,ge||null),K&&J.destroy(),F}function readPixelsToBuffer(d,s){const{target:f,sourceX:_=0,sourceY:S=0,sourceFormat:T=6408,targetByteOffset:F=0}=s||{};let{sourceWidth:M,sourceHeight:P,sourceType:H}=s||{};const{framebuffer:J,deleteFramebuffer:K}=getFramebuffer$1(d);assert$5(J),M=M||J.width,P=P||J.height;const oe=J;H=H||5121;let se=f;if(!se){const ge=glFormatToComponents(T),he=glTypeToBytes(H),Be=F+M*P*ge*he;se=oe.device.createBuffer({byteLength:Be})}const ae=d.device.createCommandEncoder();return ae.copyTextureToBuffer({source:d,width:M,height:P,origin:[_,S],destination:se,byteOffset:F}),ae.destroy(),K&&J.destroy(),se}function getFramebuffer$1(d){return d instanceof Framebuffer?{framebuffer:d,deleteFramebuffer:!1}:{framebuffer:toFramebuffer(d),deleteFramebuffer:!0}}function toFramebuffer(d,s){const{device:f,width:_,height:S,id:T}=d;return f.createFramebuffer({...s,id:`framebuffer-for-${T}`,width:_,height:S,colorAttachments:[d]})}function getPixelArray(d,s,f,_,S){if(d)return d;s=s||5121;const T=getTypedArrayFromGLType(s,{clamped:!1}),F=glFormatToComponents(f);return new T(_*S*F)}const GL_DEPTH_BUFFER_BIT=256,GL_STENCIL_BUFFER_BIT=1024,GL_COLOR_BUFFER_BIT=16384,ERR_ARGUMENTS="clear: bad arguments";function clear(d,s){const{framebuffer:f=null,color:_=null,depth:S=null,stencil:T=null}=s||{},F={};f&&(F.framebuffer=f);let M=0;_&&(M|=GL_COLOR_BUFFER_BIT,_!==!0&&(F.clearColor=_)),S&&(M|=GL_DEPTH_BUFFER_BIT,S!==!0&&(F.clearDepth=S)),T&&(M|=GL_STENCIL_BUFFER_BIT,S!==!0&&(F.clearStencil=S)),assert$5(M!==0,ERR_ARGUMENTS);const P=d.gl;withGLParameters(P,F,()=>{P.clear(M)})}const LOG_LEVEL=1,Nm=class Nm extends Device{constructor(f){var P,H;super({...f,id:f.id||uid("webgl-device")});Bt(this,"type","webgl");Bt(this,"handle");Bt(this,"features");Bt(this,"limits");Bt(this,"info");Bt(this,"canvasContext");Bt(this,"lost");Bt(this,"_resolveContextLost");Bt(this,"renderPass",null);Bt(this,"gl");Bt(this,"debug",!1);Bt(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});Bt(this,"_extensions",{});Bt(this,"_polyfilled",!1);Bt(this,"spectorJS");Bt(this,"_constants");const _=(P=f.gl)==null?void 0:P.device;if(_)throw new Error(`WebGL context already attached to device ${_.id}`);const S=((H=f.gl)==null?void 0:H.canvas)||f.canvas;this.canvasContext=new WebGLCanvasContext(this,{...f,canvas:S}),this.lost=new Promise(J=>{this._resolveContextLost=J});let T=f.gl||null;if(T||(T=createBrowserContext(this.canvasContext.canvas,{...f,onContextLost:J=>{var K;return(K=this._resolveContextLost)==null?void 0:K.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})}})),!T)throw new Error("WebGL context creation failed");this.handle=T,this.gl=T,this.gl.device=this,this.gl._version=2,f.spector&&(this.spectorJS=initializeSpectorJS({...this.props,canvas:this.handle.canvas})),this.info=getDeviceInfo(this.gl,this._extensions),this.limits=new WebGLDeviceLimits(this.gl),this.features=new WebGLDeviceFeatures(this.gl,this._extensions,this.props.disabledFeatures),this.props.initalizeFeatures&&this.features.initializeFeatures(),this.canvasContext.resize();const{enable:F=!0,copyState:M=!1}=f;trackContextState(this.gl,{enable:F,copyState:M,log:(...J)=>log.log(1,...J)()}),f.debug&&(this.gl=makeDebugContext(this.gl,{...f,throwOnError:!0}),this.debug=!0,log.level=Math.max(log.level,1),log.warn("WebGL debug mode activated. Performance reduced.")())}static isSupported(){return typeof WebGL2RenderingContext<"u"}static attach(f){if(f instanceof Nm)return f;if((f==null?void 0:f.device)instanceof Device)return f.device;if(!isWebGL(f))throw new Error("Invalid WebGL2RenderingContext");return new Nm({gl:f})}static async create(f={}){var M;log.groupCollapsed(LOG_LEVEL,"WebGLDevice created")();const _=[];f.debug&&_.push(loadWebGLDeveloperTools()),f.spector&&_.push(loadSpectorJS()),typeof f.canvas=="string"&&_.push(CanvasContext.pageLoaded);const S=await Promise.allSettled(_);for(const P of S)P.status==="rejected"&&log.error(`Failed to initialize debug libraries ${P.reason}`)();if(log.probe(LOG_LEVEL+1,"DOM is loaded")(),(M=f.gl)!=null&&M.device)return log.warn("reattaching existing device")(),Nm.attach(f.gl);const T=new Nm(f),F=`Created ${T.type}${T.debug?" debug":""} context: ${T.info.vendor}, ${T.info.renderer} for canvas: ${T.canvasContext.id}`;return log.probe(LOG_LEVEL,F)(),log.table(LOG_LEVEL,T.info)(),log.groupEnd(LOG_LEVEL)(),T}destroy(){}get isLost(){return this.gl.isContextLost()}getSize(){return[this.gl.drawingBufferWidth,this.gl.drawingBufferHeight]}isTextureFormatSupported(f){return isTextureFormatSupported(this.gl,f,this._extensions)}isTextureFormatFilterable(f){return isTextureFormatFilterable(this.gl,f,this._extensions)}isTextureFormatRenderable(f){return isTextureFormatRenderable(this.gl,f,this._extensions)}createCanvasContext(f){throw new Error("WebGL only supports a single canvas")}createBuffer(f){const _=this._getBufferProps(f);return new WEBGLBuffer(this,_)}_createTexture(f){return new WEBGLTexture(this,f)}createExternalTexture(f){throw new Error("createExternalTexture() not implemented")}createSampler(f){return new WEBGLSampler(this,f)}createShader(f){return new WEBGLShader(this,f)}createFramebuffer(f){return new WEBGLFramebuffer(this,f)}createVertexArray(f){return new WEBGLVertexArray(this,f)}createTransformFeedback(f){return new WEBGLTransformFeedback(this,f)}createQuerySet(f){return new WEBGLQuerySet(this,f)}createRenderPipeline(f){return new WEBGLRenderPipeline(this,f)}beginRenderPass(f){return new WEBGLRenderPass(this,f)}createComputePipeline(f){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(f){throw new Error("ComputePass not supported in WebGL")}createCommandEncoder(f){return new WEBGLCommandEncoder(this,f)}submit(){var f;(f=this.renderPass)==null||f.end(),this.renderPass=null}readPixelsToArrayWebGL(f,_){return readPixelsToArray(f,_)}readPixelsToBufferWebGL(f,_){return readPixelsToBuffer(f,_)}setParametersWebGL(f){setGLParameters(this.gl,f)}getParametersWebGL(f){return getGLParameters(this.gl,f)}withParametersWebGL(f,_){return withGLParameters(this.gl,f,_)}clearWebGL(f){clear(this,f)}resetWebGL(){log.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),resetGLParameters(this.gl)}loseDevice(){var T;let f=!1;const S=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return S&&(f=!0,S.loseContext()),(T=this._resolveContextLost)==null||T.call(this,{reason:"destroyed",message:"Application triggered context loss"}),f}pushState(){pushContextState(this.gl)}popState(){popContextState(this.gl)}setSpectorMetadata(f,_){f.__SPECTOR_Metadata=_}getGLKey(f,_){_=_||this.gl2||this.gl;const S=Number(f);for(const T in _)if(_[T]===S)return`GL.${T}`;return String(f)}setConstantAttributeWebGL(f,_){const S=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(S).fill(null);const T=this._constants[f];switch(T&&compareConstantArrayValues(T,_)&&log.info(1,`setConstantAttributeWebGL(${f}) could have been skipped, value unchanged`)(),this._constants[f]=_,_.constructor){case Float32Array:setConstantFloatArray(this,f,_);break;case Int32Array:setConstantIntArray(this,f,_);break;case Uint32Array:setConstantUintArray(this,f,_);break;default:assert$5(!1)}}getExtension(f){return getWebGLExtension(this.gl,f,this._extensions),this._extensions}};Bt(Nm,"type","webgl");let WebGLDevice=Nm;function isWebGL(d){return typeof WebGL2RenderingContext<"u"&&d instanceof WebGL2RenderingContext?!0:!!(d&&Number.isFinite(d._version))}function setConstantFloatArray(d,s,f){switch(f.length){case 1:d.gl.vertexAttrib1fv(s,f);break;case 2:d.gl.vertexAttrib2fv(s,f);break;case 3:d.gl.vertexAttrib3fv(s,f);break;case 4:d.gl.vertexAttrib4fv(s,f);break;default:assert$5(!1)}}function setConstantIntArray(d,s,f){d.gl.vertexAttribI4iv(s,f)}function setConstantUintArray(d,s,f){d.gl.vertexAttribI4uiv(s,f)}function compareConstantArrayValues(d,s){if(!d||!s||d.length!==s.length||d.constructor!==s.constructor)return!1;for(let f=0;f<d.length;++f)if(d[f]!==s[f])return!1;return!0}var hammer$1={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(d){(function(s,f,_,S){var T=["","webkit","Moz","MS","ms","o"],F=f.createElement("div"),M="function",P=Math.round,H=Math.abs,J=Date.now;function K(kt,Gt,Dn){return setTimeout(be(kt,Dn),Gt)}function oe(kt,Gt,Dn){return Array.isArray(kt)?(se(kt,Dn[Gt],Dn),!0):!1}function se(kt,Gt,Dn){var ya;if(kt)if(kt.forEach)kt.forEach(Gt,Dn);else if(kt.length!==S)for(ya=0;ya<kt.length;)Gt.call(Dn,kt[ya],ya,kt),ya++;else for(ya in kt)kt.hasOwnProperty(ya)&&Gt.call(Dn,kt[ya],ya,kt)}function ae(kt,Gt,Dn){var ya="DEPRECATED METHOD: "+Gt+`
`+Dn+` AT 
`;return function(){var UA=new Error("get-stack-trace"),SI=UA&&UA.stack?UA.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",AC=s.console&&(s.console.warn||s.console.log);return AC&&AC.call(s.console,ya,SI),kt.apply(this,arguments)}}var ge;typeof Object.assign!="function"?ge=function(Gt){if(Gt===S||Gt===null)throw new TypeError("Cannot convert undefined or null to object");for(var Dn=Object(Gt),ya=1;ya<arguments.length;ya++){var UA=arguments[ya];if(UA!==S&&UA!==null)for(var SI in UA)UA.hasOwnProperty(SI)&&(Dn[SI]=UA[SI])}return Dn}:ge=Object.assign;var he=ae(function(Gt,Dn,ya){for(var UA=Object.keys(Dn),SI=0;SI<UA.length;)(!ya||ya&&Gt[UA[SI]]===S)&&(Gt[UA[SI]]=Dn[UA[SI]]),SI++;return Gt},"extend","Use `assign`."),Be=ae(function(Gt,Dn){return he(Gt,Dn,!0)},"merge","Use `assign`.");function pe(kt,Gt,Dn){var ya=Gt.prototype,UA;UA=kt.prototype=Object.create(ya),UA.constructor=kt,UA._super=ya,Dn&&ge(UA,Dn)}function be(kt,Gt){return function(){return kt.apply(Gt,arguments)}}function Re(kt,Gt){return typeof kt==M?kt.apply(Gt&&Gt[0]||S,Gt):kt}function Fe(kt,Gt){return kt===S?Gt:kt}function Me(kt,Gt,Dn){se(Rt(Gt),function(ya){kt.addEventListener(ya,Dn,!1)})}function ve(kt,Gt,Dn){se(Rt(Gt),function(ya){kt.removeEventListener(ya,Dn,!1)})}function At(kt,Gt){for(;kt;){if(kt==Gt)return!0;kt=kt.parentNode}return!1}function Ct(kt,Gt){return kt.indexOf(Gt)>-1}function Rt(kt){return kt.trim().split(/\s+/g)}function It(kt,Gt,Dn){if(kt.indexOf&&!Dn)return kt.indexOf(Gt);for(var ya=0;ya<kt.length;){if(Dn&&kt[ya][Dn]==Gt||!Dn&&kt[ya]===Gt)return ya;ya++}return-1}function xt(kt){return Array.prototype.slice.call(kt,0)}function wt(kt,Gt,Dn){for(var ya=[],UA=[],SI=0;SI<kt.length;){var AC=kt[SI][Gt];It(UA,AC)<0&&ya.push(kt[SI]),UA[SI]=AC,SI++}return ya=ya.sort(function(NC,$C){return NC[Gt]>$C[Gt]}),ya}function Ft(kt,Gt){for(var Dn,ya,UA=Gt[0].toUpperCase()+Gt.slice(1),SI=0;SI<T.length;){if(Dn=T[SI],ya=Dn?Dn+UA:Gt,ya in kt)return ya;SI++}return S}var jt=1;function ta(){return jt++}function Qn(kt){var Gt=kt.ownerDocument||kt;return Gt.defaultView||Gt.parentWindow||s}var ca=/mobile|tablet|ip(ad|hone|od)|android/i,Jn="ontouchstart"in s,wA=Ft(s,"PointerEvent")!==S,LA=Jn&&ca.test(navigator.userAgent),ZA="touch",xI="pen",cI="mouse",pI="kinect",aI=25,nI=1,uA=2,aa=4,eA=8,DA=1,xA=2,ua=4,sA=8,oA=16,fA=xA|ua,lA=sA|oA,gA=fA|lA,WA=["x","y"],JA=["clientX","clientY"];function _I(kt,Gt){var Dn=this;this.manager=kt,this.callback=Gt,this.element=kt.element,this.target=kt.options.inputTarget,this.domHandler=function(ya){Re(kt.options.enable,[kt])&&Dn.handler(ya)},this.init()}_I.prototype={handler:function(){},init:function(){this.evEl&&Me(this.element,this.evEl,this.domHandler),this.evTarget&&Me(this.target,this.evTarget,this.domHandler),this.evWin&&Me(Qn(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ve(this.element,this.evEl,this.domHandler),this.evTarget&&ve(this.target,this.evTarget,this.domHandler),this.evWin&&ve(Qn(this.element),this.evWin,this.domHandler)}};function HI(kt){var Gt,Dn=kt.options.inputClass;return Dn?Gt=Dn:wA?Gt=RC:LA?Gt=AI:Jn?Gt=cC:Gt=mC,new Gt(kt,Nt)}function Nt(kt,Gt,Dn){var ya=Dn.pointers.length,UA=Dn.changedPointers.length,SI=Gt&nI&&ya-UA===0,AC=Gt&(aa|eA)&&ya-UA===0;Dn.isFirst=!!SI,Dn.isFinal=!!AC,SI&&(kt.session={}),Dn.eventType=Gt,bA(kt,Dn),kt.emit("hammer.input",Dn),kt.recognize(Dn),kt.session.prevInput=Dn}function bA(kt,Gt){var Dn=kt.session,ya=Gt.pointers,UA=ya.length;Dn.firstInput||(Dn.firstInput=OI(Gt)),UA>1&&!Dn.firstMultiple?Dn.firstMultiple=OI(Gt):UA===1&&(Dn.firstMultiple=!1);var SI=Dn.firstInput,AC=Dn.firstMultiple,xC=AC?AC.center:SI.center,NC=Gt.center=ba(ya);Gt.timeStamp=J(),Gt.deltaTime=Gt.timeStamp-SI.timeStamp,Gt.angle=wI(xC,NC),Gt.distance=EI(xC,NC),hA(Dn,Gt),Gt.offsetDirection=MA(Gt.deltaX,Gt.deltaY);var $C=IA(Gt.deltaTime,Gt.deltaX,Gt.deltaY);Gt.overallVelocityX=$C.x,Gt.overallVelocityY=$C.y,Gt.overallVelocity=H($C.x)>H($C.y)?$C.x:$C.y,Gt.scale=AC?WI(AC.pointers,ya):1,Gt.rotation=AC?vI(AC.pointers,ya):0,Gt.maxPointers=Dn.prevInput?Gt.pointers.length>Dn.prevInput.maxPointers?Gt.pointers.length:Dn.prevInput.maxPointers:Gt.pointers.length,II(Dn,Gt);var cE=kt.element;At(Gt.srcEvent.target,cE)&&(cE=Gt.srcEvent.target),Gt.target=cE}function hA(kt,Gt){var Dn=Gt.center,ya=kt.offsetDelta||{},UA=kt.prevDelta||{},SI=kt.prevInput||{};(Gt.eventType===nI||SI.eventType===aa)&&(UA=kt.prevDelta={x:SI.deltaX||0,y:SI.deltaY||0},ya=kt.offsetDelta={x:Dn.x,y:Dn.y}),Gt.deltaX=UA.x+(Dn.x-ya.x),Gt.deltaY=UA.y+(Dn.y-ya.y)}function II(kt,Gt){var Dn=kt.lastInterval||Gt,ya=Gt.timeStamp-Dn.timeStamp,UA,SI,AC,xC;if(Gt.eventType!=eA&&(ya>aI||Dn.velocity===S)){var NC=Gt.deltaX-Dn.deltaX,$C=Gt.deltaY-Dn.deltaY,cE=IA(ya,NC,$C);SI=cE.x,AC=cE.y,UA=H(cE.x)>H(cE.y)?cE.x:cE.y,xC=MA(NC,$C),kt.lastInterval=Gt}else UA=Dn.velocity,SI=Dn.velocityX,AC=Dn.velocityY,xC=Dn.direction;Gt.velocity=UA,Gt.velocityX=SI,Gt.velocityY=AC,Gt.direction=xC}function OI(kt){for(var Gt=[],Dn=0;Dn<kt.pointers.length;)Gt[Dn]={clientX:P(kt.pointers[Dn].clientX),clientY:P(kt.pointers[Dn].clientY)},Dn++;return{timeStamp:J(),pointers:Gt,center:ba(Gt),deltaX:kt.deltaX,deltaY:kt.deltaY}}function ba(kt){var Gt=kt.length;if(Gt===1)return{x:P(kt[0].clientX),y:P(kt[0].clientY)};for(var Dn=0,ya=0,UA=0;UA<Gt;)Dn+=kt[UA].clientX,ya+=kt[UA].clientY,UA++;return{x:P(Dn/Gt),y:P(ya/Gt)}}function IA(kt,Gt,Dn){return{x:Gt/kt||0,y:Dn/kt||0}}function MA(kt,Gt){return kt===Gt?DA:H(kt)>=H(Gt)?kt<0?xA:ua:Gt<0?sA:oA}function EI(kt,Gt,Dn){Dn||(Dn=WA);var ya=Gt[Dn[0]]-kt[Dn[0]],UA=Gt[Dn[1]]-kt[Dn[1]];return Math.sqrt(ya*ya+UA*UA)}function wI(kt,Gt,Dn){Dn||(Dn=WA);var ya=Gt[Dn[0]]-kt[Dn[0]],UA=Gt[Dn[1]]-kt[Dn[1]];return Math.atan2(UA,ya)*180/Math.PI}function vI(kt,Gt){return wI(Gt[1],Gt[0],JA)+wI(kt[1],kt[0],JA)}function WI(kt,Gt){return EI(Gt[0],Gt[1],JA)/EI(kt[0],kt[1],JA)}var GI={mousedown:nI,mousemove:uA,mouseup:aa},NI="mousedown",tC="mousemove mouseup";function mC(){this.evEl=NI,this.evWin=tC,this.pressed=!1,_I.apply(this,arguments)}pe(mC,_I,{handler:function(Gt){var Dn=GI[Gt.type];Dn&nI&&Gt.button===0&&(this.pressed=!0),Dn&uA&&Gt.which!==1&&(Dn=aa),this.pressed&&(Dn&aa&&(this.pressed=!1),this.callback(this.manager,Dn,{pointers:[Gt],changedPointers:[Gt],pointerType:cI,srcEvent:Gt}))}});var yC={pointerdown:nI,pointermove:uA,pointerup:aa,pointercancel:eA,pointerout:eA},QC={2:ZA,3:xI,4:cI,5:pI},_C="pointerdown",vC="pointermove pointerup pointercancel";s.MSPointerEvent&&!s.PointerEvent&&(_C="MSPointerDown",vC="MSPointerMove MSPointerUp MSPointerCancel");function RC(){this.evEl=_C,this.evWin=vC,_I.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}pe(RC,_I,{handler:function(Gt){var Dn=this.store,ya=!1,UA=Gt.type.toLowerCase().replace("ms",""),SI=yC[UA],AC=QC[Gt.pointerType]||Gt.pointerType,xC=AC==ZA,NC=It(Dn,Gt.pointerId,"pointerId");SI&nI&&(Gt.button===0||xC)?NC<0&&(Dn.push(Gt),NC=Dn.length-1):SI&(aa|eA)&&(ya=!0),!(NC<0)&&(Dn[NC]=Gt,this.callback(this.manager,SI,{pointers:Dn,changedPointers:[Gt],pointerType:AC,srcEvent:Gt}),ya&&Dn.splice(NC,1))}});var MC={touchstart:nI,touchmove:uA,touchend:aa,touchcancel:eA},Hr="touchstart",zn="touchstart touchmove touchend touchcancel";function na(){this.evTarget=Hr,this.evWin=zn,this.started=!1,_I.apply(this,arguments)}pe(na,_I,{handler:function(Gt){var Dn=MC[Gt.type];if(Dn===nI&&(this.started=!0),!!this.started){var ya=PA.call(this,Gt,Dn);Dn&(aa|eA)&&ya[0].length-ya[1].length===0&&(this.started=!1),this.callback(this.manager,Dn,{pointers:ya[0],changedPointers:ya[1],pointerType:ZA,srcEvent:Gt})}}});function PA(kt,Gt){var Dn=xt(kt.touches),ya=xt(kt.changedTouches);return Gt&(aa|eA)&&(Dn=wt(Dn.concat(ya),"identifier")),[Dn,ya]}var YA={touchstart:nI,touchmove:uA,touchend:aa,touchcancel:eA},GA="touchstart touchmove touchend touchcancel";function AI(){this.evTarget=GA,this.targetIds={},_I.apply(this,arguments)}pe(AI,_I,{handler:function(Gt){var Dn=YA[Gt.type],ya=tI.call(this,Gt,Dn);ya&&this.callback(this.manager,Dn,{pointers:ya[0],changedPointers:ya[1],pointerType:ZA,srcEvent:Gt})}});function tI(kt,Gt){var Dn=xt(kt.touches),ya=this.targetIds;if(Gt&(nI|uA)&&Dn.length===1)return ya[Dn[0].identifier]=!0,[Dn,Dn];var UA,SI,AC=xt(kt.changedTouches),xC=[],NC=this.target;if(SI=Dn.filter(function($C){return At($C.target,NC)}),Gt===nI)for(UA=0;UA<SI.length;)ya[SI[UA].identifier]=!0,UA++;for(UA=0;UA<AC.length;)ya[AC[UA].identifier]&&xC.push(AC[UA]),Gt&(aa|eA)&&delete ya[AC[UA].identifier],UA++;if(xC.length)return[wt(SI.concat(xC),"identifier"),xC]}var rC=2500,JI=25;function cC(){_I.apply(this,arguments);var kt=be(this.handler,this);this.touch=new AI(this.manager,kt),this.mouse=new mC(this.manager,kt),this.primaryTouch=null,this.lastTouches=[]}pe(cC,_I,{handler:function(Gt,Dn,ya){var UA=ya.pointerType==ZA,SI=ya.pointerType==cI;if(!(SI&&ya.sourceCapabilities&&ya.sourceCapabilities.firesTouchEvents)){if(UA)sC.call(this,Dn,ya);else if(SI&&Vt.call(this,ya))return;this.callback(Gt,Dn,ya)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function sC(kt,Gt){kt&nI?(this.primaryTouch=Gt.changedPointers[0].identifier,XI.call(this,Gt)):kt&(aa|eA)&&XI.call(this,Gt)}function XI(kt){var Gt=kt.changedPointers[0];if(Gt.identifier===this.primaryTouch){var Dn={x:Gt.clientX,y:Gt.clientY};this.lastTouches.push(Dn);var ya=this.lastTouches,UA=function(){var SI=ya.indexOf(Dn);SI>-1&&ya.splice(SI,1)};setTimeout(UA,rC)}}function Vt(kt){for(var Gt=kt.srcEvent.clientX,Dn=kt.srcEvent.clientY,ya=0;ya<this.lastTouches.length;ya++){var UA=this.lastTouches[ya],SI=Math.abs(Gt-UA.x),AC=Math.abs(Dn-UA.y);if(SI<=JI&&AC<=JI)return!0}return!1}var Un=Ft(F.style,"touchAction"),Kn=Un!==S,qt="compute",Xt="auto",ga="manipulation",aA="none",BA="pan-x",uI="pan-y",mI=JC();function qI(kt,Gt){this.manager=kt,this.set(Gt)}qI.prototype={set:function(kt){kt==qt&&(kt=this.compute()),Kn&&this.manager.element.style&&mI[kt]&&(this.manager.element.style[Un]=kt),this.actions=kt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var kt=[];return se(this.manager.recognizers,function(Gt){Re(Gt.options.enable,[Gt])&&(kt=kt.concat(Gt.getTouchAction()))}),gC(kt.join(" "))},preventDefaults:function(kt){var Gt=kt.srcEvent,Dn=kt.offsetDirection;if(this.manager.session.prevented){Gt.preventDefault();return}var ya=this.actions,UA=Ct(ya,aA)&&!mI[aA],SI=Ct(ya,uI)&&!mI[uI],AC=Ct(ya,BA)&&!mI[BA];if(UA){var xC=kt.pointers.length===1,NC=kt.distance<2,$C=kt.deltaTime<250;if(xC&&NC&&$C)return}if(!(AC&&SI)&&(UA||SI&&Dn&fA||AC&&Dn&lA))return this.preventSrc(Gt)},preventSrc:function(kt){this.manager.session.prevented=!0,kt.preventDefault()}};function gC(kt){if(Ct(kt,aA))return aA;var Gt=Ct(kt,BA),Dn=Ct(kt,uI);return Gt&&Dn?aA:Gt||Dn?Gt?BA:uI:Ct(kt,ga)?ga:Xt}function JC(){if(!Kn)return!1;var kt={},Gt=s.CSS&&s.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Dn){kt[Dn]=Gt?s.CSS.supports("touch-action",Dn):!0}),kt}var WC=1,YI=2,dE=4,GC=8,KC=GC,fE=16,pE=32;function mE(kt){this.options=ge({},this.defaults,kt||{}),this.id=ta(),this.manager=null,this.options.enable=Fe(this.options.enable,!0),this.state=WC,this.simultaneous={},this.requireFail=[]}mE.prototype={defaults:{},set:function(kt){return ge(this.options,kt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(kt){if(oe(kt,"recognizeWith",this))return this;var Gt=this.simultaneous;return kt=PE(kt,this),Gt[kt.id]||(Gt[kt.id]=kt,kt.recognizeWith(this)),this},dropRecognizeWith:function(kt){return oe(kt,"dropRecognizeWith",this)?this:(kt=PE(kt,this),delete this.simultaneous[kt.id],this)},requireFailure:function(kt){if(oe(kt,"requireFailure",this))return this;var Gt=this.requireFail;return kt=PE(kt,this),It(Gt,kt)===-1&&(Gt.push(kt),kt.requireFailure(this)),this},dropRequireFailure:function(kt){if(oe(kt,"dropRequireFailure",this))return this;kt=PE(kt,this);var Gt=It(this.requireFail,kt);return Gt>-1&&this.requireFail.splice(Gt,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(kt){return!!this.simultaneous[kt.id]},emit:function(kt){var Gt=this,Dn=this.state;function ya(UA){Gt.manager.emit(UA,kt)}Dn<GC&&ya(Gt.options.event+dm(Dn)),ya(Gt.options.event),kt.additionalEvent&&ya(kt.additionalEvent),Dn>=GC&&ya(Gt.options.event+dm(Dn))},tryEmit:function(kt){if(this.canEmit())return this.emit(kt);this.state=pE},canEmit:function(){for(var kt=0;kt<this.requireFail.length;){if(!(this.requireFail[kt].state&(pE|WC)))return!1;kt++}return!0},recognize:function(kt){var Gt=ge({},kt);if(!Re(this.options.enable,[this,Gt])){this.reset(),this.state=pE;return}this.state&(KC|fE|pE)&&(this.state=WC),this.state=this.process(Gt),this.state&(YI|dE|GC|fE)&&this.tryEmit(Gt)},process:function(kt){},getTouchAction:function(){},reset:function(){}};function dm(kt){return kt&fE?"cancel":kt&GC?"end":kt&dE?"move":kt&YI?"start":""}function fm(kt){return kt==oA?"down":kt==sA?"up":kt==xA?"left":kt==ua?"right":""}function PE(kt,Gt){var Dn=Gt.manager;return Dn?Dn.get(kt):kt}function aE(){mE.apply(this,arguments)}pe(aE,mE,{defaults:{pointers:1},attrTest:function(kt){var Gt=this.options.pointers;return Gt===0||kt.pointers.length===Gt},process:function(kt){var Gt=this.state,Dn=kt.eventType,ya=Gt&(YI|dE),UA=this.attrTest(kt);return ya&&(Dn&eA||!UA)?Gt|fE:ya||UA?Dn&aa?Gt|GC:Gt&YI?Gt|dE:YI:pE}});function UC(){aE.apply(this,arguments),this.pX=null,this.pY=null}pe(UC,aE,{defaults:{event:"pan",threshold:10,pointers:1,direction:gA},getTouchAction:function(){var kt=this.options.direction,Gt=[];return kt&fA&&Gt.push(uI),kt&lA&&Gt.push(BA),Gt},directionTest:function(kt){var Gt=this.options,Dn=!0,ya=kt.distance,UA=kt.direction,SI=kt.deltaX,AC=kt.deltaY;return UA&Gt.direction||(Gt.direction&fA?(UA=SI===0?DA:SI<0?xA:ua,Dn=SI!=this.pX,ya=Math.abs(kt.deltaX)):(UA=AC===0?DA:AC<0?sA:oA,Dn=AC!=this.pY,ya=Math.abs(kt.deltaY))),kt.direction=UA,Dn&&ya>Gt.threshold&&UA&Gt.direction},attrTest:function(kt){return aE.prototype.attrTest.call(this,kt)&&(this.state&YI||!(this.state&YI)&&this.directionTest(kt))},emit:function(kt){this.pX=kt.deltaX,this.pY=kt.deltaY;var Gt=fm(kt.direction);Gt&&(kt.additionalEvent=this.options.event+Gt),this._super.emit.call(this,kt)}});function vE(){aE.apply(this,arguments)}pe(vE,aE,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[aA]},attrTest:function(kt){return this._super.attrTest.call(this,kt)&&(Math.abs(kt.scale-1)>this.options.threshold||this.state&YI)},emit:function(kt){if(kt.scale!==1){var Gt=kt.scale<1?"in":"out";kt.additionalEvent=this.options.event+Gt}this._super.emit.call(this,kt)}});function OE(){mE.apply(this,arguments),this._timer=null,this._input=null}pe(OE,mE,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Xt]},process:function(kt){var Gt=this.options,Dn=kt.pointers.length===Gt.pointers,ya=kt.distance<Gt.threshold,UA=kt.deltaTime>Gt.time;if(this._input=kt,!ya||!Dn||kt.eventType&(aa|eA)&&!UA)this.reset();else if(kt.eventType&nI)this.reset(),this._timer=K(function(){this.state=KC,this.tryEmit()},Gt.time,this);else if(kt.eventType&aa)return KC;return pE},reset:function(){clearTimeout(this._timer)},emit:function(kt){this.state===KC&&(kt&&kt.eventType&aa?this.manager.emit(this.options.event+"up",kt):(this._input.timeStamp=J(),this.manager.emit(this.options.event,this._input)))}});function GE(){aE.apply(this,arguments)}pe(GE,aE,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[aA]},attrTest:function(kt){return this._super.attrTest.call(this,kt)&&(Math.abs(kt.rotation)>this.options.threshold||this.state&YI)}});function tm(){aE.apply(this,arguments)}pe(tm,aE,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:fA|lA,pointers:1},getTouchAction:function(){return UC.prototype.getTouchAction.call(this)},attrTest:function(kt){var Gt=this.options.direction,Dn;return Gt&(fA|lA)?Dn=kt.overallVelocity:Gt&fA?Dn=kt.overallVelocityX:Gt&lA&&(Dn=kt.overallVelocityY),this._super.attrTest.call(this,kt)&&Gt&kt.offsetDirection&&kt.distance>this.options.threshold&&kt.maxPointers==this.options.pointers&&H(Dn)>this.options.velocity&&kt.eventType&aa},emit:function(kt){var Gt=fm(kt.offsetDirection);Gt&&this.manager.emit(this.options.event+Gt,kt),this.manager.emit(this.options.event,kt)}});function UE(){mE.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}pe(UE,mE,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ga]},process:function(kt){var Gt=this.options,Dn=kt.pointers.length===Gt.pointers,ya=kt.distance<Gt.threshold,UA=kt.deltaTime<Gt.time;if(this.reset(),kt.eventType&nI&&this.count===0)return this.failTimeout();if(ya&&UA&&Dn){if(kt.eventType!=aa)return this.failTimeout();var SI=this.pTime?kt.timeStamp-this.pTime<Gt.interval:!0,AC=!this.pCenter||EI(this.pCenter,kt.center)<Gt.posThreshold;this.pTime=kt.timeStamp,this.pCenter=kt.center,!AC||!SI?this.count=1:this.count+=1,this._input=kt;var xC=this.count%Gt.taps;if(xC===0)return this.hasRequireFailures()?(this._timer=K(function(){this.state=KC,this.tryEmit()},Gt.interval,this),YI):KC}return pE},failTimeout:function(){return this._timer=K(function(){this.state=pE},this.options.interval,this),pE},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==KC&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function BE(kt,Gt){return Gt=Gt||{},Gt.recognizers=Fe(Gt.recognizers,BE.defaults.preset),new rm(kt,Gt)}BE.VERSION="2.0.7",BE.defaults={domEvents:!1,touchAction:qt,enable:!0,inputTarget:null,inputClass:null,preset:[[GE,{enable:!1}],[vE,{enable:!1},["rotate"]],[tm,{direction:fA}],[UC,{direction:fA},["swipe"]],[UE],[UE,{event:"doubletap",taps:2},["tap"]],[OE]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var SE=1,JE=2;function rm(kt,Gt){this.options=ge({},BE.defaults,Gt||{}),this.options.inputTarget=this.options.inputTarget||kt,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=kt,this.input=HI(this),this.touchAction=new qI(this,this.options.touchAction),im(this,!0),se(this.options.recognizers,function(Dn){var ya=this.add(new Dn[0](Dn[1]));Dn[2]&&ya.recognizeWith(Dn[2]),Dn[3]&&ya.requireFailure(Dn[3])},this)}rm.prototype={set:function(kt){return ge(this.options,kt),kt.touchAction&&this.touchAction.update(),kt.inputTarget&&(this.input.destroy(),this.input.target=kt.inputTarget,this.input.init()),this},stop:function(kt){this.session.stopped=kt?JE:SE},recognize:function(kt){var Gt=this.session;if(!Gt.stopped){this.touchAction.preventDefaults(kt);var Dn,ya=this.recognizers,UA=Gt.curRecognizer;(!UA||UA&&UA.state&KC)&&(UA=Gt.curRecognizer=null);for(var SI=0;SI<ya.length;)Dn=ya[SI],Gt.stopped!==JE&&(!UA||Dn==UA||Dn.canRecognizeWith(UA))?Dn.recognize(kt):Dn.reset(),!UA&&Dn.state&(YI|dE|GC)&&(UA=Gt.curRecognizer=Dn),SI++}},get:function(kt){if(kt instanceof mE)return kt;for(var Gt=this.recognizers,Dn=0;Dn<Gt.length;Dn++)if(Gt[Dn].options.event==kt)return Gt[Dn];return null},add:function(kt){if(oe(kt,"add",this))return this;var Gt=this.get(kt.options.event);return Gt&&this.remove(Gt),this.recognizers.push(kt),kt.manager=this,this.touchAction.update(),kt},remove:function(kt){if(oe(kt,"remove",this))return this;if(kt=this.get(kt),kt){var Gt=this.recognizers,Dn=It(Gt,kt);Dn!==-1&&(Gt.splice(Dn,1),this.touchAction.update())}return this},on:function(kt,Gt){if(kt!==S&&Gt!==S){var Dn=this.handlers;return se(Rt(kt),function(ya){Dn[ya]=Dn[ya]||[],Dn[ya].push(Gt)}),this}},off:function(kt,Gt){if(kt!==S){var Dn=this.handlers;return se(Rt(kt),function(ya){Gt?Dn[ya]&&Dn[ya].splice(It(Dn[ya],Gt),1):delete Dn[ya]}),this}},emit:function(kt,Gt){this.options.domEvents&&lE(kt,Gt);var Dn=this.handlers[kt]&&this.handlers[kt].slice();if(!(!Dn||!Dn.length)){Gt.type=kt,Gt.preventDefault=function(){Gt.srcEvent.preventDefault()};for(var ya=0;ya<Dn.length;)Dn[ya](Gt),ya++}},destroy:function(){this.element&&im(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function im(kt,Gt){var Dn=kt.element;if(Dn.style){var ya;se(kt.options.cssProps,function(UA,SI){ya=Ft(Dn.style,SI),Gt?(kt.oldCssProps[ya]=Dn.style[ya],Dn.style[ya]=UA):Dn.style[ya]=kt.oldCssProps[ya]||""}),Gt||(kt.oldCssProps={})}}function lE(kt,Gt){var Dn=f.createEvent("Event");Dn.initEvent(kt,!0,!0),Dn.gesture=Gt,Gt.target.dispatchEvent(Dn)}ge(BE,{INPUT_START:nI,INPUT_MOVE:uA,INPUT_END:aa,INPUT_CANCEL:eA,STATE_POSSIBLE:WC,STATE_BEGAN:YI,STATE_CHANGED:dE,STATE_ENDED:GC,STATE_RECOGNIZED:KC,STATE_CANCELLED:fE,STATE_FAILED:pE,DIRECTION_NONE:DA,DIRECTION_LEFT:xA,DIRECTION_RIGHT:ua,DIRECTION_UP:sA,DIRECTION_DOWN:oA,DIRECTION_HORIZONTAL:fA,DIRECTION_VERTICAL:lA,DIRECTION_ALL:gA,Manager:rm,Input:_I,TouchAction:qI,TouchInput:AI,MouseInput:mC,PointerEventInput:RC,TouchMouseInput:cC,SingleTouchInput:na,Recognizer:mE,AttrRecognizer:aE,Tap:UE,Pan:UC,Swipe:tm,Pinch:vE,Rotate:GE,Press:OE,on:Me,off:ve,each:se,merge:Be,extend:he,assign:ge,inherit:pe,bindFn:be,prefixed:Ft});var Lm=typeof s<"u"?s:typeof self<"u"?self:{};Lm.Hammer=BE,d.exports?d.exports=BE:s[_]=BE})(window,document,"Hammer")})(hammer$1);var hammerExports=hammer$1.exports;const hammer=getDefaultExportFromCjs(hammerExports),hammerjs=_mergeNamespaces({__proto__:null,default:hammer},[hammerExports]),INPUT_START=1,INPUT_MOVE=2,INPUT_END=4,MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END};function some(d,s){for(let f=0;f<d.length;f++)if(s(d[f]))return!0;return!1}function enhancePointerEventInput(d){const s=d.prototype.handler;d.prototype.handler=function(_){const S=this.store;_.button>0&&_.type==="pointerdown"&&(some(S,T=>T.pointerId===_.pointerId)||S.push(_)),s.call(this,_)}}function enhanceMouseInput(d){d.prototype.handler=function(f){let _=MOUSE_INPUT_MAP[f.type];_&INPUT_START&&f.button>=0&&(this.pressed=!0),_&INPUT_MOVE&&f.buttons===0&&(_=INPUT_END),this.pressed&&(_&INPUT_END&&(this.pressed=!1),this.callback(this.manager,_,{pointers:[f],changedPointers:[f],pointerType:"mouse",srcEvent:f}))}}enhancePointerEventInput(hammerExports.PointerEventInput);enhanceMouseInput(hammerExports.MouseInput);const Manager=hammerExports.Manager;class Input{constructor(s,f,_){this.element=s,this.callback=f,this.options={enable:!0,..._}}}const RECOGNIZERS=hammerjs?[[hammerjs.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[hammerjs.Rotate,{enable:!1}],[hammerjs.Pinch,{enable:!1}],[hammerjs.Swipe,{enable:!1}],[hammerjs.Pan,{threshold:0,enable:!1}],[hammerjs.Press,{enable:!1}],[hammerjs.Tap,{event:"doubletap",taps:2,enable:!1}],[hammerjs.Tap,{event:"anytap",enable:!1}],[hammerjs.Tap,{enable:!1}]]:null,RECOGNIZER_COMPATIBLE_MAP={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},RECOGNIZER_FALLBACK_MAP={doubletap:["tap"]},BASIC_EVENT_ALIASES={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},INPUT_EVENT_TYPES={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},EVENT_RECOGNIZER_MAP={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},GESTURE_EVENT_ALIASES={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},userAgent=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",window_=typeof window<"u"?window:global;let passiveSupported=!1;try{const d={get passive(){return passiveSupported=!0,!0}};window_.addEventListener("test",null,d),window_.removeEventListener("test",null)}catch(d){passiveSupported=!1}const firefox=userAgent.indexOf("firefox")!==-1,{WHEEL_EVENTS}=INPUT_EVENT_TYPES,EVENT_TYPE$1="wheel",WHEEL_DELTA_MAGIC_SCALER=4.000244140625,WHEEL_DELTA_PER_LINE=40,SHIFT_MULTIPLIER=.25;class WheelInput extends Input{constructor(s,f,_){super(s,f,_),this.handleEvent=S=>{if(!this.options.enable)return;let T=S.deltaY;window_.WheelEvent&&(firefox&&S.deltaMode===window_.WheelEvent.DOM_DELTA_PIXEL&&(T/=window_.devicePixelRatio),S.deltaMode===window_.WheelEvent.DOM_DELTA_LINE&&(T*=WHEEL_DELTA_PER_LINE)),T!==0&&T%WHEEL_DELTA_MAGIC_SCALER===0&&(T=Math.floor(T/WHEEL_DELTA_MAGIC_SCALER)),S.shiftKey&&T&&(T=T*SHIFT_MULTIPLIER),this.callback({type:EVENT_TYPE$1,center:{x:S.clientX,y:S.clientY},delta:-T,srcEvent:S,pointerType:"mouse",target:S.target})},this.events=(this.options.events||[]).concat(WHEEL_EVENTS),this.events.forEach(S=>s.addEventListener(S,this.handleEvent,passiveSupported?{passive:!1}:!1))}destroy(){this.events.forEach(s=>this.element.removeEventListener(s,this.handleEvent))}enableEventType(s,f){s===EVENT_TYPE$1&&(this.options.enable=f)}}const{MOUSE_EVENTS:MOUSE_EVENTS$1}=INPUT_EVENT_TYPES,MOVE_EVENT_TYPE="pointermove",OVER_EVENT_TYPE="pointerover",OUT_EVENT_TYPE="pointerout",ENTER_EVENT_TYPE="pointerenter",LEAVE_EVENT_TYPE="pointerleave";class MoveInput extends Input{constructor(s,f,_){super(s,f,_),this.handleEvent=T=>{this.handleOverEvent(T),this.handleOutEvent(T),this.handleEnterEvent(T),this.handleLeaveEvent(T),this.handleMoveEvent(T)},this.pressed=!1;const{enable:S}=this.options;this.enableMoveEvent=S,this.enableLeaveEvent=S,this.enableEnterEvent=S,this.enableOutEvent=S,this.enableOverEvent=S,this.events=(this.options.events||[]).concat(MOUSE_EVENTS$1),this.events.forEach(T=>s.addEventListener(T,this.handleEvent))}destroy(){this.events.forEach(s=>this.element.removeEventListener(s,this.handleEvent))}enableEventType(s,f){s===MOVE_EVENT_TYPE&&(this.enableMoveEvent=f),s===OVER_EVENT_TYPE&&(this.enableOverEvent=f),s===OUT_EVENT_TYPE&&(this.enableOutEvent=f),s===ENTER_EVENT_TYPE&&(this.enableEnterEvent=f),s===LEAVE_EVENT_TYPE&&(this.enableLeaveEvent=f)}handleOverEvent(s){this.enableOverEvent&&s.type==="mouseover"&&this._emit(OVER_EVENT_TYPE,s)}handleOutEvent(s){this.enableOutEvent&&s.type==="mouseout"&&this._emit(OUT_EVENT_TYPE,s)}handleEnterEvent(s){this.enableEnterEvent&&s.type==="mouseenter"&&this._emit(ENTER_EVENT_TYPE,s)}handleLeaveEvent(s){this.enableLeaveEvent&&s.type==="mouseleave"&&this._emit(LEAVE_EVENT_TYPE,s)}handleMoveEvent(s){if(this.enableMoveEvent)switch(s.type){case"mousedown":s.button>=0&&(this.pressed=!0);break;case"mousemove":s.buttons===0&&(this.pressed=!1),this.pressed||this._emit(MOVE_EVENT_TYPE,s);break;case"mouseup":this.pressed=!1;break}}_emit(s,f){this.callback({type:s,center:{x:f.clientX,y:f.clientY},srcEvent:f,pointerType:"mouse",target:f.target})}}const{KEY_EVENTS}=INPUT_EVENT_TYPES,DOWN_EVENT_TYPE="keydown",UP_EVENT_TYPE="keyup";class KeyInput extends Input{constructor(s,f,_){super(s,f,_),this.handleEvent=S=>{const T=S.target||S.srcElement;T.tagName==="INPUT"&&T.type==="text"||T.tagName==="TEXTAREA"||(this.enableDownEvent&&S.type==="keydown"&&this.callback({type:DOWN_EVENT_TYPE,srcEvent:S,key:S.key,target:S.target}),this.enableUpEvent&&S.type==="keyup"&&this.callback({type:UP_EVENT_TYPE,srcEvent:S,key:S.key,target:S.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(KEY_EVENTS),s.tabIndex=this.options.tabIndex||0,s.style.outline="none",this.events.forEach(S=>s.addEventListener(S,this.handleEvent))}destroy(){this.events.forEach(s=>this.element.removeEventListener(s,this.handleEvent))}enableEventType(s,f){s===DOWN_EVENT_TYPE&&(this.enableDownEvent=f),s===UP_EVENT_TYPE&&(this.enableUpEvent=f)}}const EVENT_TYPE="contextmenu";class ContextmenuInput extends Input{constructor(s,f,_){super(s,f,_),this.handleEvent=S=>{this.options.enable&&this.callback({type:EVENT_TYPE,center:{x:S.clientX,y:S.clientY},srcEvent:S,pointerType:"mouse",target:S.target})},s.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(s,f){s===EVENT_TYPE&&(this.options.enable=f)}}const DOWN_EVENT=1,MOVE_EVENT=2,UP_EVENT=4,MOUSE_EVENTS={pointerdown:DOWN_EVENT,pointermove:MOVE_EVENT,pointerup:UP_EVENT,mousedown:DOWN_EVENT,mousemove:MOVE_EVENT,mouseup:UP_EVENT},MOUSE_EVENT_BUTTON_LEFT=0,MOUSE_EVENT_BUTTON_MIDDLE=1,MOUSE_EVENT_BUTTON_RIGHT=2,MOUSE_EVENT_BUTTONS_LEFT_MASK=1,MOUSE_EVENT_BUTTONS_RIGHT_MASK=2,MOUSE_EVENT_BUTTONS_MIDDLE_MASK=4;function whichButtons(d){const s=MOUSE_EVENTS[d.srcEvent.type];if(!s)return null;const{buttons:f,button:_}=d.srcEvent;let S=!1,T=!1,F=!1;return s===MOVE_EVENT?(S=!!(f&MOUSE_EVENT_BUTTONS_LEFT_MASK),T=!!(f&MOUSE_EVENT_BUTTONS_MIDDLE_MASK),F=!!(f&MOUSE_EVENT_BUTTONS_RIGHT_MASK)):(S=_===MOUSE_EVENT_BUTTON_LEFT,T=_===MOUSE_EVENT_BUTTON_MIDDLE,F=_===MOUSE_EVENT_BUTTON_RIGHT),{leftButton:S,middleButton:T,rightButton:F}}function getOffsetPosition(d,s){const f=d.center;if(!f)return null;const _=s.getBoundingClientRect(),S=_.width/s.offsetWidth||1,T=_.height/s.offsetHeight||1,F={x:(f.x-_.left-s.clientLeft)/S,y:(f.y-_.top-s.clientTop)/T};return{center:f,offsetCenter:F}}const DEFAULT_OPTIONS$1={srcElement:"root",priority:0};class EventRegistrar{constructor(s){this.handleEvent=f=>{if(this.isEmpty())return;const _=this._normalizeEvent(f);let S=f.srcEvent.target;for(;S&&S!==_.rootElement;){if(this._emit(_,S),_.handled)return;S=S.parentNode}this._emit(_,"root")},this.eventManager=s,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(s,f,_,S=!1,T=!1){const{handlers:F,handlersByElement:M}=this;let P=DEFAULT_OPTIONS$1;typeof _=="string"||_&&_.addEventListener?P={...DEFAULT_OPTIONS$1,srcElement:_}:_&&(P={...DEFAULT_OPTIONS$1,..._});let H=M.get(P.srcElement);H||(H=[],M.set(P.srcElement,H));const J={type:s,handler:f,srcElement:P.srcElement,priority:P.priority};S&&(J.once=!0),T&&(J.passive=!0),F.push(J),this._active=this._active||!J.passive;let K=H.length-1;for(;K>=0&&!(H[K].priority>=J.priority);)K--;H.splice(K+1,0,J)}remove(s,f){const{handlers:_,handlersByElement:S}=this;for(let T=_.length-1;T>=0;T--){const F=_[T];if(F.type===s&&F.handler===f){_.splice(T,1);const M=S.get(F.srcElement);M.splice(M.indexOf(F),1),M.length===0&&S.delete(F.srcElement)}}this._active=_.some(T=>!T.passive)}_emit(s,f){const _=this.handlersByElement.get(f);if(_){let S=!1;const T=()=>{s.handled=!0},F=()=>{s.handled=!0,S=!0},M=[];for(let P=0;P<_.length;P++){const{type:H,handler:J,once:K}=_[P];if(J({...s,type:H,stopPropagation:T,stopImmediatePropagation:F}),K&&M.push(_[P]),S)break}for(let P=0;P<M.length;P++){const{type:H,handler:J}=M[P];this.remove(H,J)}}}_normalizeEvent(s){const f=this.eventManager.getElement();return{...s,...whichButtons(s),...getOffsetPosition(s,f),preventDefault:()=>{s.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:f}}}const DEFAULT_OPTIONS={events:null,recognizers:null,recognizerOptions:{},Manager,touchAction:"none",tabIndex:0};class EventManager{constructor(s=null,f){this._onBasicInput=S=>{const{srcEvent:T}=S,F=BASIC_EVENT_ALIASES[T.type];F&&this.manager.emit(F,S)},this._onOtherEvent=S=>{this.manager.emit(S.type,S)},this.options={...DEFAULT_OPTIONS,...f},this.events=new Map,this.setElement(s);const{events:_}=this.options;_&&this.on(_)}getElement(){return this.element}setElement(s){if(this.element&&this.destroy(),this.element=s,!s)return;const{options:f}=this,_=f.Manager;this.manager=new _(s,{touchAction:f.touchAction,recognizers:f.recognizers||RECOGNIZERS}).on("hammer.input",this._onBasicInput),f.recognizers||Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach(S=>{const T=this.manager.get(S);T&&RECOGNIZER_COMPATIBLE_MAP[S].forEach(F=>{T.recognizeWith(F)})});for(const S in f.recognizerOptions){const T=this.manager.get(S);if(T){const F=f.recognizerOptions[S];delete F.enable,T.set(F)}}this.wheelInput=new WheelInput(s,this._onOtherEvent,{enable:!1}),this.moveInput=new MoveInput(s,this._onOtherEvent,{enable:!1}),this.keyInput=new KeyInput(s,this._onOtherEvent,{enable:!1,tabIndex:f.tabIndex}),this.contextmenuInput=new ContextmenuInput(s,this._onOtherEvent,{enable:!1});for(const[S,T]of this.events)T.isEmpty()||(this._toggleRecognizer(T.recognizerName,!0),this.manager.on(S,T.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(s,f,_){this._addEventHandler(s,f,_,!1)}once(s,f,_){this._addEventHandler(s,f,_,!0)}watch(s,f,_){this._addEventHandler(s,f,_,!1,!0)}off(s,f){this._removeEventHandler(s,f)}_toggleRecognizer(s,f){const{manager:_}=this;if(!_)return;const S=_.get(s);if(S&&S.options.enable!==f){S.set({enable:f});const T=RECOGNIZER_FALLBACK_MAP[s];T&&!this.options.recognizers&&T.forEach(F=>{const M=_.get(F);f?(M.requireFailure(s),S.dropRequireFailure(F)):M.dropRequireFailure(s)})}this.wheelInput.enableEventType(s,f),this.moveInput.enableEventType(s,f),this.keyInput.enableEventType(s,f),this.contextmenuInput.enableEventType(s,f)}_addEventHandler(s,f,_,S,T){if(typeof s!="string"){_=f;for(const J in s)this._addEventHandler(J,s[J],_,S,T);return}const{manager:F,events:M}=this,P=GESTURE_EVENT_ALIASES[s]||s;let H=M.get(P);H||(H=new EventRegistrar(this),M.set(P,H),H.recognizerName=EVENT_RECOGNIZER_MAP[P]||P,F&&F.on(P,H.handleEvent)),H.add(s,f,_,S,T),H.isEmpty()||this._toggleRecognizer(H.recognizerName,!0)}_removeEventHandler(s,f){if(typeof s!="string"){for(const F in s)this._removeEventHandler(F,s[F]);return}const{events:_}=this,S=GESTURE_EVENT_ALIASES[s]||s,T=_.get(S);if(T&&(T.remove(s,f),T.isEmpty())){const{recognizerName:F}=T;let M=!1;for(const P of _.values())if(P.recognizerName===F&&!P.isEmpty()){M=!0;break}M||this._toggleRecognizer(F,!1)}}}function noop$7(){}const getCursor=({isDragging:d})=>d?"grabbing":"grab",defaultProps$o={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{type:"webgl"},gl:null,glOptions:{},canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:noop$7,onWebGLInitialized:noop$7,onResize:noop$7,onViewStateChange:noop$7,onInteractionStateChange:noop$7,onBeforeRender:noop$7,onAfterRender:noop$7,onLoad:noop$7,onError:d=>defaultLogger.error(d.message,d.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor,getTooltip:null,debug:!1,drawPickingColors:!1};class Deck{constructor(s){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new Stats({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=_=>{const{_pickRequest:S}=this;if(_.type==="pointerleave")S.x=-1,S.y=-1,S.radius=0;else{if(_.leftButton||_.rightButton)return;{const T=_.offsetCenter;if(!T)return;S.x=T.x,S.y=T.y,S.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:S.x,y:S.y}),S.event=_},this._onEvent=_=>{const S=EVENTS[_.type],T=_.offsetCenter;if(!S||!T||!this.layerManager)return;const F=this.layerManager.getLayers(),M=this.deckPicker.getLastPickedObject({x:T.x,y:T.y,layers:F,viewports:this.getViewports(T)},this._lastPointerDownInfo),{layer:P}=M,H=P&&(P[S.handler]||P.props[S.handler]),J=this.props[S.handler];let K=!1;H&&(K=H.call(P,M,_)),K||(J==null||J(M,_),this.widgetManager.onEvent(M,_))},this._onPointerDown=_=>{const S=_.offsetCenter,T=this._pick("pickObject","pickObject Time",{x:S.x,y:S.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=T.result[0]||T.emptyInfo},this.props={...defaultProps$o,...s},s=this.props,s.viewState&&s.initialViewState&&defaultLogger.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,s.device?this.device=s.device:s.gl&&(s.gl instanceof WebGLRenderingContext&&defaultLogger.error("WebGL1 context not supported.")(),this.device=WebGLDevice.attach(s.gl));let f=this.device;f||(luma.registerDevices([WebGLDevice]),f=luma.createDevice({...s.deviceProps,canvas:this._createCanvas(s)})),this.animationLoop=this._createAnimationLoop(f,s),this.setProps(s),s._typedArrayManagerProps&&defaultTypedArrayManager.setOptions(s._typedArrayManagerProps),this.animationLoop.start()}finalize(){var s,f,_,S,T,F,M,P,H,J;(s=this.animationLoop)==null||s.stop(),(f=this.animationLoop)==null||f.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,(_=this.layerManager)==null||_.finalize(),this.layerManager=null,(S=this.viewManager)==null||S.finalize(),this.viewManager=null,(T=this.effectManager)==null||T.finalize(),this.effectManager=null,(F=this.deckRenderer)==null||F.finalize(),this.deckRenderer=null,(M=this.deckPicker)==null||M.finalize(),this.deckPicker=null,(P=this.eventManager)==null||P.destroy(),this.eventManager=null,(H=this.widgetManager)==null||H.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&((J=this.canvas.parentElement)==null||J.removeChild(this.canvas),this.canvas=null)}setProps(s){var _;this.stats.get("setProps Time").timeStart(),"onLayerHover"in s&&defaultLogger.removed("onLayerHover","onHover")(),"onLayerClick"in s&&defaultLogger.removed("onLayerClick","onClick")(),s.initialViewState&&!deepEqual(this.props.initialViewState,s.initialViewState,3)&&(this.viewState=s.initialViewState),Object.assign(this.props,s),this._setCanvasSize(this.props);const f=Object.create(this.props);Object.assign(f,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),(_=this.animationLoop)==null||_.setProps(f),this.layerManager&&(this.viewManager.setProps(f),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(f),this.effectManager.setProps(f),this.deckRenderer.setProps(f),this.deckPicker.setProps(f),this.widgetManager.setProps(f)),this.stats.get("setProps Time").timeEnd()}needsRedraw(s={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let f=this._needsRedraw;s.clearRedrawFlags&&(this._needsRedraw=!1);const _=this.viewManager.needsRedraw(s),S=this.layerManager.needsRedraw(s),T=this.effectManager.needsRedraw(s),F=this.deckRenderer.needsRedraw(s);return f=f||_||S||T||F,f}redraw(s){if(!this.layerManager)return;let f=this.needsRedraw({clearRedrawFlags:!0});f=s||f,f&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(f):this._drawLayers(f))}get isInitialized(){return this.viewManager!==null}getViews(){return assert$2(this.viewManager),this.viewManager.views}getViewports(s){return assert$2(this.viewManager),this.viewManager.getViewports(s)}getCanvas(){return this.canvas}pickObject(s){const f=this._pick("pickObject","pickObject Time",s).result;return f.length?f[0]:null}pickMultipleObjects(s){return s.depth=s.depth||10,this._pick("pickObject","pickMultipleObjects Time",s).result}pickObjects(s){return this._pick("pickObjects","pickObjects Time",s)}_addResources(s,f=!1){for(const _ in s)this.layerManager.resourceManager.add({resourceId:_,data:s[_],forceUpdate:f})}_removeResources(s){for(const f of s)this.layerManager.resourceManager.remove(f)}_addDefaultEffect(s){this.effectManager.addDefaultEffect(s)}_addDefaultShaderModule(s){this.layerManager.addDefaultShaderModule(s)}_removeDefaultShaderModule(s){var f;(f=this.layerManager)==null||f.removeDefaultShaderModule(s)}_pick(s,f,_){assert$2(this.deckPicker);const{stats:S}=this;S.get("Pick Count").incrementCount(),S.get(f).timeStart();const T=this.deckPicker[s]({layers:this.layerManager.getLayers(_),views:this.viewManager.getViews(),viewports:this.getViewports(_),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),..._});return S.get(f).timeEnd(),T}_createCanvas(s){let f=s.canvas;return typeof f=="string"&&(f=document.getElementById(f),assert$2(f)),f||(f=document.createElement("canvas"),f.id=s.id||"deckgl-overlay",(s.parent||document.body).appendChild(f)),Object.assign(f.style,s.style),f}_setCanvasSize(s){var S;if(!this.canvas)return;const{width:f,height:_}=s;if(f||f===0){const T=Number.isFinite(f)?`${f}px`:f;this.canvas.style.width=T}if(_||_===0){const T=Number.isFinite(_)?`${_}px`:_;this.canvas.style.position=((S=s.style)==null?void 0:S.position)||"absolute",this.canvas.style.height=T}}_updateCanvasSize(){var S,T;const{canvas:s}=this;if(!s)return;const f=s.clientWidth??s.width,_=s.clientHeight??s.height;(f!==this.width||_!==this.height)&&(this.width=f,this.height=_,(S=this.viewManager)==null||S.setProps({width:f,height:_}),(T=this.layerManager)==null||T.activateViewport(this.getViewports()[0]),this.props.onResize({width:f,height:_}))}_createAnimationLoop(s,f){const{gl:_,onError:S,useDevicePixels:T}=f;return new AnimationLoop({device:s,useDevicePixels:T,autoResizeDrawingBuffer:!_,autoResizeViewport:!1,onInitialize:F=>this._setDevice(F.device),onRender:this._onRenderFrame.bind(this),onError:S})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:s}=this.props,f=Array.isArray(s)?s:s?[s]:[new MapView({id:"default-view"})];return f.length&&this.props.controller&&(f[0].props.controller=this.props.controller),f}_onContextLost(){const{onError:s}=this.props;this.animationLoop&&s&&s(new Error("WebGL context is lost"))}_pickAndCallback(){var f,_,S;const{_pickRequest:s}=this;if(s.event){const{result:T,emptyInfo:F}=this._pick("pickObject","pickObject Time",s);this.cursorState.isHovering=T.length>0;let M=F,P=!1;for(const H of T)M=H,P=((f=H.layer)==null?void 0:f.onHover(H,s.event))||P;P||((S=(_=this.props).onHover)==null||S.call(_,M,s.event),this.widgetManager.onHover(M,s.event)),s.event=null}}_updateCursor(){const s=this.props.parent||this.canvas;s&&(s.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(s){var S,T;if(this.device=s,!this.animationLoop)return;this.canvas||(this.canvas=(S=this.device.canvasContext)==null?void 0:S.canvas),this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device instanceof WebGLDevice&&this.props.onWebGLInitialized(this.device.gl);const f=new Timeline;f.play(),this.animationLoop.attachTimeline(f),this.eventManager=new EventManager(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const F in EVENTS)this.eventManager.on(F,this._onEvent);this.viewManager=new ViewManager({timeline:f,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const _=this.viewManager.getViewports()[0];this.layerManager=new LayerManager(this.device,{deck:this,stats:this.stats,viewport:_,timeline:f}),this.effectManager=new EffectManager({deck:this,device:this.device}),this.deckRenderer=new DeckRenderer(this.device),this.deckPicker=new DeckPicker(this.device),this.widgetManager=new WidgetManager({deck:this,parentElement:(T=this.canvas)==null?void 0:T.parentElement}),this.widgetManager.addDefault(new Tooltip),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(s,f){var F;const{device:_,gl:S}=this.layerManager.context;this.props.onBeforeRender({device:_,gl:S});const T={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...f};(F=this.deckRenderer)==null||F.renderLayers(T),T.pass==="screen"&&this.widgetManager.onRedraw({viewports:T.viewports,layers:T.layers}),this.props.onAfterRender({device:_,gl:S})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),defaultLogger.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(s){const f=this.props.onViewStateChange(s)||s.viewState;this.viewState&&(this.viewState={...this.viewState,[s.viewId]:f},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(s){this.cursorState.isDragging=s.isDragging||!1,this.props.onInteractionStateChange(s)}_getFrameStats(){const{stats:s}=this;s.get("frameRate").timeEnd(),s.get("frameRate").timeStart();const f=this.animationLoop.stats;s.get("GPU Time").addTime(f.get("GPU Time").lastTiming),s.get("CPU Time").addTime(f.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:s,stats:f}=this;s.fps=f.get("frameRate").getHz(),s.setPropsTime=f.get("setProps Time").time,s.updateAttributesTime=f.get("Update Attributes").time,s.framesRedrawn=f.get("Redraw Count").count,s.pickTime=f.get("pickObject Time").time+f.get("pickMultipleObjects Time").time+f.get("pickObjects Time").time,s.pickCount=f.get("Pick Count").count,s.gpuTime=f.get("GPU Time").time,s.cpuTime=f.get("CPU Time").time,s.gpuTimePerFrame=f.get("GPU Time").getAverageTime(),s.cpuTimePerFrame=f.get("CPU Time").getAverageTime();const _=luma.stats.get("Memory Usage");s.bufferMemory=_.get("Buffer Memory").count,s.textureMemory=_.get("Texture Memory").count,s.renderbufferMemory=_.get("Renderbuffer Memory").count,s.gpuMemory=_.get("GPU Memory").count}}Deck.defaultProps=defaultProps$o;Deck.VERSION=VERSION$2;function typedArrayFromDataType(d){switch(d){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return getTypedArrayFromDataType(d)}}const dataTypeFromTypedArray=getDataTypeFromTypedArray;function getBufferAttributeLayout(d,s){return{attribute:d,format:s.size>1?`${s.type}x${s.size}`:s.type,byteOffset:s.offset||0}}function getStride(d){return d.stride||d.size*d.bytesPerElement}function bufferLayoutEqual(d,s){return d.type===s.type&&d.size===s.size&&getStride(d)===getStride(s)&&(d.offset||0)===(s.offset||0)}function resolveShaderAttribute(d,s){s.offset&&defaultLogger.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const f=getStride(d),_=s.vertexOffset!==void 0?s.vertexOffset:d.vertexOffset||0,S=s.elementOffset||0,T=_*f+S*d.bytesPerElement+(d.offset||0);return{...s,offset:T,stride:f}}function resolveDoublePrecisionShaderAttributes(d,s){const f=resolveShaderAttribute(d,s);return{high:f,low:{...f,offset:f.offset+d.size*4}}}class DataColumn{constructor(s,f,_){this._buffer=null,this.device=s,this.id=f.id||"",this.size=f.size||1;const S=f.logicalType||f.type,T=S==="float64";let{defaultValue:F}=f;F=Number.isFinite(F)?[F]:F||new Array(this.size).fill(0);let M;T?M="float32":!S&&f.isIndexed?M="uint32":M=S||"float32";let P=typedArrayFromDataType(S||M);this.doublePrecision=T,T&&f.fp64===!1&&(P=Float32Array),this.value=null,this.settings={...f,defaultType:P,defaultValue:F,logicalType:S,type:M,normalized:M.includes("norm"),size:this.size,bytesPerElement:P.BYTES_PER_ELEMENT},this.state={..._,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const s=this.getAccessor();return s.vertexOffset?s.vertexOffset*getStride(s):0}get numInstances(){return this.state.numInstances}set numInstances(s){this.state.numInstances=s}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),defaultTypedArrayManager.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(s=this.id,f=null){const _={};if(this.state.constant){const S=this.value;if(f){const T=resolveShaderAttribute(this.getAccessor(),f),F=T.offset/S.BYTES_PER_ELEMENT,M=T.size||this.size;_[s]=S.subarray(F,F+M)}else _[s]=S}else _[s]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?_[`${s}64Low`]=_[s]:_[`${s}64Low`]=new Float32Array(this.size)),_}_getBufferLayout(s=this.id,f=null){const _=this.getAccessor(),S=[],T={name:this.id,byteStride:getStride(_),attributes:S};if(this.doublePrecision){const F=resolveDoublePrecisionShaderAttributes(_,f||{});S.push(getBufferAttributeLayout(s,{..._,...F.high}),getBufferAttributeLayout(`${s}64Low`,{..._,...F.low}))}else if(f){const F=resolveShaderAttribute(_,f);S.push(getBufferAttributeLayout(s,{..._,...F}))}else S.push(getBufferAttributeLayout(s,_));return T}setAccessor(s){this.state.bufferAccessor=s}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let s=null;if(this.state.constant&&this.value){const f=Array.from(this.value);s=[f,f]}else{const{value:f,numInstances:_,size:S}=this,T=_*S;if(f&&T&&f.length>=T){const F=new Array(S).fill(1/0),M=new Array(S).fill(-1/0);for(let P=0;P<T;)for(let H=0;H<S;H++){const J=f[P++];J<F[H]&&(F[H]=J),J>M[H]&&(M[H]=J)}s=[F,M]}}return this.state.bounds=s,s}setData(s){const{state:f}=this;let _;ArrayBuffer.isView(s)?_={value:s}:s instanceof Buffer$1?_={buffer:s}:_=s;const S={...this.settings,..._};if(ArrayBuffer.isView(_.value)){if(!_.type)if(this.doublePrecision&&_.value instanceof Float64Array)S.type="float32";else{const F=dataTypeFromTypedArray(_.value);S.type=S.normalized?F.replace("int","norm"):F}S.bytesPerElement=_.value.BYTES_PER_ELEMENT,S.stride=getStride(S)}if(f.bounds=null,_.constant){let T=_.value;if(T=this._normalizeValue(T,[],0),this.settings.normalized&&(T=this.normalizeConstant(T)),!(!f.constant||!this._areValuesEqual(T,this.value)))return!1;f.externalBuffer=null,f.constant=!0,this.value=ArrayBuffer.isView(T)?T:new Float32Array(T)}else if(_.buffer){const T=_.buffer;f.externalBuffer=T,f.constant=!1,this.value=_.value||null}else if(_.value){this._checkExternalBuffer(_);let T=_.value;f.externalBuffer=null,f.constant=!1,this.value=T;let{buffer:F}=this;const M=getStride(S),P=(S.vertexOffset||0)*M;if(this.doublePrecision&&T instanceof Float64Array&&(T=toDoublePrecisionArray(T,S)),this.settings.isIndexed){const J=this.settings.defaultType;T.constructor!==J&&(T=new J(T))}const H=T.byteLength+P+M*2;(!F||F.byteLength<H)&&(F=this._createBuffer(H)),F.write(T,P)}return this.setAccessor(S),!0}updateSubBuffer(s={}){this.state.bounds=null;const f=this.value,{startOffset:_=0,endOffset:S}=s;this.buffer.write(this.doublePrecision&&f instanceof Float64Array?toDoublePrecisionArray(f,{size:this.size,startIndex:_,endIndex:S}):f.subarray(_,S),_*f.BYTES_PER_ELEMENT+this.byteOffset)}allocate(s,f=!1){const{state:_}=this,S=_.allocatedValue,T=defaultTypedArrayManager.allocate(S,s+1,{size:this.size,type:this.settings.defaultType,copy:f});this.value=T;const{byteOffset:F}=this;let{buffer:M}=this;return(!M||M.byteLength<T.byteLength+F)&&(M=this._createBuffer(T.byteLength+F),f&&S&&M.write(S instanceof Float64Array?toDoublePrecisionArray(S,this):S,F)),_.allocatedValue=T,_.constant=!1,_.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(s){const{value:f}=s;if(!ArrayBuffer.isView(f))throw new Error(`Attribute ${this.id} value is not TypedArray`);const _=this.settings.defaultType;let S=!1;if(this.doublePrecision&&(S=f.BYTES_PER_ELEMENT<4),S)throw new Error(`Attribute ${this.id} does not support ${f.constructor.name}`);!(f instanceof _)&&this.settings.normalized&&!("normalized"in s)&&defaultLogger.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(s){switch(this.settings.type){case"snorm8":return new Float32Array(s).map(f=>(f+128)/255*2-1);case"snorm16":return new Float32Array(s).map(f=>(f+32768)/65535*2-1);case"unorm8":return new Float32Array(s).map(f=>f/255);case"unorm16":return new Float32Array(s).map(f=>f/65535);default:return s}}_normalizeValue(s,f,_){const{defaultValue:S,size:T}=this.settings;if(Number.isFinite(s))return f[_]=s,f;if(!s){let F=T;for(;--F>=0;)f[_+F]=S[F];return f}switch(T){case 4:f[_+3]=Number.isFinite(s[3])?s[3]:S[3];case 3:f[_+2]=Number.isFinite(s[2])?s[2]:S[2];case 2:f[_+1]=Number.isFinite(s[1])?s[1]:S[1];case 1:f[_+0]=Number.isFinite(s[0])?s[0]:S[0];break;default:let F=T;for(;--F>=0;)f[_+F]=Number.isFinite(s[F])?s[F]:S[F]}return f}_areValuesEqual(s,f){if(!s||!f)return!1;const{size:_}=this;for(let S=0;S<_;S++)if(s[S]!==f[S])return!1;return!0}_createBuffer(s){var S;this._buffer&&this._buffer.destroy();const{isIndexed:f,type:_}=this.settings;return this._buffer=this.device.createBuffer({...(S=this._buffer)==null?void 0:S.props,id:this.id,usage:f?Buffer$1.INDEX:Buffer$1.VERTEX,indexType:f?_:void 0,byteLength:s}),this._buffer}}const EMPTY_ARRAY$2=[],placeholderArray=[];function createIterable(d,s=0,f=1/0){let _=EMPTY_ARRAY$2;const S={index:-1,data:d,target:[]};return d?typeof d[Symbol.iterator]=="function"?_=d:d.length>0&&(placeholderArray.length=d.length,_=placeholderArray):_=EMPTY_ARRAY$2,(s>0||Number.isFinite(f))&&(_=(Array.isArray(_)?_:Array.from(_)).slice(s,f),S.index=s-1),{iterable:_,objectInfo:S}}function isAsyncIterable(d){return d&&d[Symbol.asyncIterator]}function getAccessorFromBuffer(d,s){const{size:f,stride:_,offset:S,startIndices:T,nested:F}=s,M=d.BYTES_PER_ELEMENT,P=_?_/M:f,H=S?S/M:0,J=Math.floor((d.length-H)/P);return(K,{index:oe,target:se})=>{if(!T){const Be=oe*P+H;for(let pe=0;pe<f;pe++)se[pe]=d[Be+pe];return se}const ae=T[oe],ge=T[oe+1]||J;let he;if(F){he=new Array(ge-ae);for(let Be=ae;Be<ge;Be++){const pe=Be*P+H;se=new Array(f);for(let be=0;be<f;be++)se[be]=d[pe+be];he[Be-ae]=se}}else if(P===f)he=d.subarray(ae*f+H,ge*f+H);else{he=new d.constructor((ge-ae)*f);let Be=0;for(let pe=ae;pe<ge;pe++){const be=pe*P+H;for(let Re=0;Re<f;Re++)he[Be++]=d[be+Re]}}return he}}const EMPTY=[],FULL=[[0,1/0]];function add$4(d,s){if(d===FULL||(s[0]<0&&(s[0]=0),s[0]>=s[1]))return d;const f=[],_=d.length;let S=0;for(let T=0;T<_;T++){const F=d[T];F[1]<s[0]?(f.push(F),S=T+1):F[0]>s[1]?f.push(F):s=[Math.min(F[0],s[0]),Math.max(F[1],s[1])]}return f.splice(S,0,s),f}const DEFAULT_TRANSITION_SETTINGS={interpolation:{duration:0,easing:d=>d},spring:{stiffness:.05,damping:.5}};function normalizeTransitionSettings(d,s){if(!d)return null;Number.isFinite(d)&&(d={type:"interpolation",duration:d});const f=d.type||"interpolation";return{...DEFAULT_TRANSITION_SETTINGS[f],...s,...d,type:f}}class Attribute extends DataColumn{constructor(s,f){super(s,f,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:FULL}),this.constant=!1,this.settings.update=f.update||(f.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(s){this.state.startIndices=s}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:s=!1}={}){const f=this.state.needsRedraw;return this.state.needsRedraw=f&&!s,f}layoutChanged(){return this.state.layoutChanged}setAccessor(s){var f;(f=this.state).layoutChanged||(f.layoutChanged=!bufferLayoutEqual(s,this.getAccessor())),super.setAccessor(s)}getUpdateTriggers(){const{accessor:s}=this.settings;return[this.id].concat(typeof s!="function"&&s||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(s){if(!s||!this.supportsTransition())return null;const{accessor:f}=this.settings,_=this.settings.transition,S=Array.isArray(f)?s[f.find(T=>s[T])]:s[f];return normalizeTransitionSettings(S,_)}setNeedsUpdate(s=this.id,f){if(this.state.needsUpdate=this.state.needsUpdate||s,this.setNeedsRedraw(s),f){const{startRow:_=0,endRow:S=1/0}=f;this.state.updateRanges=add$4(this.state.updateRanges,[_,S])}else this.state.updateRanges=FULL}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=EMPTY}setNeedsRedraw(s=this.id){this.state.needsRedraw=this.state.needsRedraw||s}allocate(s){const{state:f,settings:_}=this;return _.noAlloc?!1:_.update?(super.allocate(s,f.updateRanges!==FULL),!0):!1}updateBuffer({numInstances:s,data:f,props:_,context:S}){if(!this.needsUpdate())return!1;const{state:{updateRanges:T},settings:{update:F,noAlloc:M}}=this;let P=!0;if(F){for(const[H,J]of T)F.call(S,this,{data:f,startRow:H,endRow:J,props:_,numInstances:s});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[H,J]of T){const K=Number.isFinite(H)?this.getVertexOffset(H):0,oe=Number.isFinite(J)?this.getVertexOffset(J):M||!Number.isFinite(s)?this.value.length:s*this.size;super.updateSubBuffer({startOffset:K,endOffset:oe})}this._checkAttributeArray()}else P=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),P}setConstantValue(s){return s===void 0||typeof s=="function"?!1:(this.setData({constant:!0,value:s})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(s){const{state:f}=this;return s?(this.clearNeedsUpdate(),f.lastExternalBuffer===s||(f.lastExternalBuffer=s,this.setNeedsRedraw(),this.setData(s)),!0):(f.lastExternalBuffer=null,!1)}setBinaryValue(s,f=null){const{state:_,settings:S}=this;if(!s)return _.binaryValue=null,_.binaryAccessor=null,!1;if(S.noAlloc)return!1;if(_.binaryValue===s)return this.clearNeedsUpdate(),!0;if(_.binaryValue=s,this.setNeedsRedraw(),S.transform||f!==this.startIndices){ArrayBuffer.isView(s)&&(s={value:s});const F=s;assert$2(ArrayBuffer.isView(F.value),`invalid ${S.accessor}`);const M=!!F.size&&F.size!==this.size;return _.binaryAccessor=getAccessorFromBuffer(F.value,{size:F.size||this.size,stride:F.stride,offset:F.offset,startIndices:f,nested:M}),!1}return this.clearNeedsUpdate(),this.setData(s),!0}getVertexOffset(s){const{startIndices:f}=this;return(f?s<f.length?f[s]:this.numInstances:s)*this.size}getValue(){const s=this.settings.shaderAttributes,f=super.getValue();if(!s)return f;for(const _ in s)Object.assign(f,super.getValue(_,s[_]));return f}getBufferLayout(s){this.state.layoutChanged=!1;const f=this.settings.shaderAttributes,_=super._getBufferLayout(),{stepMode:S}=this.settings;if(S==="dynamic"?_.stepMode=s?s.isInstanced?"instance":"vertex":"instance":_.stepMode=S??"vertex",!f)return _;for(const T in f){const F=super._getBufferLayout(T,f[T]);_.attributes.push(...F.attributes)}return _}_autoUpdater(s,{data:f,startRow:_,endRow:S,props:T,numInstances:F}){if(s.constant)return;const{settings:M,state:P,value:H,size:J,startIndices:K}=s,{accessor:oe,transform:se}=M,ae=P.binaryAccessor||(typeof oe=="function"?oe:T[oe]);assert$2(typeof ae=="function",`accessor "${oe}" is not a function`);let ge=s.getVertexOffset(_);const{iterable:he,objectInfo:Be}=createIterable(f,_,S);for(const pe of he){Be.index++;let be=ae(pe,Be);if(se&&(be=se.call(this,be)),K){const Re=(Be.index<K.length-1?K[Be.index+1]:F)-K[Be.index];if(be&&Array.isArray(be[0])){let Fe=ge;for(const Me of be)s._normalizeValue(Me,H,Fe),Fe+=J}else be&&be.length>J?H.set(be,ge):(s._normalizeValue(be,Be.target,0),fillArray({target:H,source:Be.target,start:ge,count:Re}));ge+=Re*J}else s._normalizeValue(be,H,ge),ge+=J}}_validateAttributeUpdaters(){const{settings:s}=this;if(!(s.noAlloc||typeof s.update=="function"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:s}=this,f=Math.min(4,this.size);if(s&&s.length>=f){let _=!0;switch(f){case 4:_=_&&Number.isFinite(s[3]);case 3:_=_&&Number.isFinite(s[2]);case 2:_=_&&Number.isFinite(s[1]);case 1:_=_&&Number.isFinite(s[0]);break;default:_=!1}if(!_)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function padArrayChunk(d){const{source:s,target:f,start:_=0,size:S,getData:T}=d,F=d.end||f.length,M=s.length,P=F-_;if(M>P){f.set(s.subarray(0,P),_);return}if(f.set(s,_),!T)return;let H=M;for(;H<P;){const J=T(H,s);for(let K=0;K<S;K++)f[_+H]=J[K]||0,H++}}function padArray({source:d,target:s,size:f,getData:_,sourceStartIndices:S,targetStartIndices:T}){if(!S||!T)return padArrayChunk({source:d,target:s,size:f,getData:_}),s;let F=0,M=0;const P=_&&((J,K)=>_(J+M,K)),H=Math.min(S.length,T.length);for(let J=1;J<H;J++){const K=S[J]*f,oe=T[J]*f;padArrayChunk({source:d.subarray(F,K),target:s,start:M,end:oe,size:f,getData:P}),F=K,M=oe}return M<s.length&&padArrayChunk({source:[],target:s,start:M,size:f,getData:P}),s}function cloneAttribute(d){const{device:s,settings:f,value:_}=d,S=new Attribute(s,f);return S.setData({value:_ instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:f.normalized}),S}function getAttributeTypeFromSize(d){switch(d){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${d}"`)}}function getFloat32VertexFormat(d){switch(d){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function cycleBuffers(d){d.push(d.shift())}function getAttributeBufferLength(d,s){const{doublePrecision:f,settings:_,value:S,size:T}=d,F=f&&S instanceof Float64Array?2:1;let M=0;const{shaderAttributes:P}=d.settings;if(P)for(const H of Object.values(P))M=Math.max(M,H.vertexOffset??0);return(_.noAlloc?S.length:(s+M)*T)*F}function matchBuffer({device:d,source:s,target:f}){return(!f||f.byteLength<s.byteLength)&&(f==null||f.destroy(),f=d.createBuffer({byteLength:s.byteLength,usage:s.usage})),f}function padBuffer({device:d,buffer:s,attribute:f,fromLength:_,toLength:S,fromStartIndices:T,getData:F=M=>M}){const M=f.doublePrecision&&f.value instanceof Float64Array?2:1,P=f.size*M,H=f.byteOffset,J=f.settings.bytesPerElement<4?H/f.settings.bytesPerElement*4:H,K=f.startIndices,oe=T&&K,se=f.isConstant;if(!oe&&s&&_>=S)return s;const ae=f.value instanceof Float64Array?Float32Array:f.value.constructor,ge=se?f.value:new ae(f.getBuffer().readSyncWebGL(H,S*ae.BYTES_PER_ELEMENT).buffer);if(f.settings.normalized&&!se){const be=F;F=(Re,Fe)=>f.normalizeConstant(be(Re,Fe))}const he=se?(be,Re)=>F(ge,Re):(be,Re)=>F(ge.subarray(be+H,be+H+P),Re),Be=s?new Float32Array(s.readSyncWebGL(J,_*4).buffer):new Float32Array(0),pe=new Float32Array(S);return padArray({source:Be,target:pe,sourceStartIndices:T,targetStartIndices:K,size:P,getData:he}),(!s||s.byteLength<pe.byteLength+J)&&(s==null||s.destroy(),s=d.createBuffer({byteLength:pe.byteLength+J,usage:35050})),s.write(pe,J),s}class GPUTransitionBase{constructor({device:s,attribute:f,timeline:_}){this.buffers=[],this.currentLength=0,this.device=s,this.transition=new Transition$1(_),this.attribute=f,this.attributeInTransition=cloneAttribute(f),this.currentStartIndices=f.startIndices}get inProgress(){return this.transition.inProgress}start(s,f,_=1/0){this.settings=s,this.currentStartIndices=this.attribute.startIndices,this.currentLength=getAttributeBufferLength(this.attribute,f),this.transition.start({...s,duration:_})}update(){const s=this.transition.update();return s&&this.onUpdate(),s}setBuffer(s){this.attributeInTransition.setData({buffer:s,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const s of this.buffers)s.destroy();this.buffers.length=0}}class GPUInterpolationTransition extends GPUTransitionBase{constructor({device:s,attribute:f,timeline:_}){super({device:s,attribute:f,timeline:_}),this.type="interpolation",this.transform=getTransform$1(s,f)}start(s,f){const _=this.currentLength,S=this.currentStartIndices;if(super.start(s,f,s.duration),s.duration<=0){this.transition.cancel();return}const{buffers:T,attribute:F}=this;cycleBuffers(T),T[0]=padBuffer({device:this.device,buffer:T[0],attribute:F,fromLength:_,toLength:this.currentLength,fromStartIndices:S,getData:s.enter}),T[1]=matchBuffer({device:this.device,source:T[0],target:T[1]}),this.setBuffer(T[1]);const{transform:M}=this,P=M.model;let H=Math.floor(this.currentLength/F.size);useFp64(F)&&(H/=2),P.setVertexCount(H),F.isConstant?(P.setAttributes({aFrom:T[0]}),P.setConstantAttributes({aTo:F.value})):P.setAttributes({aFrom:T[0],aTo:F.getBuffer()}),M.transformFeedback.setBuffers({vCurrent:T[1]})}onUpdate(){const{duration:s,easing:f}=this.settings,{time:_}=this.transition;let S=_/s;f&&(S=f(S));const{model:T}=this.transform;T.setUniforms({time:S}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}}const vs$a=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`,vs64=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aFrom64Low;
in ATTRIBUTE_TYPE aTo;
in ATTRIBUTE_TYPE aTo64Low;
out ATTRIBUTE_TYPE vCurrent;
out ATTRIBUTE_TYPE vCurrent64Low;

vec2 mix_fp64(vec2 a, vec2 b, float x) {
  vec2 range = sub_fp64(b, a);
  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));
}

void main(void) {
  for (int i=0; i<ATTRIBUTE_SIZE; i++) {
    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), time);
    vCurrent[i] = value.x;
    vCurrent64Low[i] = value.y;
  }
  gl_Position = vec4(0.0);
}
`;function useFp64(d){return d.doublePrecision&&d.value instanceof Float64Array}function getTransform$1(d,s){const f=s.size,_=getAttributeTypeFromSize(f),S=getFloat32VertexFormat(f),T=s.getBufferLayout();return useFp64(s)?new BufferTransform(d,{vs:vs64,bufferLayout:[{name:"aFrom",byteStride:8*f,attributes:[{attribute:"aFrom",format:S,byteOffset:0},{attribute:"aFrom64Low",format:S,byteOffset:4*f}]},{name:"aTo",byteStride:8*f,attributes:[{attribute:"aTo",format:S,byteOffset:0},{attribute:"aTo64Low",format:S,byteOffset:4*f}]}],modules:[fp64arithmetic],defines:{ATTRIBUTE_TYPE:_,ATTRIBUTE_SIZE:f},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0}):new BufferTransform(d,{vs:vs$a,bufferLayout:[{name:"aFrom",format:S},{name:"aTo",format:T.attributes[0].format}],defines:{ATTRIBUTE_TYPE:_},varyings:["vCurrent"],disableWarnings:!0})}class GPUSpringTransition extends GPUTransitionBase{constructor({device:s,attribute:f,timeline:_}){super({device:s,attribute:f,timeline:_}),this.type="spring",this.texture=getTexture(s),this.framebuffer=getFramebuffer(s,this.texture),this.transform=getTransform(s,f)}start(s,f){const _=this.currentLength,S=this.currentStartIndices;super.start(s,f);const{buffers:T,attribute:F}=this;for(let P=0;P<2;P++)T[P]=padBuffer({device:this.device,buffer:T[P],attribute:F,fromLength:_,toLength:this.currentLength,fromStartIndices:S,getData:s.enter});T[2]=matchBuffer({device:this.device,source:T[0],target:T[2]}),this.setBuffer(T[1]);const{model:M}=this.transform;M.setVertexCount(Math.floor(this.currentLength/F.size)),F.isConstant?M.setConstantAttributes({aTo:F.value}):M.setAttributes({aTo:F.getBuffer()})}onUpdate(){const{buffers:s,transform:f,framebuffer:_,transition:S}=this,T=this.settings;f.model.setAttributes({aPrev:s[0],aCur:s[1]}),f.transformFeedback.setBuffers({vNext:s[2]}),f.model.setUniforms({stiffness:T.stiffness,damping:T.damping}),f.run({framebuffer:_,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),cycleBuffers(s),this.setBuffer(s[1]),this.device.readPixelsToArrayWebGL(_)[0]>0||S.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}const vs$9=`#version 300 es
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
in ATTRIBUTE_TYPE aPrev;
in ATTRIBUTE_TYPE aCur;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vNext;
out float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs$d=`#version 300 es
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

in float vIsTransitioningFlag;

out vec4 fragColor;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  fragColor = vec4(1.0);
}`;function getTransform(d,s){const f=getAttributeTypeFromSize(s.size),_=getFloat32VertexFormat(s.size);return new BufferTransform(d,{vs:vs$9,fs:fs$d,bufferLayout:[{name:"aPrev",format:_},{name:"aCur",format:_},{name:"aTo",format:s.getBufferLayout().attributes[0].format}],varyings:["vNext"],defines:{ATTRIBUTE_TYPE:f},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}function getTexture(d){return d.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}function getFramebuffer(d,s){return d.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[s]})}const TRANSITION_TYPES$1={interpolation:GPUInterpolationTransition,spring:GPUSpringTransition};class AttributeTransitionManager{constructor(s,{id:f,timeline:_}){if(!s)throw new Error("AttributeTransitionManager is constructed without device");this.id=f,this.device=s,this.timeline=_,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const s in this.transitions)this._removeTransition(s)}update({attributes:s,transitions:f,numInstances:_}){this.numInstances=_||1;for(const S in s){const T=s[S],F=T.getTransitionSetting(f);F&&this._updateAttribute(S,T,F)}for(const S in this.transitions){const T=s[S];(!T||!T.getTransitionSetting(f))&&this._removeTransition(S)}}hasAttribute(s){const f=this.transitions[s];return f&&f.inProgress}getAttributes(){const s={};for(const f in this.transitions){const _=this.transitions[f];_.inProgress&&(s[f]=_.attributeInTransition)}return s}run(){if(this.numInstances===0)return!1;for(const f in this.transitions)this.transitions[f].update()&&(this.needsRedraw=!0);const s=this.needsRedraw;return this.needsRedraw=!1,s}_removeTransition(s){this.transitions[s].delete(),delete this.transitions[s]}_updateAttribute(s,f,_){const S=this.transitions[s];let T=!S||S.type!==_.type;if(T){S&&this._removeTransition(s);const F=TRANSITION_TYPES$1[_.type];F?this.transitions[s]=new F({attribute:f,timeline:this.timeline,device:this.device}):(defaultLogger.error(`unsupported transition type '${_.type}'`)(),T=!1)}(T||f.needsRedraw())&&(this.needsRedraw=!0,this.transitions[s].start(_,this.numInstances))}}const TRACE_INVALIDATE="attributeManager.invalidate",TRACE_UPDATE_START="attributeManager.updateStart",TRACE_UPDATE_END="attributeManager.updateEnd",TRACE_ATTRIBUTE_UPDATE_START="attribute.updateStart",TRACE_ATTRIBUTE_ALLOCATE="attribute.allocate",TRACE_ATTRIBUTE_UPDATE_END="attribute.updateEnd";class AttributeManager{constructor(s,{id:f="attribute-manager",stats:_,timeline:S}={}){this.mergeBoundsMemoized=memoize$2(mergeBounds),this.id=f,this.device=s,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=_,this.attributeTransitionManager=new AttributeTransitionManager(s,{id:`${f}-transitions`,timeline:S}),Object.seal(this)}finalize(){for(const s in this.attributes)this.attributes[s].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(s={clearRedrawFlags:!1}){const f=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!s.clearRedrawFlags,f&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(s){this._add(s)}addInstanced(s){this._add(s,{stepMode:"instance"})}remove(s){for(const f of s)this.attributes[f]!==void 0&&(this.attributes[f].delete(),delete this.attributes[f])}invalidate(s,f){const _=this._invalidateTrigger(s,f);debug(TRACE_INVALIDATE,this,s,_)}invalidateAll(s){for(const f in this.attributes)this.attributes[f].setNeedsUpdate(f,s);debug(TRACE_INVALIDATE,this,"all")}update({data:s,numInstances:f,startIndices:_=null,transitions:S,props:T={},buffers:F={},context:M={}}){let P=!1;debug(TRACE_UPDATE_START,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const H in this.attributes){const J=this.attributes[H],K=J.settings.accessor;J.startIndices=_,J.numInstances=f,T[H]&&defaultLogger.removed(`props.${H}`,`data.attributes.${H}`)(),J.setExternalBuffer(F[H])||J.setBinaryValue(typeof K=="string"?F[K]:void 0,s.startIndices)||typeof K=="string"&&!F[K]&&J.setConstantValue(T[K])||J.needsUpdate()&&(P=!0,this._updateAttribute({attribute:J,numInstances:f,data:s,props:T,context:M})),this.needsRedraw=this.needsRedraw||J.needsRedraw()}P&&debug(TRACE_UPDATE_END,this,f),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:f,transitions:S})}updateTransition(){const{attributeTransitionManager:s}=this,f=s.run();return this.needsRedraw=this.needsRedraw||f,f}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(s){const f=s.map(_=>{var S;return(S=this.attributes[_])==null?void 0:S.getBounds()});return this.mergeBoundsMemoized(f)}getChangedAttributes(s={clearChangedFlags:!1}){const{attributes:f,attributeTransitionManager:_}=this,S={..._.getAttributes()};for(const T in f){const F=f[T];F.needsRedraw(s)&&!_.hasAttribute(T)&&(S[T]=F)}return S}getBufferLayouts(s){return Object.values(this.getAttributes()).map(f=>f.getBufferLayout(s))}_add(s,f){for(const _ in s){const S=s[_],T={...S,id:_,size:S.isIndexed&&1||S.size||1,...f};this.attributes[_]=new Attribute(this.device,T)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const s={};for(const f in this.attributes)this.attributes[f].getUpdateTriggers().forEach(S=>{s[S]||(s[S]=[]),s[S].push(f)});this.updateTriggers=s}_invalidateTrigger(s,f){const{attributes:_,updateTriggers:S}=this,T=S[s];return T&&T.forEach(F=>{const M=_[F];M&&M.setNeedsUpdate(M.id,f)}),T}_updateAttribute(s){const{attribute:f,numInstances:_}=s;if(debug(TRACE_ATTRIBUTE_UPDATE_START,f),f.constant){f.setConstantValue(f.value);return}f.allocate(_)&&debug(TRACE_ATTRIBUTE_ALLOCATE,f,_),f.updateBuffer(s)&&(this.needsRedraw=!0,debug(TRACE_ATTRIBUTE_UPDATE_END,f,_))}}class CPUInterpolationTransition extends Transition$1{get value(){return this._value}_onUpdate(){const{time:s,settings:{fromValue:f,toValue:_,duration:S,easing:T}}=this,F=T(s/S);this._value=lerp$6(f,_,F)}}const EPSILON$1=1e-5;function updateSpringElement(d,s,f,_,S){const T=s-d,M=(f-s)*S,P=-T*_;return M+P+T+s}function updateSpring(d,s,f,_,S){if(Array.isArray(f)){const T=[];for(let F=0;F<f.length;F++)T[F]=updateSpringElement(d[F],s[F],f[F],_,S);return T}return updateSpringElement(d,s,f,_,S)}function distance$1(d,s){if(Array.isArray(d)){let f=0;for(let _=0;_<d.length;_++){const S=d[_]-s[_];f+=S*S}return Math.sqrt(f)}return Math.abs(d-s)}class CPUSpringTransition extends Transition$1{get value(){return this._currValue}_onUpdate(){const{fromValue:s,toValue:f,damping:_,stiffness:S}=this.settings,{_prevValue:T=s,_currValue:F=s}=this;let M=updateSpring(T,F,f,_,S);const P=distance$1(M,f),H=distance$1(M,F);P<EPSILON$1&&H<EPSILON$1&&(M=f,this.end()),this._prevValue=F,this._currValue=M}}const TRANSITION_TYPES={interpolation:CPUInterpolationTransition,spring:CPUSpringTransition};class UniformTransitionManager{constructor(s){this.transitions=new Map,this.timeline=s}get active(){return this.transitions.size>0}add(s,f,_,S){const{transitions:T}=this;if(T.has(s)){const P=T.get(s),{value:H=P.settings.fromValue}=P;f=H,this.remove(s)}if(S=normalizeTransitionSettings(S),!S)return;const F=TRANSITION_TYPES[S.type];if(!F){defaultLogger.error(`unsupported transition type '${S.type}'`)();return}const M=new F(this.timeline);M.start({...S,fromValue:f,toValue:_}),T.set(s,M)}remove(s){const{transitions:f}=this;f.has(s)&&(f.get(s).cancel(),f.delete(s))}update(){const s={};for(const[f,_]of this.transitions)_.update(),s[f]=_.value,_.inProgress||this.remove(f);return s}clear(){for(const s of this.transitions.keys())this.remove(s)}}function validateProps(d){const s=d[PROP_TYPES_SYMBOL];for(const f in s){const _=s[f],{validate:S}=_;if(S&&!S(d[f],_))throw new Error(`Invalid prop ${f}: ${d[f]}`)}}function diffProps(d,s){const f=compareProps({newProps:d,oldProps:s,propTypes:d[PROP_TYPES_SYMBOL],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),_=diffDataProps(d,s);let S=!1;return _||(S=diffUpdateTriggers(d,s)),{dataChanged:_,propsChanged:f,updateTriggersChanged:S,extensionsChanged:diffExtensions(d,s),transitionsChanged:diffTransitions(d,s)}}function diffTransitions(d,s){if(!d.transitions)return!1;const f={},_=d[PROP_TYPES_SYMBOL];let S=!1;for(const T in d.transitions){const F=_[T],M=F&&F.type;(M==="number"||M==="color"||M==="array")&&comparePropValues(d[T],s[T],F)&&(f[T]=!0,S=!0)}return S?f:!1}function compareProps({newProps:d,oldProps:s,ignoreProps:f={},propTypes:_={},triggerName:S="props"}){if(s===d)return!1;if(typeof d!="object"||d===null)return`${S} changed shallowly`;if(typeof s!="object"||s===null)return`${S} changed shallowly`;for(const T of Object.keys(d))if(!(T in f)){if(!(T in s))return`${S}.${T} added`;const F=comparePropValues(d[T],s[T],_[T]);if(F)return`${S}.${T} ${F}`}for(const T of Object.keys(s))if(!(T in f)){if(!(T in d))return`${S}.${T} dropped`;if(!Object.hasOwnProperty.call(d,T)){const F=comparePropValues(d[T],s[T],_[T]);if(F)return`${S}.${T} ${F}`}}return!1}function comparePropValues(d,s,f){let _=f&&f.equal;return _&&!_(d,s,f)||!_&&(_=d&&s&&d.equals,_&&!_.call(d,s))?"changed deeply":!_&&s!==d?"changed shallowly":null}function diffDataProps(d,s){if(s===null)return"oldProps is null, initial diff";let f=!1;const{dataComparator:_,_dataDiff:S}=d;return _?_(d.data,s.data)||(f="Data comparator detected a change"):d.data!==s.data&&(f="A new data container was supplied"),f&&S&&(f=S(d.data,s.data)||f),f}function diffUpdateTriggers(d,s){if(s===null)return{all:!0};if("all"in d.updateTriggers&&diffUpdateTrigger(d,s,"all"))return{all:!0};const f={};let _=!1;for(const S in d.updateTriggers)S!=="all"&&diffUpdateTrigger(d,s,S)&&(f[S]=!0,_=!0);return _?f:!1}function diffExtensions(d,s){if(s===null)return!0;const f=s.extensions,{extensions:_}=d;if(_===f)return!1;if(!f||!_||_.length!==f.length)return!0;for(let S=0;S<_.length;S++)if(!_[S].equals(f[S]))return!0;return!1}function diffUpdateTrigger(d,s,f){let _=d.updateTriggers[f];_=_??{};let S=s.updateTriggers[f];return S=S??{},compareProps({oldProps:S,newProps:_,triggerName:f})}const ERR_NOT_OBJECT="count(): argument not an object",ERR_NOT_CONTAINER="count(): argument not a container";function count$1(d){if(!isObject$8(d))throw new Error(ERR_NOT_OBJECT);if(typeof d.count=="function")return d.count();if(Number.isFinite(d.size))return d.size;if(Number.isFinite(d.length))return d.length;if(isPlainObject$1(d))return Object.keys(d).length;throw new Error(ERR_NOT_CONTAINER)}function isPlainObject$1(d){return d!==null&&typeof d=="object"&&d.constructor===Object}function isObject$8(d){return d!==null&&typeof d=="object"}function mergeShaders(d,s){if(!s)return d;const f={...d,...s};if("defines"in s&&(f.defines={...d.defines,...s.defines}),"modules"in s&&(f.modules=(d.modules||[]).concat(s.modules),s.modules.some(_=>_.name==="project64"))){const _=f.modules.findIndex(S=>S.name==="project32");_>=0&&f.modules.splice(_,1)}if("inject"in s)if(!d.inject)f.inject=s.inject;else{const _={...d.inject};for(const S in s.inject)_[S]=(_[S]||"")+s.inject[S];f.inject=_}return f}const DEFAULT_TEXTURE_PARAMETERS={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},internalTextures={};function createTexture(d,s,f,_){if(f instanceof Texture)return f;f.constructor&&f.constructor.name!=="Object"&&(f={data:f});let S=null;f.compressed&&(S={minFilter:"linear",mipmapFilter:f.data.length>1?"nearest":"linear"});const T=s.createTexture({...f,sampler:{...DEFAULT_TEXTURE_PARAMETERS,...S,..._}});return internalTextures[T.id]=d,T}function destroyTexture(d,s){!s||!(s instanceof Texture)||internalTextures[s.id]===d&&(s.delete(),delete internalTextures[s.id])}const TYPE_DEFINITIONS={boolean:{validate(d,s){return!0},equal(d,s,f){return!!d==!!s}},number:{validate(d,s){return Number.isFinite(d)&&(!("max"in s)||d<=s.max)&&(!("min"in s)||d>=s.min)}},color:{validate(d,s){return s.optional&&!d||isArray$1(d)&&(d.length===3||d.length===4)},equal(d,s,f){return deepEqual(d,s,1)}},accessor:{validate(d,s){const f=getTypeOf(d);return f==="function"||f===getTypeOf(s.value)},equal(d,s,f){return typeof s=="function"?!0:deepEqual(d,s,1)}},array:{validate(d,s){return s.optional&&!d||isArray$1(d)},equal(d,s,f){const{compare:_}=f,S=Number.isInteger(_)?_:_?1:0;return _?deepEqual(d,s,S):d===s}},object:{equal(d,s,f){if(f.ignore)return!0;const{compare:_}=f,S=Number.isInteger(_)?_:_?1:0;return _?deepEqual(d,s,S):d===s}},function:{validate(d,s){return s.optional&&!d||typeof d=="function"},equal(d,s,f){return!f.compare&&f.ignore!==!1||d===s}},data:{transform:(d,s,f)=>{if(!d)return d;const{dataTransform:_}=f.props;return _?_(d):typeof d.shape=="string"&&d.shape.endsWith("-table")&&Array.isArray(d.data)?d.data:d}},image:{transform:(d,s,f)=>{const _=f.context;return!_||!_.device?null:createTexture(f.id,_.device,d,{...s.parameters,...f.props.textureParameters})},release:(d,s,f)=>{destroyTexture(f.id,d)}}};function parsePropTypes(d){const s={},f={},_={};for(const[S,T]of Object.entries(d)){const F=T==null?void 0:T.deprecatedFor;if(F)_[S]=Array.isArray(F)?F:[F];else{const M=parsePropType(S,T);s[S]=M,f[S]=M.value}}return{propTypes:s,defaultProps:f,deprecatedProps:_}}function parsePropType(d,s){switch(getTypeOf(s)){case"object":return normalizePropDefinition(d,s);case"array":return normalizePropDefinition(d,{type:"array",value:s,compare:!1});case"boolean":return normalizePropDefinition(d,{type:"boolean",value:s});case"number":return normalizePropDefinition(d,{type:"number",value:s});case"function":return normalizePropDefinition(d,{type:"function",value:s,compare:!0});default:return{name:d,type:"unknown",value:s}}}function normalizePropDefinition(d,s){return"type"in s?{name:d,...TYPE_DEFINITIONS[s.type],...s}:"value"in s?{name:d,type:getTypeOf(s.value),...s}:{name:d,type:"object",value:s}}function isArray$1(d){return Array.isArray(d)||ArrayBuffer.isView(d)}function getTypeOf(d){return isArray$1(d)?"array":d===null?"null":typeof d}function createProps(d,s){let f;for(let T=s.length-1;T>=0;T--){const F=s[T];"extensions"in F&&(f=F.extensions)}const _=getPropsPrototype(d.constructor,f),S=Object.create(_);S[COMPONENT_SYMBOL]=d,S[ASYNC_ORIGINAL_SYMBOL]={},S[ASYNC_RESOLVED_SYMBOL]={};for(let T=0;T<s.length;++T){const F=s[T];for(const M in F)S[M]=F[M]}return Object.freeze(S),S}const MergedDefaultPropsCacheKey="_mergedDefaultProps";function getPropsPrototype(d,s){let f=MergedDefaultPropsCacheKey;if(s)for(const S of s){const T=S.constructor;T&&(f+=`:${T.extensionName||T.name}`)}const _=getOwnProperty(d,f);return _||(d[f]=createPropsPrototypeAndTypes(d,s||[]))}function createPropsPrototypeAndTypes(d,s){if(!d.prototype)return null;const _=Object.getPrototypeOf(d),S=getPropsPrototype(_),T=getOwnProperty(d,"defaultProps")||{},F=parsePropTypes(T),M=Object.assign(Object.create(null),S,F.defaultProps),P=Object.assign(Object.create(null),S==null?void 0:S[PROP_TYPES_SYMBOL],F.propTypes),H=Object.assign(Object.create(null),S==null?void 0:S[DEPRECATED_PROPS_SYMBOL],F.deprecatedProps);for(const J of s){const K=getPropsPrototype(J.constructor);K&&(Object.assign(M,K),Object.assign(P,K[PROP_TYPES_SYMBOL]),Object.assign(H,K[DEPRECATED_PROPS_SYMBOL]))}return createPropsPrototype(M,d),addAsyncPropsToPropPrototype(M,P),addDeprecatedPropsToPropPrototype(M,H),M[PROP_TYPES_SYMBOL]=P,M[DEPRECATED_PROPS_SYMBOL]=H,s.length===0&&!hasOwnProperty$1(d,"_propTypes")&&(d._propTypes=P),M}function createPropsPrototype(d,s){const f=getComponentName(s);Object.defineProperties(d,{id:{writable:!0,value:f}})}function addDeprecatedPropsToPropPrototype(d,s){for(const f in s)Object.defineProperty(d,f,{enumerable:!1,set(_){const S=`${this.id}: ${f}`;for(const T of s[f])hasOwnProperty$1(this,T)||(this[T]=_);defaultLogger.deprecated(S,s[f].join("/"))()}})}function addAsyncPropsToPropPrototype(d,s){const f={},_={};for(const S in s){const T=s[S],{name:F,value:M}=T;T.async&&(f[F]=M,_[F]=getDescriptorForAsyncProp(F))}d[ASYNC_DEFAULTS_SYMBOL]=f,d[ASYNC_ORIGINAL_SYMBOL]={},Object.defineProperties(d,_)}function getDescriptorForAsyncProp(d){return{enumerable:!0,set(s){typeof s=="string"||s instanceof Promise||isAsyncIterable(s)?this[ASYNC_ORIGINAL_SYMBOL][d]=s:this[ASYNC_RESOLVED_SYMBOL][d]=s},get(){if(this[ASYNC_RESOLVED_SYMBOL]){if(d in this[ASYNC_RESOLVED_SYMBOL])return this[ASYNC_RESOLVED_SYMBOL][d]||this[ASYNC_DEFAULTS_SYMBOL][d];if(d in this[ASYNC_ORIGINAL_SYMBOL]){const s=this[COMPONENT_SYMBOL]&&this[COMPONENT_SYMBOL].internalState;if(s&&s.hasAsyncProp(d))return s.getAsyncProp(d)||this[ASYNC_DEFAULTS_SYMBOL][d]}}return this[ASYNC_DEFAULTS_SYMBOL][d]}}}function hasOwnProperty$1(d,s){return Object.prototype.hasOwnProperty.call(d,s)}function getOwnProperty(d,s){return hasOwnProperty$1(d,s)&&d[s]}function getComponentName(d){const s=d.componentName;return s||defaultLogger.warn(`${d.name}.componentName not specified`)(),s||d.name}let counter=0;class Component{constructor(...s){this.props=createProps(this,s),this.id=this.props.id,this.count=counter++}clone(s){const{props:f}=this,_={};for(const S in f[ASYNC_DEFAULTS_SYMBOL])S in f[ASYNC_RESOLVED_SYMBOL]?_[S]=f[ASYNC_RESOLVED_SYMBOL][S]:S in f[ASYNC_ORIGINAL_SYMBOL]&&(_[S]=f[ASYNC_ORIGINAL_SYMBOL][S]);return new this.constructor({...f,..._,...s})}}Component.componentName="Component";Component.defaultProps={};const EMPTY_PROPS=Object.freeze({});class ComponentState{constructor(s){this.component=s,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const s in this.asyncProps){const f=this.asyncProps[s];f&&f.type&&f.type.release&&f.type.release(f.resolvedValue,f.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||EMPTY_PROPS}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(s){return s in this.asyncProps}getAsyncProp(s){const f=this.asyncProps[s];return f&&f.resolvedValue}isAsyncPropLoading(s){if(s){const f=this.asyncProps[s];return!!(f&&f.pendingLoadCount>0&&f.pendingLoadCount!==f.resolvedLoadCount)}for(const f in this.asyncProps)if(this.isAsyncPropLoading(f))return!0;return!1}reloadAsyncProp(s,f){this._watchPromise(s,Promise.resolve(f))}setAsyncProps(s){this.component=s[COMPONENT_SYMBOL]||this.component;const f=s[ASYNC_RESOLVED_SYMBOL]||{},_=s[ASYNC_ORIGINAL_SYMBOL]||s,S=s[ASYNC_DEFAULTS_SYMBOL]||{};for(const T in f){const F=f[T];this._createAsyncPropData(T,S[T]),this._updateAsyncProp(T,F),f[T]=this.getAsyncProp(T)}for(const T in _){const F=_[T];this._createAsyncPropData(T,S[T]),this._updateAsyncProp(T,F)}}_fetch(s,f){return null}_onResolve(s,f){}_onError(s,f){}_updateAsyncProp(s,f){if(this._didAsyncInputValueChange(s,f)){if(typeof f=="string"&&(f=this._fetch(s,f)),f instanceof Promise){this._watchPromise(s,f);return}if(isAsyncIterable(f)){this._resolveAsyncIterable(s,f);return}this._setPropValue(s,f)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const s in this.asyncProps)Object.defineProperty(this.oldAsyncProps,s,{enumerable:!0,value:this.oldProps[s]})}}_didAsyncInputValueChange(s,f){const _=this.asyncProps[s];return f===_.resolvedValue||f===_.lastValue?!1:(_.lastValue=f,!0)}_setPropValue(s,f){this._freezeAsyncOldProps();const _=this.asyncProps[s];_&&(f=this._postProcessValue(_,f),_.resolvedValue=f,_.pendingLoadCount++,_.resolvedLoadCount=_.pendingLoadCount)}_setAsyncPropValue(s,f,_){const S=this.asyncProps[s];S&&_>=S.resolvedLoadCount&&f!==void 0&&(this._freezeAsyncOldProps(),S.resolvedValue=f,S.resolvedLoadCount=_,this.onAsyncPropUpdated(s,f))}_watchPromise(s,f){const _=this.asyncProps[s];if(_){_.pendingLoadCount++;const S=_.pendingLoadCount;f.then(T=>{this.component&&(T=this._postProcessValue(_,T),this._setAsyncPropValue(s,T,S),this._onResolve(s,T))}).catch(T=>{this._onError(s,T)})}}async _resolveAsyncIterable(s,f){if(s!=="data"){this._setPropValue(s,f);return}const _=this.asyncProps[s];if(!_)return;_.pendingLoadCount++;const S=_.pendingLoadCount;let T=[],F=0;for await(const M of f){if(!this.component)return;const{dataTransform:P}=this.component.props;P?T=P(M,T):T=T.concat(M),Object.defineProperty(T,"__diff",{enumerable:!1,value:[{startRow:F,endRow:T.length}]}),F=T.length,this._setAsyncPropValue(s,T,S)}this._onResolve(s,T)}_postProcessValue(s,f){const _=s.type;return _&&this.component&&(_.release&&_.release(s.resolvedValue,_,this.component),_.transform)?_.transform(f,_,this.component):f}_createAsyncPropData(s,f){if(!this.asyncProps[s]){const S=this.component&&this.component.props[PROP_TYPES_SYMBOL];this.asyncProps[s]={type:S&&S[s],lastValue:null,resolvedValue:f,pendingLoadCount:0,resolvedLoadCount:0}}}}class LayerState extends ComponentState{constructor({attributeManager:s,layer:f}){super(f),this.attributeManager=s,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(s,f){const _=this.layer,S=_==null?void 0:_.props.fetch;return S?S(f,{propName:s,layer:_}):super._fetch(s,f)}_onResolve(s,f){const _=this.layer;if(_){const S=_.props.onDataLoad;s==="data"&&S&&S(f,{propName:s,layer:_})}}_onError(s,f){const _=this.layer;_&&_.raiseError(f,`loading ${s} of ${this.layer}`)}}const TRACE_CHANGE_FLAG="layer.changeFlag",TRACE_INITIALIZE="layer.initialize",TRACE_UPDATE="layer.update",TRACE_FINALIZE="layer.finalize",TRACE_MATCHED="layer.matched",MAX_PICKING_COLOR_CACHE_SIZE=2**24-1,EMPTY_ARRAY$1=Object.freeze([]),areViewportsEqual=memoize$2(({oldViewport:d,viewport:s})=>d.equals(s));let pickingColorCache=new Uint8ClampedArray(0);const defaultProps$n={data:{type:"data",value:EMPTY_ARRAY$1,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:d=>d&&d.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(d,{propName:s,layer:f,loaders:_,loadOptions:S,signal:T})=>{const{resourceManager:F}=f.context;S=S||f.getLoadOptions(),_=_||f.props.loaders,T&&(S={...S,fetch:{...S==null?void 0:S.fetch,signal:T}});let M=F.contains(d);return!M&&!S&&(F.add({resourceId:d,data:load$3(d,_),persistent:!1}),M=!0),M?F.subscribe({resourceId:d,onChange:P=>{var H;return(H=f.internalState)==null?void 0:H.reloadAsyncProp(s,P)},consumerId:f.id,requestId:s}):load$3(d,_,S)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:COORDINATE_SYSTEM.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:d})=>[0,-d*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Layer extends Component{constructor(){super(...arguments),this.internalState=null,this.lifecycle=LIFECYCLE.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let s=this;for(;s.parent;)s=s.parent;return s}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(s){assert$2(this.internalState);const f=this.internalState.viewport||this.context.viewport,_=getWorldPosition(s,{viewport:f,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[S,T,F]=worldToPixels$1(_,f.pixelProjectionMatrix);return s.length===2?[S,T]:[S,T,F]}unproject(s){return assert$2(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(s)}projectPosition(s,f){assert$2(this.internalState);const _=this.internalState.viewport||this.context.viewport;return projectPosition(s,{viewport:_,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...f})}get isComposite(){return!1}setState(s){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,s),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const s=this.state;return s&&(s.models||s.model&&[s.model])||[]}setModuleParameters(s){for(const f of this.getModels())f.updateModuleSettings(s)}setShaderModuleProps(...s){for(const f of this.getModels())f.shaderInputs.setProps(...s)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:s}=this.props;return s===COORDINATE_SYSTEM.DEFAULT||s===COORDINATE_SYSTEM.LNGLAT||s===COORDINATE_SYSTEM.CARTESIAN}onHover(s,f){return this.props.onHover&&this.props.onHover(s,f)||!1}onClick(s,f){return this.props.onClick&&this.props.onClick(s,f)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(s,f=[]){return f[0]=s+1&255,f[1]=s+1>>8&255,f[2]=s+1>>8>>8&255,f}decodePickingColor(s){assert$2(s instanceof Uint8Array);const[f,_,S]=s;return f+_*256+S*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:count$1(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var s;return(s=this.getAttributeManager())==null?void 0:s.getBounds(["positions","instancePositions"])}getShaders(s){s=mergeShaders(s,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const f of this.props.extensions)s=mergeShaders(s,f.getShaders.call(this,f));return s}shouldUpdateState(s){return s.changeFlags.propsOrDataChanged}updateState(s){const f=this.getAttributeManager(),{dataChanged:_}=s.changeFlags;if(_&&f)if(Array.isArray(_))for(const S of _)f.invalidateAll(S);else f.invalidateAll();if(f){const{props:S}=s,T=this.internalState.hasPickingBuffer,F=Number.isInteger(S.highlightedObjectIndex)||S.pickable||S.extensions.some(M=>M.getNeedsPickingBuffer.call(this,M));if(T!==F){this.internalState.hasPickingBuffer=F;const{pickingColors:M,instancePickingColors:P}=f.attributes,H=M||P;H&&(F&&H.constant&&(H.constant=!1,f.invalidate(H.id)),!H.value&&!F&&(H.constant=!0,H.value=[0,0,0]))}}}finalizeState(s){for(const _ of this.getModels())_.destroy();const f=this.getAttributeManager();f&&f.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(s){for(const f of this.getModels())f.draw(s)}getPickingInfo({info:s,mode:f,sourceLayer:_}){const{index:S}=s;return S>=0&&Array.isArray(this.props.data)&&(s.object=this.props.data[S]),s}raiseError(s,f){var _,S,T,F;f&&(s=new Error(`${f}: ${s.message}`,{cause:s})),(S=(_=this.props).onError)!=null&&S.call(_,s)||(F=(T=this.context)==null?void 0:T.onError)==null||F.call(T,s,this)}getNeedsRedraw(s={clearRedrawFlags:!1}){return this._getNeedsRedraw(s)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var s;return((s=this.internalState)==null?void 0:s.uniformTransitions.active)||!1}activateViewport(s){if(!this.internalState)return;const f=this.internalState.viewport;this.internalState.viewport=s,(!f||!areViewportsEqual({oldViewport:f,viewport:s}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(s="all"){const f=this.getAttributeManager();f&&(s==="all"?f.invalidateAll():f.invalidate(s))}updateAttributes(s){let f=!1;for(const _ in s)s[_].layoutChanged()&&(f=!0);for(const _ of this.getModels())this._setModelAttributes(_,s,f)}_updateAttributes(){const s=this.getAttributeManager();if(!s)return;const f=this.props,_=this.getNumInstances(),S=this.getStartIndices();s.update({data:f.data,numInstances:_,startIndices:S,props:f,transitions:f.transitions,buffers:f.data.attributes,context:this});const T=s.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(T)}_updateAttributeTransition(){const s=this.getAttributeManager();s&&s.updateTransition()}_updateUniformTransition(){const{uniformTransitions:s}=this.internalState;if(s.active){const f=s.update(),_=Object.create(this.props);for(const S in f)Object.defineProperty(_,S,{value:f[S]});return _}return this.props}calculateInstancePickingColors(s,{numInstances:f}){if(s.constant)return;const _=Math.floor(pickingColorCache.length/4);if(this.internalState.usesPickingColorCache=!0,_<f){f>MAX_PICKING_COLOR_CACHE_SIZE&&defaultLogger.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),pickingColorCache=defaultTypedArrayManager.allocate(pickingColorCache,f,{size:4,copy:!0,maxCount:Math.max(f,MAX_PICKING_COLOR_CACHE_SIZE)});const S=Math.floor(pickingColorCache.length/4),T=[];for(let F=_;F<S;F++)this.encodePickingColor(F,T),pickingColorCache[F*4+0]=T[0],pickingColorCache[F*4+1]=T[1],pickingColorCache[F*4+2]=T[2]}s.value=pickingColorCache.subarray(0,f*4)}_setModelAttributes(s,f,_=!1){var M;if(!Object.keys(f).length)return;if(_){const P=this.getAttributeManager();s.setBufferLayout(P.getBufferLayouts(s)),f=P.getAttributes()}const S=((M=s.userData)==null?void 0:M.excludeAttributes)||{},T={},F={};for(const P in f){if(S[P])continue;const H=f[P].getValue();for(const J in H){const K=H[J];K instanceof Buffer$1?f[P].settings.isIndexed?s.setIndexBuffer(K):T[J]=K:K&&(F[J]=K)}}s.setAttributes(T),s.setConstantAttributes(F)}disablePickingIndex(s){const f=this.props.data;if(!("attributes"in f)){this._disablePickingIndex(s);return}const{pickingColors:_,instancePickingColors:S}=this.getAttributeManager().attributes,T=_||S,F=T&&f.attributes&&f.attributes[T.id];if(F&&F.value){const M=F.value,P=this.encodePickingColor(s);for(let H=0;H<f.length;H++){const J=T.getVertexOffset(H);M[J]===P[0]&&M[J+1]===P[1]&&M[J+2]===P[2]&&this._disablePickingIndex(H)}}else this._disablePickingIndex(s)}_disablePickingIndex(s){const{pickingColors:f,instancePickingColors:_}=this.getAttributeManager().attributes,S=f||_;if(!S)return;const T=S.getVertexOffset(s),F=S.getVertexOffset(s+1);S.buffer.write(new Uint8Array(F-T),T)}restorePickingColors(){const{pickingColors:s,instancePickingColors:f}=this.getAttributeManager().attributes,_=s||f;_&&(this.internalState.usesPickingColorCache&&_.value.buffer!==pickingColorCache.buffer&&(_.value=pickingColorCache.subarray(0,_.value.length)),_.updateSubBuffer({startOffset:0}))}_initialize(){assert$2(!this.internalState),assert$2(Number.isFinite(this.props.coordinateSystem)),debug(TRACE_INITIALIZE,this);const s=this._getAttributeManager();s&&s.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new LayerState({attributeManager:s,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(defaultLogger.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),s)}),this.internalState.uniformTransitions=new UniformTransitionManager(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const f of this.props.extensions)f.initializeState.call(this,this.context,f);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(s){debug(TRACE_MATCHED,this,this===s);const{state:f,internalState:_}=s;this!==s&&(this.internalState=_,this.state=f,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const s=this.needsUpdate();if(debug(TRACE_UPDATE,this,s),!s)return;const f=this.props,_=this.context,S=this.internalState,T=_.viewport,F=this._updateUniformTransition();S.propsInTransition=F,_.viewport=S.viewport||T,this.props=F;try{const M=this._getUpdateParams(),P=this.getModels();if(_.device)this.updateState(M);else try{this.updateState(M)}catch{}for(const J of this.props.extensions)J.updateState.call(this,M,J);const H=this.getModels()[0]!==P[0];this._postUpdate(M,H)}finally{_.viewport=T,this.props=f,this._clearChangeFlags(),S.needsUpdate=!1,S.resetOldProps()}}_finalize(){debug(TRACE_FINALIZE,this),this.finalizeState(this.context);for(const s of this.props.extensions)s.finalizeState.call(this,this.context,s)}_drawLayer({renderPass:s,moduleParameters:f=null,uniforms:_={},parameters:S={}}){this._updateAttributeTransition();const T=this.props,F=this.context;this.props=this.internalState.propsInTransition||T;const M=this.props.opacity;_.opacity=Math.pow(M,1/2.2);try{if(f){const{isActive:J,isAttribute:K}=f.picking;this.setModuleParameters(f),this.setShaderModuleProps({picking:{isActive:J,isAttribute:K}})}const{getPolygonOffset:P}=this.props,H=P&&P(_)||[0,0];F.device.setParametersWebGL({polygonOffset:H});for(const J of this.getModels())J.setParameters(S);F.device.withParametersWebGL(S,()=>{const J={renderPass:s,moduleParameters:f,uniforms:_,parameters:S,context:F};for(const K of this.props.extensions)K.draw.call(this,J,K);this.draw(J)})}finally{this.props=T}}getChangeFlags(){var s;return(s=this.internalState)==null?void 0:s.changeFlags}setChangeFlags(s){if(!this.internalState)return;const{changeFlags:f}=this.internalState;for(const S in s)if(s[S]){let T=!1;switch(S){case"dataChanged":const F=s[S],M=f[S];F&&Array.isArray(M)&&(f.dataChanged=Array.isArray(F)?M.concat(F):F,T=!0);default:f[S]||(f[S]=s[S],T=!0)}T&&debug(TRACE_CHANGE_FLAG,this,S,s)}const _=!!(f.dataChanged||f.updateTriggersChanged||f.propsChanged||f.extensionsChanged);f.propsOrDataChanged=_,f.somethingChanged=_||f.viewportChanged||f.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(s,f){var S;const _=diffProps(s,f);if(_.updateTriggersChanged)for(const T in _.updateTriggersChanged)_.updateTriggersChanged[T]&&this.invalidateAttribute(T);if(_.transitionsChanged)for(const T in _.transitionsChanged)this.internalState.uniformTransitions.add(T,f[T],s[T],(S=s.transitions)==null?void 0:S[T]);return this.setChangeFlags(_)}validateProps(){validateProps(this.props)}updateAutoHighlight(s){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(s)}_updateAutoHighlight(s){const f={highlightedObjectColor:s.picked?s.color:null},{highlightColor:_}=this.props;s.picked&&typeof _=="function"&&(f.highlightColor=_(s)),this.setShaderModuleProps({picking:f}),this.setNeedsRedraw()}_getAttributeManager(){const s=this.context;return new AttributeManager(s.device,{id:this.props.id,stats:s.stats,timeline:s.timeline})}_postUpdate(s,f){const{props:_,oldProps:S}=s;this.setNeedsRedraw(),this._updateAttributes();const T=this.state.model;T!=null&&T.isInstanced&&T.setInstanceCount(this.getNumInstances());const{autoHighlight:F,highlightedObjectIndex:M,highlightColor:P}=_;if(f||S.autoHighlight!==F||S.highlightedObjectIndex!==M||S.highlightColor!==P){const H={};Array.isArray(P)&&(H.highlightColor=P),(f||S.autoHighlight!==F||M!==S.highlightedObjectIndex)&&(H.highlightedObjectColor=Number.isFinite(M)&&M>=0?this.encodePickingColor(M):null),this.setShaderModuleProps({picking:H})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(s){if(!this.internalState)return!1;let f=!1;f=f||this.internalState.needsRedraw&&this.id;const _=this.getAttributeManager(),S=_?_.getNeedsRedraw(s):!1;if(f=f||S,f)for(const T of this.props.extensions)T.onNeedsRedraw.call(this,T);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!s.clearRedrawFlags,f}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Layer.defaultProps=defaultProps$n;Layer.layerName="Layer";const TRACE_RENDER_LAYERS="compositeLayer.renderLayers";class CompositeLayer extends Layer{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(s=>s.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(s){}setState(s){super.setState(s),this.setNeedsUpdate()}getPickingInfo({info:s}){const{object:f}=s;return f&&f.__source&&f.__source.parent&&f.__source.parent.id===this.id&&(s.object=f.__source.object,s.index=f.__source.index),s}filterSubLayer(s){return!0}shouldRenderSubLayer(s,f){return f&&f.length}getSubLayerClass(s,f){const{_subLayerProps:_}=this.props;return _&&_[s]&&_[s].type||f}getSubLayerRow(s,f,_){return s.__source={parent:this,object:f,index:_},s}getSubLayerAccessor(s){if(typeof s=="function"){const f={index:-1,data:this.props.data,target:[]};return(_,S)=>_&&_.__source?(f.index=_.__source.index,s(_.__source.object,f)):s(_,S)}return s}getSubLayerProps(s={}){var ve;const{opacity:f,pickable:_,visible:S,parameters:T,getPolygonOffset:F,highlightedObjectIndex:M,autoHighlight:P,highlightColor:H,coordinateSystem:J,coordinateOrigin:K,wrapLongitude:oe,positionFormat:se,modelMatrix:ae,extensions:ge,fetch:he,operation:Be,_subLayerProps:pe}=this.props,be={id:"",updateTriggers:{},opacity:f,pickable:_,visible:S,parameters:T,getPolygonOffset:F,highlightedObjectIndex:M,autoHighlight:P,highlightColor:H,coordinateSystem:J,coordinateOrigin:K,wrapLongitude:oe,positionFormat:se,modelMatrix:ae,extensions:ge,fetch:he,operation:Be},Re=pe&&s.id&&pe[s.id],Fe=Re&&Re.updateTriggers,Me=s.id||"sublayer";if(Re){const At=this.props[PROP_TYPES_SYMBOL],Ct=s.type?s.type._propTypes:{};for(const Rt in Re){const It=Ct[Rt]||At[Rt];It&&It.type==="accessor"&&(Re[Rt]=this.getSubLayerAccessor(Re[Rt]))}}Object.assign(be,s,Re),be.id=`${this.props.id}-${Me}`,be.updateTriggers={all:(ve=this.props.updateTriggers)==null?void 0:ve.all,...s.updateTriggers,...Fe};for(const At of ge){const Ct=At.getSubLayerProps.call(this,At);Ct&&Object.assign(be,Ct,{updateTriggers:Object.assign(be.updateTriggers,Ct.updateTriggers)})}return be}_updateAutoHighlight(s){for(const f of this.getSubLayers())f.updateAutoHighlight(s)}_getAttributeManager(){return null}_postUpdate(s,f){let _=this.internalState.subLayers;const S=!_||this.needsUpdate();if(S){const T=this.renderLayers();_=flatten$1(T,Boolean),this.internalState.subLayers=_}debug(TRACE_RENDER_LAYERS,this,S,_);for(const T of _)T.parent=this}}CompositeLayer.layerName="CompositeLayer";const DEGREES_TO_RADIANS$3=Math.PI/180,RADIANS_TO_DEGREES$1=180/Math.PI,EARTH_RADIUS=6370972,GLOBE_RADIUS=256;function getDistanceScales$1(){const d=GLOBE_RADIUS/EARTH_RADIUS,s=Math.PI/180*GLOBE_RADIUS;return{unitsPerMeter:[d,d,d],unitsPerMeter2:[0,0,0],metersPerUnit:[1/d,1/d,1/d],unitsPerDegree:[s,s,d],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/s,1/s,1/d]}}class GlobeViewport extends Viewport{constructor(s={}){const{latitude:f=0,longitude:_=0,zoom:S=0,nearZMultiplier:T=.1,farZMultiplier:F=2,resolution:M=10}=s;let{height:P,altitude:H=1.5}=s;P=P||1,H=Math.max(.75,H);const J=new Matrix4().lookAt({eye:[0,-H,0],up:[0,0,1]}),K=Math.pow(2,S);J.rotateX(f*DEGREES_TO_RADIANS$3),J.rotateZ(-_*DEGREES_TO_RADIANS$3),J.scale(K/P);const oe=Math.atan(.5/H),se=GLOBE_RADIUS*2*K/P;super({...s,height:P,viewMatrix:J,longitude:_,latitude:f,zoom:S,distanceScales:getDistanceScales$1(),fovyRadians:oe*2,focalDistance:H,near:T,far:Math.min(2,1/se+1)*H*F}),this.latitude=f,this.longitude=_,this.resolution=M}get projectionMode(){return PROJECTION_MODE.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(s={}){const f={targetZ:s.z||0},_=this.unproject([0,this.height/2],f),S=this.unproject([this.width/2,0],f),T=this.unproject([this.width,this.height/2],f),F=this.unproject([this.width/2,this.height],f);return T[0]<this.longitude&&(T[0]+=360),_[0]>this.longitude&&(_[0]-=360),[Math.min(_[0],T[0],S[0],F[0]),Math.min(_[1],T[1],S[1],F[1]),Math.max(_[0],T[0],S[0],F[0]),Math.max(_[1],T[1],S[1],F[1])]}unproject(s,{topLeft:f=!0,targetZ:_}={}){const[S,T,F]=s,M=f?T:this.height-T,{pixelUnprojectionMatrix:P}=this;let H;if(Number.isFinite(F))H=transformVector$1(P,[S,M,F,1]);else{const se=transformVector$1(P,[S,M,-1,1]),ae=transformVector$1(P,[S,M,1,1]),ge=((_||0)/EARTH_RADIUS+1)*GLOBE_RADIUS,he=sqrLen(sub([],se,ae)),Be=sqrLen(se),pe=sqrLen(ae),Re=4*((4*Be*pe-(he-Be-pe)**2)/16)/he,Fe=Math.sqrt(Be-Re),Me=Math.sqrt(Math.max(0,ge*ge-Re)),ve=(Fe-Me)/Math.sqrt(he);H=lerp$4([],se,ae,ve)}const[J,K,oe]=this.unprojectPosition(H);return Number.isFinite(F)?[J,K,oe]:Number.isFinite(_)?[J,K,_]:[J,K]}projectPosition(s){const[f,_,S=0]=s,T=f*DEGREES_TO_RADIANS$3,F=_*DEGREES_TO_RADIANS$3,M=Math.cos(F),P=(S/EARTH_RADIUS+1)*GLOBE_RADIUS;return[Math.sin(T)*M*P,-Math.cos(T)*M*P,Math.sin(F)*P]}unprojectPosition(s){const[f,_,S]=s,T=len(s),F=Math.asin(S/T),P=Math.atan2(f,-_)*RADIANS_TO_DEGREES$1,H=F*RADIANS_TO_DEGREES$1,J=(T/GLOBE_RADIUS-1)*EARTH_RADIUS;return[P,H,J]}projectFlat(s){return s}unprojectFlat(s){return s}panByPosition(s,f){const _=this.unproject(f);return{longitude:s[0]-_[0]+this.longitude,latitude:s[1]-_[1]+this.latitude}}}function transformVector$1(d,s){const f=transformMat4$1([],s,d);return scale$4(f,f,1/f[3]),f}const DEGREES_TO_RADIANS$2=Math.PI/180;function getViewMatrix$1({height:d,focalDistance:s,orbitAxis:f,rotationX:_,rotationOrbit:S,zoom:T}){const F=f==="Z"?[0,0,1]:[0,1,0],M=f==="Z"?[0,-s,0]:[0,0,s],P=new Matrix4().lookAt({eye:M,up:F});P.rotateX(_*DEGREES_TO_RADIANS$2),f==="Z"?P.rotateZ(S*DEGREES_TO_RADIANS$2):P.rotateY(S*DEGREES_TO_RADIANS$2);const H=Math.pow(2,T)/d;return P.scale(H),P}class OrbitViewport extends Viewport{constructor(s){const{height:f,projectionMatrix:_,fovy:S=50,orbitAxis:T="Z",target:F=[0,0,0],rotationX:M=0,rotationOrbit:P=0,zoom:H=0}=s,J=_?_[5]/2:fovyToAltitude$1(S);super({...s,longitude:void 0,viewMatrix:getViewMatrix$1({height:f||1,focalDistance:J,orbitAxis:T,rotationX:M,rotationOrbit:P,zoom:H}),fovy:S,focalDistance:J,position:F,zoom:H}),this.projectedCenter=this.project(this.center)}unproject(s,{topLeft:f=!0}={}){const[_,S,T=this.projectedCenter[2]]=s,F=f?S:this.height-S,[M,P,H]=pixelsToWorld$1([_,F,T],this.pixelUnprojectionMatrix);return[M,P,H]}panByPosition(s,f){const _=this.project(s),S=[this.width/2+_[0]-f[0],this.height/2+_[1]-f[1],this.projectedCenter[2]];return{target:this.unproject(S)}}}const viewMatrix=new Matrix4().lookAt({eye:[0,0,1]});function getProjectionMatrix$1({width:d,height:s,near:f,far:_,padding:S}){let T=-d/2,F=d/2,M=-s/2,P=s/2;if(S){const{left:H=0,right:J=0,top:K=0,bottom:oe=0}=S,se=clamp$3((H+d-J)/2,0,d)-d/2,ae=clamp$3((K+s-oe)/2,0,s)-s/2;T-=se,F-=se,M+=ae,P+=ae}return new Matrix4().ortho({left:T,right:F,bottom:M,top:P,near:f,far:_})}class OrthographicViewport extends Viewport{constructor(s){const{width:f,height:_,near:S=.1,far:T=1e3,zoom:F=0,target:M=[0,0,0],padding:P=null,flipY:H=!0}=s,J=Array.isArray(F)?F[0]:F,K=Array.isArray(F)?F[1]:F,oe=Math.min(J,K),se=Math.pow(2,oe);let ae;if(J!==K){const ge=Math.pow(2,J),he=Math.pow(2,K);ae={unitsPerMeter:[ge/se,he/se,1],metersPerUnit:[se/ge,se/he,1]}}super({...s,longitude:void 0,position:M,viewMatrix:viewMatrix.clone().scale([se,se*(H?-1:1),se]),projectionMatrix:getProjectionMatrix$1({width:f||1,height:_||1,padding:P,near:S,far:T}),zoom:oe,distanceScales:ae})}projectFlat([s,f]){const{unitsPerMeter:_}=this.distanceScales;return[s*_[0],f*_[1]]}unprojectFlat([s,f]){const{metersPerUnit:_}=this.distanceScales;return[s*_[0],f*_[1]]}panByPosition(s,f){const _=pixelsToWorld$1(f,this.pixelUnprojectionMatrix),S=this.projectFlat(s),T=add$7([],S,negate$3([],_)),F=add$7([],this.center,T);return{target:this.unprojectFlat(F)}}}class OrbitState extends ViewState{constructor(s){const{width:f,height:_,rotationX:S=0,rotationOrbit:T=0,target:F=[0,0,0],zoom:M=0,minRotationX:P=-90,maxRotationX:H=90,minZoom:J=-1/0,maxZoom:K=1/0,startPanPosition:oe,startRotatePos:se,startRotationX:ae,startRotationOrbit:ge,startZoomPosition:he,startZoom:Be}=s;super({width:f,height:_,rotationX:S,rotationOrbit:T,target:F,zoom:M,minRotationX:P,maxRotationX:H,minZoom:J,maxZoom:K},{startPanPosition:oe,startRotatePos:se,startRotationX:ae,startRotationOrbit:ge,startZoomPosition:he,startZoom:Be}),this.makeViewport=s.makeViewport}panStart({pos:s}){return this._getUpdatedState({startPanPosition:this._unproject(s)})}pan({pos:s,startPosition:f}){const _=this.getState().startPanPosition||f;if(!_)return this;const T=this.makeViewport(this.getViewportProps()).panByPosition(_,s);return this._getUpdatedState(T)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:s}){return this._getUpdatedState({startRotatePos:s,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:s,deltaAngleX:f=0,deltaAngleY:_=0}){const{startRotatePos:S,startRotationX:T,startRotationOrbit:F}=this.getState(),{width:M,height:P}=this.getViewportProps();if(!S||T===void 0||F===void 0)return this;let H;if(s){let J=(s[0]-S[0])/M;const K=(s[1]-S[1])/P;(T<-90||T>90)&&(J*=-1),H={rotationX:T+K*180,rotationOrbit:F+J*180}}else H={rotationX:T+_,rotationOrbit:F+f};return this._getUpdatedState(H)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(s){const f=s.getViewportProps(),_={...this.getViewportProps()},{rotationOrbit:S}=_;return Math.abs(S-f.rotationOrbit)>180&&(_.rotationOrbit=S<0?S+360:S-360),_}zoomStart({pos:s}){return this._getUpdatedState({startZoomPosition:this._unproject(s),startZoom:this.getViewportProps().zoom})}zoom({pos:s,startPos:f,scale:_}){let{startZoom:S,startZoomPosition:T}=this.getState();if(T||(S=this.getViewportProps().zoom,T=this._unproject(f)||this._unproject(s)),!T)return this;const F=this._calculateNewZoom({scale:_,startZoom:S}),M=this.makeViewport({...this.getViewportProps(),zoom:F});return this._getUpdatedState({zoom:F,...M.panByPosition(T,s)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(s=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:s})})}zoomOut(s=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/s})})}moveLeft(s=50){return this._panFromCenter([-s,0])}moveRight(s=50){return this._panFromCenter([s,0])}moveUp(s=50){return this._panFromCenter([0,-s])}moveDown(s=50){return this._panFromCenter([0,s])}rotateLeft(s=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-s})}rotateRight(s=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+s})}rotateUp(s=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-s})}rotateDown(s=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+s})}_unproject(s){const f=this.makeViewport(this.getViewportProps());return s&&f.unproject(s)}_calculateNewZoom({scale:s,startZoom:f}){const{maxZoom:_,minZoom:S}=this.getViewportProps();f===void 0&&(f=this.getViewportProps().zoom);const T=f+Math.log2(s);return clamp$3(T,S,_)}_panFromCenter(s){const{width:f,height:_,target:S}=this.getViewportProps();return this.pan({startPosition:S,pos:[f/2+s[0],_/2+s[1]]})}_getUpdatedState(s){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...s})}applyConstraints(s){const{maxZoom:f,minZoom:_,zoom:S,maxRotationX:T,minRotationX:F,rotationOrbit:M}=s;return s.zoom=Array.isArray(S)?[clamp$3(S[0],_,f),clamp$3(S[1],_,f)]:clamp$3(S,_,f),s.rotationX=clamp$3(s.rotationX,F,T),(M<-180||M>180)&&(s.rotationOrbit=mod(M+180,360)-180),s}}class OrbitController extends Controller{constructor(){super(...arguments),this.ControllerState=OrbitState,this.transition={transitionDuration:300,transitionInterpolator:new LinearInterpolator({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})}}}class OrbitView extends View{constructor(s={}){super(s),this.props.orbitAxis=s.orbitAxis||"Z"}get ViewportType(){return OrbitViewport}get ControllerType(){return OrbitController}}OrbitView.displayName="OrbitView";class OrthographicState extends OrbitState{constructor(s){super(s),this.zoomAxis=s.zoomAxis||"all"}_calculateNewZoom({scale:s,startZoom:f}){const{maxZoom:_,minZoom:S}=this.getViewportProps();f===void 0&&(f=this.getViewportProps().zoom);let T=Math.log2(s);if(Array.isArray(f)){let[F,M]=f;switch(this.zoomAxis){case"X":F=clamp$3(F+T,S,_);break;case"Y":M=clamp$3(M+T,S,_);break;default:let P=Math.min(F+T,M+T);P<S&&(T+=S-P),P=Math.max(F+T,M+T),P>_&&(T+=_-P),F+=T,M+=T}return[F,M]}return clamp$3(f+T,S,_)}}class OrthographicController extends Controller{constructor(){super(...arguments),this.ControllerState=OrthographicState,this.transition={transitionDuration:300,transitionInterpolator:new LinearInterpolator(["target","zoom"])},this.dragMode="pan"}_onPanRotate(){return!1}}class OrthographicView extends View{constructor(s={}){super(s)}get ViewportType(){return OrthographicViewport}get ControllerType(){return OrthographicController}}OrthographicView.displayName="OrthographicView";class LayerExtension{static get componentName(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}constructor(s){s&&(this.opts=s)}equals(s){return this===s?!0:this.constructor===s.constructor&&deepEqual(this.opts,s.opts,1)}getShaders(s){return null}getSubLayerProps(s){const{defaultProps:f}=s.constructor,_={updateTriggers:{}};for(const S in f)if(S in this.props){const T=f[S],F=this.props[S];_[S]=F,T&&T.type==="accessor"&&(_.updateTriggers[S]=this.props.updateTriggers[S],typeof F=="function"&&(_[S]=this.getSubLayerAccessor(F)))}return _}initializeState(s,f){}updateState(s,f){}onNeedsRedraw(s){}getNeedsPickingBuffer(s){return!1}draw(s,f){}finalizeState(s,f){}}LayerExtension.defaultProps={};LayerExtension.extensionName="LayerExtension";class Tesselator{constructor(s){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;const{attributes:f={}}=s;this.typedArrayManager=defaultTypedArrayManager,this.attributes={},this._attributeDefs=f,this.opts=s,this.updateGeometry(s)}updateGeometry(s){Object.assign(this.opts,s);const{data:f,buffers:_={},getGeometry:S,geometryBuffer:T,positionFormat:F,dataChanged:M,normalize:P=!0}=this.opts;if(this.data=f,this.getGeometry=S,this.positionSize=T&&T.size||(F==="XY"?2:3),this.buffers=_,this.normalize=P,T&&(assert$2(f.startIndices),this.getGeometry=this.getGeometryFromBuffer(T),P||(_.vertexPositions=T)),this.geometryBuffer=_.vertexPositions,Array.isArray(M))for(const H of M)this._rebuildGeometry(H);else this._rebuildGeometry()}updatePartialGeometry({startRow:s,endRow:f}){this._rebuildGeometry({startRow:s,endRow:f})}getGeometryFromBuffer(s){const f=s.value||s;return ArrayBuffer.isView(f)?getAccessorFromBuffer(f,{size:this.positionSize,offset:s.offset,stride:s.stride,startIndices:this.data.startIndices}):null}_allocate(s,f){const{attributes:_,buffers:S,_attributeDefs:T,typedArrayManager:F}=this;for(const M in T)if(M in S)F.release(_[M]),_[M]=null;else{const P=T[M];P.copy=f,_[M]=F.allocate(_[M],s,P)}}_forEachGeometry(s,f,_){const{data:S,getGeometry:T}=this,{iterable:F,objectInfo:M}=createIterable(S,f,_);for(const P of F){M.index++;const H=T?T(P,M):null;s(H,M.index)}}_rebuildGeometry(s){if(!this.data)return;let{indexStarts:f,vertexStarts:_,instanceCount:S}=this;const{data:T,geometryBuffer:F}=this,{startRow:M=0,endRow:P=1/0}=s||{},H={};if(s||(f=[0],_=[0]),this.normalize||!F)this._forEachGeometry((K,oe)=>{const se=K&&this.normalizeGeometry(K);H[oe]=se,_[oe+1]=_[oe]+(se?this.getGeometrySize(se):0)},M,P),S=_[_.length-1];else if(_=T.startIndices,S=_[T.length]||0,ArrayBuffer.isView(F))S=S||F.length/this.positionSize;else if(F instanceof Buffer$1){const K=this.positionSize*4;S=S||F.byteLength/K}else if(F.buffer){const K=F.stride||this.positionSize*4;S=S||F.buffer.byteLength/K}else if(F.value){const K=F.value,oe=F.stride/K.BYTES_PER_ELEMENT||this.positionSize;S=S||K.length/oe}this._allocate(S,!!s),this.indexStarts=f,this.vertexStarts=_,this.instanceCount=S;const J={};this._forEachGeometry((K,oe)=>{const se=H[oe]||K;J.vertexStart=_[oe],J.indexStart=f[oe];const ae=oe<_.length-1?_[oe+1]:S;J.geometrySize=ae-_[oe],J.geometryIndex=oe,this.updateGeometryAttributes(se,J)},M,P),this.vertexCount=f[f.length-1]}}const MAX_COLOR_INTENSITY=255,DEFAULT_COLOR_OFF=[0,0,0],MAX_CHANNELS=6,DEFAULT_FONT_FAMILY="-apple-system, 'Helvetica Neue', Arial, sans-serif",DTYPE_VALUES={Uint8:{format:"r8uint",dataFormat:GLEnum.RED_INTEGER,type:GLEnum.UNSIGNED_BYTE,max:2**8-1,sampler:"usampler2D"},Uint16:{format:"r16uint",dataFormat:GLEnum.RED_INTEGER,type:GLEnum.UNSIGNED_SHORT,max:2**16-1,sampler:"usampler2D"},Uint32:{format:"r32uint",dataFormat:GLEnum.RED_INTEGER,type:GLEnum.UNSIGNED_INT,max:2**32-1,sampler:"usampler2D"},Float32:{format:"r32float",dataFormat:GLEnum.RED,type:GLEnum.FLOAT,max:3.4*10**38,sampler:"sampler2D"},Int8:{format:"r8int",dataFormat:GLEnum.RED_INTEGER,type:GLEnum.BYTE,max:2**7-1,sampler:"isampler2D"},Int16:{format:"r16int",dataFormat:GLEnum.RED_INTEGER,type:GLEnum.SHORT,max:2**15-1,sampler:"isampler2D"},Int32:{format:"r32int",dataFormat:GLEnum.RED_INTEGER,type:GLEnum.INT,max:2**31-1,sampler:"isampler2D"},Float64:{format:"r32float",dataFormat:GLEnum.RED,type:GLEnum.FLOAT,max:3.4*10**38,sampler:"sampler2D",cast:d=>new Float32Array(d)}};var RENDERING_MODES=(d=>(d.MAX_INTENSITY_PROJECTION="Maximum Intensity Projection",d.MIN_INTENSITY_PROJECTION="Minimum Intensity Projection",d.ADDITIVE="Additive",d))(RENDERING_MODES||{});const apply_transparent_color=`vec4 apply_transparent_color(vec3 color, vec3 transparentColor, bool useTransparentColor, float opacity){
  return vec4(color, (color == transparentColor && useTransparentColor) ? 0. : opacity);
}
`,alpha=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,1,1,0);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,autumn=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,0,0,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,bathymetry=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.1568627450980392,0.10196078431372549,0.17254901960784313,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.23137254901960785,0.19215686274509805,0.35294117647058826,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.25098039215686274,0.2980392156862745,0.5450980392156862,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.24705882352941178,0.43137254901960786,0.592156862745098,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.2823529411764706,0.5568627450980392,0.6196078431372549,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.3333333333333333,0.6823529411764706,0.6392156862745098,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.47058823529411764,0.807843137254902,0.6392156862745098,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7333333333333333,0.9019607843137255,0.6745098039215687,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9921568627450981,0.996078431372549,0.8,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,blackbody=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.2;
  const vec4 v1 = vec4(0.9019607843137255,0,0,1);
  const float e2 = 0.4;
  const vec4 v2 = vec4(0.9019607843137255,0.8235294117647058,0,1);
  const float e3 = 0.7;
  const vec4 v3 = vec4(1,1,1,1);
  const float e4 = 1.0;
  const vec4 v4 = vec4(0.6274509803921569,0.7843137254901961,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),mix(v3,v4,a3)*step(e3,x)*step(x,e4)
  )));
}
`,bluered=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,1,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,bone=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.376;
  const vec4 v1 = vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);
  const float e2 = 0.753;
  const vec4 v2 = vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);
  const float e3 = 1.0;
  const vec4 v3 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),mix(v2,v3,a2)*step(e2,x)*step(x,e3)
  ));
}
`,cdom=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.1843137254901961,0.058823529411764705,0.24313725490196078,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.3411764705882353,0.09019607843137255,0.33725490196078434,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5098039215686274,0.10980392156862745,0.38823529411764707,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6705882352941176,0.1607843137254902,0.3764705882352941,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.807843137254902,0.2627450980392157,0.33725490196078434,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.9019607843137255,0.41568627450980394,0.32941176470588235,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9490196078431372,0.5843137254901961,0.403921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9764705882352941,0.7568627450980392,0.5294117647058824,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.996078431372549,0.9294117647058824,0.6901960784313725,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,chlorophyll=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.07058823529411765,0.1411764705882353,0.0784313725490196,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.09803921568627451,0.24705882352941178,0.1607843137254902,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.09411764705882353,0.3568627450980392,0.23137254901960785,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.050980392156862744,0.4666666666666667,0.2823529411764706,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.07058823529411765,0.5803921568627451,0.3137254901960784,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.3137254901960784,0.6784313725490196,0.34901960784313724,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.5176470588235295,0.7686274509803922,0.47843137254901963,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.6862745098039216,0.8666666666666667,0.6352941176470588,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.8431372549019608,0.9764705882352941,0.8156862745098039,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,cool=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.4549019607843137,0,0.8549019607843137,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0,0.8,0.7725490196078432,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0,0.9686274509803922,0.5725490196078431,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0,1,0.34509803921568627,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.1568627450980392,1,0.03137254901960784,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.5764705882352941,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,copper=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.804;
  const vec4 v1 = vec4(1,0.6274509803921569,0.4,1);
  const float e2 = 1.0;
  const vec4 v2 = vec4(1,0.7803921568627451,0.4980392156862745,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),mix(v1,v2,a1)*step(e1,x)*step(x,e2)
  );
}
`,cubehelix=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.07;
  const vec4 v1 = vec4(0.08627450980392157,0.0196078431372549,0.23137254901960785,1);
  const float e2 = 0.13;
  const vec4 v2 = vec4(0.23529411764705882,0.01568627450980392,0.4117647058823529,1);
  const float e3 = 0.2;
  const vec4 v3 = vec4(0.42745098039215684,0.00392156862745098,0.5294117647058824,1);
  const float e4 = 0.27;
  const vec4 v4 = vec4(0.6313725490196078,0,0.5764705882352941,1);
  const float e5 = 0.33;
  const vec4 v5 = vec4(0.8235294117647058,0.00784313725490196,0.5568627450980392,1);
  const float e6 = 0.4;
  const vec4 v6 = vec4(0.984313725490196,0.043137254901960784,0.4823529411764706,1);
  const float e7 = 0.47;
  const vec4 v7 = vec4(1,0.11372549019607843,0.3803921568627451,1);
  const float e8 = 0.53;
  const vec4 v8 = vec4(1,0.21176470588235294,0.27058823529411763,1);
  const float e9 = 0.6;
  const vec4 v9 = vec4(1,0.3333333333333333,0.1803921568627451,1);
  const float e10 = 0.67;
  const vec4 v10 = vec4(1,0.47058823529411764,0.13333333333333333,1);
  const float e11 = 0.73;
  const vec4 v11 = vec4(1,0.615686274509804,0.1450980392156863,1);
  const float e12 = 0.8;
  const vec4 v12 = vec4(0.9450980392156862,0.7490196078431373,0.2235294117647059,1);
  const float e13 = 0.87;
  const vec4 v13 = vec4(0.8784313725490196,0.8627450980392157,0.36470588235294116,1);
  const float e14 = 0.93;
  const vec4 v14 = vec4(0.8549019607843137,0.9450980392156862,0.5568627450980392,1);
  const float e15 = 1.0;
  const vec4 v15 = vec4(0.8901960784313725,0.9921568627450981,0.7764705882352941,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  float a10 = smoothstep(e10,e11,x);
  float a11 = smoothstep(e11,e12,x);
  float a12 = smoothstep(e12,e13,x);
  float a13 = smoothstep(e13,e14,x);
  float a14 = smoothstep(e14,e15,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),
    max(mix(v9,v10,a9)*step(e9,x)*step(x,e10),
    max(mix(v10,v11,a10)*step(e10,x)*step(x,e11),
    max(mix(v11,v12,a11)*step(e11,x)*step(x,e12),
    max(mix(v12,v13,a12)*step(e12,x)*step(x,e13),
    max(mix(v13,v14,a13)*step(e13,x)*step(x,e14),mix(v14,v15,a14)*step(e14,x)*step(x,e15)
  ))))))))))))));
}
`,density=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,earth=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.5098039215686274,1);
  const float e1 = 0.1;
  const vec4 v1 = vec4(0,0.7058823529411765,0.7058823529411765,1);
  const float e2 = 0.2;
  const vec4 v2 = vec4(0.1568627450980392,0.8235294117647058,0.1568627450980392,1);
  const float e3 = 0.4;
  const vec4 v3 = vec4(0.9019607843137255,0.9019607843137255,0.19607843137254902,1);
  const float e4 = 0.6;
  const vec4 v4 = vec4(0.47058823529411764,0.27450980392156865,0.0784313725490196,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,electric=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.15;
  const vec4 v1 = vec4(0.11764705882352941,0,0.39215686274509803,1);
  const float e2 = 0.4;
  const vec4 v2 = vec4(0.47058823529411764,0,0.39215686274509803,1);
  const float e3 = 0.6;
  const vec4 v3 = vec4(0.6274509803921569,0.35294117647058826,0,1);
  const float e4 = 0.8;
  const vec4 v4 = vec4(0.9019607843137255,0.7843137254901961,0,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(1,0.9803921568627451,0.8627450980392157,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,freesurface_blue=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.11764705882352941,0.01568627450980392,0.43137254901960786,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.1843137254901961,0.054901960784313725,0.6901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.1607843137254902,0.17647058823529413,0.9254901960784314,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.09803921568627451,0.38823529411764707,0.8313725490196079,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.26666666666666666,0.5137254901960784,0.7843137254901961,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.4470588235294118,0.611764705882353,0.7725490196078432,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.615686274509804,0.7098039215686275,0.796078431372549,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7843137254901961,0.8156862745098039,0.8470588235294118,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,freesurface_red=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.23529411764705882,0.03529411764705882,0.07058823529411765,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.39215686274509803,0.06666666666666667,0.10588235294117647,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5568627450980392,0.0784313725490196,0.11372549019607843,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6941176470588235,0.16862745098039217,0.10588235294117647,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7529411764705882,0.3411764705882353,0.24705882352941178,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.803921568627451,0.49019607843137253,0.4117647058823529,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.8470588235294118,0.6352941176470588,0.5803921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.8901960784313725,0.7803921568627451,0.7568627450980392,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,greens=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0.26666666666666666,0.10588235294117647,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0,0.42745098039215684,0.17254901960784313,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.13725490196078433,0.5450980392156862,0.27058823529411763,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0.2549019607843137,0.6705882352941176,0.36470588235294116,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.4549019607843137,0.7686274509803922,0.4627450980392157,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.6313725490196078,0.8509803921568627,0.6078431372549019,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.7803921568627451,0.9137254901960784,0.7529411764705882,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(0.8980392156862745,0.9607843137254902,0.8784313725490196,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9686274509803922,0.9882352941176471,0.9607843137254902,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,greys=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,hot=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.3;
  const vec4 v1 = vec4(0.9019607843137255,0,0,1);
  const float e2 = 0.6;
  const vec4 v2 = vec4(1,0.8235294117647058,0,1);
  const float e3 = 1.0;
  const vec4 v3 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),mix(v2,v3,a2)*step(e2,x)*step(x,e3)
  ));
}
`,hsv=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,0,0,1);
  const float e1 = 0.169;
  const vec4 v1 = vec4(0.9921568627450981,1,0.00784313725490196,1);
  const float e2 = 0.173;
  const vec4 v2 = vec4(0.9686274509803922,1,0.00784313725490196,1);
  const float e3 = 0.337;
  const vec4 v3 = vec4(0,0.9882352941176471,0.01568627450980392,1);
  const float e4 = 0.341;
  const vec4 v4 = vec4(0,0.9882352941176471,0.0392156862745098,1);
  const float e5 = 0.506;
  const vec4 v5 = vec4(0.00392156862745098,0.9764705882352941,1,1);
  const float e6 = 0.671;
  const vec4 v6 = vec4(0.00784313725490196,0,0.9921568627450981,1);
  const float e7 = 0.675;
  const vec4 v7 = vec4(0.03137254901960784,0,0.9921568627450981,1);
  const float e8 = 0.839;
  const vec4 v8 = vec4(1,0,0.984313725490196,1);
  const float e9 = 0.843;
  const vec4 v9 = vec4(1,0,0.9607843137254902,1);
  const float e10 = 1.0;
  const vec4 v10 = vec4(1,0,0.023529411764705882,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),mix(v9,v10,a9)*step(e9,x)*step(x,e10)
  )))))))));
}
`,inferno=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.01568627450980392,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8901960784313725,0.34901960784313724,0.2,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9882352941176471,1,0.6431372549019608,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,jet=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.5137254901960784,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0,0.23529411764705882,0.6666666666666666,1);
  const float e2 = 0.375;
  const vec4 v2 = vec4(0.0196078431372549,1,1,1);
  const float e3 = 0.625;
  const vec4 v3 = vec4(1,1,0,1);
  const float e4 = 0.875;
  const vec4 v4 = vec4(0.9803921568627451,0,0,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(0.5019607843137255,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,magma=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.01568627450980392,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,oxygen=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.25098039215686274,0.0196078431372549,0.0196078431372549,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.41568627450980394,0.023529411764705882,0.058823529411764705,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5647058823529412,0.10196078431372549,0.027450980392156862,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6588235294117647,0.25098039215686274,0.011764705882352941,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7372549019607844,0.39215686274509803,0.01568627450980392,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.807843137254902,0.5333333333333333,0.043137254901960784,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.8627450980392157,0.6823529411764706,0.09803921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9058823529411765,0.8431372549019608,0.17254901960784313,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9725490196078431,0.996078431372549,0.4117647058823529,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,par=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.2,0.0784313725490196,0.09411764705882353,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.35294117647058826,0.12549019607843137,0.13725490196078433,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5058823529411764,0.17254901960784313,0.13333333333333333,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6235294117647059,0.26666666666666666,0.09803921568627451,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7137254901960784,0.38823529411764707,0.07450980392156863,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.7803921568627451,0.5254901960784314,0.08627450980392157,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.8313725490196079,0.6705882352941176,0.13725490196078433,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.8666666666666667,0.8235294117647058,0.21176470588235294,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.8823529411764706,0.9921568627450981,0.29411764705882354,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,phase=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.7215686274509804,0.2784313725490196,0.14901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.7294117647058823,0.22745098039215686,0.45098039215686275,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6274509803921569,0.2784313725490196,0.7254901960784313,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.43137254901960786,0.3803921568627451,0.8549019607843137,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.19607843137254902,0.4823529411764706,0.6431372549019608,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.12156862745098039,0.5137254901960784,0.43137254901960786,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.30196078431372547,0.5058823529411764,0.13333333333333333,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,picnic=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,1,1);
  const float e1 = 0.1;
  const vec4 v1 = vec4(0.2,0.6,1,1);
  const float e2 = 0.2;
  const vec4 v2 = vec4(0.4,0.8,1,1);
  const float e3 = 0.3;
  const vec4 v3 = vec4(0.6,0.8,1,1);
  const float e4 = 0.4;
  const vec4 v4 = vec4(0.8,0.8,1,1);
  const float e5 = 0.5;
  const vec4 v5 = vec4(1,1,1,1);
  const float e6 = 0.6;
  const vec4 v6 = vec4(1,0.8,1,1);
  const float e7 = 0.7;
  const vec4 v7 = vec4(1,0.6,1,1);
  const float e8 = 0.8;
  const vec4 v8 = vec4(1,0.4,0.8,1);
  const float e9 = 0.9;
  const vec4 v9 = vec4(1,0.4,0.4,1);
  const float e10 = 1.0;
  const vec4 v10 = vec4(1,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),mix(v9,v10,a9)*step(e9,x)*step(x,e10)
  )))))))));
}
`,plasma=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,portland=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.047058823529411764,0.2,0.5137254901960784,1);
  const float e1 = 0.25;
  const vec4 v1 = vec4(0.0392156862745098,0.5333333333333333,0.7294117647058823,1);
  const float e2 = 0.5;
  const vec4 v2 = vec4(0.9490196078431372,0.8274509803921568,0.2196078431372549,1);
  const float e3 = 0.75;
  const vec4 v3 = vec4(0.9490196078431372,0.5607843137254902,0.2196078431372549,1);
  const float e4 = 1.0;
  const vec4 v4 = vec4(0.8509803921568627,0.11764705882352941,0.11764705882352941,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),mix(v3,v4,a3)*step(e3,x)*step(x,e4)
  )));
}
`,rainbow_soft=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);
  const float e1 = 0.1;
  const vec4 v1 = vec4(0.7803921568627451,0,0.7058823529411765,1);
  const float e2 = 0.2;
  const vec4 v2 = vec4(1,0,0.4745098039215686,1);
  const float e3 = 0.3;
  const vec4 v3 = vec4(1,0.4235294117647059,0,1);
  const float e4 = 0.4;
  const vec4 v4 = vec4(0.8705882352941177,0.7607843137254902,0,1);
  const float e5 = 0.5;
  const vec4 v5 = vec4(0.5882352941176471,1,0,1);
  const float e6 = 0.6;
  const vec4 v6 = vec4(0,1,0.21568627450980393,1);
  const float e7 = 0.7;
  const vec4 v7 = vec4(0,0.9647058823529412,0.5882352941176471,1);
  const float e8 = 0.8;
  const vec4 v8 = vec4(0.19607843137254902,0.6549019607843137,0.8705882352941177,1);
  const float e9 = 0.9;
  const vec4 v9 = vec4(0.403921568627451,0.2,0.9215686274509803,1);
  const float e10 = 1.0;
  const vec4 v10 = vec4(0.48627450980392156,0,0.7294117647058823,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),mix(v9,v10,a9)*step(e9,x)*step(x,e10)
  )))))))));
}
`,rainbow=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.5882352941176471,0,0.35294117647058826,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0,0,0.7843137254901961,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0,0.09803921568627451,1,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0,0.596078431372549,1,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.17254901960784313,1,0.5882352941176471,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.592156862745098,1,0,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(1,0.9176470588235294,0,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(1,0.43529411764705883,0,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,rdbu=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);
  const float e1 = 0.35;
  const vec4 v1 = vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);
  const float e2 = 0.5;
  const vec4 v2 = vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);
  const float e3 = 0.6;
  const vec4 v3 = vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);
  const float e4 = 0.7;
  const vec4 v4 = vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,salinity=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.16470588235294117,0.09411764705882353,0.4235294117647059,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.12941176470588237,0.19607843137254902,0.6352941176470588,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.058823529411764705,0.35294117647058826,0.5686274509803921,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.1568627450980392,0.4627450980392157,0.5372549019607843,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.23137254901960785,0.5725490196078431,0.5294117647058824,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.30980392156862746,0.6862745098039216,0.49411764705882355,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.47058823529411764,0.796078431372549,0.40784313725490196,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7568627450980392,0.8666666666666667,0.39215686274509803,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9921568627450981,0.9372549019607843,0.6039215686274509,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,spring=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,0,1,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,summer=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0.5019607843137255,0.4,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,0.4,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,temperature=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.01568627450980392,0.13725490196078433,0.2,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.09019607843137255,0.2,0.47843137254901963,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3333333333333333,0.23137254901960785,0.615686274509804,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5058823529411764,0.30980392156862746,0.5607843137254902,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.6862745098039216,0.37254901960784315,0.5098039215686274,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8705882352941177,0.4392156862745098,0.396078431372549,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9764705882352941,0.5725490196078431,0.25882352941176473,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9764705882352941,0.7686274509803922,0.2549019607843137,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9098039215686274,0.9803921568627451,0.3568627450980392,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,turbidity=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.13333333333333333,0.12156862745098039,0.10588235294117647,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.2549019607843137,0.19607843137254902,0.1607843137254902,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3843137254901961,0.27058823529411763,0.20392156862745098,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5137254901960784,0.34901960784313724,0.2235294117647059,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.6313725490196078,0.4392156862745098,0.23137254901960785,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.7254901960784313,0.5490196078431373,0.25882352941176473,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.792156862745098,0.6823529411764706,0.34509803921568627,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.8470588235294118,0.8196078431372549,0.49411764705882355,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9137254901960784,0.9647058823529412,0.6705882352941176,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,velocity_blue=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.06666666666666667,0.12549019607843137,0.25098039215686274,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.13725490196078433,0.20392156862745098,0.4549019607843137,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.11372549019607843,0.3176470588235294,0.611764705882353,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.12156862745098039,0.44313725490196076,0.6352941176470588,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.19607843137254902,0.5647058823529412,0.6627450980392157,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.3411764705882353,0.6784313725490196,0.6901960784313725,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.5843137254901961,0.7686274509803922,0.7411764705882353,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.796078431372549,0.8666666666666667,0.8274509803921568,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.996078431372549,0.984313725490196,0.9019607843137255,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,velocity_green=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.09019607843137255,0.13725490196078433,0.07450980392156863,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.09411764705882353,0.25098039215686274,0.14901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.043137254901960784,0.37254901960784315,0.17647058823529413,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.15294117647058825,0.4823529411764706,0.13725490196078433,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.37254901960784315,0.5725490196078431,0.047058823529411764,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.596078431372549,0.6470588235294118,0.07058823529411765,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.788235294117647,0.7294117647058823,0.27058823529411763,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9137254901960784,0.8470588235294118,0.5372549019607843,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,0.9921568627450981,0.803921568627451,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,viridis$1=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,warm=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.6745098039215687,0,0.7333333333333333,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.8588235294117647,0,0.6666666666666666,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(1,0,0.5098039215686274,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(1,0.24705882352941178,0.2901960784313726,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(1,0.4823529411764706,0,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9176470588235294,0.6901960784313725,0,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7450980392156863,0.8941176470588236,0,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.5764705882352941,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,winter=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,1,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(0,1,0.5019607843137255,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,yignbu=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.03137254901960784,0.11372549019607843,0.34509803921568627,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0.1450980392156863,0.20392156862745098,0.5803921568627451,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.13333333333333333,0.3686274509803922,0.6588235294117647,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0.11372549019607843,0.5686274509803921,0.7529411764705882,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.2549019607843137,0.7137254901960784,0.7686274509803922,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.4980392156862745,0.803921568627451,0.7333333333333333,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.7803921568627451,0.9137254901960784,0.7058823529411765,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(0.9294117647058824,0.9725490196078431,0.8509803921568627,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,1,0.8509803921568627,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,yiorrd=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.5019607843137255,0,0.14901960784313725,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0.7411764705882353,0,0.14901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.8901960784313725,0.10196078431372549,0.10980392156862745,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0.9882352941176471,0.3058823529411765,0.16470588235294117,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.9921568627450981,0.5529411764705883,0.23529411764705882,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.996078431372549,0.6980392156862745,0.2980392156862745,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.996078431372549,0.8509803921568627,0.4627450980392157,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(1,0.9294117647058824,0.6274509803921569,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,1,0.8,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,cmaps={__proto__:null,alpha,autumn,bathymetry,blackbody,bluered,bone,cdom,chlorophyll,cool,copper,cubehelix,density,earth,electric,freesurface_blue,freesurface_red,greens,greys,hot,hsv,inferno,jet,magma,oxygen,par,phase,picnic,plasma,portland,rainbow,rainbow_soft,rdbu,salinity,spring,summer,temperature,turbidity,velocity_blue,velocity_green,viridis:viridis$1,warm,winter,yignbu,yiorrd};function colormapModuleFactory(d,s){return{name:`additive-colormap-${d}`,fs:`uniform float opacity;
uniform bool useTransparentColor;

${apply_transparent_color}
${s}

vec4 colormap(float intensity) {
  return vec4(apply_transparent_color(apply_cmap(min(1.,intensity)).xyz, apply_cmap(0.).xyz, useTransparentColor, opacity));
}`,inject:{"fs:DECKGL_MUTATE_COLOR":`  float intensityCombo = 0.;
  intensityCombo += max(0.,intensity0);
  intensityCombo += max(0.,intensity1);
  intensityCombo += max(0.,intensity2);
  intensityCombo += max(0.,intensity3);
  intensityCombo += max(0.,intensity4);
  intensityCombo += max(0.,intensity5);
  rgba = colormap(intensityCombo);`}}}const defaultProps$4$1={colormap:{type:"string",value:"viridis",compare:!0},opacity:{type:"number",value:1,compare:!0},useTransparentColor:{type:"boolean",value:!1,compare:!0}},AdditiveColormapExtension=class extends LayerExtension{getShaders(){var f;const d=((f=this==null?void 0:this.props)==null?void 0:f.colormap)||defaultProps$4$1.colormap.value,s=cmaps[d];if(!s)throw Error(`No colormap named ${d} found in registry`);return{modules:[colormapModuleFactory(d,s)]}}updateState({props:d,oldProps:s,changeFlags:f,..._}){if(super.updateState({props:d,oldProps:s,changeFlags:f,..._}),d.colormap!==s.colormap){const{device:S}=this.context;this.state.model&&(this.state.model.destroy(),this.setState({model:this._getModel(S)}))}}draw(){var _;const{useTransparentColor:d=defaultProps$4$1.useTransparentColor.value,opacity:s=defaultProps$4$1.opacity.value}=this.props,f={opacity:s,useTransparentColor:d};(_=this.state.model)==null||_.setUniforms(f)}};AdditiveColormapExtension.extensionName="AdditiveColormapExtension";AdditiveColormapExtension.defaultProps=defaultProps$4$1;function padWithDefault$1(d,s,f){for(let _=0;_<f;_+=1)d.push(s);return d}const COLOR_PALETTE=[[0,0,255],[0,255,0],[255,0,255],[255,255,0],[255,128,0],[0,255,255],[255,255,255],[255,0,0]];function getDefaultPalette(d){if(d>COLOR_PALETTE.length)throw new Error("Too many colors");return COLOR_PALETTE.slice(0,d)}function padColors({colors:d,channelsVisible:s}){const f=d.map((T,F)=>s[F]?T.map(M=>M/MAX_COLOR_INTENSITY):DEFAULT_COLOR_OFF),_=MAX_CHANNELS-f.length;return padWithDefault$1(f,DEFAULT_COLOR_OFF,_).reduce((T,F)=>T.concat(F),[])}const fs$1$2=`uniform vec3 transparentColor;
uniform bool useTransparentColor;
uniform float opacity;

uniform vec3 colors[6];

${apply_transparent_color}

void mutate_color(inout vec3 rgb, float intensity0, float intensity1, float intensity2, float intensity3, float intensity4, float intensity5) { 
  rgb += max(0.0, min(1.0, intensity0)) * vec3(colors[0]);
  rgb += max(0.0, min(1.0, intensity1)) * vec3(colors[1]);
  rgb += max(0.0, min(1.0, intensity2)) * vec3(colors[2]);
  rgb += max(0.0, min(1.0, intensity3)) * vec3(colors[3]);
  rgb += max(0.0, min(1.0, intensity4)) * vec3(colors[4]);
  rgb += max(0.0, min(1.0, intensity5)) * vec3(colors[5]);
}

vec4 apply_opacity(vec3 rgb) {
  return vec4(apply_transparent_color(rgb, transparentColor, useTransparentColor, opacity));
}
`,DECKGL_MUTATE_COLOR=`vec3 rgb = rgba.rgb;
mutate_color(rgb, intensity0, intensity1, intensity2, intensity3, intensity4, intensity5);
rgba = apply_opacity(rgb);
`,colorPalette={name:"color-palette-module",fs:fs$1$2,inject:{"fs:DECKGL_MUTATE_COLOR":DECKGL_MUTATE_COLOR}},defaultProps$3$2={colors:{type:"array",value:null,compare:!0},opacity:{type:"number",value:1,compare:!0},transparentColor:{type:"array",value:null,compare:!0},useTransparentColor:{type:"boolean",value:!1,compare:!0}},ColorPaletteExtension=class extends LayerExtension{getShaders(){return{...super.getShaders(),modules:[colorPalette]}}draw(){var M;const{colors:d,channelsVisible:s,opacity:f=defaultProps$3$2.opacity.value,transparentColor:_=defaultProps$3$2.transparentColor.value,useTransparentColor:S=defaultProps$3$2.useTransparentColor.value}=this.props,F={colors:padColors({channelsVisible:s||this.selections.map(()=>!0),colors:d||getDefaultPalette(this.props.selections.length)}),opacity:f,transparentColor:(_||[0,0,0]).map(P=>P/255),useTransparentColor:!!S};(M=this.state.model)==null||M.setUniforms(F)}};ColorPaletteExtension.extensionName="ColorPaletteExtension";ColorPaletteExtension.defaultProps=defaultProps$3$2;const fs$c=`// lens bounds for ellipse
uniform float majorLensAxis;
uniform float minorLensAxis;
uniform vec2 lensCenter;

// lens uniforms
uniform bool lensEnabled;
uniform int lensSelection;
uniform vec3 lensBorderColor;
uniform float lensBorderRadius;

// color palette
uniform vec3 colors[6];

bool frag_in_lens_bounds(vec2 vTexCoord) {
  // Check membership in what is (not visually, but effectively) an ellipse.
  // Since the fragment space is a unit square and the real coordinates could be longer than tall,
  // to get a circle visually we have to treat the check as that of an ellipse to get the effect of a circle.

  // Check membership in ellipse.
  return pow((lensCenter.x - vTexCoord.x) / majorLensAxis, 2.) + pow((lensCenter.y - vTexCoord.y) / minorLensAxis, 2.) < (1. - lensBorderRadius);
}

bool frag_on_lens_bounds(vec2 vTexCoord) {
  // Same as the above, except this checks the boundary.

  float ellipseDistance = pow((lensCenter.x - vTexCoord.x) / majorLensAxis, 2.) + pow((lensCenter.y - vTexCoord.y) / minorLensAxis, 2.);

  // Check membership on "bourndary" of ellipse.
  return ellipseDistance <= 1. && ellipseDistance >= (1. - lensBorderRadius);
}
// Return a float for boolean arithmetic calculation.
float get_use_color_float(vec2 vTexCoord, int channelIndex) {
  bool isFragInLensBounds = frag_in_lens_bounds(vTexCoord);
  bool inLensAndUseLens = lensEnabled && isFragInLensBounds;
  return float(int((inLensAndUseLens && channelIndex == lensSelection) || (!inLensAndUseLens)));
 
}
void mutate_color(inout vec3 rgb, float intensity0, float intensity1, float intensity2, float intensity3, float intensity4, float intensity5, vec2 vTexCoord){
  float useColorValue = 0.;

  useColorValue = get_use_color_float(vTexCoord, 0);
  rgb += max(0., min(1., intensity0)) * max(vec3(colors[0]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 1);
  rgb += max(0., min(1., intensity1)) * max(vec3(colors[1]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 2);
  rgb += max(0., min(1., intensity2)) * max(vec3(colors[2]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 3);
  rgb += max(0., min(1., intensity3)) * max(vec3(colors[3]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 4);
  rgb += max(0., min(1., intensity4)) * max(vec3(colors[4]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 5);
  rgb += max(0., min(1., intensity5)) * max(vec3(colors[5]), (1. - useColorValue) * vec3(1., 1., 1.));
}
`,lens={name:"lens-module",fs:fs$c,inject:{"fs:DECKGL_MUTATE_COLOR":`
   vec3 rgb = rgba.rgb;
   mutate_color(rgb, intensity0, intensity1, intensity2, intensity3, intensity4, intensity5, vTexCoord);
   rgba = vec4(rgb, 1.);
  `,"fs:#main-end":`
      bool isFragOnLensBounds = frag_on_lens_bounds(vTexCoord);
      fragColor = (lensEnabled && isFragOnLensBounds) ? vec4(lensBorderColor, 1.) : fragColor;
  `}},defaultProps$2$2={lensEnabled:{type:"boolean",value:!1,compare:!0},lensSelection:{type:"number",value:0,compare:!0},lensRadius:{type:"number",value:100,compare:!0},lensBorderColor:{type:"array",value:[255,255,255],compare:!0},lensBorderRadius:{type:"number",value:.02,compare:!0},colors:{type:"array",value:null,compare:!0}},LensExtension=class extends LayerExtension{getShaders(){return{...super.getShaders(),modules:[lens]}}initializeState(){const d=this.getCurrentLayer();if(d.isComposite)return;const s=()=>{const{viewportId:f}=d.props,{lensRadius:_=defaultProps$2$2.lensRadius.value}=this.props;if(!f){d.setState({unprojectLensBounds:[0,0,0,0]});return}const{mousePosition:S}=d.context,T=d.context.deck.viewManager.views.filter(P=>P.id===f)[0],F=d.context.deck.viewManager.viewState[f],M=T.makeViewport({...F,viewState:F});if(S&&M.containsPixel(S)){const P={x:S.x-M.x,y:S.y-M.y},J=[[P.x-_,P.y],[P.x,P.y+_],[P.x+_,P.y],[P.x,P.y-_]].map((K,oe)=>M.unproject(K)[oe%2]);d.setState({unprojectLensBounds:J})}else d.setState({unprojectLensBounds:[0,0,0,0]})};this.context.deck&&this.context.deck.eventManager.on({pointermove:s,pointerleave:s,wheel:s}),this.setState({onMouseMove:s,unprojectLensBounds:[0,0,0,0]})}draw(){var Me;const{unprojectLensBounds:d=[0,0,0,0]}=this.state,{bounds:s,lensEnabled:f=defaultProps$2$2.lensEnabled.value,lensSelection:_=defaultProps$2$2.lensSelection.value,lensBorderColor:S=defaultProps$2$2.lensBorderColor.value,lensBorderRadius:T=defaultProps$2$2.lensBorderRadius.value,colors:F,channelsVisible:M}=this.props,[P,H,J,K]=d,[oe,se,ae,ge]=s,he=(P-oe)/(ae-oe),Be=(H-ge)/(se-ge),pe=(J-oe)/(ae-oe),be=(K-ge)/(se-ge),Re=padColors({channelsVisible:M||this.selections.map(()=>!0),colors:F||getDefaultPalette(this.props.selections.length)}),Fe={majorLensAxis:(pe-he)/2,minorLensAxis:(Be-be)/2,lensCenter:[(pe+he)/2,(Be+be)/2],lensEnabled:f,lensSelection:_,lensBorderColor:S,lensBorderRadius:T,colors:Re};(Me=this.state.model)==null||Me.setUniforms(Fe)}finalizeState(){var d,s,f;this.context.deck&&this.context.deck.eventManager.off({pointermove:(d=this.state)==null?void 0:d.onMouseMove,pointerleave:(s=this.state)==null?void 0:s.onMouseMove,wheel:(f=this.state)==null?void 0:f.onMouseMove})}};LensExtension.extensionName="LensExtension";LensExtension.defaultProps=defaultProps$2$2;function colormapModuleFactory3D(d,s){const f=`${s}

vec4 colormap(float intensity, float opacity) {
  return vec4(apply_cmap(min(1.,intensity)).xyz, opacity);
}`;return{name:`additive-colormap-3d-${d}`,fs:f}}const defaultProps$1$2={colormap:{type:"string",value:"viridis",compare:!0}},BaseExtension$1=class extends LayerExtension{constructor(...s){super(s),this.opts=this.opts||{}}getShaders(){var _;const s=((_=this==null?void 0:this.props)==null?void 0:_.colormap)||defaultProps$1$2.colormap.value,f=cmaps[s];return{...super.getShaders(),modules:[colormapModuleFactory3D(s,f)]}}updateState({props:s,oldProps:f,changeFlags:_,...S}){if(super.updateState({props:s,oldProps:f,changeFlags:_,...S}),s.colormap!==f.colormap){const{device:T}=this.context;this.state.model&&(this.state.model.destroy(),this.setState({model:this._getModel(T)}))}}};BaseExtension$1.extensionName="BaseExtension";BaseExtension$1.defaultProps=defaultProps$1$2;const _BEFORE_RENDER$5="",_RENDER$5=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);
  float total = 0.0;

  for(int i = 0; i < 6; i++) {
    total += intensityArray[i];
  }
  // Do not go past 1 in opacity/colormap value.
  total = min(total, 1.0);

  vec4 val_color = colormap(total, total);

  // Opacity correction
  val_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);
  color.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;
  color.a += (1.0 - color.a) * val_color.a;
  if (color.a >= 0.95) {
    break;
  }
  p += ray_dir * dt;
`,_AFTER_RENDER$5="",AdditiveBlendExtension$1=class extends BaseExtension$1{constructor(s){super(s),this.rendering={_BEFORE_RENDER:_BEFORE_RENDER$5,_RENDER:_RENDER$5,_AFTER_RENDER:_AFTER_RENDER$5}}};AdditiveBlendExtension$1.extensionName="AdditiveBlendExtension";const _BEFORE_RENDER$4=`  float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);
`,_RENDER$4=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] > maxVals[i]) {
      maxVals[i] = intensityArray[i];
    }
  }
`,_AFTER_RENDER$4=`  float total = 0.0;
  for(int i = 0; i < 6; i++) {
    total += maxVals[i];
  }
  // Do not go past 1 in opacity/colormap value.
  total = min(total, 1.0);
  color = colormap(total, total);
`,MaximumIntensityProjectionExtension$1=class extends BaseExtension$1{constructor(s){super(s),this.rendering={_BEFORE_RENDER:_BEFORE_RENDER$4,_RENDER:_RENDER$4,_AFTER_RENDER:_AFTER_RENDER$4}}};MaximumIntensityProjectionExtension$1.extensionName="MaximumIntensityProjectionExtension";const _BEFORE_RENDER$3=`  float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);
`,_RENDER$3=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] < minVals[i]) {
      minVals[i] = intensityArray[i];
    }
  }
`,_AFTER_RENDER$3=`  float total = 0.0;
  for(int i = 0; i < 6; i++) {
    total += minVals[i];
  }
  // Do not go past 1 in opacity/colormap value.
  total = min(total, 1.0);
  color = colormap(total, total);
`,MinimumIntensityProjectionExtension$1=class extends BaseExtension$1{constructor(s){super(s),this.rendering={_BEFORE_RENDER:_BEFORE_RENDER$3,_RENDER:_RENDER$3,_AFTER_RENDER:_AFTER_RENDER$3}}};MinimumIntensityProjectionExtension$1.extensionName="MinimumIntensityProjectionExtension";const defaultProps$m={colors:{type:"array",value:null,compare:!0}},BaseExtension=class extends LayerExtension{constructor(...d){super(d),this.opts=this.opts||{}}draw(){var S;const{colors:d,channelsVisible:s}=this.props,_={colors:padColors({channelsVisible:s||this.selections.map(()=>!0),colors:d||getDefaultPalette(this.props.selections.length)})};(S=this.state.model)==null||S.setUniforms(_)}};BaseExtension.extensionName="BaseExtension";BaseExtension.defaultProps=defaultProps$m;const _BEFORE_RENDER$2="",_RENDER$2=`  vec3 rgbCombo = vec3(0.0);
  vec3 hsvCombo = vec3(0.0);
  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);
  float total = 0.0;
  for(int i = 0; i < 6; i++) {
    float intensityValue = intensityArray[i];
    rgbCombo += max(0.0, min(1.0, intensityValue)) * colors[i];
    total += intensityValue;
  }
  // Do not go past 1 in opacity.
  total = min(total, 1.0);
  vec4 val_color = vec4(rgbCombo, total);
  // Opacity correction
  val_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);
  color.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;
  color.a += (1.0 - color.a) * val_color.a;
  if (color.a >= 0.95) {
    break;
  }
`,_AFTER_RENDER$2="",AdditiveBlendExtension=class extends BaseExtension{constructor(d){super(d),this.rendering={_BEFORE_RENDER:_BEFORE_RENDER$2,_RENDER:_RENDER$2,_AFTER_RENDER:_AFTER_RENDER$2}}};AdditiveBlendExtension.extensionName="AdditiveBlendExtension";const _BEFORE_RENDER$1=`  float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);
`,_RENDER$1=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] > maxVals[i]) {
      maxVals[i] = intensityArray[i];
    }
  }
`,_AFTER_RENDER$1=`  vec3 rgbCombo = vec3(0.0);
  for(int i = 0; i < 6; i++) {
    rgbCombo += max(0.0, min(1.0, maxVals[i])) * vec3(colors[i]);
  }
  color = vec4(rgbCombo, 1.0);
`,MaximumIntensityProjectionExtension=class extends BaseExtension{constructor(d){super(d),this.rendering={_BEFORE_RENDER:_BEFORE_RENDER$1,_RENDER:_RENDER$1,_AFTER_RENDER:_AFTER_RENDER$1}}};MaximumIntensityProjectionExtension.extensionName="MaximumIntensityProjectionExtension";const _BEFORE_RENDER=`  float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);
`,_RENDER=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] < minVals[i]) {
      minVals[i] = intensityArray[i];
    }
  }
`,_AFTER_RENDER=`  vec3 rgbCombo = vec3(0.0);
  for(int i = 0; i < 6; i++) {
    rgbCombo += max(0.0, min(1.0, minVals[i])) * vec3(colors[i]);
  }
  color = vec4(rgbCombo, 1.0);
`,MinimumIntensityProjectionExtension=class extends BaseExtension{constructor(d){super(d),this.rendering={_BEFORE_RENDER,_RENDER,_AFTER_RENDER}}};MinimumIntensityProjectionExtension.extensionName="MinimumIntensityProjectionExtension";const ColorPalette3DExtensions={BaseExtension,AdditiveBlendExtension,MaximumIntensityProjectionExtension,MinimumIntensityProjectionExtension};function uncurryThis(d){return(s,...f)=>ReflectApply(d,s,f)}function uncurryThisGetter(d,s){return uncurryThis(ReflectGetOwnPropertyDescriptor(d,s).get)}const{apply:ReflectApply,construct:ReflectConstruct,defineProperty:ReflectDefineProperty,get:ReflectGet,getOwnPropertyDescriptor:ReflectGetOwnPropertyDescriptor,getPrototypeOf:ReflectGetPrototypeOf,has:ReflectHas,ownKeys:ReflectOwnKeys,set:ReflectSet,setPrototypeOf:ReflectSetPrototypeOf}=Reflect,{iterator:SymbolIterator,species:SymbolSpecies,toStringTag:SymbolToStringTag,for:SymbolFor}=Symbol,NativeObject=Object,{create:ObjectCreate,defineProperty:ObjectDefineProperty,freeze:ObjectFreeze,is:ObjectIs}=NativeObject,NativeArray=Array,ArrayPrototype=NativeArray.prototype,NativeArrayPrototypeSymbolIterator=ArrayPrototype[SymbolIterator],ArrayPrototypeSymbolIterator=uncurryThis(NativeArrayPrototypeSymbolIterator),NativeArrayBuffer=ArrayBuffer,ArrayBufferPrototype=NativeArrayBuffer.prototype;uncurryThisGetter(ArrayBufferPrototype,"byteLength");const NativeSharedArrayBuffer=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;NativeSharedArrayBuffer&&uncurryThisGetter(NativeSharedArrayBuffer.prototype,"byteLength");const TypedArray=ReflectGetPrototypeOf(Uint8Array);TypedArray.from;const TypedArrayPrototype=TypedArray.prototype;TypedArrayPrototype[SymbolIterator];uncurryThis(TypedArrayPrototype.keys);uncurryThis(TypedArrayPrototype.values);uncurryThis(TypedArrayPrototype.entries);uncurryThis(TypedArrayPrototype.set);uncurryThis(TypedArrayPrototype.reverse);uncurryThis(TypedArrayPrototype.fill);uncurryThis(TypedArrayPrototype.copyWithin);uncurryThis(TypedArrayPrototype.sort);uncurryThis(TypedArrayPrototype.slice);uncurryThis(TypedArrayPrototype.subarray);uncurryThisGetter(TypedArrayPrototype,"buffer");uncurryThisGetter(TypedArrayPrototype,"byteOffset");uncurryThisGetter(TypedArrayPrototype,"length");uncurryThisGetter(TypedArrayPrototype,SymbolToStringTag);const NativeUint8Array=Uint8Array,NativeUint16Array=Uint16Array,NativeUint32Array=Uint32Array,NativeFloat32Array=Float32Array,ArrayIteratorPrototype=ReflectGetPrototypeOf([][SymbolIterator]()),ArrayIteratorPrototypeNext=uncurryThis(ArrayIteratorPrototype.next),GeneratorPrototypeNext=uncurryThis(function*(){}().next),IteratorPrototype=ReflectGetPrototypeOf(ArrayIteratorPrototype),DataViewPrototype=DataView.prototype,DataViewPrototypeGetUint16=uncurryThis(DataViewPrototype.getUint16),NativeWeakMap=WeakMap,WeakMapPrototype=NativeWeakMap.prototype,WeakMapPrototypeGet=uncurryThis(WeakMapPrototype.get),WeakMapPrototypeSet=uncurryThis(WeakMapPrototype.set),arrayIterators=new NativeWeakMap,SafeIteratorPrototype=ObjectCreate(null,{next:{value:function d(){const s=WeakMapPrototypeGet(arrayIterators,this);return ArrayIteratorPrototypeNext(s)}},[SymbolIterator]:{value:function d(){return this}}});function safeIfNeeded(d){if(d[SymbolIterator]===NativeArrayPrototypeSymbolIterator&&ArrayIteratorPrototype.next===ArrayIteratorPrototypeNext)return d;const s=ObjectCreate(SafeIteratorPrototype);return WeakMapPrototypeSet(arrayIterators,s,ArrayPrototypeSymbolIterator(d)),s}const generators=new NativeWeakMap,DummyArrayIteratorPrototype=ObjectCreate(IteratorPrototype,{next:{value:function d(){const s=WeakMapPrototypeGet(generators,this);return GeneratorPrototypeNext(s)},writable:!0,configurable:!0}});for(const d of ReflectOwnKeys(ArrayIteratorPrototype))d!=="next"&&ObjectDefineProperty(DummyArrayIteratorPrototype,d,ReflectGetOwnPropertyDescriptor(ArrayIteratorPrototype,d));const buffer$1=new NativeArrayBuffer(4),floatView=new NativeFloat32Array(buffer$1),uint32View=new NativeUint32Array(buffer$1),baseTable=new NativeUint16Array(512),shiftTable=new NativeUint8Array(512);for(let d=0;d<256;++d){const s=d-127;s<-24?(baseTable[d]=0,baseTable[d|256]=32768,shiftTable[d]=24,shiftTable[d|256]=24):s<-14?(baseTable[d]=1024>>-s-14,baseTable[d|256]=1024>>-s-14|32768,shiftTable[d]=-s-1,shiftTable[d|256]=-s-1):s<=15?(baseTable[d]=s+15<<10,baseTable[d|256]=s+15<<10|32768,shiftTable[d]=13,shiftTable[d|256]=13):s<128?(baseTable[d]=31744,baseTable[d|256]=64512,shiftTable[d]=24,shiftTable[d|256]=24):(baseTable[d]=31744,baseTable[d|256]=64512,shiftTable[d]=13,shiftTable[d|256]=13)}const mantissaTable=new NativeUint32Array(2048);for(let d=1;d<1024;++d){let s=d<<13,f=0;for(;!(s&8388608);)s<<=1,f-=8388608;s&=-8388609,f+=947912704,mantissaTable[d]=s|f}for(let d=1024;d<2048;++d)mantissaTable[d]=939524096+(d-1024<<13);const exponentTable=new NativeUint32Array(64);for(let d=1;d<31;++d)exponentTable[d]=d<<23;exponentTable[31]=1199570944;exponentTable[32]=2147483648;for(let d=33;d<63;++d)exponentTable[d]=2147483648+(d-32<<23);exponentTable[63]=3347054592;const offsetTable=new NativeUint16Array(64);for(let d=1;d<64;++d)d!==32&&(offsetTable[d]=1024);function convertToNumber(d){const s=d>>10;return uint32View[0]=mantissaTable[offsetTable[s]+(d&1023)]+exponentTable[s],floatView[0]}function getFloat16(d,s,...f){return convertToNumber(DataViewPrototypeGetUint16(d,s,...safeIfNeeded(f)))}var getAttribute$2={exports:{}};function getAttribute(d,s,f){const _=f&&f.debug||!1;_&&console.log("[xml-utils] getting "+s+" in "+d);const S=typeof d=="object"?d.outer:d,T=S.slice(0,S.indexOf(">")+1),F=['"',"'"];for(let M=0;M<F.length;M++){const P=F[M],H=s+"\\="+P+"([^"+P+"]*)"+P;_&&console.log("[xml-utils] pattern:",H);const K=new RegExp(H).exec(T);if(_&&console.log("[xml-utils] match:",K),K)return K[1]}}getAttribute$2.exports=getAttribute;getAttribute$2.exports.default=getAttribute;var getAttributeExports=getAttribute$2.exports;const getAttribute$1=getDefaultExportFromCjs(getAttributeExports);var findTagsByName$2={exports:{}},findTagByName$2={exports:{}},indexOfMatch$2={exports:{}};function indexOfMatch$1(d,s,f){const S=new RegExp(s).exec(d.slice(f));return S?f+S.index:-1}indexOfMatch$2.exports=indexOfMatch$1;indexOfMatch$2.exports.default=indexOfMatch$1;var indexOfMatchExports=indexOfMatch$2.exports,indexOfMatchEnd$2={exports:{}};function indexOfMatchEnd$1(d,s,f){const S=new RegExp(s).exec(d.slice(f));return S?f+S.index+S[0].length-1:-1}indexOfMatchEnd$2.exports=indexOfMatchEnd$1;indexOfMatchEnd$2.exports.default=indexOfMatchEnd$1;var indexOfMatchEndExports=indexOfMatchEnd$2.exports,countSubstring$2={exports:{}};function countSubstring$1(d,s){const f=new RegExp(s,"g"),_=d.match(f);return _?_.length:0}countSubstring$2.exports=countSubstring$1;countSubstring$2.exports.default=countSubstring$1;var countSubstringExports=countSubstring$2.exports;const indexOfMatch=indexOfMatchExports,indexOfMatchEnd=indexOfMatchEndExports,countSubstring=countSubstringExports;function findTagByName$1(d,s,f){const _=f&&f.debug||!1,S=!(f&&typeof f.nested===!1),T=f&&f.startIndex||0;_&&console.log("[xml-utils] starting findTagByName with",s," and ",f);const F=indexOfMatch(d,`<${s}[ 
>/]`,T);if(_&&console.log("[xml-utils] start:",F),F===-1)return;const M=d.slice(F+s.length);let P=indexOfMatchEnd(M,"^[^<]*[ /]>",0);const H=P!==-1&&M[P-1]==="/";if(_&&console.log("[xml-utils] selfClosing:",H),H===!1)if(S){let se=0,ae=1,ge=0;for(;(P=indexOfMatchEnd(M,"[ /]"+s+">",se))!==-1;){const he=M.substring(se,P+1);if(ae+=countSubstring(he,"<"+s+`[ 
	>]`),ge+=countSubstring(he,"</"+s+">"),ge>=ae)break;se=P}}else P=indexOfMatchEnd(M,"[ /]"+s+">",0);const J=F+s.length+P+1;if(_&&console.log("[xml-utils] end:",J),J===-1)return;const K=d.slice(F,J);let oe;return H?oe=null:oe=K.slice(K.indexOf(">")+1,K.lastIndexOf("<")),{inner:oe,outer:K,start:F,end:J}}findTagByName$2.exports=findTagByName$1;findTagByName$2.exports.default=findTagByName$1;var findTagByNameExports=findTagByName$2.exports;const findTagByName=findTagByNameExports;function findTagsByName(d,s,f){const _=[],S=f&&f.debug||!1,T=f&&typeof f.nested=="boolean"?f.nested:!0;let F=f&&f.startIndex||0,M;for(;M=findTagByName(d,s,{debug:S,startIndex:F});)T?F=M.start+1+s.length:F=M.end,_.push(M);return S&&console.log("findTagsByName found",_.length,"tags"),_}findTagsByName$2.exports=findTagsByName;findTagsByName$2.exports.default=findTagsByName;var findTagsByNameExports=findTagsByName$2.exports;const findTagsByName$1=getDefaultExportFromCjs(findTagsByNameExports),fieldTagNames={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},fieldTags={};for(const d in fieldTagNames)fieldTagNames.hasOwnProperty(d)&&(fieldTags[fieldTagNames[d]]=parseInt(d,10));const arrayFields=[fieldTags.BitsPerSample,fieldTags.ExtraSamples,fieldTags.SampleFormat,fieldTags.StripByteCounts,fieldTags.StripOffsets,fieldTags.StripRowCounts,fieldTags.TileByteCounts,fieldTags.TileOffsets,fieldTags.SubIFDs],fieldTypeNames={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},fieldTypes={};for(const d in fieldTypeNames)fieldTypeNames.hasOwnProperty(d)&&(fieldTypes[fieldTypeNames[d]]=parseInt(d,10));const photometricInterpretations={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},ExtraSamplesValues={Unspecified:0,Assocalpha:1,Unassalpha:2},LercParameters={Version:0,AddCompression:1},LercAddCompression={None:0,Deflate:1,Zstandard:2},geoKeyNames={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function fromWhiteIsZero(d,s){const{width:f,height:_}=d,S=new Uint8Array(f*_*3);let T;for(let F=0,M=0;F<d.length;++F,M+=3)T=256-d[F]/s*256,S[M]=T,S[M+1]=T,S[M+2]=T;return S}function fromBlackIsZero(d,s){const{width:f,height:_}=d,S=new Uint8Array(f*_*3);let T;for(let F=0,M=0;F<d.length;++F,M+=3)T=d[F]/s*256,S[M]=T,S[M+1]=T,S[M+2]=T;return S}function fromPalette(d,s){const{width:f,height:_}=d,S=new Uint8Array(f*_*3),T=s.length/3,F=s.length/3*2;for(let M=0,P=0;M<d.length;++M,P+=3){const H=d[M];S[P]=s[H]/65536*256,S[P+1]=s[H+T]/65536*256,S[P+2]=s[H+F]/65536*256}return S}function fromCMYK(d){const{width:s,height:f}=d,_=new Uint8Array(s*f*3);for(let S=0,T=0;S<d.length;S+=4,T+=3){const F=d[S],M=d[S+1],P=d[S+2],H=d[S+3];_[T]=255*((255-F)/256)*((255-H)/256),_[T+1]=255*((255-M)/256)*((255-H)/256),_[T+2]=255*((255-P)/256)*((255-H)/256)}return _}function fromYCbCr(d){const{width:s,height:f}=d,_=new Uint8ClampedArray(s*f*3);for(let S=0,T=0;S<d.length;S+=3,T+=3){const F=d[S],M=d[S+1],P=d[S+2];_[T]=F+1.402*(P-128),_[T+1]=F-.34414*(M-128)-.71414*(P-128),_[T+2]=F+1.772*(M-128)}return _}const Xn=.95047,Yn=1,Zn=1.08883;function fromCIELab(d){const{width:s,height:f}=d,_=new Uint8Array(s*f*3);for(let S=0,T=0;S<d.length;S+=3,T+=3){const F=d[S+0],M=d[S+1]<<24>>24,P=d[S+2]<<24>>24;let H=(F+16)/116,J=M/500+H,K=H-P/200,oe,se,ae;J=Xn*(J*J*J>.008856?J*J*J:(J-16/116)/7.787),H=Yn*(H*H*H>.008856?H*H*H:(H-16/116)/7.787),K=Zn*(K*K*K>.008856?K*K*K:(K-16/116)/7.787),oe=J*3.2406+H*-1.5372+K*-.4986,se=J*-.9689+H*1.8758+K*.0415,ae=J*.0557+H*-.204+K*1.057,oe=oe>.0031308?1.055*oe**(1/2.4)-.055:12.92*oe,se=se>.0031308?1.055*se**(1/2.4)-.055:12.92*se,ae=ae>.0031308?1.055*ae**(1/2.4)-.055:12.92*ae,_[T]=Math.max(0,Math.min(1,oe))*255,_[T+1]=Math.max(0,Math.min(1,se))*255,_[T+2]=Math.max(0,Math.min(1,ae))*255}return _}const registry$1=new Map;function addDecoder(d,s){Array.isArray(d)||(d=[d]),d.forEach(f=>registry$1.set(f,s))}async function getDecoder(d){const s=registry$1.get(d.Compression);if(!s)throw new Error(`Unknown compression method identifier: ${d.Compression}`);const f=await s();return new f(d)}addDecoder([void 0,1],()=>__vitePreload(()=>import("../assets/raw-2kFnxBIP.js"),__vite__mapDeps([2,1]),import.meta.url).then(d=>d.default));addDecoder(5,()=>__vitePreload(()=>import("../assets/lzw-DnRp0l5R.js"),__vite__mapDeps([3,1]),import.meta.url).then(d=>d.default));addDecoder(6,()=>{throw new Error("old style JPEG compression is not supported.")});addDecoder(7,()=>__vitePreload(()=>import("../assets/jpeg-B28hJXyV.js"),__vite__mapDeps([4,1]),import.meta.url).then(d=>d.default));addDecoder([8,32946],()=>__vitePreload(()=>import("../assets/deflate-B8DPtbGp.js"),__vite__mapDeps([5,6,1]),import.meta.url).then(d=>d.default));addDecoder(32773,()=>__vitePreload(()=>import("../assets/packbits-Hh4QBnsN.js"),__vite__mapDeps([7,1]),import.meta.url).then(d=>d.default));addDecoder(34887,()=>__vitePreload(()=>import("../assets/lerc-DD2M6mLq.js"),__vite__mapDeps([8,6,1]),import.meta.url).then(async d=>(await d.zstd.init(),d)).then(d=>d.default));addDecoder(50001,()=>__vitePreload(()=>import("../assets/webimage-BvFWweWT.js"),__vite__mapDeps([9,1]),import.meta.url).then(d=>d.default));function copyNewSize(d,s,f,_=1){return new(Object.getPrototypeOf(d)).constructor(s*f*_)}function resampleNearest(d,s,f,_,S){const T=s/_,F=f/S;return d.map(M=>{const P=copyNewSize(M,_,S);for(let H=0;H<S;++H){const J=Math.min(Math.round(F*H),f-1);for(let K=0;K<_;++K){const oe=Math.min(Math.round(T*K),s-1),se=M[J*s+oe];P[H*_+K]=se}}return P})}function lerp$1(d,s,f){return(1-f)*d+f*s}function resampleBilinear(d,s,f,_,S){const T=s/_,F=f/S;return d.map(M=>{const P=copyNewSize(M,_,S);for(let H=0;H<S;++H){const J=F*H,K=Math.floor(J),oe=Math.min(Math.ceil(J),f-1);for(let se=0;se<_;++se){const ae=T*se,ge=ae%1,he=Math.floor(ae),Be=Math.min(Math.ceil(ae),s-1),pe=M[K*s+he],be=M[K*s+Be],Re=M[oe*s+he],Fe=M[oe*s+Be],Me=lerp$1(lerp$1(pe,be,ge),lerp$1(Re,Fe,ge),J%1);P[H*_+se]=Me}}return P})}function resample$2(d,s,f,_,S,T="nearest"){switch(T.toLowerCase()){case"nearest":return resampleNearest(d,s,f,_,S);case"bilinear":case"linear":return resampleBilinear(d,s,f,_,S);default:throw new Error(`Unsupported resampling method: '${T}'`)}}function resampleNearestInterleaved(d,s,f,_,S,T){const F=s/_,M=f/S,P=copyNewSize(d,_,S,T);for(let H=0;H<S;++H){const J=Math.min(Math.round(M*H),f-1);for(let K=0;K<_;++K){const oe=Math.min(Math.round(F*K),s-1);for(let se=0;se<T;++se){const ae=d[J*s*T+oe*T+se];P[H*_*T+K*T+se]=ae}}}return P}function resampleBilinearInterleaved(d,s,f,_,S,T){const F=s/_,M=f/S,P=copyNewSize(d,_,S,T);for(let H=0;H<S;++H){const J=M*H,K=Math.floor(J),oe=Math.min(Math.ceil(J),f-1);for(let se=0;se<_;++se){const ae=F*se,ge=ae%1,he=Math.floor(ae),Be=Math.min(Math.ceil(ae),s-1);for(let pe=0;pe<T;++pe){const be=d[K*s*T+he*T+pe],Re=d[K*s*T+Be*T+pe],Fe=d[oe*s*T+he*T+pe],Me=d[oe*s*T+Be*T+pe],ve=lerp$1(lerp$1(be,Re,ge),lerp$1(Fe,Me,ge),J%1);P[H*_*T+se*T+pe]=ve}}}return P}function resampleInterleaved(d,s,f,_,S,T,F="nearest"){switch(F.toLowerCase()){case"nearest":return resampleNearestInterleaved(d,s,f,_,S,T);case"bilinear":case"linear":return resampleBilinearInterleaved(d,s,f,_,S,T);default:throw new Error(`Unsupported resampling method: '${F}'`)}}function sum$3(d,s,f){let _=0;for(let S=s;S<f;++S)_+=d[S];return _}function arrayForType(d,s,f){switch(d){case 1:if(s<=8)return new Uint8Array(f);if(s<=16)return new Uint16Array(f);if(s<=32)return new Uint32Array(f);break;case 2:if(s===8)return new Int8Array(f);if(s===16)return new Int16Array(f);if(s===32)return new Int32Array(f);break;case 3:switch(s){case 16:case 32:return new Float32Array(f);case 64:return new Float64Array(f)}break}throw Error("Unsupported data format/bitsPerSample")}function needsNormalization(d,s){return(d===1||d===2)&&s<=32&&s%8===0?!1:!(d===3&&(s===16||s===32||s===64))}function normalizeArray(d,s,f,_,S,T,F){const M=new DataView(d),P=f===2?F*T:F*T*_,H=f===2?1:_,J=arrayForType(s,S,P),K=parseInt("1".repeat(S),2);if(s===1){let oe;f===1?oe=_*S:oe=S;let se=T*oe;se&7&&(se=se+7&-8);for(let ae=0;ae<F;++ae){const ge=ae*se;for(let he=0;he<T;++he){const Be=ge+he*H*S;for(let pe=0;pe<H;++pe){const be=Be+pe*S,Re=(ae*T+he)*H+pe,Fe=Math.floor(be/8),Me=be%8;if(Me+S<=8)J[Re]=M.getUint8(Fe)>>8-S-Me&K;else if(Me+S<=16)J[Re]=M.getUint16(Fe)>>16-S-Me&K;else if(Me+S<=24){const ve=M.getUint16(Fe)<<8|M.getUint8(Fe+2);J[Re]=ve>>24-S-Me&K}else J[Re]=M.getUint32(Fe)>>32-S-Me&K}}}}return J.buffer}class GeoTIFFImage{constructor(s,f,_,S,T,F){this.fileDirectory=s,this.geoKeys=f,this.dataView=_,this.littleEndian=S,this.tiles=T?{}:null,this.isTiled=!s.StripOffsets;const M=s.PlanarConfiguration;if(this.planarConfiguration=typeof M>"u"?1:M,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=F}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(s){return this.isTiled||(s+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-s*this.getTileHeight()}getBytesPerPixel(){let s=0;for(let f=0;f<this.fileDirectory.BitsPerSample.length;++f)s+=this.getSampleByteSize(f);return s}getSampleByteSize(s){if(s>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${s} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[s]/8)}getReaderForSample(s){const f=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[s]:1,_=this.fileDirectory.BitsPerSample[s];switch(f){case 1:if(_<=8)return DataView.prototype.getUint8;if(_<=16)return DataView.prototype.getUint16;if(_<=32)return DataView.prototype.getUint32;break;case 2:if(_<=8)return DataView.prototype.getInt8;if(_<=16)return DataView.prototype.getInt16;if(_<=32)return DataView.prototype.getInt32;break;case 3:switch(_){case 16:return function(S,T){return getFloat16(this,S,T)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(s=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[s]:1}getBitsPerSample(s=0){return this.fileDirectory.BitsPerSample[s]}getArrayForSample(s,f){const _=this.getSampleFormat(s),S=this.getBitsPerSample(s);return arrayForType(_,S,f)}async getTileOrStrip(s,f,_,S,T){const F=Math.ceil(this.getWidth()/this.getTileWidth()),M=Math.ceil(this.getHeight()/this.getTileHeight());let P;const{tiles:H}=this;this.planarConfiguration===1?P=f*F+s:this.planarConfiguration===2&&(P=_*F*M+f*F+s);let J,K;this.isTiled?(J=this.fileDirectory.TileOffsets[P],K=this.fileDirectory.TileByteCounts[P]):(J=this.fileDirectory.StripOffsets[P],K=this.fileDirectory.StripByteCounts[P]);const oe=(await this.source.fetch([{offset:J,length:K}],T))[0];let se;return H===null||!H[P]?(se=(async()=>{let ae=await S.decode(this.fileDirectory,oe);const ge=this.getSampleFormat(),he=this.getBitsPerSample();return needsNormalization(ge,he)&&(ae=normalizeArray(ae,ge,this.planarConfiguration,this.getSamplesPerPixel(),he,this.getTileWidth(),this.getBlockHeight(f))),ae})(),H!==null&&(H[P]=se)):se=H[P],{x:s,y:f,sample:_,data:await se}}async _readRaster(s,f,_,S,T,F,M,P,H){const J=this.getTileWidth(),K=this.getTileHeight(),oe=this.getWidth(),se=this.getHeight(),ae=Math.max(Math.floor(s[0]/J),0),ge=Math.min(Math.ceil(s[2]/J),Math.ceil(oe/J)),he=Math.max(Math.floor(s[1]/K),0),Be=Math.min(Math.ceil(s[3]/K),Math.ceil(se/K)),pe=s[2]-s[0];let be=this.getBytesPerPixel();const Re=[],Fe=[];for(let At=0;At<f.length;++At)this.planarConfiguration===1?Re.push(sum$3(this.fileDirectory.BitsPerSample,0,f[At])/8):Re.push(0),Fe.push(this.getReaderForSample(f[At]));const Me=[],{littleEndian:ve}=this;for(let At=he;At<Be;++At)for(let Ct=ae;Ct<ge;++Ct){let Rt;this.planarConfiguration===1&&(Rt=this.getTileOrStrip(Ct,At,0,T,H));for(let It=0;It<f.length;++It){const xt=It,wt=f[It];this.planarConfiguration===2&&(be=this.getSampleByteSize(wt),Rt=this.getTileOrStrip(Ct,At,wt,T,H));const Ft=Rt.then(jt=>{const ta=jt.data,Qn=new DataView(ta),ca=this.getBlockHeight(jt.y),Jn=jt.y*K,wA=jt.x*J,LA=Jn+ca,ZA=(jt.x+1)*J,xI=Fe[xt],cI=Math.min(ca,ca-(LA-s[3]),se-Jn),pI=Math.min(J,J-(ZA-s[2]),oe-wA);for(let aI=Math.max(0,s[1]-Jn);aI<cI;++aI)for(let nI=Math.max(0,s[0]-wA);nI<pI;++nI){const uA=(aI*J+nI)*be,aa=xI.call(Qn,uA+Re[xt],ve);let eA;S?(eA=(aI+Jn-s[1])*pe*f.length+(nI+wA-s[0])*f.length+xt,_[eA]=aa):(eA=(aI+Jn-s[1])*pe+nI+wA-s[0],_[xt][eA]=aa)}});Me.push(Ft)}}if(await Promise.all(Me),F&&s[2]-s[0]!==F||M&&s[3]-s[1]!==M){let At;return S?At=resampleInterleaved(_,s[2]-s[0],s[3]-s[1],F,M,f.length,P):At=resample$2(_,s[2]-s[0],s[3]-s[1],F,M,P),At.width=F,At.height=M,At}return _.width=F||s[2]-s[0],_.height=M||s[3]-s[1],_}async readRasters({window:s,samples:f=[],interleave:_,pool:S=null,width:T,height:F,resampleMethod:M,fillValue:P,signal:H}={}){const J=s||[0,0,this.getWidth(),this.getHeight()];if(J[0]>J[2]||J[1]>J[3])throw new Error("Invalid subsets");const K=J[2]-J[0],oe=J[3]-J[1],se=K*oe,ae=this.getSamplesPerPixel();if(!f||!f.length)for(let pe=0;pe<ae;++pe)f.push(pe);else for(let pe=0;pe<f.length;++pe)if(f[pe]>=ae)return Promise.reject(new RangeError(`Invalid sample index '${f[pe]}'.`));let ge;if(_){const pe=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,be=Math.max.apply(null,this.fileDirectory.BitsPerSample);ge=arrayForType(pe,be,se*f.length),P&&ge.fill(P)}else{ge=[];for(let pe=0;pe<f.length;++pe){const be=this.getArrayForSample(f[pe],se);Array.isArray(P)&&pe<P.length?be.fill(P[pe]):P&&!Array.isArray(P)&&be.fill(P),ge.push(be)}}const he=S||await getDecoder(this.fileDirectory);return await this._readRaster(J,f,ge,_,he,T,F,M,H)}async readRGB({window:s,interleave:f=!0,pool:_=null,width:S,height:T,resampleMethod:F,enableAlpha:M=!1,signal:P}={}){const H=s||[0,0,this.getWidth(),this.getHeight()];if(H[0]>H[2]||H[1]>H[3])throw new Error("Invalid subsets");const J=this.fileDirectory.PhotometricInterpretation;if(J===photometricInterpretations.RGB){let Be=[0,1,2];if(this.fileDirectory.ExtraSamples!==ExtraSamplesValues.Unspecified&&M){Be=[];for(let pe=0;pe<this.fileDirectory.BitsPerSample.length;pe+=1)Be.push(pe)}return this.readRasters({window:s,interleave:f,samples:Be,pool:_,width:S,height:T,resampleMethod:F,signal:P})}let K;switch(J){case photometricInterpretations.WhiteIsZero:case photometricInterpretations.BlackIsZero:case photometricInterpretations.Palette:K=[0];break;case photometricInterpretations.CMYK:K=[0,1,2,3];break;case photometricInterpretations.YCbCr:case photometricInterpretations.CIELab:K=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const oe={window:H,interleave:!0,samples:K,pool:_,width:S,height:T,resampleMethod:F,signal:P},{fileDirectory:se}=this,ae=await this.readRasters(oe),ge=2**this.fileDirectory.BitsPerSample[0];let he;switch(J){case photometricInterpretations.WhiteIsZero:he=fromWhiteIsZero(ae,ge);break;case photometricInterpretations.BlackIsZero:he=fromBlackIsZero(ae,ge);break;case photometricInterpretations.Palette:he=fromPalette(ae,se.ColorMap);break;case photometricInterpretations.CMYK:he=fromCMYK(ae);break;case photometricInterpretations.YCbCr:he=fromYCbCr(ae);break;case photometricInterpretations.CIELab:he=fromCIELab(ae);break;default:throw new Error("Unsupported photometric interpretation.")}if(!f){const Be=new Uint8Array(he.length/3),pe=new Uint8Array(he.length/3),be=new Uint8Array(he.length/3);for(let Re=0,Fe=0;Re<he.length;Re+=3,++Fe)Be[Fe]=he[Re],pe[Fe]=he[Re+1],be[Fe]=he[Re+2];he=[Be,pe,be]}return he.width=ae.width,he.height=ae.height,he}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const s=[];for(let f=0;f<this.fileDirectory.ModelTiepoint.length;f+=6)s.push({i:this.fileDirectory.ModelTiepoint[f],j:this.fileDirectory.ModelTiepoint[f+1],k:this.fileDirectory.ModelTiepoint[f+2],x:this.fileDirectory.ModelTiepoint[f+3],y:this.fileDirectory.ModelTiepoint[f+4],z:this.fileDirectory.ModelTiepoint[f+5]});return s}getGDALMetadata(s=null){const f={};if(!this.fileDirectory.GDAL_METADATA)return null;const _=this.fileDirectory.GDAL_METADATA;let S=findTagsByName$1(_,"Item");s===null?S=S.filter(T=>getAttribute$1(T,"sample")===void 0):S=S.filter(T=>Number(getAttribute$1(T,"sample"))===s);for(let T=0;T<S.length;++T){const F=S[T];f[getAttribute$1(F,"name")]=F.inner}return f}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const s=this.fileDirectory.GDAL_NODATA;return Number(s.substring(0,s.length-1))}getOrigin(){const s=this.fileDirectory.ModelTiepoint,f=this.fileDirectory.ModelTransformation;if(s&&s.length===6)return[s[3],s[4],s[5]];if(f)return[f[3],f[7],f[11]];throw new Error("The image does not have an affine transformation.")}getResolution(s=null){const f=this.fileDirectory.ModelPixelScale,_=this.fileDirectory.ModelTransformation;if(f)return[f[0],-f[1],f[2]];if(_)return _[1]===0&&_[4]===0?[_[0],-_[5],_[10]]:[Math.sqrt(_[0]*_[0]+_[4]*_[4]),-Math.sqrt(_[1]*_[1]+_[5]*_[5]),_[10]];if(s){const[S,T,F]=s.getResolution();return[S*s.getWidth()/this.getWidth(),T*s.getHeight()/this.getHeight(),F*s.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(s=!1){const f=this.getHeight(),_=this.getWidth();if(this.fileDirectory.ModelTransformation&&!s){const[S,T,F,M,P,H,J,K]=this.fileDirectory.ModelTransformation,se=[[0,0],[0,f],[_,0],[_,f]].map(([he,Be])=>[M+S*he+T*Be,K+P*he+H*Be]),ae=se.map(he=>he[0]),ge=se.map(he=>he[1]);return[Math.min(...ae),Math.min(...ge),Math.max(...ae),Math.max(...ge)]}else{const S=this.getOrigin(),T=this.getResolution(),F=S[0],M=S[1],P=F+T[0]*_,H=M+T[1]*f;return[Math.min(F,P),Math.min(M,H),Math.max(F,P),Math.max(M,H)]}}}class DataView64{constructor(s){this._dataView=new DataView(s)}get buffer(){return this._dataView.buffer}getUint64(s,f){const _=this.getUint32(s,f),S=this.getUint32(s+4,f);let T;if(f){if(T=_+2**32*S,!Number.isSafeInteger(T))throw new Error(`${T} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return T}if(T=2**32*_+S,!Number.isSafeInteger(T))throw new Error(`${T} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return T}getInt64(s,f){let _=0;const S=(this._dataView.getUint8(s+(f?7:0))&128)>0;let T=!0;for(let F=0;F<8;F++){let M=this._dataView.getUint8(s+(f?F:7-F));S&&(T?M!==0&&(M=~(M-1)&255,T=!1):M=~M&255),_+=M*256**F}return S&&(_=-_),_}getUint8(s,f){return this._dataView.getUint8(s,f)}getInt8(s,f){return this._dataView.getInt8(s,f)}getUint16(s,f){return this._dataView.getUint16(s,f)}getInt16(s,f){return this._dataView.getInt16(s,f)}getUint32(s,f){return this._dataView.getUint32(s,f)}getInt32(s,f){return this._dataView.getInt32(s,f)}getFloat16(s,f){return getFloat16(this._dataView,s,f)}getFloat32(s,f){return this._dataView.getFloat32(s,f)}getFloat64(s,f){return this._dataView.getFloat64(s,f)}}class DataSlice{constructor(s,f,_,S){this._dataView=new DataView(s),this._sliceOffset=f,this._littleEndian=_,this._bigTiff=S}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(s,f){return this.sliceOffset<=s&&this.sliceTop>=s+f}readUint8(s){return this._dataView.getUint8(s-this._sliceOffset,this._littleEndian)}readInt8(s){return this._dataView.getInt8(s-this._sliceOffset,this._littleEndian)}readUint16(s){return this._dataView.getUint16(s-this._sliceOffset,this._littleEndian)}readInt16(s){return this._dataView.getInt16(s-this._sliceOffset,this._littleEndian)}readUint32(s){return this._dataView.getUint32(s-this._sliceOffset,this._littleEndian)}readInt32(s){return this._dataView.getInt32(s-this._sliceOffset,this._littleEndian)}readFloat32(s){return this._dataView.getFloat32(s-this._sliceOffset,this._littleEndian)}readFloat64(s){return this._dataView.getFloat64(s-this._sliceOffset,this._littleEndian)}readUint64(s){const f=this.readUint32(s),_=this.readUint32(s+4);let S;if(this._littleEndian){if(S=f+2**32*_,!Number.isSafeInteger(S))throw new Error(`${S} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return S}if(S=2**32*f+_,!Number.isSafeInteger(S))throw new Error(`${S} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return S}readInt64(s){let f=0;const _=(this._dataView.getUint8(s+(this._littleEndian?7:0))&128)>0;let S=!0;for(let T=0;T<8;T++){let F=this._dataView.getUint8(s+(this._littleEndian?T:7-T));_&&(S?F!==0&&(F=~(F-1)&255,S=!1):F=~F&255),f+=F*256**T}return _&&(f=-f),f}readOffset(s){return this._bigTiff?this.readUint64(s):this.readUint32(s)}}const CRLFCRLF=`\r
\r
`;function itemsToObject(d){if(typeof Object.fromEntries<"u")return Object.fromEntries(d);const s={};for(const[f,_]of d)s[f.toLowerCase()]=_;return s}function parseHeaders$1(d){const s=d.split(`\r
`).map(f=>{const _=f.split(":").map(S=>S.trim());return _[0]=_[0].toLowerCase(),_});return itemsToObject(s)}function parseContentType(d){const[s,...f]=d.split(";").map(S=>S.trim()),_=f.map(S=>S.split("="));return{type:s,params:itemsToObject(_)}}function parseContentRange(d){let s,f,_;return d&&([,s,f,_]=d.match(/bytes (\d+)-(\d+)\/(\d+)/),s=parseInt(s,10),f=parseInt(f,10),_=parseInt(_,10)),{start:s,end:f,total:_}}function parseByteRanges(d,s){let f=null;const _=new TextDecoder("ascii"),S=[],T=`--${s}`,F=`${T}--`;for(let M=0;M<10;++M)_.decode(new Uint8Array(d,M,T.length))===T&&(f=M);if(f===null)throw new Error("Could not find initial boundary");for(;f<d.byteLength;){const M=_.decode(new Uint8Array(d,f,Math.min(T.length+1024,d.byteLength-f)));if(M.length===0||M.startsWith(F))break;if(!M.startsWith(T))throw new Error("Part does not start with boundary");const P=M.substr(T.length+2);if(P.length===0)break;const H=P.indexOf(CRLFCRLF),J=parseHeaders$1(P.substr(0,H)),{start:K,end:oe,total:se}=parseContentRange(J["content-range"]),ae=f+T.length+H+CRLFCRLF.length,ge=parseInt(oe,10)+1-parseInt(K,10);S.push({headers:J,data:d.slice(ae,ae+ge),offset:K,length:ge,fileSize:se}),f=ae+ge+4}return S}class BaseSource{async fetch(s,f=void 0){return Promise.all(s.map(_=>this.fetchSlice(_,f)))}async fetchSlice(s){throw new Error(`fetching of slice ${s} not possible, not implemented`)}get fileSize(){return null}async close(){}}class QuickLRU extends Map{constructor(s={}){if(super(),!(s.maxSize&&s.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof s.maxAge=="number"&&s.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=s.maxSize,this.maxAge=s.maxAge||Number.POSITIVE_INFINITY,this.onEviction=s.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(s){if(typeof this.onEviction=="function")for(const[f,_]of s)this.onEviction(f,_.value)}_deleteIfExpired(s,f){return typeof f.expiry=="number"&&f.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(s,f.value),this.delete(s)):!1}_getOrDeleteIfExpired(s,f){if(this._deleteIfExpired(s,f)===!1)return f.value}_getItemValue(s,f){return f.expiry?this._getOrDeleteIfExpired(s,f):f.value}_peek(s,f){const _=f.get(s);return this._getItemValue(s,_)}_set(s,f){this.cache.set(s,f),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(s,f){this.oldCache.delete(s),this._set(s,f)}*_entriesAscending(){for(const s of this.oldCache){const[f,_]=s;this.cache.has(f)||this._deleteIfExpired(f,_)===!1&&(yield s)}for(const s of this.cache){const[f,_]=s;this._deleteIfExpired(f,_)===!1&&(yield s)}}get(s){if(this.cache.has(s)){const f=this.cache.get(s);return this._getItemValue(s,f)}if(this.oldCache.has(s)){const f=this.oldCache.get(s);if(this._deleteIfExpired(s,f)===!1)return this._moveToRecent(s,f),f.value}}set(s,f,{maxAge:_=this.maxAge}={}){const S=typeof _=="number"&&_!==Number.POSITIVE_INFINITY?Date.now()+_:void 0;return this.cache.has(s)?this.cache.set(s,{value:f,expiry:S}):this._set(s,{value:f,expiry:S}),this}has(s){return this.cache.has(s)?!this._deleteIfExpired(s,this.cache.get(s)):this.oldCache.has(s)?!this._deleteIfExpired(s,this.oldCache.get(s)):!1}peek(s){if(this.cache.has(s))return this._peek(s,this.cache);if(this.oldCache.has(s))return this._peek(s,this.oldCache)}delete(s){const f=this.cache.delete(s);return f&&this._size--,this.oldCache.delete(s)||f}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(s){if(!(s&&s>0))throw new TypeError("`maxSize` must be a number greater than 0");const f=[...this._entriesAscending()],_=f.length-s;_<0?(this.cache=new Map(f),this.oldCache=new Map,this._size=f.length):(_>0&&this._emitEvictions(f.slice(0,_)),this.oldCache=new Map(f.slice(_)),this.cache=new Map,this._size=0),this.maxSize=s}*keys(){for(const[s]of this)yield s}*values(){for(const[,s]of this)yield s}*[Symbol.iterator](){for(const s of this.cache){const[f,_]=s;this._deleteIfExpired(f,_)===!1&&(yield[f,_.value])}for(const s of this.oldCache){const[f,_]=s;this.cache.has(f)||this._deleteIfExpired(f,_)===!1&&(yield[f,_.value])}}*entriesDescending(){let s=[...this.cache];for(let f=s.length-1;f>=0;--f){const _=s[f],[S,T]=_;this._deleteIfExpired(S,T)===!1&&(yield[S,T.value])}s=[...this.oldCache];for(let f=s.length-1;f>=0;--f){const _=s[f],[S,T]=_;this.cache.has(S)||this._deleteIfExpired(S,T)===!1&&(yield[S,T.value])}}*entriesAscending(){for(const[s,f]of this._entriesAscending())yield[s,f.value]}get size(){if(!this._size)return this.oldCache.size;let s=0;for(const f of this.oldCache.keys())this.cache.has(f)||s++;return Math.min(this._size+s,this.maxSize)}entries(){return this.entriesAscending()}forEach(s,f=this){for(const[_,S]of this.entriesAscending())s.call(f,S,_,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function wait(d){return new Promise(s=>setTimeout(s,d))}function zip$1(d,s){const f=Array.isArray(d)?d:Array.from(d),_=Array.isArray(s)?s:Array.from(s);return f.map((S,T)=>[S,_[T]])}class AbortError extends Error{constructor(s){super(s),Error.captureStackTrace&&Error.captureStackTrace(this,AbortError),this.name="AbortError"}}class CustomAggregateError extends Error{constructor(s,f){super(f),this.errors=s,this.message=f,this.name="AggregateError"}}const AggregateError=CustomAggregateError;class Block{constructor(s,f,_=null){this.offset=s,this.length=f,this.data=_}get top(){return this.offset+this.length}}class BlockGroup{constructor(s,f,_){this.offset=s,this.length=f,this.blockIds=_}}class BlockedSource extends BaseSource{constructor(s,{blockSize:f=65536,cacheSize:_=100}={}){super(),this.source=s,this.blockSize=f,this.blockCache=new QuickLRU({maxSize:_,onEviction:(S,T)=>{this.evictedBlocks.set(S,T)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(s,f){const _=[],S=[],T=[];this.evictedBlocks.clear();for(const{offset:oe,length:se}of s){let ae=oe+se;const{fileSize:ge}=this;ge!==null&&(ae=Math.min(ae,ge));const he=Math.floor(oe/this.blockSize)*this.blockSize;for(let Be=he;Be<ae;Be+=this.blockSize){const pe=Math.floor(Be/this.blockSize);!this.blockCache.has(pe)&&!this.blockRequests.has(pe)&&(this.blockIdsToFetch.add(pe),S.push(pe)),this.blockRequests.has(pe)&&_.push(this.blockRequests.get(pe)),T.push(pe)}}await wait(),this.fetchBlocks(f);const F=[];for(const oe of S)this.blockRequests.has(oe)&&F.push(this.blockRequests.get(oe));await Promise.allSettled(_),await Promise.allSettled(F);const M=[],P=T.filter(oe=>this.abortedBlockIds.has(oe)||!this.blockCache.has(oe));if(P.forEach(oe=>this.blockIdsToFetch.add(oe)),P.length>0&&f&&!f.aborted){this.fetchBlocks(null);for(const oe of P){const se=this.blockRequests.get(oe);if(!se)throw new Error(`Block ${oe} is not in the block requests`);M.push(se)}await Promise.allSettled(M)}if(f&&f.aborted)throw new AbortError("Request was aborted");const H=T.map(oe=>this.blockCache.get(oe)||this.evictedBlocks.get(oe)),J=H.filter(oe=>!oe);if(J.length)throw new AggregateError(J,"Request failed");const K=new Map(zip$1(T,H));return this.readSliceData(s,K)}fetchBlocks(s){if(this.blockIdsToFetch.size>0){const f=this.groupBlocks(this.blockIdsToFetch),_=this.source.fetch(f,s);for(let S=0;S<f.length;++S){const T=f[S];for(const F of T.blockIds)this.blockRequests.set(F,(async()=>{try{const M=(await _)[S],P=F*this.blockSize,H=P-M.offset,J=Math.min(H+this.blockSize,M.data.byteLength),K=M.data.slice(H,J),oe=new Block(P,K.byteLength,K,F);this.blockCache.set(F,oe),this.abortedBlockIds.delete(F)}catch(M){if(M.name==="AbortError")M.signal=s,this.blockCache.delete(F),this.abortedBlockIds.add(F);else throw M}finally{this.blockRequests.delete(F)}})())}this.blockIdsToFetch.clear()}}groupBlocks(s){const f=Array.from(s).sort((F,M)=>F-M);if(f.length===0)return[];let _=[],S=null;const T=[];for(const F of f)S===null||S+1===F?(_.push(F),S=F):(T.push(new BlockGroup(_[0]*this.blockSize,_.length*this.blockSize,_)),_=[F],S=F);return T.push(new BlockGroup(_[0]*this.blockSize,_.length*this.blockSize,_)),T}readSliceData(s,f){return s.map(_=>{let S=_.offset+_.length;this.fileSize!==null&&(S=Math.min(this.fileSize,S));const T=Math.floor(_.offset/this.blockSize),F=Math.floor(S/this.blockSize),M=new ArrayBuffer(_.length),P=new Uint8Array(M);for(let H=T;H<=F;++H){const J=f.get(H),K=J.offset-_.offset,oe=J.top-S;let se=0,ae=0,ge;K<0?se=-K:K>0&&(ae=K),oe<0?ge=J.length-se:ge=S-J.offset-se;const he=new Uint8Array(J.data,se,ge);P.set(he,ae)}return M})}}class BaseResponse{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(s){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class BaseClient{constructor(s){this.url=s}async request({headers:s,signal:f}={}){throw new Error("request is not implemented")}}class FetchResponse extends BaseResponse{constructor(s){super(),this.response=s}get status(){return this.response.status}getHeader(s){return this.response.headers.get(s)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class FetchClient extends BaseClient{constructor(s,f){super(s),this.credentials=f}async request({headers:s,signal:f}={}){const _=await fetch(this.url,{headers:s,credentials:this.credentials,signal:f});return new FetchResponse(_)}}class XHRResponse extends BaseResponse{constructor(s,f){super(),this.xhr=s,this.data=f}get status(){return this.xhr.status}getHeader(s){return this.xhr.getResponseHeader(s)}async getData(){return this.data}}class XHRClient extends BaseClient{constructRequest(s,f){return new Promise((_,S)=>{const T=new XMLHttpRequest;T.open("GET",this.url),T.responseType="arraybuffer";for(const[F,M]of Object.entries(s))T.setRequestHeader(F,M);T.onload=()=>{const F=T.response;_(new XHRResponse(T,F))},T.onerror=S,T.onabort=()=>S(new AbortError("Request aborted")),T.send(),f&&(f.aborted&&T.abort(),f.addEventListener("abort",()=>T.abort()))})}async request({headers:s,signal:f}={}){return await this.constructRequest(s,f)}}class HttpResponse extends BaseResponse{constructor(s,f){super(),this.response=s,this.dataPromise=f}get status(){return this.response.statusCode}getHeader(s){return this.response.headers[s]}async getData(){return await this.dataPromise}}class HttpClient extends BaseClient{constructor(s){super(s),this.parsedUrl=zlib.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",zlib)}constructRequest(s,f){return new Promise((_,S)=>{const T=this.httpApi.get({...this.parsedUrl,headers:s},F=>{const M=new Promise(P=>{const H=[];F.on("data",J=>{H.push(J)}),F.on("end",()=>{const J=Buffer.concat(H).buffer;P(J)}),F.on("error",S)});_(new HttpResponse(F,M))});T.on("error",S),f&&(f.aborted&&T.destroy(new AbortError("Request aborted")),f.addEventListener("abort",()=>T.destroy(new AbortError("Request aborted"))))})}async request({headers:s,signal:f}={}){return await this.constructRequest(s,f)}}class RemoteSource extends BaseSource{constructor(s,f,_,S){super(),this.client=s,this.headers=f,this.maxRanges=_,this.allowFullFile=S,this._fileSize=null}async fetch(s,f){return this.maxRanges>=s.length?this.fetchSlices(s,f):(this.maxRanges>0&&s.length>1,Promise.all(s.map(_=>this.fetchSlice(_,f))))}async fetchSlices(s,f){const _=await this.client.request({headers:{...this.headers,Range:`bytes=${s.map(({offset:S,length:T})=>`${S}-${S+T}`).join(",")}`},signal:f});if(_.ok)if(_.status===206){const{type:S,params:T}=parseContentType(_.getHeader("content-type"));if(S==="multipart/byteranges"){const K=parseByteRanges(await _.getData(),T.boundary);return this._fileSize=K[0].fileSize||null,K}const F=await _.getData(),{start:M,end:P,total:H}=parseContentRange(_.getHeader("content-range"));this._fileSize=H||null;const J=[{data:F,offset:M,length:P-M}];if(s.length>1){const K=await Promise.all(s.slice(1).map(oe=>this.fetchSlice(oe,f)));return J.concat(K)}return J}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const S=await _.getData();return this._fileSize=S.byteLength,[{data:S,offset:0,length:S.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(s,f){const{offset:_,length:S}=s,T=await this.client.request({headers:{...this.headers,Range:`bytes=${_}-${_+S}`},signal:f});if(T.ok)if(T.status===206){const F=await T.getData(),{total:M}=parseContentRange(T.getHeader("content-range"));return this._fileSize=M||null,{data:F,offset:_,length:S}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const F=await T.getData();return this._fileSize=F.byteLength,{data:F,offset:0,length:F.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function maybeWrapInBlockedSource(d,{blockSize:s,cacheSize:f}){return s===null?d:new BlockedSource(d,{blockSize:s,cacheSize:f})}function makeFetchSource(d,{headers:s={},credentials:f,maxRanges:_=0,allowFullFile:S=!1,...T}={}){const F=new FetchClient(d,f),M=new RemoteSource(F,s,_,S);return maybeWrapInBlockedSource(M,T)}function makeXHRSource(d,{headers:s={},maxRanges:f=0,allowFullFile:_=!1,...S}={}){const T=new XHRClient(d),F=new RemoteSource(T,s,f,_);return maybeWrapInBlockedSource(F,S)}function makeHttpSource(d,{headers:s={},maxRanges:f=0,allowFullFile:_=!1,...S}={}){const T=new HttpClient(d),F=new RemoteSource(T,s,f,_);return maybeWrapInBlockedSource(F,S)}function makeRemoteSource(d,{forceXHR:s=!1,...f}={}){return typeof fetch=="function"&&!s?makeFetchSource(d,f):typeof XMLHttpRequest<"u"?makeXHRSource(d,f):makeHttpSource(d,f)}class FileReaderSource extends BaseSource{constructor(s){super(),this.file=s}async fetchSlice(s,f){return new Promise((_,S)=>{const T=this.file.slice(s.offset,s.offset+s.length),F=new FileReader;F.onload=M=>_(M.target.result),F.onerror=S,F.onabort=S,F.readAsArrayBuffer(T),f&&f.addEventListener("abort",()=>F.abort())})}}function makeFileReaderSource(d){return new FileReaderSource(d)}function closeAsync(d){return new Promise((s,f)=>{zlib.close(d,_=>{_?f(_):s()})})}function openAsync(d,s,f=void 0){return new Promise((_,S)=>{zlib.open(d,s,f,(T,F)=>{T?S(T):_(F)})})}function readAsync(...d){return new Promise((s,f)=>{zlib.read(...d,(_,S,T)=>{_?f(_):s({bytesRead:S,buffer:T})})})}class FileSource extends BaseSource{constructor(s){super(),this.path=s,this.openRequest=openAsync(s,"r")}async fetchSlice(s){const f=await this.openRequest,{buffer:_}=await readAsync(f,Buffer.alloc(s.length),0,s.length,s.offset);return _.buffer}async close(){const s=await this.openRequest;await closeAsync(s)}}function makeFileSource(d){return new FileSource(d)}function decodeRowAcc(d,s){let f=d.length-s,_=0;do{for(let S=s;S>0;S--)d[_+s]+=d[_],_++;f-=s}while(f>0)}function decodeRowFloatingPoint(d,s,f){let _=0,S=d.length;const T=S/f;for(;S>s;){for(let M=s;M>0;--M)d[_+s]+=d[_],++_;S-=s}const F=d.slice();for(let M=0;M<T;++M)for(let P=0;P<f;++P)d[f*M+P]=F[(f-P-1)*T+M]}function applyPredictor(d,s,f,_,S,T){if(!s||s===1)return d;for(let P=0;P<S.length;++P){if(S[P]%8!==0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(S[P]!==S[0])throw new Error("When decoding with predictor, all samples must have the same size.")}const F=S[0]/8,M=T===2?1:S.length;for(let P=0;P<_&&!(P*M*f*F>=d.byteLength);++P){let H;if(s===2){switch(S[0]){case 8:H=new Uint8Array(d,P*M*f*F,M*f*F);break;case 16:H=new Uint16Array(d,P*M*f*F,M*f*F/2);break;case 32:H=new Uint32Array(d,P*M*f*F,M*f*F/4);break;default:throw new Error(`Predictor 2 not allowed with ${S[0]} bits per sample.`)}decodeRowAcc(H,M)}else s===3&&(H=new Uint8Array(d,P*M*f*F,M*f*F),decodeRowFloatingPoint(H,M,F))}return d}class BaseDecoder{async decode(s,f){const _=await this.decodeBlock(f),S=s.Predictor||1;if(S!==1){const T=!s.StripOffsets,F=T?s.TileWidth:s.ImageWidth,M=T?s.TileLength:s.RowsPerStrip||s.ImageLength;return applyPredictor(_,S,F,M,s.BitsPerSample,s.PlanarConfiguration)}return _}}function getFieldTypeLength(d){switch(d){case fieldTypes.BYTE:case fieldTypes.ASCII:case fieldTypes.SBYTE:case fieldTypes.UNDEFINED:return 1;case fieldTypes.SHORT:case fieldTypes.SSHORT:return 2;case fieldTypes.LONG:case fieldTypes.SLONG:case fieldTypes.FLOAT:case fieldTypes.IFD:return 4;case fieldTypes.RATIONAL:case fieldTypes.SRATIONAL:case fieldTypes.DOUBLE:case fieldTypes.LONG8:case fieldTypes.SLONG8:case fieldTypes.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${d}`)}}function parseGeoKeyDirectory(d){const s=d.GeoKeyDirectory;if(!s)return null;const f={};for(let _=4;_<=s[3]*4;_+=4){const S=geoKeyNames[s[_]],T=s[_+1]?fieldTagNames[s[_+1]]:null,F=s[_+2],M=s[_+3];let P=null;if(!T)P=M;else{if(P=d[T],typeof P>"u"||P===null)throw new Error(`Could not get value of geoKey '${S}'.`);typeof P=="string"?P=P.substring(M,M+F-1):P.subarray&&(P=P.subarray(M,M+F),F===1&&(P=P[0]))}f[S]=P}return f}function getValues(d,s,f,_){let S=null,T=null;const F=getFieldTypeLength(s);switch(s){case fieldTypes.BYTE:case fieldTypes.ASCII:case fieldTypes.UNDEFINED:S=new Uint8Array(f),T=d.readUint8;break;case fieldTypes.SBYTE:S=new Int8Array(f),T=d.readInt8;break;case fieldTypes.SHORT:S=new Uint16Array(f),T=d.readUint16;break;case fieldTypes.SSHORT:S=new Int16Array(f),T=d.readInt16;break;case fieldTypes.LONG:case fieldTypes.IFD:S=new Uint32Array(f),T=d.readUint32;break;case fieldTypes.SLONG:S=new Int32Array(f),T=d.readInt32;break;case fieldTypes.LONG8:case fieldTypes.IFD8:S=new Array(f),T=d.readUint64;break;case fieldTypes.SLONG8:S=new Array(f),T=d.readInt64;break;case fieldTypes.RATIONAL:S=new Uint32Array(f*2),T=d.readUint32;break;case fieldTypes.SRATIONAL:S=new Int32Array(f*2),T=d.readInt32;break;case fieldTypes.FLOAT:S=new Float32Array(f),T=d.readFloat32;break;case fieldTypes.DOUBLE:S=new Float64Array(f),T=d.readFloat64;break;default:throw new RangeError(`Invalid field type: ${s}`)}if(s===fieldTypes.RATIONAL||s===fieldTypes.SRATIONAL)for(let M=0;M<f;M+=2)S[M]=T.call(d,_+M*F),S[M+1]=T.call(d,_+(M*F+4));else for(let M=0;M<f;++M)S[M]=T.call(d,_+M*F);return s===fieldTypes.ASCII?new TextDecoder("utf-8").decode(S):S}class ImageFileDirectory{constructor(s,f,_){this.fileDirectory=s,this.geoKeyDirectory=f,this.nextIFDByteOffset=_}}class GeoTIFFImageIndexError extends Error{constructor(s){super(`No image at index ${s}`),this.index=s}}class GeoTIFFBase{async readRasters(s={}){const{window:f,width:_,height:S}=s;let{resX:T,resY:F,bbox:M}=s;const P=await this.getImage();let H=P;const J=await this.getImageCount(),K=P.getBoundingBox();if(f&&M)throw new Error('Both "bbox" and "window" passed.');if(_||S){if(f){const[ae,ge]=P.getOrigin(),[he,Be]=P.getResolution();M=[ae+f[0]*he,ge+f[1]*Be,ae+f[2]*he,ge+f[3]*Be]}const se=M||K;if(_){if(T)throw new Error("Both width and resX passed");T=(se[2]-se[0])/_}if(S){if(F)throw new Error("Both width and resY passed");F=(se[3]-se[1])/S}}if(T||F){const se=[];for(let ae=0;ae<J;++ae){const ge=await this.getImage(ae),{SubfileType:he,NewSubfileType:Be}=ge.fileDirectory;(ae===0||he===2||Be&1)&&se.push(ge)}se.sort((ae,ge)=>ae.getWidth()-ge.getWidth());for(let ae=0;ae<se.length;++ae){const ge=se[ae],he=(K[2]-K[0])/ge.getWidth(),Be=(K[3]-K[1])/ge.getHeight();if(H=ge,T&&T>he||F&&F>Be)break}}let oe=f;if(M){const[se,ae]=P.getOrigin(),[ge,he]=H.getResolution(P);oe=[Math.round((M[0]-se)/ge),Math.round((M[1]-ae)/he),Math.round((M[2]-se)/ge),Math.round((M[3]-ae)/he)],oe=[Math.min(oe[0],oe[2]),Math.min(oe[1],oe[3]),Math.max(oe[0],oe[2]),Math.max(oe[1],oe[3])]}return H.readRasters({...s,window:oe})}}class GeoTIFF extends GeoTIFFBase{constructor(s,f,_,S,T={}){super(),this.source=s,this.littleEndian=f,this.bigTiff=_,this.firstIFDOffset=S,this.cache=T.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(s,f){const _=this.bigTiff?4048:1024;return new DataSlice((await this.source.fetch([{offset:s,length:typeof f<"u"?f:_}]))[0],s,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(s){const f=this.bigTiff?20:12,_=this.bigTiff?8:2;let S=await this.getSlice(s);const T=this.bigTiff?S.readUint64(s):S.readUint16(s),F=T*f+(this.bigTiff?16:6);S.covers(s,F)||(S=await this.getSlice(s,F));const M={};let P=s+(this.bigTiff?8:2);for(let K=0;K<T;P+=f,++K){const oe=S.readUint16(P),se=S.readUint16(P+2),ae=this.bigTiff?S.readUint64(P+4):S.readUint32(P+4);let ge,he;const Be=getFieldTypeLength(se),pe=P+(this.bigTiff?12:8);if(Be*ae<=(this.bigTiff?8:4))ge=getValues(S,se,ae,pe);else{const be=S.readOffset(pe),Re=getFieldTypeLength(se)*ae;if(S.covers(be,Re))ge=getValues(S,se,ae,be);else{const Fe=await this.getSlice(be,Re);ge=getValues(Fe,se,ae,be)}}ae===1&&arrayFields.indexOf(oe)===-1&&!(se===fieldTypes.RATIONAL||se===fieldTypes.SRATIONAL)?he=ge[0]:he=ge,M[fieldTagNames[oe]]=he}const H=parseGeoKeyDirectory(M),J=S.readOffset(s+_+f*T);return new ImageFileDirectory(M,H,J)}async requestIFD(s){if(this.ifdRequests[s])return this.ifdRequests[s];if(s===0)return this.ifdRequests[s]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[s];if(!this.ifdRequests[s-1])try{this.ifdRequests[s-1]=this.requestIFD(s-1)}catch(f){throw f instanceof GeoTIFFImageIndexError?new GeoTIFFImageIndexError(s):f}return this.ifdRequests[s]=(async()=>{const f=await this.ifdRequests[s-1];if(f.nextIFDByteOffset===0)throw new GeoTIFFImageIndexError(s);return this.parseFileDirectoryAt(f.nextIFDByteOffset)})(),this.ifdRequests[s]}async getImage(s=0){const f=await this.requestIFD(s);return new GeoTIFFImage(f.fileDirectory,f.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let s=0,f=!0;for(;f;)try{await this.requestIFD(s),++s}catch(_){if(_ instanceof GeoTIFFImageIndexError)f=!1;else throw _}return s}async getGhostValues(){const s=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const f="GDAL_STRUCTURAL_METADATA_SIZE=",_=f.length+100;let S=await this.getSlice(s,_);if(f===getValues(S,fieldTypes.ASCII,f.length,s)){const F=getValues(S,fieldTypes.ASCII,_,s).split(`
`)[0],M=Number(F.split("=")[1].split(" ")[0])+F.length;M>_&&(S=await this.getSlice(s,M));const P=getValues(S,fieldTypes.ASCII,M,s);this.ghostValues={},P.split(`
`).filter(H=>H.length>0).map(H=>H.split("=")).forEach(([H,J])=>{this.ghostValues[H]=J})}return this.ghostValues}static async fromSource(s,f,_){const S=(await s.fetch([{offset:0,length:1024}],_))[0],T=new DataView64(S),F=T.getUint16(0,0);let M;if(F===18761)M=!0;else if(F===19789)M=!1;else throw new TypeError("Invalid byte order value.");const P=T.getUint16(2,M);let H;if(P===42)H=!1;else if(P===43){if(H=!0,T.getUint16(4,M)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const J=H?T.getUint64(8,M):T.getUint32(4,M);return new GeoTIFF(s,M,H,J,f)}close(){return typeof this.source.close=="function"?this.source.close():!1}}async function fromUrl(d,s={},f){return GeoTIFF.fromSource(makeRemoteSource(d,s),f)}async function fromFile(d,s){return GeoTIFF.fromSource(makeFileSource(d),s)}async function fromBlob(d,s){return GeoTIFF.fromSource(makeFileReaderSource(d),s)}let A$1,I=null;function g(){return I!==null&&I.buffer===A$1.memory.buffer||(I=new Uint8Array(A$1.memory.buffer)),I}let B$1=0,Q$1=null;function C(){return Q$1!==null&&Q$1.buffer===A$1.memory.buffer||(Q$1=new Int32Array(A$1.memory.buffer)),Q$1}async function E(d){d===void 0&&(d="".replace(/\.js$/,"_bg.wasm")),(typeof d=="string"||typeof Request=="function"&&d instanceof Request||typeof URL=="function"&&d instanceof URL)&&(d=fetch(d));const{instance:s,module:f}=await async function(_,S){if(typeof Response=="function"&&_ instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(_,S)}catch(F){if(_.headers.get("Content-Type")=="application/wasm")throw F;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",F)}const T=await _.arrayBuffer();return await WebAssembly.instantiate(T,S)}{const T=await WebAssembly.instantiate(_,S);return T instanceof WebAssembly.Instance?{instance:T,module:_}:T}}(await d,{});return A$1=s.exports,E.__wbindgen_wasm_module=f,A$1}var D$2=Object.freeze({__proto__:null,decompress:function(d,s){try{const H=A$1.__wbindgen_add_to_stack_pointer(-16);var f=function(J,K){const oe=K(1*J.length);return g().set(J,oe/1),B$1=J.length,oe}(d,A$1.__wbindgen_malloc),_=B$1;A$1.decompress(H,f,_,s);var S=C()[H/4+0],T=C()[H/4+1],F=(M=S,P=T,g().subarray(M/1,M/1+P)).slice();return A$1.__wbindgen_free(S,1*T),F}finally{A$1.__wbindgen_add_to_stack_pointer(16)}var M,P},default:E});const i=[62,0,0,0,63,52,53,54,55,56,57,58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,0,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function w(d){return i[d-43]}const G$1=function(d){let s,f=d.endsWith("==")?2:d.endsWith("=")?1:0,_=d.length,S=new Uint8Array(_/4*3);for(let T=0,F=0;T<_;T+=4,F+=3)s=w(d.charCodeAt(T))<<18|w(d.charCodeAt(T+1))<<12|w(d.charCodeAt(T+2))<<6|w(d.charCodeAt(T+3)),S[F]=s>>16,S[F+1]=s>>8&255,S[F+2]=255&s;return S.subarray(0,S.length-f)}("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NwMAIANBEGokAA8LIARBCEHYhcAAEDcACyACQQhByIXAABA3AAuqAgEDfyMAQYABayIEJAACQAJAAn8CQCABKAIAIgNBEHFFBEAgACgCACECIANBIHENASACrSABEBUMAgsgACgCACECQQAhAANAIAAgBGpB/wBqIAJBD3EiA0EwciADQdcAaiADQQpJGzoAACAAQX9qIQAgAkEEdiICDQALIABBgAFqIgJBgQFPDQIgAUGkjsAAQQIgACAEakGAAWpBACAAaxAIDAELQQAhAANAIAAgBGpB/wBqIAJBD3EiA0EwciADQTdqIANBCkkbOgAAIABBf2ohACACQQR2IgINAAsgAEGAAWoiAkGBAU8NAiABQaSOwABBAiAAIARqQYABakEAIABrEAgLIARBgAFqJAAPCyACQYABQZSOwAAQOQALIAJBgAFBlI7AABA5AAuxAgEEfyMAQUBqIgIkACABKAIEIgNFBEAgAUEEaiEDIAEoAgAhBCACQQA2AiAgAkIBNwMYIAIgAkEYajYCJCACQThqIARBEGopAgA3AwAgAkEwaiAEQQhqKQIANwMAIAIgBCkCADcDKCACQSRqQdiJwAAgAkEoahAJGiACQRBqIgQgAigCIDYCACACIAIpAxg3AwgCQCABKAIEIgVFDQAgAUEIaigCAEUNACAFEAQLIAMgAikDCDcCACADQQhqIAQoAgA2AgAgAygCACEDCyABQQE2AgQgAUEMaigCACEEIAFBCGoiASgCACEFIAFCADcCAEEMQQQQWSIBRQRAQQxBBBBjAAsgASAENgIIIAEgBTYCBCABIAM2AgAgAEGQi8AANgIEIAAgATYCACACQUBrJAAL/AEBAn8jAEEQayICJAAgACgCACACQQA2AgwCfwJAAkAgAUGAAU8EQCABQYAQSQ0BIAJBDGohACABQYCABE8NAiACIAFBP3FBgAFyOgAOIAIgAUEMdkHgAXI6AAwgAiABQQZ2QT9xQYABcjoADUEDDAMLIAIgAToADCACQQxqIQBBAQwCCyACIAFBP3FBgAFyOgANIAIgAUEGdkHAAXI6AAwgAkEMaiEAQQIMAQsgAiABQT9xQYABcjoADyACIAFBEnZB8AFyOgAMIAIgAUEGdkE/cUGAAXI6AA4gAiABQQx2QT9xQYABcjoADUEECyEBIAAgARALIAJBEGokAAv5AQECfyMAQRBrIgIkACACQQA2AgwCfwJAAkAgAUGAAU8EQCABQYAQSQ0BIAJBDGohAyABQYCABE8NAiACIAFBP3FBgAFyOgAOIAIgAUEMdkHgAXI6AAwgAiABQQZ2QT9xQYABcjoADUEDDAMLIAIgAToADCACQQxqIQNBAQwCCyACIAFBP3FBgAFyOgANIAIgAUEGdkHAAXI6AAwgAkEMaiEDQQIMAQsgAiABQT9xQYABcjoADyACIAFBEnZB8AFyOgAMIAIgAUEGdkE/cUGAAXI6AA4gAiABQQx2QT9xQYABcjoADUEECyEBIAAgAyABEAsgAkEQaiQAC/wBAQN/IwBBIGsiBCQAAkAgAkEBaiIDIAJPBEAgASgCBCICQQF0IgUgAyAFIANLGyIDQQQgA0EESxsiA0H/////A3EgA0ZBAXQhBSADQQJ0IQMCQCACBEAgBEEYakECNgIAIAQgAkECdDYCFCAEIAEoAgA2AhAMAQsgBEEANgIQCyAEIAMgBSAEQRBqECVBASECIARBCGooAgAhAyAEKAIEIQUgBCgCAEEBRwRAIAEgBTYCACABIANBAnY2AgRBACECDAILIAAgBTYCBCAAQQhqIAM2AgAMAQsgACADNgIEIABBCGpBADYCAEEBIQILIAAgAjYCACAEQSBqJAAL8AEBBH8jAEEgayIEJAACQCACQQFqIgMgAk8EQCABKAIEIgVBAXQiAiADIAIgA0sbIgNBBCADQQRLGyIDIANqIgYgA09BAXQhAwJAIAUEQCAEQRhqQQI2AgAgBCACNgIUIAQgASgCADYCEAwBCyAEQQA2AhALIAQgBiADIARBEGoQJUEBIQIgBEEIaigCACEDIAQoAgQhBSAEKAIAQQFHBEAgASAFNgIAIAEgA0EBdjYCBEEAIQIMAgsgACAFNgIEIABBCGogAzYCAAwBCyAAIAM2AgQgAEEIakEANgIAQQEhAgsgACACNgIAIARBIGokAAvZAQEDfwJAIABBBGooAgAiBCAAQQhqKAIAIgNrIAIgAWsiBU8EQCAAKAIAIQQMAQsCfwJAAkAgAyAFaiICIANJDQAgBEEBdCIDIAIgAyACSxsiAkEIIAJBCEsbIQIgBARAIAJBAEgNASAAKAIAIgNFDQIgAyAEQQEgAhBVDAMLIAJBAE4NAQsQXQALIAJBARBZCyIEBEAgACAENgIAIABBBGogAjYCACAAQQhqKAIAIQMMAQsgAkEBEGMACyADIARqIAEgBRBLGiAAQQhqIgAgACgCACAFajYCAAvoAQEFfyMAQRBrIgMkACAALQALIQIgA0IANwMIIAEoAgAhBQJAAkAgAAJ/IAEoAgQiBEHAACACayIGQfgBcUEDdiICSQRAIARBCU8NAiADQQhqIAUgBBBLGiABQQA2AgQgAUGIg8AANgIAIARBA3QMAQsgBkH/AXFByABPDQIgA0EIaiAFIAIQSxogASAEIAJrNgIEIAEgAiAFajYCACAGQfgBcQsgAC0ACyIBajoACyAAIAApAwAgAykDCCABQT9xrYaENwMAIANBEGokAA8LIARBCEH4hcAAEDcACyACQQhB6IXAABA3AAvcAQEEfyMAQUBqIgIkACABQQRqIQQgASgCBEUEQCABKAIAIQMgAkEANgIgIAJCATcDGCACIAJBGGo2AiQgAkE4aiADQRBqKQIANwMAIAJBMGogA0EIaikCADcDACACIAMpAgA3AyggAkEkakHYicAAIAJBKGoQCRogAkEQaiIDIAIoAiA2AgAgAiACKQMYNwMIAkAgASgCBCIFRQ0AIAFBCGooAgBFDQAgBRAECyAEIAIpAwg3AgAgBEEIaiADKAIANgIACyAAQZCLwAA2AgQgACAENgIAIAJBQGskAAuYAgECfyMAQSBrIgQkAEEBIQVBiKfAAEGIp8AAKAIAQQFqNgIAAkACQAJAQdCqwAAoAgBBAUcEQEHQqsAAQoGAgIAQNwMADAELQdSqwABB1KrAACgCAEEBaiIFNgIAIAVBAksNAQsgBCADNgIcIAQgAjYCGCAEQfCJwAA2AhQgBEHwicAANgIQQfymwAAoAgAiAkF/TA0AQfymwAAgAkEBaiICNgIAQfymwABBhKfAACgCACIDBH9BgKfAACgCACAEQQhqIAAgASgCEBECACAEIAQpAwg3AxAgBEEQaiADKAIMEQIAQfymwAAoAgAFIAILQX9qNgIAIAVBAU0NAQsACyMAQRBrIgIkACACIAE2AgwgAiAANgIIAAvMAQECfyABQRRqKAIAIgUgA0H//wNxIgRLBEAgASgCDCAEQQF0ai8BACEFIAEoAggiBCABKAIERgRAIAEgBBA8IAEoAgghBAsgASgCACAEQQJ0aiIEIAI6AAIgBCADOwEAIAEgASgCCEEBajYCCCABKAIUIgQgAUEQaigCAEYEQCABQQxqIAQQOyABKAIUIQQLIAEoAgwgBEEBdGogBUEBajsBACABIAEoAhRBAWo2AhQgACACOgACIAAgAzsBAA8LIAQgBUH4hsAAEDYAC8QBAQJ/IwBBEGsiAiQAIAIgAa1CgICAgBBCACABKAIYQcWmwABBCSABQRxqKAIAKAIMEQEAG4Q3AwAgAiAANgIMIAIgAkEMahASIAItAAQhASACLQAFBEAgAUH/AXEhACACAn9BASAADQAaIAIoAgAiAEEcaigCACgCDCEBIAAoAhghAyAALQAAQQRxRQRAIANB943AAEECIAERAQAMAQsgA0H2jcAAQQEgAREBAAsiAToABAsgAkEQaiQAIAFB/wFxQQBHC6oBAQJ/AkACQAJAIAIEQEEBIQQgAUEATg0BDAILIAAgATYCBEEBIQQMAQsCQAJAAkACQAJAIAMoAgAiBUUEQCABRQ0BDAMLIAMoAgQiAw0BIAENAgsgAiEDDAMLIAUgAyACIAEQVSIDRQ0BDAILIAEgAhBZIgMNAQsgACABNgIEIAIhAQwCCyAAIAM2AgRBACEEDAELQQAhAQsgACAENgIAIABBCGogATYCAAufAQEDfyAAQgA3AggCQCABQRRqKAIAIgQgAkH//wNxIgNLBEAgASgCDCADQQF0ai8BACEDIAAoAgQhBCAAQQA2AgQgACgCACEFIABBATYCACAEIANJDQEgASACIAUgAxApIAAoAgQEQCAAKAIAEAQLIAAgAzYCDCAAIAQ2AgQgACAFNgIADwsgAyAEQbiGwAAQNgALIAMgBEHIhsAAEDcAC4cBAQJ/IwBBMGsiBCQAIARBIGoiBSACNgIIIAUgAjYCBCAFIAE2AgAgBEEIaiAEQSBqEE4gBEEQaiAEKAIIIgEgBCgCDCICIAMQEyACBEAgARAECyAEQShqIARBGGooAgA2AgAgBCAEKQMQNwMgIAQgBEEgahBOIAAgBCkDADcDACAEQTBqJAALggEBBn8jAEEQayIDJAAgACAAKAIIIAEQOiAAKAIAIQUgACgCCCECIANBCGpBASABEFogAiAFaiEEIAMoAgwiBiADKAIIIgdLBEAgBCAGIAdrEFIgBSACIAZqIAdrIgJqIQQLIAAgAQR/IARBADoAACACQQFqBSACCzYCCCADQRBqJAALjgEBA38gACgCCCIEIAFB//8DcSIFSwRAIAMEQCAAKAIAIQQgAkF/aiEFIAEhAANAIAQgAEH//wNxQQJ0aiIGLwEAIQAgAyAFaiAGLQACOgAAIAAgASAAIAFB//8DcUkbIQAgA0F/aiIDDQALIAItAAAPC0EAQQBBmIfAABA2AAsgBUEBaiAEQYiHwAAQNwALaAECfyMAQdAAayICJAAjAEEwayIBJAAgAUEIOgAPIAFBMGokACACEBdB0ABBCBBZIgEEQCABIAJB0AAQSxogAUEBOgBIIABBpIPAADYCBCAAIAE2AgAgAkHQAGokAA8LQdAAQQgQYwALgAECAn8BfiABLQALIgQgAS0ACiIDSQRAIAEgAhAYIAEtAAshBCABLQAKIQMLIAQgA0H/AXFJBH9BAAUgASAEIANrOgALIAEgASkDACADrYkiBSABLwEIIgGtQn+FQoCAfISDNwMAIAEgBadxIQNBAQshASAAIAM7AQIgACABOwEAC6IBAQN/IwBBEGsiASQAIAAoAgAiAkEUaigCACEDAkACfwJAAkAgAigCBA4CAAEDCyADDQJBACECQfCJwAAMAQsgAw0BIAIoAgAiAygCBCECIAMoAgALIQMgASACNgIEIAEgAzYCACABQfyKwAAgACgCBCgCCCAAKAIIECIACyABQQA2AgQgASACNgIAIAFB6IrAACAAKAIEKAIIIAAoAggQIgALgQEBA38gASgCBCIDIAJPBEACQCADRQ0AIAEoAgAhBAJAAkAgAkUEQEEBIQMgBBAEDAELIAQgA0EBIAIQVSIDRQ0BCyABIAI2AgQgASADNgIADAELIAAgAjYCBCAAQQhqQQE2AgBBASEFCyAAIAU2AgAPC0GUiMAAQSRBuIjAABBIAAt1AgJ/AX4gAS0ACyIEIAEtAAoiA0kEQCABIAIQICABLQALIQQgAS0ACiEDCyAEIANB/wFxSQR/QQAFIAEgBCADazoACyABIAEpAwAiBSADrUI/g4g3AwAgAS8BCCAFp3EhA0EBCyEBIAAgAzsBAiAAIAE7AQALMAEBfwJAAkBBgIABQQIQWSIBDQEMAAtBgIABQQIQYwALIAAgATYCACAAQYAgNgIEC4YBAQF/IwBBQGoiASQAIAFBKzYCDCABQYCBwAA2AgggAUGsgcAANgIUIAEgADYCECABQSxqQQI2AgAgAUE8akEhNgIAIAFCAjcCHCABQayMwAA2AhggAUEdNgI0IAEgAUEwajYCKCABIAFBEGo2AjggASABQQhqNgIwIAFBGGpB8IDAABBRAAtxAQN/IwBBIGsiAiQAAkAgACABEBkNACABQRxqKAIAIQMgASgCGCACQRxqQQA2AgAgAkHwi8AANgIYIAJCATcCDCACQfSLwAA2AgggAyACQQhqEAkNACAAQQRqIAEQGSACQSBqJAAPCyACQSBqJABBAQswAQF/AkACQEGAwABBAhBZIgENAQwAC0GAwABBAhBjAAsgACABNgIAIABBgCA2AgQLewECfwJAAkAgACgCBCIBBEAgACgCDCICIAFPDQEgACgCACIBIAJqIAEtAAA6AAAgAEEANgIIIAAgACgCDEEBajYCDCAAKAIERQ0CIAAoAgAtAAAPC0EAQQBBiIbAABA2AAsgAiABQZiGwAAQNgALQQBBAEGohsAAEDYAC2gBAn8gACAALQBGIgFBAWoiAjoACiAAQQEgAUEPcXRBAmoiATsBQCAAQX8gAkEPcXRBf3M7AQggAEEYaigCACABQf//A3EiAU8EQCAAIAE2AhgLIABBJGooAgAgAU8EQCAAIAE2AiQLC1ABAX8gAEEUaigCACIBRSABQQJ0RXJFBEAgACgCEBAECyAAQSBqKAIAIgFFIAFBAXRFckUEQCAAKAIcEAQLIABBLGooAgAEQCAAKAIoEAQLC2wBAX8jAEEwayIDJAAgAyABNgIEIAMgADYCACADQRxqQQI2AgAgA0EsakEcNgIAIANCAjcCDCADQYCNwAA2AgggA0EcNgIkIAMgA0EgajYCGCADIAM2AiggAyADQQRqNgIgIANBCGogAhBRAAtsAQF/IwBBMGsiAyQAIAMgATYCBCADIAA2AgAgA0EcakECNgIAIANBLGpBHDYCACADQgI3AgwgA0HMkcAANgIIIANBHDYCJCADIANBIGo2AhggAyADQQRqNgIoIAMgAzYCICADQQhqIAIQUQALbAEBfyMAQTBrIgMkACADIAE2AgQgAyAANgIAIANBHGpBAjYCACADQSxqQRw2AgAgA0ICNwIMIANBgJLAADYCCCADQRw2AiQgAyADQSBqNgIYIAMgA0EEajYCKCADIAM2AiAgA0EIaiACEFEAC2wBAX8jAEEwayIDJAAgAyABNgIEIAMgADYCACADQRxqQQI2AgAgA0EsakEcNgIAIANCAjcCDCADQayRwAA2AgggA0EcNgIkIAMgA0EgajYCGCADIANBBGo2AiggAyADNgIgIANBCGogAhBRAAtcAQF/IwBBEGsiAyQAAkAgACgCBCABayACTwRAIANBADYCAAwBCyADIAAgASACEBYgAygCAEEBRw0AIANBCGooAgAiAARAIAMoAgQgABBjAAsQXQALIANBEGokAAtaAQF/IwBBEGsiAiQAAkAgACgCBCABa0EBTwRAIAJBADYCAAwBCyACIAAgARAeIAIoAgBBAUcNACACQQhqKAIAIgAEQCACKAIEIAAQYwALEF0ACyACQRBqJAALWgEBfyMAQRBrIgIkAAJAIAAoAgQgAWtBAU8EQCACQQA2AgAMAQsgAiAAIAEQHSACKAIAQQFHDQAgAkEIaigCACIABEAgAigCBCAAEGMACxBdAAsgAkEQaiQAC1kBAX8jAEEgayICJAAgAiAAKAIANgIEIAJBGGogAUEQaikCADcDACACQRBqIAFBCGopAgA3AwAgAiABKQIANwMIIAJBBGpB2InAACACQQhqEAkgAkEgaiQAC0YAAkBBCCACSQRAAn9BCCACSQRAIAIgAxAQDAELIAMQAAsiAg0BQQAPCyAAIAMQCg8LIAIgACADIAEgASADSxsQSyAAEAQLWQEBfyMAQSBrIgIkACACIAAoAgA2AgQgAkEYaiABQRBqKQIANwMAIAJBEGogAUEIaikCADcDACACIAEpAgA3AwggAkEEakHwj8AAIAJBCGoQCSACQSBqJAALWQACQAJAAkAgAUF/SgRAAkAgAgRAIAENAQwECyABRQ0DIAFBARBZIgINBAwCCyABEEciAkUNAQwDCxBdAAsgAUEBEGMAC0EBIQILIAAgATYCBCAAIAI2AgALVgEBfyMAQSBrIgIkACACIAA2AgQgAkEYaiABQRBqKQIANwMAIAJBEGogAUEIaikCADcDACACIAEpAgA3AwggAkEEakHwj8AAIAJBCGoQCSACQSBqJAALWQEDfwJAIAEoAgwiAiABKAIIIgNPBEAgASgCBCIEIAJJDQEgASgCACEBIAAgAiADazYCBCAAIAEgA2o2AgAPCyADIAJB2IbAABA4AAsgAiAEQdiGwAAQNwALVQEBfyAAQRBqIAAt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");let o;async function N(d,s){o||(o=await(async()=>(await E(G$1),D$2))());const f=o.decompress(d,s);if(f.length===0)throw Error("Failed to decode with LZW decoder.");return f}function quickselect(d,s,f,_,S){quickselectStep(d,s,f||0,_||d.length-1,defaultCompare)}function quickselectStep(d,s,f,_,S){for(;_>f;){if(_-f>600){var T=_-f+1,F=s-f+1,M=Math.log(T),P=.5*Math.exp(2*M/3),H=.5*Math.sqrt(M*P*(T-P)/T)*(F-T/2<0?-1:1),J=Math.max(f,Math.floor(s-F*P/T+H)),K=Math.min(_,Math.floor(s+(T-F)*P/T+H));quickselectStep(d,s,J,K,S)}var oe=d[s],se=f,ae=_;for(swap(d,f,s),S(d[_],oe)>0&&swap(d,f,_);se<ae;){for(swap(d,se,ae),se++,ae--;S(d[se],oe)<0;)se++;for(;S(d[ae],oe)>0;)ae--}S(d[f],oe)===0?swap(d,f,ae):(ae++,swap(d,ae,_)),ae<=s&&(f=ae+1),s<=ae&&(_=ae-1)}}function swap(d,s,f){var _=d[s];d[s]=d[f],d[f]=_}function defaultCompare(d,s){return d<s?-1:d>s?1:0}var util;(function(d){d.assertEqual=S=>S;function s(S){}d.assertIs=s;function f(S){throw new Error}d.assertNever=f,d.arrayToEnum=S=>{const T={};for(const F of S)T[F]=F;return T},d.getValidEnumValues=S=>{const T=d.objectKeys(S).filter(M=>typeof S[S[M]]!="number"),F={};for(const M of T)F[M]=S[M];return d.objectValues(F)},d.objectValues=S=>d.objectKeys(S).map(function(T){return S[T]}),d.objectKeys=typeof Object.keys=="function"?S=>Object.keys(S):S=>{const T=[];for(const F in S)Object.prototype.hasOwnProperty.call(S,F)&&T.push(F);return T},d.find=(S,T)=>{for(const F of S)if(T(F))return F},d.isInteger=typeof Number.isInteger=="function"?S=>Number.isInteger(S):S=>typeof S=="number"&&isFinite(S)&&Math.floor(S)===S;function _(S,T=" | "){return S.map(F=>typeof F=="string"?`'${F}'`:F).join(T)}d.joinValues=_,d.jsonStringifyReplacer=(S,T)=>typeof T=="bigint"?T.toString():T})(util||(util={}));var objectUtil;(function(d){d.mergeShapes=(s,f)=>({...s,...f})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=d=>{switch(typeof d){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(d)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(d)?ZodParsedType.array:d===null?ZodParsedType.null:d.then&&typeof d.then=="function"&&d.catch&&typeof d.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&d instanceof Map?ZodParsedType.map:typeof Set<"u"&&d instanceof Set?ZodParsedType.set:typeof Date<"u"&&d instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=d=>JSON.stringify(d,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(s){super(),this.issues=[],this.addIssue=_=>{this.issues=[...this.issues,_]},this.addIssues=(_=[])=>{this.issues=[...this.issues,..._]};const f=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,f):this.__proto__=f,this.name="ZodError",this.issues=s}get errors(){return this.issues}format(s){const f=s||function(T){return T.message},_={_errors:[]},S=T=>{for(const F of T.issues)if(F.code==="invalid_union")F.unionErrors.map(S);else if(F.code==="invalid_return_type")S(F.returnTypeError);else if(F.code==="invalid_arguments")S(F.argumentsError);else if(F.path.length===0)_._errors.push(f(F));else{let M=_,P=0;for(;P<F.path.length;){const H=F.path[P];P===F.path.length-1?(M[H]=M[H]||{_errors:[]},M[H]._errors.push(f(F))):M[H]=M[H]||{_errors:[]},M=M[H],P++}}};return S(this),_}static assert(s){if(!(s instanceof ZodError))throw new Error(`Not a ZodError: ${s}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=f=>f.message){const f={},_=[];for(const S of this.issues)S.path.length>0?(f[S.path[0]]=f[S.path[0]]||[],f[S.path[0]].push(s(S))):_.push(s(S));return{formErrors:_,fieldErrors:f}}get formErrors(){return this.flatten()}}ZodError.create=d=>new ZodError(d);const errorMap=(d,s)=>{let f;switch(d.code){case ZodIssueCode.invalid_type:d.received===ZodParsedType.undefined?f="Required":f=`Expected ${d.expected}, received ${d.received}`;break;case ZodIssueCode.invalid_literal:f=`Invalid literal value, expected ${JSON.stringify(d.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:f=`Unrecognized key(s) in object: ${util.joinValues(d.keys,", ")}`;break;case ZodIssueCode.invalid_union:f="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:f=`Invalid discriminator value. Expected ${util.joinValues(d.options)}`;break;case ZodIssueCode.invalid_enum_value:f=`Invalid enum value. Expected ${util.joinValues(d.options)}, received '${d.received}'`;break;case ZodIssueCode.invalid_arguments:f="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:f="Invalid function return type";break;case ZodIssueCode.invalid_date:f="Invalid date";break;case ZodIssueCode.invalid_string:typeof d.validation=="object"?"includes"in d.validation?(f=`Invalid input: must include "${d.validation.includes}"`,typeof d.validation.position=="number"&&(f=`${f} at one or more positions greater than or equal to ${d.validation.position}`)):"startsWith"in d.validation?f=`Invalid input: must start with "${d.validation.startsWith}"`:"endsWith"in d.validation?f=`Invalid input: must end with "${d.validation.endsWith}"`:util.assertNever(d.validation):d.validation!=="regex"?f=`Invalid ${d.validation}`:f="Invalid";break;case ZodIssueCode.too_small:d.type==="array"?f=`Array must contain ${d.exact?"exactly":d.inclusive?"at least":"more than"} ${d.minimum} element(s)`:d.type==="string"?f=`String must contain ${d.exact?"exactly":d.inclusive?"at least":"over"} ${d.minimum} character(s)`:d.type==="number"?f=`Number must be ${d.exact?"exactly equal to ":d.inclusive?"greater than or equal to ":"greater than "}${d.minimum}`:d.type==="date"?f=`Date must be ${d.exact?"exactly equal to ":d.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(d.minimum))}`:f="Invalid input";break;case ZodIssueCode.too_big:d.type==="array"?f=`Array must contain ${d.exact?"exactly":d.inclusive?"at most":"less than"} ${d.maximum} element(s)`:d.type==="string"?f=`String must contain ${d.exact?"exactly":d.inclusive?"at most":"under"} ${d.maximum} character(s)`:d.type==="number"?f=`Number must be ${d.exact?"exactly":d.inclusive?"less than or equal to":"less than"} ${d.maximum}`:d.type==="bigint"?f=`BigInt must be ${d.exact?"exactly":d.inclusive?"less than or equal to":"less than"} ${d.maximum}`:d.type==="date"?f=`Date must be ${d.exact?"exactly":d.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(d.maximum))}`:f="Invalid input";break;case ZodIssueCode.custom:f="Invalid input";break;case ZodIssueCode.invalid_intersection_types:f="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:f=`Number must be a multiple of ${d.multipleOf}`;break;case ZodIssueCode.not_finite:f="Number must be finite";break;default:f=s.defaultError,util.assertNever(d)}return{message:f}};let overrideErrorMap=errorMap;function setErrorMap(d){overrideErrorMap=d}function getErrorMap(){return overrideErrorMap}const makeIssue=d=>{const{data:s,path:f,errorMaps:_,issueData:S}=d,T=[...f,...S.path||[]],F={...S,path:T};if(S.message!==void 0)return{...S,path:T,message:S.message};let M="";const P=_.filter(H=>!!H).slice().reverse();for(const H of P)M=H(F,{data:s,defaultError:M}).message;return{...S,path:T,message:M}},EMPTY_PATH=[];function addIssueToContext(d,s){const f=getErrorMap(),_=makeIssue({issueData:s,data:d.data,path:d.path,errorMaps:[d.common.contextualErrorMap,d.schemaErrorMap,f,f===errorMap?void 0:errorMap].filter(S=>!!S)});d.common.issues.push(_)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,f){const _=[];for(const S of f){if(S.status==="aborted")return INVALID$1;S.status==="dirty"&&s.dirty(),_.push(S.value)}return{status:s.value,value:_}}static async mergeObjectAsync(s,f){const _=[];for(const S of f){const T=await S.key,F=await S.value;_.push({key:T,value:F})}return ParseStatus.mergeObjectSync(s,_)}static mergeObjectSync(s,f){const _={};for(const S of f){const{key:T,value:F}=S;if(T.status==="aborted"||F.status==="aborted")return INVALID$1;T.status==="dirty"&&s.dirty(),F.status==="dirty"&&s.dirty(),T.value!=="__proto__"&&(typeof F.value<"u"||S.alwaysSet)&&(_[T.value]=F.value)}return{status:s.value,value:_}}}const INVALID$1=Object.freeze({status:"aborted"}),DIRTY=d=>({status:"dirty",value:d}),OK=d=>({status:"valid",value:d}),isAborted=d=>d.status==="aborted",isDirty=d=>d.status==="dirty",isValid=d=>d.status==="valid",isAsync=d=>typeof Promise<"u"&&d instanceof Promise;function __classPrivateFieldGet(d,s,f,_){if(typeof s=="function"?d!==s||!_:!s.has(d))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s.get(d)}function __classPrivateFieldSet(d,s,f,_,S){if(typeof s=="function"?d!==s||!S:!s.has(d))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s.set(d,f),f}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(d){d.errToObj=s=>typeof s=="string"?{message:s}:s||{},d.toString=s=>typeof s=="string"?s:s==null?void 0:s.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(s,f,_,S){this._cachedPath=[],this.parent=s,this.data=f,this._path=_,this._key=S}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(d,s)=>{if(isValid(s))return{success:!0,data:s.value};if(!d.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const f=new ZodError(d.common.issues);return this._error=f,this._error}}};function processCreateParams(d){if(!d)return{};const{errorMap:s,invalid_type_error:f,required_error:_,description:S}=d;if(s&&(f||_))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:S}:{errorMap:(F,M)=>{var P,H;const{message:J}=d;return F.code==="invalid_enum_value"?{message:J??M.defaultError}:typeof M.data>"u"?{message:(P=J??_)!==null&&P!==void 0?P:M.defaultError}:F.code!=="invalid_type"?{message:M.defaultError}:{message:(H=J??f)!==null&&H!==void 0?H:M.defaultError}},description:S}}class ZodType{constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(s){return getParsedType(s.data)}_getOrReturnCtx(s,f){return f||{common:s.parent.common,data:s.data,parsedType:getParsedType(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new ParseStatus,ctx:{common:s.parent.common,data:s.data,parsedType:getParsedType(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const f=this._parse(s);if(isAsync(f))throw new Error("Synchronous parse encountered promise.");return f}_parseAsync(s){const f=this._parse(s);return Promise.resolve(f)}parse(s,f){const _=this.safeParse(s,f);if(_.success)return _.data;throw _.error}safeParse(s,f){var _;const S={common:{issues:[],async:(_=f==null?void 0:f.async)!==null&&_!==void 0?_:!1,contextualErrorMap:f==null?void 0:f.errorMap},path:(f==null?void 0:f.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:getParsedType(s)},T=this._parseSync({data:s,path:S.path,parent:S});return handleResult(S,T)}async parseAsync(s,f){const _=await this.safeParseAsync(s,f);if(_.success)return _.data;throw _.error}async safeParseAsync(s,f){const _={common:{issues:[],contextualErrorMap:f==null?void 0:f.errorMap,async:!0},path:(f==null?void 0:f.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:getParsedType(s)},S=this._parse({data:s,path:_.path,parent:_}),T=await(isAsync(S)?S:Promise.resolve(S));return handleResult(_,T)}refine(s,f){const _=S=>typeof f=="string"||typeof f>"u"?{message:f}:typeof f=="function"?f(S):f;return this._refinement((S,T)=>{const F=s(S),M=()=>T.addIssue({code:ZodIssueCode.custom,..._(S)});return typeof Promise<"u"&&F instanceof Promise?F.then(P=>P?!0:(M(),!1)):F?!0:(M(),!1)})}refinement(s,f){return this._refinement((_,S)=>s(_)?!0:(S.addIssue(typeof f=="function"?f(_,S):f),!1))}_refinement(s){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(s){return ZodUnion.create([this,s],this._def)}and(s){return ZodIntersection.create(this,s,this._def)}transform(s){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const f=typeof s=="function"?s:()=>s;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:f,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(s){const f=typeof s=="function"?s:()=>s;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:f,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(s){const f=this.constructor;return new f({...this._def,description:s})}pipe(s){return ZodPipeline.create(this,s)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(d){let s="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return d.precision?s=`${s}\\.\\d{${d.precision}}`:d.precision==null&&(s=`${s}(\\.\\d+)?`),s}function timeRegex(d){return new RegExp(`^${timeRegexSource(d)}$`)}function datetimeRegex(d){let s=`${dateRegexSource}T${timeRegexSource(d)}`;const f=[];return f.push(d.local?"Z?":"Z"),d.offset&&f.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${f.join("|")})`,new RegExp(`^${s}$`)}function isValidIP(d,s){return!!((s==="v4"||!s)&&ipv4Regex.test(d)||(s==="v6"||!s)&&ipv6Regex.test(d))}class ZodString extends ZodType{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==ZodParsedType.string){const T=this._getOrReturnCtx(s);return addIssueToContext(T,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:T.parsedType}),INVALID$1}const _=new ParseStatus;let S;for(const T of this._def.checks)if(T.kind==="min")s.data.length<T.value&&(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.too_small,minimum:T.value,type:"string",inclusive:!0,exact:!1,message:T.message}),_.dirty());else if(T.kind==="max")s.data.length>T.value&&(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.too_big,maximum:T.value,type:"string",inclusive:!0,exact:!1,message:T.message}),_.dirty());else if(T.kind==="length"){const F=s.data.length>T.value,M=s.data.length<T.value;(F||M)&&(S=this._getOrReturnCtx(s,S),F?addIssueToContext(S,{code:ZodIssueCode.too_big,maximum:T.value,type:"string",inclusive:!0,exact:!0,message:T.message}):M&&addIssueToContext(S,{code:ZodIssueCode.too_small,minimum:T.value,type:"string",inclusive:!0,exact:!0,message:T.message}),_.dirty())}else if(T.kind==="email")emailRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"email",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"emoji",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="uuid")uuidRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"uuid",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="nanoid")nanoidRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="cuid")cuidRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"cuid",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="cuid2")cuid2Regex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="ulid")ulidRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"ulid",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty());else if(T.kind==="url")try{new URL(s.data)}catch{S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"url",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty()}else T.kind==="regex"?(T.regex.lastIndex=0,T.regex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"regex",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty())):T.kind==="trim"?s.data=s.data.trim():T.kind==="includes"?s.data.includes(T.value,T.position)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.invalid_string,validation:{includes:T.value,position:T.position},message:T.message}),_.dirty()):T.kind==="toLowerCase"?s.data=s.data.toLowerCase():T.kind==="toUpperCase"?s.data=s.data.toUpperCase():T.kind==="startsWith"?s.data.startsWith(T.value)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.invalid_string,validation:{startsWith:T.value},message:T.message}),_.dirty()):T.kind==="endsWith"?s.data.endsWith(T.value)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.invalid_string,validation:{endsWith:T.value},message:T.message}),_.dirty()):T.kind==="datetime"?datetimeRegex(T).test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.invalid_string,validation:"datetime",message:T.message}),_.dirty()):T.kind==="date"?dateRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.invalid_string,validation:"date",message:T.message}),_.dirty()):T.kind==="time"?timeRegex(T).test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.invalid_string,validation:"time",message:T.message}),_.dirty()):T.kind==="duration"?durationRegex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"duration",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty()):T.kind==="ip"?isValidIP(s.data,T.version)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"ip",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty()):T.kind==="base64"?base64Regex.test(s.data)||(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{validation:"base64",code:ZodIssueCode.invalid_string,message:T.message}),_.dirty()):util.assertNever(T);return{status:_.value,value:s.data}}_regex(s,f,_){return this.refinement(S=>s.test(S),{validation:f,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(_)})}_addCheck(s){return new ZodString({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",...errorUtil.errToObj(s)})}url(s){return this._addCheck({kind:"url",...errorUtil.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",...errorUtil.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",...errorUtil.errToObj(s)})}nanoid(s){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",...errorUtil.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",...errorUtil.errToObj(s)})}base64(s){return this._addCheck({kind:"base64",...errorUtil.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",...errorUtil.errToObj(s)})}datetime(s){var f,_;return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,offset:(f=s==null?void 0:s.offset)!==null&&f!==void 0?f:!1,local:(_=s==null?void 0:s.local)!==null&&_!==void 0?_:!1,...errorUtil.errToObj(s==null?void 0:s.message)})}date(s){return this._addCheck({kind:"date",message:s})}time(s){return typeof s=="string"?this._addCheck({kind:"time",precision:null,message:s}):this._addCheck({kind:"time",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,...errorUtil.errToObj(s==null?void 0:s.message)})}duration(s){return this._addCheck({kind:"duration",...errorUtil.errToObj(s)})}regex(s,f){return this._addCheck({kind:"regex",regex:s,...errorUtil.errToObj(f)})}includes(s,f){return this._addCheck({kind:"includes",value:s,position:f==null?void 0:f.position,...errorUtil.errToObj(f==null?void 0:f.message)})}startsWith(s,f){return this._addCheck({kind:"startsWith",value:s,...errorUtil.errToObj(f)})}endsWith(s,f){return this._addCheck({kind:"endsWith",value:s,...errorUtil.errToObj(f)})}min(s,f){return this._addCheck({kind:"min",value:s,...errorUtil.errToObj(f)})}max(s,f){return this._addCheck({kind:"max",value:s,...errorUtil.errToObj(f)})}length(s,f){return this._addCheck({kind:"length",value:s,...errorUtil.errToObj(f)})}nonempty(s){return this.min(1,errorUtil.errToObj(s))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isDate(){return!!this._def.checks.find(s=>s.kind==="date")}get isTime(){return!!this._def.checks.find(s=>s.kind==="time")}get isDuration(){return!!this._def.checks.find(s=>s.kind==="duration")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(s=>s.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get isBase64(){return!!this._def.checks.find(s=>s.kind==="base64")}get minLength(){let s=null;for(const f of this._def.checks)f.kind==="min"&&(s===null||f.value>s)&&(s=f.value);return s}get maxLength(){let s=null;for(const f of this._def.checks)f.kind==="max"&&(s===null||f.value<s)&&(s=f.value);return s}}ZodString.create=d=>{var s;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(s=d==null?void 0:d.coerce)!==null&&s!==void 0?s:!1,...processCreateParams(d)})};function floatSafeRemainder(d,s){const f=(d.toString().split(".")[1]||"").length,_=(s.toString().split(".")[1]||"").length,S=f>_?f:_,T=parseInt(d.toFixed(S).replace(".","")),F=parseInt(s.toFixed(S).replace(".",""));return T%F/Math.pow(10,S)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==ZodParsedType.number){const T=this._getOrReturnCtx(s);return addIssueToContext(T,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:T.parsedType}),INVALID$1}let _;const S=new ParseStatus;for(const T of this._def.checks)T.kind==="int"?util.isInteger(s.data)||(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:T.message}),S.dirty()):T.kind==="min"?(T.inclusive?s.data<T.value:s.data<=T.value)&&(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.too_small,minimum:T.value,type:"number",inclusive:T.inclusive,exact:!1,message:T.message}),S.dirty()):T.kind==="max"?(T.inclusive?s.data>T.value:s.data>=T.value)&&(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.too_big,maximum:T.value,type:"number",inclusive:T.inclusive,exact:!1,message:T.message}),S.dirty()):T.kind==="multipleOf"?floatSafeRemainder(s.data,T.value)!==0&&(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.not_multiple_of,multipleOf:T.value,message:T.message}),S.dirty()):T.kind==="finite"?Number.isFinite(s.data)||(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.not_finite,message:T.message}),S.dirty()):util.assertNever(T);return{status:S.value,value:s.data}}gte(s,f){return this.setLimit("min",s,!0,errorUtil.toString(f))}gt(s,f){return this.setLimit("min",s,!1,errorUtil.toString(f))}lte(s,f){return this.setLimit("max",s,!0,errorUtil.toString(f))}lt(s,f){return this.setLimit("max",s,!1,errorUtil.toString(f))}setLimit(s,f,_,S){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:s,value:f,inclusive:_,message:errorUtil.toString(S)}]})}_addCheck(s){return new ZodNumber({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:errorUtil.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(s)})}multipleOf(s,f){return this._addCheck({kind:"multipleOf",value:s,message:errorUtil.toString(f)})}finite(s){return this._addCheck({kind:"finite",message:errorUtil.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(s)})}get minValue(){let s=null;for(const f of this._def.checks)f.kind==="min"&&(s===null||f.value>s)&&(s=f.value);return s}get maxValue(){let s=null;for(const f of this._def.checks)f.kind==="max"&&(s===null||f.value<s)&&(s=f.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&util.isInteger(s.value))}get isFinite(){let s=null,f=null;for(const _ of this._def.checks){if(_.kind==="finite"||_.kind==="int"||_.kind==="multipleOf")return!0;_.kind==="min"?(f===null||_.value>f)&&(f=_.value):_.kind==="max"&&(s===null||_.value<s)&&(s=_.value)}return Number.isFinite(f)&&Number.isFinite(s)}}ZodNumber.create=d=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(d==null?void 0:d.coerce)||!1,...processCreateParams(d)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce&&(s.data=BigInt(s.data)),this._getType(s)!==ZodParsedType.bigint){const T=this._getOrReturnCtx(s);return addIssueToContext(T,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:T.parsedType}),INVALID$1}let _;const S=new ParseStatus;for(const T of this._def.checks)T.kind==="min"?(T.inclusive?s.data<T.value:s.data<=T.value)&&(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.too_small,type:"bigint",minimum:T.value,inclusive:T.inclusive,message:T.message}),S.dirty()):T.kind==="max"?(T.inclusive?s.data>T.value:s.data>=T.value)&&(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.too_big,type:"bigint",maximum:T.value,inclusive:T.inclusive,message:T.message}),S.dirty()):T.kind==="multipleOf"?s.data%T.value!==BigInt(0)&&(_=this._getOrReturnCtx(s,_),addIssueToContext(_,{code:ZodIssueCode.not_multiple_of,multipleOf:T.value,message:T.message}),S.dirty()):util.assertNever(T);return{status:S.value,value:s.data}}gte(s,f){return this.setLimit("min",s,!0,errorUtil.toString(f))}gt(s,f){return this.setLimit("min",s,!1,errorUtil.toString(f))}lte(s,f){return this.setLimit("max",s,!0,errorUtil.toString(f))}lt(s,f){return this.setLimit("max",s,!1,errorUtil.toString(f))}setLimit(s,f,_,S){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:s,value:f,inclusive:_,message:errorUtil.toString(S)}]})}_addCheck(s){return new ZodBigInt({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(s)})}multipleOf(s,f){return this._addCheck({kind:"multipleOf",value:s,message:errorUtil.toString(f)})}get minValue(){let s=null;for(const f of this._def.checks)f.kind==="min"&&(s===null||f.value>s)&&(s=f.value);return s}get maxValue(){let s=null;for(const f of this._def.checks)f.kind==="max"&&(s===null||f.value<s)&&(s=f.value);return s}}ZodBigInt.create=d=>{var s;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(s=d==null?void 0:d.coerce)!==null&&s!==void 0?s:!1,...processCreateParams(d)})};class ZodBoolean extends ZodType{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==ZodParsedType.boolean){const _=this._getOrReturnCtx(s);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:_.parsedType}),INVALID$1}return OK(s.data)}}ZodBoolean.create=d=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(d==null?void 0:d.coerce)||!1,...processCreateParams(d)});class ZodDate extends ZodType{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==ZodParsedType.date){const T=this._getOrReturnCtx(s);return addIssueToContext(T,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:T.parsedType}),INVALID$1}if(isNaN(s.data.getTime())){const T=this._getOrReturnCtx(s);return addIssueToContext(T,{code:ZodIssueCode.invalid_date}),INVALID$1}const _=new ParseStatus;let S;for(const T of this._def.checks)T.kind==="min"?s.data.getTime()<T.value&&(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.too_small,message:T.message,inclusive:!0,exact:!1,minimum:T.value,type:"date"}),_.dirty()):T.kind==="max"?s.data.getTime()>T.value&&(S=this._getOrReturnCtx(s,S),addIssueToContext(S,{code:ZodIssueCode.too_big,message:T.message,inclusive:!0,exact:!1,maximum:T.value,type:"date"}),_.dirty()):util.assertNever(T);return{status:_.value,value:new Date(s.data.getTime())}}_addCheck(s){return new ZodDate({...this._def,checks:[...this._def.checks,s]})}min(s,f){return this._addCheck({kind:"min",value:s.getTime(),message:errorUtil.toString(f)})}max(s,f){return this._addCheck({kind:"max",value:s.getTime(),message:errorUtil.toString(f)})}get minDate(){let s=null;for(const f of this._def.checks)f.kind==="min"&&(s===null||f.value>s)&&(s=f.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const f of this._def.checks)f.kind==="max"&&(s===null||f.value<s)&&(s=f.value);return s!=null?new Date(s):null}}ZodDate.create=d=>new ZodDate({checks:[],coerce:(d==null?void 0:d.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(d)});class ZodSymbol extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.symbol){const _=this._getOrReturnCtx(s);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:_.parsedType}),INVALID$1}return OK(s.data)}}ZodSymbol.create=d=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(d)});class ZodUndefined extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.undefined){const _=this._getOrReturnCtx(s);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:_.parsedType}),INVALID$1}return OK(s.data)}}ZodUndefined.create=d=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(d)});class ZodNull extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.null){const _=this._getOrReturnCtx(s);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:_.parsedType}),INVALID$1}return OK(s.data)}}ZodNull.create=d=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(d)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(s){return OK(s.data)}}ZodAny.create=d=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(d)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(s){return OK(s.data)}}ZodUnknown.create=d=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(d)});class ZodNever extends ZodType{_parse(s){const f=this._getOrReturnCtx(s);return addIssueToContext(f,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:f.parsedType}),INVALID$1}}ZodNever.create=d=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(d)});class ZodVoid extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.undefined){const _=this._getOrReturnCtx(s);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:_.parsedType}),INVALID$1}return OK(s.data)}}ZodVoid.create=d=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(d)});class ZodArray extends ZodType{_parse(s){const{ctx:f,status:_}=this._processInputParams(s),S=this._def;if(f.parsedType!==ZodParsedType.array)return addIssueToContext(f,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:f.parsedType}),INVALID$1;if(S.exactLength!==null){const F=f.data.length>S.exactLength.value,M=f.data.length<S.exactLength.value;(F||M)&&(addIssueToContext(f,{code:F?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:M?S.exactLength.value:void 0,maximum:F?S.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:S.exactLength.message}),_.dirty())}if(S.minLength!==null&&f.data.length<S.minLength.value&&(addIssueToContext(f,{code:ZodIssueCode.too_small,minimum:S.minLength.value,type:"array",inclusive:!0,exact:!1,message:S.minLength.message}),_.dirty()),S.maxLength!==null&&f.data.length>S.maxLength.value&&(addIssueToContext(f,{code:ZodIssueCode.too_big,maximum:S.maxLength.value,type:"array",inclusive:!0,exact:!1,message:S.maxLength.message}),_.dirty()),f.common.async)return Promise.all([...f.data].map((F,M)=>S.type._parseAsync(new ParseInputLazyPath(f,F,f.path,M)))).then(F=>ParseStatus.mergeArray(_,F));const T=[...f.data].map((F,M)=>S.type._parseSync(new ParseInputLazyPath(f,F,f.path,M)));return ParseStatus.mergeArray(_,T)}get element(){return this._def.type}min(s,f){return new ZodArray({...this._def,minLength:{value:s,message:errorUtil.toString(f)}})}max(s,f){return new ZodArray({...this._def,maxLength:{value:s,message:errorUtil.toString(f)}})}length(s,f){return new ZodArray({...this._def,exactLength:{value:s,message:errorUtil.toString(f)}})}nonempty(s){return this.min(1,s)}}ZodArray.create=(d,s)=>new ZodArray({type:d,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(s)});function deepPartialify(d){if(d instanceof ZodObject){const s={};for(const f in d.shape){const _=d.shape[f];s[f]=ZodOptional.create(deepPartialify(_))}return new ZodObject({...d._def,shape:()=>s})}else return d instanceof ZodArray?new ZodArray({...d._def,type:deepPartialify(d.element)}):d instanceof ZodOptional?ZodOptional.create(deepPartialify(d.unwrap())):d instanceof ZodNullable?ZodNullable.create(deepPartialify(d.unwrap())):d instanceof ZodTuple?ZodTuple.create(d.items.map(s=>deepPartialify(s))):d}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),f=util.objectKeys(s);return this._cached={shape:s,keys:f}}_parse(s){if(this._getType(s)!==ZodParsedType.object){const H=this._getOrReturnCtx(s);return addIssueToContext(H,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:H.parsedType}),INVALID$1}const{status:_,ctx:S}=this._processInputParams(s),{shape:T,keys:F}=this._getCached(),M=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const H in S.data)F.includes(H)||M.push(H);const P=[];for(const H of F){const J=T[H],K=S.data[H];P.push({key:{status:"valid",value:H},value:J._parse(new ParseInputLazyPath(S,K,S.path,H)),alwaysSet:H in S.data})}if(this._def.catchall instanceof ZodNever){const H=this._def.unknownKeys;if(H==="passthrough")for(const J of M)P.push({key:{status:"valid",value:J},value:{status:"valid",value:S.data[J]}});else if(H==="strict")M.length>0&&(addIssueToContext(S,{code:ZodIssueCode.unrecognized_keys,keys:M}),_.dirty());else if(H!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const H=this._def.catchall;for(const J of M){const K=S.data[J];P.push({key:{status:"valid",value:J},value:H._parse(new ParseInputLazyPath(S,K,S.path,J)),alwaysSet:J in S.data})}}return S.common.async?Promise.resolve().then(async()=>{const H=[];for(const J of P){const K=await J.key,oe=await J.value;H.push({key:K,value:oe,alwaysSet:J.alwaysSet})}return H}).then(H=>ParseStatus.mergeObjectSync(_,H)):ParseStatus.mergeObjectSync(_,P)}get shape(){return this._def.shape()}strict(s){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(f,_)=>{var S,T,F,M;const P=(F=(T=(S=this._def).errorMap)===null||T===void 0?void 0:T.call(S,f,_).message)!==null&&F!==void 0?F:_.defaultError;return f.code==="unrecognized_keys"?{message:(M=errorUtil.errToObj(s).message)!==null&&M!==void 0?M:P}:{message:P}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(s){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new ZodObject({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(s,f){return this.augment({[s]:f})}catchall(s){return new ZodObject({...this._def,catchall:s})}pick(s){const f={};return util.objectKeys(s).forEach(_=>{s[_]&&this.shape[_]&&(f[_]=this.shape[_])}),new ZodObject({...this._def,shape:()=>f})}omit(s){const f={};return util.objectKeys(this.shape).forEach(_=>{s[_]||(f[_]=this.shape[_])}),new ZodObject({...this._def,shape:()=>f})}deepPartial(){return deepPartialify(this)}partial(s){const f={};return util.objectKeys(this.shape).forEach(_=>{const S=this.shape[_];s&&!s[_]?f[_]=S:f[_]=S.optional()}),new ZodObject({...this._def,shape:()=>f})}required(s){const f={};return util.objectKeys(this.shape).forEach(_=>{if(s&&!s[_])f[_]=this.shape[_];else{let T=this.shape[_];for(;T instanceof ZodOptional;)T=T._def.innerType;f[_]=T}}),new ZodObject({...this._def,shape:()=>f})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(d,s)=>new ZodObject({shape:()=>d,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(s)});ZodObject.strictCreate=(d,s)=>new ZodObject({shape:()=>d,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(s)});ZodObject.lazycreate=(d,s)=>new ZodObject({shape:d,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(s)});class ZodUnion extends ZodType{_parse(s){const{ctx:f}=this._processInputParams(s),_=this._def.options;function S(T){for(const M of T)if(M.result.status==="valid")return M.result;for(const M of T)if(M.result.status==="dirty")return f.common.issues.push(...M.ctx.common.issues),M.result;const F=T.map(M=>new ZodError(M.ctx.common.issues));return addIssueToContext(f,{code:ZodIssueCode.invalid_union,unionErrors:F}),INVALID$1}if(f.common.async)return Promise.all(_.map(async T=>{const F={...f,common:{...f.common,issues:[]},parent:null};return{result:await T._parseAsync({data:f.data,path:f.path,parent:F}),ctx:F}})).then(S);{let T;const F=[];for(const P of _){const H={...f,common:{...f.common,issues:[]},parent:null},J=P._parseSync({data:f.data,path:f.path,parent:H});if(J.status==="valid")return J;J.status==="dirty"&&!T&&(T={result:J,ctx:H}),H.common.issues.length&&F.push(H.common.issues)}if(T)return f.common.issues.push(...T.ctx.common.issues),T.result;const M=F.map(P=>new ZodError(P));return addIssueToContext(f,{code:ZodIssueCode.invalid_union,unionErrors:M}),INVALID$1}}get options(){return this._def.options}}ZodUnion.create=(d,s)=>new ZodUnion({options:d,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(s)});const getDiscriminator=d=>d instanceof ZodLazy?getDiscriminator(d.schema):d instanceof ZodEffects?getDiscriminator(d.innerType()):d instanceof ZodLiteral?[d.value]:d instanceof ZodEnum?d.options:d instanceof ZodNativeEnum?util.objectValues(d.enum):d instanceof ZodDefault?getDiscriminator(d._def.innerType):d instanceof ZodUndefined?[void 0]:d instanceof ZodNull?[null]:d instanceof ZodOptional?[void 0,...getDiscriminator(d.unwrap())]:d instanceof ZodNullable?[null,...getDiscriminator(d.unwrap())]:d instanceof ZodBranded||d instanceof ZodReadonly?getDiscriminator(d.unwrap()):d instanceof ZodCatch?getDiscriminator(d._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(s){const{ctx:f}=this._processInputParams(s);if(f.parsedType!==ZodParsedType.object)return addIssueToContext(f,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:f.parsedType}),INVALID$1;const _=this.discriminator,S=f.data[_],T=this.optionsMap.get(S);return T?f.common.async?T._parseAsync({data:f.data,path:f.path,parent:f}):T._parseSync({data:f.data,path:f.path,parent:f}):(addIssueToContext(f,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[_]}),INVALID$1)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(s,f,_){const S=new Map;for(const T of f){const F=getDiscriminator(T.shape[s]);if(!F.length)throw new Error(`A discriminator value for key \`${s}\` could not be extracted from all schema options`);for(const M of F){if(S.has(M))throw new Error(`Discriminator property ${String(s)} has duplicate value ${String(M)}`);S.set(M,T)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:s,options:f,optionsMap:S,...processCreateParams(_)})}}function mergeValues(d,s){const f=getParsedType(d),_=getParsedType(s);if(d===s)return{valid:!0,data:d};if(f===ZodParsedType.object&&_===ZodParsedType.object){const S=util.objectKeys(s),T=util.objectKeys(d).filter(M=>S.indexOf(M)!==-1),F={...d,...s};for(const M of T){const P=mergeValues(d[M],s[M]);if(!P.valid)return{valid:!1};F[M]=P.data}return{valid:!0,data:F}}else if(f===ZodParsedType.array&&_===ZodParsedType.array){if(d.length!==s.length)return{valid:!1};const S=[];for(let T=0;T<d.length;T++){const F=d[T],M=s[T],P=mergeValues(F,M);if(!P.valid)return{valid:!1};S.push(P.data)}return{valid:!0,data:S}}else return f===ZodParsedType.date&&_===ZodParsedType.date&&+d==+s?{valid:!0,data:d}:{valid:!1}}class ZodIntersection extends ZodType{_parse(s){const{status:f,ctx:_}=this._processInputParams(s),S=(T,F)=>{if(isAborted(T)||isAborted(F))return INVALID$1;const M=mergeValues(T.value,F.value);return M.valid?((isDirty(T)||isDirty(F))&&f.dirty(),{status:f.value,value:M.data}):(addIssueToContext(_,{code:ZodIssueCode.invalid_intersection_types}),INVALID$1)};return _.common.async?Promise.all([this._def.left._parseAsync({data:_.data,path:_.path,parent:_}),this._def.right._parseAsync({data:_.data,path:_.path,parent:_})]).then(([T,F])=>S(T,F)):S(this._def.left._parseSync({data:_.data,path:_.path,parent:_}),this._def.right._parseSync({data:_.data,path:_.path,parent:_}))}}ZodIntersection.create=(d,s,f)=>new ZodIntersection({left:d,right:s,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(f)});class ZodTuple extends ZodType{_parse(s){const{status:f,ctx:_}=this._processInputParams(s);if(_.parsedType!==ZodParsedType.array)return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:_.parsedType}),INVALID$1;if(_.data.length<this._def.items.length)return addIssueToContext(_,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID$1;!this._def.rest&&_.data.length>this._def.items.length&&(addIssueToContext(_,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),f.dirty());const T=[..._.data].map((F,M)=>{const P=this._def.items[M]||this._def.rest;return P?P._parse(new ParseInputLazyPath(_,F,_.path,M)):null}).filter(F=>!!F);return _.common.async?Promise.all(T).then(F=>ParseStatus.mergeArray(f,F)):ParseStatus.mergeArray(f,T)}get items(){return this._def.items}rest(s){return new ZodTuple({...this._def,rest:s})}}ZodTuple.create=(d,s)=>{if(!Array.isArray(d))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:d,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(s)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:f,ctx:_}=this._processInputParams(s);if(_.parsedType!==ZodParsedType.object)return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:_.parsedType}),INVALID$1;const S=[],T=this._def.keyType,F=this._def.valueType;for(const M in _.data)S.push({key:T._parse(new ParseInputLazyPath(_,M,_.path,M)),value:F._parse(new ParseInputLazyPath(_,_.data[M],_.path,M)),alwaysSet:M in _.data});return _.common.async?ParseStatus.mergeObjectAsync(f,S):ParseStatus.mergeObjectSync(f,S)}get element(){return this._def.valueType}static create(s,f,_){return f instanceof ZodType?new ZodRecord({keyType:s,valueType:f,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(_)}):new ZodRecord({keyType:ZodString.create(),valueType:s,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(f)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:f,ctx:_}=this._processInputParams(s);if(_.parsedType!==ZodParsedType.map)return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:_.parsedType}),INVALID$1;const S=this._def.keyType,T=this._def.valueType,F=[..._.data.entries()].map(([M,P],H)=>({key:S._parse(new ParseInputLazyPath(_,M,_.path,[H,"key"])),value:T._parse(new ParseInputLazyPath(_,P,_.path,[H,"value"]))}));if(_.common.async){const M=new Map;return Promise.resolve().then(async()=>{for(const P of F){const H=await P.key,J=await P.value;if(H.status==="aborted"||J.status==="aborted")return INVALID$1;(H.status==="dirty"||J.status==="dirty")&&f.dirty(),M.set(H.value,J.value)}return{status:f.value,value:M}})}else{const M=new Map;for(const P of F){const H=P.key,J=P.value;if(H.status==="aborted"||J.status==="aborted")return INVALID$1;(H.status==="dirty"||J.status==="dirty")&&f.dirty(),M.set(H.value,J.value)}return{status:f.value,value:M}}}}ZodMap.create=(d,s,f)=>new ZodMap({valueType:s,keyType:d,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(f)});class ZodSet extends ZodType{_parse(s){const{status:f,ctx:_}=this._processInputParams(s);if(_.parsedType!==ZodParsedType.set)return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:_.parsedType}),INVALID$1;const S=this._def;S.minSize!==null&&_.data.size<S.minSize.value&&(addIssueToContext(_,{code:ZodIssueCode.too_small,minimum:S.minSize.value,type:"set",inclusive:!0,exact:!1,message:S.minSize.message}),f.dirty()),S.maxSize!==null&&_.data.size>S.maxSize.value&&(addIssueToContext(_,{code:ZodIssueCode.too_big,maximum:S.maxSize.value,type:"set",inclusive:!0,exact:!1,message:S.maxSize.message}),f.dirty());const T=this._def.valueType;function F(P){const H=new Set;for(const J of P){if(J.status==="aborted")return INVALID$1;J.status==="dirty"&&f.dirty(),H.add(J.value)}return{status:f.value,value:H}}const M=[..._.data.values()].map((P,H)=>T._parse(new ParseInputLazyPath(_,P,_.path,H)));return _.common.async?Promise.all(M).then(P=>F(P)):F(M)}min(s,f){return new ZodSet({...this._def,minSize:{value:s,message:errorUtil.toString(f)}})}max(s,f){return new ZodSet({...this._def,maxSize:{value:s,message:errorUtil.toString(f)}})}size(s,f){return this.min(s,f).max(s,f)}nonempty(s){return this.min(1,s)}}ZodSet.create=(d,s)=>new ZodSet({valueType:d,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(s)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(s){const{ctx:f}=this._processInputParams(s);if(f.parsedType!==ZodParsedType.function)return addIssueToContext(f,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:f.parsedType}),INVALID$1;function _(M,P){return makeIssue({data:M,path:f.path,errorMaps:[f.common.contextualErrorMap,f.schemaErrorMap,getErrorMap(),errorMap].filter(H=>!!H),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:P}})}function S(M,P){return makeIssue({data:M,path:f.path,errorMaps:[f.common.contextualErrorMap,f.schemaErrorMap,getErrorMap(),errorMap].filter(H=>!!H),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:P}})}const T={errorMap:f.common.contextualErrorMap},F=f.data;if(this._def.returns instanceof ZodPromise){const M=this;return OK(async function(...P){const H=new ZodError([]),J=await M._def.args.parseAsync(P,T).catch(se=>{throw H.addIssue(_(P,se)),H}),K=await Reflect.apply(F,this,J);return await M._def.returns._def.type.parseAsync(K,T).catch(se=>{throw H.addIssue(S(K,se)),H})})}else{const M=this;return OK(function(...P){const H=M._def.args.safeParse(P,T);if(!H.success)throw new ZodError([_(P,H.error)]);const J=Reflect.apply(F,this,H.data),K=M._def.returns.safeParse(J,T);if(!K.success)throw new ZodError([S(J,K.error)]);return K.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...s){return new ZodFunction({...this._def,args:ZodTuple.create(s).rest(ZodUnknown.create())})}returns(s){return new ZodFunction({...this._def,returns:s})}implement(s){return this.parse(s)}strictImplement(s){return this.parse(s)}static create(s,f,_){return new ZodFunction({args:s||ZodTuple.create([]).rest(ZodUnknown.create()),returns:f||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(_)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(s){const{ctx:f}=this._processInputParams(s);return this._def.getter()._parse({data:f.data,path:f.path,parent:f})}}ZodLazy.create=(d,s)=>new ZodLazy({getter:d,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(s)});class ZodLiteral extends ZodType{_parse(s){if(s.data!==this._def.value){const f=this._getOrReturnCtx(s);return addIssueToContext(f,{received:f.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID$1}return{status:"valid",value:s.data}}get value(){return this._def.value}}ZodLiteral.create=(d,s)=>new ZodLiteral({value:d,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(s)});function createZodEnum(d,s){return new ZodEnum({values:d,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(s)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(s){if(typeof s.data!="string"){const f=this._getOrReturnCtx(s),_=this._def.values;return addIssueToContext(f,{expected:util.joinValues(_),received:f.parsedType,code:ZodIssueCode.invalid_type}),INVALID$1}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(s.data)){const f=this._getOrReturnCtx(s),_=this._def.values;return addIssueToContext(f,{received:f.data,code:ZodIssueCode.invalid_enum_value,options:_}),INVALID$1}return OK(s.data)}get options(){return this._def.values}get enum(){const s={};for(const f of this._def.values)s[f]=f;return s}get Values(){const s={};for(const f of this._def.values)s[f]=f;return s}get Enum(){const s={};for(const f of this._def.values)s[f]=f;return s}extract(s,f=this._def){return ZodEnum.create(s,{...this._def,...f})}exclude(s,f=this._def){return ZodEnum.create(this.options.filter(_=>!s.includes(_)),{...this._def,...f})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(s){const f=util.getValidEnumValues(this._def.values),_=this._getOrReturnCtx(s);if(_.parsedType!==ZodParsedType.string&&_.parsedType!==ZodParsedType.number){const S=util.objectValues(f);return addIssueToContext(_,{expected:util.joinValues(S),received:_.parsedType,code:ZodIssueCode.invalid_type}),INVALID$1}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(s.data)){const S=util.objectValues(f);return addIssueToContext(_,{received:_.data,code:ZodIssueCode.invalid_enum_value,options:S}),INVALID$1}return OK(s.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(d,s)=>new ZodNativeEnum({values:d,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(s)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(s){const{ctx:f}=this._processInputParams(s);if(f.parsedType!==ZodParsedType.promise&&f.common.async===!1)return addIssueToContext(f,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:f.parsedType}),INVALID$1;const _=f.parsedType===ZodParsedType.promise?f.data:Promise.resolve(f.data);return OK(_.then(S=>this._def.type.parseAsync(S,{path:f.path,errorMap:f.common.contextualErrorMap})))}}ZodPromise.create=(d,s)=>new ZodPromise({type:d,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(s)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:f,ctx:_}=this._processInputParams(s),S=this._def.effect||null,T={addIssue:F=>{addIssueToContext(_,F),F.fatal?f.abort():f.dirty()},get path(){return _.path}};if(T.addIssue=T.addIssue.bind(T),S.type==="preprocess"){const F=S.transform(_.data,T);if(_.common.async)return Promise.resolve(F).then(async M=>{if(f.value==="aborted")return INVALID$1;const P=await this._def.schema._parseAsync({data:M,path:_.path,parent:_});return P.status==="aborted"?INVALID$1:P.status==="dirty"||f.value==="dirty"?DIRTY(P.value):P});{if(f.value==="aborted")return INVALID$1;const M=this._def.schema._parseSync({data:F,path:_.path,parent:_});return M.status==="aborted"?INVALID$1:M.status==="dirty"||f.value==="dirty"?DIRTY(M.value):M}}if(S.type==="refinement"){const F=M=>{const P=S.refinement(M,T);if(_.common.async)return Promise.resolve(P);if(P instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return M};if(_.common.async===!1){const M=this._def.schema._parseSync({data:_.data,path:_.path,parent:_});return M.status==="aborted"?INVALID$1:(M.status==="dirty"&&f.dirty(),F(M.value),{status:f.value,value:M.value})}else return this._def.schema._parseAsync({data:_.data,path:_.path,parent:_}).then(M=>M.status==="aborted"?INVALID$1:(M.status==="dirty"&&f.dirty(),F(M.value).then(()=>({status:f.value,value:M.value}))))}if(S.type==="transform")if(_.common.async===!1){const F=this._def.schema._parseSync({data:_.data,path:_.path,parent:_});if(!isValid(F))return F;const M=S.transform(F.value,T);if(M instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:f.value,value:M}}else return this._def.schema._parseAsync({data:_.data,path:_.path,parent:_}).then(F=>isValid(F)?Promise.resolve(S.transform(F.value,T)).then(M=>({status:f.value,value:M})):F);util.assertNever(S)}}ZodEffects.create=(d,s,f)=>new ZodEffects({schema:d,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:s,...processCreateParams(f)});ZodEffects.createWithPreprocess=(d,s,f)=>new ZodEffects({schema:s,effect:{type:"preprocess",transform:d},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(f)});class ZodOptional extends ZodType{_parse(s){return this._getType(s)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}ZodOptional.create=(d,s)=>new ZodOptional({innerType:d,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(s)});class ZodNullable extends ZodType{_parse(s){return this._getType(s)===ZodParsedType.null?OK(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}ZodNullable.create=(d,s)=>new ZodNullable({innerType:d,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(s)});class ZodDefault extends ZodType{_parse(s){const{ctx:f}=this._processInputParams(s);let _=f.data;return f.parsedType===ZodParsedType.undefined&&(_=this._def.defaultValue()),this._def.innerType._parse({data:_,path:f.path,parent:f})}removeDefault(){return this._def.innerType}}ZodDefault.create=(d,s)=>new ZodDefault({innerType:d,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,...processCreateParams(s)});class ZodCatch extends ZodType{_parse(s){const{ctx:f}=this._processInputParams(s),_={...f,common:{...f.common,issues:[]}},S=this._def.innerType._parse({data:_.data,path:_.path,parent:{..._}});return isAsync(S)?S.then(T=>({status:"valid",value:T.status==="valid"?T.value:this._def.catchValue({get error(){return new ZodError(_.common.issues)},input:_.data})})):{status:"valid",value:S.status==="valid"?S.value:this._def.catchValue({get error(){return new ZodError(_.common.issues)},input:_.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(d,s)=>new ZodCatch({innerType:d,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,...processCreateParams(s)});class ZodNaN extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.nan){const _=this._getOrReturnCtx(s);return addIssueToContext(_,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:_.parsedType}),INVALID$1}return{status:"valid",value:s.data}}}ZodNaN.create=d=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(d)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(s){const{ctx:f}=this._processInputParams(s),_=f.data;return this._def.type._parse({data:_,path:f.path,parent:f})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(s){const{status:f,ctx:_}=this._processInputParams(s);if(_.common.async)return(async()=>{const T=await this._def.in._parseAsync({data:_.data,path:_.path,parent:_});return T.status==="aborted"?INVALID$1:T.status==="dirty"?(f.dirty(),DIRTY(T.value)):this._def.out._parseAsync({data:T.value,path:_.path,parent:_})})();{const S=this._def.in._parseSync({data:_.data,path:_.path,parent:_});return S.status==="aborted"?INVALID$1:S.status==="dirty"?(f.dirty(),{status:"dirty",value:S.value}):this._def.out._parseSync({data:S.value,path:_.path,parent:_})}}static create(s,f){return new ZodPipeline({in:s,out:f,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(s){const f=this._def.innerType._parse(s),_=S=>(isValid(S)&&(S.value=Object.freeze(S.value)),S);return isAsync(f)?f.then(S=>_(S)):_(f)}unwrap(){return this._def.innerType}}ZodReadonly.create=(d,s)=>new ZodReadonly({innerType:d,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(s)});function custom(d,s={},f){return d?ZodAny.create().superRefine((_,S)=>{var T,F;if(!d(_)){const M=typeof s=="function"?s(_):typeof s=="string"?{message:s}:s,P=(F=(T=M.fatal)!==null&&T!==void 0?T:f)!==null&&F!==void 0?F:!0,H=typeof M=="string"?{message:M}:M;S.addIssue({code:"custom",...H,fatal:P})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(d){d.ZodString="ZodString",d.ZodNumber="ZodNumber",d.ZodNaN="ZodNaN",d.ZodBigInt="ZodBigInt",d.ZodBoolean="ZodBoolean",d.ZodDate="ZodDate",d.ZodSymbol="ZodSymbol",d.ZodUndefined="ZodUndefined",d.ZodNull="ZodNull",d.ZodAny="ZodAny",d.ZodUnknown="ZodUnknown",d.ZodNever="ZodNever",d.ZodVoid="ZodVoid",d.ZodArray="ZodArray",d.ZodObject="ZodObject",d.ZodUnion="ZodUnion",d.ZodDiscriminatedUnion="ZodDiscriminatedUnion",d.ZodIntersection="ZodIntersection",d.ZodTuple="ZodTuple",d.ZodRecord="ZodRecord",d.ZodMap="ZodMap",d.ZodSet="ZodSet",d.ZodFunction="ZodFunction",d.ZodLazy="ZodLazy",d.ZodLiteral="ZodLiteral",d.ZodEnum="ZodEnum",d.ZodEffects="ZodEffects",d.ZodNativeEnum="ZodNativeEnum",d.ZodOptional="ZodOptional",d.ZodNullable="ZodNullable",d.ZodDefault="ZodDefault",d.ZodCatch="ZodCatch",d.ZodPromise="ZodPromise",d.ZodBranded="ZodBranded",d.ZodPipeline="ZodPipeline",d.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(d,s={message:`Input not instance of ${d.name}`})=>custom(f=>f instanceof d,s),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:d=>ZodString.create({...d,coerce:!0}),number:d=>ZodNumber.create({...d,coerce:!0}),boolean:d=>ZodBoolean.create({...d,coerce:!0}),bigint:d=>ZodBigInt.create({...d,coerce:!0}),date:d=>ZodDate.create({...d,coerce:!0})},NEVER=INVALID$1;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID:INVALID$1,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError});const registry=new Map;function addCodec(d,s){registry.set(d,s)}async function getCodec(d){if(!registry.has(d.id))throw new Error(`Compression codec ${d.id} is not supported by Zarr.js yet.`);return(await registry.get(d.id)()).fromConfig(d)}function createProxy(d){return new Proxy(d,{set(s,f,_,S){return s.setItem(f,_)},get(s,f,_){return s.getItem(f)},deleteProperty(s,f){return s.deleteItem(f)},has(s,f){return s.containsItem(f)}})}function isZarrError(d){return typeof d=="object"&&d!==null&&"__zarr__"in d}function isKeyError(d){return isZarrError(d)&&d.__zarr__==="KeyError"}class ContainsArrayError extends Error{constructor(s){super(`path ${s} contains an array`),this.__zarr__="ContainsArrayError",Object.setPrototypeOf(this,ContainsArrayError.prototype)}}class ContainsGroupError extends Error{constructor(s){super(`path ${s} contains a group`),this.__zarr__="ContainsGroupError",Object.setPrototypeOf(this,ContainsGroupError.prototype)}}class GroupNotFoundError extends Error{constructor(s){super(`group not found at path ${s}`),this.__zarr__="GroupNotFoundError",Object.setPrototypeOf(this,GroupNotFoundError.prototype)}}class PermissionError extends Error{constructor(s){super(s),this.__zarr__="PermissionError",Object.setPrototypeOf(this,PermissionError.prototype)}}class KeyError extends Error{constructor(s){super(`key ${s} not present`),this.__zarr__="KeyError",Object.setPrototypeOf(this,KeyError.prototype)}}class TooManyIndicesError extends RangeError{constructor(s,f){super(`too many indices for array; expected ${f.length}, got ${s.length}`),this.__zarr__="TooManyIndicesError",Object.setPrototypeOf(this,TooManyIndicesError.prototype)}}let BoundsCheckError$1=class DQ extends RangeError{constructor(s){super(s),this.__zarr__="BoundsCheckError",Object.setPrototypeOf(this,DQ.prototype)}};class InvalidSliceError extends RangeError{constructor(s,f,_,S){super(`slice arguments slice(${s}, ${f}, ${_}) invalid: ${S}`),this.__zarr__="InvalidSliceError",Object.setPrototypeOf(this,InvalidSliceError.prototype)}}class NegativeStepError extends Error{constructor(){super("Negative step size is not supported when indexing."),this.__zarr__="NegativeStepError",Object.setPrototypeOf(this,NegativeStepError.prototype)}}class ValueError extends Error{constructor(s){super(s),this.__zarr__="ValueError",Object.setPrototypeOf(this,ValueError.prototype)}}class HTTPError extends Error{constructor(s){super(s),this.__zarr__="HTTPError",Object.setPrototypeOf(this,HTTPError.prototype)}}function slice$2(d,s=void 0,f=null){if(d===void 0)throw new InvalidSliceError(d,s,f,"The first argument must not be undefined");if(typeof d=="string"&&d!==":"||typeof s=="string"&&s!==":")throw new InvalidSliceError(d,s,f,'Arguments can only be integers, ":" or null');return s===void 0&&(s=d,d=null),{start:d===":"?null:d,stop:s===":"?null:s,step:f,_slice:!0}}function adjustIndices(d,s,f,_){if(d<0?(d+=_,d<0&&(d=f<0?-1:0)):d>=_&&(d=f<0?_-1:_),s<0?(s+=_,s<0&&(s=f<0?-1:0)):s>=_&&(s=f<0?_-1:_),f<0){if(s<d){const S=Math.floor((d-s-1)/-f+1);return[d,s,f,S]}}else if(d<s){const S=Math.floor((s-d-1)/f+1);return[d,s,f,S]}return[d,s,f,0]}function sliceIndices(d,s){let f,_,S;d.step===null?S=1:S=d.step,d.start===null?f=S<0?Number.MAX_SAFE_INTEGER:0:(f=d.start,f<0&&(f+=s)),d.stop===null?_=S<0?-Number.MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER:(_=d.stop,_<0&&(_+=s));const T=adjustIndices(f,_,S,s);if(f=T[0],_=T[1],S=T[2],s=T[3],S===0)throw new Error("Step size 0 is invalid");return[f,_,S,s]}function ensureArray$1(d){return Array.isArray(d)?d:[d]}function checkSelectionLength(d,s){if(d.length>s.length)throw new TooManyIndicesError(d,s)}function selectionToSliceIndices(d,s){const f=[],_=[];for(let S=0;S<d.length;S++){const T=d[S];if(typeof T=="number")f.push(T);else{const F=sliceIndices(T,s[S]),M=F[3];_.push(M),f.push(F)}}return[f,_]}function normalizeArraySelection(d,s,f=!1){d=replaceEllipsis(d,s);for(let _=0;_<d.length;_++){const S=d[_];if(typeof S=="number")f?d[_]=slice$2(S,S+1,1):d[_]=normalizeIntegerSelection(S,s[_]);else{if(isIntegerArray(S))throw new TypeError("Integer array selections are not supported (yet)");(S===":"||S===null)&&(d[_]=slice$2(null,null,1))}}return d}function replaceEllipsis(d,s){d=ensureArray$1(d);let f=-1,_=0;for(let S=0;S<d.length;S++)d[S]==="..."&&(f=S,_+=1);if(_>1)throw new RangeError("an index can only have a single ellipsis ('...')");if(_===1){const S=f,T=d.length-(S+1),F=d.length-1;if(F>=s.length)d=d.filter(M=>M!=="...");else{const M=s.length-F;let P=d.slice(0,S).concat(new Array(M).fill(null));T>0&&(P=P.concat(d.slice(d.length-T))),d=P}}if(d.length<s.length){const S=s.length-d.length;d=d.concat(new Array(S).fill(null))}return checkSelectionLength(d,s),d}function normalizeIntegerSelection(d,s){if(d<0&&(d=s+d),d>=s||d<0)throw new BoundsCheckError$1(`index out of bounds for dimension with length ${s}`);return d}function isInteger(d){return typeof d=="number"}function isIntegerArray(d){if(!Array.isArray(d))return!1;for(const s of d)if(typeof s!="number")return!1;return!0}function isSlice(d){return d!==null&&d._slice===!0}function isContiguousSlice(d){return isSlice(d)&&(d.step===null||d.step===1)}function isContiguousSelection(d){d=ensureArray$1(d);for(let s=0;s<d.length;s++){const f=d[s];if(!(isIntegerArray(f)||isContiguousSlice(f)||f==="..."))return!1}return!0}function*product(...d){if(d.length===0)return;const s=d.map(_=>_()),f=s.map(_=>_.next());for(let _=0;;){if(f[_].done){if(s[_]=d[_](),f[_]=s[_].next(),++_>=s.length)return}else yield f.map(({value:S})=>S),_=0;f[_]=s[_].next()}}class BasicIndexer{constructor(s,f){s=normalizeArraySelection(s,f.shape),this.dimIndexers=[];const _=f.shape;for(let S=0;S<_.length;S++){let T=s[S];const F=_[S],M=f.chunks[S];if(T===null&&(T=slice$2(null)),isInteger(T))this.dimIndexers.push(new IntDimIndexer(T,F,M));else if(isSlice(T))this.dimIndexers.push(new SliceDimIndexer(T,F,M));else throw new RangeError(`Unspported selection item for basic indexing; expected integer or slice, got ${T}`)}this.shape=[];for(const S of this.dimIndexers)S instanceof SliceDimIndexer&&this.shape.push(S.numItems);this.dropAxes=null}*iter(){const s=this.dimIndexers.map(_=>()=>_.iter()),f=product(...s);for(const _ of f){const S=[],T=[],F=[];for(const M of _)S.push(M.dimChunkIndex),T.push(M.dimChunkSelection),M.dimOutSelection!==null&&F.push(M.dimOutSelection);yield{chunkCoords:S,chunkSelection:T,outSelection:F}}}}class IntDimIndexer{constructor(s,f,_){s=normalizeIntegerSelection(s,f),this.dimSelection=s,this.dimLength=f,this.dimChunkLength=_,this.numItems=1}*iter(){const s=Math.floor(this.dimSelection/this.dimChunkLength),f=s*this.dimChunkLength,_=this.dimSelection-f;yield{dimChunkIndex:s,dimChunkSelection:_,dimOutSelection:null}}}class SliceDimIndexer{constructor(s,f,_){const[S,T,F]=sliceIndices(s,f);if(this.start=S,this.stop=T,this.step=F,this.step<1)throw new NegativeStepError;this.dimLength=f,this.dimChunkLength=_,this.numItems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.numChunks=Math.ceil(this.dimLength/this.dimChunkLength)}*iter(){const s=Math.floor(this.start/this.dimChunkLength),f=Math.ceil(this.stop/this.dimChunkLength);for(let _=s;_<f;_++){const S=_*this.dimChunkLength,T=Math.min(this.dimLength,(_+1)*this.dimChunkLength),F=T-S;let M,P,H;if(this.start<S){M=0;const se=(S-this.start)%this.step;se>0&&(M+=this.step-se),H=Math.ceil((S-this.start)/this.step)}else M=this.start-S,H=0;this.stop>T?P=F:P=this.stop-S;const J=slice$2(M,P,this.step),K=Math.ceil((P-M)/this.step),oe=slice$2(H,H+K);yield{dimChunkIndex:_,dimChunkSelection:J,dimOutSelection:oe}}}}const IS_NODE=typeof process<"u"&&process.versions&&process.versions.node;function noop$6(){}function normalizeStoragePath(d){if(d===null)return"";for(d instanceof String&&(d=d.valueOf()),d=d.replace(/\\/g,"/");d.length>0&&d[0]==="/";)d=d.slice(1);for(;d.length>0&&d[d.length-1]==="/";)d=d.slice(0,d.length-1);d=d.replace(/\/\/+/g,"/");const s=d.split("/");for(const f of s)if(f==="."||f==="..")throw Error("path containing '.' or '..' segment not allowed");return d}function normalizeShape(d){return typeof d=="number"&&(d=[d]),d.map(s=>Math.floor(s))}function normalizeChunks(d,s){if(d===null||d===!0)throw new Error("Chunk guessing is not supported yet");return d===!1?s:(typeof d=="number"&&(d=[d]),d.length<s.length&&(d=d.concat(s.slice(d.length))),d.map((f,_)=>f===-1||f===null?s[_]:Math.floor(f)))}function normalizeOrder(d){return d=d.toUpperCase(),d}function normalizeDtype(d){return d}function normalizeFillValue(d){return d}function isTotalSlice(d,s){if(d===null)return!0;Array.isArray(d)||(d=[d]);for(let f=0;f<Math.min(d.length,s.length);f++){const _=d[f];if(_!==null){if(isSlice(_)){const S=_,T=S.step===1||S.step===null;if(S.start===null&&S.stop===null&&T||S.stop-S.start===s[f]&&T)continue;return!1}return!1}}return!0}function arrayEquals1D(d,s){if(d.length!==s.length)return!1;for(let f=0;f<d.length;f++)if(d[f]!==s[f])return!1;return!0}function getStrides(d){const s=d.length,f=Array(s);let _=1;for(let S=s-1;S>=0;S--)f[S]=_,_*=d[S];return f}function resolveUrl(d,s){const f=typeof d=="string"?new URL(d):d;f.pathname.endsWith("/")||(f.pathname+="/");const _=new URL(s,f);return _.search=f.search,_.href}function byteSwapInplace(d){const s=d.BYTES_PER_ELEMENT;if(s===1)return;if(IS_NODE){const F=Buffer.from(d.buffer,d.byteOffset,d.length*s);s===2&&F.swap16(),s===4&&F.swap32(),s===8&&F.swap64();return}const f=new Uint8Array(d.buffer,d.byteOffset,d.length*s),_=s/2,S=s-1;let T;for(let F=0;F<f.length;F+=s)for(let M=0;M<_;M++)T=f[F+M],f[F+M]=f[F+S-M],f[F+S-M]=T}function byteSwap(d){const s=d.slice();return byteSwapInplace(s),s}function convertColMajorToRowMajor2D(d,s,f){let _=0;const S=f[0],T=f[1],F=T;for(let M=0;M<T;M++)for(let P=0;P<S;P++)s[P*F+M]=d[_++]}function convertColMajorToRowMajor3D(d,s,f){let _=0;const S=f[0],T=f[1],F=f[2],M=F*T,P=F;for(let H=0;H<F;H++)for(let J=0;J<T;J++)for(let K=0;K<S;K++)s[K*M+J*P+H]=d[_++]}function convertColMajorToRowMajor4D(d,s,f){let _=0;const S=f[0],T=f[1],F=f[2],M=f[3],P=M*F*T,H=M*F,J=M;for(let K=0;K<M;K++)for(let oe=0;oe<F;oe++)for(let se=0;se<T;se++)for(let ae=0;ae<S;ae++)s[ae*P+se*H+oe*J+K]=d[_++]}function convertColMajorToRowMajorGeneric(d,s,f){const _=f.length,S=f.reduce((M,P)=>M*P),T=f.map((M,P)=>P+1===_?1:f.slice(P+1).reduce((H,J)=>H*J,1)),F=Array(_).fill(0);for(let M=0;M<S;M++){let P=0;for(let H=0;H<_;H++)P+=F[H]*T[H];s[P]=d[M],F[0]+=1;for(let H=0;H<_;H++)if(F[H]===f[H]){if(H+1===_)return;F[H]=0,F[H+1]+=1}}}const colMajorToRowMajorConverters={0:noop$6,1:noop$6,2:convertColMajorToRowMajor2D,3:convertColMajorToRowMajor3D,4:convertColMajorToRowMajor4D};function convertColMajorToRowMajor(d,s,f){return(colMajorToRowMajorConverters[f.length]||convertColMajorToRowMajorGeneric)(d,s,f)}function isArrayBufferLike(d){return d===null?!1:d instanceof ArrayBuffer||typeof SharedArrayBuffer=="function"&&d instanceof SharedArrayBuffer?!0:IS_NODE?d.toString().startsWith("[object ArrayBuffer]")||d.toString().startsWith("[object SharedArrayBuffer]"):!1}const ARRAY_META_KEY=".zarray",GROUP_META_KEY=".zgroup",ATTRS_META_KEY=".zattrs";async function containsArray(d,s=null){s=normalizeStoragePath(s);const _=pathToPrefix(s)+ARRAY_META_KEY;return d.containsItem(_)}async function containsGroup(d,s=null){s=normalizeStoragePath(s);const _=pathToPrefix(s)+GROUP_META_KEY;return d.containsItem(_)}function pathToPrefix(d){return d.length>0?d+"/":""}async function requireParentGroup(d,s,f,_){if(s.length===0)return;const S=s.split("/");let T="";for(const F of S.slice(0,S.length-1))T+=F,await containsArray(d,T)?await initGroupMetadata(d,T,_):await containsGroup(d,T)||await initGroupMetadata(d,T),T+="/"}async function initGroupMetadata(d,s=null,f=!1){if(s=normalizeStoragePath(s),f)throw Error("Group overwriting not implemented yet :(");if(await containsArray(d,s))throw new ContainsArrayError(s);if(await containsGroup(d,s))throw new ContainsGroupError(s);const _={zarr_format:2},S=pathToPrefix(s)+GROUP_META_KEY;await d.setItem(S,JSON.stringify(_))}async function initGroup(d,s=null,f=null,_=!1){s=normalizeStoragePath(s),await requireParentGroup(d,s,f,_),await initGroupMetadata(d,s,_)}async function initArrayMetadata(d,s,f,_,S,T,F,M,P,H,J,K){if(P)throw Error("Array overwriting not implemented yet :(");if(await containsArray(d,S))throw new ContainsArrayError(S);if(await containsGroup(d,S))throw new ContainsGroupError(S);if(_=_,s=normalizeShape(s),f=normalizeChunks(f,s),M=normalizeOrder(M),F=F,J!==null&&J.length>0)throw Error("Filters are not supported yet");let oe=F;typeof F=="number"&&(Number.isNaN(F)&&(oe="NaN"),Number.POSITIVE_INFINITY===F&&(oe="Infinity"),Number.NEGATIVE_INFINITY===F&&(oe="-Infinity")),J=null;const se={zarr_format:2,shape:s,chunks:f,dtype:_,fill_value:oe,order:M,compressor:T,filters:J};K&&(se.dimension_separator=K);const ae=pathToPrefix(S)+ARRAY_META_KEY;await d.setItem(ae,JSON.stringify(se))}async function initArray(d,s,f,_,S=null,T=null,F=null,M="C",P=!1,H=null,J=null,K){S=normalizeStoragePath(S),await requireParentGroup(d,S,H,P),await initArrayMetadata(d,s,f,_,S,T,F,M,P,H,J,K)}function parseMetadata(d){if(typeof d!="string"){if(IS_NODE&&Buffer.isBuffer(d))return JSON.parse(d.toString());if(isArrayBufferLike(d)){const s=new TextDecoder,f=new Uint8Array(d);return JSON.parse(s.decode(f))}else return d}return JSON.parse(d)}class Attributes{constructor(s,f,_,S=!0){this.store=s,this.key=f,this.readOnly=_,this.cache=S,this.cachedValue=null}async asObject(){if(this.cache&&this.cachedValue!==null)return this.cachedValue;const s=await this.getNoSync();return this.cache&&(this.cachedValue=s),s}async getNoSync(){try{const s=await this.store.getItem(this.key);return parseMetadata(s)}catch{return{}}}async setNoSync(s,f){const _=await this.getNoSync();return _[s]=f,await this.putNoSync(_),!0}async putNoSync(s){await this.store.setItem(this.key,JSON.stringify(s)),this.cache&&(this.cachedValue=s)}async delNoSync(s){const f=await this.getNoSync();return delete f[s],await this.putNoSync(f),!0}async put(s){if(this.readOnly)throw new PermissionError("attributes are read-only");return this.putNoSync(s)}async setItem(s,f){if(this.readOnly)throw new PermissionError("attributes are read-only");return this.setNoSync(s,f)}async getItem(s){return(await this.asObject())[s]}async deleteItem(s){if(this.readOnly)throw new PermissionError("attributes are read-only");return this.delNoSync(s)}async containsItem(s){return(await this.asObject())[s]!==void 0}proxy(){return createProxy(this)}}const Float16Array=globalThis.Float16Array,DTYPE_TYPEDARRAY_MAPPING={"|b":Int8Array,"|b1":Uint8Array,"|B":Uint8Array,"|u1":Uint8Array,"|i1":Int8Array,"<b":Int8Array,"<B":Uint8Array,"<u1":Uint8Array,"<i1":Int8Array,"<u2":Uint16Array,"<i2":Int16Array,"<u4":Uint32Array,"<i4":Int32Array,"<f4":Float32Array,"<f2":Float16Array,"<f8":Float64Array,">b":Int8Array,">B":Uint8Array,">u1":Uint8Array,">i1":Int8Array,">u2":Uint16Array,">i2":Int16Array,">u4":Uint32Array,">i4":Int32Array,">f4":Float32Array,">f2":Float16Array,">f8":Float64Array};function getTypedArrayCtr(d){const s=DTYPE_TYPEDARRAY_MAPPING[d];if(!s)throw d.slice(1)==="f2"?Error(`'${d}' is not supported natively in zarr.js. In order to access this dataset you must make Float16Array available as a global. See https://github.com/gzuidhof/zarr.js/issues/127`):Error(`Dtype not recognized or not supported in zarr.js, got ${d}.`);return s}function getTypedArrayDtypeString(d){if(d instanceof Uint8Array)return"|u1";if(d instanceof Int8Array)return"|i1";if(d instanceof Uint16Array)return"<u2";if(d instanceof Int16Array)return"<i2";if(d instanceof Uint32Array)return"<u4";if(d instanceof Int32Array)return"<i4";if(d instanceof Float32Array)return"<f4";if(d instanceof Float64Array)return"<f8";throw new ValueError("Mapping for TypedArray to Dtypestring not known")}function getNestedArrayConstructor(d){return d.byteLength!==void 0?d.constructor:getNestedArrayConstructor(d[0])}function sliceNestedArray(d,s,f){const _=normalizeArraySelection(f,s),[S,T]=selectionToSliceIndices(_,s);return[_sliceNestedArray(d,s,S),T]}function _sliceNestedArray(d,s,f){const _=f[0];if(typeof _=="number")return s.length===1?d[_]:_sliceNestedArray(d[_],s.slice(1),f.slice(1));const[S,T,F,M]=_;if(M===0)return new(getNestedArrayConstructor(d))(0);if(s.length===1){if(F===1)return d.slice(S,T);const H=new d.constructor(M);for(let J=0;J<M;J++)H[J]=d[S+J*F];return H}let P=new Array(M);for(let H=0;H<M;H++)P[H]=_sliceNestedArray(d[S+H*F],s.slice(1),f.slice(1));return M>0&&typeof P[0]=="number"&&(P=d[0].constructor.from(P)),P}function setNestedArrayToScalar(d,s,f,_){const S=normalizeArraySelection(_,f,!0),[T,F]=selectionToSliceIndices(S,f);_setNestedArrayToScalar(d,s,f,T)}function setNestedArray(d,s,f,_,S){const T=normalizeArraySelection(S,f,!1),[F,M]=selectionToSliceIndices(T,f);if(JSON.stringify(M)!==JSON.stringify(_))throw new ValueError(`Shape mismatch in target and source NestedArray: ${M} and ${_}`);_setNestedArray(d,s,f,F)}function _setNestedArray(d,s,f,_){const S=_[0];if(typeof s=="number"){_setNestedArrayToScalar(d,s,f,_.map(H=>typeof H=="number"?[H,H+1,1,1]:H));return}if(typeof S=="number"){_setNestedArray(d[S],s,f.slice(1),_.slice(1));return}const[T,F,M,P]=S;if(f.length===1){if(M===1)d.set(s,T);else for(let H=0;H<P;H++)d[T+H*M]=s[H];return}for(let H=0;H<P;H++)_setNestedArray(d[T+H*M],s[H],f.slice(1),_.slice(1))}function _setNestedArrayToScalar(d,s,f,_){const S=_[0],[T,F,M,P]=S;if(f.length===1){if(M===1)d.fill(s,T,F);else for(let H=0;H<P;H++)d[T+H*M]=s;return}for(let H=0;H<P;H++)_setNestedArrayToScalar(d[T+H*M],s,f.slice(1),_.slice(1))}function flattenNestedArray(d,s,f){f===void 0&&(f=getNestedArrayConstructor(d));const _=s.reduce((T,F)=>T*F,1),S=new f(_);return _flattenNestedArray(d,s,S,0),S}function _flattenNestedArray(d,s,f,_){if(s.length===1){f.set(d,_);return}if(s.length===2){for(let F=0;F<s[0];F++)f.set(d[F],_+s[1]*F);return d}const S=s.slice(1),T=S.reduce((F,M)=>F*M,1);for(let F=0;F<s[0];F++)_flattenNestedArray(d[F],S,f,_+T*F);return d}class NestedArray{constructor(s,f,_){const S=s!==null&&!!s.BYTES_PER_ELEMENT;if(f===void 0){if(!S)throw new ValueError("Shape argument is required unless you pass in a TypedArray");f=[s.length]}if(_===void 0){if(!S)throw new ValueError("Dtype argument is required unless you pass in a TypedArray");_=getTypedArrayDtypeString(s)}if(f=normalizeShape(f),this.shape=f,this.dtype=_,S&&f.length!==1&&(s=s.buffer),this.shape.length===0)this.data=new(getTypedArrayCtr(_))(1);else if(IS_NODE&&Buffer.isBuffer(s)||isArrayBufferLike(s)||s===null){const T=f.reduce((P,H)=>P*H,1);s===null&&(s=new ArrayBuffer(T*parseInt(_[_.length-1],10)));const F=s.byteLength/parseInt(_[_.length-1],10);if(T!==F)throw new Error(`Buffer has ${F} of dtype ${_}, shape is too large or small ${f} (flat=${T})`);const M=getTypedArrayCtr(_);this.data=createNestedArray(s,M,f)}else this.data=s}get(s){const[f,_]=sliceNestedArray(this.data,this.shape,s);return _.length===0?f:new NestedArray(f,_,this.dtype)}set(s=null,f){s===null&&(s=[slice$2(null)]),typeof f=="number"?this.shape.length===0?this.data[0]=f:setNestedArrayToScalar(this.data,f,this.shape,s):setNestedArray(this.data,f.data,this.shape,f.shape,s)}flatten(){return this.shape.length===1?this.data:flattenNestedArray(this.data,this.shape,getTypedArrayCtr(this.dtype))}static arange(s,f="<i4"){const _=getTypedArrayCtr(f),S=rangeTypedArray([s],_);return new NestedArray(S,[s],f)}}function rangeTypedArray(d,s){const f=d.reduce((S,T)=>S*T,1),_=new s(f);return _.set([...Array(f).keys()]),_}function createNestedArray(d,s,f,_=0){if(f.length===1)return new s(d.slice(_,_+f[0]*s.BYTES_PER_ELEMENT));const S=new Array(f[0]);if(f.length===2){for(let M=0;M<f[0];M++)S[M]=new s(d.slice(_+f[1]*M*s.BYTES_PER_ELEMENT,_+f[1]*(M+1)*s.BYTES_PER_ELEMENT));return S}const T=f.slice(1),F=T.reduce((M,P)=>M*P,1);for(let M=0;M<f[0];M++)S[M]=createNestedArray(d,s,T,_+F*M*s.BYTES_PER_ELEMENT);return S}function setRawArrayToScalar(d,s,f,_,S){const T=normalizeArraySelection(_,f,!0),[F]=selectionToSliceIndices(T,f);_setRawArrayToScalar(S,d,s,F)}function setRawArray(d,s,f,_,S,T,F){const M=normalizeArraySelection(_,f,!1),[P,H]=selectionToSliceIndices(M,f);if(JSON.stringify(H)!==JSON.stringify(F))throw new ValueError(`Shape mismatch in target and source RawArray: ${H} and ${F}`);_setRawArray(d,s,P,S,T)}function setRawArrayFromChunkItem(d,s,f,_,S,T,F,M){const P=normalizeArraySelection(_,f,!0),[H]=selectionToSliceIndices(P,f),J=normalizeArraySelection(M,F,!1),[K]=selectionToSliceIndices(J,F);_setRawArrayFromChunkItem(d,s,H,S,T,K)}function _setRawArrayToScalar(d,s,f,_){const[S,...T]=_,[F,...M]=f,[P,H,J,K]=S;if(f.length===1){if(J===1&&F===1)s.fill(d,P,P+K);else for(let oe=0;oe<K;oe++)s[F*(P+J*oe)]=d;return}for(let oe=0;oe<K;oe++)_setRawArrayToScalar(d,s.subarray(F*(P+J*oe)),M,T)}function _setRawArray(d,s,f,_,S){if(f.length===0){d.set(_);return}const[T,...F]=f,[M,...P]=s;if(typeof T=="number"){_setRawArray(d.subarray(T*M),P,F,_,S);return}const[H,...J]=S,[K,oe,se,ae]=T;if(s.length===1){if(se===1&&M===1&&H===1)d.set(_.subarray(0,ae),K);else for(let ge=0;ge<ae;ge++)d[M*(K+se*ge)]=_[H*ge];return}for(let ge=0;ge<ae;ge++)_setRawArray(d.subarray(M*(K+ge*se)),P,F,_.subarray(H*ge),J)}function _setRawArrayFromChunkItem(d,s,f,_,S,T){if(T.length===0){d.set(_.subarray(0,d.length));return}const[F,...M]=f,[P,...H]=T,[J,...K]=s,[oe,...se]=S;if(typeof P=="number"){_setRawArrayFromChunkItem(d,s,f,_.subarray(oe*P),se,H);return}const[ae,ge,he,Be]=F,[pe,be,Re,Fe]=P;if(s.length===1&&S.length===1){if(he===1&&J===1&&Re===1&&oe===1)d.set(_.subarray(pe,pe+Be),ae);else for(let Me=0;Me<Be;Me++)d[J*(ae+he*Me)]=_[oe*(pe+Re*Me)];return}for(let Me=0;Me<Be;Me++)_setRawArrayFromChunkItem(d.subarray(J*(ae+Me*he)),K,M,_.subarray(oe*(pe+Me*Re)),se,H)}class RawArray{constructor(s,f,_,S){const T=s!==null&&!!s.BYTES_PER_ELEMENT;if(f===void 0){if(!T)throw new ValueError("Shape argument is required unless you pass in a TypedArray");f=[s.length]}if(f=normalizeShape(f),_===void 0){if(!T)throw new ValueError("Dtype argument is required unless you pass in a TypedArray");_=getTypedArrayDtypeString(s)}if(S===void 0&&(S=getStrides(f)),this.shape=f,this.dtype=_,this.strides=S,T&&f.length!==1&&(s=s.buffer),this.shape.length===0)this.data=new(getTypedArrayCtr(_))(1);else if(IS_NODE&&Buffer.isBuffer(s)||isArrayBufferLike(s)||s===null){const F=f.reduce((H,J)=>H*J,1);s===null&&(s=new ArrayBuffer(F*parseInt(_[_.length-1],10)));const M=s.byteLength/parseInt(_[_.length-1],10);if(F!==M)throw new Error(`Buffer has ${M} of dtype ${_}, shape is too large or small ${f} (flat=${F})`);const P=getTypedArrayCtr(_);this.data=new P(s)}else this.data=s}set(s=null,f,_){s===null&&(s=[slice$2(null)]),typeof f=="number"?this.shape.length===0?this.data[0]=f:setRawArrayToScalar(this.data,this.strides,this.shape,s,f):f instanceof RawArray&&_?setRawArrayFromChunkItem(this.data,this.strides,this.shape,s,f.data,f.strides,f.shape,_):setRawArray(this.data,this.strides,this.shape,s,f.data,f.strides,f.shape)}}var eventemitter3$1={exports:{}};(function(d){var s=Object.prototype.hasOwnProperty,f="~";function _(){}Object.create&&(_.prototype=Object.create(null),new _().__proto__||(f=!1));function S(P,H,J){this.fn=P,this.context=H,this.once=J||!1}function T(P,H,J,K,oe){if(typeof J!="function")throw new TypeError("The listener must be a function");var se=new S(J,K||P,oe),ae=f?f+H:H;return P._events[ae]?P._events[ae].fn?P._events[ae]=[P._events[ae],se]:P._events[ae].push(se):(P._events[ae]=se,P._eventsCount++),P}function F(P,H){--P._eventsCount===0?P._events=new _:delete P._events[H]}function M(){this._events=new _,this._eventsCount=0}M.prototype.eventNames=function(){var H=[],J,K;if(this._eventsCount===0)return H;for(K in J=this._events)s.call(J,K)&&H.push(f?K.slice(1):K);return Object.getOwnPropertySymbols?H.concat(Object.getOwnPropertySymbols(J)):H},M.prototype.listeners=function(H){var J=f?f+H:H,K=this._events[J];if(!K)return[];if(K.fn)return[K.fn];for(var oe=0,se=K.length,ae=new Array(se);oe<se;oe++)ae[oe]=K[oe].fn;return ae},M.prototype.listenerCount=function(H){var J=f?f+H:H,K=this._events[J];return K?K.fn?1:K.length:0},M.prototype.emit=function(H,J,K,oe,se,ae){var ge=f?f+H:H;if(!this._events[ge])return!1;var he=this._events[ge],Be=arguments.length,pe,be;if(he.fn){switch(he.once&&this.removeListener(H,he.fn,void 0,!0),Be){case 1:return he.fn.call(he.context),!0;case 2:return he.fn.call(he.context,J),!0;case 3:return he.fn.call(he.context,J,K),!0;case 4:return he.fn.call(he.context,J,K,oe),!0;case 5:return he.fn.call(he.context,J,K,oe,se),!0;case 6:return he.fn.call(he.context,J,K,oe,se,ae),!0}for(be=1,pe=new Array(Be-1);be<Be;be++)pe[be-1]=arguments[be];he.fn.apply(he.context,pe)}else{var Re=he.length,Fe;for(be=0;be<Re;be++)switch(he[be].once&&this.removeListener(H,he[be].fn,void 0,!0),Be){case 1:he[be].fn.call(he[be].context);break;case 2:he[be].fn.call(he[be].context,J);break;case 3:he[be].fn.call(he[be].context,J,K);break;case 4:he[be].fn.call(he[be].context,J,K,oe);break;default:if(!pe)for(Fe=1,pe=new Array(Be-1);Fe<Be;Fe++)pe[Fe-1]=arguments[Fe];he[be].fn.apply(he[be].context,pe)}}return!0},M.prototype.on=function(H,J,K){return T(this,H,J,K,!1)},M.prototype.once=function(H,J,K){return T(this,H,J,K,!0)},M.prototype.removeListener=function(H,J,K,oe){var se=f?f+H:H;if(!this._events[se])return this;if(!J)return F(this,se),this;var ae=this._events[se];if(ae.fn)ae.fn===J&&(!oe||ae.once)&&(!K||ae.context===K)&&F(this,se);else{for(var ge=0,he=[],Be=ae.length;ge<Be;ge++)(ae[ge].fn!==J||oe&&!ae[ge].once||K&&ae[ge].context!==K)&&he.push(ae[ge]);he.length?this._events[se]=he.length===1?he[0]:he:F(this,se)}return this},M.prototype.removeAllListeners=function(H){var J;return H?(J=f?f+H:H,this._events[J]&&F(this,J)):(this._events=new _,this._eventsCount=0),this},M.prototype.off=M.prototype.removeListener,M.prototype.addListener=M.prototype.on,M.prefixed=f,M.EventEmitter=M,d.exports=M})(eventemitter3$1);var EventEmitter=eventemitter3$1.exports;class TimeoutError extends Error{constructor(s){super(s),this.name="TimeoutError"}}function pTimeout(d,s,f,_){let S;const T=new Promise((F,M)=>{if(typeof s!="number"||s<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(s===Number.POSITIVE_INFINITY){F(d);return}_={customTimers:{setTimeout,clearTimeout},..._},S=_.customTimers.setTimeout.call(void 0,()=>{if(typeof f=="function"){try{F(f())}catch(J){M(J)}return}const P=typeof f=="string"?f:`Promise timed out after ${s} milliseconds`,H=f instanceof Error?f:new TimeoutError(P);typeof d.cancel=="function"&&d.cancel(),M(H)},s),(async()=>{try{F(await d)}catch(P){M(P)}finally{_.customTimers.clearTimeout.call(void 0,S)}})()});return T.clear=()=>{clearTimeout(S),S=void 0},T}function lowerBound(d,s,f){let _=0,S=d.length;for(;S>0;){const T=Math.trunc(S/2);let F=_+T;f(d[F],s)<=0?(_=++F,S-=T+1):S=T}return _}let PriorityQueue$1=class{constructor(){Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:[]})}enqueue(s,f){var _;f={priority:0,...f};const S={priority:f.priority,run:s};if(this.size&&((_=this._queue[this.size-1])===null||_===void 0?void 0:_.priority)>=f.priority){this._queue.push(S);return}const T=lowerBound(this._queue,S,(F,M)=>M.priority-F.priority);this._queue.splice(T,0,S)}dequeue(){const s=this._queue.shift();return s==null?void 0:s.run}filter(s){return this._queue.filter(f=>f.priority===s.priority).map(f=>f.run)}get size(){return this._queue.length}};const empty$1$1=()=>{},timeoutError=new TimeoutError;class PQueue extends EventEmitter{constructor(s){var f,_,S,T;if(super(),Object.defineProperty(this,"_carryoverConcurrencyCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isIntervalIgnored",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalCap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalEnd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_timeoutId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queueClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pendingCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_concurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isPaused",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_resolveEmpty",{enumerable:!0,configurable:!0,writable:!0,value:empty$1$1}),Object.defineProperty(this,"_resolveIdle",{enumerable:!0,configurable:!0,writable:!0,value:empty$1$1}),Object.defineProperty(this,"_timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_throwOnTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),s={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue$1,...s},!(typeof s.intervalCap=="number"&&s.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(_=(f=s.intervalCap)===null||f===void 0?void 0:f.toString())!==null&&_!==void 0?_:""}\` (${typeof s.intervalCap})`);if(s.interval===void 0||!(Number.isFinite(s.interval)&&s.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(T=(S=s.interval)===null||S===void 0?void 0:S.toString())!==null&&T!==void 0?T:""}\` (${typeof s.interval})`);this._carryoverConcurrencyCount=s.carryoverConcurrencyCount,this._isIntervalIgnored=s.intervalCap===Number.POSITIVE_INFINITY||s.interval===0,this._intervalCap=s.intervalCap,this._interval=s.interval,this._queue=new s.queueClass,this._queueClass=s.queueClass,this.concurrency=s.concurrency,this._timeout=s.timeout,this._throwOnTimeout=s.throwOnTimeout===!0,this._isPaused=s.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=empty$1$1,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=empty$1$1,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const s=Date.now();if(this._intervalId===void 0){const f=this._intervalEnd-s;if(f<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},f)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const s=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const f=this._queue.dequeue();return f?(this.emit("active"),f(),s&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(s){if(!(typeof s=="number"&&s>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${s}\` (${typeof s})`);this._concurrency=s,this._processQueue()}async add(s,f={}){return new Promise((_,S)=>{const T=async()=>{this._pendingCount++,this._intervalCount++;try{const M=await(this._timeout===void 0&&f.timeout===void 0?s():pTimeout(Promise.resolve(s()),f.timeout===void 0?this._timeout:f.timeout,()=>{(f.throwOnTimeout===void 0?this._throwOnTimeout:f.throwOnTimeout)&&S(timeoutError)}));_(M),this.emit("completed",M)}catch(F){S(F),this.emit("error",F)}this._next()};this._queue.enqueue(T,f),this._tryToStartAnother(),this.emit("add")})}async addAll(s,f){return Promise.all(s.map(async _=>this.add(_,f)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(s=>{const f=this._resolveEmpty;this._resolveEmpty=()=>{f(),s()}})}async onSizeLessThan(s){if(!(this._queue.size<s))return new Promise(f=>{const _=()=>{this._queue.size<s&&(this.removeListener("next",_),f())};this.on("next",_)})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(s=>{const f=this._resolveIdle;this._resolveIdle=()=>{f(),s()}})}get size(){return this._queue.size}sizeBy(s){return this._queue.filter(s).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(s){this._timeout=s}}class ZarrArray{constructor(s,f=null,_,S=!1,T=null,F=!0,M=!0){this.store=s,this._chunkStore=T,this.path=normalizeStoragePath(f),this.keyPrefix=pathToPrefix(this.path),this.readOnly=S,this.cacheMetadata=F,this.cacheAttrs=M,this.meta=_,this.meta.compressor!==null?this.compressor=getCodec(this.meta.compressor):this.compressor=null;const P=this.keyPrefix+ATTRS_META_KEY;this.attrs=new Attributes(this.store,P,this.readOnly,M)}get chunkStore(){return this._chunkStore?this._chunkStore:this.store}get name(){return this.path.length>0?this.path[0]!=="/"?"/"+this.path:this.path:null}get basename(){const s=this.name;if(s===null)return null;const f=s.split("/");return f[f.length-1]}get shape(){return this.meta.shape}get chunks(){return this.meta.chunks}get chunkSize(){return this.chunks.reduce((s,f)=>s*f,1)}get dtype(){return this.meta.dtype}get fillValue(){const s=this.meta.fill_value;return s==="NaN"?NaN:s==="Infinity"?1/0:s==="-Infinity"?-1/0:this.meta.fill_value}get nDims(){return this.meta.shape.length}get size(){return this.meta.shape.reduce((s,f)=>s*f,1)}get length(){return this.shape[0]}get _chunkDataShape(){if(this.shape.length===0)return[1];{const s=[];for(let f=0;f<this.shape.length;f++)s[f]=Math.ceil(this.shape[f]/this.chunks[f]);return s}}get chunkDataShape(){return this._chunkDataShape}get numChunks(){return this.chunkDataShape.reduce((s,f)=>s*f,1)}static async create(s,f=null,_=!1,S=null,T=!0,F=!0){const M=await this.loadMetadataForConstructor(s,f);return new ZarrArray(s,f,M,_,S,T,F)}static async loadMetadataForConstructor(s,f){try{f=normalizeStoragePath(f);const _=pathToPrefix(f),S=await s.getItem(_+ARRAY_META_KEY);return parseMetadata(S)}catch(_){throw await containsGroup(s,f)?new ContainsGroupError(f??""):new Error("Failed to load metadata for ZarrArray:"+_.toString())}}async reloadMetadata(){const s=this.keyPrefix+ARRAY_META_KEY,f=this.store.getItem(s);return this.meta=parseMetadata(await f),this.meta}async refreshMetadata(){this.cacheMetadata||await this.reloadMetadata()}get(s=null,f={}){return this.getBasicSelection(s,!1,f)}getRaw(s=null,f={}){return this.getBasicSelection(s,!0,f)}async getBasicSelection(s,f=!1,{concurrencyLimit:_=10,progressCallback:S,storeOptions:T}={}){if(this.cacheMetadata||await this.reloadMetadata(),this.shape.length===0)throw new Error("Shape [] indexing is not supported yet");return this.getBasicSelectionND(s,f,_,S,T)}getBasicSelectionND(s,f,_,S,T){const F=new BasicIndexer(s,this);return this.getSelection(F,f,_,S,T)}async getSelection(s,f,_,S,T){const F=this.dtype,M=s.shape,P=s.shape.reduce((oe,se)=>oe*se,1);if(f&&P===this.chunkSize){const oe=s.iter(),se=oe.next();if(se.done===!1&&oe.next().done===!0){const ae=se.value;return await this.decodeDirectToRawArray(ae,M,P)}}const H=f?new RawArray(null,M,F):new NestedArray(null,M,F);if(P===0)return H;const J=new PQueue({concurrency:_}),K=[];if(S){let oe=0,se=0;for(const ae of s.iter())se+=1;S({progress:0,queueSize:se});for(const ae of s.iter())K.push(J.add(async()=>{await this.chunkGetItem(ae.chunkCoords,ae.chunkSelection,H,ae.outSelection,s.dropAxes,T),oe+=1,S({progress:oe,queueSize:se})}))}else for(const oe of s.iter())K.push(J.add(()=>this.chunkGetItem(oe.chunkCoords,oe.chunkSelection,H,oe.outSelection,s.dropAxes,T)));return await Promise.all(K),H.shape.length===0?H.data[0]:H}async chunkGetItem(s,f,_,S,T,F){if(s.length!==this._chunkDataShape.length)throw new ValueError(`Inconsistent shapes: chunkCoordsLength: ${s.length}, cDataShapeLength: ${this.chunkDataShape.length}`);const M=this.chunkKey(s);try{const P=await this.chunkStore.getItem(M,F),H=await this.decodeChunk(P);if(_ instanceof NestedArray){if(isContiguousSelection(S)&&isTotalSlice(f,this.chunks)&&!this.meta.filters){_.set(S,this.toNestedArray(H));return}const K=this.toNestedArray(H).get(f);if(T!==null)throw new Error("Drop axes is not supported yet");_.set(S,K)}else _.set(S,this.chunkBufferToRawArray(H),f)}catch(P){if(isKeyError(P))this.fillValue!==null&&_.set(S,this.fillValue);else throw P}}async getRawChunk(s,f){if(s.length!==this.shape.length)throw new Error(`Chunk coordinates ${s.join(".")} do not correspond to shape ${this.shape}.`);try{for(let M=0;M<s.length;M++){const P=Math.ceil(this.shape[M]/this.chunks[M]);s[M]=normalizeIntegerSelection(s[M],P)}}catch(M){throw M instanceof BoundsCheckError$1?new BoundsCheckError$1(`index ${s.join(".")} is out of bounds for shape: ${this.shape} and chunks ${this.chunks}`):M}const _=this.chunkKey(s),S=this.chunkStore.getItem(_,f==null?void 0:f.storeOptions),T=await this.decodeChunk(await S),F=this.chunks.filter(M=>M!==1);return new RawArray(T,F,this.dtype)}chunkKey(s){var f;const _=(f=this.meta.dimension_separator)!==null&&f!==void 0?f:".";return this.keyPrefix+s.join(_)}ensureByteArray(s){return typeof s=="string"?new Uint8Array(Buffer.from(s).buffer):new Uint8Array(s)}toTypedArray(s){return new(getTypedArrayCtr(this.dtype))(s)}toNestedArray(s){const f=this.ensureByteArray(s).buffer;return new NestedArray(f,this.chunks,this.dtype)}async decodeChunk(s){let f=this.ensureByteArray(s);if(this.compressor!==null&&(f=await(await this.compressor).decode(f)),this.dtype.includes(">")&&byteSwapInplace(this.toTypedArray(f.buffer)),this.meta.order==="F"&&this.nDims>1){const _=this.toTypedArray(f.buffer),S=new(getTypedArrayCtr(this.dtype))(_.length);return convertColMajorToRowMajor(_,S,this.chunks),S.buffer}return f.buffer}chunkBufferToRawArray(s){return new RawArray(s,this.chunks,this.dtype)}async decodeDirectToRawArray({chunkCoords:s},f,_){const S=this.chunkKey(s);try{const T=await this.chunkStore.getItem(S);return new RawArray(await this.decodeChunk(T),f,this.dtype)}catch(T){if(isKeyError(T)){const F=new(getTypedArrayCtr(this.dtype))(_);return new RawArray(F.fill(this.fillValue),f)}else throw T}}async set(s=null,f,_={}){await this.setBasicSelection(s,f,_)}async setBasicSelection(s,f,{concurrencyLimit:_=10,progressCallback:S}={}){if(this.readOnly)throw new PermissionError("Object is read only");if(this.cacheMetadata||await this.reloadMetadata(),this.shape.length===0)throw new Error("Shape [] indexing is not supported yet");await this.setBasicSelectionND(s,f,_,S)}async setBasicSelectionND(s,f,_,S){const T=new BasicIndexer(s,this);await this.setSelection(T,f,_,S)}getChunkValue(s,f,_,S){let T;if(S.length===0)T=_;else if(typeof _=="number")T=_;else if(T=_.get(s.outSelection),f.dropAxes!==null)throw new Error("Handling drop axes not supported yet");return T}async setSelection(s,f,_,S){const T=s.shape;if(T.length!==0){if(typeof f!="number")if(f instanceof NestedArray){if(!arrayEquals1D(f.shape,T))throw new ValueError(`Shape mismatch in source NestedArray and set selection: ${f.shape} and ${T}`)}else throw new Error("Unknown data type for setting :(")}const F=new PQueue({concurrency:_}),M=[];if(S){let P=0;for(const J of s.iter())P+=1;let H=0;S({progress:0,queueSize:P});for(const J of s.iter()){const K=this.getChunkValue(J,s,f,T);M.push(F.add(async()=>{await this.chunkSetItem(J.chunkCoords,J.chunkSelection,K),H+=1,S({progress:H,queueSize:P})}))}}else for(const P of s.iter()){const H=this.getChunkValue(P,s,f,T);M.push(F.add(()=>this.chunkSetItem(P.chunkCoords,P.chunkSelection,H)))}await Promise.all(M)}async chunkSetItem(s,f,_){if(this.meta.order==="F"&&this.nDims>1)throw new Error("Setting content for arrays in F-order is not supported.");const S=this.chunkKey(s);let T=null;const F=getTypedArrayCtr(this.dtype),M=this.chunkSize;if(isTotalSlice(f,this.chunks))typeof _=="number"?(T=new F(M),T.fill(_)):T=_.flatten();else{let H;try{const K=await this.chunkStore.getItem(S),oe=await this.decodeChunk(K);H=this.toTypedArray(oe)}catch(K){if(isKeyError(K))H=new F(M),this.fillValue!==null&&H.fill(this.fillValue);else throw K}const J=new NestedArray(H,this.chunks,this.dtype);J.set(f,_),T=J.flatten()}const P=await this.encodeChunk(T);this.chunkStore.setItem(S,P)}async encodeChunk(s){if(this.dtype.includes(">")&&(s=byteSwap(s)),this.compressor!==null){const f=new Uint8Array(s.buffer);return(await(await this.compressor).encode(f)).buffer}return s.buffer}}class MemoryStore{constructor(s={}){this.root=s}proxy(){return createProxy(this)}getParent(s){let f=this.root;const _=s.split("/");for(const S of _.slice(0,_.length-1))if(f=f[S],!f)throw Error(s);return[f,_[_.length-1]]}requireParent(s){let f=this.root;const _=s.split("/");for(const S of _.slice(0,_.length-1))f[S]===void 0&&(f[S]={}),f=f[S];return[f,_[_.length-1]]}getItem(s){const[f,_]=this.getParent(s),S=f[_];if(S===void 0)throw new KeyError(s);return S}setItem(s,f){const[_,S]=this.requireParent(s);return _[S]=f,!0}deleteItem(s){const[f,_]=this.getParent(s);return delete f[_]}containsItem(s){try{return this.getItem(s)!==void 0}catch{return!1}}keys(){throw new Error("Method not implemented.")}}var HTTPMethod;(function(d){d.HEAD="HEAD",d.GET="GET",d.PUT="PUT"})(HTTPMethod||(HTTPMethod={}));const DEFAULT_METHODS=[HTTPMethod.HEAD,HTTPMethod.GET,HTTPMethod.PUT];class HTTPStore{constructor(s,f={}){this.url=s;const{fetchOptions:_={},supportedMethods:S=DEFAULT_METHODS}=f;this.fetchOptions=_,this.supportedMethods=new Set(S)}keys(){throw new Error("Method not implemented.")}async getItem(s,f){const _=resolveUrl(this.url,s),S=await fetch(_,{...this.fetchOptions,...f});if(S.status===404)throw new KeyError(s);if(S.status!==200)throw new HTTPError(String(S.status));return IS_NODE?Buffer.from(await S.arrayBuffer()):S.arrayBuffer()}async setItem(s,f){if(!this.supportedMethods.has(HTTPMethod.PUT))throw new Error("HTTP PUT no a supported method for store.");const _=resolveUrl(this.url,s);return typeof f=="string"&&(f=new TextEncoder().encode(f).buffer),(await fetch(_,{...this.fetchOptions,method:HTTPMethod.PUT,body:f})).status.toString()[0]==="2"}deleteItem(s){throw new Error("Method not implemented.")}async containsItem(s){const f=resolveUrl(this.url,s),_=this.supportedMethods.has(HTTPMethod.HEAD)?HTTPMethod.HEAD:HTTPMethod.GET;return(await fetch(f,{...this.fetchOptions,method:_})).status===200}}async function create$4({shape:d,chunks:s=!0,dtype:f="<i4",compressor:_=null,fillValue:S=null,order:T="C",store:F,overwrite:M=!1,path:P,chunkStore:H,filters:J,cacheMetadata:K=!0,cacheAttrs:oe=!0,readOnly:se=!1,dimensionSeparator:ae}){const ge=normalizeStoreArgument(F);return await initArray(ge,d,s,f,P,_,S,T,M,H,J,ae),await ZarrArray.create(ge,P,se,H,K,oe)}async function empty$2(d,s={}){return s.fillValue=null,create$4({shape:d,...s})}async function zeros(d,s={}){return s.fillValue=0,create$4({shape:d,...s})}async function ones(d,s={}){return s.fillValue=1,create$4({shape:d,...s})}async function full(d,s,f={}){return f.fillValue=s,create$4({shape:d,...f})}async function array$2(d,s={}){let f=null;d instanceof NestedArray?(f=d.shape,s.dtype=s.dtype===void 0?d.dtype:s.dtype):f=d.byteLength;const _=s.readOnly===void 0?!1:s.readOnly;s.readOnly=!1;const S=await create$4({shape:f,...s});return await S.set(null,d),S.readOnly=_,S}function normalizeStoreArgument(d){return d===void 0?new MemoryStore:typeof d=="string"?new HTTPStore(d):d}let Group$1=class SB{constructor(s,f=null,_,S=!1,T=null,F=!0){this.store=s,this._chunkStore=T,this.path=normalizeStoragePath(f),this.keyPrefix=pathToPrefix(this.path),this.readOnly=S,this.meta=_;const M=this.keyPrefix+ATTRS_META_KEY;this.attrs=new Attributes(this.store,M,this.readOnly,F)}get name(){return this.path.length>0?this.path[0]!=="/"?"/"+this.path:this.path:"/"}get basename(){const s=this.name.split("/");return s[s.length-1]}get chunkStore(){return this._chunkStore?this._chunkStore:this.store}static async create(s,f=null,_=!1,S=null,T=!0){const F=await this.loadMetadataForConstructor(s,f);return new SB(s,f,F,_,S,T)}static async loadMetadataForConstructor(s,f){f=normalizeStoragePath(f);const _=pathToPrefix(f);try{const S=await s.getItem(_+GROUP_META_KEY);return parseMetadata(S)}catch{throw await containsArray(s,f)?new ContainsArrayError(f):new GroupNotFoundError(f)}}itemPath(s){const f=typeof s=="string"&&s.length>0&&s[0]==="/",_=normalizeStoragePath(s);return!f&&this.path.length>0?this.keyPrefix+_:_}async createGroup(s,f=!1){if(this.readOnly)throw new PermissionError("group is read only");const _=this.itemPath(s);return await initGroup(this.store,_,this._chunkStore,f),SB.create(this.store,_,this.readOnly,this._chunkStore,this.attrs.cache)}async requireGroup(s,f=!1){if(this.readOnly)throw new PermissionError("group is read only");const _=this.itemPath(s);return await containsGroup(this.store,_)||await initGroup(this.store,_,this._chunkStore,f),SB.create(this.store,_,this.readOnly,this._chunkStore,this.attrs.cache)}getOptsForArrayCreation(s,f={}){const _=this.itemPath(s);return f.path=_,f.cacheAttrs===void 0&&(f.cacheAttrs=this.attrs.cache),f.store=this.store,f.chunkStore=this.chunkStore,f}array(s,f,_,S){if(this.readOnly)throw new PermissionError("group is read only");return _=this.getOptsForArrayCreation(s,_),_.overwrite=S===void 0?_.overwrite:S,array$2(f,_)}empty(s,f,_={}){if(this.readOnly)throw new PermissionError("group is read only");return _=this.getOptsForArrayCreation(s,_),empty$2(f,_)}zeros(s,f,_={}){if(this.readOnly)throw new PermissionError("group is read only");return _=this.getOptsForArrayCreation(s,_),zeros(f,_)}ones(s,f,_={}){if(this.readOnly)throw new PermissionError("group is read only");return _=this.getOptsForArrayCreation(s,_),ones(f,_)}full(s,f,_,S={}){if(this.readOnly)throw new PermissionError("group is read only");return S=this.getOptsForArrayCreation(s,S),full(f,_,S)}createDataset(s,f,_,S){if(this.readOnly)throw new PermissionError("group is read only");S=this.getOptsForArrayCreation(s,S);let T;if(_===void 0){if(f===void 0)throw new ValueError("Shape must be set if no data is passed to CreateDataset");T=create$4({shape:f,...S})}else T=array$2(_,S);return T}async getItem(s){const f=this.itemPath(s);if(await containsArray(this.store,f))return ZarrArray.create(this.store,f,this.readOnly,this.chunkStore,void 0,this.attrs.cache);if(await containsGroup(this.store,f))return SB.create(this.store,f,this.readOnly,this._chunkStore,this.attrs.cache);throw new KeyError(s)}async setItem(s,f){return await this.array(s,f,{},!0),!0}async deleteItem(s){throw this.readOnly?new PermissionError("group is read only"):new Error("Method not implemented.")}async containsItem(s){const f=this.itemPath(s);return await containsArray(this.store,f)||containsGroup(this.store,f)}proxy(){return createProxy(this)}};async function openGroup(d,s=null,f="a",_,S=!0){if(d=normalizeStoreArgument(d),s=normalizeStoragePath(s),f==="r"||f==="r+"){if(!await containsGroup(d,s))throw await containsArray(d,s)?new ContainsArrayError(s):new GroupNotFoundError(s)}else if(f==="w")await initGroup(d,s,_,!0);else if(f==="a"){if(!await containsGroup(d,s)){if(await containsArray(d,s))throw new ContainsArrayError(s);await initGroup(d,s,_)}}else if(f==="w-"||f==="x"){if(await containsArray(d,s))throw new ContainsArrayError(s);if(await containsGroup(d,s))throw new ContainsGroupError(s);await initGroup(d,s,_)}else throw new ValueError(`Invalid mode argument: ${f}`);const T=f==="r";return Group$1.create(d,s,T,_,S)}/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2;function zero$2(d){let s=d.length;for(;--s>=0;)d[s]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES+2)*2);zero$2(static_ltree);const static_dtree=new Array(D_CODES*2);zero$2(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$2(_dist_code);const _length_code=new Array(MAX_MATCH-MIN_MATCH+1);zero$2(_length_code);const base_length=new Array(LENGTH_CODES);zero$2(base_length);const base_dist=new Array(D_CODES);zero$2(base_dist);function StaticTreeDesc(d,s,f,_,S){this.static_tree=d,this.extra_bits=s,this.extra_base=f,this.elems=_,this.max_length=S,this.has_stree=d&&d.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(d,s){this.dyn_tree=d,this.max_code=0,this.stat_desc=s}const d_code=d=>d<256?_dist_code[d]:_dist_code[256+(d>>>7)],put_short=(d,s)=>{d.pending_buf[d.pending++]=s&255,d.pending_buf[d.pending++]=s>>>8&255},send_bits=(d,s,f)=>{d.bi_valid>Buf_size-f?(d.bi_buf|=s<<d.bi_valid&65535,put_short(d,d.bi_buf),d.bi_buf=s>>Buf_size-d.bi_valid,d.bi_valid+=f-Buf_size):(d.bi_buf|=s<<d.bi_valid&65535,d.bi_valid+=f)},send_code=(d,s,f)=>{send_bits(d,f[s*2],f[s*2+1])},bi_reverse=(d,s)=>{let f=0;do f|=d&1,d>>>=1,f<<=1;while(--s>0);return f>>>1},bi_flush=d=>{d.bi_valid===16?(put_short(d,d.bi_buf),d.bi_buf=0,d.bi_valid=0):d.bi_valid>=8&&(d.pending_buf[d.pending++]=d.bi_buf&255,d.bi_buf>>=8,d.bi_valid-=8)},gen_bitlen=(d,s)=>{const f=s.dyn_tree,_=s.max_code,S=s.stat_desc.static_tree,T=s.stat_desc.has_stree,F=s.stat_desc.extra_bits,M=s.stat_desc.extra_base,P=s.stat_desc.max_length;let H,J,K,oe,se,ae,ge=0;for(oe=0;oe<=MAX_BITS;oe++)d.bl_count[oe]=0;for(f[d.heap[d.heap_max]*2+1]=0,H=d.heap_max+1;H<HEAP_SIZE;H++)J=d.heap[H],oe=f[f[J*2+1]*2+1]+1,oe>P&&(oe=P,ge++),f[J*2+1]=oe,!(J>_)&&(d.bl_count[oe]++,se=0,J>=M&&(se=F[J-M]),ae=f[J*2],d.opt_len+=ae*(oe+se),T&&(d.static_len+=ae*(S[J*2+1]+se)));if(ge!==0){do{for(oe=P-1;d.bl_count[oe]===0;)oe--;d.bl_count[oe]--,d.bl_count[oe+1]+=2,d.bl_count[P]--,ge-=2}while(ge>0);for(oe=P;oe!==0;oe--)for(J=d.bl_count[oe];J!==0;)K=d.heap[--H],!(K>_)&&(f[K*2+1]!==oe&&(d.opt_len+=(oe-f[K*2+1])*f[K*2],f[K*2+1]=oe),J--)}},gen_codes=(d,s,f)=>{const _=new Array(MAX_BITS+1);let S=0,T,F;for(T=1;T<=MAX_BITS;T++)_[T]=S=S+f[T-1]<<1;for(F=0;F<=s;F++){let M=d[F*2+1];M!==0&&(d[F*2]=bi_reverse(_[M]++,M))}},tr_static_init=()=>{let d,s,f,_,S;const T=new Array(MAX_BITS+1);for(f=0,_=0;_<LENGTH_CODES-1;_++)for(base_length[_]=f,d=0;d<1<<extra_lbits[_];d++)_length_code[f++]=_;for(_length_code[f-1]=_,S=0,_=0;_<16;_++)for(base_dist[_]=S,d=0;d<1<<extra_dbits[_];d++)_dist_code[S++]=_;for(S>>=7;_<D_CODES;_++)for(base_dist[_]=S<<7,d=0;d<1<<extra_dbits[_]-7;d++)_dist_code[256+S++]=_;for(s=0;s<=MAX_BITS;s++)T[s]=0;for(d=0;d<=143;)static_ltree[d*2+1]=8,d++,T[8]++;for(;d<=255;)static_ltree[d*2+1]=9,d++,T[9]++;for(;d<=279;)static_ltree[d*2+1]=7,d++,T[7]++;for(;d<=287;)static_ltree[d*2+1]=8,d++,T[8]++;for(gen_codes(static_ltree,L_CODES+1,T),d=0;d<D_CODES;d++)static_dtree[d*2+1]=5,static_dtree[d*2]=bi_reverse(d,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES,MAX_BL_BITS)},init_block=d=>{let s;for(s=0;s<L_CODES;s++)d.dyn_ltree[s*2]=0;for(s=0;s<D_CODES;s++)d.dyn_dtree[s*2]=0;for(s=0;s<BL_CODES;s++)d.bl_tree[s*2]=0;d.dyn_ltree[END_BLOCK*2]=1,d.opt_len=d.static_len=0,d.last_lit=d.matches=0},bi_windup=d=>{d.bi_valid>8?put_short(d,d.bi_buf):d.bi_valid>0&&(d.pending_buf[d.pending++]=d.bi_buf),d.bi_buf=0,d.bi_valid=0},copy_block=(d,s,f,_)=>{bi_windup(d),put_short(d,f),put_short(d,~f),d.pending_buf.set(d.window.subarray(s,s+f),d.pending),d.pending+=f},smaller=(d,s,f,_)=>{const S=s*2,T=f*2;return d[S]<d[T]||d[S]===d[T]&&_[s]<=_[f]},pqdownheap=(d,s,f)=>{const _=d.heap[f];let S=f<<1;for(;S<=d.heap_len&&(S<d.heap_len&&smaller(s,d.heap[S+1],d.heap[S],d.depth)&&S++,!smaller(s,_,d.heap[S],d.depth));)d.heap[f]=d.heap[S],f=S,S<<=1;d.heap[f]=_},compress_block=(d,s,f)=>{let _,S,T=0,F,M;if(d.last_lit!==0)do _=d.pending_buf[d.d_buf+T*2]<<8|d.pending_buf[d.d_buf+T*2+1],S=d.pending_buf[d.l_buf+T],T++,_===0?send_code(d,S,s):(F=_length_code[S],send_code(d,F+LITERALS+1,s),M=extra_lbits[F],M!==0&&(S-=base_length[F],send_bits(d,S,M)),_--,F=d_code(_),send_code(d,F,f),M=extra_dbits[F],M!==0&&(_-=base_dist[F],send_bits(d,_,M)));while(T<d.last_lit);send_code(d,END_BLOCK,s)},build_tree=(d,s)=>{const f=s.dyn_tree,_=s.stat_desc.static_tree,S=s.stat_desc.has_stree,T=s.stat_desc.elems;let F,M,P=-1,H;for(d.heap_len=0,d.heap_max=HEAP_SIZE,F=0;F<T;F++)f[F*2]!==0?(d.heap[++d.heap_len]=P=F,d.depth[F]=0):f[F*2+1]=0;for(;d.heap_len<2;)H=d.heap[++d.heap_len]=P<2?++P:0,f[H*2]=1,d.depth[H]=0,d.opt_len--,S&&(d.static_len-=_[H*2+1]);for(s.max_code=P,F=d.heap_len>>1;F>=1;F--)pqdownheap(d,f,F);H=T;do F=d.heap[1],d.heap[1]=d.heap[d.heap_len--],pqdownheap(d,f,1),M=d.heap[1],d.heap[--d.heap_max]=F,d.heap[--d.heap_max]=M,f[H*2]=f[F*2]+f[M*2],d.depth[H]=(d.depth[F]>=d.depth[M]?d.depth[F]:d.depth[M])+1,f[F*2+1]=f[M*2+1]=H,d.heap[1]=H++,pqdownheap(d,f,1);while(d.heap_len>=2);d.heap[--d.heap_max]=d.heap[1],gen_bitlen(d,s),gen_codes(f,P,d.bl_count)},scan_tree=(d,s,f)=>{let _,S=-1,T,F=s[0*2+1],M=0,P=7,H=4;for(F===0&&(P=138,H=3),s[(f+1)*2+1]=65535,_=0;_<=f;_++)T=F,F=s[(_+1)*2+1],!(++M<P&&T===F)&&(M<H?d.bl_tree[T*2]+=M:T!==0?(T!==S&&d.bl_tree[T*2]++,d.bl_tree[REP_3_6*2]++):M<=10?d.bl_tree[REPZ_3_10*2]++:d.bl_tree[REPZ_11_138*2]++,M=0,S=T,F===0?(P=138,H=3):T===F?(P=6,H=3):(P=7,H=4))},send_tree=(d,s,f)=>{let _,S=-1,T,F=s[0*2+1],M=0,P=7,H=4;for(F===0&&(P=138,H=3),_=0;_<=f;_++)if(T=F,F=s[(_+1)*2+1],!(++M<P&&T===F)){if(M<H)do send_code(d,T,d.bl_tree);while(--M!==0);else T!==0?(T!==S&&(send_code(d,T,d.bl_tree),M--),send_code(d,REP_3_6,d.bl_tree),send_bits(d,M-3,2)):M<=10?(send_code(d,REPZ_3_10,d.bl_tree),send_bits(d,M-3,3)):(send_code(d,REPZ_11_138,d.bl_tree),send_bits(d,M-11,7));M=0,S=T,F===0?(P=138,H=3):T===F?(P=6,H=3):(P=7,H=4)}},build_bl_tree=d=>{let s;for(scan_tree(d,d.dyn_ltree,d.l_desc.max_code),scan_tree(d,d.dyn_dtree,d.d_desc.max_code),build_tree(d,d.bl_desc),s=BL_CODES-1;s>=3&&d.bl_tree[bl_order[s]*2+1]===0;s--);return d.opt_len+=3*(s+1)+5+5+4,s},send_all_trees=(d,s,f,_)=>{let S;for(send_bits(d,s-257,5),send_bits(d,f-1,5),send_bits(d,_-4,4),S=0;S<_;S++)send_bits(d,d.bl_tree[bl_order[S]*2+1],3);send_tree(d,d.dyn_ltree,s-1),send_tree(d,d.dyn_dtree,f-1)},detect_data_type=d=>{let s=4093624447,f;for(f=0;f<=31;f++,s>>>=1)if(s&1&&d.dyn_ltree[f*2]!==0)return Z_BINARY;if(d.dyn_ltree[9*2]!==0||d.dyn_ltree[10*2]!==0||d.dyn_ltree[13*2]!==0)return Z_TEXT;for(f=32;f<LITERALS;f++)if(d.dyn_ltree[f*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init=d=>{static_init_done||(tr_static_init(),static_init_done=!0),d.l_desc=new TreeDesc(d.dyn_ltree,static_l_desc),d.d_desc=new TreeDesc(d.dyn_dtree,static_d_desc),d.bl_desc=new TreeDesc(d.bl_tree,static_bl_desc),d.bi_buf=0,d.bi_valid=0,init_block(d)},_tr_stored_block=(d,s,f,_)=>{send_bits(d,(STORED_BLOCK<<1)+(_?1:0),3),copy_block(d,s,f)},_tr_align=d=>{send_bits(d,STATIC_TREES<<1,3),send_code(d,END_BLOCK,static_ltree),bi_flush(d)},_tr_flush_block=(d,s,f,_)=>{let S,T,F=0;d.level>0?(d.strm.data_type===Z_UNKNOWN&&(d.strm.data_type=detect_data_type(d)),build_tree(d,d.l_desc),build_tree(d,d.d_desc),F=build_bl_tree(d),S=d.opt_len+3+7>>>3,T=d.static_len+3+7>>>3,T<=S&&(S=T)):S=T=f+5,f+4<=S&&s!==-1?_tr_stored_block(d,s,f,_):d.strategy===Z_FIXED||T===S?(send_bits(d,(STATIC_TREES<<1)+(_?1:0),3),compress_block(d,static_ltree,static_dtree)):(send_bits(d,(DYN_TREES<<1)+(_?1:0),3),send_all_trees(d,d.l_desc.max_code+1,d.d_desc.max_code+1,F+1),compress_block(d,d.dyn_ltree,d.dyn_dtree)),init_block(d),_&&bi_windup(d)},_tr_tally=(d,s,f)=>(d.pending_buf[d.d_buf+d.last_lit*2]=s>>>8&255,d.pending_buf[d.d_buf+d.last_lit*2+1]=s&255,d.pending_buf[d.l_buf+d.last_lit]=f&255,d.last_lit++,s===0?d.dyn_ltree[f*2]++:(d.matches++,s--,d.dyn_ltree[(_length_code[f]+LITERALS+1)*2]++,d.dyn_dtree[d_code(s)*2]++),d.last_lit===d.lit_bufsize-1);var _tr_init_1=_tr_init,_tr_stored_block_1=_tr_stored_block,_tr_flush_block_1=_tr_flush_block,_tr_tally_1=_tr_tally,_tr_align_1=_tr_align,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(d,s,f,_)=>{let S=d&65535|0,T=d>>>16&65535|0,F=0;for(;f!==0;){F=f>2e3?2e3:f,f-=F;do S=S+s[_++]|0,T=T+S|0;while(--F);S%=65521,T%=65521}return S|T<<16|0};var adler32_1=adler32;const makeTable=()=>{let d,s=[];for(var f=0;f<256;f++){d=f;for(var _=0;_<8;_++)d=d&1?3988292384^d>>>1:d>>>1;s[f]=d}return s},crcTable=new Uint32Array(makeTable()),crc32=(d,s,f,_)=>{const S=crcTable,T=_+f;d^=-1;for(let F=_;F<T;F++)d=d>>>8^S[(d^s[F])&255];return d^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:_tr_init$1,_tr_stored_block:_tr_stored_block$1,_tr_flush_block:_tr_flush_block$1,_tr_tally:_tr_tally$1,_tr_align:_tr_align$1}=trees,{Z_NO_FLUSH,Z_PARTIAL_FLUSH,Z_FULL_FLUSH,Z_FINISH,Z_BLOCK,Z_OK,Z_STREAM_END,Z_STREAM_ERROR,Z_DATA_ERROR,Z_BUF_ERROR,Z_DEFAULT_COMPRESSION,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED:Z_FIXED$1,Z_DEFAULT_STRATEGY,Z_UNKNOWN:Z_UNKNOWN$1,Z_DEFLATED}=constants$1,MAX_MEM_LEVEL=9,MAX_WBITS=15,DEF_MEM_LEVEL=8,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,MIN_MATCH$1=3,MAX_MATCH$1=258,MIN_LOOKAHEAD=MAX_MATCH$1+MIN_MATCH$1+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(d,s)=>(d.msg=messages[s],s),rank=d=>(d<<1)-(d>4?9:0),zero$1$1=d=>{let s=d.length;for(;--s>=0;)d[s]=0};let HASH_ZLIB=(d,s,f)=>(s<<d.hash_shift^f)&d.hash_mask,HASH=HASH_ZLIB;const flush_pending=d=>{const s=d.state;let f=s.pending;f>d.avail_out&&(f=d.avail_out),f!==0&&(d.output.set(s.pending_buf.subarray(s.pending_out,s.pending_out+f),d.next_out),d.next_out+=f,s.pending_out+=f,d.total_out+=f,d.avail_out-=f,s.pending-=f,s.pending===0&&(s.pending_out=0))},flush_block_only=(d,s)=>{_tr_flush_block$1(d,d.block_start>=0?d.block_start:-1,d.strstart-d.block_start,s),d.block_start=d.strstart,flush_pending(d.strm)},put_byte=(d,s)=>{d.pending_buf[d.pending++]=s},putShortMSB=(d,s)=>{d.pending_buf[d.pending++]=s>>>8&255,d.pending_buf[d.pending++]=s&255},read_buf=(d,s,f,_)=>{let S=d.avail_in;return S>_&&(S=_),S===0?0:(d.avail_in-=S,s.set(d.input.subarray(d.next_in,d.next_in+S),f),d.state.wrap===1?d.adler=adler32_1(d.adler,s,S,f):d.state.wrap===2&&(d.adler=crc32_1(d.adler,s,S,f)),d.next_in+=S,d.total_in+=S,S)},longest_match=(d,s)=>{let f=d.max_chain_length,_=d.strstart,S,T,F=d.prev_length,M=d.nice_match;const P=d.strstart>d.w_size-MIN_LOOKAHEAD?d.strstart-(d.w_size-MIN_LOOKAHEAD):0,H=d.window,J=d.w_mask,K=d.prev,oe=d.strstart+MAX_MATCH$1;let se=H[_+F-1],ae=H[_+F];d.prev_length>=d.good_match&&(f>>=2),M>d.lookahead&&(M=d.lookahead);do if(S=s,!(H[S+F]!==ae||H[S+F-1]!==se||H[S]!==H[_]||H[++S]!==H[_+1])){_+=2,S++;do;while(H[++_]===H[++S]&&H[++_]===H[++S]&&H[++_]===H[++S]&&H[++_]===H[++S]&&H[++_]===H[++S]&&H[++_]===H[++S]&&H[++_]===H[++S]&&H[++_]===H[++S]&&_<oe);if(T=MAX_MATCH$1-(oe-_),_=oe-MAX_MATCH$1,T>F){if(d.match_start=s,F=T,T>=M)break;se=H[_+F-1],ae=H[_+F]}}while((s=K[s&J])>P&&--f!==0);return F<=d.lookahead?F:d.lookahead},fill_window=d=>{const s=d.w_size;let f,_,S,T,F;do{if(T=d.window_size-d.lookahead-d.strstart,d.strstart>=s+(s-MIN_LOOKAHEAD)){d.window.set(d.window.subarray(s,s+s),0),d.match_start-=s,d.strstart-=s,d.block_start-=s,_=d.hash_size,f=_;do S=d.head[--f],d.head[f]=S>=s?S-s:0;while(--_);_=s,f=_;do S=d.prev[--f],d.prev[f]=S>=s?S-s:0;while(--_);T+=s}if(d.strm.avail_in===0)break;if(_=read_buf(d.strm,d.window,d.strstart+d.lookahead,T),d.lookahead+=_,d.lookahead+d.insert>=MIN_MATCH$1)for(F=d.strstart-d.insert,d.ins_h=d.window[F],d.ins_h=HASH(d,d.ins_h,d.window[F+1]);d.insert&&(d.ins_h=HASH(d,d.ins_h,d.window[F+MIN_MATCH$1-1]),d.prev[F&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=F,F++,d.insert--,!(d.lookahead+d.insert<MIN_MATCH$1)););}while(d.lookahead<MIN_LOOKAHEAD&&d.strm.avail_in!==0)},deflate_stored=(d,s)=>{let f=65535;for(f>d.pending_buf_size-5&&(f=d.pending_buf_size-5);;){if(d.lookahead<=1){if(fill_window(d),d.lookahead===0&&s===Z_NO_FLUSH)return BS_NEED_MORE;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;const _=d.block_start+f;if((d.strstart===0||d.strstart>=_)&&(d.lookahead=d.strstart-_,d.strstart=_,flush_block_only(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-MIN_LOOKAHEAD&&(flush_block_only(d,!1),d.strm.avail_out===0))return BS_NEED_MORE}return d.insert=0,s===Z_FINISH?(flush_block_only(d,!0),d.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):(d.strstart>d.block_start&&(flush_block_only(d,!1),d.strm.avail_out===0),BS_NEED_MORE)},deflate_fast=(d,s)=>{let f,_;for(;;){if(d.lookahead<MIN_LOOKAHEAD){if(fill_window(d),d.lookahead<MIN_LOOKAHEAD&&s===Z_NO_FLUSH)return BS_NEED_MORE;if(d.lookahead===0)break}if(f=0,d.lookahead>=MIN_MATCH$1&&(d.ins_h=HASH(d,d.ins_h,d.window[d.strstart+MIN_MATCH$1-1]),f=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),f!==0&&d.strstart-f<=d.w_size-MIN_LOOKAHEAD&&(d.match_length=longest_match(d,f)),d.match_length>=MIN_MATCH$1)if(_=_tr_tally$1(d,d.strstart-d.match_start,d.match_length-MIN_MATCH$1),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=MIN_MATCH$1){d.match_length--;do d.strstart++,d.ins_h=HASH(d,d.ins_h,d.window[d.strstart+MIN_MATCH$1-1]),f=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart;while(--d.match_length!==0);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=HASH(d,d.ins_h,d.window[d.strstart+1]);else _=_tr_tally$1(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(_&&(flush_block_only(d,!1),d.strm.avail_out===0))return BS_NEED_MORE}return d.insert=d.strstart<MIN_MATCH$1-1?d.strstart:MIN_MATCH$1-1,s===Z_FINISH?(flush_block_only(d,!0),d.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):d.last_lit&&(flush_block_only(d,!1),d.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(d,s)=>{let f,_,S;for(;;){if(d.lookahead<MIN_LOOKAHEAD){if(fill_window(d),d.lookahead<MIN_LOOKAHEAD&&s===Z_NO_FLUSH)return BS_NEED_MORE;if(d.lookahead===0)break}if(f=0,d.lookahead>=MIN_MATCH$1&&(d.ins_h=HASH(d,d.ins_h,d.window[d.strstart+MIN_MATCH$1-1]),f=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=MIN_MATCH$1-1,f!==0&&d.prev_length<d.max_lazy_match&&d.strstart-f<=d.w_size-MIN_LOOKAHEAD&&(d.match_length=longest_match(d,f),d.match_length<=5&&(d.strategy===Z_FILTERED||d.match_length===MIN_MATCH$1&&d.strstart-d.match_start>4096)&&(d.match_length=MIN_MATCH$1-1)),d.prev_length>=MIN_MATCH$1&&d.match_length<=d.prev_length){S=d.strstart+d.lookahead-MIN_MATCH$1,_=_tr_tally$1(d,d.strstart-1-d.prev_match,d.prev_length-MIN_MATCH$1),d.lookahead-=d.prev_length-1,d.prev_length-=2;do++d.strstart<=S&&(d.ins_h=HASH(d,d.ins_h,d.window[d.strstart+MIN_MATCH$1-1]),f=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart);while(--d.prev_length!==0);if(d.match_available=0,d.match_length=MIN_MATCH$1-1,d.strstart++,_&&(flush_block_only(d,!1),d.strm.avail_out===0))return BS_NEED_MORE}else if(d.match_available){if(_=_tr_tally$1(d,0,d.window[d.strstart-1]),_&&flush_block_only(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return BS_NEED_MORE}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(_=_tr_tally$1(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<MIN_MATCH$1-1?d.strstart:MIN_MATCH$1-1,s===Z_FINISH?(flush_block_only(d,!0),d.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):d.last_lit&&(flush_block_only(d,!1),d.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(d,s)=>{let f,_,S,T;const F=d.window;for(;;){if(d.lookahead<=MAX_MATCH$1){if(fill_window(d),d.lookahead<=MAX_MATCH$1&&s===Z_NO_FLUSH)return BS_NEED_MORE;if(d.lookahead===0)break}if(d.match_length=0,d.lookahead>=MIN_MATCH$1&&d.strstart>0&&(S=d.strstart-1,_=F[S],_===F[++S]&&_===F[++S]&&_===F[++S])){T=d.strstart+MAX_MATCH$1;do;while(_===F[++S]&&_===F[++S]&&_===F[++S]&&_===F[++S]&&_===F[++S]&&_===F[++S]&&_===F[++S]&&_===F[++S]&&S<T);d.match_length=MAX_MATCH$1-(T-S),d.match_length>d.lookahead&&(d.match_length=d.lookahead)}if(d.match_length>=MIN_MATCH$1?(f=_tr_tally$1(d,1,d.match_length-MIN_MATCH$1),d.lookahead-=d.match_length,d.strstart+=d.match_length,d.match_length=0):(f=_tr_tally$1(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++),f&&(flush_block_only(d,!1),d.strm.avail_out===0))return BS_NEED_MORE}return d.insert=0,s===Z_FINISH?(flush_block_only(d,!0),d.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):d.last_lit&&(flush_block_only(d,!1),d.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(d,s)=>{let f;for(;;){if(d.lookahead===0&&(fill_window(d),d.lookahead===0)){if(s===Z_NO_FLUSH)return BS_NEED_MORE;break}if(d.match_length=0,f=_tr_tally$1(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++,f&&(flush_block_only(d,!1),d.strm.avail_out===0))return BS_NEED_MORE}return d.insert=0,s===Z_FINISH?(flush_block_only(d,!0),d.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):d.last_lit&&(flush_block_only(d,!1),d.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(d,s,f,_,S){this.good_length=d,this.max_lazy=s,this.nice_length=f,this.max_chain=_,this.func=S}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=d=>{d.window_size=2*d.w_size,zero$1$1(d.head),d.max_lazy_match=configuration_table[d.level].max_lazy,d.good_match=configuration_table[d.level].good_length,d.nice_match=configuration_table[d.level].nice_length,d.max_chain_length=configuration_table[d.level].max_chain,d.strstart=0,d.block_start=0,d.lookahead=0,d.insert=0,d.match_length=d.prev_length=MIN_MATCH$1-1,d.match_available=0,d.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE$1*2),this.dyn_dtree=new Uint16Array((2*D_CODES$1+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES$1+1)*2),zero$1$1(this.dyn_ltree),zero$1$1(this.dyn_dtree),zero$1$1(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS$1+1),this.heap=new Uint16Array(2*L_CODES$1+1),zero$1$1(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES$1+1),zero$1$1(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateResetKeep=d=>{if(!d||!d.state)return err(d,Z_STREAM_ERROR);d.total_in=d.total_out=0,d.data_type=Z_UNKNOWN$1;const s=d.state;return s.pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=s.wrap?INIT_STATE:BUSY_STATE,d.adler=s.wrap===2?0:1,s.last_flush=Z_NO_FLUSH,_tr_init$1(s),Z_OK},deflateReset=d=>{const s=deflateResetKeep(d);return s===Z_OK&&lm_init(d.state),s},deflateSetHeader=(d,s)=>!d||!d.state||d.state.wrap!==2?Z_STREAM_ERROR:(d.state.gzhead=s,Z_OK),deflateInit2=(d,s,f,_,S,T)=>{if(!d)return Z_STREAM_ERROR;let F=1;if(s===Z_DEFAULT_COMPRESSION&&(s=6),_<0?(F=0,_=-_):_>15&&(F=2,_-=16),S<1||S>MAX_MEM_LEVEL||f!==Z_DEFLATED||_<8||_>15||s<0||s>9||T<0||T>Z_FIXED$1)return err(d,Z_STREAM_ERROR);_===8&&(_=9);const M=new DeflateState;return d.state=M,M.strm=d,M.wrap=F,M.gzhead=null,M.w_bits=_,M.w_size=1<<M.w_bits,M.w_mask=M.w_size-1,M.hash_bits=S+7,M.hash_size=1<<M.hash_bits,M.hash_mask=M.hash_size-1,M.hash_shift=~~((M.hash_bits+MIN_MATCH$1-1)/MIN_MATCH$1),M.window=new Uint8Array(M.w_size*2),M.head=new Uint16Array(M.hash_size),M.prev=new Uint16Array(M.w_size),M.lit_bufsize=1<<S+6,M.pending_buf_size=M.lit_bufsize*4,M.pending_buf=new Uint8Array(M.pending_buf_size),M.d_buf=1*M.lit_bufsize,M.l_buf=3*M.lit_bufsize,M.level=s,M.strategy=T,M.method=f,deflateReset(d)},deflateInit=(d,s)=>deflateInit2(d,s,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY),deflate=(d,s)=>{let f,_;if(!d||!d.state||s>Z_BLOCK||s<0)return d?err(d,Z_STREAM_ERROR):Z_STREAM_ERROR;const S=d.state;if(!d.output||!d.input&&d.avail_in!==0||S.status===FINISH_STATE&&s!==Z_FINISH)return err(d,d.avail_out===0?Z_BUF_ERROR:Z_STREAM_ERROR);S.strm=d;const T=S.last_flush;if(S.last_flush=s,S.status===INIT_STATE)if(S.wrap===2)d.adler=0,put_byte(S,31),put_byte(S,139),put_byte(S,8),S.gzhead?(put_byte(S,(S.gzhead.text?1:0)+(S.gzhead.hcrc?2:0)+(S.gzhead.extra?4:0)+(S.gzhead.name?8:0)+(S.gzhead.comment?16:0)),put_byte(S,S.gzhead.time&255),put_byte(S,S.gzhead.time>>8&255),put_byte(S,S.gzhead.time>>16&255),put_byte(S,S.gzhead.time>>24&255),put_byte(S,S.level===9?2:S.strategy>=Z_HUFFMAN_ONLY||S.level<2?4:0),put_byte(S,S.gzhead.os&255),S.gzhead.extra&&S.gzhead.extra.length&&(put_byte(S,S.gzhead.extra.length&255),put_byte(S,S.gzhead.extra.length>>8&255)),S.gzhead.hcrc&&(d.adler=crc32_1(d.adler,S.pending_buf,S.pending,0)),S.gzindex=0,S.status=EXTRA_STATE):(put_byte(S,0),put_byte(S,0),put_byte(S,0),put_byte(S,0),put_byte(S,0),put_byte(S,S.level===9?2:S.strategy>=Z_HUFFMAN_ONLY||S.level<2?4:0),put_byte(S,OS_CODE),S.status=BUSY_STATE);else{let F=Z_DEFLATED+(S.w_bits-8<<4)<<8,M=-1;S.strategy>=Z_HUFFMAN_ONLY||S.level<2?M=0:S.level<6?M=1:S.level===6?M=2:M=3,F|=M<<6,S.strstart!==0&&(F|=PRESET_DICT),F+=31-F%31,S.status=BUSY_STATE,putShortMSB(S,F),S.strstart!==0&&(putShortMSB(S,d.adler>>>16),putShortMSB(S,d.adler&65535)),d.adler=1}if(S.status===EXTRA_STATE)if(S.gzhead.extra){for(f=S.pending;S.gzindex<(S.gzhead.extra.length&65535)&&!(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>f&&(d.adler=crc32_1(d.adler,S.pending_buf,S.pending-f,f)),flush_pending(d),f=S.pending,S.pending===S.pending_buf_size));)put_byte(S,S.gzhead.extra[S.gzindex]&255),S.gzindex++;S.gzhead.hcrc&&S.pending>f&&(d.adler=crc32_1(d.adler,S.pending_buf,S.pending-f,f)),S.gzindex===S.gzhead.extra.length&&(S.gzindex=0,S.status=NAME_STATE)}else S.status=NAME_STATE;if(S.status===NAME_STATE)if(S.gzhead.name){f=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>f&&(d.adler=crc32_1(d.adler,S.pending_buf,S.pending-f,f)),flush_pending(d),f=S.pending,S.pending===S.pending_buf_size)){_=1;break}S.gzindex<S.gzhead.name.length?_=S.gzhead.name.charCodeAt(S.gzindex++)&255:_=0,put_byte(S,_)}while(_!==0);S.gzhead.hcrc&&S.pending>f&&(d.adler=crc32_1(d.adler,S.pending_buf,S.pending-f,f)),_===0&&(S.gzindex=0,S.status=COMMENT_STATE)}else S.status=COMMENT_STATE;if(S.status===COMMENT_STATE)if(S.gzhead.comment){f=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>f&&(d.adler=crc32_1(d.adler,S.pending_buf,S.pending-f,f)),flush_pending(d),f=S.pending,S.pending===S.pending_buf_size)){_=1;break}S.gzindex<S.gzhead.comment.length?_=S.gzhead.comment.charCodeAt(S.gzindex++)&255:_=0,put_byte(S,_)}while(_!==0);S.gzhead.hcrc&&S.pending>f&&(d.adler=crc32_1(d.adler,S.pending_buf,S.pending-f,f)),_===0&&(S.status=HCRC_STATE)}else S.status=HCRC_STATE;if(S.status===HCRC_STATE&&(S.gzhead.hcrc?(S.pending+2>S.pending_buf_size&&flush_pending(d),S.pending+2<=S.pending_buf_size&&(put_byte(S,d.adler&255),put_byte(S,d.adler>>8&255),d.adler=0,S.status=BUSY_STATE)):S.status=BUSY_STATE),S.pending!==0){if(flush_pending(d),d.avail_out===0)return S.last_flush=-1,Z_OK}else if(d.avail_in===0&&rank(s)<=rank(T)&&s!==Z_FINISH)return err(d,Z_BUF_ERROR);if(S.status===FINISH_STATE&&d.avail_in!==0)return err(d,Z_BUF_ERROR);if(d.avail_in!==0||S.lookahead!==0||s!==Z_NO_FLUSH&&S.status!==FINISH_STATE){let F=S.strategy===Z_HUFFMAN_ONLY?deflate_huff(S,s):S.strategy===Z_RLE?deflate_rle(S,s):configuration_table[S.level].func(S,s);if((F===BS_FINISH_STARTED||F===BS_FINISH_DONE)&&(S.status=FINISH_STATE),F===BS_NEED_MORE||F===BS_FINISH_STARTED)return d.avail_out===0&&(S.last_flush=-1),Z_OK;if(F===BS_BLOCK_DONE&&(s===Z_PARTIAL_FLUSH?_tr_align$1(S):s!==Z_BLOCK&&(_tr_stored_block$1(S,0,0,!1),s===Z_FULL_FLUSH&&(zero$1$1(S.head),S.lookahead===0&&(S.strstart=0,S.block_start=0,S.insert=0))),flush_pending(d),d.avail_out===0))return S.last_flush=-1,Z_OK}return s!==Z_FINISH?Z_OK:S.wrap<=0?Z_STREAM_END:(S.wrap===2?(put_byte(S,d.adler&255),put_byte(S,d.adler>>8&255),put_byte(S,d.adler>>16&255),put_byte(S,d.adler>>24&255),put_byte(S,d.total_in&255),put_byte(S,d.total_in>>8&255),put_byte(S,d.total_in>>16&255),put_byte(S,d.total_in>>24&255)):(putShortMSB(S,d.adler>>>16),putShortMSB(S,d.adler&65535)),flush_pending(d),S.wrap>0&&(S.wrap=-S.wrap),S.pending!==0?Z_OK:Z_STREAM_END)},deflateEnd=d=>{if(!d||!d.state)return Z_STREAM_ERROR;const s=d.state.status;return s!==INIT_STATE&&s!==EXTRA_STATE&&s!==NAME_STATE&&s!==COMMENT_STATE&&s!==HCRC_STATE&&s!==BUSY_STATE&&s!==FINISH_STATE?err(d,Z_STREAM_ERROR):(d.state=null,s===BUSY_STATE?err(d,Z_DATA_ERROR):Z_OK)},deflateSetDictionary=(d,s)=>{let f=s.length;if(!d||!d.state)return Z_STREAM_ERROR;const _=d.state,S=_.wrap;if(S===2||S===1&&_.status!==INIT_STATE||_.lookahead)return Z_STREAM_ERROR;if(S===1&&(d.adler=adler32_1(d.adler,s,f,0)),_.wrap=0,f>=_.w_size){S===0&&(zero$1$1(_.head),_.strstart=0,_.block_start=0,_.insert=0);let P=new Uint8Array(_.w_size);P.set(s.subarray(f-_.w_size,f),0),s=P,f=_.w_size}const T=d.avail_in,F=d.next_in,M=d.input;for(d.avail_in=f,d.next_in=0,d.input=s,fill_window(_);_.lookahead>=MIN_MATCH$1;){let P=_.strstart,H=_.lookahead-(MIN_MATCH$1-1);do _.ins_h=HASH(_,_.ins_h,_.window[P+MIN_MATCH$1-1]),_.prev[P&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=P,P++;while(--H);_.strstart=P,_.lookahead=MIN_MATCH$1-1,fill_window(_)}return _.strstart+=_.lookahead,_.block_start=_.strstart,_.insert=_.lookahead,_.lookahead=0,_.match_length=_.prev_length=MIN_MATCH$1-1,_.match_available=0,d.next_in=F,d.input=M,d.avail_in=T,_.wrap=S,Z_OK};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2=deflate,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(d,s)=>Object.prototype.hasOwnProperty.call(d,s);var assign=function(d){const s=Array.prototype.slice.call(arguments,1);for(;s.length;){const f=s.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(const _ in f)_has(f,_)&&(d[_]=f[_])}}return d},flattenChunks=d=>{let s=0;for(let _=0,S=d.length;_<S;_++)s+=d[_].length;const f=new Uint8Array(s);for(let _=0,S=0,T=d.length;_<T;_++){let F=d[_];f.set(F,S),S+=F.length}return f},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(d){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let d=0;d<256;d++)_utf8len[d]=d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=d=>{let s,f,_,S,T,F=d.length,M=0;for(S=0;S<F;S++)f=d.charCodeAt(S),(f&64512)===55296&&S+1<F&&(_=d.charCodeAt(S+1),(_&64512)===56320&&(f=65536+(f-55296<<10)+(_-56320),S++)),M+=f<128?1:f<2048?2:f<65536?3:4;for(s=new Uint8Array(M),T=0,S=0;T<M;S++)f=d.charCodeAt(S),(f&64512)===55296&&S+1<F&&(_=d.charCodeAt(S+1),(_&64512)===56320&&(f=65536+(f-55296<<10)+(_-56320),S++)),f<128?s[T++]=f:f<2048?(s[T++]=192|f>>>6,s[T++]=128|f&63):f<65536?(s[T++]=224|f>>>12,s[T++]=128|f>>>6&63,s[T++]=128|f&63):(s[T++]=240|f>>>18,s[T++]=128|f>>>12&63,s[T++]=128|f>>>6&63,s[T++]=128|f&63);return s};const buf2binstring=(d,s)=>{if(s<65534&&d.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,d.length===s?d:d.subarray(0,s));let f="";for(let _=0;_<s;_++)f+=String.fromCharCode(d[_]);return f};var buf2string=(d,s)=>{let f,_;const S=s||d.length,T=new Array(S*2);for(_=0,f=0;f<S;){let F=d[f++];if(F<128){T[_++]=F;continue}let M=_utf8len[F];if(M>4){T[_++]=65533,f+=M-1;continue}for(F&=M===2?31:M===3?15:7;M>1&&f<S;)F=F<<6|d[f++]&63,M--;if(M>1){T[_++]=65533;continue}F<65536?T[_++]=F:(F-=65536,T[_++]=55296|F>>10&1023,T[_++]=56320|F&1023)}return buf2binstring(T,_)},utf8border=(d,s)=>{s=s||d.length,s>d.length&&(s=d.length);let f=s-1;for(;f>=0&&(d[f]&192)===128;)f--;return f<0||f===0?s:f+_utf8len[d[f]]>s?f:s},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$1,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_DEFLATED:Z_DEFLATED$1}=constants$1;function Deflate(d){this.options=common.assign({level:Z_DEFAULT_COMPRESSION$1,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY$1},d||{});let s=this.options;s.raw&&s.windowBits>0?s.windowBits=-s.windowBits:s.gzip&&s.windowBits>0&&s.windowBits<16&&(s.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let f=deflate_1.deflateInit2(this.strm,s.level,s.method,s.windowBits,s.memLevel,s.strategy);if(f!==Z_OK$1)throw new Error(messages[f]);if(s.header&&deflate_1.deflateSetHeader(this.strm,s.header),s.dictionary){let _;if(typeof s.dictionary=="string"?_=strings.string2buf(s.dictionary):toString$1.call(s.dictionary)==="[object ArrayBuffer]"?_=new Uint8Array(s.dictionary):_=s.dictionary,f=deflate_1.deflateSetDictionary(this.strm,_),f!==Z_OK$1)throw new Error(messages[f]);this._dict_set=!0}}Deflate.prototype.push=function(d,s){const f=this.strm,_=this.options.chunkSize;let S,T;if(this.ended)return!1;for(s===~~s?T=s:T=s===!0?Z_FINISH$1:Z_NO_FLUSH$1,typeof d=="string"?f.input=strings.string2buf(d):toString$1.call(d)==="[object ArrayBuffer]"?f.input=new Uint8Array(d):f.input=d,f.next_in=0,f.avail_in=f.input.length;;){if(f.avail_out===0&&(f.output=new Uint8Array(_),f.next_out=0,f.avail_out=_),(T===Z_SYNC_FLUSH||T===Z_FULL_FLUSH$1)&&f.avail_out<=6){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(S=deflate_1.deflate(f,T),S===Z_STREAM_END$1)return f.next_out>0&&this.onData(f.output.subarray(0,f.next_out)),S=deflate_1.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===Z_OK$1;if(f.avail_out===0){this.onData(f.output);continue}if(T>0&&f.next_out>0){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(f.avail_in===0)break}return!0};Deflate.prototype.onData=function(d){this.chunks.push(d)};Deflate.prototype.onEnd=function(d){d===Z_OK$1&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg};function deflate$1(d,s){const f=new Deflate(s);if(f.push(d,!0),f.err)throw f.msg||messages[f.err];return f.result}function deflateRaw(d,s){return s=s||{},s.raw=!0,deflate$1(d,s)}function gzip(d,s){return s=s||{},s.gzip=!0,deflate$1(d,s)}var Deflate_1=Deflate,deflate_2$1=deflate$1,deflateRaw_1=deflateRaw,gzip_1=gzip,constants$1$1=constants$1,deflate_1$1={Deflate:Deflate_1,deflate:deflate_2$1,deflateRaw:deflateRaw_1,gzip:gzip_1,constants:constants$1$1};const BAD=30,TYPE=12;var inffast=function d(s,f){let _,S,T,F,M,P,H,J,K,oe,se,ae,ge,he,Be,pe,be,Re,Fe,Me,ve,At,Ct,Rt;const It=s.state;_=s.next_in,Ct=s.input,S=_+(s.avail_in-5),T=s.next_out,Rt=s.output,F=T-(f-s.avail_out),M=T+(s.avail_out-257),P=It.dmax,H=It.wsize,J=It.whave,K=It.wnext,oe=It.window,se=It.hold,ae=It.bits,ge=It.lencode,he=It.distcode,Be=(1<<It.lenbits)-1,pe=(1<<It.distbits)-1;e:do{ae<15&&(se+=Ct[_++]<<ae,ae+=8,se+=Ct[_++]<<ae,ae+=8),be=ge[se&Be];t:for(;;){if(Re=be>>>24,se>>>=Re,ae-=Re,Re=be>>>16&255,Re===0)Rt[T++]=be&65535;else if(Re&16){Fe=be&65535,Re&=15,Re&&(ae<Re&&(se+=Ct[_++]<<ae,ae+=8),Fe+=se&(1<<Re)-1,se>>>=Re,ae-=Re),ae<15&&(se+=Ct[_++]<<ae,ae+=8,se+=Ct[_++]<<ae,ae+=8),be=he[se&pe];r:for(;;){if(Re=be>>>24,se>>>=Re,ae-=Re,Re=be>>>16&255,Re&16){if(Me=be&65535,Re&=15,ae<Re&&(se+=Ct[_++]<<ae,ae+=8,ae<Re&&(se+=Ct[_++]<<ae,ae+=8)),Me+=se&(1<<Re)-1,Me>P){s.msg="invalid distance too far back",It.mode=BAD;break e}if(se>>>=Re,ae-=Re,Re=T-F,Me>Re){if(Re=Me-Re,Re>J&&It.sane){s.msg="invalid distance too far back",It.mode=BAD;break e}if(ve=0,At=oe,K===0){if(ve+=H-Re,Re<Fe){Fe-=Re;do Rt[T++]=oe[ve++];while(--Re);ve=T-Me,At=Rt}}else if(K<Re){if(ve+=H+K-Re,Re-=K,Re<Fe){Fe-=Re;do Rt[T++]=oe[ve++];while(--Re);if(ve=0,K<Fe){Re=K,Fe-=Re;do Rt[T++]=oe[ve++];while(--Re);ve=T-Me,At=Rt}}}else if(ve+=K-Re,Re<Fe){Fe-=Re;do Rt[T++]=oe[ve++];while(--Re);ve=T-Me,At=Rt}for(;Fe>2;)Rt[T++]=At[ve++],Rt[T++]=At[ve++],Rt[T++]=At[ve++],Fe-=3;Fe&&(Rt[T++]=At[ve++],Fe>1&&(Rt[T++]=At[ve++]))}else{ve=T-Me;do Rt[T++]=Rt[ve++],Rt[T++]=Rt[ve++],Rt[T++]=Rt[ve++],Fe-=3;while(Fe>2);Fe&&(Rt[T++]=Rt[ve++],Fe>1&&(Rt[T++]=Rt[ve++]))}}else if(Re&64){s.msg="invalid distance code",It.mode=BAD;break e}else{be=he[(be&65535)+(se&(1<<Re)-1)];continue r}break}}else if(Re&64)if(Re&32){It.mode=TYPE;break e}else{s.msg="invalid literal/length code",It.mode=BAD;break e}else{be=ge[(be&65535)+(se&(1<<Re)-1)];continue t}break}}while(_<S&&T<M);Fe=ae>>3,_-=Fe,ae-=Fe<<3,se&=(1<<ae)-1,s.next_in=_,s.next_out=T,s.avail_in=_<S?5+(S-_):5-(_-S),s.avail_out=T<M?257+(M-T):257-(T-M),It.hold=se,It.bits=ae};const MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(d,s,f,_,S,T,F,M)=>{const P=M.bits;let H=0,J=0,K=0,oe=0,se=0,ae=0,ge=0,he=0,Be=0,pe=0,be,Re,Fe,Me,ve,At=null,Ct=0,Rt;const It=new Uint16Array(MAXBITS+1),xt=new Uint16Array(MAXBITS+1);let wt=null,Ft=0,jt,ta,Qn;for(H=0;H<=MAXBITS;H++)It[H]=0;for(J=0;J<_;J++)It[s[f+J]]++;for(se=P,oe=MAXBITS;oe>=1&&It[oe]===0;oe--);if(se>oe&&(se=oe),oe===0)return S[T++]=1<<24|64<<16|0,S[T++]=1<<24|64<<16|0,M.bits=1,0;for(K=1;K<oe&&It[K]===0;K++);for(se<K&&(se=K),he=1,H=1;H<=MAXBITS;H++)if(he<<=1,he-=It[H],he<0)return-1;if(he>0&&(d===CODES||oe!==1))return-1;for(xt[1]=0,H=1;H<MAXBITS;H++)xt[H+1]=xt[H]+It[H];for(J=0;J<_;J++)s[f+J]!==0&&(F[xt[s[f+J]]++]=J);if(d===CODES?(At=wt=F,Rt=19):d===LENS?(At=lbase,Ct-=257,wt=lext,Ft-=257,Rt=256):(At=dbase,wt=dext,Rt=-1),pe=0,J=0,H=K,ve=T,ae=se,ge=0,Fe=-1,Be=1<<se,Me=Be-1,d===LENS&&Be>ENOUGH_LENS||d===DISTS&&Be>ENOUGH_DISTS)return 1;for(;;){jt=H-ge,F[J]<Rt?(ta=0,Qn=F[J]):F[J]>Rt?(ta=wt[Ft+F[J]],Qn=At[Ct+F[J]]):(ta=96,Qn=0),be=1<<H-ge,Re=1<<ae,K=Re;do Re-=be,S[ve+(pe>>ge)+Re]=jt<<24|ta<<16|Qn|0;while(Re!==0);for(be=1<<H-1;pe&be;)be>>=1;if(be!==0?(pe&=be-1,pe+=be):pe=0,J++,--It[H]===0){if(H===oe)break;H=s[f+F[J]]}if(H>se&&(pe&Me)!==Fe){for(ge===0&&(ge=se),ve+=K,ae=H-ge,he=1<<ae;ae+ge<oe&&(he-=It[ae+ge],!(he<=0));)ae++,he<<=1;if(Be+=1<<ae,d===LENS&&Be>ENOUGH_LENS||d===DISTS&&Be>ENOUGH_DISTS)return 1;Fe=pe&Me,S[Fe]=se<<24|ae<<16|ve-T|0}}return pe!==0&&(S[ve+pe]=H-ge<<24|64<<16|0),M.bits=se,0};var inftrees=inflate_table;const CODES$1=0,LENS$1=1,DISTS$1=2,{Z_FINISH:Z_FINISH$2,Z_BLOCK:Z_BLOCK$1,Z_TREES,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_NEED_DICT,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFLATED:Z_DEFLATED$2}=constants$1,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE$1=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD$1=30,MEM=31,SYNC=32,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,MAX_WBITS$1=15,DEF_WBITS=MAX_WBITS$1,zswap32=d=>(d>>>24&255)+(d>>>8&65280)+((d&65280)<<8)+((d&255)<<24);function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateResetKeep=d=>{if(!d||!d.state)return Z_STREAM_ERROR$1;const s=d.state;return d.total_in=d.total_out=s.total=0,d.msg="",s.wrap&&(d.adler=s.wrap&1),s.mode=HEAD,s.last=0,s.havedict=0,s.dmax=32768,s.head=null,s.hold=0,s.bits=0,s.lencode=s.lendyn=new Int32Array(ENOUGH_LENS$1),s.distcode=s.distdyn=new Int32Array(ENOUGH_DISTS$1),s.sane=1,s.back=-1,Z_OK$2},inflateReset=d=>{if(!d||!d.state)return Z_STREAM_ERROR$1;const s=d.state;return s.wsize=0,s.whave=0,s.wnext=0,inflateResetKeep(d)},inflateReset2=(d,s)=>{let f;if(!d||!d.state)return Z_STREAM_ERROR$1;const _=d.state;return s<0?(f=0,s=-s):(f=(s>>4)+1,s<48&&(s&=15)),s&&(s<8||s>15)?Z_STREAM_ERROR$1:(_.window!==null&&_.wbits!==s&&(_.window=null),_.wrap=f,_.wbits=s,inflateReset(d))},inflateInit2=(d,s)=>{if(!d)return Z_STREAM_ERROR$1;const f=new InflateState;d.state=f,f.window=null;const _=inflateReset2(d,s);return _!==Z_OK$2&&(d.state=null),_},inflateInit=d=>inflateInit2(d,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=d=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let s=0;for(;s<144;)d.lens[s++]=8;for(;s<256;)d.lens[s++]=9;for(;s<280;)d.lens[s++]=7;for(;s<288;)d.lens[s++]=8;for(inftrees(LENS$1,d.lens,0,288,lenfix,0,d.work,{bits:9}),s=0;s<32;)d.lens[s++]=5;inftrees(DISTS$1,d.lens,0,32,distfix,0,d.work,{bits:5}),virgin=!1}d.lencode=lenfix,d.lenbits=9,d.distcode=distfix,d.distbits=5},updatewindow=(d,s,f,_)=>{let S;const T=d.state;return T.window===null&&(T.wsize=1<<T.wbits,T.wnext=0,T.whave=0,T.window=new Uint8Array(T.wsize)),_>=T.wsize?(T.window.set(s.subarray(f-T.wsize,f),0),T.wnext=0,T.whave=T.wsize):(S=T.wsize-T.wnext,S>_&&(S=_),T.window.set(s.subarray(f-_,f-_+S),T.wnext),_-=S,_?(T.window.set(s.subarray(f-_,f),0),T.wnext=_,T.whave=T.wsize):(T.wnext+=S,T.wnext===T.wsize&&(T.wnext=0),T.whave<T.wsize&&(T.whave+=S))),0},inflate=(d,s)=>{let f,_,S,T,F,M,P,H,J,K,oe,se,ae,ge,he=0,Be,pe,be,Re,Fe,Me,ve,At;const Ct=new Uint8Array(4);let Rt,It;const xt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!d||!d.state||!d.output||!d.input&&d.avail_in!==0)return Z_STREAM_ERROR$1;f=d.state,f.mode===TYPE$1&&(f.mode=TYPEDO),F=d.next_out,S=d.output,P=d.avail_out,T=d.next_in,_=d.input,M=d.avail_in,H=f.hold,J=f.bits,K=M,oe=P,At=Z_OK$2;e:for(;;)switch(f.mode){case HEAD:if(f.wrap===0){f.mode=TYPEDO;break}for(;J<16;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(f.wrap&2&&H===35615){f.check=0,Ct[0]=H&255,Ct[1]=H>>>8&255,f.check=crc32_1(f.check,Ct,2,0),H=0,J=0,f.mode=FLAGS;break}if(f.flags=0,f.head&&(f.head.done=!1),!(f.wrap&1)||(((H&255)<<8)+(H>>8))%31){d.msg="incorrect header check",f.mode=BAD$1;break}if((H&15)!==Z_DEFLATED$2){d.msg="unknown compression method",f.mode=BAD$1;break}if(H>>>=4,J-=4,ve=(H&15)+8,f.wbits===0)f.wbits=ve;else if(ve>f.wbits){d.msg="invalid window size",f.mode=BAD$1;break}f.dmax=1<<f.wbits,d.adler=f.check=1,f.mode=H&512?DICTID:TYPE$1,H=0,J=0;break;case FLAGS:for(;J<16;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(f.flags=H,(f.flags&255)!==Z_DEFLATED$2){d.msg="unknown compression method",f.mode=BAD$1;break}if(f.flags&57344){d.msg="unknown header flags set",f.mode=BAD$1;break}f.head&&(f.head.text=H>>8&1),f.flags&512&&(Ct[0]=H&255,Ct[1]=H>>>8&255,f.check=crc32_1(f.check,Ct,2,0)),H=0,J=0,f.mode=TIME;case TIME:for(;J<32;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}f.head&&(f.head.time=H),f.flags&512&&(Ct[0]=H&255,Ct[1]=H>>>8&255,Ct[2]=H>>>16&255,Ct[3]=H>>>24&255,f.check=crc32_1(f.check,Ct,4,0)),H=0,J=0,f.mode=OS;case OS:for(;J<16;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}f.head&&(f.head.xflags=H&255,f.head.os=H>>8),f.flags&512&&(Ct[0]=H&255,Ct[1]=H>>>8&255,f.check=crc32_1(f.check,Ct,2,0)),H=0,J=0,f.mode=EXLEN;case EXLEN:if(f.flags&1024){for(;J<16;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}f.length=H,f.head&&(f.head.extra_len=H),f.flags&512&&(Ct[0]=H&255,Ct[1]=H>>>8&255,f.check=crc32_1(f.check,Ct,2,0)),H=0,J=0}else f.head&&(f.head.extra=null);f.mode=EXTRA;case EXTRA:if(f.flags&1024&&(se=f.length,se>M&&(se=M),se&&(f.head&&(ve=f.head.extra_len-f.length,f.head.extra||(f.head.extra=new Uint8Array(f.head.extra_len)),f.head.extra.set(_.subarray(T,T+se),ve)),f.flags&512&&(f.check=crc32_1(f.check,_,se,T)),M-=se,T+=se,f.length-=se),f.length))break e;f.length=0,f.mode=NAME;case NAME:if(f.flags&2048){if(M===0)break e;se=0;do ve=_[T+se++],f.head&&ve&&f.length<65536&&(f.head.name+=String.fromCharCode(ve));while(ve&&se<M);if(f.flags&512&&(f.check=crc32_1(f.check,_,se,T)),M-=se,T+=se,ve)break e}else f.head&&(f.head.name=null);f.length=0,f.mode=COMMENT;case COMMENT:if(f.flags&4096){if(M===0)break e;se=0;do ve=_[T+se++],f.head&&ve&&f.length<65536&&(f.head.comment+=String.fromCharCode(ve));while(ve&&se<M);if(f.flags&512&&(f.check=crc32_1(f.check,_,se,T)),M-=se,T+=se,ve)break e}else f.head&&(f.head.comment=null);f.mode=HCRC;case HCRC:if(f.flags&512){for(;J<16;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(H!==(f.check&65535)){d.msg="header crc mismatch",f.mode=BAD$1;break}H=0,J=0}f.head&&(f.head.hcrc=f.flags>>9&1,f.head.done=!0),d.adler=f.check=0,f.mode=TYPE$1;break;case DICTID:for(;J<32;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}d.adler=f.check=zswap32(H),H=0,J=0,f.mode=DICT;case DICT:if(f.havedict===0)return d.next_out=F,d.avail_out=P,d.next_in=T,d.avail_in=M,f.hold=H,f.bits=J,Z_NEED_DICT;d.adler=f.check=1,f.mode=TYPE$1;case TYPE$1:if(s===Z_BLOCK$1||s===Z_TREES)break e;case TYPEDO:if(f.last){H>>>=J&7,J-=J&7,f.mode=CHECK;break}for(;J<3;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}switch(f.last=H&1,H>>>=1,J-=1,H&3){case 0:f.mode=STORED;break;case 1:if(fixedtables(f),f.mode=LEN_,s===Z_TREES){H>>>=2,J-=2;break e}break;case 2:f.mode=TABLE;break;case 3:d.msg="invalid block type",f.mode=BAD$1}H>>>=2,J-=2;break;case STORED:for(H>>>=J&7,J-=J&7;J<32;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if((H&65535)!==(H>>>16^65535)){d.msg="invalid stored block lengths",f.mode=BAD$1;break}if(f.length=H&65535,H=0,J=0,f.mode=COPY_,s===Z_TREES)break e;case COPY_:f.mode=COPY;case COPY:if(se=f.length,se){if(se>M&&(se=M),se>P&&(se=P),se===0)break e;S.set(_.subarray(T,T+se),F),M-=se,T+=se,P-=se,F+=se,f.length-=se;break}f.mode=TYPE$1;break;case TABLE:for(;J<14;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(f.nlen=(H&31)+257,H>>>=5,J-=5,f.ndist=(H&31)+1,H>>>=5,J-=5,f.ncode=(H&15)+4,H>>>=4,J-=4,f.nlen>286||f.ndist>30){d.msg="too many length or distance symbols",f.mode=BAD$1;break}f.have=0,f.mode=LENLENS;case LENLENS:for(;f.have<f.ncode;){for(;J<3;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}f.lens[xt[f.have++]]=H&7,H>>>=3,J-=3}for(;f.have<19;)f.lens[xt[f.have++]]=0;if(f.lencode=f.lendyn,f.lenbits=7,Rt={bits:f.lenbits},At=inftrees(CODES$1,f.lens,0,19,f.lencode,0,f.work,Rt),f.lenbits=Rt.bits,At){d.msg="invalid code lengths set",f.mode=BAD$1;break}f.have=0,f.mode=CODELENS;case CODELENS:for(;f.have<f.nlen+f.ndist;){for(;he=f.lencode[H&(1<<f.lenbits)-1],Be=he>>>24,pe=he>>>16&255,be=he&65535,!(Be<=J);){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(be<16)H>>>=Be,J-=Be,f.lens[f.have++]=be;else{if(be===16){for(It=Be+2;J<It;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(H>>>=Be,J-=Be,f.have===0){d.msg="invalid bit length repeat",f.mode=BAD$1;break}ve=f.lens[f.have-1],se=3+(H&3),H>>>=2,J-=2}else if(be===17){for(It=Be+3;J<It;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}H>>>=Be,J-=Be,ve=0,se=3+(H&7),H>>>=3,J-=3}else{for(It=Be+7;J<It;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}H>>>=Be,J-=Be,ve=0,se=11+(H&127),H>>>=7,J-=7}if(f.have+se>f.nlen+f.ndist){d.msg="invalid bit length repeat",f.mode=BAD$1;break}for(;se--;)f.lens[f.have++]=ve}}if(f.mode===BAD$1)break;if(f.lens[256]===0){d.msg="invalid code -- missing end-of-block",f.mode=BAD$1;break}if(f.lenbits=9,Rt={bits:f.lenbits},At=inftrees(LENS$1,f.lens,0,f.nlen,f.lencode,0,f.work,Rt),f.lenbits=Rt.bits,At){d.msg="invalid literal/lengths set",f.mode=BAD$1;break}if(f.distbits=6,f.distcode=f.distdyn,Rt={bits:f.distbits},At=inftrees(DISTS$1,f.lens,f.nlen,f.ndist,f.distcode,0,f.work,Rt),f.distbits=Rt.bits,At){d.msg="invalid distances set",f.mode=BAD$1;break}if(f.mode=LEN_,s===Z_TREES)break e;case LEN_:f.mode=LEN;case LEN:if(M>=6&&P>=258){d.next_out=F,d.avail_out=P,d.next_in=T,d.avail_in=M,f.hold=H,f.bits=J,inffast(d,oe),F=d.next_out,S=d.output,P=d.avail_out,T=d.next_in,_=d.input,M=d.avail_in,H=f.hold,J=f.bits,f.mode===TYPE$1&&(f.back=-1);break}for(f.back=0;he=f.lencode[H&(1<<f.lenbits)-1],Be=he>>>24,pe=he>>>16&255,be=he&65535,!(Be<=J);){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(pe&&!(pe&240)){for(Re=Be,Fe=pe,Me=be;he=f.lencode[Me+((H&(1<<Re+Fe)-1)>>Re)],Be=he>>>24,pe=he>>>16&255,be=he&65535,!(Re+Be<=J);){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}H>>>=Re,J-=Re,f.back+=Re}if(H>>>=Be,J-=Be,f.back+=Be,f.length=be,pe===0){f.mode=LIT;break}if(pe&32){f.back=-1,f.mode=TYPE$1;break}if(pe&64){d.msg="invalid literal/length code",f.mode=BAD$1;break}f.extra=pe&15,f.mode=LENEXT;case LENEXT:if(f.extra){for(It=f.extra;J<It;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}f.length+=H&(1<<f.extra)-1,H>>>=f.extra,J-=f.extra,f.back+=f.extra}f.was=f.length,f.mode=DIST;case DIST:for(;he=f.distcode[H&(1<<f.distbits)-1],Be=he>>>24,pe=he>>>16&255,be=he&65535,!(Be<=J);){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(!(pe&240)){for(Re=Be,Fe=pe,Me=be;he=f.distcode[Me+((H&(1<<Re+Fe)-1)>>Re)],Be=he>>>24,pe=he>>>16&255,be=he&65535,!(Re+Be<=J);){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}H>>>=Re,J-=Re,f.back+=Re}if(H>>>=Be,J-=Be,f.back+=Be,pe&64){d.msg="invalid distance code",f.mode=BAD$1;break}f.offset=be,f.extra=pe&15,f.mode=DISTEXT;case DISTEXT:if(f.extra){for(It=f.extra;J<It;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}f.offset+=H&(1<<f.extra)-1,H>>>=f.extra,J-=f.extra,f.back+=f.extra}if(f.offset>f.dmax){d.msg="invalid distance too far back",f.mode=BAD$1;break}f.mode=MATCH;case MATCH:if(P===0)break e;if(se=oe-P,f.offset>se){if(se=f.offset-se,se>f.whave&&f.sane){d.msg="invalid distance too far back",f.mode=BAD$1;break}se>f.wnext?(se-=f.wnext,ae=f.wsize-se):ae=f.wnext-se,se>f.length&&(se=f.length),ge=f.window}else ge=S,ae=F-f.offset,se=f.length;se>P&&(se=P),P-=se,f.length-=se;do S[F++]=ge[ae++];while(--se);f.length===0&&(f.mode=LEN);break;case LIT:if(P===0)break e;S[F++]=f.length,P--,f.mode=LEN;break;case CHECK:if(f.wrap){for(;J<32;){if(M===0)break e;M--,H|=_[T++]<<J,J+=8}if(oe-=P,d.total_out+=oe,f.total+=oe,oe&&(d.adler=f.check=f.flags?crc32_1(f.check,S,oe,F-oe):adler32_1(f.check,S,oe,F-oe)),oe=P,(f.flags?H:zswap32(H))!==f.check){d.msg="incorrect data check",f.mode=BAD$1;break}H=0,J=0}f.mode=LENGTH;case LENGTH:if(f.wrap&&f.flags){for(;J<32;){if(M===0)break e;M--,H+=_[T++]<<J,J+=8}if(H!==(f.total&4294967295)){d.msg="incorrect length check",f.mode=BAD$1;break}H=0,J=0}f.mode=DONE;case DONE:At=Z_STREAM_END$2;break e;case BAD$1:At=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR$1}return d.next_out=F,d.avail_out=P,d.next_in=T,d.avail_in=M,f.hold=H,f.bits=J,(f.wsize||oe!==d.avail_out&&f.mode<BAD$1&&(f.mode<CHECK||s!==Z_FINISH$2))&&updatewindow(d,d.output,d.next_out,oe-d.avail_out),K-=d.avail_in,oe-=d.avail_out,d.total_in+=K,d.total_out+=oe,f.total+=oe,f.wrap&&oe&&(d.adler=f.check=f.flags?crc32_1(f.check,S,oe,d.next_out-oe):adler32_1(f.check,S,oe,d.next_out-oe)),d.data_type=f.bits+(f.last?64:0)+(f.mode===TYPE$1?128:0)+(f.mode===LEN_||f.mode===COPY_?256:0),(K===0&&oe===0||s===Z_FINISH$2)&&At===Z_OK$2&&(At=Z_BUF_ERROR$1),At},inflateEnd=d=>{if(!d||!d.state)return Z_STREAM_ERROR$1;let s=d.state;return s.window&&(s.window=null),d.state=null,Z_OK$2},inflateGetHeader=(d,s)=>{if(!d||!d.state)return Z_STREAM_ERROR$1;const f=d.state;return f.wrap&2?(f.head=s,s.done=!1,Z_OK$2):Z_STREAM_ERROR$1},inflateSetDictionary=(d,s)=>{const f=s.length;let _,S,T;return!d||!d.state||(_=d.state,_.wrap!==0&&_.mode!==DICT)?Z_STREAM_ERROR$1:_.mode===DICT&&(S=1,S=adler32_1(S,s,f,0),S!==_.check)?Z_DATA_ERROR$1:(T=updatewindow(d,s,f,f),T?(_.mode=MEM,Z_MEM_ERROR):(_.havedict=1,Z_OK$2))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2=inflate,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$1$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_FINISH:Z_FINISH$3,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_MEM_ERROR:Z_MEM_ERROR$1}=constants$1;function Inflate(d){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},d||{});const s=this.options;s.raw&&s.windowBits>=0&&s.windowBits<16&&(s.windowBits=-s.windowBits,s.windowBits===0&&(s.windowBits=-15)),s.windowBits>=0&&s.windowBits<16&&!(d&&d.windowBits)&&(s.windowBits+=32),s.windowBits>15&&s.windowBits<48&&(s.windowBits&15||(s.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let f=inflate_1.inflateInit2(this.strm,s.windowBits);if(f!==Z_OK$3)throw new Error(messages[f]);if(this.header=new gzheader,inflate_1.inflateGetHeader(this.strm,this.header),s.dictionary&&(typeof s.dictionary=="string"?s.dictionary=strings.string2buf(s.dictionary):toString$1$1.call(s.dictionary)==="[object ArrayBuffer]"&&(s.dictionary=new Uint8Array(s.dictionary)),s.raw&&(f=inflate_1.inflateSetDictionary(this.strm,s.dictionary),f!==Z_OK$3)))throw new Error(messages[f])}Inflate.prototype.push=function(d,s){const f=this.strm,_=this.options.chunkSize,S=this.options.dictionary;let T,F,M;if(this.ended)return!1;for(s===~~s?F=s:F=s===!0?Z_FINISH$3:Z_NO_FLUSH$2,toString$1$1.call(d)==="[object ArrayBuffer]"?f.input=new Uint8Array(d):f.input=d,f.next_in=0,f.avail_in=f.input.length;;){for(f.avail_out===0&&(f.output=new Uint8Array(_),f.next_out=0,f.avail_out=_),T=inflate_1.inflate(f,F),T===Z_NEED_DICT$1&&S&&(T=inflate_1.inflateSetDictionary(f,S),T===Z_OK$3?T=inflate_1.inflate(f,F):T===Z_DATA_ERROR$2&&(T=Z_NEED_DICT$1));f.avail_in>0&&T===Z_STREAM_END$3&&f.state.wrap>0&&d[f.next_in]!==0;)inflate_1.inflateReset(f),T=inflate_1.inflate(f,F);switch(T){case Z_STREAM_ERROR$2:case Z_DATA_ERROR$2:case Z_NEED_DICT$1:case Z_MEM_ERROR$1:return this.onEnd(T),this.ended=!0,!1}if(M=f.avail_out,f.next_out&&(f.avail_out===0||T===Z_STREAM_END$3))if(this.options.to==="string"){let P=strings.utf8border(f.output,f.next_out),H=f.next_out-P,J=strings.buf2string(f.output,P);f.next_out=H,f.avail_out=_-H,H&&f.output.set(f.output.subarray(P,P+H),0),this.onData(J)}else this.onData(f.output.length===f.next_out?f.output:f.output.subarray(0,f.next_out));if(!(T===Z_OK$3&&M===0)){if(T===Z_STREAM_END$3)return T=inflate_1.inflateEnd(this.strm),this.onEnd(T),this.ended=!0,!0;if(f.avail_in===0)break}}return!0};Inflate.prototype.onData=function(d){this.chunks.push(d)};Inflate.prototype.onEnd=function(d){d===Z_OK$3&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg};function inflate$1(d,s){const f=new Inflate(s);if(f.push(d),f.err)throw f.msg||messages[f.err];return f.result}function inflateRaw(d,s){return s=s||{},s.raw=!0,inflate$1(d,s)}var Inflate_1=Inflate,inflate_2$1=inflate$1,inflateRaw_1=inflateRaw,ungzip=inflate$1,constants$2=constants$1,inflate_1$1={Inflate:Inflate_1,inflate:inflate_2$1,inflateRaw:inflateRaw_1,ungzip,constants:constants$2};const{Deflate:Deflate$1,deflate:deflate$2,deflateRaw:deflateRaw$1,gzip:gzip$1}=deflate_1$1,{Inflate:Inflate$1,inflate:inflate$2,inflateRaw:inflateRaw$1,ungzip:ungzip$1}=inflate_1$1;var Deflate_1$1=Deflate$1,deflate_1$2=deflate$2,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,Inflate_1$1=Inflate$1,inflate_1$2=inflate$2,inflateRaw_1$1=inflateRaw$1,ungzip_1=ungzip$1,constants_1=constants$1,pako={Deflate:Deflate_1$1,deflate:deflate_1$2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1,Inflate:Inflate_1$1,inflate:inflate_1$2,inflateRaw:inflateRaw_1$1,ungzip:ungzip_1,constants:constants_1},_a$2;const GZip=(_a$2=class{constructor(d=1){if(d<0||d>9)throw new Error("Invalid gzip compression level, it should be between 0 and 9");this.level=d}static fromConfig({level:d}){return new _a$2(d)}encode(d){return pako.gzip(d,{level:this.level})}decode(d,s){const f=pako.ungzip(d);return s!==void 0?(s.set(f),s):f}},_a$2.codecId="gzip",_a$2);var GZip$1=GZip,_a$1;const Zlib=(_a$1=class{constructor(d=1){if(d<-1||d>9)throw new Error("Invalid zlib compression level, it should be between -1 and 9");this.level=d}static fromConfig({level:d}){return new _a$1(d)}encode(d){return pako.deflate(d,{level:this.level})}decode(d,s){const f=pako.inflate(d);return s!==void 0?(s.set(f),s):f}},_a$1.codecId="zlib",_a$1);var Zlib$1=Zlib,blosc_codec=function(){return typeof document<"u"&&document.currentScript&&document.currentScript.src,function(d){d=d||{};var s;s||(s=typeof d<"u"?d:{});var f,_;s.ready=new Promise(function(Vt,Un){f=Vt,_=Un});var S={},T;for(T in s)s.hasOwnProperty(T)&&(S[T]=s[T]);var F="./this.program",M=s.print||console.log.bind(console),P=s.printErr||console.warn.bind(console);for(T in S)S.hasOwnProperty(T)&&(s[T]=S[T]);S=null,s.thisProgram&&(F=s.thisProgram);var H;s.wasmBinary&&(H=s.wasmBinary),s.noExitRuntime&&s.noExitRuntime,typeof WebAssembly!="object"&&pI("no native wasm support detected");var J,K=!1,oe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function se(Vt,Un,Kn){var qt=Un+Kn;for(Kn=Un;Vt[Kn]&&!(Kn>=qt);)++Kn;if(16<Kn-Un&&Vt.subarray&&oe)return oe.decode(Vt.subarray(Un,Kn));for(qt="";Un<Kn;){var Xt=Vt[Un++];if(Xt&128){var ga=Vt[Un++]&63;if((Xt&224)==192)qt+=String.fromCharCode((Xt&31)<<6|ga);else{var aA=Vt[Un++]&63;Xt=(Xt&240)==224?(Xt&15)<<12|ga<<6|aA:(Xt&7)<<18|ga<<12|aA<<6|Vt[Un++]&63,65536>Xt?qt+=String.fromCharCode(Xt):(Xt-=65536,qt+=String.fromCharCode(55296|Xt>>10,56320|Xt&1023))}}else qt+=String.fromCharCode(Xt)}return qt}function ae(Vt,Un,Kn){var qt=At;if(0<Kn){Kn=Un+Kn-1;for(var Xt=0;Xt<Vt.length;++Xt){var ga=Vt.charCodeAt(Xt);if(55296<=ga&&57343>=ga){var aA=Vt.charCodeAt(++Xt);ga=65536+((ga&1023)<<10)|aA&1023}if(127>=ga){if(Un>=Kn)break;qt[Un++]=ga}else{if(2047>=ga){if(Un+1>=Kn)break;qt[Un++]=192|ga>>6}else{if(65535>=ga){if(Un+2>=Kn)break;qt[Un++]=224|ga>>12}else{if(Un+3>=Kn)break;qt[Un++]=240|ga>>18,qt[Un++]=128|ga>>12&63}qt[Un++]=128|ga>>6&63}qt[Un++]=128|ga&63}}qt[Un]=0}}var ge=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function he(Vt,Un){for(var Kn=Vt>>1,qt=Kn+Un/2;!(Kn>=qt)&&Rt[Kn];)++Kn;if(Kn<<=1,32<Kn-Vt&&ge)return ge.decode(At.subarray(Vt,Kn));for(Kn=0,qt="";;){var Xt=Ct[Vt+2*Kn>>1];if(Xt==0||Kn==Un/2)return qt;++Kn,qt+=String.fromCharCode(Xt)}}function Be(Vt,Un,Kn){if(Kn===void 0&&(Kn=2147483647),2>Kn)return 0;Kn-=2;var qt=Un;Kn=Kn<2*Vt.length?Kn/2:Vt.length;for(var Xt=0;Xt<Kn;++Xt)Ct[Un>>1]=Vt.charCodeAt(Xt),Un+=2;return Ct[Un>>1]=0,Un-qt}function pe(Vt){return 2*Vt.length}function be(Vt,Un){for(var Kn=0,qt="";!(Kn>=Un/4);){var Xt=It[Vt+4*Kn>>2];if(Xt==0)break;++Kn,65536<=Xt?(Xt-=65536,qt+=String.fromCharCode(55296|Xt>>10,56320|Xt&1023)):qt+=String.fromCharCode(Xt)}return qt}function Re(Vt,Un,Kn){if(Kn===void 0&&(Kn=2147483647),4>Kn)return 0;var qt=Un;Kn=qt+Kn-4;for(var Xt=0;Xt<Vt.length;++Xt){var ga=Vt.charCodeAt(Xt);if(55296<=ga&&57343>=ga){var aA=Vt.charCodeAt(++Xt);ga=65536+((ga&1023)<<10)|aA&1023}if(It[Un>>2]=ga,Un+=4,Un+4>Kn)break}return It[Un>>2]=0,Un-qt}function Fe(Vt){for(var Un=0,Kn=0;Kn<Vt.length;++Kn){var qt=Vt.charCodeAt(Kn);55296<=qt&&57343>=qt&&++Kn,Un+=4}return Un}var Me,ve,At,Ct,Rt,It,xt,wt,Ft;function jt(Vt){Me=Vt,s.HEAP8=ve=new Int8Array(Vt),s.HEAP16=Ct=new Int16Array(Vt),s.HEAP32=It=new Int32Array(Vt),s.HEAPU8=At=new Uint8Array(Vt),s.HEAPU16=Rt=new Uint16Array(Vt),s.HEAPU32=xt=new Uint32Array(Vt),s.HEAPF32=wt=new Float32Array(Vt),s.HEAPF64=Ft=new Float64Array(Vt)}var ta=s.INITIAL_MEMORY||16777216;s.wasmMemory?J=s.wasmMemory:J=new WebAssembly.Memory({initial:ta/65536,maximum:32768}),J&&(Me=J.buffer),ta=Me.byteLength,jt(Me);var Qn,ca=[],Jn=[],wA=[],LA=[];function ZA(){var Vt=s.preRun.shift();ca.unshift(Vt)}var xI=0,cI=null;s.preloadedImages={},s.preloadedAudios={};function pI(Vt){throw s.onAbort&&s.onAbort(Vt),P(Vt),K=!0,Vt=new WebAssembly.RuntimeError("abort("+Vt+"). Build with -s ASSERTIONS=1 for more info."),_(Vt),Vt}function aI(Vt){var Un=uA;return String.prototype.startsWith?Un.startsWith(Vt):Un.indexOf(Vt)===0}function nI(){return aI("data:application/octet-stream;base64,")}var uA="blosc_codec.wasm";if(!nI()){var aa=uA;uA=s.locateFile?s.locateFile(aa,""):""+aa}function eA(){try{if(H)return new Uint8Array(H);throw"both async and sync fetching of the wasm failed"}catch(Vt){pI(Vt)}}function DA(Vt){for(;0<Vt.length;){var Un=Vt.shift();if(typeof Un=="function")Un(s);else{var Kn=Un.T;typeof Kn=="number"?Un.O===void 0?Qn.get(Kn)():Qn.get(Kn)(Un.O):Kn(Un.O===void 0?null:Un.O)}}}function xA(Vt){this.N=Vt-16,this.$=function(Un){It[this.N+8>>2]=Un},this.X=function(Un){It[this.N+0>>2]=Un},this.Y=function(){It[this.N+4>>2]=0},this.W=function(){ve[this.N+12>>0]=0},this.Z=function(){ve[this.N+13>>0]=0},this.V=function(Un,Kn){this.$(Un),this.X(Kn),this.Y(),this.W(),this.Z()}}function ua(Vt){switch(Vt){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+Vt)}}var sA=void 0;function oA(Vt){for(var Un="";At[Vt];)Un+=sA[At[Vt++]];return Un}var fA={},lA={},gA={};function WA(Vt){if(Vt===void 0)return"_unknown";Vt=Vt.replace(/[^a-zA-Z0-9_]/g,"$");var Un=Vt.charCodeAt(0);return 48<=Un&&57>=Un?"_"+Vt:Vt}function JA(Vt,Un){return Vt=WA(Vt),new Function("body","return function "+Vt+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(Un)}function _I(Vt){var Un=Error,Kn=JA(Vt,function(qt){this.name=Vt,this.message=qt,qt=Error(qt).stack,qt!==void 0&&(this.stack=this.toString()+`
`+qt.replace(/^Error(:[^\n]*)?\n/,""))});return Kn.prototype=Object.create(Un.prototype),Kn.prototype.constructor=Kn,Kn.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},Kn}var HI=void 0;function Nt(Vt){throw new HI(Vt)}var bA=void 0;function hA(Vt,Un){function Kn(BA){if(BA=Un(BA),BA.length!==qt.length)throw new bA("Mismatched type converter count");for(var uI=0;uI<qt.length;++uI)II(qt[uI],BA[uI])}var qt=[];qt.forEach(function(BA){gA[BA]=Vt});var Xt=Array(Vt.length),ga=[],aA=0;Vt.forEach(function(BA,uI){lA.hasOwnProperty(BA)?Xt[uI]=lA[BA]:(ga.push(BA),fA.hasOwnProperty(BA)||(fA[BA]=[]),fA[BA].push(function(){Xt[uI]=lA[BA],++aA,aA===ga.length&&Kn(Xt)}))}),ga.length===0&&Kn(Xt)}function II(Vt,Un,Kn){if(Kn=Kn||{},!("argPackAdvance"in Un))throw new TypeError("registerType registeredInstance requires argPackAdvance");var qt=Un.name;if(Vt||Nt('type "'+qt+'" must have a positive integer typeid pointer'),lA.hasOwnProperty(Vt)){if(Kn.U)return;Nt("Cannot register type '"+qt+"' twice")}lA[Vt]=Un,delete gA[Vt],fA.hasOwnProperty(Vt)&&(Un=fA[Vt],delete fA[Vt],Un.forEach(function(Xt){Xt()}))}var OI=[],ba=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function IA(Vt){4<Vt&&--ba[Vt].P===0&&(ba[Vt]=void 0,OI.push(Vt))}function MA(Vt){switch(Vt){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var Un=OI.length?OI.pop():ba.length;return ba[Un]={P:1,value:Vt},Un}}function EI(Vt){return this.fromWireType(xt[Vt>>2])}function wI(Vt){if(Vt===null)return"null";var Un=typeof Vt;return Un==="object"||Un==="array"||Un==="function"?Vt.toString():""+Vt}function vI(Vt,Un){switch(Un){case 2:return function(Kn){return this.fromWireType(wt[Kn>>2])};case 3:return function(Kn){return this.fromWireType(Ft[Kn>>3])};default:throw new TypeError("Unknown float type: "+Vt)}}function WI(Vt){var Un=Function;if(!(Un instanceof Function))throw new TypeError("new_ called with constructor type "+typeof Un+" which is not a function");var Kn=JA(Un.name||"unknownFunctionName",function(){});return Kn.prototype=Un.prototype,Kn=new Kn,Vt=Un.apply(Kn,Vt),Vt instanceof Object?Vt:Kn}function GI(Vt){for(;Vt.length;){var Un=Vt.pop();Vt.pop()(Un)}}function NI(Vt,Un){var Kn=s;if(Kn[Vt].L===void 0){var qt=Kn[Vt];Kn[Vt]=function(){return Kn[Vt].L.hasOwnProperty(arguments.length)||Nt("Function '"+Un+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+Kn[Vt].L+")!"),Kn[Vt].L[arguments.length].apply(this,arguments)},Kn[Vt].L=[],Kn[Vt].L[qt.S]=qt}}function tC(Vt,Un,Kn){s.hasOwnProperty(Vt)?((Kn===void 0||s[Vt].L!==void 0&&s[Vt].L[Kn]!==void 0)&&Nt("Cannot register public name '"+Vt+"' twice"),NI(Vt,Vt),s.hasOwnProperty(Kn)&&Nt("Cannot register multiple overloads of a function with the same number of arguments ("+Kn+")!"),s[Vt].L[Kn]=Un):(s[Vt]=Un,Kn!==void 0&&(s[Vt].ba=Kn))}function mC(Vt,Un){for(var Kn=[],qt=0;qt<Vt;qt++)Kn.push(It[(Un>>2)+qt]);return Kn}function yC(Vt,Un){0<=Vt.indexOf("j")||pI("Assertion failed: getDynCaller should only be called with i64 sigs");var Kn=[];return function(){Kn.length=arguments.length;for(var qt=0;qt<arguments.length;qt++)Kn[qt]=arguments[qt];var Xt;return Vt.indexOf("j")!=-1?Xt=Kn&&Kn.length?s["dynCall_"+Vt].apply(null,[Un].concat(Kn)):s["dynCall_"+Vt].call(null,Un):Xt=Qn.get(Un).apply(null,Kn),Xt}}function QC(Vt,Un){Vt=oA(Vt);var Kn=Vt.indexOf("j")!=-1?yC(Vt,Un):Qn.get(Un);return typeof Kn!="function"&&Nt("unknown function pointer with signature "+Vt+": "+Un),Kn}var _C=void 0;function vC(Vt){Vt=cC(Vt);var Un=oA(Vt);return JI(Vt),Un}function RC(Vt,Un){function Kn(ga){Xt[ga]||lA[ga]||(gA[ga]?gA[ga].forEach(Kn):(qt.push(ga),Xt[ga]=!0))}var qt=[],Xt={};throw Un.forEach(Kn),new _C(Vt+": "+qt.map(vC).join([", "]))}function MC(Vt,Un,Kn){switch(Un){case 0:return Kn?function(qt){return ve[qt]}:function(qt){return At[qt]};case 1:return Kn?function(qt){return Ct[qt>>1]}:function(qt){return Rt[qt>>1]};case 2:return Kn?function(qt){return It[qt>>2]}:function(qt){return xt[qt>>2]};default:throw new TypeError("Unknown integer type: "+Vt)}}var Hr={};function zn(){if(!na){var Vt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:F||"./this.program"},Un;for(Un in Hr)Vt[Un]=Hr[Un];var Kn=[];for(Un in Vt)Kn.push(Un+"="+Vt[Un]);na=Kn}return na}for(var na,PA=[null,[],[]],YA=Array(256),GA=0;256>GA;++GA)YA[GA]=String.fromCharCode(GA);sA=YA,HI=s.BindingError=_I("BindingError"),bA=s.InternalError=_I("InternalError"),s.count_emval_handles=function(){for(var Vt=0,Un=5;Un<ba.length;++Un)ba[Un]!==void 0&&++Vt;return Vt},s.get_first_emval=function(){for(var Vt=5;Vt<ba.length;++Vt)if(ba[Vt]!==void 0)return ba[Vt];return null},_C=s.UnboundTypeError=_I("UnboundTypeError"),Jn.push({T:function(){tI()}});var AI={p:function(Vt){return rC(Vt+16)+16},o:function(Vt,Un,Kn){throw new xA(Vt).V(Un,Kn),Vt},z:function(Vt,Un,Kn,qt,Xt){var ga=ua(Kn);Un=oA(Un),II(Vt,{name:Un,fromWireType:function(aA){return!!aA},toWireType:function(aA,BA){return BA?qt:Xt},argPackAdvance:8,readValueFromPointer:function(aA){if(Kn===1)var BA=ve;else if(Kn===2)BA=Ct;else if(Kn===4)BA=It;else throw new TypeError("Unknown boolean type size: "+Un);return this.fromWireType(BA[aA>>ga])},M:null})},y:function(Vt,Un){Un=oA(Un),II(Vt,{name:Un,fromWireType:function(Kn){var qt=ba[Kn].value;return IA(Kn),qt},toWireType:function(Kn,qt){return MA(qt)},argPackAdvance:8,readValueFromPointer:EI,M:null})},h:function(Vt,Un,Kn){Kn=ua(Kn),Un=oA(Un),II(Vt,{name:Un,fromWireType:function(qt){return qt},toWireType:function(qt,Xt){if(typeof Xt!="number"&&typeof Xt!="boolean")throw new TypeError('Cannot convert "'+wI(Xt)+'" to '+this.name);return Xt},argPackAdvance:8,readValueFromPointer:vI(Un,Kn),M:null})},e:function(Vt,Un,Kn,qt,Xt,ga){var aA=mC(Un,Kn);Vt=oA(Vt),Xt=QC(qt,Xt),tC(Vt,function(){RC("Cannot call "+Vt+" due to unbound types",aA)},Un-1),hA(aA,function(BA){var uI=Vt,mI=Vt;BA=[BA[0],null].concat(BA.slice(1));var qI=Xt,gC=BA.length;2>gC&&Nt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var JC=BA[1]!==null&&!1,WC=!1,YI=1;YI<BA.length;++YI)if(BA[YI]!==null&&BA[YI].M===void 0){WC=!0;break}var dE=BA[0].name!=="void",GC="",KC="";for(YI=0;YI<gC-2;++YI)GC+=(YI!==0?", ":"")+"arg"+YI,KC+=(YI!==0?", ":"")+"arg"+YI+"Wired";mI="return function "+WA(mI)+"("+GC+`) {
if (arguments.length !== `+(gC-2)+`) {
throwBindingError('function `+mI+" called with ' + arguments.length + ' arguments, expected "+(gC-2)+` args!');
}
`,WC&&(mI+=`var destructors = [];
`);var fE=WC?"destructors":"null";for(GC="throwBindingError invoker fn runDestructors retType classParam".split(" "),qI=[Nt,qI,ga,GI,BA[0],BA[1]],JC&&(mI+="var thisWired = classParam.toWireType("+fE+`, this);
`),YI=0;YI<gC-2;++YI)mI+="var arg"+YI+"Wired = argType"+YI+".toWireType("+fE+", arg"+YI+"); // "+BA[YI+2].name+`
`,GC.push("argType"+YI),qI.push(BA[YI+2]);if(JC&&(KC="thisWired"+(0<KC.length?", ":"")+KC),mI+=(dE?"var rv = ":"")+"invoker(fn"+(0<KC.length?", ":"")+KC+`);
`,WC)mI+=`runDestructors(destructors);
`;else for(YI=JC?1:2;YI<BA.length;++YI)gC=YI===1?"thisWired":"arg"+(YI-2)+"Wired",BA[YI].M!==null&&(mI+=gC+"_dtor("+gC+"); // "+BA[YI].name+`
`,GC.push(gC+"_dtor"),qI.push(BA[YI].M));if(dE&&(mI+=`var ret = retType.fromWireType(rv);
return ret;
`),GC.push(mI+`}
`),BA=WI(GC).apply(null,qI),YI=Un-1,!s.hasOwnProperty(uI))throw new bA("Replacing nonexistant public symbol");return s[uI].L!==void 0&&YI!==void 0?s[uI].L[YI]=BA:(s[uI]=BA,s[uI].S=YI),[]})},c:function(Vt,Un,Kn,qt,Xt){function ga(mI){return mI}Un=oA(Un),Xt===-1&&(Xt=4294967295);var aA=ua(Kn);if(qt===0){var BA=32-8*Kn;ga=function(mI){return mI<<BA>>>BA}}var uI=Un.indexOf("unsigned")!=-1;II(Vt,{name:Un,fromWireType:ga,toWireType:function(mI,qI){if(typeof qI!="number"&&typeof qI!="boolean")throw new TypeError('Cannot convert "'+wI(qI)+'" to '+this.name);if(qI<qt||qI>Xt)throw new TypeError('Passing a number "'+wI(qI)+'" from JS side to C/C++ side to an argument of type "'+Un+'", which is outside the valid range ['+qt+", "+Xt+"]!");return uI?qI>>>0:qI|0},argPackAdvance:8,readValueFromPointer:MC(Un,aA,qt!==0),M:null})},b:function(Vt,Un,Kn){function qt(ga){ga>>=2;var aA=xt;return new Xt(Me,aA[ga+1],aA[ga])}var Xt=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][Un];Kn=oA(Kn),II(Vt,{name:Kn,fromWireType:qt,argPackAdvance:8,readValueFromPointer:qt},{U:!0})},i:function(Vt,Un){Un=oA(Un);var Kn=Un==="std::string";II(Vt,{name:Un,fromWireType:function(qt){var Xt=xt[qt>>2];if(Kn)for(var ga=qt+4,aA=0;aA<=Xt;++aA){var BA=qt+4+aA;if(aA==Xt||At[BA]==0){if(ga=ga?se(At,ga,BA-ga):"",uI===void 0)var uI=ga;else uI+="\0",uI+=ga;ga=BA+1}}else{for(uI=Array(Xt),aA=0;aA<Xt;++aA)uI[aA]=String.fromCharCode(At[qt+4+aA]);uI=uI.join("")}return JI(qt),uI},toWireType:function(qt,Xt){Xt instanceof ArrayBuffer&&(Xt=new Uint8Array(Xt));var ga=typeof Xt=="string";ga||Xt instanceof Uint8Array||Xt instanceof Uint8ClampedArray||Xt instanceof Int8Array||Nt("Cannot pass non-string to std::string");var aA=(Kn&&ga?function(){for(var mI=0,qI=0;qI<Xt.length;++qI){var gC=Xt.charCodeAt(qI);55296<=gC&&57343>=gC&&(gC=65536+((gC&1023)<<10)|Xt.charCodeAt(++qI)&1023),127>=gC?++mI:mI=2047>=gC?mI+2:65535>=gC?mI+3:mI+4}return mI}:function(){return Xt.length})(),BA=rC(4+aA+1);if(xt[BA>>2]=aA,Kn&&ga)ae(Xt,BA+4,aA+1);else if(ga)for(ga=0;ga<aA;++ga){var uI=Xt.charCodeAt(ga);255<uI&&(JI(BA),Nt("String has UTF-16 code units that do not fit in 8 bits")),At[BA+4+ga]=uI}else for(ga=0;ga<aA;++ga)At[BA+4+ga]=Xt[ga];return qt!==null&&qt.push(JI,BA),BA},argPackAdvance:8,readValueFromPointer:EI,M:function(qt){JI(qt)}})},d:function(Vt,Un,Kn){if(Kn=oA(Kn),Un===2)var qt=he,Xt=Be,ga=pe,aA=function(){return Rt},BA=1;else Un===4&&(qt=be,Xt=Re,ga=Fe,aA=function(){return xt},BA=2);II(Vt,{name:Kn,fromWireType:function(uI){for(var mI=xt[uI>>2],qI=aA(),gC,JC=uI+4,WC=0;WC<=mI;++WC){var YI=uI+4+WC*Un;(WC==mI||qI[YI>>BA]==0)&&(JC=qt(JC,YI-JC),gC===void 0?gC=JC:(gC+="\0",gC+=JC),JC=YI+Un)}return JI(uI),gC},toWireType:function(uI,mI){typeof mI!="string"&&Nt("Cannot pass non-string to C++ string type "+Kn);var qI=ga(mI),gC=rC(4+qI+Un);return xt[gC>>2]=qI>>BA,Xt(mI,gC+4,qI+Un),uI!==null&&uI.push(JI,gC),gC},argPackAdvance:8,readValueFromPointer:EI,M:function(uI){JI(uI)}})},A:function(Vt,Un){Un=oA(Un),II(Vt,{aa:!0,name:Un,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},n:IA,x:function(Vt){4<Vt&&(ba[Vt].P+=1)},C:function(Vt,Un){var Kn=lA[Vt];return Kn===void 0&&Nt("_emval_take_value has unknown type "+vC(Vt)),Vt=Kn.readValueFromPointer(Un),MA(Vt)},t:function(){pI()},r:function(Vt,Un,Kn){At.copyWithin(Vt,Un,Un+Kn)},s:function(Vt){Vt>>>=0;var Un=At.length;if(2147483648<Vt)return!1;for(var Kn=1;4>=Kn;Kn*=2){var qt=Un*(1+.2/Kn);qt=Math.min(qt,Vt+100663296),qt=Math.max(16777216,Vt,qt),0<qt%65536&&(qt+=65536-qt%65536);e:{try{J.grow(Math.min(2147483648,qt)-Me.byteLength+65535>>>16),jt(J.buffer);var Xt=1;break e}catch{}Xt=void 0}if(Xt)return!0}return!1},u:function(Vt,Un){var Kn=0;return zn().forEach(function(qt,Xt){var ga=Un+Kn;for(Xt=It[Vt+4*Xt>>2]=ga,ga=0;ga<qt.length;++ga)ve[Xt++>>0]=qt.charCodeAt(ga);ve[Xt>>0]=0,Kn+=qt.length+1}),0},v:function(Vt,Un){var Kn=zn();It[Vt>>2]=Kn.length;var qt=0;return Kn.forEach(function(Xt){qt+=Xt.length+1}),It[Un>>2]=qt,0},w:function(){return 0},q:function(){},g:function(Vt,Un,Kn,qt){for(var Xt=0,ga=0;ga<Kn;ga++){for(var aA=It[Un+8*ga>>2],BA=It[Un+(8*ga+4)>>2],uI=0;uI<BA;uI++){var mI=At[aA+uI],qI=PA[Vt];mI===0||mI===10?((Vt===1?M:P)(se(qI,0)),qI.length=0):qI.push(mI)}Xt+=BA}return It[qt>>2]=Xt,0},a:J,l:function(){return 0},k:function(){return 0},j:function(){},B:function(){return 6},m:function(){},f:function(){}};(function(){function Vt(Xt){s.asm=Xt.exports,Qn=s.asm.D,xI--,s.monitorRunDependencies&&s.monitorRunDependencies(xI),xI==0&&cI&&(Xt=cI,cI=null,Xt())}function Un(Xt){Vt(Xt.instance)}function Kn(Xt){return Promise.resolve().then(eA).then(function(ga){return WebAssembly.instantiate(ga,qt)}).then(Xt,function(ga){P("failed to asynchronously prepare wasm: "+ga),pI(ga)})}var qt={a:AI};if(xI++,s.monitorRunDependencies&&s.monitorRunDependencies(xI),s.instantiateWasm)try{return s.instantiateWasm(qt,Vt)}catch(Xt){return P("Module.instantiateWasm callback failed with error: "+Xt),!1}return function(){return H||typeof WebAssembly.instantiateStreaming!="function"||nI()||aI("file://")||typeof fetch!="function"?Kn(Un):fetch(uA,{credentials:"same-origin"}).then(function(Xt){return WebAssembly.instantiateStreaming(Xt,qt).then(Un,function(ga){return P("wasm streaming compile failed: "+ga),P("falling back to ArrayBuffer instantiation"),Kn(Un)})})}().catch(_),{}})();var tI=s.___wasm_call_ctors=function(){return(tI=s.___wasm_call_ctors=s.asm.E).apply(null,arguments)},rC=s._malloc=function(){return(rC=s._malloc=s.asm.F).apply(null,arguments)},JI=s._free=function(){return(JI=s._free=s.asm.G).apply(null,arguments)},cC=s.___getTypeName=function(){return(cC=s.___getTypeName=s.asm.H).apply(null,arguments)};s.___embind_register_native_and_builtin_types=function(){return(s.___embind_register_native_and_builtin_types=s.asm.I).apply(null,arguments)},s.dynCall_jiiiii=function(){return(s.dynCall_jiiiii=s.asm.J).apply(null,arguments)},s.dynCall_jiji=function(){return(s.dynCall_jiji=s.asm.K).apply(null,arguments)};var sC;cI=function Vt(){sC||XI(),sC||(cI=Vt)};function XI(){function Vt(){if(!sC&&(sC=!0,s.calledRun=!0,!K)){if(DA(Jn),DA(wA),f(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;){var Un=s.postRun.shift();LA.unshift(Un)}DA(LA)}}if(!(0<xI)){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)ZA();DA(ca),0<xI||(s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),Vt()},1)):Vt())}}if(s.run=XI,s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return XI(),d.ready}}(),__isNode=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,__toBinary=__isNode?d=>new Uint8Array(Buffer.from(d,"base64")):(()=>{for(var d=new Uint8Array(128),s=0;s<64;s++)d[s<26?s+65:s<52?s+71:s<62?s-4:s*4-205]=s;return f=>{for(var _=f.length,S=new Uint8Array((_-(f[_-1]=="=")-(f[_-2]=="="))*3/4|0),T=0,F=0;T<_;){var M=d[f.charCodeAt(T++)],P=d[f.charCodeAt(T++)],H=d[f.charCodeAt(T++)],J=d[f.charCodeAt(T++)];S[F++]=M<<2|P>>4,S[F++]=P<<4|H>>2,S[F++]=H<<6|J}return S}})(),wasmBinary=__toBinary("AGFzbQEAAAABwAImYAF/AX9gA39/fwF/YAV/f39/fwF/YAJ/fwF/YAJ/fwBgAX8AYAN/f38AYAR/f39/AX9gBH9/f38AYAAAYAZ/f39/f38Bf2AFf39/f38AYAZ/f39/f38AYAd/f39/f39/AX9gBH9/f38BfmAFf39/f38BfmAIf39/f39/f38Bf2AJf39/f39/f39/AX9gAn5/AX9gC39/f39/f39/f39/AX9gA39+fwF+YAN/f34AYAN/f34Bf2ADfn9/AX9gAn5+AX5gCH9/f39/f39/AGAJf39/f39/f39/AGAFf35/f38AYAABf2ANf39/f39/f39/f39/fwF/YA9/f39/f39/f39/f39/f38Bf2AFf39/fn8Bf2AGf3x/f39/AX9gAX8BfmACf38BfmAHf35/f39/fwF+YAF+AX5gBH5/f34BfgK0AR0BYQFiAAYBYQFjAAsBYQFkAAYBYQFlAAwBYQFmAAUBYQFnAAcBYQFoAAYBYQFpAAQBYQFqAAMBYQFrAAABYQFsAAABYQFtAAMBYQFuAAUBYQFvAAYBYQFwAAABYQFxAAIBYQFyAAEBYQFzAAABYQF0AAkBYQF1AAMBYQF2AAMBYQF3AAABYQF4AAUBYQF5AAQBYQF6AAsBYQFBAAQBYQFCAAcBYQFDAAMBYQFhAgGAAoCAAgOtBKsEBAEBAwIACAAAAAQHAQEBAAIBAAQDAQMBBAEFAwUFAAYAAwAIAgIDAQgBAwYBCwEBAAQYBAEEBwoGAwMLBwgBBggDCwUDAwMGCAEGBAYABwIGAAABAAIEBAYEBQMDAAsABgwDAAANBgIYAwkAAQwGBggAAgAAAAUQHQAEAQMbBwcHBwMDBh4TBAgBAgECCgcGCgYEAAQAARARAwAIAAYDBgAFBQUFBQUJCwUGAQAFBQICAgcHAwQEAAcSARIXJQQGAwMDAAUEAQABBQUDAAMGCgAFBQMBHwUDAwUFAREDBwoEAAUBAwcKCiEGBQEABgYGBQUIAxMNAAADAAkBBwcHBwcHBwcAAQgGBwMRAgICAgYCCAoCAgcCCAAFBAUFAAMAAAIKBBQACQwMCwMLCAgICwwAAQEFAAUABQkDAAMSEhcGAQAUAAAJCQkJBgAJCQkJCQkJCQkJCQkJDQ0ABgcBAQcHAgEBAgEEAwoABAcFBRwKCgoFAgoCAgMaGQUE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BCAGanQgAWohASACIARHIQwgBEEBaiEEIAwNAAsLIA1BAWoiDSACayIBIAcgAWtBAWoiCEkEQCAKQQJJIQYDQEEBIQQgBkUEQANAIARBAnQiCiADIAFBNGxqaiADIApqKAIAIAF2NgIAIAIgBEchCiAEQQFqIQQgCg0ACwsgAUEBaiIBIAhJDQALCyAAQQRqIAcgCyAJIANBpAVqIAMgAiANEJYDIAVBAToABSAFIAc6AAYgACAFKAIENgIACyAQIQQLIAVBEGokACAEC+ACAQl/IwBBEGsiBCQAIARBADYCDCAEQQA2AggCQCADQUBrIgkgAyAEQQhqIARBDGogASACEPsBIggQIQ0AIARBBGogACgCABA0QQEhASAEKAIMIgUgBC0ABEEBak0EQEEAIQIgBEEAOgAFIAQgBToABiAAIAQoAgQ2AgAgBUEBakEBSwRAA0AgAyABQQJ0aiIGKAIAIQcgBiACNgIAIAcgAUF/anQgAmohAiABIAVGIQYgAUEBaiEBIAZFDQALCyAEKAIIIgdFDQEgAEEEaiEKIAVBAWohC0EAIQADQCADIAAgCWotAAAiBUECdGoiBigCACIBIAFBASAFdEEBdSIMaiICSQRAIAsgBWshBQNAIAogAUEBdGoiAiAFOgABIAIgADoAACABQQFqIgEgBigCACAMaiICSQ0ACwsgBiACNgIAIABBAWoiACAHRw0ACwwBC0FUIQgLIARBEGokACAICxQAIAAoAABBgPqerQNsQSAgAWt2CygAAkACQAJAIAAoAowBQX9qDgIAAQILIAAgARDCAw8LIAAgARDHAwsLOgEBfyABIAAoAgRrIgEgACgCGCICQYAIaksEQCAAIAEgASACa0GAeGoiAEGABCAAQYAESRtrNgIYCwsVACAAEJEBBEAgACgCBA8LIAAtAAsLRQEBfwJAIAIgA00gACABTXINAANAIABBf2oiAC0AACACQX9qIgItAABHDQEgBEEBaiEEIAIgA00NASAAIAFLDQALCyAECwwAIABBICABa62IpwsQACAAIAEgAigCCHRBA3RqCxIAIABBwAAgAWutiKdBACABGwsvAEEgIAFrIgEgAkkEQCAAp0F/IAJ0QX9zcQ8LIAAgASACa62Ip0F/IAJ0QX9zcQsgACACrSAAIAGtQgp8IAN+fULjyJW9y5vvjU9+fEIK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nn9+QuPcypX8zvL1hX98IQYgBCIDIgFBCGoiBCACTQ0ACwsCQCADQQRqIgEgAksEQCADIQEMAQsgAygAAK1Ch5Wvr5i23puef34gBoVCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQYLIAEgAkkEQCAAIAVqQShqIQADQCABMQAAQsXP2bLx5brqJ34gBoVCC4lCh5Wvr5i23puef34hBiABQQFqIgEgAEcNAAsLIAZCIYggBoVCz9bTvtLHq9lCfiIGQh2IIAaFQvnz3fGZ9pmrFn4iBkIgiCAGhQv4AgICfwR+IAAgACkDACACrXw3AwACQAJAIAAoAkgiAyACakEfTQRAIAAgA2pBKGogASACEKsBIAAoAkggAmohAQwBCyABIAJqIQQCQAJ/IAMEQCAAQShqIgIgA2ogAUEgIANrEKsBIAAgACkDCCACKQAAEE43AwggACAAKQMQIAApADAQTjcDECAAIAApAxggACkAOBBONwMYIAAgACkDICAAQUBrKQAAEE43AyAgACgCSCECIABBADYCSCABIAJrQSBqIQELIAFBIGogBEsLBEAgASECDAELIARBYGohAyAAKQMgIQUgACkDGCEGIAApAxAhByAAKQMIIQgDQCAIIAEpAAAQTiEIIAcgASkACBBOIQcgBiABKQAQEE4hBiAFIAEpABgQTiEFIAFBIGoiAiEBIAIgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyACIARPDQEgAEEoaiACIAQgAmsiARCrAQsgACABNgJICwtlACAAQgA3AyggAEL56tDQ58mh5OEANwMgIABCADcDGCAAQs/W077Sx6vZQjcDECAAQtbrgu7q/Yn14AA3AwggAEIANwMAIABCADcDMCAAQgA3AzggAEFAa0IANwMAIABCADcDSAsVACABBEAgAiAAIAERAwAPCyAAEEwLYQEDf0F+IQECQCAARQ0AIAAoAhwiAkUNACAAKAIkIgNFDQAgAigCNCIBBEAgACgCKCABIAMRBAAgACgCJCEDIAAoAhwhAgsgACgCKCACIAMRBABBACEBIABBADYCHAsgAQudCwEMfyACQQBOBEBBBEEDIAEvAQIiCxshB0EHQYoBIAsbIQQgAEG5LWohCEF/IQYDQCALIQkCQCAJIAEgDCINQQFqIgxBAnRqLwECIgtH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AhQgCiAAKAIIaiADOgAAIAAgACgCFCIDQQFqNgIUIAMgACgCCGogAEG5LWotAAA6AAAgACABQRAgACgCvC0iAWt2OwG4LSAAIAEgAmpBcGo2ArwtDwsgACACIARqNgK8LQuXAQECfwJAAn8gACgCvC0iAUEJTgRAIAAgACgCFCIBQQFqNgIUIAEgACgCCGogAC0AuC06AAAgACAAKAIUIgFBAWo2AhQgAEG5LWotAAAhAiABIAAoAghqDAELIAFBAUgNASAAIAAoAhQiAUEBajYCFCAALQC4LSECIAEgACgCCGoLIAI6AAALIABBADYCvC0gAEEAOwG4LQvaBAEBfwNAIAAgAUECdGpBADsBlAEgAUEBaiIBQZ4CRw0ACyAAQQA7AfwUIABBADsBiBMgAEHEFWpBADsBACAAQcAVakEAOwEAIABBvBVqQQA7AQAgAEG4FWpBADsBACAAQbQVakEAOwEAIABBsBVqQQA7AQAgAEGsFWpBADsBACAAQagVakEAOwEAIABBpBVqQQA7AQAgAEGgFWpBADsBACAAQZwVakEAOwEAIABBmBVqQQA7AQAgAEGUFWpBADsBACAAQZAVakEAOwEAIABBjBVqQQA7AQAgAEGIFWpBADsBACAAQYQVakEAOwEAIABBgBVqQQA7AQAgAEH8E2pBADsBACAAQfgTakEAOwEAIABB9BNqQQA7AQAgAEHwE2pBADsBACAAQewTakEAOwEAIABB6BNqQQA7AQAgAEHkE2pBADsBACAAQeATakEAOwEAIABB3BNqQQA7AQAgAEHYE2pBADsBACAAQdQTakEAOwEAIABB0BNqQQA7AQAgAEHME2pBADsBACAAQcgTakEAOwEAIABBxBNqQQA7AQAgAEHAE2pBADsBACAAQbwTakEAOwEAIABBuBNqQQA7AQAgAEG0E2pBADsBACAAQbATakEAOwEAIABBrBNqQQA7AQAgAEGoE2pBADsBACAAQaQTakEAOwEAIABBoBNqQQA7AQAgAEGcE2pBADsBACAAQZgTakEAOwEAIABBlBNqQQA7AQAgAEGQE2pBADsBACAAQYwTakEAOwEAIABCADcCrC0gAEGUCWpBATsBACAAQQA2AqgtIABBADYCoC0LngEBAn8gACAALwG4LSADQf//A3EiBCAAKAK8LSIDdHIiBTsBuC0gAAJ/IANB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A0AgCSAFIARBAXRqIgotAAEiC0ECdGoiDCgCACEDIAlBPGogCi0AAEEIdCAIakH//wNxEC8gCUECOgA/IAkgByALayIKIAJqOgA+IANBASABIAprdGohCiAJKAI8IQsDQCAAIANBAnRqIAs2AQAgA0EBaiIDIApJDQALIAwgCjYCACAEQQFqIgQgBkcNAAsLIAlBQGskAAvdAgEJfyMAQdAAayIJJAAgCUFAayAFKAIwNgIAIAkgBSkCKDcDOCAJIAUpAiA3AzAgCSAFKQIYNwMoIAkgBSkCEDcDICAJIAUpAgA3AxAgCSAFKQIINwMYIAMEQCAHIAZrIQ8gByABayEQA0BBASABIAcgAiALQQF0aiIGLQABIgxrIghrIgp0IQ0gBi0AACEOIAlBEGogDEECdGoiDCgCACEGAkAgCiAPTwRAIAAgBkECdGogCiAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QlQMgBiANaiEIDAELIAlBDGogDhAvIAlBAToADyAJIAg6AA4gBiAGIA1qIghPDQAgCSgCDCEKA0AgACAGQQJ0aiAKNgEAIAZBAWoiBiAIRw0ACwsgDCAINgIAIAtBAWoiCyADRw0ACwsgCUHQAGokAAs+AQN/IAAEQCAAKAIAIABBvNABaigCACIBIABBwNABaigCACICIABBxNABaigCACIDEGQgACABIAIgAxBkCwvMAQEBfyAAIAEoArTQATYCmOIBIAAgASgCBCICNgLA4AEgACACNgK84AEgACACIAEoAghqIgI2ArjgASAAIAI2AsTgASABKAK40AEEQCAAQoGAgIAQNwOI4QEgACABQaTQAGo2AgwgACABQZQgajYCCCAAIAFBnDBqNgIEIAAgAUEMajYCACAAQazQAWogAUGo0AFqKAIANgIAIABBsNABaiABQazQAWooAgA2AgAgAEG00AFqIAFBsNABaigCADYCAA8LIABCADcDiOEBC6JIAS5/IwBB4ABrIhIkACAAKAKEASEGIAAoAgQhByAAKAKIASEFIAAoAgwhCCASIAAoAhg2AlwgACgCPCEbIABBQGsoAgAhHCAAQSxqIiYgAyAEQQIQWSADIAcgCGogA0ZqIg0gAyAEaiIMQXhqIi5JBEAgBUH/HyAFQf8fSRsh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AnRBsKcBaigCABBHIAtBOGoQOSALQThqIAAvAQYgAi0AAEECdEGQpAFqKAIAEEcgC0E4ahA5AkAgCgRAIAEtAAAiASABQRggAUEYSRsiAmsiAQRAIAtBOGogACgCACABEEcgC0E4ahA5CyALQThqIAAoAgAgAXYgAhBHDAELIAtBOGogACgCACABLQAAEEcLIAtBOGoQOSAJQQJPBEAgCUF+aiEMA0AgByAMai0AACECIAMgDGotAAAhBCALQThqIAtBGGogBSAMai0AACIAEGwgC0E4aiALQShqIAQQbCALQThqEDkgC0E4aiALQQhqIAIQbCALQThqEDkgC0E4aiAIIAxBA3RqIgEvAQQgAkECdEGwpwFqKAIAIgIQRyACIARBAnRBkKQBaigCACICakEZTwRAIAtBOGoQOQsgC0E4aiABLwEGIAIQRyALQThqEDkCQCAKBEAgACAAQRggAEEYSRsiAmsiAARAIAtBOGogASgCACAAEEcgC0E4ahA5CyALQThqIAEoAgAgAHYgAhBHDAELIAtBOGogASgCACAAEEcLIAtBOGoQOSAMQX9qIgwgCUkNAAsLIAtBOGogCygCKCALKAI0EHQgC0E4aiALKAIYIAsoAiQQdCALQThqIAsoAgggCygCFBB0IAtBOGoQ/QEiAEG6fyAAGyEMCyALQdAAaiQAIAwLLwAgACACQQN0aigCBCIAQRB2QQFqIgJBCHRBfyABdCAAayACQRB0akEIdCABdmsLTwEEfwNAIANBASAAIARBAnRqKAIAIgNBCHQiBSACbiIGIAUgAkkbIAYgAxtBAnRBkJwBaigCACADbGohAyAEQQFqIgQgAU0NAAsgA0EIdgtKAQF/IwBB8ARrIgQkACAEIAMgAiABEKcBIgMgACACIAEQpgEiAhAhRQRAIARB8ABqQYAEIAQgASADEKgBIQILIARB8ARqJAAgAguKAQEIfyMAQRBrIgMkACADIAAQc0F/IQUCQCAALwACIAJJDQAgAygCDCIHQQh0QYACaiEIIAMoAgghCUEAIQADQCAJIAcgABDJAyEGIAEgAEECdGooAgAiCgRAIAYgCE8NAiAGIApsIARqIQQLIABBAWoiACACTQ0ACyAEQQh2IQULIANBEGokACAFC18BAn9BCCABayEFQQAhAQNAIARBASAAIAFBAXRqLwEAIgQg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ASACEEUiARAhDQEgBEEQaiAEQRhqIAMQggEgBEEIaiAEQRhqIAMQggFBACEBAkAgBEEYahAjBEBBACEDDAELA0AgACABaiICIARBEGogBEEYahBiOgAAIAIgBEEIaiAEQRhqEGI6AAEgBEEYahAjBEAgAUECciEDDAILIAIgBEEQaiAEQRhqEGI6AAIgAiAEQQhqIARBGGoQYjoAAyABQQRqIQMgBEEYahAjIQIgAUH3AUsNASADIQEgAkUNAAsLAn8DQEG6fyEBIANB/QFLDQMgACADaiICIARBEGogBEEYahBiOgAAIAIiBkEBaiEFIARBGGoQI0EDRgRAQQIhAyAEQQhqDAILIANB/AFLDQMgBiAEQQhqIARBGGoQYjoAASADQQJqIQMgBEEYahAjQQNHDQALIAAgA2ohBUEDIQMgBEEQagshASAFIAEgBEEYahBiOgAAIAIgA2ogAGshAQwBCyAEQRhqIAEgAhBFIgEQIQ0AIARBEGogBEEYaiADEIIBIARBCGogBEEYaiADEIIBQQAhAQJAIARBGGoQIwRAQQAhAwwBCwNAIAAgAWoiAiAEQRBqIARBGGoQYToAACACIARBCGogBEEYahBhOgABIARBGGoQIwRAIAFBAnIhAwwCCyACIARBEGogBEEYahBhOgACIAIgBEEIaiAEQRhqEGE6AAMgAUEEaiEDIARBGGoQIyECIAFB9wFLDQEgAyEBIAJFDQALCwJ/A0BBun8hASADQf0BSw0CIAAgA2oiAiAEQRBqIARBGGoQYToAACACIgZBAWohBSAEQRhqECNBA0YEQEECIQMgBEEIagwCCyADQfwBSw0CIAYgBEEIaiAEQRhqEGE6AAEgA0ECaiEDIARBGGoQI0EDRw0ACyAAIANqIQVBAyEDIARBEGoLIQEgBSABIARBGGoQYToAACACIANqIABrIQELIARBMGokACABC68DAQp/IwBBgARrIgkkAEFSIQUCQCACQf8BSw0AIABBBGohCkGAgAQgA0F/anRBEHUhC0EBIAN0IghBf2oiDCEHQQEhBQNAAkAgASAEQQF0Ig1qLwEAIgZB//8DRgRAIAogB0ECdGogBDoAAiAHQX9qIQdBASEGDAELIAVBACALIAZBEHRBEHVKGyEFCyAJIA1qIAY7AQAgAiAERyEGIARBAWohBCAGDQALIAAgBTsB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IAIgASgCCGpBADoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQA6AABBAiECIAEoAoQBIgNBCUcEQEEEIAEoAogBQQFKQQJ0IANBAkgbIQILIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACABIAEoAhQiAkEBajYCFCACIAEoAghqQQM6AAAgAUHxADYCBAwNCyACKAIkIQMgAigCHCEEIAIoAhAhBSACKAIsIQYgAigCACEHIAEgASgCFCIIQQFqNgIUQQIhAiAIIAEoAghqIAZBAEdBAXQgB0EAR3IgBUEAR0ECdHIgBEEAR0EDdHIgA0EAR0EEdHI6AAAgASgCHCgCBCEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAIcKAIEIQMgASABKAIUIgRBAWo2AhQgBCABKAIIaiADQQh2OgAAIAEoAhwvAQYhAyABIAEoAhQiBEEBajYCFCAEIAEoAghqIAM6AAAgASgCHC0AByEDIAEgASgCFCIEQQFqNgIUIAQgASgCCGogAzoAACABKAKEASIDQQlHBEBBBCABKAKIAUEBSkECdCADQQJIGyECCyABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCDCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAAAJ/IAEoAhwiBCgCEARAIAQoAhQhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgASgCHCgCFCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACABKAIcIQQLIAQoAiwLBEAgACAAKAIwIAEoAgggASgCFBA1NgIwCyABQcUANgIEIAFBADYCIAwCCyABKAIwQQx0QYCQfmohBEEAIQICQCABKAKIAUEBSg0AIAEoAoQBIgNBAkgNAEHAACECIANBBkgNAEGAAUHAASADQQZGGyECCyABQfEANgIEIAEgAiAEciICQSByIAIgASgCbBsiAkEfcCACckEfcxB1IAEoAmwEQCABIAAvATIQdSABIAAvATAQdQsgAEEAQQBBABBlNgIwIAEoAgQhAgsgAkHFAEcNASABKAIcIQQLAkAgBCgCEARAIAEoAhQhAiABKAIgIgUgBC8BFE8NASACIQMDQCABKAIMIAJGBEACQCACIANNDQAgBCgCLEUNACAAIAAoAjAgASgCCCADaiACIANrEDU2AjALIAAQNiABKAIcIQQgASgCFCICIAEoAgxGDQMgASgCICEFIAIhAwsgBCgCECAFai0AACEEIAEgAkEBajYCFCABKAIIIAJqIAQ6AAAgASABKAIgQQFqIgU2AiAgBSABKAIcIgQvARRPBEAgAyECDAMFIAEoAhQhAgwBCwALAAsgAUHJADYCBAwCCwJAIAQoAixFDQAgASgCFCIDIAJNDQAgACAAKAIwIAEoAgggAmogAyACaxA1NgIwCyABKAIgIAQoAhRGBEAgAUHJADYCBCABQQA2AiAMAgsgASgCBCECCyACQckARw0BIAEoAhwhBAsgBCgCHEUNAiABKAIUIgIhAwJAA0ACQCABKAIMIAJGBEACQCACIANNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCADaiACIANrEDU2AjALIAAQNiABKAIUIgIgASgCDEYNASACIQMLQQEhBSABKAIcKAIcIQQgASABKAIgIgZBAWo2AiAgBCAGai0AACEEIAEgAkEBajYCFCABKAIIIAJqIAQ6AAAgBARAIAEoAhQhAgwCBSADIQIMAwsACwtBACEFCwJAIAEoAhwiBCgCLEUNACABKAIUIgMgAk0NACAAIAAoAjAgASgCCCACaiADIAJrEDU2AjALIAUNASABKAIEIQILIAJB2wBHDQMgASgCHCEEDAILIAFBADYCIAsgAUHbADYCBAsgBCgCJEUNASABKAIUIgIhAwJAA0ACQCABKAIMIAJGBEACQCACIANNDQAgASgCHCgCLEUNACAAIAAoAjAgASgCCCADaiACIANrEDU2AjALIAAQNiABKAIUIgIgASgCDEYNASACIQMLQQEhBSABKAIcKAIkIQQgASABKAIgIgZBAWo2AiAgBCAGai0AACEEIAEgAkEBajYCFCABKAIIIAJqIAQ6AAAgBARAIAEoAhQhAgwCBSADIQIMAwsACwtBACEFCwJAIAEoAhwiBCgCLEUNACABKAIUIgMgAk0NACAAIAAoAjAgASgCCCACaiADIAJrEDU2AjALIAUNASABKAIEIQILIAJB5wBHDQIgASgCHCEEDAELIAFB5wA2AgQLIAQoAiwEQCABKAIUIgVBAmoiAiABKAIMIgRLBH8gABA2IAEoAgwhBCABKAIUIgVBAmoFIAILIARLDQEgACgCMCECIAEgBUEBajYCFCABKAIIIAVqIAI6AAAgACgCMCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACAAQQBBAEEAEDU2AjAgAUHxADYCBAwBCyABQfEANgIECwJAIAEoAhQEQCAAEDYgACgCEARAIAAoAgQhAgwCCwwECyAAKAIEIgINAEEAIQILAkACQAJAIAEoAgQiA0GaBUYEQCACRQ0BDAULIAINAQsgA0GaBUcNACABKAJ0RQ0BCwJ/AkACQAJAIAEoAogBQX5qDgIAAQILIAEQnQQMAgsgARCcBAwBCyABQQQgASgChAFBDGxBuNcAaigCABEDAAsiAkF+cUECRgRAIAFBmgU2AgQLIAJBfXFFBEBBACECIAAoAhANAgwECyACQQFHDQAgAUEAQQBBABCOAiAAEDYgACgCEA0ADAMLQQEhAiABKAIYIgNBAUgNACAAKAIwIQICQCADQQJGBEAgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAAoAjAhAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAJBCHY6AAAgAC8BMiECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAjoAACAALQAzIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAAoAgghAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAgACgCCCECIAEgASgCFCIDQQFqNgIUIAMgASgCCGogAkEIdjoAACAALwEKIQIgASABKAIUIgNBAWo2AhQgAyABKAIIaiACOgAAIAAtAAshAiABIAEoAhQiA0EBajYCFCADIAEoAghqIAI6AAAMAQsgASACQRB2EHUgASAALwEwEHULIAAQNiABKAIYIgBBAU4EQCABQQAgAGs2AhgLIAEoAhRFIQILIAIPCyAAQceEATYCGEF7DwsgAUF/NgIoQQAL3QEBBn8CQCAAKAKAgBAiBSAAKAKEgBAiAyAAKAKMgBAiBGpBBGpJDQAgACgClIAQIgIgBSADa0F9aiIGTw0AA0AgACACQf//A3FBAXRqQYCACGogAiAAIAIgA2oQOkECdGoiBCgCAGsiB0H//wMgB0H//wNJGzsBACAEIAI2AgAgAkEBaiICIAZJDQALIAAoAoyAECEECyAAIAQ2ApCAECAAIAM2AoiAECAAQQA2ApyAECAAIAE2AoCAECAAIAUgA2siAjYCjIAQIAAgAjYClIAQIAAgASACazYChIAQC9kDAQR/IwBBEGsiAyQAIAFBADYCACAAKAIAIgIgA0EMaiACKAIAKAIMEQMAIQICQCADKAIMRQ0AIAIsAAAhAiAAKAIAIgRBASAEKAIAKAIQEQQAIAEgASgCACACQf8AcXI2AgACQCACQX9KDQAgACgCACICIANBDGogAigCACgCDBEDACECIAMoAgxFDQEgAiwAACECIAAoAgAiBEEBIAQoAgAoAhARBAAgASABKAIAIAJB/wBxQQd0cjYCACACQX9KDQAgACgCACICIANBDGogAigCACgCDBEDACECIAMoAgxFDQEgAiwAACECIAAoAgAiBEEBIAQoAgAoAhARBAAgASABKAIAIAJB/wBxQQ50cjYCACACQX9KDQAgACgCACICIANBDGogAigCACgCDBEDACECIAMoAgxFDQEgAiwAACECIAAoAgAiBEEBIAQoAgAoAhARBAAgASABKAIAIAJB/wBxQRV0cjYCACACQX9KDQAgACgCACICIANBDGogAigCACgCDBEDACECIAMoAgxFDQEgAiwAACEFIAAoAgAiAEEBIAAoAgAoAhARBAAgASABKAIAIAVBHHRyNgIAIAVBf0oNAEEAIQUMAQtBASEFCyADQRBqJAAgBQvhSQE3fwJAIAAoAoCAECIJIAAoAoSAECILayAAKAKQgBBrIghBgIAETwRAIABBADYCnIAQDAELAkAgCA0AIAMoAgBBgSBIDQAgACAAKAKcgBBBoIAQECoiACABEKwEIAAgBTsBmIAQDAELAkAgBEEATEEAIAZBAkYbDQAgAygCACIIQYCAgPAHSw0AIAAgCCAJajYCgIAQQQkgBSAFQQFIGyIFQQwgBUEMSBsiG0EMbCIJQZQWaigCACEuAkACfyAbQQlNBEAgA0EANgIAIAIgBGoiOkF7aiA6IAZBAkYiOxshKSABIAhqITMgASEoIAIhCQJAIAhBDUgNACAzQXRqIjIgAUkNAEGANCAbdkEBcSE0IDNBe2oiGEF/aiEvIBhBfWohIkEAIRsDQCAAKAKUgBAhBCAAKAKIgBAhEyAAKAKcgBAhFCAoIQwDQCAAKAKQgBAiBSAMIAtrIh9BgYB8aiAFQYCABGogH0sbIRUgACgCjIAQIRAgDCgAACEOIAQgH0kEQANAIAAgBEH//wNxQQF0akGAgAhqIAQgACAEIAtqEDpBAnRqIgUoAgBrIghB//8DIAhB//8DSRs7AQAgBSAENgIAIARBAWoiBCAfSQ0ACwsgACAfNgKUgBAgDEEIaiEhIAxBBGohEkEDIQgCQCAAIAwQOkECdCIjaigCACIHIBVJBEAgLiENDAELIA5B//8DcSAOQRB2RiAOQf8BcSAOQRh2RnEhJCAQIBNqIQ8gCyAQaiIdQQRqIREgDEF/aiEmQQAhJSAuIQ1BACEcA0ACQAJAAn8CQAJAIBAgB00EQCAIICZqLwAAIAcgC2oiCiAIakF/ai8AAEcNBSAOIAooAABHDQUgCkEEaiEEICIgEk0EfyASBSAEKAAAIBIoAABzIgUNAiAEQQRqIQQgIQsiBSAiSQRAA0AgBCgAACAFKAAAcyIWBEAgFhAlIAVqIBJrIQQMBwsgBEEEaiEEIAVBBGoiBSAiSQ0ACwsCQCAFIC9PDQAgBC8AACAFLwAARw0AIARBAmohBCAFQQJqIQULIAUgGEkEfyAFQQFqIAUgBC0AACAFLQAARhsFIAULIBJrIQQMBAsgDiAHIBNqIgQoAABHDQQgBEEEaiEEAn8gEiAYIAwgECAHa2oiICAgIBhLGyIWQX1qIgogEk0NABogBCgAACASKAAAcyIFDQIgBEEEaiEEICELIgUgCkkEQANAIAQoAAAgBSgAAHMiJwRAICcQJSAFaiASawwFCyAEQQRqIQQgBUEEaiIFIApJDQALCwJAIAUgFkF/ak8NACAELwAAIAUvAABHDQAgBEECaiEEIAVBAmohBQsgBSAWSQR/IAVBAWogBSAELQAAIAUtAABGGwUgBQsgEmsMAgsgBRAlIQQMAgsgBRAlCyEEIAcgC2ogHgJ/IARBBGoiCiAMaiAWRyAgIBhPckUEQCAdIQUCfwJAAn8gIiAWIgRLBEAgHSgAACAWKAAAcyIEDQIgESEFIBZBBGohBAsgBCAiSQsEQANAIAUoAAAgBCgAAHMiHgRAIB4QJSAEaiAWawwECyAFQQRqIQUgBEEEaiIEICJJDQALCwJAIAQgL08NACAFLwAAIAQvAABHDQAgBUECaiEFIARBAmohBAsgBCAYSQR/IARBAWogBCAFLQAAIAQtAABGGwUgBAsgFmsMAQsgBBAlCyAKaiEKCyAKIAhKIgQLGyEeIAogCCAEGyEIDAELIARBBGoiBCAIIAQgCEoiBBshCCAKIB4gBBshHgsgDUF/aiENAkACQCA0RSAAIAdB//8DcUEBdGpBgIAIai8BACIEQQFHcg0AICVFBEBBASElICRFDQFBAiElIBIgGCAOEDNBBGohHAsgJUECRyAHQX9qIgUgFUlyDQBBAiElIBAgBRAyRQ0AIA4gEyALIAUgEEkiFhsgBWoiCigAAEcNACAKQQRqIA8gGCAWGyIHIA4QM0EEaiEEIBMgACgCkIAQIiBqIRYCQCAFIBBJBEAgByAEIApqRgRAIB0gGCAEIA4QPRAzIARqIQQLIAogFiAOEDEhBwwBCyAKIAogHSAOEDEiB2sgHUcgICAQT3INACAPIBZBACAHayAOED0QMSAHaiEHCyAFIAUgB2siCiAVIAogFUsbIgprIARqIhYgHEkgBCAcS3JFBEAgBCAFIBxraiIEIBAgECAEEDIbIQcMAgsgECAKEDJFBEAgECEHDAILAkAgCCAWIBwgFiAcSRsiBE8EQCAeIQUgCCEEDAELIAwgCiALaiIFa0H//wNKDQQLIAogACAKQf//A3FBAXRqQYCACGovAQAiCEkEQCAFIR4gBCEIDAQLIAogCGshByAFIR4gBCEIDAELIAcgBGshBwsgDUUNASAHIBVPDQALCwJAIA1FIB8gFWtB/v8DS3INACAfIBQgI2ooAgAiCiAVaiAUKAKAgBAgFCgChIAQIh1rIhFrIg9rQf//A0sNAANAIA1FDQEgDiAKIB1qIgQoAABGBEAgBEEEaiEEAn8CQAJ/IBIgGCAMIBEgCmtqIgUgBSAYSxsiEEF9aiIWIBJNDQAaIAQoAAAgEigAAHMiBQ0BIARBBGohBCAhCyIFIBZJBEADQCAEKAAAIAUoAABzIgcEQCAHECUgBWogEmsMBAsgBEEEaiEEIAVBBGoiBSAWSQ0ACwsCQCAFIBBBf2pPDQAgBC8AACAFLwAARw0AIARBAmohBCAFQQJqIQULIAUgEEkEfyAFQQFqIAUgBC0AACAFLQAARhsFIAULIBJrDAELIAUQJQtBBGoiBCAIIAQgCEoiBBshCCALIA9qIB4gBBshHgsgDUF/aiENIAogFCAKQf//A3FBAXRqQYCACGovAQAiBGshCiAfIA8gBGsiD2tBgIAESQ0ACwsgCEEDSgRAICghHyAJIQ4gDCEdIB4iCSEWIAghEgJ/An8CQAJAAkADQCAJIR4CQCAMIAgiDWoiKCAyTQRAIAAoApCAECIEIChBfmoiESAAKAKEgBAiIWsiIEGBgHxqIARBgIAEaiAgSxshIyAAKAKMgBAhFCAAKAKIgBAhJiAAKAKcgBAhJyARKAAAIRMgACgClIAQIgQgIEkEQANAIAAgBEH//wNxQQF0akGAgAhqIAQgACAEICFqEDpBAnRqIgUoAgBrIghB//8DIAhB//8DSRs7AQAgBSAENgIAIARBAWoiBCAgSQ0ACwsgESAMayEqIAAgIDYClIAQIBFBCGohMCARQQRqIRUgDCARayEkAkAgACAREDpBAnQiLGooAgAiByAjSQRAIC4hECANIQgMAQsgE0H//wNxIBNBEHZGIBNB/wFxIBNBGHZGcSE1IBQgJmohMSAUICFqIhxBBGohJUEAIS1BACAqayE2IAxBf2ohNyANIQggLiEQQQAhCQNAAkACQAJ/AkACQCAUIAdNBEAgCCA3ai8AACAHICFqIgsgNmogCGpBf2ovAABHDQUgEyALKAAARw0FAkAgKkUEQEEAIQoMAQsgJCAcIAtrIgQgJCAEShsiD0EfdSAPcSEFQQAhBANAIAQiCiAPTARAIAUhCgwCCyARIApBf2oiBGotAAAgBCALai0AAEYNAAsLIAtBBGohBCAiIBVNBH8gFQUgBCgAACAVKAAAcyIFDQIgBEEEaiEEIDALIgUgIkkEQANAIAQoAAAgBSgAAHMiDwRAIA8QJSAFaiAVayEEDAcLIARBBGohBCAFQQRqIgUgIkkNAAsLAkAgBSAvTw0AIAQvAAAgBS8AAEcNACAEQQJqIQQgBUECaiEFCyAFIBhJBH8gBUEBaiAFIAQtAAAgBS0AAEYbBSAFCyAVayEEDAQLIBMgByAmaiIKKAAARw0EIApBBGohBCAAKAKQgBAhOAJ/IBUgGCARIBQgB2tqIisgKyAYSxsiC0F9aiIPIBVNDQAaIAQoAAAgFSgAAHMiBQ0CIARBBGohBCAwCyIFIA9JBEADQCAEKAAAIAUoAABzIjkEQCA5ECUgBWogFWsMBQsgBEEEaiEEIAVBBGoiBSAPSQ0ACwsCQCAFIAtBf2pPDQAgBC8AACAFLwAARw0AIARBAmohBCAFQQJqIQULIAUgC0kEfyAFQQFqIAUgBC0AACAFLQAARhsFIAULIBVrDAILIAUQJSEEDAILIAUQJQshBCARIARBBGoiD2ogC0cgKyAYT3JFBEAgHCEFAn8CQAJ/ICIgCyIESwRAIBwoAAAgCygAAHMiBA0CICUhBSALQQRqIQQLIAQgIkkLBEADQCAFKAAAIAQoAABzIisEQCArECUgBGogC2sMBAsgBUEEaiEFIARBBGoiBCAiSQ0ACwsCQCAEIC9PDQAgBS8AACAELwAARw0AIAVBAmohBSAEQQJqIQQLIAQgGEkEfyAEQQFqIAQgBS0AACAELQAARhsFIAQLIAtrDAELIAQQJQsgD2ohDwsCQCAqRQRAQQAhBQwBCyAkICYgOGogCmsiBCAkIARKGyIrQR91ICtxIQtBACEEA0AgBCIFICtMBEAgCyEFDAILIBEgBUF/aiIEai0AACAEIApqLQAARg0ACwsgDyAFayIEIAhMDQEgBSARaiEZIAcgIWogBWohGyAEIQgMAQsgBCAKa0EEaiIEIAhMDQAgCiARaiEZIAogC2ohGyAEIQgLIBBBf2ohEAJAAkAgNEUgACAHQf//A3FBAXRqQYCACGovAQAiBEEBR3INACAtRQRAQQEhLSA1RQ0BQQIhLSAVIBggExAzQQRqIQkLIC1BAkcgB0F/aiIFICNJcg0AQQIhLSAUIAUQMkUNACATICYgISAFIBRJIgobIAVqIgsoAABHDQAgC0EEaiAxIBggChsiByATEDNBBGohBCAmIAAoApCAECIPaiEKAkAgBSAUSQRAIAcgBCALakYEQCAcIBggBCATED0QMyAEaiEECyALIAogExAxIQcMAQsgCyALIBwgExAxIgdrIBxHIA8gFE9yDQAgMSAKQQAgB2sgExA9EDEgB2ohBwsgBSAFIAdrIgsgIyALICNLGyIKayAEaiILIAlJIAQgCUtyRQRAIAQgBSAJa2oiBCAUIBQgBBAyGyEHDAILIAogFCAUIAoQMiIEGyEHICogBEVyDQECQCAIIAsgCSALIAlJGyIETwRAIBkhBSAbIQsgCCEEDAELIBEiBSAKICFqIgtrQf//A0oNBAsgCiAAIApB//8DcUEBdGpBgIAIai8BACIISQRAIAUhGSALIRsgBCEIDAQLIAogCGshByAFIRkgCyEbIAQhCAwBCyAHIARrIQcLIBBFDQEgByAjTw0ACwsCQCAgICNrQf7/A0sEQCAbIQkMAQsgEEUEQCAbIQkMAQsgICAnICxqKAIAIg8gI2ogJygCgIAQICcoAoSAECIHayIlayILa0H//wNLBEAgGyEJDAELIBshCQNAIBBFDQECQCATIAcgD2oiCigAAEcNACAKQQRqIQQCfwJAAn8gFSAYIBEgJSAPa2oiBSAFIBhLGyIbQX1qIhwgFU0NABogBCgAACAVKAAAcyIFDQEgBEEEaiEEIDALIgUgHEkEQANAIAQoAAAgBSgAAHMiFARAIBQQJSAFaiAVawwECyAEQQRqIQQgBUEEaiIFIBxJDQALCwJAIAUgG0F/ak8NACAELwAAIAUvAABHDQAgBEECaiEEIAVBAmohBQsgBSAbSQR/IAVBAWogBSAELQAAIAUtAABGGwUgBQsgFWsMAQsgBRAlC0EEaiEUAkAgKkUEQEEAIQUMAQsgJCAHICcoAoyAEGogCmsiBCAkIARKGyIcQR91IBxxIRtBACEEA0AgBCIFIBxMBEAgGyEFDAILIBEgBUF/aiIEai0AACAEIApqLQAARg0ACwsgFCAFayIEIAhMDQAgBSARaiEZIAsgIWogBWohCSAEIQgLIBBBf2ohECAPICcgD0H//wNxQQF0akGAgAhqLwEAIgRrIQ8gICALIARrIgtrQYCABEkNAAsLIAggDUcNASAJIRsLIAwgH2shBCAGBEAgDiAEQf8BbmogBGpBCWogKUsNBQsgDkEBaiEFAkAgBEEPTwRAIA5B8AE6AAAgBEFxaiIHQf8BTwRAIAVB/wEgBEHyfWoiCEH/AW4iBUEBahAoGiAFQYF+bCAIaiEHIAUgDmpBAmohBQsgBSAHOgAAIAVBAWohBQwBCyAOIARBBHQ6AAALIAUgHyAEIAVqIgkQOyAJIAwgHmtB//8DcRAvIA1BfGohCCAJQQJqIQkgBgRAIAkgCEH/AW5qQQZqIClLDQULIA4tAAAhDCAIQQ9PBEAgDiAMQQ9qOgAAIA1BbWoiB0H+A08EQCAJQf8BIA1B73tqIghB/gNuIglBAXQiDEECahAoGiAJQYJ8bCAIaiEHIAUgBCAMampBBGohCQsgB0H/AU8EQCAJQf8BOgAAIAdBgX5qIQcgCUEBaiEJCyAJIAc6AAAgCUEBaiEJDAQLIA4gCCAMajoAAAwDCyAdIAwgHSAMSSAZIAwgEmpJcSIEGyERIAkhGyAZIgwgEWtBA0gNACASIA0gBBshFSAWIB4gBBshHiAfIRYDQCARIBVqIh9BA2ohNSARIBVBEiAVQRJIGyIwaiExAkACQANAAn8CQCAMIBFrIgRBEUoNACARIAxrIAQgCGpBfGogMCAxIAggDGpBfGpLG2oiBEEBSA0AIAggBGshEiAEIAxqIRkgBCAJagwBCyAMIRkgCCESIAkLIRsCQCASIBlqIiggMk0EQCAAKAKQgBAiBCAoQX1qIg0gACgChIAQIiFrIiBBgYB8aiAEQYCABGogIEsbISMgACgCjIAQIRQgACgCiIAQISYgACgCnIAQIScgDSgAACETIAAoApSAECIEICBJBEADQCAAIARB//8DcUEBdGpBgIAIaiAEIAAgBCAhahA6QQJ0aiIFKAIAayIIQf//AyAIQf//A0kbOwEAIAUgBDYCACAEQQFqIgQgIEkNAAsLIA0gGWshKiAAICA2ApSAECANQQhqIS0gDUEEaiEdIBkgDWshJAJAIAAgDRA6QQJ0IjZqKAIAIgcgI0kEQCAuIRAgEiEIDAELIBNB//8DcSATQRB2RiATQf8BcSATQRh2RnEhNyAUICZqISsgFCAhaiIcQQRqISVBACEMQQAgKmshOCAZQX9qITkgEiEIIC4hEEEAIQkDQAJAAkACfwJAAkAgFCAHTQRAIAggOWovAAAgByAhaiILIDhqIAhqQX9qLwAARw0FIBMgCygAAEcNBQJAICpFBEBBACEKDAELICQgHCALayIEICQgBEobIg9BH3UgD3EhBUEAIQQDQCAEIgogD0wEQCAFIQoMAgsgDSAKQX9qIgRqLQAAIAQgC2otAABGDQALCyALQQRqIQQgIiAdTQR/IB0FIAQoAAAgHSgAAHMiBQ0CIARBBGohBCAtCyIFICJJBEADQCAEKAAAIAUoAABzIg8EQCAPECUgBWogHWshBAwHCyAEQQRqIQQgBUEEaiIFICJJDQALCwJAIAUgL08NACAELwAAIAUvAABHDQAgBEECaiEEIAVBAmohBQsgBSAYSQR/IAVBAWogBSAELQAAIAUtAABGGwUgBQsgHWshBAwECyATIAcgJmoiCigAAEcNBCAKQQRqIQQgACgCkIAQITwCfyAdIBggDSAUIAdraiIsICwgGEsbIgtBfWoiDyAdTQ0AGiAEKAAAIB0oAABzIgUNAiAEQQRqIQQgLQsiBSAPSQRAA0AgBCgAACAFKAAAcyI9BEAgPRAlIAVqIB1rDAULIARBBGohBCAFQQRqIgUgD0kNAAsLAkAgBSALQX9qTw0AIAQvAAAgBS8AAEcNACAEQQJqIQQgBUECaiEFCyAFIAtJBH8gBUEBaiAFIAQtAAAgBS0AAEYbBSAFCyAdawwCCyAFECUhBAwCCyAFECULIQQgDSAEQQRqIg9qIAtHICwgGE9yRQRAIBwhBQJ/AkACfyAiIAsiBEsEQCAcKAAAIAsoAABzIgQNAiAlIQUgC0EEaiEECyAEICJJCwRAA0AgBSgAACAEKAAAcyIsBEAgLBAlIARqIAtrDAQLIAVBBGohBSAEQQRqIgQgIkkNAAsLAkAgBCAvTw0AIAUvAAAgBC8AAEcNACAFQQJqIQUgBEECaiEECyAEIBhJBH8gBEEBaiAEIAUtAAAgBC0AAEYbBSAECyALawwBCyAEECULIA9qIQ8LAkAgKkUEQEEAIQUMAQsgJCAmIDxqIAprIgQgJCAEShsiLEEfdSAscSELQQAhBANAIAQiBSAsTARAIAshBQwCCyANIAVBf2oiBGotAAAgBCAKai0AAEYNAAsLIA8gBWsiBCAITA0BIAUgDWohFyAHICFqIAVqIRogBCEIDAELIAQgCmtBBGoiBCAITA0AIAogDWohFyAKIAtqIRogBCEICyAQQX9qIRACQAJAIDRFIAAgB0H//wNxQQF0akGAgAhqLwEAIgRBAUdyDQAgDEUEQEEBIQwgN0UNAUECIQwgHSAYIBMQM0EEaiEJCyAMQQJHIAdBf2oiBSAjSXINAEECIQwgFCAFEDJFDQAgEyAmICEgBSAUSSIKGyAFaiILKAAARw0AIAtBBGogKyAYIAobIgogExAzQQRqIQQgJiAAKAKQgBAiD2ohDAJAIAUgFEkEQCAKIAQgC2pGBEAgHCAYIAQgExA9EDMgBGohBAsgCyAMIBMQMSEHDAELIAsgCyAcIBMQMSIHayAcRyAPIBRPcg0AICsgDEEAIAdrIBMQPRAxIAdqIQcLIAUgBSAHayIMICMgDCAjSxsiCmsgBGoiCyAJSSAEIAlLckUEQCAEIAUgCWtqIgQgFCAUIAQQMhshB0ECIQwMAgsgCiAUIBQgChAyIgQbIQdBAiEMICogBEVyDQECQCAIIAsgCSALIAlJGyIETwRAIBchBSAaIQsgCCEEDAELIA0iBSAKICFqIgtrQf//A0oNBAsgCiAAIApB//8DcUEBdGpBgIAIai8BACIISQRAIAUhFyALIRogBCEIDAQLIAogCGshByAFIRcgCyEaIAQhCAwBCyAHIARrIQcLIBBFDQEgByAjTw0ACwsCQAJAIBBFICAgI2tB/v8DS3INACAgICcgNmooAgAiDyAjaiAnKAKAgBAgJygChIAQIgprIhxrIgtrQf//A0sNACAXIQwgGiEJA0AgEEUNAgJAIBMgCiAPaiIaKAAARw0AIBpBBGohBAJ/AkACfyAdIBggDSAcIA9raiIFIAUgGEsbIhdBfWoiByAdTQ0AGiAEKAAAIB0oAABzIgUNASAEQQRqIQQgLQsiBSAHSQRAA0AgBCgAACAFKAAAcyIlBEAgJRAlIAVqIB1rDAQLIARBBGohBCAFQQRqIgUgB0kNAAsLAkAgBSAXQX9qTw0AIAQvAAAgBS8AAEcNACAEQQJqIQQgBUECaiEFCyAFIBdJBH8gBUEBaiAFIAQtAAAgBS0AAEYbBSAFCyAdawwBCyAFECULQQRqISUCQCAqRQRAQQAhBQwBCyAkIAogJygCjIAQaiAaayIEICQgBEobIgdBH3UgB3EhF0EAIQQDQCAEIgUgB0wEQCAXIQUMAgsgDSAFQX9qIgRqLQAAIAQgGmotAABGDQALCyAlIAVrIgQgCEwNACAFIA1qIQwgCyAhaiAFaiEJIAQhCAsgEEF/aiEQIA8gJyAPQf//A3FBAXRqQYCACGovAQAiBGshDyAgIAsgBGsiC2tBgIAESQ0ACwwBCyAXIQwgGiEJCyAIIBJHDQEgCSEaIAwhFwsgESAWayEFIAYEQCAOIAVB/wFuaiAFakEJaiApSw0ECyAZIBFrIBUgGSAfSRshCSAOQQFqIQcCQCAFQQ9PBEAgDkHwAToAACAFQXFqIgRB/wFPBEAgB0H/ASAFQfJ9aiIIQf8BbiIEQQFqECgaIAQgDmpBAmohByAEQYF+bCAIaiEECyAHIAQ6AAAgB0EBaiEHDAELIA4gBUEEdDoAAAsgByAWIAUgB2oiBBA7IAQgESAea0H//wNxEC8gCUF8aiEIIARBAmohBCAGBEAgBCAIQf8BbmpBBmogKUsNBAsgDi0AACEMAkAgCEEPTwRAIA4gDEEPajoAACAJQW1qIghB/gNPBEAgBEH/ASAJQe97aiIEQf4DbiIIQQF0IgxBAmoQKBogCEGCfGwgBGohCCAHIAUgDGpqQQRqIQQLIAhB/wFPBEAgBEH/AToAACAIQYF+aiEIIARBAWohBAsgBCAIOgAAIARBAWohBAwBCyAOIAggDGo6AAALIBkgCSARaiIFayEIIAYEQCAEIAhB/wFuaiAIakEJaiApSw0HCyAEQQFqIQcCQCAIQQ9PBEAgBEHwAToAACAIQXFqIg1B/wFPBEAgB0H/ASAIQfJ9aiIMQf8BbiIJQQFqECgaIAQgCWpBAmohByAJQYF+bCAMaiENCyAHIA06AAAgB0EBaiEHDAELIAQgCEEEdDoAAAsgByAFIAcgCGoiCRA7IAkgGSAba0H//wNxEC8gEkF8aiEIIAlBAmohCSAGBEAgCSAIQf8BbmpBBmogKUsNBwsgBC0AACEMIAhBD08EQCAEIAxBD2o6AAACfyASQW1qIgRB/gNPBEAgCUH/ASASQe97aiIEQf4DbiIIQQF0IglBAmoQKBogByAJIBlqIAVrakEEaiEJIAhBgnxsIARqIQQLIARB/wFPCwRAIAlB/wE6AAAgCUEBaiEJIARBgX5qIQQLIAkgBDoAACAJQQFqIQkMCAsgBCAIIAxqOgAADAcLIAwgNU8NASAMIRcgCSEaIAwgH0kNAAsCQCAZIB9PDQAgEiAfIBlrIgRrIhJBA0oEQCAEIBtqIRsgHyEZDAELIAwhGSAJIRsgCCESCyARIBZrIQQgBgRAIA4gBEH/AW5qIARqQQlqIClLDQILIA5BAWohBQJAIARBD08EQCAOQfABOgAAIARBcWoiB0H/AU8EQCAFQf8BIARB8n1qIhdB/wFuIgVBAWoQKBogBUGBfmwgF2ohByAFIA5qQQJqIQULIAUgBzoAACAFQQFqIQUMAQsgDiAEQQR0OgAACyAFIBYgBCAFaiIaEDsgGiARIB5rQf//A3EQLyAVQXxqIRcgGkECaiEHIAYEQCAHIBdB/wFuakEGaiApSw0CCyAOLQAAIRoCfyAXQQ9PBEAgDiAaQQ9qOgAAAn8gFUFtaiINQf4DTwRAIAdB/wEgFUHve2oiF0H+A24iGkEBdCIeQQJqECgaIAUgBCAeampBBGohByAaQYJ8bCAXaiENCyANQf8BTwsEQCAHQf8BOgAAIAdBAWohByANQYF+aiENCyAHIA06AAAgB0EBagwBCyAOIBcgGmo6AAAgBwshDiAMIRcgCSEaIBkhHSAbIRYMAwsCfyAZIB9PBEAgFSENIBIMAQsgEiAZIBFrIg1BEUoNABogEiANIBJqQXxqIDAgMSASIBlqQXxqSxsiDSARIBlraiIEQQFIDQAaIAQgG2ohGyAEIBlqIRkgEiAEawshFSARIBZrIQQgBgRAIA4gBEH/AW5qIARqQQlqIClLDQELIA5BAWohBQJAIARBD08EQCAOQfABOgAAIARBcWoiB0H/AU8EQCAFQf8BIARB8n1qIhdB/wFuIgVBAWoQKBogBUGBfmwgF2ohByAFIA5qQQJqIQULIAUgBzoAACAFQQFqIQUMAQsgDiAEQQR0OgAACyAFIBYgBCAFaiIaEDsgGiARIB5rQf//A3EQLyANQXxqIRcgGkECaiEHIAYEQCAHIBdB/wFuakEGaiApSw0BCyAOLQAAIRoCfyAXQQ9PBEAgDiAaQQ9qOgAAAn8gDUFtaiIQQf4DTwRAIAdB/wEgDUHve2oiF0H+A24iGkEBdCIeQQJqECgaIAUgBCAeampBBGohByAaQYJ8bCAXaiEQCyAQQf8BTwsEQCAHQf8BOgAAIAdBAWohByAQQYF+aiEQCyAHIBA6AAAgDSARaiEWIBkhESAHQQFqDAELIA4gFyAaajoAACANIBFqIRYgGSERIAcLIQ4gGyEeIAwhFyAJIRoMAQsLCyAWDAMLIAUhKCAEDAMLICggMksNBiAAKAKEgBAhCwwFCyAfCyEoIA4LIQlBACEHIAZBAkYNAwwGCyAfIQQgDEEBaiIMIDJNDQALCwsgMyAoayIEQfABakH/AW4hBQJAIAZFDQAgBCAFaiAJakEBaiApQQVqIDogOxsiBU0NAEEAIQcgBkEBRg0DIAlBf3MgBWoiBCAEQfABakH/AW5rIQQLIAQgKGohBgJAIARBD08EQCAJQfABOgAAIAlBAWohBSAEQXFqIghB/wFJBEAgBSIJIAg6AAAMAgsgBUH/ASAEQfJ9aiIIQf8BbiIFQQFqECgaIAUgCWpBAmoiCSAFQYF+bCAIajoAAAwBCyAJIARBBHQ6AAALIAlBAWogKCAEECohBSADIAYgAWs2AgAgBCAFaiACawwBCyAAIAEgAiADIAQgLiAJQZgWaigCACAGIAVBC0pBASAALQCagBBBAEcQkAILIgdBAEoNAQsgAEEBOgCbgBALIAcPCyAAIAEgAiADIAQgBSAGEJECCzAAIAAoApyAEEUEQCAAIAEgAiADIAQgBSAGEJECDwsgACABIAIgAyAEIAUgBhCuBAt+AQF/IAAoAoCAECAAKAKEgBBrIgJBgYCAgARPBEAgAEEAQYCACBAoQYCACGpB/wFBgIAIECgaQQAhAgsgACABNgKAgBAgACACQYCABGoiAjYClIAQIAAgAjYCkIAQIAAgAjYCjIAQIAAgASACayIBNgKEgBAgACABNgKIgBALTwEBfyAALQCbgBAEQCAAEJICGiAAIAEQsAEPCyAAQQA2ApyAECAAKAKEgBAhAiAAQQA2AoSAECAAIAAoAoCAECACazYCgIAQIAAgARCwAQtQAQJ/IwBBEGsiBiQAIAYgAzYCDCAAQQNxRQRAIAAgBRCxBCAAIAEQsAQgACABIAIgBkEMaiAEIAUgAxCTAiAEShCvBCEHCyAGQRBqJAAgBwvyKAETfyAFQQEgBUEBShshBiAAIgVFIABBB3FyBH9BAAUgBUEAQaCAARAoCyEIAkACQAJAAkAgAxCTAiAETARAIANBioAESg0BIANBgICA8AdLDQIgASADaiEMIAgoAoCAASEAIAhBAzsBhoABIAggACADajYCgIABIAggCCgCkIABIANqNgKQgAECQCADQQ1IBEAgAiEDIAEhAAwBCyAMQXVqIRAgDEF0aiEUIAEgASgAAEEDEDAgCEEDIAEgAGsiCxBJIAxBe2oiEUF/aiETIBFBfWohDyAGQQZ0IgVBAXIhEiABQQFqIgQoAABBAxAwIQogASEJIAIhBgNAIARBAWohDSAKIAhBAxBIIQcgBSEOIBIhAwJAA0AgDSgAAEEDEDAhACAEIAtrIAogCEEDEFwgByALaiIKKAAAIAQoAABGDQEgDkEGdSEVIAAgCEEDEEghByADIQ4gA0EBaiEDIAAhCiAVIA0iBGoiDSAQTQ0ACyAGIQMgCSEADAILA0AgCiINIAFNIAQiACAJTXJFBEAgAEF/aiIELQAAIA1Bf2oiCi0AAEYNAQsLIAZBAWohAwJAIAAgCWsiBEEPTwRAIAZB8AE6AAAgBEFxaiIKQf8BTgRAIANB/wEgAEHvAWoiAyAKQf0DIApB/QNIGyIHIAlqa0H/AW5BAWoQKBogBiADIAlrIAdrQf8BbiIHakECaiEDIAQgB0GBfmxqQfJ9aiEKCyADIAo6AAAgA0EBaiEDDAELIAYgBEEEdDoAAAsgAyAJIAMgBGoiChA7A0AgCiAAIA1rQf//A3EQLyANQQRqIQMCfwJAAn8gDyAAQQRqIglNBEAgCQwBCyADKAAAIAkoAABzIgMNASANQQhqIQMgAEEIagsiBCAPSQRAA0AgAygAACAEKAAAcyIHBEAgBxAlIARqIAlrDAQLIANBBGohAyAEQQRqIgQgD0kNAAsLAkAgBCATTw0AIAMvAAAgBC8AAEcNACADQQJqIQMgBEECaiEECyAEIBFJBH8gBEEBaiAEIAMtAAAgBC0AAEYbBSAECyAJawwBCyADECULIQQgCkECaiEDIAAgBGpBBGohACAGLQAAIQkCQCAEQQ9PBEAgBiAJQQ9qOgAAIANBfxA0IARBcWoiBEH8B08EQANAIANBBGoiA0F/EDQgBEGEeGoiBEH7B0sNAAsLIAMgBEH//wNxQf8BbiIGaiIDIAZBgX5sIARqOgAAIANBAWohAwwBCyAGIAQgCWo6AAALIAAgEE8NAiAAQX5qIgQgBCgAAEEDEDAgCEEDIAsQSSAAKAAAQQMQMCIEIAhBAxBIIQYgACALayAEIAhBAxBcIAYgC2oiDSgAACAAKAAARgRAIANBADoAACADQQFqIQogAyEGDAELCyAAQQFqIgQoAABBAxAwIQogACEJIAMhBiAEIBRNDQALCwJAIAwgAGsiBEEPTwRAIANB8AE6AAAgA0EBaiEBIARBcWoiBUH/AUkEQCABIgMgBToAAAwCCyABQf8BIARB8n1qIgFB/wFuQQFqECgaIAFB/wFuIgUgA2pBAmoiAyAFQYF+bCABajoAAAwBCyADIARBBHQ6AAALDAQLIANBioAETARAIANBgICA8AdLDQIgAiAEaiEPIAEgA2ohDCAIKAKAgAEhACAIQQM7AYaAASAIIAAgA2o2AoCAASAIIAgoApCAASADajYCkIABAkAgA0ENSARAIAIhAyABIQAMAQsgDEF1aiERIAxBdGohFSABIAEoAABBAxAwIAhBAyABIABrIgsQSSAMQXtqIhRBf2ohFyAUQX1qIRAgBkEGdCIJQQFyIRIgAUEBaiIEKAAAQQMQMCEKIAEhBSACIQYDQCAEQQFqIQ0gCiAIQQMQSCEHIAkhDiASIQMCQANAIA0oAABBAxAwIQAgBCALayAKIAhBAxBcIAcgC2oiCigAACAEKAAARg0BIA5BBnUhFiAAIAhBAxBIIQcgAyEOIANBAWohAyAAIQogFiANIgRqIg0gEU0NAAsgBiEDIAUhAAwCCwNAIAoiDSABTSAEIgAgBU1yRQRAIABBf2oiBC0AACANQX9qIgotAABGDQELCyAGIAAgBWsiA2ogA0H/AW5qQQlqIA9LBEBBAA8LIAZBAWohBAJAIANBD08EQCAGQfABOgAAIANBcWoiCkH/AU4EQCAEQf8BIABB7wFqIgQgCkH9AyAKQf0DSBsiByAFamtB/wFuQQFqECgaIAYgBCAFayAHa0H/AW4iB2pBAmohBCADIAdBgX5sakHyfWohCgsgBCAKOgAAIARBAWohBAwBCyAGIANBBHQ6AAALIAQgBSADIARqIgoQOwNAIAogACANa0H//wNxEC8gDUEEaiEDIAoCfwJAAn8gECAAQQRqIgVNBEAgBQwBCyADKAAAIAUoAABzIgMNASANQQhqIQMgAEEIagsiBCAQSQRAA0AgAygAACAEKAAAcyIHBEAgBxAlIARqIAVrDAQLIANBBGohAyAEQQRqIgQgEEkNAAsLAkAgBCAXTw0AIAMvAAAgBC8AAEcNACADQQJqIQMgBEECaiEECyAEIBRJBH8gBEEBaiAEIAMtAAAgBC0AAEYbBSAECyAFawwBCyADECULIgRB8AFqQf8BbmpBCGogD0sEQEEADwsgCkECaiEDIAAgBGpBBGohACAGLQAAIQUCQCAEQQ9PBEAgBiAFQQ9qOgAAIANBfxA0IARBcWoiBEH8B08EQANAIANBBGoiA0F/EDQgBEGEeGoiBEH7B0sNAAsLIAMgBEH//wNxQf8BbiIFaiIDIAVBgX5sIARqOgAAIANBAWohAwwBCyAGIAQgBWo6AAALIAAgEU8NAiAAQX5qIgQgBCgAAEEDEDAgCEEDIAsQSSAAKAAAQQMQMCIEIAhBAxBIIQUgACALayAEIAhBAxBcIAUgC2oiDSgAACAAKAAARgRAIANBADoAACADQQFqIQogAyEGDAELCyAAQQFqIgQoAABBAxAwIQogACEFIAMhBiAEIBVNDQALCyADIAwgAGsiBGogBEHwAWpB/wFuakEBaiAPSw0CAkAgBEEPTwRAIANB8AE6AAAgA0EBaiEBIARBcWoiBUH/AUkEQCABIgMgBToAAAwCCyABQf8BIARB8n1qIgFB/wFuQQFqECgaIAFB/wFuIgUgA2pBAmoiAyAFQYF+bCABajoAAAwBCyADIARBBHQ6AAALDAQLIANBgICA8AdLDQEgAiAEaiEPIAEgA2oiEEF1aiERIBBBdGohFSAIKAKAgAEhACAIQQFBAiABQf//A0sbIgs7AYaAASAIIAAgA2o2AoCAASAIIAgoApCAASADajYCkIABIAEgASgAACALEDAgCCALIAEgAGsiDBBJIBBBe2oiF0F/aiEYIBdBfWohFCAGQQZ0IgpBAXIhDSABQQFqIgMoAAAgCxAwIQQgAUGAgARJIRYgAiEFIAEhBgNAAkACQCAWRQRAIAMgFUsNAiADQQFqIQ4gCiEJIA0hBwNAIAQgCBCFASEAIA4oAABBARAwIRIgAyAEIAhBASAMEEkgAEH//wNqIANPBEAgACgAACADKAAARg0DCyAJQQZ1IQAgByEJIAdBAWohByASIQQgACAOIgNqIg4gEU0NAAsMAgsgAyAVSw0BIANBAWohDiAEIAggCxBIIQAgCiEJIA0hBwNAIA4oAAAgCxAwIRIgAyAMayITIAQgCCALEFwgAEH//wNqIBNPBEAgACAMaiIAKAAAIAMoAABGDQILIAlBBnUhEyASIAggCxBIIQAgByEJIAdBAWohByASIQQgEyAOIgNqIg4gEU0NAAsMAQsDQCAAIgQgAU0gAyIJIAZNckUEQCAJQX9qIgMtAAAgBEF/aiIALQAARg0BCwtBACETIAUgCSAGayIDaiADQf8BbmpBCWogD0sNAyAFQQFqIQACQCADQQ9PBEAgBUHwAToAACADQXFqIgdB/wFOBEAgAEH/ASAJQe8BaiIAIAdB/QMgB0H9A0gbIgcgBmprQf8BbkEBahAoGiAFIAAgBmsgB2tB/wFuIgdqQQJqIQAgAyAHQYF+bGpB8n1qIQcLIAAgBzoAACAAQQFqIQAMAQsgBSADQQR0OgAACyAAIAYgACADaiIHEDsgCSEGA0AgByAGIARrQf//A3EQLyAEQQRqIQMgBwJ/AkACfyAUIAZBBGoiAE0EQCAADAELIAMoAAAgACgAAHMiAw0BIARBCGohAyAGQQhqCyIEIBRJBEADQCADKAAAIAQoAABzIgkEQCAJECUgBGogAGsMBAsgA0EEaiEDIARBBGoiBCAUSQ0ACwsCQCAEIBhPDQAgAy8AACAELwAARw0AIANBAmohAyAEQQJqIQQLIAQgF0kEfyAEQQFqIAQgAy0AACAELQAARhsFIAQLIABrDAELIAMQJQsiAEHwAWpB/wFuakEIaiAPSw0EIAdBAmohAyAAIAZqQQRqIQYgBS0AACEEAn8gAEEPTwRAIAUgBEEPajoAACADQX8QNCAAQXFqIgRB/AdPBEADQCADQQRqIgNBfxA0IARBhHhqIgRB+wdLDQALCyADIARB//8DcUH/AW4iAGoiAyAAQYF+bCAEajoAACADQQFqDAELIAUgACAEajoAACADCyEFIAYgEU8NASAGQX5qIgAgACgAACALEDAgCCALIAwQSSAGKAAAIQACQAJAIBZFBEAgAEEBEDAiACAIEIUBIQQgBiAAIAhBASAMEEkgBEH//wNqIAZJDQEgBCgAACAGKAAARw0BDAILIAAgCxAwIgMgCCALEEghACAGIAxrIgQgAyAIIAsQXCAAQf//A2ogBEkNACAAIAxqIgQoAAAgBigAAEYNAQsgBkEBaiIDKAAAIAsQMCEEDAMLIAVBADoAACAFQQFqIQcMAAsACwtBACETIAUgECAGayIBaiABQfABakH/AW5qQQFqIA9LDQECQCABQQ9PBEAgBUHwAToAACAFQQFqIQAgAUFxaiIDQf8BSQRAIAAiBSADOgAADAILIABB/wEgAUHyfWoiAEH/AW5BAWoQKBogAEH/AW4iAyAFakECaiIFIANBgX5sIABqOgAADAELIAUgAUEEdDoAAAsgBUEBaiAGIAEQKiABaiACayETDAELIANBgICA8AdLDQAgASADaiIPQXVqIRAgD0F0aiEUIAgoAoCAASEAIAhBAUECIAFB//8DSxsiCzsBhoABIAggACADajYCgIABIAggCCgCkIABIANqNgKQgAEgASABKAAAIAsQMCAIIAsgASAAayIMEEkgD0F7aiITQX9qIRcgE0F9aiERIAZBBnQiCkEBciENIAFBAWoiAygAACALEDAhBCABQYCABEkhFSACIQUgASEGA0ACQCAVRQRAIAMgFEsNBCADQQFqIQ4gCiEJIA0hBwNAIAQgCBCFASEAIA4oAABBARAwIRIgAyAE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IAJBCE8EQANAIAMEQCADIAVsIQcgBUEHciIIIANsIQkgBUEGciIKIANsIQsgBUEFciIMIANsIQ0gBUEEciIOIANsIQ8gBUEDciIQIANsIREgBUECciISIANsIRMgBUEBciIUIANsIRVBACEEA0AgASAFIAIgBGwiBmpqIAAgBCAHamotAAA6AAAgASAGIBRqaiAAIAQgFWpqLQAAOgAAIAEgBiASamogACAEIBNqai0AADoAACABIAYgEGpqIAAgBCARamotAAA6AAAgASAGIA5qaiAAIAQgD2pqLQAAOgAAIAEgBiAMamogACAEIA1qai0AADoAACABIAYgCmpqIAAgBCALamotAAA6AAAgASAGIAhqaiAAIAQgCWpqLQAAOgAAIARBAWoiBCADRw0ACwsgBUEPaiEEIAVBCGohBSAEIAJJDQALCyACQXhxIgUgAk8NAANAIAMEQCADIAVsIQZBACEEA0AgASACIARsIAVqaiAAIAQgBmpqLQAAOgAAIARBAWoiBCADRw0ACwsgBUEBaiIFIAJHDQALCyACIANsrQuCAQEGfyABIAEgAG4iBiAAbGshByAAIAFNBEAgBkEBIAZBAUsbIQgDQCAABEAgACAEbCEJQQAhBQNAIAMgBSAJamogAiAFIAZsIARqai0AADoAACAFQQFqIgUgAEcNAAsLIARBAWoiBCAIRw0ACwsgAyABIAdrIgBqIAAgAmogBxAqGgsNACAAIAEgAiADEL0EC4IBAQZ/IAEgASAAbiIGIABsayEHIAAEQCAGQQEgBkEBSxshCANAIAAgAU0EQCAEIAZsIQlBACEFA0AgAyAFIAlqaiACIAAgBWwgBGpqLQAAOgAAIAVBAWoiBSAIRw0ACwsgBEEBaiIEIABHDQALCyADIAEgB2siAGogACACaiAHECoaC7gBAQN/AkAgAUEBSA0AIAAsAAAiBEH/AHEhAwJAIARBf0oNACABQQJIDQEgACwAASIEQQd0QYD/AHEgA3IhAyAEQX9KDQAgAUEDSA0BIAAsAAIiBEEOdEGAgP8AcSADciEDIARBf0oNACABQQRIDQEgACwAAyIEQRV0QYCAgP8AcSADciEDIARBf0oNACABQQVIDQEgAC0ABCIAQQ9LDQEgAEEcdCADciEDCyACIAM2AgBBASEFCyAFCw0AIAAgASACIAMQvwQLlAIB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CA0tEC0gLgAJDS4QLiAvAAoNLxAvIDAACw0wEDAgMQAEDjEQMSAyAAUOMhAyIDMABg4zEDMgNAAHDjQQNCA1AAgONRA1IDYACQ42EDYgNwAKDjcQNyA4AAsOOBA4IDkABA85EDkgOgAFDzoQOiA7AAYPOxA7IDwABw88EDwgAQgIDz0QPSABEAkPPhA+IAEYCg8/ED8gASALD0AQQCAAAAAA/wAAAP//AAD///8A/////2RlY29tcHJlc3MAY29tcHJlc3MAZnJlZV9yZXN1bHQAdmkAAHhzAABpaWlpaWlpAEGQDgvUBigHAAAwBwAAMAcAAMxzAADMcwAAzHMAABh0AAC2BwAAQHQAAEgHAAAAAAAAAQAAAIgHAAAAAAAATlN0M19fMjEyYmFzaWNfc3RyaW5nSWNOU18xMWNoYXJfdHJhaXRzSWNFRU5TXzlhbGxvY2F0b3JJY0VFRUUAABh0AACQBwAATlN0M19fMjIxX19iYXNpY19zdHJpbmdfY29tbW9uSUxiMUVFRQBOMTBlbXNjcmlwdGVuM3ZhbEUAAAAAGHQAANQHAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0loRUUAaWlpAAAoBwAAMAcAABgIAAAgCAAAJAgAACoIAAAxCAAANggAAGJsb3NjbHoAbHo0AGx6NGhjAHNuYXBweQB6bGliAHpzdGQARXJyb3IuICBudGhyZWFkcyBjYW5ub3QgYmUgbGFyZ2VyIHRoYW4gQkxPU0NfTUFYX1RIUkVBRFMgKCVkKQBFcnJvci4gIG50aHJlYWRzIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyAEVSUk9SOyByZXR1cm4gY29kZSBmcm9tIHB0aHJlYWRfY3JlYXRlKCkgaXMgJWQKAAlFcnJvciBkZXRhaWw6ICVzCgBCbG9zYyBoYXMgbm90IGJlZW4gY29tcGlsZWQgd2l0aCAnJXMnIABjb21wcmVzc2lvbiBzdXBwb3J0LiAgUGxlYXNlIHVzZSBvbmUgaGF2aW5nIGl0LgBFcnJvciBhbGxvY2F0aW5nIG1lbW9yeSEARVJST1I7IHJldHVybiBjb2RlIGZyb20gcHRocmVhZF9qb2luKCkgaXMgJWQKAElucHV0IGJ1ZmZlciBzaXplIGNhbm5vdCBleGNlZWQgJWQgYnl0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AAAIAAAACQAAAAkAAAAKAAAACgAAAAsAAAALAAAADAAAAAwAAAANAAAADQBBgNsAC/8IDAAIAIwACABMAAgAzAAIACwACACsAAgAbAAIAOwACAAcAAgAnAAIAFwACADcAAgAPAAIALwACAB8AAgA/AAIAAIACACCAAgAQgAIAMIACAAiAAgAogAIAGIACADiAAgAEgAIAJIACABSAAgA0gAIADIACACyAAgAcgAIAPIACAAKAAgAigAIAEoACADKAAgAKgAIAKoACABqAAgA6gAIABoACACaAAgAWgAIANoACAA6AAgAugAIAHoACAD6AAgABgAIAIYACABGAAgAxgAIACYACACmAAgAZgAIAOYACAAWAAgAlgAIAFYACADWAAgANgAIALYACAB2AAgA9gAIAA4ACACOAAgATgAIAM4ACAAuAAgArgAIAG4ACADuAAgAHgAIAJ4ACABeAAgA3gAIAD4ACAC+AAgAfgAIAP4ACAABAAgAgQAIAEEACADBAAgAIQAIAKEACABhAAgA4QAIABEACACRAAgAUQAIANEACAAxAAgAsQAIAHEACADxAAgACQAIAIkACABJAAgAyQAIACkACACpAAgAaQAIAOkACAAZAAgAmQAIAFkACADZAAgAOQAIALkACAB5AAgA+QAIAAUACACFAAgARQAIAMUACAAlAAgApQAIAGUACADlAAgAFQAIAJUACABVAAgA1QAIADUACAC1AAgAdQAIAPUACAANAAgAjQAIAE0ACADNAAgALQAIAK0ACABtAAgA7QAIAB0ACACdAAgAXQAIAN0ACAA9AAgAvQAIAH0ACAD9AAgAEwAJABMBCQCTAAkAkwEJAFMACQBTAQkA0wAJANMBCQAzAAkAMwEJALMACQCzAQkAcwAJAHMBCQDzAAkA8wEJAAsACQALAQkAiwAJAIsBCQBLAAkASwEJAMsACQDLAQkAKwAJACsBCQCrAAkAqwEJAGsACQBrAQkA6wAJAOsBCQAbAAkAGwEJAJsACQCbAQkAWwAJAFsBCQDbAAkA2wEJADsACQA7AQkAuwAJALsBCQB7AAkAewEJAPsACQD7AQkABwAJAAcBCQCHAAkAhwEJAEcACQBHAQkAxwAJAMcBCQAnAAkAJwEJAKcACQCnAQkAZwAJAGcBCQDnAAkA5wEJABcACQAXAQkAlwAJAJcBCQBX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AAAJ/ABgBwAAAAhRAAAIEQAVCIMAEgcfAAAIcQAACDEAAAnCABAHCgAACGEAAAghAAAJogAACAEAAAiBAAAIQQAACeIAEAcGAAAIWQAACBkAAAmSABMHOwAACHkAAAg5AAAJ0gARBxEAAAhpAAAIKQAACbIAAAgJAAAIiQAACEkAAAnyABAHBAAACFUAAAgVABAIAgETBysAAAh1AAAINQAACcoAEQcNAAAIZQAACCUAAAmqAAAIBQAACIUAAAhFAAAJ6gAQBwgAAAhdAAAIHQAACZoAFAdTAAAIfQAACD0AAAnaABIHFwAACG0AAAgtAAAJugAACA0AAAiNAAAITQAACfoAEAcDAAAIUwAACBMAFQjDABMHIwAACHMAAAgzAAAJxgARBwsAAAhjAAAIIwAACaYAAAgDAAAIgwAACEMAAAnmABAHBwAACFsAAAgbAAAJlgAUB0MAAAh7AAAIOwAACdYAEgcTAAAIawAACCsAAAm2AAAICwAACIsAAAhLAAAJ9gAQBwUAAAhXAAAIFwBACAAAEwczAAAIdwAACDcAAAnOABEHDwAACGcAAAgnAAAJrgAACAcAAAiHAAAIRwAACe4AEAcJAAAIXwAACB8AAAmeABQHYwAACH8AAAg/AAAJ3gASBxsAAAhvAAAILwAACb4AAAgPAAAIjwAACE8AAAn+AGAHAAAACFAAAAgQABQIcwASBx8AAAhwAAAIMAAACcEAEAcKAAAIYAAACCAAAAmhAAAIAAAACIAAAAhAAAAJ4QAQBwYAAAhYAAAIGAAACZEAEwc7AAAIeAAACDgAAAnRABEHEQAACGgAAAgoAAAJsQAACAgAAAiIAAAISAAACfEAEAcEAAAIVAAACBQAFQjjABMHKwAACHQAAAg0AAAJyQARBw0AAAhkAAAIJAAACakAAAgEAAAIhAAACEQAAAnpABAHCAAACFwAAAgcAAAJmQAUB1MAAAh8AAAIPAAACdkAEgcXAAAIbAAACCwAAAm5AAAIDAAACIwAAAhMAAAJ+QAQBwMAAAhSAAAIEgAVCKMAEwcjAAAIcgAACDIAAAnFABEHCwAACGIAAAgiAAAJpQAACAIAAAiCAAAIQgAACeUAEAcHAAAIWgAACBoAAAmVABQHQwAACHoAAAg6AAAJ1QASBxMAAAhqAAAIKgAACbUAAAgKAAAIigAACEoAAAn1ABAHBQAACFYAAAgWAEAIAAATBzMAAAh2AAAINgAACc0AEQcPAAAIZgAACCYAAAmtAAAIBgAACIYAAAhGAAAJ7QAQBwkAAAheAAAIHgAACZ0AFAdjAAAIfgAACD4AAAndABIHGwAACG4AAAguAAAJvQAACA4AAAiOAAAITgAACf0AYAcAAAAIUQAACBEAFQiDABIHHwAACHEAAAgxAAAJwwAQBwoAAAhhAAAIIQAACaMAAAgBAAAIgQAACEEAAAnjABAHBgAACFkAAAgZAAAJkwATBzsAAAh5AAAIOQAACdMAEQcRAAAIaQAACCkAAAmzAAAICQAACIkAAAhJAAAJ8wAQBwQAAAhVAAAIFQAQCAIBEwcrAAAIdQAACDUAAAnLABEHDQAACGUAAAglAAAJqwAACAUAAAiFAAAIRQAACesAEAcIAAAIXQAACB0AAAmbABQHUwAACH0AAAg9AAAJ2wASBxcAAAhtAAAILQAACbsAAAgNAAAIjQAACE0AAAn7ABAHAwAACFMAAAgTABUIwwATByMAAAhzAAAIMwAACccAEQcLAAAIYwAACCMAAAmnAAAIAwAACIMAAAhDAAAJ5wAQBwcAAAhbAAAIGwAACZcAFAdDAAAIewAACDsAAAnXABIHEwAACGsAAAgrAAAJtwAACAsAAAiLAAAISwAACfcAEAcFAAAIVwAACBcAQAgAABMHMwAACHcAAAg3AAAJzwARBw8AAAhnAAAIJwAACa8AAAgHAAAIhwAACEcAAAnvABAHCQAACF8AAAgfAAAJnwAUB2MAAAh/AAAIPwAACd8AEgcbAAAIbwAACC8AAAm/AAAIDwAACI8AAAhPAAAJ/wAQBQEAFwUBARMFEQAbBQEQEQUFABkFAQQVBUEAHQUBQBAFAwAYBQECFAUhABwFASASBQkAGgUBCBYFgQBABQAAEAUCABcFgQETBRkAGwUBGBEFBwAZBQEGFQVhAB0FAWAQBQQAGAUBAxQFMQAcBQEwEgUNABoFAQwWBcEAQAUAADEuMi44AHN0cmVhbSBlcnJvcgBpbnN1ZmZpY2llbnQgbWVtb3J5AGJ1ZmZlciBlcnJvcgBB5IQBC6EVazgHAA2yBwCc8gcAcGQIAGCuCgCwcQsAMKoMABMAAAAMAAAADQAAAAEAAAAGAAAAAQAAAAEAAAATAAAADQAAAA4AAAABAAAABwAAAAAAAAABAAAAFAAAAA8AAAAQAAAAAQAAAAYAAAAAAAAAAQAAABUAAAAQAAAAEQAAAAEAAAAFAAAAAAAAAAIAAAAVAAAAEgAAABIAAAABAAAABQAAAAAAAAACAAAAFQAAABIAAAATAAAAAgAAAAUAAAACAAAAAwAAABUAAAATAAAAEwAAAAMAAAAFAAAABAAAAAMAAAAVAAAAEwAAABMAAAADAAAABQAAAAgAAAAEAAAAFQAAABMAAAATAAAAAwAAAAUAAAAQAAAABQAAABUAAAATAAAAFAAAAAQAAAAFAAAAEAAAAAUAAAAWAAAAFAAAABUAAAAEAAAABQAAABAAAAAFAAAAFgAAABUAAAAWAAAABAAAAAUAAAAQAAAABQAAABYAAAAVAAAAFgAAAAUAAAAFAAAAEAAAAAUAAAAWAAAAFQAAABYAAAAFAAAABQAAACAAAAAGAAAAFgAAABYAAAAXAAAABQAAAAUAAAAgAAAABgAAABYAAAAXAAAAFwAAAAYAAAAFAAAAIAAAAAYAAAAWAAAAFgAAABYAAAAFAAAABQAAADAAAAAHAAAAFwAAABcAAAAWAAAABQAAAAQAAABAAAAABwAAABcAAAAXAAAAFgAAAAYAAAADAAAAQAAAAAgAAAAXAAAAGAAAABYAAAAHAAAAAwAAAAABAAAJAAAAGQAAABkAAAAXAAAABwAAAAMAAAAAAQAACQAAABoAAAAaAAAAGAAAAAcAAAADAAAAAAIAAAkAAAAbAAAAGwAAABkAAAAJAAAAAwAAAOcDAAAJAAAAEgAAAAwAAAANAAAAAQAAAAUAAAABAAAAAQAAABIAAAANAAAADgAAAAEAAAAGAAAAAAAAAAEAAAASAAAADgAAAA4AAAABAAAABQAAAAAAAAACAAAAEgAAABAAAAAQAAAAAQAAAAQAAAAAAAAAAgAAABIAAAAQAAAAEQAAAAIAAAAFAAAAAgAAAAMAAAASAAAAEgAAABIAAAADAAAABQAAAAIAAAADAAAAEgAAABIAAAATAAAAAwAAAAUAAAAEAAAABAAAABIAAAASAAAAEwAAAAQAAAAEAAAABAAAAAQAAAASAAAAEgAAABMAAAAEAAAABAAAAAgAAAAFAAAAEgAAABIAAAATAAAABQAAAAQAAAAIAAAABQAAABIAAAASAAAAEwAAAAYAAAAEAAAACAAAAAUAAAASAAAAEgAAABMAAAAFAAAABAAAAAwAAAAGAAAAEgAAABMAAAATAAAABwAAAAQAAAAMAAAABgAAABIAAAASAAAAEwAAAAQAAAAEAAAAEAAAAAcAAAASAAAAEgAAABMAAAAEAAAAAwAAACAAAAAHAAAAEgAAABIAAAATAAAABgAAAAMAAACAAAAABwAAABIAAAATAAAAEwAAAAYAAAADAAAAgAAAAAgAAAASAAAAEwAAABMAAAAIAAAAAwAAAAABAAAIAAAAEgAAABMAAAATAAAABgAAAAMAAACAAAAACQAAABIAAAATAAAAEwAAAAgAAAADAAAAAAEAAAkAAAASAAAAEwAAABMAAAAKAAAAAwAAAAACAAAJAAAAEgAAABMAAAATAAAADAAAAAMAAAAAAgAACQAAABIAAAATAAAAEwAAAA0AAAADAAAA5wMAAAkAAAARAAAADAAAAAwAAAABAAAABQAAAAEAAAABAAAAEQAAAAwAAAANAAAAAQAAAAYAAAAAAAAAAQAAABEAAAANAAAADwAAAAEAAAAFAAAAAAAAAAEAAAARAAAADwAAABAAAAACAAAABQAAAAAAAAACAAAAEQAAABEAAAARAAAAAgAAAAQAAAAAAAAAAgAAABEAAAAQAAAAEQAAAAMAAAAEAAAAAgAAAAMAAAARAAAAEQAAABEAAAADAAAABAAAAAQAAAAEAAAAEQAAABEAAAARAAAAAwAAAAQAAAAIAAAABQAAABEAAAARAAAAEQAAAAQAAAAEAAAACAAAAAUAAAARAAAAEQAAABEAAAAFAAAABAAAAAgAAAAFAAAAEQAAABEAAAARAAAABgAAAAQAAAAIAAAABQAAABEAAAARAAAAEQAAAAUAAAAEAAAACAAAAAYAAAARAAAAEgAAABEAAAAHAAAABAAAAAwAAAAGAAAAEQAAABIAAAARAAAAAwAAAAQAAAAMAAAABwAAABEAAAASAAAAEQAAAAQAAAADAAAAIAAAAAcAAAARAAAAEgAAABEAAAAGAAAAAwAAAAABAAAHAAAAEQAAABIAAAARAAAABgAAAAMAAACAAAAACAAAABEAAAASAAAAEQAAAAgAAAADAAAAAAEAAAgAAAARAAAAEgAAABEAAAAKAAAAAwAAAAACAAAIAAAAEQAAABIAAAARAAAABQAAAAMAAAAAAQAACQAAABEAAAASAAAAEQAAAAcAAAADAAAAAAIAAAkAAAARAAAAEgAAABEAAAAJAAAAAwAAAAACAAAJAAAAEQAAABIAAAARAAAACwAAAAMAAADnAwAACQAAAA4AAAAMAAAADQAAAAEAAAAFAAAAAQAAAAEAAAAOAAAADgAAAA8AAAABAAAABQAAAAAAAAABAAAADgAAAA4AAAAPAAAAAQAAAAQAAAAAAAAAAQAAAA4AAAAOAAAADwAAAAIAAAAEAAAAAAAAAAIAAAAOAAAADgAAAA4AAAAEAAAABAAAAAIAAAADAAAADgAAAA4AAAAOAAAAAwAAAAQAAAAEAAAABAAAAA4AAAAOAAAADgAAAAQAAAAEAAAACAAAAAUAAAAOAAAADgAAAA4AAAAGAAAABAAAAAgAAAAFAAAADgAAAA4AAAAOAAAACAAAAAQAAAAIAAAABQAAAA4AAAAPAAAADgAAAAUAAAAEAAAACAAAAAYAAAAOAAAADwAAAA4AAAAJAAAABAAAAAgAAAAGAAAADgAAAA8AAAAOAAAAAwAAAAQAAAAMAAAABwAAAA4AAAAPAAAADgAAAAQAAAADAAAAGAAAAAcAAAAOAAAADwAAAA4AAAAFAAAAAwAAACAAAAAIAAAADgAAAA8AAAAPAAAABgAAAAMAAABAAAAACAAAAA4AAAAPAAAADwAAAAcAAAADAAAAAAEAAAgAAAAOAAAADwAAAA8AAAAFAAAAAwAAADAAAAAJAAAADgAAAA8AAAAPAAAABgAAAAMAAACAAAAACQAAAA4AAAAPAAAADwAAAAcAAAADAAAAAAEAAAkAAAAOAAAADwAAAA8AAAAIAAAAAwAAAAABAAAJAAAADgAAAA8AAAAPAAAACAAAAAMAAAAAAgAACQAAAA4AAAAPAAAADwAAAAkAAAADAAAAAAIAAAkAAAAOAAAADwAAAA8AAAAKAAAAAwAAAOcDAAAJAAAAIAAAACAAAAAhAAAAIgAAACMAAAAkAAAAJQAAACYAAAAnAAAAKAAAACkAAAApAAAAKgAAACsAAAAsAAAALQAAAC4AAAAvAAAAMAAAADAAAAAxAAAAMQAAADIAAAAzAAAANAAAADUAAAA2AAAANwAAADgAAAA4AEGQmgEL+gEEAAMAAgACAAIAAgACAAIAAgACAAIAAgACAAEAAQABAAIAAgACAAIAAgACAAIAAgACAAMAAgABAAEAAQABAAEA//////////8AAAAAAAAAAAEAAQABAAEAAQABAAIAAgACAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAP////////////8AAAAAAAABAAQAAwACAAIAAgACAAIAAgABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAP//////////////////AEGVnAEL+AcIAAAABwAAagYAAAAGAACtBQAAagUAADEFAAAABQAA1AQAAK0EAACKBAAAagQAAEwEAAAxBAAAFwQAAAAEAADpAwAA1AMAAMADAACtAwAAmwMAAIoDAAB5AwAAagMAAFsDAABMAwAAPgMAADEDAAAkAwAAFwMAAAsDAAAAAwAA9AIAAOkCAADeAgAA1AIAAMoCAADAAgAAtgIAAK0CAACkAgAAmwIAAJICAACKAgAAggIAAHkCAAByAgAAagIAAGICAABbAgAAUwIAAEwCAABFAgAAPgIAADcCAAAxAgAAKgIAACQCAAAeAgAAFwIAABECAAALAgAABQIAAAACAAD6AQAA9AEAAO8BAADpAQAA5AEAAN4BAADZAQAA1AEAAM8BAADKAQAAxQEAAMABAAC7AQAAtgEAALIBAACtAQAAqAEAAKQBAACfAQAAmwEAAJcBAACSAQAAjgEAAIoBAACGAQAAggEAAH4BAAB5AQAAdQEAAHIBAABuAQAAagEAAGYBAABiAQAAXgEAAFsBAABXAQAAUwEAAFABAABMAQAASQEAAEUBAABCAQAAPgEAADsBAAA3AQAANAEAADEBAAAuAQAAKgEAACcBAAAkAQAAIQEAAB4BAAAaAQAAFwEAABQBAAARAQAADgEAAAsBAAAIAQAABQEAAAIBAAAAAQAA/QAAAPoAAAD3AAAA9AAAAPEAAADvAAAA7AAAAOkAAADmAAAA5AAAAOEAAADeAAAA3AAAANkAAADXAAAA1AAAANEAAADPAAAAzAAAAMoAAADHAAAAxQAAAMIAAADAAAAAvgAAALsAAAC5AAAAtgAAALQAAACyAAAArwAAAK0AAACrAAAAqAAAAKYAAACkAAAAogAAAJ8AAACdAAAAmwAAAJkAAACXAAAAlQAAAJIAAACQAAAAjgAAAIwAAACKAAAAiAAAAIYAAACEAAAAggAAAIAAAAB+AAAAewAAAHkAAAB3AAAAdQAAAHMAAAByAAAAcAAAAG4AAABsAAAAagAAAGgAAABmAAAAZAAAAGIAAABgAAAAXgAAAF0AAABbAAAAWQAAAFcAAABVAAAAUwAAAFIAAABQAAAATgAAAEwAAABKAAAASQAAAEcAAABFAAAAQwAAAEIAAABAAAAAPgAAAD0AAAA7AAAAOQAAADcAAAA2AAAANAAAADIAAAAxAAAALwAAAC4AAAAsAAAAKgAAACkAAAAnAAAAJQAAACQAAAAiAAAAIQAAAB8AAAAeAAAAHAAAABoAAAAZAAAAFwAAABYAAAAUAAAAEwAAABEAAAAQAAAADgAAAA0AAAALAAAACgAAAAgAAAAHAAAABQAAAAQAAAACAAAAAQBBkKUBC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQfGlAQu/AQECAwQFBgcICQoLDA0ODxAQERESEhMTFBQUFBUVFRUWFhYWFhYWFhcXFxcXFxcXGBgYGBgYGBgYGBgYGBgYGAABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZGhscHR4fICAhISIiIyMkJCQkJSUlJSYmJiYmJiYmJycnJycnJycoKCgoKCgoKCgoKCgoKCgoKSkpKSkpKSkpKSkpKSkpKSoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqAEHwpwELTQEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAMAAAADAAAABAAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAEHIqAELDQEAAAABAAAAAgAAAAIAQeCoAQvTBgEAAAABAAAAAgAAAAIAAAAmAAAAggAAACEFAABKAAAAZwgAACYAAADAAQAAgAAAAEkFAABKAAAAvggAACkAAAAsAgAAgAAAAEkFAABKAAAAvggAAC8AAADKAgAAgAAAAIoFAABKAAAAhAkAADUAAABzAwAAgAAAAJ0FAABKAAAAoAkAAD0AAACBAwAAgAAAAOsFAABLAAAAPgoAAEQAAACeAwAAgAAAAE0GAABLAAAAqgoAAEsAAACzAwAAgAAAAMEGAABNAAAAHw0AAE0AAABTBAAAgAAAACMIAABRAAAApg8AAFQAAACZBAAAgAAAAEsJAABXAAAAsRIAAFgAAADaBAAAgAAAAG8JAABdAAAAIxQAAFQAAABFBQAAgAAAAFQKAABqAAAAjBQAAGoAAACvBQAAgAAAAHYJAAB8AAAAThAAAHwAAADSAgAAgAAAAGMHAACRAAAAkAcAAJIAAAAAAAAAAQAAAAIAAAAEAAAAAAAAAAIAAAAEAAAACAAAAAAAAAABAAAAAQAAAAUAAAANAAAAHQAAAD0AAAB9AAAA/QAAAP0BAAD9AwAA/QcAAP0PAAD9HwAA/T8AAP1/AAD9/wAA/f8BAP3/AwD9/wcA/f8PAP3/HwD9/z8A/f9/AP3//wD9//8B/f//A/3//wf9//8P/f//H/3//z/9//9/AAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAAAARAAAAEgAAABMAAAAUAAAAFQAAABYAAAAXAAAAGAAAABkAAAAaAAAAGwAAABwAAAAdAAAAHgAAAB8AAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAIgAAACMAAAAlAAAAJwAAACkAAAArAAAALwAAADMAAAA7AAAAQwAAAFMAAABjAAAAgwAAAAMBAAADAgAAAwQAAAMIAAADEAAAAyAAAANAAAADgAAAAwABAEHErwELlQEBAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEgAAABQAAAAWAAAAGAAAABwAAAAgAAAAKAAAADAAAABAAAAAgAAAAAABAAAAAgAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAAABAAEAAAAEAAAACABB5LABC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBsLIBC9YEAQAAAAEAAAABAAAAAQAAAAIAAAACAAAAAwAAAAMAAAAEAAAABgAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBlLcBC4MEAQAAAAEAAAAFAAAADQAAAB0AAAA9AAAAfQAAAP0AAAD9AQAA/QMAAP0HAAD9DwAA/R8AAP0/AAD9fwAA/f8AAP3/AQD9/wMA/f8HAP3/DwD9/x8A/f8/AP3/fwD9//8A/f//Af3//wP9//8H/f//D/3//x/9//8//f//fwAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAAT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IGludD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8bG9uZz4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgbG9uZz4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50OF90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQxNl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1aW50MTZfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8aW50MzJfdD4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dWludDMyX3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PGZsb2F0PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxkb3VibGU+AAAAGHQAAFBlAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lkRUUAABh0AAB4ZQAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJZkVFAAAYdAAAoGUAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SW1FRQAAGHQAAMhlAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lsRUUAABh0AADwZQAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJakVFAAAYdAAAGGYAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWlFRQAAGHQAAEBmAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0l0RUUAABh0AABoZgAATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJc0VFAAAYdAAAkGYAAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWFFRQAAGHQAALhmAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0ljRUUAAEB0AADwZgAAAAAAAAEAAACIBwAAAAAAAE5TdDNfXzIxMmJhc2ljX3N0cmluZ0lEaU5TXzExY2hhcl90cmFpdHNJRGlFRU5TXzlhbGxvY2F0b3JJRGlFRUVFAAAAQHQAAExnAAAAAAAAAQAAAIgHAAAAAAAATlN0M19fMjEyYmFzaWNfc3RyaW5nSURzTlNfMTFjaGFyX3RyYWl0c0lEc0VFTlNfOWFsbG9jYXRvcklEc0VFRUUAAABAdAAAqGcAAAAAAAABAAAAiAcAAAAAAABOU3QzX18yMTJiYXNpY19zdHJpbmdJd05TXzExY2hhcl90cmFpdHNJd0VFTlNfOWFsbG9jYXRvckl3RUVFRQAAQHQAAABoAAAAAAAAAQAAAIgHAAAAAAAATlN0M19fMjEyYmFzaWNfc3RyaW5nSWhOU18xMWNoYXJfdHJhaXRzSWhFRU5TXzlhbGxvY2F0b3JJaEVFRUUAABEACgAREREAAAAABQAAAAAAAAkAAAAACwAAAAAAAAAAEQAPChEREQMKBwABAAkLCwAACQYLAAALAAYRAAAAERERAEGR0QELIQsAAAAAAAAAABEACgoREREACgAAAgAJCwAAAAkACwAACwBBy9EBCwEMAEHX0QELFQwAAAAADAAAAAAJDAAAAAAADAAADABBhdIBCwEOAEGR0gELFQ0AAAAEDQAAAAAJDgAAAAAADgAADgBBv9IBCwEQAEHL0gELHg8AAAAADwAAAAAJEAAAAAAAEAAAEAAAEgAAABISEgBBgtMBCw4SAAAAEhISAAAAAAAACQBBs9MBCwELAEG/0wELFQoAAAAACgAAAAAJCwAAAAAACwAACwBB7dMBCwEMAEH50wELJwwAAAAADAAAAAAJDAAAAAAADAAADAAALSsgICAwWDB4AChudWxsKQBBsNQBC2cwMTIzNDU2Nzg5QUJDREVGGRJEOwI/LEcUPTMwChsGRktFNw9JDo4XA0AdPGkrNh9KLRwBICUpIQgMFRYiLhA4Pgs0MRhkdHV2L0EJfzkRI0MyQomKiwUEJignDSoeNYwHGkiTE5SVAEGg1QEL9hNJbGxlZ2FsIGJ5dGUgc2VxdWVuY2UARG9tYWluIGVycm9yAFJlc3VsdCBub3QgcmVwcmVzZW50YWJsZQBOb3QgYSB0dHkAUGVybWlzc2lvbiBkZW5pZWQAT3BlcmF0aW9uIG5vdCBwZXJtaXR0ZWQATm8gc3VjaCBmaWxlIG9yIGRpcmVjdG9yeQBObyBzdWNoIHByb2Nlc3MARmlsZSBleGlzdHMAVmFsdWUgdG9vIGxhcmdlIGZvciBkYXRhIHR5cGUATm8gc3BhY2UgbGVmdCBvbiBkZXZpY2UAT3V0IG9mIG1lbW9yeQBSZXNvdXJjZSBidXN5AEludGVycnVwdGVkIHN5c3RlbSBjYWxsAFJlc291cmNlIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlAEludmFsaWQgc2VlawBDcm9zcy1kZXZpY2UgbGluawBSZWFkLW9ubHkgZmlsZSBzeXN0ZW0ARGlyZWN0b3J5IG5vdCBlbXB0eQBDb25uZWN0aW9uIHJlc2V0IGJ5IHBlZXIAT3BlcmF0aW9uIHRpbWVkIG91dABDb25uZWN0aW9uIHJlZnVzZWQASG9zdCBpcyBkb3duAEhvc3QgaXMgdW5yZWFjaGFibGUAQWRkcmVzcyBpbiB1c2UAQnJva2VuIHBpcGUASS9PIGVycm9yAE5vIHN1Y2ggZGV2aWNlIG9yIGFkZHJlc3MAQmxvY2sgZGV2aWNlIHJlcXVpcmVkAE5vIHN1Y2ggZGV2aWNlAE5vdCBhIGRpcmVjdG9yeQBJcyBhIGRpcmVjdG9yeQBUZXh0IGZpbGUgYnVzeQBFeGVjIGZvcm1hdCBlcnJvcgBJbnZhbGlkIGFyZ3VtZW50AEFyZ3VtZW50IGxpc3QgdG9vIGxvbmcAU3ltYm9saWMgbGluayBsb29wAEZpbGVuYW1lIHRvbyBsb25nAFRvbyBtYW55IG9wZW4gZmlsZXMgaW4gc3lzdGVtAE5vIGZpbGUgZGVzY3JpcHRvcnMgYXZhaWxhYmxlAEJhZCBmaWxlIGRlc2NyaXB0b3IATm8gY2hpbGQgcHJvY2VzcwBCYWQgYWRkcmVzcwBGaWxlIHRvbyBsYXJnZQBUb28gbWFueSBsaW5rcwBObyBsb2NrcyBhdmFpbGFibGUAUmVzb3VyY2UgZGVhZGxvY2sgd291bGQgb2NjdXIAU3RhdGUgbm90IHJlY292ZXJhYmxlAFByZXZpb3VzIG93bmVyIGRpZWQAT3BlcmF0aW9uIGNhbmNlbGVkAEZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZABObyBtZXNzYWdlIG9mIGRlc2lyZWQgdHlwZQBJZGVudGlmaWVyIHJlbW92ZWQARGV2aWNlIG5vdCBhIHN0cmVhbQBObyBkYXRhIGF2YWlsYWJsZQBEZXZpY2UgdGltZW91dABPdXQgb2Ygc3RyZWFtcyByZXNvdXJjZXMATGluayBoYXMgYmVlbiBzZXZlcmVkAFByb3RvY29sIGVycm9yAEJhZCBtZXNzYWdlAEZpbGUgZGVzY3JpcHRvciBpbiBiYWQgc3RhdGUATm90IGEgc29ja2V0AERlc3RpbmF0aW9uIGFkZHJlc3MgcmVxdWlyZWQATWVzc2FnZSB0b28gbGFyZ2UAUHJvdG9jb2wgd3JvbmcgdHlwZSBmb3Igc29ja2V0AFByb3RvY29sIG5vdCBhdmFpbGFibGUAUHJvdG9jb2wgbm90IHN1cHBvcnRlZABTb2NrZXQgdHlwZSBub3Qgc3VwcG9ydGVkAE5vdCBzdXBwb3J0ZWQAUHJvdG9jb2wgZmFtaWx5IG5vdCBzdXBwb3J0ZWQAQWRkcmVzcyBmYW1pbHkgbm90IHN1cHBvcnRlZCBieSBwcm90b2NvbABBZGRyZXNzIG5vdCBhdmFpbGFibGUATmV0d29yayBpcyBkb3duAE5ldHdvcmsgdW5yZWFjaGFibGUAQ29ubmVjdGlvbiByZXNldCBieSBuZXR3b3JrAENvbm5lY3Rpb24gYWJvcnRlZABObyBidWZmZXIgc3BhY2UgYXZhaWxhYmxlAFNvY2tldCBpcyBjb25uZWN0ZWQAU29ja2V0IG5vdCBjb25uZWN0ZWQAQ2Fubm90IHNlbmQgYWZ0ZXIgc29ja2V0IHNodXRkb3duAE9wZXJhdGlvbiBhbHJlYWR5IGluIHByb2dyZXNzAE9wZXJhdGlvbiBpbiBwcm9ncmVzcwBTdGFsZSBmaWxlIGhhbmRsZQBSZW1vdGUgSS9PIGVycm9yAFF1b3RhIGV4Y2VlZGVkAE5vIG1lZGl1bSBmb3VuZABXcm9uZyBtZWRpdW0gdHlwZQBObyBlcnJvciBpbmZvcm1hdGlvbgAAYmFzaWNfc3RyaW5nAHN0ZDo6ZXhjZXB0aW9uAAAAAADccQAAPAAAAD0AAAA+AAAAGHQAAORxAABTdDlleGNlcHRpb24AAAAAAAAAAAhyAAAQAAAAPwAAAEAAAACMcgAAFHIAANxxAABTdDExbG9naWNfZXJyb3IAAAAAADhyAAAQAAAAQQAAAEAAAACMcgAARHIAAAhyAABTdDEybGVuZ3RoX2Vycm9yAFN0OXR5cGVfaW5mbwAAABh0AABVcgAAjHIAAAFzAABkcgAAjHIAAKxyAABscgAAAAAAANByAABCAAAAQwAAAEQAAABFAAAARgAAAEcAAABIAAAASQAAAE4xMF9fY3h4YWJpdjExN19fY2xhc3NfdHlwZV9pbmZvRQAAAIxyAADccgAAeHIAAE4xMF9fY3h4YWJpdjEyMF9fc2lfY2xhc3NfdHlwZV9pbmZvRQBOMTBfX2N4eGFiaXYxMTZfX3NoaW1fdHlwZV9pbmZvRQAAAAAAAABAcwAAQgAAAEoAAABEAAAARQAAAEsAAACMcgAATHMAAGxyAABOMTBfX2N4eGFiaXYxMjNfX2Z1bmRhbWVudGFsX3R5cGVfaW5mb0UAdgAAACxzAAB0cwAAYgAAACxzAACAcwAAYwAAACxzAACMcwAAaAAAACxzAACYcwAAYQAAACxzAACkcwAAcwAAACxzAACwcwAAdAAAACxzAAC8cwAAaQAAACxzAADIcwAAagAAACxzAADUcwAAbAAAACxzAADgcwAAbQAAACxzAADscwAAZgAAACxzAAD4cwAAZAAAACxzAAAEdAAAAAAAAHhyAABCAAAATAAAAEQAAABFAAAARgAAAE0AAABOAAAATwAAAAAAAABgdAAAQgAAAFAAAABEAAAARQAAAEYAAABRAAAAUgAAAFMAAACMcgAAbHQAAHhyAABOMTBfX2N4eGFiaXYxMjFfX3ZtaV9jbGFzc190eXBlX2luZm9FAAAAcHUAQZjpAQtBgC0AAAAyAAABAQAAHgEAAA8AAACALAAAAC0AAAAAAAAeAAAADwAAAAAAAAAwLAAAAAAAABMAAAAHAAAAAAAAAAUAQeTpAQsBOQBB/OkBCwo6AAAAOwAAAC12AEGU6gELAQIAQaPqAQsF//////8AQejqAQsJoH5QAAAAAAAFAEH86gELAVQAQZTrAQsOOgAAAFUAAACYegAAAAQAQazrAQsBAQBBu+sBCwUK/////w=="),_a,BloscShuffle;(function(d){d[d.NOSHUFFLE=0]="NOSHUFFLE",d[d.SHUFFLE=1]="SHUFFLE",d[d.BITSHUFFLE=2]="BITSHUFFLE",d[d.AUTOSHUFFLE=-1]="AUTOSHUFFLE"})(BloscShuffle||(BloscShuffle={}));const COMPRESSORS=new Set(["blosclz","lz4","lz4hc","snappy","zlib","zstd"]);let emscriptenModule;const init$1=()=>blosc_codec({noInitialRun:!0,wasmBinary}),Blosc=(_a=class{constructor(d=5,s="lz4",f=1,_=0){if(d<0||d>9)throw new Error(`Invalid compression level: '${d}'. It should be between 0 and 9`);if(!COMPRESSORS.has(s))throw new Error(`Invalid compressor '${s}'. Valid compressors include
        'blosclz', 'lz4', 'lz4hc','snappy', 'zlib', 'zstd'.`);if(f<-1||f>2)throw new Error(`Invalid shuffle ${f}. Must be one of 0 (NOSHUFFLE),
        1 (SHUFFLE), 2 (BITSHUFFLE), -1 (AUTOSHUFFLE).`);this.blocksize=_,this.clevel=d,this.cname=s,this.shuffle=f}static fromConfig({blocksize:d,clevel:s,cname:f,shuffle:_}){return new _a(s,f,_,d)}async encode(d){emscriptenModule||(emscriptenModule=init$1());const s=await emscriptenModule,f=s.compress(d,this.cname,this.clevel,this.shuffle,this.blocksize),_=new Uint8Array(f);return s.free_result(),_}async decode(d,s){emscriptenModule||(emscriptenModule=init$1());const f=await emscriptenModule,_=f.decompress(d),S=new Uint8Array(_);return f.free_result(),s!==void 0?(s.set(S),s):S}},_a.codecId="blosc",_a.COMPRESSORS=[...COMPRESSORS],_a.NOSHUFFLE=0,_a.SHUFFLE=1,_a.BITSHUFFLE=2,_a.AUTOSHUFFLE=-1,_a);var Blosc$1=Blosc;addCodec(Zlib$1.codecId,()=>Zlib$1);addCodec(GZip$1.codecId,()=>GZip$1);addCodec(Blosc$1.codecId,()=>Blosc$1);var __defProp$3=Object.defineProperty,__defNormalProp$3=(d,s,f)=>s in d?__defProp$3(d,s,{enumerable:!0,configurable:!0,writable:!0,value:f}):d[s]=f,__publicField$3=(d,s,f)=>(__defNormalProp$3(d,s+"",f),f);class LZWDecoder extends BaseDecoder{constructor(s){super(),__publicField$3(this,"maxUncompressedSize");const f=s.TileWidth||s.ImageWidth,_=s.TileLength||s.ImageLength,S=s.BitsPerSample[0]/8;this.maxUncompressedSize=f*_*S}async decodeBlock(s){const f=new Uint8Array(s);return(await N(f,this.maxUncompressedSize)).buffer}}const DTYPE_LOOKUP$1={uint8:"Uint8",uint16:"Uint16",uint32:"Uint32",float:"Float32",double:"Float64",int8:"Int8",int16:"Int16",int32:"Int32"};function getChannelStats(d){let s=d.length,f=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,S=0;for(;s--;)d[s]<f&&(f=d[s]),d[s]>_&&(_=d[s]),S+=d[s];const T=S/d.length;s=d.length;let F=0;for(;s--;)F+=(d[s]-T)**2;const M=(F/d.length)**.5,P=Math.floor(d.length/2),H=Math.floor(d.length/4),J=3*Math.floor(d.length/4);quickselect(d,P);const K=d[P];quickselect(d,H,0,P);const oe=d[H];quickselect(d,J,P,d.length-1);const se=d[J],ae=d.filter(be=>be>0),ge=5e-4,he=Math.floor(ae.length*(1-ge)),Be=Math.floor(ae.length*ge);quickselect(ae,he),quickselect(ae,Be,0,he);const pe=[ae[Be]||0,ae[he]||0];return{mean:T,sd:M,q1:oe,q3:se,median:K,domain:[f,_],contrastLimits:pe}}function intToRgba(d){if(!Number.isInteger(d))throw Error("Not an integer.");const s=new ArrayBuffer(4);new DataView(s).setInt32(0,d,!1);const _=new Uint8Array(s);return Array.from(_)}function isInterleaved$1(d){const s=d[d.length-1];return s===3||s===4}function getLabels(d){return d.toLowerCase().split("").reverse()}function getImageSize(d){const s=isInterleaved$1(d.shape),[f,_]=d.shape.slice(s?-3:-2);return{height:f,width:_}}function prevPowerOf2(d){return 2**Math.floor(Math.log2(d))}const SIGNAL_ABORTED="__vivSignalAborted";function isElement(d){return d.nodeType===1}function isText(d){return d.nodeType===3}function xmlToJson(d,s){var _;if(isText(d))return((_=d.nodeValue)==null?void 0:_.trim())??"";if(d.childNodes.length===0&&(!d.attributes||d.attributes.length===0))return"";const f={};if(d.attributes&&d.attributes.length>0){const S={};for(let T=0;T<d.attributes.length;T++){const F=d.attributes[T];S[F.name]=F.value}f[s.attrtibutesKey]=S}for(let S=0;S<d.childNodes.length;S++){const T=d.childNodes[S];if(!isElement(T))continue;const F=xmlToJson(T,s);if(F!==void 0&&F!==""){if(T.nodeName==="#text"&&d.childNodes.length===1)return F;f[T.nodeName]?(Array.isArray(f[T.nodeName])||(f[T.nodeName]=[f[T.nodeName]]),f[T.nodeName].push(F)):f[T.nodeName]=F}}return f}function parseXML(d){const f=new DOMParser().parseFromString(d.replace(/\u0000$/,""),"application/xml");return xmlToJson(f.documentElement,{attrtibutesKey:"attr"})}function assert$1(d,s){if(!d)throw new Error(`Assert failed${s?`: ${s}`:""}`)}const VIV_PROXY_KEY="__viv",OFFSETS_PROXY_KEY=`${VIV_PROXY_KEY}-offsets`;function createOffsetsProxy(d,s){const f=(_,S)=>S==="getImage"?T=>{if(!(T in _.ifdRequests)&&T in s){const F=s[T];_.ifdRequests[T]=_.parseFileDirectoryAt(F)}return _.getImage(T)}:S===OFFSETS_PROXY_KEY?!0:Reflect.get(_,S);return new Proxy(d,{get:f})}function extractPhysicalSizesfromPixels(d){if(!d.PhysicalSizeX||!d.PhysicalSizeY||!d.PhysicalSizeXUnit||!d.PhysicalSizeYUnit)return;const s={x:{size:d.PhysicalSizeX,unit:d.PhysicalSizeXUnit},y:{size:d.PhysicalSizeY,unit:d.PhysicalSizeYUnit}};return d.PhysicalSizeZ&&d.PhysicalSizeZUnit&&(s.z={size:d.PhysicalSizeZ,unit:d.PhysicalSizeZUnit}),s}function parsePixelDataType(d){return assert$1(d in DTYPE_LOOKUP$1,`Pixel type ${d} not supported.`),DTYPE_LOOKUP$1[d]}function extractAxesFromPixels(d){const s=getLabels(d.DimensionOrder),f=Array(s.length).fill(0);return f[s.indexOf("t")]=d.SizeT,f[s.indexOf("c")]=d.SizeC,f[s.indexOf("z")]=d.SizeZ,f[s.indexOf("y")]=d.SizeY,f[s.indexOf("x")]=d.SizeX,d.Interleaved&&(s.push("_c"),f.push(3)),{labels:s,shape:f}}function getShapeForBinaryDownsampleLevel(d){const{axes:s,level:f}=d,_=s.labels.indexOf("x");assert$1(_!==-1,"x dimension not found");const S=s.labels.indexOf("y");assert$1(S!==-1,"y dimension not found");const T=s.shape.slice();return T[_]=s.shape[_]>>f,T[S]=s.shape[S]>>f,T}function getTiffTileSize(d){const s=d.getTileWidth(),f=d.getTileHeight(),_=Math.min(s,f);return prevPowerOf2(_)}function guessImageDataType(d){var S,T;const f=((T=(S=d.fileDirectory)==null?void 0:S.SampleFormat)==null?void 0:T[0])??1,_=d.fileDirectory.BitsPerSample[0];switch(f){case 1:if(_<=8)return DTYPE_LOOKUP$1.uint8;if(_<=16)return DTYPE_LOOKUP$1.uint16;if(_<=32)return DTYPE_LOOKUP$1.uint32;break;case 2:if(_<=8)return DTYPE_LOOKUP$1.int8;if(_<=16)return DTYPE_LOOKUP$1.int16;if(_<=32)return DTYPE_LOOKUP$1.int32;break;case 3:switch(_){case 16:return DTYPE_LOOKUP$1.float;case 32:return DTYPE_LOOKUP$1.float;case 64:return DTYPE_LOOKUP$1.double}break}throw Error("Unsupported data format/bitsPerSample")}function getMultiTiffShapeMap(d){let[s,f,_]=[0,0,0];for(const T of d)s=Math.max(s,T.selection.c),f=Math.max(f,T.selection.z),_=Math.max(_,T.selection.t);const S=d[0].tiff;return{x:S.getWidth(),y:S.getHeight(),z:f+1,c:s+1,t:_+1}}function getChannelSamplesPerPixel(d,s){const f=Array(s).fill(0);for(const _ of d){const S=_.selection.c,T=_.tiff.getSamplesPerPixel(),F=f[S];if(F&&F!==T)throw Error("Channel samples per pixel mismatch");f[S]=T}return f}function getMultiTiffMeta(d,s){const f=s[0].tiff,_=getMultiTiffShapeMap(s),S=[];for(const M of d.toLowerCase())S.unshift(_[M]);const T=getLabels(d),F=guessImageDataType(f);return{shape:S,labels:T,dtype:F}}function getMultiTiffPixelMedatata(d,s,f,_,S,T,F){const M=[];for(let P=0;P<f.c;P+=1)M.push({ID:`Channel:${d}:${P}`,Name:T[P],SamplesPerPixel:F[P]});return{BigEndian:!S[0].tiff.littleEndian,DimensionOrder:s,ID:`Pixels:${d}`,SizeC:f.c,SizeT:f.t,SizeX:f.x,SizeY:f.y,SizeZ:f.z,Type:_,Channels:M}}function getMultiTiffMetadata(d,s,f,_,S){const F="Image:0",M="",P="",H=getMultiTiffShapeMap(s),J=getChannelSamplesPerPixel(s,H.c);if(f.length!==H.c)throw Error("Wrong number of channel names for number of channels provided");const K=getMultiTiffPixelMedatata(0,_,H,S,s,f,J);return{ID:F,Name:d,AcquisitionDate:M,Description:P,Pixels:K,format:()=>({"Acquisition Date":M,"Dimensions (XY)":`${H.x} x ${H.y}`,PixelsType:S,"Z-sections/Timepoints":`${H.z} x ${H.t}`,Channels:H.c})}}function parseFilename(d){const s={},f=d.split("/").pop(),_=f==null?void 0:f.split(".");return _&&(s.name=_.slice(0,-1).join("."),[,s.extension]=_),s}function createGeoTiffObject(d,{headers:s}){if(d instanceof Blob)return fromBlob(d);const f=typeof d=="string"?new URL(d):d;return f.protocol==="file:"?fromFile(f.pathname):fromUrl(f.href,{headers:s,cacheSize:Number.POSITIVE_INFINITY})}async function createGeoTiff(d,s={}){const f=await createGeoTiffObject(d,s);return s.offsets?createOffsetsProxy(f,s.offsets):f}function createOmeImageIndexerFromResolver(d,s){const f=[];return async(_,S)=>{const{tiff:T,ifdIndex:F}=await d(_),M=await T.getImage(F);if(S===0)return M;let P;if(M.fileDirectory.SubIFDs)P=M.fileDirectory.SubIFDs[S-1];else{const J=S*s.size.z*s.size.t*s.size.c;P=F+J}f[P]||(f[P]=await T.parseFileDirectoryAt(P));const H=f[P];return new GeoTIFFImage(H.fileDirectory,H.geoKeyDirectory,M.dataView,T.littleEndian,T.cache,T.source)}}function getMultiTiffIndexer(d){function s({c:_=0,t:S=0,z:T=0}){return`${_}-${S}-${T}`}const f=new Map(d.map(({selection:_,tiff:S})=>[s(_),S]));return async _=>{const S=s(_),T=f.get(S);if(!T)throw new Error(`No image available for selection ${S}`);return T}}var __defProp$2=Object.defineProperty,__defNormalProp$2=(d,s,f)=>s in d?__defProp$2(d,s,{enumerable:!0,configurable:!0,writable:!0,value:f}):d[s]=f,__publicField$2=(d,s,f)=>(__defNormalProp$2(d,s+"",f),f);class TiffPixelSource{constructor(s,f,_,S,T,F,M){this.dtype=f,this.tileSize=_,this.shape=S,this.labels=T,this.meta=F,this.pool=M,__publicField$2(this,"_indexer"),this._indexer=s}async getRaster({selection:s,signal:f}){const _=await this._indexer(s);return this._readRasters(_,{signal:f})}async getTile({x:s,y:f,selection:_,signal:S}){const{height:T,width:F}=this._getTileExtent(s,f),M=s*this.tileSize,P=f*this.tileSize,H=[M,P,M+F,P+T],J=await this._indexer(_);return this._readRasters(J,{window:H,width:F,height:T,signal:S})}async _readRasters(s,f){var F;const _=isInterleaved$1(this.shape),S=await s.readRasters({interleave:_,...f,pool:this.pool});if((F=f==null?void 0:f.signal)!=null&&F.aborted)throw SIGNAL_ABORTED;return{data:_?S:S[0],width:S.width,height:S.height}}_getTileExtent(s,f){const{height:_,width:S}=getImageSize(this);let T=this.tileSize,F=this.tileSize;const M=Math.floor(S/this.tileSize),P=Math.floor(_/this.tileSize);return s===M&&(F=S%this.tileSize),f===P&&(T=_%this.tileSize),{height:T,width:F}}onTileError(s){console.error(s)}}function assertSameResolution(d){const s=d[0].tiff.getWidth(),f=d[0].tiff.getHeight();for(const _ of d)if(_.tiff.getWidth()!==s||_.tiff.getHeight()!==f)throw new Error("All images must have the same width and height")}async function assertCompleteStack(d,s){for(let f=0;f<=Math.max(...d.map(_=>_.selection.t));f+=1)for(let _=0;_<=Math.max(...d.map(S=>S.selection.c));_+=1)for(let S=0;S<=Math.max(...d.map(T=>T.selection.z));S+=1)await s({t:f,c:_,z:S})}async function load$2(d,s,f,_){assertSameResolution(s);const S=s[0].tiff,{PhotometricInterpretation:T}=S.fileDirectory,F="XYZCT",M=getTiffTileSize(S),P={photometricInterpretation:T},H=getMultiTiffIndexer(s),{shape:J,labels:K,dtype:oe}=getMultiTiffMeta(F,s),se=getMultiTiffMetadata(d,s,f,F,oe);return await assertCompleteStack(s,H),{data:[new TiffPixelSource(H,oe,M,J,K,P,_)],metadata:se}}function flattenAttributes({attr:d,...s}){return{...d,...s}}function ensureArray(d){return Array.isArray(d)?d:[d]}const DimensionOrderSchema=enumType(["XYZCT","XYZTC","XYCTZ","XYCZT","XYTCZ","XYTZC"]),PixelTypeSchema=enumType(["int8","int16","int32","uint8","uint16","uint32","float","bit","double","complex","double-complex"]),PhysicalUnitSchema=enumType(["Ym","Zm","Em","Pm","Tm","Gm","Mm","km","hm","dam","m","dm","cm","mm","m","nm","pm","fm","am","zm","ym","","thou","li","in","ft","yd","mi","ua","ly","pc","pt","pixel","reference frame"]),ChannelSchema=objectType({}).extend({attr:objectType({ID:stringType(),SamplesPerPixel:coerce.number().optional(),Name:stringType().optional(),Color:coerce.number().transform(intToRgba).optional()})}).transform(flattenAttributes),UuidSchema=objectType({}).extend({attr:objectType({FileName:stringType()})}).transform(flattenAttributes),TiffDataSchema=objectType({UUID:UuidSchema.optional()}).extend({attr:objectType({IFD:coerce.number().default(0),PlaneCount:coerce.number().default(1),FirstT:coerce.number().optional(),FirstC:coerce.number().optional(),FirstZ:coerce.number().optional()})}).transform(flattenAttributes),PixelsSchema=objectType({Channel:preprocessType(ensureArray,ChannelSchema.array()),TiffData:preprocessType(ensureArray,TiffDataSchema.array()).optional()}).extend({attr:objectType({ID:stringType(),DimensionOrder:DimensionOrderSchema,Type:PixelTypeSchema,SizeT:coerce.number(),SizeC:coerce.number(),SizeZ:coerce.number(),SizeY:coerce.number(),SizeX:coerce.number(),PhysicalSizeX:coerce.number().optional(),PhysicalSizeY:coerce.number().optional(),PhysicalSizeZ:coerce.number().optional(),SignificantBits:coerce.number().optional(),PhysicalSizeXUnit:PhysicalUnitSchema.optional().default("m"),PhysicalSizeYUnit:PhysicalUnitSchema.optional().default("m"),PhysicalSizeZUnit:PhysicalUnitSchema.optional().default("m"),BigEndian:stringType().transform(d=>d.toLowerCase()==="true").optional(),Interleaved:stringType().transform(d=>d.toLowerCase()==="true").optional()})}).transform(flattenAttributes).transform(({Channel:d,...s})=>({Channels:d,...s})),ImageSchema=objectType({AquisitionDate:stringType().optional().default(""),Description:unknownType().optional().default(""),Pixels:PixelsSchema}).extend({attr:objectType({ID:stringType(),Name:stringType().optional()})}).transform(flattenAttributes),OmeSchema=objectType({Image:preprocessType(ensureArray,ImageSchema.array())});function fromString(d){const s=parseXML(d);return OmeSchema.parse(s).Image.map(_=>({..._,format(){const S=["X","Y","Z"].map(T=>{const F=_.Pixels[`PhysicalSize${T}`],M=_.Pixels[`PhysicalSize${T}Unit`];return F?`${F} ${M}`:"-"}).join(" x ");return{"Acquisition Date":_.AquisitionDate,"Dimensions (XY)":`${_.Pixels.SizeX} x ${_.Pixels.SizeY}`,"Pixels Type":_.Pixels.Type,"Pixels Size (XYZ)":S,"Z-sections/Timepoints":`${_.Pixels.SizeZ} x ${_.Pixels.SizeT}`,Channels:_.Pixels.SizeC}}}))}function isCompleteTiffDataItem(d){return"FirstC"in d&&"FirstT"in d&&"FirstZ"in d&&"IFD"in d&&"UUID"in d}function createMultifileImageDataLookup(d){const s=new Map;function f({t:_,c:S,z:T}){return`t${_}.c${S}.z${T}`}assert$1(d,"No TiffData in OME-XML");for(const _ of d){assert$1(isCompleteTiffDataItem(_),"Incomplete TiffData item");const S=f({t:_.FirstT,c:_.FirstC,z:_.FirstZ}),T={ifd:_.IFD,filename:_.UUID.FileName};s.set(S,T)}return{getImageDataPointer(_){const S=s.get(f(_));return assert$1(S,`No image for selection: ${JSON.stringify(_)}`),S}}}function createMultifileOmeTiffResolver(d){const s=new Map,f=createMultifileImageDataLookup(d.tiffData);return async _=>{const S=f.getImageDataPointer(_);if(!s.has(S.filename)){const F=new URL(S.filename,d.baseUrl),M=await createGeoTiff(F,d);s.set(S.filename,M)}const T=s.get(S.filename);return assert$1(T,`No GeoTIFF for ${S.filename}`),{tiff:T,ifdIndex:S.ifd}}}async function getPixelSourceOptionsForImage(d,s){const f=createMultifileOmeTiffResolver({tiffData:d.Pixels.TiffData,baseUrl:s.baseUrl,headers:s.headers}),{tiff:_,ifdIndex:S}=await f({c:0,t:0,z:0}),T=await _.getImage(S);return{pyramidIndexer:createOmeImageIndexerFromResolver(f,{size:{z:d.Pixels.SizeZ,t:d.Pixels.SizeT,c:d.Pixels.SizeC}}),levels:T.fileDirectory.SubIFDs?T.fileDirectory.SubIFDs.length+1:1,tileSize:getTiffTileSize(T),axes:extractAxesFromPixels(d.Pixels),dtype:parsePixelDataType(d.Pixels.Type),meta:{physicalSizes:extractPhysicalSizesfromPixels(d.Pixels),photometricInterpretation:T.fileDirectory.PhotometricInterpretation}}}async function loadMultifileOmeTiff(d,s={}){assert$1(!(d instanceof File),"File or Blob not supported for multifile OME-TIFF");const f=new URL(d),_=await fetch(f).then(F=>F.text()),S=fromString(_),T=[];for(const F of S){const M=await getPixelSourceOptionsForImage(F,{baseUrl:f,headers:s.headers||{}}),P=Array.from({length:M.levels},(H,J)=>new TiffPixelSource(K=>M.pyramidIndexer(K,J),M.dtype,M.tileSize,getShapeForBinaryDownsampleLevel({axes:M.axes,level:J}),M.axes.labels,M.meta,s.pool));T.push({data:P,metadata:F})}return T}function resolveMetadata(d,s){if(s)return{levels:s.length+1,rootMeta:d};const f=d[0];return{levels:d.length,rootMeta:[f]}}function getRelativeOmeIfdIndex({z:d,t:s,c:f},_){const{size:S,dimensionOrder:T}=_;switch(_.dimensionOrder){case"XYZCT":return d+S.z*f+S.z*S.c*s;case"XYZTC":return d+S.z*s+S.z*S.t*f;case"XYCTZ":return f+S.c*s+S.c*S.t*d;case"XYCZT":return f+S.c*d+S.c*S.z*s;case"XYTCZ":return s+S.t*f+S.t*S.c*d;case"XYTZC":return s+S.t*d+S.t*S.z*f;default:throw new Error(`Invalid dimension order: ${T}`)}}function createSingleFileOmeTiffPyramidalIndexer(d,s){return createOmeImageIndexerFromResolver(f=>{const S=getRelativeOmeIfdIndex(f,s)+s.ifdOffset;return{tiff:d,ifdIndex:S}},s)}async function loadSingleFileOmeTiff(d,s={}){const{offsets:f,headers:_,pool:S}=s,T=await createGeoTiff(d,{headers:_,offsets:f}),F=await T.getImage(),{rootMeta:M,levels:P}=resolveMetadata(fromString(F.fileDirectory.ImageDescription),F.fileDirectory.SubIFDs),H=[];let J=0;for(const K of M){const oe={z:K.Pixels.SizeZ,c:K.Pixels.SizeC,t:K.Pixels.SizeT},se=extractAxesFromPixels(K.Pixels),ae=createSingleFileOmeTiffPyramidalIndexer(T,{size:oe,ifdOffset:J,dimensionOrder:K.Pixels.DimensionOrder}),ge=parsePixelDataType(K.Pixels.Type),he=getTiffTileSize(await ae({c:0,t:0,z:0},0)),Be={physicalSizes:extractPhysicalSizesfromPixels(K.Pixels),photometricInterpretation:F.fileDirectory.PhotometricInterpretation},pe=Array.from({length:P},(be,Re)=>new TiffPixelSource(Fe=>ae(Fe,Re),ge,he,getShapeForBinaryDownsampleLevel({axes:se,level:Re}),se.labels,Be,S));H.push({data:pe,metadata:K}),J+=oe.t*oe.z*oe.c}return H}addDecoder(5,()=>LZWDecoder);function isSupportedCompanionOmeTiffFile(d){return typeof d=="string"&&d.endsWith(".companion.ome")}async function loadOmeTiff(d,s={}){const _=await(isSupportedCompanionOmeTiffFile(d)?loadMultifileOmeTiff:loadSingleFileOmeTiff)(d,s);return s.images==="all"?_:_[0]}function getImageSelectionName(d,s,f){return f.length===1?d:`${d}_${s.toString()}`}async function loadMultiTiff(d,s={}){var M;const{pool:f,headers:_={},name:S="MultiTiff"}=s,T=[],F=[];for(const P of d){const[H,J]=P,K=Array.isArray(H)?H:[H];if(typeof J=="string"){const oe=parseFilename(J),se=(M=oe.extension)==null?void 0:M.toLowerCase();if(se==="tif"||se==="tiff"){const ae=oe.name;if(ae){const ge=await createGeoTiff(J,{headers:_});for(let he=0;he<K.length;he++){const Be=K[he];if(Be){const pe=await ge.getImage(he);T.push({selection:Be,tiff:pe}),F[Be.c]=getImageSelectionName(ae,he,K)}}}}}else{const{name:oe}=parseFilename(J.path);if(oe){const se=await fromBlob(J);for(let ae=0;ae<K.length;ae++){const ge=K[ae];if(ge){const he=await se.getImage(ae);T.push({selection:ge,tiff:he}),F[ge.c]=getImageSelectionName(oe,ae,K)}}}}}if(T.length>0)return load$2(S,T,s.channelNames||F,f);throw new Error("Unable to load image from provided TiffFolder source.")}var __defProp$1=Object.defineProperty,__defNormalProp$1=(d,s,f)=>s in d?__defProp$1(d,s,{enumerable:!0,configurable:!0,writable:!0,value:f}):d[s]=f,__publicField$1=(d,s,f)=>(__defNormalProp$1(d,typeof s!="symbol"?s+"":s,f),f);function joinUrlParts(...d){return d.map((s,f)=>f===0?s.trim().replace(/[/]*$/g,""):s.trim().replace(/(^[/]*|[/]*$)/g,"")).filter(s=>s.length).join("/")}class ReadOnlyStore{async keys(){return[]}async deleteItem(){return!1}async setItem(){return console.warn("Cannot write to read-only store."),!1}}class FileStore extends ReadOnlyStore{constructor(s,f=""){super(),__publicField$1(this,"_map"),__publicField$1(this,"_rootPrefix"),this._map=s,this._rootPrefix=f}_key(s){return joinUrlParts(this._rootPrefix,s)}async getItem(s){const f=this._map.get(this._key(s));if(!f)throw new KeyError(s);return await f.arrayBuffer()}async containsItem(s){const f=this._key(s);return this._map.has(f)}}function isOmeZarr(d,s){const{SizeT:f,SizeC:_,SizeZ:S,SizeY:T,SizeX:F}=s,M=[f,_,S,T,F];return d.every((P,H)=>M[H]===P)}function guessBioformatsLabels({shape:d},{Pixels:s}){if(isOmeZarr(d,s))return getLabels("XYZCT");const f=getLabels(s.DimensionOrder);return f.forEach((_,S)=>{const T=_.toUpperCase(),F=s[`Size${T}`];if(!F)throw Error(`Dimension ${T} is invalid for OME-XML.`);if(d[S]!==F)throw Error("Dimension mismatch between zarr source and OME-XML.")}),f}function getRootPrefix(d,s){const f=d.find(S=>S.path.indexOf(s)>0);if(!f)throw Error("Could not find root in store.");const _=f.path.indexOf(s)+s.length;return f.path.slice(0,_)}function isAxis(d){return typeof d[0]!="string"}function castLabels(d){return d}async function loadMultiscales(d,s=""){const f=await openGroup(d,s),_=await f.attrs.asObject();let S=["0"],T=["t","c","z","y","x"];if("multiscales"in _){const{datasets:M,axes:P}=_.multiscales[0];S=M.map(H=>H.path),P&&(isAxis(P)?T=P.map(H=>H.name):T=P)}const F=S.map(M=>f.getItem(M));return{data:await Promise.all(F),rootAttrs:_,labels:T}}function guessTileSize(d){const s=isInterleaved$1(d.shape),[f,_]=d.chunks.slice(s?-3:-2),S=Math.min(f,_);return prevPowerOf2(S)}function getIndexer(d){if(new Set(d).size!==d.length)throw new Error("Labels must be unique");return f=>{if(Array.isArray(f))return[...f];const _=Array(d.length).fill(0);for(const[S,T]of Object.entries(f)){const F=d.indexOf(S);if(F===-1)throw new Error(`Invalid indexer key: ${S}`);_[F]=T}return _}}var __defProp=Object.defineProperty,__defNormalProp=(d,s,f)=>s in d?__defProp(d,s,{enumerable:!0,configurable:!0,writable:!0,value:f}):d[s]=f,__publicField=(d,s,f)=>(__defNormalProp(d,typeof s!="symbol"?s+"":s,f),f);const DTYPE_LOOKUP={u1:"Uint8",u2:"Uint16",u4:"Uint32",f4:"Float32",f8:"Float64",i1:"Int8",i2:"Int16",i4:"Int32"};function slice$1(d,s){return{start:d,stop:s,step:1,_slice:!0}}class BoundsCheckError extends Error{}class ZarrPixelSource{constructor(s,f,_){this.labels=f,this.tileSize=_,__publicField(this,"_data"),__publicField(this,"_indexer"),this._indexer=getIndexer(f),this._data=s}get shape(){return this._data.shape}get dtype(){const s=this._data.dtype.slice(1);if(!(s in DTYPE_LOOKUP))throw Error(`Zarr dtype not supported, got ${s}.`);return DTYPE_LOOKUP[s]}get _xIndex(){const s=isInterleaved$1(this._data.shape);return this._data.shape.length-(s?2:1)}_chunkIndex(s,{x:f,y:_}){const S=this._indexer(s);return S[this._xIndex]=f,S[this._xIndex-1]=_,S}_getSlices(s,f){const{height:_,width:S}=getImageSize(this),[T,F]=[s*this.tileSize,Math.min((s+1)*this.tileSize,S)],[M,P]=[f*this.tileSize,Math.min((f+1)*this.tileSize,_)];if(T===F||M===P)throw new BoundsCheckError("Tile slice is zero-sized.");if(T<0||M<0||F>S||P>_)throw new BoundsCheckError("Tile slice is out of bounds.");return[slice$1(T,F),slice$1(M,P)]}async _getRaw(s,f){const _=await this._data.getRaw(s,f);if(typeof _!="object")throw new Error("Expected object from getRaw");return _}async getRaster({selection:s,signal:f}){const _=this._chunkIndex(s,{x:null,y:null}),S=await this._getRaw(_,{storeOptions:{signal:f}}),{data:T,shape:[F,M]}=S;return{data:T,width:M,height:F}}async getTile(s){const{x:f,y:_,selection:S,signal:T}=s,[F,M]=this._getSlices(f,_),P=this._chunkIndex(S,{x:F,y:M}),H=await this._getRaw(P,{storeOptions:{signal:T}}),{data:J,shape:[K,oe]}=H;return{data:J,height:K,width:oe}}onTileError(s){if(!(s instanceof BoundsCheckError))throw s}}async function load$1(d,s){let f;typeof s!="string"?f=await s.text():f=s;const _=fromString(f)[0],{data:S}=await loadMultiscales(d,"0"),T=guessBioformatsLabels(S[0],_),F=guessTileSize(S[0]);return{data:S.map(P=>new ZarrPixelSource(P,T,F)),metadata:_}}async function load(d){const{data:s,rootAttrs:f,labels:_}=await loadMultiscales(d),S=guessTileSize(s[0]);return{data:s.map(F=>new ZarrPixelSource(F,_,S)),metadata:f}}async function loadBioformatsZarr(d,s={}){const f="METADATA.ome.xml",_="data.zarr";if(typeof d=="string"){const M=d.endsWith("/")?d.slice(0,-1):d,P=new HTTPStore(`${M}/${_}`,s),H=await fetch(`${M}/${f}`,s.fetchOptions);if(!H.ok)throw Error("No OME-XML metadata found for store.");return load$1(P,H)}const S=new Map;let T;for(const M of d)M.name===f?T=M:S.set(M.path,M);if(!T)throw Error("No OME-XML metadata found for store.");const F=new FileStore(S,getRootPrefix(d,_));return load$1(F,T)}async function loadOmeZarr(d,s={}){const f=new HTTPStore(d,s);if((s==null?void 0:s.type)!=="multiscales")throw Error("Only multiscale OME-Zarr is supported.");return load(f)}const DEFAULT_INDICES=new Uint32Array([0,2,1,0,3,2]),DEFAULT_TEX_COORDS=new Float32Array([0,1,0,0,1,0,1,1]);function createMesh(d,s){if(!s)return createQuad(d);const f=Math.max(Math.abs(d[0][0]-d[3][0]),Math.abs(d[1][0]-d[2][0])),_=Math.max(Math.abs(d[1][1]-d[0][1]),Math.abs(d[2][1]-d[3][1])),S=Math.ceil(f/s)+1,T=Math.ceil(_/s)+1,F=(S-1)*(T-1)*6,M=new Uint32Array(F),P=new Float32Array(S*T*2),H=new Float64Array(S*T*3);let J=0,K=0;for(let oe=0;oe<S;oe++){const se=oe/(S-1);for(let ae=0;ae<T;ae++){const ge=ae/(T-1),he=interpolateQuad(d,se,ge);H[J*3+0]=he[0],H[J*3+1]=he[1],H[J*3+2]=he[2]||0,P[J*2+0]=se,P[J*2+1]=1-ge,oe>0&&ae>0&&(M[K++]=J-T,M[K++]=J-T-1,M[K++]=J-1,M[K++]=J-T,M[K++]=J-1,M[K++]=J),J++}}return{vertexCount:F,positions:H,indices:M,texCoords:P}}function createQuad(d){const s=new Float64Array(12);for(let f=0;f<d.length;f++)s[f*3+0]=d[f][0],s[f*3+1]=d[f][1],s[f*3+2]=d[f][2]||0;return{vertexCount:6,positions:s,indices:DEFAULT_INDICES,texCoords:DEFAULT_TEX_COORDS}}function interpolateQuad(d,s,f){return lerp$6(lerp$6(d[0],d[1],f),lerp$6(d[3],d[2],f),s)}const vs$8=`#version 300 es
#define SHADER_NAME bitmap-layer-vertex-shader

in vec2 texCoords;
in vec3 positions;
in vec3 positions64Low;

out vec2 vTexCoord;
out vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,packUVsIntoRGB=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,fs$b=`#version 300 es
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

in vec2 vTexCoord;
in vec2 vTexPos;

out vec4 fragColor;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  if (transparentColor.a == 0.0) {
    return vec4(color, alpha);
  }
  float blendedAlpha = alpha + transparentColor.a * (1.0 - alpha);
  float highLightRatio = alpha / blendedAlpha;
  vec3 blendedRGB = mix(transparentColor.rgb, color, highLightRatio);
  return vec4(blendedRGB, blendedAlpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

${packUVsIntoRGB}

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture(bitmapTexture, uv);

  fragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(fragColor, geometry);

  if (bool(picking.isActive) && !bool(picking.isAttribute)) {
    // Since instance information is not used, we can use picking color for pixel index
    fragColor.rgb = packUVsIntoRGB(uv);
  }
}
`,defaultProps$l={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:COORDINATE_SYSTEM.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0,value:null}};let BitmapLayer$1=class extends Layer{getShaders(){return super.getShaders({vs:vs$8,fs:fs$b,modules:[project32,picking]})}initializeState(){const s=this.getAttributeManager();s.remove(["instancePickingColors"]);const f=!0;s.add({indices:{size:1,isIndexed:!0,update:_=>_.value=this.state.mesh.indices,noAlloc:f},positions:{size:3,type:"float64",fp64:this.use64bitPositions(),update:_=>_.value=this.state.mesh.positions,noAlloc:f},texCoords:{size:2,update:_=>_.value=this.state.mesh.texCoords,noAlloc:f}})}updateState({props:s,oldProps:f,changeFlags:_}){var T;const S=this.getAttributeManager();if(_.extensionsChanged&&((T=this.state.model)==null||T.destroy(),this.state.model=this._getModel(),S.invalidateAll()),s.bounds!==f.bounds){const F=this.state.mesh,M=this._createMesh();this.state.model.setVertexCount(M.vertexCount);for(const P in M)F&&F[P]!==M[P]&&S.invalidate(P);this.setState({mesh:M,...this._getCoordinateUniforms()})}else s._imageCoordinateSystem!==f._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(s){const{image:f}=this.props,_=s.info;if(!_.color||!f)return _.bitmap=null,_;const{width:S,height:T}=f;_.index=0;const F=unpackUVsFromRGB(_.color);return _.bitmap={size:{width:S,height:T},uv:F,pixel:[Math.floor(F[0]*S),Math.floor(F[1]*T)]},_}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(s){super._updateAutoHighlight({...s,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:s}=this.props;let f=s;return isRectangularBounds(s)&&(f=[[s[0],s[1]],[s[0],s[3]],[s[2],s[3]],[s[2],s[1]]]),createMesh(f,this.context.viewport.resolution)}_getModel(){return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),topology:"triangle-list",isInstanced:!1})}draw(s){const{uniforms:f,moduleParameters:_}=s,{model:S,coordinateConversion:T,bounds:F,disablePicking:M}=this.state,{image:P,desaturate:H,transparentColor:J,tintColor:K}=this.props;_.picking.isActive&&M||P&&S&&(S.setUniforms(f),S.setBindings({bitmapTexture:P}),S.setUniforms({desaturate:H,transparentColor:J.map(oe=>oe/255),tintColor:K.slice(0,3).map(oe=>oe/255),coordinateConversion:T,bounds:F}),S.draw(this.context.renderPass))}_getCoordinateUniforms(){const{LNGLAT:s,CARTESIAN:f,DEFAULT:_}=COORDINATE_SYSTEM;let{_imageCoordinateSystem:S}=this.props;if(S!==_){const{bounds:T}=this.props;if(!isRectangularBounds(T))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const F=this.context.viewport.resolution?s:f;if(S=S===s?s:f,S===s&&F===f)return{coordinateConversion:-1,bounds:T};if(S===f&&F===s){const M=lngLatToWorld$1([T[0],T[1]]),P=lngLatToWorld$1([T[2],T[3]]);return{coordinateConversion:1,bounds:[M[0],M[1],P[0],P[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}};BitmapLayer$1.layerName="BitmapLayer";BitmapLayer$1.defaultProps=defaultProps$l;function unpackUVsFromRGB(d){const[s,f,_]=d,S=(_&240)/256,T=(_&15)/16;return[(s+T)/256,(f+S)/256]}function isRectangularBounds(d){return Number.isFinite(d[0])}const vs$7=`#version 300 es
#define SHADER_NAME icon-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceSizes;
in float instanceAngles;
in vec4 instanceColors;
in vec3 instancePickingColors;
in vec4 instanceIconFrames;
in float instanceColorModes;
in vec2 instanceOffsets;
in vec2 instancePixelOffset;
uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;
out float vColorMode;
out vec4 vColor;
out vec2 vTextureCoords;
out vec2 uv;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = angle * PI / 180.0;
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vec2 iconSize = instanceIconFrames.zw;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
sizeMinPixels, sizeMaxPixels
);
float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
pixelOffset += instancePixelOffset;
pixelOffset.y *= -1.0;
if (billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vTextureCoords = mix(
instanceIconFrames.xy,
instanceIconFrames.xy + iconSize,
(positions.xy + 1.0) / 2.0
) / iconsTextureDim;
vColor = instanceColors;
DECKGL_FILTER_COLOR(vColor, geometry);
vColorMode = instanceColorModes;
}
`,fs$a=`#version 300 es
#define SHADER_NAME icon-layer-fragment-shader
precision highp float;
uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;
in float vColorMode;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec4 texColor = texture(iconsTexture, vTextureCoords);
vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
float a = texColor.a * opacity * vColor.a;
if (a < alphaCutoff) {
discard;
}
fragColor = vec4(color, a);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,DEFAULT_CANVAS_WIDTH=1024,DEFAULT_BUFFER$1=4,noop$5=()=>{},DEFAULT_SAMPLER_PARAMETERS={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},MISSING_ICON={x:0,y:0,width:0,height:0};function nextPowOfTwo$1(d){return Math.pow(2,Math.ceil(Math.log2(d)))}function resizeImage$1(d,s,f,_){const S=Math.min(f/s.width,_/s.height),T=Math.floor(s.width*S),F=Math.floor(s.height*S);return S===1?{data:s,width:T,height:F}:(d.canvas.height=F,d.canvas.width=T,d.clearRect(0,0,T,F),d.drawImage(s,0,0,s.width,s.height,0,0,T,F),{data:d.canvas,width:T,height:F})}function getIconId(d){return d&&(d.id||d.url)}function resizeTexture(d,s,f,_){const{width:S,height:T,device:F}=d,M=F.createTexture({format:"rgba8unorm",width:s,height:f,sampler:_}),P=F.createCommandEncoder();return P.copyTextureToTexture({source:d,destination:M,width:S,height:T}),P.finish(),d.destroy(),M}function buildRowMapping(d,s,f){for(let _=0;_<s.length;_++){const{icon:S,xOffset:T}=s[_],F=getIconId(S);d[F]={...S,x:T,y:f}}}function buildMapping$1({icons:d,buffer:s,mapping:f={},xOffset:_=0,yOffset:S=0,rowHeight:T=0,canvasWidth:F}){let M=[];for(let P=0;P<d.length;P++){const H=d[P],J=getIconId(H);if(!f[J]){const{height:K,width:oe}=H;_+oe+s>F&&(buildRowMapping(f,M,S),_=0,S=T+S+s,T=0,M=[]),M.push({icon:H,xOffset:_}),_=_+oe+s,T=Math.max(T,K)}}return M.length>0&&buildRowMapping(f,M,S),{mapping:f,rowHeight:T,xOffset:_,yOffset:S,canvasWidth:F,canvasHeight:nextPowOfTwo$1(T+S+s)}}function getDiffIcons(d,s,f){if(!d||!s)return null;f=f||{};const _={},{iterable:S,objectInfo:T}=createIterable(d);for(const F of S){T.index++;const M=s(F,T),P=getIconId(M);if(!M)throw new Error("Icon is missing.");if(!M.url)throw new Error("Icon url is missing.");!_[P]&&(!f[P]||M.url!==f[P].url)&&(_[P]={...M,source:F,sourceIndex:T.index})}return _}class IconManager{constructor(s,{onUpdate:f=noop$5,onError:_=noop$5}){this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._textureParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=DEFAULT_BUFFER$1,this._canvasWidth=DEFAULT_CANVAS_WIDTH,this._canvasHeight=0,this._canvas=null,this.device=s,this.onUpdate=f,this.onError=_}finalize(){var s;(s=this._texture)==null||s.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(s){const f=this._autoPacking?getIconId(s):s;return this._mapping[f]||MISSING_ICON}setProps({loadOptions:s,autoPacking:f,iconAtlas:_,iconMapping:S,textureParameters:T}){var F;s&&(this._loadOptions=s),f!==void 0&&(this._autoPacking=f),S&&(this._mapping=S),_&&((F=this._texture)==null||F.delete(),this._texture=null,this._externalTexture=_),T&&(this._textureParameters=T)}get isLoaded(){return this._pendingCount===0}packIcons(s,f){if(!this._autoPacking||typeof document>"u")return;const _=Object.values(getDiffIcons(s,f,this._mapping)||{});if(_.length>0){const{mapping:S,xOffset:T,yOffset:F,rowHeight:M,canvasHeight:P}=buildMapping$1({icons:_,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=M,this._mapping=S,this._xOffset=T,this._yOffset=F,this._canvasHeight=P,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",width:this._canvasWidth,height:this._canvasHeight,sampler:this._textureParameters||DEFAULT_SAMPLER_PARAMETERS})),this._texture.height!==this._canvasHeight&&(this._texture=resizeTexture(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||DEFAULT_SAMPLER_PARAMETERS)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(_)}}_loadIcons(s){const f=this._canvas.getContext("2d",{willReadFrequently:!0});for(const _ of s)this._pendingCount++,load$3(_.url,this._loadOptions).then(S=>{const T=getIconId(_),F=this._mapping[T],{x:M,y:P,width:H,height:J}=F,{data:K,width:oe,height:se}=resizeImage$1(f,S,H,J);this._texture.setSubImageData({data:K,x:M+(H-oe)/2,y:P+(J-se)/2,width:oe,height:se}),F.width=oe,F.height=se,this._texture.generateMipmap(),this.onUpdate()}).catch(S=>{this.onError({url:_.url,source:_.source,sourceIndex:_.sourceIndex,loadOptions:this._loadOptions,error:S})}).finally(()=>{this._pendingCount--})}}const DEFAULT_COLOR$5=[0,0,0,255],defaultProps$k={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:d=>d.position},getIcon:{type:"accessor",value:d=>d.icon},getColor:{type:"accessor",value:DEFAULT_COLOR$5},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}};class IconLayer extends Layer{getShaders(){return super.getShaders({vs:vs$7,fs:fs$a,modules:[project32,picking]})}initializeState(){this.state={iconManager:new IconManager(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:DEFAULT_COLOR$5},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(s){var se;super.updateState(s);const{props:f,oldProps:_,changeFlags:S}=s,T=this.getAttributeManager(),{iconAtlas:F,iconMapping:M,data:P,getIcon:H,textureParameters:J}=f,{iconManager:K}=this.state;if(typeof F=="string")return;const oe=F||this.internalState.isAsyncPropLoading("iconAtlas");K.setProps({loadOptions:f.loadOptions,autoPacking:!oe,iconAtlas:F,iconMapping:oe?M:null,textureParameters:J}),oe?_.iconMapping!==f.iconMapping&&T.invalidate("getIcon"):(S.dataChanged||S.updateTriggersChanged&&(S.updateTriggersChanged.all||S.updateTriggersChanged.getIcon))&&K.packIcons(P,H),S.extensionsChanged&&((se=this.state.model)==null||se.destroy(),this.state.model=this._getModel(),T.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(s){super.finalizeState(s),this.state.iconManager.finalize()}draw({uniforms:s}){const{sizeScale:f,sizeMinPixels:_,sizeMaxPixels:S,sizeUnits:T,billboard:F,alphaCutoff:M}=this.props,{iconManager:P}=this.state,H=P.getTexture();if(H){const J=this.state.model;J.setBindings({iconsTexture:H}),J.setUniforms(s),J.setUniforms({iconsTextureDim:[H.width,H.height],sizeUnits:UNIT[T],sizeScale:f,sizeMinPixels:_,sizeMaxPixels:S,billboard:F,alphaCutoff:M}),J.draw(this.context.renderPass)}}_getModel(){const s=[-1,-1,1,-1,-1,1,1,1];return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Geometry$1({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array(s)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(s){var _;const f=(_=this.getCurrentLayer())==null?void 0:_.props.onIconError;f?f(s):defaultLogger.error(s.error.message)()}getInstanceOffset(s){const{width:f,height:_,anchorX:S=f/2,anchorY:T=_/2}=this.state.iconManager.getIconMapping(s);return[f/2-S,_/2-T]}getInstanceColorMode(s){return this.state.iconManager.getIconMapping(s).mask?1:0}getInstanceIconFrame(s){const{x:f,y:_,width:S,height:T}=this.state.iconManager.getIconMapping(s);return[f,_,S,T]}}IconLayer.defaultProps=defaultProps$k;IconLayer.layerName="IconLayer";const vs$6=`#version 300 es
#define SHADER_NAME line-layer-vertex-shader
in vec3 positions;
in vec3 instanceSourcePositions;
in vec3 instanceTargetPositions;
in vec3 instanceSourcePositions64Low;
in vec3 instanceTargetPositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in float instanceWidths;
uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;
out vec4 vColor;
out vec2 uv;
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
return dir_screenspace * offset_direction * width / 2.0;
}
vec3 splitLine(vec3 a, vec3 b, float x) {
float t = (x - a.x) / (b.x - a.x);
return vec3(x, mix(a.yz, b.yz, t));
}
void main(void) {
geometry.worldPosition = instanceSourcePositions;
geometry.worldPositionAlt = instanceTargetPositions;
vec3 source_world = instanceSourcePositions;
vec3 target_world = instanceTargetPositions;
vec3 source_world_64low = instanceSourcePositions64Low;
vec3 target_world_64low = instanceTargetPositions64Low;
if (useShortestPath > 0.5 || useShortestPath < -0.5) {
source_world.x = mod(source_world.x + 180., 360.0) - 180.;
target_world.x = mod(target_world.x + 180., 360.0) - 180.;
float deltaLng = target_world.x - source_world.x;
if (deltaLng * useShortestPath > 180.) {
source_world.x += 360. * useShortestPath;
source_world = splitLine(source_world, target_world, 180. * useShortestPath);
source_world_64low = vec3(0.0);
} else if (deltaLng * useShortestPath < -180.) {
target_world.x += 360. * useShortestPath;
target_world = splitLine(source_world, target_world, 180. * useShortestPath);
target_world_64low = vec3(0.0);
} else if (useShortestPath < 0.) {
gl_Position = vec4(0.);
return;
}
}
vec4 source_commonspace;
vec4 target_commonspace;
vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
float segmentIndex = positions.x;
vec4 p = mix(source, target, segmentIndex);
geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
uv = positions.xy;
geometry.uv = uv;
geometry.pickingColor = instancePickingColors;
float widthPixels = clamp(
project_size_to_pixel(instanceWidths * widthScale, widthUnits),
widthMinPixels, widthMaxPixels
);
vec3 offset = vec3(
getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
0.0);
DECKGL_FILTER_SIZE(offset, geometry);
DECKGL_FILTER_GL_POSITION(p, geometry);
gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,fs$9=`#version 300 es
#define SHADER_NAME line-layer-fragment-shader
precision highp float;
in vec4 vColor;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,DEFAULT_COLOR$4=[0,0,0,255],defaultProps$j={getSourcePosition:{type:"accessor",value:d=>d.sourcePosition},getTargetPosition:{type:"accessor",value:d=>d.targetPosition},getColor:{type:"accessor",value:DEFAULT_COLOR$4},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class LineLayer extends Layer{getBounds(){var s;return(s=this.getAttributeManager())==null?void 0:s.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:vs$6,fs:fs$9,modules:[project32,picking]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(s){var f;super.updateState(s),s.changeFlags.extensionsChanged&&((f=this.state.model)==null||f.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:s}){const{widthUnits:f,widthScale:_,widthMinPixels:S,widthMaxPixels:T,wrapLongitude:F}=this.props,M=this.state.model;M.setUniforms(s),M.setUniforms({widthUnits:UNIT[f],widthScale:_,widthMinPixels:S,widthMaxPixels:T,useShortestPath:F?1:0}),M.draw(this.context.renderPass),F&&(M.setUniforms({useShortestPath:-1}),M.draw(this.context.renderPass))}_getModel(){const s=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Geometry$1({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(s)}}}),isInstanced:!0})}}LineLayer.layerName="LineLayer";LineLayer.defaultProps=defaultProps$j;const vs$5=`#version 300 es
#define SHADER_NAME scatterplot-layer-vertex-shader
in vec3 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceRadius;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;
out vec4 vFillColor;
out vec4 vLineColor;
out vec2 unitPosition;
out float innerUnitRadius;
out float outerRadiusPixels;
void main(void) {
geometry.worldPosition = instancePositions;
outerRadiusPixels = clamp(
project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
radiusMinPixels, radiusMaxPixels
);
float lineWidthPixels = clamp(
project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
lineWidthMinPixels, lineWidthMaxPixels
);
outerRadiusPixels += stroked * lineWidthPixels / 2.0;
float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
unitPosition = edgePadding * positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
if (billboard) {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = edgePadding * positions * outerRadiusPixels;
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,fs$8=`#version 300 es
#define SHADER_NAME scatterplot-layer-fragment-shader
precision highp float;
uniform bool filled;
uniform float stroked;
uniform bool antialiasing;
in vec4 vFillColor;
in vec4 vLineColor;
in vec2 unitPosition;
in float innerUnitRadius;
in float outerRadiusPixels;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition;
float distToCenter = length(unitPosition) * outerRadiusPixels;
float inCircle = antialiasing ?
smoothedge(distToCenter, outerRadiusPixels) :
step(distToCenter, outerRadiusPixels);
if (inCircle == 0.0) {
discard;
}
if (stroked > 0.5) {
float isLine = antialiasing ?
smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
step(innerUnitRadius * outerRadiusPixels, distToCenter);
if (filled) {
fragColor = mix(vFillColor, vLineColor, isLine);
} else {
if (isLine == 0.0) {
discard;
}
fragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
}
} else if (!filled) {
discard;
} else {
fragColor = vFillColor;
}
fragColor.a *= inCircle;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,DEFAULT_COLOR$3=[0,0,0,255],defaultProps$i={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:d=>d.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:DEFAULT_COLOR$3},getLineColor:{type:"accessor",value:DEFAULT_COLOR$3},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class ScatterplotLayer extends Layer{getShaders(){return super.getShaders({vs:vs$5,fs:fs$8,modules:[project32,picking]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(s){var f;super.updateState(s),s.changeFlags.extensionsChanged&&((f=this.state.model)==null||f.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:s}){const{radiusUnits:f,radiusScale:_,radiusMinPixels:S,radiusMaxPixels:T,stroked:F,filled:M,billboard:P,antialiasing:H,lineWidthUnits:J,lineWidthScale:K,lineWidthMinPixels:oe,lineWidthMaxPixels:se}=this.props,ae=this.state.model;ae.setUniforms(s),ae.setUniforms({stroked:F?1:0,filled:M,billboard:P,antialiasing:H,radiusUnits:UNIT[f],radiusScale:_,radiusMinPixels:S,radiusMaxPixels:T,lineWidthUnits:UNIT[J],lineWidthScale:K,lineWidthMinPixels:oe,lineWidthMaxPixels:se}),ae.draw(this.context.renderPass)}_getModel(){const s=[-1,-1,0,1,-1,0,-1,1,0,1,1,0];return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Geometry$1({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(s)}}}),isInstanced:!0})}}ScatterplotLayer.defaultProps=defaultProps$i;ScatterplotLayer.layerName="ScatterplotLayer";const WINDING={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function modifyPolygonWindingDirection(d,s,f={}){return getPolygonWindingDirection(d,f)!==s?(reversePolygon(d,f),!0):!1}function getPolygonWindingDirection(d,s={}){return Math.sign(getPolygonSignedArea(d,s))}const DimIndex={x:0,y:1,z:2};function getPolygonSignedArea(d,s={}){const{start:f=0,end:_=d.length,plane:S="xy"}=s,T=s.size||2;let F=0;const M=DimIndex[S[0]],P=DimIndex[S[1]];for(let H=f,J=_-T;H<_;H+=T)F+=(d[H+M]-d[J+M])*(d[H+P]+d[J+P]),J=H;return F/2}function reversePolygon(d,s){const{start:f=0,end:_=d.length,size:S=2}=s,T=(_-f)/S,F=Math.floor(T/2);for(let M=0;M<F;++M){const P=f+M*S,H=f+(T-1-M)*S;for(let J=0;J<S;++J){const K=d[P+J];d[P+J]=d[H+J],d[H+J]=K}}}function push(d,s){const f=s.length,_=d.length;if(_>0){let S=!0;for(let T=0;T<f;T++)if(d[_-f+T]!==s[T]){S=!1;break}if(S)return!1}for(let S=0;S<f;S++)d[_+S]=s[S];return!0}function copy$1(d,s){const f=s.length;for(let _=0;_<f;_++)d[_]=s[_]}function getPointAtIndex(d,s,f,_,S=[]){const T=_+s*f;for(let F=0;F<f;F++)S[F]=d[T+F];return S}function intersect$2(d,s,f,_,S=[]){let T,F;if(f&8)T=(_[3]-d[1])/(s[1]-d[1]),F=3;else if(f&4)T=(_[1]-d[1])/(s[1]-d[1]),F=1;else if(f&2)T=(_[2]-d[0])/(s[0]-d[0]),F=2;else if(f&1)T=(_[0]-d[0])/(s[0]-d[0]),F=0;else return null;for(let M=0;M<d.length;M++)S[M]=(F&1)===M?_[F]:T*(s[M]-d[M])+d[M];return S}function bitCode(d,s){let f=0;return d[0]<s[0]?f|=1:d[0]>s[2]&&(f|=2),d[1]<s[1]?f|=4:d[1]>s[3]&&(f|=8),f}function cutPolylineByGrid(d,s){const{size:f=2,broken:_=!1,gridResolution:S=10,gridOffset:T=[0,0],startIndex:F=0,endIndex:M=d.length}=s||{},P=(M-F)/f;let H=[];const J=[H],K=getPointAtIndex(d,0,f,F);let oe,se;const ae=getGridCell(K,S,T,[]),ge=[];push(H,K);for(let he=1;he<P;he++){for(oe=getPointAtIndex(d,he,f,F,oe),se=bitCode(oe,ae);se;){intersect$2(K,oe,se,ae,ge);const Be=bitCode(ge,ae);Be&&(intersect$2(K,ge,Be,ae,ge),se=Be),push(H,ge),copy$1(K,ge),moveToNeighborCell(ae,S,se),_&&H.length>f&&(H=[],J.push(H),push(H,K)),se=bitCode(oe,ae)}push(H,oe),copy$1(K,oe)}return _?J:J[0]}const TYPE_INSIDE=0,TYPE_BORDER=1;function cutPolygonByGrid(d,s=null,f){if(!d.length)return[];const{size:_=2,gridResolution:S=10,gridOffset:T=[0,0],edgeTypes:F=!1}=f||{},M=[],P=[{pos:d,types:F?new Array(d.length/_).fill(TYPE_BORDER):null,holes:s||[]}],H=[[],[]];let J=[];for(;P.length;){const{pos:K,types:oe,holes:se}=P.shift();getBoundingBox$1(K,_,se[0]||K.length,H),J=getGridCell(H[0],S,T,J);const ae=bitCode(H[1],J);if(ae){let ge=bisectPolygon(K,oe,_,0,se[0]||K.length,J,ae);const he={pos:ge[0].pos,types:ge[0].types,holes:[]},Be={pos:ge[1].pos,types:ge[1].types,holes:[]};P.push(he,Be);for(let pe=0;pe<se.length;pe++)ge=bisectPolygon(K,oe,_,se[pe],se[pe+1]||K.length,J,ae),ge[0]&&(he.holes.push(he.pos.length),he.pos=concatInPlace(he.pos,ge[0].pos),F&&(he.types=concatInPlace(he.types,ge[0].types))),ge[1]&&(Be.holes.push(Be.pos.length),Be.pos=concatInPlace(Be.pos,ge[1].pos),F&&(Be.types=concatInPlace(Be.types,ge[1].types)))}else{const ge={positions:K};F&&(ge.edgeTypes=oe),se.length&&(ge.holeIndices=se),M.push(ge)}}return M}function bisectPolygon(d,s,f,_,S,T,F){const M=(S-_)/f,P=[],H=[],J=[],K=[],oe=[];let se,ae,ge;const he=getPointAtIndex(d,M-1,f,_);let Be=Math.sign(F&8?he[1]-T[3]:he[0]-T[2]),pe=s&&s[M-1],be=0,Re=0;for(let Fe=0;Fe<M;Fe++)se=getPointAtIndex(d,Fe,f,_,se),ae=Math.sign(F&8?se[1]-T[3]:se[0]-T[2]),ge=s&&s[_/f+Fe],ae&&Be&&Be!==ae&&(intersect$2(he,se,F,T,oe),push(P,oe)&&J.push(pe),push(H,oe)&&K.push(pe)),ae<=0?(push(P,se)&&J.push(ge),be-=ae):J.length&&(J[J.length-1]=TYPE_INSIDE),ae>=0?(push(H,se)&&K.push(ge),Re+=ae):K.length&&(K[K.length-1]=TYPE_INSIDE),copy$1(he,se),Be=ae,pe=ge;return[be?{pos:P,types:s&&J}:null,Re?{pos:H,types:s&&K}:null]}function getGridCell(d,s,f,_){const S=Math.floor((d[0]-f[0])/s)*s+f[0],T=Math.floor((d[1]-f[1])/s)*s+f[1];return _[0]=S,_[1]=T,_[2]=S+s,_[3]=T+s,_}function moveToNeighborCell(d,s,f){f&8?(d[1]+=s,d[3]+=s):f&4?(d[1]-=s,d[3]-=s):f&2?(d[0]+=s,d[2]+=s):f&1&&(d[0]-=s,d[2]-=s)}function getBoundingBox$1(d,s,f,_){let S=1/0,T=-1/0,F=1/0,M=-1/0;for(let P=0;P<f;P+=s){const H=d[P],J=d[P+1];S=H<S?H:S,T=H>T?H:T,F=J<F?J:F,M=J>M?J:M}return _[0][0]=S,_[0][1]=F,_[1][0]=T,_[1][1]=M,_}function concatInPlace(d,s){for(let f=0;f<s.length;f++)d.push(s[f]);return d}const DEFAULT_MAX_LATITUDE=85.051129;function cutPolylineByMercatorBounds(d,s){const{size:f=2,startIndex:_=0,endIndex:S=d.length,normalize:T=!0}=s||{},F=d.slice(_,S);wrapLongitudesForShortestPath(F,f,0,S-_);const M=cutPolylineByGrid(F,{size:f,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(T)for(const P of M)shiftLongitudesIntoRange(P,f);return M}function cutPolygonByMercatorBounds(d,s=null,f){const{size:_=2,normalize:S=!0,edgeTypes:T=!1}=f||{};s=s||[];const F=[],M=[];let P=0,H=0;for(let K=0;K<=s.length;K++){const oe=s[K]||d.length,se=H,ae=findSplitIndex(d,_,P,oe);for(let ge=ae;ge<oe;ge++)F[H++]=d[ge];for(let ge=P;ge<ae;ge++)F[H++]=d[ge];wrapLongitudesForShortestPath(F,_,se,H),insertPoleVertices(F,_,se,H,f==null?void 0:f.maxLatitude),P=oe,M[K]=H}M.pop();const J=cutPolygonByGrid(F,M,{size:_,gridResolution:360,gridOffset:[-180,-180],edgeTypes:T});if(S)for(const K of J)shiftLongitudesIntoRange(K.positions,_);return J}function findSplitIndex(d,s,f,_){let S=-1,T=-1;for(let F=f+1;F<_;F+=s){const M=Math.abs(d[F]);M>S&&(S=M,T=F-1)}return T}function insertPoleVertices(d,s,f,_,S=DEFAULT_MAX_LATITUDE){const T=d[f],F=d[_-s];if(Math.abs(T-F)>180){const M=getPointAtIndex(d,0,s,f);M[0]+=Math.round((F-T)/360)*360,push(d,M),M[1]=Math.sign(M[1])*S,push(d,M),M[0]=T,push(d,M)}}function wrapLongitudesForShortestPath(d,s,f,_){let S=d[0],T;for(let F=f;F<_;F+=s){T=d[F];const M=T-S;(M>180||M<-180)&&(T-=Math.round(M/360)*360),d[F]=S=T}}function shiftLongitudesIntoRange(d,s){let f;const _=d.length/s;for(let T=0;T<_&&(f=d[T*s],(f+180)%360===0);T++);const S=-Math.round(f/360)*360;if(S!==0)for(let T=0;T<_;T++)d[T*s]+=S}function normalizePath(d,s,f,_){let S;if(Array.isArray(d[0])){const T=d.length*s;S=new Array(T);for(let F=0;F<d.length;F++)for(let M=0;M<s;M++)S[F*s+M]=d[F][M]||0}else S=d;return f?cutPolylineByGrid(S,{size:s,gridResolution:f}):_?cutPolylineByMercatorBounds(S,{size:s}):S}const START_CAP=1,END_CAP=2,INVALID=4;class PathTesselator extends Tesselator{constructor(s){super({...s,attributes:{positions:{size:3,padding:18,initialize:!0,type:s.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(s){return this.attributes[s]}getGeometryFromBuffer(s){return this.normalize?super.getGeometryFromBuffer(s):null}normalizeGeometry(s){return this.normalize?normalizePath(s,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):s}getGeometrySize(s){if(isCut$1(s)){let _=0;for(const S of s)_+=this.getGeometrySize(S);return _}const f=this.getPathLength(s);return f<2?0:this.isClosed(s)?f<3?0:f+2:f}updateGeometryAttributes(s,f){if(f.geometrySize!==0)if(s&&isCut$1(s))for(const _ of s){const S=this.getGeometrySize(_);f.geometrySize=S,this.updateGeometryAttributes(_,f),f.vertexStart+=S}else this._updateSegmentTypes(s,f),this._updatePositions(s,f)}_updateSegmentTypes(s,f){const _=this.attributes.segmentTypes,S=s?this.isClosed(s):!1,{vertexStart:T,geometrySize:F}=f;_.fill(0,T,T+F),S?(_[T]=INVALID,_[T+F-2]=INVALID):(_[T]+=START_CAP,_[T+F-2]+=END_CAP),_[T+F-1]=INVALID}_updatePositions(s,f){const{positions:_}=this.attributes;if(!_||!s)return;const{vertexStart:S,geometrySize:T}=f,F=new Array(3);for(let M=S,P=0;P<T;M++,P++)this.getPointOnPath(s,P,F),_[M*3]=F[0],_[M*3+1]=F[1],_[M*3+2]=F[2]}getPathLength(s){return s.length/this.positionSize}getPointOnPath(s,f,_=[]){const{positionSize:S}=this;f*S>=s.length&&(f+=1-s.length/S);const T=f*S;return _[0]=s[T],_[1]=s[T+1],_[2]=S===3&&s[T+2]||0,_}isClosed(s){if(!this.normalize)return!!this.opts.loop;const{positionSize:f}=this,_=s.length-f;return s[0]===s[_]&&s[1]===s[_+1]&&(f===2||s[2]===s[_+2])}}function isCut$1(d){return Array.isArray(d[0])}const vs$4=`#version 300 es
#define SHADER_NAME path-layer-vertex-shader
in vec2 positions;
in float instanceTypes;
in vec3 instanceStartPositions;
in vec3 instanceEndPositions;
in vec3 instanceLeftPositions;
in vec3 instanceRightPositions;
in vec3 instanceLeftPositions64Low;
in vec3 instanceStartPositions64Low;
in vec3 instanceEndPositions64Low;
in vec3 instanceRightPositions64Low;
in float instanceStrokeWidths;
in vec4 instanceColors;
in vec3 instancePickingColors;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;
uniform float opacity;
out vec4 vColor;
out vec2 vCornerOffset;
out float vMiterLength;
out vec2 vPathPosition;
out float vPathLength;
out float vJointType;
const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);
float flipIfTrue(bool flag) {
return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
vec2 width
) {
bool isEnd = positions.x > 0.0;
float sideOfPath = positions.y;
float isJoint = float(sideOfPath == 0.0);
vec3 deltaA3 = (currPoint - prevPoint);
vec3 deltaB3 = (nextPoint - currPoint);
mat3 rotationMatrix;
bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
if (needsRotation) {
deltaA3 = deltaA3 * rotationMatrix;
deltaB3 = deltaB3 * rotationMatrix;
}
vec2 deltaA = deltaA3.xy / width;
vec2 deltaB = deltaB3.xy / width;
float lenA = length(deltaA);
float lenB = length(deltaB);
vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);
vec2 perpA = vec2(-dirA.y, dirA.x);
vec2 perpB = vec2(-dirB.y, dirB.x);
vec2 tangent = dirA + dirB;
tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
vec2 miterVec = vec2(-tangent.y, tangent.x);
vec2 dir = isEnd ? dirA : dirB;
vec2 perp = isEnd ? perpA : perpB;
float L = isEnd ? lenA : lenB;
float sinHalfA = abs(dot(miterVec, perp));
float cosHalfA = abs(dot(dirA, miterVec));
float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
float cornerPosition = sideOfPath * turnDirection;
float miterSize = 1.0 / max(sinHalfA, EPSILON);
miterSize = mix(
min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
miterSize,
step(0.0, cornerPosition)
);
vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
* (sideOfPath + isJoint * turnDirection);
bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
bool isCap = isStartCap || isEndCap;
if (isCap) {
offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
vJointType = capType;
} else {
vJointType = jointType;
}
vPathLength = L;
vCornerOffset = offsetVec;
vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
vMiterLength = isCap ? isJoint : vMiterLength;
vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
vPathPosition = vec2(
dot(offsetFromStartOfPath, perp),
dot(offsetFromStartOfPath, dir)
);
geometry.uv = vPathPosition;
float isValid = step(instanceTypes, 3.5);
vec3 offset = vec3(offsetVec * width * isValid, 0.0);
if (needsRotation) {
offset = rotationMatrix * offset;
}
return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
if (position.w < EPSILON) {
float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
position = refPosition + (position - refPosition) * r;
}
}
void main() {
geometry.pickingColor = instancePickingColors;
vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
float isEnd = positions.x;
vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);
vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);
vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);
geometry.worldPosition = currPosition;
vec2 widthPixels = vec2(clamp(
project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
widthMinPixels, widthMaxPixels) / 2.0);
vec3 width;
if (billboard) {
vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);
clipLine(prevPositionScreen, currPositionScreen);
clipLine(nextPositionScreen, currPositionScreen);
clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));
width = vec3(widthPixels, 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(
prevPositionScreen.xyz / prevPositionScreen.w,
currPositionScreen.xyz / currPositionScreen.w,
nextPositionScreen.xyz / nextPositionScreen.w,
project_pixel_size_to_clipspace(width.xy)
);
DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
} else {
prevPosition = project_position(prevPosition, prevPosition64Low);
currPosition = project_position(currPosition, currPosition64Low);
nextPosition = project_position(nextPosition, nextPosition64Low);
width = vec3(project_pixel_size(widthPixels), 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
geometry.position = vec4(currPosition + offset, 1.0);
gl_Position = project_common_position_to_clipspace(geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,fs$7=`#version 300 es
#define SHADER_NAME path-layer-fragment-shader
precision highp float;
uniform float miterLimit;
in vec4 vColor;
in vec2 vCornerOffset;
in float vMiterLength;
in vec2 vPathPosition;
in float vPathLength;
in float vJointType;
out vec4 fragColor;
void main(void) {
geometry.uv = vPathPosition;
if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
discard;
}
if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
discard;
}
}
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,DEFAULT_COLOR$2=[0,0,0,255],defaultProps$h={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:d=>d.path},getColor:{type:"accessor",value:DEFAULT_COLOR$2},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},ATTRIBUTE_TRANSITION$1={enter:(d,s)=>s.length?s.subarray(s.length-d.length):d};class PathLayer extends Layer{getShaders(){return super.getShaders({vs:vs$4,fs:fs$7,modules:[project32,picking]})}get wrapLongitude(){return!1}getBounds(){var s;return(s=this.getAttributeManager())==null?void 0:s.getBounds(["vertexPositions"])}initializeState(){this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:ATTRIBUTE_TRANSITION$1,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:ATTRIBUTE_TRANSITION$1,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:ATTRIBUTE_TRANSITION$1,defaultValue:DEFAULT_COLOR$2},instancePickingColors:{size:4,type:"uint8",accessor:(_,{index:S,target:T})=>this.encodePickingColor(_&&_.__source?_.__source.index:S,T)}}),this.setState({pathTesselator:new PathTesselator({fp64:this.use64bitPositions()})})}updateState(s){var F;super.updateState(s);const{props:f,changeFlags:_}=s,S=this.getAttributeManager();if(_.dataChanged||_.updateTriggersChanged&&(_.updateTriggersChanged.all||_.updateTriggersChanged.getPath)){const{pathTesselator:M}=this.state,P=f.data.attributes||{};M.updateGeometry({data:f.data,geometryBuffer:P.getPath,buffers:P,normalize:!f._pathType,loop:f._pathType==="loop",getGeometry:f.getPath,positionFormat:f.positionFormat,wrapLongitude:f.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:_.dataChanged}),this.setState({numInstances:M.instanceCount,startIndices:M.vertexStarts}),_.dataChanged||S.invalidateAll()}_.extensionsChanged&&((F=this.state.model)==null||F.destroy(),this.state.model=this._getModel(),S.invalidateAll())}getPickingInfo(s){const f=super.getPickingInfo(s),{index:_}=f,S=this.props.data;return S[0]&&S[0].__source&&(f.object=S.find(T=>T.__source.index===_)),f}disablePickingIndex(s){const f=this.props.data;if(f[0]&&f[0].__source)for(let _=0;_<f.length;_++)f[_].__source.index===s&&this._disablePickingIndex(_);else super.disablePickingIndex(s)}draw({uniforms:s}){const{jointRounded:f,capRounded:_,billboard:S,miterLimit:T,widthUnits:F,widthScale:M,widthMinPixels:P,widthMaxPixels:H}=this.props,J=this.state.model;J.setUniforms(s),J.setUniforms({jointType:Number(f),capType:Number(_),billboard:S,widthUnits:UNIT[F],widthScale:M,miterLimit:T,widthMinPixels:P,widthMaxPixels:H}),J.draw(this.context.renderPass)}_getModel(){const s=[0,1,2,1,4,2,1,3,4,3,5,4],f=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Geometry$1({topology:"triangle-list",attributes:{indices:new Uint16Array(s),positions:{value:new Float32Array(f),size:2}}}),isInstanced:!0})}calculatePositions(s){const{pathTesselator:f}=this.state;s.startIndices=f.vertexStarts,s.value=f.get("positions")}calculateSegmentTypes(s){const{pathTesselator:f}=this.state;s.startIndices=f.vertexStarts,s.value=f.get("segmentTypes")}}PathLayer.defaultProps=defaultProps$h;PathLayer.layerName="PathLayer";var earcut$2={exports:{}};earcut$2.exports=earcut;earcut$2.exports.default=earcut;function earcut(d,s,f){f=f||2;var _=s&&s.length,S=_?s[0]*f:d.length,T=linkedList(d,0,S,f,!0),F=[];if(!T||T.next===T.prev)return F;var M,P,H,J,K,oe,se;if(_&&(T=eliminateHoles(d,s,T,f)),d.length>80*f){M=H=d[0],P=J=d[1];for(var ae=f;ae<S;ae+=f)K=d[ae],oe=d[ae+1],K<M&&(M=K),oe<P&&(P=oe),K>H&&(H=K),oe>J&&(J=oe);se=Math.max(H-M,J-P),se=se!==0?32767/se:0}return earcutLinked(T,F,f,M,P,se,0),F}function linkedList(d,s,f,_,S){var T,F;if(S===signedArea(d,s,f,_)>0)for(T=s;T<f;T+=_)F=insertNode(T,d[T],d[T+1],F);else for(T=f-_;T>=s;T-=_)F=insertNode(T,d[T],d[T+1],F);return F&&equals$1(F,F.next)&&(removeNode(F),F=F.next),F}function filterPoints(d,s){if(!d)return d;s||(s=d);var f=d,_;do if(_=!1,!f.steiner&&(equals$1(f,f.next)||area$2(f.prev,f,f.next)===0)){if(removeNode(f),f=s=f.prev,f===f.next)break;_=!0}else f=f.next;while(_||f!==s);return s}function earcutLinked(d,s,f,_,S,T,F){if(d){!F&&T&&indexCurve(d,_,S,T);for(var M=d,P,H;d.prev!==d.next;){if(P=d.prev,H=d.next,T?isEarHashed(d,_,S,T):isEar(d)){s.push(P.i/f|0),s.push(d.i/f|0),s.push(H.i/f|0),removeNode(d),d=H.next,M=H.next;continue}if(d=H,d===M){F?F===1?(d=cureLocalIntersections(filterPoints(d),s,f),earcutLinked(d,s,f,_,S,T,2)):F===2&&splitEarcut(d,s,f,_,S,T):earcutLinked(filterPoints(d),s,f,_,S,T,1);break}}}}function isEar(d){var s=d.prev,f=d,_=d.next;if(area$2(s,f,_)>=0)return!1;for(var S=s.x,T=f.x,F=_.x,M=s.y,P=f.y,H=_.y,J=S<T?S<F?S:F:T<F?T:F,K=M<P?M<H?M:H:P<H?P:H,oe=S>T?S>F?S:F:T>F?T:F,se=M>P?M>H?M:H:P>H?P:H,ae=_.next;ae!==s;){if(ae.x>=J&&ae.x<=oe&&ae.y>=K&&ae.y<=se&&pointInTriangle(S,M,T,P,F,H,ae.x,ae.y)&&area$2(ae.prev,ae,ae.next)>=0)return!1;ae=ae.next}return!0}function isEarHashed(d,s,f,_){var S=d.prev,T=d,F=d.next;if(area$2(S,T,F)>=0)return!1;for(var M=S.x,P=T.x,H=F.x,J=S.y,K=T.y,oe=F.y,se=M<P?M<H?M:H:P<H?P:H,ae=J<K?J<oe?J:oe:K<oe?K:oe,ge=M>P?M>H?M:H:P>H?P:H,he=J>K?J>oe?J:oe:K>oe?K:oe,Be=zOrder(se,ae,s,f,_),pe=zOrder(ge,he,s,f,_),be=d.prevZ,Re=d.nextZ;be&&be.z>=Be&&Re&&Re.z<=pe;){if(be.x>=se&&be.x<=ge&&be.y>=ae&&be.y<=he&&be!==S&&be!==F&&pointInTriangle(M,J,P,K,H,oe,be.x,be.y)&&area$2(be.prev,be,be.next)>=0||(be=be.prevZ,Re.x>=se&&Re.x<=ge&&Re.y>=ae&&Re.y<=he&&Re!==S&&Re!==F&&pointInTriangle(M,J,P,K,H,oe,Re.x,Re.y)&&area$2(Re.prev,Re,Re.next)>=0))return!1;Re=Re.nextZ}for(;be&&be.z>=Be;){if(be.x>=se&&be.x<=ge&&be.y>=ae&&be.y<=he&&be!==S&&be!==F&&pointInTriangle(M,J,P,K,H,oe,be.x,be.y)&&area$2(be.prev,be,be.next)>=0)return!1;be=be.prevZ}for(;Re&&Re.z<=pe;){if(Re.x>=se&&Re.x<=ge&&Re.y>=ae&&Re.y<=he&&Re!==S&&Re!==F&&pointInTriangle(M,J,P,K,H,oe,Re.x,Re.y)&&area$2(Re.prev,Re,Re.next)>=0)return!1;Re=Re.nextZ}return!0}function cureLocalIntersections(d,s,f){var _=d;do{var S=_.prev,T=_.next.next;!equals$1(S,T)&&intersects$1(S,_,_.next,T)&&locallyInside(S,T)&&locallyInside(T,S)&&(s.push(S.i/f|0),s.push(_.i/f|0),s.push(T.i/f|0),removeNode(_),removeNode(_.next),_=d=T),_=_.next}while(_!==d);return filterPoints(_)}function splitEarcut(d,s,f,_,S,T){var F=d;do{for(var M=F.next.next;M!==F.prev;){if(F.i!==M.i&&isValidDiagonal(F,M)){var P=splitPolygon(F,M);F=filterPoints(F,F.next),P=filterPoints(P,P.next),earcutLinked(F,s,f,_,S,T,0),earcutLinked(P,s,f,_,S,T,0);return}M=M.next}F=F.next}while(F!==d)}function eliminateHoles(d,s,f,_){var S=[],T,F,M,P,H;for(T=0,F=s.length;T<F;T++)M=s[T]*_,P=T<F-1?s[T+1]*_:d.length,H=linkedList(d,M,P,_,!1),H===H.next&&(H.steiner=!0),S.push(getLeftmost(H));for(S.sort(compareX),T=0;T<S.length;T++)f=eliminateHole(S[T],f);return f}function compareX(d,s){return d.x-s.x}function eliminateHole(d,s){var f=findHoleBridge(d,s);if(!f)return s;var _=splitPolygon(f,d);return filterPoints(_,_.next),filterPoints(f,f.next)}function findHoleBridge(d,s){var f=s,_=d.x,S=d.y,T=-1/0,F;do{if(S<=f.y&&S>=f.next.y&&f.next.y!==f.y){var M=f.x+(S-f.y)*(f.next.x-f.x)/(f.next.y-f.y);if(M<=_&&M>T&&(T=M,F=f.x<f.next.x?f:f.next,M===_))return F}f=f.next}while(f!==s);if(!F)return null;var P=F,H=F.x,J=F.y,K=1/0,oe;f=F;do _>=f.x&&f.x>=H&&_!==f.x&&pointInTriangle(S<J?_:T,S,H,J,S<J?T:_,S,f.x,f.y)&&(oe=Math.abs(S-f.y)/(_-f.x),locallyInside(f,d)&&(oe<K||oe===K&&(f.x>F.x||f.x===F.x&&sectorContainsSector(F,f)))&&(F=f,K=oe)),f=f.next;while(f!==P);return F}function sectorContainsSector(d,s){return area$2(d.prev,d,s.prev)<0&&area$2(s.next,d,d.next)<0}function indexCurve(d,s,f,_){var S=d;do S.z===0&&(S.z=zOrder(S.x,S.y,s,f,_)),S.prevZ=S.prev,S.nextZ=S.next,S=S.next;while(S!==d);S.prevZ.nextZ=null,S.prevZ=null,sortLinked(S)}function sortLinked(d){var s,f,_,S,T,F,M,P,H=1;do{for(f=d,d=null,T=null,F=0;f;){for(F++,_=f,M=0,s=0;s<H&&(M++,_=_.nextZ,!!_);s++);for(P=H;M>0||P>0&&_;)M!==0&&(P===0||!_||f.z<=_.z)?(S=f,f=f.nextZ,M--):(S=_,_=_.nextZ,P--),T?T.nextZ=S:d=S,S.prevZ=T,T=S;f=_}T.nextZ=null,H*=2}while(F>1);return d}function zOrder(d,s,f,_,S){return d=(d-f)*S|0,s=(s-_)*S|0,d=(d|d<<8)&16711935,d=(d|d<<4)&252645135,d=(d|d<<2)&858993459,d=(d|d<<1)&1431655765,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,d|s<<1}function getLeftmost(d){var s=d,f=d;do(s.x<f.x||s.x===f.x&&s.y<f.y)&&(f=s),s=s.next;while(s!==d);return f}function pointInTriangle(d,s,f,_,S,T,F,M){return(S-F)*(s-M)>=(d-F)*(T-M)&&(d-F)*(_-M)>=(f-F)*(s-M)&&(f-F)*(T-M)>=(S-F)*(_-M)}function isValidDiagonal(d,s){return d.next.i!==s.i&&d.prev.i!==s.i&&!intersectsPolygon(d,s)&&(locallyInside(d,s)&&locallyInside(s,d)&&middleInside(d,s)&&(area$2(d.prev,d,s.prev)||area$2(d,s.prev,s))||equals$1(d,s)&&area$2(d.prev,d,d.next)>0&&area$2(s.prev,s,s.next)>0)}function area$2(d,s,f){return(s.y-d.y)*(f.x-s.x)-(s.x-d.x)*(f.y-s.y)}function equals$1(d,s){return d.x===s.x&&d.y===s.y}function intersects$1(d,s,f,_){var S=sign(area$2(d,s,f)),T=sign(area$2(d,s,_)),F=sign(area$2(f,_,d)),M=sign(area$2(f,_,s));return!!(S!==T&&F!==M||S===0&&onSegment(d,f,s)||T===0&&onSegment(d,_,s)||F===0&&onSegment(f,d,_)||M===0&&onSegment(f,s,_))}function onSegment(d,s,f){return s.x<=Math.max(d.x,f.x)&&s.x>=Math.min(d.x,f.x)&&s.y<=Math.max(d.y,f.y)&&s.y>=Math.min(d.y,f.y)}function sign(d){return d>0?1:d<0?-1:0}function intersectsPolygon(d,s){var f=d;do{if(f.i!==d.i&&f.next.i!==d.i&&f.i!==s.i&&f.next.i!==s.i&&intersects$1(f,f.next,d,s))return!0;f=f.next}while(f!==d);return!1}function locallyInside(d,s){return area$2(d.prev,d,d.next)<0?area$2(d,s,d.next)>=0&&area$2(d,d.prev,s)>=0:area$2(d,s,d.prev)<0||area$2(d,d.next,s)<0}function middleInside(d,s){var f=d,_=!1,S=(d.x+s.x)/2,T=(d.y+s.y)/2;do f.y>T!=f.next.y>T&&f.next.y!==f.y&&S<(f.next.x-f.x)*(T-f.y)/(f.next.y-f.y)+f.x&&(_=!_),f=f.next;while(f!==d);return _}function splitPolygon(d,s){var f=new Node$3(d.i,d.x,d.y),_=new Node$3(s.i,s.x,s.y),S=d.next,T=s.prev;return d.next=s,s.prev=d,f.next=S,S.prev=f,_.next=f,f.prev=_,T.next=_,_.prev=T,_}function insertNode(d,s,f,_){var S=new Node$3(d,s,f);return _?(S.next=_.next,S.prev=_,_.next.prev=S,_.next=S):(S.prev=S,S.next=S),S}function removeNode(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function Node$3(d,s,f){this.i=d,this.x=s,this.y=f,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(d,s,f,_){var S=s&&s.length,T=S?s[0]*f:d.length,F=Math.abs(signedArea(d,0,T,f));if(S)for(var M=0,P=s.length;M<P;M++){var H=s[M]*f,J=M<P-1?s[M+1]*f:d.length;F-=Math.abs(signedArea(d,H,J,f))}var K=0;for(M=0;M<_.length;M+=3){var oe=_[M]*f,se=_[M+1]*f,ae=_[M+2]*f;K+=Math.abs((d[oe]-d[ae])*(d[se+1]-d[oe+1])-(d[oe]-d[se])*(d[ae+1]-d[oe+1]))}return F===0&&K===0?0:Math.abs((K-F)/F)};function signedArea(d,s,f,_){for(var S=0,T=s,F=f-_;T<f;T+=_)S+=(d[F]-d[T])*(d[T+1]+d[F+1]),F=T;return S}earcut.flatten=function(d){for(var s=d[0][0].length,f={vertices:[],holes:[],dimensions:s},_=0,S=0;S<d.length;S++){for(var T=0;T<d[S].length;T++)for(var F=0;F<s;F++)f.vertices.push(d[S][T][F]);S>0&&(_+=d[S-1].length,f.holes.push(_))}return f};var earcutExports=earcut$2.exports;const earcut$1=getDefaultExportFromCjs(earcutExports),OUTER_POLYGON_WINDING=WINDING.CLOCKWISE,HOLE_POLYGON_WINDING=WINDING.COUNTER_CLOCKWISE,windingOptions={isClosed:!0};function validate(d){if(d=d&&d.positions||d,!Array.isArray(d)&&!ArrayBuffer.isView(d))throw new Error("invalid polygon")}function getPositions(d){return"positions"in d?d.positions:d}function getHoleIndices(d){return"holeIndices"in d?d.holeIndices:null}function isNested(d){return Array.isArray(d[0])}function isSimple(d){return d.length>=1&&d[0].length>=2&&Number.isFinite(d[0][0])}function isNestedRingClosed(d){const s=d[0],f=d[d.length-1];return s[0]===f[0]&&s[1]===f[1]&&s[2]===f[2]}function isFlatRingClosed(d,s,f,_){for(let S=0;S<s;S++)if(d[f+S]!==d[_-s+S])return!1;return!0}function copyNestedRing(d,s,f,_,S){let T=s;const F=f.length;for(let M=0;M<F;M++)for(let P=0;P<_;P++)d[T++]=f[M][P]||0;if(!isNestedRingClosed(f))for(let M=0;M<_;M++)d[T++]=f[0][M]||0;return windingOptions.start=s,windingOptions.end=T,windingOptions.size=_,modifyPolygonWindingDirection(d,S,windingOptions),T}function copyFlatRing(d,s,f,_,S=0,T,F){T=T||f.length;const M=T-S;if(M<=0)return s;let P=s;for(let H=0;H<M;H++)d[P++]=f[S+H];if(!isFlatRingClosed(f,_,S,T))for(let H=0;H<_;H++)d[P++]=f[S+H];return windingOptions.start=s,windingOptions.end=P,windingOptions.size=_,modifyPolygonWindingDirection(d,F,windingOptions),P}function normalize$2(d,s){validate(d);const f=[],_=[];if("positions"in d){const{positions:S,holeIndices:T}=d;if(T){let F=0;for(let M=0;M<=T.length;M++)F=copyFlatRing(f,F,S,s,T[M-1],T[M],M===0?OUTER_POLYGON_WINDING:HOLE_POLYGON_WINDING),_.push(F);return _.pop(),{positions:f,holeIndices:_}}d=S}if(!isNested(d))return copyFlatRing(f,0,d,s,0,f.length,OUTER_POLYGON_WINDING),f;if(!isSimple(d)){let S=0;for(const[T,F]of d.entries())S=copyNestedRing(f,S,F,s,T===0?OUTER_POLYGON_WINDING:HOLE_POLYGON_WINDING),_.push(S);return _.pop(),{positions:f,holeIndices:_}}return copyNestedRing(f,0,d,s,OUTER_POLYGON_WINDING),f}function getPlaneArea(d,s,f){const _=d.length/3;let S=0;for(let T=0;T<_;T++){const F=(T+1)%_;S+=d[T*3+s]*d[F*3+f],S-=d[F*3+s]*d[T*3+f]}return Math.abs(S/2)}function permutePositions(d,s,f,_){const S=d.length/3;for(let T=0;T<S;T++){const F=T*3,M=d[F+0],P=d[F+1],H=d[F+2];d[F+s]=M,d[F+f]=P,d[F+_]=H}}function getSurfaceIndices(d,s,f,_){let S=getHoleIndices(d);S&&(S=S.map(M=>M/s));let T=getPositions(d);const F=_&&s===3;if(f){const M=T.length;T=T.slice();const P=[];for(let H=0;H<M;H+=s){P[0]=T[H],P[1]=T[H+1],F&&(P[2]=T[H+2]);const J=f(P);T[H]=J[0],T[H+1]=J[1],F&&(T[H+2]=J[2])}}if(F){const M=getPlaneArea(T,0,1),P=getPlaneArea(T,0,2),H=getPlaneArea(T,1,2);if(!M&&!P&&!H)return[];M>P&&M>H||(P>H?(f||(T=T.slice()),permutePositions(T,0,2,1)):(f||(T=T.slice()),permutePositions(T,2,0,1)))}return earcut$1(T,S,s)}class PolygonTesselator extends Tesselator{constructor(s){const{fp64:f,IndexType:_=Uint32Array}=s;super({...s,attributes:{positions:{size:3,type:f?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:_,size:1}}})}get(s){const{attributes:f}=this;return s==="indices"?f.indices&&f.indices.subarray(0,this.vertexCount):f[s]}updateGeometry(s){super.updateGeometry(s);const f=this.buffers.indices;if(f)this.vertexCount=(f.value||f).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(s){if(this.normalize){const f=normalize$2(s,this.positionSize);return this.opts.resolution?cutPolygonByGrid(getPositions(f),getHoleIndices(f),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?cutPolygonByMercatorBounds(getPositions(f),getHoleIndices(f),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):f}return s}getGeometrySize(s){if(isCut(s)){let f=0;for(const _ of s)f+=this.getGeometrySize(_);return f}return getPositions(s).length/this.positionSize}getGeometryFromBuffer(s){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(s):null}updateGeometryAttributes(s,f){if(s&&isCut(s))for(const _ of s){const S=this.getGeometrySize(_);f.geometrySize=S,this.updateGeometryAttributes(_,f),f.vertexStart+=S,f.indexStart=this.indexStarts[f.geometryIndex+1]}else{const _=s;this._updateIndices(_,f),this._updatePositions(_,f),this._updateVertexValid(_,f)}}_updateIndices(s,{geometryIndex:f,vertexStart:_,indexStart:S}){const{attributes:T,indexStarts:F,typedArrayManager:M}=this;let P=T.indices;if(!P||!s)return;let H=S;const J=getSurfaceIndices(s,this.positionSize,this.opts.preproject,this.opts.full3d);P=M.allocate(P,S+J.length,{copy:!0});for(let K=0;K<J.length;K++)P[H++]=J[K]+_;F[f+1]=S+J.length,T.indices=P}_updatePositions(s,{vertexStart:f,geometrySize:_}){const{attributes:{positions:S},positionSize:T}=this;if(!S||!s)return;const F=getPositions(s);for(let M=f,P=0;P<_;M++,P++){const H=F[P*T],J=F[P*T+1],K=T>2?F[P*T+2]:0;S[M*3]=H,S[M*3+1]=J,S[M*3+2]=K}}_updateVertexValid(s,{vertexStart:f,geometrySize:_}){const{positionSize:S}=this,T=this.attributes.vertexValid,F=s&&getHoleIndices(s);if(s&&s.edgeTypes?T.set(s.edgeTypes,f):T.fill(1,f,f+_),F)for(let M=0;M<F.length;M++)T[f+F[M]/S-1]=0;T[f+_-1]=0}}function isCut(d){return Array.isArray(d)&&d.length>0&&!Number.isFinite(d[0])}const main=`uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;
in vec4 fillColors;
in vec4 lineColors;
in vec3 pickingColors;
out vec4 vColor;
struct PolygonProps {
vec3 positions;
vec3 positions64Low;
vec3 normal;
float elevations;
};
vec3 project_offset_normal(vec3 vector) {
if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
return normalize(vector * project_uCommonUnitsPerWorldUnit);
}
return project_normal(vector);
}
void calculatePosition(PolygonProps props) {
vec3 pos = props.positions;
vec3 pos64Low = props.positions64Low;
vec3 normal = props.normal;
vec4 colors = isWireframe ? lineColors : fillColors;
geometry.worldPosition = props.positions;
geometry.pickingColor = pickingColors;
if (extruded) {
pos.z += props.elevations * elevationScale;
}
gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
if (extruded) {
#ifdef IS_SIDE_VERTEX
normal = project_offset_normal(normal);
#else
normal = project_normal(normal);
#endif
geometry.normal = normal;
vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);
vColor = vec4(lightColor, colors.a * opacity);
} else {
vColor = vec4(colors.rgb, colors.a * opacity);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,vsTop=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader
in vec3 vertexPositions;
in vec3 vertexPositions64Low;
in float elevations;
${main}
void main(void) {
PolygonProps props;
props.positions = vertexPositions;
props.positions64Low = vertexPositions64Low;
props.elevations = elevations;
props.normal = vec3(0.0, 0.0, 1.0);
calculatePosition(props);
}
`,vsSide=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX
in vec2 positions;
in vec3 vertexPositions;
in vec3 nextVertexPositions;
in vec3 vertexPositions64Low;
in vec3 nextVertexPositions64Low;
in float elevations;
in float instanceVertexValid;
${main}
void main(void) {
if(instanceVertexValid < 0.5){
gl_Position = vec4(0.);
return;
}
PolygonProps props;
vec3 pos;
vec3 pos64Low;
vec3 nextPos;
vec3 nextPos64Low;
#if RING_WINDING_ORDER_CW == 1
pos = vertexPositions;
pos64Low = vertexPositions64Low;
nextPos = nextVertexPositions;
nextPos64Low = nextVertexPositions64Low;
#else
pos = nextVertexPositions;
pos64Low = nextVertexPositions64Low;
nextPos = vertexPositions;
nextPos64Low = vertexPositions64Low;
#endif
props.positions = mix(pos, nextPos, positions.x);
props.positions64Low = mix(pos64Low, nextPos64Low, positions.x);
props.normal = vec3(
pos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),
nextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),
0.0);
props.elevations = elevations * positions.y;
calculatePosition(props);
}
`,fs$6=`#version 300 es
#define SHADER_NAME solid-polygon-layer-fragment-shader
precision highp float;
in vec4 vColor;
out vec4 fragColor;
void main(void) {
fragColor = vColor;
geometry.uv = vec2(0.);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,DEFAULT_COLOR$1=[0,0,0,255],defaultProps$g={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:d=>d.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:DEFAULT_COLOR$1},getLineColor:{type:"accessor",value:DEFAULT_COLOR$1},material:!0},ATTRIBUTE_TRANSITION={enter:(d,s)=>s.length?s.subarray(s.length-d.length):d};class SolidPolygonLayer extends Layer{getShaders(s){return super.getShaders({vs:s==="top"?vsTop:vsSide,fs:fs$6,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[project32,gouraudLighting,picking]})}get wrapLongitude(){return!1}getBounds(){var s;return(s=this.getAttributeManager())==null?void 0:s.getBounds(["vertexPositions"])}initializeState(){const{viewport:s}=this.context;let{coordinateSystem:f}=this.props;const{_full3d:_}=this.props;s.isGeospatial&&f===COORDINATE_SYSTEM.DEFAULT&&(f=COORDINATE_SYSTEM.LNGLAT);let S;f===COORDINATE_SYSTEM.LNGLAT&&(_?S=s.projectPosition.bind(s):S=s.projectFlat.bind(s)),this.setState({numInstances:0,polygonTesselator:new PolygonTesselator({preproject:S,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const T=this.getAttributeManager(),F=!0;T.remove(["instancePickingColors"]),T.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:F},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:ATTRIBUTE_TRANSITION,accessor:"getPolygon",update:this.calculatePositions,noAlloc:F,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:F},elevations:{size:1,stepMode:"dynamic",transition:ATTRIBUTE_TRANSITION,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:ATTRIBUTE_TRANSITION,accessor:"getFillColor",defaultValue:DEFAULT_COLOR$1},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:ATTRIBUTE_TRANSITION,accessor:"getLineColor",defaultValue:DEFAULT_COLOR$1},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(M,{index:P,target:H})=>this.encodePickingColor(M&&M.__source?M.__source.index:P,H)}})}getPickingInfo(s){const f=super.getPickingInfo(s),{index:_}=f,S=this.props.data;return S[0]&&S[0].__source&&(f.object=S.find(T=>T.__source.index===_)),f}disablePickingIndex(s){const f=this.props.data;if(f[0]&&f[0].__source)for(let _=0;_<f.length;_++)f[_].__source.index===s&&this._disablePickingIndex(_);else super.disablePickingIndex(s)}draw({uniforms:s}){const{extruded:f,filled:_,wireframe:S,elevationScale:T}=this.props,{topModel:F,sideModel:M,wireframeModel:P,polygonTesselator:H}=this.state,J={...s,extruded:!!f,elevationScale:T};P&&S&&(P.setInstanceCount(H.instanceCount-1),P.setUniforms(J),P.draw(this.context.renderPass)),M&&_&&(M.setInstanceCount(H.instanceCount-1),M.setUniforms(J),M.draw(this.context.renderPass)),F&&_&&(F.setVertexCount(H.vertexCount),F.setUniforms(J),F.draw(this.context.renderPass))}updateState(s){var M;super.updateState(s),this.updateGeometry(s);const{props:f,oldProps:_,changeFlags:S}=s,T=this.getAttributeManager();(S.extensionsChanged||f.filled!==_.filled||f.extruded!==_.extruded)&&((M=this.state.models)==null||M.forEach(P=>P.destroy()),this.setState(this._getModels()),T.invalidateAll())}updateGeometry({props:s,oldProps:f,changeFlags:_}){if(_.dataChanged||_.updateTriggersChanged&&(_.updateTriggersChanged.all||_.updateTriggersChanged.getPolygon)){const{polygonTesselator:T}=this.state,F=s.data.attributes||{};T.updateGeometry({data:s.data,normalize:s._normalize,geometryBuffer:F.getPolygon,buffers:F,getGeometry:s.getPolygon,positionFormat:s.positionFormat,wrapLongitude:s.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:_.dataChanged,full3d:s._full3d}),this.setState({numInstances:T.instanceCount,startIndices:T.vertexStarts}),_.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:s,filled:f,extruded:_}=this.props;let S,T,F;if(f){const M=this.getShaders("top");M.defines.NON_INSTANCED_MODEL=1;const P=this.getAttributeManager().getBufferLayouts({isInstanced:!1});S=new Model(this.context.device,{...M,id:`${s}-top`,topology:"triangle-list",uniforms:{isWireframe:!1},bufferLayout:P,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(_){const M=this.getAttributeManager().getBufferLayouts({isInstanced:!0});T=new Model(this.context.device,{...this.getShaders("side"),id:`${s}-side`,bufferLayout:M,uniforms:{isWireframe:!1},geometry:new Geometry$1({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),F=new Model(this.context.device,{...this.getShaders("side"),id:`${s}-wireframe`,bufferLayout:M,uniforms:{isWireframe:!0},geometry:new Geometry$1({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[T,F,S].filter(Boolean),topModel:S,sideModel:T,wireframeModel:F}}calculateIndices(s){const{polygonTesselator:f}=this.state;s.startIndices=f.indexStarts,s.value=f.get("indices")}calculatePositions(s){const{polygonTesselator:f}=this.state;s.startIndices=f.vertexStarts,s.value=f.get("positions")}calculateVertexValid(s){s.value=this.state.polygonTesselator.get("vertexValid")}}SolidPolygonLayer.defaultProps=defaultProps$g;SolidPolygonLayer.layerName="SolidPolygonLayer";function replaceInRange({data:d,getIndex:s,dataRange:f,replace:_}){const{startRow:S=0,endRow:T=1/0}=f,F=d.length;let M=F,P=F;for(let oe=0;oe<F;oe++){const se=s(d[oe]);if(M>oe&&se>=S&&(M=oe),se>=T){P=oe;break}}let H=M;const K=P-M!==_.length?d.slice(P):void 0;for(let oe=0;oe<_.length;oe++)d[H++]=_[oe];if(K){for(let oe=0;oe<K.length;oe++)d[H++]=K[oe];d.length=H}return{startRow:M,endRow:M+_.length}}const defaultLineColor=[0,0,0,255],defaultFillColor=[0,0,0,255],defaultProps$f={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:d=>d.polygon},getFillColor:{type:"accessor",value:defaultFillColor},getLineColor:{type:"accessor",value:defaultLineColor},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class PolygonLayer extends CompositeLayer{initializeState(){this.state={paths:[],pathsDiff:null},this.props.getLineDashArray&&defaultLogger.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:s}){const f=s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getPolygon);if(f&&Array.isArray(s.dataChanged)){const _=this.state.paths.slice(),S=s.dataChanged.map(T=>replaceInRange({data:_,getIndex:F=>F.__source.index,dataRange:T,replace:this._getPaths(T)}));this.setState({paths:_,pathsDiff:S})}else f&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(s={}){const{data:f,getPolygon:_,positionFormat:S,_normalize:T}=this.props,F=[],M=S==="XY"?2:3,{startRow:P,endRow:H}=s,{iterable:J,objectInfo:K}=createIterable(f,P,H);for(const oe of J){K.index++;let se=_(oe,K);T&&(se=normalize$2(se,M));const{holeIndices:ae}=se,ge=se.positions||se;if(ae)for(let he=0;he<=ae.length;he++){const Be=ge.slice(ae[he-1]||0,ae[he]||ge.length);F.push(this.getSubLayerRow({path:Be},oe,K.index))}else F.push(this.getSubLayerRow({path:ge},oe,K.index))}return F}renderLayers(){const{data:s,_dataDiff:f,stroked:_,filled:S,extruded:T,wireframe:F,_normalize:M,_windingOrder:P,elevationScale:H,transitions:J,positionFormat:K}=this.props,{lineWidthUnits:oe,lineWidthScale:se,lineWidthMinPixels:ae,lineWidthMaxPixels:ge,lineJointRounded:he,lineMiterLimit:Be,lineDashJustified:pe}=this.props,{getFillColor:be,getLineColor:Re,getLineWidth:Fe,getLineDashArray:Me,getElevation:ve,getPolygon:At,updateTriggers:Ct,material:Rt}=this.props,{paths:It,pathsDiff:xt}=this.state,wt=this.getSubLayerClass("fill",SolidPolygonLayer),Ft=this.getSubLayerClass("stroke",PathLayer),jt=this.shouldRenderSubLayer("fill",It)&&new wt({_dataDiff:f,extruded:T,elevationScale:H,filled:S,wireframe:F,_normalize:M,_windingOrder:P,getElevation:ve,getFillColor:be,getLineColor:T&&F?Re:defaultLineColor,material:Rt,transitions:J},this.getSubLayerProps({id:"fill",updateTriggers:Ct&&{getPolygon:Ct.getPolygon,getElevation:Ct.getElevation,getFillColor:Ct.getFillColor,lineColors:T&&F,getLineColor:Ct.getLineColor}}),{data:s,positionFormat:K,getPolygon:At}),ta=!T&&_&&this.shouldRenderSubLayer("stroke",It)&&new Ft({_dataDiff:xt&&(()=>xt),widthUnits:oe,widthScale:se,widthMinPixels:ae,widthMaxPixels:ge,jointRounded:he,miterLimit:Be,dashJustified:pe,_pathType:"loop",transitions:J&&{getWidth:J.getLineWidth,getColor:J.getLineColor,getPath:J.getPolygon},getColor:this.getSubLayerAccessor(Re),getWidth:this.getSubLayerAccessor(Fe),getDashArray:this.getSubLayerAccessor(Me)},this.getSubLayerProps({id:"stroke",updateTriggers:Ct&&{getWidth:Ct.getLineWidth,getColor:Ct.getLineColor,getDashArray:Ct.getLineDashArray}}),{data:It,positionFormat:K,getPath:Qn=>Qn.path});return[!T&&jt,ta,T&&jt]}}PolygonLayer.layerName="PolygonLayer";PolygonLayer.defaultProps=defaultProps$f;function binaryToFeatureForAccesor(d,s){if(!d)return null;const f="startIndices"in d?d.startIndices[s]:s,_=d.featureIds.value[f];return f!==-1?getPropertiesForIndex(d,_,f):null}function getPropertiesForIndex(d,s,f){const _={properties:{...d.properties[s]}};for(const S in d.numericProps)_.properties[S]=d.numericProps[S].value[f];return _}function calculatePickingColors(d,s){const f={points:null,lines:null,polygons:null};for(const _ in f){const S=d[_].globalFeatureIds.value;f[_]=new Uint8ClampedArray(S.length*3);const T=[];for(let F=0;F<S.length;F++)s(S[F],T),f[_][F*3+0]=T[0],f[_][F*3+1]=T[1],f[_][F*3+2]=T[2]}return f}const fs$5=`#version 300 es
#define SHADER_NAME multi-icon-layer-fragment-shader
precision highp float;
uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float sdfBuffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
if (!bool(picking.isActive)) {
float alpha = texture(iconsTexture, vTextureCoords).a;
vec4 color = vColor;
if (sdf) {
float distance = alpha;
alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);
if (outlineBuffer > 0.0) {
float inFill = alpha;
float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
color = mix(outlineColor, vColor, inFill);
alpha = inBorder;
}
}
float a = alpha * color.a;
if (a < alphaCutoff) {
discard;
}
fragColor = vec4(color.rgb, a * opacity);
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,DEFAULT_BUFFER=192/256,EMPTY_ARRAY=[],defaultProps$e={getIconOffsets:{type:"accessor",value:d=>d.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class MultiIconLayer extends IconLayer{getShaders(){return{...super.getShaders(),fs:fs$5}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:"uint8",size:3,accessor:(f,{index:_,target:S})=>this.encodePickingColor(_,S)}})}updateState(s){super.updateState(s);const{props:f,oldProps:_}=s;let{outlineColor:S}=f;S!==_.outlineColor&&(S=S.map(T=>T/255),S[3]=Number.isFinite(S[3])?S[3]:1,this.setState({outlineColor:S})),!f.sdf&&f.outlineWidth&&defaultLogger.warn(`${this.id}: fontSettings.sdf is required to render outline`)()}draw(s){const{sdf:f,smoothing:_,outlineWidth:S}=this.props,{outlineColor:T}=this.state,F=S?Math.max(_,DEFAULT_BUFFER*(1-S)):-1;if(s.uniforms={...s.uniforms,sdfBuffer:DEFAULT_BUFFER,outlineBuffer:F,gamma:_,sdf:!!f,outlineColor:T},super.draw(s),f&&S){const{iconManager:M}=this.state,P=M.getTexture(),H=this.state.model;P&&(H.setUniforms({outlineBuffer:DEFAULT_BUFFER}),H.draw(this.context.renderPass))}}getInstanceOffset(s){return s?Array.from(s).flatMap(f=>super.getInstanceOffset(f)):EMPTY_ARRAY}getInstanceColorMode(s){return 1}getInstanceIconFrame(s){return s?Array.from(s).flatMap(f=>super.getInstanceIconFrame(f)):EMPTY_ARRAY}}MultiIconLayer.defaultProps=defaultProps$e;MultiIconLayer.layerName="MultiIconLayer";const INF=1e20;class TinySDF{constructor({fontSize:s=24,buffer:f=3,radius:_=8,cutoff:S=.25,fontFamily:T="sans-serif",fontWeight:F="normal",fontStyle:M="normal"}={}){this.buffer=f,this.cutoff=S,this.radius=_;const P=this.size=s+f*4,H=this._createCanvas(P),J=this.ctx=H.getContext("2d",{willReadFrequently:!0});J.font=`${M} ${F} ${s}px ${T}`,J.textBaseline="alphabetic",J.textAlign="left",J.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(s){const f=document.createElement("canvas");return f.width=f.height=s,f}draw(s){const{width:f,actualBoundingBoxAscent:_,actualBoundingBoxDescent:S,actualBoundingBoxLeft:T,actualBoundingBoxRight:F}=this.ctx.measureText(s),M=Math.ceil(_),P=0,H=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(F-T))),J=Math.min(this.size-this.buffer,M+Math.ceil(S)),K=H+2*this.buffer,oe=J+2*this.buffer,se=Math.max(K*oe,0),ae=new Uint8ClampedArray(se),ge={data:ae,width:K,height:oe,glyphWidth:H,glyphHeight:J,glyphTop:M,glyphLeft:P,glyphAdvance:f};if(H===0||J===0)return ge;const{ctx:he,buffer:Be,gridInner:pe,gridOuter:be}=this;he.clearRect(Be,Be,H,J),he.fillText(s,Be,Be+M);const Re=he.getImageData(Be,Be,H,J);be.fill(INF,0,se),pe.fill(0,0,se);for(let Fe=0;Fe<J;Fe++)for(let Me=0;Me<H;Me++){const ve=Re.data[4*(Fe*H+Me)+3]/255;if(ve===0)continue;const At=(Fe+Be)*K+Me+Be;if(ve===1)be[At]=0,pe[At]=INF;else{const Ct=.5-ve;be[At]=Ct>0?Ct*Ct:0,pe[At]=Ct<0?Ct*Ct:0}}edt(be,0,0,K,oe,K,this.f,this.v,this.z),edt(pe,Be,Be,H,J,K,this.f,this.v,this.z);for(let Fe=0;Fe<se;Fe++){const Me=Math.sqrt(be[Fe])-Math.sqrt(pe[Fe]);ae[Fe]=Math.round(255-255*(Me/this.radius+this.cutoff))}return ge}}function edt(d,s,f,_,S,T,F,M,P){for(let H=s;H<s+_;H++)edt1d(d,f*T+H,T,S,F,M,P);for(let H=f;H<f+S;H++)edt1d(d,H*T+s,1,_,F,M,P)}function edt1d(d,s,f,_,S,T,F){T[0]=0,F[0]=-INF,F[1]=INF,S[0]=d[s];for(let M=1,P=0,H=0;M<_;M++){S[M]=d[s+M*f];const J=M*M;do{const K=T[P];H=(S[M]-S[K]+J-K*K)/(M-K)/2}while(H<=F[P]&&--P>-1);P++,T[P]=M,F[P]=H,F[P+1]=INF}for(let M=0,P=0;M<_;M++){for(;F[P+1]<M;)P++;const H=T[P],J=M-H;d[s+M*f]=S[H]+J*J}}const MISSING_CHAR_WIDTH=32,SINGLE_LINE=[];function nextPowOfTwo(d){return Math.pow(2,Math.ceil(Math.log2(d)))}function buildMapping({characterSet:d,getFontWidth:s,fontHeight:f,buffer:_,maxCanvasWidth:S,mapping:T={},xOffset:F=0,yOffset:M=0}){let P=0,H=F;const J=f+_*2;for(const K of d)if(!T[K]){const oe=s(K);H+oe+_*2>S&&(H=0,P++),T[K]={x:H+_,y:M+P*J+_,width:oe,height:J,layoutWidth:oe,layoutHeight:f},H+=oe+_*2}return{mapping:T,xOffset:H,yOffset:M+P*J,canvasHeight:nextPowOfTwo(M+(P+1)*J)}}function getTextWidth(d,s,f,_){var T;let S=0;for(let F=s;F<f;F++){const M=d[F];S+=((T=_[M])==null?void 0:T.layoutWidth)||0}return S}function breakAll(d,s,f,_,S,T){let F=s,M=0;for(let P=s;P<f;P++){const H=getTextWidth(d,P,P+1,S);M+H>_&&(F<P&&T.push(P),F=P,M=0),M+=H}return M}function breakWord(d,s,f,_,S,T){let F=s,M=s,P=s,H=0;for(let J=s;J<f;J++)if((d[J]===" "||d[J+1]===" "||J+1===f)&&(P=J+1),P>M){let K=getTextWidth(d,M,P,S);H+K>_&&(F<M&&(T.push(M),F=M,H=0),K>_&&(K=breakAll(d,M,P,_,S,T),F=T[T.length-1])),M=P,H+=K}return H}function autoWrapping(d,s,f,_,S=0,T){T===void 0&&(T=d.length);const F=[];return s==="break-all"?breakAll(d,S,T,f,_,F):breakWord(d,S,T,f,_,F),F}function transformRow(d,s,f,_,S,T){let F=0,M=0;for(let P=s;P<f;P++){const H=d[P],J=_[H];J?(M||(M=J.layoutHeight),S[P]=F+J.layoutWidth/2,F+=J.layoutWidth):(defaultLogger.warn(`Missing character: ${H} (${H.codePointAt(0)})`)(),S[P]=F,F+=MISSING_CHAR_WIDTH)}T[0]=F,T[1]=M}function transformParagraph(d,s,f,_,S){var he;const T=Array.from(d),F=T.length,M=new Array(F),P=new Array(F),H=new Array(F),J=(f==="break-word"||f==="break-all")&&isFinite(_)&&_>0,K=[0,0],oe=[0,0];let se=0,ae=0,ge=0;for(let Be=0;Be<=F;Be++){const pe=T[Be];if((pe===`
`||Be===F)&&(ge=Be),ge>ae){const be=J?autoWrapping(T,f,_,S,ae,ge):SINGLE_LINE;for(let Re=0;Re<=be.length;Re++){const Fe=Re===0?ae:be[Re-1],Me=Re<be.length?be[Re]:ge;transformRow(T,Fe,Me,S,M,oe);for(let ve=Fe;ve<Me;ve++){const At=T[ve],Ct=((he=S[At])==null?void 0:he.layoutOffsetY)||0;P[ve]=se+oe[1]/2+Ct,H[ve]=oe[0]}se=se+oe[1]*s,K[0]=Math.max(K[0],oe[0])}ae=ge}pe===`
`&&(M[ae]=0,P[ae]=0,H[ae]=0,ae++)}return K[1]=se,{x:M,y:P,rowWidth:H,size:K}}function getTextFromBuffer({value:d,length:s,stride:f,offset:_,startIndices:S,characterSet:T}){const F=d.BYTES_PER_ELEMENT,M=f?f/F:1,P=_?_/F:0,H=S[s]||Math.ceil((d.length-P)/M),J=T&&new Set,K=new Array(s);let oe=d;if(M>1||P>0){const se=d.constructor;oe=new se(H);for(let ae=0;ae<H;ae++)oe[ae]=d[ae*M+P]}for(let se=0;se<s;se++){const ae=S[se],ge=S[se+1]||H,he=oe.subarray(ae,ge);K[se]=String.fromCodePoint.apply(null,he),J&&he.forEach(J.add,J)}if(J)for(const se of J)T.add(String.fromCodePoint(se));return{texts:K,characterCount:H}}class LRUCache{constructor(s=5){this._cache={},this._order=[],this.limit=s}get(s){const f=this._cache[s];return f&&(this._deleteOrder(s),this._appendOrder(s)),f}set(s,f){this._cache[s]?(this.delete(s),this._cache[s]=f,this._appendOrder(s)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[s]=f,this._appendOrder(s))}delete(s){this._cache[s]&&(delete this._cache[s],this._deleteOrder(s))}_deleteOrder(s){const f=this._order.indexOf(s);f>=0&&this._order.splice(f,1)}_appendOrder(s){this._order.push(s)}}function getDefaultCharacterSet(){const d=[];for(let s=32;s<128;s++)d.push(String.fromCharCode(s));return d}const DEFAULT_FONT_SETTINGS={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:getDefaultCharacterSet(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},MAX_CANVAS_WIDTH=1024,BASELINE_SCALE=.9,HEIGHT_SCALE=1.2,CACHE_LIMIT=3;let cache=new LRUCache(CACHE_LIMIT);function getNewChars(d,s){let f;typeof s=="string"?f=new Set(Array.from(s)):f=new Set(s);const _=cache.get(d);if(!_)return f;for(const S in _.mapping)f.has(S)&&f.delete(S);return f}function populateAlphaChannel(d,s){for(let f=0;f<d.length;f++)s.data[4*f+3]=d[f]}function setTextStyle(d,s,f,_){d.font=`${_} ${f}px ${s}`,d.fillStyle="#000",d.textBaseline="alphabetic",d.textAlign="left"}function setFontAtlasCacheLimit(d){defaultLogger.assert(Number.isFinite(d)&&d>=CACHE_LIMIT,"Invalid cache limit"),cache=new LRUCache(d)}class FontAtlasManager{constructor(){this.props={...DEFAULT_FONT_SETTINGS}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:s,buffer:f}=this.props;return(s*HEIGHT_SCALE+f*2)/s}setProps(s={}){Object.assign(this.props,s),this._key=this._getKey();const f=getNewChars(this._key,this.props.characterSet),_=cache.get(this._key);if(_&&f.size===0){this._atlas!==_&&(this._atlas=_);return}const S=this._generateFontAtlas(f,_);this._atlas=S,cache.set(this._key,S)}_generateFontAtlas(s,f){const{fontFamily:_,fontWeight:S,fontSize:T,buffer:F,sdf:M,radius:P,cutoff:H}=this.props;let J=f&&f.data;J||(J=document.createElement("canvas"),J.width=MAX_CANVAS_WIDTH);const K=J.getContext("2d",{willReadFrequently:!0});setTextStyle(K,_,T,S);const{mapping:oe,canvasHeight:se,xOffset:ae,yOffset:ge}=buildMapping({getFontWidth:he=>K.measureText(he).width,fontHeight:T*HEIGHT_SCALE,buffer:F,characterSet:s,maxCanvasWidth:MAX_CANVAS_WIDTH,...f&&{mapping:f.mapping,xOffset:f.xOffset,yOffset:f.yOffset}});if(J.height!==se){const he=K.getImageData(0,0,J.width,J.height);J.height=se,K.putImageData(he,0,0)}if(setTextStyle(K,_,T,S),M){const he=new TinySDF({fontSize:T,buffer:F,radius:P,cutoff:H,fontFamily:_,fontWeight:`${S}`});for(const Be of s){const{data:pe,width:be,height:Re,glyphTop:Fe}=he.draw(Be);oe[Be].width=be,oe[Be].layoutOffsetY=T*BASELINE_SCALE-Fe;const Me=K.createImageData(be,Re);populateAlphaChannel(pe,Me),K.putImageData(Me,oe[Be].x,oe[Be].y)}}else for(const he of s)K.fillText(he,oe[he].x,oe[he].y+F+T*BASELINE_SCALE);return{xOffset:ae,yOffset:ge,mapping:oe,data:J,width:J.width,height:J.height}}_getKey(){const{fontFamily:s,fontWeight:f,fontSize:_,buffer:S,sdf:T,radius:F,cutoff:M}=this.props;return T?`${s} ${f} ${_} ${S} ${F} ${M}`:`${s} ${f} ${_} ${S}`}}const vs$3=`#version 300 es
#define SHADER_NAME text-background-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceRects;
in float instanceSizes;
in float instanceAngles;
in vec2 instancePixelOffsets;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;
out vec4 vFillColor;
out vec4 vLineColor;
out float vLineWidth;
out vec2 uv;
out vec2 dimensions;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = radians(angle);
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vLineWidth = instanceLineWidths;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
sizeMinPixels, sizeMaxPixels
);
dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;
vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
pixelOffset += instancePixelOffsets;
pixelOffset.y *= -1.0;
if (billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,fs$4=`#version 300 es
#define SHADER_NAME text-background-layer-fragment-shader
precision highp float;
uniform bool stroked;
in vec4 vFillColor;
in vec4 vLineColor;
in float vLineWidth;
in vec2 uv;
in vec2 dimensions;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec2 pixelPosition = uv * dimensions;
if (stroked) {
float distToEdge = min(
min(pixelPosition.x, dimensions.x - pixelPosition.x),
min(pixelPosition.y, dimensions.y - pixelPosition.y)
);
float isBorder = smoothedge(distToEdge, vLineWidth);
fragColor = mix(vFillColor, vLineColor, isBorder);
} else {
fragColor = vFillColor;
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,defaultProps$d={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:d=>d.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class TextBackgroundLayer extends Layer{getShaders(){return super.getShaders({vs:vs$3,fs:fs$4,modules:[project32,picking]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(s){var _;super.updateState(s);const{changeFlags:f}=s;f.extensionsChanged&&((_=this.state.model)==null||_.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:s}){const{billboard:f,sizeScale:_,sizeUnits:S,sizeMinPixels:T,sizeMaxPixels:F,getLineWidth:M}=this.props;let{padding:P}=this.props;P.length<4&&(P=[P[0],P[1],P[0],P[1]]);const H=this.state.model;H.setUniforms(s),H.setUniforms({billboard:f,stroked:!!M,padding:P,sizeUnits:UNIT[S],sizeScale:_,sizeMinPixels:T,sizeMaxPixels:F}),H.draw(this.context.renderPass)}_getModel(){const s=[0,0,1,0,1,1,0,1];return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Geometry$1({topology:"triangle-fan-webgl",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(s)}}}),isInstanced:!0})}}TextBackgroundLayer.defaultProps=defaultProps$d;TextBackgroundLayer.layerName="TextBackgroundLayer";const TEXT_ANCHOR={start:1,middle:0,end:-1},ALIGNMENT_BASELINE={top:1,center:0,bottom:-1},DEFAULT_COLOR=[0,0,0,255],DEFAULT_LINE_HEIGHT=1,defaultProps$c={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:DEFAULT_COLOR},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:DEFAULT_FONT_SETTINGS.characterSet},fontFamily:DEFAULT_FONT_SETTINGS.fontFamily,fontWeight:DEFAULT_FONT_SETTINGS.fontWeight,lineHeight:DEFAULT_LINE_HEIGHT,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:DEFAULT_COLOR},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:d=>d.text},getPosition:{type:"accessor",value:d=>d.position},getColor:{type:"accessor",value:DEFAULT_COLOR},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class TextLayer extends CompositeLayer{constructor(){super(...arguments),this.getBoundingRect=(s,f)=>{let{size:[_,S]}=this.transformParagraph(s,f);const{fontSize:T}=this.state.fontAtlasManager.props;_/=T,S/=T;const{getTextAnchor:F,getAlignmentBaseline:M}=this.props,P=TEXT_ANCHOR[typeof F=="function"?F(s,f):F],H=ALIGNMENT_BASELINE[typeof M=="function"?M(s,f):M];return[(P-1)*_/2,(H-1)*S/2,_,S]},this.getIconOffsets=(s,f)=>{const{getTextAnchor:_,getAlignmentBaseline:S}=this.props,{x:T,y:F,rowWidth:M,size:[P,H]}=this.transformParagraph(s,f),J=TEXT_ANCHOR[typeof _=="function"?_(s,f):_],K=ALIGNMENT_BASELINE[typeof S=="function"?S(s,f):S],oe=T.length,se=new Array(oe*2);let ae=0;for(let ge=0;ge<oe;ge++){const he=(1-J)*(P-M[ge])/2;se[ae++]=(J-1)*P/2+he+T[ge],se[ae++]=(K-1)*H/2+F[ge]}return se}}initializeState(){this.state={styleVersion:0,fontAtlasManager:new FontAtlasManager},this.props.maxWidth>0&&defaultLogger.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(s){const{props:f,oldProps:_,changeFlags:S}=s;(S.dataChanged||S.updateTriggersChanged&&(S.updateTriggersChanged.all||S.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||f.lineHeight!==_.lineHeight||f.wordBreak!==_.wordBreak||f.maxWidth!==_.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:s}){return s.object=s.index>=0?this.props.data[s.index]:null,s}_updateFontAtlas(){const{fontSettings:s,fontFamily:f,fontWeight:_}=this.props,{fontAtlasManager:S,characterSet:T}=this.state,F={...s,characterSet:T,fontFamily:f,fontWeight:_};if(!S.mapping)return S.setProps(F),!0;for(const M in F)if(F[M]!==S.props[M])return S.setProps(F),!0;return!1}_updateText(){var P;const{data:s,characterSet:f}=this.props,_=(P=s.attributes)==null?void 0:P.getText;let{getText:S}=this.props,T=s.startIndices,F;const M=f==="auto"&&new Set;if(_&&T){const{texts:H,characterCount:J}=getTextFromBuffer({...ArrayBuffer.isView(_)?{value:_}:_,length:s.length,startIndices:T,characterSet:M});F=J,S=(K,{index:oe})=>H[oe]}else{const{iterable:H,objectInfo:J}=createIterable(s);T=[0],F=0;for(const K of H){J.index++;const oe=Array.from(S(K,J)||"");M&&oe.forEach(M.add,M),F+=oe.length,T.push(F)}}this.setState({getText:S,startIndices:T,numInstances:F,characterSet:M||f})}transformParagraph(s,f){const{fontAtlasManager:_}=this.state,S=_.mapping,T=this.state.getText,{wordBreak:F,lineHeight:M,maxWidth:P}=this.props,H=T(s,f)||"";return transformParagraph(H,M,F,P*_.props.fontSize,S)}renderLayers(){const{startIndices:s,numInstances:f,getText:_,fontAtlasManager:{scale:S,atlas:T,mapping:F},styleVersion:M}=this.state,{data:P,_dataDiff:H,getPosition:J,getColor:K,getSize:oe,getAngle:se,getPixelOffset:ae,getBackgroundColor:ge,getBorderColor:he,getBorderWidth:Be,backgroundPadding:pe,background:be,billboard:Re,fontSettings:Fe,outlineWidth:Me,outlineColor:ve,sizeScale:At,sizeUnits:Ct,sizeMinPixels:Rt,sizeMaxPixels:It,transitions:xt,updateTriggers:wt}=this.props,Ft=this.getSubLayerClass("characters",MultiIconLayer),jt=this.getSubLayerClass("background",TextBackgroundLayer);return[be&&new jt({getFillColor:ge,getLineColor:he,getLineWidth:Be,padding:pe,getPosition:J,getSize:oe,getAngle:se,getPixelOffset:ae,billboard:Re,sizeScale:At,sizeUnits:Ct,sizeMinPixels:Rt,sizeMaxPixels:It,transitions:xt&&{getPosition:xt.getPosition,getAngle:xt.getAngle,getSize:xt.getSize,getFillColor:xt.getBackgroundColor,getLineColor:xt.getBorderColor,getLineWidth:xt.getBorderWidth,getPixelOffset:xt.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:wt.getPosition,getAngle:wt.getAngle,getSize:wt.getSize,getFillColor:wt.getBackgroundColor,getLineColor:wt.getBorderColor,getLineWidth:wt.getBorderWidth,getPixelOffset:wt.getPixelOffset,getBoundingRect:{getText:wt.getText,getTextAnchor:wt.getTextAnchor,getAlignmentBaseline:wt.getAlignmentBaseline,styleVersion:M}}}),{data:P.attributes&&P.attributes.background?{length:P.length,attributes:P.attributes.background}:P,_dataDiff:H,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new Ft({sdf:Fe.sdf,smoothing:Number.isFinite(Fe.smoothing)?Fe.smoothing:DEFAULT_FONT_SETTINGS.smoothing,outlineWidth:Me/(Fe.radius||DEFAULT_FONT_SETTINGS.radius),outlineColor:ve,iconAtlas:T,iconMapping:F,getPosition:J,getColor:K,getSize:oe,getAngle:se,getPixelOffset:ae,billboard:Re,sizeScale:At*S,sizeUnits:Ct,sizeMinPixels:Rt*S,sizeMaxPixels:It*S,transitions:xt&&{getPosition:xt.getPosition,getAngle:xt.getAngle,getColor:xt.getColor,getSize:xt.getSize,getPixelOffset:xt.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:wt.getText,getPosition:wt.getPosition,getAngle:wt.getAngle,getColor:wt.getColor,getSize:wt.getSize,getPixelOffset:wt.getPixelOffset,getIconOffsets:{getTextAnchor:wt.getTextAnchor,getAlignmentBaseline:wt.getAlignmentBaseline,styleVersion:M}}}),{data:P,_dataDiff:H,startIndices:s,numInstances:f,getIconOffsets:this.getIconOffsets,getIcon:_})]}static set fontAtlasCacheLimit(s){setFontAtlasCacheLimit(s)}}TextLayer.defaultProps=defaultProps$c;TextLayer.layerName="TextLayer";const POINT_LAYER={circle:{type:ScatterplotLayer,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:IconLayer,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:TextLayer,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},LINE_LAYER={type:PathLayer,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},POLYGON_LAYER={type:SolidPolygonLayer,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function getDefaultProps({type:d,props:s}){const f={};for(const _ in s)f[_]=d.defaultProps[s[_]];return f}function forwardProps(d,s){const{transitions:f,updateTriggers:_}=d.props,S={updateTriggers:{},transitions:f&&{getPosition:f.geometry}};for(const T in s){const F=s[T];let M=d.props[T];T.startsWith("get")&&(M=d.getSubLayerAccessor(M),S.updateTriggers[F]=_[T],f&&(S.transitions[F]=f[T])),S[F]=M}return S}function getGeojsonFeatures(d){if(Array.isArray(d))return d;switch(defaultLogger.assert(d.type,"GeoJSON does not have type"),d.type){case"Feature":return[d];case"FeatureCollection":return defaultLogger.assert(Array.isArray(d.features),"GeoJSON does not have features array"),d.features;default:return[{geometry:d}]}}function separateGeojsonFeatures(d,s,f={}){const _={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:S=0,endRow:T=d.length}=f;for(let F=S;F<T;F++){const M=d[F],{geometry:P}=M;if(P)if(P.type==="GeometryCollection"){defaultLogger.assert(Array.isArray(P.geometries),"GeoJSON does not have geometries array");const{geometries:H}=P;for(let J=0;J<H.length;J++){const K=H[J];separateGeometry(K,_,s,M,F)}}else separateGeometry(P,_,s,M,F)}return _}function separateGeometry(d,s,f,_,S){const{type:T,coordinates:F}=d,{pointFeatures:M,lineFeatures:P,polygonFeatures:H,polygonOutlineFeatures:J}=s;if(!validateGeometry(T,F)){defaultLogger.warn(`${T} coordinates are malformed`)();return}switch(T){case"Point":M.push(f({geometry:d},_,S));break;case"MultiPoint":F.forEach(K=>{M.push(f({geometry:{type:"Point",coordinates:K}},_,S))});break;case"LineString":P.push(f({geometry:d},_,S));break;case"MultiLineString":F.forEach(K=>{P.push(f({geometry:{type:"LineString",coordinates:K}},_,S))});break;case"Polygon":H.push(f({geometry:d},_,S)),F.forEach(K=>{J.push(f({geometry:{type:"LineString",coordinates:K}},_,S))});break;case"MultiPolygon":F.forEach(K=>{H.push(f({geometry:{type:"Polygon",coordinates:K}},_,S)),K.forEach(oe=>{J.push(f({geometry:{type:"LineString",coordinates:oe}},_,S))})});break}}const COORDINATE_NEST_LEVEL={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function validateGeometry(d,s){let f=COORDINATE_NEST_LEVEL[d];for(defaultLogger.assert(f,`Unknown GeoJSON type ${d}`);s&&--f>0;)s=s[0];return s&&Number.isFinite(s[0])}function createEmptyLayerProps(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function getCoordinates(d){return d.geometry.coordinates}function createLayerPropsFromFeatures(d,s){const f=createEmptyLayerProps(),{pointFeatures:_,lineFeatures:S,polygonFeatures:T,polygonOutlineFeatures:F}=d;return f.points.data=_,f.points._dataDiff=s.pointFeatures&&(()=>s.pointFeatures),f.points.getPosition=getCoordinates,f.lines.data=S,f.lines._dataDiff=s.lineFeatures&&(()=>s.lineFeatures),f.lines.getPath=getCoordinates,f.polygons.data=T,f.polygons._dataDiff=s.polygonFeatures&&(()=>s.polygonFeatures),f.polygons.getPolygon=getCoordinates,f.polygonsOutline.data=F,f.polygonsOutline._dataDiff=s.polygonOutlineFeatures&&(()=>s.polygonOutlineFeatures),f.polygonsOutline.getPath=getCoordinates,f}function createLayerPropsFromBinary(d,s){const f=createEmptyLayerProps(),{points:_,lines:S,polygons:T}=d,F=calculatePickingColors(d,s);return f.points.data={length:_.positions.value.length/_.positions.size,attributes:{..._.attributes,getPosition:_.positions,instancePickingColors:{size:3,value:F.points}},properties:_.properties,numericProps:_.numericProps,featureIds:_.featureIds},f.lines.data={length:S.pathIndices.value.length-1,startIndices:S.pathIndices.value,attributes:{...S.attributes,getPath:S.positions,instancePickingColors:{size:3,value:F.lines}},properties:S.properties,numericProps:S.numericProps,featureIds:S.featureIds},f.lines._pathType="open",f.polygons.data={length:T.polygonIndices.value.length-1,startIndices:T.polygonIndices.value,attributes:{...T.attributes,getPolygon:T.positions,pickingColors:{size:3,value:F.polygons}},properties:T.properties,numericProps:T.numericProps,featureIds:T.featureIds},f.polygons._normalize=!1,T.triangles&&(f.polygons.data.attributes.indices=T.triangles.value),f.polygonsOutline.data={length:T.primitivePolygonIndices.value.length-1,startIndices:T.primitivePolygonIndices.value,attributes:{...T.attributes,getPath:T.positions,instancePickingColors:{size:3,value:F.polygons}},properties:T.properties,numericProps:T.numericProps,featureIds:T.featureIds},f.polygonsOutline._pathType="open",f}const FEATURE_TYPES=["points","linestrings","polygons"],defaultProps$b={...getDefaultProps(POINT_LAYER.circle),...getDefaultProps(POINT_LAYER.icon),...getDefaultProps(POINT_LAYER.text),...getDefaultProps(LINE_LAYER),...getDefaultProps(POLYGON_LAYER),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:d=>d.properties.icon},getText:{type:"accessor",value:d=>d.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class GeoJsonLayer extends CompositeLayer{initializeState(){this.state={layerProps:{},features:{},featuresDiff:{}}}updateState({props:s,changeFlags:f}){if(!f.dataChanged)return;const{data:_}=this.props,S=_&&"points"in _&&"polygons"in _&&"lines"in _;this.setState({binary:S}),S?this._updateStateBinary({props:s,changeFlags:f}):this._updateStateJSON({props:s,changeFlags:f})}_updateStateBinary({props:s,changeFlags:f}){const _=createLayerPropsFromBinary(s.data,this.encodePickingColor);this.setState({layerProps:_})}_updateStateJSON({props:s,changeFlags:f}){const _=getGeojsonFeatures(s.data),S=this.getSubLayerRow.bind(this);let T={};const F={};if(Array.isArray(f.dataChanged)){const P=this.state.features;for(const H in P)T[H]=P[H].slice(),F[H]=[];for(const H of f.dataChanged){const J=separateGeojsonFeatures(_,S,H);for(const K in P)F[K].push(replaceInRange({data:T[K],getIndex:oe=>oe.__source.index,dataRange:H,replace:J[K]}))}}else T=separateGeojsonFeatures(_,S);const M=createLayerPropsFromFeatures(T,F);this.setState({features:T,featuresDiff:F,layerProps:M})}getPickingInfo(s){const f=super.getPickingInfo(s),{index:_,sourceLayer:S}=f;return f.featureType=FEATURE_TYPES.find(T=>S.id.startsWith(`${this.id}-${T}-`)),_>=0&&S.id.startsWith(`${this.id}-points-text`)&&this.state.binary&&(f.index=this.props.data.points.globalFeatureIds.value[_]),f}_updateAutoHighlight(s){const f=`${this.id}-points-`,_=s.featureType==="points";for(const S of this.getSubLayers())S.id.startsWith(f)===_&&S.updateAutoHighlight(s)}_renderPolygonLayer(){var F;const{extruded:s,wireframe:f}=this.props,{layerProps:_}=this.state,S="polygons-fill",T=this.shouldRenderSubLayer(S,(F=_.polygons)==null?void 0:F.data)&&this.getSubLayerClass(S,POLYGON_LAYER.type);if(T){const M=forwardProps(this,POLYGON_LAYER.props),P=s&&f;return P||delete M.getLineColor,M.updateTriggers.lineColors=P,new T(M,this.getSubLayerProps({id:S,updateTriggers:M.updateTriggers}),_.polygons)}return null}_renderLineLayers(){var P,H;const{extruded:s,stroked:f}=this.props,{layerProps:_}=this.state,S="polygons-stroke",T="linestrings",F=!s&&f&&this.shouldRenderSubLayer(S,(P=_.polygonsOutline)==null?void 0:P.data)&&this.getSubLayerClass(S,LINE_LAYER.type),M=this.shouldRenderSubLayer(T,(H=_.lines)==null?void 0:H.data)&&this.getSubLayerClass(T,LINE_LAYER.type);if(F||M){const J=forwardProps(this,LINE_LAYER.props);return[F&&new F(J,this.getSubLayerProps({id:S,updateTriggers:J.updateTriggers}),_.polygonsOutline),M&&new M(J,this.getSubLayerProps({id:T,updateTriggers:J.updateTriggers}),_.lines)]}return null}_renderPointLayers(){var M;const{pointType:s}=this.props,{layerProps:f,binary:_}=this.state;let{highlightedObjectIndex:S}=this.props;!_&&Number.isFinite(S)&&(S=f.points.data.findIndex(P=>P.__source.index===S));const T=new Set(s.split("+")),F=[];for(const P of T){const H=`points-${P}`,J=POINT_LAYER[P],K=J&&this.shouldRenderSubLayer(H,(M=f.points)==null?void 0:M.data)&&this.getSubLayerClass(H,J.type);if(K){const oe=forwardProps(this,J.props);let se=f.points;if(P==="text"&&_){const{instancePickingColors:ae,...ge}=se.data.attributes;se={...se,data:{...se.data,attributes:ge}}}F.push(new K(oe,this.getSubLayerProps({id:H,updateTriggers:oe.updateTriggers,highlightedObjectIndex:S}),se))}}return F}renderLayers(){const{extruded:s}=this.props,f=this._renderPolygonLayer(),_=this._renderLineLayers(),S=this._renderPointLayers();return[!s&&f,_,S,s&&f]}getSubLayerAccessor(s){const{binary:f}=this.state;return!f||typeof s!="function"?super.getSubLayerAccessor(s):(_,S)=>{const{data:T,index:F}=S,M=binaryToFeatureForAccesor(T,F);return s(M,S)}}}GeoJsonLayer.layerName="GeoJsonLayer";GeoJsonLayer.defaultProps=defaultProps$b;function clone$3(d){if(!d)throw new Error("geojson is required");switch(d.type){case"Feature":return cloneFeature$3(d);case"FeatureCollection":return cloneFeatureCollection$3(d);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return cloneGeometry$3(d);default:throw new Error("unknown GeoJSON type")}}function cloneFeature$3(d){var s={type:"Feature"};return Object.keys(d).forEach(function(f){switch(f){case"type":case"properties":case"geometry":return;default:s[f]=d[f]}}),s.properties=cloneProperties$3(d.properties),s.geometry=cloneGeometry$3(d.geometry),s}function cloneProperties$3(d){var s={};return d&&Object.keys(d).forEach(function(f){var _=d[f];typeof _=="object"?_===null?s[f]=null:_.length?s[f]=_.map(function(S){return S}):s[f]=cloneProperties$3(_):s[f]=_}),s}function cloneFeatureCollection$3(d){var s={type:"FeatureCollection"};return Object.keys(d).forEach(function(f){switch(f){case"type":case"features":return;default:s[f]=d[f]}}),s.features=d.features.map(function(f){return cloneFeature$3(f)}),s}function cloneGeometry$3(d){var s={type:d.type};return d.bbox&&(s.bbox=d.bbox),d.type==="GeometryCollection"?(s.geometries=d.geometries.map(function(f){return cloneGeometry$3(f)}),s):(s.coordinates=deepSlice$3(d.coordinates),s)}function deepSlice$3(d){return typeof d[0]!="object"?d.slice():d.map(function(s){return deepSlice$3(s)})}function feature$j(d,s,f){if(f=f||{},!isObject$7(f))throw new Error("options is invalid");var _=f.bbox,S=f.id;if(d===void 0)throw new Error("geometry is required");_&&validateBBox(_),S&&validateId(S);var T={type:"Feature"};return S&&(T.id=S),_&&(T.bbox=_),T.properties={},T.geometry=d,T}function point$b(d,s,f){if(!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$c(d[0])||!isNumber$c(d[1]))throw new Error("coordinates must contain numbers");return feature$j({type:"Point",coordinates:d},s,f)}function isNumber$c(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function isObject$7(d){return!!d&&d.constructor===Object}function validateBBox(d){if(!d)throw new Error("bbox is required");if(!Array.isArray(d))throw new Error("bbox must be an Array");if(d.length!==4&&d.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");d.forEach(function(s){if(!isNumber$c(s))throw new Error("bbox must only contain numbers")})}function validateId(d){if(!d)throw new Error("id is required");if(["string","number"].indexOf(typeof d)===-1)throw new Error("id must be a number or a string")}class Tile2DHeader{constructor(s){this.index=s,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(s){this._bbox||(this._bbox=s,"west"in s?this.boundingBox=[[s.west,s.south],[s.east,s.north]]:this.boundingBox=[[s.left,s.top],[s.right,s.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return!!this._loader&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const s=this.content?this.content.byteLength:0;return Number.isFinite(s)||console.error("byteLength not defined in tile data"),s}async _loadData({getData:s,requestScheduler:f,onLoad:_,onError:S}){const{index:T,id:F,bbox:M,userData:P,zoom:H}=this,J=this._loaderId;this._abortController=new AbortController;const{signal:K}=this._abortController,oe=await f.scheduleRequest(this,ge=>ge.isSelected?1:-1);if(!oe){this._isCancelled=!0;return}if(this._isCancelled){oe.done();return}let se=null,ae;try{se=await s({index:T,id:F,bbox:M,userData:P,zoom:H,signal:K})}catch(ge){ae=ge||!0}finally{oe.done()}if(J===this._loaderId){if(this._loader=void 0,this.content=se,this._isCancelled&&!se){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,ae?S(ae,this):_(this)}}loadData(s){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(s),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var s;this.isLoaded||(this._isCancelled=!0,(s=this._abortController)==null||s.abort())}}const INTERSECTION={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},scratchVector$1=new Vector3,scratchNormal$1=new Vector3;class AxisAlignedBoundingBox{constructor(s=[0,0,0],f=[0,0,0],_){_=_||scratchVector$1.copy(s).add(f).scale(.5),this.center=new Vector3(_),this.halfDiagonal=new Vector3(f).subtract(this.center),this.minimum=new Vector3(s),this.maximum=new Vector3(f)}clone(){return new AxisAlignedBoundingBox(this.minimum,this.maximum,this.center)}equals(s){return this===s||!!s&&this.minimum.equals(s.minimum)&&this.maximum.equals(s.maximum)}transform(s){return this.center.transformAsPoint(s),this.halfDiagonal.transform(s),this.minimum.transform(s),this.maximum.transform(s),this}intersectPlane(s){const{halfDiagonal:f}=this,_=scratchNormal$1.from(s.normal),S=f.x*Math.abs(_.x)+f.y*Math.abs(_.y)+f.z*Math.abs(_.z),T=this.center.dot(_)+s.distance;return T-S>0?INTERSECTION.INSIDE:T+S<0?INTERSECTION.OUTSIDE:INTERSECTION.INTERSECTING}distanceTo(s){return Math.sqrt(this.distanceSquaredTo(s))}distanceSquaredTo(s){const f=scratchVector$1.from(s).subtract(this.center),{halfDiagonal:_}=this;let S=0,T;return T=Math.abs(f.x)-_.x,T>0&&(S+=T*T),T=Math.abs(f.y)-_.y,T>0&&(S+=T*T),T=Math.abs(f.z)-_.z,T>0&&(S+=T*T),S}}const scratchVector=new Vector3,scratchVector2$1=new Vector3;class BoundingSphere{constructor(s=[0,0,0],f=0){this.radius=-0,this.center=new Vector3,this.fromCenterRadius(s,f)}fromCenterRadius(s,f){return this.center.from(s),this.radius=f,this}fromCornerPoints(s,f){return f=scratchVector.from(f),this.center=new Vector3().from(s).add(f).scale(.5),this.radius=this.center.distance(f),this}equals(s){return this===s||!!s&&this.center.equals(s.center)&&this.radius===s.radius}clone(){return new BoundingSphere(this.center,this.radius)}union(s){const f=this.center,_=this.radius,S=s.center,T=s.radius,F=scratchVector.copy(S).subtract(f),M=F.magnitude();if(_>=M+T)return this.clone();if(T>=M+_)return s.clone();const P=(_+M+T)*.5;return scratchVector2$1.copy(F).scale((-_+P)/M).add(f),this.center.copy(scratchVector2$1),this.radius=P,this}expand(s){const _=scratchVector.from(s).subtract(this.center).magnitude();return _>this.radius&&(this.radius=_),this}transform(s){this.center.transform(s);const f=getScaling(scratchVector,s);return this.radius=Math.max(f[0],Math.max(f[1],f[2]))*this.radius,this}distanceSquaredTo(s){const f=this.distanceTo(s);return f*f}distanceTo(s){const _=scratchVector.from(s).subtract(this.center);return Math.max(0,_.len()-this.radius)}intersectPlane(s){const f=this.center,_=this.radius,T=s.normal.dot(f)+s.distance;return T<-_?INTERSECTION.OUTSIDE:T<_?INTERSECTION.INTERSECTING:INTERSECTION.INSIDE}}const scratchVector3$1=new Vector3,scratchOffset=new Vector3,scratchVectorU=new Vector3,scratchVectorV=new Vector3,scratchVectorW=new Vector3,scratchCorner=new Vector3,scratchToCenter=new Vector3,MATRIX3={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class OrientedBoundingBox{constructor(s=[0,0,0],f=[0,0,0,0,0,0,0,0,0]){this.center=new Vector3().from(s),this.halfAxes=new Matrix3(f)}get halfSize(){const s=this.halfAxes.getColumn(0),f=this.halfAxes.getColumn(1),_=this.halfAxes.getColumn(2);return[new Vector3(s).len(),new Vector3(f).len(),new Vector3(_).len()]}get quaternion(){const s=this.halfAxes.getColumn(0),f=this.halfAxes.getColumn(1),_=this.halfAxes.getColumn(2),S=new Vector3(s).normalize(),T=new Vector3(f).normalize(),F=new Vector3(_).normalize();return new Quaternion().fromMatrix3(new Matrix3([...S,...T,...F]))}fromCenterHalfSizeQuaternion(s,f,_){const S=new Quaternion(_),T=new Matrix3().fromQuaternion(S);return T[0]=T[0]*f[0],T[1]=T[1]*f[0],T[2]=T[2]*f[0],T[3]=T[3]*f[1],T[4]=T[4]*f[1],T[5]=T[5]*f[1],T[6]=T[6]*f[2],T[7]=T[7]*f[2],T[8]=T[8]*f[2],this.center=new Vector3().from(s),this.halfAxes=T,this}clone(){return new OrientedBoundingBox(this.center,this.halfAxes)}equals(s){return this===s||!!s&&this.center.equals(s.center)&&this.halfAxes.equals(s.halfAxes)}getBoundingSphere(s=new BoundingSphere){const f=this.halfAxes,_=f.getColumn(0,scratchVectorU),S=f.getColumn(1,scratchVectorV),T=f.getColumn(2,scratchVectorW),F=scratchVector3$1.copy(_).add(S).add(T);return s.center.copy(this.center),s.radius=F.magnitude(),s}intersectPlane(s){const f=this.center,_=s.normal,S=this.halfAxes,T=_.x,F=_.y,M=_.z,P=Math.abs(T*S[MATRIX3.COLUMN0ROW0]+F*S[MATRIX3.COLUMN0ROW1]+M*S[MATRIX3.COLUMN0ROW2])+Math.abs(T*S[MATRIX3.COLUMN1ROW0]+F*S[MATRIX3.COLUMN1ROW1]+M*S[MATRIX3.COLUMN1ROW2])+Math.abs(T*S[MATRIX3.COLUMN2ROW0]+F*S[MATRIX3.COLUMN2ROW1]+M*S[MATRIX3.COLUMN2ROW2]),H=_.dot(f)+s.distance;return H<=-P?INTERSECTION.OUTSIDE:H>=P?INTERSECTION.INSIDE:INTERSECTION.INTERSECTING}distanceTo(s){return Math.sqrt(this.distanceSquaredTo(s))}distanceSquaredTo(s){const f=scratchOffset.from(s).subtract(this.center),_=this.halfAxes,S=_.getColumn(0,scratchVectorU),T=_.getColumn(1,scratchVectorV),F=_.getColumn(2,scratchVectorW),M=S.magnitude(),P=T.magnitude(),H=F.magnitude();S.normalize(),T.normalize(),F.normalize();let J=0,K;return K=Math.abs(f.dot(S))-M,K>0&&(J+=K*K),K=Math.abs(f.dot(T))-P,K>0&&(J+=K*K),K=Math.abs(f.dot(F))-H,K>0&&(J+=K*K),J}computePlaneDistances(s,f,_=[-0,-0]){let S=Number.POSITIVE_INFINITY,T=Number.NEGATIVE_INFINITY;const F=this.center,M=this.halfAxes,P=M.getColumn(0,scratchVectorU),H=M.getColumn(1,scratchVectorV),J=M.getColumn(2,scratchVectorW),K=scratchCorner.copy(P).add(H).add(J).add(F),oe=scratchToCenter.copy(K).subtract(s);let se=f.dot(oe);return S=Math.min(se,S),T=Math.max(se,T),K.copy(F).add(P).add(H).subtract(J),oe.copy(K).subtract(s),se=f.dot(oe),S=Math.min(se,S),T=Math.max(se,T),K.copy(F).add(P).subtract(H).add(J),oe.copy(K).subtract(s),se=f.dot(oe),S=Math.min(se,S),T=Math.max(se,T),K.copy(F).add(P).subtract(H).subtract(J),oe.copy(K).subtract(s),se=f.dot(oe),S=Math.min(se,S),T=Math.max(se,T),F.copy(K).subtract(P).add(H).add(J),oe.copy(K).subtract(s),se=f.dot(oe),S=Math.min(se,S),T=Math.max(se,T),F.copy(K).subtract(P).add(H).subtract(J),oe.copy(K).subtract(s),se=f.dot(oe),S=Math.min(se,S),T=Math.max(se,T),F.copy(K).subtract(P).subtract(H).add(J),oe.copy(K).subtract(s),se=f.dot(oe),S=Math.min(se,S),T=Math.max(se,T),F.copy(K).subtract(P).subtract(H).subtract(J),oe.copy(K).subtract(s),se=f.dot(oe),S=Math.min(se,S),T=Math.max(se,T),_[0]=S,_[1]=T,_}transform(s){this.center.transformAsPoint(s);const f=this.halfAxes.getColumn(0,scratchVectorU);f.transformAsPoint(s);const _=this.halfAxes.getColumn(1,scratchVectorV);_.transformAsPoint(s);const S=this.halfAxes.getColumn(2,scratchVectorW);return S.transformAsPoint(s),this.halfAxes=new Matrix3([...f,..._,...S]),this}getTransform(){throw new Error("not implemented")}}const scratchPosition=new Vector3,scratchNormal=new Vector3;class Plane{constructor(s=[0,0,1],f=0){this.normal=new Vector3,this.distance=-0,this.fromNormalDistance(s,f)}fromNormalDistance(s,f){return assert$4(Number.isFinite(f)),this.normal.from(s).normalize(),this.distance=f,this}fromPointNormal(s,f){s=scratchPosition.from(s),this.normal.from(f).normalize();const _=-this.normal.dot(s);return this.distance=_,this}fromCoefficients(s,f,_,S){return this.normal.set(s,f,_),assert$4(equals$2(this.normal.len(),1)),this.distance=S,this}clone(){return new Plane(this.normal,this.distance)}equals(s){return equals$2(this.distance,s.distance)&&equals$2(this.normal,s.normal)}getPointDistance(s){return this.normal.dot(s)+this.distance}transform(s){const f=scratchNormal.copy(this.normal).transformAsVector(s).normalize(),_=this.normal.scale(-this.distance).transform(s);return this.fromPointNormal(_,f)}projectPointOntoPlane(s,f=[0,0,0]){const _=scratchPosition.from(s),S=this.getPointDistance(_),T=scratchNormal.copy(this.normal).scale(S);return _.subtract(T).to(f)}}const faces=[new Vector3([1,0,0]),new Vector3([0,1,0]),new Vector3([0,0,1])],scratchPlaneCenter=new Vector3,scratchPlaneNormal=new Vector3;class CullingVolume{constructor(s=[]){this.planes=s}fromBoundingSphere(s){this.planes.length=2*faces.length;const f=s.center,_=s.radius;let S=0;for(const T of faces){let F=this.planes[S],M=this.planes[S+1];F||(F=this.planes[S]=new Plane),M||(M=this.planes[S+1]=new Plane);const P=scratchPlaneCenter.copy(T).scale(-_).add(f);F.fromPointNormal(P,T);const H=scratchPlaneCenter.copy(T).scale(_).add(f),J=scratchPlaneNormal.copy(T).negate();M.fromPointNormal(H,J),S+=2}return this}computeVisibility(s){let f=INTERSECTION.INSIDE;for(const _ of this.planes)switch(s.intersectPlane(_)){case INTERSECTION.OUTSIDE:return INTERSECTION.OUTSIDE;case INTERSECTION.INTERSECTING:f=INTERSECTION.INTERSECTING;break}return f}computeVisibilityWithPlaneMask(s,f){if(assert$4(Number.isFinite(f),"parentPlaneMask is required."),f===CullingVolume.MASK_OUTSIDE||f===CullingVolume.MASK_INSIDE)return f;let _=CullingVolume.MASK_INSIDE;const S=this.planes;for(let T=0;T<this.planes.length;++T){const F=T<31?1<<T:0;if(T<31&&!(f&F))continue;const M=S[T],P=s.intersectPlane(M);if(P===INTERSECTION.OUTSIDE)return CullingVolume.MASK_OUTSIDE;P===INTERSECTION.INTERSECTING&&(_|=F)}return _}}CullingVolume.MASK_OUTSIDE=4294967295;CullingVolume.MASK_INSIDE=0;CullingVolume.MASK_INDETERMINATE=2147483647;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;new Vector3;const scratchMatrix=new Matrix3,scratchUnitary=new Matrix3,scratchDiagonal=new Matrix3,jMatrix=new Matrix3,jMatrixTranspose=new Matrix3;function computeEigenDecomposition(d,s={}){const f=EPSILON20,_=10;let S=0,T=0;const F=scratchUnitary,M=scratchDiagonal;F.identity(),M.copy(d);const P=f*computeFrobeniusNorm(M);for(;T<_&&offDiagonalFrobeniusNorm(M)>P;)shurDecomposition(M,jMatrix),jMatrixTranspose.copy(jMatrix).transpose(),M.multiplyRight(jMatrix),M.multiplyLeft(jMatrixTranspose),F.multiplyRight(jMatrix),++S>2&&(++T,S=0);return s.unitary=F.toTarget(s.unitary),s.diagonal=M.toTarget(s.diagonal),s}function computeFrobeniusNorm(d){let s=0;for(let f=0;f<9;++f){const _=d[f];s+=_*_}return Math.sqrt(s)}const rowVal=[1,0,0],colVal=[2,2,1];function offDiagonalFrobeniusNorm(d){let s=0;for(let f=0;f<3;++f){const _=d[scratchMatrix.getElementIndex(colVal[f],rowVal[f])];s+=2*_*_}return Math.sqrt(s)}function shurDecomposition(d,s){const f=EPSILON15;let _=0,S=1;for(let H=0;H<3;++H){const J=Math.abs(d[scratchMatrix.getElementIndex(colVal[H],rowVal[H])]);J>_&&(S=H,_=J)}const T=rowVal[S],F=colVal[S];let M=1,P=0;if(Math.abs(d[scratchMatrix.getElementIndex(F,T)])>f){const H=d[scratchMatrix.getElementIndex(F,F)],J=d[scratchMatrix.getElementIndex(T,T)],K=d[scratchMatrix.getElementIndex(F,T)],oe=(H-J)/2/K;let se;oe<0?se=-1/(-oe+Math.sqrt(1+oe*oe)):se=1/(oe+Math.sqrt(1+oe*oe)),M=1/Math.sqrt(1+se*se),P=se*M}return Matrix3.IDENTITY.to(s),s[scratchMatrix.getElementIndex(T,T)]=s[scratchMatrix.getElementIndex(F,F)]=M,s[scratchMatrix.getElementIndex(F,T)]=P,s[scratchMatrix.getElementIndex(T,F)]=-P,s}const scratchVector2=new Vector3,scratchVector3=new Vector3,scratchVector4=new Vector3,scratchVector5=new Vector3,scratchVector6=new Vector3,scratchCovarianceResult=new Matrix3,scratchEigenResult={diagonal:new Matrix3,unitary:new Matrix3};function makeOrientedBoundingBoxFromPoints(d,s=new OrientedBoundingBox){if(!d||d.length===0)return s.halfAxes=new Matrix3([0,0,0,0,0,0,0,0,0]),s.center=new Vector3,s;const f=d.length,_=new Vector3(0,0,0);for(const Ct of d)_.add(Ct);const S=1/f;_.multiplyByScalar(S);let T=0,F=0,M=0,P=0,H=0,J=0;for(const Ct of d){const Rt=scratchVector2.copy(Ct).subtract(_);T+=Rt.x*Rt.x,F+=Rt.x*Rt.y,M+=Rt.x*Rt.z,P+=Rt.y*Rt.y,H+=Rt.y*Rt.z,J+=Rt.z*Rt.z}T*=S,F*=S,M*=S,P*=S,H*=S,J*=S;const K=scratchCovarianceResult;K[0]=T,K[1]=F,K[2]=M,K[3]=F,K[4]=P,K[5]=H,K[6]=M,K[7]=H,K[8]=J;const{unitary:oe}=computeEigenDecomposition(K,scratchEigenResult),se=s.halfAxes.copy(oe);let ae=se.getColumn(0,scratchVector4),ge=se.getColumn(1,scratchVector5),he=se.getColumn(2,scratchVector6),Be=-Number.MAX_VALUE,pe=-Number.MAX_VALUE,be=-Number.MAX_VALUE,Re=Number.MAX_VALUE,Fe=Number.MAX_VALUE,Me=Number.MAX_VALUE;for(const Ct of d)scratchVector2.copy(Ct),Be=Math.max(scratchVector2.dot(ae),Be),pe=Math.max(scratchVector2.dot(ge),pe),be=Math.max(scratchVector2.dot(he),be),Re=Math.min(scratchVector2.dot(ae),Re),Fe=Math.min(scratchVector2.dot(ge),Fe),Me=Math.min(scratchVector2.dot(he),Me);ae=ae.multiplyByScalar(.5*(Re+Be)),ge=ge.multiplyByScalar(.5*(Fe+pe)),he=he.multiplyByScalar(.5*(Me+be)),s.center.copy(ae).add(ge).add(he);const ve=scratchVector3.set(Be-Re,pe-Fe,be-Me).multiplyByScalar(.5),At=new Matrix3([ve[0],0,0,0,ve[1],0,0,0,ve[2]]);return s.halfAxes.multiplyRight(At),s}const TILE_SIZE$2=512,MAX_MAPS=3,REF_POINTS_5=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],REF_POINTS_9=REF_POINTS_5.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),REF_POINTS_11=REF_POINTS_9.concat([[.25,.5],[.75,.5]]);class OSMNode{constructor(s,f,_){this.x=s,this.y=f,this.z=_}get children(){if(!this._children){const s=this.x*2,f=this.y*2,_=this.z+1;this._children=[new OSMNode(s,f,_),new OSMNode(s,f+1,_),new OSMNode(s+1,f,_),new OSMNode(s+1,f+1,_)]}return this._children}update(s){const{viewport:f,cullingVolume:_,elevationBounds:S,minZ:T,maxZ:F,bounds:M,offset:P,project:H}=s,J=this.getBoundingVolume(S,P,H);if(M&&!this.insideBounds(M)||_.computeVisibility(J)<0)return!1;if(!this.childVisible){let{z:oe}=this;if(oe<F&&oe>=T){const se=J.distanceTo(f.cameraPosition)*f.scale/f.height;oe+=Math.floor(Math.log2(se))}if(oe>=F)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const oe of this.children)oe.update(s);return!0}getSelected(s=[]){if(this.selected&&s.push(this),this._children)for(const f of this._children)f.getSelected(s);return s}insideBounds([s,f,_,S]){const T=Math.pow(2,this.z),F=TILE_SIZE$2/T;return this.x*F<_&&this.y*F<S&&(this.x+1)*F>s&&(this.y+1)*F>f}getBoundingVolume(s,f,_){if(_){const P=this.z<1?REF_POINTS_11:this.z<2?REF_POINTS_9:REF_POINTS_5,H=[];for(const J of P){const K=osmTile2lngLat(this.x+J[0],this.y+J[1],this.z);K[2]=s[0],H.push(_(K)),s[0]!==s[1]&&(K[2]=s[1],H.push(_(K)))}return makeOrientedBoundingBoxFromPoints(H)}const S=Math.pow(2,this.z),T=TILE_SIZE$2/S,F=this.x*T+f*TILE_SIZE$2,M=TILE_SIZE$2-(this.y+1)*T;return new AxisAlignedBoundingBox([F,M,s[0]],[F+T,M+T,s[1]])}}function getOSMTileIndices(d,s,f,_){const S=d instanceof GlobeViewport&&d.resolution?d.projectPosition:null,T=Object.values(d.getFrustumPlanes()).map(({normal:se,distance:ae})=>new Plane(se.clone().negate(),ae)),F=new CullingVolume(T),M=d.distanceScales.unitsPerMeter[2],P=f&&f[0]*M||0,H=f&&f[1]*M||0,J=d instanceof WebMercatorViewport$1&&d.pitch<=60?s:0;if(_){const[se,ae,ge,he]=_,Be=lngLatToWorld$1([se,he]),pe=lngLatToWorld$1([ge,ae]);_=[Be[0],TILE_SIZE$2-Be[1],pe[0],TILE_SIZE$2-pe[1]]}const K=new OSMNode(0,0,0),oe={viewport:d,project:S,cullingVolume:F,elevationBounds:[P,H],minZ:J,maxZ:s,bounds:_,offset:0};if(K.update(oe),d instanceof WebMercatorViewport$1&&d.subViewports&&d.subViewports.length>1){for(oe.offset=-1;K.update(oe)&&!(--oe.offset<-MAX_MAPS););for(oe.offset=1;K.update(oe)&&!(++oe.offset>MAX_MAPS););}return K.getSelected()}const TILE_SIZE$1=512,DEFAULT_EXTENT=[-1/0,-1/0,1/0,1/0],urlType={type:"object",value:null,validate:(d,s)=>s.optional&&d===null||typeof d=="string"||Array.isArray(d)&&d.every(f=>typeof f=="string"),equal:(d,s)=>{if(d===s)return!0;if(!Array.isArray(d)||!Array.isArray(s))return!1;const f=d.length;if(f!==s.length)return!1;for(let _=0;_<f;_++)if(d[_]!==s[_])return!1;return!0}};function transformBox(d,s){const f=[s.transformAsPoint([d[0],d[1]]),s.transformAsPoint([d[2],d[1]]),s.transformAsPoint([d[0],d[3]]),s.transformAsPoint([d[2],d[3]])];return[Math.min(...f.map(S=>S[0])),Math.min(...f.map(S=>S[1])),Math.max(...f.map(S=>S[0])),Math.max(...f.map(S=>S[1]))]}function stringHash(d){return Math.abs(d.split("").reduce((s,f)=>(s<<5)-s+f.charCodeAt(0)|0,0))}function getURLFromTemplate(d,s){if(!d||!d.length)return null;const{index:f,id:_}=s;if(Array.isArray(d)){const T=stringHash(_)%d.length;d=d[T]}let S=d;for(const T of Object.keys(f)){const F=new RegExp(`{${T}}`,"g");S=S.replace(F,String(f[T]))}return Number.isInteger(f.y)&&Number.isInteger(f.z)&&(S=S.replace(/\{-y\}/g,String(Math.pow(2,f.z)-f.y-1))),S}function getBoundingBox(d,s,f){let _;return _=d.getBounds(),d.isGeospatial?[Math.max(_[0],f[0]),Math.max(_[1],f[1]),Math.min(_[2],f[2]),Math.min(_[3],f[3])]:[Math.max(Math.min(_[0],f[2]),f[0]),Math.max(Math.min(_[1],f[3]),f[1]),Math.min(Math.max(_[2],f[0]),f[2]),Math.min(Math.max(_[3],f[1]),f[3])]}function getCullBounds({viewport:d,z:s,cullRect:f}){return(d.subViewports||[d]).map(S=>getCullBoundsInViewport(S,s||0,f))}function getCullBoundsInViewport(d,s,f){if(!Array.isArray(s)){const T=f.x-d.x,F=f.y-d.y,{width:M,height:P}=f,H={targetZ:s},J=d.unproject([T,F],H),K=d.unproject([T+M,F],H),oe=d.unproject([T,F+P],H),se=d.unproject([T+M,F+P],H);return[Math.min(J[0],K[0],oe[0],se[0]),Math.min(J[1],K[1],oe[1],se[1]),Math.max(J[0],K[0],oe[0],se[0]),Math.max(J[1],K[1],oe[1],se[1])]}const _=getCullBoundsInViewport(d,s[0],f),S=getCullBoundsInViewport(d,s[1],f);return[Math.min(_[0],S[0]),Math.min(_[1],S[1]),Math.max(_[2],S[2]),Math.max(_[3],S[3])]}function getIndexingCoords(d,s,f){return f?transformBox(d,f).map(S=>S*s/TILE_SIZE$1):d.map(_=>_*s/TILE_SIZE$1)}function getScale(d,s){return Math.pow(2,d)*TILE_SIZE$1/s}function osmTile2lngLat(d,s,f){const _=getScale(f,TILE_SIZE$1),S=d/_*360-180,T=Math.PI-2*Math.PI*s/_,F=180/Math.PI*Math.atan(.5*(Math.exp(T)-Math.exp(-T)));return[S,F]}function tile2XY(d,s,f,_){const S=getScale(f,_);return[d/S*TILE_SIZE$1,s/S*TILE_SIZE$1]}function tileToBoundingBox(d,s,f,_,S=TILE_SIZE$1){if(d.isGeospatial){const[H,J]=osmTile2lngLat(s,f,_),[K,oe]=osmTile2lngLat(s+1,f+1,_);return{west:H,north:J,east:K,south:oe}}const[T,F]=tile2XY(s,f,_,S),[M,P]=tile2XY(s+1,f+1,_,S);return{left:T,top:F,right:M,bottom:P}}function getIdentityTileIndices(d,s,f,_,S){const T=getBoundingBox(d,null,_),F=getScale(s,f),[M,P,H,J]=getIndexingCoords(T,F,S),K=[];for(let oe=Math.floor(M);oe<H;oe++)for(let se=Math.floor(P);se<J;se++)K.push({x:oe,y:se,z:s});return K}function getTileIndices({viewport:d,maxZoom:s,minZoom:f,zRange:_,extent:S,tileSize:T=TILE_SIZE$1,modelMatrix:F,modelMatrixInverse:M,zoomOffset:P=0}){let H=d.isGeospatial?Math.round(d.zoom+Math.log2(TILE_SIZE$1/T))+P:Math.ceil(d.zoom)+P;if(typeof f=="number"&&Number.isFinite(f)&&H<f){if(!S)return[];H=f}typeof s=="number"&&Number.isFinite(s)&&H>s&&(H=s);let J=S;return F&&M&&S&&!d.isGeospatial&&(J=transformBox(S,F)),d.isGeospatial?getOSMTileIndices(d,H,_,S):getIdentityTileIndices(d,H,T,J||DEFAULT_EXTENT,M)}function memoize$1(d){let s={},f;return _=>{for(const S in _)if(!isEqual$1(_[S],s[S])){f=d(_),s=_;break}return f}}function isEqual$1(d,s){if(d===s)return!0;if(Array.isArray(d)){const f=d.length;if(!s||s.length!==f)return!1;for(let _=0;_<f;_++)if(d[_]!==s[_])return!1;return!0}return!1}const TILE_STATE_VISITED=1,TILE_STATE_VISIBLE=2,STRATEGY_NEVER="never",STRATEGY_REPLACE="no-overlap",STRATEGY_DEFAULT="best-available",DEFAULT_CACHE_SCALE=5,STRATEGIES={[STRATEGY_DEFAULT]:updateTileStateDefault,[STRATEGY_REPLACE]:updateTileStateReplace,[STRATEGY_NEVER]:()=>{}},DEFAULT_TILESET2D_PROPS={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};class Tileset2D{constructor(s){this._getCullBounds=memoize$1(getCullBounds),this.opts={...DEFAULT_TILESET2D_PROPS,...s},this.setOptions(this.opts),this.onTileLoad=f=>{var _,S;(S=(_=this.opts).onTileLoad)==null||S.call(_,f),this.opts.maxCacheByteSize!=null&&(this._cacheByteSize+=f.byteLength,this._resizeCache())},this._requestScheduler=new RequestScheduler({throttleRequests:this.opts.maxRequests>0||this.opts.debounceTime>0,maxRequests:this.opts.maxRequests,debounceTime:this.opts.debounceTime}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._zRange=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Matrix4,this._modelMatrixInverse=new Matrix4}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(s=>s.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(s=>s.needsReload)}setOptions(s){Object.assign(this.opts,s),Number.isFinite(s.maxZoom)&&(this._maxZoom=Math.floor(s.maxZoom)),Number.isFinite(s.minZoom)&&(this._minZoom=Math.ceil(s.minZoom))}finalize(){for(const s of this._cache.values())s.isLoading&&s.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const s of this._cache.keys()){const f=this._cache.get(s);!this._selectedTiles||!this._selectedTiles.includes(f)?this._cache.delete(s):f.setNeedsReload()}}update(s,{zRange:f,modelMatrix:_}={zRange:null,modelMatrix:null}){const S=_?new Matrix4(_):new Matrix4,T=!S.equals(this._modelMatrix);if(!this._viewport||!s.equals(this._viewport)||!equals$2(this._zRange,f)||T){T&&(this._modelMatrixInverse=S.clone().invert(),this._modelMatrix=S),this._viewport=s,this._zRange=f;const M=this.getTileIndices({viewport:s,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:f,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=M.map(P=>this._getTile(P,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(M=>this._getTile(M.index,!0)));const F=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),F&&this._frameNumber++,this._frameNumber}isTileVisible(s,f){if(!s.isVisible)return!1;if(f&&this._viewport){const _=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:f}),{bbox:S}=s;for(const[T,F,M,P]of _){let H;if("west"in S)H=S.west<M&&S.east>T&&S.south<P&&S.north>F;else{const J=Math.min(S.top,S.bottom),K=Math.max(S.top,S.bottom);H=S.left<M&&S.right>T&&J<P&&K>F}if(H)return!0}return!1}return!0}getTileIndices({viewport:s,maxZoom:f,minZoom:_,zRange:S,modelMatrix:T,modelMatrixInverse:F}){const{tileSize:M,extent:P,zoomOffset:H}=this.opts;return getTileIndices({viewport:s,maxZoom:f,minZoom:_,zRange:S,tileSize:M,extent:P,modelMatrix:T,modelMatrixInverse:F,zoomOffset:H})}getTileId(s){return`${s.x}-${s.y}-${s.z}`}getTileZoom(s){return s.z}getTileMetadata(s){const{tileSize:f}=this.opts;return{bbox:tileToBoundingBox(this._viewport,s.x,s.y,s.z,f)}}getParentIndex(s){const f=Math.floor(s.x/2),_=Math.floor(s.y/2),S=s.z-1;return{x:f,y:_,z:S}}updateTileStates(){const s=this.opts.refinementStrategy||STRATEGY_DEFAULT,f=new Array(this._cache.size);let _=0;for(const S of this._cache.values())f[_++]=S.isVisible,S.isSelected=!1,S.isVisible=!1;for(const S of this._selectedTiles)S.isSelected=!0,S.isVisible=!0;(typeof s=="function"?s:STRATEGIES[s])(Array.from(this._cache.values())),_=0;for(const S of this._cache.values())if(f[_++]!==S.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:s=0}=this.opts,f=[];let _=0;for(const S of this._cache.values())S.isLoading&&(_++,!S.isSelected&&!S.isVisible&&f.push(S));for(;s>0&&_>s&&f.length>0;)f.shift().abort(),_--}_rebuildTree(){const{_cache:s}=this;for(const f of s.values())f.parent=null,f.children&&(f.children.length=0);for(const f of s.values()){const _=this._getNearestAncestor(f);f.parent=_,_!=null&&_.children&&_.children.push(f)}}_resizeCache(){var F,M;const{_cache:s,opts:f}=this,_=f.maxCacheSize??(f.maxCacheByteSize!=null?1/0:DEFAULT_CACHE_SCALE*this.selectedTiles.length),S=f.maxCacheByteSize??1/0;if(s.size>_||this._cacheByteSize>S){for(const[P,H]of s)if(!H.isVisible&&!H.isSelected&&(this._cacheByteSize-=f.maxCacheByteSize!=null?H.byteLength:0,s.delete(P),(M=(F=this.opts).onTileUnload)==null||M.call(F,H)),s.size<=_&&this._cacheByteSize<=S)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((P,H)=>P.zoom-H.zoom),this._dirty=!1)}_getTile(s,f){const _=this.getTileId(s);let S=this._cache.get(_),T=!1;return!S&&f?(S=new Tile2DHeader(s),Object.assign(S,this.getTileMetadata(S.index)),Object.assign(S,{id:_,zoom:this.getTileZoom(S.index)}),T=!0,this._cache.set(_,S),this._dirty=!0):S&&S.needsReload&&(T=!0),S&&T&&S.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),S}_getNearestAncestor(s){const{_minZoom:f=0}=this;let _=s.index;for(;this.getTileZoom(_)>f;){_=this.getParentIndex(_);const S=this._getTile(_);if(S)return S}return null}}function updateTileStateDefault(d){for(const s of d)s.state=0;for(const s of d)s.isSelected&&!getPlaceholderInAncestors(s)&&getPlaceholderInChildren(s);for(const s of d)s.isVisible=!!(s.state&TILE_STATE_VISIBLE)}function updateTileStateReplace(d){for(const f of d)f.state=0;for(const f of d)f.isSelected&&getPlaceholderInAncestors(f);const s=Array.from(d).sort((f,_)=>f.zoom-_.zoom);for(const f of s)if(f.isVisible=!!(f.state&TILE_STATE_VISIBLE),f.children&&(f.isVisible||f.state&TILE_STATE_VISITED))for(const _ of f.children)_.state=TILE_STATE_VISITED;else f.isSelected&&getPlaceholderInChildren(f)}function getPlaceholderInAncestors(d){let s=d;for(;s;){if(s.isLoaded||s.content)return s.state|=TILE_STATE_VISIBLE,!0;s=s.parent}return!1}function getPlaceholderInChildren(d){for(const s of d.children)s.isLoaded||s.content?s.state|=TILE_STATE_VISIBLE:getPlaceholderInChildren(s)}const defaultProps$a={TilesetClass:Tileset2D,data:{type:"data",value:[]},dataComparator:urlType.equal,renderSubLayers:{type:"function",value:d=>new GeoJsonLayer(d)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:d=>{}},onTileUnload:{type:"function",value:d=>{}},onTileError:{type:"function",value:d=>console.error(d)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:STRATEGY_DEFAULT,zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0};class TileLayer extends CompositeLayer{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var s,f;(f=(s=this.state)==null?void 0:s.tileset)==null||f.finalize()}get isLoaded(){var s,f,_;return!!((_=(f=(s=this.state)==null?void 0:s.tileset)==null?void 0:f.selectedTiles)!=null&&_.every(S=>S.isLoaded&&S.layers&&S.layers.every(T=>T.isLoaded)))}shouldUpdateState({changeFlags:s}){return s.somethingChanged}updateState({changeFlags:s}){let{tileset:f}=this.state;const _=s.propsOrDataChanged||s.updateTriggersChanged,S=s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getTileData);f?_&&(f.setOptions(this._getTilesetOptions()),S?f.reloadAll():f.tiles.forEach(T=>{T.layers=null})):(f=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:f})),this._updateTileset()}_getTilesetOptions(){const{tileSize:s,maxCacheSize:f,maxCacheByteSize:_,refinementStrategy:S,extent:T,maxZoom:F,minZoom:M,maxRequests:P,debounceTime:H,zoomOffset:J}=this.props;return{maxCacheSize:f,maxCacheByteSize:_,maxZoom:F,minZoom:M,tileSize:s,refinementStrategy:S,extent:T,maxRequests:P,debounceTime:H,zoomOffset:J,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const s=this.state.tileset,{zRange:f,modelMatrix:_}=this.props,S=s.update(this.context.viewport,{zRange:f,modelMatrix:_}),{isLoaded:T}=s,F=this.state.isLoaded!==T,M=this.state.frameNumber!==S;T&&(F||M)&&this._onViewportLoad(),M&&this.setState({frameNumber:S}),this.state.isLoaded=T}_onViewportLoad(){const{tileset:s}=this.state,{onViewportLoad:f}=this.props;f&&f(s.selectedTiles)}_onTileLoad(s){this.props.onTileLoad(s),s.layers=null,this.setNeedsUpdate()}_onTileError(s,f){this.props.onTileError(s),f.layers=null,this.setNeedsUpdate()}_onTileUnload(s){this.props.onTileUnload(s)}getTileData(s){const{data:f,getTileData:_,fetch:S}=this.props,{signal:T}=s;return s.url=typeof f=="string"||Array.isArray(f)?getURLFromTemplate(f,s):null,_?_(s):S&&s.url?S(s.url,{propName:"data",layer:this,signal:T}):null}renderSubLayers(s){return this.props.renderSubLayers(s)}getSubLayerPropsByTile(s){return null}getPickingInfo(s){const f=s.sourceLayer,_=f.props.tile,S=s.info;return S.picked&&(S.tile=_),S.sourceTile=_,S.sourceTileSubLayer=f,S}_updateAutoHighlight(s){s.sourceTileSubLayer.updateAutoHighlight(s)}renderLayers(){return this.state.tileset.tiles.map(s=>{const f=this.getSubLayerPropsByTile(s);if(!(!s.isLoaded&&!s.content))if(s.layers)f&&s.layers[0]&&Object.keys(f).some(_=>s.layers[0].props[_]!==f[_])&&(s.layers=s.layers.map(_=>_.clone(f)));else{const _=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:s.id,updateTriggers:this.props.updateTriggers}),data:s.content,_offset:0,tile:s});s.layers=flatten$1(_,Boolean).map(S=>S.clone({tile:s,...f}))}return s.layers})}filterSubLayer({layer:s,cullRect:f}){const{tile:_}=s.props;return this.state.tileset.isTileVisible(_,f)}}TileLayer.defaultProps=defaultProps$a;TileLayer.layerName="TileLayer";function range$2(d){return[...Array(d).keys()]}function padWithDefault(d,s,f){for(let _=0;_<f;_+=1)d.push(s);return d}function getDtypeValues(d){const s=DTYPE_VALUES[d];if(!s){const f=Object.keys(DTYPE_VALUES);throw Error(`Dtype not supported, got ${d}. Must be one of ${f}.`)}return s}function padContrastLimits({contrastLimits:d=[],channelsVisible:s,domain:f,dtype:_}){const S=(f==null?void 0:f[1])||getDtypeValues(_).max,T=d.map((P,H)=>s[H]?P:[S,S]),F=MAX_CHANNELS-T.length;if(F<0)throw Error(`${T.lengths} channels passed in, but only 6 are allowed.`);return padWithDefault(T,[S,S],F).reduce((P,H)=>P.concat(H),[])}function getPhysicalSizeScalingMatrix$1(d){var S;const{x:s,y:f,z:_}=((S=d==null?void 0:d.meta)==null?void 0:S.physicalSizes)??{};if(s!=null&&s.size&&(f!=null&&f.size)&&(_!=null&&_.size)){const T=Math.min(_.size,s.size,f.size),F=[s.size/T,f.size/T,_.size/T];return new Matrix4().scale(F)}return new Matrix4().identity()}function makeBoundingBox(d){const s=new OrthographicView().makeViewport({viewState:d,height:d.height,width:d.width});return[s.unproject([0,0]),s.unproject([s.width,0]),s.unproject([s.width,s.height]),s.unproject([0,s.height])]}const TARGETS=[1,2,3,4,5,10,20,25,50,100,200,250,500,1e3],MIN_TARGET=TARGETS[0],MAX_TARGET=TARGETS[TARGETS.length-1],SI_PREFIXES=[{symbol:"Y",exponent:24},{symbol:"Z",exponent:21},{symbol:"E",exponent:18},{symbol:"P",exponent:15},{symbol:"T",exponent:12},{symbol:"G",exponent:9},{symbol:"M",exponent:6},{symbol:"k",exponent:3},{symbol:"h",exponent:2},{symbol:"da",exponent:1},{symbol:"",exponent:0},{symbol:"d",exponent:-1},{symbol:"c",exponent:-2},{symbol:"m",exponent:-3},{symbol:"",exponent:-6},{symbol:"n",exponent:-9},{symbol:"p",exponent:-12},{symbol:"f",exponent:-15},{symbol:"a",exponent:-18},{symbol:"z",exponent:-21},{symbol:"y",exponent:-24}];function sizeToMeters(d,s){if(!s||s==="m")return d;if(s.length>1){let f=s.substring(0,s.length-1);f==="u"&&(f="");const _=SI_PREFIXES.find(S=>S.symbol===f);if(_)return d*10**_.exponent}throw new Error("Received unknown unit")}function snapValue(d){let s=0;(d<MIN_TARGET||d>MAX_TARGET)&&(s=Math.floor(Math.log10(d)));let f=SI_PREFIXES.find(F=>F.exponent%3===0&&F.exponent<=s),_=d/10**f.exponent;_>500&&_<=1e3&&(f=SI_PREFIXES.find(F=>F.exponent%3===0&&F.exponent<=s+3),_=d/10**f.exponent);const S=TARGETS.find(F=>F>_);return[S*10**f.exponent,S,f.symbol]}function addAlpha(d){if(!(d instanceof Uint8Array))throw new Error("Expected Uint8Array");const s=new Uint8Array(d.length+d.length/3);for(let f=0;f<d.length/3;f+=1)s[f*4]=d[f*3],s[f*4+1]=d[f*3+1],s[f*4+2]=d[f*3+2],s[f*4+3]=255;return s}const PHOTOMETRIC_INTERPRETATIONS={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},defaultProps$8={...BitmapLayer$1.defaultProps,pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:COORDINATE_SYSTEM.CARTESIAN},getPhotometricInterpretationShader=(d,s)=>{const f=s?"true":"false",_=`vec3(${(s||[0,0,0]).map(S=>String(S/255)).join(",")})`;switch(d){case PHOTOMETRIC_INTERPRETATIONS.RGB:return`color[3] = (${f} && (color.rgb == ${_})) ? 0.0 : color.a;`;case PHOTOMETRIC_INTERPRETATIONS.WhiteIsZero:return`          float value = 1.0 - (color.r / 256.0);
          color = vec4(value, value, value, (${f} && vec3(value, value, value) == ${_}) ? 0.0 : color.a);
        `;case PHOTOMETRIC_INTERPRETATIONS.BlackIsZero:return`          float value = (color.r / 256.0);
          color = vec4(value, value, value, (${f} && vec3(value, value, value) == ${_}) ? 0.0 : color.a);
        `;case PHOTOMETRIC_INTERPRETATIONS.YCbCr:return`          float y = color[0];
          float cb = color[1];
          float cr = color[2];
          color[0] = (y + (1.40200 * (cr - .5)));
          color[1] = (y - (0.34414 * (cb - .5)) - (0.71414 * (cr - .5)));
          color[2] = (y + (1.77200 * (cb - .5)));
          color[3] = (${f} && distance(color.rgb, ${_}) < 0.01) ? 0.0 : color.a;
        `;default:return console.error("Unsupported photometric interpretation or none provided.  No transformation will be done to image data"),""}},getTransparentColor=d=>{switch(d){case PHOTOMETRIC_INTERPRETATIONS.RGB:return[0,0,0,0];case PHOTOMETRIC_INTERPRETATIONS.WhiteIsZero:return[255,255,255,0];case PHOTOMETRIC_INTERPRETATIONS.BlackIsZero:return[0,0,0,0];case PHOTOMETRIC_INTERPRETATIONS.YCbCr:return[16,128,128,0];default:return console.error("Unsupported photometric interpretation or none provided.  No transformation will be done to image data"),[0,0,0,0]}};class BitmapLayerWrapper extends BitmapLayer$1{_getModel(s){const{photometricInterpretation:f,transparentColorInHook:_}=this.props,S=getPhotometricInterpretationShader(f,_);return new Model(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),topology:"triangle-list",isInstanced:!1,inject:{"fs:DECKGL_FILTER_COLOR":S}})}}const BitmapLayer=class extends CompositeLayer{initializeState(d){const{device:s}=this.context;s.setParametersWebGL({[GLEnum.UNPACK_ALIGNMENT]:1,[GLEnum.PACK_ALIGNMENT]:1}),super.initializeState(d)}renderLayers(){const{photometricInterpretation:d,transparentColor:s}=this.props,f=getTransparentColor(d);return this.props.image.data=addAlpha(this.props.image.data),new BitmapLayerWrapper(this.props,{transparentColor:f,transparentColorInHook:s,id:`${this.props.id}-wrapped`})}};BitmapLayer.layerName="BitmapLayer";BitmapLayer.PHOTOMETRIC_INTERPRETATIONS=PHOTOMETRIC_INTERPRETATIONS;BitmapLayer.defaultProps={...defaultProps$8,image:{type:"object",value:{},compare:!0},transparentColor:{type:"array",value:[0,0,0],compare:!0},photometricInterpretation:{type:"number",value:2,compare:!0}};BitmapLayerWrapper.defaultProps=defaultProps$8;BitmapLayerWrapper.layerName="BitmapLayerWrapper";const fs$2=`float apply_contrast_limits(float intensity, vec2 contrastLimits) {
    return  max(0., (intensity - contrastLimits[0]) / max(0.0005, (contrastLimits[1] - contrastLimits[0])));
}
`,channels={name:"channel-intensity",defines:{SAMPLER_TYPE:"usampler2D",COLORMAP_FUNCTION:""},fs:fs$2},fs$1$1=`#version 300 es
#define SHADER_NAME xr-layer-fragment-shader

precision highp float;
precision highp int;
precision highp SAMPLER_TYPE;

// our texture
uniform SAMPLER_TYPE channel0;
uniform SAMPLER_TYPE channel1;
uniform SAMPLER_TYPE channel2;
uniform SAMPLER_TYPE channel3;
uniform SAMPLER_TYPE channel4;
uniform SAMPLER_TYPE channel5;

in vec2 vTexCoord;

// range
uniform vec2 contrastLimits[6];

out vec4 fragColor;

void main() {

  float intensity0 = float(texture(channel0, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity0, contrastLimits[0], 0);
  float intensity1 = float(texture(channel1, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity1, contrastLimits[1], 1);
  float intensity2 = float(texture(channel2, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity2, contrastLimits[2], 2);
  float intensity3 = float(texture(channel3, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity3, contrastLimits[3], 3);
  float intensity4 = float(texture(channel4, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity4, contrastLimits[4], 4);
  float intensity5 = float(texture(channel5, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity5, contrastLimits[5], 5);

  DECKGL_MUTATE_COLOR(fragColor, intensity0, intensity1, intensity2, intensity3, intensity4, intensity5, vTexCoord);


  geometry.uv = vTexCoord;
  DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,vs$1$1=`#version 300 es
#define SHADER_NAME xr-layer-vertex-shader

in vec2 texCoords;
in vec3 positions;
in vec3 positions64Low;
in vec3 instancePickingColors;
out vec2 vTexCoord;

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = instancePickingColors;
  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  vTexCoord = texCoords;
  vec4 color = vec4(0.);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,coreShaderModule={fs:fs$1$1,vs:vs$1$1};function getRenderingAttrs$1(d,s,f){const _=f==="linear",S=getDtypeValues(_?"Float32":d);return{shaderModule:coreShaderModule,filter:f,cast:_?T=>new Float32Array(T):T=>T,...S}}const defaultProps$7={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,channelData:{type:"object",value:{},compare:!0},bounds:{type:"array",value:[0,0,1,1],compare:!0},contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},dtype:{type:"string",value:"Uint16",compare:!0},interpolation:{type:"string",value:"nearest",compare:!0}},XRLayer=class extends Layer{getShaders(){const{dtype:d,interpolation:s}=this.props,{shaderModule:f,sampler:_}=getRenderingAttrs$1(d,this.context.device,s),S=this._isHookDefinedByExtensions("fs:DECKGL_PROCESS_INTENSITY"),T={...channels,inject:{}};return S||(T.inject["fs:DECKGL_PROCESS_INTENSITY"]=`
        intensity = apply_contrast_limits(intensity, contrastLimits);
      `),super.getShaders({...f,defines:{SAMPLER_TYPE:_},modules:[project32,picking,T]})}_isHookDefinedByExtensions(d){const{extensions:s}=this.props;return s==null?void 0:s.some(f=>{const _=f.getShaders(),{inject:S={},modules:T=[]}=_,F=S[d],M=T.some(P=>P==null?void 0:P.inject[d]);return F||M})}initializeState(){const{device:d}=this.context;d.setParametersWebGL({[GLEnum.UNPACK_ALIGNMENT]:1,[GLEnum.PACK_ALIGNMENT]:1}),this.getAttributeManager().add({positions:{size:3,type:"float64",fp64:this.use64bitPositions(),update:this.calculatePositions,noAlloc:!0}}),this.setState({numInstances:1,positions:new Float64Array(12)});const f=ShaderAssembler.getDefaultShaderAssembler(),_="fs:DECKGL_MUTATE_COLOR(inout vec4 rgba, float intensity0, float intensity1, float intensity2, float intensity3, float intensity4, float intensity5, vec2 vTexCoord)",S="fs:DECKGL_PROCESS_INTENSITY(inout float intensity, vec2 contrastLimits, int channelIndex)";f._hookFunctions.includes(_)||f.addShaderHook(_),f._hookFunctions.includes(S)||f.addShaderHook(S)}finalizeState(){super.finalizeState(),this.state.textures&&Object.values(this.state.textures).forEach(d=>d==null?void 0:d.delete())}updateState({props:d,oldProps:s,changeFlags:f,..._}){var T,F;if(super.updateState({props:d,oldProps:s,changeFlags:f,..._}),f.extensionsChanged||d.interpolation!==s.interpolation){const{device:M}=this.context;this.state.model&&this.state.model.destroy(),this.setState({model:this._getModel(M)}),this.getAttributeManager().invalidateAll()}(d.channelData!==s.channelData&&((T=d.channelData)==null?void 0:T.data)!==((F=s.channelData)==null?void 0:F.data)||d.interpolation!==s.interpolation)&&this.loadChannelTextures(d.channelData);const S=this.getAttributeManager();d.bounds!==s.bounds&&S.invalidate("positions")}_getModel(d){return d?new Model(d,{...this.getShaders(),id:this.props.id,geometry:new Geometry$1({topology:"triangle-list",vertexCount:6,indices:new Uint16Array([0,1,3,1,2,3]),attributes:{texCoords:{value:new Float32Array([0,1,0,0,1,0,1,1]),size:2}}}),bufferLayout:this.getAttributeManager().getBufferLayouts(),isInstanced:!1}):null}calculatePositions(d){const{positions:s}=this.state,{bounds:f}=this.props;s[0]=f[0],s[1]=f[1],s[2]=0,s[3]=f[0],s[4]=f[3],s[5]=0,s[6]=f[2],s[7]=f[3],s[8]=0,s[9]=f[2],s[10]=f[1],s[11]=0,d.value=s}draw(d){const{uniforms:s}=d,{textures:f,model:_}=this.state;if(f&&_){const{contrastLimits:S,domain:T,dtype:F,channelsVisible:M}=this.props,P=Object.values(f).filter(J=>J).length,H=padContrastLimits({contrastLimits:S.slice(0,P),channelsVisible:M.slice(0,P),domain:T,dtype:F});_.setUniforms({...s,contrastLimits:H},{disableWarnings:!1}),_.setBindings(f),_.draw(d)}}loadChannelTextures(d){const s={channel0:null,channel1:null,channel2:null,channel3:null,channel4:null,channel5:null};if(this.state.textures&&Object.values(this.state.textures).forEach(f=>f==null?void 0:f.delete()),d&&Object.keys(d).length>0&&d.data){d.data.forEach((f,_)=>{s[`channel${_}`]=this.dataToTexture(f,d.width,d.height)},this);for(const f in s){if(!s.channel0)throw new Error("Bad texture state!");s[f]||(s[f]=s.channel0)}this.setState({textures:s})}}dataToTexture(d,s,f){var T;const{interpolation:_}=this.props,S=getRenderingAttrs$1(this.props.dtype,this.context.device,_);return this.context.device.createTexture({width:s,height:f,dimension:"2d",data:((T=S.cast)==null?void 0:T.call(S,d))??d,mipmaps:!1,sampler:{minFilter:S.filter,magFilter:S.filter,addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},format:S.format})}};XRLayer.layerName="XRLayer";XRLayer.defaultProps=defaultProps$7;const defaultProps$6={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},selections:{type:"array",value:[],compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},loader:{type:"object",value:{getRaster:async()=>({data:[],height:0,width:0}),dtype:"Uint16",shape:[]},compare:!0},onClick:{type:"function",value:null,compare:!0},onViewportLoad:{type:"function",value:null,compare:!0},interpolation:{type:"number",value:"nearest",compare:!0},extensions:{type:"array",value:[new ColorPaletteExtension],compare:!0}},ImageLayer=class extends CompositeLayer{finalizeState(){this.state.abortController.abort()}updateState({props:d,oldProps:s}){const f=d.loader!==s.loader,_=d.selections!==s.selections;if(f||_){const{loader:S,selections:T=[],onViewportLoad:F}=this.props,M=new AbortController;this.setState({abortController:M});const{signal:P}=M,H=K=>S.getRaster({selection:K,signal:P}),J=T.map(H);Promise.all(J).then(K=>{var se,ae;const oe={data:K.map(ge=>ge.data),width:(se=K[0])==null?void 0:se.width,height:(ae=K[0])==null?void 0:ae.height};isInterleaved$1(S.shape)&&(oe.data=oe.data[0],oe.data.length===oe.width*oe.height*3&&(oe.format="rgba8unorm")),F&&F(oe),this.setState({...oe})}).catch(K=>{if(K!==SIGNAL_ABORTED)throw K})}}getPickingInfo({info:d,sourceLayer:s}){return d.sourceLayer=s,d.tile=s.props.tile,d}renderLayers(){const{loader:d,id:s}=this.props,{dtype:f}=d,{width:_,height:S,data:T}=this.state;if(!(_&&S))return null;const F=[0,S,_,0];if(isInterleaved$1(d.shape)){const{photometricInterpretation:M=2}=d.meta;return new BitmapLayer(this.props,{image:this.state,photometricInterpretation:M,bounds:F,id:`image-sub-layer-${F}-${s}`,extensions:[]})}return new XRLayer(this.props,{channelData:{data:T,height:S,width:_},bounds:F,id:`image-sub-layer-${F}-${s}`,dtype:f})}};ImageLayer.layerName="ImageLayer";ImageLayer.defaultProps=defaultProps$6;function renderSubLayers(d){const{bbox:{left:s,top:f,right:_,bottom:S},index:{x:T,y:F,z:M}}=d.tile,{data:P,id:H,loader:J,maxZoom:K}=d;if([s,S,_,f].some(he=>he<0)||!P)return null;const oe=J[0],{height:se,width:ae}=getImageSize(oe),ge=[s,P.height<oe.tileSize?se:S,P.width<oe.tileSize?ae:_,f];if(isInterleaved$1(oe.shape)){const{photometricInterpretation:he=2}=oe.meta;return new BitmapLayer(d,{image:P,photometricInterpretation:he,bounds:ge,id:`tile-sub-layer-${ge}-${H}`,tileId:{x:T,y:F,z:M},extensions:[]})}return new XRLayer(d,{channelData:P,bounds:ge,id:`tile-sub-layer-${ge}-${H}`,tileId:{x:T,y:F,z:M},interpolation:M===K?"nearest":"linear"})}const defaultProps$5={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},renderSubLayers:{type:"function",value:renderSubLayers,compare:!1},dtype:{type:"string",value:"Uint16",compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},interpolation:{type:"number",value:null,compare:!0}};class MultiscaleImageLayerBase extends TileLayer{_updateTileset(){this.props.viewportId||super._updateTileset(),(this.props.viewportId&&this.context.viewport.id===this.props.viewportId||!this.state.tileset._viewport)&&super._updateTileset()}}MultiscaleImageLayerBase.layerName="MultiscaleImageLayerBase";MultiscaleImageLayerBase.defaultProps=defaultProps$5;const defaultProps$4={pickable:{type:"boolean",value:!0,compare:!0},onHover:{type:"function",value:null,compare:!1},contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},maxRequests:{type:"number",value:10,compare:!0},onClick:{type:"function",value:null,compare:!0},refinementStrategy:{type:"string",value:null,compare:!0},excludeBackground:{type:"boolean",value:!1,compare:!0},extensions:{type:"array",value:[new ColorPaletteExtension],compare:!0}},MultiscaleImageLayer=class extends CompositeLayer{renderLayers(){const{loader:d,selections:s,opacity:f,viewportId:_,onTileError:S,onHover:T,id:F,onClick:M,modelMatrix:P,excludeBackground:H,refinementStrategy:J}=this.props,{tileSize:K,dtype:oe}=d[0],se=async({index:{x:Me,y:ve,z:At},signal:Ct})=>{if(!s||s.length===0)return null;const Rt=Math.round(-At),It=xt=>{const wt={x:Me,y:ve,selection:xt,signal:Ct};return d[Rt].getTile(wt)};try{const xt=await Promise.all(s.map(It)),wt={data:xt.map(Ft=>Ft.data),width:xt[0].width,height:xt[0].height};return isInterleaved$1(d[Rt].shape)&&(wt.data=wt.data[0],wt.data.length===wt.width*wt.height*3&&(wt.format="rgba8unorm")),wt}catch(xt){if(xt===SIGNAL_ABORTED)return null;throw xt}},{height:ae,width:ge}=getImageSize(d[0]),he=new MultiscaleImageLayerBase(this.props,{id:`Tiled-Image-${F}`,getTileData:se,dtype:oe,tileSize:K,zoomOffset:Math.round(Math.log2(P?P.getScale()[0]:1)),extent:[0,0,ge,ae],minZoom:Math.round(-(d.length-1)),maxZoom:0,refinementStrategy:J||(f===1?"best-available":"no-overlap"),updateTriggers:{getTileData:[d,s]},onTileError:S||d[0].onTileError}),Be=d[d.length-1],pe=typeof Be.getRaster=="function",be=P?P.clone():new Matrix4;return[pe&&!H&&new ImageLayer(this.props,{id:`Background-Image-${F}`,loader:Be,modelMatrix:be.scale(2**(d.length-1)),visible:!_||this.context.viewport.id===_,onHover:T,onClick:M,interpolation:"linear",onViewportLoad:null}),he]}};MultiscaleImageLayer.layerName="MultiscaleImageLayer";MultiscaleImageLayer.defaultProps=defaultProps$4;const defaultProps$3$1={pickable:{type:"boolean",value:!0,compare:!0},loader:{type:"object",value:{getRaster:async()=>({data:[],height:0,width:0}),getRasterSize:()=>({height:0,width:0}),dtype:"<u2"},compare:!0},id:{type:"string",value:"",compare:!0},boundingBox:{type:"array",value:[[0,0],[0,1],[1,1],[1,0]],compare:!0},boundingBoxColor:{type:"array",value:[255,0,0],compare:!0},boundingBoxOutlineWidth:{type:"number",value:1,compare:!0},viewportOutlineColor:{type:"array",value:[255,190,0],compare:!0},viewportOutlineWidth:{type:"number",value:2,compare:!0},overviewScale:{type:"number",value:1,compare:!0},zoom:{type:"number",value:1,compare:!0},extensions:{type:"array",value:[new ColorPaletteExtension],compare:!0}},OverviewLayer=class extends CompositeLayer{renderLayers(){const{loader:d,id:s,zoom:f,boundingBox:_,boundingBoxColor:S,boundingBoxOutlineWidth:T,viewportOutlineColor:F,viewportOutlineWidth:M,overviewScale:P}=this.props,{width:H,height:J}=getImageSize(d[0]),K=d.length-1,oe=d[K],se=new ImageLayer(this.props,{id:`viewport-${s}`,modelMatrix:new Matrix4().scale(2**K*P),loader:oe}),ae=new PolygonLayer({id:`bounding-box-overview-${s}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[_],getPolygon:Be=>Be,filled:!1,stroked:!0,getLineColor:S,getLineWidth:T*2**f}),ge=new PolygonLayer({id:`viewport-outline-${s}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[[[0,0],[H*P,0],[H*P,J*P],[0,J*P]]],getPolygon:Be=>Be,filled:!1,stroked:!0,getLineColor:F,getLineWidth:M*2**f});return[se,ae,ge]}};OverviewLayer.layerName="OverviewLayer";OverviewLayer.defaultProps=defaultProps$3$1;function getPosition(d,s,f){const _=d[2][0]-d[0][0],S=d[2][1]-d[0][1];switch(s){case"bottom-right":{const T=d[2][1]-S*f,F=d[2][0]-_*f;return[T,F]}case"top-right":{const T=d[0][1]+S*f,F=d[2][0]-_*f;return[T,F]}case"top-left":{const T=d[0][1]+S*f,F=d[0][0]+_*f;return[T,F]}case"bottom-left":{const T=d[2][1]-S*f,F=d[0][0]+_*f;return[T,F]}default:throw new Error(`Position ${s} not found`)}}const defaultProps$2$1={pickable:{type:"boolean",value:!0,compare:!0},viewState:{type:"object",value:{zoom:0,target:[0,0,0],width:1,height:1},compare:!0},unit:{type:"string",value:"",compare:!0},size:{type:"number",value:1,compare:!0},position:{type:"string",value:"bottom-right",compare:!0},length:{type:"number",value:.085,compare:!0},snap:{type:"boolean",value:!1,compare:!0}},ScaleBarLayer=class extends CompositeLayer{renderLayers(){const{id:d,unit:s,size:f,position:_,viewState:S,length:T,snap:F}=this.props,M=makeBoundingBox(S),{zoom:P}=S,J=(M[2][0]-M[0][0])*.05,K=Math.max(2**(-P+1.5),(M[2][1]-M[0][1])*.007);let oe=J,se=(J*f).toPrecision(5),ae=s;if(F){const ve=sizeToMeters(f,s),At=J*ve,[Ct,Rt,It]=snapValue(At);oe=Ct/ve,se=Rt,ae=`${It}m`}const[ge,he]=getPosition(M,_,T),Be=he+J,pe=_.endsWith("-left"),be=new LineLayer({id:`scale-bar-length-${d}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[[[pe?he:Be-oe,ge],[pe?he+oe:Be,ge]]],getSourcePosition:ve=>ve[0],getTargetPosition:ve=>ve[1],getWidth:2,getColor:[220,220,220]}),Re=new LineLayer({id:`scale-bar-height-left-${d}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[[[pe?he:Be-oe,ge-K],[pe?he:Be-oe,ge+K]]],getSourcePosition:ve=>ve[0],getTargetPosition:ve=>ve[1],getWidth:2,getColor:[220,220,220]}),Fe=new LineLayer({id:`scale-bar-height-right-${d}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[[[pe?he+oe:Be,ge-K],[pe?he+oe:Be,ge+K]]],getSourcePosition:ve=>ve[0],getTargetPosition:ve=>ve[1],getWidth:2,getColor:[220,220,220]}),Me=new TextLayer({id:`units-label-layer-${d}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[{text:`${se}${ae}`,position:[pe?he+J*.5:Be-J*.5,ge+K*4]}],getColor:[220,220,220,255],getSize:12,fontFamily:DEFAULT_FONT_FAMILY,sizeUnits:"meters",sizeScale:2**-P,characterSet:[...ae.split(""),...range$2(10).map(ve=>String(ve)),".","e","+"]});return[be,Re,Fe,Me]}};ScaleBarLayer.layerName="ScaleBarLayer";ScaleBarLayer.defaultProps=defaultProps$2$1;const fs$3=`#version 300 es
precision highp int;
precision highp float;
precision highp SAMPLER_TYPE;

uniform highp SAMPLER_TYPE volume0;
uniform highp SAMPLER_TYPE volume1;
uniform highp SAMPLER_TYPE volume2;
uniform highp SAMPLER_TYPE volume3;
uniform highp SAMPLER_TYPE volume4;
uniform highp SAMPLER_TYPE volume5;

uniform vec3 scaledDimensions;

uniform mat4 scale;

uniform vec3 normals[NUM_PLANES];
uniform float distances[NUM_PLANES];

// color
uniform vec3 colors[6];

// slices
uniform vec2 xSlice;
uniform vec2 ySlice;
uniform vec2 zSlice;

// range
uniform vec2 contrastLimits[6];

in vec3 vray_dir;
flat in vec3 transformed_eye;
out vec4 color;

vec2 intersect_box(vec3 orig, vec3 dir) {
	vec3 box_min = vec3(xSlice[0], ySlice[0], zSlice[0]);
	vec3 box_max = vec3(xSlice[1], ySlice[1], zSlice[1]);
	vec3 inv_dir = 1. / dir;
	vec3 tmin_tmp = (box_min - orig) * inv_dir;
	vec3 tmax_tmp = (box_max - orig) * inv_dir;
	vec3 tmin = min(tmin_tmp, tmax_tmp);
	vec3 tmax = max(tmin_tmp, tmax_tmp);
	float t0 = max(tmin.x, max(tmin.y, tmin.z));
  float t1 = min(tmax.x, min(tmax.y, tmax.z));
  vec2 val = vec2(t0, t1);
	return val;
}

float linear_to_srgb(float x) {
	if (x <= 0.0031308f) {
		return 12.92f * x;
	}
	return 1.055f * pow(x, 1.f / 2.4f) - 0.055f;
}

// Pseudo-random number gen from
// http://www.reedbeta.com/blog/quick-and-easy-gpu-random-numbers-in-d3d11/
// with some tweaks for the range of values
float wang_hash(int seed) {
	seed = (seed ^ 61) ^ (seed >> 16);
	seed *= 9;
	seed = seed ^ (seed >> 4);
	seed *= 0x27d4eb2d;
	seed = seed ^ (seed >> 15);
	return float(seed % 2147483647) / float(2147483647);
}


void main(void) {
	// Step 1: Normalize the view ray
	vec3 ray_dir = normalize(vray_dir);

	// Step 2: Intersect the ray with the volume bounds to find the interval
	// along the ray overlapped by the volume.
	vec2 t_hit = intersect_box(transformed_eye, ray_dir);
	if (t_hit.x > t_hit.y) {
		discard;
	}
	// We don't want to sample voxels behind the eye if it's
	// inside the volume, so keep the starting point at or in front
	// of the eye
	t_hit.x = max(t_hit.x, 0.);

	// Step 3: Compute the step size to march through the volume grid
	vec3 dt_vec = 1. / (scale * vec4(abs(ray_dir), 1.)).xyz;
	float dt = 1. * min(dt_vec.x, min(dt_vec.y, dt_vec.z));

	float offset = wang_hash(int(gl_FragCoord.x + 640. * gl_FragCoord.y));

	// Step 4: Starting from the entry point, march the ray through the volume
	// and sample it
	vec3 p = transformed_eye + (t_hit.x + offset * dt) * ray_dir;

	// TODO: Probably want to stop this process at some point to improve performance when marching down the edges.
	_BEFORE_RENDER
	for (float t = t_hit.x; t < t_hit.y; t += dt) {
		// Check if this point is on the "positive" side or "negative" side of the plane - only show positive.
		float canShow = 1.;
		for (int i = 0; i < NUM_PLANES; i += 1) {
			canShow *= max(0., sign(dot(normals[i], p) + distances[i]));
		}
		// Do not show coordinates outside 0-1 box.
		// Something about the undefined behavior outside the box causes the additive blender to 
		// render some very odd artifacts.
		float canShowXCoordinate = max(p.x - 0., 0.) * max(1. - p.x , 0.);
		float canShowYCoordinate = max(p.y - 0., 0.) * max(1. - p.y , 0.);
		float canShowZCoordinate = max(p.z - 0., 0.) * max(1. - p.z , 0.);
		float canShowCoordinate = float(ceil(canShowXCoordinate * canShowYCoordinate * canShowZCoordinate));
		canShow = canShowCoordinate * canShow;
		float intensityValue0 = float(texture(volume0, p).r);
		DECKGL_PROCESS_INTENSITY(intensityValue0, contrastLimits[0], 0);
		intensityValue0 = canShow * intensityValue0;
		float intensityValue1 = float(texture(volume1, p).r);
		DECKGL_PROCESS_INTENSITY(intensityValue1, contrastLimits[1], 1);
		intensityValue1 = canShow * intensityValue1;
		float intensityValue2 = float(texture(volume2, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue2, contrastLimits[2], 2);
		intensityValue2 = canShow * intensityValue2;
		float intensityValue3 = float(texture(volume3, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue3, contrastLimits[3], 3);
		intensityValue3 = canShow * intensityValue3;
    	float intensityValue4 = float(texture(volume4, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue4, contrastLimits[4], 4);
		intensityValue4 = canShow * intensityValue4;
		float intensityValue5 = float(texture(volume5, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue5, contrastLimits[5], 5);
		intensityValue5 = canShow * intensityValue5;

		_RENDER

		p += ray_dir * dt;
	}
	_AFTER_RENDER
  color.r = linear_to_srgb(color.r);
  color.g = linear_to_srgb(color.g);
  color.b = linear_to_srgb(color.b);
}
`,vs$2=`#version 300 es
#define SHADER_NAME xr-layer-vertex-shader

// Unit-cube vertices
in vec3 positions;

// Eye position - last column of the inverted view matrix
uniform vec3 eye_pos;
// Projection matrix
uniform mat4 proj;
// Model Matrix
uniform mat4 model;
// View Matrix
uniform mat4 view;
// A matrix for scaling in the model space before any transformations.
// This projects the unit cube up to match the "pixel size" multiplied by the physical size ratio, if provided.
uniform mat4 scale;
uniform mat4 resolution;


out vec3 vray_dir;
flat out vec3 transformed_eye;

void main() {

  // Step 1: Standard MVP transformation (+ the scale matrix) to place the positions on your 2D screen ready for rasterization + fragment processing.
  gl_Position = proj * view * model * scale * resolution * vec4(positions, 1.);

  // Step 2: Invert the eye back from world space to the normalized 0-1 cube world space because ray casting on the fragment shader runs in 0-1 space.
  // Geometrically, the transformed_eye is a position relative to the 0-1 normalized vertices, which themselves are the inverse of the model + scale trasnformation.
  // See below for an example which does not involve a scale transformation, for simplicity, but motivates geometrically the needed transformation on eye_pos.
  /*
  This first diagram is a skewed volume (i.e a "shear" model matrix applied) top down with the eye marked as #, all in world space
       ^
    ___|__
    \\  |  \\
     \\ |   \\
      \\|____\\
       | 
       | 
       |
       #

  This next diagram shows the volume after the inverse model matrix has placed it back in model coordinates, but the eye still in world space. 
       ^
    ___|___
    |  |  |
    |  |  |
    |__|__|
       |
       |
       |
       #

  Finally, we apply the inverse model matrix transformation to the eye as well to bring it too into world space.
  Notice that the ray here matches the "voxels" through which the first ray also passes, as desired.
         ^
    ____/__
    |  /  |
    | /   |
    |/____|
    /
   /
  /
 #
  */
  transformed_eye = (inverse(resolution) * inverse(scale) * inverse(model) * (vec4(eye_pos, 1.))).xyz;

  // Step 3: Rays are from eye to vertices so that they get interpolated over the fragments.
  vray_dir = positions - transformed_eye;
}
`,channelsModule={name:"channel-intensity-module",fs:`    float apply_contrast_limits(float intensity, vec2 contrastLimits) {
      float contrastLimitsAppliedToIntensity = (intensity - contrastLimits[0]) / max(0.0005, (contrastLimits[1] - contrastLimits[0]));
      return max(0., contrastLimitsAppliedToIntensity);
    }
  `},CUBE_STRIP=[1,1,0,0,1,0,1,1,1,0,1,1,0,0,1,0,1,0,0,0,0,1,1,0,1,0,0,1,1,1,1,0,1,0,0,1,1,0,0,0,0,0],NUM_PLANES_DEFAULT=1,defaultProps$1$1={pickable:!1,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,channelData:{type:"object",value:{},compare:!0},contrastLimits:{type:"array",value:[],compare:!0},dtype:{type:"string",value:"Uint8",compare:!0},xSlice:{type:"array",value:null,compare:!0},ySlice:{type:"array",value:null,compare:!0},zSlice:{type:"array",value:null,compare:!0},clippingPlanes:{type:"array",value:[],compare:!0},resolutionMatrix:{type:"object",value:new Matrix4,compare:!0},channelsVisible:{type:"array",value:[],compare:!0},extensions:{type:"array",value:[new ColorPalette3DExtensions.AdditiveBlendExtension],compare:!0}};function getRenderingAttrs(){const d=getDtypeValues("Float32");return{...d,sampler:d.sampler.replace("2D","3D"),cast:s=>new Float32Array(s)}}function getRenderingFromExtensions(d){let s={};if(d.forEach(f=>{s=f.rendering}),!s._RENDER)throw new Error("XR3DLayer requires at least one extension to define opts.rendering as an object with _RENDER as a property at the minimum.");return s}const XR3DLayer=class extends Layer{initializeState(){const{device:d}=this.context;d.setParametersWebGL({[GLEnum.UNPACK_ALIGNMENT]:1,[GLEnum.PACK_ALIGNMENT]:1});const s=ShaderAssembler.getDefaultShaderAssembler(),f="fs:DECKGL_PROCESS_INTENSITY(inout float intensity, vec2 contrastLimits, int channelIndex)";s._hookFunctions.includes(f)||s.addShaderHook(f)}_isHookDefinedByExtensions(d){const{extensions:s}=this.props;return s==null?void 0:s.some(f=>{const _=f.getShaders();if(_){const{inject:S={},modules:T=[]}=_,F=S[d],M=T.some(P=>{var H;return(H=P==null?void 0:P.inject)==null?void 0:H[d]});return F||M}return!1})}getShaders(){const{clippingPlanes:d,extensions:s}=this.props,{sampler:f}=getRenderingAttrs(),{_BEFORE_RENDER:_,_RENDER:S,_AFTER_RENDER:T}=getRenderingFromExtensions(s),F=this._isHookDefinedByExtensions("fs:DECKGL_PROCESS_INTENSITY"),M={inject:{},...channelsModule};return F||(M.inject["fs:DECKGL_PROCESS_INTENSITY"]=`
        intensity = apply_contrast_limits(intensity, contrastLimits);
      `),super.getShaders({vs:vs$2,fs:fs$3.replace("_BEFORE_RENDER",_).replace("_RENDER",S).replace("_AFTER_RENDER",T),defines:{SAMPLER_TYPE:f,NUM_PLANES:String(d.length||NUM_PLANES_DEFAULT)},modules:[M]})}finalizeState(){super.finalizeState(),this.state.textures&&Object.values(this.state.textures).forEach(d=>d==null?void 0:d.delete())}updateState({props:d,oldProps:s,changeFlags:f}){var _,S;if(f.extensionsChanged||d.colormap!==s.colormap||d.renderingMode!==s.renderingMode||d.clippingPlanes.length!==s.clippingPlanes.length){const{device:T}=this.context;this.state.model&&this.state.model.destroy(),this.setState({model:this._getModel(T)})}d.channelData&&((_=d==null?void 0:d.channelData)==null?void 0:_.data)!==((S=s==null?void 0:s.channelData)==null?void 0:S.data)&&this.loadTexture(d.channelData)}_getModel(d){return d?new Model(d,{...this.getShaders(),geometry:new Geometry$1({topology:"triangle-strip",attributes:{positions:new Float32Array(CUBE_STRIP)}})}):null}draw(d){const{uniforms:s}=d,{textures:f,model:_,scaleMatrix:S}=this.state,{contrastLimits:T,xSlice:F,ySlice:M,zSlice:P,modelMatrix:H,channelsVisible:J,domain:K,dtype:oe,clippingPlanes:se,resolutionMatrix:ae}=this.props,{viewMatrix:ge,viewMatrixInverse:he,projectionMatrix:Be}=this.context.viewport;if(f&&_&&S){const pe=padContrastLimits({contrastLimits:T,channelsVisible:J,domain:K,dtype:oe}),be=S.clone().invert(),Re=ae.clone().invert(),Fe=padWithDefault(se.map(At=>At.clone().transform(be).transform(Re)),new Plane([1,0,0]),se.length||NUM_PLANES_DEFAULT),Me=Fe.flatMap(At=>At.normal),ve=Fe.map(At=>At.distance);_.setUniforms({...s,contrastLimits:pe,xSlice:new Float32Array(F?F.map(At=>At/S[0]/ae[0]):[0,1]),ySlice:new Float32Array(M?M.map(At=>At/S[5]/ae[5]):[0,1]),zSlice:new Float32Array(P?P.map(At=>At/S[10]/ae[10]):[0,1]),eye_pos:new Float32Array([he[12],he[13],he[14]]),view:ge,proj:Be,scale:S,resolution:ae,model:H||new Matrix4,normals:Me,distances:ve},{disableWanings:!1}),_.setBindings(f),_.draw(d)}}loadTexture(d){const s={volume0:null,volume1:null,volume2:null,volume3:null,volume4:null,volume5:null};if(this.state.textures&&Object.values(this.state.textures).forEach(f=>f==null?void 0:f.delete()),d&&Object.keys(d).length>0&&d.data){const{height:f,width:_,depth:S}=d;d.data.forEach((T,F)=>{s[`volume${F}`]=this.dataToTexture(T,_,f,S)},this);for(const T in s){if(!s.volume0)throw new Error("Bad texture state!");s[T]||(s[T]=s.volume0)}this.setState({textures:s,scaleMatrix:new Matrix4().scale(this.props.physicalSizeScalingMatrix.transformPoint([_,f,S]))})}}dataToTexture(d,s,f,_){var F;const S=getRenderingAttrs();return this.context.device.createTexture({width:s,height:f,depth:_,dimension:"3d",data:((F=S.cast)==null?void 0:F.call(S,d))??d,format:S.format,mipmaps:!1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge"}})}};XR3DLayer.layerName="XR3DLayer";XR3DLayer.defaultProps=defaultProps$1$1;async function getVolume({source:d,selection:s,onUpdate:f=()=>{},downsampleDepth:_=1,signal:S}){const{shape:T,labels:F,dtype:M}=d,{height:P,width:H}=getImageSize(d),J=T[F.indexOf("z")],K=Math.max(1,Math.floor(J/_)),oe=P*H,se=`${M}Array`,ae=globalThis[se],ge=new ae(oe*K);return await Promise.all(new Array(K).fill(0).map(async(he,Be)=>{const pe={...s,z:Be*_},{data:be}=await d.getRaster({selection:pe,signal:S});let Re=0;for(f();Re<oe;){const Fe=Be*oe+(oe-Re-1),Me=(H-Re-1)%H+H*Math.floor(Re/H);ge[Fe]=be[Me],Re+=1}f()})),{data:ge,height:P,width:H,depth:K}}const getTextLayer=(d,s,f)=>new TextLayer({id:`text-${f}`,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,data:[{text:d,position:s.position}],getColor:[220,220,220,255],getSize:25,sizeUnits:"meters",sizeScale:2**-s.zoom,fontFamily:"Helvetica"}),defaultProps$9={pickable:!1,coordinateSystem:COORDINATE_SYSTEM.CARTESIAN,contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},selections:{type:"array",value:[],compare:!0},resolution:{type:"number",value:0,compare:!0},domain:{type:"array",value:[],compare:!0},loader:{type:"object",value:[{getRaster:async()=>({data:[],height:0,width:0}),dtype:"Uint16",shape:[1],labels:["z"]}],compare:!0},xSlice:{type:"array",value:null,compare:!0},ySlice:{type:"array",value:null,compare:!0},zSlice:{type:"array",value:null,compare:!0},clippingPlanes:{type:"array",value:[],compare:!0},onUpdate:{type:"function",value:()=>{},compare:!0},useProgressIndicator:{type:"boolean",value:!0,compare:!0},extensions:{type:"array",value:[new ColorPalette3DExtensions.AdditiveBlendExtension],compare:!0}},VolumeLayer=class extends CompositeLayer{clearState(){this.setState({height:null,width:null,depth:null,data:null,physicalSizeScalingMatrix:null,resolutionMatrix:null,progress:0,abortController:null})}finalizeState(){this.state.abortController.abort()}updateState({oldProps:d,props:s}){const f=s.loader!==d.loader,_=s.resolution!==d.resolution,S=s.selections!==d.selections;if(_&&this.clearState(),f||S||_){const{loader:T,selections:F=[],resolution:M,onViewportLoad:P}=this.props,H=T[M];let J=0;const K=(H.shape[H.labels.indexOf("z")]>>M)*F.length,oe=()=>{J+=.5/K,this.props.onUpdate&&this.props.onUpdate({progress:J}),this.setState({progress:J})},se=new AbortController;this.setState({abortController:se});const{signal:ae}=se,ge=F.map(Be=>getVolume({selection:Be,source:H,onUpdate:oe,downsampleDepth:2**M,signal:ae})),he=getPhysicalSizeScalingMatrix$1(T[M]);Promise.all(ge).then(Be=>{var be,Re,Fe;P&&P(Be);const pe={data:Be.map(Me=>Me.data),width:(be=Be[0])==null?void 0:be.width,height:(Re=Be[0])==null?void 0:Re.height,depth:(Fe=Be[0])==null?void 0:Fe.depth};this.setState({...pe,physicalSizeScalingMatrix:he,resolutionMatrix:new Matrix4().scale(2**M)})})}}renderLayers(){const{loader:d,id:s,resolution:f,useProgressIndicator:_}=this.props,{dtype:S}=d[f],{data:T,width:F,height:M,depth:P,progress:H,physicalSizeScalingMatrix:J,resolutionMatrix:K}=this.state;if(!(F&&M)&&_){const{viewport:oe}=this.context;return getTextLayer(`Loading Volume ${String((H||0)*100).slice(0,5)}%...`,oe,s)}return new XR3DLayer(this.props,{channelData:{data:T,width:F,height:M,depth:P},id:`XR3DLayer-0-${M}-${F}-0-${f}-${s}`,physicalSizeScalingMatrix:J,parameters:{[GLEnum.CULL_FACE]:!0,[GLEnum.CULL_FACE_MODE]:GLEnum.FRONT,[GLEnum.DEPTH_TEST]:!1,blendFunc:[GLEnum.SRC_ALPHA,GLEnum.ONE],blend:!0},resolutionMatrix:K,dtype:S})}};VolumeLayer.layerName="VolumeLayer";VolumeLayer.defaultProps=defaultProps$9;const useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function inheritsFrom(d,s){for(;d;){if(d===s)return!0;d=Object.getPrototypeOf(d)}return!1}const MAP_STYLE={position:"absolute",zIndex:-1};function evaluateChildren(d,s){if(typeof d=="function")return d(s);if(Array.isArray(d))return d.map(f=>evaluateChildren(f,s));if(isComponent(d)){if(isReactMap(d))return s.style=MAP_STYLE,reactExports.cloneElement(d,s);if(needsDeckGLViewProps(d))return reactExports.cloneElement(d,s)}return d}function isComponent(d){return d&&typeof d=="object"&&"type"in d||!1}function isReactMap(d){var s;return(s=d.props)==null?void 0:s.mapStyle}function needsDeckGLViewProps(d){const s=d.type;return s&&s.deckGLViewProps}function wrapInView(d){if(typeof d=="function")return reactExports.createElement(View,{},d);if(Array.isArray(d))return d.map(wrapInView);if(isComponent(d)){if(d.type===reactExports.Fragment)return wrapInView(d.props.children);if(inheritsFrom(d.type,View))return d}return d}function extractJSXLayers({children:d,layers:s=[],views:f=null}){const _=[],S=[],T={};return reactExports.Children.forEach(wrapInView(d),F=>{if(isComponent(F)){const M=F.type;if(inheritsFrom(M,Layer)){const P=createLayer(M,F.props);S.push(P)}else _.push(F);if(inheritsFrom(M,View)&&M!==View&&F.props.id){const P=new M(F.props);T[P.id]=P}}else F&&_.push(F)}),Object.keys(T).length>0&&(Array.isArray(f)?f.forEach(F=>{T[F.id]=F}):f&&(T[f.id]=f),f=Object.values(T)),s=S.length>0?[...S,...s]:s,{layers:s,children:_,views:f}}function createLayer(d,s){const f={},_=d.defaultProps||{};for(const S in s)_[S]!==s[S]&&(f[S]=s[S]);return new d(f)}function positionChildrenUnderViews({children:d,deck:s,ContextProvider:f}){const{viewManager:_}=s||{};if(!_||!_.views.length)return[];const S={},T=_.views[0].id;for(const F of d){let M=T,P=F;isComponent(F)&&inheritsFrom(F.type,View)&&(M=F.props.id||T,P=F.props.children);const H=_.getViewport(M),J=_.getViewState(M);if(H){J.padding=H.padding;const{x:K,y:oe,width:se,height:ae}=H;P=evaluateChildren(P,{x:K,y:oe,width:se,height:ae,viewport:H,viewState:J}),S[M]||(S[M]={viewport:H,children:[]}),S[M].children.push(P)}}return Object.keys(S).map(F=>{const{viewport:M,children:P}=S[F],{x:H,y:J,width:K,height:oe}=M,se={position:"absolute",left:H,top:J,width:K,height:oe},ae=`view-${F}`,ge=reactExports.createElement("div",{key:ae,id:ae,style:se},...P);if(f){const he={viewport:M,container:s.canvas.offsetParent,eventManager:s.eventManager,onViewStateChange:Be=>{Be.viewId=F,s._onViewStateChange(Be)}};return reactExports.createElement(f,{key:ae,value:he},ge)}return ge})}const CANVAS_ONLY_STYLES={mixBlendMode:null};function extractStyles({width:d,height:s,style:f}){const _={position:"absolute",zIndex:0,left:0,top:0,width:d,height:s},S={left:0,top:0};if(f)for(const T in f)T in CANVAS_ONLY_STYLES?S[T]=f[T]:_[T]=f[T];return{containerStyle:_,canvasStyle:S}}function getRefHandles(d){return{get deck(){return d.deck},pickObject:s=>d.deck.pickObject(s),pickMultipleObjects:s=>d.deck.pickMultipleObjects(s),pickObjects:s=>d.deck.pickObjects(s)}}function redrawDeck(d){d.redrawReason&&(d.deck._drawLayers(d.redrawReason),d.redrawReason=null)}function createDeckInstance(d,s,f){const _=new s({...f,_customRender:S=>{d.redrawReason=S;const T=_.getViewports();d.lastRenderedViewports!==T?d.forceUpdate():redrawDeck(d)}});return _}function DeckGLWithRef(d,s){const[f,_]=reactExports.useState(0),T=reactExports.useRef({control:null,version:f,forceUpdate:()=>_(Fe=>Fe+1)}).current,F=reactExports.useRef(null),M=reactExports.useRef(null),P=reactExports.useMemo(()=>extractJSXLayers(d),[d.layers,d.views,d.children]);let H=!0;const J=Fe=>{var Me;return H&&d.viewState?(T.viewStateUpdateRequested=Fe,null):(T.viewStateUpdateRequested=null,(Me=d.onViewStateChange)==null?void 0:Me.call(d,Fe))},K=Fe=>{var Me;H?T.interactionStateUpdateRequested=Fe:(T.interactionStateUpdateRequested=null,(Me=d.onInteractionStateChange)==null||Me.call(d,Fe))},oe=reactExports.useMemo(()=>{const Fe={...d,style:null,width:"100%",height:"100%",parent:F.current,canvas:M.current,layers:P.layers,views:P.views,onViewStateChange:J,onInteractionStateChange:K};return delete Fe._customRender,T.deck&&T.deck.setProps(Fe),Fe},[d]);reactExports.useEffect(()=>{const Fe=d.Deck||Deck;return T.deck=createDeckInstance(T,Fe,{...oe,parent:F.current,canvas:M.current}),()=>{var Me;return(Me=T.deck)==null?void 0:Me.finalize()}},[]),useIsomorphicLayoutEffect(()=>{redrawDeck(T);const{viewStateUpdateRequested:Fe,interactionStateUpdateRequested:Me}=T;Fe&&J(Fe),Me&&K(Me)}),reactExports.useImperativeHandle(s,()=>getRefHandles(T),[]);const se=T.deck&&T.deck.isInitialized?T.deck.getViewports():void 0,{ContextProvider:ae,width:ge="100%",height:he="100%",id:Be,style:pe}=d,{containerStyle:be,canvasStyle:Re}=reactExports.useMemo(()=>extractStyles({width:ge,height:he,style:pe}),[ge,he,pe]);if(!T.viewStateUpdateRequested&&T.lastRenderedViewports===se||T.version!==f){T.lastRenderedViewports=se,T.version=f;const Fe=positionChildrenUnderViews({children:P.children,deck:T.deck,ContextProvider:ae}),Me=reactExports.createElement("canvas",{key:"canvas",id:Be||"deckgl-overlay",ref:M,style:Re});T.control=reactExports.createElement("div",{id:`${Be||"deckgl"}-wrapper`,ref:F,style:be},[Me,Fe])}return H=!1,T.control}const DeckGL=reactExports.forwardRef(DeckGLWithRef);class VivView{constructor({id:s,x:f=0,y:_=0,height:S,width:T}){this.width=T,this.height=S,this.id=s,this.x=f,this.y=_}getDeckGlView(){return new OrthographicView({controller:!0,id:this.id,height:this.height,width:this.width,x:this.x,y:this.y})}filterViewState({viewState:s}){const{id:f,height:_,width:S}=this;return s.id===f?{height:_,width:S,...s}:null}getLayers({viewStates:s,props:f}){}}function getVivId$1(d){return`-#${d}#`}function getDefaultInitialViewState(d,s,f=0,_=!1,S){const T=Array.isArray(d)?d[0]:d,{width:F,height:M}=getImageSize(T),P=(S||new Matrix4).getScale(),[H,J]=[P[0]*F,P[1]*M],K=T.shape[T.labels.indexOf("z")],oe=Math.log2(Math.min(s.width/H,s.height/J))-f,se=getPhysicalSizeScalingMatrix$1(T);return{target:(S||new Matrix4).transformPoint((_?se:new Matrix4).transformPoint([F/2,M/2,_?K/2:0])),zoom:oe}}function getImageLayer(d,s){var F,M;const{loader:f}=s,_=(M=(F=f[0])==null?void 0:F.constructor)==null?void 0:M.name,S=f.length>1?MultiscaleImageLayer:ImageLayer,T=f.length>1?f:f[0];return new S({...s,id:`${_}${getVivId$1(d)}`,viewportId:d,loader:T})}const OVERVIEW_VIEW_ID="overview",DETAIL_VIEW_ID="detail";class DetailView extends VivView{constructor({id:s,x:f=0,y:_=0,height:S,width:T,snapScaleBar:F=!1}){super({id:s,x:f,y:_,height:S,width:T}),this.snapScaleBar=F}getLayers({props:s,viewStates:f}){var H,J,K;const{loader:_}=s,{id:S,height:T,width:F}=this,M=f[S],P=[getImageLayer(S,s)];if((K=(J=(H=_[0])==null?void 0:H.meta)==null?void 0:J.physicalSizes)!=null&&K.x){const{size:oe,unit:se}=_[0].meta.physicalSizes.x;P.push(new ScaleBarLayer({id:getVivId$1(S),loader:_,unit:se,size:oe,snap:this.snapScaleBar,viewState:{...M,height:T,width:F}}))}return P}filterViewState({viewState:s,currentViewState:f}){if(s.id===OVERVIEW_VIEW_ID){const{target:_}=s;if(_)return{...f,target:_}}return super.filterViewState({viewState:s})}}class VolumeView extends VivView{constructor({target:s,useFixedAxis:f,..._}){super(_),this.target=s,this.useFixedAxis=f}getDeckGlView(){const{height:s,width:f,id:_,x:S,y:T}=this;return new OrbitView({id:_,controller:!0,height:s,width:f,x:S,y:T,orbitAxis:"Y"})}filterViewState({viewState:s}){const{id:f,target:_,useFixedAxis:S}=this;return s.id===f?{...s,target:S?_:s.target}:null}getLayers({props:s}){const{loader:f}=s,{id:_}=this;return[new VolumeLayer(s,{id:`${f.type}${getVivId$1(_)}`})]}}var fastDeepEqual=function d(s,f){if(s===f)return!0;if(s&&f&&typeof s=="object"&&typeof f=="object"){if(s.constructor!==f.constructor)return!1;var _,S,T;if(Array.isArray(s)){if(_=s.length,_!=f.length)return!1;for(S=_;S--!==0;)if(!d(s[S],f[S]))return!1;return!0}if(s.constructor===RegExp)return s.source===f.source&&s.flags===f.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===f.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===f.toString();if(T=Object.keys(s),_=T.length,_!==Object.keys(f).length)return!1;for(S=_;S--!==0;)if(!Object.prototype.hasOwnProperty.call(f,T[S]))return!1;for(S=_;S--!==0;){var F=T[S];if(!d(s[F],f[F]))return!1}return!0}return s!==s&&f!==f};const equal=getDefaultExportFromCjs(fastDeepEqual),capitalize=d=>d.charAt(0).toUpperCase()+d.slice(1);function generateToggles(d,s){const f={};return Object.entries(d).forEach(([_,S])=>{typeof S=="boolean"&&(f[`toggle${capitalize(_)}`]=()=>s(T=>({...T,[_]:!T[_]})))}),f}const DEFAUlT_CHANNEL_STATE={channelsVisible:[],contrastLimits:[],brightness:[],contrast:[],colors:[],domains:[],selections:[],ids:[],loader:[{labels:[],shape:[]}],image:0},DEFAUlT_CHANNEL_VALUES={channelsVisible:!0,contrastLimits:[0,65535],brightness:.5,contrast:.5,colors:[255,255,255],domains:[0,65535],selections:{z:0,c:0,t:0},ids:""},DEFAULT_IMAGE_STATE={lensSelection:0,colormap:"",renderingMode:RENDERING_MODES.MAX_INTENSITY_PROJECTION,resolution:0,lensEnabled:!1,zoomLock:!0,panLock:!0,isOverviewOn:!1,useFixedAxis:!0,xSlice:null,ySlice:null,zSlice:null,onViewportLoad:()=>{}},DEFAULT_VIEWER_STATE={isChannelLoading:[],isViewerLoading:!0,pixelValues:[],isOffsetsSnackbarOn:!1,loaderErrorSnackbar:{on:!1,message:null},isNoImageUrlSnackbarOn:!1,isVolumeRenderingWarningOn:!1,useLinkedView:!1,isControllerOn:!0,use3d:!1,useLens:!1,useColormap:!1,globalSelection:{z:0,t:0},channelOptions:[],metadata:null,viewState:null,source:null,pyramidResolution:0};function createVivStores(){const d=createStore(_=>({...DEFAUlT_CHANNEL_STATE,...generateToggles(DEFAUlT_CHANNEL_VALUES,_),toggleIsOn:S=>_(T=>{const F=[...T.channelsVisible];return F[S]=!F[S],{...T,channelsVisible:F}}),setPropertiesForChannel:(S,T)=>_(F=>{const M=Object.entries(T),P={};return M.forEach(([H,J])=>{P[H]=[...F[H]],P[H][S]=J}),{...F,...P}}),removeChannel:S=>_(T=>{const F={},M=Object.keys(DEFAUlT_CHANNEL_VALUES);return Object.keys(T).forEach(P=>{M.includes(P)&&(F[P]=T[P].filter((H,J)=>J!==S))}),{...T,...F}}),addChannel:S=>_(T=>{const F=Object.entries(S),M={...T};return F.forEach(([P,H])=>{M[P]=[...T[P],H]}),Object.entries(DEFAUlT_CHANNEL_VALUES).forEach(([P,H])=>{M[P].length<M[F[0][0]].length&&(M[P]=[...T[P],H])}),M})})),s=createStore(_=>({...DEFAULT_IMAGE_STATE,...generateToggles(DEFAULT_IMAGE_STATE,_)}));return{viewerStore:createStore(_=>({...DEFAULT_VIEWER_STATE,...generateToggles(DEFAULT_VIEWER_STATE,_),setIsChannelLoading:(S,T)=>_(F=>{const M=[...F.isChannelLoading];return M[S]=T,{...F,isChannelLoading:M}}),addIsChannelLoading:S=>_(T=>{const F=[...T.isChannelLoading,S];return{...T,isChannelLoading:F}}),removeIsChannelLoading:S=>_(T=>{const F=[...T.isChannelLoading];return F.splice(S,1),{...T,isChannelLoading:F}})})),channelsStore:d,imageSettingsStore:s}}const VivContext=reactExports.createContext(null),VivProvider=observer(({children:d,vivStores:s})=>jsxRuntimeExports.jsx(VivContext.Provider,{value:s,children:d}));function useStoreApi(d){const s=reactExports.useContext(VivContext);if(!s)throw"Viv state hooks must be used within a VivProvider";return s[d]}const useChannelsStoreApi=()=>useStoreApi("channelsStore"),useImageSettingsStoreApi=()=>useStoreApi("imageSettingsStore"),useViewerStoreApi=()=>useStoreApi("viewerStore");function useChannelsStore(d,s){const f=useChannelsStoreApi();return useStoreWithEqualityFn(f,d,s)}function useImageSettingsStore(d,s){const f=useImageSettingsStoreApi();return useStoreWithEqualityFn(f,d,s)}function useViewerStore(d,s){const f=useViewerStoreApi();return useStoreWithEqualityFn(f,d,s)}const useLoader=()=>{const[d,s]=useChannelsStore(f=>[f.loader,f.image]);return Array.isArray(d[0])?d[s]:d},useMetadata=()=>{const d=useChannelsStore(f=>f.image),s=useViewerStore(f=>f.metadata);return Array.isArray(s)?s[d]:s},applyDefaultChannelState=d=>{const s=d,f=6;s.channelsStore||(s.channelsStore={});for(const[_,S]of Object.entries(DEFAUlT_CHANNEL_VALUES))_!=="ids"&&(_!=="brightness"&&_!=="contrast"||s.channelsStore[_]===void 0&&(console.log(`adding default value ${S} for`,_),s.channelsStore[_]=new Array(f).fill(S)));return s};var regl$1={exports:{}};(function(d,s){(function(f,_){d.exports=_()})(commonjsGlobal,function(){var f=function(Ve){return Ve instanceof Uint8Array||Ve instanceof Uint16Array||Ve instanceof Uint32Array||Ve instanceof Int8Array||Ve instanceof Int16Array||Ve instanceof Int32Array||Ve instanceof Float32Array||Ve instanceof Float64Array||Ve instanceof Uint8ClampedArray},_=function(Ve,Pt){for(var qr=Object.keys(Pt),pa=0;pa<qr.length;++pa)Ve[qr[pa]]=Pt[qr[pa]];return Ve},S=`
`;function T(Ve){return typeof atob<"u"?atob(Ve):"base64:"+Ve}function F(Ve){var Pt=new Error("(regl) "+Ve);throw console.error(Pt),Pt}function M(Ve,Pt){Ve||F(Pt)}function P(Ve){return Ve?": "+Ve:""}function H(Ve,Pt,qr){Ve in Pt||F("unknown parameter ("+Ve+")"+P(qr)+". possible values: "+Object.keys(Pt).join())}function J(Ve,Pt){f(Ve)||F("invalid parameter type"+P(Pt)+". must be a typed array")}function K(Ve,Pt){switch(Pt){case"number":return typeof Ve=="number";case"object":return typeof Ve=="object";case"string":return typeof Ve=="string";case"boolean":return typeof Ve=="boolean";case"function":return typeof Ve=="function";case"undefined":return typeof Ve>"u";case"symbol":return typeof Ve=="symbol"}}function oe(Ve,Pt,qr){K(Ve,Pt)||F("invalid parameter type"+P(qr)+". expected "+Pt+", got "+typeof Ve)}function se(Ve,Pt){Ve>=0&&(Ve|0)===Ve||F("invalid parameter type, ("+Ve+")"+P(Pt)+". must be a nonnegative integer")}function ae(Ve,Pt,qr){Pt.indexOf(Ve)<0&&F("invalid value"+P(qr)+". must be one of: "+Pt)}var ge=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function he(Ve){Object.keys(Ve).forEach(function(Pt){ge.indexOf(Pt)<0&&F('invalid regl constructor argument "'+Pt+'". must be one of '+ge)})}function Be(Ve,Pt){for(Ve=Ve+"";Ve.length<Pt;)Ve=" "+Ve;return Ve}function pe(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function be(Ve,Pt){this.number=Ve,this.line=Pt,this.errors=[]}function Re(Ve,Pt,qr){this.file=Ve,this.line=Pt,this.message=qr}function Fe(){var Ve=new Error,Pt=(Ve.stack||Ve).toString(),qr=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Pt);if(qr)return qr[1];var pa=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Pt);return pa?pa[1]:"unknown"}function Me(){var Ve=new Error,Pt=(Ve.stack||Ve).toString(),qr=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Pt);if(qr)return qr[1];var pa=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Pt);return pa?pa[1]:"unknown"}function ve(Ve,Pt){var qr=Ve.split(`
`),pa=1,EA=0,fa={unknown:new pe,0:new pe};fa.unknown.name=fa[0].name=Pt||Fe(),fa.unknown.lines.push(new be(0,""));for(var nA=0;nA<qr.length;++nA){var TA=qr[nA],RA=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(TA);if(RA)switch(RA[1]){case"line":var $A=/(\d+)(\s+\d+)?/.exec(RA[2]);$A&&(pa=$A[1]|0,$A[2]&&(EA=$A[2]|0,EA in fa||(fa[EA]=new pe)));break;case"define":var qA=/SHADER_NAME(_B64)?\s+(.*)$/.exec(RA[2]);qA&&(fa[EA].name=qA[1]?T(qA[2]):qA[2]);break}fa[EA].lines.push(new be(pa++,TA))}return Object.keys(fa).forEach(function(HA){var KA=fa[HA];KA.lines.forEach(function(NA){KA.index[NA.number]=NA})}),fa}function At(Ve){var Pt=[];return Ve.split(`
`).forEach(function(qr){if(!(qr.length<5)){var pa=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(qr);pa?Pt.push(new Re(pa[1]|0,pa[2]|0,pa[3].trim())):qr.length>0&&Pt.push(new Re("unknown",0,qr))}}),Pt}function Ct(Ve,Pt){Pt.forEach(function(qr){var pa=Ve[qr.file];if(pa){var EA=pa.index[qr.line];if(EA){EA.errors.push(qr),pa.hasErrors=!0;return}}Ve.unknown.hasErrors=!0,Ve.unknown.lines[0].errors.push(qr)})}function Rt(Ve,Pt,qr,pa,EA){if(!Ve.getShaderParameter(Pt,Ve.COMPILE_STATUS)){var fa=Ve.getShaderInfoLog(Pt),nA=pa===Ve.FRAGMENT_SHADER?"fragment":"vertex";Qn(qr,"string",nA+" shader source must be a string",EA);var TA=ve(qr,EA),RA=At(fa);Ct(TA,RA),Object.keys(TA).forEach(function($A){var qA=TA[$A];if(!qA.hasErrors)return;var HA=[""],KA=[""];function NA(OA,ia){HA.push(OA),KA.push(ia||"")}NA("file number "+$A+": "+qA.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),qA.lines.forEach(function(OA){if(OA.errors.length>0){NA(Be(OA.number,4)+"|  ","background-color:yellow; font-weight:bold"),NA(OA.line+S,"color:red; background-color:yellow; font-weight:bold");var ia=0;OA.errors.forEach(function(rA){var kA=rA.message,lI=/^\s*'(.*)'\s*:\s*(.*)$/.exec(kA);if(lI){var vA=lI[1];switch(kA=lI[2],vA){case"assign":vA="=";break}ia=Math.max(OA.line.indexOf(vA,ia),0)}else ia=0;NA(Be("| ",6)),NA(Be("^^^",ia+3)+S,"font-weight:bold"),NA(Be("| ",6)),NA(kA+S,"font-weight:bold")}),NA(Be("| ",6)+S)}else NA(Be(OA.number,4)+"|  "),NA(OA.line+S,"color:red")}),typeof document<"u"&&!window.chrome?(KA[0]=HA.join("%c"),console.log.apply(console,KA)):console.log(HA.join(""))}),M.raise("Error compiling "+nA+" shader, "+TA[0].name)}}function It(Ve,Pt,qr,pa,EA){if(!Ve.getProgramParameter(Pt,Ve.LINK_STATUS)){var fa=Ve.getProgramInfoLog(Pt),nA=ve(qr,EA),TA=ve(pa,EA),RA='Error linking program with vertex shader, "'+TA[0].name+'", and fragment shader "'+nA[0].name+'"';typeof document<"u"?console.log("%c"+RA+S+"%c"+fa,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(RA+S+fa),M.raise(RA)}}function xt(Ve){Ve._commandRef=Fe()}function wt(Ve,Pt,qr,pa){xt(Ve);function EA(RA){return RA?pa.id(RA):0}Ve._fragId=EA(Ve.static.frag),Ve._vertId=EA(Ve.static.vert);function fa(RA,$A){Object.keys($A).forEach(function(qA){RA[pa.id(qA)]=!0})}var nA=Ve._uniformSet={};fa(nA,Pt.static),fa(nA,Pt.dynamic);var TA=Ve._attributeSet={};fa(TA,qr.static),fa(TA,qr.dynamic),Ve._hasCount="count"in Ve.static||"count"in Ve.dynamic||"elements"in Ve.static||"elements"in Ve.dynamic}function Ft(Ve,Pt){var qr=Me();F(Ve+" in command "+(Pt||Fe())+(qr==="unknown"?"":" called from "+qr))}function jt(Ve,Pt,qr){Ve||Ft(Pt,qr||Fe())}function ta(Ve,Pt,qr,pa){Ve in Pt||Ft("unknown parameter ("+Ve+")"+P(qr)+". possible values: "+Object.keys(Pt).join(),pa||Fe())}function Qn(Ve,Pt,qr,pa){K(Ve,Pt)||Ft("invalid parameter type"+P(qr)+". expected "+Pt+", got "+typeof Ve,pa||Fe())}function ca(Ve){Ve()}function Jn(Ve,Pt,qr){Ve.texture?ae(Ve.texture._texture.internalformat,Pt,"unsupported texture format for attachment"):ae(Ve.renderbuffer._renderbuffer.format,qr,"unsupported renderbuffer format for attachment")}var wA=33071,LA=9728,ZA=9984,xI=9985,cI=9986,pI=9987,aI=5120,nI=5121,uA=5122,aa=5123,eA=5124,DA=5125,xA=5126,ua=32819,sA=32820,oA=33635,fA=34042,lA=36193,gA={};gA[aI]=gA[nI]=1,gA[uA]=gA[aa]=gA[lA]=gA[oA]=gA[ua]=gA[sA]=2,gA[eA]=gA[DA]=gA[xA]=gA[fA]=4;function WA(Ve,Pt){return Ve===sA||Ve===ua||Ve===oA?2:Ve===fA?4:gA[Ve]*Pt}function JA(Ve){return!(Ve&Ve-1)&&!!Ve}function _I(Ve,Pt,qr){var pa,EA=Pt.width,fa=Pt.height,nA=Pt.channels;M(EA>0&&EA<=qr.maxTextureSize&&fa>0&&fa<=qr.maxTextureSize,"invalid texture shape"),(Ve.wrapS!==wA||Ve.wrapT!==wA)&&M(JA(EA)&&JA(fa),"incompatible wrap mode for texture, both width and height must be power of 2"),Pt.mipmask===1?EA!==1&&fa!==1&&M(Ve.minFilter!==ZA&&Ve.minFilter!==cI&&Ve.minFilter!==xI&&Ve.minFilter!==pI,"min filter requires mipmap"):(M(JA(EA)&&JA(fa),"texture must be a square power of 2 to support mipmapping"),M(Pt.mipmask===(EA<<1)-1,"missing or incomplete mipmap data")),Pt.type===xA&&(qr.extensions.indexOf("oes_texture_float_linear")<0&&M(Ve.minFilter===LA&&Ve.magFilter===LA,"filter not supported, must enable oes_texture_float_linear"),M(!Ve.genMipmaps,"mipmap generation not supported with float textures"));var TA=Pt.images;for(pa=0;pa<16;++pa)if(TA[pa]){var RA=EA>>pa,$A=fa>>pa;M(Pt.mipmask&1<<pa,"missing mipmap data");var qA=TA[pa];if(M(qA.width===RA&&qA.height===$A,"invalid shape for mip images"),M(qA.format===Pt.format&&qA.internalformat===Pt.internalformat&&qA.type===Pt.type,"incompatible type for mip image"),!qA.compressed)if(qA.data){var HA=Math.ceil(WA(qA.type,nA)*RA/qA.unpackAlignment)*qA.unpackAlignment;M(qA.data.byteLength===HA*$A,"invalid data for image, buffer size is inconsistent with image format")}else qA.element||qA.copy}else Ve.genMipmaps||M((Pt.mipmask&1<<pa)===0,"extra mipmap data");Pt.compressed&&M(!Ve.genMipmaps,"mipmap generation for compressed images not supported")}function HI(Ve,Pt,qr,pa){var EA=Ve.width,fa=Ve.height,nA=Ve.channels;M(EA>0&&EA<=pa.maxTextureSize&&fa>0&&fa<=pa.maxTextureSize,"invalid texture shape"),M(EA===fa,"cube map must be square"),M(Pt.wrapS===wA&&Pt.wrapT===wA,"wrap mode not supported by cube map");for(var TA=0;TA<qr.length;++TA){var RA=qr[TA];M(RA.width===EA&&RA.height===fa,"inconsistent cube map face shape"),Pt.genMipmaps&&(M(!RA.compressed,"can not generate mipmap for compressed textures"),M(RA.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var $A=RA.images,qA=0;qA<16;++qA){var HA=$A[qA];if(HA){var KA=EA>>qA,NA=fa>>qA;M(RA.mipmask&1<<qA,"missing mipmap data"),M(HA.width===KA&&HA.height===NA,"invalid shape for mip images"),M(HA.format===Ve.format&&HA.internalformat===Ve.internalformat&&HA.type===Ve.type,"incompatible type for mip image"),HA.compressed||(HA.data?M(HA.data.byteLength===KA*NA*Math.max(WA(HA.type,nA),HA.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):HA.element||HA.copy)}}}}var Nt=_(M,{optional:ca,raise:F,commandRaise:Ft,command:jt,parameter:H,commandParameter:ta,constructor:he,type:oe,commandType:Qn,isTypedArray:J,nni:se,oneOf:ae,shaderError:Rt,linkError:It,callSite:Me,saveCommandRef:xt,saveDrawInfo:wt,framebufferFormat:Jn,guessCommand:Fe,texture2D:_I,textureCube:HI}),bA=0,hA=0,II=5,OI=6;function ba(Ve,Pt){this.id=bA++,this.type=Ve,this.data=Pt}function IA(Ve){return Ve.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function MA(Ve){if(Ve.length===0)return[];var Pt=Ve.charAt(0),qr=Ve.charAt(Ve.length-1);if(Ve.length>1&&Pt===qr&&(Pt==='"'||Pt==="'"))return['"'+IA(Ve.substr(1,Ve.length-2))+'"'];var pa=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ve);if(pa)return MA(Ve.substr(0,pa.index)).concat(MA(pa[1])).concat(MA(Ve.substr(pa.index+pa[0].length)));var EA=Ve.split(".");if(EA.length===1)return['"'+IA(Ve)+'"'];for(var fa=[],nA=0;nA<EA.length;++nA)fa=fa.concat(MA(EA[nA]));return fa}function EI(Ve){return"["+MA(Ve).join("][")+"]"}function wI(Ve,Pt){return new ba(Ve,EI(Pt+""))}function vI(Ve){return typeof Ve=="function"&&!Ve._reglType||Ve instanceof ba}function WI(Ve,Pt){if(typeof Ve=="function")return new ba(hA,Ve);if(typeof Ve=="number"||typeof Ve=="boolean")return new ba(II,Ve);if(Array.isArray(Ve))return new ba(OI,Ve.map(function(qr,pa){return WI(qr,Pt+"["+pa+"]")}));if(Ve instanceof ba)return Ve;Nt(!1,"invalid option type in uniform "+Pt)}var GI={DynamicVariable:ba,define:wI,isDynamic:vI,unbox:WI,accessor:EI},NI={next:typeof requestAnimationFrame=="function"?function(Ve){return requestAnimationFrame(Ve)}:function(Ve){return setTimeout(Ve,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ve){return cancelAnimationFrame(Ve)}:clearTimeout},tC=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function mC(){var Ve={"":0},Pt=[""];return{id:function(qr){var pa=Ve[qr];return pa||(pa=Ve[qr]=Pt.length,Pt.push(qr),pa)},str:function(qr){return Pt[qr]}}}function yC(Ve,Pt,qr){var pa=document.createElement("canvas");_(pa.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Ve.appendChild(pa),Ve===document.body&&(pa.style.position="absolute",_(Ve.style,{margin:0,padding:0}));function EA(){var TA=window.innerWidth,RA=window.innerHeight;if(Ve!==document.body){var $A=pa.getBoundingClientRect();TA=$A.right-$A.left,RA=$A.bottom-$A.top}pa.width=qr*TA,pa.height=qr*RA}var fa;Ve!==document.body&&typeof ResizeObserver=="function"?(fa=new ResizeObserver(function(){setTimeout(EA)}),fa.observe(Ve)):window.addEventListener("resize",EA,!1);function nA(){fa?fa.disconnect():window.removeEventListener("resize",EA),Ve.removeChild(pa)}return EA(),{canvas:pa,onDestroy:nA}}function QC(Ve,Pt){function qr(pa){try{return Ve.getContext(pa,Pt)}catch{return null}}return qr("webgl")||qr("experimental-webgl")||qr("webgl-experimental")}function _C(Ve){return typeof Ve.nodeName=="string"&&typeof Ve.appendChild=="function"&&typeof Ve.getBoundingClientRect=="function"}function vC(Ve){return typeof Ve.drawArrays=="function"||typeof Ve.drawElements=="function"}function RC(Ve){return typeof Ve=="string"?Ve.split():(Nt(Array.isArray(Ve),"invalid extension array"),Ve)}function MC(Ve){return typeof Ve=="string"?(Nt(typeof document<"u","not supported outside of DOM"),document.querySelector(Ve)):Ve}function Hr(Ve){var Pt=Ve||{},qr,pa,EA,fa,nA={},TA=[],RA=[],$A=typeof window>"u"?1:window.devicePixelRatio,qA=!1,HA=function(OA){OA&&Nt.raise(OA)},KA=function(){};if(typeof Pt=="string"?(Nt(typeof document<"u","selector queries only supported in DOM enviroments"),qr=document.querySelector(Pt),Nt(qr,"invalid query string for element")):typeof Pt=="object"?_C(Pt)?qr=Pt:vC(Pt)?(fa=Pt,EA=fa.canvas):(Nt.constructor(Pt),"gl"in Pt?fa=Pt.gl:"canvas"in Pt?EA=MC(Pt.canvas):"container"in Pt&&(pa=MC(Pt.container)),"attributes"in Pt&&(nA=Pt.attributes,Nt.type(nA,"object","invalid context attributes")),"extensions"in Pt&&(TA=RC(Pt.extensions)),"optionalExtensions"in Pt&&(RA=RC(Pt.optionalExtensions)),"onDone"in Pt&&(Nt.type(Pt.onDone,"function","invalid or missing onDone callback"),HA=Pt.onDone),"profile"in Pt&&(qA=!!Pt.profile),"pixelRatio"in Pt&&($A=+Pt.pixelRatio,Nt($A>0,"invalid pixel ratio"))):Nt.raise("invalid arguments to regl"),qr&&(qr.nodeName.toLowerCase()==="canvas"?EA=qr:pa=qr),!fa){if(!EA){Nt(typeof document<"u","must manually specify webgl context outside of DOM environments");var NA=yC(pa||document.body,HA,$A);if(!NA)return null;EA=NA.canvas,KA=NA.onDestroy}nA.premultipliedAlpha===void 0&&(nA.premultipliedAlpha=!0),fa=QC(EA,nA)}return fa?{gl:fa,canvas:EA,container:pa,extensions:TA,optionalExtensions:RA,pixelRatio:$A,profile:qA,onDone:HA,onDestroy:KA}:(KA(),HA("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function zn(Ve,Pt){var qr={};function pa(nA){Nt.type(nA,"string","extension name must be string");var TA=nA.toLowerCase(),RA;try{RA=qr[TA]=Ve.getExtension(TA)}catch{}return!!RA}for(var EA=0;EA<Pt.extensions.length;++EA){var fa=Pt.extensions[EA];if(!pa(fa))return Pt.onDestroy(),Pt.onDone('"'+fa+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Pt.optionalExtensions.forEach(pa),{extensions:qr,restore:function(){Object.keys(qr).forEach(function(nA){if(qr[nA]&&!pa(nA))throw new Error("(regl): error restoring extension "+nA)})}}}function na(Ve,Pt){for(var qr=Array(Ve),pa=0;pa<Ve;++pa)qr[pa]=Pt(pa);return qr}var PA=5120,YA=5121,GA=5122,AI=5123,tI=5124,rC=5125,JI=5126;function cC(Ve){for(var Pt=16;Pt<=1<<28;Pt*=16)if(Ve<=Pt)return Pt;return 0}function sC(Ve){var Pt,qr;return Pt=(Ve>65535)<<4,Ve>>>=Pt,qr=(Ve>255)<<3,Ve>>>=qr,Pt|=qr,qr=(Ve>15)<<2,Ve>>>=qr,Pt|=qr,qr=(Ve>3)<<1,Ve>>>=qr,Pt|=qr,Pt|Ve>>1}function XI(){var Ve=na(8,function(){return[]});function Pt(fa){var nA=cC(fa),TA=Ve[sC(nA)>>2];return TA.length>0?TA.pop():new ArrayBuffer(nA)}function qr(fa){Ve[sC(fa.byteLength)>>2].push(fa)}function pa(fa,nA){var TA=null;switch(fa){case PA:TA=new Int8Array(Pt(nA),0,nA);break;case YA:TA=new Uint8Array(Pt(nA),0,nA);break;case GA:TA=new Int16Array(Pt(2*nA),0,nA);break;case AI:TA=new Uint16Array(Pt(2*nA),0,nA);break;case tI:TA=new Int32Array(Pt(4*nA),0,nA);break;case rC:TA=new Uint32Array(Pt(4*nA),0,nA);break;case JI:TA=new Float32Array(Pt(4*nA),0,nA);break;default:return null}return TA.length!==nA?TA.subarray(0,nA):TA}function EA(fa){qr(fa.buffer)}return{alloc:Pt,free:qr,allocType:pa,freeType:EA}}var Vt=XI();Vt.zero=XI();var Un=3408,Kn=3410,qt=3411,Xt=3412,ga=3413,aA=3414,BA=3415,uI=33901,mI=33902,qI=3379,gC=3386,JC=34921,WC=36347,YI=36348,dE=35661,GC=35660,KC=34930,fE=36349,pE=34076,mE=34024,dm=7936,fm=7937,PE=7938,aE=35724,UC=34047,vE=36063,OE=34852,GE=3553,tm=34067,UE=34069,BE=33984,SE=6408,JE=5126,rm=5121,im=36160,lE=36053,Lm=36064,kt=16384,Gt=function(Ve,Pt){var qr=1;Pt.ext_texture_filter_anisotropic&&(qr=Ve.getParameter(UC));var pa=1,EA=1;Pt.webgl_draw_buffers&&(pa=Ve.getParameter(OE),EA=Ve.getParameter(vE));var fa=!!Pt.oes_texture_float;if(fa){var nA=Ve.createTexture();Ve.bindTexture(GE,nA),Ve.texImage2D(GE,0,SE,1,1,0,SE,JE,null);var TA=Ve.createFramebuffer();if(Ve.bindFramebuffer(im,TA),Ve.framebufferTexture2D(im,Lm,GE,nA,0),Ve.bindTexture(GE,null),Ve.checkFramebufferStatus(im)!==lE)fa=!1;else{Ve.viewport(0,0,1,1),Ve.clearColor(1,0,0,1),Ve.clear(kt);var RA=Vt.allocType(JE,4);Ve.readPixels(0,0,1,1,SE,JE,RA),Ve.getError()?fa=!1:(Ve.deleteFramebuffer(TA),Ve.deleteTexture(nA),fa=RA[0]===1),Vt.freeType(RA)}}var $A=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),qA=!0;if(!$A){var HA=Ve.createTexture(),KA=Vt.allocType(rm,36);Ve.activeTexture(BE),Ve.bindTexture(tm,HA),Ve.texImage2D(UE,0,SE,3,3,0,SE,rm,KA),Vt.freeType(KA),Ve.bindTexture(tm,null),Ve.deleteTexture(HA),qA=!Ve.getError()}return{colorBits:[Ve.getParameter(Kn),Ve.getParameter(qt),Ve.getParameter(Xt),Ve.getParameter(ga)],depthBits:Ve.getParameter(aA),stencilBits:Ve.getParameter(BA),subpixelBits:Ve.getParameter(Un),extensions:Object.keys(Pt).filter(function(NA){return!!Pt[NA]}),maxAnisotropic:qr,maxDrawbuffers:pa,maxColorAttachments:EA,pointSizeDims:Ve.getParameter(uI),lineWidthDims:Ve.getParameter(mI),maxViewportDims:Ve.getParameter(gC),maxCombinedTextureUnits:Ve.getParameter(dE),maxCubeMapSize:Ve.getParameter(pE),maxRenderbufferSize:Ve.getParameter(mE),maxTextureUnits:Ve.getParameter(KC),maxTextureSize:Ve.getParameter(qI),maxAttributes:Ve.getParameter(JC),maxVertexUniforms:Ve.getParameter(WC),maxVertexTextureUnits:Ve.getParameter(GC),maxVaryingVectors:Ve.getParameter(YI),maxFragmentUniforms:Ve.getParameter(fE),glsl:Ve.getParameter(aE),renderer:Ve.getParameter(fm),vendor:Ve.getParameter(dm),version:Ve.getParameter(PE),readFloat:fa,npotTextureCube:qA}};function Dn(Ve){return!!Ve&&typeof Ve=="object"&&Array.isArray(Ve.shape)&&Array.isArray(Ve.stride)&&typeof Ve.offset=="number"&&Ve.shape.length===Ve.stride.length&&(Array.isArray(Ve.data)||f(Ve.data))}var ya=function(Ve){return Object.keys(Ve).map(function(Pt){return Ve[Pt]})},UA={shape:cE,flatten:$C};function SI(Ve,Pt,qr){for(var pa=0;pa<Pt;++pa)qr[pa]=Ve[pa]}function AC(Ve,Pt,qr,pa){for(var EA=0,fa=0;fa<Pt;++fa)for(var nA=Ve[fa],TA=0;TA<qr;++TA)pa[EA++]=nA[TA]}function xC(Ve,Pt,qr,pa,EA,fa){for(var nA=fa,TA=0;TA<Pt;++TA)for(var RA=Ve[TA],$A=0;$A<qr;++$A)for(var qA=RA[$A],HA=0;HA<pa;++HA)EA[nA++]=qA[HA]}function NC(Ve,Pt,qr,pa,EA){for(var fa=1,nA=qr+1;nA<Pt.length;++nA)fa*=Pt[nA];var TA=Pt[qr];if(Pt.length-qr===4){var RA=Pt[qr+1],$A=Pt[qr+2],qA=Pt[qr+3];for(nA=0;nA<TA;++nA)xC(Ve[nA],RA,$A,qA,pa,EA),EA+=fa}else for(nA=0;nA<TA;++nA)NC(Ve[nA],Pt,qr+1,pa,EA),EA+=fa}function $C(Ve,Pt,qr,pa){var EA=1;if(Pt.length)for(var fa=0;fa<Pt.length;++fa)EA*=Pt[fa];else EA=0;var nA=pa||Vt.allocType(qr,EA);switch(Pt.length){case 0:break;case 1:SI(Ve,Pt[0],nA);break;case 2:AC(Ve,Pt[0],Pt[1],nA);break;case 3:xC(Ve,Pt[0],Pt[1],Pt[2],nA,0);break;default:NC(Ve,Pt,0,nA,0)}return nA}function cE(Ve){for(var Pt=[],qr=Ve;qr.length;qr=qr[0])Pt.push(qr.length);return Pt}var Fm={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Cy=5120,bB=5122,Ey=5124,my=5121,nB=5123,By=5125,yy=5126,Qy=5126,KE={int8:Cy,int16:bB,int32:Ey,uint8:my,uint16:nB,uint32:By,float:yy,float32:Qy},_y=35048,vy=35040,Mm={dynamic:_y,stream:vy,static:35044},km=UA.flatten,Pm=UA.shape,oB=35044,sB=35040,Om=5121,Gm=5126,wE=[];wE[5120]=1,wE[5122]=2,wE[5124]=4,wE[5121]=1,wE[5123]=2,wE[5125]=4,wE[5126]=4;function Um(Ve){return Fm[Object.prototype.toString.call(Ve)]|0}function DB(Ve,Pt){for(var qr=0;qr<Pt.length;++qr)Ve[qr]=Pt[qr]}function RB(Ve,Pt,qr,pa,EA,fa,nA){for(var TA=0,RA=0;RA<qr;++RA)for(var $A=0;$A<pa;++$A)Ve[TA++]=Pt[EA*RA+fa*$A+nA]}function pm(Ve,Pt,qr,pa){var EA=0,fa={};function nA(ia){this.id=EA++,this.buffer=Ve.createBuffer(),this.type=ia,this.usage=oB,this.byteLength=0,this.dimension=1,this.dtype=Om,this.persistentData=null,qr.profile&&(this.stats={size:0})}nA.prototype.bind=function(){Ve.bindBuffer(this.type,this.buffer)},nA.prototype.destroy=function(){KA(this)};var TA=[];function RA(ia,rA){var kA=TA.pop();return kA||(kA=new nA(ia)),kA.bind(),HA(kA,rA,sB,0,1,!1),kA}function $A(ia){TA.push(ia)}function qA(ia,rA,kA){ia.byteLength=rA.byteLength,Ve.bufferData(ia.type,rA,kA)}function HA(ia,rA,kA,lI,vA,oI){var rI;if(ia.usage=kA,Array.isArray(rA)){if(ia.dtype=lI||Gm,rA.length>0){var DI;if(Array.isArray(rA[0])){rI=Pm(rA);for(var mA=1,CA=1;CA<rI.length;++CA)mA*=rI[CA];ia.dimension=mA,DI=km(rA,rI,ia.dtype),qA(ia,DI,kA),oI?ia.persistentData=DI:Vt.freeType(DI)}else if(typeof rA[0]=="number"){ia.dimension=vA;var fI=Vt.allocType(ia.dtype,rA.length);DB(fI,rA),qA(ia,fI,kA),oI?ia.persistentData=fI:Vt.freeType(fI)}else f(rA[0])?(ia.dimension=rA[0].length,ia.dtype=lI||Um(rA[0])||Gm,DI=km(rA,[rA.length,rA[0].length],ia.dtype),qA(ia,DI,kA),oI?ia.persistentData=DI:Vt.freeType(DI)):Nt.raise("invalid buffer data")}}else if(f(rA))ia.dtype=lI||Um(rA),ia.dimension=vA,qA(ia,rA,kA),oI&&(ia.persistentData=new Uint8Array(new Uint8Array(rA.buffer)));else if(Dn(rA)){rI=rA.shape;var jA=rA.stride,FA=rA.offset,zA=0,eI=0,UI=0,kI=0;rI.length===1?(zA=rI[0],eI=1,UI=jA[0],kI=0):rI.length===2?(zA=rI[0],eI=rI[1],UI=jA[0],kI=jA[1]):Nt.raise("invalid shape"),ia.dtype=lI||Um(rA.data)||Gm,ia.dimension=eI;var iI=Vt.allocType(ia.dtype,zA*eI);RB(iI,rA.data,zA,eI,UI,kI,FA),qA(ia,iI,kA),oI?ia.persistentData=iI:Vt.freeType(iI)}else rA instanceof ArrayBuffer?(ia.dtype=Om,ia.dimension=vA,qA(ia,rA,kA),oI&&(ia.persistentData=new Uint8Array(new Uint8Array(rA)))):Nt.raise("invalid buffer data")}function KA(ia){Pt.bufferCount--,pa(ia);var rA=ia.buffer;Nt(rA,"buffer must not be deleted already"),Ve.deleteBuffer(rA),ia.buffer=null,delete fa[ia.id]}function NA(ia,rA,kA,lI){Pt.bufferCount++;var vA=new nA(rA);fa[vA.id]=vA;function oI(mA){var CA=oB,fI=null,jA=0,FA=0,zA=1;return Array.isArray(mA)||f(mA)||Dn(mA)||mA instanceof ArrayBuffer?fI=mA:typeof mA=="number"?jA=mA|0:mA&&(Nt.type(mA,"object","buffer arguments must be an object, a number or an array"),"data"in mA&&(Nt(fI===null||Array.isArray(fI)||f(fI)||Dn(fI),"invalid data for buffer"),fI=mA.data),"usage"in mA&&(Nt.parameter(mA.usage,Mm,"invalid buffer usage"),CA=Mm[mA.usage]),"type"in mA&&(Nt.parameter(mA.type,KE,"invalid buffer type"),FA=KE[mA.type]),"dimension"in mA&&(Nt.type(mA.dimension,"number","invalid dimension"),zA=mA.dimension|0),"length"in mA&&(Nt.nni(jA,"buffer length must be a nonnegative integer"),jA=mA.length|0)),vA.bind(),fI?HA(vA,fI,CA,FA,zA,lI):(jA&&Ve.bufferData(vA.type,jA,CA),vA.dtype=FA||Om,vA.usage=CA,vA.dimension=zA,vA.byteLength=jA),qr.profile&&(vA.stats.size=vA.byteLength*wE[vA.dtype]),oI}function rI(mA,CA){Nt(CA+mA.byteLength<=vA.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+mA.byteLength+" starting from offset "+CA+" to a buffer of size "+vA.byteLength),Ve.bufferSubData(vA.type,CA,mA)}function DI(mA,CA){var fI=(CA||0)|0,jA;if(vA.bind(),f(mA)||mA instanceof ArrayBuffer)rI(mA,fI);else if(Array.isArray(mA)){if(mA.length>0)if(typeof mA[0]=="number"){var FA=Vt.allocType(vA.dtype,mA.length);DB(FA,mA),rI(FA,fI),Vt.freeType(FA)}else if(Array.isArray(mA[0])||f(mA[0])){jA=Pm(mA);var zA=km(mA,jA,vA.dtype);rI(zA,fI),Vt.freeType(zA)}else Nt.raise("invalid buffer data")}else if(Dn(mA)){jA=mA.shape;var eI=mA.stride,UI=0,kI=0,iI=0,sI=0;jA.length===1?(UI=jA[0],kI=1,iI=eI[0],sI=0):jA.length===2?(UI=jA[0],kI=jA[1],iI=eI[0],sI=eI[1]):Nt.raise("invalid shape");var LI=Array.isArray(mA.data)?vA.dtype:Um(mA.data),$I=Vt.allocType(LI,UI*kI);RB($I,mA.data,UI,kI,iI,sI,mA.offset),rI($I,fI),Vt.freeType($I)}else Nt.raise("invalid data for buffer subdata");return oI}return kA||oI(ia),oI._reglType="buffer",oI._buffer=vA,oI.subdata=DI,qr.profile&&(oI.stats=vA.stats),oI.destroy=function(){KA(vA)},oI}function OA(){ya(fa).forEach(function(ia){ia.buffer=Ve.createBuffer(),Ve.bindBuffer(ia.type,ia.buffer),Ve.bufferData(ia.type,ia.persistentData||ia.byteLength,ia.usage)})}return qr.profile&&(Pt.getTotalBufferSize=function(){var ia=0;return Object.keys(fa).forEach(function(rA){ia+=fa[rA].stats.size}),ia}),{create:NA,createStream:RA,destroyStream:$A,clear:function(){ya(fa).forEach(KA),TA.forEach(KA)},getBuffer:function(ia){return ia&&ia._buffer instanceof nA?ia._buffer:null},restore:OA,_initBuffer:HA}}var TB=0,aB=0,Sy=1,wy=1,xy=4,ye=4,Le={points:TB,point:aB,lines:Sy,line:wy,triangles:xy,triangle:ye,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ge=0,Ue=1,Et=4,St=5120,Lt=5121,Hn=5122,Yr=5123,sa=5124,dA=5125,SA=34963,iA=35040,XA=35044;function ZI(Ve,Pt,qr,pa){var EA={},fa=0,nA={uint8:Lt,uint16:Yr};Pt.oes_element_index_uint&&(nA.uint32=dA);function TA(OA){this.id=fa++,EA[this.id]=this,this.buffer=OA,this.primType=Et,this.vertCount=0,this.type=0}TA.prototype.bind=function(){this.buffer.bind()};var RA=[];function $A(OA){var ia=RA.pop();return ia||(ia=new TA(qr.create(null,SA,!0,!1)._buffer)),HA(ia,OA,iA,-1,-1,0,0),ia}function qA(OA){RA.push(OA)}function HA(OA,ia,rA,kA,lI,vA,oI){OA.buffer.bind();var rI;if(ia){var DI=oI;!oI&&(!f(ia)||Dn(ia)&&!f(ia.data))&&(DI=Pt.oes_element_index_uint?dA:Yr),qr._initBuffer(OA.buffer,ia,rA,DI,3)}else Ve.bufferData(SA,vA,rA),OA.buffer.dtype=rI||Lt,OA.buffer.usage=rA,OA.buffer.dimension=3,OA.buffer.byteLength=vA;if(rI=oI,!oI){switch(OA.buffer.dtype){case Lt:case St:rI=Lt;break;case Yr:case Hn:rI=Yr;break;case dA:case sa:rI=dA;break;default:Nt.raise("unsupported type for element array")}OA.buffer.dtype=rI}OA.type=rI,Nt(rI!==dA||!!Pt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var mA=lI;mA<0&&(mA=OA.buffer.byteLength,rI===Yr?mA>>=1:rI===dA&&(mA>>=2)),OA.vertCount=mA;var CA=kA;if(kA<0){CA=Et;var fI=OA.buffer.dimension;fI===1&&(CA=Ge),fI===2&&(CA=Ue),fI===3&&(CA=Et)}OA.primType=CA}function KA(OA){pa.elementsCount--,Nt(OA.buffer!==null,"must not double destroy elements"),delete EA[OA.id],OA.buffer.destroy(),OA.buffer=null}function NA(OA,ia){var rA=qr.create(null,SA,!0),kA=new TA(rA._buffer);pa.elementsCount++;function lI(vA){if(!vA)rA(),kA.primType=Et,kA.vertCount=0,kA.type=Lt;else if(typeof vA=="number")rA(vA),kA.primType=Et,kA.vertCount=vA|0,kA.type=Lt;else{var oI=null,rI=XA,DI=-1,mA=-1,CA=0,fI=0;Array.isArray(vA)||f(vA)||Dn(vA)?oI=vA:(Nt.type(vA,"object","invalid arguments for elements"),"data"in vA&&(oI=vA.data,Nt(Array.isArray(oI)||f(oI)||Dn(oI),"invalid data for element buffer")),"usage"in vA&&(Nt.parameter(vA.usage,Mm,"invalid element buffer usage"),rI=Mm[vA.usage]),"primitive"in vA&&(Nt.parameter(vA.primitive,Le,"invalid element buffer primitive"),DI=Le[vA.primitive]),"count"in vA&&(Nt(typeof vA.count=="number"&&vA.count>=0,"invalid vertex count for elements"),mA=vA.count|0),"type"in vA&&(Nt.parameter(vA.type,nA,"invalid buffer type"),fI=nA[vA.type]),"length"in vA?CA=vA.length|0:(CA=mA,fI===Yr||fI===Hn?CA*=2:(fI===dA||fI===sa)&&(CA*=4))),HA(kA,oI,rI,DI,mA,CA,fI)}return lI}return lI(OA),lI._reglType="elements",lI._elements=kA,lI.subdata=function(vA,oI){return rA.subdata(vA,oI),lI},lI.destroy=function(){KA(kA)},lI}return{create:NA,createStream:$A,destroyStream:qA,getElements:function(OA){return typeof OA=="function"&&OA._elements instanceof TA?OA._elements:null},clear:function(){ya(EA).forEach(KA)}}}var fC=new Float32Array(1),aC=new Uint32Array(fC.buffer),XC=5123;function kC(Ve){for(var Pt=Vt.allocType(XC,Ve.length),qr=0;qr<Ve.length;++qr)if(isNaN(Ve[qr]))Pt[qr]=65535;else if(Ve[qr]===1/0)Pt[qr]=31744;else if(Ve[qr]===-1/0)Pt[qr]=64512;else{fC[0]=Ve[qr];var pa=aC[0],EA=pa>>>31<<15,fa=(pa<<1>>>24)-127,nA=pa>>13&1023;if(fa<-24)Pt[qr]=EA;else if(fa<-14){var TA=-14-fa;Pt[qr]=EA+(nA+1024>>TA)}else fa>15?Pt[qr]=EA+31744:Pt[qr]=EA+(fa+15<<10)+nA}return Pt}function pC(Ve){return Array.isArray(Ve)||f(Ve)}var yE=function(Ve){return!(Ve&Ve-1)&&!!Ve},dC=34467,eE=3553,IC=34067,bC=34069,QE=6408,Im=6406,uE=6407,TE=6409,gE=6410,NE=32854,xE=32855,hE=36194,AB=32819,LE=32820,FE=33635,by=34042,lB=6402,$m=34041,BC=35904,nm=35906,tE=36193,$E=33776,cB=33777,uB=33778,Hm=33779,HE=35986,qm=35987,ME=34798,gB=35840,om=35841,Cm=35842,Em=35843,Ym=36196,sm=5121,am=5123,mm=5125,jE=5126,Dy=10242,hB=10243,NB=10497,zt=33071,ea=33648,tA=10240,cA=10241,_A=9728,hI=9729,yI=9984,RI=9985,QI=9986,lC=9987,KI=33170,jI=4352,hC=4353,VI=4354,SC=34046,AE=3317,rE=37440,IE=37441,bE=37443,zE=37444,HC=33984,RQ=[yI,QI,RI,lC],LB=[0,TE,gE,uE,QE],DE={};DE[TE]=DE[Im]=DE[lB]=1,DE[$m]=DE[gE]=2,DE[uE]=DE[BC]=3,DE[QE]=DE[nm]=4;function Vm(Ve){return"[object "+Ve+"]"}var s0=Vm("HTMLCanvasElement"),a0=Vm("OffscreenCanvas"),A0=Vm("CanvasRenderingContext2D"),l0=Vm("ImageBitmap"),c0=Vm("HTMLImageElement"),u0=Vm("HTMLVideoElement"),TQ=Object.keys(Fm).concat([s0,a0,A0,l0,c0,u0]),Jm=[];Jm[sm]=1,Jm[jE]=4,Jm[tE]=2,Jm[am]=2,Jm[mm]=4;var iE=[];iE[NE]=2,iE[xE]=2,iE[hE]=2,iE[$m]=4,iE[$E]=.5,iE[cB]=.5,iE[uB]=1,iE[Hm]=1,iE[HE]=.5,iE[qm]=1,iE[ME]=1,iE[gB]=.5,iE[om]=.25,iE[Cm]=.5,iE[Em]=.25,iE[Ym]=.5;function g0(Ve){return Array.isArray(Ve)&&(Ve.length===0||typeof Ve[0]=="number")}function h0(Ve){if(!Array.isArray(Ve))return!1;var Pt=Ve.length;return!(Pt===0||!pC(Ve[0]))}function Bm(Ve){return Object.prototype.toString.call(Ve)}function d0(Ve){return Bm(Ve)===s0}function f0(Ve){return Bm(Ve)===a0}function NQ(Ve){return Bm(Ve)===A0}function LQ(Ve){return Bm(Ve)===l0}function FQ(Ve){return Bm(Ve)===c0}function MQ(Ve){return Bm(Ve)===u0}function Ry(Ve){if(!Ve)return!1;var Pt=Bm(Ve);return TQ.indexOf(Pt)>=0?!0:g0(Ve)||h0(Ve)||Dn(Ve)}function p0(Ve){return Fm[Object.prototype.toString.call(Ve)]|0}function kQ(Ve,Pt){var qr=Pt.length;switch(Ve.type){case sm:case am:case mm:case jE:var pa=Vt.allocType(Ve.type,qr);pa.set(Pt),Ve.data=pa;break;case tE:Ve.data=kC(Pt);break;default:Nt.raise("unsupported texture type, must specify a typed array")}}function I0(Ve,Pt){return Vt.allocType(Ve.type===tE?jE:Ve.type,Pt)}function C0(Ve,Pt){Ve.type===tE?(Ve.data=kC(Pt),Vt.freeType(Pt)):Ve.data=Pt}function PQ(Ve,Pt,qr,pa,EA,fa){for(var nA=Ve.width,TA=Ve.height,RA=Ve.channels,$A=nA*TA*RA,qA=I0(Ve,$A),HA=0,KA=0;KA<TA;++KA)for(var NA=0;NA<nA;++NA)for(var OA=0;OA<RA;++OA)qA[HA++]=Pt[qr*NA+pa*KA+EA*OA+fa];C0(Ve,qA)}function FB(Ve,Pt,qr,pa,EA,fa){var nA;if(typeof iE[Ve]<"u"?nA=iE[Ve]:nA=DE[Ve]*Jm[Pt],fa&&(nA*=6),EA){for(var TA=0,RA=qr;RA>=1;)TA+=nA*RA*RA,RA/=2;return TA}else return nA*qr*pa}function OQ(Ve,Pt,qr,pa,EA,fa,nA){var TA={"don't care":jI,"dont care":jI,nice:VI,fast:hC},RA={repeat:NB,clamp:zt,mirror:ea},$A={nearest:_A,linear:hI},qA=_({mipmap:lC,"nearest mipmap nearest":yI,"linear mipmap nearest":RI,"nearest mipmap linear":QI,"linear mipmap linear":lC},$A),HA={none:0,browser:zE},KA={uint8:sm,rgba4:AB,rgb565:FE,"rgb5 a1":LE},NA={alpha:Im,luminance:TE,"luminance alpha":gE,rgb:uE,rgba:QE,rgba4:NE,"rgb5 a1":xE,rgb565:hE},OA={};Pt.ext_srgb&&(NA.srgb=BC,NA.srgba=nm),Pt.oes_texture_float&&(KA.float32=KA.float=jE),Pt.oes_texture_half_float&&(KA.float16=KA["half float"]=tE),Pt.webgl_depth_texture&&(_(NA,{depth:lB,"depth stencil":$m}),_(KA,{uint16:am,uint32:mm,"depth stencil":by})),Pt.webgl_compressed_texture_s3tc&&_(OA,{"rgb s3tc dxt1":$E,"rgba s3tc dxt1":cB,"rgba s3tc dxt3":uB,"rgba s3tc dxt5":Hm}),Pt.webgl_compressed_texture_atc&&_(OA,{"rgb atc":HE,"rgba atc explicit alpha":qm,"rgba atc interpolated alpha":ME}),Pt.webgl_compressed_texture_pvrtc&&_(OA,{"rgb pvrtc 4bppv1":gB,"rgb pvrtc 2bppv1":om,"rgba pvrtc 4bppv1":Cm,"rgba pvrtc 2bppv1":Em}),Pt.webgl_compressed_texture_etc1&&(OA["rgb etc1"]=Ym);var ia=Array.prototype.slice.call(Ve.getParameter(dC));Object.keys(OA).forEach(function(Kt){var va=OA[Kt];ia.indexOf(va)>=0&&(NA[Kt]=va)});var rA=Object.keys(NA);qr.textureFormats=rA;var kA=[];Object.keys(NA).forEach(function(Kt){var va=NA[Kt];kA[va]=Kt});var lI=[];Object.keys(KA).forEach(function(Kt){var va=KA[Kt];lI[va]=Kt});var vA=[];Object.keys($A).forEach(function(Kt){var va=$A[Kt];vA[va]=Kt});var oI=[];Object.keys(qA).forEach(function(Kt){var va=qA[Kt];oI[va]=Kt});var rI=[];Object.keys(RA).forEach(function(Kt){var va=RA[Kt];rI[va]=Kt});var DI=rA.reduce(function(Kt,va){var da=NA[va];return da===TE||da===Im||da===TE||da===gE||da===lB||da===$m||Pt.ext_srgb&&(da===BC||da===nm)?Kt[da]=da:da===xE||va.indexOf("rgba")>=0?Kt[da]=QE:Kt[da]=uE,Kt},{});function mA(){this.internalformat=QE,this.format=QE,this.type=sm,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=zE,this.width=0,this.height=0,this.channels=0}function CA(Kt,va){Kt.internalformat=va.internalformat,Kt.format=va.format,Kt.type=va.type,Kt.compressed=va.compressed,Kt.premultiplyAlpha=va.premultiplyAlpha,Kt.flipY=va.flipY,Kt.unpackAlignment=va.unpackAlignment,Kt.colorSpace=va.colorSpace,Kt.width=va.width,Kt.height=va.height,Kt.channels=va.channels}function fI(Kt,va){if(!(typeof va!="object"||!va)){if("premultiplyAlpha"in va&&(Nt.type(va.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Kt.premultiplyAlpha=va.premultiplyAlpha),"flipY"in va&&(Nt.type(va.flipY,"boolean","invalid texture flip"),Kt.flipY=va.flipY),"alignment"in va&&(Nt.oneOf(va.alignment,[1,2,4,8],"invalid texture unpack alignment"),Kt.unpackAlignment=va.alignment),"colorSpace"in va&&(Nt.parameter(va.colorSpace,HA,"invalid colorSpace"),Kt.colorSpace=HA[va.colorSpace]),"type"in va){var da=va.type;Nt(Pt.oes_texture_float||!(da==="float"||da==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Nt(Pt.oes_texture_half_float||!(da==="half float"||da==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Nt(Pt.webgl_depth_texture||!(da==="uint16"||da==="uint32"||da==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Nt.parameter(da,KA,"invalid texture type"),Kt.type=KA[da]}var dI=Kt.width,eC=Kt.height,Ot=Kt.channels,Mt=!1;"shape"in va?(Nt(Array.isArray(va.shape)&&va.shape.length>=2,"shape must be an array"),dI=va.shape[0],eC=va.shape[1],va.shape.length===3&&(Ot=va.shape[2],Nt(Ot>0&&Ot<=4,"invalid number of channels"),Mt=!0),Nt(dI>=0&&dI<=qr.maxTextureSize,"invalid width"),Nt(eC>=0&&eC<=qr.maxTextureSize,"invalid height")):("radius"in va&&(dI=eC=va.radius,Nt(dI>=0&&dI<=qr.maxTextureSize,"invalid radius")),"width"in va&&(dI=va.width,Nt(dI>=0&&dI<=qr.maxTextureSize,"invalid width")),"height"in va&&(eC=va.height,Nt(eC>=0&&eC<=qr.maxTextureSize,"invalid height")),"channels"in va&&(Ot=va.channels,Nt(Ot>0&&Ot<=4,"invalid number of channels"),Mt=!0)),Kt.width=dI|0,Kt.height=eC|0,Kt.channels=Ot|0;var zr=!1;if("format"in va){var ra=va.format;Nt(Pt.webgl_depth_texture||!(ra==="depth"||ra==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Nt.parameter(ra,NA,"invalid texture format");var oa=Kt.internalformat=NA[ra];Kt.format=DI[oa],ra in KA&&("type"in va||(Kt.type=KA[ra])),ra in OA&&(Kt.compressed=!0),zr=!0}!Mt&&zr?Kt.channels=DE[Kt.format]:Mt&&!zr?Kt.channels!==LB[Kt.format]&&(Kt.format=Kt.internalformat=LB[Kt.channels]):zr&&Mt&&Nt(Kt.channels===DE[Kt.format],"number of channels inconsistent with specified format")}}function jA(Kt){Ve.pixelStorei(rE,Kt.flipY),Ve.pixelStorei(IE,Kt.premultiplyAlpha),Ve.pixelStorei(bE,Kt.colorSpace),Ve.pixelStorei(AE,Kt.unpackAlignment)}function FA(){mA.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function zA(Kt,va){var da=null;if(Ry(va)?da=va:va&&(Nt.type(va,"object","invalid pixel data type"),fI(Kt,va),"x"in va&&(Kt.xOffset=va.x|0),"y"in va&&(Kt.yOffset=va.y|0),Ry(va.data)&&(da=va.data)),Nt(!Kt.compressed||da instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),va.copy){Nt(!da,"can not specify copy and data field for the same texture");var dI=EA.viewportWidth,eC=EA.viewportHeight;Kt.width=Kt.width||dI-Kt.xOffset,Kt.height=Kt.height||eC-Kt.yOffset,Kt.needsCopy=!0,Nt(Kt.xOffset>=0&&Kt.xOffset<dI&&Kt.yOffset>=0&&Kt.yOffset<eC&&Kt.width>0&&Kt.width<=dI&&Kt.height>0&&Kt.height<=eC,"copy texture read out of bounds")}else if(!da)Kt.width=Kt.width||1,Kt.height=Kt.height||1,Kt.channels=Kt.channels||4;else if(f(da))Kt.channels=Kt.channels||4,Kt.data=da,!("type"in va)&&Kt.type===sm&&(Kt.type=p0(da));else if(g0(da))Kt.channels=Kt.channels||4,kQ(Kt,da),Kt.alignment=1,Kt.needsFree=!0;else if(Dn(da)){var Ot=da.data;!Array.isArray(Ot)&&Kt.type===sm&&(Kt.type=p0(Ot));var Mt=da.shape,zr=da.stride,ra,oa,qn,kn,Wn,Ut;Mt.length===3?(qn=Mt[2],Ut=zr[2]):(Nt(Mt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),qn=1,Ut=1),ra=Mt[0],oa=Mt[1],kn=zr[0],Wn=zr[1],Kt.alignment=1,Kt.width=ra,Kt.height=oa,Kt.channels=qn,Kt.format=Kt.internalformat=LB[qn],Kt.needsFree=!0,PQ(Kt,Ot,kn,Wn,Ut,da.offset)}else if(d0(da)||f0(da)||NQ(da))d0(da)||f0(da)?Kt.element=da:Kt.element=da.canvas,Kt.width=Kt.element.width,Kt.height=Kt.element.height,Kt.channels=4;else if(LQ(da))Kt.element=da,Kt.width=da.width,Kt.height=da.height,Kt.channels=4;else if(FQ(da))Kt.element=da,Kt.width=da.naturalWidth,Kt.height=da.naturalHeight,Kt.channels=4;else if(MQ(da))Kt.element=da,Kt.width=da.videoWidth,Kt.height=da.videoHeight,Kt.channels=4;else if(h0(da)){var Wt=Kt.width||da[0].length,Yt=Kt.height||da.length,ha=Kt.channels;pC(da[0][0])?ha=ha||da[0][0].length:ha=ha||1;for(var la=UA.shape(da),pA=1,yA=0;yA<la.length;++yA)pA*=la[yA];var VA=I0(Kt,pA);UA.flatten(da,la,"",VA),C0(Kt,VA),Kt.alignment=1,Kt.width=Wt,Kt.height=Yt,Kt.channels=ha,Kt.format=Kt.internalformat=LB[ha],Kt.needsFree=!0}Kt.type===jE?Nt(qr.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Kt.type===tE&&Nt(qr.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function eI(Kt,va,da){var dI=Kt.element,eC=Kt.data,Ot=Kt.internalformat,Mt=Kt.format,zr=Kt.type,ra=Kt.width,oa=Kt.height;jA(Kt),dI?Ve.texImage2D(va,da,Mt,Mt,zr,dI):Kt.compressed?Ve.compressedTexImage2D(va,da,Ot,ra,oa,0,eC):Kt.needsCopy?(pa(),Ve.copyTexImage2D(va,da,Mt,Kt.xOffset,Kt.yOffset,ra,oa,0)):Ve.texImage2D(va,da,Mt,ra,oa,0,Mt,zr,eC||null)}function UI(Kt,va,da,dI,eC){var Ot=Kt.element,Mt=Kt.data,zr=Kt.internalformat,ra=Kt.format,oa=Kt.type,qn=Kt.width,kn=Kt.height;jA(Kt),Ot?Ve.texSubImage2D(va,eC,da,dI,ra,oa,Ot):Kt.compressed?Ve.compressedTexSubImage2D(va,eC,da,dI,zr,qn,kn,Mt):Kt.needsCopy?(pa(),Ve.copyTexSubImage2D(va,eC,da,dI,Kt.xOffset,Kt.yOffset,qn,kn)):Ve.texSubImage2D(va,eC,da,dI,qn,kn,ra,oa,Mt)}var kI=[];function iI(){return kI.pop()||new FA}function sI(Kt){Kt.needsFree&&Vt.freeType(Kt.data),FA.call(Kt),kI.push(Kt)}function LI(){mA.call(this),this.genMipmaps=!1,this.mipmapHint=jI,this.mipmask=0,this.images=Array(16)}function $I(Kt,va,da){var dI=Kt.images[0]=iI();Kt.mipmask=1,dI.width=Kt.width=va,dI.height=Kt.height=da,dI.channels=Kt.channels=4}function iC(Kt,va){var da=null;if(Ry(va))da=Kt.images[0]=iI(),CA(da,Kt),zA(da,va),Kt.mipmask=1;else if(fI(Kt,va),Array.isArray(va.mipmap))for(var dI=va.mipmap,eC=0;eC<dI.length;++eC)da=Kt.images[eC]=iI(),CA(da,Kt),da.width>>=eC,da.height>>=eC,zA(da,dI[eC]),Kt.mipmask|=1<<eC;else da=Kt.images[0]=iI(),CA(da,Kt),zA(da,va),Kt.mipmask=1;CA(Kt,Kt.images[0]),Kt.compressed&&(Kt.internalformat===$E||Kt.internalformat===cB||Kt.internalformat===uB||Kt.internalformat===Hm)&&Nt(Kt.width%4===0&&Kt.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function DC(Kt,va){for(var da=Kt.images,dI=0;dI<da.length;++dI){if(!da[dI])return;eI(da[dI],va,dI)}}var TC=[];function oC(){var Kt=TC.pop()||new LI;mA.call(Kt),Kt.mipmask=0;for(var va=0;va<16;++va)Kt.images[va]=null;return Kt}function qC(Kt){for(var va=Kt.images,da=0;da<va.length;++da)va[da]&&sI(va[da]),va[da]=null;TC.push(Kt)}function wC(){this.minFilter=_A,this.magFilter=_A,this.wrapS=zt,this.wrapT=zt,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=jI}function OC(Kt,va){if("min"in va){var da=va.min;Nt.parameter(da,qA),Kt.minFilter=qA[da],RQ.indexOf(Kt.minFilter)>=0&&!("faces"in va)&&(Kt.genMipmaps=!0)}if("mag"in va){var dI=va.mag;Nt.parameter(dI,$A),Kt.magFilter=$A[dI]}var eC=Kt.wrapS,Ot=Kt.wrapT;if("wrap"in va){var Mt=va.wrap;typeof Mt=="string"?(Nt.parameter(Mt,RA),eC=Ot=RA[Mt]):Array.isArray(Mt)&&(Nt.parameter(Mt[0],RA),Nt.parameter(Mt[1],RA),eC=RA[Mt[0]],Ot=RA[Mt[1]])}else{if("wrapS"in va){var zr=va.wrapS;Nt.parameter(zr,RA),eC=RA[zr]}if("wrapT"in va){var ra=va.wrapT;Nt.parameter(ra,RA),Ot=RA[ra]}}if(Kt.wrapS=eC,Kt.wrapT=Ot,"anisotropic"in va){var oa=va.anisotropic;Nt(typeof oa=="number"&&oa>=1&&oa<=qr.maxAnisotropic,"aniso samples must be between 1 and "),Kt.anisotropic=va.anisotropic}if("mipmap"in va){var qn=!1;switch(typeof va.mipmap){case"string":Nt.parameter(va.mipmap,TA,"invalid mipmap hint"),Kt.mipmapHint=TA[va.mipmap],Kt.genMipmaps=!0,qn=!0;break;case"boolean":qn=Kt.genMipmaps=va.mipmap;break;case"object":Nt(Array.isArray(va.mipmap),"invalid mipmap type"),Kt.genMipmaps=!1,qn=!0;break;default:Nt.raise("invalid mipmap type")}qn&&!("min"in va)&&(Kt.minFilter=yI)}}function YC(Kt,va){Ve.texParameteri(va,cA,Kt.minFilter),Ve.texParameteri(va,tA,Kt.magFilter),Ve.texParameteri(va,Dy,Kt.wrapS),Ve.texParameteri(va,hB,Kt.wrapT),Pt.ext_texture_filter_anisotropic&&Ve.texParameteri(va,SC,Kt.anisotropic),Kt.genMipmaps&&(Ve.hint(KI,Kt.mipmapHint),Ve.generateMipmap(va))}var VC=0,ZC={},nE=qr.maxTextureUnits,LC=Array(nE).map(function(){return null});function zI(Kt){mA.call(this),this.mipmask=0,this.internalformat=QE,this.id=VC++,this.refCount=1,this.target=Kt,this.texture=Ve.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new wC,nA.profile&&(this.stats={size:0})}function oE(Kt){Ve.activeTexture(HC),Ve.bindTexture(Kt.target,Kt.texture)}function CC(){var Kt=LC[0];Kt?Ve.bindTexture(Kt.target,Kt.texture):Ve.bindTexture(eE,null)}function TI(Kt){var va=Kt.texture;Nt(va,"must not double destroy texture");var da=Kt.unit,dI=Kt.target;da>=0&&(Ve.activeTexture(HC+da),Ve.bindTexture(dI,null),LC[da]=null),Ve.deleteTexture(va),Kt.texture=null,Kt.params=null,Kt.pixels=null,Kt.refCount=0,delete ZC[Kt.id],fa.textureCount--}_(zI.prototype,{bind:function(){var Kt=this;Kt.bindCount+=1;var va=Kt.unit;if(va<0){for(var da=0;da<nE;++da){var dI=LC[da];if(dI){if(dI.bindCount>0)continue;dI.unit=-1}LC[da]=Kt,va=da;break}va>=nE&&Nt.raise("insufficient number of texture units"),nA.profile&&fa.maxTextureUnits<va+1&&(fa.maxTextureUnits=va+1),Kt.unit=va,Ve.activeTexture(HC+va),Ve.bindTexture(Kt.target,Kt.texture)}return va},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&TI(this)}});function nC(Kt,va){var da=new zI(eE);ZC[da.id]=da,fa.textureCount++;function dI(Mt,zr){var ra=da.texInfo;wC.call(ra);var oa=oC();return typeof Mt=="number"?typeof zr=="number"?$I(oa,Mt|0,zr|0):$I(oa,Mt|0,Mt|0):Mt?(Nt.type(Mt,"object","invalid arguments to regl.texture"),OC(ra,Mt),iC(oa,Mt)):$I(oa,1,1),ra.genMipmaps&&(oa.mipmask=(oa.width<<1)-1),da.mipmask=oa.mipmask,CA(da,oa),Nt.texture2D(ra,oa,qr),da.internalformat=oa.internalformat,dI.width=oa.width,dI.height=oa.height,oE(da),DC(oa,eE),YC(ra,eE),CC(),qC(oa),nA.profile&&(da.stats.size=FB(da.internalformat,da.type,oa.width,oa.height,ra.genMipmaps,!1)),dI.format=kA[da.internalformat],dI.type=lI[da.type],dI.mag=vA[ra.magFilter],dI.min=oI[ra.minFilter],dI.wrapS=rI[ra.wrapS],dI.wrapT=rI[ra.wrapT],dI}function eC(Mt,zr,ra,oa){Nt(!!Mt,"must specify image data");var qn=zr|0,kn=ra|0,Wn=oa|0,Ut=iI();return CA(Ut,da),Ut.width=0,Ut.height=0,zA(Ut,Mt),Ut.width=Ut.width||(da.width>>Wn)-qn,Ut.height=Ut.height||(da.height>>Wn)-kn,Nt(da.type===Ut.type&&da.format===Ut.format&&da.internalformat===Ut.internalformat,"incompatible format for texture.subimage"),Nt(qn>=0&&kn>=0&&qn+Ut.width<=da.width&&kn+Ut.height<=da.height,"texture.subimage write out of bounds"),Nt(da.mipmask&1<<Wn,"missing mipmap data"),Nt(Ut.data||Ut.element||Ut.needsCopy,"missing image data"),oE(da),UI(Ut,eE,qn,kn,Wn),CC(),sI(Ut),dI}function Ot(Mt,zr){var ra=Mt|0,oa=zr|0||ra;if(ra===da.width&&oa===da.height)return dI;dI.width=da.width=ra,dI.height=da.height=oa,oE(da);for(var qn=0;da.mipmask>>qn;++qn){var kn=ra>>qn,Wn=oa>>qn;if(!kn||!Wn)break;Ve.texImage2D(eE,qn,da.format,kn,Wn,0,da.format,da.type,null)}return CC(),nA.profile&&(da.stats.size=FB(da.internalformat,da.type,ra,oa,!1,!1)),dI}return dI(Kt,va),dI.subimage=eC,dI.resize=Ot,dI._reglType="texture2d",dI._texture=da,nA.profile&&(dI.stats=da.stats),dI.destroy=function(){da.decRef()},dI}function uC(Kt,va,da,dI,eC,Ot){var Mt=new zI(IC);ZC[Mt.id]=Mt,fa.cubeCount++;var zr=new Array(6);function ra(kn,Wn,Ut,Wt,Yt,ha){var la,pA=Mt.texInfo;for(wC.call(pA),la=0;la<6;++la)zr[la]=oC();if(typeof kn=="number"||!kn){var yA=kn|0||1;for(la=0;la<6;++la)$I(zr[la],yA,yA)}else if(typeof kn=="object")if(Wn)iC(zr[0],kn),iC(zr[1],Wn),iC(zr[2],Ut),iC(zr[3],Wt),iC(zr[4],Yt),iC(zr[5],ha);else if(OC(pA,kn),fI(Mt,kn),"faces"in kn){var VA=kn.faces;for(Nt(Array.isArray(VA)&&VA.length===6,"cube faces must be a length 6 array"),la=0;la<6;++la)Nt(typeof VA[la]=="object"&&!!VA[la],"invalid input for cube map face"),CA(zr[la],Mt),iC(zr[la],VA[la])}else for(la=0;la<6;++la)iC(zr[la],kn);else Nt.raise("invalid arguments to cube map");for(CA(Mt,zr[0]),Nt.optional(function(){qr.npotTextureCube||Nt(yE(Mt.width)&&yE(Mt.height),"your browser does not support non power or two texture dimensions")}),pA.genMipmaps?Mt.mipmask=(zr[0].width<<1)-1:Mt.mipmask=zr[0].mipmask,Nt.textureCube(Mt,pA,zr,qr),Mt.internalformat=zr[0].internalformat,ra.width=zr[0].width,ra.height=zr[0].height,oE(Mt),la=0;la<6;++la)DC(zr[la],bC+la);for(YC(pA,IC),CC(),nA.profile&&(Mt.stats.size=FB(Mt.internalformat,Mt.type,ra.width,ra.height,pA.genMipmaps,!0)),ra.format=kA[Mt.internalformat],ra.type=lI[Mt.type],ra.mag=vA[pA.magFilter],ra.min=oI[pA.minFilter],ra.wrapS=rI[pA.wrapS],ra.wrapT=rI[pA.wrapT],la=0;la<6;++la)qC(zr[la]);return ra}function oa(kn,Wn,Ut,Wt,Yt){Nt(!!Wn,"must specify image data"),Nt(typeof kn=="number"&&kn===(kn|0)&&kn>=0&&kn<6,"invalid face");var ha=Ut|0,la=Wt|0,pA=Yt|0,yA=iI();return CA(yA,Mt),yA.width=0,yA.height=0,zA(yA,Wn),yA.width=yA.width||(Mt.width>>pA)-ha,yA.height=yA.height||(Mt.height>>pA)-la,Nt(Mt.type===yA.type&&Mt.format===yA.format&&Mt.internalformat===yA.internalformat,"incompatible format for texture.subimage"),Nt(ha>=0&&la>=0&&ha+yA.width<=Mt.width&&la+yA.height<=Mt.height,"texture.subimage write out of bounds"),Nt(Mt.mipmask&1<<pA,"missing mipmap data"),Nt(yA.data||yA.element||yA.needsCopy,"missing image data"),oE(Mt),UI(yA,bC+kn,ha,la,pA),CC(),sI(yA),ra}function qn(kn){var Wn=kn|0;if(Wn!==Mt.width){ra.width=Mt.width=Wn,ra.height=Mt.height=Wn,oE(Mt);for(var Ut=0;Ut<6;++Ut)for(var Wt=0;Mt.mipmask>>Wt;++Wt)Ve.texImage2D(bC+Ut,Wt,Mt.format,Wn>>Wt,Wn>>Wt,0,Mt.format,Mt.type,null);return CC(),nA.profile&&(Mt.stats.size=FB(Mt.internalformat,Mt.type,ra.width,ra.height,!1,!0)),ra}}return ra(Kt,va,da,dI,eC,Ot),ra.subimage=oa,ra.resize=qn,ra._reglType="textureCube",ra._texture=Mt,nA.profile&&(ra.stats=Mt.stats),ra.destroy=function(){Mt.decRef()},ra}function FC(){for(var Kt=0;Kt<nE;++Kt)Ve.activeTexture(HC+Kt),Ve.bindTexture(eE,null),LC[Kt]=null;ya(ZC).forEach(TI),fa.cubeCount=0,fa.textureCount=0}nA.profile&&(fa.getTotalTextureSize=function(){var Kt=0;return Object.keys(ZC).forEach(function(va){Kt+=ZC[va].stats.size}),Kt});function YE(){for(var Kt=0;Kt<nE;++Kt){var va=LC[Kt];va&&(va.bindCount=0,va.unit=-1,LC[Kt]=null)}ya(ZC).forEach(function(da){da.texture=Ve.createTexture(),Ve.bindTexture(da.target,da.texture);for(var dI=0;dI<32;++dI)if(da.mipmask&1<<dI)if(da.target===eE)Ve.texImage2D(eE,dI,da.internalformat,da.width>>dI,da.height>>dI,0,da.internalformat,da.type,null);else for(var eC=0;eC<6;++eC)Ve.texImage2D(bC+eC,dI,da.internalformat,da.width>>dI,da.height>>dI,0,da.internalformat,da.type,null);YC(da.texInfo,da.target)})}function xm(){for(var Kt=0;Kt<nE;++Kt){var va=LC[Kt];va&&(va.bindCount=0,va.unit=-1,LC[Kt]=null),Ve.activeTexture(HC+Kt),Ve.bindTexture(eE,null),Ve.bindTexture(IC,null)}}return{create2D:nC,createCube:uC,clear:FC,getTexture:function(Kt){return null},restore:YE,refresh:xm}}var Am=36161,MB=32854,E0=32855,m0=36194,B0=33189,Q0=36168,_0=34041,v0=35907,S0=34836,w0=34842,b0=34843,kE=[];kE[MB]=2,kE[E0]=2,kE[m0]=2,kE[B0]=2,kE[Q0]=1,kE[_0]=4,kE[v0]=4,kE[S0]=16,kE[w0]=8,kE[b0]=6;function D0(Ve,Pt,qr){return kE[Ve]*Pt*qr}var GQ=function(Ve,Pt,qr,pa,EA){var fa={rgba4:MB,rgb565:m0,"rgb5 a1":E0,depth:B0,stencil:Q0,"depth stencil":_0};Pt.ext_srgb&&(fa.srgba=v0),Pt.ext_color_buffer_half_float&&(fa.rgba16f=w0,fa.rgb16f=b0),Pt.webgl_color_buffer_float&&(fa.rgba32f=S0);var nA=[];Object.keys(fa).forEach(function(NA){var OA=fa[NA];nA[OA]=NA});var TA=0,RA={};function $A(NA){this.id=TA++,this.refCount=1,this.renderbuffer=NA,this.format=MB,this.width=0,this.height=0,EA.profile&&(this.stats={size:0})}$A.prototype.decRef=function(){--this.refCount<=0&&qA(this)};function qA(NA){var OA=NA.renderbuffer;Nt(OA,"must not double destroy renderbuffer"),Ve.bindRenderbuffer(Am,null),Ve.deleteRenderbuffer(OA),NA.renderbuffer=null,NA.refCount=0,delete RA[NA.id],pa.renderbufferCount--}function HA(NA,OA){var ia=new $A(Ve.createRenderbuffer());RA[ia.id]=ia,pa.renderbufferCount++;function rA(lI,vA){var oI=0,rI=0,DI=MB;if(typeof lI=="object"&&lI){var mA=lI;if("shape"in mA){var CA=mA.shape;Nt(Array.isArray(CA)&&CA.length>=2,"invalid renderbuffer shape"),oI=CA[0]|0,rI=CA[1]|0}else"radius"in mA&&(oI=rI=mA.radius|0),"width"in mA&&(oI=mA.width|0),"height"in mA&&(rI=mA.height|0);"format"in mA&&(Nt.parameter(mA.format,fa,"invalid renderbuffer format"),DI=fa[mA.format])}else typeof lI=="number"?(oI=lI|0,typeof vA=="number"?rI=vA|0:rI=oI):lI?Nt.raise("invalid arguments to renderbuffer constructor"):oI=rI=1;if(Nt(oI>0&&rI>0&&oI<=qr.maxRenderbufferSize&&rI<=qr.maxRenderbufferSize,"invalid renderbuffer size"),!(oI===ia.width&&rI===ia.height&&DI===ia.format))return rA.width=ia.width=oI,rA.height=ia.height=rI,ia.format=DI,Ve.bindRenderbuffer(Am,ia.renderbuffer),Ve.renderbufferStorage(Am,DI,oI,rI),Nt(Ve.getError()===0,"invalid render buffer format"),EA.profile&&(ia.stats.size=D0(ia.format,ia.width,ia.height)),rA.format=nA[ia.format],rA}function kA(lI,vA){var oI=lI|0,rI=vA|0||oI;return oI===ia.width&&rI===ia.height||(Nt(oI>0&&rI>0&&oI<=qr.maxRenderbufferSize&&rI<=qr.maxRenderbufferSize,"invalid renderbuffer size"),rA.width=ia.width=oI,rA.height=ia.height=rI,Ve.bindRenderbuffer(Am,ia.renderbuffer),Ve.renderbufferStorage(Am,ia.format,oI,rI),Nt(Ve.getError()===0,"invalid render buffer format"),EA.profile&&(ia.stats.size=D0(ia.format,ia.width,ia.height))),rA}return rA(NA,OA),rA.resize=kA,rA._reglType="renderbuffer",rA._renderbuffer=ia,EA.profile&&(rA.stats=ia.stats),rA.destroy=function(){ia.decRef()},rA}EA.profile&&(pa.getTotalRenderbufferSize=function(){var NA=0;return Object.keys(RA).forEach(function(OA){NA+=RA[OA].stats.size}),NA});function KA(){ya(RA).forEach(function(NA){NA.renderbuffer=Ve.createRenderbuffer(),Ve.bindRenderbuffer(Am,NA.renderbuffer),Ve.renderbufferStorage(Am,NA.format,NA.width,NA.height)}),Ve.bindRenderbuffer(Am,null)}return{create:HA,clear:function(){ya(RA).forEach(qA)},restore:KA}},WE=36160,Ty=36161,ym=3553,kB=34069,R0=36064,T0=36096,N0=36128,L0=33306,F0=36053,UQ=36054,$Q=36055,HQ=36057,qQ=36061,YQ=36193,VQ=5121,JQ=5126,M0=6407,k0=6408,KQ=6402,jQ=[M0,k0],Ny=[];Ny[k0]=4,Ny[M0]=3;var PB=[];PB[VQ]=1,PB[JQ]=4,PB[YQ]=2;var zQ=32854,WQ=32855,XQ=36194,ZQ=33189,e_=36168,P0=34041,t_=35907,r_=34836,i_=34842,n_=34843,o_=[zQ,WQ,XQ,t_,i_,n_,r_],Km={};Km[F0]="complete",Km[UQ]="incomplete attachment",Km[HQ]="incomplete dimensions",Km[$Q]="incomplete, missing attachment",Km[qQ]="unsupported";function s_(Ve,Pt,qr,pa,EA,fa){var nA={cur:null,next:null,dirty:!1,setFBO:null},TA=["rgba"],RA=["rgba4","rgb565","rgb5 a1"];Pt.ext_srgb&&RA.push("srgba"),Pt.ext_color_buffer_half_float&&RA.push("rgba16f","rgb16f"),Pt.webgl_color_buffer_float&&RA.push("rgba32f");var $A=["uint8"];Pt.oes_texture_half_float&&$A.push("half float","float16"),Pt.oes_texture_float&&$A.push("float","float32");function qA(FA,zA,eI){this.target=FA,this.texture=zA,this.renderbuffer=eI;var UI=0,kI=0;zA?(UI=zA.width,kI=zA.height):eI&&(UI=eI.width,kI=eI.height),this.width=UI,this.height=kI}function HA(FA){FA&&(FA.texture&&FA.texture._texture.decRef(),FA.renderbuffer&&FA.renderbuffer._renderbuffer.decRef())}function KA(FA,zA,eI){if(FA)if(FA.texture){var UI=FA.texture._texture,kI=Math.max(1,UI.width),iI=Math.max(1,UI.height);Nt(kI===zA&&iI===eI,"inconsistent width/height for supplied texture"),UI.refCount+=1}else{var sI=FA.renderbuffer._renderbuffer;Nt(sI.width===zA&&sI.height===eI,"inconsistent width/height for renderbuffer"),sI.refCount+=1}}function NA(FA,zA){zA&&(zA.texture?Ve.framebufferTexture2D(WE,FA,zA.target,zA.texture._texture.texture,0):Ve.framebufferRenderbuffer(WE,FA,Ty,zA.renderbuffer._renderbuffer.renderbuffer))}function OA(FA){var zA=ym,eI=null,UI=null,kI=FA;typeof FA=="object"&&(kI=FA.data,"target"in FA&&(zA=FA.target|0)),Nt.type(kI,"function","invalid attachment data");var iI=kI._reglType;return iI==="texture2d"?(eI=kI,Nt(zA===ym)):iI==="textureCube"?(eI=kI,Nt(zA>=kB&&zA<kB+6,"invalid cube map target")):iI==="renderbuffer"?(UI=kI,zA=Ty):Nt.raise("invalid regl object for attachment"),new qA(zA,eI,UI)}function ia(FA,zA,eI,UI,kI){if(eI){var iI=pa.create2D({width:FA,height:zA,format:UI,type:kI});return iI._texture.refCount=0,new qA(ym,iI,null)}else{var sI=EA.create({width:FA,height:zA,format:UI});return sI._renderbuffer.refCount=0,new qA(Ty,null,sI)}}function rA(FA){return FA&&(FA.texture||FA.renderbuffer)}function kA(FA,zA,eI){FA&&(FA.texture?FA.texture.resize(zA,eI):FA.renderbuffer&&FA.renderbuffer.resize(zA,eI),FA.width=zA,FA.height=eI)}var lI=0,vA={};function oI(){this.id=lI++,vA[this.id]=this,this.framebuffer=Ve.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function rI(FA){FA.colorAttachments.forEach(HA),HA(FA.depthAttachment),HA(FA.stencilAttachment),HA(FA.depthStencilAttachment)}function DI(FA){var zA=FA.framebuffer;Nt(zA,"must not double destroy framebuffer"),Ve.deleteFramebuffer(zA),FA.framebuffer=null,fa.framebufferCount--,delete vA[FA.id]}function mA(FA){var zA;Ve.bindFramebuffer(WE,FA.framebuffer);var eI=FA.colorAttachments;for(zA=0;zA<eI.length;++zA)NA(R0+zA,eI[zA]);for(zA=eI.length;zA<qr.maxColorAttachments;++zA)Ve.framebufferTexture2D(WE,R0+zA,ym,null,0);Ve.framebufferTexture2D(WE,L0,ym,null,0),Ve.framebufferTexture2D(WE,T0,ym,null,0),Ve.framebufferTexture2D(WE,N0,ym,null,0),NA(T0,FA.depthAttachment),NA(N0,FA.stencilAttachment),NA(L0,FA.depthStencilAttachment);var UI=Ve.checkFramebufferStatus(WE);!Ve.isContextLost()&&UI!==F0&&Nt.raise("framebuffer configuration not supported, status = "+Km[UI]),Ve.bindFramebuffer(WE,nA.next?nA.next.framebuffer:null),nA.cur=nA.next,Ve.getError()}function CA(FA,zA){var eI=new oI;fa.framebufferCount++;function UI(iI,sI){var LI;Nt(nA.next!==eI,"can not update framebuffer which is currently in use");var $I=0,iC=0,DC=!0,TC=!0,oC=null,qC=!0,wC="rgba",OC="uint8",YC=1,VC=null,ZC=null,nE=null,LC=!1;if(typeof iI=="number")$I=iI|0,iC=sI|0||$I;else if(!iI)$I=iC=1;else{Nt.type(iI,"object","invalid arguments for framebuffer");var zI=iI;if("shape"in zI){var oE=zI.shape;Nt(Array.isArray(oE)&&oE.length>=2,"invalid shape for framebuffer"),$I=oE[0],iC=oE[1]}else"radius"in zI&&($I=iC=zI.radius),"width"in zI&&($I=zI.width),"height"in zI&&(iC=zI.height);("color"in zI||"colors"in zI)&&(oC=zI.color||zI.colors,Array.isArray(oC)&&Nt(oC.length===1||Pt.webgl_draw_buffers,"multiple render targets not supported")),oC||("colorCount"in zI&&(YC=zI.colorCount|0,Nt(YC>0,"invalid color buffer count")),"colorTexture"in zI&&(qC=!!zI.colorTexture,wC="rgba4"),"colorType"in zI&&(OC=zI.colorType,qC?(Nt(Pt.oes_texture_float||!(OC==="float"||OC==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Nt(Pt.oes_texture_half_float||!(OC==="half float"||OC==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):OC==="half float"||OC==="float16"?(Nt(Pt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),wC="rgba16f"):(OC==="float"||OC==="float32")&&(Nt(Pt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),wC="rgba32f"),Nt.oneOf(OC,$A,"invalid color type")),"colorFormat"in zI&&(wC=zI.colorFormat,TA.indexOf(wC)>=0?qC=!0:RA.indexOf(wC)>=0?qC=!1:Nt.optional(function(){qC?Nt.oneOf(zI.colorFormat,TA,"invalid color format for texture"):Nt.oneOf(zI.colorFormat,RA,"invalid color format for renderbuffer")}))),("depthTexture"in zI||"depthStencilTexture"in zI)&&(LC=!!(zI.depthTexture||zI.depthStencilTexture),Nt(!LC||Pt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in zI&&(typeof zI.depth=="boolean"?DC=zI.depth:(VC=zI.depth,TC=!1)),"stencil"in zI&&(typeof zI.stencil=="boolean"?TC=zI.stencil:(ZC=zI.stencil,DC=!1)),"depthStencil"in zI&&(typeof zI.depthStencil=="boolean"?DC=TC=zI.depthStencil:(nE=zI.depthStencil,DC=!1,TC=!1))}var CC=null,TI=null,nC=null,uC=null;if(Array.isArray(oC))CC=oC.map(OA);else if(oC)CC=[OA(oC)];else for(CC=new Array(YC),LI=0;LI<YC;++LI)CC[LI]=ia($I,iC,qC,wC,OC);Nt(Pt.webgl_draw_buffers||CC.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Nt(CC.length<=qr.maxColorAttachments,"too many color attachments, not supported"),$I=$I||CC[0].width,iC=iC||CC[0].height,VC?TI=OA(VC):DC&&!TC&&(TI=ia($I,iC,LC,"depth","uint32")),ZC?nC=OA(ZC):TC&&!DC&&(nC=ia($I,iC,!1,"stencil","uint8")),nE?uC=OA(nE):!VC&&!ZC&&TC&&DC&&(uC=ia($I,iC,LC,"depth stencil","depth stencil")),Nt(!!VC+!!ZC+!!nE<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var FC=null;for(LI=0;LI<CC.length;++LI)if(KA(CC[LI],$I,iC),Nt(!CC[LI]||CC[LI].texture&&jQ.indexOf(CC[LI].texture._texture.format)>=0||CC[LI].renderbuffer&&o_.indexOf(CC[LI].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+LI+" is invalid"),CC[LI]&&CC[LI].texture){var YE=Ny[CC[LI].texture._texture.format]*PB[CC[LI].texture._texture.type];FC===null?FC=YE:Nt(FC===YE,"all color attachments much have the same number of bits per pixel.")}return KA(TI,$I,iC),Nt(!TI||TI.texture&&TI.texture._texture.format===KQ||TI.renderbuffer&&TI.renderbuffer._renderbuffer.format===ZQ,"invalid depth attachment for framebuffer object"),KA(nC,$I,iC),Nt(!nC||nC.renderbuffer&&nC.renderbuffer._renderbuffer.format===e_,"invalid stencil attachment for framebuffer object"),KA(uC,$I,iC),Nt(!uC||uC.texture&&uC.texture._texture.format===P0||uC.renderbuffer&&uC.renderbuffer._renderbuffer.format===P0,"invalid depth-stencil attachment for framebuffer object"),rI(eI),eI.width=$I,eI.height=iC,eI.colorAttachments=CC,eI.depthAttachment=TI,eI.stencilAttachment=nC,eI.depthStencilAttachment=uC,UI.color=CC.map(rA),UI.depth=rA(TI),UI.stencil=rA(nC),UI.depthStencil=rA(uC),UI.width=eI.width,UI.height=eI.height,mA(eI),UI}function kI(iI,sI){Nt(nA.next!==eI,"can not resize a framebuffer which is currently in use");var LI=Math.max(iI|0,1),$I=Math.max(sI|0||LI,1);if(LI===eI.width&&$I===eI.height)return UI;for(var iC=eI.colorAttachments,DC=0;DC<iC.length;++DC)kA(iC[DC],LI,$I);return kA(eI.depthAttachment,LI,$I),kA(eI.stencilAttachment,LI,$I),kA(eI.depthStencilAttachment,LI,$I),eI.width=UI.width=LI,eI.height=UI.height=$I,mA(eI),UI}return UI(FA,zA),_(UI,{resize:kI,_reglType:"framebuffer",_framebuffer:eI,destroy:function(){DI(eI),rI(eI)},use:function(iI){nA.setFBO({framebuffer:UI},iI)}})}function fI(FA){var zA=Array(6);function eI(kI){var iI;Nt(zA.indexOf(nA.next)<0,"can not update framebuffer which is currently in use");var sI={color:null},LI=0,$I=null,iC="rgba",DC="uint8",TC=1;if(typeof kI=="number")LI=kI|0;else if(!kI)LI=1;else{Nt.type(kI,"object","invalid arguments for framebuffer");var oC=kI;if("shape"in oC){var qC=oC.shape;Nt(Array.isArray(qC)&&qC.length>=2,"invalid shape for framebuffer"),Nt(qC[0]===qC[1],"cube framebuffer must be square"),LI=qC[0]}else"radius"in oC&&(LI=oC.radius|0),"width"in oC?(LI=oC.width|0,"height"in oC&&Nt(oC.height===LI,"must be square")):"height"in oC&&(LI=oC.height|0);("color"in oC||"colors"in oC)&&($I=oC.color||oC.colors,Array.isArray($I)&&Nt($I.length===1||Pt.webgl_draw_buffers,"multiple render targets not supported")),$I||("colorCount"in oC&&(TC=oC.colorCount|0,Nt(TC>0,"invalid color buffer count")),"colorType"in oC&&(Nt.oneOf(oC.colorType,$A,"invalid color type"),DC=oC.colorType),"colorFormat"in oC&&(iC=oC.colorFormat,Nt.oneOf(oC.colorFormat,TA,"invalid color format for texture"))),"depth"in oC&&(sI.depth=oC.depth),"stencil"in oC&&(sI.stencil=oC.stencil),"depthStencil"in oC&&(sI.depthStencil=oC.depthStencil)}var wC;if($I)if(Array.isArray($I))for(wC=[],iI=0;iI<$I.length;++iI)wC[iI]=$I[iI];else wC=[$I];else{wC=Array(TC);var OC={radius:LI,format:iC,type:DC};for(iI=0;iI<TC;++iI)wC[iI]=pa.createCube(OC)}for(sI.color=Array(wC.length),iI=0;iI<wC.length;++iI){var YC=wC[iI];Nt(typeof YC=="function"&&YC._reglType==="textureCube","invalid cube map"),LI=LI||YC.width,Nt(YC.width===LI&&YC.height===LI,"invalid cube map shape"),sI.color[iI]={target:kB,data:wC[iI]}}for(iI=0;iI<6;++iI){for(var VC=0;VC<wC.length;++VC)sI.color[VC].target=kB+iI;iI>0&&(sI.depth=zA[0].depth,sI.stencil=zA[0].stencil,sI.depthStencil=zA[0].depthStencil),zA[iI]?zA[iI](sI):zA[iI]=CA(sI)}return _(eI,{width:LI,height:LI,color:wC})}function UI(kI){var iI,sI=kI|0;if(Nt(sI>0&&sI<=qr.maxCubeMapSize,"invalid radius for cube fbo"),sI===eI.width)return eI;var LI=eI.color;for(iI=0;iI<LI.length;++iI)LI[iI].resize(sI);for(iI=0;iI<6;++iI)zA[iI].resize(sI);return eI.width=eI.height=sI,eI}return eI(FA),_(eI,{faces:zA,resize:UI,_reglType:"framebufferCube",destroy:function(){zA.forEach(function(kI){kI.destroy()})}})}function jA(){nA.cur=null,nA.next=null,nA.dirty=!0,ya(vA).forEach(function(FA){FA.framebuffer=Ve.createFramebuffer(),mA(FA)})}return _(nA,{getFramebuffer:function(FA){if(typeof FA=="function"&&FA._reglType==="framebuffer"){var zA=FA._framebuffer;if(zA instanceof oI)return zA}return null},create:CA,createCube:fI,clear:function(){ya(vA).forEach(DI)},restore:jA})}var a_=5126,O0=34962,OB=34963,G0=["attributes","elements","offset","count","primitive","instances"];function Ly(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=a_,this.offset=0,this.stride=0,this.divisor=0}function A_(Ve,Pt,qr,pa,EA,fa,nA){for(var TA=qr.maxAttributes,RA=new Array(TA),$A=0;$A<TA;++$A)RA[$A]=new Ly;var qA=0,HA={},KA={Record:Ly,scope:{},state:RA,currentVAO:null,targetVAO:null,restore:OA()?rI:function(){},createVAO:DI,getVAO:rA,destroyBuffer:NA,setVAO:OA()?kA:lI,clear:OA()?vA:function(){}};function NA(mA){for(var CA=0;CA<RA.length;++CA){var fI=RA[CA];fI.buffer===mA&&(Ve.disableVertexAttribArray(CA),fI.buffer=null)}}function OA(){return Pt.oes_vertex_array_object}function ia(){return Pt.angle_instanced_arrays}function rA(mA){return typeof mA=="function"&&mA._vao?mA._vao:null}function kA(mA){if(mA!==KA.currentVAO){var CA=OA();mA?CA.bindVertexArrayOES(mA.vao):CA.bindVertexArrayOES(null),KA.currentVAO=mA}}function lI(mA){if(mA!==KA.currentVAO){if(mA)mA.bindAttrs();else{for(var CA=ia(),fI=0;fI<RA.length;++fI){var jA=RA[fI];jA.buffer?(Ve.enableVertexAttribArray(fI),jA.buffer.bind(),Ve.vertexAttribPointer(fI,jA.size,jA.type,jA.normalized,jA.stride,jA.offfset),CA&&jA.divisor&&CA.vertexAttribDivisorANGLE(fI,jA.divisor)):(Ve.disableVertexAttribArray(fI),Ve.vertexAttrib4f(fI,jA.x,jA.y,jA.z,jA.w))}nA.elements?Ve.bindBuffer(OB,nA.elements.buffer.buffer):Ve.bindBuffer(OB,null)}KA.currentVAO=mA}}function vA(){ya(HA).forEach(function(mA){mA.destroy()})}function oI(){this.id=++qA,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var mA=OA();mA?this.vao=mA.createVertexArrayOES():this.vao=null,HA[this.id]=this,this.buffers=[]}oI.prototype.bindAttrs=function(){for(var mA=ia(),CA=this.attributes,fI=0;fI<CA.length;++fI){var jA=CA[fI];jA.buffer?(Ve.enableVertexAttribArray(fI),Ve.bindBuffer(O0,jA.buffer.buffer),Ve.vertexAttribPointer(fI,jA.size,jA.type,jA.normalized,jA.stride,jA.offset),mA&&jA.divisor&&mA.vertexAttribDivisorANGLE(fI,jA.divisor)):(Ve.disableVertexAttribArray(fI),Ve.vertexAttrib4f(fI,jA.x,jA.y,jA.z,jA.w))}for(var FA=CA.length;FA<TA;++FA)Ve.disableVertexAttribArray(FA);var zA=fa.getElements(this.elements);zA?Ve.bindBuffer(OB,zA.buffer.buffer):Ve.bindBuffer(OB,null)},oI.prototype.refresh=function(){var mA=OA();mA&&(mA.bindVertexArrayOES(this.vao),this.bindAttrs(),KA.currentVAO=null,mA.bindVertexArrayOES(null))},oI.prototype.destroy=function(){if(this.vao){var mA=OA();this===KA.currentVAO&&(KA.currentVAO=null,mA.bindVertexArrayOES(null)),mA.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),HA[this.id]&&(delete HA[this.id],pa.vaoCount-=1)};function rI(){var mA=OA();mA&&ya(HA).forEach(function(CA){CA.refresh()})}function DI(mA){var CA=new oI;pa.vaoCount+=1;function fI(jA){var FA;if(Array.isArray(jA))FA=jA,CA.elements&&CA.ownsElements&&CA.elements.destroy(),CA.elements=null,CA.ownsElements=!1,CA.offset=0,CA.count=0,CA.instances=-1,CA.primitive=4;else{if(Nt(typeof jA=="object","invalid arguments for create vao"),Nt("attributes"in jA,"must specify attributes for vao"),jA.elements){var zA=jA.elements;CA.ownsElements?typeof zA=="function"&&zA._reglType==="elements"?(CA.elements.destroy(),CA.ownsElements=!1):(CA.elements(zA),CA.ownsElements=!1):fa.getElements(jA.elements)?(CA.elements=jA.elements,CA.ownsElements=!1):(CA.elements=fa.create(jA.elements),CA.ownsElements=!0)}else CA.elements=null,CA.ownsElements=!1;FA=jA.attributes,CA.offset=0,CA.count=-1,CA.instances=-1,CA.primitive=4,CA.elements&&(CA.count=CA.elements._elements.vertCount,CA.primitive=CA.elements._elements.primType),"offset"in jA&&(CA.offset=jA.offset|0),"count"in jA&&(CA.count=jA.count|0),"instances"in jA&&(CA.instances=jA.instances|0),"primitive"in jA&&(Nt(jA.primitive in Le,"bad primitive type: "+jA.primitive),CA.primitive=Le[jA.primitive]),Nt.optional(()=>{for(var DC=Object.keys(jA),TC=0;TC<DC.length;++TC)Nt(G0.indexOf(DC[TC])>=0,'invalid option for vao: "'+DC[TC]+'" valid options are '+G0)}),Nt(Array.isArray(FA),"attributes must be an array")}Nt(FA.length<TA,"too many attributes"),Nt(FA.length>0,"must specify at least one attribute");var eI={},UI=CA.attributes;UI.length=FA.length;for(var kI=0;kI<FA.length;++kI){var iI=FA[kI],sI=UI[kI]=new Ly,LI=iI.data||iI;if(Array.isArray(LI)||f(LI)||Dn(LI)){var $I;CA.buffers[kI]&&($I=CA.buffers[kI],f(LI)&&$I._buffer.byteLength>=LI.byteLength?$I.subdata(LI):($I.destroy(),CA.buffers[kI]=null)),CA.buffers[kI]||($I=CA.buffers[kI]=EA.create(iI,O0,!1,!0)),sI.buffer=EA.getBuffer($I),sI.size=sI.buffer.dimension|0,sI.normalized=!1,sI.type=sI.buffer.dtype,sI.offset=0,sI.stride=0,sI.divisor=0,sI.state=1,eI[kI]=1}else EA.getBuffer(iI)?(sI.buffer=EA.getBuffer(iI),sI.size=sI.buffer.dimension|0,sI.normalized=!1,sI.type=sI.buffer.dtype,sI.offset=0,sI.stride=0,sI.divisor=0,sI.state=1):EA.getBuffer(iI.buffer)?(sI.buffer=EA.getBuffer(iI.buffer),sI.size=(+iI.size||sI.buffer.dimension)|0,sI.normalized=!!iI.normalized||!1,"type"in iI?(Nt.parameter(iI.type,KE,"invalid buffer type"),sI.type=KE[iI.type]):sI.type=sI.buffer.dtype,sI.offset=(iI.offset||0)|0,sI.stride=(iI.stride||0)|0,sI.divisor=(iI.divisor||0)|0,sI.state=1,Nt(sI.size>=1&&sI.size<=4,"size must be between 1 and 4"),Nt(sI.offset>=0,"invalid offset"),Nt(sI.stride>=0&&sI.stride<=255,"stride must be between 0 and 255"),Nt(sI.divisor>=0,"divisor must be positive"),Nt(!sI.divisor||!!Pt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in iI?(Nt(kI>0,"first attribute must not be a constant"),sI.x=+iI.x||0,sI.y=+iI.y||0,sI.z=+iI.z||0,sI.w=+iI.w||0,sI.state=2):Nt(!1,"invalid attribute spec for location "+kI)}for(var iC=0;iC<CA.buffers.length;++iC)!eI[iC]&&CA.buffers[iC]&&(CA.buffers[iC].destroy(),CA.buffers[iC]=null);return CA.refresh(),fI}return fI.destroy=function(){for(var jA=0;jA<CA.buffers.length;++jA)CA.buffers[jA]&&CA.buffers[jA].destroy();CA.buffers.length=0,CA.ownsElements&&(CA.elements.destroy(),CA.elements=null,CA.ownsElements=!1),CA.destroy()},fI._vao=CA,fI._reglType="vao",fI(mA)}return KA}var U0=35632,l_=35633,c_=35718,u_=35721;function g_(Ve,Pt,qr,pa){var EA={},fa={};function nA(ia,rA,kA,lI){this.name=ia,this.id=rA,this.location=kA,this.info=lI}function TA(ia,rA){for(var kA=0;kA<ia.length;++kA)if(ia[kA].id===rA.id){ia[kA].location=rA.location;return}ia.push(rA)}function RA(ia,rA,kA){var lI=ia===U0?EA:fa,vA=lI[rA];if(!vA){var oI=Pt.str(rA);vA=Ve.createShader(ia),Ve.shaderSource(vA,oI),Ve.compileShader(vA),Nt.shaderError(Ve,vA,oI,ia,kA),lI[rA]=vA}return vA}var $A={},qA=[],HA=0;function KA(ia,rA){this.id=HA++,this.fragId=ia,this.vertId=rA,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,pa.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function NA(ia,rA,kA){var lI,vA,oI=RA(U0,ia.fragId),rI=RA(l_,ia.vertId),DI=ia.program=Ve.createProgram();if(Ve.attachShader(DI,oI),Ve.attachShader(DI,rI),kA)for(lI=0;lI<kA.length;++lI){var mA=kA[lI];Ve.bindAttribLocation(DI,mA[0],mA[1])}Ve.linkProgram(DI),Nt.linkError(Ve,DI,Pt.str(ia.fragId),Pt.str(ia.vertId),rA);var CA=Ve.getProgramParameter(DI,c_);pa.profile&&(ia.stats.uniformsCount=CA);var fI=ia.uniforms;for(lI=0;lI<CA;++lI)if(vA=Ve.getActiveUniform(DI,lI),vA){if(vA.size>1)for(var jA=0;jA<vA.size;++jA){var FA=vA.name.replace("[0]","["+jA+"]");TA(fI,new nA(FA,Pt.id(FA),Ve.getUniformLocation(DI,FA),vA))}var zA=vA.name;vA.size>1&&(zA=zA.replace("[0]","")),TA(fI,new nA(zA,Pt.id(zA),Ve.getUniformLocation(DI,zA),vA))}var eI=Ve.getProgramParameter(DI,u_);pa.profile&&(ia.stats.attributesCount=eI);var UI=ia.attributes;for(lI=0;lI<eI;++lI)vA=Ve.getActiveAttrib(DI,lI),vA&&TA(UI,new nA(vA.name,Pt.id(vA.name),Ve.getAttribLocation(DI,vA.name),vA))}pa.profile&&(qr.getMaxUniformsCount=function(){var ia=0;return qA.forEach(function(rA){rA.stats.uniformsCount>ia&&(ia=rA.stats.uniformsCount)}),ia},qr.getMaxAttributesCount=function(){var ia=0;return qA.forEach(function(rA){rA.stats.attributesCount>ia&&(ia=rA.stats.attributesCount)}),ia});function OA(){EA={},fa={};for(var ia=0;ia<qA.length;++ia)NA(qA[ia],null,qA[ia].attributes.map(function(rA){return[rA.location,rA.name]}))}return{clear:function(){var ia=Ve.deleteShader.bind(Ve);ya(EA).forEach(ia),EA={},ya(fa).forEach(ia),fa={},qA.forEach(function(rA){Ve.deleteProgram(rA.program)}),qA.length=0,$A={},qr.shaderCount=0},program:function(ia,rA,kA,lI){Nt.command(ia>=0,"missing vertex shader",kA),Nt.command(rA>=0,"missing fragment shader",kA);var vA=$A[rA];vA||(vA=$A[rA]={});var oI=vA[ia];if(oI&&(oI.refCount++,!lI))return oI;var rI=new KA(rA,ia);return qr.shaderCount++,NA(rI,kA,lI),oI||(vA[ia]=rI),qA.push(rI),_(rI,{destroy:function(){if(rI.refCount--,rI.refCount<=0){Ve.deleteProgram(rI.program);var DI=qA.indexOf(rI);qA.splice(DI,1),qr.shaderCount--}vA[rI.vertId].refCount<=0&&(Ve.deleteShader(fa[rI.vertId]),delete fa[rI.vertId],delete $A[rI.fragId][rI.vertId]),Object.keys($A[rI.fragId]).length||(Ve.deleteShader(EA[rI.fragId]),delete EA[rI.fragId],delete $A[rI.fragId])}})},restore:OA,shader:RA,frag:-1,vert:-1}}var h_=6408,dB=5121,d_=3333,GB=5126;function f_(Ve,Pt,qr,pa,EA,fa,nA){function TA(qA){var HA;Pt.next===null?(Nt(EA.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),HA=dB):(Nt(Pt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),HA=Pt.next.colorAttachments[0].texture._texture.type,Nt.optional(function(){fa.oes_texture_float?(Nt(HA===dB||HA===GB,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),HA===GB&&Nt(nA.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Nt(HA===dB,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var KA=0,NA=0,OA=pa.framebufferWidth,ia=pa.framebufferHeight,rA=null;f(qA)?rA=qA:qA&&(Nt.type(qA,"object","invalid arguments to regl.read()"),KA=qA.x|0,NA=qA.y|0,Nt(KA>=0&&KA<pa.framebufferWidth,"invalid x offset for regl.read"),Nt(NA>=0&&NA<pa.framebufferHeight,"invalid y offset for regl.read"),OA=(qA.width||pa.framebufferWidth-KA)|0,ia=(qA.height||pa.framebufferHeight-NA)|0,rA=qA.data||null),rA&&(HA===dB?Nt(rA instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):HA===GB&&Nt(rA instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Nt(OA>0&&OA+KA<=pa.framebufferWidth,"invalid width for read pixels"),Nt(ia>0&&ia+NA<=pa.framebufferHeight,"invalid height for read pixels"),qr();var kA=OA*ia*4;return rA||(HA===dB?rA=new Uint8Array(kA):HA===GB&&(rA=rA||new Float32Array(kA))),Nt.isTypedArray(rA,"data buffer for regl.read() must be a typedarray"),Nt(rA.byteLength>=kA,"data buffer for regl.read() too small"),Ve.pixelStorei(d_,4),Ve.readPixels(KA,NA,OA,ia,h_,HA,rA),rA}function RA(qA){var HA;return Pt.setFBO({framebuffer:qA.framebuffer},function(){HA=TA(qA)}),HA}function $A(qA){return!qA||!("framebuffer"in qA)?TA(qA):RA(qA)}return $A}function jm(Ve){return Array.prototype.slice.call(Ve)}function zm(Ve){return jm(Ve).join("")}function p_(){var Ve=0,Pt=[],qr=[];function pa(HA){for(var KA=0;KA<qr.length;++KA)if(qr[KA]===HA)return Pt[KA];var NA="g"+Ve++;return Pt.push(NA),qr.push(HA),NA}function EA(){var HA=[];function KA(){HA.push.apply(HA,jm(arguments))}var NA=[];function OA(){var ia="v"+Ve++;return NA.push(ia),arguments.length>0&&(HA.push(ia,"="),HA.push.apply(HA,jm(arguments)),HA.push(";")),ia}return _(KA,{def:OA,toString:function(){return zm([NA.length>0?"var "+NA.join(",")+";":"",zm(HA)])}})}function fa(){var HA=EA(),KA=EA(),NA=HA.toString,OA=KA.toString;function ia(rA,kA){KA(rA,kA,"=",HA.def(rA,kA),";")}return _(function(){HA.apply(HA,jm(arguments))},{def:HA.def,entry:HA,exit:KA,save:ia,set:function(rA,kA,lI){ia(rA,kA),HA(rA,kA,"=",lI,";")},toString:function(){return NA()+OA()}})}function nA(){var HA=zm(arguments),KA=fa(),NA=fa(),OA=KA.toString,ia=NA.toString;return _(KA,{then:function(){return KA.apply(KA,jm(arguments)),this},else:function(){return NA.apply(NA,jm(arguments)),this},toString:function(){var rA=ia();return rA&&(rA="else{"+rA+"}"),zm(["if(",HA,"){",OA(),"}",rA])}})}var TA=EA(),RA={};function $A(HA,KA){var NA=[];function OA(){var vA="a"+NA.length;return NA.push(vA),vA}KA=KA||0;for(var ia=0;ia<KA;++ia)OA();var rA=fa(),kA=rA.toString,lI=RA[HA]=_(rA,{arg:OA,toString:function(){return zm(["function(",NA.join(),"){",kA(),"}"])}});return lI}function qA(){var HA=['"use strict";',TA,"return {"];Object.keys(RA).forEach(function(OA){HA.push('"',OA,'":',RA[OA].toString(),",")}),HA.push("}");var KA=zm(HA).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),NA=Function.apply(null,Pt.concat(KA));return NA.apply(null,qr)}return{global:TA,link:pa,block:EA,proc:$A,scope:fa,cond:nA,compile:qA}}var Wm="xyzw".split(""),$0=5121,Xm=1,Fy=2,My=0,ky=1,Py=2,Oy=3,UB=4,H0=5,q0=6,V0="dither",J0="blend.enable",K0="blend.color",Gy="blend.equation",Uy="blend.func",j0="depth.enable",z0="depth.func",W0="depth.range",eQ="depth.mask",$y="colorMask",tQ="cull.enable",rQ="cull.face",Hy="frontFace",qy="lineWidth",iQ="polygonOffset.enable",Yy="polygonOffset.offset",nQ="sample.alpha",oQ="sample.enable",Vy="sample.coverage",sQ="stencil.enable",aQ="stencil.mask",Jy="stencil.func",Ky="stencil.opFront",fB="stencil.opBack",AQ="scissor.enable",$B="scissor.box",XE="viewport",pB="profile",Qm="framebuffer",IB="vert",CB="frag",_m="elements",vm="primitive",Sm="count",HB="offset",qB="instances",EB="vao",jy="Width",zy="Height",Zm=Qm+jy,eB=Qm+zy,I_=XE+jy,C_=XE+zy,lQ="drawingBuffer",cQ=lQ+jy,uQ=lQ+zy,E_=[Uy,Gy,Jy,Ky,fB,Vy,XE,$B,Yy],tB=34962,Wy=34963,m_=35632,B_=35633,gQ=3553,y_=34067,Q_=2884,__=3042,v_=3024,S_=2960,w_=2929,x_=3089,b_=32823,D_=32926,R_=32928,Xy=5126,YB=35664,VB=35665,JB=35666,Zy=5124,KB=35667,jB=35668,zB=35669,e0=35670,WB=35671,XB=35672,ZB=35673,mB=35674,BB=35675,yB=35676,QB=35678,_B=35680,t0=4,vB=1028,wm=1029,hQ=2304,r0=2305,T_=32775,N_=32776,L_=519,lm=7680,dQ=0,fQ=1,pQ=32774,F_=513,IQ=36160,M_=36064,qE={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},CQ=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],rB={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},cm={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},EQ={frag:m_,vert:B_},i0={cw:hQ,ccw:r0};function ey(Ve){return Array.isArray(Ve)||f(Ve)||Dn(Ve)}function mQ(Ve){return Ve.sort(function(Pt,qr){return Pt===XE?-1:qr===XE?1:Pt<qr?-1:1})}function jC(Ve,Pt,qr,pa){this.thisDep=Ve,this.contextDep=Pt,this.propDep=qr,this.append=pa}function um(Ve){return Ve&&!(Ve.thisDep||Ve.contextDep||Ve.propDep)}function PC(Ve){return new jC(!1,!1,!1,Ve)}function CE(Ve,Pt){var qr=Ve.type;if(qr===My){var pa=Ve.data.length;return new jC(!0,pa>=1,pa>=2,Pt)}else if(qr===UB){var EA=Ve.data;return new jC(EA.thisDep,EA.contextDep,EA.propDep,Pt)}else{if(qr===H0)return new jC(!1,!1,!1,Pt);if(qr===q0){for(var fa=!1,nA=!1,TA=!1,RA=0;RA<Ve.data.length;++RA){var $A=Ve.data[RA];if($A.type===ky)TA=!0;else if($A.type===Py)nA=!0;else if($A.type===Oy)fa=!0;else if($A.type===My){fa=!0;var qA=$A.data;qA>=1&&(nA=!0),qA>=2&&(TA=!0)}else $A.type===UB&&(fa=fa||$A.data.thisDep,nA=nA||$A.data.contextDep,TA=TA||$A.data.propDep)}return new jC(fa,nA,TA,Pt)}else return new jC(qr===Oy,qr===Py,qr===ky,Pt)}}var BQ=new jC(!1,!1,!1,function(){});function k_(Ve,Pt,qr,pa,EA,fa,nA,TA,RA,$A,qA,HA,KA,NA,OA){var ia=$A.Record,rA={add:32774,subtract:32778,"reverse subtract":32779};qr.ext_blend_minmax&&(rA.min=T_,rA.max=N_);var kA=qr.angle_instanced_arrays,lI=qr.webgl_draw_buffers,vA=qr.oes_vertex_array_object,oI={dirty:!0,profile:OA.profile},rI={},DI=[],mA={},CA={};function fI(Ot){return Ot.replace(".","_")}function jA(Ot,Mt,zr){var ra=fI(Ot);DI.push(Ot),rI[ra]=oI[ra]=!!zr,mA[ra]=Mt}function FA(Ot,Mt,zr){var ra=fI(Ot);DI.push(Ot),Array.isArray(zr)?(oI[ra]=zr.slice(),rI[ra]=zr.slice()):oI[ra]=rI[ra]=zr,CA[ra]=Mt}jA(V0,v_),jA(J0,__),FA(K0,"blendColor",[0,0,0,0]),FA(Gy,"blendEquationSeparate",[pQ,pQ]),FA(Uy,"blendFuncSeparate",[fQ,dQ,fQ,dQ]),jA(j0,w_,!0),FA(z0,"depthFunc",F_),FA(W0,"depthRange",[0,1]),FA(eQ,"depthMask",!0),FA($y,$y,[!0,!0,!0,!0]),jA(tQ,Q_),FA(rQ,"cullFace",wm),FA(Hy,Hy,r0),FA(qy,qy,1),jA(iQ,b_),FA(Yy,"polygonOffset",[0,0]),jA(nQ,D_),jA(oQ,R_),FA(Vy,"sampleCoverage",[1,!1]),jA(sQ,S_),FA(aQ,"stencilMask",-1),FA(Jy,"stencilFunc",[L_,0,-1]),FA(Ky,"stencilOpSeparate",[vB,lm,lm,lm]),FA(fB,"stencilOpSeparate",[wm,lm,lm,lm]),jA(AQ,x_),FA($B,"scissor",[0,0,Ve.drawingBufferWidth,Ve.drawingBufferHeight]),FA(XE,XE,[0,0,Ve.drawingBufferWidth,Ve.drawingBufferHeight]);var zA={gl:Ve,context:KA,strings:Pt,next:rI,current:oI,draw:HA,elements:fa,buffer:EA,shader:qA,attributes:$A.state,vao:$A,uniforms:RA,framebuffer:TA,extensions:qr,timer:NA,isBufferArgs:ey},eI={primTypes:Le,compareFuncs:rB,blendFuncs:qE,blendEquations:rA,stencilOps:cm,glTypes:KE,orientationType:i0};Nt.optional(function(){zA.isArrayLike=pC}),lI&&(eI.backBuffer=[wm],eI.drawBuffer=na(pa.maxDrawbuffers,function(Ot){return Ot===0?[0]:na(Ot,function(Mt){return M_+Mt})}));var UI=0;function kI(){var Ot=p_(),Mt=Ot.link,zr=Ot.global;Ot.id=UI++,Ot.batchId="0";var ra=Mt(zA),oa=Ot.shared={props:"a0"};Object.keys(zA).forEach(function(Wt){oa[Wt]=zr.def(ra,".",Wt)}),Nt.optional(function(){Ot.CHECK=Mt(Nt),Ot.commandStr=Nt.guessCommand(),Ot.command=Mt(Ot.commandStr),Ot.assert=function(Wt,Yt,ha){Wt("if(!(",Yt,"))",this.CHECK,".commandRaise(",Mt(ha),",",this.command,");")},eI.invalidBlendCombinations=CQ});var qn=Ot.next={},kn=Ot.current={};Object.keys(CA).forEach(function(Wt){Array.isArray(oI[Wt])&&(qn[Wt]=zr.def(oa.next,".",Wt),kn[Wt]=zr.def(oa.current,".",Wt))});var Wn=Ot.constants={};Object.keys(eI).forEach(function(Wt){Wn[Wt]=zr.def(JSON.stringify(eI[Wt]))}),Ot.invoke=function(Wt,Yt){switch(Yt.type){case My:var ha=["this",oa.context,oa.props,Ot.batchId];return Wt.def(Mt(Yt.data),".call(",ha.slice(0,Math.max(Yt.data.length+1,4)),")");case ky:return Wt.def(oa.props,Yt.data);case Py:return Wt.def(oa.context,Yt.data);case Oy:return Wt.def("this",Yt.data);case UB:return Yt.data.append(Ot,Wt),Yt.data.ref;case H0:return Yt.data.toString();case q0:return Yt.data.map(function(la){return Ot.invoke(Wt,la)})}},Ot.attribCache={};var Ut={};return Ot.scopeAttrib=function(Wt){var Yt=Pt.id(Wt);if(Yt in Ut)return Ut[Yt];var ha=$A.scope[Yt];ha||(ha=$A.scope[Yt]=new ia);var la=Ut[Yt]=Mt(ha);return la},Ot}function iI(Ot){var Mt=Ot.static,zr=Ot.dynamic,ra;if(pB in Mt){var oa=!!Mt[pB];ra=PC(function(kn,Wn){return oa}),ra.enable=oa}else if(pB in zr){var qn=zr[pB];ra=CE(qn,function(kn,Wn){return kn.invoke(Wn,qn)})}return ra}function sI(Ot,Mt){var zr=Ot.static,ra=Ot.dynamic;if(Qm in zr){var oa=zr[Qm];return oa?(oa=TA.getFramebuffer(oa),Nt.command(oa,"invalid framebuffer object"),PC(function(kn,Wn){var Ut=kn.link(oa),Wt=kn.shared;Wn.set(Wt.framebuffer,".next",Ut);var Yt=Wt.context;return Wn.set(Yt,"."+Zm,Ut+".width"),Wn.set(Yt,"."+eB,Ut+".height"),Ut})):PC(function(kn,Wn){var Ut=kn.shared;Wn.set(Ut.framebuffer,".next","null");var Wt=Ut.context;return Wn.set(Wt,"."+Zm,Wt+"."+cQ),Wn.set(Wt,"."+eB,Wt+"."+uQ),"null"})}else if(Qm in ra){var qn=ra[Qm];return CE(qn,function(kn,Wn){var Ut=kn.invoke(Wn,qn),Wt=kn.shared,Yt=Wt.framebuffer,ha=Wn.def(Yt,".getFramebuffer(",Ut,")");Nt.optional(function(){kn.assert(Wn,"!"+Ut+"||"+ha,"invalid framebuffer object")}),Wn.set(Yt,".next",ha);var la=Wt.context;return Wn.set(la,"."+Zm,ha+"?"+ha+".width:"+la+"."+cQ),Wn.set(la,"."+eB,ha+"?"+ha+".height:"+la+"."+uQ),ha})}else return null}function LI(Ot,Mt,zr){var ra=Ot.static,oa=Ot.dynamic;function qn(Ut){if(Ut in ra){var Wt=ra[Ut];Nt.commandType(Wt,"object","invalid "+Ut,zr.commandStr);var Yt=!0,ha=Wt.x|0,la=Wt.y|0,pA,yA;return"width"in Wt?(pA=Wt.width|0,Nt.command(pA>=0,"invalid "+Ut,zr.commandStr)):Yt=!1,"height"in Wt?(yA=Wt.height|0,Nt.command(yA>=0,"invalid "+Ut,zr.commandStr)):Yt=!1,new jC(!Yt&&Mt&&Mt.thisDep,!Yt&&Mt&&Mt.contextDep,!Yt&&Mt&&Mt.propDep,function(bI,gI){var QA=bI.shared.context,AA=pA;"width"in Wt||(AA=gI.def(QA,".",Zm,"-",ha));var BI=yA;return"height"in Wt||(BI=gI.def(QA,".",eB,"-",la)),[ha,la,AA,BI]})}else if(Ut in oa){var VA=oa[Ut],MI=CE(VA,function(bI,gI){var QA=bI.invoke(gI,VA);Nt.optional(function(){bI.assert(gI,QA+"&&typeof "+QA+'==="object"',"invalid "+Ut)});var AA=bI.shared.context,BI=gI.def(QA,".x|0"),CI=gI.def(QA,".y|0"),FI=gI.def('"width" in ',QA,"?",QA,".width|0:","(",AA,".",Zm,"-",BI,")"),EC=gI.def('"height" in ',QA,"?",QA,".height|0:","(",AA,".",eB,"-",CI,")");return Nt.optional(function(){bI.assert(gI,FI+">=0&&"+EC+">=0","invalid "+Ut)}),[BI,CI,FI,EC]});return Mt&&(MI.thisDep=MI.thisDep||Mt.thisDep,MI.contextDep=MI.contextDep||Mt.contextDep,MI.propDep=MI.propDep||Mt.propDep),MI}else return Mt?new jC(Mt.thisDep,Mt.contextDep,Mt.propDep,function(bI,gI){var QA=bI.shared.context;return[0,0,gI.def(QA,".",Zm),gI.def(QA,".",eB)]}):null}var kn=qn(XE);if(kn){var Wn=kn;kn=new jC(kn.thisDep,kn.contextDep,kn.propDep,function(Ut,Wt){var Yt=Wn.append(Ut,Wt),ha=Ut.shared.context;return Wt.set(ha,"."+I_,Yt[2]),Wt.set(ha,"."+C_,Yt[3]),Yt})}return{viewport:kn,scissor_box:qn($B)}}function $I(Ot,Mt){var zr=Ot.static,ra=typeof zr[CB]=="string"&&typeof zr[IB]=="string";if(ra){if(Object.keys(Mt.dynamic).length>0)return null;var oa=Mt.static,qn=Object.keys(oa);if(qn.length>0&&typeof oa[qn[0]]=="number"){for(var kn=[],Wn=0;Wn<qn.length;++Wn)Nt(typeof oa[qn[Wn]]=="number","must specify all vertex attribute locations when using vaos"),kn.push([oa[qn[Wn]]|0,qn[Wn]]);return kn}}return null}function iC(Ot,Mt,zr){var ra=Ot.static,oa=Ot.dynamic;function qn(Yt){if(Yt in ra){var ha=Pt.id(ra[Yt]);Nt.optional(function(){qA.shader(EQ[Yt],ha,Nt.guessCommand())});var la=PC(function(){return ha});return la.id=ha,la}else if(Yt in oa){var pA=oa[Yt];return CE(pA,function(yA,VA){var MI=yA.invoke(VA,pA),bI=VA.def(yA.shared.strings,".id(",MI,")");return Nt.optional(function(){VA(yA.shared.shader,".shader(",EQ[Yt],",",bI,",",yA.command,");")}),bI})}return null}var kn=qn(CB),Wn=qn(IB),Ut=null,Wt;return um(kn)&&um(Wn)?(Ut=qA.program(Wn.id,kn.id,null,zr),Wt=PC(function(Yt,ha){return Yt.link(Ut)})):Wt=new jC(kn&&kn.thisDep||Wn&&Wn.thisDep,kn&&kn.contextDep||Wn&&Wn.contextDep,kn&&kn.propDep||Wn&&Wn.propDep,function(Yt,ha){var la=Yt.shared.shader,pA;kn?pA=kn.append(Yt,ha):pA=ha.def(la,".",CB);var yA;Wn?yA=Wn.append(Yt,ha):yA=ha.def(la,".",IB);var VA=la+".program("+yA+","+pA;return Nt.optional(function(){VA+=","+Yt.command}),ha.def(VA+")")}),{frag:kn,vert:Wn,progVar:Wt,program:Ut}}function DC(Ot,Mt){var zr=Ot.static,ra=Ot.dynamic,oa={},qn=!1;function kn(){if(EB in zr){var gI=zr[EB];return gI!==null&&$A.getVAO(gI)===null&&(gI=$A.createVAO(gI)),qn=!0,oa.vao=gI,PC(function(AA){var BI=$A.getVAO(gI);return BI?AA.link(BI):"null"})}else if(EB in ra){qn=!0;var QA=ra[EB];return CE(QA,function(AA,BI){var CI=AA.invoke(BI,QA);return BI.def(AA.shared.vao+".getVAO("+CI+")")})}return null}var Wn=kn(),Ut=!1;function Wt(){if(_m in zr){var gI=zr[_m];if(oa.elements=gI,ey(gI)){var QA=oa.elements=fa.create(gI,!0);gI=fa.getElements(QA),Ut=!0}else gI&&(gI=fa.getElements(gI),Ut=!0,Nt.command(gI,"invalid elements",Mt.commandStr));var AA=PC(function(CI,FI){if(gI){var EC=CI.link(gI);return CI.ELEMENTS=EC,EC}return CI.ELEMENTS=null,null});return AA.value=gI,AA}else if(_m in ra){Ut=!0;var BI=ra[_m];return CE(BI,function(CI,FI){var EC=CI.shared,sE=EC.isBufferArgs,bm=EC.elements,ZE=CI.invoke(FI,BI),VE=FI.def("null"),gm=FI.def(sE,"(",ZE,")"),Dm=CI.cond(gm).then(VE,"=",bm,".createStream(",ZE,");").else(VE,"=",bm,".getElements(",ZE,");");return Nt.optional(function(){CI.assert(Dm.else,"!"+ZE+"||"+VE,"invalid elements")}),FI.entry(Dm),FI.exit(CI.cond(gm).then(bm,".destroyStream(",VE,");")),CI.ELEMENTS=VE,VE})}else if(qn)return new jC(Wn.thisDep,Wn.contextDep,Wn.propDep,function(CI,FI){return FI.def(CI.shared.vao+".currentVAO?"+CI.shared.elements+".getElements("+CI.shared.vao+".currentVAO.elements):null")});return null}var Yt=Wt();function ha(){if(vm in zr){var gI=zr[vm];return oa.primitive=gI,Nt.commandParameter(gI,Le,"invalid primitve",Mt.commandStr),PC(function(AA,BI){return Le[gI]})}else if(vm in ra){var QA=ra[vm];return CE(QA,function(AA,BI){var CI=AA.constants.primTypes,FI=AA.invoke(BI,QA);return Nt.optional(function(){AA.assert(BI,FI+" in "+CI,"invalid primitive, must be one of "+Object.keys(Le))}),BI.def(CI,"[",FI,"]")})}else{if(Ut)return um(Yt)?Yt.value?PC(function(AA,BI){return BI.def(AA.ELEMENTS,".primType")}):PC(function(){return t0}):new jC(Yt.thisDep,Yt.contextDep,Yt.propDep,function(AA,BI){var CI=AA.ELEMENTS;return BI.def(CI,"?",CI,".primType:",t0)});if(qn)return new jC(Wn.thisDep,Wn.contextDep,Wn.propDep,function(AA,BI){return BI.def(AA.shared.vao+".currentVAO?"+AA.shared.vao+".currentVAO.primitive:"+t0)})}return null}function la(gI,QA){if(gI in zr){var AA=zr[gI]|0;return QA?oa.offset=AA:oa.instances=AA,Nt.command(!QA||AA>=0,"invalid "+gI,Mt.commandStr),PC(function(CI,FI){return QA&&(CI.OFFSET=AA),AA})}else if(gI in ra){var BI=ra[gI];return CE(BI,function(CI,FI){var EC=CI.invoke(FI,BI);return QA&&(CI.OFFSET=EC,Nt.optional(function(){CI.assert(FI,EC+">=0","invalid "+gI)})),EC})}else if(QA){if(Ut)return PC(function(CI,FI){return CI.OFFSET=0,0});if(qn)return new jC(Wn.thisDep,Wn.contextDep,Wn.propDep,function(CI,FI){return FI.def(CI.shared.vao+".currentVAO?"+CI.shared.vao+".currentVAO.offset:0")})}else if(qn)return new jC(Wn.thisDep,Wn.contextDep,Wn.propDep,function(CI,FI){return FI.def(CI.shared.vao+".currentVAO?"+CI.shared.vao+".currentVAO.instances:-1")});return null}var pA=la(HB,!0);function yA(){if(Sm in zr){var gI=zr[Sm]|0;return oa.count=gI,Nt.command(typeof gI=="number"&&gI>=0,"invalid vertex count",Mt.commandStr),PC(function(){return gI})}else if(Sm in ra){var QA=ra[Sm];return CE(QA,function(FI,EC){var sE=FI.invoke(EC,QA);return Nt.optional(function(){FI.assert(EC,"typeof "+sE+'==="number"&&'+sE+">=0&&"+sE+"===("+sE+"|0)","invalid vertex count")}),sE})}else if(Ut)if(um(Yt)){if(Yt)return pA?new jC(pA.thisDep,pA.contextDep,pA.propDep,function(FI,EC){var sE=EC.def(FI.ELEMENTS,".vertCount-",FI.OFFSET);return Nt.optional(function(){FI.assert(EC,sE+">=0","invalid vertex offset/element buffer too small")}),sE}):PC(function(FI,EC){return EC.def(FI.ELEMENTS,".vertCount")});var AA=PC(function(){return-1});return Nt.optional(function(){AA.MISSING=!0}),AA}else{var BI=new jC(Yt.thisDep||pA.thisDep,Yt.contextDep||pA.contextDep,Yt.propDep||pA.propDep,function(FI,EC){var sE=FI.ELEMENTS;return FI.OFFSET?EC.def(sE,"?",sE,".vertCount-",FI.OFFSET,":-1"):EC.def(sE,"?",sE,".vertCount:-1")});return Nt.optional(function(){BI.DYNAMIC=!0}),BI}else if(qn){var CI=new jC(Wn.thisDep,Wn.contextDep,Wn.propDep,function(FI,EC){return EC.def(FI.shared.vao,".currentVAO?",FI.shared.vao,".currentVAO.count:-1")});return CI}return null}var VA=ha(),MI=yA(),bI=la(qB,!1);return{elements:Yt,primitive:VA,count:MI,instances:bI,offset:pA,vao:Wn,vaoActive:qn,elementsActive:Ut,static:oa}}function TC(Ot,Mt){var zr=Ot.static,ra=Ot.dynamic,oa={};return DI.forEach(function(qn){var kn=fI(qn);function Wn(Ut,Wt){if(qn in zr){var Yt=Ut(zr[qn]);oa[kn]=PC(function(){return Yt})}else if(qn in ra){var ha=ra[qn];oa[kn]=CE(ha,function(la,pA){return Wt(la,pA,la.invoke(pA,ha))})}}switch(qn){case tQ:case J0:case V0:case sQ:case j0:case AQ:case iQ:case nQ:case oQ:case eQ:return Wn(function(Ut){return Nt.commandType(Ut,"boolean",qn,Mt.commandStr),Ut},function(Ut,Wt,Yt){return Nt.optional(function(){Ut.assert(Wt,"typeof "+Yt+'==="boolean"',"invalid flag "+qn,Ut.commandStr)}),Yt});case z0:return Wn(function(Ut){return Nt.commandParameter(Ut,rB,"invalid "+qn,Mt.commandStr),rB[Ut]},function(Ut,Wt,Yt){var ha=Ut.constants.compareFuncs;return Nt.optional(function(){Ut.assert(Wt,Yt+" in "+ha,"invalid "+qn+", must be one of "+Object.keys(rB))}),Wt.def(ha,"[",Yt,"]")});case W0:return Wn(function(Ut){return Nt.command(pC(Ut)&&Ut.length===2&&typeof Ut[0]=="number"&&typeof Ut[1]=="number"&&Ut[0]<=Ut[1],"depth range is 2d array",Mt.commandStr),Ut},function(Ut,Wt,Yt){Nt.optional(function(){Ut.assert(Wt,Ut.shared.isArrayLike+"("+Yt+")&&"+Yt+".length===2&&typeof "+Yt+'[0]==="number"&&typeof '+Yt+'[1]==="number"&&'+Yt+"[0]<="+Yt+"[1]","depth range must be a 2d array")});var ha=Wt.def("+",Yt,"[0]"),la=Wt.def("+",Yt,"[1]");return[ha,la]});case Uy:return Wn(function(Ut){Nt.commandType(Ut,"object","blend.func",Mt.commandStr);var Wt="srcRGB"in Ut?Ut.srcRGB:Ut.src,Yt="srcAlpha"in Ut?Ut.srcAlpha:Ut.src,ha="dstRGB"in Ut?Ut.dstRGB:Ut.dst,la="dstAlpha"in Ut?Ut.dstAlpha:Ut.dst;return Nt.commandParameter(Wt,qE,kn+".srcRGB",Mt.commandStr),Nt.commandParameter(Yt,qE,kn+".srcAlpha",Mt.commandStr),Nt.commandParameter(ha,qE,kn+".dstRGB",Mt.commandStr),Nt.commandParameter(la,qE,kn+".dstAlpha",Mt.commandStr),Nt.command(CQ.indexOf(Wt+", "+ha)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Wt+", "+ha+")",Mt.commandStr),[qE[Wt],qE[ha],qE[Yt],qE[la]]},function(Ut,Wt,Yt){var ha=Ut.constants.blendFuncs;Nt.optional(function(){Ut.assert(Wt,Yt+"&&typeof "+Yt+'==="object"',"invalid blend func, must be an object")});function la(QA,AA){var BI=Wt.def('"',QA,AA,'" in ',Yt,"?",Yt,".",QA,AA,":",Yt,".",QA);return Nt.optional(function(){Ut.assert(Wt,BI+" in "+ha,"invalid "+qn+"."+QA+AA+", must be one of "+Object.keys(qE))}),BI}var pA=la("src","RGB"),yA=la("dst","RGB");Nt.optional(function(){var QA=Ut.constants.invalidBlendCombinations;Ut.assert(Wt,QA+".indexOf("+pA+'+", "+'+yA+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var VA=Wt.def(ha,"[",pA,"]"),MI=Wt.def(ha,"[",la("src","Alpha"),"]"),bI=Wt.def(ha,"[",yA,"]"),gI=Wt.def(ha,"[",la("dst","Alpha"),"]");return[VA,bI,MI,gI]});case Gy:return Wn(function(Ut){if(typeof Ut=="string")return Nt.commandParameter(Ut,rA,"invalid "+qn,Mt.commandStr),[rA[Ut],rA[Ut]];if(typeof Ut=="object")return Nt.commandParameter(Ut.rgb,rA,qn+".rgb",Mt.commandStr),Nt.commandParameter(Ut.alpha,rA,qn+".alpha",Mt.commandStr),[rA[Ut.rgb],rA[Ut.alpha]];Nt.commandRaise("invalid blend.equation",Mt.commandStr)},function(Ut,Wt,Yt){var ha=Ut.constants.blendEquations,la=Wt.def(),pA=Wt.def(),yA=Ut.cond("typeof ",Yt,'==="string"');return Nt.optional(function(){function VA(MI,bI,gI){Ut.assert(MI,gI+" in "+ha,"invalid "+bI+", must be one of "+Object.keys(rA))}VA(yA.then,qn,Yt),Ut.assert(yA.else,Yt+"&&typeof "+Yt+'==="object"',"invalid "+qn),VA(yA.else,qn+".rgb",Yt+".rgb"),VA(yA.else,qn+".alpha",Yt+".alpha")}),yA.then(la,"=",pA,"=",ha,"[",Yt,"];"),yA.else(la,"=",ha,"[",Yt,".rgb];",pA,"=",ha,"[",Yt,".alpha];"),Wt(yA),[la,pA]});case K0:return Wn(function(Ut){return Nt.command(pC(Ut)&&Ut.length===4,"blend.color must be a 4d array",Mt.commandStr),na(4,function(Wt){return+Ut[Wt]})},function(Ut,Wt,Yt){return Nt.optional(function(){Ut.assert(Wt,Ut.shared.isArrayLike+"("+Yt+")&&"+Yt+".length===4","blend.color must be a 4d array")}),na(4,function(ha){return Wt.def("+",Yt,"[",ha,"]")})});case aQ:return Wn(function(Ut){return Nt.commandType(Ut,"number",kn,Mt.commandStr),Ut|0},function(Ut,Wt,Yt){return Nt.optional(function(){Ut.assert(Wt,"typeof "+Yt+'==="number"',"invalid stencil.mask")}),Wt.def(Yt,"|0")});case Jy:return Wn(function(Ut){Nt.commandType(Ut,"object",kn,Mt.commandStr);var Wt=Ut.cmp||"keep",Yt=Ut.ref||0,ha="mask"in Ut?Ut.mask:-1;return Nt.commandParameter(Wt,rB,qn+".cmp",Mt.commandStr),Nt.commandType(Yt,"number",qn+".ref",Mt.commandStr),Nt.commandType(ha,"number",qn+".mask",Mt.commandStr),[rB[Wt],Yt,ha]},function(Ut,Wt,Yt){var ha=Ut.constants.compareFuncs;Nt.optional(function(){function VA(){Ut.assert(Wt,Array.prototype.join.call(arguments,""),"invalid stencil.func")}VA(Yt+"&&typeof ",Yt,'==="object"'),VA('!("cmp" in ',Yt,")||(",Yt,".cmp in ",ha,")")});var la=Wt.def('"cmp" in ',Yt,"?",ha,"[",Yt,".cmp]",":",lm),pA=Wt.def(Yt,".ref|0"),yA=Wt.def('"mask" in ',Yt,"?",Yt,".mask|0:-1");return[la,pA,yA]});case Ky:case fB:return Wn(function(Ut){Nt.commandType(Ut,"object",kn,Mt.commandStr);var Wt=Ut.fail||"keep",Yt=Ut.zfail||"keep",ha=Ut.zpass||"keep";return Nt.commandParameter(Wt,cm,qn+".fail",Mt.commandStr),Nt.commandParameter(Yt,cm,qn+".zfail",Mt.commandStr),Nt.commandParameter(ha,cm,qn+".zpass",Mt.commandStr),[qn===fB?wm:vB,cm[Wt],cm[Yt],cm[ha]]},function(Ut,Wt,Yt){var ha=Ut.constants.stencilOps;Nt.optional(function(){Ut.assert(Wt,Yt+"&&typeof "+Yt+'==="object"',"invalid "+qn)});function la(pA){return Nt.optional(function(){Ut.assert(Wt,'!("'+pA+'" in '+Yt+")||("+Yt+"."+pA+" in "+ha+")","invalid "+qn+"."+pA+", must be one of "+Object.keys(cm))}),Wt.def('"',pA,'" in ',Yt,"?",ha,"[",Yt,".",pA,"]:",lm)}return[qn===fB?wm:vB,la("fail"),la("zfail"),la("zpass")]});case Yy:return Wn(function(Ut){Nt.commandType(Ut,"object",kn,Mt.commandStr);var Wt=Ut.factor|0,Yt=Ut.units|0;return Nt.commandType(Wt,"number",kn+".factor",Mt.commandStr),Nt.commandType(Yt,"number",kn+".units",Mt.commandStr),[Wt,Yt]},function(Ut,Wt,Yt){Nt.optional(function(){Ut.assert(Wt,Yt+"&&typeof "+Yt+'==="object"',"invalid "+qn)});var ha=Wt.def(Yt,".factor|0"),la=Wt.def(Yt,".units|0");return[ha,la]});case rQ:return Wn(function(Ut){var Wt=0;return Ut==="front"?Wt=vB:Ut==="back"&&(Wt=wm),Nt.command(!!Wt,kn,Mt.commandStr),Wt},function(Ut,Wt,Yt){return Nt.optional(function(){Ut.assert(Wt,Yt+'==="front"||'+Yt+'==="back"',"invalid cull.face")}),Wt.def(Yt,'==="front"?',vB,":",wm)});case qy:return Wn(function(Ut){return Nt.command(typeof Ut=="number"&&Ut>=pa.lineWidthDims[0]&&Ut<=pa.lineWidthDims[1],"invalid line width, must be a positive number between "+pa.lineWidthDims[0]+" and "+pa.lineWidthDims[1],Mt.commandStr),Ut},function(Ut,Wt,Yt){return Nt.optional(function(){Ut.assert(Wt,"typeof "+Yt+'==="number"&&'+Yt+">="+pa.lineWidthDims[0]+"&&"+Yt+"<="+pa.lineWidthDims[1],"invalid line width")}),Yt});case Hy:return Wn(function(Ut){return Nt.commandParameter(Ut,i0,kn,Mt.commandStr),i0[Ut]},function(Ut,Wt,Yt){return Nt.optional(function(){Ut.assert(Wt,Yt+'==="cw"||'+Yt+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Wt.def(Yt+'==="cw"?'+hQ+":"+r0)});case $y:return Wn(function(Ut){return Nt.command(pC(Ut)&&Ut.length===4,"color.mask must be length 4 array",Mt.commandStr),Ut.map(function(Wt){return!!Wt})},function(Ut,Wt,Yt){return Nt.optional(function(){Ut.assert(Wt,Ut.shared.isArrayLike+"("+Yt+")&&"+Yt+".length===4","invalid color.mask")}),na(4,function(ha){return"!!"+Yt+"["+ha+"]"})});case Vy:return Wn(function(Ut){Nt.command(typeof Ut=="object"&&Ut,kn,Mt.commandStr);var Wt="value"in Ut?Ut.value:1,Yt=!!Ut.invert;return Nt.command(typeof Wt=="number"&&Wt>=0&&Wt<=1,"sample.coverage.value must be a number between 0 and 1",Mt.commandStr),[Wt,Yt]},function(Ut,Wt,Yt){Nt.optional(function(){Ut.assert(Wt,Yt+"&&typeof "+Yt+'==="object"',"invalid sample.coverage")});var ha=Wt.def('"value" in ',Yt,"?+",Yt,".value:1"),la=Wt.def("!!",Yt,".invert");return[ha,la]})}}),oa}function oC(Ot,Mt){var zr=Ot.static,ra=Ot.dynamic,oa={};return Object.keys(zr).forEach(function(qn){var kn=zr[qn],Wn;if(typeof kn=="number"||typeof kn=="boolean")Wn=PC(function(){return kn});else if(typeof kn=="function"){var Ut=kn._reglType;Ut==="texture2d"||Ut==="textureCube"?Wn=PC(function(Wt){return Wt.link(kn)}):Ut==="framebuffer"||Ut==="framebufferCube"?(Nt.command(kn.color.length>0,'missing color attachment for framebuffer sent to uniform "'+qn+'"',Mt.commandStr),Wn=PC(function(Wt){return Wt.link(kn.color[0])})):Nt.commandRaise('invalid data for uniform "'+qn+'"',Mt.commandStr)}else pC(kn)?Wn=PC(function(Wt){var Yt=Wt.global.def("[",na(kn.length,function(ha){return Nt.command(typeof kn[ha]=="number"||typeof kn[ha]=="boolean","invalid uniform "+qn,Wt.commandStr),kn[ha]}),"]");return Yt}):Nt.commandRaise('invalid or missing data for uniform "'+qn+'"',Mt.commandStr);Wn.value=kn,oa[qn]=Wn}),Object.keys(ra).forEach(function(qn){var kn=ra[qn];oa[qn]=CE(kn,function(Wn,Ut){return Wn.invoke(Ut,kn)})}),oa}function qC(Ot,Mt){var zr=Ot.static,ra=Ot.dynamic,oa={};return Object.keys(zr).forEach(function(qn){var kn=zr[qn],Wn=Pt.id(qn),Ut=new ia;if(ey(kn))Ut.state=Xm,Ut.buffer=EA.getBuffer(EA.create(kn,tB,!1,!0)),Ut.type=0;else{var Wt=EA.getBuffer(kn);if(Wt)Ut.state=Xm,Ut.buffer=Wt,Ut.type=0;else if(Nt.command(typeof kn=="object"&&kn,"invalid data for attribute "+qn,Mt.commandStr),"constant"in kn){var Yt=kn.constant;Ut.buffer="null",Ut.state=Fy,typeof Yt=="number"?Ut.x=Yt:(Nt.command(pC(Yt)&&Yt.length>0&&Yt.length<=4,"invalid constant for attribute "+qn,Mt.commandStr),Wm.forEach(function(bI,gI){gI<Yt.length&&(Ut[bI]=Yt[gI])}))}else{ey(kn.buffer)?Wt=EA.getBuffer(EA.create(kn.buffer,tB,!1,!0)):Wt=EA.getBuffer(kn.buffer),Nt.command(!!Wt,'missing buffer for attribute "'+qn+'"',Mt.commandStr);var ha=kn.offset|0;Nt.command(ha>=0,'invalid offset for attribute "'+qn+'"',Mt.commandStr);var la=kn.stride|0;Nt.command(la>=0&&la<256,'invalid stride for attribute "'+qn+'", must be integer betweeen [0, 255]',Mt.commandStr);var pA=kn.size|0;Nt.command(!("size"in kn)||pA>0&&pA<=4,'invalid size for attribute "'+qn+'", must be 1,2,3,4',Mt.commandStr);var yA=!!kn.normalized,VA=0;"type"in kn&&(Nt.commandParameter(kn.type,KE,"invalid type for attribute "+qn,Mt.commandStr),VA=KE[kn.type]);var MI=kn.divisor|0;Nt.optional(function(){"divisor"in kn&&(Nt.command(MI===0||kA,'cannot specify divisor for attribute "'+qn+'", instancing not supported',Mt.commandStr),Nt.command(MI>=0,'invalid divisor for attribute "'+qn+'"',Mt.commandStr));var bI=Mt.commandStr,gI=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(kn).forEach(function(QA){Nt.command(gI.indexOf(QA)>=0,'unknown parameter "'+QA+'" for attribute pointer "'+qn+'" (valid parameters are '+gI+")",bI)})}),Ut.buffer=Wt,Ut.state=Xm,Ut.size=pA,Ut.normalized=yA,Ut.type=VA||Wt.dtype,Ut.offset=ha,Ut.stride=la,Ut.divisor=MI}}oa[qn]=PC(function(bI,gI){var QA=bI.attribCache;if(Wn in QA)return QA[Wn];var AA={isStream:!1};return Object.keys(Ut).forEach(function(BI){AA[BI]=Ut[BI]}),Ut.buffer&&(AA.buffer=bI.link(Ut.buffer),AA.type=AA.type||AA.buffer+".dtype"),QA[Wn]=AA,AA})}),Object.keys(ra).forEach(function(qn){var kn=ra[qn];function Wn(Ut,Wt){var Yt=Ut.invoke(Wt,kn),ha=Ut.shared,la=Ut.constants,pA=ha.isBufferArgs,yA=ha.buffer;Nt.optional(function(){Ut.assert(Wt,Yt+"&&(typeof "+Yt+'==="object"||typeof '+Yt+'==="function")&&('+pA+"("+Yt+")||"+yA+".getBuffer("+Yt+")||"+yA+".getBuffer("+Yt+".buffer)||"+pA+"("+Yt+'.buffer)||("constant" in '+Yt+"&&(typeof "+Yt+'.constant==="number"||'+ha.isArrayLike+"("+Yt+".constant))))",'invalid dynamic attribute "'+qn+'"')});var VA={isStream:Wt.def(!1)},MI=new ia;MI.state=Xm,Object.keys(MI).forEach(function(AA){VA[AA]=Wt.def(""+MI[AA])});var bI=VA.buffer,gI=VA.type;Wt("if(",pA,"(",Yt,")){",VA.isStream,"=true;",bI,"=",yA,".createStream(",tB,",",Yt,");",gI,"=",bI,".dtype;","}else{",bI,"=",yA,".getBuffer(",Yt,");","if(",bI,"){",gI,"=",bI,".dtype;",'}else if("constant" in ',Yt,"){",VA.state,"=",Fy,";","if(typeof "+Yt+'.constant === "number"){',VA[Wm[0]],"=",Yt,".constant;",Wm.slice(1).map(function(AA){return VA[AA]}).join("="),"=0;","}else{",Wm.map(function(AA,BI){return VA[AA]+"="+Yt+".constant.length>"+BI+"?"+Yt+".constant["+BI+"]:0;"}).join(""),"}}else{","if(",pA,"(",Yt,".buffer)){",bI,"=",yA,".createStream(",tB,",",Yt,".buffer);","}else{",bI,"=",yA,".getBuffer(",Yt,".buffer);","}",gI,'="type" in ',Yt,"?",la.glTypes,"[",Yt,".type]:",bI,".dtype;",VA.normalized,"=!!",Yt,".normalized;");function QA(AA){Wt(VA[AA],"=",Yt,".",AA,"|0;")}return QA("size"),QA("offset"),QA("stride"),QA("divisor"),Wt("}}"),Wt.exit("if(",VA.isStream,"){",yA,".destroyStream(",bI,");","}"),VA}oa[qn]=CE(kn,Wn)}),oa}function wC(Ot){var Mt=Ot.static,zr=Ot.dynamic,ra={};return Object.keys(Mt).forEach(function(oa){var qn=Mt[oa];ra[oa]=PC(function(kn,Wn){return typeof qn=="number"||typeof qn=="boolean"?""+qn:kn.link(qn)})}),Object.keys(zr).forEach(function(oa){var qn=zr[oa];ra[oa]=CE(qn,function(kn,Wn){return kn.invoke(Wn,qn)})}),ra}function OC(Ot,Mt,zr,ra,oa){var qn=Ot.static,kn=Ot.dynamic;Nt.optional(function(){var QA=[Qm,IB,CB,_m,vm,HB,Sm,qB,pB,EB].concat(DI);function AA(BI){Object.keys(BI).forEach(function(CI){Nt.command(QA.indexOf(CI)>=0,'unknown parameter "'+CI+'"',oa.commandStr)})}AA(qn),AA(kn)});var Wn=$I(Ot,Mt),Ut=sI(Ot),Wt=LI(Ot,Ut,oa),Yt=DC(Ot,oa),ha=TC(Ot,oa),la=iC(Ot,oa,Wn);function pA(QA){var AA=Wt[QA];AA&&(ha[QA]=AA)}pA(XE),pA(fI($B));var yA=Object.keys(ha).length>0,VA={framebuffer:Ut,draw:Yt,shader:la,state:ha,dirty:yA,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(VA.profile=iI(Ot),VA.uniforms=oC(zr,oa),VA.drawVAO=VA.scopeVAO=Yt.vao,!VA.drawVAO&&la.program&&!Wn&&qr.angle_instanced_arrays&&Yt.static.elements){var MI=!0,bI=la.program.attributes.map(function(QA){var AA=Mt.static[QA];return MI=MI&&!!AA,AA});if(MI&&bI.length>0){var gI=$A.getVAO($A.createVAO({attributes:bI,elements:Yt.static.elements}));VA.drawVAO=new jC(null,null,null,function(QA,AA){return QA.link(gI)}),VA.useVAO=!0}}return Wn?VA.useVAO=!0:VA.attributes=qC(Mt,oa),VA.context=wC(ra),VA}function YC(Ot,Mt,zr){var ra=Ot.shared,oa=ra.context,qn=Ot.scope();Object.keys(zr).forEach(function(kn){Mt.save(oa,"."+kn);var Wn=zr[kn],Ut=Wn.append(Ot,Mt);Array.isArray(Ut)?qn(oa,".",kn,"=[",Ut.join(),"];"):qn(oa,".",kn,"=",Ut,";")}),Mt(qn)}function VC(Ot,Mt,zr,ra){var oa=Ot.shared,qn=oa.gl,kn=oa.framebuffer,Wn;lI&&(Wn=Mt.def(oa.extensions,".webgl_draw_buffers"));var Ut=Ot.constants,Wt=Ut.drawBuffer,Yt=Ut.backBuffer,ha;zr?ha=zr.append(Ot,Mt):ha=Mt.def(kn,".next"),ra||Mt("if(",ha,"!==",kn,".cur){"),Mt("if(",ha,"){",qn,".bindFramebuffer(",IQ,",",ha,".framebuffer);"),lI&&Mt(Wn,".drawBuffersWEBGL(",Wt,"[",ha,".colorAttachments.length]);"),Mt("}else{",qn,".bindFramebuffer(",IQ,",null);"),lI&&Mt(Wn,".drawBuffersWEBGL(",Yt,");"),Mt("}",kn,".cur=",ha,";"),ra||Mt("}")}function ZC(Ot,Mt,zr){var ra=Ot.shared,oa=ra.gl,qn=Ot.current,kn=Ot.next,Wn=ra.current,Ut=ra.next,Wt=Ot.cond(Wn,".dirty");DI.forEach(function(Yt){var ha=fI(Yt);if(!(ha in zr.state)){var la,pA;if(ha in kn){la=kn[ha],pA=qn[ha];var yA=na(oI[ha].length,function(MI){return Wt.def(la,"[",MI,"]")});Wt(Ot.cond(yA.map(function(MI,bI){return MI+"!=="+pA+"["+bI+"]"}).join("||")).then(oa,".",CA[ha],"(",yA,");",yA.map(function(MI,bI){return pA+"["+bI+"]="+MI}).join(";"),";"))}else{la=Wt.def(Ut,".",ha);var VA=Ot.cond(la,"!==",Wn,".",ha);Wt(VA),ha in mA?VA(Ot.cond(la).then(oa,".enable(",mA[ha],");").else(oa,".disable(",mA[ha],");"),Wn,".",ha,"=",la,";"):VA(oa,".",CA[ha],"(",la,");",Wn,".",ha,"=",la,";")}}}),Object.keys(zr.state).length===0&&Wt(Wn,".dirty=false;"),Mt(Wt)}function nE(Ot,Mt,zr,ra){var oa=Ot.shared,qn=Ot.current,kn=oa.current,Wn=oa.gl;mQ(Object.keys(zr)).forEach(function(Ut){var Wt=zr[Ut];if(!(ra&&!ra(Wt))){var Yt=Wt.append(Ot,Mt);if(mA[Ut]){var ha=mA[Ut];um(Wt)?Yt?Mt(Wn,".enable(",ha,");"):Mt(Wn,".disable(",ha,");"):Mt(Ot.cond(Yt).then(Wn,".enable(",ha,");").else(Wn,".disable(",ha,");")),Mt(kn,".",Ut,"=",Yt,";")}else if(pC(Yt)){var la=qn[Ut];Mt(Wn,".",CA[Ut],"(",Yt,");",Yt.map(function(pA,yA){return la+"["+yA+"]="+pA}).join(";"),";")}else Mt(Wn,".",CA[Ut],"(",Yt,");",kn,".",Ut,"=",Yt,";")}})}function LC(Ot,Mt){kA&&(Ot.instancing=Mt.def(Ot.shared.extensions,".angle_instanced_arrays"))}function zI(Ot,Mt,zr,ra,oa){var qn=Ot.shared,kn=Ot.stats,Wn=qn.current,Ut=qn.timer,Wt=zr.profile;function Yt(){return typeof performance>"u"?"Date.now()":"performance.now()"}var ha,la;function pA(QA){ha=Mt.def(),QA(ha,"=",Yt(),";"),typeof oa=="string"?QA(kn,".count+=",oa,";"):QA(kn,".count++;"),NA&&(ra?(la=Mt.def(),QA(la,"=",Ut,".getNumPendingQueries();")):QA(Ut,".beginQuery(",kn,");"))}function yA(QA){QA(kn,".cpuTime+=",Yt(),"-",ha,";"),NA&&(ra?QA(Ut,".pushScopeStats(",la,",",Ut,".getNumPendingQueries(),",kn,");"):QA(Ut,".endQuery();"))}function VA(QA){var AA=Mt.def(Wn,".profile");Mt(Wn,".profile=",QA,";"),Mt.exit(Wn,".profile=",AA,";")}var MI;if(Wt){if(um(Wt)){Wt.enable?(pA(Mt),yA(Mt.exit),VA("true")):VA("false");return}MI=Wt.append(Ot,Mt),VA(MI)}else MI=Mt.def(Wn,".profile");var bI=Ot.block();pA(bI),Mt("if(",MI,"){",bI,"}");var gI=Ot.block();yA(gI),Mt.exit("if(",MI,"){",gI,"}")}function oE(Ot,Mt,zr,ra,oa){var qn=Ot.shared;function kn(Ut){switch(Ut){case YB:case KB:case WB:return 2;case VB:case jB:case XB:return 3;case JB:case zB:case ZB:return 4;default:return 1}}function Wn(Ut,Wt,Yt){var ha=qn.gl,la=Mt.def(Ut,".location"),pA=Mt.def(qn.attributes,"[",la,"]"),yA=Yt.state,VA=Yt.buffer,MI=[Yt.x,Yt.y,Yt.z,Yt.w],bI=["buffer","normalized","offset","stride"];function gI(){Mt("if(!",pA,".buffer){",ha,".enableVertexAttribArray(",la,");}");var AA=Yt.type,BI;if(Yt.size?BI=Mt.def(Yt.size,"||",Wt):BI=Wt,Mt("if(",pA,".type!==",AA,"||",pA,".size!==",BI,"||",bI.map(function(FI){return pA+"."+FI+"!=="+Yt[FI]}).join("||"),"){",ha,".bindBuffer(",tB,",",VA,".buffer);",ha,".vertexAttribPointer(",[la,BI,AA,Yt.normalized,Yt.stride,Yt.offset],");",pA,".type=",AA,";",pA,".size=",BI,";",bI.map(function(FI){return pA+"."+FI+"="+Yt[FI]+";"}).join(""),"}"),kA){var CI=Yt.divisor;Mt("if(",pA,".divisor!==",CI,"){",Ot.instancing,".vertexAttribDivisorANGLE(",[la,CI],");",pA,".divisor=",CI,";}")}}function QA(){Mt("if(",pA,".buffer){",ha,".disableVertexAttribArray(",la,");",pA,".buffer=null;","}if(",Wm.map(function(AA,BI){return pA+"."+AA+"!=="+MI[BI]}).join("||"),"){",ha,".vertexAttrib4f(",la,",",MI,");",Wm.map(function(AA,BI){return pA+"."+AA+"="+MI[BI]+";"}).join(""),"}")}yA===Xm?gI():yA===Fy?QA():(Mt("if(",yA,"===",Xm,"){"),gI(),Mt("}else{"),QA(),Mt("}"))}ra.forEach(function(Ut){var Wt=Ut.name,Yt=zr.attributes[Wt],ha;if(Yt){if(!oa(Yt))return;ha=Yt.append(Ot,Mt)}else{if(!oa(BQ))return;var la=Ot.scopeAttrib(Wt);Nt.optional(function(){Ot.assert(Mt,la+".state","missing attribute "+Wt)}),ha={},Object.keys(new ia).forEach(function(pA){ha[pA]=Mt.def(la,".",pA)})}Wn(Ot.link(Ut),kn(Ut.info.type),ha)})}function CC(Ot,Mt,zr,ra,oa,qn){for(var kn=Ot.shared,Wn=kn.gl,Ut={},Wt,Yt=0;Yt<ra.length;++Yt){var ha=ra[Yt],la=ha.name,pA=ha.info.type,yA=ha.info.size,VA=zr.uniforms[la];if(yA>1){if(!VA)continue;var MI=la.replace("[0]","");if(Ut[MI])continue;Ut[MI]=1}var bI=Ot.link(ha),gI=bI+".location",QA;if(VA){if(!oa(VA))continue;if(um(VA)){var AA=VA.value;if(Nt.command(AA!==null&&typeof AA<"u",'missing uniform "'+la+'"',Ot.commandStr),pA===QB||pA===_B){Nt.command(typeof AA=="function"&&(pA===QB&&(AA._reglType==="texture2d"||AA._reglType==="framebuffer")||pA===_B&&(AA._reglType==="textureCube"||AA._reglType==="framebufferCube")),"invalid texture for uniform "+la,Ot.commandStr);var BI=Ot.link(AA._texture||AA.color[0]._texture);Mt(Wn,".uniform1i(",gI,",",BI+".bind());"),Mt.exit(BI,".unbind();")}else if(pA===mB||pA===BB||pA===yB){Nt.optional(function(){Nt.command(pC(AA),"invalid matrix for uniform "+la,Ot.commandStr),Nt.command(pA===mB&&AA.length===4||pA===BB&&AA.length===9||pA===yB&&AA.length===16,"invalid length for matrix uniform "+la,Ot.commandStr)});var CI=Ot.global.def("new Float32Array(["+Array.prototype.slice.call(AA)+"])"),FI=2;pA===BB?FI=3:pA===yB&&(FI=4),Mt(Wn,".uniformMatrix",FI,"fv(",gI,",false,",CI,");")}else{switch(pA){case Xy:yA===1?Nt.commandType(AA,"number","uniform "+la,Ot.commandStr):Nt.command(pC(AA)&&AA.length===yA,"uniform "+la,Ot.commandStr),Wt="1f";break;case YB:Nt.command(pC(AA)&&AA.length&&AA.length%2===0&&AA.length<=yA*2,"uniform "+la,Ot.commandStr),Wt="2f";break;case VB:Nt.command(pC(AA)&&AA.length&&AA.length%3===0&&AA.length<=yA*3,"uniform "+la,Ot.commandStr),Wt="3f";break;case JB:Nt.command(pC(AA)&&AA.length&&AA.length%4===0&&AA.length<=yA*4,"uniform "+la,Ot.commandStr),Wt="4f";break;case e0:yA===1?Nt.commandType(AA,"boolean","uniform "+la,Ot.commandStr):Nt.command(pC(AA)&&AA.length===yA,"uniform "+la,Ot.commandStr),Wt="1i";break;case Zy:yA===1?Nt.commandType(AA,"number","uniform "+la,Ot.commandStr):Nt.command(pC(AA)&&AA.length===yA,"uniform "+la,Ot.commandStr),Wt="1i";break;case WB:Nt.command(pC(AA)&&AA.length&&AA.length%2===0&&AA.length<=yA*2,"uniform "+la,Ot.commandStr),Wt="2i";break;case KB:Nt.command(pC(AA)&&AA.length&&AA.length%2===0&&AA.length<=yA*2,"uniform "+la,Ot.commandStr),Wt="2i";break;case XB:Nt.command(pC(AA)&&AA.length&&AA.length%3===0&&AA.length<=yA*3,"uniform "+la,Ot.commandStr),Wt="3i";break;case jB:Nt.command(pC(AA)&&AA.length&&AA.length%3===0&&AA.length<=yA*3,"uniform "+la,Ot.commandStr),Wt="3i";break;case ZB:Nt.command(pC(AA)&&AA.length&&AA.length%4===0&&AA.length<=yA*4,"uniform "+la,Ot.commandStr),Wt="4i";break;case zB:Nt.command(pC(AA)&&AA.length&&AA.length%4===0&&AA.length<=yA*4,"uniform "+la,Ot.commandStr),Wt="4i";break}yA>1?(Wt+="v",AA=Ot.global.def("["+Array.prototype.slice.call(AA)+"]")):AA=pC(AA)?Array.prototype.slice.call(AA):AA,Mt(Wn,".uniform",Wt,"(",gI,",",AA,");")}continue}else QA=VA.append(Ot,Mt)}else{if(!oa(BQ))continue;QA=Mt.def(kn.uniforms,"[",Pt.id(la),"]")}pA===QB?(Nt(!Array.isArray(QA),"must specify a scalar prop for textures"),Mt("if(",QA,"&&",QA,'._reglType==="framebuffer"){',QA,"=",QA,".color[0];","}")):pA===_B&&(Nt(!Array.isArray(QA),"must specify a scalar prop for cube maps"),Mt("if(",QA,"&&",QA,'._reglType==="framebufferCube"){',QA,"=",QA,".color[0];","}")),Nt.optional(function(){function _E(EE,ty){Ot.assert(Mt,EE,'bad data or missing for uniform "'+la+'".  '+ty)}function Rm(EE,ty){ty===1&&Nt(!Array.isArray(QA),"must not specify an array type for uniform"),_E("Array.isArray("+QA+") && typeof "+QA+'[0]===" '+EE+'" || typeof '+QA+'==="'+EE+'"',"invalid type, expected "+EE)}function RE(EE,ty,ry){Array.isArray(QA)?Nt(QA.length&&QA.length%EE===0&&QA.length<=EE*ry,"must have length of "+(ry===1?"":"n * ")+EE):_E(kn.isArrayLike+"("+QA+")&&"+QA+".length && "+QA+".length % "+EE+" === 0 && "+QA+".length<="+EE*ry,"invalid vector, should have length of "+(ry===1?"":"n * ")+EE,Ot.commandStr)}function xQ(EE){Nt(!Array.isArray(QA),"must not specify a value type"),_E("typeof "+QA+'==="function"&&'+QA+'._reglType==="texture'+(EE===gQ?"2d":"Cube")+'"',"invalid texture type",Ot.commandStr)}switch(pA){case Zy:Rm("number",yA);break;case KB:RE(2,"number",yA);break;case jB:RE(3,"number",yA);break;case zB:RE(4,"number",yA);break;case Xy:Rm("number",yA);break;case YB:RE(2,"number",yA);break;case VB:RE(3,"number",yA);break;case JB:RE(4,"number",yA);break;case e0:Rm("boolean",yA);break;case WB:RE(2,"boolean",yA);break;case XB:RE(3,"boolean",yA);break;case ZB:RE(4,"boolean",yA);break;case mB:RE(4,"number",yA);break;case BB:RE(9,"number",yA);break;case yB:RE(16,"number",yA);break;case QB:xQ(gQ);break;case _B:xQ(y_);break}});var EC=1;switch(pA){case QB:case _B:var sE=Mt.def(QA,"._texture");Mt(Wn,".uniform1i(",gI,",",sE,".bind());"),Mt.exit(sE,".unbind();");continue;case Zy:case e0:Wt="1i";break;case KB:case WB:Wt="2i",EC=2;break;case jB:case XB:Wt="3i",EC=3;break;case zB:case ZB:Wt="4i",EC=4;break;case Xy:Wt="1f";break;case YB:Wt="2f",EC=2;break;case VB:Wt="3f",EC=3;break;case JB:Wt="4f",EC=4;break;case mB:Wt="Matrix2fv";break;case BB:Wt="Matrix3fv";break;case yB:Wt="Matrix4fv";break}if(Wt.indexOf("Matrix")===-1&&yA>1&&(Wt+="v",EC=1),Wt.charAt(0)==="M"){Mt(Wn,".uniform",Wt,"(",gI,",");var bm=Math.pow(pA-mB+2,2),ZE=Ot.global.def("new Float32Array(",bm,")");Array.isArray(QA)?Mt("false,(",na(bm,function(_E){return ZE+"["+_E+"]="+QA[_E]}),",",ZE,")"):Mt("false,(Array.isArray(",QA,")||",QA," instanceof Float32Array)?",QA,":(",na(bm,function(_E){return ZE+"["+_E+"]="+QA+"["+_E+"]"}),",",ZE,")"),Mt(");")}else if(EC>1){for(var VE=[],gm=[],Dm=0;Dm<EC;++Dm)Array.isArray(QA)?gm.push(QA[Dm]):gm.push(Mt.def(QA+"["+Dm+"]")),qn&&VE.push(Mt.def());qn&&Mt("if(!",Ot.batchId,"||",VE.map(function(_E,Rm){return _E+"!=="+gm[Rm]}).join("||"),"){",VE.map(function(_E,Rm){return _E+"="+gm[Rm]+";"}).join("")),Mt(Wn,".uniform",Wt,"(",gI,",",gm.join(","),");"),qn&&Mt("}")}else{if(Nt(!Array.isArray(QA),"uniform value must not be an array"),qn){var wQ=Mt.def();Mt("if(!",Ot.batchId,"||",wQ,"!==",QA,"){",wQ,"=",QA,";")}Mt(Wn,".uniform",Wt,"(",gI,",",QA,");"),qn&&Mt("}")}}}function TI(Ot,Mt,zr,ra){var oa=Ot.shared,qn=oa.gl,kn=oa.draw,Wn=ra.draw;function Ut(){var BI=Wn.elements,CI,FI=Mt;return BI?((BI.contextDep&&ra.contextDynamic||BI.propDep)&&(FI=zr),CI=BI.append(Ot,FI),Wn.elementsActive&&FI("if("+CI+")"+qn+".bindBuffer("+Wy+","+CI+".buffer.buffer);")):(CI=FI.def(),FI(CI,"=",kn,".",_m,";","if(",CI,"){",qn,".bindBuffer(",Wy,",",CI,".buffer.buffer);}","else if(",oa.vao,".currentVAO){",CI,"=",Ot.shared.elements+".getElements("+oa.vao,".currentVAO.elements);",vA?"":"if("+CI+")"+qn+".bindBuffer("+Wy+","+CI+".buffer.buffer);","}")),CI}function Wt(){var BI=Wn.count,CI,FI=Mt;return BI?((BI.contextDep&&ra.contextDynamic||BI.propDep)&&(FI=zr),CI=BI.append(Ot,FI),Nt.optional(function(){BI.MISSING&&Ot.assert(Mt,"false","missing vertex count"),BI.DYNAMIC&&Ot.assert(FI,CI+">=0","missing vertex count")})):(CI=FI.def(kn,".",Sm),Nt.optional(function(){Ot.assert(FI,CI+">=0","missing vertex count")})),CI}var Yt=Ut();function ha(BI){var CI=Wn[BI];return CI?CI.contextDep&&ra.contextDynamic||CI.propDep?CI.append(Ot,zr):CI.append(Ot,Mt):Mt.def(kn,".",BI)}var la=ha(vm),pA=ha(HB),yA=Wt();if(typeof yA=="number"){if(yA===0)return}else zr("if(",yA,"){"),zr.exit("}");var VA,MI;kA&&(VA=ha(qB),MI=Ot.instancing);var bI=Yt+".type",gI=Wn.elements&&um(Wn.elements)&&!Wn.vaoActive;function QA(){function BI(){zr(MI,".drawElementsInstancedANGLE(",[la,yA,bI,pA+"<<(("+bI+"-"+$0+")>>1)",VA],");")}function CI(){zr(MI,".drawArraysInstancedANGLE(",[la,pA,yA,VA],");")}Yt&&Yt!=="null"?gI?BI():(zr("if(",Yt,"){"),BI(),zr("}else{"),CI(),zr("}")):CI()}function AA(){function BI(){zr(qn+".drawElements("+[la,yA,bI,pA+"<<(("+bI+"-"+$0+")>>1)"]+");")}function CI(){zr(qn+".drawArrays("+[la,pA,yA]+");")}Yt&&Yt!=="null"?gI?BI():(zr("if(",Yt,"){"),BI(),zr("}else{"),CI(),zr("}")):CI()}kA&&(typeof VA!="number"||VA>=0)?typeof VA=="string"?(zr("if(",VA,">0){"),QA(),zr("}else if(",VA,"<0){"),AA(),zr("}")):QA():AA()}function nC(Ot,Mt,zr,ra,oa){var qn=kI(),kn=qn.proc("body",oa);return Nt.optional(function(){qn.commandStr=Mt.commandStr,qn.command=qn.link(Mt.commandStr)}),kA&&(qn.instancing=kn.def(qn.shared.extensions,".angle_instanced_arrays")),Ot(qn,kn,zr,ra),qn.compile().body}function uC(Ot,Mt,zr,ra){LC(Ot,Mt),zr.useVAO?zr.drawVAO?Mt(Ot.shared.vao,".setVAO(",zr.drawVAO.append(Ot,Mt),");"):Mt(Ot.shared.vao,".setVAO(",Ot.shared.vao,".targetVAO);"):(Mt(Ot.shared.vao,".setVAO(null);"),oE(Ot,Mt,zr,ra.attributes,function(){return!0})),CC(Ot,Mt,zr,ra.uniforms,function(){return!0},!1),TI(Ot,Mt,Mt,zr)}function FC(Ot,Mt){var zr=Ot.proc("draw",1);LC(Ot,zr),YC(Ot,zr,Mt.context),VC(Ot,zr,Mt.framebuffer),ZC(Ot,zr,Mt),nE(Ot,zr,Mt.state),zI(Ot,zr,Mt,!1,!0);var ra=Mt.shader.progVar.append(Ot,zr);if(zr(Ot.shared.gl,".useProgram(",ra,".program);"),Mt.shader.program)uC(Ot,zr,Mt,Mt.shader.program);else{zr(Ot.shared.vao,".setVAO(null);");var oa=Ot.global.def("{}"),qn=zr.def(ra,".id"),kn=zr.def(oa,"[",qn,"]");zr(Ot.cond(kn).then(kn,".call(this,a0);").else(kn,"=",oa,"[",qn,"]=",Ot.link(function(Wn){return nC(uC,Ot,Mt,Wn,1)}),"(",ra,");",kn,".call(this,a0);"))}Object.keys(Mt.state).length>0&&zr(Ot.shared.current,".dirty=true;"),Ot.shared.vao&&zr(Ot.shared.vao,".setVAO(null);")}function YE(Ot,Mt,zr,ra){Ot.batchId="a1",LC(Ot,Mt);function oa(){return!0}oE(Ot,Mt,zr,ra.attributes,oa),CC(Ot,Mt,zr,ra.uniforms,oa,!1),TI(Ot,Mt,Mt,zr)}function xm(Ot,Mt,zr,ra){LC(Ot,Mt);var oa=zr.contextDep,qn=Mt.def(),kn="a0",Wn="a1",Ut=Mt.def();Ot.shared.props=Ut,Ot.batchId=qn;var Wt=Ot.scope(),Yt=Ot.scope();Mt(Wt.entry,"for(",qn,"=0;",qn,"<",Wn,";++",qn,"){",Ut,"=",kn,"[",qn,"];",Yt,"}",Wt.exit);function ha(bI){return bI.contextDep&&oa||bI.propDep}function la(bI){return!ha(bI)}if(zr.needsContext&&YC(Ot,Yt,zr.context),zr.needsFramebuffer&&VC(Ot,Yt,zr.framebuffer),nE(Ot,Yt,zr.state,ha),zr.profile&&ha(zr.profile)&&zI(Ot,Yt,zr,!1,!0),ra)zr.useVAO?zr.drawVAO?ha(zr.drawVAO)?Yt(Ot.shared.vao,".setVAO(",zr.drawVAO.append(Ot,Yt),");"):Wt(Ot.shared.vao,".setVAO(",zr.drawVAO.append(Ot,Wt),");"):Wt(Ot.shared.vao,".setVAO(",Ot.shared.vao,".targetVAO);"):(Wt(Ot.shared.vao,".setVAO(null);"),oE(Ot,Wt,zr,ra.attributes,la),oE(Ot,Yt,zr,ra.attributes,ha)),CC(Ot,Wt,zr,ra.uniforms,la,!1),CC(Ot,Yt,zr,ra.uniforms,ha,!0),TI(Ot,Wt,Yt,zr);else{var pA=Ot.global.def("{}"),yA=zr.shader.progVar.append(Ot,Yt),VA=Yt.def(yA,".id"),MI=Yt.def(pA,"[",VA,"]");Yt(Ot.shared.gl,".useProgram(",yA,".program);","if(!",MI,"){",MI,"=",pA,"[",VA,"]=",Ot.link(function(bI){return nC(YE,Ot,zr,bI,2)}),"(",yA,");}",MI,".call(this,a0[",qn,"],",qn,");")}}function Kt(Ot,Mt){var zr=Ot.proc("batch",2);Ot.batchId="0",LC(Ot,zr);var ra=!1,oa=!0;Object.keys(Mt.context).forEach(function(pA){ra=ra||Mt.context[pA].propDep}),ra||(YC(Ot,zr,Mt.context),oa=!1);var qn=Mt.framebuffer,kn=!1;qn?(qn.propDep?ra=kn=!0:qn.contextDep&&ra&&(kn=!0),kn||VC(Ot,zr,qn)):VC(Ot,zr,null),Mt.state.viewport&&Mt.state.viewport.propDep&&(ra=!0);function Wn(pA){return pA.contextDep&&ra||pA.propDep}ZC(Ot,zr,Mt),nE(Ot,zr,Mt.state,function(pA){return!Wn(pA)}),(!Mt.profile||!Wn(Mt.profile))&&zI(Ot,zr,Mt,!1,"a1"),Mt.contextDep=ra,Mt.needsContext=oa,Mt.needsFramebuffer=kn;var Ut=Mt.shader.progVar;if(Ut.contextDep&&ra||Ut.propDep)xm(Ot,zr,Mt,null);else{var Wt=Ut.append(Ot,zr);if(zr(Ot.shared.gl,".useProgram(",Wt,".program);"),Mt.shader.program)xm(Ot,zr,Mt,Mt.shader.program);else{zr(Ot.shared.vao,".setVAO(null);");var Yt=Ot.global.def("{}"),ha=zr.def(Wt,".id"),la=zr.def(Yt,"[",ha,"]");zr(Ot.cond(la).then(la,".call(this,a0,a1);").else(la,"=",Yt,"[",ha,"]=",Ot.link(function(pA){return nC(xm,Ot,Mt,pA,2)}),"(",Wt,");",la,".call(this,a0,a1);"))}}Object.keys(Mt.state).length>0&&zr(Ot.shared.current,".dirty=true;"),Ot.shared.vao&&zr(Ot.shared.vao,".setVAO(null);")}function va(Ot,Mt){var zr=Ot.proc("scope",3);Ot.batchId="a2";var ra=Ot.shared,oa=ra.current;YC(Ot,zr,Mt.context),Mt.framebuffer&&Mt.framebuffer.append(Ot,zr),mQ(Object.keys(Mt.state)).forEach(function(kn){var Wn=Mt.state[kn],Ut=Wn.append(Ot,zr);pC(Ut)?Ut.forEach(function(Wt,Yt){zr.set(Ot.next[kn],"["+Yt+"]",Wt)}):zr.set(ra.next,"."+kn,Ut)}),zI(Ot,zr,Mt,!0,!0),[_m,HB,Sm,qB,vm].forEach(function(kn){var Wn=Mt.draw[kn];Wn&&zr.set(ra.draw,"."+kn,""+Wn.append(Ot,zr))}),Object.keys(Mt.uniforms).forEach(function(kn){var Wn=Mt.uniforms[kn].append(Ot,zr);Array.isArray(Wn)&&(Wn="["+Wn.join()+"]"),zr.set(ra.uniforms,"["+Pt.id(kn)+"]",Wn)}),Object.keys(Mt.attributes).forEach(function(kn){var Wn=Mt.attributes[kn].append(Ot,zr),Ut=Ot.scopeAttrib(kn);Object.keys(new ia).forEach(function(Wt){zr.set(Ut,"."+Wt,Wn[Wt])})}),Mt.scopeVAO&&zr.set(ra.vao,".targetVAO",Mt.scopeVAO.append(Ot,zr));function qn(kn){var Wn=Mt.shader[kn];Wn&&zr.set(ra.shader,"."+kn,Wn.append(Ot,zr))}qn(IB),qn(CB),Object.keys(Mt.state).length>0&&(zr(oa,".dirty=true;"),zr.exit(oa,".dirty=true;")),zr("a1(",Ot.shared.context,",a0,",Ot.batchId,");")}function da(Ot){if(!(typeof Ot!="object"||pC(Ot))){for(var Mt=Object.keys(Ot),zr=0;zr<Mt.length;++zr)if(GI.isDynamic(Ot[Mt[zr]]))return!0;return!1}}function dI(Ot,Mt,zr){var ra=Mt.static[zr];if(!ra||!da(ra))return;var oa=Ot.global,qn=Object.keys(ra),kn=!1,Wn=!1,Ut=!1,Wt=Ot.global.def("{}");qn.forEach(function(ha){var la=ra[ha];if(GI.isDynamic(la)){typeof la=="function"&&(la=ra[ha]=GI.unbox(la));var pA=CE(la,null);kn=kn||pA.thisDep,Ut=Ut||pA.propDep,Wn=Wn||pA.contextDep}else{switch(oa(Wt,".",ha,"="),typeof la){case"number":oa(la);break;case"string":oa('"',la,'"');break;case"object":Array.isArray(la)&&oa("[",la.join(),"]");break;default:oa(Ot.link(la));break}oa(";")}});function Yt(ha,la){qn.forEach(function(pA){var yA=ra[pA];if(GI.isDynamic(yA)){var VA=ha.invoke(la,yA);la(Wt,".",pA,"=",VA,";")}})}Mt.dynamic[zr]=new GI.DynamicVariable(UB,{thisDep:kn,contextDep:Wn,propDep:Ut,ref:Wt,append:Yt}),delete Mt.static[zr]}function eC(Ot,Mt,zr,ra,oa){var qn=kI();qn.stats=qn.link(oa),Object.keys(Mt.static).forEach(function(Wn){dI(qn,Mt,Wn)}),E_.forEach(function(Wn){dI(qn,Ot,Wn)});var kn=OC(Ot,Mt,zr,ra,qn);return FC(qn,kn),va(qn,kn),Kt(qn,kn),_(qn.compile(),{destroy:function(){kn.shader.program.destroy()}})}return{next:rI,current:oI,procs:function(){var Ot=kI(),Mt=Ot.proc("poll"),zr=Ot.proc("refresh"),ra=Ot.block();Mt(ra),zr(ra);var oa=Ot.shared,qn=oa.gl,kn=oa.next,Wn=oa.current;ra(Wn,".dirty=false;"),VC(Ot,Mt),VC(Ot,zr,null,!0);var Ut;kA&&(Ut=Ot.link(kA)),qr.oes_vertex_array_object&&zr(Ot.link(qr.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Wt=0;Wt<pa.maxAttributes;++Wt){var Yt=zr.def(oa.attributes,"[",Wt,"]"),ha=Ot.cond(Yt,".buffer");ha.then(qn,".enableVertexAttribArray(",Wt,");",qn,".bindBuffer(",tB,",",Yt,".buffer.buffer);",qn,".vertexAttribPointer(",Wt,",",Yt,".size,",Yt,".type,",Yt,".normalized,",Yt,".stride,",Yt,".offset);").else(qn,".disableVertexAttribArray(",Wt,");",qn,".vertexAttrib4f(",Wt,",",Yt,".x,",Yt,".y,",Yt,".z,",Yt,".w);",Yt,".buffer=null;"),zr(ha),kA&&zr(Ut,".vertexAttribDivisorANGLE(",Wt,",",Yt,".divisor);")}return zr(Ot.shared.vao,".currentVAO=null;",Ot.shared.vao,".setVAO(",Ot.shared.vao,".targetVAO);"),Object.keys(mA).forEach(function(la){var pA=mA[la],yA=ra.def(kn,".",la),VA=Ot.block();VA("if(",yA,"){",qn,".enable(",pA,")}else{",qn,".disable(",pA,")}",Wn,".",la,"=",yA,";"),zr(VA),Mt("if(",yA,"!==",Wn,".",la,"){",VA,"}")}),Object.keys(CA).forEach(function(la){var pA=CA[la],yA=oI[la],VA,MI,bI=Ot.block();if(bI(qn,".",pA,"("),pC(yA)){var gI=yA.length;VA=Ot.global.def(kn,".",la),MI=Ot.global.def(Wn,".",la),bI(na(gI,function(QA){return VA+"["+QA+"]"}),");",na(gI,function(QA){return MI+"["+QA+"]="+VA+"["+QA+"];"}).join("")),Mt("if(",na(gI,function(QA){return VA+"["+QA+"]!=="+MI+"["+QA+"]"}).join("||"),"){",bI,"}")}else VA=ra.def(kn,".",la),MI=ra.def(Wn,".",la),bI(VA,");",Wn,".",la,"=",VA,";"),Mt("if(",VA,"!==",MI,"){",bI,"}");zr(bI)}),Ot.compile()}(),compile:eC}}function P_(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var O_=34918,G_=34919,yQ=35007,U_=function(Ve,Pt){if(!Pt.ext_disjoint_timer_query)return null;var qr=[];function pa(){return qr.pop()||Pt.ext_disjoint_timer_query.createQueryEXT()}function EA(kA){qr.push(kA)}var fa=[];function nA(kA){var lI=pa();Pt.ext_disjoint_timer_query.beginQueryEXT(yQ,lI),fa.push(lI),NA(fa.length-1,fa.length,kA)}function TA(){Pt.ext_disjoint_timer_query.endQueryEXT(yQ)}function RA(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var $A=[];function qA(){return $A.pop()||new RA}function HA(kA){$A.push(kA)}var KA=[];function NA(kA,lI,vA){var oI=qA();oI.startQueryIndex=kA,oI.endQueryIndex=lI,oI.sum=0,oI.stats=vA,KA.push(oI)}var OA=[],ia=[];function rA(){var kA,lI,vA=fa.length;if(vA!==0){ia.length=Math.max(ia.length,vA+1),OA.length=Math.max(OA.length,vA+1),OA[0]=0,ia[0]=0;var oI=0;for(kA=0,lI=0;lI<fa.length;++lI){var rI=fa[lI];Pt.ext_disjoint_timer_query.getQueryObjectEXT(rI,G_)?(oI+=Pt.ext_disjoint_timer_query.getQueryObjectEXT(rI,O_),EA(rI)):fa[kA++]=rI,OA[lI+1]=oI,ia[lI+1]=kA}for(fa.length=kA,kA=0,lI=0;lI<KA.length;++lI){var DI=KA[lI],mA=DI.startQueryIndex,CA=DI.endQueryIndex;DI.sum+=OA[CA]-OA[mA];var fI=ia[mA],jA=ia[CA];jA===fI?(DI.stats.gpuTime+=DI.sum/1e6,HA(DI)):(DI.startQueryIndex=fI,DI.endQueryIndex=jA,KA[kA++]=DI)}KA.length=kA}}return{beginQuery:nA,endQuery:TA,pushScopeStats:NA,update:rA,getNumPendingQueries:function(){return fa.length},clear:function(){qr.push.apply(qr,fa);for(var kA=0;kA<qr.length;kA++)Pt.ext_disjoint_timer_query.deleteQueryEXT(qr[kA]);fa.length=0,qr.length=0},restore:function(){fa.length=0,qr.length=0}}},$_=16384,H_=256,q_=1024,Y_=34962,QQ="webglcontextlost",_Q="webglcontextrestored",vQ=1,V_=2,J_=3;function SQ(Ve,Pt){for(var qr=0;qr<Ve.length;++qr)if(Ve[qr]===Pt)return qr;return-1}function K_(Ve){var Pt=Hr(Ve);if(!Pt)return null;var qr=Pt.gl,pa=qr.getContextAttributes(),EA=qr.isContextLost(),fa=zn(qr,Pt);if(!fa)return null;var nA=mC(),TA=P_(),RA=fa.extensions,$A=U_(qr,RA),qA=tC(),HA=qr.drawingBufferWidth,KA=qr.drawingBufferHeight,NA={tick:0,time:0,viewportWidth:HA,viewportHeight:KA,framebufferWidth:HA,framebufferHeight:KA,drawingBufferWidth:HA,drawingBufferHeight:KA,pixelRatio:Pt.pixelRatio},OA={},ia={elements:null,primitive:4,count:-1,offset:0,instances:-1},rA=Gt(qr,RA),kA=pm(qr,TA,Pt,oI),lI=ZI(qr,RA,kA,TA),vA=A_(qr,RA,rA,TA,kA,lI,ia);function oI(TI){return vA.destroyBuffer(TI)}var rI=g_(qr,nA,TA,Pt),DI=OQ(qr,RA,rA,function(){fI.procs.poll()},NA,TA,Pt),mA=GQ(qr,RA,rA,TA,Pt),CA=s_(qr,RA,rA,DI,mA,TA),fI=k_(qr,nA,RA,rA,kA,lI,DI,CA,OA,vA,rI,ia,NA,$A,Pt),jA=f_(qr,CA,fI.procs.poll,NA,pa,RA,rA),FA=fI.next,zA=qr.canvas,eI=[],UI=[],kI=[],iI=[Pt.onDestroy],sI=null;function LI(){if(eI.length===0){$A&&$A.update(),sI=null;return}sI=NI.next(LI),nE();for(var TI=eI.length-1;TI>=0;--TI){var nC=eI[TI];nC&&nC(NA,null,0)}qr.flush(),$A&&$A.update()}function $I(){!sI&&eI.length>0&&(sI=NI.next(LI))}function iC(){sI&&(NI.cancel(LI),sI=null)}function DC(TI){TI.preventDefault(),EA=!0,iC(),UI.forEach(function(nC){nC()})}function TC(TI){qr.getError(),EA=!1,fa.restore(),rI.restore(),kA.restore(),DI.restore(),mA.restore(),CA.restore(),vA.restore(),$A&&$A.restore(),fI.procs.refresh(),$I(),kI.forEach(function(nC){nC()})}zA&&(zA.addEventListener(QQ,DC,!1),zA.addEventListener(_Q,TC,!1));function oC(){eI.length=0,iC(),zA&&(zA.removeEventListener(QQ,DC),zA.removeEventListener(_Q,TC)),rI.clear(),CA.clear(),mA.clear(),vA.clear(),DI.clear(),lI.clear(),kA.clear(),$A&&$A.clear(),iI.forEach(function(TI){TI()})}function qC(TI){Nt(!!TI,"invalid args to regl({...})"),Nt.type(TI,"object","invalid args to regl({...})");function nC(oa){var qn=_({},oa);delete qn.uniforms,delete qn.attributes,delete qn.context,delete qn.vao,"stencil"in qn&&qn.stencil.op&&(qn.stencil.opBack=qn.stencil.opFront=qn.stencil.op,delete qn.stencil.op);function kn(Wn){if(Wn in qn){var Ut=qn[Wn];delete qn[Wn],Object.keys(Ut).forEach(function(Wt){qn[Wn+"."+Wt]=Ut[Wt]})}}return kn("blend"),kn("depth"),kn("cull"),kn("stencil"),kn("polygonOffset"),kn("scissor"),kn("sample"),"vao"in oa&&(qn.vao=oa.vao),qn}function uC(oa,qn){var kn={},Wn={};return Object.keys(oa).forEach(function(Ut){var Wt=oa[Ut];if(GI.isDynamic(Wt)){Wn[Ut]=GI.unbox(Wt,Ut);return}else if(qn&&Array.isArray(Wt)){for(var Yt=0;Yt<Wt.length;++Yt)if(GI.isDynamic(Wt[Yt])){Wn[Ut]=GI.unbox(Wt,Ut);return}}kn[Ut]=Wt}),{dynamic:Wn,static:kn}}var FC=uC(TI.context||{},!0),YE=uC(TI.uniforms||{},!0),xm=uC(TI.attributes||{},!1),Kt=uC(nC(TI),!1),va={gpuTime:0,cpuTime:0,count:0},da=fI.compile(Kt,xm,YE,FC,va),dI=da.draw,eC=da.batch,Ot=da.scope,Mt=[];function zr(oa){for(;Mt.length<oa;)Mt.push(null);return Mt}function ra(oa,qn){var kn;if(EA&&Nt.raise("context lost"),typeof oa=="function")return Ot.call(this,null,oa,0);if(typeof qn=="function")if(typeof oa=="number")for(kn=0;kn<oa;++kn)Ot.call(this,null,qn,kn);else if(Array.isArray(oa))for(kn=0;kn<oa.length;++kn)Ot.call(this,oa[kn],qn,kn);else return Ot.call(this,oa,qn,0);else if(typeof oa=="number"){if(oa>0)return eC.call(this,zr(oa|0),oa|0)}else if(Array.isArray(oa)){if(oa.length)return eC.call(this,oa,oa.length)}else return dI.call(this,oa)}return _(ra,{stats:va,destroy:function(){da.destroy()}})}var wC=CA.setFBO=qC({framebuffer:GI.define.call(null,vQ,"framebuffer")});function OC(TI,nC){var uC=0;fI.procs.poll();var FC=nC.color;FC&&(qr.clearColor(+FC[0]||0,+FC[1]||0,+FC[2]||0,+FC[3]||0),uC|=$_),"depth"in nC&&(qr.clearDepth(+nC.depth),uC|=H_),"stencil"in nC&&(qr.clearStencil(nC.stencil|0),uC|=q_),Nt(!!uC,"called regl.clear with no buffer specified"),qr.clear(uC)}function YC(TI){if(Nt(typeof TI=="object"&&TI,"regl.clear() takes an object as input"),"framebuffer"in TI)if(TI.framebuffer&&TI.framebuffer_reglType==="framebufferCube")for(var nC=0;nC<6;++nC)wC(_({framebuffer:TI.framebuffer.faces[nC]},TI),OC);else wC(TI,OC);else OC(null,TI)}function VC(TI){Nt.type(TI,"function","regl.frame() callback must be a function"),eI.push(TI);function nC(){var uC=SQ(eI,TI);Nt(uC>=0,"cannot cancel a frame twice");function FC(){var YE=SQ(eI,FC);eI[YE]=eI[eI.length-1],eI.length-=1,eI.length<=0&&iC()}eI[uC]=FC}return $I(),{cancel:nC}}function ZC(){var TI=FA.viewport,nC=FA.scissor_box;TI[0]=TI[1]=nC[0]=nC[1]=0,NA.viewportWidth=NA.framebufferWidth=NA.drawingBufferWidth=TI[2]=nC[2]=qr.drawingBufferWidth,NA.viewportHeight=NA.framebufferHeight=NA.drawingBufferHeight=TI[3]=nC[3]=qr.drawingBufferHeight}function nE(){NA.tick+=1,NA.time=zI(),ZC(),fI.procs.poll()}function LC(){DI.refresh(),ZC(),fI.procs.refresh(),$A&&$A.update()}function zI(){return(tC()-qA)/1e3}LC();function oE(TI,nC){Nt.type(nC,"function","listener callback must be a function");var uC;switch(TI){case"frame":return VC(nC);case"lost":uC=UI;break;case"restore":uC=kI;break;case"destroy":uC=iI;break;default:Nt.raise("invalid event, must be one of frame,lost,restore,destroy")}return uC.push(nC),{cancel:function(){for(var FC=0;FC<uC.length;++FC)if(uC[FC]===nC){uC[FC]=uC[uC.length-1],uC.pop();return}}}}var CC=_(qC,{clear:YC,prop:GI.define.bind(null,vQ),context:GI.define.bind(null,V_),this:GI.define.bind(null,J_),draw:qC({}),buffer:function(TI){return kA.create(TI,Y_,!1,!1)},elements:function(TI){return lI.create(TI,!1)},texture:DI.create2D,cube:DI.createCube,renderbuffer:mA.create,framebuffer:CA.create,framebufferCube:CA.createCube,vao:vA.createVAO,attributes:pa,frame:VC,on:oE,limits:rA,hasExtension:function(TI){return rA.extensions.indexOf(TI.toLowerCase())>=0},read:jA,destroy:oC,_gl:qr,_refresh:LC,poll:function(){nE(),$A&&$A.update()},now:zI,stats:TA});return Pt.onDone(null,CC),CC}return K_})})(regl$1);var reglExports=regl$1.exports;const regl=getDefaultExportFromCjs(reglExports);var EPSILON=1e-6,ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var d=0,s=arguments.length;s--;)d+=arguments[s]*arguments[s];return Math.sqrt(d)});function identity$7(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function invert(d,s){var f=s[0],_=s[1],S=s[2],T=s[3],F=s[4],M=s[5],P=s[6],H=s[7],J=s[8],K=s[9],oe=s[10],se=s[11],ae=s[12],ge=s[13],he=s[14],Be=s[15],pe=f*M-_*F,be=f*P-S*F,Re=f*H-T*F,Fe=_*P-S*M,Me=_*H-T*M,ve=S*H-T*P,At=J*ge-K*ae,Ct=J*he-oe*ae,Rt=J*Be-se*ae,It=K*he-oe*ge,xt=K*Be-se*ge,wt=oe*Be-se*he,Ft=pe*wt-be*xt+Re*It+Fe*Rt-Me*Ct+ve*At;return Ft?(Ft=1/Ft,d[0]=(M*wt-P*xt+H*It)*Ft,d[1]=(S*xt-_*wt-T*It)*Ft,d[2]=(ge*ve-he*Me+Be*Fe)*Ft,d[3]=(oe*Me-K*ve-se*Fe)*Ft,d[4]=(P*Rt-F*wt-H*Ct)*Ft,d[5]=(f*wt-S*Rt+T*Ct)*Ft,d[6]=(he*Re-ae*ve-Be*be)*Ft,d[7]=(J*ve-oe*Re+se*be)*Ft,d[8]=(F*xt-M*Rt+H*At)*Ft,d[9]=(_*Rt-f*xt-T*At)*Ft,d[10]=(ae*Me-ge*Re+Be*pe)*Ft,d[11]=(K*Re-J*Me-se*pe)*Ft,d[12]=(M*Ct-F*It-P*At)*Ft,d[13]=(f*It-_*Ct+S*At)*Ft,d[14]=(ge*be-ae*Fe-he*pe)*Ft,d[15]=(J*Fe-K*be+oe*pe)*Ft,d):null}function multiply$1(d,s,f){var _=s[0],S=s[1],T=s[2],F=s[3],M=s[4],P=s[5],H=s[6],J=s[7],K=s[8],oe=s[9],se=s[10],ae=s[11],ge=s[12],he=s[13],Be=s[14],pe=s[15],be=f[0],Re=f[1],Fe=f[2],Me=f[3];return d[0]=be*_+Re*M+Fe*K+Me*ge,d[1]=be*S+Re*P+Fe*oe+Me*he,d[2]=be*T+Re*H+Fe*se+Me*Be,d[3]=be*F+Re*J+Fe*ae+Me*pe,be=f[4],Re=f[5],Fe=f[6],Me=f[7],d[4]=be*_+Re*M+Fe*K+Me*ge,d[5]=be*S+Re*P+Fe*oe+Me*he,d[6]=be*T+Re*H+Fe*se+Me*Be,d[7]=be*F+Re*J+Fe*ae+Me*pe,be=f[8],Re=f[9],Fe=f[10],Me=f[11],d[8]=be*_+Re*M+Fe*K+Me*ge,d[9]=be*S+Re*P+Fe*oe+Me*he,d[10]=be*T+Re*H+Fe*se+Me*Be,d[11]=be*F+Re*J+Fe*ae+Me*pe,be=f[12],Re=f[13],Fe=f[14],Me=f[15],d[12]=be*_+Re*M+Fe*K+Me*ge,d[13]=be*S+Re*P+Fe*oe+Me*he,d[14]=be*T+Re*H+Fe*se+Me*Be,d[15]=be*F+Re*J+Fe*ae+Me*pe,d}function translate$1(d,s,f){var _=f[0],S=f[1],T=f[2],F,M,P,H,J,K,oe,se,ae,ge,he,Be;return s===d?(d[12]=s[0]*_+s[4]*S+s[8]*T+s[12],d[13]=s[1]*_+s[5]*S+s[9]*T+s[13],d[14]=s[2]*_+s[6]*S+s[10]*T+s[14],d[15]=s[3]*_+s[7]*S+s[11]*T+s[15]):(F=s[0],M=s[1],P=s[2],H=s[3],J=s[4],K=s[5],oe=s[6],se=s[7],ae=s[8],ge=s[9],he=s[10],Be=s[11],d[0]=F,d[1]=M,d[2]=P,d[3]=H,d[4]=J,d[5]=K,d[6]=oe,d[7]=se,d[8]=ae,d[9]=ge,d[10]=he,d[11]=Be,d[12]=F*_+J*S+ae*T+s[12],d[13]=M*_+K*S+ge*T+s[13],d[14]=P*_+oe*S+he*T+s[14],d[15]=H*_+se*S+Be*T+s[15]),d}function scale$2(d,s,f){var _=f[0],S=f[1],T=f[2];return d[0]=s[0]*_,d[1]=s[1]*_,d[2]=s[2]*_,d[3]=s[3]*_,d[4]=s[4]*S,d[5]=s[5]*S,d[6]=s[6]*S,d[7]=s[7]*S,d[8]=s[8]*T,d[9]=s[9]*T,d[10]=s[10]*T,d[11]=s[11]*T,d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15],d}function rotateX(d,s,f){var _=Math.sin(f),S=Math.cos(f),T=s[4],F=s[5],M=s[6],P=s[7],H=s[8],J=s[9],K=s[10],oe=s[11];return s!==d&&(d[0]=s[0],d[1]=s[1],d[2]=s[2],d[3]=s[3],d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15]),d[4]=T*S+H*_,d[5]=F*S+J*_,d[6]=M*S+K*_,d[7]=P*S+oe*_,d[8]=H*S-T*_,d[9]=J*S-F*_,d[10]=K*S-M*_,d[11]=oe*S-P*_,d}function rotateZ(d,s,f){var _=Math.sin(f),S=Math.cos(f),T=s[0],F=s[1],M=s[2],P=s[3],H=s[4],J=s[5],K=s[6],oe=s[7];return s!==d&&(d[8]=s[8],d[9]=s[9],d[10]=s[10],d[11]=s[11],d[12]=s[12],d[13]=s[13],d[14]=s[14],d[15]=s[15]),d[0]=T*S+H*_,d[1]=F*S+J*_,d[2]=M*S+K*_,d[3]=P*S+oe*_,d[4]=H*S-T*_,d[5]=J*S-F*_,d[6]=K*S-M*_,d[7]=oe*S-P*_,d}function perspectiveNO(d,s,f,_,S){var T=1/Math.tan(s/2),F;return d[0]=T/f,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=T,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,S!=null&&S!==1/0?(F=1/(_-S),d[10]=(S+_)*F,d[14]=2*S*_*F):(d[10]=-1,d[14]=-2*_),d}var perspective=perspectiveNO;function lookAt(d,s,f,_){var S,T,F,M,P,H,J,K,oe,se,ae=s[0],ge=s[1],he=s[2],Be=_[0],pe=_[1],be=_[2],Re=f[0],Fe=f[1],Me=f[2];return Math.abs(ae-Re)<EPSILON&&Math.abs(ge-Fe)<EPSILON&&Math.abs(he-Me)<EPSILON?identity$7(d):(J=ae-Re,K=ge-Fe,oe=he-Me,se=1/Math.hypot(J,K,oe),J*=se,K*=se,oe*=se,S=pe*oe-be*K,T=be*J-Be*oe,F=Be*K-pe*J,se=Math.hypot(S,T,F),se?(se=1/se,S*=se,T*=se,F*=se):(S=0,T=0,F=0),M=K*F-oe*T,P=oe*S-J*F,H=J*T-K*S,se=Math.hypot(M,P,H),se?(se=1/se,M*=se,P*=se,H*=se):(M=0,P=0,H=0),d[0]=S,d[1]=M,d[2]=J,d[3]=0,d[4]=T,d[5]=P,d[6]=K,d[7]=0,d[8]=F,d[9]=H,d[10]=oe,d[11]=0,d[12]=-(S*ae+T*ge+F*he),d[13]=-(M*ae+P*ge+H*he),d[14]=-(J*ae+K*ge+oe*he),d[15]=1,d)}function equals(d,s){var f=d[0],_=d[1],S=d[2],T=d[3],F=d[4],M=d[5],P=d[6],H=d[7],J=d[8],K=d[9],oe=d[10],se=d[11],ae=d[12],ge=d[13],he=d[14],Be=d[15],pe=s[0],be=s[1],Re=s[2],Fe=s[3],Me=s[4],ve=s[5],At=s[6],Ct=s[7],Rt=s[8],It=s[9],xt=s[10],wt=s[11],Ft=s[12],jt=s[13],ta=s[14],Qn=s[15];return Math.abs(f-pe)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(pe))&&Math.abs(_-be)<=EPSILON*Math.max(1,Math.abs(_),Math.abs(be))&&Math.abs(S-Re)<=EPSILON*Math.max(1,Math.abs(S),Math.abs(Re))&&Math.abs(T-Fe)<=EPSILON*Math.max(1,Math.abs(T),Math.abs(Fe))&&Math.abs(F-Me)<=EPSILON*Math.max(1,Math.abs(F),Math.abs(Me))&&Math.abs(M-ve)<=EPSILON*Math.max(1,Math.abs(M),Math.abs(ve))&&Math.abs(P-At)<=EPSILON*Math.max(1,Math.abs(P),Math.abs(At))&&Math.abs(H-Ct)<=EPSILON*Math.max(1,Math.abs(H),Math.abs(Ct))&&Math.abs(J-Rt)<=EPSILON*Math.max(1,Math.abs(J),Math.abs(Rt))&&Math.abs(K-It)<=EPSILON*Math.max(1,Math.abs(K),Math.abs(It))&&Math.abs(oe-xt)<=EPSILON*Math.max(1,Math.abs(oe),Math.abs(xt))&&Math.abs(se-wt)<=EPSILON*Math.max(1,Math.abs(se),Math.abs(wt))&&Math.abs(ae-Ft)<=EPSILON*Math.max(1,Math.abs(ae),Math.abs(Ft))&&Math.abs(ge-jt)<=EPSILON*Math.max(1,Math.abs(ge),Math.abs(jt))&&Math.abs(he-ta)<=EPSILON*Math.max(1,Math.abs(he),Math.abs(ta))&&Math.abs(Be-Qn)<=EPSILON*Math.max(1,Math.abs(Be),Math.abs(Qn))}function create$3(){var d=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d}function add$3(d,s,f){return d[0]=s[0]+f[0],d[1]=s[1]+f[1],d[2]=s[2]+f[2],d}function multiply(d,s,f){return d[0]=s[0]*f[0],d[1]=s[1]*f[1],d[2]=s[2]*f[2],d}function negate$1(d,s){return d[0]=-s[0],d[1]=-s[1],d[2]=-s[2],d}var mul=multiply;(function(){var d=create$3();return function(s,f,_,S,T,F){var M,P;for(f||(f=3),_||(_=0),S?P=Math.min(S*f+_,s.length):P=s.length,M=_;M<P;M+=f)d[0]=s[M],d[1]=s[M+1],d[2]=s[M+2],T(d,d,F),s[M]=d[0],s[M+1]=d[1],s[M+2]=d[2];return s}})();function create$2(){var d=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0),d}function scale$1(d,s,f){return d[0]=s[0]*f,d[1]=s[1]*f,d[2]=s[2]*f,d[3]=s[3]*f,d}function transformMat4(d,s,f){var _=s[0],S=s[1],T=s[2],F=s[3];return d[0]=f[0]*_+f[4]*S+f[8]*T+f[12]*F,d[1]=f[1]*_+f[5]*S+f[9]*T+f[13]*F,d[2]=f[2]*_+f[6]*S+f[10]*T+f[14]*F,d[3]=f[3]*_+f[7]*S+f[11]*T+f[15]*F,d}(function(){var d=create$2();return function(s,f,_,S,T,F){var M,P;for(f||(f=4),_||(_=0),S?P=Math.min(S*f+_,s.length):P=s.length,M=_;M<P;M+=f)d[0]=s[M],d[1]=s[M+1],d[2]=s[M+2],d[3]=s[M+3],T(d,d,F),s[M]=d[0],s[M+1]=d[1],s[M+2]=d[2],s[M+3]=d[3];return s}})();function create$1(){var d=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(d[0]=0,d[1]=0),d}function add$2(d,s,f){return d[0]=s[0]+f[0],d[1]=s[1]+f[1],d}function negate(d,s){return d[0]=-s[0],d[1]=-s[1],d}function lerp(d,s,f,_){var S=s[0],T=s[1];return d[0]=S+_*(f[0]-S),d[1]=T+_*(f[1]-T),d}(function(){var d=create$1();return function(s,f,_,S,T,F){var M,P;for(f||(f=2),_||(_=0),S?P=Math.min(S*f+_,s.length):P=s.length,M=_;M<P;M+=f)d[0]=s[M],d[1]=s[M+1],T(d,d,F),s[M]=d[0],s[M+1]=d[1];return s}})();function damp(d){const s=d*.9;return Math.abs(s)<.1?0:s}function clamp$1(d,s,f){return Math.min(Math.max(d,s),f)}class Camera{constructor(s={}){this.cameraState={view:identity$7(new Float32Array(16)),projection:identity$7(new Float32Array(16)),center:s.center||[0,0,0],theta:s.theta||0,phi:s.phi||0,distance:Math.log(s.distance||1e3),eye:new Float32Array(3),up:new Float32Array(s.up||[0,1,0])},this.right=new Float32Array([1,0,0]),this.front=new Float32Array([0,0,1]),this.minDistance=Math.log("minDistance"in s?s.minDistance:.5),this.maxDistance=Math.log("maxDistance"in s?s.maxDistance:1e14),this.dtheta=0,this.dphi=0,this.ddistance=0,this.updateCamera()}mouseChange(s,f){const _=Math.max(this.cameraState.distance,.5);this.dtheta+=_*s,this.dphi+=_*f,this.updateCamera()}getProjection(){return{projection:this.cameraState.projection,view:this.cameraState.view,distance:this.cameraState.distance,eye:this.cameraState.eye}}mouseWheel(s,f){this.ddistance+=f/window.innerHeight,this.updateCamera()}updateCamera(){const s=this.cameraState.center,f=this.cameraState.eye,_=this.cameraState.up;this.cameraState.theta+=this.dtheta,this.cameraState.phi=clamp$1(this.cameraState.phi+this.dphi,-Math.PI/2,Math.PI/2),this.cameraState.distance=clamp$1(this.cameraState.distance+this.ddistance,this.minDistance,this.maxDistance),this.dtheta=damp(this.dtheta),this.dphi=damp(this.dphi),this.ddistance=damp(this.ddistance);const S=this.cameraState.theta,T=this.cameraState.phi,F=Math.exp(this.cameraState.distance),M=F*Math.sin(S)*Math.cos(T),P=F*Math.cos(S)*Math.cos(T),H=F*Math.sin(T);for(let J=0;J<3;++J)f[J]=s[J]+M*this.front[J]+P*this.right[J]+H*_[J];lookAt(this.cameraState.view,f,s,_)}}class WGL2DI{constructor(s,f){f||(f={}),this.config=f,f.offset||(f.offset=[0,0,0,0]),this.mode=f.mode||"2d",this.movingImage=0,this.__doc__=document,this.config.brush=this.config.brush||"default",this.draw_options=f.draw_options?f.draw_options:{depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}},this.regl=null,this.pickbuffer=null,this.hideOnFilter=!0,this.pointOpacity=.8,this.pointRadius=10,this.isFiltered=!1,this.x_scale=1,this.y_scale=1,this.offset=[0,0],typeof s=="string"?this.div_container=document.getElementById(s):this.div_container=s,this._setUpDocument(f.width,f.height),this.handlers={object_clicked:{},object_over:{},object_out:{},brush_stopped:{},zoom_stopped:{},panning_stopped:{},pan_or_zoom:{}},this.draw_labels=!1,this.object_types=[],this.pointScale=0,this.circle_properties={x_pos:1,y_pos:1,color:1,pick_color:1,localFilter:1,globalFilter:1},this.circles={};for(const _ in this.circle_properties)this.circles[_]=[];this.circles.count=0,this.object_types.push({data:this.circles,properties:this.circle_properties,vertices:1,primitive:"points"}),this.line_properties={position:2,color:2,opacity:2},this.lines={};for(const _ in this.line_properties)this.lines[_]=[];this.lines.count=0,this.object_types.push({data:this.lines,properties:this.line_properties,vertices:2,primitive:"lines"}),this.image_properties={position:2,color:2,opacity:2},this.images={};for(const _ in this.image_properties)this.images[_]=[];this.images.count=0,this.images.props={x_y:[],w_h:[],text:[]},this.object_types.push({data:this.images,properties:this.image_properties,vertices:6,primitive:"triangles"}),this.mode==="3d"&&(this.circle_properties.z_pos=1,this.camera=new Camera({center:f.cameraCenter,distance:f.cameraDistance||500,theta:.75,phi:.5}),this.axisScales=[1,1,1]),this.square_properties={x_pos:1,y_pos:1,color:1,pick_color:1,localFilter:1,globalFilter:1},this.squares={};for(const _ in this.square_properties)this.squares[_]=[];this.squares.count=0,this.object_types.push({data:this.squares,properties:this.square_properties,vertices:1,primitive:"points"}),this.rectangle_properties={position:6,color:6,opacity:6},this.rects={};for(const _ in this.rectangle_properties)this.rects[_]=[];this.rects.count=0,this.object_types.push({data:this.rects,properties:this.rectangle_properties,vertices:6,primitive:"triangles"}),this.mouse_position=null,this.object_clicked=null,this.dragging=!1,this.object_mouse_over=null,this.zoom_amount=0,this.draw_order=this.mode==="3d"?[2,0,1,3,4]:[2,0,1,3,4],regl({onDone:(_,S)=>{this.regl=S,S._refresh(),this.pickbuffer=S.framebuffer({colorFormat:"rgba",height:this.height,width:this.width}),this._initDrawMethods(),this.mode==="3d"&&(this.object_types[0].method=this.__draw3DCircles,this.object_types[1].method=this.__draw3DLines),this._addHandlers()},canvas:this.canvas,attributes:{antialias:!1,preserveDrawingBuffer:!0,willReadFrequently:!0}})}setBackGroundColor(s){s=s||"",this.div_container.style.background=s}setCameraProperty(s,f){this.camera.cameraState[s]=f,this.camera.updateCamera()}_setUpDocument(s,f){if(this.config.brush&&(this.div_container.style.cursor="crosshair"),f)this.height=f,this.width=s,this.div_container.style.height=`${f}px`,this.div_container.style.width=`${s}px`;else{const S=this.div_container.getBoundingClientRect();this.height=f=Math.round(S.height),this.width=s=Math.round(S.width)}const _={height:f,width:s,styles:{position:"absolute",left:"0px",top:"0px"}};this.canvas=createEl("canvas",_),this.label_canvas=createEl("canvas",_),this.label_context=this.label_canvas.getContext("2d"),this.div_container.append(this.canvas),this.div_container.append(this.label_canvas)}colorPoints(s){const f=this.circles.count,_=this.circles.color;for(let S=0;S<f;S++){const T=s(S),F=S*3;_[F]=T[0],_[F+1]=T[1],_[F+2]=T[2]}if(this.highlightPoints){const S=this.highlightPoints;for(let T=0;T<S.length;T++){const F=S.indexes[T]*3,M=T*3;S.color[M]=this.circles.color[F],S.color[M+1]=this.circles.color[F+1],S.color[M+2]=this.circles.color[F+2]}}}remove(){this.pickbuffer.destroy(),this.regl.destroy(),this.canvas.remove(),this.label_canvas.remove()}setSize(s,f,_=null){if(this.height===f&&this.width===s)return;if(s=Math.round(s),f=Math.round(f),_){const T=_(s,f);this.x_scale=T[0]||this.x_scale,this.y_scale=T[1]||thisy_scale}else{const T=s/this.width,F=f/this.height;this.x_scale=this.x_scale*T,this.y_scale=this.y_scale*F}this.height=f,this.width=s,this.div_container.style.height=`${f}px`,this.div_container.style.width=`${s}px`,this.canvas.setAttribute("height",f),this.canvas.setAttribute("width",s),this.label_canvas.setAttribute("height",f),this.label_canvas.setAttribute("width",s);try{this.pickbuffer.destroy()}catch(T){console.error(`caught exception '${T}' when destroying buffer... suggest re-writing app in Rust.`)}this.pickbuffer=this.regl.framebuffer({colorFormat:"rgba",height:f,width:s});const S=this.regl.frame(()=>{});setTimeout(()=>{this.refresh(),S.cancel()},200)}_getMousePosition(s){const f=this.canvas.getBoundingClientRect();return[s.clientX-f.left,s.clientY-f.top]}_getActualPosition(s){const f=s[0]/this.x_scale-this.offset[0],_=s[1]/this.y_scale-this.offset[1];return[f,_]}_getCanvasCoords(s){const f=(s[0]+this.offset[0])*this.x_scale,_=(s[1]+this.offset[1])*this.y_scale;return[f,_]}getRange(){const s=this._getActualPosition([0,0]),f=this._getActualPosition([this.width,this.height]);return{x_range:[s[0],f[0]],y_range:[s[1],f[1]],offset:[this.offset[0],this.offset[1]],scale:[this.x_scale,this.y_scale]}}setHighlightPoints(s){if(s==null){this.highlightPoints=null;return}const f={x_pos:[],y_pos:[],color:[],length:s.length,indexes:s};this.mode==="3d"&&(f.z_pos=[]);for(const _ of s){f.x_pos.push(this.circles.x_pos[_]),f.y_pos.push(this.circles.y_pos[_]),this.mode==="3d"&&f.z_pos.push(this.circles.z_pos[_]);const S=_*3;f.color.push(this.circles.color[S]),f.color.push(this.circles.color[S+1]),f.color.push(this.circles.color[S+2])}this.highlightPoints=f}setPointRadius(s){(!s||Number.isNaN(s))&&(s=0),this.pointRadius=s}setFilter(s){this.isFiltered=s}setHideOnFilter(s){this.hideOnFilter=s}setPointOpacity(s){s=s>1?1:s,s=s<0?0:s,this.pointOpacity=s}getPointOpacity(){return this.pointOpacity}getPointRadius(){return this.pointRadius}addLine(s,f,_=[0,0,0],S=1){return this.lines.position=this.lines.position.concat(s,f),this.lines.color=this.lines.color.concat(_,_),this.lines.opacity=this.lines.opacity.concat([S,S]),this.lines.count++,this.lines.count-1}removeAllLines(){this.lines.position=[],this.lines.color=[],this.lines.opacity=[],this.lines.count=0}removeAllRectangles(){this.rects.position=[],this.rects.color=[],this.rects.opacity=[],this.rects.count=0}addRectangle(s,f,_,S=[0,0,0],T=1){this.rects.position.push(s),this.rects.position.push([s[0],s[1]+_]),this.rects.position.push([s[0]+f,s[1]+_]),this.rects.position.push([s[0]+f,s[1]+_]),this.rects.position.push([s[0]+f,s[1]]),this.rects.position.push([s[0],s[1]]);for(let M=0;M<6;M++)this.rects.opacity.push(T);const F=[S[0],S[1],S[2]];for(let M=0;M<6;M++)this.rects.color.push(F);return this.rects.count++,this.rects.count-1}changeImage(s,f,_){this.images.props.text[_]=this.regl.texture({data:s,min:"linear"}),this.resizeImage([f.width,f.height],_),this.setImagePosition(f.position[0],f.position[1],_)}changeImageOpacity(s,f){const _=s*6,S=_+6;for(let T=_;T<S;T++)this.images.opacity[T]=f}moveImage(s,f){const _=this.movingImage*6,S=_+6;for(let F=_;F<S;F++){const M=this.images.position[F];M[0]+=s,M[1]+=f}const T=this.images.props.x_y[this.movingImage];T[0]+=s,T[1]+=f}setImagePosition(s,f,_){const S=this.images.position,T=_*6,F=this.images.props.w_h[_][0],M=this.images.props.w_h[_][1];f=-f-M,this.images.props.x_y[_]=[s,f],S[T]=[s,f],S[T+1]=[s,f+M],S[T+2]=[s+F,f+M],S[T+3]=[s+F,f+M],S[T+4]=[s+F,f],S[T+5]=[s,f]}getImageDetails(s){const f=this.images.props.w_h[s],_=this.images.props.x_y[s];return{width:f[0],height:f[1],position:[_[0],_[1]],index:s}}resizeImage(s,f){const _=this.images.props.w_h[f],S=this.images.props.x_y[f];let T,F=null;Array.isArray(s)?(T=s[0],F=s[1],_[0]=T,_[1]=F):(T=_[0]*=s,F=_[1]*=s);const M=S[0],P=S[1];this.images.position[1]=[M,P+F],this.images.position[2]=[M+T,P+F],this.images.position[3]=[M+T,P+F],this.images.position[4]=[M+T,P]}addImage(s,f){const _=f,S=_.position[0];let T=-_.position[1];const F=_.height,M=_.width;T=T-F,this.images.position.length,this.images.position.push([S,T]),this.images.position.push([S,T+F]),this.images.position.push([S+M,T+F]),this.images.position.push([S+M,T+F]),this.images.position.push([S+M,T]),this.images.position.push([S,T]),this.image_position=[[-1,1],[-1,0],[0,0],[0,0],[0,1],[-1]];const P=_.opacity==null?1:_.opacity;for(let H=0;H<6;H++)this.images.color.push([1,1,1]),this.images.opacity.push(P);return this.images.count++,this.images.props.x_y.push([S,T]),this.images.props.w_h.push([M,F]),this.images.props.text.push(this.regl.texture({data:s,min:"linear"})),this.images.count-1}removeImages(){this.images.position=[],this.images.color=[],this.images.opacity=[],this.images.props.x_y=[],this.images.props.w_h=[],this.images.props.text=[],this.images.count=0}addSquares(s){this.squares.x_pos=s.x,this.squares.y_pos=s.y;const f=s.x.length;this.squares.localFilter=s.localFilter,this.squares.globalFilter=s.globalFilter,this.squares.pick_color=new Uint8Array(f*3),this.squares.color=s.colors;for(let _=0;_<f;_++){const S=_*3,T=this._getRGBFromIndex(_+1);this.squares.pick_color[S]=T[0],this.squares.pick_color[S+1]=T[1],this.squares.pick_color[S+2]=T[2]}this.squares.count=f}addCircles(s){this.circles.x_pos=s.x,this.circles.y_pos=s.y,this.mode==="3d"&&(this.circles.z_pos=s.z);const f=s.x.length;this.circles.localFilter=s.localFilter,this.circles.globalFilter=s.globalFilter,this.circles.pick_color=new Uint8Array(f*3),this.circles.color=new Uint8Array(f*3);for(let _=0;_<f;_++){const S=_*3,T=s.colorFunc(_)||[255,0,0];this.circles.color[S]=T[0],this.circles.color[S+1]=T[1],this.circles.color[S+2]=T[2];const F=this._getRGBFromIndex(_+1)||[255,0,0];this.circles.pick_color[S]=F[0],this.circles.pick_color[S+1]=F[1],this.circles.pick_color[S+2]=F[2]}this.circles.count=f}updateSize(s,f){this.circles.x_pos=f.x,this.circles.y_pos=f.y,this.mode==="3d"&&(this.circles.z_pos=f.z),this.circles.localFilter=f.localFilter,this.circles.globalFilter=f.globalFilter;const _=new Uint8Array(s*3),S=new Uint8Array(s*3);S.set(this.circles.color),_.set(this.circles.pick_color),this.circles.color=S,this.circles.pick_color=_;for(let T=this.circles.count;T<s;T++){const F=T*3,M=f.colorFunc(T);this.circles.color[F]=M[0],this.circles.color[F+1]=M[1],this.circles.color[F+2]=M[2];const P=this._getRGBFromIndex(T+1);this.circles.pick_color[F]=P[0],this.circles.pick_color[F+1]=P[1],this.circles.pick_color[F+2]=P[2]}this.circles.count=s}_getRGBFromIndex(s){const f=Math.floor(s/65536),_=s%65536,S=Math.floor(_/256);return[_%256,S,f]}_getIndexFromRGB(s){return s[2]*65536+s[1]*256+s[0]}_drawPickBuffer(){this.regl.clear({color:[0,0,0,0],depth:1,framebuffer:this.pickbuffer}),this._drawObjects(!0)}refresh(){this.regl.clear({color:[0,0,0,0],depth:1}),this._drawObjects(!1),this._drawPickBuffer(),this.label_context.font="30px Arial"}setCamera(s,f,_){if(this.mode!=="3d")return;const S=this.camera.cameraState;S.distance=Math.log(s),S.theta=f,S.phi=_,this.camera.updateCamera()}getCameraSettings(){if(this.mode!=="3d")return;const s=this.camera.cameraState;return{distance:Math.E**s.distance,theta:s.theta,phi:s.phi}}zoom(s){this.x_scale*=s,this.y_scale*=s,this._drawObjects(!1)}setFilterAction(s){s==="grey"?this.hideOnFilter=!1:this.hideOnFilter=!0}_drawObjects(s){let f=null;if(this.mode==="3d"){const _=this.camera.getProjection();f={cameraProjection:_.projection,cameraView:_.view,cameraDistance:_.distance,axisScales:this.axisScales,cameraEye:_.eye}}else f={x_scale:this.x_scale,y_scale:this.y_scale,offset:this.offset};f.point_scale=this.pointScale?(this.x_scale+this.y_scale)/2/this.pointScale:1,f.point_radius=this.pointRadius,f.is_filtered=this.isFiltered?1:0,f.point_opacity=this.pointOpacity,f.hide_on_filter=this.hideOnFilter?1:0;for(const _ of this.draw_order){const S=this.object_types[_];if(S.data.count){if(s){if(!S.properties.pick_color)continue;s=this.pickbuffer}else s=null;if(f.buffer=s,f.count=S.data.count*S.vertices,f.primitive=S.primitive,f.is_buffer=s?1:0,_===2){for(let T=0;T<S.data.count;T++){for(const F in S.properties)f[F]=S.data[F].slice(T*6,T*6+6);for(const F in this.images.props)f[F]=this.images.props[F][T];S.method(f)}continue}_===3&&(this.x_scale>=this.y_scale?(f.side_length=20*this.x_scale,f.bottom_clip=this.y_scale/this.x_scale,f.right_clip=1):(f.side_length=20*this.y_scale,f.right_clip=this.x_scale/this.y_scale,f.bottom_clip=1));for(const T in S.properties)if(s){if(T==="pick_color"){f.color=S.data[T];continue}if(T==="color")continue;f[T]=S.data[T]}else{if(T==="pick_color")continue;f[T]=S.data[T]}S.method(f)}}this.highlightPoints&&!s&&(f.x_pos=this.highlightPoints.x_pos,f.y_pos=this.highlightPoints.y_pos,f.color=this.highlightPoints.color,f.primitive="points",f.count=this.highlightPoints.length,this.mode==="3d"?(f.z_pos=this.highlightPoints.z_pos,this.__draw3DHighlights(f)):this.__drawHighlights(f))}getObjectsInRange(s,f,_,S){console.log(`${s},${f},${_},${S}`),s<0&&(_+=s,s=0),f<0&&(S+=f,f=0),s+_>this.width&&(_=this.width-s),f+S>this.height&&(S=this.height-f);const T=_*S*4,F=this.regl.read({x:s,y:this.height-f-S,width:_,height:S,framebuffer:this.pickbuffer}),M=new Set;for(let P=0;P<T;P+=4){const H=this._getIndexFromRGB([F[P],F[P+1],F[P+2]]);H!==null&&M.add(H-1)}return M}_getObjectAtPosition(s){if(!(s[1]<=0||s[0]<=0||s[0]>=this.width||s[1]>=this.height))try{const f=this.regl.read({x:s[0],y:this.height-s[1],width:1,height:1,framebuffer:this.pickbuffer});if(f[0]===0&&f[1]===0&&f[2]===0)return null;const _=this._getIndexFromRGB(f);return _>0?_-1:null}catch{return console.log(s),null}}addHandler(s,f,_){const S=this.handlers[s];if(!S)throw"Handler Not Supported";return _||(_=Object.keys(S).length),S[_]=f,_}removeHandler(s,f){const _=this.handlers[s];if(!_)throw"Handler Not Supported";_.name=void 0}_setUpBrush(s){const f=createEl("div",{classes:["wgl2di-brush"],styles:{top:`${s[1]}px`,left:`${s[0]}px`}},this.div_container);makeDraggable(f,{contain:!0,ondragstart:()=>this.brush_moving=!0,ondragend:()=>this._brushingStopped(),doc:this.__doc__}),this.brush={origin:s,div:f,resizing:!0}}_setUpPolyBrush(s){this.poly_brush={points:[s],active:!0};const f=this.label_context;f.strokeStyle=getComputedStyle(this.canvas).getPropertyValue("color"),f.beginPath(),f.moveTo(s[0],s[1])}_extendPolyBrush(s,f=15){var S;const _=this.label_context;if(this.poly_brush.points.length){const T=this.poly_brush.points[this.poly_brush.points.length-1],F=T[0]-s[0],M=T[1]-s[1];if(Math.sqrt(F**2+M**2)<f)return}_.lineTo(s[0],s[1]),_.stroke(),(S=this.poly_brush)==null||S.points.push(s)}_finishPolyBrush(){if(this.poly_brush.points.length<3){this.clearBrush();return}const s=this.label_context,f=this.poly_brush.points[0];s.lineTo(f[0],f[1]),s.stroke(),s.closePath(),s.fillStyle="lightgray",s.globalAlpha=.2,s.fill(),s.globalAlpha=1;const _=[];this.poly_brush.active=!1;for(const S of this.poly_brush.points)_.push(this._getActualPosition(S));for(const S in this.handlers.brush_stopped)setTimeout(()=>this.handlers.brush_stopped[S](_,!0),0)}clearBrush(){this.brush&&(this.brush.div.remove(),this.brush=null),this.poly_brush&&(this.label_context.clearRect(0,0,this.width,this.height),this.poly_brush=null)}_brushingStopped(){if(!this.brush)return;this.brush.resizing=!1;const s=this.brush.div,f=s.offsetTop,_=s.offsetLeft,S=s.offsetWidth,T=s.offsetHeight;if(S<2){this.clearBrush();return}if(this.mode==="3d"){const F=this.getObjectsInRange(_,f,S,T);for(const M in this.handlers.brush_stopped)this.handlers.brush_stopped[M](F)}else{const F=this._getActualPosition([_,f]),M=this._getActualPosition([_+S,f+T]),P={x_min:F[0],x_max:M[0],y_max:-F[1],y_min:-M[1]};for(const H in this.handlers.brush_stopped)this.handlers.brush_stopped[H](P)}}setGlobalFilter(s){this.circles.globalFilter=s}_finish(s){var f,_;if(this.config.brush&&(this.div_container.style.cursor="crosshair"),(f=this.brush)!=null&&f.resizing&&this._brushingStopped(),(_=this.poly_brush)!=null&&_.active&&this._finishPolyBrush(),this.object_clicked)this.object_clicked=null,this.refresh(!0);else{const S=this.getRange();this.loop&&(this.loop.cancel(),this.loop=null),S.imageMoved=this.imageMoved,this.imageMoved=null;for(const T in this.handlers.panning_stopped)this.handlers.panning_stopped[T](S)}this.dragging=!1,this.object_clicked=null,this.mouse_position=null}_addHandlers(){const s=_=>{var S;if(this.brush){if(this.brush.resizing){const T=this.brush.origin,F=this._getMousePosition(_),M=`${Math.round(T[0]<F[0]?T[0]:F[0])}px`,P=`${Math.round(T[1]<F[1]?T[1]:F[1])}px`,H=`${Math.abs(T[0]-F[0])}px`,J=`${Math.abs(T[1]-F[1])}px`;this.brush.div.style.top=P,this.brush.div.style.left=M,this.brush.div.style.width=H,this.brush.div.style.height=J;return}if(this.brush.moving){this.dragging=!1;return}}if((S=this.poly_brush)!=null&&S.active){const T=this._getMousePosition(_);this._extendPolyBrush(T)}if(this.mouse_position&&!this.dragging){const T=_.pageX-this.mouse_position[0],F=_.pageY-this.mouse_position[1];(Math.abs(T)>3||Math.abs(F)>3)&&(this.dragging=!0)}if(this.dragging){const T=_.pageX-this.mouse_position[0],F=_.pageY-this.mouse_position[1];if(this.mode==="3d")this.camera.mouseChange(T/this.width,F/this.height);else{const M=T/this.x_scale,P=F/this.y_scale;if(this.movingImage!=null&&_.ctrlKey&&this.images.count>0)this.moveImage(M,P),this.imageMoved=this.getImageDetails(this.movingImage);else if(this.offsets&&_.which===3)this.alterOffsets(M,P);else{this.config.lock_x_axis||(this.offset[0]+=M),this.offset[1]+=P;for(const H in this.handlers.pan_or_zoom)this.handlers.pan_or_zoom[H](this.offset,this.x_scale,this.y_scale)}}this.loop||(this.loop=this.regl.frame(()=>{this.regl.clear({color:[0,0,0,0],depth:1}),this._drawObjects(!1)})),this.mouse_position[1]=_.pageY,this.mouse_position[0]=_.pageX}};this.div_container.addEventListener("mousemove",_=>{if(this.dragging)return;const S=this._getMousePosition(_),T=this._getObjectAtPosition(S);if(T!=null&&this.object_mouse_over==null){for(const F in this.handlers.object_over)this.handlers.object_over[F](_,T);this.object_mouse_over=T}else if(T==null&&this.object_mouse_over){for(const F in this.handlers.object_out)this.handlers.object_out[F](_,this.object_mouse_over);this.object_mouse_over=null}else if(T!=null&&T!==this.object_mouse_over){for(const F in this.handlers.object_over)this.handlers.object_over[F](_,T);this.object_mouse_over=T}});const f=_=>{if(this.__doc__.removeEventListener("mousemove",s),this.__doc__.removeEventListener("mouseup",f),this._finish(_),!this.dragging&&!(this.brush||this.poly_brush)&&_.button===0){const S=this._getMousePosition(_),T=this._getObjectAtPosition(S),F=this._getActualPosition(S);if(T)for(const M in this.handlers.object_clicked)this.handlers.object_clicked[M](T,F)}};this.div_container.addEventListener("wheel",_=>{_.preventDefault();const S=this._getActualPosition(this._getMousePosition(_));let T=0;if(_.wheelDelta>0||_.detail<0?(this.zoom_amount+=.01,T=-30):(this.zoom_amount-=.01,T=30),this.mode==="3d")this.camera.mouseWheel(0,T);else if(this.movingImage!=null&&_.ctrlKey){this.resizeImage(1+this.zoom_amount,this.movingImage);const F=this._getActualPosition(this._getMousePosition(_));this.moveImage(F[0]-S[0],F[1]-S[1]),this.imageMoved=this.getImageDetails(this.movingImage)}else{this.config.lock_x_axis||(this.x_scale*=1+this.zoom_amount),this.config.lock_y_axis||(this.y_scale*=1+this.zoom_amount);const F=this._getActualPosition(this._getMousePosition(_));this.offset[0]+=F[0]-S[0],this.offset[1]+=F[1]-S[1];for(const M in this.handlers.pan_or_zoom)this.handlers.pan_or_zoom[M](this.offset,this.x_scale,this.y_scale)}this.loop||(this.label_context.clearRect(0,0,this.width,this.height),this.loop=this.regl.frame(()=>{this.regl.clear({color:[0,0,0,0],depth:1}),this._drawObjects(!1)})),clearTimeout(this._timer),this._timer=setTimeout(()=>{this.zoom_amount=0,this.loop.cancel(),this.loop=null,this._drawPickBuffer(!1),this.brush;const F=this.getRange();F.imageMoved=this.imageMoved,this.imageMoved=null;for(const M in this.handlers.zoom_stopped)this.handlers.zoom_stopped[M](F);this.refresh()},350)},{passive:!1}),this.div_container.addEventListener("mousedown",_=>{this.__doc__.addEventListener("mousemove",s),this.__doc__.addEventListener("mouseup",f),_.which;const S=_.shiftKey||_.ctrlKey||_.which===2||_.which===3;if(this.config.brush&&!S||!this.config.brush&&S){const T=this._getMousePosition(_);if(this.config.brush==="default"){if(_.target.classList.contains("wgl2di-brush"))return;this.brush&&this.clearBrush();const M=this._getMousePosition(_);this._setUpBrush(M);return}if(this.config.brush==="poly"){this.poly_brush&&this.clearBrush(),this._setUpPolyBrush(T);return}}_.otherKey&&(this.div_container.style.cursor="move"),this._getMousePosition(_),this.mouse_position=[_.pageX,_.pageY],this.clearBrush(),_.preventDefault()})}_initDrawMethods(){this.__drawCircles=this.regl({depth:this.draw_options.depth,blend:this.draw_options.blend,frag:`precision mediump float;
			varying vec3 fragColor;
			varying float op;
			varying float has_border;
			varying float grey_out;
			uniform float is_buffer;
			
			void main(){
			
				vec2 cxy = 2.0 * gl_PointCoord - 1.0;
                
				float r = dot(cxy, cxy);
				if (r > 1.0) {
					discard;
				}
				else{					
					if(r>0.60 && has_border==-1.0 && is_buffer==0.0 && grey_out==0.0){
					    gl_FragColor=vec4(0.1,0.1,0.1,1.0);
					}
					else{
						if (grey_out==1.0 && is_buffer==0.0){
							gl_FragColor = vec4(0.2,0.2,0.2,0.4);
						}
						else{
							gl_FragColor = vec4(fragColor,is_buffer==1.0?1.0:op);
						}
						
					}
				}
				
			}`,vert:`attribute float x_pos;
            attribute float y_pos;
			attribute vec3 color;
			attribute float lFilter;
			attribute float gFilter;
			varying vec3 fragColor;
			varying float op;
			varying float has_border;
			varying float grey_out;
			uniform float x_scale;
			uniform float y_scale;
			uniform vec2 offset;
			uniform float stage_height;
			uniform float stage_width;
			uniform float point_radius;
			uniform float is_filtered;
			uniform float point_opacity;
			uniform float hide_on_filter;
			uniform float point_scale;
			
			vec2 normalizeCoords(float posX, float posY){
				float x = (posX+offset[0])*x_scale;
				float y = (posY+offset[1])*y_scale;
				return vec2(2.0 * ((x / stage_width) - 0.5),-(2.0 * ((y / stage_height) - 0.5)));
			}
	
			void main() {
				float dd = 0.0;
				grey_out=0.0;
				if (lFilter==2.0){
					return;
				}
			    if (gFilter>0.0 && gFilter != lFilter) {
					if(hide_on_filter==1.0){
						return;
					}
					else{
						grey_out=1.0;
					}
				}
				
			
				float r=point_radius;
			
				gl_PointSize = r*point_scale;
				vec3 c = vec3(255.0,255.0,255.0);
				if (color==c){
					op=0.1;
					fragColor=vec3(0.1,0.1,0.1);
				}
				else{
					op=point_opacity;
					fragColor = color/255.0;
				}
			
				
				
				has_border=lFilter-is_filtered;
			
				
				vec2 real_position = normalizeCoords(x_pos,-y_pos);
				gl_Position = vec4(real_position, 0.0, 1.0);
			}
			`,attributes:{x_pos:this.regl.prop("x_pos"),y_pos:this.regl.prop("y_pos"),color:this.regl.prop("color"),lFilter:this.regl.prop("localFilter"),gFilter:this.regl.prop("globalFilter")},uniforms:{x_scale:this.regl.prop("x_scale"),y_scale:this.regl.prop("y_scale"),stage_width:this.regl.context("viewportWidth"),stage_height:this.regl.context("viewportHeight"),offset:this.regl.prop("offset"),point_radius:this.regl.prop("point_radius"),point_opacity:this.regl.prop("point_opacity"),is_filtered:this.regl.prop("is_filtered"),is_buffer:this.regl.prop("is_buffer"),hide_on_filter:this.regl.prop("hide_on_filter"),point_scale:this.regl.prop("point_scale")},count:this.regl.prop("count"),primitive:this.regl.prop("primitive"),framebuffer:this.regl.prop("buffer")}),this.__drawHighlights=this.regl({depth:this.draw_options.depth,blend:this.draw_options.blend,frag:`precision highp float;
			varying vec3 fragColor;
			
			void main(){

				vec2 cxy = 2.0 * gl_PointCoord - 1.0;
                
				float r = dot(cxy, cxy);
				if (r > 1.0) {
					discard;
				}
				else{					
					if(r>0.50) {
					    gl_FragColor=vec4(0.1,0.1,0.1,1.0);
					}
					else{
						gl_FragColor = vec4(fragColor,1);
					}
				}	
			}`,vert:`attribute float x_pos;
            attribute float y_pos;
			attribute vec3 color;
			uniform float point_radius;
			
			varying vec3 fragColor;
		
			uniform float x_scale;
			uniform float y_scale;
			uniform vec2 offset;
			uniform float stage_height;
			uniform float stage_width;
			uniform float point_scale;
			
			vec2 normalizeCoords(float posX, float posY){
				float x = (posX+offset[0])*x_scale;
				float y = (posY+offset[1])*y_scale;
				return vec2(2.0 * ((x / stage_width) - 0.5),-(2.0 * ((y / stage_height) - 0.5)));
			}
	
			void main() {
			
				float pr = point_radius*point_scale;
				pr = pr<10.0?10.0:pr;
				gl_PointSize = pr;
				fragColor = color/255.0;
					
				vec2 real_position = normalizeCoords(x_pos,-y_pos);
				gl_Position = vec4(real_position, 0.0, 1.0);
			}
			`,attributes:{x_pos:this.regl.prop("x_pos"),y_pos:this.regl.prop("y_pos"),color:this.regl.prop("color")},uniforms:{x_scale:this.regl.prop("x_scale"),y_scale:this.regl.prop("y_scale"),stage_width:this.regl.context("viewportWidth"),stage_height:this.regl.context("viewportHeight"),offset:this.regl.prop("offset"),point_radius:this.regl.prop("point_radius"),point_scale:this.regl.prop("point_scale")},count:this.regl.prop("count"),primitive:this.regl.prop("primitive")}),this.object_types[0].method=this.__drawCircles,this.__drawLines=this.regl({frag:`precision highp float;
						varying vec3 fragColor;
						void main () {
							 gl_FragColor = vec4(fragColor,1);
						}`,vert:`
						attribute vec2 position;
						attribute vec3 color;
						attribute float opacity;
						uniform float x_scale;
						uniform float y_scale;
						uniform vec2 offset;
						uniform float stage_height;
						uniform float stage_width;
						varying vec3 fragColor;
						//varying float op;
						vec2 normalizeCoords(vec2 position){	    
							float x = (position[0]+offset[0])*x_scale;
							float y = (position[1]+offset[1])*y_scale;
				            return vec2(2.0 * ((x / stage_width) - 0.5),-(2.0 * ((y / stage_height) - 0.5)));
						}
						void main () {
							if (opacity==0.0){
								return;
							}
							fragColor=color/255.0;
							vec2 norm_pos =normalizeCoords(position);
							gl_Position = vec4(norm_pos, 0.0, 1.0);
						}`,attributes:{position:this.regl.prop("position"),color:this.regl.prop("color"),opacity:this.regl.prop("opacity")},uniforms:{x_scale:this.regl.prop("x_scale"),y_scale:this.regl.prop("y_scale"),stage_height:this.regl.context("viewportHeight"),stage_width:this.regl.context("viewportWidth"),offset:this.regl.prop("offset")},primitive:this.regl.prop("primitive"),count:this.regl.prop("count")}),this.object_types[1].method=this.__drawLines,this.object_types[4].method=this.__drawLines,this.__drawImages=this.regl({frag:`
				precision mediump float;
				uniform sampler2D text;
				varying vec2 uv;
				varying vec3 fragColor;
				varying float op;
				void main () {
					gl_FragColor = vec4(fragColor,op)*texture2D(text, uv);							
				}`,vert:`
				precision mediump float;

				attribute vec2 position;
				attribute vec3 color;
				attribute float opacity;

				uniform vec2 x_y;
				uniform vec2 w_h;
				uniform float stage_height;
				uniform float stage_width;
				uniform float x_scale;
				uniform float y_scale;
				uniform vec2 offset;

				varying vec2 uv;
				varying vec3 fragColor;
				varying float op;
		
				
				vec2 normalizeCoords(vec2 pos){
					float x = (pos[0]+offset[0])*x_scale;
					float y = (pos[1]+offset[1])*y_scale;
					return vec2(2.0 * ((x / stage_width) - 0.5),-(2.0 * ((y / stage_height) - 0.5)));
				}

				void main () {
					if (opacity==0.0){
						return;
					}
					op=opacity;
					
					vec2 new_pos=normalizeCoords(position);
					fragColor = color;
				
					float x_factor = 1.0/(((w_h[0]*x_scale)/stage_width)*2.0);
					float y_factor = 1.0/(((w_h[1]*y_scale)/stage_height)*2.0);
					

					float x_offset=(((x_y[0]+offset[0])*x_scale)/stage_width)*2.0*x_factor;
					float y_offset=(((x_y[1]+offset[1])*y_scale)/stage_height)*2.0*y_factor;
					uv = vec2((new_pos[0]*x_factor)+x_factor-x_offset,-(new_pos[1]*y_factor)+y_factor-y_offset);
					gl_Position = vec4(new_pos, 0.0, 1.0);

				}`,attributes:{position:this.regl.prop("position"),color:this.regl.prop("color"),opacity:this.regl.prop("opacity")},uniforms:{stage_height:this.regl.context("viewportHeight"),stage_width:this.regl.context("viewportWidth"),w_h:this.regl.prop("w_h"),x_y:this.regl.prop("x_y"),text:this.regl.prop("text"),x_scale:this.regl.prop("x_scale"),y_scale:this.regl.prop("y_scale"),offset:this.regl.prop("offset")},count:this.regl.prop("count"),depth:this.draw_options.depth,blend:this.draw_options.blend}),this.object_types[2].method=this.__drawImages,this.__drawSquares=this.regl({frag:`
				precision highp float;
				varying vec3 fragColor;
				varying float r_clip;
				varying float b_clip;
				uniform int is_buffer;
				void main(){
					if (gl_PointCoord[1]<1.0-b_clip){
						discard;
					}
					if (gl_PointCoord[0]> r_clip){
						discard;
					}				
					gl_FragColor = vec4(fragColor,1);					
				}
				`,vert:` 
				attribute float x_pos;
				attribute float y_pos;			
				attribute vec3 color;
			
				varying float r_clip;
				varying float b_clip;
				varying vec3 fragColor;

				uniform float x_scale;
				uniform float y_scale;
				uniform vec2 offset;
				uniform float stage_height;
				uniform float stage_width;
				uniform float right_clip;
				uniform float bottom_clip;
				uniform float side_length;
				
				vec2 normalizeCoords(float posX,float posY){
					float x = (posX+offset[0])*x_scale;
					float y = (posY+offset[1])*y_scale;
					return vec2(2.0 * ((x / stage_width) - 0.5),-(2.0 * ((y / stage_height) - 0.5)));
				}
				void main() {
					gl_PointSize = side_length;
					fragColor = color/255.0;
					r_clip=right_clip;
					b_clip= bottom_clip;
					float y = y_pos;
					float x = x_pos;
					if (bottom_clip!=1.0){
						y-=10.0*(1.0/b_clip)-10.0;
					}
					if (r_clip!=1.0){
						x+=10.0*(1.0/r_clip)-10.0;
					}

					vec2 real_position = normalizeCoords(x,y);
				
					gl_Position = vec4(real_position, 0.0, 1.0);
				}
			`,attributes:{x_pos:this.regl.prop("x_pos"),y_pos:this.regl.prop("y_pos"),color:this.regl.prop("color")},uniforms:{x_scale:this.regl.prop("x_scale"),y_scale:this.regl.prop("y_scale"),stage_height:this.regl.context("viewportHeight"),stage_width:this.regl.context("viewportWidth"),offset:this.regl.prop("offset"),is_buffer:this.regl.prop("is_buffer"),right_clip:this.regl.prop("right_clip"),bottom_clip:this.regl.prop("bottom_clip"),side_length:this.regl.prop("side_length")},count:this.regl.prop("count"),primitive:this.regl.prop("primitive"),framebuffer:this.regl.prop("buffer")}),this.object_types[3].method=this.__drawSquares,this.__draw3DCircles=this.regl({frag:`
            precision highp float;
            varying vec3 fragColor;
			varying float op;
			varying float has_border;
			uniform float is_buffer;
			varying float grey_out;
            void main () {
			  float r = length(gl_PointCoord.xy - 0.4) ;
              if (r> 0.4) {
                discard;
              }
			  else{
				if(r>0.3 && has_border==-1.0 && is_buffer==0.0 && grey_out==0.0){
					gl_FragColor=vec4(0.1,0.1,0.1,1.0);
				}
				else{
					if (grey_out==1.0 && is_buffer==0.0){
						gl_FragColor = vec4(0.2,0.2,0.2,0.4);
					}
					else{
						gl_FragColor = vec4(fragColor,is_buffer==1.0?1.0:op);
					}
					
				}

			  }
             
            }
            `,vert:`
            precision highp float;

            attribute float x_pos;
            attribute float y_pos;
            attribute float z_pos;
            attribute vec3 color;
            attribute float lFilter;
            attribute float gFilter;
			
			uniform float time;
            uniform float cdistance;
            uniform mat4 view, projection;
			uniform vec3 eye;
			uniform float point_radius;
			uniform float point_opacity;
			uniform float is_buffer;
			uniform float is_filtered;
			uniform float hide_on_filter;
			uniform vec3 axis_scales;


            varying vec3 fragColor;
			varying float op;
			varying float has_border;
			varying float grey_out;

            void main () {
				grey_out=0.0; 
			    if (gFilter>0.0 && gFilter != lFilter) {
					if(hide_on_filter==1.0){
						return;
					}
					else{
						grey_out=1.0;
					}
				}
                vec3 position = vec3(-x_pos *axis_scales.x,y_pos*axis_scales.y,-z_pos*axis_scales.z);
                fragColor=color/255.0;
				op = is_buffer==1.0?1.0:point_opacity;
				has_border=lFilter-is_filtered;
               
				gl_PointSize = point_radius; //(distance(eye, position.xyz) /30.0);
                gl_Position = projection * view * vec4(2.0 * position, 1.0);
            }
            `,attributes:{x_pos:this.regl.prop("x_pos"),y_pos:this.regl.prop("y_pos"),z_pos:this.regl.prop("z_pos"),color:this.regl.prop("color"),lFilter:this.regl.prop("localFilter"),gFilter:this.regl.prop("globalFilter")},uniforms:{point_radius:this.regl.prop("point_radius"),point_opacity:this.regl.prop("point_opacity"),is_buffer:this.regl.prop("is_buffer"),view:this.regl.prop("cameraView"),cdistance:this.regl.prop("cameraDistance"),eye:this.regl.prop("cameraEye"),is_filtered:this.regl.prop("is_filtered"),hide_on_filter:this.regl.prop("hide_on_filter"),axis_scales:this.regl.prop("axisScales"),projection:(s,f)=>perspective(f.cameraProjection,Math.PI/4,s.viewportWidth/s.viewportHeight,1,1e5)},count:this.regl.prop("count"),framebuffer:this.regl.prop("buffer"),blend:this.draw_options.blend,primitive:"points"}),this.__draw3DHighlights=this.regl({frag:`
            precision mediump float;
            varying vec3 fragColor;
		
            void main () {
			  float r = length(gl_PointCoord.xy - 0.4) ;
              if (r> 0.4) {
                discard;
              }
			  else{
				if(r>0.3){
					gl_FragColor=vec4(0.1,0.1,0.1,1.0);
				}
				else{
					
						gl_FragColor = vec4(fragColor,1.0);
				}
					
			  }
             
            }
            `,vert:`
            precision mediump float;

            attribute float x_pos;
            attribute float y_pos;
            attribute float z_pos;
            attribute vec3 color;
			
			uniform float time;
    
            uniform mat4 view, projection;
			uniform vec3 eye;
			uniform float point_radius;
			uniform vec3 axis_scales;
		


            varying vec3 fragColor;
		

            void main () {
			
                vec3 position = vec3(-x_pos*axis_scales.x,y_pos*axis_scales.y,-z_pos*axis_scales.z);
                fragColor=color/255.0;
               
				gl_PointSize = point_radius*2.0; //(distance(eye, position.xyz) /30.0);
                gl_Position = projection * view * vec4(2.0 * position, 1.0);
            }
            `,attributes:{x_pos:this.regl.prop("x_pos"),y_pos:this.regl.prop("y_pos"),z_pos:this.regl.prop("z_pos"),color:this.regl.prop("color")},uniforms:{point_radius:this.regl.prop("point_radius"),view:this.regl.prop("cameraView"),cdistance:this.regl.prop("cameraDistance"),eye:this.regl.prop("cameraEye"),axis_scales:this.regl.prop("axisScales"),projection:(s,f)=>perspective(f.cameraProjection,Math.PI/4,s.viewportWidth/s.viewportHeight,1,1e5)},count:this.regl.prop("count"),blend:this.draw_options.blend,primitive:"points"}),this.__draw3DLines=this.regl({frag:` precision highp float;
                    varying vec3 fragColor;
                    void main () {
                         gl_FragColor = vec4(fragColor,1);
                    }
`,vert:`
                    attribute vec3 position;
                    attribute vec3 color;
                    uniform mat4 view, projection;
					uniform vec3 axis_scales;
    
                    varying vec3 fragColor;
                  
                    
                    void main () {
                     
                        fragColor=color;
                        gl_Position = projection * view * vec4(2.0 * position*axis_scales*vec3(-1.0,1.0,-1.0), 1.0);
                       
                       
                    }`,attributes:{position:this.regl.prop("position"),color:this.regl.prop("color")},uniforms:{view:this.regl.prop("cameraView"),axis_scales:this.regl.prop("axisScales"),projection:(s,f)=>perspective(f.cameraProjection,Math.PI/4,s.viewportWidth/s.viewportHeight,.01,1e5)},primitive:this.regl.prop("primitive"),framebuffer:this.regl.prop("buffer"),count:this.regl.prop("count"),depth:{enable:!1}})}}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(d){var s=d+="",f=s.indexOf(":");return f>=0&&(s=d.slice(0,f))!=="xmlns"&&(d=d.slice(f+1)),namespaces.hasOwnProperty(s)?{space:namespaces[s],local:d}:d}function creatorInherit(d){return function(){var s=this.ownerDocument,f=this.namespaceURI;return f===xhtml&&s.documentElement.namespaceURI===xhtml?s.createElement(d):s.createElementNS(f,d)}}function creatorFixed(d){return function(){return this.ownerDocument.createElementNS(d.space,d.local)}}function creator(d){var s=namespace(d);return(s.local?creatorFixed:creatorInherit)(s)}function none(){}function selector(d){return d==null?none:function(){return this.querySelector(d)}}function selection_select(d){typeof d!="function"&&(d=selector(d));for(var s=this._groups,f=s.length,_=new Array(f),S=0;S<f;++S)for(var T=s[S],F=T.length,M=_[S]=new Array(F),P,H,J=0;J<F;++J)(P=T[J])&&(H=d.call(P,P.__data__,J,T))&&("__data__"in P&&(H.__data__=P.__data__),M[J]=H);return new Selection$1(_,this._parents)}function array$1(d){return d==null?[]:Array.isArray(d)?d:Array.from(d)}function empty$1(){return[]}function selectorAll(d){return d==null?empty$1:function(){return this.querySelectorAll(d)}}function arrayAll(d){return function(){return array$1(d.apply(this,arguments))}}function selection_selectAll(d){typeof d=="function"?d=arrayAll(d):d=selectorAll(d);for(var s=this._groups,f=s.length,_=[],S=[],T=0;T<f;++T)for(var F=s[T],M=F.length,P,H=0;H<M;++H)(P=F[H])&&(_.push(d.call(P,P.__data__,H,F)),S.push(P));return new Selection$1(_,S)}function matcher(d){return function(){return this.matches(d)}}function childMatcher(d){return function(s){return s.matches(d)}}var find$2=Array.prototype.find;function childFind(d){return function(){return find$2.call(this.children,d)}}function childFirst(){return this.firstElementChild}function selection_selectChild(d){return this.select(d==null?childFirst:childFind(typeof d=="function"?d:childMatcher(d)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(d){return function(){return filter.call(this.children,d)}}function selection_selectChildren(d){return this.selectAll(d==null?children:childrenFilter(typeof d=="function"?d:childMatcher(d)))}function selection_filter(d){typeof d!="function"&&(d=matcher(d));for(var s=this._groups,f=s.length,_=new Array(f),S=0;S<f;++S)for(var T=s[S],F=T.length,M=_[S]=[],P,H=0;H<F;++H)(P=T[H])&&d.call(P,P.__data__,H,T)&&M.push(P);return new Selection$1(_,this._parents)}function sparse(d){return new Array(d.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(d,s){this.ownerDocument=d.ownerDocument,this.namespaceURI=d.namespaceURI,this._next=null,this._parent=d,this.__data__=s}EnterNode.prototype={constructor:EnterNode,appendChild:function(d){return this._parent.insertBefore(d,this._next)},insertBefore:function(d,s){return this._parent.insertBefore(d,s)},querySelector:function(d){return this._parent.querySelector(d)},querySelectorAll:function(d){return this._parent.querySelectorAll(d)}};function constant$7(d){return function(){return d}}function bindIndex(d,s,f,_,S,T){for(var F=0,M,P=s.length,H=T.length;F<H;++F)(M=s[F])?(M.__data__=T[F],_[F]=M):f[F]=new EnterNode(d,T[F]);for(;F<P;++F)(M=s[F])&&(S[F]=M)}function bindKey(d,s,f,_,S,T,F){var M,P,H=new Map,J=s.length,K=T.length,oe=new Array(J),se;for(M=0;M<J;++M)(P=s[M])&&(oe[M]=se=F.call(P,P.__data__,M,s)+"",H.has(se)?S[M]=P:H.set(se,P));for(M=0;M<K;++M)se=F.call(d,T[M],M,T)+"",(P=H.get(se))?(_[M]=P,P.__data__=T[M],H.delete(se)):f[M]=new EnterNode(d,T[M]);for(M=0;M<J;++M)(P=s[M])&&H.get(oe[M])===P&&(S[M]=P)}function datum(d){return d.__data__}function selection_data(d,s){if(!arguments.length)return Array.from(this,datum);var f=s?bindKey:bindIndex,_=this._parents,S=this._groups;typeof d!="function"&&(d=constant$7(d));for(var T=S.length,F=new Array(T),M=new Array(T),P=new Array(T),H=0;H<T;++H){var J=_[H],K=S[H],oe=K.length,se=arraylike(d.call(J,J&&J.__data__,H,_)),ae=se.length,ge=M[H]=new Array(ae),he=F[H]=new Array(ae),Be=P[H]=new Array(oe);f(J,K,ge,he,Be,se,s);for(var pe=0,be=0,Re,Fe;pe<ae;++pe)if(Re=ge[pe]){for(pe>=be&&(be=pe+1);!(Fe=he[be])&&++be<ae;);Re._next=Fe||null}}return F=new Selection$1(F,_),F._enter=M,F._exit=P,F}function arraylike(d){return typeof d=="object"&&"length"in d?d:Array.from(d)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(d,s,f){var _=this.enter(),S=this,T=this.exit();return typeof d=="function"?(_=d(_),_&&(_=_.selection())):_=_.append(d+""),s!=null&&(S=s(S),S&&(S=S.selection())),f==null?T.remove():f(T),_&&S?_.merge(S).order():S}function selection_merge(d){for(var s=d.selection?d.selection():d,f=this._groups,_=s._groups,S=f.length,T=_.length,F=Math.min(S,T),M=new Array(S),P=0;P<F;++P)for(var H=f[P],J=_[P],K=H.length,oe=M[P]=new Array(K),se,ae=0;ae<K;++ae)(se=H[ae]||J[ae])&&(oe[ae]=se);for(;P<S;++P)M[P]=f[P];return new Selection$1(M,this._parents)}function selection_order(){for(var d=this._groups,s=-1,f=d.length;++s<f;)for(var _=d[s],S=_.length-1,T=_[S],F;--S>=0;)(F=_[S])&&(T&&F.compareDocumentPosition(T)^4&&T.parentNode.insertBefore(F,T),T=F);return this}function selection_sort(d){d||(d=ascending$2);function s(K,oe){return K&&oe?d(K.__data__,oe.__data__):!K-!oe}for(var f=this._groups,_=f.length,S=new Array(_),T=0;T<_;++T){for(var F=f[T],M=F.length,P=S[T]=new Array(M),H,J=0;J<M;++J)(H=F[J])&&(P[J]=H);P.sort(s)}return new Selection$1(S,this._parents).order()}function ascending$2(d,s){return d<s?-1:d>s?1:d>=s?0:NaN}function selection_call(){var d=arguments[0];return arguments[0]=this,d.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var d=this._groups,s=0,f=d.length;s<f;++s)for(var _=d[s],S=0,T=_.length;S<T;++S){var F=_[S];if(F)return F}return null}function selection_size(){let d=0;for(const s of this)++d;return d}function selection_empty(){return!this.node()}function selection_each(d){for(var s=this._groups,f=0,_=s.length;f<_;++f)for(var S=s[f],T=0,F=S.length,M;T<F;++T)(M=S[T])&&d.call(M,M.__data__,T,S);return this}function attrRemove$1(d){return function(){this.removeAttribute(d)}}function attrRemoveNS$1(d){return function(){this.removeAttributeNS(d.space,d.local)}}function attrConstant$1(d,s){return function(){this.setAttribute(d,s)}}function attrConstantNS$1(d,s){return function(){this.setAttributeNS(d.space,d.local,s)}}function attrFunction$1(d,s){return function(){var f=s.apply(this,arguments);f==null?this.removeAttribute(d):this.setAttribute(d,f)}}function attrFunctionNS$1(d,s){return function(){var f=s.apply(this,arguments);f==null?this.removeAttributeNS(d.space,d.local):this.setAttributeNS(d.space,d.local,f)}}function selection_attr(d,s){var f=namespace(d);if(arguments.length<2){var _=this.node();return f.local?_.getAttributeNS(f.space,f.local):_.getAttribute(f)}return this.each((s==null?f.local?attrRemoveNS$1:attrRemove$1:typeof s=="function"?f.local?attrFunctionNS$1:attrFunction$1:f.local?attrConstantNS$1:attrConstant$1)(f,s))}function defaultView(d){return d.ownerDocument&&d.ownerDocument.defaultView||d.document&&d||d.defaultView}function styleRemove$1(d){return function(){this.style.removeProperty(d)}}function styleConstant$1(d,s,f){return function(){this.style.setProperty(d,s,f)}}function styleFunction$1(d,s,f){return function(){var _=s.apply(this,arguments);_==null?this.style.removeProperty(d):this.style.setProperty(d,_,f)}}function selection_style(d,s,f){return arguments.length>1?this.each((s==null?styleRemove$1:typeof s=="function"?styleFunction$1:styleConstant$1)(d,s,f??"")):styleValue(this.node(),d)}function styleValue(d,s){return d.style.getPropertyValue(s)||defaultView(d).getComputedStyle(d,null).getPropertyValue(s)}function propertyRemove(d){return function(){delete this[d]}}function propertyConstant(d,s){return function(){this[d]=s}}function propertyFunction(d,s){return function(){var f=s.apply(this,arguments);f==null?delete this[d]:this[d]=f}}function selection_property(d,s){return arguments.length>1?this.each((s==null?propertyRemove:typeof s=="function"?propertyFunction:propertyConstant)(d,s)):this.node()[d]}function classArray(d){return d.trim().split(/^|\s+/)}function classList(d){return d.classList||new ClassList(d)}function ClassList(d){this._node=d,this._names=classArray(d.getAttribute("class")||"")}ClassList.prototype={add:function(d){var s=this._names.indexOf(d);s<0&&(this._names.push(d),this._node.setAttribute("class",this._names.join(" ")))},remove:function(d){var s=this._names.indexOf(d);s>=0&&(this._names.splice(s,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(d){return this._names.indexOf(d)>=0}};function classedAdd(d,s){for(var f=classList(d),_=-1,S=s.length;++_<S;)f.add(s[_])}function classedRemove(d,s){for(var f=classList(d),_=-1,S=s.length;++_<S;)f.remove(s[_])}function classedTrue(d){return function(){classedAdd(this,d)}}function classedFalse(d){return function(){classedRemove(this,d)}}function classedFunction(d,s){return function(){(s.apply(this,arguments)?classedAdd:classedRemove)(this,d)}}function selection_classed(d,s){var f=classArray(d+"");if(arguments.length<2){for(var _=classList(this.node()),S=-1,T=f.length;++S<T;)if(!_.contains(f[S]))return!1;return!0}return this.each((typeof s=="function"?classedFunction:s?classedTrue:classedFalse)(f,s))}function textRemove(){this.textContent=""}function textConstant$1(d){return function(){this.textContent=d}}function textFunction$1(d){return function(){var s=d.apply(this,arguments);this.textContent=s??""}}function selection_text(d){return arguments.length?this.each(d==null?textRemove:(typeof d=="function"?textFunction$1:textConstant$1)(d)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(d){return function(){this.innerHTML=d}}function htmlFunction(d){return function(){var s=d.apply(this,arguments);this.innerHTML=s??""}}function selection_html(d){return arguments.length?this.each(d==null?htmlRemove:(typeof d=="function"?htmlFunction:htmlConstant)(d)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(d){var s=typeof d=="function"?d:creator(d);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}function constantNull(){return null}function selection_insert(d,s){var f=typeof d=="function"?d:creator(d),_=s==null?constantNull:typeof s=="function"?s:selector(s);return this.select(function(){return this.insertBefore(f.apply(this,arguments),_.apply(this,arguments)||null)})}function remove(){var d=this.parentNode;d&&d.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var d=this.cloneNode(!1),s=this.parentNode;return s?s.insertBefore(d,this.nextSibling):d}function selection_cloneDeep(){var d=this.cloneNode(!0),s=this.parentNode;return s?s.insertBefore(d,this.nextSibling):d}function selection_clone(d){return this.select(d?selection_cloneDeep:selection_cloneShallow)}function selection_datum(d){return arguments.length?this.property("__data__",d):this.node().__data__}function contextListener(d){return function(s){d.call(this,s,this.__data__)}}function parseTypenames$1(d){return d.trim().split(/^|\s+/).map(function(s){var f="",_=s.indexOf(".");return _>=0&&(f=s.slice(_+1),s=s.slice(0,_)),{type:s,name:f}})}function onRemove(d){return function(){var s=this.__on;if(s){for(var f=0,_=-1,S=s.length,T;f<S;++f)T=s[f],(!d.type||T.type===d.type)&&T.name===d.name?this.removeEventListener(T.type,T.listener,T.options):s[++_]=T;++_?s.length=_:delete this.__on}}}function onAdd(d,s,f){return function(){var _=this.__on,S,T=contextListener(s);if(_){for(var F=0,M=_.length;F<M;++F)if((S=_[F]).type===d.type&&S.name===d.name){this.removeEventListener(S.type,S.listener,S.options),this.addEventListener(S.type,S.listener=T,S.options=f),S.value=s;return}}this.addEventListener(d.type,T,f),S={type:d.type,name:d.name,value:s,listener:T,options:f},_?_.push(S):this.__on=[S]}}function selection_on(d,s,f){var _=parseTypenames$1(d+""),S,T=_.length,F;if(arguments.length<2){var M=this.node().__on;if(M){for(var P=0,H=M.length,J;P<H;++P)for(S=0,J=M[P];S<T;++S)if((F=_[S]).type===J.type&&F.name===J.name)return J.value}return}for(M=s?onAdd:onRemove,S=0;S<T;++S)this.each(M(_[S],s,f));return this}function dispatchEvent(d,s,f){var _=defaultView(d),S=_.CustomEvent;typeof S=="function"?S=new S(s,f):(S=_.document.createEvent("Event"),f?(S.initEvent(s,f.bubbles,f.cancelable),S.detail=f.detail):S.initEvent(s,!1,!1)),d.dispatchEvent(S)}function dispatchConstant(d,s){return function(){return dispatchEvent(this,d,s)}}function dispatchFunction(d,s){return function(){return dispatchEvent(this,d,s.apply(this,arguments))}}function selection_dispatch(d,s){return this.each((typeof s=="function"?dispatchFunction:dispatchConstant)(d,s))}function*selection_iterator(){for(var d=this._groups,s=0,f=d.length;s<f;++s)for(var _=d[s],S=0,T=_.length,F;S<T;++S)(F=_[S])&&(yield F)}var root$2=[null];function Selection$1(d,s){this._groups=d,this._parents=s}function selection(){return new Selection$1([[document.documentElement]],root$2)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(d){return typeof d=="string"?new Selection$1([[document.querySelector(d)]],[document.documentElement]):new Selection$1([[d]],root$2)}function sourceEvent(d){let s;for(;s=d.sourceEvent;)d=s;return d}function pointer(d,s){if(d=sourceEvent(d),s===void 0&&(s=d.currentTarget),s){var f=s.ownerSVGElement||s;if(f.createSVGPoint){var _=f.createSVGPoint();return _.x=d.clientX,_.y=d.clientY,_=_.matrixTransform(s.getScreenCTM().inverse()),[_.x,_.y]}if(s.getBoundingClientRect){var S=s.getBoundingClientRect();return[d.clientX-S.left-s.clientLeft,d.clientY-S.top-s.clientTop]}}return[d.pageX,d.pageY]}function ascending$1(d,s){return d==null||s==null?NaN:d<s?-1:d>s?1:d>=s?0:NaN}function descending$1(d,s){return d==null||s==null?NaN:s<d?-1:s>d?1:s>=d?0:NaN}function bisector$1(d){let s,f,_;d.length!==2?(s=ascending$1,f=(M,P)=>ascending$1(d(M),P),_=(M,P)=>d(M)-P):(s=d===ascending$1||d===descending$1?d:zero$1,f=d,_=d);function S(M,P,H=0,J=M.length){if(H<J){if(s(P,P)!==0)return J;do{const K=H+J>>>1;f(M[K],P)<0?H=K+1:J=K}while(H<J)}return H}function T(M,P,H=0,J=M.length){if(H<J){if(s(P,P)!==0)return J;do{const K=H+J>>>1;f(M[K],P)<=0?H=K+1:J=K}while(H<J)}return H}function F(M,P,H=0,J=M.length){const K=S(M,P,H,J-1);return K>H&&_(M[K-1],P)>-_(M[K],P)?K-1:K}return{left:S,center:F,right:T}}function zero$1(){return 0}function number$2(d){return d===null?NaN:+d}const ascendingBisect=bisector$1(ascending$1),bisectRight=ascendingBisect.right;bisector$1(number$2).center;let Adder$1=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(s){const f=this._partials;let _=0;for(let S=0;S<this._n&&S<32;S++){const T=f[S],F=s+T,M=Math.abs(s)<Math.abs(T)?s-(F-T):T-(F-s);M&&(f[_++]=M),s=F}return f[_]=s,this._n=_+1,this}valueOf(){const s=this._partials;let f=this._n,_,S,T,F=0;if(f>0){for(F=s[--f];f>0&&(_=F,S=s[--f],F=_+S,T=S-(F-_),!T););f>0&&(T<0&&s[f-1]<0||T>0&&s[f-1]>0)&&(S=T*2,_=F+S,S==_-F&&(F=_))}return F}};class InternMap extends Map{constructor(s,f=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:f}}),s!=null)for(const[_,S]of s)this.set(_,S)}get(s){return super.get(intern_get(this,s))}has(s){return super.has(intern_get(this,s))}set(s,f){return super.set(intern_set(this,s),f)}delete(s){return super.delete(intern_delete(this,s))}}function intern_get({_intern:d,_key:s},f){const _=s(f);return d.has(_)?d.get(_):f}function intern_set({_intern:d,_key:s},f){const _=s(f);return d.has(_)?d.get(_):(d.set(_,f),f)}function intern_delete({_intern:d,_key:s},f){const _=s(f);return d.has(_)&&(f=d.get(_),d.delete(_)),f}function keyof(d){return d!==null&&typeof d=="object"?d.valueOf():d}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(d,s,f){const _=(s-d)/Math.max(0,f),S=Math.floor(Math.log10(_)),T=_/Math.pow(10,S),F=T>=e10?10:T>=e5?5:T>=e2?2:1;let M,P,H;return S<0?(H=Math.pow(10,-S)/F,M=Math.round(d*H),P=Math.round(s*H),M/H<d&&++M,P/H>s&&--P,H=-H):(H=Math.pow(10,S)*F,M=Math.round(d/H),P=Math.round(s/H),M*H<d&&++M,P*H>s&&--P),P<M&&.5<=f&&f<2?tickSpec(d,s,f*2):[M,P,H]}function ticks(d,s,f){if(s=+s,d=+d,f=+f,!(f>0))return[];if(d===s)return[d];const _=s<d,[S,T,F]=_?tickSpec(s,d,f):tickSpec(d,s,f);if(!(T>=S))return[];const M=T-S+1,P=new Array(M);if(_)if(F<0)for(let H=0;H<M;++H)P[H]=(T-H)/-F;else for(let H=0;H<M;++H)P[H]=(T-H)*F;else if(F<0)for(let H=0;H<M;++H)P[H]=(S+H)/-F;else for(let H=0;H<M;++H)P[H]=(S+H)*F;return P}function tickIncrement(d,s,f){return s=+s,d=+d,f=+f,tickSpec(d,s,f)[2]}function tickStep(d,s,f){s=+s,d=+d,f=+f;const _=s<d,S=_?tickIncrement(s,d,f):tickIncrement(d,s,f);return(_?-1:1)*(S<0?1/-S:S)}function max$3(d,s){let f;if(s===void 0)for(const _ of d)_!=null&&(f<_||f===void 0&&_>=_)&&(f=_);else{let _=-1;for(let S of d)(S=s(S,++_,d))!=null&&(f<S||f===void 0&&S>=S)&&(f=S)}return f}function quantileSorted(d,s,f=number$2){if(!(!(_=d.length)||isNaN(s=+s))){if(s<=0||_<2)return+f(d[0],0,d);if(s>=1)return+f(d[_-1],_-1,d);var _,S=(_-1)*s,T=Math.floor(S),F=+f(d[T],T,d),M=+f(d[T+1],T+1,d);return F+(M-F)*(S-T)}}function range$1(d,s,f){d=+d,s=+s,f=(S=arguments.length)<2?(s=d,d=0,1):S<3?1:+f;for(var _=-1,S=Math.max(0,Math.ceil((s-d)/f))|0,T=new Array(S);++_<S;)T[_]=d+_*f;return T}function initRange(d,s){switch(arguments.length){case 0:break;case 1:this.range(d);break;default:this.range(s).domain(d);break}return this}const implicit=Symbol("implicit");function ordinal(){var d=new InternMap,s=[],f=[],_=implicit;function S(T){let F=d.get(T);if(F===void 0){if(_!==implicit)return _;d.set(T,F=s.push(T)-1)}return f[F%f.length]}return S.domain=function(T){if(!arguments.length)return s.slice();s=[],d=new InternMap;for(const F of T)d.has(F)||d.set(F,s.push(F)-1);return S},S.range=function(T){return arguments.length?(f=Array.from(T),S):f.slice()},S.unknown=function(T){return arguments.length?(_=T,S):_},S.copy=function(){return ordinal(s,f).unknown(_)},initRange.apply(S,arguments),S}function band(){var d=ordinal().unknown(void 0),s=d.domain,f=d.range,_=0,S=1,T,F,M=!1,P=0,H=0,J=.5;delete d.unknown;function K(){var oe=s().length,se=S<_,ae=se?S:_,ge=se?_:S;T=(ge-ae)/Math.max(1,oe-P+H*2),M&&(T=Math.floor(T)),ae+=(ge-ae-T*(oe-P))*J,F=T*(1-P),M&&(ae=Math.round(ae),F=Math.round(F));var he=range$1(oe).map(function(Be){return ae+T*Be});return f(se?he.reverse():he)}return d.domain=function(oe){return arguments.length?(s(oe),K()):s()},d.range=function(oe){return arguments.length?([_,S]=oe,_=+_,S=+S,K()):[_,S]},d.rangeRound=function(oe){return[_,S]=oe,_=+_,S=+S,M=!0,K()},d.bandwidth=function(){return F},d.step=function(){return T},d.round=function(oe){return arguments.length?(M=!!oe,K()):M},d.padding=function(oe){return arguments.length?(P=Math.min(1,H=+oe),K()):P},d.paddingInner=function(oe){return arguments.length?(P=Math.min(1,oe),K()):P},d.paddingOuter=function(oe){return arguments.length?(H=+oe,K()):H},d.align=function(oe){return arguments.length?(J=Math.max(0,Math.min(1,oe)),K()):J},d.copy=function(){return band(s(),[_,S]).round(M).paddingInner(P).paddingOuter(H).align(J)},initRange.apply(K(),arguments)}function define(d,s,f){d.prototype=s.prototype=f,f.constructor=d}function extend$1(d,s){var f=Object.create(d.prototype);for(var _ in s)f[_]=s[_];return f}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(d){return Object.assign(new this.constructor,this,d)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(d){var s,f;return d=(d+"").trim().toLowerCase(),(s=reHex.exec(d))?(f=s[1].length,s=parseInt(s[1],16),f===6?rgbn(s):f===3?new Rgb(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):f===8?rgba(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):f===4?rgba(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=reRgbInteger.exec(d))?new Rgb(s[1],s[2],s[3],1):(s=reRgbPercent.exec(d))?new Rgb(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=reRgbaInteger.exec(d))?rgba(s[1],s[2],s[3],s[4]):(s=reRgbaPercent.exec(d))?rgba(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=reHslPercent.exec(d))?hsla(s[1],s[2]/100,s[3]/100,1):(s=reHslaPercent.exec(d))?hsla(s[1],s[2]/100,s[3]/100,s[4]):named.hasOwnProperty(d)?rgbn(named[d]):d==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(d){return new Rgb(d>>16&255,d>>8&255,d&255,1)}function rgba(d,s,f,_){return _<=0&&(d=s=f=NaN),new Rgb(d,s,f,_)}function rgbConvert(d){return d instanceof Color||(d=color(d)),d?(d=d.rgb(),new Rgb(d.r,d.g,d.b,d.opacity)):new Rgb}function rgb$1(d,s,f,_){return arguments.length===1?rgbConvert(d):new Rgb(d,s,f,_??1)}function Rgb(d,s,f,_){this.r=+d,this.g=+s,this.b=+f,this.opacity=+_}define(Rgb,rgb$1,extend$1(Color,{brighter(d){return d=d==null?brighter:Math.pow(brighter,d),new Rgb(this.r*d,this.g*d,this.b*d,this.opacity)},darker(d){return d=d==null?darker:Math.pow(darker,d),new Rgb(this.r*d,this.g*d,this.b*d,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const d=clampa(this.opacity);return`${d===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${d===1?")":`, ${d})`}`}function clampa(d){return isNaN(d)?1:Math.max(0,Math.min(1,d))}function clampi(d){return Math.max(0,Math.min(255,Math.round(d)||0))}function hex(d){return d=clampi(d),(d<16?"0":"")+d.toString(16)}function hsla(d,s,f,_){return _<=0?d=s=f=NaN:f<=0||f>=1?d=s=NaN:s<=0&&(d=NaN),new Hsl(d,s,f,_)}function hslConvert(d){if(d instanceof Hsl)return new Hsl(d.h,d.s,d.l,d.opacity);if(d instanceof Color||(d=color(d)),!d)return new Hsl;if(d instanceof Hsl)return d;d=d.rgb();var s=d.r/255,f=d.g/255,_=d.b/255,S=Math.min(s,f,_),T=Math.max(s,f,_),F=NaN,M=T-S,P=(T+S)/2;return M?(s===T?F=(f-_)/M+(f<_)*6:f===T?F=(_-s)/M+2:F=(s-f)/M+4,M/=P<.5?T+S:2-T-S,F*=60):M=P>0&&P<1?0:F,new Hsl(F,M,P,d.opacity)}function hsl(d,s,f,_){return arguments.length===1?hslConvert(d):new Hsl(d,s,f,_??1)}function Hsl(d,s,f,_){this.h=+d,this.s=+s,this.l=+f,this.opacity=+_}define(Hsl,hsl,extend$1(Color,{brighter(d){return d=d==null?brighter:Math.pow(brighter,d),new Hsl(this.h,this.s,this.l*d,this.opacity)},darker(d){return d=d==null?darker:Math.pow(darker,d),new Hsl(this.h,this.s,this.l*d,this.opacity)},rgb(){var d=this.h%360+(this.h<0)*360,s=isNaN(d)||isNaN(this.s)?0:this.s,f=this.l,_=f+(f<.5?f:1-f)*s,S=2*f-_;return new Rgb(hsl2rgb(d>=240?d-240:d+120,S,_),hsl2rgb(d,S,_),hsl2rgb(d<120?d+240:d-120,S,_),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const d=clampa(this.opacity);return`${d===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${d===1?")":`, ${d})`}`}}));function clamph(d){return d=(d||0)%360,d<0?d+360:d}function clampt(d){return Math.max(0,Math.min(1,d||0))}function hsl2rgb(d,s,f){return(d<60?s+(f-s)*d/60:d<180?f:d<240?s+(f-s)*(240-d)/60:s)*255}function basis(d,s,f,_,S){var T=d*d,F=T*d;return((1-3*d+3*T-F)*s+(4-6*T+3*F)*f+(1+3*d+3*T-3*F)*_+F*S)/6}function basis$1(d){var s=d.length-1;return function(f){var _=f<=0?f=0:f>=1?(f=1,s-1):Math.floor(f*s),S=d[_],T=d[_+1],F=_>0?d[_-1]:2*S-T,M=_<s-1?d[_+2]:2*T-S;return basis((f-_/s)*s,F,S,T,M)}}const constant$6=d=>()=>d;function linear$2(d,s){return function(f){return d+f*s}}function exponential(d,s,f){return d=Math.pow(d,f),s=Math.pow(s,f)-d,f=1/f,function(_){return Math.pow(d+_*s,f)}}function gamma(d){return(d=+d)==1?nogamma:function(s,f){return f-s?exponential(s,f,d):constant$6(isNaN(s)?f:s)}}function nogamma(d,s){var f=s-d;return f?linear$2(d,f):constant$6(isNaN(d)?s:d)}const interpolateRgb=function d(s){var f=gamma(s);function _(S,T){var F=f((S=rgb$1(S)).r,(T=rgb$1(T)).r),M=f(S.g,T.g),P=f(S.b,T.b),H=nogamma(S.opacity,T.opacity);return function(J){return S.r=F(J),S.g=M(J),S.b=P(J),S.opacity=H(J),S+""}}return _.gamma=d,_}(1);function rgbSpline(d){return function(s){var f=s.length,_=new Array(f),S=new Array(f),T=new Array(f),F,M;for(F=0;F<f;++F)M=rgb$1(s[F]),_[F]=M.r||0,S[F]=M.g||0,T[F]=M.b||0;return _=d(_),S=d(S),T=d(T),M.opacity=1,function(P){return M.r=_(P),M.g=S(P),M.b=T(P),M+""}}}var rgbBasis=rgbSpline(basis$1);function numberArray(d,s){s||(s=[]);var f=d?Math.min(s.length,d.length):0,_=s.slice(),S;return function(T){for(S=0;S<f;++S)_[S]=d[S]*(1-T)+s[S]*T;return _}}function isNumberArray(d){return ArrayBuffer.isView(d)&&!(d instanceof DataView)}function genericArray(d,s){var f=s?s.length:0,_=d?Math.min(f,d.length):0,S=new Array(_),T=new Array(f),F;for(F=0;F<_;++F)S[F]=interpolate$1(d[F],s[F]);for(;F<f;++F)T[F]=s[F];return function(M){for(F=0;F<_;++F)T[F]=S[F](M);return T}}function date(d,s){var f=new Date;return d=+d,s=+s,function(_){return f.setTime(d*(1-_)+s*_),f}}function interpolateNumber(d,s){return d=+d,s=+s,function(f){return d*(1-f)+s*f}}function object(d,s){var f={},_={},S;(d===null||typeof d!="object")&&(d={}),(s===null||typeof s!="object")&&(s={});for(S in s)S in d?f[S]=interpolate$1(d[S],s[S]):_[S]=s[S];return function(T){for(S in f)_[S]=f[S](T);return _}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(d){return function(){return d}}function one(d){return function(s){return d(s)+""}}function interpolateString(d,s){var f=reA.lastIndex=reB.lastIndex=0,_,S,T,F=-1,M=[],P=[];for(d=d+"",s=s+"";(_=reA.exec(d))&&(S=reB.exec(s));)(T=S.index)>f&&(T=s.slice(f,T),M[F]?M[F]+=T:M[++F]=T),(_=_[0])===(S=S[0])?M[F]?M[F]+=S:M[++F]=S:(M[++F]=null,P.push({i:F,x:interpolateNumber(_,S)})),f=reB.lastIndex;return f<s.length&&(T=s.slice(f),M[F]?M[F]+=T:M[++F]=T),M.length<2?P[0]?one(P[0].x):zero(s):(s=P.length,function(H){for(var J=0,K;J<s;++J)M[(K=P[J]).i]=K.x(H);return M.join("")})}function interpolate$1(d,s){var f=typeof s,_;return s==null||f==="boolean"?constant$6(s):(f==="number"?interpolateNumber:f==="string"?(_=color(s))?(s=_,interpolateRgb):interpolateString:s instanceof color?interpolateRgb:s instanceof Date?date:isNumberArray(s)?numberArray:Array.isArray(s)?genericArray:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?object:interpolateNumber)(d,s)}function interpolateRound(d,s){return d=+d,s=+s,function(f){return Math.round(d*(1-f)+s*f)}}var degrees$1=180/Math.PI,identity$6={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(d,s,f,_,S,T){var F,M,P;return(F=Math.sqrt(d*d+s*s))&&(d/=F,s/=F),(P=d*f+s*_)&&(f-=d*P,_-=s*P),(M=Math.sqrt(f*f+_*_))&&(f/=M,_/=M,P/=M),d*_<s*f&&(d=-d,s=-s,P=-P,F=-F),{translateX:S,translateY:T,rotate:Math.atan2(s,d)*degrees$1,skewX:Math.atan(P)*degrees$1,scaleX:F,scaleY:M}}var svgNode;function parseCss(d){const s=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(d+"");return s.isIdentity?identity$6:decompose(s.a,s.b,s.c,s.d,s.e,s.f)}function parseSvg(d){return d==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",d),!(d=svgNode.transform.baseVal.consolidate()))?identity$6:(d=d.matrix,decompose(d.a,d.b,d.c,d.d,d.e,d.f))}function interpolateTransform(d,s,f,_){function S(H){return H.length?H.pop()+" ":""}function T(H,J,K,oe,se,ae){if(H!==K||J!==oe){var ge=se.push("translate(",null,s,null,f);ae.push({i:ge-4,x:interpolateNumber(H,K)},{i:ge-2,x:interpolateNumber(J,oe)})}else(K||oe)&&se.push("translate("+K+s+oe+f)}function F(H,J,K,oe){H!==J?(H-J>180?J+=360:J-H>180&&(H+=360),oe.push({i:K.push(S(K)+"rotate(",null,_)-2,x:interpolateNumber(H,J)})):J&&K.push(S(K)+"rotate("+J+_)}function M(H,J,K,oe){H!==J?oe.push({i:K.push(S(K)+"skewX(",null,_)-2,x:interpolateNumber(H,J)}):J&&K.push(S(K)+"skewX("+J+_)}function P(H,J,K,oe,se,ae){if(H!==K||J!==oe){var ge=se.push(S(se)+"scale(",null,",",null,")");ae.push({i:ge-4,x:interpolateNumber(H,K)},{i:ge-2,x:interpolateNumber(J,oe)})}else(K!==1||oe!==1)&&se.push(S(se)+"scale("+K+","+oe+")")}return function(H,J){var K=[],oe=[];return H=d(H),J=d(J),T(H.translateX,H.translateY,J.translateX,J.translateY,K,oe),F(H.rotate,J.rotate,K,oe),M(H.skewX,J.skewX,K,oe),P(H.scaleX,H.scaleY,J.scaleX,J.scaleY,K,oe),H=J=null,function(se){for(var ae=-1,ge=oe.length,he;++ae<ge;)K[(he=oe[ae]).i]=he.x(se);return K.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")");function constants(d){return function(){return d}}function number$1(d){return+d}var unit=[0,1];function identity$5(d){return d}function normalize$1(d,s){return(s-=d=+d)?function(f){return(f-d)/s}:constants(isNaN(s)?NaN:.5)}function clamper(d,s){var f;return d>s&&(f=d,d=s,s=f),function(_){return Math.max(d,Math.min(s,_))}}function bimap(d,s,f){var _=d[0],S=d[1],T=s[0],F=s[1];return S<_?(_=normalize$1(S,_),T=f(F,T)):(_=normalize$1(_,S),T=f(T,F)),function(M){return T(_(M))}}function polymap(d,s,f){var _=Math.min(d.length,s.length)-1,S=new Array(_),T=new Array(_),F=-1;for(d[_]<d[0]&&(d=d.slice().reverse(),s=s.slice().reverse());++F<_;)S[F]=normalize$1(d[F],d[F+1]),T[F]=f(s[F],s[F+1]);return function(M){var P=bisectRight(d,M,1,_)-1;return T[P](S[P](M))}}function copy(d,s){return s.domain(d.domain()).range(d.range()).interpolate(d.interpolate()).clamp(d.clamp()).unknown(d.unknown())}function transformer$1(){var d=unit,s=unit,f=interpolate$1,_,S,T,F=identity$5,M,P,H;function J(){var oe=Math.min(d.length,s.length);return F!==identity$5&&(F=clamper(d[0],d[oe-1])),M=oe>2?polymap:bimap,P=H=null,K}function K(oe){return oe==null||isNaN(oe=+oe)?T:(P||(P=M(d.map(_),s,f)))(_(F(oe)))}return K.invert=function(oe){return F(S((H||(H=M(s,d.map(_),interpolateNumber)))(oe)))},K.domain=function(oe){return arguments.length?(d=Array.from(oe,number$1),J()):d.slice()},K.range=function(oe){return arguments.length?(s=Array.from(oe),J()):s.slice()},K.rangeRound=function(oe){return s=Array.from(oe),f=interpolateRound,J()},K.clamp=function(oe){return arguments.length?(F=oe?!0:identity$5,J()):F!==identity$5},K.interpolate=function(oe){return arguments.length?(f=oe,J()):f},K.unknown=function(oe){return arguments.length?(T=oe,K):T},function(oe,se){return _=oe,S=se,J()}}function continuous(){return transformer$1()(identity$5,identity$5)}function formatDecimal(d){return Math.abs(d=Math.round(d))>=1e21?d.toLocaleString("en").replace(/,/g,""):d.toString(10)}function formatDecimalParts(d,s){if((f=(d=s?d.toExponential(s-1):d.toExponential()).indexOf("e"))<0)return null;var f,_=d.slice(0,f);return[_.length>1?_[0]+_.slice(2):_,+d.slice(f+1)]}function exponent(d){return d=formatDecimalParts(Math.abs(d)),d?d[1]:NaN}function formatGroup(d,s){return function(f,_){for(var S=f.length,T=[],F=0,M=d[0],P=0;S>0&&M>0&&(P+M+1>_&&(M=Math.max(1,_-P)),T.push(f.substring(S-=M,S+M)),!((P+=M+1)>_));)M=d[F=(F+1)%d.length];return T.reverse().join(s)}}function formatNumerals(d){return function(s){return s.replace(/[0-9]/g,function(f){return d[+f]})}}var re$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(d){if(!(s=re$1.exec(d)))throw new Error("invalid format: "+d);var s;return new FormatSpecifier({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(d){this.fill=d.fill===void 0?" ":d.fill+"",this.align=d.align===void 0?">":d.align+"",this.sign=d.sign===void 0?"-":d.sign+"",this.symbol=d.symbol===void 0?"":d.symbol+"",this.zero=!!d.zero,this.width=d.width===void 0?void 0:+d.width,this.comma=!!d.comma,this.precision=d.precision===void 0?void 0:+d.precision,this.trim=!!d.trim,this.type=d.type===void 0?"":d.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(d){e:for(var s=d.length,f=1,_=-1,S;f<s;++f)switch(d[f]){case".":_=S=f;break;case"0":_===0&&(_=f),S=f;break;default:if(!+d[f])break e;_>0&&(_=0);break}return _>0?d.slice(0,_)+d.slice(S+1):d}var prefixExponent;function formatPrefixAuto(d,s){var f=formatDecimalParts(d,s);if(!f)return d+"";var _=f[0],S=f[1],T=S-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(S/3)))*3)+1,F=_.length;return T===F?_:T>F?_+new Array(T-F+1).join("0"):T>0?_.slice(0,T)+"."+_.slice(T):"0."+new Array(1-T).join("0")+formatDecimalParts(d,Math.max(0,s+T-1))[0]}function formatRounded(d,s){var f=formatDecimalParts(d,s);if(!f)return d+"";var _=f[0],S=f[1];return S<0?"0."+new Array(-S).join("0")+_:_.length>S+1?_.slice(0,S+1)+"."+_.slice(S+1):_+new Array(S-_.length+2).join("0")}const formatTypes={"%":(d,s)=>(d*100).toFixed(s),b:d=>Math.round(d).toString(2),c:d=>d+"",d:formatDecimal,e:(d,s)=>d.toExponential(s),f:(d,s)=>d.toFixed(s),g:(d,s)=>d.toPrecision(s),o:d=>Math.round(d).toString(8),p:(d,s)=>formatRounded(d*100,s),r:formatRounded,s:formatPrefixAuto,X:d=>Math.round(d).toString(16).toUpperCase(),x:d=>Math.round(d).toString(16)};function identity$4(d){return d}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(d){var s=d.grouping===void 0||d.thousands===void 0?identity$4:formatGroup(map.call(d.grouping,Number),d.thousands+""),f=d.currency===void 0?"":d.currency[0]+"",_=d.currency===void 0?"":d.currency[1]+"",S=d.decimal===void 0?".":d.decimal+"",T=d.numerals===void 0?identity$4:formatNumerals(map.call(d.numerals,String)),F=d.percent===void 0?"%":d.percent+"",M=d.minus===void 0?"":d.minus+"",P=d.nan===void 0?"NaN":d.nan+"";function H(K){K=formatSpecifier(K);var oe=K.fill,se=K.align,ae=K.sign,ge=K.symbol,he=K.zero,Be=K.width,pe=K.comma,be=K.precision,Re=K.trim,Fe=K.type;Fe==="n"?(pe=!0,Fe="g"):formatTypes[Fe]||(be===void 0&&(be=12),Re=!0,Fe="g"),(he||oe==="0"&&se==="=")&&(he=!0,oe="0",se="=");var Me=ge==="$"?f:ge==="#"&&/[boxX]/.test(Fe)?"0"+Fe.toLowerCase():"",ve=ge==="$"?_:/[%p]/.test(Fe)?F:"",At=formatTypes[Fe],Ct=/[defgprs%]/.test(Fe);be=be===void 0?6:/[gprs]/.test(Fe)?Math.max(1,Math.min(21,be)):Math.max(0,Math.min(20,be));function Rt(It){var xt=Me,wt=ve,Ft,jt,ta;if(Fe==="c")wt=At(It)+wt,It="";else{It=+It;var Qn=It<0||1/It<0;if(It=isNaN(It)?P:At(Math.abs(It),be),Re&&(It=formatTrim(It)),Qn&&+It==0&&ae!=="+"&&(Qn=!1),xt=(Qn?ae==="("?ae:M:ae==="-"||ae==="("?"":ae)+xt,wt=(Fe==="s"?prefixes[8+prefixExponent/3]:"")+wt+(Qn&&ae==="("?")":""),Ct){for(Ft=-1,jt=It.length;++Ft<jt;)if(ta=It.charCodeAt(Ft),48>ta||ta>57){wt=(ta===46?S+It.slice(Ft+1):It.slice(Ft))+wt,It=It.slice(0,Ft);break}}}pe&&!he&&(It=s(It,1/0));var ca=xt.length+It.length+wt.length,Jn=ca<Be?new Array(Be-ca+1).join(oe):"";switch(pe&&he&&(It=s(Jn+It,Jn.length?Be-wt.length:1/0),Jn=""),se){case"<":It=xt+It+wt+Jn;break;case"=":It=xt+Jn+It+wt;break;case"^":It=Jn.slice(0,ca=Jn.length>>1)+xt+It+wt+Jn.slice(ca);break;default:It=Jn+xt+It+wt;break}return T(It)}return Rt.toString=function(){return K+""},Rt}function J(K,oe){var se=H((K=formatSpecifier(K),K.type="f",K)),ae=Math.max(-8,Math.min(8,Math.floor(exponent(oe)/3)))*3,ge=Math.pow(10,-ae),he=prefixes[8+ae/3];return function(Be){return se(ge*Be)+he}}return{format:H,formatPrefix:J}}var locale,format,formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(d){return locale=formatLocale(d),format=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(d){return Math.max(0,-exponent(Math.abs(d)))}function precisionPrefix(d,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(s)/3)))*3-exponent(Math.abs(d)))}function precisionRound(d,s){return d=Math.abs(d),s=Math.abs(s)-d,Math.max(0,exponent(s)-exponent(d))+1}function tickFormat(d,s,f,_){var S=tickStep(d,s,f),T;switch(_=formatSpecifier(_??",f"),_.type){case"s":{var F=Math.max(Math.abs(d),Math.abs(s));return _.precision==null&&!isNaN(T=precisionPrefix(S,F))&&(_.precision=T),formatPrefix(_,F)}case"":case"e":case"g":case"p":case"r":{_.precision==null&&!isNaN(T=precisionRound(S,Math.max(Math.abs(d),Math.abs(s))))&&(_.precision=T-(_.type==="e"));break}case"f":case"%":{_.precision==null&&!isNaN(T=precisionFixed(S))&&(_.precision=T-(_.type==="%")*2);break}}return format(_)}function linearish(d){var s=d.domain;return d.ticks=function(f){var _=s();return ticks(_[0],_[_.length-1],f??10)},d.tickFormat=function(f,_){var S=s();return tickFormat(S[0],S[S.length-1],f??10,_)},d.nice=function(f){f==null&&(f=10);var _=s(),S=0,T=_.length-1,F=_[S],M=_[T],P,H,J=10;for(M<F&&(H=F,F=M,M=H,H=S,S=T,T=H);J-- >0;){if(H=tickIncrement(F,M,f),H===P)return _[S]=F,_[T]=M,s(_);if(H>0)F=Math.floor(F/H)*H,M=Math.ceil(M/H)*H;else if(H<0)F=Math.ceil(F*H)/H,M=Math.floor(M*H)/H;else break;P=H}return d},d}function linear$1(){var d=continuous();return d.copy=function(){return copy(d,linear$1())},initRange.apply(d,arguments),linearish(d)}function transformSymlog(d){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/d))}}function transformSymexp(d){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*d}}function symlogish(d){var s=1,f=d(transformSymlog(s),transformSymexp(s));return f.constant=function(_){return arguments.length?d(transformSymlog(s=+_),transformSymexp(s)):s},linearish(f)}function symlog(){var d=symlogish(transformer$1());return d.copy=function(){return copy(d,symlog()).constant(d.constant())},initRange.apply(d,arguments)}function transformPow(d){return function(s){return s<0?-Math.pow(-s,d):Math.pow(s,d)}}function transformSqrt(d){return d<0?-Math.sqrt(-d):Math.sqrt(d)}function transformSquare(d){return d<0?-d*d:d*d}function powish(d){var s=d(identity$5,identity$5),f=1;function _(){return f===1?d(identity$5,identity$5):f===.5?d(transformSqrt,transformSquare):d(transformPow(f),transformPow(1/f))}return s.exponent=function(S){return arguments.length?(f=+S,_()):f},linearish(s)}function pow(){var d=powish(transformer$1());return d.copy=function(){return copy(d,pow()).exponent(d.exponent())},initRange.apply(d,arguments),d}function sqrt$3(){return pow.apply(null,arguments).exponent(.5)}var noop$4={value:()=>{}};function dispatch(){for(var d=0,s=arguments.length,f={},_;d<s;++d){if(!(_=arguments[d]+"")||_ in f||/[\s.]/.test(_))throw new Error("illegal type: "+_);f[_]=[]}return new Dispatch(f)}function Dispatch(d){this._=d}function parseTypenames(d,s){return d.trim().split(/^|\s+/).map(function(f){var _="",S=f.indexOf(".");if(S>=0&&(_=f.slice(S+1),f=f.slice(0,S)),f&&!s.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:_}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(d,s){var f=this._,_=parseTypenames(d+"",f),S,T=-1,F=_.length;if(arguments.length<2){for(;++T<F;)if((S=(d=_[T]).type)&&(S=get$1(f[S],d.name)))return S;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++T<F;)if(S=(d=_[T]).type)f[S]=set$1(f[S],d.name,s);else if(s==null)for(S in f)f[S]=set$1(f[S],d.name,null);return this},copy:function(){var d={},s=this._;for(var f in s)d[f]=s[f].slice();return new Dispatch(d)},call:function(d,s){if((S=arguments.length-2)>0)for(var f=new Array(S),_=0,S,T;_<S;++_)f[_]=arguments[_+2];if(!this._.hasOwnProperty(d))throw new Error("unknown type: "+d);for(T=this._[d],_=0,S=T.length;_<S;++_)T[_].value.apply(s,f)},apply:function(d,s,f){if(!this._.hasOwnProperty(d))throw new Error("unknown type: "+d);for(var _=this._[d],S=0,T=_.length;S<T;++S)_[S].value.apply(s,f)}};function get$1(d,s){for(var f=0,_=d.length,S;f<_;++f)if((S=d[f]).name===s)return S.value}function set$1(d,s,f){for(var _=0,S=d.length;_<S;++_)if(d[_].name===s){d[_]=noop$4,d=d.slice(0,_).concat(d.slice(_+1));break}return f!=null&&d.push({name:s,value:f}),d}var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(d){setTimeout(d,17)};function now$1(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(d,s,f){if(typeof d!="function")throw new TypeError("callback is not a function");f=(f==null?now$1():+f)+(s==null?0:+s),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=d,this._time=f,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(d,s,f){var _=new Timer;return _.restart(d,s,f),_}function timerFlush(){now$1(),++frame;for(var d=taskHead,s;d;)(s=clockNow-d._time)>=0&&d._call.call(void 0,s),d=d._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var d=clock.now(),s=d-clockLast;s>pokeDelay&&(clockSkew-=s,clockLast=d)}function nap(){for(var d,s=taskHead,f,_=1/0;s;)s._call?(_>s._time&&(_=s._time),d=s,s=s._next):(f=s._next,s._next=null,s=d?d._next=f:taskHead=f);taskTail=d,sleep(_)}function sleep(d){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var s=d-clockNow;s>24?(d<1/0&&(timeout$1=setTimeout(wake,d-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(d,s,f){var _=new Timer;return s=s==null?0:+s,_.restart(S=>{_.stop(),d(S+s)},s,f),_}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(d,s,f,_,S,T){var F=d.__transition;if(!F)d.__transition={};else if(f in F)return;create(d,f,{name:s,index:_,group:S,on:emptyOn,tween:emptyTween,time:T.time,delay:T.delay,duration:T.duration,ease:T.ease,timer:null,state:CREATED})}function init(d,s){var f=get(d,s);if(f.state>CREATED)throw new Error("too late; already scheduled");return f}function set(d,s){var f=get(d,s);if(f.state>STARTED)throw new Error("too late; already running");return f}function get(d,s){var f=d.__transition;if(!f||!(f=f[s]))throw new Error("transition not found");return f}function create(d,s,f){var _=d.__transition,S;_[s]=f,f.timer=timer(T,0,f.time);function T(H){f.state=SCHEDULED,f.timer.restart(F,f.delay,f.time),f.delay<=H&&F(H-f.delay)}function F(H){var J,K,oe,se;if(f.state!==SCHEDULED)return P();for(J in _)if(se=_[J],se.name===f.name){if(se.state===STARTED)return timeout(F);se.state===RUNNING?(se.state=ENDED,se.timer.stop(),se.on.call("interrupt",d,d.__data__,se.index,se.group),delete _[J]):+J<s&&(se.state=ENDED,se.timer.stop(),se.on.call("cancel",d,d.__data__,se.index,se.group),delete _[J])}if(timeout(function(){f.state===STARTED&&(f.state=RUNNING,f.timer.restart(M,f.delay,f.time),M(H))}),f.state=STARTING,f.on.call("start",d,d.__data__,f.index,f.group),f.state===STARTING){for(f.state=STARTED,S=new Array(oe=f.tween.length),J=0,K=-1;J<oe;++J)(se=f.tween[J].value.call(d,d.__data__,f.index,f.group))&&(S[++K]=se);S.length=K+1}}function M(H){for(var J=H<f.duration?f.ease.call(null,H/f.duration):(f.timer.restart(P),f.state=ENDING,1),K=-1,oe=S.length;++K<oe;)S[K].call(d,J);f.state===ENDING&&(f.on.call("end",d,d.__data__,f.index,f.group),P())}function P(){f.state=ENDED,f.timer.stop(),delete _[s];for(var H in _)return;delete d.__transition}}function interrupt(d,s){var f=d.__transition,_,S,T=!0,F;if(f){s=s==null?null:s+"";for(F in f){if((_=f[F]).name!==s){T=!1;continue}S=_.state>STARTING&&_.state<ENDING,_.state=ENDED,_.timer.stop(),_.on.call(S?"interrupt":"cancel",d,d.__data__,_.index,_.group),delete f[F]}T&&delete d.__transition}}function selection_interrupt(d){return this.each(function(){interrupt(this,d)})}function tweenRemove(d,s){var f,_;return function(){var S=set(this,d),T=S.tween;if(T!==f){_=f=T;for(var F=0,M=_.length;F<M;++F)if(_[F].name===s){_=_.slice(),_.splice(F,1);break}}S.tween=_}}function tweenFunction(d,s,f){var _,S;if(typeof f!="function")throw new Error;return function(){var T=set(this,d),F=T.tween;if(F!==_){S=(_=F).slice();for(var M={name:s,value:f},P=0,H=S.length;P<H;++P)if(S[P].name===s){S[P]=M;break}P===H&&S.push(M)}T.tween=S}}function transition_tween(d,s){var f=this._id;if(d+="",arguments.length<2){for(var _=get(this.node(),f).tween,S=0,T=_.length,F;S<T;++S)if((F=_[S]).name===d)return F.value;return null}return this.each((s==null?tweenRemove:tweenFunction)(f,d,s))}function tweenValue(d,s,f){var _=d._id;return d.each(function(){var S=set(this,_);(S.value||(S.value={}))[s]=f.apply(this,arguments)}),function(S){return get(S,_).value[s]}}function interpolate(d,s){var f;return(typeof s=="number"?interpolateNumber:s instanceof color?interpolateRgb:(f=color(s))?(s=f,interpolateRgb):interpolateString)(d,s)}function attrRemove(d){return function(){this.removeAttribute(d)}}function attrRemoveNS(d){return function(){this.removeAttributeNS(d.space,d.local)}}function attrConstant(d,s,f){var _,S=f+"",T;return function(){var F=this.getAttribute(d);return F===S?null:F===_?T:T=s(_=F,f)}}function attrConstantNS(d,s,f){var _,S=f+"",T;return function(){var F=this.getAttributeNS(d.space,d.local);return F===S?null:F===_?T:T=s(_=F,f)}}function attrFunction(d,s,f){var _,S,T;return function(){var F,M=f(this),P;return M==null?void this.removeAttribute(d):(F=this.getAttribute(d),P=M+"",F===P?null:F===_&&P===S?T:(S=P,T=s(_=F,M)))}}function attrFunctionNS(d,s,f){var _,S,T;return function(){var F,M=f(this),P;return M==null?void this.removeAttributeNS(d.space,d.local):(F=this.getAttributeNS(d.space,d.local),P=M+"",F===P?null:F===_&&P===S?T:(S=P,T=s(_=F,M)))}}function transition_attr(d,s){var f=namespace(d),_=f==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(d,typeof s=="function"?(f.local?attrFunctionNS:attrFunction)(f,_,tweenValue(this,"attr."+d,s)):s==null?(f.local?attrRemoveNS:attrRemove)(f):(f.local?attrConstantNS:attrConstant)(f,_,s))}function attrInterpolate(d,s){return function(f){this.setAttribute(d,s.call(this,f))}}function attrInterpolateNS(d,s){return function(f){this.setAttributeNS(d.space,d.local,s.call(this,f))}}function attrTweenNS(d,s){var f,_;function S(){var T=s.apply(this,arguments);return T!==_&&(f=(_=T)&&attrInterpolateNS(d,T)),f}return S._value=s,S}function attrTween(d,s){var f,_;function S(){var T=s.apply(this,arguments);return T!==_&&(f=(_=T)&&attrInterpolate(d,T)),f}return S._value=s,S}function transition_attrTween(d,s){var f="attr."+d;if(arguments.length<2)return(f=this.tween(f))&&f._value;if(s==null)return this.tween(f,null);if(typeof s!="function")throw new Error;var _=namespace(d);return this.tween(f,(_.local?attrTweenNS:attrTween)(_,s))}function delayFunction(d,s){return function(){init(this,d).delay=+s.apply(this,arguments)}}function delayConstant(d,s){return s=+s,function(){init(this,d).delay=s}}function transition_delay(d){var s=this._id;return arguments.length?this.each((typeof d=="function"?delayFunction:delayConstant)(s,d)):get(this.node(),s).delay}function durationFunction(d,s){return function(){set(this,d).duration=+s.apply(this,arguments)}}function durationConstant(d,s){return s=+s,function(){set(this,d).duration=s}}function transition_duration(d){var s=this._id;return arguments.length?this.each((typeof d=="function"?durationFunction:durationConstant)(s,d)):get(this.node(),s).duration}function easeConstant(d,s){if(typeof s!="function")throw new Error;return function(){set(this,d).ease=s}}function transition_ease(d){var s=this._id;return arguments.length?this.each(easeConstant(s,d)):get(this.node(),s).ease}function easeVarying(d,s){return function(){var f=s.apply(this,arguments);if(typeof f!="function")throw new Error;set(this,d).ease=f}}function transition_easeVarying(d){if(typeof d!="function")throw new Error;return this.each(easeVarying(this._id,d))}function transition_filter(d){typeof d!="function"&&(d=matcher(d));for(var s=this._groups,f=s.length,_=new Array(f),S=0;S<f;++S)for(var T=s[S],F=T.length,M=_[S]=[],P,H=0;H<F;++H)(P=T[H])&&d.call(P,P.__data__,H,T)&&M.push(P);return new Transition(_,this._parents,this._name,this._id)}function transition_merge(d){if(d._id!==this._id)throw new Error;for(var s=this._groups,f=d._groups,_=s.length,S=f.length,T=Math.min(_,S),F=new Array(_),M=0;M<T;++M)for(var P=s[M],H=f[M],J=P.length,K=F[M]=new Array(J),oe,se=0;se<J;++se)(oe=P[se]||H[se])&&(K[se]=oe);for(;M<_;++M)F[M]=s[M];return new Transition(F,this._parents,this._name,this._id)}function start(d){return(d+"").trim().split(/^|\s+/).every(function(s){var f=s.indexOf(".");return f>=0&&(s=s.slice(0,f)),!s||s==="start"})}function onFunction(d,s,f){var _,S,T=start(s)?init:set;return function(){var F=T(this,d),M=F.on;M!==_&&(S=(_=M).copy()).on(s,f),F.on=S}}function transition_on(d,s){var f=this._id;return arguments.length<2?get(this.node(),f).on.on(d):this.each(onFunction(f,d,s))}function removeFunction(d){return function(){var s=this.parentNode;for(var f in this.__transition)if(+f!==d)return;s&&s.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(d){var s=this._name,f=this._id;typeof d!="function"&&(d=selector(d));for(var _=this._groups,S=_.length,T=new Array(S),F=0;F<S;++F)for(var M=_[F],P=M.length,H=T[F]=new Array(P),J,K,oe=0;oe<P;++oe)(J=M[oe])&&(K=d.call(J,J.__data__,oe,M))&&("__data__"in J&&(K.__data__=J.__data__),H[oe]=K,schedule(H[oe],s,f,oe,H,get(J,f)));return new Transition(T,this._parents,s,f)}function transition_selectAll(d){var s=this._name,f=this._id;typeof d!="function"&&(d=selectorAll(d));for(var _=this._groups,S=_.length,T=[],F=[],M=0;M<S;++M)for(var P=_[M],H=P.length,J,K=0;K<H;++K)if(J=P[K]){for(var oe=d.call(J,J.__data__,K,P),se,ae=get(J,f),ge=0,he=oe.length;ge<he;++ge)(se=oe[ge])&&schedule(se,s,f,ge,oe,ae);T.push(oe),F.push(J)}return new Transition(T,F,s,f)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(d,s){var f,_,S;return function(){var T=styleValue(this,d),F=(this.style.removeProperty(d),styleValue(this,d));return T===F?null:T===f&&F===_?S:S=s(f=T,_=F)}}function styleRemove(d){return function(){this.style.removeProperty(d)}}function styleConstant(d,s,f){var _,S=f+"",T;return function(){var F=styleValue(this,d);return F===S?null:F===_?T:T=s(_=F,f)}}function styleFunction(d,s,f){var _,S,T;return function(){var F=styleValue(this,d),M=f(this),P=M+"";return M==null&&(P=M=(this.style.removeProperty(d),styleValue(this,d))),F===P?null:F===_&&P===S?T:(S=P,T=s(_=F,M))}}function styleMaybeRemove(d,s){var f,_,S,T="style."+s,F="end."+T,M;return function(){var P=set(this,d),H=P.on,J=P.value[T]==null?M||(M=styleRemove(s)):void 0;(H!==f||S!==J)&&(_=(f=H).copy()).on(F,S=J),P.on=_}}function transition_style(d,s,f){var _=(d+="")=="transform"?interpolateTransformCss:interpolate;return s==null?this.styleTween(d,styleNull(d,_)).on("end.style."+d,styleRemove(d)):typeof s=="function"?this.styleTween(d,styleFunction(d,_,tweenValue(this,"style."+d,s))).each(styleMaybeRemove(this._id,d)):this.styleTween(d,styleConstant(d,_,s),f).on("end.style."+d,null)}function styleInterpolate(d,s,f){return function(_){this.style.setProperty(d,s.call(this,_),f)}}function styleTween(d,s,f){var _,S;function T(){var F=s.apply(this,arguments);return F!==S&&(_=(S=F)&&styleInterpolate(d,F,f)),_}return T._value=s,T}function transition_styleTween(d,s,f){var _="style."+(d+="");if(arguments.length<2)return(_=this.tween(_))&&_._value;if(s==null)return this.tween(_,null);if(typeof s!="function")throw new Error;return this.tween(_,styleTween(d,s,f??""))}function textConstant(d){return function(){this.textContent=d}}function textFunction(d){return function(){var s=d(this);this.textContent=s??""}}function transition_text(d){return this.tween("text",typeof d=="function"?textFunction(tweenValue(this,"text",d)):textConstant(d==null?"":d+""))}function textInterpolate(d){return function(s){this.textContent=d.call(this,s)}}function textTween(d){var s,f;function _(){var S=d.apply(this,arguments);return S!==f&&(s=(f=S)&&textInterpolate(S)),s}return _._value=d,_}function transition_textTween(d){var s="text";if(arguments.length<1)return(s=this.tween(s))&&s._value;if(d==null)return this.tween(s,null);if(typeof d!="function")throw new Error;return this.tween(s,textTween(d))}function transition_transition(){for(var d=this._name,s=this._id,f=newId(),_=this._groups,S=_.length,T=0;T<S;++T)for(var F=_[T],M=F.length,P,H=0;H<M;++H)if(P=F[H]){var J=get(P,s);schedule(P,d,f,H,F,{time:J.time+J.delay+J.duration,delay:0,duration:J.duration,ease:J.ease})}return new Transition(_,this._parents,d,f)}function transition_end(){var d,s,f=this,_=f._id,S=f.size();return new Promise(function(T,F){var M={value:F},P={value:function(){--S===0&&T()}};f.each(function(){var H=set(this,_),J=H.on;J!==d&&(s=(d=J).copy(),s._.cancel.push(M),s._.interrupt.push(M),s._.end.push(P)),H.on=s}),S===0&&T()})}var id$1=0;function Transition(d,s,f,_){this._groups=d,this._parents=s,this._name=f,this._id=_}function newId(){return++id$1}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};const linear=d=>+d;function cubicInOut(d){return((d*=2)<=1?d*d*d:(d-=2)*d*d+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(d,s){for(var f;!(f=d.__transition)||!(f=f[s]);)if(!(d=d.parentNode))throw new Error(`transition ${s} not found`);return f}function selection_transition(d){var s,f;d instanceof Transition?(s=d._id,d=d._name):(s=newId(),(f=defaultTiming).time=now$1(),d=d==null?null:d+"");for(var _=this._groups,S=_.length,T=0;T<S;++T)for(var F=_[T],M=F.length,P,H=0;H<M;++H)(P=F[H])&&schedule(P,d,s,H,F,f||inherit(P,s));return new Transition(_,this._parents,d,s)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;function identity$3(d){return d}var top=1,right=2,bottom=3,left=4,epsilon$6=1e-6;function translateX(d){return"translate("+d+",0)"}function translateY(d){return"translate(0,"+d+")"}function number(d){return s=>+d(s)}function center$1(d,s){return s=Math.max(0,d.bandwidth()-s*2)/2,d.round()&&(s=Math.round(s)),f=>+d(f)+s}function entering(){return!this.__axis}function axis(d,s){var f=[],_=null,S=null,T=6,F=6,M=3,P=typeof window<"u"&&window.devicePixelRatio>1?0:.5,H=d===top||d===left?-1:1,J=d===left||d===right?"x":"y",K=d===top||d===bottom?translateX:translateY;function oe(se){var ae=_??(s.ticks?s.ticks.apply(s,f):s.domain()),ge=S??(s.tickFormat?s.tickFormat.apply(s,f):identity$3),he=Math.max(T,0)+M,Be=s.range(),pe=+Be[0]+P,be=+Be[Be.length-1]+P,Re=(s.bandwidth?center$1:number)(s.copy(),P),Fe=se.selection?se.selection():se,Me=Fe.selectAll(".domain").data([null]),ve=Fe.selectAll(".tick").data(ae,s).order(),At=ve.exit(),Ct=ve.enter().append("g").attr("class","tick"),Rt=ve.select("line"),It=ve.select("text");Me=Me.merge(Me.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),ve=ve.merge(Ct),Rt=Rt.merge(Ct.append("line").attr("stroke","currentColor").attr(J+"2",H*T)),It=It.merge(Ct.append("text").attr("fill","currentColor").attr(J,H*he).attr("dy",d===top?"0em":d===bottom?"0.71em":"0.32em")),se!==Fe&&(Me=Me.transition(se),ve=ve.transition(se),Rt=Rt.transition(se),It=It.transition(se),At=At.transition(se).attr("opacity",epsilon$6).attr("transform",function(xt){return isFinite(xt=Re(xt))?K(xt+P):this.getAttribute("transform")}),Ct.attr("opacity",epsilon$6).attr("transform",function(xt){var wt=this.parentNode.__axis;return K((wt&&isFinite(wt=wt(xt))?wt:Re(xt))+P)})),At.remove(),Me.attr("d",d===left||d===right?F?"M"+H*F+","+pe+"H"+P+"V"+be+"H"+H*F:"M"+P+","+pe+"V"+be:F?"M"+pe+","+H*F+"V"+P+"H"+be+"V"+H*F:"M"+pe+","+P+"H"+be),ve.attr("opacity",1).attr("transform",function(xt){return K(Re(xt)+P)}),Rt.attr(J+"2",H*T),It.attr(J,H*he).text(ge),Fe.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",d===right?"start":d===left?"end":"middle"),Fe.each(function(){this.__axis=Re})}return oe.scale=function(se){return arguments.length?(s=se,oe):s},oe.ticks=function(){return f=Array.from(arguments),oe},oe.tickArguments=function(se){return arguments.length?(f=se==null?[]:Array.from(se),oe):f.slice()},oe.tickValues=function(se){return arguments.length?(_=se==null?null:Array.from(se),oe):_&&_.slice()},oe.tickFormat=function(se){return arguments.length?(S=se,oe):S},oe.tickSize=function(se){return arguments.length?(T=F=+se,oe):T},oe.tickSizeInner=function(se){return arguments.length?(T=+se,oe):T},oe.tickSizeOuter=function(se){return arguments.length?(F=+se,oe):F},oe.tickPadding=function(se){return arguments.length?(M=+se,oe):M},oe.offset=function(se){return arguments.length?(P=+se,oe):P},oe}function axisBottom(d){return axis(bottom,d)}function axisLeft(d){return axis(left,d)}function defaultSeparation$1(d,s){return d.parent===s.parent?1:2}function meanX(d){return d.reduce(meanXReduce,0)/d.length}function meanXReduce(d,s){return d+s.x}function maxY(d){return 1+d.reduce(maxYReduce,0)}function maxYReduce(d,s){return Math.max(d,s.y)}function leafLeft(d){for(var s;s=d.children;)d=s[0];return d}function leafRight(d){for(var s;s=d.children;)d=s[s.length-1];return d}function cluster(){var d=defaultSeparation$1,s=1,f=1,_=!1;function S(T){var F,M=0;T.eachAfter(function(oe){var se=oe.children;se?(oe.x=meanX(se),oe.y=maxY(se)):(oe.x=F?M+=d(oe,F):0,oe.y=0,F=oe)});var P=leafLeft(T),H=leafRight(T),J=P.x-d(P,H)/2,K=H.x+d(H,P)/2;return T.eachAfter(_?function(oe){oe.x=(oe.x-T.x)*s,oe.y=(T.y-oe.y)*f}:function(oe){oe.x=(oe.x-J)/(K-J)*s,oe.y=(1-(T.y?oe.y/T.y:1))*f})}return S.separation=function(T){return arguments.length?(d=T,S):d},S.size=function(T){return arguments.length?(_=!1,s=+T[0],f=+T[1],S):_?null:[s,f]},S.nodeSize=function(T){return arguments.length?(_=!0,s=+T[0],f=+T[1],S):_?[s,f]:null},S}function count(d){var s=0,f=d.children,_=f&&f.length;if(!_)s=1;else for(;--_>=0;)s+=f[_].value;d.value=s}function node_count(){return this.eachAfter(count)}function node_each(d,s){let f=-1;for(const _ of this)d.call(s,_,++f,this);return this}function node_eachBefore(d,s){for(var f=this,_=[f],S,T,F=-1;f=_.pop();)if(d.call(s,f,++F,this),S=f.children)for(T=S.length-1;T>=0;--T)_.push(S[T]);return this}function node_eachAfter(d,s){for(var f=this,_=[f],S=[],T,F,M,P=-1;f=_.pop();)if(S.push(f),T=f.children)for(F=0,M=T.length;F<M;++F)_.push(T[F]);for(;f=S.pop();)d.call(s,f,++P,this);return this}function node_find(d,s){let f=-1;for(const _ of this)if(d.call(s,_,++f,this))return _}function node_sum(d){return this.eachAfter(function(s){for(var f=+d(s.data)||0,_=s.children,S=_&&_.length;--S>=0;)f+=_[S].value;s.value=f})}function node_sort(d){return this.eachBefore(function(s){s.children&&s.children.sort(d)})}function node_path(d){for(var s=this,f=leastCommonAncestor(s,d),_=[s];s!==f;)s=s.parent,_.push(s);for(var S=_.length;d!==f;)_.splice(S,0,d),d=d.parent;return _}function leastCommonAncestor(d,s){if(d===s)return d;var f=d.ancestors(),_=s.ancestors(),S=null;for(d=f.pop(),s=_.pop();d===s;)S=d,d=f.pop(),s=_.pop();return S}function node_ancestors(){for(var d=this,s=[d];d=d.parent;)s.push(d);return s}function node_descendants(){return Array.from(this)}function node_leaves(){var d=[];return this.eachBefore(function(s){s.children||d.push(s)}),d}function node_links(){var d=this,s=[];return d.each(function(f){f!==d&&s.push({source:f.parent,target:f})}),s}function*node_iterator(){var d=this,s,f=[d],_,S,T;do for(s=f.reverse(),f=[];d=s.pop();)if(yield d,_=d.children)for(S=0,T=_.length;S<T;++S)f.push(_[S]);while(f.length)}function hierarchy(d,s){d instanceof Map?(d=[void 0,d],s===void 0&&(s=mapChildren)):s===void 0&&(s=objectChildren);for(var f=new Node$2(d),_,S=[f],T,F,M,P;_=S.pop();)if((F=s(_.data))&&(P=(F=Array.from(F)).length))for(_.children=F,M=P-1;M>=0;--M)S.push(T=F[M]=new Node$2(F[M])),T.parent=_,T.depth=_.depth+1;return f.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function objectChildren(d){return d.children}function mapChildren(d){return Array.isArray(d)?d[1]:null}function copyData(d){d.data.value!==void 0&&(d.value=d.data.value),d.data=d.data.data}function computeHeight(d){var s=0;do d.height=s;while((d=d.parent)&&d.height<++s)}function Node$2(d){this.data=d,this.depth=this.height=0,this.parent=null}Node$2.prototype=hierarchy.prototype={constructor:Node$2,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,find:node_find,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy,[Symbol.iterator]:node_iterator};function optional(d){return d==null?null:required(d)}function required(d){if(typeof d!="function")throw new Error;return d}var preroot={depth:-1},ambiguous={},imputed={};function defaultId$1(d){return d.id}function defaultParentId(d){return d.parentId}function d3Stratify(){var d=defaultId$1,s=defaultParentId,f;function _(S){var T=Array.from(S),F=d,M=s,P,H,J,K,oe,se,ae,ge,he=new Map;if(f!=null){const Be=T.map((Re,Fe)=>normalize(f(Re,Fe,S))),pe=Be.map(parentof),be=new Set(Be).add("");for(const Re of pe)be.has(Re)||(be.add(Re),Be.push(Re),pe.push(parentof(Re)),T.push(imputed));F=(Re,Fe)=>Be[Fe],M=(Re,Fe)=>pe[Fe]}for(J=0,P=T.length;J<P;++J)H=T[J],se=T[J]=new Node$2(H),(ae=F(H,J,S))!=null&&(ae+="")&&(ge=se.id=ae,he.set(ge,he.has(ge)?ambiguous:se)),(ae=M(H,J,S))!=null&&(ae+="")&&(se.parent=ae);for(J=0;J<P;++J)if(se=T[J],ae=se.parent){if(oe=he.get(ae),!oe)throw new Error("missing: "+ae);if(oe===ambiguous)throw new Error("ambiguous: "+ae);oe.children?oe.children.push(se):oe.children=[se],se.parent=oe}else{if(K)throw new Error("multiple roots");K=se}if(!K)throw new Error("no root");if(f!=null){for(;K.data===imputed&&K.children.length===1;)K=K.children[0],--P;for(let Be=T.length-1;Be>=0&&(se=T[Be],se.data===imputed);--Be)se.data=null}if(K.parent=preroot,K.eachBefore(function(Be){Be.depth=Be.parent.depth+1,--P}).eachBefore(computeHeight),K.parent=null,P>0)throw new Error("cycle");return K}return _.id=function(S){return arguments.length?(d=optional(S),_):d},_.parentId=function(S){return arguments.length?(s=optional(S),_):s},_.path=function(S){return arguments.length?(f=optional(S),_):f},_}function normalize(d){d=`${d}`;let s=d.length;return slash(d,s-1)&&!slash(d,s-2)&&(d=d.slice(0,-1)),d[0]==="/"?d:`/${d}`}function parentof(d){let s=d.length;if(s<2)return"";for(;--s>1&&!slash(d,s););return d.slice(0,s)}function slash(d,s){if(d[s]==="/"){let f=0;for(;s>0&&d[--s]==="\\";)++f;if(!(f&1))return!0}return!1}function defaultSeparation(d,s){return d.parent===s.parent?1:2}function nextLeft(d){var s=d.children;return s?s[0]:d.t}function nextRight(d){var s=d.children;return s?s[s.length-1]:d.t}function moveSubtree(d,s,f){var _=f/(s.i-d.i);s.c-=_,s.s+=f,d.c+=_,s.z+=f,s.m+=f}function executeShifts(d){for(var s=0,f=0,_=d.children,S=_.length,T;--S>=0;)T=_[S],T.z+=s,T.m+=s,s+=T.s+(f+=T.c)}function nextAncestor(d,s,f){return d.a.parent===s.parent?d.a:f}function TreeNode(d,s){this._=d,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=s}TreeNode.prototype=Object.create(Node$2.prototype);function treeRoot(d){for(var s=new TreeNode(d,0),f,_=[s],S,T,F,M;f=_.pop();)if(T=f._.children)for(f.children=new Array(M=T.length),F=M-1;F>=0;--F)_.push(S=f.children[F]=new TreeNode(T[F],F)),S.parent=f;return(s.parent=new TreeNode(null,0)).children=[s],s}function d3Tree(){var d=defaultSeparation,s=1,f=1,_=null;function S(H){var J=treeRoot(H);if(J.eachAfter(T),J.parent.m=-J.z,J.eachBefore(F),_)H.eachBefore(P);else{var K=H,oe=H,se=H;H.eachBefore(function(pe){pe.x<K.x&&(K=pe),pe.x>oe.x&&(oe=pe),pe.depth>se.depth&&(se=pe)});var ae=K===oe?1:d(K,oe)/2,ge=ae-K.x,he=s/(oe.x+ae+ge),Be=f/(se.depth||1);H.eachBefore(function(pe){pe.x=(pe.x+ge)*he,pe.y=pe.depth*Be})}return H}function T(H){var J=H.children,K=H.parent.children,oe=H.i?K[H.i-1]:null;if(J){executeShifts(H);var se=(J[0].z+J[J.length-1].z)/2;oe?(H.z=oe.z+d(H._,oe._),H.m=H.z-se):H.z=se}else oe&&(H.z=oe.z+d(H._,oe._));H.parent.A=M(H,oe,H.parent.A||K[0])}function F(H){H._.x=H.z+H.parent.m,H.m+=H.parent.m}function M(H,J,K){if(J){for(var oe=H,se=H,ae=J,ge=oe.parent.children[0],he=oe.m,Be=se.m,pe=ae.m,be=ge.m,Re;ae=nextRight(ae),oe=nextLeft(oe),ae&&oe;)ge=nextLeft(ge),se=nextRight(se),se.a=H,Re=ae.z+pe-oe.z-he+d(ae._,oe._),Re>0&&(moveSubtree(nextAncestor(ae,H,K),H,Re),he+=Re,Be+=Re),pe+=ae.m,he+=oe.m,be+=ge.m,Be+=se.m;ae&&!nextRight(se)&&(se.t=ae,se.m+=pe-Be),oe&&!nextLeft(ge)&&(ge.t=oe,ge.m+=he-be,K=H)}return K}function P(H){H.x*=s,H.y=H.depth*f}return S.separation=function(H){return arguments.length?(d=H,S):d},S.size=function(H){return arguments.length?(_=!1,s=+H[0],f=+H[1],S):_?null:[s,f]},S.nodeSize=function(H){return arguments.length?(_=!0,s=+H[0],f=+H[1],S):_?[s,f]:null},S}class SVGChart extends BaseChart{constructor(s,f,_,S={}){super(s,f,_),this.svg=select(this.contentDiv).append("svg").attr("width",this.width).attr("height",this.height),this.config.axis=this.config.axis||{};const T=this.config.axis;function F(J,K,oe){J[K]==null&&(J[K]=oe)}for(const J of[["x",25],["y",40],["ry",25],["tx",25]]){const K=S[J[0]];if(K){T[J[0]]=T[J[0]]||{};const oe=T[J[0]];F(oe,"textSize",13),F(oe,"label",""),F(oe,"size",K.size||J[1]),F(oe,"tickfont",10)}}this._setMargins(),this.graph_area=this.svg.append("g").attr("transform",`translate(${this.margins.left},${this.margins.top})`),this.ry_axis_svg=this.svg.append("g"),this.tx_axis_svg=this.svg.append("g"),this.x_axis_svg=this.svg.append("g"),this.y_axis_svg=this.svg.append("g");const M=S.x;M&&(M.custom||(this.x_scale=M.type==="band"?band():linear$1(),this.x_axis_call=axisBottom(this.x_scale)),this.x_axis_label=this.x_axis_svg.append("text").style("text-anchor","middle").style("fill","black").attr("alignment-baseline","auto"));const P=S.y;P&&(P.custom||(this.y_scale=P.type==="band"?band():linear$1(),this.y_axis_call=axisLeft(this.y_scale)),this.y_axis_label=this.y_axis_svg.append("text").attr("text-anchor","middle").style("fill","black").attr("alignment-baseline","auto"));const H=S.ry;H!=null&&H.label&&(this.ry_axis_label=this.ry_axis_svg.append("text").attr("text-anchor","middle").style("fill","black").attr("alignment-baseline","text-top"))}_setMargins(){const s=this.config.axis;this.margins={top:s.tx?s.tx.size:10,right:s.ry?s.ry.size:10,bottom:s.x?s.x.size:10,left:s.y?s.y.size:10}}_getContentDimensions(){return{top:this.margins.top,left:this.margins.left,height:this.height-this.margins.bottom-this.margins.top,width:this.width-this.margins.left-this.margins.right}}setAxisSize(s,f){switch(s){case"tx":this.margins.top=f;break;case"ry":this.config.axis.ry.size=f,this.margins.right=f;break;case"y":this.config.axis.y.size=f,this.margins.left=f;break;case"x":this.config.axis.x.size=f,this.margins.bottom=f}this.graph_area.attr("transform",`translate(${this.margins.left},${this.margins.top})`)}updateAxis(){const s=this._getContentDimensions(),f=this.config.axis;if(this.ry_axis_svg.attr("transform",`translate(${s.left+s.width},${s.top})`),this.tx_axis_svg.attr("transform",`translate(${s.left},0)`),this.x_axis_svg.attr("transform",`translate(${s.left},${this.height-this.margins.bottom})`),this.y_axis_svg.attr("transform",`translate(${s.left},${s.top})`),f.x&&(this.x_scale&&(this.x_scale.range([0,s.width]),this.x_axis_svg.selectAll(".tick text").attr("font-family","Helvetica"),this.x_axis_svg.transition().call(this.x_axis_call),f.x.rotate_labels?this.x_axis_svg.selectAll(".tick text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".10em").attr("transform","rotate(-45)"):this.x_axis_svg.selectAll(".tick text").style("text-anchor",null).attr("dx",null).attr("dy",".71em").attr("transform",null),this.x_axis_svg.selectAll(".tick text").attr("font-size",f.x.tickfont)),this.x_axis_label.attr("x",s.width/2).attr("y",this.margins.bottom-4).text(this.config.axis.x.label).attr("font-size",`${this.config.axis.x.textsize}px`).attr("font-family","Helvetica")),f.y){if(this.y_scale){if(this.y_scale.range([0,s.height]),s.height/this.y_scale.domain().length<8){const S=Math.round(this.y_scale.domain().length/(s.height/10));this.y_axis_call.tickFormat((T,F)=>F%S===0?T:"")}else this.y_axis_call.tickFormat(null);this.y_axis_svg.transition().call(this.y_axis_call),f.y.rotate_labels?this.y_axis_svg.selectAll(".tick text").style("text-anchor","end").attr("dy","1em").attr("transform","rotate(+45)"):this.y_axis_svg.selectAll(".tick text").style("text-anchor",null).attr("dx",null).attr("dy","0.32em").attr("transform",null),this.y_axis_svg.selectAll(".tick text").attr("font-size",f.y.tickfont).attr("font-family","Helvetica")}this.y_axis_label.attr("x",-s.height/2).attr("y",-s.left+10).attr("transform","rotate(-90)").text(this.config.axis.y.label).attr("font-size",`${this.config.axis.y.textsize}px`).attr("font-family","Helvetica")}this.ry_axis_label&&this.ry_axis_label.attr("x",s.height/2).attr("y",-this.margins.right+15).attr("transform","rotate(90)").text(this.config.axis.ry.label).attr("font-size",`${this.config.axis.ry.textsize}px`)}setSize(s,f){super.setSize(s,f),this.svg&&this.svg.attr("width",this.width).attr("height",this.height)}drawXTree(s,f,_,S){select(this.contentDiv).transition().duration(400).ease(linear);const T=this._getContentDimensions(),P=cluster().size([T.width,_])(s).descendants(),H=T.width/f;for(const J of P)J.children||(J.x=H/2+H*J.data.order);for(const J of P)if(!J.children){let K=J.parent;for(;K;)K.x=K.children[0].x+(K.children[1].x-K.children[0].x)/2,K=K.parent}this.tx_axis_svg.selectAll(".tree-link").data(P.slice(1)).join("path").attr("class","tree-link").style("stroke","currentColor").style("fill","none").style("stroke-width","1px").transition("trans").attr("d",J=>{let K=J.x;return J.children||(K=H/2+H*J.data.order),`M ${K} ${J.y+S} L${K} ${J.parent.y+S} L${J.parent.x} ${J.parent.y+S}`})}drawYTree(s,f){select(this.contentDiv).transition().duration(400).ease(linear);const _=this._getContentDimensions(),S=this.margins.right,M=cluster().size([_.height,S])(s).descendants(),P=_.height/f;for(const H of M)H.children||(H.x=P/2+P*H.data.order);for(const H of M)if(!H.children){let J=H.parent;for(;J;)J.x=J.children[0].x+(J.children[1].x-J.children[0].x)/2,J=J.parent}this.ry_axis_svg.selectAll(".tree-link").data(M.slice(1)).join("path").attr("class","tree-link").style("stroke","currentColor").style("fill","none").style("stroke-width","1px").transition("trans").attr("d",H=>{let J=H.x;return H.children||(J=P/2+P*H.data.order),`M ${S-H.y} ${J} L${S-H.parent.y} ${J} L${S-H.parent.y} ${H.parent.x}`})}getSettings(){const s=super.getSettings(),f=this.config;let _=[];return this.config.axis.y&&(_=_.concat([{type:"check",current_value:f.axis.y.rotate_labels,label:"Rotate Y axis labels",func:S=>{f.axis.y.rotate_labels=S,this.setSize()}},{type:"slider",max:20,min:4,step:1,doc:this.__doc__,current_value:f.axis.y.tickfont,label:"Y axis text size",func:S=>{f.axis.y.tickfont=S,this.setSize()}},{type:"slider",max:200,min:20,step:1,doc:this.__doc__,current_value:f.axis.y.size,label:"Y axis width",func:S=>{this.setAxisSize("y",S),this.setSize()}}])),this.config.axis.x&&(_=_.concat([{type:"check",current_value:f.axis.x.rotate_labels,label:"Rotate X axis labels",func:S=>{f.axis.x.rotate_labels=S,this.updateAxis()}},{type:"slider",max:20,min:4,step:1,doc:this.__doc__,current_value:f.axis.x.tickfont,label:"X axis text size",func:S=>{f.axis.x.tickfont=S,this.setSize()}},{type:"slider",max:200,min:20,step:1,doc:this.__doc__,current_value:f.axis.x.size,label:"X axis Height",func:S=>{this.setAxisSize("x",S),this.setSize()}}]),this.config.axis.ry&&(_=_.concat([{type:"slider",max:200,min:20,step:1,doc:this.__doc__,current_value:f.axis.x.size,label:"Right Y Axis size",func:S=>{this.setAxisSize("ry",S),this.setSize()}}]))),s.concat([{type:"folder",label:"Axis controls",current_value:_,func:S=>{}}])}_addLegendToSVG(s){const f=this[s];if(!f)return;const _=[f.offsetLeft,f.offsetTop];f._leg=f.querySelector("g"),f._leg_g=select(f._leg).attr("transform",`translate(${_[0]},${_[1]})`),this.svg.node().append(f._leg_g.node())}_removeLegendFromSVG(s){const f=this[s];f&&(f._leg_g.attr("transform","translate(0,0)"),this.legend.querySelector("svg").append(f._leg),this.legend._leg=void 0,this.legend._leg_g=void 0)}getImage(s,f){this.addToImage&&this.addToImage(),this._addLegendToSVG("legend"),this.extra_legends&&this.extra_legends.forEach(S=>this._addLegendToSVG(S));const _=new XMLSerializer().serializeToString(this.svg.node());f==="png"?this.getImageFromSVG(this.svg.node(),S=>{s(S),this.removeFromImage&&this.removeFromImage(),this._removeLegendFromSVG("legend"),this.extra_legends&&this.extra_legends.forEach(T=>this._removeLegendFromSVG(T))}):(s(_),this.removeFromImage&&this.removeFromImage(),this._removeLegendFromSVG("legend"),this.extra_legends&&this.extra_legends.forEach(S=>this._removeLegendFromSVG(S)))}}let Dimension$1=class{constructor(s){this.filterBuffer=new SharedArrayBuffer(s.size),this.parent=s,this.filterArray=new Uint8Array(this.filterBuffer),this.filterArguments=null,this.filterIndexes=null,this.filterMethod=null}filterPredicate(s,f){const _=this.parent.filterArray,S=this.parent,T=s.predicate,F=this.filterArray;for(let M=0;M<this.parent.size;M++)!T(M)?(F[M]===0&&++_[M]===1&&S.filterSize--,F[M]=1):(F[M]===1&&--_[M]===0&&S.filterSize++,F[M]=0)}removeFilter(s=!0){if(!this.filterMethod)return;const f=this.parent.filterArray,_=this.filterArray,S=this.parent,T=this.parent.size;this.filterArguments=void 0,this.filterColumns=void 0,this.filterMethod=void 0;for(let F=0;F<T;F++)_[F]===1&&(--f[F]===0&&S.filterSize++,_[F]=0);if(this.bgfArray)for(let F=0;F<T;F++)this.bgfArray[F]===0&&(--f[F]===0&&S.filterSize++,_[F]=2);s&&this.parent._callListeners("filtered",this)}getLocalFilter(){return this.filterArray}filterOnIndex(s){const f=this.parent.filterArray,_=this.parent.size,S=this.filterArray,T=this.parent;for(let F=0;F<_;F++)s.has(F)?(S[F]===1&&--f[F]===0&&T.filterSize++,S[F]=0):(S[F]===0&&++f[F]===1&&T.filterSize--,S[F]=1)}filter(s,f,_,S=!0){const T=performance.now();if(this.filterColumns=f,this.filterArguments=_,this.filterMethod=s,this[s](_,f),this.bgfArray){const F=this.parent.filterArray,M=this.parent.size,P=this.filterArray,H=this.parent;for(let J=0;J<M;J++)this.bgfArray[J]===0&&(++F[J]===1&&H.filterSize--,P[J]=2)}S&&this.parent._callListeners("filtered",this),performance.now()-T>100?console.warn(`method${s}: ${performance.now()-T}`):console.log(`method${s}: ${performance.now()-T}`)}async getValueSet(s){const f=this.parent.columnIndex[s],_=f.data,S=this.parent.filterArray,T=this.filterArray,F=this.parent.size,M=new Set;for(let P=0;P<F;P++)T[P]===0&&S[P]===0&&(f.values?M.add(f.values[_[P]]):M.add(_[P]));return M}reFilterOnDataChanged(s){if(this.filterMethod&&this.filterColumns){for(const f of this.filterColumns)if(typeof f=="string"&&s.indexOf(f)!==-1)return this.filter(this.filterMethod,this.filterColumns,this.filterArguments,!1),!0}return!1}updateSize(){const s=new SharedArrayBuffer(this.parent.size),f=new Uint8Array(s);f.set(this.filterArray),this.filterBuffer=s,this.filterArray=f,this.bgfArray&&(this.bgfData,this.setBackgroundFilter(b.column.b.cat)),this.filterMethod&&this.filter(this.filterMethod,this.filterColumns,this.filterArguments,!1)}setBackgroundFilter(s,f){const _=this.parent.columnIndex[s],S=_.values.indexOf(f),T=_.data;this.bgfData={column:s,cat:f},this.bgfArray=new Uint8Array(this.parent.size);for(let F=0;F<this.parent.size;F++)T[F]===S?this.bgfArray[F]=1:this.filterArray[F]=2}clearBackGroundFilter(){this.bgfArray=null,this.bgfData=null}destroy(s=!0){this.removeFilter(s),this.filterBuffer=null,this.localFilter=null,this.parent.dimensions.splice(this.parent.dimensions.indexOf(this),1)}};Dimension$1.types={base_dimension:Dimension$1};class CategoryDimension extends Dimension$1{constructor(s){super(s),this.worker=new Worker(new URL(""+new URL("../assets/catWorker-D5lhlpxE.js",import.meta.url).href,import.meta.url))}filterCategoriesPredicate(s,f){const _=s,S=this.parent.columnIndex[f[0]],T=S.data,F=S.values;if(typeof _=="string"){const J=F.indexOf(_);if(S.datatype==="multitext"){const oe=S.stringLength,se=ae=>{const ge=ae*oe;for(let he=ge;he<ge+oe;he++)if(T[he]===J)return!0;return!1};return this.filterPredicate({predicate:se})}const K=oe=>T[oe]===J;return this.filterPredicate({predicate:K})}const M=new Set;for(const J of _)M.add(F.indexOf(J));if(S.datatype==="multitext"){const J=S.stringLength,K=_.operand==="and",oe=_.map(ge=>F.indexOf(ge)),se=M.size===1,ae=ge=>{const he=ge*J,Be=K?oe.slice(0):M;for(let pe=he;pe<he+J;pe++){if(T[pe]===65535&&K&&se&&Be.length<oe.length)return!0;if(K){const be=Be.indexOf(T[pe]);if(be!==-1&&(Be.splice(be,1),Be.length===0))return!0}else if(Be.has(T[pe]))return!0}return!1};return this.filterPredicate({predicate:ae})}const P=Array.from(M);if(P.length===1){const J=P[0],K=oe=>T[oe]===J;return this.filterPredicate({predicate:K})}if(P.length===2){const J=P[0],K=P[1],oe=se=>T[se]===J||T[se]===K;return this.filterPredicate({predicate:oe})}const H=J=>M.has(T[J]);return this.filterPredicate({predicate:H})}filterCategories(s,f){if(window.predicateTest)return this.filterCategoriesPredicate(s,f);const _=s,S=this.parent,T=S.columnIndex[f[0]],F=T.data,M=S.filterArray,P=this.filterArray,H=T.values,J=new Set,K=this.parent.size;if(typeof _=="string"){const oe=H.indexOf(_);if(T.datatype==="multitext"){const se=T.stringLength;for(let ae=0;ae<K;ae++){const ge=ae*se;let he=!1;for(let Be=ge;Be<ge+se;Be++)if(F[Be]===oe){he=!0;break}he?(P[ae]===1&&--M[ae]===0&&S.filterSize++,P[ae]=0):(P[ae]===0&&++M[ae]===1&&S.filterSize--,P[ae]=1)}}else for(let se=0;se<K;se++)F[se]===oe?(P[se]===1&&--M[se]===0&&S.filterSize++,P[se]=0):(P[se]===0&&++M[se]===1&&S.filterSize--,P[se]=1)}else{for(const oe of _)J.add(H.indexOf(oe));if(T.datatype==="multitext"){const oe=T.stringLength,se=_.operand==="and",ae=_.map(he=>H.indexOf(he)),ge=J.size===1;for(let he=0;he<K;he++){const Be=he*oe;let pe=!1;const be=se?ae.slice(0):J;for(let Re=Be;Re<Be+oe;Re++){if(F[Re]===65535){se&&ge&&be.length<ae.length&&(pe=!0);break}if(se){const Fe=be.indexOf(F[Re]);if(Fe!==-1&&(be.splice(Fe,1),be.length===0)){pe=!0;break}}else if(be.has(F[Re])){pe=!0;break}}pe?(P[he]===1&&--M[he]===0&&S.filterSize++,P[he]=0):(P[he]===0&&++M[he]===1&&S.filterSize--,P[he]=1)}}else for(let oe=0;oe<K;oe++)J.has(F[oe])?(P[oe]===1&&--M[oe]===0&&S.filterSize++,P[oe]=0):(P[oe]===0&&++M[oe]===1&&S.filterSize--,P[oe]=1)}}filterMultipleCategories(s,f){const _=this.parent,S=[],T=[];for(let H=0;H<f.length;H++){const J=_.columnIndex[f[H]];S.push(J.data),T.push(J.values.indexOf(s[H]))}const F=_.filterArray,M=this.filterArray,P=_.size;for(let H=0;H<P;H++){let J=!0;for(let K=0;K<S.length;K++)if(S[K][H]!==T[K]){J=!1;break}J?(M[H]===1&&--F[H]===0&&_.filterSize++,M[H]=0):(M[H]===0&&++F[H]===1&&_.filterSize--,M[H]=1)}}getSankeyData(s,f,_={}){const S=this.parent.columnIndex[f[0]],T=this.parent.columnIndex[f[1]];_.values=S.values,_.values2=T.values,_.method=_.method||"sankey",_.method==="proportion"&&(_.cats=_.category==null?null:this.parent.columnIndex[f[2]].buffer);const F=performance.now(),M=P=>{console.log(`calc sankey ${S.name} ${T.name} : ${performance.now()-F}`),s(P.data),this.worker.removeEventListener("message",M)};this.worker.addEventListener("message",M),this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,S.buffer,_,T.buffer])}getCategories(s,f,_={}){const S=this.parent.columnIndex[f];_.values=S.values,_.datatype=S.datatype,_.stringLength=S.stringLength,performance.now();const T=F=>{s(F.data),this.worker.removeEventListener("message",T)};this.worker.addEventListener("message",T),this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,S.buffer,_])}filterUnique(s,f){const _=this.parent.columnIndex[f[0]],S=s.split(" "),T=F=>{const M=_.getValue(F);return S.every(P=>M.indexOf(P)!==-1)};return this.filterPredicate({predicate:T})}destroy(){super.destroy(),this.worker.terminate()}}Dimension$1.types.category_dimension=CategoryDimension;class RangeDimension extends Dimension$1{constructor(s){super(s),this.worker=new Worker(new URL(""+new URL("../assets/binWorker-DIC2QqPk.js",import.meta.url).href,import.meta.url))}filterSquare(s,f){let _=null;typeof f[0]!="string"?_=f[0]:_=this.parent.columnIndex[f[0]].data;const S=this.parent.columnIndex[f[1]].data,T=s.range1,F=s.range2,M=P=>{const H=_[P],J=S[P];return H>=T[0]&&H<=T[1]&&J>=F[0]&&J<=F[1]&&!Number.isFinite(H)&&!Number.isFinite(J)};return this.filterPredicate({predicate:M},f)}filterPoly(s,f){const _=s;let S=Number.MAX_VALUE,T=Number.MAX_VALUE,F=Number.MIN_VALUE,M=Number.MIN_VALUE;for(const oe of _)S=Math.min(S,oe[0]),F=Math.max(F,oe[0]),T=Math.min(T,oe[1]),M=Math.max(M,oe[1]);let P=null;typeof f[0]!="string"?P=f[0]:P=this.parent.columnIndex[f[0]].data;const H=this.parent.columnIndex[f[1]].data,J=_,K=oe=>{const se=P[oe],ae=H[oe];let ge=!1;if(se<S||se>F||ae<T||ae>M||!Number.isFinite(se)||!Number.isFinite(ae))return!1;for(let he=0,Be=J.length-1;he<J.length;Be=he++){const pe=J[he][0],be=J[he][1],Re=J[Be][0],Fe=J[Be][1];be>ae!=Fe>ae&&se<(Re-pe)*(ae-be)/(Fe-be)+pe&&(ge=!ge)}return ge};return this.filterPredicate({predicate:K},f)}filterRange(s,f){const _=s.min,S=s.max,T=this.parent.columnIndex[f[0]].data,F=M=>{const P=T[M];return P>=_&&P<=S&&!Number.isNaN(P)};return this.filterPredicate({predicate:F},f)}getBins(s,f,_={}){const S=this.parent.columnIndex[f];_.bins=_.bins===void 0?10:_.bins,_.min=_.min===void 0?S.minMax[0]:_.min,_.max=_.max===void 0?S.minMax[1]:_.max;const T=performance.now(),F=M=>{console.log(`calculate bins ${S.name} : ${performance.now()-T}`),s(M.data)};this.worker.onmessage=F,this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,[S.buffer,S.datatype],_])}getBinsAsync(s,f={}){return new Promise(_=>{this.getBins(_,s,f)})}destroy(){super.destroy(),this.worker.terminate()}}Dimension$1.types.range_dimension=RangeDimension;class CatColDimension extends Dimension$1{constructor(s){super(s),this.worker=new Worker(new URL(""+new URL("../assets/catColWorker-BRK20MZB.js",import.meta.url).href,import.meta.url))}filterCatCol(s,f){const _=this.parent,S=_.filterArray,T=this.filterArray,F=_.columnIndex[f[0]],M=F.data,P=M.length,H=_.columnIndex[f[1]].data,J=s.threshold||0,K=F.values.indexOf(s.cat);for(let oe=0;oe<P;oe++){const se=H[oe];M[oe]===K&&!Number.isNaN(se)&&se>J?(T[oe]===1&&--S[oe]===0&&_.filterSize++,T[oe]=0):(T[oe]===0&&++S[oe]===1&&_.filterSize--,T[oe]=1)}}getAverages(s,f,_={}){_.method=_.method||"mean";const S=performance.now(),T=this.parent.columnIndex;this.worker.onmessage=M=>{console.log(`calc averages  ${performance.now()-S}`),s(M.data)},_.values=T[f[0]].values,_.columns=f.slice(1);const F=[];for(let M=1;M<f.length;M++)F.push([T[f[M]].buffer,T[f[M]].datatype]);this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,T[f[0]].buffer,F,_])}destroy(){super.destroy(),this.worker.terminate()}}Dimension$1.types.catcol_dimension=CatColDimension;class CatRangeDimension extends RangeDimension{constructor(s,f){super(s,f),this.worker.terminate(),this.worker=new Worker(new URL(""+new URL("../assets/boxPlotWorker-BvOiGWqU.js",import.meta.url).href,import.meta.url))}getKernalDensity(s,f,_={}){const S=performance.now(),T=this.parent.columnIndex[f[0]],F=this.parent.columnIndex[f[1]];this.parent.getMinMaxForColumn(f[1]),_.type="kernal_density",_.scaletrim&&(_.scaletrim=F.quantiles[_.scaletrim]),_.values=T.values;const M=P=>{console.log(`calculate violin ${T.name} : ${performance.now()-S}`),s(P.data)};this.worker.onmessage=M,this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,T.buffer,[F.buffer,F.datatype],_])}getMultiBoxPlotData(s,f,_={}){const S=this.parent.columnIndex,T=performance.now(),F=f.map(P=>[S[P].buffer,c.Index[P].datatype]);_.analysis="multi",_.cat=this.parent.getColumnValues(f[0]).indexOf(_.category);const M=P=>{console.log(`calculate multiboxplot cols:${f.length} time: ${performance.now()-T}`),s(P.data)};this.worker.onmessage=M,this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,F.slice(1),F[0],_])}getBoxPlotData(s,f,_={}){const S=performance.now(),T=this.parent.columnIndex[f[0]],F=this.parent.columnIndex[f[1]];_.analysis="boxplot",_.values=T.values;const M=P=>{console.log(`calculate boxplot ${T.name} : ${performance.now()-S}`),s(P.data)};this.worker.onmessage=M,this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,T.buffer,[F.buffer,F.datatype],_])}}Dimension$1.types.catrange_dimension=CatRangeDimension;class DensityDimension extends RangeDimension{constructor(s){super(s),this.worker.terminate(),this.worker=new Worker(new URL(""+new URL("../assets/densityWorker-CfexsIos.js",import.meta.url).href,import.meta.url),{type:"module"})}getDensityContours(s,f,_={}){const S=performance.now(),T=this.parent.columnIndex;this.worker.onmessage=F=>{console.log(`calc density contours  ${performance.now()-S}`),s(F.data)},this.worker.postMessage([this.filterBuffer,this.parent.filterBuffer,[T[f[0]].buffer,T[f[0]].datatype],[T[f[1]].buffer,T[f[1]].datatype],T[f[2]].buffer,_])}}Dimension$1.types.density_dimension=DensityDimension;class ValueSetDimension extends Dimension$1{filterValueset(s,f){if(s.size===0)return;const _=f[0],T=this.parent.columnIndex[_];if(T.values){const M=new Set;s.forEach(P=>{const H=T.values.indexOf(P);H!==-1&&M.add(H)}),s=M}const F=M=>s.has(T.data[M]);return this.filterPredicate({predicate:F},f)}}Dimension$1.types.valueset_dimension=ValueSetDimension;class SortableDimension extends Dimension$1{constructor(s){super(s),this.sortWorker=new Worker(new URL(""+new URL("../assets/sortWorker-ydVuDOCI.js",import.meta.url).href,import.meta.url)),this.orderBuffer=new SharedArrayBuffer(this.parent.size*4),this.order=new Uint32Array(this.orderBuffer);for(let f=0;f<this.parent.size;f++)this.order[f]=f}setSortOrder(s){this.order.set(s)}async sort(s){return await new Promise((f,_)=>{const S=this.orderBuffer,T=s.map(F=>{const M=this.parent.columnIndex[F.col];return{datatype:M.datatype,buffer:M.buffer,values:M.values,stringLength:M.stringLength,desc:F.desc}});this.sortWorker.onmessage=F=>{f(F.data)},this.sortWorker.postMessage({orderBuffer:S,columns:T})})}destroy(){super.destroy(),this.sortWorker.terminate()}}Dimension$1.types.sortable_dimension=SortableDimension;class DeepToolsDimension extends SortableDimension{constructor(s){super(s),this.deepToolsWorker=new Worker(new URL(""+new URL("../assets/deepToolsWorker-Id75ayJb.js",import.meta.url).href,import.meta.url))}setParameters({groups:s,columns:f,rows:_,length:S,displayData:T,data:F}){this.dimensions={groups:s,columns:f,rows:_,length:S},this.displayData=T,this.data=F}updateData(s,f=!1){return new Promise((_,S)=>{this.deepToolsWorker.onmessage=T=>{_(T.data)},this.deepToolsWorker.postMessage({displayData:this.displayData,data:this.data,filterBuffer:this.parent.filterBuffer,dimensions:this.dimensions,orderBuffer:this.orderBuffer,colorScale:s,colorOnly:f})})}destroy(){super.destroy(),this.deepToolsWorker.terminate()}}Dimension$1.types.deeptools_dimension=DeepToolsDimension;function getColorLegendCustom(d,s={}){const f=d.ticks(s.ticks||4),_=f.map(S=>d(S));return getColorLegend(_,f,s)}function getColorLegend(d,s,f={}){const _=d.length,S=f.type||"color",T=S==="circle"?20:12,F=_*T+(_+2)*2,M=createEl("div",{styles:{width:"120px",height:`${(F>215?215:F)+35}px`,position:"absolute",border:"0.5px solid black"},classes:["legend-container"]});createEl("div",{styles:{height:"20px",whiteSpace:"nowrap"},classes:["legend-title"],text:f.label},M);const P=createEl("div",{styles:{overflowY:"auto",overflowX:"hidden",height:"calc(100% - 10px)",width:"100%"},classes:["legend-body"]},M),H=createSVGEl("svg",{height:F,width:180,styles:{position:"relative"}},P),J=createSVGEl("g",{},H),K=S==="color"?14:S==="line"?20:30;for(let oe=0;oe<_;oe++){S==="color"?createSVGEl("rect",{y:(oe+1)*2+oe*T,x:2,height:"10",width:"10",styles:{fill:d[oe]}},J):S==="line"?createSVGEl("rect",{y:(oe+1)*2+oe*T,x:2,height:"10",width:d[oe],styles:{fill:"gray"}},J):S==="circle"&&createSVGEl("circle",{cy:(oe+1)*2+oe*T+4,cx:15,r:d[oe],styles:{fill:"gray"}},J);const se=createSVGEl("text",{y:(oe+1)*2+oe*T+6+3,x:K,"alignment-baseline":"center",styles:{"font-size":"12px",fill:"currentcolor"},text:s[oe]===""?"none":s[oe]},J);select(se).style("fill","currentcolor")}return makeDraggable(M,{handle:".legend-body"}),makeResizable(M),M}function getColorBar(d,s={}){const f=s,_=d.length,S=d.map((se,ae)=>[`${Math.floor(ae/_*100)}%`,se]),T=f.width||120,F=f.height||45,M=createSVGEl("svg",{height:F,width:T,styles:{position:"relative"}}),P=select(M).append("g"),H=getRandomString();f.label&&P.append("text").text(f.label).attr("x",10).style("fill","currentColor").attr("alignment-baseline","hanging").style("font-size","12px");const J=P.append("defs").append("linearGradient").attr("id",H).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");let K=F;if(f.label&&(K-=10),f.range&&(K-=25),P.append("rect").attr("x",f.range?10:0).attr("y",f.label?10:0).attr("width",f.range?T-20:20).attr("height",K).style("fill",`url(#${H})`),S.forEach(se=>{J.append("stop").attr("offset",se[0]).attr("stop-color",se[1]).attr("stop-opacity",1)}),f.range){const se=linear$1().domain([f.range[0],f.range[1]]).range([0,T-20]),ae=axisBottom(se).tickFormat((ge,he)=>ge>=1e4?Number.parseFloat(ge).toPrecision(2):ge).ticks(Math.ceil(T/20));P.append("g").call(ae).attr("transform",`translate(10,${F-25})`).selectAll("text").style("text-anchor","end").attr("dx","-.4em").attr("dy",".4em").attr("transform","rotate(-45)")}const oe=createEl("div",{height:F,width:T,styles:{position:"absolute"},classes:["legend-container"]});return oe.append(M),makeDraggable(oe),oe}class DataStore{constructor(s,f={},_=null){Bt(this,"_filteredIndicesPromise",null);Bt(this,"_filteredIndexWorker",new Worker(new URL(""+new URL("../assets/filteredIndexWorker-CEl1713S.js",import.meta.url).href,import.meta.url)));if(this.size=s,this.filterSize=s,this.columns=[],this.columnIndex={},this.listeners={},this.indexes={},this.filterBuffer=new SharedArrayBuffer(s),this.filterArray=new Uint8Array(this.filterBuffer),this.dimensions=[],this.name=f.name,this.avivator=f.avivator,this.textDecoder=new TextDecoder,this.columnGroups={},this.subtypeToGroup={},this.interactions=f.interactions,this.deeptools=f.deeptools,this.subgroups={},this.subgroupDataSources=new Set,this.accessOtherDataStore=[],this.syncColumnColors=[],this.linkColumns=[],this.regions=f.regions,makeObservable(this,{_filteredIndicesPromise:observable,_callListeners:action}),this.addListener("invalidateFilteredIndicesCache",action(()=>{this._filteredIndicesPromise=null})),f.row_data_loader&&(_!=null&&_.rowDataLoader?(this.rowDataLoader=_.rowDataLoader,this.rowData=new Map):console.warn(`datasource ${this.name} requires a row data loader but none has been supplied`)),f.binary_data_loader&&(_!=null&&_.binaryDataLoader?(this.binaryDataLoader=_.binaryDataLoader,this.binaryData=new Map):console.warn(`datasource ${this.name} requires a binary data loader but none has been supplied`)),this.columnsWithData=[],this.dirtyColumns={added:{},removed:{},data_changed:{},colors_changed:{}},this.dirtyMetadata=new Set,f.offsets&&(f.offsets.values=f.offsets.values||{},this.offsets=f.offsets),this.images=f.images,this.genome_browser=f.genome_browser,this.tree_diagram=f.tree_diagram,f.columns)for(const S of f.columns)this.addColumn(S,S.data);if(f.columnGroups)for(const S of f.columnGroups)this.addColumnGroup(S);if(f.large_images&&(this.large_images=f.large_images),f.links){this.links=f.links;for(const S in f.links){const T=f.links[S];if(T.rows_as_columns){const F=T.rows_as_columns.subgroups;this.subgroupDataSources.add(S);for(const M in F)this.subgroups[M]={subgroup:F[M],dataSource:S,name_column:T.rows_as_columns.name_column}}T.access_data&&this.accessOtherDataStore.push({dataSource:S,index:T.index}),T.sync_column_colors&&this.syncColumnColors.push({dataSource:S,columns:T.sync_column_colors}),T.columns&&this.linkColumns.push({dataSource:S,columns:T.columns})}}}isFiltered(){return this.filterSize!==this.size}addListener(s,f){this.listeners[s]=f}removeListener(s){delete this.listeners[s]}_callListeners(s,f){for(const _ in this.listeners)try{this.listeners[_](s,f)}catch(S){console.error(`Error calling listener '${_}' for event '${s}'`,S)}}removeAllFilters(){this.filterArray.fill(0);const s=[];for(const f of this.dimensions){if(f.noclear){s.push(f);continue}if(f.filterArray.fill(0),f.filterMethod=null,f.bgfArray)for(let _=0;_<this.size;_++)f.bgfArray[_]===0&&(f.filterArray[_]=2)}this.filterSize=this.size;for(const f of s){const _=f.filterArray;for(let S=0;S<_.length;S++)_[S]===1&&++this.filterArray[S]===1&&this.filterSize--}this._callListeners("filtered","all_removed")}dataChanged(s,f=!0){let _=!1;for(const S of this.dimensions)S.reFilterOnDataChanged(s)&&(_=!0);if(f)for(const S of s)this.setColumnIsDirty(S);_&&this._callListeners("filtered"),this._callListeners("data_changed",{columns:s,hasFiltered:_})}dataHighlighted(s,f){this.highightedData=s,this.loadRowData(s[0]).then(_=>this._callListeners("data_highlighted",{indexes:s,source:f,data:_}))}async loadRowData(s){if(!this.rowDataLoader)return null;if(this.rowData.has(s))return this.rowData.get(s);const f=await this.rowDataLoader(this.name,s);return this.rowData.set(s,f),f}async loadBinaryData(s){if(!this.binaryDataLoader)return null;if(this.binaryData.has(s))return this.binaryData.get(s);const f=await this.binaryDataLoader(this.name,s);return this.binaryData.set(s,f),f}getHighlightedData(){return this.highightedData}triggerFilter(){this._callListeners("filtered")}setColumnIsDirty(s){this.dirtyColumns.added[s]||(this.dirtyColumns.data_changed[s]=!0)}setAllColumnsClean(){this.dirtyColumns.added={},this.dirtyColumns.removed={},this.dirtyColumns.data_changed={},this.dirtyColumns.colors_changed={},this.dirtyMetadata.clear()}getFilter(){return this.filterArray}isRowFiltered(s){return this.filterArray[s]===0}_calculateCategories(s){const f=s.values,_=s.data;for(const S of f);for(let S=0;S<_.length;S++)f[_[S]]}addColumn(s,f=null,_=!1){const S={name:s.name,field:s.field,datatype:s.datatype,getValue:T=>this.getRowAsObject(T,[s.field])[s.field],subgroup:s.subgroup};return S.field||(S.field=s.name),s.colors&&(S.colors=s.colors),s.editable&&(S.editable=!0),s.is_url&&(S.is_url=!0),s.subgroup&&(S.subgroup=s.subgroup,S.sgindex=s.sgindex,S.sgtype=s.sgtype),isColumnText(s)?(S.stringLength=s.stringLength,s.delimiter&&(S.delimiter=s.delimiter),S.values=s.values||[""]):isColumnNumeric(s)?(S.colorLogScale=s.colorLogScale,S.minMax=s.minMax,S.quantiles=s.quantiles):S.stringLength=s.stringLength,this.columns.push(S),this.columnIndex[S.field]=S,f&&this.setColumnData(s.field,f),_&&(this.dirtyColumns.added[s.field]=!0),S}getSuggestedValues(s,f,_=10){const S=this.columnIndex[f],T=s.toLowerCase(),F=s.toUpperCase(),M=[];if(S.datatype==="unique"){const P=new TextEncoder,H=P.encode(T),J=P.encode(F),K=s.length,oe=S.data,se=S.stringLength;for(let ae=0;ae<oe.length-K;ae++){let ge=!0;for(let he=0;he<K;he++)if(H[he]!==oe[ae+he]&&J[he]!==oe[ae+he]){ge=!1;break}if(ge){const he=Math.floor(ae/se),Be=this.textDecoder.decode(S.data.slice(he*se,he*se+se)).replaceAll("\0","");if(M.push({value:Be,index:he}),M.length>_)break}}}else if(S.datatype==="text"||S.datatype==="multitext"){const P=s.length;for(let H=0;H<S.values.length;H++){const J=S.values[H];let K=!0;for(let oe=0;oe<J.length-P;oe++){K=!0;for(let se=0;se<P;se++){if(J[se+oe]!==T[se]&&J[se+oe]!==F[se]){K=!1;break}console.log("match")}if(K)break;console.log(oe)}if(K&&(M.push({value:J,index:H}),M.length>_))break}}return M}addColumnFromField(s){const f=s.split("|");if(f.length!==3)throw new Error(`field ${s} cannot be found in datasource ${this.name}`);let _=this.subtypeToGroup[f[0]],S=null;return _?S=_.subgroups[f[0]]:(_=this.subgroups[f[0]],S=_.subgroup),this.columnIndex[s]?this.columnIndex[s]:this.addColumn({name:f[1],field:s,datatype:"double",subgroup:S.name,sgindex:f[2],sgtype:S.type})}getColumnList(s=null,f=!1){const _=[],S={},T=Object.keys(this.subgroups).map(H=>(S[H]=[],H)),F=Array.isArray(s),M=T.length!==0;for(const H in this.columnIndex){const J=this.columnIndex[H];if(s){if(F){if(s.indexOf(J.datatype)===-1)continue}else if(s==="number"){if(!isColumnNumeric(J))continue}else if(s==="string"){if(!isColumnText(J))continue}else if(s!=="all"&&s!==J.datatype)continue}if(M){let K=!1;for(const oe of T)if(J.field.startsWith(`${oe}|`)){const se=this.subgroups[oe];S[oe].push({name:J.name,field:J.field,datatype:J.datatype,subgroup:{dataSource:se.dataSource,name_column:se.name_column}}),K=!0;break}if(K)continue}_.push({name:J.name,field:J.field,datatype:J.datatype})}let P=_.sort((H,J)=>H.name.localeCompare(J.name));if(M)for(const H in S)S[H].sort((J,K)=>J.name.localeCompare(K.name)),P=P.concat(S[H]);return f&&P.push({name:"None",field:"__none__",datatype:"double"}),P}getDimension(s){if(!Dimension$1.types[s])throw`Adding non existent Dimension: ${s}`;const f=new Dimension$1.types[s](this);return this.dimensions.push(f),f}getRowAsObject(s,f){f||(f=this.columnsWithData);const _={};for(const S of f){const T=this.columnIndex[S];let F=T.data[s];if(T.datatype==="text"||T.datatype==="text16")F=T.values[F];else if(T.datatype==="double"||T.datatype==="integer"||T.datatype==="int32")Number.isNaN(F)&&(F="missing");else if(T.datatype==="multitext"){const M=", ",P=T.data.slice(s*T.stringLength,s*T.stringLength+T.stringLength);F=Array.from(P.filter(H=>H!==65535)).map(H=>T.values[H]).join(M)}else F=this.textDecoder.decode(T.data.slice(s*T.stringLength,s*T.stringLength+T.stringLength)),F=F.replaceAll("\0","");_[S]=F}return _.__index__=s,_}getFirstFilteredIndex(){for(let s=0;s<this.size;s++)if(this.filterArray[s]===0)return s}async getFilteredIndices(){return this._filteredIndicesPromise?this._filteredIndicesPromise:(action(()=>this._filteredIndicesPromise=new Promise((s,f)=>{const _=this._filteredIndexWorker,S=this.filterSize*Uint32Array.BYTES_PER_ELEMENT,T=new SharedArrayBuffer(S);_.postMessage({filterBuffer:this.filterBuffer,outputBuffer:T}),_.onmessage=F=>{s(new Uint32Array(T))}}))(),this._filteredIndicesPromise)}getFilteredValues(s){const f=new Array(this.filterSize);let _=0;for(let S=0;S<this.size;S++)this.filterArray[S]===0&&(f[_]=this.getRowText(S,s),_++);return f}getRowText(s,f){return this.getRowAsObject(s,[f])[f]}setColumnOffset(s,f){if(!this.offsets)throw new Error("Attempting to set offsets but none are specified in config");s.filter=s.filter||"all";const _=this.offsets.values;let S=_[s.filter];S||(S={},_[s.filter]=S);let T=S[s.group];T||(T={offsets:[0,0],rotation:0},S[s.group]=T),this.updateColumnOffsets(s,s.rotation,f),this.dirtyMetadata.add("offsets")}_getRotationOrigin(s,f,_){const S=this.offsets,T=this.columnIndex[s],F=T.values.indexOf(f),M=T.data,P=this.columnIndex[S.param[0]],H=this.columnIndex[S.param[1]];let J=null,K=null;S.background_filter&&(K=this.columnIndex[S.background_filter],J=K.values.indexOf(_));const oe=[Number.MAX_VALUE,Number.MIN_VALUE],se=[Number.MAX_VALUE,Number.MIN_VALUE];for(let ge=0;ge<this.size;ge++)K&&K.data[ge]!==J||M[ge]===F&&(oe[0]=Math.min(oe[0],P.originalData[ge]),oe[1]=Math.max(oe[1],P.originalData[ge]),se[0]=Math.min(se[0],H.originalData[ge]),se[1]=Math.max(se[1],H.originalData[ge]));const ae=ge=>ge[0]+(ge[1]-ge[0])/2;return[ae(oe),ae(se)]}initiateOffsets(){const s=this.offsets,f=this.columnIndex[s.param[0]],_=this.columnIndex[s.param[1]];f.originalData=new Float32Array(f.data),_.originalData=new Float32Array(_.data)}_getOffsetValues(s,f){const _=this.offsets;let S=null,T=null;if(_.background_filter){const P=this.columnIndex[_.background_filter];S=P.data,T=P.values}const F=this.columnIndex[_.groups],M=[];for(const P in _.values)if(!(s&&P!==s.filter))for(const H in _.values[P]){if(s&&H!==s.group)continue;const J=_.values[P][H],K={index:F.values.indexOf(H)};if(P!=="all"&&(K.filterData=S,K.filterValue=T.indexOf(P)),f&&(J.rotation_center||(J.rotation_center=this._getRotationOrigin(_.groups,H,P)),K.rotation_center=[J.rotation_center[0]+J.offsets[0],J.rotation_center[1]+J.offsets[1]]),s?f?(K.rotation=s.rotation,J.rotation+=s.rotation):(J.offsets[0]+=s.offsets[0],J.offsets[1]+=s.offsets[1],K.offsets=s.offsets):f?K.rotation=J.rotation:K.offsets=J.offsets,f){const oe=Math.PI/180*K.rotation;K.cos=Math.cos(oe),K.sin=Math.sin(oe)}M.push(K)}return M}resetColumnOffsets(s,f,_){s=s||"all";const S=this.offsets;if(!S)throw new Error("Attempting to reset offsets but none are specified in config");delete this.offsets.values[s][f];let T=null,F=null;s!=="all"&&(T=this.columnIndex[this.offsets.background_filter],F=T.values.indexOf(s));const M=this.getColumnValues(S.groups).indexOf(f),P=this.columnIndex[S.groups].data,H=this.columnIndex[S.param[0]],J=this.columnIndex[S.param[1]];for(let K=0;K<this.size;K++)T&&T[K]!==F||P[K]===M&&(J.data[K]=J.originalData[K],H.data[K]=H.originalData[K]);_&&this.dataChanged([S.param[0],S.param[1]],!1),this.dirtyMetadata.add("offsets")}updateColumnOffsets(s,f=!1,_=!1){const S=this.offsets,F=this.columnIndex[S.groups].data,M=this.columnIndex[S.param[0]],P=this.columnIndex[S.param[1]],H=this._getOffsetValues(s,f);for(let J=0;J<this.size;J++)for(const K of H)if(!(K.filterData&&K.filterData[J]!==K.filterValue)&&F[J]===K.index)if(f){const oe=K.rotation_center[0],se=K.rotation_center[1],ae=K.cos*(M.data[J]-oe)+K.sin*(P.data[J]-se)+oe,ge=K.cos*(P.data[J]-se)-K.sin*(M.data[J]-oe)+se;M.data[J]=ae,P.data[J]=ge}else M.data[J]=M.data[J]+K.offsets[0],P.data[J]=P.data[J]+K.offsets[1];_&&this.dataChanged([S.param[0],S.param[1]],!1)}getColumnIndex(s){if(this.indexes[s])return this.indexes[s];const f=this.columnIndex[s],_={};if(f.datatype==="unique")for(let S=0;S<this.size;S++){let T=this.textDecoder.decode(f.data.slice(S*f.stringLength,S*f.stringLength+f.stringLength)).replaceAll("\0","");T.includes("#")&&(T=T.split("#")[1]),_[T]=S}else for(let S=0;S<this.size;S++)_[f.values[f.data[S]]]=S;return this.indexes[s]=_,_}getDataAsBlob(s,f="all",_="	",S=`
`){let T=null;typeof f!="string"&&(T=f);const F=[],M=["index"].concat(s),P=T?T.length:this.size;F.push(M.join(_));const H=1e4,J=[];for(let K=0;K<P;K++){let oe=K;if(T)oe=T[K];else if(f==="filtered"&&this.filterArray[K]===1)continue;const se=this.getRowAsObject(oe,s),ae=[K].concat(s.map(ge=>se[ge]));F.push(ae.join(_)),F.length>=H&&(J.push(F.join(S)),F.length=0)}return F.length>0&&J.push(F.join(S)),new Blob([J.join(S)],{type:"text/plain"})}setColumnData(s,f){const _=this.columnIndex[s];if(!_)throw`column ${s} is not present in data store`;let S=null;if(Array.isArray(f)?S=this._convertColumn(_,f):S=f,_.buffer=S,_.datatype==="integer"||_.datatype==="double"||_.datatype==="int32"){const T=_.data=_.datatype==="int32"?new Int32Array(S):new Float32Array(S);if(!_.minMax){let F=Number.MAX_VALUE,M=Number.MIN_VALUE;for(let P=0;P<T.length;P++){const H=T[P];Number.isNaN(H)||(F=H<F?H:F,M=H>M?H:M)}_.minMax=[F,M]}if(!_.quantiles){const F=_.data.filter(M=>!Number.isNaN(M)).sort();_.quantiles={};for(const M of[.05,.01,.001])_.quantiles[M]=[quantileSorted(F,M),quantileSorted(F,1-M)]}}else _.datatype==="multitext"||_.datatype==="text16"?_.data=new Uint16Array(S):_.data=new Uint8Array(S);this.columnsWithData.push(s)}appendColumnData(s,f,_){const S=this.columnIndex[s];let T=Uint8Array,F=_;S.datatype==="integer"||S.datatype==="double"?(F=F*4,T=Float32Array):S.datatype==="int32"?(F=F*4,T=Int32Array):S.datatype==="unique"&&(F=F*S.stringLength);const M=new SharedArrayBuffer(F),P=new T(M);P.set(S.data),P.set(new T(f),S.data.length),S.data=P,S.buffer=M}addDataToStore(s,f){const _=f+this.size;for(const F of s)this.appendColumnData(F.column,F.data,_);const S=new SharedArrayBuffer(_),T=new Uint8Array(S);T.set(this.filterArray),this.filterBuffer=S,this.filterArray=T,this.size=_,this.filterSize+=f;for(const F of this.dimensions)F.updateSize();this._callListeners("data_added",this.size)}cleanColumnData(s){const f={},_=this.columnIndex[s];for(const F in _.values)f[F]=0;for(let F=0;F<this.size;F++)f[_.data[F]]++;const S=[],T={};for(let F=0;F<_.values.length;F++)f[F]!==0&&(S.push(_.values[F]),T[F]=S.length-1);for(let F=0;F<this.size;F++)_.data[F]=T[_.data[F]];_.values=S,this.setColumnIsDirty(s),this.dataChanged([s])}_convertColumn(s,f){const _=f.length;if(s.datatype==="text"||s.datatype==="text16"){const M=s.datatype==="text",P=new SharedArrayBuffer(M?this.size:this.size*2),H={};for(let se=0;se<_;se++){const ae=f[se];H[ae]===void 0?H[ae]=1:H[ae]++}const J=[];for(const se in H)J.push([se,H[se]]);s.values=[];const K={};J.sort((se,ae)=>ae[1]-se[1]);for(let se=0;se<J.length;se++)s.values.push(J[se][0]),K[J[se][0]]=se;const oe=M?new Uint8Array(P):new Uint16Array(P);for(let se=0;se<_;se++)oe[se]=K[f[se]];return P}if(s.datatype==="integer"||s.datatype==="double"||s.datatype==="int32"){const M=new SharedArrayBuffer(this.size*4),P=s.datatype==="int32"?new Int32Array(M):new Float32Array(M);for(let H=0;H<_;H++)P[H]=f[H];return M}if(s.datatype==="multitext"){s.delimiter;const M=new Set;let P=0;for(let ae=0;ae<_;ae++){const he=f[ae].split(",");P=Math.max(P,he.length),he.forEach(Be=>M.add(Be.trim()))}M.delete("");const H=new SharedArrayBuffer(this.size*P*2),J=new Uint16Array(H);J.fill(65535);const K=new Array(M.size),oe={};let se=0;for(const ae of M)oe[ae]=se,K[se]=ae,se++;for(let ae=0;ae<_;ae++){const ge=ae*P,he=f[ae];if(he==="")continue;const Be=he.split(",");Be.sort();for(let pe=0;pe<Be.length;pe++)J[ge+pe]=oe[Be[pe].trim()]}return s.values=K,s.stringLength=P,H}let S=0;for(let M=0;M<_;M++)S=Math.max(S,f[M].length);s.stringLength=S;const T=new TextEncoder,F=new SharedArrayBuffer(this.size*S);for(let M=0;M<_;M++){const P=T.encode(f[M].substring(0,S));new Uint8Array(F,M*S,S).set(P,0)}return F}getColorFunction(s,f={}){let _=this.columnIndex[s];s==null&&(_=s={datatype:f.datatype},f.useValue=!0);const S=_.data,T=f.overideValues||{},F=this.getColumnColors(s,f);function M(P){return Number.isNaN(P)||T.fallbackOnZero&&P===0}if(_.datatype==="text"||_.datatype==="text16"||_.datatype==="multitext")return P=>F[S[P]];if(_.datatype==="integer"||_.datatype==="double"||_.datatype==="int32"){const P=T.min==null?_.minMax[0]:T.min,H=T.max==null?_.minMax[1]:T.max,J=f.bins||100,K=(H-P)/J,oe=f.asArray?[255,255,255]:"#ffffff";return f.useValue?se=>{if(M(se))return oe;let ae=Math.floor((se-P)/K);return ae<0?ae=0:ae>=F.length&&(ae=F.length-1),F[ae]}:se=>{const ae=S[se];if(M(ae))return oe;let ge=Math.floor((ae-P)/K);return ge<0?ge=0:ge>=F.length&&(ge=F.length-1),F[ge]}}}getColorForCategory(s,f){const S=this.columnIndex[s].values.indexOf(f);return this.getColumnColors(s)[S]}getColorLegend(s,f={}){const _=this.getColumnColors(s,f),S=this.columnIndex[s],T=f.name||S.name;if(S.datatype==="integer"||S.datatype==="double"||S.datatype==="int32"){let F=S.minMaX;if(f.overideValues){const M=f.overideValues;F=[M.min==null?S.minMax[0]:M.min,M.max==null?S.minMax[1]:M.max]}return getColorBar(_,{range:F,label:T})}if(isColumnText(S))return getColorLegend(_,S.values,{label:T})}getValueToColor(s){const f={},_=this.getColumnColors(s),S=this.getColumnValues(s);for(let T=0;T<S.length;T++)f[S[T]]=_[T];return f}getColumnQuantile(s,f){const _=this.columnIndex[s];if(f&&f!=="none"){if(_.quantiles&&_.quantiles!=="NA")return[_.quantiles[f][0],_.quantiles[f][1]]}else return _.minMax}setColumnColors(s,f,_=!1){const S=this.columnIndex[s];if(f.length!==S.values.length)throw new Error(`${s} being set with incorrect number of columns `);S.colors=f.slice(0),this.dirtyColumns.colors_changed[s]=!0,_&&this.dataChanged([s],!1)}getColumnColors(s,f={}){const _=typeof s=="string"?this.columnIndex[s]:s,S=f.asArray;if(_.datatype==="double"||_.datatype==="integer"||_.datatype==="int32"){const T=f.overideValues||{},F=T.colors||_.colors||defaultIPalette,M=T.min===void 0?_.minMax[0]:T.min,P=T.max===void 0?_.minMax[1]:T.max,H=linspace(M,P,F.length),J=linear$1().domain(H).range(F).clamp(!0),K=T.bins||100,oe=(P-M)/K;let se=new Array(K+1);for(let ge=0;ge<K+1;ge++)se[ge]=J(M+ge*oe),S&&(se[ge]=rgbToRGB(se[ge]));let ae=_.colorLogScale;if(T.colorLogScale!=null&&(ae=T.colorLogScale),ae){const ge=symlog().domain([M,P]).range([0,K]).clamp(!0),he=new Array(K+1);for(let Be=0;Be<K+1;Be++)he[Be]=se[Math.floor(ge(M+Be*oe))];se=he}return se}if(_.datatype==="text"||_.datatype==="multitext"||_.datatype==="text16"){let T=_.colors;if(!T){const F=_.values.length,M=defaultPalette.length;if(F<M)T=defaultPalette.slice(0,F);else{T=[];const P=Math.floor(F/M);for(let H=0;H<P;H++)T=T.concat(defaultPalette);T=T.concat(defaultPalette.slice(0,F%M))}}return S&&(T=T.map(F=>hexToRGB(F))),T}}addColumnGroup(s){s.columns||(s.columns=[]),this.columnGroups[s.name]=s}getColumnGroup(s){const f=this.columnGroups[s];return f?f.columns:null}getRawColumn(s){return this.columnIndex[s].data}getMinMaxForColumn(s){return this.columnIndex[s].minMax}getColumnRange(s){const f=this.columnIndex[s];return f.minMax?f.minMax[1]-f.minMax[0]:(console.error(`unknown minMax for column ${s}`),[0,50])}getColumnInfo(s){const f=this.columnIndex[s];return{name:f.name,field:f.field,datatype:f.datatype,stringLength:f.stringLength,subgroup:f.subgroup,sgindex:f.sgindex,sgtype:f.sgtype}}getLoadedColumns(){return this.columns.filter(s=>s.data!=null).map(s=>s.field)}getAllColumns(){return this.columns.map(s=>s.field)}getColumnValues(s,f=null){const _=this.columnIndex[s].values;return f==="name_value"?Array.from(_,T=>({name:T,value:T})).sort((T,F)=>T.name.localeCompare(F.name)):_}getColumnName(s){const f=this.columnIndex[s];return f?f.name:null}removeColumn(s,f=!1,_=!1){const S=this.columnIndex[s];S.data=null,S.buffer=null,this.columns=this.columns.filter(F=>F.field!==s),delete this.columnIndex[s];const T=this.columnsWithData.indexOf(s);T!==-1&&this.columnsWithData.splice(T,1),f&&(this.dirtyColumns.added[s]?delete this.dirtyColumns.added[s]:this.dirtyColumns.removed[s]=!0),_&&this._callListeners("column_removed",s)}}function linspace(d,s,f){const _=[],S=(s-d)/(f-1);let T=0;for(;T<f-1;)_.push(d+T*S),T++;return _.push(s),_}function hexToRGB(d){d=d.replace("#","");const s=Number.parseInt(d,16),f=s>>16&255,_=s>>8&255,S=s&255;return[f,_,S]}function RGBToHex(d){return`#${d.map(s=>{const f=s.toString(16);return f.length===1?`0${f}`:f}).join("")}`}function rgbToRGB(d){return d?(d=d.substring(4,d.length-1).split(", "),d.map(s=>Number.parseInt(s))):[255,255,255]}const defaultPalette=["#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999","#1CE6FF","#FF34FF","#FF4A46","#008941","#676FA6","#A30059","#FFDBE5","#7A4900","#0000A6","#63FFAC","#B79762","#004D43","#8FB0FF","#997D87","#5A0007","#809693","#FEFFE6","#1B4400","#4FC601","#3B5DFF","#4A3B53","#FF2F80","#61615A","#BA0900","#6B7900","#00C2A0","#FFAA92","#FF90C9","#B903AA","#D16100","#DDEFFF","#000035","#7B4F4B","#A1C299","#300018","#0AA6D8","#013349","#00846F","#372101","#FFB500","#C2FFED","#A079BF","#CC0744","#C0B9B2","#C2FF99","#001E09","#00489C","#6F0062","#0CBD66","#EEC3FF","#456D75","#B77B68","#7A87A1","#788D66","#885578","#FAD09F","#FF8A9A","#D157A0","#BEC459","#456648","#0086ED","#886F4C","#34362D","#B4A8BD","#00A6AA","#452C2C","#636375","#A3C8C9","#FF913F","#938A81","#575329","#00FECF","#B05B6F","#8CD0FF","#3B9700","#04F757","#C8A1A1","#1E6E00","#7900D7","#A77500","#6367A9","#A05837","#6B002C","#772600","#D790FF","#9B9700","#549E79","#FFF69F","#201625","#72418F","#BC23FF","#99ADC0","#3A2465","#922329","#5B4534","#FDE8DC"],defaultIPalette=["#3288bd","#66c2a5","#abdda4","#e6f598","#fee08b","#fdae61","#f46d43","#d53e4f"];class WGLChart extends SVGChart{constructor(s,f,_,S){super(s,f,_,S);const T=this.config;T.tooltip||(T.tooltip={show:!1}),T.default_color=T.default_color||"#377eb8";const F=this._getContentDimensions();this.graphDiv=createEl("div",{styles:{position:"absolute",left:`${F.left}px`,top:`${F.top}px`,width:`${F.width}px`,height:`${F.height}px`}},this.contentDiv),this.tooltip=createEl("div",{styles:{position:"absolute",zIndex:100,display:"none","background-color":"lightgray"}},this.graphDiv)}onDataHighlighted(s){this.app.setHighlightPoints(s.indexes),this.app.refresh()}afterAppCreation(){const s=this.config;this.app.addHandler("object_over",(S,T)=>{s.tooltip.show&&this.showTooltip(S,T)}),this.app.addHandler("object_out",(S,T)=>{this.tooltip.style.display="none"}),s.default_color=s.default_color||"#377eb8",s.on_filter=s.on_filter==null?"hide":s.on_filter,this.app.setFilterAction(s.on_filter);const f=hexToRGB(s.default_color);let _=()=>f;if(s.color_by){const S={asArray:!0,overideValues:{colorLogScale:this.config.log_color_scale}};this._addTrimmedColor(s.color_by,S),_=this.dataStore.getColorFunction(s.color_by,S),s.color_legend||(s.color_legend={display:!0}),this.setColorLegend()}return this.app.addHandler("object_clicked",S=>{this.dataStore.dataHighlighted([S],this)}),_}setToolTipColumn(s){this.config.tooltip.column=s}showTooltip(s,f){const _=this.graphDiv.getBoundingClientRect(),S=this.dataStore.getRowAsObject(f),T=s.clientX-_.left,F=s.clientY-_.top;this.tooltip.style.display="block",this.tooltip.style.left=`${T}px`,this.tooltip.style.top=`${F}px`,this.tooltip.textContent=S[this.config.tooltip.column]}getSetupConfig(){const s=this.config,f=hexToRGB(s.default_color);let _=()=>f;return s.color_by&&(_=this.dataStore.getColorFunction(s.color_by,{asArray:!0})),{localFilter:this.dim.getLocalFilter(),globalFilter:this.dataStore.getFilter(),colorFunc:_}}setSize(s,f){super.setSize(s,f);const _=this._getContentDimensions();(_.width<1||_.height<1)&&(_.width=50,_.height=50,console.error("WGLChart: bad _getContentDimensions()")),this.app.setSize(_.width,_.height),this.graphDiv.style.left=`${_.left}px`,this.graphDiv.style.top=`${_.top}px`,this.updateAxis()}onDataFiltered(s){s==="all_removed"&&(this.app.clearBrush(),this.app.setFilter(!1),this.resetButton.style.display="none"),this.app.setHighlightPoints(null),this.app.refresh()}remove(s=!0){this.dim.destroy(s),this.app.remove(),super.remove()}removeFilter(){this.filter!==null&&(this.dim.removeFilter(),this.app.clearBrush(),this.app.setFilter(!1),this.app.refresh())}colorByColumn(s){this.config.color_by=s;const f=this.getColorFunction(s,!0),_=performance.now();this.app.colorPoints(f),console.log(`color time:${performance.now()-_}`),setTimeout(()=>{this.app.refresh()},50)}colorByDefault(){this.legend&&this.legend.remove();const s=hexToRGB(this.config.default_color);this.app.colorPoints(()=>s),setTimeout(()=>{this.app.refresh()},50)}changeBaseDocument(s){this.app.clearBrush(),this.app.__doc__=s,super.changeBaseDocument(s)}getColorOptions(){return{colorby:"all",has_default_color:!0}}pinChart(){this.isPinned=!0,this.pinnedFilter=this.dataStore.getFilter().slice(0),this.app.setGlobalFilter(this.pinnedFilter)}unpinChart(){this.isPinned=!1,this.pinnedFilter=null,this.app.setGlobalFilter(this.dataStore.getFilter()),this.app.refresh()}addToImage(){this.app.refresh();let s=this.app.canvas.toDataURL("image/png");s=s.replace(/^data:image\/png/,"data:application/octet-stream");const f=this._getContentDimensions();this.svg.append("image").attr("xlink:href",s).attr("width",f.width).attr("height",f.height).attr("x",f.left).attr("y",f.top)}removeFromImage(){this.svg.select("image").remove()}getSettings(s){const f=super.getSettings(),_=this.config,S=this.dataStore.getColumnList();return f.splice(2,0,{type:"slider",max:1,min:0,doc:this.__doc__,current_value:_.opacity,label:"Point Opacity",func:T=>{_.opacity=T,this.app.setPointOpacity(T),this.app.refresh()}},{type:"slider",max:10,min:0,doc:this.__doc__,current_value:_.radius,label:"Point Size",func:T=>{_.radius=T,this.app.setPointRadius(T),this.app.refresh(),console.log(T)}}),f.concat([{type:"check",label:"Show Tooltip",current_value:_.tooltip.show,func:T=>{_.tooltip.show=T;const F=_.tooltip.column||S[0].field;this.setToolTipColumn(F)}},{type:"dropdown",label:"Tooltip value",current_value:_.tooltip.column||S[0].field,values:[S,"name","field"],func:T=>{this.setToolTipColumn(T)}},{type:"button",label:"Centre Plot",func:T=>{this.centerGraph(),this.app.refresh()}},{type:"radiobuttons",label:"Action on Filter",choices:[["Hide Points","hide"],["Gray Out Points","grey"]],current_value:_.on_filter,func:T=>{_.on_filter=T,this.app.setFilterAction(T),this.app.refresh()}}])}}function processArrayBuffer(d,s,f){const _=[];let S=0;for(const T of s){let F=T.datatype==="int32"?Int32Array:Float32Array,M=f,P=4;if(T.datatype==="unique"||T.datatype==="text"?(F=Uint8Array,P=1,T.datatype==="unique"&&(P=T.stringLength,M=f*P)):T.datatype==="multitext"?(F=Uint16Array,T.stringLength?(P=T.stringLength*2,M=f*T.stringLength):(P=2,M=f)):T.datatype==="text16"&&(F=Uint16Array,P=2,M=f),T.sgtype==="sparse"){const H=new Uint32Array(d,S,1)[0];S+=4;const J=new Uint32Array(d,S,H);S+=H*4;const K=new Float32Array(d,S,H);S+=H*4;const oe=new SharedArrayBuffer(f*4),se=new Float32Array(oe);se.fill(Number.NaN);for(let ae=0;ae<J.length;ae++)se[J[ae]]=K[ae];_.push({data:oe,field:T.field})}else{const H=f*P,J=new F(d,S,M),K=new SharedArrayBuffer(H);new F(K).set(J,0),_.push({data:K,field:T.field}),S+=H}}return _}function getArrayBufferDataLoader(d,s=!1){return async(f,_,S)=>{let F=await(await fetch(d,{method:"POST",body:JSON.stringify({columns:f,data_source:_}),headers:{"Content-Type":"application/json"}})).arrayBuffer();return F=s?await decompressData(F):F,processArrayBuffer(F,f,S)}}function getLocalCompressedBinaryDataLoader(d,s){const f={};for(const _ of d)f[_.name]=new CompressedBinaryDataLoader(`${s}/${_.name}.gz`,_.size);return async(_,S,T)=>await f[S].getColumnData(_,T)}class CompressedBinaryDataLoader{constructor(s,f){this.url=s,this.index=null,this.size=f}async getColumnData(s,f){const{default:_}=await __vitePreload(async()=>{const{default:S}=await import("../assets/index-2IKiSScx.js").then(T=>T.i);return{default:S}},__vite__mapDeps([10,1]),import.meta.url);if(!this.index){const S=this.url.replace(".gz",".json"),T=await fetch(S);this.index=await T.json()}return await Promise.all(s.map(async S=>{let T=S.field;if(S.subgroup){const K=S.field.split("|");T=K[0]+K[2]}const F=this.index[T];let M=null;const P={headers:{responseType:"arraybuffer",range:`bytes=${F[0]}-${F[1]}`}};try{M=await fetch(this.url,P)}catch{M=await fetch(this.url,P)}const H=await M.arrayBuffer(),J=F[1]-F[0]+1;H.byteLength!==J&&console.warn(`Expected ${J} bytes but got ${H.byteLength} for ${S.field}... is the server correctly configured to Accept-Ranges?`);try{const K=_.inflate(H);if(S.sgtype==="sparse"){const ae=K.buffer,ge=new Uint32Array(ae,0,1)[0],he=new Uint32Array(ae,4,ge),Be=new Float32Array(ae,ge*4+4,ge),pe=new SharedArrayBuffer(f*4),be=new Float32Array(pe);be.fill(Number.NaN);for(let Re=0;Re<he.length;Re++)be[he[Re]]=Be[Re];return{data:pe,field:S.field}}const oe=new SharedArrayBuffer(K.length);return new Uint8Array(oe).set(K,0),{data:oe,field:S.field}}catch(K){console.warn(`Error inflating ${S.field}: ${K}`)}}))}}async function decompressData(d){const{default:s}=await __vitePreload(async()=>{const{default:f}=await import("../assets/index-2IKiSScx.js").then(_=>_.i);return{default:f}},__vite__mapDeps([10,1]),import.meta.url);return s.inflate(d).buffer}let projectRoot="";async function fetchJsonConfig(d,s){try{return await(await fetch(d)).json()}catch(f){return console.error(`Error fetching ${d}: ${f}`),{error:f}}}function setProjectRoot(d){projectRoot=d}function buildPath(...d){return d.map((s,f)=>f===0?s.trim().replace(/[\/]*$/g,""):s.trim().replace(/(^[\/]*|[\/]*$)/g,"")).filter(s=>s.length).join("/")}function getProjectURL(d,s=!0){if(d.startsWith(projectRoot))return d;const f=buildPath(projectRoot,d).replace("./","/")+(s?"/":"");return f.startsWith("/")?new URL(f,window.location.href).href:f}function getDataLoader(d,s,f,_){const S=_.endsWith("/")?_.substring(0,_.length-1):_;return d?{function:getLocalCompressedBinaryDataLoader(s,S),viewLoader:async M=>f[M],rowDataLoader:T,binaryDataLoader:F}:{function:getArrayBufferDataLoader(`${S}/get_data`),viewLoader:getView$1,rowDataLoader:loadRowData$1,binaryDataLoader:loadBinaryData$1};async function T(M,P){const H=await fetch(`${S}/rowdata/${M}/${P}.json`);return H.status!==200?null:await H.json()}async function F(M,P){return await(await fetch(`${S}/binarydata/${M}/${P}.b`)).arrayBuffer()}}async function loadRowData$1(d,s){return await getPostData(`${projectRoot}/get_row_data`,{datasource:d,index:s})}async function getView$1(d){if(d)try{return await getPostData(`${projectRoot}/get_view`,{view:d})}catch(s){const f=createEl("dialog",{title:"Error loading view"});f.innerText=s.message,f.addEventListener("click",()=>f.close()),document.body.appendChild(f),f.showModal(),console.error(s);return}}async function loadBinaryData$1(d,s){return await getPostData(`${projectRoot}/get_binary_data`,{datasource:d,name:s},"arraybuffer")}async function getPostData(d,s,f="json"){const _=await fetch(d,{method:"POST",body:JSON.stringify(s),headers:{Accept:"application/json,text/plain,*/*","Content-Type":"application/json"}});if(!_.ok)throw new Error(`Error fetching '${d}': ${_.statusText}`);return f==="json"?await _.json():await _.arrayBuffer()}async function loadColumn(d,s){return new Promise((f,_)=>{try{const S=window.mdv.chartManager.getDataSource(d),T=S.columnIndex[s];S.columnsWithData.includes(s)?f(T):window.mdv.chartManager.loadColumnSet([s],d,()=>f(T))}catch(S){_(S)}})}class OffsetDialog extends BaseDialog{constructor(s){super({title:"Alter Position",width:300,doc:s.__doc__},s)}init(s){this.plot=s,this.ds=this.plot.dataStore,createEl("div",{text:"Offset"},this.dialog),this.bdiv=createEl("div",{styles:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative",height:"60px"}},this.dialog);for(const F of[["top","up"],["bottom","down"],["right","right"],["left","left"]])this._addPButton(F);createEl("div",{text:"Rotation"},this.dialog),this.rDiv=createEl("div",{styles:{height:"30px",position:"relative"}},this.dialog);for(const F of["left","right"])this._addRButton(F);const f=createEl("div",{},this.dialog),_=this.ds.columnIndex[this.ds.offsets.groups].name;createEl("div",{text:_},f),this.groupSelect=createEl("select",{},f),createEl("button",{classes:["ciview-button-sm"],text:"Reset"},f).addEventListener("click",F=>{this.ds.resetColumnOffsets(this.filter,this.groupSelect.value,!0),this._showOffsets(this.groupSelect.value)});const T=this.ds.columnIndex[this.ds.offsets.groups].values;for(const F of T)createEl("option",{text:F,value:F},this.groupSelect);this.filter=this.plot.config.background_filter?this.plot.config.background_filter.category:null,this.groupSelect.addEventListener("change",()=>{this._showOffsets(this.groupSelect.value)}),this._addOffsetLabels(),this._showOffsets(T[0])}_alterOffset(s){const f=this.plot.dataStore;let _=0,S=0;const T=Number.parseFloat(this.offsetAm.value);if(Number.isNaN(T))return;_+=s==="right"?T:0,_-=s==="left"?T:0,S+=s==="up"?T:0,S-=s==="down"?T:0;const F=this.groupSelect.value;f.setColumnOffset({group:F,offsets:[_,S],filter:this.filter},!0),this._showOffsets(F)}_addOffsetLabels(){const s=createEl("div",{styles:{position:"absolute",top:"20px",left:"20px",display:"flex",justifyContent:"center",gap:"5px"}},this.bdiv);this.xoffset=createEl("span",{},s),this.yoffset=createEl("span",{},s),createEl("span",{text:"step:"},s),this.offsetAm=createEl("input",{styles:{width:"30px"},value:1},s);const f=createEl("div",{styles:{position:"absolute",top:"0px",justifyContent:"center",left:"25px",display:"flex",gap:"5px"}},this.rDiv);this.angle=createEl("span",{},f),createEl("span",{text:"step:"},f),this.offsetAn=createEl("input",{styles:{width:"30px"},value:1},f)}_showOffsets(s){let f=[0,0],_=0;const S=this.ds.offsets.values[this.filter||"all"];S!=null&&S[s]&&(f=S[s].offsets,_=S[s].rotation),this.xoffset.textContent=`x:${f[0].toFixed(1)}`,this.yoffset.textContent=`y:${f[1].toFixed(1)}`,this.angle.textContent=`angle:${_.toFixed(1)}`}_addPButton(s){const f={position:"absolute",textAlign:"center",cursor:"pointer"};f[s[0]]="0px",createEl("i",{classes:["fas",`fa-arrow-${s[1]}`],styles:f},this.bdiv).addEventListener("click",()=>{this._alterOffset(s[1])})}_addRButton(s){const f={position:"absolute",textAlign:"center"};f[s]="5px",createEl("i",{classes:["fas",`fa-angle-double-${s}`],styles:f,cursor:"pointer"},this.rDiv).addEventListener("click",S=>{const T=Number.parseFloat(this.offsetAn.value);if(Number.isNaN(T))return;const F=s==="left"?-T:T;this.plot.dataStore.setColumnOffset({group:this.groupSelect.value,rotation:F,filter:this.filter},!0),this._showOffsets(this.groupSelect.value)})}}class WGLScatterPlot extends WGLChart{constructor(s,f,_){const S=s.getColumnName(_.param[0]),T=s.getColumnName(_.param[1]);_.axis||(_.axis={x:{size:30,label:S,textsize:13},y:{size:45,label:T,textsize:13}}),_.title||(_.title=`${S} x ${T}`),super(s,f,_,{x:{},y:{}}),this.x=this.config.param[0],this.y=this.config.param[1],this.dim=this.getDimension();const F=_.background_filter;F&&this.dim.setBackgroundFilter(F.column,F.category),this.minMaxX=this.dataStore.getMinMaxForColumn(this.x),this.minMaxY=this.dataStore.getMinMaxForColumn(this.y),this.type="wgl_scatter_plot";const M=this.config;M.brush=M.brush||"poly";const P={brush:M.brush};this.app=new WGL2DI(this.graphDiv,P),this.app.addHandler("zoom_stopped",oe=>this.handlePanZoom(oe)),this.app.addHandler("panning_stopped",oe=>this.handlePanZoom(oe)),this.centerGraph();const H=this.afterAppCreation();this.app.setBackGroundColor(M.background_color),this.app.addHandler("brush_stopped",(oe,se)=>{this.resetButton.style.display="inline",this.app.setFilter(!0),se?this._createPolyFilter(oe):this._createFilter(oe)}),M.background_image&&(M.image_opacity=M.image_opacity==null?1:M.image_opacity,this.addBackgroundImage(M.background_image));const J=this.dataStore.columnIndex[this.x],K=this.dataStore.columnIndex[this.y];this.app.addCircles({x:J.datatype==="int32"?new Float32Array(J.data):J.data,y:K.datatype==="int32"?new Float32Array(K.data):K.data,localFilter:this.dim.getLocalFilter(),globalFilter:this.dataStore.getFilter(),colorFunc:H}),this.defaultRadius=this._calculateRadius(),M.radius=M.radius||2,M.opacity=M.opacity==null?.8:M.opacity,this.app.setPointRadius(this.config.radius),this.app.setPointOpacity(this.config.opacity),this.onDataFiltered()}getDimension(){return this.dataStore.getDimension("range_dimension")}handlePanZoom(s){if(s.imageMoved){const f=s.imageMoved,_=this.config,S=_.background_image.name;if(f.position[1]=-(f.position[1]+f.height),_.background_image.height=f.height,_.background_image.width=f.width,_.background_image.position=f.position,_.image_choices){const T=_.image_choices.find(F=>F[0]===S);T[2]=f.width,T[3]=f.height,T[4]=f.position[0],T[5]=f.position[1]}if(this.dataStore.regions){const T=this.dataStore.regions.all_regions[_.region].images[_.background_image.name];T.position=f.position,T.height=f.height,T.width=f.width,this.dataStore.dirtyMetadata.add("regions")}}else this._updateScale(s),this.updateAxis()}onDataAdded(s){const f=this.getSetupConfig();f.x=this.dataStore.getRawColumn(this.x),f.y=this.dataStore.getRawColumn(this.y),this.app.updateSize(s,f),super.onDataAdded(s)}addBackgroundImage(s,f=!1){const _=new Image,S=this.config;S.image_opacity=S.image_opacity||1,_.src=s.url?s.url:getProjectURL(this.dataStore.regions.base_url)+s.file,_.onload=()=>{f?this.app.changeImage(_,s,0):(this.app.addImage(_,s),this.app.changeImageOpacity(0,S.image_opacity)),this.app.refresh()},_.onerror=()=>{this.config.background_image=void 0}}linkToOtherChart(s){this.app.addHandler("pan_or_zoom",(f,_,S)=>{s.app.offset=[f[0],f[1]],s.app.x_scale=_,s.app.y_scale=S,s.app.refresh(),s._updateScale(this.app.getRange()),s.updateAxis()},this.config.id)}highlightDataItem(s){this.app.highlightPoint(s)}getFilter(){if(!this.range||this.range===!0)return null;const s={};return s[this.config.param[0]]=[this.range.x_min,this.range.x_max],s[this.config.param[1]]=[this.range.y_min,this.range.y_max],s}_updateScale(s){this.x_scale.domain([s.x_range[0],s.x_range[1]]),this.y_scale.domain([-s.y_range[0],-s.y_range[1]])}_calculateRadius(){let s=this.config.max_x||this.config.max_x===0?this.config.max_x:this.minMaxX[1],f=this.config.min_x||this.config.min_x===0?this.config.min_x:this.minMaxX[0];this.config.axis.x_log_scale&&(s=this._getLogValue(s),f=this._getLogValue(f));const _=s-f;return _**1.5/(this.dataStore.size**.8+_)*5}_createFilter(s){if(this.range=s,s==null)this.dim.removeFilter();else{let f=s.y_max,_=s.y_min,S=s.x_max,T=s.x_min;this.config.axis.y_log_scale&&(f=this._getInverseLogValue(f),_=this._getInverseLogValue(_)),this.config.axis.x_log_scale&&(S=this._getInverseLogValue(S),T=this._getInverseLogValue(T)),this.filter=[[T,S],[_,f]],this.dim.filter("filterSquare",this.config.param,{range1:this.filter[0],range2:this.filter[1]})}}_createPolyFilter(s){this.range=!0;for(const f of s)f[1]=-f[1],this.config.axis.x_log_scale&&(f[0]=this._getInverseLogValue(f[0])),this.config.axis.y_log_scale&&(f[1]=this._getInverseLogValue(f[1]));this.filter=s,this.dim.filter("filterPoly",this.config.param,s)}centerGraph(){const s=this.config,f=s.roi||{};let _=f.max_x||this.minMaxX[1],S=f.max_y||this.minMaxY[1],T=f.min_x||this.minMaxX[0],F=f.min_y||this.minMaxY[0];if(s.center_using_quantiles){const oe=this.dataStore.columnIndex[s.param[0]].quantiles,se=this.dataStore.columnIndex[s.param[1]].quantiles;oe[s.center_using_quantiles],se[s.center_using_quantiles]}this.config.axis.y_log_scale&&(S=this._getLogValue(S),F=this._getLogValue(F)),this.config.axis.x_log_scale&&(_=this._getLogValue(_),T=this._getLogValue(T));const M=(_-T)/20,P=(S-F)/20,H=_-T+2*M,J=S-F+2*P,K=this._getContentDimensions();this.app.x_scale=K.width/H,this.app.y_scale=K.height/J,this.app.pointScale=(this.app.x_scale+this.app.y_scale)/2,this.app.offset[0]=-(T-M),this.app.offset[1]=S+P,this._updateScale(this.app.getRange()),this.updateAxis()}getContextMenu(){var S;const s=super.getContextMenu(),f=this.config,_=this.dataStore;if(_.offsets){const T=_.offsets,F=_.getColumnName(T.groups);T.param[0]===f.param[0]&&T.param[1]===f.param[1]&&(!T.background_filter||T.background_filter===((S=f==null?void 0:f.background_filter)==null?void 0:S.column))&&s.push({text:`Adjust ${F} position`,icon:"fas fa-arrows-alt",func:()=>{new OffsetDialog(this)}})}return s}_addSliderToSettings(s,f,_){s.splice(1,0,{type:"slider",current_value:f.opacity,min:0,max:1,func:S=>{f.opacity=S,this.app.changeImageOpacity(_,S),this.app.refresh()}})}getConfig(){const s=super.getConfig();return s.offsets&&(s.offsets.offsets=this.app.offsets.values.offsets),s}getSettings(){var S;const s=super.getSettings({pointMax:30,pointMin:0}),f=this.config;if(f.image_choices){const T=f.image_choices.slice(0);T.unshift(["None","__none__"]);let F="__none__";f.background_image&&(F=f.background_image.url),s.splice(1,0,{type:"dropdown",current_value:F,values:[T,0,1],label:"Change Image",func:M=>{if(M==="__none__"){f.background_image=void 0,this.app.removeImages(),this.app.refresh();return}let P=!0;f.background_image||(f.background_image={},P=!1),f.background_image.url=M;const H=f.title.split("-")[0],J=f.image_choices.find(K=>K[1]===M);f.background_image.name=J[0],J[2]&&(f.background_image.width=J[2],f.background_image.height=J[3],f.background_image.position=[J[4],J[5]]),this.setTitle(`${H}-${J[0]}`),this.addBackgroundImage(f.background_image,P)}})}const _=this.dataStore.regions;if(f.region&&_&&!f.viv){const T=_.all_regions[f.region].images,F=[["None","__none__"]];for(const P in T)F.push([P,P]);const M=((S=f.background_image)==null?void 0:S.name)||"__none__";s.splice(1,0,{type:"dropdown",current_value:M,values:[F,0,1],label:"Change Image",func:P=>{if(P==="__none__"){f.background_image=void 0,this.app.removeImages(),this.app.refresh();return}const H=!!f.background_image;f.background_image=T[P],this.setTitle(`${f.region}-${P}`),this.addBackgroundImage(f.background_image,H)}})}return f.background_image&&s.splice(2,0,{label:"Image Opacity",type:"slider",current_value:f.image_opacity,max:1,min:0,func:T=>{f.image_opacity=T,this.app.changeImageOpacity(0,T),this.app.refresh()}}),s.push({type:"radiobuttons",label:"Background Color",choices:[["none","none"],["white","white"],["light gray","lightgray"],["gray","gray"],["black","black"]],current_value:f.background_color||"none",func:T=>{T==="none"?f.background_color=void 0:f.background_color=T,this.app.setBackGroundColor(f.background_color)}}),s.concat([{type:"radiobuttons",label:"Brush Type",choices:[["Free Draw","poly"],["Rectangle","default"]],current_value:f.brush,func:T=>{this.app.clearBrush(),this.app.config.brush=T,f.brush=T}}])}}BaseChart.types.wgl_scatter_plot={name:"2D Scatter Plot",class:WGLScatterPlot,params:[{type:"number",name:"X axis"},{type:"number",name:"Y axis"}]};var pi$5=Math.PI,tau$4=pi$5*2,abs$3=Math.abs,sqrt$2=Math.sqrt;function noop$3(){}function streamGeometry$1(d,s){d&&streamGeometryType$1.hasOwnProperty(d.type)&&streamGeometryType$1[d.type](d,s)}var streamObjectType$1={Feature:function(d,s){streamGeometry$1(d.geometry,s)},FeatureCollection:function(d,s){for(var f=d.features,_=-1,S=f.length;++_<S;)streamGeometry$1(f[_].geometry,s)}},streamGeometryType$1={Sphere:function(d,s){s.sphere()},Point:function(d,s){d=d.coordinates,s.point(d[0],d[1],d[2])},MultiPoint:function(d,s){for(var f=d.coordinates,_=-1,S=f.length;++_<S;)d=f[_],s.point(d[0],d[1],d[2])},LineString:function(d,s){streamLine$1(d.coordinates,s,0)},MultiLineString:function(d,s){for(var f=d.coordinates,_=-1,S=f.length;++_<S;)streamLine$1(f[_],s,0)},Polygon:function(d,s){streamPolygon$1(d.coordinates,s)},MultiPolygon:function(d,s){for(var f=d.coordinates,_=-1,S=f.length;++_<S;)streamPolygon$1(f[_],s)},GeometryCollection:function(d,s){for(var f=d.geometries,_=-1,S=f.length;++_<S;)streamGeometry$1(f[_],s)}};function streamLine$1(d,s,f){var _=-1,S=d.length-f,T;for(s.lineStart();++_<S;)T=d[_],s.point(T[0],T[1],T[2]);s.lineEnd()}function streamPolygon$1(d,s){var f=-1,_=d.length;for(s.polygonStart();++f<_;)streamLine$1(d[f],s,1);s.polygonEnd()}function geoStream$1(d,s){d&&streamObjectType$1.hasOwnProperty(d.type)?streamObjectType$1[d.type](d,s):streamGeometry$1(d,s)}const identity$2=d=>d;var areaSum=new Adder$1,areaRingSum=new Adder$1,x00$2,y00$2,x0$4,y0$4,areaStream={point:noop$3,lineStart:noop$3,lineEnd:noop$3,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop$3,areaSum.add(abs$3(areaRingSum)),areaRingSum=new Adder$1},result:function(){var d=areaSum/2;return areaSum=new Adder$1,d}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(d,s){areaStream.point=areaPoint,x00$2=x0$4=d,y00$2=y0$4=s}function areaPoint(d,s){areaRingSum.add(y0$4*d-x0$4*s),x0$4=d,y0$4=s}function areaRingEnd(){areaPoint(x00$2,y00$2)}var x0$3=1/0,y0$3=x0$3,x1$1=-x0$3,y1$1=x1$1,boundsStream$1={point:boundsPoint$1,lineStart:noop$3,lineEnd:noop$3,polygonStart:noop$3,polygonEnd:noop$3,result:function(){var d=[[x0$3,y0$3],[x1$1,y1$1]];return x1$1=y1$1=-(y0$3=x0$3=1/0),d}};function boundsPoint$1(d,s){d<x0$3&&(x0$3=d),d>x1$1&&(x1$1=d),s<y0$3&&(y0$3=s),s>y1$1&&(y1$1=s)}var X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,x00$1,y00$1,x0$2,y0$2,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var d=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,d}};function centroidPoint(d,s){X0+=d,Y0+=s,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(d,s){centroidStream.point=centroidPointLine,centroidPoint(x0$2=d,y0$2=s)}function centroidPointLine(d,s){var f=d-x0$2,_=s-y0$2,S=sqrt$2(f*f+_*_);X1+=S*(x0$2+d)/2,Y1+=S*(y0$2+s)/2,Z1+=S,centroidPoint(x0$2=d,y0$2=s)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(d,s){centroidStream.point=centroidPointRing,centroidPoint(x00$1=x0$2=d,y00$1=y0$2=s)}function centroidPointRing(d,s){var f=d-x0$2,_=s-y0$2,S=sqrt$2(f*f+_*_);X1+=S*(x0$2+d)/2,Y1+=S*(y0$2+s)/2,Z1+=S,S=y0$2*d-x0$2*s,X2+=S*(x0$2+d),Y2+=S*(y0$2+s),Z2+=S*3,centroidPoint(x0$2=d,y0$2=s)}function PathContext(d){this._context=d}PathContext.prototype={_radius:4.5,pointRadius:function(d){return this._radius=d,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(d,s){switch(this._point){case 0:{this._context.moveTo(d,s),this._point=1;break}case 1:{this._context.lineTo(d,s);break}default:{this._context.moveTo(d+this._radius,s),this._context.arc(d,s,this._radius,0,tau$4);break}}},result:noop$3};var lengthSum=new Adder$1,lengthRing,x00,y00,x0$1,y0$1,lengthStream={point:noop$3,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop$3},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var d=+lengthSum;return lengthSum=new Adder$1,d}};function lengthPointFirst(d,s){lengthStream.point=lengthPoint,x00=x0$1=d,y00=y0$1=s}function lengthPoint(d,s){x0$1-=d,y0$1-=s,lengthSum.add(sqrt$2(x0$1*x0$1+y0$1*y0$1)),x0$1=d,y0$1=s}let cacheDigits,cacheAppend,cacheRadius,cacheCircle;class PathString{constructor(s){this._append=s==null?append$1:appendRound$1(s),this._radius=4.5,this._=""}pointRadius(s){return this._radius=+s,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(s,f){switch(this._point){case 0:{this._append`M${s},${f}`,this._point=1;break}case 1:{this._append`L${s},${f}`;break}default:{if(this._append`M${s},${f}`,this._radius!==cacheRadius||this._append!==cacheAppend){const _=this._radius,S=this._;this._="",this._append`m0,${_}a${_},${_} 0 1,1 0,${-2*_}a${_},${_} 0 1,1 0,${2*_}z`,cacheRadius=_,cacheAppend=this._append,cacheCircle=this._,this._=S}this._+=cacheCircle;break}}}result(){const s=this._;return this._="",s.length?s:null}}function append$1(d){let s=1;this._+=d[0];for(const f=d.length;s<f;++s)this._+=arguments[s]+d[s]}function appendRound$1(d){const s=Math.floor(d);if(!(s>=0))throw new RangeError(`invalid digits: ${d}`);if(s>15)return append$1;if(s!==cacheDigits){const f=10**s;cacheDigits=s,cacheAppend=function(S){let T=1;this._+=S[0];for(const F=S.length;T<F;++T)this._+=Math.round(arguments[T]*f)/f+S[T]}}return cacheAppend}function geoPath(d,s){let f=3,_=4.5,S,T;function F(M){return M&&(typeof _=="function"&&T.pointRadius(+_.apply(this,arguments)),geoStream$1(M,S(T))),T.result()}return F.area=function(M){return geoStream$1(M,S(areaStream)),areaStream.result()},F.measure=function(M){return geoStream$1(M,S(lengthStream)),lengthStream.result()},F.bounds=function(M){return geoStream$1(M,S(boundsStream$1)),boundsStream$1.result()},F.centroid=function(M){return geoStream$1(M,S(centroidStream)),centroidStream.result()},F.projection=function(M){return arguments.length?(S=M==null?(d=null,identity$2):(d=M).stream,F):d},F.context=function(M){return arguments.length?(T=M==null?(s=null,new PathString(f)):new PathContext(s=M),typeof _!="function"&&T.pointRadius(_),F):s},F.pointRadius=function(M){return arguments.length?(_=typeof M=="function"?M:(T.pointRadius(+M),+M),F):_},F.digits=function(M){if(!arguments.length)return f;if(M==null)f=null;else{const P=Math.floor(M);if(!(P>=0))throw new RangeError(`invalid digits: ${M}`);f=P}return s===null&&(T=new PathString(f)),F},F.projection(d).digits(f).context(s)}class DensityScatterPlot extends WGLScatterPlot{afterAppCreation(){this.contentDiv.prepend(this.app.div_container),this.svg.style("position","absolute").style("pointer-events","none");const s=this.config;s.contour_bandwidth=s.contour_bandwidth||5,s.contour_intensity=s.contour_intensity||.7,s.contour_opacity=s.contour_opacity||1;const f=s.param,_=this.dataStore.getMinMaxForColumn(f[0]),S=this.dataStore.getMinMaxForColumn(f[1]),T=_[1]-_[0],F=S[1]-S[0];return this.whRatio=T/F,this.catKeys=[-1,-1],this.data=[null,null],this.orig_y_scale=this.y_scale.domain(),this.orig_x_scale=this.x_scale.domain(),this.or_y_scale=[0,400/this.whRatio],this.or_x_scale=[0,400],this.app.addHandler("pan_or_zoom",(M,P,H)=>{this._updateScale(this.app.getRange()),this._rescaleSVG()},s.id),super.afterAppCreation()}getDimension(){return this.dataStore.getDimension("density_dimension")}onDataFiltered(s){const f=this.config,_=f.param;super.onDataFiltered(s);const S=this.dataStore.getColumnValues(f.param[2]);try{if(this.catKeys=[S.indexOf(f.category1),S.indexOf(f.category2)],this.catKeys[0]===-1&&this.catKeys[1]===-1){this.data=[null,null];return}}catch{this.data=[null,null];return}const T={categories:this.catKeys,yscale:[this.orig_y_scale,this.or_y_scale],xscale:[this.orig_x_scale,this.or_x_scale],bandwidth:this.config.contour_bandwidth};this.dim.getDensityContours(F=>{this.data=F,this.drawChart(),this._rescaleSVG()},_,T)}setSize(s,f){super.setSize(s,f),this._rescaleSVG()}_drawContours(s,f,_){const S=`dp-poly-${_}`,T=this.config;this.graph_area.selectAll(`.${S}`).data(this.data[_]).join("path").attr("class",S).attr("stroke",T.contour_fill?"none":s).style("opacity",T.contour_opacity).attr("stroke-linejoin","round").attr("d",geoPath()).attr("fill",F=>T.contour_fill?f(F.value):"none")}removeCategory(s){delete this.config[`category${s}`],this.data[s-1]=null,this.catKeys[s-1]=-1,this.graph_area.selectAll(`.dp-poly-${s-1}`).remove()}changeContourParameter(s){this.config.param[2]=s,this.removeCategory(1),this.removeCategory(2),this.drawChart()}drawChart(s=400){const f=this.config;for(const _ in this.catKeys){const S=this.catKeys[_];if(S===-1)this.graph_area.selectAll(`.dp-poly-${_}`).remove();else{const T=this.dataStore.getColumnColors(f.param[2])[S],F=linear$1([0,1-f.contour_intensity],["white",T]);this._drawContours(T,F,_)}}}getContextMenu(){const s=super.getContextMenu();return this.dataStore.regions&&!this.config.viv&&s.push({text:"Set as Default Image",icon:"fas fa-file-image",func:()=>{const f=this.config;f.background_image&&(this.dataStore.regions.all_regions[f.region].default_image=f.background_image.name,this.dataStore.dirtyMetadata.add("regions"))}}),s}_rescaleSVG(){const s=this.x_scale.domain(),f=s[1]-s[0],_=this.x_scale.range()[1]/this.or_x_scale[1],S=(this.orig_x_scale[1]-this.orig_x_scale[0])/f*_,T=linear$1().domain(s).range(this.or_x_scale),F=T(s[0])-T(this.orig_x_scale[0])*_,M=this.y_scale.domain(),P=M[0]-M[1],H=this.y_scale.range()[1]/this.or_y_scale[1],J=(this.orig_y_scale[0]-this.orig_y_scale[1])/P*H,K=linear$1().domain(M).range(this.or_y_scale),oe=K(M[0])-K(this.orig_y_scale[0])*H,se=this.margins.left,ae=this.margins.top;this.graph_area.attr("transform",`translate(${se-F},${ae-oe}) scale(${S},${J})  `)}getSettings(){const s=super.getSettings(),f=this.config,_=this.dataStore.getColumnList("text");let S=this.dataStore.getColumnValues(f.param[2])||[];return S=S.map(T=>({t:T})),S.push({t:"None"}),s.push({type:"dropdown",label:"Contour Parameter",current_value:this.dataStore.getColumnName(f.param[2]),values:[_,"name","field"],func:T=>{this.changeContourParameter(T)},onchange:(T,F)=>{const P=this.dataStore.getColumnValues(F).slice(0);P.push("None");for(const H of["Contour Category 1","Contour Category 2"]){T[H].innerHTML="";for(const J of P)createEl("option",{text:J,value:J},T[H]);T[H].value="None"}}},{type:"dropdown",label:"Contour Category 1",current_value:f.category1||"None",values:[S,"t","t"],func:T=>{T==="None"?this.removeCategory(1):f.category1=T,this.onDataFiltered()}},{type:"dropdown",label:"Contour Category 2",current_value:f.category2||"None",values:[S,"t","t"],func:T=>{T==="None"?this.removeCategory(2):f.category2=T,this.onDataFiltered()}},{type:"slider",max:25,min:1,doc:this.__doc__,current_value:f.contour_bandwidth,label:"KDE Bandwidth",continuous:!0,func:T=>{f.contour_bandwidth=T,this.onDataFiltered()}},{label:"Fill Contours",type:"check",current_value:f.contour_fill,func:T=>{f.contour_fill=T,this.drawChart()}},{type:"slider",max:1,min:0,doc:this.__doc__,current_value:f.contour_intensity,continuous:!0,label:"Fill Intensity",func:T=>{f.contour_intensity=T,this.drawChart()}},{type:"slider",max:1,min:0,doc:this.__doc__,current_value:f.contour_opacity,continuous:!0,label:"Contour opacity",func:T=>{f.contour_opacity=T,this.drawChart()}}),s}}BaseChart.types.density_scatter_plot={name:"Density Scatter Plot",class:DensityScatterPlot,params:[{type:"number",name:"X axis"},{type:"number",name:"Y axis"},{type:"text",name:"Category Column"}]};BaseChart.types.image_scatter_plot={name:"Centroid Plot",class:DensityScatterPlot,required:["regions"],extra_controls:d=>{const s=[];for(const f in d.regions.all_regions)s.push({name:f,value:f});return[{type:"dropdown",name:"region",label:d.getColumnName(d.regions.region_field),values:s}]},init:(d,s,f)=>{const _=s.regions,S=_.all_regions[f.region];d.color_by=_.default_color,d.param=_.position_fields.concat([_.default_color]),d.background_filter={column:_.region_field,category:f.region},d.color_legend={display:!1},d.region=f.region,d.roi=S.roi,d.json=S.json,d.background_image=S.images[S.default_image],d.title=f.region+(S.default_image?`-${S.default_image}`:"")}};var PipsMode;(function(d){d.Range="range",d.Steps="steps",d.Positions="positions",d.Count="count",d.Values="values"})(PipsMode||(PipsMode={}));var PipsType;(function(d){d[d.None=-1]="None",d[d.NoValue=0]="NoValue",d[d.LargeValue=1]="LargeValue",d[d.SmallValue=2]="SmallValue"})(PipsType||(PipsType={}));function isValidFormatter(d){return isValidPartialFormatter(d)&&typeof d.from=="function"}function isValidPartialFormatter(d){return typeof d=="object"&&typeof d.to=="function"}function removeElement(d){d.parentElement.removeChild(d)}function isSet(d){return d!=null}function preventDefault(d){d.preventDefault()}function unique(d){return d.filter(function(s){return this[s]?!1:this[s]=!0},{})}function closest(d,s){return Math.round(d/s)*s}function offset(d,s){var f=d.getBoundingClientRect(),_=d.ownerDocument,S=_.documentElement,T=getPageOffset(_);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(T.x=0),s?f.top+T.y-S.clientTop:f.left+T.x-S.clientLeft}function isNumeric(d){return typeof d=="number"&&!isNaN(d)&&isFinite(d)}function addClassFor(d,s,f){f>0&&(addClass(d,s),setTimeout(function(){removeClass(d,s)},f))}function limit(d){return Math.max(Math.min(d,100),0)}function asArray(d){return Array.isArray(d)?d:[d]}function countDecimals(d){d=String(d);var s=d.split(".");return s.length>1?s[1].length:0}function addClass(d,s){d.classList&&!/\s/.test(s)?d.classList.add(s):d.className+=" "+s}function removeClass(d,s){d.classList&&!/\s/.test(s)?d.classList.remove(s):d.className=d.className.replace(new RegExp("(^|\\b)"+s.split(" ").join("|")+"(\\b|$)","gi")," ")}function hasClass(d,s){return d.classList?d.classList.contains(s):new RegExp("\\b"+s+"\\b").test(d.className)}function getPageOffset(d){var s=window.pageXOffset!==void 0,f=(d.compatMode||"")==="CSS1Compat",_=s?window.pageXOffset:f?d.documentElement.scrollLeft:d.body.scrollLeft,S=s?window.pageYOffset:f?d.documentElement.scrollTop:d.body.scrollTop;return{x:_,y:S}}function getActions(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function getSupportsPassive(){var d=!1;try{var s=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("test",null,s)}catch{}return d}function getSupportsTouchActionNone(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function subRangeRatio(d,s){return 100/(s-d)}function fromPercentage(d,s,f){return s*100/(d[f+1]-d[f])}function toPercentage(d,s){return fromPercentage(d,d[0]<0?s+Math.abs(d[0]):s-d[0],0)}function isPercentage(d,s){return s*(d[1]-d[0])/100+d[0]}function getJ(d,s){for(var f=1;d>=s[f];)f+=1;return f}function toStepping(d,s,f){if(f>=d.slice(-1)[0])return 100;var _=getJ(f,d),S=d[_-1],T=d[_],F=s[_-1],M=s[_];return F+toPercentage([S,T],f)/subRangeRatio(F,M)}function fromStepping(d,s,f){if(f>=100)return d.slice(-1)[0];var _=getJ(f,s),S=d[_-1],T=d[_],F=s[_-1],M=s[_];return isPercentage([S,T],(f-F)*subRangeRatio(F,M))}function getStep(d,s,f,_){if(_===100)return _;var S=getJ(_,d),T=d[S-1],F=d[S];return f?_-T>(F-T)/2?F:T:s[S-1]?d[S-1]+closest(_-d[S-1],s[S-1]):_}var Spectrum=function(){function d(s,f,_){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[_||!1],this.xNumSteps=[!1],this.snap=f;var S,T=[];for(Object.keys(s).forEach(function(F){T.push([asArray(s[F]),F])}),T.sort(function(F,M){return F[0][0]-M[0][0]}),S=0;S<T.length;S++)this.handleEntryPoint(T[S][1],T[S][0]);for(this.xNumSteps=this.xSteps.slice(0),S=0;S<this.xNumSteps.length;S++)this.handleStepPoint(S,this.xNumSteps[S])}return d.prototype.getDistance=function(s){for(var f=[],_=0;_<this.xNumSteps.length-1;_++)f[_]=fromPercentage(this.xVal,s,_);return f},d.prototype.getAbsoluteDistance=function(s,f,_){var S=0;if(s<this.xPct[this.xPct.length-1])for(;s>this.xPct[S+1];)S++;else s===this.xPct[this.xPct.length-1]&&(S=this.xPct.length-2);!_&&s===this.xPct[S+1]&&S++,f===null&&(f=[]);var T,F=1,M=f[S],P=0,H=0,J=0,K=0;for(_?T=(s-this.xPct[S])/(this.xPct[S+1]-this.xPct[S]):T=(this.xPct[S+1]-s)/(this.xPct[S+1]-this.xPct[S]);M>0;)P=this.xPct[S+1+K]-this.xPct[S+K],f[S+K]*F+100-T*100>100?(H=P*T,F=(M-100*T)/f[S+K],T=1):(H=f[S+K]*P/100*F,F=0),_?(J=J-H,this.xPct.length+K>=1&&K--):(J=J+H,this.xPct.length-K>=1&&K++),M=f[S+K]*F;return s+J},d.prototype.toStepping=function(s){return s=toStepping(this.xVal,this.xPct,s),s},d.prototype.fromStepping=function(s){return fromStepping(this.xVal,this.xPct,s)},d.prototype.getStep=function(s){return s=getStep(this.xPct,this.xSteps,this.snap,s),s},d.prototype.getDefaultStep=function(s,f,_){var S=getJ(s,this.xPct);return(s===100||f&&s===this.xPct[S-1])&&(S=Math.max(S-1,1)),(this.xVal[S]-this.xVal[S-1])/_},d.prototype.getNearbySteps=function(s){var f=getJ(s,this.xPct);return{stepBefore:{startValue:this.xVal[f-2],step:this.xNumSteps[f-2],highestStep:this.xHighestCompleteStep[f-2]},thisStep:{startValue:this.xVal[f-1],step:this.xNumSteps[f-1],highestStep:this.xHighestCompleteStep[f-1]},stepAfter:{startValue:this.xVal[f],step:this.xNumSteps[f],highestStep:this.xHighestCompleteStep[f]}}},d.prototype.countStepDecimals=function(){var s=this.xNumSteps.map(countDecimals);return Math.max.apply(null,s)},d.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},d.prototype.convert=function(s){return this.getStep(this.toStepping(s))},d.prototype.handleEntryPoint=function(s,f){var _;if(s==="min"?_=0:s==="max"?_=100:_=parseFloat(s),!isNumeric(_)||!isNumeric(f[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(_),this.xVal.push(f[0]);var S=Number(f[1]);_?this.xSteps.push(isNaN(S)?!1:S):isNaN(S)||(this.xSteps[0]=S),this.xHighestCompleteStep.push(0)},d.prototype.handleStepPoint=function(s,f){if(f){if(this.xVal[s]===this.xVal[s+1]){this.xSteps[s]=this.xHighestCompleteStep[s]=this.xVal[s];return}this.xSteps[s]=fromPercentage([this.xVal[s],this.xVal[s+1]],f,0)/subRangeRatio(this.xPct[s],this.xPct[s+1]);var _=(this.xVal[s+1]-this.xVal[s])/this.xNumSteps[s],S=Math.ceil(Number(_.toFixed(3))-1),T=this.xVal[s]+this.xNumSteps[s]*S;this.xHighestCompleteStep[s]=T}},d}(),defaultFormatter={to:function(d){return d===void 0?"":d.toFixed(2)},from:Number},cssClasses={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},INTERNAL_EVENT_NS={tooltips:".__tooltips",aria:".__aria"};function testStep(d,s){if(!isNumeric(s))throw new Error("noUiSlider: 'step' is not numeric.");d.singleStep=s}function testKeyboardPageMultiplier(d,s){if(!isNumeric(s))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");d.keyboardPageMultiplier=s}function testKeyboardMultiplier(d,s){if(!isNumeric(s))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");d.keyboardMultiplier=s}function testKeyboardDefaultStep(d,s){if(!isNumeric(s))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");d.keyboardDefaultStep=s}function testRange(d,s){if(typeof s!="object"||Array.isArray(s))throw new Error("noUiSlider: 'range' is not an object.");if(s.min===void 0||s.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");d.spectrum=new Spectrum(s,d.snap||!1,d.singleStep)}function testStart(d,s){if(s=asArray(s),!Array.isArray(s)||!s.length)throw new Error("noUiSlider: 'start' option is incorrect.");d.handles=s.length,d.start=s}function testSnap(d,s){if(typeof s!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");d.snap=s}function testAnimate(d,s){if(typeof s!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");d.animate=s}function testAnimationDuration(d,s){if(typeof s!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");d.animationDuration=s}function testConnect(d,s){var f=[!1],_;if(s==="lower"?s=[!0,!1]:s==="upper"&&(s=[!1,!0]),s===!0||s===!1){for(_=1;_<d.handles;_++)f.push(s);f.push(!1)}else{if(!Array.isArray(s)||!s.length||s.length!==d.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");f=s}d.connect=f}function testOrientation(d,s){switch(s){case"horizontal":d.ort=0;break;case"vertical":d.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function testMargin(d,s){if(!isNumeric(s))throw new Error("noUiSlider: 'margin' option must be numeric.");s!==0&&(d.margin=d.spectrum.getDistance(s))}function testLimit(d,s){if(!isNumeric(s))throw new Error("noUiSlider: 'limit' option must be numeric.");if(d.limit=d.spectrum.getDistance(s),!d.limit||d.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function testPadding(d,s){var f;if(!isNumeric(s)&&!Array.isArray(s))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(s)&&!(s.length===2||isNumeric(s[0])||isNumeric(s[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(s!==0){for(Array.isArray(s)||(s=[s,s]),d.padding=[d.spectrum.getDistance(s[0]),d.spectrum.getDistance(s[1])],f=0;f<d.spectrum.xNumSteps.length-1;f++)if(d.padding[0][f]<0||d.padding[1][f]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var _=s[0]+s[1],S=d.spectrum.xVal[0],T=d.spectrum.xVal[d.spectrum.xVal.length-1];if(_/(T-S)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function testDirection(d,s){switch(s){case"ltr":d.dir=0;break;case"rtl":d.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function testBehaviour(d,s){if(typeof s!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var f=s.indexOf("tap")>=0,_=s.indexOf("drag")>=0,S=s.indexOf("fixed")>=0,T=s.indexOf("snap")>=0,F=s.indexOf("hover")>=0,M=s.indexOf("unconstrained")>=0,P=s.indexOf("invert-connects")>=0,H=s.indexOf("drag-all")>=0,J=s.indexOf("smooth-steps")>=0;if(S){if(d.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");testMargin(d,d.start[1]-d.start[0])}if(P&&d.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(M&&(d.margin||d.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");d.events={tap:f||T,drag:_,dragAll:H,smoothSteps:J,fixed:S,snap:T,hover:F,unconstrained:M,invertConnects:P}}function testTooltips(d,s){if(s!==!1)if(s===!0||isValidPartialFormatter(s)){d.tooltips=[];for(var f=0;f<d.handles;f++)d.tooltips.push(s)}else{if(s=asArray(s),s.length!==d.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");s.forEach(function(_){if(typeof _!="boolean"&&!isValidPartialFormatter(_))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),d.tooltips=s}}function testHandleAttributes(d,s){if(s.length!==d.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");d.handleAttributes=s}function testAriaFormat(d,s){if(!isValidPartialFormatter(s))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");d.ariaFormat=s}function testFormat(d,s){if(!isValidFormatter(s))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");d.format=s}function testKeyboardSupport(d,s){if(typeof s!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");d.keyboardSupport=s}function testDocumentElement(d,s){d.documentElement=s}function testCssPrefix(d,s){if(typeof s!="string"&&s!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");d.cssPrefix=s}function testCssClasses(d,s){if(typeof s!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof d.cssPrefix=="string"?(d.cssClasses={},Object.keys(s).forEach(function(f){d.cssClasses[f]=d.cssPrefix+s[f]})):d.cssClasses=s}function testOptions(d){var s={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:defaultFormatter,format:defaultFormatter},f={step:{r:!1,t:testStep},keyboardPageMultiplier:{r:!1,t:testKeyboardPageMultiplier},keyboardMultiplier:{r:!1,t:testKeyboardMultiplier},keyboardDefaultStep:{r:!1,t:testKeyboardDefaultStep},start:{r:!0,t:testStart},connect:{r:!0,t:testConnect},direction:{r:!0,t:testDirection},snap:{r:!1,t:testSnap},animate:{r:!1,t:testAnimate},animationDuration:{r:!1,t:testAnimationDuration},range:{r:!0,t:testRange},orientation:{r:!1,t:testOrientation},margin:{r:!1,t:testMargin},limit:{r:!1,t:testLimit},padding:{r:!1,t:testPadding},behaviour:{r:!0,t:testBehaviour},ariaFormat:{r:!1,t:testAriaFormat},format:{r:!1,t:testFormat},tooltips:{r:!1,t:testTooltips},keyboardSupport:{r:!0,t:testKeyboardSupport},documentElement:{r:!1,t:testDocumentElement},cssPrefix:{r:!0,t:testCssPrefix},cssClasses:{r:!0,t:testCssClasses},handleAttributes:{r:!1,t:testHandleAttributes}},_={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};d.format&&!d.ariaFormat&&(d.ariaFormat=d.format),Object.keys(f).forEach(function(P){if(!isSet(d[P])&&_[P]===void 0){if(f[P].r)throw new Error("noUiSlider: '"+P+"' is required.");return}f[P].t(s,isSet(d[P])?d[P]:_[P])}),s.pips=d.pips;var S=document.createElement("div"),T=S.style.msTransform!==void 0,F=S.style.transform!==void 0;s.transformRule=F?"transform":T?"msTransform":"webkitTransform";var M=[["left","top"],["right","bottom"]];return s.style=M[s.dir][s.ort],s}function scope(d,s,f){var _=getActions(),S=getSupportsTouchActionNone(),T=S&&getSupportsPassive(),F=d,M,P,H,J,K,oe,se=s.spectrum,ae=[],ge=[],he=[],Be=0,pe={},be=!1,Re=d.ownerDocument,Fe=s.documentElement||Re.documentElement,Me=Re.body,ve=Re.dir==="rtl"||s.ort===1?0:100;function At(Hr,zn){var na=Re.createElement("div");return zn&&addClass(na,zn),Hr.appendChild(na),na}function Ct(Hr,zn){var na=At(Hr,s.cssClasses.origin),PA=At(na,s.cssClasses.handle);if(At(PA,s.cssClasses.touchArea),PA.setAttribute("data-handle",String(zn)),s.keyboardSupport&&(PA.setAttribute("tabindex","0"),PA.addEventListener("keydown",function(GA){return gA(GA,zn)})),s.handleAttributes!==void 0){var YA=s.handleAttributes[zn];Object.keys(YA).forEach(function(GA){PA.setAttribute(GA,YA[GA])})}return PA.setAttribute("role","slider"),PA.setAttribute("aria-orientation",s.ort?"vertical":"horizontal"),zn===0?addClass(PA,s.cssClasses.handleLower):zn===s.handles-1&&addClass(PA,s.cssClasses.handleUpper),na.handle=PA,na}function Rt(Hr,zn){return zn?At(Hr,s.cssClasses.connect):!1}function It(Hr,zn){P=At(zn,s.cssClasses.connects),H=[],J=[],J.push(Rt(P,Hr[0]));for(var na=0;na<s.handles;na++)H.push(Ct(zn,na)),he[na]=na,J.push(Rt(P,Hr[na+1]))}function xt(Hr){addClass(Hr,s.cssClasses.target),s.dir===0?addClass(Hr,s.cssClasses.ltr):addClass(Hr,s.cssClasses.rtl),s.ort===0?addClass(Hr,s.cssClasses.horizontal):addClass(Hr,s.cssClasses.vertical);var zn=getComputedStyle(Hr).direction;return zn==="rtl"?addClass(Hr,s.cssClasses.textDirectionRtl):addClass(Hr,s.cssClasses.textDirectionLtr),At(Hr,s.cssClasses.base)}function wt(Hr,zn){return!s.tooltips||!s.tooltips[zn]?!1:At(Hr.firstChild,s.cssClasses.tooltip)}function Ft(){return F.hasAttribute("disabled")}function jt(Hr){var zn=H[Hr];return zn.hasAttribute("disabled")}function ta(Hr){Hr!=null?(H[Hr].setAttribute("disabled",""),H[Hr].handle.removeAttribute("tabindex")):(F.setAttribute("disabled",""),H.forEach(function(zn){zn.handle.removeAttribute("tabindex")}))}function Qn(Hr){Hr!=null?(H[Hr].removeAttribute("disabled"),H[Hr].handle.setAttribute("tabindex","0")):(F.removeAttribute("disabled"),H.forEach(function(zn){zn.removeAttribute("disabled"),zn.handle.setAttribute("tabindex","0")}))}function ca(){oe&&(HI("update"+INTERNAL_EVENT_NS.tooltips),oe.forEach(function(Hr){Hr&&removeElement(Hr)}),oe=null)}function Jn(){ca(),oe=H.map(wt),JA("update"+INTERNAL_EVENT_NS.tooltips,function(Hr,zn,na){if(!(!oe||!s.tooltips)&&oe[zn]!==!1){var PA=Hr[zn];s.tooltips[zn]!==!0&&(PA=s.tooltips[zn].to(na[zn])),oe[zn].innerHTML=PA}})}function wA(){HI("update"+INTERNAL_EVENT_NS.aria),JA("update"+INTERNAL_EVENT_NS.aria,function(Hr,zn,na,PA,YA){he.forEach(function(GA){var AI=H[GA],tI=bA(ge,GA,0,!0,!0,!0),rC=bA(ge,GA,100,!0,!0,!0),JI=YA[GA],cC=String(s.ariaFormat.to(na[GA]));tI=se.fromStepping(tI).toFixed(1),rC=se.fromStepping(rC).toFixed(1),JI=se.fromStepping(JI).toFixed(1),AI.children[0].setAttribute("aria-valuemin",tI),AI.children[0].setAttribute("aria-valuemax",rC),AI.children[0].setAttribute("aria-valuenow",JI),AI.children[0].setAttribute("aria-valuetext",cC)})})}function LA(Hr){if(Hr.mode===PipsMode.Range||Hr.mode===PipsMode.Steps)return se.xVal;if(Hr.mode===PipsMode.Count){if(Hr.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var zn=Hr.values-1,na=100/zn,PA=[];zn--;)PA[zn]=zn*na;return PA.push(100),ZA(PA,Hr.stepped)}return Hr.mode===PipsMode.Positions?ZA(Hr.values,Hr.stepped):Hr.mode===PipsMode.Values?Hr.stepped?Hr.values.map(function(YA){return se.fromStepping(se.getStep(se.toStepping(YA)))}):Hr.values:[]}function ZA(Hr,zn){return Hr.map(function(na){return se.fromStepping(zn?se.getStep(na):na)})}function xI(Hr){function zn(JI,cC){return Number((JI+cC).toFixed(7))}var na=LA(Hr),PA={},YA=se.xVal[0],GA=se.xVal[se.xVal.length-1],AI=!1,tI=!1,rC=0;return na=unique(na.slice().sort(function(JI,cC){return JI-cC})),na[0]!==YA&&(na.unshift(YA),AI=!0),na[na.length-1]!==GA&&(na.push(GA),tI=!0),na.forEach(function(JI,cC){var sC,XI,Vt,Un=JI,Kn=na[cC+1],qt,Xt,ga,aA,BA,uI,mI,qI=Hr.mode===PipsMode.Steps;for(qI&&(sC=se.xNumSteps[cC]),sC||(sC=Kn-Un),Kn===void 0&&(Kn=Un),sC=Math.max(sC,1e-7),XI=Un;XI<=Kn;XI=zn(XI,sC)){for(qt=se.toStepping(XI),Xt=qt-rC,BA=Xt/(Hr.density||1),uI=Math.round(BA),mI=Xt/uI,Vt=1;Vt<=uI;Vt+=1)ga=rC+Vt*mI,PA[ga.toFixed(5)]=[se.fromStepping(ga),0];aA=na.indexOf(XI)>-1?PipsType.LargeValue:qI?PipsType.SmallValue:PipsType.NoValue,!cC&&AI&&XI!==Kn&&(aA=0),XI===Kn&&tI||(PA[qt.toFixed(5)]=[XI,aA]),rC=qt}}),PA}function cI(Hr,zn,na){var PA,YA,GA=Re.createElement("div"),AI=(PA={},PA[PipsType.None]="",PA[PipsType.NoValue]=s.cssClasses.valueNormal,PA[PipsType.LargeValue]=s.cssClasses.valueLarge,PA[PipsType.SmallValue]=s.cssClasses.valueSub,PA),tI=(YA={},YA[PipsType.None]="",YA[PipsType.NoValue]=s.cssClasses.markerNormal,YA[PipsType.LargeValue]=s.cssClasses.markerLarge,YA[PipsType.SmallValue]=s.cssClasses.markerSub,YA),rC=[s.cssClasses.valueHorizontal,s.cssClasses.valueVertical],JI=[s.cssClasses.markerHorizontal,s.cssClasses.markerVertical];addClass(GA,s.cssClasses.pips),addClass(GA,s.ort===0?s.cssClasses.pipsHorizontal:s.cssClasses.pipsVertical);function cC(XI,Vt){var Un=Vt===s.cssClasses.value,Kn=Un?rC:JI,qt=Un?AI:tI;return Vt+" "+Kn[s.ort]+" "+qt[XI]}function sC(XI,Vt,Un){if(Un=zn?zn(Vt,Un):Un,Un!==PipsType.None){var Kn=At(GA,!1);Kn.className=cC(Un,s.cssClasses.marker),Kn.style[s.style]=XI+"%",Un>PipsType.NoValue&&(Kn=At(GA,!1),Kn.className=cC(Un,s.cssClasses.value),Kn.setAttribute("data-value",String(Vt)),Kn.style[s.style]=XI+"%",Kn.innerHTML=String(na.to(Vt)))}}return Object.keys(Hr).forEach(function(XI){sC(XI,Hr[XI][0],Hr[XI][1])}),GA}function pI(){K&&(removeElement(K),K=null)}function aI(Hr){pI();var zn=xI(Hr),na=Hr.filter,PA=Hr.format||{to:function(YA){return String(Math.round(YA))}};return K=F.appendChild(cI(zn,na,PA)),K}function nI(){var Hr=M.getBoundingClientRect(),zn="offset"+["Width","Height"][s.ort];return s.ort===0?Hr.width||M[zn]:Hr.height||M[zn]}function uA(Hr,zn,na,PA){var YA=function(AI){var tI=aa(AI,PA.pageOffset,PA.target||zn);if(!tI||Ft()&&!PA.doNotReject||hasClass(F,s.cssClasses.tap)&&!PA.doNotReject||Hr===_.start&&tI.buttons!==void 0&&tI.buttons>1||PA.hover&&tI.buttons)return!1;T||tI.preventDefault(),tI.calcPoint=tI.points[s.ort],na(tI,PA)},GA=[];return Hr.split(" ").forEach(function(AI){zn.addEventListener(AI,YA,T?{passive:!0}:!1),GA.push([AI,YA])}),GA}function aa(Hr,zn,na){var PA=Hr.type.indexOf("touch")===0,YA=Hr.type.indexOf("mouse")===0,GA=Hr.type.indexOf("pointer")===0,AI=0,tI=0;if(Hr.type.indexOf("MSPointer")===0&&(GA=!0),Hr.type==="mousedown"&&!Hr.buttons&&!Hr.touches)return!1;if(PA){var rC=function(sC){var XI=sC.target;return XI===na||na.contains(XI)||Hr.composed&&Hr.composedPath().shift()===na};if(Hr.type==="touchstart"){var JI=Array.prototype.filter.call(Hr.touches,rC);if(JI.length>1)return!1;AI=JI[0].pageX,tI=JI[0].pageY}else{var cC=Array.prototype.find.call(Hr.changedTouches,rC);if(!cC)return!1;AI=cC.pageX,tI=cC.pageY}}return zn=zn||getPageOffset(Re),(YA||GA)&&(AI=Hr.clientX+zn.x,tI=Hr.clientY+zn.y),Hr.pageOffset=zn,Hr.points=[AI,tI],Hr.cursor=YA||GA,Hr}function eA(Hr){var zn=Hr-offset(M,s.ort),na=zn*100/nI();return na=limit(na),s.dir?100-na:na}function DA(Hr){var zn=100,na=!1;return H.forEach(function(PA,YA){if(!jt(YA)){var GA=ge[YA],AI=Math.abs(GA-Hr),tI=AI===100&&zn===100,rC=AI<zn,JI=AI<=zn&&Hr>GA;(rC||JI||tI)&&(na=YA,zn=AI)}}),na}function xA(Hr,zn){Hr.type==="mouseout"&&Hr.target.nodeName==="HTML"&&Hr.relatedTarget===null&&sA(Hr,zn)}function ua(Hr,zn){if(navigator.appVersion.indexOf("MSIE 9")===-1&&Hr.buttons===0&&zn.buttonsProperty!==0)return sA(Hr,zn);var na=(s.dir?-1:1)*(Hr.calcPoint-zn.startCalcPoint),PA=na*100/zn.baseSize;II(na>0,PA,zn.locations,zn.handleNumbers,zn.connect)}function sA(Hr,zn){zn.handle&&(removeClass(zn.handle,s.cssClasses.active),Be-=1),zn.listeners.forEach(function(na){Fe.removeEventListener(na[0],na[1])}),Be===0&&(removeClass(F,s.cssClasses.drag),IA(),Hr.cursor&&(Me.style.cursor="",Me.removeEventListener("selectstart",preventDefault))),s.events.smoothSteps&&(zn.handleNumbers.forEach(function(na){MA(na,ge[na],!0,!0,!1,!1)}),zn.handleNumbers.forEach(function(na){Nt("update",na)})),zn.handleNumbers.forEach(function(na){Nt("change",na),Nt("set",na),Nt("end",na)})}function oA(Hr,zn){if(!zn.handleNumbers.some(jt)){var na;if(zn.handleNumbers.length===1){var PA=H[zn.handleNumbers[0]];na=PA.children[0],Be+=1,addClass(na,s.cssClasses.active)}Hr.stopPropagation();var YA=[],GA=uA(_.move,Fe,ua,{target:Hr.target,handle:na,connect:zn.connect,listeners:YA,startCalcPoint:Hr.calcPoint,baseSize:nI(),pageOffset:Hr.pageOffset,handleNumbers:zn.handleNumbers,buttonsProperty:Hr.buttons,locations:ge.slice()}),AI=uA(_.end,Fe,sA,{target:Hr.target,handle:na,listeners:YA,doNotReject:!0,handleNumbers:zn.handleNumbers}),tI=uA("mouseout",Fe,xA,{target:Hr.target,handle:na,listeners:YA,doNotReject:!0,handleNumbers:zn.handleNumbers});YA.push.apply(YA,GA.concat(AI,tI)),Hr.cursor&&(Me.style.cursor=getComputedStyle(Hr.target).cursor,H.length>1&&addClass(F,s.cssClasses.drag),Me.addEventListener("selectstart",preventDefault,!1)),zn.handleNumbers.forEach(function(rC){Nt("start",rC)})}}function fA(Hr){Hr.stopPropagation();var zn=eA(Hr.calcPoint),na=DA(zn);na!==!1&&(s.events.snap||addClassFor(F,s.cssClasses.tap,s.animationDuration),MA(na,zn,!0,!0),IA(),Nt("slide",na,!0),Nt("update",na,!0),s.events.snap?oA(Hr,{handleNumbers:[na]}):(Nt("change",na,!0),Nt("set",na,!0)))}function lA(Hr){var zn=eA(Hr.calcPoint),na=se.getStep(zn),PA=se.fromStepping(na);Object.keys(pe).forEach(function(YA){YA.split(".")[0]==="hover"&&pe[YA].forEach(function(GA){GA.call(MC,PA)})})}function gA(Hr,zn){if(Ft()||jt(zn))return!1;var na=["Left","Right"],PA=["Down","Up"],YA=["PageDown","PageUp"],GA=["Home","End"];s.dir&&!s.ort?na.reverse():s.ort&&!s.dir&&(PA.reverse(),YA.reverse());var AI=Hr.key.replace("Arrow",""),tI=AI===YA[0],rC=AI===YA[1],JI=AI===PA[0]||AI===na[0]||tI,cC=AI===PA[1]||AI===na[1]||rC,sC=AI===GA[0],XI=AI===GA[1];if(!JI&&!cC&&!sC&&!XI)return!0;Hr.preventDefault();var Vt;if(cC||JI){var Un=JI?0:1,Kn=mC(zn),qt=Kn[Un];if(qt===null)return!1;qt===!1&&(qt=se.getDefaultStep(ge[zn],JI,s.keyboardDefaultStep)),rC||tI?qt*=s.keyboardPageMultiplier:qt*=s.keyboardMultiplier,qt=Math.max(qt,1e-7),qt=(JI?-1:1)*qt,Vt=ae[zn]+qt}else XI?Vt=s.spectrum.xVal[s.spectrum.xVal.length-1]:Vt=s.spectrum.xVal[0];return MA(zn,se.toStepping(Vt),!0,!0),Nt("slide",zn),Nt("update",zn),Nt("change",zn),Nt("set",zn),!1}function WA(Hr){Hr.fixed||H.forEach(function(zn,na){uA(_.start,zn.children[0],oA,{handleNumbers:[na]})}),Hr.tap&&uA(_.start,M,fA,{}),Hr.hover&&uA(_.move,M,lA,{hover:!0}),Hr.drag&&J.forEach(function(zn,na){if(!(zn===!1||na===0||na===J.length-1)){var PA=H[na-1],YA=H[na],GA=[zn],AI=[PA,YA],tI=[na-1,na];addClass(zn,s.cssClasses.draggable),Hr.fixed&&(GA.push(PA.children[0]),GA.push(YA.children[0])),Hr.dragAll&&(AI=H,tI=he),GA.forEach(function(rC){uA(_.start,rC,oA,{handles:AI,handleNumbers:tI,connect:zn})})}})}function JA(Hr,zn){pe[Hr]=pe[Hr]||[],pe[Hr].push(zn),Hr.split(".")[0]==="update"&&H.forEach(function(na,PA){Nt("update",PA)})}function _I(Hr){return Hr===INTERNAL_EVENT_NS.aria||Hr===INTERNAL_EVENT_NS.tooltips}function HI(Hr){var zn=Hr&&Hr.split(".")[0],na=zn?Hr.substring(zn.length):Hr;Object.keys(pe).forEach(function(PA){var YA=PA.split(".")[0],GA=PA.substring(YA.length);(!zn||zn===YA)&&(!na||na===GA)&&(!_I(GA)||na===GA)&&delete pe[PA]})}function Nt(Hr,zn,na){Object.keys(pe).forEach(function(PA){var YA=PA.split(".")[0];Hr===YA&&pe[PA].forEach(function(GA){GA.call(MC,ae.map(s.format.to),zn,ae.slice(),na||!1,ge.slice(),MC)})})}function bA(Hr,zn,na,PA,YA,GA,AI){var tI;return H.length>1&&!s.events.unconstrained&&(PA&&zn>0&&(tI=se.getAbsoluteDistance(Hr[zn-1],s.margin,!1),na=Math.max(na,tI)),YA&&zn<H.length-1&&(tI=se.getAbsoluteDistance(Hr[zn+1],s.margin,!0),na=Math.min(na,tI))),H.length>1&&s.limit&&(PA&&zn>0&&(tI=se.getAbsoluteDistance(Hr[zn-1],s.limit,!1),na=Math.min(na,tI)),YA&&zn<H.length-1&&(tI=se.getAbsoluteDistance(Hr[zn+1],s.limit,!0),na=Math.max(na,tI))),s.padding&&(zn===0&&(tI=se.getAbsoluteDistance(0,s.padding[0],!1),na=Math.max(na,tI)),zn===H.length-1&&(tI=se.getAbsoluteDistance(100,s.padding[1],!0),na=Math.min(na,tI))),AI||(na=se.getStep(na)),na=limit(na),na===Hr[zn]&&!GA?!1:na}function hA(Hr,zn){var na=s.ort;return(na?zn:Hr)+", "+(na?Hr:zn)}function II(Hr,zn,na,PA,YA){var GA=na.slice(),AI=PA[0],tI=s.events.smoothSteps,rC=[!Hr,Hr],JI=[Hr,!Hr];PA=PA.slice(),Hr&&PA.reverse(),PA.length>1?PA.forEach(function(sC,XI){var Vt=bA(GA,sC,GA[sC]+zn,rC[XI],JI[XI],!1,tI);Vt===!1?zn=0:(zn=Vt-GA[sC],GA[sC]=Vt)}):rC=JI=[!0];var cC=!1;PA.forEach(function(sC,XI){cC=MA(sC,na[sC]+zn,rC[XI],JI[XI],!1,tI)||cC}),cC&&(PA.forEach(function(sC){Nt("update",sC),Nt("slide",sC)}),YA!=null&&Nt("drag",AI))}function OI(Hr,zn){return s.dir?100-Hr-zn:Hr}function ba(Hr,zn){ge[Hr]=zn,ae[Hr]=se.fromStepping(zn);var na=OI(zn,0)-ve,PA="translate("+hA(na+"%","0")+")";if(H[Hr].style[s.transformRule]=PA,s.events.invertConnects&&ge.length>1){var YA=ge.every(function(GA,AI,tI){return AI===0||GA>=tI[AI-1]});if(be!==!YA){vC();return}}EI(Hr),EI(Hr+1),be&&(EI(Hr-1),EI(Hr+2))}function IA(){he.forEach(function(Hr){var zn=ge[Hr]>50?-1:1,na=3+(H.length+zn*Hr);H[Hr].style.zIndex=String(na)})}function MA(Hr,zn,na,PA,YA,GA){return YA||(zn=bA(ge,Hr,zn,na,PA,!1,GA)),zn===!1?!1:(ba(Hr,zn),!0)}function EI(Hr){if(J[Hr]){var zn=ge.slice();be&&zn.sort(function(tI,rC){return tI-rC});var na=0,PA=100;Hr!==0&&(na=zn[Hr-1]),Hr!==J.length-1&&(PA=zn[Hr]);var YA=PA-na,GA="translate("+hA(OI(na,YA)+"%","0")+")",AI="scale("+hA(YA/100,"1")+")";J[Hr].style[s.transformRule]=GA+" "+AI}}function wI(Hr,zn){return Hr===null||Hr===!1||Hr===void 0||(typeof Hr=="number"&&(Hr=String(Hr)),Hr=s.format.from(Hr),Hr!==!1&&(Hr=se.toStepping(Hr)),Hr===!1||isNaN(Hr))?ge[zn]:Hr}function vI(Hr,zn,na){var PA=asArray(Hr),YA=ge[0]===void 0;zn=zn===void 0?!0:zn,s.animate&&!YA&&addClassFor(F,s.cssClasses.tap,s.animationDuration),he.forEach(function(tI){MA(tI,wI(PA[tI],tI),!0,!1,na)});var GA=he.length===1?0:1;if(YA&&se.hasNoSize()&&(na=!0,ge[0]=0,he.length>1)){var AI=100/(he.length-1);he.forEach(function(tI){ge[tI]=tI*AI})}for(;GA<he.length;++GA)he.forEach(function(tI){MA(tI,ge[tI],!0,!0,na)});IA(),he.forEach(function(tI){Nt("update",tI),PA[tI]!==null&&zn&&Nt("set",tI)})}function WI(Hr){vI(s.start,Hr)}function GI(Hr,zn,na,PA){if(Hr=Number(Hr),!(Hr>=0&&Hr<he.length))throw new Error("noUiSlider: invalid handle number, got: "+Hr);MA(Hr,wI(zn,Hr),!0,!0,PA),Nt("update",Hr),na&&Nt("set",Hr)}function NI(Hr){if(Hr===void 0&&(Hr=!1),Hr)return ae.length===1?ae[0]:ae.slice(0);var zn=ae.map(s.format.to);return zn.length===1?zn[0]:zn}function tC(){for(HI(INTERNAL_EVENT_NS.aria),HI(INTERNAL_EVENT_NS.tooltips),Object.keys(s.cssClasses).forEach(function(Hr){removeClass(F,s.cssClasses[Hr])});F.firstChild;)F.removeChild(F.firstChild);delete F.noUiSlider}function mC(Hr){var zn=ge[Hr],na=se.getNearbySteps(zn),PA=ae[Hr],YA=na.thisStep.step,GA=null;if(s.snap)return[PA-na.stepBefore.startValue||null,na.stepAfter.startValue-PA||null];YA!==!1&&PA+YA>na.stepAfter.startValue&&(YA=na.stepAfter.startValue-PA),PA>na.thisStep.startValue?GA=na.thisStep.step:na.stepBefore.step===!1?GA=!1:GA=PA-na.stepBefore.highestStep,zn===100?YA=null:zn===0&&(GA=null);var AI=se.countStepDecimals();return YA!==null&&YA!==!1&&(YA=Number(YA.toFixed(AI))),GA!==null&&GA!==!1&&(GA=Number(GA.toFixed(AI))),[GA,YA]}function yC(){return he.map(mC)}function QC(Hr,zn){var na=NI(),PA=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];PA.forEach(function(GA){Hr[GA]!==void 0&&(f[GA]=Hr[GA])});var YA=testOptions(f);PA.forEach(function(GA){Hr[GA]!==void 0&&(s[GA]=YA[GA])}),se=YA.spectrum,s.margin=YA.margin,s.limit=YA.limit,s.padding=YA.padding,s.pips?aI(s.pips):pI(),s.tooltips?Jn():ca(),ge=[],vI(isSet(Hr.start)?Hr.start:na,zn),Hr.connect&&_C()}function _C(){for(;P.firstChild;)P.removeChild(P.firstChild);for(var Hr=0;Hr<=s.handles;Hr++)J[Hr]=Rt(P,s.connect[Hr]),EI(Hr);WA({drag:s.events.drag,fixed:!0})}function vC(){be=!be,testConnect(s,s.connect.map(function(Hr){return!Hr})),_C()}function RC(){M=xt(F),It(s.connect,M),WA(s.events),vI(s.start),s.pips&&aI(s.pips),s.tooltips&&Jn(),wA()}RC();var MC={destroy:tC,steps:yC,on:JA,off:HI,get:NI,set:vI,setHandle:GI,reset:WI,disable:ta,enable:Qn,__moveHandles:function(Hr,zn,na){II(Hr,zn,ge,na)},options:f,updateOptions:QC,target:F,removePips:pI,removeTooltips:ca,getPositions:function(){return ge.slice()},getTooltips:function(){return oe},getOrigins:function(){return H},pips:aI};return MC}function initialize(d,s){if(!d||!d.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+d);if(d.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var f=testOptions(s),_=scope(d,f,s);return d.noUiSlider=_,_}const noUiSlider={__spectrum:Spectrum,cssClasses,create:initialize};class ColorChannelDialog extends BaseDialog{constructor(s,f,_){const S={width:500,title:"Channels",doc:f||document};super(S,{viv:s,ds:_})}init(s){const f=this.viv=s.viv;this.mainDiv=createEl("div",{},this.dialog);const _=this.viv.getSelectedChannels();for(const P of _)this.addSlider(P);const S=createEl("div",{styles:{padding:"4px"}},this.dialog),T=createEl("select",{},S),F=f.getAllChannels();for(let P=0;P<F.length;P++)createEl("option",{text:F[P].Name??F[P].ID,value:P},T);const M=createEl("input",{styles:{width:"25px",height:"20px",padding:"0px",margin:"0px 4px"},type:"color",value:"#ff0000"},S);createEl("button",{classes:["ciview-button-sm"],text:"Add Channel"},S).addEventListener("click",()=>{this.viv.addChannel({index:Number.parseInt(T.value),color:M.value}).then(P=>this.addSlider(P))}),createEl("button",{classes:["ciview-button-sm"],text:"Set as Default"},S).addEventListener("click",()=>{s.ds.regions.avivator.default_channels=this.viv.getSelectedChannelsNice(),s.ds.dirtyMetadata.add("regions")})}addSlider(s){const f=createEl("div",{styles:{display:"flex",padding:"4px",alignItems:"center",width:"100%"}},this.mainDiv);createEl("span",{text:s.name||`channel ${s.index}`,classes:["mdv-flex-dynamic"],styles:{flexBasis:"30%"}},f);const _=createEl("div",{classes:["mdv-flex-dynamic"],styles:{margin:"0px 10px",flexBasis:"70%",overflow:"visible"}},f),S=s.domains;noUiSlider.create(_,{start:[s.contrastLimits[0],s.contrastLimits[1]],range:{min:S?S[0]:0,max:S?S[1]:300},document:this.config.doc,tooltips:!0},f),_.noUiSlider.on("update",P=>{s.contrastLimits=[Number.parseFloat(P[0]),Number.parseFloat(P[1])],this.viv.setChannel(s)});const T=createEl("input",{classes:["mdv-flex-fixed"],styles:{width:"25px",height:"20px",padding:"0px"},type:"color",value:s.color},f);T.addEventListener("input",()=>{s.color=T.value,this.viv.setChannel(s)});const F=createEl("input",{classes:["mdv-flex-fixed","mdv-checkbox"],type:"checkbox"},f);F.checked=s.channelsVisible,F.addEventListener("click",()=>{s.channelsVisible=F.checked,this.viv.setChannel(s)}),createEl("i",{classes:["mdv-flex-fixed","fas","fa-times"],styles:{width:"16px",margin:"0px 3px",cursor:"pointer"}},f).addEventListener("click",()=>{this.viv.removeChannel(s),f.remove()})}}class VivScatterPlot extends DensityScatterPlot{constructor(s,f,_){const S=s.getColumnName(_.param[0]),T=s.getColumnName(_.param[1]);_.axis||(_.axis={x:{size:30,label:S,textsize:13},y:{size:45,label:T,textsize:13}}),super(s,f,_,{x:{},y:{}}),_.viv&&this.addMenuIcon("fas fa-palette","Alter Channels").addEventListener("click",F=>new ColorChannelDialog(this.viv,this.__doc__,this.dataStore))}setSize(s,f){if(super.setSize(s,f),this.viv){const _=this._getContentDimensions();this.viv.setSize(_.width,_.height,this.app)}}remove(){this.viv.deck&&this.viv.deck.finalize(),super.remove()}centerGraph(){super.centerGraph(),this.viv&&this.viv.setPanZoom(this.app.offset,this.app.x_scale,this.app.y_scale)}getConfig(){const s=super.getConfig();return this.viv.layers[0].props,s.viv.channels=this.viv.getSelectedChannelsNice(),s}afterAppCreation(){const s=this.config;if(s.viv||(s.viv={url:"https://viv-demo.storage.googleapis.com/LuCa-7color_3x3component_data.ome.tif",image_properties:{contrastLimits:[[0,255]],colors:[[255,255,255]],channelsVisible:[!0],selections:[{c:0,t:0,z:0}]}}),s.viv){const f=this._getContentDimensions();this.vivCanvas=createEl("canvas",{height:f.height,width:f.width,styles:{position:"absolute"}}),this.graphDiv.prepend(this.vivCanvas),__vitePreload(async()=>{const{default:_}=await import("../assets/VivViewerMDV-Cu_nAK-Z.js");return{default:_}},__vite__mapDeps([11,1]),import.meta.url).then(({default:_})=>{const S=this.dataStore.regions,T=Object.assign({},s.viv);if(S){const F=S.all_regions[s.region].viv_image;let M=F.url?F.url:getProjectURL(S.avivator.base_url)+F.file;if(!M){let P=S.avivator.base_url;P.startsWith("http")||(P.startsWith("/")?P=window.location.origin+P:(P.startsWith("./")&&(P=P.substring(2)),P=`${window.location.href.split("?")[0]}/${P}`)),M=P+F.file}T.url=M}this.viv=new _(this.vivCanvas,T,this.app),this.app.addHandler("pan_or_zoom",(F,M,P)=>{this.viv.setPanZoom(F,M,P)},`${s.id}_viv`)})}return super.afterAppCreation()}}BaseChart.types.viv_scatter_plot={name:"Viv Scatter Plot",required:d=>{var s;return(s=d.regions)==null?void 0:s.avivator},extra_controls:d=>{const s=[];for(const f in d.regions.all_regions)d.regions.all_regions[f].viv_image&&s.push({name:f,value:f});return[{type:"dropdown",name:"region",label:d.getColumnName(d.regions.region_field),values:s}]},init:(d,s,f)=>{BaseChart.types.image_scatter_plot.init(d,s,f),d.background_image=void 0,d.radius=.5,d.viv={channels:s.regions.avivator.default_channels}},class:VivScatterPlot};function shallow$1(d,s){if(Object.is(d,s))return!0;if(typeof d!="object"||d===null||typeof s!="object"||s===null)return!1;if(d instanceof Map&&s instanceof Map){if(d.size!==s.size)return!1;for(const[_,S]of d)if(!Object.is(S,s.get(_)))return!1;return!0}if(d instanceof Set&&s instanceof Set){if(d.size!==s.size)return!1;for(const _ of d)if(!s.has(_))return!1;return!0}const f=Object.keys(d);if(f.length!==Object.keys(s).length)return!1;for(const _ of f)if(!Object.prototype.hasOwnProperty.call(s,_)||!Object.is(d[_],s[_]))return!1;return!0}const COLOR_PALLETE=[[0,0,255],[0,255,0],[255,0,255],[255,255,0],[255,128,0],[0,255,255],[255,255,255],[255,0,0]],GLOBAL_SLIDER_DIMENSION_FIELDS=["z","t"],FILL_PIXEL_VALUE="----",MAX_CHANNELS_FOR_SNACKBAR_WARNING=40;function isOmeTiff(d){if(Array.isArray(d))return!1;const s=typeof d=="string"?d:d.name;return s.includes("ome.tiff")||s.includes("ome.tif")||s.includes(".companion.ome")}function getMultiTiffFilenames(d){return Array.isArray(d)?d.map(s=>s.name):d instanceof File?[d.name]:d.split(",")}function isMultiTiff(d){const s=getMultiTiffFilenames(d);for(const f of s){const _=f.toLowerCase();if(!(_.includes(".tiff")||_.includes(".tif")))return!1}return!0}async function generateMultiTiffFileArray(d){return Array.isArray(d)?d:d instanceof File?[d]:d.split(",")}async function getTiffImageCount(d){return(await(typeof d=="string"?fromUrl:fromBlob)(d)).getImageCount()}async function generateMultiTiffSources(d){const s=await generateMultiTiffFileArray(d),f=[];let _=0;for(const S of s){const T=[],F=await getTiffImageCount(S);for(let M=0;M<F;M++)T.push({c:_,z:0,t:0}),_+=1;f.push([T,S])}return f}class UnsupportedBrowserError extends Error{constructor(s){super(s),this.name="UnsupportedBrowserError"}}async function getTotalImageCount(d){var J;const s=d[0],_=await s.data[0]._indexer({c:0,z:0,t:0});if(!!((J=_==null?void 0:_.fileDirectory)!=null&&J.SubIFDs))return d.reduce((K,{metadata:oe})=>{const{SizeC:se,SizeT:ae,SizeZ:ge}=oe.Pixels;return se*ae*ge+K},1);const T=s.data.length,{SizeC:F,SizeT:M,SizeZ:P}=s.metadata.Pixels;return F*M*P*T}function isZodError(d){return d instanceof Error&&"issues"in d}async function fetchSingleFileOmeTiffOffsets(d){if(d.includes("companion.ome"))return;const s=d.replace(/ome\.tif(f?)/gi,"offsets.json");try{const f=await fetch(s);return f.status===200?await f.json():void 0}catch{console.warn(`Failed to fetch offsets for ${d}`);return}}async function createLoader(d,s,f){try{if(isOmeTiff(d)){if(d instanceof File)return await loadOmeTiff(d,{images:"all"});const S=await fetchSingleFileOmeTiffOffsets(d),T=await loadOmeTiff(d,{offsets:S,images:"all"}),F=await getTotalImageCount(T);return!S&&F>MAX_CHANNELS_FOR_SNACKBAR_WARNING&&s(!0),T}if(Array.isArray(d)&&typeof d[0].arrayBuffer!="function")throw new UnsupportedBrowserError("Cannot upload a local Zarr or flat TIFF files with this browser. Try using Chrome, Firefox, or Microsoft Edge.");if(isMultiTiff(d)){const S=await generateMultiTiffSources(d);return await loadMultiTiff(S,{})}let _;try{_=await loadBioformatsZarr(d)}catch(S){if(isZodError(S))throw S;const T=await loadOmeZarr(d,{type:"multiscales"}),F={Pixels:{Channels:T.metadata.omero.channels.map(M=>({Name:M.label,SamplesPerPixel:1}))}};_={data:T.data,metadata:F}}return _}catch(_){throw _ instanceof UnsupportedBrowserError?f(_.message):(console.error(_),f(null)),_}}function getDefaultGlobalSelection(d){const s=d.filter(_=>GLOBAL_SLIDER_DIMENSION_FIELDS.includes(_.name.toLowerCase())),f={};for(const _ of s)f[_.name]=Math.floor(_.size/2);return f}function isGlobalOrXYDimension(d){return d=d.toLowerCase(),d==="x"||d==="y"||GLOBAL_SLIDER_DIMENSION_FIELDS.includes(d)}function isInterleaved(d){const s=d[d.length-1];return s===3||s===4}function zip(d,s){if(d.length!==s.length)throw new Error("Array lengths must be equal");return d.map((f,_)=>[f,s[_]])}function buildDefaultSelection({labels:d,shape:s}){const f=[],_=zip(d,s).map(([F,M])=>({name:F,size:M})),S=getDefaultGlobalSelection(_),T=_.find(F=>!isGlobalOrXYDimension(F.name));if(!T)return[S];for(let F=0;F<Math.min(4,T.size);F+=1)f.push({[T.name]:F,...S});return isInterleaved(s)?[{...f[0],c:0}]:f}async function getSingleSelectionStats2D({loader:d,selection:s}){const _=await(Array.isArray(d)?d[d.length-1]:d).getRaster({selection:s}),S=getChannelStats(_.data),{domain:T,contrastLimits:F}=S;return F[0]===F[1]&&(F[0]=T[0],F[1]=T[1]),{domain:T,contrastLimits:F}}async function getSingleSelectionStats3D({loader:d,selection:s}){const f=d[d.length-1],{shape:_,labels:S}=f,T=_[S.indexOf("z")],F=await f.getRaster({selection:{...s,z:0}}),M=await f.getRaster({selection:{...s,z:Math.floor(T/2)}}),P=await f.getRaster({selection:{...s,z:Math.max(0,T-1)}}),H=getChannelStats(F.data),J=getChannelStats(M.data),K=getChannelStats(P.data);return{domain:[Math.min(H.domain[0],J.domain[0],K.domain[0]),Math.max(H.domain[1],J.domain[1],K.domain[1])],contrastLimits:[Math.min(H.contrastLimits[0],J.contrastLimits[0],K.contrastLimits[0]),Math.max(H.contrastLimits[1],J.contrastLimits[1],K.contrastLimits[1])]}}const getSingleSelectionStats=async({loader:d,selection:s,use3d:f})=>(f?getSingleSelectionStats3D:getSingleSelectionStats2D)({loader:d,selection:s}),getMultiSelectionStats=async({loader:d,selections:s,use3d:f})=>{const _=await Promise.all(s.map(F=>getSingleSelectionStats({loader:d,selection:F,use3d:f}))),S=_.map(F=>F.domain),T=_.map(F=>F.contrastLimits);return{domains:S,contrastLimits:T}};function guessRgb({Pixels:d}){const s=d.Channels.length,{SamplesPerPixel:f}=d.Channels[0],_=s===3&&d.Type==="uint8",S=d.SizeC===3&&s===1&&d.Interleaved;return f===3||_||S}function getPhysicalSizeScalingMatrix(d){var S;const{x:s,y:f,z:_}=((S=d==null?void 0:d.meta)==null?void 0:S.physicalSizes)??{};if(s!=null&&s.size&&(f!=null&&f.size)&&(_!=null&&_.size)){const T=Math.min(_.size,s.size,f.size),F=[s.size/T,f.size/T,_.size/T];return new Matrix4().scale(F)}return new Matrix4().identity()}function getBoundingCube(d){const s=Array.isArray(d)?d[0]:d,{shape:f,labels:_}=s,S=getPhysicalSizeScalingMatrix(s),T=[0,S[0]*f[_.indexOf("x")]],F=[0,S[5]*f[_.indexOf("y")]],M=[0,S[10]*f[_.indexOf("z")]];return[T,F,M]}const useSavedVivConfig=()=>{const d=useVivConfig(),{viewerStore:s,channelsStore:f,imageSettingsStore:_}=d,S=useViewerStoreApi(),T=useChannelsStoreApi(),F=useImageSettingsStoreApi();return reactExports.useCallback(()=>{S.setState(P=>({...P,...s})),T.setState(P=>({...P,...f})),F.setState(P=>({...P,..._}))},[s,f,_,T.setState,S.setState,F.setState])},useImage=(d,s)=>{const f=useSavedVivConfig(),[_,S,T]=useViewerStore(se=>[se.use3d,se.toggleUse3d,se.toggleIsOffsetsSnackbarOn],shallow$1),[F,M]=useImageSettingsStore(se=>[se.lensEnabled,se.toggleLensEnabled],shallow$1),P=useLoader(),H=useMetadata(),J=useViewerStoreApi(),K=useChannelsStoreApi(),oe=useImageSettingsStoreApi();reactExports.useEffect(()=>{async function se(){J.setState({isChannelLoading:[!0]}),J.setState({isViewerLoading:!0}),_&&S();const{urlOrFile:ae}=d,ge=await createLoader(ae,T,pe=>J.setState({loaderErrorSnackbar:{on:!0,message:pe}}));let he,Be;Array.isArray(ge)?ge.length>1?(he=ge.map(pe=>pe.metadata),Be=ge.map(pe=>pe.data)):(he=ge[0].metadata,Be=ge[0].data):(he=ge.metadata,Be=ge.data),Be&&(console.info("Metadata (in JSON-like form) for current file being viewed: ",he),reactDomExports.unstable_batchedUpdates(()=>{K.setState({loader:Be}),J.setState({metadata:he})}),_&&S())}d&&se().then(f)},[d,s]),reactExports.useEffect(()=>{H&&(async()=>{J.setState({isChannelLoading:[!0]}),J.setState({isViewerLoading:!0}),_&&S();const ae=buildDefaultSelection(P[0]),{Channels:ge}=H.Pixels,he=ge.map((At,Ct)=>At.Name??`Channel ${Ct}`);let Be=[],pe=[],be=[];if(guessRgb(H))isInterleaved(P[0].shape)?(Be=[[0,255]],pe=[[0,255]],be=[[255,0,0]]):(Be=[[0,255],[0,255],[0,255]],pe=[[0,255],[0,255],[0,255]],be=[[255,0,0],[0,255,0],[0,0,255]]),F&&M(),J.setState({useColormap:!1,useLens:!1});else{const At=await getMultiSelectionStats({loader:P,selections:ae,use3d:!1});pe=At.domains,Be=At.contrastLimits,be=pe.length===1?[[255,255,255]]:pe.map((Ct,Rt)=>{var It,xt;return((xt=(It=ge[Rt])==null?void 0:It.Color)==null?void 0:xt.slice(0,-1))??COLOR_PALLETE[Rt]}),J.setState({useLens:he.length!==1,useColormap:!0})}K.setState({ids:pe.map(()=>String(Math.random())),selections:ae,domains:pe,contrastLimits:Be,colors:be,channelsVisible:be.map(()=>!0)}),J.setState({isChannelLoading:ae.map(At=>!At),isViewerLoading:!1,pixelValues:new Array(ae.length).fill(FILL_PIXEL_VALUE),globalSelection:ae[0],channelOptions:he});const[Fe,Me,ve]=getBoundingCube(P);oe.setState({xSlice:Fe,ySlice:Me,zSlice:ve})})().then(f)},[P,H])};function getVivId(d){return`-#${d}#`}const areViewStatesEqual=(d,s)=>s===d||(d==null?void 0:d.zoom)===(s==null?void 0:s.zoom)&&(d==null?void 0:d.rotationX)===(s==null?void 0:s.rotationX)&&(d==null?void 0:d.rotationOrbit)===(s==null?void 0:s.rotationOrbit)&&equal(d==null?void 0:d.target,s==null?void 0:s.target);class MDVivViewerWrapper extends reactExports.PureComponent{constructor(s){console.log("using custom VivViewerWrapper via MDVivViewer - now necessary for fixing mouse events on popouts"),super(s),this.state={viewStates:{},deckRef:reactExports.createRef(),outerContainer:s.outerContainer};const{viewStates:f}=this.state,{views:_,viewStates:S}=this.props;_.forEach(T=>{f[T.id]=T.filterViewState({viewState:S.find(F=>F.id===T.id)})}),this._onViewStateChange=this._onViewStateChange.bind(this),this.layerFilter=this.layerFilter.bind(this),this.onHover=this.onHover.bind(this)}layerFilter({layer:s,viewport:f}){return s.id.includes(getVivId(f.id))}_onViewStateChange({viewId:s,viewState:f,interactionState:_,oldViewState:S}){const{views:T,onViewStateChange:F}=this.props;return f=(F==null?void 0:F({viewId:s,viewState:f,interactionState:_,oldViewState:S}))||f,this.setState(M=>{const P={};return T.forEach(H=>{const J=M.viewStates[H.id];P[H.id]=H.filterViewState({viewState:{...f,id:s},oldViewState:S,currentViewState:J})}),{viewStates:P}}),f}componentDidUpdate(s){const{props:f}=this,{views:_,outerContainer:S}=f;if(S!==this.state.outerContainer&&this.state.deckRef.current)try{const{eventManager:M}=this.state.deckRef.current.deck,{element:P}=M;M.setElement(P),this.setState({outerContainer:S})}catch(M){console.error("attempt to reset deck eventManager element failed",M)}const T={...this.state.viewStates};let F=!1;_.forEach(M=>{var oe,se;const P=(oe=f.viewStates)==null?void 0:oe.find(ae=>ae.id===M.id);if(!P)return;const H=(se=s.viewStates)==null?void 0:se.find(ae=>ae.id===M.id);if(areViewStatesEqual(P,H))return;F=!0;const{height:J,width:K}=M;T[M.id]=M.filterViewState({viewState:{...P,height:J,width:K,id:M.id}})}),F&&this.setState({viewStates:T})}static getDerivedStateFromProps(s,f){const{views:_,viewStates:S}=s;if(_.some(T=>!f.viewStates[T.id]||T.height!==f.viewStates[T.id].height||T.width!==f.viewStates[T.id].width)){const T={};return _.forEach(F=>{const{height:M,width:P}=F,H=f.viewStates[F.id];T[F.id]=F.filterViewState({viewState:{...H||S.find(J=>J.id===F.id),height:M,width:P,id:F.id}})}),{viewStates:T}}return f}onHover(s,f){const{tile:_,coordinate:S,sourceLayer:T}=s,{onHover:F,hoverHooks:M}=this.props;if(F&&F(s,f),!M||!S||!T)return null;const{handleValue:P=()=>{},handleCoordnate:H=()=>{}}=M;let J;if(T.id.includes("Tiled")){if(!(_!=null&&_.content))return null;const{content:K,bbox:oe,index:{z:se}}=_;if(!K.data||!oe)return null;const{data:ae,width:ge,height:he}=K,{left:Be,right:pe,top:be,bottom:Re}=oe,Fe=[Be,ae.height<T.tileSize?he:Re,ae.width<T.tileSize?ge:pe,be];if(!ae)return null;const Me=Math.max(1,2**Math.round(-se)),ve=[Math.floor((S[0]-Fe[0])/Me),Math.floor((S[1]-Fe[3])/Me)],At=ve[1]*ge+ve[0];J=ae.map(Ct=>Ct[At])}else{const{channelData:K}=T.props;if(!K)return null;const{data:oe,width:se,height:ae}=K;if(!oe||!se||!ae)return null;const ge=[0,ae,se,0],{zoom:he}=T.context.viewport,Be=Math.max(1,2**Math.floor(-he)),pe=[Math.floor((S[0]-ge[0])/Be),Math.floor((S[1]-ge[3])/Be)],be=pe[1]*se+pe[0];J=oe.map(Re=>Re[be])}P(J),H(S)}_renderLayers(){const{onHover:s}=this,{viewStates:f}=this.state,{views:_,layerProps:S}=this.props;return _.map((T,F)=>T.getLayers({viewStates:f,props:{...S[F],onHover:s}}))}render(){const{views:s,randomize:f,useDevicePixels:_=!0,deckProps:S}=this.props,{viewStates:T}=this.state,F=s.map(K=>K.getDeckGlView());if(f){const K=Math.random(),oe=F[0],se=K*1.49,ae=Math.round(se*(s.length-1));F[0]=F[ae],F[ae]=oe}const M=this._renderLayers()[0],P=M.find(K=>K instanceof ScaleBarLayer),H=M.filter(K=>K!==P),J=(S==null?void 0:S.layers)===void 0?[M]:[H,...S.layers,P];return jsxRuntimeExports.jsx(DeckGL,{ref:this.state.deckRef,...S??{},layerFilter:this.layerFilter,layers:J,onViewStateChange:this._onViewStateChange,views:F,viewState:T,useDevicePixels:_,getCursor:({isDragging:K})=>K?"grabbing":"crosshair"})}}const MDVivViewer=d=>jsxRuntimeExports.jsx(MDVivViewerWrapper,{...d}),heatmapPresentationFS=`#version 300 es
#define SHADER_NAME triangle-layer-fragment-contour-shader

precision highp float;
out vec4 fragColor;
uniform float opacity;
uniform sampler2D weightsTexture; //using name 'texture' caused indirect glsl compiler errors with version 300 es(?)
uniform sampler2D colorTexture;
uniform float aggregationMode;

in vec2 vTexCoords;
in float vIntensityMin;
in float vIntensityMax;

// todo more structured uniforms, array of structs...
uniform float contourOpacity;
// struct ContourProps {
//     vec2 increment;
//     float lineWidth;
//     vec3 color;
// };
// uniform ContourProps contourProps;

float smoothContour(float value) {
    // value = clamp(value * vIntensityMax, 0., 1.);
    float width = 1.5; //todo better control, more coherent maths
    float w = width * fwidth(value);
    float f = 0.5; // reciprocol bandwidth
    if (value < f) return 0.; //todo something better
    // if (value > 50. * f) return 1.; //metaballs
    float wa = smoothstep(0., (w * f), mod(value * f, 1.)-0.5); //nb -0.5 is to center the contour
    wa = 1. - max(smoothstep(1.-w, 1., wa), smoothstep(w, 0., wa));
    // return 0.0;
    return smoothstep(0., 1., wa*0.5);
    // return contour(value);
}


vec4 getLinearColor(float value) {
  float factor = clamp(value * vIntensityMax, 0., 1.);
  vec4 color = texture(colorTexture, vec2(factor, 0.5));
  color.a *= min(value * vIntensityMin, 1.0);
  return color;
}


void main(void) {
  vec4 weights = texture(weightsTexture, vTexCoords);
  float weight = weights.r;

  if (aggregationMode > 0.5) {
    weight /= max(1.0, weights.a);
  }
  // discard pixels with 0 weight.
  if (weight <= 0.) {
    discard;
  }

  vec4 linearColor = getLinearColor(weight);
  // todo allow for multiple contours, with different properties
  float c = smoothContour(weight) * contourOpacity;
  vec4 fullColor = texture(colorTexture, vec2(1.0, 0.5)); //should be a uniform
  //fullColor = vec4(1.);
  linearColor = mix(linearColor, fullColor, c);
  //   linearColor = c * vec4(1.);
  linearColor.a *= opacity;
  linearColor.a = max(linearColor.a, c*2.);
  fragColor = linearColor;
}`;log.level=0;const triangleVs=`#version 300 es
#define SHADER_NAME heatp-map-layer-vertex-shader
uniform sampler2D maxTexture;
uniform float intensity;
uniform vec2 colorDomain;
uniform float threshold;
uniform float aggregationMode;
in vec3 positions;
in vec2 texCoords;
out vec2 vTexCoords;
out float vIntensityMin;
out float vIntensityMax;
void main(void) {
    gl_Position = project_position_to_clipspace(positions, vec3(0.0), vec3(0.0));
    vTexCoords = texCoords;
    vec4 maxTexture = texture(maxTexture, vec2(0.5));
    float maxValue = aggregationMode < 0.5 ? maxTexture.r : maxTexture.g;
    float minValue = maxValue * threshold;
    if (colorDomain[1] > 0.) {
        maxValue = colorDomain[1];
        minValue = colorDomain[0];
    }
    vIntensityMax = intensity / maxValue;
    vIntensityMin = intensity / minValue;
}`;class TriangleLayerContours extends Layer{getShaders(){return{vs:triangleVs,fs:heatmapPresentationFS,modules:[project32]}}initializeState({device:s}){this.setState({model:this._getModel(s)})}_getModel(s){const{vertexCount:f,data:_,weightsTexture:S,maxTexture:T,colorTexture:F}=this.props;return new Model(s,{...this.getShaders(),id:this.props.id,bindings:{weightsTexture:S,maxTexture:T,colorTexture:F},attributes:_.attributes,bufferLayout:[{name:"positions",format:"float32x3"},{name:"texCoords",format:"float32x2"}],topology:"triangle-fan-webgl",vertexCount:f})}draw({uniforms:s}){const{model:f}=this.state,{intensity:_,threshold:S,aggregationMode:T,colorDomain:F,contourOpacity:M}=this.props;f.setUniforms({...s,intensity:_,threshold:S,aggregationMode:T,colorDomain:F,contourOpacity:M}),f.draw(this.context.renderPass)}}Bt(TriangleLayerContours,"layerName","TriangleLayerContours");const defaultColorRange=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]];function colorRangeToFlatArray(d,s=!1,f=Float32Array){let _;if(Number.isFinite(d[0]))_=new f(d);else{_=new f(d.length*4);let S=0;for(let T=0;T<d.length;T++){const F=d[T];_[S++]=F[0],_[S++]=F[1],_[S++]=F[2],_[S++]=Number.isFinite(F[3])?F[3]:255}}if(s)for(let S=0;S<_.length;S++)_[S]/=255;return _}function filterProps(d,s){const f={};for(const _ in d)s.includes(_)||(f[_]=d[_]);return f}class AggregationLayer extends CompositeLayer{initializeAggregationLayer(s){super.initializeState(this.context),this.setState({ignoreProps:filterProps(this.constructor._propTypes,s.data.props),dimensions:s})}updateState(s){super.updateState(s);const{changeFlags:f}=s;if(f.extensionsChanged){const _=this.getShaders({});_&&_.defines&&(_.defines.NON_INSTANCED_MODEL=1),this.updateShaders(_)}this._updateAttributes()}updateAttributes(s){this.setState({changedAttributes:s})}getAttributes(){return this.getAttributeManager().getAttributes()}getModuleSettings(){const{viewport:s,mousePosition:f,device:_}=this.context;return Object.assign(Object.create(this.props),{viewport:s,mousePosition:f,picking:{isActive:0},devicePixelRatio:_.canvasContext.cssToDeviceRatio()})}updateShaders(s){}isAggregationDirty(s,f={}){const{props:_,oldProps:S,changeFlags:T}=s,{compareAll:F=!1,dimension:M}=f,{ignoreProps:P}=this.state,{props:H,accessors:J=[]}=M,{updateTriggersChanged:K}=T;if(T.dataChanged)return!0;if(K){if(K.all)return!0;for(const oe of J)if(K[oe])return!0}if(F)return T.extensionsChanged?!0:compareProps({oldProps:S,newProps:_,ignoreProps:P,propTypes:this.constructor._propTypes});for(const oe of H)if(_[oe]!==S[oe])return!0;return!1}isAttributeChanged(s){const{changedAttributes:f}=this.state;return s?f&&f[s]!==void 0:!isObjectEmpty(f)}_getAttributeManager(){return new AttributeManager(this.context.device,{id:this.props.id,stats:this.context.stats})}}AggregationLayer.layerName="AggregationLayer";function isObjectEmpty(d){let s=!0;for(const f in d){s=!1;break}return s}function getBounds$1(d){const s=d.map(M=>M[0]),f=d.map(M=>M[1]),_=Math.min.apply(null,s),S=Math.max.apply(null,s),T=Math.min.apply(null,f),F=Math.max.apply(null,f);return[_,T,S,F]}function boundsContain(d,s){return s[0]>=d[0]&&s[2]<=d[2]&&s[1]>=d[1]&&s[3]<=d[3]}const scratchArray=new Float32Array(12);function packVertices(d,s=2){let f=0;for(const _ of d)for(let S=0;S<s;S++)scratchArray[f++]=_[S]||0;return scratchArray}function scaleToAspectRatio(d,s,f){const[_,S,T,F]=d,M=T-_,P=F-S;let H=M,J=P;M/P<s/f?H=s/f*P:J=f/s*M,H<s&&(H=s,J=f);const K=(T+_)/2,oe=(F+S)/2;return[K-H/2,oe-J/2,K+H/2,oe+J/2]}function getTextureCoordinates(d,s){const[f,_,S,T]=s;return[(d[0]-f)/(S-f),(d[1]-_)/(T-_)]}const vs$1=`#version 300 es
#define SHADER_NAME heatp-map-layer-vertex-shader
uniform sampler2D maxTexture;
uniform float intensity;
uniform vec2 colorDomain;
uniform float threshold;
uniform float aggregationMode;
in vec3 positions;
in vec2 texCoords;
out vec2 vTexCoords;
out float vIntensityMin;
out float vIntensityMax;
void main(void) {
gl_Position = project_position_to_clipspace(positions, vec3(0.0), vec3(0.0));
vTexCoords = texCoords;
vec4 maxTexture = texture(maxTexture, vec2(0.5));
float maxValue = aggregationMode < 0.5 ? maxTexture.r : maxTexture.g;
float minValue = maxValue * threshold;
if (colorDomain[1] > 0.) {
maxValue = colorDomain[1];
minValue = colorDomain[0];
}
vIntensityMax = intensity / maxValue;
vIntensityMin = intensity / minValue;
}
`,fs$1=`#version 300 es
#define SHADER_NAME triangle-layer-fragment-shader
precision highp float;
uniform float opacity;
uniform sampler2D weightsTexture;
uniform sampler2D colorTexture;
uniform float aggregationMode;
in vec2 vTexCoords;
in float vIntensityMin;
in float vIntensityMax;
out vec4 fragColor;
vec4 getLinearColor(float value) {
float factor = clamp(value * vIntensityMax, 0., 1.);
vec4 color = texture(colorTexture, vec2(factor, 0.5));
color.a *= min(value * vIntensityMin, 1.0);
return color;
}
void main(void) {
vec4 weights = texture(weightsTexture, vTexCoords);
float weight = weights.r;
if (aggregationMode > 0.5) {
weight /= max(1.0, weights.a);
}
if (weight <= 0.) {
discard;
}
vec4 linearColor = getLinearColor(weight);
linearColor.a *= opacity;
fragColor = linearColor;
}
`;class TriangleLayer extends Layer{getShaders(){return{vs:vs$1,fs:fs$1,modules:[project32]}}initializeState({device:s}){this.setState({model:this._getModel(s)})}_getModel(s){const{vertexCount:f,data:_,weightsTexture:S,maxTexture:T,colorTexture:F}=this.props;return new Model(s,{...this.getShaders(),id:this.props.id,bindings:{weightsTexture:S,maxTexture:T,colorTexture:F},attributes:_.attributes,bufferLayout:[{name:"positions",format:"float32x3"},{name:"texCoords",format:"float32x2"}],topology:"triangle-fan-webgl",vertexCount:f})}draw({uniforms:s}){const{model:f}=this.state,{intensity:_,threshold:S,aggregationMode:T,colorDomain:F}=this.props;f.setUniforms({...s,intensity:_,threshold:S,aggregationMode:T,colorDomain:F}),f.draw(this.context.renderPass)}}TriangleLayer.layerName="TriangleLayer";const weightsVs=`#version 300 es
in vec3 positions;
in vec3 positions64Low;
in float weights;
out vec4 weightsTexture;
uniform float radiusPixels;
uniform float textureWidth;
uniform vec4 commonBounds;
uniform float weightsScale;
void main()
{
weightsTexture = vec4(weights * weightsScale, 0., 0., 1.);
float radiusTexels = project_pixel_size(radiusPixels) * textureWidth / (commonBounds.z - commonBounds.x);
gl_PointSize = radiusTexels * 2.;
vec3 commonPosition = project_position(positions, positions64Low);
gl_Position.xy = (commonPosition.xy - commonBounds.xy) / (commonBounds.zw - commonBounds.xy) ;
gl_Position.xy = (gl_Position.xy * 2.) - (1.);
gl_Position.w = 1.0;
}
`,weightsFs=`#version 300 es
in vec4 weightsTexture;
out vec4 fragColor;
float gaussianKDE(float u){
return pow(2.71828, -u*u/0.05555)/(1.77245385*0.166666);
}
void main()
{
float dist = length(gl_PointCoord - vec2(0.5, 0.5));
if (dist > 0.5) {
discard;
}
fragColor = weightsTexture * gaussianKDE(2. * dist);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,maxVs=`#version 300 es
uniform sampler2D inTexture;
uniform float textureSize;
out vec4 outTexture;
void main()
{
int yIndex = gl_VertexID / int(textureSize);
int xIndex = gl_VertexID - (yIndex * int(textureSize));
vec2 uv = (0.5 + vec2(float(xIndex), float(yIndex))) / textureSize;
outTexture = texture(inTexture, uv);
gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
gl_PointSize = 1.0;
}
`,maxFs=`#version 300 es
in vec4 outTexture;
out vec4 fragColor;
void main() {
fragColor = outTexture;
fragColor.g = outTexture.r / max(1.0, outTexture.a);
}
`,RESOLUTION=2,TEXTURE_PROPS={format:"rgba8unorm",mipmaps:!1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},DEFAULT_COLOR_DOMAIN=[0,0],AGGREGATION_MODE={SUM:0,MEAN:1},defaultProps$3={getPosition:{type:"accessor",value:d=>d.position},getWeight:{type:"accessor",value:1},intensity:{type:"number",min:0,value:1},radiusPixels:{type:"number",min:1,max:100,value:50},colorRange:defaultColorRange,threshold:{type:"number",min:0,max:1,value:.05},colorDomain:{type:"array",value:null,optional:!0},aggregation:"SUM",weightsTextureSize:{type:"number",min:128,max:2048,value:2048},debounceTimeout:{type:"number",min:0,max:1e3,value:500}},FLOAT_TARGET_FEATURES=["float32-renderable-webgl","texture-blend-float-webgl"],DIMENSIONS={data:{props:["radiusPixels"]}};class HeatmapLayer extends AggregationLayer{initializeState(){super.initializeAggregationLayer(DIMENSIONS),this.setState({colorDomain:DEFAULT_COLOR_DOMAIN}),this._setupTextureParams(),this._setupAttributes(),this._setupResources()}shouldUpdateState({changeFlags:s}){return s.somethingChanged}updateState(s){super.updateState(s),this._updateHeatmapState(s)}_updateHeatmapState(s){const{props:f,oldProps:_}=s,S=this._getChangeFlags(s);(S.dataChanged||S.viewportChanged)&&(S.boundsChanged=this._updateBounds(S.dataChanged),this._updateTextureRenderingBounds()),S.dataChanged||S.boundsChanged?(clearTimeout(this.state.updateTimer),this.setState({isWeightMapDirty:!0})):S.viewportZoomChanged&&this._debouncedUpdateWeightmap(),f.colorRange!==_.colorRange&&this._updateColorTexture(s),this.state.isWeightMapDirty&&this._updateWeightmap(),this.setState({zoom:s.context.viewport.zoom})}renderLayers(){const{weightsTexture:s,triPositionBuffer:f,triTexCoordBuffer:_,maxWeightsTexture:S,colorTexture:T,colorDomain:F}=this.state,{updateTriggers:M,intensity:P,threshold:H,aggregation:J}=this.props,K=this.getSubLayerClass("triangle",TriangleLayer);return new K(this.getSubLayerProps({id:"triangle-layer",updateTriggers:M}),{coordinateSystem:COORDINATE_SYSTEM.DEFAULT,data:{attributes:{positions:f,texCoords:_}},vertexCount:4,maxTexture:S,colorTexture:T,aggregationMode:AGGREGATION_MODE[J]||0,weightsTexture:s,intensity:P,threshold:H,colorDomain:F})}finalizeState(s){super.finalizeState(s);const{weightsTransform:f,weightsTexture:_,maxWeightTransform:S,maxWeightsTexture:T,triPositionBuffer:F,triTexCoordBuffer:M,colorTexture:P,updateTimer:H}=this.state;f==null||f.destroy(),_==null||_.destroy(),S==null||S.destroy(),T==null||T.destroy(),F==null||F.destroy(),M==null||M.destroy(),P==null||P.destroy(),H&&clearTimeout(H)}_getAttributeManager(){return new AttributeManager(this.context.device,{id:this.props.id,stats:this.context.stats})}_getChangeFlags(s){const f={},{dimensions:_}=this.state;f.dataChanged=this.isAttributeChanged()&&"attribute changed"||this.isAggregationDirty(s,{compareAll:!0,dimension:_.data})&&"aggregation is dirty",f.viewportChanged=s.changeFlags.viewportChanged;const{zoom:S}=this.state;return(!s.context.viewport||s.context.viewport.zoom!==S)&&(f.viewportZoomChanged=!0),f}_createTextures(){const{textureSize:s,format:f}=this.state;this.setState({weightsTexture:this.context.device.createTexture({...TEXTURE_PROPS,width:s,height:s,format:f}),maxWeightsTexture:this.context.device.createTexture({...TEXTURE_PROPS,width:1,height:1,format:f})})}_setupAttributes(){this.getAttributeManager().add({positions:{size:3,type:"float64",accessor:"getPosition"},weights:{size:1,accessor:"getWeight"}}),this.setState({positionAttributeName:"positions"})}_setupTextureParams(){const{device:s}=this.context,{weightsTextureSize:f}=this.props,_=Math.min(f,s.limits.maxTextureDimension2D),S=FLOAT_TARGET_FEATURES.every(M=>s.features.has(M)),T=S?"rgba32float":"rgba8unorm",F=S?1:1/255;this.setState({textureSize:_,format:T,weightsScale:F}),S||defaultLogger.warn(`HeatmapLayer: ${this.id} rendering to float texture not supported, falling back to low precision format`)()}_createWeightsTransform(s){let{weightsTransform:f}=this.state;const{weightsTexture:_}=this.state,S=this.getAttributeManager();f==null||f.destroy(),f=new TextureTransform(this.context.device,{id:`${this.id}-weights-transform`,bufferLayout:S.getBufferLayouts(),vertexCount:1,targetTexture:_,parameters:{depthWriteEnabled:!1,blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"},topology:"point-list",...s}),this.setState({weightsTransform:f})}_setupResources(){this._createTextures();const{device:s}=this.context,{textureSize:f,weightsTexture:_,maxWeightsTexture:S}=this.state,T=this.getShaders({vs:weightsVs,fs:weightsFs});this._createWeightsTransform(T);const F=this.getShaders({vs:maxVs,fs:maxFs}),M=new TextureTransform(s,{id:`${this.id}-max-weights-transform`,bindings:{inTexture:_},uniforms:{textureSize:f},targetTexture:S,...F,vertexCount:f*f,topology:"point-list",parameters:{depthWriteEnabled:!1,blendColorOperation:"max",blendAlphaOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}});this.setState({weightsTexture:_,maxWeightsTexture:S,maxWeightTransform:M,zoom:null,triPositionBuffer:s.createBuffer({byteLength:48}),triTexCoordBuffer:s.createBuffer({byteLength:48})})}updateShaders(s){this._createWeightsTransform({vs:weightsVs,fs:weightsFs,...s})}_updateMaxWeightValue(){const{maxWeightTransform:s}=this.state;s.run({parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]})}_updateBounds(s=!1){const{viewport:f}=this.context,_=[f.unproject([0,0]),f.unproject([f.width,0]),f.unproject([f.width,f.height]),f.unproject([0,f.height])].map(M=>M.map(Math.fround)),S=getBounds$1(_),T={visibleWorldBounds:S,viewportCorners:_};let F=!1;if(s||!this.state.worldBounds||!boundsContain(this.state.worldBounds,S)){const M=this._worldToCommonBounds(S),P=this._commonToWorldBounds(M);this.props.coordinateSystem===COORDINATE_SYSTEM.LNGLAT&&(P[1]=Math.max(P[1],-85.051129),P[3]=Math.min(P[3],85.051129),P[0]=Math.max(P[0],-360),P[2]=Math.min(P[2],360));const H=this._worldToCommonBounds(P);T.worldBounds=P,T.normalizedCommonBounds=H,F=!0}return this.setState(T),F}_updateTextureRenderingBounds(){const{triPositionBuffer:s,triTexCoordBuffer:f,normalizedCommonBounds:_,viewportCorners:S}=this.state,{viewport:T}=this.context;s.write(packVertices(S,3));const F=S.map(M=>getTextureCoordinates(T.projectPosition(M),_));f.write(packVertices(F,2))}_updateColorTexture(s){const{colorRange:f}=s.props;let{colorTexture:_}=this.state;const S=colorRangeToFlatArray(f,!1,Uint8Array);_&&(_==null?void 0:_.width)===f.length?_.setSubImageData({data:S}):(_==null||_.destroy(),_=this.context.device.createTexture({...TEXTURE_PROPS,data:S,width:f.length,height:1})),this.setState({colorTexture:_})}_updateWeightmap(){const{radiusPixels:s,colorDomain:f,aggregation:_}=this.props,{worldBounds:S,textureSize:T,weightsScale:F}=this.state,M=this.state.weightsTransform;this.state.isWeightMapDirty=!1;const P=this._worldToCommonBounds(S,{useLayerCoordinateSystem:!0});if(f&&_==="SUM"){const{viewport:se}=this.context,ae=se.distanceScales.metersPerUnit[2]*(P[2]-P[0])/T;this.state.colorDomain=f.map(ge=>ge*ae*F)}else this.state.colorDomain=f||DEFAULT_COLOR_DOMAIN;const J=this.getAttributeManager().getAttributes(),K=this.getModuleSettings(),oe={radiusPixels:s,commonBounds:P,textureWidth:T,weightsScale:F};this._setModelAttributes(M.model,J),M.model.setVertexCount(this.getNumInstances()),M.model.setUniforms(oe),M.model.updateModuleSettings(K),M.run({parameters:{viewport:[0,0,T,T]},clearColor:[0,0,0,0]}),this._updateMaxWeightValue()}_debouncedUpdateWeightmap(s=!1){let{updateTimer:f}=this.state;const{debounceTimeout:_}=this.props;s?(f=null,this._updateBounds(!0),this._updateTextureRenderingBounds(),this.setState({isWeightMapDirty:!0})):(this.setState({isWeightMapDirty:!1}),clearTimeout(f),f=setTimeout(this._debouncedUpdateWeightmap.bind(this,!0),_)),this.setState({updateTimer:f})}_worldToCommonBounds(s,f={}){const{useLayerCoordinateSystem:_=!1}=f,[S,T,F,M]=s,{viewport:P}=this.context,{textureSize:H}=this.state,{coordinateSystem:J}=this.props,K=_&&(J===COORDINATE_SYSTEM.LNGLAT_OFFSETS||J===COORDINATE_SYSTEM.METER_OFFSETS),oe=K?P.projectPosition(this.props.coordinateOrigin):[0,0],se=H*RESOLUTION/P.scale;let ae,ge;return _&&!K?(ae=this.projectPosition([S,T,0]),ge=this.projectPosition([F,M,0])):(ae=P.projectPosition([S,T,0]),ge=P.projectPosition([F,M,0])),scaleToAspectRatio([ae[0]-oe[0],ae[1]-oe[1],ge[0]-oe[0],ge[1]-oe[1]],se,se)}_commonToWorldBounds(s){const[f,_,S,T]=s,{viewport:F}=this.context,M=F.unprojectPosition([f,_]),P=F.unprojectPosition([S,T]);return M.slice(0,2).concat(P.slice(0,2))}}HeatmapLayer.layerName="HeatmapLayer";HeatmapLayer.defaultProps=defaultProps$3;class SpatialLayer extends CompositeLayer{constructor(s){super(s)}initializeState(s){super.initializeState(s)}renderLayers(){return[new ScatterplotLayer(this.getSubLayerProps({...this.props,data:this.props.data,id:"spatial.scatterplot"})),...this.props.contourLayers.filter(s=>s).map(s=>{const f=this.getSubLayerProps(s);return new HeatmapLayer({...f,_subLayerProps:{triangle:{type:TriangleLayerContours},"triangle-layer":{contourOpacity:f.contourOpacity}}})})]}}Bt(SpatialLayer,"layerName","SpatialLayer"),Bt(SpatialLayer,"defaultProps",ScatterplotLayer.defaultProps);class ScatterSquareExtension extends LayerExtension{static get componentName(){return"ScatterSquareExtension"}getShaders(){return{inject:{"vs:#decl":"out float _lineWidthPixels;","vs:#main-end":`
                //---- ScatterSquareExtension
                // _outerRadiusPixels = outerRadiusPixels; // we might want this as an 'out', not used for now
                outerRadiusPixels = 0.; // forces all fragments to be 'inCircle'
                _lineWidthPixels = lineWidthPixels;
                ////
                
                `,"fs:#decl":`uniform float opacity;
                in float _lineWidthPixels;
                uniform float lineWidthScale;
                `,"fs:#main-end":`
                //---- ScatterSquareExtension
                // a bit wasteful to keep the original shader for circle rendering above
                // we should arrange layers/extensions differently, but YOLO
                // (actually, this is really dodgy & it's embarassing not rendering quads correctly)
                if (stroked > 0.5) {
                    vec2 uv = abs(unitPosition);
                    float isLine = step(innerUnitRadius, max(uv.x, uv.y));
                    if (_lineWidthPixels <= 0.01) isLine = 0.;
                    fragColor = mix(vFillColor, vLineColor, isLine);
                }
                // make sure picking still works
                DECKGL_FILTER_COLOR(fragColor, geometry);
                //---- end ScatterSquareExtension
                `}}}}class ScatterDensityExension extends LayerExtension{static get componentName(){return"ScatterDensityExension"}getShaders(){return{inject:{"fs:#decl":"uniform float opacity;","fs:#main-end":`
                //---- ScatterDensityExension
                const float e = 2.718281828459045;
                float d = length(unitPosition);
                // kernalSigma relates to dst in px in muspan, but denom uniform should be pre-computed
                // kernel = np.exp(-( dst**2 / ( 2.0 * kernelSigma**2 ) ) )
                // denom = 2*c^2 where c is the standard deviation / kernelSigma
                // for muspan default kernelRadius=150, kernelSigma=50 => c = 1/3
                // 2*(1/3)**2 => 0.222...
                float _a = exp(-(d*d)/(0.222222222));
                // should have an instance attribute for weight
                fragColor.a = _a * opacity;
                //---- end ScatterDensityExension
                ////
                
                `}}}}function useHighlightedIndex(){const d=useChart(),[s,f]=reactExports.useState(-1);return reactExports.useEffect(()=>{console.log("useHighlightedIndex effect"),d.onDataHighlighted=({indexes:_})=>{f(_[0])}},[d]),s}function rgb(d,s,f,_=255){return[d,s,f,_]}Array.from({length:200},(d,s)=>{const f=s%20<=1?255:0;return rgb(f,f,f,f)});const viridis=[rgb(0,47,97),rgb(0,95,133),rgb(0,139,152),rgb(0,181,153),rgb(24,220,130),rgb(151,245,84),rgb(255,255,0)];function useColorRange(d,s){const f=useDataStore(),_=reactExports.useMemo(()=>f.getColumnColors(d.name,{asArray:!0,useValue:!0}),[f,d]),S=reactExports.useMemo(()=>!d||!d.values?-1:Array.isArray(s)?s.length>1?-1:d.values.indexOf(s[0]):d.values.indexOf(s),[d,s]);return reactExports.useMemo(()=>{if(S===-1)return viridis;const F=_[S];return console.log("color",F,s),new Array(viridis.length).fill(F)},[S,_,s])}function useContour(d){const{id:s,parameter:f,category:_,fill:S,bandwidth:T,intensity:F,opacity:M}=d,[P,H]=useParamColumns(),{column:J}=useNamedColumn(f),K=useCategoryFilterIndices(J,_),oe=useColorRange(J,_),{zoom:se}=useViewerStore(ge=>ge.viewState)??{zoom:0},[ae]=o$1(se,500);return reactExports.useMemo(()=>{if(!_)return;const ge=30*T*2**ae;return{id:s,data:K,opacity:S?F:0,contourOpacity:M,getPosition:(he,{target:Be})=>(Be[0]=P.data[he],Be[1]=H.data[he],Be[2]=0,Be),colorRange:oe,radiusPixels:ge,debounce:1e3,weightsTextureSize:512,pickable:!1}},[s,K,_,F,P,H,oe,ae,T,S,M])}function useLegacyDualContour(){const d=useConfig(),s={parameter:d.contourParameter,fill:d.contour_fill,bandwidth:d.contour_bandwidth,intensity:d.contour_intensity,opacity:d.contour_opacity},f=useContour({...s,id:"contour1",category:d.category1}),_=useContour({...s,id:"contour2",category:d.category2});return reactExports.useMemo(()=>[f,_],[f,_])}function useRegionScale(){const d=useMetadata(),s=useChart(),f=s.dataStore.regions.scale,_=s.dataStore.regions.scale_unit;if(!d)return 1;const{Pixels:S}=d;return S.PhysicalSizeXUnit!==_&&console.warn(`physical size unit mismatch ${S.PhysicalSizeXUnit} !== ${_}`),S.PhysicalSizeX/f}function useZoomOnFilter(d){const s=useConfig(),f=useFilteredIndices(),[_,S]=useParamColumns(),[T,F]=useChartSize(),[M,P]=reactExports.useState(null);return reactExports.useEffect(()=>{if(!s.zoom_on_filter)return;if(f.length===0){P(null);return}let H=Number.POSITIVE_INFINITY,J=Number.NEGATIVE_INFINITY,K=Number.POSITIVE_INFINITY,oe=Number.NEGATIVE_INFINITY;for(let At=0;At<f.length;At++){const Ct=f[At];try{const Rt=_.data[Ct],It=S.data[Ct];if(!Number.isFinite(Rt)||!Number.isFinite(It)){console.warn("undefined data in scatterplot");continue}Rt<H&&(H=Rt),Rt>J&&(J=Rt),It<K&&(K=It),It>oe&&(oe=It)}catch(Rt){console.error("error calculating bounding box",Rt);return}}[H,K]=d.transformAsPoint([H,K,0]),[J,oe]=d.transformAsPoint([J,oe,0]);const se=(H+J)/2,ae=(K+oe)/2,{min:ge,log2:he}=Math,Be=5,pe=J-H,be=oe-K,Re=he(T/pe),Fe=he(F/be),ve=ge(Be,ge(Re,Fe)-.05);P({target:[se,ae,0],zoom:ve,maxZoom:Be,transitionDuration:400,transitionEasing:At=>-(Math.cos(Math.PI*At)-1)/2})},[f,_,S,F,T,s.zoom_on_filter,d.transformAsPoint]),M}function useScatterplotLayer(d){const s=useChartID(),f=useChart(),_=f.colorBy,S=useConfig(),{opacity:T,radius:F,course_radius:M}=S,P=F*M,H=useFilteredIndices(),[J,K,oe]=useParamColumns(),se=reactExports.useRef(null),ae=useHighlightedIndex(),ge=reactExports.useCallback(wt=>wt===ae?.2*P/Re:0,[P,ae]),he=useLegacyDualContour(),Be=reactExports.useMemo(()=>{if(S.tooltip)return f.dataStore.columnIndex[S.tooltip.column]},[S.tooltip,S.tooltip.column,f.dataStore.columnIndex]),pe=reactExports.useCallback(wt=>Be.getValue(H[wt]),[Be,H]),be=reactExports.useCallback(({object:wt})=>{if(!S.tooltip.show)return;const Ft=se.current;return Ft&&Ft.index!==-1&&`${S.tooltip.column}: ${pe(Ft.index)}`},[se,pe,S.tooltip.show]),Re=useRegionScale(),Fe=useZoomOnFilter(d),{point_shape:Me}=S,ve=reactExports.useMemo(()=>Me==="circle"?[]:Me==="gaussian"?[new ScatterDensityExension]:[new ScatterSquareExtension],[Me]),[At,Ct]=reactExports.useState(!1),Rt=reactExports.useMemo(()=>(Ct(!1),new SpatialLayer({id:`scatter_${getVivId(`${s}detail-react`)}`,data:H,opacity:T,radiusScale:P,getFillColor:_??[255,255,255],getRadius:1/Re,getPosition:(wt,{target:Ft})=>(Ft[0]=J.data[wt],Ft[1]=K.data[wt],Ft[2]=0,Ft),modelMatrix:d,updateTriggers:{getFillColor:_,getLineWidth:ge},pickable:!0,onHover:wt=>{se.current=wt},stroked:H.length<1e3,getLineWidth:ge,getLineColor:[255,255,255],onClick:({index:wt})=>{f.dataStore.dataHighlighted([H[wt]],f)},transitions:{},contourLayers:he,extensions:ve})),[s,H,T,P,_,J,K,Re,d,ve,f,ge,he]),It=reactExports.useCallback(wt=>{if(!At||!Rt.internalState)throw new Error("scatterplotLayer not ready");Array.isArray(wt)&&(wt={clientX:wt[0],clientY:wt[1]});const Ft=f.contentDiv.getBoundingClientRect(),jt=wt.clientX-Ft.left,ta=wt.clientY-Ft.top,Qn=Rt.unproject([jt,ta]),ca=d.invert(),Jn=ca.transform(Qn);return ca.invert(),Jn},[Rt,d,At,f.contentDiv.getBoundingClientRect]),xt=reactExports.useCallback(()=>Ct(!0),[]);return reactExports.useMemo(()=>({scatterplotLayer:Rt,getTooltip:be,modelMatrix:d,viewState:Fe,currentLayerHasRendered:At,onAfterRender:xt,unproject:It}),[Rt,be,d,Fe,At,xt,It])}function useConfig(){const{config:d}=useChart();return d}function useChartSize(){const s=useChart().contentDiv,[f,_]=reactExports.useState([s.clientWidth,s.clientHeight]);return reactExports.useLayoutEffect(()=>{const S=()=>{_([s.clientWidth,s.clientHeight])},T=new ResizeObserver(S);return T.observe(s),()=>T.unobserve(s)},[s]),f}function useChartID(){const d=useChart();return d.config.id||(console.assert(d.config.id,"chart.config.id should not be undefined"),action(()=>{d.config.id=getRandomString()})()),d.config.id}function useParamColumns(){const d=useChart(),{columnIndex:s}=d.dataStore;return reactExports.useMemo(()=>d.config.param?typeof d.config.param=="string"?[s[d.config.param]]:d.config.param.map(S=>s[S]):[],[d.config.param,s])}function useNamedColumn(d){const s=useChart(),{columnIndex:f}=s.dataStore,[_,S]=reactExports.useState(!1),T=f[d];return reactExports.useEffect(()=>{loadColumn(s.dataStore.name,d).then(()=>S(!0))},[d,s.dataStore]),{column:T,isLoaded:_}}function useParamColumnsExperimental(){const d=useChart(),{columnIndex:s}=d.dataStore,[f,_]=reactExports.useState([]);return reactExports.useEffect(()=>{const S=d.config.param;if(!S||S.length===0){_([]);return}const T=window.mdv.chartManager,F=d.dataStore.name;if(typeof d.config.param=="string"){const M=s[d.config.param];T.loadColumnSet([S],F,()=>{_([M])});return}T.loadColumnSet(S,F,()=>{_(S.map(M=>s[M]))})},[d.config.param,s,d.dataStore]),f}function useRegion(){const d=useConfig(),{regions:s}=useDataStore();return reactExports.useMemo(()=>{if(s)return s.all_regions[d.region]},[d.region,s])}function useFilteredIndices(){var T;const d=useConfig(),s=(T=d.background_filter)==null?void 0:T.column,f=useDataStore(),[_,S]=reactExports.useState(new Uint32Array);return reactExports.useState(new Uint32Array),reactExports.useEffect(()=>{var K;let F=!1;if(!s)return;const M=f.getFilteredIndices(),P=[d.background_filter,...d.category_filters.filter(oe=>oe.category!=="all")],H=P.map(oe=>oe.column),J=(K=window.mdv.chartManager)==null?void 0:K._getColumnsAsync(f.name,H);return Promise.all([M,J]).then(([oe])=>{var se;if(!F){if(s){const ae=P.map(({column:he})=>f.columnIndex[he]);if((se=d.background_filter)==null?void 0:se.category){const he=P.map(Be=>Array.isArray(Be.category)?Be.category.map(pe=>f.columnIndex[Be.column].values.indexOf(pe)):f.columnIndex[Be.column].values.indexOf(Be.category));try{const Be=oe.filter(pe=>P.every((be,Re)=>{const Fe=he[Re];return typeof Fe=="number"?Fe===ae[Re].data[pe]:Fe.some(Me=>ae[Re].data[pe]===Me)}));S(Be)}catch(Be){console.error("error filtering indices",Be);return}return}}S(oe)}}),()=>{F=!0}},[f._filteredIndicesPromise,s,d.background_filter,d.category_filters]),_}function useCategoryFilterIndices(d,s){const f=useFilteredIndices(),_=reactExports.useMemo(()=>!d||!d.values?-1:Array.isArray(s)?s.map(T=>d.values.indexOf(T)):d.values.indexOf(s),[d,s]);return reactExports.useMemo(()=>_===-1?[]:Array.isArray(_)?f.filter(T=>_.includes(d.data[T])):f.filter(T=>d.data[T]===_),[f,_,d])}function useImgUrl(){const d=useRegion(),s=useDataStore().regions.avivator;return reactExports.useMemo(()=>{var T;const _=d.viv_image;return(T=s.base_url)!=null&&T.startsWith("http")?new URL(_.url||_.file,s.base_url).href:_.url?_.url:getProjectURL(s.base_url)+_.file},[d,s])}function useDataSources(){var d;return(d=window.mdv.chartManager)==null?void 0:d.dataSources}function useDimensionFilter(d){const s=useDataStore(),_=d.values!==void 0||d.datatype==="unique"?"category_dimension":"range_dimension",S=reactExports.useMemo(()=>s.getDimension(_),[s,_]);return reactExports.useEffect(()=>()=>S.destroy(),[S.destroy]),S}function useRangeDimension2D(){const d=useDataStore(),s=useRegionScale(),f=reactExports.useMemo(()=>d.getDimension("range_dimension"),[d]);reactExports.useEffect(()=>()=>f.destroy(),[f.destroy]);const{param:_}=useConfig(),S=reactExports.useMemo(()=>[_[0],_[1]],[_]),T=reactExports.useCallback(M=>{const P=s===1?M:M.map(H=>H.map(J=>J*s));f.filter("filterPoly",S,P)},[f,S,s]),F=reactExports.useCallback(()=>f.removeFilter(),[f]);return{filterPoly:T,removeFilter:F,rangeDimension:f}}var PanToolOutlined={},_interopRequireDefault$a=interopRequireDefaultExports;Object.defineProperty(PanToolOutlined,"__esModule",{value:!0});var default_1$a=PanToolOutlined.default=void 0,_createSvgIcon$a=_interopRequireDefault$a(requireCreateSvgIcon()),_jsxRuntime$a=jsxRuntimeExports;default_1$a=PanToolOutlined.default=(0,_createSvgIcon$a.default)((0,_jsxRuntime$a.jsx)("path",{d:"M18 24h-6.55c-1.08 0-2.14-.45-2.89-1.23l-7.3-7.61 2.07-1.83c.62-.55 1.53-.66 2.26-.27L8 14.34V4.79c0-1.38 1.12-2.5 2.5-2.5.17 0 .34.02.51.05.09-1.3 1.17-2.33 2.49-2.33.86 0 1.61.43 2.06 1.09.29-.12.61-.18.94-.18 1.38 0 2.5 1.12 2.5 2.5v.28c.16-.03.33-.05.5-.05 1.38 0 2.5 1.12 2.5 2.5V20c0 2.21-1.79 4-4 4M4.14 15.28l5.86 6.1c.38.39.9.62 1.44.62H18c1.1 0 2-.9 2-2V6.15c0-.28-.22-.5-.5-.5s-.5.22-.5.5V12h-2V3.42c0-.28-.22-.5-.5-.5s-.5.22-.5.5V12h-2V2.51c0-.28-.22-.5-.5-.5s-.5.22-.5.5V12h-2V4.79c0-.28-.22-.5-.5-.5s-.5.23-.5.5v12.87l-5.35-2.83z"}),"PanToolOutlined");var PhotoSizeSelectSmallOutlined={},_interopRequireDefault$9=interopRequireDefaultExports;Object.defineProperty(PhotoSizeSelectSmallOutlined,"__esModule",{value:!0});var default_1$9=PhotoSizeSelectSmallOutlined.default=void 0,_createSvgIcon$9=_interopRequireDefault$9(requireCreateSvgIcon()),_jsxRuntime$9=jsxRuntimeExports;default_1$9=PhotoSizeSelectSmallOutlined.default=(0,_createSvgIcon$9.default)((0,_jsxRuntime$9.jsx)("path",{d:"M23 15h-2v2h2zm0-4h-2v2h2zm0 8h-2v2c1 0 2-1 2-2M15 3h-2v2h2zm8 4h-2v2h2zm-2-4v2h2c0-1-1-2-2-2M3 21h8v-6H1v4c0 1.1.9 2 2 2M3 7H1v2h2zm12 12h-2v2h2zm4-16h-2v2h2zm0 16h-2v2h2zM3 3C2 3 1 4 1 5h2zm0 8H1v2h2zm8-8H9v2h2zM7 3H5v2h2z"}),"PhotoSizeSelectSmallOutlined");var PolylineOutlined={},_interopRequireDefault$8=interopRequireDefaultExports;Object.defineProperty(PolylineOutlined,"__esModule",{value:!0});var default_1$8=PolylineOutlined.default=void 0,_createSvgIcon$8=_interopRequireDefault$8(requireCreateSvgIcon()),_jsxRuntime$8=jsxRuntimeExports;default_1$8=PolylineOutlined.default=(0,_createSvgIcon$8.default)((0,_jsxRuntime$8.jsx)("path",{d:"M15 16v1.26l-6-3v-3.17L11.7 8H16V2h-6v4.9L7.3 10H3v6h5l7 3.5V22h6v-6zM12 4h2v2h-2zM7 14H5v-2h2zm12 6h-2v-2h2z"}),"PolylineOutlined");var EditOutlined={},_interopRequireDefault$7=interopRequireDefaultExports;Object.defineProperty(EditOutlined,"__esModule",{value:!0});var default_1$7=EditOutlined.default=void 0,_createSvgIcon$7=_interopRequireDefault$7(requireCreateSvgIcon()),_jsxRuntime$7=jsxRuntimeExports;default_1$7=EditOutlined.default=(0,_createSvgIcon$7.default)((0,_jsxRuntime$7.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined");var ControlCameraOutlined={},_interopRequireDefault$6=interopRequireDefaultExports;Object.defineProperty(ControlCameraOutlined,"__esModule",{value:!0});var default_1$6=ControlCameraOutlined.default=void 0,_createSvgIcon$6=_interopRequireDefault$6(requireCreateSvgIcon()),_jsxRuntime$6=jsxRuntimeExports;default_1$6=ControlCameraOutlined.default=(0,_createSvgIcon$6.default)([(0,_jsxRuntime$6.jsx)("path",{d:"M5.54 8.46 2 12l3.54 3.54 1.76-1.77L5.54 12l1.76-1.77zm6.46 10-1.77-1.76-1.77 1.76L12 22l3.54-3.54-1.77-1.76zm6.46-10-1.76 1.77L18.46 12l-1.76 1.77 1.76 1.77L22 12zm-10-2.92 1.77 1.76L12 5.54l1.77 1.76 1.77-1.76L12 2z"},"0"),(0,_jsxRuntime$6.jsx)("circle",{cx:"12",cy:"12",r:"3"},"1")],"ControlCameraOutlined");function feature$i(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function point$a(d,s,f){if(f===void 0&&(f={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$b(d[0])||!isNumber$b(d[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:d};return feature$i(_,s,f)}function lineString$4(d,s,f){if(f===void 0&&(f={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");var _={type:"LineString",coordinates:d};return feature$i(_,s,f)}function featureCollection$5(d,s){s===void 0&&(s={});var f={type:"FeatureCollection"};return s.id&&(f.id=s.id),s.bbox&&(f.bbox=s.bbox),f.features=d,f}function isNumber$b(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function isObject$6(d){return!!d&&d.constructor===Object}function coordEach$6(d,s,f){if(d!==null)for(var _,S,T,F,M,P,H,J=0,K=0,oe,se=d.type,ae=se==="FeatureCollection",ge=se==="Feature",he=ae?d.features.length:1,Be=0;Be<he;Be++){H=ae?d.features[Be].geometry:ge?d.geometry:d,oe=H?H.type==="GeometryCollection":!1,M=oe?H.geometries.length:1;for(var pe=0;pe<M;pe++){var be=0,Re=0;if(F=oe?H.geometries[pe]:H,F!==null){P=F.coordinates;var Fe=F.type;switch(J=0,Fe){case null:break;case"Point":if(s(P,K,Be,be,Re)===!1)return!1;K++,be++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,Be,be,Re)===!1)return!1;K++,Fe==="MultiPoint"&&be++}Fe==="LineString"&&be++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,Be,be,Re)===!1)return!1;K++}Fe==="MultiLineString"&&be++,Fe==="Polygon"&&Re++}Fe==="Polygon"&&be++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(Re=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,Be,be,Re)===!1)return!1;K++}Re++}be++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach$6(F.geometries[_],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function bbox$1(d){var s=[1/0,1/0,-1/0,-1/0];return coordEach$6(d,function(f){s[0]>f[0]&&(s[0]=f[0]),s[1]>f[1]&&(s[1]=f[1]),s[2]<f[0]&&(s[2]=f[0]),s[3]<f[1]&&(s[3]=f[1])}),s}bbox$1.default=bbox$1;const es$1=Object.freeze(Object.defineProperty({__proto__:null,default:bbox$1},Symbol.toStringTag,{value:"Module"}));function feature$h(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function polygon$5(d,s,f){f===void 0&&(f={});for(var _=0,S=d;_<S.length;_++){var T=S[_];if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<T[T.length-1].length;F++)if(T[T.length-1][F]!==T[0][F])throw new Error("First and last Position are not equivalent.")}var M={type:"Polygon",coordinates:d};return feature$h(M,s,f)}function bboxPolygon(d,s){s===void 0&&(s={});var f=Number(d[0]),_=Number(d[1]),S=Number(d[2]),T=Number(d[3]);if(d.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var F=[f,_],M=[f,T],P=[S,T],H=[S,_];return polygon$5([[F,H,P,M,F]],s.properties,{bbox:d,id:s.id})}function feature$g(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function point$9(d,s,f){if(f===void 0&&(f={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$a(d[0])||!isNumber$a(d[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:d};return feature$g(_,s,f)}function isNumber$a(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function center(d,s){s===void 0&&(s={});var f=bbox$1(d),_=(f[0]+f[2])/2,S=(f[1]+f[3])/2;return point$9([_,S],s.properties,s)}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(s){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var f=Object(this),_=Math.max(Math.min(f.length,9007199254740991),0)||0,S=1 in arguments&&parseInt(Number(arguments[1]),10)||0;S=S<0?Math.max(_+S,0):Math.min(S,_);var T=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:_;for(T=T<0?Math.max(_+arguments[2],0):Math.min(T,_);S<T;)f[S]=s,++S;return f},writable:!0});Number.isFinite=Number.isFinite||function(d){return typeof d=="number"&&isFinite(d)};Number.isInteger=Number.isInteger||function(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(d){return d!==d};Math.trunc=Math.trunc||function(d){return d<0?Math.ceil(d):Math.floor(d)};var NumberUtil=function d(){};NumberUtil.prototype.interfaces_=function d(){return[]};NumberUtil.prototype.getClass=function d(){return NumberUtil};NumberUtil.prototype.equalsWithTolerance=function d(s,f,_){return Math.abs(s-f)<=_};var IllegalArgumentException=function(d){function s(f){d.call(this,f),this.name="IllegalArgumentException",this.message=f,this.stack=new d().stack}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s}(Error),Double=function d(){},staticAccessors$1={MAX_VALUE:{configurable:!0}};Double.isNaN=function d(s){return Number.isNaN(s)};Double.doubleToLongBits=function d(s){return s};Double.longBitsToDouble=function d(s){return s};Double.isInfinite=function d(s){return!Number.isFinite(s)};staticAccessors$1.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(Double,staticAccessors$1);var Comparable=function d(){},Clonable=function d(){},Comparator=function d(){};function Serializable(){}var Coordinate=function d(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=d.NULL_ORDINATE;else if(arguments.length===1){var s=arguments[0];this.x=s.x,this.y=s.y,this.z=s.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=d.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},staticAccessors={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Coordinate.prototype.setOrdinate=function d(s,f){switch(s){case Coordinate.X:this.x=f;break;case Coordinate.Y:this.y=f;break;case Coordinate.Z:this.z=f;break;default:throw new IllegalArgumentException("Invalid ordinate index: "+s)}};Coordinate.prototype.equals2D=function d(){if(arguments.length===1){var s=arguments[0];return!(this.x!==s.x||this.y!==s.y)}else if(arguments.length===2){var f=arguments[0],_=arguments[1];return!(!NumberUtil.equalsWithTolerance(this.x,f.x,_)||!NumberUtil.equalsWithTolerance(this.y,f.y,_))}};Coordinate.prototype.getOrdinate=function d(s){switch(s){case Coordinate.X:return this.x;case Coordinate.Y:return this.y;case Coordinate.Z:return this.z}throw new IllegalArgumentException("Invalid ordinate index: "+s)};Coordinate.prototype.equals3D=function d(s){return this.x===s.x&&this.y===s.y&&(this.z===s.z||Double.isNaN(this.z))&&Double.isNaN(s.z)};Coordinate.prototype.equals=function d(s){return s instanceof Coordinate?this.equals2D(s):!1};Coordinate.prototype.equalInZ=function d(s,f){return NumberUtil.equalsWithTolerance(this.z,s.z,f)};Coordinate.prototype.compareTo=function d(s){var f=s;return this.x<f.x?-1:this.x>f.x?1:this.y<f.y?-1:this.y>f.y?1:0};Coordinate.prototype.clone=function d(){};Coordinate.prototype.copy=function d(){return new Coordinate(this)};Coordinate.prototype.toString=function d(){return"("+this.x+", "+this.y+", "+this.z+")"};Coordinate.prototype.distance3D=function d(s){var f=this.x-s.x,_=this.y-s.y,S=this.z-s.z;return Math.sqrt(f*f+_*_+S*S)};Coordinate.prototype.distance=function d(s){var f=this.x-s.x,_=this.y-s.y;return Math.sqrt(f*f+_*_)};Coordinate.prototype.hashCode=function d(){var s=17;return s=37*s+Coordinate.hashCode(this.x),s=37*s+Coordinate.hashCode(this.y),s};Coordinate.prototype.setCoordinate=function d(s){this.x=s.x,this.y=s.y,this.z=s.z};Coordinate.prototype.interfaces_=function d(){return[Comparable,Clonable,Serializable]};Coordinate.prototype.getClass=function d(){return Coordinate};Coordinate.hashCode=function d(){if(arguments.length===1){var s=arguments[0],f=Double.doubleToLongBits(s);return Math.trunc((f^f)>>>32)}};staticAccessors.DimensionalComparator.get=function(){return DimensionalComparator};staticAccessors.serialVersionUID.get=function(){return 6683108902428367e3};staticAccessors.NULL_ORDINATE.get=function(){return Double.NaN};staticAccessors.X.get=function(){return 0};staticAccessors.Y.get=function(){return 1};staticAccessors.Z.get=function(){return 2};Object.defineProperties(Coordinate,staticAccessors);var DimensionalComparator=function d(s){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var f=arguments[0];if(f!==2&&f!==3)throw new IllegalArgumentException("only 2 or 3 dimensions may be specified");this._dimensionsToTest=f}}};DimensionalComparator.prototype.compare=function d(s,f){var _=s,S=f,T=DimensionalComparator.compare(_.x,S.x);if(T!==0)return T;var F=DimensionalComparator.compare(_.y,S.y);if(F!==0)return F;if(this._dimensionsToTest<=2)return 0;var M=DimensionalComparator.compare(_.z,S.z);return M};DimensionalComparator.prototype.interfaces_=function d(){return[Comparator]};DimensionalComparator.prototype.getClass=function d(){return DimensionalComparator};DimensionalComparator.compare=function d(s,f){return s<f?-1:s>f?1:Double.isNaN(s)?Double.isNaN(f)?0:-1:Double.isNaN(f)?1:0};var CoordinateSequenceFactory=function d(){};CoordinateSequenceFactory.prototype.create=function d(){};CoordinateSequenceFactory.prototype.interfaces_=function d(){return[]};CoordinateSequenceFactory.prototype.getClass=function d(){return CoordinateSequenceFactory};var Location=function d(){},staticAccessors$4={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Location.prototype.interfaces_=function d(){return[]};Location.prototype.getClass=function d(){return Location};Location.toLocationSymbol=function d(s){switch(s){case Location.EXTERIOR:return"e";case Location.BOUNDARY:return"b";case Location.INTERIOR:return"i";case Location.NONE:return"-"}throw new IllegalArgumentException("Unknown location value: "+s)};staticAccessors$4.INTERIOR.get=function(){return 0};staticAccessors$4.BOUNDARY.get=function(){return 1};staticAccessors$4.EXTERIOR.get=function(){return 2};staticAccessors$4.NONE.get=function(){return-1};Object.defineProperties(Location,staticAccessors$4);var hasInterface=function(d,s){return d.interfaces_&&d.interfaces_().indexOf(s)>-1},MathUtil=function d(){},staticAccessors$5={LOG_10:{configurable:!0}};MathUtil.prototype.interfaces_=function d(){return[]};MathUtil.prototype.getClass=function d(){return MathUtil};MathUtil.log10=function d(s){var f=Math.log(s);return Double.isInfinite(f)||Double.isNaN(f)?f:f/MathUtil.LOG_10};MathUtil.min=function d(s,f,_,S){var T=s;return f<T&&(T=f),_<T&&(T=_),S<T&&(T=S),T};MathUtil.clamp=function d(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],f=arguments[1],_=arguments[2];return s<f?f:s>_?_:s}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var S=arguments[0],T=arguments[1],F=arguments[2];return S<T?T:S>F?F:S}};MathUtil.wrap=function d(s,f){return s<0?f- -s%f:s%f};MathUtil.max=function d(){if(arguments.length===3){var s=arguments[0],f=arguments[1],_=arguments[2],S=s;return f>S&&(S=f),_>S&&(S=_),S}else if(arguments.length===4){var T=arguments[0],F=arguments[1],M=arguments[2],P=arguments[3],H=T;return F>H&&(H=F),M>H&&(H=M),P>H&&(H=P),H}};MathUtil.average=function d(s,f){return(s+f)/2};staticAccessors$5.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(MathUtil,staticAccessors$5);var StringBuffer=function d(s){this.str=s};StringBuffer.prototype.append=function d(s){this.str+=s};StringBuffer.prototype.setCharAt=function d(s,f){this.str=this.str.substr(0,s)+f+this.str.substr(s+1)};StringBuffer.prototype.toString=function d(s){return this.str};var Integer=function d(s){this.value=s};Integer.prototype.intValue=function d(){return this.value};Integer.prototype.compareTo=function d(s){return this.value<s?-1:this.value>s?1:0};Integer.isNaN=function d(s){return Number.isNaN(s)};var Character=function d(){};Character.isWhitespace=function d(s){return s<=32&&s>=0||s===127};Character.toUpperCase=function d(s){return s.toUpperCase()};var DD=function d(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var s=arguments[0];this.init(s)}else if(arguments[0]instanceof d){var f=arguments[0];this.init(f)}else if(typeof arguments[0]=="string"){var _=arguments[0];d.call(this,d.parse(_))}}else if(arguments.length===2){var S=arguments[0],T=arguments[1];this.init(S,T)}},staticAccessors$7={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};DD.prototype.le=function d(s){return(this._hi<s._hi||this._hi===s._hi)&&this._lo<=s._lo};DD.prototype.extractSignificantDigits=function d(s,f){var _=this.abs(),S=DD.magnitude(_._hi),T=DD.TEN.pow(S);_=_.divide(T),_.gt(DD.TEN)?(_=_.divide(DD.TEN),S+=1):_.lt(DD.ONE)&&(_=_.multiply(DD.TEN),S-=1);for(var F=S+1,M=new StringBuffer,P=DD.MAX_PRINT_DIGITS-1,H=0;H<=P;H++){s&&H===F&&M.append(".");var J=Math.trunc(_._hi);if(J<0)break;var K=!1,oe=0;J>9?(K=!0,oe="9"):oe="0"+J,M.append(oe),_=_.subtract(DD.valueOf(J)).multiply(DD.TEN),K&&_.selfAdd(DD.TEN);var se=!0,ae=DD.magnitude(_._hi);if(ae<0&&Math.abs(ae)>=P-H&&(se=!1),!se)break}return f[0]=S,M.toString()};DD.prototype.sqr=function d(){return this.multiply(this)};DD.prototype.doubleValue=function d(){return this._hi+this._lo};DD.prototype.subtract=function d(){if(arguments[0]instanceof DD){var s=arguments[0];return this.add(s.negate())}else if(typeof arguments[0]=="number"){var f=arguments[0];return this.add(-f)}};DD.prototype.equals=function d(){if(arguments.length===1){var s=arguments[0];return this._hi===s._hi&&this._lo===s._lo}};DD.prototype.isZero=function d(){return this._hi===0&&this._lo===0};DD.prototype.selfSubtract=function d(){if(arguments[0]instanceof DD){var s=arguments[0];return this.isNaN()?this:this.selfAdd(-s._hi,-s._lo)}else if(typeof arguments[0]=="number"){var f=arguments[0];return this.isNaN()?this:this.selfAdd(-f,0)}};DD.prototype.getSpecialNumberString=function d(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};DD.prototype.min=function d(s){return this.le(s)?this:s};DD.prototype.selfDivide=function d(){if(arguments.length===1){if(arguments[0]instanceof DD){var s=arguments[0];return this.selfDivide(s._hi,s._lo)}else if(typeof arguments[0]=="number"){var f=arguments[0];return this.selfDivide(f,0)}}else if(arguments.length===2){var _=arguments[0],S=arguments[1],T=null,F=null,M=null,P=null,H=null,J=null,K=null,oe=null;return H=this._hi/_,J=DD.SPLIT*H,T=J-H,oe=DD.SPLIT*_,T=J-T,F=H-T,M=oe-_,K=H*_,M=oe-M,P=_-M,oe=T*M-K+T*P+F*M+F*P,J=(this._hi-K-oe+this._lo-H*S)/_,oe=H+J,this._hi=oe,this._lo=H-oe+J,this}};DD.prototype.dump=function d(){return"DD<"+this._hi+", "+this._lo+">"};DD.prototype.divide=function d(){if(arguments[0]instanceof DD){var s=arguments[0],f=null,_=null,S=null,T=null,F=null,M=null,P=null,H=null;F=this._hi/s._hi,M=DD.SPLIT*F,f=M-F,H=DD.SPLIT*s._hi,f=M-f,_=F-f,S=H-s._hi,P=F*s._hi,S=H-S,T=s._hi-S,H=f*S-P+f*T+_*S+_*T,M=(this._hi-P-H+this._lo-F*s._lo)/s._hi,H=F+M;var J=H,K=F-H+M;return new DD(J,K)}else if(typeof arguments[0]=="number"){var oe=arguments[0];return Double.isNaN(oe)?DD.createNaN():DD.copy(this).selfDivide(oe,0)}};DD.prototype.ge=function d(s){return(this._hi>s._hi||this._hi===s._hi)&&this._lo>=s._lo};DD.prototype.pow=function d(s){if(s===0)return DD.valueOf(1);var f=new DD(this),_=DD.valueOf(1),S=Math.abs(s);if(S>1)for(;S>0;)S%2===1&&_.selfMultiply(f),S/=2,S>0&&(f=f.sqr());else _=f;return s<0?_.reciprocal():_};DD.prototype.ceil=function d(){if(this.isNaN())return DD.NaN;var s=Math.ceil(this._hi),f=0;return s===this._hi&&(f=Math.ceil(this._lo)),new DD(s,f)};DD.prototype.compareTo=function d(s){var f=s;return this._hi<f._hi?-1:this._hi>f._hi?1:this._lo<f._lo?-1:this._lo>f._lo?1:0};DD.prototype.rint=function d(){if(this.isNaN())return this;var s=this.add(.5);return s.floor()};DD.prototype.setValue=function d(){if(arguments[0]instanceof DD){var s=arguments[0];return this.init(s),this}else if(typeof arguments[0]=="number"){var f=arguments[0];return this.init(f),this}};DD.prototype.max=function d(s){return this.ge(s)?this:s};DD.prototype.sqrt=function d(){if(this.isZero())return DD.valueOf(0);if(this.isNegative())return DD.NaN;var s=1/Math.sqrt(this._hi),f=this._hi*s,_=DD.valueOf(f),S=this.subtract(_.sqr()),T=S._hi*(s*.5);return _.add(T)};DD.prototype.selfAdd=function d(){if(arguments.length===1){if(arguments[0]instanceof DD){var s=arguments[0];return this.selfAdd(s._hi,s._lo)}else if(typeof arguments[0]=="number"){var f=arguments[0],_=null,S=null,T=null,F=null,M=null,P=null;return T=this._hi+f,M=T-this._hi,F=T-M,F=f-M+(this._hi-F),P=F+this._lo,_=T+P,S=P+(T-_),this._hi=_+S,this._lo=S+(_-this._hi),this}}else if(arguments.length===2){var H=arguments[0],J=arguments[1],K=null,oe=null,se=null,ae=null,ge=null,he=null,Be=null,pe=null;ge=this._hi+H,se=this._lo+J,Be=ge-this._hi,pe=se-this._lo,he=ge-Be,ae=se-pe,he=H-Be+(this._hi-he),ae=J-pe+(this._lo-ae),Be=he+se,K=ge+Be,oe=Be+(ge-K),Be=ae+oe;var be=K+Be,Re=Be+(K-be);return this._hi=be,this._lo=Re,this}};DD.prototype.selfMultiply=function d(){if(arguments.length===1){if(arguments[0]instanceof DD){var s=arguments[0];return this.selfMultiply(s._hi,s._lo)}else if(typeof arguments[0]=="number"){var f=arguments[0];return this.selfMultiply(f,0)}}else if(arguments.length===2){var _=arguments[0],S=arguments[1],T=null,F=null,M=null,P=null,H=null,J=null;H=DD.SPLIT*this._hi,T=H-this._hi,J=DD.SPLIT*_,T=H-T,F=this._hi-T,M=J-_,H=this._hi*_,M=J-M,P=_-M,J=T*M-H+T*P+F*M+F*P+(this._hi*S+this._lo*_);var K=H+J;T=H-K;var oe=J+T;return this._hi=K,this._lo=oe,this}};DD.prototype.selfSqr=function d(){return this.selfMultiply(this)};DD.prototype.floor=function d(){if(this.isNaN())return DD.NaN;var s=Math.floor(this._hi),f=0;return s===this._hi&&(f=Math.floor(this._lo)),new DD(s,f)};DD.prototype.negate=function d(){return this.isNaN()?this:new DD(-this._hi,-this._lo)};DD.prototype.clone=function d(){};DD.prototype.multiply=function d(){if(arguments[0]instanceof DD){var s=arguments[0];return s.isNaN()?DD.createNaN():DD.copy(this).selfMultiply(s)}else if(typeof arguments[0]=="number"){var f=arguments[0];return Double.isNaN(f)?DD.createNaN():DD.copy(this).selfMultiply(f,0)}};DD.prototype.isNaN=function d(){return Double.isNaN(this._hi)};DD.prototype.intValue=function d(){return Math.trunc(this._hi)};DD.prototype.toString=function d(){var s=DD.magnitude(this._hi);return s>=-3&&s<=20?this.toStandardNotation():this.toSciNotation()};DD.prototype.toStandardNotation=function d(){var s=this.getSpecialNumberString();if(s!==null)return s;var f=new Array(1).fill(null),_=this.extractSignificantDigits(!0,f),S=f[0]+1,T=_;if(_.charAt(0)===".")T="0"+_;else if(S<0)T="0."+DD.stringOfChar("0",-S)+_;else if(_.indexOf(".")===-1){var F=S-_.length,M=DD.stringOfChar("0",F);T=_+M+".0"}return this.isNegative()?"-"+T:T};DD.prototype.reciprocal=function d(){var s=null,f=null,_=null,S=null,T=null,F=null,M=null,P=null;T=1/this._hi,F=DD.SPLIT*T,s=F-T,P=DD.SPLIT*this._hi,s=F-s,f=T-s,_=P-this._hi,M=T*this._hi,_=P-_,S=this._hi-_,P=s*_-M+s*S+f*_+f*S,F=(1-M-P-T*this._lo)/this._hi;var H=T+F,J=T-H+F;return new DD(H,J)};DD.prototype.toSciNotation=function d(){if(this.isZero())return DD.SCI_NOT_ZERO;var s=this.getSpecialNumberString();if(s!==null)return s;var f=new Array(1).fill(null),_=this.extractSignificantDigits(!1,f),S=DD.SCI_NOT_EXPONENT_CHAR+f[0];if(_.charAt(0)==="0")throw new Error("Found leading zero: "+_);var T="";_.length>1&&(T=_.substring(1));var F=_.charAt(0)+"."+T;return this.isNegative()?"-"+F+S:F+S};DD.prototype.abs=function d(){return this.isNaN()?DD.NaN:this.isNegative()?this.negate():new DD(this)};DD.prototype.isPositive=function d(){return(this._hi>0||this._hi===0)&&this._lo>0};DD.prototype.lt=function d(s){return(this._hi<s._hi||this._hi===s._hi)&&this._lo<s._lo};DD.prototype.add=function d(){if(arguments[0]instanceof DD){var s=arguments[0];return DD.copy(this).selfAdd(s)}else if(typeof arguments[0]=="number"){var f=arguments[0];return DD.copy(this).selfAdd(f)}};DD.prototype.init=function d(){if(arguments.length===1){if(typeof arguments[0]=="number"){var s=arguments[0];this._hi=s,this._lo=0}else if(arguments[0]instanceof DD){var f=arguments[0];this._hi=f._hi,this._lo=f._lo}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this._hi=_,this._lo=S}};DD.prototype.gt=function d(s){return(this._hi>s._hi||this._hi===s._hi)&&this._lo>s._lo};DD.prototype.isNegative=function d(){return(this._hi<0||this._hi===0)&&this._lo<0};DD.prototype.trunc=function d(){return this.isNaN()?DD.NaN:this.isPositive()?this.floor():this.ceil()};DD.prototype.signum=function d(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};DD.prototype.interfaces_=function d(){return[Serializable,Comparable,Clonable]};DD.prototype.getClass=function d(){return DD};DD.sqr=function d(s){return DD.valueOf(s).selfMultiply(s)};DD.valueOf=function d(){if(typeof arguments[0]=="string"){var s=arguments[0];return DD.parse(s)}else if(typeof arguments[0]=="number"){var f=arguments[0];return new DD(f)}};DD.sqrt=function d(s){return DD.valueOf(s).sqrt()};DD.parse=function d(s){for(var f=0,_=s.length;Character.isWhitespace(s.charAt(f));)f++;var S=!1;if(f<_){var T=s.charAt(f);(T==="-"||T==="+")&&(f++,T==="-"&&(S=!0))}for(var F=new DD,M=0,P=0,H=0;!(f>=_);){var J=s.charAt(f);if(f++,Character.isDigit(J)){var K=J-"0";F.selfMultiply(DD.TEN),F.selfAdd(K),M++;continue}if(J==="."){P=M;continue}if(J==="e"||J==="E"){var oe=s.substring(f);try{H=Integer.parseInt(oe)}catch(Be){throw Be instanceof Error?new Error("Invalid exponent "+oe+" in string "+s):Be}finally{}break}throw new Error("Unexpected character '"+J+"' at position "+f+" in string "+s)}var se=F,ae=M-P-H;if(ae===0)se=F;else if(ae>0){var ge=DD.TEN.pow(ae);se=F.divide(ge)}else if(ae<0){var he=DD.TEN.pow(-ae);se=F.multiply(he)}return S?se.negate():se};DD.createNaN=function d(){return new DD(Double.NaN,Double.NaN)};DD.copy=function d(s){return new DD(s)};DD.magnitude=function d(s){var f=Math.abs(s),_=Math.log(f)/Math.log(10),S=Math.trunc(Math.floor(_)),T=Math.pow(10,S);return T*10<=f&&(S+=1),S};DD.stringOfChar=function d(s,f){for(var _=new StringBuffer,S=0;S<f;S++)_.append(s);return _.toString()};staticAccessors$7.PI.get=function(){return new DD(3.141592653589793,12246467991473532e-32)};staticAccessors$7.TWO_PI.get=function(){return new DD(6.283185307179586,24492935982947064e-32)};staticAccessors$7.PI_2.get=function(){return new DD(1.5707963267948966,6123233995736766e-32)};staticAccessors$7.E.get=function(){return new DD(2.718281828459045,14456468917292502e-32)};staticAccessors$7.NaN.get=function(){return new DD(Double.NaN,Double.NaN)};staticAccessors$7.EPS.get=function(){return 123259516440783e-46};staticAccessors$7.SPLIT.get=function(){return 134217729};staticAccessors$7.MAX_PRINT_DIGITS.get=function(){return 32};staticAccessors$7.TEN.get=function(){return DD.valueOf(10)};staticAccessors$7.ONE.get=function(){return DD.valueOf(1)};staticAccessors$7.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};staticAccessors$7.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(DD,staticAccessors$7);var CGAlgorithmsDD=function d(){},staticAccessors$6={DP_SAFE_EPSILON:{configurable:!0}};CGAlgorithmsDD.prototype.interfaces_=function d(){return[]};CGAlgorithmsDD.prototype.getClass=function d(){return CGAlgorithmsDD};CGAlgorithmsDD.orientationIndex=function d(s,f,_){var S=CGAlgorithmsDD.orientationIndexFilter(s,f,_);if(S<=1)return S;var T=DD.valueOf(f.x).selfAdd(-s.x),F=DD.valueOf(f.y).selfAdd(-s.y),M=DD.valueOf(_.x).selfAdd(-f.x),P=DD.valueOf(_.y).selfAdd(-f.y);return T.selfMultiply(P).selfSubtract(F.selfMultiply(M)).signum()};CGAlgorithmsDD.signOfDet2x2=function d(s,f,_,S){var T=s.multiply(S).selfSubtract(f.multiply(_));return T.signum()};CGAlgorithmsDD.intersection=function d(s,f,_,S){var T=DD.valueOf(S.y).selfSubtract(_.y).selfMultiply(DD.valueOf(f.x).selfSubtract(s.x)),F=DD.valueOf(S.x).selfSubtract(_.x).selfMultiply(DD.valueOf(f.y).selfSubtract(s.y)),M=T.subtract(F),P=DD.valueOf(S.x).selfSubtract(_.x).selfMultiply(DD.valueOf(s.y).selfSubtract(_.y)),H=DD.valueOf(S.y).selfSubtract(_.y).selfMultiply(DD.valueOf(s.x).selfSubtract(_.x)),J=P.subtract(H),K=J.selfDivide(M).doubleValue(),oe=DD.valueOf(s.x).selfAdd(DD.valueOf(f.x).selfSubtract(s.x).selfMultiply(K)).doubleValue(),se=DD.valueOf(f.x).selfSubtract(s.x).selfMultiply(DD.valueOf(s.y).selfSubtract(_.y)),ae=DD.valueOf(f.y).selfSubtract(s.y).selfMultiply(DD.valueOf(s.x).selfSubtract(_.x)),ge=se.subtract(ae),he=ge.selfDivide(M).doubleValue(),Be=DD.valueOf(_.y).selfAdd(DD.valueOf(S.y).selfSubtract(_.y).selfMultiply(he)).doubleValue();return new Coordinate(oe,Be)};CGAlgorithmsDD.orientationIndexFilter=function d(s,f,_){var S=null,T=(s.x-_.x)*(f.y-_.y),F=(s.y-_.y)*(f.x-_.x),M=T-F;if(T>0){if(F<=0)return CGAlgorithmsDD.signum(M);S=T+F}else if(T<0){if(F>=0)return CGAlgorithmsDD.signum(M);S=-T-F}else return CGAlgorithmsDD.signum(M);var P=CGAlgorithmsDD.DP_SAFE_EPSILON*S;return M>=P||-M>=P?CGAlgorithmsDD.signum(M):2};CGAlgorithmsDD.signum=function d(s){return s>0?1:s<0?-1:0};staticAccessors$6.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(CGAlgorithmsDD,staticAccessors$6);var CoordinateSequence=function d(){},staticAccessors$8={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};staticAccessors$8.X.get=function(){return 0};staticAccessors$8.Y.get=function(){return 1};staticAccessors$8.Z.get=function(){return 2};staticAccessors$8.M.get=function(){return 3};CoordinateSequence.prototype.setOrdinate=function d(s,f,_){};CoordinateSequence.prototype.size=function d(){};CoordinateSequence.prototype.getOrdinate=function d(s,f){};CoordinateSequence.prototype.getCoordinate=function d(){};CoordinateSequence.prototype.getCoordinateCopy=function d(s){};CoordinateSequence.prototype.getDimension=function d(){};CoordinateSequence.prototype.getX=function d(s){};CoordinateSequence.prototype.clone=function d(){};CoordinateSequence.prototype.expandEnvelope=function d(s){};CoordinateSequence.prototype.copy=function d(){};CoordinateSequence.prototype.getY=function d(s){};CoordinateSequence.prototype.toCoordinateArray=function d(){};CoordinateSequence.prototype.interfaces_=function d(){return[Clonable]};CoordinateSequence.prototype.getClass=function d(){return CoordinateSequence};Object.defineProperties(CoordinateSequence,staticAccessors$8);var Exception=function d(){},NotRepresentableException=function(d){function s(){d.call(this,"Projective point not representable on the Cartesian plane.")}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(Exception),System=function d(){};System.arraycopy=function d(s,f,_,S,T){for(var F=0,M=f;M<f+T;M++)_[S+F]=s[M],F++};System.getProperty=function d(s){return{"line.separator":`
`}[s]};var HCoordinate=function d(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var s=arguments[0];this.x=s.x,this.y=s.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var f=arguments[0],_=arguments[1];this.x=f,this.y=_,this.w=1}else if(arguments[0]instanceof d&&arguments[1]instanceof d){var S=arguments[0],T=arguments[1];this.x=S.y*T.w-T.y*S.w,this.y=T.x*S.w-S.x*T.w,this.w=S.x*T.y-T.x*S.y}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Coordinate){var F=arguments[0],M=arguments[1];this.x=F.y-M.y,this.y=M.x-F.x,this.w=F.x*M.y-M.x*F.y}}else if(arguments.length===3){var P=arguments[0],H=arguments[1],J=arguments[2];this.x=P,this.y=H,this.w=J}else if(arguments.length===4){var K=arguments[0],oe=arguments[1],se=arguments[2],ae=arguments[3],ge=K.y-oe.y,he=oe.x-K.x,Be=K.x*oe.y-oe.x*K.y,pe=se.y-ae.y,be=ae.x-se.x,Re=se.x*ae.y-ae.x*se.y;this.x=he*Re-be*Be,this.y=pe*Be-ge*Re,this.w=ge*be-pe*he}};HCoordinate.prototype.getY=function d(){var s=this.y/this.w;if(Double.isNaN(s)||Double.isInfinite(s))throw new NotRepresentableException;return s};HCoordinate.prototype.getX=function d(){var s=this.x/this.w;if(Double.isNaN(s)||Double.isInfinite(s))throw new NotRepresentableException;return s};HCoordinate.prototype.getCoordinate=function d(){var s=new Coordinate;return s.x=this.getX(),s.y=this.getY(),s};HCoordinate.prototype.interfaces_=function d(){return[]};HCoordinate.prototype.getClass=function d(){return HCoordinate};HCoordinate.intersection=function d(s,f,_,S){var T=s.y-f.y,F=f.x-s.x,M=s.x*f.y-f.x*s.y,P=_.y-S.y,H=S.x-_.x,J=_.x*S.y-S.x*_.y,K=F*J-H*M,oe=P*M-T*J,se=T*H-P*F,ae=K/se,ge=oe/se;if(Double.isNaN(ae)||Double.isInfinite(ae)||Double.isNaN(ge)||Double.isInfinite(ge))throw new NotRepresentableException;return new Coordinate(ae,ge)};var Envelope=function d(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Coordinate){var s=arguments[0];this.init(s.x,s.x,s.y,s.y)}else if(arguments[0]instanceof d){var f=arguments[0];this.init(f)}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this.init(_.x,S.x,_.y,S.y)}else if(arguments.length===4){var T=arguments[0],F=arguments[1],M=arguments[2],P=arguments[3];this.init(T,F,M,P)}},staticAccessors$9={serialVersionUID:{configurable:!0}};Envelope.prototype.getArea=function d(){return this.getWidth()*this.getHeight()};Envelope.prototype.equals=function d(s){if(!(s instanceof Envelope))return!1;var f=s;return this.isNull()?f.isNull():this._maxx===f.getMaxX()&&this._maxy===f.getMaxY()&&this._minx===f.getMinX()&&this._miny===f.getMinY()};Envelope.prototype.intersection=function d(s){if(this.isNull()||s.isNull()||!this.intersects(s))return new Envelope;var f=this._minx>s._minx?this._minx:s._minx,_=this._miny>s._miny?this._miny:s._miny,S=this._maxx<s._maxx?this._maxx:s._maxx,T=this._maxy<s._maxy?this._maxy:s._maxy;return new Envelope(f,S,_,T)};Envelope.prototype.isNull=function d(){return this._maxx<this._minx};Envelope.prototype.getMaxX=function d(){return this._maxx};Envelope.prototype.covers=function d(){if(arguments.length===1){if(arguments[0]instanceof Coordinate){var s=arguments[0];return this.covers(s.x,s.y)}else if(arguments[0]instanceof Envelope){var f=arguments[0];return this.isNull()||f.isNull()?!1:f.getMinX()>=this._minx&&f.getMaxX()<=this._maxx&&f.getMinY()>=this._miny&&f.getMaxY()<=this._maxy}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];return this.isNull()?!1:_>=this._minx&&_<=this._maxx&&S>=this._miny&&S<=this._maxy}};Envelope.prototype.intersects=function d(){if(arguments.length===1){if(arguments[0]instanceof Envelope){var s=arguments[0];return this.isNull()||s.isNull()?!1:!(s._minx>this._maxx||s._maxx<this._minx||s._miny>this._maxy||s._maxy<this._miny)}else if(arguments[0]instanceof Coordinate){var f=arguments[0];return this.intersects(f.x,f.y)}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];return this.isNull()?!1:!(_>this._maxx||_<this._minx||S>this._maxy||S<this._miny)}};Envelope.prototype.getMinY=function d(){return this._miny};Envelope.prototype.getMinX=function d(){return this._minx};Envelope.prototype.expandToInclude=function d(){if(arguments.length===1){if(arguments[0]instanceof Coordinate){var s=arguments[0];this.expandToInclude(s.x,s.y)}else if(arguments[0]instanceof Envelope){var f=arguments[0];if(f.isNull())return null;this.isNull()?(this._minx=f.getMinX(),this._maxx=f.getMaxX(),this._miny=f.getMinY(),this._maxy=f.getMaxY()):(f._minx<this._minx&&(this._minx=f._minx),f._maxx>this._maxx&&(this._maxx=f._maxx),f._miny<this._miny&&(this._miny=f._miny),f._maxy>this._maxy&&(this._maxy=f._maxy))}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this.isNull()?(this._minx=_,this._maxx=_,this._miny=S,this._maxy=S):(_<this._minx&&(this._minx=_),_>this._maxx&&(this._maxx=_),S<this._miny&&(this._miny=S),S>this._maxy&&(this._maxy=S))}};Envelope.prototype.minExtent=function d(){if(this.isNull())return 0;var s=this.getWidth(),f=this.getHeight();return s<f?s:f};Envelope.prototype.getWidth=function d(){return this.isNull()?0:this._maxx-this._minx};Envelope.prototype.compareTo=function d(s){var f=s;return this.isNull()?f.isNull()?0:-1:f.isNull()?1:this._minx<f._minx?-1:this._minx>f._minx?1:this._miny<f._miny?-1:this._miny>f._miny?1:this._maxx<f._maxx?-1:this._maxx>f._maxx?1:this._maxy<f._maxy?-1:this._maxy>f._maxy?1:0};Envelope.prototype.translate=function d(s,f){if(this.isNull())return null;this.init(this.getMinX()+s,this.getMaxX()+s,this.getMinY()+f,this.getMaxY()+f)};Envelope.prototype.toString=function d(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};Envelope.prototype.setToNull=function d(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};Envelope.prototype.getHeight=function d(){return this.isNull()?0:this._maxy-this._miny};Envelope.prototype.maxExtent=function d(){if(this.isNull())return 0;var s=this.getWidth(),f=this.getHeight();return s>f?s:f};Envelope.prototype.expandBy=function d(){if(arguments.length===1){var s=arguments[0];this.expandBy(s,s)}else if(arguments.length===2){var f=arguments[0],_=arguments[1];if(this.isNull())return null;this._minx-=f,this._maxx+=f,this._miny-=_,this._maxy+=_,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};Envelope.prototype.contains=function d(){if(arguments.length===1){if(arguments[0]instanceof Envelope){var s=arguments[0];return this.covers(s)}else if(arguments[0]instanceof Coordinate){var f=arguments[0];return this.covers(f)}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];return this.covers(_,S)}};Envelope.prototype.centre=function d(){return this.isNull()?null:new Coordinate((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};Envelope.prototype.init=function d(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Coordinate){var s=arguments[0];this.init(s.x,s.x,s.y,s.y)}else if(arguments[0]instanceof Envelope){var f=arguments[0];this._minx=f._minx,this._maxx=f._maxx,this._miny=f._miny,this._maxy=f._maxy}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this.init(_.x,S.x,_.y,S.y)}else if(arguments.length===4){var T=arguments[0],F=arguments[1],M=arguments[2],P=arguments[3];T<F?(this._minx=T,this._maxx=F):(this._minx=F,this._maxx=T),M<P?(this._miny=M,this._maxy=P):(this._miny=P,this._maxy=M)}};Envelope.prototype.getMaxY=function d(){return this._maxy};Envelope.prototype.distance=function d(s){if(this.intersects(s))return 0;var f=0;this._maxx<s._minx?f=s._minx-this._maxx:this._minx>s._maxx&&(f=this._minx-s._maxx);var _=0;return this._maxy<s._miny?_=s._miny-this._maxy:this._miny>s._maxy&&(_=this._miny-s._maxy),f===0?_:_===0?f:Math.sqrt(f*f+_*_)};Envelope.prototype.hashCode=function d(){var s=17;return s=37*s+Coordinate.hashCode(this._minx),s=37*s+Coordinate.hashCode(this._maxx),s=37*s+Coordinate.hashCode(this._miny),s=37*s+Coordinate.hashCode(this._maxy),s};Envelope.prototype.interfaces_=function d(){return[Comparable,Serializable]};Envelope.prototype.getClass=function d(){return Envelope};Envelope.intersects=function d(){if(arguments.length===3){var s=arguments[0],f=arguments[1],_=arguments[2];return _.x>=(s.x<f.x?s.x:f.x)&&_.x<=(s.x>f.x?s.x:f.x)&&_.y>=(s.y<f.y?s.y:f.y)&&_.y<=(s.y>f.y?s.y:f.y)}else if(arguments.length===4){var S=arguments[0],T=arguments[1],F=arguments[2],M=arguments[3],P=Math.min(F.x,M.x),H=Math.max(F.x,M.x),J=Math.min(S.x,T.x),K=Math.max(S.x,T.x);return!(J>H||K<P||(P=Math.min(F.y,M.y),H=Math.max(F.y,M.y),J=Math.min(S.y,T.y),K=Math.max(S.y,T.y),J>H)||K<P)}};staticAccessors$9.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(Envelope,staticAccessors$9);var regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},WKTParser=function d(s){this.geometryFactory=s||new GeometryFactory};WKTParser.prototype.read=function d(s){var f,_,S;s=s.replace(/[\n\r]/g," ");var T=regExes.typeStr.exec(s);if(s.search("EMPTY")!==-1&&(T=regExes.emptyTypeStr.exec(s),T[2]=void 0),T&&(_=T[1].toLowerCase(),S=T[2],parse$1[_]&&(f=parse$1[_].apply(this,[S]))),f===void 0)throw new Error("Could not parse WKT "+s);return f};WKTParser.prototype.write=function d(s){return this.extractGeometry(s)};WKTParser.prototype.extractGeometry=function d(s){var f=s.getGeometryType().toLowerCase();if(!extract$1[f])return null;var _=f.toUpperCase(),S;return s.isEmpty()?S=_+" EMPTY":S=_+"("+extract$1[f].apply(this,[s])+")",S};var extract$1={coordinate:function d(s){return s.x+" "+s.y},point:function d(s){return extract$1.coordinate.call(this,s._coordinates._coordinates[0])},multipoint:function d(s){for(var f=this,_=[],S=0,T=s._geometries.length;S<T;++S)_.push("("+extract$1.point.apply(f,[s._geometries[S]])+")");return _.join(",")},linestring:function d(s){for(var f=this,_=[],S=0,T=s._points._coordinates.length;S<T;++S)_.push(extract$1.coordinate.apply(f,[s._points._coordinates[S]]));return _.join(",")},linearring:function d(s){for(var f=this,_=[],S=0,T=s._points._coordinates.length;S<T;++S)_.push(extract$1.coordinate.apply(f,[s._points._coordinates[S]]));return _.join(",")},multilinestring:function d(s){for(var f=this,_=[],S=0,T=s._geometries.length;S<T;++S)_.push("("+extract$1.linestring.apply(f,[s._geometries[S]])+")");return _.join(",")},polygon:function d(s){var f=this,_=[];_.push("("+extract$1.linestring.apply(this,[s._shell])+")");for(var S=0,T=s._holes.length;S<T;++S)_.push("("+extract$1.linestring.apply(f,[s._holes[S]])+")");return _.join(",")},multipolygon:function d(s){for(var f=this,_=[],S=0,T=s._geometries.length;S<T;++S)_.push("("+extract$1.polygon.apply(f,[s._geometries[S]])+")");return _.join(",")},geometrycollection:function d(s){for(var f=this,_=[],S=0,T=s._geometries.length;S<T;++S)_.push(f.extractGeometry(s._geometries[S]));return _.join(",")}},parse$1={point:function d(s){if(s===void 0)return this.geometryFactory.createPoint();var f=s.trim().split(regExes.spaces);return this.geometryFactory.createPoint(new Coordinate(Number.parseFloat(f[0]),Number.parseFloat(f[1])))},multipoint:function d(s){var f=this;if(s===void 0)return this.geometryFactory.createMultiPoint();for(var _,S=s.trim().split(","),T=[],F=0,M=S.length;F<M;++F)_=S[F].replace(regExes.trimParens,"$1"),T.push(parse$1.point.apply(f,[_]));return this.geometryFactory.createMultiPoint(T)},linestring:function d(s){if(s===void 0)return this.geometryFactory.createLineString();for(var f=s.trim().split(","),_=[],S,T=0,F=f.length;T<F;++T)S=f[T].trim().split(regExes.spaces),_.push(new Coordinate(Number.parseFloat(S[0]),Number.parseFloat(S[1])));return this.geometryFactory.createLineString(_)},linearring:function d(s){if(s===void 0)return this.geometryFactory.createLinearRing();for(var f=s.trim().split(","),_=[],S,T=0,F=f.length;T<F;++T)S=f[T].trim().split(regExes.spaces),_.push(new Coordinate(Number.parseFloat(S[0]),Number.parseFloat(S[1])));return this.geometryFactory.createLinearRing(_)},multilinestring:function d(s){var f=this;if(s===void 0)return this.geometryFactory.createMultiLineString();for(var _,S=s.trim().split(regExes.parenComma),T=[],F=0,M=S.length;F<M;++F)_=S[F].replace(regExes.trimParens,"$1"),T.push(parse$1.linestring.apply(f,[_]));return this.geometryFactory.createMultiLineString(T)},polygon:function d(s){var f=this;if(s===void 0)return this.geometryFactory.createPolygon();for(var _,S,T,F=s.trim().split(regExes.parenComma),M,P=[],H=0,J=F.length;H<J;++H)_=F[H].replace(regExes.trimParens,"$1"),S=parse$1.linestring.apply(f,[_]),T=f.geometryFactory.createLinearRing(S._points),H===0?M=T:P.push(T);return this.geometryFactory.createPolygon(M,P)},multipolygon:function d(s){var f=this;if(s===void 0)return this.geometryFactory.createMultiPolygon();for(var _,S=s.trim().split(regExes.doubleParenComma),T=[],F=0,M=S.length;F<M;++F)_=S[F].replace(regExes.trimParens,"$1"),T.push(parse$1.polygon.apply(f,[_]));return this.geometryFactory.createMultiPolygon(T)},geometrycollection:function d(s){var f=this;if(s===void 0)return this.geometryFactory.createGeometryCollection();s=s.replace(/,\s*([A-Za-z])/g,"|$1");for(var _=s.trim().split("|"),S=[],T=0,F=_.length;T<F;++T)S.push(f.read(_[T]));return this.geometryFactory.createGeometryCollection(S)}},WKTWriter=function d(s){this.parser=new WKTParser(s)};WKTWriter.prototype.write=function d(s){return this.parser.write(s)};WKTWriter.toLineString=function d(s,f){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+s.x+" "+s.y+", "+f.x+" "+f.y+" )"};var RuntimeException=function(d){function s(f){d.call(this,f),this.name="RuntimeException",this.message=f,this.stack=new d().stack}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s}(Error),AssertionFailedException=function(d){function s(){if(d.call(this),arguments.length===0)d.call(this);else if(arguments.length===1){var f=arguments[0];d.call(this,f)}}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(RuntimeException),Assert=function d(){};Assert.prototype.interfaces_=function d(){return[]};Assert.prototype.getClass=function d(){return Assert};Assert.shouldNeverReachHere=function d(){if(arguments.length===0)Assert.shouldNeverReachHere(null);else if(arguments.length===1){var s=arguments[0];throw new AssertionFailedException("Should never reach here"+(s!==null?": "+s:""))}};Assert.isTrue=function d(){var s,f;if(arguments.length===1)s=arguments[0],Assert.isTrue(s,null);else if(arguments.length===2&&(s=arguments[0],f=arguments[1],!s))throw f===null?new AssertionFailedException:new AssertionFailedException(f)};Assert.equals=function d(){var s,f,_;if(arguments.length===2)s=arguments[0],f=arguments[1],Assert.equals(s,f,null);else if(arguments.length===3&&(s=arguments[0],f=arguments[1],_=arguments[2],!f.equals(s)))throw new AssertionFailedException("Expected "+s+" but encountered "+f+(_!==null?": "+_:""))};var LineIntersector=function d(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Coordinate,this._intPt[1]=new Coordinate,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},staticAccessors$10={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};LineIntersector.prototype.getIndexAlongSegment=function d(s,f){return this.computeIntLineIndex(),this._intLineIndex[s][f]};LineIntersector.prototype.getTopologySummary=function d(){var s=new StringBuffer;return this.isEndPoint()&&s.append(" endpoint"),this._isProper&&s.append(" proper"),this.isCollinear()&&s.append(" collinear"),s.toString()};LineIntersector.prototype.computeIntersection=function d(s,f,_,S){this._inputLines[0][0]=s,this._inputLines[0][1]=f,this._inputLines[1][0]=_,this._inputLines[1][1]=S,this._result=this.computeIntersect(s,f,_,S)};LineIntersector.prototype.getIntersectionNum=function d(){return this._result};LineIntersector.prototype.computeIntLineIndex=function d(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var s=arguments[0],f=this.getEdgeDistance(s,0),_=this.getEdgeDistance(s,1);f>_?(this._intLineIndex[s][0]=0,this._intLineIndex[s][1]=1):(this._intLineIndex[s][0]=1,this._intLineIndex[s][1]=0)}};LineIntersector.prototype.isProper=function d(){return this.hasIntersection()&&this._isProper};LineIntersector.prototype.setPrecisionModel=function d(s){this._precisionModel=s};LineIntersector.prototype.isInteriorIntersection=function d(){var s=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var f=arguments[0],_=0;_<this._result;_++)if(!(s._intPt[_].equals2D(s._inputLines[f][0])||s._intPt[_].equals2D(s._inputLines[f][1])))return!0;return!1}};LineIntersector.prototype.getIntersection=function d(s){return this._intPt[s]};LineIntersector.prototype.isEndPoint=function d(){return this.hasIntersection()&&!this._isProper};LineIntersector.prototype.hasIntersection=function d(){return this._result!==LineIntersector.NO_INTERSECTION};LineIntersector.prototype.getEdgeDistance=function d(s,f){var _=LineIntersector.computeEdgeDistance(this._intPt[f],this._inputLines[s][0],this._inputLines[s][1]);return _};LineIntersector.prototype.isCollinear=function d(){return this._result===LineIntersector.COLLINEAR_INTERSECTION};LineIntersector.prototype.toString=function d(){return WKTWriter.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+WKTWriter.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};LineIntersector.prototype.getEndpoint=function d(s,f){return this._inputLines[s][f]};LineIntersector.prototype.isIntersection=function d(s){for(var f=this,_=0;_<this._result;_++)if(f._intPt[_].equals2D(s))return!0;return!1};LineIntersector.prototype.getIntersectionAlongSegment=function d(s,f){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[s][f]]};LineIntersector.prototype.interfaces_=function d(){return[]};LineIntersector.prototype.getClass=function d(){return LineIntersector};LineIntersector.computeEdgeDistance=function d(s,f,_){var S=Math.abs(_.x-f.x),T=Math.abs(_.y-f.y),F=-1;if(s.equals(f))F=0;else if(s.equals(_))S>T?F=S:F=T;else{var M=Math.abs(s.x-f.x),P=Math.abs(s.y-f.y);S>T?F=M:F=P,F===0&&!s.equals(f)&&(F=Math.max(M,P))}return Assert.isTrue(!(F===0&&!s.equals(f)),"Bad distance calculation"),F};LineIntersector.nonRobustComputeEdgeDistance=function d(s,f,_){var S=s.x-f.x,T=s.y-f.y,F=Math.sqrt(S*S+T*T);return Assert.isTrue(!(F===0&&!s.equals(f)),"Invalid distance calculation"),F};staticAccessors$10.DONT_INTERSECT.get=function(){return 0};staticAccessors$10.DO_INTERSECT.get=function(){return 1};staticAccessors$10.COLLINEAR.get=function(){return 2};staticAccessors$10.NO_INTERSECTION.get=function(){return 0};staticAccessors$10.POINT_INTERSECTION.get=function(){return 1};staticAccessors$10.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(LineIntersector,staticAccessors$10);var RobustLineIntersector=function(d){function s(){d.apply(this,arguments)}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.isInSegmentEnvelopes=function(_){var S=new Envelope(this._inputLines[0][0],this._inputLines[0][1]),T=new Envelope(this._inputLines[1][0],this._inputLines[1][1]);return S.contains(_)&&T.contains(_)},s.prototype.computeIntersection=function(){if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];if(this._isProper=!1,Envelope.intersects(S,T,_)&&CGAlgorithms.orientationIndex(S,T,_)===0&&CGAlgorithms.orientationIndex(T,S,_)===0)return this._isProper=!0,(_.equals(S)||_.equals(T))&&(this._isProper=!1),this._result=d.POINT_INTERSECTION,null;this._result=d.NO_INTERSECTION}else return d.prototype.computeIntersection.apply(this,arguments)},s.prototype.normalizeToMinimum=function(_,S,T,F,M){M.x=this.smallestInAbsValue(_.x,S.x,T.x,F.x),M.y=this.smallestInAbsValue(_.y,S.y,T.y,F.y),_.x-=M.x,_.y-=M.y,S.x-=M.x,S.y-=M.y,T.x-=M.x,T.y-=M.y,F.x-=M.x,F.y-=M.y},s.prototype.safeHCoordinateIntersection=function(_,S,T,F){var M=null;try{M=HCoordinate.intersection(_,S,T,F)}catch(P){if(P instanceof NotRepresentableException)M=s.nearestEndpoint(_,S,T,F);else throw P}finally{}return M},s.prototype.intersection=function(_,S,T,F){var M=this.intersectionWithNormalization(_,S,T,F);return this.isInSegmentEnvelopes(M)||(M=new Coordinate(s.nearestEndpoint(_,S,T,F))),this._precisionModel!==null&&this._precisionModel.makePrecise(M),M},s.prototype.smallestInAbsValue=function(_,S,T,F){var M=_,P=Math.abs(M);return Math.abs(S)<P&&(M=S,P=Math.abs(S)),Math.abs(T)<P&&(M=T,P=Math.abs(T)),Math.abs(F)<P&&(M=F),M},s.prototype.checkDD=function(_,S,T,F,M){var P=CGAlgorithmsDD.intersection(_,S,T,F),H=this.isInSegmentEnvelopes(P);System.out.println("DD in env = "+H+"  --------------------- "+P),M.distance(P)>1e-4&&System.out.println("Distance = "+M.distance(P))},s.prototype.intersectionWithNormalization=function(_,S,T,F){var M=new Coordinate(_),P=new Coordinate(S),H=new Coordinate(T),J=new Coordinate(F),K=new Coordinate;this.normalizeToEnvCentre(M,P,H,J,K);var oe=this.safeHCoordinateIntersection(M,P,H,J);return oe.x+=K.x,oe.y+=K.y,oe},s.prototype.computeCollinearIntersection=function(_,S,T,F){var M=Envelope.intersects(_,S,T),P=Envelope.intersects(_,S,F),H=Envelope.intersects(T,F,_),J=Envelope.intersects(T,F,S);return M&&P?(this._intPt[0]=T,this._intPt[1]=F,d.COLLINEAR_INTERSECTION):H&&J?(this._intPt[0]=_,this._intPt[1]=S,d.COLLINEAR_INTERSECTION):M&&H?(this._intPt[0]=T,this._intPt[1]=_,T.equals(_)&&!P&&!J?d.POINT_INTERSECTION:d.COLLINEAR_INTERSECTION):M&&J?(this._intPt[0]=T,this._intPt[1]=S,T.equals(S)&&!P&&!H?d.POINT_INTERSECTION:d.COLLINEAR_INTERSECTION):P&&H?(this._intPt[0]=F,this._intPt[1]=_,F.equals(_)&&!M&&!J?d.POINT_INTERSECTION:d.COLLINEAR_INTERSECTION):P&&J?(this._intPt[0]=F,this._intPt[1]=S,F.equals(S)&&!M&&!H?d.POINT_INTERSECTION:d.COLLINEAR_INTERSECTION):d.NO_INTERSECTION},s.prototype.normalizeToEnvCentre=function(_,S,T,F,M){var P=_.x<S.x?_.x:S.x,H=_.y<S.y?_.y:S.y,J=_.x>S.x?_.x:S.x,K=_.y>S.y?_.y:S.y,oe=T.x<F.x?T.x:F.x,se=T.y<F.y?T.y:F.y,ae=T.x>F.x?T.x:F.x,ge=T.y>F.y?T.y:F.y,he=P>oe?P:oe,Be=J<ae?J:ae,pe=H>se?H:se,be=K<ge?K:ge,Re=(he+Be)/2,Fe=(pe+be)/2;M.x=Re,M.y=Fe,_.x-=M.x,_.y-=M.y,S.x-=M.x,S.y-=M.y,T.x-=M.x,T.y-=M.y,F.x-=M.x,F.y-=M.y},s.prototype.computeIntersect=function(_,S,T,F){if(this._isProper=!1,!Envelope.intersects(_,S,T,F))return d.NO_INTERSECTION;var M=CGAlgorithms.orientationIndex(_,S,T),P=CGAlgorithms.orientationIndex(_,S,F);if(M>0&&P>0||M<0&&P<0)return d.NO_INTERSECTION;var H=CGAlgorithms.orientationIndex(T,F,_),J=CGAlgorithms.orientationIndex(T,F,S);if(H>0&&J>0||H<0&&J<0)return d.NO_INTERSECTION;var K=M===0&&P===0&&H===0&&J===0;return K?this.computeCollinearIntersection(_,S,T,F):(M===0||P===0||H===0||J===0?(this._isProper=!1,_.equals2D(T)||_.equals2D(F)?this._intPt[0]=_:S.equals2D(T)||S.equals2D(F)?this._intPt[0]=S:M===0?this._intPt[0]=new Coordinate(T):P===0?this._intPt[0]=new Coordinate(F):H===0?this._intPt[0]=new Coordinate(_):J===0&&(this._intPt[0]=new Coordinate(S))):(this._isProper=!0,this._intPt[0]=this.intersection(_,S,T,F)),d.POINT_INTERSECTION)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.nearestEndpoint=function(_,S,T,F){var M=_,P=CGAlgorithms.distancePointLine(_,T,F),H=CGAlgorithms.distancePointLine(S,T,F);return H<P&&(P=H,M=S),H=CGAlgorithms.distancePointLine(T,_,S),H<P&&(P=H,M=T),H=CGAlgorithms.distancePointLine(F,_,S),H<P&&(P=H,M=F),M},s}(LineIntersector),RobustDeterminant=function d(){};RobustDeterminant.prototype.interfaces_=function d(){return[]};RobustDeterminant.prototype.getClass=function d(){return RobustDeterminant};RobustDeterminant.orientationIndex=function d(s,f,_){var S=f.x-s.x,T=f.y-s.y,F=_.x-f.x,M=_.y-f.y;return RobustDeterminant.signOfDet2x2(S,T,F,M)};RobustDeterminant.signOfDet2x2=function d(s,f,_,S){var T=null,F=null,M=null;if(T=1,s===0||S===0)return f===0||_===0?0:f>0?_>0?-T:T:_>0?T:-T;if(f===0||_===0)return S>0?s>0?T:-T:s>0?-T:T;if(f>0?S>0?f<=S||(T=-T,F=s,s=_,_=F,F=f,f=S,S=F):f<=-S?(T=-T,_=-_,S=-S):(F=s,s=-_,_=F,F=f,f=-S,S=F):S>0?-f<=S?(T=-T,s=-s,f=-f):(F=-s,s=_,_=F,F=-f,f=S,S=F):f>=S?(s=-s,f=-f,_=-_,S=-S):(T=-T,F=-s,s=-_,_=F,F=-f,f=-S,S=F),s>0)if(_>0){if(!(s<=_))return T}else return T;else{if(_>0)return-T;if(s>=_)T=-T,s=-s,_=-_;else return-T}for(;;){if(M=Math.floor(_/s),_=_-M*s,S=S-M*f,S<0)return-T;if(S>f)return T;if(s>_+_){if(f<S+S)return T}else{if(f>S+S)return-T;_=s-_,S=f-S,T=-T}if(S===0)return _===0?0:-T;if(_===0||(M=Math.floor(s/_),s=s-M*_,f=f-M*S,f<0))return T;if(f>S)return-T;if(_>s+s){if(S<f+f)return-T}else{if(S>f+f)return T;s=_-s,f=S-f,T=-T}if(f===0)return s===0?0:T;if(s===0)return-T}};var RayCrossingCounter=function d(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var s=arguments[0];this._p=s};RayCrossingCounter.prototype.countSegment=function d(s,f){if(s.x<this._p.x&&f.x<this._p.x)return null;if(this._p.x===f.x&&this._p.y===f.y)return this._isPointOnSegment=!0,null;if(s.y===this._p.y&&f.y===this._p.y){var _=s.x,S=f.x;return _>S&&(_=f.x,S=s.x),this._p.x>=_&&this._p.x<=S&&(this._isPointOnSegment=!0),null}if(s.y>this._p.y&&f.y<=this._p.y||f.y>this._p.y&&s.y<=this._p.y){var T=s.x-this._p.x,F=s.y-this._p.y,M=f.x-this._p.x,P=f.y-this._p.y,H=RobustDeterminant.signOfDet2x2(T,F,M,P);if(H===0)return this._isPointOnSegment=!0,null;P<F&&(H=-H),H>0&&this._crossingCount++}};RayCrossingCounter.prototype.isPointInPolygon=function d(){return this.getLocation()!==Location.EXTERIOR};RayCrossingCounter.prototype.getLocation=function d(){return this._isPointOnSegment?Location.BOUNDARY:this._crossingCount%2===1?Location.INTERIOR:Location.EXTERIOR};RayCrossingCounter.prototype.isOnSegment=function d(){return this._isPointOnSegment};RayCrossingCounter.prototype.interfaces_=function d(){return[]};RayCrossingCounter.prototype.getClass=function d(){return RayCrossingCounter};RayCrossingCounter.locatePointInRing=function d(){if(arguments[0]instanceof Coordinate&&hasInterface(arguments[1],CoordinateSequence)){for(var s=arguments[0],f=arguments[1],_=new RayCrossingCounter(s),S=new Coordinate,T=new Coordinate,F=1;F<f.size();F++)if(f.getCoordinate(F,S),f.getCoordinate(F-1,T),_.countSegment(S,T),_.isOnSegment())return _.getLocation();return _.getLocation()}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Array){for(var M=arguments[0],P=arguments[1],H=new RayCrossingCounter(M),J=1;J<P.length;J++){var K=P[J],oe=P[J-1];if(H.countSegment(K,oe),H.isOnSegment())return H.getLocation()}return H.getLocation()}};var CGAlgorithms=function d(){},staticAccessors$3={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};CGAlgorithms.prototype.interfaces_=function d(){return[]};CGAlgorithms.prototype.getClass=function d(){return CGAlgorithms};CGAlgorithms.orientationIndex=function d(s,f,_){return CGAlgorithmsDD.orientationIndex(s,f,_)};CGAlgorithms.signedArea=function d(){if(arguments[0]instanceof Array){var s=arguments[0];if(s.length<3)return 0;for(var f=0,_=s[0].x,S=1;S<s.length-1;S++){var T=s[S].x-_,F=s[S+1].y,M=s[S-1].y;f+=T*(M-F)}return f/2}else if(hasInterface(arguments[0],CoordinateSequence)){var P=arguments[0],H=P.size();if(H<3)return 0;var J=new Coordinate,K=new Coordinate,oe=new Coordinate;P.getCoordinate(0,K),P.getCoordinate(1,oe);var se=K.x;oe.x-=se;for(var ae=0,ge=1;ge<H-1;ge++)J.y=K.y,K.x=oe.x,K.y=oe.y,P.getCoordinate(ge+1,oe),oe.x-=se,ae+=K.x*(J.y-oe.y);return ae/2}};CGAlgorithms.distanceLineLine=function d(s,f,_,S){if(s.equals(f))return CGAlgorithms.distancePointLine(s,_,S);if(_.equals(S))return CGAlgorithms.distancePointLine(S,s,f);var T=!1;if(!Envelope.intersects(s,f,_,S))T=!0;else{var F=(f.x-s.x)*(S.y-_.y)-(f.y-s.y)*(S.x-_.x);if(F===0)T=!0;else{var M=(s.y-_.y)*(S.x-_.x)-(s.x-_.x)*(S.y-_.y),P=(s.y-_.y)*(f.x-s.x)-(s.x-_.x)*(f.y-s.y),H=P/F,J=M/F;(J<0||J>1||H<0||H>1)&&(T=!0)}}return T?MathUtil.min(CGAlgorithms.distancePointLine(s,_,S),CGAlgorithms.distancePointLine(f,_,S),CGAlgorithms.distancePointLine(_,s,f),CGAlgorithms.distancePointLine(S,s,f)):0};CGAlgorithms.isPointInRing=function d(s,f){return CGAlgorithms.locatePointInRing(s,f)!==Location.EXTERIOR};CGAlgorithms.computeLength=function d(s){var f=s.size();if(f<=1)return 0;var _=0,S=new Coordinate;s.getCoordinate(0,S);for(var T=S.x,F=S.y,M=1;M<f;M++){s.getCoordinate(M,S);var P=S.x,H=S.y,J=P-T,K=H-F;_+=Math.sqrt(J*J+K*K),T=P,F=H}return _};CGAlgorithms.isCCW=function d(s){var f=s.length-1;if(f<3)throw new IllegalArgumentException("Ring has fewer than 4 points, so orientation cannot be determined");for(var _=s[0],S=0,T=1;T<=f;T++){var F=s[T];F.y>_.y&&(_=F,S=T)}var M=S;do M=M-1,M<0&&(M=f);while(s[M].equals2D(_)&&M!==S);var P=S;do P=(P+1)%f;while(s[P].equals2D(_)&&P!==S);var H=s[M],J=s[P];if(H.equals2D(_)||J.equals2D(_)||H.equals2D(J))return!1;var K=CGAlgorithms.computeOrientation(H,_,J),oe=!1;return K===0?oe=H.x>J.x:oe=K>0,oe};CGAlgorithms.locatePointInRing=function d(s,f){return RayCrossingCounter.locatePointInRing(s,f)};CGAlgorithms.distancePointLinePerpendicular=function d(s,f,_){var S=(_.x-f.x)*(_.x-f.x)+(_.y-f.y)*(_.y-f.y),T=((f.y-s.y)*(_.x-f.x)-(f.x-s.x)*(_.y-f.y))/S;return Math.abs(T)*Math.sqrt(S)};CGAlgorithms.computeOrientation=function d(s,f,_){return CGAlgorithms.orientationIndex(s,f,_)};CGAlgorithms.distancePointLine=function d(){if(arguments.length===2){var s=arguments[0],f=arguments[1];if(f.length===0)throw new IllegalArgumentException("Line array must contain at least one vertex");for(var _=s.distance(f[0]),S=0;S<f.length-1;S++){var T=CGAlgorithms.distancePointLine(s,f[S],f[S+1]);T<_&&(_=T)}return _}else if(arguments.length===3){var F=arguments[0],M=arguments[1],P=arguments[2];if(M.x===P.x&&M.y===P.y)return F.distance(M);var H=(P.x-M.x)*(P.x-M.x)+(P.y-M.y)*(P.y-M.y),J=((F.x-M.x)*(P.x-M.x)+(F.y-M.y)*(P.y-M.y))/H;if(J<=0)return F.distance(M);if(J>=1)return F.distance(P);var K=((M.y-F.y)*(P.x-M.x)-(M.x-F.x)*(P.y-M.y))/H;return Math.abs(K)*Math.sqrt(H)}};CGAlgorithms.isOnLine=function d(s,f){for(var _=new RobustLineIntersector,S=1;S<f.length;S++){var T=f[S-1],F=f[S];if(_.computeIntersection(s,T,F),_.hasIntersection())return!0}return!1};staticAccessors$3.CLOCKWISE.get=function(){return-1};staticAccessors$3.RIGHT.get=function(){return CGAlgorithms.CLOCKWISE};staticAccessors$3.COUNTERCLOCKWISE.get=function(){return 1};staticAccessors$3.LEFT.get=function(){return CGAlgorithms.COUNTERCLOCKWISE};staticAccessors$3.COLLINEAR.get=function(){return 0};staticAccessors$3.STRAIGHT.get=function(){return CGAlgorithms.COLLINEAR};Object.defineProperties(CGAlgorithms,staticAccessors$3);var GeometryComponentFilter=function d(){};GeometryComponentFilter.prototype.filter=function d(s){};GeometryComponentFilter.prototype.interfaces_=function d(){return[]};GeometryComponentFilter.prototype.getClass=function d(){return GeometryComponentFilter};var Geometry=function d(){var s=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=s,this._SRID=s.getSRID()},staticAccessors$11={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Geometry.prototype.isGeometryCollection=function d(){return this.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION};Geometry.prototype.getFactory=function d(){return this._factory};Geometry.prototype.getGeometryN=function d(s){return this};Geometry.prototype.getArea=function d(){return 0};Geometry.prototype.isRectangle=function d(){return!1};Geometry.prototype.equals=function d(){if(arguments[0]instanceof Geometry){var s=arguments[0];return s===null?!1:this.equalsTopo(s)}else if(arguments[0]instanceof Object){var f=arguments[0];if(!(f instanceof Geometry))return!1;var _=f;return this.equalsExact(_)}};Geometry.prototype.equalsExact=function d(s){return this===s||this.equalsExact(s,0)};Geometry.prototype.geometryChanged=function d(){this.apply(Geometry.geometryChangedFilter)};Geometry.prototype.geometryChangedAction=function d(){this._envelope=null};Geometry.prototype.equalsNorm=function d(s){return s===null?!1:this.norm().equalsExact(s.norm())};Geometry.prototype.getLength=function d(){return 0};Geometry.prototype.getNumGeometries=function d(){return 1};Geometry.prototype.compareTo=function d(){if(arguments.length===1){var s=arguments[0],f=s;return this.getSortIndex()!==f.getSortIndex()?this.getSortIndex()-f.getSortIndex():this.isEmpty()&&f.isEmpty()?0:this.isEmpty()?-1:f.isEmpty()?1:this.compareToSameClass(s)}else if(arguments.length===2){var _=arguments[0],S=arguments[1];return this.getSortIndex()!==_.getSortIndex()?this.getSortIndex()-_.getSortIndex():this.isEmpty()&&_.isEmpty()?0:this.isEmpty()?-1:_.isEmpty()?1:this.compareToSameClass(_,S)}};Geometry.prototype.getUserData=function d(){return this._userData};Geometry.prototype.getSRID=function d(){return this._SRID};Geometry.prototype.getEnvelope=function d(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};Geometry.prototype.checkNotGeometryCollection=function d(s){if(s.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION)throw new IllegalArgumentException("This method does not support GeometryCollection arguments")};Geometry.prototype.equal=function d(s,f,_){return _===0?s.equals(f):s.distance(f)<=_};Geometry.prototype.norm=function d(){var s=this.copy();return s.normalize(),s};Geometry.prototype.getPrecisionModel=function d(){return this._factory.getPrecisionModel()};Geometry.prototype.getEnvelopeInternal=function d(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Envelope(this._envelope)};Geometry.prototype.setSRID=function d(s){this._SRID=s};Geometry.prototype.setUserData=function d(s){this._userData=s};Geometry.prototype.compare=function d(s,f){for(var _=s.iterator(),S=f.iterator();_.hasNext()&&S.hasNext();){var T=_.next(),F=S.next(),M=T.compareTo(F);if(M!==0)return M}return _.hasNext()?1:S.hasNext()?-1:0};Geometry.prototype.hashCode=function d(){return this.getEnvelopeInternal().hashCode()};Geometry.prototype.isGeometryCollectionOrDerived=function d(){return this.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Geometry.SORTINDEX_MULTIPOINT||this.getSortIndex()===Geometry.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Geometry.SORTINDEX_MULTIPOLYGON};Geometry.prototype.interfaces_=function d(){return[Clonable,Comparable,Serializable]};Geometry.prototype.getClass=function d(){return Geometry};Geometry.hasNonEmptyElements=function d(s){for(var f=0;f<s.length;f++)if(!s[f].isEmpty())return!0;return!1};Geometry.hasNullElements=function d(s){for(var f=0;f<s.length;f++)if(s[f]===null)return!0;return!1};staticAccessors$11.serialVersionUID.get=function(){return 8763622679187377e3};staticAccessors$11.SORTINDEX_POINT.get=function(){return 0};staticAccessors$11.SORTINDEX_MULTIPOINT.get=function(){return 1};staticAccessors$11.SORTINDEX_LINESTRING.get=function(){return 2};staticAccessors$11.SORTINDEX_LINEARRING.get=function(){return 3};staticAccessors$11.SORTINDEX_MULTILINESTRING.get=function(){return 4};staticAccessors$11.SORTINDEX_POLYGON.get=function(){return 5};staticAccessors$11.SORTINDEX_MULTIPOLYGON.get=function(){return 6};staticAccessors$11.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};staticAccessors$11.geometryChangedFilter.get=function(){return geometryChangedFilter};Object.defineProperties(Geometry,staticAccessors$11);var geometryChangedFilter=function d(){};geometryChangedFilter.interfaces_=function d(){return[GeometryComponentFilter]};geometryChangedFilter.filter=function d(s){s.geometryChangedAction()};var CoordinateFilter=function d(){};CoordinateFilter.prototype.filter=function d(s){};CoordinateFilter.prototype.interfaces_=function d(){return[]};CoordinateFilter.prototype.getClass=function d(){return CoordinateFilter};var BoundaryNodeRule=function d(){},staticAccessors$12={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};BoundaryNodeRule.prototype.isInBoundary=function d(s){};BoundaryNodeRule.prototype.interfaces_=function d(){return[]};BoundaryNodeRule.prototype.getClass=function d(){return BoundaryNodeRule};staticAccessors$12.Mod2BoundaryNodeRule.get=function(){return Mod2BoundaryNodeRule};staticAccessors$12.EndPointBoundaryNodeRule.get=function(){return EndPointBoundaryNodeRule};staticAccessors$12.MultiValentEndPointBoundaryNodeRule.get=function(){return MultiValentEndPointBoundaryNodeRule};staticAccessors$12.MonoValentEndPointBoundaryNodeRule.get=function(){return MonoValentEndPointBoundaryNodeRule};staticAccessors$12.MOD2_BOUNDARY_RULE.get=function(){return new Mod2BoundaryNodeRule};staticAccessors$12.ENDPOINT_BOUNDARY_RULE.get=function(){return new EndPointBoundaryNodeRule};staticAccessors$12.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new MultiValentEndPointBoundaryNodeRule};staticAccessors$12.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new MonoValentEndPointBoundaryNodeRule};staticAccessors$12.OGC_SFS_BOUNDARY_RULE.get=function(){return BoundaryNodeRule.MOD2_BOUNDARY_RULE};Object.defineProperties(BoundaryNodeRule,staticAccessors$12);var Mod2BoundaryNodeRule=function d(){};Mod2BoundaryNodeRule.prototype.isInBoundary=function d(s){return s%2===1};Mod2BoundaryNodeRule.prototype.interfaces_=function d(){return[BoundaryNodeRule]};Mod2BoundaryNodeRule.prototype.getClass=function d(){return Mod2BoundaryNodeRule};var EndPointBoundaryNodeRule=function d(){};EndPointBoundaryNodeRule.prototype.isInBoundary=function d(s){return s>0};EndPointBoundaryNodeRule.prototype.interfaces_=function d(){return[BoundaryNodeRule]};EndPointBoundaryNodeRule.prototype.getClass=function d(){return EndPointBoundaryNodeRule};var MultiValentEndPointBoundaryNodeRule=function d(){};MultiValentEndPointBoundaryNodeRule.prototype.isInBoundary=function d(s){return s>1};MultiValentEndPointBoundaryNodeRule.prototype.interfaces_=function d(){return[BoundaryNodeRule]};MultiValentEndPointBoundaryNodeRule.prototype.getClass=function d(){return MultiValentEndPointBoundaryNodeRule};var MonoValentEndPointBoundaryNodeRule=function d(){};MonoValentEndPointBoundaryNodeRule.prototype.isInBoundary=function d(s){return s===1};MonoValentEndPointBoundaryNodeRule.prototype.interfaces_=function d(){return[BoundaryNodeRule]};MonoValentEndPointBoundaryNodeRule.prototype.getClass=function d(){return MonoValentEndPointBoundaryNodeRule};var Collection=function d(){};Collection.prototype.add=function d(){};Collection.prototype.addAll=function d(){};Collection.prototype.isEmpty=function d(){};Collection.prototype.iterator=function d(){};Collection.prototype.size=function d(){};Collection.prototype.toArray=function d(){};Collection.prototype.remove=function d(){};function IndexOutOfBoundsException(d){this.message=d||""}IndexOutOfBoundsException.prototype=new Error;IndexOutOfBoundsException.prototype.name="IndexOutOfBoundsException";var Iterator$1=function d(){};Iterator$1.prototype.hasNext=function d(){};Iterator$1.prototype.next=function d(){};Iterator$1.prototype.remove=function d(){};var List=function(d){function s(){d.apply(this,arguments)}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.get=function(){},s.prototype.set=function(){},s.prototype.isEmpty=function(){},s}(Collection);function NoSuchElementException(d){this.message=d||""}NoSuchElementException.prototype=new Error;NoSuchElementException.prototype.name="NoSuchElementException";var ArrayList=function(d){function s(){d.call(this),this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.ensureCapacity=function(){},s.prototype.interfaces_=function(){return[d,Collection]},s.prototype.add=function(_){return arguments.length===1?this.array_.push(_):this.array_.splice(arguments[0],arguments[1]),!0},s.prototype.clear=function(){this.array_=[]},s.prototype.addAll=function(_){for(var S=this,T=_.iterator();T.hasNext();)S.add(T.next());return!0},s.prototype.set=function(_,S){var T=this.array_[_];return this.array_[_]=S,T},s.prototype.iterator=function(){return new Iterator_(this)},s.prototype.get=function(_){if(_<0||_>=this.size())throw new IndexOutOfBoundsException;return this.array_[_]},s.prototype.isEmpty=function(){return this.array_.length===0},s.prototype.size=function(){return this.array_.length},s.prototype.toArray=function(){for(var _=this,S=[],T=0,F=this.array_.length;T<F;T++)S.push(_.array_[T]);return S},s.prototype.remove=function(_){for(var S=this,T=!1,F=0,M=this.array_.length;F<M;F++)if(S.array_[F]===_){S.array_.splice(F,1),T=!0;break}return T},s}(List),Iterator_=function(d){function s(f){d.call(this),this.arrayList_=f,this.position_=0}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new NoSuchElementException;return this.arrayList_.get(this.position_++)},s.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},s.prototype.set=function(_){return this.arrayList_.set(this.position_-1,_)},s.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},s}(Iterator$1),CoordinateList=function(d){function s(){if(d.call(this),arguments.length!==0){if(arguments.length===1){var _=arguments[0];this.ensureCapacity(_.length),this.add(_,!0)}else if(arguments.length===2){var S=arguments[0],T=arguments[1];this.ensureCapacity(S.length),this.add(S,T)}}}d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s;var f={coordArrayType:{configurable:!0}};return f.coordArrayType.get=function(){return new Array(0).fill(null)},s.prototype.getCoordinate=function(S){return this.get(S)},s.prototype.addAll=function(){var S=this;if(arguments.length===2){for(var T=arguments[0],F=arguments[1],M=!1,P=T.iterator();P.hasNext();)S.add(P.next(),F),M=!0;return M}else return d.prototype.addAll.apply(this,arguments)},s.prototype.clone=function(){for(var S=this,T=d.prototype.clone.call(this),F=0;F<this.size();F++)T.add(F,S.get(F).copy());return T},s.prototype.toCoordinateArray=function(){return this.toArray(s.coordArrayType)},s.prototype.add=function(){var S=this;if(arguments.length===1){var T=arguments[0];d.prototype.add.call(this,T)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var F=arguments[0],M=arguments[1];return this.add(F,M,!0),!0}else if(arguments[0]instanceof Coordinate&&typeof arguments[1]=="boolean"){var P=arguments[0],H=arguments[1];if(!H&&this.size()>=1){var J=this.get(this.size()-1);if(J.equals2D(P))return null}d.prototype.add.call(this,P)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var K=arguments[0],oe=arguments[1];return this.add(K,oe),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var se=arguments[0],ae=arguments[1],ge=arguments[2];if(ge)for(var he=0;he<se.length;he++)S.add(se[he],ae);else for(var Be=se.length-1;Be>=0;Be--)S.add(se[Be],ae);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Coordinate){var pe=arguments[0],be=arguments[1],Re=arguments[2];if(!Re){var Fe=this.size();if(Fe>0){if(pe>0){var Me=this.get(pe-1);if(Me.equals2D(be))return null}if(pe<Fe){var ve=this.get(pe);if(ve.equals2D(be))return null}}}d.prototype.add.call(this,pe,be)}}else if(arguments.length===4){var At=arguments[0],Ct=arguments[1],Rt=arguments[2],It=arguments[3],xt=1;Rt>It&&(xt=-1);for(var wt=Rt;wt!==It;wt+=xt)S.add(At[wt],Ct);return!0}},s.prototype.closeRing=function(){this.size()>0&&this.add(new Coordinate(this.get(0)),!1)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},Object.defineProperties(s,f),s}(ArrayList),CoordinateArrays=function d(){},staticAccessors$13={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};staticAccessors$13.ForwardComparator.get=function(){return ForwardComparator};staticAccessors$13.BidirectionalComparator.get=function(){return BidirectionalComparator};staticAccessors$13.coordArrayType.get=function(){return new Array(0).fill(null)};CoordinateArrays.prototype.interfaces_=function d(){return[]};CoordinateArrays.prototype.getClass=function d(){return CoordinateArrays};CoordinateArrays.isRing=function d(s){return!(s.length<4||!s[0].equals2D(s[s.length-1]))};CoordinateArrays.ptNotInList=function d(s,f){for(var _=0;_<s.length;_++){var S=s[_];if(CoordinateArrays.indexOf(S,f)<0)return S}return null};CoordinateArrays.scroll=function d(s,f){var _=CoordinateArrays.indexOf(f,s);if(_<0)return null;var S=new Array(s.length).fill(null);System.arraycopy(s,_,S,0,s.length-_),System.arraycopy(s,0,S,s.length-_,_),System.arraycopy(S,0,s,0,s.length)};CoordinateArrays.equals=function d(){if(arguments.length===2){var s=arguments[0],f=arguments[1];if(s===f)return!0;if(s===null||f===null||s.length!==f.length)return!1;for(var _=0;_<s.length;_++)if(!s[_].equals(f[_]))return!1;return!0}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2];if(S===T)return!0;if(S===null||T===null||S.length!==T.length)return!1;for(var M=0;M<S.length;M++)if(F.compare(S[M],T[M])!==0)return!1;return!0}};CoordinateArrays.intersection=function d(s,f){for(var _=new CoordinateList,S=0;S<s.length;S++)f.intersects(s[S])&&_.add(s[S],!0);return _.toCoordinateArray()};CoordinateArrays.hasRepeatedPoints=function d(s){for(var f=1;f<s.length;f++)if(s[f-1].equals(s[f]))return!0;return!1};CoordinateArrays.removeRepeatedPoints=function d(s){if(!CoordinateArrays.hasRepeatedPoints(s))return s;var f=new CoordinateList(s,!1);return f.toCoordinateArray()};CoordinateArrays.reverse=function d(s){for(var f=s.length-1,_=Math.trunc(f/2),S=0;S<=_;S++){var T=s[S];s[S]=s[f-S],s[f-S]=T}};CoordinateArrays.removeNull=function d(s){for(var f=0,_=0;_<s.length;_++)s[_]!==null&&f++;var S=new Array(f).fill(null);if(f===0)return S;for(var T=0,F=0;F<s.length;F++)s[F]!==null&&(S[T++]=s[F]);return S};CoordinateArrays.copyDeep=function d(){if(arguments.length===1){for(var s=arguments[0],f=new Array(s.length).fill(null),_=0;_<s.length;_++)f[_]=new Coordinate(s[_]);return f}else if(arguments.length===5)for(var S=arguments[0],T=arguments[1],F=arguments[2],M=arguments[3],P=arguments[4],H=0;H<P;H++)F[M+H]=new Coordinate(S[T+H])};CoordinateArrays.isEqualReversed=function d(s,f){for(var _=0;_<s.length;_++){var S=s[_],T=f[s.length-_-1];if(S.compareTo(T)!==0)return!1}return!0};CoordinateArrays.envelope=function d(s){for(var f=new Envelope,_=0;_<s.length;_++)f.expandToInclude(s[_]);return f};CoordinateArrays.toCoordinateArray=function d(s){return s.toArray(CoordinateArrays.coordArrayType)};CoordinateArrays.atLeastNCoordinatesOrNothing=function d(s,f){return f.length>=s?f:[]};CoordinateArrays.indexOf=function d(s,f){for(var _=0;_<f.length;_++)if(s.equals(f[_]))return _;return-1};CoordinateArrays.increasingDirection=function d(s){for(var f=0;f<Math.trunc(s.length/2);f++){var _=s.length-1-f,S=s[f].compareTo(s[_]);if(S!==0)return S}return 1};CoordinateArrays.compare=function d(s,f){for(var _=0;_<s.length&&_<f.length;){var S=s[_].compareTo(f[_]);if(S!==0)return S;_++}return _<f.length?-1:_<s.length?1:0};CoordinateArrays.minCoordinate=function d(s){for(var f=null,_=0;_<s.length;_++)(f===null||f.compareTo(s[_])>0)&&(f=s[_]);return f};CoordinateArrays.extract=function d(s,f,_){f=MathUtil.clamp(f,0,s.length),_=MathUtil.clamp(_,-1,s.length);var S=_-f+1;_<0&&(S=0),f>=s.length&&(S=0),_<f&&(S=0);var T=new Array(S).fill(null);if(S===0)return T;for(var F=0,M=f;M<=_;M++)T[F++]=s[M];return T};Object.defineProperties(CoordinateArrays,staticAccessors$13);var ForwardComparator=function d(){};ForwardComparator.prototype.compare=function d(s,f){var _=s,S=f;return CoordinateArrays.compare(_,S)};ForwardComparator.prototype.interfaces_=function d(){return[Comparator]};ForwardComparator.prototype.getClass=function d(){return ForwardComparator};var BidirectionalComparator=function d(){};BidirectionalComparator.prototype.compare=function d(s,f){var _=s,S=f;if(_.length<S.length)return-1;if(_.length>S.length)return 1;if(_.length===0)return 0;var T=CoordinateArrays.compare(_,S),F=CoordinateArrays.isEqualReversed(_,S);return F?0:T};BidirectionalComparator.prototype.OLDcompare=function d(s,f){var _=s,S=f;if(_.length<S.length)return-1;if(_.length>S.length)return 1;if(_.length===0)return 0;for(var T=CoordinateArrays.increasingDirection(_),F=CoordinateArrays.increasingDirection(S),M=T>0?0:_.length-1,P=F>0?0:_.length-1,H=0;H<_.length;H++){var J=_[M].compareTo(S[P]);if(J!==0)return J;M+=T,P+=F}return 0};BidirectionalComparator.prototype.interfaces_=function d(){return[Comparator]};BidirectionalComparator.prototype.getClass=function d(){return BidirectionalComparator};var Map$1$1=function d(){};Map$1$1.prototype.get=function d(){};Map$1$1.prototype.put=function d(){};Map$1$1.prototype.size=function d(){};Map$1$1.prototype.values=function d(){};Map$1$1.prototype.entrySet=function d(){};var SortedMap=function(d){function s(){d.apply(this,arguments)}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s}(Map$1$1);function OperationNotSupported(d){this.message=d||""}OperationNotSupported.prototype=new Error;OperationNotSupported.prototype.name="OperationNotSupported";function Set$1(){}Set$1.prototype=new Collection;Set$1.prototype.contains=function(){};var HashSet=function(d){function s(){d.call(this),this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.contains=function(_){for(var S=this,T=0,F=this.array_.length;T<F;T++){var M=S.array_[T];if(M===_)return!0}return!1},s.prototype.add=function(_){return this.contains(_)?!1:(this.array_.push(_),!0)},s.prototype.addAll=function(_){for(var S=this,T=_.iterator();T.hasNext();)S.add(T.next());return!0},s.prototype.remove=function(_){throw new Error},s.prototype.size=function(){return this.array_.length},s.prototype.isEmpty=function(){return this.array_.length===0},s.prototype.toArray=function(){for(var _=this,S=[],T=0,F=this.array_.length;T<F;T++)S.push(_.array_[T]);return S},s.prototype.iterator=function(){return new Iterator_$1(this)},s}(Set$1),Iterator_$1=function(d){function s(f){d.call(this),this.hashSet_=f,this.position_=0}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new NoSuchElementException;return this.hashSet_.array_[this.position_++]},s.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},s.prototype.remove=function(){throw new OperationNotSupported},s}(Iterator$1),BLACK=0,RED=1;function colorOf(d){return d===null?BLACK:d.color}function parentOf(d){return d===null?null:d.parent}function setColor(d,s){d!==null&&(d.color=s)}function leftOf(d){return d===null?null:d.left}function rightOf(d){return d===null?null:d.right}function TreeMap(){this.root_=null,this.size_=0}TreeMap.prototype=new SortedMap;TreeMap.prototype.get=function(d){for(var s=this.root_;s!==null;){var f=d.compareTo(s.key);if(f<0)s=s.left;else if(f>0)s=s.right;else return s.value}return null};TreeMap.prototype.put=function(d,s){if(this.root_===null)return this.root_={key:d,value:s,left:null,right:null,parent:null,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var f=this.root_,_,S;do if(_=f,S=d.compareTo(f.key),S<0)f=f.left;else if(S>0)f=f.right;else{var T=f.value;return f.value=s,T}while(f!==null);var F={key:d,left:null,right:null,value:s,parent:_,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}};return S<0?_.left=F:_.right=F,this.fixAfterInsertion(F),this.size_++,null};TreeMap.prototype.fixAfterInsertion=function(d){var s=this;for(d.color=RED;d!=null&&d!==this.root_&&d.parent.color===RED;)if(parentOf(d)===leftOf(parentOf(parentOf(d)))){var f=rightOf(parentOf(parentOf(d)));colorOf(f)===RED?(setColor(parentOf(d),BLACK),setColor(f,BLACK),setColor(parentOf(parentOf(d)),RED),d=parentOf(parentOf(d))):(d===rightOf(parentOf(d))&&(d=parentOf(d),s.rotateLeft(d)),setColor(parentOf(d),BLACK),setColor(parentOf(parentOf(d)),RED),s.rotateRight(parentOf(parentOf(d))))}else{var _=leftOf(parentOf(parentOf(d)));colorOf(_)===RED?(setColor(parentOf(d),BLACK),setColor(_,BLACK),setColor(parentOf(parentOf(d)),RED),d=parentOf(parentOf(d))):(d===leftOf(parentOf(d))&&(d=parentOf(d),s.rotateRight(d)),setColor(parentOf(d),BLACK),setColor(parentOf(parentOf(d)),RED),s.rotateLeft(parentOf(parentOf(d))))}this.root_.color=BLACK};TreeMap.prototype.values=function(){var d=new ArrayList,s=this.getFirstEntry();if(s!==null)for(d.add(s.value);(s=TreeMap.successor(s))!==null;)d.add(s.value);return d};TreeMap.prototype.entrySet=function(){var d=new HashSet,s=this.getFirstEntry();if(s!==null)for(d.add(s);(s=TreeMap.successor(s))!==null;)d.add(s);return d};TreeMap.prototype.rotateLeft=function(d){if(d!=null){var s=d.right;d.right=s.left,s.left!=null&&(s.left.parent=d),s.parent=d.parent,d.parent===null?this.root_=s:d.parent.left===d?d.parent.left=s:d.parent.right=s,s.left=d,d.parent=s}};TreeMap.prototype.rotateRight=function(d){if(d!=null){var s=d.left;d.left=s.right,s.right!=null&&(s.right.parent=d),s.parent=d.parent,d.parent===null?this.root_=s:d.parent.right===d?d.parent.right=s:d.parent.left=s,s.right=d,d.parent=s}};TreeMap.prototype.getFirstEntry=function(){var d=this.root_;if(d!=null)for(;d.left!=null;)d=d.left;return d};TreeMap.successor=function(d){if(d===null)return null;if(d.right!==null){for(var s=d.right;s.left!==null;)s=s.left;return s}else{for(var f=d.parent,_=d;f!==null&&_===f.right;)_=f,f=f.parent;return f}};TreeMap.prototype.size=function(){return this.size_};var Lineal=function d(){};Lineal.prototype.interfaces_=function d(){return[]};Lineal.prototype.getClass=function d(){return Lineal};function SortedSet(){}SortedSet.prototype=new Set$1;function TreeSet(){this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}TreeSet.prototype=new SortedSet;TreeSet.prototype.contains=function(d){for(var s=this,f=0,_=this.array_.length;f<_;f++){var S=s.array_[f];if(S.compareTo(d)===0)return!0}return!1};TreeSet.prototype.add=function(d){var s=this;if(this.contains(d))return!1;for(var f=0,_=this.array_.length;f<_;f++){var S=s.array_[f];if(S.compareTo(d)===1)return s.array_.splice(f,0,d),!0}return this.array_.push(d),!0};TreeSet.prototype.addAll=function(d){for(var s=this,f=d.iterator();f.hasNext();)s.add(f.next());return!0};TreeSet.prototype.remove=function(d){throw new OperationNotSupported};TreeSet.prototype.size=function(){return this.array_.length};TreeSet.prototype.isEmpty=function(){return this.array_.length===0};TreeSet.prototype.toArray=function(){for(var d=this,s=[],f=0,_=this.array_.length;f<_;f++)s.push(d.array_[f]);return s};TreeSet.prototype.iterator=function(){return new Iterator_$2(this)};var Iterator_$2=function(d){this.treeSet_=d,this.position_=0};Iterator_$2.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new NoSuchElementException;return this.treeSet_.array_[this.position_++]};Iterator_$2.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};Iterator_$2.prototype.remove=function(){throw new OperationNotSupported};var Arrays=function d(){};Arrays.sort=function d(){var s=arguments[0],f,_,S,T;if(arguments.length===1)T=function(M,P){return M.compareTo(P)},s.sort(T);else if(arguments.length===2)S=arguments[1],T=function(M,P){return S.compare(M,P)},s.sort(T);else if(arguments.length===3){_=s.slice(arguments[1],arguments[2]),_.sort();var F=s.slice(0,arguments[1]).concat(_,s.slice(arguments[2],s.length));for(s.splice(0,s.length),f=0;f<F.length;f++)s.push(F[f])}else if(arguments.length===4)for(_=s.slice(arguments[1],arguments[2]),S=arguments[3],T=function(M,P){return S.compare(M,P)},_.sort(T),F=s.slice(0,arguments[1]).concat(_,s.slice(arguments[2],s.length)),s.splice(0,s.length),f=0;f<F.length;f++)s.push(F[f])};Arrays.asList=function d(s){for(var f=new ArrayList,_=0,S=s.length;_<S;_++)f.add(s[_]);return f};var Dimension=function d(){},staticAccessors$14={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};staticAccessors$14.P.get=function(){return 0};staticAccessors$14.L.get=function(){return 1};staticAccessors$14.A.get=function(){return 2};staticAccessors$14.FALSE.get=function(){return-1};staticAccessors$14.TRUE.get=function(){return-2};staticAccessors$14.DONTCARE.get=function(){return-3};staticAccessors$14.SYM_FALSE.get=function(){return"F"};staticAccessors$14.SYM_TRUE.get=function(){return"T"};staticAccessors$14.SYM_DONTCARE.get=function(){return"*"};staticAccessors$14.SYM_P.get=function(){return"0"};staticAccessors$14.SYM_L.get=function(){return"1"};staticAccessors$14.SYM_A.get=function(){return"2"};Dimension.prototype.interfaces_=function d(){return[]};Dimension.prototype.getClass=function d(){return Dimension};Dimension.toDimensionSymbol=function d(s){switch(s){case Dimension.FALSE:return Dimension.SYM_FALSE;case Dimension.TRUE:return Dimension.SYM_TRUE;case Dimension.DONTCARE:return Dimension.SYM_DONTCARE;case Dimension.P:return Dimension.SYM_P;case Dimension.L:return Dimension.SYM_L;case Dimension.A:return Dimension.SYM_A}throw new IllegalArgumentException("Unknown dimension value: "+s)};Dimension.toDimensionValue=function d(s){switch(Character.toUpperCase(s)){case Dimension.SYM_FALSE:return Dimension.FALSE;case Dimension.SYM_TRUE:return Dimension.TRUE;case Dimension.SYM_DONTCARE:return Dimension.DONTCARE;case Dimension.SYM_P:return Dimension.P;case Dimension.SYM_L:return Dimension.L;case Dimension.SYM_A:return Dimension.A}throw new IllegalArgumentException("Unknown dimension symbol: "+s)};Object.defineProperties(Dimension,staticAccessors$14);var GeometryFilter=function d(){};GeometryFilter.prototype.filter=function d(s){};GeometryFilter.prototype.interfaces_=function d(){return[]};GeometryFilter.prototype.getClass=function d(){return GeometryFilter};var CoordinateSequenceFilter=function d(){};CoordinateSequenceFilter.prototype.filter=function d(s,f){};CoordinateSequenceFilter.prototype.isDone=function d(){};CoordinateSequenceFilter.prototype.isGeometryChanged=function d(){};CoordinateSequenceFilter.prototype.interfaces_=function d(){return[]};CoordinateSequenceFilter.prototype.getClass=function d(){return CoordinateSequenceFilter};var GeometryCollection=function(d){function s(_,S){if(d.call(this,S),this._geometries=_||[],d.hasNullElements(this._geometries))throw new IllegalArgumentException("geometries must not contain null elements")}d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s;var f={serialVersionUID:{configurable:!0}};return s.prototype.computeEnvelopeInternal=function(){for(var S=this,T=new Envelope,F=0;F<this._geometries.length;F++)T.expandToInclude(S._geometries[F].getEnvelopeInternal());return T},s.prototype.getGeometryN=function(S){return this._geometries[S]},s.prototype.getSortIndex=function(){return d.SORTINDEX_GEOMETRYCOLLECTION},s.prototype.getCoordinates=function(){for(var S=this,T=new Array(this.getNumPoints()).fill(null),F=-1,M=0;M<this._geometries.length;M++)for(var P=S._geometries[M].getCoordinates(),H=0;H<P.length;H++)F++,T[F]=P[H];return T},s.prototype.getArea=function(){for(var S=this,T=0,F=0;F<this._geometries.length;F++)T+=S._geometries[F].getArea();return T},s.prototype.equalsExact=function(){var S=this;if(arguments.length===2){var T=arguments[0],F=arguments[1];if(!this.isEquivalentClass(T))return!1;var M=T;if(this._geometries.length!==M._geometries.length)return!1;for(var P=0;P<this._geometries.length;P++)if(!S._geometries[P].equalsExact(M._geometries[P],F))return!1;return!0}else return d.prototype.equalsExact.apply(this,arguments)},s.prototype.normalize=function(){for(var S=this,T=0;T<this._geometries.length;T++)S._geometries[T].normalize();Arrays.sort(this._geometries)},s.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},s.prototype.getBoundaryDimension=function(){for(var S=this,T=Dimension.FALSE,F=0;F<this._geometries.length;F++)T=Math.max(T,S._geometries[F].getBoundaryDimension());return T},s.prototype.getDimension=function(){for(var S=this,T=Dimension.FALSE,F=0;F<this._geometries.length;F++)T=Math.max(T,S._geometries[F].getDimension());return T},s.prototype.getLength=function(){for(var S=this,T=0,F=0;F<this._geometries.length;F++)T+=S._geometries[F].getLength();return T},s.prototype.getNumPoints=function(){for(var S=this,T=0,F=0;F<this._geometries.length;F++)T+=S._geometries[F].getNumPoints();return T},s.prototype.getNumGeometries=function(){return this._geometries.length},s.prototype.reverse=function(){for(var S=this,T=this._geometries.length,F=new Array(T).fill(null),M=0;M<this._geometries.length;M++)F[M]=S._geometries[M].reverse();return this.getFactory().createGeometryCollection(F)},s.prototype.compareToSameClass=function(){var S=this;if(arguments.length===1){var T=arguments[0],F=new TreeSet(Arrays.asList(this._geometries)),M=new TreeSet(Arrays.asList(T._geometries));return this.compare(F,M)}else if(arguments.length===2){for(var P=arguments[0],H=arguments[1],J=P,K=this.getNumGeometries(),oe=J.getNumGeometries(),se=0;se<K&&se<oe;){var ae=S.getGeometryN(se),ge=J.getGeometryN(se),he=ae.compareToSameClass(ge,H);if(he!==0)return he;se++}return se<K?1:se<oe?-1:0}},s.prototype.apply=function(){var S=this;if(hasInterface(arguments[0],CoordinateFilter))for(var T=arguments[0],F=0;F<this._geometries.length;F++)S._geometries[F].apply(T);else if(hasInterface(arguments[0],CoordinateSequenceFilter)){var M=arguments[0];if(this._geometries.length===0)return null;for(var P=0;P<this._geometries.length&&(S._geometries[P].apply(M),!M.isDone());P++);M.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(arguments[0],GeometryFilter)){var H=arguments[0];H.filter(this);for(var J=0;J<this._geometries.length;J++)S._geometries[J].apply(H)}else if(hasInterface(arguments[0],GeometryComponentFilter)){var K=arguments[0];K.filter(this);for(var oe=0;oe<this._geometries.length;oe++)S._geometries[oe].apply(K)}},s.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Assert.shouldNeverReachHere(),null},s.prototype.clone=function(){var S=this,T=d.prototype.clone.call(this);T._geometries=new Array(this._geometries.length).fill(null);for(var F=0;F<this._geometries.length;F++)T._geometries[F]=S._geometries[F].clone();return T},s.prototype.getGeometryType=function(){return"GeometryCollection"},s.prototype.copy=function(){for(var S=this,T=new Array(this._geometries.length).fill(null),F=0;F<T.length;F++)T[F]=S._geometries[F].copy();return new s(T,this._factory)},s.prototype.isEmpty=function(){for(var S=this,T=0;T<this._geometries.length;T++)if(!S._geometries[T].isEmpty())return!1;return!0},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},f.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(s,f),s}(Geometry),MultiLineString=function(d){function s(){d.apply(this,arguments)}d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s;var f={serialVersionUID:{configurable:!0}};return s.prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTILINESTRING},s.prototype.equalsExact=function(){if(arguments.length===2){var S=arguments[0],T=arguments[1];return this.isEquivalentClass(S)?d.prototype.equalsExact.call(this,S,T):!1}else return d.prototype.equalsExact.apply(this,arguments)},s.prototype.getBoundaryDimension=function(){return this.isClosed()?Dimension.FALSE:0},s.prototype.isClosed=function(){var S=this;if(this.isEmpty())return!1;for(var T=0;T<this._geometries.length;T++)if(!S._geometries[T].isClosed())return!1;return!0},s.prototype.getDimension=function(){return 1},s.prototype.reverse=function(){for(var S=this,T=this._geometries.length,F=new Array(T).fill(null),M=0;M<this._geometries.length;M++)F[T-1-M]=S._geometries[M].reverse();return this.getFactory().createMultiLineString(F)},s.prototype.getBoundary=function(){return new BoundaryOp(this).getBoundary()},s.prototype.getGeometryType=function(){return"MultiLineString"},s.prototype.copy=function(){for(var S=this,T=new Array(this._geometries.length).fill(null),F=0;F<T.length;F++)T[F]=S._geometries[F].copy();return new s(T,this._factory)},s.prototype.interfaces_=function(){return[Lineal]},s.prototype.getClass=function(){return s},f.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(s,f),s}(GeometryCollection),BoundaryOp=function d(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var s=arguments[0],f=BoundaryNodeRule.MOD2_BOUNDARY_RULE;this._geom=s,this._geomFact=s.getFactory(),this._bnRule=f}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this._geom=_,this._geomFact=_.getFactory(),this._bnRule=S}};BoundaryOp.prototype.boundaryMultiLineString=function d(s){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var f=this.computeBoundaryCoordinates(s);return f.length===1?this._geomFact.createPoint(f[0]):this._geomFact.createMultiPointFromCoords(f)};BoundaryOp.prototype.getBoundary=function d(){return this._geom instanceof LineString?this.boundaryLineString(this._geom):this._geom instanceof MultiLineString?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};BoundaryOp.prototype.boundaryLineString=function d(s){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(s.isClosed()){var f=this._bnRule.isInBoundary(2);return f?s.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([s.getStartPoint(),s.getEndPoint()])};BoundaryOp.prototype.getEmptyMultiPoint=function d(){return this._geomFact.createMultiPoint()};BoundaryOp.prototype.computeBoundaryCoordinates=function d(s){var f=this,_=new ArrayList;this._endpointMap=new TreeMap;for(var S=0;S<s.getNumGeometries();S++){var T=s.getGeometryN(S);T.getNumPoints()!==0&&(f.addEndpoint(T.getCoordinateN(0)),f.addEndpoint(T.getCoordinateN(T.getNumPoints()-1)))}for(var F=this._endpointMap.entrySet().iterator();F.hasNext();){var M=F.next(),P=M.getValue(),H=P.count;f._bnRule.isInBoundary(H)&&_.add(M.getKey())}return CoordinateArrays.toCoordinateArray(_)};BoundaryOp.prototype.addEndpoint=function d(s){var f=this._endpointMap.get(s);f===null&&(f=new Counter,this._endpointMap.put(s,f)),f.count++};BoundaryOp.prototype.interfaces_=function d(){return[]};BoundaryOp.prototype.getClass=function d(){return BoundaryOp};BoundaryOp.getBoundary=function d(){if(arguments.length===1){var s=arguments[0],f=new BoundaryOp(s);return f.getBoundary()}else if(arguments.length===2){var _=arguments[0],S=arguments[1],T=new BoundaryOp(_,S);return T.getBoundary()}};var Counter=function d(){this.count=null};Counter.prototype.interfaces_=function d(){return[]};Counter.prototype.getClass=function d(){return Counter};function PrintStream(){}function StringReader(){}var DecimalFormat=function d(){};function ByteArrayOutputStream(){}function IOException(){}function LineNumberReader(){}var StringUtil=function d(){},staticAccessors$15={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};StringUtil.prototype.interfaces_=function d(){return[]};StringUtil.prototype.getClass=function d(){return StringUtil};StringUtil.chars=function d(s,f){for(var _=new Array(f).fill(null),S=0;S<f;S++)_[S]=s;return String(_)};StringUtil.getStackTrace=function d(){if(arguments.length===1){var s=arguments[0],f=new ByteArrayOutputStream,_=new PrintStream;return s.printStackTrace(_),f.toString()}else if(arguments.length===2){var S=arguments[0],T=arguments[1],F="";new StringReader(StringUtil.getStackTrace(S));for(var M=new LineNumberReader,P=0;P<T;P++)try{F+=M.readLine()+StringUtil.NEWLINE}catch(H){if(H instanceof IOException)Assert.shouldNeverReachHere();else throw H}finally{}return F}};StringUtil.split=function d(s,f){for(var _=f.length,S=new ArrayList,T=""+s,F=T.indexOf(f);F>=0;){var M=T.substring(0,F);S.add(M),T=T.substring(F+_),F=T.indexOf(f)}T.length>0&&S.add(T);for(var P=new Array(S.size()).fill(null),H=0;H<P.length;H++)P[H]=S.get(H);return P};StringUtil.toString=function d(){if(arguments.length===1){var s=arguments[0];return StringUtil.SIMPLE_ORDINATE_FORMAT.format(s)}};StringUtil.spaces=function d(s){return StringUtil.chars(" ",s)};staticAccessors$15.NEWLINE.get=function(){return System.getProperty("line.separator")};staticAccessors$15.SIMPLE_ORDINATE_FORMAT.get=function(){return new DecimalFormat};Object.defineProperties(StringUtil,staticAccessors$15);var CoordinateSequences=function d(){};CoordinateSequences.prototype.interfaces_=function d(){return[]};CoordinateSequences.prototype.getClass=function d(){return CoordinateSequences};CoordinateSequences.copyCoord=function d(s,f,_,S){for(var T=Math.min(s.getDimension(),_.getDimension()),F=0;F<T;F++)_.setOrdinate(S,F,s.getOrdinate(f,F))};CoordinateSequences.isRing=function d(s){var f=s.size();return f===0?!0:f<=3?!1:s.getOrdinate(0,CoordinateSequence.X)===s.getOrdinate(f-1,CoordinateSequence.X)&&s.getOrdinate(0,CoordinateSequence.Y)===s.getOrdinate(f-1,CoordinateSequence.Y)};CoordinateSequences.isEqual=function d(s,f){var _=s.size(),S=f.size();if(_!==S)return!1;for(var T=Math.min(s.getDimension(),f.getDimension()),F=0;F<_;F++)for(var M=0;M<T;M++){var P=s.getOrdinate(F,M),H=f.getOrdinate(F,M);if(s.getOrdinate(F,M)!==f.getOrdinate(F,M)&&!(Double.isNaN(P)&&Double.isNaN(H)))return!1}return!0};CoordinateSequences.extend=function d(s,f,_){var S=s.create(_,f.getDimension()),T=f.size();if(CoordinateSequences.copy(f,0,S,0,T),T>0)for(var F=T;F<_;F++)CoordinateSequences.copy(f,T-1,S,F,1);return S};CoordinateSequences.reverse=function d(s){for(var f=s.size()-1,_=Math.trunc(f/2),S=0;S<=_;S++)CoordinateSequences.swap(s,S,f-S)};CoordinateSequences.swap=function d(s,f,_){if(f===_)return null;for(var S=0;S<s.getDimension();S++){var T=s.getOrdinate(f,S);s.setOrdinate(f,S,s.getOrdinate(_,S)),s.setOrdinate(_,S,T)}};CoordinateSequences.copy=function d(s,f,_,S,T){for(var F=0;F<T;F++)CoordinateSequences.copyCoord(s,f+F,_,S+F)};CoordinateSequences.toString=function d(){if(arguments.length===1){var s=arguments[0],f=s.size();if(f===0)return"()";var _=s.getDimension(),S=new StringBuffer;S.append("(");for(var T=0;T<f;T++){T>0&&S.append(" ");for(var F=0;F<_;F++)F>0&&S.append(","),S.append(StringUtil.toString(s.getOrdinate(T,F)))}return S.append(")"),S.toString()}};CoordinateSequences.ensureValidRing=function d(s,f){var _=f.size();if(_===0)return f;if(_<=3)return CoordinateSequences.createClosedRing(s,f,4);var S=f.getOrdinate(0,CoordinateSequence.X)===f.getOrdinate(_-1,CoordinateSequence.X)&&f.getOrdinate(0,CoordinateSequence.Y)===f.getOrdinate(_-1,CoordinateSequence.Y);return S?f:CoordinateSequences.createClosedRing(s,f,_+1)};CoordinateSequences.createClosedRing=function d(s,f,_){var S=s.create(_,f.getDimension()),T=f.size();CoordinateSequences.copy(f,0,S,0,T);for(var F=T;F<_;F++)CoordinateSequences.copy(f,0,S,F,1);return S};var LineString=function(d){function s(_,S){d.call(this,S),this._points=null,this.init(_)}d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s;var f={serialVersionUID:{configurable:!0}};return s.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Envelope:this._points.expandEnvelope(new Envelope)},s.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},s.prototype.getSortIndex=function(){return d.SORTINDEX_LINESTRING},s.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},s.prototype.equalsExact=function(){var S=this;if(arguments.length===2){var T=arguments[0],F=arguments[1];if(!this.isEquivalentClass(T))return!1;var M=T;if(this._points.size()!==M._points.size())return!1;for(var P=0;P<this._points.size();P++)if(!S.equal(S._points.getCoordinate(P),M._points.getCoordinate(P),F))return!1;return!0}else return d.prototype.equalsExact.apply(this,arguments)},s.prototype.normalize=function(){for(var S=this,T=0;T<Math.trunc(this._points.size()/2);T++){var F=S._points.size()-1-T;if(!S._points.getCoordinate(T).equals(S._points.getCoordinate(F)))return S._points.getCoordinate(T).compareTo(S._points.getCoordinate(F))>0&&CoordinateSequences.reverse(S._points),null}},s.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},s.prototype.getBoundaryDimension=function(){return this.isClosed()?Dimension.FALSE:0},s.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},s.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},s.prototype.getDimension=function(){return 1},s.prototype.getLength=function(){return CGAlgorithms.computeLength(this._points)},s.prototype.getNumPoints=function(){return this._points.size()},s.prototype.reverse=function(){var S=this._points.copy();CoordinateSequences.reverse(S);var T=this.getFactory().createLineString(S);return T},s.prototype.compareToSameClass=function(){var S=this;if(arguments.length===1){for(var T=arguments[0],F=T,M=0,P=0;M<this._points.size()&&P<F._points.size();){var H=S._points.getCoordinate(M).compareTo(F._points.getCoordinate(P));if(H!==0)return H;M++,P++}return M<this._points.size()?1:P<F._points.size()?-1:0}else if(arguments.length===2){var J=arguments[0],K=arguments[1],oe=J;return K.compare(this._points,oe._points)}},s.prototype.apply=function(){var S=this;if(hasInterface(arguments[0],CoordinateFilter))for(var T=arguments[0],F=0;F<this._points.size();F++)T.filter(S._points.getCoordinate(F));else if(hasInterface(arguments[0],CoordinateSequenceFilter)){var M=arguments[0];if(this._points.size()===0)return null;for(var P=0;P<this._points.size()&&(M.filter(S._points,P),!M.isDone());P++);M.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(arguments[0],GeometryFilter)){var H=arguments[0];H.filter(this)}else if(hasInterface(arguments[0],GeometryComponentFilter)){var J=arguments[0];J.filter(this)}},s.prototype.getBoundary=function(){return new BoundaryOp(this).getBoundary()},s.prototype.isEquivalentClass=function(S){return S instanceof s},s.prototype.clone=function(){var S=d.prototype.clone.call(this);return S._points=this._points.clone(),S},s.prototype.getCoordinateN=function(S){return this._points.getCoordinate(S)},s.prototype.getGeometryType=function(){return"LineString"},s.prototype.copy=function(){return new s(this._points.copy(),this._factory)},s.prototype.getCoordinateSequence=function(){return this._points},s.prototype.isEmpty=function(){return this._points.size()===0},s.prototype.init=function(S){if(S===null&&(S=this.getFactory().getCoordinateSequenceFactory().create([])),S.size()===1)throw new IllegalArgumentException("Invalid number of points in LineString (found "+S.size()+" - must be 0 or >= 2)");this._points=S},s.prototype.isCoordinate=function(S){for(var T=this,F=0;F<this._points.size();F++)if(T._points.getCoordinate(F).equals(S))return!0;return!1},s.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},s.prototype.getPointN=function(S){return this.getFactory().createPoint(this._points.getCoordinate(S))},s.prototype.interfaces_=function(){return[Lineal]},s.prototype.getClass=function(){return s},f.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(s,f),s}(Geometry),Puntal=function d(){};Puntal.prototype.interfaces_=function d(){return[]};Puntal.prototype.getClass=function d(){return Puntal};var Point=function(d){function s(_,S){d.call(this,S),this._coordinates=_||null,this.init(this._coordinates)}d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s;var f={serialVersionUID:{configurable:!0}};return s.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Envelope;var S=new Envelope;return S.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),S},s.prototype.getSortIndex=function(){return d.SORTINDEX_POINT},s.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},s.prototype.equalsExact=function(){if(arguments.length===2){var S=arguments[0],T=arguments[1];return this.isEquivalentClass(S)?this.isEmpty()&&S.isEmpty()?!0:this.isEmpty()!==S.isEmpty()?!1:this.equal(S.getCoordinate(),this.getCoordinate(),T):!1}else return d.prototype.equalsExact.apply(this,arguments)},s.prototype.normalize=function(){},s.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},s.prototype.getBoundaryDimension=function(){return Dimension.FALSE},s.prototype.getDimension=function(){return 0},s.prototype.getNumPoints=function(){return this.isEmpty()?0:1},s.prototype.reverse=function(){return this.copy()},s.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},s.prototype.compareToSameClass=function(){if(arguments.length===1){var S=arguments[0],T=S;return this.getCoordinate().compareTo(T.getCoordinate())}else if(arguments.length===2){var F=arguments[0],M=arguments[1],P=F;return M.compare(this._coordinates,P._coordinates)}},s.prototype.apply=function(){if(hasInterface(arguments[0],CoordinateFilter)){var S=arguments[0];if(this.isEmpty())return null;S.filter(this.getCoordinate())}else if(hasInterface(arguments[0],CoordinateSequenceFilter)){var T=arguments[0];if(this.isEmpty())return null;T.filter(this._coordinates,0),T.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(arguments[0],GeometryFilter)){var F=arguments[0];F.filter(this)}else if(hasInterface(arguments[0],GeometryComponentFilter)){var M=arguments[0];M.filter(this)}},s.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},s.prototype.clone=function(){var S=d.prototype.clone.call(this);return S._coordinates=this._coordinates.clone(),S},s.prototype.getGeometryType=function(){return"Point"},s.prototype.copy=function(){return new s(this._coordinates.copy(),this._factory)},s.prototype.getCoordinateSequence=function(){return this._coordinates},s.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},s.prototype.isEmpty=function(){return this._coordinates.size()===0},s.prototype.init=function(S){S===null&&(S=this.getFactory().getCoordinateSequenceFactory().create([])),Assert.isTrue(S.size()<=1),this._coordinates=S},s.prototype.isSimple=function(){return!0},s.prototype.interfaces_=function(){return[Puntal]},s.prototype.getClass=function(){return s},f.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(s,f),s}(Geometry),Polygonal=function d(){};Polygonal.prototype.interfaces_=function d(){return[]};Polygonal.prototype.getClass=function d(){return Polygonal};var Polygon=function(d){function s(_,S,T){if(d.call(this,T),this._shell=null,this._holes=null,_===null&&(_=this.getFactory().createLinearRing()),S===null&&(S=[]),d.hasNullElements(S))throw new IllegalArgumentException("holes must not contain null elements");if(_.isEmpty()&&d.hasNonEmptyElements(S))throw new IllegalArgumentException("shell is empty but holes are not");this._shell=_,this._holes=S}d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s;var f={serialVersionUID:{configurable:!0}};return s.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},s.prototype.getSortIndex=function(){return d.SORTINDEX_POLYGON},s.prototype.getCoordinates=function(){var S=this;if(this.isEmpty())return[];for(var T=new Array(this.getNumPoints()).fill(null),F=-1,M=this._shell.getCoordinates(),P=0;P<M.length;P++)F++,T[F]=M[P];for(var H=0;H<this._holes.length;H++)for(var J=S._holes[H].getCoordinates(),K=0;K<J.length;K++)F++,T[F]=J[K];return T},s.prototype.getArea=function(){var S=this,T=0;T+=Math.abs(CGAlgorithms.signedArea(this._shell.getCoordinateSequence()));for(var F=0;F<this._holes.length;F++)T-=Math.abs(CGAlgorithms.signedArea(S._holes[F].getCoordinateSequence()));return T},s.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var S=this._shell.getCoordinateSequence(),T=this.getEnvelopeInternal(),F=0;F<5;F++){var M=S.getX(F);if(!(M===T.getMinX()||M===T.getMaxX()))return!1;var P=S.getY(F);if(!(P===T.getMinY()||P===T.getMaxY()))return!1}for(var H=S.getX(0),J=S.getY(0),K=1;K<=4;K++){var oe=S.getX(K),se=S.getY(K),ae=oe!==H,ge=se!==J;if(ae===ge)return!1;H=oe,J=se}return!0},s.prototype.equalsExact=function(){var S=this;if(arguments.length===2){var T=arguments[0],F=arguments[1];if(!this.isEquivalentClass(T))return!1;var M=T,P=this._shell,H=M._shell;if(!P.equalsExact(H,F)||this._holes.length!==M._holes.length)return!1;for(var J=0;J<this._holes.length;J++)if(!S._holes[J].equalsExact(M._holes[J],F))return!1;return!0}else return d.prototype.equalsExact.apply(this,arguments)},s.prototype.normalize=function(){var S=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var T=0;T<this._holes.length;T++)S.normalize(S._holes[T],!1);Arrays.sort(this._holes)}else if(arguments.length===2){var F=arguments[0],M=arguments[1];if(F.isEmpty())return null;var P=new Array(F.getCoordinates().length-1).fill(null);System.arraycopy(F.getCoordinates(),0,P,0,P.length);var H=CoordinateArrays.minCoordinate(F.getCoordinates());CoordinateArrays.scroll(P,H),System.arraycopy(P,0,F.getCoordinates(),0,P.length),F.getCoordinates()[P.length]=P[0],CGAlgorithms.isCCW(F.getCoordinates())===M&&CoordinateArrays.reverse(F.getCoordinates())}},s.prototype.getCoordinate=function(){return this._shell.getCoordinate()},s.prototype.getNumInteriorRing=function(){return this._holes.length},s.prototype.getBoundaryDimension=function(){return 1},s.prototype.getDimension=function(){return 2},s.prototype.getLength=function(){var S=this,T=0;T+=this._shell.getLength();for(var F=0;F<this._holes.length;F++)T+=S._holes[F].getLength();return T},s.prototype.getNumPoints=function(){for(var S=this,T=this._shell.getNumPoints(),F=0;F<this._holes.length;F++)T+=S._holes[F].getNumPoints();return T},s.prototype.reverse=function(){var S=this,T=this.copy();T._shell=this._shell.copy().reverse(),T._holes=new Array(this._holes.length).fill(null);for(var F=0;F<this._holes.length;F++)T._holes[F]=S._holes[F].copy().reverse();return T},s.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},s.prototype.compareToSameClass=function(){var S=this;if(arguments.length===1){var T=arguments[0],F=this._shell,M=T._shell;return F.compareToSameClass(M)}else if(arguments.length===2){var P=arguments[0],H=arguments[1],J=P,K=this._shell,oe=J._shell,se=K.compareToSameClass(oe,H);if(se!==0)return se;for(var ae=this.getNumInteriorRing(),ge=J.getNumInteriorRing(),he=0;he<ae&&he<ge;){var Be=S.getInteriorRingN(he),pe=J.getInteriorRingN(he),be=Be.compareToSameClass(pe,H);if(be!==0)return be;he++}return he<ae?1:he<ge?-1:0}},s.prototype.apply=function(S){var T=this;if(hasInterface(S,CoordinateFilter)){this._shell.apply(S);for(var F=0;F<this._holes.length;F++)T._holes[F].apply(S)}else if(hasInterface(S,CoordinateSequenceFilter)){if(this._shell.apply(S),!S.isDone())for(var M=0;M<this._holes.length&&(T._holes[M].apply(S),!S.isDone());M++);S.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(S,GeometryFilter))S.filter(this);else if(hasInterface(S,GeometryComponentFilter)){S.filter(this),this._shell.apply(S);for(var P=0;P<this._holes.length;P++)T._holes[P].apply(S)}},s.prototype.getBoundary=function(){var S=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var T=new Array(this._holes.length+1).fill(null);T[0]=this._shell;for(var F=0;F<this._holes.length;F++)T[F+1]=S._holes[F];return T.length<=1?this.getFactory().createLinearRing(T[0].getCoordinateSequence()):this.getFactory().createMultiLineString(T)},s.prototype.clone=function(){var S=this,T=d.prototype.clone.call(this);T._shell=this._shell.clone(),T._holes=new Array(this._holes.length).fill(null);for(var F=0;F<this._holes.length;F++)T._holes[F]=S._holes[F].clone();return T},s.prototype.getGeometryType=function(){return"Polygon"},s.prototype.copy=function(){for(var S=this,T=this._shell.copy(),F=new Array(this._holes.length).fill(null),M=0;M<F.length;M++)F[M]=S._holes[M].copy();return new s(T,F,this._factory)},s.prototype.getExteriorRing=function(){return this._shell},s.prototype.isEmpty=function(){return this._shell.isEmpty()},s.prototype.getInteriorRingN=function(S){return this._holes[S]},s.prototype.interfaces_=function(){return[Polygonal]},s.prototype.getClass=function(){return s},f.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(s,f),s}(Geometry),MultiPoint=function(d){function s(){d.apply(this,arguments)}d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s;var f={serialVersionUID:{configurable:!0}};return s.prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTIPOINT},s.prototype.isValid=function(){return!0},s.prototype.equalsExact=function(){if(arguments.length===2){var S=arguments[0],T=arguments[1];return this.isEquivalentClass(S)?d.prototype.equalsExact.call(this,S,T):!1}else return d.prototype.equalsExact.apply(this,arguments)},s.prototype.getCoordinate=function(){if(arguments.length===1){var S=arguments[0];return this._geometries[S].getCoordinate()}else return d.prototype.getCoordinate.apply(this,arguments)},s.prototype.getBoundaryDimension=function(){return Dimension.FALSE},s.prototype.getDimension=function(){return 0},s.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},s.prototype.getGeometryType=function(){return"MultiPoint"},s.prototype.copy=function(){for(var S=this,T=new Array(this._geometries.length).fill(null),F=0;F<T.length;F++)T[F]=S._geometries[F].copy();return new s(T,this._factory)},s.prototype.interfaces_=function(){return[Puntal]},s.prototype.getClass=function(){return s},f.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(s,f),s}(GeometryCollection),LinearRing=function(d){function s(_,S){_ instanceof Coordinate&&S instanceof GeometryFactory&&(_=S.getCoordinateSequenceFactory().create(_)),d.call(this,_,S),this.validateConstruction()}d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s;var f={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return s.prototype.getSortIndex=function(){return Geometry.SORTINDEX_LINEARRING},s.prototype.getBoundaryDimension=function(){return Dimension.FALSE},s.prototype.isClosed=function(){return this.isEmpty()?!0:d.prototype.isClosed.call(this)},s.prototype.reverse=function(){var S=this._points.copy();CoordinateSequences.reverse(S);var T=this.getFactory().createLinearRing(S);return T},s.prototype.validateConstruction=function(){if(!this.isEmpty()&&!d.prototype.isClosed.call(this))throw new IllegalArgumentException("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<s.MINIMUM_VALID_SIZE)throw new IllegalArgumentException("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},s.prototype.getGeometryType=function(){return"LinearRing"},s.prototype.copy=function(){return new s(this._points.copy(),this._factory)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},f.MINIMUM_VALID_SIZE.get=function(){return 4},f.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(s,f),s}(LineString),MultiPolygon=function(d){function s(){d.apply(this,arguments)}d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s;var f={serialVersionUID:{configurable:!0}};return s.prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTIPOLYGON},s.prototype.equalsExact=function(){if(arguments.length===2){var S=arguments[0],T=arguments[1];return this.isEquivalentClass(S)?d.prototype.equalsExact.call(this,S,T):!1}else return d.prototype.equalsExact.apply(this,arguments)},s.prototype.getBoundaryDimension=function(){return 1},s.prototype.getDimension=function(){return 2},s.prototype.reverse=function(){for(var S=this,T=this._geometries.length,F=new Array(T).fill(null),M=0;M<this._geometries.length;M++)F[M]=S._geometries[M].reverse();return this.getFactory().createMultiPolygon(F)},s.prototype.getBoundary=function(){var S=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var T=new ArrayList,F=0;F<this._geometries.length;F++)for(var M=S._geometries[F],P=M.getBoundary(),H=0;H<P.getNumGeometries();H++)T.add(P.getGeometryN(H));var J=new Array(T.size()).fill(null);return this.getFactory().createMultiLineString(T.toArray(J))},s.prototype.getGeometryType=function(){return"MultiPolygon"},s.prototype.copy=function(){for(var S=this,T=new Array(this._geometries.length).fill(null),F=0;F<T.length;F++)T[F]=S._geometries[F].copy();return new s(T,this._factory)},s.prototype.interfaces_=function(){return[Polygonal]},s.prototype.getClass=function(){return s},f.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(s,f),s}(GeometryCollection),GeometryEditor=function d(s){this._factory=s||null,this._isUserDataCopied=!1},staticAccessors$16={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};GeometryEditor.prototype.setCopyUserData=function d(s){this._isUserDataCopied=s};GeometryEditor.prototype.edit=function d(s,f){if(s===null)return null;var _=this.editInternal(s,f);return this._isUserDataCopied&&_.setUserData(s.getUserData()),_};GeometryEditor.prototype.editInternal=function d(s,f){return this._factory===null&&(this._factory=s.getFactory()),s instanceof GeometryCollection?this.editGeometryCollection(s,f):s instanceof Polygon?this.editPolygon(s,f):s instanceof Point?f.edit(s,this._factory):s instanceof LineString?f.edit(s,this._factory):(Assert.shouldNeverReachHere("Unsupported Geometry class: "+s.getClass().getName()),null)};GeometryEditor.prototype.editGeometryCollection=function d(s,f){for(var _=this,S=f.edit(s,this._factory),T=new ArrayList,F=0;F<S.getNumGeometries();F++){var M=_.edit(S.getGeometryN(F),f);M===null||M.isEmpty()||T.add(M)}return S.getClass()===MultiPoint?this._factory.createMultiPoint(T.toArray([])):S.getClass()===MultiLineString?this._factory.createMultiLineString(T.toArray([])):S.getClass()===MultiPolygon?this._factory.createMultiPolygon(T.toArray([])):this._factory.createGeometryCollection(T.toArray([]))};GeometryEditor.prototype.editPolygon=function d(s,f){var _=this,S=f.edit(s,this._factory);if(S===null&&(S=this._factory.createPolygon(null)),S.isEmpty())return S;var T=this.edit(S.getExteriorRing(),f);if(T===null||T.isEmpty())return this._factory.createPolygon();for(var F=new ArrayList,M=0;M<S.getNumInteriorRing();M++){var P=_.edit(S.getInteriorRingN(M),f);P===null||P.isEmpty()||F.add(P)}return this._factory.createPolygon(T,F.toArray([]))};GeometryEditor.prototype.interfaces_=function d(){return[]};GeometryEditor.prototype.getClass=function d(){return GeometryEditor};GeometryEditor.GeometryEditorOperation=function d(){};staticAccessors$16.NoOpGeometryOperation.get=function(){return NoOpGeometryOperation};staticAccessors$16.CoordinateOperation.get=function(){return CoordinateOperation};staticAccessors$16.CoordinateSequenceOperation.get=function(){return CoordinateSequenceOperation};Object.defineProperties(GeometryEditor,staticAccessors$16);var NoOpGeometryOperation=function d(){};NoOpGeometryOperation.prototype.edit=function d(s,f){return s};NoOpGeometryOperation.prototype.interfaces_=function d(){return[GeometryEditor.GeometryEditorOperation]};NoOpGeometryOperation.prototype.getClass=function d(){return NoOpGeometryOperation};var CoordinateOperation=function d(){};CoordinateOperation.prototype.edit=function d(s,f){var _=this.editCoordinates(s.getCoordinates(),s);return _===null?s:s instanceof LinearRing?f.createLinearRing(_):s instanceof LineString?f.createLineString(_):s instanceof Point?_.length>0?f.createPoint(_[0]):f.createPoint():s};CoordinateOperation.prototype.interfaces_=function d(){return[GeometryEditor.GeometryEditorOperation]};CoordinateOperation.prototype.getClass=function d(){return CoordinateOperation};var CoordinateSequenceOperation=function d(){};CoordinateSequenceOperation.prototype.edit=function d(s,f){return s instanceof LinearRing?f.createLinearRing(this.edit(s.getCoordinateSequence(),s)):s instanceof LineString?f.createLineString(this.edit(s.getCoordinateSequence(),s)):s instanceof Point?f.createPoint(this.edit(s.getCoordinateSequence(),s)):s};CoordinateSequenceOperation.prototype.interfaces_=function d(){return[GeometryEditor.GeometryEditorOperation]};CoordinateSequenceOperation.prototype.getClass=function d(){return CoordinateSequenceOperation};var CoordinateArraySequence=function d(){var s=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var f=arguments[0];this._coordinates=new Array(f).fill(null);for(var _=0;_<f;_++)s._coordinates[_]=new Coordinate}else if(hasInterface(arguments[0],CoordinateSequence)){var S=arguments[0];if(S===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=S.getDimension(),this._coordinates=new Array(S.size()).fill(null);for(var T=0;T<this._coordinates.length;T++)s._coordinates[T]=S.getCoordinateCopy(T)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var F=arguments[0],M=arguments[1];this._coordinates=F,this._dimension=M,F===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var P=arguments[0],H=arguments[1];this._coordinates=new Array(P).fill(null),this._dimension=H;for(var J=0;J<P;J++)s._coordinates[J]=new Coordinate}}},staticAccessors$18={serialVersionUID:{configurable:!0}};CoordinateArraySequence.prototype.setOrdinate=function d(s,f,_){switch(f){case CoordinateSequence.X:this._coordinates[s].x=_;break;case CoordinateSequence.Y:this._coordinates[s].y=_;break;case CoordinateSequence.Z:this._coordinates[s].z=_;break;default:throw new IllegalArgumentException("invalid ordinateIndex")}};CoordinateArraySequence.prototype.size=function d(){return this._coordinates.length};CoordinateArraySequence.prototype.getOrdinate=function d(s,f){switch(f){case CoordinateSequence.X:return this._coordinates[s].x;case CoordinateSequence.Y:return this._coordinates[s].y;case CoordinateSequence.Z:return this._coordinates[s].z}return Double.NaN};CoordinateArraySequence.prototype.getCoordinate=function d(){if(arguments.length===1){var s=arguments[0];return this._coordinates[s]}else if(arguments.length===2){var f=arguments[0],_=arguments[1];_.x=this._coordinates[f].x,_.y=this._coordinates[f].y,_.z=this._coordinates[f].z}};CoordinateArraySequence.prototype.getCoordinateCopy=function d(s){return new Coordinate(this._coordinates[s])};CoordinateArraySequence.prototype.getDimension=function d(){return this._dimension};CoordinateArraySequence.prototype.getX=function d(s){return this._coordinates[s].x};CoordinateArraySequence.prototype.clone=function d(){for(var s=this,f=new Array(this.size()).fill(null),_=0;_<this._coordinates.length;_++)f[_]=s._coordinates[_].clone();return new CoordinateArraySequence(f,this._dimension)};CoordinateArraySequence.prototype.expandEnvelope=function d(s){for(var f=this,_=0;_<this._coordinates.length;_++)s.expandToInclude(f._coordinates[_]);return s};CoordinateArraySequence.prototype.copy=function d(){for(var s=this,f=new Array(this.size()).fill(null),_=0;_<this._coordinates.length;_++)f[_]=s._coordinates[_].copy();return new CoordinateArraySequence(f,this._dimension)};CoordinateArraySequence.prototype.toString=function d(){var s=this;if(this._coordinates.length>0){var f=new StringBuffer(17*this._coordinates.length);f.append("("),f.append(this._coordinates[0]);for(var _=1;_<this._coordinates.length;_++)f.append(", "),f.append(s._coordinates[_]);return f.append(")"),f.toString()}else return"()"};CoordinateArraySequence.prototype.getY=function d(s){return this._coordinates[s].y};CoordinateArraySequence.prototype.toCoordinateArray=function d(){return this._coordinates};CoordinateArraySequence.prototype.interfaces_=function d(){return[CoordinateSequence,Serializable]};CoordinateArraySequence.prototype.getClass=function d(){return CoordinateArraySequence};staticAccessors$18.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(CoordinateArraySequence,staticAccessors$18);var CoordinateArraySequenceFactory=function d(){},staticAccessors$17={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};CoordinateArraySequenceFactory.prototype.readResolve=function d(){return CoordinateArraySequenceFactory.instance()};CoordinateArraySequenceFactory.prototype.create=function d(){if(arguments.length===1){if(arguments[0]instanceof Array){var s=arguments[0];return new CoordinateArraySequence(s)}else if(hasInterface(arguments[0],CoordinateSequence)){var f=arguments[0];return new CoordinateArraySequence(f)}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];return S>3&&(S=3),S<2?new CoordinateArraySequence(_):new CoordinateArraySequence(_,S)}};CoordinateArraySequenceFactory.prototype.interfaces_=function d(){return[CoordinateSequenceFactory,Serializable]};CoordinateArraySequenceFactory.prototype.getClass=function d(){return CoordinateArraySequenceFactory};CoordinateArraySequenceFactory.instance=function d(){return CoordinateArraySequenceFactory.instanceObject};staticAccessors$17.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};staticAccessors$17.instanceObject.get=function(){return new CoordinateArraySequenceFactory};Object.defineProperties(CoordinateArraySequenceFactory,staticAccessors$17);var HashMap=function(d){function s(){d.call(this),this.map_=new Map}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.get=function(_){return this.map_.get(_)||null},s.prototype.put=function(_,S){return this.map_.set(_,S),S},s.prototype.values=function(){for(var _=new ArrayList,S=this.map_.values(),T=S.next();!T.done;)_.add(T.value),T=S.next();return _},s.prototype.entrySet=function(){var _=new HashSet;return this.map_.entries().forEach(function(S){return _.add(S)}),_},s.prototype.size=function(){return this.map_.size()},s}(Map$1$1),PrecisionModel=function d(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=d.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Type){var s=arguments[0];this._modelType=s,s===d.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var f=arguments[0];this._modelType=d.FIXED,this.setScale(f)}else if(arguments[0]instanceof d){var _=arguments[0];this._modelType=_._modelType,this._scale=_._scale}}},staticAccessors$19={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};PrecisionModel.prototype.equals=function d(s){if(!(s instanceof PrecisionModel))return!1;var f=s;return this._modelType===f._modelType&&this._scale===f._scale};PrecisionModel.prototype.compareTo=function d(s){var f=s,_=this.getMaximumSignificantDigits(),S=f.getMaximumSignificantDigits();return new Integer(_).compareTo(new Integer(S))};PrecisionModel.prototype.getScale=function d(){return this._scale};PrecisionModel.prototype.isFloating=function d(){return this._modelType===PrecisionModel.FLOATING||this._modelType===PrecisionModel.FLOATING_SINGLE};PrecisionModel.prototype.getType=function d(){return this._modelType};PrecisionModel.prototype.toString=function d(){var s="UNKNOWN";return this._modelType===PrecisionModel.FLOATING?s="Floating":this._modelType===PrecisionModel.FLOATING_SINGLE?s="Floating-Single":this._modelType===PrecisionModel.FIXED&&(s="Fixed (Scale="+this.getScale()+")"),s};PrecisionModel.prototype.makePrecise=function d(){if(typeof arguments[0]=="number"){var s=arguments[0];if(Double.isNaN(s))return s;if(this._modelType===PrecisionModel.FLOATING_SINGLE){var f=s;return f}return this._modelType===PrecisionModel.FIXED?Math.round(s*this._scale)/this._scale:s}else if(arguments[0]instanceof Coordinate){var _=arguments[0];if(this._modelType===PrecisionModel.FLOATING)return null;_.x=this.makePrecise(_.x),_.y=this.makePrecise(_.y)}};PrecisionModel.prototype.getMaximumSignificantDigits=function d(){var s=16;return this._modelType===PrecisionModel.FLOATING?s=16:this._modelType===PrecisionModel.FLOATING_SINGLE?s=6:this._modelType===PrecisionModel.FIXED&&(s=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),s};PrecisionModel.prototype.setScale=function d(s){this._scale=Math.abs(s)};PrecisionModel.prototype.interfaces_=function d(){return[Serializable,Comparable]};PrecisionModel.prototype.getClass=function d(){return PrecisionModel};PrecisionModel.mostPrecise=function d(s,f){return s.compareTo(f)>=0?s:f};staticAccessors$19.serialVersionUID.get=function(){return 7777263578777804e3};staticAccessors$19.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(PrecisionModel,staticAccessors$19);var Type=function d(s){this._name=s||null,d.nameToTypeMap.put(s,this)},staticAccessors$1$1={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Type.prototype.readResolve=function d(){return Type.nameToTypeMap.get(this._name)};Type.prototype.toString=function d(){return this._name};Type.prototype.interfaces_=function d(){return[Serializable]};Type.prototype.getClass=function d(){return Type};staticAccessors$1$1.serialVersionUID.get=function(){return-552860263173159e4};staticAccessors$1$1.nameToTypeMap.get=function(){return new HashMap};Object.defineProperties(Type,staticAccessors$1$1);PrecisionModel.Type=Type;PrecisionModel.FIXED=new Type("FIXED");PrecisionModel.FLOATING=new Type("FLOATING");PrecisionModel.FLOATING_SINGLE=new Type("FLOATING SINGLE");var GeometryFactory=function d(){this._precisionModel=new PrecisionModel,this._SRID=0,this._coordinateSequenceFactory=d.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?hasInterface(arguments[0],CoordinateSequenceFactory)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof PrecisionModel&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},staticAccessors$2={serialVersionUID:{configurable:!0}};GeometryFactory.prototype.toGeometry=function d(s){return s.isNull()?this.createPoint(null):s.getMinX()===s.getMaxX()&&s.getMinY()===s.getMaxY()?this.createPoint(new Coordinate(s.getMinX(),s.getMinY())):s.getMinX()===s.getMaxX()||s.getMinY()===s.getMaxY()?this.createLineString([new Coordinate(s.getMinX(),s.getMinY()),new Coordinate(s.getMaxX(),s.getMaxY())]):this.createPolygon(this.createLinearRing([new Coordinate(s.getMinX(),s.getMinY()),new Coordinate(s.getMinX(),s.getMaxY()),new Coordinate(s.getMaxX(),s.getMaxY()),new Coordinate(s.getMaxX(),s.getMinY()),new Coordinate(s.getMinX(),s.getMinY())]),null)};GeometryFactory.prototype.createLineString=function d(s){if(s){if(s instanceof Array)return new LineString(this.getCoordinateSequenceFactory().create(s),this);if(hasInterface(s,CoordinateSequence))return new LineString(s,this)}else return new LineString(this.getCoordinateSequenceFactory().create([]),this)};GeometryFactory.prototype.createMultiLineString=function d(){if(arguments.length===0)return new MultiLineString(null,this);if(arguments.length===1){var s=arguments[0];return new MultiLineString(s,this)}};GeometryFactory.prototype.buildGeometry=function d(s){for(var f=null,_=!1,S=!1,T=s.iterator();T.hasNext();){var F=T.next(),M=F.getClass();f===null&&(f=M),M!==f&&(_=!0),F.isGeometryCollectionOrDerived()&&(S=!0)}if(f===null)return this.createGeometryCollection();if(_||S)return this.createGeometryCollection(GeometryFactory.toGeometryArray(s));var P=s.iterator().next(),H=s.size()>1;if(H){if(P instanceof Polygon)return this.createMultiPolygon(GeometryFactory.toPolygonArray(s));if(P instanceof LineString)return this.createMultiLineString(GeometryFactory.toLineStringArray(s));if(P instanceof Point)return this.createMultiPoint(GeometryFactory.toPointArray(s));Assert.shouldNeverReachHere("Unhandled class: "+P.getClass().getName())}return P};GeometryFactory.prototype.createMultiPointFromCoords=function d(s){return this.createMultiPoint(s!==null?this.getCoordinateSequenceFactory().create(s):null)};GeometryFactory.prototype.createPoint=function d(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Coordinate){var s=arguments[0];return this.createPoint(s!==null?this.getCoordinateSequenceFactory().create([s]):null)}else if(hasInterface(arguments[0],CoordinateSequence)){var f=arguments[0];return new Point(f,this)}}};GeometryFactory.prototype.getCoordinateSequenceFactory=function d(){return this._coordinateSequenceFactory};GeometryFactory.prototype.createPolygon=function d(){if(arguments.length===0)return new Polygon(null,null,this);if(arguments.length===1){if(hasInterface(arguments[0],CoordinateSequence)){var s=arguments[0];return this.createPolygon(this.createLinearRing(s))}else if(arguments[0]instanceof Array){var f=arguments[0];return this.createPolygon(this.createLinearRing(f))}else if(arguments[0]instanceof LinearRing){var _=arguments[0];return this.createPolygon(_,null)}}else if(arguments.length===2){var S=arguments[0],T=arguments[1];return new Polygon(S,T,this)}};GeometryFactory.prototype.getSRID=function d(){return this._SRID};GeometryFactory.prototype.createGeometryCollection=function d(){if(arguments.length===0)return new GeometryCollection(null,this);if(arguments.length===1){var s=arguments[0];return new GeometryCollection(s,this)}};GeometryFactory.prototype.createGeometry=function d(s){var f=new GeometryEditor(this);return f.edit(s,{edit:function(){if(arguments.length===2){var _=arguments[0];return this._coordinateSequenceFactory.create(_)}}})};GeometryFactory.prototype.getPrecisionModel=function d(){return this._precisionModel};GeometryFactory.prototype.createLinearRing=function d(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var s=arguments[0];return this.createLinearRing(s!==null?this.getCoordinateSequenceFactory().create(s):null)}else if(hasInterface(arguments[0],CoordinateSequence)){var f=arguments[0];return new LinearRing(f,this)}}};GeometryFactory.prototype.createMultiPolygon=function d(){if(arguments.length===0)return new MultiPolygon(null,this);if(arguments.length===1){var s=arguments[0];return new MultiPolygon(s,this)}};GeometryFactory.prototype.createMultiPoint=function d(){var s=this;if(arguments.length===0)return new MultiPoint(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var f=arguments[0];return new MultiPoint(f,this)}else if(arguments[0]instanceof Array){var _=arguments[0];return this.createMultiPoint(_!==null?this.getCoordinateSequenceFactory().create(_):null)}else if(hasInterface(arguments[0],CoordinateSequence)){var S=arguments[0];if(S===null)return this.createMultiPoint(new Array(0).fill(null));for(var T=new Array(S.size()).fill(null),F=0;F<S.size();F++){var M=s.getCoordinateSequenceFactory().create(1,S.getDimension());CoordinateSequences.copy(S,F,M,0,1),T[F]=s.createPoint(M)}return this.createMultiPoint(T)}}};GeometryFactory.prototype.interfaces_=function d(){return[Serializable]};GeometryFactory.prototype.getClass=function d(){return GeometryFactory};GeometryFactory.toMultiPolygonArray=function d(s){var f=new Array(s.size()).fill(null);return s.toArray(f)};GeometryFactory.toGeometryArray=function d(s){if(s===null)return null;var f=new Array(s.size()).fill(null);return s.toArray(f)};GeometryFactory.getDefaultCoordinateSequenceFactory=function d(){return CoordinateArraySequenceFactory.instance()};GeometryFactory.toMultiLineStringArray=function d(s){var f=new Array(s.size()).fill(null);return s.toArray(f)};GeometryFactory.toLineStringArray=function d(s){var f=new Array(s.size()).fill(null);return s.toArray(f)};GeometryFactory.toMultiPointArray=function d(s){var f=new Array(s.size()).fill(null);return s.toArray(f)};GeometryFactory.toLinearRingArray=function d(s){var f=new Array(s.size()).fill(null);return s.toArray(f)};GeometryFactory.toPointArray=function d(s){var f=new Array(s.size()).fill(null);return s.toArray(f)};GeometryFactory.toPolygonArray=function d(s){var f=new Array(s.size()).fill(null);return s.toArray(f)};GeometryFactory.createPointFromInternalCoord=function d(s,f){return f.getPrecisionModel().makePrecise(s),f.getFactory().createPoint(s)};staticAccessors$2.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(GeometryFactory,staticAccessors$2);var geometryTypes=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],GeoJSONParser=function d(s){this.geometryFactory=s||new GeometryFactory};GeoJSONParser.prototype.read=function d(s){var f;typeof s=="string"?f=JSON.parse(s):f=s;var _=f.type;if(!parse[_])throw new Error("Unknown GeoJSON type: "+f.type);return geometryTypes.indexOf(_)!==-1?parse[_].apply(this,[f.coordinates]):_==="GeometryCollection"?parse[_].apply(this,[f.geometries]):parse[_].apply(this,[f])};GeoJSONParser.prototype.write=function d(s){var f=s.getGeometryType();if(!extract[f])throw new Error("Geometry is not supported");return extract[f].apply(this,[s])};var parse={Feature:function(d){var s={};for(var f in d)s[f]=d[f];if(d.geometry){var _=d.geometry.type;if(!parse[_])throw new Error("Unknown GeoJSON type: "+d.type);s.geometry=this.read(d.geometry)}return d.bbox&&(s.bbox=parse.bbox.apply(this,[d.bbox])),s},FeatureCollection:function(d){var s=this,f={};if(d.features){f.features=[];for(var _=0;_<d.features.length;++_)f.features.push(s.read(d.features[_]))}return d.bbox&&(f.bbox=this.parse.bbox.apply(this,[d.bbox])),f},coordinates:function(d){for(var s=[],f=0;f<d.length;++f){var _=d[f];s.push(new Coordinate(_[0],_[1]))}return s},bbox:function(d){return this.geometryFactory.createLinearRing([new Coordinate(d[0],d[1]),new Coordinate(d[2],d[1]),new Coordinate(d[2],d[3]),new Coordinate(d[0],d[3]),new Coordinate(d[0],d[1])])},Point:function(d){var s=new Coordinate(d[0],d[1]);return this.geometryFactory.createPoint(s)},MultiPoint:function(d){for(var s=this,f=[],_=0;_<d.length;++_)f.push(parse.Point.apply(s,[d[_]]));return this.geometryFactory.createMultiPoint(f)},LineString:function(d){var s=parse.coordinates.apply(this,[d]);return this.geometryFactory.createLineString(s)},MultiLineString:function(d){for(var s=this,f=[],_=0;_<d.length;++_)f.push(parse.LineString.apply(s,[d[_]]));return this.geometryFactory.createMultiLineString(f)},Polygon:function(d){for(var s=this,f=parse.coordinates.apply(this,[d[0]]),_=this.geometryFactory.createLinearRing(f),S=[],T=1;T<d.length;++T){var F=d[T],M=parse.coordinates.apply(s,[F]),P=s.geometryFactory.createLinearRing(M);S.push(P)}return this.geometryFactory.createPolygon(_,S)},MultiPolygon:function(d){for(var s=this,f=[],_=0;_<d.length;++_){var S=d[_];f.push(parse.Polygon.apply(s,[S]))}return this.geometryFactory.createMultiPolygon(f)},GeometryCollection:function(d){for(var s=this,f=[],_=0;_<d.length;++_){var S=d[_];f.push(s.read(S))}return this.geometryFactory.createGeometryCollection(f)}},extract={coordinate:function(d){return[d.x,d.y]},Point:function(d){var s=extract.coordinate.apply(this,[d.getCoordinate()]);return{type:"Point",coordinates:s}},MultiPoint:function(d){for(var s=this,f=[],_=0;_<d._geometries.length;++_){var S=d._geometries[_],T=extract.Point.apply(s,[S]);f.push(T.coordinates)}return{type:"MultiPoint",coordinates:f}},LineString:function(d){for(var s=this,f=[],_=d.getCoordinates(),S=0;S<_.length;++S){var T=_[S];f.push(extract.coordinate.apply(s,[T]))}return{type:"LineString",coordinates:f}},MultiLineString:function(d){for(var s=this,f=[],_=0;_<d._geometries.length;++_){var S=d._geometries[_],T=extract.LineString.apply(s,[S]);f.push(T.coordinates)}return{type:"MultiLineString",coordinates:f}},Polygon:function(d){var s=this,f=[],_=extract.LineString.apply(this,[d._shell]);f.push(_.coordinates);for(var S=0;S<d._holes.length;++S){var T=d._holes[S],F=extract.LineString.apply(s,[T]);f.push(F.coordinates)}return{type:"Polygon",coordinates:f}},MultiPolygon:function(d){for(var s=this,f=[],_=0;_<d._geometries.length;++_){var S=d._geometries[_],T=extract.Polygon.apply(s,[S]);f.push(T.coordinates)}return{type:"MultiPolygon",coordinates:f}},GeometryCollection:function(d){for(var s=this,f=[],_=0;_<d._geometries.length;++_){var S=d._geometries[_],T=S.getGeometryType();f.push(extract[T].apply(s,[S]))}return{type:"GeometryCollection",geometries:f}}},GeoJSONReader=function d(s){this.geometryFactory=s||new GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new GeoJSONParser(this.geometryFactory)};GeoJSONReader.prototype.read=function d(s){var f=this.parser.read(s);return this.precisionModel.getType()===PrecisionModel.FIXED&&this.reducePrecision(f),f};GeoJSONReader.prototype.reducePrecision=function d(s){var f=this,_,S;if(s.coordinate)this.precisionModel.makePrecise(s.coordinate);else if(s.points)for(_=0,S=s.points.length;_<S;_++)f.precisionModel.makePrecise(s.points[_]);else if(s.geometries)for(_=0,S=s.geometries.length;_<S;_++)f.reducePrecision(s.geometries[_])};var GeoJSONWriter=function d(){this.parser=new GeoJSONParser(this.geometryFactory)};GeoJSONWriter.prototype.write=function d(s){return this.parser.write(s)};var Position=function d(){},staticAccessors$20={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Position.prototype.interfaces_=function d(){return[]};Position.prototype.getClass=function d(){return Position};Position.opposite=function d(s){return s===Position.LEFT?Position.RIGHT:s===Position.RIGHT?Position.LEFT:s};staticAccessors$20.ON.get=function(){return 0};staticAccessors$20.LEFT.get=function(){return 1};staticAccessors$20.RIGHT.get=function(){return 2};Object.defineProperties(Position,staticAccessors$20);function EmptyStackException(d){this.message=d||""}EmptyStackException.prototype=new Error;EmptyStackException.prototype.name="EmptyStackException";function Stack(){this.array_=[]}Stack.prototype=new List;Stack.prototype.add=function(d){return this.array_.push(d),!0};Stack.prototype.get=function(d){if(d<0||d>=this.size())throw new Error;return this.array_[d]};Stack.prototype.push=function(d){return this.array_.push(d),d};Stack.prototype.pop=function(d){if(this.array_.length===0)throw new EmptyStackException;return this.array_.pop()};Stack.prototype.peek=function(){if(this.array_.length===0)throw new EmptyStackException;return this.array_[this.array_.length-1]};Stack.prototype.empty=function(){return this.array_.length===0};Stack.prototype.isEmpty=function(){return this.empty()};Stack.prototype.search=function(d){return this.array_.indexOf(d)};Stack.prototype.size=function(){return this.array_.length};Stack.prototype.toArray=function(){for(var d=this,s=[],f=0,_=this.array_.length;f<_;f++)s.push(d.array_[f]);return s};var RightmostEdgeFinder=function d(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};RightmostEdgeFinder.prototype.getCoordinate=function d(){return this._minCoord};RightmostEdgeFinder.prototype.getRightmostSide=function d(s,f){var _=this.getRightmostSideOfSegment(s,f);return _<0&&(_=this.getRightmostSideOfSegment(s,f-1)),_<0&&(this._minCoord=null,this.checkForRightmostCoordinate(s)),_};RightmostEdgeFinder.prototype.findRightmostEdgeAtVertex=function d(){var s=this._minDe.getEdge().getCoordinates();Assert.isTrue(this._minIndex>0&&this._minIndex<s.length,"rightmost point expected to be interior vertex of edge");var f=s[this._minIndex-1],_=s[this._minIndex+1],S=CGAlgorithms.computeOrientation(this._minCoord,_,f),T=!1;(f.y<this._minCoord.y&&_.y<this._minCoord.y&&S===CGAlgorithms.COUNTERCLOCKWISE||f.y>this._minCoord.y&&_.y>this._minCoord.y&&S===CGAlgorithms.CLOCKWISE)&&(T=!0),T&&(this._minIndex=this._minIndex-1)};RightmostEdgeFinder.prototype.getRightmostSideOfSegment=function d(s,f){var _=s.getEdge(),S=_.getCoordinates();if(f<0||f+1>=S.length||S[f].y===S[f+1].y)return-1;var T=Position.LEFT;return S[f].y<S[f+1].y&&(T=Position.RIGHT),T};RightmostEdgeFinder.prototype.getEdge=function d(){return this._orientedDe};RightmostEdgeFinder.prototype.checkForRightmostCoordinate=function d(s){for(var f=this,_=s.getEdge().getCoordinates(),S=0;S<_.length-1;S++)(f._minCoord===null||_[S].x>f._minCoord.x)&&(f._minDe=s,f._minIndex=S,f._minCoord=_[S])};RightmostEdgeFinder.prototype.findRightmostEdgeAtNode=function d(){var s=this._minDe.getNode(),f=s.getEdges();this._minDe=f.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};RightmostEdgeFinder.prototype.findEdge=function d(s){for(var f=this,_=s.iterator();_.hasNext();){var S=_.next();S.isForward()&&f.checkForRightmostCoordinate(S)}Assert.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var T=this.getRightmostSide(this._minDe,this._minIndex);T===Position.LEFT&&(this._orientedDe=this._minDe.getSym())};RightmostEdgeFinder.prototype.interfaces_=function d(){return[]};RightmostEdgeFinder.prototype.getClass=function d(){return RightmostEdgeFinder};var TopologyException=function(d){function s(f,_){d.call(this,s.msgWithCoord(f,_)),this.pt=_?new Coordinate(_):null,this.name="TopologyException"}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.getCoordinate=function(){return this.pt},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.msgWithCoord=function(_,S){return S?_:_+" [ "+S+" ]"},s}(RuntimeException),LinkedList=function d(){this.array_=[]};LinkedList.prototype.addLast=function d(s){this.array_.push(s)};LinkedList.prototype.removeFirst=function d(){return this.array_.shift()};LinkedList.prototype.isEmpty=function d(){return this.array_.length===0};var BufferSubgraph=function d(){this._finder=null,this._dirEdgeList=new ArrayList,this._nodes=new ArrayList,this._rightMostCoord=null,this._env=null,this._finder=new RightmostEdgeFinder};BufferSubgraph.prototype.clearVisitedEdges=function d(){for(var s=this._dirEdgeList.iterator();s.hasNext();){var f=s.next();f.setVisited(!1)}};BufferSubgraph.prototype.getRightmostCoordinate=function d(){return this._rightMostCoord};BufferSubgraph.prototype.computeNodeDepth=function d(s){for(var f=this,_=null,S=s.getEdges().iterator();S.hasNext();){var T=S.next();if(T.isVisited()||T.getSym().isVisited()){_=T;break}}if(_===null)throw new TopologyException("unable to find edge to compute depths at "+s.getCoordinate());s.getEdges().computeDepths(_);for(var F=s.getEdges().iterator();F.hasNext();){var M=F.next();M.setVisited(!0),f.copySymDepths(M)}};BufferSubgraph.prototype.computeDepth=function d(s){this.clearVisitedEdges();var f=this._finder.getEdge();f.setEdgeDepths(Position.RIGHT,s),this.copySymDepths(f),this.computeDepths(f)};BufferSubgraph.prototype.create=function d(s){this.addReachable(s),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};BufferSubgraph.prototype.findResultEdges=function d(){for(var s=this._dirEdgeList.iterator();s.hasNext();){var f=s.next();f.getDepth(Position.RIGHT)>=1&&f.getDepth(Position.LEFT)<=0&&!f.isInteriorAreaEdge()&&f.setInResult(!0)}};BufferSubgraph.prototype.computeDepths=function d(s){var f=this,_=new HashSet,S=new LinkedList,T=s.getNode();for(S.addLast(T),_.add(T),s.setVisited(!0);!S.isEmpty();){var F=S.removeFirst();_.add(F),f.computeNodeDepth(F);for(var M=F.getEdges().iterator();M.hasNext();){var P=M.next(),H=P.getSym();if(!H.isVisited()){var J=H.getNode();_.contains(J)||(S.addLast(J),_.add(J))}}}};BufferSubgraph.prototype.compareTo=function d(s){var f=s;return this._rightMostCoord.x<f._rightMostCoord.x?-1:this._rightMostCoord.x>f._rightMostCoord.x?1:0};BufferSubgraph.prototype.getEnvelope=function d(){if(this._env===null){for(var s=new Envelope,f=this._dirEdgeList.iterator();f.hasNext();)for(var _=f.next(),S=_.getEdge().getCoordinates(),T=0;T<S.length-1;T++)s.expandToInclude(S[T]);this._env=s}return this._env};BufferSubgraph.prototype.addReachable=function d(s){var f=this,_=new Stack;for(_.add(s);!_.empty();){var S=_.pop();f.add(S,_)}};BufferSubgraph.prototype.copySymDepths=function d(s){var f=s.getSym();f.setDepth(Position.LEFT,s.getDepth(Position.RIGHT)),f.setDepth(Position.RIGHT,s.getDepth(Position.LEFT))};BufferSubgraph.prototype.add=function d(s,f){var _=this;s.setVisited(!0),this._nodes.add(s);for(var S=s.getEdges().iterator();S.hasNext();){var T=S.next();_._dirEdgeList.add(T);var F=T.getSym(),M=F.getNode();M.isVisited()||f.push(M)}};BufferSubgraph.prototype.getNodes=function d(){return this._nodes};BufferSubgraph.prototype.getDirectedEdges=function d(){return this._dirEdgeList};BufferSubgraph.prototype.interfaces_=function d(){return[Comparable]};BufferSubgraph.prototype.getClass=function d(){return BufferSubgraph};var TopologyLocation=function d(){var s=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var f=arguments[0];this.init(f.length)}else if(Number.isInteger(arguments[0])){var _=arguments[0];this.init(1),this.location[Position.ON]=_}else if(arguments[0]instanceof d){var S=arguments[0];if(this.init(S.location.length),S!==null)for(var T=0;T<this.location.length;T++)s.location[T]=S.location[T]}}else if(arguments.length===3){var F=arguments[0],M=arguments[1],P=arguments[2];this.init(3),this.location[Position.ON]=F,this.location[Position.LEFT]=M,this.location[Position.RIGHT]=P}};TopologyLocation.prototype.setAllLocations=function d(s){for(var f=this,_=0;_<this.location.length;_++)f.location[_]=s};TopologyLocation.prototype.isNull=function d(){for(var s=this,f=0;f<this.location.length;f++)if(s.location[f]!==Location.NONE)return!1;return!0};TopologyLocation.prototype.setAllLocationsIfNull=function d(s){for(var f=this,_=0;_<this.location.length;_++)f.location[_]===Location.NONE&&(f.location[_]=s)};TopologyLocation.prototype.isLine=function d(){return this.location.length===1};TopologyLocation.prototype.merge=function d(s){var f=this;if(s.location.length>this.location.length){var _=new Array(3).fill(null);_[Position.ON]=this.location[Position.ON],_[Position.LEFT]=Location.NONE,_[Position.RIGHT]=Location.NONE,this.location=_}for(var S=0;S<this.location.length;S++)f.location[S]===Location.NONE&&S<s.location.length&&(f.location[S]=s.location[S])};TopologyLocation.prototype.getLocations=function d(){return this.location};TopologyLocation.prototype.flip=function d(){if(this.location.length<=1)return null;var s=this.location[Position.LEFT];this.location[Position.LEFT]=this.location[Position.RIGHT],this.location[Position.RIGHT]=s};TopologyLocation.prototype.toString=function d(){var s=new StringBuffer;return this.location.length>1&&s.append(Location.toLocationSymbol(this.location[Position.LEFT])),s.append(Location.toLocationSymbol(this.location[Position.ON])),this.location.length>1&&s.append(Location.toLocationSymbol(this.location[Position.RIGHT])),s.toString()};TopologyLocation.prototype.setLocations=function d(s,f,_){this.location[Position.ON]=s,this.location[Position.LEFT]=f,this.location[Position.RIGHT]=_};TopologyLocation.prototype.get=function d(s){return s<this.location.length?this.location[s]:Location.NONE};TopologyLocation.prototype.isArea=function d(){return this.location.length>1};TopologyLocation.prototype.isAnyNull=function d(){for(var s=this,f=0;f<this.location.length;f++)if(s.location[f]===Location.NONE)return!0;return!1};TopologyLocation.prototype.setLocation=function d(){if(arguments.length===1){var s=arguments[0];this.setLocation(Position.ON,s)}else if(arguments.length===2){var f=arguments[0],_=arguments[1];this.location[f]=_}};TopologyLocation.prototype.init=function d(s){this.location=new Array(s).fill(null),this.setAllLocations(Location.NONE)};TopologyLocation.prototype.isEqualOnSide=function d(s,f){return this.location[f]===s.location[f]};TopologyLocation.prototype.allPositionsEqual=function d(s){for(var f=this,_=0;_<this.location.length;_++)if(f.location[_]!==s)return!1;return!0};TopologyLocation.prototype.interfaces_=function d(){return[]};TopologyLocation.prototype.getClass=function d(){return TopologyLocation};var Label=function d(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var s=arguments[0];this.elt[0]=new TopologyLocation(s),this.elt[1]=new TopologyLocation(s)}else if(arguments[0]instanceof d){var f=arguments[0];this.elt[0]=new TopologyLocation(f.elt[0]),this.elt[1]=new TopologyLocation(f.elt[1])}}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this.elt[0]=new TopologyLocation(Location.NONE),this.elt[1]=new TopologyLocation(Location.NONE),this.elt[_].setLocation(S)}else if(arguments.length===3){var T=arguments[0],F=arguments[1],M=arguments[2];this.elt[0]=new TopologyLocation(T,F,M),this.elt[1]=new TopologyLocation(T,F,M)}else if(arguments.length===4){var P=arguments[0],H=arguments[1],J=arguments[2],K=arguments[3];this.elt[0]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),this.elt[1]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),this.elt[P].setLocations(H,J,K)}};Label.prototype.getGeometryCount=function d(){var s=0;return this.elt[0].isNull()||s++,this.elt[1].isNull()||s++,s};Label.prototype.setAllLocations=function d(s,f){this.elt[s].setAllLocations(f)};Label.prototype.isNull=function d(s){return this.elt[s].isNull()};Label.prototype.setAllLocationsIfNull=function d(){if(arguments.length===1){var s=arguments[0];this.setAllLocationsIfNull(0,s),this.setAllLocationsIfNull(1,s)}else if(arguments.length===2){var f=arguments[0],_=arguments[1];this.elt[f].setAllLocationsIfNull(_)}};Label.prototype.isLine=function d(s){return this.elt[s].isLine()};Label.prototype.merge=function d(s){for(var f=this,_=0;_<2;_++)f.elt[_]===null&&s.elt[_]!==null?f.elt[_]=new TopologyLocation(s.elt[_]):f.elt[_].merge(s.elt[_])};Label.prototype.flip=function d(){this.elt[0].flip(),this.elt[1].flip()};Label.prototype.getLocation=function d(){if(arguments.length===1){var s=arguments[0];return this.elt[s].get(Position.ON)}else if(arguments.length===2){var f=arguments[0],_=arguments[1];return this.elt[f].get(_)}};Label.prototype.toString=function d(){var s=new StringBuffer;return this.elt[0]!==null&&(s.append("A:"),s.append(this.elt[0].toString())),this.elt[1]!==null&&(s.append(" B:"),s.append(this.elt[1].toString())),s.toString()};Label.prototype.isArea=function d(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var s=arguments[0];return this.elt[s].isArea()}};Label.prototype.isAnyNull=function d(s){return this.elt[s].isAnyNull()};Label.prototype.setLocation=function d(){if(arguments.length===2){var s=arguments[0],f=arguments[1];this.elt[s].setLocation(Position.ON,f)}else if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];this.elt[_].setLocation(S,T)}};Label.prototype.isEqualOnSide=function d(s,f){return this.elt[0].isEqualOnSide(s.elt[0],f)&&this.elt[1].isEqualOnSide(s.elt[1],f)};Label.prototype.allPositionsEqual=function d(s,f){return this.elt[s].allPositionsEqual(f)};Label.prototype.toLine=function d(s){this.elt[s].isArea()&&(this.elt[s]=new TopologyLocation(this.elt[s].location[0]))};Label.prototype.interfaces_=function d(){return[]};Label.prototype.getClass=function d(){return Label};Label.toLineLabel=function d(s){for(var f=new Label(Location.NONE),_=0;_<2;_++)f.setLocation(_,s.getLocation(_));return f};var EdgeRing=function d(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new ArrayList,this._pts=new ArrayList,this._label=new Label(Location.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ArrayList,this._geometryFactory=null;var s=arguments[0],f=arguments[1];this._geometryFactory=f,this.computePoints(s),this.computeRing()};EdgeRing.prototype.computeRing=function d(){var s=this;if(this._ring!==null)return null;for(var f=new Array(this._pts.size()).fill(null),_=0;_<this._pts.size();_++)f[_]=s._pts.get(_);this._ring=this._geometryFactory.createLinearRing(f),this._isHole=CGAlgorithms.isCCW(this._ring.getCoordinates())};EdgeRing.prototype.isIsolated=function d(){return this._label.getGeometryCount()===1};EdgeRing.prototype.computePoints=function d(s){var f=this;this._startDe=s;var _=s,S=!0;do{if(_===null)throw new TopologyException("Found null DirectedEdge");if(_.getEdgeRing()===f)throw new TopologyException("Directed Edge visited twice during ring-building at "+_.getCoordinate());f._edges.add(_);var T=_.getLabel();Assert.isTrue(T.isArea()),f.mergeLabel(T),f.addPoints(_.getEdge(),_.isForward(),S),S=!1,f.setEdgeRing(_,f),_=f.getNext(_)}while(_!==this._startDe)};EdgeRing.prototype.getLinearRing=function d(){return this._ring};EdgeRing.prototype.getCoordinate=function d(s){return this._pts.get(s)};EdgeRing.prototype.computeMaxNodeDegree=function d(){var s=this;this._maxNodeDegree=0;var f=this._startDe;do{var _=f.getNode(),S=_.getEdges().getOutgoingDegree(s);S>s._maxNodeDegree&&(s._maxNodeDegree=S),f=s.getNext(f)}while(f!==this._startDe);this._maxNodeDegree*=2};EdgeRing.prototype.addPoints=function d(s,f,_){var S=this,T=s.getCoordinates();if(f){var F=1;_&&(F=0);for(var M=F;M<T.length;M++)S._pts.add(T[M])}else{var P=T.length-2;_&&(P=T.length-1);for(var H=P;H>=0;H--)S._pts.add(T[H])}};EdgeRing.prototype.isHole=function d(){return this._isHole};EdgeRing.prototype.setInResult=function d(){var s=this._startDe;do s.getEdge().setInResult(!0),s=s.getNext();while(s!==this._startDe)};EdgeRing.prototype.containsPoint=function d(s){var f=this.getLinearRing(),_=f.getEnvelopeInternal();if(!_.contains(s)||!CGAlgorithms.isPointInRing(s,f.getCoordinates()))return!1;for(var S=this._holes.iterator();S.hasNext();){var T=S.next();if(T.containsPoint(s))return!1}return!0};EdgeRing.prototype.addHole=function d(s){this._holes.add(s)};EdgeRing.prototype.isShell=function d(){return this._shell===null};EdgeRing.prototype.getLabel=function d(){return this._label};EdgeRing.prototype.getEdges=function d(){return this._edges};EdgeRing.prototype.getMaxNodeDegree=function d(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};EdgeRing.prototype.getShell=function d(){return this._shell};EdgeRing.prototype.mergeLabel=function d(){if(arguments.length===1){var s=arguments[0];this.mergeLabel(s,0),this.mergeLabel(s,1)}else if(arguments.length===2){var f=arguments[0],_=arguments[1],S=f.getLocation(_,Position.RIGHT);if(S===Location.NONE)return null;if(this._label.getLocation(_)===Location.NONE)return this._label.setLocation(_,S),null}};EdgeRing.prototype.setShell=function d(s){this._shell=s,s!==null&&s.addHole(this)};EdgeRing.prototype.toPolygon=function d(s){for(var f=this,_=new Array(this._holes.size()).fill(null),S=0;S<this._holes.size();S++)_[S]=f._holes.get(S).getLinearRing();var T=s.createPolygon(this.getLinearRing(),_);return T};EdgeRing.prototype.interfaces_=function d(){return[]};EdgeRing.prototype.getClass=function d(){return EdgeRing};var MinimalEdgeRing=function(d){function s(){var f=arguments[0],_=arguments[1];d.call(this,f,_)}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.setEdgeRing=function(_,S){_.setMinEdgeRing(S)},s.prototype.getNext=function(_){return _.getNextMin()},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(EdgeRing),MaximalEdgeRing=function(d){function s(){var f=arguments[0],_=arguments[1];d.call(this,f,_)}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.buildMinimalRings=function(){var _=this,S=new ArrayList,T=this._startDe;do{if(T.getMinEdgeRing()===null){var F=new MinimalEdgeRing(T,_._geometryFactory);S.add(F)}T=T.getNext()}while(T!==this._startDe);return S},s.prototype.setEdgeRing=function(_,S){_.setEdgeRing(S)},s.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var _=this,S=this._startDe;do{var T=S.getNode();T.getEdges().linkMinimalDirectedEdges(_),S=S.getNext()}while(S!==this._startDe)},s.prototype.getNext=function(_){return _.getNext()},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(EdgeRing),GraphComponent=function d(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var s=arguments[0];this._label=s}}};GraphComponent.prototype.setVisited=function d(s){this._isVisited=s};GraphComponent.prototype.setInResult=function d(s){this._isInResult=s};GraphComponent.prototype.isCovered=function d(){return this._isCovered};GraphComponent.prototype.isCoveredSet=function d(){return this._isCoveredSet};GraphComponent.prototype.setLabel=function d(s){this._label=s};GraphComponent.prototype.getLabel=function d(){return this._label};GraphComponent.prototype.setCovered=function d(s){this._isCovered=s,this._isCoveredSet=!0};GraphComponent.prototype.updateIM=function d(s){Assert.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(s)};GraphComponent.prototype.isInResult=function d(){return this._isInResult};GraphComponent.prototype.isVisited=function d(){return this._isVisited};GraphComponent.prototype.interfaces_=function d(){return[]};GraphComponent.prototype.getClass=function d(){return GraphComponent};var Node$1=function(d){function s(){d.call(this),this._coord=null,this._edges=null;var f=arguments[0],_=arguments[1];this._coord=f,this._edges=_,this._label=new Label(0,Location.NONE)}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.isIncidentEdgeInResult=function(){for(var _=this.getEdges().getEdges().iterator();_.hasNext();){var S=_.next();if(S.getEdge().isInResult())return!0}return!1},s.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},s.prototype.getCoordinate=function(){return this._coord},s.prototype.print=function(_){_.println("node "+this._coord+" lbl: "+this._label)},s.prototype.computeIM=function(_){},s.prototype.computeMergedLocation=function(_,S){var T=Location.NONE;if(T=this._label.getLocation(S),!_.isNull(S)){var F=_.getLocation(S);T!==Location.BOUNDARY&&(T=F)}return T},s.prototype.setLabel=function(){if(arguments.length===2){var _=arguments[0],S=arguments[1];this._label===null?this._label=new Label(_,S):this._label.setLocation(_,S)}else return d.prototype.setLabel.apply(this,arguments)},s.prototype.getEdges=function(){return this._edges},s.prototype.mergeLabel=function(){var _=this;if(arguments[0]instanceof s){var S=arguments[0];this.mergeLabel(S._label)}else if(arguments[0]instanceof Label)for(var T=arguments[0],F=0;F<2;F++){var M=_.computeMergedLocation(T,F),P=_._label.getLocation(F);P===Location.NONE&&_._label.setLocation(F,M)}},s.prototype.add=function(_){this._edges.insert(_),_.setNode(this)},s.prototype.setLabelBoundary=function(_){if(this._label===null)return null;var S=Location.NONE;this._label!==null&&(S=this._label.getLocation(_));var T=null;switch(S){case Location.BOUNDARY:T=Location.INTERIOR;break;case Location.INTERIOR:T=Location.BOUNDARY;break;default:T=Location.BOUNDARY;break}this._label.setLocation(_,T)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(GraphComponent),NodeMap=function d(){this.nodeMap=new TreeMap,this.nodeFact=null;var s=arguments[0];this.nodeFact=s};NodeMap.prototype.find=function d(s){return this.nodeMap.get(s)};NodeMap.prototype.addNode=function d(){if(arguments[0]instanceof Coordinate){var s=arguments[0],f=this.nodeMap.get(s);return f===null&&(f=this.nodeFact.createNode(s),this.nodeMap.put(s,f)),f}else if(arguments[0]instanceof Node$1){var _=arguments[0],S=this.nodeMap.get(_.getCoordinate());return S===null?(this.nodeMap.put(_.getCoordinate(),_),_):(S.mergeLabel(_),S)}};NodeMap.prototype.print=function d(s){for(var f=this.iterator();f.hasNext();){var _=f.next();_.print(s)}};NodeMap.prototype.iterator=function d(){return this.nodeMap.values().iterator()};NodeMap.prototype.values=function d(){return this.nodeMap.values()};NodeMap.prototype.getBoundaryNodes=function d(s){for(var f=new ArrayList,_=this.iterator();_.hasNext();){var S=_.next();S.getLabel().getLocation(s)===Location.BOUNDARY&&f.add(S)}return f};NodeMap.prototype.add=function d(s){var f=s.getCoordinate(),_=this.addNode(f);_.add(s)};NodeMap.prototype.interfaces_=function d(){return[]};NodeMap.prototype.getClass=function d(){return NodeMap};var Quadrant=function d(){},staticAccessors$21={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Quadrant.prototype.interfaces_=function d(){return[]};Quadrant.prototype.getClass=function d(){return Quadrant};Quadrant.isNorthern=function d(s){return s===Quadrant.NE||s===Quadrant.NW};Quadrant.isOpposite=function d(s,f){if(s===f)return!1;var _=(s-f+4)%4;return _===2};Quadrant.commonHalfPlane=function d(s,f){if(s===f)return s;var _=(s-f+4)%4;if(_===2)return-1;var S=s<f?s:f,T=s>f?s:f;return S===0&&T===3?3:S};Quadrant.isInHalfPlane=function d(s,f){return f===Quadrant.SE?s===Quadrant.SE||s===Quadrant.SW:s===f||s===f+1};Quadrant.quadrant=function d(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],f=arguments[1];if(s===0&&f===0)throw new IllegalArgumentException("Cannot compute the quadrant for point ( "+s+", "+f+" )");return s>=0?f>=0?Quadrant.NE:Quadrant.SE:f>=0?Quadrant.NW:Quadrant.SW}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Coordinate){var _=arguments[0],S=arguments[1];if(S.x===_.x&&S.y===_.y)throw new IllegalArgumentException("Cannot compute the quadrant for two identical points "+_);return S.x>=_.x?S.y>=_.y?Quadrant.NE:Quadrant.SE:S.y>=_.y?Quadrant.NW:Quadrant.SW}};staticAccessors$21.NE.get=function(){return 0};staticAccessors$21.NW.get=function(){return 1};staticAccessors$21.SW.get=function(){return 2};staticAccessors$21.SE.get=function(){return 3};Object.defineProperties(Quadrant,staticAccessors$21);var EdgeEnd=function d(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var s=arguments[0];this._edge=s}else if(arguments.length===3){var f=arguments[0],_=arguments[1],S=arguments[2],T=null;this._edge=f,this.init(_,S),this._label=T}else if(arguments.length===4){var F=arguments[0],M=arguments[1],P=arguments[2],H=arguments[3];this._edge=F,this.init(M,P),this._label=H}};EdgeEnd.prototype.compareDirection=function d(s){return this._dx===s._dx&&this._dy===s._dy?0:this._quadrant>s._quadrant?1:this._quadrant<s._quadrant?-1:CGAlgorithms.computeOrientation(s._p0,s._p1,this._p1)};EdgeEnd.prototype.getDy=function d(){return this._dy};EdgeEnd.prototype.getCoordinate=function d(){return this._p0};EdgeEnd.prototype.setNode=function d(s){this._node=s};EdgeEnd.prototype.print=function d(s){var f=Math.atan2(this._dy,this._dx),_=this.getClass().getName(),S=_.lastIndexOf("."),T=_.substring(S+1);s.print("  "+T+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+f+"   "+this._label)};EdgeEnd.prototype.compareTo=function d(s){var f=s;return this.compareDirection(f)};EdgeEnd.prototype.getDirectedCoordinate=function d(){return this._p1};EdgeEnd.prototype.getDx=function d(){return this._dx};EdgeEnd.prototype.getLabel=function d(){return this._label};EdgeEnd.prototype.getEdge=function d(){return this._edge};EdgeEnd.prototype.getQuadrant=function d(){return this._quadrant};EdgeEnd.prototype.getNode=function d(){return this._node};EdgeEnd.prototype.toString=function d(){var s=Math.atan2(this._dy,this._dx),f=this.getClass().getName(),_=f.lastIndexOf("."),S=f.substring(_+1);return"  "+S+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+s+"   "+this._label};EdgeEnd.prototype.computeLabel=function d(s){};EdgeEnd.prototype.init=function d(s,f){this._p0=s,this._p1=f,this._dx=f.x-s.x,this._dy=f.y-s.y,this._quadrant=Quadrant.quadrant(this._dx,this._dy),Assert.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};EdgeEnd.prototype.interfaces_=function d(){return[Comparable]};EdgeEnd.prototype.getClass=function d(){return EdgeEnd};var DirectedEdge=function(d){function s(){var f=arguments[0],_=arguments[1];if(d.call(this,f),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=_,_)this.init(f.getCoordinate(0),f.getCoordinate(1));else{var S=f.getNumPoints()-1;this.init(f.getCoordinate(S),f.getCoordinate(S-1))}this.computeDirectedLabel()}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.getNextMin=function(){return this._nextMin},s.prototype.getDepth=function(_){return this._depth[_]},s.prototype.setVisited=function(_){this._isVisited=_},s.prototype.computeDirectedLabel=function(){this._label=new Label(this._edge.getLabel()),this._isForward||this._label.flip()},s.prototype.getNext=function(){return this._next},s.prototype.setDepth=function(_,S){if(this._depth[_]!==-999&&this._depth[_]!==S)throw new TopologyException("assigned depths do not match",this.getCoordinate());this._depth[_]=S},s.prototype.isInteriorAreaEdge=function(){for(var _=this,S=!0,T=0;T<2;T++)_._label.isArea(T)&&_._label.getLocation(T,Position.LEFT)===Location.INTERIOR&&_._label.getLocation(T,Position.RIGHT)===Location.INTERIOR||(S=!1);return S},s.prototype.setNextMin=function(_){this._nextMin=_},s.prototype.print=function(_){d.prototype.print.call(this,_),_.print(" "+this._depth[Position.LEFT]+"/"+this._depth[Position.RIGHT]),_.print(" ("+this.getDepthDelta()+")"),this._isInResult&&_.print(" inResult")},s.prototype.setMinEdgeRing=function(_){this._minEdgeRing=_},s.prototype.isLineEdge=function(){var _=this._label.isLine(0)||this._label.isLine(1),S=!this._label.isArea(0)||this._label.allPositionsEqual(0,Location.EXTERIOR),T=!this._label.isArea(1)||this._label.allPositionsEqual(1,Location.EXTERIOR);return _&&S&&T},s.prototype.setEdgeRing=function(_){this._edgeRing=_},s.prototype.getMinEdgeRing=function(){return this._minEdgeRing},s.prototype.getDepthDelta=function(){var _=this._edge.getDepthDelta();return this._isForward||(_=-_),_},s.prototype.setInResult=function(_){this._isInResult=_},s.prototype.getSym=function(){return this._sym},s.prototype.isForward=function(){return this._isForward},s.prototype.getEdge=function(){return this._edge},s.prototype.printEdge=function(_){this.print(_),_.print(" "),this._isForward?this._edge.print(_):this._edge.printReverse(_)},s.prototype.setSym=function(_){this._sym=_},s.prototype.setVisitedEdge=function(_){this.setVisited(_),this._sym.setVisited(_)},s.prototype.setEdgeDepths=function(_,S){var T=this.getEdge().getDepthDelta();this._isForward||(T=-T);var F=1;_===Position.LEFT&&(F=-1);var M=Position.opposite(_),P=T*F,H=S+P;this.setDepth(_,S),this.setDepth(M,H)},s.prototype.getEdgeRing=function(){return this._edgeRing},s.prototype.isInResult=function(){return this._isInResult},s.prototype.setNext=function(_){this._next=_},s.prototype.isVisited=function(){return this._isVisited},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.depthFactor=function(_,S){return _===Location.EXTERIOR&&S===Location.INTERIOR?1:_===Location.INTERIOR&&S===Location.EXTERIOR?-1:0},s}(EdgeEnd),NodeFactory=function d(){};NodeFactory.prototype.createNode=function d(s){return new Node$1(s,null)};NodeFactory.prototype.interfaces_=function d(){return[]};NodeFactory.prototype.getClass=function d(){return NodeFactory};var PlanarGraph=function d(){if(this._edges=new ArrayList,this._nodes=null,this._edgeEndList=new ArrayList,arguments.length===0)this._nodes=new NodeMap(new NodeFactory);else if(arguments.length===1){var s=arguments[0];this._nodes=new NodeMap(s)}};PlanarGraph.prototype.printEdges=function d(s){var f=this;s.println("Edges:");for(var _=0;_<this._edges.size();_++){s.println("edge "+_+":");var S=f._edges.get(_);S.print(s),S.eiList.print(s)}};PlanarGraph.prototype.find=function d(s){return this._nodes.find(s)};PlanarGraph.prototype.addNode=function d(){if(arguments[0]instanceof Node$1){var s=arguments[0];return this._nodes.addNode(s)}else if(arguments[0]instanceof Coordinate){var f=arguments[0];return this._nodes.addNode(f)}};PlanarGraph.prototype.getNodeIterator=function d(){return this._nodes.iterator()};PlanarGraph.prototype.linkResultDirectedEdges=function d(){for(var s=this._nodes.iterator();s.hasNext();){var f=s.next();f.getEdges().linkResultDirectedEdges()}};PlanarGraph.prototype.debugPrintln=function d(s){System.out.println(s)};PlanarGraph.prototype.isBoundaryNode=function d(s,f){var _=this._nodes.find(f);if(_===null)return!1;var S=_.getLabel();return S!==null&&S.getLocation(s)===Location.BOUNDARY};PlanarGraph.prototype.linkAllDirectedEdges=function d(){for(var s=this._nodes.iterator();s.hasNext();){var f=s.next();f.getEdges().linkAllDirectedEdges()}};PlanarGraph.prototype.matchInSameDirection=function d(s,f,_,S){return s.equals(_)?CGAlgorithms.computeOrientation(s,f,S)===CGAlgorithms.COLLINEAR&&Quadrant.quadrant(s,f)===Quadrant.quadrant(_,S):!1};PlanarGraph.prototype.getEdgeEnds=function d(){return this._edgeEndList};PlanarGraph.prototype.debugPrint=function d(s){System.out.print(s)};PlanarGraph.prototype.getEdgeIterator=function d(){return this._edges.iterator()};PlanarGraph.prototype.findEdgeInSameDirection=function d(s,f){for(var _=this,S=0;S<this._edges.size();S++){var T=_._edges.get(S),F=T.getCoordinates();if(_.matchInSameDirection(s,f,F[0],F[1])||_.matchInSameDirection(s,f,F[F.length-1],F[F.length-2]))return T}return null};PlanarGraph.prototype.insertEdge=function d(s){this._edges.add(s)};PlanarGraph.prototype.findEdgeEnd=function d(s){for(var f=this.getEdgeEnds().iterator();f.hasNext();){var _=f.next();if(_.getEdge()===s)return _}return null};PlanarGraph.prototype.addEdges=function d(s){for(var f=this,_=s.iterator();_.hasNext();){var S=_.next();f._edges.add(S);var T=new DirectedEdge(S,!0),F=new DirectedEdge(S,!1);T.setSym(F),F.setSym(T),f.add(T),f.add(F)}};PlanarGraph.prototype.add=function d(s){this._nodes.add(s),this._edgeEndList.add(s)};PlanarGraph.prototype.getNodes=function d(){return this._nodes.values()};PlanarGraph.prototype.findEdge=function d(s,f){for(var _=this,S=0;S<this._edges.size();S++){var T=_._edges.get(S),F=T.getCoordinates();if(s.equals(F[0])&&f.equals(F[1]))return T}return null};PlanarGraph.prototype.interfaces_=function d(){return[]};PlanarGraph.prototype.getClass=function d(){return PlanarGraph};PlanarGraph.linkResultDirectedEdges=function d(s){for(var f=s.iterator();f.hasNext();){var _=f.next();_.getEdges().linkResultDirectedEdges()}};var PolygonBuilder=function d(){this._geometryFactory=null,this._shellList=new ArrayList;var s=arguments[0];this._geometryFactory=s};PolygonBuilder.prototype.sortShellsAndHoles=function d(s,f,_){for(var S=s.iterator();S.hasNext();){var T=S.next();T.isHole()?_.add(T):f.add(T)}};PolygonBuilder.prototype.computePolygons=function d(s){for(var f=this,_=new ArrayList,S=s.iterator();S.hasNext();){var T=S.next(),F=T.toPolygon(f._geometryFactory);_.add(F)}return _};PolygonBuilder.prototype.placeFreeHoles=function d(s,f){for(var _=this,S=f.iterator();S.hasNext();){var T=S.next();if(T.getShell()===null){var F=_.findEdgeRingContaining(T,s);if(F===null)throw new TopologyException("unable to assign hole to a shell",T.getCoordinate(0));T.setShell(F)}}};PolygonBuilder.prototype.buildMinimalEdgeRings=function d(s,f,_){for(var S=this,T=new ArrayList,F=s.iterator();F.hasNext();){var M=F.next();if(M.getMaxNodeDegree()>2){M.linkDirectedEdgesForMinimalEdgeRings();var P=M.buildMinimalRings(),H=S.findShell(P);H!==null?(S.placePolygonHoles(H,P),f.add(H)):_.addAll(P)}else T.add(M)}return T};PolygonBuilder.prototype.containsPoint=function d(s){for(var f=this._shellList.iterator();f.hasNext();){var _=f.next();if(_.containsPoint(s))return!0}return!1};PolygonBuilder.prototype.buildMaximalEdgeRings=function d(s){for(var f=this,_=new ArrayList,S=s.iterator();S.hasNext();){var T=S.next();if(T.isInResult()&&T.getLabel().isArea()&&T.getEdgeRing()===null){var F=new MaximalEdgeRing(T,f._geometryFactory);_.add(F),F.setInResult()}}return _};PolygonBuilder.prototype.placePolygonHoles=function d(s,f){for(var _=f.iterator();_.hasNext();){var S=_.next();S.isHole()&&S.setShell(s)}};PolygonBuilder.prototype.getPolygons=function d(){var s=this.computePolygons(this._shellList);return s};PolygonBuilder.prototype.findEdgeRingContaining=function d(s,f){for(var _=s.getLinearRing(),S=_.getEnvelopeInternal(),T=_.getCoordinateN(0),F=null,M=null,P=f.iterator();P.hasNext();){var H=P.next(),J=H.getLinearRing(),K=J.getEnvelopeInternal();F!==null&&(M=F.getLinearRing().getEnvelopeInternal());var oe=!1;K.contains(S)&&CGAlgorithms.isPointInRing(T,J.getCoordinates())&&(oe=!0),oe&&(F===null||M.contains(K))&&(F=H)}return F};PolygonBuilder.prototype.findShell=function d(s){for(var f=0,_=null,S=s.iterator();S.hasNext();){var T=S.next();T.isHole()||(_=T,f++)}return Assert.isTrue(f<=1,"found two shells in MinimalEdgeRing list"),_};PolygonBuilder.prototype.add=function d(){if(arguments.length===1){var s=arguments[0];this.add(s.getEdgeEnds(),s.getNodes())}else if(arguments.length===2){var f=arguments[0],_=arguments[1];PlanarGraph.linkResultDirectedEdges(_);var S=this.buildMaximalEdgeRings(f),T=new ArrayList,F=this.buildMinimalEdgeRings(S,this._shellList,T);this.sortShellsAndHoles(F,this._shellList,T),this.placeFreeHoles(this._shellList,T)}};PolygonBuilder.prototype.interfaces_=function d(){return[]};PolygonBuilder.prototype.getClass=function d(){return PolygonBuilder};var Boundable=function d(){};Boundable.prototype.getBounds=function d(){};Boundable.prototype.interfaces_=function d(){return[]};Boundable.prototype.getClass=function d(){return Boundable};var ItemBoundable=function d(){this._bounds=null,this._item=null;var s=arguments[0],f=arguments[1];this._bounds=s,this._item=f};ItemBoundable.prototype.getItem=function d(){return this._item};ItemBoundable.prototype.getBounds=function d(){return this._bounds};ItemBoundable.prototype.interfaces_=function d(){return[Boundable,Serializable]};ItemBoundable.prototype.getClass=function d(){return ItemBoundable};var PriorityQueue=function d(){this._size=null,this._items=null,this._size=0,this._items=new ArrayList,this._items.add(null)};PriorityQueue.prototype.poll=function d(){if(this.isEmpty())return null;var s=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),s};PriorityQueue.prototype.size=function d(){return this._size};PriorityQueue.prototype.reorder=function d(s){for(var f=this,_=null,S=this._items.get(s);s*2<=this._size&&(_=s*2,_!==f._size&&f._items.get(_+1).compareTo(f._items.get(_))<0&&_++,f._items.get(_).compareTo(S)<0);s=_)f._items.set(s,f._items.get(_));this._items.set(s,S)};PriorityQueue.prototype.clear=function d(){this._size=0,this._items.clear()};PriorityQueue.prototype.isEmpty=function d(){return this._size===0};PriorityQueue.prototype.add=function d(s){var f=this;this._items.add(null),this._size+=1;var _=this._size;for(this._items.set(0,s);s.compareTo(this._items.get(Math.trunc(_/2)))<0;_/=2)f._items.set(_,f._items.get(Math.trunc(_/2)));this._items.set(_,s)};PriorityQueue.prototype.interfaces_=function d(){return[]};PriorityQueue.prototype.getClass=function d(){return PriorityQueue};var ItemVisitor=function d(){};ItemVisitor.prototype.visitItem=function d(s){};ItemVisitor.prototype.interfaces_=function d(){return[]};ItemVisitor.prototype.getClass=function d(){return ItemVisitor};var SpatialIndex=function d(){};SpatialIndex.prototype.insert=function d(s,f){};SpatialIndex.prototype.remove=function d(s,f){};SpatialIndex.prototype.query=function d(){};SpatialIndex.prototype.interfaces_=function d(){return[]};SpatialIndex.prototype.getClass=function d(){return SpatialIndex};var AbstractNode=function d(){if(this._childBoundables=new ArrayList,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var s=arguments[0];this._level=s}}},staticAccessors$22={serialVersionUID:{configurable:!0}};AbstractNode.prototype.getLevel=function d(){return this._level};AbstractNode.prototype.size=function d(){return this._childBoundables.size()};AbstractNode.prototype.getChildBoundables=function d(){return this._childBoundables};AbstractNode.prototype.addChildBoundable=function d(s){Assert.isTrue(this._bounds===null),this._childBoundables.add(s)};AbstractNode.prototype.isEmpty=function d(){return this._childBoundables.isEmpty()};AbstractNode.prototype.getBounds=function d(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};AbstractNode.prototype.interfaces_=function d(){return[Boundable,Serializable]};AbstractNode.prototype.getClass=function d(){return AbstractNode};staticAccessors$22.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(AbstractNode,staticAccessors$22);var Collections=function d(){};Collections.reverseOrder=function d(){return{compare:function(f,_){return _.compareTo(f)}}};Collections.min=function d(s){return Collections.sort(s),s.get(0)};Collections.sort=function d(s,f){var _=s.toArray();f?Arrays.sort(_,f):Arrays.sort(_);for(var S=s.iterator(),T=0,F=_.length;T<F;T++)S.next(),S.set(_[T])};Collections.singletonList=function d(s){var f=new ArrayList;return f.add(s),f};var BoundablePair=function d(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var s=arguments[0],f=arguments[1],_=arguments[2];this._boundable1=s,this._boundable2=f,this._itemDistance=_,this._distance=this.distance()};BoundablePair.prototype.expandToQueue=function d(s,f){var _=BoundablePair.isComposite(this._boundable1),S=BoundablePair.isComposite(this._boundable2);if(_&&S)return BoundablePair.area(this._boundable1)>BoundablePair.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,s,f),null):(this.expand(this._boundable2,this._boundable1,s,f),null);if(_)return this.expand(this._boundable1,this._boundable2,s,f),null;if(S)return this.expand(this._boundable2,this._boundable1,s,f),null;throw new IllegalArgumentException("neither boundable is composite")};BoundablePair.prototype.isLeaves=function d(){return!(BoundablePair.isComposite(this._boundable1)||BoundablePair.isComposite(this._boundable2))};BoundablePair.prototype.compareTo=function d(s){var f=s;return this._distance<f._distance?-1:this._distance>f._distance?1:0};BoundablePair.prototype.expand=function d(s,f,_,S){for(var T=this,F=s.getChildBoundables(),M=F.iterator();M.hasNext();){var P=M.next(),H=new BoundablePair(P,f,T._itemDistance);H.getDistance()<S&&_.add(H)}};BoundablePair.prototype.getBoundable=function d(s){return s===0?this._boundable1:this._boundable2};BoundablePair.prototype.getDistance=function d(){return this._distance};BoundablePair.prototype.distance=function d(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};BoundablePair.prototype.interfaces_=function d(){return[Comparable]};BoundablePair.prototype.getClass=function d(){return BoundablePair};BoundablePair.area=function d(s){return s.getBounds().getArea()};BoundablePair.isComposite=function d(s){return s instanceof AbstractNode};var AbstractSTRtree=function d(){if(this._root=null,this._built=!1,this._itemBoundables=new ArrayList,this._nodeCapacity=null,arguments.length===0){var s=d.DEFAULT_NODE_CAPACITY;this._nodeCapacity=s}else if(arguments.length===1){var f=arguments[0];Assert.isTrue(f>1,"Node capacity must be greater than 1"),this._nodeCapacity=f}},staticAccessors$23={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};AbstractSTRtree.prototype.getNodeCapacity=function d(){return this._nodeCapacity};AbstractSTRtree.prototype.lastNode=function d(s){return s.get(s.size()-1)};AbstractSTRtree.prototype.size=function d(){var s=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var f=arguments[0],_=0,S=f.getChildBoundables().iterator();S.hasNext();){var T=S.next();T instanceof AbstractNode?_+=s.size(T):T instanceof ItemBoundable&&(_+=1)}return _}};AbstractSTRtree.prototype.removeItem=function d(s,f){for(var _=null,S=s.getChildBoundables().iterator();S.hasNext();){var T=S.next();T instanceof ItemBoundable&&T.getItem()===f&&(_=T)}return _!==null?(s.getChildBoundables().remove(_),!0):!1};AbstractSTRtree.prototype.itemsTree=function d(){var s=this;if(arguments.length===0){this.build();var f=this.itemsTree(this._root);return f===null?new ArrayList:f}else if(arguments.length===1){for(var _=arguments[0],S=new ArrayList,T=_.getChildBoundables().iterator();T.hasNext();){var F=T.next();if(F instanceof AbstractNode){var M=s.itemsTree(F);M!==null&&S.add(M)}else F instanceof ItemBoundable?S.add(F.getItem()):Assert.shouldNeverReachHere()}return S.size()<=0?null:S}};AbstractSTRtree.prototype.insert=function d(s,f){Assert.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new ItemBoundable(s,f))};AbstractSTRtree.prototype.boundablesAtLevel=function d(){var s=this;if(arguments.length===1){var f=arguments[0],_=new ArrayList;return this.boundablesAtLevel(f,this._root,_),_}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2];if(Assert.isTrue(S>-2),T.getLevel()===S)return F.add(T),null;for(var M=T.getChildBoundables().iterator();M.hasNext();){var P=M.next();P instanceof AbstractNode?s.boundablesAtLevel(S,P,F):(Assert.isTrue(P instanceof ItemBoundable),S===-1&&F.add(P))}return null}};AbstractSTRtree.prototype.query=function d(){var s=this;if(arguments.length===1){var f=arguments[0];this.build();var _=new ArrayList;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),f)&&this.query(f,this._root,_),_}else if(arguments.length===2){var S=arguments[0],T=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),S)&&this.query(S,this._root,T)}else if(arguments.length===3){if(hasInterface(arguments[2],ItemVisitor)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode)for(var F=arguments[0],M=arguments[1],P=arguments[2],H=M.getChildBoundables(),J=0;J<H.size();J++){var K=H.get(J);s.getIntersectsOp().intersects(K.getBounds(),F)&&(K instanceof AbstractNode?s.query(F,K,P):K instanceof ItemBoundable?P.visitItem(K.getItem()):Assert.shouldNeverReachHere())}else if(hasInterface(arguments[2],List)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode)for(var oe=arguments[0],se=arguments[1],ae=arguments[2],ge=se.getChildBoundables(),he=0;he<ge.size();he++){var Be=ge.get(he);s.getIntersectsOp().intersects(Be.getBounds(),oe)&&(Be instanceof AbstractNode?s.query(oe,Be,ae):Be instanceof ItemBoundable?ae.add(Be.getItem()):Assert.shouldNeverReachHere())}}};AbstractSTRtree.prototype.build=function d(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};AbstractSTRtree.prototype.getRoot=function d(){return this.build(),this._root};AbstractSTRtree.prototype.remove=function d(){var s=this;if(arguments.length===2){var f=arguments[0],_=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),f)?this.remove(f,this._root,_):!1}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2],M=this.removeItem(T,F);if(M)return!0;for(var P=null,H=T.getChildBoundables().iterator();H.hasNext();){var J=H.next();if(s.getIntersectsOp().intersects(J.getBounds(),S)&&J instanceof AbstractNode&&(M=s.remove(S,J,F),M)){P=J;break}}return P!==null&&P.getChildBoundables().isEmpty()&&T.getChildBoundables().remove(P),M}};AbstractSTRtree.prototype.createHigherLevels=function d(s,f){Assert.isTrue(!s.isEmpty());var _=this.createParentBoundables(s,f+1);return _.size()===1?_.get(0):this.createHigherLevels(_,f+1)};AbstractSTRtree.prototype.depth=function d(){var s=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var f=arguments[0],_=0,S=f.getChildBoundables().iterator();S.hasNext();){var T=S.next();if(T instanceof AbstractNode){var F=s.depth(T);F>_&&(_=F)}}return _+1}};AbstractSTRtree.prototype.createParentBoundables=function d(s,f){var _=this;Assert.isTrue(!s.isEmpty());var S=new ArrayList;S.add(this.createNode(f));var T=new ArrayList(s);Collections.sort(T,this.getComparator());for(var F=T.iterator();F.hasNext();){var M=F.next();_.lastNode(S).getChildBoundables().size()===_.getNodeCapacity()&&S.add(_.createNode(f)),_.lastNode(S).addChildBoundable(M)}return S};AbstractSTRtree.prototype.isEmpty=function d(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};AbstractSTRtree.prototype.interfaces_=function d(){return[Serializable]};AbstractSTRtree.prototype.getClass=function d(){return AbstractSTRtree};AbstractSTRtree.compareDoubles=function d(s,f){return s>f?1:s<f?-1:0};staticAccessors$23.IntersectsOp.get=function(){return IntersectsOp};staticAccessors$23.serialVersionUID.get=function(){return-3886435814360241e3};staticAccessors$23.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(AbstractSTRtree,staticAccessors$23);var IntersectsOp=function d(){},ItemDistance=function d(){};ItemDistance.prototype.distance=function d(s,f){};ItemDistance.prototype.interfaces_=function d(){return[]};ItemDistance.prototype.getClass=function d(){return ItemDistance};var STRtree=function(d){function s(_){_=_||s.DEFAULT_NODE_CAPACITY,d.call(this,_)}d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s;var f={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return s.prototype.createParentBoundablesFromVerticalSlices=function(S,T){var F=this;Assert.isTrue(S.length>0);for(var M=new ArrayList,P=0;P<S.length;P++)M.addAll(F.createParentBoundablesFromVerticalSlice(S[P],T));return M},s.prototype.createNode=function(S){return new STRtreeNode(S)},s.prototype.size=function(){return arguments.length===0?d.prototype.size.call(this):d.prototype.size.apply(this,arguments)},s.prototype.insert=function(){if(arguments.length===2){var S=arguments[0],T=arguments[1];if(S.isNull())return null;d.prototype.insert.call(this,S,T)}else return d.prototype.insert.apply(this,arguments)},s.prototype.getIntersectsOp=function(){return s.intersectsOp},s.prototype.verticalSlices=function(S,T){for(var F=Math.trunc(Math.ceil(S.size()/T)),M=new Array(T).fill(null),P=S.iterator(),H=0;H<T;H++){M[H]=new ArrayList;for(var J=0;P.hasNext()&&J<F;){var K=P.next();M[H].add(K),J++}}return M},s.prototype.query=function(){if(arguments.length===1){var S=arguments[0];return d.prototype.query.call(this,S)}else if(arguments.length===2){var T=arguments[0],F=arguments[1];d.prototype.query.call(this,T,F)}else if(arguments.length===3){if(hasInterface(arguments[2],ItemVisitor)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode){var M=arguments[0],P=arguments[1],H=arguments[2];d.prototype.query.call(this,M,P,H)}else if(hasInterface(arguments[2],List)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode){var J=arguments[0],K=arguments[1],oe=arguments[2];d.prototype.query.call(this,J,K,oe)}}},s.prototype.getComparator=function(){return s.yComparator},s.prototype.createParentBoundablesFromVerticalSlice=function(S,T){return d.prototype.createParentBoundables.call(this,S,T)},s.prototype.remove=function(){if(arguments.length===2){var S=arguments[0],T=arguments[1];return d.prototype.remove.call(this,S,T)}else return d.prototype.remove.apply(this,arguments)},s.prototype.depth=function(){return arguments.length===0?d.prototype.depth.call(this):d.prototype.depth.apply(this,arguments)},s.prototype.createParentBoundables=function(S,T){Assert.isTrue(!S.isEmpty());var F=Math.trunc(Math.ceil(S.size()/this.getNodeCapacity())),M=new ArrayList(S);Collections.sort(M,s.xComparator);var P=this.verticalSlices(M,Math.trunc(Math.ceil(Math.sqrt(F))));return this.createParentBoundablesFromVerticalSlices(P,T)},s.prototype.nearestNeighbour=function(){if(arguments.length===1){if(hasInterface(arguments[0],ItemDistance)){var S=arguments[0],T=new BoundablePair(this.getRoot(),this.getRoot(),S);return this.nearestNeighbour(T)}else if(arguments[0]instanceof BoundablePair){var F=arguments[0];return this.nearestNeighbour(F,Double.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof s&&hasInterface(arguments[1],ItemDistance)){var M=arguments[0],P=arguments[1],H=new BoundablePair(this.getRoot(),M.getRoot(),P);return this.nearestNeighbour(H)}else if(arguments[0]instanceof BoundablePair&&typeof arguments[1]=="number"){var J=arguments[0],K=arguments[1],oe=K,se=null,ae=new PriorityQueue;for(ae.add(J);!ae.isEmpty()&&oe>0;){var ge=ae.poll(),he=ge.getDistance();if(he>=oe)break;ge.isLeaves()?(oe=he,se=ge):ge.expandToQueue(ae,oe)}return[se.getBoundable(0).getItem(),se.getBoundable(1).getItem()]}}else if(arguments.length===3){var Be=arguments[0],pe=arguments[1],be=arguments[2],Re=new ItemBoundable(Be,pe),Fe=new BoundablePair(this.getRoot(),Re,be);return this.nearestNeighbour(Fe)[0]}},s.prototype.interfaces_=function(){return[SpatialIndex,Serializable]},s.prototype.getClass=function(){return s},s.centreX=function(S){return s.avg(S.getMinX(),S.getMaxX())},s.avg=function(S,T){return(S+T)/2},s.centreY=function(S){return s.avg(S.getMinY(),S.getMaxY())},f.STRtreeNode.get=function(){return STRtreeNode},f.serialVersionUID.get=function(){return 0x39920f7d5f261e0},f.xComparator.get=function(){return{interfaces_:function(){return[Comparator]},compare:function(_,S){return d.compareDoubles(s.centreX(_.getBounds()),s.centreX(S.getBounds()))}}},f.yComparator.get=function(){return{interfaces_:function(){return[Comparator]},compare:function(_,S){return d.compareDoubles(s.centreY(_.getBounds()),s.centreY(S.getBounds()))}}},f.intersectsOp.get=function(){return{interfaces_:function(){return[d.IntersectsOp]},intersects:function(_,S){return _.intersects(S)}}},f.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(s,f),s}(AbstractSTRtree),STRtreeNode=function(d){function s(){var f=arguments[0];d.call(this,f)}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.computeBounds=function(){for(var _=null,S=this.getChildBoundables().iterator();S.hasNext();){var T=S.next();_===null?_=new Envelope(T.getBounds()):_.expandToInclude(T.getBounds())}return _},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(AbstractNode),SegmentPointComparator=function d(){};SegmentPointComparator.prototype.interfaces_=function d(){return[]};SegmentPointComparator.prototype.getClass=function d(){return SegmentPointComparator};SegmentPointComparator.relativeSign=function d(s,f){return s<f?-1:s>f?1:0};SegmentPointComparator.compare=function d(s,f,_){if(f.equals2D(_))return 0;var S=SegmentPointComparator.relativeSign(f.x,_.x),T=SegmentPointComparator.relativeSign(f.y,_.y);switch(s){case 0:return SegmentPointComparator.compareValue(S,T);case 1:return SegmentPointComparator.compareValue(T,S);case 2:return SegmentPointComparator.compareValue(T,-S);case 3:return SegmentPointComparator.compareValue(-S,T);case 4:return SegmentPointComparator.compareValue(-S,-T);case 5:return SegmentPointComparator.compareValue(-T,-S);case 6:return SegmentPointComparator.compareValue(-T,S);case 7:return SegmentPointComparator.compareValue(S,-T)}return Assert.shouldNeverReachHere("invalid octant value"),0};SegmentPointComparator.compareValue=function d(s,f){return s<0?-1:s>0?1:f<0?-1:f>0?1:0};var SegmentNode=function d(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var s=arguments[0],f=arguments[1],_=arguments[2],S=arguments[3];this._segString=s,this.coord=new Coordinate(f),this.segmentIndex=_,this._segmentOctant=S,this._isInterior=!f.equals2D(s.getCoordinate(_))};SegmentNode.prototype.getCoordinate=function d(){return this.coord};SegmentNode.prototype.print=function d(s){s.print(this.coord),s.print(" seg # = "+this.segmentIndex)};SegmentNode.prototype.compareTo=function d(s){var f=s;return this.segmentIndex<f.segmentIndex?-1:this.segmentIndex>f.segmentIndex?1:this.coord.equals2D(f.coord)?0:SegmentPointComparator.compare(this._segmentOctant,this.coord,f.coord)};SegmentNode.prototype.isEndPoint=function d(s){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===s};SegmentNode.prototype.isInterior=function d(){return this._isInterior};SegmentNode.prototype.interfaces_=function d(){return[Comparable]};SegmentNode.prototype.getClass=function d(){return SegmentNode};var SegmentNodeList=function d(){this._nodeMap=new TreeMap,this._edge=null;var s=arguments[0];this._edge=s};SegmentNodeList.prototype.getSplitCoordinates=function d(){var s=this,f=new CoordinateList;this.addEndpoints();for(var _=this.iterator(),S=_.next();_.hasNext();){var T=_.next();s.addEdgeCoordinates(S,T,f),S=T}return f.toCoordinateArray()};SegmentNodeList.prototype.addCollapsedNodes=function d(){var s=this,f=new ArrayList;this.findCollapsesFromInsertedNodes(f),this.findCollapsesFromExistingVertices(f);for(var _=f.iterator();_.hasNext();){var S=_.next().intValue();s.add(s._edge.getCoordinate(S),S)}};SegmentNodeList.prototype.print=function d(s){s.println("Intersections:");for(var f=this.iterator();f.hasNext();){var _=f.next();_.print(s)}};SegmentNodeList.prototype.findCollapsesFromExistingVertices=function d(s){for(var f=this,_=0;_<this._edge.size()-2;_++){var S=f._edge.getCoordinate(_),T=f._edge.getCoordinate(_+2);S.equals2D(T)&&s.add(new Integer(_+1))}};SegmentNodeList.prototype.addEdgeCoordinates=function d(s,f,_){var S=this,T=this._edge.getCoordinate(f.segmentIndex),F=f.isInterior()||!f.coord.equals2D(T);_.add(new Coordinate(s.coord),!1);for(var M=s.segmentIndex+1;M<=f.segmentIndex;M++)_.add(S._edge.getCoordinate(M));F&&_.add(new Coordinate(f.coord))};SegmentNodeList.prototype.iterator=function d(){return this._nodeMap.values().iterator()};SegmentNodeList.prototype.addSplitEdges=function d(s){var f=this;this.addEndpoints(),this.addCollapsedNodes();for(var _=this.iterator(),S=_.next();_.hasNext();){var T=_.next(),F=f.createSplitEdge(S,T);s.add(F),S=T}};SegmentNodeList.prototype.findCollapseIndex=function d(s,f,_){if(!s.coord.equals2D(f.coord))return!1;var S=f.segmentIndex-s.segmentIndex;return f.isInterior()||S--,S===1?(_[0]=s.segmentIndex+1,!0):!1};SegmentNodeList.prototype.findCollapsesFromInsertedNodes=function d(s){for(var f=this,_=new Array(1).fill(null),S=this.iterator(),T=S.next();S.hasNext();){var F=S.next(),M=f.findCollapseIndex(T,F,_);M&&s.add(new Integer(_[0])),T=F}};SegmentNodeList.prototype.getEdge=function d(){return this._edge};SegmentNodeList.prototype.addEndpoints=function d(){var s=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(s),s)};SegmentNodeList.prototype.createSplitEdge=function d(s,f){var _=this,S=f.segmentIndex-s.segmentIndex+2,T=this._edge.getCoordinate(f.segmentIndex),F=f.isInterior()||!f.coord.equals2D(T);F||S--;var M=new Array(S).fill(null),P=0;M[P++]=new Coordinate(s.coord);for(var H=s.segmentIndex+1;H<=f.segmentIndex;H++)M[P++]=_._edge.getCoordinate(H);return F&&(M[P]=new Coordinate(f.coord)),new NodedSegmentString(M,this._edge.getData())};SegmentNodeList.prototype.add=function d(s,f){var _=new SegmentNode(this._edge,s,f,this._edge.getSegmentOctant(f)),S=this._nodeMap.get(_);return S!==null?(Assert.isTrue(S.coord.equals2D(s),"Found equal nodes with different coordinates"),S):(this._nodeMap.put(_,_),_)};SegmentNodeList.prototype.checkSplitEdgesCorrectness=function d(s){var f=this._edge.getCoordinates(),_=s.get(0),S=_.getCoordinate(0);if(!S.equals2D(f[0]))throw new RuntimeException("bad split edge start point at "+S);var T=s.get(s.size()-1),F=T.getCoordinates(),M=F[F.length-1];if(!M.equals2D(f[f.length-1]))throw new RuntimeException("bad split edge end point at "+M)};SegmentNodeList.prototype.interfaces_=function d(){return[]};SegmentNodeList.prototype.getClass=function d(){return SegmentNodeList};var Octant=function d(){};Octant.prototype.interfaces_=function d(){return[]};Octant.prototype.getClass=function d(){return Octant};Octant.octant=function d(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],f=arguments[1];if(s===0&&f===0)throw new IllegalArgumentException("Cannot compute the octant for point ( "+s+", "+f+" )");var _=Math.abs(s),S=Math.abs(f);return s>=0?f>=0?_>=S?0:1:_>=S?7:6:f>=0?_>=S?3:2:_>=S?4:5}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Coordinate){var T=arguments[0],F=arguments[1],M=F.x-T.x,P=F.y-T.y;if(M===0&&P===0)throw new IllegalArgumentException("Cannot compute the octant for two identical points "+T);return Octant.octant(M,P)}};var SegmentString=function d(){};SegmentString.prototype.getCoordinates=function d(){};SegmentString.prototype.size=function d(){};SegmentString.prototype.getCoordinate=function d(s){};SegmentString.prototype.isClosed=function d(){};SegmentString.prototype.setData=function d(s){};SegmentString.prototype.getData=function d(){};SegmentString.prototype.interfaces_=function d(){return[]};SegmentString.prototype.getClass=function d(){return SegmentString};var NodableSegmentString=function d(){};NodableSegmentString.prototype.addIntersection=function d(s,f){};NodableSegmentString.prototype.interfaces_=function d(){return[SegmentString]};NodableSegmentString.prototype.getClass=function d(){return NodableSegmentString};var NodedSegmentString=function d(){this._nodeList=new SegmentNodeList(this),this._pts=null,this._data=null;var s=arguments[0],f=arguments[1];this._pts=s,this._data=f};NodedSegmentString.prototype.getCoordinates=function d(){return this._pts};NodedSegmentString.prototype.size=function d(){return this._pts.length};NodedSegmentString.prototype.getCoordinate=function d(s){return this._pts[s]};NodedSegmentString.prototype.isClosed=function d(){return this._pts[0].equals(this._pts[this._pts.length-1])};NodedSegmentString.prototype.getSegmentOctant=function d(s){return s===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(s),this.getCoordinate(s+1))};NodedSegmentString.prototype.setData=function d(s){this._data=s};NodedSegmentString.prototype.safeOctant=function d(s,f){return s.equals2D(f)?0:Octant.octant(s,f)};NodedSegmentString.prototype.getData=function d(){return this._data};NodedSegmentString.prototype.addIntersection=function d(){if(arguments.length===2){var s=arguments[0],f=arguments[1];this.addIntersectionNode(s,f)}else if(arguments.length===4){var _=arguments[0],S=arguments[1],T=arguments[3],F=new Coordinate(_.getIntersection(T));this.addIntersection(F,S)}};NodedSegmentString.prototype.toString=function d(){return WKTWriter.toLineString(new CoordinateArraySequence(this._pts))};NodedSegmentString.prototype.getNodeList=function d(){return this._nodeList};NodedSegmentString.prototype.addIntersectionNode=function d(s,f){var _=f,S=_+1;if(S<this._pts.length){var T=this._pts[S];s.equals2D(T)&&(_=S)}var F=this._nodeList.add(s,_);return F};NodedSegmentString.prototype.addIntersections=function d(s,f,_){for(var S=this,T=0;T<s.getIntersectionNum();T++)S.addIntersection(s,f,_,T)};NodedSegmentString.prototype.interfaces_=function d(){return[NodableSegmentString]};NodedSegmentString.prototype.getClass=function d(){return NodedSegmentString};NodedSegmentString.getNodedSubstrings=function d(){if(arguments.length===1){var s=arguments[0],f=new ArrayList;return NodedSegmentString.getNodedSubstrings(s,f),f}else if(arguments.length===2)for(var _=arguments[0],S=arguments[1],T=_.iterator();T.hasNext();){var F=T.next();F.getNodeList().addSplitEdges(S)}};var LineSegment=function d(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new Coordinate,this.p1=new Coordinate;else if(arguments.length===1){var s=arguments[0];this.p0=new Coordinate(s.p0),this.p1=new Coordinate(s.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var f=arguments[0],_=arguments[1],S=arguments[2],T=arguments[3];this.p0=new Coordinate(f,_),this.p1=new Coordinate(S,T)}},staticAccessors$24={serialVersionUID:{configurable:!0}};LineSegment.prototype.minX=function d(){return Math.min(this.p0.x,this.p1.x)};LineSegment.prototype.orientationIndex=function d(){if(arguments[0]instanceof LineSegment){var s=arguments[0],f=CGAlgorithms.orientationIndex(this.p0,this.p1,s.p0),_=CGAlgorithms.orientationIndex(this.p0,this.p1,s.p1);return f>=0&&_>=0||f<=0&&_<=0?Math.max(f,_):0}else if(arguments[0]instanceof Coordinate){var S=arguments[0];return CGAlgorithms.orientationIndex(this.p0,this.p1,S)}};LineSegment.prototype.toGeometry=function d(s){return s.createLineString([this.p0,this.p1])};LineSegment.prototype.isVertical=function d(){return this.p0.x===this.p1.x};LineSegment.prototype.equals=function d(s){if(!(s instanceof LineSegment))return!1;var f=s;return this.p0.equals(f.p0)&&this.p1.equals(f.p1)};LineSegment.prototype.intersection=function d(s){var f=new RobustLineIntersector;return f.computeIntersection(this.p0,this.p1,s.p0,s.p1),f.hasIntersection()?f.getIntersection(0):null};LineSegment.prototype.project=function d(){if(arguments[0]instanceof Coordinate){var s=arguments[0];if(s.equals(this.p0)||s.equals(this.p1))return new Coordinate(s);var f=this.projectionFactor(s),_=new Coordinate;return _.x=this.p0.x+f*(this.p1.x-this.p0.x),_.y=this.p0.y+f*(this.p1.y-this.p0.y),_}else if(arguments[0]instanceof LineSegment){var S=arguments[0],T=this.projectionFactor(S.p0),F=this.projectionFactor(S.p1);if(T>=1&&F>=1||T<=0&&F<=0)return null;var M=this.project(S.p0);T<0&&(M=this.p0),T>1&&(M=this.p1);var P=this.project(S.p1);return F<0&&(P=this.p0),F>1&&(P=this.p1),new LineSegment(M,P)}};LineSegment.prototype.normalize=function d(){this.p1.compareTo(this.p0)<0&&this.reverse()};LineSegment.prototype.angle=function d(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};LineSegment.prototype.getCoordinate=function d(s){return s===0?this.p0:this.p1};LineSegment.prototype.distancePerpendicular=function d(s){return CGAlgorithms.distancePointLinePerpendicular(s,this.p0,this.p1)};LineSegment.prototype.minY=function d(){return Math.min(this.p0.y,this.p1.y)};LineSegment.prototype.midPoint=function d(){return LineSegment.midPoint(this.p0,this.p1)};LineSegment.prototype.projectionFactor=function d(s){if(s.equals(this.p0))return 0;if(s.equals(this.p1))return 1;var f=this.p1.x-this.p0.x,_=this.p1.y-this.p0.y,S=f*f+_*_;if(S<=0)return Double.NaN;var T=((s.x-this.p0.x)*f+(s.y-this.p0.y)*_)/S;return T};LineSegment.prototype.closestPoints=function d(s){var f=this.intersection(s);if(f!==null)return[f,f];var _=new Array(2).fill(null),S=Double.MAX_VALUE,T=null,F=this.closestPoint(s.p0);S=F.distance(s.p0),_[0]=F,_[1]=s.p0;var M=this.closestPoint(s.p1);T=M.distance(s.p1),T<S&&(S=T,_[0]=M,_[1]=s.p1);var P=s.closestPoint(this.p0);T=P.distance(this.p0),T<S&&(S=T,_[0]=this.p0,_[1]=P);var H=s.closestPoint(this.p1);return T=H.distance(this.p1),T<S&&(S=T,_[0]=this.p1,_[1]=H),_};LineSegment.prototype.closestPoint=function d(s){var f=this.projectionFactor(s);if(f>0&&f<1)return this.project(s);var _=this.p0.distance(s),S=this.p1.distance(s);return _<S?this.p0:this.p1};LineSegment.prototype.maxX=function d(){return Math.max(this.p0.x,this.p1.x)};LineSegment.prototype.getLength=function d(){return this.p0.distance(this.p1)};LineSegment.prototype.compareTo=function d(s){var f=s,_=this.p0.compareTo(f.p0);return _!==0?_:this.p1.compareTo(f.p1)};LineSegment.prototype.reverse=function d(){var s=this.p0;this.p0=this.p1,this.p1=s};LineSegment.prototype.equalsTopo=function d(s){return this.p0.equals(s.p0)&&(this.p1.equals(s.p1)||this.p0.equals(s.p1))&&this.p1.equals(s.p0)};LineSegment.prototype.lineIntersection=function d(s){try{var f=HCoordinate.intersection(this.p0,this.p1,s.p0,s.p1);return f}catch(_){if(!(_ instanceof NotRepresentableException))throw _}finally{}return null};LineSegment.prototype.maxY=function d(){return Math.max(this.p0.y,this.p1.y)};LineSegment.prototype.pointAlongOffset=function d(s,f){var _=this.p0.x+s*(this.p1.x-this.p0.x),S=this.p0.y+s*(this.p1.y-this.p0.y),T=this.p1.x-this.p0.x,F=this.p1.y-this.p0.y,M=Math.sqrt(T*T+F*F),P=0,H=0;if(f!==0){if(M<=0)throw new Error("Cannot compute offset from zero-length line segment");P=f*T/M,H=f*F/M}var J=_-H,K=S+P,oe=new Coordinate(J,K);return oe};LineSegment.prototype.setCoordinates=function d(){if(arguments.length===1){var s=arguments[0];this.setCoordinates(s.p0,s.p1)}else if(arguments.length===2){var f=arguments[0],_=arguments[1];this.p0.x=f.x,this.p0.y=f.y,this.p1.x=_.x,this.p1.y=_.y}};LineSegment.prototype.segmentFraction=function d(s){var f=this.projectionFactor(s);return f<0?f=0:(f>1||Double.isNaN(f))&&(f=1),f};LineSegment.prototype.toString=function d(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};LineSegment.prototype.isHorizontal=function d(){return this.p0.y===this.p1.y};LineSegment.prototype.distance=function d(){if(arguments[0]instanceof LineSegment){var s=arguments[0];return CGAlgorithms.distanceLineLine(this.p0,this.p1,s.p0,s.p1)}else if(arguments[0]instanceof Coordinate){var f=arguments[0];return CGAlgorithms.distancePointLine(f,this.p0,this.p1)}};LineSegment.prototype.pointAlong=function d(s){var f=new Coordinate;return f.x=this.p0.x+s*(this.p1.x-this.p0.x),f.y=this.p0.y+s*(this.p1.y-this.p0.y),f};LineSegment.prototype.hashCode=function d(){var s=Double.doubleToLongBits(this.p0.x);s^=Double.doubleToLongBits(this.p0.y)*31;var f=Math.trunc(s)^Math.trunc(s>>32),_=Double.doubleToLongBits(this.p1.x);_^=Double.doubleToLongBits(this.p1.y)*31;var S=Math.trunc(_)^Math.trunc(_>>32);return f^S};LineSegment.prototype.interfaces_=function d(){return[Comparable,Serializable]};LineSegment.prototype.getClass=function d(){return LineSegment};LineSegment.midPoint=function d(s,f){return new Coordinate((s.x+f.x)/2,(s.y+f.y)/2)};staticAccessors$24.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(LineSegment,staticAccessors$24);var MonotoneChainOverlapAction=function d(){this.tempEnv1=new Envelope,this.tempEnv2=new Envelope,this._overlapSeg1=new LineSegment,this._overlapSeg2=new LineSegment};MonotoneChainOverlapAction.prototype.overlap=function d(){if(arguments.length!==2){if(arguments.length===4){var s=arguments[0],f=arguments[1],_=arguments[2],S=arguments[3];s.getLineSegment(f,this._overlapSeg1),_.getLineSegment(S,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}};MonotoneChainOverlapAction.prototype.interfaces_=function d(){return[]};MonotoneChainOverlapAction.prototype.getClass=function d(){return MonotoneChainOverlapAction};var MonotoneChain=function d(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var s=arguments[0],f=arguments[1],_=arguments[2],S=arguments[3];this._pts=s,this._start=f,this._end=_,this._context=S};MonotoneChain.prototype.getLineSegment=function d(s,f){f.p0=this._pts[s],f.p1=this._pts[s+1]};MonotoneChain.prototype.computeSelect=function d(s,f,_,S){var T=this._pts[f],F=this._pts[_];if(S.tempEnv1.init(T,F),_-f===1)return S.select(this,f),null;if(!s.intersects(S.tempEnv1))return null;var M=Math.trunc((f+_)/2);f<M&&this.computeSelect(s,f,M,S),M<_&&this.computeSelect(s,M,_,S)};MonotoneChain.prototype.getCoordinates=function d(){for(var s=this,f=new Array(this._end-this._start+1).fill(null),_=0,S=this._start;S<=this._end;S++)f[_++]=s._pts[S];return f};MonotoneChain.prototype.computeOverlaps=function d(s,f){this.computeOverlapsInternal(this._start,this._end,s,s._start,s._end,f)};MonotoneChain.prototype.setId=function d(s){this._id=s};MonotoneChain.prototype.select=function d(s,f){this.computeSelect(s,this._start,this._end,f)};MonotoneChain.prototype.getEnvelope=function d(){if(this._env===null){var s=this._pts[this._start],f=this._pts[this._end];this._env=new Envelope(s,f)}return this._env};MonotoneChain.prototype.getEndIndex=function d(){return this._end};MonotoneChain.prototype.getStartIndex=function d(){return this._start};MonotoneChain.prototype.getContext=function d(){return this._context};MonotoneChain.prototype.getId=function d(){return this._id};MonotoneChain.prototype.computeOverlapsInternal=function d(s,f,_,S,T,F){var M=this._pts[s],P=this._pts[f],H=_._pts[S],J=_._pts[T];if(f-s===1&&T-S===1)return F.overlap(this,s,_,S),null;if(F.tempEnv1.init(M,P),F.tempEnv2.init(H,J),!F.tempEnv1.intersects(F.tempEnv2))return null;var K=Math.trunc((s+f)/2),oe=Math.trunc((S+T)/2);s<K&&(S<oe&&this.computeOverlapsInternal(s,K,_,S,oe,F),oe<T&&this.computeOverlapsInternal(s,K,_,oe,T,F)),K<f&&(S<oe&&this.computeOverlapsInternal(K,f,_,S,oe,F),oe<T&&this.computeOverlapsInternal(K,f,_,oe,T,F))};MonotoneChain.prototype.interfaces_=function d(){return[]};MonotoneChain.prototype.getClass=function d(){return MonotoneChain};var MonotoneChainBuilder=function d(){};MonotoneChainBuilder.prototype.interfaces_=function d(){return[]};MonotoneChainBuilder.prototype.getClass=function d(){return MonotoneChainBuilder};MonotoneChainBuilder.getChainStartIndices=function d(s){var f=0,_=new ArrayList;_.add(new Integer(f));do{var S=MonotoneChainBuilder.findChainEnd(s,f);_.add(new Integer(S)),f=S}while(f<s.length-1);var T=MonotoneChainBuilder.toIntArray(_);return T};MonotoneChainBuilder.findChainEnd=function d(s,f){for(var _=f;_<s.length-1&&s[_].equals2D(s[_+1]);)_++;if(_>=s.length-1)return s.length-1;for(var S=Quadrant.quadrant(s[_],s[_+1]),T=f+1;T<s.length;){if(!s[T-1].equals2D(s[T])){var F=Quadrant.quadrant(s[T-1],s[T]);if(F!==S)break}T++}return T-1};MonotoneChainBuilder.getChains=function d(){if(arguments.length===1){var s=arguments[0];return MonotoneChainBuilder.getChains(s,null)}else if(arguments.length===2){for(var f=arguments[0],_=arguments[1],S=new ArrayList,T=MonotoneChainBuilder.getChainStartIndices(f),F=0;F<T.length-1;F++){var M=new MonotoneChain(f,T[F],T[F+1],_);S.add(M)}return S}};MonotoneChainBuilder.toIntArray=function d(s){for(var f=new Array(s.size()).fill(null),_=0;_<f.length;_++)f[_]=s.get(_).intValue();return f};var Noder=function d(){};Noder.prototype.computeNodes=function d(s){};Noder.prototype.getNodedSubstrings=function d(){};Noder.prototype.interfaces_=function d(){return[]};Noder.prototype.getClass=function d(){return Noder};var SinglePassNoder=function d(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var s=arguments[0];this.setSegmentIntersector(s)}}};SinglePassNoder.prototype.setSegmentIntersector=function d(s){this._segInt=s};SinglePassNoder.prototype.interfaces_=function d(){return[Noder]};SinglePassNoder.prototype.getClass=function d(){return SinglePassNoder};var MCIndexNoder=function(d){function s(_){_?d.call(this,_):d.call(this),this._monoChains=new ArrayList,this._index=new STRtree,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s;var f={SegmentOverlapAction:{configurable:!0}};return s.prototype.getMonotoneChains=function(){return this._monoChains},s.prototype.getNodedSubstrings=function(){return NodedSegmentString.getNodedSubstrings(this._nodedSegStrings)},s.prototype.getIndex=function(){return this._index},s.prototype.add=function(S){for(var T=this,F=MonotoneChainBuilder.getChains(S.getCoordinates(),S),M=F.iterator();M.hasNext();){var P=M.next();P.setId(T._idCounter++),T._index.insert(P.getEnvelope(),P),T._monoChains.add(P)}},s.prototype.computeNodes=function(S){var T=this;this._nodedSegStrings=S;for(var F=S.iterator();F.hasNext();)T.add(F.next());this.intersectChains()},s.prototype.intersectChains=function(){for(var S=this,T=new SegmentOverlapAction(this._segInt),F=this._monoChains.iterator();F.hasNext();)for(var M=F.next(),P=S._index.query(M.getEnvelope()),H=P.iterator();H.hasNext();){var J=H.next();if(J.getId()>M.getId()&&(M.computeOverlaps(J,T),S._nOverlaps++),S._segInt.isDone())return null}},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},f.SegmentOverlapAction.get=function(){return SegmentOverlapAction},Object.defineProperties(s,f),s}(SinglePassNoder),SegmentOverlapAction=function(d){function s(){d.call(this),this._si=null;var f=arguments[0];this._si=f}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.overlap=function(){if(arguments.length===4){var _=arguments[0],S=arguments[1],T=arguments[2],F=arguments[3],M=_.getContext(),P=T.getContext();this._si.processIntersections(M,S,P,F)}else return d.prototype.overlap.apply(this,arguments)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(MonotoneChainOverlapAction),BufferParameters=function d(){if(this._quadrantSegments=d.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=d.CAP_ROUND,this._joinStyle=d.JOIN_ROUND,this._mitreLimit=d.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=d.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var s=arguments[0];this.setQuadrantSegments(s)}else if(arguments.length===2){var f=arguments[0],_=arguments[1];this.setQuadrantSegments(f),this.setEndCapStyle(_)}else if(arguments.length===4){var S=arguments[0],T=arguments[1],F=arguments[2],M=arguments[3];this.setQuadrantSegments(S),this.setEndCapStyle(T),this.setJoinStyle(F),this.setMitreLimit(M)}}},staticAccessors$25={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};BufferParameters.prototype.getEndCapStyle=function d(){return this._endCapStyle};BufferParameters.prototype.isSingleSided=function d(){return this._isSingleSided};BufferParameters.prototype.setQuadrantSegments=function d(s){this._quadrantSegments=s,this._quadrantSegments===0&&(this._joinStyle=BufferParameters.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=BufferParameters.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),s<=0&&(this._quadrantSegments=1),this._joinStyle!==BufferParameters.JOIN_ROUND&&(this._quadrantSegments=BufferParameters.DEFAULT_QUADRANT_SEGMENTS)};BufferParameters.prototype.getJoinStyle=function d(){return this._joinStyle};BufferParameters.prototype.setJoinStyle=function d(s){this._joinStyle=s};BufferParameters.prototype.setSimplifyFactor=function d(s){this._simplifyFactor=s<0?0:s};BufferParameters.prototype.getSimplifyFactor=function d(){return this._simplifyFactor};BufferParameters.prototype.getQuadrantSegments=function d(){return this._quadrantSegments};BufferParameters.prototype.setEndCapStyle=function d(s){this._endCapStyle=s};BufferParameters.prototype.getMitreLimit=function d(){return this._mitreLimit};BufferParameters.prototype.setMitreLimit=function d(s){this._mitreLimit=s};BufferParameters.prototype.setSingleSided=function d(s){this._isSingleSided=s};BufferParameters.prototype.interfaces_=function d(){return[]};BufferParameters.prototype.getClass=function d(){return BufferParameters};BufferParameters.bufferDistanceError=function d(s){var f=Math.PI/2/s;return 1-Math.cos(f/2)};staticAccessors$25.CAP_ROUND.get=function(){return 1};staticAccessors$25.CAP_FLAT.get=function(){return 2};staticAccessors$25.CAP_SQUARE.get=function(){return 3};staticAccessors$25.JOIN_ROUND.get=function(){return 1};staticAccessors$25.JOIN_MITRE.get=function(){return 2};staticAccessors$25.JOIN_BEVEL.get=function(){return 3};staticAccessors$25.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};staticAccessors$25.DEFAULT_MITRE_LIMIT.get=function(){return 5};staticAccessors$25.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(BufferParameters,staticAccessors$25);var BufferInputLineSimplifier=function d(s){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=CGAlgorithms.COUNTERCLOCKWISE,this._inputLine=s||null},staticAccessors$26={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};BufferInputLineSimplifier.prototype.isDeletable=function d(s,f,_,S){var T=this._inputLine[s],F=this._inputLine[f],M=this._inputLine[_];return!this.isConcave(T,F,M)||!this.isShallow(T,F,M,S)?!1:this.isShallowSampled(T,F,s,_,S)};BufferInputLineSimplifier.prototype.deleteShallowConcavities=function d(){for(var s=this,f=1,_=this.findNextNonDeletedIndex(f),S=this.findNextNonDeletedIndex(_),T=!1;S<this._inputLine.length;){var F=!1;s.isDeletable(f,_,S,s._distanceTol)&&(s._isDeleted[_]=BufferInputLineSimplifier.DELETE,F=!0,T=!0),F?f=S:f=_,_=s.findNextNonDeletedIndex(f),S=s.findNextNonDeletedIndex(_)}return T};BufferInputLineSimplifier.prototype.isShallowConcavity=function d(s,f,_,S){var T=CGAlgorithms.computeOrientation(s,f,_),F=T===this._angleOrientation;if(!F)return!1;var M=CGAlgorithms.distancePointLine(f,s,_);return M<S};BufferInputLineSimplifier.prototype.isShallowSampled=function d(s,f,_,S,T){var F=this,M=Math.trunc((S-_)/BufferInputLineSimplifier.NUM_PTS_TO_CHECK);M<=0&&(M=1);for(var P=_;P<S;P+=M)if(!F.isShallow(s,f,F._inputLine[P],T))return!1;return!0};BufferInputLineSimplifier.prototype.isConcave=function d(s,f,_){var S=CGAlgorithms.computeOrientation(s,f,_),T=S===this._angleOrientation;return T};BufferInputLineSimplifier.prototype.simplify=function d(s){var f=this;this._distanceTol=Math.abs(s),s<0&&(this._angleOrientation=CGAlgorithms.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var _=!1;do _=f.deleteShallowConcavities();while(_);return this.collapseLine()};BufferInputLineSimplifier.prototype.findNextNonDeletedIndex=function d(s){for(var f=s+1;f<this._inputLine.length&&this._isDeleted[f]===BufferInputLineSimplifier.DELETE;)f++;return f};BufferInputLineSimplifier.prototype.isShallow=function d(s,f,_,S){var T=CGAlgorithms.distancePointLine(f,s,_);return T<S};BufferInputLineSimplifier.prototype.collapseLine=function d(){for(var s=this,f=new CoordinateList,_=0;_<this._inputLine.length;_++)s._isDeleted[_]!==BufferInputLineSimplifier.DELETE&&f.add(s._inputLine[_]);return f.toCoordinateArray()};BufferInputLineSimplifier.prototype.interfaces_=function d(){return[]};BufferInputLineSimplifier.prototype.getClass=function d(){return BufferInputLineSimplifier};BufferInputLineSimplifier.simplify=function d(s,f){var _=new BufferInputLineSimplifier(s);return _.simplify(f)};staticAccessors$26.INIT.get=function(){return 0};staticAccessors$26.DELETE.get=function(){return 1};staticAccessors$26.KEEP.get=function(){return 1};staticAccessors$26.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(BufferInputLineSimplifier,staticAccessors$26);var OffsetSegmentString=function d(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ArrayList},staticAccessors$28={COORDINATE_ARRAY_TYPE:{configurable:!0}};OffsetSegmentString.prototype.getCoordinates=function d(){var s=this._ptList.toArray(OffsetSegmentString.COORDINATE_ARRAY_TYPE);return s};OffsetSegmentString.prototype.setPrecisionModel=function d(s){this._precisionModel=s};OffsetSegmentString.prototype.addPt=function d(s){var f=new Coordinate(s);if(this._precisionModel.makePrecise(f),this.isRedundant(f))return null;this._ptList.add(f)};OffsetSegmentString.prototype.revere=function d(){};OffsetSegmentString.prototype.addPts=function d(s,f){var _=this;if(f)for(var S=0;S<s.length;S++)_.addPt(s[S]);else for(var T=s.length-1;T>=0;T--)_.addPt(s[T])};OffsetSegmentString.prototype.isRedundant=function d(s){if(this._ptList.size()<1)return!1;var f=this._ptList.get(this._ptList.size()-1),_=s.distance(f);return _<this._minimimVertexDistance};OffsetSegmentString.prototype.toString=function d(){var s=new GeometryFactory,f=s.createLineString(this.getCoordinates());return f.toString()};OffsetSegmentString.prototype.closeRing=function d(){if(this._ptList.size()<1)return null;var s=new Coordinate(this._ptList.get(0)),f=this._ptList.get(this._ptList.size()-1);if(s.equals(f))return null;this._ptList.add(s)};OffsetSegmentString.prototype.setMinimumVertexDistance=function d(s){this._minimimVertexDistance=s};OffsetSegmentString.prototype.interfaces_=function d(){return[]};OffsetSegmentString.prototype.getClass=function d(){return OffsetSegmentString};staticAccessors$28.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(OffsetSegmentString,staticAccessors$28);var Angle=function d(){},staticAccessors$29={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Angle.prototype.interfaces_=function d(){return[]};Angle.prototype.getClass=function d(){return Angle};Angle.toDegrees=function d(s){return s*180/Math.PI};Angle.normalize=function d(s){for(;s>Math.PI;)s-=Angle.PI_TIMES_2;for(;s<=-Math.PI;)s+=Angle.PI_TIMES_2;return s};Angle.angle=function d(){if(arguments.length===1){var s=arguments[0];return Math.atan2(s.y,s.x)}else if(arguments.length===2){var f=arguments[0],_=arguments[1],S=_.x-f.x,T=_.y-f.y;return Math.atan2(T,S)}};Angle.isAcute=function d(s,f,_){var S=s.x-f.x,T=s.y-f.y,F=_.x-f.x,M=_.y-f.y,P=S*F+T*M;return P>0};Angle.isObtuse=function d(s,f,_){var S=s.x-f.x,T=s.y-f.y,F=_.x-f.x,M=_.y-f.y,P=S*F+T*M;return P<0};Angle.interiorAngle=function d(s,f,_){var S=Angle.angle(f,s),T=Angle.angle(f,_);return Math.abs(T-S)};Angle.normalizePositive=function d(s){if(s<0){for(;s<0;)s+=Angle.PI_TIMES_2;s>=Angle.PI_TIMES_2&&(s=0)}else{for(;s>=Angle.PI_TIMES_2;)s-=Angle.PI_TIMES_2;s<0&&(s=0)}return s};Angle.angleBetween=function d(s,f,_){var S=Angle.angle(f,s),T=Angle.angle(f,_);return Angle.diff(S,T)};Angle.diff=function d(s,f){var _=null;return s<f?_=f-s:_=s-f,_>Math.PI&&(_=2*Math.PI-_),_};Angle.toRadians=function d(s){return s*Math.PI/180};Angle.getTurn=function d(s,f){var _=Math.sin(f-s);return _>0?Angle.COUNTERCLOCKWISE:_<0?Angle.CLOCKWISE:Angle.NONE};Angle.angleBetweenOriented=function d(s,f,_){var S=Angle.angle(f,s),T=Angle.angle(f,_),F=T-S;return F<=-Math.PI?F+Angle.PI_TIMES_2:F>Math.PI?F-Angle.PI_TIMES_2:F};staticAccessors$29.PI_TIMES_2.get=function(){return 2*Math.PI};staticAccessors$29.PI_OVER_2.get=function(){return Math.PI/2};staticAccessors$29.PI_OVER_4.get=function(){return Math.PI/4};staticAccessors$29.COUNTERCLOCKWISE.get=function(){return CGAlgorithms.COUNTERCLOCKWISE};staticAccessors$29.CLOCKWISE.get=function(){return CGAlgorithms.CLOCKWISE};staticAccessors$29.NONE.get=function(){return CGAlgorithms.COLLINEAR};Object.defineProperties(Angle,staticAccessors$29);var OffsetSegmentGenerator=function d(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new LineSegment,this._seg1=new LineSegment,this._offset0=new LineSegment,this._offset1=new LineSegment,this._side=0,this._hasNarrowConcaveAngle=!1;var s=arguments[0],f=arguments[1],_=arguments[2];this._precisionModel=s,this._bufParams=f,this._li=new RobustLineIntersector,this._filletAngleQuantum=Math.PI/2/f.getQuadrantSegments(),f.getQuadrantSegments()>=8&&f.getJoinStyle()===BufferParameters.JOIN_ROUND&&(this._closingSegLengthFactor=d.MAX_CLOSING_SEG_LEN_FACTOR),this.init(_)},staticAccessors$27={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};OffsetSegmentGenerator.prototype.addNextSegment=function d(s,f){if(this._s0=this._s1,this._s1=this._s2,this._s2=s,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var _=CGAlgorithms.computeOrientation(this._s0,this._s1,this._s2),S=_===CGAlgorithms.CLOCKWISE&&this._side===Position.LEFT||_===CGAlgorithms.COUNTERCLOCKWISE&&this._side===Position.RIGHT;_===0?this.addCollinear(f):S?this.addOutsideTurn(_,f):this.addInsideTurn(_,f)};OffsetSegmentGenerator.prototype.addLineEndCap=function d(s,f){var _=new LineSegment(s,f),S=new LineSegment;this.computeOffsetSegment(_,Position.LEFT,this._distance,S);var T=new LineSegment;this.computeOffsetSegment(_,Position.RIGHT,this._distance,T);var F=f.x-s.x,M=f.y-s.y,P=Math.atan2(M,F);switch(this._bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:this._segList.addPt(S.p1),this.addFilletArc(f,P+Math.PI/2,P-Math.PI/2,CGAlgorithms.CLOCKWISE,this._distance),this._segList.addPt(T.p1);break;case BufferParameters.CAP_FLAT:this._segList.addPt(S.p1),this._segList.addPt(T.p1);break;case BufferParameters.CAP_SQUARE:var H=new Coordinate;H.x=Math.abs(this._distance)*Math.cos(P),H.y=Math.abs(this._distance)*Math.sin(P);var J=new Coordinate(S.p1.x+H.x,S.p1.y+H.y),K=new Coordinate(T.p1.x+H.x,T.p1.y+H.y);this._segList.addPt(J),this._segList.addPt(K);break}};OffsetSegmentGenerator.prototype.getCoordinates=function d(){var s=this._segList.getCoordinates();return s};OffsetSegmentGenerator.prototype.addMitreJoin=function d(s,f,_,S){var T=!0,F=null;try{F=HCoordinate.intersection(f.p0,f.p1,_.p0,_.p1);var M=S<=0?1:F.distance(s)/Math.abs(S);M>this._bufParams.getMitreLimit()&&(T=!1)}catch(P){if(P instanceof NotRepresentableException)F=new Coordinate(0,0),T=!1;else throw P}finally{}T?this._segList.addPt(F):this.addLimitedMitreJoin(f,_,S,this._bufParams.getMitreLimit())};OffsetSegmentGenerator.prototype.addFilletCorner=function d(s,f,_,S,T){var F=f.x-s.x,M=f.y-s.y,P=Math.atan2(M,F),H=_.x-s.x,J=_.y-s.y,K=Math.atan2(J,H);S===CGAlgorithms.CLOCKWISE?P<=K&&(P+=2*Math.PI):P>=K&&(P-=2*Math.PI),this._segList.addPt(f),this.addFilletArc(s,P,K,S,T),this._segList.addPt(_)};OffsetSegmentGenerator.prototype.addOutsideTurn=function d(s,f){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(f&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,s,this._distance),this._segList.addPt(this._offset1.p0))};OffsetSegmentGenerator.prototype.createSquare=function d(s){this._segList.addPt(new Coordinate(s.x+this._distance,s.y+this._distance)),this._segList.addPt(new Coordinate(s.x+this._distance,s.y-this._distance)),this._segList.addPt(new Coordinate(s.x-this._distance,s.y-this._distance)),this._segList.addPt(new Coordinate(s.x-this._distance,s.y+this._distance)),this._segList.closeRing()};OffsetSegmentGenerator.prototype.addSegments=function d(s,f){this._segList.addPts(s,f)};OffsetSegmentGenerator.prototype.addFirstSegment=function d(){this._segList.addPt(this._offset1.p0)};OffsetSegmentGenerator.prototype.addLastSegment=function d(){this._segList.addPt(this._offset1.p1)};OffsetSegmentGenerator.prototype.initSideSegments=function d(s,f,_){this._s1=s,this._s2=f,this._side=_,this._seg1.setCoordinates(s,f),this.computeOffsetSegment(this._seg1,_,this._distance,this._offset1)};OffsetSegmentGenerator.prototype.addLimitedMitreJoin=function d(s,f,_,S){var T=this._seg0.p1,F=Angle.angle(T,this._seg0.p0),M=Angle.angleBetweenOriented(this._seg0.p0,T,this._seg1.p1),P=M/2,H=Angle.normalize(F+P),J=Angle.normalize(H+Math.PI),K=S*_,oe=K*Math.abs(Math.sin(P)),se=_-oe,ae=T.x+K*Math.cos(J),ge=T.y+K*Math.sin(J),he=new Coordinate(ae,ge),Be=new LineSegment(T,he),pe=Be.pointAlongOffset(1,se),be=Be.pointAlongOffset(1,-se);this._side===Position.LEFT?(this._segList.addPt(pe),this._segList.addPt(be)):(this._segList.addPt(be),this._segList.addPt(pe))};OffsetSegmentGenerator.prototype.computeOffsetSegment=function d(s,f,_,S){var T=f===Position.LEFT?1:-1,F=s.p1.x-s.p0.x,M=s.p1.y-s.p0.y,P=Math.sqrt(F*F+M*M),H=T*_*F/P,J=T*_*M/P;S.p0.x=s.p0.x-J,S.p0.y=s.p0.y+H,S.p1.x=s.p1.x-J,S.p1.y=s.p1.y+H};OffsetSegmentGenerator.prototype.addFilletArc=function d(s,f,_,S,T){var F=this,M=S===CGAlgorithms.CLOCKWISE?-1:1,P=Math.abs(f-_),H=Math.trunc(P/this._filletAngleQuantum+.5);if(H<1)return null;for(var J=0,K=P/H,oe=J,se=new Coordinate;oe<P;){var ae=f+M*oe;se.x=s.x+T*Math.cos(ae),se.y=s.y+T*Math.sin(ae),F._segList.addPt(se),oe+=K}};OffsetSegmentGenerator.prototype.addInsideTurn=function d(s,f){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var _=new Coordinate((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(_);var S=new Coordinate((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(S)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};OffsetSegmentGenerator.prototype.createCircle=function d(s){var f=new Coordinate(s.x+this._distance,s.y);this._segList.addPt(f),this.addFilletArc(s,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};OffsetSegmentGenerator.prototype.addBevelJoin=function d(s,f){this._segList.addPt(s.p1),this._segList.addPt(f.p0)};OffsetSegmentGenerator.prototype.init=function d(s){this._distance=s,this._maxCurveSegmentError=s*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new OffsetSegmentString,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(s*OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};OffsetSegmentGenerator.prototype.addCollinear=function d(s){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var f=this._li.getIntersectionNum();f>=2&&(this._bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL||this._bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?(s&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,CGAlgorithms.CLOCKWISE,this._distance))};OffsetSegmentGenerator.prototype.closeRing=function d(){this._segList.closeRing()};OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=function d(){return this._hasNarrowConcaveAngle};OffsetSegmentGenerator.prototype.interfaces_=function d(){return[]};OffsetSegmentGenerator.prototype.getClass=function d(){return OffsetSegmentGenerator};staticAccessors$27.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};staticAccessors$27.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};staticAccessors$27.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};staticAccessors$27.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(OffsetSegmentGenerator,staticAccessors$27);var OffsetCurveBuilder=function d(){this._distance=0,this._precisionModel=null,this._bufParams=null;var s=arguments[0],f=arguments[1];this._precisionModel=s,this._bufParams=f};OffsetCurveBuilder.prototype.getOffsetCurve=function d(s,f){if(this._distance=f,f===0)return null;var _=f<0,S=Math.abs(f),T=this.getSegGen(S);s.length<=1?this.computePointCurve(s[0],T):this.computeOffsetCurve(s,_,T);var F=T.getCoordinates();return _&&CoordinateArrays.reverse(F),F};OffsetCurveBuilder.prototype.computeSingleSidedBufferCurve=function d(s,f,_){var S=this.simplifyTolerance(this._distance);if(f){_.addSegments(s,!0);var T=BufferInputLineSimplifier.simplify(s,-S),F=T.length-1;_.initSideSegments(T[F],T[F-1],Position.LEFT),_.addFirstSegment();for(var M=F-2;M>=0;M--)_.addNextSegment(T[M],!0)}else{_.addSegments(s,!1);var P=BufferInputLineSimplifier.simplify(s,S),H=P.length-1;_.initSideSegments(P[0],P[1],Position.LEFT),_.addFirstSegment();for(var J=2;J<=H;J++)_.addNextSegment(P[J],!0)}_.addLastSegment(),_.closeRing()};OffsetCurveBuilder.prototype.computeRingBufferCurve=function d(s,f,_){var S=this.simplifyTolerance(this._distance);f===Position.RIGHT&&(S=-S);var T=BufferInputLineSimplifier.simplify(s,S),F=T.length-1;_.initSideSegments(T[F-1],T[0],f);for(var M=1;M<=F;M++){var P=M!==1;_.addNextSegment(T[M],P)}_.closeRing()};OffsetCurveBuilder.prototype.computeLineBufferCurve=function d(s,f){var _=this.simplifyTolerance(this._distance),S=BufferInputLineSimplifier.simplify(s,_),T=S.length-1;f.initSideSegments(S[0],S[1],Position.LEFT);for(var F=2;F<=T;F++)f.addNextSegment(S[F],!0);f.addLastSegment(),f.addLineEndCap(S[T-1],S[T]);var M=BufferInputLineSimplifier.simplify(s,-_),P=M.length-1;f.initSideSegments(M[P],M[P-1],Position.LEFT);for(var H=P-2;H>=0;H--)f.addNextSegment(M[H],!0);f.addLastSegment(),f.addLineEndCap(M[1],M[0]),f.closeRing()};OffsetCurveBuilder.prototype.computePointCurve=function d(s,f){switch(this._bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:f.createCircle(s);break;case BufferParameters.CAP_SQUARE:f.createSquare(s);break}};OffsetCurveBuilder.prototype.getLineCurve=function d(s,f){if(this._distance=f,f<0&&!this._bufParams.isSingleSided()||f===0)return null;var _=Math.abs(f),S=this.getSegGen(_);if(s.length<=1)this.computePointCurve(s[0],S);else if(this._bufParams.isSingleSided()){var T=f<0;this.computeSingleSidedBufferCurve(s,T,S)}else this.computeLineBufferCurve(s,S);var F=S.getCoordinates();return F};OffsetCurveBuilder.prototype.getBufferParameters=function d(){return this._bufParams};OffsetCurveBuilder.prototype.simplifyTolerance=function d(s){return s*this._bufParams.getSimplifyFactor()};OffsetCurveBuilder.prototype.getRingCurve=function d(s,f,_){if(this._distance=_,s.length<=2)return this.getLineCurve(s,_);if(_===0)return OffsetCurveBuilder.copyCoordinates(s);var S=this.getSegGen(_);return this.computeRingBufferCurve(s,f,S),S.getCoordinates()};OffsetCurveBuilder.prototype.computeOffsetCurve=function d(s,f,_){var S=this.simplifyTolerance(this._distance);if(f){var T=BufferInputLineSimplifier.simplify(s,-S),F=T.length-1;_.initSideSegments(T[F],T[F-1],Position.LEFT),_.addFirstSegment();for(var M=F-2;M>=0;M--)_.addNextSegment(T[M],!0)}else{var P=BufferInputLineSimplifier.simplify(s,S),H=P.length-1;_.initSideSegments(P[0],P[1],Position.LEFT),_.addFirstSegment();for(var J=2;J<=H;J++)_.addNextSegment(P[J],!0)}_.addLastSegment()};OffsetCurveBuilder.prototype.getSegGen=function d(s){return new OffsetSegmentGenerator(this._precisionModel,this._bufParams,s)};OffsetCurveBuilder.prototype.interfaces_=function d(){return[]};OffsetCurveBuilder.prototype.getClass=function d(){return OffsetCurveBuilder};OffsetCurveBuilder.copyCoordinates=function d(s){for(var f=new Array(s.length).fill(null),_=0;_<f.length;_++)f[_]=new Coordinate(s[_]);return f};var SubgraphDepthLocater=function d(){this._subgraphs=null,this._seg=new LineSegment,this._cga=new CGAlgorithms;var s=arguments[0];this._subgraphs=s},staticAccessors$30={DepthSegment:{configurable:!0}};SubgraphDepthLocater.prototype.findStabbedSegments=function d(){var s=this;if(arguments.length===1){for(var f=arguments[0],_=new ArrayList,S=this._subgraphs.iterator();S.hasNext();){var T=S.next(),F=T.getEnvelope();f.y<F.getMinY()||f.y>F.getMaxY()||s.findStabbedSegments(f,T.getDirectedEdges(),_)}return _}else if(arguments.length===3){if(hasInterface(arguments[2],List)&&arguments[0]instanceof Coordinate&&arguments[1]instanceof DirectedEdge)for(var M=arguments[0],P=arguments[1],H=arguments[2],J=P.getEdge().getCoordinates(),K=0;K<J.length-1;K++){s._seg.p0=J[K],s._seg.p1=J[K+1],s._seg.p0.y>s._seg.p1.y&&s._seg.reverse();var oe=Math.max(s._seg.p0.x,s._seg.p1.x);if(!(oe<M.x)&&!s._seg.isHorizontal()&&!(M.y<s._seg.p0.y||M.y>s._seg.p1.y)&&CGAlgorithms.computeOrientation(s._seg.p0,s._seg.p1,M)!==CGAlgorithms.RIGHT){var se=P.getDepth(Position.LEFT);s._seg.p0.equals(J[K])||(se=P.getDepth(Position.RIGHT));var ae=new DepthSegment(s._seg,se);H.add(ae)}}else if(hasInterface(arguments[2],List)&&arguments[0]instanceof Coordinate&&hasInterface(arguments[1],List))for(var ge=arguments[0],he=arguments[1],Be=arguments[2],pe=he.iterator();pe.hasNext();){var be=pe.next();be.isForward()&&s.findStabbedSegments(ge,be,Be)}}};SubgraphDepthLocater.prototype.getDepth=function d(s){var f=this.findStabbedSegments(s);if(f.size()===0)return 0;var _=Collections.min(f);return _._leftDepth};SubgraphDepthLocater.prototype.interfaces_=function d(){return[]};SubgraphDepthLocater.prototype.getClass=function d(){return SubgraphDepthLocater};staticAccessors$30.DepthSegment.get=function(){return DepthSegment};Object.defineProperties(SubgraphDepthLocater,staticAccessors$30);var DepthSegment=function d(){this._upwardSeg=null,this._leftDepth=null;var s=arguments[0],f=arguments[1];this._upwardSeg=new LineSegment(s),this._leftDepth=f};DepthSegment.prototype.compareTo=function d(s){var f=s;if(this._upwardSeg.minX()>=f._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=f._upwardSeg.minX())return-1;var _=this._upwardSeg.orientationIndex(f._upwardSeg);return _!==0||(_=-1*f._upwardSeg.orientationIndex(this._upwardSeg),_!==0)?_:this._upwardSeg.compareTo(f._upwardSeg)};DepthSegment.prototype.compareX=function d(s,f){var _=s.p0.compareTo(f.p0);return _!==0?_:s.p1.compareTo(f.p1)};DepthSegment.prototype.toString=function d(){return this._upwardSeg.toString()};DepthSegment.prototype.interfaces_=function d(){return[Comparable]};DepthSegment.prototype.getClass=function d(){return DepthSegment};var Triangle=function d(s,f,_){this.p0=s||null,this.p1=f||null,this.p2=_||null};Triangle.prototype.area=function d(){return Triangle.area(this.p0,this.p1,this.p2)};Triangle.prototype.signedArea=function d(){return Triangle.signedArea(this.p0,this.p1,this.p2)};Triangle.prototype.interpolateZ=function d(s){if(s===null)throw new IllegalArgumentException("Supplied point is null.");return Triangle.interpolateZ(s,this.p0,this.p1,this.p2)};Triangle.prototype.longestSideLength=function d(){return Triangle.longestSideLength(this.p0,this.p1,this.p2)};Triangle.prototype.isAcute=function d(){return Triangle.isAcute(this.p0,this.p1,this.p2)};Triangle.prototype.circumcentre=function d(){return Triangle.circumcentre(this.p0,this.p1,this.p2)};Triangle.prototype.area3D=function d(){return Triangle.area3D(this.p0,this.p1,this.p2)};Triangle.prototype.centroid=function d(){return Triangle.centroid(this.p0,this.p1,this.p2)};Triangle.prototype.inCentre=function d(){return Triangle.inCentre(this.p0,this.p1,this.p2)};Triangle.prototype.interfaces_=function d(){return[]};Triangle.prototype.getClass=function d(){return Triangle};Triangle.area=function d(s,f,_){return Math.abs(((_.x-s.x)*(f.y-s.y)-(f.x-s.x)*(_.y-s.y))/2)};Triangle.signedArea=function d(s,f,_){return((_.x-s.x)*(f.y-s.y)-(f.x-s.x)*(_.y-s.y))/2};Triangle.det=function d(s,f,_,S){return s*S-f*_};Triangle.interpolateZ=function d(s,f,_,S){var T=f.x,F=f.y,M=_.x-T,P=S.x-T,H=_.y-F,J=S.y-F,K=M*J-P*H,oe=s.x-T,se=s.y-F,ae=(J*oe-P*se)/K,ge=(-H*oe+M*se)/K,he=f.z+ae*(_.z-f.z)+ge*(S.z-f.z);return he};Triangle.longestSideLength=function d(s,f,_){var S=s.distance(f),T=f.distance(_),F=_.distance(s),M=S;return T>M&&(M=T),F>M&&(M=F),M};Triangle.isAcute=function d(s,f,_){return!(!Angle.isAcute(s,f,_)||!Angle.isAcute(f,_,s)||!Angle.isAcute(_,s,f))};Triangle.circumcentre=function d(s,f,_){var S=_.x,T=_.y,F=s.x-S,M=s.y-T,P=f.x-S,H=f.y-T,J=2*Triangle.det(F,M,P,H),K=Triangle.det(M,F*F+M*M,H,P*P+H*H),oe=Triangle.det(F,F*F+M*M,P,P*P+H*H),se=S-K/J,ae=T+oe/J;return new Coordinate(se,ae)};Triangle.perpendicularBisector=function d(s,f){var _=f.x-s.x,S=f.y-s.y,T=new HCoordinate(s.x+_/2,s.y+S/2,1),F=new HCoordinate(s.x-S+_/2,s.y+_+S/2,1);return new HCoordinate(T,F)};Triangle.angleBisector=function d(s,f,_){var S=f.distance(s),T=f.distance(_),F=S/(S+T),M=_.x-s.x,P=_.y-s.y,H=new Coordinate(s.x+F*M,s.y+F*P);return H};Triangle.area3D=function d(s,f,_){var S=f.x-s.x,T=f.y-s.y,F=f.z-s.z,M=_.x-s.x,P=_.y-s.y,H=_.z-s.z,J=T*H-F*P,K=F*M-S*H,oe=S*P-T*M,se=J*J+K*K+oe*oe,ae=Math.sqrt(se)/2;return ae};Triangle.centroid=function d(s,f,_){var S=(s.x+f.x+_.x)/3,T=(s.y+f.y+_.y)/3;return new Coordinate(S,T)};Triangle.inCentre=function d(s,f,_){var S=f.distance(_),T=s.distance(_),F=s.distance(f),M=S+T+F,P=(S*s.x+T*f.x+F*_.x)/M,H=(S*s.y+T*f.y+F*_.y)/M;return new Coordinate(P,H)};var OffsetCurveSetBuilder=function d(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ArrayList;var s=arguments[0],f=arguments[1],_=arguments[2];this._inputGeom=s,this._distance=f,this._curveBuilder=_};OffsetCurveSetBuilder.prototype.addPoint=function d(s){if(this._distance<=0)return null;var f=s.getCoordinates(),_=this._curveBuilder.getLineCurve(f,this._distance);this.addCurve(_,Location.EXTERIOR,Location.INTERIOR)};OffsetCurveSetBuilder.prototype.addPolygon=function d(s){var f=this,_=this._distance,S=Position.LEFT;this._distance<0&&(_=-this._distance,S=Position.RIGHT);var T=s.getExteriorRing(),F=CoordinateArrays.removeRepeatedPoints(T.getCoordinates());if(this._distance<0&&this.isErodedCompletely(T,this._distance)||this._distance<=0&&F.length<3)return null;this.addPolygonRing(F,_,S,Location.EXTERIOR,Location.INTERIOR);for(var M=0;M<s.getNumInteriorRing();M++){var P=s.getInteriorRingN(M),H=CoordinateArrays.removeRepeatedPoints(P.getCoordinates());f._distance>0&&f.isErodedCompletely(P,-f._distance)||f.addPolygonRing(H,_,Position.opposite(S),Location.INTERIOR,Location.EXTERIOR)}};OffsetCurveSetBuilder.prototype.isTriangleErodedCompletely=function d(s,f){var _=new Triangle(s[0],s[1],s[2]),S=_.inCentre(),T=CGAlgorithms.distancePointLine(S,_.p0,_.p1);return T<Math.abs(f)};OffsetCurveSetBuilder.prototype.addLineString=function d(s){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var f=CoordinateArrays.removeRepeatedPoints(s.getCoordinates()),_=this._curveBuilder.getLineCurve(f,this._distance);this.addCurve(_,Location.EXTERIOR,Location.INTERIOR)};OffsetCurveSetBuilder.prototype.addCurve=function d(s,f,_){if(s===null||s.length<2)return null;var S=new NodedSegmentString(s,new Label(0,Location.BOUNDARY,f,_));this._curveList.add(S)};OffsetCurveSetBuilder.prototype.getCurves=function d(){return this.add(this._inputGeom),this._curveList};OffsetCurveSetBuilder.prototype.addPolygonRing=function d(s,f,_,S,T){if(f===0&&s.length<LinearRing.MINIMUM_VALID_SIZE)return null;var F=S,M=T;s.length>=LinearRing.MINIMUM_VALID_SIZE&&CGAlgorithms.isCCW(s)&&(F=T,M=S,_=Position.opposite(_));var P=this._curveBuilder.getRingCurve(s,_,f);this.addCurve(P,F,M)};OffsetCurveSetBuilder.prototype.add=function d(s){if(s.isEmpty())return null;s instanceof Polygon?this.addPolygon(s):s instanceof LineString?this.addLineString(s):s instanceof Point?this.addPoint(s):s instanceof MultiPoint?this.addCollection(s):s instanceof MultiLineString?this.addCollection(s):s instanceof MultiPolygon?this.addCollection(s):s instanceof GeometryCollection&&this.addCollection(s)};OffsetCurveSetBuilder.prototype.isErodedCompletely=function d(s,f){var _=s.getCoordinates();if(_.length<4)return f<0;if(_.length===4)return this.isTriangleErodedCompletely(_,f);var S=s.getEnvelopeInternal(),T=Math.min(S.getHeight(),S.getWidth());return f<0&&2*Math.abs(f)>T};OffsetCurveSetBuilder.prototype.addCollection=function d(s){for(var f=this,_=0;_<s.getNumGeometries();_++){var S=s.getGeometryN(_);f.add(S)}};OffsetCurveSetBuilder.prototype.interfaces_=function d(){return[]};OffsetCurveSetBuilder.prototype.getClass=function d(){return OffsetCurveSetBuilder};var PointOnGeometryLocator=function d(){};PointOnGeometryLocator.prototype.locate=function d(s){};PointOnGeometryLocator.prototype.interfaces_=function d(){return[]};PointOnGeometryLocator.prototype.getClass=function d(){return PointOnGeometryLocator};var GeometryCollectionIterator=function d(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var s=arguments[0];this._parent=s,this._atStart=!0,this._index=0,this._max=s.getNumGeometries()};GeometryCollectionIterator.prototype.next=function d(){if(this._atStart)return this._atStart=!1,GeometryCollectionIterator.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new NoSuchElementException;var s=this._parent.getGeometryN(this._index++);return s instanceof GeometryCollection?(this._subcollectionIterator=new GeometryCollectionIterator(s),this._subcollectionIterator.next()):s};GeometryCollectionIterator.prototype.remove=function d(){throw new Error(this.getClass().getName())};GeometryCollectionIterator.prototype.hasNext=function d(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};GeometryCollectionIterator.prototype.interfaces_=function d(){return[Iterator$1]};GeometryCollectionIterator.prototype.getClass=function d(){return GeometryCollectionIterator};GeometryCollectionIterator.isAtomic=function d(s){return!(s instanceof GeometryCollection)};var SimplePointInAreaLocator=function d(){this._geom=null;var s=arguments[0];this._geom=s};SimplePointInAreaLocator.prototype.locate=function d(s){return SimplePointInAreaLocator.locate(s,this._geom)};SimplePointInAreaLocator.prototype.interfaces_=function d(){return[PointOnGeometryLocator]};SimplePointInAreaLocator.prototype.getClass=function d(){return SimplePointInAreaLocator};SimplePointInAreaLocator.isPointInRing=function d(s,f){return f.getEnvelopeInternal().intersects(s)?CGAlgorithms.isPointInRing(s,f.getCoordinates()):!1};SimplePointInAreaLocator.containsPointInPolygon=function d(s,f){if(f.isEmpty())return!1;var _=f.getExteriorRing();if(!SimplePointInAreaLocator.isPointInRing(s,_))return!1;for(var S=0;S<f.getNumInteriorRing();S++){var T=f.getInteriorRingN(S);if(SimplePointInAreaLocator.isPointInRing(s,T))return!1}return!0};SimplePointInAreaLocator.containsPoint=function d(s,f){if(f instanceof Polygon)return SimplePointInAreaLocator.containsPointInPolygon(s,f);if(f instanceof GeometryCollection)for(var _=new GeometryCollectionIterator(f);_.hasNext();){var S=_.next();if(S!==f&&SimplePointInAreaLocator.containsPoint(s,S))return!0}return!1};SimplePointInAreaLocator.locate=function d(s,f){return f.isEmpty()?Location.EXTERIOR:SimplePointInAreaLocator.containsPoint(s,f)?Location.INTERIOR:Location.EXTERIOR};var EdgeEndStar=function d(){this._edgeMap=new TreeMap,this._edgeList=null,this._ptInAreaLocation=[Location.NONE,Location.NONE]};EdgeEndStar.prototype.getNextCW=function d(s){this.getEdges();var f=this._edgeList.indexOf(s),_=f-1;return f===0&&(_=this._edgeList.size()-1),this._edgeList.get(_)};EdgeEndStar.prototype.propagateSideLabels=function d(s){for(var f=Location.NONE,_=this.iterator();_.hasNext();){var S=_.next(),T=S.getLabel();T.isArea(s)&&T.getLocation(s,Position.LEFT)!==Location.NONE&&(f=T.getLocation(s,Position.LEFT))}if(f===Location.NONE)return null;for(var F=f,M=this.iterator();M.hasNext();){var P=M.next(),H=P.getLabel();if(H.getLocation(s,Position.ON)===Location.NONE&&H.setLocation(s,Position.ON,F),H.isArea(s)){var J=H.getLocation(s,Position.LEFT),K=H.getLocation(s,Position.RIGHT);if(K!==Location.NONE){if(K!==F)throw new TopologyException("side location conflict",P.getCoordinate());J===Location.NONE&&Assert.shouldNeverReachHere("found single null side (at "+P.getCoordinate()+")"),F=J}else Assert.isTrue(H.getLocation(s,Position.LEFT)===Location.NONE,"found single null side"),H.setLocation(s,Position.RIGHT,F),H.setLocation(s,Position.LEFT,F)}}};EdgeEndStar.prototype.getCoordinate=function d(){var s=this.iterator();if(!s.hasNext())return null;var f=s.next();return f.getCoordinate()};EdgeEndStar.prototype.print=function d(s){System.out.println("EdgeEndStar:   "+this.getCoordinate());for(var f=this.iterator();f.hasNext();){var _=f.next();_.print(s)}};EdgeEndStar.prototype.isAreaLabelsConsistent=function d(s){return this.computeEdgeEndLabels(s.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};EdgeEndStar.prototype.checkAreaLabelsConsistent=function d(s){var f=this.getEdges();if(f.size()<=0)return!0;var _=f.size()-1,S=f.get(_).getLabel(),T=S.getLocation(s,Position.LEFT);Assert.isTrue(T!==Location.NONE,"Found unlabelled area edge");for(var F=T,M=this.iterator();M.hasNext();){var P=M.next(),H=P.getLabel();Assert.isTrue(H.isArea(s),"Found non-area edge");var J=H.getLocation(s,Position.LEFT),K=H.getLocation(s,Position.RIGHT);if(J===K||K!==F)return!1;F=J}return!0};EdgeEndStar.prototype.findIndex=function d(s){var f=this;this.iterator();for(var _=0;_<this._edgeList.size();_++){var S=f._edgeList.get(_);if(S===s)return _}return-1};EdgeEndStar.prototype.iterator=function d(){return this.getEdges().iterator()};EdgeEndStar.prototype.getEdges=function d(){return this._edgeList===null&&(this._edgeList=new ArrayList(this._edgeMap.values())),this._edgeList};EdgeEndStar.prototype.getLocation=function d(s,f,_){return this._ptInAreaLocation[s]===Location.NONE&&(this._ptInAreaLocation[s]=SimplePointInAreaLocator.locate(f,_[s].getGeometry())),this._ptInAreaLocation[s]};EdgeEndStar.prototype.toString=function d(){var s=new StringBuffer;s.append("EdgeEndStar:   "+this.getCoordinate()),s.append(`
`);for(var f=this.iterator();f.hasNext();){var _=f.next();s.append(_),s.append(`
`)}return s.toString()};EdgeEndStar.prototype.computeEdgeEndLabels=function d(s){for(var f=this.iterator();f.hasNext();){var _=f.next();_.computeLabel(s)}};EdgeEndStar.prototype.computeLabelling=function d(s){var f=this;this.computeEdgeEndLabels(s[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var _=[!1,!1],S=this.iterator();S.hasNext();)for(var T=S.next(),F=T.getLabel(),M=0;M<2;M++)F.isLine(M)&&F.getLocation(M)===Location.BOUNDARY&&(_[M]=!0);for(var P=this.iterator();P.hasNext();)for(var H=P.next(),J=H.getLabel(),K=0;K<2;K++)if(J.isAnyNull(K)){var oe=Location.NONE;if(_[K])oe=Location.EXTERIOR;else{var se=H.getCoordinate();oe=f.getLocation(K,se,s)}J.setAllLocationsIfNull(K,oe)}};EdgeEndStar.prototype.getDegree=function d(){return this._edgeMap.size()};EdgeEndStar.prototype.insertEdgeEnd=function d(s,f){this._edgeMap.put(s,f),this._edgeList=null};EdgeEndStar.prototype.interfaces_=function d(){return[]};EdgeEndStar.prototype.getClass=function d(){return EdgeEndStar};var DirectedEdgeStar=function(d){function s(){d.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.linkResultDirectedEdges=function(){var _=this;this.getResultAreaEdges();for(var S=null,T=null,F=this._SCANNING_FOR_INCOMING,M=0;M<this._resultAreaEdgeList.size();M++){var P=_._resultAreaEdgeList.get(M),H=P.getSym();if(P.getLabel().isArea())switch(S===null&&P.isInResult()&&(S=P),F){case _._SCANNING_FOR_INCOMING:if(!H.isInResult())continue;T=H,F=_._LINKING_TO_OUTGOING;break;case _._LINKING_TO_OUTGOING:if(!P.isInResult())continue;T.setNext(P),F=_._SCANNING_FOR_INCOMING;break}}if(F===this._LINKING_TO_OUTGOING){if(S===null)throw new TopologyException("no outgoing dirEdge found",this.getCoordinate());Assert.isTrue(S.isInResult(),"unable to link last incoming dirEdge"),T.setNext(S)}},s.prototype.insert=function(_){var S=_;this.insertEdgeEnd(S,S)},s.prototype.getRightmostEdge=function(){var _=this.getEdges(),S=_.size();if(S<1)return null;var T=_.get(0);if(S===1)return T;var F=_.get(S-1),M=T.getQuadrant(),P=F.getQuadrant();return Quadrant.isNorthern(M)&&Quadrant.isNorthern(P)?T:!Quadrant.isNorthern(M)&&!Quadrant.isNorthern(P)?F:T.getDy()!==0?T:F.getDy()!==0?F:(Assert.shouldNeverReachHere("found two horizontal edges incident on node"),null)},s.prototype.print=function(_){System.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var S=this.iterator();S.hasNext();){var T=S.next();_.print("out "),T.print(_),_.println(),_.print("in "),T.getSym().print(_),_.println()}},s.prototype.getResultAreaEdges=function(){var _=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ArrayList;for(var S=this.iterator();S.hasNext();){var T=S.next();(T.isInResult()||T.getSym().isInResult())&&_._resultAreaEdgeList.add(T)}return this._resultAreaEdgeList},s.prototype.updateLabelling=function(_){for(var S=this.iterator();S.hasNext();){var T=S.next(),F=T.getLabel();F.setAllLocationsIfNull(0,_.getLocation(0)),F.setAllLocationsIfNull(1,_.getLocation(1))}},s.prototype.linkAllDirectedEdges=function(){var _=this;this.getEdges();for(var S=null,T=null,F=this._edgeList.size()-1;F>=0;F--){var M=_._edgeList.get(F),P=M.getSym();T===null&&(T=P),S!==null&&P.setNext(S),S=M}T.setNext(S)},s.prototype.computeDepths=function(){var _=this;if(arguments.length===1){var S=arguments[0],T=this.findIndex(S),F=S.getDepth(Position.LEFT),M=S.getDepth(Position.RIGHT),P=this.computeDepths(T+1,this._edgeList.size(),F),H=this.computeDepths(0,T,P);if(H!==M)throw new TopologyException("depth mismatch at "+S.getCoordinate())}else if(arguments.length===3){for(var J=arguments[0],K=arguments[1],oe=arguments[2],se=oe,ae=J;ae<K;ae++){var ge=_._edgeList.get(ae);ge.setEdgeDepths(Position.RIGHT,se),se=ge.getDepth(Position.LEFT)}return se}},s.prototype.mergeSymLabels=function(){for(var _=this.iterator();_.hasNext();){var S=_.next(),T=S.getLabel();T.merge(S.getSym().getLabel())}},s.prototype.linkMinimalDirectedEdges=function(_){for(var S=this,T=null,F=null,M=this._SCANNING_FOR_INCOMING,P=this._resultAreaEdgeList.size()-1;P>=0;P--){var H=S._resultAreaEdgeList.get(P),J=H.getSym();switch(T===null&&H.getEdgeRing()===_&&(T=H),M){case S._SCANNING_FOR_INCOMING:if(J.getEdgeRing()!==_)continue;F=J,M=S._LINKING_TO_OUTGOING;break;case S._LINKING_TO_OUTGOING:if(H.getEdgeRing()!==_)continue;F.setNextMin(H),M=S._SCANNING_FOR_INCOMING;break}}M===this._LINKING_TO_OUTGOING&&(Assert.isTrue(T!==null,"found null for first outgoing dirEdge"),Assert.isTrue(T.getEdgeRing()===_,"unable to link last incoming dirEdge"),F.setNextMin(T))},s.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var _=0,S=this.iterator();S.hasNext();){var T=S.next();T.isInResult()&&_++}return _}else if(arguments.length===1){for(var F=arguments[0],M=0,P=this.iterator();P.hasNext();){var H=P.next();H.getEdgeRing()===F&&M++}return M}},s.prototype.getLabel=function(){return this._label},s.prototype.findCoveredLineEdges=function(){for(var _=Location.NONE,S=this.iterator();S.hasNext();){var T=S.next(),F=T.getSym();if(!T.isLineEdge()){if(T.isInResult()){_=Location.INTERIOR;break}if(F.isInResult()){_=Location.EXTERIOR;break}}}if(_===Location.NONE)return null;for(var M=_,P=this.iterator();P.hasNext();){var H=P.next(),J=H.getSym();H.isLineEdge()?H.getEdge().setCovered(M===Location.INTERIOR):(H.isInResult()&&(M=Location.EXTERIOR),J.isInResult()&&(M=Location.INTERIOR))}},s.prototype.computeLabelling=function(_){var S=this;d.prototype.computeLabelling.call(this,_),this._label=new Label(Location.NONE);for(var T=this.iterator();T.hasNext();)for(var F=T.next(),M=F.getEdge(),P=M.getLabel(),H=0;H<2;H++){var J=P.getLocation(H);(J===Location.INTERIOR||J===Location.BOUNDARY)&&S._label.setLocation(H,Location.INTERIOR)}},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(EdgeEndStar),OverlayNodeFactory=function(d){function s(){d.apply(this,arguments)}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.createNode=function(_){return new Node$1(_,new DirectedEdgeStar)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(NodeFactory),OrientedCoordinateArray=function d(){this._pts=null,this._orientation=null;var s=arguments[0];this._pts=s,this._orientation=d.orientation(s)};OrientedCoordinateArray.prototype.compareTo=function d(s){var f=s,_=OrientedCoordinateArray.compareOriented(this._pts,this._orientation,f._pts,f._orientation);return _};OrientedCoordinateArray.prototype.interfaces_=function d(){return[Comparable]};OrientedCoordinateArray.prototype.getClass=function d(){return OrientedCoordinateArray};OrientedCoordinateArray.orientation=function d(s){return CoordinateArrays.increasingDirection(s)===1};OrientedCoordinateArray.compareOriented=function d(s,f,_,S){for(var T=f?1:-1,F=S?1:-1,M=f?s.length:-1,P=S?_.length:-1,H=f?0:s.length-1,J=S?0:_.length-1;;){var K=s[H].compareTo(_[J]);if(K!==0)return K;H+=T,J+=F;var oe=H===M,se=J===P;if(oe&&!se)return-1;if(!oe&&se)return 1;if(oe&&se)return 0}};var EdgeList=function d(){this._edges=new ArrayList,this._ocaMap=new TreeMap};EdgeList.prototype.print=function d(s){var f=this;s.print("MULTILINESTRING ( ");for(var _=0;_<this._edges.size();_++){var S=f._edges.get(_);_>0&&s.print(","),s.print("(");for(var T=S.getCoordinates(),F=0;F<T.length;F++)F>0&&s.print(","),s.print(T[F].x+" "+T[F].y);s.println(")")}s.print(")  ")};EdgeList.prototype.addAll=function d(s){for(var f=this,_=s.iterator();_.hasNext();)f.add(_.next())};EdgeList.prototype.findEdgeIndex=function d(s){for(var f=this,_=0;_<this._edges.size();_++)if(f._edges.get(_).equals(s))return _;return-1};EdgeList.prototype.iterator=function d(){return this._edges.iterator()};EdgeList.prototype.getEdges=function d(){return this._edges};EdgeList.prototype.get=function d(s){return this._edges.get(s)};EdgeList.prototype.findEqualEdge=function d(s){var f=new OrientedCoordinateArray(s.getCoordinates()),_=this._ocaMap.get(f);return _};EdgeList.prototype.add=function d(s){this._edges.add(s);var f=new OrientedCoordinateArray(s.getCoordinates());this._ocaMap.put(f,s)};EdgeList.prototype.interfaces_=function d(){return[]};EdgeList.prototype.getClass=function d(){return EdgeList};var SegmentIntersector=function d(){};SegmentIntersector.prototype.processIntersections=function d(s,f,_,S){};SegmentIntersector.prototype.isDone=function d(){};SegmentIntersector.prototype.interfaces_=function d(){return[]};SegmentIntersector.prototype.getClass=function d(){return SegmentIntersector};var IntersectionAdder=function d(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var s=arguments[0];this._li=s};IntersectionAdder.prototype.isTrivialIntersection=function d(s,f,_,S){if(s===_&&this._li.getIntersectionNum()===1){if(IntersectionAdder.isAdjacentSegments(f,S))return!0;if(s.isClosed()){var T=s.size()-1;if(f===0&&S===T||S===0&&f===T)return!0}}return!1};IntersectionAdder.prototype.getProperIntersectionPoint=function d(){return this._properIntersectionPoint};IntersectionAdder.prototype.hasProperInteriorIntersection=function d(){return this._hasProperInterior};IntersectionAdder.prototype.getLineIntersector=function d(){return this._li};IntersectionAdder.prototype.hasProperIntersection=function d(){return this._hasProper};IntersectionAdder.prototype.processIntersections=function d(s,f,_,S){if(s===_&&f===S)return null;this.numTests++;var T=s.getCoordinates()[f],F=s.getCoordinates()[f+1],M=_.getCoordinates()[S],P=_.getCoordinates()[S+1];this._li.computeIntersection(T,F,M,P),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(s,f,_,S)||(this._hasIntersection=!0,s.addIntersections(this._li,f,0),_.addIntersections(this._li,S,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};IntersectionAdder.prototype.hasIntersection=function d(){return this._hasIntersection};IntersectionAdder.prototype.isDone=function d(){return!1};IntersectionAdder.prototype.hasInteriorIntersection=function d(){return this._hasInterior};IntersectionAdder.prototype.interfaces_=function d(){return[SegmentIntersector]};IntersectionAdder.prototype.getClass=function d(){return IntersectionAdder};IntersectionAdder.isAdjacentSegments=function d(s,f){return Math.abs(s-f)===1};var EdgeIntersection=function d(){this.coord=null,this.segmentIndex=null,this.dist=null;var s=arguments[0],f=arguments[1],_=arguments[2];this.coord=new Coordinate(s),this.segmentIndex=f,this.dist=_};EdgeIntersection.prototype.getSegmentIndex=function d(){return this.segmentIndex};EdgeIntersection.prototype.getCoordinate=function d(){return this.coord};EdgeIntersection.prototype.print=function d(s){s.print(this.coord),s.print(" seg # = "+this.segmentIndex),s.println(" dist = "+this.dist)};EdgeIntersection.prototype.compareTo=function d(s){var f=s;return this.compare(f.segmentIndex,f.dist)};EdgeIntersection.prototype.isEndPoint=function d(s){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===s};EdgeIntersection.prototype.toString=function d(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};EdgeIntersection.prototype.getDistance=function d(){return this.dist};EdgeIntersection.prototype.compare=function d(s,f){return this.segmentIndex<s?-1:this.segmentIndex>s?1:this.dist<f?-1:this.dist>f?1:0};EdgeIntersection.prototype.interfaces_=function d(){return[Comparable]};EdgeIntersection.prototype.getClass=function d(){return EdgeIntersection};var EdgeIntersectionList=function d(){this._nodeMap=new TreeMap,this.edge=null;var s=arguments[0];this.edge=s};EdgeIntersectionList.prototype.print=function d(s){s.println("Intersections:");for(var f=this.iterator();f.hasNext();){var _=f.next();_.print(s)}};EdgeIntersectionList.prototype.iterator=function d(){return this._nodeMap.values().iterator()};EdgeIntersectionList.prototype.addSplitEdges=function d(s){var f=this;this.addEndpoints();for(var _=this.iterator(),S=_.next();_.hasNext();){var T=_.next(),F=f.createSplitEdge(S,T);s.add(F),S=T}};EdgeIntersectionList.prototype.addEndpoints=function d(){var s=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[s],s,0)};EdgeIntersectionList.prototype.createSplitEdge=function d(s,f){var _=this,S=f.segmentIndex-s.segmentIndex+2,T=this.edge.pts[f.segmentIndex],F=f.dist>0||!f.coord.equals2D(T);F||S--;var M=new Array(S).fill(null),P=0;M[P++]=new Coordinate(s.coord);for(var H=s.segmentIndex+1;H<=f.segmentIndex;H++)M[P++]=_.edge.pts[H];return F&&(M[P]=f.coord),new Edge(M,new Label(this.edge._label))};EdgeIntersectionList.prototype.add=function d(s,f,_){var S=new EdgeIntersection(s,f,_),T=this._nodeMap.get(S);return T!==null?T:(this._nodeMap.put(S,S),S)};EdgeIntersectionList.prototype.isIntersection=function d(s){for(var f=this.iterator();f.hasNext();){var _=f.next();if(_.coord.equals(s))return!0}return!1};EdgeIntersectionList.prototype.interfaces_=function d(){return[]};EdgeIntersectionList.prototype.getClass=function d(){return EdgeIntersectionList};var MonotoneChainIndexer=function d(){};MonotoneChainIndexer.prototype.getChainStartIndices=function d(s){var f=this,_=0,S=new ArrayList;S.add(new Integer(_));do{var T=f.findChainEnd(s,_);S.add(new Integer(T)),_=T}while(_<s.length-1);var F=MonotoneChainIndexer.toIntArray(S);return F};MonotoneChainIndexer.prototype.findChainEnd=function d(s,f){for(var _=Quadrant.quadrant(s[f],s[f+1]),S=f+1;S<s.length;){var T=Quadrant.quadrant(s[S-1],s[S]);if(T!==_)break;S++}return S-1};MonotoneChainIndexer.prototype.interfaces_=function d(){return[]};MonotoneChainIndexer.prototype.getClass=function d(){return MonotoneChainIndexer};MonotoneChainIndexer.toIntArray=function d(s){for(var f=new Array(s.size()).fill(null),_=0;_<f.length;_++)f[_]=s.get(_).intValue();return f};var MonotoneChainEdge=function d(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Envelope,this.env2=new Envelope;var s=arguments[0];this.e=s,this.pts=s.getCoordinates();var f=new MonotoneChainIndexer;this.startIndex=f.getChainStartIndices(this.pts)};MonotoneChainEdge.prototype.getCoordinates=function d(){return this.pts};MonotoneChainEdge.prototype.getMaxX=function d(s){var f=this.pts[this.startIndex[s]].x,_=this.pts[this.startIndex[s+1]].x;return f>_?f:_};MonotoneChainEdge.prototype.getMinX=function d(s){var f=this.pts[this.startIndex[s]].x,_=this.pts[this.startIndex[s+1]].x;return f<_?f:_};MonotoneChainEdge.prototype.computeIntersectsForChain=function d(){if(arguments.length===4){var s=arguments[0],f=arguments[1],_=arguments[2],S=arguments[3];this.computeIntersectsForChain(this.startIndex[s],this.startIndex[s+1],f,f.startIndex[_],f.startIndex[_+1],S)}else if(arguments.length===6){var T=arguments[0],F=arguments[1],M=arguments[2],P=arguments[3],H=arguments[4],J=arguments[5],K=this.pts[T],oe=this.pts[F],se=M.pts[P],ae=M.pts[H];if(F-T===1&&H-P===1)return J.addIntersections(this.e,T,M.e,P),null;if(this.env1.init(K,oe),this.env2.init(se,ae),!this.env1.intersects(this.env2))return null;var ge=Math.trunc((T+F)/2),he=Math.trunc((P+H)/2);T<ge&&(P<he&&this.computeIntersectsForChain(T,ge,M,P,he,J),he<H&&this.computeIntersectsForChain(T,ge,M,he,H,J)),ge<F&&(P<he&&this.computeIntersectsForChain(ge,F,M,P,he,J),he<H&&this.computeIntersectsForChain(ge,F,M,he,H,J))}};MonotoneChainEdge.prototype.getStartIndexes=function d(){return this.startIndex};MonotoneChainEdge.prototype.computeIntersects=function d(s,f){for(var _=this,S=0;S<this.startIndex.length-1;S++)for(var T=0;T<s.startIndex.length-1;T++)_.computeIntersectsForChain(S,s,T,f)};MonotoneChainEdge.prototype.interfaces_=function d(){return[]};MonotoneChainEdge.prototype.getClass=function d(){return MonotoneChainEdge};var Depth=function d(){var s=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var f=0;f<2;f++)for(var _=0;_<3;_++)s._depth[f][_]=d.NULL_VALUE},staticAccessors$31={NULL_VALUE:{configurable:!0}};Depth.prototype.getDepth=function d(s,f){return this._depth[s][f]};Depth.prototype.setDepth=function d(s,f,_){this._depth[s][f]=_};Depth.prototype.isNull=function d(){var s=this;if(arguments.length===0){for(var f=0;f<2;f++)for(var _=0;_<3;_++)if(s._depth[f][_]!==Depth.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var S=arguments[0];return this._depth[S][1]===Depth.NULL_VALUE}else if(arguments.length===2){var T=arguments[0],F=arguments[1];return this._depth[T][F]===Depth.NULL_VALUE}};Depth.prototype.normalize=function d(){for(var s=this,f=0;f<2;f++)if(!s.isNull(f)){var _=s._depth[f][1];s._depth[f][2]<_&&(_=s._depth[f][2]),_<0&&(_=0);for(var S=1;S<3;S++){var T=0;s._depth[f][S]>_&&(T=1),s._depth[f][S]=T}}};Depth.prototype.getDelta=function d(s){return this._depth[s][Position.RIGHT]-this._depth[s][Position.LEFT]};Depth.prototype.getLocation=function d(s,f){return this._depth[s][f]<=0?Location.EXTERIOR:Location.INTERIOR};Depth.prototype.toString=function d(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};Depth.prototype.add=function d(){var s=this;if(arguments.length===1)for(var f=arguments[0],_=0;_<2;_++)for(var S=1;S<3;S++){var T=f.getLocation(_,S);(T===Location.EXTERIOR||T===Location.INTERIOR)&&(s.isNull(_,S)?s._depth[_][S]=Depth.depthAtLocation(T):s._depth[_][S]+=Depth.depthAtLocation(T))}else if(arguments.length===3){var F=arguments[0],M=arguments[1],P=arguments[2];P===Location.INTERIOR&&this._depth[F][M]++}};Depth.prototype.interfaces_=function d(){return[]};Depth.prototype.getClass=function d(){return Depth};Depth.depthAtLocation=function d(s){return s===Location.EXTERIOR?0:s===Location.INTERIOR?1:Depth.NULL_VALUE};staticAccessors$31.NULL_VALUE.get=function(){return-1};Object.defineProperties(Depth,staticAccessors$31);var Edge=function(d){function s(){if(d.call(this),this.pts=null,this._env=null,this.eiList=new EdgeIntersectionList(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Depth,this._depthDelta=0,arguments.length===1){var f=arguments[0];s.call(this,f,null)}else if(arguments.length===2){var _=arguments[0],S=arguments[1];this.pts=_,this._label=S}}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.getDepth=function(){return this._depth},s.prototype.getCollapsedEdge=function(){var _=new Array(2).fill(null);_[0]=this.pts[0],_[1]=this.pts[1];var S=new s(_,Label.toLineLabel(this._label));return S},s.prototype.isIsolated=function(){return this._isIsolated},s.prototype.getCoordinates=function(){return this.pts},s.prototype.setIsolated=function(_){this._isIsolated=_},s.prototype.setName=function(_){this._name=_},s.prototype.equals=function(_){var S=this;if(!(_ instanceof s))return!1;var T=_;if(this.pts.length!==T.pts.length)return!1;for(var F=!0,M=!0,P=this.pts.length,H=0;H<this.pts.length;H++)if(S.pts[H].equals2D(T.pts[H])||(F=!1),S.pts[H].equals2D(T.pts[--P])||(M=!1),!F&&!M)return!1;return!0},s.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var _=arguments[0];return this.pts[_]}},s.prototype.print=function(_){var S=this;_.print("edge "+this._name+": "),_.print("LINESTRING (");for(var T=0;T<this.pts.length;T++)T>0&&_.print(","),_.print(S.pts[T].x+" "+S.pts[T].y);_.print(")  "+this._label+" "+this._depthDelta)},s.prototype.computeIM=function(_){s.updateIM(this._label,_)},s.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},s.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},s.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},s.prototype.getDepthDelta=function(){return this._depthDelta},s.prototype.getNumPoints=function(){return this.pts.length},s.prototype.printReverse=function(_){var S=this;_.print("edge "+this._name+": ");for(var T=this.pts.length-1;T>=0;T--)_.print(S.pts[T]+" ");_.println("")},s.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new MonotoneChainEdge(this)),this._mce},s.prototype.getEnvelope=function(){var _=this;if(this._env===null){this._env=new Envelope;for(var S=0;S<this.pts.length;S++)_._env.expandToInclude(_.pts[S])}return this._env},s.prototype.addIntersection=function(_,S,T,F){var M=new Coordinate(_.getIntersection(F)),P=S,H=_.getEdgeDistance(T,F),J=P+1;if(J<this.pts.length){var K=this.pts[J];M.equals2D(K)&&(P=J,H=0)}this.eiList.add(M,P,H)},s.prototype.toString=function(){var _=this,S=new StringBuffer;S.append("edge "+this._name+": "),S.append("LINESTRING (");for(var T=0;T<this.pts.length;T++)T>0&&S.append(","),S.append(_.pts[T].x+" "+_.pts[T].y);return S.append(")  "+this._label+" "+this._depthDelta),S.toString()},s.prototype.isPointwiseEqual=function(_){var S=this;if(this.pts.length!==_.pts.length)return!1;for(var T=0;T<this.pts.length;T++)if(!S.pts[T].equals2D(_.pts[T]))return!1;return!0},s.prototype.setDepthDelta=function(_){this._depthDelta=_},s.prototype.getEdgeIntersectionList=function(){return this.eiList},s.prototype.addIntersections=function(_,S,T){for(var F=this,M=0;M<_.getIntersectionNum();M++)F.addIntersection(_,S,T,M)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.updateIM=function(){if(arguments.length===2){var _=arguments[0],S=arguments[1];S.setAtLeastIfValid(_.getLocation(0,Position.ON),_.getLocation(1,Position.ON),1),_.isArea()&&(S.setAtLeastIfValid(_.getLocation(0,Position.LEFT),_.getLocation(1,Position.LEFT),2),S.setAtLeastIfValid(_.getLocation(0,Position.RIGHT),_.getLocation(1,Position.RIGHT),2))}else return d.prototype.updateIM.apply(this,arguments)},s}(GraphComponent),BufferBuilder=function d(s){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new EdgeList,this._bufParams=s||null};BufferBuilder.prototype.setWorkingPrecisionModel=function d(s){this._workingPrecisionModel=s};BufferBuilder.prototype.insertUniqueEdge=function d(s){var f=this._edgeList.findEqualEdge(s);if(f!==null){var _=f.getLabel(),S=s.getLabel();f.isPointwiseEqual(s)||(S=new Label(s.getLabel()),S.flip()),_.merge(S);var T=BufferBuilder.depthDelta(S),F=f.getDepthDelta(),M=F+T;f.setDepthDelta(M)}else this._edgeList.add(s),s.setDepthDelta(BufferBuilder.depthDelta(s.getLabel()))};BufferBuilder.prototype.buildSubgraphs=function d(s,f){for(var _=new ArrayList,S=s.iterator();S.hasNext();){var T=S.next(),F=T.getRightmostCoordinate(),M=new SubgraphDepthLocater(_),P=M.getDepth(F);T.computeDepth(P),T.findResultEdges(),_.add(T),f.add(T.getDirectedEdges(),T.getNodes())}};BufferBuilder.prototype.createSubgraphs=function d(s){for(var f=new ArrayList,_=s.getNodes().iterator();_.hasNext();){var S=_.next();if(!S.isVisited()){var T=new BufferSubgraph;T.create(S),f.add(T)}}return Collections.sort(f,Collections.reverseOrder()),f};BufferBuilder.prototype.createEmptyResultGeometry=function d(){var s=this._geomFact.createPolygon();return s};BufferBuilder.prototype.getNoder=function d(s){if(this._workingNoder!==null)return this._workingNoder;var f=new MCIndexNoder,_=new RobustLineIntersector;return _.setPrecisionModel(s),f.setSegmentIntersector(new IntersectionAdder(_)),f};BufferBuilder.prototype.buffer=function d(s,f){var _=this._workingPrecisionModel;_===null&&(_=s.getPrecisionModel()),this._geomFact=s.getFactory();var S=new OffsetCurveBuilder(_,this._bufParams),T=new OffsetCurveSetBuilder(s,f,S),F=T.getCurves();if(F.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(F,_),this._graph=new PlanarGraph(new OverlayNodeFactory),this._graph.addEdges(this._edgeList.getEdges());var M=this.createSubgraphs(this._graph),P=new PolygonBuilder(this._geomFact);this.buildSubgraphs(M,P);var H=P.getPolygons();if(H.size()<=0)return this.createEmptyResultGeometry();var J=this._geomFact.buildGeometry(H);return J};BufferBuilder.prototype.computeNodedEdges=function d(s,f){var _=this,S=this.getNoder(f);S.computeNodes(s);for(var T=S.getNodedSubstrings(),F=T.iterator();F.hasNext();){var M=F.next(),P=M.getCoordinates();if(!(P.length===2&&P[0].equals2D(P[1]))){var H=M.getData(),J=new Edge(M.getCoordinates(),new Label(H));_.insertUniqueEdge(J)}}};BufferBuilder.prototype.setNoder=function d(s){this._workingNoder=s};BufferBuilder.prototype.interfaces_=function d(){return[]};BufferBuilder.prototype.getClass=function d(){return BufferBuilder};BufferBuilder.depthDelta=function d(s){var f=s.getLocation(0,Position.LEFT),_=s.getLocation(0,Position.RIGHT);return f===Location.INTERIOR&&_===Location.EXTERIOR?1:f===Location.EXTERIOR&&_===Location.INTERIOR?-1:0};BufferBuilder.convertSegStrings=function d(s){for(var f=new GeometryFactory,_=new ArrayList;s.hasNext();){var S=s.next(),T=f.createLineString(S.getCoordinates());_.add(T)}return f.buildGeometry(_)};var ScaledNoder=function d(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var s=arguments[0],f=arguments[1];this._noder=s,this._scaleFactor=f,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var _=arguments[0],S=arguments[1],T=arguments[2],F=arguments[3];this._noder=_,this._scaleFactor=S,this._offsetX=T,this._offsetY=F,this._isScaled=!this.isIntegerPrecision()}};ScaledNoder.prototype.rescale=function d(){var s=this;if(hasInterface(arguments[0],Collection))for(var f=arguments[0],_=f.iterator();_.hasNext();){var S=_.next();s.rescale(S.getCoordinates())}else if(arguments[0]instanceof Array){for(var T=arguments[0],F=0;F<T.length;F++)T[F].x=T[F].x/s._scaleFactor+s._offsetX,T[F].y=T[F].y/s._scaleFactor+s._offsetY;T.length===2&&T[0].equals2D(T[1])&&System.out.println(T)}};ScaledNoder.prototype.scale=function d(){var s=this;if(hasInterface(arguments[0],Collection)){for(var f=arguments[0],_=new ArrayList,S=f.iterator();S.hasNext();){var T=S.next();_.add(new NodedSegmentString(s.scale(T.getCoordinates()),T.getData()))}return _}else if(arguments[0]instanceof Array){for(var F=arguments[0],M=new Array(F.length).fill(null),P=0;P<F.length;P++)M[P]=new Coordinate(Math.round((F[P].x-s._offsetX)*s._scaleFactor),Math.round((F[P].y-s._offsetY)*s._scaleFactor),F[P].z);var H=CoordinateArrays.removeRepeatedPoints(M);return H}};ScaledNoder.prototype.isIntegerPrecision=function d(){return this._scaleFactor===1};ScaledNoder.prototype.getNodedSubstrings=function d(){var s=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(s),s};ScaledNoder.prototype.computeNodes=function d(s){var f=s;this._isScaled&&(f=this.scale(s)),this._noder.computeNodes(f)};ScaledNoder.prototype.interfaces_=function d(){return[Noder]};ScaledNoder.prototype.getClass=function d(){return ScaledNoder};var NodingValidator=function d(){this._li=new RobustLineIntersector,this._segStrings=null;var s=arguments[0];this._segStrings=s},staticAccessors$33={fact:{configurable:!0}};NodingValidator.prototype.checkEndPtVertexIntersections=function d(){var s=this;if(arguments.length===0)for(var f=this._segStrings.iterator();f.hasNext();){var _=f.next(),S=_.getCoordinates();s.checkEndPtVertexIntersections(S[0],s._segStrings),s.checkEndPtVertexIntersections(S[S.length-1],s._segStrings)}else if(arguments.length===2){for(var T=arguments[0],F=arguments[1],M=F.iterator();M.hasNext();)for(var P=M.next(),H=P.getCoordinates(),J=1;J<H.length-1;J++)if(H[J].equals(T))throw new RuntimeException("found endpt/interior pt intersection at index "+J+" :pt "+T)}};NodingValidator.prototype.checkInteriorIntersections=function d(){var s=this;if(arguments.length===0)for(var f=this._segStrings.iterator();f.hasNext();)for(var _=f.next(),S=this._segStrings.iterator();S.hasNext();){var T=S.next();s.checkInteriorIntersections(_,T)}else if(arguments.length===2)for(var F=arguments[0],M=arguments[1],P=F.getCoordinates(),H=M.getCoordinates(),J=0;J<P.length-1;J++)for(var K=0;K<H.length-1;K++)s.checkInteriorIntersections(F,J,M,K);else if(arguments.length===4){var oe=arguments[0],se=arguments[1],ae=arguments[2],ge=arguments[3];if(oe===ae&&se===ge)return null;var he=oe.getCoordinates()[se],Be=oe.getCoordinates()[se+1],pe=ae.getCoordinates()[ge],be=ae.getCoordinates()[ge+1];if(this._li.computeIntersection(he,Be,pe,be),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,he,Be)||this.hasInteriorIntersection(this._li,pe,be)))throw new RuntimeException("found non-noded intersection at "+he+"-"+Be+" and "+pe+"-"+be)}};NodingValidator.prototype.checkValid=function d(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};NodingValidator.prototype.checkCollapses=function d(){var s=this;if(arguments.length===0)for(var f=this._segStrings.iterator();f.hasNext();){var _=f.next();s.checkCollapses(_)}else if(arguments.length===1)for(var S=arguments[0],T=S.getCoordinates(),F=0;F<T.length-2;F++)s.checkCollapse(T[F],T[F+1],T[F+2])};NodingValidator.prototype.hasInteriorIntersection=function d(s,f,_){for(var S=0;S<s.getIntersectionNum();S++){var T=s.getIntersection(S);if(!(T.equals(f)||T.equals(_)))return!0}return!1};NodingValidator.prototype.checkCollapse=function d(s,f,_){if(s.equals(_))throw new RuntimeException("found non-noded collapse at "+NodingValidator.fact.createLineString([s,f,_]))};NodingValidator.prototype.interfaces_=function d(){return[]};NodingValidator.prototype.getClass=function d(){return NodingValidator};staticAccessors$33.fact.get=function(){return new GeometryFactory};Object.defineProperties(NodingValidator,staticAccessors$33);var HotPixel=function d(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var s=arguments[0],f=arguments[1],_=arguments[2];if(this._originalPt=s,this._pt=s,this._scaleFactor=f,this._li=_,f<=0)throw new IllegalArgumentException("Scale factor must be non-zero");f!==1&&(this._pt=new Coordinate(this.scale(s.x),this.scale(s.y)),this._p0Scaled=new Coordinate,this._p1Scaled=new Coordinate),this.initCorners(this._pt)},staticAccessors$34={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};HotPixel.prototype.intersectsScaled=function d(s,f){var _=Math.min(s.x,f.x),S=Math.max(s.x,f.x),T=Math.min(s.y,f.y),F=Math.max(s.y,f.y),M=this._maxx<_||this._minx>S||this._maxy<T||this._miny>F;if(M)return!1;var P=this.intersectsToleranceSquare(s,f);return Assert.isTrue(!(M&&P),"Found bad envelope test"),P};HotPixel.prototype.initCorners=function d(s){var f=.5;this._minx=s.x-f,this._maxx=s.x+f,this._miny=s.y-f,this._maxy=s.y+f,this._corner[0]=new Coordinate(this._maxx,this._maxy),this._corner[1]=new Coordinate(this._minx,this._maxy),this._corner[2]=new Coordinate(this._minx,this._miny),this._corner[3]=new Coordinate(this._maxx,this._miny)};HotPixel.prototype.intersects=function d(s,f){return this._scaleFactor===1?this.intersectsScaled(s,f):(this.copyScaled(s,this._p0Scaled),this.copyScaled(f,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};HotPixel.prototype.scale=function d(s){return Math.round(s*this._scaleFactor)};HotPixel.prototype.getCoordinate=function d(){return this._originalPt};HotPixel.prototype.copyScaled=function d(s,f){f.x=this.scale(s.x),f.y=this.scale(s.y)};HotPixel.prototype.getSafeEnvelope=function d(){if(this._safeEnv===null){var s=HotPixel.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Envelope(this._originalPt.x-s,this._originalPt.x+s,this._originalPt.y-s,this._originalPt.y+s)}return this._safeEnv};HotPixel.prototype.intersectsPixelClosure=function d(s,f){return this._li.computeIntersection(s,f,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(s,f,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(s,f,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(s,f,this._corner[3],this._corner[0]),this._li.hasIntersection()))};HotPixel.prototype.intersectsToleranceSquare=function d(s,f){var _=!1,S=!1;return this._li.computeIntersection(s,f,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(s,f,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(_=!0),this._li.computeIntersection(s,f,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(S=!0),this._li.computeIntersection(s,f,this._corner[3],this._corner[0]),this._li.isProper())||_&&S||s.equals(this._pt)||f.equals(this._pt))};HotPixel.prototype.addSnappedNode=function d(s,f){var _=s.getCoordinate(f),S=s.getCoordinate(f+1);return this.intersects(_,S)?(s.addIntersection(this.getCoordinate(),f),!0):!1};HotPixel.prototype.interfaces_=function d(){return[]};HotPixel.prototype.getClass=function d(){return HotPixel};staticAccessors$34.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(HotPixel,staticAccessors$34);var MonotoneChainSelectAction=function d(){this.tempEnv1=new Envelope,this.selectedSegment=new LineSegment};MonotoneChainSelectAction.prototype.select=function d(){if(arguments.length!==1){if(arguments.length===2){var s=arguments[0],f=arguments[1];s.getLineSegment(f,this.selectedSegment),this.select(this.selectedSegment)}}};MonotoneChainSelectAction.prototype.interfaces_=function d(){return[]};MonotoneChainSelectAction.prototype.getClass=function d(){return MonotoneChainSelectAction};var MCIndexPointSnapper=function d(){this._index=null;var s=arguments[0];this._index=s},staticAccessors$35={HotPixelSnapAction:{configurable:!0}};MCIndexPointSnapper.prototype.snap=function d(){if(arguments.length===1){var s=arguments[0];return this.snap(s,null,-1)}else if(arguments.length===3){var f=arguments[0],_=arguments[1],S=arguments[2],T=f.getSafeEnvelope(),F=new HotPixelSnapAction(f,_,S);return this._index.query(T,{interfaces_:function(){return[ItemVisitor]},visitItem:function(M){var P=M;P.select(T,F)}}),F.isNodeAdded()}};MCIndexPointSnapper.prototype.interfaces_=function d(){return[]};MCIndexPointSnapper.prototype.getClass=function d(){return MCIndexPointSnapper};staticAccessors$35.HotPixelSnapAction.get=function(){return HotPixelSnapAction};Object.defineProperties(MCIndexPointSnapper,staticAccessors$35);var HotPixelSnapAction=function(d){function s(){d.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var f=arguments[0],_=arguments[1],S=arguments[2];this._hotPixel=f,this._parentEdge=_,this._hotPixelVertexIndex=S}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.isNodeAdded=function(){return this._isNodeAdded},s.prototype.select=function(){if(arguments.length===2){var _=arguments[0],S=arguments[1],T=_.getContext();if(this._parentEdge!==null&&T===this._parentEdge&&S===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(T,S)}else return d.prototype.select.apply(this,arguments)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(MonotoneChainSelectAction),InteriorIntersectionFinderAdder=function d(){this._li=null,this._interiorIntersections=null;var s=arguments[0];this._li=s,this._interiorIntersections=new ArrayList};InteriorIntersectionFinderAdder.prototype.processIntersections=function d(s,f,_,S){var T=this;if(s===_&&f===S)return null;var F=s.getCoordinates()[f],M=s.getCoordinates()[f+1],P=_.getCoordinates()[S],H=_.getCoordinates()[S+1];if(this._li.computeIntersection(F,M,P,H),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var J=0;J<this._li.getIntersectionNum();J++)T._interiorIntersections.add(T._li.getIntersection(J));s.addIntersections(this._li,f,0),_.addIntersections(this._li,S,1)}};InteriorIntersectionFinderAdder.prototype.isDone=function d(){return!1};InteriorIntersectionFinderAdder.prototype.getInteriorIntersections=function d(){return this._interiorIntersections};InteriorIntersectionFinderAdder.prototype.interfaces_=function d(){return[SegmentIntersector]};InteriorIntersectionFinderAdder.prototype.getClass=function d(){return InteriorIntersectionFinderAdder};var MCIndexSnapRounder=function d(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var s=arguments[0];this._pm=s,this._li=new RobustLineIntersector,this._li.setPrecisionModel(s),this._scaleFactor=s.getScale()};MCIndexSnapRounder.prototype.checkCorrectness=function d(s){var f=NodedSegmentString.getNodedSubstrings(s),_=new NodingValidator(f);try{_.checkValid()}catch(S){if(S instanceof Exception)S.printStackTrace();else throw S}finally{}};MCIndexSnapRounder.prototype.getNodedSubstrings=function d(){return NodedSegmentString.getNodedSubstrings(this._nodedSegStrings)};MCIndexSnapRounder.prototype.snapRound=function d(s,f){var _=this.findInteriorIntersections(s,f);this.computeIntersectionSnaps(_),this.computeVertexSnaps(s)};MCIndexSnapRounder.prototype.findInteriorIntersections=function d(s,f){var _=new InteriorIntersectionFinderAdder(f);return this._noder.setSegmentIntersector(_),this._noder.computeNodes(s),_.getInteriorIntersections()};MCIndexSnapRounder.prototype.computeVertexSnaps=function d(){var s=this;if(hasInterface(arguments[0],Collection))for(var f=arguments[0],_=f.iterator();_.hasNext();){var S=_.next();s.computeVertexSnaps(S)}else if(arguments[0]instanceof NodedSegmentString)for(var T=arguments[0],F=T.getCoordinates(),M=0;M<F.length;M++){var P=new HotPixel(F[M],s._scaleFactor,s._li),H=s._pointSnapper.snap(P,T,M);H&&T.addIntersection(F[M],M)}};MCIndexSnapRounder.prototype.computeNodes=function d(s){this._nodedSegStrings=s,this._noder=new MCIndexNoder,this._pointSnapper=new MCIndexPointSnapper(this._noder.getIndex()),this.snapRound(s,this._li)};MCIndexSnapRounder.prototype.computeIntersectionSnaps=function d(s){for(var f=this,_=s.iterator();_.hasNext();){var S=_.next(),T=new HotPixel(S,f._scaleFactor,f._li);f._pointSnapper.snap(T)}};MCIndexSnapRounder.prototype.interfaces_=function d(){return[Noder]};MCIndexSnapRounder.prototype.getClass=function d(){return MCIndexSnapRounder};var BufferOp=function d(){if(this._argGeom=null,this._distance=null,this._bufParams=new BufferParameters,this._resultGeometry=null,this._saveException=null,arguments.length===1){var s=arguments[0];this._argGeom=s}else if(arguments.length===2){var f=arguments[0],_=arguments[1];this._argGeom=f,this._bufParams=_}},staticAccessors$32={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};BufferOp.prototype.bufferFixedPrecision=function d(s){var f=new ScaledNoder(new MCIndexSnapRounder(new PrecisionModel(1)),s.getScale()),_=new BufferBuilder(this._bufParams);_.setWorkingPrecisionModel(s),_.setNoder(f),this._resultGeometry=_.buffer(this._argGeom,this._distance)};BufferOp.prototype.bufferReducedPrecision=function d(){var s=this;if(arguments.length===0){for(var f=BufferOp.MAX_PRECISION_DIGITS;f>=0;f--){try{s.bufferReducedPrecision(f)}catch(F){if(F instanceof TopologyException)s._saveException=F;else throw F}finally{}if(s._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var _=arguments[0],S=BufferOp.precisionScaleFactor(this._argGeom,this._distance,_),T=new PrecisionModel(S);this.bufferFixedPrecision(T)}};BufferOp.prototype.computeGeometry=function d(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var s=this._argGeom.getFactory().getPrecisionModel();s.getType()===PrecisionModel.FIXED?this.bufferFixedPrecision(s):this.bufferReducedPrecision()};BufferOp.prototype.setQuadrantSegments=function d(s){this._bufParams.setQuadrantSegments(s)};BufferOp.prototype.bufferOriginalPrecision=function d(){try{var s=new BufferBuilder(this._bufParams);this._resultGeometry=s.buffer(this._argGeom,this._distance)}catch(f){if(f instanceof RuntimeException)this._saveException=f;else throw f}finally{}};BufferOp.prototype.getResultGeometry=function d(s){return this._distance=s,this.computeGeometry(),this._resultGeometry};BufferOp.prototype.setEndCapStyle=function d(s){this._bufParams.setEndCapStyle(s)};BufferOp.prototype.interfaces_=function d(){return[]};BufferOp.prototype.getClass=function d(){return BufferOp};BufferOp.bufferOp=function d(){if(arguments.length===2){var s=arguments[0],f=arguments[1],_=new BufferOp(s),S=_.getResultGeometry(f);return S}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Geometry&&typeof arguments[1]=="number"){var T=arguments[0],F=arguments[1],M=arguments[2],P=new BufferOp(T);P.setQuadrantSegments(M);var H=P.getResultGeometry(F);return H}else if(arguments[2]instanceof BufferParameters&&arguments[0]instanceof Geometry&&typeof arguments[1]=="number"){var J=arguments[0],K=arguments[1],oe=arguments[2],se=new BufferOp(J,oe),ae=se.getResultGeometry(K);return ae}}else if(arguments.length===4){var ge=arguments[0],he=arguments[1],Be=arguments[2],pe=arguments[3],be=new BufferOp(ge);be.setQuadrantSegments(Be),be.setEndCapStyle(pe);var Re=be.getResultGeometry(he);return Re}};BufferOp.precisionScaleFactor=function d(s,f,_){var S=s.getEnvelopeInternal(),T=MathUtil.max(Math.abs(S.getMaxX()),Math.abs(S.getMaxY()),Math.abs(S.getMinX()),Math.abs(S.getMinY())),F=f>0?f:0,M=T+2*F,P=Math.trunc(Math.log(M)/Math.log(10)+1),H=_-P,J=Math.pow(10,H);return J};staticAccessors$32.CAP_ROUND.get=function(){return BufferParameters.CAP_ROUND};staticAccessors$32.CAP_BUTT.get=function(){return BufferParameters.CAP_FLAT};staticAccessors$32.CAP_FLAT.get=function(){return BufferParameters.CAP_FLAT};staticAccessors$32.CAP_SQUARE.get=function(){return BufferParameters.CAP_SQUARE};staticAccessors$32.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(BufferOp,staticAccessors$32);var PointPairDistance=function d(){this._pt=[new Coordinate,new Coordinate],this._distance=Double.NaN,this._isNull=!0};PointPairDistance.prototype.getCoordinates=function d(){return this._pt};PointPairDistance.prototype.getCoordinate=function d(s){return this._pt[s]};PointPairDistance.prototype.setMinimum=function d(){if(arguments.length===1){var s=arguments[0];this.setMinimum(s._pt[0],s._pt[1])}else if(arguments.length===2){var f=arguments[0],_=arguments[1];if(this._isNull)return this.initialize(f,_),null;var S=f.distance(_);S<this._distance&&this.initialize(f,_,S)}};PointPairDistance.prototype.initialize=function d(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var s=arguments[0],f=arguments[1];this._pt[0].setCoordinate(s),this._pt[1].setCoordinate(f),this._distance=s.distance(f),this._isNull=!1}else if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];this._pt[0].setCoordinate(_),this._pt[1].setCoordinate(S),this._distance=T,this._isNull=!1}};PointPairDistance.prototype.getDistance=function d(){return this._distance};PointPairDistance.prototype.setMaximum=function d(){if(arguments.length===1){var s=arguments[0];this.setMaximum(s._pt[0],s._pt[1])}else if(arguments.length===2){var f=arguments[0],_=arguments[1];if(this._isNull)return this.initialize(f,_),null;var S=f.distance(_);S>this._distance&&this.initialize(f,_,S)}};PointPairDistance.prototype.interfaces_=function d(){return[]};PointPairDistance.prototype.getClass=function d(){return PointPairDistance};var DistanceToPointFinder=function d(){};DistanceToPointFinder.prototype.interfaces_=function d(){return[]};DistanceToPointFinder.prototype.getClass=function d(){return DistanceToPointFinder};DistanceToPointFinder.computeDistance=function d(){if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof LineString&&arguments[1]instanceof Coordinate)for(var s=arguments[0],f=arguments[1],_=arguments[2],S=s.getCoordinates(),T=new LineSegment,F=0;F<S.length-1;F++){T.setCoordinates(S[F],S[F+1]);var M=T.closestPoint(f);_.setMinimum(M,f)}else if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof Polygon&&arguments[1]instanceof Coordinate){var P=arguments[0],H=arguments[1],J=arguments[2];DistanceToPointFinder.computeDistance(P.getExteriorRing(),H,J);for(var K=0;K<P.getNumInteriorRing();K++)DistanceToPointFinder.computeDistance(P.getInteriorRingN(K),H,J)}else if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof Geometry&&arguments[1]instanceof Coordinate){var oe=arguments[0],se=arguments[1],ae=arguments[2];if(oe instanceof LineString)DistanceToPointFinder.computeDistance(oe,se,ae);else if(oe instanceof Polygon)DistanceToPointFinder.computeDistance(oe,se,ae);else if(oe instanceof GeometryCollection)for(var ge=oe,he=0;he<ge.getNumGeometries();he++){var Be=ge.getGeometryN(he);DistanceToPointFinder.computeDistance(Be,se,ae)}else ae.setMinimum(oe.getCoordinate(),se)}else if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof LineSegment&&arguments[1]instanceof Coordinate){var pe=arguments[0],be=arguments[1],Re=arguments[2],Fe=pe.closestPoint(be);Re.setMinimum(Fe,be)}};var BufferCurveMaximumDistanceFinder=function d(s){this._maxPtDist=new PointPairDistance,this._inputGeom=s||null},staticAccessors$36={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};BufferCurveMaximumDistanceFinder.prototype.computeMaxMidpointDistance=function d(s){var f=new MaxMidpointDistanceFilter(this._inputGeom);s.apply(f),this._maxPtDist.setMaximum(f.getMaxPointDistance())};BufferCurveMaximumDistanceFinder.prototype.computeMaxVertexDistance=function d(s){var f=new MaxPointDistanceFilter(this._inputGeom);s.apply(f),this._maxPtDist.setMaximum(f.getMaxPointDistance())};BufferCurveMaximumDistanceFinder.prototype.findDistance=function d(s){return this.computeMaxVertexDistance(s),this.computeMaxMidpointDistance(s),this._maxPtDist.getDistance()};BufferCurveMaximumDistanceFinder.prototype.getDistancePoints=function d(){return this._maxPtDist};BufferCurveMaximumDistanceFinder.prototype.interfaces_=function d(){return[]};BufferCurveMaximumDistanceFinder.prototype.getClass=function d(){return BufferCurveMaximumDistanceFinder};staticAccessors$36.MaxPointDistanceFilter.get=function(){return MaxPointDistanceFilter};staticAccessors$36.MaxMidpointDistanceFilter.get=function(){return MaxMidpointDistanceFilter};Object.defineProperties(BufferCurveMaximumDistanceFinder,staticAccessors$36);var MaxPointDistanceFilter=function d(s){this._maxPtDist=new PointPairDistance,this._minPtDist=new PointPairDistance,this._geom=s||null};MaxPointDistanceFilter.prototype.filter=function d(s){this._minPtDist.initialize(),DistanceToPointFinder.computeDistance(this._geom,s,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};MaxPointDistanceFilter.prototype.getMaxPointDistance=function d(){return this._maxPtDist};MaxPointDistanceFilter.prototype.interfaces_=function d(){return[CoordinateFilter]};MaxPointDistanceFilter.prototype.getClass=function d(){return MaxPointDistanceFilter};var MaxMidpointDistanceFilter=function d(s){this._maxPtDist=new PointPairDistance,this._minPtDist=new PointPairDistance,this._geom=s||null};MaxMidpointDistanceFilter.prototype.filter=function d(s,f){if(f===0)return null;var _=s.getCoordinate(f-1),S=s.getCoordinate(f),T=new Coordinate((_.x+S.x)/2,(_.y+S.y)/2);this._minPtDist.initialize(),DistanceToPointFinder.computeDistance(this._geom,T,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};MaxMidpointDistanceFilter.prototype.isDone=function d(){return!1};MaxMidpointDistanceFilter.prototype.isGeometryChanged=function d(){return!1};MaxMidpointDistanceFilter.prototype.getMaxPointDistance=function d(){return this._maxPtDist};MaxMidpointDistanceFilter.prototype.interfaces_=function d(){return[CoordinateSequenceFilter]};MaxMidpointDistanceFilter.prototype.getClass=function d(){return MaxMidpointDistanceFilter};var PolygonExtracter=function d(s){this._comps=s||null};PolygonExtracter.prototype.filter=function d(s){s instanceof Polygon&&this._comps.add(s)};PolygonExtracter.prototype.interfaces_=function d(){return[GeometryFilter]};PolygonExtracter.prototype.getClass=function d(){return PolygonExtracter};PolygonExtracter.getPolygons=function d(){if(arguments.length===1){var s=arguments[0];return PolygonExtracter.getPolygons(s,new ArrayList)}else if(arguments.length===2){var f=arguments[0],_=arguments[1];return f instanceof Polygon?_.add(f):f instanceof GeometryCollection&&f.apply(new PolygonExtracter(_)),_}};var LinearComponentExtracter=function d(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var s=arguments[0];this._lines=s}else if(arguments.length===2){var f=arguments[0],_=arguments[1];this._lines=f,this._isForcedToLineString=_}};LinearComponentExtracter.prototype.filter=function d(s){if(this._isForcedToLineString&&s instanceof LinearRing){var f=s.getFactory().createLineString(s.getCoordinateSequence());return this._lines.add(f),null}s instanceof LineString&&this._lines.add(s)};LinearComponentExtracter.prototype.setForceToLineString=function d(s){this._isForcedToLineString=s};LinearComponentExtracter.prototype.interfaces_=function d(){return[GeometryComponentFilter]};LinearComponentExtracter.prototype.getClass=function d(){return LinearComponentExtracter};LinearComponentExtracter.getGeometry=function d(){if(arguments.length===1){var s=arguments[0];return s.getFactory().buildGeometry(LinearComponentExtracter.getLines(s))}else if(arguments.length===2){var f=arguments[0],_=arguments[1];return f.getFactory().buildGeometry(LinearComponentExtracter.getLines(f,_))}};LinearComponentExtracter.getLines=function d(){if(arguments.length===1){var s=arguments[0];return LinearComponentExtracter.getLines(s,!1)}else if(arguments.length===2){if(hasInterface(arguments[0],Collection)&&hasInterface(arguments[1],Collection)){for(var f=arguments[0],_=arguments[1],S=f.iterator();S.hasNext();){var T=S.next();LinearComponentExtracter.getLines(T,_)}return _}else if(arguments[0]instanceof Geometry&&typeof arguments[1]=="boolean"){var F=arguments[0],M=arguments[1],P=new ArrayList;return F.apply(new LinearComponentExtracter(P,M)),P}else if(arguments[0]instanceof Geometry&&hasInterface(arguments[1],Collection)){var H=arguments[0],J=arguments[1];return H instanceof LineString?J.add(H):H.apply(new LinearComponentExtracter(J)),J}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&hasInterface(arguments[0],Collection)&&hasInterface(arguments[1],Collection)){for(var K=arguments[0],oe=arguments[1],se=arguments[2],ae=K.iterator();ae.hasNext();){var ge=ae.next();LinearComponentExtracter.getLines(ge,oe,se)}return oe}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Geometry&&hasInterface(arguments[1],Collection)){var he=arguments[0],Be=arguments[1],pe=arguments[2];return he.apply(new LinearComponentExtracter(Be,pe)),Be}}};var PointLocator=function d(){if(this._boundaryRule=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var s=arguments[0];if(s===null)throw new IllegalArgumentException("Rule must be non-null");this._boundaryRule=s}}};PointLocator.prototype.locateInternal=function d(){var s=this;if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Polygon){var f=arguments[0],_=arguments[1];if(_.isEmpty())return Location.EXTERIOR;var S=_.getExteriorRing(),T=this.locateInPolygonRing(f,S);if(T===Location.EXTERIOR)return Location.EXTERIOR;if(T===Location.BOUNDARY)return Location.BOUNDARY;for(var F=0;F<_.getNumInteriorRing();F++){var M=_.getInteriorRingN(F),P=s.locateInPolygonRing(f,M);if(P===Location.INTERIOR)return Location.EXTERIOR;if(P===Location.BOUNDARY)return Location.BOUNDARY}return Location.INTERIOR}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof LineString){var H=arguments[0],J=arguments[1];if(!J.getEnvelopeInternal().intersects(H))return Location.EXTERIOR;var K=J.getCoordinates();return!J.isClosed()&&(H.equals(K[0])||H.equals(K[K.length-1]))?Location.BOUNDARY:CGAlgorithms.isOnLine(H,K)?Location.INTERIOR:Location.EXTERIOR}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Point){var oe=arguments[0],se=arguments[1],ae=se.getCoordinate();return ae.equals2D(oe)?Location.INTERIOR:Location.EXTERIOR}};PointLocator.prototype.locateInPolygonRing=function d(s,f){return f.getEnvelopeInternal().intersects(s)?CGAlgorithms.locatePointInRing(s,f.getCoordinates()):Location.EXTERIOR};PointLocator.prototype.intersects=function d(s,f){return this.locate(s,f)!==Location.EXTERIOR};PointLocator.prototype.updateLocationInfo=function d(s){s===Location.INTERIOR&&(this._isIn=!0),s===Location.BOUNDARY&&this._numBoundaries++};PointLocator.prototype.computeLocation=function d(s,f){var _=this;if(f instanceof Point&&this.updateLocationInfo(this.locateInternal(s,f)),f instanceof LineString)this.updateLocationInfo(this.locateInternal(s,f));else if(f instanceof Polygon)this.updateLocationInfo(this.locateInternal(s,f));else if(f instanceof MultiLineString)for(var S=f,T=0;T<S.getNumGeometries();T++){var F=S.getGeometryN(T);_.updateLocationInfo(_.locateInternal(s,F))}else if(f instanceof MultiPolygon)for(var M=f,P=0;P<M.getNumGeometries();P++){var H=M.getGeometryN(P);_.updateLocationInfo(_.locateInternal(s,H))}else if(f instanceof GeometryCollection)for(var J=new GeometryCollectionIterator(f);J.hasNext();){var K=J.next();K!==f&&_.computeLocation(s,K)}};PointLocator.prototype.locate=function d(s,f){return f.isEmpty()?Location.EXTERIOR:f instanceof LineString?this.locateInternal(s,f):f instanceof Polygon?this.locateInternal(s,f):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(s,f),this._boundaryRule.isInBoundary(this._numBoundaries)?Location.BOUNDARY:this._numBoundaries>0||this._isIn?Location.INTERIOR:Location.EXTERIOR)};PointLocator.prototype.interfaces_=function d(){return[]};PointLocator.prototype.getClass=function d(){return PointLocator};var GeometryLocation=function d(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var s=arguments[0],f=arguments[1];d.call(this,s,d.INSIDE_AREA,f)}else if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];this._component=_,this._segIndex=S,this._pt=T}},staticAccessors$38={INSIDE_AREA:{configurable:!0}};GeometryLocation.prototype.isInsideArea=function d(){return this._segIndex===GeometryLocation.INSIDE_AREA};GeometryLocation.prototype.getCoordinate=function d(){return this._pt};GeometryLocation.prototype.getGeometryComponent=function d(){return this._component};GeometryLocation.prototype.getSegmentIndex=function d(){return this._segIndex};GeometryLocation.prototype.interfaces_=function d(){return[]};GeometryLocation.prototype.getClass=function d(){return GeometryLocation};staticAccessors$38.INSIDE_AREA.get=function(){return-1};Object.defineProperties(GeometryLocation,staticAccessors$38);var PointExtracter=function d(s){this._pts=s||null};PointExtracter.prototype.filter=function d(s){s instanceof Point&&this._pts.add(s)};PointExtracter.prototype.interfaces_=function d(){return[GeometryFilter]};PointExtracter.prototype.getClass=function d(){return PointExtracter};PointExtracter.getPoints=function d(){if(arguments.length===1){var s=arguments[0];return s instanceof Point?Collections.singletonList(s):PointExtracter.getPoints(s,new ArrayList)}else if(arguments.length===2){var f=arguments[0],_=arguments[1];return f instanceof Point?_.add(f):f instanceof GeometryCollection&&f.apply(new PointExtracter(_)),_}};var ConnectedElementLocationFilter=function d(){this._locations=null;var s=arguments[0];this._locations=s};ConnectedElementLocationFilter.prototype.filter=function d(s){(s instanceof Point||s instanceof LineString||s instanceof Polygon)&&this._locations.add(new GeometryLocation(s,0,s.getCoordinate()))};ConnectedElementLocationFilter.prototype.interfaces_=function d(){return[GeometryFilter]};ConnectedElementLocationFilter.prototype.getClass=function d(){return ConnectedElementLocationFilter};ConnectedElementLocationFilter.getLocations=function d(s){var f=new ArrayList;return s.apply(new ConnectedElementLocationFilter(f)),f};var DistanceOp=function d(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new PointLocator,this._minDistanceLocation=null,this._minDistance=Double.MAX_VALUE,arguments.length===2){var s=arguments[0],f=arguments[1];this._geom=[s,f],this._terminateDistance=0}else if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=_,this._geom[1]=S,this._terminateDistance=T}};DistanceOp.prototype.computeContainmentDistance=function d(){var s=this;if(arguments.length===0){var f=new Array(2).fill(null);if(this.computeContainmentDistance(0,f),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,f)}else if(arguments.length===2){var _=arguments[0],S=arguments[1],T=1-_,F=PolygonExtracter.getPolygons(this._geom[_]);if(F.size()>0){var M=ConnectedElementLocationFilter.getLocations(this._geom[T]);if(this.computeContainmentDistance(M,F,S),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[T]=S[0],this._minDistanceLocation[_]=S[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&hasInterface(arguments[0],List)&&hasInterface(arguments[1],List)){for(var P=arguments[0],H=arguments[1],J=arguments[2],K=0;K<P.size();K++)for(var oe=P.get(K),se=0;se<H.size();se++)if(s.computeContainmentDistance(oe,H.get(se),J),s._minDistance<=s._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof GeometryLocation&&arguments[1]instanceof Polygon){var ae=arguments[0],ge=arguments[1],he=arguments[2],Be=ae.getCoordinate();if(Location.EXTERIOR!==this._ptLocator.locate(Be,ge))return this._minDistance=0,he[0]=ae,he[1]=new GeometryLocation(ge,Be),null}}};DistanceOp.prototype.computeMinDistanceLinesPoints=function d(s,f,_){for(var S=this,T=0;T<s.size();T++)for(var F=s.get(T),M=0;M<f.size();M++){var P=f.get(M);if(S.computeMinDistance(F,P,_),S._minDistance<=S._terminateDistance)return null}};DistanceOp.prototype.computeFacetDistance=function d(){var s=new Array(2).fill(null),f=LinearComponentExtracter.getLines(this._geom[0]),_=LinearComponentExtracter.getLines(this._geom[1]),S=PointExtracter.getPoints(this._geom[0]),T=PointExtracter.getPoints(this._geom[1]);if(this.computeMinDistanceLines(f,_,s),this.updateMinDistance(s,!1),this._minDistance<=this._terminateDistance||(s[0]=null,s[1]=null,this.computeMinDistanceLinesPoints(f,T,s),this.updateMinDistance(s,!1),this._minDistance<=this._terminateDistance)||(s[0]=null,s[1]=null,this.computeMinDistanceLinesPoints(_,S,s),this.updateMinDistance(s,!0),this._minDistance<=this._terminateDistance))return null;s[0]=null,s[1]=null,this.computeMinDistancePoints(S,T,s),this.updateMinDistance(s,!1)};DistanceOp.prototype.nearestLocations=function d(){return this.computeMinDistance(),this._minDistanceLocation};DistanceOp.prototype.updateMinDistance=function d(s,f){if(s[0]===null)return null;f?(this._minDistanceLocation[0]=s[1],this._minDistanceLocation[1]=s[0]):(this._minDistanceLocation[0]=s[0],this._minDistanceLocation[1]=s[1])};DistanceOp.prototype.nearestPoints=function d(){this.computeMinDistance();var s=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return s};DistanceOp.prototype.computeMinDistance=function d(){var s=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof LineString&&arguments[1]instanceof Point){var f=arguments[0],_=arguments[1],S=arguments[2];if(f.getEnvelopeInternal().distance(_.getEnvelopeInternal())>this._minDistance)return null;for(var T=f.getCoordinates(),F=_.getCoordinate(),M=0;M<T.length-1;M++){var P=CGAlgorithms.distancePointLine(F,T[M],T[M+1]);if(P<s._minDistance){s._minDistance=P;var H=new LineSegment(T[M],T[M+1]),J=H.closestPoint(F);S[0]=new GeometryLocation(f,M,J),S[1]=new GeometryLocation(_,0,F)}if(s._minDistance<=s._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof LineString&&arguments[1]instanceof LineString){var K=arguments[0],oe=arguments[1],se=arguments[2];if(K.getEnvelopeInternal().distance(oe.getEnvelopeInternal())>this._minDistance)return null;for(var ae=K.getCoordinates(),ge=oe.getCoordinates(),he=0;he<ae.length-1;he++)for(var Be=0;Be<ge.length-1;Be++){var pe=CGAlgorithms.distanceLineLine(ae[he],ae[he+1],ge[Be],ge[Be+1]);if(pe<s._minDistance){s._minDistance=pe;var be=new LineSegment(ae[he],ae[he+1]),Re=new LineSegment(ge[Be],ge[Be+1]),Fe=be.closestPoints(Re);se[0]=new GeometryLocation(K,he,Fe[0]),se[1]=new GeometryLocation(oe,Be,Fe[1])}if(s._minDistance<=s._terminateDistance)return null}}}};DistanceOp.prototype.computeMinDistancePoints=function d(s,f,_){for(var S=this,T=0;T<s.size();T++)for(var F=s.get(T),M=0;M<f.size();M++){var P=f.get(M),H=F.getCoordinate().distance(P.getCoordinate());if(H<S._minDistance&&(S._minDistance=H,_[0]=new GeometryLocation(F,0,F.getCoordinate()),_[1]=new GeometryLocation(P,0,P.getCoordinate())),S._minDistance<=S._terminateDistance)return null}};DistanceOp.prototype.distance=function d(){if(this._geom[0]===null||this._geom[1]===null)throw new IllegalArgumentException("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};DistanceOp.prototype.computeMinDistanceLines=function d(s,f,_){for(var S=this,T=0;T<s.size();T++)for(var F=s.get(T),M=0;M<f.size();M++){var P=f.get(M);if(S.computeMinDistance(F,P,_),S._minDistance<=S._terminateDistance)return null}};DistanceOp.prototype.interfaces_=function d(){return[]};DistanceOp.prototype.getClass=function d(){return DistanceOp};DistanceOp.distance=function d(s,f){var _=new DistanceOp(s,f);return _.distance()};DistanceOp.isWithinDistance=function d(s,f,_){var S=new DistanceOp(s,f,_);return S.distance()<=_};DistanceOp.nearestPoints=function d(s,f){var _=new DistanceOp(s,f);return _.nearestPoints()};var PointPairDistance$2=function d(){this._pt=[new Coordinate,new Coordinate],this._distance=Double.NaN,this._isNull=!0};PointPairDistance$2.prototype.getCoordinates=function d(){return this._pt};PointPairDistance$2.prototype.getCoordinate=function d(s){return this._pt[s]};PointPairDistance$2.prototype.setMinimum=function d(){if(arguments.length===1){var s=arguments[0];this.setMinimum(s._pt[0],s._pt[1])}else if(arguments.length===2){var f=arguments[0],_=arguments[1];if(this._isNull)return this.initialize(f,_),null;var S=f.distance(_);S<this._distance&&this.initialize(f,_,S)}};PointPairDistance$2.prototype.initialize=function d(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var s=arguments[0],f=arguments[1];this._pt[0].setCoordinate(s),this._pt[1].setCoordinate(f),this._distance=s.distance(f),this._isNull=!1}else if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];this._pt[0].setCoordinate(_),this._pt[1].setCoordinate(S),this._distance=T,this._isNull=!1}};PointPairDistance$2.prototype.toString=function d(){return WKTWriter.toLineString(this._pt[0],this._pt[1])};PointPairDistance$2.prototype.getDistance=function d(){return this._distance};PointPairDistance$2.prototype.setMaximum=function d(){if(arguments.length===1){var s=arguments[0];this.setMaximum(s._pt[0],s._pt[1])}else if(arguments.length===2){var f=arguments[0],_=arguments[1];if(this._isNull)return this.initialize(f,_),null;var S=f.distance(_);S>this._distance&&this.initialize(f,_,S)}};PointPairDistance$2.prototype.interfaces_=function d(){return[]};PointPairDistance$2.prototype.getClass=function d(){return PointPairDistance$2};var DistanceToPoint=function d(){};DistanceToPoint.prototype.interfaces_=function d(){return[]};DistanceToPoint.prototype.getClass=function d(){return DistanceToPoint};DistanceToPoint.computeDistance=function d(){if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof LineString&&arguments[1]instanceof Coordinate)for(var s=arguments[0],f=arguments[1],_=arguments[2],S=new LineSegment,T=s.getCoordinates(),F=0;F<T.length-1;F++){S.setCoordinates(T[F],T[F+1]);var M=S.closestPoint(f);_.setMinimum(M,f)}else if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof Polygon&&arguments[1]instanceof Coordinate){var P=arguments[0],H=arguments[1],J=arguments[2];DistanceToPoint.computeDistance(P.getExteriorRing(),H,J);for(var K=0;K<P.getNumInteriorRing();K++)DistanceToPoint.computeDistance(P.getInteriorRingN(K),H,J)}else if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof Geometry&&arguments[1]instanceof Coordinate){var oe=arguments[0],se=arguments[1],ae=arguments[2];if(oe instanceof LineString)DistanceToPoint.computeDistance(oe,se,ae);else if(oe instanceof Polygon)DistanceToPoint.computeDistance(oe,se,ae);else if(oe instanceof GeometryCollection)for(var ge=oe,he=0;he<ge.getNumGeometries();he++){var Be=ge.getGeometryN(he);DistanceToPoint.computeDistance(Be,se,ae)}else ae.setMinimum(oe.getCoordinate(),se)}else if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof LineSegment&&arguments[1]instanceof Coordinate){var pe=arguments[0],be=arguments[1],Re=arguments[2],Fe=pe.closestPoint(be);Re.setMinimum(Fe,be)}};var DiscreteHausdorffDistance=function d(){this._g0=null,this._g1=null,this._ptDist=new PointPairDistance$2,this._densifyFrac=0;var s=arguments[0],f=arguments[1];this._g0=s,this._g1=f},staticAccessors$39={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};DiscreteHausdorffDistance.prototype.getCoordinates=function d(){return this._ptDist.getCoordinates()};DiscreteHausdorffDistance.prototype.setDensifyFraction=function d(s){if(s>1||s<=0)throw new IllegalArgumentException("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=s};DiscreteHausdorffDistance.prototype.compute=function d(s,f){this.computeOrientedDistance(s,f,this._ptDist),this.computeOrientedDistance(f,s,this._ptDist)};DiscreteHausdorffDistance.prototype.distance=function d(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};DiscreteHausdorffDistance.prototype.computeOrientedDistance=function d(s,f,_){var S=new MaxPointDistanceFilter$1(f);if(s.apply(S),_.setMaximum(S.getMaxPointDistance()),this._densifyFrac>0){var T=new MaxDensifiedByFractionDistanceFilter(f,this._densifyFrac);s.apply(T),_.setMaximum(T.getMaxPointDistance())}};DiscreteHausdorffDistance.prototype.orientedDistance=function d(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};DiscreteHausdorffDistance.prototype.interfaces_=function d(){return[]};DiscreteHausdorffDistance.prototype.getClass=function d(){return DiscreteHausdorffDistance};DiscreteHausdorffDistance.distance=function d(){if(arguments.length===2){var s=arguments[0],f=arguments[1],_=new DiscreteHausdorffDistance(s,f);return _.distance()}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2],M=new DiscreteHausdorffDistance(S,T);return M.setDensifyFraction(F),M.distance()}};staticAccessors$39.MaxPointDistanceFilter.get=function(){return MaxPointDistanceFilter$1};staticAccessors$39.MaxDensifiedByFractionDistanceFilter.get=function(){return MaxDensifiedByFractionDistanceFilter};Object.defineProperties(DiscreteHausdorffDistance,staticAccessors$39);var MaxPointDistanceFilter$1=function d(){this._maxPtDist=new PointPairDistance$2,this._minPtDist=new PointPairDistance$2,this._euclideanDist=new DistanceToPoint,this._geom=null;var s=arguments[0];this._geom=s};MaxPointDistanceFilter$1.prototype.filter=function d(s){this._minPtDist.initialize(),DistanceToPoint.computeDistance(this._geom,s,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};MaxPointDistanceFilter$1.prototype.getMaxPointDistance=function d(){return this._maxPtDist};MaxPointDistanceFilter$1.prototype.interfaces_=function d(){return[CoordinateFilter]};MaxPointDistanceFilter$1.prototype.getClass=function d(){return MaxPointDistanceFilter$1};var MaxDensifiedByFractionDistanceFilter=function d(){this._maxPtDist=new PointPairDistance$2,this._minPtDist=new PointPairDistance$2,this._geom=null,this._numSubSegs=0;var s=arguments[0],f=arguments[1];this._geom=s,this._numSubSegs=Math.trunc(Math.round(1/f))};MaxDensifiedByFractionDistanceFilter.prototype.filter=function d(s,f){var _=this;if(f===0)return null;for(var S=s.getCoordinate(f-1),T=s.getCoordinate(f),F=(T.x-S.x)/this._numSubSegs,M=(T.y-S.y)/this._numSubSegs,P=0;P<this._numSubSegs;P++){var H=S.x+P*F,J=S.y+P*M,K=new Coordinate(H,J);_._minPtDist.initialize(),DistanceToPoint.computeDistance(_._geom,K,_._minPtDist),_._maxPtDist.setMaximum(_._minPtDist)}};MaxDensifiedByFractionDistanceFilter.prototype.isDone=function d(){return!1};MaxDensifiedByFractionDistanceFilter.prototype.isGeometryChanged=function d(){return!1};MaxDensifiedByFractionDistanceFilter.prototype.getMaxPointDistance=function d(){return this._maxPtDist};MaxDensifiedByFractionDistanceFilter.prototype.interfaces_=function d(){return[CoordinateSequenceFilter]};MaxDensifiedByFractionDistanceFilter.prototype.getClass=function d(){return MaxDensifiedByFractionDistanceFilter};var BufferDistanceValidator=function d(s,f,_){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=s||null,this._bufDistance=f||null,this._result=_||null},staticAccessors$37={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};BufferDistanceValidator.prototype.checkMaximumDistance=function d(s,f,_){var S=new DiscreteHausdorffDistance(f,s);if(S.setDensifyFraction(.25),this._maxDistanceFound=S.orientedDistance(),this._maxDistanceFound>_){this._isValid=!1;var T=S.getCoordinates();this._errorLocation=T[1],this._errorIndicator=s.getFactory().createLineString(T),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+WKTWriter.toLineString(T[0],T[1])+")"}};BufferDistanceValidator.prototype.isValid=function d(){var s=Math.abs(this._bufDistance),f=BufferDistanceValidator.MAX_DISTANCE_DIFF_FRAC*s;return this._minValidDistance=s-f,this._maxValidDistance=s+f,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),BufferDistanceValidator.VERBOSE&&System.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};BufferDistanceValidator.prototype.checkNegativeValid=function d(){if(!(this._input instanceof Polygon||this._input instanceof MultiPolygon||this._input instanceof GeometryCollection))return null;var s=this.getPolygonLines(this._input);if(this.checkMinimumDistance(s,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(s,this._result,this._maxValidDistance)};BufferDistanceValidator.prototype.getErrorIndicator=function d(){return this._errorIndicator};BufferDistanceValidator.prototype.checkMinimumDistance=function d(s,f,_){var S=new DistanceOp(s,f,_);if(this._minDistanceFound=S.distance(),this._minDistanceFound<_){this._isValid=!1;var T=S.nearestPoints();this._errorLocation=S.nearestPoints()[1],this._errorIndicator=s.getFactory().createLineString(T),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+WKTWriter.toLineString(T[0],T[1])+" )"}};BufferDistanceValidator.prototype.checkPositiveValid=function d(){var s=this._result.getBoundary();if(this.checkMinimumDistance(this._input,s,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,s,this._maxValidDistance)};BufferDistanceValidator.prototype.getErrorLocation=function d(){return this._errorLocation};BufferDistanceValidator.prototype.getPolygonLines=function d(s){for(var f=new ArrayList,_=new LinearComponentExtracter(f),S=PolygonExtracter.getPolygons(s),T=S.iterator();T.hasNext();){var F=T.next();F.apply(_)}return s.getFactory().buildGeometry(f)};BufferDistanceValidator.prototype.getErrorMessage=function d(){return this._errMsg};BufferDistanceValidator.prototype.interfaces_=function d(){return[]};BufferDistanceValidator.prototype.getClass=function d(){return BufferDistanceValidator};staticAccessors$37.VERBOSE.get=function(){return!1};staticAccessors$37.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(BufferDistanceValidator,staticAccessors$37);var BufferResultValidator=function d(s,f,_){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=s||null,this._distance=f||null,this._result=_||null},staticAccessors$40={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};BufferResultValidator.prototype.isValid=function d(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};BufferResultValidator.prototype.checkEnvelope=function d(){if(this._distance<0)return null;var s=this._distance*BufferResultValidator.MAX_ENV_DIFF_FRAC;s===0&&(s=.001);var f=new Envelope(this._input.getEnvelopeInternal());f.expandBy(this._distance);var _=new Envelope(this._result.getEnvelopeInternal());_.expandBy(s),_.contains(f)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(_)),this.report("Envelope")};BufferResultValidator.prototype.checkDistance=function d(){var s=new BufferDistanceValidator(this._input,this._distance,this._result);s.isValid()||(this._isValid=!1,this._errorMsg=s.getErrorMessage(),this._errorLocation=s.getErrorLocation(),this._errorIndicator=s.getErrorIndicator()),this.report("Distance")};BufferResultValidator.prototype.checkArea=function d(){var s=this._input.getArea(),f=this._result.getArea();this._distance>0&&s>f&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&s<f&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};BufferResultValidator.prototype.checkPolygonal=function d(){this._result instanceof Polygon||this._result instanceof MultiPolygon||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};BufferResultValidator.prototype.getErrorIndicator=function d(){return this._errorIndicator};BufferResultValidator.prototype.getErrorLocation=function d(){return this._errorLocation};BufferResultValidator.prototype.checkExpectedEmpty=function d(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};BufferResultValidator.prototype.report=function d(s){if(!BufferResultValidator.VERBOSE)return null;System.out.println("Check "+s+": "+(this._isValid?"passed":"FAILED"))};BufferResultValidator.prototype.getErrorMessage=function d(){return this._errorMsg};BufferResultValidator.prototype.interfaces_=function d(){return[]};BufferResultValidator.prototype.getClass=function d(){return BufferResultValidator};BufferResultValidator.isValidMsg=function d(s,f,_){var S=new BufferResultValidator(s,f,_);return S.isValid()?null:S.getErrorMessage()};BufferResultValidator.isValid=function d(s,f,_){var S=new BufferResultValidator(s,f,_);return!!S.isValid()};staticAccessors$40.VERBOSE.get=function(){return!1};staticAccessors$40.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(BufferResultValidator,staticAccessors$40);var BasicSegmentString=function d(){this._pts=null,this._data=null;var s=arguments[0],f=arguments[1];this._pts=s,this._data=f};BasicSegmentString.prototype.getCoordinates=function d(){return this._pts};BasicSegmentString.prototype.size=function d(){return this._pts.length};BasicSegmentString.prototype.getCoordinate=function d(s){return this._pts[s]};BasicSegmentString.prototype.isClosed=function d(){return this._pts[0].equals(this._pts[this._pts.length-1])};BasicSegmentString.prototype.getSegmentOctant=function d(s){return s===this._pts.length-1?-1:Octant.octant(this.getCoordinate(s),this.getCoordinate(s+1))};BasicSegmentString.prototype.setData=function d(s){this._data=s};BasicSegmentString.prototype.getData=function d(){return this._data};BasicSegmentString.prototype.toString=function d(){return WKTWriter.toLineString(new CoordinateArraySequence(this._pts))};BasicSegmentString.prototype.interfaces_=function d(){return[SegmentString]};BasicSegmentString.prototype.getClass=function d(){return BasicSegmentString};var InteriorIntersectionFinder=function d(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new ArrayList,this._intersectionCount=0,this._keepIntersections=!0;var s=arguments[0];this._li=s,this._interiorIntersection=null};InteriorIntersectionFinder.prototype.getInteriorIntersection=function d(){return this._interiorIntersection};InteriorIntersectionFinder.prototype.setCheckEndSegmentsOnly=function d(s){this._isCheckEndSegmentsOnly=s};InteriorIntersectionFinder.prototype.getIntersectionSegments=function d(){return this._intSegments};InteriorIntersectionFinder.prototype.count=function d(){return this._intersectionCount};InteriorIntersectionFinder.prototype.getIntersections=function d(){return this._intersections};InteriorIntersectionFinder.prototype.setFindAllIntersections=function d(s){this._findAllIntersections=s};InteriorIntersectionFinder.prototype.setKeepIntersections=function d(s){this._keepIntersections=s};InteriorIntersectionFinder.prototype.processIntersections=function d(s,f,_,S){if(!this._findAllIntersections&&this.hasIntersection()||s===_&&f===S)return null;if(this._isCheckEndSegmentsOnly){var T=this.isEndSegment(s,f)||this.isEndSegment(_,S);if(!T)return null}var F=s.getCoordinates()[f],M=s.getCoordinates()[f+1],P=_.getCoordinates()[S],H=_.getCoordinates()[S+1];this._li.computeIntersection(F,M,P,H),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=F,this._intSegments[1]=M,this._intSegments[2]=P,this._intSegments[3]=H,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};InteriorIntersectionFinder.prototype.isEndSegment=function d(s,f){return f===0||f>=s.size()-2};InteriorIntersectionFinder.prototype.hasIntersection=function d(){return this._interiorIntersection!==null};InteriorIntersectionFinder.prototype.isDone=function d(){return this._findAllIntersections?!1:this._interiorIntersection!==null};InteriorIntersectionFinder.prototype.interfaces_=function d(){return[SegmentIntersector]};InteriorIntersectionFinder.prototype.getClass=function d(){return InteriorIntersectionFinder};InteriorIntersectionFinder.createAllIntersectionsFinder=function d(s){var f=new InteriorIntersectionFinder(s);return f.setFindAllIntersections(!0),f};InteriorIntersectionFinder.createAnyIntersectionFinder=function d(s){return new InteriorIntersectionFinder(s)};InteriorIntersectionFinder.createIntersectionCounter=function d(s){var f=new InteriorIntersectionFinder(s);return f.setFindAllIntersections(!0),f.setKeepIntersections(!1),f};var FastNodingValidator=function d(){this._li=new RobustLineIntersector,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var s=arguments[0];this._segStrings=s};FastNodingValidator.prototype.execute=function d(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};FastNodingValidator.prototype.getIntersections=function d(){return this._segInt.getIntersections()};FastNodingValidator.prototype.isValid=function d(){return this.execute(),this._isValid};FastNodingValidator.prototype.setFindAllIntersections=function d(s){this._findAllIntersections=s};FastNodingValidator.prototype.checkInteriorIntersections=function d(){this._isValid=!0,this._segInt=new InteriorIntersectionFinder(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var s=new MCIndexNoder;if(s.setSegmentIntersector(this._segInt),s.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};FastNodingValidator.prototype.checkValid=function d(){if(this.execute(),!this._isValid)throw new TopologyException(this.getErrorMessage(),this._segInt.getInteriorIntersection())};FastNodingValidator.prototype.getErrorMessage=function d(){if(this._isValid)return"no intersections found";var s=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+WKTWriter.toLineString(s[0],s[1])+" and "+WKTWriter.toLineString(s[2],s[3])};FastNodingValidator.prototype.interfaces_=function d(){return[]};FastNodingValidator.prototype.getClass=function d(){return FastNodingValidator};FastNodingValidator.computeIntersections=function d(s){var f=new FastNodingValidator(s);return f.setFindAllIntersections(!0),f.isValid(),f.getIntersections()};var EdgeNodingValidator=function d(){this._nv=null;var s=arguments[0];this._nv=new FastNodingValidator(d.toSegmentStrings(s))};EdgeNodingValidator.prototype.checkValid=function d(){this._nv.checkValid()};EdgeNodingValidator.prototype.interfaces_=function d(){return[]};EdgeNodingValidator.prototype.getClass=function d(){return EdgeNodingValidator};EdgeNodingValidator.toSegmentStrings=function d(s){for(var f=new ArrayList,_=s.iterator();_.hasNext();){var S=_.next();f.add(new BasicSegmentString(S.getCoordinates(),S))}return f};EdgeNodingValidator.checkValid=function d(s){var f=new EdgeNodingValidator(s);f.checkValid()};var GeometryCollectionMapper=function d(s){this._mapOp=s};GeometryCollectionMapper.prototype.map=function d(s){for(var f=this,_=new ArrayList,S=0;S<s.getNumGeometries();S++){var T=f._mapOp.map(s.getGeometryN(S));T.isEmpty()||_.add(T)}return s.getFactory().createGeometryCollection(GeometryFactory.toGeometryArray(_))};GeometryCollectionMapper.prototype.interfaces_=function d(){return[]};GeometryCollectionMapper.prototype.getClass=function d(){return GeometryCollectionMapper};GeometryCollectionMapper.map=function d(s,f){var _=new GeometryCollectionMapper(f);return _.map(s)};var LineBuilder=function d(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new ArrayList,this._resultLineList=new ArrayList;var s=arguments[0],f=arguments[1],_=arguments[2];this._op=s,this._geometryFactory=f,this._ptLocator=_};LineBuilder.prototype.collectLines=function d(s){for(var f=this,_=this._op.getGraph().getEdgeEnds().iterator();_.hasNext();){var S=_.next();f.collectLineEdge(S,s,f._lineEdgesList),f.collectBoundaryTouchEdge(S,s,f._lineEdgesList)}};LineBuilder.prototype.labelIsolatedLine=function d(s,f){var _=this._ptLocator.locate(s.getCoordinate(),this._op.getArgGeometry(f));s.getLabel().setLocation(f,_)};LineBuilder.prototype.build=function d(s){return this.findCoveredLineEdges(),this.collectLines(s),this.buildLines(s),this._resultLineList};LineBuilder.prototype.collectLineEdge=function d(s,f,_){var S=s.getLabel(),T=s.getEdge();s.isLineEdge()&&!s.isVisited()&&OverlayOp.isResultOfOp(S,f)&&!T.isCovered()&&(_.add(T),s.setVisitedEdge(!0))};LineBuilder.prototype.findCoveredLineEdges=function d(){for(var s=this,f=this._op.getGraph().getNodes().iterator();f.hasNext();){var _=f.next();_.getEdges().findCoveredLineEdges()}for(var S=this._op.getGraph().getEdgeEnds().iterator();S.hasNext();){var T=S.next(),F=T.getEdge();if(T.isLineEdge()&&!F.isCoveredSet()){var M=s._op.isCoveredByA(T.getCoordinate());F.setCovered(M)}}};LineBuilder.prototype.labelIsolatedLines=function d(s){for(var f=this,_=s.iterator();_.hasNext();){var S=_.next(),T=S.getLabel();S.isIsolated()&&(T.isNull(0)?f.labelIsolatedLine(S,0):f.labelIsolatedLine(S,1))}};LineBuilder.prototype.buildLines=function d(s){for(var f=this,_=this._lineEdgesList.iterator();_.hasNext();){var S=_.next(),T=f._geometryFactory.createLineString(S.getCoordinates());f._resultLineList.add(T),S.setInResult(!0)}};LineBuilder.prototype.collectBoundaryTouchEdge=function d(s,f,_){var S=s.getLabel();if(s.isLineEdge()||s.isVisited()||s.isInteriorAreaEdge()||s.getEdge().isInResult())return null;Assert.isTrue(!(s.isInResult()||s.getSym().isInResult())||!s.getEdge().isInResult()),OverlayOp.isResultOfOp(S,f)&&f===OverlayOp.INTERSECTION&&(_.add(s.getEdge()),s.setVisitedEdge(!0))};LineBuilder.prototype.interfaces_=function d(){return[]};LineBuilder.prototype.getClass=function d(){return LineBuilder};var PointBuilder=function d(){this._op=null,this._geometryFactory=null,this._resultPointList=new ArrayList;var s=arguments[0],f=arguments[1];this._op=s,this._geometryFactory=f};PointBuilder.prototype.filterCoveredNodeToPoint=function d(s){var f=s.getCoordinate();if(!this._op.isCoveredByLA(f)){var _=this._geometryFactory.createPoint(f);this._resultPointList.add(_)}};PointBuilder.prototype.extractNonCoveredResultNodes=function d(s){for(var f=this,_=this._op.getGraph().getNodes().iterator();_.hasNext();){var S=_.next();if(!S.isInResult()&&!S.isIncidentEdgeInResult()&&(S.getEdges().getDegree()===0||s===OverlayOp.INTERSECTION)){var T=S.getLabel();OverlayOp.isResultOfOp(T,s)&&f.filterCoveredNodeToPoint(S)}}};PointBuilder.prototype.build=function d(s){return this.extractNonCoveredResultNodes(s),this._resultPointList};PointBuilder.prototype.interfaces_=function d(){return[]};PointBuilder.prototype.getClass=function d(){return PointBuilder};var GeometryTransformer=function d(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};GeometryTransformer.prototype.transformPoint=function d(s,f){return this._factory.createPoint(this.transformCoordinates(s.getCoordinateSequence(),s))};GeometryTransformer.prototype.transformPolygon=function d(s,f){var _=this,S=!0,T=this.transformLinearRing(s.getExteriorRing(),s);(T===null||!(T instanceof LinearRing)||T.isEmpty())&&(S=!1);for(var F=new ArrayList,M=0;M<s.getNumInteriorRing();M++){var P=_.transformLinearRing(s.getInteriorRingN(M),s);P===null||P.isEmpty()||(P instanceof LinearRing||(S=!1),F.add(P))}if(S)return this._factory.createPolygon(T,F.toArray([]));var H=new ArrayList;return T!==null&&H.add(T),H.addAll(F),this._factory.buildGeometry(H)};GeometryTransformer.prototype.createCoordinateSequence=function d(s){return this._factory.getCoordinateSequenceFactory().create(s)};GeometryTransformer.prototype.getInputGeometry=function d(){return this._inputGeom};GeometryTransformer.prototype.transformMultiLineString=function d(s,f){for(var _=this,S=new ArrayList,T=0;T<s.getNumGeometries();T++){var F=_.transformLineString(s.getGeometryN(T),s);F!==null&&(F.isEmpty()||S.add(F))}return this._factory.buildGeometry(S)};GeometryTransformer.prototype.transformCoordinates=function d(s,f){return this.copy(s)};GeometryTransformer.prototype.transformLineString=function d(s,f){return this._factory.createLineString(this.transformCoordinates(s.getCoordinateSequence(),s))};GeometryTransformer.prototype.transformMultiPoint=function d(s,f){for(var _=this,S=new ArrayList,T=0;T<s.getNumGeometries();T++){var F=_.transformPoint(s.getGeometryN(T),s);F!==null&&(F.isEmpty()||S.add(F))}return this._factory.buildGeometry(S)};GeometryTransformer.prototype.transformMultiPolygon=function d(s,f){for(var _=this,S=new ArrayList,T=0;T<s.getNumGeometries();T++){var F=_.transformPolygon(s.getGeometryN(T),s);F!==null&&(F.isEmpty()||S.add(F))}return this._factory.buildGeometry(S)};GeometryTransformer.prototype.copy=function d(s){return s.copy()};GeometryTransformer.prototype.transformGeometryCollection=function d(s,f){for(var _=this,S=new ArrayList,T=0;T<s.getNumGeometries();T++){var F=_.transform(s.getGeometryN(T));F!==null&&(_._pruneEmptyGeometry&&F.isEmpty()||S.add(F))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(GeometryFactory.toGeometryArray(S)):this._factory.buildGeometry(S)};GeometryTransformer.prototype.transform=function d(s){if(this._inputGeom=s,this._factory=s.getFactory(),s instanceof Point)return this.transformPoint(s,null);if(s instanceof MultiPoint)return this.transformMultiPoint(s,null);if(s instanceof LinearRing)return this.transformLinearRing(s,null);if(s instanceof LineString)return this.transformLineString(s,null);if(s instanceof MultiLineString)return this.transformMultiLineString(s,null);if(s instanceof Polygon)return this.transformPolygon(s,null);if(s instanceof MultiPolygon)return this.transformMultiPolygon(s,null);if(s instanceof GeometryCollection)return this.transformGeometryCollection(s,null);throw new IllegalArgumentException("Unknown Geometry subtype: "+s.getClass().getName())};GeometryTransformer.prototype.transformLinearRing=function d(s,f){var _=this.transformCoordinates(s.getCoordinateSequence(),s);if(_===null)return this._factory.createLinearRing(null);var S=_.size();return S>0&&S<4&&!this._preserveType?this._factory.createLineString(_):this._factory.createLinearRing(_)};GeometryTransformer.prototype.interfaces_=function d(){return[]};GeometryTransformer.prototype.getClass=function d(){return GeometryTransformer};var LineStringSnapper=function d(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new LineSegment,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof LineString&&typeof arguments[1]=="number"){var s=arguments[0],f=arguments[1];d.call(this,s.getCoordinates(),f)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var _=arguments[0],S=arguments[1];this._srcPts=_,this._isClosed=d.isClosed(_),this._snapTolerance=S}};LineStringSnapper.prototype.snapVertices=function d(s,f){for(var _=this,S=this._isClosed?s.size()-1:s.size(),T=0;T<S;T++){var F=s.get(T),M=_.findSnapForVertex(F,f);M!==null&&(s.set(T,new Coordinate(M)),T===0&&_._isClosed&&s.set(s.size()-1,new Coordinate(M)))}};LineStringSnapper.prototype.findSnapForVertex=function d(s,f){for(var _=this,S=0;S<f.length;S++){if(s.equals2D(f[S]))return null;if(s.distance(f[S])<_._snapTolerance)return f[S]}return null};LineStringSnapper.prototype.snapTo=function d(s){var f=new CoordinateList(this._srcPts);this.snapVertices(f,s),this.snapSegments(f,s);var _=f.toCoordinateArray();return _};LineStringSnapper.prototype.snapSegments=function d(s,f){var _=this;if(f.length===0)return null;var S=f.length;f[0].equals2D(f[f.length-1])&&(S=f.length-1);for(var T=0;T<S;T++){var F=f[T],M=_.findSegmentIndexToSnap(F,s);M>=0&&s.add(M+1,new Coordinate(F),!1)}};LineStringSnapper.prototype.findSegmentIndexToSnap=function d(s,f){for(var _=this,S=Double.MAX_VALUE,T=-1,F=0;F<f.size()-1;F++){if(_._seg.p0=f.get(F),_._seg.p1=f.get(F+1),_._seg.p0.equals2D(s)||_._seg.p1.equals2D(s)){if(_._allowSnappingToSourceVertices)continue;return-1}var M=_._seg.distance(s);M<_._snapTolerance&&M<S&&(S=M,T=F)}return T};LineStringSnapper.prototype.setAllowSnappingToSourceVertices=function d(s){this._allowSnappingToSourceVertices=s};LineStringSnapper.prototype.interfaces_=function d(){return[]};LineStringSnapper.prototype.getClass=function d(){return LineStringSnapper};LineStringSnapper.isClosed=function d(s){return s.length<=1?!1:s[0].equals2D(s[s.length-1])};var GeometrySnapper=function d(s){this._srcGeom=s||null},staticAccessors$41={SNAP_PRECISION_FACTOR:{configurable:!0}};GeometrySnapper.prototype.snapTo=function d(s,f){var _=this.extractTargetCoordinates(s),S=new SnapTransformer(f,_);return S.transform(this._srcGeom)};GeometrySnapper.prototype.snapToSelf=function d(s,f){var _=this.extractTargetCoordinates(this._srcGeom),S=new SnapTransformer(s,_,!0),T=S.transform(this._srcGeom),F=T;return f&&hasInterface(F,Polygonal)&&(F=T.buffer(0)),F};GeometrySnapper.prototype.computeSnapTolerance=function d(s){var f=this.computeMinimumSegmentLength(s),_=f/10;return _};GeometrySnapper.prototype.extractTargetCoordinates=function d(s){for(var f=new TreeSet,_=s.getCoordinates(),S=0;S<_.length;S++)f.add(_[S]);return f.toArray(new Array(0).fill(null))};GeometrySnapper.prototype.computeMinimumSegmentLength=function d(s){for(var f=Double.MAX_VALUE,_=0;_<s.length-1;_++){var S=s[_].distance(s[_+1]);S<f&&(f=S)}return f};GeometrySnapper.prototype.interfaces_=function d(){return[]};GeometrySnapper.prototype.getClass=function d(){return GeometrySnapper};GeometrySnapper.snap=function d(s,f,_){var S=new Array(2).fill(null),T=new GeometrySnapper(s);S[0]=T.snapTo(f,_);var F=new GeometrySnapper(f);return S[1]=F.snapTo(S[0],_),S};GeometrySnapper.computeOverlaySnapTolerance=function d(){if(arguments.length===1){var s=arguments[0],f=GeometrySnapper.computeSizeBasedSnapTolerance(s),_=s.getPrecisionModel();if(_.getType()===PrecisionModel.FIXED){var S=1/_.getScale()*2/1.415;S>f&&(f=S)}return f}else if(arguments.length===2){var T=arguments[0],F=arguments[1];return Math.min(GeometrySnapper.computeOverlaySnapTolerance(T),GeometrySnapper.computeOverlaySnapTolerance(F))}};GeometrySnapper.computeSizeBasedSnapTolerance=function d(s){var f=s.getEnvelopeInternal(),_=Math.min(f.getHeight(),f.getWidth()),S=_*GeometrySnapper.SNAP_PRECISION_FACTOR;return S};GeometrySnapper.snapToSelf=function d(s,f,_){var S=new GeometrySnapper(s);return S.snapToSelf(f,_)};staticAccessors$41.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(GeometrySnapper,staticAccessors$41);var SnapTransformer=function(d){function s(f,_,S){d.call(this),this._snapTolerance=f||null,this._snapPts=_||null,this._isSelfSnap=S!==void 0?S:!1}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.snapLine=function(_,S){var T=new LineStringSnapper(_,this._snapTolerance);return T.setAllowSnappingToSourceVertices(this._isSelfSnap),T.snapTo(S)},s.prototype.transformCoordinates=function(_,S){var T=_.toCoordinateArray(),F=this.snapLine(T,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(F)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(GeometryTransformer),CommonBits=function d(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};CommonBits.prototype.getCommon=function d(){return Double.longBitsToDouble(this._commonBits)};CommonBits.prototype.add=function d(s){var f=Double.doubleToLongBits(s);if(this._isFirst)return this._commonBits=f,this._commonSignExp=CommonBits.signExpBits(this._commonBits),this._isFirst=!1,null;var _=CommonBits.signExpBits(f);if(_!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=CommonBits.numCommonMostSigMantissaBits(this._commonBits,f),this._commonBits=CommonBits.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};CommonBits.prototype.toString=function d(){if(arguments.length===1){var s=arguments[0],f=Double.longBitsToDouble(s),_=Double.toBinaryString(s),S="0000000000000000000000000000000000000000000000000000000000000000"+_,T=S.substring(S.length-64),F=T.substring(0,1)+"  "+T.substring(1,12)+"(exp) "+T.substring(12)+" [ "+f+" ]";return F}};CommonBits.prototype.interfaces_=function d(){return[]};CommonBits.prototype.getClass=function d(){return CommonBits};CommonBits.getBit=function d(s,f){var _=1<<f;return s&_?1:0};CommonBits.signExpBits=function d(s){return s>>52};CommonBits.zeroLowerBits=function d(s,f){var _=(1<<f)-1,S=~_,T=s&S;return T};CommonBits.numCommonMostSigMantissaBits=function d(s,f){for(var _=0,S=52;S>=0;S--){if(CommonBits.getBit(s,S)!==CommonBits.getBit(f,S))return _;_++}return 52};var CommonBitsRemover=function d(){this._commonCoord=null,this._ccFilter=new CommonCoordinateFilter},staticAccessors$42={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};CommonBitsRemover.prototype.addCommonBits=function d(s){var f=new Translater(this._commonCoord);s.apply(f),s.geometryChanged()};CommonBitsRemover.prototype.removeCommonBits=function d(s){if(this._commonCoord.x===0&&this._commonCoord.y===0)return s;var f=new Coordinate(this._commonCoord);f.x=-f.x,f.y=-f.y;var _=new Translater(f);return s.apply(_),s.geometryChanged(),s};CommonBitsRemover.prototype.getCommonCoordinate=function d(){return this._commonCoord};CommonBitsRemover.prototype.add=function d(s){s.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};CommonBitsRemover.prototype.interfaces_=function d(){return[]};CommonBitsRemover.prototype.getClass=function d(){return CommonBitsRemover};staticAccessors$42.CommonCoordinateFilter.get=function(){return CommonCoordinateFilter};staticAccessors$42.Translater.get=function(){return Translater};Object.defineProperties(CommonBitsRemover,staticAccessors$42);var CommonCoordinateFilter=function d(){this._commonBitsX=new CommonBits,this._commonBitsY=new CommonBits};CommonCoordinateFilter.prototype.filter=function d(s){this._commonBitsX.add(s.x),this._commonBitsY.add(s.y)};CommonCoordinateFilter.prototype.getCommonCoordinate=function d(){return new Coordinate(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};CommonCoordinateFilter.prototype.interfaces_=function d(){return[CoordinateFilter]};CommonCoordinateFilter.prototype.getClass=function d(){return CommonCoordinateFilter};var Translater=function d(){this.trans=null;var s=arguments[0];this.trans=s};Translater.prototype.filter=function d(s,f){var _=s.getOrdinate(f,0)+this.trans.x,S=s.getOrdinate(f,1)+this.trans.y;s.setOrdinate(f,0,_),s.setOrdinate(f,1,S)};Translater.prototype.isDone=function d(){return!1};Translater.prototype.isGeometryChanged=function d(){return!0};Translater.prototype.interfaces_=function d(){return[CoordinateSequenceFilter]};Translater.prototype.getClass=function d(){return Translater};var SnapOverlayOp=function d(s,f){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=s,this._geom[1]=f,this.computeSnapTolerance()};SnapOverlayOp.prototype.selfSnap=function d(s){var f=new GeometrySnapper(s),_=f.snapTo(s,this._snapTolerance);return _};SnapOverlayOp.prototype.removeCommonBits=function d(s){this._cbr=new CommonBitsRemover,this._cbr.add(s[0]),this._cbr.add(s[1]);var f=new Array(2).fill(null);return f[0]=this._cbr.removeCommonBits(s[0].copy()),f[1]=this._cbr.removeCommonBits(s[1].copy()),f};SnapOverlayOp.prototype.prepareResult=function d(s){return this._cbr.addCommonBits(s),s};SnapOverlayOp.prototype.getResultGeometry=function d(s){var f=this.snap(this._geom),_=OverlayOp.overlayOp(f[0],f[1],s);return this.prepareResult(_)};SnapOverlayOp.prototype.checkValid=function d(s){s.isValid()||System.out.println("Snapped geometry is invalid")};SnapOverlayOp.prototype.computeSnapTolerance=function d(){this._snapTolerance=GeometrySnapper.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};SnapOverlayOp.prototype.snap=function d(s){var f=this.removeCommonBits(s),_=GeometrySnapper.snap(f[0],f[1],this._snapTolerance);return _};SnapOverlayOp.prototype.interfaces_=function d(){return[]};SnapOverlayOp.prototype.getClass=function d(){return SnapOverlayOp};SnapOverlayOp.overlayOp=function d(s,f,_){var S=new SnapOverlayOp(s,f);return S.getResultGeometry(_)};SnapOverlayOp.union=function d(s,f){return SnapOverlayOp.overlayOp(s,f,OverlayOp.UNION)};SnapOverlayOp.intersection=function d(s,f){return SnapOverlayOp.overlayOp(s,f,OverlayOp.INTERSECTION)};SnapOverlayOp.symDifference=function d(s,f){return SnapOverlayOp.overlayOp(s,f,OverlayOp.SYMDIFFERENCE)};SnapOverlayOp.difference=function d(s,f){return SnapOverlayOp.overlayOp(s,f,OverlayOp.DIFFERENCE)};var SnapIfNeededOverlayOp=function d(s,f){this._geom=new Array(2).fill(null),this._geom[0]=s,this._geom[1]=f};SnapIfNeededOverlayOp.prototype.getResultGeometry=function d(s){var f=null,_=!1,S=null;try{f=OverlayOp.overlayOp(this._geom[0],this._geom[1],s);var T=!0;T&&(_=!0)}catch(F){if(F instanceof RuntimeException)S=F;else throw F}finally{}if(!_)try{f=SnapOverlayOp.overlayOp(this._geom[0],this._geom[1],s)}catch(F){throw F instanceof RuntimeException?S:F}finally{}return f};SnapIfNeededOverlayOp.prototype.interfaces_=function d(){return[]};SnapIfNeededOverlayOp.prototype.getClass=function d(){return SnapIfNeededOverlayOp};SnapIfNeededOverlayOp.overlayOp=function d(s,f,_){var S=new SnapIfNeededOverlayOp(s,f);return S.getResultGeometry(_)};SnapIfNeededOverlayOp.union=function d(s,f){return SnapIfNeededOverlayOp.overlayOp(s,f,OverlayOp.UNION)};SnapIfNeededOverlayOp.intersection=function d(s,f){return SnapIfNeededOverlayOp.overlayOp(s,f,OverlayOp.INTERSECTION)};SnapIfNeededOverlayOp.symDifference=function d(s,f){return SnapIfNeededOverlayOp.overlayOp(s,f,OverlayOp.SYMDIFFERENCE)};SnapIfNeededOverlayOp.difference=function d(s,f){return SnapIfNeededOverlayOp.overlayOp(s,f,OverlayOp.DIFFERENCE)};var MonotoneChain$2=function d(){this.mce=null,this.chainIndex=null;var s=arguments[0],f=arguments[1];this.mce=s,this.chainIndex=f};MonotoneChain$2.prototype.computeIntersections=function d(s,f){this.mce.computeIntersectsForChain(this.chainIndex,s.mce,s.chainIndex,f)};MonotoneChain$2.prototype.interfaces_=function d(){return[]};MonotoneChain$2.prototype.getClass=function d(){return MonotoneChain$2};var SweepLineEvent=function d(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var s=arguments[0],f=arguments[1];this._eventType=d.DELETE,this._xValue=s,this._insertEvent=f}else if(arguments.length===3){var _=arguments[0],S=arguments[1],T=arguments[2];this._eventType=d.INSERT,this._label=_,this._xValue=S,this._obj=T}},staticAccessors$43={INSERT:{configurable:!0},DELETE:{configurable:!0}};SweepLineEvent.prototype.isDelete=function d(){return this._eventType===SweepLineEvent.DELETE};SweepLineEvent.prototype.setDeleteEventIndex=function d(s){this._deleteEventIndex=s};SweepLineEvent.prototype.getObject=function d(){return this._obj};SweepLineEvent.prototype.compareTo=function d(s){var f=s;return this._xValue<f._xValue?-1:this._xValue>f._xValue?1:this._eventType<f._eventType?-1:this._eventType>f._eventType?1:0};SweepLineEvent.prototype.getInsertEvent=function d(){return this._insertEvent};SweepLineEvent.prototype.isInsert=function d(){return this._eventType===SweepLineEvent.INSERT};SweepLineEvent.prototype.isSameLabel=function d(s){return this._label===null?!1:this._label===s._label};SweepLineEvent.prototype.getDeleteEventIndex=function d(){return this._deleteEventIndex};SweepLineEvent.prototype.interfaces_=function d(){return[Comparable]};SweepLineEvent.prototype.getClass=function d(){return SweepLineEvent};staticAccessors$43.INSERT.get=function(){return 1};staticAccessors$43.DELETE.get=function(){return 2};Object.defineProperties(SweepLineEvent,staticAccessors$43);var EdgeSetIntersector=function d(){};EdgeSetIntersector.prototype.interfaces_=function d(){return[]};EdgeSetIntersector.prototype.getClass=function d(){return EdgeSetIntersector};var SegmentIntersector$2=function d(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var s=arguments[0],f=arguments[1],_=arguments[2];this._li=s,this._includeProper=f,this._recordIsolated=_};SegmentIntersector$2.prototype.isTrivialIntersection=function d(s,f,_,S){if(s===_&&this._li.getIntersectionNum()===1){if(SegmentIntersector$2.isAdjacentSegments(f,S))return!0;if(s.isClosed()){var T=s.getNumPoints()-1;if(f===0&&S===T||S===0&&f===T)return!0}}return!1};SegmentIntersector$2.prototype.getProperIntersectionPoint=function d(){return this._properIntersectionPoint};SegmentIntersector$2.prototype.setIsDoneIfProperInt=function d(s){this._isDoneWhenProperInt=s};SegmentIntersector$2.prototype.hasProperInteriorIntersection=function d(){return this._hasProperInterior};SegmentIntersector$2.prototype.isBoundaryPointInternal=function d(s,f){for(var _=f.iterator();_.hasNext();){var S=_.next(),T=S.getCoordinate();if(s.isIntersection(T))return!0}return!1};SegmentIntersector$2.prototype.hasProperIntersection=function d(){return this._hasProper};SegmentIntersector$2.prototype.hasIntersection=function d(){return this._hasIntersection};SegmentIntersector$2.prototype.isDone=function d(){return this._isDone};SegmentIntersector$2.prototype.isBoundaryPoint=function d(s,f){return f===null?!1:!!(this.isBoundaryPointInternal(s,f[0])||this.isBoundaryPointInternal(s,f[1]))};SegmentIntersector$2.prototype.setBoundaryNodes=function d(s,f){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=s,this._bdyNodes[1]=f};SegmentIntersector$2.prototype.addIntersections=function d(s,f,_,S){if(s===_&&f===S)return null;this.numTests++;var T=s.getCoordinates()[f],F=s.getCoordinates()[f+1],M=_.getCoordinates()[S],P=_.getCoordinates()[S+1];this._li.computeIntersection(T,F,M,P),this._li.hasIntersection()&&(this._recordIsolated&&(s.setIsolated(!1),_.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(s,f,_,S)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(s.addIntersections(this._li,f,0),_.addIntersections(this._li,S,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};SegmentIntersector$2.prototype.interfaces_=function d(){return[]};SegmentIntersector$2.prototype.getClass=function d(){return SegmentIntersector$2};SegmentIntersector$2.isAdjacentSegments=function d(s,f){return Math.abs(s-f)===1};var SimpleMCSweepLineIntersector=function(d){function s(){d.call(this),this.events=new ArrayList,this.nOverlaps=null}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.prepareEvents=function(){var _=this;Collections.sort(this.events);for(var S=0;S<this.events.size();S++){var T=_.events.get(S);T.isDelete()&&T.getInsertEvent().setDeleteEventIndex(S)}},s.prototype.computeIntersections=function(){var _=this;if(arguments.length===1){var S=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var T=0;T<this.events.size();T++){var F=_.events.get(T);if(F.isInsert()&&_.processOverlaps(T,F.getDeleteEventIndex(),F,S),S.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof SegmentIntersector$2&&hasInterface(arguments[0],List)&&hasInterface(arguments[1],List)){var M=arguments[0],P=arguments[1],H=arguments[2];this.addEdges(M,M),this.addEdges(P,P),this.computeIntersections(H)}else if(typeof arguments[2]=="boolean"&&hasInterface(arguments[0],List)&&arguments[1]instanceof SegmentIntersector$2){var J=arguments[0],K=arguments[1],oe=arguments[2];oe?this.addEdges(J,null):this.addEdges(J),this.computeIntersections(K)}}},s.prototype.addEdge=function(_,S){for(var T=this,F=_.getMonotoneChainEdge(),M=F.getStartIndexes(),P=0;P<M.length-1;P++){var H=new MonotoneChain$2(F,P),J=new SweepLineEvent(S,F.getMinX(P),H);T.events.add(J),T.events.add(new SweepLineEvent(F.getMaxX(P),J))}},s.prototype.processOverlaps=function(_,S,T,F){for(var M=this,P=T.getObject(),H=_;H<S;H++){var J=M.events.get(H);if(J.isInsert()){var K=J.getObject();T.isSameLabel(J)||(P.computeIntersections(K,F),M.nOverlaps++)}}},s.prototype.addEdges=function(){var _=this;if(arguments.length===1)for(var S=arguments[0],T=S.iterator();T.hasNext();){var F=T.next();_.addEdge(F,F)}else if(arguments.length===2)for(var M=arguments[0],P=arguments[1],H=M.iterator();H.hasNext();){var J=H.next();_.addEdge(J,P)}},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(EdgeSetIntersector),IntervalRTreeNode=function d(){this._min=Double.POSITIVE_INFINITY,this._max=Double.NEGATIVE_INFINITY},staticAccessors$45={NodeComparator:{configurable:!0}};IntervalRTreeNode.prototype.getMin=function d(){return this._min};IntervalRTreeNode.prototype.intersects=function d(s,f){return!(this._min>f||this._max<s)};IntervalRTreeNode.prototype.getMax=function d(){return this._max};IntervalRTreeNode.prototype.toString=function d(){return WKTWriter.toLineString(new Coordinate(this._min,0),new Coordinate(this._max,0))};IntervalRTreeNode.prototype.interfaces_=function d(){return[]};IntervalRTreeNode.prototype.getClass=function d(){return IntervalRTreeNode};staticAccessors$45.NodeComparator.get=function(){return NodeComparator};Object.defineProperties(IntervalRTreeNode,staticAccessors$45);var NodeComparator=function d(){};NodeComparator.prototype.compare=function d(s,f){var _=s,S=f,T=(_._min+_._max)/2,F=(S._min+S._max)/2;return T<F?-1:T>F?1:0};NodeComparator.prototype.interfaces_=function d(){return[Comparator]};NodeComparator.prototype.getClass=function d(){return NodeComparator};var IntervalRTreeLeafNode=function(d){function s(){d.call(this),this._item=null;var f=arguments[0],_=arguments[1],S=arguments[2];this._min=f,this._max=_,this._item=S}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.query=function(_,S,T){if(!this.intersects(_,S))return null;T.visitItem(this._item)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(IntervalRTreeNode),IntervalRTreeBranchNode=function(d){function s(){d.call(this),this._node1=null,this._node2=null;var f=arguments[0],_=arguments[1];this._node1=f,this._node2=_,this.buildExtent(this._node1,this._node2)}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.buildExtent=function(_,S){this._min=Math.min(_._min,S._min),this._max=Math.max(_._max,S._max)},s.prototype.query=function(_,S,T){if(!this.intersects(_,S))return null;this._node1!==null&&this._node1.query(_,S,T),this._node2!==null&&this._node2.query(_,S,T)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(IntervalRTreeNode),SortedPackedIntervalRTree=function d(){this._leaves=new ArrayList,this._root=null,this._level=0};SortedPackedIntervalRTree.prototype.buildTree=function d(){var s=this;Collections.sort(this._leaves,new IntervalRTreeNode.NodeComparator);for(var f=this._leaves,_=null,S=new ArrayList;;){if(s.buildLevel(f,S),S.size()===1)return S.get(0);_=f,f=S,S=_}};SortedPackedIntervalRTree.prototype.insert=function d(s,f,_){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new IntervalRTreeLeafNode(s,f,_))};SortedPackedIntervalRTree.prototype.query=function d(s,f,_){this.init(),this._root.query(s,f,_)};SortedPackedIntervalRTree.prototype.buildRoot=function d(){if(this._root!==null)return null;this._root=this.buildTree()};SortedPackedIntervalRTree.prototype.printNode=function d(s){System.out.println(WKTWriter.toLineString(new Coordinate(s._min,this._level),new Coordinate(s._max,this._level)))};SortedPackedIntervalRTree.prototype.init=function d(){if(this._root!==null)return null;this.buildRoot()};SortedPackedIntervalRTree.prototype.buildLevel=function d(s,f){this._level++,f.clear();for(var _=0;_<s.size();_+=2){var S=s.get(_),T=_+1<s.size()?s.get(_):null;if(T===null)f.add(S);else{var F=new IntervalRTreeBranchNode(s.get(_),s.get(_+1));f.add(F)}}};SortedPackedIntervalRTree.prototype.interfaces_=function d(){return[]};SortedPackedIntervalRTree.prototype.getClass=function d(){return SortedPackedIntervalRTree};var ArrayListVisitor=function d(){this._items=new ArrayList};ArrayListVisitor.prototype.visitItem=function d(s){this._items.add(s)};ArrayListVisitor.prototype.getItems=function d(){return this._items};ArrayListVisitor.prototype.interfaces_=function d(){return[ItemVisitor]};ArrayListVisitor.prototype.getClass=function d(){return ArrayListVisitor};var IndexedPointInAreaLocator=function d(){this._index=null;var s=arguments[0];if(!hasInterface(s,Polygonal))throw new IllegalArgumentException("Argument must be Polygonal");this._index=new IntervalIndexedGeometry(s)},staticAccessors$44={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};IndexedPointInAreaLocator.prototype.locate=function d(s){var f=new RayCrossingCounter(s),_=new SegmentVisitor(f);return this._index.query(s.y,s.y,_),f.getLocation()};IndexedPointInAreaLocator.prototype.interfaces_=function d(){return[PointOnGeometryLocator]};IndexedPointInAreaLocator.prototype.getClass=function d(){return IndexedPointInAreaLocator};staticAccessors$44.SegmentVisitor.get=function(){return SegmentVisitor};staticAccessors$44.IntervalIndexedGeometry.get=function(){return IntervalIndexedGeometry};Object.defineProperties(IndexedPointInAreaLocator,staticAccessors$44);var SegmentVisitor=function d(){this._counter=null;var s=arguments[0];this._counter=s};SegmentVisitor.prototype.visitItem=function d(s){var f=s;this._counter.countSegment(f.getCoordinate(0),f.getCoordinate(1))};SegmentVisitor.prototype.interfaces_=function d(){return[ItemVisitor]};SegmentVisitor.prototype.getClass=function d(){return SegmentVisitor};var IntervalIndexedGeometry=function d(){this._index=new SortedPackedIntervalRTree;var s=arguments[0];this.init(s)};IntervalIndexedGeometry.prototype.init=function d(s){for(var f=this,_=LinearComponentExtracter.getLines(s),S=_.iterator();S.hasNext();){var T=S.next(),F=T.getCoordinates();f.addLine(F)}};IntervalIndexedGeometry.prototype.addLine=function d(s){for(var f=this,_=1;_<s.length;_++){var S=new LineSegment(s[_-1],s[_]),T=Math.min(S.p0.y,S.p1.y),F=Math.max(S.p0.y,S.p1.y);f._index.insert(T,F,S)}};IntervalIndexedGeometry.prototype.query=function d(){if(arguments.length===2){var s=arguments[0],f=arguments[1],_=new ArrayListVisitor;return this._index.query(s,f,_),_.getItems()}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2];this._index.query(S,T,F)}};IntervalIndexedGeometry.prototype.interfaces_=function d(){return[]};IntervalIndexedGeometry.prototype.getClass=function d(){return IntervalIndexedGeometry};var GeometryGraph=function(d){function s(){if(d.call(this),this._parentGeom=null,this._lineEdgeMap=new HashMap,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new PointLocator,arguments.length===2){var f=arguments[0],_=arguments[1],S=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;this._argIndex=f,this._parentGeom=_,this._boundaryNodeRule=S,_!==null&&this.add(_)}else if(arguments.length===3){var T=arguments[0],F=arguments[1],M=arguments[2];this._argIndex=T,this._parentGeom=F,this._boundaryNodeRule=M,F!==null&&this.add(F)}}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.insertBoundaryPoint=function(_,S){var T=this._nodes.addNode(S),F=T.getLabel(),M=1,P=Location.NONE;P=F.getLocation(_,Position.ON),P===Location.BOUNDARY&&M++;var H=s.determineBoundary(this._boundaryNodeRule,M);F.setLocation(_,H)},s.prototype.computeSelfNodes=function(){if(arguments.length===2){var _=arguments[0],S=arguments[1];return this.computeSelfNodes(_,S,!1)}else if(arguments.length===3){var T=arguments[0],F=arguments[1],M=arguments[2],P=new SegmentIntersector$2(T,!0,!1);P.setIsDoneIfProperInt(M);var H=this.createEdgeSetIntersector(),J=this._parentGeom instanceof LinearRing||this._parentGeom instanceof Polygon||this._parentGeom instanceof MultiPolygon,K=F||!J;return H.computeIntersections(this._edges,P,K),this.addSelfIntersectionNodes(this._argIndex),P}},s.prototype.computeSplitEdges=function(_){for(var S=this._edges.iterator();S.hasNext();){var T=S.next();T.eiList.addSplitEdges(_)}},s.prototype.computeEdgeIntersections=function(_,S,T){var F=new SegmentIntersector$2(S,T,!0);F.setBoundaryNodes(this.getBoundaryNodes(),_.getBoundaryNodes());var M=this.createEdgeSetIntersector();return M.computeIntersections(this._edges,_._edges,F),F},s.prototype.getGeometry=function(){return this._parentGeom},s.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},s.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},s.prototype.addPoint=function(){if(arguments[0]instanceof Point){var _=arguments[0],S=_.getCoordinate();this.insertPoint(this._argIndex,S,Location.INTERIOR)}else if(arguments[0]instanceof Coordinate){var T=arguments[0];this.insertPoint(this._argIndex,T,Location.INTERIOR)}},s.prototype.addPolygon=function(_){var S=this;this.addPolygonRing(_.getExteriorRing(),Location.EXTERIOR,Location.INTERIOR);for(var T=0;T<_.getNumInteriorRing();T++){var F=_.getInteriorRingN(T);S.addPolygonRing(F,Location.INTERIOR,Location.EXTERIOR)}},s.prototype.addEdge=function(_){this.insertEdge(_);var S=_.getCoordinates();this.insertPoint(this._argIndex,S[0],Location.BOUNDARY),this.insertPoint(this._argIndex,S[S.length-1],Location.BOUNDARY)},s.prototype.addLineString=function(_){var S=CoordinateArrays.removeRepeatedPoints(_.getCoordinates());if(S.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=S[0],null;var T=new Edge(S,new Label(this._argIndex,Location.INTERIOR));this._lineEdgeMap.put(_,T),this.insertEdge(T),Assert.isTrue(S.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,S[0]),this.insertBoundaryPoint(this._argIndex,S[S.length-1])},s.prototype.getInvalidPoint=function(){return this._invalidPoint},s.prototype.getBoundaryPoints=function(){for(var _=this.getBoundaryNodes(),S=new Array(_.size()).fill(null),T=0,F=_.iterator();F.hasNext();){var M=F.next();S[T++]=M.getCoordinate().copy()}return S},s.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},s.prototype.addSelfIntersectionNode=function(_,S,T){if(this.isBoundaryNode(_,S))return null;T===Location.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(_,S):this.insertPoint(_,S,T)},s.prototype.addPolygonRing=function(_,S,T){if(_.isEmpty())return null;var F=CoordinateArrays.removeRepeatedPoints(_.getCoordinates());if(F.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=F[0],null;var M=S,P=T;CGAlgorithms.isCCW(F)&&(M=T,P=S);var H=new Edge(F,new Label(this._argIndex,Location.BOUNDARY,M,P));this._lineEdgeMap.put(_,H),this.insertEdge(H),this.insertPoint(this._argIndex,F[0],Location.BOUNDARY)},s.prototype.insertPoint=function(_,S,T){var F=this._nodes.addNode(S),M=F.getLabel();M===null?F._label=new Label(_,T):M.setLocation(_,T)},s.prototype.createEdgeSetIntersector=function(){return new SimpleMCSweepLineIntersector},s.prototype.addSelfIntersectionNodes=function(_){for(var S=this,T=this._edges.iterator();T.hasNext();)for(var F=T.next(),M=F.getLabel().getLocation(_),P=F.eiList.iterator();P.hasNext();){var H=P.next();S.addSelfIntersectionNode(_,H.coord,M)}},s.prototype.add=function(){if(arguments.length===1){var _=arguments[0];if(_.isEmpty())return null;if(_ instanceof MultiPolygon&&(this._useBoundaryDeterminationRule=!1),_ instanceof Polygon)this.addPolygon(_);else if(_ instanceof LineString)this.addLineString(_);else if(_ instanceof Point)this.addPoint(_);else if(_ instanceof MultiPoint)this.addCollection(_);else if(_ instanceof MultiLineString)this.addCollection(_);else if(_ instanceof MultiPolygon)this.addCollection(_);else if(_ instanceof GeometryCollection)this.addCollection(_);else throw new Error(_.getClass().getName())}else return d.prototype.add.apply(this,arguments)},s.prototype.addCollection=function(_){for(var S=this,T=0;T<_.getNumGeometries();T++){var F=_.getGeometryN(T);S.add(F)}},s.prototype.locate=function(_){return hasInterface(this._parentGeom,Polygonal)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new IndexedPointInAreaLocator(this._parentGeom)),this._areaPtLocator.locate(_)):this._ptLocator.locate(_,this._parentGeom)},s.prototype.findEdge=function(){if(arguments.length===1){var _=arguments[0];return this._lineEdgeMap.get(_)}else return d.prototype.findEdge.apply(this,arguments)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s.determineBoundary=function(_,S){return _.isInBoundary(S)?Location.BOUNDARY:Location.INTERIOR},s}(PlanarGraph),GeometryGraphOp=function d(){if(this._li=new RobustLineIntersector,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var s=arguments[0];this.setComputationPrecision(s.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new GeometryGraph(0,s)}else if(arguments.length===2){var f=arguments[0],_=arguments[1],S=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;f.getPrecisionModel().compareTo(_.getPrecisionModel())>=0?this.setComputationPrecision(f.getPrecisionModel()):this.setComputationPrecision(_.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new GeometryGraph(0,f,S),this._arg[1]=new GeometryGraph(1,_,S)}else if(arguments.length===3){var T=arguments[0],F=arguments[1],M=arguments[2];T.getPrecisionModel().compareTo(F.getPrecisionModel())>=0?this.setComputationPrecision(T.getPrecisionModel()):this.setComputationPrecision(F.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new GeometryGraph(0,T,M),this._arg[1]=new GeometryGraph(1,F,M)}};GeometryGraphOp.prototype.getArgGeometry=function d(s){return this._arg[s].getGeometry()};GeometryGraphOp.prototype.setComputationPrecision=function d(s){this._resultPrecisionModel=s,this._li.setPrecisionModel(this._resultPrecisionModel)};GeometryGraphOp.prototype.interfaces_=function d(){return[]};GeometryGraphOp.prototype.getClass=function d(){return GeometryGraphOp};var GeometryMapper=function d(){};GeometryMapper.prototype.interfaces_=function d(){return[]};GeometryMapper.prototype.getClass=function d(){return GeometryMapper};GeometryMapper.map=function d(){if(arguments[0]instanceof Geometry&&hasInterface(arguments[1],GeometryMapper.MapOp)){for(var s=arguments[0],f=arguments[1],_=new ArrayList,S=0;S<s.getNumGeometries();S++){var T=f.map(s.getGeometryN(S));T!==null&&_.add(T)}return s.getFactory().buildGeometry(_)}else if(hasInterface(arguments[0],Collection)&&hasInterface(arguments[1],GeometryMapper.MapOp)){for(var F=arguments[0],M=arguments[1],P=new ArrayList,H=F.iterator();H.hasNext();){var J=H.next(),K=M.map(J);K!==null&&P.add(K)}return P}};GeometryMapper.MapOp=function d(){};var OverlayOp=function(d){function s(){var f=arguments[0],_=arguments[1];d.call(this,f,_),this._ptLocator=new PointLocator,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new EdgeList,this._resultPolyList=new ArrayList,this._resultLineList=new ArrayList,this._resultPointList=new ArrayList,this._graph=new PlanarGraph(new OverlayNodeFactory),this._geomFact=f.getFactory()}return d&&(s.__proto__=d),s.prototype=Object.create(d&&d.prototype),s.prototype.constructor=s,s.prototype.insertUniqueEdge=function(_){var S=this._edgeList.findEqualEdge(_);if(S!==null){var T=S.getLabel(),F=_.getLabel();S.isPointwiseEqual(_)||(F=new Label(_.getLabel()),F.flip());var M=S.getDepth();M.isNull()&&M.add(T),M.add(F),T.merge(F)}else this._edgeList.add(_)},s.prototype.getGraph=function(){return this._graph},s.prototype.cancelDuplicateResultEdges=function(){for(var _=this._graph.getEdgeEnds().iterator();_.hasNext();){var S=_.next(),T=S.getSym();S.isInResult()&&T.isInResult()&&(S.setInResult(!1),T.setInResult(!1))}},s.prototype.isCoveredByLA=function(_){return!!(this.isCovered(_,this._resultLineList)||this.isCovered(_,this._resultPolyList))},s.prototype.computeGeometry=function(_,S,T,F){var M=new ArrayList;return M.addAll(_),M.addAll(S),M.addAll(T),M.isEmpty()?s.createEmptyResult(F,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(M)},s.prototype.mergeSymLabels=function(){for(var _=this._graph.getNodes().iterator();_.hasNext();){var S=_.next();S.getEdges().mergeSymLabels()}},s.prototype.isCovered=function(_,S){for(var T=this,F=S.iterator();F.hasNext();){var M=F.next(),P=T._ptLocator.locate(_,M);if(P!==Location.EXTERIOR)return!0}return!1},s.prototype.replaceCollapsedEdges=function(){for(var _=new ArrayList,S=this._edgeList.iterator();S.hasNext();){var T=S.next();T.isCollapsed()&&(S.remove(),_.add(T.getCollapsedEdge()))}this._edgeList.addAll(_)},s.prototype.updateNodeLabelling=function(){for(var _=this._graph.getNodes().iterator();_.hasNext();){var S=_.next(),T=S.getEdges().getLabel();S.getLabel().merge(T)}},s.prototype.getResultGeometry=function(_){return this.computeOverlay(_),this._resultGeom},s.prototype.insertUniqueEdges=function(_){for(var S=this,T=_.iterator();T.hasNext();){var F=T.next();S.insertUniqueEdge(F)}},s.prototype.computeOverlay=function(_){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var S=new ArrayList;this._arg[0].computeSplitEdges(S),this._arg[1].computeSplitEdges(S),this.insertUniqueEdges(S),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),EdgeNodingValidator.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(_),this.cancelDuplicateResultEdges();var T=new PolygonBuilder(this._geomFact);T.add(this._graph),this._resultPolyList=T.getPolygons();var F=new LineBuilder(this,this._geomFact,this._ptLocator);this._resultLineList=F.build(_);var M=new PointBuilder(this,this._geomFact,this._ptLocator);this._resultPointList=M.build(_),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,_)},s.prototype.labelIncompleteNode=function(_,S){var T=this._ptLocator.locate(_.getCoordinate(),this._arg[S].getGeometry());_.getLabel().setLocation(S,T)},s.prototype.copyPoints=function(_){for(var S=this,T=this._arg[_].getNodeIterator();T.hasNext();){var F=T.next(),M=S._graph.addNode(F.getCoordinate());M.setLabel(_,F.getLabel().getLocation(_))}},s.prototype.findResultAreaEdges=function(_){for(var S=this._graph.getEdgeEnds().iterator();S.hasNext();){var T=S.next(),F=T.getLabel();F.isArea()&&!T.isInteriorAreaEdge()&&s.isResultOfOp(F.getLocation(0,Position.RIGHT),F.getLocation(1,Position.RIGHT),_)&&T.setInResult(!0)}},s.prototype.computeLabelsFromDepths=function(){for(var _=this._edgeList.iterator();_.hasNext();){var S=_.next(),T=S.getLabel(),F=S.getDepth();if(!F.isNull()){F.normalize();for(var M=0;M<2;M++)!T.isNull(M)&&T.isArea()&&!F.isNull(M)&&(F.getDelta(M)===0?T.toLine(M):(Assert.isTrue(!F.isNull(M,Position.LEFT),"depth of LEFT side has not been initialized"),T.setLocation(M,Position.LEFT,F.getLocation(M,Position.LEFT)),Assert.isTrue(!F.isNull(M,Position.RIGHT),"depth of RIGHT side has not been initialized"),T.setLocation(M,Position.RIGHT,F.getLocation(M,Position.RIGHT))))}}},s.prototype.computeLabelling=function(){for(var _=this,S=this._graph.getNodes().iterator();S.hasNext();){var T=S.next();T.getEdges().computeLabelling(_._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},s.prototype.labelIncompleteNodes=function(){for(var _=this,S=this._graph.getNodes().iterator();S.hasNext();){var T=S.next(),F=T.getLabel();T.isIsolated()&&(F.isNull(0)?_.labelIncompleteNode(T,0):_.labelIncompleteNode(T,1)),T.getEdges().updateLabelling(F)}},s.prototype.isCoveredByA=function(_){return!!this.isCovered(_,this._resultPolyList)},s.prototype.interfaces_=function(){return[]},s.prototype.getClass=function(){return s},s}(GeometryGraphOp);OverlayOp.overlayOp=function(d,s,f){var _=new OverlayOp(d,s),S=_.getResultGeometry(f);return S};OverlayOp.intersection=function(d,s){if(d.isEmpty()||s.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.INTERSECTION,d,s,d.getFactory());if(d.isGeometryCollection()){var f=s;return GeometryCollectionMapper.map(d,{interfaces_:function(){return[GeometryMapper.MapOp]},map:function(_){return _.intersection(f)}})}return d.checkNotGeometryCollection(d),d.checkNotGeometryCollection(s),SnapIfNeededOverlayOp.overlayOp(d,s,OverlayOp.INTERSECTION)};OverlayOp.symDifference=function(d,s){if(d.isEmpty()||s.isEmpty()){if(d.isEmpty()&&s.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.SYMDIFFERENCE,d,s,d.getFactory());if(d.isEmpty())return s.copy();if(s.isEmpty())return d.copy()}return d.checkNotGeometryCollection(d),d.checkNotGeometryCollection(s),SnapIfNeededOverlayOp.overlayOp(d,s,OverlayOp.SYMDIFFERENCE)};OverlayOp.resultDimension=function(d,s,f){var _=s.getDimension(),S=f.getDimension(),T=-1;switch(d){case OverlayOp.INTERSECTION:T=Math.min(_,S);break;case OverlayOp.UNION:T=Math.max(_,S);break;case OverlayOp.DIFFERENCE:T=_;break;case OverlayOp.SYMDIFFERENCE:T=Math.max(_,S);break}return T};OverlayOp.createEmptyResult=function(d,s,f,_){var S=null;switch(OverlayOp.resultDimension(d,s,f)){case-1:S=_.createGeometryCollection(new Array(0).fill(null));break;case 0:S=_.createPoint();break;case 1:S=_.createLineString();break;case 2:S=_.createPolygon();break}return S};OverlayOp.difference=function(d,s){return d.isEmpty()?OverlayOp.createEmptyResult(OverlayOp.DIFFERENCE,d,s,d.getFactory()):s.isEmpty()?d.copy():(d.checkNotGeometryCollection(d),d.checkNotGeometryCollection(s),SnapIfNeededOverlayOp.overlayOp(d,s,OverlayOp.DIFFERENCE))};OverlayOp.isResultOfOp=function(){if(arguments.length===2){var d=arguments[0],s=arguments[1],f=d.getLocation(0),_=d.getLocation(1);return OverlayOp.isResultOfOp(f,_,s)}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2];switch(S===Location.BOUNDARY&&(S=Location.INTERIOR),T===Location.BOUNDARY&&(T=Location.INTERIOR),F){case OverlayOp.INTERSECTION:return S===Location.INTERIOR&&T===Location.INTERIOR;case OverlayOp.UNION:return S===Location.INTERIOR||T===Location.INTERIOR;case OverlayOp.DIFFERENCE:return S===Location.INTERIOR&&T!==Location.INTERIOR;case OverlayOp.SYMDIFFERENCE:return S===Location.INTERIOR&&T!==Location.INTERIOR||S!==Location.INTERIOR&&T===Location.INTERIOR}return!1}};OverlayOp.INTERSECTION=1;OverlayOp.UNION=2;OverlayOp.DIFFERENCE=3;OverlayOp.SYMDIFFERENCE=4;var FuzzyPointLocator=function d(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new PointLocator,this._seg=new LineSegment;var s=arguments[0],f=arguments[1];this._g=s,this._boundaryDistanceTolerance=f,this._linework=this.extractLinework(s)};FuzzyPointLocator.prototype.isWithinToleranceOfBoundary=function d(s){for(var f=this,_=0;_<this._linework.getNumGeometries();_++)for(var S=f._linework.getGeometryN(_),T=S.getCoordinateSequence(),F=0;F<T.size()-1;F++){T.getCoordinate(F,f._seg.p0),T.getCoordinate(F+1,f._seg.p1);var M=f._seg.distance(s);if(M<=f._boundaryDistanceTolerance)return!0}return!1};FuzzyPointLocator.prototype.getLocation=function d(s){return this.isWithinToleranceOfBoundary(s)?Location.BOUNDARY:this._ptLocator.locate(s,this._g)};FuzzyPointLocator.prototype.extractLinework=function d(s){var f=new PolygonalLineworkExtracter;s.apply(f);var _=f.getLinework(),S=GeometryFactory.toLineStringArray(_);return s.getFactory().createMultiLineString(S)};FuzzyPointLocator.prototype.interfaces_=function d(){return[]};FuzzyPointLocator.prototype.getClass=function d(){return FuzzyPointLocator};var PolygonalLineworkExtracter=function d(){this._linework=null,this._linework=new ArrayList};PolygonalLineworkExtracter.prototype.getLinework=function d(){return this._linework};PolygonalLineworkExtracter.prototype.filter=function d(s){var f=this;if(s instanceof Polygon){var _=s;this._linework.add(_.getExteriorRing());for(var S=0;S<_.getNumInteriorRing();S++)f._linework.add(_.getInteriorRingN(S))}};PolygonalLineworkExtracter.prototype.interfaces_=function d(){return[GeometryFilter]};PolygonalLineworkExtracter.prototype.getClass=function d(){return PolygonalLineworkExtracter};var OffsetPointGenerator=function d(){this._g=null,this._doLeft=!0,this._doRight=!0;var s=arguments[0];this._g=s};OffsetPointGenerator.prototype.extractPoints=function d(s,f,_){for(var S=this,T=s.getCoordinates(),F=0;F<T.length-1;F++)S.computeOffsetPoints(T[F],T[F+1],f,_)};OffsetPointGenerator.prototype.setSidesToGenerate=function d(s,f){this._doLeft=s,this._doRight=f};OffsetPointGenerator.prototype.getPoints=function d(s){for(var f=this,_=new ArrayList,S=LinearComponentExtracter.getLines(this._g),T=S.iterator();T.hasNext();){var F=T.next();f.extractPoints(F,s,_)}return _};OffsetPointGenerator.prototype.computeOffsetPoints=function d(s,f,_,S){var T=f.x-s.x,F=f.y-s.y,M=Math.sqrt(T*T+F*F),P=_*T/M,H=_*F/M,J=(f.x+s.x)/2,K=(f.y+s.y)/2;if(this._doLeft){var oe=new Coordinate(J-H,K+P);S.add(oe)}if(this._doRight){var se=new Coordinate(J+H,K-P);S.add(se)}};OffsetPointGenerator.prototype.interfaces_=function d(){return[]};OffsetPointGenerator.prototype.getClass=function d(){return OffsetPointGenerator};var OverlayResultValidator=function d(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=d.TOLERANCE,this._testCoords=new ArrayList;var s=arguments[0],f=arguments[1],_=arguments[2];this._boundaryDistanceTolerance=d.computeBoundaryDistanceTolerance(s,f),this._geom=[s,f,_],this._locFinder=[new FuzzyPointLocator(this._geom[0],this._boundaryDistanceTolerance),new FuzzyPointLocator(this._geom[1],this._boundaryDistanceTolerance),new FuzzyPointLocator(this._geom[2],this._boundaryDistanceTolerance)]},staticAccessors$46={TOLERANCE:{configurable:!0}};OverlayResultValidator.prototype.reportResult=function d(s,f,_){System.out.println("Overlay result invalid - A:"+Location.toLocationSymbol(f[0])+" B:"+Location.toLocationSymbol(f[1])+" expected:"+(_?"i":"e")+" actual:"+Location.toLocationSymbol(f[2]))};OverlayResultValidator.prototype.isValid=function d(s){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var f=this.checkValid(s);return f};OverlayResultValidator.prototype.checkValid=function d(){var s=this;if(arguments.length===1){for(var f=arguments[0],_=0;_<this._testCoords.size();_++){var S=s._testCoords.get(_);if(!s.checkValid(f,S))return s._invalidLocation=S,!1}return!0}else if(arguments.length===2){var T=arguments[0],F=arguments[1];return this._location[0]=this._locFinder[0].getLocation(F),this._location[1]=this._locFinder[1].getLocation(F),this._location[2]=this._locFinder[2].getLocation(F),OverlayResultValidator.hasLocation(this._location,Location.BOUNDARY)?!0:this.isValidResult(T,this._location)}};OverlayResultValidator.prototype.addTestPts=function d(s){var f=new OffsetPointGenerator(s);this._testCoords.addAll(f.getPoints(5*this._boundaryDistanceTolerance))};OverlayResultValidator.prototype.isValidResult=function d(s,f){var _=OverlayOp.isResultOfOp(f[0],f[1],s),S=f[2]===Location.INTERIOR,T=!(_^S);return T||this.reportResult(s,f,_),T};OverlayResultValidator.prototype.getInvalidLocation=function d(){return this._invalidLocation};OverlayResultValidator.prototype.interfaces_=function d(){return[]};OverlayResultValidator.prototype.getClass=function d(){return OverlayResultValidator};OverlayResultValidator.hasLocation=function d(s,f){for(var _=0;_<3;_++)if(s[_]===f)return!0;return!1};OverlayResultValidator.computeBoundaryDistanceTolerance=function d(s,f){return Math.min(GeometrySnapper.computeSizeBasedSnapTolerance(s),GeometrySnapper.computeSizeBasedSnapTolerance(f))};OverlayResultValidator.isValid=function d(s,f,_,S){var T=new OverlayResultValidator(s,f,S);return T.isValid(_)};staticAccessors$46.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(OverlayResultValidator,staticAccessors$46);var GeometryCombiner=function d(s){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=d.extractFactory(s),this._inputGeoms=s};GeometryCombiner.prototype.extractElements=function d(s,f){var _=this;if(s===null)return null;for(var S=0;S<s.getNumGeometries();S++){var T=s.getGeometryN(S);_._skipEmpty&&T.isEmpty()||f.add(T)}};GeometryCombiner.prototype.combine=function d(){for(var s=this,f=new ArrayList,_=this._inputGeoms.iterator();_.hasNext();){var S=_.next();s.extractElements(S,f)}return f.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(f)};GeometryCombiner.prototype.interfaces_=function d(){return[]};GeometryCombiner.prototype.getClass=function d(){return GeometryCombiner};GeometryCombiner.combine=function d(){if(arguments.length===1){var s=arguments[0],f=new GeometryCombiner(s);return f.combine()}else if(arguments.length===2){var _=arguments[0],S=arguments[1],T=new GeometryCombiner(GeometryCombiner.createList(_,S));return T.combine()}else if(arguments.length===3){var F=arguments[0],M=arguments[1],P=arguments[2],H=new GeometryCombiner(GeometryCombiner.createList(F,M,P));return H.combine()}};GeometryCombiner.extractFactory=function d(s){return s.isEmpty()?null:s.iterator().next().getFactory()};GeometryCombiner.createList=function d(){if(arguments.length===2){var s=arguments[0],f=arguments[1],_=new ArrayList;return _.add(s),_.add(f),_}else if(arguments.length===3){var S=arguments[0],T=arguments[1],F=arguments[2],M=new ArrayList;return M.add(S),M.add(T),M.add(F),M}};var CascadedPolygonUnion=function d(){this._inputPolys=null,this._geomFactory=null;var s=arguments[0];this._inputPolys=s,this._inputPolys===null&&(this._inputPolys=new ArrayList)},staticAccessors$47={STRTREE_NODE_CAPACITY:{configurable:!0}};CascadedPolygonUnion.prototype.reduceToGeometries=function d(s){for(var f=this,_=new ArrayList,S=s.iterator();S.hasNext();){var T=S.next(),F=null;hasInterface(T,List)?F=f.unionTree(T):T instanceof Geometry&&(F=T),_.add(F)}return _};CascadedPolygonUnion.prototype.extractByEnvelope=function d(s,f,_){for(var S=new ArrayList,T=0;T<f.getNumGeometries();T++){var F=f.getGeometryN(T);F.getEnvelopeInternal().intersects(s)?S.add(F):_.add(F)}return this._geomFactory.buildGeometry(S)};CascadedPolygonUnion.prototype.unionOptimized=function d(s,f){var _=s.getEnvelopeInternal(),S=f.getEnvelopeInternal();if(!_.intersects(S)){var T=GeometryCombiner.combine(s,f);return T}if(s.getNumGeometries()<=1&&f.getNumGeometries()<=1)return this.unionActual(s,f);var F=_.intersection(S);return this.unionUsingEnvelopeIntersection(s,f,F)};CascadedPolygonUnion.prototype.union=function d(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var s=new STRtree(CascadedPolygonUnion.STRTREE_NODE_CAPACITY),f=this._inputPolys.iterator();f.hasNext();){var _=f.next();s.insert(_.getEnvelopeInternal(),_)}this._inputPolys=null;var S=s.itemsTree(),T=this.unionTree(S);return T};CascadedPolygonUnion.prototype.binaryUnion=function d(){if(arguments.length===1){var s=arguments[0];return this.binaryUnion(s,0,s.size())}else if(arguments.length===3){var f=arguments[0],_=arguments[1],S=arguments[2];if(S-_<=1){var T=CascadedPolygonUnion.getGeometry(f,_);return this.unionSafe(T,null)}else{if(S-_===2)return this.unionSafe(CascadedPolygonUnion.getGeometry(f,_),CascadedPolygonUnion.getGeometry(f,_+1));var F=Math.trunc((S+_)/2),M=this.binaryUnion(f,_,F),P=this.binaryUnion(f,F,S);return this.unionSafe(M,P)}}};CascadedPolygonUnion.prototype.repeatedUnion=function d(s){for(var f=null,_=s.iterator();_.hasNext();){var S=_.next();f===null?f=S.copy():f=f.union(S)}return f};CascadedPolygonUnion.prototype.unionSafe=function d(s,f){return s===null&&f===null?null:s===null?f.copy():f===null?s.copy():this.unionOptimized(s,f)};CascadedPolygonUnion.prototype.unionActual=function d(s,f){return CascadedPolygonUnion.restrictToPolygons(s.union(f))};CascadedPolygonUnion.prototype.unionTree=function d(s){var f=this.reduceToGeometries(s),_=this.binaryUnion(f);return _};CascadedPolygonUnion.prototype.unionUsingEnvelopeIntersection=function d(s,f,_){var S=new ArrayList,T=this.extractByEnvelope(_,s,S),F=this.extractByEnvelope(_,f,S),M=this.unionActual(T,F);S.add(M);var P=GeometryCombiner.combine(S);return P};CascadedPolygonUnion.prototype.bufferUnion=function d(){if(arguments.length===1){var s=arguments[0],f=s.get(0).getFactory(),_=f.buildGeometry(s),S=_.buffer(0);return S}else if(arguments.length===2){var T=arguments[0],F=arguments[1],M=T.getFactory(),P=M.createGeometryCollection([T,F]),H=P.buffer(0);return H}};CascadedPolygonUnion.prototype.interfaces_=function d(){return[]};CascadedPolygonUnion.prototype.getClass=function d(){return CascadedPolygonUnion};CascadedPolygonUnion.restrictToPolygons=function d(s){if(hasInterface(s,Polygonal))return s;var f=PolygonExtracter.getPolygons(s);return f.size()===1?f.get(0):s.getFactory().createMultiPolygon(GeometryFactory.toPolygonArray(f))};CascadedPolygonUnion.getGeometry=function d(s,f){return f>=s.size()?null:s.get(f)};CascadedPolygonUnion.union=function d(s){var f=new CascadedPolygonUnion(s);return f.union()};staticAccessors$47.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(CascadedPolygonUnion,staticAccessors$47);var UnionOp=function d(){};UnionOp.prototype.interfaces_=function d(){return[]};UnionOp.prototype.getClass=function d(){return UnionOp};UnionOp.union=function d(s,f){if(s.isEmpty()||f.isEmpty()){if(s.isEmpty()&&f.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.UNION,s,f,s.getFactory());if(s.isEmpty())return f.copy();if(f.isEmpty())return s.copy()}return s.checkNotGeometryCollection(s),s.checkNotGeometryCollection(f),SnapIfNeededOverlayOp.overlayOp(s,f,OverlayOp.UNION)};var earthRadius$5=63710088e-1,factors$5={centimeters:earthRadius$5*100,centimetres:earthRadius$5*100,degrees:earthRadius$5/111325,feet:earthRadius$5*3.28084,inches:earthRadius$5*39.37,kilometers:earthRadius$5/1e3,kilometres:earthRadius$5/1e3,meters:earthRadius$5,metres:earthRadius$5,miles:earthRadius$5/1609.344,millimeters:earthRadius$5*1e3,millimetres:earthRadius$5*1e3,nauticalmiles:earthRadius$5/1852,radians:1,yards:earthRadius$5*1.0936};function feature$f(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function featureCollection$4(d,s){s===void 0&&(s={});var f={type:"FeatureCollection"};return s.id&&(f.id=s.id),s.bbox&&(f.bbox=s.bbox),f.features=d,f}function radiansToLength$4(d,s){var f=factors$5[s];return d*f}function lengthToRadians$4(d,s){s===void 0&&(s="kilometers");var f=factors$5[s];if(!f)throw new Error(s+" units is invalid");return d/f}function featureEach$5(d,s){if(d.type==="Feature")s(d,0);else if(d.type==="FeatureCollection")for(var f=0;f<d.features.length&&s(d.features[f],f)!==!1;f++);}function geomEach$6(d,s){var f,_,S,T,F,M,P,H,J,K,oe=0,se=d.type==="FeatureCollection",ae=d.type==="Feature",ge=se?d.features.length:1;for(f=0;f<ge;f++){for(M=se?d.features[f].geometry:ae?d.geometry:d,H=se?d.features[f].properties:ae?d.properties:{},J=se?d.features[f].bbox:ae?d.bbox:void 0,K=se?d.features[f].id:ae?d.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,oe,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,oe,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],oe,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}oe++}}function adder(){return new Adder}function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(d){add$1(temp,d,this.t),add$1(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add$1(d,s,f){var _=d.s=s+f,S=_-s,T=_-S;d.t=s-T+(f-S)}var epsilon$5=1e-6,pi$4=Math.PI,halfPi$1=pi$4/2,quarterPi=pi$4/4,tau$3=pi$4*2,degrees=180/pi$4,radians=pi$4/180,abs$2=Math.abs,atan=Math.atan,atan2$1=Math.atan2,cos$1=Math.cos,sin$1=Math.sin,sqrt$1=Math.sqrt;function acos$1(d){return d>1?0:d<-1?pi$4:Math.acos(d)}function asin$1(d){return d>1?halfPi$1:d<-1?-halfPi$1:Math.asin(d)}function noop$2(){}function streamGeometry(d,s){d&&streamGeometryType.hasOwnProperty(d.type)&&streamGeometryType[d.type](d,s)}var streamObjectType={Feature:function(d,s){streamGeometry(d.geometry,s)},FeatureCollection:function(d,s){for(var f=d.features,_=-1,S=f.length;++_<S;)streamGeometry(f[_].geometry,s)}},streamGeometryType={Sphere:function(d,s){s.sphere()},Point:function(d,s){d=d.coordinates,s.point(d[0],d[1],d[2])},MultiPoint:function(d,s){for(var f=d.coordinates,_=-1,S=f.length;++_<S;)d=f[_],s.point(d[0],d[1],d[2])},LineString:function(d,s){streamLine(d.coordinates,s,0)},MultiLineString:function(d,s){for(var f=d.coordinates,_=-1,S=f.length;++_<S;)streamLine(f[_],s,0)},Polygon:function(d,s){streamPolygon(d.coordinates,s)},MultiPolygon:function(d,s){for(var f=d.coordinates,_=-1,S=f.length;++_<S;)streamPolygon(f[_],s)},GeometryCollection:function(d,s){for(var f=d.geometries,_=-1,S=f.length;++_<S;)streamGeometry(f[_],s)}};function streamLine(d,s,f){var _=-1,S=d.length-f,T;for(s.lineStart();++_<S;)T=d[_],s.point(T[0],T[1],T[2]);s.lineEnd()}function streamPolygon(d,s){var f=-1,_=d.length;for(s.polygonStart();++f<_;)streamLine(d[f],s,1);s.polygonEnd()}function geoStream(d,s){d&&streamObjectType.hasOwnProperty(d.type)?streamObjectType[d.type](d,s):streamGeometry(d,s)}adder();adder();function spherical(d){return[atan2$1(d[1],d[0]),asin$1(d[2])]}function cartesian(d){var s=d[0],f=d[1],_=cos$1(f);return[_*cos$1(s),_*sin$1(s),sin$1(f)]}function cartesianDot(d,s){return d[0]*s[0]+d[1]*s[1]+d[2]*s[2]}function cartesianCross(d,s){return[d[1]*s[2]-d[2]*s[1],d[2]*s[0]-d[0]*s[2],d[0]*s[1]-d[1]*s[0]]}function cartesianAddInPlace(d,s){d[0]+=s[0],d[1]+=s[1],d[2]+=s[2]}function cartesianScale(d,s){return[d[0]*s,d[1]*s,d[2]*s]}function cartesianNormalizeInPlace(d){var s=sqrt$1(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=s,d[1]/=s,d[2]/=s}adder();function compose(d,s){function f(_,S){return _=d(_,S),s(_[0],_[1])}return d.invert&&s.invert&&(f.invert=function(_,S){return _=s.invert(_,S),_&&d.invert(_[0],_[1])}),f}function rotationIdentity(d,s){return[d>pi$4?d-tau$3:d<-pi$4?d+tau$3:d,s]}rotationIdentity.invert=rotationIdentity;function rotateRadians(d,s,f){return(d%=tau$3)?s||f?compose(rotationLambda(d),rotationPhiGamma(s,f)):rotationLambda(d):s||f?rotationPhiGamma(s,f):rotationIdentity}function forwardRotationLambda(d){return function(s,f){return s+=d,[s>pi$4?s-tau$3:s<-pi$4?s+tau$3:s,f]}}function rotationLambda(d){var s=forwardRotationLambda(d);return s.invert=forwardRotationLambda(-d),s}function rotationPhiGamma(d,s){var f=cos$1(d),_=sin$1(d),S=cos$1(s),T=sin$1(s);function F(M,P){var H=cos$1(P),J=cos$1(M)*H,K=sin$1(M)*H,oe=sin$1(P),se=oe*f+J*_;return[atan2$1(K*S-se*T,J*f-oe*_),asin$1(se*S+K*T)]}return F.invert=function(M,P){var H=cos$1(P),J=cos$1(M)*H,K=sin$1(M)*H,oe=sin$1(P),se=oe*S-K*T;return[atan2$1(K*S+oe*T,J*f+se*_),asin$1(se*f-J*_)]},F}function circleStream(d,s,f,_,S,T){if(f){var F=cos$1(s),M=sin$1(s),P=_*f;S==null?(S=s+_*tau$3,T=s-P/2):(S=circleRadius(F,S),T=circleRadius(F,T),(_>0?S<T:S>T)&&(S+=_*tau$3));for(var H,J=S;_>0?J>T:J<T;J-=P)H=spherical([F,-M*cos$1(J),-M*sin$1(J)]),d.point(H[0],H[1])}}function circleRadius(d,s){s=cartesian(s),s[0]-=d,cartesianNormalizeInPlace(s);var f=acos$1(-s[1]);return((-s[2]<0?-f:f)+tau$3-epsilon$5)%tau$3}function clipBuffer(){var d=[],s;return{point:function(f,_){s.push([f,_])},lineStart:function(){d.push(s=[])},lineEnd:noop$2,rejoin:function(){d.length>1&&d.push(d.pop().concat(d.shift()))},result:function(){var f=d;return d=[],s=null,f}}}function clipLine(d,s,f,_,S,T){var F=d[0],M=d[1],P=s[0],H=s[1],J=0,K=1,oe=P-F,se=H-M,ae;if(ae=f-F,!(!oe&&ae>0)){if(ae/=oe,oe<0){if(ae<J)return;ae<K&&(K=ae)}else if(oe>0){if(ae>K)return;ae>J&&(J=ae)}if(ae=S-F,!(!oe&&ae<0)){if(ae/=oe,oe<0){if(ae>K)return;ae>J&&(J=ae)}else if(oe>0){if(ae<J)return;ae<K&&(K=ae)}if(ae=_-M,!(!se&&ae>0)){if(ae/=se,se<0){if(ae<J)return;ae<K&&(K=ae)}else if(se>0){if(ae>K)return;ae>J&&(J=ae)}if(ae=T-M,!(!se&&ae<0)){if(ae/=se,se<0){if(ae>K)return;ae>J&&(J=ae)}else if(se>0){if(ae<J)return;ae<K&&(K=ae)}return J>0&&(d[0]=F+J*oe,d[1]=M+J*se),K<1&&(s[0]=F+K*oe,s[1]=M+K*se),!0}}}}}function pointEqual(d,s){return abs$2(d[0]-s[0])<epsilon$5&&abs$2(d[1]-s[1])<epsilon$5}function Intersection(d,s,f,_){this.x=d,this.z=s,this.o=f,this.e=_,this.v=!1,this.n=this.p=null}function clipPolygon(d,s,f,_,S){var T=[],F=[],M,P;if(d.forEach(function(ae){if(!((ge=ae.length-1)<=0)){var ge,he=ae[0],Be=ae[ge],pe;if(pointEqual(he,Be)){for(S.lineStart(),M=0;M<ge;++M)S.point((he=ae[M])[0],he[1]);S.lineEnd();return}T.push(pe=new Intersection(he,ae,null,!0)),F.push(pe.o=new Intersection(he,null,pe,!1)),T.push(pe=new Intersection(Be,ae,null,!1)),F.push(pe.o=new Intersection(Be,null,pe,!0))}}),!!T.length){for(F.sort(s),link$1(T),link$1(F),M=0,P=F.length;M<P;++M)F[M].e=f=!f;for(var H=T[0],J,K;;){for(var oe=H,se=!0;oe.v;)if((oe=oe.n)===H)return;J=oe.z,S.lineStart();do{if(oe.v=oe.o.v=!0,oe.e){if(se)for(M=0,P=J.length;M<P;++M)S.point((K=J[M])[0],K[1]);else _(oe.x,oe.n.x,1,S);oe=oe.n}else{if(se)for(J=oe.p.z,M=J.length-1;M>=0;--M)S.point((K=J[M])[0],K[1]);else _(oe.x,oe.p.x,-1,S);oe=oe.p}oe=oe.o,J=oe.z,se=!se}while(!oe.v);S.lineEnd()}}}function link$1(d){if(s=d.length){for(var s,f=0,_=d[0],S;++f<s;)_.n=S=d[f],S.p=_,_=S;_.n=S=d[0],S.p=_}}function ascending(d,s){return d<s?-1:d>s?1:d>=s?0:NaN}function bisector(d){return d.length===1&&(d=ascendingComparator(d)),{left:function(s,f,_,S){for(_==null&&(_=0),S==null&&(S=s.length);_<S;){var T=_+S>>>1;d(s[T],f)<0?_=T+1:S=T}return _},right:function(s,f,_,S){for(_==null&&(_=0),S==null&&(S=s.length);_<S;){var T=_+S>>>1;d(s[T],f)>0?S=T:_=T+1}return _}}}function ascendingComparator(d){return function(s,f){return ascending(d(s),f)}}bisector(ascending);function merge$2(d){for(var s=d.length,f,_=-1,S=0,T,F;++_<s;)S+=d[_].length;for(T=new Array(S);--s>=0;)for(F=d[s],f=F.length;--f>=0;)T[--S]=F[f];return T}var clipMax=1e9,clipMin=-clipMax;function clipExtent(d,s,f,_){function S(H,J){return d<=H&&H<=f&&s<=J&&J<=_}function T(H,J,K,oe){var se=0,ae=0;if(H==null||(se=F(H,K))!==(ae=F(J,K))||P(H,J)<0^K>0)do oe.point(se===0||se===3?d:f,se>1?_:s);while((se=(se+K+4)%4)!==ae);else oe.point(J[0],J[1])}function F(H,J){return abs$2(H[0]-d)<epsilon$5?J>0?0:3:abs$2(H[0]-f)<epsilon$5?J>0?2:1:abs$2(H[1]-s)<epsilon$5?J>0?1:0:J>0?3:2}function M(H,J){return P(H.x,J.x)}function P(H,J){var K=F(H,1),oe=F(J,1);return K!==oe?K-oe:K===0?J[1]-H[1]:K===1?H[0]-J[0]:K===2?H[1]-J[1]:J[0]-H[0]}return function(H){var J=H,K=clipBuffer(),oe,se,ae,ge,he,Be,pe,be,Re,Fe,Me,ve={point:At,lineStart:xt,lineEnd:wt,polygonStart:Rt,polygonEnd:It};function At(jt,ta){S(jt,ta)&&J.point(jt,ta)}function Ct(){for(var jt=0,ta=0,Qn=se.length;ta<Qn;++ta)for(var ca=se[ta],Jn=1,wA=ca.length,LA=ca[0],ZA,xI,cI=LA[0],pI=LA[1];Jn<wA;++Jn)ZA=cI,xI=pI,LA=ca[Jn],cI=LA[0],pI=LA[1],xI<=_?pI>_&&(cI-ZA)*(_-xI)>(pI-xI)*(d-ZA)&&++jt:pI<=_&&(cI-ZA)*(_-xI)<(pI-xI)*(d-ZA)&&--jt;return jt}function Rt(){J=K,oe=[],se=[],Me=!0}function It(){var jt=Ct(),ta=Me&&jt,Qn=(oe=merge$2(oe)).length;(ta||Qn)&&(H.polygonStart(),ta&&(H.lineStart(),T(null,null,1,H),H.lineEnd()),Qn&&clipPolygon(oe,M,jt,T,H),H.polygonEnd()),J=H,oe=se=ae=null}function xt(){ve.point=Ft,se&&se.push(ae=[]),Fe=!0,Re=!1,pe=be=NaN}function wt(){oe&&(Ft(ge,he),Be&&Re&&K.rejoin(),oe.push(K.result())),ve.point=At,Re&&J.lineEnd()}function Ft(jt,ta){var Qn=S(jt,ta);if(se&&ae.push([jt,ta]),Fe)ge=jt,he=ta,Be=Qn,Fe=!1,Qn&&(J.lineStart(),J.point(jt,ta));else if(Qn&&Re)J.point(jt,ta);else{var ca=[pe=Math.max(clipMin,Math.min(clipMax,pe)),be=Math.max(clipMin,Math.min(clipMax,be))],Jn=[jt=Math.max(clipMin,Math.min(clipMax,jt)),ta=Math.max(clipMin,Math.min(clipMax,ta))];clipLine(ca,Jn,d,s,f,_)?(Re||(J.lineStart(),J.point(ca[0],ca[1])),J.point(Jn[0],Jn[1]),Qn||J.lineEnd(),Me=!1):Qn&&(J.lineStart(),J.point(jt,ta),Me=!1)}pe=jt,be=ta,Re=Qn}return ve}}var sum$2=adder();function polygonContains(d,s){var f=s[0],_=s[1],S=[sin$1(f),-cos$1(f),0],T=0,F=0;sum$2.reset();for(var M=0,P=d.length;M<P;++M)if(J=(H=d[M]).length)for(var H,J,K=H[J-1],oe=K[0],se=K[1]/2+quarterPi,ae=sin$1(se),ge=cos$1(se),he=0;he<J;++he,oe=pe,ae=Re,ge=Fe,K=Be){var Be=H[he],pe=Be[0],be=Be[1]/2+quarterPi,Re=sin$1(be),Fe=cos$1(be),Me=pe-oe,ve=Me>=0?1:-1,At=ve*Me,Ct=At>pi$4,Rt=ae*Re;if(sum$2.add(atan2$1(Rt*ve*sin$1(At),ge*Fe+Rt*cos$1(At))),T+=Ct?Me+ve*tau$3:Me,Ct^oe>=f^pe>=f){var It=cartesianCross(cartesian(K),cartesian(Be));cartesianNormalizeInPlace(It);var xt=cartesianCross(S,It);cartesianNormalizeInPlace(xt);var wt=(Ct^Me>=0?-1:1)*asin$1(xt[2]);(_>wt||_===wt&&(It[0]||It[1]))&&(F+=Ct^Me>=0?1:-1)}}return(T<-epsilon$5||T<epsilon$5&&sum$2<-epsilon$5)^F&1}adder();function identity$1(d){return d}adder();adder();var x0=1/0,y0=x0,x1=-x0,y1=x1,boundsStream={point:boundsPoint,lineStart:noop$2,lineEnd:noop$2,polygonStart:noop$2,polygonEnd:noop$2,result:function(){var d=[[x0,y0],[x1,y1]];return x1=y1=-(y0=x0=1/0),d}};function boundsPoint(d,s){d<x0&&(x0=d),d>x1&&(x1=d),s<y0&&(y0=s),s>y1&&(y1=s)}adder();function clip(d,s,f,_){return function(S,T){var F=s(T),M=S.invert(_[0],_[1]),P=clipBuffer(),H=s(P),J=!1,K,oe,se,ae={point:ge,lineStart:Be,lineEnd:pe,polygonStart:function(){ae.point=be,ae.lineStart=Re,ae.lineEnd=Fe,oe=[],K=[]},polygonEnd:function(){ae.point=ge,ae.lineStart=Be,ae.lineEnd=pe,oe=merge$2(oe);var Me=polygonContains(K,M);oe.length?(J||(T.polygonStart(),J=!0),clipPolygon(oe,compareIntersection,Me,f,T)):Me&&(J||(T.polygonStart(),J=!0),T.lineStart(),f(null,null,1,T),T.lineEnd()),J&&(T.polygonEnd(),J=!1),oe=K=null},sphere:function(){T.polygonStart(),T.lineStart(),f(null,null,1,T),T.lineEnd(),T.polygonEnd()}};function ge(Me,ve){var At=S(Me,ve);d(Me=At[0],ve=At[1])&&T.point(Me,ve)}function he(Me,ve){var At=S(Me,ve);F.point(At[0],At[1])}function Be(){ae.point=he,F.lineStart()}function pe(){ae.point=ge,F.lineEnd()}function be(Me,ve){se.push([Me,ve]);var At=S(Me,ve);H.point(At[0],At[1])}function Re(){H.lineStart(),se=[]}function Fe(){be(se[0][0],se[0][1]),H.lineEnd();var Me=H.clean(),ve=P.result(),At,Ct=ve.length,Rt,It,xt;if(se.pop(),K.push(se),se=null,!!Ct){if(Me&1){if(It=ve[0],(Rt=It.length-1)>0){for(J||(T.polygonStart(),J=!0),T.lineStart(),At=0;At<Rt;++At)T.point((xt=It[At])[0],xt[1]);T.lineEnd()}return}Ct>1&&Me&2&&ve.push(ve.pop().concat(ve.shift())),oe.push(ve.filter(validSegment))}}return ae}}function validSegment(d){return d.length>1}function compareIntersection(d,s){return((d=d.x)[0]<0?d[1]-halfPi$1-epsilon$5:halfPi$1-d[1])-((s=s.x)[0]<0?s[1]-halfPi$1-epsilon$5:halfPi$1-s[1])}const clipAntimeridian=clip(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi$4,-halfPi$1]);function clipAntimeridianLine(d){var s=NaN,f=NaN,_=NaN,S;return{lineStart:function(){d.lineStart(),S=1},point:function(T,F){var M=T>0?pi$4:-pi$4,P=abs$2(T-s);abs$2(P-pi$4)<epsilon$5?(d.point(s,f=(f+F)/2>0?halfPi$1:-halfPi$1),d.point(_,f),d.lineEnd(),d.lineStart(),d.point(M,f),d.point(T,f),S=0):_!==M&&P>=pi$4&&(abs$2(s-_)<epsilon$5&&(s-=_*epsilon$5),abs$2(T-M)<epsilon$5&&(T-=M*epsilon$5),f=clipAntimeridianIntersect(s,f,T,F),d.point(_,f),d.lineEnd(),d.lineStart(),d.point(M,f),S=0),d.point(s=T,f=F),_=M},lineEnd:function(){d.lineEnd(),s=f=NaN},clean:function(){return 2-S}}}function clipAntimeridianIntersect(d,s,f,_){var S,T,F=sin$1(d-f);return abs$2(F)>epsilon$5?atan((sin$1(s)*(T=cos$1(_))*sin$1(f)-sin$1(_)*(S=cos$1(s))*sin$1(d))/(S*T*F)):(s+_)/2}function clipAntimeridianInterpolate(d,s,f,_){var S;if(d==null)S=f*halfPi$1,_.point(-pi$4,S),_.point(0,S),_.point(pi$4,S),_.point(pi$4,0),_.point(pi$4,-S),_.point(0,-S),_.point(-pi$4,-S),_.point(-pi$4,0),_.point(-pi$4,S);else if(abs$2(d[0]-s[0])>epsilon$5){var T=d[0]<s[0]?pi$4:-pi$4;S=f*T/2,_.point(-T,S),_.point(0,S),_.point(T,S)}else _.point(s[0],s[1])}function clipCircle(d,s){var f=cos$1(d),_=f>0,S=abs$2(f)>epsilon$5;function T(J,K,oe,se){circleStream(se,d,s,oe,J,K)}function F(J,K){return cos$1(J)*cos$1(K)>f}function M(J){var K,oe,se,ae,ge;return{lineStart:function(){ae=se=!1,ge=1},point:function(he,Be){var pe=[he,Be],be,Re=F(he,Be),Fe=_?Re?0:H(he,Be):Re?H(he+(he<0?pi$4:-pi$4),Be):0;if(!K&&(ae=se=Re)&&J.lineStart(),Re!==se&&(be=P(K,pe),(!be||pointEqual(K,be)||pointEqual(pe,be))&&(pe[0]+=epsilon$5,pe[1]+=epsilon$5,Re=F(pe[0],pe[1]))),Re!==se)ge=0,Re?(J.lineStart(),be=P(pe,K),J.point(be[0],be[1])):(be=P(K,pe),J.point(be[0],be[1]),J.lineEnd()),K=be;else if(S&&K&&_^Re){var Me;!(Fe&oe)&&(Me=P(pe,K,!0))&&(ge=0,_?(J.lineStart(),J.point(Me[0][0],Me[0][1]),J.point(Me[1][0],Me[1][1]),J.lineEnd()):(J.point(Me[1][0],Me[1][1]),J.lineEnd(),J.lineStart(),J.point(Me[0][0],Me[0][1])))}Re&&(!K||!pointEqual(K,pe))&&J.point(pe[0],pe[1]),K=pe,se=Re,oe=Fe},lineEnd:function(){se&&J.lineEnd(),K=null},clean:function(){return ge|(ae&&se)<<1}}}function P(J,K,oe){var se=cartesian(J),ae=cartesian(K),ge=[1,0,0],he=cartesianCross(se,ae),Be=cartesianDot(he,he),pe=he[0],be=Be-pe*pe;if(!be)return!oe&&J;var Re=f*Be/be,Fe=-f*pe/be,Me=cartesianCross(ge,he),ve=cartesianScale(ge,Re),At=cartesianScale(he,Fe);cartesianAddInPlace(ve,At);var Ct=Me,Rt=cartesianDot(ve,Ct),It=cartesianDot(Ct,Ct),xt=Rt*Rt-It*(cartesianDot(ve,ve)-1);if(!(xt<0)){var wt=sqrt$1(xt),Ft=cartesianScale(Ct,(-Rt-wt)/It);if(cartesianAddInPlace(Ft,ve),Ft=spherical(Ft),!oe)return Ft;var jt=J[0],ta=K[0],Qn=J[1],ca=K[1],Jn;ta<jt&&(Jn=jt,jt=ta,ta=Jn);var wA=ta-jt,LA=abs$2(wA-pi$4)<epsilon$5,ZA=LA||wA<epsilon$5;if(!LA&&ca<Qn&&(Jn=Qn,Qn=ca,ca=Jn),ZA?LA?Qn+ca>0^Ft[1]<(abs$2(Ft[0]-jt)<epsilon$5?Qn:ca):Qn<=Ft[1]&&Ft[1]<=ca:wA>pi$4^(jt<=Ft[0]&&Ft[0]<=ta)){var xI=cartesianScale(Ct,(-Rt+wt)/It);return cartesianAddInPlace(xI,ve),[Ft,spherical(xI)]}}}function H(J,K){var oe=_?d:pi$4-d,se=0;return J<-oe?se|=1:J>oe&&(se|=2),K<-oe?se|=4:K>oe&&(se|=8),se}return clip(F,M,T,_?[0,-d]:[-pi$4,d-pi$4])}function transformer(d){return function(s){var f=new TransformStream;for(var _ in d)f[_]=d[_];return f.stream=s,f}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(d,s){this.stream.point(d,s)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fitExtent(d,s,f){var _=s[1][0]-s[0][0],S=s[1][1]-s[0][1],T=d.clipExtent&&d.clipExtent();d.scale(150).translate([0,0]),T!=null&&d.clipExtent(null),geoStream(f,d.stream(boundsStream));var F=boundsStream.result(),M=Math.min(_/(F[1][0]-F[0][0]),S/(F[1][1]-F[0][1])),P=+s[0][0]+(_-M*(F[1][0]+F[0][0]))/2,H=+s[0][1]+(S-M*(F[1][1]+F[0][1]))/2;return T!=null&&d.clipExtent(T),d.scale(M*150).translate([P,H])}function fitSize(d,s,f){return fitExtent(d,[[0,0],s],f)}var maxDepth=16,cosMinDistance=cos$1(30*radians);function resample(d,s){return+s?resample$1(d,s):resampleNone(d)}function resampleNone(d){return transformer({point:function(s,f){s=d(s,f),this.stream.point(s[0],s[1])}})}function resample$1(d,s){function f(_,S,T,F,M,P,H,J,K,oe,se,ae,ge,he){var Be=H-_,pe=J-S,be=Be*Be+pe*pe;if(be>4*s&&ge--){var Re=F+oe,Fe=M+se,Me=P+ae,ve=sqrt$1(Re*Re+Fe*Fe+Me*Me),At=asin$1(Me/=ve),Ct=abs$2(abs$2(Me)-1)<epsilon$5||abs$2(T-K)<epsilon$5?(T+K)/2:atan2$1(Fe,Re),Rt=d(Ct,At),It=Rt[0],xt=Rt[1],wt=It-_,Ft=xt-S,jt=pe*wt-Be*Ft;(jt*jt/be>s||abs$2((Be*wt+pe*Ft)/be-.5)>.3||F*oe+M*se+P*ae<cosMinDistance)&&(f(_,S,T,F,M,P,It,xt,Ct,Re/=ve,Fe/=ve,Me,ge,he),he.point(It,xt),f(It,xt,Ct,Re,Fe,Me,H,J,K,oe,se,ae,ge,he))}}return function(_){var S,T,F,M,P,H,J,K,oe,se,ae,ge,he={point:Be,lineStart:pe,lineEnd:Re,polygonStart:function(){_.polygonStart(),he.lineStart=Fe},polygonEnd:function(){_.polygonEnd(),he.lineStart=pe}};function Be(At,Ct){At=d(At,Ct),_.point(At[0],At[1])}function pe(){K=NaN,he.point=be,_.lineStart()}function be(At,Ct){var Rt=cartesian([At,Ct]),It=d(At,Ct);f(K,oe,J,se,ae,ge,K=It[0],oe=It[1],J=At,se=Rt[0],ae=Rt[1],ge=Rt[2],maxDepth,_),_.point(K,oe)}function Re(){he.point=Be,_.lineEnd()}function Fe(){pe(),he.point=Me,he.lineEnd=ve}function Me(At,Ct){be(S=At,Ct),T=K,F=oe,M=se,P=ae,H=ge,he.point=be}function ve(){f(K,oe,J,se,ae,ge,T,F,S,M,P,H,maxDepth,_),he.lineEnd=Re,Re()}return he}}var transformRadians=transformer({point:function(d,s){this.stream.point(d*radians,s*radians)}});function projection(d){return projectionMutator(function(){return d})()}function projectionMutator(d){var s,f=150,_=480,S=250,T,F,M=0,P=0,H=0,J=0,K=0,oe,se,ae=null,ge=clipAntimeridian,he=null,Be,pe,be,Re=identity$1,Fe=.5,Me=resample(It,Fe),ve,At;function Ct(Ft){return Ft=se(Ft[0]*radians,Ft[1]*radians),[Ft[0]*f+T,F-Ft[1]*f]}function Rt(Ft){return Ft=se.invert((Ft[0]-T)/f,(F-Ft[1])/f),Ft&&[Ft[0]*degrees,Ft[1]*degrees]}function It(Ft,jt){return Ft=s(Ft,jt),[Ft[0]*f+T,F-Ft[1]*f]}Ct.stream=function(Ft){return ve&&At===Ft?ve:ve=transformRadians(ge(oe,Me(Re(At=Ft))))},Ct.clipAngle=function(Ft){return arguments.length?(ge=+Ft?clipCircle(ae=Ft*radians,6*radians):(ae=null,clipAntimeridian),wt()):ae*degrees},Ct.clipExtent=function(Ft){return arguments.length?(Re=Ft==null?(he=Be=pe=be=null,identity$1):clipExtent(he=+Ft[0][0],Be=+Ft[0][1],pe=+Ft[1][0],be=+Ft[1][1]),wt()):he==null?null:[[he,Be],[pe,be]]},Ct.scale=function(Ft){return arguments.length?(f=+Ft,xt()):f},Ct.translate=function(Ft){return arguments.length?(_=+Ft[0],S=+Ft[1],xt()):[_,S]},Ct.center=function(Ft){return arguments.length?(M=Ft[0]%360*radians,P=Ft[1]%360*radians,xt()):[M*degrees,P*degrees]},Ct.rotate=function(Ft){return arguments.length?(H=Ft[0]%360*radians,J=Ft[1]%360*radians,K=Ft.length>2?Ft[2]%360*radians:0,xt()):[H*degrees,J*degrees,K*degrees]},Ct.precision=function(Ft){return arguments.length?(Me=resample(It,Fe=Ft*Ft),wt()):sqrt$1(Fe)},Ct.fitExtent=function(Ft,jt){return fitExtent(Ct,Ft,jt)},Ct.fitSize=function(Ft,jt){return fitSize(Ct,Ft,jt)};function xt(){se=compose(oe=rotateRadians(H,J,K),s);var Ft=s(M,P);return T=_-Ft[0]*f,F=S+Ft[1]*f,wt()}function wt(){return ve=At=null,Ct}return function(){return s=d.apply(this,arguments),Ct.invert=s.invert&&Rt,xt()}}function azimuthalRaw(d){return function(s,f){var _=cos$1(s),S=cos$1(f),T=d(_*S);return[T*S*sin$1(s),T*sin$1(f)]}}function azimuthalInvert(d){return function(s,f){var _=sqrt$1(s*s+f*f),S=d(_),T=sin$1(S),F=cos$1(S);return[atan2$1(s*T,_*F),asin$1(_&&f*T/_)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(d){return sqrt$1(2/(1+d))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(d){return 2*asin$1(d/2)});var azimuthalEquidistantRaw=azimuthalRaw(function(d){return(d=acos$1(d))&&d/sin$1(d)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(d){return d});function geoAzimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-.001)}function equirectangularRaw(d,s){return[d,s]}equirectangularRaw.invert=equirectangularRaw;function buffer(d,s,f){f=f||{};var _=f.units||"kilometers",S=f.steps||8;if(!d)throw new Error("geojson is required");if(typeof f!="object")throw new Error("options must be an object");if(typeof S!="number")throw new Error("steps must be an number");if(s===void 0)throw new Error("radius is required");if(S<=0)throw new Error("steps must be greater than 0");var T=[];switch(d.type){case"GeometryCollection":return geomEach$6(d,function(F){var M=bufferFeature(F,s,_,S);M&&T.push(M)}),featureCollection$4(T);case"FeatureCollection":return featureEach$5(d,function(F){var M=bufferFeature(F,s,_,S);M&&featureEach$5(M,function(P){P&&T.push(P)})}),featureCollection$4(T)}return bufferFeature(d,s,_,S)}function bufferFeature(d,s,f,_){var S=d.properties||{},T=d.type==="Feature"?d.geometry:d;if(T.type==="GeometryCollection"){var F=[];return geomEach$6(d,function(ge){var he=bufferFeature(ge,s,f,_);he&&F.push(he)}),featureCollection$4(F)}var M=defineProjection(T),P={type:T.type,coordinates:projectCoords(T.coordinates,M)},H=new GeoJSONReader,J=H.read(P),K=radiansToLength$4(lengthToRadians$4(s,f),"meters"),oe=BufferOp.bufferOp(J,K,_),se=new GeoJSONWriter;if(oe=se.write(oe),!coordsIsNaN(oe.coordinates)){var ae={type:oe.type,coordinates:unprojectCoords(oe.coordinates,M)};return feature$f(ae,S)}}function coordsIsNaN(d){return Array.isArray(d[0])?coordsIsNaN(d[0]):isNaN(d[0])}function projectCoords(d,s){return typeof d[0]!="object"?s(d):d.map(function(f){return projectCoords(f,s)})}function unprojectCoords(d,s){return typeof d[0]!="object"?s.invert(d):d.map(function(f){return unprojectCoords(f,s)})}function defineProjection(d){var s=center(d).geometry.coordinates,f=[-s[0],-s[1]];return geoAzimuthalEquidistant().rotate(f).scale(earthRadius$5)}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function __generator$1(d,s){var f={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},_,S,T,F;return F={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function M(H){return function(J){return P([H,J])}}function P(H){if(_)throw new TypeError("Generator is already executing.");for(;f;)try{if(_=1,S&&(T=H[0]&2?S.return:H[0]?S.throw||((T=S.return)&&T.call(S),0):S.next)&&!(T=T.call(S,H[1])).done)return T;switch(S=0,T&&(H=[H[0]&2,T.value]),H[0]){case 0:case 1:T=H;break;case 4:return f.label++,{value:H[1],done:!1};case 5:f.label++,S=H[1],H=[0];continue;case 7:H=f.ops.pop(),f.trys.pop();continue;default:if(T=f.trys,!(T=T.length>0&&T[T.length-1])&&(H[0]===6||H[0]===2)){f=0;continue}if(H[0]===3&&(!T||H[1]>T[0]&&H[1]<T[3])){f.label=H[1];break}if(H[0]===6&&f.label<T[1]){f.label=T[1],T=H;break}if(T&&f.label<T[2]){f.label=T[2],f.ops.push(H);break}T[2]&&f.ops.pop(),f.trys.pop();continue}H=s.call(d,f)}catch(J){H=[6,J],S=0}finally{_=T=0}if(H[0]&5)throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}}var Node=function(){function d(s,f){this.next=null,this.key=s,this.data=f,this.left=null,this.right=null}return d}();function DEFAULT_COMPARE(d,s){return d>s?1:d<s?-1:0}function splay(d,s,f){for(var _=new Node(null,null),S=_,T=_;;){var F=f(d,s.key);if(F<0){if(s.left===null)break;if(f(d,s.left.key)<0){var M=s.left;if(s.left=M.right,M.right=s,s=M,s.left===null)break}T.left=s,T=s,s=s.left}else if(F>0){if(s.right===null)break;if(f(d,s.right.key)>0){var M=s.right;if(s.right=M.left,M.left=s,s=M,s.right===null)break}S.right=s,S=s,s=s.right}else break}return S.right=s.left,T.left=s.right,s.left=_.right,s.right=_.left,s}function insert(d,s,f,_){var S=new Node(d,s);if(f===null)return S.left=S.right=null,S;f=splay(d,f,_);var T=_(d,f.key);return T<0?(S.left=f.left,S.right=f,f.left=null):T>=0&&(S.right=f.right,S.left=f,f.right=null),S}function split(d,s,f){var _=null,S=null;if(s){s=splay(d,s,f);var T=f(s.key,d);T===0?(_=s.left,S=s.right):T<0?(S=s.right,s.right=null,_=s):(_=s.left,s.left=null,S=s)}return{left:_,right:S}}function merge$1(d,s,f){return s===null?d:(d===null||(s=splay(d.key,s,f),s.left=d),s)}function printRow(d,s,f,_,S){if(d){_(""+s+(f?" ":" ")+S(d)+`
`);var T=s+(f?"    ":"   ");d.left&&printRow(d.left,T,!1,_,S),d.right&&printRow(d.right,T,!0,_,S)}}var Tree=function(){function d(s){s===void 0&&(s=DEFAULT_COMPARE),this._root=null,this._size=0,this._comparator=s}return d.prototype.insert=function(s,f){return this._size++,this._root=insert(s,f,this._root,this._comparator)},d.prototype.add=function(s,f){var _=new Node(s,f);this._root===null&&(_.left=_.right=null,this._size++,this._root=_);var S=this._comparator,T=splay(s,this._root,S),F=S(s,T.key);return F===0?this._root=T:(F<0?(_.left=T.left,_.right=T,T.left=null):F>0&&(_.right=T.right,_.left=T,T.right=null),this._size++,this._root=_),this._root},d.prototype.remove=function(s){this._root=this._remove(s,this._root,this._comparator)},d.prototype._remove=function(s,f,_){var S;if(f===null)return null;f=splay(s,f,_);var T=_(s,f.key);return T===0?(f.left===null?S=f.right:(S=splay(s,f.left,_),S.right=f.right),this._size--,S):f},d.prototype.pop=function(){var s=this._root;if(s){for(;s.left;)s=s.left;return this._root=splay(s.key,this._root,this._comparator),this._root=this._remove(s.key,this._root,this._comparator),{key:s.key,data:s.data}}return null},d.prototype.findStatic=function(s){for(var f=this._root,_=this._comparator;f;){var S=_(s,f.key);if(S===0)return f;S<0?f=f.left:f=f.right}return null},d.prototype.find=function(s){return this._root&&(this._root=splay(s,this._root,this._comparator),this._comparator(s,this._root.key)!==0)?null:this._root},d.prototype.contains=function(s){for(var f=this._root,_=this._comparator;f;){var S=_(s,f.key);if(S===0)return!0;S<0?f=f.left:f=f.right}return!1},d.prototype.forEach=function(s,f){for(var _=this._root,S=[],T=!1;!T;)_!==null?(S.push(_),_=_.left):S.length!==0?(_=S.pop(),s.call(f,_),_=_.right):T=!0;return this},d.prototype.range=function(s,f,_,S){for(var T=[],F=this._comparator,M=this._root,P;T.length!==0||M;)if(M)T.push(M),M=M.left;else{if(M=T.pop(),P=F(M.key,f),P>0)break;if(F(M.key,s)>=0&&_.call(S,M))return this;M=M.right}return this},d.prototype.keys=function(){var s=[];return this.forEach(function(f){var _=f.key;return s.push(_)}),s},d.prototype.values=function(){var s=[];return this.forEach(function(f){var _=f.data;return s.push(_)}),s},d.prototype.min=function(){return this._root?this.minNode(this._root).key:null},d.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},d.prototype.minNode=function(s){if(s===void 0&&(s=this._root),s)for(;s.left;)s=s.left;return s},d.prototype.maxNode=function(s){if(s===void 0&&(s=this._root),s)for(;s.right;)s=s.right;return s},d.prototype.at=function(s){for(var f=this._root,_=!1,S=0,T=[];!_;)if(f)T.push(f),f=f.left;else if(T.length>0){if(f=T.pop(),S===s)return f;S++,f=f.right}else _=!0;return null},d.prototype.next=function(s){var f=this._root,_=null;if(s.right){for(_=s.right;_.left;)_=_.left;return _}for(var S=this._comparator;f;){var T=S(s.key,f.key);if(T===0)break;T<0?(_=f,f=f.left):f=f.right}return _},d.prototype.prev=function(s){var f=this._root,_=null;if(s.left!==null){for(_=s.left;_.right;)_=_.right;return _}for(var S=this._comparator;f;){var T=S(s.key,f.key);if(T===0)break;T<0?f=f.left:(_=f,f=f.right)}return _},d.prototype.clear=function(){return this._root=null,this._size=0,this},d.prototype.toList=function(){return toList(this._root)},d.prototype.load=function(s,f,_){f===void 0&&(f=[]),_===void 0&&(_=!1);var S=s.length,T=this._comparator;if(_&&sort(s,f,0,S-1,T),this._root===null)this._root=loadRecursive(s,f,0,S),this._size=S;else{var F=mergeLists(this.toList(),createList(s,f),T);S=this._size+S,this._root=sortedListToBST({head:F},0,S)}return this},d.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(d.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),d.prototype.toString=function(s){s===void 0&&(s=function(_){return String(_.key)});var f=[];return printRow(this._root,"",!0,function(_){return f.push(_)},s),f.join("")},d.prototype.update=function(s,f,_){var S=this._comparator,T=split(s,this._root,S),F=T.left,M=T.right;S(s,f)<0?M=insert(f,_,M,S):F=insert(f,_,F,S),this._root=merge$1(F,M,S)},d.prototype.split=function(s){return split(s,this._root,this._comparator)},d.prototype[Symbol.iterator]=function(){var s,f,_;return __generator$1(this,function(S){switch(S.label){case 0:s=this._root,f=[],_=!1,S.label=1;case 1:return _?[3,6]:s===null?[3,2]:(f.push(s),s=s.left,[3,5]);case 2:return f.length===0?[3,4]:(s=f.pop(),[4,s]);case 3:return S.sent(),s=s.right,[3,5];case 4:_=!0,S.label=5;case 5:return[3,1];case 6:return[2]}})},d}();function loadRecursive(d,s,f,_){var S=_-f;if(S>0){var T=f+Math.floor(S/2),F=d[T],M=s[T],P=new Node(F,M);return P.left=loadRecursive(d,s,f,T),P.right=loadRecursive(d,s,T+1,_),P}return null}function createList(d,s){for(var f=new Node(null,null),_=f,S=0;S<d.length;S++)_=_.next=new Node(d[S],s[S]);return _.next=null,f.next}function toList(d){for(var s=d,f=[],_=!1,S=new Node(null,null),T=S;!_;)s?(f.push(s),s=s.left):f.length>0?(s=T=T.next=f.pop(),s=s.right):_=!0;return T.next=null,S.next}function sortedListToBST(d,s,f){var _=f-s;if(_>0){var S=s+Math.floor(_/2),T=sortedListToBST(d,s,S),F=d.head;return F.left=T,d.head=d.head.next,F.right=sortedListToBST(d,S+1,f),F}return null}function mergeLists(d,s,f){for(var _=new Node(null,null),S=_,T=d,F=s;T!==null&&F!==null;)f(T.key,F.key)<0?(S.next=T,T=T.next):(S.next=F,F=F.next),S=S.next;return T!==null?S.next=T:F!==null&&(S.next=F),_.next}function sort(d,s,f,_,S){if(!(f>=_)){for(var T=d[f+_>>1],F=f-1,M=_+1;;){do F++;while(S(d[F],T)<0);do M--;while(S(d[M],T)>0);if(F>=M)break;var P=d[F];d[F]=d[M],d[M]=P,P=s[F],s[F]=s[M],s[M]=P}sort(d,s,f,M,S),sort(d,s,M+1,_,S)}}const epsilon$4=11102230246251565e-32,splitter=134217729,resulterrbound=(3+8*epsilon$4)*epsilon$4;function sum$1(d,s,f,_,S){let T,F,M,P,H=s[0],J=_[0],K=0,oe=0;J>H==J>-H?(T=H,H=s[++K]):(T=J,J=_[++oe]);let se=0;if(K<d&&oe<f)for(J>H==J>-H?(F=H+T,M=T-(F-H),H=s[++K]):(F=J+T,M=T-(F-J),J=_[++oe]),T=F,M!==0&&(S[se++]=M);K<d&&oe<f;)J>H==J>-H?(F=T+H,P=F-T,M=T-(F-P)+(H-P),H=s[++K]):(F=T+J,P=F-T,M=T-(F-P)+(J-P),J=_[++oe]),T=F,M!==0&&(S[se++]=M);for(;K<d;)F=T+H,P=F-T,M=T-(F-P)+(H-P),H=s[++K],T=F,M!==0&&(S[se++]=M);for(;oe<f;)F=T+J,P=F-T,M=T-(F-P)+(J-P),J=_[++oe],T=F,M!==0&&(S[se++]=M);return(T!==0||se===0)&&(S[se++]=T),se}function estimate(d,s){let f=s[0];for(let _=1;_<d;_++)f+=s[_];return f}function vec(d){return new Float64Array(d)}const ccwerrboundA=(3+16*epsilon$4)*epsilon$4,ccwerrboundB=(2+12*epsilon$4)*epsilon$4,ccwerrboundC=(9+64*epsilon$4)*epsilon$4*epsilon$4,B=vec(4),C1=vec(8),C2=vec(12),D$1=vec(16),u=vec(4);function orient2dadapt(d,s,f,_,S,T,F){let M,P,H,J,K,oe,se,ae,ge,he,Be,pe,be,Re,Fe,Me,ve,At;const Ct=d-S,Rt=f-S,It=s-T,xt=_-T;Re=Ct*xt,oe=splitter*Ct,se=oe-(oe-Ct),ae=Ct-se,oe=splitter*xt,ge=oe-(oe-xt),he=xt-ge,Fe=ae*he-(Re-se*ge-ae*ge-se*he),Me=It*Rt,oe=splitter*It,se=oe-(oe-It),ae=It-se,oe=splitter*Rt,ge=oe-(oe-Rt),he=Rt-ge,ve=ae*he-(Me-se*ge-ae*ge-se*he),Be=Fe-ve,K=Fe-Be,B[0]=Fe-(Be+K)+(K-ve),pe=Re+Be,K=pe-Re,be=Re-(pe-K)+(Be-K),Be=be-Me,K=be-Be,B[1]=be-(Be+K)+(K-Me),At=pe+Be,K=At-pe,B[2]=pe-(At-K)+(Be-K),B[3]=At;let wt=estimate(4,B),Ft=ccwerrboundB*F;if(wt>=Ft||-wt>=Ft||(K=d-Ct,M=d-(Ct+K)+(K-S),K=f-Rt,H=f-(Rt+K)+(K-S),K=s-It,P=s-(It+K)+(K-T),K=_-xt,J=_-(xt+K)+(K-T),M===0&&P===0&&H===0&&J===0)||(Ft=ccwerrboundC*F+resulterrbound*Math.abs(wt),wt+=Ct*J+xt*M-(It*H+Rt*P),wt>=Ft||-wt>=Ft))return wt;Re=M*xt,oe=splitter*M,se=oe-(oe-M),ae=M-se,oe=splitter*xt,ge=oe-(oe-xt),he=xt-ge,Fe=ae*he-(Re-se*ge-ae*ge-se*he),Me=P*Rt,oe=splitter*P,se=oe-(oe-P),ae=P-se,oe=splitter*Rt,ge=oe-(oe-Rt),he=Rt-ge,ve=ae*he-(Me-se*ge-ae*ge-se*he),Be=Fe-ve,K=Fe-Be,u[0]=Fe-(Be+K)+(K-ve),pe=Re+Be,K=pe-Re,be=Re-(pe-K)+(Be-K),Be=be-Me,K=be-Be,u[1]=be-(Be+K)+(K-Me),At=pe+Be,K=At-pe,u[2]=pe-(At-K)+(Be-K),u[3]=At;const jt=sum$1(4,B,4,u,C1);Re=Ct*J,oe=splitter*Ct,se=oe-(oe-Ct),ae=Ct-se,oe=splitter*J,ge=oe-(oe-J),he=J-ge,Fe=ae*he-(Re-se*ge-ae*ge-se*he),Me=It*H,oe=splitter*It,se=oe-(oe-It),ae=It-se,oe=splitter*H,ge=oe-(oe-H),he=H-ge,ve=ae*he-(Me-se*ge-ae*ge-se*he),Be=Fe-ve,K=Fe-Be,u[0]=Fe-(Be+K)+(K-ve),pe=Re+Be,K=pe-Re,be=Re-(pe-K)+(Be-K),Be=be-Me,K=be-Be,u[1]=be-(Be+K)+(K-Me),At=pe+Be,K=At-pe,u[2]=pe-(At-K)+(Be-K),u[3]=At;const ta=sum$1(jt,C1,4,u,C2);Re=M*J,oe=splitter*M,se=oe-(oe-M),ae=M-se,oe=splitter*J,ge=oe-(oe-J),he=J-ge,Fe=ae*he-(Re-se*ge-ae*ge-se*he),Me=P*H,oe=splitter*P,se=oe-(oe-P),ae=P-se,oe=splitter*H,ge=oe-(oe-H),he=H-ge,ve=ae*he-(Me-se*ge-ae*ge-se*he),Be=Fe-ve,K=Fe-Be,u[0]=Fe-(Be+K)+(K-ve),pe=Re+Be,K=pe-Re,be=Re-(pe-K)+(Be-K),Be=be-Me,K=be-Be,u[1]=be-(Be+K)+(K-Me),At=pe+Be,K=At-pe,u[2]=pe-(At-K)+(Be-K),u[3]=At;const Qn=sum$1(ta,C2,4,u,D$1);return D$1[Qn-1]}function orient2d(d,s,f,_,S,T){const F=(s-T)*(f-S),M=(d-S)*(_-T),P=F-M,H=Math.abs(F+M);return Math.abs(P)>=ccwerrboundA*H?P:-orient2dadapt(d,s,f,_,S,T,H)}var define_process_env_default={};const isInBbox=(d,s)=>d.ll.x<=s.x&&s.x<=d.ur.x&&d.ll.y<=s.y&&s.y<=d.ur.y,getBboxOverlap=(d,s)=>{if(s.ur.x<d.ll.x||d.ur.x<s.ll.x||s.ur.y<d.ll.y||d.ur.y<s.ll.y)return null;const f=d.ll.x<s.ll.x?s.ll.x:d.ll.x,_=d.ur.x<s.ur.x?d.ur.x:s.ur.x,S=d.ll.y<s.ll.y?s.ll.y:d.ll.y,T=d.ur.y<s.ur.y?d.ur.y:s.ur.y;return{ll:{x:f,y:S},ur:{x:_,y:T}}};let epsilon$3=Number.EPSILON;epsilon$3===void 0&&(epsilon$3=Math.pow(2,-52));const EPSILON_SQ=epsilon$3*epsilon$3,cmp=(d,s)=>{if(-epsilon$3<d&&d<epsilon$3&&-epsilon$3<s&&s<epsilon$3)return 0;const f=d-s;return f*f<EPSILON_SQ*d*s?0:d<s?-1:1};class PtRounder{constructor(){this.reset()}reset(){this.xRounder=new CoordRounder,this.yRounder=new CoordRounder}round(s,f){return{x:this.xRounder.round(s),y:this.yRounder.round(f)}}}class CoordRounder{constructor(){this.tree=new Tree,this.round(0)}round(s){const f=this.tree.add(s),_=this.tree.prev(f);if(_!==null&&cmp(f.key,_.key)===0)return this.tree.remove(s),_.key;const S=this.tree.next(f);return S!==null&&cmp(f.key,S.key)===0?(this.tree.remove(s),S.key):s}}const rounder=new PtRounder,crossProduct=(d,s)=>d.x*s.y-d.y*s.x,dotProduct=(d,s)=>d.x*s.x+d.y*s.y,compareVectorAngles=(d,s,f)=>{const _=orient2d(d.x,d.y,s.x,s.y,f.x,f.y);return _>0?-1:_<0?1:0},length=d=>Math.sqrt(dotProduct(d,d)),sineOfAngle=(d,s,f)=>{const _={x:s.x-d.x,y:s.y-d.y},S={x:f.x-d.x,y:f.y-d.y};return crossProduct(S,_)/length(S)/length(_)},cosineOfAngle=(d,s,f)=>{const _={x:s.x-d.x,y:s.y-d.y},S={x:f.x-d.x,y:f.y-d.y};return dotProduct(S,_)/length(S)/length(_)},horizontalIntersection=(d,s,f)=>s.y===0?null:{x:d.x+s.x/s.y*(f-d.y),y:f},verticalIntersection=(d,s,f)=>s.x===0?null:{x:f,y:d.y+s.y/s.x*(f-d.x)},intersection$1=(d,s,f,_)=>{if(s.x===0)return verticalIntersection(f,_,d.x);if(_.x===0)return verticalIntersection(d,s,f.x);if(s.y===0)return horizontalIntersection(f,_,d.y);if(_.y===0)return horizontalIntersection(d,s,f.y);const S=crossProduct(s,_);if(S==0)return null;const T={x:f.x-d.x,y:f.y-d.y},F=crossProduct(T,s)/S,M=crossProduct(T,_)/S,P=d.x+M*s.x,H=f.x+F*_.x,J=d.y+M*s.y,K=f.y+F*_.y,oe=(P+H)/2,se=(J+K)/2;return{x:oe,y:se}};class SweepEvent{static compare(s,f){const _=SweepEvent.comparePoints(s.point,f.point);return _!==0?_:(s.point!==f.point&&s.link(f),s.isLeft!==f.isLeft?s.isLeft?1:-1:Segment.compare(s.segment,f.segment))}static comparePoints(s,f){return s.x<f.x?-1:s.x>f.x?1:s.y<f.y?-1:s.y>f.y?1:0}constructor(s,f){s.events===void 0?s.events=[this]:s.events.push(this),this.point=s,this.isLeft=f}link(s){if(s.point===this.point)throw new Error("Tried to link already linked events");const f=s.point.events;for(let _=0,S=f.length;_<S;_++){const T=f[_];this.point.events.push(T),T.point=this.point}this.checkForConsuming()}checkForConsuming(){const s=this.point.events.length;for(let f=0;f<s;f++){const _=this.point.events[f];if(_.segment.consumedBy===void 0)for(let S=f+1;S<s;S++){const T=this.point.events[S];T.consumedBy===void 0&&_.otherSE.point.events===T.otherSE.point.events&&_.segment.consume(T.segment)}}}getAvailableLinkedEvents(){const s=[];for(let f=0,_=this.point.events.length;f<_;f++){const S=this.point.events[f];S!==this&&!S.segment.ringOut&&S.segment.isInResult()&&s.push(S)}return s}getLeftmostComparator(s){const f=new Map,_=S=>{const T=S.otherSE;f.set(S,{sine:sineOfAngle(this.point,s.point,T.point),cosine:cosineOfAngle(this.point,s.point,T.point)})};return(S,T)=>{f.has(S)||_(S),f.has(T)||_(T);const{sine:F,cosine:M}=f.get(S),{sine:P,cosine:H}=f.get(T);return F>=0&&P>=0?M<H?1:M>H?-1:0:F<0&&P<0?M<H?-1:M>H?1:0:P<F?-1:P>F?1:0}}}let segmentId=0;class Segment{static compare(s,f){const _=s.leftSE.point.x,S=f.leftSE.point.x,T=s.rightSE.point.x,F=f.rightSE.point.x;if(F<_)return 1;if(T<S)return-1;const M=s.leftSE.point.y,P=f.leftSE.point.y,H=s.rightSE.point.y,J=f.rightSE.point.y;if(_<S){if(P<M&&P<H)return 1;if(P>M&&P>H)return-1;const K=s.comparePoint(f.leftSE.point);if(K<0)return 1;if(K>0)return-1;const oe=f.comparePoint(s.rightSE.point);return oe!==0?oe:-1}if(_>S){if(M<P&&M<J)return-1;if(M>P&&M>J)return 1;const K=f.comparePoint(s.leftSE.point);if(K!==0)return K;const oe=s.comparePoint(f.rightSE.point);return oe<0?1:oe>0?-1:1}if(M<P)return-1;if(M>P)return 1;if(T<F){const K=f.comparePoint(s.rightSE.point);if(K!==0)return K}if(T>F){const K=s.comparePoint(f.rightSE.point);if(K<0)return 1;if(K>0)return-1}if(T!==F){const K=H-M,oe=T-_,se=J-P,ae=F-S;if(K>oe&&se<ae)return 1;if(K<oe&&se>ae)return-1}return T>F?1:T<F||H<J?-1:H>J?1:s.id<f.id?-1:s.id>f.id?1:0}constructor(s,f,_,S){this.id=++segmentId,this.leftSE=s,s.segment=this,s.otherSE=f,this.rightSE=f,f.segment=this,f.otherSE=s,this.rings=_,this.windings=S}static fromRing(s,f,_){let S,T,F;const M=SweepEvent.comparePoints(s,f);if(M<0)S=s,T=f,F=1;else if(M>0)S=f,T=s,F=-1;else throw new Error(`Tried to create degenerate segment at [${s.x}, ${s.y}]`);const P=new SweepEvent(S,!0),H=new SweepEvent(T,!1);return new Segment(P,H,[_],[F])}replaceRightSE(s){this.rightSE=s,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const s=this.leftSE.point.y,f=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:s<f?s:f},ur:{x:this.rightSE.point.x,y:s>f?s:f}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(s){return s.x===this.leftSE.point.x&&s.y===this.leftSE.point.y||s.x===this.rightSE.point.x&&s.y===this.rightSE.point.y}comparePoint(s){if(this.isAnEndpoint(s))return 0;const f=this.leftSE.point,_=this.rightSE.point,S=this.vector();if(f.x===_.x)return s.x===f.x?0:s.x<f.x?1:-1;const T=(s.y-f.y)/S.y,F=f.x+T*S.x;if(s.x===F)return 0;const M=(s.x-f.x)/S.x,P=f.y+M*S.y;return s.y===P?0:s.y<P?-1:1}getIntersection(s){const f=this.bbox(),_=s.bbox(),S=getBboxOverlap(f,_);if(S===null)return null;const T=this.leftSE.point,F=this.rightSE.point,M=s.leftSE.point,P=s.rightSE.point,H=isInBbox(f,M)&&this.comparePoint(M)===0,J=isInBbox(_,T)&&s.comparePoint(T)===0,K=isInBbox(f,P)&&this.comparePoint(P)===0,oe=isInBbox(_,F)&&s.comparePoint(F)===0;if(J&&H)return oe&&!K?F:!oe&&K?P:null;if(J)return K&&T.x===P.x&&T.y===P.y?null:T;if(H)return oe&&F.x===M.x&&F.y===M.y?null:M;if(oe&&K)return null;if(oe)return F;if(K)return P;const se=intersection$1(T,this.vector(),M,s.vector());return se===null||!isInBbox(S,se)?null:rounder.round(se.x,se.y)}split(s){const f=[],_=s.events!==void 0,S=new SweepEvent(s,!0),T=new SweepEvent(s,!1),F=this.rightSE;this.replaceRightSE(T),f.push(T),f.push(S);const M=new Segment(S,F,this.rings.slice(),this.windings.slice());return SweepEvent.comparePoints(M.leftSE.point,M.rightSE.point)>0&&M.swapEvents(),SweepEvent.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),_&&(S.checkForConsuming(),T.checkForConsuming()),f}swapEvents(){const s=this.rightSE;this.rightSE=this.leftSE,this.leftSE=s,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let f=0,_=this.windings.length;f<_;f++)this.windings[f]*=-1}consume(s){let f=this,_=s;for(;f.consumedBy;)f=f.consumedBy;for(;_.consumedBy;)_=_.consumedBy;const S=Segment.compare(f,_);if(S!==0){if(S>0){const T=f;f=_,_=T}if(f.prev===_){const T=f;f=_,_=T}for(let T=0,F=_.rings.length;T<F;T++){const M=_.rings[T],P=_.windings[T],H=f.rings.indexOf(M);H===-1?(f.rings.push(M),f.windings.push(P)):f.windings[H]+=P}_.rings=null,_.windings=null,_.consumedBy=f,_.leftSE.consumedBy=f.leftSE,_.rightSE.consumedBy=f.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const s=this.prev.consumedBy||this.prev;this._beforeState=s.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const s=this.beforeState();this._afterState={rings:s.rings.slice(0),windings:s.windings.slice(0),multiPolys:[]};const f=this._afterState.rings,_=this._afterState.windings,S=this._afterState.multiPolys;for(let M=0,P=this.rings.length;M<P;M++){const H=this.rings[M],J=this.windings[M],K=f.indexOf(H);K===-1?(f.push(H),_.push(J)):_[K]+=J}const T=[],F=[];for(let M=0,P=f.length;M<P;M++){if(_[M]===0)continue;const H=f[M],J=H.poly;if(F.indexOf(J)===-1)if(H.isExterior)T.push(J);else{F.indexOf(J)===-1&&F.push(J);const K=T.indexOf(H.poly);K!==-1&&T.splice(K,1)}}for(let M=0,P=T.length;M<P;M++){const H=T[M].multiPoly;S.indexOf(H)===-1&&S.push(H)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const s=this.beforeState().multiPolys,f=this.afterState().multiPolys;switch(operation.type){case"union":{const _=s.length===0,S=f.length===0;this._isInResult=_!==S;break}case"intersection":{let _,S;s.length<f.length?(_=s.length,S=f.length):(_=f.length,S=s.length),this._isInResult=S===operation.numMultiPolys&&_<S;break}case"xor":{const _=Math.abs(s.length-f.length);this._isInResult=_%2===1;break}case"difference":{const _=S=>S.length===1&&S[0].isSubject;this._isInResult=_(s)!==_(f);break}default:throw new Error(`Unrecognized operation type found ${operation.type}`)}return this._isInResult}}class RingIn{constructor(s,f,_){if(!Array.isArray(s)||s.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=f,this.isExterior=_,this.segments=[],typeof s[0][0]!="number"||typeof s[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const S=rounder.round(s[0][0],s[0][1]);this.bbox={ll:{x:S.x,y:S.y},ur:{x:S.x,y:S.y}};let T=S;for(let F=1,M=s.length;F<M;F++){if(typeof s[F][0]!="number"||typeof s[F][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let P=rounder.round(s[F][0],s[F][1]);P.x===T.x&&P.y===T.y||(this.segments.push(Segment.fromRing(T,P,this)),P.x<this.bbox.ll.x&&(this.bbox.ll.x=P.x),P.y<this.bbox.ll.y&&(this.bbox.ll.y=P.y),P.x>this.bbox.ur.x&&(this.bbox.ur.x=P.x),P.y>this.bbox.ur.y&&(this.bbox.ur.y=P.y),T=P)}(S.x!==T.x||S.y!==T.y)&&this.segments.push(Segment.fromRing(T,S,this))}getSweepEvents(){const s=[];for(let f=0,_=this.segments.length;f<_;f++){const S=this.segments[f];s.push(S.leftSE),s.push(S.rightSE)}return s}}class PolyIn{constructor(s,f){if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new RingIn(s[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,S=s.length;_<S;_++){const T=new RingIn(s[_],this,!1);T.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=T.bbox.ll.x),T.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=T.bbox.ll.y),T.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=T.bbox.ur.x),T.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=T.bbox.ur.y),this.interiorRings.push(T)}this.multiPoly=f}getSweepEvents(){const s=this.exteriorRing.getSweepEvents();for(let f=0,_=this.interiorRings.length;f<_;f++){const S=this.interiorRings[f].getSweepEvents();for(let T=0,F=S.length;T<F;T++)s.push(S[T])}return s}}class MultiPolyIn{constructor(s,f){if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof s[0][0][0]=="number"&&(s=[s])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let _=0,S=s.length;_<S;_++){const T=new PolyIn(s[_],this);T.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=T.bbox.ll.x),T.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=T.bbox.ll.y),T.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=T.bbox.ur.x),T.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=T.bbox.ur.y),this.polys.push(T)}this.isSubject=f}getSweepEvents(){const s=[];for(let f=0,_=this.polys.length;f<_;f++){const S=this.polys[f].getSweepEvents();for(let T=0,F=S.length;T<F;T++)s.push(S[T])}return s}}class RingOut{static factory(s){const f=[];for(let _=0,S=s.length;_<S;_++){const T=s[_];if(!T.isInResult()||T.ringOut)continue;let F=null,M=T.leftSE,P=T.rightSE;const H=[M],J=M.point,K=[];for(;F=M,M=P,H.push(M),M.point!==J;)for(;;){const oe=M.getAvailableLinkedEvents();if(oe.length===0){const ge=H[0].point,he=H[H.length-1].point;throw new Error(`Unable to complete output ring starting at [${ge.x}, ${ge.y}]. Last matching segment found ends at [${he.x}, ${he.y}].`)}if(oe.length===1){P=oe[0].otherSE;break}let se=null;for(let ge=0,he=K.length;ge<he;ge++)if(K[ge].point===M.point){se=ge;break}if(se!==null){const ge=K.splice(se)[0],he=H.splice(ge.index);he.unshift(he[0].otherSE),f.push(new RingOut(he.reverse()));continue}K.push({index:H.length,point:M.point});const ae=M.getLeftmostComparator(F);P=oe.sort(ae)[0].otherSE;break}f.push(new RingOut(H))}return f}constructor(s){this.events=s;for(let f=0,_=s.length;f<_;f++)s[f].segment.ringOut=this;this.poly=null}getGeom(){let s=this.events[0].point;const f=[s];for(let H=1,J=this.events.length-1;H<J;H++){const K=this.events[H].point,oe=this.events[H+1].point;compareVectorAngles(K,s,oe)!==0&&(f.push(K),s=K)}if(f.length===1)return null;const _=f[0],S=f[1];compareVectorAngles(_,s,S)===0&&f.shift(),f.push(f[0]);const T=this.isExteriorRing()?1:-1,F=this.isExteriorRing()?0:f.length-1,M=this.isExteriorRing()?f.length:-1,P=[];for(let H=F;H!=M;H+=T)P.push([f[H].x,f[H].y]);return P}isExteriorRing(){if(this._isExteriorRing===void 0){const s=this.enclosingRing();this._isExteriorRing=s?!s.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let s=this.events[0];for(let S=1,T=this.events.length;S<T;S++){const F=this.events[S];SweepEvent.compare(s,F)>0&&(s=F)}let f=s.segment.prevInResult(),_=f?f.prevInResult():null;for(;;){if(!f)return null;if(!_)return f.ringOut;if(_.ringOut!==f.ringOut)return _.ringOut.enclosingRing()!==f.ringOut?f.ringOut:f.ringOut.enclosingRing();f=_.prevInResult(),_=f?f.prevInResult():null}}}class PolyOut{constructor(s){this.exteriorRing=s,s.poly=this,this.interiorRings=[]}addInterior(s){this.interiorRings.push(s),s.poly=this}getGeom(){const s=[this.exteriorRing.getGeom()];if(s[0]===null)return null;for(let f=0,_=this.interiorRings.length;f<_;f++){const S=this.interiorRings[f].getGeom();S!==null&&s.push(S)}return s}}class MultiPolyOut{constructor(s){this.rings=s,this.polys=this._composePolys(s)}getGeom(){const s=[];for(let f=0,_=this.polys.length;f<_;f++){const S=this.polys[f].getGeom();S!==null&&s.push(S)}return s}_composePolys(s){const f=[];for(let _=0,S=s.length;_<S;_++){const T=s[_];if(!T.poly)if(T.isExteriorRing())f.push(new PolyOut(T));else{const F=T.enclosingRing();F.poly||f.push(new PolyOut(F)),F.poly.addInterior(T)}}return f}}class SweepLine{constructor(s){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Segment.compare;this.queue=s,this.tree=new Tree(f),this.segments=[]}process(s){const f=s.segment,_=[];if(s.consumedBy)return s.isLeft?this.queue.remove(s.otherSE):this.tree.remove(f),_;const S=s.isLeft?this.tree.add(f):this.tree.find(f);if(!S)throw new Error(`Unable to find segment #${f.id} [${f.leftSE.point.x}, ${f.leftSE.point.y}] -> [${f.rightSE.point.x}, ${f.rightSE.point.y}] in SweepLine tree.`);let T=S,F=S,M,P;for(;M===void 0;)T=this.tree.prev(T),T===null?M=null:T.key.consumedBy===void 0&&(M=T.key);for(;P===void 0;)F=this.tree.next(F),F===null?P=null:F.key.consumedBy===void 0&&(P=F.key);if(s.isLeft){let H=null;if(M){const K=M.getIntersection(f);if(K!==null&&(f.isAnEndpoint(K)||(H=K),!M.isAnEndpoint(K))){const oe=this._splitSafely(M,K);for(let se=0,ae=oe.length;se<ae;se++)_.push(oe[se])}}let J=null;if(P){const K=P.getIntersection(f);if(K!==null&&(f.isAnEndpoint(K)||(J=K),!P.isAnEndpoint(K))){const oe=this._splitSafely(P,K);for(let se=0,ae=oe.length;se<ae;se++)_.push(oe[se])}}if(H!==null||J!==null){let K=null;H===null?K=J:J===null?K=H:K=SweepEvent.comparePoints(H,J)<=0?H:J,this.queue.remove(f.rightSE),_.push(f.rightSE);const oe=f.split(K);for(let se=0,ae=oe.length;se<ae;se++)_.push(oe[se])}_.length>0?(this.tree.remove(f),_.push(s)):(this.segments.push(f),f.prev=M)}else{if(M&&P){const H=M.getIntersection(P);if(H!==null){if(!M.isAnEndpoint(H)){const J=this._splitSafely(M,H);for(let K=0,oe=J.length;K<oe;K++)_.push(J[K])}if(!P.isAnEndpoint(H)){const J=this._splitSafely(P,H);for(let K=0,oe=J.length;K<oe;K++)_.push(J[K])}}}this.tree.remove(f)}return _}_splitSafely(s,f){this.tree.remove(s);const _=s.rightSE;this.queue.remove(_);const S=s.split(f);return S.push(_),s.consumedBy===void 0&&this.tree.add(s),S}}const POLYGON_CLIPPING_MAX_QUEUE_SIZE=typeof process<"u"&&define_process_env_default.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS=typeof process<"u"&&define_process_env_default.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Operation{run(s,f,_){operation.type=s,rounder.reset();const S=[new MultiPolyIn(f,!0)];for(let K=0,oe=_.length;K<oe;K++)S.push(new MultiPolyIn(_[K],!1));if(operation.numMultiPolys=S.length,operation.type==="difference"){const K=S[0];let oe=1;for(;oe<S.length;)getBboxOverlap(S[oe].bbox,K.bbox)!==null?oe++:S.splice(oe,1)}if(operation.type==="intersection")for(let K=0,oe=S.length;K<oe;K++){const se=S[K];for(let ae=K+1,ge=S.length;ae<ge;ae++)if(getBboxOverlap(se.bbox,S[ae].bbox)===null)return[]}const T=new Tree(SweepEvent.compare);for(let K=0,oe=S.length;K<oe;K++){const se=S[K].getSweepEvents();for(let ae=0,ge=se.length;ae<ge;ae++)if(T.insert(se[ae]),T.size>POLYGON_CLIPPING_MAX_QUEUE_SIZE)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const F=new SweepLine(T);let M=T.size,P=T.pop();for(;P;){const K=P.key;if(T.size===M){const se=K.segment;throw new Error(`Unable to pop() ${K.isLeft?"left":"right"} SweepEvent [${K.point.x}, ${K.point.y}] from segment #${se.id} [${se.leftSE.point.x}, ${se.leftSE.point.y}] -> [${se.rightSE.point.x}, ${se.rightSE.point.y}] from queue.`)}if(T.size>POLYGON_CLIPPING_MAX_QUEUE_SIZE)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(F.segments.length>POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const oe=F.process(K);for(let se=0,ae=oe.length;se<ae;se++){const ge=oe[se];ge.consumedBy===void 0&&T.insert(ge)}M=T.size,P=T.pop()}rounder.reset();const H=RingOut.factory(F.segments);return new MultiPolyOut(H).getGeom()}}const operation=new Operation,union$1=function(d){for(var s=arguments.length,f=new Array(s>1?s-1:0),_=1;_<s;_++)f[_-1]=arguments[_];return operation.run("union",d,f)},intersection=function(d){for(var s=arguments.length,f=new Array(s>1?s-1:0),_=1;_<s;_++)f[_-1]=arguments[_];return operation.run("intersection",d,f)},xor=function(d){for(var s=arguments.length,f=new Array(s>1?s-1:0),_=1;_<s;_++)f[_-1]=arguments[_];return operation.run("xor",d,f)},difference$1=function(d){for(var s=arguments.length,f=new Array(s>1?s-1:0),_=1;_<s;_++)f[_-1]=arguments[_];return operation.run("difference",d,f)};var index$1={union:union$1,intersection,xor,difference:difference$1};function feature$e(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function polygon$4(d,s,f){f===void 0&&(f={});for(var _=0,S=d;_<S.length;_++){var T=S[_];if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<T[T.length-1].length;F++)if(T[T.length-1][F]!==T[0][F])throw new Error("First and last Position are not equivalent.")}var M={type:"Polygon",coordinates:d};return feature$e(M,s,f)}function multiPolygon$2(d,s,f){f===void 0&&(f={});var _={type:"MultiPolygon",coordinates:d};return feature$e(_,s,f)}function getGeom$6(d){return d.type==="Feature"?d.geometry:d}function difference(d,s){var f=getGeom$6(d),_=getGeom$6(s),S=d.properties||{},T=index$1.difference(f.coordinates,_.coordinates);return T.length===0?null:T.length===1?polygon$4(T[0],S):multiPolygon$2(T,S)}var earthRadius$4=63710088e-1,factors$4={centimeters:earthRadius$4*100,centimetres:earthRadius$4*100,degrees:earthRadius$4/111325,feet:earthRadius$4*3.28084,inches:earthRadius$4*39.37,kilometers:earthRadius$4/1e3,kilometres:earthRadius$4/1e3,meters:earthRadius$4,metres:earthRadius$4,miles:earthRadius$4/1609.344,millimeters:earthRadius$4*1e3,millimetres:earthRadius$4*1e3,nauticalmiles:earthRadius$4/1852,radians:1,yards:earthRadius$4*1.0936};function radiansToLength$3(d,s){s===void 0&&(s="kilometers");var f=factors$4[s];if(!f)throw new Error(s+" units is invalid");return d*f}function degreesToRadians$5(d){var s=d%360;return s*Math.PI/180}function getCoord$9(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function distance(d,s,f){f===void 0&&(f={});var _=getCoord$9(d),S=getCoord$9(s),T=degreesToRadians$5(S[1]-_[1]),F=degreesToRadians$5(S[0]-_[0]),M=degreesToRadians$5(_[1]),P=degreesToRadians$5(S[1]),H=Math.pow(Math.sin(T/2),2)+Math.pow(Math.sin(F/2),2)*Math.cos(M)*Math.cos(P);return radiansToLength$3(2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H)),f.units)}var eventemitter3={exports:{}};(function(d){var s=Object.prototype.hasOwnProperty,f="~";function _(){}Object.create&&(_.prototype=Object.create(null),new _().__proto__||(f=!1));function S(P,H,J){this.fn=P,this.context=H,this.once=J||!1}function T(P,H,J,K,oe){if(typeof J!="function")throw new TypeError("The listener must be a function");var se=new S(J,K||P,oe),ae=f?f+H:H;return P._events[ae]?P._events[ae].fn?P._events[ae]=[P._events[ae],se]:P._events[ae].push(se):(P._events[ae]=se,P._eventsCount++),P}function F(P,H){--P._eventsCount===0?P._events=new _:delete P._events[H]}function M(){this._events=new _,this._eventsCount=0}M.prototype.eventNames=function(){var H=[],J,K;if(this._eventsCount===0)return H;for(K in J=this._events)s.call(J,K)&&H.push(f?K.slice(1):K);return Object.getOwnPropertySymbols?H.concat(Object.getOwnPropertySymbols(J)):H},M.prototype.listeners=function(H){var J=f?f+H:H,K=this._events[J];if(!K)return[];if(K.fn)return[K.fn];for(var oe=0,se=K.length,ae=new Array(se);oe<se;oe++)ae[oe]=K[oe].fn;return ae},M.prototype.listenerCount=function(H){var J=f?f+H:H,K=this._events[J];return K?K.fn?1:K.length:0},M.prototype.emit=function(H,J,K,oe,se,ae){var ge=f?f+H:H;if(!this._events[ge])return!1;var he=this._events[ge],Be=arguments.length,pe,be;if(he.fn){switch(he.once&&this.removeListener(H,he.fn,void 0,!0),Be){case 1:return he.fn.call(he.context),!0;case 2:return he.fn.call(he.context,J),!0;case 3:return he.fn.call(he.context,J,K),!0;case 4:return he.fn.call(he.context,J,K,oe),!0;case 5:return he.fn.call(he.context,J,K,oe,se),!0;case 6:return he.fn.call(he.context,J,K,oe,se,ae),!0}for(be=1,pe=new Array(Be-1);be<Be;be++)pe[be-1]=arguments[be];he.fn.apply(he.context,pe)}else{var Re=he.length,Fe;for(be=0;be<Re;be++)switch(he[be].once&&this.removeListener(H,he[be].fn,void 0,!0),Be){case 1:he[be].fn.call(he[be].context);break;case 2:he[be].fn.call(he[be].context,J);break;case 3:he[be].fn.call(he[be].context,J,K);break;case 4:he[be].fn.call(he[be].context,J,K,oe);break;default:if(!pe)for(Fe=1,pe=new Array(Be-1);Fe<Be;Fe++)pe[Fe-1]=arguments[Fe];he[be].fn.apply(he[be].context,pe)}}return!0},M.prototype.on=function(H,J,K){return T(this,H,J,K,!1)},M.prototype.once=function(H,J,K){return T(this,H,J,K,!0)},M.prototype.removeListener=function(H,J,K,oe){var se=f?f+H:H;if(!this._events[se])return this;if(!J)return F(this,se),this;var ae=this._events[se];if(ae.fn)ae.fn===J&&(!oe||ae.once)&&(!K||ae.context===K)&&F(this,se);else{for(var ge=0,he=[],Be=ae.length;ge<Be;ge++)(ae[ge].fn!==J||oe&&!ae[ge].once||K&&ae[ge].context!==K)&&he.push(ae[ge]);he.length?this._events[se]=he.length===1?he[0]:he:F(this,se)}return this},M.prototype.removeAllListeners=function(H){var J;return H?(J=f?f+H:H,this._events[J]&&F(this,J)):(this._events=new _,this._eventsCount=0),this},M.prototype.off=M.prototype.removeListener,M.prototype.addListener=M.prototype.on,M.prefixed=f,M.EventEmitter=M,d.exports=M})(eventemitter3);var earthRadius$3=63710088e-1,factors$3={centimeters:earthRadius$3*100,centimetres:earthRadius$3*100,degrees:earthRadius$3/111325,feet:earthRadius$3*3.28084,inches:earthRadius$3*39.37,kilometers:earthRadius$3/1e3,kilometres:earthRadius$3/1e3,meters:earthRadius$3,metres:earthRadius$3,miles:earthRadius$3/1609.344,millimeters:earthRadius$3*1e3,millimetres:earthRadius$3*1e3,nauticalmiles:earthRadius$3/1852,radians:1,yards:earthRadius$3*1.0936};function feature$d(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function point$8(d,s,f){if(f===void 0&&(f={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$9(d[0])||!isNumber$9(d[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:d};return feature$d(_,s,f)}function lengthToRadians$3(d,s){s===void 0&&(s="kilometers");var f=factors$3[s];if(!f)throw new Error(s+" units is invalid");return d/f}function radiansToDegrees$2(d){var s=d%(2*Math.PI);return s*180/Math.PI}function degreesToRadians$4(d){var s=d%360;return s*Math.PI/180}function isNumber$9(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function getCoord$8(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function destination(d,s,f,_){_===void 0&&(_={});var S=getCoord$8(d),T=degreesToRadians$4(S[0]),F=degreesToRadians$4(S[1]),M=degreesToRadians$4(f),P=lengthToRadians$3(s,_.units),H=Math.asin(Math.sin(F)*Math.cos(P)+Math.cos(F)*Math.sin(P)*Math.cos(M)),J=T+Math.atan2(Math.sin(M)*Math.sin(P)*Math.cos(F),Math.cos(P)-Math.sin(F)*Math.sin(H)),K=radiansToDegrees$2(J),oe=radiansToDegrees$2(H);return point$8([K,oe],_.properties)}function radiansToDegrees$1(d){var s=d%(2*Math.PI);return s*180/Math.PI}function degreesToRadians$3(d){var s=d%360;return s*Math.PI/180}function getCoord$7(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function bearing(d,s,f){if(f===void 0&&(f={}),f.final===!0)return calculateFinalBearing(d,s);var _=getCoord$7(d),S=getCoord$7(s),T=degreesToRadians$3(_[0]),F=degreesToRadians$3(S[0]),M=degreesToRadians$3(_[1]),P=degreesToRadians$3(S[1]),H=Math.sin(F-T)*Math.cos(P),J=Math.cos(M)*Math.sin(P)-Math.sin(M)*Math.cos(P)*Math.cos(F-T);return radiansToDegrees$1(Math.atan2(H,J))}function calculateFinalBearing(d,s){var f=bearing(s,d);return f=(f+180)%360,f}var earthRadius$2=63710088e-1,factors$2={centimeters:earthRadius$2*100,centimetres:earthRadius$2*100,degrees:earthRadius$2/111325,feet:earthRadius$2*3.28084,inches:earthRadius$2*39.37,kilometers:earthRadius$2/1e3,kilometres:earthRadius$2/1e3,meters:earthRadius$2,metres:earthRadius$2,miles:earthRadius$2/1609.344,millimeters:earthRadius$2*1e3,millimetres:earthRadius$2*1e3,nauticalmiles:earthRadius$2/1852,radians:1,yards:earthRadius$2*1.0936};function feature$c(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function point$7(d,s,f){if(f===void 0&&(f={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$8(d[0])||!isNumber$8(d[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:d};return feature$c(_,s,f)}function lineString$3(d,s,f){if(f===void 0&&(f={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");var _={type:"LineString",coordinates:d};return feature$c(_,s,f)}function radiansToLength$2(d,s){s===void 0&&(s="kilometers");var f=factors$2[s];if(!f)throw new Error(s+" units is invalid");return d*f}function lengthToRadians$2(d,s){var f=factors$2[s];return d/f}function convertLength$2(d,s,f){if(f===void 0&&(f="kilometers"),!(d>=0))throw new Error("length must be a positive number");return radiansToLength$2(lengthToRadians$2(d,s),f)}function isNumber$8(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function featureOf(d,s,f){if(!d)throw new Error("No feature passed");if(!f)throw new Error(".featureOf() requires a name");if(!d||d.type!=="Feature"||!d.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!d.geometry||d.geometry.type!==s)throw new Error("Invalid input to "+f+": must be a "+s+", given "+d.geometry.type)}function coordEach$5(d,s,f){if(d!==null)for(var _,S,T,F,M,P,H,J=0,K=0,oe,se=d.type,ae=se==="FeatureCollection",ge=se==="Feature",he=ae?d.features.length:1,Be=0;Be<he;Be++){H=ae?d.features[Be].geometry:ge?d.geometry:d,oe=H?H.type==="GeometryCollection":!1,M=oe?H.geometries.length:1;for(var pe=0;pe<M;pe++){var be=0,Re=0;if(F=oe?H.geometries[pe]:H,F!==null){P=F.coordinates;var Fe=F.type;switch(J=0,Fe){case null:break;case"Point":if(s(P,K,Be,be,Re)===!1)return!1;K++,be++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,Be,be,Re)===!1)return!1;K++,Fe==="MultiPoint"&&be++}Fe==="LineString"&&be++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,Be,be,Re)===!1)return!1;K++}Fe==="MultiLineString"&&be++,Fe==="Polygon"&&Re++}Fe==="Polygon"&&be++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(Re=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,Be,be,Re)===!1)return!1;K++}Re++}be++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach$5(F.geometries[_],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function geomEach$5(d,s){var f,_,S,T,F,M,P,H,J,K,oe=0,se=d.type==="FeatureCollection",ae=d.type==="Feature",ge=se?d.features.length:1;for(f=0;f<ge;f++){for(M=se?d.features[f].geometry:ae?d.geometry:d,H=se?d.features[f].properties:ae?d.properties:{},J=se?d.features[f].bbox:ae?d.bbox:void 0,K=se?d.features[f].id:ae?d.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,oe,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,oe,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],oe,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}oe++}}function flattenEach$4(d,s){geomEach$5(d,function(f,_,S,T,F){var M=f===null?null:f.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return s(feature$c(f,S,{bbox:T,id:F}),_,0)===!1?!1:void 0}var P;switch(M){case"MultiPoint":P="Point";break;case"MultiLineString":P="LineString";break;case"MultiPolygon":P="Polygon";break}for(var H=0;H<f.coordinates.length;H++){var J=f.coordinates[H],K={type:P,coordinates:J};if(s(feature$c(K,S),_,H)===!1)return!1}})}function segmentEach$1(d,s){flattenEach$4(d,function(f,_,S){var T=0;if(f.geometry){var F=f.geometry.type;if(!(F==="Point"||F==="MultiPoint")){var M,P=0,H=0,J=0;if(coordEach$5(f,function(K,oe,se,ae,ge){if(M===void 0||_>P||ae>H||ge>J){M=K,P=_,H=ae,J=ge,T=0;return}var he=lineString$3([M,K],f.properties);if(s(he,_,S,ge,T)===!1)return!1;T++,M=K})===!1)return!1}}})}var earthRadius$1=63710088e-1,factors$1={centimeters:earthRadius$1*100,centimetres:earthRadius$1*100,degrees:earthRadius$1/111325,feet:earthRadius$1*3.28084,inches:earthRadius$1*39.37,kilometers:earthRadius$1/1e3,kilometres:earthRadius$1/1e3,meters:earthRadius$1,metres:earthRadius$1,miles:earthRadius$1/1609.344,millimeters:earthRadius$1*1e3,millimetres:earthRadius$1*1e3,nauticalmiles:earthRadius$1/1852,radians:1,yards:earthRadius$1*1.0936};function radiansToLength$1(d,s){s===void 0&&(s="kilometers");var f=factors$1[s];if(!f)throw new Error(s+" units is invalid");return d*f}function lengthToRadians$1(d,s){var f=factors$1[s];return d/f}function convertLength$1(d,s,f){if(f===void 0&&(f="kilometers"),!(d>=0))throw new Error("length must be a positive number");return radiansToLength$1(lengthToRadians$1(d,s),f)}function getCoord$6(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function rhumbDistance(d,s,f){f===void 0&&(f={});var _=getCoord$6(d),S=getCoord$6(s);S[0]+=S[0]-_[0]>180?-360:_[0]-S[0]>180?360:0;var T=calculateRhumbDistance(_,S),F=convertLength$1(T,"meters",f.units);return F}function calculateRhumbDistance(d,s,f){f=f===void 0?earthRadius$1:Number(f);var _=f,S=d[1]*Math.PI/180,T=s[1]*Math.PI/180,F=T-S,M=Math.abs(s[0]-d[0])*Math.PI/180;M>Math.PI&&(M-=2*Math.PI);var P=Math.log(Math.tan(T/2+Math.PI/4)/Math.tan(S/2+Math.PI/4)),H=Math.abs(P)>1e-11?F/P:Math.cos(S),J=Math.sqrt(F*F+H*H*M*M),K=J*_;return K}function pointToLineDistance(d,s,f){if(f===void 0&&(f={}),f.method||(f.method="geodesic"),f.units||(f.units="kilometers"),!d)throw new Error("pt is required");if(Array.isArray(d)?d=point$7(d):d.type==="Point"?d=feature$c(d):featureOf(d,"Point","point"),!s)throw new Error("line is required");Array.isArray(s)?s=lineString$3(s):s.type==="LineString"?s=feature$c(s):featureOf(s,"LineString","line");var _=1/0,S=d.geometry.coordinates;return segmentEach$1(s,function(T){var F=T.geometry.coordinates[0],M=T.geometry.coordinates[1],P=distanceToSegment(S,F,M,f);P<_&&(_=P)}),convertLength$2(_,"degrees",f.units)}function distanceToSegment(d,s,f,_){var S=[f[0]-s[0],f[1]-s[1]],T=[d[0]-s[0],d[1]-s[1]],F=dot(T,S);if(F<=0)return calcDistance(d,s,{method:_.method,units:"degrees"});var M=dot(S,S);if(M<=F)return calcDistance(d,f,{method:_.method,units:"degrees"});var P=F/M,H=[s[0]+P*S[0],s[1]+P*S[1]];return calcDistance(d,H,{method:_.method,units:"degrees"})}function dot(d,s){return d[0]*s[0]+d[1]*s[1]}function calcDistance(d,s,f){return f.method==="planar"?rhumbDistance(d,s,f):distance(d,s,f)}function _defineProperty$2(d,s,f){return(s=toPropertyKey(s))in d?Object.defineProperty(d,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[s]=f,d}function createMat4(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function transformVector(d,s){const f=transformMat4([],s,d);return scale$1(f,f,1/f[3]),f}function clamp(d,s,f){return d<s?s:d>f?f:d}function ieLog2(d){return Math.log(d)*Math.LOG2E}const log2=Math.log2||ieLog2;function assert(d,s){if(!d)throw new Error(s||"@math.gl/web-mercator: assertion failed.")}const PI=Math.PI,PI_4=PI/4,DEGREES_TO_RADIANS$1=PI/180,RADIANS_TO_DEGREES=180/PI,TILE_SIZE=512,EARTH_CIRCUMFERENCE=4003e4,MAX_LATITUDE=85.051129,DEFAULT_ALTITUDE=1.5;function zoomToScale(d){return Math.pow(2,d)}function lngLatToWorld(d){const[s,f]=d;assert(Number.isFinite(s)),assert(Number.isFinite(f)&&f>=-90&&f<=90,"invalid latitude");const _=s*DEGREES_TO_RADIANS$1,S=f*DEGREES_TO_RADIANS$1,T=TILE_SIZE*(_+PI)/(2*PI),F=TILE_SIZE*(PI+Math.log(Math.tan(PI_4+S*.5)))/(2*PI);return[T,F]}function worldToLngLat(d){const[s,f]=d,_=s/TILE_SIZE*(2*PI)-PI,S=2*(Math.atan(Math.exp(f/TILE_SIZE*(2*PI)-PI))-PI_4);return[_*RADIANS_TO_DEGREES,S*RADIANS_TO_DEGREES]}function getDistanceScales(d){const{latitude:s,longitude:f,highPrecision:_=!1}=d;assert(Number.isFinite(s)&&Number.isFinite(f));const S=TILE_SIZE,T=Math.cos(s*DEGREES_TO_RADIANS$1),F=S/360,M=F/T,P=S/EARTH_CIRCUMFERENCE/T,H={unitsPerMeter:[P,P,P],metersPerUnit:[1/P,1/P,1/P],unitsPerDegree:[F,M,P],degreesPerUnit:[1/F,1/M,1/P]};if(_){const J=DEGREES_TO_RADIANS$1*Math.tan(s*DEGREES_TO_RADIANS$1)/T,K=F*J/2,oe=S/EARTH_CIRCUMFERENCE*J,se=oe/M*P;H.unitsPerDegree2=[0,K,oe],H.unitsPerMeter2=[se,0,se]}return H}function getViewMatrix(d){const{height:s,pitch:f,bearing:_,altitude:S,scale:T,center:F}=d,M=createMat4();translate$1(M,M,[0,0,-S]),rotateX(M,M,-f*DEGREES_TO_RADIANS$1),rotateZ(M,M,_*DEGREES_TO_RADIANS$1);const P=T/s;return scale$2(M,M,[P,P,P]),F&&translate$1(M,M,negate$1([],F)),M}function getProjectionParameters(d){const{width:s,height:f,altitude:_,pitch:S=0,offset:T,center:F,scale:M,nearZMultiplier:P=1,farZMultiplier:H=1}=d;let{fovy:J=altitudeToFovy(DEFAULT_ALTITUDE)}=d;_!==void 0&&(J=altitudeToFovy(_));const K=J*DEGREES_TO_RADIANS$1,oe=S*DEGREES_TO_RADIANS$1,se=fovyToAltitude(J);let ae=se;F&&(ae+=F[2]*M/Math.cos(oe)/f);const ge=K*(.5+(T?T[1]:0)/f),he=Math.sin(ge)*ae/Math.sin(clamp(Math.PI/2-oe-ge,.01,Math.PI-.01)),Be=Math.sin(oe)*he+ae,pe=ae*10,be=Math.min(Be*H,pe);return{fov:K,aspect:s/f,focalDistance:se,near:P,far:be}}function getProjectionMatrix(d){const{fov:s,aspect:f,near:_,far:S}=getProjectionParameters(d);return perspective([],s,f,_,S)}function altitudeToFovy(d){return 2*Math.atan(.5/d)*RADIANS_TO_DEGREES}function fovyToAltitude(d){return .5/Math.tan(.5*d*DEGREES_TO_RADIANS$1)}function worldToPixels(d,s){const[f,_,S=0]=d;return assert(Number.isFinite(f)&&Number.isFinite(_)&&Number.isFinite(S)),transformVector(s,[f,_,S,1])}function pixelsToWorld(d,s,f=0){const[_,S,T]=d;if(assert(Number.isFinite(_)&&Number.isFinite(S),"invalid pixel coordinate"),Number.isFinite(T))return transformVector(s,[_,S,T,1]);const F=transformVector(s,[_,S,0,1]),M=transformVector(s,[_,S,1,1]),P=F[2],H=M[2],J=P===H?0:((f||0)-P)/(H-P);return lerp([],F,M,J)}function fitBounds(d){const{width:s,height:f,bounds:_,minExtent:S=0,maxZoom:T=24,offset:F=[0,0]}=d,[[M,P],[H,J]]=_,K=getPaddingObject(d.padding),oe=lngLatToWorld([M,clamp(J,-MAX_LATITUDE,MAX_LATITUDE)]),se=lngLatToWorld([H,clamp(P,-MAX_LATITUDE,MAX_LATITUDE)]),ae=[Math.max(Math.abs(se[0]-oe[0]),S),Math.max(Math.abs(se[1]-oe[1]),S)],ge=[s-K.left-K.right-Math.abs(F[0])*2,f-K.top-K.bottom-Math.abs(F[1])*2];assert(ge[0]>0&&ge[1]>0);const he=ge[0]/ae[0],Be=ge[1]/ae[1],pe=(K.right-K.left)/2/he,be=(K.top-K.bottom)/2/Be,Re=[(se[0]+oe[0])/2+pe,(se[1]+oe[1])/2+be],Fe=worldToLngLat(Re),Me=Math.min(T,log2(Math.abs(Math.min(he,Be))));return assert(Number.isFinite(Me)),{longitude:Fe[0],latitude:Fe[1],zoom:Me}}function getPaddingObject(d=0){return typeof d=="number"?{top:d,bottom:d,left:d,right:d}:(assert(Number.isFinite(d.top)&&Number.isFinite(d.bottom)&&Number.isFinite(d.left)&&Number.isFinite(d.right)),d)}const DEGREES_TO_RADIANS=Math.PI/180;function getBounds(d,s=0){const{width:f,height:_,unproject:S}=d,T={targetZ:s},F=S([0,_],T),M=S([f,_],T);let P,H;const J=d.fovy?.5*d.fovy*DEGREES_TO_RADIANS:Math.atan(.5/d.altitude),K=(90-d.pitch)*DEGREES_TO_RADIANS;return J>K-.01?(P=unprojectOnFarPlane(d,0,s),H=unprojectOnFarPlane(d,f,s)):(P=S([0,0],T),H=S([f,0],T)),[F,M,H,P]}function unprojectOnFarPlane(d,s,f){const{pixelUnprojectionMatrix:_}=d,S=transformVector(_,[s,0,1,1]),T=transformVector(_,[s,d.height,1,1]),M=(f*d.distanceScales.unitsPerMeter[2]-S[2])/(T[2]-S[2]),P=lerp([],S,T,M),H=worldToLngLat(P);return H.push(f),H}class WebMercatorViewport{constructor(s={width:1,height:1}){_defineProperty$2(this,"latitude",void 0),_defineProperty$2(this,"longitude",void 0),_defineProperty$2(this,"zoom",void 0),_defineProperty$2(this,"pitch",void 0),_defineProperty$2(this,"bearing",void 0),_defineProperty$2(this,"altitude",void 0),_defineProperty$2(this,"fovy",void 0),_defineProperty$2(this,"meterOffset",void 0),_defineProperty$2(this,"center",void 0),_defineProperty$2(this,"width",void 0),_defineProperty$2(this,"height",void 0),_defineProperty$2(this,"scale",void 0),_defineProperty$2(this,"distanceScales",void 0),_defineProperty$2(this,"viewMatrix",void 0),_defineProperty$2(this,"projectionMatrix",void 0),_defineProperty$2(this,"viewProjectionMatrix",void 0),_defineProperty$2(this,"pixelProjectionMatrix",void 0),_defineProperty$2(this,"pixelUnprojectionMatrix",void 0),_defineProperty$2(this,"equals",Be=>Be instanceof WebMercatorViewport?Be.width===this.width&&Be.height===this.height&&equals(Be.projectionMatrix,this.projectionMatrix)&&equals(Be.viewMatrix,this.viewMatrix):!1),_defineProperty$2(this,"project",(Be,pe={})=>{const{topLeft:be=!0}=pe,Re=this.projectPosition(Be),Fe=worldToPixels(Re,this.pixelProjectionMatrix),[Me,ve]=Fe,At=be?ve:this.height-ve;return Be.length===2?[Me,At]:[Me,At,Fe[2]]}),_defineProperty$2(this,"unproject",(Be,pe={})=>{const{topLeft:be=!0,targetZ:Re=void 0}=pe,[Fe,Me,ve]=Be,At=be?Me:this.height-Me,Ct=Re&&Re*this.distanceScales.unitsPerMeter[2],Rt=pixelsToWorld([Fe,At,ve],this.pixelUnprojectionMatrix,Ct),[It,xt,wt]=this.unprojectPosition(Rt);return Number.isFinite(ve)?[It,xt,wt]:Number.isFinite(Re)?[It,xt,Re]:[It,xt]}),_defineProperty$2(this,"projectPosition",Be=>{const[pe,be]=lngLatToWorld(Be),Re=(Be[2]||0)*this.distanceScales.unitsPerMeter[2];return[pe,be,Re]}),_defineProperty$2(this,"unprojectPosition",Be=>{const[pe,be]=worldToLngLat(Be),Re=(Be[2]||0)*this.distanceScales.metersPerUnit[2];return[pe,be,Re]});let{width:f,height:_,altitude:S=null,fovy:T=null}=s;const{latitude:F=0,longitude:M=0,zoom:P=0,pitch:H=0,bearing:J=0,position:K=null,nearZMultiplier:oe=.02,farZMultiplier:se=1.01}=s;f=f||1,_=_||1,T===null&&S===null?(S=DEFAULT_ALTITUDE,T=altitudeToFovy(S)):T===null?T=altitudeToFovy(S):S===null&&(S=fovyToAltitude(T));const ae=zoomToScale(P);S=Math.max(.75,S);const ge=getDistanceScales({longitude:M,latitude:F}),he=lngLatToWorld([M,F]);he.push(0),K&&add$3(he,he,mul([],K,ge.unitsPerMeter)),this.projectionMatrix=getProjectionMatrix({width:f,height:_,scale:ae,center:he,pitch:H,fovy:T,nearZMultiplier:oe,farZMultiplier:se}),this.viewMatrix=getViewMatrix({height:_,scale:ae,center:he,pitch:H,bearing:J,altitude:S}),this.width=f,this.height=_,this.scale=ae,this.latitude=F,this.longitude=M,this.zoom=P,this.pitch=H,this.bearing=J,this.altitude=S,this.fovy=T,this.center=he,this.meterOffset=K||[0,0,0],this.distanceScales=ge,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:s,height:f,projectionMatrix:_,viewMatrix:S}=this,T=createMat4();multiply$1(T,T,_),multiply$1(T,T,S),this.viewProjectionMatrix=T;const F=createMat4();scale$2(F,F,[s/2,-f/2,1]),translate$1(F,F,[1,-1,0]),multiply$1(F,F,T);const M=invert(createMat4(),F);if(!M)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=F,this.pixelUnprojectionMatrix=M}projectFlat(s){return lngLatToWorld(s)}unprojectFlat(s){return worldToLngLat(s)}getMapCenterByLngLatPosition({lngLat:s,pos:f}){const _=pixelsToWorld(f,this.pixelUnprojectionMatrix),S=lngLatToWorld(s),T=add$2([],S,negate([],_)),F=add$2([],this.center,T);return worldToLngLat(F)}fitBounds(s,f={}){const{width:_,height:S}=this,{longitude:T,latitude:F,zoom:M}=fitBounds(Object.assign({width:_,height:S,bounds:s},f));return new WebMercatorViewport({width:_,height:S,longitude:T,latitude:F,zoom:M})}getBounds(s){const f=this.getBoundingRegion(s),_=Math.min(...f.map(M=>M[0])),S=Math.max(...f.map(M=>M[0])),T=Math.min(...f.map(M=>M[1])),F=Math.max(...f.map(M=>M[1]));return[[_,T],[S,F]]}getBoundingRegion(s={}){return getBounds(this,s.z||0)}getLocationAtPoint({lngLat:s,pos:f}){return this.getMapCenterByLngLatPosition({lngLat:s,pos:f})}}function insertBefore(d,s,f){const _=d.indexOf(s);return _<0?d:d.slice(0,_)+f+d.slice(_)}class JunctionScatterplotLayer extends CompositeLayer{renderLayers(){const{id:s,getFillColor:f,getStrokeColor:_,getInnerRadius:S,updateTriggers:T}=this.props;return[new ScatterplotLayer({...this.props,id:`${s}-full`,data:this.props.data,getLineColor:_,updateTriggers:{...T,getStrokeColor:T.getStrokeColor}}),new ScatterplotLayer({...this.props,id:`${s}-inner`,data:this.props.data,getFillColor:f,getRadius:S,pickable:!1,updateTriggers:{...T,getFillColor:T.getFillColor,getRadius:T.getInnerRadius}})]}}Bt(JunctionScatterplotLayer,"layerName","JunctionScatterplotLayer"),Bt(JunctionScatterplotLayer,"defaultProps",{...ScatterplotLayer.defaultProps,getFillColor:s=>[0,0,0,255],getStrokeColor:s=>[255,255,255,255],getInnerRadius:s=>1});function feature$b(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function polygon$3(d,s,f){f===void 0&&(f={});for(var _=0,S=d;_<S.length;_++){var T=S[_];if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<T[T.length-1].length;F++)if(T[T.length-1][F]!==T[0][F])throw new Error("First and last Position are not equivalent.")}var M={type:"Polygon",coordinates:d};return feature$b(M,s,f)}function multiPolygon$1(d,s,f){f===void 0&&(f={});var _={type:"MultiPolygon",coordinates:d};return feature$b(_,s,f)}function getGeom$5(d){return d.type==="Feature"?d.geometry:d}function union(d,s,f){f===void 0&&(f={});var _=getGeom$5(d),S=getGeom$5(s),T=index$1.union(_.coordinates,S.coordinates);return T.length===0?null:T.length===1?polygon$3(T[0],f.properties):multiPolygon$1(T,f.properties)}function feature$a(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function polygon$2(d,s,f){f===void 0&&(f={});for(var _=0,S=d;_<S.length;_++){var T=S[_];if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<T[T.length-1].length;F++)if(T[T.length-1][F]!==T[0][F])throw new Error("First and last Position are not equivalent.")}var M={type:"Polygon",coordinates:d};return feature$a(M,s,f)}function multiPolygon(d,s,f){f===void 0&&(f={});var _={type:"MultiPolygon",coordinates:d};return feature$a(_,s,f)}function getGeom$4(d){return d.type==="Feature"?d.geometry:d}function intersect$1(d,s,f){f===void 0&&(f={});var _=getGeom$4(d),S=getGeom$4(s),T=index$1.intersection(_.coordinates,S.coordinates);return T.length===0?null:T.length===1?polygon$2(T[0],f.properties):multiPolygon(T,f.properties)}function clone$2(d){if(!d)throw new Error("geojson is required");switch(d.type){case"Feature":return cloneFeature$2(d);case"FeatureCollection":return cloneFeatureCollection$2(d);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return cloneGeometry$2(d);default:throw new Error("unknown GeoJSON type")}}function cloneFeature$2(d){var s={type:"Feature"};return Object.keys(d).forEach(function(f){switch(f){case"type":case"properties":case"geometry":return;default:s[f]=d[f]}}),s.properties=cloneProperties$2(d.properties),s.geometry=cloneGeometry$2(d.geometry),s}function cloneProperties$2(d){var s={};return d&&Object.keys(d).forEach(function(f){var _=d[f];typeof _=="object"?_===null?s[f]=null:Array.isArray(_)?s[f]=_.map(function(S){return S}):s[f]=cloneProperties$2(_):s[f]=_}),s}function cloneFeatureCollection$2(d){var s={type:"FeatureCollection"};return Object.keys(d).forEach(function(f){switch(f){case"type":case"features":return;default:s[f]=d[f]}}),s.features=d.features.map(function(f){return cloneFeature$2(f)}),s}function cloneGeometry$2(d){var s={type:d.type};return d.bbox&&(s.bbox=d.bbox),d.type==="GeometryCollection"?(s.geometries=d.geometries.map(function(f){return cloneGeometry$2(f)}),s):(s.coordinates=deepSlice$2(d.coordinates),s)}function deepSlice$2(d){var s=d;return typeof s[0]!="object"?s.slice():s.map(function(f){return deepSlice$2(f)})}function getCoord$5(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function getCoords$5(d){if(Array.isArray(d))return d;if(d.type==="Feature"){if(d.geometry!==null)return d.geometry.coordinates}else if(d.coordinates)return d.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function getGeom$3(d){return d.type==="Feature"?d.geometry:d}function booleanClockwise(d){for(var s=getCoords$5(d),f=0,_=1,S,T;_<s.length;)S=T||s[0],T=s[_],f+=(T[0]-S[0])*(T[1]+S[1]),_++;return f>0}function coordEach$4(d,s,f){if(d!==null)for(var _,S,T,F,M,P,H,J=0,K=0,oe,se=d.type,ae=se==="FeatureCollection",ge=se==="Feature",he=ae?d.features.length:1,Be=0;Be<he;Be++){H=ae?d.features[Be].geometry:ge?d.geometry:d,oe=H?H.type==="GeometryCollection":!1,M=oe?H.geometries.length:1;for(var pe=0;pe<M;pe++){var be=0,Re=0;if(F=oe?H.geometries[pe]:H,F!==null){P=F.coordinates;var Fe=F.type;switch(J=0,Fe){case null:break;case"Point":if(s(P,K,Be,be,Re)===!1)return!1;K++,be++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,Be,be,Re)===!1)return!1;K++,Fe==="MultiPoint"&&be++}Fe==="LineString"&&be++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,Be,be,Re)===!1)return!1;K++}Fe==="MultiLineString"&&be++,Fe==="Polygon"&&Re++}Fe==="Polygon"&&be++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(Re=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,Be,be,Re)===!1)return!1;K++}Re++}be++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach$4(F.geometries[_],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function featureEach$4(d,s){if(d.type==="Feature")s(d,0);else if(d.type==="FeatureCollection")for(var f=0;f<d.features.length&&s(d.features[f],f)!==!1;f++);}function geomEach$4(d,s){var f,_,S,T,F,M,P,H,J,K,oe=0,se=d.type==="FeatureCollection",ae=d.type==="Feature",ge=se?d.features.length:1;for(f=0;f<ge;f++){for(M=se?d.features[f].geometry:ae?d.geometry:d,H=se?d.features[f].properties:ae?d.properties:{},J=se?d.features[f].bbox:ae?d.bbox:void 0,K=se?d.features[f].id:ae?d.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,oe,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,oe,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],oe,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}oe++}}function flattenEach$3(d,s){geomEach$4(d,function(f,_,S,T,F){var M=f===null?null:f.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return s(feature$i(f,S,{bbox:T,id:F}),_,0)===!1?!1:void 0}var P;switch(M){case"MultiPoint":P="Point";break;case"MultiLineString":P="LineString";break;case"MultiPolygon":P="Polygon";break}for(var H=0;H<f.coordinates.length;H++){var J=f.coordinates[H],K={type:P,coordinates:J};if(s(feature$i(K,S),_,H)===!1)return!1}})}function rewind(d,s){if(s=s||{},!isObject$6(s))throw new Error("options is invalid");var f=s.reverse||!1,_=s.mutate||!1;if(!d)throw new Error("<geojson> is required");if(typeof f!="boolean")throw new Error("<reverse> must be a boolean");if(typeof _!="boolean")throw new Error("<mutate> must be a boolean");_===!1&&(d=clone$2(d));var S=[];switch(d.type){case"GeometryCollection":return geomEach$4(d,function(T){rewindFeature(T,f)}),d;case"FeatureCollection":return featureEach$4(d,function(T){featureEach$4(rewindFeature(T,f),function(F){S.push(F)})}),featureCollection$5(S)}return rewindFeature(d,f)}function rewindFeature(d,s){var f=d.type==="Feature"?d.geometry.type:d.type;switch(f){case"GeometryCollection":return geomEach$4(d,function(_){rewindFeature(_,s)}),d;case"LineString":return rewindLineString(getCoords$5(d),s),d;case"Polygon":return rewindPolygon(getCoords$5(d),s),d;case"MultiLineString":return getCoords$5(d).forEach(function(_){rewindLineString(_,s)}),d;case"MultiPolygon":return getCoords$5(d).forEach(function(_){rewindPolygon(_,s)}),d;case"Point":case"MultiPoint":return d}}function rewindLineString(d,s){booleanClockwise(d)===s&&d.reverse()}function rewindPolygon(d,s){booleanClockwise(d[0])!==s&&d[0].reverse();for(var f=1;f<d.length;f++)booleanClockwise(d[f])===s&&d[f].reverse()}function recursivelyTraverseNestedArrays(d,s,f){if(!Array.isArray(d[0]))return!0;for(let _=0;_<d.length;_++)if(recursivelyTraverseNestedArrays(d[_],[...s,_],f)){f(d,s);break}return!1}function generatePointsParallelToLinePoints(d,s,f){const _={type:"LineString",coordinates:[d,s]},S=point$a(f),T=pointToLineDistance(S,_),F=bearing(d,s),P=(f[0]-d[0])*(s[1]-d[1])-(f[1]-d[1])*(s[0]-d[0])<0?F-90:F-270,H=destination(s,T,P),J=destination(d,T,P);return[H.geometry.coordinates,J.geometry.coordinates]}function distance2d(d,s,f,_){const S=d-f,T=s-_;return Math.sqrt(S*S+T*T)}function mix(d,s,f){return s*f+d*(1-f)}function nearestPointOnProjectedLine(d,s,f){const _=new WebMercatorViewport(f),T=d.geometry.coordinates.map(([ve,At,Ct=0])=>_.project([ve,At,Ct])),[F,M]=_.project(s.geometry.coordinates);let P=1/0,H={};T.forEach(([ve,At],Ct)=>{if(Ct===0)return;const[Rt,It]=T[Ct-1],xt=It-At,wt=ve-Rt,Ft=Rt*At-ve*It,jt=xt*xt+wt*wt,ta=Math.abs(xt*F+wt*M+Ft)/Math.sqrt(jt);ta<P&&(P=ta,H={index:Ct,x0:(wt*(wt*F-xt*M)-xt*Ft)/jt,y0:(xt*(-wt*F+xt*M)-wt*Ft)/jt})});const{index:J,x0:K,y0:oe}=H,[se,ae,ge=0]=T[J-1],[he,Be,pe=0]=T[J],be=distance2d(se,ae,he,Be),Fe=distance2d(se,ae,K,oe)/be,Me=mix(ge,pe,Fe);return{type:"Feature",geometry:{type:"Point",coordinates:_.unproject([K,oe,Me])},properties:{dist:P,index:J-1}}}function nearestPointOnLine$1(d,s,f){var T,F;let _;f&&(_=new WebMercatorViewport(f));let S=point$a([1/0,1/0],{dist:1/0});return!((T=d.geometry)!=null&&T.coordinates.length)||((F=d.geometry)==null?void 0:F.coordinates.length)<2||flattenEach$3(d,M=>{const P=getCoords$5(M),H=getCoords$5(s);let J,K,oe,se,ae,ge,he;if(P.length>1&&H.length){let pe,be;_?(pe=P.map(Me=>_.project(Me)),be=_.project(H)):(pe=P,be=H);for(let Me=1;Me<pe.length;Me++){if(pe[Me][0]!==pe[Me-1][0]){const xt=(pe[Me][1]-pe[Me-1][1])/(pe[Me][0]-pe[Me-1][0]),wt=pe[Me][1]-xt*pe[Me][0];he=Math.abs(xt*be[0]+wt-be[1])/Math.sqrt(xt*xt+1)}else he=Math.abs(be[0]-pe[Me][0]);const ve=Math.pow(pe[Me][1]-pe[Me-1][1],2)+Math.pow(pe[Me][0]-pe[Me-1][0],2),At=Math.pow(pe[Me][1]-be[1],2)+Math.pow(pe[Me][0]-be[0],2),Ct=Math.pow(pe[Me-1][1]-be[1],2)+Math.pow(pe[Me-1][0]-be[0],2),Rt=Math.pow(he,2),It=At-Rt+Ct-Rt;It>ve&&(he=Math.sqrt(Math.min(At,Ct))),(J==null||J>he)&&(It>ve?Ct<At?(K=0,oe=1):(oe=0,K=1):(K=Math.sqrt(Ct-Rt)/Math.sqrt(ve),oe=Math.sqrt(At-Rt)/Math.sqrt(ve)),J=he,ge=Me)}const Re=pe[ge-1][0]-pe[ge][0],Fe=pe[ge-1][1]-pe[ge][1];se=pe[ge-1][0]-Re*K,ae=pe[ge-1][1]-Fe*K}let Be={x:se,y:ae,idx:ge-1,to:K,from:oe};if(_){const pe=_.unproject([Be.x,Be.y]);Be={x:pe[0],y:pe[1],idx:ge-1,to:K,from:oe}}S=point$a([Be.x,Be.y],{dist:Math.abs(Be.from-Be.to),index:Be.idx})}),S}function getPickedEditHandle(d){const s=getPickedEditHandles(d);return s.length?s[0]:null}function getPickedSnapSourceEditHandle(d){return getPickedEditHandles(d).find(f=>f.properties.editHandleType==="snap-source")}function getNonGuidePicks(d){return d&&d.filter(s=>!s.isGuide)}function getPickedExistingEditHandle(d){return getPickedEditHandles(d).find(({properties:f})=>f.featureIndex>=0&&f.editHandleType==="existing")}function getPickedIntermediateEditHandle(d){return getPickedEditHandles(d).find(({properties:f})=>f.featureIndex>=0&&f.editHandleType==="intermediate")}function getPickedEditHandles(d){return d&&d.filter(f=>f.isGuide&&f.object.properties.guideType==="editHandle").map(f=>f.object)||[]}function getEditHandlesForGeometry(d,s,f="existing"){let _=[];switch(d.type){case"Point":_=[{type:"Feature",properties:{guideType:"editHandle",editHandleType:f,positionIndexes:[],featureIndex:s},geometry:{type:"Point",coordinates:d.coordinates}}];break;case"MultiPoint":case"LineString":_=_.concat(getEditHandlesForCoordinates(d.coordinates,[],s,f));break;case"Polygon":case"MultiLineString":for(let S=0;S<d.coordinates.length;S++)_=_.concat(getEditHandlesForCoordinates(d.coordinates[S],[S],s,f)),d.type==="Polygon"&&(_=_.slice(0,-1));break;case"MultiPolygon":for(let S=0;S<d.coordinates.length;S++)for(let T=0;T<d.coordinates[S].length;T++)_=_.concat(getEditHandlesForCoordinates(d.coordinates[S][T],[S,T],s,f)),_=_.slice(0,-1);break;default:throw Error(`Unhandled geometry type: ${d.type}`)}return _}function getEditHandlesForCoordinates(d,s,f,_="existing"){const S=[];for(let T=0;T<d.length;T++){const F=d[T];S.push({type:"Feature",properties:{guideType:"editHandle",positionIndexes:[...s,T],featureIndex:f,editHandleType:_},geometry:{type:"Point",coordinates:F}})}return S}function updateRectanglePosition(d,s,f){const _=d.geometry.coordinates;if(!_)return null;const S=_[0].slice(0,4);S[s%4]=f;const T=S[(s+2)%4],F=S[s%4];return S[(s+1)%4]=[F[0],T[1]],S[(s+3)%4]=[T[0],F[1]],[[...S,S[0]]]}function mapCoords$1(d,s){return typeof d[0]=="number"?!isNaN(d[0])&&isFinite(d[0])?s(d):d:d.map(f=>mapCoords$1(f,s)).filter(Boolean)}class ImmutableFeatureCollection{constructor(s){Bt(this,"featureCollection");this.featureCollection=s}getObject(){return this.featureCollection}replacePosition(s,f,_){const S=this.featureCollection.features[s].geometry,T=S.type==="Polygon"||S.type==="MultiPolygon",F={...S,coordinates:immutablyReplacePosition(S.coordinates,f,_,T)};return this.replaceGeometry(s,F)}removePosition(s,f){const _=this.featureCollection.features[s].geometry;if(_.type==="Point")throw Error("Can't remove a position from a Point or there'd be nothing left");if(_.type==="MultiPoint"&&_.coordinates.length<2)throw Error("Can't remove the last point of a MultiPoint or there'd be nothing left");if(_.type==="LineString"&&_.coordinates.length<3)throw Error("Can't remove position. LineString must have at least two positions");if(_.type==="Polygon"&&_.coordinates[0].length<5&&Array.isArray(f)&&f[0]===0)throw Error("Can't remove position. Polygon's outer ring must have at least four positions");if(_.type==="MultiLineString"&&_.coordinates.length===1&&_.coordinates[0].length<3)throw Error("Can't remove position. MultiLineString must have at least two positions");if(_.type==="MultiPolygon"&&_.coordinates.length===1&&_.coordinates[0][0].length<5&&Array.isArray(f)&&f[0]===0&&f[1]===0)throw Error("Can't remove position. MultiPolygon's outer ring must have at least four positions");const S=_.type==="Polygon"||_.type==="MultiPolygon",T={..._,coordinates:immutablyRemovePosition(_.coordinates,f,S)};return pruneGeometryIfNecessary(T),this.replaceGeometry(s,T)}addPosition(s,f,_){const S=this.featureCollection.features[s].geometry;if(S.type==="Point")throw new Error("Unable to add a position to a Point feature");S.type==="Polygon"||S.type;const T={...S,coordinates:immutablyAddPosition(S.coordinates,f,_)};return this.replaceGeometry(s,T)}replaceGeometry(s,f){const _={...this.featureCollection.features[s],geometry:f},S={...this.featureCollection,features:[...this.featureCollection.features.slice(0,s),_,...this.featureCollection.features.slice(s+1)]};return new ImmutableFeatureCollection(S)}addFeature(s){return this.addFeatures([s])}addFeatures(s){const f={...this.featureCollection,features:[...this.featureCollection.features,...s]};return new ImmutableFeatureCollection(f)}deleteFeature(s){return this.deleteFeatures([s])}deleteFeatures(s){const f=[...this.featureCollection.features];s.sort();for(let S=s.length-1;S>=0;S--){const T=s[S];T>=0&&T<f.length&&f.splice(T,1)}const _={...this.featureCollection,features:f};return new ImmutableFeatureCollection(_)}}function getUpdatedPosition(d,s){if(d.length===2&&s.length===3){const f=s[2];return[d[0],d[1],f]}return d}function immutablyReplacePosition(d,s,f,_){if(!s)return d;if(s.length===0)return getUpdatedPosition(f,d);if(s.length===1){const S=[...d.slice(0,s[0]),getUpdatedPosition(f,d[s[0]]),...d.slice(s[0]+1)];return _&&(s[0]===0||s[0]===d.length-1)&&(S[0]=getUpdatedPosition(f,d[0]),S[d.length-1]=getUpdatedPosition(f,d[0])),S}return[...d.slice(0,s[0]),immutablyReplacePosition(d[s[0]],s.slice(1,s.length),f,_),...d.slice(s[0]+1)]}function immutablyRemovePosition(d,s,f){if(!s)return d;if(s.length===0)throw Error("Must specify the index of the position to remove");if(s.length===1){const _=[...d.slice(0,s[0]),...d.slice(s[0]+1)];return f&&(s[0]===0||s[0]===d.length-1)&&(s[0]===0?_[_.length-1]=_[0]:s[0]===d.length-1&&(_[0]=_[_.length-1])),_}return[...d.slice(0,s[0]),immutablyRemovePosition(d[s[0]],s.slice(1,s.length),f),...d.slice(s[0]+1)]}function immutablyAddPosition(d,s,f,_){if(!s)return d;if(s.length===0)throw Error("Must specify the index of the position to remove");return s.length===1?[...d.slice(0,s[0]),f,...d.slice(s[0])]:[...d.slice(0,s[0]),immutablyAddPosition(d[s[0]],s.slice(1,s.length),f),...d.slice(s[0]+1)]}function pruneGeometryIfNecessary(d){switch(d.type){case"Polygon":prunePolygonIfNecessary(d);break;case"MultiLineString":pruneMultiLineStringIfNecessary(d);break;case"MultiPolygon":pruneMultiPolygonIfNecessary(d);break}}function prunePolygonIfNecessary(d){const s=d.coordinates;for(let f=1;f<s.length;f++)removeHoleIfNecessary(s,f)&&f--}function pruneMultiLineStringIfNecessary(d){for(let s=0;s<d.coordinates.length;s++)d.coordinates[s].length===1&&(d.coordinates.splice(s,1),s--)}function pruneMultiPolygonIfNecessary(d){for(let s=0;s<d.coordinates.length;s++){const f=d.coordinates[s];f[0].length<=3&&(d.coordinates.splice(s,1),s--);for(let S=1;S<f.length;S++)removeHoleIfNecessary(f,S)&&S--}}function removeHoleIfNecessary(d,s){return d[s].length<=3?(d.splice(s,1),!0):!1}const DEFAULT_GUIDES={type:"FeatureCollection",features:[]},DEFAULT_TOOLTIPS=[];class GeoJsonEditMode{constructor(){Bt(this,"_clickSequence",[])}getGuides(s){return DEFAULT_GUIDES}getTooltips(s){return DEFAULT_TOOLTIPS}getSelectedFeature(s){return s.selectedIndexes.length===1?s.data.features[s.selectedIndexes[0]]:null}getSelectedGeometry(s){const f=this.getSelectedFeature(s);return f?f.geometry:null}getSelectedFeaturesAsFeatureCollection(s){const{features:f}=s.data;return{type:"FeatureCollection",features:s.selectedIndexes.map(S=>f[S])}}getClickSequence(){return this._clickSequence}addClickSequence({mapCoords:s}){this._clickSequence.push(s)}resetClickSequence(){this._clickSequence=[]}getTentativeGuide(s){return this.getGuides(s).features.find(_=>_.properties&&_.properties.guideType==="tentative")}isSelectionPicked(s,f){if(!s.length)return!1;const _=getNonGuidePicks(s).map(({index:F})=>F),S=getPickedEditHandles(s).map(({properties:F})=>F.featureIndex),T=new Set([..._,...S]);return f.selectedIndexes.some(F=>T.has(F))}rewindPolygon(s){const{geometry:f}=s;return f.type==="Polygon"||f.type==="MultiPolygon"?rewind(s):s}getAddFeatureAction(s,f){const _=s,S=_.type==="Feature"?_:{type:"Feature",properties:{},geometry:_},T=this.rewindPolygon(S),F=new ImmutableFeatureCollection(f).addFeature(T).getObject();return{updatedData:F,editType:"addFeature",editContext:{featureIndexes:[F.features.length-1]}}}getAddManyFeaturesAction({features:s},f){let _=new ImmutableFeatureCollection(f);const S=_.getObject().features.length,T=[];for(const F of s){const{properties:M,geometry:P}=F,H=P;_=_.addFeature({type:"Feature",properties:M,geometry:H}),T.push(S+T.length)}return{updatedData:_.getObject(),editType:"addFeature",editContext:{featureIndexes:T}}}getAddFeatureOrBooleanPolygonAction(s,f){const _=s,S=this.getSelectedFeature(f),{modeConfig:T}=f;if(T&&T.booleanOperation){if(!S||S.geometry.type!=="Polygon"&&S.geometry.type!=="MultiPolygon")return console.warn("booleanOperation only supported for single Polygon or MultiPolygon selection"),null;const F=_.type==="Feature"?_:{type:"Feature",geometry:_};let M;if(T.booleanOperation==="union")M=union(S,F);else if(T.booleanOperation==="difference")M=difference(S,F);else if(T.booleanOperation==="intersection")M=intersect$1(S,F);else return console.warn(`Invalid booleanOperation ${T.booleanOperation}`),null;if(!M)return console.warn("Canceling edit. Boolean operation erased entire polygon."),null;const P=f.selectedIndexes[0];return{updatedData:new ImmutableFeatureCollection(f.data).replaceGeometry(P,M.geometry).getObject(),editType:"unionGeometry",editContext:{featureIndexes:[P]}}}return this.getAddFeatureAction(s,f.data)}createTentativeFeature(s){return null}handleClick(s,f){}handlePointerMove(s,f){const _=this.createTentativeFeature(f);_&&f.onEdit({updatedData:f.data,editType:"updateTentativeFeature",editContext:{feature:_}})}handleStartDragging(s,f){}handleStopDragging(s,f){}handleDragging(s,f){}handleKeyUp(s,f){s.key==="Escape"&&(this.resetClickSequence(),f.onEdit({updatedData:f.data,editType:"cancelFeature",editContext:{}}))}}function getIntermediatePosition(d,s){return[(d[0]+s[0])/2,(d[1]+s[1])/2]}class ViewMode extends GeoJsonEditMode{}function radiansToDegrees(d){var s=d%(2*Math.PI);return s*180/Math.PI}function degreesToRadians$2(d){var s=d%360;return s*Math.PI/180}function getCoord$4(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function rhumbBearing(d,s,f){f===void 0&&(f={});var _;f.final?_=calculateRhumbBearing(getCoord$4(s),getCoord$4(d)):_=calculateRhumbBearing(getCoord$4(d),getCoord$4(s));var S=_>180?-(360-_):_;return S}function calculateRhumbBearing(d,s){var f=degreesToRadians$2(d[1]),_=degreesToRadians$2(s[1]),S=degreesToRadians$2(s[0]-d[0]);S>Math.PI&&(S-=2*Math.PI),S<-Math.PI&&(S+=2*Math.PI);var T=Math.log(Math.tan(_/2+Math.PI/4)/Math.tan(f/2+Math.PI/4)),F=Math.atan2(S,T);return(radiansToDegrees(F)+360)%360}var earthRadius=63710088e-1,factors={centimeters:earthRadius*100,centimetres:earthRadius*100,degrees:earthRadius/111325,feet:earthRadius*3.28084,inches:earthRadius*39.37,kilometers:earthRadius/1e3,kilometres:earthRadius/1e3,meters:earthRadius,metres:earthRadius,miles:earthRadius/1609.344,millimeters:earthRadius*1e3,millimetres:earthRadius*1e3,nauticalmiles:earthRadius/1852,radians:1,yards:earthRadius*1.0936};function feature$9(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function point$6(d,s,f){if(f===void 0&&(f={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$7(d[0])||!isNumber$7(d[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:d};return feature$9(_,s,f)}function radiansToLength(d,s){var f=factors[s];return d*f}function lengthToRadians(d,s){s===void 0&&(s="kilometers");var f=factors[s];if(!f)throw new Error(s+" units is invalid");return d/f}function degreesToRadians$1(d){var s=d%360;return s*Math.PI/180}function convertLength(d,s,f){if(s===void 0&&(s="kilometers"),!(d>=0))throw new Error("length must be a positive number");return radiansToLength(lengthToRadians(d,s),f)}function isNumber$7(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function getCoord$3(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function rhumbDestination(d,s,f,_){_===void 0&&(_={});var S=s<0,T=convertLength(Math.abs(s),_.units,"meters");S&&(T=-Math.abs(T));var F=getCoord$3(d),M=calculateRhumbDestination(F,T,f);return M[0]+=M[0]-F[0]>180?-360:F[0]-M[0]>180?360:0,point$6(M,_.properties)}function calculateRhumbDestination(d,s,f,_){_=_===void 0?earthRadius:Number(_);var S=s/_,T=d[0]*Math.PI/180,F=degreesToRadians$1(d[1]),M=degreesToRadians$1(f),P=S*Math.cos(M),H=F+P;Math.abs(H)>Math.PI/2&&(H=H>0?Math.PI-H:-Math.PI-H);var J=Math.log(Math.tan(H/2+Math.PI/4)/Math.tan(F/2+Math.PI/4)),K=Math.abs(J)>1e-11?P/J:Math.cos(F),oe=S*Math.sin(M)/K,se=T+oe;return[(se*180/Math.PI+540)%360-180,H*180/Math.PI]}function translateFromCenter(d,s,f){const _=center(d),S=rhumbDestination(_,s,f),T=mapCoords$1(d.geometry.coordinates,F=>{const M=rhumbDistance(_.geometry.coordinates,F),P=rhumbBearing(_.geometry.coordinates,F);return rhumbDestination(S.geometry.coordinates,M,P).geometry.coordinates});return d.geometry.coordinates=T,d}class TranslateMode extends GeoJsonEditMode{constructor(){super(...arguments);Bt(this,"_geometryBeforeTranslate");Bt(this,"_isTranslatable")}handleDragging(f,_){if(this._isTranslatable){if(this._geometryBeforeTranslate){const S=this.getTranslateAction(f.pointerDownMapCoords,f.mapCoords,"translating",_);S&&_.onEdit(S)}f.cancelPan()}}handlePointerMove(f,_){this._isTranslatable=this.isSelectionPicked(f.pointerDownPicks||f.picks,_),this.updateCursor(_)}handleStartDragging(f,_){this._isTranslatable&&(this._geometryBeforeTranslate=this.getSelectedFeaturesAsFeatureCollection(_))}handleStopDragging(f,_){if(this._geometryBeforeTranslate){const S=this.getTranslateAction(f.pointerDownMapCoords,f.mapCoords,"translated",_);S&&_.onEdit(S),this._geometryBeforeTranslate=null}}updateCursor(f){this._isTranslatable?f.onUpdateCursor("move"):f.onUpdateCursor(null)}getTranslateAction(f,_,S,T){if(!this._geometryBeforeTranslate)return null;let F=new ImmutableFeatureCollection(T.data);const M=T.selectedIndexes,{viewport:P,screenSpace:H}=T.modeConfig||{};if(P&&H){const J=P.project?P:new WebMercatorViewport(P),K=J.project(f),oe=J.project(_),se=oe[0]-K[0],ae=oe[1]-K[1];for(let ge=0;ge<M.length;ge++){const he=M[ge],Be=this._geometryBeforeTranslate.features[ge];let pe=Be.geometry.coordinates;pe&&(pe=mapCoords$1(pe,be=>{const Re=J.project(be);return Re?(Re[0]+=se,Re[1]+=ae,J.unproject(Re)):null}),F=F.replaceGeometry(he,{type:Be.geometry.type,coordinates:pe}))}}else{const J=point$a(f),K=point$a(_),oe=distance(J,K),se=bearing(J,K),ae=this._geometryBeforeTranslate.features.map(ge=>translateFromCenter(clone$2(ge),oe,se));for(let ge=0;ge<M.length;ge++){const he=M[ge],Be=ae[ge];F=F.replaceGeometry(he,Be.geometry)}}return{updatedData:F.getObject(),editType:S,editContext:{featureIndexes:M}}}}class ModifyMode extends GeoJsonEditMode{getGuides(s){var P;const f=[],{data:_,lastPointerMoveEvent:S}=s,{features:T}=_,F=S&&S.picks,M=S&&S.mapCoords;for(const H of s.selectedIndexes)if(H<T.length){const{geometry:J}=T[H];f.push(...getEditHandlesForGeometry(J,H))}else console.warn(`selectedFeatureIndexes out of range ${H}`);if(F&&F.length&&M){const J=!getPickedExistingEditHandle(F)&&F.find(K=>!K.isGuide);if(J&&!J.object.geometry.type.includes("Point")&&!((P=s.modeConfig)!=null&&P.lockRectangles&&J.object.properties.shape==="Rectangle")&&s.selectedIndexes.includes(J.index)){let K=null,oe=[];const se=point$a(M);if(recursivelyTraverseNestedArrays(J.object.geometry.coordinates,[],(ae,ge)=>{const he=lineString$4(ae),Be=this.getNearestPoint(he,se,s.modeConfig&&s.modeConfig.viewport);(!K||Be.properties.dist<K.properties.dist)&&(K=Be,oe=ge)}),K){const{geometry:{coordinates:ae},properties:{index:ge}}=K;f.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:J.index,positionIndexes:[...oe,ge+1]},geometry:{type:"Point",coordinates:ae}})}}}return{type:"FeatureCollection",features:f}}getNearestPoint(s,f,_){const{coordinates:S}=s.geometry;if(S.some(T=>T.length>2)){if(_)return nearestPointOnProjectedLine(s,f,_);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return nearestPointOnLine$1(s,f,_)}handleClick(s,f){var T;const _=getPickedExistingEditHandle(s.picks),S=getPickedIntermediateEditHandle(s.picks);if(_){const{featureIndex:F,positionIndexes:M}=_.properties;let P;try{P=new ImmutableFeatureCollection(f.data).removePosition(F,M).getObject()}catch{}P&&f.onEdit({updatedData:P,editType:"removePosition",editContext:{featureIndexes:[F],positionIndexes:M,position:_.geometry.coordinates}})}else if(S){const{featureIndex:F,positionIndexes:M}=S.properties,P=f.data.features[F];if(!((T=f.modeConfig)!=null&&T.lockRectangles&&(P==null?void 0:P.properties.shape)==="Rectangle")){const J=new ImmutableFeatureCollection(f.data).addPosition(F,M,S.geometry.coordinates).getObject();J&&f.onEdit({updatedData:J,editType:"addPosition",editContext:{featureIndexes:[F],positionIndexes:M,position:S.geometry.coordinates}})}}}handleDragging(s,f){const _=getPickedEditHandle(s.pointerDownPicks);_&&(s.cancelPan(),this._dragEditHandle("movePosition",f,_,s))}_dragEditHandle(s,f,_,S){var P;const T=_.properties,F=f.data.features[T.featureIndex];let M;if((P=f.modeConfig)!=null&&P.lockRectangles&&F.properties.shape==="Rectangle"){const H=updateRectanglePosition(F,T.positionIndexes[1],S.mapCoords);M=new ImmutableFeatureCollection(f.data).replaceGeometry(T.featureIndex,{coordinates:H,type:"Polygon"}).getObject()}else M=new ImmutableFeatureCollection(f.data).replacePosition(T.featureIndex,T.positionIndexes,S.mapCoords).getObject();f.onEdit({updatedData:M,editType:s,editContext:{featureIndexes:[T.featureIndex],positionIndexes:T.positionIndexes,position:S.mapCoords}})}handlePointerMove(s,f){const _=this.getCursor(s);f.onUpdateCursor(_)}handleStartDragging(s,f){const _=f.selectedIndexes,S=getPickedIntermediateEditHandle(s.picks);if(_.length&&S){const T=S.properties,F=new ImmutableFeatureCollection(f.data).addPosition(T.featureIndex,T.positionIndexes,s.mapCoords).getObject();f.onEdit({updatedData:F,editType:"addPosition",editContext:{featureIndexes:[T.featureIndex],positionIndexes:T.positionIndexes,position:s.mapCoords}})}}handleStopDragging(s,f){const _=f.selectedIndexes,S=getPickedEditHandle(s.picks);_.length&&S&&this._dragEditHandle("finishMovePosition",f,S,s)}getCursor(s){const f=s&&s.picks||[];return getPickedEditHandles(f).length?"cell":null}}function feature$8(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function point$5(d,s,f){if(f===void 0&&(f={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$6(d[0])||!isNumber$6(d[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:d};return feature$8(_,s,f)}function isNumber$6(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function coordEach$3(d,s,f){if(d!==null)for(var _,S,T,F,M,P,H,J=0,K=0,oe,se=d.type,ae=se==="FeatureCollection",ge=se==="Feature",he=ae?d.features.length:1,Be=0;Be<he;Be++){H=ae?d.features[Be].geometry:ge?d.geometry:d,oe=H?H.type==="GeometryCollection":!1,M=oe?H.geometries.length:1;for(var pe=0;pe<M;pe++){var be=0,Re=0;if(F=oe?H.geometries[pe]:H,F!==null){P=F.coordinates;var Fe=F.type;switch(J=Fe==="Polygon"||Fe==="MultiPolygon"?1:0,Fe){case null:break;case"Point":if(s(P,K,Be,be,Re)===!1)return!1;K++,be++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,Be,be,Re)===!1)return!1;K++,Fe==="MultiPoint"&&be++}Fe==="LineString"&&be++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,Be,be,Re)===!1)return!1;K++}Fe==="MultiLineString"&&be++,Fe==="Polygon"&&Re++}Fe==="Polygon"&&be++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(Re=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,Be,be,Re)===!1)return!1;K++}Re++}be++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach$3(F.geometries[_],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function centroid(d,s){s===void 0&&(s={});var f=0,_=0,S=0;return coordEach$3(d,function(T){f+=T[0],_+=T[1],S++}),point$5([f/S,_/S],s.properties)}function feature$7(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function lineString$2(d,s,f){if(f===void 0&&(f={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");var _={type:"LineString",coordinates:d};return feature$7(_,s,f)}function featureCollection$3(d,s){s===void 0&&(s={});var f={type:"FeatureCollection"};return s.id&&(f.id=s.id),s.bbox&&(f.bbox=s.bbox),f.features=d,f}function multiLineString(d,s,f){f===void 0&&(f={});var _={type:"MultiLineString",coordinates:d};return feature$7(_,s,f)}function getGeom$2(d){return d.type==="Feature"?d.geometry:d}function turfPolygonToLine(d,s){s===void 0&&(s={});var f=getGeom$2(d);switch(!s.properties&&d.type==="Feature"&&(s.properties=d.properties),f.type){case"Polygon":return polygonToLine(f,s);case"MultiPolygon":return multiPolygonToLine(f,s);default:throw new Error("invalid poly")}}function polygonToLine(d,s){s===void 0&&(s={});var f=getGeom$2(d),_=f.coordinates,S=s.properties?s.properties:d.type==="Feature"?d.properties:{};return coordsToLine(_,S)}function multiPolygonToLine(d,s){s===void 0&&(s={});var f=getGeom$2(d),_=f.coordinates,S=s.properties?s.properties:d.type==="Feature"?d.properties:{},T=[];return _.forEach(function(F){T.push(coordsToLine(F,S))}),featureCollection$3(T)}function coordsToLine(d,s){return d.length>1?multiLineString(d,s):lineString$2(d[0],s)}function clone$1(d){if(!d)throw new Error("geojson is required");switch(d.type){case"Feature":return cloneFeature$1(d);case"FeatureCollection":return cloneFeatureCollection$1(d);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return cloneGeometry$1(d);default:throw new Error("unknown GeoJSON type")}}function cloneFeature$1(d){var s={type:"Feature"};return Object.keys(d).forEach(function(f){switch(f){case"type":case"properties":case"geometry":return;default:s[f]=d[f]}}),s.properties=cloneProperties$1(d.properties),s.geometry=cloneGeometry$1(d.geometry),s}function cloneProperties$1(d){var s={};return d&&Object.keys(d).forEach(function(f){var _=d[f];typeof _=="object"?_===null?s[f]=null:Array.isArray(_)?s[f]=_.map(function(S){return S}):s[f]=cloneProperties$1(_):s[f]=_}),s}function cloneFeatureCollection$1(d){var s={type:"FeatureCollection"};return Object.keys(d).forEach(function(f){switch(f){case"type":case"features":return;default:s[f]=d[f]}}),s.features=d.features.map(function(f){return cloneFeature$1(f)}),s}function cloneGeometry$1(d){var s={type:d.type};return d.bbox&&(s.bbox=d.bbox),d.type==="GeometryCollection"?(s.geometries=d.geometries.map(function(f){return cloneGeometry$1(f)}),s):(s.coordinates=deepSlice$1(d.coordinates),s)}function deepSlice$1(d){var s=d;return typeof s[0]!="object"?s.slice():s.map(function(f){return deepSlice$1(f)})}function feature$6(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties={},_.geometry=d,_}function point$4(d,s,f){if(f===void 0&&(f={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$5(d[0])||!isNumber$5(d[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:d};return feature$6(_,s,f)}function isNumber$5(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function isObject$5(d){return!!d&&d.constructor===Object}function coordEach$2(d,s,f){if(d!==null)for(var _,S,T,F,M,P,H,J=0,K=0,oe,se=d.type,ae=se==="FeatureCollection",ge=se==="Feature",he=ae?d.features.length:1,Be=0;Be<he;Be++){H=ae?d.features[Be].geometry:ge?d.geometry:d,oe=H?H.type==="GeometryCollection":!1,M=oe?H.geometries.length:1;for(var pe=0;pe<M;pe++){var be=0,Re=0;if(F=oe?H.geometries[pe]:H,F!==null){P=F.coordinates;var Fe=F.type;switch(J=0,Fe){case null:break;case"Point":if(s(P,K,Be,be,Re)===!1)return!1;K++,be++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,Be,be,Re)===!1)return!1;K++,Fe==="MultiPoint"&&be++}Fe==="LineString"&&be++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,Be,be,Re)===!1)return!1;K++}Fe==="MultiLineString"&&be++,Fe==="Polygon"&&Re++}Fe==="Polygon"&&be++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(Re=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,Be,be,Re)===!1)return!1;K++}Re++}be++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach$2(F.geometries[_],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function featureEach$3(d,s){if(d.type==="Feature")s(d,0);else if(d.type==="FeatureCollection")for(var f=0;f<d.features.length&&s(d.features[f],f)!==!1;f++);}function getCoord$2(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function getCoords$4(d){if(Array.isArray(d))return d;if(d.type==="Feature"){if(d.geometry!==null)return d.geometry.coordinates}else if(d.coordinates)return d.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function getType(d,s){return d.type==="FeatureCollection"?"FeatureCollection":d.type==="GeometryCollection"?"GeometryCollection":d.type==="Feature"&&d.geometry!==null?d.geometry.type:d.type}function transformScale(d,s,f){if(f=f||{},!isObject$5(f))throw new Error("options is invalid");var _=f.origin,S=f.mutate;if(!d)throw new Error("geojson required");if(typeof s!="number"||s===0)throw new Error("invalid factor");var T=Array.isArray(_)||typeof _=="object";return S!==!0&&(d=clone$1(d)),d.type==="FeatureCollection"&&!T?(featureEach$3(d,function(F,M){d.features[M]=scale(F,s,_)}),d):scale(d,s,_)}function scale(d,s,f){var _=getType(d)==="Point";return f=defineOrigin(d,f),s===1||_||coordEach$2(d,function(S){var T=rhumbDistance(f,S),F=rhumbBearing(f,S),M=T*s,P=getCoords$4(rhumbDestination(f,M,F));S[0]=P[0],S[1]=P[1],S.length===3&&(S[2]*=s)}),d}function defineOrigin(d,s){if(s==null&&(s="centroid"),Array.isArray(s)||typeof s=="object")return getCoord$2(s);var f=d.bbox?d.bbox:bbox$1(d),_=f[0],S=f[1],T=f[2],F=f[3];switch(s){case"sw":case"southwest":case"westsouth":case"bottomleft":return point$4([_,S]);case"se":case"southeast":case"eastsouth":case"bottomright":return point$4([T,S]);case"nw":case"northwest":case"westnorth":case"topleft":return point$4([_,F]);case"ne":case"northeast":case"eastnorth":case"topright":return point$4([T,F]);case"center":return center(d);case void 0:case null:case"centroid":return centroid(d);default:throw new Error("invalid origin")}}class ScaleMode extends GeoJsonEditMode{constructor(){super(...arguments);Bt(this,"_geometryBeingScaled");Bt(this,"_selectedEditHandle");Bt(this,"_cornerGuidePoints",[]);Bt(this,"_cursor");Bt(this,"_isScaling",!1);Bt(this,"_isSinglePointGeometrySelected",f=>{const{features:_}=f||{};if(Array.isArray(_)&&_.length===1){const{type:S}=getGeom$3(_[0]);return S==="Point"}return!1});Bt(this,"_getOppositeScaleHandle",f=>{const _=f&&f.properties&&Array.isArray(f.properties.positionIndexes)&&f.properties.positionIndexes[0];if(typeof _!="number")return null;const S=this._cornerGuidePoints.length,T=(_+S/2)%S;return this._cornerGuidePoints.find(F=>Array.isArray(F.properties.positionIndexes)?F.properties.positionIndexes[0]===T:!1)||null});Bt(this,"_getUpdatedData",(f,_)=>{let S=new ImmutableFeatureCollection(f.data);const T=f.selectedIndexes;for(let F=0;F<T.length;F++){const M=T[F],P=_.features[F];S=S.replaceGeometry(M,P.geometry)}return S.getObject()});Bt(this,"isEditHandleSelected",()=>!!this._selectedEditHandle);Bt(this,"getScaleAction",(f,_,S,T)=>{if(!this._selectedEditHandle)return null;const F=this._getOppositeScaleHandle(this._selectedEditHandle),M=getCoord$5(F),P=getScaleFactor(M,f,_),H=transformScale(this._geometryBeingScaled,P,{origin:M});return{updatedData:this._getUpdatedData(T,H),editType:S,editContext:{featureIndexes:T.selectedIndexes}}});Bt(this,"updateCursor",f=>{if(this._selectedEditHandle){this._cursor&&f.onUpdateCursor(this._cursor);const _=this.getSelectedFeaturesAsFeatureCollection(f),S=centroid(_),T=bearing(S,this._selectedEditHandle),F=T<0?T+180:T;F>=0&&F<=90||F>=180&&F<=270?(this._cursor="nesw-resize",f.onUpdateCursor("nesw-resize")):(this._cursor="nwse-resize",f.onUpdateCursor("nwse-resize"))}else f.onUpdateCursor(null),this._cursor=null})}handlePointerMove(f,_){if(!this._isScaling){const S=getPickedEditHandle(f.picks);this._selectedEditHandle=S&&S.properties.editHandleType==="scale"?S:null,this.updateCursor(_)}}handleStartDragging(f,_){this._selectedEditHandle&&(this._isScaling=!0,this._geometryBeingScaled=this.getSelectedFeaturesAsFeatureCollection(_))}handleDragging(f,_){if(!this._isScaling)return;_.onUpdateCursor(this._cursor);const S=this.getScaleAction(f.pointerDownMapCoords,f.mapCoords,"scaling",_);S&&_.onEdit(S),f.cancelPan()}handleStopDragging(f,_){if(this._isScaling){const S=this.getScaleAction(f.pointerDownMapCoords,f.mapCoords,"scaled",_);S&&_.onEdit(S),_.onUpdateCursor(null),this._geometryBeingScaled=null,this._selectedEditHandle=null,this._cursor=null,this._isScaling=!1}}getGuides(f){this._cornerGuidePoints=[];const _=this.getSelectedFeaturesAsFeatureCollection(f);if(this._isSinglePointGeometrySelected(_))return{type:"FeatureCollection",features:[]};const S=bboxPolygon(bbox$1(_));S.properties.mode="scale";const T=[];return coordEach$4(S,(F,M)=>{if(M<4){const P=point$a(F,{guideType:"editHandle",editHandleType:"scale",positionIndexes:[M]});T.push(P)}}),this._cornerGuidePoints=T,featureCollection$5([turfPolygonToLine(S),...this._cornerGuidePoints])}}function getScaleFactor(d,s,f){const _=distance(d,s);return distance(d,f)/_}function clone(d){if(!d)throw new Error("geojson is required");switch(d.type){case"Feature":return cloneFeature(d);case"FeatureCollection":return cloneFeatureCollection(d);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return cloneGeometry(d);default:throw new Error("unknown GeoJSON type")}}function cloneFeature(d){var s={type:"Feature"};return Object.keys(d).forEach(function(f){switch(f){case"type":case"properties":case"geometry":return;default:s[f]=d[f]}}),s.properties=cloneProperties(d.properties),s.geometry=cloneGeometry(d.geometry),s}function cloneProperties(d){var s={};return d&&Object.keys(d).forEach(function(f){var _=d[f];typeof _=="object"?_===null?s[f]=null:Array.isArray(_)?s[f]=_.map(function(S){return S}):s[f]=cloneProperties(_):s[f]=_}),s}function cloneFeatureCollection(d){var s={type:"FeatureCollection"};return Object.keys(d).forEach(function(f){switch(f){case"type":case"features":return;default:s[f]=d[f]}}),s.features=d.features.map(function(f){return cloneFeature(f)}),s}function cloneGeometry(d){var s={type:d.type};return d.bbox&&(s.bbox=d.bbox),d.type==="GeometryCollection"?(s.geometries=d.geometries.map(function(f){return cloneGeometry(f)}),s):(s.coordinates=deepSlice(d.coordinates),s)}function deepSlice(d){var s=d;return typeof s[0]!="object"?s.slice():s.map(function(f){return deepSlice(f)})}function isObject$4(d){return!!d&&d.constructor===Object}function coordEach$1(d,s,f){if(d!==null)for(var _,S,T,F,M,P,H,J=0,K=0,oe,se=d.type,ae=se==="FeatureCollection",ge=se==="Feature",he=ae?d.features.length:1,Be=0;Be<he;Be++){H=ae?d.features[Be].geometry:ge?d.geometry:d,oe=H?H.type==="GeometryCollection":!1,M=oe?H.geometries.length:1;for(var pe=0;pe<M;pe++){var be=0,Re=0;if(F=oe?H.geometries[pe]:H,F!==null){P=F.coordinates;var Fe=F.type;switch(J=0,Fe){case null:break;case"Point":if(s(P,K,Be,be,Re)===!1)return!1;K++,be++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,Be,be,Re)===!1)return!1;K++,Fe==="MultiPoint"&&be++}Fe==="LineString"&&be++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,Be,be,Re)===!1)return!1;K++}Fe==="MultiLineString"&&be++,Fe==="Polygon"&&Re++}Fe==="Polygon"&&be++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(Re=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,Be,be,Re)===!1)return!1;K++}Re++}be++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach$1(F.geometries[_],s)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function getCoords$3(d){if(Array.isArray(d))return d;if(d.type==="Feature"){if(d.geometry!==null)return d.geometry.coordinates}else if(d.coordinates)return d.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function transformRotate(d,s,f){if(f=f||{},!isObject$4(f))throw new Error("options is invalid");var _=f.pivot,S=f.mutate;if(!d)throw new Error("geojson is required");if(s==null||isNaN(s))throw new Error("angle is required");return s===0||(_||(_=centroid(d)),(S===!1||S===void 0)&&(d=clone(d)),coordEach$1(d,function(T){var F=rhumbBearing(_,T),M=F+s,P=rhumbDistance(_,T),H=getCoords$3(rhumbDestination(_,P,M));T[0]=H[0],T[1]=H[1]})),d}class RotateMode extends GeoJsonEditMode{constructor(){super(...arguments);Bt(this,"_selectedEditHandle");Bt(this,"_geometryBeingRotated");Bt(this,"_isRotating",!1);Bt(this,"_isSinglePointGeometrySelected",f=>{const{features:_}=f||{};if(Array.isArray(_)&&_.length===1){const{type:S}=getGeom$3(_[0]);return S==="Point"}return!1});Bt(this,"getIsRotating",()=>this._isRotating)}getGuides(f){const _=this._geometryBeingRotated||this.getSelectedFeaturesAsFeatureCollection(f);if(this._isSinglePointGeometrySelected(_))return{type:"FeatureCollection",features:[]};if(this._isRotating)return featureCollection$5([centroid(_)]);const S=bboxPolygon(bbox$1(_));let T=null,F=null,M=0;coordEach$4(S,oe=>{if(T){const se=getIntermediatePosition(oe,T);(!F||se[1]>F[1])&&(F=se);const ae=distance(oe,T);M=Math.max(M,ae)}T=oe});const P=F&&[F[0],F[1]+M/1e3],H=lineString$4([F,P]),J=point$a(P,{guideType:"editHandle",editHandleType:"rotate"}),K=[turfPolygonToLine(S),J,H];return featureCollection$5(K)}handleDragging(f,_){if(!this._isRotating)return;const S=this.getRotateAction(f.pointerDownMapCoords,f.mapCoords,"rotating",_);S&&_.onEdit(S),f.cancelPan()}handlePointerMove(f,_){if(!this._isRotating){const S=getPickedEditHandle(f.picks);this._selectedEditHandle=S&&S.properties.editHandleType==="rotate"?S:null}this.updateCursor(_)}handleStartDragging(f,_){this._selectedEditHandle&&(this._isRotating=!0,this._geometryBeingRotated=this.getSelectedFeaturesAsFeatureCollection(_))}handleStopDragging(f,_){if(this._isRotating){const S=this.getRotateAction(f.pointerDownMapCoords,f.mapCoords,"rotated",_);S&&_.onEdit(S),this._geometryBeingRotated=null,this._selectedEditHandle=null,this._isRotating=!1}}updateCursor(f){this._selectedEditHandle?f.onUpdateCursor("crosshair"):f.onUpdateCursor(null)}getRotateAction(f,_,S,T){if(!this._geometryBeingRotated)return null;const F=centroid(this._geometryBeingRotated),M=getRotationAngle(F,f,_),P=transformRotate(this._geometryBeingRotated,M,{pivot:F});let H=new ImmutableFeatureCollection(T.data);const J=T.selectedIndexes;for(let K=0;K<J.length;K++){const oe=J[K],se=P.features[K];H=H.replaceGeometry(oe,se.geometry)}return{updatedData:H.getObject(),editType:S,editContext:{featureIndexes:J}}}}function getRotationAngle(d,s,f){const _=bearing(d,s);return bearing(d,f)-_}class DuplicateMode extends TranslateMode{handleStartDragging(s,f){super.handleStartDragging(s,f),this._geometryBeforeTranslate&&f.onEdit(this.getAddManyFeaturesAction(this._geometryBeforeTranslate,f.data))}updateCursor(s){this._isTranslatable?s.onUpdateCursor("copy"):s.onUpdateCursor(null)}}function getCoord$1(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function getGeom$1(d){return d.type==="Feature"?d.geometry:d}function booleanPointInPolygon(d,s,f){if(f===void 0&&(f={}),!d)throw new Error("point is required");if(!s)throw new Error("polygon is required");var _=getCoord$1(d),S=getGeom$1(s),T=S.type,F=s.bbox,M=S.coordinates;if(F&&inBBox(_,F)===!1)return!1;T==="Polygon"&&(M=[M]);for(var P=!1,H=0;H<M.length&&!P;H++)if(inRing(_,M[H][0],f.ignoreBoundary)){for(var J=!1,K=1;K<M[H].length&&!J;)inRing(_,M[H][K],!f.ignoreBoundary)&&(J=!0),K++;J||(P=!0)}return P}function inRing(d,s,f){var _=!1;s[0][0]===s[s.length-1][0]&&s[0][1]===s[s.length-1][1]&&(s=s.slice(0,s.length-1));for(var S=0,T=s.length-1;S<s.length;T=S++){var F=s[S][0],M=s[S][1],P=s[T][0],H=s[T][1],J=d[1]*(F-P)+M*(P-d[0])+H*(d[0]-F)===0&&(F-d[0])*(P-d[0])<=0&&(M-d[1])*(H-d[1])<=0;if(J)return!f;var K=M>d[1]!=H>d[1]&&d[0]<(P-F)*(d[1]-M)/(H-M)+F;K&&(_=!_)}return _}function inBBox(d,s){return s[0]<=d[0]&&s[1]<=d[1]&&s[2]>=d[0]&&s[3]>=d[1]}function feature$5(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties={},_.geometry=d,_}function point$3(d,s,f){if(f===void 0&&(f={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$4(d[0])||!isNumber$4(d[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:d};return feature$5(_,s,f)}function featureCollection$2(d,s){s===void 0&&(s={});var f={type:"FeatureCollection"};return s.id&&(f.id=s.id),s.bbox&&(f.bbox=s.bbox),f.features=d,f}function isNumber$4(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function getCoords$2(d){if(Array.isArray(d))return d;if(d.type==="Feature"){if(d.geometry!==null)return d.geometry.coordinates}else if(d.coordinates)return d.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function feature$4(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function lineString$1(d,s,f){if(f===void 0&&(f={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");var _={type:"LineString",coordinates:d};return feature$4(_,s,f)}function featureCollection$1(d,s){s===void 0&&(s={});var f={type:"FeatureCollection"};return s.id&&(f.id=s.id),s.bbox&&(f.bbox=s.bbox),f.features=d,f}function getCoords$1(d){if(Array.isArray(d))return d;if(d.type==="Feature"){if(d.geometry!==null)return d.geometry.coordinates}else if(d.coordinates)return d.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function geomEach$3(d,s){var f,_,S,T,F,M,P,H,J,K,oe=0,se=d.type==="FeatureCollection",ae=d.type==="Feature",ge=se?d.features.length:1;for(f=0;f<ge;f++){for(M=se?d.features[f].geometry:ae?d.geometry:d,H=se?d.features[f].properties:ae?d.properties:{},J=se?d.features[f].bbox:ae?d.bbox:void 0,K=se?d.features[f].id:ae?d.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,oe,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,oe,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],oe,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}oe++}}function flattenEach$2(d,s){geomEach$3(d,function(f,_,S,T,F){var M=f===null?null:f.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return s(feature$4(f,S,{bbox:T,id:F}),_,0)===!1?!1:void 0}var P;switch(M){case"MultiPoint":P="Point";break;case"MultiLineString":P="LineString";break;case"MultiPolygon":P="Polygon";break}for(var H=0;H<f.coordinates.length;H++){var J=f.coordinates[H],K={type:P,coordinates:J};if(s(feature$4(K,S),_,H)===!1)return!1}})}function lineSegment(d){if(!d)throw new Error("geojson is required");var s=[];return flattenEach$2(d,function(f){lineSegmentFeature(f,s)}),featureCollection$1(s)}function lineSegmentFeature(d,s){var f=[],_=d.geometry;if(_!==null){switch(_.type){case"Polygon":f=getCoords$1(_);break;case"LineString":f=[getCoords$1(_)]}f.forEach(function(S){var T=createSegments(S,d.properties);T.forEach(function(F){F.id=s.length,s.push(F)})})}}function createSegments(d,s){var f=[];return d.reduce(function(_,S){var T=lineString$1([_,S],s);return T.bbox=bbox(_,S),f.push(T),S}),f}function bbox(d,s){var f=d[0],_=d[1],S=s[0],T=s[1],F=f<S?f:S,M=_<T?_:T,P=f>S?f:S,H=_>T?_:T;return[F,M,P,H]}function featureEach$2(d,s){if(d.type==="Feature")s(d,0);else if(d.type==="FeatureCollection")for(var f=0;f<d.features.length&&s(d.features[f],f)!==!1;f++);}var geojsonRbush$1={exports:{}},rbush_min={exports:{}};(function(d,s){(function(f,_){d.exports=_()})(commonjsGlobal,function(){function f(pe,be,Re,Fe,Me){(function ve(At,Ct,Rt,It,xt){for(;It>Rt;){if(It-Rt>600){var wt=It-Rt+1,Ft=Ct-Rt+1,jt=Math.log(wt),ta=.5*Math.exp(2*jt/3),Qn=.5*Math.sqrt(jt*ta*(wt-ta)/wt)*(Ft-wt/2<0?-1:1),ca=Math.max(Rt,Math.floor(Ct-Ft*ta/wt+Qn)),Jn=Math.min(It,Math.floor(Ct+(wt-Ft)*ta/wt+Qn));ve(At,Ct,ca,Jn,xt)}var wA=At[Ct],LA=Rt,ZA=It;for(_(At,Rt,Ct),xt(At[It],wA)>0&&_(At,Rt,It);LA<ZA;){for(_(At,LA,ZA),LA++,ZA--;xt(At[LA],wA)<0;)LA++;for(;xt(At[ZA],wA)>0;)ZA--}xt(At[Rt],wA)===0?_(At,Rt,ZA):_(At,++ZA,It),ZA<=Ct&&(Rt=ZA+1),Ct<=ZA&&(It=ZA-1)}})(pe,be,Re||0,Fe||pe.length-1,Me||S)}function _(pe,be,Re){var Fe=pe[be];pe[be]=pe[Re],pe[Re]=Fe}function S(pe,be){return pe<be?-1:pe>be?1:0}var T=function(pe){pe===void 0&&(pe=9),this._maxEntries=Math.max(4,pe),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function F(pe,be,Re){if(!Re)return be.indexOf(pe);for(var Fe=0;Fe<be.length;Fe++)if(Re(pe,be[Fe]))return Fe;return-1}function M(pe,be){P(pe,0,pe.children.length,be,pe)}function P(pe,be,Re,Fe,Me){Me||(Me=he(null)),Me.minX=1/0,Me.minY=1/0,Me.maxX=-1/0,Me.maxY=-1/0;for(var ve=be;ve<Re;ve++){var At=pe.children[ve];H(Me,pe.leaf?Fe(At):At)}return Me}function H(pe,be){return pe.minX=Math.min(pe.minX,be.minX),pe.minY=Math.min(pe.minY,be.minY),pe.maxX=Math.max(pe.maxX,be.maxX),pe.maxY=Math.max(pe.maxY,be.maxY),pe}function J(pe,be){return pe.minX-be.minX}function K(pe,be){return pe.minY-be.minY}function oe(pe){return(pe.maxX-pe.minX)*(pe.maxY-pe.minY)}function se(pe){return pe.maxX-pe.minX+(pe.maxY-pe.minY)}function ae(pe,be){return pe.minX<=be.minX&&pe.minY<=be.minY&&be.maxX<=pe.maxX&&be.maxY<=pe.maxY}function ge(pe,be){return be.minX<=pe.maxX&&be.minY<=pe.maxY&&be.maxX>=pe.minX&&be.maxY>=pe.minY}function he(pe){return{children:pe,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Be(pe,be,Re,Fe,Me){for(var ve=[be,Re];ve.length;)if(!((Re=ve.pop())-(be=ve.pop())<=Fe)){var At=be+Math.ceil((Re-be)/Fe/2)*Fe;f(pe,At,be,Re,Me),ve.push(be,At,At,Re)}}return T.prototype.all=function(){return this._all(this.data,[])},T.prototype.search=function(pe){var be=this.data,Re=[];if(!ge(pe,be))return Re;for(var Fe=this.toBBox,Me=[];be;){for(var ve=0;ve<be.children.length;ve++){var At=be.children[ve],Ct=be.leaf?Fe(At):At;ge(pe,Ct)&&(be.leaf?Re.push(At):ae(pe,Ct)?this._all(At,Re):Me.push(At))}be=Me.pop()}return Re},T.prototype.collides=function(pe){var be=this.data;if(!ge(pe,be))return!1;for(var Re=[];be;){for(var Fe=0;Fe<be.children.length;Fe++){var Me=be.children[Fe],ve=be.leaf?this.toBBox(Me):Me;if(ge(pe,ve)){if(be.leaf||ae(pe,ve))return!0;Re.push(Me)}}be=Re.pop()}return!1},T.prototype.load=function(pe){if(!pe||!pe.length)return this;if(pe.length<this._minEntries){for(var be=0;be<pe.length;be++)this.insert(pe[be]);return this}var Re=this._build(pe.slice(),0,pe.length-1,0);if(this.data.children.length)if(this.data.height===Re.height)this._splitRoot(this.data,Re);else{if(this.data.height<Re.height){var Fe=this.data;this.data=Re,Re=Fe}this._insert(Re,this.data.height-Re.height-1,!0)}else this.data=Re;return this},T.prototype.insert=function(pe){return pe&&this._insert(pe,this.data.height-1),this},T.prototype.clear=function(){return this.data=he([]),this},T.prototype.remove=function(pe,be){if(!pe)return this;for(var Re,Fe,Me,ve=this.data,At=this.toBBox(pe),Ct=[],Rt=[];ve||Ct.length;){if(ve||(ve=Ct.pop(),Fe=Ct[Ct.length-1],Re=Rt.pop(),Me=!0),ve.leaf){var It=F(pe,ve.children,be);if(It!==-1)return ve.children.splice(It,1),Ct.push(ve),this._condense(Ct),this}Me||ve.leaf||!ae(ve,At)?Fe?(Re++,ve=Fe.children[Re],Me=!1):ve=null:(Ct.push(ve),Rt.push(Re),Re=0,Fe=ve,ve=ve.children[0])}return this},T.prototype.toBBox=function(pe){return pe},T.prototype.compareMinX=function(pe,be){return pe.minX-be.minX},T.prototype.compareMinY=function(pe,be){return pe.minY-be.minY},T.prototype.toJSON=function(){return this.data},T.prototype.fromJSON=function(pe){return this.data=pe,this},T.prototype._all=function(pe,be){for(var Re=[];pe;)pe.leaf?be.push.apply(be,pe.children):Re.push.apply(Re,pe.children),pe=Re.pop();return be},T.prototype._build=function(pe,be,Re,Fe){var Me,ve=Re-be+1,At=this._maxEntries;if(ve<=At)return M(Me=he(pe.slice(be,Re+1)),this.toBBox),Me;Fe||(Fe=Math.ceil(Math.log(ve)/Math.log(At)),At=Math.ceil(ve/Math.pow(At,Fe-1))),(Me=he([])).leaf=!1,Me.height=Fe;var Ct=Math.ceil(ve/At),Rt=Ct*Math.ceil(Math.sqrt(At));Be(pe,be,Re,Rt,this.compareMinX);for(var It=be;It<=Re;It+=Rt){var xt=Math.min(It+Rt-1,Re);Be(pe,It,xt,Ct,this.compareMinY);for(var wt=It;wt<=xt;wt+=Ct){var Ft=Math.min(wt+Ct-1,xt);Me.children.push(this._build(pe,wt,Ft,Fe-1))}}return M(Me,this.toBBox),Me},T.prototype._chooseSubtree=function(pe,be,Re,Fe){for(;Fe.push(be),!be.leaf&&Fe.length-1!==Re;){for(var Me=1/0,ve=1/0,At=void 0,Ct=0;Ct<be.children.length;Ct++){var Rt=be.children[Ct],It=oe(Rt),xt=(wt=pe,Ft=Rt,(Math.max(Ft.maxX,wt.maxX)-Math.min(Ft.minX,wt.minX))*(Math.max(Ft.maxY,wt.maxY)-Math.min(Ft.minY,wt.minY))-It);xt<ve?(ve=xt,Me=It<Me?It:Me,At=Rt):xt===ve&&It<Me&&(Me=It,At=Rt)}be=At||be.children[0]}var wt,Ft;return be},T.prototype._insert=function(pe,be,Re){var Fe=Re?pe:this.toBBox(pe),Me=[],ve=this._chooseSubtree(Fe,this.data,be,Me);for(ve.children.push(pe),H(ve,Fe);be>=0&&Me[be].children.length>this._maxEntries;)this._split(Me,be),be--;this._adjustParentBBoxes(Fe,Me,be)},T.prototype._split=function(pe,be){var Re=pe[be],Fe=Re.children.length,Me=this._minEntries;this._chooseSplitAxis(Re,Me,Fe);var ve=this._chooseSplitIndex(Re,Me,Fe),At=he(Re.children.splice(ve,Re.children.length-ve));At.height=Re.height,At.leaf=Re.leaf,M(Re,this.toBBox),M(At,this.toBBox),be?pe[be-1].children.push(At):this._splitRoot(Re,At)},T.prototype._splitRoot=function(pe,be){this.data=he([pe,be]),this.data.height=pe.height+1,this.data.leaf=!1,M(this.data,this.toBBox)},T.prototype._chooseSplitIndex=function(pe,be,Re){for(var Fe,Me,ve,At,Ct,Rt,It,xt=1/0,wt=1/0,Ft=be;Ft<=Re-be;Ft++){var jt=P(pe,0,Ft,this.toBBox),ta=P(pe,Ft,Re,this.toBBox),Qn=(Me=jt,ve=ta,At=void 0,Ct=void 0,Rt=void 0,It=void 0,At=Math.max(Me.minX,ve.minX),Ct=Math.max(Me.minY,ve.minY),Rt=Math.min(Me.maxX,ve.maxX),It=Math.min(Me.maxY,ve.maxY),Math.max(0,Rt-At)*Math.max(0,It-Ct)),ca=oe(jt)+oe(ta);Qn<xt?(xt=Qn,Fe=Ft,wt=ca<wt?ca:wt):Qn===xt&&ca<wt&&(wt=ca,Fe=Ft)}return Fe||Re-be},T.prototype._chooseSplitAxis=function(pe,be,Re){var Fe=pe.leaf?this.compareMinX:J,Me=pe.leaf?this.compareMinY:K;this._allDistMargin(pe,be,Re,Fe)<this._allDistMargin(pe,be,Re,Me)&&pe.children.sort(Fe)},T.prototype._allDistMargin=function(pe,be,Re,Fe){pe.children.sort(Fe);for(var Me=this.toBBox,ve=P(pe,0,be,Me),At=P(pe,Re-be,Re,Me),Ct=se(ve)+se(At),Rt=be;Rt<Re-be;Rt++){var It=pe.children[Rt];H(ve,pe.leaf?Me(It):It),Ct+=se(ve)}for(var xt=Re-be-1;xt>=be;xt--){var wt=pe.children[xt];H(At,pe.leaf?Me(wt):wt),Ct+=se(At)}return Ct},T.prototype._adjustParentBBoxes=function(pe,be,Re){for(var Fe=Re;Fe>=0;Fe--)H(be[Fe],pe)},T.prototype._condense=function(pe){for(var be=pe.length-1,Re=void 0;be>=0;be--)pe[be].children.length===0?be>0?(Re=pe[be-1].children).splice(Re.indexOf(pe[be]),1):this.clear():M(pe[be],this.toBBox)},T})})(rbush_min);var rbush_minExports=rbush_min.exports,js$2={};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.earthRadius=63710088e-1,d.factors={centimeters:d.earthRadius*100,centimetres:d.earthRadius*100,degrees:d.earthRadius/111325,feet:d.earthRadius*3.28084,inches:d.earthRadius*39.37,kilometers:d.earthRadius/1e3,kilometres:d.earthRadius/1e3,meters:d.earthRadius,metres:d.earthRadius,miles:d.earthRadius/1609.344,millimeters:d.earthRadius*1e3,millimetres:d.earthRadius*1e3,nauticalmiles:d.earthRadius/1852,radians:1,yards:d.earthRadius*1.0936},d.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/d.earthRadius,yards:1.0936133},d.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(It,xt,wt){wt===void 0&&(wt={});var Ft={type:"Feature"};return(wt.id===0||wt.id)&&(Ft.id=wt.id),wt.bbox&&(Ft.bbox=wt.bbox),Ft.properties=xt||{},Ft.geometry=It,Ft}d.feature=s;function f(It,xt,wt){switch(It){case"Point":return _(xt).geometry;case"LineString":return M(xt).geometry;case"Polygon":return T(xt).geometry;case"MultiPoint":return K(xt).geometry;case"MultiLineString":return J(xt).geometry;case"MultiPolygon":return oe(xt).geometry;default:throw new Error(It+" is invalid")}}d.geometry=f;function _(It,xt,wt){if(wt===void 0&&(wt={}),!It)throw new Error("coordinates is required");if(!Array.isArray(It))throw new Error("coordinates must be an Array");if(It.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ve(It[0])||!ve(It[1]))throw new Error("coordinates must contain numbers");var Ft={type:"Point",coordinates:It};return s(Ft,xt,wt)}d.point=_;function S(It,xt,wt){return wt===void 0&&(wt={}),H(It.map(function(Ft){return _(Ft,xt)}),wt)}d.points=S;function T(It,xt,wt){wt===void 0&&(wt={});for(var Ft=0,jt=It;Ft<jt.length;Ft++){var ta=jt[Ft];if(ta.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Qn=0;Qn<ta[ta.length-1].length;Qn++)if(ta[ta.length-1][Qn]!==ta[0][Qn])throw new Error("First and last Position are not equivalent.")}var ca={type:"Polygon",coordinates:It};return s(ca,xt,wt)}d.polygon=T;function F(It,xt,wt){return wt===void 0&&(wt={}),H(It.map(function(Ft){return T(Ft,xt)}),wt)}d.polygons=F;function M(It,xt,wt){if(wt===void 0&&(wt={}),It.length<2)throw new Error("coordinates must be an array of two or more positions");var Ft={type:"LineString",coordinates:It};return s(Ft,xt,wt)}d.lineString=M;function P(It,xt,wt){return wt===void 0&&(wt={}),H(It.map(function(Ft){return M(Ft,xt)}),wt)}d.lineStrings=P;function H(It,xt){xt===void 0&&(xt={});var wt={type:"FeatureCollection"};return xt.id&&(wt.id=xt.id),xt.bbox&&(wt.bbox=xt.bbox),wt.features=It,wt}d.featureCollection=H;function J(It,xt,wt){wt===void 0&&(wt={});var Ft={type:"MultiLineString",coordinates:It};return s(Ft,xt,wt)}d.multiLineString=J;function K(It,xt,wt){wt===void 0&&(wt={});var Ft={type:"MultiPoint",coordinates:It};return s(Ft,xt,wt)}d.multiPoint=K;function oe(It,xt,wt){wt===void 0&&(wt={});var Ft={type:"MultiPolygon",coordinates:It};return s(Ft,xt,wt)}d.multiPolygon=oe;function se(It,xt,wt){wt===void 0&&(wt={});var Ft={type:"GeometryCollection",geometries:It};return s(Ft,xt,wt)}d.geometryCollection=se;function ae(It,xt){if(xt===void 0&&(xt=0),xt&&!(xt>=0))throw new Error("precision must be a positive number");var wt=Math.pow(10,xt||0);return Math.round(It*wt)/wt}d.round=ae;function ge(It,xt){xt===void 0&&(xt="kilometers");var wt=d.factors[xt];if(!wt)throw new Error(xt+" units is invalid");return It*wt}d.radiansToLength=ge;function he(It,xt){xt===void 0&&(xt="kilometers");var wt=d.factors[xt];if(!wt)throw new Error(xt+" units is invalid");return It/wt}d.lengthToRadians=he;function Be(It,xt){return be(he(It,xt))}d.lengthToDegrees=Be;function pe(It){var xt=It%360;return xt<0&&(xt+=360),xt}d.bearingToAzimuth=pe;function be(It){var xt=It%(2*Math.PI);return xt*180/Math.PI}d.radiansToDegrees=be;function Re(It){var xt=It%360;return xt*Math.PI/180}d.degreesToRadians=Re;function Fe(It,xt,wt){if(xt===void 0&&(xt="kilometers"),wt===void 0&&(wt="kilometers"),!(It>=0))throw new Error("length must be a positive number");return ge(he(It,xt),wt)}d.convertLength=Fe;function Me(It,xt,wt){if(xt===void 0&&(xt="meters"),wt===void 0&&(wt="kilometers"),!(It>=0))throw new Error("area must be a positive number");var Ft=d.areaFactors[xt];if(!Ft)throw new Error("invalid original units");var jt=d.areaFactors[wt];if(!jt)throw new Error("invalid final units");return It/Ft*jt}d.convertArea=Me;function ve(It){return!isNaN(It)&&It!==null&&!Array.isArray(It)}d.isNumber=ve;function At(It){return!!It&&It.constructor===Object}d.isObject=At;function Ct(It){if(!It)throw new Error("bbox is required");if(!Array.isArray(It))throw new Error("bbox must be an Array");if(It.length!==4&&It.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");It.forEach(function(xt){if(!ve(xt))throw new Error("bbox must only contain numbers")})}d.validateBBox=Ct;function Rt(It){if(!It)throw new Error("id is required");if(["string","number"].indexOf(typeof It)===-1)throw new Error("id must be a number or a string")}d.validateId=Rt})(js$2);var js$1={};Object.defineProperty(js$1,"__esModule",{value:!0});var helpers$1=js$2;function coordEach(d,s,f){if(d!==null)for(var _,S,T,F,M,P,H,J=0,K=0,oe,se=d.type,ae=se==="FeatureCollection",ge=se==="Feature",he=ae?d.features.length:1,Be=0;Be<he;Be++){H=ae?d.features[Be].geometry:ge?d.geometry:d,oe=H?H.type==="GeometryCollection":!1,M=oe?H.geometries.length:1;for(var pe=0;pe<M;pe++){var be=0,Re=0;if(F=oe?H.geometries[pe]:H,F!==null){P=F.coordinates;var Fe=F.type;switch(J=f&&(Fe==="Polygon"||Fe==="MultiPolygon")?1:0,Fe){case null:break;case"Point":if(s(P,K,Be,be,Re)===!1)return!1;K++,be++;break;case"LineString":case"MultiPoint":for(_=0;_<P.length;_++){if(s(P[_],K,Be,be,Re)===!1)return!1;K++,Fe==="MultiPoint"&&be++}Fe==="LineString"&&be++;break;case"Polygon":case"MultiLineString":for(_=0;_<P.length;_++){for(S=0;S<P[_].length-J;S++){if(s(P[_][S],K,Be,be,Re)===!1)return!1;K++}Fe==="MultiLineString"&&be++,Fe==="Polygon"&&Re++}Fe==="Polygon"&&be++;break;case"MultiPolygon":for(_=0;_<P.length;_++){for(Re=0,S=0;S<P[_].length;S++){for(T=0;T<P[_][S].length-J;T++){if(s(P[_][S][T],K,Be,be,Re)===!1)return!1;K++}Re++}be++}break;case"GeometryCollection":for(_=0;_<F.geometries.length;_++)if(coordEach(F.geometries[_],s,f)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function coordReduce(d,s,f,_){var S=f;return coordEach(d,function(T,F,M,P,H){F===0&&f===void 0?S=T:S=s(S,T,F,M,P,H)},_),S}function propEach(d,s){var f;switch(d.type){case"FeatureCollection":for(f=0;f<d.features.length&&s(d.features[f].properties,f)!==!1;f++);break;case"Feature":s(d.properties,0);break}}function propReduce(d,s,f){var _=f;return propEach(d,function(S,T){T===0&&f===void 0?_=S:_=s(_,S,T)}),_}function featureEach$1(d,s){if(d.type==="Feature")s(d,0);else if(d.type==="FeatureCollection")for(var f=0;f<d.features.length&&s(d.features[f],f)!==!1;f++);}function featureReduce(d,s,f){var _=f;return featureEach$1(d,function(S,T){T===0&&f===void 0?_=S:_=s(_,S,T)}),_}function coordAll(d){var s=[];return coordEach(d,function(f){s.push(f)}),s}function geomEach$2(d,s){var f,_,S,T,F,M,P,H,J,K,oe=0,se=d.type==="FeatureCollection",ae=d.type==="Feature",ge=se?d.features.length:1;for(f=0;f<ge;f++){for(M=se?d.features[f].geometry:ae?d.geometry:d,H=se?d.features[f].properties:ae?d.properties:{},J=se?d.features[f].bbox:ae?d.bbox:void 0,K=se?d.features[f].id:ae?d.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,oe,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,oe,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],oe,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}oe++}}function geomReduce$1(d,s,f){var _=f;return geomEach$2(d,function(S,T,F,M,P){T===0&&f===void 0?_=S:_=s(_,S,T,F,M,P)}),_}function flattenEach$1(d,s){geomEach$2(d,function(f,_,S,T,F){var M=f===null?null:f.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return s(helpers$1.feature(f,S,{bbox:T,id:F}),_,0)===!1?!1:void 0}var P;switch(M){case"MultiPoint":P="Point";break;case"MultiLineString":P="LineString";break;case"MultiPolygon":P="Polygon";break}for(var H=0;H<f.coordinates.length;H++){var J=f.coordinates[H],K={type:P,coordinates:J};if(s(helpers$1.feature(K,S),_,H)===!1)return!1}})}function flattenReduce(d,s,f){var _=f;return flattenEach$1(d,function(S,T,F){T===0&&F===0&&f===void 0?_=S:_=s(_,S,T,F)}),_}function segmentEach(d,s){flattenEach$1(d,function(f,_,S){var T=0;if(f.geometry){var F=f.geometry.type;if(!(F==="Point"||F==="MultiPoint")){var M,P=0,H=0,J=0;if(coordEach(f,function(K,oe,se,ae,ge){if(M===void 0||_>P||ae>H||ge>J){M=K,P=_,H=ae,J=ge,T=0;return}var he=helpers$1.lineString([M,K],f.properties);if(s(he,_,S,ge,T)===!1)return!1;T++,M=K})===!1)return!1}}})}function segmentReduce(d,s,f){var _=f,S=!1;return segmentEach(d,function(T,F,M,P,H){S===!1&&f===void 0?_=T:_=s(_,T,F,M,P,H),S=!0}),_}function lineEach(d,s){if(!d)throw new Error("geojson is required");flattenEach$1(d,function(f,_,S){if(f.geometry!==null){var T=f.geometry.type,F=f.geometry.coordinates;switch(T){case"LineString":if(s(f,_,S,0,0)===!1)return!1;break;case"Polygon":for(var M=0;M<F.length;M++)if(s(helpers$1.lineString(F[M],f.properties),_,S,M)===!1)return!1;break}}})}function lineReduce(d,s,f){var _=f;return lineEach(d,function(S,T,F,M){T===0&&f===void 0?_=S:_=s(_,S,T,F,M)}),_}function findSegment(d,s){if(s=s||{},!helpers$1.isObject(s))throw new Error("options is invalid");var f=s.featureIndex||0,_=s.multiFeatureIndex||0,S=s.geometryIndex||0,T=s.segmentIndex||0,F=s.properties,M;switch(d.type){case"FeatureCollection":f<0&&(f=d.features.length+f),F=F||d.features[f].properties,M=d.features[f].geometry;break;case"Feature":F=F||d.properties,M=d.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=d;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var P=M.coordinates;switch(M.type){case"Point":case"MultiPoint":return null;case"LineString":return T<0&&(T=P.length+T-1),helpers$1.lineString([P[T],P[T+1]],F,s);case"Polygon":return S<0&&(S=P.length+S),T<0&&(T=P[S].length+T-1),helpers$1.lineString([P[S][T],P[S][T+1]],F,s);case"MultiLineString":return _<0&&(_=P.length+_),T<0&&(T=P[_].length+T-1),helpers$1.lineString([P[_][T],P[_][T+1]],F,s);case"MultiPolygon":return _<0&&(_=P.length+_),S<0&&(S=P[_].length+S),T<0&&(T=P[_][S].length-T-1),helpers$1.lineString([P[_][S][T],P[_][S][T+1]],F,s)}throw new Error("geojson is invalid")}function findPoint(d,s){if(s=s||{},!helpers$1.isObject(s))throw new Error("options is invalid");var f=s.featureIndex||0,_=s.multiFeatureIndex||0,S=s.geometryIndex||0,T=s.coordIndex||0,F=s.properties,M;switch(d.type){case"FeatureCollection":f<0&&(f=d.features.length+f),F=F||d.features[f].properties,M=d.features[f].geometry;break;case"Feature":F=F||d.properties,M=d.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=d;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var P=M.coordinates;switch(M.type){case"Point":return helpers$1.point(P,F,s);case"MultiPoint":return _<0&&(_=P.length+_),helpers$1.point(P[_],F,s);case"LineString":return T<0&&(T=P.length+T),helpers$1.point(P[T],F,s);case"Polygon":return S<0&&(S=P.length+S),T<0&&(T=P[S].length+T),helpers$1.point(P[S][T],F,s);case"MultiLineString":return _<0&&(_=P.length+_),T<0&&(T=P[_].length+T),helpers$1.point(P[_][T],F,s);case"MultiPolygon":return _<0&&(_=P.length+_),S<0&&(S=P[_].length+S),T<0&&(T=P[_][S].length-T),helpers$1.point(P[_][S][T],F,s)}throw new Error("geojson is invalid")}js$1.coordAll=coordAll;js$1.coordEach=coordEach;js$1.coordReduce=coordReduce;js$1.featureEach=featureEach$1;js$1.featureReduce=featureReduce;js$1.findPoint=findPoint;js$1.findSegment=findSegment;js$1.flattenEach=flattenEach$1;js$1.flattenReduce=flattenReduce;js$1.geomEach=geomEach$2;js$1.geomReduce=geomReduce$1;js$1.lineEach=lineEach;js$1.lineReduce=lineReduce;js$1.propEach=propEach;js$1.propReduce=propReduce;js$1.segmentEach=segmentEach;js$1.segmentReduce=segmentReduce;const require$$3=getAugmentedNamespace(es$1);var rbush=rbush_minExports,helpers=js$2,meta=js$1,turfBBox=require$$3.default,featureEach=meta.featureEach;meta.coordEach;helpers.polygon;var featureCollection=helpers.featureCollection;function geojsonRbush(d){var s=new rbush(d);return s.insert=function(f){if(f.type!=="Feature")throw new Error("invalid feature");return f.bbox=f.bbox?f.bbox:turfBBox(f),rbush.prototype.insert.call(this,f)},s.load=function(f){var _=[];return Array.isArray(f)?f.forEach(function(S){if(S.type!=="Feature")throw new Error("invalid features");S.bbox=S.bbox?S.bbox:turfBBox(S),_.push(S)}):featureEach(f,function(S){if(S.type!=="Feature")throw new Error("invalid features");S.bbox=S.bbox?S.bbox:turfBBox(S),_.push(S)}),rbush.prototype.load.call(this,_)},s.remove=function(f,_){if(f.type!=="Feature")throw new Error("invalid feature");return f.bbox=f.bbox?f.bbox:turfBBox(f),rbush.prototype.remove.call(this,f,_)},s.clear=function(){return rbush.prototype.clear.call(this)},s.search=function(f){var _=rbush.prototype.search.call(this,this.toBBox(f));return featureCollection(_)},s.collides=function(f){return rbush.prototype.collides.call(this,this.toBBox(f))},s.all=function(){var f=rbush.prototype.all.call(this);return featureCollection(f)},s.toJSON=function(){return rbush.prototype.toJSON.call(this)},s.fromJSON=function(f){return rbush.prototype.fromJSON.call(this,f)},s.toBBox=function(f){var _;if(f.bbox)_=f.bbox;else if(Array.isArray(f)&&f.length===4)_=f;else if(Array.isArray(f)&&f.length===6)_=[f[0],f[1],f[3],f[4]];else if(f.type==="Feature")_=turfBBox(f);else if(f.type==="FeatureCollection")_=turfBBox(f);else throw new Error("invalid geojson");return{minX:_[0],minY:_[1],maxX:_[2],maxY:_[3]}},s}geojsonRbush$1.exports=geojsonRbush;geojsonRbush$1.exports.default=geojsonRbush;var geojsonRbushExports=geojsonRbush$1.exports;const rbush$1=getDefaultExportFromCjs(geojsonRbushExports);function lineIntersect(d,s){var f={},_=[];if(d.type==="LineString"&&(d=feature$5(d)),s.type==="LineString"&&(s=feature$5(s)),d.type==="Feature"&&s.type==="Feature"&&d.geometry!==null&&s.geometry!==null&&d.geometry.type==="LineString"&&s.geometry.type==="LineString"&&d.geometry.coordinates.length===2&&s.geometry.coordinates.length===2){var S=intersects(d,s);return S&&_.push(S),featureCollection$2(_)}var T=rbush$1();return T.load(lineSegment(s)),featureEach$2(lineSegment(d),function(F){featureEach$2(T.search(F),function(M){var P=intersects(F,M);if(P){var H=getCoords$2(P).join(",");f[H]||(f[H]=!0,_.push(P))}})}),featureCollection$2(_)}function intersects(d,s){var f=getCoords$2(d),_=getCoords$2(s);if(f.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(_.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var S=f[0][0],T=f[0][1],F=f[1][0],M=f[1][1],P=_[0][0],H=_[0][1],J=_[1][0],K=_[1][1],oe=(K-H)*(F-S)-(J-P)*(M-T),se=(J-P)*(T-H)-(K-H)*(S-P),ae=(F-S)*(T-H)-(M-T)*(S-P);if(oe===0)return null;var ge=se/oe,he=ae/oe;if(ge>=0&&ge<=1&&he>=0&&he<=1){var Be=S+ge*(F-S),pe=T+ge*(M-T);return point$3([Be,pe])}return null}function feature$3(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function point$2(d,s,f){if(f===void 0&&(f={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$3(d[0])||!isNumber$3(d[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:d};return feature$3(_,s,f)}function lineString(d,s,f){if(f===void 0&&(f={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");var _={type:"LineString",coordinates:d};return feature$3(_,s,f)}function isNumber$3(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function geomEach$1(d,s){var f,_,S,T,F,M,P,H,J,K,oe=0,se=d.type==="FeatureCollection",ae=d.type==="Feature",ge=se?d.features.length:1;for(f=0;f<ge;f++){for(M=se?d.features[f].geometry:ae?d.geometry:d,H=se?d.features[f].properties:ae?d.properties:{},J=se?d.features[f].bbox:ae?d.bbox:void 0,K=se?d.features[f].id:ae?d.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,oe,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,oe,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],oe,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}oe++}}function flattenEach(d,s){geomEach$1(d,function(f,_,S,T,F){var M=f===null?null:f.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return s(feature$3(f,S,{bbox:T,id:F}),_,0)===!1?!1:void 0}var P;switch(M){case"MultiPoint":P="Point";break;case"MultiLineString":P="LineString";break;case"MultiPolygon":P="Polygon";break}for(var H=0;H<f.coordinates.length;H++){var J=f.coordinates[H],K={type:P,coordinates:J};if(s(feature$3(K,S),_,H)===!1)return!1}})}function getCoords(d){if(Array.isArray(d))return d;if(d.type==="Feature"){if(d.geometry!==null)return d.geometry.coordinates}else if(d.coordinates)return d.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function nearestPointOnLine(d,s,f){f===void 0&&(f={});var _=point$2([1/0,1/0],{dist:1/0}),S=0;return flattenEach(d,function(T){for(var F=getCoords(T),M=0;M<F.length-1;M++){var P=point$2(F[M]);P.properties.dist=distance(s,P,f);var H=point$2(F[M+1]);H.properties.dist=distance(s,H,f);var J=distance(P,H,f),K=Math.max(P.properties.dist,H.properties.dist),oe=bearing(P,H),se=destination(s,K,oe+90,f),ae=destination(s,K,oe-90,f),ge=lineIntersect(lineString([se.geometry.coordinates,ae.geometry.coordinates]),lineString([P.geometry.coordinates,H.geometry.coordinates])),he=null;ge.features.length>0&&(he=ge.features[0],he.properties.dist=distance(s,he,f),he.properties.location=S+distance(P,he,f)),P.properties.dist<_.properties.dist&&(_=P,_.properties.index=M,_.properties.location=S),H.properties.dist<_.properties.dist&&(_=H,_.properties.index=M+1,_.properties.location=S+J),he&&he.properties.dist<_.properties.dist&&(_=he,_.properties.index=M),S+=J}}),_}class SplitPolygonMode extends GeoJsonEditMode{calculateMapCoords(s,f,_){const S=_.modeConfig;if(!S||!S.lock90Degree||!s.length)return f;if(s.length===1){const P=s[0],H=this.getSelectedGeometry(_),J=turfPolygonToLine(H),K=J.type==="FeatureCollection"?J.features:[J];let oe=Number.MAX_SAFE_INTEGER,se=null;if(K.forEach(ae=>{const ge=nearestPointOnLine(ae,P),he=distance(ge,P);oe>he&&(oe=he,se=ge)}),se){const ae=bearing(P,se),ge=distance(P,f,{units:"meters"});return destination(P,ge,ae,{units:"meters"}).geometry.coordinates}return f}const T=s[s.length-1],[F]=generatePointsParallelToLinePoints(s[s.length-2],T,f);return nearestPointOnLine(lineString$4([T,F]),f).geometry.coordinates}getGuides(s){const f=this.getClickSequence(),_={type:"FeatureCollection",features:[]};if(f.length===0||!s.lastPointerMoveEvent)return _;const{mapCoords:S}=s.lastPointerMoveEvent;return _.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[...f,this.calculateMapCoords(f,S,s)]}}),_}handleClick(s,f){const _=this.getTentativeGuide(f),S=this.getSelectedGeometry(f);if(!S){console.warn("A polygon must be selected for splitting");return}const T=this.getClickSequence();_&&_.geometry.type==="LineString"?T.push(_.geometry.coordinates[_.geometry.coordinates.length-1]):this.addClickSequence(s);const F={type:"Point",coordinates:T[T.length-1]},M=booleanPointInPolygon(F,S);if(T.length>1&&_&&!M){if(this.resetClickSequence(),lineIntersect(_,S).features.length===0)return;const H=this.splitPolygon(_,f);H&&f.onEdit(H)}}handlePointerMove(s,f){f.onUpdateCursor("cell")}splitPolygon(s,f){const _=this.getSelectedGeometry(f),S=f.selectedIndexes[0],T=f.modeConfig||{};let{gap:F=.1,units:M="centimeters"}=T;F===0&&(F=.1,M="centimeters");const P=buffer(s,F,{units:M}),H=difference(_,P);if(!H)return console.warn("Canceling edit. Split Polygon erased"),null;const{type:J,coordinates:K}=H.geometry;let oe=[];return J==="Polygon"?oe=K.map(ge=>[ge]):oe=K.reduce((ge,he)=>(he.forEach(Be=>{ge.push([Be])}),ge),[]),{updatedData:new ImmutableFeatureCollection(f.data).replaceGeometry(S,{type:"MultiPolygon",coordinates:oe}).getObject(),editType:"split",editContext:{featureIndexes:[S]}}}}class ExtrudeMode extends ModifyMode{constructor(){super(...arguments);Bt(this,"isPointAdded",!1)}handleDragging(f,_){const S=getPickedEditHandle(f.pointerDownPicks);if(S){const{featureIndex:T}=S.properties;let{positionIndexes:F}=S.properties;const M=this.coordinatesSize(F,T,_.data);F=this.isPointAdded?this.nextPositionIndexes(F,M):F;const P=this.getPointForPositionIndexes(this.prevPositionIndexes(F,M),T,_.data),H=this.getPointForPositionIndexes(F,T,_.data);if(P&&H){const[J,K]=generatePointsParallelToLinePoints(P,H,f.mapCoords),oe=new ImmutableFeatureCollection(_.data).replacePosition(T,this.prevPositionIndexes(F,M),K).replacePosition(T,F,J).getObject();_.onEdit({updatedData:oe,editType:"extruding",editContext:{featureIndexes:[T],positionIndexes:this.nextPositionIndexes(F,M),position:J}}),f.cancelPan()}}}handleStartDragging(f,_){const S=_.selectedIndexes,T=getPickedIntermediateEditHandle(f.picks);if(S.length&&T){const{positionIndexes:F,featureIndex:M}=T.properties,P=this.coordinatesSize(F,M,_.data),H=this.getPointForPositionIndexes(this.prevPositionIndexes(F,P),M,_.data),J=this.getPointForPositionIndexes(F,M,_.data);if(H&&J){let K=new ImmutableFeatureCollection(_.data);this.isOrthogonal(F,M,P,_.data)||(K=K.addPosition(M,F,J)),this.isOrthogonal(this.prevPositionIndexes(F,P),M,P,_.data)||(K=K.addPosition(M,F,H),this.isPointAdded=!0),_.onEdit({updatedData:K.getObject(),editType:"startExtruding",editContext:{featureIndexes:[M],positionIndexes:F,position:H}})}}}handleStopDragging(f,_){const S=_.selectedIndexes,T=getPickedEditHandle(f.pointerDownPicks);if(S.length&&T){const{featureIndex:F}=T.properties;let{positionIndexes:M}=T.properties;const P=this.coordinatesSize(M,F,_.data);M=this.isPointAdded?this.nextPositionIndexes(M,P):M;const H=this.getPointForPositionIndexes(this.prevPositionIndexes(M,P),F,_.data),J=this.getPointForPositionIndexes(M,F,_.data);if(H&&J){const[K,oe]=generatePointsParallelToLinePoints(H,J,f.mapCoords),se=new ImmutableFeatureCollection(_.data).replacePosition(F,this.prevPositionIndexes(M,P),oe).replacePosition(F,M,K).getObject();_.onEdit({updatedData:se,editType:"extruded",editContext:{featureIndexes:[F],positionIndexes:M,position:K}})}}this.isPointAdded=!1}coordinatesSize(f,_,{features:S}){let T=0;if(Array.isArray(f)){const M=S[_].geometry.coordinates;if(f.length===3){const[P,H]=f;M.length&&M[P].length&&(T=M[P][H].length)}else{const[P]=f;M.length&&M[P].length&&(T=M[P].length)}}return T}getBearing(f,_){const S=bearing(f,_);return S<0?Math.floor(360+S):Math.floor(S)}isOrthogonal(f,_,S,T){if(!Array.isArray(f))return!1;f[f.length-1]===S-1&&(f[f.length-1]=0);const F=this.getPointForPositionIndexes(this.prevPositionIndexes(f,S),_,T),M=this.getPointForPositionIndexes(this.nextPositionIndexes(f,S),_,T),P=this.getPointForPositionIndexes(f,_,T),H=this.getBearing(P,F),J=this.getBearing(P,M);return[89,90,91,269,270,271].includes(Math.abs(H-J))}nextPositionIndexes(f,_){if(!Array.isArray(f))return[];const S=[...f];return S.length&&(S[S.length-1]=S[S.length-1]===_-1?0:S[S.length-1]+1),S}prevPositionIndexes(f,_){if(!Array.isArray(f))return[];const S=[...f];return S.length&&(S[S.length-1]=S[S.length-1]===0?_-2:S[S.length-1]-1),S}getPointForPositionIndexes(f,_,{features:S}){let T;if(Array.isArray(f)){const M=S[_].geometry.coordinates;if(f.length===3){const[P,H,J]=f;M.length&&M[P].length&&(T=M[P][H][J])}else{const[P,H]=f;M.length&&M[P].length&&(T=M[P][H])}}return T}}function defaultCalculateElevationChange({pointerDownScreenCoords:d,screenCoords:s}){return 10*(d[1]-s[1])}class ElevationMode extends ModifyMode{makeElevatedEvent(s,f,_){const{minElevation:S=0,maxElevation:T=2e4,calculateElevationChange:F=defaultCalculateElevationChange}=_.modeConfig||{};if(!s.pointerDownScreenCoords)return s;let M=f.length===3?f[2]:0;return M+=F({pointerDownScreenCoords:s.pointerDownScreenCoords,screenCoords:s.screenCoords}),M=Math.min(M,T),M=Math.max(M,S),Object.assign({},s,{mapCoords:[f[0],f[1],M]})}handlePointerMove(s,f){const _=getPickedEditHandle(s.pointerDownPicks),S=_?_.geometry.coordinates:s.mapCoords;super.handlePointerMove(this.makeElevatedEvent(s,S,f),f)}handleStopDragging(s,f){const _=getPickedEditHandle(s.picks),S=_?_.geometry.coordinates:s.mapCoords;super.handleStopDragging(this.makeElevatedEvent(s,S,f),f)}getCursor(s){let f=super.getCursor(s);return f==="cell"&&(f="ns-resize"),f}static calculateElevationChangeWithViewport(s,{pointerDownScreenCoords:f,screenCoords:_}){return 156543.03392*Math.cos(s.latitude*Math.PI/180)/Math.pow(2,s.zoom)*(f[1]-_[1])/2}}class DrawPointMode extends GeoJsonEditMode{createTentativeFeature(s){const{lastPointerMoveEvent:f}=s,_=f?[f.mapCoords]:[];return{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Point",coordinates:_[0]}}}handleClick({mapCoords:s},f){const _={type:"Point",coordinates:s};f.onEdit(this.getAddFeatureAction(_,f.data))}handlePointerMove(s,f){f.onUpdateCursor("cell"),super.handlePointerMove(s,f)}}function isEqual(d,s){if(d===s)return!0;if(Array.isArray(d)){const f=d.length;if(!s||s.length!==f)return!1;for(let _=0;_<f;_++)if(d[_]!==s[_])return!1;return!0}return!1}function memoize(d){let s={},f;return _=>{for(const S in _)if(!isEqual(_[S],s[S])){f=d(_),s=_;break}return f}}class DrawLineStringMode extends GeoJsonEditMode{constructor(){super(...arguments);Bt(this,"dist",0);Bt(this,"position",null);Bt(this,"elems",[]);Bt(this,"_getTooltips",memoize(({modeConfig:f,dist:_})=>{let S=[];const{formatTooltip:T}=f||{};let F;return _&&(T?F=T(_):F=`Distance: ${parseFloat(_).toFixed(2)} kilometers`,S=[{position:this.position,text:F}]),S}))}handleClick(f,_){const{picks:S}=f,T=getPickedEditHandle(S);let F=!1;T||(this.addClickSequence(f),F=!0);const M=this.getClickSequence();if(T||this.calculateInfoDraw(M),M.length>1&&T&&Array.isArray(T.properties.positionIndexes)&&T.properties.positionIndexes[0]===M.length-1){this.dist=0;const P={type:"LineString",coordinates:[...M]};this.resetClickSequence();const H=this.getAddFeatureAction(P,_.data);H&&_.onEdit(H)}else F&&_.onEdit({updatedData:_.data,editType:"addTentativePosition",editContext:{position:f.mapCoords}})}handleKeyUp(f,_){const{key:S}=f;if(S==="Enter"){const T=this.getClickSequence();if(T.length>1){const F={type:"LineString",coordinates:[...T]};this.resetClickSequence();const M=this.getAddFeatureAction(F,_.data);M&&_.onEdit(M)}}else S==="Escape"&&(this.resetClickSequence(),_.onEdit({updatedData:_.data,editType:"cancelFeature",editContext:{}}))}getGuides(f){const{lastPointerMoveEvent:_}=f,S=this.getClickSequence(),T=_?[_.mapCoords]:[],F={type:"FeatureCollection",features:[]};let M;S.length>0&&(M={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[...S,...T]}}),M&&F.features.push(M);const P=S.map((H,J)=>({type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[J]},geometry:{type:"Point",coordinates:H}}));return F.features.push(...P),F}handlePointerMove(f,_){_.onUpdateCursor("cell")}getTooltips(f){return this._getTooltips({modeConfig:f.modeConfig,dist:this.dist})}calculateInfoDraw(f){f.length>1&&(this.position=f[f.length-1],this.dist+=distance(f[f.length-2],f[f.length-1]))}}class DrawPolygonMode extends GeoJsonEditMode{createTentativeFeature(s){const{lastPointerMoveEvent:f}=s,_=this.getClickSequence(),S=f?[f.mapCoords]:[];let T;return _.length===1||_.length===2?T={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[..._,...S]}}:_.length>2&&(T={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[..._,...S,_[0]]]}}),T}getGuides(s){const f=this.getClickSequence(),_={type:"FeatureCollection",features:[]},S=this.createTentativeFeature(s);S&&_.features.push(S);const T=f.map((F,M)=>({type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[M]},geometry:{type:"Point",coordinates:F}}));return _.features.push(...T),_}handleClick(s,f){const{picks:_}=s,S=getPickedEditHandle(_),T=this.getClickSequence();let F=!1;if(T.length>2&&f.modeConfig&&f.modeConfig.preventOverlappingLines){const P=lineString$4([T[T.length-1],s.mapCoords]),H=lineString$4([...T.slice(0,T.length-1)]);lineIntersect(P,H).features.length>0&&(F=!0)}let M=!1;if(!S&&!F&&(this.addClickSequence(s),M=!0),T.length>2&&S&&Array.isArray(S.properties.positionIndexes)&&(S.properties.positionIndexes[0]===0||S.properties.positionIndexes[0]===T.length-1)){const P={type:"Polygon",coordinates:[[...T,T[0]]]};this.resetClickSequence();const H=this.getAddFeatureOrBooleanPolygonAction(P,f);H&&f.onEdit(H)}else M&&f.onEdit({updatedData:f.data,editType:"addTentativePosition",editContext:{position:s.mapCoords}})}handleKeyUp(s,f){if(s.key==="Enter"){const _=this.getClickSequence();if(_.length>2){const S={type:"Polygon",coordinates:[[..._,_[0]]]};this.resetClickSequence();const T=this.getAddFeatureOrBooleanPolygonAction(S,f);T&&f.onEdit(T)}}else s.key==="Escape"&&(this.resetClickSequence(),f.onEdit({updatedData:f.data,editType:"cancelFeature",editContext:{}}))}handlePointerMove(s,f){f.onUpdateCursor("cell"),super.handlePointerMove(s,f)}}class TwoClickPolygonMode extends GeoJsonEditMode{handleClick(s,f){f.modeConfig&&f.modeConfig.dragToDraw||(this.addClickSequence(s),this.checkAndFinishPolygon(f))}handleStartDragging(s,f){!f.modeConfig||!f.modeConfig.dragToDraw||(this.addClickSequence(s),s.cancelPan())}handleStopDragging(s,f){!f.modeConfig||!f.modeConfig.dragToDraw||(this.addClickSequence(s),this.checkAndFinishPolygon(f))}checkAndFinishPolygon(s){const f=this.getClickSequence(),_=this.getTentativeGuide(s);if(f.length>1&&_&&_.geometry.type==="Polygon"){const S={type:"Feature",properties:{shape:_.properties.shape},geometry:{type:"Polygon",coordinates:_.geometry.coordinates}},T=this.getAddFeatureOrBooleanPolygonAction(S,s);this.resetClickSequence(),T&&s.onEdit(T)}}getGuides(s){const{lastPointerMoveEvent:f,modeConfig:_}=s,S=this.getClickSequence(),T={type:"FeatureCollection",features:[]};if(S.length===0||!f)return T;const F=S[0],M=f.mapCoords,P=this.getTwoClickPolygon(F,M,_);return P&&T.features.push({type:"Feature",properties:{shape:P.properties&&P.properties.shape,guideType:"tentative"},geometry:P.geometry}),T}getTwoClickPolygon(s,f,_){return null}handlePointerMove(s,f){f.onUpdateCursor("cell"),super.handlePointerMove(s,f)}createTentativeFeature(s){const{lastPointerMoveEvent:f}=s,_=this.getClickSequence(),S=f?[f.mapCoords]:[];let T;return _.length===1&&(T=this.getTwoClickPolygon(_[0],S[0],s.modeConfig)),T}}class DrawRectangleMode extends TwoClickPolygonMode{getTwoClickPolygon(s,f,_){const S=bboxPolygon([s[0],s[1],f[0],f[1]]);return S.properties=S.properties||{},S.properties.shape="Rectangle",S}}function feature$2(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties={},_.geometry=d,_}function point$1(d,s,f){if(f===void 0&&(f={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber$2(d[0])||!isNumber$2(d[1]))throw new Error("coordinates must contain numbers");var _={type:"Point",coordinates:d};return feature$2(_,s,f)}function isNumber$2(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function getGeom(d){return d.type==="Feature"?d.geometry:d}function along(d,s,f){f===void 0&&(f={});for(var _=getGeom(d),S=_.coordinates,T=0,F=0;F<S.length&&!(s>=T&&F===S.length-1);F++)if(T>=s){var M=s-T;if(M){var P=bearing(S[F],S[F-1])-180,H=destination(S[F],M,P,f);return H}else return point$1(S[F])}else T+=distance(S[F],S[F+1],f);return point$1(S[S.length-1])}class DrawSquareMode extends TwoClickPolygonMode{getTwoClickPolygon(s,f,_){const S=[f[0],s[1]],T=[s[0],f[1]],F=distance(point$a(S),point$a(s)),M=distance(point$a(T),point$a(s)),P=F<=M?F:M,H=F<=M?S:T,J=lineString$4([H,f]),oe=along(J,P).geometry.coordinates,se=bboxPolygon([s[0],s[1],oe[0],oe[1]]);return se.properties=se.properties||{},se.properties.shape="Square",se}}class DrawRectangleFromCenterMode extends TwoClickPolygonMode{getTwoClickPolygon(s,f,_){const S=s[0]>f[0]?s[0]+Math.abs(s[0]-f[0]):s[0]-Math.abs(s[0]-f[0]),T=s[1]>f[1]?s[1]+Math.abs(s[1]-f[1]):s[1]-Math.abs(s[1]-f[1]),F=bboxPolygon([S,T,f[0],f[1]]);return F.properties=F.properties||{},F.properties.shape="Rectangle",F}}class DrawSquareFromCenterMode extends TwoClickPolygonMode{getTwoClickPolygon(s,f,_){const S=[f[0],s[1]],T=[s[0],f[1]],F=distance(point$a(S),point$a(s)),M=distance(point$a(T),point$a(s)),P=F<=M?F:M,H=F<=M?S:T,J=lineString$4([H,f]),oe=along(J,P).geometry.coordinates,se=s[0]>oe[0]?s[0]+Math.abs(s[0]-oe[0]):s[0]-Math.abs(s[0]-oe[0]),ae=s[1]>oe[1]?s[1]+Math.abs(s[1]-oe[1]):s[1]-Math.abs(s[1]-oe[1]),ge=bboxPolygon([se,ae,oe[0],oe[1]]);return ge.properties=ge.properties||{},ge.properties.shape="Square",ge}}function feature$1(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function polygon$1(d,s,f){f===void 0&&(f={});for(var _=0,S=d;_<S.length;_++){var T=S[_];if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<T[T.length-1].length;F++)if(T[T.length-1][F]!==T[0][F])throw new Error("First and last Position are not equivalent.")}var M={type:"Polygon",coordinates:d};return feature$1(M,s,f)}function circle(d,s,f){f===void 0&&(f={});for(var _=f.steps||64,S=f.properties?f.properties:!Array.isArray(d)&&d.type==="Feature"&&d.properties?d.properties:{},T=[],F=0;F<_;F++)T.push(destination(d,s,F*-360/_,f).geometry.coordinates);return T.push(T[0]),polygon$1([T],S)}function geomEach(d,s){var f,_,S,T,F,M,P,H,J,K,oe=0,se=d.type==="FeatureCollection",ae=d.type==="Feature",ge=se?d.features.length:1;for(f=0;f<ge;f++){for(M=se?d.features[f].geometry:ae?d.geometry:d,H=se?d.features[f].properties:ae?d.properties:{},J=se?d.features[f].bbox:ae?d.bbox:void 0,K=se?d.features[f].id:ae?d.id:void 0,P=M?M.type==="GeometryCollection":!1,F=P?M.geometries.length:1,S=0;S<F;S++){if(T=P?M.geometries[S]:M,T===null){if(s(null,oe,H,J,K)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(T,oe,H,J,K)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(s(T.geometries[_],oe,H,J,K)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}oe++}}function geomReduce(d,s,f){var _=f;return geomEach(d,function(S,T,F,M,P){T===0&&f===void 0?_=S:_=s(_,S,T,F,M,P)}),_}var RADIUS=6378137;function area$1(d){return geomReduce(d,function(s,f){return s+calculateArea(f)},0)}function calculateArea(d){var s=0,f;switch(d.type){case"Polygon":return polygonArea(d.coordinates);case"MultiPolygon":for(f=0;f<d.coordinates.length;f++)s+=polygonArea(d.coordinates[f]);return s;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function polygonArea(d){var s=0;if(d&&d.length>0){s+=Math.abs(ringArea(d[0]));for(var f=1;f<d.length;f++)s-=Math.abs(ringArea(d[f]))}return s}function ringArea(d){var s,f,_,S,T,F,M,P=0,H=d.length;if(H>2){for(M=0;M<H;M++)M===H-2?(S=H-2,T=H-1,F=0):M===H-1?(S=H-1,T=0,F=1):(S=M,T=M+1,F=M+2),s=d[S],f=d[T],_=d[F],P+=(rad(_[0])-rad(s[0]))*Math.sin(rad(f[1]));P=P*RADIUS*RADIUS/2}return P}function rad(d){return d*Math.PI/180}class DrawCircleFromCenterMode extends TwoClickPolygonMode{constructor(){super(...arguments);Bt(this,"radius",null);Bt(this,"position",null);Bt(this,"areaCircle",null);Bt(this,"_getTooltips",memoize(({modeConfig:f,radius:_,areaCircle:S})=>{let T=[];const{formatTooltip:F}=f||{};let M;return _&&S&&(F?M=F(_):M=`Radius: ${parseFloat(_).toFixed(2)} kilometers
      
 Area: ${parseFloat(S).toFixed(2)}`,T=[{position:this.position,text:M}]),T}))}getTwoClickPolygon(f,_,S){const{steps:T=64}=S||{},F={steps:T};this.position=_,T<4&&(console.warn("Minimum steps to draw a circle is 4 "),F.steps=4),this.radius=Math.max(distance(f,_),.001);const M=circle(f,this.radius,F);return M.properties=M.properties||{},M.properties.shape="Circle",this.areaCircle=area$1(M),M}getTooltips(f){return this._getTooltips({modeConfig:f==null?void 0:f.modeConfig,radius:this.radius,areaCircle:this.areaCircle})}}class DrawCircleByDiameterMode extends TwoClickPolygonMode{constructor(){super(...arguments);Bt(this,"radius",null);Bt(this,"position",null);Bt(this,"areaCircle",null);Bt(this,"diameter",null);Bt(this,"_getTooltips",memoize(({modeConfig:f,radius:_,areaCircle:S,diameter:T})=>{let F=[];const{formatTooltip:M}=f||{};let P;return _&&S&&(M?P=M(_):P=`Radius: ${parseFloat(_).toFixed(2)} kilometers
      
 Area: ${parseFloat(S).toFixed(2)}
      
 Diameter: ${parseFloat(T).toFixed(2)} kilometers`,F=[{position:this.position,text:P}]),F}))}getTwoClickPolygon(f,_,S){const{steps:T=64}=S||{},F={steps:T};T<4&&(console.warn("Minimum steps to draw a circle is 4 "),F.steps=4);const M=getIntermediatePosition(f,_);this.radius=Math.max(distance(f,M),.001),this.diameter=Math.max(distance(f,_),.001),this.position=M;const P=circle(M,this.radius,F);return P.properties=P.properties||{},P.properties.shape="Circle",this.areaCircle=area$1(P),P}getTooltips(f){return this._getTooltips({modeConfig:f.modeConfig,radius:this.radius,areaCircle:this.areaCircle,diameter:this.diameter})}}function feature(d,s,f){f===void 0&&(f={});var _={type:"Feature"};return(f.id===0||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=s||{},_.geometry=d,_}function polygon(d,s,f){f===void 0&&(f={});for(var _=0,S=d;_<S.length;_++){var T=S[_];if(T.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<T[T.length-1].length;F++)if(T[T.length-1][F]!==T[0][F])throw new Error("First and last Position are not equivalent.")}var M={type:"Polygon",coordinates:d};return feature(M,s,f)}function degreesToRadians(d){var s=d%360;return s*Math.PI/180}function isNumber$1(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function isObject$3(d){return!!d&&d.constructor===Object}function getCoord(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ellipse(d,s,f,_){_=_||{};var S=_.steps||64,T=_.units||"kilometers",F=_.angle||0,M=_.pivot||d,P=_.properties||d.properties||{};if(!d)throw new Error("center is required");if(!s)throw new Error("xSemiAxis is required");if(!f)throw new Error("ySemiAxis is required");if(!isObject$3(_))throw new Error("options must be an object");if(!isNumber$1(S))throw new Error("steps must be a number");if(!isNumber$1(F))throw new Error("angle must be a number");var H=getCoord(d);if(T==="degrees")var J=degreesToRadians(F);else s=rhumbDestination(d,s,90,{units:T}),f=rhumbDestination(d,f,0,{units:T}),s=getCoord(s)[0]-H[0],f=getCoord(f)[1]-H[1];for(var K=[],oe=0;oe<S;oe+=1){var se=oe*-360/S,ae=s*f/Math.sqrt(Math.pow(f,2)+Math.pow(s,2)*Math.pow(getTanDeg(se),2)),ge=s*f/Math.sqrt(Math.pow(s,2)+Math.pow(f,2)/Math.pow(getTanDeg(se),2));if(se<-90&&se>=-270&&(ae=-ae),se<-180&&se>=-360&&(ge=-ge),T==="degrees"){var he=ae*Math.cos(J)+ge*Math.sin(J),Be=ge*Math.cos(J)-ae*Math.sin(J);ae=he,ge=Be}K.push([ae+H[0],ge+H[1]])}return K.push(K[0]),T==="degrees"?polygon([K],P):transformRotate(polygon([K],P),F,{pivot:M})}function getTanDeg(d){var s=d*Math.PI/180;return Math.tan(s)}class DrawEllipseByBoundingBoxMode extends TwoClickPolygonMode{getTwoClickPolygon(s,f,_){const S=Math.min(s[0],f[0]),T=Math.min(s[1],f[1]),F=Math.max(s[0],f[0]),M=Math.max(s[1],f[1]),P=bboxPolygon([S,T,F,M]).geometry.coordinates[0],H=getIntermediatePosition(s,f),J=Math.max(distance(point$a(P[0]),point$a(P[1])),.001),K=Math.max(distance(point$a(P[0]),point$a(P[3])),.001);return ellipse(H,J,K)}}class ThreeClickPolygonMode extends GeoJsonEditMode{handleClick(s,f){this.addClickSequence(s);const _=this.getClickSequence(),S=this.getTentativeGuide(f);if(_.length>2&&S&&S.geometry.type==="Polygon"){const T=this.getAddFeatureOrBooleanPolygonAction(S.geometry,f);this.resetClickSequence(),T&&f.onEdit(T)}}getGuides(s){const{lastPointerMoveEvent:f,modeConfig:_}=s,S=this.getClickSequence(),T={type:"FeatureCollection",features:[]};if(S.length===0)return T;const F=f.mapCoords;if(S.length===1)T.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[S[0],F]}});else{const M=this.getThreeClickPolygon(S[0],S[1],F,_);M&&T.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:M.geometry})}return T}getThreeClickPolygon(s,f,_,S){return null}handlePointerMove(s,f){f.onUpdateCursor("cell"),super.handlePointerMove(s,f)}createTentativeFeature(s){const{lastPointerMoveEvent:f}=s,_=this.getClickSequence(),S=f?[f.mapCoords]:[];let T;return _.length===2&&(T=this.getThreeClickPolygon(_[0],_[1],S[0],s.modeConfig)),T}}class DrawRectangleUsingThreePointsMode extends ThreeClickPolygonMode{getThreeClickPolygon(s,f,_,S){const[T,F]=generatePointsParallelToLinePoints(s,f,_);return{type:"Feature",properties:{shape:"Rectangle"},geometry:{type:"Polygon",coordinates:[[s,f,T,F,s]]}}}}class DrawEllipseUsingThreePointsMode extends ThreeClickPolygonMode{getThreeClickPolygon(s,f,_,S){const T=getIntermediatePosition(s,f),F=Math.max(distance(T,point$a(_)),.001),M=Math.max(distance(s,f),.001)/2,P={angle:bearing(s,f)};return ellipse(T,F,M,P)}}class Draw90DegreePolygonMode extends GeoJsonEditMode{createTentativeFeature(s){const f=this.getClickSequence(),{mapCoords:_}=s.lastPointerMoveEvent;let S;if(f.length<=1)S=_;else{const F=f[f.length-2],M=f[f.length-1];[S]=generatePointsParallelToLinePoints(F,M,_)}let T;return f.length<3?T={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[...f,S]}}:T={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[...f,S,f[0]]]}},T}getGuides(s){const f={type:"FeatureCollection",features:[]};if(this.getClickSequence().length===0||!s.lastPointerMoveEvent)return f;const S=this.createTentativeFeature(s);return f.features.push(S),f.features=f.features.concat(getEditHandlesForGeometry(S.geometry,-1)),f.features=f.features.slice(0,-1),f}handlePointerMove(s,f){f.onUpdateCursor("cell"),super.handlePointerMove(s,f)}handleClick(s,f){const{picks:_}=s,S=this.getTentativeGuide(f);this.addClickSequence(s);const T=this.getClickSequence();if(S)if(T.length===3&&S.geometry.type==="LineString"){const F=S.geometry;T[T.length-1]=F.coordinates[F.coordinates.length-1]}else if(T.length>3&&S.geometry.type==="Polygon"){const F=S.geometry;T[T.length-1]=F.coordinates[0][F.coordinates[0].length-2];const M=getPickedEditHandle(_);if(M&&Array.isArray(M.properties.positionIndexes)&&(M.properties.positionIndexes[1]===0||M.properties.positionIndexes[1]===F.coordinates[0].length-3)){const P={type:"Polygon",coordinates:this.finalizedCoordinates([...F.coordinates[0]])};this.resetClickSequence();const H=this.getAddFeatureOrBooleanPolygonAction(P,f);H&&f.onEdit(H)}}else{const F={screenCoords:[-1,-1],mapCoords:s.mapCoords,picks:[],pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,cancelPan:()=>{},sourceEvent:null};this.handlePointerMove(F,f)}}finalizedCoordinates(s){let f=[[...s.slice(0,-2),s[0]]],_=this.getIntermediatePoint([...s]);if(_)f=[[...s.slice(0,-2),_,s[0]]];else{const S=[...s];S.splice(-3,1),_=this.getIntermediatePoint([...S]),_&&(f=[[...s.slice(0,-3),_,s[0]]])}return f}getIntermediatePoint(s){let f=null;if(s.length>4){const[_,S]=[...s],T=bearing(_,S),F=s[s.length-3],M=s[s.length-4],P=bearing(F,M),H={first:[],second:[]};[1,2,3].forEach(K=>{const oe=T+K*90;H.first.push(oe>180?oe-360:oe);const se=P+K*90;H.second.push(se>180?se-360:se)});const J=distance(point$a(_),point$a(F));[0,1,2].forEach(K=>{const oe=lineString$4([_,destination(_,J,H.first[K]).geometry.coordinates]);[0,1,2].forEach(se=>{const ae=lineString$4([F,destination(F,J,H.second[se]).geometry.coordinates]),ge=lineIntersect(oe,ae);ge&&ge.features.length&&(f=ge.features[0].geometry.coordinates)})})}return f}}var FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root$1.Date.now()};function debounce(d,s,f){var _,S,T,F,M,P,H=0,J=!1,K=!1,oe=!0;if(typeof d!="function")throw new TypeError(FUNC_ERROR_TEXT);s=toNumber(s)||0,isObject$2(f)&&(J=!!f.leading,K="maxWait"in f,T=K?nativeMax(toNumber(f.maxWait)||0,s):T,oe="trailing"in f?!!f.trailing:oe);function se(Me){var ve=_,At=S;return _=S=void 0,H=Me,F=d.apply(At,ve),F}function ae(Me){return H=Me,M=setTimeout(Be,s),J?se(Me):F}function ge(Me){var ve=Me-P,At=Me-H,Ct=s-ve;return K?nativeMin(Ct,T-At):Ct}function he(Me){var ve=Me-P,At=Me-H;return P===void 0||ve>=s||ve<0||K&&At>=T}function Be(){var Me=now();if(he(Me))return pe(Me);M=setTimeout(Be,ge(Me))}function pe(Me){return M=void 0,oe&&_?se(Me):(_=S=void 0,F)}function be(){M!==void 0&&clearTimeout(M),H=0,_=P=S=M=void 0}function Re(){return M===void 0?F:pe(now())}function Fe(){var Me=now(),ve=he(Me);if(_=arguments,S=this,P=Me,ve){if(M===void 0)return ae(P);if(K)return M=setTimeout(Be,s),se(P)}return M===void 0&&(M=setTimeout(Be,s)),F}return Fe.cancel=be,Fe.flush=Re,Fe}function throttle$1(d,s,f){var _=!0,S=!0;if(typeof d!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$2(f)&&(_="leading"in f?!!f.leading:_,S="trailing"in f?!!f.trailing:S),debounce(d,s,{leading:_,maxWait:s,trailing:S})}function isObject$2(d){var s=typeof d;return!!d&&(s=="object"||s=="function")}function isObjectLike(d){return!!d&&typeof d=="object"}function isSymbol(d){return typeof d=="symbol"||isObjectLike(d)&&objectToString.call(d)==symbolTag}function toNumber(d){if(typeof d=="number")return d;if(isSymbol(d))return NAN;if(isObject$2(d)){var s=typeof d.valueOf=="function"?d.valueOf():d;d=isObject$2(s)?s+"":s}if(typeof d!="string")return d===0?d:+d;d=d.replace(reTrim,"");var f=reIsBinary.test(d);return f||reIsOctal.test(d)?freeParseInt(d.slice(2),f?2:8):reIsBadHex.test(d)?NAN:+d}var lodash_throttle=throttle$1;const throttle$2=getDefaultExportFromCjs(lodash_throttle);class DrawPolygonByDraggingMode extends DrawPolygonMode{constructor(){super(...arguments);Bt(this,"handleDraggingThrottled",null)}handleClick(f,_){}handleStartDragging(f,_){f.cancelPan(),_.modeConfig&&_.modeConfig.throttleMs?this.handleDraggingThrottled=throttle$2(this.handleDraggingAux,_.modeConfig.throttleMs):this.handleDraggingThrottled=this.handleDraggingAux}handleStopDragging(f,_){this.addClickSequence(f);const S=this.getClickSequence();if(this.handleDraggingThrottled&&this.handleDraggingThrottled.cancel&&this.handleDraggingThrottled.cancel(),S.length>2){const T={type:"Polygon",coordinates:[[...S,S[0]]]},F=this.getAddFeatureOrBooleanPolygonAction(T,_);F&&_.onEdit(F)}this.resetClickSequence()}handleDraggingAux(f,_){const{picks:S}=f;getPickedEditHandle(S)||(this.addClickSequence(f),_.onEdit({updatedData:_.data,editType:"addTentativePosition",editContext:{position:f.mapCoords}}))}handleDragging(f,_){this.handleDraggingThrottled&&this.handleDraggingThrottled(f,_)}handleKeyUp(f,_){if(f.key==="Enter"){const S=this.getClickSequence();if(S.length>2){const T={type:"Polygon",coordinates:[[...S,S[0]]]};this.resetClickSequence();const F=this.getAddFeatureOrBooleanPolygonAction(T,_);F&&_.onEdit(F)}}else f.key==="Escape"&&(this.resetClickSequence(),this.handleDraggingThrottled&&(this.handleDraggingThrottled=null),_.onEdit({updatedData:_.data,editType:"cancelFeature",editContext:{}}))}}class SnappableMode extends GeoJsonEditMode{constructor(f){super();Bt(this,"_handler");this._handler=f}_getSnappedMouseEvent(f,_,S){return Object.assign(f,{mapCoords:S.geometry.coordinates,pointerDownMapCoords:_&&_.geometry.coordinates})}_getPickedSnapTarget(f){return getPickedEditHandles(f).find(_=>_.properties.editHandleType==="snap-target")}_getPickedSnapSource(f){return getPickedSnapSourceEditHandle(f)}_getUpdatedSnapSourceHandle(f,_){const{featureIndex:S,positionIndexes:T}=f.properties;if(!Array.isArray(T))return f;const F=_.features[S],M=T.reduce((P,H)=>P[H],F.geometry.coordinates);return{...f,geometry:{type:"Point",coordinates:M}}}_getSnapTargets(f){let{additionalSnapTargets:_}=f.modeConfig||{};return _=_||[],[...f.data.features,..._]}_getSnapTargetHandles(f){const _=[],S=this._getSnapTargets(f);for(let T=0;T<S.length;T++)if(!f.selectedIndexes.includes(T)){const{geometry:M}=S[T];_.push(...getEditHandlesForGeometry(M,T,"snap-target"))}return _}getGuides(f){const{modeConfig:_,lastPointerMoveEvent:S}=f,{enableSnapping:T}=_||{},F={type:"FeatureCollection",features:[...this._handler.getGuides(f).features]};if(!T)return F;const M=S&&this._getPickedSnapSource(S.pointerDownPicks);if(M)return F.features.push(...this._getSnapTargetHandles(f),this._getUpdatedSnapSourceHandle(M,f.data)),F;const{features:P}=f.data;for(const H of f.selectedIndexes)if(H<P.length){const{geometry:J}=P[H];F.features.push(...getEditHandlesForGeometry(J,H,"snap-source"))}return F}_getSnapAwareEvent(f,_){const S=this._getPickedSnapSource(_.lastPointerMoveEvent.pointerDownPicks),T=this._getPickedSnapTarget(f.picks);return S&&T?this._getSnappedMouseEvent(f,S,T):f}handleStartDragging(f,_){this._handler.handleStartDragging(f,_)}handleStopDragging(f,_){this._handler.handleStopDragging(this._getSnapAwareEvent(f,_),_)}handleDragging(f,_){this._handler.handleDragging(this._getSnapAwareEvent(f,_),_)}handlePointerMove(f,_){this._handler.handlePointerMove(this._getSnapAwareEvent(f,_),_)}}class CompositeMode extends GeoJsonEditMode{constructor(f){super();Bt(this,"_modes");this._modes=f}_coalesce(f,_=null){let S=null;for(let T=0;T<this._modes.length&&(S=f(this._modes[T]),!(_?_(S):S));T++);return S}handleClick(f,_){this._coalesce(S=>S.handleClick(f,_))}handlePointerMove(f,_){return this._coalesce(S=>S.handlePointerMove(f,_))}handleStartDragging(f,_){return this._coalesce(S=>S.handleStartDragging(f,_))}handleStopDragging(f,_){return this._coalesce(S=>S.handleStopDragging(f,_))}handleDragging(f,_){return this._coalesce(S=>S.handleDragging(f,_))}getGuides(f){const _=[];for(const S of this._modes)_.push(...S.getGuides(f).features);return{type:"FeatureCollection",features:_}}}class TransformMode extends CompositeMode{constructor(){super([new TranslateMode,new ScaleMode,new RotateMode])}handlePointerMove(s,f){let _=null;super.handlePointerMove(s,{...f,onUpdateCursor:S=>{_=S||_}}),f.onUpdateCursor(_)}handleStartDragging(s,f){let _=null,S=null;const T=[];this._modes.forEach(F=>{F instanceof TranslateMode?S=F:(F instanceof ScaleMode&&(_=F),T.push(F))}),_ instanceof ScaleMode&&!_.isEditHandleSelected()&&T.push(S),T.filter(Boolean).forEach(F=>F.handleStartDragging(s,f))}getGuides(s){let f=super.getGuides(s);const _=(this._modes||[]).find(S=>S instanceof RotateMode);if(_ instanceof RotateMode){const S=f.features.filter(T=>{const{editHandleType:F,mode:M}=T.properties||{},P=[M];return _.getIsRotating()&&P.push(F),!P.includes("scale")});f=featureCollection$5(S)}return f}}const PROJECTED_PIXEL_SIZE_MULTIPLIER=2/3,EVENT_TYPES=["anyclick","pointermove","panstart","panmove","panend","keyup"];class EditableLayer extends CompositeLayer{constructor(){super(...arguments);Bt(this,"state")}onLayerClick(f){}onStartDragging(f){}onStopDragging(f){}onDragging(f){}onPointerMove(f){}onLayerKeyUp(f){}initializeState(){this.setState({_editableLayerState:{pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,eventHandler:this._forwardEventToCurrentLayer.bind(this)}}),this._addEventHandlers()}finalizeState(){this._removeEventHandlers()}_addEventHandlers(){const{eventManager:f}=this.context.deck,{eventHandler:_}=this.state._editableLayerState;for(const S of EVENT_TYPES)f.on(S,_,{priority:100})}_removeEventHandlers(){const{eventManager:f}=this.context.deck,{eventHandler:_}=this.state._editableLayerState;for(const S of EVENT_TYPES)f.off(S,_)}_forwardEventToCurrentLayer(f){const _=this.getCurrentLayer(),S=_[`_on${f.type}`].bind(_);if(!S){console.warn(`no handler for mjolnir.js event ${f.type}`);return}S(f)}_onanyclick({srcEvent:f}){const _=this.getScreenCoords(f),S=this.getMapCoords(_),T=this.getPicks(_);this.onLayerClick({mapCoords:S,screenCoords:_,picks:T,sourceEvent:f})}_onkeyup({srcEvent:f}){this.onLayerKeyUp(f)}_onpanstart(f){const _=this.getScreenCoords(f.srcEvent),S=this.getMapCoords(_),T=this.getPicks(_);this.setState({_editableLayerState:{...this.state._editableLayerState,pointerDownScreenCoords:_,pointerDownMapCoords:S,pointerDownPicks:T}}),this.onStartDragging({picks:T,screenCoords:_,mapCoords:S,pointerDownScreenCoords:_,pointerDownMapCoords:S,cancelPan:f.stopImmediatePropagation,sourceEvent:f.srcEvent})}_onpanmove(f){const{srcEvent:_}=f,S=this.getScreenCoords(_),T=this.getMapCoords(S),{pointerDownPicks:F,pointerDownScreenCoords:M,pointerDownMapCoords:P}=this.state._editableLayerState,H=this.getPicks(S);this.onDragging({screenCoords:S,mapCoords:T,picks:H,pointerDownPicks:F,pointerDownScreenCoords:M,pointerDownMapCoords:P,sourceEvent:_,cancelPan:f.stopImmediatePropagation})}_onpanend({srcEvent:f}){const _=this.getScreenCoords(f),S=this.getMapCoords(_),{pointerDownPicks:T,pointerDownScreenCoords:F,pointerDownMapCoords:M}=this.state._editableLayerState,P=this.getPicks(_);this.onStopDragging({picks:P,screenCoords:_,mapCoords:S,pointerDownPicks:T,pointerDownScreenCoords:F,pointerDownMapCoords:M,sourceEvent:f}),this.setState({_editableLayerState:{...this.state._editableLayerState,pointerDownScreenCoords:null,pointerDownMapCoords:null,pointerDownPicks:null}})}_onpointermove(f){const{srcEvent:_}=f,S=this.getScreenCoords(_),T=this.getMapCoords(S),{pointerDownPicks:F,pointerDownScreenCoords:M,pointerDownMapCoords:P}=this.state._editableLayerState,H=this.getPicks(S);this.onPointerMove({screenCoords:S,mapCoords:T,picks:H,pointerDownPicks:F,pointerDownScreenCoords:M,pointerDownMapCoords:P,sourceEvent:_,cancelPan:f.stopImmediatePropagation})}getPicks(f){return this.context.deck.pickMultipleObjects({x:f[0],y:f[1],layerIds:[this.props.id],radius:this.props.pickingRadius,depth:this.props.pickingDepth})}getScreenCoords(f){return[f.clientX-this.context.gl.canvas.getBoundingClientRect().left,f.clientY-this.context.gl.canvas.getBoundingClientRect().top]}getMapCoords(f){return this.context.viewport.unproject([f[0],f[1]])}}Bt(EditableLayer,"layerName","EditableLayer");const defaultProps$2={...PathLayer.defaultProps,pickingLineWidthExtraPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER}};class EditablePathLayer extends PathLayer{getShaders(){var f;const s=super.getShaders();return s.vs=insertBefore(s.vs,"vec3 width;",`
       if(bool(picking.isActive)){
        widthPixels.xy += pickingLineWidthExtraPixels;
       }
      `),{...s,inject:{...s.inject||{},"vs:#decl":(((f=s.inject)==null?void 0:f["vs:#decl"])||"").concat("uniform float pickingLineWidthExtraPixels;")}}}draw(s){super.draw({...s,uniforms:{...s.uniforms,pickingLineWidthExtraPixels:this.props.pickingLineWidthExtraPixels}})}}EditablePathLayer.defaultProps=defaultProps$2;EditablePathLayer.layerName="EditablePathLayer";const DEFAULT_LINE_COLOR=[0,0,0,153],DEFAULT_FILL_COLOR=[0,0,0,144],DEFAULT_SELECTED_LINE_COLOR=[0,0,0,255],DEFAULT_SELECTED_FILL_COLOR=[0,0,144,144],DEFAULT_TENTATIVE_LINE_COLOR=[144,144,144,255],DEFAULT_TENTATIVE_FILL_COLOR=[144,144,144,144],DEFAULT_EDITING_EXISTING_POINT_COLOR=[192,0,0,255],DEFAULT_EDITING_INTERMEDIATE_POINT_COLOR=[0,0,0,128],DEFAULT_EDITING_SNAP_POINT_COLOR=[124,0,192,255],DEFAULT_EDITING_POINT_OUTLINE_COLOR=[255,255,255,255],DEFAULT_EDITING_EXISTING_POINT_RADIUS=5,DEFAULT_EDITING_INTERMEDIATE_POINT_RADIUS=3,DEFAULT_EDITING_SNAP_POINT_RADIUS=7,DEFAULT_TOOLTIP_FONT_SIZE=32*PROJECTED_PIXEL_SIZE_MULTIPLIER,DEFAULT_EDIT_MODE=DrawPolygonMode;function guideAccessor(d){return!d||typeof d!="function"?d:s=>d(unwrapGuide(s))}function unwrapGuide(d){return d.__source?d.__source.object:d.sourceFeature?d.sourceFeature.feature:d}function getEditHandleColor(d){switch(d.properties.editHandleType){case"existing":return DEFAULT_EDITING_EXISTING_POINT_COLOR;case"snap-source":return DEFAULT_EDITING_SNAP_POINT_COLOR;case"intermediate":default:return DEFAULT_EDITING_INTERMEDIATE_POINT_COLOR}}function getEditHandleOutlineColor(d){return DEFAULT_EDITING_POINT_OUTLINE_COLOR}function getEditHandleRadius(d){switch(d.properties.editHandleType){case"existing":return DEFAULT_EDITING_EXISTING_POINT_RADIUS;case"snap":return DEFAULT_EDITING_SNAP_POINT_RADIUS;case"intermediate":default:return DEFAULT_EDITING_INTERMEDIATE_POINT_RADIUS}}const defaultProps$1={mode:DEFAULT_EDIT_MODE,onEdit:()=>{},pickable:!0,pickingRadius:10,pickingDepth:5,fp64:!1,filled:!0,stroked:!0,lineWidthScale:PROJECTED_PIXEL_SIZE_MULTIPLIER,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,pickingLineWidthExtraPixels:0,lineWidthUnits:"pixels",lineJointRounded:!1,lineCapRounded:!1,lineMiterLimit:4,pointRadiusScale:1,pointRadiusMinPixels:2,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:(d,s,f)=>s?DEFAULT_SELECTED_LINE_COLOR:DEFAULT_LINE_COLOR,getFillColor:(d,s,f)=>s?DEFAULT_SELECTED_FILL_COLOR:DEFAULT_FILL_COLOR,getRadius:d=>d&&d.properties&&d.properties.radius||d&&d.properties&&d.properties.size||1,getLineWidth:d=>d&&d.properties&&d.properties.lineWidth||3,getTentativeLineColor:d=>DEFAULT_TENTATIVE_LINE_COLOR,getTentativeFillColor:d=>DEFAULT_TENTATIVE_FILL_COLOR,getTentativeLineWidth:d=>d&&d.properties&&d.properties.lineWidth||3,editHandleType:"point",editHandlePointRadiusScale:1,editHandlePointOutline:!0,editHandlePointStrokeWidth:2,editHandlePointRadiusUnits:"pixels",editHandlePointRadiusMinPixels:4,editHandlePointRadiusMaxPixels:8,getEditHandlePointColor:getEditHandleColor,getEditHandlePointOutlineColor:getEditHandleOutlineColor,getEditHandlePointRadius:getEditHandleRadius,editHandleIconAtlas:null,editHandleIconMapping:null,editHandleIconSizeScale:1,editHandleIconSizeUnits:"pixels",getEditHandleIcon:d=>d.properties.editHandleType,getEditHandleIconSize:10,getEditHandleIconColor:getEditHandleColor,getEditHandleIconAngle:0,billboard:!0},modeNameMapping={view:ViewMode,modify:ModifyMode,translate:new SnappableMode(new TranslateMode),transform:new SnappableMode(new TransformMode),scale:ScaleMode,rotate:RotateMode,duplicate:DuplicateMode,split:SplitPolygonMode,extrude:ExtrudeMode,elevation:ElevationMode,drawPoint:DrawPointMode,drawLineString:DrawLineStringMode,drawPolygon:DrawPolygonMode,drawRectangle:DrawRectangleMode,drawSquare:DrawSquareMode,drawRectangleFromCenter:DrawRectangleFromCenterMode,drawSquareFromCenter:DrawSquareFromCenterMode,drawCircleFromCenter:DrawCircleFromCenterMode,drawCircleByBoundingBox:DrawCircleByDiameterMode,drawEllipseByBoundingBox:DrawEllipseByBoundingBoxMode,drawRectangleUsing3Points:DrawRectangleUsingThreePointsMode,drawEllipseUsing3Points:DrawEllipseUsingThreePointsMode,draw90DegreePolygon:Draw90DegreePolygonMode,drawPolygonByDragging:DrawPolygonByDraggingMode};class EditableGeoJsonLayer extends EditableLayer{constructor(){super(...arguments);Bt(this,"state")}renderLayers(){const f=this.getSubLayerProps({id:"geojson",data:this.props.data,fp64:this.props.fp64,filled:this.props.filled,stroked:this.props.stroked,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineCapRounded:this.props.lineCapRounded,lineMiterLimit:this.props.lineMiterLimit,pointRadiusScale:this.props.pointRadiusScale,pointRadiusMinPixels:this.props.pointRadiusMinPixels,pointRadiusMaxPixels:this.props.pointRadiusMaxPixels,getLineColor:this.selectionAwareAccessor(this.props.getLineColor),getFillColor:this.selectionAwareAccessor(this.props.getFillColor),getPointRadius:this.selectionAwareAccessor(this.props.getRadius),getLineWidth:this.selectionAwareAccessor(this.props.getLineWidth),_subLayerProps:{linestrings:{billboard:this.props.billboard,updateTriggers:{all:[this.props.selectedFeatureIndexes,this.props.mode]}},"polygons-stroke":{billboard:this.props.billboard,pickingLineWidthExtraPixels:this.props.pickingLineWidthExtraPixels,type:EditablePathLayer,updateTriggers:{all:[this.props.selectedFeatureIndexes,this.props.mode]}}},updateTriggers:{getLineColor:[this.props.selectedFeatureIndexes,this.props.mode],getFillColor:[this.props.selectedFeatureIndexes,this.props.mode],getPointRadius:[this.props.selectedFeatureIndexes,this.props.mode],getLineWidth:[this.props.selectedFeatureIndexes,this.props.mode]}});let _=[new GeoJsonLayer(f)];return _=_.concat(this.createGuidesLayers(),this.createTooltipsLayers()),_}initializeState(){super.initializeState(),this.setState({selectedFeatures:[],editHandles:[]})}shouldUpdateState(f){return super.shouldUpdateState(f)||f.changeFlags.stateChanged}updateState({props:f,oldProps:_,changeFlags:S,context:T}){if(super.updateState({oldProps:_,props:f,changeFlags:S,context:T}),S.propsOrDataChanged&&(Object.keys(_).length===0||f.mode!==_.mode)){let P;if(typeof f.mode=="function"){const H=f.mode;P=new H}else typeof f.mode=="string"?(P=modeNameMapping[f.mode],console.warn("Deprecated use of passing `mode` as a string. Pass the mode's class constructor instead.")):P=f.mode;P||(console.warn(`No mode configured for ${String(f.mode)}`),P=new DEFAULT_EDIT_MODE),P!==this.state.mode&&this.setState({mode:P,cursor:null})}let F=[];if(Array.isArray(f.selectedFeatureIndexes)&&typeof f.data=="object"&&"features"in f.data){const M=f.data;F=f.selectedFeatureIndexes.map(P=>M.features[P])}this.setState({selectedFeatures:F})}getModeProps(f){return{modeConfig:f.modeConfig,data:f.data,selectedIndexes:f.selectedFeatureIndexes,lastPointerMoveEvent:this.state.lastPointerMoveEvent,cursor:this.state.cursor,onEdit:_=>{this.setNeedsUpdate(),f.onEdit(_)},onUpdateCursor:_=>{this.setState({cursor:_})}}}selectionAwareAccessor(f){return typeof f!="function"?f:_=>f(_,this.isFeatureSelected(_),this.props.mode)}isFeatureSelected(f){return!this.props.data||!this.props.selectedFeatureIndexes||!this.props.selectedFeatureIndexes.length?!1:this.state.selectedFeatures.includes(f)}getPickingInfo({info:f,sourceLayer:_}){return _.id.endsWith("guides")&&(f.isGuide=!0),f}_updateAutoHighlight(f){if(f!=null&&f.sourceLayer)if(f.isGuide)for(const _ of f.sourceLayer.getSubLayers())_.updateAutoHighlight(f);else f.sourceLayer.updateAutoHighlight(f)}createGuidesLayers(){const _=this.getActiveMode().getGuides(this.getModeProps(this.props));if(!_||!_.features.length)return[];const S={linestrings:{billboard:this.props.billboard,autoHighlight:!1},"polygons-fill":{autoHighlight:!1},"polygons-stroke":{billboard:this.props.billboard}};return this.props.editHandleType==="icon"?S["points-icon"]={type:IconLayer,iconAtlas:this.props.editHandleIconAtlas,iconMapping:this.props.editHandleIconMapping,sizeUnits:this.props.editHandleIconSizeUnits,sizeScale:this.props.editHandleIconSizeScale,getIcon:guideAccessor(this.props.getEditHandleIcon),getSize:guideAccessor(this.props.getEditHandleIconSize),getColor:guideAccessor(this.props.getEditHandleIconColor),getAngle:guideAccessor(this.props.getEditHandleIconAngle),billboard:this.props.billboard}:S["points-circle"]={type:ScatterplotLayer,radiusScale:this.props.editHandlePointRadiusScale,stroked:this.props.editHandlePointOutline,getLineWidth:this.props.editHandlePointStrokeWidth,radiusUnits:this.props.editHandlePointRadiusUnits,radiusMinPixels:this.props.editHandlePointRadiusMinPixels,radiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:guideAccessor(this.props.getEditHandlePointRadius),getFillColor:guideAccessor(this.props.getEditHandlePointColor),getLineColor:guideAccessor(this.props.getEditHandlePointOutlineColor),billboard:this.props.billboard},[new GeoJsonLayer(this.getSubLayerProps({id:"guides",data:_,fp64:this.props.fp64,_subLayerProps:S,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineCapRounded:this.props.lineCapRounded,lineMiterLimit:this.props.lineMiterLimit,getLineColor:guideAccessor(this.props.getTentativeLineColor),getLineWidth:guideAccessor(this.props.getTentativeLineWidth),getFillColor:guideAccessor(this.props.getTentativeFillColor),pointType:this.props.editHandleType==="icon"?"icon":"circle",iconAtlas:this.props.editHandleIconAtlas}))]}createTooltipsLayers(){const _=this.getActiveMode().getTooltips(this.getModeProps(this.props));return[new TextLayer({getSize:DEFAULT_TOOLTIP_FONT_SIZE,...this.getSubLayerProps({id:"tooltips",data:_})})]}onLayerClick(f){this.getActiveMode().handleClick(f,this.getModeProps(this.props))}onLayerKeyUp(f){this.getActiveMode().handleKeyUp(f,this.getModeProps(this.props))}onStartDragging(f){this.getActiveMode().handleStartDragging(f,this.getModeProps(this.props))}onDragging(f){this.getActiveMode().handleDragging(f,this.getModeProps(this.props))}onStopDragging(f){this.getActiveMode().handleStopDragging(f,this.getModeProps(this.props))}onPointerMove(f){this.setState({lastPointerMoveEvent:f}),this.getActiveMode().handlePointerMove(f,this.getModeProps(this.props))}getCursor({isDragging:f}){if(this.state===null||this.state===void 0)return null;let{cursor:_}=this.state;return _||(_=f?"grabbing":"grab"),_}getActiveMode(){return this.state.mode}}Bt(EditableGeoJsonLayer,"layerName","EditableGeoJsonLayer"),Bt(EditableGeoJsonLayer,"defaultProps",defaultProps$1);const SpatialAnnotationState=reactExports.createContext(void 0),getEmptyFeatureCollection=()=>({type:"FeatureCollection",features:[]});function useSelectionCoords(d){const s=d.features[0];return reactExports.useMemo(()=>s?s.geometry.coordinates[0]:[],[s])}function useScatterModelMatrix(){const s=1/useRegionScale(),[f,_]=reactExports.useState(new Matrix4().scale(s));return reactExports.useEffect(()=>{const S=new Matrix4().scale(s);_(S)},[s]),{modelMatrix:f,setModelMatrix:_}}function useCreateRange(d){const s=useChartID(),{modelMatrix:f}=useScatterModelMatrix(),[_,S]=reactExports.useState(getEmptyFeatureCollection()),[T,F]=reactExports.useState(new CompositeMode([])),{filterPoly:M,removeFilter:P,rangeDimension:H}=useRangeDimension2D(),J=useSelectionCoords(_);reactExports.useEffect(()=>{console.log("pending different way of managing resetButton?"),d.removeFilter=()=>{S(getEmptyFeatureCollection())}}),reactExports.useEffect(()=>{if(J.length===0){d.resetButton.style.display="none",P();return}d.resetButton.style.display="inline",M(J)},[J,M,P,d]);const[K,oe]=reactExports.useState([]);return{editableLayer:reactExports.useMemo(()=>new EditableGeoJsonLayer({id:`selection_${getVivId(`${s}detail-react`)}`,data:_,mode:T,getFillColor:[140,140,140,50],getLineColor:[255,255,255,200],getLineWidth:1,getEditHandlePointRadius:2,editHandlePointStrokeWidth:1,editHandleIconSizeScale:1,editHandlePointRadiusMaxPixels:5,getEditHandlePointColor:ae=>[0,0,ae.properties.editHandleType==="intermediate"?200:0,255],lineWidthMinPixels:1,selectedFeatureIndexes:K,onEdit:({updatedData:ae})=>{const ge=ae.features.pop();ae.features=[ge],S(ae)},onHover(ae,ge){ae.featureType!=="points"&&oe(ae.index!==-1?[ae.index]:[])}}),[_,T,s,K]),rangeDimension:H,selectionFeatureCollection:_,selectionMode:T,setSelectionMode:F,modelMatrix:f}}function useCreateMeasure(){const[d,s]=reactExports.useState([0,0]),[f,_]=reactExports.useState([0,0]);return{startPixels:d,setStart:s,endPixels:f,setEnd:_}}function useCreateSpatialAnnotationState(d){const s=useCreateRange(d),f=useCreateMeasure();return{rectRange:s,measure:f}}function SpatialAnnotationProvider({chart:d,children:s}){const f=useCreateSpatialAnnotationState(d);return jsxRuntimeExports.jsx(SpatialAnnotationState.Provider,{value:f,children:s})}function useSpatialLayers(){const{rectRange:d}=reactExports.useContext(SpatialAnnotationState),s=useScatterplotLayer(d.modelMatrix),{getTooltip:f}=s;return{getTooltip:f,scatterProps:s,selectionLayer:d.editableLayer,selectionProps:d}}function mapCoords(d,s){return typeof d[0]=="number"?!Number.isNaN(d[0])&&Number.isFinite(d[0])?s(d):d:d.map(f=>mapCoords(f,s)).filter(Boolean)}function translate(d,s){const f=mapCoords(d.geometry.coordinates,_=>[_[0]-s[0],_[1]-s[1]]);return d.geometry.coordinates=f,d}class TranslateModeEx extends TranslateMode{getTranslateAction(s,f,_,S){if(!this._geometryBeforeTranslate)return null;let T=new ImmutableFeatureCollection(S.data);const F=S.selectedIndexes,{viewport:M,screenSpace:P}=S.modeConfig||{};if(M&&P)return super.getTranslateAction(s,f,_,S);const H=point$b(s),J=point$b(f),K=H.geometry.coordinates,oe=J.geometry.coordinates,se=[K[0]-oe[0],K[1]-oe[1]],ae=this._geometryBeforeTranslate.features.map(ge=>translate(clone$3(ge),se));for(let ge=0;ge<F.length;ge++){const he=F[ge],Be=ae[ge];T=T.replaceGeometry(he,Be.geometry)}return{updatedData:T.getObject(),editType:_,editContext:{featureIndexes:F}}}}class DrawRectangleByDraggingMode extends DrawPolygonByDraggingMode{handleStopDragging(s,f){f.data.features[f.data.features.length-1].properties={},f.onEdit({updatedData:f.data,editType:"finishDrawingRectangle",editContext:{position:s.mapCoords}})}handleDraggingAux(s,f){var ae;const _=s.pointerDownMapCoords,S=s.mapCoords,T=Math.min(_[0],S[0]),F=Math.min(_[1],S[1]),M=Math.max(_[0],S[0]),P=Math.max(_[1],S[1]),H=[T,F],J=[M,P],K={type:"Feature",properties:{tentativeRectangle:!0},geometry:{type:"Polygon",coordinates:[[H,[J[0],H[1]],J,[H[0],J[1]],H]]}},oe=[...f.data.features];oe.length>0&&((ae=oe[oe.length-1].properties)!=null&&ae.tentativeRectangle)?oe[oe.length-1]=K:oe.push(K);const se={...f.data,features:oe};f.onEdit({updatedData:se,editType:"setTentativeRectangle",editContext:{position:s.mapCoords}})}}class EditMode extends CompositeMode{constructor(){super([new TranslateModeEx,new ModifyMode])}}class RectangleMode extends CompositeMode{constructor(){super([new DrawRectangleByDraggingMode,new TranslateModeEx])}}class PolygonMode extends CompositeMode{constructor(){super([new DrawPolygonMode,new TranslateModeEx])}}const Tools={pan:{name:"Pan",ToolIcon:default_1$a,mode:TranslateModeEx},rectangle:{name:"Rectangle",ToolIcon:default_1$9,mode:RectangleMode},polygon:{name:"Polygon",ToolIcon:default_1$8,mode:PolygonMode},freehand:{name:"Freehand",ToolIcon:default_1$7,mode:DrawPolygonByDraggingMode},transform:{name:"Modify",ToolIcon:default_1$6,mode:EditMode}},ToolArray=Object.values(Tools),ToolButton=({name:d,ToolIcon:s,selectedTool:f,setSelectedTool:_})=>{const S=reactExports.useMemo(()=>({backgroundColor:f===d?"rgba(255,255,255,0.2)":"transparent",borderRadius:10,zIndex:2}),[f,d]);return jsxRuntimeExports.jsx(Tooltip$1,{title:d,children:jsxRuntimeExports.jsx(IconButton,{style:S,onClick:()=>_(d),"aria-label":d,children:jsxRuntimeExports.jsx(s,{})})})},SelectionOverlay=observer(function d(){const{selectionProps:s}=useSpatialLayers(),{setSelectionMode:f}=s,[_,S]=reactExports.useState("Pan"),T=reactExports.useCallback(M=>{var H;const P=(H=Object.values(Tools).find(J=>J.name===M))==null?void 0:H.mode;if(!P){console.error("no mode found for tool",M);return}f(new P),S(M)},[f]),F=reactExports.useMemo(()=>ToolArray.map(({name:M,ToolIcon:P,mode:H})=>jsxRuntimeExports.jsx(ToolButton,{name:M,ToolIcon:P,selectedTool:_,setSelectedTool:T},M)),[_,T]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(ButtonGroup,{variant:"contained","aria-label":"choose tool for manipulating view or selection",className:"z-[2] p-2",children:F})})}),useViewStateLink=()=>{const d=useViewerStoreApi(),s=useChartID(),f=useMetadata();reactExports.useEffect(()=>{var P;if(!((P=window.mdv.chartManager)!=null&&P.viewData))return;const _=window.mdv.chartManager,{viewData:S}=_,T=_.getChart(s);if(!S.links)return;const F=S.links.filter(H=>H.type==="view_state"&&H.linked_charts.includes(s));return F.length===0?void 0:(console.log("found view state link(s)",F),d.subscribe(({viewState:H})=>{T.ignoreStateUpdate=!0;const J=H.zoom,K=f.Pixels.PhysicalSizeX,oe=f.Pixels.PhysicalSizeXUnit;F.forEach(se=>{se.linked_charts.filter(ge=>ge!==s).map(ge=>_.getChart(ge)).forEach(ge=>{var ve,At;if(!ge||ge.ignoreStateUpdate)return;const he=(ve=ge.vivStores)==null?void 0:ve.viewerStore.getState().metadata;if(!he)return;const Be=he.Pixels.PhysicalSizeX;if(he.Pixels.PhysicalSizeXUnit!==oe)throw"physical size units do not match";const be=K/Be,Re=J*be,Fe=H.target.map((Ct,Rt)=>Ct*be),Me={...H,zoom:Re,target:Fe};(At=ge.viewerStore)==null||At.setState({viewState:Me})})}),T.ignoreStateUpdate=!1}))},[d,s,f.Pixels.PhysicalSizeX,f.Pixels.PhysicalSizeXUnit])};function useRowsAsColumnsLinks(){const d=useDataSources(),s=useDataStore();//! this whole dataSource vs dataStore thing still confuses me
if(!s)throw"no dataStore!!!";if(s.links)for(const f in s.links){const _=s.links[f];if(_.rows_as_columns){const S=d.find(T=>T.name===f);if(!S)throw new Error;return{linkedDs:S,link:_.rows_as_columns}}}return null}function useHighlightedForeignRows(){const d=reactExports.useId(),s=useRowsAsColumnsLinks(),[f,_]=reactExports.useState([]);return reactExports.useEffect(()=>{if(!s)return;const{linkedDs:S,link:T}=s,F=S.dataStore;return F.addListener(`highlightedRows:${d}`,async(M,P)=>{if(M==="data_highlighted"){const H=P.indexes.map(J=>({index:J,value:F.getRowText(J,T.name_column)}));_(H)}else if(M==="filtered"){const H=await F.getFilteredIndices();//! this Array.from could be suboptimal for large numbers of indices
const J=Array.from(H).map(K=>({index:K,value:F.getRowText(K,T.name_column)}));_(J)}}),()=>{F.removeListener(`highlightedRows:${d}`)}},[d,s]),f}function useHighlightedForeignRowsAsColumns(d=10,s=""){const f=useHighlightedForeignRows(),_=useRowsAsColumnsLinks(),{link:S}=_||{link:null};//!! passing the whole racLink object lead to an infinite loop
const[T,F]=reactExports.useState([]),M=useDataStore();return reactExports.useEffect(()=>{if(f.length===0){F([]);return}const P=window.mdv.chartManager,H=Object.keys(S.subgroups)[0],J=s.toLowerCase(),K=f.filter(({value:se})=>se.toLowerCase().includes(J)).slice(0,d).map(se=>{const ae=`${H}|${se.value}(${H})|${se.index}`;return M.addColumnFromField(ae)}),oe=K.map(se=>se.field);P.loadColumnSet(oe,M.name,()=>{F(K)})},[f,d,S,M,s]),T}class VivContrastExtension extends LayerExtension{static get componentName(){return"VivContrastExtension"}getShaders(s){return{inject:{"fs:#decl":`///----- VivContrastExtension decl
                uniform float contrast[6];
                uniform float brightness[6];

                //https://cis700-procedural-graphics.github.io/files/toolbox_functions.pdf
                float bias(float b, float t) {
                    return pow(t, log(b) / log(0.5));
                }
                float gain(float g, float t) {
                    if (t < 0.5) {
                        return bias(1. - g, 2. * t) / 2.;
                    } else {
                        return 1. - bias(1. - g, 2. - 2. * t) / 2.;
                    }
                }
                float applyBrightnessContrast(float intensity, int channelIndex) {
                    float c = contrast[channelIndex];
                    float b = brightness[channelIndex];
                    return bias(b, gain(c, intensity));
                }
                ///---- end VivContrastExtension
                `,"fs:DECKGL_PROCESS_INTENSITY":`///----- VivContrastExtension DECKGL_PROCESS_INTENSITY
                intensity = apply_contrast_limits(intensity, contrastLimits);
                intensity = clamp(intensity, 0., 1.);
                intensity = applyBrightnessContrast(intensity, channelIndex);
                ///---- end VivContrastExtension
                `}}}updateState(s,f){const{props:_}=s,{contrast:S,brightness:T}=_;if(S.length!==6||T.length!==6){const F=Array(6),M=Array(6);for(let P=0;P<6;P++)F[P]=S[P]??1,M[P]=T[P]??0;for(const P of this.getModels())P.setUniforms({contrast:F,brightness:M});return}for(const F of this.getModels())F.setUniforms({contrast:S,brightness:T})}}const VivScatter=()=>{const d=useChart();return jsxRuntimeExports.jsx(SpatialAnnotationProvider,{chart:d,children:jsxRuntimeExports.jsx(Main,{})})},useJsonLayer=()=>{const d=useChartID(),{root:s}=useProject(),{showJson:f}=useConfig(),{json:_}=useRegion(),S=`json_${getVivId(`${d}detail-react`)}`;return reactExports.useMemo(()=>_?new GeoJsonLayer({id:S,data:`${s}/${_}`,opacity:.25,filled:!0,getFillColor:F=>[255,255,255,150],getLineColor:F=>[F.properties.DN,255,255,150],getLineWidth:2,lineWidthMinPixels:1,pickable:!0,autoHighlight:!0,getText:F=>F.properties.DN,getTextColor:[255,255,255,255],getTextSize:12,textBackground:!0,visible:f}):null,[_,f,S,s])},Main=observer(()=>{const d=useLoader(),s=useViewerStoreApi(),[f,_]=useChartSize(),S=useChartID(),T=`${S}detail-react`,F=useOuterContainer(),{scatterProps:M,selectionLayer:P}=useSpatialLayers(),{scatterplotLayer:H,getTooltip:J}=M,K=useJsonLayer(),{colors:oe,contrastLimits:se,channelsVisible:ae,selections:ge,brightness:he,contrast:Be}=useChannelsStore(({colors:Ct,contrastLimits:Rt,channelsVisible:It,selections:xt,brightness:wt,contrast:Ft})=>({colors:Ct,contrastLimits:Rt,channelsVisible:It,selections:xt,brightness:wt,contrast:Ft}),shallow$1),pe=useViewerStore(Ct=>Ct.viewState);useViewStateLink();const be=reactExports.useRef(),Re=reactExports.useRef(null);reactExports.useEffect(()=>{d&&(pe||s.setState({viewState:getDefaultInitialViewState(d,{width:f,height:_})}))},[d,f,_,pe,s.setState]);const Fe=reactExports.useMemo(()=>[new ColorPaletteExtension,new VivContrastExtension],[]),Me=reactExports.useMemo(()=>new DetailView({id:T,snapScaleBar:!0,width:f,height:_}),[T,f,_]);reactExports.useEffect(()=>{M.viewState&&(s.setState({viewState:M.viewState}),be.current=M.viewState)},[M.viewState,s.setState]);const ve=reactExports.useMemo(()=>({loader:d,selections:ge,contrastLimits:se,extensions:Fe,colors:oe,channelsVisible:ae,brightness:he,contrast:Be}),[d,ge,se,Fe,oe,ae,he,Be]),At=reactExports.useMemo(()=>({getTooltip:J,style:{zIndex:"-1"},layers:[K,H,P],id:`${S}deck`,onAfterRender:()=>{M.onAfterRender()},glOptions:{preserveDrawingBuffer:!0},controller:{doubleClickZoom:!1}}),[H,P,K,S,J,M.onAfterRender]);return pe?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectionOverlay,{}),jsxRuntimeExports.jsx(MDVivViewer,{outerContainer:F,views:[Me],layerProps:[ve],viewStates:[{...pe,id:T}],onViewStateChange:Ct=>{s.setState({viewState:{...Ct.viewState,id:T}}),Re.current&&(Re.current.innerText=JSON.stringify(Ct.viewState,null,2))},deckProps:At})]}):jsxRuntimeExports.jsx("div",{children:"Loading..."})}),PopoverPicker=({color:d,onChange:s})=>{const[f,_,S]=d||[255,255,255],T=d?`#${f.toString(16).padStart(2,"0")}${_.toString(16).padStart(2,"0")}${S.toString(16).padStart(2,"0")}`:"#000000",F=reactExports.useMemo(()=>({border:"none",cursor:"pointer",width:"100%",backgroundColor:T}),[T]);return jsxRuntimeExports.jsx("input",{type:"color",className:"color-picker-no-border",style:F,value:T,onChange:M=>{const P=M.target.value,[H,J,K]=[P.slice(1,3),P.slice(3,5),P.slice(5,7)].map(oe=>Number.parseInt(oe,16));s([H,J,K])}})};function MainVivColorDialog({vivStores:d}){return jsxRuntimeExports.jsx(VivProvider,{vivStores:d,children:jsxRuntimeExports.jsx(Test$1,{})})}const ChannelChooser=({index:d})=>{const s=useMetadata().Pixels.Channels.map(H=>H.Name),{selections:f,setPropertiesForChannel:_}=useChannelsStore(({selections:H,setPropertiesForChannel:J})=>({selections:H,setPropertiesForChannel:J}),shallow$1),S=useLoader(),{setIsChannelLoading:T,isChannelLoading:F,removeIsChannelLoading:M,use3d:P}=useViewerStore(({setIsChannelLoading:H,isChannelLoading:J,removeIsChannelLoading:K,use3d:oe})=>({setIsChannelLoading:H,isChannelLoading:J,removeIsChannelLoading:K,use3d:oe}),shallow$1);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("select",{disabled:F[d],value:f[d].c,className:"w-full p-1",onChange:async H=>{try{const J={...f[d],c:Number.parseInt(H.target.value)};T(d,!0);const{domain:K,contrastLimits:oe}=await getSingleSelectionStats({loader:S,selection:J,use3d:P});_(d,{domains:K,contrastLimits:oe}),T(d,!1),_(d,{selections:J})}catch(J){console.error("failed to load channel"),console.error(J),M(d)}},children:s.map((H,J)=>jsxRuntimeExports.jsx("option",{value:J,children:H},`${J}_${H}`))})})},BrightnessContrast=({index:d})=>{const{contrast:s,brightness:f}=useChannelsStore(({contrast:T,brightness:F})=>({contrast:T,brightness:F})),_=useChannelsStoreApi(),S=useViewerStore(T=>T.isChannelLoading);return jsxRuntimeExports.jsxs("div",{className:"col-span-5 pl-2 pr-2 flex items-center gap-4",children:["contrast:",jsxRuntimeExports.jsx(Slider,{size:"small",disabled:S[d],value:s[d],min:.1,max:.9,step:.01,onChange:(T,F)=>{s[d]=F;const M=[...s];_.setState({contrast:M})},onClick:T=>{if(T.detail===2){s[d]=.5;const F=[...s];_.setState({contrast:F})}}}),"brightness:",jsxRuntimeExports.jsx(Slider,{size:"small",disabled:S[d],value:f[d],min:.01,max:.99,step:.01,onChange:(T,F)=>{f[d]=F;const M=[...f];_.setState({brightness:M})},onClick:T=>{if(T.detail===2){f[d]=.5;const F=[...f];_.setState({brightness:F})}}})]})},ChannelController=({index:d})=>{const s=useChannelsStore(({contrastLimits:ae})=>ae),{colors:f,domains:_,channelsVisible:S,removeChannel:T}=useChannelsStore(({colors:ae,domains:ge,channelsVisible:he,removeChannel:Be})=>({colors:ae,domains:ge,channelsVisible:he,removeChannel:Be})),F=useViewerStore(ae=>ae.isChannelLoading),M=useMetadata(),P=useChannelsStoreApi();if(!M)throw"no metadata";const H=S[d],J=f[d],K=`rgb(${J[0]}, ${J[1]}, ${J[2]})`,oe=reactExports.useMemo(()=>({gridTemplateColumns:"0.4fr 0.1fr 0.1fr 1fr 0.1fr"}),[]),se=reactExports.useMemo(()=>({color:K,marginLeft:"10px"}),[K]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"grid justify-start items-center p-1",style:oe,children:[jsxRuntimeExports.jsx(ChannelChooser,{index:d}),jsxRuntimeExports.jsx(Checkbox,{checked:H,disabled:F[d],onChange:()=>{S[d]=!H;const ae=[...S];P.setState({channelsVisible:ae})}}),jsxRuntimeExports.jsx(PopoverPicker,{color:J,onChange:ae=>{f[d]=ae;const ge=[...f];P.setState({colors:ge})}}),jsxRuntimeExports.jsx(Slider,{size:"small",disabled:F[d],style:se,value:s[d],min:_[d][0],max:_[d][1],valueLabelDisplay:"auto",onChange:(ae,ge)=>{s[d]=ge;const he=[...s];P.setState({contrastLimits:he})}}),jsxRuntimeExports.jsx("button",{type:"button",className:"pl-4",onClick:()=>{T(d)},children:jsxRuntimeExports.jsx(X$2,{})}),jsxRuntimeExports.jsx(BrightnessContrast,{index:d})]})})},AddChannel=()=>{const d=useLoader(),{selections:s,setPropertiesForChannel:f}=useChannelsStore(({selections:M,setPropertiesForChannel:P})=>({selections:M,setPropertiesForChannel:P})),_=s.length<6,S=useChannelsStore(M=>M.addChannel),{use3d:T,setIsChannelLoading:F}=useViewerStore(({use3d:M,setIsChannelLoading:P})=>({use3d:M,setIsChannelLoading:P}),shallow$1);return jsxRuntimeExports.jsx("button",{type:"button",className:"p-2 rounded-lg bg-slate-400",disabled:!_,onClick:async()=>{const M=s.length;F(M,!0);const P={c:0,z:0,t:0};S({selections:P,ids:String(Math.random()),channelsVisible:!0});const{domain:H,contrastLimits:J}=await getSingleSelectionStats({loader:d,selection:P,use3d:T});f(M,{domains:H,contrastLimits:J}),F(M,!1)},children:"Add channel"})},Test$1=()=>{const d=useChannelsStore(({ids:s})=>s);return jsxRuntimeExports.jsxs("div",{className:"bg-[hsl(var(--input))] w-full",children:[d.map((s,f)=>jsxRuntimeExports.jsx(ChannelController,{index:f},s)),jsxRuntimeExports.jsx(AddChannel,{})]})},ColorChannelDialogReact=observer(function d({vivStores:s}){return jsxRuntimeExports.jsx(MainVivColorDialog,{vivStores:s})});class ColorDialogReactWrapper extends BaseDialog{constructor(f){f.__doc__!==document&&console.warn("ColorDialogReactWrapper may have styling issues in popouts...");const _={width:500,title:`Color Channels (${f.config.title})`,doc:f.__doc__||document,onclose:()=>{f.colorDialog=null,f.dialogs.splice(f.dialogs.indexOf(this),1)}};super(_,f);Bt(this,"_root")}get root(){return this._root}set root(f){this._root=f}init(f){const _=createEl("div",{},this.dialog);this.root=createMdvPortal(jsxRuntimeExports.jsx(ChartProvider,{chart:f,children:jsxRuntimeExports.jsx(ColorChannelDialogReact,{vivStores:f.vivStores})}),_,this)}close(){super.close(),this.root?this.root.unmount():console.warn("not unmounting react root for dialog because of weirdness")}}BaseDialog.experiment.ColorDialogReact=ColorDialogReactWrapper;function VivScatterChartRoot(){const{vivStores:d}=useChart();return jsxRuntimeExports.jsx(VivProvider,{vivStores:d,children:jsxRuntimeExports.jsx(MainChart,{})})}const MainChart=observer(()=>{const d=useImgUrl(),s=useViewerStore(S=>S.isViewerLoading),f=useViewerStoreApi();reactExports.useEffect(()=>{if(!d)throw"no image url";const S={urlOrFile:d,description:"test"};f.setState({source:S})},[d,f.setState]);const _=useViewerStore(S=>S.source);return useImage(_),!s&&jsxRuntimeExports.jsx(VivScatter,{})}),scatterDefaults={course_radius:1,radius:10,opacity:1,color_by:null,color_legend:{display:!1},tooltip:{show:!1},category_filters:[],zoom_on_filter:!1,point_shape:"circle",contour_fill:!1,contour_bandwidth:.1,contour_intensity:1,contour_opacity:.5};function adaptConfig(d){const s={...scatterDefaults,...d};return s.channel||(s.channel=0),s.contourParameter||(s.contourParameter=s.param[2]),s.viv=applyDefaultChannelState(s.viv),s}class VivMdvReact extends BaseReactChart{constructor(f,_,S){const T=adaptConfig(S);super(f,_,T,VivScatterChartRoot);Bt(this,"colorDialog");Bt(this,"vivStores");Bt(this,"ignoreStateUpdate",!1);Bt(this,"colorBy");this.colorByColumn(T.color_by),makeObservable(this,{colorBy:observable,colorByColumn:action,colorByDefault:action}),this.addMenuIcon("fas fa-palette","Alter Channels").addEventListener("click",()=>{this.colorDialog||(this.colorDialog=new ColorDialogReactWrapper(this),this.dialogs.push(this.colorDialog))}),this.vivStores=createVivStores()}get viewerStore(){var f;return(f=this.vivStores)==null?void 0:f.viewerStore}colorByColumn(f){if(!f)return this.colorByDefault();this.config.color_by=f,this.colorBy=this.getColorFunction(f,!0)}colorByDefault(){this.config.color_by=null,this.colorBy=null}getColorOptions(){return{colorby:"all"}}getSettings(){const f=this.config,{tooltip:_}=f,S=this.dataStore.getColumnList(),T=S.filter(se=>se.datatype.match(/text/i)),F=super.getSettings();let M=this.dataStore.getColumnValues(f.param[2])||[];M=M.map(se=>({t:se})),M.push({t:"None"});const P=observable.array([M,"t","t"]),H=f.category_filters.map(se=>{const ae=this.dataStore.columnIndex[se.column].values.slice();return ae.unshift("all"),{type:"multidropdown",label:`'${se.column}' filter`,current_value:se.category,values:[ae],func:ge=>{se.category=ge,f.category_filters=f.category_filters.slice()}}}),J=this.dataStore,oe=Object.keys(J.regions.all_regions).filter(se=>J.regions.all_regions[se].viv_image).map(se=>({name:se,value:se}));return F.concat([{type:"dropdown",label:`Image (${J.getColumnName(J.regions.region_field)})`,current_value:f.region,values:[oe,"name","value"],func:se=>{console.log("setting image region:",se),f.title===f.region&&(f.title=se),f.region=se,f.background_filter.category=se}},{type:"check",label:"Show Tooltip",current_value:_.show,func:async se=>{if(_.show=se,!_.column){const ae=S[0].field;console.log("No tooltip column set, using first column:",ae),await loadColumn(this.dataStore.name,S[0].field),_.column=S[0].field}}},{type:"dropdown",label:"Tooltip value",current_value:f.tooltip.column||S[0].field,values:[S,"name","field"],func:async se=>{await loadColumn(this.dataStore.name,se),_.column=se}},{type:"dropdown",label:"Shape",current_value:f.point_shape,values:[["circle","square","gaussian"]],func:se=>{f.point_shape=se}},{type:"radiobuttons",label:"course radius",current_value:f.course_radius||1,choices:[[.1,.1],[1,1],[10,10],[100,100]],func:se=>{f.course_radius=se}},{type:"slider",label:"radius",current_value:f.radius||5,min:0,max:20,continuous:!0,func:se=>{f.radius=se}},{type:"slider",label:"opacity",current_value:Math.sqrt(f.opacity||scatterDefaults.opacity),min:0,max:1,continuous:!0,func:se=>{f.opacity=se*se}},{type:"check",label:"zoom on filter",current_value:f.zoom_on_filter||!1,func:se=>{f.zoom_on_filter=se}},{type:"check",label:"show json layer",current_value:f.showJson||!1,func:se=>{f.showJson=se}},{type:"folder",label:"Density Visualisation",current_value:[{type:"folder",label:"Category selection",current_value:[{type:"dropdown",label:"Contour parameter",current_value:f.contourParameter||f.param[2],values:[T,"name","field"],func:se=>{if(se===f.contourParameter)return;f.contourParameter=f.param[2]=se;const ae=(this.dataStore.getColumnValues(se)||[]).map(ge=>({t:ge}));ae.push({t:"None"}),P[0]=ae}},{type:"multidropdown",label:"Contour Category 1",current_value:f.category1||"None",values:P,func:se=>{se==="None"&&(se=null),f.category1=se}},{type:"multidropdown",label:"Contour Category 2",current_value:f.category2||"None",values:P,func:se=>{se==="None"&&(se=null),f.category2=se}}]},{type:"slider",max:25,min:1,current_value:f.contour_bandwidth,label:"KDE Bandwidth",continuous:!0,func:se=>{f.contour_bandwidth=se}},{label:"Fill Contours",type:"check",current_value:f.contour_fill,func:se=>{f.contour_fill=se}},{type:"slider",max:1,min:0,current_value:f.contour_intensity,continuous:!0,label:"Fill Intensity",func:se=>{f.contour_intensity=se}},{type:"slider",max:1,min:0,doc:this.__doc__,current_value:f.contour_opacity,continuous:!1,label:"Contour opacity",func:se=>{f.contour_opacity=se**3}}]},{type:"folder",label:"Category Filters",current_value:H}])}getConfig(){const f=super.getConfig();if(this.vivStores){const{viewerStore:_,channelsStore:S,imageSettingsStore:T}=this.vivStores,F=S.getState(),M=_.getState(),H={viewerStore:{viewState:{target:M.viewState.target,zoom:M.viewState.zoom}},channelsStore:{channelsVisible:F.channelsVisible,colors:F.colors,contrastLimits:F.contrastLimits,brightness:F.brightness,contrast:F.contrast,domains:F.domains,selections:F.selections},imageSettingsStore:{}};console.table(H),f.viv={...f.viv,...H}}return f}}BaseChart.types.VivMdvRegionReact={...BaseChart.types.viv_scatter_plot,init:(d,s,f)=>{BaseChart.types.viv_scatter_plot.init(d,s,f),d.radius=scatterDefaults.radius},class:VivMdvReact,name:"Viv Scatter Plot (react)"};const vSideEffect=42;async function getExportCsvStream(d,s="	",f=`
`){const _=d.columns,S=d.dataStore;d.updateModel();const T=d.data,F=T.length,M=new TextEncoder;return new ReadableStream({async start(H){try{const J=["index",..._].join(s)+f;H.enqueue(M.encode(J));for(let K=0;K<F;K++){const oe=T[K],se=S.getRowAsObject(oe,_),ae=[K].concat(_.map(ge=>se[ge])).join(s)+f;H.enqueue(M.encode(ae)),K%1e5===0&&await new Promise(ge=>setTimeout(ge,0))}H.close(),alert("Export complete")}catch(J){console.error("Stream writing failed:",J),H.error(J)}}})}class DataModel{constructor(s,f={}){this.dataStore=s,this.data=new Int32Array(0);const _=0;for(let S=0;S<_;S++)this.data[S]=S;this.size=_,this.listeners={},(f.autoupdate==null||f.autoupdate===!0)&&s.addListener("sss",S=>{S==="filtered"&&this.updateModel()})}getLength(){return this.size}addListener(s,f){this.listeners[s]=f}setColumns(s){this.columns=s}sort(s,f){if(s==="__index__"){this.data.sort(),f==="desc"&&this.data.reverse();return}const _=this.dataStore.getRawColumn(s),S=this.dataStore.columnIndex[s];if(S.datatype==="unique"){const T={},F=new TextDecoder,M=S.stringLength,P=f==="desc"?1:-1;for(let H=0;H<this.data.length;H++){const J=this.data[H];T[J]=F.decode(_.slice(J*M,J*M+M))}this.data.sort((H,J)=>T[H].localeCompare(T[J])*P)}else f==="desc"?this.data.sort((T,F)=>{let M=_[T],P=_[F];return M=Number.isNaN(M)?Number.MAX_VALUE:M,P=Number.isNaN(P)?Number.MAX_VALUE:P,M-P}):this.data.sort((T,F)=>{let M=_[T],P=_[F];return M=Number.isNaN(M)?Number.MIN_VALUE:M,P=Number.isNaN(P)?Number.MIN_VALUE:P,P-M})}createColumn(s,f){const _={name:s,field:s,datatype:"text",values:[""]},S=new SharedArrayBuffer(this.dataStore.size);if(f){const T=this.dataStore.getRawColumn(f);new Uint8Array(S).set(T),_.values=this.dataStore.getColumnValues(f).slice(0)}this.dataStore.addColumn(_,S,!0)}removeColumn(s){this.dataStore.removeColumn(s,!0,!0)}async getDataAsBlob(s="	",f=`
`){const _=await getExportCsvStream(this,s,f);return await new Response(_).blob()}getValueSuggestion(s,f){const _=this.dataStore.getColumnValues(f);for(const S of _)if(S===s||S.startsWith(s))return S;return null}_getValueIndex(s,f){let _=f.values.indexOf(s);if(_===-1){if(f.values.push(s),f.values.length>256)throw new Error(`text column '${f.name}' exceeded 256 values when adding '${s}'`);_=f.values.length-1}return _}updateValue(s,f,_,S=!0){const T=this.dataStore.columnIndex[_],F=this._getValueIndex(s,T);T.data[f]=F,S&&this.dataStore.dataChanged([_])}updateRange(s,f,_,S){const T=this.dataStore.getRawColumn(s),F=S==="+"?T[this.data[f]]:T[this.data[_]];let M=S==="+"?f:_;const P=S==="+"?1:-1,H=S==="+"?_+1:f-1;for(;M!==H;M+=P)T[this.data[M]]=F;this.dataStore.dataChanged([s])}replaceValues(s,f,_,S=!0){const T=this.dataStore.columnIndex[_],F=this._getValueIndex(s,T);if(f==="_all_")for(let M=0;M<this.data.length;M++)T.data[this.data[M]]=F;else if(f==="_blank_"){const M=T.values.indexOf(s);if(M===-1)return;for(let P=0;P<this.data.length;P++){const H=this.data[P];T.data[H]===M&&(T.data[this.data[P]]=F)}}else if(f==="_delete_"){this.dataStore.cleanColumnData(_);return}else{const M=this._getValueIndex(f,T);for(let P=0;P<this.data.length;P++){const H=this.data[P];T.data[H]===F&&(T.data[this.data[P]]=M)}}S&&this.dataStore.dataChanged([_])}updateModel(){const s=this.dataStore.filterArray;this.data=new Int32Array(this.dataStore.filterSize);const f=this.data,_=this.dataStore.size;let S=0;for(let T=0;T<_;T++)s[T]===0&&(f[S++]=T);this.size=this.dataStore.filterSize;for(const T in this.listeners)this.listeners[T]()}getId(s){return this.data[s]}getItemField(s,f){return this.dataStore.getRowAsObject(this.data[s],[f])[f]}getItem(s){return this.dataStore.getRowAsObject(this.data[s],this.columns)}}const COL_TYPE="multitext",SEP=/\W*\;\W*/,JOIN="; ",splitTags=d=>d.split(SEP).filter(s=>s);function getTagValueIndices(d,s){if(d.match(SEP))throw new Error("getTagValueIndices: tag must not contain separator (should be handled before calling this function)");return s.values.map((f,_)=>f.split(SEP).includes(d)?_:-1).filter(f=>f!==-1)}class TagModel{constructor(s,f="__tags"){Bt(this,"tagColumn");Bt(this,"dataStore");Bt(this,"dataModel");Bt(this,"isReady",!1);Bt(this,"listeners",[]);if(this.dataStore=s,this.dataModel=new DataModel(s,{autoupdate:!0}),this.dataModel.updateModel(),this.dataModel.addListener("tag",()=>{this.callListeners()}),s.columnIndex[f])loadColumn(s.name,f).then(S=>{this.isReady=!0,this.callListeners()});else{const S={name:f,datatype:"multitext",editable:!0,separator:";",field:f},T=new SharedArrayBuffer(s.size*2);s.addColumn(S,T),this.isReady=!0}const _=s.columnIndex[f];if(_.datatype!==COL_TYPE)throw new Error(`column '${f}' is not of type '${COL_TYPE}'`);this.tagColumn=_}callListeners(){this.listeners.map(s=>s())}addListener(s){return this.listeners.push(s),s}removeListener(s){const f=this.listeners.indexOf(s);f!==-1&&this.listeners.splice(f,1)}setTag(s,f=!0){setTag({tag:s,...this},f),this.dataModel.updateModel(),this.callListeners()}getTags(){return getTags(this.tagColumn)}entireSelectionHasTag(s){const f=this.tagColumn;if(s.match(SEP))return s.split(SEP).every(S=>this.entireSelectionHasTag(S));const _=getTagValueIndices(s,f);return!this.dataModel.data.some(S=>!_.includes(f.data[S]))}getTagsInSelection(){const{dataModel:s,tagColumn:f}=this,_=new Set;for(const T of s.data)_.add(f.data[T]);const S=[..._].map(T=>f.values[T]);return new Set(S.flatMap(splitTags))}}function getValueIndex(d,s){let f=s.values.indexOf(d);if(f===-1){if(s.values.push(d),s.values.length>256)throw new Error(`text column '${s.name}' exceeded 256 values when adding '${d}'`);f=s.values.length-1}return f}function setTag(d,s=!0){const{tag:f,tagColumn:_,dataModel:S}=d;setTagOnAllSelectedValues(f,_,S,!0,s)}function setTagOnAllSelectedValues(d,s,f,_=!0,S=!0){if(sanitizeTags(s),d.match(SEP)){const H=d.split(SEP).map(J=>setTagOnAllSelectedValues(J,s,f,!1,S)).reduce((J,K)=>J||K,!1);_&&H&&f.dataStore.dataChanged([s.name]);return}const T=getTagValueIndices(d,s),F=new Map;S?s.values.filter((H,J)=>!T.includes(J)).forEach((H,J)=>{const oe=[d,...splitTags(H)].sort().join(JOIN);F.set(J,s.values.indexOf(oe))}):s.values.filter((H,J)=>T.includes(J)).forEach((H,J)=>{const oe=splitTags(H).filter(se=>se!==d).sort().join(JOIN);F.set(J,s.values.indexOf(oe))});const{data:M}=f;let P=0;for(let H=0;H<M.length;H++){const J=s.data[M[H]];if(S===T.includes(J))continue;P++;const K=J;let oe=F.get(K);if(oe===void 0||oe===-1){const se=s.values[K],ae=splitTags(se),he=(S?[d,...ae]:ae.filter(Be=>Be!==d)).sort().join(JOIN);oe=getValueIndex(he,s),F.set(K,oe)}s.data[M[H]]=oe}return _&&P&&f.dataStore.dataChanged([s.name]),P!==0}function sanitizeTags(d,s=!1){const f=d.values.map((P,H)=>{const J=[...new Set(splitTags(P))].sort().join(JOIN);return{i:H,unsorted:P,sorted:J}}),_=f.filter(P=>P.sorted===P.unsorted);if(_.length===f.length)return;console.log("sanitizing tags...");const S=_.map(P=>P.sorted);if(S.length>256)throw new Error(`text column '${d.name}' exceeded 256 values when sanitizing tags`);d.values=S;const T=new Map;for(const P of f){const{i:H,sorted:J}=P;T.set(H,getValueIndex(J,d))}const F=new Set;for(const P in d.data){const H=T.get(d.data[P]);d.data[P]=H,F.add(H)}const M=f.length-F.size;M&&console.warn(`sanitizeTags left ${M} unused values...`),s&&console.warn("sanitizeTags notify ignored")}function getTags(d){return new Set(d.values.flatMap(splitTags))}const icon$1=jsxRuntimeExports.jsx(default_1$c,{fontSize:"small"}),checkedIcon$1=jsxRuntimeExports.jsx(default_1$b,{fontSize:"small"});function TagView({dataStore:d,columnName:s}){const f=reactExports.useMemo(()=>new TagModel(d,s),[d,s]);reactExports.useEffect(()=>{const M=f.addListener(()=>{console.log("tagModel changed"),S(f.getTags()),F(f.getTagsInSelection()),console.log("tagList",f.getTags()),console.log("tagsInSelection",f.getTagsInSelection())});return()=>{f.removeListener(M)}},[f]);const[_,S]=reactExports.useState(f.isReady?f.getTags():new Set),[T,F]=reactExports.useState(f.isReady?f.getTagsInSelection():new Set);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("h3",{children:["Annotations (on ",f.dataModel.getLength()," selected rows):"]}),jsxRuntimeExports.jsx(Autocomplete,{freeSolo:!0,multiple:!0,options:[..._],value:[...T],onChange:(M,P)=>{const H=P.filter(K=>!T.has(K));for(const K of H)console.log("main Autocomplete onChange adding",K),f.setTag(K,!0);const J=[...T].filter(K=>!P.includes(K));for(const K of J)console.log("main Autocomplete onChange removing",K),f.setTag(K,!1)},renderInput:M=>{const{key:P,...H}=M;return jsxRuntimeExports.jsx(TextField,{...H,label:`add tags to '${s}'...`,onKeyDown:J=>{if(J.key==="Enter"){const{target:K}=J;K instanceof HTMLInputElement&&f.setTag(K.value,!0)}}},P)},renderOption:(M,P,{selected:H})=>{const{key:J,...K}=M,oe=!f.entireSelectionHasTag(P)&&T.has(P);return jsxRuntimeExports.jsxs("li",{...K,onClick:()=>{oe?f.setTag(P,!0):f.setTag(P,!H)},children:[jsxRuntimeExports.jsx(Checkbox,{icon:icon$1,checkedIcon:checkedIcon$1,style:{marginRight:8},checked:f.entireSelectionHasTag(P),indeterminate:oe}),P]},J)},renderTags:(M,P)=>M.map((H,J)=>{const{key:K,...oe}=P({index:J});return jsxRuntimeExports.jsx(Chip,{...oe,label:H},K)})})]})}const AnnotationDialogComponent=observer(({dataStore:d})=>{const s=reactExports.useMemo(()=>d.columns.filter(M=>M.datatype==="multitext").map(M=>M.name),[d]),[f,_]=reactExports.useState(),[S,T]=reactExports.useState("empty"),F=M=>{if(M.trim()==="")return T("empty"),!1;const P=d.columnIndex[M];return P&&P.datatype!=="multitext"?(T("clash"),!1):(T("ok"),!0)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Autocomplete,{freeSolo:!0,options:s,onChange:(M,P)=>{F(P)&&_(P)},onInputChange:({currentTarget:M})=>{if(M instanceof HTMLInputElement){const{value:P}=M;F(P)}},renderInput:M=>{const{key:P,...H}=M;return jsxRuntimeExports.jsx(TextField,{...H,color:S?void 0:"warning",label:"Annotation column",placeholder:"Annotation column name"},P)},renderOption:(M,P)=>{const{key:H,...J}=M;return jsxRuntimeExports.jsx("li",{...J,children:P},H)}}),S==="clash"&&jsxRuntimeExports.jsx("p",{children:"Incompatible column with that name already exists..."}),f&&jsxRuntimeExports.jsx(TagView,{dataStore:d,columnName:f}),!f&&jsxRuntimeExports.jsx("h2",{children:"Select or add a column above to use for annotations."})]})});class AnnotationDialogReact extends BaseDialog{constructor(f){super({title:`Annotate '${f.name}'`,width:400,height:300},null);Bt(this,"root");this.root=createMdvPortal(jsxRuntimeExports.jsx(AnnotationDialogComponent,{dataStore:f}),this.dialog,this)}close(){super.close(),this.root.unmount()}}BaseDialog.experiment.AnnotationDialogReact=AnnotationDialogReact;const SideEffect="AnnotationDialogReact loaded",ChartConfigSchema=z.object({title:z.string(),legend:z.string(),param:z.optional(z.array(z.string())),type:z.string(),extra:z.record(z.unknown()),_updated:z.date()}),ChartPreview=observer(({config:d})=>{const s=useDataStore(),f=reactExports.useMemo(()=>Object.values(BaseChart.types).find(F=>F.name===d.type),[d.type]),_=reactExports.useMemo(()=>{var J;const F=toJS(d),{extra:M,_updated:P,...H}=F;(J=f==null?void 0:f.extra_controls)==null||J.call(f,s).forEach(K=>{K.defaultVal&&!M[K.name]&&(M[K.name]=K.defaultVal)});for(const[K,oe]of Object.entries(M))H[K]=oe;for(const[K,oe]of Object.entries(BaseChart.types))if(oe.name===d.type){H.type=K;break}if(f!=null&&f.init)try{f.init(H,s,M)}catch(K){return K}return H},[d,s,f]),{_updated:S,...T}=toJS(d);return jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2",children:[jsxRuntimeExports.jsx(JsonView,{src:T,collapsed:!0,collapseStringsAfterLength:10}),jsxRuntimeExports.jsx(JsonView,{src:_,collapsed:!0})]})});function controlToGuiSpec(d,s){const f={type:d.type,label:d.label,current_value:d.defaultVal};if(f.type==="dropdown"||f.type==="multidropdown"){const S=d.values;d.defaultVal||(f.current_value=S[0].name),f.values=[S,"name","value"]}f.type,f.type==="checkbox"&&(f.type="check");const _=observable(f);return reaction(()=>_.current_value,s),_}function useGuiSpecControl(d,s){return reactExports.useMemo(()=>{const _=controlToGuiSpec(d,S=>{s.extra[d.name]=S});return s.extra[d.name]=_.current_value,_},[d,s])}const ExtraControlComponent=observer(({control:d,config:s})=>{const f=useGuiSpecControl(d,s);return jsxRuntimeExports.jsx(Paper,{elevation:6,children:jsxRuntimeExports.jsx(AbstractComponent$1,{props:f})})}),ConfigureChart=observer(({config:d,onDone:s})=>{var J;const f=useDataStore(),_=reactExports.useMemo(()=>Object.values(BaseChart.types).filter(K=>K.allow_user_add===!1?!1:K.required?(console.log(K.name,"required",K.required),typeof K.required=="function"?K.required(f):K.required.every(oe=>!!f[oe])):!0),[f]),S=_.map(K=>K.name).sort((K,oe)=>K.localeCompare(oe)),T=reactExports.useMemo(()=>d.param?d.param.map(K=>f.columnIndex[K]):[],[d.param,f]),F=reactExports.useCallback(action(K=>{d.type=K;const oe=_.find(se=>se.name===d.type);if(!oe)throw new Error(`Chart type ${d.type} not found`);if(oe.params){const se=toJS(d.param)||[];d.param=new Array(oe.params.length);for(const[ae,ge]of oe.params.entries()){const he=T[ae];if(se[ae]&&columnMatchesType(he,ge.type))console.log(`[${d.type}, ${ge.name}] using previous selection: '${se[ae]}'`),d.param[ae]=se[ae];else{const Be=f.columns.find(pe=>columnMatchesType(pe,ge.type));if(!Be){console.warn(`[${d.type}, ${ge.name}] No column found for type '${ge.type}'`);continue}console.log(`[${d.type}, ${ge.name}] using first available ${ge.type}: '${Be.name}'`),d.param[ae]=Be.name}}}else d.param=[];d._updated=new Date}),[d.type,d,_,T,f]),M=_.find(K=>K.name===d.type),P=reactExports.useMemo(()=>{var K;return(K=M==null?void 0:M.extra_controls)==null?void 0:K.call(M,f).map((oe,se)=>jsxRuntimeExports.jsx(ExtraControlComponent,{control:oe,config:d},oe.name))},[M,f,d]),H=reactExports.useCallback(()=>{var ae;const{extra:K,_updated:oe,...se}=d;(ae=M==null?void 0:M.extra_controls)==null||ae.call(M,f).forEach(ge=>{ge.defaultVal&&!K[ge.name]&&(K[ge.name]=ge.defaultVal)});for(const[ge,he]of Object.entries(K))se[ge]=he;for(const[ge,he]of Object.entries(BaseChart.types))if(he.name===d.type){se.type=ge;break}if(M!=null&&M.init&&M.init(se,f,K),!window.mdv.chartManager)throw new Error("chartManager not found");window.mdv.chartManager.addChart(f.name,se,!0),s()},[d,f,s,M]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,sx:{margin:1,width:"50em"},children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:6,children:jsxRuntimeExports.jsxs(Grid,{container:!0,direction:"column",spacing:1,sx:{gap:1},children:[jsxRuntimeExports.jsx("h2",{children:"Chart Type"}),jsxRuntimeExports.jsx(Autocomplete,{options:S,value:d.type,onChange:(K,oe)=>oe&&F(oe),renderInput:K=>jsxRuntimeExports.jsx(TextField,{...K,label:"Chart Type"})}),jsxRuntimeExports.jsx(TextField,{label:"Title",size:"small",onChange:action(K=>d.title=K.target.value)}),jsxRuntimeExports.jsx(TextField,{label:"Description",size:"small",multiline:!0,"aria-multiline":!0,rows:6,onChange:action(K=>d.legend=K.target.value)})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:6,children:jsxRuntimeExports.jsxs(Grid,{container:!0,direction:"column",spacing:1,sx:{gap:1},children:[(M==null?void 0:M.params)&&jsxRuntimeExports.jsx("h2",{children:"Columns"}),(J=M==null?void 0:M.params)==null?void 0:J.map((K,oe)=>jsxRuntimeExports.jsx(ColumnSelectionComponent,{placeholder:K.name,setSelectedColumn:action(se=>{if(!d.param)throw new Error("it shouldn't be possible for config.param to be undefined here");d.param[oe]=se,d._updated=new Date}),type:K.type},K.name)),P&&jsxRuntimeExports.jsx("h2",{children:"Extra Controls"}),P,jsxRuntimeExports.jsx(Dialog,{open:!1,children:jsxRuntimeExports.jsx(JsonView,{src:M,collapsed:!0})})]})})]}),jsxRuntimeExports.jsx(AppBar,{position:"absolute",sx:{top:"auto",bottom:0},children:jsxRuntimeExports.jsx(Button$1,{variant:"contained",color:"primary",onClick:H,children:"Add Chart"})})]})}),AddChartDialogComponent=observer(({dataStore:d,config:s,onDone:f})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(DataStoreContext.Provider,{value:d,children:[jsxRuntimeExports.jsx("div",{className:"align-top",children:jsxRuntimeExports.jsx(ConfigureChart,{config:s,onDone:f})}),jsxRuntimeExports.jsx(ChartPreview,{config:{...s}})]})})),Wrapper$2=d=>{const s=reactExports.useMemo(()=>observable.object(ChartConfigSchema.parse({title:"",legend:"",type:"",param:[],extra:{},_updated:new Date})),[]),[f,_]=reactExports.useState(!0);return reactExports.useEffect(()=>{if(!d.modal)return;const S=T=>{T.key==="Escape"&&(_(!1),d.onDone())};return window.addEventListener("keydown",S),()=>{window.removeEventListener("keydown",S)}},[d.modal,d.onDone]),d.modal?jsxRuntimeExports.jsx(Dialog,{open:f,fullScreen:!0,disableEscapeKeyDown:!0,children:jsxRuntimeExports.jsx("div",{className:"h-screen flex items-center justify-center",children:jsxRuntimeExports.jsxs(Paper,{elevation:2,sx:{p:2},children:[jsxRuntimeExports.jsxs("h1",{children:['Add Chart in "',d.dataStore.name,'"...']}),jsxRuntimeExports.jsx(AddChartDialogComponent,{...d,config:s})]})})}):jsxRuntimeExports.jsx(AddChartDialogComponent,{...d,config:s})};class AddChartDialogReact extends BaseDialog{constructor(f){super({title:`Add Chart in '${f.name}'`,width:600,height:420},null);Bt(this,"root");const _=!1;this.root=createMdvPortal(jsxRuntimeExports.jsx(Wrapper$2,{dataStore:f,modal:_,onDone:()=>this.close()}),this.dialog,this),this.outer.style.display="block"}close(){super.close(),this.root.unmount()}}BaseDialog.experiment.AddChartDialogReact=AddChartDialogReact;const addChart="AddChartDialogReact loaded";function ReactTest(){const d=useChart(),{dataStore:s}=d,f=useChartID(),[_,S]=reactExports.useState(s.filterSize),[T]=reactExports.useState(s.getDimension("catcol_dimension")),[F,M]=reactExports.useState(["hello","world"]),[P,H]=reactExports.useState(d.config.text);return reactExports.useEffect(()=>{console.warn("WordCloudChart effect liable to be buggy"),s.addListener(f,()=>S(s.filterSize)),d.addListener("text",(ae,ge)=>H(`${ge} ${d.config.wordSize}`));const J=d.config.param[0],K=d.config.param[1],oe=s.getColumnValues(J),se=s.getColumnValues(K);return s.columnIndex[J],s.columnIndex[K],s.getRowAsObject(),M(oe),console.log(se),T!=null&&T.getAverages?T.getAverages(ae=>{console.log(ae)},[K],{}):console.log("no averages"),()=>{s.removeListener(f),d.removeListener("text")}},[s,T,P]),jsxRuntimeExports.jsxs("div",{style:{padding:"0.3em",overflow:"auto",color:"white"},children:[jsxRuntimeExports.jsx("h2",{children:"Words:"}),"This component served as an earlier test for React charts, and is not currently used... it might make sense to develop it a bit further, as a way to test out the new architecture. But there are higher priorities.",jsxRuntimeExports.jsx("pre",{children:JSON.stringify(F,null,2)})]})}class ReactWordCloudChart extends BaseReactChart{constructor(s,f,_){super(s,f,_,ReactTest)}getSettings(){const s=this.config;return super.getSettings().concat([{type:"slider",label:"Word Size",current_value:s.wordSize||100,min:10,max:100,func:_=>{s.wordSize=_}}])}remove(){super.remove()}}BaseChart.types.WordCloud2={class:ReactWordCloudChart,name:"WordCloud (React)",allow_user_add:!1,params:[{type:["text","multitext"],name:"text"},{type:["text","multitext"],name:"word size"}],init:(d,s,f)=>{d.wordSize=20}};const wc$1=42;function useColumnData(d,s=100){const f=useDataStore(),[_,S]=reactExports.useState(null),[T,F]=reactExports.useState(null),[M,P]=reactExports.useState(null);return reactExports.useEffect(()=>{if(!window.mdv.chartManager)return;const H=window.mdv.chartManager,J=f.getFilteredIndices(),K=H._getColumnsAsync(f.name,[d]);P(null),S(null),F(null);let oe=!1;return console.log("useColumnData effect"),Promise.all([J,K]).then(([se])=>{if(console.log("useColumnData promise resolved"),oe)return;const ae=f.columnIndex[d];P(ae);const ge=new Float32Array(se.length);for(let Be=0;Be<se.length;Be++){const pe=se[Be],be=ge[Be]=ae.data[pe];Number.isNaN(be)&&(ge[Be]=Number.NEGATIVE_INFINITY)}const he=se.sort((Be,pe)=>ae.data[pe]-ae.data[Be]);F(he.slice(0,s)),S(ge.sort((Be,pe)=>pe-Be).slice(0,s))}),()=>{oe=!0}},[d,f._filteredIndicesPromise,f.name,f.columnIndex,s,f.getFilteredIndices]),{columnData:_,indices:T,column:M}}function useMarkdownText(d){const[s,f]=reactExports.useState(null),[_,S]=reactExports.useState("");return reactExports.useEffect(()=>{__vitePreload(async()=>{const{default:T}=await import("../assets/MarkdownText-Bkm5FGkF.js");return{default:T}},[],import.meta.url).then(({default:T})=>{f(()=>T)})},[]),reactExports.useEffect(()=>{if(!d)return S("");if(s){const T=s(d);S(T)}},[d,s]),_}const HighlightedFeatureComponent=observer(()=>{const d=useChart(),s=useMarkdownText(d.config.text),{columnData:f,indices:_,column:S}=useColumnData(d.config.param[0],8),T=useHighlightedIndex(),F=_&&T>=0&&_.includes(T),M=S==null?void 0:S.data[T];return jsxRuntimeExports.jsxs("div",{style:{fontSize:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:s}}),jsxRuntimeExports.jsxs("em",{children:['"',d.config.param[0],'"']}),jsxRuntimeExports.jsx("br",{}),F?`Highlighted value (one of the top values): ${M}`:`Highlighted value ${M} not in top ${f==null?void 0:f.length} values.`,f&&[...f].map((P,H)=>jsxRuntimeExports.jsx("div",{style:{cursor:"pointer",border:`1px ${T===_[H]?"solid":"dashed"} #ccc`,padding:"0.5em",margin:"0.5em",borderRadius:"0.5em"},onClick:()=>{d.dataStore.dataHighlighted([_[H]],d)},children:P},_[H]))]})});class HighlightedFeatureChartWrapper extends BaseReactChart{constructor(s,f,_){_.text||(_.text=""),super(s,f,_,HighlightedFeatureComponent)}getSettings(){const s=this.config;return[...super.getSettings(),{type:"dropdown",label:"Column",current_value:this.config.param[0],values:[this.dataSource.dataStore.columns.map(f=>f.name)],func:action(f=>{this.config.param[0]=f})},{label:"Markdown Text",type:"textbox",current_value:s.text||"",func:action(f=>{s.text=f})}]}}BaseChart.types.highlightedFeature={class:HighlightedFeatureChartWrapper,name:"Highlighted Feature",allow_user_add:!1,params:[{type:"_multi_column:all",name:"Columns to include in server query"}],extra_controls:()=>[{type:"textbox",name:"text",label:"Markdown Text:"}],init:(d,s,f)=>{d.text=f.text||""}};const hfc=42;var ArrowDropDown={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(ArrowDropDown,"__esModule",{value:!0});var default_1$5=ArrowDropDown.default=void 0,_createSvgIcon$5=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$5=jsxRuntimeExports;default_1$5=ArrowDropDown.default=(0,_createSvgIcon$5.default)((0,_jsxRuntime$5.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");var DoneAll={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(DoneAll,"__esModule",{value:!0});var default_1$4=DoneAll.default=void 0,_createSvgIcon$4=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$4=jsxRuntimeExports;default_1$4=DoneAll.default=(0,_createSvgIcon$4.default)((0,_jsxRuntime$4.jsx)("path",{d:"m18 7-1.41-1.41-6.34 6.34 1.41 1.41zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12zM.41 13.41 6 19l1.41-1.41L1.83 12z"}),"DoneAll");var Cached={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(Cached,"__esModule",{value:!0});var default_1$3=Cached.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$3=Cached.default=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"m19 8-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4z"}),"Cached");var SwapHoriz={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(SwapHoriz,"__esModule",{value:!0});var default_1$2=SwapHoriz.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$2=SwapHoriz.default=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99zM21 9l-3.99-4v3H10v2h7.01v3z"}),"SwapHoriz");var HighlightOff={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(HighlightOff,"__esModule",{value:!0});var default_1$1=HighlightOff.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;default_1$1=HighlightOff.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOff");const icon=jsxRuntimeExports.jsx(default_1$c,{fontSize:"small"}),checkedIcon=jsxRuntimeExports.jsx(default_1$b,{fontSize:"small"});function useFilterConfig(d){const{datatype:s,field:f}=d;return useConfig().filters[f]}const TextFieldExtended=d=>{const{InputProps:s,customEndAdornment:f,..._}=d,S={...s,endAdornment:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[f," ",s.endAdornment]})};return jsxRuntimeExports.jsx(TextField,{..._,InputProps:S})},filterOptions=createFilterOptions({limit:100}),TextComponent=observer(({column:d})=>{const s=useDimensionFilter(d),f=useConfig().filters,{values:_}=d,S=useFilterConfig(d),T=(S==null?void 0:S.category)||[],F=reactExports.useCallback(oe=>{const se=S||{category:[]};action(()=>{se.category=oe,f[d.field]=se})()},[f,d.field,S]);reactExports.useEffect(()=>{if(!S||S.category.length===0){s.removeFilter();return}s.filter("filterCategories",[d.field],T,!0)},[s,d.field,T,S]);const[M,P]=reactExports.useState(!1),H=reactExports.useCallback(oe=>{if(T.includes(oe)){F(T.filter(se=>se!==oe));return}F([...T,oe])},[F,T]),J=reactExports.useCallback(()=>{F([..._])},[_,F]),K=reactExports.useCallback(()=>{const oe=_.filter(se=>!T.includes(se));F(oe)},[_,T,F]);return jsxRuntimeExports.jsx(Autocomplete,{multiple:!0,size:"small",options:_,value:T,filterOptions,onChange:(oe,se)=>F(se),onFocus:()=>P(!0),onBlur:()=>P(!1),renderInput:oe=>{const{key:se,...ae}=oe;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(TextFieldExtended,{...ae,customEndAdornment:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(IconButton,{size:"small","aria-label":"toggle selection",onClick:K,children:jsxRuntimeExports.jsx(default_1$2,{fontSize:"inherit"})}),jsxRuntimeExports.jsx(IconButton,{size:"small","aria-label":"select all",onClick:J,children:jsxRuntimeExports.jsx(default_1$4,{fontSize:"inherit"})})]})},se)})},renderOption:(oe,se)=>{const{key:ae,...ge}=oe;return jsxRuntimeExports.jsxs("li",{...ge,onClick:()=>H(se),children:[jsxRuntimeExports.jsx(Checkbox,{icon,checkedIcon,style:{marginRight:8},checked:T.includes(se),onClick:()=>H(se)}),se]},ae)},renderTags:(oe,se)=>{const ae=oe.map((ge,he)=>{const{key:Be,...pe}=se({index:he});return jsxRuntimeExports.jsx(Chip,{...pe,label:ge},Be)});return ae.length>8?jsxRuntimeExports.jsxs("div",{children:[ae.length," selected"]}):jsxRuntimeExports.jsx("div",{className:"max-h-32 overflow-auto",children:ae})}})}),MultiTextComponent=observer(({column:d})=>(console.log("multitext selection dialog has missing features for 'operand' and other logic"),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(TextComponent,{column:d})}))),UniqueComponent=observer(({column:d})=>{const s=useDimensionFilter(d),f=useConfig().filters,_=useFilterConfig(d),[S]=reactExports.useState(_);reactExports.useEffect(()=>{if(_===null){s.removeFilter();return}s.filter("filterUnique",[d.field],_,!0)},[s,d.field,_]);const[T,F]=reactExports.useState(_||"");return jsxRuntimeExports.jsx(TextField,{size:"small",defaultValue:S,onChange:M=>F(M.target.value),onKeyDown:M=>{M.key==="Enter"&&action(()=>f[d.field]=T)()}})});function useRangeFilter(d){const s=useDimensionFilter(d),_=useConfig().filters[d.field]||d.minMax,T=d.datatype.match(/int/)?1:.01,[F]=o$1(_,10);reactExports.useEffect(()=>{const he=F;if(he[0]===d.minMax[0]&&he[1]===d.minMax[1]){s.removeFilter();return}const[Be,pe]=he;s.filter("filterRange",[d.field],{min:Be,max:pe},!0)},[d,s,F]);const[M,P]=reactExports.useState([]),H=reactExports.useCallback(async()=>{const he=new Worker(new URL(""+new URL("../assets/rawHistogramWorker-CYPeI1fE.js",import.meta.url).href,import.meta.url));he.onmessage=Re=>{P(Re.data),he.terminate()};const Be=d.datatype==="int32",pe=d.data,be=new SharedArrayBuffer(pe.length*4);new Float32Array(be).set(pe),he.postMessage({data:be,min:d.minMax[0],max:d.minMax[1],bins:100,isFloat:Be})},[d]),[J,K]=_,[oe,se]=d.minMax,ae=(J-oe)/(se-oe),ge=(K-oe)/(se-oe);return{value:_,step:T,histogram:M,lowFraction:ae,highFraction:ge,queryHistogram:H}}const Histogram=observer(({histogram:d,lowFraction:s,highFraction:f,queryHistogram:_})=>{const S=window.mdv.chartManager.theme==="dark",T=99,F=40,M=S?"#fff":"#000",P=Math.max(...d),H=2,J=d.length/(T+1),K=(F-2*H)/P,oe=s*T,se=f*T;reactExports.useEffect(()=>{_()},[_]);const ae=reactExports.useMemo(()=>d.map((ge,he)=>{const Be=he*J,pe=F-H-ge*K;return`${Be},${pe}`}).join(" "),[d,J,K]);return jsxRuntimeExports.jsxs("svg",{width:"100%",height:F,viewBox:`0 0 ${T} ${F}`,preserveAspectRatio:"none",onClick:_,children:[jsxRuntimeExports.jsx("polyline",{points:ae,fill:"none",stroke:M,strokeWidth:"1.5",vectorEffect:"non-scaling-stroke"}),jsxRuntimeExports.jsx("rect",{x:0,y:0,width:oe,height:F,fill:S?"#333":"#888",fillOpacity:"0.8"}),jsxRuntimeExports.jsx("rect",{x:se,y:0,width:T-se,height:F,fill:S?"#333":"#888",fillOpacity:"0.8"})]})}),NumberComponent=observer(({column:d})=>{const s=useConfig().filters,f=useRangeFilter(d),{value:_,step:S}=f,T=reactExports.useCallback(F=>{action(()=>s[d.field]=F)()},[s,d.field]);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Histogram,{...f}),jsxRuntimeExports.jsx(Slider,{size:"small",value:_,min:d.minMax[0],max:d.minMax[1],step:S,onChange:(F,M)=>T(M)}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TextField,{size:"small",className:"max-w-20",type:"number",value:_[0],onChange:F=>T([Number(F.target.value),_[1]])}),jsxRuntimeExports.jsx(TextField,{size:"small",className:"max-w-20 float-right",type:"number",value:_[1],onChange:F=>T([_[0],Number(F.target.value)])})]})]})}),Components={integer:NumberComponent,double:NumberComponent,int32:NumberComponent,text:TextComponent,text16:TextComponent,multitext:MultiTextComponent,unique:UniqueComponent},AbstractComponent=observer(function d({column:s}){const f=Components[s.datatype],_=useConfig(),{filters:S}=_,F=S[s.field]!==null,[M]=reactExports.useState(F),[P,H]=reactExports.useState(!1),J=reactExports.useCallback(action(oe=>{oe.stopPropagation(),S[s.field]=null}),[]),K=reactExports.useCallback(oe=>{oe.stopPropagation(),runInAction(()=>{delete S[s.field],_.param=_.param.filter(se=>se!==s.field)}),console.log("Delete item")},[S,s.field,_]);return jsxRuntimeExports.jsxs(Accordion$2,{defaultExpanded:M,onMouseEnter:()=>H(!0),onMouseLeave:()=>H(!1),children:[jsxRuntimeExports.jsxs(AccordionSummary,{expandIcon:jsxRuntimeExports.jsx(default_1$5,{}),children:[jsxRuntimeExports.jsx(IconButton,{onClick:K,"aria-label":"delete",sx:{position:"absolute",right:"-18px",top:"-18px",opacity:P?1:0,visibility:P?"visible":"hidden",transition:"opacity 0.3s, visibility 0.3s","&:focus":{visibility:"visible",opacity:1}},children:jsxRuntimeExports.jsx(default_1$1,{})}),jsxRuntimeExports.jsx("div",{className:"flex items-center h-4",children:jsxRuntimeExports.jsxs(Typography,{variant:"subtitle1",children:[s.name,F&&jsxRuntimeExports.jsx(IconButton,{onClick:J,children:jsxRuntimeExports.jsx(default_1$3,{fontSize:"small"})}),jsxRuntimeExports.jsxs("em",{className:"opacity-40 ml-1",children:["(",s.datatype,")"]})]})})]}),jsxRuntimeExports.jsx(AccordionDetails,{children:jsxRuntimeExports.jsx(f,{column:s})})]})}),AddRowComponent=observer(()=>{const d=useConfig(),{filters:s,param:f}=useConfig(),_=reactExports.useCallback(S=>{S&&(f.includes(S)||runInAction(()=>{d.param=[...f,S],s[S]=null}))},[s,f,d]);return jsxRuntimeExports.jsx("div",{className:"p-5",children:jsxRuntimeExports.jsx(ColumnSelectionComponent,{setSelectedColumn:_,placeholder:"Add a filter column",exclude:f})})}),ForeignRows=()=>{const[d,s]=reactExports.useState(""),[f,_]=reactExports.useState(10),[S]=o$1(d,300),T=useRowsAsColumnsLinks(),F=useHighlightedForeignRowsAsColumns(f,S);if(!T)return null;const{linkedDs:M,link:P}=T;return jsxRuntimeExports.jsxs("div",{className:"p-3",children:[jsxRuntimeExports.jsxs(Typography,{variant:"h6",sx:{marginBottom:"0.5em"},children:["Columns associated with selected '",M.name,"':"]}),jsxRuntimeExports.jsx(TextField,{size:"small",label:"Filter",variant:"outlined",onChange:H=>s(H.target.value)}),jsxRuntimeExports.jsx(TextField,{size:"small",className:"max-w-20 float-right",type:"number",label:"Max",variant:"outlined",value:f,onChange:H=>_(Number(H.target.value))}),F.map(H=>jsxRuntimeExports.jsx(AbstractComponent,{column:H},H.field))]})};function useResetButton(){const d=useChart(),s=useConfig().filters,f=Object.values(s).some(_=>_!==null);reactExports.useEffect(()=>{console.log("hasFilter changed (in hook): ",f),d.resetButton.style.display=f?"inline":"none"},[f,d.resetButton])}const SelectionDialogComponent=()=>{//!! this component doesn't update with HMR and introducing another wrapper component makes things worse
const d=useParamColumnsExperimental();return useResetButton(),jsxRuntimeExports.jsxs("div",{className:"p-3 absolute w-[100%] h-[100%] overflow-auto",children:[d.map(s=>jsxRuntimeExports.jsx(AbstractComponent,{column:s},s.field)),jsxRuntimeExports.jsx(AddRowComponent,{}),jsxRuntimeExports.jsx(ForeignRows,{})]})};class SelectionDialogReact extends BaseReactChart{constructor(s,f,_){if(!_.filters){_.filters={};for(const S of _.param)_.filters[S]=null}for(const S of _.param)_.filters[S]||(_.filters[S]=null);super(s,f,_,observer(SelectionDialogComponent))}removeFilter(){action(()=>{for(const s in this.config.filters)this.config.filters[s]=null})()}getSettings(){const s=super.getSettings();return s.push({type:"multicolumn",label:"Columns To filter",current_value:this.config.param}),s}}BaseChart.types.selection_dialog={name:"Selection Dialog",class:SelectionDialogReact,params:[{type:"_multi_column:all",name:"Columns To filter"}]};const Test=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Oh, happy day!"}),Wrapper$1=observer(({ds:d,dsTo:s,link:f,cm:_})=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{children:"Add Chart"}),jsxRuntimeExports.jsxs("p",{children:["Choose a chart type to add to the data store '",d.name,"'"]}),jsxRuntimeExports.jsx(Test,{})]}));class AddColumnsFromRowsDialogReact extends BaseDialog{constructor(f,_,S,T){super({title:`Add Chart in '${f.name}'`,width:600,height:420},null);Bt(this,"root");const F={ds:f,dsTo:_,link:S,cm:T};this.root=createMdvPortal(jsxRuntimeExports.jsx(Wrapper$1,{...F}),this.dialog,this)}close(){super.close(),this.root.unmount()}}BaseDialog.experiment.AddColumnsFromRows=AddColumnsFromRowsDialogReact;const arr=[];arr.push(vSideEffect);arr.push(SideEffect);arr.push(addChart);arr.push(wc$1);arr.push(hfc);function DoImportSideEffects(){console.log(`DoImportSideEffects: ${arr.length} modules imported`)}class CustomDialog extends BaseDialog{constructor(s){s.buttons&&(s.footer=!0,s._buttons=s.buttons,s.buttons=void 0),s.width=s.width||300,super(s,s)}init(s){if(this.controlValues={},this.controls={},s._buttons)for(const f of s._buttons)this.addButton(f);if(s.text){const f=createEl("div",{},this.dialog);f.innerHTML=s.text}if(s.controls)for(const f of s.controls){f.id||(f.id=f.label);const _=createEl("div",{styles:{padding:"5px"}},this.dialog);if(f.type!=="button"){const S=f.type==="checkbox"?"inline":"block";createEl("label",{text:f.label,styles:{fontWeight:"bold",display:S,marginBottom:"3px"}},_)}this[f.type](f,_),f.description&&createEl("div",{text:f.description,styles:{fontSize:"12px"}},_)}}radiobuttons(s,f){const _=createEl("div",{},f);this.controlValues[s.id]=s.current_value;for(const S of s.choices){createEl("span",{text:S[0]},_);const T=createEl("input",{type:"radio",name:s.label,value:S[1]},_);T.checked=s.current_value===S[1],T.addEventListener("click",F=>{const M=F.currentTarget.value;this.controlValues[s.id]=M,s.func&&s.func(M,this)})}}slider(s,f){const _=createEl("div",{},f);noUiSlider.create(_,{start:[s.current_value],range:{min:[s.min],max:[s.max]},step:s.step||null,tooltips:!0,documentElement:s.doc||document}),this.controlValues[s.id]=s.current_value,_.noUiSlider.on("end",S=>{const T=Number.parseFloat(S[0]);this.controlValues[s.id]=T,s.func&&s.func(T)})}changeDropDownContent(s,f){const _=this.controls[s];for(;_.length!==0;)_.remove(0);for(const S of f)createEl("option",{text:S.text,value:S.value},_);this.controlValues[s]=_.value}dropdown(s,f){const _=createEl("select",{styles:{maxWidth:"200px"}});for(const S of s.items)createEl("option",{text:S.text,value:S.value},_);f.append(_),s.current_value&&(_.value=s.current_value),this.controlValues[s.id]=_.value,_.addEventListener("change",S=>{this.controlValues[s.id]=_.value,s.func&&s.func(_.value,this)}),this.controls[s.id]=_}checkboxgroup(s,f){const _=this,S=createEl("div",{},f);function T(M,P){createEl("button",{text:M,classes:["ciview-button-sm"]},S).addEventListener("click",()=>{for(const J of s.checkboxes)_.controls[J.id].checked=P,_.controlValues[J.id]=P})}T("Check All",!0),T("Uncheck All",!1);const F=createEl("div",{},f);for(const M of s.checkboxes){const P=createEl("div",{styles:{display:"inline-block",padding:"3px"}},F);createEl("span",{styles:{fontSize:"13px"},text:M.label},P),M.id=`${s.id}_${M.id}`,this.checkbox(M,P)}}checkbox(s,f){const _=s.current_value,S=createEl("input",{type:"checkbox",classes:["mdv-checkbox"]},f);S.checked=s.current_value,this.controlValues[s.id]=_,S.addEventListener("click",T=>{this.controlValues[s.id]=S.checked,s.func&&s.func(S.checked)}),this.controls[s.id]=S}text(s,f){const _=s.defaultValue||"",S=createEl("input",{value:_},f);this.controlValues[s.id]=_,S.addEventListener("keyup",()=>{this.controlValues[s.id]=S.value}),this.controls[s.id]=S}buttonClicked(s){s.method(this.controlValues,this.controls)!=="noclose"&&this.close()}addButton(s){createEl("button",{text:s.text,classes:["ciview-button"]},this.footer).addEventListener("click",()=>this.buttonClicked(s))}}var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(d){return new Function("d","return {"+d.map(function(s,f){return JSON.stringify(s)+": d["+f+'] || ""'}).join(",")+"}")}function customConverter(d,s){var f=objectConverter(d);return function(_,S){return s(f(_),S,d)}}function inferColumns(d){var s=Object.create(null),f=[];return d.forEach(function(_){for(var S in _)S in s||f.push(s[S]=S)}),f}function pad(d,s){var f=d+"",_=f.length;return _<s?new Array(s-_+1).join(0)+f:f}function formatYear(d){return d<0?"-"+pad(-d,6):d>9999?"+"+pad(d,6):pad(d,4)}function formatDate(d){var s=d.getUTCHours(),f=d.getUTCMinutes(),_=d.getUTCSeconds(),S=d.getUTCMilliseconds();return isNaN(d)?"Invalid Date":formatYear(d.getUTCFullYear())+"-"+pad(d.getUTCMonth()+1,2)+"-"+pad(d.getUTCDate(),2)+(S?"T"+pad(s,2)+":"+pad(f,2)+":"+pad(_,2)+"."+pad(S,3)+"Z":_?"T"+pad(s,2)+":"+pad(f,2)+":"+pad(_,2)+"Z":f||s?"T"+pad(s,2)+":"+pad(f,2)+"Z":"")}function dsvFormat(d){var s=new RegExp('["'+d+`
\r]`),f=d.charCodeAt(0);function _(K,oe){var se,ae,ge=S(K,function(he,Be){if(se)return se(he,Be-1);ae=he,se=oe?customConverter(he,oe):objectConverter(he)});return ge.columns=ae||[],ge}function S(K,oe){var se=[],ae=K.length,ge=0,he=0,Be,pe=ae<=0,be=!1;K.charCodeAt(ae-1)===NEWLINE&&--ae,K.charCodeAt(ae-1)===RETURN&&--ae;function Re(){if(pe)return EOF;if(be)return be=!1,EOL;var Me,ve=ge,At;if(K.charCodeAt(ve)===QUOTE){for(;ge++<ae&&K.charCodeAt(ge)!==QUOTE||K.charCodeAt(++ge)===QUOTE;);return(Me=ge)>=ae?pe=!0:(At=K.charCodeAt(ge++))===NEWLINE?be=!0:At===RETURN&&(be=!0,K.charCodeAt(ge)===NEWLINE&&++ge),K.slice(ve+1,Me-1).replace(/""/g,'"')}for(;ge<ae;){if((At=K.charCodeAt(Me=ge++))===NEWLINE)be=!0;else if(At===RETURN)be=!0,K.charCodeAt(ge)===NEWLINE&&++ge;else if(At!==f)continue;return K.slice(ve,Me)}return pe=!0,K.slice(ve,ae)}for(;(Be=Re())!==EOF;){for(var Fe=[];Be!==EOL&&Be!==EOF;)Fe.push(Be),Be=Re();oe&&(Fe=oe(Fe,he++))==null||se.push(Fe)}return se}function T(K,oe){return K.map(function(se){return oe.map(function(ae){return J(se[ae])}).join(d)})}function F(K,oe){return oe==null&&(oe=inferColumns(K)),[oe.map(J).join(d)].concat(T(K,oe)).join(`
`)}function M(K,oe){return oe==null&&(oe=inferColumns(K)),T(K,oe).join(`
`)}function P(K){return K.map(H).join(`
`)}function H(K){return K.map(J).join(d)}function J(K){return K==null?"":K instanceof Date?formatDate(K):s.test(K+="")?'"'+K.replace(/"/g,'""')+'"':K}return{parse:_,parseRows:S,format:F,formatBody:M,formatRows:P,formatRow:H,formatValue:J}}var csv$1=dsvFormat(","),csvParse=csv$1.parse,tsv$1=dsvFormat("	"),tsvParse=tsv$1.parse;function responseText(d){if(!d.ok)throw new Error(d.status+" "+d.statusText);return d.text()}function text(d,s){return fetch(d,s).then(responseText)}function dsvParse(d){return function(s,f,_){return arguments.length===2&&typeof f=="function"&&(_=f,f=void 0),text(s,f).then(function(S){return d(S,_)})}}var csv=dsvParse(csvParse),tsv=dsvParse(tsvParse);function responseJson(d){if(!d.ok)throw new Error(d.status+" "+d.statusText);if(!(d.status===204||d.status===205))return d.json()}function json(d,s){return fetch(d,s).then(responseJson)}class AutoComplete{constructor(s,f,_={}){this.__doc__=_.doc||document,this.input=s,this.listeners=[],_.minLength=_.minLength||2,this.input.addEventListener("input",S=>{this.input.value.length<_.minLength||(this.text=this.input.value,f(this.text).then(T=>{this.list=T,this.createDropDown()}))}),this.dli=S=>{S.target.parentElement!==this.listHolder&&this.listHolder&&(this.listHolder.remove(),this.listHolder=null)},this.__doc__.addEventListener("mousedown",this.dli)}getSelectedItem(){return this.selectedItem}addListener(s){this.listeners.push(s)}destroy(){this.listholder&&this.listholder.remove(),this.__doc__.removeEventListener("click",this.dli)}setSelectedItem(s,f=!0){this.selectedItem=s,this.input.value=s.value,f&&this.listeners.map(_=>_("item_chose",s))}addItemEventListener(s,f){s.addEventListener("click",_=>{this.listHolder.remove(),this.listHolder=null,this.setSelectedItem(f)})}createDropDown(){if(this.listHolder&&this.listHolder.remove(),!this.text)return;const s=getElDim(this.input);this.listHolder=createEl("div",{classes:["autocomplete-items"],styles:{top:`${s.top+s.height}px`,left:`${s.left}px`,width:`${s.width}px`,zIndex:1200}},this.__doc__.body);for(let f=0;f<this.list.length;f++){const _=this.list[f].value,S=createEl("div",{text:_},this.listHolder);this.addItemEventListener(S,this.list[f])}}}const max_genes=500;class AddColumnsFromRowsDialog extends BaseDialog{constructor(s,f,_,S){const T={title:`Add ${_.name}`,footer:!0,columns:2,width:480};super(T,{ds:s,ds_to:f,link:_,cm:S})}init(s){this.ds=s.ds,this.ds_to=s.ds_to,this.link=s.link,this.cm=s.cm,this.cm._getColumnsThen(this.ds_to.name,[this.link.name_column],()=>{const f=createEl("div",{classes:["mdv-section"]},this.columns[0]),_=createEl("input",{},f);this.ac=new AutoComplete(_,async P=>this.ds_to.dataStore.getSuggestedValues(P,this.link.name_column,8)),this.ac.addListener((P,H)=>this.addColumn(H)),this.rn=getRandomString();for(const P in this.link.subgroups)createEl("label",{text:this.link.subgroups[P].label},this.footer),createEl("input",{type:"radio",name:this.rn,value:P,checked:!0},this.footer);this._addOptionsSection(),createEl("button",{classes:["ciview-button-sm"],styles:[],text:"Apply"},this.columns[0]).addEventListener("click",()=>{this.addColumn(this.ac.getSelectedItem())}),this.ta=createEl("textarea",{rows:10},this.columns[1]),this.errorDiv=createEl("div",{classes:["mdv-section"]},this.columns[1]);let T=createEl("div",{classes:["mdv-section"]},this.columns[1]);this.addHeatMapCheck=createEl("input",{type:"checkbox"},T),createEl("span",{text:"Create Heat Map:",styles:{marginRight:"4px"}},T),this.addDotPlotCheck=createEl("input",{type:"checkbox"},T),createEl("span",{text:"Create DotPlot:",styles:{marginRight:"4px"}},T),T=createEl("div",{classes:["mdv-section"]},this.columns[1]),createEl("span",{text:"Categories:",styles:{marginRight:"4px"}},T),this.heatMapSel=createEl("select",{styles:{maxWidth:"150px"}},T),this.ds.dataStore.getColumnList("text").forEach(P=>createEl("option",{value:P.field,text:P.name},this.heatMapSel)),createEl("button",{classes:["ciview-button-sm"],text:"Add All"},this.columns[1]).addEventListener("click",P=>{this.parseNames()}),this.cm.addListener(this.rn,(P,H,J)=>{switch(P){case"chart_added":this._addColorChartOption(J);break;case"chart_removed":this._addColorChartOption(J,!0);break;case"filtered":console.log("ss");break;case"view_laoded":this.close()}}),this.itemList=[];const M=this.ds_to.dataStore;M.addListener(this.rn,(P,H)=>{if(P==="data_highlighted"){const J=H.indexes.length;if(J===1){const K=H.indexes[0],oe=M.getRowText(K,this.link.name_column);this.ac.setSelectedItem({value:oe,index:K})}else J<200?this.ta.value=H.indexes.map(K=>M.getRowText(K,this.link.name_column)).join(`
`):this.ta.value="Too many items selected"}else P==="filtered"&&(M.filterSize<max_genes&&M.isFiltered()?this.ta.value=M.getFilteredValues(this.link.name_column).join(`
`):this.ta.value="Too many items selected")})})}addFilteredItems(){const s=this.ds_to.dataStore;for(let f=0;f<s.size;f++)s.filterArray[f]===0&&(this.itemList.push(f),createEl("div",{text:s.getRowText(f,this.link.name_column)},this.columns[1]))}close(){this.cm.removeListener(this.rn),this.ds_to.dataStore.removeListener(this.rn),this.ac.destroy(),super.close()}_addColorChartOption(s,f=!1){const _=s.config;if(!(s.dataStore!==this.ds.dataStore||!s.getColorOptions().colorby)){if(f){const S=this.colorChartSelect.querySelector(`[value='${_.id}']`);S&&S.remove(),this.colorChartSelect.children.length===0&&this.colorDiv.classList.add("mdv-disabled");return}createEl("option",{value:_.id,text:_.title},this.colorChartSelect),this.colorDiv.classList.remove("mdv-disabled")}}_addOptionsSection(){this.colorDiv=createEl("div",{classes:["mdv-section","mdv-disabled"]},this.columns[0]),this.colorCheck=createEl("input",{type:"checkbox"},this.colorDiv),createEl("span",{text:"Color Chart:",styles:{marginRight:"4px"}},this.colorDiv),createEl("br",{},this.colorDiv),this.colorChartSelect=createEl("select",{styles:{maxWidth:"150px"}},this.colorDiv);for(const f in this.cm.charts)this._addColorChartOption(this.cm.charts[f].chart);const s=createEl("div",{classes:["mdv-section"]},this.columns[0]);this.histoCheck=createEl("input",{type:"checkbox"},s),createEl("span",{text:"Create Histogram:",styles:{marginRight:"4px"}},s)}parseNames(){let s=this.ta.value.replaceAll('"',"").split(/[,\s]+/);s=s.filter(T=>T!=="");const f=this.ds_to.dataStore.getColumnIndex(this.link.name_column);let _=!1;const S=new Array(s.length);for(let T=0;T<s.length;T++){const F=f[s[T]];F!==void 0?S[T]={value:s[T],index:F}:(_=!0,s[T]=`${s[T]}??`)}_?(this.errorDiv.textContent="Some Entries were unrecognised",this.ta.value="",this.ta.value=s.join(`
`)):(this.errorDiv.textContent="",this.addColumn(S))}addColumn(s){const _=document.querySelector(`input[name='${this.rn}']:checked`).value,S=Array.isArray(s),T=S?s:[s],F=[];for(const M of T){const P=`${_}|${M.value}(${_})|${M.index}`;if(this.ds.dataStore.addColumnFromField(P),F.push(P),!S){if(this.colorCheck.checked){const H=this.colorChartSelect.value;H&&this.cm.getChart(H).colorByColumn(P)}this.histoCheck.checked&&this.cm.addChart(this.ds.name,{type:"bar_chart",param:P});return}}this.addHeatMapCheck.checked&&this.cm.addChart(this.ds.name,{type:"heat_map",param:[this.heatMapSel.value].concat(F)}),this.addDotPlotCheck.checked&&this.cm.addChart(this.ds.name,{type:"dot_plot",param:[this.heatMapSel.value].concat(F)})}}class ColorChooser extends BaseDialog{constructor(s,f){const _={footer:!0,width:500,maxHeight:500,title:`Field Colors For ${f.name}`,columns:2,buttons:[{text:"Apply",method:"applyColor"}]};super(_,{cm:s,ds:f})}init(s){this.cm=s.cm,this.ds=s.ds;const f=this.columns[1];this.columns[0].style.overflowY="auto";const _={whiteSpace:"nowrap",padding:"2px"};createEl("div",{styles:_},f);const S={width:"70px",display:"inline-block"},T=createEl("div",{styles:_},f);createEl("label",{text:"Field:",styles:S},T),this.columnSelect=createEl("select",{classes:["mdv-select"],styles:{maxWidth:"150px"}},T);const F=createEl("div",{styles:_},f);createEl("div",{text:"Color Scheme",styles:{fontWeight:"bold"}},F),createEl("span",{classes:["mdv-info-text"],text:"Paste list of colors (hex)"},F);const M=createEl("div",{styles:{display:"flex",alignItems:"flex-start",marginTop:"2px"}},f);this.colorList=createEl("textarea",{classes:["mdv-select"],styles:{width:"100px",padding:"2px",height:"150px"}},M),this.setDataSource(this.ds.dataStore.name),createEl("button",{classes:["ciview-button-sm"],text:"Use Scheme"},M).addEventListener("click",()=>{this.parseColors(this.colorList.value)})}parseColors(s){const f=/^#[0-9A-F]{6}$/i;let _=s.replaceAll('"',"").split(/[,\s]+/);_=_.filter(F=>F.match(f));const S=_.join(`
`);this.colorList.value=S;let T=0;if(S.length>0)for(let F=0;F<this.colorChoosers.length;F++)this.colorChoosers[F].value=_[T],T++,T===_.length&&(T=0)}setDataSource(s){this.columnSelect.innerHTML="";const f=this.cm.getDataSource(s);this.dataSource=f,this.dsName=s;const _=f.getColumnList("string");for(const S of _)createEl("option",{text:S.name,value:S.field},this.columnSelect);this.columnSelect.addEventListener("change",()=>{this.setColumn(this.columnSelect.value)}),this.setColumn(_[0].field)}applyColor(){const s=new Array(this.colorChoosers.length);this.colorChoosers.forEach(f=>s[f.__index]=f.value),this.dataSource.setColumnColors(this.column,s),this.dataSource.dataChanged([this.column],!1,!1);for(const f of this.cm.dataSources){const _=f.dataStore,S=_.syncColumnColors.find(F=>F.dataSource===this.dataSource.name);if(S){const F=S.columns.find(M=>M.link_to===this.column);F&&(this.cm._sync_colors([F],this.dataSource,_),_.dataChanged([F.col],!1,!1))}const T=_.linkColumns.find(F=>F.dataSource===this.dataSource.name);T&&T.columns.indexOf(this.column)!==-1&&(_.setColumnColors(this.column,s),_.dataChanged([this.column],!1,!1))}}setColumn(s){const f=this.columns[0];this.column=s,f.innerHTML="";const _=this.dataSource.getColumnValues(s),S=_.slice(0).sort(),T=this.dataSource.getColumnColors(s),F=T.map((M,P)=>{const H=_.indexOf(S[P]);return{index:H,color:T[H]}});this.colorChoosers=[];for(let M=0;M<S.length;M++){const P=createEl("div",{styles:{display:"flex",flexWrap:"nowrap"}},f);createEl("span",{styles:{display:"inline-block",fontSize:"0.8erm"},classes:["mdv-flex-dynamic"],text:S[M]},P);const H=createEl("input",{classes:["mdv-flex-fixed"],styles:{width:"25px",height:"20px",padding:"0px"},type:"color",value:F[M].color},P);H.__index=F[M].index,this.colorChoosers.push(H)}}}var gridstack={},gridstackEngine={},utils$2={};Object.defineProperty(utils$2,"__esModule",{value:!0});utils$2.Utils=utils$2.obsoleteAttr=utils$2.obsoleteOptsDel=utils$2.obsoleteOpts=utils$2.obsolete=void 0;function obsolete(d,s,f,_,S){let T=(...F)=>(console.warn("gridstack.js: Function `"+f+"` is deprecated in "+S+" and has been replaced with `"+_+"`. It will be **removed** in a future release"),s.apply(d,F));return T.prototype=s.prototype,T}utils$2.obsolete=obsolete;function obsoleteOpts(d,s,f,_){d[s]!==void 0&&(d[f]=d[s],console.warn("gridstack.js: Option `"+s+"` is deprecated in "+_+" and has been replaced with `"+f+"`. It will be **removed** in a future release"))}utils$2.obsoleteOpts=obsoleteOpts;function obsoleteOptsDel(d,s,f,_){d[s]!==void 0&&console.warn("gridstack.js: Option `"+s+"` is deprecated in "+f+_)}utils$2.obsoleteOptsDel=obsoleteOptsDel;function obsoleteAttr(d,s,f,_){let S=d.getAttribute(s);S!==null&&(d.setAttribute(f,S),console.warn("gridstack.js: attribute `"+s+"`="+S+" is deprecated on this object in "+_+" and has been replaced with `"+f+"`. It will be **removed** in a future release"))}utils$2.obsoleteAttr=obsoleteAttr;class Utils{static getElements(s){if(typeof s=="string"){let f=document.querySelectorAll(s);return!f.length&&s[0]!=="."&&s[0]!=="#"&&(f=document.querySelectorAll("."+s),f.length||(f=document.querySelectorAll("#"+s))),Array.from(f)}return[s]}static getElement(s){if(typeof s=="string"){if(!s.length)return null;if(s[0]==="#")return document.getElementById(s.substring(1));if(s[0]==="."||s[0]==="[")return document.querySelector(s);if(!isNaN(+s[0]))return document.getElementById(s);let f=document.querySelector(s);return f||(f=document.getElementById(s)),f||(f=document.querySelector("."+s)),f}return s}static isIntercepted(s,f){return!(s.y>=f.y+f.h||s.y+s.h<=f.y||s.x+s.w<=f.x||s.x>=f.x+f.w)}static isTouching(s,f){return Utils.isIntercepted(s,{x:f.x-.5,y:f.y-.5,w:f.w+1,h:f.h+1})}static areaIntercept(s,f){let _=s.x>f.x?s.x:f.x,S=s.x+s.w<f.x+f.w?s.x+s.w:f.x+f.w;if(S<=_)return 0;let T=s.y>f.y?s.y:f.y,F=s.y+s.h<f.y+f.h?s.y+s.h:f.y+f.h;return F<=T?0:(S-_)*(F-T)}static area(s){return s.w*s.h}static sort(s,f,_){return _=_||s.reduce((S,T)=>Math.max(T.x+T.w,S),0)||12,f===-1?s.sort((S,T)=>T.x+T.y*_-(S.x+S.y*_)):s.sort((S,T)=>S.x+S.y*_-(T.x+T.y*_))}static createStylesheet(s,f,_){let S=document.createElement("style");const T=_==null?void 0:_.nonce;return T&&(S.nonce=T),S.setAttribute("type","text/css"),S.setAttribute("gs-style-id",s),S.styleSheet?S.styleSheet.cssText="":S.appendChild(document.createTextNode("")),f?f.insertBefore(S,f.firstChild):(f=document.getElementsByTagName("head")[0],f.appendChild(S)),S.sheet}static removeStylesheet(s){let f=document.querySelector("STYLE[gs-style-id="+s+"]");f&&f.parentNode&&f.remove()}static addCSSRule(s,f,_){typeof s.addRule=="function"?s.addRule(f,_):typeof s.insertRule=="function"&&s.insertRule(`${f}{${_}}`)}static toBool(s){return typeof s=="boolean"?s:typeof s=="string"?(s=s.toLowerCase(),!(s===""||s==="no"||s==="false"||s==="0")):!!s}static toNumber(s){return s===null||s.length===0?void 0:Number(s)}static parseHeight(s){let f,_="px";if(typeof s=="string"){let S=s.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%)?$/);if(!S)throw new Error("Invalid height");_=S[2]||"px",f=parseFloat(S[1])}else f=s;return{h:f,unit:_}}static defaults(s,...f){return f.forEach(_=>{for(const S in _){if(!_.hasOwnProperty(S))return;s[S]===null||s[S]===void 0?s[S]=_[S]:typeof _[S]=="object"&&typeof s[S]=="object"&&this.defaults(s[S],_[S])}}),s}static same(s,f){if(typeof s!="object")return s==f;if(typeof s!=typeof f||Object.keys(s).length!==Object.keys(f).length)return!1;for(const _ in s)if(s[_]!==f[_])return!1;return!0}static copyPos(s,f,_=!1){return s.x=f.x,s.y=f.y,s.w=f.w,s.h=f.h,_&&(f.minW&&(s.minW=f.minW),f.minH&&(s.minH=f.minH),f.maxW&&(s.maxW=f.maxW),f.maxH&&(s.maxH=f.maxH)),s}static samePos(s,f){return s&&f&&s.x===f.x&&s.y===f.y&&s.w===f.w&&s.h===f.h}static removeInternalAndSame(s,f){if(!(typeof s!="object"||typeof f!="object"))for(let _ in s){let S=s[_];if(_[0]==="_"||S===f[_])delete s[_];else if(S&&typeof S=="object"&&f[_]!==void 0){for(let T in S)(S[T]===f[_][T]||T[0]==="_")&&delete S[T];Object.keys(S).length||delete s[_]}}}static removeInternalForSave(s,f=!0){for(let _ in s)(_[0]==="_"||s[_]===null||s[_]===void 0)&&delete s[_];delete s.grid,f&&delete s.el,s.autoPosition||delete s.autoPosition,s.noResize||delete s.noResize,s.noMove||delete s.noMove,s.locked||delete s.locked,(s.w===1||s.w===s.minW)&&delete s.w,(s.h===1||s.h===s.minH)&&delete s.h}static closestUpByClass(s,f){for(;s;){if(s.classList.contains(f))return s;s=s.parentElement}return null}static throttle(s,f){let _=!1;return(...S)=>{_||(_=!0,setTimeout(()=>{s(...S),_=!1},f))}}static removePositioningStyles(s){let f=s.style;f.position&&f.removeProperty("position"),f.left&&f.removeProperty("left"),f.top&&f.removeProperty("top"),f.width&&f.removeProperty("width"),f.height&&f.removeProperty("height")}static getScrollElement(s){if(!s)return document.scrollingElement||document.documentElement;const f=getComputedStyle(s);return/(auto|scroll)/.test(f.overflow+f.overflowY)?s:this.getScrollElement(s.parentElement)}static updateScrollPosition(s,f,_){let S=s.getBoundingClientRect(),T=window.innerHeight||document.documentElement.clientHeight;if(S.top<0||S.bottom>T){let F=S.bottom-T,M=S.top,P=this.getScrollElement(s);if(P!==null){let H=P.scrollTop;S.top<0&&_<0?s.offsetHeight>T?P.scrollTop+=_:P.scrollTop+=Math.abs(M)>Math.abs(_)?_:M:_>0&&(s.offsetHeight>T?P.scrollTop+=_:P.scrollTop+=F>_?_:F),f.top+=P.scrollTop-H}}}static updateScrollResize(s,f,_){const S=this.getScrollElement(f),T=S.clientHeight,F=S===this.getScrollElement()?0:S.getBoundingClientRect().top,M=s.clientY-F,P=M<_,H=M>T-_;P?S.scrollBy({behavior:"smooth",top:M-_}):H&&S.scrollBy({behavior:"smooth",top:_-(T-M)})}static clone(s){return s==null||typeof s!="object"?s:s instanceof Array?[...s]:Object.assign({},s)}static cloneDeep(s){const f=["parentGrid","el","grid","subGrid","engine"],_=Utils.clone(s);for(const S in _)_.hasOwnProperty(S)&&typeof _[S]=="object"&&S.substring(0,2)!=="__"&&!f.find(T=>T===S)&&(_[S]=Utils.cloneDeep(s[S]));return _}static cloneNode(s){const f=s.cloneNode(!0);return f.removeAttribute("id"),f}static appendTo(s,f){let _;typeof f=="string"?_=document.querySelector(f):_=f,_&&_.appendChild(s)}static addElStyles(s,f){if(f instanceof Object)for(const _ in f)f.hasOwnProperty(_)&&(Array.isArray(f[_])?f[_].forEach(S=>{s.style[_]=S}):s.style[_]=f[_])}static initEvent(s,f){const _={type:f.type},S={button:0,which:0,buttons:1,bubbles:!0,cancelable:!0,target:f.target?f.target:s.target};return s.dataTransfer&&(_.dataTransfer=s.dataTransfer),["altKey","ctrlKey","metaKey","shiftKey"].forEach(T=>_[T]=s[T]),["pageX","pageY","clientX","clientY","screenX","screenY"].forEach(T=>_[T]=s[T]),Object.assign(Object.assign({},_),S)}static simulateMouseEvent(s,f,_){const S=document.createEvent("MouseEvents");S.initMouseEvent(f,!0,!0,window,1,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,0,s.target),(_||s.target).dispatchEvent(S)}}utils$2.Utils=Utils;Object.defineProperty(gridstackEngine,"__esModule",{value:!0});gridstackEngine.GridStackEngine=void 0;const utils_1$4=utils$2;class GridStackEngine{constructor(s={}){this.addedNodes=[],this.removedNodes=[],this.column=s.column||12,this.maxRow=s.maxRow,this._float=s.float,this.nodes=s.nodes||[],this.onChange=s.onChange}batchUpdate(s=!0){return!!this.batchMode===s?this:(this.batchMode=s,s?(this._prevFloat=this._float,this._float=!0,this.saveInitial()):(this._float=this._prevFloat,delete this._prevFloat,this._packNodes()._notify()),this)}_useEntireRowArea(s,f){return(!this.float||this.batchMode&&!this._prevFloat)&&!this._hasLocked&&(!s._moving||s._skipDown||f.y<=s.y)}_fixCollisions(s,f=s,_,S={}){if(this.sortNodes(-1),_=_||this.collide(s,f),!_)return!1;if(s._moving&&!S.nested&&!this.float&&this.swap(s,_))return!0;let T=f;this._useEntireRowArea(s,f)&&(T={x:0,w:this.column,y:f.y,h:f.h},_=this.collide(s,T,S.skip));let F=!1,M={nested:!0,pack:!1};for(;_=_||this.collide(s,T,S.skip);){let P;if(_.locked||s._moving&&!s._skipDown&&f.y>s.y&&!this.float&&(!this.collide(_,Object.assign(Object.assign({},_),{y:s.y}),s)||!this.collide(_,Object.assign(Object.assign({},_),{y:f.y-_.h}),s))?(s._skipDown=s._skipDown||f.y>s.y,P=this.moveNode(s,Object.assign(Object.assign(Object.assign({},f),{y:_.y+_.h}),M)),_.locked&&P?utils_1$4.Utils.copyPos(f,s):!_.locked&&P&&S.pack&&(this._packNodes(),f.y=_.y+_.h,utils_1$4.Utils.copyPos(s,f)),F=F||P):P=this.moveNode(_,Object.assign(Object.assign(Object.assign({},_),{y:f.y+f.h,skip:s}),M)),!P)return F;_=void 0}return F}collide(s,f=s,_){return this.nodes.find(S=>S!==s&&S!==_&&utils_1$4.Utils.isIntercepted(S,f))}collideAll(s,f=s,_){return this.nodes.filter(S=>S!==s&&S!==_&&utils_1$4.Utils.isIntercepted(S,f))}directionCollideCoverage(s,f,_){if(!f.rect||!s._rect)return;let S=s._rect,T=Object.assign({},f.rect);T.y>S.y?(T.h+=T.y-S.y,T.y=S.y):T.h+=S.y-T.y,T.x>S.x?(T.w+=T.x-S.x,T.x=S.x):T.w+=S.x-T.x;let F;return _.forEach(M=>{if(M.locked||!M._rect)return;let P=M._rect,H=Number.MAX_VALUE,J=Number.MAX_VALUE,K=.5;S.y<P.y?H=(T.y+T.h-P.y)/P.h:S.y+S.h>P.y+P.h&&(H=(P.y+P.h-T.y)/P.h),S.x<P.x?J=(T.x+T.w-P.x)/P.w:S.x+S.w>P.x+P.w&&(J=(P.x+P.w-T.x)/P.w);let oe=Math.min(J,H);oe>K&&(K=oe,F=M)}),f.collide=F,F}cacheRects(s,f,_,S,T,F){return this.nodes.forEach(M=>M._rect={y:M.y*f+_,x:M.x*s+F,w:M.w*s-F-S,h:M.h*f-_-T}),this}swap(s,f){if(!f||f.locked||!s||s.locked)return!1;function _(){let T=f.x,F=f.y;return f.x=s.x,f.y=s.y,s.h!=f.h?(s.x=T,s.y=f.y+f.h):s.w!=f.w?(s.x=f.x+f.w,s.y=F):(s.x=T,s.y=F),s._dirty=f._dirty=!0,!0}let S;if(s.w===f.w&&s.h===f.h&&(s.x===f.x||s.y===f.y)&&(S=utils_1$4.Utils.isTouching(s,f)))return _();if(S!==!1){if(s.w===f.w&&s.x===f.x&&(S||(S=utils_1$4.Utils.isTouching(s,f)))){if(f.y<s.y){let T=s;s=f,f=T}return _()}if(S!==!1){if(s.h===f.h&&s.y===f.y&&(S||(S=utils_1$4.Utils.isTouching(s,f)))){if(f.x<s.x){let T=s;s=f,f=T}return _()}return!1}}}isAreaEmpty(s,f,_,S){let T={x:s||0,y:f||0,w:_||1,h:S||1};return!this.collide(T)}compact(){if(this.nodes.length===0)return this;this.batchUpdate().sortNodes();let s=this.nodes;return this.nodes=[],s.forEach(f=>{f.locked||(f.autoPosition=!0),this.addNode(f,!1),f._dirty=!0}),this.batchUpdate(!1)}set float(s){this._float!==s&&(this._float=s||!1,s||this._packNodes()._notify())}get float(){return this._float||!1}sortNodes(s){return this.nodes=utils_1$4.Utils.sort(this.nodes,s,this.column),this}_packNodes(){return this.batchMode?this:(this.sortNodes(),this.float?this.nodes.forEach(s=>{if(s._updating||s._orig===void 0||s.y===s._orig.y)return;let f=s.y;for(;f>s._orig.y;)--f,this.collide(s,{x:s.x,y:f,w:s.w,h:s.h})||(s._dirty=!0,s.y=f)}):this.nodes.forEach((s,f)=>{if(!s.locked)for(;s.y>0;){let _=f===0?0:s.y-1;if(!(f===0||!this.collide(s,{x:s.x,y:_,w:s.w,h:s.h})))break;s._dirty=s.y!==_,s.y=_}}),this)}prepareNode(s,f){s=s||{},s._id=s._id||GridStackEngine._idSeq++,(s.x===void 0||s.y===void 0||s.x===null||s.y===null)&&(s.autoPosition=!0);let _={x:0,y:0,w:1,h:1};return utils_1$4.Utils.defaults(s,_),s.autoPosition||delete s.autoPosition,s.noResize||delete s.noResize,s.noMove||delete s.noMove,typeof s.x=="string"&&(s.x=Number(s.x)),typeof s.y=="string"&&(s.y=Number(s.y)),typeof s.w=="string"&&(s.w=Number(s.w)),typeof s.h=="string"&&(s.h=Number(s.h)),isNaN(s.x)&&(s.x=_.x,s.autoPosition=!0),isNaN(s.y)&&(s.y=_.y,s.autoPosition=!0),isNaN(s.w)&&(s.w=_.w),isNaN(s.h)&&(s.h=_.h),this.nodeBoundFix(s,f)}nodeBoundFix(s,f){let _=s._orig||utils_1$4.Utils.copyPos({},s);if(s.maxW&&(s.w=Math.min(s.w,s.maxW)),s.maxH&&(s.h=Math.min(s.h,s.maxH)),s.minW&&s.minW<=this.column&&(s.w=Math.max(s.w,s.minW)),s.minH&&(s.h=Math.max(s.h,s.minH)),(this.column===1||s.x+s.w>this.column)&&this.column<12&&!this._inColumnResize&&s._id&&this.findCacheLayout(s,12)===-1){let T=Object.assign({},s);T.autoPosition?(delete T.x,delete T.y):T.x=Math.min(11,T.x),T.w=Math.min(12,T.w),this.cacheOneLayout(T,12)}return s.w>this.column?s.w=this.column:s.w<1&&(s.w=1),this.maxRow&&s.h>this.maxRow?s.h=this.maxRow:s.h<1&&(s.h=1),s.x<0&&(s.x=0),s.y<0&&(s.y=0),s.x+s.w>this.column&&(f?s.w=this.column-s.x:s.x=this.column-s.w),this.maxRow&&s.y+s.h>this.maxRow&&(f?s.h=this.maxRow-s.y:s.y=this.maxRow-s.h),utils_1$4.Utils.samePos(s,_)||(s._dirty=!0),s}getDirtyNodes(s){return s?this.nodes.filter(f=>f._dirty&&!utils_1$4.Utils.samePos(f,f._orig)):this.nodes.filter(f=>f._dirty)}_notify(s){if(this.batchMode||!this.onChange)return this;let f=(s||[]).concat(this.getDirtyNodes());return this.onChange(f),this}cleanNodes(){return this.batchMode?this:(this.nodes.forEach(s=>{delete s._dirty,delete s._lastTried}),this)}saveInitial(){return this.nodes.forEach(s=>{s._orig=utils_1$4.Utils.copyPos({},s),delete s._dirty}),this._hasLocked=this.nodes.some(s=>s.locked),this}restoreInitial(){return this.nodes.forEach(s=>{utils_1$4.Utils.samePos(s,s._orig)||(utils_1$4.Utils.copyPos(s,s._orig),s._dirty=!0)}),this._notify(),this}findEmptyPosition(s,f=this.nodes,_=this.column){f=utils_1$4.Utils.sort(f,-1,_);let S=!1;for(let T=0;!S;++T){let F=T%_,M=Math.floor(T/_);if(F+s.w>_)continue;let P={x:F,y:M,w:s.w,h:s.h};f.find(H=>utils_1$4.Utils.isIntercepted(P,H))||(s.x=F,s.y=M,delete s.autoPosition,S=!0)}return S}addNode(s,f=!1){let _=this.nodes.find(S=>S._id===s._id);return _||(s=this._inColumnResize?this.nodeBoundFix(s):this.prepareNode(s),delete s._temporaryRemoved,delete s._removeDOM,s.autoPosition&&this.findEmptyPosition(s)&&delete s.autoPosition,this.nodes.push(s),f&&this.addedNodes.push(s),this._fixCollisions(s),this.batchMode||this._packNodes()._notify(),s)}removeNode(s,f=!0,_=!1){return this.nodes.find(S=>S===s)?(_&&this.removedNodes.push(s),f&&(s._removeDOM=!0),this.nodes=this.nodes.filter(S=>S!==s),this._packNodes()._notify([s])):this}removeAll(s=!0){return delete this._layouts,this.nodes.length===0?this:(s&&this.nodes.forEach(f=>f._removeDOM=!0),this.removedNodes=this.nodes,this.nodes=[],this._notify(this.removedNodes))}moveNodeCheck(s,f){if(!this.changedPosConstrain(s,f))return!1;if(f.pack=!0,!this.maxRow)return this.moveNode(s,f);let _,S=new GridStackEngine({column:this.column,float:this.float,nodes:this.nodes.map(F=>F===s?(_=Object.assign({},F),_):Object.assign({},F))});if(!_)return!1;let T=S.moveNode(_,f)&&S.getRow()<=this.maxRow;if(!T&&!f.resizing&&f.collide){let F=f.collide.el.gridstackNode;if(this.swap(s,F))return this._notify(),!0}return T?(S.nodes.filter(F=>F._dirty).forEach(F=>{let M=this.nodes.find(P=>P._id===F._id);M&&(utils_1$4.Utils.copyPos(M,F),M._dirty=!0)}),this._notify(),!0):!1}willItFit(s){if(delete s._willFitPos,!this.maxRow)return!0;let f=new GridStackEngine({column:this.column,float:this.float,nodes:this.nodes.map(S=>Object.assign({},S))}),_=Object.assign({},s);return this.cleanupNode(_),delete _.el,delete _._id,delete _.content,delete _.grid,f.addNode(_),f.getRow()<=this.maxRow?(s._willFitPos=utils_1$4.Utils.copyPos({},_),!0):!1}changedPosConstrain(s,f){return f.w=f.w||s.w,f.h=f.h||s.h,s.x!==f.x||s.y!==f.y?!0:(s.maxW&&(f.w=Math.min(f.w,s.maxW)),s.maxH&&(f.h=Math.min(f.h,s.maxH)),s.minW&&(f.w=Math.max(f.w,s.minW)),s.minH&&(f.h=Math.max(f.h,s.minH)),s.w!==f.w||s.h!==f.h)}moveNode(s,f){var _,S;if(!s||!f)return!1;let T;f.pack===void 0&&(T=f.pack=!0),typeof f.x!="number"&&(f.x=s.x),typeof f.y!="number"&&(f.y=s.y),typeof f.w!="number"&&(f.w=s.w),typeof f.h!="number"&&(f.h=s.h);let F=s.w!==f.w||s.h!==f.h,M=utils_1$4.Utils.copyPos({},s,!0);if(utils_1$4.Utils.copyPos(M,f),M=this.nodeBoundFix(M,F),utils_1$4.Utils.copyPos(f,M),utils_1$4.Utils.samePos(s,f))return!1;let P=utils_1$4.Utils.copyPos({},s),H=this.collideAll(s,M,f.skip),J=!0;if(H.length){let K=s._moving&&!f.nested,oe=K?this.directionCollideCoverage(s,f,H):H[0];if(K&&oe&&(!((S=(_=s.grid)===null||_===void 0?void 0:_.opts)===null||S===void 0)&&S.subGridDynamic)&&!s.grid._isTemp){let se=utils_1$4.Utils.areaIntercept(f.rect,oe._rect),ae=utils_1$4.Utils.area(f.rect),ge=utils_1$4.Utils.area(oe._rect);se/(ae<ge?ae:ge)>.8&&(oe.grid.makeSubGrid(oe.el,void 0,s),oe=void 0)}oe?J=!this._fixCollisions(s,M,oe,f):(J=!1,T&&delete f.pack)}return J&&(s._dirty=!0,utils_1$4.Utils.copyPos(s,M)),f.pack&&this._packNodes()._notify(),!utils_1$4.Utils.samePos(s,P)}getRow(){return this.nodes.reduce((s,f)=>Math.max(s,f.y+f.h),0)}beginUpdate(s){return s._updating||(s._updating=!0,delete s._skipDown,this.batchMode||this.saveInitial()),this}endUpdate(){let s=this.nodes.find(f=>f._updating);return s&&(delete s._updating,delete s._skipDown),this}save(s=!0){var f;let _=(f=this._layouts)===null||f===void 0?void 0:f.length,S=_&&this.column!==_-1?this._layouts[_-1]:null,T=[];return this.sortNodes(),this.nodes.forEach(F=>{let M=S==null?void 0:S.find(H=>H._id===F._id),P=Object.assign({},F);M&&(P.x=M.x,P.y=M.y,P.w=M.w),utils_1$4.Utils.removeInternalForSave(P,!s),T.push(P)}),T}layoutsNodesChange(s){return!this._layouts||this._inColumnResize?this:(this._layouts.forEach((f,_)=>{if(!f||_===this.column)return this;if(_<this.column)this._layouts[_]=void 0;else{let S=_/this.column;s.forEach(T=>{if(!T._orig)return;let F=f.find(M=>M._id===T._id);F&&(T.y!==T._orig.y&&(F.y+=T.y-T._orig.y),T.x!==T._orig.x&&(F.x=Math.round(T.x*S)),T.w!==T._orig.w&&(F.w=Math.round(T.w*S)))})}}),this)}updateNodeWidths(s,f,_,S="moveScale"){var T;if(!this.nodes.length||!f||s===f)return this;this.cacheLayout(this.nodes,s),this.batchUpdate();let F=[],M=!1;if(f===1&&(_!=null&&_.length)){M=!0;let H=0;_.forEach(J=>{J.x=0,J.w=1,J.y=Math.max(J.y,H),H=J.y+J.h}),F=_,_=[]}else _=utils_1$4.Utils.sort(this.nodes,-1,s);let P=[];if(f>s){P=this._layouts[f]||[];let H=this._layouts.length-1;!P.length&&s!==H&&(!((T=this._layouts[H])===null||T===void 0)&&T.length)&&(s=H,this._layouts[H].forEach(J=>{let K=_.find(oe=>oe._id===J._id);K&&(K.x=J.x,K.y=J.y,K.w=J.w)}))}if(P.forEach(H=>{let J=_.findIndex(K=>K._id===H._id);J!==-1&&((H.autoPosition||isNaN(H.x)||isNaN(H.y))&&this.findEmptyPosition(H,F),H.autoPosition||(_[J].x=H.x,_[J].y=H.y,_[J].w=H.w,F.push(_[J])),_.splice(J,1))}),_.length){if(typeof S=="function")S(f,s,F,_);else if(!M){let H=f/s,J=S==="move"||S==="moveScale",K=S==="scale"||S==="moveScale";_.forEach(oe=>{oe.x=f===1?0:J?Math.round(oe.x*H):Math.min(oe.x,f-1),oe.w=f===1||s===1?1:K?Math.round(oe.w*H)||1:Math.min(oe.w,f),F.push(oe)}),_=[]}}return M||(F=utils_1$4.Utils.sort(F,-1,f)),this._inColumnResize=!0,this.nodes=[],F.forEach(H=>{this.addNode(H,!1),delete H._orig}),this.batchUpdate(!1),delete this._inColumnResize,this}cacheLayout(s,f,_=!1){let S=[];return s.forEach((T,F)=>{T._id=T._id||GridStackEngine._idSeq++,S[F]={x:T.x,y:T.y,w:T.w,_id:T._id}}),this._layouts=_?[]:this._layouts||[],this._layouts[f]=S,this}cacheOneLayout(s,f){s._id=s._id||GridStackEngine._idSeq++;let _={x:s.x,y:s.y,w:s.w,_id:s._id};s.autoPosition&&(delete _.x,delete _.y,_.autoPosition=!0),this._layouts=this._layouts||[],this._layouts[f]=this._layouts[f]||[];let S=this.findCacheLayout(s,f);return S===-1?this._layouts[f].push(_):this._layouts[f][S]=_,this}findCacheLayout(s,f){var _,S,T;return(T=(S=(_=this._layouts)===null||_===void 0?void 0:_[f])===null||S===void 0?void 0:S.findIndex(F=>F._id===s._id))!==null&&T!==void 0?T:-1}cleanupNode(s){for(let f in s)f[0]==="_"&&f!=="_id"&&delete s[f];return this}}gridstackEngine.GridStackEngine=GridStackEngine;GridStackEngine._idSeq=1;var types={};Object.defineProperty(types,"__esModule",{value:!0});types.dragInDefaultOptions=types.gridDefaults=void 0;types.gridDefaults={alwaysShowResizeHandle:"mobile",animate:!0,auto:!0,cellHeight:"auto",cellHeightThrottle:100,cellHeightUnit:"px",column:12,draggable:{handle:".grid-stack-item-content",appendTo:"body",scroll:!0},handle:".grid-stack-item-content",itemClass:"grid-stack-item",margin:10,marginUnit:"px",maxRow:0,minRow:0,oneColumnSize:768,placeholderClass:"grid-stack-placeholder",placeholderText:"",removableOptions:{accept:".grid-stack-item"},resizable:{handles:"se"},rtl:"auto"};types.dragInDefaultOptions={handle:".grid-stack-item-content",appendTo:"body"};var ddGridstack={},ddManager={};Object.defineProperty(ddManager,"__esModule",{value:!0});ddManager.DDManager=void 0;class DDManager{}ddManager.DDManager=DDManager;var ddElement={},ddResizable={},ddResizableHandle={},ddTouch={};Object.defineProperty(ddTouch,"__esModule",{value:!0});ddTouch.pointerleave=ddTouch.pointerenter=ddTouch.pointerdown=ddTouch.touchend=ddTouch.touchmove=ddTouch.touchstart=ddTouch.isTouch=void 0;const dd_manager_1$4=ddManager;ddTouch.isTouch=typeof window<"u"&&typeof document<"u"&&("ontouchstart"in document||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);class DDTouch{}function simulateMouseEvent(d,s){if(d.touches.length>1)return;d.cancelable&&d.preventDefault();const f=d.changedTouches[0],_=document.createEvent("MouseEvents");_.initMouseEvent(s,!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(_)}function simulatePointerMouseEvent(d,s){d.cancelable&&d.preventDefault();const f=document.createEvent("MouseEvents");f.initMouseEvent(s,!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(f)}function touchstart(d){DDTouch.touchHandled||(DDTouch.touchHandled=!0,simulateMouseEvent(d,"mousedown"))}ddTouch.touchstart=touchstart;function touchmove(d){DDTouch.touchHandled&&simulateMouseEvent(d,"mousemove")}ddTouch.touchmove=touchmove;function touchend(d){if(!DDTouch.touchHandled)return;DDTouch.pointerLeaveTimeout&&(window.clearTimeout(DDTouch.pointerLeaveTimeout),delete DDTouch.pointerLeaveTimeout);const s=!!dd_manager_1$4.DDManager.dragElement;simulateMouseEvent(d,"mouseup"),s||simulateMouseEvent(d,"click"),DDTouch.touchHandled=!1}ddTouch.touchend=touchend;function pointerdown(d){d.target.releasePointerCapture(d.pointerId)}ddTouch.pointerdown=pointerdown;function pointerenter(d){dd_manager_1$4.DDManager.dragElement&&simulatePointerMouseEvent(d,"mouseenter")}ddTouch.pointerenter=pointerenter;function pointerleave(d){dd_manager_1$4.DDManager.dragElement&&(DDTouch.pointerLeaveTimeout=window.setTimeout(()=>{delete DDTouch.pointerLeaveTimeout,simulatePointerMouseEvent(d,"mouseleave")},10))}ddTouch.pointerleave=pointerleave;Object.defineProperty(ddResizableHandle,"__esModule",{value:!0});ddResizableHandle.DDResizableHandle=void 0;const dd_touch_1$2=ddTouch;class DDResizableHandle{constructor(s,f,_){this.moving=!1,this.host=s,this.dir=f,this.option=_,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._init()}_init(){const s=document.createElement("div");return s.classList.add("ui-resizable-handle"),s.classList.add(`${DDResizableHandle.prefix}${this.dir}`),s.style.zIndex="100",s.style.userSelect="none",this.el=s,this.host.appendChild(this.el),this.el.addEventListener("mousedown",this._mouseDown),dd_touch_1$2.isTouch&&(this.el.addEventListener("touchstart",dd_touch_1$2.touchstart),this.el.addEventListener("pointerdown",dd_touch_1$2.pointerdown)),this}destroy(){return this.moving&&this._mouseUp(this.mouseDownEvent),this.el.removeEventListener("mousedown",this._mouseDown),dd_touch_1$2.isTouch&&(this.el.removeEventListener("touchstart",dd_touch_1$2.touchstart),this.el.removeEventListener("pointerdown",dd_touch_1$2.pointerdown)),this.host.removeChild(this.el),delete this.el,delete this.host,this}_mouseDown(s){this.mouseDownEvent=s,document.addEventListener("mousemove",this._mouseMove,!0),document.addEventListener("mouseup",this._mouseUp,!0),dd_touch_1$2.isTouch&&(this.el.addEventListener("touchmove",dd_touch_1$2.touchmove),this.el.addEventListener("touchend",dd_touch_1$2.touchend)),s.stopPropagation(),s.preventDefault()}_mouseMove(s){let f=this.mouseDownEvent;this.moving?this._triggerEvent("move",s):Math.abs(s.x-f.x)+Math.abs(s.y-f.y)>2&&(this.moving=!0,this._triggerEvent("start",this.mouseDownEvent),this._triggerEvent("move",s)),s.stopPropagation(),s.preventDefault()}_mouseUp(s){this.moving&&this._triggerEvent("stop",s),document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),dd_touch_1$2.isTouch&&(this.el.removeEventListener("touchmove",dd_touch_1$2.touchmove),this.el.removeEventListener("touchend",dd_touch_1$2.touchend)),delete this.moving,delete this.mouseDownEvent,s.stopPropagation(),s.preventDefault()}_triggerEvent(s,f){return this.option[s]&&this.option[s](f),this}}ddResizableHandle.DDResizableHandle=DDResizableHandle;DDResizableHandle.prefix="ui-resizable-";var ddBaseImpl={};Object.defineProperty(ddBaseImpl,"__esModule",{value:!0});ddBaseImpl.DDBaseImplement=void 0;class DDBaseImplement{constructor(){this._eventRegister={}}get disabled(){return this._disabled}on(s,f){this._eventRegister[s]=f}off(s){delete this._eventRegister[s]}enable(){this._disabled=!1}disable(){this._disabled=!0}destroy(){delete this._eventRegister}triggerEvent(s,f){if(!this.disabled&&this._eventRegister&&this._eventRegister[s])return this._eventRegister[s](f)}}ddBaseImpl.DDBaseImplement=DDBaseImplement;Object.defineProperty(ddResizable,"__esModule",{value:!0});ddResizable.DDResizable=void 0;const dd_resizable_handle_1=ddResizableHandle,dd_base_impl_1$2=ddBaseImpl,utils_1$3=utils$2,dd_manager_1$3=ddManager;class DDResizable extends dd_base_impl_1$2.DDBaseImplement{constructor(s,f={}){super(),this._ui=()=>{const S=this.el.parentElement.getBoundingClientRect(),T={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},F=this.temporalRect||T;return{position:{left:F.left-S.left,top:F.top-S.top},size:{width:F.width,height:F.height}}},this.el=s,this.option=f,this._mouseOver=this._mouseOver.bind(this),this._mouseOut=this._mouseOut.bind(this),this.enable(),this._setupAutoHide(this.option.autoHide),this._setupHandlers()}on(s,f){super.on(s,f)}off(s){super.off(s)}enable(){super.enable(),this.el.classList.add("ui-resizable"),this.el.classList.remove("ui-resizable-disabled"),this._setupAutoHide(this.option.autoHide)}disable(){super.disable(),this.el.classList.add("ui-resizable-disabled"),this.el.classList.remove("ui-resizable"),this._setupAutoHide(!1)}destroy(){this._removeHandlers(),this._setupAutoHide(!1),this.el.classList.remove("ui-resizable"),delete this.el,super.destroy()}updateOption(s){let f=s.handles&&s.handles!==this.option.handles,_=s.autoHide&&s.autoHide!==this.option.autoHide;return Object.keys(s).forEach(S=>this.option[S]=s[S]),f&&(this._removeHandlers(),this._setupHandlers()),_&&this._setupAutoHide(this.option.autoHide),this}_setupAutoHide(s){return s?(this.el.classList.add("ui-resizable-autohide"),this.el.addEventListener("mouseover",this._mouseOver),this.el.addEventListener("mouseout",this._mouseOut)):(this.el.classList.remove("ui-resizable-autohide"),this.el.removeEventListener("mouseover",this._mouseOver),this.el.removeEventListener("mouseout",this._mouseOut),dd_manager_1$3.DDManager.overResizeElement===this&&delete dd_manager_1$3.DDManager.overResizeElement),this}_mouseOver(s){dd_manager_1$3.DDManager.overResizeElement||dd_manager_1$3.DDManager.dragElement||(dd_manager_1$3.DDManager.overResizeElement=this,this.el.classList.remove("ui-resizable-autohide"))}_mouseOut(s){dd_manager_1$3.DDManager.overResizeElement===this&&(delete dd_manager_1$3.DDManager.overResizeElement,this.el.classList.add("ui-resizable-autohide"))}_setupHandlers(){let s=this.option.handles||"e,s,se";return s==="all"&&(s="n,e,s,w,se,sw,ne,nw"),this.handlers=s.split(",").map(f=>f.trim()).map(f=>new dd_resizable_handle_1.DDResizableHandle(this.el,f,{start:_=>{this._resizeStart(_)},stop:_=>{this._resizeStop(_)},move:_=>{this._resizing(_,f)}})),this}_resizeStart(s){this.originalRect=this.el.getBoundingClientRect(),this.scrollEl=utils_1$3.Utils.getScrollElement(this.el),this.scrollY=this.scrollEl.scrollTop,this.scrolled=0,this.startEvent=s,this._setupHelper(),this._applyChange();const f=utils_1$3.Utils.initEvent(s,{type:"resizestart",target:this.el});return this.option.start&&this.option.start(f,this._ui()),this.el.classList.add("ui-resizable-resizing"),this.triggerEvent("resizestart",f),this}_resizing(s,f){this.scrolled=this.scrollEl.scrollTop-this.scrollY,this.temporalRect=this._getChange(s,f),this._applyChange();const _=utils_1$3.Utils.initEvent(s,{type:"resize",target:this.el});return this.option.resize&&this.option.resize(_,this._ui()),this.triggerEvent("resize",_),this}_resizeStop(s){const f=utils_1$3.Utils.initEvent(s,{type:"resizestop",target:this.el});return this.option.stop&&this.option.stop(f),this.el.classList.remove("ui-resizable-resizing"),this.triggerEvent("resizestop",f),this._cleanHelper(),delete this.startEvent,delete this.originalRect,delete this.temporalRect,delete this.scrollY,delete this.scrolled,this}_setupHelper(){return this.elOriginStyleVal=DDResizable._originStyleProp.map(s=>this.el.style[s]),this.parentOriginStylePosition=this.el.parentElement.style.position,window.getComputedStyle(this.el.parentElement).position.match(/static/)&&(this.el.parentElement.style.position="relative"),this.el.style.position="absolute",this.el.style.opacity="0.8",this}_cleanHelper(){return DDResizable._originStyleProp.forEach((s,f)=>{this.el.style[s]=this.elOriginStyleVal[f]||null}),this.el.parentElement.style.position=this.parentOriginStylePosition||null,this}_getChange(s,f){const _=this.startEvent,S={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},T=s.clientX-_.clientX,F=s.clientY-_.clientY;f.indexOf("e")>-1?S.width+=T:f.indexOf("w")>-1&&(S.width-=T,S.left+=T),f.indexOf("s")>-1?S.height+=F:f.indexOf("n")>-1&&(S.height-=F,S.top+=F);const M=this._constrainSize(S.width,S.height);return Math.round(S.width)!==Math.round(M.width)&&(f.indexOf("w")>-1&&(S.left+=S.width-M.width),S.width=M.width),Math.round(S.height)!==Math.round(M.height)&&(f.indexOf("n")>-1&&(S.top+=S.height-M.height),S.height=M.height),S}_constrainSize(s,f){const _=this.option.maxWidth||Number.MAX_SAFE_INTEGER,S=this.option.minWidth||s,T=this.option.maxHeight||Number.MAX_SAFE_INTEGER,F=this.option.minHeight||f,M=Math.min(_,Math.max(S,s)),P=Math.min(T,Math.max(F,f));return{width:M,height:P}}_applyChange(){let s={left:0,top:0,width:0,height:0};if(this.el.style.position==="absolute"){const f=this.el.parentElement,{left:_,top:S}=f.getBoundingClientRect();s={left:_,top:S,width:0,height:0}}return this.temporalRect?(Object.keys(this.temporalRect).forEach(f=>{const _=this.temporalRect[f];this.el.style[f]=_-s[f]+"px"}),this):this}_removeHandlers(){return this.handlers.forEach(s=>s.destroy()),delete this.handlers,this}}ddResizable.DDResizable=DDResizable;DDResizable._originStyleProp=["width","height","position","left","top","opacity","zIndex"];var ddDraggable={};Object.defineProperty(ddDraggable,"__esModule",{value:!0});ddDraggable.DDDraggable=void 0;const dd_manager_1$2=ddManager,utils_1$2=utils$2,dd_base_impl_1$1=ddBaseImpl,dd_touch_1$1=ddTouch;class DDDraggable extends dd_base_impl_1$1.DDBaseImplement{constructor(s,f={}){super(),this.el=s,this.option=f;let _=f.handle.substring(1);this.dragEl=s.classList.contains(_)?s:s.querySelector(f.handle)||s,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this.enable()}on(s,f){super.on(s,f)}off(s){super.off(s)}enable(){this.disabled!==!1&&(super.enable(),this.dragEl.addEventListener("mousedown",this._mouseDown),dd_touch_1$1.isTouch&&(this.dragEl.addEventListener("touchstart",dd_touch_1$1.touchstart),this.dragEl.addEventListener("pointerdown",dd_touch_1$1.pointerdown)),this.el.classList.remove("ui-draggable-disabled"),this.el.classList.add("ui-draggable"))}disable(s=!1){this.disabled!==!0&&(super.disable(),this.dragEl.removeEventListener("mousedown",this._mouseDown),dd_touch_1$1.isTouch&&(this.dragEl.removeEventListener("touchstart",dd_touch_1$1.touchstart),this.dragEl.removeEventListener("pointerdown",dd_touch_1$1.pointerdown)),this.el.classList.remove("ui-draggable"),s||this.el.classList.add("ui-draggable-disabled"))}destroy(){this.dragTimeout&&window.clearTimeout(this.dragTimeout),delete this.dragTimeout,this.dragging&&this._mouseUp(this.mouseDownEvent),this.disable(!0),delete this.el,delete this.helper,delete this.option,super.destroy()}updateOption(s){return Object.keys(s).forEach(f=>this.option[f]=s[f]),this}_mouseDown(s){if(dd_manager_1$2.DDManager.mouseHandled)return;if(s.button!==0)return!0;const f=["input","textarea","button","select","option"],_=s.target.nodeName.toLowerCase();return f.find(S=>S===_)||s.target.closest('[contenteditable="true"]')||(this.mouseDownEvent=s,delete this.dragging,delete dd_manager_1$2.DDManager.dragElement,delete dd_manager_1$2.DDManager.dropElement,document.addEventListener("mousemove",this._mouseMove,!0),document.addEventListener("mouseup",this._mouseUp,!0),dd_touch_1$1.isTouch&&(this.dragEl.addEventListener("touchmove",dd_touch_1$1.touchmove),this.dragEl.addEventListener("touchend",dd_touch_1$1.touchend)),s.preventDefault(),document.activeElement&&document.activeElement.blur(),dd_manager_1$2.DDManager.mouseHandled=!0),!0}_callDrag(s){if(!this.dragging)return;const f=utils_1$2.Utils.initEvent(s,{target:this.el,type:"drag"});this.option.drag&&this.option.drag(f,this.ui()),this.triggerEvent("drag",f)}_mouseMove(s){var f;let _=this.mouseDownEvent;if(this.dragging)if(this._dragFollow(s),dd_manager_1$2.DDManager.pauseDrag){const S=Number.isInteger(dd_manager_1$2.DDManager.pauseDrag)?dd_manager_1$2.DDManager.pauseDrag:100;this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>this._callDrag(s),S)}else this._callDrag(s);else if(Math.abs(s.x-_.x)+Math.abs(s.y-_.y)>3){this.dragging=!0,dd_manager_1$2.DDManager.dragElement=this;let S=(f=this.el.gridstackNode)===null||f===void 0?void 0:f.grid;S?dd_manager_1$2.DDManager.dropElement=S.el.ddElement.ddDroppable:delete dd_manager_1$2.DDManager.dropElement,this.helper=this._createHelper(s),this._setupHelperContainmentStyle(),this.dragOffset=this._getDragOffset(s,this.el,this.helperContainment);const T=utils_1$2.Utils.initEvent(s,{target:this.el,type:"dragstart"});this._setupHelperStyle(s),this.option.start&&this.option.start(T,this.ui()),this.triggerEvent("dragstart",T)}return s.preventDefault(),!0}_mouseUp(s){var f;if(document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),dd_touch_1$1.isTouch&&(this.dragEl.removeEventListener("touchmove",dd_touch_1$1.touchmove,!0),this.dragEl.removeEventListener("touchend",dd_touch_1$1.touchend,!0)),this.dragging){delete this.dragging,((f=dd_manager_1$2.DDManager.dropElement)===null||f===void 0?void 0:f.el)===this.el.parentElement&&delete dd_manager_1$2.DDManager.dropElement,this.helperContainment.style.position=this.parentOriginStylePosition||null,this.helper===this.el?this._removeHelperStyle():this.helper.remove();const _=utils_1$2.Utils.initEvent(s,{target:this.el,type:"dragstop"});this.option.stop&&this.option.stop(_),this.triggerEvent("dragstop",_),dd_manager_1$2.DDManager.dropElement&&dd_manager_1$2.DDManager.dropElement.drop(s)}delete this.helper,delete this.mouseDownEvent,delete dd_manager_1$2.DDManager.dragElement,delete dd_manager_1$2.DDManager.dropElement,delete dd_manager_1$2.DDManager.mouseHandled,s.preventDefault()}_createHelper(s){let f=this.el;return typeof this.option.helper=="function"?f=this.option.helper(s):this.option.helper==="clone"&&(f=utils_1$2.Utils.cloneNode(this.el)),document.body.contains(f)||utils_1$2.Utils.appendTo(f,this.option.appendTo==="parent"?this.el.parentNode:this.option.appendTo),f===this.el&&(this.dragElementOriginStyle=DDDraggable.originStyleProp.map(_=>this.el.style[_])),f}_setupHelperStyle(s){this.helper.classList.add("ui-draggable-dragging");const f=this.helper.style;return f.pointerEvents="none",f["min-width"]=0,f.width=this.dragOffset.width+"px",f.height=this.dragOffset.height+"px",f.willChange="left, top",f.position="fixed",this._dragFollow(s),f.transition="none",setTimeout(()=>{this.helper&&(f.transition=null)},0),this}_removeHelperStyle(){var s;this.helper.classList.remove("ui-draggable-dragging");let f=(s=this.helper)===null||s===void 0?void 0:s.gridstackNode;if(!(f!=null&&f._isAboutToRemove)&&this.dragElementOriginStyle){let _=this.helper,S=this.dragElementOriginStyle.transition||null;_.style.transition=this.dragElementOriginStyle.transition="none",DDDraggable.originStyleProp.forEach(T=>_.style[T]=this.dragElementOriginStyle[T]||null),setTimeout(()=>_.style.transition=S,50)}return delete this.dragElementOriginStyle,this}_dragFollow(s){let f={left:0,top:0};const _=this.helper.style,S=this.dragOffset;_.left=s.clientX+S.offsetLeft-f.left+"px",_.top=s.clientY+S.offsetTop-f.top+"px"}_setupHelperContainmentStyle(){return this.helperContainment=this.helper.parentElement,this.helper.style.position!=="fixed"&&(this.parentOriginStylePosition=this.helperContainment.style.position,window.getComputedStyle(this.helperContainment).position.match(/static/)&&(this.helperContainment.style.position="relative")),this}_getDragOffset(s,f,_){let S=0,T=0;if(_){const M=document.createElement("div");utils_1$2.Utils.addElStyles(M,{opacity:"0",position:"fixed",top:"0px",left:"0px",width:"1px",height:"1px",zIndex:"-999999"}),_.appendChild(M);const P=M.getBoundingClientRect();_.removeChild(M),S=P.left,T=P.top}const F=f.getBoundingClientRect();return{left:F.left,top:F.top,offsetLeft:-s.clientX+F.left-S,offsetTop:-s.clientY+F.top-T,width:F.width,height:F.height}}ui(){const f=this.el.parentElement.getBoundingClientRect(),_=this.helper.getBoundingClientRect();return{position:{top:_.top-f.top,left:_.left-f.left}}}}ddDraggable.DDDraggable=DDDraggable;DDDraggable.originStyleProp=["transition","pointerEvents","position","left","top","minWidth","willChange"];var ddDroppable={};Object.defineProperty(ddDroppable,"__esModule",{value:!0});ddDroppable.DDDroppable=void 0;const dd_manager_1$1=ddManager,dd_base_impl_1=ddBaseImpl,utils_1$1=utils$2,dd_touch_1=ddTouch;class DDDroppable extends dd_base_impl_1.DDBaseImplement{constructor(s,f={}){super(),this.el=s,this.option=f,this._mouseEnter=this._mouseEnter.bind(this),this._mouseLeave=this._mouseLeave.bind(this),this.enable(),this._setupAccept()}on(s,f){super.on(s,f)}off(s){super.off(s)}enable(){this.disabled!==!1&&(super.enable(),this.el.classList.add("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),this.el.addEventListener("mouseenter",this._mouseEnter),this.el.addEventListener("mouseleave",this._mouseLeave),dd_touch_1.isTouch&&(this.el.addEventListener("pointerenter",dd_touch_1.pointerenter),this.el.addEventListener("pointerleave",dd_touch_1.pointerleave)))}disable(s=!1){this.disabled!==!0&&(super.disable(),this.el.classList.remove("ui-droppable"),s||this.el.classList.add("ui-droppable-disabled"),this.el.removeEventListener("mouseenter",this._mouseEnter),this.el.removeEventListener("mouseleave",this._mouseLeave),dd_touch_1.isTouch&&(this.el.removeEventListener("pointerenter",dd_touch_1.pointerenter),this.el.removeEventListener("pointerleave",dd_touch_1.pointerleave)))}destroy(){this.disable(!0),this.el.classList.remove("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),super.destroy()}updateOption(s){return Object.keys(s).forEach(f=>this.option[f]=s[f]),this._setupAccept(),this}_mouseEnter(s){if(!dd_manager_1$1.DDManager.dragElement||!this._canDrop(dd_manager_1$1.DDManager.dragElement.el))return;s.preventDefault(),s.stopPropagation(),dd_manager_1$1.DDManager.dropElement&&dd_manager_1$1.DDManager.dropElement!==this&&dd_manager_1$1.DDManager.dropElement._mouseLeave(s),dd_manager_1$1.DDManager.dropElement=this;const f=utils_1$1.Utils.initEvent(s,{target:this.el,type:"dropover"});this.option.over&&this.option.over(f,this._ui(dd_manager_1$1.DDManager.dragElement)),this.triggerEvent("dropover",f),this.el.classList.add("ui-droppable-over")}_mouseLeave(s){var f;if(!dd_manager_1$1.DDManager.dragElement||dd_manager_1$1.DDManager.dropElement!==this)return;s.preventDefault(),s.stopPropagation();const _=utils_1$1.Utils.initEvent(s,{target:this.el,type:"dropout"});if(this.option.out&&this.option.out(_,this._ui(dd_manager_1$1.DDManager.dragElement)),this.triggerEvent("dropout",_),dd_manager_1$1.DDManager.dropElement===this){delete dd_manager_1$1.DDManager.dropElement;let S,T=this.el.parentElement;for(;!S&&T;)S=(f=T.ddElement)===null||f===void 0?void 0:f.ddDroppable,T=T.parentElement;S&&S._mouseEnter(s)}}drop(s){s.preventDefault();const f=utils_1$1.Utils.initEvent(s,{target:this.el,type:"drop"});this.option.drop&&this.option.drop(f,this._ui(dd_manager_1$1.DDManager.dragElement)),this.triggerEvent("drop",f)}_canDrop(s){return s&&(!this.accept||this.accept(s))}_setupAccept(){return this.option.accept?(typeof this.option.accept=="string"?this.accept=s=>s.matches(this.option.accept):this.accept=this.option.accept,this):this}_ui(s){return Object.assign({draggable:s.el},s.ui())}}ddDroppable.DDDroppable=DDDroppable;Object.defineProperty(ddElement,"__esModule",{value:!0});ddElement.DDElement=void 0;const dd_resizable_1=ddResizable,dd_draggable_1=ddDraggable,dd_droppable_1=ddDroppable;class DDElement{constructor(s){this.el=s}static init(s){return s.ddElement||(s.ddElement=new DDElement(s)),s.ddElement}on(s,f){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(s)>-1?this.ddDraggable.on(s,f):this.ddDroppable&&["drop","dropover","dropout"].indexOf(s)>-1?this.ddDroppable.on(s,f):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(s)>-1&&this.ddResizable.on(s,f),this}off(s){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(s)>-1?this.ddDraggable.off(s):this.ddDroppable&&["drop","dropover","dropout"].indexOf(s)>-1?this.ddDroppable.off(s):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(s)>-1&&this.ddResizable.off(s),this}setupDraggable(s){return this.ddDraggable?this.ddDraggable.updateOption(s):this.ddDraggable=new dd_draggable_1.DDDraggable(this.el,s),this}cleanDraggable(){return this.ddDraggable&&(this.ddDraggable.destroy(),delete this.ddDraggable),this}setupResizable(s){return this.ddResizable?this.ddResizable.updateOption(s):this.ddResizable=new dd_resizable_1.DDResizable(this.el,s),this}cleanResizable(){return this.ddResizable&&(this.ddResizable.destroy(),delete this.ddResizable),this}setupDroppable(s){return this.ddDroppable?this.ddDroppable.updateOption(s):this.ddDroppable=new dd_droppable_1.DDDroppable(this.el,s),this}cleanDroppable(){return this.ddDroppable&&(this.ddDroppable.destroy(),delete this.ddDroppable),this}}ddElement.DDElement=DDElement;Object.defineProperty(ddGridstack,"__esModule",{value:!0});ddGridstack.DDGridStack=void 0;const utils_1=utils$2,dd_manager_1=ddManager,dd_element_1=ddElement;class DDGridStack{resizable(s,f,_,S){return this._getDDElements(s).forEach(T=>{if(f==="disable"||f==="enable")T.ddResizable&&T.ddResizable[f]();else if(f==="destroy")T.ddResizable&&T.cleanResizable();else if(f==="option")T.setupResizable({[_]:S});else{const F=T.el.gridstackNode.grid;let M=T.el.getAttribute("gs-resize-handles")?T.el.getAttribute("gs-resize-handles"):F.opts.resizable.handles,P=!F.opts.alwaysShowResizeHandle;T.setupResizable(Object.assign(Object.assign(Object.assign({},F.opts.resizable),{handles:M,autoHide:P}),{start:f.start,stop:f.stop,resize:f.resize}))}}),this}draggable(s,f,_,S){return this._getDDElements(s).forEach(T=>{if(f==="disable"||f==="enable")T.ddDraggable&&T.ddDraggable[f]();else if(f==="destroy")T.ddDraggable&&T.cleanDraggable();else if(f==="option")T.setupDraggable({[_]:S});else{const F=T.el.gridstackNode.grid;T.setupDraggable(Object.assign(Object.assign({},F.opts.draggable),{start:f.start,stop:f.stop,drag:f.drag}))}}),this}dragIn(s,f){return this._getDDElements(s).forEach(_=>_.setupDraggable(f)),this}droppable(s,f,_,S){return typeof f.accept=="function"&&!f._accept&&(f._accept=f.accept,f.accept=T=>f._accept(T)),this._getDDElements(s).forEach(T=>{f==="disable"||f==="enable"?T.ddDroppable&&T.ddDroppable[f]():f==="destroy"?T.ddDroppable&&T.cleanDroppable():f==="option"?T.setupDroppable({[_]:S}):T.setupDroppable(f)}),this}isDroppable(s){return!!(s&&s.ddElement&&s.ddElement.ddDroppable&&!s.ddElement.ddDroppable.disabled)}isDraggable(s){return!!(s&&s.ddElement&&s.ddElement.ddDraggable&&!s.ddElement.ddDraggable.disabled)}isResizable(s){return!!(s&&s.ddElement&&s.ddElement.ddResizable&&!s.ddElement.ddResizable.disabled)}on(s,f,_){return this._getDDElements(s).forEach(S=>S.on(f,T=>{_(T,dd_manager_1.DDManager.dragElement?dd_manager_1.DDManager.dragElement.el:T.target,dd_manager_1.DDManager.dragElement?dd_manager_1.DDManager.dragElement.helper:null)})),this}off(s,f){return this._getDDElements(s).forEach(_=>_.off(f)),this}_getDDElements(s,f=!0){let _=utils_1.Utils.getElements(s);if(!_.length)return[];let S=_.map(T=>T.ddElement||(f?dd_element_1.DDElement.init(T):null));return f||S.filter(T=>T),S}}ddGridstack.DDGridStack=DDGridStack;(function(d){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(K,oe,se,ae){ae===void 0&&(ae=se),Object.defineProperty(K,ae,{enumerable:!0,get:function(){return oe[se]}})}:function(K,oe,se,ae){ae===void 0&&(ae=se),K[ae]=oe[se]}),f=commonjsGlobal&&commonjsGlobal.__exportStar||function(K,oe){for(var se in K)se!=="default"&&!oe.hasOwnProperty(se)&&s(oe,K,se)};Object.defineProperty(d,"__esModule",{value:!0}),d.GridStack=void 0;/*!
 * GridStack 7.3.0
 * https://gridstackjs.com/
 *
 * Copyright (c) 2021-2022 Alain Dumesny
 * see root license https://github.com/gridstack/gridstack.js/tree/master/LICENSE
 */const _=gridstackEngine,S=utils$2,T=types,F=ddGridstack,M=ddTouch,P=ddManager,H=new F.DDGridStack;f(types,d),f(utils$2,d),f(gridstackEngine,d),f(ddGridstack,d);class J{constructor(oe,se={}){var ae,ge;this._gsEventHandler={},this._extraDragRow=0,this.el=oe,se=se||{},oe.classList.contains("grid-stack")||this.el.classList.add("grid-stack"),se.row&&(se.minRow=se.maxRow=se.row,delete se.row);let he=S.Utils.toNumber(oe.getAttribute("gs-row"));se.column==="auto"&&delete se.column;let Be=se;Be.minWidth!==void 0&&(se.oneColumnSize=se.oneColumnSize||Be.minWidth,delete Be.minWidth),se.alwaysShowResizeHandle!==void 0&&(se._alwaysShowResizeHandle=se.alwaysShowResizeHandle);let pe=Object.assign(Object.assign({},S.Utils.cloneDeep(T.gridDefaults)),{column:S.Utils.toNumber(oe.getAttribute("gs-column"))||T.gridDefaults.column,minRow:he||S.Utils.toNumber(oe.getAttribute("gs-min-row"))||T.gridDefaults.minRow,maxRow:he||S.Utils.toNumber(oe.getAttribute("gs-max-row"))||T.gridDefaults.maxRow,staticGrid:S.Utils.toBool(oe.getAttribute("gs-static"))||T.gridDefaults.staticGrid,draggable:{handle:(se.handleClass?"."+se.handleClass:se.handle?se.handle:"")||T.gridDefaults.draggable.handle},removableOptions:{accept:se.itemClass?"."+se.itemClass:T.gridDefaults.removableOptions.accept}});oe.getAttribute("gs-animate")&&(pe.animate=S.Utils.toBool(oe.getAttribute("gs-animate"))),this.opts=S.Utils.defaults(se,pe),se=null,this._initMargin(),this.opts.column!==1&&!this.opts.disableOneColumnMode&&this._widthOrContainer()<=this.opts.oneColumnSize&&(this._prevColumn=this.getColumn(),this.opts.column=1),this.opts.rtl==="auto"&&(this.opts.rtl=oe.style.direction==="rtl"),this.opts.rtl&&this.el.classList.add("grid-stack-rtl");let be=(ae=S.Utils.closestUpByClass(this.el,T.gridDefaults.itemClass))===null||ae===void 0?void 0:ae.gridstackNode;be&&(be.subGrid=this,this.parentGridItem=be,this.el.classList.add("grid-stack-nested"),be.el.classList.add("grid-stack-sub-grid")),this._isAutoCellHeight=this.opts.cellHeight==="auto",this._isAutoCellHeight||this.opts.cellHeight==="initial"?this.cellHeight(void 0,!1):(typeof this.opts.cellHeight=="number"&&this.opts.cellHeightUnit&&this.opts.cellHeightUnit!==T.gridDefaults.cellHeightUnit&&(this.opts.cellHeight=this.opts.cellHeight+this.opts.cellHeightUnit,delete this.opts.cellHeightUnit),this.cellHeight(this.opts.cellHeight,!1)),this.opts.alwaysShowResizeHandle==="mobile"&&(this.opts.alwaysShowResizeHandle=M.isTouch),this._styleSheetClass="grid-stack-instance-"+_.GridStackEngine._idSeq++,this.el.classList.add(this._styleSheetClass),this._setStaticClass();let Re=this.opts.engineClass||J.engineClass||_.GridStackEngine;if(this.engine=new Re({column:this.getColumn(),float:this.opts.float,maxRow:this.opts.maxRow,onChange:Fe=>{let Me=0;this.engine.nodes.forEach(ve=>{Me=Math.max(Me,ve.y+ve.h)}),Fe.forEach(ve=>{let At=ve.el;At&&(ve._removeDOM?(At&&At.remove(),delete ve._removeDOM):this._writePosAttr(At,ve))}),this._updateStyles(!1,Me)}}),this.opts.auto&&(this.batchUpdate(),this.getGridItems().forEach(Fe=>this._prepareElement(Fe)),this.batchUpdate(!1)),this.opts.children){let Fe=this.opts.children;delete this.opts.children,Fe.length&&this.load(Fe)}this.setAnimation(this.opts.animate),this._updateStyles(),this.opts.column!=12&&this.el.classList.add("grid-stack-"+this.opts.column),this.opts.dragIn&&J.setupDragIn(this.opts.dragIn,this.opts.dragInOptions),delete this.opts.dragIn,delete this.opts.dragInOptions,this.opts.subGridDynamic&&!P.DDManager.pauseDrag&&(P.DDManager.pauseDrag=!0),((ge=this.opts.draggable)===null||ge===void 0?void 0:ge.pause)!==void 0&&(P.DDManager.pauseDrag=this.opts.draggable.pause),this._setupRemoveDrop(),this._setupAcceptWidget(),this._updateWindowResizeEvent()}static init(oe={},se=".grid-stack"){let ae=J.getGridElement(se);return ae?(ae.gridstack||(ae.gridstack=new J(ae,S.Utils.cloneDeep(oe))),ae.gridstack):(console.error(typeof se=="string"?'GridStack.initAll() no grid was found with selector "'+se+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`:"GridStack.init() no grid element was passed."),null)}static initAll(oe={},se=".grid-stack"){let ae=[];return J.getGridElements(se).forEach(ge=>{ge.gridstack||(ge.gridstack=new J(ge,S.Utils.cloneDeep(oe)),delete oe.dragIn,delete oe.dragInOptions),ae.push(ge.gridstack)}),ae.length===0&&console.error('GridStack.initAll() no grid was found with selector "'+se+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`),ae}static addGrid(oe,se={}){if(!oe)return null;let ae=oe;if(!oe.classList.contains("grid-stack")||se.addRemoveCB)if(se.addRemoveCB)ae=se.addRemoveCB(oe,se,!0,!0);else{let Be=document.implementation.createHTMLDocument("");Be.body.innerHTML=`<div class="grid-stack ${se.class||""}"></div>`,ae=Be.body.children[0],oe.appendChild(ae)}return J.init(se,ae)}static registerEngine(oe){J.engineClass=oe}get placeholder(){if(!this._placeholder){let oe=document.createElement("div");oe.className="placeholder-content",this.opts.placeholderText&&(oe.innerHTML=this.opts.placeholderText),this._placeholder=document.createElement("div"),this._placeholder.classList.add(this.opts.placeholderClass,T.gridDefaults.itemClass,this.opts.itemClass),this.placeholder.appendChild(oe)}return this._placeholder}addWidget(oe,se){function ae(pe){return pe.el!==void 0||pe.x!==void 0||pe.y!==void 0||pe.w!==void 0||pe.h!==void 0||pe.content!==void 0}let ge,he;if(typeof oe=="string"){let pe=document.implementation.createHTMLDocument("");pe.body.innerHTML=oe,ge=pe.body.children[0]}else if(arguments.length===0||arguments.length===1&&ae(oe))if(he=se=oe,he!=null&&he.el)ge=he.el;else if(this.opts.addRemoveCB)ge=this.opts.addRemoveCB(this.el,se,!0,!1);else{let pe=(se==null?void 0:se.content)||"",be=document.implementation.createHTMLDocument("");be.body.innerHTML=`<div class="grid-stack-item ${this.opts.itemClass||""}"><div class="grid-stack-item-content">${pe}</div></div>`,ge=be.body.children[0]}else ge=oe;if(!ge)return;let Be=this._readAttr(ge);return se=S.Utils.cloneDeep(se)||{},S.Utils.defaults(se,Be),he=this.engine.prepareNode(se),this._writeAttr(ge,se),this._insertNotAppend?this.el.prepend(ge):this.el.appendChild(ge),this._prepareElement(ge,!0,se),this._updateContainerHeight(),he.subGrid&&this.makeSubGrid(he.el,void 0,void 0,!1),this._prevColumn&&this.opts.column===1&&(this._ignoreLayoutsNodeChange=!0),this._triggerAddEvent(),this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,ge}makeSubGrid(oe,se,ae,ge=!0){var he,Be,pe;let be=oe.gridstackNode;if(be||(be=this.makeWidget(oe).gridstackNode),!((he=be.subGrid)===null||he===void 0)&&he.el)return be.subGrid;let Re,Fe=this;for(;Fe&&!Re;)Re=(Be=Fe.opts)===null||Be===void 0?void 0:Be.subGrid,Fe=(pe=Fe.parentGridItem)===null||pe===void 0?void 0:pe.grid;se=S.Utils.cloneDeep(Object.assign(Object.assign(Object.assign({},Re||{}),{children:void 0}),se||be.subGrid)),be.subGrid=se;let Me;se.column==="auto"&&(Me=!0,se.column=Math.max(be.w||1,(ae==null?void 0:ae.w)||1),se.disableOneColumnMode=!0);let ve=be.el.querySelector(".grid-stack-item-content"),At,Ct;if(ge){if(this._removeDD(be.el),Ct=Object.assign(Object.assign({},be),{x:0,y:0}),S.Utils.removeInternalForSave(Ct),delete Ct.subGrid,be.content&&(Ct.content=be.content,delete be.content),this.opts.addRemoveCB)At=this.opts.addRemoveCB(this.el,Ct,!0,!1);else{let It=document.implementation.createHTMLDocument("");It.body.innerHTML='<div class="grid-stack-item"></div>',At=It.body.children[0],At.appendChild(ve),It.body.innerHTML='<div class="grid-stack-item-content"></div>',ve=It.body.children[0],be.el.appendChild(ve)}this._prepareDragDropByNode(be)}if(ae){let It=Me?se.column:be.w,xt=be.h+ae.h,wt=be.el.style;wt.transition="none",this.update(be.el,{w:It,h:xt}),setTimeout(()=>wt.transition=null)}this.opts.addRemoveCB&&(se.addRemoveCB=se.addRemoveCB||this.opts.addRemoveCB);let Rt=be.subGrid=J.addGrid(ve,se);return ae!=null&&ae._moving&&(Rt._isTemp=!0),Me&&(Rt._autoColumn=!0),ge&&Rt.addWidget(At,Ct),ae&&(ae._moving?window.setTimeout(()=>S.Utils.simulateMouseEvent(ae._event,"mouseenter",Rt.el),0):Rt.addWidget(be.el,be)),Rt}removeAsSubGrid(oe){var se;let ae=(se=this.parentGridItem)===null||se===void 0?void 0:se.grid;ae&&(ae.batchUpdate(),ae.removeWidget(this.parentGridItem.el,!0,!0),this.engine.nodes.forEach(ge=>{ge.x+=this.parentGridItem.x,ge.y+=this.parentGridItem.y,ae.addWidget(ge.el,ge)}),ae.batchUpdate(!1),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,oe&&window.setTimeout(()=>S.Utils.simulateMouseEvent(oe._event,"mouseenter",ae.el),0))}save(oe=!0,se=!1){let ae=this.engine.save(oe);if(ae.forEach(ge=>{var he;if(oe&&ge.el&&!ge.subGrid){let Be=ge.el.querySelector(".grid-stack-item-content");ge.content=Be?Be.innerHTML:void 0,ge.content||delete ge.content}else if(oe||delete ge.content,!((he=ge.subGrid)===null||he===void 0)&&he.el){const Be=ge.subGrid.save(oe,se);ge.subGrid=se?Be:{children:Be}}delete ge.el}),se){let ge=S.Utils.cloneDeep(this.opts);ge.marginBottom===ge.marginTop&&ge.marginRight===ge.marginLeft&&ge.marginTop===ge.marginRight&&(ge.margin=ge.marginTop,delete ge.marginTop,delete ge.marginRight,delete ge.marginBottom,delete ge.marginLeft),ge.rtl===(this.el.style.direction==="rtl")&&(ge.rtl="auto"),this._isAutoCellHeight&&(ge.cellHeight="auto"),this._autoColumn&&(ge.column="auto",delete ge.disableOneColumnMode);const he=ge._alwaysShowResizeHandle;return delete ge._alwaysShowResizeHandle,he!==void 0?ge.alwaysShowResizeHandle=he:delete ge.alwaysShowResizeHandle,S.Utils.removeInternalAndSame(ge,T.gridDefaults),ge.children=ae,ge}return ae}load(oe,se=this.opts.addRemoveCB||!0){let ae=J.Utils.sort([...oe],-1,this._prevColumn||this.getColumn());this._insertNotAppend=!0,this._prevColumn&&this._prevColumn!==this.opts.column&&ae.some(Be=>Be.x+Be.w>this.opts.column)&&(this._ignoreLayoutsNodeChange=!0,this.engine.cacheLayout(ae,this._prevColumn,!0));const ge=this.opts.addRemoveCB;typeof se=="function"&&(this.opts.addRemoveCB=se);let he=[];return this.batchUpdate(),se&&[...this.engine.nodes].forEach(pe=>{ae.find(Re=>pe.id===Re.id)||(this.opts.addRemoveCB&&this.opts.addRemoveCB(this.el,pe,!1,!1),he.push(pe),this.removeWidget(pe.el,!0,!1))}),ae.forEach(Be=>{let pe=Be.id||Be.id===0?this.engine.nodes.find(be=>be.id===Be.id):void 0;if(pe){if(this.update(pe.el,Be),Be.subGrid&&Be.subGrid.children){let be=pe.el.querySelector(".grid-stack");be&&be.gridstack&&(be.gridstack.load(Be.subGrid.children),this._insertNotAppend=!0)}}else se&&this.addWidget(Be)}),this.engine.removedNodes=he,this.batchUpdate(!1),delete this._ignoreLayoutsNodeChange,delete this._insertNotAppend,ge?this.opts.addRemoveCB=ge:delete this.opts.addRemoveCB,this}batchUpdate(oe=!0){return this.engine.batchUpdate(oe),oe||(this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent()),this}getCellHeight(oe=!1){if(this.opts.cellHeight&&this.opts.cellHeight!=="auto"&&(!oe||!this.opts.cellHeightUnit||this.opts.cellHeightUnit==="px"))return this.opts.cellHeight;let se=this.el.querySelector("."+this.opts.itemClass);if(se){let ge=S.Utils.toNumber(se.getAttribute("gs-h"));return Math.round(se.offsetHeight/ge)}let ae=parseInt(this.el.getAttribute("gs-current-row"));return ae?Math.round(this.el.getBoundingClientRect().height/ae):this.opts.cellHeight}cellHeight(oe,se=!0){if(se&&oe!==void 0&&this._isAutoCellHeight!==(oe==="auto")&&(this._isAutoCellHeight=oe==="auto",this._updateWindowResizeEvent()),(oe==="initial"||oe==="auto")&&(oe=void 0),oe===void 0){let ge=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;oe=this.cellWidth()+ge}let ae=S.Utils.parseHeight(oe);return this.opts.cellHeightUnit===ae.unit&&this.opts.cellHeight===ae.h?this:(this.opts.cellHeightUnit=ae.unit,this.opts.cellHeight=ae.h,se&&this._updateStyles(!0),this)}cellWidth(){return this._widthOrContainer()/this.getColumn()}_widthOrContainer(){return this.el.clientWidth||this.el.parentElement.clientWidth||window.innerWidth}compact(){return this.engine.compact(),this._triggerChangeEvent(),this}column(oe,se="moveScale"){if(oe<1||this.opts.column===oe)return this;let ae=this.getColumn();oe===1?this._prevColumn=ae:delete this._prevColumn,this.el.classList.remove("grid-stack-"+ae),this.el.classList.add("grid-stack-"+oe),this.opts.column=this.engine.column=oe;let ge;return oe===1&&this.opts.oneColumnModeDomSort&&(ge=[],this.getGridItems().forEach(he=>{he.gridstackNode&&ge.push(he.gridstackNode)}),ge.length||(ge=void 0)),this.engine.updateNodeWidths(ae,oe,ge,se),this._isAutoCellHeight&&this.cellHeight(),this._ignoreLayoutsNodeChange=!0,this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,this}getColumn(){return this.opts.column}getGridItems(){return Array.from(this.el.children).filter(oe=>oe.matches("."+this.opts.itemClass)&&!oe.matches("."+this.opts.placeholderClass))}destroy(oe=!0){if(this.el)return this._updateWindowResizeEvent(!0),this.setStatic(!0,!1),this.setAnimation(!1),oe?this.el.parentNode.removeChild(this.el):(this.removeAll(oe),this.el.classList.remove(this._styleSheetClass)),this._removeStylesheet(),this.el.removeAttribute("gs-current-row"),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,delete this.opts,delete this._placeholder,delete this.engine,delete this.el.gridstack,delete this.el,this}float(oe){return this.opts.float!==oe&&(this.opts.float=this.engine.float=oe,this._triggerChangeEvent()),this}getFloat(){return this.engine.float}getCellFromPixel(oe,se=!1){let ae=this.el.getBoundingClientRect(),ge;se?ge={top:ae.top+document.documentElement.scrollTop,left:ae.left}:ge={top:this.el.offsetTop,left:this.el.offsetLeft};let he=oe.left-ge.left,Be=oe.top-ge.top,pe=ae.width/this.getColumn(),be=ae.height/parseInt(this.el.getAttribute("gs-current-row"));return{x:Math.floor(he/pe),y:Math.floor(Be/be)}}getRow(){return Math.max(this.engine.getRow(),this.opts.minRow)}isAreaEmpty(oe,se,ae,ge){return this.engine.isAreaEmpty(oe,se,ae,ge)}makeWidget(oe){let se=J.getElement(oe);return this._prepareElement(se,!0),this._updateContainerHeight(),this._triggerAddEvent(),this._triggerChangeEvent(),se}on(oe,se){return oe.indexOf(" ")!==-1?(oe.split(" ").forEach(ge=>this.on(ge,se)),this):(oe==="change"||oe==="added"||oe==="removed"||oe==="enable"||oe==="disable"?(oe==="enable"||oe==="disable"?this._gsEventHandler[oe]=ge=>se(ge):this._gsEventHandler[oe]=ge=>se(ge,ge.detail),this.el.addEventListener(oe,this._gsEventHandler[oe])):oe==="drag"||oe==="dragstart"||oe==="dragstop"||oe==="resizestart"||oe==="resize"||oe==="resizestop"||oe==="dropped"?this._gsEventHandler[oe]=se:console.log("GridStack.on("+oe+') event not supported, but you can still use $(".grid-stack").on(...) while jquery-ui is still used internally.'),this)}off(oe){return oe.indexOf(" ")!==-1?(oe.split(" ").forEach(ae=>this.off(ae)),this):((oe==="change"||oe==="added"||oe==="removed"||oe==="enable"||oe==="disable")&&this._gsEventHandler[oe]&&this.el.removeEventListener(oe,this._gsEventHandler[oe]),delete this._gsEventHandler[oe],this)}removeWidget(oe,se=!0,ae=!0){return J.getElements(oe).forEach(ge=>{if(ge.parentElement&&ge.parentElement!==this.el)return;let he=ge.gridstackNode;he||(he=this.engine.nodes.find(Be=>ge===Be.el)),he&&(delete ge.gridstackNode,this._removeDD(ge),this.engine.removeNode(he,se,ae),se&&ge.parentElement&&ge.remove())}),ae&&(this._triggerRemoveEvent(),this._triggerChangeEvent()),this}removeAll(oe=!0){return this.engine.nodes.forEach(se=>{delete se.el.gridstackNode,this._removeDD(se.el)}),this.engine.removeAll(oe),this._triggerRemoveEvent(),this}setAnimation(oe){return oe?this.el.classList.add("grid-stack-animate"):this.el.classList.remove("grid-stack-animate"),this}setStatic(oe,se=!0,ae=!0){return this.opts.staticGrid===oe?this:(this.opts.staticGrid=oe,this._setupRemoveDrop(),this._setupAcceptWidget(),this.engine.nodes.forEach(ge=>{this._prepareDragDropByNode(ge),ge.subGrid&&ae&&ge.subGrid.setStatic(oe,se,ae)}),se&&this._setStaticClass(),this)}update(oe,se){if(arguments.length>2){console.warn("gridstack.ts: `update(el, x, y, w, h)` is deprecated. Use `update(el, {x, w, content, ...})`. It will be removed soon");let ae=arguments,ge=1;return se={x:ae[ge++],y:ae[ge++],w:ae[ge++],h:ae[ge++]},this.update(oe,se)}return J.getElements(oe).forEach(ae=>{if(!ae||!ae.gridstackNode)return;let ge=ae.gridstackNode,he=S.Utils.cloneDeep(se);delete he.autoPosition;let Be=["x","y","w","h"],pe;if(Be.some(Fe=>he[Fe]!==void 0&&he[Fe]!==ge[Fe])&&(pe={},Be.forEach(Fe=>{pe[Fe]=he[Fe]!==void 0?he[Fe]:ge[Fe],delete he[Fe]})),!pe&&(he.minW||he.minH||he.maxW||he.maxH)&&(pe={}),he.content){let Fe=ae.querySelector(".grid-stack-item-content");Fe&&Fe.innerHTML!==he.content&&(Fe.innerHTML=he.content),delete he.content}let be=!1,Re=!1;for(const Fe in he)Fe[0]!=="_"&&ge[Fe]!==he[Fe]&&(ge[Fe]=he[Fe],be=!0,Re=Re||!this.opts.staticGrid&&(Fe==="noResize"||Fe==="noMove"||Fe==="locked"));pe&&(this.engine.cleanNodes().beginUpdate(ge).moveNode(ge,pe),this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate()),be&&this._writeAttr(ae,ge),Re&&this._prepareDragDropByNode(ge)}),this}margin(oe){if(!(typeof oe=="string"&&oe.split(" ").length>1)){let ae=S.Utils.parseHeight(oe);if(this.opts.marginUnit===ae.unit&&this.opts.margin===ae.h)return}return this.opts.margin=oe,this.opts.marginTop=this.opts.marginBottom=this.opts.marginLeft=this.opts.marginRight=void 0,this._initMargin(),this._updateStyles(!0),this}getMargin(){return this.opts.margin}willItFit(oe){if(arguments.length>1){console.warn("gridstack.ts: `willItFit(x,y,w,h,autoPosition)` is deprecated. Use `willItFit({x, y,...})`. It will be removed soon");let se=arguments,ae=0,ge={x:se[ae++],y:se[ae++],w:se[ae++],h:se[ae++],autoPosition:se[ae++]};return this.willItFit(ge)}return this.engine.willItFit(oe)}_triggerChangeEvent(){if(this.engine.batchMode)return this;let oe=this.engine.getDirtyNodes(!0);return oe&&oe.length&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(oe),this._triggerEvent("change",oe)),this.engine.saveInitial(),this}_triggerAddEvent(){return this.engine.batchMode?this:(this.engine.addedNodes&&this.engine.addedNodes.length>0&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(this.engine.addedNodes),this.engine.addedNodes.forEach(oe=>{delete oe._dirty}),this._triggerEvent("added",this.engine.addedNodes),this.engine.addedNodes=[]),this)}_triggerRemoveEvent(){return this.engine.batchMode?this:(this.engine.removedNodes&&this.engine.removedNodes.length>0&&(this._triggerEvent("removed",this.engine.removedNodes),this.engine.removedNodes=[]),this)}_triggerEvent(oe,se){let ae=se?new CustomEvent(oe,{bubbles:!1,detail:se}):new Event(oe);return this.el.dispatchEvent(ae),this}_removeStylesheet(){return this._styles&&(S.Utils.removeStylesheet(this._styleSheetClass),delete this._styles),this}_updateStyles(oe=!1,se){if(oe&&this._removeStylesheet(),se||(se=this.getRow()),this._updateContainerHeight(),this.opts.cellHeight===0)return this;let ae=this.opts.cellHeight,ge=this.opts.cellHeightUnit,he=`.${this._styleSheetClass} > .${this.opts.itemClass}`;if(!this._styles){let Be=this.opts.styleInHead?void 0:this.el.parentNode;if(this._styles=S.Utils.createStylesheet(this._styleSheetClass,Be,{nonce:this.opts.nonce}),!this._styles)return this;this._styles._max=0,S.Utils.addCSSRule(this._styles,he,`min-height: ${ae}${ge}`);let pe=this.opts.marginTop+this.opts.marginUnit,be=this.opts.marginBottom+this.opts.marginUnit,Re=this.opts.marginRight+this.opts.marginUnit,Fe=this.opts.marginLeft+this.opts.marginUnit,Me=`${he} > .grid-stack-item-content`,ve=`.${this._styleSheetClass} > .grid-stack-placeholder > .placeholder-content`;S.Utils.addCSSRule(this._styles,Me,`top: ${pe}; right: ${Re}; bottom: ${be}; left: ${Fe};`),S.Utils.addCSSRule(this._styles,ve,`top: ${pe}; right: ${Re}; bottom: ${be}; left: ${Fe};`),S.Utils.addCSSRule(this._styles,`${he} > .ui-resizable-ne`,`right: ${Re}`),S.Utils.addCSSRule(this._styles,`${he} > .ui-resizable-e`,`right: ${Re}`),S.Utils.addCSSRule(this._styles,`${he} > .ui-resizable-se`,`right: ${Re}; bottom: ${be}`),S.Utils.addCSSRule(this._styles,`${he} > .ui-resizable-nw`,`left: ${Fe}`),S.Utils.addCSSRule(this._styles,`${he} > .ui-resizable-w`,`left: ${Fe}`),S.Utils.addCSSRule(this._styles,`${he} > .ui-resizable-sw`,`left: ${Fe}; bottom: ${be}`)}if(se=se||this._styles._max,se>this._styles._max){let Be=pe=>ae*pe+ge;for(let pe=this._styles._max+1;pe<=se;pe++){let be=Be(pe);S.Utils.addCSSRule(this._styles,`${he}[gs-y="${pe-1}"]`,`top: ${Be(pe-1)}`),S.Utils.addCSSRule(this._styles,`${he}[gs-h="${pe}"]`,`height: ${be}`),S.Utils.addCSSRule(this._styles,`${he}[gs-min-h="${pe}"]`,`min-height: ${be}`),S.Utils.addCSSRule(this._styles,`${he}[gs-max-h="${pe}"]`,`max-height: ${be}`)}this._styles._max=se}return this}_updateContainerHeight(){if(!this.engine||this.engine.batchMode)return this;let oe=this.getRow()+this._extraDragRow;if(this.el.setAttribute("gs-current-row",String(oe)),oe===0)return this.el.style.removeProperty("min-height"),this;let se=this.opts.cellHeight,ae=this.opts.cellHeightUnit;return se?(this.el.style.minHeight=oe*se+ae,this):this}_prepareElement(oe,se=!1,ae){oe.classList.add(this.opts.itemClass),ae=ae||this._readAttr(oe),oe.gridstackNode=ae,ae.el=oe,ae.grid=this;let ge=Object.assign({},ae);return ae=this.engine.addNode(ae,se),S.Utils.same(ae,ge)||this._writeAttr(oe,ae),this._prepareDragDropByNode(ae),this}_writePosAttr(oe,se){return se.x!==void 0&&se.x!==null&&oe.setAttribute("gs-x",String(se.x)),se.y!==void 0&&se.y!==null&&oe.setAttribute("gs-y",String(se.y)),se.w&&oe.setAttribute("gs-w",String(se.w)),se.h&&oe.setAttribute("gs-h",String(se.h)),this}_writeAttr(oe,se){if(!se)return this;this._writePosAttr(oe,se);let ae={autoPosition:"gs-auto-position",minW:"gs-min-w",minH:"gs-min-h",maxW:"gs-max-w",maxH:"gs-max-h",noResize:"gs-no-resize",noMove:"gs-no-move",locked:"gs-locked",id:"gs-id"};for(const ge in ae)se[ge]?oe.setAttribute(ae[ge],String(se[ge])):oe.removeAttribute(ae[ge]);return this}_readAttr(oe){let se={};se.x=S.Utils.toNumber(oe.getAttribute("gs-x")),se.y=S.Utils.toNumber(oe.getAttribute("gs-y")),se.w=S.Utils.toNumber(oe.getAttribute("gs-w")),se.h=S.Utils.toNumber(oe.getAttribute("gs-h")),se.maxW=S.Utils.toNumber(oe.getAttribute("gs-max-w")),se.minW=S.Utils.toNumber(oe.getAttribute("gs-min-w")),se.maxH=S.Utils.toNumber(oe.getAttribute("gs-max-h")),se.minH=S.Utils.toNumber(oe.getAttribute("gs-min-h")),se.autoPosition=S.Utils.toBool(oe.getAttribute("gs-auto-position")),se.noResize=S.Utils.toBool(oe.getAttribute("gs-no-resize")),se.noMove=S.Utils.toBool(oe.getAttribute("gs-no-move")),se.locked=S.Utils.toBool(oe.getAttribute("gs-locked")),se.id=oe.getAttribute("gs-id");for(const ae in se){if(!se.hasOwnProperty(ae))return;!se[ae]&&se[ae]!==0&&delete se[ae]}return se}_setStaticClass(){let oe=["grid-stack-static"];return this.opts.staticGrid?(this.el.classList.add(...oe),this.el.setAttribute("gs-static","true")):(this.el.classList.remove(...oe),this.el.removeAttribute("gs-static")),this}onParentResize(){if(!this.el||!this.el.clientWidth)return;let oe=!1;if(this._autoColumn&&this.parentGridItem)this.opts.column!==this.parentGridItem.w&&(oe=!0,this.column(this.parentGridItem.w,"none"));else{let se=!this.opts.disableOneColumnMode&&this.el.clientWidth<=this.opts.oneColumnSize;this.opts.column===1!==se&&(oe=!0,this.opts.animate&&this.setAnimation(!1),this.column(se?1:this._prevColumn),this.opts.animate&&this.setAnimation(!0))}return this._isAutoCellHeight&&(!oe&&this.opts.cellHeightThrottle?(this._cellHeightThrottle||(this._cellHeightThrottle=S.Utils.throttle(()=>this.cellHeight(),this.opts.cellHeightThrottle)),this._cellHeightThrottle()):this.cellHeight()),this.engine.nodes.forEach(se=>{se.subGrid&&se.subGrid.onParentResize()}),this}_updateWindowResizeEvent(oe=!1){const se=(this._isAutoCellHeight||!this.opts.disableOneColumnMode)&&!this.parentGridItem;return!oe&&se&&!this._windowResizeBind?(this._windowResizeBind=this.onParentResize.bind(this),window.addEventListener("resize",this._windowResizeBind)):(oe||!se)&&this._windowResizeBind&&(window.removeEventListener("resize",this._windowResizeBind),delete this._windowResizeBind),this}static getElement(oe=".grid-stack-item"){return S.Utils.getElement(oe)}static getElements(oe=".grid-stack-item"){return S.Utils.getElements(oe)}static getGridElement(oe){return J.getElement(oe)}static getGridElements(oe){return S.Utils.getElements(oe)}_initMargin(){let oe,se=0,ae=[];return typeof this.opts.margin=="string"&&(ae=this.opts.margin.split(" ")),ae.length===2?(this.opts.marginTop=this.opts.marginBottom=ae[0],this.opts.marginLeft=this.opts.marginRight=ae[1]):ae.length===4?(this.opts.marginTop=ae[0],this.opts.marginRight=ae[1],this.opts.marginBottom=ae[2],this.opts.marginLeft=ae[3]):(oe=S.Utils.parseHeight(this.opts.margin),this.opts.marginUnit=oe.unit,se=this.opts.margin=oe.h),this.opts.marginTop===void 0?this.opts.marginTop=se:(oe=S.Utils.parseHeight(this.opts.marginTop),this.opts.marginTop=oe.h,delete this.opts.margin),this.opts.marginBottom===void 0?this.opts.marginBottom=se:(oe=S.Utils.parseHeight(this.opts.marginBottom),this.opts.marginBottom=oe.h,delete this.opts.margin),this.opts.marginRight===void 0?this.opts.marginRight=se:(oe=S.Utils.parseHeight(this.opts.marginRight),this.opts.marginRight=oe.h,delete this.opts.margin),this.opts.marginLeft===void 0?this.opts.marginLeft=se:(oe=S.Utils.parseHeight(this.opts.marginLeft),this.opts.marginLeft=oe.h,delete this.opts.margin),this.opts.marginUnit=oe.unit,this.opts.marginTop===this.opts.marginBottom&&this.opts.marginLeft===this.opts.marginRight&&this.opts.marginTop===this.opts.marginRight&&(this.opts.margin=this.opts.marginTop),this}static getDD(){return H}static setupDragIn(oe,se){(se==null?void 0:se.pause)!==void 0&&(P.DDManager.pauseDrag=se.pause),typeof oe=="string"&&(se=Object.assign(Object.assign({},T.dragInDefaultOptions),se||{}),S.Utils.getElements(oe).forEach(ae=>{H.isDraggable(ae)||H.dragIn(ae,se)}))}movable(oe,se){return this.opts.staticGrid?this:(J.getElements(oe).forEach(ae=>{let ge=ae.gridstackNode;ge&&(se?delete ge.noMove:ge.noMove=!0,this._prepareDragDropByNode(ge))}),this)}resizable(oe,se){return this.opts.staticGrid?this:(J.getElements(oe).forEach(ae=>{let ge=ae.gridstackNode;ge&&(se?delete ge.noResize:ge.noResize=!0,this._prepareDragDropByNode(ge))}),this)}disable(oe=!0){if(!this.opts.staticGrid)return this.enableMove(!1,oe),this.enableResize(!1,oe),this._triggerEvent("disable"),this}enable(oe=!0){if(!this.opts.staticGrid)return this.enableMove(!0,oe),this.enableResize(!0,oe),this._triggerEvent("enable"),this}enableMove(oe,se=!0){return this.opts.staticGrid?this:(this.opts.disableDrag=!oe,this.engine.nodes.forEach(ae=>{this.movable(ae.el,oe),ae.subGrid&&se&&ae.subGrid.enableMove(oe,se)}),this)}enableResize(oe,se=!0){return this.opts.staticGrid?this:(this.opts.disableResize=!oe,this.engine.nodes.forEach(ae=>{this.resizable(ae.el,oe),ae.subGrid&&se&&ae.subGrid.enableResize(oe,se)}),this)}_removeDD(oe){return H.draggable(oe,"destroy").resizable(oe,"destroy"),oe.gridstackNode&&delete oe.gridstackNode._initDD,delete oe.ddElement,this}_setupAcceptWidget(){if(this.opts.staticGrid||!this.opts.acceptWidgets&&!this.opts.removable)return H.droppable(this.el,"destroy"),this;let oe,se,ae=(ge,he,Be)=>{let pe=he.gridstackNode;if(!pe)return;Be=Be||he;let be=this.el.getBoundingClientRect(),{top:Re,left:Fe}=Be.getBoundingClientRect();Fe-=be.left,Re-=be.top;let Me={position:{top:Re,left:Fe}};if(pe._temporaryRemoved){if(pe.x=Math.max(0,Math.round(Fe/se)),pe.y=Math.max(0,Math.round(Re/oe)),delete pe.autoPosition,this.engine.nodeBoundFix(pe),!this.engine.willItFit(pe)){if(pe.autoPosition=!0,!this.engine.willItFit(pe)){H.off(he,"drag");return}pe._willFitPos&&(S.Utils.copyPos(pe,pe._willFitPos),delete pe._willFitPos)}this._onStartMoving(Be,ge,Me,pe,se,oe)}else this._dragOrResize(Be,ge,Me,pe,se,oe)};return H.droppable(this.el,{accept:ge=>{let he=ge.gridstackNode;if((he==null?void 0:he.grid)===this)return!0;if(!this.opts.acceptWidgets)return!1;let Be=!0;if(typeof this.opts.acceptWidgets=="function")Be=this.opts.acceptWidgets(ge);else{let pe=this.opts.acceptWidgets===!0?".grid-stack-item":this.opts.acceptWidgets;Be=ge.matches(pe)}if(Be&&he&&this.opts.maxRow){let pe={w:he.w,h:he.h,minW:he.minW,minH:he.minH};Be=this.engine.willItFit(pe)}return Be}}).on(this.el,"dropover",(ge,he,Be)=>{let pe=he.gridstackNode;if((pe==null?void 0:pe.grid)===this&&!pe._temporaryRemoved)return!1;pe!=null&&pe.grid&&pe.grid!==this&&!pe._temporaryRemoved&&pe.grid._leave(he,Be),se=this.cellWidth(),oe=this.getCellHeight(!0),pe||(pe=this._readAttr(he)),pe.grid||(pe._isExternal=!0,he.gridstackNode=pe),Be=Be||he;let be=pe.w||Math.round(Be.offsetWidth/se)||1,Re=pe.h||Math.round(Be.offsetHeight/oe)||1;return pe.grid&&pe.grid!==this?(he._gridstackNodeOrig||(he._gridstackNodeOrig=pe),he.gridstackNode=pe=Object.assign(Object.assign({},pe),{w:be,h:Re,grid:this}),this.engine.cleanupNode(pe).nodeBoundFix(pe),pe._initDD=pe._isExternal=pe._temporaryRemoved=!0):(pe.w=be,pe.h=Re,pe._temporaryRemoved=!0),this._itemRemoving(pe.el,!1),H.on(he,"drag",ae),ae(ge,he,Be),!1}).on(this.el,"dropout",(ge,he,Be)=>{let pe=he.gridstackNode;return pe&&(!pe.grid||pe.grid===this)&&(this._leave(he,Be),this._isTemp&&this.removeAsSubGrid(pe)),!1}).on(this.el,"drop",(ge,he,Be)=>{var pe,be;let Re=he.gridstackNode;if((Re==null?void 0:Re.grid)===this&&!Re._isExternal)return!1;let Fe=!!this.placeholder.parentElement;this.placeholder.remove();let Me=he._gridstackNodeOrig;if(delete he._gridstackNodeOrig,Fe&&(Me!=null&&Me.grid)&&Me.grid!==this){let At=Me.grid;At.engine.removedNodes.push(Me),At._triggerRemoveEvent()._triggerChangeEvent(),At.parentGridItem&&!At.engine.nodes.length&&At.opts.subGridDynamic&&At.removeAsSubGrid()}if(!Re||(Fe&&(this.engine.cleanupNode(Re),Re.grid=this),H.off(he,"drag"),Be!==he?(Be.remove(),he.gridstackNode=Me,Fe&&(he=he.cloneNode(!0))):(he.remove(),this._removeDD(he)),!Fe))return!1;he.gridstackNode=Re,Re.el=he;let ve=(be=(pe=Re.subGrid)===null||pe===void 0?void 0:pe.el)===null||be===void 0?void 0:be.gridstack;return S.Utils.copyPos(Re,this._readAttr(this.placeholder)),S.Utils.removePositioningStyles(he),this._writeAttr(he,Re),he.classList.add(T.gridDefaults.itemClass,this.opts.itemClass),this.el.appendChild(he),ve&&(ve.parentGridItem=Re,ve.opts.styleInHead||ve._updateStyles(!0)),this._updateContainerHeight(),this.engine.addedNodes.push(Re),this._triggerAddEvent(),this._triggerChangeEvent(),this.engine.endUpdate(),this._gsEventHandler.dropped&&this._gsEventHandler.dropped(Object.assign(Object.assign({},ge),{type:"dropped"}),Me&&Me.grid?Me:void 0,Re),window.setTimeout(()=>{Re.el&&Re.el.parentElement?this._prepareDragDropByNode(Re):this.engine.removeNode(Re),delete Re.grid._isTemp}),!1}),this}_itemRemoving(oe,se){let ae=oe?oe.gridstackNode:void 0;!ae||!ae.grid||(se?ae._isAboutToRemove=!0:delete ae._isAboutToRemove,se?oe.classList.add("grid-stack-item-removing"):oe.classList.remove("grid-stack-item-removing"))}_setupRemoveDrop(){if(!this.opts.staticGrid&&typeof this.opts.removable=="string"){let oe=document.querySelector(this.opts.removable);if(!oe)return this;H.isDroppable(oe)||H.droppable(oe,this.opts.removableOptions).on(oe,"dropover",(se,ae)=>this._itemRemoving(ae,!0)).on(oe,"dropout",(se,ae)=>this._itemRemoving(ae,!1))}return this}_prepareDragDropByNode(oe){let se=oe.el;const ae=oe.noMove||this.opts.disableDrag,ge=oe.noResize||this.opts.disableResize;if(this.opts.staticGrid||ae&&ge)return oe._initDD&&(this._removeDD(se),delete oe._initDD),se.classList.add("ui-draggable-disabled","ui-resizable-disabled"),this;if(!oe._initDD){let he,Be,pe=(Fe,Me)=>{this._gsEventHandler[Fe.type]&&this._gsEventHandler[Fe.type](Fe,Fe.target),he=this.cellWidth(),Be=this.getCellHeight(!0),this._onStartMoving(se,Fe,Me,oe,he,Be)},be=(Fe,Me)=>{this._dragOrResize(se,Fe,Me,oe,he,Be)},Re=Fe=>{this.placeholder.remove(),delete oe._moving,delete oe._event,delete oe._lastTried;let Me=Fe.target;if(!(!Me.gridstackNode||Me.gridstackNode.grid!==this)){if(oe.el=Me,oe._isAboutToRemove){let ve=se.gridstackNode.grid;ve._gsEventHandler[Fe.type]&&ve._gsEventHandler[Fe.type](Fe,Me),this._removeDD(se),ve.engine.removedNodes.push(oe),ve._triggerRemoveEvent(),delete se.gridstackNode,delete oe.el,se.remove()}else S.Utils.removePositioningStyles(Me),oe._temporaryRemoved?(S.Utils.copyPos(oe,oe._orig),this._writePosAttr(Me,oe),this.engine.addNode(oe)):this._writePosAttr(Me,oe),this._gsEventHandler[Fe.type]&&this._gsEventHandler[Fe.type](Fe,Me);this._extraDragRow=0,this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate()}};H.draggable(se,{start:pe,stop:Re,drag:be}).resizable(se,{start:pe,stop:Re,resize:be}),oe._initDD=!0}return H.draggable(se,ae?"disable":"enable").resizable(se,ge?"disable":"enable"),this}_onStartMoving(oe,se,ae,ge,he,Be){this.engine.cleanNodes().beginUpdate(ge),this._writePosAttr(this.placeholder,ge),this.el.appendChild(this.placeholder),ge.el=this.placeholder,ge._lastUiPosition=ae.position,ge._prevYPix=ae.position.top,ge._moving=se.type==="dragstart",delete ge._lastTried,se.type==="dropover"&&ge._temporaryRemoved&&(this.engine.addNode(ge),ge._moving=!0),this.engine.cacheRects(he,Be,this.opts.marginTop,this.opts.marginRight,this.opts.marginBottom,this.opts.marginLeft),se.type==="resizestart"&&(H.resizable(oe,"option","minWidth",he*(ge.minW||1)).resizable(oe,"option","minHeight",Be*(ge.minH||1)),ge.maxW&&H.resizable(oe,"option","maxWidth",he*ge.maxW),ge.maxH&&H.resizable(oe,"option","maxHeight",Be*ge.maxH))}_dragOrResize(oe,se,ae,ge,he,Be){let pe=Object.assign({},ge._orig),be,Re=this.opts.marginLeft,Fe=this.opts.marginRight,Me=this.opts.marginTop,ve=this.opts.marginBottom,At=Math.round(Be*.1),Ct=Math.round(he*.1);if(Re=Math.min(Re,Ct),Fe=Math.min(Fe,Ct),Me=Math.min(Me,At),ve=Math.min(ve,At),se.type==="drag"){if(ge._temporaryRemoved)return;let It=ae.position.top-ge._prevYPix;ge._prevYPix=ae.position.top,this.opts.draggable.scroll!==!1&&S.Utils.updateScrollPosition(oe,ae.position,It);let xt=ae.position.left+(ae.position.left>ge._lastUiPosition.left?-Fe:Re),wt=ae.position.top+(ae.position.top>ge._lastUiPosition.top?-ve:Me);pe.x=Math.round(xt/he),pe.y=Math.round(wt/Be);let Ft=this._extraDragRow;if(this.engine.collide(ge,pe)){let jt=this.getRow(),ta=Math.max(0,pe.y+ge.h-jt);this.opts.maxRow&&jt+ta>this.opts.maxRow&&(ta=Math.max(0,this.opts.maxRow-jt)),this._extraDragRow=ta}else this._extraDragRow=0;if(this._extraDragRow!==Ft&&this._updateContainerHeight(),ge.x===pe.x&&ge.y===pe.y)return}else if(se.type==="resize"){if(pe.x<0||(S.Utils.updateScrollResize(se,oe,Be),pe.w=Math.round((ae.size.width-Re)/he),pe.h=Math.round((ae.size.height-Me)/Be),ge.w===pe.w&&ge.h===pe.h)||ge._lastTried&&ge._lastTried.w===pe.w&&ge._lastTried.h===pe.h)return;let It=ae.position.left+Re,xt=ae.position.top+Me;pe.x=Math.round(It/he),pe.y=Math.round(xt/Be),be=!0}ge._event=se,ge._lastTried=pe;let Rt={x:ae.position.left+Re,y:ae.position.top+Me,w:(ae.size?ae.size.width:ge.w*he)-Re-Fe,h:(ae.size?ae.size.height:ge.h*Be)-Me-ve};if(this.engine.moveNodeCheck(ge,Object.assign(Object.assign({},pe),{cellWidth:he,cellHeight:Be,rect:Rt,resizing:be}))){ge._lastUiPosition=ae.position,this.engine.cacheRects(he,Be,Me,Fe,ve,Re),delete ge._skipDown,be&&ge.subGrid&&ge.subGrid.onParentResize(),this._extraDragRow=0,this._updateContainerHeight();let It=se.target;this._writePosAttr(It,ge),this._gsEventHandler[se.type]&&this._gsEventHandler[se.type](se,It)}}_leave(oe,se){let ae=oe.gridstackNode;ae&&(H.off(oe,"drag"),!ae._temporaryRemoved&&(ae._temporaryRemoved=!0,this.engine.removeNode(ae),ae.el=ae._isExternal&&se?se:oe,this.opts.removable===!0&&this._itemRemoving(oe,!0),oe._gridstackNodeOrig?(oe.gridstackNode=oe._gridstackNodeOrig,delete oe._gridstackNodeOrig):ae._isExternal&&(delete ae.el,delete oe.gridstackNode,this.engine.restoreInitial())))}commit(){return S.obsolete(this,this.batchUpdate(!1),"commit","batchUpdate","5.2"),this}}d.GridStack=J,J.Utils=S.Utils,J.Engine=_.GridStackEngine,J.GDRev="7.3.0"})(gridstack);function clearPosition(d){d.style.position="",d.style.left="",d.style.right="",d.style.top="",d.style.bottom="",d.style.width="",d.style.height=""}class GridStackManager{constructor(s){Bt(this,"cellHeight",150);Bt(this,"cellApproxWidth",300);Bt(this,"grids");Bt(this,"dragHandle",".ciview-chart-title");Bt(this,"chartManager");this.grids=new Map,this.chartManager=s}getGrid(s){if(!this.grids.has(s)){const f=s.contentDiv;f.classList.add("grid-stack");const _=f.getBoundingClientRect(),S=Math.round(_.width/this.cellApproxWidth);console.log(S);const T=Math.round(_.height/this.cellHeight);this.cellHeight=_.height/T,console.log("gridstack cellHeight",this.cellHeight);const F=gridstack.GridStack.init({cellHeight:this.cellHeight,handle:this.dragHandle,float:!0,oneColumnSize:400},f);F.on("resizestop",(P,H)=>{H instanceof HTMLElement&&(H.style.filter="")}),F.on("resizestart",(P,H)=>{H instanceof HTMLElement&&(H.style.filter="blur(1px) opacity(0.5)")});const M=this.chartManager.addMenuIcon(s.name,"fas fa-compress-arrows-alt","compact layout",()=>F.compact());this.grids.set(s,{grid:F,charts:new Set,icon:M})}return this.grids.get(s)}destroy(s){if(!this.grids.has(s)){console.error(`destroying non-existent gridstack - ${s.name}`);return}const f=this.grids.get(s),_=s.contentDiv,S=new Map;for(const T of f.charts){const F=T.getDiv();S.set(F,[F.offsetWidth,F.offsetHeight,F.offsetLeft,F.offsetTop]),T.removeLayout(),T.config.gssize=void 0,T.config.gsposition=void 0}f.grid.destroy(!1);for(const T of f.charts){const F=T.getDiv(),M=S.get(F);F.style.position="absolute",F.style.width=`${M[0]-5}px`,F.style.height=`${M[1]-5}px`,F.style.left=`${M[2]}px`,F.style.top=`${M[3]}px`,T.config.size=[M[0]-5,M[1]-5],T.config.position=[M[2],M[3]],F.classList.remove("grid-stack-item")}_.classList.remove("grid-stack"),f.icon.remove(),this.grids.delete(s)}getCellDimensions(s){return[this.getGrid(s).grid.cellWidth(),this.cellHeight]}manageChart(s,f,_){const S=this.getGrid(f),T=S.grid;S.charts.add(s);const F=s.getDiv(),M=F.getBoundingClientRect();let P=Math.round(M.width/T.cellWidth()),H=Math.round(M.height/this.cellHeight),J=Math.round(F.offsetLeft/T.cellWidth());J=J>11?11:J;let K=Math.floor(F.offsetTop/this.cellHeight);s.config.gsposition&&([J,K]=s.config.gsposition,[P,H]=s.config.gssize,_=!1),clearPosition(F),F.style.transition="filter 0.5s ease";const oe=new ResizeObserver(debounce$1(()=>{try{s.setSize()}catch{}},20));oe.observe(F),T.makeWidget(F),_?T.update(F,{w:P,h:H}):(console.log("gridstack:",s.config.type,{w:P,h:H,x:J,y:K}),T.update(F,{w:P,h:H,x:J,y:K}));const se=pe(),ae=he(),ge=Be();function he(){let Re=!1;const Fe=s.addMenuIcon("fas fa-unlock","lock position"),Me=Fe.children[0];return Fe.addEventListener("click",()=>{Re=!Re,Me.classList.toggle("fa-lock",Re),Me.classList.toggle("fa-unlock",!Re),T.update(F,{locked:Re}),F.classList.toggle("gridLock",Re)}),Fe}function Be(){const{remove:Re}=s;return s.remove=()=>{T.removeWidget(F,!0),S.charts.delete(s),Re.apply(s)},Re}function pe(){const{changeBaseDocument:Re}=s;return F.gridstackPopoutCallback=()=>{T.removeWidget(F,!0)},s.changeBaseDocument=Fe=>{Re.apply(s,[Fe]),Fe===document&&console.error("changeBaseDocument should be restored to normal by the time we get here..."),be()},Re}function be(){T.removeWidget(F,!0),s.remove=ge,s.changeBaseDocument=se}s.removeLayout=()=>{T.removeWidget(F,!1),ae.remove(),F.gridstackPopoutCallback=void 0,s.remove=ge,s.changeBaseDocument=se,oe.disconnect()}}}function getVisibleChartBounds(d){return Object.entries(window.mdv.chartManager.charts).filter(f=>f[1].dataSource===d).map(f=>f[1].chart.getDiv().getBoundingClientRect())}function getGridInfo(d){const[s,f]=window.mdv.chartManager.gridStack.getCellDimensions(d),_=d.contentDiv.getBoundingClientRect(),S=Math.floor(_.height/f)*2,T=Math.floor(_.width/s);return{cellW:s,cellH:f/2,rows:S,cols:T}}function findFreeSpace(d){const s=getVisibleChartBounds(d),{cellW:f,cellH:_,rows:S,cols:T}=getGridInfo(d),F=d.contentDiv.getBoundingClientRect(),M=2,P=1,H=new Array(S);for(let J=0;J<S;J++)H[J]=new Array(T).fill(!1);for(const J of s){const K=Math.floor((J.left-F.left)/f),oe=Math.floor((J.top-F.top)/_),se=Math.min(T,Math.ceil((J.right-F.left)/f)),ae=Math.min(S,Math.ceil((J.bottom-F.top)/_));for(let ge=oe;ge<ae;ge++)for(let he=K;he<se;he++)H[ge][he]=!0}for(let J=0;J<=S-P;J++)for(let K=0;K<=T-M;K++){let oe=!0;for(let se=0;se<P&&oe;se++)for(let ae=0;ae<M&&oe;ae++)H[J+se][K+ae]&&(oe=!1);if(oe)return{left:K*f,top:J*_}}return{left:10,top:10}}function positionChart(d,s){let f=300,_=300,S=10,T=10;s.size&&(f=s.size[0],_=s.size[1]);const{chartManager:F}=window.mdv;if(s.position)S=s.position[0],T=s.position[1];else try{const M=findFreeSpace(d);S=M.left,T=M.top}catch(M){console.error(M)}if(F.viewData.dataSources[d.name].layout==="gridstack"&&s.gssize){const M=F.gridStack.getCellDimensions(d);f=Math.round(s.gssize[0]*M[0]),_=Math.round(s.gssize[1]*M[1]),S=Math.round(s.gsposition[0]*(M[0]+5)),T=Math.floor(s.gsposition[1]*(M[1]+5))}return{width:f,height:_,left:S,top:T}}function __awaiter(d,s,f,_){function S(T){return T instanceof f?T:new f(function(F){F(T)})}return new(f||(f=Promise))(function(T,F){function M(J){try{H(_.next(J))}catch(K){F(K)}}function P(J){try{H(_.throw(J))}catch(K){F(K)}}function H(J){J.done?T(J.value):S(J.value).then(M,P)}H((_=_.apply(d,s||[])).next())})}function __generator(d,s){var f={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},_,S,T,F=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return F.next=M(0),F.throw=M(1),F.return=M(2),typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function M(H){return function(J){return P([H,J])}}function P(H){if(_)throw new TypeError("Generator is already executing.");for(;F&&(F=0,H[0]&&(f=0)),f;)try{if(_=1,S&&(T=H[0]&2?S.return:H[0]?S.throw||((T=S.return)&&T.call(S),0):S.next)&&!(T=T.call(S,H[1])).done)return T;switch(S=0,T&&(H=[H[0]&2,T.value]),H[0]){case 0:case 1:T=H;break;case 4:return f.label++,{value:H[1],done:!1};case 5:f.label++,S=H[1],H=[0];continue;case 7:H=f.ops.pop(),f.trys.pop();continue;default:if(T=f.trys,!(T=T.length>0&&T[T.length-1])&&(H[0]===6||H[0]===2)){f=0;continue}if(H[0]===3&&(!T||H[1]>T[0]&&H[1]<T[3])){f.label=H[1];break}if(H[0]===6&&f.label<T[1]){f.label=T[1],T=H;break}if(T&&f.label<T[2]){f.label=T[2],f.ops.push(H);break}T[2]&&f.ops.pop(),f.trys.pop();continue}H=s.call(d,f)}catch(J){H=[6,J],S=0}finally{_=T=0}if(H[0]&5)throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}}function __read(d,s){var f=typeof Symbol=="function"&&d[Symbol.iterator];if(!f)return d;var _=f.call(d),S,T=[],F;try{for(;(s===void 0||s-- >0)&&!(S=_.next()).done;)T.push(S.value)}catch(M){F={error:M}}finally{try{S&&!S.done&&(f=_.return)&&f.call(_)}finally{if(F)throw F.error}}return T}function __spreadArray(d,s,f){if(f||arguments.length===2)for(var _=0,S=s.length,T;_<S;_++)(T||!(_ in s))&&(T||(T=Array.prototype.slice.call(s,0,_)),T[_]=s[_]);return d.concat(T||Array.prototype.slice.call(s))}typeof SuppressedError=="function"&&SuppressedError;var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(d,s){var f=withMimeType(d);if(typeof f.path!="string"){var _=d.webkitRelativePath;Object.defineProperty(f,"path",{value:typeof s=="string"?s:typeof _=="string"&&_.length>0?_:d.name,writable:!1,configurable:!1,enumerable:!0})}return f}function withMimeType(d){var s=d.name,f=s&&s.lastIndexOf(".")!==-1;if(f&&!d.type){var _=s.split(".").pop().toLowerCase(),S=COMMON_MIME_TYPES.get(_);S&&Object.defineProperty(d,"type",{value:S,writable:!1,configurable:!1,enumerable:!0})}return d}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(d){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(s){return isObject$1(d)&&isDataTransfer(d.dataTransfer)?[2,getDataTransferFiles(d.dataTransfer,d.type)]:isChangeEvt(d)?[2,getInputFiles(d)]:Array.isArray(d)&&d.every(function(f){return"getFile"in f&&typeof f.getFile=="function"})?[2,getFsHandleFiles(d)]:[2,[]]})})}function isDataTransfer(d){return isObject$1(d)}function isChangeEvt(d){return isObject$1(d)&&isObject$1(d.target)}function isObject$1(d){return typeof d=="object"&&d!==null}function getInputFiles(d){return fromList(d.target.files).map(function(s){return toFileWithPath(s)})}function getFsHandleFiles(d){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(f){switch(f.label){case 0:return[4,Promise.all(d.map(function(_){return _.getFile()}))];case 1:return s=f.sent(),[2,s.map(function(_){return toFileWithPath(_)})]}})})}function getDataTransferFiles(d,s){return __awaiter(this,void 0,void 0,function(){var f,_;return __generator(this,function(S){switch(S.label){case 0:return d.items?(f=fromList(d.items).filter(function(T){return T.kind==="file"}),s!=="drop"?[2,f]:[4,Promise.all(f.map(toFilePromises))]):[3,2];case 1:return _=S.sent(),[2,noIgnoredFiles(flatten(_))];case 2:return[2,noIgnoredFiles(fromList(d.files).map(function(T){return toFileWithPath(T)}))]}})})}function noIgnoredFiles(d){return d.filter(function(s){return FILES_TO_IGNORE.indexOf(s.name)===-1})}function fromList(d){if(d===null)return[];for(var s=[],f=0;f<d.length;f++){var _=d[f];s.push(_)}return s}function toFilePromises(d){if(typeof d.webkitGetAsEntry!="function")return fromDataTransferItem(d);var s=d.webkitGetAsEntry();return s&&s.isDirectory?fromDirEntry(s):fromDataTransferItem(d)}function flatten(d){return d.reduce(function(s,f){return __spreadArray(__spreadArray([],__read(s),!1),__read(Array.isArray(f)?flatten(f):[f]),!1)},[])}function fromDataTransferItem(d){var s=d.getAsFile();if(!s)return Promise.reject("".concat(d," is not a File"));var f=toFileWithPath(s);return Promise.resolve(f)}function fromEntry(d){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(s){return[2,d.isDirectory?fromDirEntry(d):fromFileEntry(d)]})})}function fromDirEntry(d){var s=d.createReader();return new Promise(function(f,_){var S=[];function T(){var F=this;s.readEntries(function(M){return __awaiter(F,void 0,void 0,function(){var P,H,J;return __generator(this,function(K){switch(K.label){case 0:if(M.length)return[3,5];K.label=1;case 1:return K.trys.push([1,3,,4]),[4,Promise.all(S)];case 2:return P=K.sent(),f(P),[3,4];case 3:return H=K.sent(),_(H),[3,4];case 4:return[3,6];case 5:J=Promise.all(M.map(fromEntry)),S.push(J),T(),K.label=6;case 6:return[2]}})})},function(M){_(M)})}T()})}function fromFileEntry(d){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(s){return[2,new Promise(function(f,_){d.file(function(S){var T=toFileWithPath(S,d.fullPath);f(T)},function(S){_(S)})})]})})}var _default=function(d,s){if(d&&s){var f=Array.isArray(s)?s:s.split(",");if(f.length===0)return!0;var _=d.name||"",S=(d.type||"").toLowerCase(),T=S.replace(/\/.*$/,"");return f.some(function(F){var M=F.trim().toLowerCase();return M.charAt(0)==="."?_.toLowerCase().endsWith(M):M.endsWith("/*")?T===M.replace(/\/.*$/,""):S===M})}return!0};function _toConsumableArray$1(d){return _arrayWithoutHoles$1(d)||_iterableToArray$1(d)||_unsupportedIterableToArray$1(d)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}function _arrayWithoutHoles$1(d){if(Array.isArray(d))return _arrayLikeToArray$1(d)}function ownKeys$1(d,s){var f=Object.keys(d);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(d);s&&(_=_.filter(function(S){return Object.getOwnPropertyDescriptor(d,S).enumerable})),f.push.apply(f,_)}return f}function _objectSpread$1(d){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$1(Object(f),!0).forEach(function(_){_defineProperty$1(d,_,f[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(f)):ownKeys$1(Object(f)).forEach(function(_){Object.defineProperty(d,_,Object.getOwnPropertyDescriptor(f,_))})}return d}function _defineProperty$1(d,s,f){return s in d?Object.defineProperty(d,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[s]=f,d}function _slicedToArray$1(d,s){return _arrayWithHoles$1(d)||_iterableToArrayLimit$1(d,s)||_unsupportedIterableToArray$1(d,s)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(d,s){if(d){if(typeof d=="string")return _arrayLikeToArray$1(d,s);var f=Object.prototype.toString.call(d).slice(8,-1);if(f==="Object"&&d.constructor&&(f=d.constructor.name),f==="Map"||f==="Set")return Array.from(d);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return _arrayLikeToArray$1(d,s)}}function _arrayLikeToArray$1(d,s){(s==null||s>d.length)&&(s=d.length);for(var f=0,_=new Array(s);f<s;f++)_[f]=d[f];return _}function _iterableToArrayLimit$1(d,s){var f=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(f!=null){var _=[],S=!0,T=!1,F,M;try{for(f=f.call(d);!(S=(F=f.next()).done)&&(_.push(F.value),!(s&&_.length===s));S=!0);}catch(P){T=!0,M=P}finally{try{!S&&f.return!=null&&f.return()}finally{if(T)throw M}}return _}}function _arrayWithHoles$1(d){if(Array.isArray(d))return d}var accepts=typeof _default=="function"?_default:_default.default,FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function d(s){s=Array.isArray(s)&&s.length===1?s[0]:s;var f=Array.isArray(s)?"one of ".concat(s.join(", ")):s;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(f)}},getTooLargeRejectionErr=function d(s){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(s," ").concat(s===1?"byte":"bytes")}},getTooSmallRejectionErr=function d(s){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(s," ").concat(s===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(d,s){var f=d.type==="application/x-moz-file"||accepts(d,s);return[f,f?null:getInvalidTypeRejectionErr(s)]}function fileMatchSize(d,s,f){if(isDefined(d.size))if(isDefined(s)&&isDefined(f)){if(d.size>f)return[!1,getTooLargeRejectionErr(f)];if(d.size<s)return[!1,getTooSmallRejectionErr(s)]}else{if(isDefined(s)&&d.size<s)return[!1,getTooSmallRejectionErr(s)];if(isDefined(f)&&d.size>f)return[!1,getTooLargeRejectionErr(f)]}return[!0,null]}function isDefined(d){return d!=null}function allFilesAccepted(d){var s=d.files,f=d.accept,_=d.minSize,S=d.maxSize,T=d.multiple,F=d.maxFiles,M=d.validator;return!T&&s.length>1||T&&F>=1&&s.length>F?!1:s.every(function(P){var H=fileAccepted(P,f),J=_slicedToArray$1(H,1),K=J[0],oe=fileMatchSize(P,_,S),se=_slicedToArray$1(oe,1),ae=se[0],ge=M?M(P):null;return K&&ae&&!ge})}function isPropagationStopped(d){return typeof d.isPropagationStopped=="function"?d.isPropagationStopped():typeof d.cancelBubble<"u"?d.cancelBubble:!1}function isEvtWithFiles(d){return d.dataTransfer?Array.prototype.some.call(d.dataTransfer.types,function(s){return s==="Files"||s==="application/x-moz-file"}):!!d.target&&!!d.target.files}function onDocumentDragOver(d){d.preventDefault()}function isIe(d){return d.indexOf("MSIE")!==-1||d.indexOf("Trident/")!==-1}function isEdge(d){return d.indexOf("Edge/")!==-1}function isIeOrEdge(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(d)||isEdge(d)}function composeEventHandlers(){for(var d=arguments.length,s=new Array(d),f=0;f<d;f++)s[f]=arguments[f];return function(_){for(var S=arguments.length,T=new Array(S>1?S-1:0),F=1;F<S;F++)T[F-1]=arguments[F];return s.some(function(M){return!isPropagationStopped(_)&&M&&M.apply(void 0,[_].concat(T)),isPropagationStopped(_)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(d){if(isDefined(d)){var s=Object.entries(d).filter(function(f){var _=_slicedToArray$1(f,2),S=_[0],T=_[1],F=!0;return isMIMEType(S)||(console.warn('Skipped "'.concat(S,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),F=!1),(!Array.isArray(T)||!T.every(isExt))&&(console.warn('Skipped "'.concat(S,'" because an invalid file extension was provided.')),F=!1),F}).reduce(function(f,_){var S=_slicedToArray$1(_,2),T=S[0],F=S[1];return _objectSpread$1(_objectSpread$1({},f),{},_defineProperty$1({},T,F))},{});return[{description:"Files",accept:s}]}return d}function acceptPropAsAcceptAttr(d){if(isDefined(d))return Object.entries(d).reduce(function(s,f){var _=_slicedToArray$1(f,2),S=_[0],T=_[1];return[].concat(_toConsumableArray$1(s),[S],_toConsumableArray$1(T))},[]).filter(function(s){return isMIMEType(s)||isExt(s)}).join(",")}function isAbort(d){return d instanceof DOMException&&(d.name==="AbortError"||d.code===d.ABORT_ERR)}function isSecurityError(d){return d instanceof DOMException&&(d.name==="SecurityError"||d.code===d.SECURITY_ERR)}function isMIMEType(d){return d==="audio/*"||d==="video/*"||d==="image/*"||d==="text/*"||/\w+\/[-+.\w]+/g.test(d)}function isExt(d){return/^.*\.[\w]+$/.test(d)}var _excluded=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(d){return _arrayWithoutHoles(d)||_iterableToArray(d)||_unsupportedIterableToArray(d)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}function _arrayWithoutHoles(d){if(Array.isArray(d))return _arrayLikeToArray(d)}function _slicedToArray(d,s){return _arrayWithHoles(d)||_iterableToArrayLimit(d,s)||_unsupportedIterableToArray(d,s)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(d,s){if(d){if(typeof d=="string")return _arrayLikeToArray(d,s);var f=Object.prototype.toString.call(d).slice(8,-1);if(f==="Object"&&d.constructor&&(f=d.constructor.name),f==="Map"||f==="Set")return Array.from(d);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return _arrayLikeToArray(d,s)}}function _arrayLikeToArray(d,s){(s==null||s>d.length)&&(s=d.length);for(var f=0,_=new Array(s);f<s;f++)_[f]=d[f];return _}function _iterableToArrayLimit(d,s){var f=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(f!=null){var _=[],S=!0,T=!1,F,M;try{for(f=f.call(d);!(S=(F=f.next()).done)&&(_.push(F.value),!(s&&_.length===s));S=!0);}catch(P){T=!0,M=P}finally{try{!S&&f.return!=null&&f.return()}finally{if(T)throw M}}return _}}function _arrayWithHoles(d){if(Array.isArray(d))return d}function ownKeys(d,s){var f=Object.keys(d);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(d);s&&(_=_.filter(function(S){return Object.getOwnPropertyDescriptor(d,S).enumerable})),f.push.apply(f,_)}return f}function _objectSpread(d){for(var s=1;s<arguments.length;s++){var f=arguments[s]!=null?arguments[s]:{};s%2?ownKeys(Object(f),!0).forEach(function(_){_defineProperty(d,_,f[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(f)):ownKeys(Object(f)).forEach(function(_){Object.defineProperty(d,_,Object.getOwnPropertyDescriptor(f,_))})}return d}function _defineProperty(d,s,f){return s in d?Object.defineProperty(d,s,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[s]=f,d}function _objectWithoutProperties(d,s){if(d==null)return{};var f=_objectWithoutPropertiesLoose(d,s),_,S;if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(d);for(S=0;S<T.length;S++)_=T[S],!(s.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(d,_)&&(f[_]=d[_])}return f}function _objectWithoutPropertiesLoose(d,s){if(d==null)return{};var f={},_=Object.keys(d),S,T;for(T=0;T<_.length;T++)S=_[T],!(s.indexOf(S)>=0)&&(f[S]=d[S]);return f}var Dropzone=reactExports.forwardRef(function(d,s){var f=d.children,_=_objectWithoutProperties(d,_excluded),S=useDropzone(_),T=S.open,F=_objectWithoutProperties(S,_excluded2);return reactExports.useImperativeHandle(s,function(){return{open:T}},[T]),React.createElement(reactExports.Fragment,null,f(_objectSpread(_objectSpread({},F),{},{open:T})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=_objectSpread(_objectSpread({},defaultProps),d),f=s.accept,_=s.disabled,S=s.getFilesFromEvent,T=s.maxSize,F=s.minSize,M=s.multiple,P=s.maxFiles,H=s.onDragEnter,J=s.onDragLeave,K=s.onDragOver,oe=s.onDrop,se=s.onDropAccepted,ae=s.onDropRejected,ge=s.onFileDialogCancel,he=s.onFileDialogOpen,Be=s.useFsAccessApi,pe=s.autoFocus,be=s.preventDropOnDocument,Re=s.noClick,Fe=s.noKeyboard,Me=s.noDrag,ve=s.noDragEventsBubbling,At=s.onError,Ct=s.validator,Rt=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(f)},[f]),It=reactExports.useMemo(function(){return pickerOptionsFromAccept(f)},[f]),xt=reactExports.useMemo(function(){return typeof he=="function"?he:noop$1},[he]),wt=reactExports.useMemo(function(){return typeof ge=="function"?ge:noop$1},[ge]),Ft=reactExports.useRef(null),jt=reactExports.useRef(null),ta=reactExports.useReducer(reducer$1,initialState),Qn=_slicedToArray(ta,2),ca=Qn[0],Jn=Qn[1],wA=ca.isFocused,LA=ca.isFileDialogActive,ZA=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&Be&&canUseFileSystemAccessAPI()),xI=function(){!ZA.current&&LA&&setTimeout(function(){if(jt.current){var hA=jt.current.files;hA.length||(Jn({type:"closeDialog"}),wt())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",xI,!1),function(){window.removeEventListener("focus",xI,!1)}},[jt,LA,wt,ZA]);var cI=reactExports.useRef([]),pI=function(hA){Ft.current&&Ft.current.contains(hA.target)||(hA.preventDefault(),cI.current=[])};reactExports.useEffect(function(){return be&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",pI,!1)),function(){be&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",pI))}},[Ft,be]),reactExports.useEffect(function(){return!_&&pe&&Ft.current&&Ft.current.focus(),function(){}},[Ft,pe,_]);var aI=reactExports.useCallback(function(bA){At?At(bA):console.error(bA)},[At]),nI=reactExports.useCallback(function(bA){bA.preventDefault(),bA.persist(),JA(bA),cI.current=[].concat(_toConsumableArray(cI.current),[bA.target]),isEvtWithFiles(bA)&&Promise.resolve(S(bA)).then(function(hA){if(!(isPropagationStopped(bA)&&!ve)){var II=hA.length,OI=II>0&&allFilesAccepted({files:hA,accept:Rt,minSize:F,maxSize:T,multiple:M,maxFiles:P,validator:Ct}),ba=II>0&&!OI;Jn({isDragAccept:OI,isDragReject:ba,isDragActive:!0,type:"setDraggedFiles"}),H&&H(bA)}}).catch(function(hA){return aI(hA)})},[S,H,aI,ve,Rt,F,T,M,P,Ct]),uA=reactExports.useCallback(function(bA){bA.preventDefault(),bA.persist(),JA(bA);var hA=isEvtWithFiles(bA);if(hA&&bA.dataTransfer)try{bA.dataTransfer.dropEffect="copy"}catch{}return hA&&K&&K(bA),!1},[K,ve]),aa=reactExports.useCallback(function(bA){bA.preventDefault(),bA.persist(),JA(bA);var hA=cI.current.filter(function(OI){return Ft.current&&Ft.current.contains(OI)}),II=hA.indexOf(bA.target);II!==-1&&hA.splice(II,1),cI.current=hA,!(hA.length>0)&&(Jn({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(bA)&&J&&J(bA))},[Ft,J,ve]),eA=reactExports.useCallback(function(bA,hA){var II=[],OI=[];bA.forEach(function(ba){var IA=fileAccepted(ba,Rt),MA=_slicedToArray(IA,2),EI=MA[0],wI=MA[1],vI=fileMatchSize(ba,F,T),WI=_slicedToArray(vI,2),GI=WI[0],NI=WI[1],tC=Ct?Ct(ba):null;if(EI&&GI&&!tC)II.push(ba);else{var mC=[wI,NI];tC&&(mC=mC.concat(tC)),OI.push({file:ba,errors:mC.filter(function(yC){return yC})})}}),(!M&&II.length>1||M&&P>=1&&II.length>P)&&(II.forEach(function(ba){OI.push({file:ba,errors:[TOO_MANY_FILES_REJECTION]})}),II.splice(0)),Jn({acceptedFiles:II,fileRejections:OI,type:"setFiles"}),oe&&oe(II,OI,hA),OI.length>0&&ae&&ae(OI,hA),II.length>0&&se&&se(II,hA)},[Jn,M,Rt,F,T,P,oe,se,ae,Ct]),DA=reactExports.useCallback(function(bA){bA.preventDefault(),bA.persist(),JA(bA),cI.current=[],isEvtWithFiles(bA)&&Promise.resolve(S(bA)).then(function(hA){isPropagationStopped(bA)&&!ve||eA(hA,bA)}).catch(function(hA){return aI(hA)}),Jn({type:"reset"})},[S,eA,aI,ve]),xA=reactExports.useCallback(function(){if(ZA.current){Jn({type:"openDialog"}),xt();var bA={multiple:M,types:It};window.showOpenFilePicker(bA).then(function(hA){return S(hA)}).then(function(hA){eA(hA,null),Jn({type:"closeDialog"})}).catch(function(hA){isAbort(hA)?(wt(hA),Jn({type:"closeDialog"})):isSecurityError(hA)?(ZA.current=!1,jt.current?(jt.current.value=null,jt.current.click()):aI(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):aI(hA)});return}jt.current&&(Jn({type:"openDialog"}),xt(),jt.current.value=null,jt.current.click())},[Jn,xt,wt,Be,eA,aI,It,M]),ua=reactExports.useCallback(function(bA){!Ft.current||!Ft.current.isEqualNode(bA.target)||(bA.key===" "||bA.key==="Enter"||bA.keyCode===32||bA.keyCode===13)&&(bA.preventDefault(),xA())},[Ft,xA]),sA=reactExports.useCallback(function(){Jn({type:"focus"})},[]),oA=reactExports.useCallback(function(){Jn({type:"blur"})},[]),fA=reactExports.useCallback(function(){Re||(isIeOrEdge()?setTimeout(xA,0):xA())},[Re,xA]),lA=function(hA){return _?null:hA},gA=function(hA){return Fe?null:lA(hA)},WA=function(hA){return Me?null:lA(hA)},JA=function(hA){ve&&hA.stopPropagation()},_I=reactExports.useMemo(function(){return function(){var bA=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},hA=bA.refKey,II=hA===void 0?"ref":hA,OI=bA.role,ba=bA.onKeyDown,IA=bA.onFocus,MA=bA.onBlur,EI=bA.onClick,wI=bA.onDragEnter,vI=bA.onDragOver,WI=bA.onDragLeave,GI=bA.onDrop,NI=_objectWithoutProperties(bA,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:gA(composeEventHandlers(ba,ua)),onFocus:gA(composeEventHandlers(IA,sA)),onBlur:gA(composeEventHandlers(MA,oA)),onClick:lA(composeEventHandlers(EI,fA)),onDragEnter:WA(composeEventHandlers(wI,nI)),onDragOver:WA(composeEventHandlers(vI,uA)),onDragLeave:WA(composeEventHandlers(WI,aa)),onDrop:WA(composeEventHandlers(GI,DA)),role:typeof OI=="string"&&OI!==""?OI:"presentation"},II,Ft),!_&&!Fe?{tabIndex:0}:{}),NI)}},[Ft,ua,sA,oA,fA,nI,uA,aa,DA,Fe,Me,_]),HI=reactExports.useCallback(function(bA){bA.stopPropagation()},[]),Nt=reactExports.useMemo(function(){return function(){var bA=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},hA=bA.refKey,II=hA===void 0?"ref":hA,OI=bA.onChange,ba=bA.onClick,IA=_objectWithoutProperties(bA,_excluded4),MA=_defineProperty({accept:Rt,multiple:M,type:"file",style:{display:"none"},onChange:lA(composeEventHandlers(OI,DA)),onClick:lA(composeEventHandlers(ba,HI)),tabIndex:-1},II,jt);return _objectSpread(_objectSpread({},MA),IA)}},[jt,f,M,DA,_]);return _objectSpread(_objectSpread({},ca),{},{isFocused:wA&&!_,getRootProps:_I,getInputProps:Nt,rootRef:Ft,inputRef:jt,open:lA(xA)})}function reducer$1(d,s){switch(s.type){case"focus":return _objectSpread(_objectSpread({},d),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},d),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},d),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},d),{},{isDragActive:s.isDragActive,isDragAccept:s.isDragAccept,isDragReject:s.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},d),{},{acceptedFiles:s.acceptedFiles,fileRejections:s.fileRejections});case"reset":return _objectSpread({},initialState);default:return d}}function noop$1(){}function bind(d,s){return function(){return d.apply(s,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(d=>s=>{const f=toString.call(s);return d[f]||(d[f]=f.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=d=>(d=d.toLowerCase(),s=>kindOf(s)===d),typeOfTest=d=>s=>typeof s===d,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(d){return d!==null&&!isUndefined(d)&&d.constructor!==null&&!isUndefined(d.constructor)&&isFunction(d.constructor.isBuffer)&&d.constructor.isBuffer(d)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(d){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(d):s=d&&d.buffer&&isArrayBuffer(d.buffer),s}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=d=>d!==null&&typeof d=="object",isBoolean=d=>d===!0||d===!1,isPlainObject=d=>{if(kindOf(d)!=="object")return!1;const s=getPrototypeOf(d);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in d)&&!(Symbol.iterator in d)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=d=>isObject(d)&&isFunction(d.pipe),isFormData=d=>{let s;return d&&(typeof FormData=="function"&&d instanceof FormData||isFunction(d.append)&&((s=kindOf(d))==="formdata"||s==="object"&&isFunction(d.toString)&&d.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=d=>d.trim?d.trim():d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(d,s,{allOwnKeys:f=!1}={}){if(d===null||typeof d>"u")return;let _,S;if(typeof d!="object"&&(d=[d]),isArray(d))for(_=0,S=d.length;_<S;_++)s.call(null,d[_],_,d);else{const T=f?Object.getOwnPropertyNames(d):Object.keys(d),F=T.length;let M;for(_=0;_<F;_++)M=T[_],s.call(null,d[M],M,d)}}function findKey(d,s){s=s.toLowerCase();const f=Object.keys(d);let _=f.length,S;for(;_-- >0;)if(S=f[_],s===S.toLowerCase())return S;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=d=>!isUndefined(d)&&d!==_global;function merge(){const{caseless:d}=isContextDefined(this)&&this||{},s={},f=(_,S)=>{const T=d&&findKey(s,S)||S;isPlainObject(s[T])&&isPlainObject(_)?s[T]=merge(s[T],_):isPlainObject(_)?s[T]=merge({},_):isArray(_)?s[T]=_.slice():s[T]=_};for(let _=0,S=arguments.length;_<S;_++)arguments[_]&&forEach(arguments[_],f);return s}const extend=(d,s,f,{allOwnKeys:_}={})=>(forEach(s,(S,T)=>{f&&isFunction(S)?d[T]=bind(S,f):d[T]=S},{allOwnKeys:_}),d),stripBOM=d=>(d.charCodeAt(0)===65279&&(d=d.slice(1)),d),inherits=(d,s,f,_)=>{d.prototype=Object.create(s.prototype,_),d.prototype.constructor=d,Object.defineProperty(d,"super",{value:s.prototype}),f&&Object.assign(d.prototype,f)},toFlatObject=(d,s,f,_)=>{let S,T,F;const M={};if(s=s||{},d==null)return s;do{for(S=Object.getOwnPropertyNames(d),T=S.length;T-- >0;)F=S[T],(!_||_(F,d,s))&&!M[F]&&(s[F]=d[F],M[F]=!0);d=f!==!1&&getPrototypeOf(d)}while(d&&(!f||f(d,s))&&d!==Object.prototype);return s},endsWith=(d,s,f)=>{d=String(d),(f===void 0||f>d.length)&&(f=d.length),f-=s.length;const _=d.indexOf(s,f);return _!==-1&&_===f},toArray=d=>{if(!d)return null;if(isArray(d))return d;let s=d.length;if(!isNumber(s))return null;const f=new Array(s);for(;s-- >0;)f[s]=d[s];return f},isTypedArray=(d=>s=>d&&s instanceof d)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(d,s)=>{const _=(d&&d[Symbol.iterator]).call(d);let S;for(;(S=_.next())&&!S.done;){const T=S.value;s.call(d,T[0],T[1])}},matchAll=(d,s)=>{let f;const _=[];for(;(f=d.exec(s))!==null;)_.push(f);return _},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=d=>d.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(f,_,S){return _.toUpperCase()+S}),hasOwnProperty=(({hasOwnProperty:d})=>(s,f)=>d.call(s,f))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(d,s)=>{const f=Object.getOwnPropertyDescriptors(d),_={};forEach(f,(S,T)=>{let F;(F=s(S,T,d))!==!1&&(_[T]=F||S)}),Object.defineProperties(d,_)},freezeMethods=d=>{reduceDescriptors(d,(s,f)=>{if(isFunction(d)&&["arguments","caller","callee"].indexOf(f)!==-1)return!1;const _=d[f];if(isFunction(_)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+f+"'")})}})},toObjectSet=(d,s)=>{const f={},_=S=>{S.forEach(T=>{f[T]=!0})};return isArray(d)?_(d):_(String(d).split(s)),f},noop=()=>{},toFiniteNumber=(d,s)=>d!=null&&Number.isFinite(d=+d)?d:s,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(d=16,s=ALPHABET.ALPHA_DIGIT)=>{let f="";const{length:_}=s;for(;d--;)f+=s[Math.random()*_|0];return f};function isSpecCompliantForm(d){return!!(d&&isFunction(d.append)&&d[Symbol.toStringTag]==="FormData"&&d[Symbol.iterator])}const toJSONObject=d=>{const s=new Array(10),f=(_,S)=>{if(isObject(_)){if(s.indexOf(_)>=0)return;if(!("toJSON"in _)){s[S]=_;const T=isArray(_)?[]:{};return forEach(_,(F,M)=>{const P=f(F,S+1);!isUndefined(P)&&(T[M]=P)}),s[S]=void 0,T}}return _};return f(d,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=d=>d&&(isObject(d)||isFunction(d))&&isFunction(d.then)&&isFunction(d.catch),_setImmediate=((d,s)=>d?setImmediate:s?((f,_)=>(_global.addEventListener("message",({source:S,data:T})=>{S===_global&&T===f&&_.length&&_.shift()()},!1),S=>{_.push(S),_global.postMessage(f,"*")}))(`axios@${Math.random()}`,[]):f=>setTimeout(f))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(d,s,f,_,S){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=d,this.name="AxiosError",s&&(this.code=s),f&&(this.config=f),_&&(this.request=_),S&&(this.response=S,this.status=S.status?S.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function d(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(d=>{descriptors[d]={value:d}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(d,s,f,_,S,T)=>{const F=Object.create(prototype$1);return utils$1.toFlatObject(d,F,function(P){return P!==Error.prototype},M=>M!=="isAxiosError"),AxiosError.call(F,d.message,s,f,_,S),F.cause=d,F.name=d.name,T&&Object.assign(F,T),F};const httpAdapter=null;function isVisitable(d){return utils$1.isPlainObject(d)||utils$1.isArray(d)}function removeBrackets(d){return utils$1.endsWith(d,"[]")?d.slice(0,-2):d}function renderKey(d,s,f){return d?d.concat(s).map(function(S,T){return S=removeBrackets(S),!f&&T?"["+S+"]":S}).join(f?".":""):s}function isFlatArray(d){return utils$1.isArray(d)&&!d.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function d(s){return/^is[A-Z]/.test(s)});function toFormData(d,s,f){if(!utils$1.isObject(d))throw new TypeError("target must be an object");s=s||new FormData,f=utils$1.toFlatObject(f,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ge,he){return!utils$1.isUndefined(he[ge])});const _=f.metaTokens,S=f.visitor||J,T=f.dots,F=f.indexes,P=(f.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(s);if(!utils$1.isFunction(S))throw new TypeError("visitor must be a function");function H(ae){if(ae===null)return"";if(utils$1.isDate(ae))return ae.toISOString();if(!P&&utils$1.isBlob(ae))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(ae)||utils$1.isTypedArray(ae)?P&&typeof Blob=="function"?new Blob([ae]):Buffer.from(ae):ae}function J(ae,ge,he){let Be=ae;if(ae&&!he&&typeof ae=="object"){if(utils$1.endsWith(ge,"{}"))ge=_?ge:ge.slice(0,-2),ae=JSON.stringify(ae);else if(utils$1.isArray(ae)&&isFlatArray(ae)||(utils$1.isFileList(ae)||utils$1.endsWith(ge,"[]"))&&(Be=utils$1.toArray(ae)))return ge=removeBrackets(ge),Be.forEach(function(be,Re){!(utils$1.isUndefined(be)||be===null)&&s.append(F===!0?renderKey([ge],Re,T):F===null?ge:ge+"[]",H(be))}),!1}return isVisitable(ae)?!0:(s.append(renderKey(he,ge,T),H(ae)),!1)}const K=[],oe=Object.assign(predicates,{defaultVisitor:J,convertValue:H,isVisitable});function se(ae,ge){if(!utils$1.isUndefined(ae)){if(K.indexOf(ae)!==-1)throw Error("Circular reference detected in "+ge.join("."));K.push(ae),utils$1.forEach(ae,function(Be,pe){(!(utils$1.isUndefined(Be)||Be===null)&&S.call(s,Be,utils$1.isString(pe)?pe.trim():pe,ge,oe))===!0&&se(Be,ge?ge.concat(pe):[pe])}),K.pop()}}if(!utils$1.isObject(d))throw new TypeError("data must be an object");return se(d),s}function encode$1(d){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(d).replace(/[!'()~]|%20|%00/g,function(_){return s[_]})}function AxiosURLSearchParams(d,s){this._pairs=[],d&&toFormData(d,this,s)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function d(s,f){this._pairs.push([s,f])};prototype.toString=function d(s){const f=s?function(_){return s.call(this,_,encode$1)}:encode$1;return this._pairs.map(function(S){return f(S[0])+"="+f(S[1])},"").join("&")};function encode(d){return encodeURIComponent(d).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(d,s,f){if(!s)return d;const _=f&&f.encode||encode,S=f&&f.serialize;let T;if(S?T=S(s,f):T=utils$1.isURLSearchParams(s)?s.toString():new AxiosURLSearchParams(s,f).toString(_),T){const F=d.indexOf("#");F!==-1&&(d=d.slice(0,F)),d+=(d.indexOf("?")===-1?"?":"&")+T}return d}class InterceptorManager{constructor(){this.handlers=[]}use(s,f,_){return this.handlers.push({fulfilled:s,rejected:f,synchronous:_?_.synchronous:!1,runWhen:_?_.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){utils$1.forEach(this.handlers,function(_){_!==null&&s(_)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin$1=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin:origin$1},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(d,s){return toFormData(d,new platform.classes.URLSearchParams,Object.assign({visitor:function(f,_,S,T){return platform.isNode&&utils$1.isBuffer(f)?(this.append(_,f.toString("base64")),!1):T.defaultVisitor.apply(this,arguments)}},s))}function parsePropPath(d){return utils$1.matchAll(/\w+|\[(\w*)]/g,d).map(s=>s[0]==="[]"?"":s[1]||s[0])}function arrayToObject(d){const s={},f=Object.keys(d);let _;const S=f.length;let T;for(_=0;_<S;_++)T=f[_],s[T]=d[T];return s}function formDataToJSON(d){function s(f,_,S,T){let F=f[T++];if(F==="__proto__")return!0;const M=Number.isFinite(+F),P=T>=f.length;return F=!F&&utils$1.isArray(S)?S.length:F,P?(utils$1.hasOwnProp(S,F)?S[F]=[S[F],_]:S[F]=_,!M):((!S[F]||!utils$1.isObject(S[F]))&&(S[F]=[]),s(f,_,S[F],T)&&utils$1.isArray(S[F])&&(S[F]=arrayToObject(S[F])),!M)}if(utils$1.isFormData(d)&&utils$1.isFunction(d.entries)){const f={};return utils$1.forEachEntry(d,(_,S)=>{s(parsePropPath(_),S,f,0)}),f}return null}function stringifySafely(d,s,f){if(utils$1.isString(d))try{return(s||JSON.parse)(d),utils$1.trim(d)}catch(_){if(_.name!=="SyntaxError")throw _}return(0,JSON.stringify)(d)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function d(s,f){const _=f.getContentType()||"",S=_.indexOf("application/json")>-1,T=utils$1.isObject(s);if(T&&utils$1.isHTMLForm(s)&&(s=new FormData(s)),utils$1.isFormData(s))return S?JSON.stringify(formDataToJSON(s)):s;if(utils$1.isArrayBuffer(s)||utils$1.isBuffer(s)||utils$1.isStream(s)||utils$1.isFile(s)||utils$1.isBlob(s)||utils$1.isReadableStream(s))return s;if(utils$1.isArrayBufferView(s))return s.buffer;if(utils$1.isURLSearchParams(s))return f.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let M;if(T){if(_.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(s,this.formSerializer).toString();if((M=utils$1.isFileList(s))||_.indexOf("multipart/form-data")>-1){const P=this.env&&this.env.FormData;return toFormData(M?{"files[]":s}:s,P&&new P,this.formSerializer)}}return T||S?(f.setContentType("application/json",!1),stringifySafely(s)):s}],transformResponse:[function d(s){const f=this.transitional||defaults.transitional,_=f&&f.forcedJSONParsing,S=this.responseType==="json";if(utils$1.isResponse(s)||utils$1.isReadableStream(s))return s;if(s&&utils$1.isString(s)&&(_&&!this.responseType||S)){const F=!(f&&f.silentJSONParsing)&&S;try{return JSON.parse(s)}catch(M){if(F)throw M.name==="SyntaxError"?AxiosError.from(M,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):M}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function d(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],d=>{defaults.headers[d]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=d=>{const s={};let f,_,S;return d&&d.split(`
`).forEach(function(F){S=F.indexOf(":"),f=F.substring(0,S).trim().toLowerCase(),_=F.substring(S+1).trim(),!(!f||s[f]&&ignoreDuplicateOf[f])&&(f==="set-cookie"?s[f]?s[f].push(_):s[f]=[_]:s[f]=s[f]?s[f]+", "+_:_)}),s},$internals=Symbol("internals");function normalizeHeader(d){return d&&String(d).trim().toLowerCase()}function normalizeValue(d){return d===!1||d==null?d:utils$1.isArray(d)?d.map(normalizeValue):String(d)}function parseTokens(d){const s=Object.create(null),f=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let _;for(;_=f.exec(d);)s[_[1]]=_[2];return s}const isValidHeaderName=d=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(d.trim());function matchHeaderValue(d,s,f,_,S){if(utils$1.isFunction(_))return _.call(this,s,f);if(S&&(s=f),!!utils$1.isString(s)){if(utils$1.isString(_))return s.indexOf(_)!==-1;if(utils$1.isRegExp(_))return _.test(s)}}function formatHeader(d){return d.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,f,_)=>f.toUpperCase()+_)}function buildAccessors(d,s){const f=utils$1.toCamelCase(" "+s);["get","set","has"].forEach(_=>{Object.defineProperty(d,_+f,{value:function(S,T,F){return this[_].call(this,s,S,T,F)},configurable:!0})})}class AxiosHeaders{constructor(s){s&&this.set(s)}set(s,f,_){const S=this;function T(M,P,H){const J=normalizeHeader(P);if(!J)throw new Error("header name must be a non-empty string");const K=utils$1.findKey(S,J);(!K||S[K]===void 0||H===!0||H===void 0&&S[K]!==!1)&&(S[K||P]=normalizeValue(M))}const F=(M,P)=>utils$1.forEach(M,(H,J)=>T(H,J,P));if(utils$1.isPlainObject(s)||s instanceof this.constructor)F(s,f);else if(utils$1.isString(s)&&(s=s.trim())&&!isValidHeaderName(s))F(parseHeaders(s),f);else if(utils$1.isHeaders(s))for(const[M,P]of s.entries())T(P,M,_);else s!=null&&T(f,s,_);return this}get(s,f){if(s=normalizeHeader(s),s){const _=utils$1.findKey(this,s);if(_){const S=this[_];if(!f)return S;if(f===!0)return parseTokens(S);if(utils$1.isFunction(f))return f.call(this,S,_);if(utils$1.isRegExp(f))return f.exec(S);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,f){if(s=normalizeHeader(s),s){const _=utils$1.findKey(this,s);return!!(_&&this[_]!==void 0&&(!f||matchHeaderValue(this,this[_],_,f)))}return!1}delete(s,f){const _=this;let S=!1;function T(F){if(F=normalizeHeader(F),F){const M=utils$1.findKey(_,F);M&&(!f||matchHeaderValue(_,_[M],M,f))&&(delete _[M],S=!0)}}return utils$1.isArray(s)?s.forEach(T):T(s),S}clear(s){const f=Object.keys(this);let _=f.length,S=!1;for(;_--;){const T=f[_];(!s||matchHeaderValue(this,this[T],T,s,!0))&&(delete this[T],S=!0)}return S}normalize(s){const f=this,_={};return utils$1.forEach(this,(S,T)=>{const F=utils$1.findKey(_,T);if(F){f[F]=normalizeValue(S),delete f[T];return}const M=s?formatHeader(T):String(T).trim();M!==T&&delete f[T],f[M]=normalizeValue(S),_[M]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const f=Object.create(null);return utils$1.forEach(this,(_,S)=>{_!=null&&_!==!1&&(f[S]=s&&utils$1.isArray(_)?_.join(", "):_)}),f}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,f])=>s+": "+f).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...f){const _=new this(s);return f.forEach(S=>_.set(S)),_}static accessor(s){const _=(this[$internals]=this[$internals]={accessors:{}}).accessors,S=this.prototype;function T(F){const M=normalizeHeader(F);_[M]||(buildAccessors(S,F),_[M]=!0)}return utils$1.isArray(s)?s.forEach(T):T(s),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:d},s)=>{let f=s[0].toUpperCase()+s.slice(1);return{get:()=>d,set(_){this[f]=_}}});utils$1.freezeMethods(AxiosHeaders);function transformData(d,s){const f=this||defaults,_=s||f,S=AxiosHeaders.from(_.headers);let T=_.data;return utils$1.forEach(d,function(M){T=M.call(f,T,S.normalize(),s?s.status:void 0)}),S.normalize(),T}function isCancel(d){return!!(d&&d.__CANCEL__)}function CanceledError(d,s,f){AxiosError.call(this,d??"canceled",AxiosError.ERR_CANCELED,s,f),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(d,s,f){const _=f.config.validateStatus;!f.status||!_||_(f.status)?d(f):s(new AxiosError("Request failed with status code "+f.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(f.status/100)-4],f.config,f.request,f))}function parseProtocol(d){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(d);return s&&s[1]||""}function speedometer(d,s){d=d||10;const f=new Array(d),_=new Array(d);let S=0,T=0,F;return s=s!==void 0?s:1e3,function(P){const H=Date.now(),J=_[T];F||(F=H),f[S]=P,_[S]=H;let K=T,oe=0;for(;K!==S;)oe+=f[K++],K=K%d;if(S=(S+1)%d,S===T&&(T=(T+1)%d),H-F<s)return;const se=J&&H-J;return se?Math.round(oe*1e3/se):void 0}}function throttle(d,s){let f=0,_=1e3/s,S,T;const F=(H,J=Date.now())=>{f=J,S=null,T&&(clearTimeout(T),T=null),d.apply(null,H)};return[(...H)=>{const J=Date.now(),K=J-f;K>=_?F(H,J):(S=H,T||(T=setTimeout(()=>{T=null,F(S)},_-K)))},()=>S&&F(S)]}const progressEventReducer=(d,s,f=3)=>{let _=0;const S=speedometer(50,250);return throttle(T=>{const F=T.loaded,M=T.lengthComputable?T.total:void 0,P=F-_,H=S(P),J=F<=M;_=F;const K={loaded:F,total:M,progress:M?F/M:void 0,bytes:P,rate:H||void 0,estimated:H&&M&&J?(M-F)/H:void 0,event:T,lengthComputable:M!=null,[s?"download":"upload"]:!0};d(K)},f)},progressEventDecorator=(d,s)=>{const f=d!=null;return[_=>s[0]({lengthComputable:f,total:d,loaded:_}),s[1]]},asyncDecorator=d=>(...s)=>utils$1.asap(()=>d(...s)),isURLSameOrigin=platform.hasStandardBrowserEnv?function d(){const s=platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent),f=document.createElement("a");let _;function S(T){let F=T;return s&&(f.setAttribute("href",F),F=f.href),f.setAttribute("href",F),{href:f.href,protocol:f.protocol?f.protocol.replace(/:$/,""):"",host:f.host,search:f.search?f.search.replace(/^\?/,""):"",hash:f.hash?f.hash.replace(/^#/,""):"",hostname:f.hostname,port:f.port,pathname:f.pathname.charAt(0)==="/"?f.pathname:"/"+f.pathname}}return _=S(window.location.href),function(F){const M=utils$1.isString(F)?S(F):F;return M.protocol===_.protocol&&M.host===_.host}}():function d(){return function(){return!0}}(),cookies=platform.hasStandardBrowserEnv?{write(d,s,f,_,S,T){const F=[d+"="+encodeURIComponent(s)];utils$1.isNumber(f)&&F.push("expires="+new Date(f).toGMTString()),utils$1.isString(_)&&F.push("path="+_),utils$1.isString(S)&&F.push("domain="+S),T===!0&&F.push("secure"),document.cookie=F.join("; ")},read(d){const s=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(d){this.write(d,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(d){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(d)}function combineURLs(d,s){return s?d.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):d}function buildFullPath(d,s){return d&&!isAbsoluteURL(s)?combineURLs(d,s):s}const headersToObject=d=>d instanceof AxiosHeaders?{...d}:d;function mergeConfig(d,s){s=s||{};const f={};function _(H,J,K){return utils$1.isPlainObject(H)&&utils$1.isPlainObject(J)?utils$1.merge.call({caseless:K},H,J):utils$1.isPlainObject(J)?utils$1.merge({},J):utils$1.isArray(J)?J.slice():J}function S(H,J,K){if(utils$1.isUndefined(J)){if(!utils$1.isUndefined(H))return _(void 0,H,K)}else return _(H,J,K)}function T(H,J){if(!utils$1.isUndefined(J))return _(void 0,J)}function F(H,J){if(utils$1.isUndefined(J)){if(!utils$1.isUndefined(H))return _(void 0,H)}else return _(void 0,J)}function M(H,J,K){if(K in s)return _(H,J);if(K in d)return _(void 0,H)}const P={url:T,method:T,data:T,baseURL:F,transformRequest:F,transformResponse:F,paramsSerializer:F,timeout:F,timeoutMessage:F,withCredentials:F,withXSRFToken:F,adapter:F,responseType:F,xsrfCookieName:F,xsrfHeaderName:F,onUploadProgress:F,onDownloadProgress:F,decompress:F,maxContentLength:F,maxBodyLength:F,beforeRedirect:F,transport:F,httpAgent:F,httpsAgent:F,cancelToken:F,socketPath:F,responseEncoding:F,validateStatus:M,headers:(H,J)=>S(headersToObject(H),headersToObject(J),!0)};return utils$1.forEach(Object.keys(Object.assign({},d,s)),function(J){const K=P[J]||S,oe=K(d[J],s[J],J);utils$1.isUndefined(oe)&&K!==M||(f[J]=oe)}),f}const resolveConfig=d=>{const s=mergeConfig({},d);let{data:f,withXSRFToken:_,xsrfHeaderName:S,xsrfCookieName:T,headers:F,auth:M}=s;s.headers=F=AxiosHeaders.from(F),s.url=buildURL(buildFullPath(s.baseURL,s.url),d.params,d.paramsSerializer),M&&F.set("Authorization","Basic "+btoa((M.username||"")+":"+(M.password?unescape(encodeURIComponent(M.password)):"")));let P;if(utils$1.isFormData(f)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)F.setContentType(void 0);else if((P=F.getContentType())!==!1){const[H,...J]=P?P.split(";").map(K=>K.trim()).filter(Boolean):[];F.setContentType([H||"multipart/form-data",...J].join("; "))}}if(platform.hasStandardBrowserEnv&&(_&&utils$1.isFunction(_)&&(_=_(s)),_||_!==!1&&isURLSameOrigin(s.url))){const H=S&&T&&cookies.read(T);H&&F.set(S,H)}return s},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(d){return new Promise(function(f,_){const S=resolveConfig(d);let T=S.data;const F=AxiosHeaders.from(S.headers).normalize();let{responseType:M,onUploadProgress:P,onDownloadProgress:H}=S,J,K,oe,se,ae;function ge(){se&&se(),ae&&ae(),S.cancelToken&&S.cancelToken.unsubscribe(J),S.signal&&S.signal.removeEventListener("abort",J)}let he=new XMLHttpRequest;he.open(S.method.toUpperCase(),S.url,!0),he.timeout=S.timeout;function Be(){if(!he)return;const be=AxiosHeaders.from("getAllResponseHeaders"in he&&he.getAllResponseHeaders()),Fe={data:!M||M==="text"||M==="json"?he.responseText:he.response,status:he.status,statusText:he.statusText,headers:be,config:d,request:he};settle(function(ve){f(ve),ge()},function(ve){_(ve),ge()},Fe),he=null}"onloadend"in he?he.onloadend=Be:he.onreadystatechange=function(){!he||he.readyState!==4||he.status===0&&!(he.responseURL&&he.responseURL.indexOf("file:")===0)||setTimeout(Be)},he.onabort=function(){he&&(_(new AxiosError("Request aborted",AxiosError.ECONNABORTED,d,he)),he=null)},he.onerror=function(){_(new AxiosError("Network Error",AxiosError.ERR_NETWORK,d,he)),he=null},he.ontimeout=function(){let Re=S.timeout?"timeout of "+S.timeout+"ms exceeded":"timeout exceeded";const Fe=S.transitional||transitionalDefaults;S.timeoutErrorMessage&&(Re=S.timeoutErrorMessage),_(new AxiosError(Re,Fe.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,d,he)),he=null},T===void 0&&F.setContentType(null),"setRequestHeader"in he&&utils$1.forEach(F.toJSON(),function(Re,Fe){he.setRequestHeader(Fe,Re)}),utils$1.isUndefined(S.withCredentials)||(he.withCredentials=!!S.withCredentials),M&&M!=="json"&&(he.responseType=S.responseType),H&&([oe,ae]=progressEventReducer(H,!0),he.addEventListener("progress",oe)),P&&he.upload&&([K,se]=progressEventReducer(P),he.upload.addEventListener("progress",K),he.upload.addEventListener("loadend",se)),(S.cancelToken||S.signal)&&(J=be=>{he&&(_(!be||be.type?new CanceledError(null,d,he):be),he.abort(),he=null)},S.cancelToken&&S.cancelToken.subscribe(J),S.signal&&(S.signal.aborted?J():S.signal.addEventListener("abort",J)));const pe=parseProtocol(S.url);if(pe&&platform.protocols.indexOf(pe)===-1){_(new AxiosError("Unsupported protocol "+pe+":",AxiosError.ERR_BAD_REQUEST,d));return}he.send(T||null)})},composeSignals=(d,s)=>{const{length:f}=d=d?d.filter(Boolean):[];if(s||f){let _=new AbortController,S;const T=function(H){if(!S){S=!0,M();const J=H instanceof Error?H:this.reason;_.abort(J instanceof AxiosError?J:new CanceledError(J instanceof Error?J.message:J))}};let F=s&&setTimeout(()=>{F=null,T(new AxiosError(`timeout ${s} of ms exceeded`,AxiosError.ETIMEDOUT))},s);const M=()=>{d&&(F&&clearTimeout(F),F=null,d.forEach(H=>{H.unsubscribe?H.unsubscribe(T):H.removeEventListener("abort",T)}),d=null)};d.forEach(H=>H.addEventListener("abort",T));const{signal:P}=_;return P.unsubscribe=()=>utils$1.asap(M),P}},streamChunk=function*(d,s){let f=d.byteLength;if(f<s){yield d;return}let _=0,S;for(;_<f;)S=_+s,yield d.slice(_,S),_=S},readBytes=async function*(d,s){for await(const f of readStream(d))yield*streamChunk(f,s)},readStream=async function*(d){if(d[Symbol.asyncIterator]){yield*d;return}const s=d.getReader();try{for(;;){const{done:f,value:_}=await s.read();if(f)break;yield _}}finally{await s.cancel()}},trackStream=(d,s,f,_)=>{const S=readBytes(d,s);let T=0,F,M=P=>{F||(F=!0,_&&_(P))};return new ReadableStream({async pull(P){try{const{done:H,value:J}=await S.next();if(H){M(),P.close();return}let K=J.byteLength;if(f){let oe=T+=K;f(oe)}P.enqueue(new Uint8Array(J))}catch(H){throw M(H),H}},cancel(P){return M(P),S.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(d=>s=>d.encode(s))(new TextEncoder):async d=>new Uint8Array(await new Response(d).arrayBuffer())),test=(d,...s)=>{try{return!!d(...s)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let d=!1;const s=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return d=!0,"half"}}).headers.has("Content-Type");return d&&!s}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(d=>d.body)};isFetchSupported&&(d=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!resolvers[s]&&(resolvers[s]=utils$1.isFunction(d[s])?f=>f[s]():(f,_)=>{throw new AxiosError(`Response type '${s}' is not supported`,AxiosError.ERR_NOT_SUPPORT,_)})})})(new Response);const getBodyLength=async d=>{if(d==null)return 0;if(utils$1.isBlob(d))return d.size;if(utils$1.isSpecCompliantForm(d))return(await new Request(platform.origin,{method:"POST",body:d}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(d)||utils$1.isArrayBuffer(d))return d.byteLength;if(utils$1.isURLSearchParams(d)&&(d=d+""),utils$1.isString(d))return(await encodeText(d)).byteLength},resolveBodyLength=async(d,s)=>{const f=utils$1.toFiniteNumber(d.getContentLength());return f??getBodyLength(s)},fetchAdapter=isFetchSupported&&(async d=>{let{url:s,method:f,data:_,signal:S,cancelToken:T,timeout:F,onDownloadProgress:M,onUploadProgress:P,responseType:H,headers:J,withCredentials:K="same-origin",fetchOptions:oe}=resolveConfig(d);H=H?(H+"").toLowerCase():"text";let se=composeSignals([S,T&&T.toAbortSignal()],F),ae;const ge=se&&se.unsubscribe&&(()=>{se.unsubscribe()});let he;try{if(P&&supportsRequestStream&&f!=="get"&&f!=="head"&&(he=await resolveBodyLength(J,_))!==0){let Fe=new Request(s,{method:"POST",body:_,duplex:"half"}),Me;if(utils$1.isFormData(_)&&(Me=Fe.headers.get("content-type"))&&J.setContentType(Me),Fe.body){const[ve,At]=progressEventDecorator(he,progressEventReducer(asyncDecorator(P)));_=trackStream(Fe.body,DEFAULT_CHUNK_SIZE,ve,At)}}utils$1.isString(K)||(K=K?"include":"omit");const Be="credentials"in Request.prototype;ae=new Request(s,{...oe,signal:se,method:f.toUpperCase(),headers:J.normalize().toJSON(),body:_,duplex:"half",credentials:Be?K:void 0});let pe=await fetch(ae);const be=supportsResponseStream&&(H==="stream"||H==="response");if(supportsResponseStream&&(M||be&&ge)){const Fe={};["status","statusText","headers"].forEach(Ct=>{Fe[Ct]=pe[Ct]});const Me=utils$1.toFiniteNumber(pe.headers.get("content-length")),[ve,At]=M&&progressEventDecorator(Me,progressEventReducer(asyncDecorator(M),!0))||[];pe=new Response(trackStream(pe.body,DEFAULT_CHUNK_SIZE,ve,()=>{At&&At(),ge&&ge()}),Fe)}H=H||"text";let Re=await resolvers[utils$1.findKey(resolvers,H)||"text"](pe,d);return!be&&ge&&ge(),await new Promise((Fe,Me)=>{settle(Fe,Me,{data:Re,headers:AxiosHeaders.from(pe.headers),status:pe.status,statusText:pe.statusText,config:d,request:ae})})}catch(Be){throw ge&&ge(),Be&&Be.name==="TypeError"&&/fetch/i.test(Be.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,d,ae),{cause:Be.cause||Be}):AxiosError.from(Be,Be&&Be.code,d,ae)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(d,s)=>{if(d){try{Object.defineProperty(d,"name",{value:s})}catch{}Object.defineProperty(d,"adapterName",{value:s})}});const renderReason=d=>`- ${d}`,isResolvedHandle=d=>utils$1.isFunction(d)||d===null||d===!1,adapters={getAdapter:d=>{d=utils$1.isArray(d)?d:[d];const{length:s}=d;let f,_;const S={};for(let T=0;T<s;T++){f=d[T];let F;if(_=f,!isResolvedHandle(f)&&(_=knownAdapters[(F=String(f)).toLowerCase()],_===void 0))throw new AxiosError(`Unknown adapter '${F}'`);if(_)break;S[F||"#"+T]=_}if(!_){const T=Object.entries(S).map(([M,P])=>`adapter ${M} `+(P===!1?"is not supported by the environment":"is not available in the build"));let F=s?T.length>1?`since :
`+T.map(renderReason).join(`
`):" "+renderReason(T[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+F,"ERR_NOT_SUPPORT")}return _},adapters:knownAdapters};function throwIfCancellationRequested(d){if(d.cancelToken&&d.cancelToken.throwIfRequested(),d.signal&&d.signal.aborted)throw new CanceledError(null,d)}function dispatchRequest(d){return throwIfCancellationRequested(d),d.headers=AxiosHeaders.from(d.headers),d.data=transformData.call(d,d.transformRequest),["post","put","patch"].indexOf(d.method)!==-1&&d.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(d.adapter||defaults.adapter)(d).then(function(_){return throwIfCancellationRequested(d),_.data=transformData.call(d,d.transformResponse,_),_.headers=AxiosHeaders.from(_.headers),_},function(_){return isCancel(_)||(throwIfCancellationRequested(d),_&&_.response&&(_.response.data=transformData.call(d,d.transformResponse,_.response),_.response.headers=AxiosHeaders.from(_.response.headers))),Promise.reject(_)})}const VERSION="1.7.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((d,s)=>{validators$1[d]=function(_){return typeof _===d||"a"+(s<1?"n ":" ")+d}});const deprecatedWarnings={};validators$1.transitional=function d(s,f,_){function S(T,F){return"[Axios v"+VERSION+"] Transitional option '"+T+"'"+F+(_?". "+_:"")}return(T,F,M)=>{if(s===!1)throw new AxiosError(S(F," has been removed"+(f?" in "+f:"")),AxiosError.ERR_DEPRECATED);return f&&!deprecatedWarnings[F]&&(deprecatedWarnings[F]=!0,console.warn(S(F," has been deprecated since v"+f+" and will be removed in the near future"))),s?s(T,F,M):!0}};function assertOptions(d,s,f){if(typeof d!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const _=Object.keys(d);let S=_.length;for(;S-- >0;){const T=_[S],F=s[T];if(F){const M=d[T],P=M===void 0||F(M,T,d);if(P!==!0)throw new AxiosError("option "+T+" must be "+P,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(f!==!0)throw new AxiosError("Unknown option "+T,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(s){this.defaults=s,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(s,f){try{return await this._request(s,f)}catch(_){if(_ instanceof Error){let S;Error.captureStackTrace?Error.captureStackTrace(S={}):S=new Error;const T=S.stack?S.stack.replace(/^.+\n/,""):"";try{_.stack?T&&!String(_.stack).endsWith(T.replace(/^.+\n.+\n/,""))&&(_.stack+=`
`+T):_.stack=T}catch{}}throw _}}_request(s,f){typeof s=="string"?(f=f||{},f.url=s):f=s||{},f=mergeConfig(this.defaults,f);const{transitional:_,paramsSerializer:S,headers:T}=f;_!==void 0&&validator.assertOptions(_,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),S!=null&&(utils$1.isFunction(S)?f.paramsSerializer={serialize:S}:validator.assertOptions(S,{encode:validators.function,serialize:validators.function},!0)),f.method=(f.method||this.defaults.method||"get").toLowerCase();let F=T&&utils$1.merge(T.common,T[f.method]);T&&utils$1.forEach(["delete","get","head","post","put","patch","common"],ae=>{delete T[ae]}),f.headers=AxiosHeaders.concat(F,T);const M=[];let P=!0;this.interceptors.request.forEach(function(ge){typeof ge.runWhen=="function"&&ge.runWhen(f)===!1||(P=P&&ge.synchronous,M.unshift(ge.fulfilled,ge.rejected))});const H=[];this.interceptors.response.forEach(function(ge){H.push(ge.fulfilled,ge.rejected)});let J,K=0,oe;if(!P){const ae=[dispatchRequest.bind(this),void 0];for(ae.unshift.apply(ae,M),ae.push.apply(ae,H),oe=ae.length,J=Promise.resolve(f);K<oe;)J=J.then(ae[K++],ae[K++]);return J}oe=M.length;let se=f;for(K=0;K<oe;){const ae=M[K++],ge=M[K++];try{se=ae(se)}catch(he){ge.call(this,he);break}}try{J=dispatchRequest.call(this,se)}catch(ae){return Promise.reject(ae)}for(K=0,oe=H.length;K<oe;)J=J.then(H[K++],H[K++]);return J}getUri(s){s=mergeConfig(this.defaults,s);const f=buildFullPath(s.baseURL,s.url);return buildURL(f,s.params,s.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function d(s){Axios.prototype[s]=function(f,_){return this.request(mergeConfig(_||{},{method:s,url:f,data:(_||{}).data}))}});utils$1.forEach(["post","put","patch"],function d(s){function f(_){return function(T,F,M){return this.request(mergeConfig(M||{},{method:s,headers:_?{"Content-Type":"multipart/form-data"}:{},url:T,data:F}))}}Axios.prototype[s]=f(),Axios.prototype[s+"Form"]=f(!0)});class CancelToken{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let f;this.promise=new Promise(function(T){f=T});const _=this;this.promise.then(S=>{if(!_._listeners)return;let T=_._listeners.length;for(;T-- >0;)_._listeners[T](S);_._listeners=null}),this.promise.then=S=>{let T;const F=new Promise(M=>{_.subscribe(M),T=M}).then(S);return F.cancel=function(){_.unsubscribe(T)},F},s(function(T,F,M){_.reason||(_.reason=new CanceledError(T,F,M),f(_.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const f=this._listeners.indexOf(s);f!==-1&&this._listeners.splice(f,1)}toAbortSignal(){const s=new AbortController,f=_=>{s.abort(_)};return this.subscribe(f),s.signal.unsubscribe=()=>this.unsubscribe(f),s.signal}static source(){let s;return{token:new CancelToken(function(S){s=S}),cancel:s}}}function spread(d){return function(f){return d.apply(null,f)}}function isAxiosError(d){return utils$1.isObject(d)&&d.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([d,s])=>{HttpStatusCode[s]=d});function createInstance(d){const s=new Axios(d),f=bind(Axios.prototype.request,s);return utils$1.extend(f,Axios.prototype,s,{allOwnKeys:!0}),utils$1.extend(f,s,null,{allOwnKeys:!0}),f.create=function(S){return createInstance(mergeConfig(d,S))},f}const axios=createInstance(defaults);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function d(s){return Promise.all(s)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders;axios.formToJSON=d=>formDataToJSON(utils$1.isHTMLForm(d)?new FormData(d):d);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode;axios.default=axios;const ColumnPreview=({columnNames:d,columnTypes:s,secondRowValues:f})=>{const[_,S]=reactExports.useState(""),T=d.map((F,M)=>({name:F,type:s[M],value:f[M]})).filter(F=>F.name.toLowerCase().includes(_.toLowerCase()));return jsxRuntimeExports.jsxs("div",{className:"border border-gray-300 rounded-lg shadow-md dark:border-gray-700 w-full mx-10",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-gray-100 dark:bg-gray-900",children:jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded dark:border-gray-700 dark:bg-gray-800 dark:text-white",placeholder:"Search column names...",value:_,onChange:F=>S(F.target.value)})}),jsxRuntimeExports.jsx("div",{className:"overflow-y-auto h-80 w-full",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0 z-10",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Column Name"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Column Type"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Second Row Value"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:T.length>0?T.map((F,M)=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 select-text",children:F.name}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 select-text",children:F.type}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 select-text",children:F.value})]},M)):jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No columns match your search."})})})]})})]})};var $e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function et(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var We={exports:{}},ie={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ht;function $a(){if(Ht)return ie;Ht=1;var d=React,s=Symbol.for("react.element"),f=Symbol.for("react.fragment"),_=Object.prototype.hasOwnProperty,S=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,T={key:!0,ref:!0,__self:!0,__source:!0};function F(M,P,H){var J,K={},oe=null,se=null;H!==void 0&&(oe=""+H),P.key!==void 0&&(oe=""+P.key),P.ref!==void 0&&(se=P.ref);for(J in P)_.call(P,J)&&!T.hasOwnProperty(J)&&(K[J]=P[J]);if(M&&M.defaultProps)for(J in P=M.defaultProps,P)K[J]===void 0&&(K[J]=P[J]);return{$$typeof:s,type:M,key:oe,ref:se,props:K,_owner:S.current}}return ie.Fragment=f,ie.jsx=F,ie.jsxs=F,ie}We.exports=$a();var b$1=We.exports;const Jt=":@",Ee="#text",tt="#comment",rt="#cdata",Jr="DECLARATION_TAG",Ta="TAG",Ye={tagColor:"#d43900",textColor:"#333",attributeKeyColor:"#2a7ab0",attributeValueColor:"#008000",separatorColor:"#333",commentColor:"#aaa",cdataColor:"#1d781d",fontFamily:"monospace"},ma={theme:Ye,collapsible:!1,indentSize:2},Zr=reactExports.createContext(ma),G=()=>reactExports.useContext(Zr);var nt={},we={};(function(d){const s=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",f=s+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",_="["+s+"]["+f+"]*",S=new RegExp("^"+_+"$"),T=function(M,P){const H=[];let J=P.exec(M);for(;J;){const K=[];K.startIndex=P.lastIndex-J[0].length;const oe=J.length;for(let se=0;se<oe;se++)K.push(J[se]);H.push(K),J=P.exec(M)}return H},F=function(M){const P=S.exec(M);return!(P===null||typeof P>"u")};d.isExist=function(M){return typeof M<"u"},d.isEmptyObject=function(M){return Object.keys(M).length===0},d.merge=function(M,P,H){if(P){const J=Object.keys(P),K=J.length;for(let oe=0;oe<K;oe++)H==="strict"?M[J[oe]]=[P[J[oe]]]:M[J[oe]]=P[J[oe]]}},d.getValue=function(M){return d.isExist(M)?M:""},d.isName=F,d.getAllMatches=T,d.nameRegexp=_})(we);const at=we,Ea={allowBooleanAttributes:!1,unpairedTags:[]};nt.validate=function(d,s){s=Object.assign({},Ea,s);const f=[];let _=!1,S=!1;d[0]==="\uFEFF"&&(d=d.substr(1));for(let T=0;T<d.length;T++)if(d[T]==="<"&&d[T+1]==="?"){if(T+=2,T=Qt(d,T),T.err)return T}else if(d[T]==="<"){let F=T;if(T++,d[T]==="!"){T=Dt(d,T);continue}else{let M=!1;d[T]==="/"&&(M=!0,T++);let P="";for(;T<d.length&&d[T]!==">"&&d[T]!==" "&&d[T]!=="	"&&d[T]!==`
`&&d[T]!=="\r";T++)P+=d[T];if(P=P.trim(),P[P.length-1]==="/"&&(P=P.substring(0,P.length-1),T--),!xa(P)){let K;return P.trim().length===0?K="Invalid space after '<'.":K="Tag '"+P+"' is an invalid name.",j("InvalidTag",K,R(d,T))}const H=Ca(d,T);if(H===!1)return j("InvalidAttr","Attributes for '"+P+"' have open quote.",R(d,T));let J=H.value;if(T=H.index,J[J.length-1]==="/"){const K=T-J.length;J=J.substring(0,J.length-1);const oe=er(J,s);if(oe===!0)_=!0;else return j(oe.err.code,oe.err.msg,R(d,K+oe.err.line))}else if(M)if(H.tagClosed){if(J.trim().length>0)return j("InvalidTag","Closing tag '"+P+"' can't have attributes or invalid starting.",R(d,F));{const K=f.pop();if(P!==K.tagName){let oe=R(d,K.tagStartPos);return j("InvalidTag","Expected closing tag '"+K.tagName+"' (opened in line "+oe.line+", col "+oe.col+") instead of closing tag '"+P+"'.",R(d,F))}f.length==0&&(S=!0)}}else return j("InvalidTag","Closing tag '"+P+"' doesn't have proper closing.",R(d,T));else{const K=er(J,s);if(K!==!0)return j(K.err.code,K.err.msg,R(d,T-J.length+K.err.line));if(S===!0)return j("InvalidXml","Multiple possible root nodes found.",R(d,T));s.unpairedTags.indexOf(P)!==-1||f.push({tagName:P,tagStartPos:F}),_=!0}for(T++;T<d.length;T++)if(d[T]==="<")if(d[T+1]==="!"){T++,T=Dt(d,T);continue}else if(d[T+1]==="?"){if(T=Qt(d,++T),T.err)return T}else break;else if(d[T]==="&"){const K=Pa(d,T);if(K==-1)return j("InvalidChar","char '&' is not expected.",R(d,T));T=K}else if(S===!0&&!Zt(d[T]))return j("InvalidXml","Extra text at the end",R(d,T));d[T]==="<"&&T--}}else{if(Zt(d[T]))continue;return j("InvalidChar","char '"+d[T]+"' is not expected.",R(d,T))}if(_){if(f.length==1)return j("InvalidTag","Unclosed tag '"+f[0].tagName+"'.",R(d,f[0].tagStartPos));if(f.length>0)return j("InvalidXml","Invalid '"+JSON.stringify(f.map(T=>T.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return j("InvalidXml","Start tag expected.",1);return!0};function Zt(d){return d===" "||d==="	"||d===`
`||d==="\r"}function Qt(d,s){const f=s;for(;s<d.length;s++)if(d[s]=="?"||d[s]==" "){const _=d.substr(f,s-f);if(s>5&&_==="xml")return j("InvalidXml","XML declaration allowed only at the start of the document.",R(d,s));if(d[s]=="?"&&d[s+1]==">"){s++;break}else continue}return s}function Dt(d,s){if(d.length>s+5&&d[s+1]==="-"&&d[s+2]==="-"){for(s+=3;s<d.length;s++)if(d[s]==="-"&&d[s+1]==="-"&&d[s+2]===">"){s+=2;break}}else if(d.length>s+8&&d[s+1]==="D"&&d[s+2]==="O"&&d[s+3]==="C"&&d[s+4]==="T"&&d[s+5]==="Y"&&d[s+6]==="P"&&d[s+7]==="E"){let f=1;for(s+=8;s<d.length;s++)if(d[s]==="<")f++;else if(d[s]===">"&&(f--,f===0))break}else if(d.length>s+9&&d[s+1]==="["&&d[s+2]==="C"&&d[s+3]==="D"&&d[s+4]==="A"&&d[s+5]==="T"&&d[s+6]==="A"&&d[s+7]==="["){for(s+=8;s<d.length;s++)if(d[s]==="]"&&d[s+1]==="]"&&d[s+2]===">"){s+=2;break}}return s}const Aa='"',Oa="'";function Ca(d,s){let f="",_="",S=!1;for(;s<d.length;s++){if(d[s]===Aa||d[s]===Oa)_===""?_=d[s]:_!==d[s]||(_="");else if(d[s]===">"&&_===""){S=!0;break}f+=d[s]}return _!==""?!1:{value:f,index:s,tagClosed:S}}const Na=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function er(d,s){const f=at.getAllMatches(d,Na),_={};for(let S=0;S<f.length;S++){if(f[S][1].length===0)return j("InvalidAttr","Attribute '"+f[S][2]+"' has no space in starting.",ue(f[S]));if(f[S][3]!==void 0&&f[S][4]===void 0)return j("InvalidAttr","Attribute '"+f[S][2]+"' is without value.",ue(f[S]));if(f[S][3]===void 0&&!s.allowBooleanAttributes)return j("InvalidAttr","boolean attribute '"+f[S][2]+"' is not allowed.",ue(f[S]));const T=f[S][2];if(!Sa(T))return j("InvalidAttr","Attribute '"+T+"' is an invalid name.",ue(f[S]));if(!_.hasOwnProperty(T))_[T]=1;else return j("InvalidAttr","Attribute '"+T+"' is repeated.",ue(f[S]))}return!0}function wa(d,s){let f=/\d/;for(d[s]==="x"&&(s++,f=/[\da-fA-F]/);s<d.length;s++){if(d[s]===";")return s;if(!d[s].match(f))break}return-1}function Pa(d,s){if(s++,d[s]===";")return-1;if(d[s]==="#")return s++,wa(d,s);let f=0;for(;s<d.length;s++,f++)if(!(d[s].match(/\w/)&&f<20)){if(d[s]===";")break;return-1}return s}function j(d,s,f){return{err:{code:d,msg:s,line:f.line||f,col:f.col}}}function Sa(d){return at.isName(d)}function xa(d){return at.isName(d)}function R(d,s){const f=d.substring(0,s).split(/\r?\n/);return{line:f.length,col:f[f.length-1].length+1}}function ue(d){return d.startIndex+d[1].length}var st={};const Qr={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(d,s){return s},attributeValueProcessor:function(d,s){return s},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(d,s,f){return d}},ja=function(d){return Object.assign({},Qr,d)};st.buildOptions=ja;st.defaultOptions=Qr;class Ia{constructor(s){this.tagname=s,this.child=[],this[":@"]={}}add(s,f){s==="__proto__"&&(s="#__proto__"),this.child.push({[s]:f})}addChild(s){s.tagname==="__proto__"&&(s.tagname="#__proto__"),s[":@"]&&Object.keys(s[":@"]).length>0?this.child.push({[s.tagname]:s.child,":@":s[":@"]}):this.child.push({[s.tagname]:s.child})}}var Ra=Ia;const Fa=we;function La(d,s){const f={};if(d[s+3]==="O"&&d[s+4]==="C"&&d[s+5]==="T"&&d[s+6]==="Y"&&d[s+7]==="P"&&d[s+8]==="E"){s=s+9;let _=1,S=!1,T=!1,F="";for(;s<d.length;s++)if(d[s]==="<"&&!T){if(S&&Ga(d,s))s+=7,[entityName,val,s]=Ma(d,s+1),val.indexOf("&")===-1&&(f[Ka(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(S&&Va(d,s))s+=8;else if(S&&Ua(d,s))s+=8;else if(S&&ka(d,s))s+=9;else if(Ba)T=!0;else throw new Error("Invalid DOCTYPE");_++,F=""}else if(d[s]===">"){if(T?d[s-1]==="-"&&d[s-2]==="-"&&(T=!1,_--):_--,_===0)break}else d[s]==="["?S=!0:F+=d[s];if(_!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:f,i:s}}function Ma(d,s){let f="";for(;s<d.length&&d[s]!=="'"&&d[s]!=='"';s++)f+=d[s];if(f=f.trim(),f.indexOf(" ")!==-1)throw new Error("External entites are not supported");const _=d[s++];let S="";for(;s<d.length&&d[s]!==_;s++)S+=d[s];return[f,S,s]}function Ba(d,s){return d[s+1]==="!"&&d[s+2]==="-"&&d[s+3]==="-"}function Ga(d,s){return d[s+1]==="!"&&d[s+2]==="E"&&d[s+3]==="N"&&d[s+4]==="T"&&d[s+5]==="I"&&d[s+6]==="T"&&d[s+7]==="Y"}function Va(d,s){return d[s+1]==="!"&&d[s+2]==="E"&&d[s+3]==="L"&&d[s+4]==="E"&&d[s+5]==="M"&&d[s+6]==="E"&&d[s+7]==="N"&&d[s+8]==="T"}function Ua(d,s){return d[s+1]==="!"&&d[s+2]==="A"&&d[s+3]==="T"&&d[s+4]==="T"&&d[s+5]==="L"&&d[s+6]==="I"&&d[s+7]==="S"&&d[s+8]==="T"}function ka(d,s){return d[s+1]==="!"&&d[s+2]==="N"&&d[s+3]==="O"&&d[s+4]==="T"&&d[s+5]==="A"&&d[s+6]==="T"&&d[s+7]==="I"&&d[s+8]==="O"&&d[s+9]==="N"}function Ka(d){if(Fa.isName(d))return d;throw new Error(`Invalid entity name ${d}`)}var Xa=La;const Wa=/^[-+]?0x[a-fA-F0-9]+$/,Ya=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const qa={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Ha(d,s={}){if(s=Object.assign({},qa,s),!d||typeof d!="string")return d;let f=d.trim();if(s.skipLike!==void 0&&s.skipLike.test(f))return d;if(s.hex&&Wa.test(f))return Number.parseInt(f,16);{const _=Ya.exec(f);if(_){const S=_[1],T=_[2];let F=za(_[3]);const M=_[4]||_[6];if(!s.leadingZeros&&T.length>0&&S&&f[2]!=="."||!s.leadingZeros&&T.length>0&&!S&&f[1]!==".")return d;{const P=Number(f),H=""+P;return H.search(/[eE]/)!==-1||M?s.eNotation?P:d:f.indexOf(".")!==-1?H==="0"&&F===""||H===F||S&&H==="-"+F?P:d:T?F===H||S+F===H?P:d:f===H||f===S+H?P:d}}else return d}}function za(d){return d&&d.indexOf(".")!==-1&&(d=d.replace(/0+$/,""),d==="."?d="0":d[0]==="."?d="0"+d:d[d.length-1]==="."&&(d=d.substr(0,d.length-1))),d}var Ja=Ha;const it=we,le=Ra,Za=Xa,Qa=Ja;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,it.nameRegexp);let Da=class{constructor(d){this.options=d,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=es,this.parseXml=ss,this.parseTextData=ts,this.resolveNameSpace=rs,this.buildAttributesMap=as,this.isItStopNode=ls,this.replaceEntitiesValue=os,this.readStopNodeData=fs,this.saveTextToParentTag=us,this.addChild=is}};function es(d){const s=Object.keys(d);for(let f=0;f<s.length;f++){const _=s[f];this.lastEntities[_]={regex:new RegExp("&"+_+";","g"),val:d[_]}}}function ts(d,s,f,_,S,T,F){if(d!==void 0&&(this.options.trimValues&&!_&&(d=d.trim()),d.length>0)){F||(d=this.replaceEntitiesValue(d));const M=this.options.tagValueProcessor(s,d,f,S,T);return M==null?d:typeof M!=typeof d||M!==d?M:this.options.trimValues?He(d,this.options.parseTagValue,this.options.numberParseOptions):d.trim()===d?He(d,this.options.parseTagValue,this.options.numberParseOptions):d}}function rs(d){if(this.options.removeNSPrefix){const s=d.split(":"),f=d.charAt(0)==="/"?"/":"";if(s[0]==="xmlns")return"";s.length===2&&(d=f+s[1])}return d}const ns=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function as(d,s,f){if(!this.options.ignoreAttributes&&typeof d=="string"){const _=it.getAllMatches(d,ns),S=_.length,T={};for(let F=0;F<S;F++){const M=this.resolveNameSpace(_[F][1]);let P=_[F][4],H=this.options.attributeNamePrefix+M;if(M.length)if(this.options.transformAttributeName&&(H=this.options.transformAttributeName(H)),H==="__proto__"&&(H="#__proto__"),P!==void 0){this.options.trimValues&&(P=P.trim()),P=this.replaceEntitiesValue(P);const J=this.options.attributeValueProcessor(M,P,s);J==null?T[H]=P:typeof J!=typeof P||J!==P?T[H]=J:T[H]=He(P,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(T[H]=!0)}if(!Object.keys(T).length)return;if(this.options.attributesGroupName){const F={};return F[this.options.attributesGroupName]=T,F}return T}}const ss=function(d){d=d.replace(/\r\n?/g,`
`);const s=new le("!xml");let f=s,_="",S="";for(let T=0;T<d.length;T++)if(d[T]==="<")if(d[T+1]==="/"){const F=W(d,">",T,"Closing Tag is not closed.");let M=d.substring(T+2,F).trim();if(this.options.removeNSPrefix){const J=M.indexOf(":");J!==-1&&(M=M.substr(J+1))}this.options.transformTagName&&(M=this.options.transformTagName(M)),f&&(_=this.saveTextToParentTag(_,f,S));const P=S.substring(S.lastIndexOf(".")+1);if(M&&this.options.unpairedTags.indexOf(M)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${M}>`);let H=0;P&&this.options.unpairedTags.indexOf(P)!==-1?(H=S.lastIndexOf(".",S.lastIndexOf(".")-1),this.tagsNodeStack.pop()):H=S.lastIndexOf("."),S=S.substring(0,H),f=this.tagsNodeStack.pop(),_="",T=F}else if(d[T+1]==="?"){let F=qe(d,T,!1,"?>");if(!F)throw new Error("Pi Tag is not closed.");if(_=this.saveTextToParentTag(_,f,S),!(this.options.ignoreDeclaration&&F.tagName==="?xml"||this.options.ignorePiTags)){const M=new le(F.tagName);M.add(this.options.textNodeName,""),F.tagName!==F.tagExp&&F.attrExpPresent&&(M[":@"]=this.buildAttributesMap(F.tagExp,S,F.tagName)),this.addChild(f,M,S)}T=F.closeIndex+1}else if(d.substr(T+1,3)==="!--"){const F=W(d,"-->",T+4,"Comment is not closed.");if(this.options.commentPropName){const M=d.substring(T+4,F-2);_=this.saveTextToParentTag(_,f,S),f.add(this.options.commentPropName,[{[this.options.textNodeName]:M}])}T=F}else if(d.substr(T+1,2)==="!D"){const F=Za(d,T);this.docTypeEntities=F.entities,T=F.i}else if(d.substr(T+1,2)==="!["){const F=W(d,"]]>",T,"CDATA is not closed.")-2,M=d.substring(T+9,F);if(_=this.saveTextToParentTag(_,f,S),this.options.cdataPropName)f.add(this.options.cdataPropName,[{[this.options.textNodeName]:M}]);else{let P=this.parseTextData(M,f.tagname,S,!0,!1,!0);P==null&&(P=""),f.add(this.options.textNodeName,P)}T=F+2}else{let F=qe(d,T,this.options.removeNSPrefix),M=F.tagName,P=F.tagExp,H=F.attrExpPresent,J=F.closeIndex;this.options.transformTagName&&(M=this.options.transformTagName(M)),f&&_&&f.tagname!=="!xml"&&(_=this.saveTextToParentTag(_,f,S,!1));const K=f;if(K&&this.options.unpairedTags.indexOf(K.tagname)!==-1&&(f=this.tagsNodeStack.pop(),S=S.substring(0,S.lastIndexOf("."))),M!==s.tagname&&(S+=S?"."+M:M),this.isItStopNode(this.options.stopNodes,S,M)){let oe="";if(P.length>0&&P.lastIndexOf("/")===P.length-1)T=F.closeIndex;else if(this.options.unpairedTags.indexOf(M)!==-1)T=F.closeIndex;else{const ae=this.readStopNodeData(d,M,J+1);if(!ae)throw new Error(`Unexpected end of ${M}`);T=ae.i,oe=ae.tagContent}const se=new le(M);M!==P&&H&&(se[":@"]=this.buildAttributesMap(P,S,M)),oe&&(oe=this.parseTextData(oe,M,S,!0,H,!0,!0)),S=S.substr(0,S.lastIndexOf(".")),se.add(this.options.textNodeName,oe),this.addChild(f,se,S)}else{if(P.length>0&&P.lastIndexOf("/")===P.length-1){M[M.length-1]==="/"?(M=M.substr(0,M.length-1),P=M):P=P.substr(0,P.length-1),this.options.transformTagName&&(M=this.options.transformTagName(M));const oe=new le(M);M!==P&&H&&(oe[":@"]=this.buildAttributesMap(P,S,M)),this.addChild(f,oe,S),S=S.substr(0,S.lastIndexOf("."))}else{const oe=new le(M);this.tagsNodeStack.push(f),M!==P&&H&&(oe[":@"]=this.buildAttributesMap(P,S,M)),this.addChild(f,oe,S),f=oe}_="",T=J}}else _+=d[T];return s.child};function is(d,s,f){const _=this.options.updateTag(s.tagname,f,s[":@"]);_===!1||(typeof _=="string"&&(s.tagname=_),d.addChild(s))}const os=function(d){if(this.options.processEntities){for(let s in this.docTypeEntities){const f=this.docTypeEntities[s];d=d.replace(f.regx,f.val)}for(let s in this.lastEntities){const f=this.lastEntities[s];d=d.replace(f.regex,f.val)}if(this.options.htmlEntities)for(let s in this.htmlEntities){const f=this.htmlEntities[s];d=d.replace(f.regex,f.val)}d=d.replace(this.ampEntity.regex,this.ampEntity.val)}return d};function us(d,s,f,_){return d&&(_===void 0&&(_=Object.keys(s.child).length===0),d=this.parseTextData(d,s.tagname,f,!1,s[":@"]?Object.keys(s[":@"]).length!==0:!1,_),d!==void 0&&d!==""&&s.add(this.options.textNodeName,d),d=""),d}function ls(d,s,f){const _="*."+f;for(const S in d){const T=d[S];if(_===T||s===T)return!0}return!1}function cs(d,s,f=">"){let _,S="";for(let T=s;T<d.length;T++){let F=d[T];if(_)F===_&&(_="");else if(F==='"'||F==="'")_=F;else if(F===f[0])if(f[1]){if(d[T+1]===f[1])return{data:S,index:T}}else return{data:S,index:T};else F==="	"&&(F=" ");S+=F}}function W(d,s,f,_){const S=d.indexOf(s,f);if(S===-1)throw new Error(_);return S+s.length-1}function qe(d,s,f,_=">"){const S=cs(d,s+1,_);if(!S)return;let T=S.data;const F=S.index,M=T.search(/\s/);let P=T,H=!0;if(M!==-1&&(P=T.substr(0,M).replace(/\s\s*$/,""),T=T.substr(M+1)),f){const J=P.indexOf(":");J!==-1&&(P=P.substr(J+1),H=P!==S.data.substr(J+1))}return{tagName:P,tagExp:T,closeIndex:F,attrExpPresent:H}}function fs(d,s,f){const _=f;let S=1;for(;f<d.length;f++)if(d[f]==="<")if(d[f+1]==="/"){const T=W(d,">",f,`${s} is not closed`);if(d.substring(f+2,T).trim()===s&&(S--,S===0))return{tagContent:d.substring(_,f),i:T};f=T}else if(d[f+1]==="?")f=W(d,"?>",f+1,"StopNode is not closed.");else if(d.substr(f+1,3)==="!--")f=W(d,"-->",f+3,"StopNode is not closed.");else if(d.substr(f+1,2)==="![")f=W(d,"]]>",f,"StopNode is not closed.")-2;else{const T=qe(d,f,">");T&&((T&&T.tagName)===s&&T.tagExp[T.tagExp.length-1]!=="/"&&S++,f=T.closeIndex)}}function He(d,s,f){if(s&&typeof d=="string"){const _=d.trim();return _==="true"?!0:_==="false"?!1:Qa(d,f)}else return it.isExist(d)?d:""}var ds=Da,Dr={};function ps(d,s){return en(d,s)}function en(d,s,f){let _;const S={};for(let T=0;T<d.length;T++){const F=d[T],M=gs(F);let P="";if(f===void 0?P=M:P=f+"."+M,M===s.textNodeName)_===void 0?_=F[M]:_+=""+F[M];else{if(M===void 0)continue;if(F[M]){let H=en(F[M],s,P);const J=vs(H,s);F[":@"]?hs(H,F[":@"],P,s):Object.keys(H).length===1&&H[s.textNodeName]!==void 0&&!s.alwaysCreateTextNode?H=H[s.textNodeName]:Object.keys(H).length===0&&(s.alwaysCreateTextNode?H[s.textNodeName]="":H=""),S[M]!==void 0&&S.hasOwnProperty(M)?(Array.isArray(S[M])||(S[M]=[S[M]]),S[M].push(H)):s.isArray(M,P,J)?S[M]=[H]:S[M]=H}}}return typeof _=="string"?_.length>0&&(S[s.textNodeName]=_):_!==void 0&&(S[s.textNodeName]=_),S}function gs(d){const s=Object.keys(d);for(let f=0;f<s.length;f++){const _=s[f];if(_!==":@")return _}}function hs(d,s,f,_){if(s){const S=Object.keys(s),T=S.length;for(let F=0;F<T;F++){const M=S[F];_.isArray(M,f+"."+M,!0,!0)?d[M]=[s[M]]:d[M]=s[M]}}}function vs(d,s){const{textNodeName:f}=s,_=Object.keys(d).length;return!!(_===0||_===1&&(d[f]||typeof d[f]=="boolean"||d[f]===0))}Dr.prettify=ps;const{buildOptions:bs}=st,ys=ds,{prettify:$s}=Dr,_s=nt;let Ts=class{constructor(d){this.externalEntities={},this.options=bs(d)}parse(d,s){if(typeof d!="string")if(d.toString)d=d.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(s){s===!0&&(s={});const S=_s.validate(d,s);if(S!==!0)throw Error(`${S.err.msg}:${S.err.line}:${S.err.col}`)}const f=new ys(this.options);f.addExternalEntities(this.externalEntities);const _=f.parseXml(d);return this.options.preserveOrder||_===void 0?_:$s(_,this.options)}addEntity(d,s){if(s.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(d.indexOf("&")!==-1||d.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(s==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[d]=s}};var ms=Ts;const Es=`
`;function As(d,s){let f="";return s.format&&s.indentBy.length>0&&(f=Es),tn(d,s,"",f)}function tn(d,s,f,_){let S="",T=!1;for(let F=0;F<d.length;F++){const M=d[F],P=Os(M);let H="";if(f.length===0?H=P:H=`${f}.${P}`,P===s.textNodeName){let ae=M[P];Cs(H,s)||(ae=s.tagValueProcessor(P,ae),ae=rn(ae,s)),T&&(S+=_),S+=ae,T=!1;continue}else if(P===s.cdataPropName){T&&(S+=_),S+=`<![CDATA[${M[P][0][s.textNodeName]}]]>`,T=!1;continue}else if(P===s.commentPropName){S+=_+`<!--${M[P][0][s.textNodeName]}-->`,T=!0;continue}else if(P[0]==="?"){const ae=tr(M[":@"],s),ge=P==="?xml"?"":_;let he=M[P][0][s.textNodeName];he=he.length!==0?" "+he:"",S+=ge+`<${P}${he}${ae}?>`,T=!0;continue}let J=_;J!==""&&(J+=s.indentBy);const K=tr(M[":@"],s),oe=_+`<${P}${K}`,se=tn(M[P],s,H,J);s.unpairedTags.indexOf(P)!==-1?s.suppressUnpairedNode?S+=oe+">":S+=oe+"/>":(!se||se.length===0)&&s.suppressEmptyNode?S+=oe+"/>":se&&se.endsWith(">")?S+=oe+`>${se}${_}</${P}>`:(S+=oe+">",se&&_!==""&&(se.includes("/>")||se.includes("</"))?S+=_+s.indentBy+se+_:S+=se,S+=`</${P}>`),T=!0}return S}function Os(d){const s=Object.keys(d);for(let f=0;f<s.length;f++){const _=s[f];if(_!==":@")return _}}function tr(d,s){let f="";if(d&&!s.ignoreAttributes)for(let _ in d){let S=s.attributeValueProcessor(_,d[_]);S=rn(S,s),S===!0&&s.suppressBooleanAttributes?f+=` ${_.substr(s.attributeNamePrefix.length)}`:f+=` ${_.substr(s.attributeNamePrefix.length)}="${S}"`}return f}function Cs(d,s){d=d.substr(0,d.length-s.textNodeName.length-1);let f=d.substr(d.lastIndexOf(".")+1);for(let _ in s.stopNodes)if(s.stopNodes[_]===d||s.stopNodes[_]==="*."+f)return!0;return!1}function rn(d,s){if(d&&d.length>0&&s.processEntities)for(let f=0;f<s.entities.length;f++){const _=s.entities[f];d=d.replace(_.regex,_.val)}return d}var Ns=As;const ws=Ns,Ps={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(d,s){return s},attributeValueProcessor:function(d,s){return s},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function V(d){this.options=Object.assign({},Ps,d),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=js),this.processTextOrObjNode=Ss,this.options.format?(this.indentate=xs,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}V.prototype.build=function(d){return this.options.preserveOrder?ws(d,this.options):(Array.isArray(d)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(d={[this.options.arrayNodeName]:d}),this.j2x(d,0).val)};V.prototype.j2x=function(d,s){let f="",_="";for(let S in d)if(!(typeof d[S]>"u"))if(d[S]===null)S[0]==="?"?_+=this.indentate(s)+"<"+S+"?"+this.tagEndChar:_+=this.indentate(s)+"<"+S+"/"+this.tagEndChar;else if(d[S]instanceof Date)_+=this.buildTextValNode(d[S],S,"",s);else if(typeof d[S]!="object"){const T=this.isAttribute(S);if(T)f+=this.buildAttrPairStr(T,""+d[S]);else if(S===this.options.textNodeName){let F=this.options.tagValueProcessor(S,""+d[S]);_+=this.replaceEntitiesValue(F)}else _+=this.buildTextValNode(d[S],S,"",s)}else if(Array.isArray(d[S])){const T=d[S].length;let F="";for(let M=0;M<T;M++){const P=d[S][M];typeof P>"u"||(P===null?S[0]==="?"?_+=this.indentate(s)+"<"+S+"?"+this.tagEndChar:_+=this.indentate(s)+"<"+S+"/"+this.tagEndChar:typeof P=="object"?this.options.oneListGroup?F+=this.j2x(P,s+1).val:F+=this.processTextOrObjNode(P,S,s):F+=this.buildTextValNode(P,S,"",s))}this.options.oneListGroup&&(F=this.buildObjectNode(F,S,"",s)),_+=F}else if(this.options.attributesGroupName&&S===this.options.attributesGroupName){const T=Object.keys(d[S]),F=T.length;for(let M=0;M<F;M++)f+=this.buildAttrPairStr(T[M],""+d[S][T[M]])}else _+=this.processTextOrObjNode(d[S],S,s);return{attrStr:f,val:_}};V.prototype.buildAttrPairStr=function(d,s){return s=this.options.attributeValueProcessor(d,""+s),s=this.replaceEntitiesValue(s),this.options.suppressBooleanAttributes&&s==="true"?" "+d:" "+d+'="'+s+'"'};function Ss(d,s,f){const _=this.j2x(d,f+1);return d[this.options.textNodeName]!==void 0&&Object.keys(d).length===1?this.buildTextValNode(d[this.options.textNodeName],s,_.attrStr,f):this.buildObjectNode(_.val,s,_.attrStr,f)}V.prototype.buildObjectNode=function(d,s,f,_){if(d==="")return s[0]==="?"?this.indentate(_)+"<"+s+f+"?"+this.tagEndChar:this.indentate(_)+"<"+s+f+this.closeTag(s)+this.tagEndChar;{let S="</"+s+this.tagEndChar,T="";return s[0]==="?"&&(T="?",S=""),f&&d.indexOf("<")===-1?this.indentate(_)+"<"+s+f+T+">"+d+S:this.options.commentPropName!==!1&&s===this.options.commentPropName&&T.length===0?this.indentate(_)+`<!--${d}-->`+this.newLine:this.indentate(_)+"<"+s+f+T+this.tagEndChar+d+this.indentate(_)+S}};V.prototype.closeTag=function(d){let s="";return this.options.unpairedTags.indexOf(d)!==-1?this.options.suppressUnpairedNode||(s="/"):this.options.suppressEmptyNode?s="/":s=`></${d}`,s};V.prototype.buildTextValNode=function(d,s,f,_){if(this.options.cdataPropName!==!1&&s===this.options.cdataPropName)return this.indentate(_)+`<![CDATA[${d}]]>`+this.newLine;if(this.options.commentPropName!==!1&&s===this.options.commentPropName)return this.indentate(_)+`<!--${d}-->`+this.newLine;if(s[0]==="?")return this.indentate(_)+"<"+s+f+"?"+this.tagEndChar;{let S=this.options.tagValueProcessor(s,d);return S=this.replaceEntitiesValue(S),S===""?this.indentate(_)+"<"+s+f+this.closeTag(s)+this.tagEndChar:this.indentate(_)+"<"+s+f+">"+S+"</"+s+this.tagEndChar}};V.prototype.replaceEntitiesValue=function(d){if(d&&d.length>0&&this.options.processEntities)for(let s=0;s<this.options.entities.length;s++){const f=this.options.entities[s];d=d.replace(f.regex,f.val)}return d};function xs(d){return this.options.indentBy.repeat(d)}function js(d){return d.startsWith(this.options.attributeNamePrefix)?d.substr(this.attrPrefixLen):!1}var Is=V;const Rs=nt,Fs=ms,Ls=Is;var Ms={XMLParser:Fs,XMLValidator:Rs,XMLBuilder:Ls};const Bs=new Ms.XMLParser({preserveOrder:!0,ignoreAttributes:!1,attributeNamePrefix:"",allowBooleanAttributes:!0,commentPropName:tt,cdataPropName:rt,parseTagValue:!1});function Gs(d){return reactExports.useMemo(()=>{try{return{json:Bs.parse(d),valid:!0}}catch(s){return{json:null,valid:!1,errorMessage:`Fail to parse: ${s.message}`}}},[d])}function Vs(){this.__data__=[],this.size=0}var Us=Vs;function ks(d,s){return d===s||d!==d&&s!==s}var ot=ks,Ks=ot;function Xs(d,s){for(var f=d.length;f--;)if(Ks(d[f][0],s))return f;return-1}var Pe=Xs,Ws=Pe,Ys=Array.prototype,qs=Ys.splice;function Hs(d){var s=this.__data__,f=Ws(s,d);if(f<0)return!1;var _=s.length-1;return f==_?s.pop():qs.call(s,f,1),--this.size,!0}var zs=Hs,Js=Pe;function Zs(d){var s=this.__data__,f=Js(s,d);return f<0?void 0:s[f][1]}var Qs=Zs,Ds=Pe;function ei(d){return Ds(this.__data__,d)>-1}var ti=ei,ri=Pe;function ni(d,s){var f=this.__data__,_=ri(f,d);return _<0?(++this.size,f.push([d,s])):f[_][1]=s,this}var ai=ni,si=Us,ii=zs,oi=Qs,ui=ti,li=ai;function Z(d){var s=-1,f=d==null?0:d.length;for(this.clear();++s<f;){var _=d[s];this.set(_[0],_[1])}}Z.prototype.clear=si;Z.prototype.delete=ii;Z.prototype.get=oi;Z.prototype.has=ui;Z.prototype.set=li;var Se=Z,ci=Se;function fi(){this.__data__=new ci,this.size=0}var di=fi;function pi$3(d){var s=this.__data__,f=s.delete(d);return this.size=s.size,f}var gi=pi$3;function hi(d){return this.__data__.get(d)}var vi=hi;function bi(d){return this.__data__.has(d)}var yi=bi,$i=typeof $e=="object"&&$e&&$e.Object===Object&&$e,nn=$i,_i=nn,Ti=typeof self=="object"&&self&&self.Object===Object&&self,mi=_i||Ti||Function("return this")(),L=mi,Ei=L,Ai=Ei.Symbol,Q=Ai,rr=Q,an=Object.prototype,Oi=an.hasOwnProperty,Ci=an.toString,ce=rr?rr.toStringTag:void 0;function Ni(d){var s=Oi.call(d,ce),f=d[ce];try{d[ce]=void 0;var _=!0}catch{}var S=Ci.call(d);return _&&(s?d[ce]=f:delete d[ce]),S}var wi=Ni,Pi=Object.prototype,Si=Pi.toString;function xi(d){return Si.call(d)}var ji=xi,nr=Q,Ii=wi,Ri=ji,Fi="[object Null]",Li="[object Undefined]",ar=nr?nr.toStringTag:void 0;function Mi(d){return d==null?d===void 0?Li:Fi:ar&&ar in Object(d)?Ii(d):Ri(d)}var D=Mi;function Bi(d){var s=typeof d;return d!=null&&(s=="object"||s=="function")}var fe=Bi,Gi=D,Vi=fe,Ui="[object AsyncFunction]",ki="[object Function]",Ki="[object GeneratorFunction]",Xi="[object Proxy]";function Wi(d){if(!Vi(d))return!1;var s=Gi(d);return s==ki||s==Ki||s==Ui||s==Xi}var sn=Wi,Yi=L,qi=Yi["__core-js_shared__"],Hi=qi,ke=Hi,sr=function(){var d=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}();function zi(d){return!!sr&&sr in d}var Ji=zi,Zi=Function.prototype,Qi=Zi.toString;function Di(d){if(d!=null){try{return Qi.call(d)}catch{}try{return d+""}catch{}}return""}var on=Di,eo=sn,to=Ji,ro=fe,no=on,ao=/[\\^$.*+?()[\]{}|]/g,so=/^\[object .+?Constructor\]$/,io=Function.prototype,oo=Object.prototype,uo=io.toString,lo=oo.hasOwnProperty,co=RegExp("^"+uo.call(lo).replace(ao,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fo(d){if(!ro(d)||to(d))return!1;var s=eo(d)?co:so;return s.test(no(d))}var po=fo;function go(d,s){return d==null?void 0:d[s]}var ho=go,vo=po,bo=ho;function yo(d,s){var f=bo(d,s);return vo(f)?f:void 0}var Y$1=yo,$o=Y$1,_o=L,To=$o(_o,"Map"),ut=To,mo=Y$1,Eo=mo(Object,"create"),xe=Eo,ir=xe;function Ao(){this.__data__=ir?ir(null):{},this.size=0}var Oo=Ao;function Co(d){var s=this.has(d)&&delete this.__data__[d];return this.size-=s?1:0,s}var No=Co,wo=xe,Po="__lodash_hash_undefined__",So=Object.prototype,xo=So.hasOwnProperty;function jo(d){var s=this.__data__;if(wo){var f=s[d];return f===Po?void 0:f}return xo.call(s,d)?s[d]:void 0}var Io=jo,Ro=xe,Fo=Object.prototype,Lo=Fo.hasOwnProperty;function Mo(d){var s=this.__data__;return Ro?s[d]!==void 0:Lo.call(s,d)}var Bo=Mo,Go=xe,Vo="__lodash_hash_undefined__";function Uo(d,s){var f=this.__data__;return this.size+=this.has(d)?0:1,f[d]=Go&&s===void 0?Vo:s,this}var ko=Uo,Ko=Oo,Xo=No,Wo=Io,Yo=Bo,qo=ko;function ee(d){var s=-1,f=d==null?0:d.length;for(this.clear();++s<f;){var _=d[s];this.set(_[0],_[1])}}ee.prototype.clear=Ko;ee.prototype.delete=Xo;ee.prototype.get=Wo;ee.prototype.has=Yo;ee.prototype.set=qo;var Ho=ee,or=Ho,zo=Se,Jo=ut;function Zo(){this.size=0,this.__data__={hash:new or,map:new(Jo||zo),string:new or}}var Qo=Zo;function Do(d){var s=typeof d;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?d!=="__proto__":d===null}var eu=Do,tu=eu;function ru(d,s){var f=d.__data__;return tu(s)?f[typeof s=="string"?"string":"hash"]:f.map}var je=ru,nu=je;function au(d){var s=nu(this,d).delete(d);return this.size-=s?1:0,s}var su=au,iu=je;function ou(d){return iu(this,d).get(d)}var uu=ou,lu=je;function cu(d){return lu(this,d).has(d)}var fu=cu,du=je;function pu(d,s){var f=du(this,d),_=f.size;return f.set(d,s),this.size+=f.size==_?0:1,this}var gu=pu,hu=Qo,vu=su,bu=uu,yu=fu,$u=gu;function te(d){var s=-1,f=d==null?0:d.length;for(this.clear();++s<f;){var _=d[s];this.set(_[0],_[1])}}te.prototype.clear=hu;te.prototype.delete=vu;te.prototype.get=bu;te.prototype.has=yu;te.prototype.set=$u;var lt=te,_u=Se,Tu=ut,mu=lt,Eu=200;function Au(d,s){var f=this.__data__;if(f instanceof _u){var _=f.__data__;if(!Tu||_.length<Eu-1)return _.push([d,s]),this.size=++f.size,this;f=this.__data__=new mu(_)}return f.set(d,s),this.size=f.size,this}var Ou=Au,Cu=Se,Nu=di,wu=gi,Pu=vi,Su=yi,xu=Ou;function re(d){var s=this.__data__=new Cu(d);this.size=s.size}re.prototype.clear=Nu;re.prototype.delete=wu;re.prototype.get=Pu;re.prototype.has=Su;re.prototype.set=xu;var un=re,ju="__lodash_hash_undefined__";function Iu(d){return this.__data__.set(d,ju),this}var Ru=Iu;function Fu(d){return this.__data__.has(d)}var Lu=Fu,Mu=lt,Bu=Ru,Gu=Lu;function Ae(d){var s=-1,f=d==null?0:d.length;for(this.__data__=new Mu;++s<f;)this.add(d[s])}Ae.prototype.add=Ae.prototype.push=Bu;Ae.prototype.has=Gu;var Vu=Ae;function Uu(d,s){for(var f=-1,_=d==null?0:d.length;++f<_;)if(s(d[f],f,d))return!0;return!1}var ku=Uu;function Ku(d,s){return d.has(s)}var Xu=Ku,Wu=Vu,Yu=ku,qu=Xu,Hu=1,zu=2;function Ju(d,s,f,_,S,T){var F=f&Hu,M=d.length,P=s.length;if(M!=P&&!(F&&P>M))return!1;var H=T.get(d),J=T.get(s);if(H&&J)return H==s&&J==d;var K=-1,oe=!0,se=f&zu?new Wu:void 0;for(T.set(d,s),T.set(s,d);++K<M;){var ae=d[K],ge=s[K];if(_)var he=F?_(ge,ae,K,s,d,T):_(ae,ge,K,d,s,T);if(he!==void 0){if(he)continue;oe=!1;break}if(se){if(!Yu(s,function(Be,pe){if(!qu(se,pe)&&(ae===Be||S(ae,Be,f,_,T)))return se.push(pe)})){oe=!1;break}}else if(!(ae===ge||S(ae,ge,f,_,T))){oe=!1;break}}return T.delete(d),T.delete(s),oe}var ln=Ju,Zu=L,Qu=Zu.Uint8Array,cn=Qu;function Du(d){var s=-1,f=Array(d.size);return d.forEach(function(_,S){f[++s]=[S,_]}),f}var el=Du;function tl(d){var s=-1,f=Array(d.size);return d.forEach(function(_){f[++s]=_}),f}var rl=tl,ur=Q,lr=cn,nl=ot,al=ln,sl=el,il=rl,ol=1,ul=2,ll="[object Boolean]",cl="[object Date]",fl="[object Error]",dl="[object Map]",pl="[object Number]",gl="[object RegExp]",hl="[object Set]",vl="[object String]",bl="[object Symbol]",yl="[object ArrayBuffer]",$l="[object DataView]",cr=ur?ur.prototype:void 0,Ke=cr?cr.valueOf:void 0;function _l(d,s,f,_,S,T,F){switch(f){case $l:if(d.byteLength!=s.byteLength||d.byteOffset!=s.byteOffset)return!1;d=d.buffer,s=s.buffer;case yl:return!(d.byteLength!=s.byteLength||!T(new lr(d),new lr(s)));case ll:case cl:case pl:return nl(+d,+s);case fl:return d.name==s.name&&d.message==s.message;case gl:case vl:return d==s+"";case dl:var M=sl;case hl:var P=_&ol;if(M||(M=il),d.size!=s.size&&!P)return!1;var H=F.get(d);if(H)return H==s;_|=ul,F.set(d,s);var J=al(M(d),M(s),_,S,T,F);return F.delete(d),J;case bl:if(Ke)return Ke.call(d)==Ke.call(s)}return!1}var Tl=_l;function ml(d,s){for(var f=-1,_=s.length,S=d.length;++f<_;)d[S+f]=s[f];return d}var ct=ml,El=Array.isArray,U=El,Al=ct,Ol=U;function Cl(d,s,f){var _=s(d);return Ol(d)?_:Al(_,f(d))}var fn=Cl;function Nl(d,s){for(var f=-1,_=d==null?0:d.length,S=0,T=[];++f<_;){var F=d[f];s(F,f,d)&&(T[S++]=F)}return T}var wl=Nl;function Pl(){return[]}var dn=Pl,Sl=wl,xl=dn,jl=Object.prototype,Il=jl.propertyIsEnumerable,fr=Object.getOwnPropertySymbols,Rl=fr?function(d){return d==null?[]:(d=Object(d),Sl(fr(d),function(s){return Il.call(d,s)}))}:xl,ft=Rl;function Fl(d,s){for(var f=-1,_=Array(d);++f<d;)_[f]=s(f);return _}var Ll=Fl;function Ml(d){return d!=null&&typeof d=="object"}var k=Ml,Bl=D,Gl=k,Vl="[object Arguments]";function Ul(d){return Gl(d)&&Bl(d)==Vl}var kl=Ul,dr=kl,Kl=k,pn=Object.prototype,Xl=pn.hasOwnProperty,Wl=pn.propertyIsEnumerable,Yl=dr(function(){return arguments}())?dr:function(d){return Kl(d)&&Xl.call(d,"callee")&&!Wl.call(d,"callee")},gn=Yl,Oe={exports:{}};function ql(){return!1}var Hl=ql;Oe.exports;(function(d,s){var f=L,_=Hl,S=s&&!s.nodeType&&s,T=S&&!0&&d&&!d.nodeType&&d,F=T&&T.exports===S,M=F?f.Buffer:void 0,P=M?M.isBuffer:void 0,H=P||_;d.exports=H})(Oe,Oe.exports);var dt=Oe.exports,zl=9007199254740991,Jl=/^(?:0|[1-9]\d*)$/;function Zl(d,s){var f=typeof d;return s=s??zl,!!s&&(f=="number"||f!="symbol"&&Jl.test(d))&&d>-1&&d%1==0&&d<s}var Ql=Zl,Dl=9007199254740991;function ec(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=Dl}var hn=ec,tc=D,rc=hn,nc=k,ac="[object Arguments]",sc="[object Array]",ic="[object Boolean]",oc="[object Date]",uc="[object Error]",lc="[object Function]",cc="[object Map]",fc="[object Number]",dc="[object Object]",pc="[object RegExp]",gc="[object Set]",hc="[object String]",vc="[object WeakMap]",bc="[object ArrayBuffer]",yc="[object DataView]",$c="[object Float32Array]",_c="[object Float64Array]",Tc="[object Int8Array]",mc="[object Int16Array]",Ec="[object Int32Array]",Ac="[object Uint8Array]",Oc="[object Uint8ClampedArray]",Cc="[object Uint16Array]",Nc="[object Uint32Array]",O={};O[$c]=O[_c]=O[Tc]=O[mc]=O[Ec]=O[Ac]=O[Oc]=O[Cc]=O[Nc]=!0;O[ac]=O[sc]=O[bc]=O[ic]=O[yc]=O[oc]=O[uc]=O[lc]=O[cc]=O[fc]=O[dc]=O[pc]=O[gc]=O[hc]=O[vc]=!1;function wc(d){return nc(d)&&rc(d.length)&&!!O[tc(d)]}var Pc=wc;function Sc(d){return function(s){return d(s)}}var pt=Sc,Ce={exports:{}};Ce.exports;(function(d,s){var f=nn,_=s&&!s.nodeType&&s,S=_&&!0&&d&&!d.nodeType&&d,T=S&&S.exports===_,F=T&&f.process,M=function(){try{var P=S&&S.require&&S.require("util").types;return P||F&&F.binding&&F.binding("util")}catch{}}();d.exports=M})(Ce,Ce.exports);var gt=Ce.exports,xc=Pc,jc=pt,pr=gt,gr=pr&&pr.isTypedArray,Ic=gr?jc(gr):xc,vn=Ic,Rc=Ll,Fc=gn,Lc=U,Mc=dt,Bc=Ql,Gc=vn,Vc=Object.prototype,Uc=Vc.hasOwnProperty;function kc(d,s){var f=Lc(d),_=!f&&Fc(d),S=!f&&!_&&Mc(d),T=!f&&!_&&!S&&Gc(d),F=f||_||S||T,M=F?Rc(d.length,String):[],P=M.length;for(var H in d)(s||Uc.call(d,H))&&!(F&&(H=="length"||S&&(H=="offset"||H=="parent")||T&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||Bc(H,P)))&&M.push(H);return M}var bn=kc,Kc=Object.prototype;function Xc(d){var s=d&&d.constructor,f=typeof s=="function"&&s.prototype||Kc;return d===f}var ht=Xc;function Wc(d,s){return function(f){return d(s(f))}}var yn=Wc,Yc=yn,qc=Yc(Object.keys,Object),Hc=qc,zc=ht,Jc=Hc,Zc=Object.prototype,Qc=Zc.hasOwnProperty;function Dc(d){if(!zc(d))return Jc(d);var s=[];for(var f in Object(d))Qc.call(d,f)&&f!="constructor"&&s.push(f);return s}var ef=Dc,tf=sn,rf=hn;function nf(d){return d!=null&&rf(d.length)&&!tf(d)}var $n=nf,af=bn,sf=ef,of=$n;function uf(d){return of(d)?af(d):sf(d)}var vt=uf,lf=fn,cf=ft,ff=vt;function df(d){return lf(d,ff,cf)}var _n=df,hr=_n,pf=1,gf=Object.prototype,hf=gf.hasOwnProperty;function vf(d,s,f,_,S,T){var F=f&pf,M=hr(d),P=M.length,H=hr(s),J=H.length;if(P!=J&&!F)return!1;for(var K=P;K--;){var oe=M[K];if(!(F?oe in s:hf.call(s,oe)))return!1}var se=T.get(d),ae=T.get(s);if(se&&ae)return se==s&&ae==d;var ge=!0;T.set(d,s),T.set(s,d);for(var he=F;++K<P;){oe=M[K];var Be=d[oe],pe=s[oe];if(_)var be=F?_(pe,Be,oe,s,d,T):_(Be,pe,oe,d,s,T);if(!(be===void 0?Be===pe||S(Be,pe,f,_,T):be)){ge=!1;break}he||(he=oe=="constructor")}if(ge&&!he){var Re=d.constructor,Fe=s.constructor;Re!=Fe&&"constructor"in d&&"constructor"in s&&!(typeof Re=="function"&&Re instanceof Re&&typeof Fe=="function"&&Fe instanceof Fe)&&(ge=!1)}return T.delete(d),T.delete(s),ge}var bf=vf,yf=Y$1,$f=L,_f=yf($f,"DataView"),Tf=_f,mf=Y$1,Ef=L,Af=mf(Ef,"Promise"),Of=Af,Cf=Y$1,Nf=L,wf=Cf(Nf,"Set"),Pf=wf,Sf=Y$1,xf=L,jf=Sf(xf,"WeakMap"),If=jf,ze=Tf,Je=ut,Ze=Of,Qe=Pf,De=If,Tn=D,ne=on,vr="[object Map]",Rf="[object Object]",br="[object Promise]",yr="[object Set]",$r="[object WeakMap]",_r="[object DataView]",Ff=ne(ze),Lf=ne(Je),Mf=ne(Ze),Bf=ne(Qe),Gf=ne(De),X$1=Tn;(ze&&X$1(new ze(new ArrayBuffer(1)))!=_r||Je&&X$1(new Je)!=vr||Ze&&X$1(Ze.resolve())!=br||Qe&&X$1(new Qe)!=yr||De&&X$1(new De)!=$r)&&(X$1=function(d){var s=Tn(d),f=s==Rf?d.constructor:void 0,_=f?ne(f):"";if(_)switch(_){case Ff:return _r;case Lf:return vr;case Mf:return br;case Bf:return yr;case Gf:return $r}return s});var Ie=X$1,Xe=un,Vf=ln,Uf=Tl,kf=bf,Tr=Ie,mr=U,Er=dt,Kf=vn,Xf=1,Ar="[object Arguments]",Or="[object Array]",_e="[object Object]",Wf=Object.prototype,Cr=Wf.hasOwnProperty;function Yf(d,s,f,_,S,T){var F=mr(d),M=mr(s),P=F?Or:Tr(d),H=M?Or:Tr(s);P=P==Ar?_e:P,H=H==Ar?_e:H;var J=P==_e,K=H==_e,oe=P==H;if(oe&&Er(d)){if(!Er(s))return!1;F=!0,J=!1}if(oe&&!J)return T||(T=new Xe),F||Kf(d)?Vf(d,s,f,_,S,T):Uf(d,s,P,f,_,S,T);if(!(f&Xf)){var se=J&&Cr.call(d,"__wrapped__"),ae=K&&Cr.call(s,"__wrapped__");if(se||ae){var ge=se?d.value():d,he=ae?s.value():s;return T||(T=new Xe),S(ge,he,f,_,T)}}return oe?(T||(T=new Xe),kf(d,s,f,_,S,T)):!1}var qf=Yf,Hf=qf,Nr=k;function mn(d,s,f,_,S){return d===s?!0:d==null||s==null||!Nr(d)&&!Nr(s)?d!==d&&s!==s:Hf(d,s,f,_,mn,S)}var zf=mn,Jf=zf;function Zf(d,s){return Jf(d,s)}var Qf=Zf;const Df=et(Qf);function ed(d){const{indentation:s,children:f,isInline:_}=d,{theme:S}=G();return b$1.jsxs("div",{style:{color:S.cdataColor},children:[b$1.jsx("span",{children:`${s}<![CDATA[`}),f,b$1.jsx("span",{children:`${_?"":s}]]>`})]})}const td=d=>reactExports.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...d},reactExports.createElement("path",{d:"M9 17.898C9 18.972 10.2649 19.546 11.0731 18.8388L17.3838 13.3169C18.1806 12.6197 18.1806 11.3801 17.3838 10.6829L11.0731 5.16108C10.2649 4.45388 9 5.02785 9 6.1018V17.898Z"}));function En(d){const{collapsible:s,theme:f}=G(),{collapsed:_}=d;return s?b$1.jsx("span",{style:{position:"relative"},children:b$1.jsx("span",{style:{position:"absolute",right:"0",border:0,padding:0,background:"none"},children:b$1.jsx(td,{fill:f.separatorColor,style:{transform:`rotate(${_?0:90}deg)`,transition:"transform 0.2s"}})})}):null}function rd(d){return d==null}var nd=rd;const wr=et(nd);function An(d){const{collapsible:s,initalCollapsedDepth:f}=G(),[_,S]=reactExports.useState(()=>wr(f)||!s?!1:d>=f),T=()=>S(F=>!F);return reactExports.useEffect(()=>{S(wr(f)||!s?!1:d>=f)},[f,d,s]),{collapsed:_,buttonProps:s?{onClick:T,role:"button",style:{cursor:"pointer"}}:{}}}function ad(d){const{indentation:s,children:f,isInline:_,level:S}=d,{theme:T}=G(),{collapsed:F,buttonProps:M}=An(S);return b$1.jsxs("div",{style:{color:T.commentColor},children:[b$1.jsxs("span",{...M,children:[b$1.jsx("span",{children:s}),b$1.jsx(En,{collapsed:F}),b$1.jsx("span",{children:"<!-- "})]}),!F&&f,F&&"...",b$1.jsx("span",{children:`${_||F?" ":s}-->`})]})}function On(d){const{attributes:s}=d,{theme:f}=G();return s?b$1.jsx("span",{children:Object.entries(s).map(([_,S])=>b$1.jsxs("span",{children:[b$1.jsx("span",{style:{color:f.attributeKeyColor},children:` ${_}`}),b$1.jsx("span",{style:{color:f.separatorColor},children:"="}),b$1.jsx("span",{style:{color:f.attributeValueColor},children:`"${S}"`})]},`attribute-${_}`))}):null}function sd(d){const{indentation:s,tagKey:f,attributes:_}=d,{theme:S}=G();return b$1.jsxs("div",{children:[b$1.jsx("span",{style:{color:S.separatorColor},children:`${s}<?`}),b$1.jsx("span",{style:{color:S.tagColor},children:`${f.slice(1)}`}),b$1.jsx(On,{attributes:_}),b$1.jsx("span",{style:{color:S.separatorColor},children:"?>"})]})}function id(d,s){for(var f=-1,_=d==null?0:d.length,S=Array(_);++f<_;)S[f]=s(d[f],f,d);return S}var Cn=id;function od(d,s){for(var f=-1,_=d==null?0:d.length;++f<_&&s(d[f],f,d)!==!1;);return d}var ud=od,ld=Y$1,cd=function(){try{var d=ld(Object,"defineProperty");return d({},"",{}),d}catch{}}(),Nn=cd,Pr=Nn;function fd(d,s,f){s=="__proto__"&&Pr?Pr(d,s,{configurable:!0,enumerable:!0,value:f,writable:!0}):d[s]=f}var wn=fd,dd=wn,pd=ot,gd=Object.prototype,hd=gd.hasOwnProperty;function vd(d,s,f){var _=d[s];(!(hd.call(d,s)&&pd(_,f))||f===void 0&&!(s in d))&&dd(d,s,f)}var Pn=vd,bd=Pn,yd=wn;function $d(d,s,f,_){var S=!f;f||(f={});for(var T=-1,F=s.length;++T<F;){var M=s[T],P=_?_(f[M],d[M],M,f,d):void 0;P===void 0&&(P=d[M]),S?yd(f,M,P):bd(f,M,P)}return f}var de=$d,_d=de,Td=vt;function md(d,s){return d&&_d(s,Td(s),d)}var Ed=md;function Ad(d){var s=[];if(d!=null)for(var f in Object(d))s.push(f);return s}var Od=Ad,Cd=fe,Nd=ht,wd=Od,Pd=Object.prototype,Sd=Pd.hasOwnProperty;function xd(d){if(!Cd(d))return wd(d);var s=Nd(d),f=[];for(var _ in d)_=="constructor"&&(s||!Sd.call(d,_))||f.push(_);return f}var jd=xd,Id=bn,Rd=jd,Fd=$n;function Ld(d){return Fd(d)?Id(d,!0):Rd(d)}var bt=Ld,Md=de,Bd=bt;function Gd(d,s){return d&&Md(s,Bd(s),d)}var Vd=Gd,Ne={exports:{}};Ne.exports;(function(d,s){var f=L,_=s&&!s.nodeType&&s,S=_&&!0&&d&&!d.nodeType&&d,T=S&&S.exports===_,F=T?f.Buffer:void 0,M=F?F.allocUnsafe:void 0;function P(H,J){if(J)return H.slice();var K=H.length,oe=M?M(K):new H.constructor(K);return H.copy(oe),oe}d.exports=P})(Ne,Ne.exports);var Ud=Ne.exports;function kd(d,s){var f=-1,_=d.length;for(s||(s=Array(_));++f<_;)s[f]=d[f];return s}var Kd=kd,Xd=de,Wd=ft;function Yd(d,s){return Xd(d,Wd(d),s)}var qd=Yd,Hd=yn,zd=Hd(Object.getPrototypeOf,Object),yt=zd,Jd=ct,Zd=yt,Qd=ft,Dd=dn,ep=Object.getOwnPropertySymbols,tp=ep?function(d){for(var s=[];d;)Jd(s,Qd(d)),d=Zd(d);return s}:Dd,Sn=tp,rp=de,np=Sn;function ap(d,s){return rp(d,np(d),s)}var sp=ap,ip=fn,op=Sn,up=bt;function lp(d){return ip(d,up,op)}var xn=lp,cp=Object.prototype,fp=cp.hasOwnProperty;function dp(d){var s=d.length,f=new d.constructor(s);return s&&typeof d[0]=="string"&&fp.call(d,"index")&&(f.index=d.index,f.input=d.input),f}var pp=dp,Sr=cn;function gp(d){var s=new d.constructor(d.byteLength);return new Sr(s).set(new Sr(d)),s}var $t=gp,hp=$t;function vp(d,s){var f=s?hp(d.buffer):d.buffer;return new d.constructor(f,d.byteOffset,d.byteLength)}var bp=vp,yp=/\w*$/;function $p(d){var s=new d.constructor(d.source,yp.exec(d));return s.lastIndex=d.lastIndex,s}var _p=$p,xr=Q,jr=xr?xr.prototype:void 0,Ir=jr?jr.valueOf:void 0;function Tp(d){return Ir?Object(Ir.call(d)):{}}var mp=Tp,Ep=$t;function Ap(d,s){var f=s?Ep(d.buffer):d.buffer;return new d.constructor(f,d.byteOffset,d.length)}var Op=Ap,Cp=$t,Np=bp,wp=_p,Pp=mp,Sp=Op,xp="[object Boolean]",jp="[object Date]",Ip="[object Map]",Rp="[object Number]",Fp="[object RegExp]",Lp="[object Set]",Mp="[object String]",Bp="[object Symbol]",Gp="[object ArrayBuffer]",Vp="[object DataView]",Up="[object Float32Array]",kp="[object Float64Array]",Kp="[object Int8Array]",Xp="[object Int16Array]",Wp="[object Int32Array]",Yp="[object Uint8Array]",qp="[object Uint8ClampedArray]",Hp="[object Uint16Array]",zp="[object Uint32Array]";function Jp(d,s,f){var _=d.constructor;switch(s){case Gp:return Cp(d);case xp:case jp:return new _(+d);case Vp:return Np(d,f);case Up:case kp:case Kp:case Xp:case Wp:case Yp:case qp:case Hp:case zp:return Sp(d,f);case Ip:return new _;case Rp:case Mp:return new _(d);case Fp:return wp(d);case Lp:return new _;case Bp:return Pp(d)}}var Zp=Jp,Qp=fe,Rr=Object.create,Dp=function(){function d(){}return function(s){if(!Qp(s))return{};if(Rr)return Rr(s);d.prototype=s;var f=new d;return d.prototype=void 0,f}}(),eg=Dp,tg=eg,rg=yt,ng=ht;function ag(d){return typeof d.constructor=="function"&&!ng(d)?tg(rg(d)):{}}var sg=ag,ig=Ie,og=k,ug="[object Map]";function lg(d){return og(d)&&ig(d)==ug}var cg=lg,fg=cg,dg=pt,Fr=gt,Lr=Fr&&Fr.isMap,pg=Lr?dg(Lr):fg,gg=pg,hg=Ie,vg=k,bg="[object Set]";function yg(d){return vg(d)&&hg(d)==bg}var $g=yg,_g=$g,Tg=pt,Mr=gt,Br=Mr&&Mr.isSet,mg=Br?Tg(Br):_g,Eg=mg,Ag=un,Og=ud,Cg=Pn,Ng=Ed,wg=Vd,Pg=Ud,Sg=Kd,xg=qd,jg=sp,Ig=_n,Rg=xn,Fg=Ie,Lg=pp,Mg=Zp,Bg=sg,Gg=U,Vg=dt,Ug=gg,kg=fe,Kg=Eg,Xg=vt,Wg=bt,Yg=1,qg=2,Hg=4,jn="[object Arguments]",zg="[object Array]",Jg="[object Boolean]",Zg="[object Date]",Qg="[object Error]",In="[object Function]",Dg="[object GeneratorFunction]",eh="[object Map]",th="[object Number]",Rn="[object Object]",rh="[object RegExp]",nh="[object Set]",ah="[object String]",sh="[object Symbol]",ih="[object WeakMap]",oh="[object ArrayBuffer]",uh="[object DataView]",lh="[object Float32Array]",ch="[object Float64Array]",fh="[object Int8Array]",dh="[object Int16Array]",ph="[object Int32Array]",gh="[object Uint8Array]",hh="[object Uint8ClampedArray]",vh="[object Uint16Array]",bh="[object Uint32Array]",A={};A[jn]=A[zg]=A[oh]=A[uh]=A[Jg]=A[Zg]=A[lh]=A[ch]=A[fh]=A[dh]=A[ph]=A[eh]=A[th]=A[Rn]=A[rh]=A[nh]=A[ah]=A[sh]=A[gh]=A[hh]=A[vh]=A[bh]=!0;A[Qg]=A[In]=A[ih]=!1;function Te(d,s,f,_,S,T){var F,M=s&Yg,P=s&qg,H=s&Hg;if(f&&(F=S?f(d,_,S,T):f(d)),F!==void 0)return F;if(!kg(d))return d;var J=Gg(d);if(J){if(F=Lg(d),!M)return Sg(d,F)}else{var K=Fg(d),oe=K==In||K==Dg;if(Vg(d))return Pg(d,M);if(K==Rn||K==jn||oe&&!S){if(F=P||oe?{}:Bg(d),!M)return P?jg(d,wg(F,d)):xg(d,Ng(F,d))}else{if(!A[K])return S?d:{};F=Mg(d,K,M)}}T||(T=new Ag);var se=T.get(d);if(se)return se;T.set(d,F),Kg(d)?d.forEach(function(he){F.add(Te(he,s,f,he,d,T))}):Ug(d)&&d.forEach(function(he,Be){F.set(Be,Te(he,s,f,Be,d,T))});var ae=H?P?Rg:Ig:P?Wg:Xg,ge=J?void 0:ae(d);return Og(ge||d,function(he,Be){ge&&(Be=he,he=d[Be]),Cg(F,Be,Te(he,s,f,Be,d,T))}),F}var yh=Te,$h=D,_h=k,Th="[object Symbol]";function mh(d){return typeof d=="symbol"||_h(d)&&$h(d)==Th}var _t=mh,Eh=U,Ah=_t,Oh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ch=/^\w*$/;function Nh(d,s){if(Eh(d))return!1;var f=typeof d;return f=="number"||f=="symbol"||f=="boolean"||d==null||Ah(d)?!0:Ch.test(d)||!Oh.test(d)||s!=null&&d in Object(s)}var wh=Nh,Fn=lt,Ph="Expected a function";function Tt(d,s){if(typeof d!="function"||s!=null&&typeof s!="function")throw new TypeError(Ph);var f=function(){var _=arguments,S=s?s.apply(this,_):_[0],T=f.cache;if(T.has(S))return T.get(S);var F=d.apply(this,_);return f.cache=T.set(S,F)||T,F};return f.cache=new(Tt.Cache||Fn),f}Tt.Cache=Fn;var Sh=Tt,xh=Sh,jh=500;function Ih(d){var s=xh(d,function(_){return f.size===jh&&f.clear(),_}),f=s.cache;return s}var Rh=Ih,Fh=Rh,Lh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mh=/\\(\\)?/g,Bh=Fh(function(d){var s=[];return d.charCodeAt(0)===46&&s.push(""),d.replace(Lh,function(f,_,S,T){s.push(S?T.replace(Mh,"$1"):_||f)}),s}),Gh=Bh,Gr=Q,Vh=Cn,Uh=U,kh=_t,Kh=1/0,Vr=Gr?Gr.prototype:void 0,Ur=Vr?Vr.toString:void 0;function Ln(d){if(typeof d=="string")return d;if(Uh(d))return Vh(d,Ln)+"";if(kh(d))return Ur?Ur.call(d):"";var s=d+"";return s=="0"&&1/d==-Kh?"-0":s}var Xh=Ln,Wh=Xh;function Yh(d){return d==null?"":Wh(d)}var qh=Yh,Hh=U,zh=wh,Jh=Gh,Zh=qh;function Qh(d,s){return Hh(d)?d:zh(d,s)?[d]:Jh(Zh(d))}var mt=Qh;function Dh(d){var s=d==null?0:d.length;return s?d[s-1]:void 0}var ev=Dh,tv=_t,rv=1/0;function nv(d){if(typeof d=="string"||tv(d))return d;var s=d+"";return s=="0"&&1/d==-rv?"-0":s}var Mn=nv,av=mt,sv=Mn;function iv(d,s){s=av(s,d);for(var f=0,_=s.length;d!=null&&f<_;)d=d[sv(s[f++])];return f&&f==_?d:void 0}var ov=iv;function uv(d,s,f){var _=-1,S=d.length;s<0&&(s=-s>S?0:S+s),f=f>S?S:f,f<0&&(f+=S),S=s>f?0:f-s>>>0,s>>>=0;for(var T=Array(S);++_<S;)T[_]=d[_+s];return T}var lv=uv,cv=ov,fv=lv;function dv(d,s){return s.length<2?d:cv(d,fv(s,0,-1))}var pv=dv,gv=mt,hv=ev,vv=pv,bv=Mn;function yv(d,s){return s=gv(s,d),d=vv(d,s),d==null||delete d[bv(hv(s))]}var $v=yv,_v=D,Tv=yt,mv=k,Ev="[object Object]",Av=Function.prototype,Ov=Object.prototype,Bn=Av.toString,Cv=Ov.hasOwnProperty,Nv=Bn.call(Object);function wv(d){if(!mv(d)||_v(d)!=Ev)return!1;var s=Tv(d);if(s===null)return!0;var f=Cv.call(s,"constructor")&&s.constructor;return typeof f=="function"&&f instanceof f&&Bn.call(f)==Nv}var Pv=wv,Sv=Pv;function xv(d){return Sv(d)?void 0:d}var jv=xv,kr=Q,Iv=gn,Rv=U,Kr=kr?kr.isConcatSpreadable:void 0;function Fv(d){return Rv(d)||Iv(d)||!!(Kr&&d&&d[Kr])}var Lv=Fv,Mv=ct,Bv=Lv;function Gn(d,s,f,_,S){var T=-1,F=d.length;for(f||(f=Bv),S||(S=[]);++T<F;){var M=d[T];s>0&&f(M)?s>1?Gn(M,s-1,f,_,S):Mv(S,M):_||(S[S.length]=M)}return S}var Gv=Gn,Vv=Gv;function Uv(d){var s=d==null?0:d.length;return s?Vv(d,1):[]}var kv=Uv;function Kv(d,s,f){switch(f.length){case 0:return d.call(s);case 1:return d.call(s,f[0]);case 2:return d.call(s,f[0],f[1]);case 3:return d.call(s,f[0],f[1],f[2])}return d.apply(s,f)}var Xv=Kv,Wv=Xv,Xr=Math.max;function Yv(d,s,f){return s=Xr(s===void 0?d.length-1:s,0),function(){for(var _=arguments,S=-1,T=Xr(_.length-s,0),F=Array(T);++S<T;)F[S]=_[s+S];S=-1;for(var M=Array(s+1);++S<s;)M[S]=_[S];return M[s]=f(F),Wv(d,this,M)}}var qv=Yv;function Hv(d){return function(){return d}}var zv=Hv;function Jv(d){return d}var Zv=Jv,Qv=zv,Wr=Nn,Dv=Zv,eb=Wr?function(d,s){return Wr(d,"toString",{configurable:!0,enumerable:!1,value:Qv(s),writable:!0})}:Dv,tb=eb,rb=800,nb=16,ab=Date.now;function sb(d){var s=0,f=0;return function(){var _=ab(),S=nb-(_-f);if(f=_,S>0){if(++s>=rb)return arguments[0]}else s=0;return d.apply(void 0,arguments)}}var ib=sb,ob=tb,ub=ib,lb=ub(ob),cb=lb,fb=kv,db=qv,pb=cb;function gb(d){return pb(db(d,void 0,fb),d+"")}var hb=gb,vb=Cn,bb=yh,yb=$v,$b=mt,_b=de,Tb=jv,mb=hb,Eb=xn,Ab=1,Ob=2,Cb=4,Nb=mb(function(d,s){var f={};if(d==null)return f;var _=!1;s=vb(s,function(T){return T=$b(T,d),_||(_=T.length>1),T}),_b(d,Eb(d),f),_&&(f=bb(f,Ab|Ob|Cb,Tb));for(var S=s.length;S--;)yb(f,s[S]);return f}),wb=Nb;const Pb=et(wb);function Sb(d,s){return new Array(s*d+1).join(" ")}function Vn(d){return typeof d=="string"&&d.includes(`
`)}function xb(d){return typeof d=="string"?!1:d.length===1&&Ee in d[0]&&!Vn(d[0][Ee])}function jb(d){switch(d){case Ee:case rt:case tt:return d;default:return d.startsWith("?")?Jr:Ta}}function Ib(d){const s=d[Jt],f=Pb(d,Jt),[[_,S]]=Object.entries(f),T=jb(_);return{attributes:s,tagKey:_,subElements:S,type:T}}function Rb(d){return d?Object.keys(d).length>0:!1}function Fb(d){const{indentation:s,tagKey:f,attributes:_,children:S,isInline:T,hasChildren:F,level:M}=d,{collapsed:P,buttonProps:H}=An(M),{theme:J}=G();return b$1.jsxs("div",{children:[b$1.jsxs("span",{...H,children:[b$1.jsx("span",{children:s}),b$1.jsx(En,{collapsed:P}),b$1.jsx("span",{style:{color:J.separatorColor},children:"<"}),b$1.jsx("span",{style:{color:J.tagColor},children:`${f}`}),!P&&b$1.jsx(On,{attributes:_}),P&&Rb(_)&&" ...",b$1.jsx("span",{style:{color:J.separatorColor},children:F?">":" />"})]}),F&&b$1.jsxs(b$1.Fragment,{children:[!P&&S,P&&"...",b$1.jsx("span",{style:{color:J.separatorColor},children:`${T||P?"":s}</`}),b$1.jsx("span",{style:{color:J.tagColor},children:`${f}`}),b$1.jsx("span",{style:{color:J.separatorColor},children:">"})]})]})}function Lb(d){const{hasSiblings:s,text:f,indentation:_,isText:S}=d,{theme:T}=G(),F=S?{color:T.textColor}:void 0;return Vn(f)||s?b$1.jsx("div",{style:F,children:f.split(`
`).filter(M=>!!M.trim()).map((M,P)=>b$1.jsx("div",{children:`${_}${M.trim()}`},`${P}`))}):b$1.jsx("span",{style:F,children:f})}function me(d){const{elements:s,level:f=0,isText:_=!0}=d,{indentSize:S}=G();return!Array.isArray(s)||s.length===0?null:b$1.jsx(b$1.Fragment,{children:s.map((T,F)=>{const{tagKey:M,attributes:P,subElements:H,type:J}=Ib(T),K=s.length>1,oe=Sb(S,f),se=`${f}-${F}`,ae=xb(H);switch(J){case Ee:return b$1.jsx(Lb,{text:H,indentation:oe,hasSiblings:K,isText:_},se);case tt:return b$1.jsx(ad,{isInline:ae,indentation:oe,level:f,children:b$1.jsx(me,{elements:H,level:f+1,isText:!1})},se);case rt:return b$1.jsx(ed,{indentation:oe,isInline:ae,children:b$1.jsx(me,{elements:H,level:f+1,isText:!1})},se);case Jr:return b$1.jsx(sd,{indentation:oe,tagKey:M,attributes:P},se);default:return b$1.jsx(Fb,{indentation:oe,tagKey:M,attributes:P,isInline:ae,hasChildren:H.length>0,level:f,children:b$1.jsx(me,{elements:H,level:f+1})},se)}})})}function Mb(){return b$1.jsx("div",{children:"Invalid XML!"})}function Ub(d){const{theme:s,xml:f,collapsible:_=!1,indentSize:S=2,invalidXml:T,initalCollapsedDepth:F}=d,[M,P]=reactExports.useState(()=>({...Ye,...s})),{json:H,valid:J}=Gs(f),K=reactExports.useMemo(()=>({theme:M,collapsible:_,indentSize:S,initalCollapsedDepth:F}),[M,_,S,F]);return reactExports.useEffect(()=>{P(oe=>{const se={...Ye,...s};return Df(se,oe)?oe:se})},[s]),J?b$1.jsx(Zr.Provider,{value:K,children:b$1.jsx("div",{className:"rxv-container",style:{whiteSpace:"pre-wrap",fontFamily:M.fontFamily,overflowWrap:"break-word"},children:b$1.jsx(me,{elements:H})})}):T||b$1.jsx(Mb,{})}const jsonToXml=(d,s="root")=>{const f=(_,S)=>typeof _=="object"&&_!==null?Array.isArray(_)?_.map(T=>f(T,S)).join(""):`<${S}>${Object.keys(_).map(T=>f(_[T],T)).join("")}</${S}>`:`<${S}>${_}</${S}>`;return`<?xml version="1.0" encoding="UTF-8"?>${f(d,s)}`},TiffPreview=({metadata:d})=>{const s=jsonToXml(d,"TiffMetadata");return jsxRuntimeExports.jsx("div",{className:"border border-gray-300 rounded-lg shadow-md dark:border-gray-700 w-full mx-10",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-100 shadow-md rounded-lg p-4 max-w-2xl w-full ",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-4",children:"TIFF Metadata Viewer"}),jsxRuntimeExports.jsx("div",{className:"bg-white max-h-96 overflow-auto border border-gray-300 rounded-lg p-4",children:jsxRuntimeExports.jsx(Ub,{xml:s,initalCollapsedDepth:2,collapsible:!0})})]})})},flattenObject=(d,s=[])=>Object.keys(d).reduce((f,_)=>{if(_==="format")return f;const S=[...s,_];if(typeof d[_]=="object"&&d[_]!==null)Array.isArray(d[_])&&d[_].every(T=>typeof T=="object")?d[_].forEach((T,F)=>{Object.keys(T).forEach(M=>{M!=="format"&&f.push({element:S[0]||"",attribute:S[1]||"",tag:`${M} (${F})`,value:String(T[M]||"")})})}):f.push(...flattenObject(d[_],S));else{const[T,F]=S;f.push({element:T||"",attribute:F||"",tag:S.slice(2).join(".")||"",value:String(d[_]||"")})}return f},[]),TiffMetadataTable=({metadata:d})=>{const[s,f]=reactExports.useState(""),S=reactExports.useMemo(()=>flattenObject(d),[d]).filter(T=>(T.element||"").toLowerCase().includes(s.toLowerCase())||(T.attribute||"").toLowerCase().includes(s.toLowerCase())||(T.tag||"").toLowerCase().includes(s.toLowerCase())||(T.value||"").toLowerCase().includes(s.toLowerCase()));return jsxRuntimeExports.jsxs("div",{className:"border border-gray-300 rounded-lg shadow-md dark:border-gray-700 w-full mx-10",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-900",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-4",children:"TIFF Metadata Viewer"}),jsxRuntimeExports.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded dark:border-gray-700 dark:bg-gray-800 dark:text-white",placeholder:"Search metadata...",value:s,onChange:T=>f(T.target.value)})]}),jsxRuntimeExports.jsx("div",{className:"overflow-y-auto h-80 w-full",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0 z-10",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 w-1/4",children:"Element"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 w-1/4",children:"Attribute"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 w-1/4",children:"Tag"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300 w-1/4",children:"Value"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:S.length>0?S.map((T,F)=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 select-text w-1/4",children:T.element||"N/A"}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 select-text w-1/4",children:T.attribute||"N/A"}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 select-text w-1/4",children:T.tag||"N/A"}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 select-text w-1/4",children:T.value||"N/A"})]},F)):jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No metadata matches your search."})})})]})})]})},SimpleTiffViewer=observer(({width:d,height:s,isFullscreen:f})=>{const _=useLoader(),{colors:S,contrastLimits:T,channelsVisible:F,selections:M,brightness:P,contrast:H}=useChannelsStore(({colors:pe,contrastLimits:be,channelsVisible:Re,selections:Fe,brightness:Me,contrast:ve})=>({colors:pe,contrastLimits:be,channelsVisible:Re,selections:Fe,brightness:Me,contrast:ve}),shallow$1),J=useViewerStore(pe=>pe.viewState),K=useOuterContainer(),oe=f?K.clientWidth:d,se=f?K.clientHeight:s;reactExports.useEffect(()=>{console.log("Loader:",_),console.log("ViewState:",J)},[_,J]);const ae=reactExports.useMemo(()=>[new ColorPaletteExtension],[]),ge=reactExports.useMemo(()=>{const pe={loader:_,selections:M,contrastLimits:T,colors:S,channelsVisible:F,brightness:P,contrast:H,extensions:ae};return console.log("Layer Config:",pe),pe},[_,M,T,S,F,P,H,ae]),he=useViewerStoreApi();reactExports.useEffect(()=>{if(_&&!J){const pe=getDefaultInitialViewState(_,{width:oe,height:se});he.setState({viewState:pe})}},[_,J,oe,se,he]);const Be=reactExports.useMemo(()=>new DetailView({id:"detail-view",snapScaleBar:!0,width:oe,height:se}),[oe,se]);return _?J?jsxRuntimeExports.jsx(MDVivViewer,{views:[Be],layerProps:[ge],viewStates:[{...J,id:"detail-view"}],onViewStateChange:pe=>{console.log("View State Change:",pe.viewState),he.setState({viewState:{...pe.viewState,id:"detail-view"}})},deckProps:{glOptions:{preserveDrawingBuffer:!0},style:{height:`${se}px`,width:`${oe}px`,position:"relative"},onError:pe=>{console.error("MDVivViewer Error:",pe)}}}):jsxRuntimeExports.jsx("div",{children:"No view state available"}):jsxRuntimeExports.jsx("div",{children:"No loader available"})}),TiffChartWrapper=observer(({metadata:d,file:s,config:f,children:_,onFullscreenChange:S})=>{const[T,F]=reactExports.useState(!1),[M,P]=reactExports.useState(null),H=reactExports.useRef(null);reactExports.useEffect(()=>{const ae=()=>{const ge=!!document.fullscreenElement;F(ge),S(ge),!ge&&M&&(J(M[0],M[1]),P(null))};return document.addEventListener("fullscreenchange",ae),()=>{document.removeEventListener("fullscreenchange",ae)}},[M,S]);const J=(ae,ge)=>{H.current&&(H.current.style.width=`${ae}px`,H.current.style.height=`${ge}px`)},K=async()=>{var ae,ge,he;if(T)await document.exitFullscreen();else{const Be=((ae=H.current)==null?void 0:ae.offsetWidth)||0,pe=((ge=H.current)==null?void 0:ge.offsetHeight)||0;P([Be,pe]),await((he=H.current)==null?void 0:he.requestFullscreen())}},oe=reactExports.useCallback((ae,ge,he={})=>jsxRuntimeExports.jsx("span",{"aria-label":ge,"data-microtip-color":"red",role:"tooltip","data-microtip-size":he.size||"small","data-microtip-position":he.position||"bottom-left",className:"mx-px cursor-pointer",onClick:he.func,children:jsxRuntimeExports.jsx("i",{className:`ciview-chart-icon ${ae}`})}),[]),se={boxShadow:"none",overflow:"hidden",boxSizing:"border-box",border:"4px solid var(--background_color)",width:"100%",height:"100%"};return jsxRuntimeExports.jsxs("div",{className:"w-full h-full",style:se,children:[jsxRuntimeExports.jsx("div",{className:"ciview-chart-menuspace flex",children:oe("fas fa-expand",T?"exit fullscreen":"fullscreen",{func:K})}),jsxRuntimeExports.jsx("div",{ref:H,className:"ciview-chart-content flex-grow overflow-auto",children:_})]})}),TiffVisualization=observer(({metadata:d,file:s})=>{const[f,_]=reactExports.useState(null),[S,T]=reactExports.useState(!0),[F,M]=reactExports.useState(!1),P=useViewerStoreApi();reactExports.useEffect(()=>{if(s){const oe=URL.createObjectURL(s);return _(oe),()=>{URL.revokeObjectURL(oe)}}},[s]),reactExports.useEffect(()=>{if(f){T(!0);const oe={urlOrFile:f,description:s.name};P.setState({source:oe}),setTimeout(()=>{T(!1)},1e3)}},[f,s.name,P]);const H=useViewerStore(oe=>oe.source);useImage(H);const J=oe=>{M(oe)};if(S)return jsxRuntimeExports.jsx("div",{children:"Loading TIFF data..."});const K={title:s.name,legend:"TIFF Visualization"};return jsxRuntimeExports.jsx(TiffChartWrapper,{metadata:d,file:s,config:K,onFullscreenChange:J,children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx(SimpleTiffViewer,{width:200,height:200,isFullscreen:F})})})}),DatasourceDropdown=({options:d,onSelect:s})=>{const[f,_]=reactExports.useState(null);reactExports.useEffect(()=>{d.length>0&&f!==d[0]&&(_(d[0]),s(d[0]))},[d,f,s]);const S=T=>{const F=T.target.value;_(F),s(F)};return jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-700 dark:text-white my-1",children:jsxRuntimeExports.jsx("strong",{children:"Select Datasource:"})}),jsxRuntimeExports.jsxs("select",{value:f||"",onChange:S,className:"block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"-- Select an option --"}),d.map((T,F)=>jsxRuntimeExports.jsx("option",{value:T,children:T},F))]})]})};var CloudUpload={},_interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(CloudUpload,"__esModule",{value:!0});var default_1=CloudUpload.default=void 0,_createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;default_1=CloudUpload.default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");const CsvWorker=new Worker(new URL(""+new URL("../assets/csvWorker-e8cMUEqV.js",import.meta.url).href,import.meta.url),{type:"module"}),Container=({children:d})=>jsxRuntimeExports.jsx("div",{className:"flex flex-col content-center items-center h-max dark:bg-black-800 dark:text-white",children:d}),StatusContainer=({children:d})=>jsxRuntimeExports.jsx("div",{className:"flex flex-col justify-center items-center w-full h-150 dark:bg-#333",children:d}),SuccessContainer=({children:d})=>jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center bg-[#f0f8ff] shadow-md border border-[#e0e0e0] m-4 dark:bg-black dark:border-gray-600",children:d}),SuccessHeading=({children:d})=>jsxRuntimeExports.jsx("h1",{className:"text-[#333] mb-1 dark:text-white",children:d}),SuccessText=({children:d})=>jsxRuntimeExports.jsx("p",{className:"text-2xl text-[#555] mb-3 text-center dark:text-gray-300",children:d}),DropzoneContainer=reactExports.forwardRef(({isDragOver:d,children:s,...f},_)=>jsxRuntimeExports.jsx("div",{...f,ref:_,className:`p-4 mt-2 z-50 text-center border-2 border-dashed rounded-lg ${d?"bg-gray-300 dark:bg-slate-800":"bg-white dark:bg-black"} min-w-[90%]`,children:s})),FileInputLabel=({children:d,...s})=>jsxRuntimeExports.jsx("label",{...s,className:"mt-8 px-5 py-2.5 border bg-stone-200 hover:bg-stone-300 rounded cursor-pointer inline-block my-2.5 dark:bg-stone-600 dark:hover:bg-stone-500",children:d}),Spinner=()=>jsxRuntimeExports.jsx("div",{className:"w-16 h-16 border-8 mt-10 border-blue-500 border-dashed rounded-full animate-spin",style:{borderColor:"blue transparent blue transparent"}}),colorStyles={blue:{bgColor:"bg-blue-600",hoverColor:"hover:bg-blue-700",darkBgColor:"dark:bg-blue-800",darkHoverColor:"dark:bg-blue-900"},red:{bgColor:"bg-red-600",hoverColor:"hover:bg-red-700",darkBgColor:"dark:bg-red-800",darkHoverColor:"dark:bg-red-900"},green:{bgColor:"bg-green-600",hoverColor:"hover:bg-green-700",darkBgColor:"dark:bg-green-800",darkHoverColor:"dark:bg-green-900"},gray:{bgColor:"bg-gray-600",hoverColor:"hover:bg-gray-700",darkBgColor:"dark:bg-gray-800",darkHoverColor:"dark:bg-gray-900"}},Button=({onClick:d,color:s="blue",disabled:f=!1,size:_="px-5 py-2.5",marginTop:S="mt-2.5",children:T})=>{const{bgColor:F,hoverColor:M,darkBgColor:P,darkHoverColor:H}=colorStyles[s]||colorStyles.blue;return jsxRuntimeExports.jsx("button",{type:"button",onClick:d,className:`${_} ${S} ${F} ${M} ${P} ${H} text-white rounded self-center cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-500 disabled:opacity-70`,disabled:f,children:T})},ProgressBar=({value:d,max:s})=>jsxRuntimeExports.jsx("progress",{className:"w-full h-8 mb-5 mt-10 bg-gray-200 dark:bg-white-200 border border-gray-300 rounded",value:d,max:s}),Message=({children:d})=>jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-[#333] dark:text-white text-center",children:d}),FileSummary=({children:d})=>jsxRuntimeExports.jsx("div",{className:"max-w-[800px] w-[100%] text-center mb-5",children:d}),FileSummaryHeading=({children:d})=>jsxRuntimeExports.jsx("h1",{className:"text-gray-800 dark:text-white mb-3",children:d}),FileSummaryText=({children:d})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:typeof d=="string"?jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-700 dark:text-white my-1",children:d}):jsxRuntimeExports.jsx("div",{className:"text-lg text-gray-700 dark:text-white my-1",children:d})}),ErrorContainer=({children:d})=>jsxRuntimeExports.jsx("div",{className:"bg-[#fff0f0] text-[#d8000c] border border-[#ffbaba] p-5 my-5 rounded shadow-sm text-left w-[90%] max-w-[600px]",children:d}),DynamicText=({text:d,className:s=""})=>jsxRuntimeExports.jsx("div",{className:"w-96 h-20 overflow-hidden flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:`text-center m-0 font-bold text-sm sm:text-lg md:text-m ${s}`,children:d})}),ErrorHeading=({children:d})=>jsxRuntimeExports.jsx("h4",{className:"mt-0 text-lg font-bold",children:d}),DatasourceNameInput=({value:d,onChange:s,isDisabled:f})=>jsxRuntimeExports.jsxs("div",{className:"flex-left items-center space-x-2 pr-4",children:[jsxRuntimeExports.jsx("label",{className:"text-lg text-gray-700 dark:text-white my-1",children:jsxRuntimeExports.jsx("strong",{children:"Datasouce Name:"})}),jsxRuntimeExports.jsx("input",{id:"datasourceName",type:"text",value:d,onChange:s,className:"p-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:text-gray-300 dark:bg-gray-800 flex-grow",placeholder:"Enter datasource name",disabled:f})]}),reducer=(d,s)=>{switch(s.type){case"SET_SELECTED_FILES":return{...d,selectedFiles:s.payload};case"SET_IS_UPLOADING":return{...d,isUploading:s.payload};case"SET_IS_INSERTING":return{...d,isInserting:s.payload};case"SET_SUCCESS":return{...d,success:s.payload};case"SET_ERROR":return{...d,error:s.payload};case"SET_IS_VALIDATING":return{...d,isValidating:s.payload};case"SET_VALIDATION_RESULT":return{...d,validationResult:s.payload};case"SET_FILE_TYPE":return{...d,fileType:s.payload};case"SET_TIFF_METADATA":return{...d,tiffMetadata:s.payload};default:return d}},UPLOAD_INTERVAL=30,UPLOAD_DURATION=3e3,UPLOAD_STEP=100/(UPLOAD_DURATION/UPLOAD_INTERVAL),useFileUploadProgress=()=>{const[d,s]=reactExports.useState(0),f=reactExports.useCallback(()=>{s(0);const S=setInterval(()=>{s(T=>{const F=T+UPLOAD_STEP;return F>=100?(clearInterval(S),100):F})},UPLOAD_INTERVAL)},[]),_=reactExports.useCallback(()=>{s(0)},[]);return{progress:d,setProgress:s,startProgress:f,resetProgress:_}},FileUploadDialogComponent=observer(({onClose:d,onResize:s})=>{const{root:f,projectName:_,chartManager:S}=useProject(),[T,F]=reactExports.useState(null),[M,P]=reactExports.useState([]),H=aa=>{F(aa),K(aa),console.log("Selected:",aa)},[J,K]=reactExports.useState(""),[oe,se]=reactExports.useState(!0),ae=()=>{se(aa=>!aa)},[ge,he]=reactExports.useState({datasourceName:"",fileName:"",fileSize:"",rowCount:0,columnCount:0}),[Be,pe]=reactExports.useState({fileName:"",fileSize:""}),[be,Re]=reactExports.useState([]),[Fe,Me]=reactExports.useState([]),[ve,At]=reactExports.useState([]),Ct=useChannelsStoreApi(),[Rt,It]=reactExports.useReducer(reducer,{selectedFiles:[],isUploading:!1,isInserting:!1,isValidating:!1,validationResult:null,success:!1,error:null,fileType:null,tiffMetadata:null}),xt=useViewerStoreApi(),{progress:wt,resetProgress:Ft,setProgress:jt}=useFileUploadProgress(),ta=reactExports.useCallback(aa=>{var eA;if(aa.length>0){const DA=aa[0];It({type:"SET_SELECTED_FILES",payload:aa});const xA=DA.name.split(".").pop().toLowerCase();if(xA==="csv"){const ua=DA.name;K(ua),he({...ge,datasourceName:ua,fileName:DA.name,fileSize:(DA.size/(1024*1024)).toFixed(2)}),It({type:"SET_FILE_TYPE",payload:"csv"})}else if(xA==="tiff"||xA==="tif"){const sA=(((eA=window.mdv.chartManager)==null?void 0:eA.dataSources)??[]).map(oA=>oA.name);P([...sA,"new datasource"]),pe({...Be,fileName:DA.name,fileSize:(DA.size/(1024*1024)).toFixed(2)}),It({type:"SET_FILE_TYPE",payload:"tiff"}),Qn(aa)}It({type:"SET_IS_VALIDATING",payload:!0}),xA==="csv"?(CsvWorker.postMessage(DA),CsvWorker.onmessage=ua=>{const{columnNames:sA,columnTypes:oA,secondRowValues:fA,rowCount:lA,columnCount:gA,error:WA}=ua.data;if(WA)It({type:"SET_ERROR",payload:{message:"Validation failed.",traceback:WA}}),It({type:"SET_IS_VALIDATING",payload:!1});else{Re(sA),Me(oA),At(fA),he(_I=>({..._I,rowCount:lA,columnCount:gA}));const JA=aI(sA,oA,fA);s(JA,745),It({type:"SET_IS_VALIDATING",payload:!1}),It({type:"SET_VALIDATION_RESULT",payload:{columnNames:sA,columnTypes:oA}})}}):xA==="tiff"&&(s(1032,580),It({type:"SET_IS_VALIDATING",payload:!1}),It({type:"SET_VALIDATION_RESULT",payload:{columnNames:be,columnTypes:Fe}}))}},[ge,Be]),Qn=reactExports.useCallback(async aa=>{let eA;aa.length===1?eA={urlOrFile:aa[0],description:aa[0].name}:eA={urlOrFile:aa,description:"data.zarr"},xt.setState({isChannelLoading:[!0]}),xt.setState({isViewerLoading:!0});try{const DA=await createLoader(eA.urlOrFile,()=>{},sA=>xt.setState({loaderErrorSnackbar:{on:!0,message:sA}}));let xA,ua;Array.isArray(DA)?DA.length>1?(xA=DA.map(sA=>sA.metadata),ua=DA.map(sA=>sA.data)):(xA=DA[0].metadata,ua=DA[0].data):(xA=DA.metadata,ua=DA.data),ua&&(console.log("Metadata (in JSON-like form) for current file being viewed: ",xA),reactDomExports.unstable_batchedUpdates(()=>{Ct.setState({loader:ua}),xt.setState({metadata:xA})}),It({type:"SET_TIFF_METADATA",payload:xA}))}catch(DA){console.error("Error loading file:",DA),It({type:"SET_ERROR",payload:{message:"Error loading TIFF file.",traceback:DA.message}})}finally{xt.setState({isChannelLoading:[!1]}),xt.setState({isViewerLoading:!1})}},[xt,Ct]),ca=aa=>{const{value:eA}=aa.target;K(eA),he(DA=>({...DA,datasourceName:eA}))},{getRootProps:Jn,getInputProps:wA,isDragActive:LA,fileRejections:ZA}=useDropzone({onDrop:ta,accept:{"text/csv":[".csv"],"image/tiff":[".tiff",".tif"]}}),xI=ZA.length>0?"Only CSV and TIFF files can be selected":"Drag and drop files here or click the button below to upload",cI=ZA.length>0?"text-red-500":"",pI=(aa,eA,DA)=>(eA.font=getComputedStyle(document.body).fontSize+" Arial",eA.measureText(DA).width),aI=(aa,eA,DA)=>{const xA=document.createElement("canvas"),ua=xA.getContext("2d");let sA=0,oA=0,fA=0;sA=Math.max(...aa.map(gA=>pI(xA,ua,gA))),oA=Math.max(...eA.map(gA=>pI(xA,ua,gA))),fA=Math.max(...DA.map(gA=>pI(xA,ua,gA)));const lA=sA+oA+fA+32;return xA.remove(),Math.max(800,lA)},nI=async()=>{var DA,xA,ua,sA,oA,fA,lA,gA;if(console.log("Uploading file..."),!Rt.selectedFiles.length){It({type:"SET_ERROR",payload:{message:"No files selected. Please select a file before uploading.",status:400}});return}const aa=(DA=Rt.selectedFiles[0].name.split(".").pop())==null?void 0:DA.toLowerCase();It({type:"SET_IS_UPLOADING",payload:!0}),Ft();const eA={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:WA=>{const JA=Math.round(WA.loaded*100/WA.total);jt(JA)}};try{let WA;if(aa==="tiff"){const JA=new FormData;JA.append("file",Rt.selectedFiles[0]),JA.append("datasourceName",J);try{JA.append("tiffMetadata",JSON.stringify(Rt.tiffMetadata))}catch(_I){console.error("Invalid JSON format for tiffMetadata:",_I),It({type:"SET_ERROR",payload:{message:"Invalid JSON format in tiffMetadata. Please check the data.",status:400,traceback:_I.message}}),It({type:"SET_IS_UPLOADING",payload:!1});return}WA=await axios.post(`${f}/add_or_update_image_datasource`,JA,eA)}else{const JA=new FormData;JA.append("file",Rt.selectedFiles[0]),JA.append("name",J),JA.append("replace",""),WA=await axios.post(`${f}/add_datasource`,JA,eA)}if(console.log("File uploaded successfully",WA.data),WA.status===200){if(It({type:"SET_IS_UPLOADING",payload:!1}),It({type:"SET_SUCCESS",payload:!0}),aa==="tiff"){const JA=new URLSearchParams(window.location.search);JA.set("view",WA.data.view),window.history.replaceState({},"",`${window.location.pathname}?${JA}`),window.location.reload()}}else console.error(`Failed to confirm: Server responded with status ${WA.status}`),It({type:"SET_IS_UPLOADING",payload:!1}),It({type:"SET_ERROR",payload:{message:`File upload completed, but confirmation failed with status: ${WA.status}`,status:WA.status,traceback:"Server responded with non-200 status"}})}catch(WA){console.error("Error uploading file:",WA),axios.isAxiosError(WA)?((xA=WA.response)==null?void 0:xA.status)===403?It({type:"SET_ERROR",payload:{message:"Permission Denied: This project is read-only and cannot be modified.",status:403,traceback:((sA=(ua=WA.response)==null?void 0:ua.data)==null?void 0:sA.message)||WA.message}}):((oA=WA.response)==null?void 0:oA.status)===400?It({type:"SET_ERROR",payload:{message:"Bad Request: The server could not process the uploaded file.",status:400,traceback:WA.message}}):((fA=WA.response)==null?void 0:fA.status)===500?It({type:"SET_ERROR",payload:{message:"Server Error: An error occurred while processing the upload.",status:500,traceback:WA.message}}):It({type:"SET_ERROR",payload:{message:`Upload failed with status: ${((lA=WA.response)==null?void 0:lA.status)||"unknown"}`,status:((gA=WA.response)==null?void 0:gA.status)||500,traceback:WA.message}}):It({type:"SET_ERROR",payload:{message:"Upload failed due to a network error or unknown issue.",status:500,traceback:WA.message}}),It({type:"SET_IS_UPLOADING",payload:!1}),console.log("Attempting to clean up partially uploaded files...")}},uA=async()=>{It({type:"SET_FILE_SUMMARY",payload:null}),s(450,320),d()};return jsxRuntimeExports.jsx(Container,{children:Rt.isUploading?jsxRuntimeExports.jsxs(StatusContainer,{children:[jsxRuntimeExports.jsx(Message,{children:"Your file is being uploaded, please wait..."}),jsxRuntimeExports.jsx(ProgressBar,{value:wt,max:"100"})]}):Rt.isInserting?jsxRuntimeExports.jsxs(StatusContainer,{children:[jsxRuntimeExports.jsx(Message,{children:"Your file is being processed, please wait..."}),jsxRuntimeExports.jsx(Spinner,{})]}):Rt.success?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(SuccessContainer,{children:[jsxRuntimeExports.jsx(SuccessHeading,{children:"Success!"}),jsxRuntimeExports.jsx(SuccessText,{children:"The file was uploaded successfully to the database."})]}),jsxRuntimeExports.jsx(Button,{color:"green",onClick:()=>window.location.reload(),children:"Refresh Page"})]}):Rt.error?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(ErrorContainer,{children:[jsxRuntimeExports.jsx(ErrorHeading,{children:"An error occurred while uploading the file:"}),jsxRuntimeExports.jsx("p",{children:Rt.error.message}),Rt.error.traceback&&jsxRuntimeExports.jsx("pre",{children:Rt.error.traceback})]})}):Rt.isValidating?jsxRuntimeExports.jsxs(StatusContainer,{children:[jsxRuntimeExports.jsx(Message,{children:"Validating data, please wait..."}),jsxRuntimeExports.jsx(Spinner,{})]}):Rt.validationResult?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Rt.fileType==="csv"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(FileSummary,{children:[jsxRuntimeExports.jsx(FileSummaryHeading,{children:"Uploaded File Summary"}),jsxRuntimeExports.jsx(FileSummaryText,{children:jsxRuntimeExports.jsx(DatasourceNameInput,{value:J,onChange:ca,isDisabled:Rt.selectedFiles.length===0})}),jsxRuntimeExports.jsxs(FileSummaryText,{children:[jsxRuntimeExports.jsx("strong",{children:"File name"})," ",ge.fileName]}),jsxRuntimeExports.jsxs(FileSummaryText,{children:[jsxRuntimeExports.jsx("strong",{children:"Number of rows"})," ",ge.rowCount]}),jsxRuntimeExports.jsxs(FileSummaryText,{children:[jsxRuntimeExports.jsx("strong",{children:"Number of columns"})," ",ge.columnCount]}),jsxRuntimeExports.jsxs(FileSummaryText,{children:[jsxRuntimeExports.jsx("strong",{children:"File size"})," ",ge.fileSize," MB"]})]}),jsxRuntimeExports.jsx(ColumnPreview,{columnNames:be,columnTypes:Fe,secondRowValues:ve}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-6 mt-4",children:[jsxRuntimeExports.jsx(Button,{marginTop:"mt-1",onClick:nI,children:"Upload"}),jsxRuntimeExports.jsx(Button,{color:"red",size:"px-6 py-2.5",marginTop:"mt-1",onClick:uA,children:"Cancel"})]})]}),Rt.fileType==="tiff"&&Rt.tiffMetadata&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"h-full w-full flex",children:[jsxRuntimeExports.jsxs("div",{className:"w-1/3 flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"flex items-start justify-start pt-5 pl-4",children:jsxRuntimeExports.jsxs(FileSummary,{children:[jsxRuntimeExports.jsx(FileSummaryHeading,{children:"Uploaded File Summary"}),jsxRuntimeExports.jsxs(FileSummaryText,{children:[jsxRuntimeExports.jsx("strong",{children:"File name:"})," ",Be.fileName]}),jsxRuntimeExports.jsxs(FileSummaryText,{children:[jsxRuntimeExports.jsx("strong",{children:"File size:"})," ",Be.fileSize," MB"]}),jsxRuntimeExports.jsx(DatasourceDropdown,{options:M,onSelect:H})]})})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center ",children:[jsxRuntimeExports.jsx(FileSummaryText,{children:jsxRuntimeExports.jsx("strong",{children:"Image Preview:"})}),jsxRuntimeExports.jsx(TiffVisualization,{metadata:Rt.tiffMetadata,file:Rt.selectedFiles[0]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"w-2/3",children:[jsxRuntimeExports.jsx("div",{className:"flex items-start justify-start h-[70%] min-h-[420px]",children:oe?jsxRuntimeExports.jsx(TiffMetadataTable,{metadata:Rt.tiffMetadata}):jsxRuntimeExports.jsx(TiffPreview,{metadata:Rt.tiffMetadata})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center ml-4 mr-2 mt-12",children:[jsxRuntimeExports.jsx(Button,{color:"gray",size:"px-6 py-2.5",marginTop:"mt-1",onClick:ae,children:oe?"View Metadata as XML":"View Metadata as Table"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-4 ml-auto",children:[jsxRuntimeExports.jsx(Button,{marginTop:"mt-6",onClick:nI,children:"Upload"}),jsxRuntimeExports.jsx(Button,{color:"red",size:"px-6 py-2.5",marginTop:"mt-6",onClick:uA,children:"Cancel"})]})]})]})]})})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(DropzoneContainer,{...Jn(),isDragOver:LA,"aria-label":"dropzoneLabel",children:[jsxRuntimeExports.jsx("input",{...wA()}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center space-y-0",children:[jsxRuntimeExports.jsx(default_1,{className:"text-gray-400",style:{fontSize:"5rem"}}),LA?jsxRuntimeExports.jsx(DynamicText,{text:"Drop files here...",className:"text-sm"}):jsxRuntimeExports.jsx(DynamicText,{text:Rt.selectedFiles.length>0?`Selected file: ${Rt.selectedFiles[0].name}`:xI,className:`${cI} text-sm`}),jsxRuntimeExports.jsx(FileInputLabel,{htmlFor:"fileInput",className:"text-sm",children:"Choose File"})]})]})})})}),Wrapper=d=>{const[s,f]=reactExports.useState(!0);return reactExports.useEffect(()=>{const _=S=>{S.key==="Escape"&&f(!1)};return window.addEventListener("keydown",_),()=>{window.removeEventListener("keydown",_)}},[]),jsxRuntimeExports.jsx(Dialog,{open:s,fullScreen:!0,disableEscapeKeyDown:!0,children:jsxRuntimeExports.jsx("div",{className:"h-screen flex items-center justify-center",children:jsxRuntimeExports.jsx(Paper,{elevation:24,sx:{p:2},children:jsxRuntimeExports.jsx(FileUploadDialogComponent,{...d})})})})};class FileUploadDialogReact extends BaseDialog{constructor(){super({title:"File Upload",width:455,height:300},null);Bt(this,"root");if(this.outer.classList.add("fileUploadDialog"),this.dialog){const f=createVivStores();this.root=createMdvPortal(jsxRuntimeExports.jsx(VivProvider,{vivStores:f,children:jsxRuntimeExports.jsx(Wrapper,{onClose:()=>this.close(),onResize:(_,S)=>{}})}),this.dialog),this.dialog.parentElement.style.display="none"}else console.error("Dialog element not found")}resizeDialog(f,_){this.outer&&(this.outer.style.width=`${f}px`,this.outer.style.height=`${_}px`)}close(){super.close(),this.root&&this.root.unmount()}}BaseDialog.experiment.FileUploadDialogReact=FileUploadDialogReact;const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$1(d){d.stopImmediatePropagation()}function noevent$1(d){d.preventDefault(),d.stopImmediatePropagation()}function dragDisable(d){var s=d.document.documentElement,f=select(d).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in s?f.on("selectstart.drag",noevent$1,nonpassivecapture):(s.__noselect=s.style.MozUserSelect,s.style.MozUserSelect="none")}function yesdrag(d,s){var f=d.document.documentElement,_=select(d).on("dragstart.drag",null);s&&(_.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){_.on("click.drag",null)},0)),"onselectstart"in f?_.on("selectstart.drag",null):(f.style.MozUserSelect=f.__noselect,delete f.__noselect)}const constant$5=d=>()=>d;function DragEvent(d,{sourceEvent:s,subject:f,target:_,identifier:S,active:T,x:F,y:M,dx:P,dy:H,dispatch:J}){Object.defineProperties(this,{type:{value:d,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},subject:{value:f,enumerable:!0,configurable:!0},target:{value:_,enumerable:!0,configurable:!0},identifier:{value:S,enumerable:!0,configurable:!0},active:{value:T,enumerable:!0,configurable:!0},x:{value:F,enumerable:!0,configurable:!0},y:{value:M,enumerable:!0,configurable:!0},dx:{value:P,enumerable:!0,configurable:!0},dy:{value:H,enumerable:!0,configurable:!0},_:{value:J}})}DragEvent.prototype.on=function(){var d=this._.on.apply(this._,arguments);return d===this._?this:d};function defaultFilter$1(d){return!d.ctrlKey&&!d.button}function defaultContainer(){return this.parentNode}function defaultSubject(d,s){return s??{x:d.x,y:d.y}}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var d=defaultFilter$1,s=defaultContainer,f=defaultSubject,_=defaultTouchable$1,S={},T=dispatch("start","drag","end"),F=0,M,P,H,J,K=0;function oe(Re){Re.on("mousedown.drag",se).filter(_).on("touchstart.drag",he).on("touchmove.drag",Be,nonpassive).on("touchend.drag touchcancel.drag",pe).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function se(Re,Fe){if(!(J||!d.call(this,Re,Fe))){var Me=be(this,s.call(this,Re,Fe),Re,Fe,"mouse");Me&&(select(Re.view).on("mousemove.drag",ae,nonpassivecapture).on("mouseup.drag",ge,nonpassivecapture),dragDisable(Re.view),nopropagation$1(Re),H=!1,M=Re.clientX,P=Re.clientY,Me("start",Re))}}function ae(Re){if(noevent$1(Re),!H){var Fe=Re.clientX-M,Me=Re.clientY-P;H=Fe*Fe+Me*Me>K}S.mouse("drag",Re)}function ge(Re){select(Re.view).on("mousemove.drag mouseup.drag",null),yesdrag(Re.view,H),noevent$1(Re),S.mouse("end",Re)}function he(Re,Fe){if(d.call(this,Re,Fe)){var Me=Re.changedTouches,ve=s.call(this,Re,Fe),At=Me.length,Ct,Rt;for(Ct=0;Ct<At;++Ct)(Rt=be(this,ve,Re,Fe,Me[Ct].identifier,Me[Ct]))&&(nopropagation$1(Re),Rt("start",Re,Me[Ct]))}}function Be(Re){var Fe=Re.changedTouches,Me=Fe.length,ve,At;for(ve=0;ve<Me;++ve)(At=S[Fe[ve].identifier])&&(noevent$1(Re),At("drag",Re,Fe[ve]))}function pe(Re){var Fe=Re.changedTouches,Me=Fe.length,ve,At;for(J&&clearTimeout(J),J=setTimeout(function(){J=null},500),ve=0;ve<Me;++ve)(At=S[Fe[ve].identifier])&&(nopropagation$1(Re),At("end",Re,Fe[ve]))}function be(Re,Fe,Me,ve,At,Ct){var Rt=T.copy(),It=pointer(Ct||Me,Fe),xt,wt,Ft;if((Ft=f.call(Re,new DragEvent("beforestart",{sourceEvent:Me,target:oe,identifier:At,active:F,x:It[0],y:It[1],dx:0,dy:0,dispatch:Rt}),ve))!=null)return xt=Ft.x-It[0]||0,wt=Ft.y-It[1]||0,function jt(ta,Qn,ca){var Jn=It,wA;switch(ta){case"start":S[At]=jt,wA=F++;break;case"end":delete S[At],--F;case"drag":It=pointer(ca||Qn,Fe),wA=F;break}Rt.call(ta,Re,new DragEvent(ta,{sourceEvent:Qn,subject:Ft,target:oe,identifier:At,active:wA,x:It[0]+xt,y:It[1]+wt,dx:It[0]-Jn[0],dy:It[1]-Jn[1],dispatch:Rt}),ve)}}return oe.filter=function(Re){return arguments.length?(d=typeof Re=="function"?Re:constant$5(!!Re),oe):d},oe.container=function(Re){return arguments.length?(s=typeof Re=="function"?Re:constant$5(Re),oe):s},oe.subject=function(Re){return arguments.length?(f=typeof Re=="function"?Re:constant$5(Re),oe):f},oe.touchable=function(Re){return arguments.length?(_=typeof Re=="function"?Re:constant$5(!!Re),oe):_},oe.on=function(){var Re=T.on.apply(T,arguments);return Re===T?oe:Re},oe.clickDistance=function(Re){return arguments.length?(K=(Re=+Re)*Re,oe):Math.sqrt(K)},oe}const constant$4=d=>()=>d;function BrushEvent(d,{sourceEvent:s,target:f,selection:_,mode:S,dispatch:T}){Object.defineProperties(this,{type:{value:d,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},target:{value:f,enumerable:!0,configurable:!0},selection:{value:_,enumerable:!0,configurable:!0},mode:{value:S,enumerable:!0,configurable:!0},_:{value:T}})}function nopropagation(d){d.stopImmediatePropagation()}function noevent(d){d.preventDefault(),d.stopImmediatePropagation()}var MODE_DRAG={name:"drag"},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"};const{abs:abs$1,max:max$2,min:min$2}=Math;function number1(d){return[+d[0],+d[1]]}function number2(d){return[number1(d[0]),number1(d[1])]}var X={name:"x",handles:["w","e"].map(type),input:function(d,s){return d==null?null:[[+d[0],s[0][1]],[+d[1],s[1][1]]]},output:function(d){return d&&[d[0][0],d[1][0]]}},Y={name:"y",handles:["n","s"].map(type),input:function(d,s){return d==null?null:[[s[0][0],+d[0]],[s[1][0],+d[1]]]},output:function(d){return d&&[d[0][1],d[1][1]]}},cursors={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},signsX={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},signsY={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function type(d){return{type:d}}function defaultFilter(d){return!d.ctrlKey&&!d.button}function defaultExtent(){var d=this.ownerSVGElement||this;return d.hasAttribute("viewBox")?(d=d.viewBox.baseVal,[[d.x,d.y],[d.x+d.width,d.y+d.height]]):[[0,0],[d.width.baseVal.value,d.height.baseVal.value]]}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function local(d){for(;!d.__brush;)if(!(d=d.parentNode))return;return d.__brush}function empty(d){return d[0][0]===d[1][0]||d[0][1]===d[1][1]}function brushX(){return brush(X)}function brush(d){var s=defaultExtent,f=defaultFilter,_=defaultTouchable,S=!0,T=dispatch("start","brush","end"),F=6,M;function P(he){var Be=he.property("__brush",ge).selectAll(".overlay").data([type("overlay")]);Be.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(Be).each(function(){var be=local(this).extent;select(this).attr("x",be[0][0]).attr("y",be[0][1]).attr("width",be[1][0]-be[0][0]).attr("height",be[1][1]-be[0][1])}),he.selectAll(".selection").data([type("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var pe=he.selectAll(".handle").data(d.handles,function(be){return be.type});pe.exit().remove(),pe.enter().append("rect").attr("class",function(be){return"handle handle--"+be.type}).attr("cursor",function(be){return cursors[be.type]}),he.each(H).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",oe).filter(_).on("touchstart.brush",oe).on("touchmove.brush",se).on("touchend.brush touchcancel.brush",ae).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}P.move=function(he,Be,pe){he.tween?he.on("start.brush",function(be){J(this,arguments).beforestart().start(be)}).on("interrupt.brush end.brush",function(be){J(this,arguments).end(be)}).tween("brush",function(){var be=this,Re=be.__brush,Fe=J(be,arguments),Me=Re.selection,ve=d.input(typeof Be=="function"?Be.apply(this,arguments):Be,Re.extent),At=interpolate$1(Me,ve);function Ct(Rt){Re.selection=Rt===1&&ve===null?null:At(Rt),H.call(be),Fe.brush()}return Me!==null&&ve!==null?Ct:Ct(1)}):he.each(function(){var be=this,Re=arguments,Fe=be.__brush,Me=d.input(typeof Be=="function"?Be.apply(be,Re):Be,Fe.extent),ve=J(be,Re).beforestart();interrupt(be),Fe.selection=Me===null?null:Me,H.call(be),ve.start(pe).brush(pe).end(pe)})},P.clear=function(he,Be){P.move(he,null,Be)};function H(){var he=select(this),Be=local(this).selection;Be?(he.selectAll(".selection").style("display",null).attr("x",Be[0][0]).attr("y",Be[0][1]).attr("width",Be[1][0]-Be[0][0]).attr("height",Be[1][1]-Be[0][1]),he.selectAll(".handle").style("display",null).attr("x",function(pe){return pe.type[pe.type.length-1]==="e"?Be[1][0]-F/2:Be[0][0]-F/2}).attr("y",function(pe){return pe.type[0]==="s"?Be[1][1]-F/2:Be[0][1]-F/2}).attr("width",function(pe){return pe.type==="n"||pe.type==="s"?Be[1][0]-Be[0][0]+F:F}).attr("height",function(pe){return pe.type==="e"||pe.type==="w"?Be[1][1]-Be[0][1]+F:F})):he.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function J(he,Be,pe){var be=he.__brush.emitter;return be&&(!pe||!be.clean)?be:new K(he,Be,pe)}function K(he,Be,pe){this.that=he,this.args=Be,this.state=he.__brush,this.active=0,this.clean=pe}K.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(he,Be){return this.starting?(this.starting=!1,this.emit("start",he,Be)):this.emit("brush",he),this},brush:function(he,Be){return this.emit("brush",he,Be),this},end:function(he,Be){return--this.active===0&&(delete this.state.emitter,this.emit("end",he,Be)),this},emit:function(he,Be,pe){var be=select(this.that).datum();T.call(he,this.that,new BrushEvent(he,{sourceEvent:Be,target:P,selection:d.output(this.state.selection),mode:pe,dispatch:T}),be)}};function oe(he){if(M&&!he.touches||!f.apply(this,arguments))return;var Be=this,pe=he.target.__data__.type,be=(S&&he.metaKey?pe="overlay":pe)==="selection"?MODE_DRAG:S&&he.altKey?MODE_CENTER:MODE_HANDLE,Re=d===Y?null:signsX[pe],Fe=d===X?null:signsY[pe],Me=local(Be),ve=Me.extent,At=Me.selection,Ct=ve[0][0],Rt,It,xt=ve[0][1],wt,Ft,jt=ve[1][0],ta,Qn,ca=ve[1][1],Jn,wA,LA=0,ZA=0,xI,cI=Re&&Fe&&S&&he.shiftKey,pI,aI,nI=Array.from(he.touches||[he],lA=>{const gA=lA.identifier;return lA=pointer(lA,Be),lA.point0=lA.slice(),lA.identifier=gA,lA});interrupt(Be);var uA=J(Be,arguments,!0).beforestart();if(pe==="overlay"){At&&(xI=!0);const lA=[nI[0],nI[1]||nI[0]];Me.selection=At=[[Rt=d===Y?Ct:min$2(lA[0][0],lA[1][0]),wt=d===X?xt:min$2(lA[0][1],lA[1][1])],[ta=d===Y?jt:max$2(lA[0][0],lA[1][0]),Jn=d===X?ca:max$2(lA[0][1],lA[1][1])]],nI.length>1&&ua(he)}else Rt=At[0][0],wt=At[0][1],ta=At[1][0],Jn=At[1][1];It=Rt,Ft=wt,Qn=ta,wA=Jn;var aa=select(Be).attr("pointer-events","none"),eA=aa.selectAll(".overlay").attr("cursor",cursors[pe]);if(he.touches)uA.moved=xA,uA.ended=sA;else{var DA=select(he.view).on("mousemove.brush",xA,!0).on("mouseup.brush",sA,!0);S&&DA.on("keydown.brush",oA,!0).on("keyup.brush",fA,!0),dragDisable(he.view)}H.call(Be),uA.start(he,be.name);function xA(lA){for(const gA of lA.changedTouches||[lA])for(const WA of nI)WA.identifier===gA.identifier&&(WA.cur=pointer(gA,Be));if(cI&&!pI&&!aI&&nI.length===1){const gA=nI[0];abs$1(gA.cur[0]-gA[0])>abs$1(gA.cur[1]-gA[1])?aI=!0:pI=!0}for(const gA of nI)gA.cur&&(gA[0]=gA.cur[0],gA[1]=gA.cur[1]);xI=!0,noevent(lA),ua(lA)}function ua(lA){const gA=nI[0],WA=gA.point0;var JA;switch(LA=gA[0]-WA[0],ZA=gA[1]-WA[1],be){case MODE_SPACE:case MODE_DRAG:{Re&&(LA=max$2(Ct-Rt,min$2(jt-ta,LA)),It=Rt+LA,Qn=ta+LA),Fe&&(ZA=max$2(xt-wt,min$2(ca-Jn,ZA)),Ft=wt+ZA,wA=Jn+ZA);break}case MODE_HANDLE:{nI[1]?(Re&&(It=max$2(Ct,min$2(jt,nI[0][0])),Qn=max$2(Ct,min$2(jt,nI[1][0])),Re=1),Fe&&(Ft=max$2(xt,min$2(ca,nI[0][1])),wA=max$2(xt,min$2(ca,nI[1][1])),Fe=1)):(Re<0?(LA=max$2(Ct-Rt,min$2(jt-Rt,LA)),It=Rt+LA,Qn=ta):Re>0&&(LA=max$2(Ct-ta,min$2(jt-ta,LA)),It=Rt,Qn=ta+LA),Fe<0?(ZA=max$2(xt-wt,min$2(ca-wt,ZA)),Ft=wt+ZA,wA=Jn):Fe>0&&(ZA=max$2(xt-Jn,min$2(ca-Jn,ZA)),Ft=wt,wA=Jn+ZA));break}case MODE_CENTER:{Re&&(It=max$2(Ct,min$2(jt,Rt-LA*Re)),Qn=max$2(Ct,min$2(jt,ta+LA*Re))),Fe&&(Ft=max$2(xt,min$2(ca,wt-ZA*Fe)),wA=max$2(xt,min$2(ca,Jn+ZA*Fe)));break}}Qn<It&&(Re*=-1,JA=Rt,Rt=ta,ta=JA,JA=It,It=Qn,Qn=JA,pe in flipX&&eA.attr("cursor",cursors[pe=flipX[pe]])),wA<Ft&&(Fe*=-1,JA=wt,wt=Jn,Jn=JA,JA=Ft,Ft=wA,wA=JA,pe in flipY&&eA.attr("cursor",cursors[pe=flipY[pe]])),Me.selection&&(At=Me.selection),pI&&(It=At[0][0],Qn=At[1][0]),aI&&(Ft=At[0][1],wA=At[1][1]),(At[0][0]!==It||At[0][1]!==Ft||At[1][0]!==Qn||At[1][1]!==wA)&&(Me.selection=[[It,Ft],[Qn,wA]],H.call(Be),uA.brush(lA,be.name))}function sA(lA){if(nopropagation(lA),lA.touches){if(lA.touches.length)return;M&&clearTimeout(M),M=setTimeout(function(){M=null},500)}else yesdrag(lA.view,xI),DA.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);aa.attr("pointer-events","all"),eA.attr("cursor",cursors.overlay),Me.selection&&(At=Me.selection),empty(At)&&(Me.selection=null,H.call(Be)),uA.end(lA,be.name)}function oA(lA){switch(lA.keyCode){case 16:{cI=Re&&Fe;break}case 18:{be===MODE_HANDLE&&(Re&&(ta=Qn-LA*Re,Rt=It+LA*Re),Fe&&(Jn=wA-ZA*Fe,wt=Ft+ZA*Fe),be=MODE_CENTER,ua(lA));break}case 32:{(be===MODE_HANDLE||be===MODE_CENTER)&&(Re<0?ta=Qn-LA:Re>0&&(Rt=It-LA),Fe<0?Jn=wA-ZA:Fe>0&&(wt=Ft-ZA),be=MODE_SPACE,eA.attr("cursor",cursors.selection),ua(lA));break}default:return}noevent(lA)}function fA(lA){switch(lA.keyCode){case 16:{cI&&(pI=aI=cI=!1,ua(lA));break}case 18:{be===MODE_CENTER&&(Re<0?ta=Qn:Re>0&&(Rt=It),Fe<0?Jn=wA:Fe>0&&(wt=Ft),be=MODE_HANDLE,ua(lA));break}case 32:{be===MODE_SPACE&&(lA.altKey?(Re&&(ta=Qn-LA*Re,Rt=It+LA*Re),Fe&&(Jn=wA-ZA*Fe,wt=Ft+ZA*Fe),be=MODE_CENTER):(Re<0?ta=Qn:Re>0&&(Rt=It),Fe<0?Jn=wA:Fe>0&&(wt=Ft),be=MODE_HANDLE),eA.attr("cursor",cursors[pe]),ua(lA));break}default:return}noevent(lA)}}function se(he){J(this,arguments).moved(he)}function ae(he){J(this,arguments).ended(he)}function ge(){var he=this.__brush||{selection:null};return he.extent=number2(s.apply(this,arguments)),he.dim=d,he}return P.extent=function(he){return arguments.length?(s=typeof he=="function"?he:constant$4(number2(he)),P):s},P.filter=function(he){return arguments.length?(f=typeof he=="function"?he:constant$4(!!he),P):f},P.touchable=function(he){return arguments.length?(_=typeof he=="function"?he:constant$4(!!he),P):_},P.handleSize=function(he){return arguments.length?(F=+he,P):F},P.keyModifiers=function(he){return arguments.length?(S=!!he,P):S},P.on=function(){var he=T.on.apply(T,arguments);return he===T?P:he},P}class HistogramChart extends SVGChart{constructor(s,f,_){Array.isArray(_.param)&&(_.param=_.param[0]);const S=s.getColumnName(_.param);_.axis||(_.axis={x:{size:30,label:S,textsize:13},y:{size:45,label:"frequency",textsize:13}}),_.title||(_.title=S),super(s,f,_,{x:{},y:{}});const T=this.config;T.type="bar_chart";const F=this.dataStore.getMinMaxForColumn(_.param);this._setConfigValue(T,"display_max",F[1]),this._setConfigValue(T,"display_min",F[0]),this._setConfigValue(T,"bin_number",10),this.brush=brushX().on("end",M=>{const P=M.selection;if(P==null)return;const H=this.margins.left;this.setRange(this.x_scale.invert(P[0]-H),this.x_scale.invert(P[1]-H))}),this._setBrushExtent(),this.dim=this.dataStore.getDimension("range_dimension"),this.filter=null,this.binFiltered=new Array(this.config.bin_number).fill(!1),this.onDataFiltered(null,!0)}_setBrushExtent(){this.brush.extent([[this.margins.left,0],[this.width-this.margins.right,this.height-this.margins.bottom]]),this.svg.call(this.brush)}setSize(s,f){super.setSize(s,f),this._setBrushExtent(),this.drawChart(),this.svg.call(this.brush.move,null)}remove(s=!0){this.dim.destroy(s),super.remove()}removeFilter(){this.dim.removeFilter(),this.filter=null,this.binFiltered=new Array(this.config.bin_number).fill(!1),this.drawChart(),this.svg.call(this.brush.move,null)}_calculateFilterBins(){const s=this.config,f=s.bin_number;if(this.binFiltered=new Array(f).fill(!1),!this.filter)return;const _=(s.display_max-s.display_min)/s.bin_number,S=s.display_min;for(let T=0;T<s.bin_number;T++){const F=S+T*_;(F<=this.filter[0]||F>this.filter[1])&&(this.binFiltered[T]=!0)}}setRange(s,f){this.filter=[s,f],this._calculateFilterBins(),this.dim.filter("filterRange",[this.config.param],{min:s,max:f}),this.drawChart(),this.resetButton.style.display="inline"}getFilter(){if(!this.filter)return null;const s={};return s[this.config.param]=this.filter.slice(0),s}onDataFiltered(s){if(this.dim===s||this.isPinned)return;const f=this.config.bin_number,_={bins:this.config.bin_number,max:this.config.display_max,min:this.config.display_min};s==="all_removed"&&(this.filter=null,this.binFiltered.fill(!1),this.svg.call(this.brush.move,null),this.resetButton.style.display="none"),this.dim.getBins(S=>{this.originalBinData=S,this.binData=S.slice(0,f),this.binData[f-1]+=S[f],this.drawChart()},this.config.param,_)}drawChart(){const s=select(this.contentDiv).transition().duration(400).ease(linear),f=this._getContentDimensions(),_=this.config.bin_number,S=(f.width-(_+1)*3)/_;let T=Math.max(...this.binData);T=T||1,this.x_scale.domain([this.config.display_min,this.config.display_max]),this.y_scale.domain([T,0]),this.updateAxis();const F=f.height/T;this.graph_area.selectAll(".bar").data(this.binData).join("rect").transition(s).style("fill",(M,P)=>this.binFiltered[P]?"gray":"blue").attr("class","bar").attr("x",(M,P)=>(P+1)*3+P*S).attr("width",S).attr("y",M=>f.height-M*F).attr("height",M=>M*F)}pinChart(){this.isPinned=!0}unpinChart(){this.isPinned=!1,this.onDataFiltered()}getSettings(){const s=super.getSettings(),f=this.config,_=this.dataStore.getMinMaxForColumn(f.param);return s.concat([{type:"doubleslider",min:_[0],max:_[1],doc:this.__doc__||document,current_value:[f.display_min,f.display_max],label:"max min values",info:{text:`Sometimes outliers can skew the histogram to one side.
                     Setting a min/max value will add all counts less/greater than the 
                     value specified to the first/last bin.`,position:"left"},func:(S,T)=>{f.display_min=S,f.display_max=T,this._calculateFilterBins(),this.onDataFiltered()}},{type:"spinner",max:100,min:2,current_value:f.bin_number,label:"Number of bins",func:S=>{f.bin_number=S,this._calculateFilterBins(),this.onDataFiltered()}}])}}BaseChart.types.bar_chart={name:"Histogram",class:HistogramChart,params:[{type:"number",name:"Frequency Data"}]};class CategoryChart extends SVGChart{constructor(s,f,_,S){Array.isArray(_.param)&&(_.param=_.param[0]),_.title=_.title||s.getColumnName(_.param),super(s,f,_,S),this.dim=this.dataStore.getDimension("category_dimension"),this.colors=this.dataStore.getColumnColors(_.param),this.filter=[]}remove(s=!0){this.dim.destroy(s),super.remove()}setSize(s,f){super.setSize(s,f),this.drawChart()}removeFilter(){this.dim.removeFilter(),this.filter=[],this.drawChart()}filterCategories(s,f){if(f)if(this.filter.indexOf(s)!==-1)this.filter=this.filter.filter(_=>_!==s);else if(this.filter.length===0){const _=this.dataStore.getColumnValues(this.config.param);this.filter=_.filter(S=>S!==s)}else this.filter.push(s);else this.filter=[s];this.resetButton.style.display="inline",this.drawChart(100),this.dim.filter("filterCategories",[this.config.param],this.filter)}getFilter(){const s={};return!this.filter||this.filter.length===0?null:(s[this.config.param]=this.filter.slice(0),s)}pinChart(){this.isPinned=!0}unpinChart(){this.isPinned=!1,this.onDataFiltered()}updateData(){const s=this.config;if(this.rowData=this.data.slice(0),s.filter_zeros&&(this.rowData=this.rowData.filter(f=>f[0]!==0)),s.sort==="size"&&this.rowData.sort((f,_)=>_[0]-f[0]),s.sort==="name"){const f=this.dataStore.getColumnValues(s.param);this.rowData.sort((_,S)=>f[_[1]].localeCompare(f[S[1]]))}this.rowData.length>40&&!s.show_limit&&(s.show_limit=40),s.show_limit&&s.show_limit<this.rowData.length&&this.rowData.splice(s.show_limit)}onDataFiltered(s){if(this.dim===s||this.isPinned)return;s==="all_removed"&&(this.filter=[],this.resetButton.style.display="none");const f={};this.dim.getCategories(_=>{this.data=new Array(_.length),this.maxCount=1,this.config;for(let S=0;S<_.length;S++)this.data[S]=[_[S],S],this.maxCount=Math.max(_[S],this.maxCount);this.updateData(),this.drawChart()},this.config.param,f)}}var wordcloud2={exports:{}};/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2019 Tim Guan-tin Chien and contributors.
 * Released under the MIT license
 */(function(d){window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var _=[void 0],S="zero-timeout-message",T=function(M){var P=_.length;return _.push(M),window.postMessage(S+P.toString(36),"*"),P};return window.addEventListener("message",function(M){if(!(typeof M.data!="string"||M.data.substr(0,S.length)!==S)){M.stopImmediatePropagation();var P=parseInt(M.data.substr(S.length),36);_[P]&&(_[P](),_[P]=void 0)}},!0),window.clearImmediate=function(M){_[M]&&(_[M]=void 0)},T}()||function(_){window.setTimeout(_,0)}}()),window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(_){window.clearTimeout(_)}}()),function(s){var f=function(){var H=document.createElement("canvas");if(!H||!H.getContext)return!1;var J=H.getContext("2d");return!(!J||!J.getImageData||!J.fillText||!Array.prototype.some||!Array.prototype.push)}(),_=function(){if(f){for(var H=document.createElement("canvas").getContext("2d"),J=20,K,oe;J;){if(H.font=J.toString(10)+"px sans-serif",H.measureText("").width===K&&H.measureText("m").width===oe)return J+1;K=H.measureText("").width,oe=H.measureText("m").width,J--}return 0}}(),S=function(P){if(Array.isArray(P)){var H=P.slice();return H.splice(0,2),H}else return[]},T=function(H){for(var J,K,oe=H.length;oe;)J=Math.floor(Math.random()*oe),K=H[--oe],H[oe]=H[J],H[J]=K;return H},F={},M=function(H,J){if(!f)return;var K=Math.floor(Math.random()*Date.now());Array.isArray(H)||(H=[H]),H.forEach(function(xA,ua){if(typeof xA=="string"){if(H[ua]=document.getElementById(xA),!H[ua])throw new Error("The element id specified is not found.")}else if(!xA.tagName&&!xA.appendChild)throw new Error("You must pass valid HTML elements, or ID of the element.")});var oe={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,shrinkToFit:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationSteps:0,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(J)for(var se in J)se in oe&&(oe[se]=J[se]);if(typeof oe.weightFactor!="function"){var ae=oe.weightFactor;oe.weightFactor=function(ua){return ua*ae}}if(typeof oe.shape!="function")switch(oe.shape){case"circle":default:oe.shape="circle";break;case"cardioid":oe.shape=function(ua){return 1-Math.sin(ua)};break;case"diamond":oe.shape=function(ua){var sA=ua%(2*Math.PI/4);return 1/(Math.cos(sA)+Math.sin(sA))};break;case"square":oe.shape=function(ua){return Math.min(1/Math.abs(Math.cos(ua)),1/Math.abs(Math.sin(ua)))};break;case"triangle-forward":oe.shape=function(ua){var sA=ua%(2*Math.PI/3);return 1/(Math.cos(sA)+Math.sqrt(3)*Math.sin(sA))};break;case"triangle":case"triangle-upright":oe.shape=function(ua){var sA=(ua+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(sA)+Math.sqrt(3)*Math.sin(sA))};break;case"pentagon":oe.shape=function(ua){var sA=(ua+.955)%(2*Math.PI/5);return 1/(Math.cos(sA)+.726543*Math.sin(sA))};break;case"star":oe.shape=function(ua){var sA=(ua+.955)%(2*Math.PI/10);return(ua+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-sA)+3.07768*Math.sin(2*Math.PI/10-sA)):1/(Math.cos(sA)+3.07768*Math.sin(sA))};break}oe.gridSize=Math.max(Math.floor(oe.gridSize),4);var ge=oe.gridSize,he=ge-oe.maskGapWidth,Be=Math.abs(oe.maxRotation-oe.minRotation),pe=Math.abs(Math.floor(oe.rotationSteps)),be=Math.min(oe.maxRotation,oe.minRotation),Re,Fe,Me,ve,At,Ct,Rt;function It(xA,ua){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(ua-xA)+xA).toFixed()+"%)"}switch(oe.color){case"random-dark":Rt=function(){return It(10,50)};break;case"random-light":Rt=function(){return It(50,90)};break;default:typeof oe.color=="function"&&(Rt=oe.color);break}var xt;typeof oe.fontWeight=="function"&&(xt=oe.fontWeight);var wt=null;typeof oe.classes=="function"&&(wt=oe.classes);var Ft=!1,jt=[],ta,Qn=function(ua){var sA=ua.currentTarget,oA=sA.getBoundingClientRect(),fA,lA;ua.touches?(fA=ua.touches[0].clientX,lA=ua.touches[0].clientY):(fA=ua.clientX,lA=ua.clientY);var gA=fA-oA.left,WA=lA-oA.top,JA=Math.floor(gA*(sA.width/oA.width||1)/ge),_I=Math.floor(WA*(sA.height/oA.height||1)/ge);return jt[JA][_I]},ca=function(ua){var sA=Qn(ua);if(ta!==sA){if(ta=sA,!sA){oe.hover(void 0,void 0,ua);return}oe.hover(sA.item,sA.dimension,ua)}},Jn=function(ua){var sA=Qn(ua);sA&&(oe.click(sA.item,sA.dimension,ua),ua.preventDefault())},wA=[],LA=function(ua){if(wA[ua])return wA[ua];var sA=ua*8,oA=sA,fA=[];for(ua===0&&fA.push([ve[0],ve[1],0]);oA--;){var lA=1;oe.shape!=="circle"&&(lA=oe.shape(oA/sA*2*Math.PI)),fA.push([ve[0]+ua*lA*Math.cos(-oA/sA*2*Math.PI),ve[1]+ua*lA*Math.sin(-oA/sA*2*Math.PI)*oe.ellipticity,oA/sA*2*Math.PI])}return wA[ua]=fA,fA},ZA=function(){return oe.abortThreshold>0&&new Date().getTime()-Ct>oe.abortThreshold},xI=function(){return oe.rotateRatio===0||Math.random()>oe.rotateRatio?0:Be===0?be:pe>0?be+Math.floor(Math.random()*pe)*Be/(pe-1):be+Math.random()*Be},cI=function(ua,sA,oA,fA){var lA=oe.weightFactor(sA);if(lA<=oe.minSize)return!1;var gA=1;lA<_&&(gA=function(){for(var vC=2;vC*lA<_;)vC+=2;return vC}());var WA;xt?WA=xt(ua,sA,lA,fA):WA=oe.fontWeight;var JA=document.createElement("canvas"),_I=JA.getContext("2d",{willReadFrequently:!0});_I.font=WA+" "+(lA*gA).toString(10)+"px "+oe.fontFamily;var HI=_I.measureText(ua).width/gA,Nt=Math.max(lA*gA,_I.measureText("m").width,_I.measureText("").width)/gA,bA=HI+Nt*2,hA=Nt*3,II=Math.ceil(bA/ge),OI=Math.ceil(hA/ge);bA=II*ge,hA=OI*ge;var ba=-HI/2,IA=-Nt*.4,MA=Math.ceil((bA*Math.abs(Math.sin(oA))+hA*Math.abs(Math.cos(oA)))/ge),EI=Math.ceil((bA*Math.abs(Math.cos(oA))+hA*Math.abs(Math.sin(oA)))/ge),wI=EI*ge,vI=MA*ge;JA.setAttribute("width",wI),JA.setAttribute("height",vI),_I.scale(1/gA,1/gA),_I.translate(wI*gA/2,vI*gA/2),_I.rotate(-oA),_I.font=WA+" "+(lA*gA).toString(10)+"px "+oe.fontFamily,_I.fillStyle="#000",_I.textBaseline="middle",_I.fillText(ua,ba*gA,(IA+lA*.5)*gA);var WI=_I.getImageData(0,0,wI,vI).data;if(ZA())return!1;for(var GI=[],NI=EI,tC,mC,yC,QC=[MA/2,EI/2,MA/2,EI/2];NI--;)for(tC=MA;tC--;){yC=ge;e:for(;yC--;)for(mC=ge;mC--;)if(WI[((tC*ge+yC)*wI+(NI*ge+mC))*4+3]){GI.push([NI,tC]),NI<QC[3]&&(QC[3]=NI),NI>QC[1]&&(QC[1]=NI),tC<QC[0]&&(QC[0]=tC),tC>QC[2]&&(QC[2]=tC);break e}}return{mu:gA,occupied:GI,bounds:QC,gw:EI,gh:MA,fillTextOffsetX:ba,fillTextOffsetY:IA,fillTextWidth:HI,fillTextHeight:Nt,fontSize:lA}},pI=function(ua,sA,oA,fA,lA){for(var gA=lA.length;gA--;){var WA=ua+lA[gA][0],JA=sA+lA[gA][1];if(WA>=Fe||JA>=Me||WA<0||JA<0){if(!oe.drawOutOfBound)return!1;continue}if(!Re[WA][JA])return!1}return!0},aI=function(ua,sA,oA,fA,lA,gA,WA,JA,_I,HI){var Nt=oA.fontSize,bA;Rt?bA=Rt(fA,lA,Nt,gA,WA,HI):bA=oe.color;var hA;xt?hA=xt(fA,lA,Nt,HI):hA=oe.fontWeight;var II;wt?II=wt(fA,lA,Nt,HI):II=oe.classes,H.forEach(function(OI){if(OI.getContext){var ba=OI.getContext("2d"),IA=oA.mu;ba.save(),ba.scale(1/IA,1/IA),ba.font=hA+" "+(Nt*IA).toString(10)+"px "+oe.fontFamily,ba.fillStyle=bA,ba.translate((ua+oA.gw/2)*ge*IA,(sA+oA.gh/2)*ge*IA),JA!==0&&ba.rotate(-JA),ba.textBaseline="middle",ba.fillText(fA,oA.fillTextOffsetX*IA,(oA.fillTextOffsetY+Nt*.5)*IA),ba.restore()}else{var MA=document.createElement("span"),EI="";EI="rotate("+-JA/Math.PI*180+"deg) ",oA.mu!==1&&(EI+="translateX(-"+oA.fillTextWidth/4+"px) scale("+1/oA.mu+")");var wI={position:"absolute",display:"block",font:hA+" "+Nt*oA.mu+"px "+oe.fontFamily,left:(ua+oA.gw/2)*ge+oA.fillTextOffsetX+"px",top:(sA+oA.gh/2)*ge+oA.fillTextOffsetY+"px",width:oA.fillTextWidth+"px",height:oA.fillTextHeight+"px",lineHeight:Nt+"px",whiteSpace:"nowrap",transform:EI,webkitTransform:EI,msTransform:EI,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};bA&&(wI.color=bA),MA.textContent=fA;for(var vI in wI)MA.style[vI]=wI[vI];if(_I)for(var WI in _I)MA.setAttribute(WI,_I[WI]);II&&(MA.className+=II),OI.appendChild(MA)}})},nI=function(ua,sA,oA,fA,lA){if(!(ua>=Fe||sA>=Me||ua<0||sA<0)){if(Re[ua][sA]=!1,oA){var gA=H[0].getContext("2d");gA.fillRect(ua*ge,sA*ge,he,he)}Ft&&(jt[ua][sA]={item:lA,dimension:fA})}},uA=function(ua,sA,oA,fA,lA,gA){var WA=lA.occupied,JA=oe.drawMask,_I;JA&&(_I=H[0].getContext("2d"),_I.save(),_I.fillStyle=oe.maskColor);var HI;if(Ft){var Nt=lA.bounds;HI={x:(ua+Nt[3])*ge,y:(sA+Nt[0])*ge,w:(Nt[1]-Nt[3]+1)*ge,h:(Nt[2]-Nt[0]+1)*ge}}for(var bA=WA.length;bA--;){var hA=ua+WA[bA][0],II=sA+WA[bA][1];hA>=Fe||II>=Me||hA<0||II<0||nI(hA,II,JA,HI,gA)}JA&&_I.restore()},aa=function xA(ua){var sA,oA,fA;Array.isArray(ua)?(sA=ua[0],oA=ua[1]):(sA=ua.word,oA=ua.weight,fA=ua.attributes);var lA=xI(),gA=S(ua),WA=cI(sA,oA,lA,gA);if(!WA||ZA())return!1;if(!oe.drawOutOfBound&&!oe.shrinkToFit){var JA=WA.bounds;if(JA[1]-JA[3]+1>Fe||JA[2]-JA[0]+1>Me)return!1}for(var _I=At+1,HI=function(hA){var II=Math.floor(hA[0]-WA.gw/2),OI=Math.floor(hA[1]-WA.gh/2),ba=WA.gw,IA=WA.gh;return pI(II,OI,ba,IA,WA.occupied)?(aI(II,OI,WA,sA,oA,At-_I,hA[2],lA,fA,gA),uA(II,OI,ba,IA,WA,ua),!0):!1};_I--;){var Nt=LA(At-_I);oe.shuffle&&(Nt=[].concat(Nt),T(Nt));var bA=Nt.some(HI);if(bA)return!0}return oe.shrinkToFit?(Array.isArray(ua)?ua[1]=ua[1]*3/4:ua.weight=ua.weight*3/4,xA(ua)):!1},eA=function(ua,sA,oA){if(sA)return!H.some(function(fA){var lA=new CustomEvent(ua,{detail:oA||{}});return!fA.dispatchEvent(lA)},this);H.forEach(function(fA){var lA=new CustomEvent(ua,{detail:oA||{}});fA.dispatchEvent(lA)},this)},DA=function(){var ua=H[0];if(ua.getContext)Fe=Math.ceil(ua.width/ge),Me=Math.ceil(ua.height/ge);else{var sA=ua.getBoundingClientRect();Fe=Math.ceil(sA.width/ge),Me=Math.ceil(sA.height/ge)}if(eA("wordcloudstart",!0)){ve=oe.origin?[oe.origin[0]/ge,oe.origin[1]/ge]:[Fe/2,Me/2],At=Math.floor(Math.sqrt(Fe*Fe+Me*Me)),Re=[];var oA,fA,lA;if(!ua.getContext||oe.clearCanvas)for(H.forEach(function(ba){if(ba.getContext){var IA=ba.getContext("2d");IA.fillStyle=oe.backgroundColor,IA.clearRect(0,0,Fe*(ge+1),Me*(ge+1)),IA.fillRect(0,0,Fe*(ge+1),Me*(ge+1))}else ba.textContent="",ba.style.backgroundColor=oe.backgroundColor,ba.style.position="relative"}),oA=Fe;oA--;)for(Re[oA]=[],fA=Me;fA--;)Re[oA][fA]=!0;else{var gA=document.createElement("canvas").getContext("2d");gA.fillStyle=oe.backgroundColor,gA.fillRect(0,0,1,1);var WA=gA.getImageData(0,0,1,1).data,JA=ua.getContext("2d").getImageData(0,0,Fe*ge,Me*ge).data;oA=Fe;for(var _I,HI;oA--;)for(Re[oA]=[],fA=Me;fA--;){HI=ge;e:for(;HI--;)for(_I=ge;_I--;)for(lA=4;lA--;)if(JA[((fA*ge+HI)*Fe*ge+(oA*ge+_I))*4+lA]!==WA[lA]){Re[oA][fA]=!1;break e}Re[oA][fA]!==!1&&(Re[oA][fA]=!0)}JA=gA=WA=void 0}if(oe.hover||oe.click){for(Ft=!0,oA=Fe+1;oA--;)jt[oA]=[];oe.hover&&ua.addEventListener("mousemove",ca),oe.click&&(ua.addEventListener("click",Jn),ua.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),ua.addEventListener("wordcloudstart",function ba(){ua.removeEventListener("wordcloudstart",ba),ua.removeEventListener("mousemove",ca),ua.removeEventListener("click",Jn),ta=void 0})}lA=0;var Nt,bA;oe.wait!==0?(Nt=window.setTimeout,bA=window.clearTimeout):(Nt=window.setImmediate,bA=window.clearImmediate);var hA=function(IA,MA){H.forEach(function(EI){EI.addEventListener(IA,MA)},this)},II=function(IA,MA){H.forEach(function(EI){EI.removeEventListener(IA,MA)},this)},OI=function ba(){II("wordcloudstart",ba),bA(F[K])};hA("wordcloudstart",OI),F[K]=Nt(function ba(){if(lA>=oe.list.length){bA(F[K]),eA("wordcloudstop",!1),II("wordcloudstart",OI),delete F[K];return}Ct=new Date().getTime();var IA=aa(oe.list[lA]),MA=!eA("wordclouddrawn",!0,{item:oe.list[lA],drawn:IA});if(ZA()||MA){bA(F[K]),oe.abort(),eA("wordcloudabort",!1),eA("wordcloudstop",!1),II("wordcloudstart",OI),delete F[K];return}lA++,F[K]=Nt(ba,oe.wait)},oe.wait)}};DA()};M.isSupported=f,M.minFontSize=_,M.stop=function(){if(F)for(var H in F)window.clearImmediate(F[H])},d.exports?d.exports=M:s.WordCloud=M}(commonjsGlobal)})(wordcloud2);var wordcloud2Exports=wordcloud2.exports;const WordCloud=getDefaultExportFromCjs(wordcloud2Exports);class RowChart extends CategoryChart{constructor(s,f,_){super(s,f,_,{x:{}}),this.config.type="row_chart",this.onDataFiltered(null),this.labelg=this.graph_area.append("g"),this.wordcloudCanvas=createEl("canvas",{styles:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%"}},this.contentDiv)}drawWordCloud(s){const f=this.dataStore.getColumnValues(this.config.param),_=this.dataStore.getColumnColors(this.config.param),S=se=>this.filter.length>0&&this.filter.indexOf(se)===-1?"lightgray":_[f.indexOf(se)],T=(se,ae,ge)=>this.filterCategories(se[0],ge.shiftKey),F=s.map(se=>[f[se[1]],Math.log(se[0])]),M=Math.max(...F.map(se=>se[1])),P=this.wordcloudCanvas;P.width=this.contentDiv.clientWidth,P.height=this.contentDiv.clientHeight;const H=(this.config.wordSize||20)/M,J=Math.PI/2;P.style.display="block",this.graph_area.style.display="none";const K=getComputedStyle(P).getPropertyValue("--main_panel_color"),oe={list:F,color:S,click:T,weightFactor:H,backgroundColor:K,minRotation:-J,maxRotation:J,rotationSteps:2};console.log("wordcloud options",oe),WordCloud(P,oe)}drawChart(s=400){const f=this.config,_=select(this.contentDiv).transition().duration(s).ease(linear),S=this.width-this.margins.left-this.margins.right,T=this.height-this.margins.bottom-this.margins.top,F=this.dataStore.getColumnColors(this.config.param),M=this.dataStore.getColumnValues(this.config.param),P=S/this.maxCount;let H=this.rowData;if(H||console.error(">>> No data for row chart - probably a bug, needs tracking..."),this.maxCount,f.exclude_categories){const se=new Set;for(const ae of f.exclude_categories)se.add(M.indexOf(ae));H=this.rowData.filter((ae,ge)=>!se.has(ge)),H.reduce((ae,ge)=>Math.max(ae[0],ge[0]))}if(this.config.wordcloud){this.drawWordCloud(H);return}this.wordcloudCanvas.style.display="none",this.graph_area.style.display="block";const J=H.length,K=(T-(J+1)*3)/J;let oe=Math.round(K);oe=oe>20?20:oe,this.x_scale.domain([0,this.maxCount]),this.updateAxis(),this.labelg.selectAll(".row-bar").data(H,se=>se[1]).join("rect").attr("class","row-bar").on("click",(se,ae)=>{this.filterCategories(M[ae[1]],se.shiftKey)}).on("mouseover",(se,ae)=>{f.show_tooltip&&this.showToolTip(se,`${M[ae[1]]}: ${ae[0]}`)}).on("mouseout",()=>this.hideToolTip()).transition(_).style("fill",se=>{const ae=se[1];return this.filter.length>0&&this.filter.indexOf(M[ae])===-1?"lightgray":F[ae]}).attr("class","row-bar").attr("x",0).attr("width",se=>se[0]*P).attr("y",(se,ae)=>(ae+1)*3+ae*K).attr("height",K),this.graph_area.selectAll(".row-text").data(H,se=>se[1]).join("text").on("click",(se,ae)=>{this.filterCategories(M[ae[1]],se.shiftKey)}).on("mouseover",(se,ae)=>{f.show_tooltip&&this.showToolTip(se,`${M[ae[1]]}: ${ae[0]}`)}).on("mouseout",()=>this.hideToolTip()).attr("class","row-text").transition(_).text(se=>M[se[1]]===""?"none":M[se[1]]).attr("font-size",`${oe}px`).attr("x",5).style("fill","currentColor").attr("y",(se,ae)=>(ae+1)*3+ae*K+K/2).attr("dominant-baseline","central")}getSettings(){const s=super.getSettings(),f=this.config;if(f.wordcloud)return this.getWordCloudSettings();const _=Math.max(this.data.length||60);return s.concat([{type:"spinner",label:"Max Rows",current_value:f.show_limit||_,max:_,func:S=>{f.show_limit=S,this.updateData(),this.drawChart()}},{type:"check",label:"Hide zero values",current_value:f.filter_zeros,func:S=>{f.filter_zeros=S,this.updateData(),this.drawChart()}},{type:"radiobuttons",label:"Sort Order",current_value:f.sort||"default",choices:[["Default","default"],["Size","size"],["Name","name"]],func:S=>{f.sort=S,this.updateData(),this.drawChart()}},{type:"check",label:"Display as WordCloud",current_value:f.wordcloud,func:S=>{f.wordcloud=S,this.drawChart()}},{type:"check",label:"Show tooltip",current_value:f.show_tooltip,func:S=>{f.show_tooltip=S}}])}getWordCloudSettings(){super.getSettings();const s=this.config;return[{type:"slider",label:"Word Size",current_value:s.wordSize||100,min:10,max:100,func:f=>{s.wordSize=f,this.drawChart()}}]}}BaseChart.types.row_chart={class:RowChart,name:"Row Chart",params:[{type:["text","multitext","text16"],name:"Category"}]};BaseChart.types.wordcloud={class:RowChart,name:"Word Cloud",params:[{type:["text","multitext"],name:"Category"}],init:(d,s)=>{d.wordcloud=!0,d.wordSize=20}};function EventData(){let d=!1,s=!1;this.stopPropagation=()=>{d=!0},this.isPropagationStopped=()=>d,this.stopImmediatePropagation=()=>{s=!0},this.isImmediatePropagationStopped=()=>s}function Event$1(){const d=[];this.subscribe=s=>{d.push(s)},this.unsubscribe=s=>{for(let f=d.length-1;f>=0;f--)d[f]===s&&d.splice(f,1)},this.notify=function(s,f,_){f=f||new EventData,_=_||this;let S;for(let T=0;T<d.length&&!(f.isPropagationStopped()||f.isImmediatePropagationStopped());T++)S=d[T].call(_,f,s);return S}}function EventHandler(){let d=[];this.subscribe=function(s,f){return d.push({event:s,handler:f}),s.subscribe(f),this},this.unsubscribe=function(s,f){let _=d.length;for(;_--;)if(d[_].event===s&&d[_].handler===f){d.splice(_,1),s.unsubscribe(f);return}return this},this.unsubscribeAll=function(){let s=d.length;for(;s--;)d[s].event.unsubscribe(d[s].handler);return d=[],this}}function Range(d,s,f,_){f===void 0&&_===void 0&&(f=d,_=s),this.fromRow=Math.min(d,f),this.fromCell=Math.min(s,_),this.toRow=Math.max(d,f),this.toCell=Math.max(s,_),this.isSingleRow=function(){return this.fromRow===this.toRow},this.isSingleCell=function(){return this.fromRow===this.toRow&&this.fromCell===this.toCell},this.contains=function(S,T){return S>=this.fromRow&&S<=this.toRow&&T>=this.fromCell&&T<=this.toCell},this.toString=function(){return this.isSingleCell()?`(${this.fromRow}:${this.fromCell})`:`(${this.fromRow}:${this.fromCell} - ${this.toRow}:${this.toCell})`}}function NonDataItem(){this.__nonDataRow=!0}function Group(){this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.selectChecked=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}Group.prototype=new NonDataItem;Group.prototype.equals=function(d){return this.value===d.value&&this.count===d.count&&this.collapsed===d.collapsed&&this.title===d.title};function GroupTotals(){this.__groupTotals=!0,this.group=null,this.initialized=!1}GroupTotals.prototype=new NonDataItem;function EditorLock(){let d=null;this.isActive=s=>s?d===s:d!==null,this.activate=s=>{if(s!==d){if(d!==null)throw new Error("SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController");if(!s.commitCurrentEdit)throw new Error("SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()");if(!s.cancelCurrentEdit)throw new Error("SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()");d=s}},this.deactivate=s=>{if(d){if(d!==s)throw new Error("SlickGrid.EditorLock.deactivate: specified editController is not the currently active one");d=null}},this.commitCurrentEdit=()=>d?d.commitCurrentEdit():!0,this.cancelCurrentEdit=function(){return d?d.cancelCurrentEdit():!0}}function TreeColumns(d){const s={};function f(){_(d)}function _(K){K.forEach(oe=>{s[oe.id]=oe,oe.columns&&_(oe.columns)})}function S(K,oe){return K.filter(se=>{const ae=oe.call(se);return ae&&se.columns&&(se.columns=S(se.columns,oe)),ae&&(!se.columns||se.columns.length)})}function T(K,oe){K.sort((se,ae)=>{const ge=F(oe.getColumnIndex(se.id)),he=F(oe.getColumnIndex(ae.id));return ge-he}).forEach(se=>{se.columns&&T(se.columns,oe)})}function F(K){return typeof K>"u"?-1:K}function M(K){if(K.length)for(const oe in K)return M(K[oe]);else return K.columns?1+M(K.columns):1}function P(K,oe,se){let ae=[];if(se=se||0,oe===se)return K.length&&K.forEach(ge=>{ge.columns&&(ge.extractColumns=()=>H(ge))}),K;for(const ge in K)K[ge].columns&&(ae=ae.concat(P(K[ge].columns,oe,se+1)));return ae}function H(K){let oe=[];if(K.hasOwnProperty("length"))for(let se=0;se<K.length;se++)oe=oe.concat(H(K[se]));else if(K.hasOwnProperty("columns"))oe=oe.concat(H(K.columns));else return K;return oe}function J(){return JSON.parse(JSON.stringify(nodesArray))}f(),this.hasDepth=()=>{for(const K in d)if(d[K].hasOwnProperty("columns"))return!0;return!1},this.getTreeColumns=()=>d,this.extractColumns=function(){return this.hasDepth()?H(d):d},this.getDepth=()=>M(d),this.getColumnsInDepth=K=>P(d,K),this.getColumnsInGroup=K=>H(K),this.visibleColumns=()=>S(J(),function(){return this.visible}),this.filter=K=>S(J(),K),this.reOrder=K=>T(d,K),this.getById=K=>s[K],this.getInIds=K=>K.map(oe=>s[oe])}const Map$1="Map"in window?window.Map:function d(){const s={};this.get=f=>s[f],this.set=(f,_)=>{s[f]=_},this.has=f=>f in s,this.delete=f=>{delete s[f]}},Slick={Event:Event$1,EventData,EventHandler,Range,Map:Map$1,NonDataRow:NonDataItem,Group,GroupTotals,EditorLock,GlobalEditorLock:new EditorLock,TreeColumns,keyCode:{SPACE:8,BACKSPACE:8,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,TAB:9,UP:38,A:65},preClickClassName:"slick-edit-preclick",GridAutosizeColsMode:{None:"NOA",LegacyOff:"LOF",LegacyForceFit:"LFF",IgnoreViewport:"IGV",FitColsToViewport:"FCV",FitViewportToCols:"FVC"},ColAutosizeMode:{Locked:"LCK",Guide:"GUI",Content:"CON",ContentIntelligent:"CTI"},RowSelectionMode:{FirstRow:"FS1",FirstNRows:"FSN",AllRows:"ALL",LastRow:"LS1"},ValueFilterMode:{None:"NONE",DeDuplicate:"DEDP",GetGreatestAndSub:"GR8T",GetLongestTextAndSub:"LNSB",GetLongestText:"LNSC"},WidthEvalMode:{CanvasTextSize:"CANV",HTML:"HTML"}};var jquery={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(d){(function(s,f){d.exports=s.document?f(s,!0):function(_){if(!_.document)throw new Error("jQuery requires a window with a document");return f(_)}})(typeof window<"u"?window:commonjsGlobal,function(s,f){var _=[],S=Object.getPrototypeOf,T=_.slice,F=_.flat?function(ye){return _.flat.call(ye)}:function(ye){return _.concat.apply([],ye)},M=_.push,P=_.indexOf,H={},J=H.toString,K=H.hasOwnProperty,oe=K.toString,se=oe.call(Object),ae={},ge=function(Le){return typeof Le=="function"&&typeof Le.nodeType!="number"&&typeof Le.item!="function"},he=function(Le){return Le!=null&&Le===Le.window},Be=s.document,pe={type:!0,src:!0,nonce:!0,noModule:!0};function be(ye,Le,Ge){Ge=Ge||Be;var Ue,Et,St=Ge.createElement("script");if(St.text=ye,Le)for(Ue in pe)Et=Le[Ue]||Le.getAttribute&&Le.getAttribute(Ue),Et&&St.setAttribute(Ue,Et);Ge.head.appendChild(St).parentNode.removeChild(St)}function Re(ye){return ye==null?ye+"":typeof ye=="object"||typeof ye=="function"?H[J.call(ye)]||"object":typeof ye}var Fe="3.7.1",Me=/HTML$/i,ve=function(ye,Le){return new ve.fn.init(ye,Le)};ve.fn=ve.prototype={jquery:Fe,constructor:ve,length:0,toArray:function(){return T.call(this)},get:function(ye){return ye==null?T.call(this):ye<0?this[ye+this.length]:this[ye]},pushStack:function(ye){var Le=ve.merge(this.constructor(),ye);return Le.prevObject=this,Le},each:function(ye){return ve.each(this,ye)},map:function(ye){return this.pushStack(ve.map(this,function(Le,Ge){return ye.call(Le,Ge,Le)}))},slice:function(){return this.pushStack(T.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ve.grep(this,function(ye,Le){return(Le+1)%2}))},odd:function(){return this.pushStack(ve.grep(this,function(ye,Le){return Le%2}))},eq:function(ye){var Le=this.length,Ge=+ye+(ye<0?Le:0);return this.pushStack(Ge>=0&&Ge<Le?[this[Ge]]:[])},end:function(){return this.prevObject||this.constructor()},push:M,sort:_.sort,splice:_.splice},ve.extend=ve.fn.extend=function(){var ye,Le,Ge,Ue,Et,St,Lt=arguments[0]||{},Hn=1,Yr=arguments.length,sa=!1;for(typeof Lt=="boolean"&&(sa=Lt,Lt=arguments[Hn]||{},Hn++),typeof Lt!="object"&&!ge(Lt)&&(Lt={}),Hn===Yr&&(Lt=this,Hn--);Hn<Yr;Hn++)if((ye=arguments[Hn])!=null)for(Le in ye)Ue=ye[Le],!(Le==="__proto__"||Lt===Ue)&&(sa&&Ue&&(ve.isPlainObject(Ue)||(Et=Array.isArray(Ue)))?(Ge=Lt[Le],Et&&!Array.isArray(Ge)?St=[]:!Et&&!ve.isPlainObject(Ge)?St={}:St=Ge,Et=!1,Lt[Le]=ve.extend(sa,St,Ue)):Ue!==void 0&&(Lt[Le]=Ue));return Lt},ve.extend({expando:"jQuery"+(Fe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(ye){throw new Error(ye)},noop:function(){},isPlainObject:function(ye){var Le,Ge;return!ye||J.call(ye)!=="[object Object]"?!1:(Le=S(ye),Le?(Ge=K.call(Le,"constructor")&&Le.constructor,typeof Ge=="function"&&oe.call(Ge)===se):!0)},isEmptyObject:function(ye){var Le;for(Le in ye)return!1;return!0},globalEval:function(ye,Le,Ge){be(ye,{nonce:Le&&Le.nonce},Ge)},each:function(ye,Le){var Ge,Ue=0;if(At(ye))for(Ge=ye.length;Ue<Ge&&Le.call(ye[Ue],Ue,ye[Ue])!==!1;Ue++);else for(Ue in ye)if(Le.call(ye[Ue],Ue,ye[Ue])===!1)break;return ye},text:function(ye){var Le,Ge="",Ue=0,Et=ye.nodeType;if(!Et)for(;Le=ye[Ue++];)Ge+=ve.text(Le);return Et===1||Et===11?ye.textContent:Et===9?ye.documentElement.textContent:Et===3||Et===4?ye.nodeValue:Ge},makeArray:function(ye,Le){var Ge=Le||[];return ye!=null&&(At(Object(ye))?ve.merge(Ge,typeof ye=="string"?[ye]:ye):M.call(Ge,ye)),Ge},inArray:function(ye,Le,Ge){return Le==null?-1:P.call(Le,ye,Ge)},isXMLDoc:function(ye){var Le=ye&&ye.namespaceURI,Ge=ye&&(ye.ownerDocument||ye).documentElement;return!Me.test(Le||Ge&&Ge.nodeName||"HTML")},merge:function(ye,Le){for(var Ge=+Le.length,Ue=0,Et=ye.length;Ue<Ge;Ue++)ye[Et++]=Le[Ue];return ye.length=Et,ye},grep:function(ye,Le,Ge){for(var Ue,Et=[],St=0,Lt=ye.length,Hn=!Ge;St<Lt;St++)Ue=!Le(ye[St],St),Ue!==Hn&&Et.push(ye[St]);return Et},map:function(ye,Le,Ge){var Ue,Et,St=0,Lt=[];if(At(ye))for(Ue=ye.length;St<Ue;St++)Et=Le(ye[St],St,Ge),Et!=null&&Lt.push(Et);else for(St in ye)Et=Le(ye[St],St,Ge),Et!=null&&Lt.push(Et);return F(Lt)},guid:1,support:ae}),typeof Symbol=="function"&&(ve.fn[Symbol.iterator]=_[Symbol.iterator]),ve.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(ye,Le){H["[object "+Le+"]"]=Le.toLowerCase()});function At(ye){var Le=!!ye&&"length"in ye&&ye.length,Ge=Re(ye);return ge(ye)||he(ye)?!1:Ge==="array"||Le===0||typeof Le=="number"&&Le>0&&Le-1 in ye}function Ct(ye,Le){return ye.nodeName&&ye.nodeName.toLowerCase()===Le.toLowerCase()}var Rt=_.pop,It=_.sort,xt=_.splice,wt="[\\x20\\t\\r\\n\\f]",Ft=new RegExp("^"+wt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+wt+"+$","g");ve.contains=function(ye,Le){var Ge=Le&&Le.parentNode;return ye===Ge||!!(Ge&&Ge.nodeType===1&&(ye.contains?ye.contains(Ge):ye.compareDocumentPosition&&ye.compareDocumentPosition(Ge)&16))};var jt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function ta(ye,Le){return Le?ye==="\0"?"":ye.slice(0,-1)+"\\"+ye.charCodeAt(ye.length-1).toString(16)+" ":"\\"+ye}ve.escapeSelector=function(ye){return(ye+"").replace(jt,ta)};var Qn=Be,ca=M;(function(){var ye,Le,Ge,Ue,Et,St=ca,Lt,Hn,Yr,sa,dA,SA=ve.expando,iA=0,XA=0,ZI=nm(),fC=nm(),aC=nm(),XC=nm(),kC=function(zt,ea){return zt===ea&&(Et=!0),0},pC="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",yE="(?:\\\\[\\da-fA-F]{1,6}"+wt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",dC="\\["+wt+"*("+yE+")(?:"+wt+"*([*^$|!~]?=)"+wt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+yE+"))|)"+wt+"*\\]",eE=":("+yE+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+dC+")*)|.*)\\)|)",IC=new RegExp(wt+"+","g"),bC=new RegExp("^"+wt+"*,"+wt+"*"),QE=new RegExp("^"+wt+"*([>+~]|"+wt+")"+wt+"*"),Im=new RegExp(wt+"|>"),uE=new RegExp(eE),TE=new RegExp("^"+yE+"$"),gE={ID:new RegExp("^#("+yE+")"),CLASS:new RegExp("^\\.("+yE+")"),TAG:new RegExp("^("+yE+"|[*])"),ATTR:new RegExp("^"+dC),PSEUDO:new RegExp("^"+eE),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+wt+"*(even|odd|(([+-]|)(\\d*)n|)"+wt+"*(?:([+-]|)"+wt+"*(\\d+)|))"+wt+"*\\)|)","i"),bool:new RegExp("^(?:"+pC+")$","i"),needsContext:new RegExp("^"+wt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+wt+"*((?:-\\d)?\\d*)"+wt+"*\\)|)(?=[^-]|$)","i")},NE=/^(?:input|select|textarea|button)$/i,xE=/^h\d$/i,hE=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,AB=/[+~]/,LE=new RegExp("\\\\[\\da-fA-F]{1,6}"+wt+"?|\\\\([^\\r\\n\\f])","g"),FE=function(zt,ea){var tA="0x"+zt.slice(1)-65536;return ea||(tA<0?String.fromCharCode(tA+65536):String.fromCharCode(tA>>10|55296,tA&1023|56320))},by=function(){ME()},lB=Em(function(zt){return zt.disabled===!0&&Ct(zt,"fieldset")},{dir:"parentNode",next:"legend"});function $m(){try{return Lt.activeElement}catch{}}try{St.apply(_=T.call(Qn.childNodes),Qn.childNodes),_[Qn.childNodes.length].nodeType}catch{St={apply:function(ea,tA){ca.apply(ea,T.call(tA))},call:function(ea){ca.apply(ea,T.call(arguments,1))}}}function BC(zt,ea,tA,cA){var _A,hI,yI,RI,QI,lC,KI,jI=ea&&ea.ownerDocument,hC=ea?ea.nodeType:9;if(tA=tA||[],typeof zt!="string"||!zt||hC!==1&&hC!==9&&hC!==11)return tA;if(!cA&&(ME(ea),ea=ea||Lt,Yr)){if(hC!==11&&(QI=hE.exec(zt)))if(_A=QI[1]){if(hC===9)if(yI=ea.getElementById(_A)){if(yI.id===_A)return St.call(tA,yI),tA}else return tA;else if(jI&&(yI=jI.getElementById(_A))&&BC.contains(ea,yI)&&yI.id===_A)return St.call(tA,yI),tA}else{if(QI[2])return St.apply(tA,ea.getElementsByTagName(zt)),tA;if((_A=QI[3])&&ea.getElementsByClassName)return St.apply(tA,ea.getElementsByClassName(_A)),tA}if(!XC[zt+" "]&&(!sa||!sa.test(zt))){if(KI=zt,jI=ea,hC===1&&(Im.test(zt)||QE.test(zt))){for(jI=AB.test(zt)&&qm(ea.parentNode)||ea,(jI!=ea||!ae.scope)&&((RI=ea.getAttribute("id"))?RI=ve.escapeSelector(RI):ea.setAttribute("id",RI=SA)),lC=om(zt),hI=lC.length;hI--;)lC[hI]=(RI?"#"+RI:":scope")+" "+Cm(lC[hI]);KI=lC.join(",")}try{return St.apply(tA,jI.querySelectorAll(KI)),tA}catch{XC(zt,!0)}finally{RI===SA&&ea.removeAttribute("id")}}}return NB(zt.replace(Ft,"$1"),ea,tA,cA)}function nm(){var zt=[];function ea(tA,cA){return zt.push(tA+" ")>Le.cacheLength&&delete ea[zt.shift()],ea[tA+" "]=cA}return ea}function tE(zt){return zt[SA]=!0,zt}function $E(zt){var ea=Lt.createElement("fieldset");try{return!!zt(ea)}catch{return!1}finally{ea.parentNode&&ea.parentNode.removeChild(ea),ea=null}}function cB(zt){return function(ea){return Ct(ea,"input")&&ea.type===zt}}function uB(zt){return function(ea){return(Ct(ea,"input")||Ct(ea,"button"))&&ea.type===zt}}function Hm(zt){return function(ea){return"form"in ea?ea.parentNode&&ea.disabled===!1?"label"in ea?"label"in ea.parentNode?ea.parentNode.disabled===zt:ea.disabled===zt:ea.isDisabled===zt||ea.isDisabled!==!zt&&lB(ea)===zt:ea.disabled===zt:"label"in ea?ea.disabled===zt:!1}}function HE(zt){return tE(function(ea){return ea=+ea,tE(function(tA,cA){for(var _A,hI=zt([],tA.length,ea),yI=hI.length;yI--;)tA[_A=hI[yI]]&&(tA[_A]=!(cA[_A]=tA[_A]))})})}function qm(zt){return zt&&typeof zt.getElementsByTagName<"u"&&zt}function ME(zt){var ea,tA=zt?zt.ownerDocument||zt:Qn;return tA==Lt||tA.nodeType!==9||!tA.documentElement||(Lt=tA,Hn=Lt.documentElement,Yr=!ve.isXMLDoc(Lt),dA=Hn.matches||Hn.webkitMatchesSelector||Hn.msMatchesSelector,Hn.msMatchesSelector&&Qn!=Lt&&(ea=Lt.defaultView)&&ea.top!==ea&&ea.addEventListener("unload",by),ae.getById=$E(function(cA){return Hn.appendChild(cA).id=ve.expando,!Lt.getElementsByName||!Lt.getElementsByName(ve.expando).length}),ae.disconnectedMatch=$E(function(cA){return dA.call(cA,"*")}),ae.scope=$E(function(){return Lt.querySelectorAll(":scope")}),ae.cssHas=$E(function(){try{return Lt.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),ae.getById?(Le.filter.ID=function(cA){var _A=cA.replace(LE,FE);return function(hI){return hI.getAttribute("id")===_A}},Le.find.ID=function(cA,_A){if(typeof _A.getElementById<"u"&&Yr){var hI=_A.getElementById(cA);return hI?[hI]:[]}}):(Le.filter.ID=function(cA){var _A=cA.replace(LE,FE);return function(hI){var yI=typeof hI.getAttributeNode<"u"&&hI.getAttributeNode("id");return yI&&yI.value===_A}},Le.find.ID=function(cA,_A){if(typeof _A.getElementById<"u"&&Yr){var hI,yI,RI,QI=_A.getElementById(cA);if(QI){if(hI=QI.getAttributeNode("id"),hI&&hI.value===cA)return[QI];for(RI=_A.getElementsByName(cA),yI=0;QI=RI[yI++];)if(hI=QI.getAttributeNode("id"),hI&&hI.value===cA)return[QI]}return[]}}),Le.find.TAG=function(cA,_A){return typeof _A.getElementsByTagName<"u"?_A.getElementsByTagName(cA):_A.querySelectorAll(cA)},Le.find.CLASS=function(cA,_A){if(typeof _A.getElementsByClassName<"u"&&Yr)return _A.getElementsByClassName(cA)},sa=[],$E(function(cA){var _A;Hn.appendChild(cA).innerHTML="<a id='"+SA+"' href='' disabled='disabled'></a><select id='"+SA+"-\r\\' disabled='disabled'><option selected=''></option></select>",cA.querySelectorAll("[selected]").length||sa.push("\\["+wt+"*(?:value|"+pC+")"),cA.querySelectorAll("[id~="+SA+"-]").length||sa.push("~="),cA.querySelectorAll("a#"+SA+"+*").length||sa.push(".#.+[+~]"),cA.querySelectorAll(":checked").length||sa.push(":checked"),_A=Lt.createElement("input"),_A.setAttribute("type","hidden"),cA.appendChild(_A).setAttribute("name","D"),Hn.appendChild(cA).disabled=!0,cA.querySelectorAll(":disabled").length!==2&&sa.push(":enabled",":disabled"),_A=Lt.createElement("input"),_A.setAttribute("name",""),cA.appendChild(_A),cA.querySelectorAll("[name='']").length||sa.push("\\["+wt+"*name"+wt+"*="+wt+`*(?:''|"")`)}),ae.cssHas||sa.push(":has"),sa=sa.length&&new RegExp(sa.join("|")),kC=function(cA,_A){if(cA===_A)return Et=!0,0;var hI=!cA.compareDocumentPosition-!_A.compareDocumentPosition;return hI||(hI=(cA.ownerDocument||cA)==(_A.ownerDocument||_A)?cA.compareDocumentPosition(_A):1,hI&1||!ae.sortDetached&&_A.compareDocumentPosition(cA)===hI?cA===Lt||cA.ownerDocument==Qn&&BC.contains(Qn,cA)?-1:_A===Lt||_A.ownerDocument==Qn&&BC.contains(Qn,_A)?1:Ue?P.call(Ue,cA)-P.call(Ue,_A):0:hI&4?-1:1)}),Lt}BC.matches=function(zt,ea){return BC(zt,null,null,ea)},BC.matchesSelector=function(zt,ea){if(ME(zt),Yr&&!XC[ea+" "]&&(!sa||!sa.test(ea)))try{var tA=dA.call(zt,ea);if(tA||ae.disconnectedMatch||zt.document&&zt.document.nodeType!==11)return tA}catch{XC(ea,!0)}return BC(ea,Lt,null,[zt]).length>0},BC.contains=function(zt,ea){return(zt.ownerDocument||zt)!=Lt&&ME(zt),ve.contains(zt,ea)},BC.attr=function(zt,ea){(zt.ownerDocument||zt)!=Lt&&ME(zt);var tA=Le.attrHandle[ea.toLowerCase()],cA=tA&&K.call(Le.attrHandle,ea.toLowerCase())?tA(zt,ea,!Yr):void 0;return cA!==void 0?cA:zt.getAttribute(ea)},BC.error=function(zt){throw new Error("Syntax error, unrecognized expression: "+zt)},ve.uniqueSort=function(zt){var ea,tA=[],cA=0,_A=0;if(Et=!ae.sortStable,Ue=!ae.sortStable&&T.call(zt,0),It.call(zt,kC),Et){for(;ea=zt[_A++];)ea===zt[_A]&&(cA=tA.push(_A));for(;cA--;)xt.call(zt,tA[cA],1)}return Ue=null,zt},ve.fn.uniqueSort=function(){return this.pushStack(ve.uniqueSort(T.apply(this)))},Le=ve.expr={cacheLength:50,createPseudo:tE,match:gE,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(zt){return zt[1]=zt[1].replace(LE,FE),zt[3]=(zt[3]||zt[4]||zt[5]||"").replace(LE,FE),zt[2]==="~="&&(zt[3]=" "+zt[3]+" "),zt.slice(0,4)},CHILD:function(zt){return zt[1]=zt[1].toLowerCase(),zt[1].slice(0,3)==="nth"?(zt[3]||BC.error(zt[0]),zt[4]=+(zt[4]?zt[5]+(zt[6]||1):2*(zt[3]==="even"||zt[3]==="odd")),zt[5]=+(zt[7]+zt[8]||zt[3]==="odd")):zt[3]&&BC.error(zt[0]),zt},PSEUDO:function(zt){var ea,tA=!zt[6]&&zt[2];return gE.CHILD.test(zt[0])?null:(zt[3]?zt[2]=zt[4]||zt[5]||"":tA&&uE.test(tA)&&(ea=om(tA,!0))&&(ea=tA.indexOf(")",tA.length-ea)-tA.length)&&(zt[0]=zt[0].slice(0,ea),zt[2]=tA.slice(0,ea)),zt.slice(0,3))}},filter:{TAG:function(zt){var ea=zt.replace(LE,FE).toLowerCase();return zt==="*"?function(){return!0}:function(tA){return Ct(tA,ea)}},CLASS:function(zt){var ea=ZI[zt+" "];return ea||(ea=new RegExp("(^|"+wt+")"+zt+"("+wt+"|$)"))&&ZI(zt,function(tA){return ea.test(typeof tA.className=="string"&&tA.className||typeof tA.getAttribute<"u"&&tA.getAttribute("class")||"")})},ATTR:function(zt,ea,tA){return function(cA){var _A=BC.attr(cA,zt);return _A==null?ea==="!=":ea?(_A+="",ea==="="?_A===tA:ea==="!="?_A!==tA:ea==="^="?tA&&_A.indexOf(tA)===0:ea==="*="?tA&&_A.indexOf(tA)>-1:ea==="$="?tA&&_A.slice(-tA.length)===tA:ea==="~="?(" "+_A.replace(IC," ")+" ").indexOf(tA)>-1:ea==="|="?_A===tA||_A.slice(0,tA.length+1)===tA+"-":!1):!0}},CHILD:function(zt,ea,tA,cA,_A){var hI=zt.slice(0,3)!=="nth",yI=zt.slice(-4)!=="last",RI=ea==="of-type";return cA===1&&_A===0?function(QI){return!!QI.parentNode}:function(QI,lC,KI){var jI,hC,VI,SC,AE,rE=hI!==yI?"nextSibling":"previousSibling",IE=QI.parentNode,bE=RI&&QI.nodeName.toLowerCase(),zE=!KI&&!RI,HC=!1;if(IE){if(hI){for(;rE;){for(VI=QI;VI=VI[rE];)if(RI?Ct(VI,bE):VI.nodeType===1)return!1;AE=rE=zt==="only"&&!AE&&"nextSibling"}return!0}if(AE=[yI?IE.firstChild:IE.lastChild],yI&&zE){for(hC=IE[SA]||(IE[SA]={}),jI=hC[zt]||[],SC=jI[0]===iA&&jI[1],HC=SC&&jI[2],VI=SC&&IE.childNodes[SC];VI=++SC&&VI&&VI[rE]||(HC=SC=0)||AE.pop();)if(VI.nodeType===1&&++HC&&VI===QI){hC[zt]=[iA,SC,HC];break}}else if(zE&&(hC=QI[SA]||(QI[SA]={}),jI=hC[zt]||[],SC=jI[0]===iA&&jI[1],HC=SC),HC===!1)for(;(VI=++SC&&VI&&VI[rE]||(HC=SC=0)||AE.pop())&&!((RI?Ct(VI,bE):VI.nodeType===1)&&++HC&&(zE&&(hC=VI[SA]||(VI[SA]={}),hC[zt]=[iA,HC]),VI===QI)););return HC-=_A,HC===cA||HC%cA===0&&HC/cA>=0}}},PSEUDO:function(zt,ea){var tA,cA=Le.pseudos[zt]||Le.setFilters[zt.toLowerCase()]||BC.error("unsupported pseudo: "+zt);return cA[SA]?cA(ea):cA.length>1?(tA=[zt,zt,"",ea],Le.setFilters.hasOwnProperty(zt.toLowerCase())?tE(function(_A,hI){for(var yI,RI=cA(_A,ea),QI=RI.length;QI--;)yI=P.call(_A,RI[QI]),_A[yI]=!(hI[yI]=RI[QI])}):function(_A){return cA(_A,0,tA)}):cA}},pseudos:{not:tE(function(zt){var ea=[],tA=[],cA=hB(zt.replace(Ft,"$1"));return cA[SA]?tE(function(_A,hI,yI,RI){for(var QI,lC=cA(_A,null,RI,[]),KI=_A.length;KI--;)(QI=lC[KI])&&(_A[KI]=!(hI[KI]=QI))}):function(_A,hI,yI){return ea[0]=_A,cA(ea,null,yI,tA),ea[0]=null,!tA.pop()}}),has:tE(function(zt){return function(ea){return BC(zt,ea).length>0}}),contains:tE(function(zt){return zt=zt.replace(LE,FE),function(ea){return(ea.textContent||ve.text(ea)).indexOf(zt)>-1}}),lang:tE(function(zt){return TE.test(zt||"")||BC.error("unsupported lang: "+zt),zt=zt.replace(LE,FE).toLowerCase(),function(ea){var tA;do if(tA=Yr?ea.lang:ea.getAttribute("xml:lang")||ea.getAttribute("lang"))return tA=tA.toLowerCase(),tA===zt||tA.indexOf(zt+"-")===0;while((ea=ea.parentNode)&&ea.nodeType===1);return!1}}),target:function(zt){var ea=s.location&&s.location.hash;return ea&&ea.slice(1)===zt.id},root:function(zt){return zt===Hn},focus:function(zt){return zt===$m()&&Lt.hasFocus()&&!!(zt.type||zt.href||~zt.tabIndex)},enabled:Hm(!1),disabled:Hm(!0),checked:function(zt){return Ct(zt,"input")&&!!zt.checked||Ct(zt,"option")&&!!zt.selected},selected:function(zt){return zt.parentNode&&zt.parentNode.selectedIndex,zt.selected===!0},empty:function(zt){for(zt=zt.firstChild;zt;zt=zt.nextSibling)if(zt.nodeType<6)return!1;return!0},parent:function(zt){return!Le.pseudos.empty(zt)},header:function(zt){return xE.test(zt.nodeName)},input:function(zt){return NE.test(zt.nodeName)},button:function(zt){return Ct(zt,"input")&&zt.type==="button"||Ct(zt,"button")},text:function(zt){var ea;return Ct(zt,"input")&&zt.type==="text"&&((ea=zt.getAttribute("type"))==null||ea.toLowerCase()==="text")},first:HE(function(){return[0]}),last:HE(function(zt,ea){return[ea-1]}),eq:HE(function(zt,ea,tA){return[tA<0?tA+ea:tA]}),even:HE(function(zt,ea){for(var tA=0;tA<ea;tA+=2)zt.push(tA);return zt}),odd:HE(function(zt,ea){for(var tA=1;tA<ea;tA+=2)zt.push(tA);return zt}),lt:HE(function(zt,ea,tA){var cA;for(tA<0?cA=tA+ea:tA>ea?cA=ea:cA=tA;--cA>=0;)zt.push(cA);return zt}),gt:HE(function(zt,ea,tA){for(var cA=tA<0?tA+ea:tA;++cA<ea;)zt.push(cA);return zt})}},Le.pseudos.nth=Le.pseudos.eq;for(ye in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Le.pseudos[ye]=cB(ye);for(ye in{submit:!0,reset:!0})Le.pseudos[ye]=uB(ye);function gB(){}gB.prototype=Le.filters=Le.pseudos,Le.setFilters=new gB;function om(zt,ea){var tA,cA,_A,hI,yI,RI,QI,lC=fC[zt+" "];if(lC)return ea?0:lC.slice(0);for(yI=zt,RI=[],QI=Le.preFilter;yI;){(!tA||(cA=bC.exec(yI)))&&(cA&&(yI=yI.slice(cA[0].length)||yI),RI.push(_A=[])),tA=!1,(cA=QE.exec(yI))&&(tA=cA.shift(),_A.push({value:tA,type:cA[0].replace(Ft," ")}),yI=yI.slice(tA.length));for(hI in Le.filter)(cA=gE[hI].exec(yI))&&(!QI[hI]||(cA=QI[hI](cA)))&&(tA=cA.shift(),_A.push({value:tA,type:hI,matches:cA}),yI=yI.slice(tA.length));if(!tA)break}return ea?yI.length:yI?BC.error(zt):fC(zt,RI).slice(0)}function Cm(zt){for(var ea=0,tA=zt.length,cA="";ea<tA;ea++)cA+=zt[ea].value;return cA}function Em(zt,ea,tA){var cA=ea.dir,_A=ea.next,hI=_A||cA,yI=tA&&hI==="parentNode",RI=XA++;return ea.first?function(QI,lC,KI){for(;QI=QI[cA];)if(QI.nodeType===1||yI)return zt(QI,lC,KI);return!1}:function(QI,lC,KI){var jI,hC,VI=[iA,RI];if(KI){for(;QI=QI[cA];)if((QI.nodeType===1||yI)&&zt(QI,lC,KI))return!0}else for(;QI=QI[cA];)if(QI.nodeType===1||yI)if(hC=QI[SA]||(QI[SA]={}),_A&&Ct(QI,_A))QI=QI[cA]||QI;else{if((jI=hC[hI])&&jI[0]===iA&&jI[1]===RI)return VI[2]=jI[2];if(hC[hI]=VI,VI[2]=zt(QI,lC,KI))return!0}return!1}}function Ym(zt){return zt.length>1?function(ea,tA,cA){for(var _A=zt.length;_A--;)if(!zt[_A](ea,tA,cA))return!1;return!0}:zt[0]}function sm(zt,ea,tA){for(var cA=0,_A=ea.length;cA<_A;cA++)BC(zt,ea[cA],tA);return tA}function am(zt,ea,tA,cA,_A){for(var hI,yI=[],RI=0,QI=zt.length,lC=ea!=null;RI<QI;RI++)(hI=zt[RI])&&(!tA||tA(hI,cA,_A))&&(yI.push(hI),lC&&ea.push(RI));return yI}function mm(zt,ea,tA,cA,_A,hI){return cA&&!cA[SA]&&(cA=mm(cA)),_A&&!_A[SA]&&(_A=mm(_A,hI)),tE(function(yI,RI,QI,lC){var KI,jI,hC,VI,SC=[],AE=[],rE=RI.length,IE=yI||sm(ea||"*",QI.nodeType?[QI]:QI,[]),bE=zt&&(yI||!ea)?am(IE,SC,zt,QI,lC):IE;if(tA?(VI=_A||(yI?zt:rE||cA)?[]:RI,tA(bE,VI,QI,lC)):VI=bE,cA)for(KI=am(VI,AE),cA(KI,[],QI,lC),jI=KI.length;jI--;)(hC=KI[jI])&&(VI[AE[jI]]=!(bE[AE[jI]]=hC));if(yI){if(_A||zt){if(_A){for(KI=[],jI=VI.length;jI--;)(hC=VI[jI])&&KI.push(bE[jI]=hC);_A(null,VI=[],KI,lC)}for(jI=VI.length;jI--;)(hC=VI[jI])&&(KI=_A?P.call(yI,hC):SC[jI])>-1&&(yI[KI]=!(RI[KI]=hC))}}else VI=am(VI===RI?VI.splice(rE,VI.length):VI),_A?_A(null,RI,VI,lC):St.apply(RI,VI)})}function jE(zt){for(var ea,tA,cA,_A=zt.length,hI=Le.relative[zt[0].type],yI=hI||Le.relative[" "],RI=hI?1:0,QI=Em(function(jI){return jI===ea},yI,!0),lC=Em(function(jI){return P.call(ea,jI)>-1},yI,!0),KI=[function(jI,hC,VI){var SC=!hI&&(VI||hC!=Ge)||((ea=hC).nodeType?QI(jI,hC,VI):lC(jI,hC,VI));return ea=null,SC}];RI<_A;RI++)if(tA=Le.relative[zt[RI].type])KI=[Em(Ym(KI),tA)];else{if(tA=Le.filter[zt[RI].type].apply(null,zt[RI].matches),tA[SA]){for(cA=++RI;cA<_A&&!Le.relative[zt[cA].type];cA++);return mm(RI>1&&Ym(KI),RI>1&&Cm(zt.slice(0,RI-1).concat({value:zt[RI-2].type===" "?"*":""})).replace(Ft,"$1"),tA,RI<cA&&jE(zt.slice(RI,cA)),cA<_A&&jE(zt=zt.slice(cA)),cA<_A&&Cm(zt))}KI.push(tA)}return Ym(KI)}function Dy(zt,ea){var tA=ea.length>0,cA=zt.length>0,_A=function(hI,yI,RI,QI,lC){var KI,jI,hC,VI=0,SC="0",AE=hI&&[],rE=[],IE=Ge,bE=hI||cA&&Le.find.TAG("*",lC),zE=iA+=IE==null?1:Math.random()||.1,HC=bE.length;for(lC&&(Ge=yI==Lt||yI||lC);SC!==HC&&(KI=bE[SC])!=null;SC++){if(cA&&KI){for(jI=0,!yI&&KI.ownerDocument!=Lt&&(ME(KI),RI=!Yr);hC=zt[jI++];)if(hC(KI,yI||Lt,RI)){St.call(QI,KI);break}lC&&(iA=zE)}tA&&((KI=!hC&&KI)&&VI--,hI&&AE.push(KI))}if(VI+=SC,tA&&SC!==VI){for(jI=0;hC=ea[jI++];)hC(AE,rE,yI,RI);if(hI){if(VI>0)for(;SC--;)AE[SC]||rE[SC]||(rE[SC]=Rt.call(QI));rE=am(rE)}St.apply(QI,rE),lC&&!hI&&rE.length>0&&VI+ea.length>1&&ve.uniqueSort(QI)}return lC&&(iA=zE,Ge=IE),AE};return tA?tE(_A):_A}function hB(zt,ea){var tA,cA=[],_A=[],hI=aC[zt+" "];if(!hI){for(ea||(ea=om(zt)),tA=ea.length;tA--;)hI=jE(ea[tA]),hI[SA]?cA.push(hI):_A.push(hI);hI=aC(zt,Dy(_A,cA)),hI.selector=zt}return hI}function NB(zt,ea,tA,cA){var _A,hI,yI,RI,QI,lC=typeof zt=="function"&&zt,KI=!cA&&om(zt=lC.selector||zt);if(tA=tA||[],KI.length===1){if(hI=KI[0]=KI[0].slice(0),hI.length>2&&(yI=hI[0]).type==="ID"&&ea.nodeType===9&&Yr&&Le.relative[hI[1].type]){if(ea=(Le.find.ID(yI.matches[0].replace(LE,FE),ea)||[])[0],ea)lC&&(ea=ea.parentNode);else return tA;zt=zt.slice(hI.shift().value.length)}for(_A=gE.needsContext.test(zt)?0:hI.length;_A--&&(yI=hI[_A],!Le.relative[RI=yI.type]);)if((QI=Le.find[RI])&&(cA=QI(yI.matches[0].replace(LE,FE),AB.test(hI[0].type)&&qm(ea.parentNode)||ea))){if(hI.splice(_A,1),zt=cA.length&&Cm(hI),!zt)return St.apply(tA,cA),tA;break}}return(lC||hB(zt,KI))(cA,ea,!Yr,tA,!ea||AB.test(zt)&&qm(ea.parentNode)||ea),tA}ae.sortStable=SA.split("").sort(kC).join("")===SA,ME(),ae.sortDetached=$E(function(zt){return zt.compareDocumentPosition(Lt.createElement("fieldset"))&1}),ve.find=BC,ve.expr[":"]=ve.expr.pseudos,ve.unique=ve.uniqueSort,BC.compile=hB,BC.select=NB,BC.setDocument=ME,BC.tokenize=om,BC.escape=ve.escapeSelector,BC.getText=ve.text,BC.isXML=ve.isXMLDoc,BC.selectors=ve.expr,BC.support=ve.support,BC.uniqueSort=ve.uniqueSort})();var Jn=function(ye,Le,Ge){for(var Ue=[],Et=Ge!==void 0;(ye=ye[Le])&&ye.nodeType!==9;)if(ye.nodeType===1){if(Et&&ve(ye).is(Ge))break;Ue.push(ye)}return Ue},wA=function(ye,Le){for(var Ge=[];ye;ye=ye.nextSibling)ye.nodeType===1&&ye!==Le&&Ge.push(ye);return Ge},LA=ve.expr.match.needsContext,ZA=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function xI(ye,Le,Ge){return ge(Le)?ve.grep(ye,function(Ue,Et){return!!Le.call(Ue,Et,Ue)!==Ge}):Le.nodeType?ve.grep(ye,function(Ue){return Ue===Le!==Ge}):typeof Le!="string"?ve.grep(ye,function(Ue){return P.call(Le,Ue)>-1!==Ge}):ve.filter(Le,ye,Ge)}ve.filter=function(ye,Le,Ge){var Ue=Le[0];return Ge&&(ye=":not("+ye+")"),Le.length===1&&Ue.nodeType===1?ve.find.matchesSelector(Ue,ye)?[Ue]:[]:ve.find.matches(ye,ve.grep(Le,function(Et){return Et.nodeType===1}))},ve.fn.extend({find:function(ye){var Le,Ge,Ue=this.length,Et=this;if(typeof ye!="string")return this.pushStack(ve(ye).filter(function(){for(Le=0;Le<Ue;Le++)if(ve.contains(Et[Le],this))return!0}));for(Ge=this.pushStack([]),Le=0;Le<Ue;Le++)ve.find(ye,Et[Le],Ge);return Ue>1?ve.uniqueSort(Ge):Ge},filter:function(ye){return this.pushStack(xI(this,ye||[],!1))},not:function(ye){return this.pushStack(xI(this,ye||[],!0))},is:function(ye){return!!xI(this,typeof ye=="string"&&LA.test(ye)?ve(ye):ye||[],!1).length}});var cI,pI=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,aI=ve.fn.init=function(ye,Le,Ge){var Ue,Et;if(!ye)return this;if(Ge=Ge||cI,typeof ye=="string")if(ye[0]==="<"&&ye[ye.length-1]===">"&&ye.length>=3?Ue=[null,ye,null]:Ue=pI.exec(ye),Ue&&(Ue[1]||!Le))if(Ue[1]){if(Le=Le instanceof ve?Le[0]:Le,ve.merge(this,ve.parseHTML(Ue[1],Le&&Le.nodeType?Le.ownerDocument||Le:Be,!0)),ZA.test(Ue[1])&&ve.isPlainObject(Le))for(Ue in Le)ge(this[Ue])?this[Ue](Le[Ue]):this.attr(Ue,Le[Ue]);return this}else return Et=Be.getElementById(Ue[2]),Et&&(this[0]=Et,this.length=1),this;else return!Le||Le.jquery?(Le||Ge).find(ye):this.constructor(Le).find(ye);else{if(ye.nodeType)return this[0]=ye,this.length=1,this;if(ge(ye))return Ge.ready!==void 0?Ge.ready(ye):ye(ve)}return ve.makeArray(ye,this)};aI.prototype=ve.fn,cI=ve(Be);var nI=/^(?:parents|prev(?:Until|All))/,uA={children:!0,contents:!0,next:!0,prev:!0};ve.fn.extend({has:function(ye){var Le=ve(ye,this),Ge=Le.length;return this.filter(function(){for(var Ue=0;Ue<Ge;Ue++)if(ve.contains(this,Le[Ue]))return!0})},closest:function(ye,Le){var Ge,Ue=0,Et=this.length,St=[],Lt=typeof ye!="string"&&ve(ye);if(!LA.test(ye)){for(;Ue<Et;Ue++)for(Ge=this[Ue];Ge&&Ge!==Le;Ge=Ge.parentNode)if(Ge.nodeType<11&&(Lt?Lt.index(Ge)>-1:Ge.nodeType===1&&ve.find.matchesSelector(Ge,ye))){St.push(Ge);break}}return this.pushStack(St.length>1?ve.uniqueSort(St):St)},index:function(ye){return ye?typeof ye=="string"?P.call(ve(ye),this[0]):P.call(this,ye.jquery?ye[0]:ye):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(ye,Le){return this.pushStack(ve.uniqueSort(ve.merge(this.get(),ve(ye,Le))))},addBack:function(ye){return this.add(ye==null?this.prevObject:this.prevObject.filter(ye))}});function aa(ye,Le){for(;(ye=ye[Le])&&ye.nodeType!==1;);return ye}ve.each({parent:function(ye){var Le=ye.parentNode;return Le&&Le.nodeType!==11?Le:null},parents:function(ye){return Jn(ye,"parentNode")},parentsUntil:function(ye,Le,Ge){return Jn(ye,"parentNode",Ge)},next:function(ye){return aa(ye,"nextSibling")},prev:function(ye){return aa(ye,"previousSibling")},nextAll:function(ye){return Jn(ye,"nextSibling")},prevAll:function(ye){return Jn(ye,"previousSibling")},nextUntil:function(ye,Le,Ge){return Jn(ye,"nextSibling",Ge)},prevUntil:function(ye,Le,Ge){return Jn(ye,"previousSibling",Ge)},siblings:function(ye){return wA((ye.parentNode||{}).firstChild,ye)},children:function(ye){return wA(ye.firstChild)},contents:function(ye){return ye.contentDocument!=null&&S(ye.contentDocument)?ye.contentDocument:(Ct(ye,"template")&&(ye=ye.content||ye),ve.merge([],ye.childNodes))}},function(ye,Le){ve.fn[ye]=function(Ge,Ue){var Et=ve.map(this,Le,Ge);return ye.slice(-5)!=="Until"&&(Ue=Ge),Ue&&typeof Ue=="string"&&(Et=ve.filter(Ue,Et)),this.length>1&&(uA[ye]||ve.uniqueSort(Et),nI.test(ye)&&Et.reverse()),this.pushStack(Et)}});var eA=/[^\x20\t\r\n\f]+/g;function DA(ye){var Le={};return ve.each(ye.match(eA)||[],function(Ge,Ue){Le[Ue]=!0}),Le}ve.Callbacks=function(ye){ye=typeof ye=="string"?DA(ye):ve.extend({},ye);var Le,Ge,Ue,Et,St=[],Lt=[],Hn=-1,Yr=function(){for(Et=Et||ye.once,Ue=Le=!0;Lt.length;Hn=-1)for(Ge=Lt.shift();++Hn<St.length;)St[Hn].apply(Ge[0],Ge[1])===!1&&ye.stopOnFalse&&(Hn=St.length,Ge=!1);ye.memory||(Ge=!1),Le=!1,Et&&(Ge?St=[]:St="")},sa={add:function(){return St&&(Ge&&!Le&&(Hn=St.length-1,Lt.push(Ge)),function dA(SA){ve.each(SA,function(iA,XA){ge(XA)?(!ye.unique||!sa.has(XA))&&St.push(XA):XA&&XA.length&&Re(XA)!=="string"&&dA(XA)})}(arguments),Ge&&!Le&&Yr()),this},remove:function(){return ve.each(arguments,function(dA,SA){for(var iA;(iA=ve.inArray(SA,St,iA))>-1;)St.splice(iA,1),iA<=Hn&&Hn--}),this},has:function(dA){return dA?ve.inArray(dA,St)>-1:St.length>0},empty:function(){return St&&(St=[]),this},disable:function(){return Et=Lt=[],St=Ge="",this},disabled:function(){return!St},lock:function(){return Et=Lt=[],!Ge&&!Le&&(St=Ge=""),this},locked:function(){return!!Et},fireWith:function(dA,SA){return Et||(SA=SA||[],SA=[dA,SA.slice?SA.slice():SA],Lt.push(SA),Le||Yr()),this},fire:function(){return sa.fireWith(this,arguments),this},fired:function(){return!!Ue}};return sa};function xA(ye){return ye}function ua(ye){throw ye}function sA(ye,Le,Ge,Ue){var Et;try{ye&&ge(Et=ye.promise)?Et.call(ye).done(Le).fail(Ge):ye&&ge(Et=ye.then)?Et.call(ye,Le,Ge):Le.apply(void 0,[ye].slice(Ue))}catch(St){Ge.apply(void 0,[St])}}ve.extend({Deferred:function(ye){var Le=[["notify","progress",ve.Callbacks("memory"),ve.Callbacks("memory"),2],["resolve","done",ve.Callbacks("once memory"),ve.Callbacks("once memory"),0,"resolved"],["reject","fail",ve.Callbacks("once memory"),ve.Callbacks("once memory"),1,"rejected"]],Ge="pending",Ue={state:function(){return Ge},always:function(){return Et.done(arguments).fail(arguments),this},catch:function(St){return Ue.then(null,St)},pipe:function(){var St=arguments;return ve.Deferred(function(Lt){ve.each(Le,function(Hn,Yr){var sa=ge(St[Yr[4]])&&St[Yr[4]];Et[Yr[1]](function(){var dA=sa&&sa.apply(this,arguments);dA&&ge(dA.promise)?dA.promise().progress(Lt.notify).done(Lt.resolve).fail(Lt.reject):Lt[Yr[0]+"With"](this,sa?[dA]:arguments)})}),St=null}).promise()},then:function(St,Lt,Hn){var Yr=0;function sa(dA,SA,iA,XA){return function(){var ZI=this,fC=arguments,aC=function(){var kC,pC;if(!(dA<Yr)){if(kC=iA.apply(ZI,fC),kC===SA.promise())throw new TypeError("Thenable self-resolution");pC=kC&&(typeof kC=="object"||typeof kC=="function")&&kC.then,ge(pC)?XA?pC.call(kC,sa(Yr,SA,xA,XA),sa(Yr,SA,ua,XA)):(Yr++,pC.call(kC,sa(Yr,SA,xA,XA),sa(Yr,SA,ua,XA),sa(Yr,SA,xA,SA.notifyWith))):(iA!==xA&&(ZI=void 0,fC=[kC]),(XA||SA.resolveWith)(ZI,fC))}},XC=XA?aC:function(){try{aC()}catch(kC){ve.Deferred.exceptionHook&&ve.Deferred.exceptionHook(kC,XC.error),dA+1>=Yr&&(iA!==ua&&(ZI=void 0,fC=[kC]),SA.rejectWith(ZI,fC))}};dA?XC():(ve.Deferred.getErrorHook?XC.error=ve.Deferred.getErrorHook():ve.Deferred.getStackHook&&(XC.error=ve.Deferred.getStackHook()),s.setTimeout(XC))}}return ve.Deferred(function(dA){Le[0][3].add(sa(0,dA,ge(Hn)?Hn:xA,dA.notifyWith)),Le[1][3].add(sa(0,dA,ge(St)?St:xA)),Le[2][3].add(sa(0,dA,ge(Lt)?Lt:ua))}).promise()},promise:function(St){return St!=null?ve.extend(St,Ue):Ue}},Et={};return ve.each(Le,function(St,Lt){var Hn=Lt[2],Yr=Lt[5];Ue[Lt[1]]=Hn.add,Yr&&Hn.add(function(){Ge=Yr},Le[3-St][2].disable,Le[3-St][3].disable,Le[0][2].lock,Le[0][3].lock),Hn.add(Lt[3].fire),Et[Lt[0]]=function(){return Et[Lt[0]+"With"](this===Et?void 0:this,arguments),this},Et[Lt[0]+"With"]=Hn.fireWith}),Ue.promise(Et),ye&&ye.call(Et,Et),Et},when:function(ye){var Le=arguments.length,Ge=Le,Ue=Array(Ge),Et=T.call(arguments),St=ve.Deferred(),Lt=function(Hn){return function(Yr){Ue[Hn]=this,Et[Hn]=arguments.length>1?T.call(arguments):Yr,--Le||St.resolveWith(Ue,Et)}};if(Le<=1&&(sA(ye,St.done(Lt(Ge)).resolve,St.reject,!Le),St.state()==="pending"||ge(Et[Ge]&&Et[Ge].then)))return St.then();for(;Ge--;)sA(Et[Ge],Lt(Ge),St.reject);return St.promise()}});var oA=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ve.Deferred.exceptionHook=function(ye,Le){s.console&&s.console.warn&&ye&&oA.test(ye.name)&&s.console.warn("jQuery.Deferred exception: "+ye.message,ye.stack,Le)},ve.readyException=function(ye){s.setTimeout(function(){throw ye})};var fA=ve.Deferred();ve.fn.ready=function(ye){return fA.then(ye).catch(function(Le){ve.readyException(Le)}),this},ve.extend({isReady:!1,readyWait:1,ready:function(ye){(ye===!0?--ve.readyWait:ve.isReady)||(ve.isReady=!0,!(ye!==!0&&--ve.readyWait>0)&&fA.resolveWith(Be,[ve]))}}),ve.ready.then=fA.then;function lA(){Be.removeEventListener("DOMContentLoaded",lA),s.removeEventListener("load",lA),ve.ready()}Be.readyState==="complete"||Be.readyState!=="loading"&&!Be.documentElement.doScroll?s.setTimeout(ve.ready):(Be.addEventListener("DOMContentLoaded",lA),s.addEventListener("load",lA));var gA=function(ye,Le,Ge,Ue,Et,St,Lt){var Hn=0,Yr=ye.length,sa=Ge==null;if(Re(Ge)==="object"){Et=!0;for(Hn in Ge)gA(ye,Le,Hn,Ge[Hn],!0,St,Lt)}else if(Ue!==void 0&&(Et=!0,ge(Ue)||(Lt=!0),sa&&(Lt?(Le.call(ye,Ue),Le=null):(sa=Le,Le=function(dA,SA,iA){return sa.call(ve(dA),iA)})),Le))for(;Hn<Yr;Hn++)Le(ye[Hn],Ge,Lt?Ue:Ue.call(ye[Hn],Hn,Le(ye[Hn],Ge)));return Et?ye:sa?Le.call(ye):Yr?Le(ye[0],Ge):St},WA=/^-ms-/,JA=/-([a-z])/g;function _I(ye,Le){return Le.toUpperCase()}function HI(ye){return ye.replace(WA,"ms-").replace(JA,_I)}var Nt=function(ye){return ye.nodeType===1||ye.nodeType===9||!+ye.nodeType};function bA(){this.expando=ve.expando+bA.uid++}bA.uid=1,bA.prototype={cache:function(ye){var Le=ye[this.expando];return Le||(Le={},Nt(ye)&&(ye.nodeType?ye[this.expando]=Le:Object.defineProperty(ye,this.expando,{value:Le,configurable:!0}))),Le},set:function(ye,Le,Ge){var Ue,Et=this.cache(ye);if(typeof Le=="string")Et[HI(Le)]=Ge;else for(Ue in Le)Et[HI(Ue)]=Le[Ue];return Et},get:function(ye,Le){return Le===void 0?this.cache(ye):ye[this.expando]&&ye[this.expando][HI(Le)]},access:function(ye,Le,Ge){return Le===void 0||Le&&typeof Le=="string"&&Ge===void 0?this.get(ye,Le):(this.set(ye,Le,Ge),Ge!==void 0?Ge:Le)},remove:function(ye,Le){var Ge,Ue=ye[this.expando];if(Ue!==void 0){if(Le!==void 0)for(Array.isArray(Le)?Le=Le.map(HI):(Le=HI(Le),Le=Le in Ue?[Le]:Le.match(eA)||[]),Ge=Le.length;Ge--;)delete Ue[Le[Ge]];(Le===void 0||ve.isEmptyObject(Ue))&&(ye.nodeType?ye[this.expando]=void 0:delete ye[this.expando])}},hasData:function(ye){var Le=ye[this.expando];return Le!==void 0&&!ve.isEmptyObject(Le)}};var hA=new bA,II=new bA,OI=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ba=/[A-Z]/g;function IA(ye){return ye==="true"?!0:ye==="false"?!1:ye==="null"?null:ye===+ye+""?+ye:OI.test(ye)?JSON.parse(ye):ye}function MA(ye,Le,Ge){var Ue;if(Ge===void 0&&ye.nodeType===1)if(Ue="data-"+Le.replace(ba,"-$&").toLowerCase(),Ge=ye.getAttribute(Ue),typeof Ge=="string"){try{Ge=IA(Ge)}catch{}II.set(ye,Le,Ge)}else Ge=void 0;return Ge}ve.extend({hasData:function(ye){return II.hasData(ye)||hA.hasData(ye)},data:function(ye,Le,Ge){return II.access(ye,Le,Ge)},removeData:function(ye,Le){II.remove(ye,Le)},_data:function(ye,Le,Ge){return hA.access(ye,Le,Ge)},_removeData:function(ye,Le){hA.remove(ye,Le)}}),ve.fn.extend({data:function(ye,Le){var Ge,Ue,Et,St=this[0],Lt=St&&St.attributes;if(ye===void 0){if(this.length&&(Et=II.get(St),St.nodeType===1&&!hA.get(St,"hasDataAttrs"))){for(Ge=Lt.length;Ge--;)Lt[Ge]&&(Ue=Lt[Ge].name,Ue.indexOf("data-")===0&&(Ue=HI(Ue.slice(5)),MA(St,Ue,Et[Ue])));hA.set(St,"hasDataAttrs",!0)}return Et}return typeof ye=="object"?this.each(function(){II.set(this,ye)}):gA(this,function(Hn){var Yr;if(St&&Hn===void 0)return Yr=II.get(St,ye),Yr!==void 0||(Yr=MA(St,ye),Yr!==void 0)?Yr:void 0;this.each(function(){II.set(this,ye,Hn)})},null,Le,arguments.length>1,null,!0)},removeData:function(ye){return this.each(function(){II.remove(this,ye)})}}),ve.extend({queue:function(ye,Le,Ge){var Ue;if(ye)return Le=(Le||"fx")+"queue",Ue=hA.get(ye,Le),Ge&&(!Ue||Array.isArray(Ge)?Ue=hA.access(ye,Le,ve.makeArray(Ge)):Ue.push(Ge)),Ue||[]},dequeue:function(ye,Le){Le=Le||"fx";var Ge=ve.queue(ye,Le),Ue=Ge.length,Et=Ge.shift(),St=ve._queueHooks(ye,Le),Lt=function(){ve.dequeue(ye,Le)};Et==="inprogress"&&(Et=Ge.shift(),Ue--),Et&&(Le==="fx"&&Ge.unshift("inprogress"),delete St.stop,Et.call(ye,Lt,St)),!Ue&&St&&St.empty.fire()},_queueHooks:function(ye,Le){var Ge=Le+"queueHooks";return hA.get(ye,Ge)||hA.access(ye,Ge,{empty:ve.Callbacks("once memory").add(function(){hA.remove(ye,[Le+"queue",Ge])})})}}),ve.fn.extend({queue:function(ye,Le){var Ge=2;return typeof ye!="string"&&(Le=ye,ye="fx",Ge--),arguments.length<Ge?ve.queue(this[0],ye):Le===void 0?this:this.each(function(){var Ue=ve.queue(this,ye,Le);ve._queueHooks(this,ye),ye==="fx"&&Ue[0]!=="inprogress"&&ve.dequeue(this,ye)})},dequeue:function(ye){return this.each(function(){ve.dequeue(this,ye)})},clearQueue:function(ye){return this.queue(ye||"fx",[])},promise:function(ye,Le){var Ge,Ue=1,Et=ve.Deferred(),St=this,Lt=this.length,Hn=function(){--Ue||Et.resolveWith(St,[St])};for(typeof ye!="string"&&(Le=ye,ye=void 0),ye=ye||"fx";Lt--;)Ge=hA.get(St[Lt],ye+"queueHooks"),Ge&&Ge.empty&&(Ue++,Ge.empty.add(Hn));return Hn(),Et.promise(Le)}});var EI=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wI=new RegExp("^(?:([+-])=|)("+EI+")([a-z%]*)$","i"),vI=["Top","Right","Bottom","Left"],WI=Be.documentElement,GI=function(ye){return ve.contains(ye.ownerDocument,ye)},NI={composed:!0};WI.getRootNode&&(GI=function(ye){return ve.contains(ye.ownerDocument,ye)||ye.getRootNode(NI)===ye.ownerDocument});var tC=function(ye,Le){return ye=Le||ye,ye.style.display==="none"||ye.style.display===""&&GI(ye)&&ve.css(ye,"display")==="none"};function mC(ye,Le,Ge,Ue){var Et,St,Lt=20,Hn=Ue?function(){return Ue.cur()}:function(){return ve.css(ye,Le,"")},Yr=Hn(),sa=Ge&&Ge[3]||(ve.cssNumber[Le]?"":"px"),dA=ye.nodeType&&(ve.cssNumber[Le]||sa!=="px"&&+Yr)&&wI.exec(ve.css(ye,Le));if(dA&&dA[3]!==sa){for(Yr=Yr/2,sa=sa||dA[3],dA=+Yr||1;Lt--;)ve.style(ye,Le,dA+sa),(1-St)*(1-(St=Hn()/Yr||.5))<=0&&(Lt=0),dA=dA/St;dA=dA*2,ve.style(ye,Le,dA+sa),Ge=Ge||[]}return Ge&&(dA=+dA||+Yr||0,Et=Ge[1]?dA+(Ge[1]+1)*Ge[2]:+Ge[2],Ue&&(Ue.unit=sa,Ue.start=dA,Ue.end=Et)),Et}var yC={};function QC(ye){var Le,Ge=ye.ownerDocument,Ue=ye.nodeName,Et=yC[Ue];return Et||(Le=Ge.body.appendChild(Ge.createElement(Ue)),Et=ve.css(Le,"display"),Le.parentNode.removeChild(Le),Et==="none"&&(Et="block"),yC[Ue]=Et,Et)}function _C(ye,Le){for(var Ge,Ue,Et=[],St=0,Lt=ye.length;St<Lt;St++)Ue=ye[St],Ue.style&&(Ge=Ue.style.display,Le?(Ge==="none"&&(Et[St]=hA.get(Ue,"display")||null,Et[St]||(Ue.style.display="")),Ue.style.display===""&&tC(Ue)&&(Et[St]=QC(Ue))):Ge!=="none"&&(Et[St]="none",hA.set(Ue,"display",Ge)));for(St=0;St<Lt;St++)Et[St]!=null&&(ye[St].style.display=Et[St]);return ye}ve.fn.extend({show:function(){return _C(this,!0)},hide:function(){return _C(this)},toggle:function(ye){return typeof ye=="boolean"?ye?this.show():this.hide():this.each(function(){tC(this)?ve(this).show():ve(this).hide()})}});var vC=/^(?:checkbox|radio)$/i,RC=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,MC=/^$|^module$|\/(?:java|ecma)script/i;(function(){var ye=Be.createDocumentFragment(),Le=ye.appendChild(Be.createElement("div")),Ge=Be.createElement("input");Ge.setAttribute("type","radio"),Ge.setAttribute("checked","checked"),Ge.setAttribute("name","t"),Le.appendChild(Ge),ae.checkClone=Le.cloneNode(!0).cloneNode(!0).lastChild.checked,Le.innerHTML="<textarea>x</textarea>",ae.noCloneChecked=!!Le.cloneNode(!0).lastChild.defaultValue,Le.innerHTML="<option></option>",ae.option=!!Le.lastChild})();var Hr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Hr.tbody=Hr.tfoot=Hr.colgroup=Hr.caption=Hr.thead,Hr.th=Hr.td,ae.option||(Hr.optgroup=Hr.option=[1,"<select multiple='multiple'>","</select>"]);function zn(ye,Le){var Ge;return typeof ye.getElementsByTagName<"u"?Ge=ye.getElementsByTagName(Le||"*"):typeof ye.querySelectorAll<"u"?Ge=ye.querySelectorAll(Le||"*"):Ge=[],Le===void 0||Le&&Ct(ye,Le)?ve.merge([ye],Ge):Ge}function na(ye,Le){for(var Ge=0,Ue=ye.length;Ge<Ue;Ge++)hA.set(ye[Ge],"globalEval",!Le||hA.get(Le[Ge],"globalEval"))}var PA=/<|&#?\w+;/;function YA(ye,Le,Ge,Ue,Et){for(var St,Lt,Hn,Yr,sa,dA,SA=Le.createDocumentFragment(),iA=[],XA=0,ZI=ye.length;XA<ZI;XA++)if(St=ye[XA],St||St===0)if(Re(St)==="object")ve.merge(iA,St.nodeType?[St]:St);else if(!PA.test(St))iA.push(Le.createTextNode(St));else{for(Lt=Lt||SA.appendChild(Le.createElement("div")),Hn=(RC.exec(St)||["",""])[1].toLowerCase(),Yr=Hr[Hn]||Hr._default,Lt.innerHTML=Yr[1]+ve.htmlPrefilter(St)+Yr[2],dA=Yr[0];dA--;)Lt=Lt.lastChild;ve.merge(iA,Lt.childNodes),Lt=SA.firstChild,Lt.textContent=""}for(SA.textContent="",XA=0;St=iA[XA++];){if(Ue&&ve.inArray(St,Ue)>-1){Et&&Et.push(St);continue}if(sa=GI(St),Lt=zn(SA.appendChild(St),"script"),sa&&na(Lt),Ge)for(dA=0;St=Lt[dA++];)MC.test(St.type||"")&&Ge.push(St)}return SA}var GA=/^([^.]*)(?:\.(.+)|)/;function AI(){return!0}function tI(){return!1}function rC(ye,Le,Ge,Ue,Et,St){var Lt,Hn;if(typeof Le=="object"){typeof Ge!="string"&&(Ue=Ue||Ge,Ge=void 0);for(Hn in Le)rC(ye,Hn,Ge,Ue,Le[Hn],St);return ye}if(Ue==null&&Et==null?(Et=Ge,Ue=Ge=void 0):Et==null&&(typeof Ge=="string"?(Et=Ue,Ue=void 0):(Et=Ue,Ue=Ge,Ge=void 0)),Et===!1)Et=tI;else if(!Et)return ye;return St===1&&(Lt=Et,Et=function(Yr){return ve().off(Yr),Lt.apply(this,arguments)},Et.guid=Lt.guid||(Lt.guid=ve.guid++)),ye.each(function(){ve.event.add(this,Le,Et,Ue,Ge)})}ve.event={global:{},add:function(ye,Le,Ge,Ue,Et){var St,Lt,Hn,Yr,sa,dA,SA,iA,XA,ZI,fC,aC=hA.get(ye);if(Nt(ye))for(Ge.handler&&(St=Ge,Ge=St.handler,Et=St.selector),Et&&ve.find.matchesSelector(WI,Et),Ge.guid||(Ge.guid=ve.guid++),(Yr=aC.events)||(Yr=aC.events=Object.create(null)),(Lt=aC.handle)||(Lt=aC.handle=function(XC){return typeof ve<"u"&&ve.event.triggered!==XC.type?ve.event.dispatch.apply(ye,arguments):void 0}),Le=(Le||"").match(eA)||[""],sa=Le.length;sa--;)Hn=GA.exec(Le[sa])||[],XA=fC=Hn[1],ZI=(Hn[2]||"").split(".").sort(),XA&&(SA=ve.event.special[XA]||{},XA=(Et?SA.delegateType:SA.bindType)||XA,SA=ve.event.special[XA]||{},dA=ve.extend({type:XA,origType:fC,data:Ue,handler:Ge,guid:Ge.guid,selector:Et,needsContext:Et&&ve.expr.match.needsContext.test(Et),namespace:ZI.join(".")},St),(iA=Yr[XA])||(iA=Yr[XA]=[],iA.delegateCount=0,(!SA.setup||SA.setup.call(ye,Ue,ZI,Lt)===!1)&&ye.addEventListener&&ye.addEventListener(XA,Lt)),SA.add&&(SA.add.call(ye,dA),dA.handler.guid||(dA.handler.guid=Ge.guid)),Et?iA.splice(iA.delegateCount++,0,dA):iA.push(dA),ve.event.global[XA]=!0)},remove:function(ye,Le,Ge,Ue,Et){var St,Lt,Hn,Yr,sa,dA,SA,iA,XA,ZI,fC,aC=hA.hasData(ye)&&hA.get(ye);if(!(!aC||!(Yr=aC.events))){for(Le=(Le||"").match(eA)||[""],sa=Le.length;sa--;){if(Hn=GA.exec(Le[sa])||[],XA=fC=Hn[1],ZI=(Hn[2]||"").split(".").sort(),!XA){for(XA in Yr)ve.event.remove(ye,XA+Le[sa],Ge,Ue,!0);continue}for(SA=ve.event.special[XA]||{},XA=(Ue?SA.delegateType:SA.bindType)||XA,iA=Yr[XA]||[],Hn=Hn[2]&&new RegExp("(^|\\.)"+ZI.join("\\.(?:.*\\.|)")+"(\\.|$)"),Lt=St=iA.length;St--;)dA=iA[St],(Et||fC===dA.origType)&&(!Ge||Ge.guid===dA.guid)&&(!Hn||Hn.test(dA.namespace))&&(!Ue||Ue===dA.selector||Ue==="**"&&dA.selector)&&(iA.splice(St,1),dA.selector&&iA.delegateCount--,SA.remove&&SA.remove.call(ye,dA));Lt&&!iA.length&&((!SA.teardown||SA.teardown.call(ye,ZI,aC.handle)===!1)&&ve.removeEvent(ye,XA,aC.handle),delete Yr[XA])}ve.isEmptyObject(Yr)&&hA.remove(ye,"handle events")}},dispatch:function(ye){var Le,Ge,Ue,Et,St,Lt,Hn=new Array(arguments.length),Yr=ve.event.fix(ye),sa=(hA.get(this,"events")||Object.create(null))[Yr.type]||[],dA=ve.event.special[Yr.type]||{};for(Hn[0]=Yr,Le=1;Le<arguments.length;Le++)Hn[Le]=arguments[Le];if(Yr.delegateTarget=this,!(dA.preDispatch&&dA.preDispatch.call(this,Yr)===!1)){for(Lt=ve.event.handlers.call(this,Yr,sa),Le=0;(Et=Lt[Le++])&&!Yr.isPropagationStopped();)for(Yr.currentTarget=Et.elem,Ge=0;(St=Et.handlers[Ge++])&&!Yr.isImmediatePropagationStopped();)(!Yr.rnamespace||St.namespace===!1||Yr.rnamespace.test(St.namespace))&&(Yr.handleObj=St,Yr.data=St.data,Ue=((ve.event.special[St.origType]||{}).handle||St.handler).apply(Et.elem,Hn),Ue!==void 0&&(Yr.result=Ue)===!1&&(Yr.preventDefault(),Yr.stopPropagation()));return dA.postDispatch&&dA.postDispatch.call(this,Yr),Yr.result}},handlers:function(ye,Le){var Ge,Ue,Et,St,Lt,Hn=[],Yr=Le.delegateCount,sa=ye.target;if(Yr&&sa.nodeType&&!(ye.type==="click"&&ye.button>=1)){for(;sa!==this;sa=sa.parentNode||this)if(sa.nodeType===1&&!(ye.type==="click"&&sa.disabled===!0)){for(St=[],Lt={},Ge=0;Ge<Yr;Ge++)Ue=Le[Ge],Et=Ue.selector+" ",Lt[Et]===void 0&&(Lt[Et]=Ue.needsContext?ve(Et,this).index(sa)>-1:ve.find(Et,this,null,[sa]).length),Lt[Et]&&St.push(Ue);St.length&&Hn.push({elem:sa,handlers:St})}}return sa=this,Yr<Le.length&&Hn.push({elem:sa,handlers:Le.slice(Yr)}),Hn},addProp:function(ye,Le){Object.defineProperty(ve.Event.prototype,ye,{enumerable:!0,configurable:!0,get:ge(Le)?function(){if(this.originalEvent)return Le(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[ye]},set:function(Ge){Object.defineProperty(this,ye,{enumerable:!0,configurable:!0,writable:!0,value:Ge})}})},fix:function(ye){return ye[ve.expando]?ye:new ve.Event(ye)},special:{load:{noBubble:!0},click:{setup:function(ye){var Le=this||ye;return vC.test(Le.type)&&Le.click&&Ct(Le,"input")&&JI(Le,"click",!0),!1},trigger:function(ye){var Le=this||ye;return vC.test(Le.type)&&Le.click&&Ct(Le,"input")&&JI(Le,"click"),!0},_default:function(ye){var Le=ye.target;return vC.test(Le.type)&&Le.click&&Ct(Le,"input")&&hA.get(Le,"click")||Ct(Le,"a")}},beforeunload:{postDispatch:function(ye){ye.result!==void 0&&ye.originalEvent&&(ye.originalEvent.returnValue=ye.result)}}}};function JI(ye,Le,Ge){if(!Ge){hA.get(ye,Le)===void 0&&ve.event.add(ye,Le,AI);return}hA.set(ye,Le,!1),ve.event.add(ye,Le,{namespace:!1,handler:function(Ue){var Et,St=hA.get(this,Le);if(Ue.isTrigger&1&&this[Le]){if(St)(ve.event.special[Le]||{}).delegateType&&Ue.stopPropagation();else if(St=T.call(arguments),hA.set(this,Le,St),this[Le](),Et=hA.get(this,Le),hA.set(this,Le,!1),St!==Et)return Ue.stopImmediatePropagation(),Ue.preventDefault(),Et}else St&&(hA.set(this,Le,ve.event.trigger(St[0],St.slice(1),this)),Ue.stopPropagation(),Ue.isImmediatePropagationStopped=AI)}})}ve.removeEvent=function(ye,Le,Ge){ye.removeEventListener&&ye.removeEventListener(Le,Ge)},ve.Event=function(ye,Le){if(!(this instanceof ve.Event))return new ve.Event(ye,Le);ye&&ye.type?(this.originalEvent=ye,this.type=ye.type,this.isDefaultPrevented=ye.defaultPrevented||ye.defaultPrevented===void 0&&ye.returnValue===!1?AI:tI,this.target=ye.target&&ye.target.nodeType===3?ye.target.parentNode:ye.target,this.currentTarget=ye.currentTarget,this.relatedTarget=ye.relatedTarget):this.type=ye,Le&&ve.extend(this,Le),this.timeStamp=ye&&ye.timeStamp||Date.now(),this[ve.expando]=!0},ve.Event.prototype={constructor:ve.Event,isDefaultPrevented:tI,isPropagationStopped:tI,isImmediatePropagationStopped:tI,isSimulated:!1,preventDefault:function(){var ye=this.originalEvent;this.isDefaultPrevented=AI,ye&&!this.isSimulated&&ye.preventDefault()},stopPropagation:function(){var ye=this.originalEvent;this.isPropagationStopped=AI,ye&&!this.isSimulated&&ye.stopPropagation()},stopImmediatePropagation:function(){var ye=this.originalEvent;this.isImmediatePropagationStopped=AI,ye&&!this.isSimulated&&ye.stopImmediatePropagation(),this.stopPropagation()}},ve.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ve.event.addProp),ve.each({focus:"focusin",blur:"focusout"},function(ye,Le){function Ge(Ue){if(Be.documentMode){var Et=hA.get(this,"handle"),St=ve.event.fix(Ue);St.type=Ue.type==="focusin"?"focus":"blur",St.isSimulated=!0,Et(Ue),St.target===St.currentTarget&&Et(St)}else ve.event.simulate(Le,Ue.target,ve.event.fix(Ue))}ve.event.special[ye]={setup:function(){var Ue;if(JI(this,ye,!0),Be.documentMode)Ue=hA.get(this,Le),Ue||this.addEventListener(Le,Ge),hA.set(this,Le,(Ue||0)+1);else return!1},trigger:function(){return JI(this,ye),!0},teardown:function(){var Ue;if(Be.documentMode)Ue=hA.get(this,Le)-1,Ue?hA.set(this,Le,Ue):(this.removeEventListener(Le,Ge),hA.remove(this,Le));else return!1},_default:function(Ue){return hA.get(Ue.target,ye)},delegateType:Le},ve.event.special[Le]={setup:function(){var Ue=this.ownerDocument||this.document||this,Et=Be.documentMode?this:Ue,St=hA.get(Et,Le);St||(Be.documentMode?this.addEventListener(Le,Ge):Ue.addEventListener(ye,Ge,!0)),hA.set(Et,Le,(St||0)+1)},teardown:function(){var Ue=this.ownerDocument||this.document||this,Et=Be.documentMode?this:Ue,St=hA.get(Et,Le)-1;St?hA.set(Et,Le,St):(Be.documentMode?this.removeEventListener(Le,Ge):Ue.removeEventListener(ye,Ge,!0),hA.remove(Et,Le))}}}),ve.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(ye,Le){ve.event.special[ye]={delegateType:Le,bindType:Le,handle:function(Ge){var Ue,Et=this,St=Ge.relatedTarget,Lt=Ge.handleObj;return(!St||St!==Et&&!ve.contains(Et,St))&&(Ge.type=Lt.origType,Ue=Lt.handler.apply(this,arguments),Ge.type=Le),Ue}}}),ve.fn.extend({on:function(ye,Le,Ge,Ue){return rC(this,ye,Le,Ge,Ue)},one:function(ye,Le,Ge,Ue){return rC(this,ye,Le,Ge,Ue,1)},off:function(ye,Le,Ge){var Ue,Et;if(ye&&ye.preventDefault&&ye.handleObj)return Ue=ye.handleObj,ve(ye.delegateTarget).off(Ue.namespace?Ue.origType+"."+Ue.namespace:Ue.origType,Ue.selector,Ue.handler),this;if(typeof ye=="object"){for(Et in ye)this.off(Et,Le,ye[Et]);return this}return(Le===!1||typeof Le=="function")&&(Ge=Le,Le=void 0),Ge===!1&&(Ge=tI),this.each(function(){ve.event.remove(this,ye,Ge,Le)})}});var cC=/<script|<style|<link/i,sC=/checked\s*(?:[^=]|=\s*.checked.)/i,XI=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Vt(ye,Le){return Ct(ye,"table")&&Ct(Le.nodeType!==11?Le:Le.firstChild,"tr")&&ve(ye).children("tbody")[0]||ye}function Un(ye){return ye.type=(ye.getAttribute("type")!==null)+"/"+ye.type,ye}function Kn(ye){return(ye.type||"").slice(0,5)==="true/"?ye.type=ye.type.slice(5):ye.removeAttribute("type"),ye}function qt(ye,Le){var Ge,Ue,Et,St,Lt,Hn,Yr;if(Le.nodeType===1){if(hA.hasData(ye)&&(St=hA.get(ye),Yr=St.events,Yr)){hA.remove(Le,"handle events");for(Et in Yr)for(Ge=0,Ue=Yr[Et].length;Ge<Ue;Ge++)ve.event.add(Le,Et,Yr[Et][Ge])}II.hasData(ye)&&(Lt=II.access(ye),Hn=ve.extend({},Lt),II.set(Le,Hn))}}function Xt(ye,Le){var Ge=Le.nodeName.toLowerCase();Ge==="input"&&vC.test(ye.type)?Le.checked=ye.checked:(Ge==="input"||Ge==="textarea")&&(Le.defaultValue=ye.defaultValue)}function ga(ye,Le,Ge,Ue){Le=F(Le);var Et,St,Lt,Hn,Yr,sa,dA=0,SA=ye.length,iA=SA-1,XA=Le[0],ZI=ge(XA);if(ZI||SA>1&&typeof XA=="string"&&!ae.checkClone&&sC.test(XA))return ye.each(function(fC){var aC=ye.eq(fC);ZI&&(Le[0]=XA.call(this,fC,aC.html())),ga(aC,Le,Ge,Ue)});if(SA&&(Et=YA(Le,ye[0].ownerDocument,!1,ye,Ue),St=Et.firstChild,Et.childNodes.length===1&&(Et=St),St||Ue)){for(Lt=ve.map(zn(Et,"script"),Un),Hn=Lt.length;dA<SA;dA++)Yr=Et,dA!==iA&&(Yr=ve.clone(Yr,!0,!0),Hn&&ve.merge(Lt,zn(Yr,"script"))),Ge.call(ye[dA],Yr,dA);if(Hn)for(sa=Lt[Lt.length-1].ownerDocument,ve.map(Lt,Kn),dA=0;dA<Hn;dA++)Yr=Lt[dA],MC.test(Yr.type||"")&&!hA.access(Yr,"globalEval")&&ve.contains(sa,Yr)&&(Yr.src&&(Yr.type||"").toLowerCase()!=="module"?ve._evalUrl&&!Yr.noModule&&ve._evalUrl(Yr.src,{nonce:Yr.nonce||Yr.getAttribute("nonce")},sa):be(Yr.textContent.replace(XI,""),Yr,sa))}return ye}function aA(ye,Le,Ge){for(var Ue,Et=Le?ve.filter(Le,ye):ye,St=0;(Ue=Et[St])!=null;St++)!Ge&&Ue.nodeType===1&&ve.cleanData(zn(Ue)),Ue.parentNode&&(Ge&&GI(Ue)&&na(zn(Ue,"script")),Ue.parentNode.removeChild(Ue));return ye}ve.extend({htmlPrefilter:function(ye){return ye},clone:function(ye,Le,Ge){var Ue,Et,St,Lt,Hn=ye.cloneNode(!0),Yr=GI(ye);if(!ae.noCloneChecked&&(ye.nodeType===1||ye.nodeType===11)&&!ve.isXMLDoc(ye))for(Lt=zn(Hn),St=zn(ye),Ue=0,Et=St.length;Ue<Et;Ue++)Xt(St[Ue],Lt[Ue]);if(Le)if(Ge)for(St=St||zn(ye),Lt=Lt||zn(Hn),Ue=0,Et=St.length;Ue<Et;Ue++)qt(St[Ue],Lt[Ue]);else qt(ye,Hn);return Lt=zn(Hn,"script"),Lt.length>0&&na(Lt,!Yr&&zn(ye,"script")),Hn},cleanData:function(ye){for(var Le,Ge,Ue,Et=ve.event.special,St=0;(Ge=ye[St])!==void 0;St++)if(Nt(Ge)){if(Le=Ge[hA.expando]){if(Le.events)for(Ue in Le.events)Et[Ue]?ve.event.remove(Ge,Ue):ve.removeEvent(Ge,Ue,Le.handle);Ge[hA.expando]=void 0}Ge[II.expando]&&(Ge[II.expando]=void 0)}}}),ve.fn.extend({detach:function(ye){return aA(this,ye,!0)},remove:function(ye){return aA(this,ye)},text:function(ye){return gA(this,function(Le){return Le===void 0?ve.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=Le)})},null,ye,arguments.length)},append:function(){return ga(this,arguments,function(ye){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var Le=Vt(this,ye);Le.appendChild(ye)}})},prepend:function(){return ga(this,arguments,function(ye){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var Le=Vt(this,ye);Le.insertBefore(ye,Le.firstChild)}})},before:function(){return ga(this,arguments,function(ye){this.parentNode&&this.parentNode.insertBefore(ye,this)})},after:function(){return ga(this,arguments,function(ye){this.parentNode&&this.parentNode.insertBefore(ye,this.nextSibling)})},empty:function(){for(var ye,Le=0;(ye=this[Le])!=null;Le++)ye.nodeType===1&&(ve.cleanData(zn(ye,!1)),ye.textContent="");return this},clone:function(ye,Le){return ye=ye??!1,Le=Le??ye,this.map(function(){return ve.clone(this,ye,Le)})},html:function(ye){return gA(this,function(Le){var Ge=this[0]||{},Ue=0,Et=this.length;if(Le===void 0&&Ge.nodeType===1)return Ge.innerHTML;if(typeof Le=="string"&&!cC.test(Le)&&!Hr[(RC.exec(Le)||["",""])[1].toLowerCase()]){Le=ve.htmlPrefilter(Le);try{for(;Ue<Et;Ue++)Ge=this[Ue]||{},Ge.nodeType===1&&(ve.cleanData(zn(Ge,!1)),Ge.innerHTML=Le);Ge=0}catch{}}Ge&&this.empty().append(Le)},null,ye,arguments.length)},replaceWith:function(){var ye=[];return ga(this,arguments,function(Le){var Ge=this.parentNode;ve.inArray(this,ye)<0&&(ve.cleanData(zn(this)),Ge&&Ge.replaceChild(Le,this))},ye)}}),ve.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(ye,Le){ve.fn[ye]=function(Ge){for(var Ue,Et=[],St=ve(Ge),Lt=St.length-1,Hn=0;Hn<=Lt;Hn++)Ue=Hn===Lt?this:this.clone(!0),ve(St[Hn])[Le](Ue),M.apply(Et,Ue.get());return this.pushStack(Et)}});var BA=new RegExp("^("+EI+")(?!px)[a-z%]+$","i"),uI=/^--/,mI=function(ye){var Le=ye.ownerDocument.defaultView;return(!Le||!Le.opener)&&(Le=s),Le.getComputedStyle(ye)},qI=function(ye,Le,Ge){var Ue,Et,St={};for(Et in Le)St[Et]=ye.style[Et],ye.style[Et]=Le[Et];Ue=Ge.call(ye);for(Et in Le)ye.style[Et]=St[Et];return Ue},gC=new RegExp(vI.join("|"),"i");(function(){function ye(){if(sa){Yr.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",sa.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",WI.appendChild(Yr).appendChild(sa);var dA=s.getComputedStyle(sa);Ge=dA.top!=="1%",Hn=Le(dA.marginLeft)===12,sa.style.right="60%",St=Le(dA.right)===36,Ue=Le(dA.width)===36,sa.style.position="absolute",Et=Le(sa.offsetWidth/3)===12,WI.removeChild(Yr),sa=null}}function Le(dA){return Math.round(parseFloat(dA))}var Ge,Ue,Et,St,Lt,Hn,Yr=Be.createElement("div"),sa=Be.createElement("div");sa.style&&(sa.style.backgroundClip="content-box",sa.cloneNode(!0).style.backgroundClip="",ae.clearCloneStyle=sa.style.backgroundClip==="content-box",ve.extend(ae,{boxSizingReliable:function(){return ye(),Ue},pixelBoxStyles:function(){return ye(),St},pixelPosition:function(){return ye(),Ge},reliableMarginLeft:function(){return ye(),Hn},scrollboxSize:function(){return ye(),Et},reliableTrDimensions:function(){var dA,SA,iA,XA;return Lt==null&&(dA=Be.createElement("table"),SA=Be.createElement("tr"),iA=Be.createElement("div"),dA.style.cssText="position:absolute;left:-11111px;border-collapse:separate",SA.style.cssText="box-sizing:content-box;border:1px solid",SA.style.height="1px",iA.style.height="9px",iA.style.display="block",WI.appendChild(dA).appendChild(SA).appendChild(iA),XA=s.getComputedStyle(SA),Lt=parseInt(XA.height,10)+parseInt(XA.borderTopWidth,10)+parseInt(XA.borderBottomWidth,10)===SA.offsetHeight,WI.removeChild(dA)),Lt}}))})();function JC(ye,Le,Ge){var Ue,Et,St,Lt,Hn=uI.test(Le),Yr=ye.style;return Ge=Ge||mI(ye),Ge&&(Lt=Ge.getPropertyValue(Le)||Ge[Le],Hn&&Lt&&(Lt=Lt.replace(Ft,"$1")||void 0),Lt===""&&!GI(ye)&&(Lt=ve.style(ye,Le)),!ae.pixelBoxStyles()&&BA.test(Lt)&&gC.test(Le)&&(Ue=Yr.width,Et=Yr.minWidth,St=Yr.maxWidth,Yr.minWidth=Yr.maxWidth=Yr.width=Lt,Lt=Ge.width,Yr.width=Ue,Yr.minWidth=Et,Yr.maxWidth=St)),Lt!==void 0?Lt+"":Lt}function WC(ye,Le){return{get:function(){if(ye()){delete this.get;return}return(this.get=Le).apply(this,arguments)}}}var YI=["Webkit","Moz","ms"],dE=Be.createElement("div").style,GC={};function KC(ye){for(var Le=ye[0].toUpperCase()+ye.slice(1),Ge=YI.length;Ge--;)if(ye=YI[Ge]+Le,ye in dE)return ye}function fE(ye){var Le=ve.cssProps[ye]||GC[ye];return Le||(ye in dE?ye:GC[ye]=KC(ye)||ye)}var pE=/^(none|table(?!-c[ea]).+)/,mE={position:"absolute",visibility:"hidden",display:"block"},dm={letterSpacing:"0",fontWeight:"400"};function fm(ye,Le,Ge){var Ue=wI.exec(Le);return Ue?Math.max(0,Ue[2]-(Ge||0))+(Ue[3]||"px"):Le}function PE(ye,Le,Ge,Ue,Et,St){var Lt=Le==="width"?1:0,Hn=0,Yr=0,sa=0;if(Ge===(Ue?"border":"content"))return 0;for(;Lt<4;Lt+=2)Ge==="margin"&&(sa+=ve.css(ye,Ge+vI[Lt],!0,Et)),Ue?(Ge==="content"&&(Yr-=ve.css(ye,"padding"+vI[Lt],!0,Et)),Ge!=="margin"&&(Yr-=ve.css(ye,"border"+vI[Lt]+"Width",!0,Et))):(Yr+=ve.css(ye,"padding"+vI[Lt],!0,Et),Ge!=="padding"?Yr+=ve.css(ye,"border"+vI[Lt]+"Width",!0,Et):Hn+=ve.css(ye,"border"+vI[Lt]+"Width",!0,Et));return!Ue&&St>=0&&(Yr+=Math.max(0,Math.ceil(ye["offset"+Le[0].toUpperCase()+Le.slice(1)]-St-Yr-Hn-.5))||0),Yr+sa}function aE(ye,Le,Ge){var Ue=mI(ye),Et=!ae.boxSizingReliable()||Ge,St=Et&&ve.css(ye,"boxSizing",!1,Ue)==="border-box",Lt=St,Hn=JC(ye,Le,Ue),Yr="offset"+Le[0].toUpperCase()+Le.slice(1);if(BA.test(Hn)){if(!Ge)return Hn;Hn="auto"}return(!ae.boxSizingReliable()&&St||!ae.reliableTrDimensions()&&Ct(ye,"tr")||Hn==="auto"||!parseFloat(Hn)&&ve.css(ye,"display",!1,Ue)==="inline")&&ye.getClientRects().length&&(St=ve.css(ye,"boxSizing",!1,Ue)==="border-box",Lt=Yr in ye,Lt&&(Hn=ye[Yr])),Hn=parseFloat(Hn)||0,Hn+PE(ye,Le,Ge||(St?"border":"content"),Lt,Ue,Hn)+"px"}ve.extend({cssHooks:{opacity:{get:function(ye,Le){if(Le){var Ge=JC(ye,"opacity");return Ge===""?"1":Ge}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(ye,Le,Ge,Ue){if(!(!ye||ye.nodeType===3||ye.nodeType===8||!ye.style)){var Et,St,Lt,Hn=HI(Le),Yr=uI.test(Le),sa=ye.style;if(Yr||(Le=fE(Hn)),Lt=ve.cssHooks[Le]||ve.cssHooks[Hn],Ge!==void 0){if(St=typeof Ge,St==="string"&&(Et=wI.exec(Ge))&&Et[1]&&(Ge=mC(ye,Le,Et),St="number"),Ge==null||Ge!==Ge)return;St==="number"&&!Yr&&(Ge+=Et&&Et[3]||(ve.cssNumber[Hn]?"":"px")),!ae.clearCloneStyle&&Ge===""&&Le.indexOf("background")===0&&(sa[Le]="inherit"),(!Lt||!("set"in Lt)||(Ge=Lt.set(ye,Ge,Ue))!==void 0)&&(Yr?sa.setProperty(Le,Ge):sa[Le]=Ge)}else return Lt&&"get"in Lt&&(Et=Lt.get(ye,!1,Ue))!==void 0?Et:sa[Le]}},css:function(ye,Le,Ge,Ue){var Et,St,Lt,Hn=HI(Le),Yr=uI.test(Le);return Yr||(Le=fE(Hn)),Lt=ve.cssHooks[Le]||ve.cssHooks[Hn],Lt&&"get"in Lt&&(Et=Lt.get(ye,!0,Ge)),Et===void 0&&(Et=JC(ye,Le,Ue)),Et==="normal"&&Le in dm&&(Et=dm[Le]),Ge===""||Ge?(St=parseFloat(Et),Ge===!0||isFinite(St)?St||0:Et):Et}}),ve.each(["height","width"],function(ye,Le){ve.cssHooks[Le]={get:function(Ge,Ue,Et){if(Ue)return pE.test(ve.css(Ge,"display"))&&(!Ge.getClientRects().length||!Ge.getBoundingClientRect().width)?qI(Ge,mE,function(){return aE(Ge,Le,Et)}):aE(Ge,Le,Et)},set:function(Ge,Ue,Et){var St,Lt=mI(Ge),Hn=!ae.scrollboxSize()&&Lt.position==="absolute",Yr=Hn||Et,sa=Yr&&ve.css(Ge,"boxSizing",!1,Lt)==="border-box",dA=Et?PE(Ge,Le,Et,sa,Lt):0;return sa&&Hn&&(dA-=Math.ceil(Ge["offset"+Le[0].toUpperCase()+Le.slice(1)]-parseFloat(Lt[Le])-PE(Ge,Le,"border",!1,Lt)-.5)),dA&&(St=wI.exec(Ue))&&(St[3]||"px")!=="px"&&(Ge.style[Le]=Ue,Ue=ve.css(Ge,Le)),fm(Ge,Ue,dA)}}}),ve.cssHooks.marginLeft=WC(ae.reliableMarginLeft,function(ye,Le){if(Le)return(parseFloat(JC(ye,"marginLeft"))||ye.getBoundingClientRect().left-qI(ye,{marginLeft:0},function(){return ye.getBoundingClientRect().left}))+"px"}),ve.each({margin:"",padding:"",border:"Width"},function(ye,Le){ve.cssHooks[ye+Le]={expand:function(Ge){for(var Ue=0,Et={},St=typeof Ge=="string"?Ge.split(" "):[Ge];Ue<4;Ue++)Et[ye+vI[Ue]+Le]=St[Ue]||St[Ue-2]||St[0];return Et}},ye!=="margin"&&(ve.cssHooks[ye+Le].set=fm)}),ve.fn.extend({css:function(ye,Le){return gA(this,function(Ge,Ue,Et){var St,Lt,Hn={},Yr=0;if(Array.isArray(Ue)){for(St=mI(Ge),Lt=Ue.length;Yr<Lt;Yr++)Hn[Ue[Yr]]=ve.css(Ge,Ue[Yr],!1,St);return Hn}return Et!==void 0?ve.style(Ge,Ue,Et):ve.css(Ge,Ue)},ye,Le,arguments.length>1)}});function UC(ye,Le,Ge,Ue,Et){return new UC.prototype.init(ye,Le,Ge,Ue,Et)}ve.Tween=UC,UC.prototype={constructor:UC,init:function(ye,Le,Ge,Ue,Et,St){this.elem=ye,this.prop=Ge,this.easing=Et||ve.easing._default,this.options=Le,this.start=this.now=this.cur(),this.end=Ue,this.unit=St||(ve.cssNumber[Ge]?"":"px")},cur:function(){var ye=UC.propHooks[this.prop];return ye&&ye.get?ye.get(this):UC.propHooks._default.get(this)},run:function(ye){var Le,Ge=UC.propHooks[this.prop];return this.options.duration?this.pos=Le=ve.easing[this.easing](ye,this.options.duration*ye,0,1,this.options.duration):this.pos=Le=ye,this.now=(this.end-this.start)*Le+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),Ge&&Ge.set?Ge.set(this):UC.propHooks._default.set(this),this}},UC.prototype.init.prototype=UC.prototype,UC.propHooks={_default:{get:function(ye){var Le;return ye.elem.nodeType!==1||ye.elem[ye.prop]!=null&&ye.elem.style[ye.prop]==null?ye.elem[ye.prop]:(Le=ve.css(ye.elem,ye.prop,""),!Le||Le==="auto"?0:Le)},set:function(ye){ve.fx.step[ye.prop]?ve.fx.step[ye.prop](ye):ye.elem.nodeType===1&&(ve.cssHooks[ye.prop]||ye.elem.style[fE(ye.prop)]!=null)?ve.style(ye.elem,ye.prop,ye.now+ye.unit):ye.elem[ye.prop]=ye.now}}},UC.propHooks.scrollTop=UC.propHooks.scrollLeft={set:function(ye){ye.elem.nodeType&&ye.elem.parentNode&&(ye.elem[ye.prop]=ye.now)}},ve.easing={linear:function(ye){return ye},swing:function(ye){return .5-Math.cos(ye*Math.PI)/2},_default:"swing"},ve.fx=UC.prototype.init,ve.fx.step={};var vE,OE,GE=/^(?:toggle|show|hide)$/,tm=/queueHooks$/;function UE(){OE&&(Be.hidden===!1&&s.requestAnimationFrame?s.requestAnimationFrame(UE):s.setTimeout(UE,ve.fx.interval),ve.fx.tick())}function BE(){return s.setTimeout(function(){vE=void 0}),vE=Date.now()}function SE(ye,Le){var Ge,Ue=0,Et={height:ye};for(Le=Le?1:0;Ue<4;Ue+=2-Le)Ge=vI[Ue],Et["margin"+Ge]=Et["padding"+Ge]=ye;return Le&&(Et.opacity=Et.width=ye),Et}function JE(ye,Le,Ge){for(var Ue,Et=(lE.tweeners[Le]||[]).concat(lE.tweeners["*"]),St=0,Lt=Et.length;St<Lt;St++)if(Ue=Et[St].call(Ge,Le,ye))return Ue}function rm(ye,Le,Ge){var Ue,Et,St,Lt,Hn,Yr,sa,dA,SA="width"in Le||"height"in Le,iA=this,XA={},ZI=ye.style,fC=ye.nodeType&&tC(ye),aC=hA.get(ye,"fxshow");Ge.queue||(Lt=ve._queueHooks(ye,"fx"),Lt.unqueued==null&&(Lt.unqueued=0,Hn=Lt.empty.fire,Lt.empty.fire=function(){Lt.unqueued||Hn()}),Lt.unqueued++,iA.always(function(){iA.always(function(){Lt.unqueued--,ve.queue(ye,"fx").length||Lt.empty.fire()})}));for(Ue in Le)if(Et=Le[Ue],GE.test(Et)){if(delete Le[Ue],St=St||Et==="toggle",Et===(fC?"hide":"show"))if(Et==="show"&&aC&&aC[Ue]!==void 0)fC=!0;else continue;XA[Ue]=aC&&aC[Ue]||ve.style(ye,Ue)}if(Yr=!ve.isEmptyObject(Le),!(!Yr&&ve.isEmptyObject(XA))){SA&&ye.nodeType===1&&(Ge.overflow=[ZI.overflow,ZI.overflowX,ZI.overflowY],sa=aC&&aC.display,sa==null&&(sa=hA.get(ye,"display")),dA=ve.css(ye,"display"),dA==="none"&&(sa?dA=sa:(_C([ye],!0),sa=ye.style.display||sa,dA=ve.css(ye,"display"),_C([ye]))),(dA==="inline"||dA==="inline-block"&&sa!=null)&&ve.css(ye,"float")==="none"&&(Yr||(iA.done(function(){ZI.display=sa}),sa==null&&(dA=ZI.display,sa=dA==="none"?"":dA)),ZI.display="inline-block")),Ge.overflow&&(ZI.overflow="hidden",iA.always(function(){ZI.overflow=Ge.overflow[0],ZI.overflowX=Ge.overflow[1],ZI.overflowY=Ge.overflow[2]})),Yr=!1;for(Ue in XA)Yr||(aC?"hidden"in aC&&(fC=aC.hidden):aC=hA.access(ye,"fxshow",{display:sa}),St&&(aC.hidden=!fC),fC&&_C([ye],!0),iA.done(function(){fC||_C([ye]),hA.remove(ye,"fxshow");for(Ue in XA)ve.style(ye,Ue,XA[Ue])})),Yr=JE(fC?aC[Ue]:0,Ue,iA),Ue in aC||(aC[Ue]=Yr.start,fC&&(Yr.end=Yr.start,Yr.start=0))}}function im(ye,Le){var Ge,Ue,Et,St,Lt;for(Ge in ye)if(Ue=HI(Ge),Et=Le[Ue],St=ye[Ge],Array.isArray(St)&&(Et=St[1],St=ye[Ge]=St[0]),Ge!==Ue&&(ye[Ue]=St,delete ye[Ge]),Lt=ve.cssHooks[Ue],Lt&&"expand"in Lt){St=Lt.expand(St),delete ye[Ue];for(Ge in St)Ge in ye||(ye[Ge]=St[Ge],Le[Ge]=Et)}else Le[Ue]=Et}function lE(ye,Le,Ge){var Ue,Et,St=0,Lt=lE.prefilters.length,Hn=ve.Deferred().always(function(){delete Yr.elem}),Yr=function(){if(Et)return!1;for(var SA=vE||BE(),iA=Math.max(0,sa.startTime+sa.duration-SA),XA=iA/sa.duration||0,ZI=1-XA,fC=0,aC=sa.tweens.length;fC<aC;fC++)sa.tweens[fC].run(ZI);return Hn.notifyWith(ye,[sa,ZI,iA]),ZI<1&&aC?iA:(aC||Hn.notifyWith(ye,[sa,1,0]),Hn.resolveWith(ye,[sa]),!1)},sa=Hn.promise({elem:ye,props:ve.extend({},Le),opts:ve.extend(!0,{specialEasing:{},easing:ve.easing._default},Ge),originalProperties:Le,originalOptions:Ge,startTime:vE||BE(),duration:Ge.duration,tweens:[],createTween:function(SA,iA){var XA=ve.Tween(ye,sa.opts,SA,iA,sa.opts.specialEasing[SA]||sa.opts.easing);return sa.tweens.push(XA),XA},stop:function(SA){var iA=0,XA=SA?sa.tweens.length:0;if(Et)return this;for(Et=!0;iA<XA;iA++)sa.tweens[iA].run(1);return SA?(Hn.notifyWith(ye,[sa,1,0]),Hn.resolveWith(ye,[sa,SA])):Hn.rejectWith(ye,[sa,SA]),this}}),dA=sa.props;for(im(dA,sa.opts.specialEasing);St<Lt;St++)if(Ue=lE.prefilters[St].call(sa,ye,dA,sa.opts),Ue)return ge(Ue.stop)&&(ve._queueHooks(sa.elem,sa.opts.queue).stop=Ue.stop.bind(Ue)),Ue;return ve.map(dA,JE,sa),ge(sa.opts.start)&&sa.opts.start.call(ye,sa),sa.progress(sa.opts.progress).done(sa.opts.done,sa.opts.complete).fail(sa.opts.fail).always(sa.opts.always),ve.fx.timer(ve.extend(Yr,{elem:ye,anim:sa,queue:sa.opts.queue})),sa}ve.Animation=ve.extend(lE,{tweeners:{"*":[function(ye,Le){var Ge=this.createTween(ye,Le);return mC(Ge.elem,ye,wI.exec(Le),Ge),Ge}]},tweener:function(ye,Le){ge(ye)?(Le=ye,ye=["*"]):ye=ye.match(eA);for(var Ge,Ue=0,Et=ye.length;Ue<Et;Ue++)Ge=ye[Ue],lE.tweeners[Ge]=lE.tweeners[Ge]||[],lE.tweeners[Ge].unshift(Le)},prefilters:[rm],prefilter:function(ye,Le){Le?lE.prefilters.unshift(ye):lE.prefilters.push(ye)}}),ve.speed=function(ye,Le,Ge){var Ue=ye&&typeof ye=="object"?ve.extend({},ye):{complete:Ge||!Ge&&Le||ge(ye)&&ye,duration:ye,easing:Ge&&Le||Le&&!ge(Le)&&Le};return ve.fx.off?Ue.duration=0:typeof Ue.duration!="number"&&(Ue.duration in ve.fx.speeds?Ue.duration=ve.fx.speeds[Ue.duration]:Ue.duration=ve.fx.speeds._default),(Ue.queue==null||Ue.queue===!0)&&(Ue.queue="fx"),Ue.old=Ue.complete,Ue.complete=function(){ge(Ue.old)&&Ue.old.call(this),Ue.queue&&ve.dequeue(this,Ue.queue)},Ue},ve.fn.extend({fadeTo:function(ye,Le,Ge,Ue){return this.filter(tC).css("opacity",0).show().end().animate({opacity:Le},ye,Ge,Ue)},animate:function(ye,Le,Ge,Ue){var Et=ve.isEmptyObject(ye),St=ve.speed(Le,Ge,Ue),Lt=function(){var Hn=lE(this,ve.extend({},ye),St);(Et||hA.get(this,"finish"))&&Hn.stop(!0)};return Lt.finish=Lt,Et||St.queue===!1?this.each(Lt):this.queue(St.queue,Lt)},stop:function(ye,Le,Ge){var Ue=function(Et){var St=Et.stop;delete Et.stop,St(Ge)};return typeof ye!="string"&&(Ge=Le,Le=ye,ye=void 0),Le&&this.queue(ye||"fx",[]),this.each(function(){var Et=!0,St=ye!=null&&ye+"queueHooks",Lt=ve.timers,Hn=hA.get(this);if(St)Hn[St]&&Hn[St].stop&&Ue(Hn[St]);else for(St in Hn)Hn[St]&&Hn[St].stop&&tm.test(St)&&Ue(Hn[St]);for(St=Lt.length;St--;)Lt[St].elem===this&&(ye==null||Lt[St].queue===ye)&&(Lt[St].anim.stop(Ge),Et=!1,Lt.splice(St,1));(Et||!Ge)&&ve.dequeue(this,ye)})},finish:function(ye){return ye!==!1&&(ye=ye||"fx"),this.each(function(){var Le,Ge=hA.get(this),Ue=Ge[ye+"queue"],Et=Ge[ye+"queueHooks"],St=ve.timers,Lt=Ue?Ue.length:0;for(Ge.finish=!0,ve.queue(this,ye,[]),Et&&Et.stop&&Et.stop.call(this,!0),Le=St.length;Le--;)St[Le].elem===this&&St[Le].queue===ye&&(St[Le].anim.stop(!0),St.splice(Le,1));for(Le=0;Le<Lt;Le++)Ue[Le]&&Ue[Le].finish&&Ue[Le].finish.call(this);delete Ge.finish})}}),ve.each(["toggle","show","hide"],function(ye,Le){var Ge=ve.fn[Le];ve.fn[Le]=function(Ue,Et,St){return Ue==null||typeof Ue=="boolean"?Ge.apply(this,arguments):this.animate(SE(Le,!0),Ue,Et,St)}}),ve.each({slideDown:SE("show"),slideUp:SE("hide"),slideToggle:SE("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(ye,Le){ve.fn[ye]=function(Ge,Ue,Et){return this.animate(Le,Ge,Ue,Et)}}),ve.timers=[],ve.fx.tick=function(){var ye,Le=0,Ge=ve.timers;for(vE=Date.now();Le<Ge.length;Le++)ye=Ge[Le],!ye()&&Ge[Le]===ye&&Ge.splice(Le--,1);Ge.length||ve.fx.stop(),vE=void 0},ve.fx.timer=function(ye){ve.timers.push(ye),ve.fx.start()},ve.fx.interval=13,ve.fx.start=function(){OE||(OE=!0,UE())},ve.fx.stop=function(){OE=null},ve.fx.speeds={slow:600,fast:200,_default:400},ve.fn.delay=function(ye,Le){return ye=ve.fx&&ve.fx.speeds[ye]||ye,Le=Le||"fx",this.queue(Le,function(Ge,Ue){var Et=s.setTimeout(Ge,ye);Ue.stop=function(){s.clearTimeout(Et)}})},function(){var ye=Be.createElement("input"),Le=Be.createElement("select"),Ge=Le.appendChild(Be.createElement("option"));ye.type="checkbox",ae.checkOn=ye.value!=="",ae.optSelected=Ge.selected,ye=Be.createElement("input"),ye.value="t",ye.type="radio",ae.radioValue=ye.value==="t"}();var Lm,kt=ve.expr.attrHandle;ve.fn.extend({attr:function(ye,Le){return gA(this,ve.attr,ye,Le,arguments.length>1)},removeAttr:function(ye){return this.each(function(){ve.removeAttr(this,ye)})}}),ve.extend({attr:function(ye,Le,Ge){var Ue,Et,St=ye.nodeType;if(!(St===3||St===8||St===2)){if(typeof ye.getAttribute>"u")return ve.prop(ye,Le,Ge);if((St!==1||!ve.isXMLDoc(ye))&&(Et=ve.attrHooks[Le.toLowerCase()]||(ve.expr.match.bool.test(Le)?Lm:void 0)),Ge!==void 0){if(Ge===null){ve.removeAttr(ye,Le);return}return Et&&"set"in Et&&(Ue=Et.set(ye,Ge,Le))!==void 0?Ue:(ye.setAttribute(Le,Ge+""),Ge)}return Et&&"get"in Et&&(Ue=Et.get(ye,Le))!==null?Ue:(Ue=ve.find.attr(ye,Le),Ue??void 0)}},attrHooks:{type:{set:function(ye,Le){if(!ae.radioValue&&Le==="radio"&&Ct(ye,"input")){var Ge=ye.value;return ye.setAttribute("type",Le),Ge&&(ye.value=Ge),Le}}}},removeAttr:function(ye,Le){var Ge,Ue=0,Et=Le&&Le.match(eA);if(Et&&ye.nodeType===1)for(;Ge=Et[Ue++];)ye.removeAttribute(Ge)}}),Lm={set:function(ye,Le,Ge){return Le===!1?ve.removeAttr(ye,Ge):ye.setAttribute(Ge,Ge),Ge}},ve.each(ve.expr.match.bool.source.match(/\w+/g),function(ye,Le){var Ge=kt[Le]||ve.find.attr;kt[Le]=function(Ue,Et,St){var Lt,Hn,Yr=Et.toLowerCase();return St||(Hn=kt[Yr],kt[Yr]=Lt,Lt=Ge(Ue,Et,St)!=null?Yr:null,kt[Yr]=Hn),Lt}});var Gt=/^(?:input|select|textarea|button)$/i,Dn=/^(?:a|area)$/i;ve.fn.extend({prop:function(ye,Le){return gA(this,ve.prop,ye,Le,arguments.length>1)},removeProp:function(ye){return this.each(function(){delete this[ve.propFix[ye]||ye]})}}),ve.extend({prop:function(ye,Le,Ge){var Ue,Et,St=ye.nodeType;if(!(St===3||St===8||St===2))return(St!==1||!ve.isXMLDoc(ye))&&(Le=ve.propFix[Le]||Le,Et=ve.propHooks[Le]),Ge!==void 0?Et&&"set"in Et&&(Ue=Et.set(ye,Ge,Le))!==void 0?Ue:ye[Le]=Ge:Et&&"get"in Et&&(Ue=Et.get(ye,Le))!==null?Ue:ye[Le]},propHooks:{tabIndex:{get:function(ye){var Le=ve.find.attr(ye,"tabindex");return Le?parseInt(Le,10):Gt.test(ye.nodeName)||Dn.test(ye.nodeName)&&ye.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ae.optSelected||(ve.propHooks.selected={get:function(ye){var Le=ye.parentNode;return Le&&Le.parentNode&&Le.parentNode.selectedIndex,null},set:function(ye){var Le=ye.parentNode;Le&&(Le.selectedIndex,Le.parentNode&&Le.parentNode.selectedIndex)}}),ve.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ve.propFix[this.toLowerCase()]=this});function ya(ye){var Le=ye.match(eA)||[];return Le.join(" ")}function UA(ye){return ye.getAttribute&&ye.getAttribute("class")||""}function SI(ye){return Array.isArray(ye)?ye:typeof ye=="string"?ye.match(eA)||[]:[]}ve.fn.extend({addClass:function(ye){var Le,Ge,Ue,Et,St,Lt;return ge(ye)?this.each(function(Hn){ve(this).addClass(ye.call(this,Hn,UA(this)))}):(Le=SI(ye),Le.length?this.each(function(){if(Ue=UA(this),Ge=this.nodeType===1&&" "+ya(Ue)+" ",Ge){for(St=0;St<Le.length;St++)Et=Le[St],Ge.indexOf(" "+Et+" ")<0&&(Ge+=Et+" ");Lt=ya(Ge),Ue!==Lt&&this.setAttribute("class",Lt)}}):this)},removeClass:function(ye){var Le,Ge,Ue,Et,St,Lt;return ge(ye)?this.each(function(Hn){ve(this).removeClass(ye.call(this,Hn,UA(this)))}):arguments.length?(Le=SI(ye),Le.length?this.each(function(){if(Ue=UA(this),Ge=this.nodeType===1&&" "+ya(Ue)+" ",Ge){for(St=0;St<Le.length;St++)for(Et=Le[St];Ge.indexOf(" "+Et+" ")>-1;)Ge=Ge.replace(" "+Et+" "," ");Lt=ya(Ge),Ue!==Lt&&this.setAttribute("class",Lt)}}):this):this.attr("class","")},toggleClass:function(ye,Le){var Ge,Ue,Et,St,Lt=typeof ye,Hn=Lt==="string"||Array.isArray(ye);return ge(ye)?this.each(function(Yr){ve(this).toggleClass(ye.call(this,Yr,UA(this),Le),Le)}):typeof Le=="boolean"&&Hn?Le?this.addClass(ye):this.removeClass(ye):(Ge=SI(ye),this.each(function(){if(Hn)for(St=ve(this),Et=0;Et<Ge.length;Et++)Ue=Ge[Et],St.hasClass(Ue)?St.removeClass(Ue):St.addClass(Ue);else(ye===void 0||Lt==="boolean")&&(Ue=UA(this),Ue&&hA.set(this,"__className__",Ue),this.setAttribute&&this.setAttribute("class",Ue||ye===!1?"":hA.get(this,"__className__")||""))}))},hasClass:function(ye){var Le,Ge,Ue=0;for(Le=" "+ye+" ";Ge=this[Ue++];)if(Ge.nodeType===1&&(" "+ya(UA(Ge))+" ").indexOf(Le)>-1)return!0;return!1}});var AC=/\r/g;ve.fn.extend({val:function(ye){var Le,Ge,Ue,Et=this[0];return arguments.length?(Ue=ge(ye),this.each(function(St){var Lt;this.nodeType===1&&(Ue?Lt=ye.call(this,St,ve(this).val()):Lt=ye,Lt==null?Lt="":typeof Lt=="number"?Lt+="":Array.isArray(Lt)&&(Lt=ve.map(Lt,function(Hn){return Hn==null?"":Hn+""})),Le=ve.valHooks[this.type]||ve.valHooks[this.nodeName.toLowerCase()],(!Le||!("set"in Le)||Le.set(this,Lt,"value")===void 0)&&(this.value=Lt))})):Et?(Le=ve.valHooks[Et.type]||ve.valHooks[Et.nodeName.toLowerCase()],Le&&"get"in Le&&(Ge=Le.get(Et,"value"))!==void 0?Ge:(Ge=Et.value,typeof Ge=="string"?Ge.replace(AC,""):Ge??"")):void 0}}),ve.extend({valHooks:{option:{get:function(ye){var Le=ve.find.attr(ye,"value");return Le??ya(ve.text(ye))}},select:{get:function(ye){var Le,Ge,Ue,Et=ye.options,St=ye.selectedIndex,Lt=ye.type==="select-one",Hn=Lt?null:[],Yr=Lt?St+1:Et.length;for(St<0?Ue=Yr:Ue=Lt?St:0;Ue<Yr;Ue++)if(Ge=Et[Ue],(Ge.selected||Ue===St)&&!Ge.disabled&&(!Ge.parentNode.disabled||!Ct(Ge.parentNode,"optgroup"))){if(Le=ve(Ge).val(),Lt)return Le;Hn.push(Le)}return Hn},set:function(ye,Le){for(var Ge,Ue,Et=ye.options,St=ve.makeArray(Le),Lt=Et.length;Lt--;)Ue=Et[Lt],(Ue.selected=ve.inArray(ve.valHooks.option.get(Ue),St)>-1)&&(Ge=!0);return Ge||(ye.selectedIndex=-1),St}}}}),ve.each(["radio","checkbox"],function(){ve.valHooks[this]={set:function(ye,Le){if(Array.isArray(Le))return ye.checked=ve.inArray(ve(ye).val(),Le)>-1}},ae.checkOn||(ve.valHooks[this].get=function(ye){return ye.getAttribute("value")===null?"on":ye.value})});var xC=s.location,NC={guid:Date.now()},$C=/\?/;ve.parseXML=function(ye){var Le,Ge;if(!ye||typeof ye!="string")return null;try{Le=new s.DOMParser().parseFromString(ye,"text/xml")}catch{}return Ge=Le&&Le.getElementsByTagName("parsererror")[0],(!Le||Ge)&&ve.error("Invalid XML: "+(Ge?ve.map(Ge.childNodes,function(Ue){return Ue.textContent}).join(`
`):ye)),Le};var cE=/^(?:focusinfocus|focusoutblur)$/,Fm=function(ye){ye.stopPropagation()};ve.extend(ve.event,{trigger:function(ye,Le,Ge,Ue){var Et,St,Lt,Hn,Yr,sa,dA,SA,iA=[Ge||Be],XA=K.call(ye,"type")?ye.type:ye,ZI=K.call(ye,"namespace")?ye.namespace.split("."):[];if(St=SA=Lt=Ge=Ge||Be,!(Ge.nodeType===3||Ge.nodeType===8)&&!cE.test(XA+ve.event.triggered)&&(XA.indexOf(".")>-1&&(ZI=XA.split("."),XA=ZI.shift(),ZI.sort()),Yr=XA.indexOf(":")<0&&"on"+XA,ye=ye[ve.expando]?ye:new ve.Event(XA,typeof ye=="object"&&ye),ye.isTrigger=Ue?2:3,ye.namespace=ZI.join("."),ye.rnamespace=ye.namespace?new RegExp("(^|\\.)"+ZI.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,ye.result=void 0,ye.target||(ye.target=Ge),Le=Le==null?[ye]:ve.makeArray(Le,[ye]),dA=ve.event.special[XA]||{},!(!Ue&&dA.trigger&&dA.trigger.apply(Ge,Le)===!1))){if(!Ue&&!dA.noBubble&&!he(Ge)){for(Hn=dA.delegateType||XA,cE.test(Hn+XA)||(St=St.parentNode);St;St=St.parentNode)iA.push(St),Lt=St;Lt===(Ge.ownerDocument||Be)&&iA.push(Lt.defaultView||Lt.parentWindow||s)}for(Et=0;(St=iA[Et++])&&!ye.isPropagationStopped();)SA=St,ye.type=Et>1?Hn:dA.bindType||XA,sa=(hA.get(St,"events")||Object.create(null))[ye.type]&&hA.get(St,"handle"),sa&&sa.apply(St,Le),sa=Yr&&St[Yr],sa&&sa.apply&&Nt(St)&&(ye.result=sa.apply(St,Le),ye.result===!1&&ye.preventDefault());return ye.type=XA,!Ue&&!ye.isDefaultPrevented()&&(!dA._default||dA._default.apply(iA.pop(),Le)===!1)&&Nt(Ge)&&Yr&&ge(Ge[XA])&&!he(Ge)&&(Lt=Ge[Yr],Lt&&(Ge[Yr]=null),ve.event.triggered=XA,ye.isPropagationStopped()&&SA.addEventListener(XA,Fm),Ge[XA](),ye.isPropagationStopped()&&SA.removeEventListener(XA,Fm),ve.event.triggered=void 0,Lt&&(Ge[Yr]=Lt)),ye.result}},simulate:function(ye,Le,Ge){var Ue=ve.extend(new ve.Event,Ge,{type:ye,isSimulated:!0});ve.event.trigger(Ue,null,Le)}}),ve.fn.extend({trigger:function(ye,Le){return this.each(function(){ve.event.trigger(ye,Le,this)})},triggerHandler:function(ye,Le){var Ge=this[0];if(Ge)return ve.event.trigger(ye,Le,Ge,!0)}});var Cy=/\[\]$/,bB=/\r?\n/g,Ey=/^(?:submit|button|image|reset|file)$/i,my=/^(?:input|select|textarea|keygen)/i;function nB(ye,Le,Ge,Ue){var Et;if(Array.isArray(Le))ve.each(Le,function(St,Lt){Ge||Cy.test(ye)?Ue(ye,Lt):nB(ye+"["+(typeof Lt=="object"&&Lt!=null?St:"")+"]",Lt,Ge,Ue)});else if(!Ge&&Re(Le)==="object")for(Et in Le)nB(ye+"["+Et+"]",Le[Et],Ge,Ue);else Ue(ye,Le)}ve.param=function(ye,Le){var Ge,Ue=[],Et=function(St,Lt){var Hn=ge(Lt)?Lt():Lt;Ue[Ue.length]=encodeURIComponent(St)+"="+encodeURIComponent(Hn??"")};if(ye==null)return"";if(Array.isArray(ye)||ye.jquery&&!ve.isPlainObject(ye))ve.each(ye,function(){Et(this.name,this.value)});else for(Ge in ye)nB(Ge,ye[Ge],Le,Et);return Ue.join("&")},ve.fn.extend({serialize:function(){return ve.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var ye=ve.prop(this,"elements");return ye?ve.makeArray(ye):this}).filter(function(){var ye=this.type;return this.name&&!ve(this).is(":disabled")&&my.test(this.nodeName)&&!Ey.test(ye)&&(this.checked||!vC.test(ye))}).map(function(ye,Le){var Ge=ve(this).val();return Ge==null?null:Array.isArray(Ge)?ve.map(Ge,function(Ue){return{name:Le.name,value:Ue.replace(bB,`\r
`)}}):{name:Le.name,value:Ge.replace(bB,`\r
`)}}).get()}});var By=/%20/g,yy=/#.*$/,Qy=/([?&])_=[^&]*/,KE=/^(.*?):[ \t]*([^\r\n]*)$/mg,_y=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vy=/^(?:GET|HEAD)$/,Mm=/^\/\//,km={},Pm={},oB="*/".concat("*"),sB=Be.createElement("a");sB.href=xC.href;function Om(ye){return function(Le,Ge){typeof Le!="string"&&(Ge=Le,Le="*");var Ue,Et=0,St=Le.toLowerCase().match(eA)||[];if(ge(Ge))for(;Ue=St[Et++];)Ue[0]==="+"?(Ue=Ue.slice(1)||"*",(ye[Ue]=ye[Ue]||[]).unshift(Ge)):(ye[Ue]=ye[Ue]||[]).push(Ge)}}function Gm(ye,Le,Ge,Ue){var Et={},St=ye===Pm;function Lt(Hn){var Yr;return Et[Hn]=!0,ve.each(ye[Hn]||[],function(sa,dA){var SA=dA(Le,Ge,Ue);if(typeof SA=="string"&&!St&&!Et[SA])return Le.dataTypes.unshift(SA),Lt(SA),!1;if(St)return!(Yr=SA)}),Yr}return Lt(Le.dataTypes[0])||!Et["*"]&&Lt("*")}function wE(ye,Le){var Ge,Ue,Et=ve.ajaxSettings.flatOptions||{};for(Ge in Le)Le[Ge]!==void 0&&((Et[Ge]?ye:Ue||(Ue={}))[Ge]=Le[Ge]);return Ue&&ve.extend(!0,ye,Ue),ye}function Um(ye,Le,Ge){for(var Ue,Et,St,Lt,Hn=ye.contents,Yr=ye.dataTypes;Yr[0]==="*";)Yr.shift(),Ue===void 0&&(Ue=ye.mimeType||Le.getResponseHeader("Content-Type"));if(Ue){for(Et in Hn)if(Hn[Et]&&Hn[Et].test(Ue)){Yr.unshift(Et);break}}if(Yr[0]in Ge)St=Yr[0];else{for(Et in Ge){if(!Yr[0]||ye.converters[Et+" "+Yr[0]]){St=Et;break}Lt||(Lt=Et)}St=St||Lt}if(St)return St!==Yr[0]&&Yr.unshift(St),Ge[St]}function DB(ye,Le,Ge,Ue){var Et,St,Lt,Hn,Yr,sa={},dA=ye.dataTypes.slice();if(dA[1])for(Lt in ye.converters)sa[Lt.toLowerCase()]=ye.converters[Lt];for(St=dA.shift();St;)if(ye.responseFields[St]&&(Ge[ye.responseFields[St]]=Le),!Yr&&Ue&&ye.dataFilter&&(Le=ye.dataFilter(Le,ye.dataType)),Yr=St,St=dA.shift(),St){if(St==="*")St=Yr;else if(Yr!=="*"&&Yr!==St){if(Lt=sa[Yr+" "+St]||sa["* "+St],!Lt){for(Et in sa)if(Hn=Et.split(" "),Hn[1]===St&&(Lt=sa[Yr+" "+Hn[0]]||sa["* "+Hn[0]],Lt)){Lt===!0?Lt=sa[Et]:sa[Et]!==!0&&(St=Hn[0],dA.unshift(Hn[1]));break}}if(Lt!==!0)if(Lt&&ye.throws)Le=Lt(Le);else try{Le=Lt(Le)}catch(SA){return{state:"parsererror",error:Lt?SA:"No conversion from "+Yr+" to "+St}}}}return{state:"success",data:Le}}ve.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xC.href,type:"GET",isLocal:_y.test(xC.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":oB,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ve.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(ye,Le){return Le?wE(wE(ye,ve.ajaxSettings),Le):wE(ve.ajaxSettings,ye)},ajaxPrefilter:Om(km),ajaxTransport:Om(Pm),ajax:function(ye,Le){typeof ye=="object"&&(Le=ye,ye=void 0),Le=Le||{};var Ge,Ue,Et,St,Lt,Hn,Yr,sa,dA,SA,iA=ve.ajaxSetup({},Le),XA=iA.context||iA,ZI=iA.context&&(XA.nodeType||XA.jquery)?ve(XA):ve.event,fC=ve.Deferred(),aC=ve.Callbacks("once memory"),XC=iA.statusCode||{},kC={},pC={},yE="canceled",dC={readyState:0,getResponseHeader:function(IC){var bC;if(Yr){if(!St)for(St={};bC=KE.exec(Et);)St[bC[1].toLowerCase()+" "]=(St[bC[1].toLowerCase()+" "]||[]).concat(bC[2]);bC=St[IC.toLowerCase()+" "]}return bC==null?null:bC.join(", ")},getAllResponseHeaders:function(){return Yr?Et:null},setRequestHeader:function(IC,bC){return Yr==null&&(IC=pC[IC.toLowerCase()]=pC[IC.toLowerCase()]||IC,kC[IC]=bC),this},overrideMimeType:function(IC){return Yr==null&&(iA.mimeType=IC),this},statusCode:function(IC){var bC;if(IC)if(Yr)dC.always(IC[dC.status]);else for(bC in IC)XC[bC]=[XC[bC],IC[bC]];return this},abort:function(IC){var bC=IC||yE;return Ge&&Ge.abort(bC),eE(0,bC),this}};if(fC.promise(dC),iA.url=((ye||iA.url||xC.href)+"").replace(Mm,xC.protocol+"//"),iA.type=Le.method||Le.type||iA.method||iA.type,iA.dataTypes=(iA.dataType||"*").toLowerCase().match(eA)||[""],iA.crossDomain==null){Hn=Be.createElement("a");try{Hn.href=iA.url,Hn.href=Hn.href,iA.crossDomain=sB.protocol+"//"+sB.host!=Hn.protocol+"//"+Hn.host}catch{iA.crossDomain=!0}}if(iA.data&&iA.processData&&typeof iA.data!="string"&&(iA.data=ve.param(iA.data,iA.traditional)),Gm(km,iA,Le,dC),Yr)return dC;sa=ve.event&&iA.global,sa&&ve.active++===0&&ve.event.trigger("ajaxStart"),iA.type=iA.type.toUpperCase(),iA.hasContent=!vy.test(iA.type),Ue=iA.url.replace(yy,""),iA.hasContent?iA.data&&iA.processData&&(iA.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(iA.data=iA.data.replace(By,"+")):(SA=iA.url.slice(Ue.length),iA.data&&(iA.processData||typeof iA.data=="string")&&(Ue+=($C.test(Ue)?"&":"?")+iA.data,delete iA.data),iA.cache===!1&&(Ue=Ue.replace(Qy,"$1"),SA=($C.test(Ue)?"&":"?")+"_="+NC.guid+++SA),iA.url=Ue+SA),iA.ifModified&&(ve.lastModified[Ue]&&dC.setRequestHeader("If-Modified-Since",ve.lastModified[Ue]),ve.etag[Ue]&&dC.setRequestHeader("If-None-Match",ve.etag[Ue])),(iA.data&&iA.hasContent&&iA.contentType!==!1||Le.contentType)&&dC.setRequestHeader("Content-Type",iA.contentType),dC.setRequestHeader("Accept",iA.dataTypes[0]&&iA.accepts[iA.dataTypes[0]]?iA.accepts[iA.dataTypes[0]]+(iA.dataTypes[0]!=="*"?", "+oB+"; q=0.01":""):iA.accepts["*"]);for(dA in iA.headers)dC.setRequestHeader(dA,iA.headers[dA]);if(iA.beforeSend&&(iA.beforeSend.call(XA,dC,iA)===!1||Yr))return dC.abort();if(yE="abort",aC.add(iA.complete),dC.done(iA.success),dC.fail(iA.error),Ge=Gm(Pm,iA,Le,dC),!Ge)eE(-1,"No Transport");else{if(dC.readyState=1,sa&&ZI.trigger("ajaxSend",[dC,iA]),Yr)return dC;iA.async&&iA.timeout>0&&(Lt=s.setTimeout(function(){dC.abort("timeout")},iA.timeout));try{Yr=!1,Ge.send(kC,eE)}catch(IC){if(Yr)throw IC;eE(-1,IC)}}function eE(IC,bC,QE,Im){var uE,TE,gE,NE,xE,hE=bC;Yr||(Yr=!0,Lt&&s.clearTimeout(Lt),Ge=void 0,Et=Im||"",dC.readyState=IC>0?4:0,uE=IC>=200&&IC<300||IC===304,QE&&(NE=Um(iA,dC,QE)),!uE&&ve.inArray("script",iA.dataTypes)>-1&&ve.inArray("json",iA.dataTypes)<0&&(iA.converters["text script"]=function(){}),NE=DB(iA,NE,dC,uE),uE?(iA.ifModified&&(xE=dC.getResponseHeader("Last-Modified"),xE&&(ve.lastModified[Ue]=xE),xE=dC.getResponseHeader("etag"),xE&&(ve.etag[Ue]=xE)),IC===204||iA.type==="HEAD"?hE="nocontent":IC===304?hE="notmodified":(hE=NE.state,TE=NE.data,gE=NE.error,uE=!gE)):(gE=hE,(IC||!hE)&&(hE="error",IC<0&&(IC=0))),dC.status=IC,dC.statusText=(bC||hE)+"",uE?fC.resolveWith(XA,[TE,hE,dC]):fC.rejectWith(XA,[dC,hE,gE]),dC.statusCode(XC),XC=void 0,sa&&ZI.trigger(uE?"ajaxSuccess":"ajaxError",[dC,iA,uE?TE:gE]),aC.fireWith(XA,[dC,hE]),sa&&(ZI.trigger("ajaxComplete",[dC,iA]),--ve.active||ve.event.trigger("ajaxStop")))}return dC},getJSON:function(ye,Le,Ge){return ve.get(ye,Le,Ge,"json")},getScript:function(ye,Le){return ve.get(ye,void 0,Le,"script")}}),ve.each(["get","post"],function(ye,Le){ve[Le]=function(Ge,Ue,Et,St){return ge(Ue)&&(St=St||Et,Et=Ue,Ue=void 0),ve.ajax(ve.extend({url:Ge,type:Le,dataType:St,data:Ue,success:Et},ve.isPlainObject(Ge)&&Ge))}}),ve.ajaxPrefilter(function(ye){var Le;for(Le in ye.headers)Le.toLowerCase()==="content-type"&&(ye.contentType=ye.headers[Le]||"")}),ve._evalUrl=function(ye,Le,Ge){return ve.ajax({url:ye,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(Ue){ve.globalEval(Ue,Le,Ge)}})},ve.fn.extend({wrapAll:function(ye){var Le;return this[0]&&(ge(ye)&&(ye=ye.call(this[0])),Le=ve(ye,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&Le.insertBefore(this[0]),Le.map(function(){for(var Ge=this;Ge.firstElementChild;)Ge=Ge.firstElementChild;return Ge}).append(this)),this},wrapInner:function(ye){return ge(ye)?this.each(function(Le){ve(this).wrapInner(ye.call(this,Le))}):this.each(function(){var Le=ve(this),Ge=Le.contents();Ge.length?Ge.wrapAll(ye):Le.append(ye)})},wrap:function(ye){var Le=ge(ye);return this.each(function(Ge){ve(this).wrapAll(Le?ye.call(this,Ge):ye)})},unwrap:function(ye){return this.parent(ye).not("body").each(function(){ve(this).replaceWith(this.childNodes)}),this}}),ve.expr.pseudos.hidden=function(ye){return!ve.expr.pseudos.visible(ye)},ve.expr.pseudos.visible=function(ye){return!!(ye.offsetWidth||ye.offsetHeight||ye.getClientRects().length)},ve.ajaxSettings.xhr=function(){try{return new s.XMLHttpRequest}catch{}};var RB={0:200,1223:204},pm=ve.ajaxSettings.xhr();ae.cors=!!pm&&"withCredentials"in pm,ae.ajax=pm=!!pm,ve.ajaxTransport(function(ye){var Le,Ge;if(ae.cors||pm&&!ye.crossDomain)return{send:function(Ue,Et){var St,Lt=ye.xhr();if(Lt.open(ye.type,ye.url,ye.async,ye.username,ye.password),ye.xhrFields)for(St in ye.xhrFields)Lt[St]=ye.xhrFields[St];ye.mimeType&&Lt.overrideMimeType&&Lt.overrideMimeType(ye.mimeType),!ye.crossDomain&&!Ue["X-Requested-With"]&&(Ue["X-Requested-With"]="XMLHttpRequest");for(St in Ue)Lt.setRequestHeader(St,Ue[St]);Le=function(Hn){return function(){Le&&(Le=Ge=Lt.onload=Lt.onerror=Lt.onabort=Lt.ontimeout=Lt.onreadystatechange=null,Hn==="abort"?Lt.abort():Hn==="error"?typeof Lt.status!="number"?Et(0,"error"):Et(Lt.status,Lt.statusText):Et(RB[Lt.status]||Lt.status,Lt.statusText,(Lt.responseType||"text")!=="text"||typeof Lt.responseText!="string"?{binary:Lt.response}:{text:Lt.responseText},Lt.getAllResponseHeaders()))}},Lt.onload=Le(),Ge=Lt.onerror=Lt.ontimeout=Le("error"),Lt.onabort!==void 0?Lt.onabort=Ge:Lt.onreadystatechange=function(){Lt.readyState===4&&s.setTimeout(function(){Le&&Ge()})},Le=Le("abort");try{Lt.send(ye.hasContent&&ye.data||null)}catch(Hn){if(Le)throw Hn}},abort:function(){Le&&Le()}}}),ve.ajaxPrefilter(function(ye){ye.crossDomain&&(ye.contents.script=!1)}),ve.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(ye){return ve.globalEval(ye),ye}}}),ve.ajaxPrefilter("script",function(ye){ye.cache===void 0&&(ye.cache=!1),ye.crossDomain&&(ye.type="GET")}),ve.ajaxTransport("script",function(ye){if(ye.crossDomain||ye.scriptAttrs){var Le,Ge;return{send:function(Ue,Et){Le=ve("<script>").attr(ye.scriptAttrs||{}).prop({charset:ye.scriptCharset,src:ye.url}).on("load error",Ge=function(St){Le.remove(),Ge=null,St&&Et(St.type==="error"?404:200,St.type)}),Be.head.appendChild(Le[0])},abort:function(){Ge&&Ge()}}}});var TB=[],aB=/(=)\?(?=&|$)|\?\?/;ve.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var ye=TB.pop()||ve.expando+"_"+NC.guid++;return this[ye]=!0,ye}}),ve.ajaxPrefilter("json jsonp",function(ye,Le,Ge){var Ue,Et,St,Lt=ye.jsonp!==!1&&(aB.test(ye.url)?"url":typeof ye.data=="string"&&(ye.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&aB.test(ye.data)&&"data");if(Lt||ye.dataTypes[0]==="jsonp")return Ue=ye.jsonpCallback=ge(ye.jsonpCallback)?ye.jsonpCallback():ye.jsonpCallback,Lt?ye[Lt]=ye[Lt].replace(aB,"$1"+Ue):ye.jsonp!==!1&&(ye.url+=($C.test(ye.url)?"&":"?")+ye.jsonp+"="+Ue),ye.converters["script json"]=function(){return St||ve.error(Ue+" was not called"),St[0]},ye.dataTypes[0]="json",Et=s[Ue],s[Ue]=function(){St=arguments},Ge.always(function(){Et===void 0?ve(s).removeProp(Ue):s[Ue]=Et,ye[Ue]&&(ye.jsonpCallback=Le.jsonpCallback,TB.push(Ue)),St&&ge(Et)&&Et(St[0]),St=Et=void 0}),"script"}),ae.createHTMLDocument=function(){var ye=Be.implementation.createHTMLDocument("").body;return ye.innerHTML="<form></form><form></form>",ye.childNodes.length===2}(),ve.parseHTML=function(ye,Le,Ge){if(typeof ye!="string")return[];typeof Le=="boolean"&&(Ge=Le,Le=!1);var Ue,Et,St;return Le||(ae.createHTMLDocument?(Le=Be.implementation.createHTMLDocument(""),Ue=Le.createElement("base"),Ue.href=Be.location.href,Le.head.appendChild(Ue)):Le=Be),Et=ZA.exec(ye),St=!Ge&&[],Et?[Le.createElement(Et[1])]:(Et=YA([ye],Le,St),St&&St.length&&ve(St).remove(),ve.merge([],Et.childNodes))},ve.fn.load=function(ye,Le,Ge){var Ue,Et,St,Lt=this,Hn=ye.indexOf(" ");return Hn>-1&&(Ue=ya(ye.slice(Hn)),ye=ye.slice(0,Hn)),ge(Le)?(Ge=Le,Le=void 0):Le&&typeof Le=="object"&&(Et="POST"),Lt.length>0&&ve.ajax({url:ye,type:Et||"GET",dataType:"html",data:Le}).done(function(Yr){St=arguments,Lt.html(Ue?ve("<div>").append(ve.parseHTML(Yr)).find(Ue):Yr)}).always(Ge&&function(Yr,sa){Lt.each(function(){Ge.apply(this,St||[Yr.responseText,sa,Yr])})}),this},ve.expr.pseudos.animated=function(ye){return ve.grep(ve.timers,function(Le){return ye===Le.elem}).length},ve.offset={setOffset:function(ye,Le,Ge){var Ue,Et,St,Lt,Hn,Yr,sa,dA=ve.css(ye,"position"),SA=ve(ye),iA={};dA==="static"&&(ye.style.position="relative"),Hn=SA.offset(),St=ve.css(ye,"top"),Yr=ve.css(ye,"left"),sa=(dA==="absolute"||dA==="fixed")&&(St+Yr).indexOf("auto")>-1,sa?(Ue=SA.position(),Lt=Ue.top,Et=Ue.left):(Lt=parseFloat(St)||0,Et=parseFloat(Yr)||0),ge(Le)&&(Le=Le.call(ye,Ge,ve.extend({},Hn))),Le.top!=null&&(iA.top=Le.top-Hn.top+Lt),Le.left!=null&&(iA.left=Le.left-Hn.left+Et),"using"in Le?Le.using.call(ye,iA):SA.css(iA)}},ve.fn.extend({offset:function(ye){if(arguments.length)return ye===void 0?this:this.each(function(Et){ve.offset.setOffset(this,ye,Et)});var Le,Ge,Ue=this[0];if(Ue)return Ue.getClientRects().length?(Le=Ue.getBoundingClientRect(),Ge=Ue.ownerDocument.defaultView,{top:Le.top+Ge.pageYOffset,left:Le.left+Ge.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var ye,Le,Ge,Ue=this[0],Et={top:0,left:0};if(ve.css(Ue,"position")==="fixed")Le=Ue.getBoundingClientRect();else{for(Le=this.offset(),Ge=Ue.ownerDocument,ye=Ue.offsetParent||Ge.documentElement;ye&&(ye===Ge.body||ye===Ge.documentElement)&&ve.css(ye,"position")==="static";)ye=ye.parentNode;ye&&ye!==Ue&&ye.nodeType===1&&(Et=ve(ye).offset(),Et.top+=ve.css(ye,"borderTopWidth",!0),Et.left+=ve.css(ye,"borderLeftWidth",!0))}return{top:Le.top-Et.top-ve.css(Ue,"marginTop",!0),left:Le.left-Et.left-ve.css(Ue,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var ye=this.offsetParent;ye&&ve.css(ye,"position")==="static";)ye=ye.offsetParent;return ye||WI})}}),ve.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(ye,Le){var Ge=Le==="pageYOffset";ve.fn[ye]=function(Ue){return gA(this,function(Et,St,Lt){var Hn;if(he(Et)?Hn=Et:Et.nodeType===9&&(Hn=Et.defaultView),Lt===void 0)return Hn?Hn[Le]:Et[St];Hn?Hn.scrollTo(Ge?Hn.pageXOffset:Lt,Ge?Lt:Hn.pageYOffset):Et[St]=Lt},ye,Ue,arguments.length)}}),ve.each(["top","left"],function(ye,Le){ve.cssHooks[Le]=WC(ae.pixelPosition,function(Ge,Ue){if(Ue)return Ue=JC(Ge,Le),BA.test(Ue)?ve(Ge).position()[Le]+"px":Ue})}),ve.each({Height:"height",Width:"width"},function(ye,Le){ve.each({padding:"inner"+ye,content:Le,"":"outer"+ye},function(Ge,Ue){ve.fn[Ue]=function(Et,St){var Lt=arguments.length&&(Ge||typeof Et!="boolean"),Hn=Ge||(Et===!0||St===!0?"margin":"border");return gA(this,function(Yr,sa,dA){var SA;return he(Yr)?Ue.indexOf("outer")===0?Yr["inner"+ye]:Yr.document.documentElement["client"+ye]:Yr.nodeType===9?(SA=Yr.documentElement,Math.max(Yr.body["scroll"+ye],SA["scroll"+ye],Yr.body["offset"+ye],SA["offset"+ye],SA["client"+ye])):dA===void 0?ve.css(Yr,sa,Hn):ve.style(Yr,sa,dA,Hn)},Le,Lt?Et:void 0,Lt)}})}),ve.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(ye,Le){ve.fn[Le]=function(Ge){return this.on(Le,Ge)}}),ve.fn.extend({bind:function(ye,Le,Ge){return this.on(ye,null,Le,Ge)},unbind:function(ye,Le){return this.off(ye,null,Le)},delegate:function(ye,Le,Ge,Ue){return this.on(Le,ye,Ge,Ue)},undelegate:function(ye,Le,Ge){return arguments.length===1?this.off(ye,"**"):this.off(Le,ye||"**",Ge)},hover:function(ye,Le){return this.on("mouseenter",ye).on("mouseleave",Le||ye)}}),ve.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(ye,Le){ve.fn[Le]=function(Ge,Ue){return arguments.length>0?this.on(Le,null,Ge,Ue):this.trigger(Le)}});var Sy=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;ve.proxy=function(ye,Le){var Ge,Ue,Et;if(typeof Le=="string"&&(Ge=ye[Le],Le=ye,ye=Ge),!!ge(ye))return Ue=T.call(arguments,2),Et=function(){return ye.apply(Le||this,Ue.concat(T.call(arguments)))},Et.guid=ye.guid=ye.guid||ve.guid++,Et},ve.holdReady=function(ye){ye?ve.readyWait++:ve.ready(!0)},ve.isArray=Array.isArray,ve.parseJSON=JSON.parse,ve.nodeName=Ct,ve.isFunction=ge,ve.isWindow=he,ve.camelCase=HI,ve.type=Re,ve.now=Date.now,ve.isNumeric=function(ye){var Le=ve.type(ye);return(Le==="number"||Le==="string")&&!isNaN(ye-parseFloat(ye))},ve.trim=function(ye){return ye==null?"":(ye+"").replace(Sy,"$1")};var wy=s.jQuery,xy=s.$;return ve.noConflict=function(ye){return s.$===ve&&(s.$=xy),ye&&s.jQuery===ve&&(s.jQuery=wy),ve},typeof f>"u"&&(s.jQuery=s.$=ve),ve})})(jquery);var jqueryExports=jquery.exports;const $=getDefaultExportFromCjs(jqueryExports);/**
 * @license
 * (c) 2009-2016 Michael Leibman
 * michael{dot}leibman{at}gmail{dot}com
 * http://github.com/mleibman/slickgrid
 *
 * Distributed under MIT license.
 * All rights reserved.
 *
 * SlickGrid v2.4
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 */const jQuery=$;(function(d){d.fn.drag=function(T,F,M){var P=typeof T=="string"?T:"",H=d.isFunction(T)?T:d.isFunction(F)?F:null;return P.indexOf("drag")!==0&&(P="drag"+P),M=(T==H?F:M)||{},H?this.on(P,M,H):this.trigger(P)};var s=d.event,f=s.special,_=f.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(T){var F=d.data(this,_.datakey),M=T.data||{};F.related+=1,d.each(_.defaults,function(P,H){M[P]!==void 0&&(F[P]=M[P])})},remove:function(){d.data(this,_.datakey).related-=1},setup:function(){if(!d.data(this,_.datakey)){var T=d.extend({related:0},_.defaults);d.data(this,_.datakey,T),s.add(this,"touchstart mousedown",_.init,T),this.attachEvent&&this.attachEvent("ondragstart",_.dontstart)}},teardown:function(){var T=d.data(this,_.datakey)||{};T.related||(d.removeData(this,_.datakey),s.remove(this,"touchstart mousedown",_.init),_.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",_.dontstart))},init:function(T,F){if(_.touched)return;var M=T.data,P;if(T.which!=0&&M.which>0&&T.which!=M.which||d(T.target).is(M.not)||M.handle&&!d(T.target).closest(M.handle,T.currentTarget).length||(_.touched=T.type=="touchstart"?this:null,M.propagates=1,M.mousedown=this,M.interactions=[_.interaction(this,M)],M.target=T.target,M.pageX=T.pageX,M.pageY=T.pageY,M.dragging=null,P=_.hijack(T,"draginit",M),!M.propagates))return;P=_.flatten(P),P&&P.length&&(M.interactions=[],d.each(P,function(){M.interactions.push(_.interaction(this,M))})),M.propagates=M.interactions.length,M.drop!==!1&&f.drop&&f.drop.handler(T,M),_.textselect(!1);let H=d(T.currentTarget).data("__doc__")||document;if(_.touched?s.add(_.touched,"touchmove touchend",_.handler,M):s.add(H,"mousemove mouseup",_.handler,M),!_.touched||M.live)return!1},interaction:function(T,F){var M=T&&T.ownerDocument?d(T)[F.relative?"position":"offset"]()||{top:0,left:0}:{top:0,left:0};return{drag:T,callback:new _.callback,droppable:[],offset:M}},handler:function(T){var F=T.data;switch(T.type){case(!F.dragging&&"touchmove"):T.preventDefault();case(!F.dragging&&"mousemove"):if(Math.pow(T.pageX-F.pageX,2)+Math.pow(T.pageY-F.pageY,2)<Math.pow(F.distance,2))break;T.target=F.target,_.hijack(T,"dragstart",F),F.propagates&&(F.dragging=!0);case"touchmove":T.preventDefault();case"mousemove":if(F.dragging){if(_.hijack(T,"drag",F),F.propagates){F.drop!==!1&&f.drop&&f.drop.handler(T,F);break}T.type="mouseup"}case"touchend":case"mouseup":default:let M=d(F.target).data("__doc__")||T.currentTarget||document;_.touched?s.remove(_.touched,"touchmove touchend",_.handler):s.remove(M,"mousemove mouseup",_.handler),F.dragging&&(F.drop!==!1&&f.drop&&f.drop.handler(T,F),_.hijack(T,"dragend",F)),_.textselect(!0),F.click===!1&&F.dragging&&d.data(F.mousedown,"suppress.click",new Date().getTime()+5),F.dragging=_.touched=!1;break}},hijack:function(T,F,M,P,H){if(M){var J={event:T.originalEvent,type:T.type},K=F.indexOf("drop")?"drag":"drop",oe,se=P||0,ae,ge,he=isNaN(P)?M.interactions.length:P;T.type=F;var Be=function(){};T.originalEvent=new jQuery.Event(J.event,{preventDefault:Be,stopPropagation:Be,stopImmediatePropagation:Be}),M.results=[];do if(ae=M.interactions[se]){if(F!=="dragend"&&ae.cancelled)continue;ge=_.properties(T,M,ae),ae.results=[],d(H||ae[K]||M.droppable).each(function(pe,be){if(ge.target=be,T.isPropagationStopped=function(){return!1},oe=be?s.dispatch.call(be,T,ge):null,oe===!1?(K=="drag"&&(ae.cancelled=!0,M.propagates-=1),F=="drop"&&(ae[K][pe]=null)):F=="dropinit"&&ae.droppable.push(_.element(oe)||be),F=="dragstart"&&(ae.proxy=d(_.element(oe)||ae.drag)[0]),ae.results.push(oe),delete T.result,F!=="dropinit")return oe}),M.results[se]=_.flatten(ae.results),F=="dropinit"&&(ae.droppable=_.flatten(ae.droppable)),F=="dragstart"&&!ae.cancelled&&ge.update()}while(++se<he);return T.type=J.type,T.originalEvent=J.event,_.flatten(M.results)}},properties:function(T,F,M){var P=M.callback;return P.drag=M.drag,P.proxy=M.proxy||M.drag,P.startX=F.pageX,P.startY=F.pageY,P.deltaX=T.pageX-F.pageX,P.deltaY=T.pageY-F.pageY,P.originalX=M.offset.left,P.originalY=M.offset.top,P.offsetX=P.originalX+P.deltaX,P.offsetY=P.originalY+P.deltaY,P.drop=_.flatten((M.drop||[]).slice()),P.available=_.flatten((M.droppable||[]).slice()),P},element:function(T){if(T&&(T.jquery||T.nodeType==1))return T},flatten:function(T){return d.map(T,function(F){return F&&F.jquery?d.makeArray(F):F&&F.length?_.flatten(F):F})},textselect:function(T){d(document)[T?"off":"on"]("selectstart",_.dontstart).css("MozUserSelect",T?"":"none"),document.unselectable=T?"off":"on"},dontstart:function(){return!1},callback:function(){}};_.callback.prototype={update:function(){f.drop&&this.available.length&&d.each(this.available,function(T){f.drop.locate(this,T)})}};var S=s.dispatch;s.dispatch=function(T){if(d.data(this,"suppress."+T.type)-new Date().getTime()>0){d.removeData(this,"suppress."+T.type);return}return S.apply(this,arguments)},f.draginit=f.dragstart=f.dragend=_})($);var scrollbarDimensions,maxSupportedCssHeight;function SlickGrid(container,data,columns,options){var defaults={alwaysShowVerticalScroll:!1,alwaysAllowHorizontalScroll:!1,explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,suppressActiveCellChangeOnEdit:!1,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,enableAsyncPostRenderCleanup:!1,asyncPostRenderCleanupDelay:40,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showColumnHeader:!0,showHeaderRow:!1,headerRowHeight:25,createFooterRow:!1,showFooterRow:!1,footerRowHeight:25,createPreHeaderPanel:!1,showPreHeaderPanel:!1,preHeaderPanelHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,frozenBottom:!1,frozenColumn:-1,frozenRow:-1,frozenRightViewportMinWidth:100,fullWidthRows:!1,multiColumnSort:!1,numberedMultiColumnSort:!1,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!1,defaultFormatter,forceSyncScrolling:!1,addNewRowCssClass:"new-row",preserveCopiedSelectionOnPaste:!1,showCellSelection:!0,viewportClass:null,minRowBuffer:3,emulatePagingWhenScrolling:!0,editorCellNavOnLRKeys:!1,enableMouseWheelScrollHandler:!0,doPaging:!0,autosizeColsMode:Slick.GridAutosizeColsMode.LegacyOff,autosizeColPaddingPx:4,autosizeTextAvgToMWidthRatio:.75,viewportSwitchToScrollModeWidthPercent:void 0,viewportMinWidthPx:void 0,viewportMaxWidthPx:void 0,suppressCssChangesOnHiddenInit:!1},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,maxWidth:void 0,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0},columnAutosizeDefaults={ignoreHeaderText:!1,colValueArray:void 0,allowAddlPercent:void 0,formatterOverride:void 0,autosizeMode:Slick.ColAutosizeMode.ContentIntelligent,rowSelectionModeOnInit:void 0,rowSelectionMode:Slick.RowSelectionMode.FirstNRows,rowSelectionCount:100,valueFilterMode:Slick.ValueFilterMode.None,widthEvalMode:Slick.WidthEvalMode.CanvasTextSize,sizeToRemaining:void 0,widthPx:void 0,colDataTypeOf:void 0},th,h,ph,n,cj,page=0,offset=0,vScrollDir=1,initialized=!1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$focusSink,$focusSink2;$();var $headerScroller,$headers,$headerRow,$headerRowScroller,$headerRowSpacerL,$headerRowSpacerR,$footerRow,$footerRowScroller,$footerRowSpacerL,$footerRowSpacerR,$preHeaderPanel,$preHeaderPanelScroller,$preHeaderPanelSpacer,$preHeaderPanelR,$preHeaderPanelScrollerR,$topPanelScroller,$topPanel,$viewport,$canvas,$style,$boundAncestors,treeColumns,stylesheet,columnCssRulesL,columnCssRulesR,viewportH,viewportW,canvasWidth,canvasWidthL,canvasWidthR,headersWidth,headersWidthL,headersWidthR,viewportHasHScroll,viewportHasVScroll,headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,jQueryNewWidthBehaviour=!1,absoluteColumnMinWidth,hasFrozenRows=!1,frozenRowsHeight=0,actualFrozenRow=-1,paneTopH=0,paneBottomH=0,viewportTopH=0,topPanelH=0,headerRowH=0,footerRowH=0,tabbingDirection=1,$activeCanvasNode,$activeViewportNode,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows=0,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,lastRenderedScrollLeft=0,prevScrollLeft=0,scrollLeft=0,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumns=[],columnPosLeft=[],columnPosRight=[],pagingActive=!1,pagingIsLastPage=!1,scrollThrottle=ActionThrottle(render,50),h_editorLoader=null,h_postrender=null,h_postrenderCleanup=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,postProcessedCleanupQueue=[],counter_rows_rendered=0,counter_rows_removed=0,rowNodeFromLastMouseWheelEvent,zombieRowNodeFromLastMouseWheelEvent,$paneHeaderL,$paneHeaderR,$paneTopL,$paneTopR,$paneBottomL,$paneBottomR,$headerScrollerL,$headerScrollerR,$headerL,$headerR,$groupHeadersL,$groupHeadersR,$headerRowScrollerL,$headerRowScrollerR,$footerRowScrollerL,$footerRowScrollerR,$headerRowL,$headerRowR,$footerRowL,$footerRowR,$topPanelScrollerL,$topPanelScrollerR,$topPanelL,$topPanelR,$viewportTopL,$viewportTopR,$viewportBottomL,$viewportBottomR,$canvasTopL,$canvasTopR,$canvasBottomL,$canvasBottomR,$viewportScrollContainerX,$viewportScrollContainerY,$headerScrollContainer,$headerRowScrollContainer,$footerRowScrollContainer,cssShow={position:"absolute",visibility:"hidden",display:"block"},$hiddenParents,oldProps=[],columnResizeDragging=!1,__doc__=document;function init(){if(container instanceof $?$container=container:$container=$(container),$container.length<1)throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");if(options.suppressCssChangesOnHiddenInit||cacheCssForHiddenInit(),maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight(),options=$.extend({},defaults,options),validateAndEnforceOptions(),columnDefaults.width=options.defaultColumnWidth,treeColumns=new Slick.TreeColumns(columns),columns=treeColumns.extractColumns(),updateColumnProps(),options.enableColumnReorder&&!$.fn.sortable)throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");if(editController={commitCurrentEdit,cancelCurrentEdit},$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container),$paneHeaderL=$("<div class='slick-pane slick-pane-header slick-pane-left' tabIndex='0' />").appendTo($container),$paneHeaderR=$("<div class='slick-pane slick-pane-header slick-pane-right' tabIndex='0' />").appendTo($container),$paneTopL=$("<div class='slick-pane slick-pane-top slick-pane-left' tabIndex='0' />").appendTo($container),$paneTopR=$("<div class='slick-pane slick-pane-top slick-pane-right' tabIndex='0' />").appendTo($container),$paneBottomL=$("<div class='slick-pane slick-pane-bottom slick-pane-left' tabIndex='0' />").appendTo($container),$paneBottomR=$("<div class='slick-pane slick-pane-bottom slick-pane-right' tabIndex='0' />").appendTo($container),options.createPreHeaderPanel&&($preHeaderPanelScroller=$("<div class='slick-preheader-panel ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($paneHeaderL),$preHeaderPanel=$("<div />").appendTo($preHeaderPanelScroller),$preHeaderPanelSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($preHeaderPanelScroller),$preHeaderPanelScrollerR=$("<div class='slick-preheader-panel ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($paneHeaderR),$preHeaderPanelR=$("<div />").appendTo($preHeaderPanelScrollerR),$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($preHeaderPanelScrollerR),options.showPreHeaderPanel||($preHeaderPanelScroller.hide(),$preHeaderPanelScrollerR.hide())),$headerScrollerL=$("<div class='slick-header ui-state-default slick-header-left' />").appendTo($paneHeaderL),$headerScrollerR=$("<div class='slick-header ui-state-default slick-header-right' />").appendTo($paneHeaderR),$headerScroller=$().add($headerScrollerL).add($headerScrollerR),treeColumns.hasDepth()){$groupHeadersL=[],$groupHeadersR=[];for(var d=0;d<treeColumns.getDepth()-1;d++)$groupHeadersL[d]=$("<div class='slick-group-header-columns slick-group-header-columns-left' style='left:-1000px' />").appendTo($headerScrollerL),$groupHeadersR[d]=$("<div class='slick-group-header-columns slick-group-header-columns-right' style='left:-1000px' />").appendTo($headerScrollerR);$().add($groupHeadersL).add($groupHeadersR)}$headerL=$("<div class='slick-header-columns slick-header-columns-left' style='left:-1000px' />").data("__doc__",__doc__).appendTo($headerScrollerL),$headerR=$("<div class='slick-header-columns slick-header-columns-right' style='left:-1000px' />").appendTo($headerScrollerR),$headers=$().add($headerL).add($headerR),$headerRowScrollerL=$("<div class='slick-headerrow ui-state-default' />").appendTo($paneTopL),$headerRowScrollerR=$("<div class='slick-headerrow ui-state-default' />").appendTo($paneTopR),$headerRowScroller=$().add($headerRowScrollerL).add($headerRowScrollerR),$headerRowSpacerL=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($headerRowScrollerL),$headerRowSpacerR=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($headerRowScrollerR),$headerRowL=$("<div class='slick-headerrow-columns slick-headerrow-columns-left' />").appendTo($headerRowScrollerL),$headerRowR=$("<div class='slick-headerrow-columns slick-headerrow-columns-right' />").appendTo($headerRowScrollerR),$headerRow=$().add($headerRowL).add($headerRowR),$topPanelScrollerL=$("<div class='slick-top-panel-scroller ui-state-default' />").appendTo($paneTopL),$topPanelScrollerR=$("<div class='slick-top-panel-scroller ui-state-default' />").appendTo($paneTopR),$topPanelScroller=$().add($topPanelScrollerL).add($topPanelScrollerR),$topPanelL=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScrollerL),$topPanelR=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScrollerR),$topPanel=$().add($topPanelL).add($topPanelR),options.showColumnHeader||$headerScroller.hide(),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),$viewportTopL=$("<div class='slick-viewport slick-viewport-top slick-viewport-left' tabIndex='0' hideFocus />").appendTo($paneTopL),$viewportTopR=$("<div class='slick-viewport slick-viewport-top slick-viewport-right' tabIndex='0' hideFocus />").appendTo($paneTopR),$viewportBottomL=$("<div class='slick-viewport slick-viewport-bottom slick-viewport-left' tabIndex='0' hideFocus />").appendTo($paneBottomL),$viewportBottomR=$("<div class='slick-viewport slick-viewport-bottom slick-viewport-right' tabIndex='0' hideFocus />").appendTo($paneBottomR),$viewport=$().add($viewportTopL).add($viewportTopR).add($viewportBottomL).add($viewportBottomR),$activeViewportNode=$viewportTopL,$canvasTopL=$("<div class='grid-canvas grid-canvas-top grid-canvas-left' tabIndex='0' hideFocus />").appendTo($viewportTopL),$canvasTopR=$("<div class='grid-canvas grid-canvas-top grid-canvas-right' tabIndex='0' hideFocus />").appendTo($viewportTopR),$canvasBottomL=$("<div class='grid-canvas grid-canvas-bottom grid-canvas-left' tabIndex='0' hideFocus />").appendTo($viewportBottomL),$canvasBottomR=$("<div class='grid-canvas grid-canvas-bottom grid-canvas-right' tabIndex='0' hideFocus />").appendTo($viewportBottomR),options.viewportClass&&$viewport.toggleClass(options.viewportClass,!0),$canvas=$().add($canvasTopL).add($canvasTopR).add($canvasBottomL).add($canvasBottomR),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),$activeCanvasNode=$canvasTopL,$preHeaderPanelSpacer&&$preHeaderPanelSpacer.css("width",getCanvasWidth()+scrollbarDimensions.width+"px"),$headers.width(getHeadersWidth()),$headerRowSpacerL.css("width",getCanvasWidth()+scrollbarDimensions.width+"px"),$headerRowSpacerR.css("width",getCanvasWidth()+scrollbarDimensions.width+"px"),options.createFooterRow&&($footerRowScrollerR=$("<div class='slick-footerrow ui-state-default' />").appendTo($paneTopR),$footerRowScrollerL=$("<div class='slick-footerrow ui-state-default' />").appendTo($paneTopL),$footerRowScroller=$().add($footerRowScrollerL).add($footerRowScrollerR),$footerRowSpacerL=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($footerRowScrollerL),$footerRowSpacerR=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($footerRowScrollerR),$footerRowL=$("<div class='slick-footerrow-columns slick-footerrow-columns-left' />").appendTo($footerRowScrollerL),$footerRowR=$("<div class='slick-footerrow-columns slick-footerrow-columns-right' />").appendTo($footerRowScrollerR),$footerRow=$().add($footerRowL).add($footerRowR),options.showFooterRow||$footerRowScroller.hide()),$focusSink2=$focusSink.clone().appendTo($container),options.explicitInitialization||finishInitialization()}function finishInitialization(){initialized||(initialized=!0,getViewportWidth(),getViewportHeight(),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.on("selectstart.ui",function(d){return $(d.target).is("input,textarea")}),setFrozenOptions(),setPaneVisibility(),setScroller(),setOverflow(),updateColumnCaches(),createColumnHeaders(),createColumnGroupHeaders(),createColumnFooter(),setupColumnSort(),createCssRules(),resizeCanvas(),bindAncestorScrollEvents(),$container.on("resize.slickgrid",resizeCanvas),$viewport.on("scroll",handleScroll),jQuery.fn.mousewheel&&options.enableMouseWheelScrollHandler&&$viewport.on("mousewheel",handleMouseWheel),$headerScroller.on("contextmenu",handleHeaderContextMenu).on("click",handleHeaderClick).on("mouseenter",".slick-header-column",handleHeaderMouseEnter).on("mouseleave",".slick-header-column",handleHeaderMouseLeave),$headerRowScroller.on("scroll",handleHeaderRowScroll),options.createFooterRow&&($footerRow.on("contextmenu",handleFooterContextMenu).on("click",handleFooterClick),$footerRowScroller.on("scroll",handleFooterRowScroll)),options.createPreHeaderPanel&&$preHeaderPanelScroller.on("scroll",handlePreHeaderPanelScroll),$focusSink.add($focusSink2).on("keydown",handleKeyDown),$canvas.on("keydown",handleKeyDown).on("click",handleClick).on("dblclick",handleDblClick).on("contextmenu",handleContextMenu).on("draginit",handleDragInit).on("dragstart",{distance:3},handleDragStart).on("drag",handleDrag).on("dragend",handleDragEnd).on("mouseenter",".slick-cell",handleMouseEnter).on("mouseleave",".slick-cell",handleMouseLeave),options.suppressCssChangesOnHiddenInit||restoreCssFromHiddenInit())}function cacheCssForHiddenInit(){$hiddenParents=$container.parents().addBack().not(":visible"),$hiddenParents.each(function(){var d={};for(var s in cssShow)d[s]=this.style[s],this.style[s]=cssShow[s];oldProps.push(d)})}function restoreCssFromHiddenInit(){$hiddenParents.each(function(d){var s=oldProps[d];for(var f in cssShow)this.style[f]=s[f]})}function hasFrozenColumns(){return options.frozenColumn>-1}function registerPlugin(d){plugins.unshift(d),d.init(self)}function unregisterPlugin(d){for(var s=plugins.length;s>=0;s--)if(plugins[s]===d){plugins[s].destroy&&plugins[s].destroy(),plugins.splice(s,1);break}}function getPluginByName(d){for(var s=plugins.length-1;s>=0;s--)if(plugins[s].pluginName===d)return plugins[s]}function setSelectionModel(d){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),selectionModel=d,selectionModel&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(d,s){return _getContainerElement(getCanvases(),d,s)}function getActiveCanvasNode(d){return setActiveCanvasNode(d),$activeCanvasNode[0]}function getCanvases(){return $canvas}function setActiveCanvasNode(d){d&&($activeCanvasNode=$(d.target).closest(".grid-canvas"))}function getViewportNode(d,s){return _getContainerElement(getViewports(),d,s)}function getViewports(){return $viewport}function getActiveViewportNode(d){return setActiveViewportNode(d),$activeViewportNode[0]}function setActiveViewportNode(d){d&&($activeViewportNode=$(d.target).closest(".slick-viewport"))}function _getContainerElement(d,s,f){if(d){s||(s=0),f||(f=0);var _=typeof s=="number"?s:getColumnIndex(s),S=hasFrozenRows&&f>=actualFrozenRow+(options.frozenBottom?0:1),T=hasFrozenColumns()&&_>options.frozenColumn;return d[(S?2:0)+(T?1:0)]}}function measureScrollbar(){var d=$('<div class="'+$viewport.className+'" style="position:absolute; top:-10000px; left:-10000px; overflow:auto; width:100px; height:100px;"></div>').appendTo("body"),s=$('<div style="width:200px; height:200px; overflow:auto;"></div>').appendTo(d),f={width:d[0].offsetWidth-d[0].clientWidth,height:d[0].offsetHeight-d[0].clientHeight};return s.remove(),d.remove(),f}function getHeadersWidth(){headersWidth=headersWidthL=headersWidthR=0;for(var d=!options.autoHeight,s=0,f=columns.length;s<f;s++){var _=columns[s].width;options.frozenColumn>-1&&s>options.frozenColumn?headersWidthR+=_:headersWidthL+=_}return d&&(options.frozenColumn>-1&&s>options.frozenColumn?headersWidthR+=scrollbarDimensions.width:headersWidthL+=scrollbarDimensions.width),hasFrozenColumns()?(headersWidthL=headersWidthL+1e3,headersWidthR=Math.max(headersWidthR,viewportW)+headersWidthL,headersWidthR+=scrollbarDimensions.width):(headersWidthL+=scrollbarDimensions.width,headersWidthL=Math.max(headersWidthL,viewportW)+1e3),headersWidth=headersWidthL+headersWidthR,Math.max(headersWidth,viewportW)+1e3}function getHeadersWidthL(){return headersWidthL=0,columns.forEach(function(d,s){options.frozenColumn>-1&&s>options.frozenColumn||(headersWidthL+=d.width)}),hasFrozenColumns()?headersWidthL+=1e3:(headersWidthL+=scrollbarDimensions.width,headersWidthL=Math.max(headersWidthL,viewportW)+1e3),headersWidthL}function getHeadersWidthR(){return headersWidthR=0,columns.forEach(function(d,s){options.frozenColumn>-1&&s>options.frozenColumn&&(headersWidthR+=d.width)}),hasFrozenColumns()&&(headersWidthR=Math.max(headersWidthR,viewportW)+getHeadersWidthL(),headersWidthR+=scrollbarDimensions.width),headersWidthR}function getCanvasWidth(){var d=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,s=columns.length;for(canvasWidthL=canvasWidthR=0;s--;)hasFrozenColumns()&&s>options.frozenColumn?canvasWidthR+=columns[s].width:canvasWidthL+=columns[s].width;var f=canvasWidthL+canvasWidthR;return options.fullWidthRows?Math.max(f,d):f}function updateCanvasWidth(d){var s=canvasWidth,f=canvasWidthL,_=canvasWidthR,S;canvasWidth=getCanvasWidth(),S=canvasWidth!==s||canvasWidthL!==f||canvasWidthR!==_,(S||hasFrozenColumns()||hasFrozenRows)&&($canvasTopL.width(canvasWidthL),getHeadersWidth(),$headerL.width(headersWidthL),$headerR.width(headersWidthR),hasFrozenColumns()?($canvasTopR.width(canvasWidthR),$paneHeaderL.width(canvasWidthL),$paneHeaderR.css("left",canvasWidthL),$paneHeaderR.css("width",viewportW-canvasWidthL),$paneTopL.width(canvasWidthL),$paneTopR.css("left",canvasWidthL),$paneTopR.css("width",viewportW-canvasWidthL),$headerRowScrollerL.width(canvasWidthL),$headerRowScrollerR.width(viewportW-canvasWidthL),$headerRowL.width(canvasWidthL),$headerRowR.width(canvasWidthR),options.createFooterRow&&($footerRowScrollerL.width(canvasWidthL),$footerRowScrollerR.width(viewportW-canvasWidthL),$footerRowL.width(canvasWidthL),$footerRowR.width(canvasWidthR)),options.createPreHeaderPanel&&$preHeaderPanel.width(canvasWidth),$viewportTopL.width(canvasWidthL),$viewportTopR.width(viewportW-canvasWidthL),hasFrozenRows&&($paneBottomL.width(canvasWidthL),$paneBottomR.css("left",canvasWidthL),$viewportBottomL.width(canvasWidthL),$viewportBottomR.width(viewportW-canvasWidthL),$canvasBottomL.width(canvasWidthL),$canvasBottomR.width(canvasWidthR))):($paneHeaderL.width("100%"),$paneTopL.width("100%"),$headerRowScrollerL.width("100%"),$headerRowL.width(canvasWidth),options.createFooterRow&&($footerRowScrollerL.width("100%"),$footerRowL.width(canvasWidth)),options.createPreHeaderPanel&&($preHeaderPanel.width("100%"),$preHeaderPanel.width(canvasWidth)),$viewportTopL.width("100%"),hasFrozenRows&&($viewportBottomL.width("100%"),$canvasBottomL.width(canvasWidthL))),viewportHasHScroll=canvasWidth>=viewportW-scrollbarDimensions.width),$headerRowSpacerL.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),$headerRowSpacerR.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),options.createFooterRow&&($footerRowSpacerL.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),$footerRowSpacerR.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0))),(S||d)&&applyColumnWidths()}function disableSelection(d){d&&d.jquery&&d.attr("unselectable","on").css("MozUserSelect","none").on("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){for(var d=1e6,s=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,f=$("<div style='display:none' />").appendTo(__doc__.body);;){var _=d*2;if(f.css("height",_),_>s||f.height()!==_)break;d=_}return f.remove(),d}function getUID(){return uid}function getHeaderColumnWidthDiff(){return headerColumnWidthDiff}function getScrollbarDimensions(){return scrollbarDimensions}function bindAncestorScrollEvents(){for(var d=hasFrozenRows&&!options.frozenBottom?$canvasBottomL[0]:$canvasTopL[0];(d=d.parentNode)!=__doc__.body&&d!=null;)if(d==$viewportTopL[0]||d.scrollWidth!=d.clientWidth||d.scrollHeight!=d.clientHeight){var s=$(d);$boundAncestors?$boundAncestors=$boundAncestors.add(s):$boundAncestors=s,s.on("scroll."+uid,handleActiveCellPositionChange)}}function unbindAncestorScrollEvents(){$boundAncestors&&($boundAncestors.off("scroll."+uid),$boundAncestors=null)}function updateColumnHeader(d,s,f){if(initialized){var _=getColumnIndex(d);if(_!=null){var S=columns[_],T=$headers.children().eq(_);T&&(s!==void 0&&(columns[_].name=s),f!==void 0&&(columns[_].toolTip=f),trigger(self.onBeforeHeaderCellDestroy,{node:T[0],column:S,grid:self}),T.attr("title",f||"").children().eq(0).html(s),trigger(self.onHeaderCellRendered,{node:T[0],column:S,grid:self}))}}}function getHeader(d){if(!d)return hasFrozenColumns()?$headers:$headerL;var s=getColumnIndex(d.id);return hasFrozenColumns()?s<=options.frozenColumn?$headerL:$headerR:$headerL}function getHeaderColumn(d){var s=typeof d=="number"?d:getColumnIndex(d),f=hasFrozenColumns()?s<=options.frozenColumn?$headerL:$headerR:$headerL,_=hasFrozenColumns()?s<=options.frozenColumn?s:s-options.frozenColumn-1:s,S=f.children().eq(_);return S&&S[0]}function getHeaderRow(){return hasFrozenColumns()?$headerRow:$headerRow[0]}function getFooterRow(){return hasFrozenColumns()?$footerRow:$footerRow[0]}function getPreHeaderPanel(){return $preHeaderPanel[0]}function getPreHeaderPanelRight(){return $preHeaderPanelR[0]}function getHeaderRowColumn(d){var s=typeof d=="number"?d:getColumnIndex(d),f;hasFrozenColumns()?s<=options.frozenColumn?f=$headerRowL:(f=$headerRowR,s-=options.frozenColumn+1):f=$headerRowL;var _=f.children().eq(s);return _&&_[0]}function getFooterRowColumn(d){var s=typeof d=="number"?d:getColumnIndex(d),f;hasFrozenColumns()?s<=options.frozenColumn?f=$footerRowL:(f=$footerRowR,s-=options.frozenColumn+1):f=$footerRowL;var _=f&&f.children().eq(s);return _&&_[0]}function createColumnFooter(){if(options.createFooterRow){$footerRow.find(".slick-footerrow-column").each(function(){var _=$(this).data("column");_&&trigger(self.onBeforeFooterRowCellDestroy,{node:this,column:_,grid:self})}),$footerRowL.empty(),$footerRowR.empty();for(var d=0;d<columns.length;d++){var s=columns[d],f=$("<div class='ui-state-default slick-footerrow-column l"+d+" r"+d+"'></div>").data("column",s).addClass(hasFrozenColumns()&&d<=options.frozenColumn?"frozen":"").appendTo(hasFrozenColumns()&&d>options.frozenColumn?$footerRowR:$footerRowL);trigger(self.onFooterRowCellRendered,{node:f[0],column:s,grid:self})}}}function createColumnGroupHeaders(){var d=0,s=!1;if(treeColumns.hasDepth()){for(var f=0;f<$groupHeadersL.length;f++){$groupHeadersL[f].empty(),$groupHeadersR[f].empty();var _=treeColumns.getColumnsInDepth(f);for(var S in _){var T=_[S];d+=T.extractColumns().length,hasFrozenColumns()&&f===0&&d-1===options.frozenColumn&&(s=!0),$("<div class='ui-state-default slick-group-header-column' />").html("<span class='slick-column-name'>"+T.name+"</span>").attr("id",""+uid+T.id).attr("title",T.toolTip||"").data("column",T).addClass(T.headerCssClass||"").addClass(hasFrozenColumns()&&d-1>options.frozenColumn?"frozen":"").appendTo(hasFrozenColumns()&&d-1>options.frozenColumn?$groupHeadersR[f]:$groupHeadersL[f])}if(hasFrozenColumns()&&f===0&&!s){$groupHeadersL[f].empty(),$groupHeadersR[f].empty(),alert("All columns of group should to be grouped!");break}}applyColumnGroupHeaderWidths()}}function createColumnHeaders(){function d(){$(this).addClass("ui-state-hover")}function s(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var J=$(this).data("column");J&&trigger(self.onBeforeHeaderCellDestroy,{node:this,column:J,grid:self})}),$headerL.empty(),$headerR.empty(),getHeadersWidth(),$headerL.width(headersWidthL),$headerR.width(headersWidthR),$headerRow.find(".slick-headerrow-column").each(function(){var J=$(this).data("column");J&&trigger(self.onBeforeHeaderRowCellDestroy,{node:this,column:J,grid:self})}),$headerRowL.empty(),$headerRowR.empty(),options.createFooterRow&&($footerRowL.find(".slick-footerrow-column").each(function(){var J=$(this).data("column");J&&trigger(self.onBeforeFooterRowCellDestroy,{node:this,column:J,grid:self})}),$footerRowL.empty(),hasFrozenColumns()&&($footerRowR.find(".slick-footerrow-column").each(function(){var J=$(this).data("column");J&&trigger(self.onBeforeFooterRowCellDestroy,{node:this,column:J,grid:self})}),$footerRowR.empty()));for(var f=0;f<columns.length;f++){var _=columns[f],S=hasFrozenColumns()?f<=options.frozenColumn?$headerL:$headerR:$headerL,T=hasFrozenColumns()?f<=options.frozenColumn?$headerRowL:$headerRowR:$headerRowL,F=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+_.name+"</span>").width(_.width-headerColumnWidthDiff).attr("id",""+uid+_.id).attr("title",_.toolTip||"").data("column",_).data("__doc__",__doc__).addClass(_.headerCssClass||"").addClass(hasFrozenColumns()&&f<=options.frozenColumn?"frozen":"").appendTo(S);if((options.enableColumnReorder||_.sortable)&&F.on("mouseenter",d).on("mouseleave",s),F.on("dragstart",(J,K)=>{K.target.style.zIndex=1,K.target.style.opacity=.6}).on("drag",(J,K)=>{K.target.style.left=1e3+(K.offsetX-K.originalX)+"px"}).on("dragend",(J,K)=>{if(Math.abs(K.deltaX)<5){K.target.style.opacity=1,K.target.style.zIndex="";return}const oe=$(K.target).data("column");let se=0;const ae=[];let ge=0;for(let pe of columns)ae.push(ge),pe===oe&&(se=ge),ge+=pe.width;ae.push(ge+1e3);const he=[];let Be=se+K.deltaX;Be<0&&he.push(oe);for(let pe=0;pe<columns.length;pe++)columns[pe]!==oe&&he.push(columns[pe]),Be>ae[pe]&&Be<ae[pe+1]&&(he.push(oe),Be=-1e3);columns=he,setColumns(columns)}),_.hasOwnProperty("headerCellAttrs")&&_.headerCellAttrs instanceof Object)for(var M in _.headerCellAttrs)_.headerCellAttrs.hasOwnProperty(M)&&F.attr(M,_.headerCellAttrs[M]);if(_.sortable&&(F.addClass("slick-header-sortable"),F.append("<span class='slick-sort-indicator"+(options.numberedMultiColumnSort&&!options.sortColNumberInSeparateSpan?" slick-sort-indicator-numbered":"")+"' />"),options.numberedMultiColumnSort&&options.sortColNumberInSeparateSpan&&F.append("<span class='slick-sort-indicator-numbered' />")),trigger(self.onHeaderCellRendered,{node:F[0],column:_,grid:self}),options.showHeaderRow){var P=$("<div class='ui-state-default slick-headerrow-column l"+f+" r"+f+"'></div>").data("column",_).addClass(hasFrozenColumns()&&f<=options.frozenColumn?"frozen":"").appendTo(T);trigger(self.onHeaderRowCellRendered,{node:P[0],column:_,grid:self})}if(options.createFooterRow&&options.showFooterRow){var H=$("<div class='ui-state-default slick-footerrow-column l"+f+" r"+f+"'></div>").data("column",_).appendTo($footerRow);trigger(self.onFooterRowCellRendered,{node:H[0],column:_,grid:self})}}setSortColumns(sortColumns),setupColumnResize(),options.enableColumnReorder&&(typeof options.enableColumnReorder=="function"?options.enableColumnReorder(self,$headers,headerColumnWidthDiff,setColumns,setupColumnResize,columns,getColumnIndex,uid,trigger):setupColumnReorder())}function setupColumnSort(){$headers.click(function(d){if(!columnResizeDragging&&(d.metaKey=d.metaKey||d.ctrlKey,!$(d.target).hasClass("slick-resizable-handle"))){var s=$(d.target).closest(".slick-header-column");if(s.length){var f=s.data("column");if(f.sortable){if(!getEditorLock().commitCurrentEdit())return;for(var _=null,S=0;S<sortColumns.length;S++)if(sortColumns[S].columnId==f.id){_=sortColumns[S],_.sortAsc=!_.sortAsc;break}var T=!!_;options.tristateMultiColumnSort?(_||(_={columnId:f.id,sortAsc:f.defaultSortAsc}),T&&_.sortAsc&&(sortColumns.splice(S,1),_=null),options.multiColumnSort||(sortColumns=[]),_&&(!T||!options.multiColumnSort)&&sortColumns.push(_)):d.metaKey&&options.multiColumnSort?_&&sortColumns.splice(S,1):((!d.shiftKey&&!d.metaKey||!options.multiColumnSort)&&(sortColumns=[]),_?sortColumns.length===0&&sortColumns.push(_):(_={columnId:f.id,sortAsc:f.defaultSortAsc},sortColumns.push(_))),setSortColumns(sortColumns),options.multiColumnSort?trigger(self.onSort,{multiColumnSort:!0,sortCols:$.map(sortColumns,function(F){return{columnId:columns[getColumnIndex(F.columnId)].id,sortCol:columns[getColumnIndex(F.columnId)],sortAsc:F.sortAsc}})},d):trigger(self.onSort,{multiColumnSort:!1,columnId:sortColumns.length>0?f.id:null,sortCol:sortColumns.length>0?f:null,sortAsc:sortColumns.length>0?sortColumns[0].sortAsc:!0},d)}}}})}function currentPositionInHeader(d){var s=0;return $headers.find(".slick-header-column").each(function(f){if(this.id==d)return s=f,!1}),s}function limitPositionInGroup(d){var s,f=0,_=0;return treeColumns.getColumnsInDepth($groupHeadersL.length-1).some(function(S){return f=_,_+=S.columns.length,S.columns.some(function(T){return T.id===d&&(s=S),s}),s}),_--,{start:f,end:_,group:s}}function columnPositionValidInGroup(d){var s=currentPositionInHeader(d[0].id),f=limitPositionInGroup(d.data("column").id),_=f.start<=s&&s<=f.end;return{limit:f,valid:_,message:_?"":'Column "'.concat(d.text(),'" can be reordered only within the "',f.group.name,'" group!')}}function setupColumnReorder(){$headers.filter(":ui-sortable").sortable("destroy");var d=null;function s(){$viewportScrollContainerX[0].scrollLeft=$viewportScrollContainerX[0].scrollLeft+10}function f(){$viewportScrollContainerX[0].scrollLeft=$viewportScrollContainerX[0].scrollLeft-10}var _;$headers.sortable({containment:"parent",distance:3,axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",start:function(S,T){T.placeholder.width(T.helper.outerWidth()-headerColumnWidthDiff),_=!hasFrozenColumns()||T.placeholder.offset().left+T.placeholder.width()>$viewportScrollContainerX.offset().left,$(T.helper).addClass("slick-header-column-active")},beforeStop:function(S,T){$(T.helper).removeClass("slick-header-column-active")},sort:function(S,T){_&&S.originalEvent.pageX>$container[0].clientWidth?d||(d=setInterval(s,100)):_&&S.originalEvent.pageX<$viewportScrollContainerX.offset().left?d||(d=setInterval(f,100)):(clearInterval(d),d=null)},stop:function(S,T){var F=!1;clearInterval(d),d=null;var M=null;if(treeColumns.hasDepth()){var P=columnPositionValidInGroup(T.item);M=P.limit,F=!P.valid,F&&alert(P.message)}if(F||!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return}var H=$headerL.sortable("toArray");H=H.concat($headerR.sortable("toArray"));for(var J=[],K=0;K<H.length;K++)J.push(columns[getColumnIndex(H[K].replace(uid,""))]);setColumns(J),trigger(self.onColumnsReordered,{impactedColumns:getImpactedColumns(M)}),S.stopPropagation(),setupColumnResize()}})}function getImpactedColumns(d){var s=[];if(d)for(var f=d.start;f<=d.end;f++)s.push(columns[f]);else s=columns;return s}function setupColumnResize(){var d,s,f,_,S,T,F,M,P,H=0;S=$headers.children(),S.find(".slick-resizable-handle").remove(),S.each(function(J,K){J>=columns.length||columns[J].resizable&&(M===void 0&&(M=J),P=J)}),M!==void 0&&S.each(function(J,K){J>=columns.length||J<M||options.forceFitColumns&&J>=P||($(K),$("<div class='slick-resizable-handle' />").data("__doc__",__doc__).appendTo(K).on("dragstart",function(oe,se){if(!getEditorLock().commitCurrentEdit())return!1;_=oe.pageX,H=0,$(this).parent().addClass("slick-header-column-active");var ae=null,ge=null;if(S.each(function(pe,be){pe>=columns.length||(columns[pe].previousWidth=$(be).outerWidth())}),options.forceFitColumns)for(ae=0,ge=0,d=J+1;d<columns.length;d++)f=columns[d],f.resizable&&(ge!==null&&(f.maxWidth?ge+=f.maxWidth-f.previousWidth:ge=null),ae+=f.previousWidth-Math.max(f.minWidth||0,absoluteColumnMinWidth));var he=0,Be=0;for(d=0;d<=J;d++)f=columns[d],f.resizable&&(Be!==null&&(f.maxWidth?Be+=f.maxWidth-f.previousWidth:Be=null),he+=f.previousWidth-Math.max(f.minWidth||0,absoluteColumnMinWidth));ae===null&&(ae=1e5),he===null&&(he=1e5),ge===null&&(ge=1e5),Be===null&&(Be=1e5),F=_+Math.min(ae,Be),T=_-Math.min(he,ge)}).on("drag",function(oe,se){columnResizeDragging=!0;var ae,ge=Math.min(F,Math.max(T,oe.pageX))-_,he,Be=0,pe=0,be=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;if(ge<0){for(he=ge,d=J;d>=0;d--)f=columns[d],f.resizable&&(ae=Math.max(f.minWidth||0,absoluteColumnMinWidth),he&&f.previousWidth+he<ae?(he+=f.previousWidth-ae,f.width=ae):(f.width=f.previousWidth+he,he=0));for(s=0;s<=J;s++)f=columns[s],hasFrozenColumns()&&s>options.frozenColumn?pe+=f.width:Be+=f.width;if(options.forceFitColumns)for(he=-ge,d=J+1;d<columns.length;d++)f=columns[d],f.resizable&&(he&&f.maxWidth&&f.maxWidth-f.previousWidth<he?(he-=f.maxWidth-f.previousWidth,f.width=f.maxWidth):(f.width=f.previousWidth+he,he=0),hasFrozenColumns()&&d>options.frozenColumn?pe+=f.width:Be+=f.width);else for(d=J+1;d<columns.length;d++)f=columns[d],hasFrozenColumns()&&d>options.frozenColumn?pe+=f.width:Be+=f.width;if(options.forceFitColumns)for(he=-ge,d=J+1;d<columns.length;d++)f=columns[d],f.resizable&&(he&&f.maxWidth&&f.maxWidth-f.previousWidth<he?(he-=f.maxWidth-f.previousWidth,f.width=f.maxWidth):(f.width=f.previousWidth+he,he=0))}else{for(he=ge,Be=0,pe=0,d=J;d>=0;d--)if(f=columns[d],f.resizable)if(he&&f.maxWidth&&f.maxWidth-f.previousWidth<he)he-=f.maxWidth-f.previousWidth,f.width=f.maxWidth;else{var Re=f.previousWidth+he,Fe=canvasWidthL+he;hasFrozenColumns()&&d<=options.frozenColumn?(Re>H&&Fe<be-options.frozenRightViewportMinWidth&&(H=Re),f.width=Fe+options.frozenRightViewportMinWidth>be?H:Re):f.width=Re,he=0}for(s=0;s<=J;s++)f=columns[s],hasFrozenColumns()&&s>options.frozenColumn?pe+=f.width:Be+=f.width;if(options.forceFitColumns)for(he=-ge,d=J+1;d<columns.length;d++)f=columns[d],f.resizable&&(ae=Math.max(f.minWidth||0,absoluteColumnMinWidth),he&&f.previousWidth+he<ae?(he+=f.previousWidth-ae,f.width=ae):(f.width=f.previousWidth+he,he=0),hasFrozenColumns()&&d>options.frozenColumn?pe+=f.width:Be+=f.width);else for(d=J+1;d<columns.length;d++)f=columns[d],hasFrozenColumns()&&d>options.frozenColumn?pe+=f.width:Be+=f.width}hasFrozenColumns()&&Be!=canvasWidthL&&($headerL.width(Be+1e3),$paneHeaderR.css("left",Be)),applyColumnHeaderWidths(),applyColumnGroupHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths(),trigger(self.onColumnsDrag,{triggeredByColumn:$(this).parent().attr("id").replace(uid,""),resizeHandle:$(this)})}).on("dragend",function(oe,se){$(this).parent().removeClass("slick-header-column-active");var ae=$(this).parent().attr("id").replace(uid,"");trigger(self.onBeforeColumnsResize,{triggeredByColumn:ae})===!0&&(applyColumnHeaderWidths(),applyColumnGroupHeaderWidths());var ge;for(d=0;d<columns.length;d++)f=columns[d],ge=$(S[d]).outerWidth(),f.previousWidth!==ge&&f.rerenderOnResize&&invalidateAllRows();updateCanvasWidth(!0),render(),trigger(self.onColumnsResized,{triggeredByColumn:ae}),setTimeout(function(){columnResizeDragging=!1},300)}).on("dblclick",function(){var oe=$(this).parent().attr("id").replace(uid,"");trigger(self.onColumnsResizeDblClick,{triggeredByColumn:oe})}))})}function getVBoxDelta(d){var s=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],f=0;return d&&typeof d.css=="function"&&$.each(s,function(_,S){f+=parseFloat(d.css(S))||0}),f}function setFrozenOptions(){options.frozenColumn=options.frozenColumn>=0&&options.frozenColumn<columns.length?parseInt(options.frozenColumn):-1,options.frozenRow>-1?(hasFrozenRows=!0,frozenRowsHeight=options.frozenRow*options.rowHeight,getDataLength(),actualFrozenRow=options.frozenBottom?dataLength-options.frozenRow:options.frozenRow):hasFrozenRows=!1}function setPaneVisibility(){hasFrozenColumns()?($paneHeaderR.show(),$paneTopR.show(),hasFrozenRows?($paneBottomL.show(),$paneBottomR.show()):($paneBottomR.hide(),$paneBottomL.hide())):($paneHeaderR.hide(),$paneTopR.hide(),$paneBottomR.hide(),hasFrozenRows?$paneBottomL.show():($paneBottomR.hide(),$paneBottomL.hide()))}function setOverflow(){$viewportTopL.css({"overflow-x":hasFrozenColumns()?hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"hidden":"scroll":hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"hidden":"auto","overflow-y":!hasFrozenColumns()&&options.alwaysShowVerticalScroll?"scroll":hasFrozenColumns()?"hidden":hasFrozenRows?"scroll":"auto"}),$viewportTopR.css({"overflow-x":hasFrozenColumns()?hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"hidden":"scroll":hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"hidden":"auto","overflow-y":options.alwaysShowVerticalScroll?"scroll":(hasFrozenColumns(),hasFrozenRows?"scroll":"auto")}),$viewportBottomL.css({"overflow-x":hasFrozenColumns()?hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"scroll":"auto":(hasFrozenRows&&!options.alwaysAllowHorizontalScroll,"auto"),"overflow-y":!hasFrozenColumns()&&options.alwaysShowVerticalScroll?"scroll":hasFrozenColumns()?"hidden":hasFrozenRows?"scroll":"auto"}),$viewportBottomR.css({"overflow-x":hasFrozenColumns()?hasFrozenRows&&!options.alwaysAllowHorizontalScroll?"scroll":"auto":(hasFrozenRows&&!options.alwaysAllowHorizontalScroll,"auto"),"overflow-y":options.alwaysShowVerticalScroll?"scroll":(hasFrozenColumns(),"auto")}),options.viewportClass&&($viewportTopL.toggleClass(options.viewportClass,!0),$viewportTopR.toggleClass(options.viewportClass,!0),$viewportBottomL.toggleClass(options.viewportClass,!0),$viewportBottomR.toggleClass(options.viewportClass,!0))}function setScroller(){hasFrozenColumns()?($headerScrollContainer=$headerScrollerR,$headerRowScrollContainer=$headerRowScrollerR,$footerRowScrollContainer=$footerRowScrollerR,hasFrozenRows?options.frozenBottom?($viewportScrollContainerX=$viewportBottomR,$viewportScrollContainerY=$viewportTopR):$viewportScrollContainerX=$viewportScrollContainerY=$viewportBottomR:$viewportScrollContainerX=$viewportScrollContainerY=$viewportTopR):($headerScrollContainer=$headerScrollerL,$headerRowScrollContainer=$headerRowScrollerL,$footerRowScrollContainer=$footerRowScrollerL,hasFrozenRows?options.frozenBottom?($viewportScrollContainerX=$viewportBottomL,$viewportScrollContainerY=$viewportTopL):$viewportScrollContainerX=$viewportScrollContainerY=$viewportBottomL:$viewportScrollContainerX=$viewportScrollContainerY=$viewportTopL)}function measureCellPaddingAndBorder(){var d,s=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],_=$.fn.jquery.split(".");jQueryNewWidthBehaviour=_[0]==1&&_[1]>=8||_[0]>=2,d=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,d.css("box-sizing")!="border-box"&&d.css("-moz-box-sizing")!="border-box"&&d.css("-webkit-box-sizing")!="border-box"&&($.each(s,function(T,F){headerColumnWidthDiff+=parseFloat(d.css(F))||0}),$.each(f,function(T,F){headerColumnHeightDiff+=parseFloat(d.css(F))||0})),d.remove();var S=$("<div class='slick-row' />").appendTo($canvas);d=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(S),cellWidthDiff=cellHeightDiff=0,d.css("box-sizing")!="border-box"&&d.css("-moz-box-sizing")!="border-box"&&d.css("-webkit-box-sizing")!="border-box"&&($.each(s,function(T,F){cellWidthDiff+=parseFloat(d.css(F))||0}),$.each(f,function(T,F){cellHeightDiff+=parseFloat(d.css(F))||0})),S.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet'/>").appendTo(__doc__.head);for(var d=options.rowHeight-cellHeightDiff,s=["."+uid+" .slick-group-header-column { left: 1000px; }","."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-preheader-panel { height:"+options.preHeaderPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-footerrow-columns { height:"+options.footerRowHeight+"px; }","."+uid+" .slick-cell { height:"+d+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"],f=0;f<columns.length;f++)s.push("."+uid+" .l"+f+" { }"),s.push("."+uid+" .r"+f+" { }");$style[0].styleSheet?$style[0].styleSheet.cssText=s.join(" "):$style[0].appendChild(__doc__.createTextNode(s.join(" ")))}function getColumnCssRules(d){var s;if(!stylesheet){var f=__doc__.styleSheets;for(let M=0;M<f.length;M++){if((f[M].ownerNode||f[M].owningElement)==$style[0]){stylesheet=f[M];break}if(f[M].cssRules[0]&&f[M].cssRules[0].selectorText&&f[M].cssRules[0].selectorText.includes(uid)){stylesheet=f[M];break}}if(!stylesheet)throw new Error("SlickGrid Cannot find stylesheet.");columnCssRulesL=[],columnCssRulesR=[];var _=stylesheet.cssRules||stylesheet.rules,S,T;for(s=0;s<_.length;s++){var F=_[s].selectorText;(S=/\.l\d+/.exec(F))?(T=parseInt(S[0].substr(2,S[0].length-2),10),columnCssRulesL[T]=_[s]):(S=/\.r\d+/.exec(F))&&(T=parseInt(S[0].substr(2,S[0].length-2),10),columnCssRulesR[T]=_[s])}}return{left:columnCssRulesL[d],right:columnCssRulesR[d]}}function removeCssRules(){$style.remove(),stylesheet=null}function destroy(d){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{});for(var s=plugins.length;s--;)unregisterPlugin(plugins[s]);options.enableColumnReorder&&$headers.filter(":ui-sortable").sortable("destroy"),unbindAncestorScrollEvents(),$container.off(".slickgrid"),removeCssRules(),$canvas.off(),$viewport.off(),$headerScroller.off(),$headerRowScroller.off(),$footerRow&&$footerRow.off(),$footerRowScroller&&$footerRowScroller.off(),$preHeaderPanelScroller&&$preHeaderPanelScroller.off(),$focusSink.off(),$(".slick-resizable-handle").off(),$(".slick-header-column").off(),$container.empty().removeClass(uid),d&&destroyAllElements()}function destroyAllElements(){$activeCanvasNode=null,$activeViewportNode=null,$boundAncestors=null,$canvas=null,$canvasTopL=null,$canvasTopR=null,$canvasBottomL=null,$canvasBottomR=null,$container=null,$focusSink=null,$focusSink2=null,$groupHeadersL=null,$groupHeadersR=null,$headerL=null,$headerR=null,$headers=null,$headerRow=null,$headerRowL=null,$headerRowR=null,$headerRowSpacerL=null,$headerRowSpacerR=null,$headerRowScrollContainer=null,$headerRowScroller=null,$headerRowScrollerL=null,$headerRowScrollerR=null,$headerScrollContainer=null,$headerScroller=null,$headerScrollerL=null,$headerScrollerR=null,$hiddenParents=null,$footerRow=null,$footerRowL=null,$footerRowR=null,$footerRowSpacerL=null,$footerRowSpacerR=null,$footerRowScroller=null,$footerRowScrollerL=null,$footerRowScrollerR=null,$footerRowScrollContainer=null,$preHeaderPanel=null,$preHeaderPanelR=null,$preHeaderPanelScroller=null,$preHeaderPanelScrollerR=null,$preHeaderPanelSpacer=null,$topPanel=null,$topPanelScroller=null,$style=null,$topPanelScrollerL=null,$topPanelScrollerR=null,$topPanelL=null,$topPanelR=null,$paneHeaderL=null,$paneHeaderR=null,$paneTopL=null,$paneTopR=null,$paneBottomL=null,$paneBottomR=null,$viewport=null,$viewportTopL=null,$viewportTopR=null,$viewportBottomL=null,$viewportBottomR=null,$viewportScrollContainerX=null,$viewportScrollContainerY=null}var canvas=null,canvas_context=null;function autosizeColumn(d,s){var f=d;if(typeof d=="number")f=columns[d];else if(typeof d=="string")for(var _=0;_<columns.length;_++)columns[_].Id===d&&(f=columns[_]);var S=$(getCanvasNode(0,0));getColAutosizeWidth(f,S,s)}function autosizeColumns(d,s){if(d=d||options.autosizeColsMode,d===Slick.GridAutosizeColsMode.LegacyForceFit||d===Slick.GridAutosizeColsMode.LegacyOff){legacyAutosizeColumns();return}if(d!==Slick.GridAutosizeColsMode.None){canvas=__doc__.createElement("canvas"),canvas&&canvas.getContext&&(canvas_context=canvas.getContext("2d"));var f=$(getCanvasNode(0,0)),_=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,S,T,F,M,P=0,H=0,J=0,K=0,oe=0;for(S=0;S<columns.length;S++)T=columns[S],getColAutosizeWidth(T,f,s),oe+=T.autoSize.autosizeMode===Slick.ColAutosizeMode.Locked?T.width:0,K+=T.autoSize.autosizeMode===Slick.ColAutosizeMode.Locked?T.width:T.minWidth,P+=T.autoSize.widthPx,H+=T.autoSize.sizeToRemaining?0:T.autoSize.widthPx,J+=T.autoSize.sizeToRemaining&&T.minWidth||0;var se=P-H;if(d===Slick.GridAutosizeColsMode.FitViewportToCols){var ae=P+scrollbarDimensions.width;d=Slick.GridAutosizeColsMode.IgnoreViewport,options.viewportMaxWidthPx&&ae>options.viewportMaxWidthPx?(ae=options.viewportMaxWidthPx,d=Slick.GridAutosizeColsMode.FitColsToViewport):options.viewportMinWidthPx&&ae<options.viewportMinWidthPx&&(ae=options.viewportMinWidthPx,d=Slick.GridAutosizeColsMode.FitColsToViewport),$container.width(ae)}if(d===Slick.GridAutosizeColsMode.FitColsToViewport)if(se>0&&H<_-J)for(S=0;S<columns.length;S++){T=columns[S];var ge=_-H;T.autoSize.sizeToRemaining?F=ge*T.autoSize.widthPx/se:F=T.autoSize.widthPx,T.rerenderOnResize&&T.width!=F&&(M=!0),T.width=F}else if(options.viewportSwitchToScrollModeWidthPercent&&H+J>_*options.viewportSwitchToScrollModeWidthPercent/100||K>_)d=Slick.GridAutosizeColsMode.IgnoreViewport;else{var he=H-oe,Be=_-oe-J;for(S=0;S<columns.length;S++)T=columns[S],F=T.width,T.autoSize.autosizeMode!==Slick.ColAutosizeMode.Locked&&(T.autoSize.sizeToRemaining?F=T.minWidth:(F=Be/he*T.autoSize.widthPx,F<T.minWidth&&(F=T.minWidth),he-=T.autoSize.widthPx,Be-=F)),T.rerenderOnResize&&T.width!=F&&(M=!0),T.width=F}if(d===Slick.GridAutosizeColsMode.IgnoreViewport)for(S=0;S<columns.length;S++)F=columns[S].autoSize.widthPx,columns[S].rerenderOnResize&&columns[S].width!=F&&(M=!0),columns[S].width=F;reRenderColumns(M)}}function getColAutosizeWidth(d,s,f){var _=d.autoSize;if(_.widthPx=d.width,!(_.autosizeMode===Slick.ColAutosizeMode.Locked||_.autosizeMode===Slick.ColAutosizeMode.Guide)){var S=getDataLength();if(_.autosizeMode===Slick.ColAutosizeMode.ContentIntelligent){var T=_.colDataTypeOf,F;if(S>0){var M=getDataItem(0);M&&(F=M[d.field],T=typeof F,T==="object"&&(F instanceof Date&&(T="date"),typeof moment<"u"&&F instanceof moment&&(T="moment")))}T==="boolean"&&(_.colValueArray=[!0,!1]),T==="number"&&(_.valueFilterMode=Slick.ValueFilterMode.GetGreatestAndSub,_.rowSelectionMode=Slick.RowSelectionMode.AllRows),T==="string"&&(_.valueFilterMode=Slick.ValueFilterMode.GetLongestText,_.rowSelectionMode=Slick.RowSelectionMode.AllRows,_.allowAddlPercent=5),T==="date"&&(_.colValueArray=[new Date(2009,8,30,12,20,20)]),T==="moment"&&typeof moment<"u"&&(_.colValueArray=[moment([2009,8,30,12,20,20])])}var P=getColContentSize(d,s,f),H=_.allowAddlPercent?1+_.allowAddlPercent/100:1;P=P*H+options.autosizeColPaddingPx,d.minWidth&&P<d.minWidth&&(P=d.minWidth),d.maxWidth&&P>d.maxWidth&&(P=d.maxWidth),_.widthPx=P}}function getColContentSize(d,s,f){var _=d.autoSize,S=1,T,F,M=0,P=0;if(_.ignoreHeaderText||(P=getColHeaderWidth(d)),_.colValueArray)return M=getColWidth(d,s,_.colValueArray),Math.max(P,M);var H=getData();H.getItems&&(H=H.getItems());var J=(f?_.rowSelectionModeOnInit:void 0)||_.rowSelectionMode;if(J===Slick.RowSelectionMode.FirstRow&&(H=H.slice(0,1)),J===Slick.RowSelectionMode.LastRow&&(H=H.slice(H.length-1,H.length)),J===Slick.RowSelectionMode.FirstNRows&&(H=H.slice(0,_.rowSelectionCount)),_.valueFilterMode===Slick.ValueFilterMode.DeDuplicate){var K={};for(T=0,F=H.length;T<F;T++)K[H[T][d.field]]=!0;if(Object.keys)H=Object.keys(K);else{H=[];for(var T in K)H.push(T)}}if(_.valueFilterMode===Slick.ValueFilterMode.GetGreatestAndSub){var oe,se,ae=0;for(T=0,F=H.length;T<F;T++)oe=H[T][d.field],Math.abs(oe)>ae&&(se=oe,ae=Math.abs(oe));se=""+se,se=Array(se.length+1).join("9"),se=+se,H=[se]}if(_.valueFilterMode===Slick.ValueFilterMode.GetLongestTextAndSub){var oe,ge=0;for(T=0,F=H.length;T<F;T++)oe=H[T][d.field],(oe||"").length>ge&&(ge=oe.length);oe=Array(ge+1).join("m"),S=options.autosizeTextAvgToMWidthRatio,H=[oe]}if(_.valueFilterMode===Slick.ValueFilterMode.GetLongestText){var oe,ge=0,he=0;for(T=0,F=H.length;T<F;T++)oe=H[T][d.field],(oe||"").length>ge&&(ge=oe.length,he=T);oe=H[he][d.field],H=[oe]}return M=getColWidth(d,s,H)*S,Math.max(P,M)}function getColWidth(d,s,f){var _=getColumnIndex(d.id),S=$('<div class="slick-row ui-widget-content"></div>'),T=$('<div class="slick-cell"></div>');T.css({position:"absolute",visibility:"hidden","text-overflow":"initial","white-space":"nowrap"}),S.append(T),s.append(S);var F,M=0,P,H,J,K;return canvas_context&&d.autoSize.widthEvalMode===Slick.WidthEvalMode.CanvasTextSize?(canvas_context.font=T.css("font-size")+" "+T.css("font-family"),$(f).each(function(oe,se){K=Array.isArray(se)?se[d.field]:se,P=""+K,F=P?canvas_context.measureText(P).width:0,F>M&&(M=F,H=P)}),T.html(H),F=T.outerWidth(),S.remove(),T=null,F):($(f).each(function(oe,se){K=Array.isArray(se)?se[d.field]:se,d.formatterOverride?J=d.formatterOverride(oe,_,K,d,se,self):d.formatter?J=d.formatter(oe,_,K,d,se,self):J=""+K,applyFormatResultToCellNode(J,T[0]),F=T.outerWidth(),F>M&&(M=F)}),S.remove(),T=null,M)}function getColHeaderWidth(d){var s=0,f=getUID()+d.id,_=__doc__.getElementById(f),S=f+"_";if(_){var T=_.cloneNode(!0);T.id=S,T.style.cssText="position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;",_.parentNode.insertBefore(T,_),s=T.offsetWidth,T.parentNode.removeChild(T)}else{var F=getHeader(d);_=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+d.name+"</span>").attr("id",S).css({position:"absolute",visibility:"hidden",right:"auto","text-overflow:":"initial","white-space":"nowrap"}).addClass(d.headerCssClass||"").appendTo(F),s=_[0].offsetWidth,F[0].removeChild(_[0])}return s}function legacyAutosizeColumns(){var d,s,f=[],_=0,S=0,T,F=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(d=0;d<columns.length;d++)s=columns[d],f.push(s.width),S+=s.width,s.resizable&&(_+=s.width-Math.max(s.minWidth,absoluteColumnMinWidth));for(T=S;S>F&&_;){var M=(S-F)/_;for(d=0;d<columns.length&&S>F;d++){s=columns[d];var P=f[d];if(!(!s.resizable||P<=s.minWidth||P<=absoluteColumnMinWidth)){var H=Math.max(s.minWidth,absoluteColumnMinWidth),J=Math.floor(M*(P-H))||1;J=Math.min(J,P-H),S-=J,_-=J,f[d]-=J}}if(T<=S)break;T=S}for(T=S;S<F;){var K=F/S;for(d=0;d<columns.length&&S<F;d++){s=columns[d];var oe=f[d],se;!s.resizable||s.maxWidth<=oe?se=0:se=Math.min(Math.floor(K*oe)-oe,s.maxWidth-oe||1e6)||1,S+=se,f[d]+=S<=F?se:0}if(T>=S)break;T=S}var ae=!1;for(d=0;d<columns.length;d++)columns[d].rerenderOnResize&&columns[d].width!=f[d]&&(ae=!0),columns[d].width=f[d];reRenderColumns(ae)}function reRenderColumns(d){applyColumnHeaderWidths(),applyColumnGroupHeaderWidths(),updateCanvasWidth(!0),trigger(self.onAutosizeColumns,{columns}),d&&(invalidateAllRows(),render())}function trigger(d,s,f){return f=f||new Slick.EventData,s=s||{},s.grid=self,d.notify(s,f,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(d){return columnsById[d]}function applyColumnGroupHeaderWidths(){if(treeColumns.hasDepth())for(var d=$groupHeadersL.length-1;d>=0;d--)treeColumns.getColumnsInDepth(d),$().add($groupHeadersL[d]).add($groupHeadersR[d]).each(function(s){var f=$(this),_=0;f.width(s===0?getHeadersWidthL():getHeadersWidthR()),f.children().each(function(){var S=$(this),T=$(this).data("column");T.width=0,T.columns.forEach(function(){var F=f.next().children(":eq("+_+++")");T.width+=F.outerWidth()}),S.width(T.width-headerColumnWidthDiff)})})}function applyColumnHeaderWidths(){if(initialized){for(var d,s=0,f=$headers.children(),_=columns.length;s<_;s++)d=$(f[s]),jQueryNewWidthBehaviour?d.outerWidth()!==columns[s].width&&d.outerWidth(columns[s].width):d.width()!==columns[s].width-headerColumnWidthDiff&&d.width(columns[s].width-headerColumnWidthDiff);updateColumnCaches()}}function applyColumnWidths(){for(var d=0,s,f,_=0;_<columns.length;_++)s=columns[_].width,f=getColumnCssRules(_),f.left.style.left=d+"px",f.right.style.right=(options.frozenColumn!=-1&&_>options.frozenColumn?canvasWidthR:canvasWidthL)-d-s+"px",options.frozenColumn==_?d=0:d+=columns[_].width}function setSortColumn(d,s){setSortColumns([{columnId:d,sortAsc:s}])}function setSortColumns(d){sortColumns=d;var s=options.numberedMultiColumnSort&&sortColumns.length>1,f=$headers.children();f.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),f.find(".slick-sort-indicator-numbered").text(""),$.each(sortColumns,function(_,S){S.sortAsc==null&&(S.sortAsc=!0);var T=getColumnIndex(S.columnId);T!=null&&(f.eq(T).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(S.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc"),s&&f.eq(T).find(".slick-sort-indicator-numbered").text(_+1))})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(d,s){var f=selectedRows.slice(0);selectedRows=[];for(var _={},S=0;S<s.length;S++)for(var T=s[S].fromRow;T<=s[S].toRow;T++){_[T]||(selectedRows.push(T),_[T]={});for(var F=s[S].fromCell;F<=s[S].toCell;F++)canCellBeSelected(T,F)&&(_[T][columns[F].id]=options.selectedCellCssClass)}setCellCssStyles(options.selectedCellCssClass,_),simpleArrayEquals(f,selectedRows)&&trigger(self.onSelectedRowsChanged,{rows:getSelectedRows(),previousSelectedRows:f},d)}function simpleArrayEquals(d,s){return Array.isArray(d)&&Array.isArray(s)&&s.sort().toString()!==d.sort().toString()}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[],columnPosRight=[];for(var d=0,s=0,f=columns.length;s<f;s++)columnPosLeft[s]=d,columnPosRight[s]=d+columns[s].width,options.frozenColumn==s?d=0:d+=columns[s].width}function updateColumnProps(){columnsById={};for(var d=0;d<columns.length;d++){columns[d].width&&(columns[d].widthRequest=columns[d].width);var s=columns[d]=$.extend({},columnDefaults,columns[d]);s.autoSize=$.extend({},columnAutosizeDefaults,s.autoSize),columnsById[s.id]=d,s.minWidth&&s.width<s.minWidth&&(s.width=s.minWidth),s.maxWidth&&s.width>s.maxWidth&&(s.width=s.maxWidth),s.resizable}}function setColumns(d){var s=new Slick.TreeColumns(d);s.hasDepth()?(treeColumns=s,columns=treeColumns.extractColumns()):columns=d,updateColumnProps(),updateColumnCaches(),initialized&&(setPaneVisibility(),setOverflow(),invalidateAllRows(),createColumnHeaders(),createColumnGroupHeaders(),createColumnFooter(),removeCssRules(),createCssRules(),resizeCanvas(),updateCanvasWidth(),applyColumnHeaderWidths(),applyColumnWidths(),handleScroll())}function getOptions(){return options}function setOptions(d,s,f,_){if(getEditorLock().commitCurrentEdit()){makeActiveCellNormal(),d.showColumnHeader!==void 0&&setColumnHeaderVisibility(d.showColumnHeader),options.enableAddRow!==d.enableAddRow&&invalidateRow(getDataLength());var S=$.extend(!0,{},options);if(options=$.extend(options,d),trigger(self.onSetOptions,{optionsBefore:S,optionsAfter:options}),validateAndEnforceOptions(),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),s||render(),setFrozenOptions(),setScroller(),_||setOverflow(),zombieRowNodeFromLastMouseWheelEvent=null,f||setColumns(treeColumns.extractColumns()),options.enableMouseWheelScrollHandler&&$viewport&&jQuery.fn.mousewheel){var T=$._data($viewport[0],"events");(!T||!T.mousewheel)&&$viewport.on("mousewheel",handleMouseWheel)}else options.enableMouseWheelScrollHandler===!1&&$viewport.off("mousewheel")}}function validateAndEnforceOptions(){options.autoHeight&&(options.leaveSpaceForNewRows=!1),options.forceFitColumns&&(options.autosizeColsMode=Slick.GridAutosizeColsMode.LegacyForceFit,console.log("forceFitColumns option is deprecated - use autosizeColsMode"))}function setData(d,s){data=d,invalidateAllRows(),updateRowCount(),s&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data&&data.length||0}function getDataLengthIncludingAddNew(){return getDataLength()+(options.enableAddRow&&(!pagingActive||pagingIsLastPage)?1:0)}function getDataItem(d){return data.getItem?data.getItem(d):data[d]}function getTopPanel(){return $topPanel[0]}function setTopPanelVisibility(d,s){var f=s!==!1;options.showTopPanel!=d&&(options.showTopPanel=d,d?f?$topPanelScroller.slideDown("fast",resizeCanvas):($topPanelScroller.show(),resizeCanvas()):f?$topPanelScroller.slideUp("fast",resizeCanvas):($topPanelScroller.hide(),resizeCanvas()))}function setHeaderRowVisibility(d,s){var f=s!==!1;options.showHeaderRow!=d&&(options.showHeaderRow=d,d?f?$headerRowScroller.slideDown("fast",resizeCanvas):($headerRowScroller.show(),resizeCanvas()):f?$headerRowScroller.slideUp("fast",resizeCanvas):($headerRowScroller.hide(),resizeCanvas()))}function setColumnHeaderVisibility(d,s){options.showColumnHeader!=d&&(options.showColumnHeader=d,d?s?$headerScroller.slideDown("fast",resizeCanvas):($headerScroller.show(),resizeCanvas()):s?$headerScroller.slideUp("fast",resizeCanvas):($headerScroller.hide(),resizeCanvas()))}function setFooterRowVisibility(d,s){var f=s!==!1;options.showFooterRow!=d&&(options.showFooterRow=d,d?f?$footerRowScroller.slideDown("fast",resizeCanvas):($footerRowScroller.show(),resizeCanvas()):f?$footerRowScroller.slideUp("fast",resizeCanvas):($footerRowScroller.hide(),resizeCanvas()))}function setPreHeaderPanelVisibility(d,s){var f=s!==!1;options.showPreHeaderPanel!=d&&(options.showPreHeaderPanel=d,d?f?($preHeaderPanelScroller.slideDown("fast",resizeCanvas),$preHeaderPanelScrollerR.slideDown("fast",resizeCanvas)):($preHeaderPanelScroller.show(),$preHeaderPanelScrollerR.show(),resizeCanvas()):f?($preHeaderPanelScroller.slideUp("fast",resizeCanvas),$preHeaderPanelScrollerR.slideUp("fast",resizeCanvas)):($preHeaderPanelScroller.hide(),$preHeaderPanelScrollerR.hide(),resizeCanvas()))}function getContainerNode(){return $container.get(0)}function getRowTop(d){return options.rowHeight*d-offset}function getRowFromPosition(d){return Math.floor((d+offset)/options.rowHeight)}function scrollTo(d){d=Math.max(d,0),d=Math.min(d,th-$viewportScrollContainerY.height()+(viewportHasHScroll||hasFrozenColumns()?scrollbarDimensions.height:0));var s=offset;page=Math.min(n-1,Math.floor(d/ph)),offset=Math.round(page*cj);var f=d-offset;if(offset!=s){var _=getVisibleRange(f);cleanupRows(_),updateRowPositions()}prevScrollTop!=f&&(vScrollDir=prevScrollTop+s<f+offset?1:-1,lastRenderedScrollTop=scrollTop=prevScrollTop=f,hasFrozenColumns()&&($viewportTopL[0].scrollTop=f),hasFrozenRows&&($viewportBottomL[0].scrollTop=$viewportBottomR[0].scrollTop=f),$viewportScrollContainerY[0].scrollTop=f,trigger(self.onViewportChanged,{}))}function defaultFormatter(d,s,f,_,S,T){return f==null?"":(f+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getFormatter(d,s){var f=data.getItemMetadata&&data.getItemMetadata(d),_=f&&f.columns&&(f.columns[s.id]||f.columns[getColumnIndex(s.id)]);return _&&_.formatter||f&&f.formatter||s.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(s)||options.defaultFormatter}function getEditor(d,s){var f=columns[s],_=data.getItemMetadata&&data.getItemMetadata(d),S=_&&_.columns;return S&&S[f.id]&&S[f.id].editor!==void 0?S[f.id].editor:S&&S[s]&&S[s].editor!==void 0?S[s].editor:f.editor||options.editorFactory&&options.editorFactory.getEditor(f)}function getDataItemValueForColumn(d,s){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(d,s):d[s.field]}function appendRowHtml(d,s,f,_,S){var T=getDataItem(f),F=f<S&&!T,M="slick-row"+(hasFrozenRows&&f<=options.frozenRow?" frozen":"")+(F?" loading":"")+(f===activeRow&&options.showCellSelection?" active":"")+(f%2==1?" odd":" even");T||(M+=" "+options.addNewRowCssClass);var P=data.getItemMetadata&&data.getItemMetadata(f);P&&P.cssClasses&&(M+=" "+P.cssClasses);var H=getFrozenRowOffset(f),J="<div class='ui-widget-content "+M+"' style='top:"+(getRowTop(f)-H)+"px'>";d.push(J),hasFrozenColumns()&&s.push(J);for(var K,oe,se=0,ae=columns.length;se<ae;se++){if(oe=columns[se],K=1,P&&P.columns){var ge=P.columns[oe.id]||P.columns[se];K=ge&&ge.colspan||1,K==="*"&&(K=ae-se)}if(columnPosRight[Math.min(ae-1,se+K-1)]>_.leftPx){if(!oe.alwaysRenderColumn&&columnPosLeft[se]>_.rightPx)break;hasFrozenColumns()&&se>options.frozenColumn?appendCellHtml(s,f,se,K,T):appendCellHtml(d,f,se,K,T)}else(oe.alwaysRenderColumn||hasFrozenColumns()&&se<=options.frozenColumn)&&appendCellHtml(d,f,se,K,T);K>1&&(se+=K-1)}d.push("</div>"),hasFrozenColumns()&&s.push("</div>")}function appendCellHtml(d,s,f,_,S){var T=columns[f],F="slick-cell l"+f+" r"+Math.min(columns.length-1,f+_-1)+(T.cssClass?" "+T.cssClass:"");hasFrozenColumns()&&f<=options.frozenColumn&&(F+=" frozen"),s===activeRow&&f===activeCell&&options.showCellSelection&&(F+=" active");for(var M in cellCssClasses)cellCssClasses[M][s]&&cellCssClasses[M][s][T.id]&&(F+=" "+cellCssClasses[M][s][T.id]);var P=null,H="";S&&(P=getDataItemValueForColumn(S,T),H=getFormatter(s,T)(s,f,P,T,S,self),H==null&&(H=""));var J=trigger(self.onBeforeAppendCell,{row:s,cell:f,value:P,dataContext:S})||"";J+=H&&H.addClasses?(J?" ":"")+H.addClasses:"";var K=H&&H.toolTip?"title='"+H.toolTip+"'":"",oe="";if(T.hasOwnProperty("cellAttrs")&&T.cellAttrs instanceof Object)for(var M in T.cellAttrs)T.cellAttrs.hasOwnProperty(M)&&(oe+=" "+M+'="'+T.cellAttrs[M]+'" ');d.push("<div class='"+F+(J?" "+J:"")+"' "+K+oe+">"),S&&d.push(Object.prototype.toString.call(H)!=="[object Object]"?H:H.text),d.push("</div>"),rowsCache[s].cellRenderQueue.push(f),rowsCache[s].cellColSpans[f]=_}function cleanupRows(d){for(var s in rowsCache){var f=!0;hasFrozenRows&&(options.frozenBottom&&s>=actualFrozenRow||!options.frozenBottom&&s<=actualFrozenRow)&&(f=!1),(s=parseInt(s,10))!==activeRow&&(s<d.top||s>d.bottom)&&f&&removeRowFromCache(s)}options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){currentEditor&&makeActiveCellNormal();for(var d in rowsCache)removeRowFromCache(d);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}function removeRowFromCache(d){var s=rowsCache[d];s&&(rowNodeFromLastMouseWheelEvent==s.rowNode[0]||hasFrozenColumns()&&rowNodeFromLastMouseWheelEvent==s.rowNode[1]?(s.rowNode.hide(),zombieRowNodeFromLastMouseWheelEvent=s.rowNode):s.rowNode.each(function(){this.parentElement.removeChild(this)}),delete rowsCache[d],delete postProcessedRows[d],renderedRows--,counter_rows_removed++)}function invalidateRows(d){var s,f;if(!(!d||!d.length)){for(vScrollDir=0,f=d.length,s=0;s<f;s++)currentEditor&&activeRow===d[s]&&makeActiveCellNormal(),rowsCache[d[s]]&&removeRowFromCache(d[s]);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}}function invalidateRow(d){!d&&d!==0||invalidateRows([d])}function applyFormatResultToCellNode(d,s,f){if(d==null&&(d=""),Object.prototype.toString.call(d)!=="[object Object]"){s.innerHTML=d;return}s.innerHTML=d.text,d.removeClasses&&!f&&$(s).removeClass(d.removeClasses),d.addClasses&&$(s).addClass(d.addClasses),d.toolTip&&$(s).attr("title",d.toolTip)}function updateCell(d,s){var f=getCellNode(d,s);if(f){var _=columns[s],S=getDataItem(d);if(currentEditor&&activeRow===d&&activeCell===s)currentEditor.loadValue(S);else{var T=S?getFormatter(d,_)(d,s,getDataItemValueForColumn(S,_),_,S,self):"";applyFormatResultToCellNode(T,f),invalidatePostProcessingResults(d)}}}function updateRow(d){var s=rowsCache[d];if(s){ensureCellNodesInRowsCache(d);var f,_=getDataItem(d);for(var S in s.cellNodesByColumnIdx)if(s.cellNodesByColumnIdx.hasOwnProperty(S)){S=S|0;var T=columns[S],F=s.cellNodesByColumnIdx[S][0];d===activeRow&&S===activeCell&&currentEditor?currentEditor.loadValue(_):_?(f=getFormatter(d,T)(d,S,getDataItemValueForColumn(_,T),T,_,self),applyFormatResultToCellNode(f,F)):F.innerHTML=""}invalidatePostProcessingResults(d)}}function getViewportHeight(){if((!options.autoHeight||options.frozenColumn!=-1)&&(topPanelH=options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0,headerRowH=options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0,footerRowH=options.showFooterRow?options.footerRowHeight+getVBoxDelta($footerRowScroller):0),options.autoHeight){var d=$paneHeaderL.outerHeight();d+=options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0,d+=options.showFooterRow?options.footerRowHeight+getVBoxDelta($footerRowScroller):0,d+=getCanvasWidth()>viewportW?scrollbarDimensions.height:0,viewportH=options.rowHeight*getDataLengthIncludingAddNew()+(options.frozenColumn==-1?d:0)}else{var s=options.showColumnHeader?parseFloat($.css($headerScroller[0],"height"))+getVBoxDelta($headerScroller):0,f=options.createPreHeaderPanel&&options.showPreHeaderPanel?options.preHeaderPanelHeight+getVBoxDelta($preHeaderPanelScroller):0;viewportH=parseFloat($.css($container[0],"height",!0))-parseFloat($.css($container[0],"paddingTop",!0))-parseFloat($.css($container[0],"paddingBottom",!0))-s-topPanelH-headerRowH-footerRowH-f}return numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportH}function getViewportWidth(){viewportW=parseFloat($container.width())}function resizeCanvas(){if(initialized){paneTopH=0,paneBottomH=0,viewportTopH=0,getViewportWidth(),getViewportHeight(),hasFrozenRows?options.frozenBottom?(paneTopH=viewportH-frozenRowsHeight-scrollbarDimensions.height,paneBottomH=frozenRowsHeight+scrollbarDimensions.height):(paneTopH=frozenRowsHeight,paneBottomH=viewportH-frozenRowsHeight):paneTopH=viewportH,paneTopH+=topPanelH+headerRowH+footerRowH,hasFrozenColumns()&&options.autoHeight&&(paneTopH+=scrollbarDimensions.height),viewportTopH=paneTopH-topPanelH-headerRowH-footerRowH,options.autoHeight&&(hasFrozenColumns()&&$container.height(paneTopH+parseFloat($.css($headerScrollerL[0],"height"))),$paneTopL.css("position","relative")),$paneTopL.css({top:$paneHeaderL.height()||(options.showHeaderRow?options.headerRowHeight:0)+(options.showPreHeaderPanel?options.preHeaderPanelHeight:0),height:paneTopH});var d=$paneTopL.position().top+paneTopH;options.autoHeight||$viewportTopL.height(viewportTopH),hasFrozenColumns()?($paneTopR.css({top:$paneHeaderL.height(),height:paneTopH}),$viewportTopR.height(viewportTopH),hasFrozenRows&&($paneBottomL.css({top:d,height:paneBottomH}),$paneBottomR.css({top:d,height:paneBottomH}),$viewportBottomR.height(paneBottomH))):hasFrozenRows&&($paneBottomL.css({width:"100%",height:paneBottomH}),$paneBottomL.css("top",d)),hasFrozenRows?($viewportBottomL.height(paneBottomH),options.frozenBottom?($canvasBottomL.height(frozenRowsHeight),hasFrozenColumns()&&$canvasBottomR.height(frozenRowsHeight)):($canvasTopL.height(frozenRowsHeight),hasFrozenColumns()&&$canvasTopR.height(frozenRowsHeight))):$viewportTopR.height(viewportTopH),(!scrollbarDimensions||!scrollbarDimensions.width)&&(scrollbarDimensions=measureScrollbar()),options.autosizeColsMode===Slick.GridAutosizeColsMode.LegacyForceFit&&autosizeColumns(),updateRowCount(),handleScroll(),lastRenderedScrollLeft=-1,render()}}function updatePagingStatusFromView(d){pagingActive=d.pageSize!==0,pagingIsLastPage=d.pageNum==d.totalPages-1}function updateRowCount(){if(initialized){var d=getDataLength(),s=getDataLengthIncludingAddNew(),f=0,M=hasFrozenRows&&!options.frozenBottom?$canvasBottomL.height():$canvasTopL.height();if(hasFrozenRows)var f=getDataLength()-options.frozenRow;else var f=s+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var _=$viewportScrollContainerY.height(),S=viewportHasVScroll;viewportHasVScroll=options.alwaysShowVerticalScroll||!options.autoHeight&&f*options.rowHeight>_,makeActiveCellNormal();var T=d-1;for(var F in rowsCache)F>T&&removeRowFromCache(F);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup(),activeCellNode&&activeRow>T&&resetActiveCell();var M=h;options.autoHeight?h=options.rowHeight*f:(th=Math.max(options.rowHeight*f,_-scrollbarDimensions.height),th<maxSupportedCssHeight?(h=ph=th,n=1,cj=0):(h=maxSupportedCssHeight,ph=h/100,n=Math.floor(th/ph),cj=(th-h)/(n-1))),h!==M&&(hasFrozenRows&&!options.frozenBottom?($canvasBottomL.css("height",h),hasFrozenColumns()&&$canvasBottomR.css("height",h)):($canvasTopL.css("height",h),$canvasTopR.css("height",h)),scrollTop=$viewportScrollContainerY[0].scrollTop);var P=scrollTop+offset<=th-_;th==0||scrollTop==0?page=offset=0:scrollTo(P?scrollTop+offset:th-_),h!=M&&options.autoHeight&&resizeCanvas(),options.autosizeColsMode===Slick.GridAutosizeColsMode.LegacyForceFit&&S!=viewportHasVScroll&&autosizeColumns(),updateCanvasWidth(!1)}}function getVisibleRange(d,s){return d==null&&(d=scrollTop),s==null&&(s=scrollLeft),{top:getRowFromPosition(d),bottom:getRowFromPosition(d+viewportH)+1,leftPx:s,rightPx:s+viewportW}}function getRenderedRange(d,s){var f=getVisibleRange(d,s),_=Math.round(viewportH/options.rowHeight),S=options.minRowBuffer;return vScrollDir==-1?(f.top-=_,f.bottom+=S):vScrollDir==1?(f.top-=S,f.bottom+=_):(f.top-=S,f.bottom+=S),f.top=Math.max(0,f.top),f.bottom=Math.min(getDataLengthIncludingAddNew()-1,f.bottom),f.leftPx-=viewportW,f.rightPx+=viewportW,f.leftPx=Math.max(0,f.leftPx),f.rightPx=Math.min(canvasWidth,f.rightPx),f}function ensureCellNodesInRowsCache(d){var s=rowsCache[d];if(s&&s.cellRenderQueue.length)for(var f=s.rowNode.children().last();s.cellRenderQueue.length;){var _=s.cellRenderQueue.pop();s.cellNodesByColumnIdx[_]=f,f=f.prev(),f.length===0&&(f=$(s.rowNode[0]).children().last())}}function cleanUpCells(d,s){if(!(hasFrozenRows&&(options.frozenBottom&&s>actualFrozenRow||s<=actualFrozenRow))){var f=rowsCache[s],_=[];for(var S in f.cellNodesByColumnIdx)if(f.cellNodesByColumnIdx.hasOwnProperty(S)&&(S=S|0,!(S<=options.frozenColumn)&&!(Array.isArray(columns)&&columns[S]&&columns[S].alwaysRenderColumn))){var T=f.cellColSpans[S];(columnPosLeft[S]>d.rightPx||columnPosRight[Math.min(columns.length-1,S+T-1)]<d.leftPx)&&(s==activeRow&&S==activeCell||_.push(S))}for(var F;(F=_.pop())!=null;)f.cellNodesByColumnIdx[F][0].parentElement.removeChild(f.cellNodesByColumnIdx[F][0]),delete f.cellColSpans[F],delete f.cellNodesByColumnIdx[F],postProcessedRows[s]&&delete postProcessedRows[s][F]}}function cleanUpAndRenderCells(d){for(var s,f=[],_=[],S,T,F=d.top,M=d.bottom;F<=M;F++)if(s=rowsCache[F],!!s){ensureCellNodesInRowsCache(F),cleanUpCells(d,F),S=0;var P=data.getItemMetadata&&data.getItemMetadata(F);P=P&&P.columns;for(var H=getDataItem(F),J=0,K=columns.length;J<K&&!(columnPosLeft[J]>d.rightPx);J++){if((T=s.cellColSpans[J])!=null){J+=T>1?T-1:0;continue}if(T=1,P){var oe=P[columns[J].id]||P[J];T=oe&&oe.colspan||1,T==="*"&&(T=K-J)}columnPosRight[Math.min(K-1,J+T-1)]>d.leftPx&&(appendCellHtml(f,F,J,T,H),S++),J+=T>1?T-1:0}S&&_.push(F)}if(f.length){var se=__doc__.createElement("div");se.innerHTML=f.join("");for(var ae,ge;(ae=_.pop())!=null;){s=rowsCache[ae];for(var he;(he=s.cellRenderQueue.pop())!=null;)ge=se.lastChild,hasFrozenColumns()&&he>options.frozenColumn?s.rowNode[1].appendChild(ge):s.rowNode[0].appendChild(ge),s.cellNodesByColumnIdx[he]=$(ge)}}}function renderRows(d){for(var s=[],f=[],_=[],S=!1,T=getDataLength(),F=d.top,M=d.bottom;F<=M;F++)rowsCache[F]||hasFrozenRows&&options.frozenBottom&&F==getDataLength()||(renderedRows++,_.push(F),rowsCache[F]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},appendRowHtml(s,f,F,d,T),activeCellNode&&activeRow===F&&(S=!0),counter_rows_rendered++);if(_.length){var P=__doc__.createElement("div"),H=__doc__.createElement("div");P.innerHTML=s.join(""),H.innerHTML=f.join("");for(var F=0,M=_.length;F<M;F++)hasFrozenRows&&_[F]>=actualFrozenRow?hasFrozenColumns()?rowsCache[_[F]].rowNode=$().add($(P.firstChild).appendTo($canvasBottomL)).add($(H.firstChild).appendTo($canvasBottomR)):rowsCache[_[F]].rowNode=$().add($(P.firstChild).appendTo($canvasBottomL)):hasFrozenColumns()?rowsCache[_[F]].rowNode=$().add($(P.firstChild).appendTo($canvasTopL)).add($(H.firstChild).appendTo($canvasTopR)):rowsCache[_[F]].rowNode=$().add($(P.firstChild).appendTo($canvasTopL));S&&(activeCellNode=getCellNode(activeRow,activeCell))}}function startPostProcessing(){options.enableAsyncPostRender&&(clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}function startPostProcessingCleanup(){options.enableAsyncPostRenderCleanup&&(clearTimeout(h_postrenderCleanup),h_postrenderCleanup=setTimeout(asyncPostProcessCleanupRows,options.asyncPostRenderCleanupDelay))}function invalidatePostProcessingResults(d){for(var s in postProcessedRows[d])postProcessedRows[d].hasOwnProperty(s)&&(postProcessedRows[d][s]="C");postProcessFromRow=Math.min(postProcessFromRow,d),postProcessToRow=Math.max(postProcessToRow,d),startPostProcessing()}function updateRowPositions(){for(var d in rowsCache){var s=d?parseInt(d):0;rowsCache[s].rowNode[0].style.top=getRowTop(s)+"px"}}function render(){if(initialized){scrollThrottle.dequeue();var d=getVisibleRange(),s=getRenderedRange();if(cleanupRows(s),lastRenderedScrollLeft!=scrollLeft){if(hasFrozenRows){var f=jQuery.extend(!0,{},s);options.frozenBottom?(f.top=actualFrozenRow,f.bottom=getDataLength()):(f.top=0,f.bottom=options.frozenRow),cleanUpAndRenderCells(f)}cleanUpAndRenderCells(s)}renderRows(s),hasFrozenRows&&(options.frozenBottom?renderRows({top:actualFrozenRow,bottom:getDataLength()-1,leftPx:s.leftPx,rightPx:s.rightPx}):renderRows({top:0,bottom:options.frozenRow-1,leftPx:s.leftPx,rightPx:s.rightPx})),postProcessFromRow=d.top,postProcessToRow=Math.min(getDataLengthIncludingAddNew()-1,d.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,lastRenderedScrollLeft=scrollLeft,trigger(self.onRendered,{startRow:d.top,endRow:d.bottom,grid:self})}}function handleHeaderRowScroll(){var d=$headerRowScrollContainer[0].scrollLeft;d!=$viewportScrollContainerX[0].scrollLeft&&($viewportScrollContainerX[0].scrollLeft=d)}function handleFooterRowScroll(){var d=$footerRowScrollContainer[0].scrollLeft;d!=$viewportScrollContainerX[0].scrollLeft&&($viewportScrollContainerX[0].scrollLeft=d)}function handlePreHeaderPanelScroll(){handleElementScroll($preHeaderPanelScroller[0])}function handleElementScroll(d){var s=d.scrollLeft;s!=$viewportScrollContainerX[0].scrollLeft&&($viewportScrollContainerX[0].scrollLeft=s)}function handleScroll(){return scrollTop=$viewportScrollContainerY[0].scrollTop,scrollLeft=$viewportScrollContainerX[0].scrollLeft,_handleScroll(!1)}function _handleScroll(d){var s=$viewportScrollContainerY[0].scrollHeight-$viewportScrollContainerY[0].clientHeight,f=$viewportScrollContainerY[0].scrollWidth-$viewportScrollContainerY[0].clientWidth;s=Math.max(0,s),f=Math.max(0,f),scrollTop>s&&(scrollTop=s),scrollLeft>f&&(scrollLeft=f);var _=Math.abs(scrollTop-prevScrollTop),S=Math.abs(scrollLeft-prevScrollLeft);if(S&&(prevScrollLeft=scrollLeft,$viewportScrollContainerX[0].scrollLeft=scrollLeft,$headerScrollContainer[0].scrollLeft=scrollLeft,$topPanelScroller[0].scrollLeft=scrollLeft,$headerRowScrollContainer[0].scrollLeft=scrollLeft,options.createFooterRow&&($footerRowScrollContainer[0].scrollLeft=scrollLeft),options.createPreHeaderPanel&&(hasFrozenColumns()?$preHeaderPanelScrollerR[0].scrollLeft=scrollLeft:$preHeaderPanelScroller[0].scrollLeft=scrollLeft),hasFrozenColumns()?hasFrozenRows&&($viewportTopR[0].scrollLeft=scrollLeft):hasFrozenRows&&($viewportTopL[0].scrollLeft=scrollLeft)),_)if(vScrollDir=prevScrollTop<scrollTop?1:-1,prevScrollTop=scrollTop,d&&($viewportScrollContainerY[0].scrollTop=scrollTop),hasFrozenColumns()&&(hasFrozenRows&&!options.frozenBottom?$viewportBottomL[0].scrollTop=scrollTop:$viewportTopL[0].scrollTop=scrollTop),_<viewportH)scrollTo(scrollTop+offset);else{var T=offset;h==viewportH?page=0:page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),offset=Math.round(page*cj),T!=offset&&invalidateAllRows()}if(S||_){var F=Math.abs(lastRenderedScrollLeft-scrollLeft),M=Math.abs(lastRenderedScrollTop-scrollTop);(F>20||M>20)&&(options.forceSyncScrolling||M<viewportH&&F<viewportW?render():scrollThrottle.enqueue(),trigger(self.onViewportChanged,{}))}return trigger(self.onScroll,{scrollLeft,scrollTop}),!!(S||_)}function ActionThrottle(d,s){var f=!1,_=!1;function S(){f?_=!0:F()}function T(){_=!1}function F(){f=!0,setTimeout(M,s),d()}function M(){_?(T(),F()):f=!1}return{enqueue:S,dequeue:T}}function asyncPostProcessRows(){for(var d=getDataLength();postProcessFromRow<=postProcessToRow;){var s=vScrollDir>=0?postProcessFromRow++:postProcessToRow--,f=rowsCache[s];if(!(!f||s>=d)){postProcessedRows[s]||(postProcessedRows[s]={}),ensureCellNodesInRowsCache(s);for(var _ in f.cellNodesByColumnIdx)if(f.cellNodesByColumnIdx.hasOwnProperty(_)){_=_|0;var S=columns[_],T=postProcessedRows[s][_];if(S.asyncPostRender&&T!=="R"){var F=f.cellNodesByColumnIdx[_];F&&S.asyncPostRender(F,s,getDataItem(s),S,T==="C"),postProcessedRows[s][_]="R"}}h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return}}}function asyncPostProcessCleanupRows(){if(postProcessedCleanupQueue.length>0){for(var d=postProcessedCleanupQueue[0].groupId;postProcessedCleanupQueue.length>0&&postProcessedCleanupQueue[0].groupId==d;){var s=postProcessedCleanupQueue.shift();if(s.actionType=="R"&&$(s.node).remove(),s.actionType=="C"){var f=columns[s.columnIdx];f.asyncPostRenderCleanup&&s.node&&f.asyncPostRenderCleanup(s.node,s.rowIdx,f)}}h_postrenderCleanup=setTimeout(asyncPostProcessCleanupRows,options.asyncPostRenderCleanupDelay)}}function updateCellCssStylesOnRenderedRows(d,s){var f,_,S,T;for(var F in rowsCache){if(T=s&&s[F],S=d&&d[F],T)for(_ in T)(!S||T[_]!=S[_])&&(f=getCellNode(F,getColumnIndex(_)),f&&$(f).removeClass(T[_]));if(S)for(_ in S)(!T||T[_]!=S[_])&&(f=getCellNode(F,getColumnIndex(_)),f&&$(f).addClass(S[_]))}}function addCellCssStyles(d,s){if(cellCssClasses[d])throw new Error("SlickGrid addCellCssStyles: cell CSS hash with key '"+d+"' already exists.");cellCssClasses[d]=s,updateCellCssStylesOnRenderedRows(s,null),trigger(self.onCellCssStylesChanged,{key:d,hash:s,grid:self})}function removeCellCssStyles(d){cellCssClasses[d]&&(updateCellCssStylesOnRenderedRows(null,cellCssClasses[d]),delete cellCssClasses[d],trigger(self.onCellCssStylesChanged,{key:d,hash:null,grid:self}))}function setCellCssStyles(d,s){var f=cellCssClasses[d];cellCssClasses[d]=s,updateCellCssStylesOnRenderedRows(s,f),trigger(self.onCellCssStylesChanged,{key:d,hash:s,grid:self})}function getCellCssStyles(d){return cellCssClasses[d]}function flashCell(d,s,f){f=f||100;function _(T,F){F&&setTimeout(function(){T.queue(function(){T.toggleClass(options.cellFlashingCssClass).dequeue(),_(T,F-1)})},f)}if(rowsCache[d]){var S=$(getCellNode(d,s));_(S,4)}}function handleMouseWheel(d,s,f,_){var S=$(d.target).closest(".slick-row"),T=S[0];if(T!=rowNodeFromLastMouseWheelEvent){var F=S.parents(".grid-canvas"),M=F.hasClass("grid-canvas-left");if(zombieRowNodeFromLastMouseWheelEvent&&zombieRowNodeFromLastMouseWheelEvent[M?0:1]!=T){var P=zombieRowNodeFromLastMouseWheelEvent[M||zombieRowNodeFromLastMouseWheelEvent.length==1?0:1];P.parentElement.removeChild(P),zombieRowNodeFromLastMouseWheelEvent=null}rowNodeFromLastMouseWheelEvent=T}scrollTop=Math.max(0,$viewportScrollContainerY[0].scrollTop-_*options.rowHeight),scrollLeft=$viewportScrollContainerX[0].scrollLeft+f*10;var H=_handleScroll(!0);H&&d.preventDefault()}function handleDragInit(d,s){var f=getCellFromEvent(d);if(!f||!cellExists(f.row,f.cell))return!1;var _=trigger(self.onDragInit,s,d);return d.isImmediatePropagationStopped()?_:!1}function handleDragStart(d,s){var f=getCellFromEvent(d);if(!f||!cellExists(f.row,f.cell))return!1;var _=trigger(self.onDragStart,s,d);return d.isImmediatePropagationStopped()?_:!1}function handleDrag(d,s){return trigger(self.onDrag,s,d)}function handleDragEnd(d,s){trigger(self.onDragEnd,s,d)}function handleKeyDown(d){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},d);var s=d.isImmediatePropagationStopped(),f=Slick.keyCode;if(!s&&!d.shiftKey&&!d.altKey){if(options.editable&&currentEditor&&currentEditor.keyCaptureList&&currentEditor.keyCaptureList.indexOf(d.which)>-1)return;d.which==f.HOME?s=d.ctrlKey?navigateTop():navigateRowStart():d.which==f.END&&(s=d.ctrlKey?navigateBottom():navigateRowEnd())}if(!s)if(!d.shiftKey&&!d.altKey&&!d.ctrlKey){if(options.editable&&currentEditor&&currentEditor.keyCaptureList&&currentEditor.keyCaptureList.indexOf(d.which)>-1)return;if(d.which==f.ESCAPE){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else d.which==f.PAGE_DOWN?(navigatePageDown(),s=!0):d.which==f.PAGE_UP?(navigatePageUp(),s=!0):d.which==f.LEFT?s=navigateLeft():d.which==f.RIGHT?s=navigateRight():d.which==f.UP?s=navigateUp():d.which==f.DOWN?s=navigateDown():d.which==f.TAB?s=navigateNext():d.which==f.ENTER&&(options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable(void 0,void 0,d)),s=!0)}else d.which==f.TAB&&d.shiftKey&&!d.ctrlKey&&!d.altKey&&(s=navigatePrev());if(s){d.stopPropagation(),d.preventDefault();try{d.originalEvent.keyCode=0}catch{}}}function handleClick(d){currentEditor||(d.target!=__doc__.activeElement||$(d.target).hasClass("slick-cell"))&&setFocus();var s=getCellFromEvent(d);if(!(!s||currentEditor!==null&&activeRow==s.row&&activeCell==s.cell)&&(trigger(self.onClick,{row:s.row,cell:s.cell},d),!d.isImmediatePropagationStopped()&&canCellBeActive(s.row,s.cell)&&(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()))){scrollRowIntoView(s.row,!1);var f=d.target&&d.target.className===Slick.preClickClassName,_=columns[s.cell],S=!!(options.editable&&_&&_.editor&&options.suppressActiveCellChangeOnEdit);setActiveCellInternal(getCellNode(s.row,s.cell),null,f,S,d)}}function handleContextMenu(d){var s=$(d.target).closest(".slick-cell",$canvas);s.length!==0&&(activeCellNode===s[0]&&currentEditor!==null||trigger(self.onContextMenu,{},d))}function handleDblClick(d){var s=getCellFromEvent(d);!s||currentEditor!==null&&activeRow==s.row&&activeCell==s.cell||(trigger(self.onDblClick,{row:s.row,cell:s.cell},d),!d.isImmediatePropagationStopped()&&options.editable&&gotoCell(s.row,s.cell,!0,d))}function handleHeaderMouseEnter(d){trigger(self.onHeaderMouseEnter,{column:$(this).data("column"),grid:self},d)}function handleHeaderMouseLeave(d){trigger(self.onHeaderMouseLeave,{column:$(this).data("column"),grid:self},d)}function handleHeaderContextMenu(d){var s=$(d.target).closest(".slick-header-column",".slick-header-columns"),f=s&&s.data("column");trigger(self.onHeaderContextMenu,{column:f},d)}function handleHeaderClick(d){if(!columnResizeDragging){var s=$(d.target).closest(".slick-header-column",".slick-header-columns"),f=s&&s.data("column");f&&trigger(self.onHeaderClick,{column:f},d)}}function handleFooterContextMenu(d){var s=$(d.target).closest(".slick-footerrow-column",".slick-footerrow-columns"),f=s&&s.data("column");trigger(self.onFooterContextMenu,{column:f},d)}function handleFooterClick(d){var s=$(d.target).closest(".slick-footerrow-column",".slick-footerrow-columns"),f=s&&s.data("column");trigger(self.onFooterClick,{column:f},d)}function handleMouseEnter(d){trigger(self.onMouseEnter,{},d)}function handleMouseLeave(d){trigger(self.onMouseLeave,{},d)}function cellExists(d,s){return!(d<0||d>=getDataLength()||s<0||s>=columns.length)}function getCellFromPoint(d,s){for(var f=getRowFromPosition(s),_=0,S=0,T=0;T<columns.length&&S<d;T++)S+=columns[T].width,_++;return _<0&&(_=0),{row:f,cell:_-1}}function getCellFromNode(d){var s=/l\d+/.exec(d.className);if(!s)throw new Error("SlickGrid getCellFromNode: cannot get cell - "+d.className);return parseInt(s[0].substr(1,s[0].length-1),10)}function getRowFromNode(d){for(var s in rowsCache)for(var f in rowsCache[s].rowNode)if(rowsCache[s].rowNode[f]===d)return s?parseInt(s):0;return null}function getFrozenRowOffset(d){var s=hasFrozenRows?options.frozenBottom?d>=actualFrozenRow?h<viewportTopH?actualFrozenRow*options.rowHeight:h:0:d>=actualFrozenRow?frozenRowsHeight:0:0;return s}function getCellFromEvent(d){var s,f,_=$(d.target).closest(".slick-cell",$canvas);if(!_.length)return null;if(s=getRowFromNode(_[0].parentNode),hasFrozenRows){var S=_.parents(".grid-canvas").offset(),T=0,F=_.parents(".grid-canvas-bottom").length;F&&(T=options.frozenBottom?$canvasTopL.height():frozenRowsHeight),s=getCellFromPoint(d.clientX-S.left,d.clientY-S.top+T+$(__doc__).scrollTop()).row}return f=getCellFromNode(_[0]),s==null||f==null?null:{row:s,cell:f}}function getCellNodeBox(d,s){if(!cellExists(d,s))return null;for(var f=getFrozenRowOffset(d),_=getRowTop(d)-f,S=_+options.rowHeight-1,T=0,F=0;F<s;F++)T+=columns[F].width,options.frozenColumn==F&&(T=0);var M=T+columns[s].width;return{top:_,left:T,bottom:S,right:M}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){tabbingDirection==-1?$focusSink[0].focus():$focusSink2[0].focus()}function scrollCellIntoView(d,s,f){if(scrollRowIntoView(d,f),!(s<=options.frozenColumn)){var _=getColspan(d,s);internalScrollColumnIntoView(columnPosLeft[s],columnPosRight[s+(_>1?_-1:0)])}}function internalScrollColumnIntoView(d,s){var f=scrollLeft+$viewportScrollContainerX.width();d<scrollLeft?($viewportScrollContainerX.scrollLeft(d),handleScroll(),render()):s>f&&($viewportScrollContainerX.scrollLeft(Math.min(d,s-$viewportScrollContainerX[0].clientWidth)),handleScroll(),render())}function scrollColumnIntoView(d){internalScrollColumnIntoView(columnPosLeft[d],columnPosRight[d])}function setActiveCellInternal(d,s,f,_,S){if(activeCellNode!==null&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"),rowsCache[activeRow]&&$(rowsCache[activeRow].rowNode).removeClass("active")),activeCellNode=d,activeCellNode!=null){var T=$(activeCellNode),F=T.offset(),M=Math.floor(T.parents(".grid-canvas").offset().top),P=T.parents(".grid-canvas-bottom").length;hasFrozenRows&&P&&(M-=options.frozenBottom?$canvasTopL.height():frozenRowsHeight);var H=getCellFromPoint(F.left,Math.ceil(F.top)-M);activeRow=H.row,activeCell=activePosX=activeCell=activePosX=getCellFromNode(activeCellNode),s==null&&(s=activeRow==getDataLength()||options.autoEdit),options.showCellSelection&&(T.addClass("active"),rowsCache[activeRow]&&$(rowsCache[activeRow].rowNode).addClass("active")),options.editable&&s&&isCellPotentiallyEditable(activeRow,activeCell)&&(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable(void 0,f,S)},options.asyncEditorLoadDelay):makeActiveCellEditable(void 0,f,S))}else activeRow=activeCell=null;_||trigger(self.onActiveCellChanged,getActiveCell())}function clearTextSelection(){if(__doc__.selection&&__doc__.selection.empty)try{__doc__.selection.empty()}catch{}else if(window.getSelection){var d=window.getSelection();d&&d.removeAllRanges&&d.removeAllRanges()}}function isCellPotentiallyEditable(d,s){var f=getDataLength();return!(d<f&&!getDataItem(d)||columns[s].cannotTriggerInsert&&d>=f||!getEditor(d,s))}function makeActiveCellNormal(){if(currentEditor){if(trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor}),currentEditor.destroy(),currentEditor=null,activeCellNode){var d=getDataItem(activeRow);if($(activeCellNode).removeClass("editable invalid"),d){var s=columns[activeCell],f=getFormatter(activeRow,s),_=f(activeRow,activeCell,getDataItemValueForColumn(d,s),s,d,self);applyFormatResultToCellNode(_,activeCellNode),invalidatePostProcessingResults(activeRow)}}navigator.userAgent.toLowerCase().match(/msie/)&&clearTextSelection(),getEditorLock().deactivate(editController)}}function makeActiveCellEditable(d,s,f){if(activeCellNode){if(!options.editable)throw new Error("SlickGrid makeActiveCellEditable : should never get called when options.editable is false");if(clearTimeout(h_editorLoader),!!isCellPotentiallyEditable(activeRow,activeCell)){var _=columns[activeCell],S=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:S,column:_,target:"grid"})===!1){setFocus();return}getEditorLock().activate(editController),$(activeCellNode).addClass("editable");var T=d||getEditor(activeRow,activeCell);!d&&!T.suppressClearOnEdit&&(activeCellNode.innerHTML="");var F=data.getItemMetadata&&data.getItemMetadata(activeRow);F=F&&F.columns;var M=F&&(F[_.id]||F[activeCell]);currentEditor=new T({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:_,columnMetaData:M,item:S||{},event:f,commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),S&&(currentEditor.loadValue(S),s&&currentEditor.preClick&&currentEditor.preClick()),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()}}}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(d){var s={top:d.offsetTop,left:d.offsetLeft,bottom:0,right:0,width:$(d).outerWidth(),height:$(d).outerHeight(),visible:!0};s.bottom=s.top+s.height,s.right=s.left+s.width;for(var f=d.offsetParent;(d=d.parentNode)!=__doc__.body&&d!=null;)s.visible&&d.scrollHeight!=d.offsetHeight&&$(d).css("overflowY")!="visible"&&(s.visible=s.bottom>d.scrollTop&&s.top<d.scrollTop+d.clientHeight),s.visible&&d.scrollWidth!=d.offsetWidth&&$(d).css("overflowX")!="visible"&&(s.visible=s.right>d.scrollLeft&&s.left<d.scrollLeft+d.clientWidth),s.left-=d.scrollLeft,s.top-=d.scrollTop,d===f&&(s.left+=d.offsetLeft,s.top+=d.offsetTop,f=d.offsetParent),s.bottom=s.top+s.height,s.right=s.left+s.width;return s}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(activeCellNode&&(trigger(self.onActiveCellPositionChanged,{}),currentEditor)){var d=getActiveCellPosition();currentEditor.show&&currentEditor.hide&&(d.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(d)}}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell}:null}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(d,s){if(!hasFrozenRows||!options.frozenBottom&&d>actualFrozenRow-1||options.frozenBottom&&d<actualFrozenRow-1){var f=$viewportScrollContainerY.height(),_=hasFrozenRows&&!options.frozenBottom?d-options.frozenRow:d,S=_*options.rowHeight,T=(_+1)*options.rowHeight-f+(viewportHasHScroll?scrollbarDimensions.height:0);(_+1)*options.rowHeight>scrollTop+f+offset?(scrollTo(s?S:T),render()):_*options.rowHeight<scrollTop+offset&&(scrollTo(s?T:S),render())}}function scrollRowToTop(d){scrollTo(d*options.rowHeight),render()}function scrollPage(d){var s=d*numVisibleRows,f=scrollTop+options.rowHeight-1;if(scrollTo((getRowFromPosition(f)+s)*options.rowHeight),render(),options.enableCellNavigation&&activeRow!=null){var _=activeRow+s,S=getDataLengthIncludingAddNew();_>=S&&(_=S-1),_<0&&(_=0);for(var T=0,F=null,M=activePosX;T<=activePosX;)canCellBeActive(_,T)&&(F=T),T+=getColspan(_,T);F!==null?(setActiveCellInternal(getCellNode(_,F)),activePosX=M):resetActiveCell()}}function navigatePageDown(){scrollPage(1)}function navigatePageUp(){scrollPage(-1)}function navigateTop(){navigateToRow(0)}function navigateBottom(){navigateToRow(getDataLength()-1)}function navigateToRow(d){var s=getDataLength();if(!s)return!0;if(d<0?d=0:d>=s&&(d=s-1),scrollCellIntoView(d,0,!0),options.enableCellNavigation&&activeRow!=null){for(var f=0,_=null,S=activePosX;f<=activePosX;)canCellBeActive(d,f)&&(_=f),f+=getColspan(d,f);_!==null?(setActiveCellInternal(getCellNode(d,_)),activePosX=S):resetActiveCell()}return!0}function getColspan(d,s){var f=data.getItemMetadata&&data.getItemMetadata(d);if(!f||!f.columns)return 1;var _=f.columns[columns[s].id]||f.columns[s],S=_&&_.colspan;return S==="*"?S=columns.length-s:S=S||1,S}function findFirstFocusableCell(d){for(var s=0;s<columns.length;){if(canCellBeActive(d,s))return s;s+=getColspan(d,s)}return null}function findLastFocusableCell(d){for(var s=0,f=null;s<columns.length;)canCellBeActive(d,s)&&(f=s),s+=getColspan(d,s);return f}function gotoRight(d,s,f){if(s>=columns.length)return null;do s+=getColspan(d,s);while(s<columns.length&&!canCellBeActive(d,s));return s<columns.length?{row:d,cell:s,posX:s}:null}function gotoLeft(d,s,f){if(s<=0)return null;var _=findFirstFocusableCell(d);if(_===null||_>=s)return null;for(var S={row:d,cell:_,posX:_},T;;){if(T=gotoRight(S.row,S.cell,S.posX),!T)return null;if(T.cell>=s)return S;S=T}}function gotoDown(d,s,f){for(var _,S=getDataLengthIncludingAddNew();;){if(++d>=S)return null;for(_=s=0;s<=f;)_=s,s+=getColspan(d,s);if(canCellBeActive(d,_))return{row:d,cell:_,posX:f}}}function gotoUp(d,s,f){for(var _;;){if(--d<0)return null;for(_=s=0;s<=f;)_=s,s+=getColspan(d,s);if(canCellBeActive(d,_))return{row:d,cell:_,posX:f}}}function gotoNext(d,s,f){if(d==null&&s==null&&(d=s=0,canCellBeActive(d,s)))return{row:d,cell:s,posX:s};var _=gotoRight(d,s);if(_)return _;var S=null,T=getDataLengthIncludingAddNew();for(d===T-1&&d--;++d<T;)if(S=findFirstFocusableCell(d),S!==null)return{row:d,cell:S,posX:S};return null}function gotoPrev(d,s,f){if(d==null&&s==null&&(d=getDataLengthIncludingAddNew()-1,s=columns.length-1,canCellBeActive(d,s)))return{row:d,cell:s,posX:s};for(var _,S;!_&&(_=gotoLeft(d,s),!_);){if(--d<0)return null;s=0,S=findLastFocusableCell(d),S!==null&&(_={row:d,cell:S,posX:S})}return _}function gotoRowStart(d,s,f){var _=findFirstFocusableCell(d);return _===null?null:{row:d,cell:_,posX:_}}function gotoRowEnd(d,s,f){var _=findLastFocusableCell(d);return _===null?null:{row:d,cell:_,posX:_}}function navigateRight(){return navigate("right")}function navigateLeft(){return navigate("left")}function navigateDown(){return navigate("down")}function navigateUp(){return navigate("up")}function navigateNext(){return navigate("next")}function navigatePrev(){return navigate("prev")}function navigateRowStart(){return navigate("home")}function navigateRowEnd(){return navigate("end")}function navigate(d){if(!options.enableCellNavigation||!activeCellNode&&d!="prev"&&d!="next")return!1;if(!getEditorLock().commitCurrentEdit())return!0;setFocus();var s={up:-1,down:1,left:-1,right:1,prev:-1,next:1,home:-1,end:1};tabbingDirection=s[d];var f={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext,home:gotoRowStart,end:gotoRowEnd},_=f[d],S=_(activeRow,activeCell,activePosX);if(S){if(hasFrozenRows&&options.frozenBottom&S.row==getDataLength())return;var T=S.row==getDataLength();return(!options.frozenBottom&&S.row>=actualFrozenRow||options.frozenBottom&&S.row<actualFrozenRow)&&scrollCellIntoView(S.row,S.cell,!T&&options.emulatePagingWhenScrolling),setActiveCellInternal(getCellNode(S.row,S.cell)),activePosX=S.posX,!0}else return setActiveCellInternal(getCellNode(activeRow,activeCell)),!1}function getCellNode(d,s){if(rowsCache[d]){ensureCellNodesInRowsCache(d);try{return rowsCache[d].cellNodesByColumnIdx.length>s?rowsCache[d].cellNodesByColumnIdx[s][0]:null}catch{return rowsCache[d].cellNodesByColumnIdx[s]}}return null}function setActiveCell(d,s,f,_,S){initialized&&(d>getDataLength()||d<0||s>=columns.length||s<0||options.enableCellNavigation&&(scrollCellIntoView(d,s,!1),setActiveCellInternal(getCellNode(d,s),f,_,S)))}function setActiveRow(d,s,f){initialized&&(d>getDataLength()||d<0||s>=columns.length||s<0||(activeRow=d,f||scrollCellIntoView(d,s||0,!1)))}function canCellBeActive(d,s){if(!options.enableCellNavigation||d>=getDataLengthIncludingAddNew()||d<0||s>=columns.length||s<0)return!1;var f=data.getItemMetadata&&data.getItemMetadata(d);if(f&&typeof f.focusable<"u")return!!f.focusable;var _=f&&f.columns;return _&&_[columns[s].id]&&typeof _[columns[s].id].focusable<"u"?!!_[columns[s].id].focusable:_&&_[s]&&typeof _[s].focusable<"u"?!!_[s].focusable:!!columns[s].focusable}function canCellBeSelected(d,s){if(d>=getDataLength()||d<0||s>=columns.length||s<0)return!1;var f=data.getItemMetadata&&data.getItemMetadata(d);if(f&&typeof f.selectable<"u")return!!f.selectable;var _=f&&f.columns&&(f.columns[columns[s].id]||f.columns[s]);return _&&typeof _.selectable<"u"?!!_.selectable:!!columns[s].selectable}function gotoCell(d,s,f,_){if(initialized&&canCellBeActive(d,s)&&getEditorLock().commitCurrentEdit()){scrollCellIntoView(d,s,!1);var S=getCellNode(d,s),T=columns[s],F=!!(options.editable&&T&&T.editor&&options.suppressActiveCellChangeOnEdit);setActiveCellInternal(S,f||d===getDataLength()||options.autoEdit,null,F,_),currentEditor||setFocus()}}function commitCurrentEdit(){var d=getDataItem(activeRow),s=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var f=currentEditor.validate();if(f.valid){if(activeRow<getDataLength()){var _={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(d,this.serializedValue),updateRow(this.row),trigger(self.onCellChange,{row:this.row,cell:this.cell,item:d,column:s})},undo:function(){this.editor.applyValue(d,this.prevSerializedValue),updateRow(this.row),trigger(self.onCellChange,{row:this.row,cell:this.cell,item:d,column:s})}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(d,s,_)):(_.execute(),makeActiveCellNormal())}else{var S={};currentEditor.applyValue(S,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:S,column:s})}return!getEditorLock().isActive()}else return $(activeCellNode).removeClass("invalid"),$(activeCellNode).width(),$(activeCellNode).addClass("invalid"),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:f,row:activeRow,cell:activeCell,column:s}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(d){for(var s=[],f=columns.length-1,_=0;_<d.length;_++)s.push(new Slick.Range(d[_],0,d[_],f));return s}function getSelectedRows(){if(!selectionModel)throw new Error("SlickGrid Selection model is not set");return selectedRows.slice(0)}function setSelectedRows(d){if(!selectionModel)throw new Error("SlickGrid Selection model is not set");self&&self.getEditorLock&&!self.getEditorLock().isActive()&&selectionModel.setSelectedRanges(rowsToRanges(d))}function getBaseDocument(){return __doc__}function setBaseDocument(d){__doc__=d,stylesheet=null;var s=__doc__.styleSheets;for(let f=0;f<s.length;f++)if(s[f].cssRules[0].selectorText&&s[f].cssRules[0].selectorText.includes(uid)){stylesheet=s[f];break}$style=$(stylesheet.ownerNode),removeCssRules(),createCssRules(),setColumns(columns)}this.debug=function(){var d="";d+=`
counter_rows_rendered:  `+counter_rows_rendered,d+=`
counter_rows_removed:  `+counter_rows_removed,d+=`
renderedRows:  `+renderedRows,d+=`
numVisibleRows:  `+numVisibleRows,d+=`
maxSupportedCssHeight:  `+maxSupportedCssHeight,d+=`
n(umber of pages):  `+n,d+=`
(current) page:  `+page,d+=`
page height (ph):  `+ph,d+=`
vScrollDir:  `+vScrollDir,alert(d)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.4.38",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onFooterRowCellRendered:new Slick.Event,onFooterContextMenu:new Slick.Event,onFooterClick:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onBeforeFooterRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onBeforeAppendCell:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsDrag:new Slick.Event,onColumnsResized:new Slick.Event,onColumnsResizeDblClick:new Slick.Event,onBeforeColumnsResize:new Slick.Event,onCellChange:new Slick.Event,onCompositeEditorChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,onAutosizeColumns:new Slick.Event,onRendered:new Slick.Event,onSetOptions:new Slick.Event,registerPlugin,unregisterPlugin,getPluginByName,getColumns,setColumns,getColumnIndex,updateColumnHeader,setSortColumn,setSortColumns,getSortColumns,autosizeColumns,autosizeColumn,getOptions,setOptions,getData,getDataLength,getDataItem,setData,getSelectionModel,setSelectionModel,getSelectedRows,setSelectedRows,getContainerNode,updatePagingStatusFromView,applyFormatResultToCellNode,render,reRenderColumns,invalidate,invalidateRow,invalidateRows,invalidateAllRows,updateCell,updateRow,getViewport:getVisibleRange,getRenderedRange,resizeCanvas,updateRowCount,scrollRowIntoView,scrollRowToTop,scrollCellIntoView,scrollColumnIntoView,getCanvasNode,getUID,getHeaderColumnWidthDiff,getScrollbarDimensions,getHeadersWidth,getCanvasWidth,getCanvases,getActiveCanvasNode,setActiveCanvasNode,getViewportNode,getViewports,getActiveViewportNode,setActiveViewportNode,focus:setFocus,scrollTo,cacheCssForHiddenInit,restoreCssFromHiddenInit,getCellFromPoint,getCellFromEvent,getActiveCell,setActiveCell,setActiveRow,getActiveCellNode,getActiveCellPosition,resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor,getCellNode,getCellNodeBox,canCellBeSelected,canCellBeActive,navigatePrev,navigateNext,navigateUp,navigateDown,navigateLeft,navigateRight,navigatePageUp,navigatePageDown,navigateTop,navigateBottom,navigateRowStart,navigateRowEnd,gotoCell,getTopPanel,setTopPanelVisibility,getPreHeaderPanel,getPreHeaderPanelLeft:getPreHeaderPanel,getPreHeaderPanelRight,setPreHeaderPanelVisibility,getHeader,getHeaderColumn,setHeaderRowVisibility,getHeaderRow,getHeaderRowColumn,setFooterRowVisibility,getFooterRow,getFooterRowColumn,getGridPosition,flashCell,addCellCssStyles,setCellCssStyles,removeCellCssStyles,getCellCssStyles,getFrozenRowOffset,setColumnHeaderVisibility,init:finishInitialization,destroy,getEditorLock,getEditController,applyColumnWidths,setBaseDocument,getBaseDocument}),init()}function TextEditor(d){var s,f;this.init=function(){s=$("<INPUT type=text class='editor-text' />").appendTo(d.container).on("keyup",_=>{const S=_.which;if(S===37||S===39||S===8){_.stopImmediatePropagation();return}this.autoCorrect(s.val())})},this.autoCorrect=function(_){const T=d.grid.getData().getValueSuggestion(_,d.column.field);T&&s.val(T)},this.destroy=function(){s.remove()},this.focus=function(){s.focus()},this.getValue=function(){return s.val()},this.setValue=function(_){s.val(_)},this.loadValue=function(_){f=_[d.column.field]||"",s.val(f),s[0].defaultValue=f,s.select()},this.serializeValue=function(){return s.val()},this.applyValue=function(_,S,T=!0){d.grid.getData().updateValue(S,_.__index__,d.column.field,T)},this.isValueChanged=function(){return!(s.val()==""&&f==null)&&s.val()!=f},this.validate=function(){if(d.column.validator){var _=d.column.validator(s.val());if(!_.valid)return _}return{valid:!0,msg:null}},this.init()}function Overlays(d){var s,f,_,S,T=this,F=new Slick.EventHandler,M,P={buttonCssClass:null,buttonImage:"../images/down.gif",decoratorWidth:2};function H(Fe){d=$.extend(!0,{},P,d),S=Fe,M=new Re(S),s=K(),F.subscribe(S.onActiveCellChanged,oe).subscribe(S.onColumnsResized,se).subscribe(S.onScroll,ae)}function J(){F.unsubscribeAll(),s.$handle.unbind("dragstart",he).unbind("drag",Be).unbind("dragend",pe),s.remove()}function K(){var Fe=S.getCanvasNode(),Me=new be(Fe);return Me.$handle.bind("dragstart",he).bind("drag",Be).bind("dragend",pe),Me}function oe(Fe,Me){M.hide(),ge()}function se(Fe,Me){ge()}function ae(Fe,Me){ge()}function ge(Fe,Me){var ve=S.getActiveCell();if(!ve){s.toggle(!1);return}var At=S.getColumns()[ve.cell];s.toggle(!0),s.$handle.toggle(typeof At.editor<"u");var Ct=S.getCellNodeBox(ve.row,ve.cell);Ct.height=Ct.bottom-Ct.top,Ct.width=Ct.right-Ct.left,s.$left.css({left:Ct.left-2,top:Ct.top,width:2,height:Ct.height}),s.$right.css({left:Ct.left+Ct.width-1,top:Ct.top,width:2,height:Ct.height}),s.$top.css({left:Ct.left-2,top:Ct.top-2,width:Ct.width+3,height:2}),s.$bottom.css({left:Ct.left-2,top:Ct.top+Ct.height-1,width:Ct.width+3,height:2}),s.$handle.css({left:Ct.left+Ct.width-4,top:Ct.top+Ct.height-4,width:1,height:1})}function he(Fe,Me){var ve=S.getActiveCell();if(S.canCellBeSelected(ve.row,ve.cell)&&(_=!0,Fe.stopImmediatePropagation()),!_)return null;const At=S.getCellEditor();return At&&At.applyValue(S.getDataItem(ve.row),At.getValue(),!1),S.focus(),f=ve.row,Me.range={start:ve,end:{}},$(this).css({"background-color":"transparent","border-color":"transparent"}),M.show(new Slick.Range(ve.row,ve.cell))}function Be(Fe,Me){if(!_)return;var ve=S.getCanvasNode();Fe.stopImmediatePropagation();var At=S.getCellFromPoint(Fe.pageX-$(ve).offset().left,Fe.pageY-$(ve).offset().top);if(!S.canCellBeSelected(At.row,At.cell))return;Me.range.end=At,M.show(new Slick.Range(Me.range.start.row,Me.range.start.cell,At.row,Me.range.start.cell));const Ct=S.getViewport();Ct.bottom===At.row&&S.scrollRowIntoView(At.row+7),Ct.top===At.row&&S.scrollRowIntoView(Ct.top-7)}function pe(Fe,Me){if(!_)return;_=!1,$(this).css({"background-color":"","border-color":""}),M.hideHandle();const ve=M.getSelectedRange(),At=f<ve.toRow?"+":"-";T.onFillUpDown.notify({dir:At,grid:S,range:ve},Fe,T),M.hide(),Fe.preventDefault(),Fe.stopPropagation()}function be(Fe,Me){var ve=(Me||"")+"cell-overlay";this.$left=$("<div>").addClass(ve).addClass("left").appendTo(Fe),this.$right=$("<div>").addClass(ve).addClass("right").appendTo(Fe),this.$top=$("<div>").addClass(ve).addClass("top").appendTo(Fe),this.$bottom=$("<div>").addClass(ve).addClass("bottom").appendTo(Fe),this.$handle=$("<div>").addClass("handle-overlay").data("__doc__",S.getBaseDocument()).appendTo(Fe),this.toggle=function(At){this.$left.toggle(At),this.$right.toggle(At),this.$top.toggle(At),this.$bottom.toggle(At),this.$handle.toggle(At)},this.remove=function(){this.$left.remove(),this.$right.remove(),this.$top.remove(),this.$bottom.remove(),this.$handle.remove()}}function Re(Fe){var Me,ve;function At(xt){ve=xt,Me||(Me=new be(S.getCanvasNode(),"selection-"));var wt=Fe.getCellNodeBox(xt.fromRow,xt.fromCell),Ft=Fe.getCellNodeBox(xt.toRow,xt.toCell);return Me.$left.css({top:wt.top-2,left:wt.left-2,height:Ft.bottom-wt.top+2,width:d.decoratorWidth}),Me.$right.css({top:wt.top-2,left:Ft.right-1,height:Ft.bottom-wt.top+2,width:d.decoratorWidth}),Me.$top.css({top:wt.top-2,left:Ft.left-1,height:d.decoratorWidth,width:Ft.right-wt.left+2}),Me.$bottom.css({top:Ft.bottom-1,left:wt.left-2,height:d.decoratorWidth,width:Ft.right-wt.left+3}),Me.$handle.css({top:Ft.bottom-3,left:wt.right-4,height:1,width:1}),Me}function Ct(){return ve}function Rt(){Me&&(Me.toggle(!1),Me=null)}function It(){Me.$handle.hide()}return{hide:Rt,hideHandle:It,show:At,getSelectedRange:Ct}}$.extend(this,{init:H,destroy:J,onFillUpDown:new Slick.Event})}function RowSelectionModel(d){let s,f=[];const _=this,S=new Slick.EventHandler;let T,F;const M={selectActiveRow:!0};function P(Fe){F=Object.assign(M,d),s=Fe,S.subscribe(s.onActiveCellChanged,J(pe)),S.subscribe(s.onKeyDown,J(be)),S.subscribe(s.onClick,J(Re))}function H(){S.unsubscribeAll()}function J(Fe){return function(){T||(T=!0,Fe.apply(this,arguments),T=!1)}}function K(Fe){const Me=[];for(let ve=0;ve<Fe.length;ve++)for(let At=Fe[ve].fromRow;At<=Fe[ve].toRow;At++)Me.push(At);return Me}function oe(Fe){const Me=[],ve=s.getColumns().length-1;for(let At=0;At<Fe.length;At++)Me.push(new Slick.Range(Fe[At],0,Fe[At],ve));return Me}function se(Fe,Me){let ve;const At=[];for(ve=Fe;ve<=Me;ve++)At.push(ve);for(ve=Me;ve<Fe;ve++)At.push(ve);return At}function ae(){return K(f)}function ge(Fe){he(oe(Fe))}function he(Fe){(!f||f.length===0)&&(!Fe||Fe.length===0)||(f=Fe,_.onSelectedRangesChanged.notify(f))}function Be(){return f}function pe(Fe,Me){F.selectActiveRow&&Me.row!=null&&he([new Slick.Range(Me.row,0,Me.row,s.getColumns().length-1)])}function be(Fe){const Me=s.getActiveCell();if(s.getOptions().multiSelect&&Me&&Fe.shiftKey&&!Fe.ctrlKey&&!Fe.altKey&&!Fe.metaKey&&(Fe.which===Slick.keyCode.UP||Fe.which===Slick.keyCode.DOWN)){let ve=ae();ve.sort((It,xt)=>It-xt),ve.length||(ve=[Me.row]);let At=ve[0],Ct=ve[ve.length-1],Rt;if(Fe.which===Slick.keyCode.DOWN?Rt=Me.row<Ct||At===Ct?++Ct:++At:Rt=Me.row<Ct?--Ct:--At,Rt>=0&&Rt<s.getDataLength()){s.scrollRowIntoView(Rt);const It=oe(se(At,Ct));he(It)}Fe.preventDefault(),Fe.stopPropagation()}}function Re(Fe){const Me=s.getCellFromEvent(Fe);if(!Me||!s.canCellBeActive(Me.row,Me.cell)||!s.getOptions().multiSelect||!Fe.ctrlKey&&!Fe.shiftKey&&!Fe.metaKey)return!1;let ve=K(f);const At=ve.indexOf(Me.row);if(At===-1&&(Fe.ctrlKey||Fe.metaKey))ve.push(Me.row),s.setActiveCell(Me.row,Me.cell);else if(At!==-1&&(Fe.ctrlKey||Fe.metaKey))ve=ve.filter((Rt,It)=>Rt!==Me.row),s.setActiveCell(Me.row,Me.cell);else if(ve.length&&Fe.shiftKey){const Rt=ve.pop(),It=Math.min(Me.row,Rt),xt=Math.max(Me.row,Rt);ve=[];for(let wt=It;wt<=xt;wt++)wt!==Rt&&ve.push(wt);ve.push(Rt),s.setActiveCell(Me.row,Me.cell)}const Ct=oe(ve);return he(Ct),Fe.stopImmediatePropagation(),!0}Object.assign(this,{getSelectedRows:ae,setSelectedRows:ge,getSelectedRanges:Be,setSelectedRanges:he,init:P,destroy:H,pluginName:"RowSelectionModel",onSelectedRangesChanged:new Slick.Event})}class TableChart extends BaseChart{constructor(s,f,_){super(s,f,_),this.config.type="table_chart";let S=[];_.include_index!==!1&&(S=[{field:"__index__",id:"__index__",name:"index",datatype:"integer",sortable:!0,width:100}]);const T=_.column_widths||{};for(const F of this.config.param){const M=s.columnIndex[F],P={id:M.field,field:M.field,name:M.name,datatype:M.datatype,sortable:!0,width:T[F]?T[F]:100};M.datatype==="multitext"&&(P.datatype="text"),M.editable&&(P.editor=TextEditor),M.is_url&&(P.formatter=(H,J,K,oe,se)=>`<a href="${K}" target="_blank">${K}</a>`),S.push(P)}this.options={enableCellNavigation:!0,enableColumnReorder:!1,editable:!1,autoEdit:!0,enableAsyncPostRender:!0,frozenColumn:null},this.dataModel=new DataModel(s,{autoupdate:!1}),this.dataModel.setColumns(this.config.param),this.grid=new SlickGrid(this.contentDiv,this.dataModel,S,this.options),this.grid.onHeaderCellRendered.subscribe((F,M)=>{const P=M.column;if(P.editor&&this.mode==="edit"){const H=createEl("i",{classes:["far","fa-edit"],style:{cursor:"pointer"}});M.node.prepend(H),H.addEventListener("click",J=>{J.stopImmediatePropagation(),new EditColumnDialog(this,P.field,P.name,this.__doc__)})}}),this.dataModel.addListener(this.config.id,()=>{this.grid.invalidate()}),this.grid.setColumns(this.grid.getColumns()),this.mode="select",this.grid.setSelectionModel(new RowSelectionModel),this.grid.init(),this.grid.onSort.subscribe((F,M)=>{this._sort(M)}),this.grid.onSelectedRowsChanged.subscribe((F,M)=>{this.mode==="select"&&this._rowsSelected(M)}),this.editIcon=this.addMenuIcon("fas fa-edit","Change To Edit Mode",{func:()=>{this.editIcon.firstElementChild.remove(),this.mode=this.mode==="select"?"edit":"select";const F=this.mode==="select"?["fas","fa-edit"]:["fas","fa-table"];createEl("i",{classes:F},this.editIcon),this.editIcon.setAttribute("aria-label",this.mode==="edit"?"Change To Selection Mode":"Change To Edit Mode"),this._changeMode()}}),this.addMenuIcon("fas fa-download","Download data",{func:()=>{this.downloadData()}}),this.filter=[],this.themeChanged(),this.onDataFiltered(),this.config.sort&&this._sort(this.config.sort)}_sort({columnId:s,sortAsc:f}){this.dataModel.sort(s,f?"asc":"desc"),this.grid.invalidateAllRows(),this.grid.render(),this.config.sort={columnId:s,sortAsc:f}}onDataHighlighted(s){if(s.source===this)return;const f=this.dataModel.data.indexOf(s.indexes[0]);f!==-1&&(this.grid.scrollRowIntoView(f),this.tempMode=this.mode,this.mode="",this.grid.setSelectedRows([f]),this.mode=this.tempMode)}onColumnRemoved(s){if(this.config.param.indexOf(s)===-1)return!1;const f=this.grid.getCellEditor();f&&f.destroy(),this.grid.setActiveCell(null);let _=this.grid.getColumns();return _=_.filter(S=>S.field!==s),this.config.param=this.config.param.filter(S=>S!==s),this.dataModel.setColumns(this.config.param),this.grid.setColumns(_),!1}getConfig(){const s=super.getConfig(),f=this.grid.getColumns();s.param=f.filter(_=>_.field!=="__index__").map(_=>_.field),s.column_widths={};for(const _ of f)_.width!==100&&(s.column_widths[_.field]=_.width);return s}async downloadData(){const s=await this.dataModel.getDataAsBlob(),f=createEl("a",{download:this.dataStore.name,target:"_blank",href:window.URL.createObjectURL(s)},this.__doc__.body);f.click(),f.remove()}_changeMode(){this.mode==="select"?(this.addColumnIcon&&(this.addColumnIcon.remove(),this.addColumnIcon=null),this.selectionModel=new RowSelectionModel,this.grid.setSelectionModel(this.selectionModel),this.overlay&&(this.grid.unregisterPlugin(this.overlay),this.overlay=null),this.grid.setOptions({editable:!1},!0,!0),this.grid.setColumns(this.grid.getColumns())):(this.grid.setSelectedRows([]),this.selectionModel&&(this.grid.setSelectionModel(null),this.selectionModel=null),this.grid.setOptions({editable:!0},!0,!0),this.grid.setColumns(this.grid.getColumns()),this.addColumnIcon=this.addMenuIcon("fas fa-plus","Add Column",{func:s=>{new AddColumnDialog(this)}}),this.overlay=new Overlays({}),this.overlay.onFillUpDown.subscribe((s,f)=>this._updateOverlay(f)),this.grid.registerPlugin(this.overlay))}onDataChanged(s){this.grid.invalidate()}getColumnInfo(){return this.grid.getColumns().filter(s=>s.datatype==="text").map(s=>({name:s.name,field:s.field})).sort((s,f)=>s.name.localeCompare(f.name))}createColumn(s,f=null,_=2){this.dataModel.createColumn(s,f);const S=this.grid.getColumns();_-=1,_<0||_>=S.length&&(_=S.length-1),S.splice(_,0,{name:s,field:s,id:s,datatype:"text",editor:TextEditor,sortable:!0}),this.config.param.push(s),this.grid.setColumns(S),this.grid.invalidate()}_removeColumn(s){this.dataModel.removeColumn(s,!0,!0)}_updateOverlay(s){const f=this.grid.getColumns()[s.range.fromCell];f.editor&&(this.dataModel.updateRange(f.field,s.range.fromRow,s.range.toRow,s.dir),this.grid.invalidate())}_rowsSelected(s){const f=[];for(const _ of s.rows)f.push(this.dataModel.data[_]);this.dataStore.dataHighlighted(f,this)}themeChanged(){}changeBaseDocument(s){super.changeBaseDocument(s),this.grid.setBaseDocument(s),this.mode==="edit"&&(this.grid.unregisterPlugin(this.overlay),this.grid.registerPlugin(this.overlay))}setSize(s,f){super.setSize(s,f),this.grid.resizeCanvas(),this.grid.invalidate()}pinChart(){this.isPinned=!0}unpinChart(){this.isPinned=!1,this.onDataFiltered()}addColumns(){}remove(){this.grid.destroy(),super.remove()}onDataFiltered(){this.isPinned||(this.dataModel.updateModel(),this.config.sort&&this._sort(this.config.sort))}}class EditColumnDialog extends BaseDialog{constructor(s,f,_,S){const T={doc:S,columns:2,width:380,maxHeight:500,title:`Bulk Edit ${_}`};super(T,{table:s,column:f})}init(s){this.col=s.column,this.dataModel=s.table.dataModel,this.table=s.table;const f=createEl("div",{},this.columns[0]);createEl("label",{text:"Value:"},f),this.valInput=createEl("input",{},f),this.valInput.addEventListener("keyup",S=>{const T=S.which;if(T===37||T===39||T===8){S.stopImmediatePropagation();return}const F=this.dataModel.getValueSuggestion(this.valInput.value,this.col);F&&(this.valInput.value=F)});const _=createEl("div",{},this.columns[0]);createEl("label",{text:"Replace With:"},_),this.replaceInput=createEl("input",{},_),this._createButton("Fill All Cells","_all_"),this._createButton("Fill Empty Cells","_blank_"),this._createButton("Replace Value",null),this._createButton("Delete Unused Values","_delete_"),this._createButton("Remove Column","_delete_column_")}_createButton(s,f){const _=createEl("div",{style:{padding:"5px 10px"}},this.columns[1]);createEl("button",{classes:["ciview-button"],text:s},_).addEventListener("click",()=>{const S=f||this.replaceInput.value;S==="_delete_column_"?(this.table._removeColumn(this.col),this.close()):this.dataModel.replaceValues(this.valInput.value,S,this.col)})}}class AddColumnDialog extends BaseDialog{constructor(s,f){const _={doc:f,footer:!0,buttons:[{text:"Add",method:"addColumn"}],width:300,maxHeight:500,title:"Add Column"};super(_,s)}init(s){const f={padding:"5px"};this.table=s;const _=createEl("div",{style:f},this.dialog);createEl("label",{text:"Column Name"},_),this.name=createEl("input",{},_),this.name.addEventListener("keydown",P=>{P.key==="Enter"&&this.addColumn()});const S=createEl("div",{style:f},this.dialog),T=createEl("label",{style:{display:"flex"}},S);this.cloneCheck=createEl("input",{type:"checkbox"},T),createEl("div",{text:"Copy Existing Column"},T);const F=s.getColumnInfo();this.cloneCol=createEl("select",{},S);for(const P of F)createEl("option",{text:P.name,value:P.field},this.cloneCol);const M=createEl("div",{style:f},this.dialog);createEl("label",{text:"Position"},M),this.position=createEl("input",{style:{width:"100px"},value:2},M),setTimeout(()=>this.name.focus(),100)}addColumn(){if(!this.name.value){this.name.focus();return}const s=this.cloneCheck.checked?this.cloneCol.value:null;let f=Number.parseInt(this.position.value);f=Number.isNaN(f)?null:f,this.table.createColumn(this.name.value,s,f),this.close()}}BaseChart.types.table_chart={class:TableChart,name:"Table",params:[{type:"_multi_column:all",name:"Columns To Display"}],extra_controls:()=>[{type:"checkbox",name:"include_index",label:"Include Index"}],init:(d,s,f)=>{d.include_index=f.include_index}};class WGL3DScatterPlot extends WGLChart{constructor(s,f,_){_.title||(_.title=`${s.getColumnName(_.param[0])} x ${s.getColumnName(_.param[1])} x ${s.getColumnName(_.param[2])}`),super(s,f,_,{});const S=this.config;S.axis_scales=S.axis_scales||[1,1,1];const T=S.param;this.dim=this.dataStore.getDimension("range_dimension",T);const F=T.map(oe=>this.dataStore.getColumnRange(oe)),M=Math.max(...F);this.defaultCDistance=M*4,S.brush=S.brush||"default",S.center=S.center||this._calculateCenter(),this.app=new WGL2DI(this.graphDiv,{mode:"3d",brush:S.brush,cameraDistance:this.defaultCDistance,cameraCenter:[-S.center[0]*2,S.center[1]*2,-S.center[2]*2]}),this.app.addHandler("brush_stopped",(oe,se)=>{this.resetButton.style.display="inline",this.app.setFilter(!0),se?this._createPolyFilter(range):this._createFilter(oe)});const P=this.afterAppCreation(),H=this.dataStore.columnIndex[T[0]],J=this.dataStore.columnIndex[T[1]],K=this.dataStore.columnIndex[T[2]];this.app.addCircles({x:H.datatype==="int32"?new Float32Array(H.data):H.data,y:J.datatype==="int32"?new Float32Array(J.data):J.data,z:K.datatype==="int32"?new Float32Array(K.data):K.data,localFilter:this.dim.getLocalFilter(),globalFilter:s.getFilter(),colorFunc:P}),S.radius=S.radius||5,S.opacity=S.opacity||.8,this.app.setPointRadius(S.radius),this.app.setPointOpacity(S.opacity),S.axis_scales=S.axis_scales||[1,1,1],this.app.axisScales=S.axis_scales,this.addAxis(),this.centerGraph(S.camera),this.app.refresh()}setAxisScales(s,f){const _=this.config;this.config.axis_scales[s]=f,_.center=this._calculateCenter(),this.app.setCameraProperty("center",[-_.center[0]*2,_.center[1]*2,-_.center[2]*2]),this.app.refresh()}getSettings(){let s=super.getSettings({pointMax:30,pointMin:1});const f=this.config;return s=s.concat([{type:"slider",max:3,min:.5,doc:this.__doc__,current_value:f.axis_scales[0],label:"X Axis Scale",func:_=>{this.setAxisScales(0,_)}},{type:"slider",max:3,min:.5,doc:this.__doc__,current_value:f.axis_scales[1],label:"Y Axis Scale",func:_=>{this.setAxisScales(1,_)}},{type:"slider",max:3,min:.5,doc:this.__doc__,current_value:f.axis_scales[2],label:"Z Axis Scale",func:_=>{this.setAxisScales(2,_)}}]),s}centerGraph(s){if(s)this.app.setCamera(s.distance,s.theta,s.phi);else{const f=this.config;f.center=this._calculateCenter(),this.app.setCameraProperty("center",[-f.center[0]*2,f.center[1]*2,-f.center[2]*2]),this.app.setCamera(this.defaultCDistance,-1.038,.261),this.app.removeAllLines(),this.addAxis()}}_calculateCenter(){const s=this.config.param.map(T=>this.dataStore.getMinMaxForColumn(T)),f=this.config.axis_scales;return s.map((T,F)=>[T[0]*1,T[1]*1]).map((T,F)=>T[0]+(T[1]-T[0])/2).map((T,F)=>T*f[F])}getConfig(){const s=super.getConfig();return s.camera=this.app.getCameraSettings(),s}_createFilter(s){this.dim.filter("filterOnIndex",[],s)}onDataAdded(s){const f=this.config.param,_=this.getSetupConfig();_.x=this.dataStore.getRawColumn(f[0]),_.y=this.dataStore.getRawColumn(f[1]),_.z=this.dataStore.getRawColumn(f[2]),this.app.updateSize(s,_),super.onDataAdded(s)}addAxis(){const s=this.config.center,f=this.config.axis_scales;for(let _=0;_<3;_++){const S=this.dataStore.getMinMaxForColumn(this.config.param[_]),T=[0,0,0];T[_]=255;const F=s.map((P,H)=>H===_?S[0]:P/f[H]),M=s.map((P,H)=>H===_?S[1]:P/f[H]);this.app.addLine(F,M,T)}}}BaseChart.types.wgl_3d_scatter_plot={name:"3D Scatter Plot",class:WGL3DScatterPlot,params:[{type:"number",name:"X axis"},{type:"number",name:"Y axis"},{type:"number",name:"Z axis"}]};function constant$3(d){return function(){return d}}const abs=Math.abs,atan2=Math.atan2,cos=Math.cos,max$1=Math.max,min$1=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon$2=1e-12,pi$2=Math.PI,halfPi=pi$2/2,tau$2=2*pi$2;function acos(d){return d>1?0:d<-1?pi$2:Math.acos(d)}function asin(d){return d>=1?halfPi:d<=-1?-halfPi:Math.asin(d)}const pi$1=Math.PI,tau$1=2*pi$1,epsilon$1=1e-6,tauEpsilon$1=tau$1-epsilon$1;function append(d){this._+=d[0];for(let s=1,f=d.length;s<f;++s)this._+=arguments[s]+d[s]}function appendRound(d){let s=Math.floor(d);if(!(s>=0))throw new Error(`invalid digits: ${d}`);if(s>15)return append;const f=10**s;return function(_){this._+=_[0];for(let S=1,T=_.length;S<T;++S)this._+=Math.round(arguments[S]*f)/f+_[S]}}let Path$1=class{constructor(s){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=s==null?append:appendRound(s)}moveTo(s,f){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+f}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(s,f){this._append`L${this._x1=+s},${this._y1=+f}`}quadraticCurveTo(s,f,_,S){this._append`Q${+s},${+f},${this._x1=+_},${this._y1=+S}`}bezierCurveTo(s,f,_,S,T,F){this._append`C${+s},${+f},${+_},${+S},${this._x1=+T},${this._y1=+F}`}arcTo(s,f,_,S,T){if(s=+s,f=+f,_=+_,S=+S,T=+T,T<0)throw new Error(`negative radius: ${T}`);let F=this._x1,M=this._y1,P=_-s,H=S-f,J=F-s,K=M-f,oe=J*J+K*K;if(this._x1===null)this._append`M${this._x1=s},${this._y1=f}`;else if(oe>epsilon$1)if(!(Math.abs(K*P-H*J)>epsilon$1)||!T)this._append`L${this._x1=s},${this._y1=f}`;else{let se=_-F,ae=S-M,ge=P*P+H*H,he=se*se+ae*ae,Be=Math.sqrt(ge),pe=Math.sqrt(oe),be=T*Math.tan((pi$1-Math.acos((ge+oe-he)/(2*Be*pe)))/2),Re=be/pe,Fe=be/Be;Math.abs(Re-1)>epsilon$1&&this._append`L${s+Re*J},${f+Re*K}`,this._append`A${T},${T},0,0,${+(K*se>J*ae)},${this._x1=s+Fe*P},${this._y1=f+Fe*H}`}}arc(s,f,_,S,T,F){if(s=+s,f=+f,_=+_,F=!!F,_<0)throw new Error(`negative radius: ${_}`);let M=_*Math.cos(S),P=_*Math.sin(S),H=s+M,J=f+P,K=1^F,oe=F?S-T:T-S;this._x1===null?this._append`M${H},${J}`:(Math.abs(this._x1-H)>epsilon$1||Math.abs(this._y1-J)>epsilon$1)&&this._append`L${H},${J}`,_&&(oe<0&&(oe=oe%tau$1+tau$1),oe>tauEpsilon$1?this._append`A${_},${_},0,1,${K},${s-M},${f-P}A${_},${_},0,1,${K},${this._x1=H},${this._y1=J}`:oe>epsilon$1&&this._append`A${_},${_},0,${+(oe>=pi$1)},${K},${this._x1=s+_*Math.cos(T)},${this._y1=f+_*Math.sin(T)}`)}rect(s,f,_,S){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+f}h${_=+_}v${+S}h${-_}Z`}toString(){return this._}};function withPath(d){let s=3;return d.digits=function(f){if(!arguments.length)return s;if(f==null)s=null;else{const _=Math.floor(f);if(!(_>=0))throw new RangeError(`invalid digits: ${f}`);s=_}return d},()=>new Path$1(s)}function arcInnerRadius(d){return d.innerRadius}function arcOuterRadius(d){return d.outerRadius}function arcStartAngle(d){return d.startAngle}function arcEndAngle(d){return d.endAngle}function arcPadAngle(d){return d&&d.padAngle}function intersect(d,s,f,_,S,T,F,M){var P=f-d,H=_-s,J=F-S,K=M-T,oe=K*P-J*H;if(!(oe*oe<epsilon$2))return oe=(J*(s-T)-K*(d-S))/oe,[d+oe*P,s+oe*H]}function cornerTangents(d,s,f,_,S,T,F){var M=d-f,P=s-_,H=(F?T:-T)/sqrt(M*M+P*P),J=H*P,K=-H*M,oe=d+J,se=s+K,ae=f+J,ge=_+K,he=(oe+ae)/2,Be=(se+ge)/2,pe=ae-oe,be=ge-se,Re=pe*pe+be*be,Fe=S-T,Me=oe*ge-ae*se,ve=(be<0?-1:1)*sqrt(max$1(0,Fe*Fe*Re-Me*Me)),At=(Me*be-pe*ve)/Re,Ct=(-Me*pe-be*ve)/Re,Rt=(Me*be+pe*ve)/Re,It=(-Me*pe+be*ve)/Re,xt=At-he,wt=Ct-Be,Ft=Rt-he,jt=It-Be;return xt*xt+wt*wt>Ft*Ft+jt*jt&&(At=Rt,Ct=It),{cx:At,cy:Ct,x01:-J,y01:-K,x11:At*(S/Fe-1),y11:Ct*(S/Fe-1)}}function arc(){var d=arcInnerRadius,s=arcOuterRadius,f=constant$3(0),_=null,S=arcStartAngle,T=arcEndAngle,F=arcPadAngle,M=null,P=withPath(H);function H(){var J,K,oe=+d.apply(this,arguments),se=+s.apply(this,arguments),ae=S.apply(this,arguments)-halfPi,ge=T.apply(this,arguments)-halfPi,he=abs(ge-ae),Be=ge>ae;if(M||(M=J=P()),se<oe&&(K=se,se=oe,oe=K),!(se>epsilon$2))M.moveTo(0,0);else if(he>tau$2-epsilon$2)M.moveTo(se*cos(ae),se*sin(ae)),M.arc(0,0,se,ae,ge,!Be),oe>epsilon$2&&(M.moveTo(oe*cos(ge),oe*sin(ge)),M.arc(0,0,oe,ge,ae,Be));else{var pe=ae,be=ge,Re=ae,Fe=ge,Me=he,ve=he,At=F.apply(this,arguments)/2,Ct=At>epsilon$2&&(_?+_.apply(this,arguments):sqrt(oe*oe+se*se)),Rt=min$1(abs(se-oe)/2,+f.apply(this,arguments)),It=Rt,xt=Rt,wt,Ft;if(Ct>epsilon$2){var jt=asin(Ct/oe*sin(At)),ta=asin(Ct/se*sin(At));(Me-=jt*2)>epsilon$2?(jt*=Be?1:-1,Re+=jt,Fe-=jt):(Me=0,Re=Fe=(ae+ge)/2),(ve-=ta*2)>epsilon$2?(ta*=Be?1:-1,pe+=ta,be-=ta):(ve=0,pe=be=(ae+ge)/2)}var Qn=se*cos(pe),ca=se*sin(pe),Jn=oe*cos(Fe),wA=oe*sin(Fe);if(Rt>epsilon$2){var LA=se*cos(be),ZA=se*sin(be),xI=oe*cos(Re),cI=oe*sin(Re),pI;if(he<pi$2)if(pI=intersect(Qn,ca,xI,cI,LA,ZA,Jn,wA)){var aI=Qn-pI[0],nI=ca-pI[1],uA=LA-pI[0],aa=ZA-pI[1],eA=1/sin(acos((aI*uA+nI*aa)/(sqrt(aI*aI+nI*nI)*sqrt(uA*uA+aa*aa)))/2),DA=sqrt(pI[0]*pI[0]+pI[1]*pI[1]);It=min$1(Rt,(oe-DA)/(eA-1)),xt=min$1(Rt,(se-DA)/(eA+1))}else It=xt=0}ve>epsilon$2?xt>epsilon$2?(wt=cornerTangents(xI,cI,Qn,ca,se,xt,Be),Ft=cornerTangents(LA,ZA,Jn,wA,se,xt,Be),M.moveTo(wt.cx+wt.x01,wt.cy+wt.y01),xt<Rt?M.arc(wt.cx,wt.cy,xt,atan2(wt.y01,wt.x01),atan2(Ft.y01,Ft.x01),!Be):(M.arc(wt.cx,wt.cy,xt,atan2(wt.y01,wt.x01),atan2(wt.y11,wt.x11),!Be),M.arc(0,0,se,atan2(wt.cy+wt.y11,wt.cx+wt.x11),atan2(Ft.cy+Ft.y11,Ft.cx+Ft.x11),!Be),M.arc(Ft.cx,Ft.cy,xt,atan2(Ft.y11,Ft.x11),atan2(Ft.y01,Ft.x01),!Be))):(M.moveTo(Qn,ca),M.arc(0,0,se,pe,be,!Be)):M.moveTo(Qn,ca),!(oe>epsilon$2)||!(Me>epsilon$2)?M.lineTo(Jn,wA):It>epsilon$2?(wt=cornerTangents(Jn,wA,LA,ZA,oe,-It,Be),Ft=cornerTangents(Qn,ca,xI,cI,oe,-It,Be),M.lineTo(wt.cx+wt.x01,wt.cy+wt.y01),It<Rt?M.arc(wt.cx,wt.cy,It,atan2(wt.y01,wt.x01),atan2(Ft.y01,Ft.x01),!Be):(M.arc(wt.cx,wt.cy,It,atan2(wt.y01,wt.x01),atan2(wt.y11,wt.x11),!Be),M.arc(0,0,oe,atan2(wt.cy+wt.y11,wt.cx+wt.x11),atan2(Ft.cy+Ft.y11,Ft.cx+Ft.x11),Be),M.arc(Ft.cx,Ft.cy,It,atan2(Ft.y11,Ft.x11),atan2(Ft.y01,Ft.x01),!Be))):M.arc(0,0,oe,Fe,Re,Be)}if(M.closePath(),J)return M=null,J+""||null}return H.centroid=function(){var J=(+d.apply(this,arguments)+ +s.apply(this,arguments))/2,K=(+S.apply(this,arguments)+ +T.apply(this,arguments))/2-pi$2/2;return[cos(K)*J,sin(K)*J]},H.innerRadius=function(J){return arguments.length?(d=typeof J=="function"?J:constant$3(+J),H):d},H.outerRadius=function(J){return arguments.length?(s=typeof J=="function"?J:constant$3(+J),H):s},H.cornerRadius=function(J){return arguments.length?(f=typeof J=="function"?J:constant$3(+J),H):f},H.padRadius=function(J){return arguments.length?(_=J==null?null:typeof J=="function"?J:constant$3(+J),H):_},H.startAngle=function(J){return arguments.length?(S=typeof J=="function"?J:constant$3(+J),H):S},H.endAngle=function(J){return arguments.length?(T=typeof J=="function"?J:constant$3(+J),H):T},H.padAngle=function(J){return arguments.length?(F=typeof J=="function"?J:constant$3(+J),H):F},H.context=function(J){return arguments.length?(M=J??null,H):M},H}function array(d){return typeof d=="object"&&"length"in d?d:Array.from(d)}function Linear(d){this._context=d}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(d,s){switch(d=+d,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(d,s):this._context.moveTo(d,s);break;case 1:this._point=2;default:this._context.lineTo(d,s);break}}};function curveLinear(d){return new Linear(d)}function x$2(d){return d[0]}function y$2(d){return d[1]}function line(d,s){var f=constant$3(!0),_=null,S=curveLinear,T=null,F=withPath(M);d=typeof d=="function"?d:d===void 0?x$2:constant$3(d),s=typeof s=="function"?s:s===void 0?y$2:constant$3(s);function M(P){var H,J=(P=array(P)).length,K,oe=!1,se;for(_==null&&(T=S(se=F())),H=0;H<=J;++H)!(H<J&&f(K=P[H],H,P))===oe&&((oe=!oe)?T.lineStart():T.lineEnd()),oe&&T.point(+d(K,H,P),+s(K,H,P));if(se)return T=null,se+""||null}return M.x=function(P){return arguments.length?(d=typeof P=="function"?P:constant$3(+P),M):d},M.y=function(P){return arguments.length?(s=typeof P=="function"?P:constant$3(+P),M):s},M.defined=function(P){return arguments.length?(f=typeof P=="function"?P:constant$3(!!P),M):f},M.curve=function(P){return arguments.length?(S=P,_!=null&&(T=S(_)),M):S},M.context=function(P){return arguments.length?(P==null?_=T=null:T=S(_=P),M):_},M}function area(d,s,f){var _=null,S=constant$3(!0),T=null,F=curveLinear,M=null,P=withPath(H);d=typeof d=="function"?d:d===void 0?x$2:constant$3(+d),s=typeof s=="function"?s:constant$3(s===void 0?0:+s),f=typeof f=="function"?f:f===void 0?y$2:constant$3(+f);function H(K){var oe,se,ae,ge=(K=array(K)).length,he,Be=!1,pe,be=new Array(ge),Re=new Array(ge);for(T==null&&(M=F(pe=P())),oe=0;oe<=ge;++oe){if(!(oe<ge&&S(he=K[oe],oe,K))===Be)if(Be=!Be)se=oe,M.areaStart(),M.lineStart();else{for(M.lineEnd(),M.lineStart(),ae=oe-1;ae>=se;--ae)M.point(be[ae],Re[ae]);M.lineEnd(),M.areaEnd()}Be&&(be[oe]=+d(he,oe,K),Re[oe]=+s(he,oe,K),M.point(_?+_(he,oe,K):be[oe],f?+f(he,oe,K):Re[oe]))}if(pe)return M=null,pe+""||null}function J(){return line().defined(S).curve(F).context(T)}return H.x=function(K){return arguments.length?(d=typeof K=="function"?K:constant$3(+K),_=null,H):d},H.x0=function(K){return arguments.length?(d=typeof K=="function"?K:constant$3(+K),H):d},H.x1=function(K){return arguments.length?(_=K==null?null:typeof K=="function"?K:constant$3(+K),H):_},H.y=function(K){return arguments.length?(s=typeof K=="function"?K:constant$3(+K),f=null,H):s},H.y0=function(K){return arguments.length?(s=typeof K=="function"?K:constant$3(+K),H):s},H.y1=function(K){return arguments.length?(f=K==null?null:typeof K=="function"?K:constant$3(+K),H):f},H.lineX0=H.lineY0=function(){return J().x(d).y(s)},H.lineY1=function(){return J().x(d).y(f)},H.lineX1=function(){return J().x(_).y(s)},H.defined=function(K){return arguments.length?(S=typeof K=="function"?K:constant$3(!!K),H):S},H.curve=function(K){return arguments.length?(F=K,T!=null&&(M=F(T)),H):F},H.context=function(K){return arguments.length?(K==null?T=M=null:M=F(T=K),H):T},H}function descending(d,s){return s<d?-1:s>d?1:s>=d?0:NaN}function identity(d){return d}function pie(){var d=identity,s=descending,f=null,_=constant$3(0),S=constant$3(tau$2),T=constant$3(0);function F(M){var P,H=(M=array(M)).length,J,K,oe=0,se=new Array(H),ae=new Array(H),ge=+_.apply(this,arguments),he=Math.min(tau$2,Math.max(-tau$2,S.apply(this,arguments)-ge)),Be,pe=Math.min(Math.abs(he)/H,T.apply(this,arguments)),be=pe*(he<0?-1:1),Re;for(P=0;P<H;++P)(Re=ae[se[P]=P]=+d(M[P],P,M))>0&&(oe+=Re);for(s!=null?se.sort(function(Fe,Me){return s(ae[Fe],ae[Me])}):f!=null&&se.sort(function(Fe,Me){return f(M[Fe],M[Me])}),P=0,K=oe?(he-H*be)/oe:0;P<H;++P,ge=Be)J=se[P],Re=ae[J],Be=ge+(Re>0?Re*K:0)+be,ae[J]={data:M[J],index:P,value:Re,startAngle:ge,endAngle:Be,padAngle:pe};return ae}return F.value=function(M){return arguments.length?(d=typeof M=="function"?M:constant$3(+M),F):d},F.sortValues=function(M){return arguments.length?(s=M,f=null,F):s},F.sort=function(M){return arguments.length?(f=M,s=null,F):f},F.startAngle=function(M){return arguments.length?(_=typeof M=="function"?M:constant$3(+M),F):_},F.endAngle=function(M){return arguments.length?(S=typeof M=="function"?M:constant$3(+M),F):S},F.padAngle=function(M){return arguments.length?(T=typeof M=="function"?M:constant$3(+M),F):T},F}function point(d,s,f){d._context.bezierCurveTo((2*d._x0+d._x1)/3,(2*d._y0+d._y1)/3,(d._x0+2*d._x1)/3,(d._y0+2*d._y1)/3,(d._x0+4*d._x1+s)/6,(d._y0+4*d._y1+f)/6)}function Basis(d){this._context=d}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(d,s){switch(d=+d,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(d,s):this._context.moveTo(d,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point(this,d,s);break}this._x0=this._x1,this._x1=d,this._y0=this._y1,this._y1=s}};function curveBasis(d){return new Basis(d)}class RingChart extends CategoryChart{constructor(s,f,_){super(s,f,_,{x:{}}),this.config.type="ring_chart",this.pie=pie().sort(null).value(S=>S[0]),this.arc=arc(),this.onDataFiltered(null)}drawChart(s=1e3){select(this.contentDiv).transition().duration(s).ease(linear);const f=this._getContentDimensions(),_=Math.min(f.width,f.height)/2,S=f.left+f.width/2,T=f.top+f.height/2;this.graph_area.attr("transform",`translate(${S},${T})`),this.arc.innerRadius(_*.5).outerRadius(_*.9);const F=Math.floor(_/8),M=this.dataStore.getColumnValues(this.config.param),P=this.dataStore.getColumnColors(this.config.param),H=this.pie(this.rowData.filter(J=>J[0]!==0));this.graph_area.selectAll(".pie-arc").data(H,(J,K)=>{J.data[1]}).join("path").on("click",(J,K)=>{this.filterCategories(M[K.data[1]],J.shiftKey)}).style("fill",(J,K)=>this.filter.length>0&&this.filter.indexOf(M[J.data[1]])===-1?"lightgray":P[J.data[1]]).attr("class","pie-arc").attr("stroke","white").attr("d",this.arc).style("stroke-width","2px"),this.graph_area.selectAll(".pie-text").data(H,(J,K)=>{J.data[1]}).join("text").on("click",(J,K)=>{this.filterCategories(M[K.data[1]],J.shiftKey)}).attr("class","pie-text").text((J,K)=>J.endAngle-J.startAngle>.4?M[J.data[1]]:"").attr("x",J=>this.arc.centroid(J)[0]).attr("font-size",`${F}px`).attr("y",J=>this.arc.centroid(J)[1]).attr("text-anchor","middle").attr("dominant-baseline","central")}}BaseChart.types.ring_chart={class:RingChart,name:"Pie Chart",params:[{type:"text",name:"Category"}]};class TextBoxChart extends BaseChart{constructor(s,f,_){super(s,f,_);const S=this.config;S.text=S.text||"",this.para=createEl("div",{styles:{padding:"5px",overflowY:"auto",maxHeight:"100%"}},this.contentDiv),__vitePreload(async()=>{const{default:T}=await import("../assets/MarkdownText-Bkm5FGkF.js");return{default:T}},[],import.meta.url).then(({default:T})=>{this.render=T,this.para.innerHTML=this.render(S.text)})}getSettings(){const s=super.getSettings(),f=this.config;return s.push({label:"Markdown Text",type:"textbox",current_value:f.text,func:_=>{f.text=_,this.para.innerHTML=this.render(_)}}),s}}BaseChart.types.text_box_chart={class:TextBoxChart,name:"Text Box",params:[],extra_controls:()=>[{type:"textbox",name:"text",label:"Markdown Text:"}],init:(d,s,f)=>{d.text=f.text}};const distances={euclidean:(d,s)=>{let f=0;for(let _=0;_<d.length;_++)f+=(Number.isNaN(s[_])?0:s[_]-d[_])**2;return Math.sqrt(f)},manhattan:(d,s)=>{let f=0;for(let _=0;_<d.length;_++)f+=Math.abs(s[_]-d[_]);return f},max:(d,s)=>{let f=0;for(let _=0;_<d.length;_++)f=Math.max(f,Math.abs(s[_]-d[_]));return f}};class HierarchicalClustering{constructor(s,f,_){this.distance=distances[s],this.distance||(this.distance=distances.euclidean),this.linkage=f||"average",this.threshold=_===void 0?Number.POSITIVE_INFINITY:_}cluster(s,f,_){this.clusters=[],this.dists=[],this.mins=[],this.index=[];for(let F=0;F<s.length;F++){const M={value:s[F],key:F,index:F,size:1};this.clusters[F]=M,this.index[F]=M,this.dists[F]=[],this.mins[F]=0}for(let F=0;F<this.clusters.length;F++)for(let M=0;M<=F;M++){const P=F===M?Number.POSITIVE_INFINITY:this.distance(this.clusters[F].value,this.clusters[M].value);this.dists[F][M]=P,this.dists[M][F]=P,P<this.dists[F][this.mins[F]]&&(this.mins[F]=M)}let S=this.mergeClosest(),T=0;for(;S;)_&&T++%f===0&&_(this.clusters),S=this.mergeClosest();return this.clusters.forEach(F=>{F.key=void 0,F.index=void 0}),this.node_order=[],this.order=0,this.orderClusters(this.clusters[0]),this.clusters}mergeClosest(){let s=0,f=Number.POSITIVE_INFINITY;for(let F=0;F<this.clusters.length;F++){const M=this.clusters[F].key,P=this.dists[M][this.mins[M]];P<f&&(s=M,f=P)}if(f>=this.threshold)return!1;const _=this.index[s],S=this.index[this.mins[s]],T={children:[_,S],key:_.key,size:_.size+S.size};this.clusters[_.index]=T,this.clusters.splice(S.index,1),this.index[_.key]=T;for(let F=0;F<this.clusters.length;F++){const M=this.clusters[F];let P;_.key===M.key?P=Number.POSITIVE_INFINITY:this.linkage==="single"?(P=this.dists[_.key][M.key],this.dists[_.key][M.key]>this.dists[S.key][M.key]&&(P=this.dists[S.key][M.key])):this.linkage==="complete"?(P=this.dists[_.key][M.key],this.dists[_.key][M.key]<this.dists[S.key][M.key]&&(P=this.dists[S.key][M.key])):this.linkage==="average"?P=(this.dists[_.key][M.key]*_.size+this.dists[S.key][M.key]*S.size)/(_.size+S.size):P=this.distance(M.value,_.value),this.dists[_.key][M.key]=this.dists[M.key][_.key]=P}for(let F=0;F<this.clusters.length;F++){const M=this.clusters[F].key;if(this.mins[M]===_.key||this.mins[M]===S.key){let P=M;for(let H=0;H<this.clusters.length;H++){const J=this.clusters[H].key;this.dists[M][J]<this.dists[M][P]&&(P=J)}this.mins[M]=P}this.clusters[F].index=F}return _.key=void 0,S.key=void 0,_.index=void 0,S.index=void 0,!0}orderClusters(s){for(const f in s)f==="children"&&(this.orderClusters(s[f][0]),this.orderClusters(s[f][1])),f==="value"&&(s[f]._order=this.order++,this.node_order.push(s[f]._id))}}function getHierarchicalNodes(d,s={}){const f=new HierarchicalClustering(s.distance,s.linkage,s.threshold);f.cluster(d);try{const _=hierarchy(f.clusters[0]);for(const S of _.descendants()){const T=S.data;T.size=void 0,T.value&&(T.id=T.value._id,T.order=T.value._order,T.value=void 0)}return{nodes:_,order:f.node_order}}catch(_){return console.error(_),{nodes:{children:[],data:{children:[]},depth:0,height:0,parent:null},order:[]}}}function parseNewick(d){let s=0;const f=/([^:;,()\s]*)(?:\s*:\s*([\d.]+)\s*)?([,);])|(\S)/g,_=`${d};`,S=function T(F=-1){const M=[];let P,H,J,K,oe,se=s++;if([oe,P,H,J,K]=f.exec(_),K==="("){for(;"(,".includes(K);)[node,K]=T(se),M.push(node);[oe,P,H,J,K]=f.exec(_)}return[{id:se,name:P,length:+H,parentid:F,children:M},J]}()[0];return hierarchy(S)}function forceCenter(d,s){var f,_=1;d==null&&(d=0),s==null&&(s=0);function S(){var T,F=f.length,M,P=0,H=0;for(T=0;T<F;++T)M=f[T],P+=M.x,H+=M.y;for(P=(P/F-d)*_,H=(H/F-s)*_,T=0;T<F;++T)M=f[T],M.x-=P,M.y-=H}return S.initialize=function(T){f=T},S.x=function(T){return arguments.length?(d=+T,S):d},S.y=function(T){return arguments.length?(s=+T,S):s},S.strength=function(T){return arguments.length?(_=+T,S):_},S}function tree_add(d){const s=+this._x.call(null,d),f=+this._y.call(null,d);return add(this.cover(s,f),s,f,d)}function add(d,s,f,_){if(isNaN(s)||isNaN(f))return d;var S,T=d._root,F={data:_},M=d._x0,P=d._y0,H=d._x1,J=d._y1,K,oe,se,ae,ge,he,Be,pe;if(!T)return d._root=F,d;for(;T.length;)if((ge=s>=(K=(M+H)/2))?M=K:H=K,(he=f>=(oe=(P+J)/2))?P=oe:J=oe,S=T,!(T=T[Be=he<<1|ge]))return S[Be]=F,d;if(se=+d._x.call(null,T.data),ae=+d._y.call(null,T.data),s===se&&f===ae)return F.next=T,S?S[Be]=F:d._root=F,d;do S=S?S[Be]=new Array(4):d._root=new Array(4),(ge=s>=(K=(M+H)/2))?M=K:H=K,(he=f>=(oe=(P+J)/2))?P=oe:J=oe;while((Be=he<<1|ge)===(pe=(ae>=oe)<<1|se>=K));return S[pe]=T,S[Be]=F,d}function addAll(d){var s,f,_=d.length,S,T,F=new Array(_),M=new Array(_),P=1/0,H=1/0,J=-1/0,K=-1/0;for(f=0;f<_;++f)isNaN(S=+this._x.call(null,s=d[f]))||isNaN(T=+this._y.call(null,s))||(F[f]=S,M[f]=T,S<P&&(P=S),S>J&&(J=S),T<H&&(H=T),T>K&&(K=T));if(P>J||H>K)return this;for(this.cover(P,H).cover(J,K),f=0;f<_;++f)add(this,F[f],M[f],d[f]);return this}function tree_cover(d,s){if(isNaN(d=+d)||isNaN(s=+s))return this;var f=this._x0,_=this._y0,S=this._x1,T=this._y1;if(isNaN(f))S=(f=Math.floor(d))+1,T=(_=Math.floor(s))+1;else{for(var F=S-f||1,M=this._root,P,H;f>d||d>=S||_>s||s>=T;)switch(H=(s<_)<<1|d<f,P=new Array(4),P[H]=M,M=P,F*=2,H){case 0:S=f+F,T=_+F;break;case 1:f=S-F,T=_+F;break;case 2:S=f+F,_=T-F;break;case 3:f=S-F,_=T-F;break}this._root&&this._root.length&&(this._root=M)}return this._x0=f,this._y0=_,this._x1=S,this._y1=T,this}function tree_data(){var d=[];return this.visit(function(s){if(!s.length)do d.push(s.data);while(s=s.next)}),d}function tree_extent(d){return arguments.length?this.cover(+d[0][0],+d[0][1]).cover(+d[1][0],+d[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(d,s,f,_,S){this.node=d,this.x0=s,this.y0=f,this.x1=_,this.y1=S}function tree_find(d,s,f){var _,S=this._x0,T=this._y0,F,M,P,H,J=this._x1,K=this._y1,oe=[],se=this._root,ae,ge;for(se&&oe.push(new Quad(se,S,T,J,K)),f==null?f=1/0:(S=d-f,T=s-f,J=d+f,K=s+f,f*=f);ae=oe.pop();)if(!(!(se=ae.node)||(F=ae.x0)>J||(M=ae.y0)>K||(P=ae.x1)<S||(H=ae.y1)<T))if(se.length){var he=(F+P)/2,Be=(M+H)/2;oe.push(new Quad(se[3],he,Be,P,H),new Quad(se[2],F,Be,he,H),new Quad(se[1],he,M,P,Be),new Quad(se[0],F,M,he,Be)),(ge=(s>=Be)<<1|d>=he)&&(ae=oe[oe.length-1],oe[oe.length-1]=oe[oe.length-1-ge],oe[oe.length-1-ge]=ae)}else{var pe=d-+this._x.call(null,se.data),be=s-+this._y.call(null,se.data),Re=pe*pe+be*be;if(Re<f){var Fe=Math.sqrt(f=Re);S=d-Fe,T=s-Fe,J=d+Fe,K=s+Fe,_=se.data}}return _}function tree_remove(d){if(isNaN(J=+this._x.call(null,d))||isNaN(K=+this._y.call(null,d)))return this;var s,f=this._root,_,S,T,F=this._x0,M=this._y0,P=this._x1,H=this._y1,J,K,oe,se,ae,ge,he,Be;if(!f)return this;if(f.length)for(;;){if((ae=J>=(oe=(F+P)/2))?F=oe:P=oe,(ge=K>=(se=(M+H)/2))?M=se:H=se,s=f,!(f=f[he=ge<<1|ae]))return this;if(!f.length)break;(s[he+1&3]||s[he+2&3]||s[he+3&3])&&(_=s,Be=he)}for(;f.data!==d;)if(S=f,!(f=f.next))return this;return(T=f.next)&&delete f.next,S?(T?S.next=T:delete S.next,this):s?(T?s[he]=T:delete s[he],(f=s[0]||s[1]||s[2]||s[3])&&f===(s[3]||s[2]||s[1]||s[0])&&!f.length&&(_?_[Be]=f:this._root=f),this):(this._root=T,this)}function removeAll(d){for(var s=0,f=d.length;s<f;++s)this.remove(d[s]);return this}function tree_root(){return this._root}function tree_size(){var d=0;return this.visit(function(s){if(!s.length)do++d;while(s=s.next)}),d}function tree_visit(d){var s=[],f,_=this._root,S,T,F,M,P;for(_&&s.push(new Quad(_,this._x0,this._y0,this._x1,this._y1));f=s.pop();)if(!d(_=f.node,T=f.x0,F=f.y0,M=f.x1,P=f.y1)&&_.length){var H=(T+M)/2,J=(F+P)/2;(S=_[3])&&s.push(new Quad(S,H,J,M,P)),(S=_[2])&&s.push(new Quad(S,T,J,H,P)),(S=_[1])&&s.push(new Quad(S,H,F,M,J)),(S=_[0])&&s.push(new Quad(S,T,F,H,J))}return this}function tree_visitAfter(d){var s=[],f=[],_;for(this._root&&s.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));_=s.pop();){var S=_.node;if(S.length){var T,F=_.x0,M=_.y0,P=_.x1,H=_.y1,J=(F+P)/2,K=(M+H)/2;(T=S[0])&&s.push(new Quad(T,F,M,J,K)),(T=S[1])&&s.push(new Quad(T,J,M,P,K)),(T=S[2])&&s.push(new Quad(T,F,K,J,H)),(T=S[3])&&s.push(new Quad(T,J,K,P,H))}f.push(_)}for(;_=f.pop();)d(_.node,_.x0,_.y0,_.x1,_.y1);return this}function defaultX(d){return d[0]}function tree_x(d){return arguments.length?(this._x=d,this):this._x}function defaultY(d){return d[1]}function tree_y(d){return arguments.length?(this._y=d,this):this._y}function quadtree(d,s,f){var _=new Quadtree(s??defaultX,f??defaultY,NaN,NaN,NaN,NaN);return d==null?_:_.addAll(d)}function Quadtree(d,s,f,_,S,T){this._x=d,this._y=s,this._x0=f,this._y0=_,this._x1=S,this._y1=T,this._root=void 0}function leaf_copy(d){for(var s={data:d.data},f=s;d=d.next;)f=f.next={data:d.data};return s}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var d=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),s=this._root,f,_;if(!s)return d;if(!s.length)return d._root=leaf_copy(s),d;for(f=[{source:s,target:d._root=new Array(4)}];s=f.pop();)for(var S=0;S<4;++S)(_=s.source[S])&&(_.length?f.push({source:_,target:s.target[S]=new Array(4)}):s.target[S]=leaf_copy(_));return d};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function constant$2(d){return function(){return d}}function jiggle(d){return(d()-.5)*1e-6}function index(d){return d.index}function find$1(d,s){var f=d.get(s);if(!f)throw new Error("node not found: "+s);return f}function forceLink(d){var s=index,f=K,_,S=constant$2(30),T,F,M,P,H,J=1;d==null&&(d=[]);function K(he){return 1/Math.min(M[he.source.index],M[he.target.index])}function oe(he){for(var Be=0,pe=d.length;Be<J;++Be)for(var be=0,Re,Fe,Me,ve,At,Ct,Rt;be<pe;++be)Re=d[be],Fe=Re.source,Me=Re.target,ve=Me.x+Me.vx-Fe.x-Fe.vx||jiggle(H),At=Me.y+Me.vy-Fe.y-Fe.vy||jiggle(H),Ct=Math.sqrt(ve*ve+At*At),Ct=(Ct-T[be])/Ct*he*_[be],ve*=Ct,At*=Ct,Me.vx-=ve*(Rt=P[be]),Me.vy-=At*Rt,Fe.vx+=ve*(Rt=1-Rt),Fe.vy+=At*Rt}function se(){if(F){var he,Be=F.length,pe=d.length,be=new Map(F.map((Fe,Me)=>[s(Fe,Me,F),Fe])),Re;for(he=0,M=new Array(Be);he<pe;++he)Re=d[he],Re.index=he,typeof Re.source!="object"&&(Re.source=find$1(be,Re.source)),typeof Re.target!="object"&&(Re.target=find$1(be,Re.target)),M[Re.source.index]=(M[Re.source.index]||0)+1,M[Re.target.index]=(M[Re.target.index]||0)+1;for(he=0,P=new Array(pe);he<pe;++he)Re=d[he],P[he]=M[Re.source.index]/(M[Re.source.index]+M[Re.target.index]);_=new Array(pe),ae(),T=new Array(pe),ge()}}function ae(){if(F)for(var he=0,Be=d.length;he<Be;++he)_[he]=+f(d[he],he,d)}function ge(){if(F)for(var he=0,Be=d.length;he<Be;++he)T[he]=+S(d[he],he,d)}return oe.initialize=function(he,Be){F=he,H=Be,se()},oe.links=function(he){return arguments.length?(d=he,se(),oe):d},oe.id=function(he){return arguments.length?(s=he,oe):s},oe.iterations=function(he){return arguments.length?(J=+he,oe):J},oe.strength=function(he){return arguments.length?(f=typeof he=="function"?he:constant$2(+he),ae(),oe):f},oe.distance=function(he){return arguments.length?(S=typeof he=="function"?he:constant$2(+he),ge(),oe):S},oe}const a=1664525,c$1=1013904223,m=4294967296;function lcg(){let d=1;return()=>(d=(a*d+c$1)%m)/m}function x$1(d){return d.x}function y$1(d){return d.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function forceSimulation(d){var s,f=1,_=.001,S=1-Math.pow(_,1/300),T=0,F=.6,M=new Map,P=timer(K),H=dispatch("tick","end"),J=lcg();d==null&&(d=[]);function K(){oe(),H.call("tick",s),f<_&&(P.stop(),H.call("end",s))}function oe(ge){var he,Be=d.length,pe;ge===void 0&&(ge=1);for(var be=0;be<ge;++be)for(f+=(T-f)*S,M.forEach(function(Re){Re(f)}),he=0;he<Be;++he)pe=d[he],pe.fx==null?pe.x+=pe.vx*=F:(pe.x=pe.fx,pe.vx=0),pe.fy==null?pe.y+=pe.vy*=F:(pe.y=pe.fy,pe.vy=0);return s}function se(){for(var ge=0,he=d.length,Be;ge<he;++ge){if(Be=d[ge],Be.index=ge,Be.fx!=null&&(Be.x=Be.fx),Be.fy!=null&&(Be.y=Be.fy),isNaN(Be.x)||isNaN(Be.y)){var pe=initialRadius*Math.sqrt(.5+ge),be=ge*initialAngle;Be.x=pe*Math.cos(be),Be.y=pe*Math.sin(be)}(isNaN(Be.vx)||isNaN(Be.vy))&&(Be.vx=Be.vy=0)}}function ae(ge){return ge.initialize&&ge.initialize(d,J),ge}return se(),s={tick:oe,restart:function(){return P.restart(K),s},stop:function(){return P.stop(),s},nodes:function(ge){return arguments.length?(d=ge,se(),M.forEach(ae),s):d},alpha:function(ge){return arguments.length?(f=+ge,s):f},alphaMin:function(ge){return arguments.length?(_=+ge,s):_},alphaDecay:function(ge){return arguments.length?(S=+ge,s):+S},alphaTarget:function(ge){return arguments.length?(T=+ge,s):T},velocityDecay:function(ge){return arguments.length?(F=1-ge,s):1-F},randomSource:function(ge){return arguments.length?(J=ge,M.forEach(ae),s):J},force:function(ge,he){return arguments.length>1?(he==null?M.delete(ge):M.set(ge,ae(he)),s):M.get(ge)},find:function(ge,he,Be){var pe=0,be=d.length,Re,Fe,Me,ve,At;for(Be==null?Be=1/0:Be*=Be,pe=0;pe<be;++pe)ve=d[pe],Re=ge-ve.x,Fe=he-ve.y,Me=Re*Re+Fe*Fe,Me<Be&&(At=ve,Be=Me);return At},on:function(ge,he){return arguments.length>1?(H.on(ge,he),s):H.on(ge)}}}function forceManyBody(){var d,s,f,_,S=constant$2(-30),T,F=1,M=1/0,P=.81;function H(se){var ae,ge=d.length,he=quadtree(d,x$1,y$1).visitAfter(K);for(_=se,ae=0;ae<ge;++ae)s=d[ae],he.visit(oe)}function J(){if(d){var se,ae=d.length,ge;for(T=new Array(ae),se=0;se<ae;++se)ge=d[se],T[ge.index]=+S(ge,se,d)}}function K(se){var ae=0,ge,he,Be=0,pe,be,Re;if(se.length){for(pe=be=Re=0;Re<4;++Re)(ge=se[Re])&&(he=Math.abs(ge.value))&&(ae+=ge.value,Be+=he,pe+=he*ge.x,be+=he*ge.y);se.x=pe/Be,se.y=be/Be}else{ge=se,ge.x=ge.data.x,ge.y=ge.data.y;do ae+=T[ge.data.index];while(ge=ge.next)}se.value=ae}function oe(se,ae,ge,he){if(!se.value)return!0;var Be=se.x-s.x,pe=se.y-s.y,be=he-ae,Re=Be*Be+pe*pe;if(be*be/P<Re)return Re<M&&(Be===0&&(Be=jiggle(f),Re+=Be*Be),pe===0&&(pe=jiggle(f),Re+=pe*pe),Re<F&&(Re=Math.sqrt(F*Re)),s.vx+=Be*se.value*_/Re,s.vy+=pe*se.value*_/Re),!0;if(se.length||Re>=M)return;(se.data!==s||se.next)&&(Be===0&&(Be=jiggle(f),Re+=Be*Be),pe===0&&(pe=jiggle(f),Re+=pe*pe),Re<F&&(Re=Math.sqrt(F*Re)));do se.data!==s&&(be=T[se.data.index]*_/Re,s.vx+=Be*be,s.vy+=pe*be);while(se=se.next)}return H.initialize=function(se,ae){d=se,f=ae,J()},H.strength=function(se){return arguments.length?(S=typeof se=="function"?se:constant$2(+se),J(),H):S},H.distanceMin=function(se){return arguments.length?(F=se*se,H):Math.sqrt(F)},H.distanceMax=function(se){return arguments.length?(M=se*se,H):Math.sqrt(M)},H.theta=function(se){return arguments.length?(P=se*se,H):Math.sqrt(P)},H}function colors(d){for(var s=d.length/6|0,f=new Array(s),_=0;_<s;)f[_]="#"+d.slice(_*6,++_*6);return f}const ramp=d=>rgbBasis(d[d.length-1]);var scheme=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors);ramp(scheme);function Transform(d,s,f){this.k=d,this.x=s,this.y=f}Transform.prototype={constructor:Transform,scale:function(d){return d===1?this:new Transform(this.k*d,this.x,this.y)},translate:function(d,s){return d===0&s===0?this:new Transform(this.k,this.x+this.k*d,this.y+this.k*s)},apply:function(d){return[d[0]*this.k+this.x,d[1]*this.k+this.y]},applyX:function(d){return d*this.k+this.x},applyY:function(d){return d*this.k+this.y},invert:function(d){return[(d[0]-this.x)/this.k,(d[1]-this.y)/this.k]},invertX:function(d){return(d-this.x)/this.k},invertY:function(d){return(d-this.y)/this.k},rescaleX:function(d){return d.copy().domain(d.range().map(this.invertX,this).map(d.invert,d))},rescaleY:function(d){return d.copy().domain(d.range().map(this.invertY,this).map(d.invert,d))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform.prototype;class HeatMap extends SVGChart{constructor(s,f,_){_.title=_.title||s.getColumnName(_.param[0]),super(s,f,_,{x:{type:"band"},y:{type:"band"},tx:{custom:!0,size:45}});const S=this.config.param,T=this.dataStore.getColumnValues(S[0]);this.x_scale.domain(T.slice(0));const F=[],M=this.config;M.method=M.method||"mean",M.color_scale=M.color_scale||{log:!1},M.color_legend||(M.color_legend={display:!0}),this.setColorFunction();for(let P=1;P<S.length;P++)F.push(this.dataStore.getColumnName(S[P]));this.cat_scale=linear$1().range([0,40]),this.cat_axis_svg=this.svg.append("g"),this.cat_axis_call=axisLeft(this.cat_scale).ticks(3),this.y_scale.domain(F),this.dim=this.dataStore.getDimension("catcol_dimension"),M.cluster_rows&&(this.margins.right=70),this.addToolTip(),this.onDataFiltered()}remove(s=!0){this.dim.destroy(s),super.remove()}getChartData(){const s=this.data.transpose,f=new Array(s.length+1),_=this.dataStore.getColumnName(this.config.param[0]),S=this.config.param.slice(1).map(F=>this.dataStore.getColumnName(F));f[0]=[_].concat(S).join("	");const T=this.dataStore.getColumnValues(this.config.param[0]);for(let F=0;F<s.length;F++)f[F+1]=[T[s[F]._id]].concat(s[F]).join("	");return new Blob([f.join(`
`)],{type:"text/plain"})}setColorFunction(){const s=this.config.param,f={useValue:!0,overideValues:{colorLogScale:this.config.color_scale.log,colors:["#313695","#4575B4","#74ADD1","#ABD9E9","#E0F3F8","#E0F3F8","#FFFFBF","#FEE090","#FDAE61","#F46D43","#D73027","#A50026"],max:1,min:0}};this.colorFunction=this.dataStore.getColorFunction(s[1],f),this.setColorLegend()}getColorLegend(){const f={overideValues:{max:1,min:0,colorLogScale:this.config.color_scale.log,colors:["#313695","#4575B4","#74ADD1","#ABD9E9","#E0F3F8","#E0F3F8","#FFFFBF","#FEE090","#FDAE61","#F46D43","#D73027","#A50026"]},name:"Scale"};return this.dataStore.getColorLegend(this.config.param[1],f)}onDataFiltered(s){if(this.dim===s||this.isPinned)return;s==="all_removed"&&(this.filter=[],this.resetButton.style.display="none");const f={method:this.config.method,scaleVals:[]},_=this.config.param,S=this.config.color_scale.trim==="none"?null:this.config.color_scale.trim;for(let T=1;T<_.length;T++){const F=this.dataStore.columnIndex[_[T]];f.scaleVals.push([S?F.quantiles[S][0]:F.minMax[0],S?F.quantiles[S][1]:F.minMax[1]])}this.dim.getAverages(T=>{this.data=T;try{this.clusterRows(),this.clusterColumns(),this.drawChart()}catch(F){console.error("Error drawing heatmap:",F)}},this.config.param,f)}clusterRows(){this.config.cluster_rows?(this.rowClusterNodes=getHierarchicalNodes(this.data.averages),this.data.averages.sort((s,f)=>s._order-f._order),this.margins.right=70,this.y_scale.domain(this.rowClusterNodes.order.map(s=>this.dataStore.getColumnName(this.config.param[s+1])))):(this.rowClusterNodes=void 0,this.y_scale.domain(this.config.param.slice(1).map(s=>this.dataStore.getColumnName(s))),this.margins.right=10,this.data.averages.sort((s,f)=>s._id-f._id),this.ry_axis_svg.selectAll("*").remove())}clusterColumns(){const s=this.dataStore.getColumnValues(this.config.param[0]);this.config.cluster_columns?(this.columnClusterNodes=getHierarchicalNodes(this.data.transpose),this.data.transpose.sort((f,_)=>f._order-_._order),this.x_scale.domain(this.columnClusterNodes.order.map(f=>s[f])),this.setAxisSize("tx",85)):(this.columnClusterNodes=void 0,this.x_scale.domain(this.data.transpose.map(f=>s[f._id])),this.setAxisSize("tx",45),this.data.transpose.sort((f,_)=>f._id-_._id),this.x_scale.domain(this.data.transpose.map(f=>s[f._id])),this.tx_axis_svg.selectAll("path").remove())}drawChart(s=400){const f=select(this.contentDiv).transition().duration(s).ease(linear),_=this.dataStore.getColumnValues(this.config.param[0]),S=this.dataStore.getColumnColors(this.config.param[0]),T=this._getContentDimensions(),F=T.width/this.data.transpose.length,M=F/2,P=Math.max(...this.data.catTotals),H=40;this.cat_scale.domain([P,0]);const J=P===0?0:40/P,K=this.data.transpose.map(ae=>[this.data.catTotals[ae._id],ae._id]),oe=T.height/(this.config.param.length-1);this.graph_area.selectAll(".heatmap-row").data(this.data.averages).join("g").attr("transform",(ae,ge)=>`translate(0,${ge*oe})`).attr("class","heatmap-row").selectAll(".heatmap-rect").data(ae=>ae.map((ge,he)=>{const Be=ae._id,pe=this.data.transpose[he]._id;return{av:this.data.transpose[he][Be],row_id:Be,col_id:pe,miss:!1}})).join("rect").attr("class","heatmap-rect").attr("x",(ae,ge)=>ge*F).attr("height",oe).attr("width",F).on("click",(ae,ge)=>{const he=this.config.param[ge.row_id+1];this._callListeners("cell_clicked",{row:he,col:_[ge.col_id],val:ge.av})}).on("mouseover pointermove",(ae,ge)=>{const he=this.dataStore.columnIndex[this.config.param[ge.row_id+1]].name;this.showToolTip(ae,`${_[ge.col_id]}<br>${he}<br>${ge.av.toPrecision(2)}`)}).on("mouseleave",()=>{this.hideToolTip()}).transition(f).attr("fill",(ae,ge)=>ae.miss?"#DCDCDC":this.colorFunction(ae.av));const se=select(this.contentDiv).transition().duration(s).ease(linear);this.tx_axis_svg.selectAll(".heatmap-catsize").data(K,(ae,ge)=>ae[1]).join(ae=>ae.append("rect").attr("class","heatmap-catsize").attr("height",0).attr("y",45).attr("x",(ge,he)=>M/2+he*F).attr("width",M),ae=>ae,ae=>ae.call(ge=>ge.transition(se).attr("height",0).attr("y",45).remove())).transition(se).attr("y",ae=>H-ae[0]*J+5).attr("height",ae=>ae[0]*J).attr("fill",(ae,ge)=>S[ae[1]]).attr("width",M).attr("x",(ae,ge)=>M/2+ge*F),this.cat_axis_svg.attr("transform",`translate(${T.left},5)`),this.cat_axis_svg.transition().call(this.cat_axis_call),this.updateAxis(),this.rowClusterNodes&&this.drawYTree(this.rowClusterNodes.nodes,this.config.param.length-1),this.columnClusterNodes&&this.drawXTree(this.columnClusterNodes.nodes,this.data.transpose.length,40,45)}setSize(s,f){super.setSize(s,f),this.drawChart()}getSettings(){const s=this.config;return super.getSettings().concat([{type:"check",label:"Cluster Rows",current_value:s.cluster_rows,func:_=>{s.cluster_rows=_,this.clusterRows(),this.drawChart()}},{type:"check",label:"Cluster Columns",current_value:s.cluster_columns,func:_=>{s.cluster_columns=_,this.clusterColumns(),this.drawChart()}},{type:"radiobuttons",label:"Averaging Method",current_value:s.method,choices:[["Mean","mean"],["Median","median"]],func:_=>{s.method=_,this.onDataFiltered()}},{type:"radiobuttons",label:"Trim to Percentile",current_value:s.color_scale.trim||"none",choices:[["No Trim","none"],["0.001","0.001"],["0.01","0.01"],["0.05","0.05"]],func:_=>{s.color_scale.trim=_,this.onDataFiltered()}},{label:"Show Color Legend",type:"check",current_value:s.color_legend?s.color_legend.display:!0,func:_=>{s.color_legend.display=_,this.setColorLegend()}},{type:"check",label:"Log Color Scale",current_value:s.color_scale.log,func:_=>{s.color_scale.log=_,this.setColorFunction(),this.drawChart()}}])}}BaseChart.types.heat_map={name:"Heat Map",class:HeatMap,params:[{type:"text",name:"Categories on x-axis"},{type:"_multi_column:number",name:"Fields on y axis"}]};class ViolinPlot extends WGLChart{constructor(s,f,_){const S=s.getColumnName(_.param[0]),T=s.getColumnName(_.param[1]);_.axis||(_.axis={x:{size:30,label:S,textsize:13},y:{size:45,label:T,textsize:13}}),_.title||(_.title=`${S} x ${T}`),super(s,f,_,{x:{type:"band"},y:{}}),this.config.type="violin_plot";const F=this.config;F.brush=F.brush||"poly";const M={brush:F.brush};this.app=new WGL2DI(this.graphDiv,M);const P=this.afterAppCreation(),H=this.dataStore.size;this.xPosBuff=new SharedArrayBuffer(H*4),this.xPos=new Float32Array(this.xPosBuff),this.values=this.dataStore.getColumnValues(F.param[0]);const J=this.dataStore.getRawColumn(F.param[0]);for(let se=0;se<H;se++)this.xPos[se]=J[se]*50+4+Math.random()*42;const K=this.dataStore.getMinMaxForColumn(F.param[1]);this.defaultBandWidth=(K[1]-K[0])/100,F.band_width=F.band_width||this.defaultBandWidth,F.intervals=F.intervals||20,this.dim=this.dataStore.getDimension("catrange_dimension"),this.x_scale.domain(this.values);const oe=this.dataStore.columnIndex[F.param[1]];this.app.addCircles({x:this.xPos,y:oe.datatype==="int32"?new Float32Array(oe.data):oe.data,localFilter:this.dim.getLocalFilter(),globalFilter:this.dataStore.getFilter(),colorFunc:P}),this.app.addHandler("brush_stopped",(se,ae)=>{this.resetButton.style.display="inline",this.app.setFilter(!0),ae?this._createPolyFilter(se):this._createFilter(se)}),F.radius=F.radius||5,F.opacity=F.opacity||.8,this.app.setPointRadius(this.config.radius),this.app.setPointOpacity(this.config.opacity),this.data=[],this.centerGraph(),this.onDataFiltered()}_createFilter(s){if(this.range=s,s==null)this.dim.removeFilter();else{const f=s.y_max,_=s.y_min,S=s.x_max,T=s.x_min;this.filter=[[T,S],[_,f]],this.dim("filterSquare",[this.xPos,this.config.param[1]],{range1:this.filter[0],range2:this.filter[1]},[this.xPos,1]),this.app.refresh()}}onDataFiltered(s){if(!this.isPinned&&s!==this.dim){s==="all_removed"&&(this.app.clearBrush(),this.app.setFilter(!1),this.resetButton.style.display="none");const f=this.config;this.ticks=this.y_scale.ticks(f.intervals),this.dim.getKernalDensity(_=>{this.data=_,this.drawChart()},f.param,{ticks:this.ticks,bandwidth:f.band_width,intervals:f.intervals,xPos:this.xPosBuff})}}drawChart(){const s=select(this.contentDiv).transition().duration(400).ease(linear),f=[],_=this.data.length,S=this._getContentDimensions(),T=S.width/_,F=[];for(let K=0;K<this.data.length;K++)f.push(T/(2*this.data[K].max)*.9),F.push(this.values[this.data[K].id]);this.x_scale.domain(F),this.centerGraph();const M=this.ticks.map(K=>this.y_scale(K)),P=[];for(let K=0;K<this.data.length;K++){const oe=K*T+.5*T,se=[];let ae=!0;for(let ge=0;ge<this.data[K].length;ge++){const he=this.data[K][ge];if(he===0||Number.isNaN(he)){if(!ae){if(se[se.length-1][2]===0)continue;se.push([M[ge],oe,0])}continue}if(se.length===0){if(ge===0){se.push([0,oe,0]);continue}se.push([M[ge-1],oe,0]),ae=!1}se.push([M[ge],oe,f[K]*he])}se.length===0?(se.push([0,oe,0]),se.push([0,oe,0])):se[se.length-1][2]!==0&&se.push([S.height,oe,0]),P.push(se),se.id=this.data[K].id}const H=this.dataStore.getColumnColors(this.config.param[0]);this.graph_area.selectAll(".violin-curve").data(P,K=>`A${K.id}`).join("path").attr("class","violin-curve").transition(s).attr("fill","none").attr("stroke",(K,oe)=>H[K.id]).attr("stroke-width",2).attr("stroke-linejoin","round").attr("d",line().curve(curveBasis).x((K,oe)=>K[1]+K[2]).y((K,oe)=>K[0])),this.graph_area.selectAll(".violin-curve1").data(P,K=>`B${K.id}`).join("path").attr("class","violin-curve1").transition(s).attr("fill","none").attr("stroke",(K,oe)=>H[K.id]).attr("stroke-width",2).attr("stroke-linejoin","round").attr("d",line().curve(curveBasis).x((K,oe)=>K[1]-K[2]).y((K,oe)=>K[0])),this.app.refresh()}unpinChart(){super.unpinChart(),this.onDataFiltered()}onDataAdded(s){const f=this.config.param,_=this.getSetupConfig(),S=new Float32Array(s);S.set(this.xPos),this.values=this.dataStore.getColumnValues(f[0]);const T=this.dataStore.getRawColumn(f[0]);for(let F=this.xPos.length;F<s;F++)S[F]=T[F]*50+4+Math.random()*42;this.xPos=S,_.x=S,_.y=this.dataStore.getRawColumn(f[1]),this.dim.filterColumns&&(this.dimFilterColumns[0]=S),this.app.updateSize(s,_),super.onDataAdded(s)}setSize(s,f){super.setSize(s,f),this.drawChart()}centerGraph(){const s=this.dataStore.getMinMaxForColumn(this.config.param[1]),f=this.data.length*50,_=s[1],S=0,T=s[0],F=(_-T)/20,M=f-S,P=_-T+2*F,H=this._getContentDimensions();this.app.x_scale=H.width/M,this.app.y_scale=H.height/P,this.app.offset[0]=-S,this.app.offset[1]=_+F,this._updateScale(this.app.getRange()),this.updateAxis()}_updateScale(s){this.y_scale.domain([-s.y_range[0],-s.y_range[1]])}getSettings(){const s=super.getSettings(),f=this.config,_=this.dataStore.getMinMaxForColumn(f.param[1]);return s.splice(1,0,{type:"slider",max:_[1]/10,min:_[0]<0?0:_[0],doc:this.__doc__,current_value:f.band_width,label:"Band Width",func:S=>{f.band_width=S,this.onDataFiltered()}},{type:"slider",max:100,min:10,step:1,doc:this.__doc__,current_value:f.intervals,label:"Intervals",func:S=>{f.intervals=S,this.onDataFiltered()}}),s}_createPolyFilter(s){this.range=!0;for(const f of s)f[1]=-f[1],this.config.axis.x_log_scale&&(f[0]=this._getInverseLogValue(f[0])),this.config.axis.y_log_scale&&(f[1]=this._getInverseLogValue(f[1]));this.filter=s,this.dim.filter("filterPoly",[this.xPos,this.config.param[1]],s),this.app.refresh()}}BaseChart.types.violin_plot={class:ViolinPlot,name:"Violin Plot",params:[{type:"text",name:"Category (X axis)"},{type:"number",name:"Value (Y axis)"}]};class BoxPlot extends ViolinPlot{constructor(s,f,_){super(s,f,_),this.config.type="box_plot"}onDataFiltered(s){this.isPinned||s!==this.dim&&(s==="all_removed"&&(this.app.clearBrush(),this.app.setFilter(!1),this.resetButton.style.display="none"),this.ticks=this.y_scale.ticks(20),this.dim.getBoxPlotData(f=>{this.data=f,this.drawChart()},this.config.param,{xPos:this.xPosBuff}))}drawChart(){const s=select(this.contentDiv).transition().duration(400).ease(linear),f=this.data.length,_=this.y_scale,S=[];for(const P of this.data)S.push(this.values[P.id]);this.x_scale.domain(S),this.centerGraph();const F=this._getContentDimensions().width/f,M=this.dataStore.getColumnColors(this.config.param[0]);this.graph_area.selectAll(".boxplot-rect").data(this.data,P=>P.id).join("rect").attr("class","boxplot-rect").transition(s).attr("x",(P,H)=>H*(F-3)+(H+1)*3).attr("y",P=>_(P.Q3)).attr("width",F-6).attr("height",P=>{const H=_(P.Q1)-_(P.Q3);return Number.isNaN(H)?0:H}).attr("fill","none").attr("stroke",(P,H)=>M[P.id]).attr("stroke-width",3),this.graph_area.selectAll(".boxplot-whisker").data(this.data,P=>P.id).join("path").attr("class","boxplot-whisker").transition(s).attr("stroke",(P,H)=>M[P.id]).attr("fill","none").attr("stroke-width",3).attr("d",(P,H)=>{if(Number.isNaN(P.med))return"";const J=H*(F-6)+(H+1)*6,K=H*(F-3)+(H+1)*3,oe=H*F+.5*F,se=_(P.max),ae=_(P.min);return se==null||ae==null?"":`
             M${J} ${se} L${J+F-12} ${se}
             M${oe} ${se} L${oe} ${_(P.Q3)}
             M${K} ${_(P.med)} L${K+F-6} ${_(P.med)}
             M${oe} ${ae} L${oe} ${_(P.Q1)}
             M${J} ${ae} L${J+F-12} ${ae}`}),this.app.refresh()}}BaseChart.types.box_plot={class:BoxPlot,name:"Box Plot",params:[{type:"text",name:"Category (X axis)"},{type:"number",name:"Value (Y axis)"}]};function max(d,s){let f;if(s===void 0)for(const _ of d)_!=null&&(f<_||f===void 0&&_>=_)&&(f=_);else{let _=-1;for(let S of d)(S=s(S,++_,d))!=null&&(f<S||f===void 0&&S>=S)&&(f=S)}return f}function min(d,s){let f;if(s===void 0)for(const _ of d)_!=null&&(f>_||f===void 0&&_>=_)&&(f=_);else{let _=-1;for(let S of d)(S=s(S,++_,d))!=null&&(f>S||f===void 0&&S>=S)&&(f=S)}return f}function sum(d,s){let f=0;if(s===void 0)for(let _ of d)(_=+_)&&(f+=_);else{let _=-1;for(let S of d)(S=+s(S,++_,d))&&(f+=S)}return f}function justify(d,s){return d.sourceLinks.length?d.depth:s-1}function constant$1(d){return function(){return d}}function ascendingSourceBreadth(d,s){return ascendingBreadth(d.source,s.source)||d.index-s.index}function ascendingTargetBreadth(d,s){return ascendingBreadth(d.target,s.target)||d.index-s.index}function ascendingBreadth(d,s){return d.y0-s.y0}function value(d){return d.value}function defaultId(d){return d.index}function defaultNodes(d){return d.nodes}function defaultLinks(d){return d.links}function find(d,s){const f=d.get(s);if(!f)throw new Error("missing: "+s);return f}function computeLinkBreadths({nodes:d}){for(const s of d){let f=s.y0,_=f;for(const S of s.sourceLinks)S.y0=f+S.width/2,f+=S.width;for(const S of s.targetLinks)S.y1=_+S.width/2,_+=S.width}}function Sankey(){let d=0,s=0,f=1,_=1,S=24,T=8,F,M=defaultId,P=justify,H,J,K=defaultNodes,oe=defaultLinks,se=6;function ae(){const jt={nodes:K.apply(null,arguments),links:oe.apply(null,arguments)};return ge(jt),he(jt),Be(jt),pe(jt),Fe(jt),computeLinkBreadths(jt),jt}ae.update=function(jt){return computeLinkBreadths(jt),jt},ae.nodeId=function(jt){return arguments.length?(M=typeof jt=="function"?jt:constant$1(jt),ae):M},ae.nodeAlign=function(jt){return arguments.length?(P=typeof jt=="function"?jt:constant$1(jt),ae):P},ae.nodeSort=function(jt){return arguments.length?(H=jt,ae):H},ae.nodeWidth=function(jt){return arguments.length?(S=+jt,ae):S},ae.nodePadding=function(jt){return arguments.length?(T=F=+jt,ae):T},ae.nodes=function(jt){return arguments.length?(K=typeof jt=="function"?jt:constant$1(jt),ae):K},ae.links=function(jt){return arguments.length?(oe=typeof jt=="function"?jt:constant$1(jt),ae):oe},ae.linkSort=function(jt){return arguments.length?(J=jt,ae):J},ae.size=function(jt){return arguments.length?(d=s=0,f=+jt[0],_=+jt[1],ae):[f-d,_-s]},ae.extent=function(jt){return arguments.length?(d=+jt[0][0],f=+jt[1][0],s=+jt[0][1],_=+jt[1][1],ae):[[d,s],[f,_]]},ae.iterations=function(jt){return arguments.length?(se=+jt,ae):se};function ge({nodes:jt,links:ta}){for(const[ca,Jn]of jt.entries())Jn.index=ca,Jn.sourceLinks=[],Jn.targetLinks=[];const Qn=new Map(jt.map((ca,Jn)=>[M(ca,Jn,jt),ca]));for(const[ca,Jn]of ta.entries()){Jn.index=ca;let{source:wA,target:LA}=Jn;typeof wA!="object"&&(wA=Jn.source=find(Qn,wA)),typeof LA!="object"&&(LA=Jn.target=find(Qn,LA)),wA.sourceLinks.push(Jn),LA.targetLinks.push(Jn)}if(J!=null)for(const{sourceLinks:ca,targetLinks:Jn}of jt)ca.sort(J),Jn.sort(J)}function he({nodes:jt}){for(const ta of jt)ta.value=ta.fixedValue===void 0?Math.max(sum(ta.sourceLinks,value),sum(ta.targetLinks,value)):ta.fixedValue}function Be({nodes:jt}){const ta=jt.length;let Qn=new Set(jt),ca=new Set,Jn=0;for(;Qn.size;){for(const wA of Qn){wA.depth=Jn;for(const{target:LA}of wA.sourceLinks)ca.add(LA)}if(++Jn>ta)throw new Error("circular link");Qn=ca,ca=new Set}}function pe({nodes:jt}){const ta=jt.length;let Qn=new Set(jt),ca=new Set,Jn=0;for(;Qn.size;){for(const wA of Qn){wA.height=Jn;for(const{source:LA}of wA.targetLinks)ca.add(LA)}if(++Jn>ta)throw new Error("circular link");Qn=ca,ca=new Set}}function be({nodes:jt}){const ta=max(jt,Jn=>Jn.depth)+1,Qn=(f-d-S)/(ta-1),ca=new Array(ta);for(const Jn of jt){const wA=Math.max(0,Math.min(ta-1,Math.floor(P.call(null,Jn,ta))));Jn.layer=wA,Jn.x0=d+wA*Qn,Jn.x1=Jn.x0+S,ca[wA]?ca[wA].push(Jn):ca[wA]=[Jn]}if(H)for(const Jn of ca)Jn.sort(H);return ca}function Re(jt){const ta=min(jt,Qn=>(_-s-(Qn.length-1)*F)/sum(Qn,value));for(const Qn of jt){let ca=s;for(const Jn of Qn){Jn.y0=ca,Jn.y1=ca+Jn.value*ta,ca=Jn.y1+F;for(const wA of Jn.sourceLinks)wA.width=wA.value*ta}ca=(_-ca+F)/(Qn.length+1);for(let Jn=0;Jn<Qn.length;++Jn){const wA=Qn[Jn];wA.y0+=ca*(Jn+1),wA.y1+=ca*(Jn+1)}xt(Qn)}}function Fe(jt){const ta=be(jt);F=Math.min(T,(_-s)/(max(ta,Qn=>Qn.length)-1)),Re(ta);for(let Qn=0;Qn<se;++Qn){const ca=Math.pow(.99,Qn),Jn=Math.max(1-ca,(Qn+1)/se);ve(ta,ca,Jn),Me(ta,ca,Jn)}}function Me(jt,ta,Qn){for(let ca=1,Jn=jt.length;ca<Jn;++ca){const wA=jt[ca];for(const LA of wA){let ZA=0,xI=0;for(const{source:pI,value:aI}of LA.targetLinks){let nI=aI*(LA.layer-pI.layer);ZA+=wt(pI,LA)*nI,xI+=nI}if(!(xI>0))continue;let cI=(ZA/xI-LA.y0)*ta;LA.y0+=cI,LA.y1+=cI,It(LA)}H===void 0&&wA.sort(ascendingBreadth),At(wA,Qn)}}function ve(jt,ta,Qn){for(let ca=jt.length,Jn=ca-2;Jn>=0;--Jn){const wA=jt[Jn];for(const LA of wA){let ZA=0,xI=0;for(const{target:pI,value:aI}of LA.sourceLinks){let nI=aI*(pI.layer-LA.layer);ZA+=Ft(LA,pI)*nI,xI+=nI}if(!(xI>0))continue;let cI=(ZA/xI-LA.y0)*ta;LA.y0+=cI,LA.y1+=cI,It(LA)}H===void 0&&wA.sort(ascendingBreadth),At(wA,Qn)}}function At(jt,ta){const Qn=jt.length>>1,ca=jt[Qn];Rt(jt,ca.y0-F,Qn-1,ta),Ct(jt,ca.y1+F,Qn+1,ta),Rt(jt,_,jt.length-1,ta),Ct(jt,s,0,ta)}function Ct(jt,ta,Qn,ca){for(;Qn<jt.length;++Qn){const Jn=jt[Qn],wA=(ta-Jn.y0)*ca;wA>1e-6&&(Jn.y0+=wA,Jn.y1+=wA),ta=Jn.y1+F}}function Rt(jt,ta,Qn,ca){for(;Qn>=0;--Qn){const Jn=jt[Qn],wA=(Jn.y1-ta)*ca;wA>1e-6&&(Jn.y0-=wA,Jn.y1-=wA),ta=Jn.y0-F}}function It({sourceLinks:jt,targetLinks:ta}){if(J===void 0){for(const{source:{sourceLinks:Qn}}of ta)Qn.sort(ascendingTargetBreadth);for(const{target:{targetLinks:Qn}}of jt)Qn.sort(ascendingSourceBreadth)}}function xt(jt){if(J===void 0)for(const{sourceLinks:ta,targetLinks:Qn}of jt)ta.sort(ascendingTargetBreadth),Qn.sort(ascendingSourceBreadth)}function wt(jt,ta){let Qn=jt.y0-(jt.sourceLinks.length-1)*F/2;for(const{target:ca,width:Jn}of jt.sourceLinks){if(ca===ta)break;Qn+=Jn+F}for(const{source:ca,width:Jn}of ta.targetLinks){if(ca===jt)break;Qn-=Jn}return Qn}function Ft(jt,ta){let Qn=ta.y0-(ta.targetLinks.length-1)*F/2;for(const{source:ca,width:Jn}of ta.targetLinks){if(ca===jt)break;Qn+=Jn+F}for(const{target:ca,width:Jn}of jt.sourceLinks){if(ca===ta)break;Qn-=Jn}return Qn}return ae}var pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}Path.prototype=path.prototype={constructor:Path,moveTo:function(d,s){this._+="M"+(this._x0=this._x1=+d)+","+(this._y0=this._y1=+s)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(d,s){this._+="L"+(this._x1=+d)+","+(this._y1=+s)},quadraticCurveTo:function(d,s,f,_){this._+="Q"+ +d+","+ +s+","+(this._x1=+f)+","+(this._y1=+_)},bezierCurveTo:function(d,s,f,_,S,T){this._+="C"+ +d+","+ +s+","+ +f+","+ +_+","+(this._x1=+S)+","+(this._y1=+T)},arcTo:function(d,s,f,_,S){d=+d,s=+s,f=+f,_=+_,S=+S;var T=this._x1,F=this._y1,M=f-d,P=_-s,H=T-d,J=F-s,K=H*H+J*J;if(S<0)throw new Error("negative radius: "+S);if(this._x1===null)this._+="M"+(this._x1=d)+","+(this._y1=s);else if(K>epsilon)if(!(Math.abs(J*M-P*H)>epsilon)||!S)this._+="L"+(this._x1=d)+","+(this._y1=s);else{var oe=f-T,se=_-F,ae=M*M+P*P,ge=oe*oe+se*se,he=Math.sqrt(ae),Be=Math.sqrt(K),pe=S*Math.tan((pi-Math.acos((ae+K-ge)/(2*he*Be)))/2),be=pe/Be,Re=pe/he;Math.abs(be-1)>epsilon&&(this._+="L"+(d+be*H)+","+(s+be*J)),this._+="A"+S+","+S+",0,0,"+ +(J*oe>H*se)+","+(this._x1=d+Re*M)+","+(this._y1=s+Re*P)}},arc:function(d,s,f,_,S,T){d=+d,s=+s,f=+f,T=!!T;var F=f*Math.cos(_),M=f*Math.sin(_),P=d+F,H=s+M,J=1^T,K=T?_-S:S-_;if(f<0)throw new Error("negative radius: "+f);this._x1===null?this._+="M"+P+","+H:(Math.abs(this._x1-P)>epsilon||Math.abs(this._y1-H)>epsilon)&&(this._+="L"+P+","+H),f&&(K<0&&(K=K%tau+tau),K>tauEpsilon?this._+="A"+f+","+f+",0,1,"+J+","+(d-F)+","+(s-M)+"A"+f+","+f+",0,1,"+J+","+(this._x1=P)+","+(this._y1=H):K>epsilon&&(this._+="A"+f+","+f+",0,"+ +(K>=pi)+","+J+","+(this._x1=d+f*Math.cos(S))+","+(this._y1=s+f*Math.sin(S))))},rect:function(d,s,f,_){this._+="M"+(this._x0=this._x1=+d)+","+(this._y0=this._y1=+s)+"h"+ +f+"v"+ +_+"h"+-f+"Z"},toString:function(){return this._}};function constant(d){return function(){return d}}function x(d){return d[0]}function y(d){return d[1]}var slice=Array.prototype.slice;function linkSource(d){return d.source}function linkTarget(d){return d.target}function link(d){var s=linkSource,f=linkTarget,_=x,S=y,T=null;function F(){var M,P=slice.call(arguments),H=s.apply(this,P),J=f.apply(this,P);if(T||(T=M=path()),d(T,+_.apply(this,(P[0]=H,P)),+S.apply(this,P),+_.apply(this,(P[0]=J,P)),+S.apply(this,P)),M)return T=null,M+""||null}return F.source=function(M){return arguments.length?(s=M,F):s},F.target=function(M){return arguments.length?(f=M,F):f},F.x=function(M){return arguments.length?(_=typeof M=="function"?M:constant(+M),F):_},F.y=function(M){return arguments.length?(S=typeof M=="function"?M:constant(+M),F):S},F.context=function(M){return arguments.length?(T=M??null,F):T},F}function curveHorizontal(d,s,f,_,S){d.moveTo(s,f),d.bezierCurveTo(s=(s+_)/2,f,s,S,_,S)}function linkHorizontal(){return link(curveHorizontal)}function horizontalSource(d){return[d.source.x1,d.y0]}function horizontalTarget(d){return[d.target.x0,d.y1]}function sankeyLinkHorizontal(){return linkHorizontal().source(horizontalSource).target(horizontalTarget)}class SankeyChart extends SVGChart{constructor(s,f,_){const S={y:{custom:!0},ry:{label:!0}},T=s.getColumnName(_.param[0]),F=s.getColumnName(_.param[1]);_.label||(_.label=`${T} vs. ${F}`),_.axis||(_.axis={}),_.axis.y||(_.axis.y={size:25,textSize:15,label:T}),_.axis.ry||(_.axis.ry={size:25,textSize:15,label:F}),super(s,f,_,S);const M=this.config;M.type="sankey_chart",this.dim=this.dataStore.getDimension("category_dimension"),this.filter=[],this.addToolTip(),this.onDataFiltered()}setSize(s,f){super.setSize(s,f),this.drawChart()}remove(s=!0){this.dim.destroy(s),super.remove()}removeFilter(){this.dim.removeFilter(),this.filter=[],this.nodeFilter=null,this.linkFilter=null,this.drawChart()}onDataFiltered(s){this.dim===s||this.isPinned||(s==="all_removed"&&(this.filter=[],this.nodeFilter=null,this.linkFilter=null,this.resetButton.style.display="none"),this.dim.getSankeyData(f=>{this.sankeyData=f,this.drawChart()},this.config.param))}drawChart(){this.updateAxis();const s=select(this.contentDiv).transition().duration(400).ease(linear),f=this._getContentDimensions(),_=this.config.param,S=[this.dataStore.getColumnColors(_[0]),this.dataStore.getColumnColors(_[1])];let T=20-this.sankeyData.minNodes;T=T<1?1:T>10?10:T;const M=Sankey().size([f.width,f.height]).nodeId(P=>P.id).nodeWidth(20).nodePadding(T).nodeAlign(justify)(this.sankeyData);this.graph_area.selectAll(".s-links").data(M.links).join("path").on("click",(P,H)=>{this.filterMultipleCategories(H)}).on("mouseover pointermove",(P,H)=>{const J=H.source,K=this.dataStore.getColumnValues(this.config.param[J.param])[J.ind],oe=H.target,se=this.dataStore.getColumnValues(this.config.param[oe.param])[oe.ind];this.showToolTip(P,`${K}<br>${se}<br>${H.trueValue}`)}).on("mouseleave",()=>{this.hideToolTip()}).transition(s).attr("class","s-links").attr("d",sankeyLinkHorizontal()).attr("fill","none").attr("stroke","currentColor").attr("stroke-width",P=>P.width).attr("stoke-opacity",.5).attr("opacity",P=>this.linkFilter?P.source.id===this.linkFilter[0]&&P.target.id===this.linkFilter[1]?.8:.2:this.nodeFilter?P.source.id===this.nodeFilter||P.target.id===this.nodeFilter?.8:.2:.5),this.graph_area.selectAll(".s-nodes").data(M.nodes).join("rect").on("click",(P,H)=>{const J=_[H.param];this.nodeFilter=(H.param===0?"A":"B")+H.ind,this.linkFilter=null;const K=this.dataStore.getColumnValues(J);this.filterCategories(J,K[H.ind])}).on("mouseover pointermove",(P,H)=>{const J=this.dataStore.getColumnValues(this.config.param[H.param])[H.ind];this.showToolTip(P,J)}).on("mouseleave",()=>{this.hideToolTip()}).attr("class","s-nodes").attr("x",P=>P.x0).attr("y",P=>P.y0).attr("width",P=>P.x1-P.x0).attr("height",P=>P.y1-P.y0).attr("fill",P=>S[P.param][P.ind])}getFilter(){const s=this.config.param;if(this.linkFilter){const f={};let _=Number.parseInt(this.linkFilter[0].substring(1));return f[s[0]]=[this.dataStore.getColumnValues(s[0])[_]],_=Number.parseInt(this.linkFilter[1].substring(1)),f[s[1]]=[this.dataStore.getColumnValues(s[1])[_]],f}if(this.nodeFilter){const f={},_=this.nodeFilter.startsWith("A")?0:1,S=Number.parseInt(this.nodeFilter.substring(1));return f[s[_]]=[this.dataStore.getColumnValues(s[_])[S]],f}return null}filterMultipleCategories(s){const f=this.config.param,_=f[s.source.param],S=this.dataStore.getColumnValues(_)[s.source.ind],T=f[s.target.param],F=this.dataStore.getColumnValues(T)[s.target.ind];this.linkFilter=[`A${s.source.ind}`,`B${s.target.ind}`],this.resetButton.style.display="inline",this.drawChart(),this.dim.filter("filterMultipleCategories",[_,T],[S,F])}filterCategories(s,f,_){_?this.filter.push(f):this.filter=[f],this.resetButton.style.display="inline",this.drawChart(),this.dim.filter("filterCategories",[s],this.filter)}pinChart(){this.isPinned=!0}unpinChart(){this.isPinned=!1,this.onDataFiltered()}getSettings(){const s=super.getSettings();return this.config,s}}BaseChart.types.sankey_chart={name:"Sankey Diagram",class:SankeyChart,params:[{type:"text",name:"First Group"},{type:"text",name:"Second Group"}]};class MultiLineChart extends SVGChart{constructor(s,f,_){const S=s.getColumnName(_.param[0]);_.axis||(_.axis={x:{size:30,label:S,textsize:13},y:{size:45,label:"density",textsize:13}}),_.title||(_.title=S),_.scaletrim&&!_.band_width&&(_.band_width=.1),super(s,f,_,{x:{},y:{type:_.stacked?"band":"linear"}}),this.config.type="multi_line_chart";const T=this.config;T.color_legend||(T.color_legend={display:!T.stacked});const F=this.dataStore.getMinMaxForColumn(T.param[0]);let M=F.slice(0);_.scaletrim&&(M=[0,1]),this.x_scale.domain(M),this.defaultBandWidth=(F[1]-F[0])/100,T.band_width=T.band_width||this.defaultBandWidth,T.intervals=T.intervals||40,this.dim=this.dataStore.getDimension("catrange_dimension"),this.data=[],this.addToolTip(),this.setColorLegend(),this.stackLines(T.stacked),this.scaleTrim(T.scaletrim),this.onDataFiltered()}stackLines(s){this.config.stacked=s,s?(this.y_scale=band(),this.y_axis_call=axisLeft(this.y_scale),this.config.color_legend.display=!1,this.setColorLegend(),this.y_scale.domain(this.dataStore.getColumnValues(this.config.param[1]))):(this.y_scale=linear$1(),this.y_axis_call=axisLeft(this.y_scale),this.y_scale.domain([1,0]))}changeCategories(s,f,_){this.config.param[1]=s,this.onDataFiltered()}scaleTrim(s){const f=this.config;if(!s||s==="none"){f.scaletrim=void 0;const _=this.dataStore.getMinMaxForColumn(f.param[0]);this.x_scale.domain(_)}else f.scaletrim=`${s}`,this.x_scale.domain([0,1]),f.band_width=.1}getColorLegend(){return this.dataStore.getColorLegend(this.config.param[1])}onDataFiltered(s){if(!this.isPinned&&s!==this.dim){s==="all_removed"&&(this.resetButton.style.display="none");const f=this.config;this.ticks=this.x_scale.ticks(f.intervals),this.dim.getKernalDensity(_=>{this.data=_,this.drawChart()},[f.param[1],f.param[0]],{ticks:this.ticks,bandwidth:f.band_width,intervals:f.intervals,scaletrim:f.scaletrim})}}remove(s=!0){this.dim.destroy(s),super.remove()}drawChart(){const s=this.config,f=this.dataStore.getColumnValues(s.param[1]),_=select(this.contentDiv).transition().duration(400).ease(linear),S=this._getContentDimensions(),T=[],F=S.height/this.data.length,M=[];for(let K=0;K<this.data.length;K++){const oe=s.stacked?F/this.data[K].max:S.height/this.data[K].max,se=s.stacked?this.data[K].map(ae=>F*K+F-ae*oe):this.data[K].map(ae=>S.height-ae*oe);se.id=this.data[K].id,M.push(f[se.id]),T.push(se)}this.y_scale.domain(M),this.updateAxis();const P=this.ticks.map(K=>this.x_scale(K)),H=this.dataStore.getColumnColors(this.config.param[1]);this.graph_area.selectAll(".chart-line").data(T).join("path").attr("class","chart-line").on("mouseover pointermove",(K,oe)=>{const se=f[oe.id];this.showToolTip(K,se)}).on("mouseout",()=>{this.hideToolTip()}).transition(_).attr("fill","none").attr("stroke",(K,oe)=>H[K.id]).attr("stroke-width",2).attr("stroke-linejoin","round").attr("d",line().x((K,oe)=>P[oe]).y((K,oe)=>K)),s.fill?(area().x((K,oe)=>P[oe]).y0((K,oe)=>K).y1((K,oe)=>{s.stacked?F*K.id+F:S.height}),this.graph_area.selectAll(".chart-area").data(T).join("path").attr("class","chart-area").transition(_).attr("fill",K=>H[K.id]).style("opacity",.5).attr("d",(K,oe)=>area().x((se,ae)=>P[ae]).y0(se=>se).y1(se=>s.stacked?F*oe+F:S.height)(K))):this.graph_area.selectAll(".chart-area").remove()}unpinChart(){super.unpinChart(),this.onDataFiltered()}setSize(s,f){super.setSize(s,f),this.drawChart()}getSettings(){const s=super.getSettings(),f=this.config,_=this.dataStore.getMinMaxForColumn(f.param[0]),S=this.dataStore.getColumnList("text");return s.splice(1,0,{type:"dropdown",current_value:f.param[1],label:"Change Cetegories (y axis)",values:[S,"name","field"],func:T=>{this.changeCategories(T,"val1","val2")}},{type:"check",current_value:f.stacked,label:"Stack Lines",func:T=>{this.stackLines(T),this.drawChart()}},{type:"check",current_value:f.fill,label:"Fill Lines",func:T=>{f.fill=T,this.drawChart()}},{type:"radiobuttons",label:"Scale/Trim to Percentile",current_value:f.scaletrim||"none",choices:[["No Trim","none"],["0.001","0.001"],["0.01","0.01"],["0.05","0.05"]],func:T=>{this.scaleTrim(T),this.onDataFiltered()}},{type:"slider",max:_[1]/10,min:_[0]<0?0:_[0],doc:this.__doc__,current_value:f.band_width,label:"Band Width",func:T=>{f.band_width=T,this.onDataFiltered()}},{type:"slider",max:100,min:10,step:1,doc:this.__doc__,current_value:f.intervals,label:"Intervals",func:T=>{f.intervals=T,this.onDataFiltered()}},{label:"Show Color Legend",type:"check",current_value:f.color_legend?f.color_legend.display:!0,func:T=>{f.color_legend.display=T,this.setColorLegend()}}),s}}BaseChart.types.multi_line_chart={class:MultiLineChart,name:"Multi Line Chart",methodsUsingColumns:["changeCategories"],params:[{type:"number",name:"Value (X axis)"},{type:"text",name:"Categories to show"}]};class StackedRowChart extends SVGChart{constructor(s,f,_){const S={x:{type:"linear"},y:{type:"band"},ry:{}};_.color_legend||(_.color_legend={display:!1}),super(s,f,_,S),this.config.type="stacked_row_chart",this.dim=this.dataStore.getDimension("category_dimension"),this.addToolTip(),this.onDataFiltered(null)}onDataFiltered(s){this.dim===s||this.isPinned||this.dim.getSankeyData(f=>{this.data=f,this.sortData(),this.drawChart()},this.config.param,{method:"stacked"})}setSize(s,f){super.setSize(s,f),this.drawChart()}sortData(){this.sortedData=this.data.slice(0);const s=this.config.sort;if(s==="size"||s===null)this.sortedData.sort((f,_)=>f.total-_.total);else if(s==="name"){const f=this.dataStore.getColumnValues(this.config.param[0]);this.sortedData.sort((_,S)=>f[_.id].localeCompare(f[S.id]))}else if(s==="composition"){const f=this.data.map(S=>{const T=S.values.map(F=>F.per);return T._id=S.id,T}),_=getHierarchicalNodes(f);this.sortedData=_.order.map(S=>this.data[S])}}getColorLegend(){return this.dataStore.getColorLegend(this.config.param[1])}getSettings(){const s=super.getSettings(),f=this.config;return s.concat([{label:"Show Color Legend",type:"check",current_value:f.color_legend?f.color_legend.display:!0,func:_=>{f.color_legend.display=_,this.setColorLegend()}},{type:"radiobuttons",label:"Sort Order",current_value:f.sort||"default",choices:[["Default","default"],["Size","size"],["Name","name"],["Composition","composition"]],func:_=>{f.sort=_,this.sortData(),this.drawChart()}}])}drawChart(s=500){const f=this._getContentDimensions(),_=this.config,S=4,T=this.sortedData.length,F=(f.height-S*(T+1))/T,M=this.dataStore.getColumnColors(_.param[1]),P=this.dataStore.getColumnValues(_.param[0]),H=this.dataStore.getColumnValues(_.param[1]),J=select(this.contentDiv).transition().duration(s).ease(linear);this.x_scale.domain([0,1]),this.y_scale.domain(this.sortedData.map(K=>P[K.id])),this.updateAxis(),this.graph_area.selectAll(".stacked-row").data(this.sortedData,K=>K.id).join(K=>K.append("g").attr("transform",(oe,se)=>`translate(0,${S*(se+1)+F*se})`).attr("class","stacked-row"),K=>K.transition(J).attr("transform",(oe,se)=>`translate(0,${S*(se+1)+F*se})`)).selectAll("rect").data(K=>K.values,K=>K.id).join(K=>K.append("rect").attr("x",oe=>oe.perpos*f.width).attr("y",0).attr("width",oe=>oe.per*f.width).attr("height",F).attr("fill",oe=>M[oe.id]).on("mouseover pointermove",(oe,se)=>{const ae=(se.per*100).toFixed(0),ge=this.config.param[1];this.showToolTip(oe,`${ge}: ${H[se.id]}<br>count: <em>${se.count}</em><br>percentage: <em>${ae}%</em>`)}).on("mouseleave",()=>{this.hideToolTip()}),K=>K.transition(J).attr("x",oe=>oe.perpos*f.width).attr("width",oe=>oe.per*f.width).attr("height",F).attr("fill",oe=>M[oe.id]))}}BaseChart.types.stacked_row_chart={class:StackedRowChart,name:"Stacked Row Chart",params:[{type:"text",name:"Category y axis"},{type:"text",name:"Category x axis"}]};class TreeDiagram extends SVGChart{constructor(s,f,_){super(s,f,_,{});const S=this.dataStore.getHighlightedData();S&&this.onDataHighlighted({data:this.dataStore.rowData.get(S[0])})}setBranchLength(s,f,_){s.y=(f+=s.data.length)*_,s.children&&s.children.forEach(S=>this.setBranchLength(S,f,_))}drawChart(){if(!this.treeData)return;const s=select(this.contentDiv).transition().duration(500).ease(linear),f=this._getContentDimensions(),S=cluster().size([f.height,f.width-50]).separation((M,P)=>1)(this.treeData);function T(M){return M.data.length+(M.children?max$3(M.children,T):0)}console.warn("setBranchLength needs to be reviewed / tested"),this.setBranchLength(this.treeData,0,(f.width-50)/T(this.treeData));const F=S.descendants();max$3(F,M=>M.data.length),this.graph_area.selectAll(".tree-link").data(F.slice(1)).join("path").attr("class","tree-link").style("stroke","currentColor").style("fill","none").style("stroke-width","1px").transition(s).attr("d",M=>`M ${M.y} ${M.x} L${M.parent.y} ${M.x} L${M.parent.y} ${M.parent.x}`),this.graph_area.selectAll("text").data(this.treeData.leaves()).join("text").text(M=>M.data.name.replace(/_/g," ")).attr("font-size","9px").attr("alignment-baseline","middle").style("stroke","currentColor").transition(s).attr("x",M=>M.y+2).attr("y",M=>M.x)}setSize(s,f){super.setSize(s,f),this.drawChart()}onDataHighlighted(s){var _;const f=(_=s.data)==null?void 0:_.nwk_data;f&&(this.treeData=parseNewick(f),this.drawChart())}getSettings(){return super.getSettings()}}BaseChart.types.row_summary_box={class:TreeDiagram,name:"Tree Diagram",required:["tree_diagram"],params:[]};const color_schemes={"blue yellow":["#115f9a","#1984c5","#22a7f0","#48b5c4","#76c68f","#a6d75b","#c9e52f","#d0ee11","#d0f400"],red:scheme[8].slice(1),"blue yellow red":["blue","yellow","red"]};class CellNetworkChart extends SVGChart{constructor(s,f,_){_.title||(_.title=_.category),_.link_strength=_.link_strength||1,_.node_repulsion=_.node_repulsion||-500,super(s,f,_,{});const S=this.config;if(this.linkThicknessScale=linear$1(),S.scales={},S.link_thickness)this._changeLinkThicknessScale();else{S.link_thickness={show_legend:!0,legend_position:[20,80]};const J=this.dataStore.getColumnQuantile(S.param[4],.01);this._changeLinkThicknessScale(J,[1,10])}this.cell_sizes={},this.cell_types={};const T=this.dataStore.getColumnValues(S.param[1]),F=this.dataStore.columnIndex,M=F[S.param[1]].data,P=F[S.param[6]].data,H=S.param[7]?F[S.param[7]].data:null;for(let J=0;J<this.dataStore.size;J++)this.cell_sizes[T[M[J]]]=P[J],H&&(this.cell_types[T[M[J]]]=H[J]);if(this.linkLengthScale=linear$1(),this.forceLink=forceLink().id(J=>J.id),S.link_length)this._changeLinkLengthScale();else{S.link_length={};const J=this.dataStore.getColumnQuantile(S.param[3],.01);this._changeLinkLengthScale(J,[1,100])}if(this.nodeScale=sqrt$3(),S.node_size)this._changeNodeSizeScale();else{S.node_size={show_legend:!0,legend_position:[20,180]};const J=this.dataStore.getMinMaxForColumn(S.param[6]);this._changeNodeSizeScale(J,[1,15])}if(S.link_color)this._changeLinkColorScale();else{S.link_color={};const J=this.dataStore.getColumnQuantile(S.param[5],.01);this._changeLinkColorScale("red",J)}S.color_legend||(S.color_legend={display:!0}),S.node_color=S.node_color||"cells",S.levels=S.levels||1,S.label_size=S.label_size||13,this.extra_legends=["linkThicknessLegend","nodeColorLegend"],this.forceManyBody=forceManyBody().distanceMax(150),this.simulation=forceSimulation().force("link",this.forceLink.strength(this.config.link_strength)).force("charge",this.forceManyBody.strength(_.node_repulsion)).force("center",forceCenter(this.width/2,this.height/2)),this.setColorLegend(),this.reCalculate()}remove(){this.simulation.on("tick",null),super.remove()}drawChart(){const s=this.config;this.svg.selectAll("*").remove();const f=this.dataStore.getColumnColors(s.param[1]),_=this.dataStore.getColorForCategory(s.param[0],s.category),S=s.node_color==="type"?this.dataStore.getColumnColors(s.param[7]):null,T=s.link_color.colors!=="none",F=this.dataStore.getRawColumn(s.param[4]),M=this.svg.append("g").attr("class","links").selectAll("line").data(this.linkData).enter();this.link=M.append("line").attr("stroke-width",P=>this.linkThicknessScale(F[P.d_index])).style("stroke",P=>this.linkColorScale&&T?this.linkColorScale(P.d_index):"currentcolor").style("opacity",T?.6:1).on("click",(P,H)=>{this.dataStore.dataHighlighted([H.d_index],this)}),this.arrows=M.append("path").attr("stroke-width",3).attr("fill","none").style("opacity",s.show_directionality?1:0).attr("stroke",P=>this.linkColorScale&&T?this.linkColorScale(P.d_index):"currentcolor"),this.node=this.svg.append("g").attr("class","nodes").selectAll("g").data(this.nodeData).enter().append("g"),this.circles=this.node.append("circle").attr("r",P=>this.nodeScale(P.node_size)).style("stroke","currentColor").style("stroke-width",2).attr("fill",P=>S?S[P.type]:s.node_color==="cells"?f[P.d_index]:_).call(this.setUpDrag()),this.lables=this.node.append("text").text(P=>P.id).style("fill","currentcolor").style("font-size",`${this.config.label_size}px`).attr("x",6).attr("y",3),this.simulation.nodes(this.nodeData).on("tick",()=>this.ticked()),this.simulation.force("link").links(this.linkData)}_changeLabelSize(s){const f=this.config;f.label_size=s,this.lables.style("font-size",`${s}px`)}_changeNodeSizeScale(s,f,_){const S=this.config;f&&(S.node_size.range=f),s&&(S.node_size.domain=s),this.nodeScale=sqrt$3().domain(S.node_size.domain).range(S.node_size.range).clamp(!0);const T=this.nodeColorLegend;if(T&&(S.node_size.legend_position=[T.offsetLeft,T.offsetTop],T.remove()),!S.node_size.show_legend){this.nodeColorLegend=void 0;return}const F=this.dataStore.columnIndex[S.param[6]].name,M=S.node_size.legend_position;this.nodeColorLegend=getColorLegendCustom(this.nodeScale,{label:F,type:"circle"}),this.contentDiv.append(this.nodeColorLegend),this.nodeColorLegend.style.top=`${M[1]}px`,this.nodeColorLegend.style.left=`${M[0]}px`,_&&this.circles.attr("r",P=>this.nodeScale(P.node_size))}changeLinkThicknessParameter(s,f){this._changeLinkThicknessScale(f,null,!0)}changeLinkLengthParameter(s,f){this._changeLinkLengthScale(f,null,!0)}changeLinkColorParameter(s,f){this._changeLinkColorScale(null,[f[0],f[1]],!0)}_changeLinkThicknessScale(s,f,_){const S=this.config;if(f&&(S.link_thickness.range=f),s&&(S.link_thickness.domain=s),this.linkThicknessScale.domain(S.link_thickness.domain).range(S.link_thickness.range).clamp(!0),_){const P=this.dataStore.getRawColumn(S.param[4]);this.link.attr("stroke-width",H=>this.linkThicknessScale(P[H.d_index]))}const T=this.linkThicknessLegend;if(T&&(S.link_thickness.legend_position=[T.offsetLeft,T.offsetTop],T.remove()),!S.link_thickness.show_legend){this.linkThicknessLegend=void 0;return}const F=S.link_thickness.legend_position,M=this.dataStore.columnIndex[S.param[4]].name;this.linkThicknessLegend=getColorLegendCustom(this.linkThicknessScale,{label:M,type:"line"}),this.contentDiv.append(this.linkThicknessLegend),this.linkThicknessLegend.style.top=`${F[1]}px`,this.linkThicknessLegend.style.left=`${F[0]}px`}_changeLinkLengthScale(s,f,_){const S=this.config;f&&(S.link_length.range=f),s&&(S.link_length.domain=s);const T=[S.link_length.range[0],S.link_length.range[1]];this.linkLengthScale.domain([...S.link_length.domain].reverse()).range(T).clamp(!0);const F=this.dataStore.getRawColumn(S.param[3]),M=this.linkLengthScale.range()[1];this.forceLink.distance(P=>{const H=F[P.d_index];return Number.isNaN(H)?M:this.linkLengthScale(H)}),_&&(this.simulation.alphaTarget(.2).restart(),setTimeout(()=>{this.simulation.alphaTarget(0)},1e3))}_changeNodeColor(s){const f=this.config;f.node_color=s;const _=this.dataStore.getColumnColors(f.param[1]),S=this.dataStore.getColorForCategory(f.param[0],f.category),T=s==="type"?this.dataStore.getColumnColors(f.param[7]):null;this.circles.attr("fill",F=>T?T[F.type]:f.node_color==="cells"?_[F.d_index]:S)}getConfig(){const s=super.getConfig(),f=this.linkThicknessLegend;f&&(s.link_thickness.legend_position=[f.offsetLeft,f.offsetTop]);const _=this.nodeColorLegend;return _&&(s.node_size.legend_position=[_.offsetLeft,_.offsetTop]),s}_changeLinkColorScale(s,f,_){if(f&&(this.config.link_color.domain=f),s&&(this.config.link_color.colors=s),s!=="none"){const S=this.config.link_color.domain;this.linkColorScale=this.dataStore.getColorFunction(this.config.param[5],{overideValues:{min:S[0],max:S[1],colors:color_schemes[this.config.link_color.colors]}})}_&&(this.link.style("stroke",S=>s!=="none"&&this.linkColorScale?this.linkColorScale(S.d_index):"currentColor").style("opacity",s!=="none"?.6:1),this.setColorLegend(),this.arrows.attr("stroke",S=>this.linkColorScale&&s!=="none"?this.linkColorScale(S.d_index):"currentColor"))}onDataFiltered(s){this.reCalculate()}getColorLegend(){const s=this.config,f=s.link_color.domain;return this.dataStore.getColorLegend(s.param[5],{overideValues:{min:f[0],max:f[1],colors:color_schemes[s.link_color.colors]}})}colorByDefault(){this.config.color_by=void 0,this.legend&&this.legend.remove(),this.linkColorScale=null,this._changeLinkColor()}ticked(){this.lables.attr("text-anchor",s=>s.x>this.width*2/3?"end":"start").attr("x",s=>s.x>this.width*2/3?-6:6),this.node.attr("transform",s=>(s.x=Math.min(s.x,this.width-20),s.x=Math.max(s.x,15),s.y=Math.min(s.y,this.height-20),s.y=Math.max(s.y,15),`translate(${s.x},${s.y})`)),this.link.attr("x1",s=>s.source.x).attr("y1",s=>s.source.y).attr("x2",s=>s.target.x).attr("y2",s=>s.target.y),this.arrows.attr("d",s=>{let f=Math.sqrt((s.source.y-s.target.y)**2+(s.target.x-s.source.x)**2);f=f===0?.1:f;const _=(f/2-5)/f,S=(s.target.x-s.source.x)/2+s.source.x,T=(s.target.y-s.source.y)/2+s.source.y,F=(s.target.x-s.source.x)*_+s.source.x,M=(s.target.y-s.source.y)*_+s.source.y,P=5/f*(s.source.y-s.target.y),H=F+P,J=F-P,K=5/f*(s.target.x-s.source.x),oe=M+K,se=M-K;return`M ${H} ${oe} ${S} ${T} ${J} ${se}`})}setUpDrag(){const s=S=>{S.active||this.simulation.alphaTarget(.3).restart(),S.subject.fx=S.subject.x,S.subject.fy=S.subject.y},f=S=>{S.subject.fx=S.x,S.subject.fy=S.y},_=S=>{S.active||this.simulation.alphaTarget(0),S.subject.fx=null,S.subject.fy=null};return drag().on("start",s).on("drag",f).on("end",_)}reCalculate(){this.config.base_cell?this.getLinks2():this.getLinks(),this.drawChart(),this.simulation.alphaTarget(.2).restart(),setTimeout(()=>{this.simulation.alphaTarget(0)},1e3)}changeParameter(){const s=this.config;this.forceLink.strength(s.link_strength),this.forceManyBody.strength(s.node_repulsion),this.simulation.alphaTarget(.2).restart(),setTimeout(()=>{this.simulation.alphaTarget(0)},1e3)}getLinks2(){const s=this.config.param,f=this.dataStore.getColumnValues(s[1]),_=this.dataStore.getColumnValues(s[2]),S=this.dataStore.getColumnValues(s[0]).indexOf(this.config.category),T=this.dataStore.columnIndex,F=T[s[0]].data,M=T[s[1]].data,P=T[s[2]].data,H=T[s[6]].data;this.nodeData=[];const J=new Set,K=f.indexOf(this.config.base_cell);J.add(K);const oe=new Set;let se=new Set;const ae=this.config.specific_only;if(ae)se=new Set(ae[0].map(pe=>f.indexOf(pe)));else for(let pe=0;pe<f.length;pe++)se.add(pe);const ge=this.dataStore.filterArray;for(let pe=0;pe<this.dataStore.size;pe++)ge[pe]>0||F[pe]===S&&M[pe]===K&&se.has(P[pe])&&M[pe]!==P[pe]&&(oe.add(`${M[pe]}|${P[pe]}`),J.add(P[pe]));const he=new Set(J);if(this.config.levels===2){for(let pe=0;pe<this.dataStore.size;pe++)if(!(ge[pe]>0)&&F[pe]===S&&J.has(M[pe])&&se.has(P[pe])&&M[pe]!==P[pe]){if(P[pe]===K)continue;oe.has(`${P[pe]}|${M[pe]}`)||(oe.add(`${M[pe]}|${P[pe]}`),he.add(P[pe]))}}for(let pe=0;pe<f.length;pe++)for(let be=0;be<_.length;be++)he&&(!he.has(pe)||!he.has(be))||oe.add(`${pe}|${be}`);this.linkData=[];const Be={};for(let pe=0;pe<this.dataStore.size;pe++){if(ge[pe]>0)continue;Be[f[M[pe]]]=H[pe];const be=`${M[pe]}|${P[pe]}`;F[pe]===S&&oe.has(be)&&(oe.delete(`${P[pe]}|${M[pe]}`),this.linkData.push({source:f[M[pe]],target:_[P[pe]],d_index:pe}))}for(let pe=0;pe<f.length;pe++)he&&!he.has(pe)||this.nodeData.push({id:f[pe],d_index:pe,node_size:Be[f[pe]],type:this.cell_types[f[pe]]})}getLinks(){const s=this.config.param,f=this.dataStore.getColumnValues(s[1]),_=this.dataStore.getColumnValues(s[2]);this.nodeData=[];const S=this.dataStore.getColumnValues(s[0]).indexOf(this.config.category),T=this.dataStore.columnIndex,F=T[s[0]].data,M=T[s[1]].data,P=T[s[2]].data,H=T[s[3]].data;this.linkData=[];const J={},K={},oe=this.dataStore.filterArray;for(let se=0;se<this.dataStore.size;se++)if(!(oe[se]>0)&&F[se]===S){const ae=f[M[se]],ge=_[P[se]];if(ae===ge)continue;const he=J[`${P[se]}|${M[se]}`];if(he!=null){const Be=this.linkData[he];H[se]>H[Be.d_index]&&(Be.source=ae,Be.target=ge,Be.d_index=se);continue}K[ae]=!0,K[ge]=!0,this.linkData.push({source:ae,target:ge,d_index:se}),J[`${M[se]}|${P[se]}`]=this.linkData.length-1}for(let se=0;se<f.length;se++){const ae=f[se];K[ae]&&this.nodeData.push({id:ae,d_index:se,node_size:this.cell_sizes[ae],type:this.cell_types[ae]})}}setSize(s,f){super.setSize(s,f),this.simulation.force("center",forceCenter(this.width/2,this.height/2)),this._changeLinkLengthScale(null,null,!0)}getSettings(){const s=super.getSettings(),f=this.config,_=this.dataStore.getColumnValues(f.param[0]),S=this.dataStore.getColumnValues(f.param[1]).map(H=>({t:H}));S.unshift({t:"None"}),_.map(H=>({t:H,v:H})),s.push({type:"slider",max:20,min:5,doc:this.__doc__,current_value:f.label_size,label:"Label Size",func:H=>{this._changeLabelSize(H)}}),s.push({type:"dropdown",current_value:f.base_cell||"None",values:[S,"t","t"],label:"Center Cell",func:H=>{H==="None"?f.base_cell=void 0:f.base_cell=H,this.reCalculate()}}),s.push({type:"radiobuttons",label:"Number of Levels",current_value:f.levels,choices:[["1",1],["2",2]],func:H=>{f.levels=Number.parseInt(H),f.base_cell&&this.reCalculate()}});const T=this.dataStore.getColumnList("number");let F=this.dataStore.getColumnQuantile(f.param[5],.01);s.push({label:"Link Color",type:"dropdown",values:[T,"name","field"],current_value:f.param[5],func:H=>{f.param[5]=H},onchange:(H,J)=>{f.param[5]=J;const K=H["Link Color Domain"].noUiSlider,oe=this.dataStore.getColumnQuantile(J,.01);K.updateOptions({range:{max:oe[1],min:oe[0]}}),K.set(oe),this.changeLinkColorParameter(J,oe)}});const M=[];for(const H in color_schemes)M.push([H,H]);M.push(["none","none"]),s.push({type:"radiobuttons",label:"Link Color",current_value:f.link_color.colors,choices:M,func:H=>{this._changeLinkColorScale(H,null,!0)}}),s.push({type:"doubleslider",max:F[1],min:F[0],doc:this.__doc__,current_value:this.config.link_color.domain,label:"Link Color Domain",func:(H,J)=>{this._changeLinkColorScale(null,[H,J],!0)}}),F=this.dataStore.getColumnQuantile(f.param[4],.01),s.push({label:"Link Thickness",type:"dropdown",values:[T,"name","field"],current_value:f.param[4],func:H=>{f.param[4]=H},onchange:(H,J)=>{f.param[4]=J;const K=H["Link Thickness Domain"].noUiSlider,oe=this.dataStore.getColumnQuantile(J,.01);K.updateOptions({range:{max:oe[1],min:oe[0]}}),K.set(oe),this.changeLinkThicknessParameter(J,oe)}}),s.push({type:"doubleslider",max:20,min:1,doc:this.__doc__,current_value:this.config.link_thickness.range,label:"Link Thickness Range",func:(H,J)=>{this._changeLinkThicknessScale(null,[H,J],!0)}}),s.push({type:"doubleslider",max:F[1],min:F[0],doc:this.__doc__,current_value:this.config.link_thickness.domain,label:"Link Thickness Domain",func:(H,J)=>{this._changeLinkThicknessScale([H,J],null,!0)}}),s.push({type:"check",current_value:f.link_thickness.show_legend,label:"Show Link Thickness Legend",func:H=>{f.link_thickness.show_legend=H,this._changeLinkThicknessScale()}}),F=this.dataStore.getColumnQuantile(f.param[3],.01),s.push({label:"Link Length",type:"dropdown",values:[T,"name","field"],current_value:f.param[3],func:H=>{f.param[3]=H},onchange:(H,J)=>{f.param[3]=J;const K=H["Link Length Domain"].noUiSlider,oe=this.dataStore.getColumnQuantile(J,.01);K.updateOptions({range:{max:oe[1],min:oe[0]}}),K.set(oe),this.changeLinkLengthParameter(J,oe)}}),s.push({type:"doubleslider",max:200,min:1,doc:this.__doc__,current_value:this.config.link_length.range,label:"Link Length Range",func:(H,J)=>{this._changeLinkLengthScale(null,[H,J],!0)}}),s.push({type:"doubleslider",max:F[1],min:F[0],doc:this.__doc__,current_value:this.config.link_length.domain,label:"Link Length Domain",func:(H,J)=>{this._changeLinkLengthScale([H,J],null,!0)}}),s.push({type:"check",current_value:f.show_directionality,label:"Show Directionality",func:H=>{f.show_directionality=H,this.arrows.style("opacity",H?1:0)}});const P=[["Cells","cells"],["State","state"]];return f.param[7]&&P.push(["Type","type"]),s.push({type:"radiobuttons",label:"Node Color",current_value:f.node_color,choices:P,func:H=>{this._changeNodeColor(H)}}),F=this.dataStore.getMinMaxForColumn(f.param[6]),s.push({type:"doubleslider",max:50,min:1,doc:this.__doc__,current_value:this.config.node_size.range,label:"Node Size Range",func:(H,J)=>{this._changeNodeSizeScale(null,[H,J],!0)}}),s.push({type:"doubleslider",max:F[1],min:F[0],doc:this.__doc__,current_value:this.config.node_size.domain,label:"Node Size Domain",func:(H,J)=>{this._changeNodeSizeScale([H,J],null,!0)}}),s.push({type:"check",current_value:f.node_size.show_legend,label:"Show Node Size Legend",func:H=>{f.node_size.show_legend=H,this._changeNodeSizeScale()}}),s.push({type:"slider",max:2,min:0,doc:this.__doc__,current_value:f.link_strength,label:"Link Strength",func:H=>{f.link_strength=H,this.changeParameter()}}),s.push({type:"slider",max:0,min:-1e3,doc:this.__doc__,current_value:f.node_repulsion,label:"Node Repulsion",func:H=>{f.node_repulsion=H,this.changeParameter()}}),s}}BaseChart.types.cell_network_chart={name:"Spatial Connectivity Map",required:["interactions"],methodsUsingColumns:["changeLinkThicknessParameter","changeLinkLengthParameter","changeLinkColorParameter"],class:CellNetworkChart,init:(d,s,f)=>{const _=s.interactions,S=s.interactions.spatial_connectivity_map;d.param=[_.pivot_column,_.interaction_columns[0],_.interaction_columns[1],S.link_length,S.link_thickness,S.link_color,S.node_size],S.cell_type&&d.param.push(S.cell_type),d.category=f.pivot},extra_controls:d=>{const s=d.interactions.pivot_column;return[{type:"dropdown",name:"pivot",label:d.getColumnName(s),values:d.getColumnValues(s).map(f=>({name:f,value:f}))}]}};class SingleHeatMap extends SVGChart{constructor(s,f,_){super(s,f,_,{x:{type:"band"},y:{type:"band"}}),_.title||this._setTitle();const S=this.config.param;let T=this.dataStore.getColumnValues(S[0]);this.y_scale.domain(T.slice(0)),T=this.dataStore.getColumnValues(S[1]),this.x_scale.domain(T.slice(0));const F=this.config;F.color_scale=F.color_scale||{log:!1,min_max:s.getColumnQuantile(S[2],.01)},F.color_legend||(F.color_legend={display:!0}),this.setColorFunction(),this.initialSetUp(),this.addToolTip(),this.drawChart()}remove(s=!0){super.remove()}onDataHighlighted(s){const f=s.indexes[0],_=this.graph_area.selectAll("rect");_.attr("stroke","white").style("stroke-width","0px"),_.filter(S=>!!(S&&S[3]===f)).attr("stroke","black").style("stroke-width","4px"),this.highlight=f}_setTitle(){const s=this.config.category,f=this.dataStore.getColumnName(this.config.param[2]);this.setTitle(`${s}-${f}`)}changeCategory(s){this.config.category=s,this.initialSetUp(),this.drawChart(),this._setTitle()}onDataFiltered(s){this.initialSetUp(),this.drawChart()}changeValues(s){this.config.param[2]=s,this.setColorFunction(),this.initialSetUp(),this.drawChart(),this._setTitle()}initialSetUp(){const s=this.config,f=s.param,_=this.dataStore.columnIndex[f[0]],S=_.data,T=this.dataStore.columnIndex[f[1]],F=T.data;let M=null,P=null,H=_.values.length,J=T.values.length;this.y_scale.domain(_.values.slice(0)),this.x_scale.domain(T.values.slice(0));for(const be of this.dataStore.dimensions)if(be.filterColumns&&be.noclear){if(be.filterColumns[0]===f[0]){const Re=be.filterArguments;M=Re.map(Fe=>_.values.indexOf(Fe)),H=Re.length,this.y_scale.domain(Re.slice(0))}if(be.filterColumns[0]===f[1]){const Re=be.filterArguments;P=Re.map(Fe=>T.values.indexOf(Fe)),J=Re.length,this.x_scale.domain(Re.slice(0))}}const K=this.dataStore.columnIndex,oe=K[f[3]].data,se=K[f[2]].data,ae=this.dataStore.size,ge=new Array;for(let be=0;be<H;be++)ge[be]=new Array(J);const he=this.dataStore.columnIndex[f[3]].values.indexOf(s.category);let Be=null,pe=null;s.show_group_interactions&&(Be=this.dataStore.getRawColumn(f[4]),pe=this.dataStore.getRawColumn(f[5]));for(let be=0;be<ae;be++)if(oe[be]===he){let Re=S[be],Fe=F[be];if(Re=M?M.indexOf(Re):Re,Fe=P?P.indexOf(Fe):Fe,Fe===-1||Re===-1)continue;const Me=ge[Re][Fe];Me?(Me[2]+=se[be],Me[4]++):(ge[Re][Fe]=[S[be],F[be],se[be],be,1],Be&&ge[Re][Fe].push(`${Be[be]}-${pe[be]}`))}for(let be=0;be<H;be++)for(let Re=0;Re<J;Re++){const Fe=ge[be][Re];Fe[2]/=Fe[4]}this.data=ge}drawChart(s=300){this.updateAxis();const f=select(this.contentDiv).transition().duration(s).ease(linear),S=this.config.param,T=this.dataStore.getColumnValues(this.config.param[0]),F=this.dataStore.getColumnValues(this.config.param[1]),M=this.y_scale.domain().length,P=this.x_scale.domain().length,H=this._getContentDimensions(),J=H.width/P,K=H.height/M,oe=this.dataStore.filterArray,se="#E0E0E0";let ae=null,ge=null,he=null;if(S.length===6){const Be=this.dataStore.getColumnValues(S[4]),pe=this.dataStore.getColumnValues(S[5]);ge=this.dataStore.getRawColumn(S[4]),he=this.dataStore.getRawColumn(S[5]),ae=new Array(Be.length);for(let be=0;be<ae.length;be++){const Re=new Array(pe.length);Re.fill(0),ae[be]=Re}}if(this.graph_area.selectAll(".heatmap-row").data(this.data).join("g").attr("transform",(Be,pe)=>`translate(0,${pe*K})`).attr("class","heatmap-row").selectAll(".heatmap-rect").data(Be=>Be).join("rect").attr("class","heatmap-rect").attr("x",(Be,pe)=>pe*J+1).attr("height",K-2).attr("width",J-2).on("click",(Be,pe)=>{this.dataStore.dataHighlighted([pe[3]],this)}).on("mouseover pointermove",(Be,pe)=>{const be=F[pe[0]],Re=T[pe[1]];this.showToolTip(Be,`${be}<br>${Re}<br>${pe[2].toPrecision(3)}`)}).on("mouseleave",()=>{this.hideToolTip()}).transition(f).attr("fill",(Be,pe)=>!Be||Number.isNaN(Be[2])||oe[Be[3]]>0?se:(ae&&ae[ge[Be[3]]][he[Be[1]]]++,this.colorFunction(Be[2]))),ae){const Be=this.dataStore.getColumnValues(S[4]),pe=this.dataStore.getColumnValues(S[5]),be=[];for(let Re=0;Re<Be.length;Re++)for(let Fe=0;Fe<pe.length;Fe++)be.push(`${Be[Re]}-${pe[Fe]}:${ae[Re][Fe]}`);this.legendIcon.setAttribute("aria-label",be.join(", "))}this.updateAxis()}setSize(s,f){super.setSize(s,f),this.drawChart()}getColorLegend(){const f={overideValues:{colorLogScale:this.config.color_scale.log,colors:["#313695","#4575B4","#74ADD1","#ABD9E9","#E0F3F8","#E0F3F8","#FFFFBF","#FEE090","#FDAE61","#F46D43","#D73027","#A50026"]},name:"Scale"},_=this.config.color_scale.min_max;return _&&(f.overideValues.min=_[0],f.overideValues.max=_[1]),this.dataStore.getColorLegend(this.config.param[2],f)}getSettings(){const s=super.getSettings(),f=this.config,S=this.dataStore.getColumnValues(f.param[3]).map(M=>({t:M,v:M})),T=this.dataStore.getColumnQuantile(f.param[2],.01);s.push({type:"doubleslider",max:T[1],min:T[0],doc:this.__doc__,current_value:f.color_scale.min_max,label:"Color Scale",func:(M,P)=>{f.color_scale.min_max=[M,P],this.setColorFunction(),this.drawChart()}}),s.push({label:"Change Category",type:"dropdown",values:[S,"t","v"],current_value:f.category,func:M=>{this.changeCategory(M)}});const F=this.dataStore.getColumnList("number");return s.push({label:"Change Values",type:"dropdown",values:[F,"name","field"],current_value:f.param[2],func:(M,P)=>{const H=this.dataStore.getColumnQuantile(M,.01);f.color_scale.min_max=H;const J=P["Color Scale"].noUiSlider;J.updateOptions({range:{max:H[1],min:H[0]}}),J.set(H),this.changeValues(M)}}),s}setColorFunction(){const s=this.config.param,f={useValue:!0,overideValues:{colorLogScale:this.config.color_scale.log,colors:["#313695","#4575B4","#74ADD1","#ABD9E9","#E0F3F8","#E0F3F8","#FFFFBF","#FEE090","#FDAE61","#F46D43","#D73027","#A50026"]}},_=this.config.color_scale.min_max;_&&(f.overideValues.min=_[0],f.overideValues.max=_[1]),this.colorFunction=this.dataStore.getColorFunction(s[2],f),this.setColorLegend()}}BaseChart.types.single_heat_map={name:"Interaction Matrix",required:["interactions"],methodsUsingColumns:["changeValues"],init:(d,s,f)=>{var S;const _=s.interactions;d.param=[_.interaction_columns[0],_.interaction_columns[1],f.value,_.pivot_column],(S=_.interaction_matrix)!=null&&S.groups&&(d.param=d.param.concat(_.interaction_matrix.groups)),d.category=f.pivot},extra_controls:d=>{const s=d.interactions.pivot_column,f=d.getColumnList("number");return[{type:"dropdown",name:"pivot",label:d.getColumnName(s),values:d.getColumnValues(s).map(_=>({name:_,value:_}))},{type:"dropdown",name:"value",label:"Value To Display",values:f.map(_=>({name:_.name,value:_.field}))}]},class:SingleHeatMap};class DotPlot extends SVGChart{constructor(s,f,_){_.title=_.title||s.getColumnName(_.param[0]),super(s,f,_,{x:{type:"band"},y:{type:"band"},ry:{}});const S=this.config.param,T=[],F=this.config;F.color_scale=F.color_scale||{log:!1},F.color_legend||(F.color_legend={display:!0}),F.fraction_legend||(F.fraction_legend={display:!0}),this.fractionScale=sqrt$3().domain([0,100]);for(let M=1;M<S.length;M++)T.push(this.dataStore.getColumnName(S[M]));this.x_scale.domain(T),this.dim=this.dataStore.getDimension("catcol_dimension"),this.addToolTip(),this.onDataFiltered(),this.colorScheme=scheme[8]}remove(s=!0){this.dim.destroy(s),super.remove()}removeFilter(){this.dim.removeFilter(),this.filter=[],this.drawChart()}setColorFunction(){const s=this.config.param,f=this.data.mean_range,_={useValue:!0,overideValues:{colorLogScale:this.config.color_scale.log,colors:this.colorScheme,max:f[1],min:f[0]}};this.colorFunction=this.dataStore.getColorFunction(s[1],_),this.setColorLegend()}getColorLegend(){const s=this.config.color_scale,f=this.data.mean_range,_={overideValues:{max:f[1],min:f[0],colorLogScale:s.log,colors:this.colorScheme},name:"Mean Expression"};return this.dataStore.getColorLegend(this.config.param[1],_)}showFractionLegend(){const s=this.fractionLegend,f=this.config;if(s&&(f.fraction_legend.position=[s.offsetLeft,s.offsetTop],s.remove()),!f.fraction_legend.display){this.nodeFractionLegend=void 0;return}const _=f.fraction_legend.position||[0,0];this.fractionLegend=getColorLegendCustom(this.fractionScale,{label:"fraction",type:"circle"}),this.contentDiv.append(this.fractionLegend),this.fractionLegend.style.top=`${_[1]}px`,this.fractionLegend.style.left=`${_[0]}px`}getConfig(){const s=super.getConfig(),f=this.linkThicknessLegend;return f&&(s.fraction_legend.position=[f.offsetLeft,f.offsetTop]),s}onDataFiltered(s){if(this.dim===s||this.isPinned)return;s==="all_removed"&&(this.dim.removeFilter(),this.resetButton.style.display="none");const f={method:"averages_simple",threshold:this.config.threshold_value};this.dim.getAverages(_=>{this.data=_,this.setColorFunction(),this.drawChart()},this.config.param,f)}filterCategories(s,f){this.dim.filter("filterCatCol",[this.config.param[0],f],{threshold:this.config.threshold_value,cat:s}),this.drawChart(),this.resetButton.style.display="inline"}drawChart(s=400){const f=select(this.contentDiv).transition().duration(s).ease(linear),_=this._getContentDimensions(),S=_.width/(this.config.param.length-1),T=this.dim.filterMethod;this.setColorFunction();const F=this.dataStore.getColumnValues(this.config.param[0]),M=this.data.data.filter(K=>K.count!==0);this.y_scale.domain(M.map(K=>F[K.id])),this.updateAxis();const P=_.height/M.length;let H=(S>P?P:S)/2;H=H>25?25:H,this.fractionScale.range([0,H]),this.showFractionLegend();const J=P/2;this.graph_area.selectAll(".dotplot-row").data(M,K=>K.id).join(K=>K.append("g").attr("class","dotplot-row").attr("transform",(oe,se)=>`translate(${-_.width},${se*P})`),null,K=>K.transition(f).attr("transform",(oe,se)=>`translate(${_.width},${se*P})`).remove()).call(K=>K.transition(f).attr("transform",(oe,se)=>`translate(0,${se*P})`)).selectAll(".dotplot-circle").data(K=>K.values,K=>K.id).join(K=>K.append("circle").attr("class","dotplot-circle").attr("stroke","black").on("click",(oe,se)=>{this.filterCategories(F[se.cat_id],se.id)}).on("mouseover pointermove",(oe,se)=>{this.showToolTip(oe,`(<em>${se.id}, ${F[se.cat_id]}</em>)<br>percentage: ${se.frac.toFixed(0)}%`)}).on("mouseout",()=>{this.hideToolTip()})).attr("stroke-width",K=>T&&this.dim.filterArguments.cat===F[K.cat_id]&&this.dim.filterColumns[1]===K.id?4:1).transition(f).attr("cx",(K,oe)=>oe*S+.5*S).attr("cy",J).attr("r",K=>this.fractionScale(K.frac)).attr("fill",(K,oe)=>this.colorFunction(K.mean))}setSize(s,f){super.setSize(s,f),this.drawChart()}getSettings(){const s=this.config;return super.getSettings().concat([{type:"check",label:"Cluster Rows",current_value:s.cluster_rows,func:_=>{s.cluster_rows=_,this.clusterRows(),this.drawChart()}},{type:"check",label:"Cluster Columns",current_value:s.cluster_columns,func:_=>{s.cluster_columns=_,this.clusterColumns(),this.drawChart()}},{type:"radiobuttons",label:"Averaging Method",current_value:s.method,choices:[["Mean","mean"],["Median","median"]],func:_=>{s.method=_,this.onDataFiltered()}},{type:"radiobuttons",label:"Trim to Percentile",current_value:s.color_scale.trim||"none",choices:[["No Trim","none"],["0.001","0.001"],["0.01","0.01"],["0.05","0.05"]],func:_=>{s.color_scale.trim=_,this.onDataFiltered()}},{label:"Show Color Legend",type:"check",current_value:s.color_legend?s.color_legend.display:!0,func:_=>{s.color_legend.display=_,this.setColorLegend()}},{type:"check",label:"Log Color Scale",current_value:s.color_scale.log,func:_=>{s.color_scale.log=_,this.setColorFunction(),this.drawChart()}}])}}BaseChart.types.dot_plot={name:"Dot Plot",class:DotPlot,params:[{type:"text",name:"Categories on x-axis"},{type:"_multi_column:number",name:"Fields on y axis"}]};class ImageTable{constructor(s,f,_){typeof s=="string"&&(s=document.getElementById(`#${s}`)),_||(_={}),this.domId=this._getRandomString(),this.row_first=0,this.row_last=139,this.tile_height=205,this.tile_width=205,this.__doc__=document,this.display_columns=[],this.selection_mode=!0,this.imageFunc=_.imageFunc,this.base_url=getProjectURL(_.base_url),this.parent=s,this.selected_tiles={},this.cache_size=5;const S=this.parent.getBoundingClientRect();this.config=_,_.background_color,this.view_port=createEl("div",{styles:{height:`${S.height}px`,width:`${S.width}px`,overflow:"auto"}},this.parent),this.canvas=createEl("div",{styles:{position:"relative"}},this.view_port),this.canvas.addEventListener("click",H=>{this.imageClicked(H,H.srcElement)}),this.canvas.addEventListener("mouseover",H=>{this.mouseOver(H,H.srcElement)}),this.canvas.addEventListener("keydown",H=>{this.keyPressed(H)}),this.data_view=f,this._setCanvasHeight(),this.view_port.addEventListener("scroll",H=>this._hasScrolled(H)),this.parent.append(this.view_port),this.resize_timeout=null,this.resize_timeout_length=50,this.listeners={image_clicked:new Map,image_over:new Map,image_out:new Map,data_changed:new Map,image_selected:new Map},this.highlightcolors=null,this.tag_color_palletes={},this.image_suffix=_.image_suffix?_.image_suffix:".png",_.columns&&this.setColumns(_.columns);const T=new Image;T.crossOrigin="anonymous",T.onload=H=>{this.originalDimensions=[T.width,T.height],this.preferred_width=this.img_width=T.width,this.preferred_height=this.img_height=T.height,_.initial_image_width&&(this.preferred_width=_.initial_image_width,this.preferred_height=Math.round(this.preferred_width/this.img_width*this.img_height)),this._resize()};const F=getProjectURL(this.config.base_url),M=this.config.image_type,P=this.data_view.getItemField(1,this.config.image_key);T.src=`${F}${P}.${M}`}mouseOver(s,f){if(f.id){const _=f.id.split("-"),S=Number.parseInt(_[1]),T=this.data_view.getItem(S);if(!T)return;if(this.image_over){if(T.id===this.image_over.id)return;this.listeners.image_out.forEach(F=>{F(s,this.image_over[0],self.image_over[1])})}this.listeners.image_over.forEach(F=>{F(s,T,f)}),this.image_over=f}else this.image_over&&this.listeners.image_out.forEach(_=>{_(s,self.image_over[0],self.image_over[1])}),this.image_over=null}imageClicked(s,f){let _=f.id;if(_||(_=f.parentElement.id),!_)return;const S=_.split("-");if(S[0]==="mlvtile"){let T=null;const F=Number.parseInt(S[2]);if(s.shiftKey&&self.last_img_clicked!=null){const P=this.last_img_clicked.index;range=[],T=[];const H=F-P<0?-1:1;let J=P+1,K=F+1;H===-1&&(J=F,K=P);for(let oe=J;oe<K;oe++){const se=this.data_view.getId(oe);T.push(se)}T.push(this.data_view.getId(P))}const M=this.data_view.getId(F);this.listeners.image_clicked.forEach(P=>{P(s,M,f)}),this.last_index_clicked=F,this.selection_mode&&this.setSelectedTiles([F],s.ctrlKey,!0)}}keyPressed(s){if(s.which===39||s.which===40){if(this.last_index_clicked===this.data_view.getFilteredItems().length-1)return;(this.last_index_clicked||this.last_index_clicked===0)&&(this.last_index_clicked++,this.setSelectedTiles([this.data_view.getItem(this.last_index_clicked).id],!1,!0),this.last_index_clicked>this.getLastTileInView()&&this.show(this.last_index_clicked))}else if(s.which===37||s.which===38){if(this.last_index_clicked===0)return;this.last_index_clicked&&(this.last_index_clicked--,this.setSelectedTiles([this.data_view.getItem(this.last_index_clicked).id],!1,!0),this.last_index_clicked<this.getFirstTileInView()&&this.show(this.last_index_clicked))}}addListener(s,f,_){const S=this.listeners[s];return S?(_||(_=this._getRandomString()),S.set(_,f),_):null}removeListener(s,f){const _=this.listeners[s];return _?_.delete(f):!1}setImageWidth(s,f){this.setImageDimensions([s,Math.round(s/this.img_width*this.img_height)],f)}setImageLabel(s){this.config.image_label=s;const f=this.getFirstTileInView();this.setImageDimensions(),this.show(f)}setImageTitle(s){this.config.image_title=s;const f=this.getFirstTileInView();this.show(f)}setImageDimensions(s,f){this.lrm=this.config.margins.left_right,this.tbm=this.config.margins.top_bottom;const _=this.getFirstTileInView();s?(this.preferred_width=s[0],this.preferred_height=s[1]):s=[this.preferred_width,this.preferred_height],this.width<this.preferred_width+this.lrm*2&&this.width!==0?(s[0]=this.width-this.lrm*3,this.num_per_row=1):(this.num_per_row=Math.ceil((this.width-this.lrm)/(this.preferred_width+this.lrm)),s[0]=Math.floor((this.width-2*this.lrm)/this.num_per_row)-this.lrm),s[1]=Math.round(s[0]/this.preferred_width*this.preferred_height),this.config.image_label&&(this.label_size=Math.round(s[1]/12),this.label_size=Math.max(this.label_size,12),this.tbm=this.tbm<this.label_size+4?this.label_size+4:this.tbm),this.tile_width=Number.parseInt(s[0])+this.lrm,this.tile_height=Number.parseInt(s[1])+this.tbm,this.t_width=Number.parseInt(s[0]),this.t_height=Number.parseInt(s[1]);const S=Math.floor((this.height+this.cache_size*this.tile_height)/this.tile_height);this.max_difference=S+this.cache_size,f&&this.show(_)}setPixelated(s){this.view_port.style.imageRendering=s?"pixelated":"auto"}resize(){clearTimeout(this.resize_timeout),this.resize_timeout=setTimeout(()=>{this._resize()},this.resize_timeout_length)}getFirstTileInView(){const s=this.view_port.scrollTop;return Math.floor(s/this.tile_height)*this.num_per_row}getLastTileInView(){const s=this.view_port.scrollTop+this.view_port.height();return Math.floor(s/this.tile_height)*this.num_per_row}setColumns(s){this.columns=s}setColorBy(s,f){this.color_by=s,this.color_overlay=f}_setCanvasHeight(){const s=Math.ceil(this.data_view.getLength()/this.num_per_row)*this.tile_height+this.tbm;this.canvas.style.height=`${s}px`}_hasScrolled(){clearTimeout(this.scroll_timeout);const s=this.view_port.scrollTop;let f=Math.floor((s-this.cache_size*this.tile_height)/this.tile_height);const _=Math.floor((s+this.height+this.cache_size*this.tile_height)/this.tile_height);f<0&&(f=0);let S=10;Math.abs(f-this.row_displayed_first)>this.max_difference&&(S=50),this.scroll_timeout=setTimeout(()=>{Math.abs(f-this.row_displayed_first)>this.max_difference?this.render(f,_,!0):this.render(f,_)},S)}_removeByClass(s){document.querySelectorAll(s).forEach(f=>f.remove())}render(s,f,_){if(_){this.canvas.innerHTML="";for(let S=s;S<f;S++)this._addRow(S)}else{if(s===this.row_displayed_first&&s!==0)return;if(s<this.row_displayed_first){for(let S=s;S<this.row_displayed_first;S++)this._addRow(S);for(let S=f;S<this.row_displayed_last;S++)this._removeByClass(`.mlv-tile-${this.domId}-${S}`)}else{for(let S=this.row_displayed_last;S<f;S++)this._addRow(S);for(let S=this.row_displayed_first;S<s;S++)this._removeByClass(`.mlv-tile-${this.domId}-${S}`)}if(s===0)for(let S=f;S<this.row_displayed_last;S++)this._removeByClass(`.mlv-tile-${this.domId}-${S}`)}this.row_displayed_first=s,this.row_displayed_last=f}_resize(s){s||(s=this.getFirstTileInView());const f=this.parent.getBoundingClientRect();this.width=Math.round(f.width),this.height=Math.round(f.height),this.view_port.style.height=`${this.height}px`,this.view_port.style.width=`${this.width}px`,this.setImageDimensions(),this.show(s)}_calculateTopBottomRow(s){s||(s=0);let f=0;s||s===0?f=Math.floor(s/this.num_per_row)*this.tile_height:f=this.view_port.scrollTop;const S=this.view_port.getBoundingClientRect().height;let T=Math.floor((f-this.cache_size*this.tile_height)/this.tile_height);const F=Math.floor((f+S+this.cache_size*this.tile_height)/this.tile_height);return T<0&&(T=0),{top:T,bottom:F,scroll_top:f}}setSelectedTiles(s,f,_){if(!f){for(const S in this.selected_tiles){const T=this.__doc__.getElementById(`mlvtile-${this.domId}-${S}`);T&&(T.style.border=this.selected_tiles[S])}this.selected_tiles={}}for(const S of s){const T=this.__doc__.getElementById(`mlvtile-${this.domId}-${S}`);T&&(this.selected_tiles[S]=T.style.border,T.style.border="4px solid goldenrod",console.log(T.style.border))}_&&this.listeners.image_selected.forEach(S=>{S(s)})}scrollToTile(s,f){const _=this.data_view.data.indexOf(s),S=this._calculateTopBottomRow(_);Math.abs(S.top-this.row_displayed_first)>this.max_difference?this.render(S.top,S.bottom,!0):this.render(S.top,S.bottom),this.view_port.scrollTop=S.scroll_top,f&&this.setSelectedTiles([_])}_getRandomString(s,f){s||(s=6),f=f==null?void 0:f.toLowerCase();let _="",S=0;const T=f==="a"?10:0,F=f==="n"?10:62;for(;S++<s;){let M=Math.random()*(F-T)+T<<0;_+=String.fromCharCode(M+=M>9?M<36?55:61:48)}return _}show(s){s||(s=this.getFirstTileInView()),this._setCanvasHeight();const f=this._calculateTopBottomRow(s);this.render(f.top,f.bottom,!0),this.view_port.scrollTop=f.scroll_top}_addRow(s){const f=this.config.image_label,_=s*this.num_per_row,S=_+this.num_per_row,T=s*this.tile_height+this.tbm;let F=0;const M=`${this.t_width}px`,P=`${this.t_height}px`,H=getProjectURL(this.config.base_url),J=this.config.image_type,K=this.config.image_title||"Gene",oe=this.data_view.dataStore.columnIndex[K]!==void 0;for(let se=_;se<S;se++){const ae=this.data_view.getId(se);if(ae==null)return;const ge=this.data_view.getItemField(se,this.config.image_key),he=oe?`${K} '${this.data_view.getItemField(se,K)}'`:ge,Be=ge==="missing",pe=F*this.tile_width+this.lrm;F++;let be="";if(this.color_by){const Fe=this.color_by(ae);be=`4px solid ${Fe}`,this.color_overlay&&createEl("div",{styles:{height:P,width:M,left:`${pe}px`,top:`${T}px`,zIndex:1,pointerEvents:"none",backgroundColor:Fe,opacity:this.color_overlay},classes:["mlv-tile",`mlv-tile-overlay-${this.domId}`,`mlv-tile-${this.domId}-${s}`]},this.canvas)}const Re=[];this.selected_tiles[ae]&&(be="4px solid goldenrod"),Be&&Re.push("mlv-tile-missing"),createEl("img",{src:`${H}${ge}.${J}`,id:`mlvtile-${this.domId}-${se}`,styles:{border:be,height:P,width:M,left:`${pe}px`,top:`${T}px`},alt:he,title:he,crossorigin:"",classes:["mlv-tile",`mlv-tile-${this.domId}`,`mlv-tile-${this.domId}-${s}`].concat(Re)},this.canvas),f&&createEl("div",{text:this.data_view.getItemField(se,f),classes:["mdv-image-label"],styles:{width:M,fontSize:`${this.label_size}px`,top:`${T-this.label_size}px`,left:`${pe}px`}},this.canvas)}}}class ImageTableChart extends BaseChart{constructor(s,f,_){super(s,f,_),this.dataModel=new DataModel(s,{autoupdate:!1}),this.dataModel.setColumns(this.config.param),this.dataModel.updateModel();const S=this.config;S.margins=S.margins||{top_bottom:10,left_right:10};let T=this.dataStore.images;T&&(T=T[S.image_set]),this.grid=new ImageTable(this.contentDiv,this.dataModel,{base_url:T?T.base_url:S.images.base_url,image_type:T?T.type:S.images.type,image_key:S.param[0],initial_image_width:S.image_width,image_label:S.image_label,margins:S.margins}),this.grid.addListener("image_clicked",(F,M)=>{this.dataStore.dataHighlighted([M],this)},S.id),S.sortBy&&this.sortBy(S.sortBy,S.sortOrder),S.color_by&&this.colorByColumn(S.color_by),S.pixelated&&this.setPixelated(S.pixelated)}setSize(s,f){super.setSize(s,f),this.grid.resize()}onDataFiltered(){this.dataModel.updateModel(),this.grid.show()}getColorOptions(){return{colorby:"all",color_overlay:0}}onDataHighlighted(s){if(s.source===this)return;const f=s.indexes[0];this.grid.scrollToTile(f,!0)}setImageLabel(s){this.config.image_label=s,this.grid.setImageLabel(s)}colorByColumn(s){this.grid.setColorBy(this.getColorFunction(s,!1),this.config.color_overlay);const f=this.grid.getFirstTileInView();this.grid.show(f)}colorByDefault(){this.grid.setColorBy(null);const s=this.grid.getFirstTileInView();this.grid.show(s)}sortBy(s,f=!0){this.config.sortBy=s,this.config.sortOrder=f,this.dataModel.sort(s,f?"asc":"desc");const _=this.grid.getFirstTileInView();this.grid.show(_)}setPixelated(s){this.config.pixelated=s,this.grid.setPixelated(s)}setImageTitle(s){this.config.image_title=s,this.grid.setImageTitle(s)}getSettings(){const s=this.grid.originalDimensions,f=this.config,_=super.getSettings(),S=this.dataStore.getColumnList("all",!0);return _.concat([{type:"slider",max:Math.max(128,s[1]*4),min:10,doc:this.__doc__,label:"Image Size",current_value:f.image_width||s[0],func:T=>{f.image_width=T,this.grid.setImageWidth(T,!0)}},{label:"Pixelated?",type:"check",current_value:f.pixelated||!1,func:T=>{this.setPixelated(T)}},{label:"Label",type:"dropdown",values:[S,"name","field"],current_value:f.image_label||"__none__",func:T=>{this.setImageLabel(T==="__none__"?null:T)}},{label:"Tooltip",type:"dropdown",values:[S,"name","field"],current_value:f.image_title||"__none__",func:T=>{this.setImageTitle(T==="__none__"?void 0:T)}},{label:"Sort By",type:"dropdown",values:[S,"name","field"],current_value:f.sortBy||"__none__",func:T=>{this.sortBy(T==="__none__"?null:T)}},{label:"Sort Ascending?",type:"check",current_value:f.sortOrder||!0,func:T=>{this.sortBy(f.sortBy,T)}}])}changeBaseDocument(s){super.changeBaseDocument(s),this.grid.__doc__=s}}BaseChart.types.image_table_chart={class:ImageTableChart,name:"Image Table",required:["images"],methodsUsingColumns:["setImageLabel","sortBy","setImageTitle"],configEntriesUsingColumns:["image_label","sortBy","image_title"],init:(d,s,f)=>{const _=s.images[f.image_set];d.param=[_.key_column],d.images={image_set:f.image_set},d.sortBy=f.sort_by==="__none__"?null:f.sort_by,d.image_title=f.image_title==="__none__"?null:f.image_title},extra_controls:d=>{const s=[];for(const _ in d.images)s.push({name:_,value:_});const f=d.getColumnList().map(_=>({name:_.name,value:_.field}));return f.unshift({name:"None",value:"__none__"}),[{type:"dropdown",name:"image_set",label:"Image Set",values:s},{type:"dropdown",name:"image_title",label:"Tooltip",values:f},{type:"dropdown",name:"sort_by",label:"Sort By",values:f}]}};class CellRadialChart extends SVGChart{constructor(s,f,_){super(s,f,_,{});const S=this.config;if(S.label_size=S.label_size||12,this.stratify=d3Stratify().id(T=>T[0]).parentId(T=>T[1]),this.linkThicknessScale=linear$1(),S.scales={},!S.link_thickness){S.link_thickness={type:"constant",width:3};const T=this.dataStore.getColumnQuantile(S.param[4],.01);this._changeLinkThicknessScale(T,[1,10])}S.state_legend=S.state_legend||{show:!0,position:[10,20]},S.outer_cell_color=S.outer_cell_color||"state",this.extra_legends=["state_legend"],S.node_size=S.node_size||{inner:5,outer:5},S.center_cells=S.center_cells||this.dataStore.getColumnValues(S.param[1]).slice(0,2),S.states=S.states||this.dataStore.getColumnValues(S.param[0]).slice(0,2),S.label_size=S.label_size||13,this.makeHierarchy(),this.drawTree(),this.setStateLegend()}onDataFiltered(){this.makeHierarchy(),this.drawTree(),this.setStateLegend()}getConfig(){const s=super.getConfig(),f=this.state_legend;return f&&(s.state_legend.position=[f.offsetLeft,f.offsetTop]),s}setStateLegend(){const s=this.config,f=this.config.state_legend;if(this.state_legend&&this.state_legend.remove(),!f.show)return;const _=this.dataStore.columnIndex[s.param[0]];let S=_.values,T=this.dataStore.getColumnColors(s.param[0]);s.states&&(T=T.filter((F,M)=>s.states.indexOf(S[M])!==-1),S=S.filter(F=>s.states.indexOf(F)!==-1)),this.state_legend=getColorLegend(T,S,{label:_.name}),this.contentDiv.append(this.state_legend),this.state_legend.style.top=`${f.position[1]}px`,this.state_legend.style.left=`${f.position[0]}px`}_changeNodeSize(){const s=this.config;this.nodes.attr("r",f=>{if(f.depth===1)return s.node_size.inner;if(f.depth===3)return s.node_size.outer})}_changeLinkThicknessScale(s,f,_){const S=this.config,T=this.dataStore.getRawColumn(S.param[4]);f&&(S.link_thickness.range=f),s&&(S.link_thickness.domain=s),this.linkThicknessScale.domain(S.link_thickness.domain).range(S.link_thickness.range).clamp(!0);const F=S.link_thickness.type==="constant",M=`${S.link_thickness.width}px`;_&&this.links.attr("stroke-width",P=>P.depth===3?F?M:this.linkThicknessScale(T[P.id]):M)}setLinkThicknessColumn(s){this.config.param[4]=s;const f=this.dataStore.getColumnQuantile(s,.01);this._changeLinkThicknessScale(f,null,!0)}getSettings(){const s=super.getSettings(),f=this.config,_=this.dataStore.getColumnValues(f.param[1]),S=this.dataStore.getColumnValues(f.param[0]),T=this.dataStore.getColumnList("number"),F=this.dataStore.getColumnQuantile(f.param[4],.01);return s.concat([{type:"slider",max:20,min:5,doc:this.__doc__,current_value:f.label_size,label:"Label Size",func:P=>{f.label_size=P,this.graph_area.selectAll("text").attr("font-size",P)}},{type:"multidropdown",current_value:f.center_cells,values:[_.map(P=>[P]),0,0],label:"Central Cells",func:P=>{f.center_cells=P,this.makeHierarchy(),this.drawTree()}},{type:"multidropdown",current_value:f.states,values:[S.map(P=>[P]),0,0],label:"Cell states",func:P=>{f.states=P,this.makeHierarchy(),this.drawTree(),this.setStateLegend()}},{type:"slider",label:"Inner Node Size",max:20,min:1,doc:this.__doc__,current_value:f.node_size.inner,func:P=>{f.node_size.inner=P,this.drawTree()}},{type:"check",label:"Show Inner Links",current_value:f.central_links,func:P=>{f.central_links=P,this.drawTree()}},{type:"slider",label:"Outer Node Size",max:20,min:1,doc:this.__doc__,current_value:f.node_size.outer,func:P=>{f.node_size.outer=P,this.drawTree()}},{type:"radiobuttons",label:"Outer Node Color",current_value:f.outer_cell_color,choices:[["state","state"],["Cell color","cell_color"]],func:P=>{f.outer_cell_color=P,this.drawTree()}},{type:"radiobuttons",label:"Link Thickness Type",current_value:f.link_thickness.type,choices:[["constant","constant"],["based on column","column"]],func:P=>{f.link_thickness.type=P,this._changeLinkThicknessScale(null,null,!0)}},{type:"slider",label:"Link Thickness",max:10,min:1,doc:this.__doc__,current_value:this.config.link_thickness.width,func:P=>{f.link_thickness.width=P,this._changeLinkThicknessScale(null,null,!0)}},{label:"Link Thickness Column",type:"dropdown",values:[T,"name","field"],current_value:f.param[4],func:(P,H)=>{const J=H["Link Thickness Domain"].noUiSlider,K=this.dataStore.getColumnQuantile(P,.01);J.updateOptions({range:{max:K[1],min:K[0]}}),J.set(K),this.setLinkThicknessColumn(P)}},{type:"doubleslider",max:20,min:1,doc:this.__doc__,current_value:this.config.link_thickness.range,label:"Link Thickness Range",func:(P,H)=>{this._changeLinkThicknessScale(null,[P,H],!0)}},{type:"doubleslider",max:F[1],min:F[0],doc:this.__doc__,current_value:this.config.link_thickness.domain,label:"Link Thickness Domain",func:(P,H)=>{this._changeLinkThicknessScale([P,H],null,!0)}}])}drawTree(){const s=this._getContentDimensions(),f=this.config,_=this.dataStore.getRawColumn(this.config.param[4]),T=Math.min(s.width,s.height)/2.8;this.graph_area.attr("transform",`translate(${s.left+s.width/2},${s.top+s.height/2})`);const F=this.dataStore.getColumnColors(f.param[0]),M=this.dataStore.getColumnColors(f.param[1]),P=this.dataStore.getColumnColors(f.param[2]),H=this.dataStore.getRawColumn(f.param[0]),K=d3Tree().size([360,T]).separation((ve,At)=>(ve.parent===At.parent?1:2)/ve.depth)(this.root);this.graph_area.selectAll(".link").remove(),this.graph_area.selectAll(".node").remove(),this.graph_area.selectAll(".wedge").remove(),this.graph_area.selectAll(".ring").remove();const oe={},se=K.descendants().slice(1),ae=T/10;se.forEach(ve=>{ve.depth===1&&(ve.y+=ae)});const ge={};for(const ve of se){if(ve.depth!==3)continue;const At=ve.data[1];ge[At]?(ge[At][0]=Math.min(ge[At][0],ve.x),ge[At][1]=Math.max(ge[At][1],ve.x)):ge[At]=[ve.x,ve.x,ve.data[3]]}const he=[];for(const ve in ge){const At=ge[ve],Ct=ve.split("|");he.push({startAngle:(At[0]-2)*Math.PI/180,endAngle:(At[1]+2)*Math.PI/180,cell:Ct[0],state:Ct[1],sid:At[2]})}const Be=arc().innerRadius(T*(2/3)).outerRadius(T+5);this.graph_area.selectAll(".wedge").data(he).enter().append("path").attr("class","wedge").attr("d",Be).attr("opacity",.8).attr("fill",ve=>F[ve.sid]).attr("stroke","gray").attr("stroke-width",1);const pe=arc().startAngle(0).endAngle(2*Math.PI),be=[{outerRadius:T+5,innerRadius:T-5,color:"blue"},{outerRadius:T*1/3+ae+5,innerRadius:T*1/3+ae-5,color:"green"}];this.graph_area.selectAll(".ring").data(be).enter().append("path").attr("class","ring").attr("d",pe).attr("opacity",.4).attr("fill",ve=>ve.color).attr("stroke","gray").attr("stroke-width",1);const Re=f.link_thickness.type==="constant";this.links=this.graph_area.selectAll(".link").data(se).enter().filter(ve=>f.central_links?!0:ve.depth>1).append("path").attr("class","link").attr("fill","none").attr("stroke","currentColor").attr("stroke-width",ve=>ve.depth===3?Re?f.link_thickness.type:this.linkThicknessScale(_[ve.id]):f.link_thickness.type).attr("d",ve=>(oe[ve.depth]=ve.y,ve.depth>1?"M"+project(ve.x,ve.y)+"C"+project(ve.x,(ve.y+ve.parent.y)/2)+" "+project(ve.parent.x,(ve.y+ve.parent.y)/2)+" "+project(ve.parent.x,ve.parent.y):`M${project(ve.x,ve.y)}L${project(ve.parent.x,ve.parent.y)}`));const Fe=this.graph_area.selectAll(".node").data(se).enter().append("g").attr("class",ve=>`node${ve.children?" node--internal":" node--leaf"}`).attr("transform",ve=>`translate(${project(ve.x,ve.y)})`).on("click",ve=>{this.nodeClicked(ve)});this.nodes=Fe.filter(ve=>ve.depth!==2).append("circle").style("pointer-events","visible").attr("fill",ve=>ve.depth===1?M[ve.data[3]]:f.outer_cell_color==="state"?F[H[ve.data[0]]]:P[ve.data[4]]).attr("stroke","black").attr("stroke-width",1).attr("r",ve=>{if(ve.depth===1)return f.node_size.inner;if(ve.depth===3)return f.node_size.outer});const Me=`${this.config.label_size}px`;Fe.append("text").attr("dy",".31em").attr("font-size",Me).style("fill","currentColor").attr("font-family","Helvetica").attr("x",ve=>{const At=ve.depth===1?f.node_size.inner+1:f.node_size.outer+1;return ve.x<180==!ve.children?At:-At}).attr("alignment-baseline",ve=>ve.depth===1&&f.central_links?"hanging":"baseline").style("text-anchor",ve=>ve.children?ve.x>180?"start":"end":ve.x<180?"start":"end").attr("transform",ve=>ve.depth===1&&!f.central_links?"rotate(0)":`rotate(${ve.x<180?ve.x-90:ve.x+90})`).text(ve=>ve.depth===2?"":ve.data[2])}setSize(s,f){super.setSize(s,f),this.drawTree()}makeHierarchy(){const s=this.config,f=s.param,_=this.dataStore.columnIndex[f[1]],S=this.dataStore.columnIndex[f[2]],T=this.dataStore.columnIndex[f[0]];let F=s.center_cells.map(oe=>[oe,"root",oe,_.values.indexOf(oe)]);F.unshift(["root",null]);const M=new Set;for(const oe of s.states)for(const se of s.center_cells){const ae=`${oe}|${se}`;F.push([ae,se,oe]),M.add(ae)}const P=s.center_cells.length+1,H=P+M.size,J=new Set,K=this.dataStore.filterArray;for(let oe=0;oe<this.dataStore.size;oe++){if(K[oe]>0)continue;const se=_.values[_.data[oe]],ae=S.values[S.data[oe]],he=`${T.values[T.data[oe]]}|${se}`;let Be=!1;if(s.exclude_interactions){for(const pe of s.exclude_interactions)if(pe.indexOf(se)!==-1&&pe.indexOf(ae)!==-1){Be=!0;break}}Be||M.has(he)&&(J.add(he),F.push([oe,he,ae,T.data[oe],S.data[oe]]))}F=F.filter((oe,se)=>se<P||se>=H?!0:J.has(oe[0])),this.root=this.stratify(F)}}function project(d,s){const f=(d-90)/180*Math.PI,_=s;return[_*Math.cos(f),_*Math.sin(f)]}BaseChart.types.cell_radial_chart={name:"Radial Connectivty Map",required:["interactions"],methodsUsingColumns:["setLinkThicknessColumn"],init:(d,s,f)=>{const _=s.interactions,S=s.interactions.cell_radial_chart;d.param=[_.pivot_column,_.interaction_columns[0],_.interaction_columns[1],_.pivot_column,S.link_thickness],Object.assign(d,S.default_parameters)},class:CellRadialChart};class ImagePanZoom{constructor(s,f,_={}){this.container=s,this.img=new Image,this.img.style.position="absolute",this.img.onload=S=>{this.orig_dim=[this.img.naturalWidth,this.img.naturalHeight,this.img.naturalWidth/this.img.naturalHeight],this.container.append(this.img),this.fit()},makeDraggable(this.img),this.container.style.overflow="hidden",this.container.addEventListener("wheel",S=>{S.preventDefault(),this.zoom(Math.sign(S.deltaY)>0?-1:1,S)}),this.setImage(f)}setImage(s){this.img.src=s}fit(){const s=this.container.getBoundingClientRect();this.img.height=s.height,this.img.width=this.img.height*this.orig_dim[2],this.img.width>s.width?(this.img.width=s.width,this.img.height=this.img.width/this.orig_dim[2],this.img.style.top=`${(s.height-this.img.height)/2}px`,this.img.style.left="0px"):(this.img.style.top="0px",this.img.style.left=`${(s.width-this.img.width)/2}px`)}zoom(s,f){s=s>0?1.1:.9;const _=this.container.getBoundingClientRect(),S=this.img.getBoundingClientRect(),T=(f.clientX-_.left-this.img.offsetLeft)*(s-1),F=(f.clientY-_.top-this.img.offsetTop)*(s-1);this.img.width=S.width*s,this.img.height=S.height*s,this.img.style.left=`${this.img.offsetLeft-T}px`,this.img.style.top=`${this.img.offsetTop-F}px`}}class RowSummaryBox extends BaseChart{constructor(s,f,_){if(super(s,f,_),_.image){const T=createEl("div",{classes:["mdv-image-holder"],style:{height:`${Number.parseInt(this.width*.7)}px`}},this.contentDiv);this.imViewer=new ImagePanZoom(T,this._getImage(0))}this.paramHolders={};const S=createEl("div",{},this.contentDiv);for(const T of this.config.param){if(T===this.img_param)continue;const F=this.dataStore.columnIndex[T],M=createEl("div",{classes:["mdv-section"]},S);M.__mcol__=F.field,createEl("div",{text:F.name,classes:["mdv-section-header"]},M);let P=createEl("div",{classes:["mdv-section-value"]},M);F.is_url&&(P=createEl("a",{target:"_blank"},P)),this.paramHolders[F.field]=P}makeSortable(S,{handle:"mdv-section-header",sortEnded:T=>{const F=this.config;let M=[];F.image&&(M=[F.param[F.image.param]],F.image.param=0),F.param=M.concat(T.map(P=>P.__mcol__))}}),this.setParam(0),this.contentDiv.style.overflowY="auto"}setParam(s){for(const f in this.paramHolders){const _=this.dataStore.getRowText(s,f);this.paramHolders[f].textContent=_,this.paramHolders[f].nodeName==="A"&&(this.paramHolders[f].href=_)}}_getImage(s){const f=this.config,_=f.param[f.image.param];this.img_param=_;const S=this.dataStore.getRowText(s,_);return getProjectURL(`${f.image.base_url}${S}.${f.image.type}`)}setSize(s,f){super.setSize(s,f),this.imViewer&&(this.imViewer.container.style.height=`${Math.round(this.width*.7)}px`,this.imViewer.fit())}onDataHighlighted(s){const f=s.indexes[0];this.imViewer&&this.imViewer.setImage(this._getImage(f)),this.setParam(f)}onDataFiltered(){}changeBaseDocument(s){super.changeBaseDocument(s),this.imViewer.img.__doc__=s}getSettings(){return super.getSettings()}}BaseChart.types.row_summary_box={class:RowSummaryBox,name:"Row Summary Box",init:(d,s,f)=>{const _=f.image_set;if(_&&_!=="__none__"){const S=s.large_images[_];d.param=d.param||[],d.param.push(S.key_column),d.image={base_url:getProjectURL(S.base_url),type:S.type,param:d.param.length-1}}},extra_controls:d=>{const s=d.large_images;if(s){let f=[];for(const _ in s)f.push({name:_,value:_});return f=[{name:"none",value:"__none__"}].concat(f),[{type:"dropdown",name:"image_set",label:"Image Set",values:f}]}return[]},params:[{type:"_multi_column:all",name:"Values To Display"}]};class ImageArray{constructor(s,f,_,S){Bt(this,"textures");Bt(this,"texturesByIndex");Bt(this,"texture");Bt(this,"gl");Bt(this,"logEl");Bt(this,"dataView");Bt(this,"lumaTexture");Bt(this,"onProgress");this.textures=new Map,this.texturesByIndex=new Map,this.dataView=_;const T=f.getContext("webgl2");this.gl=T,this.texture=T.createTexture(),this.logEl=createEl("div",{},f.parentElement),this.logEl.style.color="white",this.loadImageColumn(s,T,S)}wrapLumaTexture(s){this.lumaTexture||(console.warn("wrapping ImageArray texture as luma texture - todo: refactor in future"),this.lumaTexture=s.createTexture({dimension:"2d-array"}),this.lumaTexture.handle=this.texture)}getImageAspect(s){return this.texturesByIndex.get(s).aspectRatio}getImageIndex(s){return this.texturesByIndex.get(s).zIndex}drawProgress(s=0){var f;(f=this.onProgress)==null||f.call(this,s)}loadImageColumn(s,f,_){var pe;const{image_type:S,image_key:T,width:F,height:M}=_,P=getProjectURL(_.base_url),H=s.columnIndex[T],J=this.texture;f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D_ARRAY,J);const K=Math.floor(Math.log2(F));f.texParameteri(f.TEXTURE_2D_ARRAY,f.TEXTURE_MIN_FILTER,f.LINEAR_MIPMAP_LINEAR),f.texParameteri(f.TEXTURE_2D_ARRAY,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D_ARRAY,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D_ARRAY,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);const oe=H.datatype==="unique",se=oe?H.data.length/H.stringLength:((pe=H.values)==null?void 0:pe.length)||H.data.length;f.texStorage3D(f.TEXTURE_2D_ARRAY,K,f.RGBA8,F,M,se);const ae=F*M*4*se/1024/1024;console.log(`Allocated ${ae.toFixed(2)}MB for image array (not accounting for mipmaps)`);let ge=0;function he(){if(!oe)return H.values===void 0?H.data:[...H.data].map(Fe=>H.values[Fe]);const be=new TextDecoder,Re=new Array(se);for(let Fe=0;Fe<se;Fe++){const Me=Fe*H.stringLength,ve=Me+H.stringLength;Re[Fe]=be.decode(H.data.slice(Me,ve))}return Re}he().forEach((be,Re)=>{const Fe=be;if(this.textures.has(Fe)){this.texturesByIndex.set(Re,this.textures.get(Fe)),ge++;return}const Me=`${P}/${Fe}.${S}`,ve=Re,At=new Image,Ct={zIndex:ve,aspectRatio:1,url:Me};this.textures.set(Fe,Ct),this.texturesByIndex.set(Re,Ct),At.src=Me,At.crossOrigin="anonymous",At.onload=()=>{if(_.cancel)return;f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D_ARRAY,J),Ct.aspectRatio=At.width/At.height;const Rt=resizeImage(At,F,M);f.texSubImage3D(f.TEXTURE_2D_ARRAY,0,0,0,ve,F,M,1,f.RGBA,f.UNSIGNED_BYTE,Rt);const It=f.getError();It!==f.NO_ERROR&&console.error(`glError ${It} loading image #${ve} '${Me}'`),f.generateMipmap(f.TEXTURE_2D_ARRAY),this.drawProgress(ge++/se)},At.onerror=()=>{console.error(`Error loading image #${ve} '${Me}'`)}})}}function resizeImage(d,s,f,_){const S=document.createElement("canvas");return S.width=s,S.height=f,S.getContext("2d").drawImage(d,0,0,s,f),S}class ImageArrayDeckExtension extends LayerExtension{static get componentName(){return"ImageArrayExtension"}getShaders(){return{inject:{"vs:#decl":`
        //---- ImageArrayExtension
        in float imageIndex;
        in float imageAspect;
        out float vImageIndex;
        out float vImageAspect;
        ////
        `,"vs:#main-start":`
        //---- ImageArrayExtension
        vImageIndex = imageIndex;
        vImageAspect = imageAspect;
        ////
        
        `,"vs:#main-end":`
        //---- ImageArrayExtension
        outerRadiusPixels = 1e-3;//HACKACK to make everything 'inCircle' for now
        // - but it breaks opacity, and generally we can do better...
        // it would be good to have border lines back, too
        ////
        
        `,"fs:#decl":`
        //---- ImageArrayExtension
        uniform mediump sampler2DArray imageArray;
        in float vImageIndex;
        in float vImageAspect;
        uniform float opacity;
        uniform float saturation;

        vec3 rgb2hsv(vec3 c){
            vec4 K = vec4(0., -1./3., 2./3., -1.);
            vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
            vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));
            float d = q.x - min(q.w, q.y);
            float e = 1.0e-10;
            return vec3(abs(q.z + (q.w - q.y) / (6. * d + e)), d / (q.x + e), q.x);
        }
        vec3 hsv2rgb(vec3 c){
            vec4 K = vec4(1., 2./3., 1./3., 3.);
            vec3 p = abs(fract(c.xxx + K.xyz) * 6. - K.www);
            return c.z * mix(K.xxx, clamp(p - K.xxx, 0., 1.), c.y);
        }
        
        `,"fs:DECKGL_FILTER_COLOR":`
        //---- ImageArrayExtension
        vec2 uv = 0.5 * (geometry.uv + 1.0);
        uv.y = 1. - uv.y; // flip y
        // todo fix aspect ratio in vertex shader
        uv.x /= min(1., vImageAspect);
        uv.y *= max(1., vImageAspect);
        if (uv.y > 1. || uv.x > 1.) discard;
        vec3 uvw = vec3(uv, vImageIndex);
        vec4 t = texture(imageArray, uvw);
        vec3 c = rgb2hsv(t.rgb);
        c.y *= saturation;
        t.rgb = hsv2rgb(c);
        color *= t;
        ///--- opacity may well not be correct gamma etc
        color.a = t.a * opacity; //HACK so broken inCircle doesn't break opacity
        // color.r = vImageAspect - 0.5;
        // vec3 s = vec3(textureSize(imageArray, 0));
        // uvw.z /= s.z;
        // color.rgb = uvw;
        // color.r = vImageIndex / s.z;
        ////

        `}}}initializeState(s,f){var _;(_=this.getAttributeManager())==null||_.addInstanced({imageIndex:{size:1,accessor:"getImageIndex",defaultValue:0},imageAspect:{size:1,accessor:"getImageAspect",defaultValue:1}}),this.props.saturation}updateState(s){const{saturation:f}=s.props;for(const _ of this.getModels()){const S=_.device;if(S.type!=="webgl")throw new Error("non-webgl device not implemented");s.props.imageArray.wrapLumaTexture(S);const{lumaTexture:T}=s.props.imageArray;_.setUniforms({saturation:f}),_.setBindings({imageArray:T})}}}let nextID=0;class ImageScatterChart extends BaseChart{constructor(f,_,S){super(f,_,S);Bt(this,"canvas");Bt(this,"imageArray");Bt(this,"deck");Bt(this,"dataModel");Bt(this,"progress",0);Bt(this,"billboard",!0);Bt(this,"size",13);Bt(this,"opacity",255);Bt(this,"saturation",1);Bt(this,"spaceX",600);Bt(this,"spaceY",392);Bt(this,"colorBy");Bt(this,"id");this.id=nextID++;const T=this.canvas=createEl("canvas",{},this.contentDiv),{base_url:F,image_key:M,texture_size:P}=S.images;this.dataModel=new DataModel(f,{autoupdate:!1}),this.dataModel.setColumns([...S.param,M,S.image_title]),this.dataModel.updateModel();const H=Number.parseInt(P);this.imageArray=new ImageArray(f,T,this.dataModel,{base_url:F,image_type:S.images.type,image_key:M,width:H,height:H}),this.imageArray.onProgress=oe=>{this.progress=oe,this.updateDeck()};const J=this.updateDeck(),K=new OrthographicView({});this.deck=new Deck({canvas:T,layers:J,views:K,controller:!0,initialViewState:{target:[0,0,0],zoom:0},getTooltip:oe=>{try{const{index:se,picked:ae}=oe,{param:ge}=this.config,{columnIndex:he}=this.dataStore,Be=he[ge[0]],pe=he[ge[1]],be=this.config.image_title,Re=this.dataModel.getItemField(se,be);return ae&&{html:`
                    <div>${be}: '${Re}'</div>
                    <div>x: '${ge[0]}' = '${Be.data[se]}'</div>
                    <div>y: '${ge[1]}' = '${pe.data[se]}'</div>
                    `}}catch(se){return console.error(se),`error: ${se}`}}})}updateDeck(){const{param:f}=this.config,{columnIndex:_}=this.dataStore,S=_[f[0]],T=_[f[1]];function F(K,oe,se){const{minMax:ae}=K;return se*(K.data[oe]-ae[0])/(ae[1]-ae[0])-se/2}const{data:M}=this.dataModel,{imageArray:P,billboard:H}=this,J=new ScatterplotLayer({id:`scatter-${this.id}`,data:M,billboard:H,pickable:!0,getImageIndex:K=>P.getImageIndex(K),getImageAspect:K=>P.getImageAspect(K),getPosition:(K,{target:oe})=>(oe[0]=F(S,K,this.spaceX),oe[1]=F(T,K,this.spaceY),oe[2]=0,oe),getRadius:1,radiusScale:this.size,opacity:this.opacity/255,saturation:this.saturation,getFillColor:this.colorBy?K=>this.colorBy(K):[255,255,255],imageArray:P,updateTriggers:{getImageAspect:this.progress,getPosition:[this.spaceX,this.spaceY],getFillColor:[this.colorBy,this.opacity]},extensions:[new ImageArrayDeckExtension]});return this.deck&&this.deck.setProps({layers:[J]}),[J]}onDataFiltered(f){this.dataModel.updateModel(),this.updateDeck()}colorByColumn(f){this.colorBy=this.getColorFunction(f,!0),this.updateDeck()}colorByDefault(){this.colorBy=null,this.updateDeck()}getColorOptions(){return{colorby:"all"}}getSettings(){return[...super.getSettings(),{name:"billboard",label:"Billboard",type:"check",current_value:this.billboard,func:f=>{this.billboard=f,this.updateDeck()}},{type:"slider",name:"size",label:"Size",current_value:this.size,min:1,max:20,step:1,continuous:!0,func:f=>{this.size=f,this.updateDeck()}},{type:"slider",name:"opacity",label:"Opacity",current_value:this.opacity,min:0,max:255,step:1,continuous:!0,func:f=>{this.opacity=f,this.updateDeck()}},{type:"slider",name:"spaceX",label:"spaceX",current_value:this.spaceX,min:1,max:800,step:1,continuous:!0,func:f=>{this.spaceX=f,this.updateDeck()}},{type:"slider",name:"spaceY",label:"spaceY",current_value:this.spaceY,min:1,max:800,step:1,continuous:!0,func:f=>{this.spaceY=f,this.updateDeck()}},{type:"slider",name:"saturation",label:"saturation",current_value:this.saturation,min:0,max:1,continuous:!0,func:f=>{this.saturation=f,this.updateDeck()}}]}}BaseChart.types.ImageScatterChart={class:ImageScatterChart,name:"Image Scatter Plot",required:["images"],configEntriesUsingColumns:["image_key","image_title"],init:(d,s,f)=>{const _=s.images[f.image_set];console.log("ImageScatterChart param",d.param),d.images={base_url:_.base_url,type:_.type,image_key:_.key_column,texture_size:f.texture_size},d.image_key=_.key_column},extra_controls:d=>{const s=[];for(const S in d.images)s.push({name:S,value:S});console.log("imageSets",s);const f=d.getLoadedColumns().map(S=>({name:S,value:S})),_=[32,64,128,256,512,1024].map(S=>`${S}`).map(S=>({name:S,value:S}));return[{type:"dropdown",name:"image_set",label:"Image Set",values:s},{type:"dropdown",name:"image_title",label:"Tooltip",values:f},{type:"dropdown",name:"texture_size",label:"Texture Size",values:_,defaultVal:"256"}]},params:[{type:"number",name:"X axis"},{type:"number",name:"Y axis"}]};function getYLabel(d){return d.denominators?`${d.category} per ${d.denom_unit}`:`% abundance ${d.category}`}class CustomBoxPlot extends SVGChart{constructor(s,f,_){_.category||(_.category=s.getColumnValues(_.param[2])[0]),_.axis||(_.axis={y:{label:getYLabel(_)},x:{size:60,rotate_labels:!0}}),_.title=_.title||_.category,super(s,f,_,{x:{type:"band"},y:{}});const S=this.config.param,T=this.dataStore.getColumnValues(S[0]);this.x_scale.domain(T.slice(0)),this.addToolTip(),this.dim=this.dataStore.getDimension("category_dimension"),this.addDenominators(),this.onDataFiltered()}onDataFiltered(){const s=this.config.param;let f=null;s.length===3&&(f=this.dataStore.getColumnValues(this.config.param[2]).indexOf(this.config.category)),this.dim.getSankeyData(_=>{this.data=_,this.drawChart()},s,{method:"proportion",category:f,denominators:this.denom})}remove(s=!0){this.dim.destroy(s),super.remove()}setSize(s,f){super.setSize(s,f),this.drawChart()}addDenominators(){const s=this.config.denominators;if(this.denom=null,s){this.denom=[];const f=this.dataStore.getColumnValues(this.config.param[1]);for(let _=0;_<f.length;_++)this.denom.push(s[f[_]]||100)}}getSettings(){const s=this.config,_=[{values:[this.dataStore.getColumnValues(s.param[2]).map(S=>({t:S})),"t","t"],current_value:s.category,label:"Category",type:"dropdown",func:S=>{s.category=S,s.axis.y.label=getYLabel(s),this.setTitle(S),this.onDataFiltered()}}];return super.getSettings().concat(_)}drawChart(){const s=select(this.contentDiv).transition().duration(200).ease(linear),f=this.config.param;this.y_scale.domain([this.data.max+this.data.max/10,0]),this.updateAxis();const _=this.dataStore.getColumnColors(f[0]),S=this.dataStore.getColumnValues(f[0]),T=this.dataStore.getColumnValues(f[1]),M=this._getContentDimensions().width/S.length,P=M/5,H=M/10,J=5,K=M/4,oe=M/5;this.graph_area.selectAll(".cbp-col").data(this.data).join("g").attr("transform",(se,ae)=>`translate(${ae*M},0)`).attr("class","cbp-col").selectAll(".cbp-circle").data(se=>se).join("circle").attr("class","cbp-circle").on("mouseover pointermove",(se,ae)=>{const ge=`${S[ae[1]]}<br>${T[ae[2]]}`;this.showToolTip(se,ge)}).on("mouseleave",()=>{this.hideToolTip()}).transition(s).attr("cy",(se,ae)=>this.y_scale(se[0])).attr("fill",(se,ae)=>_[se[1]]).attr("r",J).attr("cx",se=>P+H*se[3]),this.graph_area.selectAll(".cbp-rect").data(this.data).join("path").attr("d",(se,ae)=>{const ge=ae*M+M/2,he=this.y_scale(se.av);let Be=se.av+se.std;Be=this.y_scale(Be>se.max?se.max:Be);let pe=se.av-se.std;return pe=this.y_scale(pe<se.min?se.min:pe),`M${ge} ${Be} L${ge} ${pe}
                    M${ge-K} ${he} L${ge+K} ${he} 
                    M${ge-oe} ${Be} L${ge+oe} ${Be}     
                    M${ge-oe} ${pe} L${ge+oe} ${pe}      `}).style("fill","none").style("stroke","currentColor").attr("stroke-width",1).attr("class","cbp-rect")}}BaseChart.types.custom_box_plot={name:"Abundance Box Plot",params:[{type:"text",name:"Sample Group"},{type:"text",name:"Sample"},{type:"text",name:"Categories"}],class:CustomBoxPlot};BaseChart.types.density_box_plot={name:"Density Box Plot",class:CustomBoxPlot,required:["regions"],extra_controls:d=>{const s=d.getColumnList("text").map(f=>({name:f.name,value:f.field}));return[{type:"dropdown",name:"group",label:"Group",values:s},{type:"dropdown",name:"cat",label:"Category",values:s}]},init:(d,s,f)=>{d.denominators={},d.denom_unit=`${s.regions.scale_unit}`,d.param=[f.group,s.regions.region_field,f.cat];for(const _ in s.regions.all_regions){const S=s.regions.all_regions[_],T=(S.roi.max_x-S.roi.min_x)*(S.roi.max_x-S.roi.min_x);d.denominators[_]=T*(s.regions.scale*s.regions.scale)}}};class SingleSeriesChart extends SVGChart{constructor(s,f,_){_.axis||(_.axis={x:{label:s.getColumnName(_.param[4])},y:{label:s.getColumnName(_.param[0])}}),super(s,f,_,{x:{type:"band"},y:{}}),_.title||this._setTitle();const S=this.config.param;this.config;const T=this.dataStore.getColumnValues(S[0]);this.x_scale.domain(T.slice(0)),this.config.scale=this.config.scale||this.dataStore.getColumnQuantile(S[4],"0.001"),this.initialSetUp(),this.drawChart(),this.addToolTip()}remove(s=!0){super.remove()}onDataHighlighted(s){const f=s.indexes[0],_=this.graph_area.selectAll("rect");_.attr("stroke","white").style("stroke-width","0px"),_.filter(S=>!!(S&&S[3]===f)).attr("stroke","black").style("stroke-width","4px"),this.highlight=f}_setTitle(){const s=this.config.categories,f=this.dataStore.getColumnName(this.config.param[4]);this.setTitle(`${f} ${s[0]} x ${s[1]}`)}initialSetUp(){const s=this.config.param,f=this.dataStore.columnIndex[s[1]].data,_=this.dataStore.columnIndex[s[2]].data,S=this.dataStore.columnIndex[s[0]].data,T=this.dataStore.columnIndex[s[3]].data,M=this.dataStore.columnIndex[s[0]].values.map(he=>({values:[],totals:0})),P=this.dataStore.columnIndex[s[4]].data,H=this.dataStore.size,J=[],K=this.dataStore.columnIndex[s[1]].values.indexOf(this.config.categories[0]),oe=this.dataStore.columnIndex[s[2]].values.indexOf(this.config.categories[1]);let se=null,ae=null;for(let he=0;he<H;he++)if(f[he]===K&&_[he]===oe){if(Number.isNaN(P[he]))continue;ae=ae===null?P[he]:Math.max(P[he],ae),se=se==null?P[he]:Math.min(P[he],se),J.push([P[he],S[he],T[he],he,Math.floor(Math.random()*6)+1]);const Be=M[S[he]];Be.values.push(P[he]),Be.totals+=P[he]}for(const he of M){he.mean=he.totals/he.values.length;let Be=he.values.length-1;Be=Be===0?1:Be,he.std=he.values.reduce((pe,be)=>pe+(be-he.mean)**2,0),he.std=Math.sqrt(he.std/Be),he.values=void 0}this.errorBars=M;const ge=(ae-se)/10;this.config.scale=[se-ge,ae+ge],this.data=J}getSettings(){const s=this.config,f=this.dataStore.getColumnQuantile(s.param[4],"0.001"),_=[{type:"doubleslider",max:f[1],min:f[0],doc:this.__doc__,current_value:s.scale,label:"Scale",func:(S,T)=>{s.scale=[S,T],this.drawChart()}},{label:this.dataStore.getColumnName(s.param[1]),type:"dropdown",values:[this.dataStore.getColumnValues(s.param[1],"name_value"),"name","value"],current_value:s.categories[0],func:S=>{s.categories[0]=S,this.initialSetUp(),this.drawChart()}},{label:this.dataStore.getColumnName(s.param[2]),type:"dropdown",values:[this.dataStore.getColumnValues(s.param[2],"name_value"),"name","value"],current_value:s.categories[1],func:S=>{s.categories[1]=S,this.initialSetUp(),this.drawChart()}}];return super.getSettings().concat(_)}drawChart(s=300){const f=this.config.param;this.y_scale.domain([this.config.scale[1],this.config.scale[0]]).clamp(!0),this.updateAxis();const _=select(this.contentDiv).transition().duration(s).ease(linear),S=this.dataStore.getColumnValues(f[0]),T=this.dataStore.getColumnValues(f[3]),M=this._getContentDimensions().width/S.length,P=this.dataStore.getColumnColors(f[0]),H=M/4,J=M/5;this.graph_area.selectAll("circle").data(this.data).join("circle").on("mouseover mousemove",(K,oe)=>{const se=S[oe[1]],ae=T[oe[2]];this.showToolTip(K,`${se}<br>${ae}<br>${oe[0]}`)}).on("mouseleave",()=>{this.hideToolTip()}).on("click",(K,oe)=>{this.dataStore.dataHighlighted([oe[3]],this)}).transition(_).attr("cx",K=>M/8+M*(K[4]/8)+K[1]*M).attr("cy",K=>this.y_scale(K[0])).attr("r",5).attr("fill",K=>P[K[1]]),this.graph_area.selectAll(".cbp-rect").data(this.errorBars).join("path").attr("d",(K,oe)=>{const se=oe*M+M/2,ae=this.y_scale(K.mean),ge=this.y_scale(K.mean+K.std),he=this.y_scale(K.mean-K.std);return`M${se} ${ge} L${se} ${he}
                        M${se-H} ${ae} L${se+H} ${ae} 
                        M${se-J} ${ge} L${se+J} ${ge}     
                        M${se-J} ${he} L${se+J} ${he}`}).style("fill","none").style("stroke","black").attr("stroke-width",1).attr("class","cbp-rect")}setSize(s,f){super.setSize(s,f),this.drawChart()}}BaseChart.types.single_series_chart={name:"Single Interaction Chart",required:d=>{var s;return(s=d.interactions)==null?void 0:s.is_single_region},class:SingleSeriesChart,extra_controls:d=>{const s=d.interactions,f=s.interaction_columns[0],_=s.interaction_columns[1],S=new Set([f,_,s.pivot_column]),T=d.getColumnList("text").filter(F=>!S.has(F.field));return[{type:"dropdown",name:"c1",label:d.getColumnName(f),values:d.getColumnValues(f).map(F=>({name:F,value:F}))},{type:"dropdown",name:"c2",label:d.getColumnName(_),values:d.getColumnValues(_).map(F=>({name:F,value:F}))},{type:"dropdown",name:"data",label:"Data to display",values:d.getColumnList("number").map(F=>({name:F.name,value:F.field}))},{type:"dropdown",name:"group",label:"Grouping",values:T.map(F=>({name:F.name,value:F.field}))}]},init:(d,s,f)=>{const _=s.interactions;s.interactions.cell_radial_chart,d.param=[f.group,_.interaction_columns[0],_.interaction_columns[1],_.pivot_column,f.data],d.categories=[f.c1,f.c2]}};class GenomeBrowser extends BaseChart{constructor(s,f,_){super(s,f,_);const S=this.config;S.view_margins=S.view_margins||{type:"percentage",value:20},this.contentDiv.style.width="100%",this.contentDiv.style.height="100%",S.type="genome_browser";const T=!S.tracks.find(F=>F.format==="ruler");__vitePreload(async()=>{const{default:F}=await import("../assets/panel.js_v0-dv7dIoz-.js");return{default:F}},__vite__mapDeps([12,1]),import.meta.url).then(({default:F})=>{if(this.browser=new F(this.contentDiv,{allow_user_interactions:!0,show_scale:!0,ruler_track:T},S.tracks),this.bamscatrack=this.browser.getTrack("_atac_bam_track"),this.baseTrack=this.browser.getTrack("_base_track"),this.baseTrack.dataStore=this.dataStore,this.addMenuIcon("fa fa-eye-slash",_.legend||"Show/Hide Tracks",{func:M=>this.showHideDialog()}),this.locText=createEl("input",{styles:{fontSize:"11px"}},this.menuSpace),this.locText.addEventListener("keypress",M=>{if(M.key==="Enter"){const P=this._calculatePosition(this.locText.value);this.browser.update(P.chr,P.start,P.end)}}),this.browser.addListener(this.config.id,(M,P,H)=>this.onBrowserAction(M,P,H)),S.feature_label&&this.setLabelFunction(S.feature_label),S.color_by&&this.colorByColumn(S.color_by,!1),S.color_wig_tracks_by){const M=S.color_wig_tracks_by,P=this.dataStore.getValueToColor(M);for(const H in P){const J=this.browser.tracks[`${M}|${H}`];J&&(J.config.color=P[H])}}if(!this.bamscatrack){const M=this.config.genome_location;M?this.browser.update(M.chr,Math.round(M.start),Math.round(M.end),!0):this.onDataHighlighted({indexes:[0]})}})}onBrowserAction(s,f,_){switch(s){case"featureclick":if(f.track.config.track_id==="_base_track"){const S=f.feature.data[0];this.dataStore.dataHighlighted([Number.parseInt(S)],this)}f.track.config.track_id==="_bam"&&console.log(f.feature);break;case"range_selected":if(!_.ctrlKey)this.browser.update(f.chr,f.start,f.end);else if(this.bamscatrack){const S=this.bamscatrack.getIdsInRange(f);this.cellDim.filter("filterOnIndex",[],S),this.browser.setHighlightedRegion(f,"_filter","blue"),this.resetButton.style.display="inline",this.browser.update()}break;case"view_changed":this.locText.value=`${f.chr}:${f.start}-${f.end}`}}setupLinks(s,f,_){if(this.browser||setTimeout(()=>this.setupLinks(s,f,_),100),this.dataLink={dataStore:s,index:f,getDataFunction:_},!this.bamscatrack)return;const S=this.config.cluster_reads;s.addListener(`gb_${this.config.id}`,(T,F)=>{if(T==="filtered")this.filterReads(F);else if(T==="data_changed"){const M=this.config.cluster_reads;F.columns.indexOf(M)!==-1&&this.changeClusters(M,!0)}}),_([S],()=>{const T=s.getColumnIndex(f),F=s.getColumnColors(S),M=s.columnIndex[S];this.bamscatrack.setCategories(S,M.data,M.values,F),this.cellDim=s.getDimension("base_dimension"),this.bamscatrack.addIndex(T),this.config.color_by&&this.colorByColumn(this.config.color_by);const P=this.config.genome_location;P?this.browser.update(P.chr,P.start,P.end,!0):this.onDataHighlighted({indexes:[0]})})}changeClusters(s,f=!1){this.config.cluster_reads=s;const _=this.dataLink.dataStore;this.dataLink.getDataFunction([s],()=>{const S=_.getColumnColors(s),T=_.columnIndex[s];this.bamscatrack.setCategories(s,T.data,T.values,S,!0,f),this.browser.update()})}themeChanged(){this.browser.repaint(!0,!0)}showHideDialog(){const s=this.browser,f=s.track_order.map(_=>{const S=s.tracks[_].config;return{type:"checkbox",id:S.track_id,label:S.short_label,current_value:!S.hide}});new CustomDialog({title:"Show/Hide Tracks",controls:f,doc:this.__doc__,buttons:[{text:"Update",method:_=>{for(const S in _)s.tracks[S].config.hide=!_[S];s.update()}}]})}getConfig(){const s=super.getConfig(),f=this.browser;return s.tracks=this.browser.getAllTrackConfigs(),s.genome_location={chr:f.chr,start:f.start,end:f.end},s}filterReads(s){s!==this.cellDim&&(s==="all_removed"?(this.bamscatrack.filterReads(null,null),this.resetButton.style.display="none",this.browser.removeHighlightedRegion("_filter")):this.bamscatrack.filterReads(this.dataLink.dataStore.filterArray,this.cellDim.filterArray),this.browser.update())}createColumnLinks(s,f,_){this.dataLink={dataStore:s,columns:f,getDataFunction:_};const S=f[0].col,T=this.dataStore.getValueToColor(S);for(const F in T){const M=this.browser.tracks[`${S}|${F}`];M&&(M.config.color=T[F])}}_setPhasedSNPs(s,f){if(s){const _=s.split(",").map(S=>S.split(":"));for(const S of _){const T=Number.parseInt(S[1]);this.browser.setHighlightedRegion({chr:S[0],start:T,end:T+1},S[0]+S[1],f)}}}onDataHighlighted(s){if(s.source===this)return;const f=this.config.param,_=this.config.view_margins,S=this.dataStore.getRowAsObject(s.indexes[0],f),T=S[f[2]]>S[f[1]]?S[f[1]]:S[f[2]];let F=S[f[2]]>S[f[1]]?S[f[2]]:S[f[1]];const M=s.data,P=[],H=[];if(M!=null&&M.phase_data){this.browser.removeAllHighlightedRegions(),this._setPhasedSNPs(M.more_peak_haplotype,"blue"),this._setPhasedSNPs(M.less_peak_haplotype,"red");for(const ge of this.browser.track_order){const he=M.phase_data[ge];ge.startsWith("Don")&&(he?(he.ratio[0]===0&&he.ratio[1]===0?this.browser.setTrackAttribute(ge,"phase_data",null):this.browser.setTrackAttribute(ge,"phase_data",{ratio:he.ratio[0]/(he.ratio[0]+he.ratio[1]),st:T,en:F}),P.push(ge)):(this.browser.setTrackAttribute(ge,"phase_data",null),H.push(ge)))}const oe=P.concat(H),se=[];let ae=0;for(const ge of this.browser.track_order)ge.startsWith("Don")?(se.push(oe[ae]),ae++):se.push(ge)}const J=this.config.feature_present_column;if(J){const oe=this.dataStore.getRowText(s.indexes[0],J).split(", ");for(const Be of oe)this.browser.setTrackAttribute(Be,"color","#35de26");const se=this.dataStore.getColumnValues(J).slice(0).filter(Be=>oe.indexOf(Be)===-1);for(const Be of se)this.browser.setTrackAttribute(Be,"color","#939c92");const ae=oe.concat(se),ge=[];let he=0;for(const Be of this.browser.track_order)ae.indexOf(Be)!==-1?(ge.push(ae[he]),he++):ge.push(Be)}let K=1e3;if(_.type==="percentage"?(F=T===F?T+1:F,K=Math.round(F-T)*(_.value/100)):K=_.value,_.type==="fixed_length"){const oe=Math.round((F-T)/2)+T;K=Math.round(K/2),this.browser.update(S[f[0]],oe-K,oe+K)}else this.browser.update(S[f[0]],T-K,F+K)}getImage(s,f){f==="svg"?this.browser.repaint(!0,!1,s):s(this.browser.canvas)}configure_tracks(){this.dataSrore}getColorOptions(){return{colorby:"all",has_default_color:!0}}_calculatePosition(s){s=s.replace(/,/g,"");const f=s.split(":");let _=null,S=null;f.length===1?(_=this.browser.getPosition().chr,S=f[0]):(_=f[0],S=f[1]);const T=S.split("-");return{chr:_,start:Number.parseInt(T[0]),end:Number.parseInt(T[1])}}colorByColumn(s,f=!0){const _=this.getColorFunction(s);this.browser.setTrackColorFunction("_base_track",S=>_(S.data[0])),f&&this.browser.update()}setLabelFunction(s){s?(this.config.feature_label=s,this.browser.setTrackLabelFunction("_base_track",f=>this.dataStore.getRowText(f.data[0],s))):(this.browser.setTrackLabelFunction("_base_track",null),this.config.feature_label=void 0)}onDataFiltered(s){if(!this.browser){setTimeout(()=>this.onDataFiltered(s),100);return}this.dataStore.isFiltered()?this.browser.setTrackFeatureFilter("_base_track",f=>this.dataStore.filterArray[f.data[0]]===0):this.browser.setTrackFeatureFilter("_base_track",null),this.browser.update()}removeFilter(){this.cellDim.removeFilter(),this.browser.removeHighlightedRegion("_filter"),this.browser.update()}changeBaseDocument(s){this.browser.closeAllDialogs(),super.changeBaseDocument(s),this.browser.changeBaseDocument(s)}setSize(s,f){super.setSize(s,f),this.browser.setSize(),this.browser.update()}remove(s=!0){this.cellDim&&(this.cellDim.destroy(s),this.dataLink.dataStore.removeListener(`gb_${this.config.id}`)),super.remove()}getSettings(){const s=super.getSettings(),f=this.dataStore.getColumnList(),_=this.config;if(f.push({name:"None",field:"_none"}),this.bamscatrack){const S=this.dataLink.dataStore.getColumnList("text");s.push({label:"Group By",type:"dropdown",values:[S,"name","field"],current_value:_.cluster_reads,func:T=>{this.changeClusters(T)}})}return s.push({label:"Feature Label",type:"dropdown",values:[f,"name","field"],current_value:_.feature_label||"_none",func:S=>{S=S==="_none"?null:S,this.setLabelFunction(S),this.browser.update()}}),s.push({label:"View margin type",type:"radiobuttons",choices:[["% of feature length","percentage"],["absolute (bp)","absolute"],["Fixed Length (bp)","fixed_length"]],current_value:_.view_margins.type,func:S=>{_.view_margins.type=S;const T=this.dataStore.getHighlightedData();T&&this.onDataHighlighted({indexes:[T]})}}),s.push({label:"View margin length",type:"text",current_value:_.view_margins.value,only_update_on_enter:!0,func:S=>{S=Number.parseInt(S),S=Number.isNaN(S)?_.view_margins.type==="percentage"?20:1e3:S,_.view_margins.value=S;const T=this.dataStore.getHighlightedData();T&&this.onDataHighlighted({indexes:[T]})}}),s}}BaseChart.types.genome_browser={class:GenomeBrowser,name:"Genome Browser",methodsUsingColumns:["setLabelFunction"],configEntriesUsingColumns:["feature_label","color_wig_tracks_by","feature_present_column"],params:[],required:["genome_browser"],init:(d,s)=>{const f=s.genome_browser;d.param=f.location_fields.slice(0),f.feature_label&&(d.feature_label=f.feature_label),f.default_parameters&&Object.assign(d,f.default_parameters);const _={short_label:f.default_track.label,url:f.default_track.url,track_id:"_base_track",decode_function:"generic",displayMode:"EXPANDED"};if(f.default_track.type&&(_.type=f.default_track.type),d.tracks=[_],f.default_track_parameters&&Object.assign(_,f.default_track_parameters),f.atac_bam_track&&(d.cluster_reads=f.atac_bam_track.cluster_reads,d.tracks.push({short_label:"Coverage",height:400,track_id:"_atac_bam_track",url:f.atac_bam_track.url,type:"bam_sca_track"})),d.default_track=f.default_track.url,f.default_tracks)for(const S of f.default_tracks)d.tracks.push(JSON.parse(JSON.stringify(S)))}};const color_scheme=["#313695","#4575B4","#74ADD1","#ABD9E9","#E0F3F8","#E0F3F8","#FFFFBF","#FEE090","#FDAE61","#F46D43","#D73027","#A50026"].reverse();class DeepToolsHeatMap extends SVGChart{constructor(s,f,_){super(s,f,_,{x:{type:"band"},y:{custom:!0}}),this.dim=this.dataStore.getDimension("deeptools_dimension");const S=this._getContentDimensions();this.graphDiv=createEl("div",{styles:{position:"absolute",left:`${S.left}px`,top:`${S.top}px`,width:`${S.width}px`,height:`${S.height}px`}},this.contentDiv);const T=this.config;T.color_scale||(T.color_scale={range:[0,255],log:!1}),this.app=new WGL2DI(this.graphDiv,{lock_x_axis:!0}),this.app.addHandler("object_clicked",(F,M)=>{const P=Math.floor(M[1]/20),H=this.reverse_map[P];this.dataStore.dataHighlighted([H],this)}),this.hm_config=this.dataStore.deeptools.maps[T.heatmap],this.x_scale.domain(this.hm_config.groups.slice(0)),this.dataStore.loadBinaryData(this.hm_config.data).then(F=>{const M=this.hm_config.rows,P=this.hm_config.cols;this.map_index=new Uint32Array(F,0,M);const H=new Uint8Array(F,M*4,M*P),J=H.length;this.dataLength=0;for(let oe=0;oe<H.length;oe++)H[oe]!==0&&this.dataLength++;this.data=new SharedArrayBuffer(this.dataLength*5),this.rowPositions=new Uint16Array(this.data,0,this.dataLength),this.colPositions=new Uint16Array(this.data,this.dataLength*2,this.dataLength),this.values=new Uint8Array(this.data,this.dataLength*4,this.dataLength),this.displayData=new SharedArrayBuffer(this.dataLength*11),this.x=new Float32Array(this.displayData,0,this.dataLength),this.y=new Float32Array(this.displayData,this.dataLength*4,this.dataLength),this.colors=new Uint8Array(this.displayData,this.dataLength*8,this.dataLength*3);let K=0;for(let oe=0;oe<J;oe++){if(H[oe]===0)continue;const se=oe%P,ae=Math.floor(oe/P);this.rowPositions[K]=this.map_index[ae],this.colPositions[K]=se,this.values[K]=H[oe],K++}this.app.addSquares({x:this.x,y:this.y,colors:this.colors}),this.dim.setParameters({displayData:this.displayData,data:this.data,columns:P,rows:M,groups:this.hm_config.groups.length,length:K}),this.sortBy(P.sortBy)})}updateMap(s=!1){const f=this.hm_config.cols,_=this.getColorScale();this.dim.updateData(_,s).then(S=>{this.total=S.total,this.app.squares.count=this.total,this.reverse_map=S.reverse_map,this.currentRows=S.currentRows;const T=this.dataStore.filterSize,F=this._getContentDimensions();s||(this.app.x_scale=F.width/(f*20+(this.hm_config.groups.length-1)*200),this.app.y_scale=F.height/(T*20),this.app.offset=[0,0]);const M=this.hm_config.groups.length,P=f/M*20;let H=0;const J=_.colors[0];this.app.removeAllRectangles();for(let K=0;K<M;K++)this.app.addRectangle([H,0],P,T*20,J),H+=P+200;this.app.refresh(),this.updateAxis()})}sortBy(s){if(s){const f=[{col:s,desc:!1}];this.dim.sort(f).then(()=>{this.updateMap()})}else this.dim.setSortOrder(this.map_index),this.updateMap()}setSize(s,f){super.setSize(s,f);const _=this._getContentDimensions();this.app.setSize(_.width,_.height),this.graphDiv.style.left=`${_.left}px`,this.graphDiv.style.top=`${_.top}px`,this.updateAxis()}onDataFiltered(){this.updateMap()}onDataHighlighted(s){this.app.removeAllLines();const f=this.currentRows[s.indexes[0]],_=this.hm_config.cols;f&&(this.app.addLine([0,f*20],[_*20+600,f*20],[255,255,0]),this.app.addLine([0,f*20+20],[_*20+600,f*20+20],[255,255,0])),this.app.refresh()}getColorScale(){const s=this.config.color_scale.range,f={datatype:"integer",asArray:!0,overideValues:{colorLogScale:this.config.color_scale.log,colors:color_scheme,min:s[0],max:s[1],bins:200}};return{colors:this.dataStore.getColumnColors({datatype:"integer"},f),bins:200,min:s[0],max:s[1]}}remove(s=!0){this.dim.destroy(s),super.remove()}getSettings(){let s=super.getSettings();const f=this.config,_=f.color_scale,S=this.dataStore.getColumnList();return S.push({name:"Default",field:"__default__"}),s=s.concat([{type:"doubleslider",max:255,min:0,doc:this.__doc__,current_value:_.range,label:"Color Scale",func:(T,F)=>{_.range=[T,F],this.updateMap(!0)}},{type:"dropdown",label:"SortBy",current_value:f.sortBy||"__default__",values:[S,"name","field"],func:T=>{T==="__default__"?(f.sortBy=void 0,this.sortBy()):(f.sortBy=T,this.sortBy(T))}}]),s}}BaseChart.types.deeptools_heatmap={class:DeepToolsHeatMap,required:["deeptools"],name:"DeepTools HeatMap",methodsUsingColumns:["sortBy"],configEntriesUsingColumns:["sortBy"],extra_controls:d=>[{type:"dropdown",name:"map",label:"Map",values:Object.keys(d.deeptools.maps).map(f=>({name:f,value:f}))}],init:(d,s,f)=>{d.heatmap=f.map}};async function connectIPC(d){new URLSearchParams(window.location.search).get("socket");let f=!1;d.addListener("ipc",(M,P,H)=>{M==="view_loaded"&&(console.log("view_loaded",H,Object.keys(P.charts)),f||(F(),f=!0))});function _(M){window.vuplex&&window.vuplex.postMessage(M)}const S=d._popOutChart;d._popOutChart=M=>{S.apply(d,[M]),_({type:"popout",chartID:M.config.id})};function T(M){const P=d.charts[M];P?d._popOutChart(P.chart):(console.error(`Chart ${M} not found`),console.log("current chart keys: ",Object.keys(d.charts).join(", ")),_({type:"error",message:`Popout failed: chart ${M} not found... trying again...`}),setTimeout(()=>T(M),100))}for(const M of d.dataSources){const P=new DataModel(M.dataStore);P.addListener("IPC",()=>{_({type:"filter",dataSource:M.name,indices:P.data})})}function F(){console.log("setupVuplex...");function M(){window.vuplex.postMessage({type:"vuplex_ready"}),window.vuplex.addEventListener("message",P=>{let H=P.data;typeof H=="string"&&(H=JSON.parse(H)),console.log("vuplex message",JSON.stringify(H,null,2));try{const J=H;J.type==="popout"&&(console.log("chartID: ",J.chartID),T(J.chartID))}catch(J){console.error("Error parsing vuplex message",J),_({type:"error",message:`Error parsing vuplex message: ${J}`})}})}window.vuplex?(console.log("vuplex already exists, adding listener"),M()):(console.log("vuplex doesn't exist (yet?), waiting for vuplexready"),window.addEventListener("vuplexready",()=>{console.log("vuplexready event received"),M()}))}}function addChartLink(d,s){const f=s.charts[d.source_chart];if(!f){console.error(`Chart ${d.source_chart} not found`);return}const _=f.dataSource.dataStore,S=_.columnIndex[d.column];S||console.log(`"chart_columnval_link" link column "${d.column}" not found in dataStore "${_.name}"`);async function T(F){await s._getColumnsAsync(_.name,[d.column]);for(const M of d.target_charts){const P=s.getChart(M);d.set_color&&P.colorByColumn(F),d.set_title&&P.setTitle(F),d.set_tooltip&&(P.setToolTipColumn?P.setToolTipColumn(d.column):P.config.tooltip&&runInAction(()=>P.config.tooltip.column=F)),d.set_param&&runInAction(()=>{P.config.param[d.param_index]=F,P.config.type})}}f.chart.addListener(d.id,async(F,M)=>{if(F==="cell_clicked"&&T(M.row),F==="data_highlighted"&&S){const P=S.values[S.data[M.indexes[0]]];T(P)}})}function popoutChart(d){const{chartManager:s}=window.mdv,f=window,_=d.getDiv(),S=_.parentElement,T=window.screenTop?window.screenTop:window.screenY,F=window.screenLeft?window.screenLeft:window.screenX,{width:M,height:P,left:H,top:J}=_.getBoundingClientRect(),K=Math.floor(Math.max(100,M)),oe=Math.floor(Math.max(100,P)),se=Math.floor(H+F),ae=Math.floor(J+T);_.gridstackPopoutCallback&&_.gridstackPopoutCallback(),removeResizable(_),removeDraggable(_);const ge=window.open("",d.config.title,`width=${K},height=${oe},left=${se},top=${ae}`);ge.document.body.style.overflow="hidden";const he=Re=>{if(Re instanceof HTMLLinkElement){const Fe=ge.document.createElement("link");Fe.rel="stylesheet",Fe.href=Re.href,ge.document.head.appendChild(Fe)}else if(Re instanceof HTMLStyleElement){const Fe=ge.document.createElement("style");Fe.innerHTML=Re.innerHTML,ge.document.head.appendChild(Fe)}};Array.from(document.querySelectorAll('link[rel="stylesheet"], style')).forEach(Re=>{he(Re)});const Be=new MutationObserver(Re=>{Re.forEach(Fe=>{Fe.type==="childList"&&Fe.addedNodes.length>0&&Fe.addedNodes.forEach(Me=>{(Me instanceof HTMLLinkElement||Me instanceof HTMLStyleElement)&&he(Me)})})});Be.observe(document.head,{childList:!0,subtree:!0}),ge.document.body.append(_),d.changeBaseDocument(ge.document);const pe=pushSetStyles(d),be=ge.document.body;return ge.addEventListener("resize",()=>{d.setSize(be.clientWidth,be.clientHeight)}),s.charts[d.config.id].win=ge,ge.addEventListener("beforeunload",()=>{pe(),S.appendChild(_),s._makeChartRD(d),s.charts[d.config.id].win=f,d.changeBaseDocument(document),Be.disconnect()}),f.addEventListener("unload",()=>{ge.close()}),ge}function pushSetStyles(d){const s=d.getDiv(),f={height:s.style.height,width:s.style.width,top:s.style.top,left:s.style.left};return s.style.height="100vh",s.style.width="100vw",s.style.top="0",s.style.left="0",()=>{s.style.height=f.height,s.style.width=f.width,s.style.top=f.top,s.style.left=f.left,d.setSize()}}const column_orders={double:0,integer:0,int32:0,multitext:1,text16:1,text:2,unique:2},themes={dark:{title_bar_color:"#222",main_panel_color:"black",text_color:"white",background_color:"#333"},light:{title_bar_color:"white",main_panel_color:"#f1f1f1",text_color:"black",background_color:"#bababa"}};function getPreferredColorScheme(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function listenPreferredColorScheme(d){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>d(getPreferredColorScheme()))}class ChartManager{constructor(s,f,_,S={},T=null){if(!window.isSecureContext)throw alert("This application requires a secure context (https / localhost)"),new Error("This application requires a secure context (https / localhost)");window.mdv||(window.mdv={}),window.mdv.chartManager&&console.warn("Making another ChartManager... had believed this to be a singleton"),window.mdv.chartManager=this,this.listeners={},this.infoAlerts={},this.progressBars={},this.setTheme(getPreferredColorScheme()),listenPreferredColorScheme(H=>this.setTheme(H)),this.dataSources=[],this.dsIndex={},this.columnsLoading={};for(const H of f){const J={name:H.name,dataStore:new DataStore(H.size,H,_),link_to:H.link_to,index_link_to:H.index_link_to,color:H.color||themes[this.theme].background_color,column_link_to:H.column_link_to,links:H.links,custom:H.custom||{}};this.dataSources.push(J),this.dsIndex[H.name]=J,this._addDSListeners(J),this.columnsLoading[H.name]={}}T&&this.addListener("_default",T),makeObservable(this,{theme:observable,setTheme:action}),connectIPC(this),this.transactions={},this.containerDiv=typeof s=="string"?document.getElementById(s):s,this.containerDiv.style.display="flex",this.containerDiv.style.flexDirection="column",this.menuBar=createEl("div",{classes:["ciview-main-menu-bar"]},this.containerDiv),this.leftMenuBar=createEl("span",{},this.menuBar),this.rightMenuBar=createEl("span",{styles:{float:"right"}},this.menuBar),createEl("span",{classes:["mdv-divider"]},this.menuBar);const F=createMenuIcon("fas fa-home",{tooltip:{text:"Back to Catalog",position:"bottom-right"},func:()=>{window.location.href=`${window.location.origin}/../`}},this.menuBar);if(F.style.marginRight="20px",S.all_views){this.viewSelect=createEl("select",{style:{maxWidth:"50em"}},this.menuBar);for(const H of S.all_views)createEl("option",{text:H,value:H},this.viewSelect);createFilterElement(this.viewSelect,this.menuBar),this.viewSelect.addEventListener("change",H=>{this.config.show_save_view_dialog&&S.permission==="edit"?this.showSaveViewDialog(()=>this.changeView(this.viewSelect.value)):this.changeView(this.viewSelect.value)})}S.permission==="edit"&&createMenuIcon("fas fa-save",{tooltip:{text:"Save View",position:"bottom-right"},func:()=>{const H=this.getState();this._callListeners("state_saved",H)}},this.menuBar),S.permission==="edit"&&S.all_views&&(createMenuIcon("fas fa-plus",{tooltip:{text:"Create New View",position:"bottom-right"},func:()=>{this.showSaveViewDialog(()=>this.showAddViewDialog())}},this.menuBar),createMenuIcon("fas fa-minus",{tooltip:{text:"Delete Current View",position:"bottom-right"},func:()=>{this.showDeleteViewDialog()}},this.menuBar));const M=createMenuIcon("fas fa-adjust",{tooltip:{text:"Change Theme",position:"bottom-left"},func:H=>{this.themeMenu.show(H)}},this.rightMenuBar);if(M.style.margin="3px",S.permission==="edit"){const H=createMenuIcon("fas fa-upload",{tooltip:{text:"Add datasource",position:"bottom-left"},func:J=>{new FileUploadDialogReact}},this.menuBar);H.style.margin="3px"}this._setupThemeContextMenu(),this.contentDiv=createEl("div",{styles:{flex:"1 1 auto",position:"relative"}},this.containerDiv),this.contentDiv.classList.add("ciview-contentDiv"),this.gridStack=new GridStackManager(this),this.charts={},this.config=S;const P=this.config;if(P.chart_color=P.chart_color||"white",this.dataLoader=_.function,this.viewLoader=_.viewLoader,this.layoutMenus={},_.files){this.filesToLoad=_.files.length;for(const H of _.files)this.loadFile(H,()=>{this.filesToLoad--,this.filesToLoad===0&&this._loadView(S,_,!0)})}else this._loadView(S,_,!0);for(const H of this.dataSources){const J=H.dataStore.links;if(J)for(const K in J){const oe=this.dsIndex[K].dataStore;if(!oe){console.warn(`datasource ${H.name} has link to non-existent datasource ${K}`);return}J[K].interactions&&this._addInteractionLinks(H.dataStore,oe,J[K].interactions),J[K].valueset&&this._addValuesetLink(H.dataStore,oe,J[K].valueset),J[K].column_pointer&&console.warn("experimental column_pointer links not currently supported")}}}_addValuesetLink(s,f,_){const S=f.getDimension("valueset_dimension"),T=s.columnIndex[_.source_column],F=f.columnIndex[_.dest_column],M=T.values&&F.values;Promise.all([this._getColumnsAsync(s.name,[_.source_column]),this._getColumnsAsync(f.name,[_.dest_column])]).then(()=>{s.addListener(`${s.name}-${f.name}_valueset`,async(P,H)=>{if(this.viewData.dataSources[f.name]){if(P==="filtered"){if(!H||typeof H=="string"||!H.filterArray){S.removeFilter();return}await this._getColumnsAsync(s.name,[_.source_column]);const J=await H.getValueSet(_.source_column);await this._getColumnsAsync(f.name,[_.dest_column]),S.filter("filterValueset",[_.dest_column],J)}else if(P==="data_highlighted"){await this._getColumnsAsync(s.name,[_.source_column]),await this._getColumnsAsync(f.name,[_.dest_column]);const{indexes:J}=H;if(M){const K=new Set(J.map(oe=>T.values[T.data[oe]]));S.filter("filterValueset",[_.dest_column],K)}else S.filter("filterValueset",[_.dest_column],new Set(J))}}})})}_addColumnPointerLink(s,f,_){const S=s.columnIndex[_.source_column];if(!S.values)throw new Error("Only text-like columns are supported for column pointer links");s.addListener(`${s.name}-${f.name}_column_pointer`,async(F,M)=>{var P;if(F==="data_highlighted"){const H=(P=this.charts[_.target_chart])==null?void 0:P.chart;if(!H){console.log(`No chart with id ${_.target_chart} found - bypassing column pointer link`);return}await this._getColumnsAsync(s.name,[_.source_column]);const{indexes:J}=M,K=S.values[S.data[J[0]]];H.config[_.target_property]=K,H.setTitle(K),_.target_property==="color_by"&&H.colorByColumn(K)}})}_addInteractionLinks(s,f,_){const S=f.getDimension("category_dimension"),T=_.interaction_columns,F=T[0],M=T[1],P=_.pivot_column;s.syncColumnColors.push({dataSource:f.name,columns:[{link_to:T[2],col:T[0]},{link_to:T[2],col:T[1]},{link_to:P,col:P}]}),s.addListener(`${s.name}-${f.name}_interaction`,async(H,J)=>{if(H==="data_highlighted"){await this._getColumnsAsync(s.name,[F,M,P]);const K=s.getRowAsObject(J.indexes[0],[F,M,P]);await this._getColumnsAsync(f.name,[T[2]]);const oe=[K[F],K[M]];if(oe.operand="and",S.filter("filterCategories",[T[2]],oe),_.is_single_region&&f.regions&&this.dsPanes[f.name]&&!this.getAllCharts(f.name).find(se=>se.config.region===K[P])){const se={type:"image_scatter_plot"};BaseChart.types.image_scatter_plot.init(se,f,{region:K[P]}),this.addChart(f.name,se)}}})}_setUpChangeLayoutMenu(s){this.layoutMenus[s.name]=new ContextMenu(()=>{const f=this.viewData.dataSources[s.name].layout||"absolute";return[{text:"Absolute",ghosted:f==="absolute",func:()=>this.changeLayout("absolute",s)},{text:"Grid Stack",ghosted:f==="gridstack",func:()=>this.changeLayout("gridstack",s)}]})}changeLayout(s,f){const _=this.viewData.dataSources[f.name],S=_.layout||"absolute";s!==S&&(S==="gridstack"?this.gridStack.destroy(f):S==="absolute"&&this.getAllCharts(f.name).forEach(T=>{const F=T.getDiv();removeResizable(F),removeDraggable(F)}),_.layout=s,s==="absolute"?this.getAllCharts(f.name).forEach(T=>this._makeChartRD(T,f)):s==="gridstack"&&this.getAllCharts(f.name).forEach(T=>{this.gridStack.manageChart(T,f,this._inInit)}))}_setupThemeContextMenu(){this.themeMenu=new ContextMenu(()=>{const s=[];for(const f in themes)s.push(this.__getMenuItem(f));return s})}__getMenuItem(s){return{text:s,ghosted:this.theme===s,func:()=>this.setTheme(s)}}setTheme(s){if(this.theme=s,document.getElementsByTagName("html")[0].className=s,!!this.charts)for(const f in this.charts){const _=this.charts[f];_.chart.themeChanged&&_.chart.themeChanged()}}_sync_colors(s,f,_){for(const S of s){const T=f.columnIndex[S.link_to],F=_.columnIndex[S.col],M=new Array(F.values),P=f.getColumnColors(S.link_to);if(!T.values||!F.values){console.error(`failed to _sync_colors '${S.link_to}', '${S.col}' - expected 'text' or similar columns`);continue}for(let H=0;H<T.values.length;H++){const J=T.values[H],K=F.values.indexOf(J);K!==-1&&(M[K]=P[H])}F.colors=M}}_initiateOffsets(s){const f=s.dataStore,_=f.offsets,S=_.param,T=[S[0],S[1],_.groups];_.background_filter&&T.push(_.background_filter),this._getColumnsThen(s.name,T,()=>{f.initiateOffsets(),f.updateColumnOffsets(),f.updateColumnOffsets(null,!0,!0)})}_loadView(s,f,_=!1){s.all_views?(this.currentView=s.initial_view||s.all_views[0],this.viewSelect.value=this.currentView,f.viewLoader(this.currentView).then(S=>{this._init(S,_)})):this._init(s.only_view,_)}getDataSource(s){return this.dsIndex[s].dataStore}async _init(s,f=!1){if(s){if(!s.dataSources){s.dataSources={};for(const P in s.initialCharts)s.dataSources[P]={}}this.viewData=s}else{const P={};for(const H in this.dsIndex)P[H]={layout:"gridstack"};this.viewData={dataSources:P,initialCharts:{}}}for(const P of this.dataSources)P.contentDiv=void 0,P.menuBar=void 0;const _=Object.keys(this.viewData.dataSources);let S=[];for(const P of _){const H=this.viewData.dataSources[P].panelWidth;if(!H){S=null;break}S.push(H)}this.dsPanes={};const T=splitPane(this.contentDiv,{number:_.length,sizes:S});for(let P=0;P<_.length;P++){const H=T[P];H.style.display="flex",H.style.flexDirection="column";const J=this.dsIndex[_[P]];this.dsPanes[J.name]=H,this.columnsLoading[J.name]={},J.charts=[],J.menuBar=createEl("div",{classes:["ciview-menu-bar"]},H);const K=createEl("div",{styles:{flex:"1 1 auto",position:"relative",overflow:"auto",height:"100px"}},H);this._setUpMenu(J),J.contentDiv=createEl("div",{styles:{position:"relative",height:"100%"}},K),J.contentDiv.classList.add("ciview-contentDiv"),this._setUpChangeLayoutMenu(J)}if(f)for(const P of this.dataSources){const H=P.dataStore;H.offsets&&this._initiateOffsets(P),P.column_link_to&&this._sync_colors(P.column_link_to.columns,this.dsIndex[P.column_link_to.dataSource].dataStore,H);for(const J of H.syncColumnColors)try{this._sync_colors(J.columns,this.dsIndex[J.dataSource].dataStore,H)}catch{console.warn(`error syncing colors for '${H.name}' and '${J.dataSource}'`)}}const F=s?s.initialCharts||{}:{};this._toLoadCharts=new Set;for(const P in F)for(const H of F[P])this._toLoadCharts.add(H);this._toLoadCharts.size===0&&(this._toLoadCharts=void 0,this.currentView===void 0?this.dataSources.length===0?new FileUploadDialogReact:this.showAddViewDialog():this._callListeners("view_loaded",this.currentView)),this._inInit=!0;const M=[];for(const P in F)for(const H of F[P])M.push(this.addChart(P,H));await Promise.all(M),this._inInit=!1}_addDSListeners(s){s.dataStore.addListener("l1",(f,_)=>{if(f==="column_removed")this._columnRemoved(s,_);else if(f==="data_highlighted")_.dataStore=s.dataStore,this._callListeners(f,_);else if(f==="filtered"){if(!this.progressBars[s.name])return;s.dataStore.size;const S=s.dataStore.filterSize;this.progressBars[s.name].setValue(S),this.progressBars[s.name].setText(S),this._callListeners(f,_)}})}showAddViewDialog(){const s=[{type:"checkbox",id:"clone-view",label:"Clone current view"},{type:"text",id:"name",label:"name"}];if(this.dataSources.length>1)for(const f of this.dataSources)s.push({type:"checkbox",id:f.name,label:`Include ${f.name}`});new CustomDialog({title:"Add New View",controls:s,buttons:[{text:"Create New View",method:f=>{if(createEl("option",{text:f.name,value:f.name},this.viewSelect),this.viewSelect.value=f.name,this.currentView=f.name,f["clone-view"]){const _=this.getState();this._callListeners("state_saved",_)}else{for(const S in this.viewData.dataSources)this.viewData.dataSources[S].layout==="gridstack"&&this.gridStack.destroy(this.dsIndex[S]);this.removeAllCharts(),this.viewData.links=[];const _=this.getState();if(_.view.initialCharts={},_.view.dataSources={},this.dataSources.length===1)_.view.initialCharts[this.dataSources[0].name]=[],_.view.dataSources[this.dataSources[0].name]={};else for(const S in this.dsIndex)f[S]&&(_.view.initialCharts[S]=[],_.view.dataSources[S]={});this._callListeners("state_saved",_),this.contentDiv.innerHTML="",this._init(_.view)}}}]})}showSaveViewDialog(s){new CustomDialog({title:"Save View",text:"Do you want to save the current view",buttons:[{text:"YES",method:()=>{const f=this.getState();this._callListeners("state_saved",f),s()}},{text:"NO",method:()=>{s()}}]})}showDeleteViewDialog(){new CustomDialog({title:"Delete View",text:"Do you want to delete the current view?",buttons:[{text:"YES",method:()=>{this.deleteCurrentView()}},{text:"NO",method:()=>{}}]})}changeView(s){for(const f in this.viewData.dataSources)this.viewData.dataSources[f].layout==="gridstack"&&this.gridStack.destroy(this.dsIndex[f]);this.removeAllCharts(),this.contentDiv.innerHTML="",this.currentView=s,this.viewLoader(s).then(f=>{this._init(f)})}deleteCurrentView(){this.viewSelect.querySelector(`option[value='${this.viewSelect.value}']`).remove();const f=this.getState();f.view=null,this._callListeners("state_saved",f),this.currentView=this.viewSelect.value,this.changeView(this.viewSelect.value)}_columnRemoved(s,f){const _=[];for(const S in this.charts){const T=this.charts[S];if(T.dataSource===s){const F=T.chart,M=F.getDiv();F.onColumnRemoved(f)&&(M.remove(!1),_.push(S),this._removeLinks(F),this._callListeners("chart_removed",F))}}_.length>0&&s.dataStore._callListeners("filtered");for(const S of _)delete this.charts[S]}_getColumnsRequiredForChart(s){const f=new Set,_=s.param;if(_)if(typeof _=="string")f.add(_);else for(const T of _)f.add(T);s.color_by&&(s.color_by.column?f.add(s.color_by.column.field):f.add(s.color_by)),s.tooltip&&s.tooltip.column&&f.add(s.tooltip.column),s.background_filter&&f.add(s.background_filter.column);const S=BaseChart.types[s.type];return S.configEntriesUsingColumns&&S.configEntriesUsingColumns.forEach(T=>{let F=s[T];if(F){F=Array.isArray(F)?F:[F];for(const M of F)f.add(M)}}),[...f]}loadFile(s,f){const _={csv,json,tsv},S=this.createInfoAlert("loading file",{spinner:!0});_[s.type](s.url).then(T=>{const F={},M=s.dataSource,P=this.dsIndex[M].dataStore,H=P.getAllColumns();for(const K of T.columns)P.columnIndex[K]&&(F[K]=[]);for(let K=0;K<T.length;K++){const oe=T[K];K+1%100===0&&this.updateInfoAlert(S,`processed ${K}/${T.length} rows`);for(const se in F)F[se].push(oe[se])}let J=0;for(const K in F)P.setColumnData(K,F[K]),J++,this.updateInfoAlert(S,`processed ${J}/${H.length} columns`);this.updateInfoAlert(S,"complete",{duration:2e3}),f&&f()})}_getUpdatedColumns(s){const f=s.dirtyColumns,_={columns:[],added:[],removed:[],colors_changed:[]};for(const T in f.added){const F=S(T);_.columns.push(F),_.added.push(T)}for(const T in f.removed)_.removed.push(T);for(const T in f.data_changed)if(!_.columns[T]){const F=S(T);_.columns.push(F)}for(const T in f.colors_changed)_.colors_changed.push({column:T,colors:s.columnIndex[T].colors});return _;function S(T){const F=s.columnIndex[T],M={values:F.values,datatype:F.datatype,name:F.name,editable:!0,field:F.field},P=new Array(F.data.length);for(let H=0;H<F.data.length;H++)P[H]=F.data[H];return{metadata:M,data:P}}}saveState(){const s=this.getState();this._callListeners("state_saved",s)}getState(){const s={},f={},_={};for(const F of this.dataSources){if(F.contentDiv){s[F.name]=[];const P=this.dsPanes[F.name].style.width,H=/calc\((.+)\%.+/;this.viewData.dataSources[F.name].panelWidth=Number.parseFloat(P.match(H)[1])}f[F.name]=this._getUpdatedColumns(F.dataStore);const M=F.dataStore;if(M.dirtyMetadata.size!==0){_[F.name]={};for(const P of M.dirtyMetadata)_[F.name][P]=M[P]}}for(const F in this.charts){const M=this.charts[F],P=M.chart,H=P.getConfig(),J=P.getDiv();this.viewData.dataSources[M.dataSource.name].layout==="gridstack"?(H.gsposition=[Number.parseInt(J.getAttribute("gs-x")),Number.parseInt(J.getAttribute("gs-y"))],H.gssize=[Number.parseInt(J.getAttribute("gs-w")),Number.parseInt(J.getAttribute("gs-h"))]):H.position=[J.offsetLeft,J.offsetTop],s[M.dataSource.name].push(H)}const S=JSON.parse(JSON.stringify(this.viewData));S.initialCharts=s;const T=this.viewSelect?Array.from(this.viewSelect.children,F=>F.value):null;return{view:S,currentView:this.currentView,all_views:T,updatedColumns:f,metadata:_}}setAllColumnsClean(){for(const s of this.dataSources)s.dataStore.setAllColumnsClean()}showCustomDialog(s){new CustomDialog(s)}addMenuIcon(s,f,_,S){const T=s==="_main"?"bottom-right":"bottom",F=s==="_main"?this.leftMenuBar:this.dsIndex[s].menuBar;return createMenuIcon(f,{tooltip:{text:_,position:T},func:S},F)}createInfoAlert(s,f={}){const _=getRandomString(),S=Object.keys(this.infoAlerts).length;f.type=f.type||"info";const T=createEl("div",{classes:["ciview-info-alert",`ciview-alert-${f.type}`],styles:{right:"10px",top:`${50+S*40}px`}},this.containerDiv);let F=null;const M=createEl("span",{text:s},T);return f.spinner&&(F=createEl("i",{classes:["fas","fa-spinner","fa-spin","ciview-info-alert-spin"]},T)),this.infoAlerts[_]={div:T,text:M,spinner:F,type:f.type},f.duration&&this.removeInfoAlert(_,f.duration),_}updateInfoAlert(s,f,_={}){const S=this.infoAlerts[s];_.type&&S.type!==_.type&&(S.div.classList.remove(`ciview-alert-${S.type}`),S.div.classList.add(`ciview-alert-${_.type}`),S.type=_.type),S.text.textContent=f,_.duration&&this.removeInfoAlert(s,_.duration)}removeInfoAlert(s,f=2e3){const _=this.infoAlerts[s].spinner;_&&_.remove(),setTimeout(()=>{if(!this.infoAlerts[s])return;this.infoAlerts[s].div.remove(),delete this.infoAlerts[s];let S=50;for(const T in this.infoAlerts)this.infoAlerts[T].div.style.top=`${S}px`,S+=40},f)}clearInfoAlerts(){for(const s in this.infoAlerts)this.infoAlerts[s].div.remove();this.infoAlerts={}}loadColumnSet(s,f,_,S=10,T=2){if(s.length===0){_();return}const F=getRandomString(),M=this.config.dataloading||{};S=M.split||10,T=M.threads||2,this.transactions[F]={callback:_,columns:[],totalColumns:s.length,failedColumns:[],nextColumn:0,columnsLoaded:0,id:F};let P=[];const H=this.transactions[F];for(const K of s)this.columnsLoading[f][K]=!0,P.push(K),P.length===S&&(H.columns.push(P),P=[]);P.length!==0&&(H.columns.push(P),P=[]),H.alertID=this.createInfoAlert(`Loading Columns:0/${s.length}`,{spinner:!0});const J=Math.min(H.columns.length,T);for(let K=0;K<J;K++)this._loadColumnData(H,f)}_loadColumnData(s,f){const _=this.dsIndex[f].dataStore,S=s.columns[s.nextColumn++],T=[];for(const F of S)T.push(_.getColumnInfo(F));T.sort((F,M)=>column_orders[F.datatype]-column_orders[M.datatype]),this.dataLoader(T,f,_.size).then(F=>{for(const M of F)_.setColumnData(M.field,M.data);s.columnsLoaded++}).catch(F=>{console.log(F),s.columnsLoaded++,s.failedColumns.push(T)}).finally(()=>{const F=s.columns.length,M=s.columnsLoaded;let P=M*S.length;for(const H of S)delete this.columnsLoading[f][H];P=P>s.totalColumns?s.totalColumns:P,this.updateInfoAlert(s.alertID,`Loading Columns:${P}/${s.totalColumns}`),M>=F&&(this.updateInfoAlert(s.alertID,`Loaded ${F} column${F===1?"":"s"}`,{duration:2e3}),s.callback(s.failedColumns),delete this.transactions[s.id]),s.nextColumn<F&&this._loadColumnData(s,f)})}_addLinkIcon(s,f,_){createMenuIcon("fas fa-plus-square",{tooltip:{text:`Add ${_.name}`,position:"bottom-right"},func:()=>{new AddColumnsFromRowsDialog(s,f,_,this)}},s.menuBar)}_setUpMenu(s){const f=s.dataStore;if(createMenuIcon("fas fa-chart-bar",{tooltip:{text:"Add Chart",position:"bottom-right"},func:()=>{new BaseDialog.experiment.AddChartDialogReact(f)}},s.menuBar),createMenuIcon("fas fa-sync-alt",{tooltip:{text:"Reset All Filters",position:"bottom-right"},func:()=>{f.removeAllFilters()}},s.menuBar),createMenuIcon("fas fa-palette",{tooltip:{text:"Change Color Scheme",position:"bottom-right"},func:()=>{try{new ColorChooser(this,s)}catch(M){console.error("error making ColorChooser",M),this.createInfoAlert("Error making color chooser",{type:"warning",duration:2e3})}}},s.menuBar),createMenuIcon("fas fa-th",{tooltip:{text:"Change layout",position:"bottom-right"},func:M=>{this.layoutMenus[s.name].show(M)}},s.menuBar),this.addMenuIcon(s.name,"fas fa-tags","Tag Annotation",()=>{new BaseDialog.experiment.AnnotationDialogReact(s.dataStore)}),f.links)for(const M in f.links){const P=f.links[M];P.rows_as_columns&&this._addLinkIcon(s,this.dsIndex[M],P.rows_as_columns)}const _=createEl("div",{styles:{float:"right",lineHeight:"1.0"}},s.menuBar);createEl("span",{text:s.name,styles:{verticalAlign:"top",fontSize:"16px",marginRight:"4px"}},_);const S=s.dataStore.size;s.filterBar=createEl("progress",{value:S},s.menBar);const T=createEl("div",{styles:{width:"100px",display:"inline-block",marginTop:"2px"}},_),F={max:S,value:S,text:`${S}`};this.progressBars[s.name]=new MDVProgress(T,F),this._addFullscreenIcon(s)}_addFullscreenIcon(s){createMenuIcon("fas fa-expand",{tooltip:{text:"Full Screen",position:"bottom-right"},func:()=>{s.menuBar.parentElement.requestFullscreen()}},s.menuBar)}addListener(s,f){this.listeners[s]=f}removeListener(s){delete this.listeners[s]}_callListeners(s,f){for(const _ in this.listeners)this.listeners[_](s,this,f)}async addChart(s,f,_=!1){if(!BaseChart.types[f.type])throw this.createInfoAlert(`Tried to add unknown chart type '${f.type}'`,{type:"danger",duration:2e3}),`Unknown chart type ${f.type}`;const S=this._getColumnsRequiredForChart(f);if(f.location){const oe=f.location,se=5;f.size=[oe.width*90+oe.width*se-se,oe.height*40+oe.height*se-se],f.position=[(oe.x+1)*se+oe.x*90,(oe.y+1)*se+oe.y*40]}const T=this.dsIndex[s],{width:F,height:M,left:P,top:H}=positionChart(T,f),J=themes[this.theme],K=createEl("div",{styles:{position:"absolute",width:`${F}px`,height:`${M}px`,left:`${P}px`,top:`${H}px`,background:J.main_panel_color,zIndex:"2",display:"flex",alignItems:"center",justifyContent:"center"}},T.contentDiv);createEl("i",{classes:["fas","fa-circle-notch","fa-spin"],styles:{fontSize:"30px",color:J.text_color}},K),createEl("div",{styles:{position:"absolute",overflow:"hide",textAlign:"center",top:"3px",color:J.text_color,textOverflow:"ellipsis",wordBreak:"break-all",fontSize:"16px"},text:f.title},K);try{await this._getColumnsAsync(s,S),this._addChart(s,f,K,_)}catch(oe){this.clearInfoAlerts();const se=this.createInfoAlert(`Error creating chart with columns [${S.join(", ")}]: '${oe}'`,{type:"warning"});console.error(oe);const ae=this.infoAlerts[se].div;ae.onclick=()=>ae.remove();const ge=createEl("div",{styles:{position:"absolute",backdropFilter:"blur(10px)"}},K.lastElementChild);ge.innerHTML=`<div><h2>Error creating chart</h2><pre>${oe.stack}</pre></div>`,ge.onclick=()=>ge.remove()}}_getColumnsFromOtherSource(s,f,_,S,T){this._getColumnsThen(f,_.concat(S),()=>{const F=this.dsIndex[s].dataStore,M=this.dsIndex[f].dataStore,P=M.getColumnIndex(S),H=F.columnIndex[S],J=H.values.map(oe=>P[oe]),K=_.map(oe=>{const se=F.columnIndex[oe],ae=M.columnIndex[oe];ae.values&&(se.values=ae.values),ae.minMax&&(se.minMax=ae.minMax),ae.quantiles&&(se.quantiles=ae.quantiles);const ge=new SharedArrayBuffer(F.size*(se.datatype==="text"?1:4)),he=se.datatype==="text"?Uint8Array:Float32Array;return{col:oe,data:ge,arr:new he(ge),odata:ae.data}});for(let oe=0;oe<F.size;oe++){const se=J[H.data[oe]];for(const ae of K)ae.arr[oe]=ae.odata[se]}for(const oe of K)F.setColumnData(oe.col,oe.data);T()})}async _getColumnsAsync(s,f){return await new Promise(S=>{this._getColumnsThen(s,f,S)})}_getColumnsThen(s,f,_){const T=this.dsIndex[s].dataStore;if(T.links)for(const M in T.links){const P=T.links[M];if(P.columns){const H=[],J=[];for(const K of f)P.columns.indexOf(K)===-1?J.push(K):T.columnIndex[K].data||H.push(K);if(H.length>0){this._getColumnsThen(s,[P.index],()=>{this._getColumnsFromOtherSource(s,M,H,P.index,()=>{this._getColumnsThen(s,J,_)})});return}}}const F=f.filter(M=>{if(this.columnsLoading[s][M])return!1;const P=T.columnIndex[M];return P?!P.data:(T.addColumnFromField(M),!0)});F.length===0?this._haveColumnsLoaded(f,s,_):this.loadColumnSet(F,s,()=>{this._haveColumnsLoaded(f,s,_)})}_decorateColumnMethod(s,f,_){const S=`_${s}`;f[S]=f[s],f[s]=T=>{this._getColumnsThen(_,[T],()=>f[S](T))}}__decorateColumnMethod(s,f,_){const S=`_${s}`;f[S]=f[s],f[s]=()=>{if(arguments[0]==null)f[S](...arguments);else{const T=Array.isArray(arguments[0])?arguments[0]:[arguments[0]];this._getColumnsThen(_,T,()=>f[S](...arguments))}}}_haveColumnsLoaded(s,f,_){for(const S of s)if(this.columnsLoading[f][S]){setTimeout(()=>{this._haveColumnsLoaded(s,f,_)},500);return}_()}_addChart(s,f,_,S=!1){const T=this.dsIndex[s];_.innerHTML="",_.style.display="",_.style.alignItems="",_.style.justifyContent="";const F=BaseChart.types[f.type],M=new F.class(T.dataStore,_,f);if(this.charts[M.config.id]={chart:M,dataSource:T},this._makeChartRD(M,T),M.popoutIcon=M.addMenuIcon("fas fa-external-link-alt","popout",{func:()=>{this._popOutChart(M)}}),M.addMenuIcon("fas fa-times","remove chart").addEventListener("click",()=>{M.remove(),_.remove(),delete this.charts[M.config.id],this._removeLinks(M),this._callListeners("chart_removed",M)}),M.colorByColumn&&this._decorateColumnMethod("colorByColumn",M,s),M.setToolTipColumn&&this._decorateColumnMethod("setToolTipColumn",M,s),M.setBackgroundFilter&&this._decorateColumnMethod("setBackgroundFilter",M,s),M.changeContourParameter&&this._decorateColumnMethod("changeContourParameter",M,s),F.methodsUsingColumns)for(const H of F.methodsUsingColumns)this.__decorateColumnMethod(H,M,s);if(M.setupLinks){T.index_link_to&&this._giveChartAccess(M,this.dsIndex[T.index_link_to.dataSource].dataStore,T.index_link_to.index);for(const H of T.dataStore.accessOtherDataStore)this._giveChartAccess(M,this.dsIndex[H.dataSource].dataStore,H.index)}const P=T.column_link_to;if(P&&M.createColumnLinks){const H=(J,K)=>{this._getColumnsThen(P.dataSource,J,K)};M.createColumnLinks(this.dsIndex[P.dataSource].dataStore,P.columns,H)}if(S&&this._callListeners("chart_added",M),this._toLoadCharts&&(this._toLoadCharts.delete(f),this._toLoadCharts.size===0)){if(this._toLoadCharts=void 0,this.viewData.links)for(const H of this.viewData.links)this._setUpLink(H);this._callListeners("view_loaded",this.currentView)}return M}_giveChartAccess(s,f,_){const S=async(T,F)=>{T.push(_),await this._getColumnsAsync(f.name,T),F()};s.setupLinks(f,_,S)}_setUpLink(s){switch(s.id||(s.id=getRandomString()),s.type){case"color_by_column":s.set_color=!0,console.warn("legacy color_by_column link type - use chart_columnval_link with set_color=true instead"),addChartLink(s,this);break;case"chart_columnval_link":addChartLink(s,this);break}}_removeLinks(s){const f=[],_=s.config.id,S=this.viewData.links;if(S){for(let T=0;T<S.length;T++){const F=S[T];F.source_chart===_&&f.push(T);try{const M=F.target_charts||F.linked_charts,P=M.indexOf(_);P!==-1&&(M.splice(P,1),M.length===0&&f.push(T))}catch(M){console.error(`Error removing links for chart '${_}'`,M,F)}}for(const T of f)this.removeLink(T)}}removeLink(s){const f=this.viewData.links[s];switch(f.type){case"color_by_column":case"chart_columnval_link":this.charts[f.source_chart].chart.removeListener(f.id)}this.viewData.links.splice(s,1)}removeAllCharts(s){const f=[];for(const _ in this.charts){const S=this.charts[_];s&&s.indexOf(S.dataSource.name)===-1||f.push([S.chart,S.window])}for(const _ of f)_[1]&&_[1].close(),_[0].remove(),_[0].div.remove();this.charts={}}getAllFilters(s){const f=this.getAllCharts(s),_=[];for(const S of f){const T=S.getFilter();T&&_.push(T)}return _}getChart(s){const f=this.charts[s];return f?f.chart:null}getAllCharts(s){const f=[];for(const _ in this.charts){const S=this.charts[_];S.dataSource.name===s&&f.push(S.chart)}return f}setChartsAsGrid(s=5,f=[300,300],_=10){let S=_,T=_,F=0;for(const M in this.charts){const H=this.charts[M].chart.getDiv();H.style.left=`${T}px`,H.style.top=`${S}px`,T+=f[0]+_,F++,F===s&&(F=0,T=_,S+=f[1]+_)}}addButton(s,f,_){createEl("button",{classes:["ciview-button"],text:s,styles:{position:"fixed",bottom:"40px",right:"40px",fontSize:"18px",zIndex:"100"}},this.contentDiv).addEventListener("click",()=>f())}_popOutChart(s){popoutChart(s)}_sendAllChartsToBack(s){for(const f in this.charts){const _=this.charts[f];s===_.dataSource&&(_.chart.div.style.zIndex="")}}_makeChartRD(s,f){if(f&&this.gridStack&&this.viewData.dataSources[f.name].layout==="gridstack"){this.gridStack.manageChart(s,f,this._inInit);return}const _=s.getDiv();makeDraggable(_,{handle:".ciview-chart-title",contain:"topleft",ondragstart:S=>{this._sendAllChartsToBack(f),_.style.zIndex=2}}),makeResizable(_,{onResizeStart:()=>{this._sendAllChartsToBack(f),_.style.zIndex=2},onresizeend:(S,T)=>s.setSize(S,T)})}}let route="";function _mdvInit(d){const s=d===void 0;if(!s&&(route=d,route&&!route.startsWith("/project/")))throw new Error("routeFromTemplate must be undefined, the empty string, or in the form of '/project/<project_id>'");setProjectRoot(route),getConfigs(s).then(f=>{const _=f.state,T=new URLSearchParams(window.location.search).get("view");_.all_views&&T&&_.all_views.indexOf(T)!==-1&&(_.initial_view=T);const F={function:s?getLocalCompressedBinaryDataLoader(f.datasources,"."):getArrayBufferDataLoader(`${route}/get_data`),viewLoader:s?async P=>f.views[P]:getView,rowDataLoader:s?loadRowDataStatic:loadRowData,binaryDataLoader:s?loadBinaryDataStatic:loadBinaryData},M=(P,H,J)=>{switch(P){case"state_saved":getData(`${route}/save_state`,J).then(K=>{K.success?(H.createInfoAlert("Data Saved",{duration:2e3}),H.setAllColumnsClean()):H.createInfoAlert("UnableToSaveData",{duration:3e3,type:"danger"})});break;case"view_loaded":changeURLParam("view",H.currentView);break}};console.log(_),new ChartManager("holder",f.datasources,F,_,M)})}window._mdvInit=_mdvInit;async function loadRowData(d,s){return await getData(`${route}/get_row_data`,{datasource:d,index:s})}async function loadRowDataStatic(d,s){const f=await fetch(`${route}/rowdata/${d}/${s}.json`);return f.status!==200?null:await f.json()}async function getView(d){return await getData(`${route}/get_view`,{view:d})}async function loadBinaryDataStatic(d,s){const _=await(await fetch(`${route}/binarydata/${d}/${s}.gz, {responseType: "arraybuffer"}`)).arrayBuffer();return await decompressData(_)}async function loadBinaryData(d,s){const f=await getData(`${route}/get_binary_data`,{datasource:d,name:s},"arraybuffer");return await decompressData(f)}async function getConfigs(d){let s={};const f=async _=>fetchJsonConfig(_);if(d){let _=await f(`${route}/datasources.json`);s.datasources=await _.json(),_=await f(`${route}/state.json`),s.state=await _.json(),_=await f(`${route}/views.json`),s.views=await _.json()}else s=await getData(`${route}/get_configs`);return s}async function getData(d,s,f="json"){const _=await fetch(d,{method:"POST",body:JSON.stringify(s),headers:{Accept:"application/json,text/plain,*/*","Content-Type":"application/json"}});if(f==="json"){console.log("returning json, rewriting base_url first...");const S=await _.json();return console.log("original",S),S}return await _.arrayBuffer()}function changeURLParam(d,s){const f=new URL(window.location);f.searchParams.has(d)?f.searchParams.set(d,s):f.searchParams.append(d,s),f.search=f.searchParams,history.pushState({},null,f)}DoImportSideEffects();window.mdv={ChartManager,chartTypes:BaseChart.types};document.addEventListener("DOMContentLoaded",async()=>{try{await loadData()}catch(d){document.head.title="MDV - Error loading data",document.body.style.textAlign="center",document.body.innerHTML=`<h1>Error loading data</h1><p>${d}</p>`}});const{origin,pathname}=window.location,flaskURL=origin+pathname,urlParams=new URLSearchParams(window.location.search),isPopout=urlParams.get("popout")==="true",dir=urlParams.get("dir")||(isPopout?"":flaskURL);function getRoot(d){return d.endsWith("/")?d.substring(0,d.length-1):d}const root=getRoot(dir),staticFolder=urlParams.get("static")!==null;//!dir.startsWith("/project") && !(window.location.port === "5050") && !dir.endsWith("5050");
const project_name=dir.split("/").pop();document.title=`MDV - ${project_name}`;isPopout&&(document.title="MDV popout");async function loadData(){if(isPopout)return;setProjectRoot(root);const d=await fetchJsonConfig(`${root}/datasources.json`),s=await fetchJsonConfig(`${root}/state.json`);s.popouturl=void 0;const f=await fetchJsonConfig(`${root}/views.json`),_=urlParams.get("view");s.all_views&&_&&s.all_views.indexOf(_)!==-1&&(s.initial_view=_);const S=getDataLoader(staticFolder,d,f,dir),T=async(J,K,oe)=>{J==="state_saved"&&!staticFolder&&((await getPostData(`${root}/save_state`,oe)).success?(K.createInfoAlert("State saved",{duration:2e3}),K.setAllColumnsClean()):K.createInfoAlert("State save failed",{duration:3e3,type:"danger"})),J==="view_loaded"&&changeURLParam("view",K.currentView)},F=new ChartManager("holder",d,S,s,T),P=F.addMenuIcon("_main","fas fa-bug","View datasource metadata",async()=>{const J=await fetchJsonConfig(`${root}/datasources.json`),K=await fetchJsonConfig(`${root}/views.json`),oe=await fetchJsonConfig(`${root}/state.json`);new DebugChartReactWrapper({datasources:J,views:K,state:oe})});P.style.float="right",P.setAttribute("data-microtip-position","bottom-left");function H(J){const K=d[J].name;setTimeout(()=>{F.addMenuIcon(K,"fas fa-spinner","Pre-Load Data",async()=>{const oe=d[J].columns.map(se=>se.name);F.loadColumnSet(oe,K,()=>{console.log("done loadColumnSet")})})},100)}d.forEach((J,K)=>H(K))}export{BaseDialog as B,ColorPaletteExtension as C,DetailView as D,LercParameters as L,Matrix4 as M,RGBToHex as R,ScatterplotLayer as S,VolumeView as V,DETAIL_VIEW_ID as a,getRandomString as b,ColorPalette3DExtensions as c,Deck as d,getProjectURL as e,createEl as f,getChannelStats as g,hexToRGB as h,action as i,createFilterElement as j,BaseDecoder as k,loadOmeTiff as l,LercAddCompression as m,noUiSlider as n};
//# sourceMappingURL=mdv.js.map
