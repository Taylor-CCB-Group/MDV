(function(){"use strict";const f={int32:{arr:Int32Array,type:"number"},double:{arr:Float32Array,type:"number"},integer:{arr:Int32Array,type:"number"},text16:{arr:Uint16Array,type:"text"},text:{arr:Uint8Array,type:"text"},unique:{arr:Uint8Array,type:"unique"},multitext:{arr:Uint8Array,type:"multitext"}};onmessage=n=>{const{orderBuffer:c,columns:s}=n.data,r=new Uint32Array(c),u=s.map(t=>{const e=f[t.datatype],o=new e.arr(t.buffer);let a=null;return e.type==="text"?a=p({data:o,desc:t.desc,values:t.values}):e.type==="unique"?a=y({data:o,desc:t.desc,size:t.stringLength}):e.type==="multitext"?a=g({data:o,desc:t.desc,size:t.stringLength}):a=d({data:o,desc:t.desc}),a});r.sort((t,e)=>{for(const o of u){const a=o(t,e);if(a!==0)return a}return 0}),(void 0).postMessage("done")};function d({data:n,desc:c}){const s=c?-1:1;return(r,u)=>{let t=n[r],e=n[u];return t=Number.isNaN(t)?Number.MAX_VALUE:t,e=Number.isNaN(e)?Number.MAX_VALUE:e,(t>e?1:t<e?-1:0)*s}}function p({data:n,values:c,desc:s}){const r=l(c,s);return(u,t)=>r[n[u]]-r[n[t]]}function y({data:n,desc:c,size:s}){const r={},u=new TextDecoder,t=order===c?-1:1;for(let e=0;e<n.length;e++){const o=n[e];r[o]=u.decode(col.slice(o*s,o*s+s))}return(e,o)=>r[e].localeCompare(r[o])*t}function g({data:n,desc:c,values:s,size:r}){const u=l(s,c);return u[65536]=65356,(t,e)=>{const o=n.slice(t*r,t*r+r),a=n.slice(e*r,e*r+r);for(let i=0;i<r;i++){const m=u[o[i]]-u[a[i]];if(m!==0)return m;if(o[i]===65536&&a[i]===65536)return 0}return 0}}function l(n,c){const s=c?-1:1,r=n.map((t,e)=>[t,e]).sort((t,e)=>t[0].localeCompare(e[0])*s),u={};for(let t=0;t<r.length;t++)u[r[t][1]]=t;return u}})();
//# sourceMappingURL=sortWorker-ydVuDOCI.js.map
