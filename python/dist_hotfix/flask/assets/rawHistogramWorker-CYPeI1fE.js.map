{"version":3,"file":"rawHistogramWorker-CYPeI1fE.js","sources":["../src/datastore/rawHistogramWorker.ts"],"sourcesContent":["\ntype HistogramConfig = {\n    data: SharedArrayBuffer;\n    min: number;\n    max: number;\n    bins: number;\n    isInt32: boolean;\n    // todo pass in related to ~background_filter\n    // as it may pertain to the view, or the chart, or in general some node in a graph...\n    // filteredIndices?: SharedArrayBuffer; \n}\n\nself.onmessage = async (event: MessageEvent<HistogramConfig>) => {\n    const { isInt32, data, min, max, bins } = event.data;\n    // this logic is ok for MDV columns as of this writing\n    // but what about viv raster data for example?\n    const arrType = isInt32 ? Int32Array : Float32Array;\n    const dataArray = new arrType(data);\n    const hist = new Array(bins).fill(0);\n    const binWidth = (max - min) / bins;\n    for (let i = 0; i < dataArray.length; i++) {\n        const bin = Math.floor((dataArray[i] - min) / binWidth);\n        if (bin >= 0 && bin < bins) {\n            hist[bin]++;\n        }\n    }\n    self.postMessage(hist);\n}"],"names":["event","isInt32","data","min","max","bins","arrType","dataArray","hist","binWidth","i","bin"],"mappings":"yBAYA,KAAK,UAAY,MAAOA,GAAyC,CAC7D,KAAM,CAAE,QAAAC,EAAS,KAAAC,EAAM,IAAAC,EAAK,IAAAC,EAAK,KAAAC,GAASL,EAAM,KAG1CM,EAAUL,EAAU,WAAa,aACjCM,EAAY,IAAID,EAAQJ,CAAI,EAC5BM,EAAO,IAAI,MAAMH,CAAI,EAAE,KAAK,CAAC,EAC7BI,GAAYL,EAAMD,GAAOE,EAC/B,QAASK,EAAI,EAAGA,EAAIH,EAAU,OAAQG,IAAK,CACvC,MAAMC,EAAM,KAAK,OAAOJ,EAAUG,CAAC,EAAIP,GAAOM,CAAQ,EAClDE,GAAO,GAAKA,EAAMN,GAClBG,EAAKG,CAAG,GAEhB,CACA,KAAK,YAAYH,CAAI,CACzB"}